<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [stringtemplate-interest] ST 4.0 planning
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:stringtemplate-interest%40antlr.org?Subject=Re:%20%5Bstringtemplate-interest%5D%20ST%204.0%20planning&In-Reply-To=%3C8B507E38-66A0-4C2B-BE78-923832E8A278%40cs.usfca.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001649.html">
   <LINK REL="Next"  HREF="001639.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[stringtemplate-interest] ST 4.0 planning</H1>
    <B>Terence Parr</B> 
    <A HREF="mailto:stringtemplate-interest%40antlr.org?Subject=Re:%20%5Bstringtemplate-interest%5D%20ST%204.0%20planning&In-Reply-To=%3C8B507E38-66A0-4C2B-BE78-923832E8A278%40cs.usfca.edu%3E"
       TITLE="[stringtemplate-interest] ST 4.0 planning">parrt at cs.usfca.edu
       </A><BR>
    <I>Mon Sep  8 10:48:19 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001649.html">[stringtemplate-interest] PyST: first() and rest() don&#8217;t work on iterable non-lists
</A></li>
        <LI>Next message: <A HREF="001639.html">[stringtemplate-interest] ST 4.0 planning
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1638">[ date ]</a>
              <a href="thread.html#1638">[ thread ]</a>
              <a href="subject.html#1638">[ subject ]</a>
              <a href="author.html#1638">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear ST-o-philes and related humans,

I am starting the planning stages for ST 4.0. I begin my sabbatical  
next May, a few months after I finish this current book. I plan on  
writing software like crazy (for 15 months!). This will include  
optimizing ANTLR and hopefully converting ANTLR and ST to be ANTLR v3  
clean; no more ANTLR v2 requirement.

As part of converting ST to v3 grammars, I took a look at updating  
things.  As I looked through all the complicated code that manages  
dynamic scopes, parameters, and nested templates I realized that there  
is a lot of stuff going on in there.  ST groove organically from a  
simple string with holes in it to a sophisticated tree-based  
interpreter. Tree-based Interpreters are much more difficult to build  
then, say, a byte code interpreter. Further, debugging ST stuff is  
quite difficult because all you have are objects and you have to chase  
a lot of pointers through hash tables and so on to figure out what is  
going on.  There is no code to step through related to your templates.

I am contemplating moving to a JSP-like model where I generate Java  
(or C# or Python, ...) instead of doing an interpreter. There are a  
number of advantages:

1. In principle, we could use the rechargeable architecture pattern of  
ANTLR to generate whatever source code we want; C++ and so on. the  
only requirement would be some sort of reflection still because I  
don't want attributes to be typed in ST. That means that you'd need  
RTTI for C++, which it supposedly has now.

2.  I would suspect that the templates would go much faster when  
executing &quot;natively&quot; in Java.

3. You could debug templates by stepping through them just like you do  
ANTLR parsers. Templates would translate to Java methods. Groups would  
translate to objects.  Like JSP, we could automatically compile things  
in the background. This means that they would go slow the first time  
you ran the template. Also, I would have to investigate a custom class  
loader so that I could unload templates.

I'm planning on breaking with absolute backward compatibility to fix a  
number of design flaws that came about because requirements changed  
during the last eight years.

So, it is a bit premature, but I like to have things to think about  
while I'm waiting in line etc...

The idea of generating Java code is growing on me. Note that it would  
only be generating Java or stay an interpreter. I would not do both.  
Those are two totally separate products almost in terms of  
implementation.

Ter
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001649.html">[stringtemplate-interest] PyST: first() and rest() don&#8217;t work on iterable non-lists
</A></li>
	<LI>Next message: <A HREF="001639.html">[stringtemplate-interest] ST 4.0 planning
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1638">[ date ]</a>
              <a href="thread.html#1638">[ thread ]</a>
              <a href="subject.html#1638">[ subject ]</a>
              <a href="author.html#1638">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest">More information about the stringtemplate-interest
mailing list</a><br>
</body></html>
