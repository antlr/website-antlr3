From bob at werken.com  Sat Jun  1 08:07:22 2002
From: bob at werken.com (bob mcwhirter)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Re: ACE C preprocessor by Gosling
In-Reply-To: <000401c20909$f1a986d0$0200a8c0@matthewfnb>
Message-ID: <Pine.LNX.3.96.1020601110538.2452C-100000@exeter.exeter.org>


This is starting to sound more like configuration-managment issues, now.

The only problem I see with auto-saves and unlimited undo, is, how do you
revert from one version to another?  If you didn't explicitly save, you
don't know what version you need to go back.

And I'd certainly not be happy with hitting [undo] several hundred times
to find the version I want.

So, I'd have to add:

11b) Visual browser of the autosaved versions, summarizing the changes
between any two arbitrary versions.  

	-bob

On Sat, 1 Jun 2002, Matthew Ford wrote:

> My two bits worth are (mainly to do with user interface)
> 11) No dialog boxes that ask you "Do you really want to do that", even for
> deletes and overwrites of files.  These should be replaced with unlimited
> undo (persistent would be nice).
> 11a) As a corollary of 11) no  "File Save"  menu item as any changes you
> make should be always be saved (Hay that's why you made them wasn't it).


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Matthew.Ford at forward.com.au  Sat Jun  1 21:59:26 2002
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Re: ACE C preprocessor by Gosling
References: <Pine.LNX.3.96.1020601110538.2452C-100000@exeter.exeter.org>
Message-ID: <000601c209f2$45308ae0$0200a8c0@matthewfnb>

> The only problem I see with auto-saves and unlimited undo, is, how do you
> revert from one version to another?  If you didn't explicitly save, you
> don't know what version you need to go back.

Good point. Just let me climb off my hobby horse and get my feet back on the
ground.

11c)  The ability to name a version.  This is equivalent to tagging a point
in the undo history and giving it a name.
Could be convenient to collapse the undo list to display just the tagged
items and to be able to "undo to tag" or "expand tag" which would expand the
undo list between this tag and the next most recent tag.
Obviously "File SaveAs" would still be available to save a version as
something else, complete with its undo history would be nice.

matthew

P.S. I would be interested on working on this as it has applications
everywhere.  At the moment I have beta "File SaveAs" undoable object which
renames any existing file before saving the current one with that name.
Doesn't follow Java's undo interface though.  Need to fix that.

----- Original Message -----
From: "bob mcwhirter" <bob@werken.com>
To: <antlr-interest@yahoogroups.com>
Sent: Sunday, June 02, 2002 1:07 AM
Subject: Re: [antlr-interest] Re: ACE C preprocessor by Gosling


>
> This is starting to sound more like configuration-managment issues, now.
>
> The only problem I see with auto-saves and unlimited undo, is, how do you
> revert from one version to another?  If you didn't explicitly save, you
> don't know what version you need to go back.
>
> And I'd certainly not be happy with hitting [undo] several hundred times
> to find the version I want.
>
> So, I'd have to add:
>
> 11b) Visual browser of the autosaved versions, summarizing the changes
> between any two arbitrary versions.
>
> -bob
>
> On Sat, 1 Jun 2002, Matthew Ford wrote:
>
> > My two bits worth are (mainly to do with user interface)
> > 11) No dialog boxes that ask you "Do you really want to do that", even
for
> > deletes and overwrites of files.  These should be replaced with
unlimited
> > undo (persistent would be nice).
> > 11a) As a corollary of 11) no  "File Save"  menu item as any changes you
> > make should be always be saved (Hay that's why you made them wasn't it).
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnclarke at hotmail.com  Tue Jun  4 04:20:58 2002
From: johnclarke at hotmail.com (johnclarke72)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Grammar Problem
Message-ID: <adi7qq+or21@eGroups.com>

Hi,
   I am currently having problems with a HTML Grammar that I am 
writing.  The Grammar has been added to the end of this e-mail.

When I enter HTML comments (<!-- This is a Comment -->) and End Tags 
(</endTag>) it handles it correctly.

However,  if I enter <test> or anything similar to this I get 
an "line 1: unexpected token: test" error message.  

How can I get this to work ?

I would be grateful for all advice offered regarding this.

John

HTMLTagLexer.g
==============

// Import the required Classes
header
{
   import java.util.*;
   import antlr.*;
}

// Define the class
class HTMLTagLexer extends Lexer;

// Set the options for the Lexer
options
{
  k=3;                             // Set the look ahead to 3 
Characters
  caseSensitive = false;           // Set Case Sensitivity to false
  charVocabulary = '\1' .. '\377'; // Set the Lexer Character 
Vocabulary
  testLiterals = false;            // Don't test against the Literals 
table
  exportVocab = HTMLTagLexer;      // The Grammar to export
}

// The routines that will enable us to switch between lexer states
{
   // The Current Selector
   TokenStreamSelector selector;

   // The method that will enable us to switch between lexer states
   public void setSelector(TokenStreamSelector tokenStreamSelector)
   {
     selector = tokenStreamSelector;
   }
}

// Define the Tokens required for the Grammar

// Various HTML Marker Tags
INITSTARTTAG   : "<";
FINISHSTARTTAG : ">";
EQUALS         : "=";

// HTML Comments
HTMLCOMMENT : "!--"! (options {greedy=false;} : .)* "-->"!
              {selector.pop();}
              ;

// Main HTML Tags Section.  This defines the Tag names,
// attributes and attribute values

// TAGDATA is used to define the Tag Name and names of
// attributes used within the tag
TAGDATA : (~(' ' | '\r' | '\n' | '\t' | '<' | '>' | '/' | '!' | '='))
+;

// TAGVALUE is used to define the values for attributes
// used within the tags


// Definition of an End Tag
ENDTAG   : '/'! ( 'a'..'z' )+ ">"! {selector.pop();};

// Ignore all White Space
WS : ( ' '
     | '\t'
     | '\r' '\n' { newline(); }
     | '\n' { newline(); }
     )
     {$setType(Token.SKIP);} //ignore this token
;

HTMLTagParser.g
===============

// Define the class
class HTMLTagParser extends Parser;

// Set the options for the Parser
options
{
  importVocab = HTMLTagLexer;     // The Grammar to import
}


// The Parser Rules
processHTML:
   htmlComment:HTMLCOMMENT {System.out.println
("COMMENT : "+htmlComment.getText().trim());}
   | startHTMLTag
   | endTag:ENDTAG {System.out.println("ENDTAG : "+endTag.getText
());};

startHTMLTag : INITSTARTTAG tagName:TAGDATA
               {System.out.println("STARTTAG : "+tagName.getText());}
               FINISHSTARTTAG;




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bogdan_mt at yahoo.com  Tue Jun  4 05:10:01 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Grammar Problem
In-Reply-To: <adi7qq+or21@eGroups.com>
Message-ID: <20020604121001.95905.qmail@web14806.mail.yahoo.com>

Hi,

Why rule startHTMLTag starts with INITSTARTTAG, while the others not? 
It seems that you use embedded lexer and parser for HTML tags. You probably
have in the main lexer a rule that recognize '<' and switches the lexer. The
Tag Parser is connected to the second lexer, and will never receive the
INITSTARTTAG token it is expecting in the rule startHTMLTag.

Try:
startHTMLTag : /* INITSTARTTAG removed */ tagName:TAGDATA
                {System.out.println("STARTTAG : "+tagName.getText());}
                FINISHSTARTTAG;
 
Bogdan


--- johnclarke72 <johnclarke@hotmail.com> wrote:
> Hi,
>    I am currently having problems with a HTML Grammar that I am 
> writing.  The Grammar has been added to the end of this e-mail.
> 
> When I enter HTML comments (<!-- This is a Comment -->) and End Tags 
> (</endTag>) it handles it correctly.
> 
> However,  if I enter <test> or anything similar to this I get 
> an "line 1: unexpected token: test" error message.  
> 
> How can I get this to work ?
> 
> I would be grateful for all advice offered regarding this.
> 
> John
> 
> HTMLTagLexer.g
> ==============
> 
> // Import the required Classes
> header
> {
>    import java.util.*;
>    import antlr.*;
> }
> 
> // Define the class
> class HTMLTagLexer extends Lexer;
> 
> // Set the options for the Lexer
> options
> {
>   k=3;                             // Set the look ahead to 3 
> Characters
>   caseSensitive = false;           // Set Case Sensitivity to false
>   charVocabulary = '\1' .. '\377'; // Set the Lexer Character 
> Vocabulary
>   testLiterals = false;            // Don't test against the Literals 
> table
>   exportVocab = HTMLTagLexer;      // The Grammar to export
> }
> 
> // The routines that will enable us to switch between lexer states
> {
>    // The Current Selector
>    TokenStreamSelector selector;
> 
>    // The method that will enable us to switch between lexer states
>    public void setSelector(TokenStreamSelector tokenStreamSelector)
>    {
>      selector = tokenStreamSelector;
>    }
> }
> 
> // Define the Tokens required for the Grammar
> 
> // Various HTML Marker Tags
> INITSTARTTAG   : "<";
> FINISHSTARTTAG : ">";
> EQUALS         : "=";
> 
> // HTML Comments
> HTMLCOMMENT : "!--"! (options {greedy=false;} : .)* "-->"!
>               {selector.pop();}
>               ;
> 
> // Main HTML Tags Section.  This defines the Tag names,
> // attributes and attribute values
> 
> // TAGDATA is used to define the Tag Name and names of
> // attributes used within the tag
> TAGDATA : (~(' ' | '\r' | '\n' | '\t' | '<' | '>' | '/' | '!' | '='))
> +;
> 
> // TAGVALUE is used to define the values for attributes
> // used within the tags
> 
> 
> // Definition of an End Tag
> ENDTAG   : '/'! ( 'a'..'z' )+ ">"! {selector.pop();};
> 
> // Ignore all White Space
> WS : ( ' '
>      | '\t'
>      | '\r' '\n' { newline(); }
>      | '\n' { newline(); }
>      )
>      {$setType(Token.SKIP);} //ignore this token
> ;
> 
> HTMLTagParser.g
> ===============
> 
> // Define the class
> class HTMLTagParser extends Parser;
> 
> // Set the options for the Parser
> options
> {
>   importVocab = HTMLTagLexer;     // The Grammar to import
> }
> 
> 
> // The Parser Rules
> processHTML:
>    htmlComment:HTMLCOMMENT {System.out.println
> ("COMMENT : "+htmlComment.getText().trim());}
>    | startHTMLTag
>    | endTag:ENDTAG {System.out.println("ENDTAG : "+endTag.getText
> ());};
> 
> startHTMLTag : INITSTARTTAG tagName:TAGDATA
>                {System.out.println("STARTTAG : "+tagName.getText());}
>                FINISHSTARTTAG;
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 


__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnclarke at hotmail.com  Tue Jun  4 06:57:32 2002
From: johnclarke at hotmail.com (johnclarke72)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Re: Grammar Problem
In-Reply-To: <20020604121001.95905.qmail@web14806.mail.yahoo.com>
Message-ID: <adih0c+ubbm@eGroups.com>

I put this in the tag parser because I want to go on to write the 
rules that will allow it to process HTML attributes (which may or may 
not exist).  It seems that putting the description of what a whole 
tag looks like in the parser is the best approach.

The main lexer does switch to the tag lexer when it sees <.  

How can I get this to work correctly ?

Thanks

John

--- In antlr-interest@y..., Bogdan Mitu <bogdan_mt@y...> wrote:
> Hi,
> 
> Why rule startHTMLTag starts with INITSTARTTAG, while the others 
not? 
> It seems that you use embedded lexer and parser for HTML tags. You 
probably
> have in the main lexer a rule that recognize '<' and switches the 
lexer. The
> Tag Parser is connected to the second lexer, and will never receive 
the
> INITSTARTTAG token it is expecting in the rule startHTMLTag.
> 
> Try:
> startHTMLTag : /* INITSTARTTAG removed */ tagName:TAGDATA
>                 {System.out.println("STARTTAG : "+tagName.getText
());}
>                 FINISHSTARTTAG;
>  
> Bogdan
> 
> 
> --- johnclarke72 <johnclarke@h...> wrote:
> > Hi,
> >    I am currently having problems with a HTML Grammar that I am 
> > writing.  The Grammar has been added to the end of this e-mail.
> > 
> > When I enter HTML comments (<!-- This is a Comment -->) and End 
Tags 
> > (</endTag>) it handles it correctly.
> > 
> > However,  if I enter <test> or anything similar to this I get 
> > an "line 1: unexpected token: test" error message.  
> > 
> > How can I get this to work ?
> > 
> > I would be grateful for all advice offered regarding this.
> > 
> > John
> > 
> > HTMLTagLexer.g
> > ==============
> > 
> > // Import the required Classes
> > header
> > {
> >    import java.util.*;
> >    import antlr.*;
> > }
> > 
> > // Define the class
> > class HTMLTagLexer extends Lexer;
> > 
> > // Set the options for the Lexer
> > options
> > {
> >   k=3;                             // Set the look ahead to 3 
> > Characters
> >   caseSensitive = false;           // Set Case Sensitivity to 
false
> >   charVocabulary = '\1' .. '\377'; // Set the Lexer Character 
> > Vocabulary
> >   testLiterals = false;            // Don't test against the 
Literals 
> > table
> >   exportVocab = HTMLTagLexer;      // The Grammar to export
> > }
> > 
> > // The routines that will enable us to switch between lexer states
> > {
> >    // The Current Selector
> >    TokenStreamSelector selector;
> > 
> >    // The method that will enable us to switch between lexer 
states
> >    public void setSelector(TokenStreamSelector 
tokenStreamSelector)
> >    {
> >      selector = tokenStreamSelector;
> >    }
> > }
> > 
> > // Define the Tokens required for the Grammar
> > 
> > // Various HTML Marker Tags
> > INITSTARTTAG   : "<";
> > FINISHSTARTTAG : ">";
> > EQUALS         : "=";
> > 
> > // HTML Comments
> > HTMLCOMMENT : "!--"! (options {greedy=false;} : .)* "-->"!
> >               {selector.pop();}
> >               ;
> > 
> > // Main HTML Tags Section.  This defines the Tag names,
> > // attributes and attribute values
> > 
> > // TAGDATA is used to define the Tag Name and names of
> > // attributes used within the tag
> > TAGDATA : (~(' ' | '\r' | '\n' | '\t' | '<' | '>' | '/' | '!' 
| '='))
> > +;
> > 
> > // TAGVALUE is used to define the values for attributes
> > // used within the tags
> > 
> > 
> > // Definition of an End Tag
> > ENDTAG   : '/'! ( 'a'..'z' )+ ">"! {selector.pop();};
> > 
> > // Ignore all White Space
> > WS : ( ' '
> >      | '\t'
> >      | '\r' '\n' { newline(); }
> >      | '\n' { newline(); }
> >      )
> >      {$setType(Token.SKIP);} //ignore this token
> > ;
> > 
> > HTMLTagParser.g
> > ===============
> > 
> > // Define the class
> > class HTMLTagParser extends Parser;
> > 
> > // Set the options for the Parser
> > options
> > {
> >   importVocab = HTMLTagLexer;     // The Grammar to import
> > }
> > 
> > 
> > // The Parser Rules
> > processHTML:
> >    htmlComment:HTMLCOMMENT {System.out.println
> > ("COMMENT : "+htmlComment.getText().trim());}
> >    | startHTMLTag
> >    | endTag:ENDTAG {System.out.println("ENDTAG : "+endTag.getText
> > ());};
> > 
> > startHTMLTag : INITSTARTTAG tagName:TAGDATA
> >                {System.out.println("STARTTAG : "+tagName.getText
());}
> >                FINISHSTARTTAG;
> > 
> > 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 
> > 
> > 
> > 
> 
> 
> __________________________________________________
> Do You Yahoo!?
> Yahoo! - Official partner of 2002 FIFA World Cup
> http://fifaworldcup.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bogdan_mt at yahoo.com  Tue Jun  4 08:03:38 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Re: Grammar Problem
In-Reply-To: <adih0c+ubbm@eGroups.com>
Message-ID: <20020604150338.83626.qmail@web14810.mail.yahoo.com>

--- johnclarke72 <johnclarke@hotmail.com> wrote:
> I put this in the tag parser because I want to go on to write the 
> rules that will allow it to process HTML attributes (which may or may 
> not exist).  It seems that putting the description of what a whole 
> tag looks like in the parser is the best approach.
> 
> The main lexer does switch to the tag lexer when it sees <.  

The switch to the tag lexer will be done *after* the consumption of '<' by
the main lexer. The tag lexer will never see it, so the token INITSTARTTAG
will never be generated. Modify the startHTMLTag rule to start after '<':

startHTMLTag : tagName:TAGDATA
               {System.out.println("STARTTAG : "+tagName.getText());}
               FINISHSTARTTAG;
 
On the other hand, I'm not sure you really need a separate parser for tags
(although you probably need the embedded lexer). The parser doesn't have to
know about the lexer switches.

Bogdan

> How can I get this to work correctly ?
> 
> Thanks
> 
> John
> 
> --- In antlr-interest@y..., Bogdan Mitu <bogdan_mt@y...> wrote:
> > Hi,
> > 
> > Why rule startHTMLTag starts with INITSTARTTAG, while the others 
> not? 
> > It seems that you use embedded lexer and parser for HTML tags. You 
> probably
> > have in the main lexer a rule that recognize '<' and switches the 
> lexer. The
> > Tag Parser is connected to the second lexer, and will never receive 
> the
> > INITSTARTTAG token it is expecting in the rule startHTMLTag.
> > 
> > Try:
> > startHTMLTag : /* INITSTARTTAG removed */ tagName:TAGDATA
> >                 {System.out.println("STARTTAG : "+tagName.getText
> ());}
> >                 FINISHSTARTTAG;
> >  
> > Bogdan
> > 
> > 
> > --- johnclarke72 <johnclarke@h...> wrote:
> > > Hi,
> > >    I am currently having problems with a HTML Grammar that I am 
> > > writing.  The Grammar has been added to the end of this e-mail.
> > > 
> > > When I enter HTML comments (<!-- This is a Comment -->) and End 
> Tags 
> > > (</endTag>) it handles it correctly.
> > > 
> > > However,  if I enter <test> or anything similar to this I get 
> > > an "line 1: unexpected token: test" error message.  
> > > 
> > > How can I get this to work ?
> > > 
> > > I would be grateful for all advice offered regarding this.
> > > 
> > > John
> > > 
> > > HTMLTagLexer.g
> > > ==============
> > > 
> > > // Import the required Classes
> > > header
> > > {
> > >    import java.util.*;
> > >    import antlr.*;
> > > }
> > > 
> > > // Define the class
> > > class HTMLTagLexer extends Lexer;
> > > 
> > > // Set the options for the Lexer
> > > options
> > > {
> > >   k=3;                             // Set the look ahead to 3 
> > > Characters
> > >   caseSensitive = false;           // Set Case Sensitivity to 
> false
> > >   charVocabulary = '\1' .. '\377'; // Set the Lexer Character 
> > > Vocabulary
> > >   testLiterals = false;            // Don't test against the 
> Literals 
> > > table
> > >   exportVocab = HTMLTagLexer;      // The Grammar to export
> > > }
> > > 
> > > // The routines that will enable us to switch between lexer states
> > > {
> > >    // The Current Selector
> > >    TokenStreamSelector selector;
> > > 
> > >    // The method that will enable us to switch between lexer 
> states
> > >    public void setSelector(TokenStreamSelector 
> tokenStreamSelector)
> > >    {
> > >      selector = tokenStreamSelector;
> > >    }
> > > }
> > > 
> > > // Define the Tokens required for the Grammar
> > > 
> > > // Various HTML Marker Tags
> > > INITSTARTTAG   : "<";
> > > FINISHSTARTTAG : ">";
> > > EQUALS         : "=";
> > > 
> > > // HTML Comments
> > > HTMLCOMMENT : "!--"! (options {greedy=false;} : .)* "-->"!
> > >               {selector.pop();}
> > >               ;
> > > 
> > > // Main HTML Tags Section.  This defines the Tag names,
> > > // attributes and attribute values
> > > 
> > > // TAGDATA is used to define the Tag Name and names of
> > > // attributes used within the tag
> > > TAGDATA : (~(' ' | '\r' | '\n' | '\t' | '<' | '>' | '/' | '!' 
> | '='))
> > > +;
> > > 
> > > // TAGVALUE is used to define the values for attributes
> > > // used within the tags
> > > 
> > > 
> > > // Definition of an End Tag
> > > ENDTAG   : '/'! ( 'a'..'z' )+ ">"! {selector.pop();};
> > > 
> > > // Ignore all White Space
> > > WS : ( ' '
> > >      | '\t'
> > >      | '\r' '\n' { newline(); }
> > >      | '\n' { newline(); }
> > >      )
> > >      {$setType(Token.SKIP);} //ignore this token
> > > ;
> > > 
> > > HTMLTagParser.g
> > > ===============
> > > 
> > > // Define the class
> > > class HTMLTagParser extends Parser;
> > > 
> > > // Set the options for the Parser
> > > options
> > > {
> > >   importVocab = HTMLTagLexer;     // The Grammar to import
> > > }
> > > 
> > > 
> > > // The Parser Rules
> > > processHTML:
> > >    htmlComment:HTMLCOMMENT {System.out.println
> > > ("COMMENT : "+htmlComment.getText().trim());}
> > >    | startHTMLTag
> > >    | endTag:ENDTAG {System.out.println("ENDTAG : "+endTag.getText
> > > ());};
> > > 
> > > startHTMLTag : INITSTARTTAG tagName:TAGDATA
> > >                {System.out.println("STARTTAG : "+tagName.getText
> ());}
> > >                FINISHSTARTTAG;
> > > 
> > > 
> > > 
> > > 
> > >  
> > > 
> > > Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> > > 
> > > 
> > > 
> > 
> > 
> > __________________________________________________
> > Do You Yahoo!?
> > Yahoo! - Official partner of 2002 FIFA World Cup
> > http://fifaworldcup.yahoo.com
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 



__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnclarke at hotmail.com  Tue Jun  4 13:53:41 2002
From: johnclarke at hotmail.com (johnclarke72)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Re: Grammar Problem
In-Reply-To: <20020604150338.83626.qmail@web14810.mail.yahoo.com>
Message-ID: <adj9cl+acmh@eGroups.com>

Thanks for your help.

John

--- In antlr-interest@y..., Bogdan Mitu <bogdan_mt@y...> wrote:
> --- johnclarke72 <johnclarke@h...> wrote:
> > I put this in the tag parser because I want to go on to write the 
> > rules that will allow it to process HTML attributes (which may or 
may 
> > not exist).  It seems that putting the description of what a 
whole 
> > tag looks like in the parser is the best approach.
> > 
> > The main lexer does switch to the tag lexer when it sees <.  
> 
> The switch to the tag lexer will be done *after* the consumption 
of '<' by
> the main lexer. The tag lexer will never see it, so the token 
INITSTARTTAG
> will never be generated. Modify the startHTMLTag rule to start 
after '<':
> 
> startHTMLTag : tagName:TAGDATA
>                {System.out.println("STARTTAG : "+tagName.getText
());}
>                FINISHSTARTTAG;
>  
> On the other hand, I'm not sure you really need a separate parser 
for tags
> (although you probably need the embedded lexer). The parser doesn't 
have to
> know about the lexer switches.
> 
> Bogdan
> 
> > How can I get this to work correctly ?
> > 
> > Thanks
> > 
> > John
> > 
> > --- In antlr-interest@y..., Bogdan Mitu <bogdan_mt@y...> wrote:
> > > Hi,
> > > 
> > > Why rule startHTMLTag starts with INITSTARTTAG, while the 
others 
> > not? 
> > > It seems that you use embedded lexer and parser for HTML tags. 
You 
> > probably
> > > have in the main lexer a rule that recognize '<' and switches 
the 
> > lexer. The
> > > Tag Parser is connected to the second lexer, and will never 
receive 
> > the
> > > INITSTARTTAG token it is expecting in the rule startHTMLTag.
> > > 
> > > Try:
> > > startHTMLTag : /* INITSTARTTAG removed */ tagName:TAGDATA
> > >                 {System.out.println
("STARTTAG : "+tagName.getText
> > ());}
> > >                 FINISHSTARTTAG;
> > >  
> > > Bogdan
> > > 
> > > 
> > > --- johnclarke72 <johnclarke@h...> wrote:
> > > > Hi,
> > > >    I am currently having problems with a HTML Grammar that I 
am 
> > > > writing.  The Grammar has been added to the end of this e-
mail.
> > > > 
> > > > When I enter HTML comments (<!-- This is a Comment -->) and 
End 
> > Tags 
> > > > (</endTag>) it handles it correctly.
> > > > 
> > > > However,  if I enter <test> or anything similar to this I get 
> > > > an "line 1: unexpected token: test" error message.  
> > > > 
> > > > How can I get this to work ?
> > > > 
> > > > I would be grateful for all advice offered regarding this.
> > > > 
> > > > John
> > > > 
> > > > HTMLTagLexer.g
> > > > ==============
> > > > 
> > > > // Import the required Classes
> > > > header
> > > > {
> > > >    import java.util.*;
> > > >    import antlr.*;
> > > > }
> > > > 
> > > > // Define the class
> > > > class HTMLTagLexer extends Lexer;
> > > > 
> > > > // Set the options for the Lexer
> > > > options
> > > > {
> > > >   k=3;                             // Set the look ahead to 3 
> > > > Characters
> > > >   caseSensitive = false;           // Set Case Sensitivity to 
> > false
> > > >   charVocabulary = '\1' .. '\377'; // Set the Lexer Character 
> > > > Vocabulary
> > > >   testLiterals = false;            // Don't test against the 
> > Literals 
> > > > table
> > > >   exportVocab = HTMLTagLexer;      // The Grammar to export
> > > > }
> > > > 
> > > > // The routines that will enable us to switch between lexer 
states
> > > > {
> > > >    // The Current Selector
> > > >    TokenStreamSelector selector;
> > > > 
> > > >    // The method that will enable us to switch between lexer 
> > states
> > > >    public void setSelector(TokenStreamSelector 
> > tokenStreamSelector)
> > > >    {
> > > >      selector = tokenStreamSelector;
> > > >    }
> > > > }
> > > > 
> > > > // Define the Tokens required for the Grammar
> > > > 
> > > > // Various HTML Marker Tags
> > > > INITSTARTTAG   : "<";
> > > > FINISHSTARTTAG : ">";
> > > > EQUALS         : "=";
> > > > 
> > > > // HTML Comments
> > > > HTMLCOMMENT : "!--"! (options {greedy=false;} : .)* "-->"!
> > > >               {selector.pop();}
> > > >               ;
> > > > 
> > > > // Main HTML Tags Section.  This defines the Tag names,
> > > > // attributes and attribute values
> > > > 
> > > > // TAGDATA is used to define the Tag Name and names of
> > > > // attributes used within the tag
> > > > TAGDATA : (~(' ' | '\r' | '\n' | '\t' | '<' | '>' | '/' | '!' 
> > | '='))
> > > > +;
> > > > 
> > > > // TAGVALUE is used to define the values for attributes
> > > > // used within the tags
> > > > 
> > > > 
> > > > // Definition of an End Tag
> > > > ENDTAG   : '/'! ( 'a'..'z' )+ ">"! {selector.pop();};
> > > > 
> > > > // Ignore all White Space
> > > > WS : ( ' '
> > > >      | '\t'
> > > >      | '\r' '\n' { newline(); }
> > > >      | '\n' { newline(); }
> > > >      )
> > > >      {$setType(Token.SKIP);} //ignore this token
> > > > ;
> > > > 
> > > > HTMLTagParser.g
> > > > ===============
> > > > 
> > > > // Define the class
> > > > class HTMLTagParser extends Parser;
> > > > 
> > > > // Set the options for the Parser
> > > > options
> > > > {
> > > >   importVocab = HTMLTagLexer;     // The Grammar to import
> > > > }
> > > > 
> > > > 
> > > > // The Parser Rules
> > > > processHTML:
> > > >    htmlComment:HTMLCOMMENT {System.out.println
> > > > ("COMMENT : "+htmlComment.getText().trim());}
> > > >    | startHTMLTag
> > > >    | endTag:ENDTAG {System.out.println
("ENDTAG : "+endTag.getText
> > > > ());};
> > > > 
> > > > startHTMLTag : INITSTARTTAG tagName:TAGDATA
> > > >                {System.out.println
("STARTTAG : "+tagName.getText
> > ());}
> > > >                FINISHSTARTTAG;
> > > > 
> > > > 
> > > > 
> > > > 
> > > >  
> > > > 
> > > > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > > > 
> > > > 
> > > > 
> > > 
> > > 
> > > __________________________________________________
> > > Do You Yahoo!?
> > > Yahoo! - Official partner of 2002 FIFA World Cup
> > > http://fifaworldcup.yahoo.com
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 
> > 
> > 
> > 
> 
> 
> 
> __________________________________________________
> Do You Yahoo!?
> Yahoo! - Official partner of 2002 FIFA World Cup
> http://fifaworldcup.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnclarke at hotmail.com  Tue Jun  4 14:11:58 2002
From: johnclarke at hotmail.com (johnclarke72)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Parser Question
Message-ID: <adjaeu+hagk@eGroups.com>

In HTML an attribute value of a tag can have "'s,'s,nothing at all or 
a combination of all 3 eg :

<test dodar1="hello" dodar2='helloagain' dodar3=helloonemoretime>

How can I describe the above in the parser.  The reason I have done 
it in the parser is because a tag can either have attributes or it 
can have none.

I would appreciate all advice regarding this.

Thanks

John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Wed Jun  5 08:50:55 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Re: ACE C preprocessor by Gosling
References: <DE3B87AE-7376-11D6-AB76-0030653DE0D6@jguru.com>
Message-ID: <3CFE335F.36759DC4@boeing.com>

Terence Parr wrote:
> 
[...]
...
> though, Loring Craymer and I spoke today and agreed maybe it's time to
> start thinking about another "Dr T's Traveling Parsing Revival And Beer
> Tasting Festival" here in silicon valley to discuss output grammars and
> tree rewriting etc...
> 
> Ter

I'll go. However first I gotta think of a way how to get Boeing to send
me to 
a meeting called "... beer tasting festival..."

sinan

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Jun  5 09:53:09 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] The new workshop name
In-Reply-To: <3CFE335F.36759DC4@boeing.com>
Message-ID: <B71BB8BB-78A4-11D6-AAE8-0030653DE0D6@jguru.com>


On Wednesday, June 5, 2002, at 08:50  AM, Sinan wrote:

> Terence Parr wrote:
>>
> [...]
> ...
>> though, Loring Craymer and I spoke today and agreed maybe it's time to
>> start thinking about another "Dr T's Traveling Parsing Revival And Beer
>> Tasting Festival" here in silicon valley to discuss output grammars and
>> tree rewriting etc...
>>
>> Ter
>
> I'll go. However first I gotta think of a way how to get Boeing to send
> me to
> a meeting called "... beer tasting festival..."

Yeah, NASA has the same problem with it for Loring.  I think i will 
change the name to

"The Mostly-Annual Workshop Formerly Known As 'Dr T's Traveling Parsing 
Revival And Beer Tasting Festival', But Now Called 'Dr. T's Serious And 
Applicable To Your Business Workshop With No Monkeying Around And 
Certainly No Beer Tasting".

It's a bit long, but I think it covers all the bases. <snicker>

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Wed Jun  5 12:30:49 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Re: In the Fall: Dr T's Traveling Parsing Revival 
 And Beer Festival?
References: <20020530102911.A5892@cs.utwente.nl> <B1EEB300-73F0-11D6-B7D9-0030653DE0D6@jguru.com> <20020531104028.D5892@cs.utwente.nl>
Message-ID: <3CFE66E9.AD62178D@boeing.com>

Ric Klaren wrote:
> 
> Hi,
> 
> On Thu, May 30, 2002 at 10:14:26AM -0700, Terence Parr wrote:
> > Awesome...where in the states will you be and when?
> 
> The where is Urbana Michigan, and the when will become set somewhere this
> summer depending on our progress on integrating our language within the
> Moebius framework. Only thing that is sure is that it's somewhere after
> september. After that I'll be put to slave labour for about a month and
> then I'm available =)
> 

Urbana ,Michigan? There is an Urbana Illinois... Halfway between Rantoul 
and Champaign Illinois ( spent a year in Chanute Air Force Base in
1968-1969)..

Urbana is also where HAL 9000 is being developed , but appears to be
about a year late....

Lookin at Google, I see some projects with University of Illinois at
Urbana-Champaign
and University of Michigan called Moebius??? 

 It is about 80 miles south of Chicago ( unless moved recently), but
Larry Lujack 
is no longer on WLS , so I have no interest in it anymore.

sinan

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bals1978 at hotmail.com  Wed Jun  5 13:07:33 2002
From: bals1978 at hotmail.com (Balvinder Singh)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] help
Message-ID: <F15e09ZJw9LlvGAkdl900011704@hotmail.com>

Hi all

I'm attaching a file which contains lexical rules and parsing rule.
For parsing rule I'm getting conflicts.Conflicts are not between the rules, 
but  they are in the rule.Lexical rules are OK.

I'm stucked in this.., any help will be usefule.


balvinder



_________________________________________________________________
Join the world’s largest e-mail service with MSN Hotmail. 
http://www.hotmail.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: try.g
Type: application/octet-stream
Size: 4389 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20020606/b4b870b2/try.obj
From lgc at mail1.jpl.nasa.gov  Wed Jun  5 13:35:30 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Re: The new workshop name
In-Reply-To: <B71BB8BB-78A4-11D6-AAE8-0030653DE0D6@jguru.com>
Message-ID: <adlsmi+g2im@eGroups.com>

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> 
> On Wednesday, June 5, 2002, at 08:50  AM, Sinan wrote:
> 
> > Terence Parr wrote:
> >>
> > [...]
> > ...
> >> though, Loring Craymer and I spoke today and agreed maybe it's 
time to
> >> start thinking about another "Dr T's Traveling Parsing Revival 
And Beer
> >> Tasting Festival" here in silicon valley to discuss output 
grammars and
> >> tree rewriting etc...
> >>
> >> Ter
> >
> > I'll go. However first I gotta think of a way how to get Boeing to 
send
> > me to
> > a meeting called "... beer tasting festival..."
> 
> Yeah, NASA has the same problem with it for Loring.  I think i will 
> change the name to
> 
> "The Mostly-Annual Workshop Formerly Known As 'Dr T's Traveling 
Parsing 
> Revival And Beer Tasting Festival', But Now Called 'Dr. T's Serious 
And 
> Applicable To Your Business Workshop With No Monkeying Around And 
> Certainly No Beer Tasting".
> 
> It's a bit long, but I think it covers all the bases. <snicker>

Ter--

You can snicker about it, but I had some poor lady from Travel 
Accounting grill me after the last one (she really didn't know what 
to do about the "Beer Tasting"; it was an interesting conversation 
and she was very confused).  You need to call it something like "Dr. 
T's Workshop for Advanced Novel Technology Language Recognition 
(ANTLR) and Technology Transfer" or some such (Sinan's and my 
organizations like buzz phrases; the more pompous the title, the 
better; "advanced" and "novel" technology is "good", and tech 
transfer is "wonderful").  Besides, I have proceedings from the 
previous workshops, and you have a fairly liberal interpretation of 
"annual".  The first "annual" workshop was held in '94, followed by 
the second annual workshop in '95, and then we started to notice that 
it was really a geometric series as the next one was '97 and now we 
get to '02 (the next one will be '18 or '20 or so if we follow that 
series).  Of course, I guess that this is just a case of "time flies 
when you are having fun".  Seriously, we have got to get back to 
having these annually--I don't run into enough techno-lunatics around 
here for me to retain my insanity.

--Loring

> 
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From glindholm at yahoo.com  Wed Jun  5 17:14:13 2002
From: glindholm at yahoo.com (Greg Lindholm)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] help
In-Reply-To: <F15e09ZJw9LlvGAkdl900011704@hotmail.com>
Message-ID: <20020606001413.8315.qmail@web12406.mail.yahoo.com>

I'll try to help where I can. 

identifier : qualified_data_name 
   ( "(" subscript ")" )* 
   ( "(" leftmost_character_position ":" (length)? ")" )?;

try.g:125: warning: nondeterminism upon 
try.g:125: 	k==1:"(" 
try.g:125: 	between alt 1 and exit branch of block 

This first nondeterminism is because when it sees the "(" it can't 
tell if this is the start of a subscript or reference modification 
(2nd option). 
You might be able to add a syntactic predicate that looks for 
the ":" to distinguish between the two options. 
I think a better solution is to do somthing like this: 

identifier : qualified_data_name ( "(" x (":" (x)?) ")" )* 

Combine the two options then figure out what you got later. 



subscript : ( Integer | 
              qualified_data_name (( "+" | "-" ) Integer)? | 
              index_name (( "+" | "-" ) Integer )?)+;  

try.g:147: warning: nondeterminism upon 
try.g:147: 	k==1:AlphabeticUserDefinedWord 
try.g:147: 	between alts 2 and 3 of block 

The problem here is both qualified_data_name (alt 2) and 
index_name (alt 3) can start with AlphabeticUserDefinedWord. 


You have lots of problems with this grammer both in the lexer 
and the parser.

For instance: The character "9" surrounded with whitespace will match
token rules "Numeric", "LevelNumber", "PicChar", and "Integer".
How is the lexer suppose to know which token is the correct one?
You've hidden the nondeterminisms behind syntactic predicates
so you don't see the warning but it will test in order and
always return the first match "Numeric".

LiteralOrLevelNumberOrAlphabeticUserDefinedWordOrPicCharOrPunctuationOrCurrencyOrIntegerOrZeroOrWSOrComment
:
	(NonNumeric )=>NonNumeric {$setType(Literal); }
	| (Numeric)=>Numeric {$setType(Literal); }
	| (LevelNumber)=>LevelNumber {$setType(LevelNumber); }
 	| (AlphabeticUserDefinedWord)=>AlphabeticUserDefinedWord
                       {$setType(AlphabeticUserDefinedWord);}
	| (PicChar)=>PicChar {$setType(PicChar);}
	| (Punctuation)=>Punctuation {$setType(Punctuation);}
	| (Currency)=>Currency {$setType(Currency);}
	| (Integer)=>Integer {$setType(Integer);}
	| (Zero)=>Zero {$setType(Zero);}
	| (WS)=>WS {$setType(WS);}
	| (Comment)=>Comment {$setType(Comment);}
	;

Your biggest problem is you've combined syntactic and semantic 
rules together.  Parsers can usually only figure out the
syntactic rules not the sematic rules.  What is the difference
between a "Integer" and a "LevelNumber"?  Syntactically many
input conditions will match both. These are semantic differences
not syntactic.

Antlr has some ability to add some semantic checks but these
are usually better left to a later phase of processing.

IMHO: You really need to start over and build your grammer thinking
from the syntactic point-of-view and leave the semantic rules to a
later phase.

Good Luck. Cobol is a very hard grammer both to lex and parse.

Greg





--- Balvinder Singh <bals1978@hotmail.com> wrote:
> Hi all
> 
> I'm attaching a file which contains lexical rules and parsing rule.
> For parsing rule I'm getting conflicts.Conflicts are not between the
> rules, 
> but  they are in the rule.Lexical rules are OK.
> 
> I'm stucked in this.., any help will be usefule.
> 
> 
> balvinder
> 
> 
> 
> _________________________________________________________________
> Join the world’s largest e-mail service with MSN Hotmail. 
> http://www.hotmail.com
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 

> ATTACHMENT part 2 application/octet-stream name=try.g



__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Thu Jun  6 01:30:43 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Re: In the Fall: Dr T's Traveling Parsing Revival And Beer Festival?
In-Reply-To: <3CFE66E9.AD62178D@boeing.com>; from sinan.karasu@boeing.com on Wed, Jun 05, 2002 at 12:30:49PM -0700
References: <20020530102911.A5892@cs.utwente.nl> <B1EEB300-73F0-11D6-B7D9-0030653DE0D6@jguru.com> <20020531104028.D5892@cs.utwente.nl> <3CFE66E9.AD62178D@boeing.com>
Message-ID: <20020606103042.E22346@cs.utwente.nl>

Hi,

On Wed, Jun 05, 2002 at 12:30:49PM -0700, Sinan wrote:
> > The where is Urbana Michigan, and the when will become set somewhere this
> > summer depending on our progress on integrating our language within the
> > Moebius framework. Only thing that is sure is that it's somewhere after
> > september. After that I'll be put to slave labour for about a month and
> > then I'm available =)
>
> Urbana ,Michigan? There is an Urbana Illinois... Halfway between Rantoul
> and Champaign Illinois ( spent a year in Chanute Air Force Base in
> 1968-1969)..
>
> Urbana is also where HAL 9000 is being developed , but appears to be
> about a year late....
>
> Lookin at Google, I see some projects with University of Illinois at
> Urbana-Champaign
> and University of Michigan called Moebius???

That's the one :) Seem to have mixed up some states ;)

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Human beings, who are almost unique in having the ability to learn
   from the experience of others, are also remarkable for their apparent
         disinclination to do so. --- Douglas Adams, Last Chance to See


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tjuergeleit at yahoo.de  Thu Jun  6 05:46:10 2002
From: tjuergeleit at yahoo.de (tjuergeleit)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Re: ANTLR and Eclipse
In-Reply-To: <02020412284502.04383@alaskan>
Message-ID: <adnlii+lmh3@eGroups.com>

--- In antlr-interest@y..., Greg Smolyn <smolyn@c...> wrote:
> Hi!
> 
> I remember some talk about an eclipse plugin for Antlr.
> What's the status on that?  I'd be glad to lend a hand on the 
development 
> effort if necessary.  
> I'm currently using Antlr to build an aspect-oriented version of C, 
and our 
> main development environment is Eclipse (hey, we're a research 
lab. :)  
> 
> Thanks!
> 
> -- 
> Greg Smolyn (smolyn@c...)
> Software Practices Lab, UBC
> http://www.cs.ubc.ca/labs/spl/

Hi,
take a look on the new folder 'Eclipse Plugins' in this group's file 
area.

I uploaded two plugins for Eclipse 2.0 (tested with stable release 
F2):
  - ANTLR 2.7.2a packaged as an plugin for Eclipse 2.0
  - UI plugin for ANTLR 2.7.2a

Unzip both in the plugin directory of your Eclipse installation.
In the README files you will find some information (but only a little 
bit right now ;-).

Cheers,
Torsten



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Jun  6 10:32:51 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Re: ANTLR and Eclipse
In-Reply-To: <adnlii+lmh3@eGroups.com>
Message-ID: <6D270254-7973-11D6-803A-0030653DE0D6@jguru.com>


On Thursday, June 6, 2002, at 05:46  AM, tjuergeleit wrote:
> Hi,
> take a look on the new folder 'Eclipse Plugins' in this group's file
> area.
>
> I uploaded two plugins for Eclipse 2.0 (tested with stable release
> F2):
>   - ANTLR 2.7.2a packaged as an plugin for Eclipse 2.0
>   - UI plugin for ANTLR 2.7.2a
>
> Unzip both in the plugin directory of your Eclipse installation.
> In the README files you will find some information (but only a little
> bit right now ;-).

Heh cool!  So, when is Eclipse gonna be ported to OS X, the system built 
by the gawds?

Thanks,
Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dj at gamethingy.com  Thu Jun  6 14:00:39 2002
From: dj at gamethingy.com (dspiess_mk)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Using different tokens for the same grammar
Message-ID: <adoihn+avvn@eGroups.com>

Hi, 
I've inhierted a project that uses antlr, and I am trying to localize 
the application. Is there an easy way to swap out what the valid 
tokens are, but keep the grammar the same? 

For example our application builds mathematical expressions for 
evaluation. The English version has a function called average(i, 
i2, ...) where the user specifies the function average and several 
parameters. In French, this needs to be moyenne(i, 12, ...). The 
parsing is the same, just the keyword is different. 

Is there a way to specify the tokens at runtime instead of compile 
time? I really don't want to have to support different compiles for 
each localized version of our java app. 

Thanks for any help! 

Daniel Spiess





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnclarke at hotmail.com  Thu Jun  6 15:09:43 2002
From: johnclarke at hotmail.com (johnclarke72)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Recursive Grammar
Message-ID: <adomj7+jbdm@eGroups.com>

If I have a situation when an item specified in a grammar can be 
repeated within itself how can I describe that using Antlr ?  eg A 
HTML Comment within a comment eg

<!-- <!-- A HTML Comment --> -->

I would be grateful for all advice offered.

Thanks

John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Jun  6 15:31:13 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Recursive Grammar
In-Reply-To: <adomj7+jbdm@eGroups.com>
Message-ID: <1BE02C4C-799D-11D6-803A-0030653DE0D6@jguru.com>


On Thursday, June 6, 2002, at 03:09  PM, johnclarke72 wrote:

> If I have a situation when an item specified in a grammar can be
> repeated within itself how can I describe that using Antlr ?  eg A
> HTML Comment within a comment eg
>
> <!-- <!-- A HTML Comment --> -->
>
> I would be grateful for all advice offered.

Comment is a hard one due to the terminating condition needing 3 symbols 
of lookahead, but normally you would just do this:

rule : STUFF rule END_STUFF
        | OTHER_STUFF
        ;

recursion ain't no trouble...though in this case you might have trouble 
with the "rule" terminating condition.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From glindholm at yahoo.com  Thu Jun  6 17:05:59 2002
From: glindholm at yahoo.com (Greg Lindholm)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Using different tokens for the same grammar
In-Reply-To: <adoihn+avvn@eGroups.com>
Message-ID: <20020607000559.50213.qmail@web12408.mail.yahoo.com>

An easy way is to define both french and english tokens in the parser
then then put a filter on the TokenStream between the lexer and the
parser that maps the french tokens into english (or visvera).

If you want to be totally dynamic you would need to set
"testLiterals=false;" to turn off ALTLR's logic then write your own
"test literal" routine that does a "$setType(myType)" then you could
load them from a file or whatever.

Greg

--- dspiess_mk <dj@gamethingy.com> wrote:
> Hi, 
> I've inhierted a project that uses antlr, and I am trying to localize
> 
> the application. Is there an easy way to swap out what the valid 
> tokens are, but keep the grammar the same? 
> 
> For example our application builds mathematical expressions for 
> evaluation. The English version has a function called average(i, 
> i2, ...) where the user specifies the function average and several 
> parameters. In French, this needs to be moyenne(i, 12, ...). The 
> parsing is the same, just the keyword is different. 
> 
> Is there a way to specify the tokens at runtime instead of compile 
> time? I really don't want to have to support different compiles for 
> each localized version of our java app. 
> 
> Thanks for any help! 
> 
> Daniel Spiess
> 
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From f_moriyama at psg.hitachi-hec.co.jp  Thu Jun  6 21:20:13 2002
From: f_moriyama at psg.hitachi-hec.co.jp (fumikatsu_moriyama)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] ANTLR grammar for ANTLR itself.
Message-ID: <adpc9t+p10k@eGroups.com>

It may be FAQ, but I couldn't find that.
Where can I get that ?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Jun  6 21:28:36 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] ANTLR grammar for ANTLR itself.
In-Reply-To: <adpc9t+p10k@eGroups.com>
Message-ID: <0893A6C2-79CF-11D6-803A-0030653DE0D6@jguru.com>


On Thursday, June 6, 2002, at 09:20  PM, fumikatsu_moriyama wrote:

> It may be FAQ, but I couldn't find that.
> Where can I get that ?

antlr.g is in the antlr distribution in antlr/antlr.g file :)

Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Gert.Grossmann50 at epost.de  Fri Jun  7 00:38:47 2002
From: Gert.Grossmann50 at epost.de (gertgrossmann)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] not operator and sets
Message-ID: <adpnu7+4qvi@eGroups.com>

what is the reason to deny mixing of token references and character 
literals in a negated set like this:

STAR : '*';
NEGTEST: '+' ~( ';' | STAR | '-');   <- not allowed :(

with regards,
Gert


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bals1978 at hotmail.com  Fri Jun  7 00:28:42 2002
From: bals1978 at hotmail.com (Balvinder Singh)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] HTML comments
Message-ID: <F104LstPGtPrPrvCWO600012096@hotmail.com>



Hi ..

when I was trying recursive comment in HTML using the following rule

RecrComment : ("<!--" RecrComment "-->")=>"<!--" RecrComment "-->"
              "<!--" c:COMMENT_DATA "-->"(WS)?
             ;
COMMENT_DATA and WS are given in HTML/html.g of antlr examples dir.

then it was searching '-' token..

Then I try COMMENT rule in HTML/html.g, problem was the same.

COMMENT : "<!--" c:COMMENT_DATA "-->"(WS)?

It was also not working...

I tried also with {greedy=false}, but no improvement.


balvinder



_________________________________________________________________
Send and receive Hotmail on your mobile device: http://mobile.msn.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tjuergeleit at yahoo.de  Fri Jun  7 01:34:45 2002
From: tjuergeleit at yahoo.de (tjuergeleit)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Re: ANTLR and Eclipse
In-Reply-To: <6D270254-7973-11D6-803A-0030653DE0D6@jguru.com>
Message-ID: <adpr75+g9uo@eGroups.com>

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> 
> On Thursday, June 6, 2002, at 05:46  AM, tjuergeleit wrote:
> > Hi,
> > take a look on the new folder 'Eclipse Plugins' in this group's 
file
> > area.
> >
> > I uploaded two plugins for Eclipse 2.0 (tested with stable release
> > F2):
> >   - ANTLR 2.7.2a packaged as an plugin for Eclipse 2.0
> >   - UI plugin for ANTLR 2.7.2a
> >
> > Unzip both in the plugin directory of your Eclipse installation.
> > In the README files you will find some information (but only a 
little
> > bit right now ;-).
> 
> Heh cool!  So, when is Eclipse gonna be ported to OS X, the system 
built 
> by the gawds?
> 
> Thanks,
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org

A preview of the port of Eclipse's SWT library to MacOS X can be 
found at the very end of http://www.eclipse.org/platform/index.html

Cheers,
Torsten



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tjuergeleit at yahoo.de  Fri Jun  7 01:39:00 2002
From: tjuergeleit at yahoo.de (tjuergeleit)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Re: ANTLR and Eclipse (now with the right URL ;-)
In-Reply-To: <adpr75+g9uo@eGroups.com>
Message-ID: <adprf4+ub56@eGroups.com>

--- In antlr-interest@y..., "tjuergeleit" <tjuergeleit@y...> wrote:
> --- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> > 
> > On Thursday, June 6, 2002, at 05:46  AM, tjuergeleit wrote:
> > > Hi,
> > > take a look on the new folder 'Eclipse Plugins' in this group's 
> file
> > > area.
> > >
> > > I uploaded two plugins for Eclipse 2.0 (tested with stable 
release
> > > F2):
> > >   - ANTLR 2.7.2a packaged as an plugin for Eclipse 2.0
> > >   - UI plugin for ANTLR 2.7.2a
> > >
> > > Unzip both in the plugin directory of your Eclipse installation.
> > > In the README files you will find some information (but only a 
> little
> > > bit right now ;-).
> > 
> > Heh cool!  So, when is Eclipse gonna be ported to OS X, the 
system 
> built 
> > by the gawds?
> > 
> > Thanks,
> > Ter
> > --
> > Co-founder, http://www.jguru.com
> > Creator, ANTLR Parser Generator: http://www.antlr.org
> 
> A preview of the port of Eclipse's SWT library to MacOS X can be 
> found at the very end of http://www.eclipse.org/platform/index.html
> 
> Cheers,
> Torsten


Ups, wrong URL. Here's the right one:
http://dev.eclipse.org/viewcvs/index.cgi/%7Echeckout%7E/platform-swt-
home/dev.html

Cheers,
Torsten


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bals1978 at hotmail.com  Fri Jun  7 06:05:10 2002
From: bals1978 at hotmail.com (Balvinder Singh)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] help
Message-ID: <F137baKgMdFxlvq2dNP0001d821@hotmail.com>



Hi...

I have a rule, which has 3 conflicts. plz help me to resolve it.

If I change it to context free grammar  and use some syntactic predicate, 
will be a right way or not.

parser rule
picture_string : (currency)? ((picChar)+ (repeat)?)+ (Punctuation 
((picChar)+ (repeat)?)+)*

currency and picChar is alphabet

repeat : "(" Integer ")"
       ;



lexer rule
Punctuation : ('/' | ',' | '.' | ':')
            ;



so I have conflict in picture_string.

balvinder


_________________________________________________________________
Get your FREE download of MSN Explorer at http://explorer.msn.com/intl.asp.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From spenserkao at optushome.com.au  Fri Jun  7 08:40:51 2002
From: spenserkao at optushome.com.au (Spenser Kao)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Passing OutputStream to Lexer
Message-ID: <000001c20e39$b761f450$af01a8c0@spenserlaptopa>

Question on Java version antlr 2.7.1: 
Is there any to pass OutputStream to Lexer constructor?
 
I can pass an InputStream instance to the Lexer constructor; can I do
the same with OutputStream? 
So far I can only redirect the o/p message to a file on the command
line, but passing an OutputStream onto Lexer on the fly will be more
flexible and it seems none of current Lexer constructors allows me to do
that.
 
Any clue will be much appreciated! 
 
Regards, 
 
Spenser
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20020608/793de0c9/attachment.html
From spenserkao at optushome.com.au  Fri Jun  7 08:48:58 2002
From: spenserkao at optushome.com.au (Spenser Kao)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Purpose of Parser.setFilename()
Message-ID: <000501c20e3a$d9821c30$af01a8c0@spenserlaptopa>

Does anyone know the purpose of Parser's method setFilename()? Which
file will be set? The input stream?
Parser's javadoc provides not much info.
 
Regards,
 
Spenser
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20020608/1ad768b4/attachment.html
From spenserkao at optushome.com.au  Fri Jun  7 10:37:27 2002
From: spenserkao at optushome.com.au (spenserkao)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Re: Passing OutputStream to Lexer
In-Reply-To: <000001c20e39$b761f450$af01a8c0@spenserlaptopa>
Message-ID: <adqr0n+5ipt@eGroups.com>

Empirically, I think I've found the alternative for the same goal.
In the Lexer part of the grammar, create a method something like
Public String getOutputMsg() { 
 } to return the outgoing message, 
then in the main program, where Parser and Lexer will be 
instantiated, call the public method to pass the outgoing message to 
PrintWriter.println().

I am answering my own question here:o)

Regards, Spenser
--- In antlr-interest@y..., "Spenser Kao" <spenserkao@o...> wrote:
> Question on Java version antlr 2.7.1: 
> Is there any to pass OutputStream to Lexer constructor?
>  
> I can pass an InputStream instance to the Lexer constructor; can I 
do
> the same with OutputStream? 
> So far I can only redirect the o/p message to a file on the command
> line, but passing an OutputStream onto Lexer on the fly will be 
more
> flexible and it seems none of current Lexer constructors allows me 
to do
> that.
>  
> Any clue will be much appreciated! 
>  
> Regards, 
>  
> Spenser


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Fri Jun  7 12:17:57 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Re: Purpose of Parser.setFilename()
In-Reply-To: <000501c20e3a$d9821c30$af01a8c0@spenserlaptopa>
Message-ID: <adr0t5+kpuf@eGroups.com>

--- In antlr-interest@y..., "Spenser Kao" <spenserkao@o...> wrote:
> Does anyone know the purpose of Parser's method setFilename()? Which
> file will be set? The input stream?
> Parser's javadoc provides not much info.

My understanding of that method is that it just supports the output 
of "helpful" errors.

If you implemented the C preprocessor (for an example that's awfully 
popular around here :-) you would end up reading and parsing multiple 
files from one source file, right?  As in #include <stdio.h>.  Well, 
when you open up stdio.h and start parsing it, you do a 
   setFilename( "stdio.h" )
and then, if there are any errors, you can accurately tell the user 
where the error occurred.

Same with the line number support.  ANTLR doesn't care in the least 
what line number you're on--but the users of your 
processor/interpreter/compiler do!  :-)

JSRS


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bob at werken.com  Fri Jun  7 15:18:51 2002
From: bob at werken.com (bob mcwhirter)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Re: Passing OutputStream to Lexer
In-Reply-To: <adqr0n+5ipt@eGroups.com>
Message-ID: <Pine.LNX.3.96.1020607181815.22446B-100000@exeter.exeter.org>


I personally think having antlr adopt either log4j or the
jakarta-commons-logging API would be a good thing.

log4j would allow us to do just about anything we want
with the output.

	-bob

On Fri, 7 Jun 2002, spenserkao wrote:

> Empirically, I think I've found the alternative for the same goal.
> In the Lexer part of the grammar, create a method something like
> Public String getOutputMsg() { … } to return the outgoing message, 
> then in the main program, where Parser and Lexer will be 
> instantiated, call the public method to pass the outgoing message to 
> PrintWriter.println().
> 
> I am answering my own question here:o)
> 
> Regards, Spenser
> --- In antlr-interest@y..., "Spenser Kao" <spenserkao@o...> wrote:
> > Question on Java version antlr 2.7.1: 
> > Is there any to pass OutputStream to Lexer constructor?
> >  
> > I can pass an InputStream instance to the Lexer constructor; can I 
> do
> > the same with OutputStream? 
> > So far I can only redirect the o/p message to a file on the command
> > line, but passing an OutputStream onto Lexer on the fly will be 
> more
> > flexible and it seems none of current Lexer constructors allows me 
> to do
> > that.
> >  
> > Any clue will be much appreciated! 
> >  
> > Regards, 
> >  
> > Spenser
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 

--
Bob McWhirter        bob@werken.com
The Werken Company   http://werken.com/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From greenj at ix.netcom.com  Sat Jun  8 01:13:31 2002
From: greenj at ix.netcom.com (John Allen Green)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] help
In-Reply-To: <F137baKgMdFxlvq2dNP0001d821@hotmail.com>
References: <F137baKgMdFxlvq2dNP0001d821@hotmail.com>
Message-ID: <308713316.1023531211@localhost>

Balvinder,

At a guess, I'd say that Antlr is warning that you have optional tokens and
token groups in your grammar which it doesn't know for sure that it should
consume right away, or else leave them for a later rule. (Similar to the
"dangling ELSE" problem - see the FAQs). You can tell Antlr that it
*should* go ahead and consume the tokens by using greedy=true.

HTH
John



--On 07/06/2002 6:35 PM +0530 Balvinder Singh wrote:

> 
> 
> Hi...
> 
> I have a rule, which has 3 conflicts. plz help me to resolve it.
> 
> If I change it to context free grammar  and use some syntactic predicate, 
> will be a right way or not.
> 
> parser rule
> picture_string : (currency)? ((picChar)+ (repeat)?)+ (Punctuation 
> ((picChar)+ (repeat)?)+)*
> 
> currency and picChar is alphabet
> 
> repeat : "(" Integer ")"
>        ;
> 
> 
> 
> lexer rule
> Punctuation : ('/' | ',' | '.' | ':')
>             ;
> 
> 
> 
> so I have conflict in picture_string.
> 
> balvinder
> 
> 
> _________________________________________________________________
> Get your FREE download of MSN Explorer at
> http://explorer.msn.com/intl.asp.
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
>  



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnclarke at hotmail.com  Sun Jun  9 10:19:42 2002
From: johnclarke at hotmail.com (johnclarke72)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] HTML Comments
Message-ID: <ae02ne+dvsp@eGroups.com>

What is the best approach to writing a grammar for comments in HTML 
that permits you to add comments in it ?  eg :

<!-- <!-- Comment --> -->

John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From md5 at embody.org  Sun Jun  9 10:47:27 2002
From: md5 at embody.org (mike dillon)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] HTML Comments
In-Reply-To: <ae02ne+dvsp@eGroups.com>
References: <ae02ne+dvsp@eGroups.com>
Message-ID: <20020609174727.GA4030@eber.embody.org>

begin johnclarke72 quotation:
> What is the best approach to writing a grammar for comments in HTML
> that permits you to add comments in it ?  eg :
> 
> <!-- <!-- Comment --> -->

FYI: this is not actually allowed with HTML comments; they cannot be
nested. The "outer" comment ends with the *first* "-->".

Excerpt from http://www.w3.org/TR/REC-html40/intro/sgmltut.html#h-3.2.4:

        3.2.4 Comments

        HTML comments have the following syntax:

          <!-- this is a comment -->
          <!-- and so is this one,
              which occupies more than one line -->

        White space is not permitted between the markup declaration open
        delimiter("<!") and the comment open delimiter ("--"), but is
        permitted between the comment close delimiter ("--") and the
        markup declaration close delimiter (">"). A common error is to
        include a string of hyphens ("---") within a comment. Authors
        should avoid putting two or more adjacent hyphens inside
        comments.

        Information that appears between comments has no special meaning
        (e.g., character references are not interpreted as such).

        Note that comments are markup.

-md

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnclarke at hotmail.com  Sun Jun  9 10:56:30 2002
From: johnclarke at hotmail.com (johnclarke72)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Re: HTML Comments
In-Reply-To: <20020609174727.GA4030@eber.embody.org>
Message-ID: <ae04se+e480@eGroups.com>

Thanks.  I am happy to read this.  But if I wanted to do this how 
could it be described in grammar ?

John

> > What is the best approach to writing a grammar for comments in 
HTML
> > that permits you to add comments in it ?  eg :
> > 
> > <!-- <!-- Comment --> -->
> 
> FYI: this is not actually allowed with HTML comments; they cannot be
> nested. The "outer" comment ends with the *first* "-->".
> 
> Excerpt from http://www.w3.org/TR/REC-html40/intro/sgmltut.html#h-
3.2.4:
> 
>         3.2.4 Comments
> 
>         HTML comments have the following syntax:
> 
>           <!-- this is a comment -->
>           <!-- and so is this one,
>               which occupies more than one line -->
> 
>         White space is not permitted between the markup declaration 
open
>         delimiter("<!") and the comment open delimiter ("--"), but 
is
>         permitted between the comment close delimiter ("--") and the
>         markup declaration close delimiter (">"). A common error is 
to
>         include a string of hyphens ("---") within a comment. 
Authors
>         should avoid putting two or more adjacent hyphens inside
>         comments.
> 
>         Information that appears between comments has no special 
meaning
>         (e.g., character references are not interpreted as such).
> 
>         Note that comments are markup.
> 
> -md


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnclarke at hotmail.com  Sun Jun  9 14:50:51 2002
From: johnclarke at hotmail.com (johnclarke72)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Constructors
Message-ID: <ae0ijr+9p7b@eGroups.com>

I know how to define extra methods within my grammar but how can I 
write my own Constructors within a grammar. Essentially I want to add 
two constructors (one that has no parameters and another that has 
parameters).

I would be grateful for all advice offered regarding this.

Thanks

John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnclarke at hotmail.com  Mon Jun 10 01:16:40 2002
From: johnclarke at hotmail.com (johnclarke72)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Terminating processing
Message-ID: <ae1n98+ci2k@eGroups.com>

In my Grammar I surround the start rule with ()+ to ensure that 
everything specified is processed.  However,  the processing does not 
stop until I press CTRL Z.  

Is there any way to define the grammar so that processing stop when 
all of the data entered has been process ?

I would be grateful for all advice offered.

Thanks

John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Mon Jun 10 01:51:24 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Terminating processing
In-Reply-To: <ae1n98+ci2k@eGroups.com>; from johnclarke@hotmail.com on Mon, Jun 10, 2002 at 08:16:40AM -0000
References: <ae1n98+ci2k@eGroups.com>
Message-ID: <20020610105124.C12709@cs.utwente.nl>

On Mon, Jun 10, 2002 at 08:16:40AM -0000, johnclarke72 wrote:
> In my Grammar I surround the start rule with ()+ to ensure that 
> everything specified is processed.  However,  the processing does not 
> stop until I press CTRL Z.  
> 
> Is there any way to define the grammar so that processing stop when 
> all of the data entered has been process ?
> 
> I would be grateful for all advice offered.

Do you have an EOF at the end of your start rule?

startrule: ( grammar_stuff )+ EOF! ;

grammar_stuff: morestuff | evenmorestuff | lotsastuff ;

HTH

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 'And this 'rebooting' business? Give it a good kicking, do you?' 'Oh, no,
  of course, we ... that is ... well, yes, in fact,' said Ponder. 'Adrian
    goes round the back and ... er ... prods it with his foot. But in a
     technical way,' he added. --- From: Hogfather by Terry Pratchett.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Mon Jun 10 01:49:40 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Constructors
In-Reply-To: <ae0ijr+9p7b@eGroups.com>; from johnclarke@hotmail.com on Sun, Jun 09, 2002 at 09:50:51PM -0000
References: <ae0ijr+9p7b@eGroups.com>
Message-ID: <20020610104940.B12709@cs.utwente.nl>

On Sun, Jun 09, 2002 at 09:50:51PM -0000, johnclarke72 wrote:
> I know how to define extra methods within my grammar but how can I 
> write my own Constructors within a grammar. Essentially I want to add 
> two constructors (one that has no parameters and another that has 
> parameters).

Just add them:

header { // headerstuff }

{ // for c++ this goes into the generated .cpp file
// extra constructor implementation
MyParser::MyParser( .. .. .. )
{
}

}
class MyParser extends Parser;
{
// for java the implementation goes here as well (i think)
MyParser( .. .. .. .. );

}

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 'And this 'rebooting' business? Give it a good kicking, do you?' 'Oh, no,
  of course, we ... that is ... well, yes, in fact,' said Ponder. 'Adrian
    goes round the back and ... er ... prods it with his foot. But in a
     technical way,' he added. --- From: Hogfather by Terry Pratchett.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Mon Jun 10 12:23:46 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Re: Constructors
In-Reply-To: <20020610104940.B12709@cs.utwente.nl>
Message-ID: <ae2uc2+cg8g@eGroups.com>

--- In antlr-interest@y..., Ric Klaren <klaren@c...> wrote:
> On Sun, Jun 09, 2002 at 09:50:51PM -0000, johnclarke72 wrote:
> > I know how to define extra methods within my grammar but how can 
I 
> > write my own Constructors within a grammar. Essentially I want to 
add 
> Just add them:
> 
> header { // headerstuff }
> 
> { // for c++ this goes into the generated .cpp file
> // extra constructor implementation
> MyParser::MyParser( .. .. .. )
> {
> }
> 
> }
> class MyParser extends Parser;
> {
> // for java the implementation goes here as well (i think)
> MyParser( .. .. .. .. );
> 
> }


If you haven't already, be sure to check out 
http://www.antlr.org/doc/cpp-runtime.html#_template and read it over 
very carefully!


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bogdan_mt at yahoo.com  Tue Jun 11 02:14:16 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] PreservingFileWriter
In-Reply-To: <adnlii+lmh3@eGroups.com>
Message-ID: <20020611091416.31940.qmail@web14804.mail.yahoo.com>

Hi Ric,

The new PreservingFileWriter (java version) is not always deleting the
temporary files. I use WinXP, jdk1.3/1.4, ANTLR 2.7.2a1/a2. It seems that
the statement tmp_file.deleteOnExit(); is not enough. I added code to
explicitely delete tmp files at the end, and it's OK for me now:

		finally {
                        ...
			if( tmp_file != null )
			{
				try { tmp_file.delete(); }
				catch( Exception e ) { ; }
			}
		}

Attached is the source code.

Regards,
Bogdan




__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Tue Jun 11 02:36:53 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] PreservingFileWriter
In-Reply-To: <20020611091416.31940.qmail@web14804.mail.yahoo.com>; from bogdan_mt@yahoo.com on Tue, Jun 11, 2002 at 02:14:16AM -0700
References: <adnlii+lmh3@eGroups.com> <20020611091416.31940.qmail@web14804.mail.yahoo.com>
Message-ID: <20020611113653.G12709@cs.utwente.nl>

Hi,

On Tue, Jun 11, 2002 at 02:14:16AM -0700, Bogdan Mitu wrote:
> The new PreservingFileWriter (java version) is not always deleting the
> temporary files. I use WinXP, jdk1.3/1.4, ANTLR 2.7.2a1/a2. It seems that
> the statement tmp_file.deleteOnExit(); is not enough. I added code to
> explicitely delete tmp files at the end, and it's OK for me now:

Ack this was also reported a little while back. It's already fixed in the
repository (probably also in a after 2.7.2a2 snapshot on my antlr page).

Thanks for reporting though =)

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     "Never argue with an idiot, for they will bring you down to their
              level and beat you with experience." --- Unknown


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bogdan_mt at yahoo.com  Tue Jun 11 04:19:40 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] PreservingFileWriter
In-Reply-To: <20020611113653.G12709@cs.utwente.nl>
Message-ID: <20020611111940.48844.qmail@web14801.mail.yahoo.com>

--- Ric Klaren <klaren@cs.utwente.nl> wrote:
> Hi,
> 
> On Tue, Jun 11, 2002 at 02:14:16AM -0700, Bogdan Mitu wrote:
> > The new PreservingFileWriter (java version) is not always deleting the
> > temporary files. I use WinXP, jdk1.3/1.4, ANTLR 2.7.2a1/a2. It seems
> that
> > the statement tmp_file.deleteOnExit(); is not enough. I added code to
> > explicitely delete tmp files at the end, and it's OK for me now:
> 
> Ack this was also reported a little while back. It's already fixed in the
> repository (probably also in a after 2.7.2a2 snapshot on my antlr page).

One question: isn't this feature slowing down things? I understand your
point in avoiding recompilation, but this can be accomplished in other ways
too (<shameless-advertisement> for instance, using my new Ant task
</shameless-advertisement>). Can you please consider making this feature
optional (through a command-line parameter)?

Thanks,
Bogdan

> Thanks for reporting though =)
> 
> Ric
> --
>
-----+++++*****************************************************+++++++++-------
>     ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
>
-----+++++*****************************************************+++++++++-------
>      "Never argue with an idiot, for they will bring you down to their
>               level and beat you with experience." --- Unknown
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 


__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Tue Jun 11 05:02:16 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] PreservingFileWriter
In-Reply-To: <20020611111940.48844.qmail@web14801.mail.yahoo.com>; from bogdan_mt@yahoo.com on Tue, Jun 11, 2002 at 04:19:40AM -0700
References: <20020611113653.G12709@cs.utwente.nl> <20020611111940.48844.qmail@web14801.mail.yahoo.com>
Message-ID: <20020611140216.H12709@cs.utwente.nl>

Hi,

On Tue, Jun 11, 2002 at 04:19:40AM -0700, Bogdan Mitu wrote:
> One question: isn't this feature slowing down things? I understand your
> point in avoiding recompilation, but this can be accomplished in other ways
> too (<shameless-advertisement> for instance, using my new Ant task
> </shameless-advertisement>). Can you please consider making this feature
> optional (through a command-line parameter)?

Uhm ever tried to suggest command-line parameter to Terence? <ducks-for-cover>

I don't quite see how ant can help recompilation problems in C++ projects
(behaves slightly different than java with the source and header files).
Does ant look at the contents of files? Unless I missed something when I
looked at it (<RANT TYPE="plz ignore ;)"> and hated it on sight, I don't
quite see the use of ant (mostly in C/C++ settting, for java it might be
way cool ;) ) Makefile's allow me to do things in a very flexible way and I
for as far as Makefile syntax can be cryptic it certainly beats XML, and
above all I don't want to install java just to run 'make', for me it was
already a big step to install java to run antlr =)</RANT>).

I discussed a bit about this feature with Terence I probably suggested
commandline stuff somewhere in that discussion (and miraculously walked
away with my head still attached to my shoulders ;) ). 

If I look at compilation times then running antlr is probably less than 1%
of the time to compile the generated files (and without minimal remakes,
this probably will go into the 0.001% (okay I may be exagerating here.. but
it means that I would get lethal doses of caffeine)). My educated guess is
that in very few projects antlr's runtime is the biggest factor. So I'm
inclined to keep this thing the default. (if someone provides a 'clean'
patch I would not dream of objecting though)

Another option is extending the interface of Tool.java to select a
different output style (preserving/nonpreserving) for the openOutputFile
method. But I'm not 100% sure how this interacts with antlr's preprocessor
(tokenfiles are also part of the dependency tree). I looked a bit closer
and probably we should move the openOutputFile stuff to the codegenerators
where they can select the preferred PrintWriter, then have Tool.openoutput
file proxy on that method? Something along those lines at least.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Human beings, who are almost unique in having the ability to learn
   from the experience of others, are also remarkable for their apparent
         disinclination to do so. --- Douglas Adams, Last Chance to See

From klaren at cs.utwente.nl  Tue Jun 11 05:02:16 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] PreservingFileWriter
In-Reply-To: <20020611111940.48844.qmail@web14801.mail.yahoo.com>; from bogdan_mt@yahoo.com on Tue, Jun 11, 2002 at 04:19:40AM -0700
References: <20020611113653.G12709@cs.utwente.nl> <20020611111940.48844.qmail@web14801.mail.yahoo.com>
Message-ID: <20020611140216.H12709@cs.utwente.nl>

Hi,

On Tue, Jun 11, 2002 at 04:19:40AM -0700, Bogdan Mitu wrote:
> One question: isn't this feature slowing down things? I understand your
> point in avoiding recompilation, but this can be accomplished in other ways
> too (<shameless-advertisement> for instance, using my new Ant task
> </shameless-advertisement>). Can you please consider making this feature
> optional (through a command-line parameter)?

Uhm ever tried to suggest command-line parameter to Terence? <ducks-for-cover>

I don't quite see how ant can help recompilation problems in C++ projects
(behaves slightly different than java with the source and header files).
Does ant look at the contents of files? Unless I missed something when I
looked at it (<RANT TYPE="plz ignore ;)"> and hated it on sight, I don't
quite see the use of ant (mostly in C/C++ settting, for java it might be
way cool ;) ) Makefile's allow me to do things in a very flexible way and I
for as far as Makefile syntax can be cryptic it certainly beats XML, and
above all I don't want to install java just to run 'make', for me it was
already a big step to install java to run antlr =)</RANT>).

I discussed a bit about this feature with Terence I probably suggested
commandline stuff somewhere in that discussion (and miraculously walked
away with my head still attached to my shoulders ;) ). 

If I look at compilation times then running antlr is probably less than 1%
of the time to compile the generated files (and without minimal remakes,
this probably will go into the 0.001% (okay I may be exagerating here.. but
it means that I would get lethal doses of caffeine)). My educated guess is
that in very few projects antlr's runtime is the biggest factor. So I'm
inclined to keep this thing the default. (if someone provides a 'clean'
patch I would not dream of objecting though)

Another option is extending the interface of Tool.java to select a
different output style (preserving/nonpreserving) for the openOutputFile
method. But I'm not 100% sure how this interacts with antlr's preprocessor
(tokenfiles are also part of the dependency tree). I looked a bit closer
and probably we should move the openOutputFile stuff to the codegenerators
where they can select the preferred PrintWriter, then have Tool.openoutput
file proxy on that method? Something along those lines at least.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Human beings, who are almost unique in having the ability to learn
   from the experience of others, are also remarkable for their apparent
         disinclination to do so. --- Douglas Adams, Last Chance to See


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bogdan_mt at yahoo.com  Tue Jun 11 06:19:29 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] PreservingFileWriter
In-Reply-To: <20020611140216.H12709@cs.utwente.nl>
Message-ID: <20020611131929.64825.qmail@web14806.mail.yahoo.com>

--- Ric Klaren <klaren@cs.utwente.nl> wrote:
> I don't quite see how ant can help recompilation problems in C++ projects
> (behaves slightly different than java with the source and header files).
> Does ant look at the contents of files? Unless I missed something when I
> looked at it (<RANT TYPE="plz ignore ;)"> and hated it on sight, I don't
> quite see the use of ant (mostly in C/C++ settting, for java it might be
> way cool ;) ) 

I don't know much about C++ (<RETURN-RANT> more precisely, I don't want to
remember </RETURN-RANT>), so I speak only for Java environments. My Ant task
is looking at the imported token files and at the generated files, and only
if dates are wrong, it invokes ANTLR again. So it avoids all unnecessary
recompilation, except for cases when you add a whitespace in the grammar. It
also save time by not invoking ANTLR at all, when it's not necessary.

By the way, you can do the same in PreservingFileWriter; you have all
information required about supergrammars, imported files and generated files
collected during grammar analysis by ANTLR.

> Makefile's allow me to do things in a very flexible way and
> I
> for as far as Makefile syntax can be cryptic it certainly beats XML

Just incidentally, the next incarnation of Ant (Ant 2) will be independent
of XML or other particular encoding, which I think it's a step in the right
direction.

...
> If I look at compilation times then running antlr is probably less than 1%
> of the time to compile the generated files (and without minimal remakes,
> this probably will go into the 0.001% (okay I may be exagerating here..
> but
> it means that I would get lethal doses of caffeine)). My educated guess is
> that in very few projects antlr's runtime is the biggest factor. So I'm
> inclined to keep this thing the default. (if someone provides a 'clean'
> patch I would not dream of objecting though)

You are probably right about times, it's more a psychological factor (<RANT>
against improvements that make things slower </RANT>). And it's my inability
to get grammars right from the first time that makes me ANTLR them several
times before having something to compile ;-) Or maybe it's because those
damned temporary files were making the Ant unit tests to fail from time to
time, and it took us two days to figure what's happening :-))

Anyway, I can live with it as default behavior.

Cheers,
Bogdan

> Another option is extending the interface of Tool.java to select a
> different output style (preserving/nonpreserving) for the openOutputFile
> method. But I'm not 100% sure how this interacts with antlr's preprocessor
> (tokenfiles are also part of the dependency tree). I looked a bit closer
> and probably we should move the openOutputFile stuff to the codegenerators
> where they can select the preferred PrintWriter, then have Tool.openoutput
> file proxy on that method? Something along those lines at least.
> 
> Cheers,
> 
> Ric
> --
>
-----+++++*****************************************************+++++++++-------
>     ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
>
-----+++++*****************************************************+++++++++-------
>      Human beings, who are almost unique in having the ability to learn
>    from the experience of others, are also remarkable for their apparent
>          disinclination to do so. --- Douglas Adams, Last Chance to See
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 


__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Tue Jun 11 08:03:48 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] PreservingFileWriter
In-Reply-To: <20020611131929.64825.qmail@web14806.mail.yahoo.com>; from bogdan_mt@yahoo.com on Tue, Jun 11, 2002 at 06:19:29AM -0700
References: <20020611140216.H12709@cs.utwente.nl> <20020611131929.64825.qmail@web14806.mail.yahoo.com>
Message-ID: <20020611170347.K12709@cs.utwente.nl>

Hi,

On Tue, Jun 11, 2002 at 06:19:29AM -0700, Bogdan Mitu wrote:
> I don't know much about C++ (<RETURN-RANT> more precisely, I don't want to
> remember </RETURN-RANT>),

Touche ;) I was a bit overbearing I guess sorry.

> so I speak only for Java environments. My Ant task
> is looking at the imported token files and at the generated files, and only
> if dates are wrong, it invokes ANTLR again. So it avoids all unnecessary
> recompilation, except for cases when you add a whitespace in the grammar. It
> also save time by not invoking ANTLR at all, when it's not necessary.

Ack, basically the same as make but with C++ it goes wrong on touching the
generated header file for the parser.

> By the way, you can do the same in PreservingFileWriter; you have all
> information required about supergrammars, imported files and generated files
> collected during grammar analysis by ANTLR.

In theory yes.. only making it work in the current codebase makes me less
enthousiastic. This info is basically non existent at the moment the
filewriter is created.

> > Makefile's allow me to do things in a very flexible way and
> > I
> > for as far as Makefile syntax can be cryptic it certainly beats XML
> 
> Just incidentally, the next incarnation of Ant (Ant 2) will be independent
> of XML or other particular encoding, which I think it's a step in the right
> direction.

I'll most certainly will have a look at it again.

> > If I look at compilation times then running antlr is probably less than 1%
> > of the time to compile the generated files (and without minimal remakes,
> > this probably will go into the 0.001% (okay I may be exagerating here..
> > but
> > it means that I would get lethal doses of caffeine)). My educated guess is
> > that in very few projects antlr's runtime is the biggest factor. So I'm
> > inclined to keep this thing the default. (if someone provides a 'clean'
> > patch I would not dream of objecting though)

> You are probably right about times, it's more a psychological factor (<RANT>
> against improvements that make things slower </RANT>).

Mwoch together with the use of the extra buffering added in 2.7.2aX it will
probably even out ;) Win some lose some.

> And it's my inability to get grammars right from the first time that makes
> me ANTLR them several times before having something to compile ;-) Or maybe
> it's because those damned temporary files were making the Ant unit tests to
> fail from time to time, and it took us two days to figure what's happening
> :-))

It sometimes makes you wonder if a pencil and paper is more advanced than a
computer :) And we poor software developers are basically only outthere
frustrating ourselves (and eachother) ;)

> Anyway, I can live with it as default behavior.

We'll see what Terence cooks up with the new codegeneration stuff. And see
if we can squirrel setting a different printwriter away in it.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 'And this 'rebooting' business? Give it a good kicking, do you?' 'Oh, no,
  of course, we ... that is ... well, yes, in fact,' said Ponder. 'Adrian
    goes round the back and ... er ... prods it with his foot. But in a
     technical way,' he added. --- From: Hogfather by Terry Pratchett.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Tue Jun 11 10:59:10 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] PreservingFileWriter
In-Reply-To: <20020611140216.H12709@cs.utwente.nl>
Message-ID: <EE9B1870-7D64-11D6-8CCA-0030653DE0D6@jguru.com>


On Tuesday, June 11, 2002, at 05:02  AM, Ric Klaren wrote:

> Hi,
>
> On Tue, Jun 11, 2002 at 04:19:40AM -0700, Bogdan Mitu wrote:
>> One question: isn't this feature slowing down things? I understand your
>> point in avoiding recompilation, but this can be accomplished in other 
>> ways
>> too (<shameless-advertisement> for instance, using my new Ant task
>> </shameless-advertisement>). Can you please consider making this 
>> feature
>> optional (through a command-line parameter)?
>
> Uhm ever tried to suggest command-line parameter to Terence? 
> <ducks-for-cover>
>
> I don't quite see how ant can help recompilation problems in C++ 
> projects
> (behaves slightly different than java with the source and header files).
> Does ant look at the contents of files? Unless I missed something when I
> looked at it (<RANT TYPE="plz ignore ;)"> and hated it on sight, I don't
> quite see the use of ant (mostly in C/C++ settting, for java it might be
> way cool ;) ) Makefile's allow me to do things in a very flexible way 
> and I
> for as far as Makefile syntax can be cryptic it certainly beats XML, and
> above all I don't want to install java just to run 'make', for me it was
> already a big step to install java to run antlr =)</RANT>).
>
> I discussed a bit about this feature with Terence I probably suggested
> commandline stuff somewhere in that discussion (and miraculously walked
> away with my head still attached to my shoulders ;) ).

<snicker>  Yeah, I get out the axe every time someone suggests a command 
line option.  The PCCTS folks in the crowd thank me every time I resist 
I suspect ;)  Anyway, I was kinda hoping to remove the complexity of the 
mechanism for not writing files, but Ric convinced me that it was pretty 
useful for C++.  Actually why don't I just make that sensitive to the 
language option?  If C++ then do the preservation thing.  Make sense?

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Tue Jun 11 11:13:52 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Re: Ant Book Approacheth [Was PreservingFileWriter]
In-Reply-To: <20020611131929.64825.qmail@web14806.mail.yahoo.com>
Message-ID: <FC3F12F2-7D66-11D6-8CCA-0030653DE0D6@jguru.com>

On Tuesday, June 11, 2002, at 06:19  AM, Bogdan Mitu wrote:
> Just incidentally, the next incarnation of Ant (Ant 2) will be 
> independent
> of XML or other particular encoding, which I think it's a step in the 
> right
> direction.

Me too...i'll take another look myself.

For your info, Erik Hatcher, a cool cat that manages the Ant FAQ at 
jGuru, is done with his Ant book.  Should be out soon:

Java Development with Ant by Erik Hatcher and Steve Loughran
ISBN 1930110-588 -- will be published August 1st
Softbound, 450 pages, $44.95

L8R G8Rs,
Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Tue Jun 11 11:44:17 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Re: PreservingFileWriter
In-Reply-To: <EE9B1870-7D64-11D6-8CCA-0030653DE0D6@jguru.com>
Message-ID: <ae5ge1+3mhm@eGroups.com>

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> useful for C++.  Actually why don't I just make that sensitive to 
the 
> language option?  If C++ then do the preservation thing.  Make 
sense?
> 

Okay, maybe I missed something completely obvious, but what the 
flippin' heck is this conversation all about?!  Preservation thing?  
What is that?  Why would C++ want it and Java not?

And Ter, what's with your disdain for command-line parameters?  I 
thought you's was a Unix dude!  :-)

At this point, I'd really like a system whereby ANTLR could produce 
MULTIPLE output formats from a single invocation, like (for a 
strictly hypothetical situation, *ahem*) outputing C++ code AND 
outputing the big diagnostic text files.  I think a command line that 
supported that would be ducky.

JSRS


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From erik at hatcher.net  Tue Jun 11 11:50:05 2002
From: erik at hatcher.net (Erik Hatcher)
Date: Mon Dec 20 16:14:52 2004
Subject: Ant Book Approacheth [Was PreservingFileWriter]
References: <FC3F12F2-7D66-11D6-8CCA-0030653DE0D6@jguru.com>
Message-ID: <004401c21178$cd5ac1a0$6401a8c0@darden.virginia.edu>

Thanks, Terrence, for CC'ing this to me.  A few inline comments:

From: "Terence Parr" <parrt@jguru.com>
To: <antlr-interest@yahoogroups.com>
Sent: Tuesday, June 11, 2002 2:13 PM
Subject: Re: Ant Book Approacheth [Was PreservingFileWriter]


> On Tuesday, June 11, 2002, at 06:19  AM, Bogdan Mitu wrote:
> > Just incidentally, the next incarnation of Ant (Ant 2) will be
> > independent
> > of XML or other particular encoding, which I think it's a step in the
> > right
> > direction.

Ant 1.5 actually has pluggable ProjectHelper capability to allow you to plug
in a class that constructs the Project object.  The default one builds it
from parsing an XML file, but you can now plug in your own.  Maybe you ANTLR
gurus could have one that takes a Makefile and constructs a Project object
:))

This pluggable layer will be used, I think, to start providing XML namespace
support, but is much more generally capable than that.  One person I've seen
report that he's taken a project model (in XML) and XSLT'd it to a build
file on the fly when invoking Ant so that all he maintains are the project
model and XSLT, no build.xml.

> For your info, Erik Hatcher, a cool cat that manages the Ant FAQ at
> jGuru, is done with his Ant book.  Should be out soon:
>
> Java Development with Ant by Erik Hatcher and Steve Loughran
> ISBN 1930110-588 -- will be published August 1st
> Softbound, 450 pages, $44.95

And this is really going to be about 600+ pages - Manning has just never
updated their info on our latest page count!  And yes, my fingers are tired.

    Erik

From parrt at jguru.com  Tue Jun 11 12:17:24 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Re: PreservingFileWriter
In-Reply-To: <ae5ge1+3mhm@eGroups.com>
Message-ID: <DC5C4836-7D6F-11D6-BF18-0030653DE0D6@jguru.com>


On Tuesday, June 11, 2002, at 11:44  AM, jsrs701 wrote:

> --- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
>> useful for C++.  Actually why don't I just make that sensitive to
> the
>> language option?  If C++ then do the preservation thing.  Make
> sense?
>>
>
> Okay, maybe I missed something completely obvious, but what the
> flippin' heck is this conversation all about?!  Preservation thing?
> What is that?  Why would C++ want it and Java not?

Just a means of not updating files that don't change when you run 
antlr.  Reduces make's job.

> And Ter, what's with your disdain for command-line parameters?  I
> thought you's was a Unix dude!  :-)

Well, I got a little option happy in PCCTS ;)  Remember that anything 
you add lives forever ;)

>
> At this point, I'd really like a system whereby ANTLR could produce
> MULTIPLE output formats from a single invocation, like (for a
> strictly hypothetical situation, *ahem*) outputing C++ code AND
> outputing the big diagnostic text files.  I think a command line that
> supported that would be ducky.

You could make a script that runs antlr twice ;)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Tue Jun 11 14:25:55 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Re: PreservingFileWriter
In-Reply-To: <DC5C4836-7D6F-11D6-BF18-0030653DE0D6@jguru.com>
Message-ID: <ae5pt3+f27b@eGroups.com>

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> > At this point, I'd really like a system whereby ANTLR could 
produce
> > MULTIPLE output formats from a single invocation, like (for a
> > strictly hypothetical situation, *ahem*) outputing C++ code AND
> > outputing the big diagnostic text files.  I think a command line 
that
> > supported that would be ducky.
> 
> You could make a script that runs antlr twice ;)

Hm.  A certain observation about the relative intelligence of the 
gluteal muscles comes to mind...  :-)

That is, of course, the obvious solution, given a scriptable 
environment.  However (says the platform agnostic), I happen to be 
running in a Visual Studio environment, where that kind of stunt is 
extremely non-intuitive (and therefore unmaintainable), if not 
outright impossible in the IDE.

Sigh.

Hence my desire for cmd-line options.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Tue Jun 11 17:35:44 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Re: PreservingFileWriter
In-Reply-To: <ae5pt3+f27b@eGroups.com>
Message-ID: <551776D8-7D9C-11D6-93E7-0030653DE0D6@jguru.com>


On Tuesday, June 11, 2002, at 02:25  PM, jsrs701 wrote:

> --- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
>>> At this point, I'd really like a system whereby ANTLR could
> produce
>>> MULTIPLE output formats from a single invocation, like (for a
>>> strictly hypothetical situation, *ahem*) outputing C++ code AND
>>> outputing the big diagnostic text files.  I think a command line
> that
>>> supported that would be ducky.
>>
>> You could make a script that runs antlr twice ;)
>
> Hm.  A certain observation about the relative intelligence of the
> gluteal muscles comes to mind...  :-)

<snicker>

>
> That is, of course, the obvious solution, given a scriptable
> environment.  However (says the platform agnostic), I happen to be
> running in a Visual Studio environment, where that kind of stunt is
> extremely non-intuitive (and therefore unmaintainable), if not
> outright impossible in the IDE.

Can you subclass a few things and add the functionality?

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Tue Jun 11 17:37:04 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Fwd: Ant Book Approacheth [Was PreservingFileWriter]
Message-ID: <845EA902-7D9C-11D6-93E7-0030653DE0D6@jguru.com>

 From Erik Hatcher...a few comments on Ant.

Begin forwarded message:

> From: "Erik Hatcher" <erik@hatcher.net>
>> On Tuesday, June 11, 2002, at 06:19  AM, Bogdan Mitu wrote:
>>> Just incidentally, the next incarnation of Ant (Ant 2) will be
>>> independent
>>> of XML or other particular encoding, which I think it's a step in the
>>> right
>>> direction.
>
> Ant 1.5 actually has pluggable ProjectHelper capability to allow you to 
> plug
> in a class that constructs the Project object.  The default one builds 
> it
> from parsing an XML file, but you can now plug in your own.  Maybe you 
> ANTLR
> gurus could have one that takes a Makefile and constructs a Project 
> object
> :))
>
> This pluggable layer will be used, I think, to start providing XML 
> namespace
> support, but is much more generally capable than that.  One person I've 
> seen
> report that he's taken a project model (in XML) and XSLT'd it to a build
> file on the fly when invoking Ant so that all he maintains are the 
> project
> model and XSLT, no build.xml.
>
>> For your info, Erik Hatcher, a cool cat that manages the Ant FAQ at
>> jGuru, is done with his Ant book.  Should be out soon:
>>
>> Java Development with Ant by Erik Hatcher and Steve Loughran
>> ISBN 1930110-588 -- will be published August 1st
>> Softbound, 450 pages, $44.95
>
> And this is really going to be about 600+ pages - Manning has just never
> updated their info on our latest page count!  And yes, my fingers are 
> tired.
>
>     Erik
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Tue Jun 11 18:16:20 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Re: PreservingFileWriter
In-Reply-To: <551776D8-7D9C-11D6-93E7-0030653DE0D6@jguru.com>
Message-ID: <ae67d4+topn@eGroups.com>

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> > That is, of course, the obvious solution, given a scriptable
> > environment.  However (says the platform agnostic), I happen to be
> > running in a Visual Studio environment, where that kind of stunt 
is
> > extremely non-intuitive (and therefore unmaintainable), if not
> > outright impossible in the IDE.
> 
> Can you subclass a few things and add the functionality?

Eek, probably not right now.  I've had about five minutes to work on 
my ANTLR project lately, and probably won't get much more in the near 
future.  Then I'm off to play Army for five months.

I'll look into it and, maybe, get back to you.

(Is that ambiguous and noncommittal enough for ya? :)


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bob at werken.com  Tue Jun 11 21:14:25 2002
From: bob at werken.com (bob mcwhirter)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Fwd: Ant Book Approacheth [Was PreservingFileWriter]
In-Reply-To: <845EA902-7D9C-11D6-93E7-0030653DE0D6@jguru.com>
Message-ID: <Pine.LNX.3.96.1020612001253.20316C-100000@exeter.exeter.org>


I'd be remiss if I didn't mention Maven, at this point...

	http://jakarta.apache.org/turbine/maven

Pick just about any bob-project (drools.org, werkz.org, jaxen.org)
to see a maven-powered project.  Maven takes an abstract project
descriptor (project.xml) and does all the building, jaring, doc and
metric generation, etc for you.

We're also working to ween ourselves from ant, and be based more
upon a Jelly-based syntax, which is JSPesque.  

	-bob 


On Tue, 11 Jun 2002, Terence Parr wrote:

>  From Erik Hatcher...a few comments on Ant.
> 
> Begin forwarded message:
> 
> > From: "Erik Hatcher" <erik@hatcher.net>
> >> On Tuesday, June 11, 2002, at 06:19  AM, Bogdan Mitu wrote:
> >>> Just incidentally, the next incarnation of Ant (Ant 2) will be
> >>> independent
> >>> of XML or other particular encoding, which I think it's a step in the
> >>> right
> >>> direction.
> >
> > Ant 1.5 actually has pluggable ProjectHelper capability to allow you to 
> > plug
> > in a class that constructs the Project object.  The default one builds 
> > it
> > from parsing an XML file, but you can now plug in your own.  Maybe you 
> > ANTLR
> > gurus could have one that takes a Makefile and constructs a Project 
> > object
> > :))
> >
> > This pluggable layer will be used, I think, to start providing XML 
> > namespace
> > support, but is much more generally capable than that.  One person I've 
> > seen
> > report that he's taken a project model (in XML) and XSLT'd it to a build
> > file on the fly when invoking Ant so that all he maintains are the 
> > project
> > model and XSLT, no build.xml.
> >
> >> For your info, Erik Hatcher, a cool cat that manages the Ant FAQ at
> >> jGuru, is done with his Ant book.  Should be out soon:
> >>
> >> Java Development with Ant by Erik Hatcher and Steve Loughran
> >> ISBN 1930110-588 -- will be published August 1st
> >> Softbound, 450 pages, $44.95
> >
> > And this is really going to be about 600+ pages - Manning has just never
> > updated their info on our latest page count!  And yes, my fingers are 
> > tired.
> >
> >     Erik
> >
> >
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 

--
Bob McWhirter        bob@werken.com
The Werken Company   http://werken.com/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Wed Jun 12 01:26:47 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Re: Fwd: Ant Book Approacheth [Was PreservingFileWriter]
In-Reply-To: <Pine.LNX.3.96.1020612001253.20316C-100000@exeter.exeter.org>
Message-ID: <ae70k7+cpbc@eGroups.com>

Thou art warned...

<rant>
What is it about open source projects and the endemic problem that 
the most basic things keep getting reimplemented?!  "If it ain't 
broke, rewrite it."  That seems to be the mantra.

I'm pretty sure we have enough build systems now.  Why does everyone 
have to write their own?  How 'bout some people start writing a 
decent, completely open source competitor to Word?  (One who's free-
ness isn't changing weekly *ahem Sun ahem*.)

Sheesh.
</rant>

Okay, I'm done now.  This isn't directed at anyone in particular.  
I'm just moaning.

--- In antlr-interest@y..., bob mcwhirter <bob@w...> wrote:
> 
> I'd be remiss if I didn't mention Maven, at this point...
> 
> 	http://jakarta.apache.org/turbine/maven
> 
> Pick just about any bob-project (drools.org, werkz.org, jaxen.org)
> to see a maven-powered project.  Maven takes an abstract project
> descriptor (project.xml) and does all the building, jaring, doc and
> metric generation, etc for you.
> 
> We're also working to ween ourselves from ant, and be based more
> upon a Jelly-based syntax, which is JSPesque.  
> 
> 	-bob 
> 
> 
> On Tue, 11 Jun 2002, Terence Parr wrote:
> 
> >  From Erik Hatcher...a few comments on Ant.
> > 
> > Begin forwarded message:
> > 
> > > From: "Erik Hatcher" <erik@h...>
> > >> On Tuesday, June 11, 2002, at 06:19  AM, Bogdan Mitu wrote:
> > >>> Just incidentally, the next incarnation of Ant (Ant 2) will be
> > >>> independent
> > >>> of XML or other particular encoding, which I think it's a 
step in the
> > >>> right
> > >>> direction.
> > >
> > > Ant 1.5 actually has pluggable ProjectHelper capability to 
allow you to 
> > > plug
> > > in a class that constructs the Project object.  The default one 
builds 
> > > it
> > > from parsing an XML file, but you can now plug in your own.  
Maybe you 
> > > ANTLR
> > > gurus could have one that takes a Makefile and constructs a 
Project 
> > > object
> > > :))
> > >
> > > This pluggable layer will be used, I think, to start providing 
XML 
> > > namespace
> > > support, but is much more generally capable than that.  One 
person I've 
> > > seen
> > > report that he's taken a project model (in XML) and XSLT'd it 
to a build
> > > file on the fly when invoking Ant so that all he maintains are 
the 
> > > project
> > > model and XSLT, no build.xml.
> > >
> > >> For your info, Erik Hatcher, a cool cat that manages the Ant 
FAQ at
> > >> jGuru, is done with his Ant book.  Should be out soon:
> > >>
> > >> Java Development with Ant by Erik Hatcher and Steve Loughran
> > >> ISBN 1930110-588 -- will be published August 1st
> > >> Softbound, 450 pages, $44.95
> > >
> > > And this is really going to be about 600+ pages - Manning has 
just never
> > > updated their info on our latest page count!  And yes, my 
fingers are 
> > > tired.
> > >
> > >     Erik
> > >
> > >
> > --
> > Co-founder, http://www.jguru.com
> > Creator, ANTLR Parser Generator: http://www.antlr.org
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
> --
> Bob McWhirter        bob@w...
> The Werken Company   http://werken.com/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bals1978 at hotmail.com  Wed Jun 12 05:04:42 2002
From: bals1978 at hotmail.com (Balvinder Singh)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] some questions
Message-ID: <F89zRPTNZStgLzhVOJw000009ab@hotmail.com>

Hi...

Question 1

I have following lexer, in which I want both Digit and Integer to be accesed 
from parser, but obiviously these two rule have conflict.

Can't we do some kind of maximum matching as we can do in Flex.

class Test extends Lexer;
options{
k=2;
}

Digit : '0' .. '9' { System.out.println("Digit "+ $getText);}
      ;

Integer : ( options {greedy=true;} :Digit)+ { System.out.println("Integer "+ 
$getText);}
        ;


Question 2

During parsing I want some token, and this token may have some conflicts 
with other tokens , is there any way that parser could tell lexer that first 
search the desired token and if not found then search for others.


thanx

balvinder




_________________________________________________________________
Send and receive Hotmail on your mobile device: http://mobile.msn.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bob at werken.com  Wed Jun 12 06:42:12 2002
From: bob at werken.com (bob mcwhirter)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Re: Fwd: Ant Book Approacheth [Was PreservingFileWriter]
In-Reply-To: <ae70k7+cpbc@eGroups.com>
Message-ID: <Pine.LNX.3.96.1020612094044.23668G-100000@exeter.exeter.org>

On Wed, 12 Jun 2002, jsrs701 wrote:

> <rant>
> What is it about open source projects and the endemic problem that 
> the most basic things keep getting reimplemented?!  "If it ain't 
> broke, rewrite it."  That seems to be the mantra.
> </rant>

So, how's that JavaCC-based grammar of yours coming along? Oh, sorry,
I meant lex/yacc?

Everyone has a different definition of "ain't broke".  To mean, ant
is broken.  To ant, make was broken.  To antlr, javacc is broken.

Sure, we have a lot of NIH syndrome, but sometimes I think it pays off.

	-bob


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Wed Jun 12 08:17:35 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] help
References: <20020606001413.8315.qmail@web12406.mail.yahoo.com>
Message-ID: <3D07660F.51036BEF@boeing.com>

Greg Lindholm wrote:
> 
> I'll try to help where I can.
> 
> identifier : qualified_data_name
>    ( "(" subscript ")" )*
>    ( "(" leftmost_character_position ":" (length)? ")" )?;
> 
> try.g:125: warning: nondeterminism upon
> try.g:125:      k==1:"("
> try.g:125:      between alt 1 and exit branch of block
> 

A simple solution would be

 identifier : qualified_data_name
    ( ("(" subscript )=> "(" subscript ")" )*
    ( "(" leftmost_character_position ":" (length)? ")" )?;

sinan

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Wed Jun 12 08:27:09 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] help
References: <F137baKgMdFxlvq2dNP0001d821@hotmail.com>
Message-ID: <3D07684D.B8B25BF4@boeing.com>

Balvinder Singh wrote:
> 
> Hi...
> 
> I have a rule, which has 3 conflicts. plz help me to resolve it.
> 
> If I change it to context free grammar  and use some syntactic predicate,
> will be a right way or not.
> 
> parser rule
> picture_string : (currency)? ((picChar)+ (repeat)?)+ (Punctuation
> ((picChar)+ (repeat)?)+)*
> 
> currency and picChar is alphabet
> 
> repeat : "(" Integer ")"
>        ;
> 
> lexer rule
> Punctuation : ('/' | ',' | '.' | ':')
>             ;
> 
> so I have conflict in picture_string.
> 
> balvinder

If currency and picChar are alphabet with no distinguishing properties,
then obviously
no way to disambiguate exists.

However , othwerwise, you can always use


picture_string : ((currency)=>currency| ) ...

I wrote ( and posted ) a Fortran 77 parser at one time. Due to the free
form 
nature of the language, I had to only parse characters as tokens, and
made
everything else a parser rule. The problem with that approach is of
course, you don't
know what you've got until you parse the statement , and then re-parse
it ....

Wreaks havoc with error statements.

so basically you do

 statement:		(dostatement)=> dostatement
		|	(writestatement)=> writestatement
		...
		|	assignstatement
	;

Now when you run into a bad statement ( say a bad write statement)
e.g. "    write(6,7("
it will always say that you have a bad assignstatement.

sinan




sinan

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Jun 12 10:45:19 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] not operator and sets
In-Reply-To: <adpnu7+4qvi@eGroups.com>
Message-ID: <2979FCCA-7E2C-11D6-BA78-0030653DE0D6@jguru.com>


On Friday, June 7, 2002, at 12:38  AM, gertgrossmann wrote:

> what is the reason to deny mixing of token references and character
> literals in a negated set like this:
>
> STAR : '*';
> NEGTEST: '+' ~( ';' | STAR | '-');   <- not allowed :(

The reason is that STAR might execute actions rather than just match 
chars.  ANTLR isn't currently smart enough to replace a rule ref with a 
set if no actions are there.  Sorry.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From byeung at etrade.ca  Wed Jun 12 10:51:23 2002
From: byeung at etrade.ca (byeung128)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Question on recognizing a pattern
Message-ID: <ae81mr+9tv9@eGroups.com>

I am just a beginner on Antlr and I really think it is a gift for any 
developers. After reading some examples, I am trying to write a 
parser to recognize a address pattern like "NUMBER STREETNAME 
STREETTYPE DIRECTION". When I compiled the following source, I got 
error messages like "Lexical rule STREETYPE defined outside of 
lexer...". However, I declare all these rules inside the parser 
section not lexer section. Could you tell me what goes wrong ? Could 
you give me some advice on this grammar ? Thanks in advance.

class MyParser extends Parser;
{
  int i_count = 0 ;
}

startRule: a:address
   { System.out.println ( "->>>>>ADDRESS:" + a.getText() ); };


address : NUMBER STREETNAME STREETTYPE DIRECTION   ;

STREETTYPE:  AVENUE 
          |  STREET
          ;

AVENUE: "AVENUE" 
      | "AVENUE."
      | "AV"
      | "AV."
      | "AVE"
      | "AVE."
      ;

STREET: "STREET"
      | "STR"
      | "STR."
      | "ST."
      | "ST"
      ;

DIRECTION: EAST
         | WEST
         | SOUTH
         | NORTH
         | NORTHWEST
         | SOUTHWEST
         | NORTHEAST
         | SOUTHEAST
         ;

EAST: "EAST"
    | "E."
    | "E"
    ;

WEST: "WEST"
    | "W."
    | "W"
    ;

NORTH: "NORTH"
     | "N."
     | "N"
     ;

SOUTH: "SOUTH"
     | "S."
     | "S"
     ;
     
NORTHWEST: "NORTHWEST"
         | "NW."
         | "NW"
         ;

NORTHEAST: "NORTHEAST"
         | "NE."
         | "NE"
         ;

SOUTHWEST: "SOUTHWEST"
         | "SW."
         | "SW"
         ;
   
SOUTHEAST: "SOUTHEAST"
         | "SE."
         | "SE"
         ;

class MyLexer extends Lexer;
options {
  charVocabulary = '\3'..'\377' ;
  testLiterals=false ;
  k = 2 ;
}

{
  int i_STREETNAMECount = 0;
  int i_DICount = 0;
  int i_WSCount = 0;
}

WS : ( ' ' | '\t' | '\n' | '\r' ) 
     { $setType(Token.SKIP) ; 
       System.out.println ( "WS:" + (++i_WSCount) );  } ;

STREETNAME  
  options { testLiterals = true ; } 
: ( 'a'..'z' | 'A'..'Z' )+ 
  { System.out.println ( "CSTREETNAME:" + $getText ) ; 
    System.out.println ( "STREETNAME:" + (++i_STREETNAMECount) ); } ;

NUMBER: ( '0'..'9' )+ 
     { System.out.println ( "CNUMBER:" + $getText ) ; 
       System.out.println ( "NUMBER:" + (++i_DICount) ); } ;


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Jun 12 10:58:22 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] C++ grammar
Message-ID: <FC16026E-7E2D-11D6-BA78-0030653DE0D6@jguru.com>

Folks,

A number of people are playing with a C++ front end for ANTLR (either 
from scratch or by converting old PCCTS grammar forward to ANTLR).  I 
might be putting some effort behind making a standard C++ parser for 
ANTLR and could use any head start people have.  So, who's been doing 
what? :)

Note that I have improved the Java grammar a bunch I believe when 
building a cross referencing tool.  I am pushing the changes into the 
ANTLR mainstream soon.  One of the biggest changes is that it modifies 
the tree parser to isolate method calls and the expressions that result 
in methods (which can be complex).  I.e., I'm using the grammar to help 
you isolate method calls in the tree.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From glindholm at yahoo.com  Wed Jun 12 11:02:19 2002
From: glindholm at yahoo.com (Greg Lindholm)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] some questions
In-Reply-To: <F89zRPTNZStgLzhVOJw000009ab@hotmail.com>
Message-ID: <20020612180219.84210.qmail@web12404.mail.yahoo.com>

Q1) Ask yourself this; if you have a single digit say '5' do you want
the lexer to return an Integer token or a Digit token?  In a context
free lexer you have to decide which you want. Normally you
would expect to see the Digit rule "protected" so it can be used in
other rules but never returned.

If your context isn't free then you probably should have different
lexers and switch between them as your context changes.  This is
discussed in the ANLTR docs in the section on Token Streams and
Multiplexing.

Q2) No, but the multiple lexer solution might work for this as well.

Greg


--- Balvinder Singh <bals1978@hotmail.com> wrote:
> Hi...
> 
> Question 1
> 
> I have following lexer, in which I want both Digit and Integer to be
> accesed 
> from parser, but obiviously these two rule have conflict.
> 
> Can't we do some kind of maximum matching as we can do in Flex.
> 
> class Test extends Lexer;
> options{
> k=2;
> }
> 
> Digit : '0' .. '9' { System.out.println("Digit "+ $getText);}
>       ;
> 
> Integer : ( options {greedy=true;} :Digit)+ {
> System.out.println("Integer "+ 
> $getText);}
>         ;
> 
> 
> Question 2
> 
> During parsing I want some token, and this token may have some
> conflicts 
> with other tokens , is there any way that parser could tell lexer
> that first 
> search the desired token and if not found then search for others.
> 
> 
> thanx
> 
> balvinder
> 
> 
> 
> 
> _________________________________________________________________
> Send and receive Hotmail on your mobile device: http://mobile.msn.com
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From brian-l-smith at uiowa.edu  Wed Jun 12 11:04:38 2002
From: brian-l-smith at uiowa.edu (Brian Smith)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Question on recognizing a pattern
References: <ae81mr+9tv9@eGroups.com>
Message-ID: <3D078D36.4080707@uiowa.edu>

parser rules must start with a lowercase letter.
lexer  rules must start with an uppercase letter.

ANTLR assumes that, because all your rules start with an uppercase 
letter, they are meant to be lexer rules.

- Brian

byeung128 wrote:
> I am just a beginner on Antlr and I really think it is a gift for any 
> developers. After reading some examples, I am trying to write a 
> parser to recognize a address pattern like "NUMBER STREETNAME 
> STREETTYPE DIRECTION". When I compiled the following source, I got 
> error messages like "Lexical rule STREETYPE defined outside of 
> lexer...". However, I declare all these rules inside the parser 
> section not lexer section. Could you tell me what goes wrong ? Could 
> you give me some advice on this grammar ? Thanks in advance.
> 
> class MyParser extends Parser;
> {
>   int i_count = 0 ;
> }
> 
> startRule: a:address
>    { System.out.println ( "->>>>>ADDRESS:" + a.getText() ); };
> 
> 
> address : NUMBER STREETNAME STREETTYPE DIRECTION   ;
> 
> STREETTYPE:  AVENUE 
>           |  STREET
>           ;
> 
> AVENUE: "AVENUE" 
>       | "AVENUE."
>       | "AV"
>       | "AV."
>       | "AVE"
>       | "AVE."
>       ;
> 
> STREET: "STREET"
>       | "STR"
>       | "STR."
>       | "ST."
>       | "ST"
>       ;
> 
> DIRECTION: EAST
>          | WEST
>          | SOUTH
>          | NORTH
>          | NORTHWEST
>          | SOUTHWEST
>          | NORTHEAST
>          | SOUTHEAST
>          ;
> 
> EAST: "EAST"
>     | "E."
>     | "E"
>     ;
> 
> WEST: "WEST"
>     | "W."
>     | "W"
>     ;
> 
> NORTH: "NORTH"
>      | "N."
>      | "N"
>      ;
> 
> SOUTH: "SOUTH"
>      | "S."
>      | "S"
>      ;
>      
> NORTHWEST: "NORTHWEST"
>          | "NW."
>          | "NW"
>          ;
> 
> NORTHEAST: "NORTHEAST"
>          | "NE."
>          | "NE"
>          ;
> 
> SOUTHWEST: "SOUTHWEST"
>          | "SW."
>          | "SW"
>          ;
>    
> SOUTHEAST: "SOUTHEAST"
>          | "SE."
>          | "SE"
>          ;
> 
> class MyLexer extends Lexer;
> options {
>   charVocabulary = '\3'..'\377' ;
>   testLiterals=false ;
>   k = 2 ;
> }
> 
> {
>   int i_STREETNAMECount = 0;
>   int i_DICount = 0;
>   int i_WSCount = 0;
> }
> 
> WS : ( ' ' | '\t' | '\n' | '\r' ) 
>      { $setType(Token.SKIP) ; 
>        System.out.println ( "WS:" + (++i_WSCount) );  } ;
> 
> STREETNAME  
>   options { testLiterals = true ; } 
> : ( 'a'..'z' | 'A'..'Z' )+ 
>   { System.out.println ( "CSTREETNAME:" + $getText ) ; 
>     System.out.println ( "STREETNAME:" + (++i_STREETNAMECount) ); } ;
> 
> NUMBER: ( '0'..'9' )+ 
>      { System.out.println ( "CNUMBER:" + $getText ) ; 
>        System.out.println ( "NUMBER:" + (++i_DICount) ); } ;
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bals1978 at hotmail.com  Wed Jun 12 11:12:42 2002
From: bals1978 at hotmail.com (Balvinder Singh)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] some questions
Message-ID: <F30b9ezf9CIElR3n4DV00000939@hotmail.com>

I want max matching as flex does.

eg

MUL : '*' ;
EXP : "**" ;

so on seeing "**" lexer should return EXP rather than MUL MUL


balvinder



>From: Greg Lindholm <glindholm@yahoo.com>
>Reply-To: antlr-interest@yahoogroups.com
>To: antlr-interest@yahoogroups.com
>Subject: Re: [antlr-interest] some questions
>Date: Wed, 12 Jun 2002 11:02:19 -0700 (PDT)
>
>Q1) Ask yourself this; if you have a single digit say '5' do you want
>the lexer to return an Integer token or a Digit token?  In a context
>free lexer you have to decide which you want. Normally you
>would expect to see the Digit rule "protected" so it can be used in
>other rules but never returned.
>
>If your context isn't free then you probably should have different
>lexers and switch between them as your context changes.  This is
>discussed in the ANLTR docs in the section on Token Streams and
>Multiplexing.
>
>Q2) No, but the multiple lexer solution might work for this as well.
>
>Greg
>
>
>--- Balvinder Singh <bals1978@hotmail.com> wrote:
> > Hi...
> >
> > Question 1
> >
> > I have following lexer, in which I want both Digit and Integer to be
> > accesed
> > from parser, but obiviously these two rule have conflict.
> >
> > Can't we do some kind of maximum matching as we can do in Flex.
> >
> > class Test extends Lexer;
> > options{
> > k=2;
> > }
> >
> > Digit : '0' .. '9' { System.out.println("Digit "+ $getText);}
> >       ;
> >
> > Integer : ( options {greedy=true;} :Digit)+ {
> > System.out.println("Integer "+
> > $getText);}
> >         ;
> >
> >
> > Question 2
> >
> > During parsing I want some token, and this token may have some
> > conflicts
> > with other tokens , is there any way that parser could tell lexer
> > that first
> > search the desired token and if not found then search for others.
> >
> >
> > thanx
> >
> > balvinder
> >
> >
> >
> >
> > _________________________________________________________________
> > Send and receive Hotmail on your mobile device: http://mobile.msn.com
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/
> >
> >
>
>
>__________________________________________________
>Do You Yahoo!?
>Yahoo! - Official partner of 2002 FIFA World Cup
>http://fifaworldcup.yahoo.com
>
>
>
>Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/




_________________________________________________________________
Chat with friends online, try MSN Messenger: http://messenger.msn.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Jun 12 18:12:07 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] The Doctor Is In
Message-ID: <94597112-7E6A-11D6-8CA1-0030653DE0D6@jguru.com>

Hello ANTLR folks,

Just wanted to let people know that I'm once again available for ANTLR 
and general language and translation consulting.  There are two flavors 
you might consider using:

o  technical support contract; you get a special email address to ask me 
questions.
o  actual contract labor.

I have updated the support page accordingly:

	http://www.antlr.org/support.html

This is also indirectly good news for the whole ANTLR community as it 
means that I'll be devoting much more time to ANTLR fixes etc... :)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From f_moriyama at psg.hitachi-hec.co.jp  Wed Jun 12 23:45:36 2002
From: f_moriyama at psg.hitachi-hec.co.jp (fumikatsu_moriyama)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Re: ANTLR grammar for ANTLR itself.
In-Reply-To: <0893A6C2-79CF-11D6-803A-0030653DE0D6@jguru.com>
Message-ID: <ae9f2g+on80@eGroups.com>

Thanks a lot.
Uuu..., I'm ashamed ...


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From ngormley at hotmail.com  Thu Jun 13 03:22:47 2002
From: ngormley at hotmail.com (Niall Gormley)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Mixing Grammars
Message-ID: <F101xguBBWg0EjfTOaF0001c370@hotmail.com>

Hi,

As part of a translation project I am working I wish to create an AST of the 
target language, by transforming the source AST, using multiple tree 
grammars and user interaction.

Is it possible to mix grammars in a TreeParser, to allow node creation of 
the target language?

Has anyone got a good example of how they achieved this type of translation 
in practice.

Thanks for your help,
Niall

_________________________________________________________________
Chat with friends online, try MSN Messenger: http://messenger.msn.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bogdan_mt at yahoo.com  Thu Jun 13 03:43:51 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Preserving whitespace
In-Reply-To: <845EA902-7D9C-11D6-93E7-0030653DE0D6@jguru.com>
Message-ID: <20020613104351.2694.qmail@web14802.mail.yahoo.com>

Hi,

I'm doing something along the lines of the "Preserve whitespace" example
from ANTLR distribution. Take the AST, and write it back with small changes.
The example is very useful, but ... in practice you don't have only tokens
ignored before the parser, you also ignore some in parser rules. For
instance, in the "Preserve whitespace" example one would normally ignore
SEMI while constructing the AST:

stat : ID ASSIGN^ expr SEMI! ;   // see the ! after SEMI
  
Now SEMI is not present in the AST, and I don't know how can I retrieve
hidden tokens before/after SEMI. In an ideal world, I would like to have
SEMI treated exactly as it was ignored before the parser, just like an other
hidden token. But it seems that SEMI is lost after the parser, together with
its hidden tokens.

If I'm wrong, please correct me, it will save me a lot of time.

Best regards,
Bogdan


--- Terence Parr <parrt@jguru.com> wrote:
>  From Erik Hatcher...a few comments on Ant.
> 
> Begin forwarded message:
> 
> > From: "Erik Hatcher" <erik@hatcher.net>
> >> On Tuesday, June 11, 2002, at 06:19  AM, Bogdan Mitu wrote:
> >>> Just incidentally, the next incarnation of Ant (Ant 2) will be
> >>> independent
> >>> of XML or other particular encoding, which I think it's a step in the
> >>> right
> >>> direction.
> >
> > Ant 1.5 actually has pluggable ProjectHelper capability to allow you to 
> > plug
> > in a class that constructs the Project object.  The default one builds 
> > it
> > from parsing an XML file, but you can now plug in your own.  Maybe you 
> > ANTLR
> > gurus could have one that takes a Makefile and constructs a Project 
> > object
> > :))
> >
> > This pluggable layer will be used, I think, to start providing XML 
> > namespace
> > support, but is much more generally capable than that.  One person I've 
> > seen
> > report that he's taken a project model (in XML) and XSLT'd it to a build
> > file on the fly when invoking Ant so that all he maintains are the 
> > project
> > model and XSLT, no build.xml.
> >
> >> For your info, Erik Hatcher, a cool cat that manages the Ant FAQ at
> >> jGuru, is done with his Ant book.  Should be out soon:
> >>
> >> Java Development with Ant by Erik Hatcher and Steve Loughran
> >> ISBN 1930110-588 -- will be published August 1st
> >> Softbound, 450 pages, $44.95
> >
> > And this is really going to be about 600+ pages - Manning has just never
> > updated their info on our latest page count!  And yes, my fingers are 
> > tired.
> >
> >     Erik
> >
> >
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 


__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bogdan_mt at yahoo.com  Thu Jun 13 03:59:32 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Mixing Grammars
In-Reply-To: <F101xguBBWg0EjfTOaF0001c370@hotmail.com>
Message-ID: <20020613105932.6096.qmail@web14809.mail.yahoo.com>


--- Niall Gormley <ngormley@hotmail.com> wrote:
> Hi,
> 
> As part of a translation project I am working I wish to create an AST of
> the 
> target language, by transforming the source AST, using multiple tree 
> grammars and user interaction.
> 
> Is it possible to mix grammars in a TreeParser, to allow node creation of 
> the target language?

Yes, but the treeParser needs to know what are the tokens of the target
language. You can do this by declaring the new tokens that are introduced in
the tokens section of the treeParser. And if you use a series of
treeParsers, each needs to know the tokens introduced by previous
treeParsers. You can do this by making good use of importVocab/exportVocab
options in each treeParser.

Bogdan

> Has anyone got a good example of how they achieved this type of
> translation 
> in practice.


 
> Thanks for your help,
> Niall
> 
> _________________________________________________________________
> Chat with friends online, try MSN Messenger: http://messenger.msn.com
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 


__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From vette98dude at yahoo.com  Thu Jun 13 09:28:01 2002
From: vette98dude at yahoo.com (Vette98Man)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] parsing single java expressions
Message-ID: <aeah6h+sde1@eGroups.com>

Hi - I have the need to parse java expressions and expressions only, 
and then perform a set of actions based on the semantics of the 
parsed information. I could write my own StringTokenizer to do this, 
but I'm thinking that antlr may be the right tool for the job. Here 
is an example of my inputs: 
 
    1) foobar(foo, bar);
    2) validate(data) && attempts >= 3 ; 
    3) testValue('Action', 7) &&  testValue('LoggedIn', 7) && isEqual
('AdsPlayed',  0) ; 
 
The inputs are guaranteed to be legal java expressions. Can I use 
antlr to parse these statements, and then give me an API into the 
results? What I want is something like for example 2 above, I would 
expect the API to give me the following information: 
 
=======
This expression is composed of two expressions in the form of 
expression1 AND expression2. Expression1 is a method called validate 
that has an argument called data. Expression2 performs a Boolean 
operation of the variable attempts to the value 3. 
 
Any help is appreciated. 

-- 
Cheers,
Bill 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Thu Jun 13 09:42:57 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] parsing single java expressions
References: <aeah6h+sde1@eGroups.com>
Message-ID: <3D08CB91.8DEA643E@boeing.com>

Vette98Man wrote:
> 


I have done this with other languages and antlr and it works.

What you have to do is , lets say you have a grammar


-------------

module:
      preamble
     ( statement )+
      end
      EOF;

statement: ....;

---------------

Now you add an orphan rule

single_statement:
     statement EOF;


now you can use the orphan rule ( once you attach the string stream to
your parser/lexer )

to return to you an AST.

You can even create a separate parser, as long as you create a context
outside of the original parser, so that you can keep track of your
variables
and pass it to the constructor of the parser.

If this is too cryptic, I can expand on it next week. Right now I don't
have the time....

sinan

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From ngormley at hotmail.com  Thu Jun 13 09:40:21 2002
From: ngormley at hotmail.com (Niall Gormley)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Modification of Node Attributes using Tree Grammar
Message-ID: <F115y8izZ11EWHNkn4T0001cbff@hotmail.com>

Hi,

Is it possible to use a Tree Grammar to modify Node attributes?

The node "i" is getting modified buy the call to "setVariantType" but I 
can't seem to get it copied to the output AST for the dims expression. So 
the real question might be, how can I get source node "i" to end up in the 
output expression?

dims!
  : #( LITERAL_DIM i:IDENT )
    {
    i.setVariantType(0);
    #dims = #( #[LITERAL_DIM], #(i));
    }
  ;

Thanks Again,
Niall

_________________________________________________________________
Join the world’s largest e-mail service with MSN Hotmail. 
http://www.hotmail.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Thu Jun 13 09:55:24 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Re: Modification of Node Attributes using Tree Grammar
In-Reply-To: <F115y8izZ11EWHNkn4T0001cbff@hotmail.com>
Message-ID: <aeaips+19be@eGroups.com>

--- In antlr-interest@y..., "Niall Gormley" <ngormley@h...> wrote:
> Hi,
> 
> Is it possible to use a Tree Grammar to modify Node attributes?
> 
> The node "i" is getting modified buy the call to "setVariantType" 
but I 
> can't seem to get it copied to the output AST for the dims 
expression. So 
> the real question might be, how can I get source node "i" to end up 
in the 
> output expression?
> 
> dims!
>   : #( LITERAL_DIM i:IDENT )
>     {
>     i.setVariantType(0);
>     #dims = #( #[LITERAL_DIM], #(i));
>     }
>   ;
> 

That's odd.  I pull this stunt all the time.  The only thing i can 
think of is to remove the parens in the expression #(i), and just 
leave it as #i.

#dims = #( [LITERAL_DIM], #i );

(I usually eschew the optional # in the [type] expressions, too.)

That should work like a charm.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Thu Jun 13 10:03:14 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Re: parsing single java expressions
In-Reply-To: <3D08CB91.8DEA643E@boeing.com>
Message-ID: <aeaj8i+ii0i@eGroups.com>

I'll do a little expanding on it, since I use this trick with one of 
my languages, too.

Basically, what you want is a second major entry point into your 
language parser.  In ANTLR, an entry point is simply a parser rule 
that is NOT referenced by any other rule.  That's it.

So, like Sinan showed earlier, just make an "orphan rule" that calls 
your main expression parser, and then have your native code call that 
rule.

In terms of the example Java parser on antlr.org, the main entry 
point is the compilationUnit rule.  The top rule for the expression 
parser is "expression", so you would just add:

expression_entry
    :    expression
    ;

and call "expression_entry" in your native code.  You must add 
another rule, because "expression" is referenced elsewhere.

Make sense?


--- In antlr-interest@y..., Sinan <sinan.karasu@b...> wrote:
> Vette98Man wrote:
> > 
> 
> 
> I have done this with other languages and antlr and it works.
> 
> What you have to do is , lets say you have a grammar
> 
> 
> -------------
> 
> module:
>       preamble
>      ( statement )+
>       end
>       EOF;
> 
> statement: ....;
> 
> ---------------
> 
> Now you add an orphan rule
> 
> single_statement:
>      statement EOF;
> 
> 
> now you can use the orphan rule ( once you attach the string stream 
to
> your parser/lexer )
> 
> to return to you an AST.
> 
> You can even create a separate parser, as long as you create a 
context
> outside of the original parser, so that you can keep track of your
> variables
> and pass it to the constructor of the parser.
> 
> If this is too cryptic, I can expand on it next week. Right now I 
don't
> have the time....
> 
> sinan


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From ngormley at hotmail.com  Thu Jun 13 10:30:01 2002
From: ngormley at hotmail.com (Niall Gormley)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Re: Modification of Node Attributes using Tree Grammar
Message-ID: <F106aZcdjaS36Il06sI000159c9@hotmail.com>

Thanks,

I tried that and ...... it was still the same!!!!

I have buildAST = true; in the options section of the TreeParser.

This produces an AST for each input Variable.

Is it possible to turn this off for the dims transformation?

Regards,
Niall

>From: "jsrs701" <jsrs701@yahoo.com>
>Reply-To: antlr-interest@yahoogroups.com
>To: antlr-interest@yahoogroups.com
>Subject: [antlr-interest] Re: Modification of Node Attributes using Tree 
>Grammar
>Date: Thu, 13 Jun 2002 16:55:24 -0000
>
>--- In antlr-interest@y..., "Niall Gormley" <ngormley@h...> wrote:
> > Hi,
> >
> > Is it possible to use a Tree Grammar to modify Node attributes?
> >
> > The node "i" is getting modified buy the call to "setVariantType"
>but I
> > can't seem to get it copied to the output AST for the dims
>expression. So
> > the real question might be, how can I get source node "i" to end up
>in the
> > output expression?
> >
> > dims!
> >   : #( LITERAL_DIM i:IDENT )
> >     {
> >     i.setVariantType(0);
> >     #dims = #( #[LITERAL_DIM], #(i));
> >     }
> >   ;
> >
>
>That's odd.  I pull this stunt all the time.  The only thing i can
>think of is to remove the parens in the expression #(i), and just
>leave it as #i.
>
>#dims = #( [LITERAL_DIM], #i );
>
>(I usually eschew the optional # in the [type] expressions, too.)
>
>That should work like a charm.
>
>
>
>
>Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


_________________________________________________________________
Chat with friends online, try MSN Messenger: http://messenger.msn.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bob at werken.com  Thu Jun 13 10:51:11 2002
From: bob at werken.com (bob mcwhirter)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] parsing single java expressions
In-Reply-To: <aeah6h+sde1@eGroups.com>
Message-ID: <Pine.LNX.3.96.1020613135033.10443e-100000@exeter.exeter.org>


I'm doing this in drools (http://drools.org/) so I can perform analysis
on the expression to see what variables and operators are involved.

Might be a good starting point for ya.

	-bob

On Thu, 13 Jun 2002, Vette98Man wrote:

> Hi - I have the need to parse java expressions and expressions only, 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Jun 13 11:22:06 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Re: ANTLR grammar for ANTLR itself.
In-Reply-To: <ae9f2g+on80@eGroups.com>
Message-ID: <773096CC-7EFA-11D6-B36B-0030653DE0D6@jguru.com>


On Wednesday, June 12, 2002, at 11:45  PM, fumikatsu_moriyama wrote:

> Thanks a lot.
> Uuu..., I'm ashamed ...

There is no shame...you are stronger than most because you actually have 
the courage to look at the inside of antlr! ;) Not even I want to look 
at antlr.g anymore ;)

Best regards,
Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jcampbell3 at prodigy.net  Thu Jun 13 11:31:06 2002
From: jcampbell3 at prodigy.net (cppljevans)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Re: C++ grammar
In-Reply-To: <FC16026E-7E2D-11D6-BA78-0030653DE0D6@jguru.com>
Message-ID: <aeaoda+iact@eGroups.com>

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> Folks,
> 
> A number of people are playing with a C++ front end for ANTLR
(either 
> from scratch or by converting old PCCTS grammar forward to ANTLR). 
I 
> might be putting some effort behind making a standard C++ parser for 
> ANTLR and could use any head start people have.  So, who's been
doing 
> what? :)
> 
I'm trying to convert Lilley's parser to a pretty printer for c++.
I'm planning on using c++, and might current focus is getting
the lexer to work.  The main problem is passing the "expanded"
tokens to the parser; yet, just printing the "unexpanded" tokens.
By "expanded" token, I mean the tokens that are the result of 
either #include <file> or processing a preprocessor macro.

I haven't coded anthing yet (except converting some of Lilley's
data structures to stl), but I'm thinking of merging some of
the ideas in http://www.antlr.org/doc/streams.html with 
Lilley's macro expansion methods ( see void
CPreParserImp::ExpandTokenList in cpre_expand.cpp).

To be more specific, I'm thinking of the lexer as a stack of
iterators, where each iterator corresponds either to a file or
a macro invocation.  The output tokens would only come from the
bottom of the stack, whereas the parser would always read from
the top.  Since the bottom corresponds to the original source file,
only tokens from the original source would be output.

For example, given the following code in test.cpp:

#define DECLB  int b
int a;
DECLB ;
int c;

Then the lexer stack, just before the read of b, would contain:

    int b
        ^ 
    int a ; DECLB ; int c ;
                  ^

Where each pair of lines above represents the state of an 
iterator on the stack.  The ^ points to the next token to
be read from the iterator.  The next token sent to the parser would
be that from the top iterator, i.e. the one pointing to
    int b
Then "unexpanded tokens are in those in the bottom iterator, or line.
I'm thinking that the comments would be accessed just like they
are in the above cited streams.html page.

I'd appreciate any feedback on this design.

TIA.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Jun 13 11:32:07 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Modification of Node Attributes using Tree Grammar
In-Reply-To: <F115y8izZ11EWHNkn4T0001cbff@hotmail.com>
Message-ID: <DDE3EE01-7EFB-11D6-B36B-0030653DE0D6@jguru.com>


On Thursday, June 13, 2002, at 09:40  AM, Niall Gormley wrote:

> Hi,
>
> Is it possible to use a Tree Grammar to modify Node attributes?
>
> The node "i" is getting modified buy the call to "setVariantType" but I
> can't seem to get it copied to the output AST for the dims expression. 
> So
> the real question might be, how can I get source node "i" to end up in 
> the
> output expression?
>
> dims!
>   : #( LITERAL_DIM i:IDENT )
>     {
>     i.setVariantType(0);
>     #dims = #( #[LITERAL_DIM], #(i));
>     }
>   ;

Howdy.  i points to the output node created from IDENT so you it seems 
you are setting the proper variable.  #(i) is very strange though.  What 
do you mean here?  #i or i works, but #(i) is a long way to say make i 
the root of a tree with only one  node: i.  That may be something for 
which the code gen is broken.  Try removing the #(...) around the i and 
see what happens.  Let me know if this is a bug and I'll add to the 
list.  Loring may already have found this ;)

Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Jun 13 11:36:10 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Re: C++ grammar
In-Reply-To: <aeaoda+iact@eGroups.com>
Message-ID: <6E4DD9F6-7EFC-11D6-B36B-0030653DE0D6@jguru.com>


On Thursday, June 13, 2002, at 11:31  AM, cppljevans wrote:

> --- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
>> Folks,
>>
>> A number of people are playing with a C++ front end for ANTLR
> (either
>> from scratch or by converting old PCCTS grammar forward to ANTLR).
> I
>> might be putting some effort behind making a standard C++ parser for
>> ANTLR and could use any head start people have.  So, who's been
> doing
>> what? :)
>>
> I'm trying to convert Lilley's parser to a pretty printer for c++.
> I'm planning on using c++, and might current focus is getting
> the lexer to work.  The main problem is passing the "expanded"
> tokens to the parser; yet, just printing the "unexpanded" tokens.
> By "expanded" token, I mean the tokens that are the result of
> either #include <file> or processing a preprocessor macro.

Preprocessor stuff is typically done as a char stream filter so the C++ 
lexer is not complicated by the preprocessor.  Helps to separate these 
tasks.  It can be done, of course.  You might also just say "I'll use 
/lib/cpp" ;)  Naturally this makes pretty printing harder as you don't 
always know what was the original source ;)

> I haven't coded anthing yet (except converting some of Lilley's
> data structures to stl), but I'm thinking of merging some of
> the ideas in http://www.antlr.org/doc/streams.html with
> Lilley's macro expansion methods ( see void
> CPreParserImp::ExpandTokenList in cpre_expand.cpp).
>
> To be more specific, I'm thinking of the lexer as a stack of
> iterators, where each iterator corresponds either to a file or
> a macro invocation.  The output tokens would only come from the
> bottom of the stack, whereas the parser would always read from
> the top.  Since the bottom corresponds to the original source file,
> only tokens from the original source would be output.

Yeah, a more general queue for TokenStream would be useful that let the 
lexer push more than one token on the stream at once would be groovy.

>
> For example, given the following code in test.cpp:
>
> #define DECLB  int b
> int a;
> DECLB ;
> int c;
>
> Then the lexer stack, just before the read of b, would contain:
>
>     int b
>         ^
>     int a ; DECLB ; int c ;
>                   ^

Oh, well you can just push lexer input states for this.  There is a 
stack mechanism already for nested lexing and parsing.

> I'd appreciate any feedback on this design.

Cool.  Let us know how it goes.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Thu Jun 13 12:00:33 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Re: Modification of Node Attributes using Tree Grammar
In-Reply-To: <F106aZcdjaS36Il06sI000159c9@hotmail.com>
Message-ID: <aeaq4h+qfsp@eGroups.com>

--- In antlr-interest@y..., "Niall Gormley" <ngormley@h...> wrote:
> Thanks,
> 
> I tried that and ...... it was still the same!!!!
> 
> I have buildAST = true; in the options section of the TreeParser.
> 
> This produces an AST for each input Variable.
> 
> Is it possible to turn this off for the dims transformation?
> 
> Regards,
> Niall

You already did turn it off, with the ! after the rule declaration.

I just checked my code, and indeed, we're doing it exactly the same 
way.  So I think there's some other problem going on in here.


> 
> >From: "jsrs701" <jsrs701@y...>
> >Reply-To: antlr-interest@y...
> >To: antlr-interest@y...
> >Subject: [antlr-interest] Re: Modification of Node Attributes 
using Tree 
> >Grammar
> >Date: Thu, 13 Jun 2002 16:55:24 -0000
> >
> >--- In antlr-interest@y..., "Niall Gormley" <ngormley@h...> wrote:
> > > Hi,
> > >
> > > Is it possible to use a Tree Grammar to modify Node attributes?
> > >
> > > The node "i" is getting modified buy the call 
to "setVariantType"
> >but I
> > > can't seem to get it copied to the output AST for the dims
> >expression. So
> > > the real question might be, how can I get source node "i" to 
end up
> >in the
> > > output expression?
> > >
> > > dims!
> > >   : #( LITERAL_DIM i:IDENT )
> > >     {
> > >     i.setVariantType(0);
> > >     #dims = #( #[LITERAL_DIM], #(i));
> > >     }
> > >   ;
> > >
> >
> >That's odd.  I pull this stunt all the time.  The only thing i can
> >think of is to remove the parens in the expression #(i), and just
> >leave it as #i.
> >
> >#dims = #( [LITERAL_DIM], #i );
> >
> >(I usually eschew the optional # in the [type] expressions, too.)
> >
> >That should work like a charm.
> >
> >
> >
> >
> >Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/
> >
> >
> 
> 
> _________________________________________________________________
> Chat with friends online, try MSN Messenger: 
http://messenger.msn.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Thu Jun 13 13:28:26 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Re: ANTLR grammar for ANTLR itself.
In-Reply-To: <773096CC-7EFA-11D6-B36B-0030653DE0D6@jguru.com>
Message-ID: <aeav9a+b6pk@eGroups.com>

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> 
> On Wednesday, June 12, 2002, at 11:45  PM, fumikatsu_moriyama wrote:
> 
> > Thanks a lot.
> > Uuu..., I'm ashamed ...
> 
> There is no shame...you are stronger than most because you actually 
have 
> the courage to look at the inside of antlr! ;) Not even I want to 
look 
> at antlr.g anymore ;)

It's not that bad--there are a few unimplemented features, and it is a 
bit messy in places because of the unified parser/lexer/treewalker 
grammar approach.  For initial viewing, you probably want to use 
ANTLR's -html option (Ter--where did the strip actions option go?  I 
think that that was -g in PCCTS) to generate a file for viewing:  the 
grammar is cluttered with actions which make it a little hard to 
follow.

--Loring

> 
> Best regards,
> Terence
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Jun 13 13:33:53 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Re: ANTLR grammar for ANTLR itself.
In-Reply-To: <aeav9a+b6pk@eGroups.com>
Message-ID: <E03A4FD3-7F0C-11D6-916D-0030653DE0D6@jguru.com>


On Thursday, June 13, 2002, at 01:28  PM, lgcraymer wrote:

> --- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
>>
>> On Wednesday, June 12, 2002, at 11:45  PM, fumikatsu_moriyama wrote:
>>
>>> Thanks a lot.
>>> Uuu..., I'm ashamed ...
>>
>> There is no shame...you are stronger than most because you actually
> have
>> the courage to look at the inside of antlr! ;) Not even I want to
> look
>> at antlr.g anymore ;)
>
> It's not that bad--there are a few unimplemented features, and it is a
> bit messy in places because of the unified parser/lexer/treewalker
> grammar approach.  For initial viewing, you probably want to use
> ANTLR's -html option (Ter--where did the strip actions option go?  I
> think that that was -g in PCCTS) to generate a file for viewing:  the
> grammar is cluttered with actions which make it a little hard to
> follow.

Yeah, i really want the "show me a hyperlinked grammar" thing that 
actually works well.  I'd also like a simple internal data structure (a 
graph) representing an ANTLR grammar so that one could do things like:

1. build a tool that dumped syntax diagrams
2. build a tool that highlighted nondeterminisms
3. build a prototyping tool that interpreted the graph instead of 
generating code

it would also isolate the front end of antlr from the analysis from the 
code gen phase.

Interesting...

Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From ngormley at hotmail.com  Thu Jun 13 13:25:48 2002
From: ngormley at hotmail.com (Niall Gormley)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Modification of Node Attributes using Tree Grammar
Message-ID: <F83AwxXSXI3acH0xxDE0001d1b3@hotmail.com>

Thanks Terence,

I modified the Tree Grammar to look like this.

dims!
  : #( l:LITERAL_DIM i:IDENT )
    {
    i.setVariantType(9);
    #dims = #( l, i);
    }
  ;

The code generated looks like
i.setVariantType(9);
dims_AST = (oracle.mtg.chrysalis.ASTNode)astFactory.make( (new 
ASTArray(2)).add(l_AST).add(i_AST));

Sould I reference i as i_AST in the Tree Grammar (when buildAST=true), or 
should the generator generate ....add(l).add(i) ?

Thanks for taking the time to look at this.

Regards,
Niall

>From: Terence Parr <parrt@jguru.com>
>Reply-To: antlr-interest@yahoogroups.com
>To: antlr-interest@yahoogroups.com
>Subject: Re: [antlr-interest] Modification of Node Attributes using Tree 
>Grammar
>Date: Thu, 13 Jun 2002 11:32:07 -0700
>
>
>On Thursday, June 13, 2002, at 09:40  AM, Niall Gormley wrote:
>
> > Hi,
> >
> > Is it possible to use a Tree Grammar to modify Node attributes?
> >
> > The node "i" is getting modified buy the call to "setVariantType" but I
> > can't seem to get it copied to the output AST for the dims expression.
> > So
> > the real question might be, how can I get source node "i" to end up in
> > the
> > output expression?
> >
> > dims!
> >   : #( LITERAL_DIM i:IDENT )
> >     {
> >     i.setVariantType(0);
> >     #dims = #( #[LITERAL_DIM], #(i));
> >     }
> >   ;
>
>Howdy.  i points to the output node created from IDENT so you it seems
>you are setting the proper variable.  #(i) is very strange though.  What
>do you mean here?  #i or i works, but #(i) is a long way to say make i
>the root of a tree with only one  node: i.  That may be something for
>which the code gen is broken.  Try removing the #(...) around the i and
>see what happens.  Let me know if this is a bug and I'll add to the
>list.  Loring may already have found this ;)
>
>Ter
>
>
>
>
>Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


_________________________________________________________________
Chat with friends online, try MSN Messenger: http://messenger.msn.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Jun 13 13:44:08 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Modification of Node Attributes using Tree Grammar
In-Reply-To: <F83AwxXSXI3acH0xxDE0001d1b3@hotmail.com>
Message-ID: <4EE66672-7F0E-11D6-916D-0030653DE0D6@jguru.com>


On Thursday, June 13, 2002, at 01:25  PM, Niall Gormley wrote:

> Thanks Terence,
>
> I modified the Tree Grammar to look like this.
>
> dims!
>   : #( l:LITERAL_DIM i:IDENT )
>     {
>     i.setVariantType(9);
>     #dims = #( l, i);
>     }
>   ;
>
> The code generated looks like
> i.setVariantType(9);
> dims_AST = (oracle.mtg.chrysalis.ASTNode)astFactory.make( (new
> ASTArray(2)).add(l_AST).add(i_AST));
>
> Sould I reference i as i_AST in the Tree Grammar (when buildAST=true), 
> or
> should the generator generate ....add(l).add(i) ?

Wow...that is weird.  What does the i:IDENT generate?  It should be 
i_AST=LT(1) or some such.  The .add(i_AST) seems right then.  
OOooooooh!  Remember: #i is the tree node, i is typically a token 
reference and i didn't want it to mean two different things (token in 
parser and tree node in tree parser).  I wonder if that should be a 
warning.

Anybody know the answer to this: Should plain 'i' mean anything in a 
tree grammar outside of a #(...) context in an action?

Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Thu Jun 13 13:46:20 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Re: Modification of Node Attributes using Tree Grammar
In-Reply-To: <DDE3EE01-7EFB-11D6-B36B-0030653DE0D6@jguru.com>
Message-ID: <aeb0as+u7od@eGroups.com>

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> 
> On Thursday, June 13, 2002, at 09:40  AM, Niall Gormley wrote:
> 
> > Hi,
> >
> > Is it possible to use a Tree Grammar to modify Node attributes?
> >
> > The node "i" is getting modified buy the call to "setVariantType" 
but I
> > can't seem to get it copied to the output AST for the dims 
expression. 
> > So
> > the real question might be, how can I get source node "i" to end 
up in 
> > the
> > output expression?
> >
> > dims!
> >   : #( LITERAL_DIM i:IDENT )
> >     {
> >     i.setVariantType(0);
> >     #dims = #( #[LITERAL_DIM], #(i));
> >     }
> >   ;
> 
> Howdy.  i points to the output node created from IDENT so you it 
seems 
> you are setting the proper variable.  #(i) is very strange though.  
What 
> do you mean here?  #i or i works, but #(i) is a long way to say make 
i 
> the root of a tree with only one  node: i.  That may be something 
for 
> which the code gen is broken.  Try removing the #(...) around the i 
and 
> see what happens.  Let me know if this is a bug and I'll add to the 
> list.  Loring may already have found this ;)

I remember that some of the node construction stuff is broken, but not 
which part specifically.  For what you want to do, try just

dims
   : #( LITERAL_DIM i:IDENT )
     {
     #i.setVariantType(0);
     }
   ;

and if that fails, try replacing #i with i_AST--that will work.  ANTLR 
by default builds an output tree which matches the input tree and you 
just need to set the contents of #i.  Note that AST labels behave 
differently than token labels:  if i:IDENT labels a token in the 
parser, #i translates to i; while in a tree grammar, #i translates to 
i_ast (and #i_in translates to i).

Also, if you are using heterogeneous ASTs, make sure that you specify 
them in the tree grammar as well as the parser--otherwise you will get 
 the default AST node type.  One of the things that needs to be fixed 
is that ASTFactories should know about heterogeneous ASTs:  
right now, #[FOO] always builds an AST node of the default type 
because the ASTFactory only knows about the default.

--Loring

> 
> Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Jun 13 14:09:29 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] OO design question
Message-ID: <D9713232-7F11-11D6-916D-0030653DE0D6@jguru.com>

Folks,

Let's imagine an optimal world where I'm contemplating building a 
simpler internal structure for ANTLR.  Please suspend disbelief for the 
duration of this email. :) ;) :D

Ok, so ANTLR works like this:

1. preprocess the grammar, expanding any inheritance relationships.
2. parse the grammar and build an internal graph/network representation; 
the graph looks like a syntax diagram you would build to describe a 
grammar.  A token manager tracks token type definitions and is 
associated with the graph.
3. try to generate code, which drives the grammar analysis engine.  In 
other words, when I try to generate a decision in the output parser, I 
on-demand ask the analyzer to compute the lookahead sets and then use 
that to generate decision code.  This is the same principle for html 
output, text output, java, C++, whatever.

In the current implementation this stuff is so hopelessly interwined 
that it's pretty hard to separate what is going on in your head.  
Changes in one area may have broad effects on others.

Optimally, ANTLR would be re-engineered to separate the various phases 
as much as possible for ease of specification, ease of debugging, and 
ease picking and choosing what phases you wanted to make a cool tool.  
For example, you might want to generate a pretty printer.  You could 
take the front-end that generated the graph and hook a tool on the back 
that just dumps the grammar, ignoring code gen and analysis etc...  You 
could even build an interpreted version of antlr from just the front end 
and the analysis phase, ignoring the code gen.

I imagine that you'd have

1. front end generates grammar graph and vocabulary manager; might even 
have a persistence text format so you don't even need to know antlr's 
internal data structure format--you could use your own or even use the 
text format to connect it to a tool written in another language.

2. analyzer, computes approximate pred-LL(k) lookahead information at 
every decision point in the grammar.  Again, you could have a text 
output format for debugging purposes or to use as an interface to 
completely separate tool.  This would no longer be driven by the code 
generator, though the code generator could ask for the information 
naturally.

3. various back ends such as Java, C++, html, etc...  I have lots more 
to say about this, but I need to firm up my "output grammar" ideas more 
first.

My specific question at the moment relates to what you might call 
aspect-oriented programming vs oo programming.  Consider the data 
structure representing your grammar (i.e., the graph).  It's very neatly 
organized as a set of GrammarElement subclasses that include subrules 
and atoms like token-refs.  Now, how do you perform analysis on this 
graph?  Conceptually you would like to keep the analyzer separate (so 
somebody could build a different one and for good programming practice 
reasons).  I would call this an aspect not an object encapsulation 
idea.  Anyway, currently I have added a method to each GrammarElement 
called lookahead() or some such that is supposed to compute lookahead 
for that type of element.  Works great except for the fact that now my 
analyzer is not a big chunk (an aspect of ANTLR) it is completely 
interwined with the graph data structure.  The reason of course is that 
it is really nice to ask a node for it's lookahead.  In order to 
separate out the analyzer, you'd have ask the analyzer to look at a 
node: Analyzer.lookahead(GrammarElement).  But, you'd lose polymorphism 
and have to have a switch in lookahead that asked what kind of node it 
was.  Ick.

So!  How do you get a good separable chunk called an Analyzer without 
making the implementation fully of crappy switch-statements?  I.e., how 
do I use aspect programming w/o losing the polymorphism convenience?!  
Anybody wanna lend me some smarts?

Thanks,
Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Trey.Spiva at embarcadero.com  Thu Jun 13 14:20:55 2002
From: Trey.Spiva at embarcadero.com (Trey Spiva)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] OO design question
Message-ID: <6791D870658F174FB863E2FA890000A37DCD62@abyss4.advancedsw.com>

> 
> So!  How do you get a good separable chunk called an Analyzer without
> making the implementation fully of crappy switch-statements?  I.e., how
> do I use aspect programming w/o losing the polymorphism convenience?!
> Anybody wanna lend me some smarts?

Have you thought about using a Visitor Pattern?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From ngormley at hotmail.com  Thu Jun 13 14:17:27 2002
From: ngormley at hotmail.com (Niall Gormley)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Re: Modification of Node Attributes using Tree Grammar
Message-ID: <F40BjXa91mfA6nLC2Mg00022491@hotmail.com>


Loring,

Spot on. Works a treat.

Thanks for the help.

Any ideas on how to go about fixing the AST Gen code so that an node type 
can be associated with a class, just as in the Parser? I'm willing to lend a 
hand.... Or are heterogeneous ASTs a bad idea anyway?

Thanks,
Niall

>From: "lgcraymer" <lgc@mail1.jpl.nasa.gov>
>Reply-To: antlr-interest@yahoogroups.com
>To: antlr-interest@yahoogroups.com
>Subject: [antlr-interest] Re: Modification of Node Attributes using Tree 
>Grammar
>Date: Thu, 13 Jun 2002 20:46:20 -0000
>
>--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> >
> > On Thursday, June 13, 2002, at 09:40  AM, Niall Gormley wrote:
> >
> > > Hi,
> > >
> > > Is it possible to use a Tree Grammar to modify Node attributes?
> > >
> > > The node "i" is getting modified buy the call to "setVariantType"
>but I
> > > can't seem to get it copied to the output AST for the dims
>expression.
> > > So
> > > the real question might be, how can I get source node "i" to end
>up in
> > > the
> > > output expression?
> > >
> > > dims!
> > >   : #( LITERAL_DIM i:IDENT )
> > >     {
> > >     i.setVariantType(0);
> > >     #dims = #( #[LITERAL_DIM], #(i));
> > >     }
> > >   ;
> >
> > Howdy.  i points to the output node created from IDENT so you it
>seems
> > you are setting the proper variable.  #(i) is very strange though.
>What
> > do you mean here?  #i or i works, but #(i) is a long way to say make
>i
> > the root of a tree with only one  node: i.  That may be something
>for
> > which the code gen is broken.  Try removing the #(...) around the i
>and
> > see what happens.  Let me know if this is a bug and I'll add to the
> > list.  Loring may already have found this ;)
>
>I remember that some of the node construction stuff is broken, but not
>which part specifically.  For what you want to do, try just
>
>dims
>    : #( LITERAL_DIM i:IDENT )
>      {
>      #i.setVariantType(0);
>      }
>    ;
>
>and if that fails, try replacing #i with i_AST--that will work.  ANTLR
>by default builds an output tree which matches the input tree and you
>just need to set the contents of #i.  Note that AST labels behave
>differently than token labels:  if i:IDENT labels a token in the
>parser, #i translates to i; while in a tree grammar, #i translates to
>i_ast (and #i_in translates to i).
>
>Also, if you are using heterogeneous ASTs, make sure that you specify
>them in the tree grammar as well as the parser--otherwise you will get
>  the default AST node type.  One of the things that needs to be fixed
>is that ASTFactories should know about heterogeneous ASTs:
>right now, #[FOO] always builds an AST node of the default type
>because the ASTFactory only knows about the default.
>
>--Loring
>
> >
> > Ter
>
>
>
>
>Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/


_________________________________________________________________
Chat with friends online, try MSN Messenger: http://messenger.msn.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gvaughn at delphis.com  Thu Jun 13 14:55:21 2002
From: gvaughn at delphis.com (Greg Vaughn)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] OO design question
References: <D9713232-7F11-11D6-916D-0030653DE0D6@jguru.com>
Message-ID: <3D0914C9.2080907@delphis.com>

Terence Parr wrote:
> My specific question at the moment relates to what you might call 
> aspect-oriented programming vs oo programming.  Consider the data 
> structure representing your grammar (i.e., the graph).  It's very neatly 
> organized as a set of GrammarElement subclasses that include subrules 
> and atoms like token-refs.  Now, how do you perform analysis on this 
> graph?  Conceptually you would like to keep the analyzer separate (so 
> somebody could build a different one and for good programming practice 
> reasons).  I would call this an aspect not an object encapsulation 
> idea.  Anyway, currently I have added a method to each GrammarElement 
> called lookahead() or some such that is supposed to compute lookahead 
> for that type of element.  Works great except for the fact that now my 
> analyzer is not a big chunk (an aspect of ANTLR) it is completely 
> interwined with the graph data structure.  The reason of course is that 
> it is really nice to ask a node for it's lookahead.  In order to 
> separate out the analyzer, you'd have ask the analyzer to look at a 
> node: Analyzer.lookahead(GrammarElement).  But, you'd lose polymorphism 
> and have to have a switch in lookahead that asked what kind of node it 
> was.  Ick.
> 
> So!  How do you get a good separable chunk called an Analyzer without 
> making the implementation fully of crappy switch-statements?  I.e., how 
> do I use aspect programming w/o losing the polymorphism convenience?!  
> Anybody wanna lend me some smarts?

I've been a lurker on this list for a while now and still haven't had 
the time to dig into ANTLR like I've wanted, but I have done a few 
things with AspectJ, so I'll put in my 2 cents.

This sounds like a prime candidate for aspects. With an Analyzer aspect, 
you could change the code in all the lookahead() methods of 
GrammarElement subclasses at "weave" time. You could even make the 
method abstract and let the aspect create concrete subclasses that 
implement lookahead() however the Analyzer needs it. You may end up with 
a nasty switch in the aspect, but the price is only paid at "weave" 
time. Alternatively you could specify different joinpoints for each of 
the subclasses to treat them separately to avoid the switch.

Greg Vaughn
Delphi Consultants, LLC
gvaughn@delphis.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Jun 13 15:11:11 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] OO design question
In-Reply-To: <3D0914C9.2080907@delphis.com>
Message-ID: <78506D9C-7F1A-11D6-916D-0030653DE0D6@jguru.com>


On Thursday, June 13, 2002, at 02:55  PM, Greg Vaughn wrote:
> I've been a lurker on this list for a while now and still haven't had
> the time to dig into ANTLR like I've wanted, but I have done a few
> things with AspectJ, so I'll put in my 2 cents.
>
> This sounds like a prime candidate for aspects. With an Analyzer aspect,
> you could change the code in all the lookahead() methods of
> GrammarElement subclasses at "weave" time. You could even make the
> method abstract and let the aspect create concrete subclasses that
> implement lookahead() however the Analyzer needs it. You may end up with
> a nasty switch in the aspect, but the price is only paid at "weave"
> time. Alternatively you could specify different joinpoints for each of
> the subclasses to treat them separately to avoid the switch.
>
> Greg Vaughn
> Delphi Consultants, LLC
> gvaughn@delphis.com

Hi Greg, I'll look at AspectJ.  I actually don't care about the switch 
as long as I don't generate it, right?  The vtable polymorphism is just 
a glorified switch anyway (that I don't have to generate nor look at).

Now i wonder if we can get iContract merged with AspectJ and really have 
something!  How stable is AspectJ out of curiosity?

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Jun 13 15:12:07 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] OO design question
In-Reply-To: <6791D870658F174FB863E2FA890000A37DCD62@abyss4.advancedsw.com>
Message-ID: <997FA122-7F1A-11D6-916D-0030653DE0D6@jguru.com>


On Thursday, June 13, 2002, at 02:20  PM, Trey Spiva wrote:

>>
>> So!  How do you get a good separable chunk called an Analyzer without
>> making the implementation fully of crappy switch-statements?  I.e., how
>> do I use aspect programming w/o losing the polymorphism convenience?!
>> Anybody wanna lend me some smarts?
>
> Have you thought about using a Visitor Pattern?

I think a visitor is really what i'm talking about; perhaps I'm asking 
about a good way to implement it :)

Thanks,
Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Thu Jun 13 15:18:30 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Re: Modification of Node Attributes using Tree Grammar
In-Reply-To: <F40BjXa91mfA6nLC2Mg00022491@hotmail.com>
Message-ID: <aeb5nm+5i9g@eGroups.com>

--- In antlr-interest@y..., "Niall Gormley" <ngormley@h...> wrote:
> 
> Loring,
> 
> Spot on. Works a treat.
> 
> Thanks for the help.
> 
> Any ideas on how to go about fixing the AST Gen code so that an node 
type 
> can be associated with a class, just as in the Parser? I'm willing 
to lend a 
> hand.... Or are heterogeneous ASTs a bad idea anyway?

All you need to do is copy the heterogeneous AST assignments from the 
parser grammar's "tokens" section into a "tokens" section for the tree 
grammar and they should work--except for #[FOO, "name"] in actions 
which translate to calling the ASTFactory with default object type.  
Heterogeneous ASTs are quite useful:  it's the implementation which is 
suboptimal.  A good implementation approach would be to have a table 
associating types with classes assigned to the ASTFactory by the 
grammar processor--right now, the grammar processor passes class 
information to the AST factory for every AST creation, and creations 
in actions bypass the grammar processor's knowledge.  C++ would do it 
differently, but the same principle applies.

--Loring

> 
> Thanks,
> Niall
> 
> >From: "lgcraymer" <lgc@m...>
> >Reply-To: antlr-interest@y...
> >To: antlr-interest@y...
> >Subject: [antlr-interest] Re: Modification of Node Attributes using 
Tree 
> >Grammar
> >Date: Thu, 13 Jun 2002 20:46:20 -0000
> >
> >--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> > >
> > > On Thursday, June 13, 2002, at 09:40  AM, Niall Gormley wrote:
> > >
> > > > Hi,
> > > >
> > > > Is it possible to use a Tree Grammar to modify Node 
attributes?
> > > >
> > > > The node "i" is getting modified buy the call to 
"setVariantType"
> >but I
> > > > can't seem to get it copied to the output AST for the dims
> >expression.
> > > > So
> > > > the real question might be, how can I get source node "i" to 
end
> >up in
> > > > the
> > > > output expression?
> > > >
> > > > dims!
> > > >   : #( LITERAL_DIM i:IDENT )
> > > >     {
> > > >     i.setVariantType(0);
> > > >     #dims = #( #[LITERAL_DIM], #(i));
> > > >     }
> > > >   ;
> > >
> > > Howdy.  i points to the output node created from IDENT so you it
> >seems
> > > you are setting the proper variable.  #(i) is very strange 
though.
> >What
> > > do you mean here?  #i or i works, but #(i) is a long way to say 
make
> >i
> > > the root of a tree with only one  node: i.  That may be 
something
> >for
> > > which the code gen is broken.  Try removing the #(...) around 
the i
> >and
> > > see what happens.  Let me know if this is a bug and I'll add to 
the
> > > list.  Loring may already have found this ;)
> >
> >I remember that some of the node construction stuff is broken, but 
not
> >which part specifically.  For what you want to do, try just
> >
> >dims
> >    : #( LITERAL_DIM i:IDENT )
> >      {
> >      #i.setVariantType(0);
> >      }
> >    ;
> >
> >and if that fails, try replacing #i with i_AST--that will work.  
ANTLR
> >by default builds an output tree which matches the input tree and 
you
> >just need to set the contents of #i.  Note that AST labels behave
> >differently than token labels:  if i:IDENT labels a token in the
> >parser, #i translates to i; while in a tree grammar, #i translates 
to
> >i_ast (and #i_in translates to i).
> >
> >Also, if you are using heterogeneous ASTs, make sure that you 
specify
> >them in the tree grammar as well as the parser--otherwise you will 
get
> >  the default AST node type.  One of the things that needs to be 
fixed
> >is that ASTFactories should know about heterogeneous ASTs:
> >right now, #[FOO] always builds an AST node of the default type
> >because the ASTFactory only knows about the default.
> >
> >--Loring
> >
> > >
> > > Ter
> >
> >
> >
> >
> >Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/
> 
> 
> _________________________________________________________________
> Chat with friends online, try MSN Messenger: 
http://messenger.msn.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Trey.Spiva at embarcadero.com  Thu Jun 13 15:19:35 2002
From: Trey.Spiva at embarcadero.com (Trey Spiva)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] OO design question
Message-ID: <6791D870658F174FB863E2FA890000A37DCD65@abyss4.advancedsw.com>

> >>
> >> So!  How do you get a good separable chunk called an Analyzer without
> >> making the implementation fully of crappy switch-statements?  I.e., how
> >> do I use aspect programming w/o losing the polymorphism convenience?!
> >> Anybody wanna lend me some smarts?
> >
> > Have you thought about using a Visitor Pattern?
> 
> I think a visitor is really what i'm talking about; perhaps I'm asking
> about a good way to implement it :)
> 
Well how about this.  

public class Analyzer implements LookaheadVistor
{
  ...
}

When you want to retrieve the lookahead information make the call

GrammarElement element = <Some Grammar Element>
...

element.lookahead(Analyzer);

The GrammerElement will still be responsible of calculating the lookahead
and will be using the analyzer to calculating the lookahead.  You will also
be able to change how the lookahead is calculated by changing the
implementation of the LookaheadVistor that is used by the GrammerElement.

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gvaughn at delphis.com  Thu Jun 13 15:41:44 2002
From: gvaughn at delphis.com (Greg Vaughn)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] OO design question
References: <78506D9C-7F1A-11D6-916D-0030653DE0D6@jguru.com>
Message-ID: <3D091FA8.5080207@delphis.com>

Terence Parr wrote:
> Now i wonder if we can get iContract merged with AspectJ and really have 
> something!  How stable is AspectJ out of curiosity?

Never thought about merging those two. I don't believe AspectJ could 
change javadoc comments, so it couldn't introduce/modify the contract 
information if that's what you're looking for. But if not, you'd just 
have to decide to run the iContract processor before or after the 
AspectJ processor. It's been a while since I've looked at iContract, so 
I don't know if it is going to be safer to run before or after.

I've found AspectJ to be quite stable. It's a good group developing it. 
Gregor Kiczales is the man in charge.

Greg Vaughn
Delphi Consultants, LLC
gvaughn@delphis.com



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Jun 13 15:42:56 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] OO design question
In-Reply-To: <6791D870658F174FB863E2FA890000A37DCD65@abyss4.advancedsw.com>
Message-ID: <E7849AFA-7F1E-11D6-916D-0030653DE0D6@jguru.com>


On Thursday, June 13, 2002, at 03:19  PM, Trey Spiva wrote:

>>>>
>>>> So!  How do you get a good separable chunk called an Analyzer without
>>>> making the implementation fully of crappy switch-statements?  I.e., 
>>>> how
>>>> do I use aspect programming w/o losing the polymorphism convenience?!
>>>> Anybody wanna lend me some smarts?
>>>
>>> Have you thought about using a Visitor Pattern?
>>
>> I think a visitor is really what i'm talking about; perhaps I'm asking
>> about a good way to implement it :)
>>
> Well how about this.
>
> public class Analyzer implements LookaheadVistor
> {
>   ...
> }
>
> When you want to retrieve the lookahead information make the call
>
> GrammarElement element = <Some Grammar Element>
> ...
>
> element.lookahead(Analyzer);
>
> The GrammerElement will still be responsible of calculating the 
> lookahead
> and will be using the analyzer to calculating the lookahead.  You will 
> also
> be able to change how the lookahead is calculated by changing the
> implementation of the LookaheadVistor that is used by the 
> GrammerElement.

Yeah, I was just reading about this "mix-in class" concept in an AspectJ 
paper.  Seems that the method overloading would make things work ok 
without a switch.  The analyzer would route to the element and the 
element would route back to the analyzer thus getting the polymorphism 
and separation:

class GrammarTokenRef extends GrammarElement {
   public LookaheadSet lookahead(int k) {
     analyzer.lookahead(this, k);
   }
   ...
}

class GrammarSubrule extends GrammarElement {
   public LookaheadSet lookahead(int k) {
     analyzer.lookahead(this, k);
   }
   ...
}

Note that the "this" ref in the lookahead method call forces the 
compiler to bind to the object specific lookahead method as in:

class Analyzer {
   public LookaheadSet lookahead(GrammarTokenRef node, int k) {...}
   public LookaheadSet lookahead(GrammarSubrule node, int k) {...}
   ...
}

Also as you mention, the analyzer variable in GrammarElement superclass 
can be set at runtime to change the behavior :)  This might be a cute 
way to try the approx lookahead and if it fails, swap in the full LL(k) 
bad boy.

Anyway, the main analysis engine would be able to say node.lookahead(k) 
and yet all code for this aspect would live in the Analyzer--the 
lookahead method in the GrammarElement is just a ping-pong back into the 
analyzer.  This is suboptimal of course since you can't add an "aspect" 
w/o adding a ping-pong method in each GrammarElement.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Thu Jun 13 15:59:01 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Re: OO design question
In-Reply-To: <997FA122-7F1A-11D6-916D-0030653DE0D6@jguru.com>
Message-ID: <aeb83l+hnni@eGroups.com>

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> 
> On Thursday, June 13, 2002, at 02:20  PM, Trey Spiva wrote:
> 
> >>
> >> So!  How do you get a good separable chunk called an Analyzer 
without
> >> making the implementation fully of crappy switch-statements?  
I.e., how
> >> do I use aspect programming w/o losing the polymorphism 
convenience?!
> >> Anybody wanna lend me some smarts?
> >
> > Have you thought about using a Visitor Pattern?
> 
> I think a visitor is really what i'm talking about; perhaps I'm 
asking 
> about a good way to implement it :)

Ter--

Sorry, Ter--I can't resist.  "Use the Force, Luke".  The current 
implementation approach for analysis works; just change GrammarElement 
classes to AST classes (and these could be generated with a little 
language).  The lookahead engine in ANTLR _is_ somewhat monolithic:  
each of the GrammarElement subclasses has a lookahead method that 
invokes
        grammar.theLLkAnalyzer.look(k, this);
(that works for AST classes, as well) and there are then a set of
        look(int, <class>)
methods in LLkAnalyzer.java.  All you need to change the analysis 
right now is to subclass LLkAnalyzer and change the code in Tool to 
use the subclass analyzer.

The current mechanism is okay if you just replace GrammarElements with 
heterogeneous ASTs; however, LLkAnalyzer is a mess (whimper, whimper). 
 Also, I think that it would be neater bind the analysis code to ASTs 
via specification:  they you can just copy (via treewalker) the 
analysis tree to one which has ASTs with different analysis methods.  
A good use of your output grammar stuff ... 

--Loring 

> 
> Thanks,
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Fri Jun 14 01:37:44 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Re: Modification of Node Attributes using Tree Grammar
In-Reply-To: <aeb5nm+5i9g@eGroups.com>; from lgc@mail1.jpl.nasa.gov on Thu, Jun 13, 2002 at 10:18:30PM -0000
References: <F40BjXa91mfA6nLC2Mg00022491@hotmail.com> <aeb5nm+5i9g@eGroups.com>
Message-ID: <20020614103744.P12709@cs.utwente.nl>

Hi,

On Thu, Jun 13, 2002 at 10:18:30PM -0000, lgcraymer wrote:
> which translate to calling the ASTFactory with default object type.  
> Heterogeneous ASTs are quite useful:  it's the implementation which is 
> suboptimal.  A good implementation approach would be to have a table 
> associating types with classes assigned to the ASTFactory by the
> grammar processor

This is what C++ codegen does in 2.7.2aX . Still waiting on Terence's go
for porting this to java codegen.

> --right now, the grammar processor passes class 
> information to the AST factory for every AST creation, and creations 
> in actions bypass the grammar processor's knowledge. 

Indeed the astfactory is not the only pitfall in the current heterogeneous
ast implementation. If you decide to use heterogeneous AST's be sure to
read the generated code for correctness. 

Oh boy this stuff is *so* broken. C++ mode may currently do marginally
better than java. But AFAIK hardly anyone is using this stuff, else we
would see much more questions about it.

I'm repeating myself (probably :) ) that we either should implement this
right (C++ and Java), or remove it altogether. Or put a big sign on it with
big friendly fuzzy letters with *beware*. Interaction between action
parsers (the stuff generating the #i #( .. )) and the real parser is due
for an overhaul)

In short... Use heterogeneous AST's if you feel lucky/adventourous.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
              of UCSD Pascal ever released..." --- Larry Smith


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Fri Jun 14 01:40:43 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Re: ANTLR grammar for ANTLR itself.
In-Reply-To: <aeav9a+b6pk@eGroups.com>; from lgc@mail1.jpl.nasa.gov on Thu, Jun 13, 2002 at 08:28:26PM -0000
References: <773096CC-7EFA-11D6-B36B-0030653DE0D6@jguru.com> <aeav9a+b6pk@eGroups.com>
Message-ID: <20020614104043.Q12709@cs.utwente.nl>

On Thu, Jun 13, 2002 at 08:28:26PM -0000, lgcraymer wrote:
> It's not that bad--there are a few unimplemented features, and it is a 
> bit messy in places because of the unified parser/lexer/treewalker 
> grammar approach.  For initial viewing, you probably want to use 
> ANTLR's -html option (Ter--where did the strip actions option go?  I 
> think that that was -g in PCCTS) to generate a file for viewing:  the 
> grammar is cluttered with actions which make it a little hard to 
> follow.

I think this was fixed in my prerelease stuff so should be in 2.7.2aX. (No
action printing no more). I did a small overhaul on the html codegen (and
implemented a docbook codegen) a few months back.

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Time what is time - I wish I knew how to tell You why - It hurts to know -
          Aren't we machines - Time what is time - Unlock the door
               - And see the truth - Then time is time again
                From: 'Time what is Time' by Blind Guardian


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From paul at toolscenter.org  Fri Jun 14 03:02:20 2002
From: paul at toolscenter.org (pegroups)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] C++ Grammar!
Message-ID: <aecevc+jg3d@eGroups.com>

Hello All,
Anyone implemented a C++ grammar and can share with me?

Best regards,
Paul.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From wiggjd at sbu.ac.uk  Fri Jun 14 05:39:45 2002
From: wiggjd at sbu.ac.uk (David Wigg)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Re: C++ grammar
Message-ID: <3D09E411.3D6D1006@sbu.ac.uk>

Hello Ter,

You ask for information from people working on a C++ front end
for ANTLR.

We used your C++ grammar version 1.2, "Restructured for public
consumption by Terence Parr February 1995", with PCCTS to produce
data files for input to a software metric program called REST
(Ripple Effect and Stability Tool) produced here.

The grammar was modified in a few places to accept C programs
(including some redundant K & R code) as well.

We have just spent the last year converting this .g file to use
with ANTLR but producing C++ code (so as to be able to continue
using our embedded C code).

The individual problems encountered in conversion are too
numerous to list here but the worst was probably the lack of
hoisting in ANTLR which we had to find and insert by hand.

I would like to take this opportunity to mention other facilities
we would like to see in ANTLR, namely,

1. A standard way of being able to pass Comments and Compiler
Directives etc. through ANTLR (without having to find a way of
fudging it yourself)

2. A standard way of passing column number with text and/or token
(ditto)

3. A standard feature for storing type names for C++ and Java so
as to be able to identify for example the method
variable.getText() easily (ditto)

4. Comprehensive usable reference documentation (with search
facility)

With all respect, I would rather you used your expertise and
knowledge on the above than go back to a C++ grammar file.

Anyway, you can have a look at our C/C++ grammar file if you give
us a month to tidy it up.

Thanks.

David Wigg
Researcher
Centre for Systems and Software Engineering
South Bank University
London, UK
http://www.sbu.ac.uk/csse

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From iank at bearcave.com  Fri Jun 14 07:42:16 2002
From: iank at bearcave.com (iank@bearcave.com)
Date: Mon Dec 20 16:14:52 2004
Subject: [antlr-interest] Re: C++ grammar
Message-ID: <200206141442.HAA07598@idiom.com>


> David Wigg's ANTLR wish list
>
> 1. A standard way of being able to pass Comments and Compiler
> Directives etc. through ANTLR (without having to find a way of
> fudging it yourself)
> 
> 2. A standard way of passing column number with text and/or token
> (ditto)

  I think that David has made a good point here.  It is not that this
  cannot be done in ANTLR as it exists.  And most people who write
  serious ANTLR parsers with nice error messages (which is one reason
  one uses ANTLR) do this.  Since many of us add these features, it
  might make sense to make these into builtin features.

  Since I'm throwing my few pennies into the ring, I'll throw
  out some thoughts on the C++ code generator.

  I have caught a disease called digital signal processing during the
  last year.  Wavelets have consumed my fevered brain, distracting me
  from all work on compilers.  I am only now starting to hope that
  recovery is on the way.  So I have not worked with the new code
  base.  However, when I last saw it, the code base (e.g., the ANTLR
  scanner) made heavy use of the C++ STL.

  I recently wrote a scanner/parser for an XML subset (OK, I guess I
  still do some lanuage processor related work) using STL.  It is much
  slower than I would have expected.  There are a variety of reasons
  for this, but the STL streams, at least on Solaris, seem to be
  slow.

  I have not actually benchmarked my Java parser, so I don't know how
  fast it is.  So I don't know if the overhead of STL is an issue.
  Also, in the past I've disregarded this issue, since I thought that
  the overhead of building the symbol table, doing semantic analysis
  and building the control flow/data flow graph would consume at least
  as much time as the parser, so the parser would not be the
  bottleneck.

  However, I keep thinking about Microsoft's C++ compiler compared to
  the Sun or GNU C++ compiler.  Microsoft's compiler is much faster
  (bless their little dark hearts).  From what I understand this may,
  in part, be attributable to the front end, which got a major rewrite
  somewhere around release 5.

  So has anyone looked at parser performance?  Is it worth the effort
  to think about removing STL from ANTLR?

  Ian Kaplan
  iank@bearcave.com
  www.bearcave.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Fri Jun 14 10:14:40 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Re: Using different tokens for the same grammar
Message-ID: <170826586F3BD511910D0200C110AAA8032B49ED@memail03.bco-home.com>

Antlr looks up literals in a hash map called literals in the lexer.  It
would be pretty easy for you to add an initialization routine that loaded in
more entries, say for French and Spanish.  The easiest way would probably be
to re-use the *TokenTypes.txt file, translated to whatever language, and
just parse it and load it into the table.

Monty

> -----Original Message-----
> From: dspiess_mk [mailto:dj@gamethingy.com]
> Sent: Thursday, June 06, 2002 2:01 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Using different tokens for the same grammar
> 
> 
> Hi, 
> I've inhierted a project that uses antlr, and I am trying to localize 
> the application. Is there an easy way to swap out what the valid 
> tokens are, but keep the grammar the same? 
> 
> For example our application builds mathematical expressions for 
> evaluation. The English version has a function called average(i, 
> i2, ...) where the user specifies the function average and several 
> parameters. In French, this needs to be moyenne(i, 12, ...). The 
> parsing is the same, just the keyword is different. 
> 
> Is there a way to specify the tokens at runtime instead of compile 
> time? I really don't want to have to support different compiles for 
> each localized version of our java app. 
> 
> Thanks for any help! 
> 
> Daniel Spiess
> 
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Jun 14 10:58:44 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Re: nice threads
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B49E5@memail03.bco-home.com>
Message-ID: <5E245F3C-7FC0-11D6-B7C8-0030653DE0D6@jguru.com>

Folks, Monty's email is not getting thru to the list...so here is a side 
thread to be weaved back in ;)

Ter

On Friday, June 14, 2002, at 07:15  AM, mzukowski@yci.com wrote:
> Tree grammars for analysis.  Why wouldn't that work?  Do you really 
> need a
> cyclic graph/network structure?

Well, yes/no.  Turns out it is a tree now loring says ;)  You really 
need to convert a grammar to an NFA and then run a bounded k level 
NFA->DFA conversion to do the analysis (that is the algorithm I designed 
during my thesis).

>
> Is grammar subclassing still appropriate?

I think it should be a function of the environment.  I.e, have a library 
of rules/grammars in your repository and then pick and choose stuff to 
grab to begin a new grammar.  A live push-forward-changes sort of thing 
is the same as inheritance ;) (I think they call that RCS) ;) ;)

>
> When I think about grammars and aspects I think actions--AspectANTLR 
> would
> be the tool to weave your actions into your pure antlr grammars.  The 
> trick

Oooooooohhhhhh.  Now THAT is the perfect explanation of what an Aspect 
is.  You don't want to modify a grammar physically just to add actions 
into the right spot!.  Oohhhh.

> is how to specify the join points and the answer is???  Note that your 
> IDE
> could still let you edit the actions as if they were attached to the .g
> file, but in reality they don't have to be.  Nice for multipass tree
> transforms and mixing C++ and Java output languages.

Oh man...i think we're on to something.  AspectANTLR :)

> I like the separation of antlr phases concept.  When I was digging into
> lookahead to generate a lookahead dependency graph I was frustrated by 
> the
> caching of lookahead info.  I don't remember exactly now but it seems 
> like
> maybe I was trying to find the specific rules contributing to the 
> ambiguity
> but sometimes when I got to the ambiguous rule the lookahead was already
> computed without the backlinks to what rules contributed to the 
> lookahead
> set.  Because you don't just want to know that a rule is ambiguous.  
> 50% of
> the time it's because another rule called it and I was automating that
> manual process of figuring out which caller rules were to blame.

Yes, the cached lookahead information is useless for determining the 
paths in the grammar that are nondeterministic.  I would really like to 
have ANTLREclipse or whatever be able to highlight the paths for you.

The caching is absolutely necessary for efficiency of this algorithm.  
Without it I cannot claim it is O(nk) where n is size of grammar.  But, 
a new version of antlr could avoid the caching when finding the problem 
spots.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Trey.Spiva at embarcadero.com  Fri Jun 14 11:52:06 2002
From: Trey.Spiva at embarcadero.com (Trey Spiva)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Re: nice threads
Message-ID: <6791D870658F174FB863E2FA890000A37DCD6A@abyss4.advancedsw.com>

Are you wanting to put these changes in 2.7.3 or writing a completely new
tool (AspectAntlr)?
 
> -----Original Message-----
> From: Terence Parr [mailto:parrt@jguru.com]
> Sent: Friday, June 14, 2002 11:59 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: nice threads
> 
> Folks, Monty's email is not getting thru to the list...so here is a side
> thread to be weaved back in ;)
> 
> Ter
> 
> On Friday, June 14, 2002, at 07:15  AM, mzukowski@yci.com wrote:
> > Tree grammars for analysis.  Why wouldn't that work?  Do you really
> > need a
> > cyclic graph/network structure?
> 
> Well, yes/no.  Turns out it is a tree now loring says ;)  You really
> need to convert a grammar to an NFA and then run a bounded k level
> NFA->DFA conversion to do the analysis (that is the algorithm I designed
> during my thesis).
> 
> >
> > Is grammar subclassing still appropriate?
> 
> I think it should be a function of the environment.  I.e, have a library
> of rules/grammars in your repository and then pick and choose stuff to
> grab to begin a new grammar.  A live push-forward-changes sort of thing
> is the same as inheritance ;) (I think they call that RCS) ;) ;)
> 
> >
> > When I think about grammars and aspects I think actions--AspectANTLR
> > would
> > be the tool to weave your actions into your pure antlr grammars.  The
> > trick
> 
> Oooooooohhhhhh.  Now THAT is the perfect explanation of what an Aspect
> is.  You don't want to modify a grammar physically just to add actions
> into the right spot!.  Oohhhh.
> 
> > is how to specify the join points and the answer is???  Note that your
> > IDE
> > could still let you edit the actions as if they were attached to the .g
> > file, but in reality they don't have to be.  Nice for multipass tree
> > transforms and mixing C++ and Java output languages.
> 
> Oh man...i think we're on to something.  AspectANTLR :)
> 
> > I like the separation of antlr phases concept.  When I was digging into
> > lookahead to generate a lookahead dependency graph I was frustrated by
> > the
> > caching of lookahead info.  I don't remember exactly now but it seems
> > like
> > maybe I was trying to find the specific rules contributing to the
> > ambiguity
> > but sometimes when I got to the ambiguous rule the lookahead was already
> > computed without the backlinks to what rules contributed to the
> > lookahead
> > set.  Because you don't just want to know that a rule is ambiguous.
> > 50% of
> > the time it's because another rule called it and I was automating that
> > manual process of figuring out which caller rules were to blame.
> 
> Yes, the cached lookahead information is useless for determining the
> paths in the grammar that are nondeterministic.  I would really like to
> have ANTLREclipse or whatever be able to highlight the paths for you.
> 
> The caching is absolutely necessary for efficiency of this algorithm.
> Without it I cannot claim it is O(nk) where n is size of grammar.  But,
> a new version of antlr could avoid the caching when finding the problem
> spots.
> 
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Fri Jun 14 11:59:11 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Mixing Grammars
Message-ID: <170826586F3BD511910D0200C110AAA8032B49F3@memail03.bco-home.com>

> Hi,
> 
> As part of a translation project I am working I wish to create an AST of
the
> target language, by transforming the source AST, using multiple tree
> grammars and user interaction.
> 
> Is it possible to mix grammars in a TreeParser, to allow node creation of
> the target language?
> 
> Has anyone got a good example of how they achieved this type of
translation
> in practice.

Yes, I did exactly this in my AREV to VB translator (see
http://www.codetransform.com/fun_with_antlr.html) What I did was to
create a tree grammar with both the AREV and VB tokens included.  I
achieved this by importing the AREV tokens from the AREV parser and
then introducing all the new VB tokens as "imaginary tokens" (you can
do this in a tokens{} section I believe.)

Since the AREV and VB tokens were disjoint sets it was no problem to
define all the rules for both grammars in the same tree grammar.

For each pass I would subclass that master tree grammar and override
only the rules I needed to.  In development I would run the result of
every pass through the master tree grammar to make sure I didn't
construct and bad trees.  The final pass was a code emitter which only
overrode the VB rules to print them out.

Monty
I provide antlr consulting at www.codetransform.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Fri Jun 14 12:00:11 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Preserving Whitespace
Message-ID: <170826586F3BD511910D0200C110AAA8032B49F4@memail03.bco-home.com>

> I'm doing something along the lines of the "Preserve whitespace" example
> from ANTLR distribution. Take the AST, and write it back with small
changes.
> The example is very useful, but ... in practice you don't have only tokens
> ignored before the parser, you also ignore some in parser rules. For
> instance, in the "Preserve whitespace" example one would normally ignore
> SEMI while constructing the AST:
> 
> stat : ID ASSIGN^ expr SEMI! ; // see the ! after SEMI
> 
> Now SEMI is not present in the AST, and I don't know how can I retrieve
> hidden tokens before/after SEMI. In an ideal world, I would like to have
> SEMI treated exactly as it was ignored before the parser, just like an
other
> hidden token. But it seems that SEMI is lost after the parser, together
with
> its hidden tokens.
> 
> If I'm wrong, please correct me, it will save me a lot of time.

Have a look at TokenStreamHiddenTokenFilter.java.  If it is as simple
as knowing that all SEMIs are going to be dropped by the parser then
you could a new class of tokens which should be passed to the parser
but also preserved in the hidden token stream.  But that's a hack and
won't work for things that are only sometimes preserved.

I've detailed another approach before on this list which I think is
very general and I'd love to get somebody to implement it ;) Basically
you keep the original file around and every Token you create
represents a region in that file (start and extent).  When it comes
time to print out your Tokens you keep track of the previously printed
token and if some whitespace existed between those two tokens
previously then copy it to the output. There are some boundary cases
to handle as well as what to do with synthesized tokens that weren't
present in the original code.  If you look at the GCC grammar you can
see my first stab at it.  I gave up because of some reported bugs with
it, but was never convinced that code was causing it, so I just
commented out the code instead of deleting it.  I was actually trying
to handle nested #line directives myself with that code instead of
preserving them as whitespace too.

Monty
http://www.codetransform.com/gcc.html

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From greenj at ix.netcom.com  Fri Jun 14 12:25:36 2002
From: greenj at ix.netcom.com (John Allen Green)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Preserving Whitespace
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B49F4@memail03.bco-home.com>
References: <170826586F3BD511910D0200C110AAA8032B49F4@memail03.bco-home.com>
Message-ID: <47842363.1024089936@localhost>


--On 14/06/2002 12:00 PM -0700 mzukowski wrote:
> I've detailed another approach before on this list which I think is
> very general and I'd love to get somebody to implement it ;) Basically
> you keep the original file around and every Token you create
> represents a region in that file (start and extent).

Hmm, interesting, I've been considering doing something similar. Currently
we use the preserve whitespace stuff (with hidden tokens) but those aren't
sufficient because of code that gets discarded due to preprocessing. I
*was* going to try to preserve the stuff that got preprocessed out as well
(theoretically possible - our lexer does the preprocessing and lexing all
the same time). However, I think now I'm going to toss that idea. 

I'm thinking instead of keeping unprocessed (raw) token streams for each
file, with character positions into the original files. Those can be
compared to file and character positions which are in the nodes in our AST.
For each node in the AST which gets printed, we'll look for the related
node in the raw token list, and check for stuff which got preprocessed out.
(As well as watch for code that got substituted in via the preprocessor.)

That should allow us to regenerate original source code, but also fiddle
with the parse tree and then re-write the code, as if it were a programmer
doing code tweaks.

I wish I'd had a clearer picture of this two years ago. :-)

John
www.joanju.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From brian-l-smith at uiowa.edu  Fri Jun 14 13:03:39 2002
From: brian-l-smith at uiowa.edu (Brian Smith)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Re: nice threads
References: <5E245F3C-7FC0-11D6-B7C8-0030653DE0D6@jguru.com>
Message-ID: <3D0A4C1B.3030805@uiowa.edu>

Terence Parr wrote:
>>Is grammar subclassing still appropriate?
> 
> I think it should be a function of the environment.  I.e, have a library 
> of rules/grammars in your repository and then pick and choose stuff to 
> grab to begin a new grammar.  A live push-forward-changes sort of thing 
> is the same as inheritance ;) (I think they call that RCS) ;) ;)

I think that what is needed is a "rule import" mechanism, instead of 
subclassing. If you did this, then I could import rules from more than 
one grammar and do so selectively. Also, my parser could import all the 
rules from my lexer, and then when I run my parser grammer through ANTLR 
it can actually tell me which lexer rules I forgot at code-generation 
time, instead of me having to figure it out at runtime.

>>When I think about grammars and aspects I think actions--AspectANTLR 
>>would
>>be the tool to weave your actions into your pure antlr grammars.  The 
>>trick
> Oooooooohhhhhh.  Now THAT is the perfect explanation of what an Aspect 
> is.  You don't want to modify a grammar physically just to add actions 
> into the right spot!.  Oohhhh.

But, how do you specify the joinpoints? Wouldn't you use the grammar 
rules as the join-points? If so, then you really haven't gained anything.

Have you looked at SableCC? They don't allow you to put any rules into 
your grammar. Instead, they automatically generate a bunch of classes 
that represent a heterogeneous AST. Then you subclass these generated 
classes to include your code.

- Brian


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Fri Jun 14 13:35:58 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Re: nice threads
Message-ID: <170826586F3BD511910D0200C110AAA8032B49F5@memail03.bco-home.com>

> But, how do you specify the joinpoints? Wouldn't you use the grammar 
> rules as the join-points? If so, then you really haven't 
> gained anything.
> 
> Have you looked at SableCC? They don't allow you to put any 
> rules into 
> your grammar. Instead, they automatically generate a bunch of classes 
> that represent a heterogeneous AST. Then you subclass these generated 
> classes to include your code.

But then what do you do about multiple passes?  What you end up doing is
having a bunch of parallel subclasses representing each pass.  The beauty of
a tree grammar is that you abstract away the AST into the rules and get to
reason about it at the scale of the grammar and rules instead of a bunch of
different classes.  

I routinely use "grammar subclassing" to override rules from a master tree
grammar in order to implement a pass.  An aspect would probably not look
much different than one of these subclasses, but instead of overriding rules
(with the potential of inadvertently changing a rule) it would locate a rule
as a joinpoint and then have the action code to weave in.  Should be a
little more robust with a master tree grammar that is under development and
continually changing.

By the way folks, there is an interesting project at www.brics.dk/metafront.
The paper "Growing Languages with Metamorphic Syntax Macros" has some
interesting reasoning about grammar extensions.  Granted the paper is about
LL(1) parsing without actions, but it's pretty cool to see they can reason
about grammar additions and decide whether a particular extension will work
or not.  I am envious and will be lobbying hard for the hooks to allow a
similar functionality to be built into antlr 3.

Monty

www.codetransform.com (Check out my new style sheets!)


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Fri Jun 14 14:03:18 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Re: Modification of Node Attributes using Tree Grammar
In-Reply-To: <20020614103744.P12709@cs.utwente.nl>
Message-ID: <aedlmm+q4db@eGroups.com>

--- In antlr-interest@y..., Ric Klaren <klaren@c...> wrote: 
> This is what C++ codegen does in 2.7.2aX . Still waiting on 
Terence's go
> for porting this to java codegen.

Excellent!

> 
> > --right now, the grammar processor passes class 
> > information to the AST factory for every AST creation, and 
creations 
> > in actions bypass the grammar processor's knowledge. 
> 
> Indeed the astfactory is not the only pitfall in the current 
heterogeneous
> ast implementation. If you decide to use heterogeneous AST's be sure 
to
> read the generated code for correctness. 
> 
> Oh boy this stuff is *so* broken. C++ mode may currently do 
marginally
> better than java. But AFAIK hardly anyone is using this stuff, else 
we
> would see much more questions about it.
> 

Ric--

I've fixed the AST bugs in the Java version--the original 
implementation specifies variables as being of class CommonAST or 
<specialAST> or whatever; if your declare them as "AST" (generic) and 
fix the typecasting, you can avoid the type coercion problems (you 
don't have to read the code; the compiler complains and the 
corrections are pretty obvious).  I haven't looked at the C++ 
implementation, but I assume that you've got something equivalent to 
the AST interface (the code generator needs only generic AST 
functionality except for AST creation).  There are also a couple of 
bugs in the tree generation which I had to fix.  My version of ANTLR 
uses heterogeneous ASTs to generate tree grammars, so I had to make 
that work.  I'll be able to make my extensions (and bug fixes) 
available Real Soon Now--mostly the delay is that I haven't had time 
to take the last few steps in the release process.

--Loring

> I'm repeating myself (probably :) ) that we either should implement 
this
> right (C++ and Java), or remove it altogether. Or put a big sign on 
it with
> big friendly fuzzy letters with *beware*. Interaction between action
> parsers (the stuff generating the #i #( .. )) and the real parser is 
due
> for an overhaul)
> 
> In short... Use heterogeneous AST's if you feel lucky/adventourous.
> 
> Cheers,
> 
> Ric
> --
> 
-----+++++*****************************************************+++++++
++-------
>     ---- Ric Klaren ----- klaren@c... ----- +31 53 4893722  ----
> 
-----+++++*****************************************************+++++++
++-------
>   "I don't have anything against Java - it's the best damn 
implementation
>               of UCSD Pascal ever released..." --- Larry Smith


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Fri Jun 14 14:17:42 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Bugzilla for 3.0 feature requests and suggestions?
Message-ID: <aedmhm+9lht@eGroups.com>

Ter--

There are some good ideas flying around here.  Since you are thinking 
about upgrading the web site, wouldn't it make sense to incorporate 
something like bugzilla to collect requests?  (Entries could be 
automatically posted to the newsgroup to keep the discussion flowing.)

--Loring



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From brian-l-smith at uiowa.edu  Fri Jun 14 14:31:12 2002
From: brian-l-smith at uiowa.edu (Brian Smith)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Re: nice threads
References: <170826586F3BD511910D0200C110AAA8032B49F5@memail03.bco-home.com>
Message-ID: <3D0A60A0.4070405@uiowa.edu>



mzukowski@yci.com wrote:
>>But, how do you specify the joinpoints? Wouldn't you use the grammar 
>>rules as the join-points? If so, then you really haven't 
>>gained anything.
>>
>>Have you looked at SableCC? They don't allow you to put any 
>>rules into 
>>your grammar. Instead, they automatically generate a bunch of classes 
>>that represent a heterogeneous AST. Then you subclass these generated 
>>classes to include your code.

I do agree that graph-rewriting seems more useful, but only if the 
graph-rewriting language has enough "power".

But, I believe I mis-stated the SableCC technique. They generate a set 
of classes that represent the AST, _and_ they generate a "visitor" 
abstract class. The "visitor" is the basic implementation of the visitor 
pattern. Basically, each pass subclasses the visitor abstract class and 
overrides the appropriate methods.

I am doing something similar to SableCC, but instead of operating on 
grammars I am operating on Abstract Syntax Graphs in the form of MOF 
models (MOF is a subset of UML used to model the static-semantics/ 
abstract-syntax of modeling and programming languages). That is, I 
generate a visitor from the abstract syntax's UML diagram, and I call 
this visitor while walking the composition associations in the diagram.

 > But then what do you do about multiple passes?  What you end up doing
 > is having a bunch of parallel subclasses representing each pass.  The
 > beauty of a tree grammar is that you abstract away the AST into the
 > rules and get to reason about it at the scale of the grammar and rules
 > instead of a bunch of different classes.

> By the way folks, there is an interesting project at www.brics.dk/metafront.
> The paper "Growing Languages with Metamorphic Syntax Macros" has some
> interesting reasoning about grammar extensions.  Granted the paper is about
> LL(1) parsing without actions, but it's pretty cool to see they can reason
> about grammar additions and decide whether a particular extension will work
> or not.  I am envious and will be lobbying hard for the hooks to allow a
> similar functionality to be built into antlr 3.

This does seem very interesting. Thanks for the pointer.

- Brian


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Fri Jun 14 15:04:52 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Re: nice threads
In-Reply-To: <3D0A60A0.4070405@uiowa.edu>
Message-ID: <aedpa4+7cdq@eGroups.com>

--- In antlr-interest@y..., Brian Smith <brian-l-smith@u...> wrote:

> But, I believe I mis-stated the SableCC technique. They generate a 
set 
> of classes that represent the AST, _and_ they generate a "visitor" 
> abstract class. The "visitor" is the basic implementation of the 
visitor 
> pattern. Basically, each pass subclasses the visitor abstract class 
and 
> overrides the appropriate methods.
> 
> I am doing something similar to SableCC, but instead of operating on 
> grammars I am operating on Abstract Syntax Graphs in the form of MOF 
> models (MOF is a subset of UML used to model the static-semantics/ 
> abstract-syntax of modeling and programming languages). That is, I 
> generate a visitor from the abstract syntax's UML diagram, and I 
call 
> this visitor while walking the composition associations in the 
diagram.
> 

Brian--

The Visitor pattern works well if you want to generic processing (call 
foo() at each node of type FOO), but it is less capable than a tree 
walker which can assign actions according to matched patterns and not 
just matched nodes.  There are some cases where a Visitor is to be 
preferred to a tree walker, and some where a mix is appropriate--visit 
all nodes of a tree, but if you encounter a node of type FIXME then 
use a tree walker on it and its children instead of visiting them.

Automatic tree grammar generation is in the process of being added to 
ANTLR--I've implemented it and a rewrite syntax, have gotten basic 
permission for release, but still have to find out what copyright 
blurb to add to the files and find out if it can be released through 
the antlr.org site or if I have to release it through an open source 
site that NASA has a contract with.

In fact, if you substitute "tree walker" for "Visitor" in what you are 
saying, then you are right in line with the "old guard" who have been 
actively using trees since Ter invented SORCERER.  If you poke around, 
you'll find old posts from Ter, Monty, John Mitchell, and others who 
advocate having actions in tree walkers for code generation, but to 
avoid them in parsers except to do such things as symbol table 
construction.  Tree manipulation is a very powerful tool for 
source-to-source translation.

--Loring


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Jun 14 21:14:04 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Re: nice threads
In-Reply-To: <6791D870658F174FB863E2FA890000A37DCD6A@abyss4.advancedsw.com>
Message-ID: <5439C7C6-8016-11D6-B7C8-0030653DE0D6@jguru.com>


On Friday, June 14, 2002, at 11:52  AM, Trey Spiva wrote:

> Are you wanting to put these changes in 2.7.3 or writing a completely 
> new
> tool (AspectAntlr)?

All future to-be-determined stuff. :)

We need a bug fix release out soon and then I'll worry about the future.

Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Jun 14 21:16:38 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Bugzilla for 3.0 feature requests and suggestions?
In-Reply-To: <aedmhm+9lht@eGroups.com>
Message-ID: <AFD16C96-8016-11D6-B7C8-0030653DE0D6@jguru.com>


On Friday, June 14, 2002, at 02:17  PM, lgcraymer wrote:

> Ter--
>
> There are some good ideas flying around here.  Since you are thinking
> about upgrading the web site, wouldn't it make sense to incorporate
> something like bugzilla to collect requests?  (Entries could be
> automatically posted to the newsgroup to keep the discussion flowing.)

Ack, more work! ;)

I dislike bugzilla, but something like would be useful for sure.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bob at werken.com  Fri Jun 14 22:13:37 2002
From: bob at werken.com (bob mcwhirter)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Bugzilla for 3.0 feature requests and suggestions?
In-Reply-To: <AFD16C96-8016-11D6-B7C8-0030653DE0D6@jguru.com>
Message-ID: <Pine.LNX.3.96.1020615011309.3863B-100000@exeter.exeter.org>

> Ack, more work! ;)
> 
> I dislike bugzilla, but something like would be useful for sure.

	http://scarab.tigris.org/

		-bob


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tjuergeleit at yahoo.de  Sat Jun 15 02:47:22 2002
From: tjuergeleit at yahoo.de (tjuergeleit)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] ANTLR plugin for Eclipse as OpenSource project on SourceForge
Message-ID: <aef2fa+nof9@eGroups.com>

Hi,

the Eclipse plugins from the files area of this group are now hosted 
on SourceForge http://sourceforge.net/projects/antlreclipse/ .

Cheers,
Torsten



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Sat Jun 15 10:45:23 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] ANTLR plugin for Eclipse as OpenSource project on SourceForge
In-Reply-To: <aef2fa+nof9@eGroups.com>
Message-ID: <AB74F386-8087-11D6-AC9A-0030653DE0D6@jguru.com>


On Saturday, June 15, 2002, at 02:47  AM, tjuergeleit wrote:

> Hi,
>
> the Eclipse plugins from the files area of this group are now hosted
> on SourceForge http://sourceforge.net/projects/antlreclipse/ .

Are there installation instructions for this plugin for eclipse newbies 
like me? ;)

Thanks,
Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tjuergeleit at yahoo.de  Sat Jun 15 12:39:10 2002
From: tjuergeleit at yahoo.de (Torsten Juergeleit)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] ANTLR plugin for Eclipse as OpenSource project on SourceForge
In-Reply-To: <AB74F386-8087-11D6-AC9A-0030653DE0D6@jguru.com>
Message-ID: <20020615193910.31310.qmail@web9307.mail.yahoo.com>


--- Terence Parr <parrt@jguru.com> wrote:
> Are there installation instructions for this plugin
> for eclipse newbies 
> like me? ;)

Yes, try http://antlreclipse.sourceforge.net/

Torsten


__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Sat Jun 15 22:53:07 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] ANTLR plugin for Eclipse as OpenSource project on SourceForge
In-Reply-To: <20020615193910.31310.qmail@web9307.mail.yahoo.com>
Message-ID: <551B0036-80ED-11D6-AC9A-0030653DE0D6@jguru.com>


On Saturday, June 15, 2002, at 12:39  PM, Torsten Juergeleit wrote:

>
> --- Terence Parr <parrt@jguru.com> wrote:
>> Are there installation instructions for this plugin
>> for eclipse newbies
>> like me? ;)
>
> Yes, try http://antlreclipse.sourceforge.net/

That is so bizarre.  I looked everywhere for that.  It doesn't look like

  http://sourceforge.net/projects/antlreclipse/

gets you to the same spot as the above url. ;)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tjuergeleit at yahoo.de  Sun Jun 16 04:29:02 2002
From: tjuergeleit at yahoo.de (tjuergeleit)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Re: ANTLR plugin for Eclipse as OpenSource project on SourceForge
In-Reply-To: <551B0036-80ED-11D6-AC9A-0030653DE0D6@jguru.com>
Message-ID: <aehspu+761b@eGroups.com>

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> 
> On Saturday, June 15, 2002, at 12:39  PM, Torsten Juergeleit wrote:
> 
> >
> > --- Terence Parr <parrt@j...> wrote:
> >> Are there installation instructions for this plugin
> >> for eclipse newbies
> >> like me? ;)
> >
> > Yes, try http://antlreclipse.sourceforge.net/
> 
> That is so bizarre.  I looked everywhere for that.  It doesn't look 
like
> 
>   http://sourceforge.net/projects/antlreclipse/
> 
> gets you to the same spot as the above url. ;)

They are related, but it's a little bit tricky to find the 
connection :-)

Both URLs are belonging to the same SourceForge project 
(automatically created during project registration):

- http://sourceforge.net/projects/antlreclipse/ is the project 
summary page maintained by SourceForge (in the section "Public Areas" 
you will find the second URL called "Project Home Page")

- http://antlreclipse.sourceforge.net/ is the project's public 
homepage maintained by the project developers (I'm using it as a kind 
of documentation ;-)

Cheers,
Torsten


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Sun Jun 16 10:30:01 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Re: ANTLR plugin for Eclipse as OpenSource project on SourceForge
In-Reply-To: <aehspu+761b@eGroups.com>
Message-ID: <B0230B95-814E-11D6-AC9A-0030653DE0D6@jguru.com>


On Sunday, June 16, 2002, at 04:29  AM, tjuergeleit wrote:
>>
>>   http://sourceforge.net/projects/antlreclipse/
>>
>> gets you to the same spot as the above url. ;)
>
> They are related, but it's a little bit tricky to find the
> connection :-)
>
> Both URLs are belonging to the same SourceForge project
> (automatically created during project registration):
>
> - http://sourceforge.net/projects/antlreclipse/ is the project
> summary page maintained by SourceForge (in the section "Public Areas"
> you will find the second URL called "Project Home Page")
>
> - http://antlreclipse.sourceforge.net/ is the project's public
> homepage maintained by the project developers (I'm using it as a kind
> of documentation ;-)

Ah.  Got a t.g file in there and the outline thing is really cool.  The 
org.antlr.* package has the source code still showing antlr.* in the 
imports in all the ANTLR source...it gives me a million "The import 
antlr cannot be resolved" errors.  Ah...."add external jar" in the 
project properties seems to work.  Is this the correct way to add 
antlr's antlrall.jar?

Eclipse seems to have lots of little bugs...for example, it crashed a 
few times and lists some of the properties twice like Java Build Path in 
the project properties dialog.  A restart fixes the duplicate entries.

Nice tool and a very nice antlr plugin.  I like the outline feature and 
the error highlighting :)  Great work!

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tjuergeleit at yahoo.de  Sun Jun 16 11:46:15 2002
From: tjuergeleit at yahoo.de (Torsten Juergeleit)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Re: ANTLR plugin for Eclipse as OpenSource project on SourceForge
In-Reply-To: <B0230B95-814E-11D6-AC9A-0030653DE0D6@jguru.com>
Message-ID: <20020616184615.27374.qmail@web9301.mail.yahoo.com>


--- Terence Parr <parrt@jguru.com> wrote:
> 
> On Sunday, June 16, 2002, at 04:29  AM, tjuergeleit
> wrote:
> >>
> >>   http://sourceforge.net/projects/antlreclipse/
> >>
> >> gets you to the same spot as the above url. ;)
> >
> > They are related, but it's a little bit tricky to
> find the
> > connection :-)
> >
> > Both URLs are belonging to the same SourceForge
> project
> > (automatically created during project
> registration):
> >
> > - http://sourceforge.net/projects/antlreclipse/ is
> the project
> > summary page maintained by SourceForge (in the
> section "Public Areas"
> > you will find the second URL called "Project Home
> Page")
> >
> > - http://antlreclipse.sourceforge.net/ is the
> project's public
> > homepage maintained by the project developers (I'm
> using it as a kind
> > of documentation ;-)
> 
> Ah.  Got a t.g file in there and the outline thing
> is really cool.  The 
> org.antlr.* package has the source code still
> showing antlr.* in the 
> imports in all the ANTLR source...it gives me a
> million "The import 
> antlr cannot be resolved" errors.  Ah...."add
> external jar" in the 
> project properties seems to work.  Is this the
> correct way to add 
> antlr's antlrall.jar?

Yes. In the same project properties dialog you can
also define a variable pointing to 'antlrall.jar'.
This variable can be reused in all your projects using
ANTLR.

Torsten

__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnclarke at hotmail.com  Sun Jun 16 12:42:42 2002
From: johnclarke at hotmail.com (johnclarke72)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Lexer States, HTML and <SCRIPT> tag
Message-ID: <aeipni+867v@eGroups.com>

I have a lexer that starts in a state where it only identifies text.  
When is sees a < it changes state so that it processes Tags.  This is 
OK until you reach the SCRIPT tag.  This tag can have attributes and 
code between the begin and end tags.  eg :

<script>
   var cimage;
   cImage = new Image;
</script>

Basically I need it to keep the text between the begin and end script 
tags.  

How can I do this ?  I would be grateful for all advice offered.

Thanks

John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Mon Jun 17 03:36:10 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Re: Modification of Node Attributes using Tree Grammar
In-Reply-To: <aedlmm+q4db@eGroups.com>; from lgc@mail1.jpl.nasa.gov on Fri, Jun 14, 2002 at 09:03:18PM -0000
References: <20020614103744.P12709@cs.utwente.nl> <aedlmm+q4db@eGroups.com>
Message-ID: <20020617123610.C266@cs.utwente.nl>

On Fri, Jun 14, 2002 at 09:03:18PM -0000, lgcraymer wrote:
> I've fixed the AST bugs in the Java version--the original 
> implementation specifies variables as being of class CommonAST or 
> <specialAST> or whatever; if your declare them as "AST" (generic) and 
> fix the typecasting, you can avoid the type coercion problems (you
> don't have to read the code; the compiler complains and the
> corrections are pretty obvious).

Sounds great =)

> I haven't looked at the C++ implementation, but I assume that you've got
> something equivalent to the AST interface (the code generator needs only
> generic AST functionality except for AST creation).  There are also a
> couple of bugs in the tree generation which I had to fix.  

Well C++ output is complicated by the reference counting class. I've toyed
around with it several times when I started to work on antlr. Yet I
couldn't solve things in a nice way at that time. Basically I'd like to
scrap most of the current runtime as soon as 2.7.2 is released.

> My version of ANTLR uses heterogeneous ASTs to generate tree grammars, so I
> had to make that work.  I'll be able to make my extensions (and bug fixes)
> available Real Soon Now--mostly the delay is that I haven't had time to
> take the last few steps in the release process.

I'm looking forward to your work :)

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
Wit is cultured insolence. --- Aristotle


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bogdan_mt at yahoo.com  Mon Jun 17 04:34:25 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Preserving Whitespace
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B49F4@memail03.bco-home.com>
Message-ID: <20020617113425.62767.qmail@web14809.mail.yahoo.com>

--- mzukowski@yci.com wrote:
...
> I've detailed another approach before on this list which I think is
> very general and I'd love to get somebody to implement it ;) Basically
> you keep the original file around and every Token you create
> represents a region in that file (start and extent).  When it comes
> time to print out your Tokens you keep track of the previously printed
> token and if some whitespace existed between those two tokens
> previously then copy it to the output. There are some boundary cases
> to handle as well as what to do with synthesized tokens that weren't
> present in the original code.  

That's exactly what I do. I work on Documents (files read in Swing
TextComponents), so I have all the source available. I want to provide
services like highlighting the declaration of a variable when you select it
in a tree outline and different source transformations based on the AST. The
problems are:
- tokens ignored in the parser
- imaginary tokens added during parse (as you mentioned)
- tokens moved from their place when the return tree is constructed by hand
(i.e. ## = #(#b, #a))

It would be nice if the root of the return tree would carry information
about the range of the input covered by itself *and* its children. This way
it will be easy to make the source reflect the deletion or movement of a
subtree in AST.

When source text is not available, I think the solution is to keep the
tokens processed by the parser in a linked list (what is now doing
TokenStreamHiddenTokenFilter, but keeping the tokens ignored in parser as
well) and construct the AST over this list. Hidden tokens between two rules
should be appended in some way to the root of the return tree of the
previous rule, so that comments and spaces following a subtree can be
recovered, even if the subtree is completely transformed.

This way no information is lost, and one can use the AST as a convenient
structure for (possibly complex) transformations, and the token list for
printing back the result.

Bogdan

__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Mon Jun 17 06:50:21 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Preserving Whitespace
Message-ID: <170826586F3BD511910D0200C110AAA8032B49F8@memail03.bco-home.com>

>- imaginary tokens added during parse (as you mentioned)

What I tend to do is create my fragments of code out of text that I pass to
the parser to get a little AST to insert.  That way I can set the source
file to be a mythical filename that I can track back to that pass.  This
also gives me commas and semicolons in the original source that can be saved
and known when printing out.  Should be easy to make it inherit the current
indentation as well.

> It would be nice if the root of the return tree would carry 
> information
> about the range of the input covered by itself *and* its 
> children. This way
> it will be easy to make the source reflect the deletion or 
> movement of a
> subtree in AST.

This would be easily accomplished by traversing the tree after it is all
parsed.  That's a great idea.
 
> When source text is not available, I think the solution is to keep the
> tokens processed by the parser in a linked list (what is now doing
> TokenStreamHiddenTokenFilter, but keeping the tokens ignored 
> in parser as
> well) and construct the AST over this list. Hidden tokens 
> between two rules
> should be appended in some way to the root of the return tree of the
> previous rule, so that comments and spaces following a subtree can be
> recovered, even if the subtree is completely transformed.

I think it'd be easier to save the source text yourself, but this should
work too.
 
> This way no information is lost, and one can use the AST as a 
> convenient
> structure for (possibly complex) transformations, and the 
> token list for
> printing back the result.

Let us know how this works for you.

Monty

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bogdan_mt at yahoo.com  Mon Jun 17 08:21:11 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Aspects and ANTLR (was: Re: nice threads)
In-Reply-To: <5E245F3C-7FC0-11D6-B7C8-0030653DE0D6@jguru.com>
Message-ID: <20020617152111.41984.qmail@web14801.mail.yahoo.com>

Hi,

I'm happy to see Monty's thread, because I am working on a preprocessing
tool that goes beyond the current grammar inheritance mechanism, using an
Aspect-like style of programming. For the moment, I am able to modify the
header and the main "action" (the additional Constructors, declarations and
methods) of a grammar. I'm still looking for a convenient syntax. I am
thinking on something like:

------------------------------------------------------------------

class MyXxxParser extends BasicXxxParser;

header { // new header
}

options { buildAST = true; }  // overwrite default value = false

{  // start of top-level inserted Java code

   ArrayList methodList;

   public MyXxxParser( Object arg) { ... }
}

------------------------------------------------------------------

If I want to preserve the original header, and just add something to it (a
new import, for instance, because I want to add some new auxiliary methods),
I can write something like:

...
header {
   super.header();           // preserve the default header
   import com.extra.*;       // add a new import
}

Alternatively, in an Aspect style:

XxxParser.header: last() { import com.extra.*;      // add a new import }

Of course, it will allow rule inheritance, like the current supergrammar
stuff, but it will also let you modify the init and final actions of the
rule.

Using Aspects, you can modify a group of related files. Let's say you want
to parse single line comments, looking for TODOs, FIXMEs or stuff like this.

aspect InterpretComments {

   //
   // Make the lexer switch to an embedded comment lexer, 
   // instead of returning a monolithic token
   //
   XxxLexer.COMMENT
      :  "//" { switchToCommentLexer(); }
      ;

   //
   // Add a rule in the parser to interpret the comments ...
   //
   XxxParser.comment
      :   COMMENT_START! ("TODO"^ | "FIXME"^ | ...) ...
      ;

   //
   // .. and new rules in the treeParser
   //
   XxxTreeParser.todo 
      :   #( "TODO" ... )
      ;
   XxxTreeParser.fixme
      :   #( "FIXME" ... )
      ;
}

Using Aspects can also bring the benefits of literate programming. For
instance, you can write the parser and treeParser rules interleaved in the
same Aspect, so that when you modify a parser rule, you have the
corresponding treeParser rule just bellow, being less tempted to say "I'll
update it later".

I would like to go down to token (AST) level, and I'm thinking on a
XPath-like syntax:

/Parser/rules/"expression"/ID[3]

(to reffer the third ID of the parser rule named "expression"). Although I
would prefer '.' instead of '/' (more readable, to me).

I need to think more on this; what do you think? Any feedback from you will
help me a lot.

Best regards,
Bogdan




--- Terence Parr <parrt@jguru.com> wrote:
> Folks, Monty's email is not getting thru to the list...so here is a side 
> thread to be weaved back in ;)
> 
> Ter
> 
> On Friday, June 14, 2002, at 07:15  AM, mzukowski@yci.com wrote:
> > Tree grammars for analysis.  Why wouldn't that work?  Do you really 
> > need a
> > cyclic graph/network structure?
> 
> Well, yes/no.  Turns out it is a tree now loring says ;)  You really 
> need to convert a grammar to an NFA and then run a bounded k level 
> NFA->DFA conversion to do the analysis (that is the algorithm I designed 
> during my thesis).
> 
> >
> > Is grammar subclassing still appropriate?
> 
> I think it should be a function of the environment.  I.e, have a library 
> of rules/grammars in your repository and then pick and choose stuff to 
> grab to begin a new grammar.  A live push-forward-changes sort of thing 
> is the same as inheritance ;) (I think they call that RCS) ;) ;)
> 
> >
> > When I think about grammars and aspects I think actions--AspectANTLR 
> > would
> > be the tool to weave your actions into your pure antlr grammars.  The 
> > trick
> 
> Oooooooohhhhhh.  Now THAT is the perfect explanation of what an Aspect 
> is.  You don't want to modify a grammar physically just to add actions 
> into the right spot!.  Oohhhh.
> 
> > is how to specify the join points and the answer is???  Note that your 
> > IDE
> > could still let you edit the actions as if they were attached to the .g
> > file, but in reality they don't have to be.  Nice for multipass tree
> > transforms and mixing C++ and Java output languages.
> 
> Oh man...i think we're on to something.  AspectANTLR :)
> 
> > I like the separation of antlr phases concept.  When I was digging into
> > lookahead to generate a lookahead dependency graph I was frustrated by 
> > the
> > caching of lookahead info.  I don't remember exactly now but it seems 
> > like
> > maybe I was trying to find the specific rules contributing to the 
> > ambiguity
> > but sometimes when I got to the ambiguous rule the lookahead was already
> > computed without the backlinks to what rules contributed to the 
> > lookahead
> > set.  Because you don't just want to know that a rule is ambiguous.  
> > 50% of
> > the time it's because another rule called it and I was automating that
> > manual process of figuring out which caller rules were to blame.
> 
> Yes, the cached lookahead information is useless for determining the 
> paths in the grammar that are nondeterministic.  I would really like to 
> have ANTLREclipse or whatever be able to highlight the paths for you.
> 
> The caching is absolutely necessary for efficiency of this algorithm.  
> Without it I cannot claim it is O(nk) where n is size of grammar.  But, 
> a new version of antlr could avoid the caching when finding the problem 
> spots.
> 
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 








__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Mon Jun 17 09:23:55 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Aspects and ANTLR (was: Re: nice threads)
Message-ID: <170826586F3BD511910D0200C110AAA8032B49FA@memail03.bco-home.com>

Very interesting stuff, here are some of my thoughts on your points:

Separate grammar stuff from actions.  The way I see things now I don't want
to override behaviors by changing actions.  Instead I want to compose by
choosing actions and applying them to an action free grammar.  Obviously we
need to look at basic actions that are usually wanted such as symbol table
entry and scope management.  Those directly affect the parse through
semantic predicates.  Though I must say I'd rather see the all the code for
symbol management in one place instead of scattered throughout the code.

Intelligent composition will require some sort of sanity check to make sure
that the composition of the pieces you want don't conflict.

When I wrote the GCC translation framework in noweb I interleaved the C
parser, GCC parser, tree parser and code emitter rules together so I would
remember to update them all whenever I changed one.  I think that is a very
beneficial practice whether they are really located together in the same
file or "virtually" through the help of an IDE.


> If I want to preserve the original header, and just add 
> something to it (a
> new import, for instance, because I want to add some new 
> auxiliary methods),
> I can write something like:
> 
> ...
> header {
>    super.header();           // preserve the default header
>    import com.extra.*;       // add a new import
> }

I don't like the super.header() thing because I'm not convinced that
overriding is necessary.  Appending should be the default in my opinion, but
I haven't thought it all the way through.
 
> Alternatively, in an Aspect style:
> 
> XxxParser.header: last() { import com.extra.*;      // add a 
> new import }
 
I like that better.
> I would like to go down to token (AST) level, and I'm thinking on a
> XPath-like syntax:
> 
> /Parser/rules/"expression"/ID[3]
> 
> (to reffer the third ID of the parser rule named 
> "expression"). Although I
> would prefer '.' instead of '/' (more readable, to me).

I don't like the idea of ID[3] because it makes the whole thing fragile when
the expression rule is changed.  In fact I don't mind specifying the grammar
fragment, provided that the grammar fragment is used to match the subrule to
be modified and not specifying or modifying the grammar itself!  Grammar
modification has its place but should be separated from actions.  So
something like:

xxxParser.rules.expression: alternative("switch" expr st:statement)
{st.doSomethingInterestingHere();}

Note the ability to add labels and then use them.  Those would have to be
coalesced by an aspect weaver and aliased properly.  Also there is a fair
amount of intelligence in "matching" the grammar fragment to the
alternatives of the grammar.  

The most important thing, I think, is that if the expression rule is changed
such that ("switch" expr statement) is no longer  there, then the weaver can
complain instead of blindly overwriting as the current subclassing does, and
instead of getting confused by numerical indices into the rule.
 
> I need to think more on this; what do you think? Any feedback 
> from you will
> help me a lot.

This is fun.  How smart if your preprocessor?  Could it be extended to
handle the notation I described?

Monty
www.codetransform.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Mon Jun 17 12:36:51 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Aspects and ANTLR (was: Re: nice threads)
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B49FA@memail03.bco-home.com>
Message-ID: <aeldoj+bvjo@eGroups.com>

--- In antlr-interest@y..., mzukowski@y... wrote:
> When I wrote the GCC translation framework in noweb I interleaved 
the C
> parser, GCC parser, tree parser and code emitter rules together so 
I would
> remember to update them all whenever I changed one.  I think that 
is a very
> beneficial practice whether they are really located together in the 
same
> file or "virtually" through the help of an IDE.

Yay for Literate Programming!  One of these days, someone will write 
a useful tool that corrects the most glaring flaw of LitProg--that 
the pretty output is useful only as a final documentation step.  hee 
hee


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From byeung at etrade.ca  Mon Jun 17 14:23:38 2002
From: byeung at etrade.ca (byeung128)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Questions on parsing data
Message-ID: <aelk0q+mf9q@eGroups.com>

Hi all,

Since I am a beginner in Antlr, I have read the Antlr example 
of "calc.g" and I am writing my first parser program.

The following grammar is trying to group the address information into 
a class "AddressInfo". 

For example, "180 Yonge street West"  
-> AddressInfo.StreetNumber=180
-> AddressInfo.StreetName=Yonge
-> AddressInfo.StreetType=street
-> AddressInfo.StreetDirection=West.

Before grouping the information, I try to print out the data.

The assignments in the AddrTreeWalker (TreeParser) give me the 
compliation error such as "Assignment from token reference only 
allowed in lexer". How can I resolve it ? How can I change the Parser 
rule and TreeParser rules to group the address information into a 
class "AddressInfo" ? Could you give me some hints ?

Thanks in advance for giving me any hint.

Here is the grammar I have written.

class MyParser extends Parser;
options {
  defaultErrorHandler=false;
  buildAST=true ;
}

{
  int i_count = 0 ;
}

startRule: address
   { System.out.println ( "->>>>>ADDRESS:" + 1 ) ; };


address : NUMBER^ STREETNAME streettype (direction)? ;

streettype:  avenue 
          |  street
          ;

avenue: "AVENUE" 
      | "AVENUE."
      | "AVE."
      | "AVE"
      | "AV."
      | "AV"
      ;

street: "STREET"
      | "STR."
      | "STR"
      | "ST."
      | "ST"
      ;

direction: east
         | west
         | south
         | north
         | northwest
         | southwest
         | northeast
         | southeast
         ;

east: "EAST"
    | "E."
    | "E"
    ;

west: "WEST"
    | "W."
    | "W"
    ;

north: "NORTH"
     | "N."
     | "N"
     ;

south: "SOUTH"
     | "S."
     | "S"
     ;
     
northwest: "NORTHWEST"
         | "NW."
         | "NW"
         ;

northeast: "NORTHEAST"
         | "NE."
         | "NE"
         ;

southwest: "SOUTHWEST"
         | "SW."
         | "SW"
         ;
   
southeast: "SOUTHEAST"
         | "SE."
         | "SE"
         ;

class MyLexer extends Lexer;
options {
  charVocabulary = '\3'..'\377' ;
  testLiterals=false ;
  k = 2 ;
}

{
  int i_STREETNAMECount = 0;
  int i_DICount = 0;
  int i_WSCount = 0;
}

WS : ( ' ' | '\t' | '\n' | '\r' ) 
     { $setType(Token.SKIP) ; } ;

STREETNAME  
  options { testLiterals = true ; } 
: ( 'a'..'z' | 'A'..'Z' )+ 
  { System.out.println ( "CSTREETNAME:" + $getText ) ; 
    // System.out.println ( "STREETNAME:" + (++i_STREETNAMECount) ); 
  } ;

NUMBER: ( '0'..'9' )+ 
     { System.out.println ( "CNUMBER:" + $getText ) ; 
       // System.out.println ( "NUMBER:" + (++i_DICount) ); 
     } ;


class AddrTreeWalker extends TreeParser;

myexpr returns [ String r ] 
{
   String a, b, c, d, e;
}
   : #(a=NUMBER b=STREETNAME c=streettype d=direction) 
     { System.out.println(  " a=" + a  +
                            ",b=" + b  +
                            ",c=" + c  +
                            ",d=" + d  ) ;
     }
   ;
                            



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Mon Jun 17 17:46:59 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Lexer States, HTML and <SCRIPT> tag
In-Reply-To: <aeipni+867v@eGroups.com>
Message-ID: <E59D0DD2-8254-11D6-BA8C-0030653DE0D6@jguru.com>

[I can't send to hotmail anymore...it consistently refuses connection 
now...be advised any hotmailers that email me directly....]

On Sunday, June 16, 2002, at 12:42  PM, johnclarke72 wrote:

> I have a lexer that starts in a state where it only identifies text.
> When is sees a < it changes state so that it processes Tags.  This is
> OK until you reach the SCRIPT tag.  This tag can have attributes and
> code between the begin and end tags.  eg :
>
> <script>
>    var cimage;
>    cImage = new Image;
> </script>
>
> Basically I need it to keep the text between the begin and end script
> tags.
>
> How can I do this ?  I would be grateful for all advice offered.

I think an easier way to solve your problem is to have one lexer that 
looks for <script> .* </script> with a nongreedy k=9 loop.  Switching 
makes thing more complicated.  If you think you have a bug though (per 
your direct mail to me) I'd be interested in seeing a very small example 
still.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Mon Jun 17 18:02:04 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Updated version of C# codegen 2.7.2a2 now on ANTLR site
Message-ID: <aem0qc+jtn7@eGroups.com>

ChangeLog
---------

 - general bug-fixes particularly to the OctalToUnicode() routine - 
uncovered during my recent Unicode adventures ;-)

 - added support for C# namespaces (hoping to support GenHashLines 
option in a later release)

 - incorporated CaseSensitiveLiterals changes posted to the list by 
DINURP as well as the StreamReader/TextReader changes
  [ Many thanks and keep 'em coming. ]

 - ported Scott Ellis's _saveindex create-on-demand optimizations to 
stop thse annoying warnings.
  [ Many thanks. ]

 - revamped the C# runtime notes in the HTML file in the 'doc' 
directory


Now that you know, go and try the C# codegen and post any issues, 
feature requests, bugs and patches to the list please. 

Enjoy!

Micheal




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Tue Jun 18 00:17:02 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Re: Modification of Node Attributes using Tree Grammar
In-Reply-To: <20020617123610.C266@cs.utwente.nl>
Message-ID: <aemmpf+9rrd@eGroups.com>

--- In antlr-interest@y..., Ric Klaren <klaren@c...> wrote:
> On Fri, Jun 14, 2002 at 09:03:18PM -0000, lgcraymer wrote:
> > I've fixed the AST bugs in the Java version--the original 
> > implementation specifies variables as being of class CommonAST or 
> > <specialAST> or whatever; if your declare them as "AST" (generic) 
and 
> > fix the typecasting, you can avoid the type coercion problems (you
> > don't have to read the code; the compiler complains and the
> > corrections are pretty obvious).
> 
> Sounds great =)
> 
> > I haven't looked at the C++ implementation, but I assume that 
you've got
> > something equivalent to the AST interface (the code generator 
needs only
> > generic AST functionality except for AST creation).  There are 
also a
> > couple of bugs in the tree generation which I had to fix.  
> 
> Well C++ output is complicated by the reference counting class. I've 
toyed
> around with it several times when I started to work on antlr. Yet II
> couldn't solve things in a nice way at that time. Basically I'd like 
to
> scrap most of the current runtime as soon as 2.7.2 is released.

I've got an idea for restructuring the AST generation code--basically, 
build a vector of tree construction commands and then interpret the 
commands for code generation--that would do away with much of the 
gratuitous gc in the current implementation.  Unfortunately, that 
requires disallowing manual AST construction in actions (at least when 
mixed with automatic construction) which is not an option for 
2.x--mixed construction is pretty much standard practice for 2.x.

If Ter gets the output grammar stuff worked out, it should be easy to 
rewrite the ANTLR code generating backend (XXXCodeGenerator.XXX) for 
3.0; he's also talking about splitting out the library support code in 
a cleaner manner.  It probably makes more sense to figure out a 
redesign for the ANTLR backend for 3.0 rather than further rebuilds of 
2.x.  Got any good ideas?  It would be good if 3.0 did not require 3-4 
KLOC for a retargeting.  (I'd like to have OCaml as a target.)

> 
> > My version of ANTLR uses heterogeneous ASTs to generate tree 
grammars, so I
> > had to make that work.  I'll be able to make my extensions (and 
bug fixes)
> > available Real Soon Now--mostly the delay is that I haven't had 
time to
> > take the last few steps in the release process.
> 
> I'm looking forward to your work :)

I'm looking forward to having it released--it feels awkward to discuss 
work that I haven't yet made generally available.

--Loring

> 
> Ric
> -- 
> 
-----+++++*****************************************************+++++++
++-------
>     ---- Ric Klaren ----- klaren@c... ----- +31 53 4893722  ----
> 
-----+++++*****************************************************+++++++
++-------
> Wit is cultured insolence. --- Aristotle


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Trey.Spiva at embarcadero.com  Tue Jun 18 09:16:23 2002
From: Trey.Spiva at embarcadero.com (Trey Spiva)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Why is this nondeterminism
Message-ID: <6791D870658F174FB863E2FA890000A37DCD81@abyss4.advancedsw.com>

I am receiving the errors:

warning: nondeterminism upon
k==1:LPAREN
k==2:IDENT
k==3:IDENT,RPAREN,"as"
between alts 1 and 2 of block

for the following rules.  Can any one give me an idea of
why the rules are nodeterministic.

eventStatement
   : "event" IDENT ( LPAREN eventArgListDef RPAREN )?
   ;

protected 
eventArgListDef
  : argumentModifiers IDENT ( "as"  type )?
  ;

argumentModifiers
  :  ( argumentModifier )*
    {#argumentModifiers = #(#[MODIFIERS,"MODIFIERS"], #argumentModifiers);}
  ;

protected 
argumentModifier
   : "optional"
   | "byval" 
   | "byref"      
   ;

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Jun 18 09:27:09 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Why is this nondeterminism
Message-ID: <170826586F3BD511910D0200C110AAA8032B4A06@memail03.bco-home.com>

Something is probably calling eventStatement somehow?  Also what is the type
rule?

Consider this input:

EVENT IDENT LPAREN IDENT RPAREN

it's having a tough time knowing if LPAREN IDENT RPAREN should match the
optional part of eventStatement or something that follows from something
calling eventStatement.  By default it will match in eventStatement.  If
that is the desired behavior then you can turn the warning off with an
option.  This is similar to the if/else problem which there must be a FAQ
for...

Monty

> -----Original Message-----
> From: Trey Spiva [mailto:Trey.Spiva@embarcadero.com]
> Sent: Tuesday, June 18, 2002 9:16 AM
> To: 'antlr-interest@yahoogroups.com'
> Subject: [antlr-interest] Why is this nondeterminism
> 
> 
> I am receiving the errors:
> 
> warning: nondeterminism upon
> k==1:LPAREN
> k==2:IDENT
> k==3:IDENT,RPAREN,"as"
> between alts 1 and 2 of block
> 
> for the following rules.  Can any one give me an idea of
> why the rules are nodeterministic.
> 
> eventStatement
>    : "event" IDENT ( LPAREN eventArgListDef RPAREN )?
>    ;
> 
> protected 
> eventArgListDef
>   : argumentModifiers IDENT ( "as"  type )?
>   ;
> 
> argumentModifiers
>   :  ( argumentModifier )*
>     {#argumentModifiers = #(#[MODIFIERS,"MODIFIERS"], 
> #argumentModifiers);}
>   ;
> 
> protected 
> argumentModifier
>    : "optional"
>    | "byval" 
>    | "byref"      
>    ;
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Jun 18 09:29:13 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] aspectANTLR sketch
Message-ID: <170826586F3BD511910D0200C110AAA8032B4A07@memail03.bco-home.com>

Pointcuts for inserting actions:
	rules
		initialization
		specific alternatives
		finalization
		exception handling
		tree construction
		options?
	grammar
		header (includes variables and methods)
		options
extesions:
	tokens:
		regular tokens
		literal table
		tree node tokens (so called imaginary tokens)
	rules:
		adding alternatives

It seems like some concept of a grammar namespace would be appropriate if we
are serious about composing a grammar from multiple rule sets.  Likewise
token management could improve through composition.

Proof of concept for some of this should be possible through a preprocessor.
I would write:

1. an antlr parser that parses .g files without actions (and without grammar
subclassing for simplicity)
2. an aspectANTLR parser and weaver that would parse some sort of aspect
syntax for recognizing the above pointcuts and would generate a .g file with
actions for input to ANTLR.  It would also allow an extension syntax similar
to Metamorphic Syntactic Macros to extend the grammar, but wouldn't have any
fancy analysis.

It wouldn't have any hooks for the code generation stuff, but would at least
be a proof of concept for handling actions and extensions for grammars.  It
would be nice for refactoring the GCC grammar too.  

Anything I'm forgetting?

Monty

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Trey.Spiva at embarcadero.com  Tue Jun 18 09:35:53 2002
From: Trey.Spiva at embarcadero.com (Trey Spiva)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Why is this nondeterminism
Message-ID: <6791D870658F174FB863E2FA890000A37DCD82@abyss4.advancedsw.com>

> Something is probably calling eventStatement somehow?  Also what is the
> type
> rule?

type
  : name
  | builtInType
  ;

builtInType
  : "boolean"
  | "integer"
  | "double"
  | "byte"
  | "long"
  | "single"
  | "currency"
  | "decimal"
  | "date"
  | "string"
  | "variant"
  | "object"
  ;

protected 
name
  : IDENT (subScript)? (options {greedy=true;} : DOT^ IDENT (subScript)? )* 
  ;

protected 
subScript
  :  LPAREN (subScriptElement (COMMA subScriptElement)* )? RPAREN
  ;
 
subScriptElement
    : NUM_INT ("to" NUM_INT)?
    ;

> Consider this input:
> 
> EVENT IDENT LPAREN IDENT RPAREN
> 
> it's having a tough time knowing if LPAREN IDENT RPAREN should match the
> optional part of eventStatement or something that follows from something
> calling eventStatement.  By default it will match in eventStatement.  If
> that is the desired behavior then you can turn the warning off with an
> option.  This is similar to the if/else problem which there must be a FAQ
> for...
> 
> Monty
> 
> > -----Original Message-----
> > From: Trey Spiva [mailto:Trey.Spiva@embarcadero.com]
> > Sent: Tuesday, June 18, 2002 9:16 AM
> > To: 'antlr-interest@yahoogroups.com'
> > Subject: [antlr-interest] Why is this nondeterminism
> >
> >
> > I am receiving the errors:
> >
> > warning: nondeterminism upon
> > k==1:LPAREN
> > k==2:IDENT
> > k==3:IDENT,RPAREN,"as"
> > between alts 1 and 2 of block
> >
> > for the following rules.  Can any one give me an idea of
> > why the rules are nodeterministic.
> >
> > eventStatement
> >    : "event" IDENT ( LPAREN eventArgListDef RPAREN )?
> >    ;
> >
> > protected
> > eventArgListDef
> >   : argumentModifiers IDENT ( "as"  type )?
> >   ;
> >
> > argumentModifiers
> >   :  ( argumentModifier )*
> >     {#argumentModifiers = #(#[MODIFIERS,"MODIFIERS"],
> > #argumentModifiers);}
> >   ;
> >
> > protected
> > argumentModifier
> >    : "optional"
> >    | "byval"
> >    | "byref"
> >    ;
> >
> >
> >
> > Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From alan.franks at verizon.net  Tue Jun 18 09:40:17 2002
From: alan.franks at verizon.net (alanpfranks)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] nesting level problem with Visual C++ 7.0 (Visual Studio .NET)
Message-ID: <aennph+f7i@eGroups.com>

Hi-

I am developing a parser for an XML/SGML variant with a
large number of tag types.  This has resulted in a
deeply nested MyLexer::nextToken() function.  In fact,
the nesting levels are so deep that Visual C++ 7.0
produces the following error:

 c:\dev\MyLexer.cpp(539): fatal error C1061: compiler limit : blocks 
nested too deeply

I'm using Antlr 2.7.1, and generating C++ (obviously).
Anyone have any ideas how I could fix/workaround this,
without massaging the C++ code that Antlr produces?

thanks-
-Alan Franks
-Beckmann Technologies



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Jun 18 09:49:37 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Why is this nondeterminism
Message-ID: <170826586F3BD511910D0200C110AAA8032B4A09@memail03.bco-home.com>

OK, so what rules are calling eventStatement?

> -----Original Message-----
> From: Trey Spiva [mailto:Trey.Spiva@embarcadero.com]
> Sent: Tuesday, June 18, 2002 9:36 AM
> To: 'antlr-interest@yahoogroups.com'
> Subject: RE: [antlr-interest] Why is this nondeterminism
> 
> 
> > Something is probably calling eventStatement somehow?  Also 
> what is the
> > type
> > rule?
> 
> type
>   : name
>   | builtInType
>   ;
> 
> builtInType
>   : "boolean"
>   | "integer"
>   | "double"
>   | "byte"
>   | "long"
>   | "single"
>   | "currency"
>   | "decimal"
>   | "date"
>   | "string"
>   | "variant"
>   | "object"
>   ;
> 
> protected 
> name
>   : IDENT (subScript)? (options {greedy=true;} : DOT^ IDENT 
> (subScript)? )* 
>   ;
> 
> protected 
> subScript
>   :  LPAREN (subScriptElement (COMMA subScriptElement)* )? RPAREN
>   ;
>  
> subScriptElement
>     : NUM_INT ("to" NUM_INT)?
>     ;
> 
> > Consider this input:
> > 
> > EVENT IDENT LPAREN IDENT RPAREN
> > 
> > it's having a tough time knowing if LPAREN IDENT RPAREN 
> should match the
> > optional part of eventStatement or something that follows 
> from something
> > calling eventStatement.  By default it will match in 
> eventStatement.  If
> > that is the desired behavior then you can turn the warning 
> off with an
> > option.  This is similar to the if/else problem which there 
> must be a FAQ
> > for...
> > 
> > Monty
> > 
> > > -----Original Message-----
> > > From: Trey Spiva [mailto:Trey.Spiva@embarcadero.com]
> > > Sent: Tuesday, June 18, 2002 9:16 AM
> > > To: 'antlr-interest@yahoogroups.com'
> > > Subject: [antlr-interest] Why is this nondeterminism
> > >
> > >
> > > I am receiving the errors:
> > >
> > > warning: nondeterminism upon
> > > k==1:LPAREN
> > > k==2:IDENT
> > > k==3:IDENT,RPAREN,"as"
> > > between alts 1 and 2 of block
> > >
> > > for the following rules.  Can any one give me an idea of
> > > why the rules are nodeterministic.
> > >
> > > eventStatement
> > >    : "event" IDENT ( LPAREN eventArgListDef RPAREN )?
> > >    ;
> > >
> > > protected
> > > eventArgListDef
> > >   : argumentModifiers IDENT ( "as"  type )?
> > >   ;
> > >
> > > argumentModifiers
> > >   :  ( argumentModifier )*
> > >     {#argumentModifiers = #(#[MODIFIERS,"MODIFIERS"],
> > > #argumentModifiers);}
> > >   ;
> > >
> > > protected
> > > argumentModifier
> > >    : "optional"
> > >    | "byval"
> > >    | "byref"
> > >    ;
> > >
> > >
> > >
> > > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/
> > 
> > 
> > 
> > 
> > Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Trey.Spiva at embarcadero.com  Tue Jun 18 10:00:17 2002
From: Trey.Spiva at embarcadero.com (Trey Spiva)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Why is this nondeterminism
Message-ID: <6791D870658F174FB863E2FA890000A37DCD83@abyss4.advancedsw.com>

compilationUnit
  : declaration
  ;

declaration!
  : s:modifiers event:eventStatement
  ; 

> -----Original Message-----
> From: mzukowski@yci.com [mailto:mzukowski@yci.com]
> Sent: Tuesday, June 18, 2002 10:50 AM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Why is this nondeterminism
> 
> OK, so what rules are calling eventStatement?
> 
> > -----Original Message-----
> > From: Trey Spiva [mailto:Trey.Spiva@embarcadero.com]
> > Sent: Tuesday, June 18, 2002 9:36 AM
> > To: 'antlr-interest@yahoogroups.com'
> > Subject: RE: [antlr-interest] Why is this nondeterminism
> >
> >
> > > Something is probably calling eventStatement somehow?  Also
> > what is the
> > > type
> > > rule?
> >
> > type
> >   : name
> >   | builtInType
> >   ;
> >
> > builtInType
> >   : "boolean"
> >   | "integer"
> >   | "double"
> >   | "byte"
> >   | "long"
> >   | "single"
> >   | "currency"
> >   | "decimal"
> >   | "date"
> >   | "string"
> >   | "variant"
> >   | "object"
> >   ;
> >
> > protected
> > name
> >   : IDENT (subScript)? (options {greedy=true;} : DOT^ IDENT
> > (subScript)? )*
> >   ;
> >
> > protected
> > subScript
> >   :  LPAREN (subScriptElement (COMMA subScriptElement)* )? RPAREN
> >   ;
> >
> > subScriptElement
> >     : NUM_INT ("to" NUM_INT)?
> >     ;
> >
> > > Consider this input:
> > >
> > > EVENT IDENT LPAREN IDENT RPAREN
> > >
> > > it's having a tough time knowing if LPAREN IDENT RPAREN
> > should match the
> > > optional part of eventStatement or something that follows
> > from something
> > > calling eventStatement.  By default it will match in
> > eventStatement.  If
> > > that is the desired behavior then you can turn the warning
> > off with an
> > > option.  This is similar to the if/else problem which there
> > must be a FAQ
> > > for...
> > >
> > > Monty
> > >
> > > > -----Original Message-----
> > > > From: Trey Spiva [mailto:Trey.Spiva@embarcadero.com]
> > > > Sent: Tuesday, June 18, 2002 9:16 AM
> > > > To: 'antlr-interest@yahoogroups.com'
> > > > Subject: [antlr-interest] Why is this nondeterminism
> > > >
> > > >
> > > > I am receiving the errors:
> > > >
> > > > warning: nondeterminism upon
> > > > k==1:LPAREN
> > > > k==2:IDENT
> > > > k==3:IDENT,RPAREN,"as"
> > > > between alts 1 and 2 of block
> > > >
> > > > for the following rules.  Can any one give me an idea of
> > > > why the rules are nodeterministic.
> > > >
> > > > eventStatement
> > > >    : "event" IDENT ( LPAREN eventArgListDef RPAREN )?
> > > >    ;
> > > >
> > > > protected
> > > > eventArgListDef
> > > >   : argumentModifiers IDENT ( "as"  type )?
> > > >   ;
> > > >
> > > > argumentModifiers
> > > >   :  ( argumentModifier )*
> > > >     {#argumentModifiers = #(#[MODIFIERS,"MODIFIERS"],
> > > > #argumentModifiers);}
> > > >   ;
> > > >
> > > > protected
> > > > argumentModifier
> > > >    : "optional"
> > > >    | "byval"
> > > >    | "byref"
> > > >    ;
> > > >
> > > >
> > > >
> > > > Your use of Yahoo! Groups is subject to
> > > http://docs.yahoo.com/info/terms/
> > >
> > >
> > >
> > >
> > > Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Tue Jun 18 13:18:40 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Re: nesting level problem with Visual C++ 7.0 (Visual Studio .NET)
In-Reply-To: <aennph+f7i@eGroups.com>
Message-ID: <aeo4j0+qjcb@eGroups.com>

Hi Alan,

You could always have your lexer simply return a TAG_NAME token, and 
then use semantic predicates in the parser to differentiate among the 
tag names.

Just a thought.

--- In antlr-interest@y..., "alanpfranks" <alan.franks@v...> wrote:
> Hi-
> 
> I am developing a parser for an XML/SGML variant with a
> large number of tag types.  This has resulted in a
> deeply nested MyLexer::nextToken() function.  In fact,
> the nesting levels are so deep that Visual C++ 7.0
> produces the following error:
> 
>  c:\dev\MyLexer.cpp(539): fatal error C1061: compiler limit : 
blocks 
> nested too deeply
> 
> I'm using Antlr 2.7.1, and generating C++ (obviously).
> Anyone have any ideas how I could fix/workaround this,
> without massaging the C++ code that Antlr produces?
> 
> thanks-
> -Alan Franks
> -Beckmann Technologies


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Wed Jun 19 00:51:12 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] ASCII versus UNICODE
Message-ID: <00ee01c21766$17f1c9a0$54422d3e@daemon>


Hi,

I'm parsing source files containing ASCII characters. 
One of these files contains a special character causing a 
NoViableAltForCharException.

I specified "charVocabulary = '\0'..'\377' " which is the full
ASCII range so there should not be a problem.

When printing the ASCII code for the character I got 8218
which is definitely not within the range of ASCII.

Is it ANTLR which is converting the ASCII character to
UNICODE, or is Java doing that? Is it because I'm using a
Reader class instead of an InputStream?

Any suggestions would be welcome.

Silvain




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Wed Jun 19 01:41:49 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] nesting level problem with Visual C++ 7.0 (Visual Studio .NET)
In-Reply-To: <aennph+f7i@eGroups.com>; from alan.franks@verizon.net on Tue, Jun 18, 2002 at 04:40:17PM -0000
References: <aennph+f7i@eGroups.com>
Message-ID: <20020619104149.I266@cs.utwente.nl>

On Tue, Jun 18, 2002 at 04:40:17PM -0000, alanpfranks wrote:
> I am developing a parser for an XML/SGML variant with a
> large number of tag types.  This has resulted in a
> deeply nested MyLexer::nextToken() function.  In fact,
> the nesting levels are so deep that Visual C++ 7.0
> produces the following error:
> 
>  c:\dev\MyLexer.cpp(539): fatal error C1061: compiler limit : blocks 
> nested too deeply
> 
> I'm using Antlr 2.7.1, and generating C++ (obviously).
> Anyone have any ideas how I could fix/workaround this,
> without massaging the C++ code that Antlr produces?

1) There may be a compiler option?
2) Are you using the literals table e.g. did you put your tags in the
   tokens section and have a rule with testLiterals = true ?
3) You could move some stuff into protected rules that should also reduce a
   bit in depth (I think)

Of course 2 & 3 depend a bit on your grammar and what you are exaclty doing.

HTH

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
Wit is cultured insolence. --- Aristotle


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Wed Jun 19 02:52:49 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Re: aspectANTLR sketch
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4A07@memail03.bco-home.com>
Message-ID: <aepk9h+6p8h@eGroups.com>

Monty--

I have the impression that attribute grammar systems implement 
aspect-oriented programming for language processing systems, and that 
Ter's idea for code generation also also has similarities.  AG systems 
tend to look fairly primitive--more like yacc than ANTLR in terms of 
level of useability--and have a fairly static view of attributes.  
There is room here for building something better for use with ANTLR, 
but the strength of aspects seem to be that they add orthogonal 
("cross-cutting") semantics to the inline semantics of procedural 
programs.  (AGs add semantics to otherwise semantics-free 
specification of syntactic structure.)

What you are suggesting for a proof-of-concept is almost equivalent to 
replacing the body of action statements with m4 macros and then 
running m4 over the generated code, but then adds the idea of implicit 
macros.  (I'm skeptical of the value of the implicit macros:  these 
seem more appropriate to adding orthogonal semantics, and I think that 
the explicit macros at least have the advantage of visual association 
of semantics to syntax.)  Language-independent specification of 
actions would be a *good thing*; is there any reason to go beyond 
this?  What am I missing--can you clarify your goals for adding 
aspects to ANTLR?

--Loring

--- In antlr-interest@y..., mzukowski@y... wrote:
> Pointcuts for inserting actions:
> 	rules
> 		initialization
> 		specific alternatives
> 		finalization
> 		exception handling
> 		tree construction
> 		options?
> 	grammar
> 		header (includes variables and methods)
> 		options
> extesions:
> 	tokens:
> 		regular tokens
> 		literal table
> 		tree node tokens (so called imaginary tokens)
> 	rules:
> 		adding alternatives
> 
> It seems like some concept of a grammar namespace would be 
appropriate if we
> are serious about composing a grammar from multiple rule sets.  
Likewise
> token management could improve through composition.

If you do importing at the level of grammar specification
("import ANTLRLexer.TOKEN_REF") then you run into the version 
problem--what happens when ANTLRLexer.TOKEN_REF is altered in the 
latest version?  I tend to believe that composition is best handled at 
the IDE level, not at a processing level.

> 
> Proof of concept for some of this should be possible through a 
preprocessor.
> I would write:
> 
> 1. an antlr parser that parses .g files without actions (and without 
grammar
> subclassing for simplicity)
> 2. an aspectANTLR parser and weaver that would parse some sort of 
aspect
> syntax for recognizing the above pointcuts and would generate a .g 
file with
> actions for input to ANTLR.  It would also allow an extension syntax 
similar
> to Metamorphic Syntactic Macros to extend the grammar, but wouldn't 
have any
> fancy analysis.
> 
> It wouldn't have any hooks for the code generation stuff, but would 
at least
> be a proof of concept for handling actions and extensions for 
grammars.  It
> would be nice for refactoring the GCC grammar too.  
> 
> Anything I'm forgetting?
> 
> Monty


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bogdan_mt at yahoo.com  Wed Jun 19 03:38:03 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] aspectANTLR sketch
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4A07@memail03.bco-home.com>
Message-ID: <20020619103803.11120.qmail@web14806.mail.yahoo.com>

--- mzukowski@yci.com wrote:
> Pointcuts for inserting actions:
> 	rules
> 		initialization
> 		specific alternatives
> 		finalization
> 		exception handling
> 		tree construction
> 		options?

Yes, options: defaultErrorHandler, paraphrase ...
Not really actions, but in the same line: tailoring the parser for
particular usages, without any changes to the grammar itself.
Also for rules: return type, arguments.

> 	grammar
> 		header (includes variables and methods)

The package and import statements come before the class declaration,
variable and methods after. Unless the tool is very smart (and understands
all languages) I see the need for both a header and a code section for each
grammar.

> 		options
> extesions:
> 	tokens:
> 		regular tokens
> 		literal table
> 		tree node tokens (so called imaginary tokens)
> 	rules:
> 		adding alternatives
>
> It seems like some concept of a grammar namespace would be appropriate if
> we
> are serious about composing a grammar from multiple rule sets.  Likewise
> token management could improve through composition.
> 
> Proof of concept for some of this should be possible through a
> preprocessor.
> I would write:
> 
> 1. an antlr parser that parses .g files without actions (and without
> grammar
> subclassing for simplicity)

A very simple solution (that I used) is to remove actions from antlr.g, set
buildAST to true and replace all (rule)? with:

rule: ....
    | /*nothing*/ { ## = [DUMMY_NODE_<RULE>,"", ##).

so that the parser produces a flat list of tokens (AST, of course) with all
potential insertion points existing (some of them with empty text). Then I
use a tree parser (which is identical to the parser, due to the flat list)
with function calls when potential insertion points are reached. The
functions called would look in a HashMap to see if something is defined for
the current point. If yes, the text of the current AST is set to the value
of the key in the HashMap. Insertion points for which nothing is defined
will remain with empty text, so in the end all I have to do is to print the
AST chain in order.

Bogdan



> 2. an aspectANTLR parser and weaver that would parse some sort of aspect
> syntax for recognizing the above pointcuts and would generate a .g file
> with
> actions for input to ANTLR.  It would also allow an extension syntax
> similar
> to Metamorphic Syntactic Macros to extend the grammar, but wouldn't have
> any
> fancy analysis.
> 
> It wouldn't have any hooks for the code generation stuff, but would at
> least
> be a proof of concept for handling actions and extensions for grammars. 
> It
> would be nice for refactoring the GCC grammar too.  
> 
> Anything I'm forgetting?
> 
> Monty
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 




__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Wed Jun 19 06:28:14 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Bug in column information in lexer?
References: <00ee01c21766$17f1c9a0$54422d3e@daemon>
Message-ID: <004e01c21795$566cebe0$54422d3e@daemon>

Hi,

I'm using a lexer to implement a preprocessor where line and 
column information needs to be tracked.

I've encountered a problem where column information is incorrect.

I analyzed the problem and traced it back to method "rewind" 
in class CharScanner:

    public void rewind(int pos) {
        inputState.input.rewind(pos);
        setColumn(inputState.tokenStartColumn);
    }

Each time the lexer calls rewind, the column is set to an incorrect
value. Without the setColumn() call everything works fine.

Anybody know what this method does and why it changes
column information?

Silvain




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Wed Jun 19 07:02:05 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Re: aspectANTLR sketch
Message-ID: <170826586F3BD511910D0200C110AAA8032B4A10@memail03.bco-home.com>

One goal is to be able to specify cross-cutting behavior without having to
explicitly insert it everywhere.  For instance you can specify an exception
handler for any rule but to do it for all rules is rather tedious.  In the
future this will be available through a hook in the code generator.  But
right now we're talking about my prototype....

Another goal is to explore composition of grammars.  I used this rather
successfully in the noweb source for the GCC translation framework.  In
addition to being able to keep related rules from different grammars in the
same section of the noweb source, I was able to define commonly overridden
methods such as reportError() in one place and use them in many grammars.
I'm pretty happy with the noweb solution for this piece, other than the fact
that it is not a standard part of antlr and is not so easy to install.  I do
have my java noweb tangler, but still I'm interested in exploring what it
might mean to support such a feature in antlr directly.  It would be easier
to make it a standard that way.  I didn't release the GCC translation
framework noweb source because I figured that nobody would want the hassle
of the extra tool layer, learning noweb syntax, probably not having an
editor that could navigate it easily, etc.

I'm also looking for a safer way to subclass a master tree grammar and add
actions for translation projects.  I used that technique successfully in the
AREV to VB translator, but it would have added peace of mind to know that my
"grammar subclasses" were not actually altering the supergrammar.  To
explicitly add macros to the entire master tree grammar seems burdensome to
me, especially when you consider that you would then have to label
everything too.  In fact if I could designate a subclass to be only a
"semantic enhancement" that didn't alter the syntax then I'd be just as
happy.  Antlr's current preprocessing scheme precludes this option.

I think a lot of antlr users don't actually write the grammars they use.
I'd like to see things made a bit easier for them.  

I'll go take a look at attribute grammar systems.  Any favorite references?

Monty

> -----Original Message-----
> From: lgcraymer [mailto:lgc@mail1.jpl.nasa.gov]
> Sent: Wednesday, June 19, 2002 2:53 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: aspectANTLR sketch
> 
> 
> Monty--
> 
> I have the impression that attribute grammar systems implement 
> aspect-oriented programming for language processing systems, and that 
> Ter's idea for code generation also also has similarities.  
> AG systems 
> tend to look fairly primitive--more like yacc than ANTLR in terms of 
> level of useability--and have a fairly static view of attributes.  
> There is room here for building something better for use with ANTLR, 
> but the strength of aspects seem to be that they add orthogonal 
> ("cross-cutting") semantics to the inline semantics of procedural 
> programs.  (AGs add semantics to otherwise semantics-free 
> specification of syntactic structure.)
> 
> What you are suggesting for a proof-of-concept is almost 
> equivalent to 
> replacing the body of action statements with m4 macros and then 
> running m4 over the generated code, but then adds the idea of 
> implicit 
> macros.  (I'm skeptical of the value of the implicit macros:  these 
> seem more appropriate to adding orthogonal semantics, and I 
> think that 
> the explicit macros at least have the advantage of visual association 
> of semantics to syntax.)  Language-independent specification of 
> actions would be a *good thing*; is there any reason to go beyond 
> this?  What am I missing--can you clarify your goals for adding 
> aspects to ANTLR?
> 
> --Loring
> 
> --- In antlr-interest@y..., mzukowski@y... wrote:
> > Pointcuts for inserting actions:
> > 	rules
> > 		initialization
> > 		specific alternatives
> > 		finalization
> > 		exception handling
> > 		tree construction
> > 		options?
> > 	grammar
> > 		header (includes variables and methods)
> > 		options
> > extesions:
> > 	tokens:
> > 		regular tokens
> > 		literal table
> > 		tree node tokens (so called imaginary tokens)
> > 	rules:
> > 		adding alternatives
> > 
> > It seems like some concept of a grammar namespace would be 
> appropriate if we
> > are serious about composing a grammar from multiple rule sets.  
> Likewise
> > token management could improve through composition.
> 
> If you do importing at the level of grammar specification
> ("import ANTLRLexer.TOKEN_REF") then you run into the version 
> problem--what happens when ANTLRLexer.TOKEN_REF is altered in the 
> latest version?  I tend to believe that composition is best 
> handled at 
> the IDE level, not at a processing level.
> 
> > 
> > Proof of concept for some of this should be possible through a 
> preprocessor.
> > I would write:
> > 
> > 1. an antlr parser that parses .g files without actions 
> (and without 
> grammar
> > subclassing for simplicity)
> > 2. an aspectANTLR parser and weaver that would parse some sort of 
> aspect
> > syntax for recognizing the above pointcuts and would generate a .g 
> file with
> > actions for input to ANTLR.  It would also allow an 
> extension syntax 
> similar
> > to Metamorphic Syntactic Macros to extend the grammar, but wouldn't 
> have any
> > fancy analysis.
> > 
> > It wouldn't have any hooks for the code generation stuff, but would 
> at least
> > be a proof of concept for handling actions and extensions for 
> grammars.  It
> > would be nice for refactoring the GCC grammar too.  
> > 
> > Anything I'm forgetting?
> > 
> > Monty
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Wed Jun 19 07:19:57 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Bug in column information in lexer?
In-Reply-To: <004e01c21795$566cebe0$54422d3e@daemon>; from s.piree@enneya.com on Wed, Jun 19, 2002 at 03:28:14PM +0200
References: <00ee01c21766$17f1c9a0$54422d3e@daemon> <004e01c21795$566cebe0$54422d3e@daemon>
Message-ID: <20020619161956.C18134@cs.utwente.nl>

Hi,

On Wed, Jun 19, 2002 at 03:28:14PM +0200, Silvain Piree wrote:
> I'm using a lexer to implement a preprocessor where line and 
> column information needs to be tracked.
> 
> I've encountered a problem where column information is incorrect.
> 
> I analyzed the problem and traced it back to method "rewind" 
> in class CharScanner:
> 
>     public void rewind(int pos) {
>         inputState.input.rewind(pos);
>         setColumn(inputState.tokenStartColumn);
>     }
> 
> Each time the lexer calls rewind, the column is set to an incorrect
> value. Without the setColumn() call everything works fine.
> 
> Anybody know what this method does and why it changes
> column information?

The mark/rewind pair is used for the guessing mode (at the start of a 
( .. ) => guessing mode is entered the spot is 'marked' and at a later
stage the inputstream is rewind to the start position)

C++ mode does not touch the column information in CharScanner.rewind. Also
I did not notice any anomalies with regard to column position. Is this a
Java mode bug?

Try removing the setColumn line. In general the lexer should not touch
line/column info during guessing so resetting should be redundant.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 'And this 'rebooting' business? Give it a good kicking, do you?' 'Oh, no,
  of course, we ... that is ... well, yes, in fact,' said Ponder. 'Adrian
    goes round the back and ... er ... prods it with his foot. But in a
     technical way,' he added. --- From: Hogfather by Terry Pratchett.

From klaren at cs.utwente.nl  Wed Jun 19 07:19:57 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Bug in column information in lexer?
In-Reply-To: <004e01c21795$566cebe0$54422d3e@daemon>; from s.piree@enneya.com on Wed, Jun 19, 2002 at 03:28:14PM +0200
References: <00ee01c21766$17f1c9a0$54422d3e@daemon> <004e01c21795$566cebe0$54422d3e@daemon>
Message-ID: <20020619161956.C18134@cs.utwente.nl>

Hi,

On Wed, Jun 19, 2002 at 03:28:14PM +0200, Silvain Piree wrote:
> I'm using a lexer to implement a preprocessor where line and 
> column information needs to be tracked.
> 
> I've encountered a problem where column information is incorrect.
> 
> I analyzed the problem and traced it back to method "rewind" 
> in class CharScanner:
> 
>     public void rewind(int pos) {
>         inputState.input.rewind(pos);
>         setColumn(inputState.tokenStartColumn);
>     }
> 
> Each time the lexer calls rewind, the column is set to an incorrect
> value. Without the setColumn() call everything works fine.
> 
> Anybody know what this method does and why it changes
> column information?

The mark/rewind pair is used for the guessing mode (at the start of a 
( .. ) => guessing mode is entered the spot is 'marked' and at a later
stage the inputstream is rewind to the start position)

C++ mode does not touch the column information in CharScanner.rewind. Also
I did not notice any anomalies with regard to column position. Is this a
Java mode bug?

Try removing the setColumn line. In general the lexer should not touch
line/column info during guessing so resetting should be redundant.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 'And this 'rebooting' business? Give it a good kicking, do you?' 'Oh, no,
  of course, we ... that is ... well, yes, in fact,' said Ponder. 'Adrian
    goes round the back and ... er ... prods it with his foot. But in a
     technical way,' he added. --- From: Hogfather by Terry Pratchett.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Wed Jun 19 07:30:52 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Bug in column information in lexer?
References: <00ee01c21766$17f1c9a0$54422d3e@daemon> <004e01c21795$566cebe0$54422d3e@daemon> <20020619161956.C18134@cs.utwente.nl>
Message-ID: <006601c2179d$eae4c240$54422d3e@daemon>

Rick,

> Try removing the setColumn line. In general the lexer should
> not touch line/column info during guessing so resetting should 
> be redundant.

I removed the setColumn line, and everything works fine.

I guess this is a bug in the Java version (I'm using 2.7.2a2).

Silvain




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Wed Jun 19 08:08:55 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Bug in column information in lexer?
In-Reply-To: <006601c2179d$eae4c240$54422d3e@daemon>; from s.piree@enneya.com on Wed, Jun 19, 2002 at 04:30:52PM +0200
References: <00ee01c21766$17f1c9a0$54422d3e@daemon> <004e01c21795$566cebe0$54422d3e@daemon> <20020619161956.C18134@cs.utwente.nl> <006601c2179d$eae4c240$54422d3e@daemon>
Message-ID: <20020619170855.D18134@cs.utwente.nl>

On Wed, Jun 19, 2002 at 04:30:52PM +0200, Silvain Piree wrote:
> > Try removing the setColumn line. In general the lexer should
> > not touch line/column info during guessing so resetting should 
> > be redundant.
> 
> I removed the setColumn line, and everything works fine.
> 
> I guess this is a bug in the Java version (I'm using 2.7.2a2).

Now fixed in repository.

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Human beings, who are almost unique in having the ability to learn
   from the experience of others, are also remarkable for their apparent
         disinclination to do so. --- Douglas Adams, Last Chance to See

From klaren at cs.utwente.nl  Wed Jun 19 08:08:55 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Bug in column information in lexer?
In-Reply-To: <006601c2179d$eae4c240$54422d3e@daemon>; from s.piree@enneya.com on Wed, Jun 19, 2002 at 04:30:52PM +0200
References: <00ee01c21766$17f1c9a0$54422d3e@daemon> <004e01c21795$566cebe0$54422d3e@daemon> <20020619161956.C18134@cs.utwente.nl> <006601c2179d$eae4c240$54422d3e@daemon>
Message-ID: <20020619170855.D18134@cs.utwente.nl>

On Wed, Jun 19, 2002 at 04:30:52PM +0200, Silvain Piree wrote:
> > Try removing the setColumn line. In general the lexer should
> > not touch line/column info during guessing so resetting should 
> > be redundant.
> 
> I removed the setColumn line, and everything works fine.
> 
> I guess this is a bug in the Java version (I'm using 2.7.2a2).

Now fixed in repository.

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Human beings, who are almost unique in having the ability to learn
   from the experience of others, are also remarkable for their apparent
         disinclination to do so. --- Douglas Adams, Last Chance to See


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Wed Jun 19 13:35:11 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Re: aspectANTLR sketch
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4A10@memail03.bco-home.com>
Message-ID: <aeqptv+gqtj@eGroups.com>

Monty--

For Attribute Grammar Systems, 
<http://dmoz.org/Computers/Programming/Compilers/Attribute_Grammar_Sys
tems/> lists a useful set to which I would add Phillips Labs Elegant 
system (the home page has temporarily? disappeared; I'll send you 
the Elegant documentation files); a Google search on "Attribute 
Grammars" will get you more.

On composition of grammars:  This is a pretty important 
capability:  lexers for most procedural languages look very similar, 
as do expression parsers.  I agree with Ter that grammar inheritance 
isn't the right approach, but rule inheritance probably would be.  
What you describe for noweb use sounds like a "poor man's" approach to 
rule database management; for 3.0, I expect that we would have the 
resources (people and time) to do something more. I'd like to see a 
flexible rule database manager incorporated into an ANTLR IDE--it 
should be able to add rules into the database by processing .g files.

--Loring  


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnclarke at hotmail.com  Wed Jun 19 14:50:42 2002
From: johnclarke at hotmail.com (johnclarke72)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Protected values and returning values
Message-ID: <aequbi+gde7@eGroups.com>

In my grammar I define a rule called STARTTAGS.  This is defined as :

STARTTAG 
{
    Hashtable tagAttributes = null;
}
  : "<"! TEXTDATA (WS (tagAttributes = ATTRIBUTES)?)?
  ">"!;

The definition for ATTRIBUTES is :

// Definition for Attributes
protected ATTRIBUTES returns [Hashtable a = new Hashtable()]
: ( ATTRIBUTE[a] (WS ATTRIBUTE[a])* )
;

In my parser I can get access to the name of the tag (defined by 
TEXTDATA).  But how can I can get access to the attributes listed in 
tagAttributes ?

I would be grateful for all help offered regarding this.

Thanks

John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Wed Jun 19 15:19:39 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Re: aspectANTLR sketch
Message-ID: <170826586F3BD511910D0200C110AAA8032B4A16@memail03.bco-home.com>

The fnc-2 manual.ps has an attribute grammar tutorial.  The html version
suffered a bit from translation from tex or whatever it was.  

http://www-rocq.inria.fr/oscar/prog/unix/fnc2/eng.htm

Do you see any validity to wanting to override a rule but not change its
syntax?  

Monty

> -----Original Message-----
> From: lgcraymer [mailto:lgc@mail1.jpl.nasa.gov]
> Sent: Wednesday, June 19, 2002 1:35 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: aspectANTLR sketch
> 
> 
> Monty--
> 
> For Attribute Grammar Systems, 
> <http://dmoz.org/Computers/Programming/Compilers/Attribute_Grammar_Sys
> tems/> lists a useful set to which I would add Phillips Labs Elegant 
> system (the home page has temporarily? disappeared; I'll send you 
> the Elegant documentation files); a Google search on "Attribute 
> Grammars" will get you more.
> 
> On composition of grammars:  This is a pretty important 
> capability:  lexers for most procedural languages look very similar, 
> as do expression parsers.  I agree with Ter that grammar inheritance 
> isn't the right approach, but rule inheritance probably would be.  
> What you describe for noweb use sounds like a "poor man's" 
> approach to 
> rule database management; for 3.0, I expect that we would have the 
> resources (people and time) to do something more. I'd like to see a 
> flexible rule database manager incorporated into an ANTLR IDE--it 
> should be able to add rules into the database by processing .g files.
> 
> --Loring  
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Wed Jun 19 15:35:12 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Request enhancement ANTLR
References: <00ee01c21766$17f1c9a0$54422d3e@daemon>
Message-ID: <001b01c217e1$bf00b410$54422d3e@daemon>

Hi,

this is a request for enhancement of ANTLR.

Problem:
ANTLR does not register filename information with tokens;
only line/column information. 

This becomes a problem when using include files in which
case it is unknown which source file a token originates from.

Solution:
Add setFilename/getFilename to Token class and change
other classes (including code generators) to use this method.

The impacted classes are: Token, CommonToken,
CharScanner, LexerSharedInputState, JavaCodeGenerator
and CppCodeGenerator.

I'd be willing to implement these changes if we agree that this
enhancement is usefull.

Kind greetings, Silvain Piree




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From greenj at ix.netcom.com  Thu Jun 20 00:00:29 2002
From: greenj at ix.netcom.com (John Allen Green)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Request enhancement ANTLR
In-Reply-To: <001b01c217e1$bf00b410$54422d3e@daemon>
References: <00ee01c21766$17f1c9a0$54422d3e@daemon>
 <001b01c217e1$bf00b410$54422d3e@daemon>
Message-ID: <418373068.1024563629@localhost>

Silvain,

I've had to implement the same thing by using custom tokens and custom AST.
So that we don't store strings in all the tokens and nodes, I keep an
integer index of filenames, and just store the integer index of that
filename in the tokens and in the AST.

Whether it's useful or not - certainly it would be useful, but I don't know
if that extra little bit of storage can be justified in the default token
class and the default AST class...?

John


--On 20/06/2002 12:35 AM +0200 Silvain Piree wrote:

> Hi,
> 
> this is a request for enhancement of ANTLR.
> 
> Problem:
> ANTLR does not register filename information with tokens;
> only line/column information. 
> 
> This becomes a problem when using include files in which
> case it is unknown which source file a token originates from.
> 
> Solution:
> Add setFilename/getFilename to Token class and change
> other classes (including code generators) to use this method.
> 
> The impacted classes are: Token, CommonToken,
> CharScanner, LexerSharedInputState, JavaCodeGenerator
> and CppCodeGenerator.
> 
> I'd be willing to implement these changes if we agree that this
> enhancement is usefull.
> 
> Kind greetings, Silvain Piree
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
>  



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Thu Jun 20 00:18:40 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Re: aspectANTLR sketch
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4A16@memail03.bco-home.com>
Message-ID: <aervkg+8ljt@eGroups.com>

--- In antlr-interest@y..., mzukowski@y... wrote:
> Do you see any validity to wanting to override a rule but not change 
its
> syntax?  

Monty--

If I interpret your question correctly (future orientation), then 
there are only a few cases that I can think of.  Tree structuring may 
change, especially if calling rules are overridden.  Actions may 
change--different languages have different ideas of scoping, and 
symbol table management changes accordingly (in theory, this should be 
abstracted out by the developer; practice and theory don't always 
match).  In line expansion of called rules may be desirable to match 
new semantics attached to a syntactic fragment (A B C has meaning, but 
the encountered phrase is A B foo and foo might begin with a C; 
therefore foo should be expanded inline).  Replacement of calling (or 
called) rules can introduce syntactic ambiguities, making it necessary 
to add a syntactic predicate to a rule.

These cases would most likely arise from either building on a 
less-than-perfect grammar or doing heavy-duty composition which draws 
rules from multiple grammars to write a language processor for a "new" 
language.  Both of these situations would be good candidates for 
refactoring and benefit from an IDE which included refactoring 
support.  [Of course, we would have to figure out what refactoring 
patterns are desirable--iteration to recursion is obvious, as is rule 
expansion, and restructurings which resolve ambiguities would be 
useful; but I can think of others which I have difficulty describing.] 

--Loring
  
> Monty



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Thu Jun 20 00:25:11 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Request enhancement ANTLR
References: <00ee01c21766$17f1c9a0$54422d3e@daemon> <001b01c217e1$bf00b410$54422d3e@daemon> <418373068.1024563629@localhost>
Message-ID: <001101c2182c$43fb3740$54422d3e@daemon>

John,

> I've had to implement the same thing by using custom
>  tokens and custom AST. 

I've considered this and it should work for most situations,
but there is one problem: in case of a syntax error the
parser throws a NoViableAltException where it calls
the getFilename() of the parser which could be different
than the filename for the token:

 throw new NoViableAltException(LT(1), getFilename())

which should be somthing like:

 throw new NoViableAltException(LT(1), LT(1).getFilename())

Did you encounter this problem? Any solution there?
(I guess this is caused by the fact that have 
"defaultErrorHandler=true")

Silvain




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From greenj at ix.netcom.com  Thu Jun 20 01:04:01 2002
From: greenj at ix.netcom.com (John Allen Green)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Request enhancement ANTLR
In-Reply-To: <001101c2182c$43fb3740$54422d3e@daemon>
References: <00ee01c21766$17f1c9a0$54422d3e@daemon>
 <001b01c217e1$bf00b410$54422d3e@daemon> <418373068.1024563629@localhost>
 <001101c2182c$43fb3740$54422d3e@daemon>
Message-ID: <422184849.1024567441@localhost>

Sorry, no, I didn't have to deal with this. My parser is for working with
"good" code - stuff that goes cleanly through the language's compiler. So,
because of that, receiving a syntax error from my parser is rare.

John
www.joanju.com



--On 20/06/2002 9:25 AM +0200 Silvain Piree wrote:

> John,
> 
>> I've had to implement the same thing by using custom
>>  tokens and custom AST. 
> 
> I've considered this and it should work for most situations,
> but there is one problem: in case of a syntax error the
> parser throws a NoViableAltException where it calls
> the getFilename() of the parser which could be different
> than the filename for the token:
> 
>  throw new NoViableAltException(LT(1), getFilename())
> 
> which should be somthing like:
> 
>  throw new NoViableAltException(LT(1), LT(1).getFilename())
> 
> Did you encounter this problem? Any solution there?
> (I guess this is caused by the fact that have 
> "defaultErrorHandler=true")
> 
> Silvain
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
>  



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu Jun 20 07:23:52 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Has anyone done any work on ParseView since ParseView v1.2?
Message-ID: <aesoho+o2vh@eGroups.com>

Hi All,

I am having a *very* hard time debugging my ANTLR grammar. In order 
to do my PREPROCESSOR things, I created a sub-class of the Lexer 
defined in the *.g gile and did overrode nextToken(). So, I use the 
Lexer subclass with the Parser not the ANTLR generated one. Oh, I 
also use a TokenStreamHiddenFilter in between them.

Problem is, ParseView won't work unless I am using both a ANTLR-
generated Lexer and Parser. Now, Scott mentions that this won't work 
unil he develops some adapters using the Debugger API. Has any one 
developed any such adapters?

Is the Debugger API documented anywhere?. Can anybody offer any 
guidance so that I can write this adapters myself?

Any help appreciated.

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bogdan_mt at yahoo.com  Thu Jun 20 08:10:45 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Has anyone done any work on ParseView since ParseView v1.2?
In-Reply-To: <aesoho+o2vh@eGroups.com>
Message-ID: <20020620151045.96522.qmail@web14807.mail.yahoo.com>


--- micheal_jor <open.zone@virgin.net> wrote:
> Hi All,
> 
> I am having a *very* hard time debugging my ANTLR grammar. In order 
> to do my PREPROCESSOR things, I created a sub-class of the Lexer 
> defined in the *.g gile and did overrode nextToken(). So, I use the 
> Lexer subclass with the Parser not the ANTLR generated one. Oh, I 
> also use a TokenStreamHiddenFilter in between them.

Would it help you to feed the lexer with some text and visualize the list of
tokens produced, and to feed the parser with a list of tokens and see what
AST is generated by the parser? There is a tool on the Yahoo ANTLR group
that you can use for this purpose.

Bogdan

> Problem is, ParseView won't work unless I am using both a ANTLR-
> generated Lexer and Parser. Now, Scott mentions that this won't work 
> unil he develops some adapters using the Debugger API. Has any one 
> developed any such adapters?
> 
> Is the Debugger API documented anywhere?. Can anybody offer any 
> guidance so that I can write this adapters myself?
> 
> Any help appreciated.
> 
> Micheal
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 


__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From ngormley at hotmail.com  Thu Jun 20 08:34:34 2002
From: ngormley at hotmail.com (Niall Gormley)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Throwing an excption in a Tree Action
Message-ID: <F90smG41t4gjRluCy9200006d70@hotmail.com>

Hi,

I would like to throw an exception in an action as per the grammar below. Is 
it possible to specify that it should throw my InvalidAssignmentException 
exception in the tree grammar?

Thanks Again,
Niall

assignmentExpression
  : #( ASSIGN i:IDENT p:primaryExpression)
    {
      System.out.println("Checking Assignment Statement: "+#i.getText()
                                                 +" "+#p.getText());
      if(#i.getType()!=#p.getType())
      {
        throw new InvalidAssignmentException("Cannot assign"
           + #i.getType() + " to " +  #p.getType());
      }
      else
      {
        System.out.println("Assingment OK");
      }
    }
  ;

_________________________________________________________________
Send and receive Hotmail on your mobile device: http://mobile.msn.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Thu Jun 20 08:37:14 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Throwing an excption in a Tree Action
Message-ID: <170826586F3BD511910D0200C110AAA8032B4A20@memail03.bco-home.com>

No, you currently can't specify specific Exceptions that a rule can throw.
You have to make sure that the exceptions you throw are subclasses of
RecognitionException.

Monty

> -----Original Message-----
> From: Niall Gormley [mailto:ngormley@hotmail.com]
> Sent: Thursday, June 20, 2002 8:35 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Throwing an excption in a Tree Action
> 
> 
> Hi,
> 
> I would like to throw an exception in an action as per the 
> grammar below. Is 
> it possible to specify that it should throw my 
> InvalidAssignmentException 
> exception in the tree grammar?
> 
> Thanks Again,
> Niall
> 
> assignmentExpression
>   : #( ASSIGN i:IDENT p:primaryExpression)
>     {
>       System.out.println("Checking Assignment Statement: 
> "+#i.getText()
>                                                  +" "+#p.getText());
>       if(#i.getType()!=#p.getType())
>       {
>         throw new InvalidAssignmentException("Cannot assign"
>            + #i.getType() + " to " +  #p.getType());
>       }
>       else
>       {
>         System.out.println("Assingment OK");
>       }
>     }
>   ;
> 
> _________________________________________________________________
> Send and receive Hotmail on your mobile device: http://mobile.msn.com
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From ngormley at hotmail.com  Thu Jun 20 09:38:17 2002
From: ngormley at hotmail.com (Niall Gormley)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Throwing an excption in a Tree Action
Message-ID: <F110sYZIN8DRAFl44NM00024ba3@hotmail.com>

Monty,

Thanks.

Another question to for you all to ponder.

I'm doing multiple tree walker manipulations for source to source 
translation.

Has anyone any suggestions for the location of the Symbol Table?

Should it go in a SubClassed TreeParser?

Thanks,
Niall


>From: mzukowski@yci.com
>Reply-To: antlr-interest@yahoogroups.com
>To: antlr-interest@yahoogroups.com
>Subject: RE: [antlr-interest] Throwing an excption in a Tree Action
>Date: Thu, 20 Jun 2002 08:37:14 -0700
>
>No, you currently can't specify specific Exceptions that a rule can throw.
>You have to make sure that the exceptions you throw are subclasses of
>RecognitionException.
>
>Monty
>
> > -----Original Message-----
> > From: Niall Gormley [mailto:ngormley@hotmail.com]
> > Sent: Thursday, June 20, 2002 8:35 AM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Throwing an excption in a Tree Action
> >
> >
> > Hi,
> >
> > I would like to throw an exception in an action as per the
> > grammar below. Is
> > it possible to specify that it should throw my
> > InvalidAssignmentException
> > exception in the tree grammar?
> >
> > Thanks Again,
> > Niall
> >
> > assignmentExpression
> >   : #( ASSIGN i:IDENT p:primaryExpression)
> >     {
> >       System.out.println("Checking Assignment Statement:
> > "+#i.getText()
> >                                                  +" "+#p.getText());
> >       if(#i.getType()!=#p.getType())
> >       {
> >         throw new InvalidAssignmentException("Cannot assign"
> >            + #i.getType() + " to " +  #p.getType());
> >       }
> >       else
> >       {
> >         System.out.println("Assingment OK");
> >       }
> >     }
> >   ;
> >
> > _________________________________________________________________
> > Send and receive Hotmail on your mobile device: http://mobile.msn.com
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to
>http://docs.yahoo.com/info/terms/
>
>
>
>
>Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/


_________________________________________________________________
MSN Photos is the easiest way to share and print your photos: 
http://photos.msn.com/support/worldwide.aspx


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Thu Jun 20 11:50:46 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:53 2004
Subject: [antlr-interest] Throwing an excption in a Tree Action
References: <170826586F3BD511910D0200C110AAA8032B4A20@memail03.bco-home.com>
Message-ID: <3D122406.1A51666@boeing.com>

mzukowski@yci.com wrote:
> 
> No, you currently can't specify specific Exceptions that a rule can throw.
> You have to make sure that the exceptions you throw are subclasses of
> RecognitionException.
> 
> Monty

Or if you don't want antlr to catch it, RunTimeException...

(which is what I do to emulate behaviour of "goto", "gosub" 
and "return".....)

sinan

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu Jun 20 15:11:14 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: Request enhancement ANTLR
In-Reply-To: <001b01c217e1$bf00b410$54422d3e@daemon>
Message-ID: <aetju2+l1qn@eGroups.com>

Hi,

> Problem:
> ANTLR does not register filename information with tokens;
> only line/column information. 
> 
> This becomes a problem when using include files in which
> case it is unknown which source file a token originates from.
> 
> Solution:
> Add setFilename/getFilename to Token class and change
> other classes (including code generators) to use this method.
> 
> The impacted classes are: Token, CommonToken,
> CharScanner, LexerSharedInputState, JavaCodeGenerator
> and CppCodeGenerator.
> 
> I'd be willing to implement these changes if we agree that this
> enhancement is useful.

Care to post the code? And same message to you too John Allen Green. 
It helps if others can try out the changes you propose...

Quick note, is it possible to use a shared string table and just 
store a compact handle in each token?

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Jun 20 17:28:03 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: Request enhancement ANTLR
In-Reply-To: <aetju2+l1qn@eGroups.com>
Message-ID: <BF8A2FD0-84AD-11D6-91D1-0030653DE0D6@jguru.com>


On Thursday, June 20, 2002, at 03:11  PM, micheal_jor wrote:

> Hi,
>
>> Problem:
>> ANTLR does not register filename information with tokens;
>> only line/column information.
>>
>> This becomes a problem when using include files in which
>> case it is unknown which source file a token originates from.
>>
>> Solution:
>> Add setFilename/getFilename to Token class and change
>> other classes (including code generators) to use this method.
>>
>> The impacted classes are: Token, CommonToken,
>> CharScanner, LexerSharedInputState, JavaCodeGenerator
>> and CppCodeGenerator.
>>
>> I'd be willing to implement these changes if we agree that this
>> enhancement is useful.
>
> Care to post the code? And same message to you too John Allen Green.
> It helps if others can try out the changes you propose...
>
> Quick note, is it possible to use a shared string table and just
> store a compact handle in each token?

This should happen by default as the filename will be one string that 
gets pointed to by every token.  I like this concept by the way, but I'm 
nervous about adding 4 bytes to every single token. 'course you can just 
make a subclass of CommonToken and then tell antlr to build those, right?

Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu Jun 20 19:23:14 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] What tool[s] do you use when debugging ANTLR grammars?
Message-ID: <aeu2mi+jr9d@eGroups.com>

Following on from my grammar debugging issues and recent ParseView 
post, I'd like to know what tools others rely on for debugging 
grammars.

I've re-written my grammar many times already due to a number of 
seemingly intractable warnings/errors. I am just about to rewrite 
again but this time I am starting off by designing an heterogenous 
AST structure and working my way back from that to the grammar.

So what tools do you use for grammar debugging and, what tips can you 
offer an ANTLR newbie on grammar creation and debugging?

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu Jun 20 19:27:11 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: Request enhancement ANTLR
In-Reply-To: <BF8A2FD0-84AD-11D6-91D1-0030653DE0D6@jguru.com>
Message-ID: <aeu2tv+ums3@eGroups.com>


> > Quick note, is it possible to use a shared string table and just
> > store a compact handle in each token?
> 
> This should happen by default as the filename will be one string 
that 
> gets pointed to by every token.

Of course. I'm still in brain-drain mode from extended grammar debug 
sessions   ;-)

>  I like this concept by the way, but I'm 
> nervous about adding 4 bytes to every single token. 'course you can 
just 
> make a subclass of CommonToken and then tell antlr to build those, 
right?

Yes. Wouldn't it be nice to have predefined subclasses of CommonToken 
and CommonHiddenStreamToken that do this automagically?

Every little helps....

Micheal




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From glindholm at yahoo.com  Thu Jun 20 21:04:49 2002
From: glindholm at yahoo.com (Greg Lindholm)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] What tool[s] do you use when debugging ANTLR grammars?
In-Reply-To: <aeu2mi+jr9d@eGroups.com>
Message-ID: <20020621040449.78728.qmail@web12404.mail.yahoo.com>

The two things I've found helpful is:

1) In the parser override reportError() so that it prints type (name)
of the token and prints a stack trace. The default reportError() only
prints the text of the token which is often not enough if you have a
bug in your lexer.

{
    // Override default error reporting
    public void reportError(RecognitionException ex) {
        if (ex instanceof NoViableAltException) {
            NoViableAltException e = (NoViableAltException) ex;
            System.err.println(
                 "("+ MyParser._tokenNames[e.token.getType()]+")");
        }
        ex.printStackTrace();
    }
}

2) When things get really tough I build with the "-T" option to print
trace info.

Greg

--- micheal_jor <open.zone@virgin.net> wrote:
> Following on from my grammar debugging issues and recent ParseView 
> post, I'd like to know what tools others rely on for debugging 
> grammars.
> 
> I've re-written my grammar many times already due to a number of 
> seemingly intractable warnings/errors. I am just about to rewrite 
> again but this time I am starting off by designing an heterogenous 
> AST structure and working my way back from that to the grammar.
> 
> So what tools do you use for grammar debugging and, what tips can you
> 
> offer an ANTLR newbie on grammar creation and debugging?
> 
> Micheal
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bob at werken.com  Thu Jun 20 21:41:50 2002
From: bob at werken.com (bob mcwhirter)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] What tool[s] do you use when debugging ANTLR grammars?
In-Reply-To: <aeu2mi+jr9d@eGroups.com>
Message-ID: <Pine.LNX.3.96.1020621003957.15629A-100000@exeter.exeter.org>

> So what tools do you use for grammar debugging and, what tips can you 
> offer an ANTLR newbie on grammar creation and debugging?

This is going to sound pedantic, but...

Learn about recursive-descent parsers.  You'll understand how ANTLR thinks
once you grok r-d parsers.  Then, you can just look at the generated
source, and figure out why ANTLR is zigging when you expected it to zag.

I highly recommend writing at least 1 r-d parser in your life.  It'll give
you an appreciation of exactly how much drudgery you avoid by using ANTLR.

	-bob


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Thu Jun 20 23:03:23 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: What tool[s] do you use when debugging ANTLR grammars?
In-Reply-To: <aeu2mi+jr9d@eGroups.com>
Message-ID: <aeufjb+g9t7@eGroups.com>

Micheal--

If you are writing a new grammar, then "predicates are your friend" is 
good practice for getting past the "Omigod--look at all these 
warnings" stage.  Wherever you have an ambiguity warning that you 
cannot figure out quickly, insert a (syntactic) predicate to 
disambiguate alternatives.  Also, consider inserting semantic 
predicates as "assertions".  Once you get a warning-free antlr pass, 
verify that the generated language processor properly recognizes your 
test input (catch exceptions in the debugger at the point where they 
are thrown).  You may want to have a test version of your language 
processor which produces some sort of text output that can be fed to 
"diff" for regression testing.  Once you get the translator working, 
then go back and refactor on a predicate-by-predicate basis--it's a 
lot easier to clean up ambiguities when you know where to look, and 
having a test suite to run makes it easier to verify correct operation 
after each change.

That approach works for me--ANTLR gives very good visibility for 
testing.  "Debugging" is not a good mindset--it is easy to move 
ambiguities around instead of fixing them.  Cleaning up a working 
grammar to remove syntactic predicates is much easier than getting the 
grammar to work in the first place.

--Loring

--- In antlr-interest@y..., "micheal_jor" <open.zone@v...> wrote:
> Following on from my grammar debugging issues and recent ParseView 
> post, I'd like to know what tools others rely on for debugging 
> grammars.
> 
> I've re-written my grammar many times already due to a number of 
> seemingly intractable warnings/errors. I am just about to rewrite 
> again but this time I am starting off by designing an heterogenous 
> AST structure and working my way back from that to the grammar.
> 
> So what tools do you use for grammar debugging and, what tips can 
you 
> offer an ANTLR newbie on grammar creation and debugging?
> 
> Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From greenj at ix.netcom.com  Thu Jun 20 23:03:17 2002
From: greenj at ix.netcom.com (John Allen Green)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: Request enhancement ANTLR
In-Reply-To: <aetju2+l1qn@eGroups.com>
References: <aetju2+l1qn@eGroups.com>
Message-ID: <501340509.1024646597@localhost>


--On 20/06/2002 10:11 PM +0000 micheal_jor wrote:
>> ANTLR does not register filename information with tokens;
>> only line/column information. 
>> ...
> 
> Care to post the code? And same message to you too John Allen Green. 
> It helps if others can try out the changes you propose...

I haven't proposed any changes, at least not to Antlr. The support that
I've added to my parser for filenames is done without modifying Antlr at
all. (In fact, I'm using one of Ric's development snapshots - completely
unmodified. I've overridden certain parts of the library, of course.)

This is at least the second time this question of filename has come up
though. I'll see if I can do something about posting what I did to get
filename through to the AST. Won't happen right away though, I'm struggling
with cross-compilers at the moment. :-(

> Quick note, is it possible to use a shared string table and just 
> store a compact handle in each token?

Yes, that's what I meant by storing an "integer index" to the filename.

John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From nvseenu at yahoo.com  Thu Jun 20 23:14:31 2002
From: nvseenu at yahoo.com (nvseenu)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] About Flow graphs for programs written in JAVA
Message-ID: <aeug87+5li9@eGroups.com>

Hello Group,
I need your help desparately. I have to do "Test
Coverage Analyzer for JAVA". To do that job first of
all I need to construct "Flow Graph" of the source
program, so that it is helpful for analysis and in
later phases. 
Please give me information how to construct flow
graph for the source code of programs written in JAVA.

My advance thanks to all of you.
Please help me in this regard.
reagards,
nvseenu,
IIT Kanpur,
India.







 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Thu Jun 20 23:30:14 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: Request enhancement ANTLR
References: <BF8A2FD0-84AD-11D6-91D1-0030653DE0D6@jguru.com>
Message-ID: <006801c218ed$1ade0970$54422d3e@daemon>

Terence,

> I like this concept by the way, but I'm nervous about adding
> 4 bytes to every single token. 'course you can just make a 
> subclass of CommonToken and then tell antlr to build those, 
> right?

It is true that you can subclass the CommonToken class, 
but there is one problem: the generated parser uses 
parser.getFilename() when throwing a NoViableAltException.

I have a suggestion to solve this problem:

1. add:
    class Parser {
        public getFilename(Token token) {
            return inputState.filename;
        }
    }

2. change JavaCodeGenerator (and CppCodeGenerator) to:

  throw new NoViableAltException(LT(1), getFilename(LT(1)))

3. now everything works the way it did, but I have the
   possiblity the redefine getFilename(Token token) and get
   the filename from my (subclassed) token.

Silvain




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Thu Jun 20 23:51:03 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Can someone please explain
References: <BF8A2FD0-84AD-11D6-91D1-0030653DE0D6@jguru.com> <006801c218ed$1ade0970$54422d3e@daemon>
Message-ID: <00a901c218f1$849bc060$54422d3e@daemon>


Hi,

I'm getting nondeterminism warnings on my grammar but
I don't understand why.

Following rule does not cause a problem when using k=5:

rule:    A B C D E       |     A B C D F   ;

But, when I make the B optional then I get a nondeterminism
warning regardless of lookahead 'k':

rule:    A (B)? C D E       |     A (B)? C D F   ;

Any suggestions would be much appreciated,

Silvain




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bals1978 at hotmail.com  Fri Jun 21 00:12:42 2002
From: bals1978 at hotmail.com (Balvinder Singh)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Can someone please explain
References: <BF8A2FD0-84AD-11D6-91D1-0030653DE0D6@jguru.com> <006801c218ed$1ade0970$54422d3e@daemon> <00a901c218f1$849bc060$54422d3e@daemon>
Message-ID: <OE16VCjqzrEzMXHVM1F000069f0@hotmail.com>

Hi..

 Use syntactic predicate like this

 (A(B)?)=>A(B)?

It will remove the warnings but I'm not sure about run time behaviour...
and not sure if you add some new production, whether i will work or not.

bals



----- Original Message -----
From: "Silvain Piree" <s.piree@enneya.com>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, June 21, 2002 12:21 PM
Subject: [antlr-interest] Can someone please explain


>
> Hi,
>
> I'm getting nondeterminism warnings on my grammar but
> I don't understand why.
>
> Following rule does not cause a problem when using k=5:
>
> rule:    A B C D E       |     A B C D F   ;
>
> But, when I make the B optional then I get a nondeterminism
> warning regardless of lookahead 'k':
>
> rule:    A (B)? C D E       |     A (B)? C D F   ;
>
> Any suggestions would be much appreciated,
>
> Silvain
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bogdan_mt at yahoo.com  Fri Jun 21 00:42:09 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] What tool[s] do you use when debugging ANTLR grammars?
In-Reply-To: <aeu2mi+jr9d@eGroups.com>
Message-ID: <20020621074209.64744.qmail@web14805.mail.yahoo.com>

Hi Micheal,

As Loring pointed out, you should avoid "debugging". I recommand you to
refrain from writing a complete lexer, than a complete parser, and in the
end trying to figure out what is going wrong. Use small steps instead.

For instance, if you want to write a grammar for a Java-like language, you
can start with a lexer and a parser that recognize only imports. Test it
with several examples. Than add rules to recognize classes with empty
bodies. Test it again ... and continue like this until you parse the
complete language. The lexer and the parser will grow step by step, and they
will be valid at any stage.

Using this incremental approach, if you get an error or an ambiguity, you
know for sure where they come from: the new rule you just wrote.

Regards,
Bogdan



--- micheal_jor <open.zone@virgin.net> wrote:
> Following on from my grammar debugging issues and recent ParseView 
> post, I'd like to know what tools others rely on for debugging 
> grammars.
> 
> I've re-written my grammar many times already due to a number of 
> seemingly intractable warnings/errors. I am just about to rewrite 
> again but this time I am starting off by designing an heterogenous 
> AST structure and working my way back from that to the grammar.
> 
> So what tools do you use for grammar debugging and, what tips can you 
> offer an ANTLR newbie on grammar creation and debugging?
> 
> Micheal
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 


__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Fri Jun 21 06:09:20 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Can someone please explain
References: <BF8A2FD0-84AD-11D6-91D1-0030653DE0D6@jguru.com> <006801c218ed$1ade0970$54422d3e@daemon> <00a901c218f1$849bc060$54422d3e@daemon> <OE16VCjqzrEzMXHVM1F000069f0@hotmail.com>
Message-ID: <018701c21924$dbf44110$54422d3e@daemon>

I understand the solution, but I don't understand the problem!

Why is making a token optional in both subrules producing
a conflict that can not be resolved with regular lookahead?

Silvain

>  Use syntactic predicate like this
> 
>  (A(B)?)=>A(B)?
> 
> It will remove the warnings but I'm not sure about run time 
> behaviour... and not sure if you add some new production, 
> whether i will work or not.
>
> > I'm getting nondeterminism warnings on my grammar but
> > I don't understand why.
> >
> > Following rule does not cause a problem when using k=5:
> >
> > rule:    A B C D E       |     A B C D F   ;
> >
> > But, when I make the B optional then I get a nondeterminism
> > warning regardless of lookahead 'k':
> >
> > rule:    A (B)? C D E       |     A (B)? C D F   ;
> >
> > Any suggestions would be much appreciated,
> >
> > Silvain




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bals1978 at hotmail.com  Fri Jun 21 06:37:38 2002
From: bals1978 at hotmail.com (Balvinder Singh)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Can someone please explain
References: <BF8A2FD0-84AD-11D6-91D1-0030653DE0D6@jguru.com> <006801c218ed$1ade0970$54422d3e@daemon> <00a901c218f1$849bc060$54422d3e@daemon> <OE16VCjqzrEzMXHVM1F000069f0@hotmail.com> <018701c21924$dbf44110$54422d3e@daemon>
Message-ID: <OE423l1GM3h3vLgAusV00000b42@hotmail.com>

Hi..

 It might be the case in ur grammar that intersection of First(B) and
First(C) is not null.

bals

----- Original Message -----
From: "Silvain Piree" <s.piree@enneya.com>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, June 21, 2002 6:39 PM
Subject: Re: [antlr-interest] Can someone please explain


> I understand the solution, but I don't understand the problem!
>
> Why is making a token optional in both subrules producing
> a conflict that can not be resolved with regular lookahead?
>
> Silvain
>
> >  Use syntactic predicate like this
> >
> >  (A(B)?)=>A(B)?
> >
> > It will remove the warnings but I'm not sure about run time
> > behaviour... and not sure if you add some new production,
> > whether i will work or not.
> >
> > > I'm getting nondeterminism warnings on my grammar but
> > > I don't understand why.
> > >
> > > Following rule does not cause a problem when using k=5:
> > >
> > > rule:    A B C D E       |     A B C D F   ;
> > >
> > > But, when I make the B optional then I get a nondeterminism
> > > warning regardless of lookahead 'k':
> > >
> > > rule:    A (B)? C D E       |     A (B)? C D F   ;
> > >
> > > Any suggestions would be much appreciated,
> > >
> > > Silvain
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>
>

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Fri Jun 21 06:43:45 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Can someone please explain
References: <BF8A2FD0-84AD-11D6-91D1-0030653DE0D6@jguru.com> <006801c218ed$1ade0970$54422d3e@daemon> <00a901c218f1$849bc060$54422d3e@daemon> <OE16VCjqzrEzMXHVM1F000069f0@hotmail.com> <018701c21924$dbf44110$54422d3e@daemon> <OE423l1GM3h3vLgAusV00000b42@hotmail.com>
Message-ID: <018f01c21929$acae41d0$54422d3e@daemon>

Bals,

do I understand correctly that First(B) means the tokens
that can follow B?

The grammar rule I mentioned is the full grammar!

    rule:    A (B)? C D E       |     A (B)? C D F   ;
    First(B) = 'C'
    First(C) = 'D'
    Intersection = null

Silvain

>  It might be the case in ur grammar that intersection of
> First(B) and First(C) is not null.
>
> > I understand the solution, but I don't understand the problem!
> >
> > Why is making a token optional in both subrules producing
> > a conflict that can not be resolved with regular lookahead?
> >
> > Silvain
> >
> > >  Use syntactic predicate like this
> > >
> > >  (A(B)?)=>A(B)?
> > >
> > > It will remove the warnings but I'm not sure about run time
> > > behaviour... and not sure if you add some new production,
> > > whether i will work or not.
> > >
> > > > I'm getting nondeterminism warnings on my grammar but
> > > > I don't understand why.
> > > >
> > > > Following rule does not cause a problem when using k=5:
> > > >
> > > > rule:    A B C D E       |     A B C D F   ;
> > > >
> > > > But, when I make the B optional then I get a nondeterminism
> > > > warning regardless of lookahead 'k':
> > > >
> > > > rule:    A (B)? C D E       |     A (B)? C D F   ;
> > > >
> > > > Any suggestions would be much appreciated,
> > > >
> > > > Silvain
> >
> >
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/
> >
> >
> >
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Fri Jun 21 06:48:59 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] What tool[s] do you use when debugging ANTLR
	 grammars?
Message-ID: <170826586F3BD511910D0200C110AAA8032B4A2C@memail03.bco-home.com>

You can learn all about how you would do it by hand in Ter's book draft:

http://www.antlr.org/book/byhand.pdf

Monty

> -----Original Message-----
> From: bob mcwhirter [mailto:bob@werken.com]
> Sent: Thursday, June 20, 2002 9:42 PM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] What tool[s] do you use when debugging
> ANTLR grammars?
> 
> 
> > So what tools do you use for grammar debugging and, what 
> tips can you 
> > offer an ANTLR newbie on grammar creation and debugging?
> 
> This is going to sound pedantic, but...
> 
> Learn about recursive-descent parsers.  You'll understand how 
> ANTLR thinks
> once you grok r-d parsers.  Then, you can just look at the generated
> source, and figure out why ANTLR is zigging when you expected 
> it to zag.
> 
> I highly recommend writing at least 1 r-d parser in your 
> life.  It'll give
> you an appreciation of exactly how much drudgery you avoid by 
> using ANTLR.
> 
> 	-bob
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bals1978 at hotmail.com  Fri Jun 21 06:52:09 2002
From: bals1978 at hotmail.com (Balvinder Singh)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Can someone please explain
References: <BF8A2FD0-84AD-11D6-91D1-0030653DE0D6@jguru.com> <006801c218ed$1ade0970$54422d3e@daemon> <00a901c218f1$849bc060$54422d3e@daemon> <OE16VCjqzrEzMXHVM1F000069f0@hotmail.com> <018701c21924$dbf44110$54422d3e@daemon> <OE423l1GM3h3vLgAusV00000b42@hotmail.com> <018f01c21929$acae41d0$54422d3e@daemon>
Message-ID: <OE59PB2EWrO8lxy4DlY00000b11@hotmail.com>

The definition you have produced is for Follow set.

First(B) ( assuming B is Nonterminal)  is the first tokn of all the string
which can be derived from B.


balvinder



----- Original Message -----
From: "Silvain Piree" <s.piree@enneya.com>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, June 21, 2002 7:13 PM
Subject: Re: [antlr-interest] Can someone please explain


> Bals,
>
> do I understand correctly that First(B) means the tokens
> that can follow B?
>
> The grammar rule I mentioned is the full grammar!
>
>     rule:    A (B)? C D E       |     A (B)? C D F   ;
>     First(B) = 'C'
>     First(C) = 'D'
>     Intersection = null
>
> Silvain
>
> >  It might be the case in ur grammar that intersection of
> > First(B) and First(C) is not null.
> >
> > > I understand the solution, but I don't understand the problem!
> > >
> > > Why is making a token optional in both subrules producing
> > > a conflict that can not be resolved with regular lookahead?
> > >
> > > Silvain
> > >
> > > >  Use syntactic predicate like this
> > > >
> > > >  (A(B)?)=>A(B)?
> > > >
> > > > It will remove the warnings but I'm not sure about run time
> > > > behaviour... and not sure if you add some new production,
> > > > whether i will work or not.
> > > >
> > > > > I'm getting nondeterminism warnings on my grammar but
> > > > > I don't understand why.
> > > > >
> > > > > Following rule does not cause a problem when using k=5:
> > > > >
> > > > > rule:    A B C D E       |     A B C D F   ;
> > > > >
> > > > > But, when I make the B optional then I get a nondeterminism
> > > > > warning regardless of lookahead 'k':
> > > > >
> > > > > rule:    A (B)? C D E       |     A (B)? C D F   ;
> > > > >
> > > > > Any suggestions would be much appreciated,
> > > > >
> > > > > Silvain
> > >
> > >
> > >
> > >
> > >
> > >
> > > Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/
> > >
> > >
> > >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/
> >
> >
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bals1978 at hotmail.com  Fri Jun 21 06:57:00 2002
From: bals1978 at hotmail.com (Balvinder Singh)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] About Flow graphs for programs written in JAVA
References: <aeug8j+94c6@eGroups.com>
Message-ID: <OE69wCKg0QonUXOHrDI000198a7@hotmail.com>

See the Muchnick book (Advance compilere design) for this.


----- Original Message -----
From: "nvseenu" <nvseenu@yahoo.com>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, June 21, 2002 11:44 AM
Subject: [antlr-interest] About Flow graphs for programs written in JAVA


> Hello Group,
> I need your help desparately. I have to do "Test
> Coverage Analyzer for JAVA". To do that job first of
> all I need to construct "Flow Graph" of the source
> program, so that it is helpful for analysis and in
> later phases.
> Please give me information how to construct flow
> graph for the source code of programs written in JAVA.
>
> My advance thanks to all of you.
> Please help me in this regard.
> reagards,
> nvseenu,
> IIT Kanpur,
> India.
>
>
>
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Fri Jun 21 07:42:42 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] What tool[s] do you use when debugging ANTLR
	 grammars?
Message-ID: <170826586F3BD511910D0200C110AAA8032B4A2D@memail03.bco-home.com>

You've got some excellent repies so far.  

I would add version control to the iterative process.  I have an RCS call in
my makefile for every time I run antlr.Tool.  I enter a little log message
and am completely safe about restructuring grammars, etc., because I can
always return to a known good state.

I also use the -trace, -traceParser, -traceLexer, and -traceTreeParser (or
is it -traceTreeWalker?  I can't remember)  Here's my trace methods from the
GCC translator, which indent nicely and translate token numbers to names:

<<trace methods>>=
        int traceDepth = 0;
        public void reportError(ParserException ex) {
	  try {
	    System.err.println("ANTLR Parsing Error: "+ex + " token name:" +
tokenNames[LA(1)]);
	    ex.printStackTrace(System.err);
	  }
	  catch (IOException e) {
	      //if we can't print out there's not much else we can do
	  }
        }
        public void reportError(String s) {
	    System.err.println("ANTLR Parsing Error from String: " + s);
        }
        public void reportWarning(String s) {
            System.err.println("ANTLR Parsing Warning from String: " + s);
        }
        public void match(int t) throws MismatchedTokenException {
          boolean debugging = false;
          
          if ( debugging ) {
           for (int x=0; x<traceDepth; x++) System.out.print(" ");
           try {
	    System.out.println("Match("+tokenNames[t]+") with LA(1)="+
		tokenNames[LA(1)] + ((guessing>0)?" [guessing "+ guessing +
"]":""));
    	   }
	   catch (IOException e) {
	       //if we can't print out there's not much else we can do
	   }
    
          }
          try {
	    if ( LA(1)!=t ) {
		if ( debugging ){
		    for (int x=0; x<traceDepth; x++) System.out.print(" ");
		    System.out.println("token mismatch: "+tokenNames[LA(1)]
				+ "!="+tokenNames[t]);
		}
		throw new MismatchedTokenException(tokenNames, LT(1), t,
false);
            } else {
		// mark token as consumed -- fetch next token deferred until
LA/LT
		consume();
            }
	  }
	  catch (IOException e) {
		//if we can't print out there's not much else we can do
	  }
    
        }
        public void traceIn(String rname) {
          traceDepth += 1;
          for (int x=0; x<traceDepth; x++) System.out.print(" ");
          try {
            System.out.println("> "+rname+"; LA(1)==("+
tokenNames[LT(1).getType()] 
		+ ") " + LT(1).getText() + " [guessing "+ guessing + "]");
	  }
	  catch (IOException e) {
	      //if we can't print out there's not much else we can do
	  }
        }
        public void traceOut(String rname) {
          for (int x=0; x<traceDepth; x++) System.out.print(" ");
          try {
            System.out.println("< "+rname+"; LA(1)==("+
tokenNames[LT(1).getType()] 
		+ ") "+LT(1).getText() + " [guessing "+ guessing + "]");
	  }
	  catch (IOException e) {
	      //if we can't print out there's not much else we can do
	  }
          traceDepth -= 1;
        }

I've never tried Loring's approach with the synpreds, but it sounds
promising.  Also get in the habit of reading the generated code.  It's
readable and understandable (except maybe for the tree building stuff) and
will get you to the point where instead of asking "Why doesn't this work?"
you can ask "I wrote this but antlr generates this, why?"

Most of my tips are on www.codetransform.com/tips.html.

Monty


> -----Original Message-----
> From: micheal_jor [mailto:open.zone@virgin.net]
> Sent: Thursday, June 20, 2002 7:23 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] What tool[s] do you use when debugging ANTLR
> grammars?
> 
> 
> Following on from my grammar debugging issues and recent ParseView 
> post, I'd like to know what tools others rely on for debugging 
> grammars.
> 
> I've re-written my grammar many times already due to a number of 
> seemingly intractable warnings/errors. I am just about to rewrite 
> again but this time I am starting off by designing an heterogenous 
> AST structure and working my way back from that to the grammar.
> 
> So what tools do you use for grammar debugging and, what tips can you 
> offer an ANTLR newbie on grammar creation and debugging?
> 
> Micheal
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Fri Jun 21 07:46:42 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Can someone please explain
References: <BF8A2FD0-84AD-11D6-91D1-0030653DE0D6@jguru.com> <006801c218ed$1ade0970$54422d3e@daemon> <00a901c218f1$849bc060$54422d3e@daemon> <OE16VCjqzrEzMXHVM1F000069f0@hotmail.com> <018701c21924$dbf44110$54422d3e@daemon> <OE423l1GM3h3vLgAusV00000b42@hotmail.com> <018f01c21929$acae41d0$54422d3e@daemon> <OE59PB2EWrO8lxy4DlY00000b11@hotmail.com>
Message-ID: <001101c21932$7789bd50$54422d3e@daemon>

But B is not a non-terminal .... it's a terminal (a token).
Silvain

> The definition you have produced is for Follow set.
>
> First(B) ( assuming B is Nonterminal)  is the first tokn of all the string
> which can be derived from B.
> >
> > do I understand correctly that First(B) means the tokens
> > that can follow B?
> >
> > The grammar rule I mentioned is the full grammar!
> >
> >     rule:    A (B)? C D E       |     A (B)? C D F   ;
> >     First(B) = 'C'
> >     First(C) = 'D'
> >     Intersection = null
> >
> > Silvain
> >
> > >  It might be the case in ur grammar that intersection of
> > > First(B) and First(C) is not null.
> > >
> > > > I understand the solution, but I don't understand the problem!
> > > >
> > > > Why is making a token optional in both subrules producing
> > > > a conflict that can not be resolved with regular lookahead?
> > > >
> > > > Silvain
> > > >
> > > > >  Use syntactic predicate like this
> > > > >
> > > > >  (A(B)?)=>A(B)?
> > > > >
> > > > > It will remove the warnings but I'm not sure about run time
> > > > > behaviour... and not sure if you add some new production,
> > > > > whether i will work or not.
> > > > >
> > > > > > I'm getting nondeterminism warnings on my grammar but
> > > > > > I don't understand why.
> > > > > >
> > > > > > Following rule does not cause a problem when using k=5:
> > > > > >
> > > > > > rule:    A B C D E       |     A B C D F   ;
> > > > > >
> > > > > > But, when I make the B optional then I get a nondeterminism
> > > > > > warning regardless of lookahead 'k':
> > > > > >
> > > > > > rule:    A (B)? C D E       |     A (B)? C D F   ;
> > > > > >
> > > > > > Any suggestions would be much appreciated,
> > > > > >
> > > > > > Silvain
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/
> > > >
> > > >
> > > >
> > >
> > >
> > >
> > > Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/
> > >
> > >
> >
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/
> >
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Fri Jun 21 08:07:01 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Can someone please explain
Message-ID: <170826586F3BD511910D0200C110AAA8032B4A2F@memail03.bco-home.com>

The problem is with linear approximate lookahead, I think.  For

A (B)? C D E 

You would think you would get two possibilites:
LA: 1 2 3 4 5
    A B C D E
or  A C D E

So the you would think the test would be (if (LA(1)==A and LA(2)==B and ...)
or (LA(1)=A and LA(2)=C and...).  That would be strict LL, I think.  But
LALL does this:

if (LA(1)==A and (LA(2)==B or LA(2)==C) and (LA(3)==C or LA(3)==D) and ...)

So let's look at the two alternatives:

A (B)? C D E 
LA: 1 2 3 4 5
    A B C D E
or  A C D E

A (B)? C D F
LA: 1 2 3 4 5
    A B C D F
or  A C D F

Now, the empty endings (when B is not there) imply EOF.  So let's look at
what antlr does.

java antlr.Tool test20.g
ANTLR Parser Generator   Version 2.7.2a2 (20020112-1)   1989-2002 jGuru.com
test20.g:4: warning: nondeterminism upon
test20.g:4: 	k==1:A
test20.g:4: 	k==2:B,C
test20.g:4: 	k==3:C,D
test20.g:4: 	k==4:D
test20.g:4: 	k==5:EOF
test20.g:4: 	between alts 1 and 2 of block

See how the or'ing is confusing antlr?  The test for alt 1 is:
if ((LA(1)==A) && (LA(2)==B||LA(2)==C) && (LA(3)==C||LA(3)==D) &&
(LA(4)==D||LA(4)==E) && (LA(5)==EOF||LA(5)==E))

The test for alt 2 is:
if ((LA(1)==A) && (LA(2)==B||LA(2)==C) && (LA(3)==C||LA(3)==D) &&
(LA(4)==D||LA(4)==F) && (LA(5)==EOF||LA(5)==F))

Can you see how this is ambiguous for antlr?  It is intersecting those two
tests and seeing a path through them that is ambigous, though in reality it
is not possible.  This is the drawback of LALL.  Most of the time it works
correctly and is significantly faster.  In fact it will work in this case,
it just mistakenly gives a warning.  The future holds the promise of full LL
and the possibility of antlr automatically recognizing when an ambiguity is
due to LALL and dropping back to LL.

There is also a FAQ on jGuru.com about this somewhere.

Generated source is your friend!

Monty


> -----Original Message-----
> From: Silvain Piree [mailto:s.piree@enneya.com]
> Sent: Friday, June 21, 2002 7:47 AM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] Can someone please explain
> 
> 
> But B is not a non-terminal .... it's a terminal (a token).
> Silvain
> 
> > The definition you have produced is for Follow set.
> >
> > First(B) ( assuming B is Nonterminal)  is the first tokn of 
> all the string
> > which can be derived from B.
> > >
> > > do I understand correctly that First(B) means the tokens
> > > that can follow B?
> > >
> > > The grammar rule I mentioned is the full grammar!
> > >
> > >     rule:    A (B)? C D E       |     A (B)? C D F   ;
> > >     First(B) = 'C'
> > >     First(C) = 'D'
> > >     Intersection = null
> > >
> > > Silvain
> > >
> > > >  It might be the case in ur grammar that intersection of
> > > > First(B) and First(C) is not null.
> > > >
> > > > > I understand the solution, but I don't understand the problem!
> > > > >
> > > > > Why is making a token optional in both subrules producing
> > > > > a conflict that can not be resolved with regular lookahead?
> > > > >
> > > > > Silvain
> > > > >
> > > > > >  Use syntactic predicate like this
> > > > > >
> > > > > >  (A(B)?)=>A(B)?
> > > > > >
> > > > > > It will remove the warnings but I'm not sure about run time
> > > > > > behaviour... and not sure if you add some new production,
> > > > > > whether i will work or not.
> > > > > >
> > > > > > > I'm getting nondeterminism warnings on my grammar but
> > > > > > > I don't understand why.
> > > > > > >
> > > > > > > Following rule does not cause a problem when using k=5:
> > > > > > >
> > > > > > > rule:    A B C D E       |     A B C D F   ;
> > > > > > >
> > > > > > > But, when I make the B optional then I get a 
> nondeterminism
> > > > > > > warning regardless of lookahead 'k':
> > > > > > >
> > > > > > > rule:    A (B)? C D E       |     A (B)? C D F   ;
> > > > > > >
> > > > > > > Any suggestions would be much appreciated,
> > > > > > >
> > > > > > > Silvain
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > > Your use of Yahoo! Groups is subject to
> > > http://docs.yahoo.com/info/terms/
> > > > >
> > > > >
> > > > >
> > > >
> > > >
> > > >
> > > > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/
> > > >
> > > >
> > >
> > >
> > >
> > >
> > >
> > > Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/
> > >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/
>
>



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Fri Jun 21 12:53:52 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Throwing an excption in a Tree Action
Message-ID: <170826586F3BD511910D0200C110AAA8032B4A35@memail03.bco-home.com>

It looks like I am wrong about this.  You can specify other exceptions to
throw with the throws clause:

a throws MyException
  : A
  ;

Monty

> -----Original Message-----
> From: mzukowski@yci.com [mailto:mzukowski@yci.com]
> Sent: Thursday, June 20, 2002 8:37 AM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Throwing an excption in a Tree Action
> 
> 
> No, you currently can't specify specific Exceptions that a 
> rule can throw.
> You have to make sure that the exceptions you throw are subclasses of
> RecognitionException.
> 
> Monty
> 
> > -----Original Message-----
> > From: Niall Gormley [mailto:ngormley@hotmail.com]
> > Sent: Thursday, June 20, 2002 8:35 AM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Throwing an excption in a Tree Action
> > 
> > 
> > Hi,
> > 
> > I would like to throw an exception in an action as per the 
> > grammar below. Is 
> > it possible to specify that it should throw my 
> > InvalidAssignmentException 
> > exception in the tree grammar?
> > 
> > Thanks Again,
> > Niall
> > 
> > assignmentExpression
> >   : #( ASSIGN i:IDENT p:primaryExpression)
> >     {
> >       System.out.println("Checking Assignment Statement: 
> > "+#i.getText()
> >                                                  +" "+#p.getText());
> >       if(#i.getType()!=#p.getType())
> >       {
> >         throw new InvalidAssignmentException("Cannot assign"
> >            + #i.getType() + " to " +  #p.getType());
> >       }
> >       else
> >       {
> >         System.out.println("Assingment OK");
> >       }
> >     }
> >   ;
> > 
> > _________________________________________________________________
> > Send and receive Hotmail on your mobile device: 
http://mobile.msn.com
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From brian-l-smith at uiowa.edu  Fri Jun 21 23:09:59 2002
From: brian-l-smith at uiowa.edu (Brian Smith)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Please make ANTLR check for missing/redefined tokens
Message-ID: <3D1414B7.5000608@uiowa.edu>

I have a parser and a lexer that are in the same file. As long as I 
don't have any errors, everything works great.

But, lately I've been changing my grammar around a lot of and had the 
following problems:

(1) Sometimes my parser will depend on a lexer rule that doesn't exist, 
but ANTLR won't complain. For example, type.g:

     class TypoParser extends Parser;
         classRule: "class" IDENTIFEIR ;

     class TypoLexer extends Lexer;
         IDENTIFIER : ('a'..'z') ;

Notice, in "classRule" I am trying to use token IDENTIFIER but I 
mispelled it. But, when processing the file, ANTLR doesn't catch the 
mistake. I think this is caused by the fact that there seems to be no 
way to tell ANTLR that TypoParser's lexer is TypoLexer. I would welcome 
some mechanism to statically associate a grammar with a lexer, 
especially if it would help static checking and/or optimization.

(2) inconsistent.g:

     class InconsistentParser extends Parser;
         extendsClause: "extends" IDENTIFIER (COMMA IDENTIFIER)* ;
         parameters: "(" IDENTIFIER ("," IDENTIFIER)* ")" ;

     class InconsistentLexer extends Lexer;
         COMMA : "," ;
         IDENTIFIER : ('a'..'z') ;

The problem is that the use of "," in the parameters rule conflicts with 
the COMMA lexer rule. This error took me a long time to find because 
ANTLR doesn't warn about the conflict when processing the grammar file. 
I got this error when attempting to combine two grammars together (one 
was a grammar for a textual notation for UML models, the other was an 
OCL grammar)

Oddly,  if I change the COMMA rule to:

         tokens { COMMA="," }

ANTLR _does_ complain:

      Inconsistent.g:10:25: warning:
          Redefinition of token in tokens {...}: COMMA

It would be nice if ANTLR could extends this analysis to detect rule 
conflicts outside of the "tokens" section in such a case. In fact, I'm 
wondering why there is even a seperate "tokens" in the first place; 
couldn't ANTLR just automatically infer which lexer rules (quoted 
strings with no actions) belong in "tokens" ?

What do you think?

Thanks,
Brian


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Sat Jun 22 00:36:09 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: Please make ANTLR check for missing/redefined tokens
In-Reply-To: <3D1414B7.5000608@uiowa.edu>
Message-ID: <af19d9+ds05@eGroups.com>

Brian--

Try putting the lexer and parser in separate files with the 
"exportVocab" option set in the lexer and "importVocab" option set in 
the parser to refer to the same vocabulary.  Then process the two .g 
files, being careful to process the lexer .g file first to generate 
the <vocab>.txt file.

Does this help?  It should statically associate the parser grammar 
with the lexer.

--Loring


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From v_vivekg at yahoo.com  Sat Jun 22 03:57:02 2002
From: v_vivekg at yahoo.com (v_vivekg)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Basic Lexical Analysis Problem
Message-ID: <af1l5u+d4ue@eGroups.com>

Hello All,

I am new to antlr and having problems with lexical analysis between 
binary,hexdigit and normal digits. The lexer code is

NUMBER	 	:	('0'..'9')+;
UPPER	
options {testLiterals = true;}
			:   ('A'..'Z') ( 'a'..'z' | 'A'..'Z' |'-' | 
'0'..'9' )* 	;

LOWER
options {testLiterals = true;}
		:	('a'..'z') ( 'a'..'z' | 'A'..'Z' |'-' | 
'0'..'9' )*	;
B_STRING 	: 	SINGLE_QUOTE	('0'..'1')*  SINGLE_QUOTE 'B';
H_STRING 	: 	SINGLE_QUOTE	('0'..'9' |'A'..'F'| 
'a'..'f')+  SINGLE_QUOTE 'H' ;

While compiling this grammar errors as below
I have tried various manipulations in this grammar without success.
Also this grammar is not able to differntiate between hex and binary
digits. It gives error for binary digits and works ok for hexdigits.

Kindly help

Regards
Vivek



===============================================================


ANTLR Parser Generator   Version 2.7.2a2 (20020112-1)   1989-2002 
jGuru.com
warning: lexical nondeterminism between rules B_STRING and H_STRING 
upon
       k==1:'\''
       k==2:'0','1'
       k==3:'\'','0','1','B'
       k==4:'\'','0','1','B'
       k==5:<end-of-token>,'\'','0','1','B'
       k==6:<end-of-token>,'\'','0','1','B'
       k==7:<end-of-token>,'\'','0','1','B'
       k==8:<end-of-token>,'\'','0','1','B'
       k==9:<end-of-token>,'\'','0','1','B'
       k==10:<end-of-token>,'\'','0','1','B'
       k==11:<end-of-token>,'\'','0','1','B'
145: warning: lexical nondeterminism upon
145:   k==1:'-'
145:   k==2:'\n','-'
145:   k==3:<end-of-token>
145:   k==4:<end-of-token>
145:   k==5:<end-of-token>
145:   k==6:<end-of-token>
145:   k==7:<end-of-token>
145:   k==8:<end-of-token>
145:   k==9:<end-of-token>
145:   k==10:<end-of-token>
145:   k==11:<end-of-token>
145:   between alt 1 and exit branch of block
155: warning: lexical nondeterminism upon
155:   k==1:'a'..'z'
155:   k==2:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
155:   k==3:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
155:   k==4:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
155:   k==5:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
155:   k==6:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
155:   k==7:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
155:   k==8:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
155:   k==9:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
155:   k==10:<end-of-token>,'"','-','0'..'9','A
'..'Z','a'..'z'
155:   k==11:<end-of-token>,'"','-','0'..'9','A
'..'Z','a'..'z'
155:   between alt 1 and exit branch of block
155: warning: lexical nondeterminism upon
155:   k==1:'A'..'Z'
155:   k==2:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
155:   k==3:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
155:   k==4:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
155:   k==5:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
155:   k==6:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
155:   k==7:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
155:   k==8:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
155:   k==9:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
155:   k==10:<end-of-token>,'"','-','0'..'9','A
'..'Z','a'..'z'
155:   k==11:<end-of-token>,'"','-','0'..'9','A
'..'Z','a'..'z'
155:   between alt 2 and exit branch of block
159: warning: lexical nondeterminism upon
159:   k==1:'a'..'z'
159:   k==2:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
159:   k==3:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
159:   k==4:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
159:   k==5:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
159:   k==6:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
159:   k==7:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
159:   k==8:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
159:   k==9:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
159:   k==10:<end-of-token>,'"','-','0'..'9','A
'..'Z','a'..'z'
159:   k==11:<end-of-token>,'"','-','0'..'9','A
'..'Z','a'..'z'
159:   between alt 1 and exit branch of block
159: warning: lexical nondeterminism upon
159:   k==1:'A'..'Z'
159:   k==2:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
159:   k==3:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
159:   k==4:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
159:   k==5:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
159:   k==6:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
159:   k==7:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
159:   k==8:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
159:   k==9:<end-of-token>,'"','-','0'..'9','A'
..'Z','a'..'z'
159:   k==10:<end-of-token>,'"','-','0'..'9','A
'..'Z','a'..'z'
159:   k==11:<end-of-token>,'"','-','0'..'9','A
'..'Z','a'..'z'

=================================================================









 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From ngormley at hotmail.com  Sat Jun 22 04:45:10 2002
From: ngormley at hotmail.com (Niall Gormley)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Throwing an excption in a Tree Action
Message-ID: <F91bdVJWrGW6Ex3Akwt000004c4@hotmail.com>

Thanks Monty,

I will need this.

Thanks,
Niall


>From: mzukowski@yci.com
>Reply-To: antlr-interest@yahoogroups.com
>To: antlr-interest@yahoogroups.com
>Subject: RE: [antlr-interest] Throwing an excption in a Tree Action
>Date: Fri, 21 Jun 2002 12:53:52 -0700
>
>It looks like I am wrong about this.  You can specify other exceptions to
>throw with the throws clause:
>
>a throws MyException
>   : A
>   ;
>
>Monty
>
> > -----Original Message-----
> > From: mzukowski@yci.com [mailto:mzukowski@yci.com]
> > Sent: Thursday, June 20, 2002 8:37 AM
> > To: antlr-interest@yahoogroups.com
> > Subject: RE: [antlr-interest] Throwing an excption in a Tree Action
> >
> >
> > No, you currently can't specify specific Exceptions that a
> > rule can throw.
> > You have to make sure that the exceptions you throw are subclasses of
> > RecognitionException.
> >
> > Monty
> >
> > > -----Original Message-----
> > > From: Niall Gormley [mailto:ngormley@hotmail.com]
> > > Sent: Thursday, June 20, 2002 8:35 AM
> > > To: antlr-interest@yahoogroups.com
> > > Subject: [antlr-interest] Throwing an excption in a Tree Action
> > >
> > >
> > > Hi,
> > >
> > > I would like to throw an exception in an action as per the
> > > grammar below. Is
> > > it possible to specify that it should throw my
> > > InvalidAssignmentException
> > > exception in the tree grammar?
> > >
> > > Thanks Again,
> > > Niall
> > >
> > > assignmentExpression
> > >   : #( ASSIGN i:IDENT p:primaryExpression)
> > >     {
> > >       System.out.println("Checking Assignment Statement:
> > > "+#i.getText()
> > >                                                  +" "+#p.getText());
> > >       if(#i.getType()!=#p.getType())
> > >       {
> > >         throw new InvalidAssignmentException("Cannot assign"
> > >            + #i.getType() + " to " +  #p.getType());
> > >       }
> > >       else
> > >       {
> > >         System.out.println("Assingment OK");
> > >       }
> > >     }
> > >   ;
> > >
> > > _________________________________________________________________
> > > Send and receive Hotmail on your mobile device:
>http://mobile.msn.com
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to
>http://docs.yahoo.com/info/terms/
>
>
>
>
>Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>
>
>
>Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


_________________________________________________________________
Join the world’s largest e-mail service with MSN Hotmail. 
http://www.hotmail.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnclarke at hotmail.com  Sun Jun 23 14:35:40 2002
From: johnclarke at hotmail.com (johnclarke72)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] URGENT : HTML and SCRIPT tag
Message-ID: <af5evc+m0p@eGroups.com>

At the moment I am still working on a HTML Parser.

Basically I need the current Tag Definitions to work but I also need 
it to process a script tag so that it keeps all of the data (with 
spaces, tabs,etc) between the begin and end tags.  EG :

<script>
  test code
  some lines of code
          some more       lines of code
</script>

The script tag could also contain attributes like any other tag.

I have included my Grammar for the lexer below.  How can I modify 
this grammar so that it can handle the script tag ?

John

// Import the required Classes
header
{
   import java.util.*;
   import antlr.*;
}

// Define the class
class HTMLLexer extends Lexer;

// Set the options for the Lexer
options
{
  k=9;                             // Set the look ahead to 9 
Characters
  caseSensitive = false;           // Set Case Sensitivity to false
  charVocabulary = '\1' .. '\377'; // Set the Lexer Character 
Vocabulary
  testLiterals = false;            // Don't test against the Literals 
table
  exportVocab = HTMLLexer;         // The Grammar to export
}

// Text Data - This is used for Text, Tags and Attributes
TEXTDATA : (~(' ' | '\r' | '\n' | '\t' | '<' | '>' | '/' | '!' | '=' 
| '"' | '\''))+;

// HTML Comments
HTMLCOMMENT : "<!--"! (options {greedy=false;} : .)* "-->"!;

// Document Type Definition
HTMLDTD : "<!doctype"! (options {greedy=false;} : .)* ">"!;

//
// Main HTML Tag Section
//

STARTTAG 
{
    Hashtable tagAttributes = null;
    TagToken returnToken = null;
}
  : "<"! tagName:TEXTDATA (WS (tagAttributes = ATTRIBUTES)?)?
    {
      returnToken = new TagToken(tagName.getText(),tagAttributes);
      $setToken(returnToken);
    }
    (">"!);

// Definition of an End Tag
ENDTAG   : "</"! TEXTDATA ">"!;

// For processing HTML Attributes

// TAGVALUE is used to define attribute values that have quotes
protected TAGVALUE : ('"'!|'\''!) (options {greedy=false;} : ~
('"'|'\''))* ('"'!|'\''!);

// Definition for Attributes
protected ATTRIBUTES returns [Hashtable a = new Hashtable()]
: ( ATTRIBUTE[a] (WS ATTRIBUTE[a])* )
;

protected ATTRIBUTE [Hashtable h]
: key:TEXTDATA { h.put(key.getText(), ""); }
    ( '=' (WS)?
        ( v1: TEXTDATA          { h.put(key.getText(), v1.getText());}
        | v2: TAGVALUE          { h.put(key.getText(), v2.getText());}
        )
    )?
    ;

// Ignore all White Space
WS : ( ' '
     | '\t'
     | '\r' '\n' { newline(); }
     | '\n' { newline(); }
     )
     {$setType(Token.SKIP);} //ignore this token
;



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Mon Jun 24 00:09:27 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Can someone please explain
References: <170826586F3BD511910D0200C110AAA8032B4A2F@memail03.bco-home.com>
Message-ID: <015801c21b4e$24a69090$56412d3e@daemon>

Monty,

> The problem is with linear approximate lookahead, I think.

Thank you for your explanation. I think I understand it now.

> In fact it will work in this case, it just mistakenly gives a 
> warning.  

It would be nice if I could turn off the warning message
(just like with ambiguity warning).

> The future holds the promise of full LL and the possibility of 
> antlr automatically recognizing when an ambiguity is due to 
> LALL and dropping back to LL.

Do you known if anyone is working on this?

Silvain




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bogdan_mt at yahoo.com  Mon Jun 24 01:53:29 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Basic Lexical Analysis Problem
In-Reply-To: <af1l5u+d4ue@eGroups.com>
Message-ID: <20020624085329.10459.qmail@web14809.mail.yahoo.com>


--- v_vivekg <v_vivekg@yahoo.com> wrote:
> Hello All,
> 
> I am new to antlr and having problems with lexical analysis between 
> binary,hexdigit and normal digits. The lexer code is
> 
> NUMBER	 	:	('0'..'9')+;
> UPPER	
> options {testLiterals = true;}
> 			:   ('A'..'Z') ( 'a'..'z' | 'A'..'Z' |'-' | 
> '0'..'9' )* 	;
> 
> LOWER
> options {testLiterals = true;}
> 		:	('a'..'z') ( 'a'..'z' | 'A'..'Z' |'-' | 
> '0'..'9' )*	;
> B_STRING 	: 	SINGLE_QUOTE	('0'..'1')*  SINGLE_QUOTE 'B';
> H_STRING 	: 	SINGLE_QUOTE	('0'..'9' |'A'..'F'| 
> 'a'..'f')+  SINGLE_QUOTE 'H' ;
> 
> While compiling this grammar errors as below
> I have tried various manipulations in this grammar without success.
> Also this grammar is not able to differntiate between hex and binary
> digits. It gives error for binary digits and works ok for hexdigits.

B_STRING sequences are also H_STRING sequences, except for the last char
('B' or 'H'). So the lexer can not decide what rule to apply until it sees
the end of the sequence. Since the sequence length is arbitrary long, it can
not do it with finite lookahead. Trying to increase the k value, as it seems
you did, won't help. You need to use syntactic predicates (see the ANTLR
documentation for details).

Bogdan




When the input is a B-STRING, the lexer 
Rules B_STRING and H_STRING can not be 

> Kindly help
> 
> Regards
> Vivek
> 
> 
> 
> ===============================================================
> 
> 
> ANTLR Parser Generator   Version 2.7.2a2 (20020112-1)   1989-2002 
> jGuru.com
> warning: lexical nondeterminism between rules B_STRING and H_STRING 
> upon
>        k==1:'\''
>        k==2:'0','1'
>        k==3:'\'','0','1','B'
>        k==4:'\'','0','1','B'
>        k==5:<end-of-token>,'\'','0','1','B'
>        k==6:<end-of-token>,'\'','0','1','B'
>        k==7:<end-of-token>,'\'','0','1','B'
>        k==8:<end-of-token>,'\'','0','1','B'
>        k==9:<end-of-token>,'\'','0','1','B'
>        k==10:<end-of-token>,'\'','0','1','B'
>        k==11:<end-of-token>,'\'','0','1','B'
> 145: warning: lexical nondeterminism upon
> 145:   k==1:'-'
> 145:   k==2:'\n','-'
> 145:   k==3:<end-of-token>
> 145:   k==4:<end-of-token>
> 145:   k==5:<end-of-token>
> 145:   k==6:<end-of-token>
> 145:   k==7:<end-of-token>
> 145:   k==8:<end-of-token>
> 145:   k==9:<end-of-token>
> 145:   k==10:<end-of-token>
> 145:   k==11:<end-of-token>
> 145:   between alt 1 and exit branch of block
> 155: warning: lexical nondeterminism upon
> 155:   k==1:'a'..'z'
> 155:   k==2:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 155:   k==3:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 155:   k==4:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 155:   k==5:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 155:   k==6:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 155:   k==7:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 155:   k==8:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 155:   k==9:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 155:   k==10:<end-of-token>,'"','-','0'..'9','A
> '..'Z','a'..'z'
> 155:   k==11:<end-of-token>,'"','-','0'..'9','A
> '..'Z','a'..'z'
> 155:   between alt 1 and exit branch of block
> 155: warning: lexical nondeterminism upon
> 155:   k==1:'A'..'Z'
> 155:   k==2:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 155:   k==3:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 155:   k==4:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 155:   k==5:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 155:   k==6:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 155:   k==7:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 155:   k==8:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 155:   k==9:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 155:   k==10:<end-of-token>,'"','-','0'..'9','A
> '..'Z','a'..'z'
> 155:   k==11:<end-of-token>,'"','-','0'..'9','A
> '..'Z','a'..'z'
> 155:   between alt 2 and exit branch of block
> 159: warning: lexical nondeterminism upon
> 159:   k==1:'a'..'z'
> 159:   k==2:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 159:   k==3:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 159:   k==4:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 159:   k==5:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 159:   k==6:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 159:   k==7:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 159:   k==8:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 159:   k==9:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 159:   k==10:<end-of-token>,'"','-','0'..'9','A
> '..'Z','a'..'z'
> 159:   k==11:<end-of-token>,'"','-','0'..'9','A
> '..'Z','a'..'z'
> 159:   between alt 1 and exit branch of block
> 159: warning: lexical nondeterminism upon
> 159:   k==1:'A'..'Z'
> 159:   k==2:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 159:   k==3:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 159:   k==4:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 159:   k==5:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 159:   k==6:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 159:   k==7:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 159:   k==8:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 159:   k==9:<end-of-token>,'"','-','0'..'9','A'
> ..'Z','a'..'z'
> 159:   k==10:<end-of-token>,'"','-','0'..'9','A
> '..'Z','a'..'z'
> 159:   k==11:<end-of-token>,'"','-','0'..'9','A
> '..'Z','a'..'z'
> 
> =================================================================
> 
> 
> 
> 
> 
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 


__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Gert.Grossmann50 at epost.de  Mon Jun 24 07:26:50 2002
From: Gert.Grossmann50 at epost.de (gertgrossmann)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] amount of reserved keywords
Message-ID: <af7a7a+5akv@eGroups.com>

It is necessary that all literals are reserved keywords?
IMHO this is slightly exaggerated.
Or is there a possibilty to avoid this 'feature'?

regards,
Gert


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From glindholm at yahoo.com  Mon Jun 24 07:50:08 2002
From: glindholm at yahoo.com (Greg Lindholm)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: Please make ANTLR check for missing/redefined tokens
In-Reply-To: <af19d9+ds05@eGroups.com>
Message-ID: <20020624145008.91298.qmail@web12402.mail.yahoo.com>

Ya I sorta have the same issue; I exportVocab from the lexer, and
importVocab in the parser.  As I'm developing the parser I need to
periodically check the ParserTokenTypes for surprises.  (If I mis-type
a token name or forget something in the lexer it shows up in the
ParserTokenTypes as a new token type.)

It would be nice it you could tell Antlr that all the legal tokens are
from the importVocab or the Tokens section and warn me if you find any
others.

Greg

--- lgcraymer <lgc@mail1.jpl.nasa.gov> wrote:
> Brian--
> 
> Try putting the lexer and parser in separate files with the 
> "exportVocab" option set in the lexer and "importVocab" option set in
> 
> the parser to refer to the same vocabulary.  Then process the two .g 
> files, being careful to process the lexer .g file first to generate 
> the <vocab>.txt file.
> 
> Does this help?  It should statically associate the parser grammar 
> with the lexer.
> 
> --Loring


__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Mon Jun 24 08:06:15 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: Please make ANTLR check for missing/redefined tokens
In-Reply-To: <20020624145008.91298.qmail@web12402.mail.yahoo.com>; from glindholm@yahoo.com on Mon, Jun 24, 2002 at 07:50:08AM -0700
References: <af19d9+ds05@eGroups.com> <20020624145008.91298.qmail@web12402.mail.yahoo.com>
Message-ID: <20020624170615.G19719@cs.utwente.nl>

Hi,

The prerelease 2.7.2 versions have warnings for this kindoff thing (most of
them anyway). Maybe it needs a bit more tweaking to appease anyone though.

On Mon, Jun 24, 2002 at 07:50:08AM -0700, Greg Lindholm wrote:
> Ya I sorta have the same issue; I exportVocab from the lexer, and
> importVocab in the parser.  As I'm developing the parser I need to
> periodically check the ParserTokenTypes for surprises.  (If I mis-type
> a token name or forget something in the lexer it shows up in the
> ParserTokenTypes as a new token type.)
> 
> It would be nice it you could tell Antlr that all the legal tokens are
> from the importVocab or the Tokens section and warn me if you find any
> others.

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Innovation makes enemies of all those who prospered under the old
   regime, and only lukewarm support is forthcoming from those who would
               prosper under the new. --- Niccolò Machiavelli


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bogdan_mt at yahoo.com  Mon Jun 24 08:07:26 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] amount of reserved keywords
In-Reply-To: <af7a7a+5akv@eGroups.com>
Message-ID: <20020624150726.72202.qmail@web14803.mail.yahoo.com>

--- gertgrossmann <Gert.Grossmann50@epost.de> wrote:
> It is necessary that all literals are reserved keywords?
> IMHO this is slightly exaggerated.
> Or is there a possibilty to avoid this 'feature'?

Can you be more specific in describing your problem? This will increase your
chance to receive meaningful answers. If you want to write a grammar for a
language where keywords are not reserved, just don't use the option
"testLiterals=true;". You will loose, however, the ability to write "Xxx" in
the parser to denote a keyword; you will receive from the lexer an
identifier, and you will have to check the token's text to decide if in a
given context, it's a keyword or a true identifier.

Alternatively, you can write the lexer as if keywords were reserved
("testLiterals=true;"), and in the parser write a rule 
identifier
    :   IDENTIFIER | "keyword1" | "keyword2" ...
    ;

(Never did it, but should work ;)

Hope this helps,
Bogdan

> regards,
> Gert
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 


__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From pete.forman at westerngeco.com  Mon Jun 24 08:44:05 2002
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: Please make ANTLR check for
  missing/redefined tokens
In-Reply-To: <20020624170615.G19719@cs.utwente.nl>
References: <"from glindholm"@yahoo.com>
 <af19d9+ds05@eGroups.com>
 <20020624145008.91298.qmail@web12402.mail.yahoo.com>
Message-ID: <5.1.0.14.2.20020624163505.043ad410@wgmail2.gatwick.eur.slb.com>

At 2002-06-24 17:06 +0200, Ric Klaren wrote:
>The prerelease 2.7.2 versions have warnings for this kindoff thing (most of
>them anyway). Maybe it needs a bit more tweaking to appease anyone though.

While you're at it can you please fix the error message when the
import vocab file is missing.  I presume the "'null" should be a file
name.

ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
panic: Cannot find importVocab file 'null


I also have a feature request.  Might we have a "-i" command line
option to specify a directory other than the current one to locate
the import vocab file.  This would complement "-o" for those such as
myself who keep source and generated/object files in separate
directories.

-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Mon Jun 24 10:47:52 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Can someone please explain
In-Reply-To: <015801c21b4e$24a69090$56412d3e@daemon>
Message-ID: <81DC31D6-879A-11D6-8AE6-0030653DE0D6@jguru.com>


On Monday, June 24, 2002, at 12:09  AM, Silvain Piree wrote:

> Monty,
>
>> The problem is with linear approximate lookahead, I think.
>
> Thank you for your explanation. I think I understand it now.
>
>> In fact it will work in this case, it just mistakenly gives a
>> warning.
>
> It would be nice if I could turn off the warning message
> (just like with ambiguity warning).
>
>> The future holds the promise of full LL and the possibility of
>> antlr automatically recognizing when an ambiguity is due to
>> LALL and dropping back to LL.
>
> Do you known if anyone is working on this?

Yep, I'm actually rereading my dissertation to remember all the 
problems ;)  Boy, I was smart before I started building web pages ;)  
Now I can't even spell "grammer" ;)  I'm focusing on finding consulting 
work at the moment so I'm not sure when such a thing will happen.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From drm at xilinx.com  Mon Jun 24 16:15:55 2002
From: drm at xilinx.com (Dennis Marsa)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: Request enhancement ANTLR
References: <BF8A2FD0-84AD-11D6-91D1-0030653DE0D6@jguru.com>
Message-ID: <3D17A82B.D3A8EFCD@xilinx.com>

Terence Parr wrote:
> 
> On Thursday, June 20, 2002, at 03:11  PM, micheal_jor wrote:
> 
> > Hi,
> >
> >> Problem:
> >> ANTLR does not register filename information with tokens;
> >> only line/column information.
> >>
> >> This becomes a problem when using include files in which
> >> case it is unknown which source file a token originates from.
> >>
> >> Solution:
> >> Add setFilename/getFilename to Token class and change
> >> other classes (including code generators) to use this method.
> >>
> >> The impacted classes are: Token, CommonToken,
> >> CharScanner, LexerSharedInputState, JavaCodeGenerator
> >> and CppCodeGenerator.
> >>
> >> I'd be willing to implement these changes if we agree that this
> >> enhancement is useful.
> >
> > Care to post the code? And same message to you too John Allen Green.
> > It helps if others can try out the changes you propose...
> >
> > Quick note, is it possible to use a shared string table and just
> > store a compact handle in each token?
> 
> This should happen by default as the filename will be one string that
> gets pointed to by every token.  I like this concept by the way, but I'm
> nervous about adding 4 bytes to every single token. 'course you can just
> make a subclass of CommonToken and then tell antlr to build those, right?
> 
> Ter

Why not implement setFilename/getFilename in class Token exactly like
setText/getText are currently? 

That is, class Token doesn't store the filename itself, but it does define
the interface for setting and getting the filename, with do-nothing default
implementations.

Of course, one would still have to subclass Token to add storage for the
filename, and override setFilename/getFilename to manipulate it.

Dennis

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Mon Jun 24 18:03:16 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: Request enhancement ANTLR
In-Reply-To: <3D17A82B.D3A8EFCD@xilinx.com>
Message-ID: <551C262E-87D7-11D6-ADB6-0030653DE0D6@jguru.com>


On Monday, June 24, 2002, at 04:15  PM, Dennis Marsa wrote:

> Terence Parr wrote:
> Why not implement setFilename/getFilename in class Token exactly like
> setText/getText are currently?
>
> That is, class Token doesn't store the filename itself, but it does 
> define
> the interface for setting and getting the filename, with do-nothing 
> default
> implementations.
>
> Of course, one would still have to subclass Token to add storage for the
> filename, and override setFilename/getFilename to manipulate it.

Makes sense to me...adding to list.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Gert.Grossmann50 at epost.de  Mon Jun 24 22:42:41 2002
From: Gert.Grossmann50 at epost.de (gertgrossmann)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: amount of reserved keywords
In-Reply-To: <20020624150726.72202.qmail@web14803.mail.yahoo.com>
Message-ID: <af8vsh+rvvb@eGroups.com>

What I want to achieve is, that the parser checks the words for me.
For example:

joined_table_spec : "NATURAL" join_type "JOIN" from_table_spec;

declare_statement : "DECLARE" IDENTIFIER
        ( "SCROLL" )? "CURSOR"  "FOR" select_statement;

"NATURAL", "JOIN", ... should be non reserved keywords. After the 
join_type must follow the word "JOIN" and not any IDENDIFIER.
For ANTLR all words "NATURAL", ... are reserved keywords and a 
statement
"declare join cursor for ..." (with 'join' as cursor name) will not 
be accepted, because "JOIN" is a reserved keyword :(

regards,
Gert


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Mon Jun 24 23:42:24 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: Request enhancement ANTLR
References: <551C262E-87D7-11D6-ADB6-0030653DE0D6@jguru.com>
Message-ID: <001c01c21c13$abb69060$56412d3e@daemon>


Ter,

> > Why not implement setFilename/getFilename in class Token 
> > exactly like setText/getText are currently?
> 
> Makes sense to me...adding to list.

That would indeed be the best solution .... with one problem: 
it's not compatible with current implementations.

The problem again is the error message (NoViableAlt) raised
by the parser. The generated parser uses the getFilename()
method of the Parser class to determine the current filename.

When registering the filename with the token, the parser
class would have to get the filename from the token (e.g.
LT(1).getFilename() ). 

But that will only work when getFilename() is implemented
for Token. Otherwise it will fail ....

That's why I suggested to define another getFilename()
method in the Parser class where you pass the current 
token as parameter. Then the implementer can decide
where to get the current filename.

An alternative would be something like:
    
    throw new NoViableAltException(..., 
        LT(1).getFilename() != null? 
            LT(1).getFilename() : getFilename() );

Silvain




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Mon Jun 24 23:52:17 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: amount of reserved keywords
References: <af8vsh+rvvb@eGroups.com>
Message-ID: <003701c21c14$ddcae320$56412d3e@daemon>

> For ANTLR all words "NATURAL", ... are reserved 
> keywords and a statement "declare join cursor for ..." 
> (with 'join' as cursor name) will not be accepted, because 
> "JOIN" is a reserved keyword :(

Yes, that is indeed a problem I encounter myself a lot.

The easiest way to work around this, is to specify an
"identifier" rule, like:

    identifier: IDENTIFIER | keyword ;
    keyword: "NATURAL" | "JOIN" | ...... etc.

It's not ideal but it should work.

It would be nice if ANTLR had something like a "try-again-
as-identifier" construct ..... so this would be solved transparantly.

Silvain

   




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Gert.Grossmann50 at epost.de  Tue Jun 25 01:32:51 2002
From: Gert.Grossmann50 at epost.de (gertgrossmann)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: amount of reserved keywords
In-Reply-To: <003701c21c14$ddcae320$56412d3e@daemon>
Message-ID: <af99rj+cp7o@eGroups.com>

> The easiest way to work around this, is to specify an
> "identifier" rule, like:
> 
>     identifier: IDENTIFIER | keyword ;
>     keyword: "NATURAL" | "JOIN" | ...... etc.
> 

This is not a solution, because with the parser rule 'keyword'
all words "NATURAL", "JOIN", ... becomes reserved keywords :)
A good way would it be, if ANTLR gives the posibility to 
say, "attention, this is a non reserved keyword".


regards,
Gert


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Tue Jun 25 01:39:01 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: amount of reserved keywords
References: <af99rj+cp7o@eGroups.com>
Message-ID: <004601c21c23$c1f4e380$56412d3e@daemon>

> This is not a solution, because with the parser rule 'keyword'
> all words "NATURAL", "JOIN", ... becomes reserved 
> keywords :) A good way would it be, if ANTLR gives the 
> posibility to  say, "attention, this is a non reserved keyword".

The solution works, I've used it often.

Given input:
    
    IF IF THEN

and grammar:

    statement: "if" identifier "then" ;
    identifier: IDENTIFIER | keyword ;
    keyword: "if" | "then" ;

works fine, whereas:

    statement: "if" IDENTIFIER "then" ;

wouldn't work.

Silvain




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tjuergeleit at yahoo.de  Tue Jun 25 02:03:14 2002
From: tjuergeleit at yahoo.de (tjuergeleit)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] [ANN - UPDATE] ANTLR Plugin for Eclipse - New release 0.1.3
Message-ID: <af9bki+ouht@eGroups.com>

New features:
- editor context menu 'Goto Rule'
- action set "ANTLR Navigation" (provides keyboard shortcut F3 for 
action
'Goto Rule')
- resource flag "derived" is set for generated files
- debug support (configurable via ".options" file)

Bugfixes:
- project builder is now added/removed correctly
- missing files (antlr.debug.*) are now are now added to
  'antlrall.jar' (required for compiling ANTLR generated recognizers)

http://sourceforge.net/projects/antlreclipse/

Cheers,
Torsten



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Gert.Grossmann50 at epost.de  Tue Jun 25 02:07:08 2002
From: Gert.Grossmann50 at epost.de (gertgrossmann)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: amount of reserved keywords
In-Reply-To: <004601c21c23$c1f4e380$56412d3e@daemon>
Message-ID: <af9brs+l046@eGroups.com>

uups: you are right 8-)

Gert


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Tue Jun 25 03:15:30 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: Please make ANTLR check for missing/redefined tokens
In-Reply-To: <5.1.0.14.2.20020624163505.043ad410@wgmail2.gatwick.eur.slb.com>; from pete.forman@westerngeco.com on Mon, Jun 24, 2002 at 04:44:05PM +0100
References: <"from <af19d9+ds05@eGroups.com> <20020624145008.91298.qmail@web12402.mail.yahoo.com> <20020624170615.G19719@cs.utwente.nl> <5.1.0.14.2.20020624163505.043ad410@wgmail2.gatwick.eur.slb.com>
Message-ID: <20020625121530.I19719@cs.utwente.nl>

Hi,

On Mon, Jun 24, 2002 at 04:44:05PM +0100, Pete Forman wrote:
> At 2002-06-24 17:06 +0200, Ric Klaren wrote:
> >The prerelease 2.7.2 versions have warnings for this kindoff thing (most of
> >them anyway). Maybe it needs a bit more tweaking to appease anyone though.
> 
> While you're at it can you please fix the error message when the
> import vocab file is missing.  I presume the "'null" should be a file
> name.
> 
> ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
> panic: Cannot find importVocab file 'null

Hmmm I cannot reproduce this in the repository code.. other than the
missing quote at the end of the thing. Could you check if this happens with
the prerelease version? If yes could you send me minimal files/recipe that
reproduce it?

> I also have a feature request.  Might we have a "-i" command line
> option to specify a directory other than the current one to locate
> the import vocab file.  This would complement "-o" for those such as
> myself who keep source and generated/object files in separate
> directories.

It would be handy to have, I had to kludge around this in my project as well.

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     "Never argue with an idiot, for they will bring you down to their
              level and beat you with experience." --- Unknown


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Tue Jun 25 04:38:11 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: Request enhancement ANTLR
In-Reply-To: <001c01c21c13$abb69060$56412d3e@daemon>; from s.piree@enneya.com on Tue, Jun 25, 2002 at 08:42:24AM +0200
References: <551C262E-87D7-11D6-ADB6-0030653DE0D6@jguru.com> <001c01c21c13$abb69060$56412d3e@daemon>
Message-ID: <20020625133810.J19719@cs.utwente.nl>

On Tue, Jun 25, 2002 at 08:42:24AM +0200, Silvain Piree wrote:
> > > Why not implement setFilename/getFilename in class Token 
> > > exactly like setText/getText are currently?
> > 
> > Makes sense to me...adding to list.
> 
> That would indeed be the best solution .... with one problem: 
> it's not compatible with current implementations.
> 
> The problem again is the error message (NoViableAlt) raised
> by the parser. The generated parser uses the getFilename()
> method of the Parser class to determine the current filename.
> 
> When registering the filename with the token, the parser
> class would have to get the filename from the token (e.g.
> LT(1).getFilename() ). 
> 
> But that will only work when getFilename() is implemented
> for Token. Otherwise it will fail ....
> 
> That's why I suggested to define another getFilename()
> method in the Parser class where you pass the current 
> token as parameter. Then the implementer can decide
> where to get the current filename.

I'd go for this last scheme anytime. It offers most possibilities for
customization. 

IMHO Empty place holder methods are evil. (although you sometimes have to
be pragmatic :) )

Btw I'd prefer adding extra things like this as examples and not as default
functionality. If we come to the conclusion though that some extra
interfacing/hooks are necessary to implement this kindoff thing then we
definitely should go for it.

>     throw new NoViableAltException(..., 
>         LT(1).getFilename() != null? 
>             LT(1).getFilename() : getFilename() );

I'd still go for the getFilename( Token t ) solution. It offers more
flexibility.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
              of UCSD Pascal ever released..." --- Larry Smith


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tmoog at polhode.com  Tue Jun 25 05:41:49 2002
From: tmoog at polhode.com (Tom Moog)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Can someone please explain
In-Reply-To: <81DC31D6-879A-11D6-8AE6-0030653DE0D6@jguru.com>
Message-ID: <Pine.BSF.4.21.0206250740140.35883-100000@shell-2.enteract.com>


Well, there's always pccts (aka antlr v1) for C++.
It does full LL(k) when linear lookahead isn't sufficient.


On Mon, 24 Jun 2002, Terence Parr wrote:

> 
> On Monday, June 24, 2002, at 12:09  AM, Silvain Piree wrote:
> 
> > Monty,
> >
> >> The problem is with linear approximate lookahead, I think.
> >
> > Thank you for your explanation. I think I understand it now.
> >
> >> In fact it will work in this case, it just mistakenly gives a
> >> warning.
> >
> > It would be nice if I could turn off the warning message
> > (just like with ambiguity warning).
> >
> >> The future holds the promise of full LL and the possibility of
> >> antlr automatically recognizing when an ambiguity is due to
> >> LALL and dropping back to LL.
> >
> > Do you known if anyone is working on this?
> 
> Yep, I'm actually rereading my dissertation to remember all the 
> problems ;)  Boy, I was smart before I started building web pages ;)  
> Now I can't even spell "grammer" ;)  I'm focusing on finding consulting 
> work at the moment so I'm not sure when such a thing will happen.
> 
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bogdan_mt at yahoo.com  Tue Jun 25 05:57:51 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Can someone please explain
In-Reply-To: <Pine.BSF.4.21.0206250740140.35883-100000@shell-2.enteract.com>
Message-ID: <20020625125751.19564.qmail@web14808.mail.yahoo.com>


--- Tom Moog <tmoog@polhode.com> wrote:
> 
> Well, there's always pccts (aka antlr v1) for C++.
> It does full LL(k) when linear lookahead isn't sufficient.

Just out of curiosity:
What is the difficulty of using full LL(k)? Is it just the space required to
store lookahead sets (trees?)?

Thanks,
Bogdan

> 
> On Mon, 24 Jun 2002, Terence Parr wrote:
> 
> > 
> > On Monday, June 24, 2002, at 12:09  AM, Silvain Piree wrote:
> > 
> > > Monty,
> > >
> > >> The problem is with linear approximate lookahead, I think.
> > >
> > > Thank you for your explanation. I think I understand it now.
> > >
> > >> In fact it will work in this case, it just mistakenly gives a
> > >> warning.
> > >
> > > It would be nice if I could turn off the warning message
> > > (just like with ambiguity warning).
> > >
> > >> The future holds the promise of full LL and the possibility of
> > >> antlr automatically recognizing when an ambiguity is due to
> > >> LALL and dropping back to LL.
> > >
> > > Do you known if anyone is working on this?
> > 
> > Yep, I'm actually rereading my dissertation to remember all the 
> > problems ;)  Boy, I was smart before I started building web pages ;)  
> > Now I can't even spell "grammer" ;)  I'm focusing on finding consulting 
> > work at the moment so I'm not sure when such a thing will happen.
> > 
> > Ter
> > --
> > Co-founder, http://www.jguru.com
> > Creator, ANTLR Parser Generator: http://www.antlr.org
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> > 
> > 
> > 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 


__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Trey.Spiva at embarcadero.com  Tue Jun 25 07:21:17 2002
From: Trey.Spiva at embarcadero.com (Trey Spiva)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] lexical nondeterminism question.
Message-ID: <6791D870658F174FB863E2FA890000A3BDFEF3@abyss4.advancedsw.com>

I need to be able to support the syntax.
 
&h<HEX DIGITS>
&h<HEX DIGITS>&
&o<OCTAL_DIGITS>
&o<OCTAL_DIGITS>&
 
The problem is that I also need to support the string concatenation syntax
 
<STRING> & <STRING>
 
Notice that I need to be able to use the amperstand for hex numbers, octal
numbers and string concatenation.
So, I have tried the following lexer rules.  
 
NUM_INT
options {
   paraphrase = "number";
}
            {boolean isDecimal=false;}
            :           
      ( options { warnWhenFollowAmbig=false; greedy=true; } 
      :
         '.' {_ttype = DOT;} (('0'..'9')+ (EXPONENT)? { _ttype = NUM_FLOAT;
})?
                  |     ('0'..'9') ('0'..'9')*  {isDecimal=true; _ttype =
NUM_INT;}                   // non-zero decimal
                              ( // only check to see if it's a float if
looks like decimal so far
                                 {isDecimal}? ( '.' ('0'..'9')* (EXPONENT)?
{ _ttype = NUM_FLOAT; }
                                              | EXPONENT { _ttype =
NUM_FLOAT; }
                            | '&'     // indicates that the number is of
type Long
                            | // Nothing.  This will be the else part.
                            )
                              )?
          |  ('&' 'h')=>'&' 'h' HEX_INT ('&')?   {_ttype = NUM_INT;}
          |  ('&' 'o')=>'&' 'o' OCTAL_INT ('&')? {_ttype = NUM_INT;}
      )
            ;
 
 
AMPER          :  '&'     ;
 
Understandably I get the following warning
 
warning: lexical nondeterminism between rules NUM_INT and AMPER upon
k==1:'&'
k==2:<end-of-token>
k==3:<end-of-token>
 
I thought that since I have the syntactic predicate before the hex and octal
options that the lexer would correctly map the string concatenation operator
as a AMPER however it is recognizing 
 
<STRING> & <STRING> 
 
as <STRING> NUM_INT <STRING> does any one have any ideas.
 
Trey Spiva
Senior Software Engineer
trey.spiva@embarcadero.com
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20020625/99001b8b/attachment.html
From s.piree at enneya.com  Tue Jun 25 07:32:00 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] lexical nondeterminism question.
References: <6791D870658F174FB863E2FA890000A3BDFEF3@abyss4.advancedsw.com>
Message-ID: <002c01c21c55$11d69a70$56412d3e@daemon>


Trey,

syntactic predicates don't work across tokens ... so you'll
have to merge the lexer rules.

My suggestion would be something like this:

    conflicting_tokens:
        : (NUM_INT_lookahead)=> NUM_INT
                {$setType(NUM_INT);}
        | AMPERSAND 
                {$setType(AMPERSAND);}
        ;

    private NUM_INT : ..... ;
    private NUM_INT_lookahead: .... ;
    private AMPERSAND: ..... ;

Hope that helps a bit, Silvain




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From drm at xilinx.com  Tue Jun 25 07:42:10 2002
From: drm at xilinx.com (Dennis Marsa)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: Request enhancement ANTLR
References: <551C262E-87D7-11D6-ADB6-0030653DE0D6@jguru.com> <001c01c21c13$abb69060$56412d3e@daemon>
Message-ID: <3D188142.2553C67E@xilinx.com>

Silvain Piree wrote:
> 
> Ter,
> 
> > > Why not implement setFilename/getFilename in class Token
> > > exactly like setText/getText are currently?
> >
> > Makes sense to me...adding to list.
> 
> That would indeed be the best solution .... with one problem:
> it's not compatible with current implementations.
> 
> The problem again is the error message (NoViableAlt) raised
> by the parser. The generated parser uses the getFilename()
> method of the Parser class to determine the current filename.
> 
> When registering the filename with the token, the parser
> class would have to get the filename from the token (e.g.
> LT(1).getFilename() ).
> 
> But that will only work when getFilename() is implemented
> for Token. Otherwise it will fail ....
> 
> That's why I suggested to define another getFilename()
> method in the Parser class where you pass the current
> token as parameter. Then the implementer can decide
> where to get the current filename.
> 
> An alternative would be something like:
> 
>     throw new NoViableAltException(...,
>         LT(1).getFilename() != null?
>             LT(1).getFilename() : getFilename() );
> 
> Silvain

The NoViableAltException constructor in question takes two
arguments, a Token and a string (filename).

Since the filename will be available from the Token itself
(via the new getFilename method), why pass the filename
as the second argument at all?  NoViableAltException can
retrieve it from the token on its own.

So, a new single argument NoViableAltException constructor
could be defined that takes just a Token, and gets the
filename from using the new getFilename() method.

Throwing a NoViableAltException would then look like:

   throw NoViableAltException(LT(1));


Dennis

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Tue Jun 25 08:01:00 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: Request enhancement ANTLR
References: <551C262E-87D7-11D6-ADB6-0030653DE0D6@jguru.com> <001c01c21c13$abb69060$56412d3e@daemon> <3D188142.2553C67E@xilinx.com>
Message-ID: <009201c21c59$1fa5ecb0$56412d3e@daemon>

> Since the filename will be available from the Token itself
> (via the new getFilename method), why pass the filename
> as the second argument at all?  NoViableAltException can
> retrieve it from the token on its own.

But the suggestion was to make the getFilename() method
an "empty" method that is optionally implemented in a 
derived Token class.

So, you have no guarantee that the getFilename() returns
something usefull.

Silvain




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From drm at xilinx.com  Tue Jun 25 08:32:21 2002
From: drm at xilinx.com (Dennis Marsa)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: Request enhancement ANTLR
References: <551C262E-87D7-11D6-ADB6-0030653DE0D6@jguru.com> <001c01c21c13$abb69060$56412d3e@daemon> <3D188142.2553C67E@xilinx.com> <009201c21c59$1fa5ecb0$56412d3e@daemon>
Message-ID: <3D188D05.2B086EDA@xilinx.com>

Silvain Piree wrote:
> 
> > Since the filename will be available from the Token itself
> > (via the new getFilename method), why pass the filename
> > as the second argument at all?  NoViableAltException can
> > retrieve it from the token on its own.
> 
> But the suggestion was to make the getFilename() method
> an "empty" method that is optionally implemented in a
> derived Token class.
> 
> So, you have no guarantee that the getFilename() returns
> something usefull.
> 
> Silvain

But that's OK, isn't it?

NoViableAltException also calls Token's getLine() and
getColumn() methods which also have empty default
implementations (i.e. they return 0).

You're right that getFilename() may not return something
useful, but it could return something indicating that the
filename is not there, either an empty string, or "<no file>",
or something.


Dennis

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Tue Jun 25 08:41:43 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: Request enhancement ANTLR
References: <551C262E-87D7-11D6-ADB6-0030653DE0D6@jguru.com> <001c01c21c13$abb69060$56412d3e@daemon> <3D188142.2553C67E@xilinx.com> <009201c21c59$1fa5ecb0$56412d3e@daemon> <3D188D05.2B086EDA@xilinx.com>
Message-ID: <00a601c21c5e$db1168d0$56412d3e@daemon>

> You're right that getFilename() may not return something
> useful, but it could return something indicating that the
> filename is not there, either an empty string, or "<no file>",
> or something.

Sounds reasonable, but wouldn't it impact existing users,
who depend on the getFilename() behaviour? 

Your suggestion sounds like the best solution; I only worry 
about the impact on existing parsers. If that is not considered
a problem, then your suggestion would be best.

Silvain




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From drm at xilinx.com  Tue Jun 25 09:12:05 2002
From: drm at xilinx.com (Dennis Marsa)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: Request enhancement ANTLR
References: <551C262E-87D7-11D6-ADB6-0030653DE0D6@jguru.com> <001c01c21c13$abb69060$56412d3e@daemon> <3D188142.2553C67E@xilinx.com> <009201c21c59$1fa5ecb0$56412d3e@daemon> <3D188D05.2B086EDA@xilinx.com> <00a601c21c5e$db1168d0$56412d3e@daemon>
Message-ID: <3D189655.8945B6C@xilinx.com>

Silvain Piree wrote:
> 
> > You're right that getFilename() may not return something
> > useful, but it could return something indicating that the
> > filename is not there, either an empty string, or "<no file>",
> > or something.
> 
> Sounds reasonable, but wouldn't it impact existing users,
> who depend on the getFilename() behaviour?

I don't think so.

To be explicit, I'm suggesting adding a new NoViableAltException
constructor.  The existing two argument (token, filename) constructor 
could stay for compatibility reasons.

public class NoViableAltException extends RecognitionException {

    // suggested new constructor
    public NoViableAltException(Token t) {
        super("NoViableAlt", t.getFilename(), t.getLine(), t.getColumn());
        token = t;
    }

    // existing constructor
    public NoViableAltException(Token t, String fileName_) {
        super("NoViableAlt", fileName_, t.getLine(), t.getColumn());
        token = t;
    }

    <remainder of class definition omitted for brevity>
}


But, it seems most NoViableAltException constructions are generated by
ANTLR, so it could easily be updated to use the new single-argument
constructor without impacting users.

Any existing explicit NoViableAltException constructions made by the
user would still get the two-argument version, but could be updated
to use the single-argument version.

Dennis

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From pete.forman at westerngeco.com  Tue Jun 25 09:58:56 2002
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: Please make ANTLR check for
  missing/redefined tokens
In-Reply-To: <20020625121530.I19719@cs.utwente.nl>
References: <"from pete.forman"@westerngeco.com>
 <"from <af19d9+ds05@eGroups.com>
 <20020624145008.91298.qmail@web12402.mail.yahoo.com>
 <20020624170615.G19719@cs.utwente.nl>
 <5.1.0.14.2.20020624163505.043ad410@wgmail2.gatwick.eur.slb.com>
Message-ID: <5.1.0.14.2.20020625175433.00ae5978@wgmail2.gatwick.eur.slb.com>

At 2002-06-25 12:15 +0200, Ric Klaren wrote:
>On Mon, Jun 24, 2002 at 04:44:05PM +0100, Pete Forman wrote:
> > While you're at it can you please fix the error message when the
> > import vocab file is missing.  I presume the "'null" should be a file
> > name.
> >
> > ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
> > panic: Cannot find importVocab file 'null
>
>Hmmm I cannot reproduce this in the repository code.. other than the
>missing quote at the end of the thing. Could you check if this happens with
>the prerelease version? If yes could you send me minimal files/recipe that
>reproduce it?

It is indeed fixed in 2.7.2a2 (except for the missing quote at the
end).  Sorry for not checking that earlier.

-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Tue Jun 25 11:04:54 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: Request enhancement ANTLR
In-Reply-To: <20020625133810.J19719@cs.utwente.nl>
Message-ID: <0D8A3197-8866-11D6-ADB6-0030653DE0D6@jguru.com>

Yeah, I guess I agree.  Let's just add a getFilename method to parser 
that accepts a token.  The problem is: what if k=2 and the tokens have 
different filenames?  Do you just choose the first filename?

Ter

On Tuesday, June 25, 2002, at 04:38  AM, Ric Klaren wrote:

> On Tue, Jun 25, 2002 at 08:42:24AM +0200, Silvain Piree wrote:
>>>> Why not implement setFilename/getFilename in class Token
>>>> exactly like setText/getText are currently?
>>>
>>> Makes sense to me...adding to list.
>>
>> That would indeed be the best solution .... with one problem:
>> it's not compatible with current implementations.
>>
>> The problem again is the error message (NoViableAlt) raised
>> by the parser. The generated parser uses the getFilename()
>> method of the Parser class to determine the current filename.
>>
>> When registering the filename with the token, the parser
>> class would have to get the filename from the token (e.g.
>> LT(1).getFilename() ).
>>
>> But that will only work when getFilename() is implemented
>> for Token. Otherwise it will fail ....
>>
>> That's why I suggested to define another getFilename()
>> method in the Parser class where you pass the current
>> token as parameter. Then the implementer can decide
>> where to get the current filename.
>
> I'd go for this last scheme anytime. It offers most possibilities for
> customization.
>
> IMHO Empty place holder methods are evil. (although you sometimes have 
> to
> be pragmatic :) )
>
> Btw I'd prefer adding extra things like this as examples and not as 
> default
> functionality. If we come to the conclusion though that some extra
> interfacing/hooks are necessary to implement this kindoff thing then we
> definitely should go for it.
>
>>     throw new NoViableAltException(...,
>>         LT(1).getFilename() != null?
>>             LT(1).getFilename() : getFilename() );
>
> I'd still go for the getFilename( Token t ) solution. It offers more
> flexibility.
>
> Cheers,
>
> Ric
> --
> -----+++++*****************************************************+++++++++-
> ------
>     ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 
> 4893722  ----
> -----+++++*****************************************************+++++++++-
> ------
>   "I don't have anything against Java - it's the best damn 
> implementation
>               of UCSD Pascal ever released..." --- Larry Smith
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Jun 25 14:22:34 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Re: amount of reserved keywords
Message-ID: <170826586F3BD511910D0200C110AAA8032B4A44@memail03.bco-home.com>

Please see my FAQ entry http://www.jguru.com/faq/view.jsp?EID=140

Monty
www.codetransform.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From greenj at ix.netcom.com  Wed Jun 26 05:02:00 2002
From: greenj at ix.netcom.com (John Allen Green)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Preprocessors - academic question
Message-ID: <954726944.1025100120@localhost>


Here's one for you educated folks...

Given a preprocessor which allows branching and unrestricted code
substitutions, is it impossible to work with the semantics of the
preprocessing itself?

It would seem to me that since you could have code substitution doing code
substitution, it would be impossible to build a parse tree of the
preprocessing.

Cheers,
John
john at joanju dot com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Wed Jun 26 07:30:21 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] RE: lexical nondeterminism question
Message-ID: <170826586F3BD511910D0200C110AAA8032B4A45@memail03.bco-home.com>

Trey,
	Silvain had a good solution there.  You may also consider doing some
things in a later stage of processing too, in between the lexer and the
parser.  I was recently experimenting with a PICK BASIC parser and trying to
convert it to AREV.  A common idiom was "GOTO Exit" where Exit is a reserved
word in BASIC, and here it is also a label.
	So what I wanted to do was say "If I see something like a label
after a GOTO then force it to be a LABEL_REFERENCE."  Doing this in the
lexer was awkward because of having to deal with whitespace and the various
jump statements.  "GOTO" and "GO" "TO" are valid jumps.  Also the "ON X
GOSUB A,B,C" thing meant I had to deal with a comma separated list of
labels, not just one.
	Doing it in the parser lead to lots of ambiguities because labels
could be keywords and the GOTO and GO TO variants skew the possibilites at
k=2 and k=3 and ANTLR's linear approximate lookahead lead to many
ambiguities because of that.
	So I wrote a TokenFilter that used a parser to find if a jump was
happening and if so make the label into a LABEL_REFERENCE.  See the complete
example at http://www.codetransform.com/filterexample.html.  Please let me
know of any typos or if anything is unclear.

Monty



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Wed Jun 26 07:33:28 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Using a Parser as a TokenFilter
Message-ID: <170826586F3BD511910D0200C110AAA8032B4A46@memail03.bco-home.com>

Folks,
	In case people want to comment on specifics of my recent article
http://www.codetransform.com/filterexample.html, I'm posting the text of it
here so it can be archived and quoted.

Using a Parser as a TokenFilter

I was trying out some "extreme programming" while rewriting a parser for
AREV Basic, exploring incremental fixes to the problem of keywords being
used as identifiers. The first one I encountered was labels (as in GOTO)
with the name "Exit", which is also a Basic statement. In this case I
reasoned that I could detect the "GOTO" and then safely assume that what
followed it was a really a label and not a keyword.

I didn't want to recognize this in the lexer, because I didn't want to
explicitly deal with whitespace in a rule, and I didn't want to check the
literals table myself for the jump statements (some of which are two tokens
long).


Doing it in the parser leads to various ambiguity warnings, especially
because antlr's "linear approximate" lookahead ORs together tests for each k
of lookahead and these constructs are both one and two tokens long. The
simple example is that '"GO" label' and '"GO" "TO" label' are valid. The
label rule needs to allow keywords and identifiers as labels, but of course
"TO" is among those. So then I have to use syntactic predicates combined
with a semantic predicate that answers the question of whether this token is
a literal or not.

I felt the easiest thing to do would be to have a parser written as a
TokenStreamFilter to recognize a jump statement like "GOTO" and then expect
a label, coercing any keywords into a label as needed. If something else
like an operator or String is found I just pass it along as it and let the
parser deal with the error. Line numbers (optionally followed by a colon)
are valid labels.

A TokenStreamFilter simply implements one method: nextToken(). In my lexer I
mark any IDENT or keyword token with the boolean "possibleId" as true. I
wanted to write a parser like 


jumpStatements:
    (   "GO" ("TO")? 
     |  "GOTO"
     |  "GOSUB"
     |  "RETURN" "TO"
     ) 
     labelReferences
     ;
 exception 
     catch [RecognitionException ex] {
           consume();
     }
 
 labelReferences:
     labelReference (COMMA labelReference)*
     ;
 
 labelReference
     :   tok:~(EOL) { if ( ((ArevToken)tok).possibleId  ||
tok.getType()==NUMBER_LITERAL)
                     { 
                             tok.setType(LABEL_REFERENCE);
                     }
             }
         (COLON)? 
     ;
 
 
I would always enter at jumpStatements. If it failed to recognize something
I simply consume() that token and pass it on. So there is the first
problem--how do I pass on these tokens to the next parser? nextToken() only
returns one token at a time but this parser wants to match more than one
token at a time. I decided to use antlr.TokenQueue to queue up the tokens.
nextToken() would first check to take a token off the queue, and if it was
empty it would call jumpStatements to prime the queue. Using TokenQueue this
way required some slight modifications, making it public and adding a
length() method.

Now how to get the tokens into the queue? In this case I want to pass on
every token received, it's just that in some cases I want to change the
type. So I decided to override consume() to add tokens to the queue. That
way I knew all tokens that came through would be put in the queue. With this
approach I had to take special care to handle RecognitionExceptions by using
consume() on the token that caused the exceptions. One of my first bugs was
getting into an infinite loop on a RecognitionException because I wasn't
eating the offending token. That way I guarantee that everytime I call
jumpStatements at least one token will be put in the queue.

     public void consume() 
     {
         try 
         {
             queue.append(LT(1));
         }
         catch (TokenStreamException e) 
         {
             // do nothing
         }
         super.consume();
     }
 
     public Token nextToken() throws TokenStreamException 
     {
         Token ret;
         if (queue.length()<=0)
         {
             try 
             {
                 jumpStatements();
             }
             catch ( RecognitionException e) {;}
             catch ( TokenStreamException e) {;}
         }
         ret = queue.elementAt(0);
         queue.removeFirst();
         return ret;
     }
 
The glue for being able to run this is this class:

 public class LabelReferenceFilter  implements TokenStream 
 {
     BASICLabelReferenceParser streamParser;
     public LabelReferenceFilter(TokenStream input) 
     {
         streamParser  = new BASICLabelReferenceParser(input);
     }
 
     public Token nextToken() throws TokenStreamException 
     {
         Token tok = streamParser.nextToken();
         return tok;
     }
 }
 
Now it turns out that I had another problem to solve with this filter. The
parser I was working with was written to expect "end of line" tokens to
separate statements. The lexer was written to send those EOL tokens, but it
wasn't easy to collapse EOLs separated by whitespace into one EOL because of
comments (which depended on knowing if their * or ! was the first thing on a
line (after whitespace). Once out of the lexer the whitespace and comments
would be gone, so it would be easy to collapse multiple EOLs into one. I
modified the consume() method to collapse multiple EOLs in a row:

     boolean currentIsNewline =  LA(1)==EOL;
     if (!(previousWasNewline && currentIsNewline))
     {
         queue.append(LT(1));
     }
     previousWasNewline = currentIsNewline;
 
It also happened that calling labelReferences directly from jumpStatements
didn't work because the parser assumed that EOF would follow when in fact
this was working more like a lexer which gets called multiple times on the
same stream and shouldn't be assuming EOF. So I modified it to call
labelReferences as a method, not as a rule call, to avoid the associated
lookahead. Then I also noticed I needed to handle the case where EOLs
followed the jump, so I do my own testing of LA(1) to decide what to do. To
handle syntax errors properly I also added the expectingLabel variable and
set it to false if something goes wrong. Finally, here's the complete
working BASICLabelReference.g file:

 header {
 
 import ArevToken;
 import java.util.Hashtable;
 import antlr.TokenQueue;
 }
 
 class BASICLabelReferenceParser extends Parser;
 options {
     importVocab=BASIC;
     k=1;
 }
 
 {
     TokenQueue queue = new TokenQueue(6);
     boolean expectingLabel = false;
     boolean previousWasNewline = false;
 
   public void consume() {
             try 
             {
                 boolean currentIsNewline =  LA(1)==EOL;
                 if (!(previousWasNewline && currentIsNewline))
                 {
                     queue.append(LT(1));
                 }
                 previousWasNewline = currentIsNewline;
             }
             catch (TokenStreamException e) 
             {
                 System.err.println(e);
                 e.printStackTrace();
                 // do nothing
             }
             super.consume();
 	}
 
     public Token nextToken() throws TokenStreamException 
     {
         Token ret;
         if (queue.length()<=0)
         {
             try 
             {
                  jumpStatements();
             }
             catch ( RecognitionException e) {;}
             catch ( TokenStreamException e) {;}
         }
         if (queue.length()>0) 
         {
             ret = queue.elementAt(0);
             queue.removeFirst();
             return ret;
         }
         return new ArevToken(Token.EOF_TYPE,"");
     }
 }
 
 jumpStatements:
     (   "GO" ("TO")? 
     |  "GOTO"
     |  "GOSUB"
     |  "RETURN" "TO"
     ) 
     {
         expectingLabel = true;
         if (LA(1)==EOL) eols();
         else labelReferences();
         expectingLabel = false;
     }
     ;
 exception 
     catch [RecognitionException ex] {
         if (LA(1)==EOL) eols();
         else consume();
     }
     
 labelReferences:
     labelReference (COMMA labelReference)*
     ;
 exception 
     catch [RecognitionException ex] {
         expectingLabel = false;
     }
 
 labelReference
     :   tok:~(EOL) { if (expectingLabel && ((((ArevToken)tok).possibleId)
|| tok.getType()==NUMBER_LITERAL))
                     { 
                             tok.setType(LABEL_REFERENCE);
                             if (LA(1)!=COMMA) { expectingLabel = false; }
                     }
                     else
                     {
                         expectingLabel = false;
                     }
             }
         (COLON)? 
     ;
 exception 
     catch [RecognitionException ex] {
         expectingLabel = false;
     }
 
 eols
     :  (EOL)+
     ;
 exception 
     catch [RecognitionException ex] {
         expectingLabel = false;
     }
 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Wed Jun 26 07:39:08 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Preprocessors - academic question
Message-ID: <170826586F3BD511910D0200C110AAA8032B4A47@memail03.bco-home.com>

One thing I did was allow preprocessor directives in my tree, and have my
tree parser know to walk down them, but it only had to handle include files.


I think in terms of trees you could have the original code and a tree for
each phase of the generated code.  At the root of the actual code which goes
into your AST you might have a reference to those intermediate trees of
processed code and the original unprocessed code.  Sounds like a real
headache to me, but I don't see why it wouldn't be possible.

Monty

> -----Original Message-----
> From: John Allen Green [mailto:greenj@ix.netcom.com]
> Sent: Wednesday, June 26, 2002 5:02 AM
> To: Antlr
> Subject: [antlr-interest] Preprocessors - academic question
> 
> 
> 
> Here's one for you educated folks...
> 
> Given a preprocessor which allows branching and unrestricted code
> substitutions, is it impossible to work with the semantics of the
> preprocessing itself?
> 
> It would seem to me that since you could have code 
> substitution doing code
> substitution, it would be impossible to build a parse tree of the
> preprocessing.
> 
> Cheers,
> John
> john at joanju dot com
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Wed Jun 26 07:54:58 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:54 2004
Subject: [antlr-interest] Using a Parser as a TokenFilter
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4A46@memail03.bco-home.com>; from mzukowski@yci.com on Wed, Jun 26, 2002 at 07:33:28AM -0700
References: <170826586F3BD511910D0200C110AAA8032B4A46@memail03.bco-home.com>
Message-ID: <20020626165458.T19719@cs.utwente.nl>

Hi,

On Wed, Jun 26, 2002 at 07:33:28AM -0700, mzukowski@yci.com wrote:
> 	In case people want to comment on specifics of my recent article
> http://www.codetransform.com/filterexample.html, I'm posting the text of it
> here so it can be archived and quoted.

Very very nice!

Only pity that those 'kludges' were necessary to work around the EOL/EOF
stuff, it obscures the concept a bit. Then again nothing is ever easy ;)

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Human beings, who are almost unique in having the ability to learn
   from the experience of others, are also remarkable for their apparent
         disinclination to do so. --- Douglas Adams, Last Chance to See


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Wed Jun 26 08:32:33 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:55 2004
Subject: [antlr-interest] Using a Parser as a TokenFilter
Message-ID: <170826586F3BD511910D0200C110AAA8032B4A48@memail03.bco-home.com>

> Very very nice!

Thanks!
 
> Only pity that those 'kludges' were necessary to work around 
> the EOL/EOF
> stuff, it obscures the concept a bit. Then again nothing is 
> ever easy ;)

Ah, the joys of ANTLR... but really, it is cool what you can do when you
know what you are doing.  If a couple other people could find a use for this
technique then we can look at supporting it somehow from antlr the tool.

Monty

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Trey.Spiva at embarcadero.com  Wed Jun 26 10:02:00 2002
From: Trey.Spiva at embarcadero.com (Trey Spiva)
Date: Mon Dec 20 16:14:55 2004
Subject: [antlr-interest] Using a Parser as a TokenFilter
Message-ID: <6791D870658F174FB863E2FA890000A3BDFF04@abyss4.advancedsw.com>

> > Only pity that those 'kludges' were necessary to work around
> > the EOL/EOF
> > stuff, it obscures the concept a bit. Then again nothing is
> > ever easy ;)
> 
> Ah, the joys of ANTLR... but really, it is cool what you can do when you
> know what you are doing.  If a couple other people could find a use for
> this
> technique then we can look at supporting it somehow from antlr the tool.
> 
[Trey Spiva] 
Visual Basic will allow you to reserved words as data member names. (Who
thought that was a good idea?)  The syntax is:

[ (<RESERVE WORD> | IDENTIFIER) ]

I thought that this technique would be a good solution.  It will at least
keep me from having to write something like the following:

[ (LOOP | IF | END | WHILE | DO| ... | IDENTIFIER) ]

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Jun 26 11:03:31 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:55 2004
Subject: [antlr-interest] Can someone please explain
In-Reply-To: <20020625125751.19564.qmail@web14808.mail.yahoo.com>
Message-ID: <06723242-892F-11D6-AF04-0030653DE0D6@jguru.com>


On Tuesday, June 25, 2002, at 05:57  AM, Bogdan Mitu wrote:

>
> --- Tom Moog <tmoog@polhode.com> wrote:
>>
>> Well, there's always pccts (aka antlr v1) for C++.
>> It does full LL(k) when linear lookahead isn't sufficient.
>
> Just out of curiosity:
> What is the difficulty of using full LL(k)? Is it just the space 
> required to
> store lookahead sets (trees?)?

Space and time go from O(n*k) to O(n^k) ;)  Obviously it can be done in 
most cases (see PCCTS) with some tricks combining approx and full to 
render full lookahead, but it can still generate land mines.  I'll be 
using a thread to do the computations in the future so I can kill it if 
it takes too long to compute and fall back on approx.

Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Wed Jun 26 11:12:30 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:55 2004
Subject: [antlr-interest] Can someone please explain
References: <20020625125751.19564.qmail@web14808.mail.yahoo.com>
Message-ID: <3D1A040E.950845E2@boeing.com>

Bogdan Mitu wrote:
> 
> --- Tom Moog <tmoog@polhode.com> wrote:
> >
> > Well, there's always pccts (aka antlr v1) for C++.
> > It does full LL(k) when linear lookahead isn't sufficient.
> 
> Just out of curiosity:
> What is the difficulty of using full LL(k)? Is it just the space required to
> store lookahead sets (trees?)?
> 

Exponential growth...

rule: (A1|B1|C1)(A2|B2|C2)(A3|B3|C3)

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Wed Jun 26 11:14:09 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:55 2004
Subject: [antlr-interest] Can someone please explain
References: <20020625125751.19564.qmail@web14808.mail.yahoo.com>
Message-ID: <3D1A0471.4AFB2E56@boeing.com>

Bogdan Mitu wrote:
> 
> --- Tom Moog <tmoog@polhode.com> wrote:
> >
> > Well, there's always pccts (aka antlr v1) for C++.
> > It does full LL(k) when linear lookahead isn't sufficient.
> 
> Just out of curiosity:
> What is the difficulty of using full LL(k)? Is it just the space required to
> store lookahead sets (trees?)?
> 
> Thanks,
> Bogdan

Ooops. didn't mean to send the previous message. Pressed the wrong
button. Sorry....

Sinan

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Wed Jun 26 11:22:26 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:55 2004
Subject: [antlr-interest] Re: Preprocessors - academic question
In-Reply-To: <954726944.1025100120@localhost>
Message-ID: <afd0p2+4lh2@eGroups.com>

--- In antlr-interest@y..., John Allen Green <greenj@i...> wrote:
> 
> Here's one for you educated folks...
> 
> Given a preprocessor which allows branching and unrestricted code
> substitutions, is it impossible to work with the semantics of the
> preprocessing itself?
> 
> It would seem to me that since you could have code substitution 
doing code
> substitution, it would be impossible to build a parse tree of the
> preprocessing.

Okay, but you could build a tree of the *operations* to be performed, 
right?  And then apply the operations to the original source file?

Or am I completely not understanding the question?

JSRS


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Wed Jun 26 14:31:39 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:55 2004
Subject: [antlr-interest] lexical nondeterminism question.
References: <6791D870658F174FB863E2FA890000A3BDFEF3@abyss4.advancedsw.com>
Message-ID: <3D1A32BB.B1D326A4@boeing.com>


I need to be able to support the syntax.

 

&h<HEX DIGITS>

&h<HEX DIGITS>&

&o<OCTAL_DIGITS>

&o<OCTAL_DIGITS>&

 

The problem is that I also need to support the string concatenation
syntax

 

<STRING> & <STRING>

 

Notice that I need to be able to use the amperstand for hex numbers,
octal numbers and string concatenation.

So, I have tried the following lexer rules.  

predicates are position dependent.
Disambiguate first...

Sinan


NUM_INT

options {

   paraphrase = "number";

}

            {boolean isDecimal=false;}

            :           

      ( options { warnWhenFollowAmbig=false; greedy=true; } 

      :
		('&' 'h')=>'&' 'h' HEX_INT ('&')?   {_ttype = NUM_INT;}

	|	('&' 'o')=>'&' 'o' OCTAL_INT ('&')? {_ttype = NUM_INT;}
	|	'.' {_ttype = DOT;} (('0'..'9')+ (EXPONENT)? { _ttype = NUM_FLOAT;
})?
	|     ('0'..'9') ('0'..'9')*  {isDecimal=true; _ttype =
NUM_INT;}                   // non-zero decimal
                              ( // only check to see if it's a float if
looks like decimal so far

                                 {isDecimal}? ( '.' ('0'..'9')*
(EXPONENT)? { _ttype = NUM_FLOAT; }

                                              | EXPONENT { _ttype =
NUM_FLOAT; }

                            | '&'     // indicates that the number is of
type Long

                            | // Nothing.  This will be the else part.

                            )

                              )?


      )

            ;

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From greenj at ix.netcom.com  Thu Jun 27 01:43:22 2002
From: greenj at ix.netcom.com (John Allen Green)
Date: Mon Dec 20 16:14:55 2004
Subject: [antlr-interest] Re: Preprocessors - academic question
In-Reply-To: <afd0p2+4lh2@eGroups.com>
References: <afd0p2+4lh2@eGroups.com>
Message-ID: <1029209745.1025174602@localhost>



--On 26/06/2002 6:22 PM +0000 jsrs701 wrote:

> --- In antlr-interest@y..., John Allen Green <greenj@i...> wrote:
>> 
>> Here's one for you educated folks...
>> 
>> Given a preprocessor which allows branching and unrestricted code
>> substitutions, is it impossible to work with the semantics of the
>> preprocessing itself?
>> 
>> It would seem to me that since you could have code substitution 
> doing code
>> substitution, it would be impossible to build a parse tree of the
>> preprocessing.
> 
> Okay, but you could build a tree of the *operations* to be performed, 
> right?  And then apply the operations to the original source file?
> 
> Or am I completely not understanding the question?
> 
> JSRS

I'm not even worried about applying the operations to the original source -
the preprocessing itself is easy (it's already built). It's the graphing of
the preprocessing operations that I was wondering about, so your first
question is the right one. I don't want to use the graph in order to apply
the preprocessing, I only want to use the graph in order to analyze the
preprocessing.

Monty suggested a tree for each phase of the preprocessing, which may not
be practical (unless I misunderstand his idea), but it does make me wonder
if each phase of the operations in a preprocess graph could be made into
nodes on a tree.

I never grok these things without examples, so here's one. The language is
a 4GL called Progress. It's idea of #define looks like this:
  &GLOBAL-DEFINE HI Hello World
And then the following displays "Hello World":
  DISPLAY "{&HI}".
It gets ugly, because you can have a macro expand into another macro which
in turn gets expanded. Adding to the previous code:
  &GLOBAL-DEFINE ARGH {&HI}
And the "Hello World":
  DISPLAY "{&ARGH}".

Perhaps each application of code substitution could be another node on the
graph? That would be a weird looking tree. Like Monty said, it's a headache.

John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bogdan_mt at yahoo.com  Thu Jun 27 04:49:19 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:55 2004
Subject: Full LL(k) (was: [antlr-interest] Can someone please explain)
In-Reply-To: <06723242-892F-11D6-AF04-0030653DE0D6@jguru.com>
Message-ID: <20020627114919.16379.qmail@web14803.mail.yahoo.com>

--- Terence Parr <parrt@jguru.com> wrote:
> 
> On Tuesday, June 25, 2002, at 05:57  AM, Bogdan Mitu wrote:
> 
> >
> > --- Tom Moog <tmoog@polhode.com> wrote:
> >>
> >> Well, there's always pccts (aka antlr v1) for C++.
> >> It does full LL(k) when linear lookahead isn't sufficient.
> >
> > Just out of curiosity:
> > What is the difficulty of using full LL(k)? Is it just the space 
> > required to
> > store lookahead sets (trees?)?
> 
> Space and time go from O(n*k) to O(n^k) ;)  Obviously it can be done in 
> most cases (see PCCTS) ...

Well, theory is theory, and practice is practice. Most engineering problems
are exponentially bounded. Fortunately good solutions can be found in most
practical problems, otherwise they would be out of business ;-)

I was involved last year in a project dealing with formal verification of
digital circuits, and the big problem there is the exploration of all
possible future states starting from a given initial state. Note that I am
speaking of FSMs with states encoded on 100 bits or even more. The key in
the practical implementation was the use of Ordered Binary Decision Diagrams
(OBDD) to represent the state space. It is amazing how efficient this was
for practical cases. And all is due to the fact that all subtrees in BDD are
unique (reused).

I think that something similar can be used for lookaheads. Maybe not BDD but
Hex Decision Diagrams. Represent the lookahead as a tree where nodes have
(at most) 16 children. Each level of the tree "consumes" 4 bits from the
binary representation of the character/token. This won't be more efficient
than current implementation for *one* lookahead set, but when you consider
all lookaheads, a lot of subtree reusing can take place; I can bet many
lookaheads are similar (have common subtrees).

Best regards,
Bogdan

> with some tricks combining approx and full to 
> render full lookahead, but it can still generate land mines.  I'll be 
> using a thread to do the computations in the future so I can kill it if 
> it takes too long to compute and fall back on approx.
> 
> Ter
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 




__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

From parrt at jguru.com  Thu Jun 27 12:49:43 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:55 2004
Subject: Full LL(k) (was: [antlr-interest] Can someone please explain)
In-Reply-To: <20020627114919.16379.qmail@web14803.mail.yahoo.com>
Message-ID: <066331D7-8A07-11D6-BE05-0030653DE0D6@jguru.com>


On Thursday, June 27, 2002, at 04:49  AM, Bogdan Mitu wrote:

> --- Terence Parr <parrt@jguru.com> wrote:
>> Space and time go from O(n*k) to O(n^k) ;)  Obviously it can be done in
>> most cases (see PCCTS) ...
>
> Well, theory is theory, and practice is practice. Most engineering 
> problems
> are exponentially bounded. Fortunately good solutions can be found in 
> most
> practical problems, otherwise they would be out of business ;-)

Yup.  That was my dissertation in a nutshell--finding the linear 
approximate lookahead and using it to reduce complexity even of full 
lookahead.  Your BDD may be applicable, but pretty hard to beat the 
simple k sets of tokens of linear approximate lookahead. ;)

> I think that something similar can be used for lookaheads. Maybe not 
> BDD but

It's really the computation...yes, storage is important to reduce as 
well, but I use that concept only because the worst case is obvious as 
O(n^k).  In reality, grammar analysis is a function of grammar size, 
vocabulary size, and k so it's even worse to compute than O(n^k).  You 
have to traverse O(n^k) paths at each decision point in the worst case 
even if you don't store the data ;)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From greenj at ix.netcom.com  Thu Jun 27 15:15:11 2002
From: greenj at ix.netcom.com (John Allen Green)
Date: Mon Dec 20 16:14:55 2004
Subject: [antlr-interest] Re: Preprocessors - academic question
In-Reply-To: <1029209745.1025174602@localhost>
References: <afd0p2+4lh2@eGroups.com> <1029209745.1025174602@localhost>
Message-ID: <36634928.1025223311@localhost>


--On 27/06/2002 10:43 AM +0200 John Allen Green wrote:

>>> Given a preprocessor which allows branching and unrestricted code
>>> substitutions, is it impossible to work with the semantics of the
>>> preprocessing itself?
>>> 
>>> It would seem to me that since you could have code substitution 
>> doing code
>>> substitution, it would be impossible to build a parse tree of the
>>> preprocessing.


I think I've finally figured out what's been bothering me. Here's some
valid Progress code:

&GLOBAL-DEFINE XX &GLOBAL-DEFINE HI "Hello world!"
{&XX}
DISPLAY {&HI}.

Of course, C doesn't let you get away with the above nonsense. What I think
the above shows is that we can't build a complete graph of the
preprocessing without actually evaluating the preprocessing expressions and
expansions.

Here's an expression that would have to be evaluated:

&IF OPSYS = "VMS" &THEN
  &GLOBAL-DEFINE OSINCLUDE include/vms.i
&ENDIF
{{&OSINCLUDE}}

We'd have to evaluate for both true and false on OPSYS = "VMS". If we never
evaluated for true, we'd never evaluate the text in the include file, and
our graph would be incomplete.

If we have to evaluate for every possible combination of conditions, then
for some compile units we might be talking about an astronomical number of
possible states, and graphing becomes impractical.

A friend suggested that this sort of graphing problem is similar to other
problems as well, and mentioned NP Complete. I've no education for this
stuff, so I'll have to hit the books for this one.

Cheers,
John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnclarke at hotmail.com  Thu Jun 27 16:00:00 2002
From: johnclarke at hotmail.com (johnclarke72)
Date: Mon Dec 20 16:14:55 2004
Subject: [antlr-interest] How can I extend CharScanner ?
Message-ID: <afg5dg+fopk@eGroups.com>

Is there anywhere I can find an example of how to use the CharScanner 
class ?  If so where ?

In my Grammar I defined an item called data in my lexer :

DATA : (options {greedy=false;} : .)* "</"! ( 'a'..'z' )+ ">"!
                {selector.pop();}
                ;

I added it to my Parser :

// The Parser Rules
processHTML:
   data:DATA
   {
      // Add the Data to the Hash Table
      attributeData.put("DATA", data.getText());
   };

When I ran the following through it 

<script>
  test of the code
</script>

it said :

'xception: antlr.TokenStreamRecognitionException: expecting '<', 
found '

I would be grateful for all advice offered

Thanks

John



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnclarke at hotmail.com  Thu Jun 27 16:01:46 2002
From: johnclarke at hotmail.com (johnclarke72)
Date: Mon Dec 20 16:14:55 2004
Subject: [antlr-interest] How can you ignore White Space but record the last white space character used ?
Message-ID: <afg5gq+srir@eGroups.com>

In my White Space definition I tell it to ignore the White Space when 
processing.  eg :

// Ignore all White Space
WS : ( ' '
     | '\t'
     | '\r' '\n' { newline(); }
     | '\n' { newline(); }
     )
     {$setType(Token.SKIP);} //ignore this token
;

However,  is there an easy way to get it to record the fact that a 
space has been detected so that this can be passed to the Parser ?

I would be grateful for all advice offered.

Thanks

John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From khuenghi at excite.com  Thu Jun 27 17:50:50 2002
From: khuenghi at excite.com (tdknghi)
Date: Mon Dec 20 16:14:55 2004
Subject: [antlr-interest] ANTLR and XTAL
Message-ID: <afgbta+a1p4@eGroups.com>

  Hi all, have any of you using XTAL to mark up the resulted AST 
from ANTLR???

 I have successfull install and run examples with go with ANTLR and 
XTAL. However, I have not success to make XTAL integrate with ANTLR 
to mark up an AST of an arbitrary program. 


Could you please give me 1 or 2 detials example with explaination 
will be great. Thank you very much.


Regards.
MM


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Thu Jun 27 23:38:08 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:55 2004
Subject: [antlr-interest] How can you ignore White Space but record the last white space character used ?
References: <afg5gq+srir@eGroups.com>
Message-ID: <004301c21e6e$ced84130$56412d3e@daemon>

John,

> However,  is there an easy way to get it to record the fact that
> a space has been detected so that this can be passed to the 
> Parser ?

You can use the HiddenTokenStream to pass whitespace
tokens to your parser. See the "preserveWhiteSpace" example
in the ANTLR examples directory.

Also, see the documentation of ANTLR about token streams.

Silvain




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Fri Jun 28 06:38:07 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:55 2004
Subject: [antlr-interest] Re: Preprocessors - academic question
Message-ID: <170826586F3BD511910D0200C110AAA8032B4A53@memail03.bco-home.com>

What is the problem you are trying to solve?  Do you need to make changes
that propagate back into unpreprocessed code?

Monty

> -----Original Message-----
> From: John Allen Green [mailto:greenj@ix.netcom.com]
> Sent: Thursday, June 27, 2002 3:15 PM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] Re: Preprocessors - academic question
> 
> 
> 
> --On 27/06/2002 10:43 AM +0200 John Allen Green wrote:
> 
> >>> Given a preprocessor which allows branching and unrestricted code
> >>> substitutions, is it impossible to work with the semantics of the
> >>> preprocessing itself?
> >>> 
> >>> It would seem to me that since you could have code substitution 
> >> doing code
> >>> substitution, it would be impossible to build a parse tree of the
> >>> preprocessing.
> 
> 
> I think I've finally figured out what's been bothering me. Here's some
> valid Progress code:
> 
> &GLOBAL-DEFINE XX &GLOBAL-DEFINE HI "Hello world!"
> {&XX}
> DISPLAY {&HI}.
> 
> Of course, C doesn't let you get away with the above 
> nonsense. What I think
> the above shows is that we can't build a complete graph of the
> preprocessing without actually evaluating the preprocessing 
> expressions and
> expansions.
> 
> Here's an expression that would have to be evaluated:
> 
> &IF OPSYS = "VMS" &THEN
>   &GLOBAL-DEFINE OSINCLUDE include/vms.i
> &ENDIF
> {{&OSINCLUDE}}
> 
> We'd have to evaluate for both true and false on OPSYS = 
> "VMS". If we never
> evaluated for true, we'd never evaluate the text in the 
> include file, and
> our graph would be incomplete.
> 
> If we have to evaluate for every possible combination of 
> conditions, then
> for some compile units we might be talking about an 
> astronomical number of
> possible states, and graphing becomes impractical.
> 
> A friend suggested that this sort of graphing problem is 
> similar to other
> problems as well, and mentioned NP Complete. I've no 
> education for this
> stuff, so I'll have to hit the books for this one.
> 
> Cheers,
> John
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From greenj at ix.netcom.com  Fri Jun 28 08:12:43 2002
From: greenj at ix.netcom.com (John Allen Green)
Date: Mon Dec 20 16:14:55 2004
Subject: [antlr-interest] Re: Preprocessors - academic question
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4A53@memail03.bco-home.com>
References: <170826586F3BD511910D0200C110AAA8032B4A53@memail03.bco-home.com>
Message-ID: <97687497.1025284363@localhost>

Exactly.

Er, dunno what to add to that... :-)

John


--On 28/06/2002 6:38 AM -0700 mzukowski@yci.com wrote:

> What is the problem you are trying to solve?  Do you need to make changes
> that propagate back into unpreprocessed code?
> 
> Monty
> 
>> -----Original Message-----
>> From: John Allen Green [mailto:greenj@ix.netcom.com]
>> Sent: Thursday, June 27, 2002 3:15 PM
>> To: antlr-interest@yahoogroups.com
>> Subject: Re: [antlr-interest] Re: Preprocessors - academic question
>> 
>> 
>> 
>> --On 27/06/2002 10:43 AM +0200 John Allen Green wrote:
>> 
>> >>> Given a preprocessor which allows branching and unrestricted code
>> >>> substitutions, is it impossible to work with the semantics of the
>> >>> preprocessing itself?
>> >>> 
>> >>> It would seem to me that since you could have code substitution 
>> >> doing code
>> >>> substitution, it would be impossible to build a parse tree of the
>> >>> preprocessing.
>> 
>> 
>> I think I've finally figured out what's been bothering me. Here's some
>> valid Progress code:
>> 
>> &GLOBAL-DEFINE XX &GLOBAL-DEFINE HI "Hello world!"
>> {&XX}
>> DISPLAY {&HI}.
>> 
>> Of course, C doesn't let you get away with the above 
>> nonsense. What I think
>> the above shows is that we can't build a complete graph of the
>> preprocessing without actually evaluating the preprocessing 
>> expressions and
>> expansions.
>> 
>> Here's an expression that would have to be evaluated:
>> 
>> &IF OPSYS = "VMS" &THEN
>>   &GLOBAL-DEFINE OSINCLUDE include/vms.i
>> &ENDIF
>> {{&OSINCLUDE}}
>> 
>> We'd have to evaluate for both true and false on OPSYS = 
>> "VMS". If we never
>> evaluated for true, we'd never evaluate the text in the 
>> include file, and
>> our graph would be incomplete.
>> 
>> If we have to evaluate for every possible combination of 
>> conditions, then
>> for some compile units we might be talking about an 
>> astronomical number of
>> possible states, and graphing becomes impractical.
>> 
>> A friend suggested that this sort of graphing problem is 
>> similar to other
>> problems as well, and mentioned NP Complete. I've no 
>> education for this
>> stuff, so I'll have to hit the books for this one.
>> 
>> Cheers,
>> John
>> 
>> 
>>  
>> 
>> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
>  



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Fri Jun 28 10:05:25 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:55 2004
Subject: [antlr-interest] Re: Preprocessors - academic question
Message-ID: <170826586F3BD511910D0200C110AAA8032B4A57@memail03.bco-home.com>

That's a tough problem.  You obviously can't analyze all the possible sets
of preprocessor conditions.  I don't think there is a general solution, but
try to think about what you would do if you were doing it by hand, but
analyzing the fully processed code for one specific set of preprocessor
variables.  As you change nodes, you should be able to trace it back to the
unpreprocessed code.  Things could get ugly when you have to split a
preprocessor directive in two so that the change only affects the code you
want it to, and not all code everywhere.  Managing this for multiple
configurations of preprocessor variables would be tough too.

Most people hopefully don't use the preprocessor in a brain dead way.  What
kind of transformations are you doing?  Maybe you could pick a tough example
and we could work it through.

Monty

> -----Original Message-----
> From: John Allen Green [mailto:greenj@ix.netcom.com]
> Sent: Friday, June 28, 2002 8:13 AM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Re: Preprocessors - academic question
> 
> 
> Exactly.
> 
> Er, dunno what to add to that... :-)
> 
> John
> 
> 
> --On 28/06/2002 6:38 AM -0700 mzukowski@yci.com wrote:
> 
> > What is the problem you are trying to solve?  Do you need 
> to make changes
> > that propagate back into unpreprocessed code?
> > 
> > Monty
> > 
> >> -----Original Message-----
> >> From: John Allen Green [mailto:greenj@ix.netcom.com]
> >> Sent: Thursday, June 27, 2002 3:15 PM
> >> To: antlr-interest@yahoogroups.com
> >> Subject: Re: [antlr-interest] Re: Preprocessors - academic question
> >> 
> >> 
> >> 
> >> --On 27/06/2002 10:43 AM +0200 John Allen Green wrote:
> >> 
> >> >>> Given a preprocessor which allows branching and 
> unrestricted code
> >> >>> substitutions, is it impossible to work with the 
> semantics of the
> >> >>> preprocessing itself?
> >> >>> 
> >> >>> It would seem to me that since you could have code 
> substitution 
> >> >> doing code
> >> >>> substitution, it would be impossible to build a parse 
> tree of the
> >> >>> preprocessing.
> >> 
> >> 
> >> I think I've finally figured out what's been bothering me. 
> Here's some
> >> valid Progress code:
> >> 
> >> &GLOBAL-DEFINE XX &GLOBAL-DEFINE HI "Hello world!"
> >> {&XX}
> >> DISPLAY {&HI}.
> >> 
> >> Of course, C doesn't let you get away with the above 
> >> nonsense. What I think
> >> the above shows is that we can't build a complete graph of the
> >> preprocessing without actually evaluating the preprocessing 
> >> expressions and
> >> expansions.
> >> 
> >> Here's an expression that would have to be evaluated:
> >> 
> >> &IF OPSYS = "VMS" &THEN
> >>   &GLOBAL-DEFINE OSINCLUDE include/vms.i
> >> &ENDIF
> >> {{&OSINCLUDE}}
> >> 
> >> We'd have to evaluate for both true and false on OPSYS = 
> >> "VMS". If we never
> >> evaluated for true, we'd never evaluate the text in the 
> >> include file, and
> >> our graph would be incomplete.
> >> 
> >> If we have to evaluate for every possible combination of 
> >> conditions, then
> >> for some compile units we might be talking about an 
> >> astronomical number of
> >> possible states, and graphing becomes impractical.
> >> 
> >> A friend suggested that this sort of graphing problem is 
> >> similar to other
> >> problems as well, and mentioned NP Complete. I've no 
> >> education for this
> >> stuff, so I'll have to hit the books for this one.
> >> 
> >> Cheers,
> >> John
> >> 
> >> 
> >>  
> >> 
> >> Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 
> 
> 
>  



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From greenj at ix.netcom.com  Fri Jun 28 11:12:53 2002
From: greenj at ix.netcom.com (John Allen Green)
Date: Mon Dec 20 16:14:55 2004
Subject: [antlr-interest] Re: Preprocessors - academic question
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4A57@memail03.bco-home.com>
References: <170826586F3BD511910D0200C110AAA8032B4A57@memail03.bco-home.com>
Message-ID: <108496770.1025295173@localhost>


--On 28/06/2002 10:05 AM -0700 mzukowski@yci.com wrote:

> That's a tough problem.  You obviously can't analyze all the possible sets
> of preprocessor conditions.

Well, let's qualify that. I think that analyzing all possible sets of
preprocessor conditions is NP Complete. I think it's possible to graph all
possible sets, but like the Traveling Salesman Problem, it doesn't take
much before it becomes impractical to analyze all sets. All sets would have
to be analyzed to prove that a particular transformation doesn't break
anything.

>  I don't think there is a general solution,
> but try to think about what you would do if you were doing it by hand, but
> analyzing the fully processed code for one specific set of preprocessor
> variables.  As you change nodes, you should be able to trace it back to
> the unpreprocessed code.  Things could get ugly when you have to split a
> preprocessor directive in two so that the change only affects the code you
> want it to, and not all code everywhere.  Managing this for multiple
> configurations of preprocessor variables would be tough too.

Exactly - and it *is* as ugly as it sounds. And Progress's preprocessor
lets you get away with murder.

> Most people hopefully don't use the preprocessor in a brain dead way.

Nice try! The Progress 4GL has had a *lot* of shortcomings in the past, and
still has quite a few. It's not even properly object oriented yet. So, of
course, the preprocessor is the hack which allows programmers to sort-of
work with the language the way they want to work with it. For example,
include files and PATH settings were hacked for making up for the lack of
any language support for inheritance and polymorphism. To make matters
worse, the 4GL programmers are typically business analysts who have no idea
what a mess they are making when they use preprocessing willy-nilly.

> What kind of transformations are you doing?  Maybe you could pick a tough
> example and we could work it through.

Ideally, we wanted to be able to do radical transformations on the code.
For example, we wanted to be able to take old code which mixed UI and
database access, and automatically split that code so that it could more
easily be split up and put into an n-tier architecture (application
servers, etc).

We still think that's possible, but with this big limitation: the
preprocessing junk is lost from the source. That will be unacceptable for
most potential projects, but it might be acceptable for the odd thing.

On the other hand, there's a completely different class of transformation
that people are looking for: token twiddling. That will be comparatively
easy. We'll relate nodes in the parse tree back to an unprocessed token
list (whitespace and all). The parse tree can be used for the analysis, the
token list is the place where the token twiddling is done. Between the
parse tree and the token list, it will be obvious if any desired twiddling
crosses preprocessing boundaries, and in that case the twiddling cannot be
done automatically - it will be reported and done by hand. Once the
twiddling is done, the token list is written back out to source.

John
www.joanju.com
john @ joanju dot com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Fri Jun 28 11:20:49 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:55 2004
Subject: [antlr-interest] Re: Preprocessors - academic question
Message-ID: <170826586F3BD511910D0200C110AAA8032B4A58@memail03.bco-home.com>

> Ideally, we wanted to be able to do radical transformations 
> on the code.
> For example, we wanted to be able to take old code which mixed UI and
> database access, and automatically split that code so that it 
> could more
> easily be split up and put into an n-tier architecture (application
> servers, etc).
> 
> We still think that's possible, but with this big limitation: the
> preprocessing junk is lost from the source. That will be 
> unacceptable for
> most potential projects, but it might be acceptable for the odd thing.

There's no reason you couldn't put the preprocessing junk in at the end,
right?  I mean if you are radically changing the code then they can expect
things to change.  Maybe you can take the transformed tree and then start
some pattern matching to insert macros where appropriate.  You could use
original invocations of the macros to have a pattern to match against.  This
might make for a good (somewhat) interactive step at the end.  You get a
chance to refactor the code via macros since the language doesn't support
objects or whatnot.

Monty

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From greenj at ix.netcom.com  Fri Jun 28 12:09:07 2002
From: greenj at ix.netcom.com (John Allen Green)
Date: Mon Dec 20 16:14:55 2004
Subject: [antlr-interest] Re: Preprocessors - academic question
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4A58@memail03.bco-home.com>
References: <170826586F3BD511910D0200C110AAA8032B4A58@memail03.bco-home.com>
Message-ID: <111870791.1025298547@localhost>


--On 28/06/2002 11:20 AM -0700 mzukowski@yci.com wrote:

> There's no reason you couldn't put the preprocessing junk in at the end,
> right?  I mean if you are radically changing the code then they can expect
> things to change.  Maybe you can take the transformed tree and then start
> some pattern matching to insert macros where appropriate.  You could use
> original invocations of the macros to have a pattern to match against.
> This might make for a good (somewhat) interactive step at the end.  You
> get a chance to refactor the code via macros since the language doesn't
> support objects or whatnot.

Huh. Cool idea - I never thought of that. It would probably work great.

I sure like this mailing list.  :-)

John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From khuenghi at excite.com  Sun Jun 30 23:15:05 2002
From: khuenghi at excite.com (tdknghi)
Date: Mon Dec 20 16:14:55 2004
Subject: [antlr-interest] Please help: ANTLR and XTAL (re-post)
Message-ID: <afos19+reha@eGroups.com>

Hi all,

I'm currently having a problem in running one of the examples 
provided in antlr - the "java" example.

The "java" example is running smoothly without any error when we just 
install the antlr, however, once we put the XTAL1.1 into the machine, 
the "java" example won't work anymore. It keeps displaying the error 
messages <see below> when we try to compile the "java" example. We 
are sure the XTAL itself is working as we can run those examples in 
XTAL without any errors. We also have no problems in running other 
examples in antlr.

Does anyone have the same problem as me or does anyone know how to 
solve the problem? Thanks in advance.

<error message when compile the "java" example>

G:\>cd G:\trial code\antlr-2.6.0\examples\java 

G:\trial code\antlr-2.6.0\examples\java>java antlr.Tool java.tree.g 
ANTLR Parser Generator   Version 2.6.0   1989-1999 MageLang Institute 
panic: Error reading importVocab file 'JavaTokenTypes.txt' 

G:\trial code\antlr-2.6.0\examples\java>java antlr.Tool java.g 
ANTLR Parser Generator   Version 2.6.0   1989-1999 MageLang Institute 

G:\trial code\antlr-2.6.0\examples\java>java antlr.Tool java.tree.g 
ANTLR Parser Generator   Version 2.6.0   1989-1999 MageLang Institute 

G:\trial code\antlr-2.6.0\examples\java>javac *.java 
JavaRecognizer.java:1600: incompatible types 
found   : antlr.collections.AST 
required: xtal.base.XMLBase 
                       returnTypeBrackersOnEndOfMethodHead_AST = typ; 
                                                                 ^ 
JavaRecognizer.java:1723: incompatible types 
found   : antlr.collections.AST 
required: xtal.base.XMLBase 
                       declaratorBrackets_AST=typ; 
                                              ^ 
JavaRecognizer.java:2084: incompatible types 
found   : antlr.collections.AST 
required: xtal.base.XMLBase 
                       parameterDeclaratorBrackets_AST = t; 
                                                         ^ 
Main.java:84: cannot access ASTFactory 
bad class file: G:\trial code\xtal1.1\ASTFactory.class 
class file contains wrong class: antlr.ASTFactory 
Please remove or make sure it appears in the correct subdirectory of 
the classpa 
th. 
                       ASTFactory factory = new ASTFactory(); 
                       ^ 
4 errors 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

