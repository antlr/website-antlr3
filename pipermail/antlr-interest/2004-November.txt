From antlr-interest-accept-NvepYn0aYmp9XEOPlEkNJgY at yahoogroups.com  Mon Nov  1 01:14:25 2004
From: antlr-interest-accept-NvepYn0aYmp9XEOPlEkNJgY at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:27 2004
Subject: MODERATE -- marq.kole@philips.com posted to antlr-interest
Message-ID: <1099300465.405.14948.m21@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  marq.kole@philips.com 

The message summary:
--------------------
FROM: marq.kole@philips.com 
DATE: Mon, 01 Nov 2004 09:13:02 -0000 
SUBJECT: Python support for ANTLR 

All, 

A few weeks ago (just before the ANTLR workshop in SFO) I 
managed to get a pure Python version of ANTLR working on the
calc example. However, there are still a few problems in de 
code generator that need to be sorted out, so I am asking 
for help. I will post the ANTLR-Python stuff as a patch on 
the antlr-2.7.4 code in the files section of this group. 

To get this working, you need to have everything available 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=355 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-NvepYn0aYmp9XEOPlEkNJgY@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "marqkole" <marq.kole@philips.com>
Subject: Python support for ANTLR
Date: Mon, 01 Nov 2004 09:13:02 -0000
Size: 2948
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041101/61b3b3c0/attachment.mht
From klaren at cs.utwente.nl  Mon Nov  1 02:18:22 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:27 2004
Subject: [antlr-interest] extended ascii chars
In-Reply-To: <clir2h+kr9t@eGroups.com>
References: <clir2h+kr9t@eGroups.com>
Message-ID: <20041101101822.GA15290@cs.utwente.nl>


On Mon, Oct 25, 2004 at 12:20:33PM -0000, jcdur wrote:
> Can somebody explain me why I got an error because of the '?' in
> the comment when running "java antlr.Tool" on the following file:
> ...
>

What antlr version are you using? It gives no problems with the current
antlr2 development code. Could you check if it's ok with my latest snapshot
from:

http://wwwhome.cs.utwente.nl/~klaren/antlr/

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
              of UCSD Pascal ever released..." --- Larry Smith



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From klaren at cs.utwente.nl  Mon Nov  1 02:21:33 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:27 2004
Subject: [antlr-interest] Could it be that the examples in the antlr-2.7.3 file are outdated?
In-Reply-To: <1C5C690C06EFE244B83E3F133CA70BDE285819@studentex6.campus.tue.nl>
References: <1C5C690C06EFE244B83E3F133CA70BDE285819@studentex6.campus.tue.nl>
Message-ID: <20041101102133.GC15290@cs.utwente.nl>


On Mon, Oct 25, 2004 at 04:36:25PM +0200, Maassen, H.A.M. wrote:
> I'm looking at the C# examples and get the following message when compiling
> the JAVA example (Examples/CSharp/Java): 'antlr.debug.misc.ASTFrame' does
> not contain a definition for 'ShowDialog'.
>  
> It might be me though, I'm new to both ANTLR and C# - but I figured I might
> as well ask :)

Check antlr 2.7.4 or a snapshot from:

http://wwwhome.cs.utwente.nl/~klaren/antlr

Then report back.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  Chaos often breeds life, when order breeds habit.
  --- Henry B. Adams, The Education of Henry Adams



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From klaren at cs.utwente.nl  Mon Nov  1 02:29:53 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:27 2004
Subject: [antlr-interest] NoViableAltException
In-Reply-To: <clo2al+b0re@eGroups.com>
References: <clo2al+b0re@eGroups.com>
Message-ID: <20041101102953.GD15290@cs.utwente.nl>


On Wed, Oct 27, 2004 at 11:55:01AM -0000, meenachan wrote:
> I am getting a NoViableAltException in the ANTLR . But I want to get 
> the full string from the place where it occurs . For example:
> 
> The input is :
> create antlr antlrname=antlr1 antlrype=type1 
> 
> where the lexer definition is as follows:
> CREATE:"create ";
> ANTLR:"antlr";
> ANTLRNAME:"antlrn"('a' ('m' ('e')?)?)?;
> ANTLRTYPE:"antlrt"('y' ('p'('e')?)?)?;
> 
> In the above example since  it was not able to identify the 
> token "antlrype=type1" it throws NoViableAltException with the LT(1) 
> as "antlr". But I need to display the whole string "antlrype=type1 " 
> as invalid.
> 
> My question is : How to get the string (antlrype=type1 )from the 
> place where the NoViableAltException occurs??

You'd probably have to make a custom error handler(s) for the rule(s) that
need this. You can access the text that got parsed so far with the
getText() method of the lexer object. You might have to use the
consume(Until) method to skip forward to a sane point in the input, to get
the complete text (not 100% sure if you need to call commit afterwards
think not..). The $FOLLOW / $FIRST / $FOLLOW(rulename) / $FIRST(rulename)
shorthands give the bitset names (as can be used in consumeUntil etc.) for
the follow/first sets of the current/named rule.

Hope this helps,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  "Good judgement comes from experience.
     Experience comes from bad judgement." --- Unknown



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From marq.kole at philips.com  Mon Nov  1 01:13:02 2004
From: marq.kole at philips.com (marqkole)
Date: Mon Dec 20 16:17:27 2004
Subject: [antlr-interest] Python support for ANTLR
Message-ID: <cm4umu+dgm5@eGroups.com>




All,

A few weeks ago (just before the ANTLR workshop in SFO) I managed to 
get a pure Python version of ANTLR working on the calc example. 
However, there are still a few problems in de code generator that 
need to be sorted out, so I am asking for help. I will post the 
ANTLR-Python stuff as a patch on the antlr-2.7.4 code in the files 
section of this group.

To get this working, you need to have everything available to build 
ANTLR and also have a recent (newer than version 2.1) Python on your 
system. Then do the following (UNIX only):
1. untar the antlr-2.7.4 archive
   gtar zxf antlr-2.7.4.tar.gz
2. patch the antlr-2.7.4 directory with the antlr-python patch
   patch -p0 < antlr-2.7.4-python-041101.diff
3. Enter the antlr-2.7.4 directory and configure and build antlr as
   usual.
4. Go to the lib/python directory and run
   python setup.py install
   This will build and install the ANTLR-Python runtime
5. Go to the examples/python/calc directory and build and run the
   example.
   antlr calc.g
   python Calc.py < test.in

The problems I have currently are in the examples/python/lexertester 
directory. There are a few simple tests here, but the generated code 
will give errors due to incorrect indentation. Explanation: instead 
of braces, Python uses indentation to mark blocks of code. In the 
case of the generated code, the opening brace could be replaced by 
an if statement that is always open (example: "if True:") followed 
by an increased indentation level, while the closing brace can be 
replaced by just a decreased indentation level. My problem is that I 
just can't find where to do this for a single action item, such as a 
pair of spurious braces. Just have a look at the generated code in 
the lexertester examples to see what I mean.









 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From klaren at cs.utwente.nl  Mon Nov  1 03:33:46 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:27 2004
Subject: [antlr-interest] gmane works?  huh?
In-Reply-To: <EF4F1CAA-2A9F-11D9-89DD-000A95891192@cs.usfca.edu>
References: <EF4F1CAA-2A9F-11D9-89DD-000A95891192@cs.usfca.edu>
Message-ID: <20041101113346.GE15290@cs.utwente.nl>


On Sat, Oct 30, 2004 at 11:17:18AM -0700, Terence Parr wrote:
> So, search seems broken on gmane as well.  My inbox shows plenty of
> matches for "stringtemplate newline", which is the article I was
> looking for.  Top one was the right article.  gmane shows two, both not
> what I want and won't link to the article.  I get "weft didn't produce
> an output." instead.

Don't get the error here. Probably something temporary.

> Are you sure y'all want me to upload old mail archives into this thing?

Well it gives a lot better score than yahoogroups and a faster way to
browse the archives.

> I have a student working on search for antlr.org; shall I just do the
> archive myself?  I'd rather work on antlr and such, but perhaps over
> xmas break I can fix up the site with the student.  ugh.

As I said before there's a lot of good opensource mail archive packages
around. Combined with a good small website searchengine you might get
something quite good quite quick. I have very good experience with htdig
from www.htdig.org. It's a nobrainer to setup and has been running stable
here for years without any user intervention (and it's very good with
search results and ordering).

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  "I think we better split up."
  "Good idea. We can do more damage that way."
  --- Ghostbusters



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pete.forman at westerngeco.com  Mon Nov  1 03:40:37 2004
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:17:27 2004
Subject: [antlr-interest] Re: gmane works?  huh?
References: <EF4F1CAA-2A9F-11D9-89DD-000A95891192@cs.usfca.edu>
Message-ID: <sm7tn6fe.fsf@wgmail2.gatwick.eur.slb.com>


Terence Parr <parrt@cs.usfca.edu> writes:
 > So, search seems broken on gmane as well.  My inbox shows plenty of
 > matches for "stringtemplate newline", which is the article I was
 > looking for.  Top one was the right article.  gmane shows two, both
 > not what I want and won't link to the article.  I get "weft didn't
 > produce an output." instead.

Raise the matter on news:gmane.discuss if it persists.  There was such
a problem reported on 2004-10-19 but it should have been fixed.

 > Are you sure y'all want me to upload old mail archives into this
 > thing?

That gets my vote.  You should find that Lars and the Gmane team are
quite helpful and responsive. I've been using Gmane over nntp for a
couple of years now.
-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-5OnHrW_Uf=7bTVHRYVQ=IKw at yahoogroups.com  Mon Nov  1 04:27:00 2004
From: antlr-interest-accept-5OnHrW_Uf=7bTVHRYVQ=IKw at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:27 2004
Subject: MODERATE -- amohombe@yahoo.com posted to antlr-interest
Message-ID: <1099312020.279.89946.m6@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  amohombe@yahoo.com 

The message summary:
--------------------
FROM: amohombe@yahoo.com 
DATE: Mon, 01 Nov 2004 12:26:57 -0000 
SUBJECT: Javascript grammar for ANTLR ? 

Is there any javascript grammar for ANTLR? I was not able to
find one for ANTLR :(. 

Thanks in advance, 

Ahmed. 

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=356 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-5OnHrW_Uf=7bTVHRYVQ=IKw@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "amohombe" <amohombe@yahoo.com>
Subject: Javascript grammar for ANTLR ?
Date: Mon, 01 Nov 2004 12:26:57 -0000
Size: 1279
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041101/4d2bb333/attachment.mht
From klaren at cs.utwente.nl  Mon Nov  1 05:37:29 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:27 2004
Subject: [antlr-interest] Python support for ANTLR
In-Reply-To: <cm4umu+dgm5@eGroups.com>
References: <cm4umu+dgm5@eGroups.com>
Message-ID: <20041101133729.GF15290@cs.utwente.nl>


On Mon, Nov 01, 2004 at 09:13:02AM -0000, marqkole wrote:
> Explanation: instead of braces, Python uses indentation to mark blocks of
> code.

Once more *sigh* It would have been such a nice language without it ;)

> In the case of the generated code, the opening brace could be replaced by
> an if statement that is always open (example: "if True:") followed by an
> increased indentation level, while the closing brace can be replaced by
> just a decreased indentation level.

> My problem is that I just can't find where to do this for a single action
> item, such as a pair of spurious braces. Just have a look at the generated
> code in the lexertester examples to see what I mean.

It looks like it's related to to method

   public void gen(AlternativeBlock blk);

and single alternatives. E.g. try remove the () around the 'A' alternative
in simplelexer2.g this will fix the output for the 2nd lexer. Adding an
extra "if True:" to the start of the gen() method does not work 100% of the
cases. There's another "if True:" cropping up from somewhere else.. hrmm..
Looks like it's fixed with commenting inside:

   protected void genAlt(Alternative alt, AlternativeBlock blk)

The lines:

//    else
//       if (!(elem.next instanceof BlockEndElement) && (grammar instanceof LexerGrammar)) {
//          println("if True: # needed to get the indents right genalt");
//       }

Now all the lexertest things run without indentation errors.

I wonder how stringtemplate would deal with this kind off stuff for
antlr3...

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  Chaos is found in greatest abundance wherever order is being sought.
  --- Terry Pratchet



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From H.A.M.Maassen at student.tue.nl  Mon Nov  1 06:17:18 2004
From: H.A.M.Maassen at student.tue.nl (Maassen, H.A.M.)
Date: Mon Dec 20 16:17:27 2004
Subject: [antlr-interest] Difficulty building trees
Message-ID: <1C5C690C06EFE244B83E3F133CA70BDE28583B@studentex6.campus.tue.nl>

Thanks the helpful tips on visualizing trees - the ASTFrame is a nice debugging tool.

It turns out that the difficulties I had in visualizing trees were because I hadn't defined a tree structure in my grammar - I thought that ANTLR assumed one and that the operators such as the "^" were for overriding the default where in fact they seem to be required.

So right now I'm having some problems getting the following to work:

program: rule rule rule;     //or: (rule)*
rule: "a";

The resulting AST seems to only have the encompass "rule". How would I go about fixing it so that my AST would look something like this:

program
|_ rule
|   |_ "a"
|_ rule
|   |_ "a"
|_ rule
    |_ "a"

or, alternatively:

program
|_ "a"
|_ "a"
|_ "a"

Thanks for any help, 
                   Harald Maassen



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 4010 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041101/82f94cd9/attachment.bin
From griffon26 at kfk4ever.com  Mon Nov  1 07:01:27 2004
From: griffon26 at kfk4ever.com (Maurice van der Pot)
Date: Mon Dec 20 16:17:27 2004
Subject: [antlr-interest] Difficulty building trees
In-Reply-To: <1C5C690C06EFE244B83E3F133CA70BDE28583B@studentex6.campus.tue.nl>
References: <1C5C690C06EFE244B83E3F133CA70BDE28583B@studentex6.campus.tue.nl>
Message-ID: <20041101150127.GD18083@kfk4ever.com>

It is explained on this page: http://www.antlr.org/doc/trees.html

Good luck,
Maurice

-- 
Maurice van der Pot

Gentoo Linux Developer   griffon26@gentoo.org     http://www.gentoo.org
Creator of BiteMe!       griffon26@kfk4ever.com   http://www.kfk4ever.com

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041101/45ae5153/attachment.bin
From marq.kole at philips.com  Mon Nov  1 08:17:25 2004
From: marq.kole at philips.com (Marq Kole)
Date: Mon Dec 20 16:17:27 2004
Subject: [antlr-interest] Re: Python support for ANTLR
In-Reply-To: <20041101133729.GF15290@cs.utwente.nl>
Message-ID: <cm5nil+f3ki@eGroups.com>



--- In antlr-interest@yahoogroups.com, Ric Klaren <klaren@c...> 
wrote:
> On Mon, Nov 01, 2004 at 09:13:02AM -0000, marqkole wrote:
> > Explanation: instead of braces, Python uses indentation to mark 
blocks of
> > code.
> 
> Once more *sigh* It would have been such a nice language without 
it ;)
> 
> > In the case of the generated code, the opening brace could be 
replaced by
> > an if statement that is always open (example: "if True:") 
followed by an
> > increased indentation level, while the closing brace can be 
replaced by
> > just a decreased indentation level.
> 
> > My problem is that I just can't find where to do this for a 
single action
> > item, such as a pair of spurious braces. Just have a look at the 
generated
> > code in the lexertester examples to see what I mean.
> 
> It looks like it's related to to method
> 
>    public void gen(AlternativeBlock blk);
> 
> and single alternatives. E.g. try remove the () around the 'A' 
alternative
> in simplelexer2.g this will fix the output for the 2nd lexer. 
Adding an
> extra "if True:" to the start of the gen() method does not work 
100% of the
> cases. There's another "if True:" cropping up from somewhere 
else.. hrmm..
> Looks like it's fixed with commenting inside:
> 
>    protected void genAlt(Alternative alt, AlternativeBlock blk)
> 
> The lines:
> 
> //    else
> //       if (!(elem.next instanceof BlockEndElement) && (grammar 
instanceof LexerGrammar)) {
> //          println("if True: # needed to get the indents right 
genalt");
> //       }
> 
> Now all the lexertest things run without indentation errors.

Thanks, this indeed solves a number of issues. A few still remain, 
but I am working on those. I've uploaded to the Files section an 
updated patch that includes this stuff and then some. 

> I wonder how stringtemplate would deal with this kind off stuff for
> antlr3...

Sure, we'll cross that bridge when we come to it.

> Cheers,
> 
> Ric

Marq






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From amohombe at yahoo.com  Mon Nov  1 04:26:57 2004
From: amohombe at yahoo.com (amohombe)
Date: Mon Dec 20 16:17:27 2004
Subject: [antlr-interest] Javascript grammar for ANTLR ?
Message-ID: <cm5a2h+h70u@eGroups.com>




Is there any javascript grammar for ANTLR? I was not able to find one
for ANTLR :(.

Thanks in advance,

Ahmed.








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Mon Nov  1 10:58:55 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:27 2004
Subject: [antlr-interest] Python support for ANTLR
In-Reply-To: <20041101133729.GF15290@cs.utwente.nl>
References: <cm4umu+dgm5@eGroups.com> <20041101133729.GF15290@cs.utwente.nl>
Message-ID: <144E7549-2C38-11D9-89DD-000A95891192@cs.usfca.edu>



On Nov 1, 2004, at 5:37 AM, Ric Klaren wrote:
> Now all the lexertest things run without indentation errors.
>
> I wonder how stringtemplate would deal with this kind off stuff for
> antlr3...

ST's autoindented output feature is super sweet for this sort of thing 
;)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Mon Nov  1 11:04:47 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:27 2004
Subject: [antlr-interest] More on TokenWithIndex
In-Reply-To: <Pine.LNX.4.44.0410311509080.17547-100000@g4.pauljlucas.org>
References: <Pine.LNX.4.44.0410311509080.17547-100000@g4.pauljlucas.org>
Message-ID: <E6678B4E-2C38-11D9-89DD-000A95891192@cs.usfca.edu>


Hi Paul,

Great stuff!  Shall I post as an "article" or addendum to my AST 
min/max article on antlr.org?

Thanks,
Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From mstudman at gmx.net  Mon Nov  1 16:41:07 2004
From: mstudman at gmx.net (Michael Studman)
Date: Mon Dec 20 16:17:27 2004
Subject: [antlr-interest] Comparing ASTs of the two Java1.5 grammars
In-Reply-To: <cljjvp+5nqg@eGroups.com>
Message-ID: <000001c4c074$a4264f90$bdeb5651@Baboo>


Hi Andy.

Thanks for giving my grammar a test drive!

It seems strange that annotations aren't stored in the AST - that was
not my intention at all (and I think it's very important that they are
there). I will check out why that is happening and get back to the
group.

2a) also seems to be a bug. Again, I'll investigate and get back to you.

Regards,
Michael

> -----Original Message-----
> From: atripp54321 [mailto:atripp@comcast.net]
> Sent: 25 October 2004 20:26
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Comparing ASTs of the two Java1.5 grammars
> 
> 
> 
> I went to update my JavaEmitter code for the new JDK1.5 grammar,
> and I see we actually have two JDK1.5 grammars listed at antlr.org:
> one by Michael Studman and another by Michael Stahl.
> My code depends on the "shape" of the Java AST produced
> by the grammar, and I'm sure eventually one of these two will
> need to be chosen to be included with ANTLR as the "official" java.g.
> 
> So I tried out these two grammars on the
> various new 1.5 features, and here are my notes on
> the ASTs that each of these grammars produce.
> For reference, here's the Sun proposed Java 1.5 grammar:
> http://java.sun.com/docs/books/jls/jls-proposed-changes.html
> 
> 1) Annotations
> Neither grammar stores annotations in the AST.
> This seems right to me, as we don't store comments in the AST either.
> Anyone who's annoyed that comments are not stored in the AST
> will now be even more annoyed :)
> 
> 2) Generics:
> Given this code:
>     public Vector(Collection<? extends E> c) {
> 
> Studman's produces this:
>             TYPE
>               IDENT Collection
>                 TYPE_ARGUMENTS
>                   TYPE_ARGUMENT
>                     WILDCARD_TYPE
>                       TYPE_UPPER_BOUNDS
>                         IDENT E
> 
> And Stahl's produces this:
>            TYPE
>              IDENT Collection
>              TYPE_ARGS
>                WILDCARD
>                  LITERAL_extends
>                  TYPE
>                    IDENT E
>                    TYPE_ARGS
> 
> a) One places the TYPE subtree as a child IDENT, the other as a
sibling.
> I prefer Stahl's...seems strange for IDENT to have a child.
> b) Studman's has the extra TYPE_ARGUMENT node, which I prefer.
> c) The two trees are different under WILDCARD_TYPE. I prefer Studman's
> but I'd rename "TYPE_UPPER_BOUNDS" to "TYPE_EXTENDS" (and
> "TYPE_LOWER_BOUNDS"
> to "TYPE_SUPER").
> d) That extra TYPE_ARGS at the end of Stahl's shouldn't be there (I
think)
> 
> 2) For-each loop:
> Given this code:
>                 for (Integer i : integers) {
>                 }
> 
> Studman's produces this:
>          LITERAL_for
>            FOR_EACH_CLAUSE
>              PARAMETER_DEF
>                MODIFIERS
>                TYPE
>                  IDENT Integer
>                IDENT i
>              EXPR
>                IDENT integers
>            SLIST
> 
> And Stahl's produces this:
>           LITERAL_for
>             PARAMETER_DEF
>               MODIFIERS
>               TYPE
>                 IDENT Integer
>                 TYPE_ARGS
>               IDENT i
>             EXPR
>               IDENT integers
>             SLIST
> 
> I prefer Studman's with the "FOR_EACH_CLAUSE" node which parallels the
> "FOR_INIT",
> "FOR_CONDITION", and "FOR_ITERATOR" nodes in the old "for" syntax.
> 
> 3) Enums:
> Given this code:
>    enum Rank2 implements whatever {ONE, TWO, THREE}
> Studman's produces this:
>       ENUM_DEF
>         MODIFIERS
>         IDENT Rank2
>         IMPLEMENTS_CLAUSE
>           IDENT whatever
>         OBJBLOCK
>           ENUM_CONSTANT_DEF
>             ANNOTATIONS
>             IDENT ONE
>           ENUM_CONSTANT_DEF
>             ANNOTATIONS
>             IDENT TWO
>           ENUM_CONSTANT_DEF
>             ANNOTATIONS
>             IDENT THREE
> 
> Stahl's failed with "unexpected token" exception.
> 
> Given a full enum definitions, Studman's produced an AST that's
identical
> to a class definition, but with ENUM_DEF in place of CLASS_DEF.
> Stahl's failed on this one too.
> 
> 4) Varargs:
> Given this code:
> 	void test(int i, String... strings)
> 
> Studman's produces this:
>         PARAMETERS
>           PARAMETER_DEF
>             MODIFIERS
>             TYPE
>               LITERAL_int
>             IDENT i
>           VARIABLE_PARAMETER_DEF
>             MODIFIERS
>             TYPE
>               IDENT String
>             IDENT strings
> 
> And Stahl's produces this:
>         PARAMETERS
>           PARAMETER_DEF
>             MODIFIERS
>             TYPE
>               LITERAL_int
>             IDENT i
>           PARAMETER_DEF
>             MODIFIERS
>             TYPE
>               IDENT String
>               TYPE_ARGS
>               ELLIPSIS
>             IDENT strings
> 
> I prefer Studman's AST with the explicit VARIABLE_PARAMETER_DEF node.
> 
> 5) Static imports:
> Given this code:
> import static java.lang.Math.PI;
> 
> Studman's produces this:
>   STATIC_IMPORT
>     DOT
>       DOT
>         DOT
>           IDENT java
>           IDENT lang
>         IDENT Math
>       IDENT PI
> 
> And Stahl's produces this:
>   IMPORT
>     LITERAL_static
>     DOT
>       DOT
>         DOT
>           IDENT java
>           IDENT lang
>         IDENT Math
>       IDENT PI
> 
> I prefer Studman's STATIC_IMPORT. The issue here is whether a "static
> import"
> is just an "import" that happens to have a "static" modifier
> (as when a variable is static),
> or whether it's a new type of thing (in the way that a "static block"
> differs
> from a regular block).
> 
> Summary:
> Given that these two both correctly parse Java 1.5 code (which they
seem
> to except for the enum problem noted above), choosing one of these to
> be the "official" java.g comes down to which produces a "better" AST.
> I've listed the differences and it looks to me like Studman's AST's
> look like they're more consistent with the ASTs we get today.
> 
> And of course, some guru should look closely at the grammar to make
> sure that it matches the "official" grammar in the JLS, and comments
as
> needed, make sure token names are consistent, etc.
> 
> Andy
> 
> 
> 
> 
> 
> 
> Yahoo! Groups Links
> 
> 
> 
> 
> 
> 
> 
> ---
> 
> Checked by AVG anti-virus system (http://www.grisoft.com).
> Version: 6.0.778 / Virus Database: 525 - Release Date: 15/10/2004
> 

---

Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.786 / Virus Database: 532 - Release Date: 29/10/2004
 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From anakreonmejdi at yahoo.gr  Tue Nov  2 02:08:40 2004
From: anakreonmejdi at yahoo.gr (Anakreon)
Date: Mon Dec 20 16:17:27 2004
Subject: [antlr-interest] Javascript grammar for ANTLR ?
In-Reply-To: <cm5a2h+h70u@eGroups.com>
References: <cm5a2h+h70u@eGroups.com>
Message-ID: <41875CA8.8010708@yahoo.gr>


amohombe wrote:
> 
> 
> Is there any javascript grammar for ANTLR? I was not able to find one
> for ANTLR :(.
> 
> Thanks in advance,
> 
> Ahmed.
There is for JScript.
See http://storm.cs.unipi.gr/~anakreon/aspa.html

The license is GPL.

Anakreon


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From amohombe at yahoo.com  Tue Nov  2 03:44:02 2004
From: amohombe at yahoo.com (amohombe)
Date: Mon Dec 20 16:17:27 2004
Subject: [antlr-interest] Re: Javascript grammar for ANTLR ?
In-Reply-To: <41875CA8.8010708@yahoo.gr>
Message-ID: <cm7ru2+krk3@eGroups.com>



> There is for JScript.
> See http://storm.cs.unipi.gr/~anakreon/aspa.html
> 
> The license is GPL.
Thank you very much.

Ahmed.
P.S. Maybe you could put the grammers on the Antlr.org site, so that
others find it directly :).





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From anakreonmejdi at yahoo.gr  Tue Nov  2 06:04:22 2004
From: anakreonmejdi at yahoo.gr (Anakreon)
Date: Mon Dec 20 16:17:27 2004
Subject: [antlr-interest] Re: Javascript grammar for ANTLR ?
In-Reply-To: <cm7ru2+krk3@eGroups.com>
References: <cm7ru2+krk3@eGroups.com>
Message-ID: <418793E6.6090908@yahoo.gr>


> P.S. Maybe you could put the grammers on the Antlr.org site, so that
> others find it directly :).
It is there too.


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From H.A.M.Maassen at student.tue.nl  Tue Nov  2 06:36:45 2004
From: H.A.M.Maassen at student.tue.nl (Maassen, H.A.M.)
Date: Mon Dec 20 16:17:27 2004
Subject: [antlr-interest] right binding vs left binding
Message-ID: <1C5C690C06EFE244B83E3F133CA70BDE28583E@studentex6.campus.tue.nl>

Hello,

I hope I'm not annoying with my newbie-ish questions, but here's another one :). I'm getting the hang of the tree construction actions in the parser, but I've run into the following problem:

my grammar (t: id DOT t | id;) accepts strings of the form "a.b.c.d.e.f" and builds trees of the form "a.(b.(c.(d.(e.f))))"

What I need is for my trees to look like "((((a.b).c).d).e).f".

How would I go about doing this with tree-building directives in the parser, with a separate treeparser, or through some other method?

Regards and thanks for your help, Harald Maassen



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 3602 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041102/945f25b3/attachment.bin
From amohombe at yahoo.com  Tue Nov  2 06:36:36 2004
From: amohombe at yahoo.com (amohombe)
Date: Mon Dec 20 16:17:27 2004
Subject: [antlr-interest] Re: Javascript grammar for ANTLR ?
In-Reply-To: <418793E6.6090908@yahoo.gr>
Message-ID: <cm861k+3ltd@eGroups.com>



> It is there too.
Well, there is:

"ASP
Anakreon Mejdi Wed Sep 15, 2004 03:24
The grammar of asp contains lexers for plaintext"

I know no one who is so smart from that phrase to deduce that there's
a Javascript grammer :). IMHO, if the page is called Grammer, than the
first column should be the grammer name :).

Ahmed.





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From mstudman at gmx.net  Tue Nov  2 14:40:41 2004
From: mstudman at gmx.net (Michael Studman)
Date: Mon Dec 20 16:17:27 2004
Subject: [antlr-interest] Comparing ASTs of the two Java1.5 grammars
In-Reply-To: <cljjvp+5nqg@eGroups.com>
Message-ID: <000001c4c12c$fce8e620$6b565651@Baboo>


Hi Andy.

I've checked my grammar and as far as I can tell annotations are
included in the AST.

In most places ANNOTATION nodes are placed under the MODIFIERS node
(since  in Java 5 annotations are considered a special type of
modifier). For package definitions I use an additional node called
ANNOTATIONS to contain ANNOTATIONs as other types of modifiers can't
occur at this point.

Please let me know if we're seeing the same tree!

Michael.

> -----Original Message-----
> From: atripp54321 [mailto:atripp@comcast.net]
> Sent: 25 October 2004 20:26
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Comparing ASTs of the two Java1.5 grammars
> 
> 
> 
> I went to update my JavaEmitter code for the new JDK1.5 grammar,
> and I see we actually have two JDK1.5 grammars listed at antlr.org:
> one by Michael Studman and another by Michael Stahl.
> My code depends on the "shape" of the Java AST produced
> by the grammar, and I'm sure eventually one of these two will
> need to be chosen to be included with ANTLR as the "official" java.g.
> 
> So I tried out these two grammars on the
> various new 1.5 features, and here are my notes on
> the ASTs that each of these grammars produce.
> For reference, here's the Sun proposed Java 1.5 grammar:
> http://java.sun.com/docs/books/jls/jls-proposed-changes.html
> 
> 1) Annotations
> Neither grammar stores annotations in the AST.
> This seems right to me, as we don't store comments in the AST either.
> Anyone who's annoyed that comments are not stored in the AST
> will now be even more annoyed :)
> 
> 2) Generics:
> Given this code:
>     public Vector(Collection<? extends E> c) {
> 
> Studman's produces this:
>             TYPE
>               IDENT Collection
>                 TYPE_ARGUMENTS
>                   TYPE_ARGUMENT
>                     WILDCARD_TYPE
>                       TYPE_UPPER_BOUNDS
>                         IDENT E
> 
> And Stahl's produces this:
>            TYPE
>              IDENT Collection
>              TYPE_ARGS
>                WILDCARD
>                  LITERAL_extends
>                  TYPE
>                    IDENT E
>                    TYPE_ARGS
> 
> a) One places the TYPE subtree as a child IDENT, the other as a
sibling.
> I prefer Stahl's...seems strange for IDENT to have a child.
> b) Studman's has the extra TYPE_ARGUMENT node, which I prefer.
> c) The two trees are different under WILDCARD_TYPE. I prefer Studman's
> but I'd rename "TYPE_UPPER_BOUNDS" to "TYPE_EXTENDS" (and
> "TYPE_LOWER_BOUNDS"
> to "TYPE_SUPER").
> d) That extra TYPE_ARGS at the end of Stahl's shouldn't be there (I
think)
> 
> 2) For-each loop:
> Given this code:
>                 for (Integer i : integers) {
>                 }
> 
> Studman's produces this:
>          LITERAL_for
>            FOR_EACH_CLAUSE
>              PARAMETER_DEF
>                MODIFIERS
>                TYPE
>                  IDENT Integer
>                IDENT i
>              EXPR
>                IDENT integers
>            SLIST
> 
> And Stahl's produces this:
>           LITERAL_for
>             PARAMETER_DEF
>               MODIFIERS
>               TYPE
>                 IDENT Integer
>                 TYPE_ARGS
>               IDENT i
>             EXPR
>               IDENT integers
>             SLIST
> 
> I prefer Studman's with the "FOR_EACH_CLAUSE" node which parallels the
> "FOR_INIT",
> "FOR_CONDITION", and "FOR_ITERATOR" nodes in the old "for" syntax.
> 
> 3) Enums:
> Given this code:
>    enum Rank2 implements whatever {ONE, TWO, THREE}
> Studman's produces this:
>       ENUM_DEF
>         MODIFIERS
>         IDENT Rank2
>         IMPLEMENTS_CLAUSE
>           IDENT whatever
>         OBJBLOCK
>           ENUM_CONSTANT_DEF
>             ANNOTATIONS
>             IDENT ONE
>           ENUM_CONSTANT_DEF
>             ANNOTATIONS
>             IDENT TWO
>           ENUM_CONSTANT_DEF
>             ANNOTATIONS
>             IDENT THREE
> 
> Stahl's failed with "unexpected token" exception.
> 
> Given a full enum definitions, Studman's produced an AST that's
identical
> to a class definition, but with ENUM_DEF in place of CLASS_DEF.
> Stahl's failed on this one too.
> 
> 4) Varargs:
> Given this code:
> 	void test(int i, String... strings)
> 
> Studman's produces this:
>         PARAMETERS
>           PARAMETER_DEF
>             MODIFIERS
>             TYPE
>               LITERAL_int
>             IDENT i
>           VARIABLE_PARAMETER_DEF
>             MODIFIERS
>             TYPE
>               IDENT String
>             IDENT strings
> 
> And Stahl's produces this:
>         PARAMETERS
>           PARAMETER_DEF
>             MODIFIERS
>             TYPE
>               LITERAL_int
>             IDENT i
>           PARAMETER_DEF
>             MODIFIERS
>             TYPE
>               IDENT String
>               TYPE_ARGS
>               ELLIPSIS
>             IDENT strings
> 
> I prefer Studman's AST with the explicit VARIABLE_PARAMETER_DEF node.
> 
> 5) Static imports:
> Given this code:
> import static java.lang.Math.PI;
> 
> Studman's produces this:
>   STATIC_IMPORT
>     DOT
>       DOT
>         DOT
>           IDENT java
>           IDENT lang
>         IDENT Math
>       IDENT PI
> 
> And Stahl's produces this:
>   IMPORT
>     LITERAL_static
>     DOT
>       DOT
>         DOT
>           IDENT java
>           IDENT lang
>         IDENT Math
>       IDENT PI
> 
> I prefer Studman's STATIC_IMPORT. The issue here is whether a "static
> import"
> is just an "import" that happens to have a "static" modifier
> (as when a variable is static),
> or whether it's a new type of thing (in the way that a "static block"
> differs
> from a regular block).
> 
> Summary:
> Given that these two both correctly parse Java 1.5 code (which they
seem
> to except for the enum problem noted above), choosing one of these to
> be the "official" java.g comes down to which produces a "better" AST.
> I've listed the differences and it looks to me like Studman's AST's
> look like they're more consistent with the ASTs we get today.
> 
> And of course, some guru should look closely at the grammar to make
> sure that it matches the "official" grammar in the JLS, and comments
as
> needed, make sure token names are consistent, etc.
> 
> Andy
> 
> 
> 
> 
> 
> 
> Yahoo! Groups Links
> 
> 
> 
> 
> 
> 
> 
> ---
> 
> Checked by AVG anti-virus system (http://www.grisoft.com).
> Version: 6.0.778 / Virus Database: 525 - Release Date: 15/10/2004
> 

---

Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.786 / Virus Database: 532 - Release Date: 29/10/2004
 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Nov  2 15:23:54 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:27 2004
Subject: [antlr-interest] Re: Javascript grammar for ANTLR ?
In-Reply-To: <cm861k+3ltd@eGroups.com>
References: <cm861k+3ltd@eGroups.com>
Message-ID: <4300AEAE-2D26-11D9-89DD-000A95891192@cs.usfca.edu>


Sorry...this is my fault.  When I strip newlines from the descriptions, 
it leaves in \r as I forgot PCs will send that over a browser link 
during POSTs.  Ooops.  I removed the \r and voila: the description is 
better ;)

Ter

On Nov 2, 2004, at 6:36 AM, amohombe wrote:

>
>
>> It is there too.
> Well, there is:
>
> "ASP
> Anakreon Mejdi Wed Sep 15, 2004 03:24
> The grammar of asp contains lexers for plaintext"
>
> I know no one who is so smart from that phrase to deduce that there's
> a Javascript grammer :). IMHO, if the page is called Grammer, than the
> first column should be the grammer name :).
>
> Ahmed.
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>
>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-KXGLknQsGbThiweiMLp_K1c at yahoogroups.com  Tue Nov  2 16:06:32 2004
From: antlr-interest-accept-KXGLknQsGbThiweiMLp_K1c at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:28 2004
Subject: MODERATE -- xzvgtwuvjuac@yahoo.com posted to antlr-interest
Message-ID: <1099440392.406.7295.m21@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  xzvgtwuvjuac@yahoo.com 

The message summary:
--------------------
FROM: xzvgtwuvjuac@yahoo.com 
DATE: Wed, 03 Nov 2004 00:06:24 -0000 
SUBJECT: Important Information 

Refinancing your home is very important when interest rates 
are low. You can save serous amounts of money by taking 
advantage of low interest rates. Do not be left behind Act 
now. 

http://grealus.com/azvhu Please copy and paste the above 
link into your web browser. 

Be sure to take advantage of this now you will be sorry if 
you do not. http://grealus.com/azghu 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=357 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-KXGLknQsGbThiweiMLp_K1c@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "xzvgtwuvjuac" <xzvgtwuvjuac@yahoo.com>
Subject: Important Information
Date: Wed, 03 Nov 2004 00:06:24 -0000
Size: 1714
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041103/cf455685/attachment.mht
From ebell at edgeofreality.com  Tue Nov  2 16:35:43 2004
From: ebell at edgeofreality.com (hero_onethousand)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] line numbers in tree parser
Message-ID: <cm994v+t0fh@eGroups.com>



I apologize in advance if this topic has been discussed, but I had no
luck searching the archive.

I am using a tree parser to perform semantic checks/transformations
and I need to get line numbers to report errors. In the parser I can
use the lexer's shared input state or the line number stored in a
token, but neither of these apply when walking the AST in the tree
parser. AST nodes do not store line numbers like tokens do. 

I am looking for the path of least resistence. My current plan is to
make some minor alterations to CommonAST and the ASTFactory so the
current line number is always copied into the AST. 

Evan A. Bell
Game Programmer
www.edgeofreality.com





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From s2jafer1 at yahoo.com  Wed Nov  3 03:05:57 2004
From: s2jafer1 at yahoo.com (s2jafer1)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] "whitespaces" and "tab characters"  -null in the output
Message-ID: <cmae2l+nent@eGroups.com>




       In my coding i am giving a input for the token, "source" in 

the parser which should accept a string containing "whitespaces" 

and "tab characters" , if the string is entered within double quotes.


"source" token is defined  in the lexer class:

WS : (' ' | '\t')+;

source
    options { testLiterals = true; }
    : ('=') => '='! (WS!)? (' ' | '\n' | '\t')+
    | (~(' ' | '\n' | '\t'))+
    ;


value for "source" token is compared in the parser class :


patternMatch = "[a-zA-Z\\d#$\t\n\f\r_-]*";


i compare the input string with patternMatch.some times i am 
getting "null" in the output.


i want to know the lexer definition and parser definition for 
accepting token values ( strings ) which contains whitespaces and tab 
characters.


let me know if anybody knows the answer













 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-LPf5=HSoItY1BsszuXnn_lo at yahoogroups.com  Wed Nov  3 04:59:40 2004
From: antlr-interest-accept-LPf5=HSoItY1BsszuXnn_lo at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:28 2004
Subject: MODERATE -- thoth2487@libero.it posted to antlr-interest
Message-ID: <1099486780.407.60728.m23@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  thoth2487@libero.it 

The message summary:
--------------------
FROM: thoth2487@libero.it 
DATE: Wed, 03 Nov 2004 12:57:56 -0000 
SUBJECT: lexical nondeterminism between IDENT & LABEL 

Hi to all, I've a very simple language in which there are 
IDENTifiers and jump LABELs. An IDENTifier start with 
('a'...'z')|('A'..'Z') and continue with 
('a'...'z')|('A'..'Z')|('0'..'9') and a LABEL is like an 
IDENTifier but ends with a ':'. When I try following .g I 
obtain always a lexical nondeterminsim which I isn't to 
solve: 

// // QCL parser // class QCLParser extends Parser; 

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=358 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-LPf5=HSoItY1BsszuXnn_lo@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "thoth2487" <thoth2487@libero.it>
Subject: lexical nondeterminism between IDENT & LABEL
Date: Wed, 03 Nov 2004 12:57:56 -0000
Size: 2703
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041103/f3ff109e/attachment.mht
From ora.et.labora at web.de  Wed Nov  3 06:33:49 2004
From: ora.et.labora at web.de (whaefelinger)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] Re: Python support for ANTLR
In-Reply-To: <cm4umu+dgm5@eGroups.com>
Message-ID: <cmaq8d+mhoc@eGroups.com>



Hi,
I'm also about to write a code generator for Python and indeed
indendation levels, empty statements etc are causing some head-
aches.

I solved the indendation problem by just doing something like

 int _tabs_ = tabs;
 JavaBlockFinishingInfo howToFinish = genCommonBlock(blk, true);
 genBlockFinish(howToFinish, throwNoViable);
 tabs = _tabs_;

In other words, I  just  reset the level  to was it was before 
generating the (nested) alternatives.

Worked fine for me 


--- In antlr-interest@yahoogroups.com, "marqkole" <marq.kole@p...> 
wrote:
> The problems I have currently are in the 
examples/python/lexertester 
> directory. There are a few simple tests here, but the generated 
code will give errors due to incorrect indentation. 





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From H.A.M.Maassen at student.tue.nl  Wed Nov  3 06:20:29 2004
From: H.A.M.Maassen at student.tue.nl (Maassen, H.A.M.)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] Case sensitive literals
Message-ID: <1C5C690C06EFE244B83E3F133CA70BDE285842@studentex6.campus.tue.nl>

Hello,
 
When defining literals in the parser-grammar (stat: "if" expr "then" stats "endif";) the generated parser will be case sensitive, and the caseSensitive option is only available for lexers.
 
Do I need to define those literals in the lexer after all or is there a way to make the parser case insensitive that I've overlooked?
 
Thanks for your help,
                 Harald Maassen


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 3538 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041103/d0ae291f/attachment.bin
From demakov at ispras.ru  Wed Nov  3 08:41:02 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] Case sensitive literals
References: <1C5C690C06EFE244B83E3F133CA70BDE285842@studentex6.campus.tue.nl>
Message-ID: <016001c4c1c3$e801c4b0$8cc79553@marlboro>


antlr-2.7.4/metalang.html#_bb2:

In parser rules, strings represent tokens, and each unique string is assigned a token type. However, ANTLR does not create lexer
rules to match the strings. Instead, ANTLR enters the strings into a literals table in the associated lexer. ANTLR will generate
code to test the text of each token against the literals table, and change the token type when a match is encountered before handing
the token off to the parser.

lexer.html#Lexical_Analysis_with_ANTLR Case sensitivity

Case sensitivity for literals is handled separately. That is, set lexer option caseSensitiveLiterals to false when you want the
literals testing to be case-insensitive. Implementing this required changes to the literals table. Instead of adding a String, it
adds an ANTLRHashString that implements a case-insensitive or case-sensitive hashing as desired.

Regards,
Alexey

----- Original Message ----- 
From: "Maassen, H.A.M." <H.A.M.Maassen@student.tue.nl>
To: <antlr-interest@yahoogroups.com>
Sent: Wednesday, November 03, 2004 5:20 PM
Subject: [antlr-interest] Case sensitive literals


> Hello,
>
> When defining literals in the parser-grammar (stat: "if" expr "then" stats "endif";) the generated parser will be case sensitive,
and the caseSensitive option is only available for lexers.
>
> Do I need to define those literals in the lexer after all or is there a way to make the parser case insensitive that I've
overlooked?
>
> Thanks for your help,
>                  Harald Maassen
>
>
>
> Yahoo! Groups Links
>
>
>
>
>




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From H.A.M.Maassen at student.tue.nl  Wed Nov  3 06:54:25 2004
From: H.A.M.Maassen at student.tue.nl (Maassen, H.A.M.)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] Re: case sensitive literals
Message-ID: <1C5C690C06EFE244B83E3F133CA70BDE285847@studentex6.campus.tue.nl>


Never mind - found it
 
*blushes*
 
I'm just going to go ahead and blame the manual ;)
 

	-----Original Message----- 
	From: Maassen, H.A.M. 
	Sent: Wed 11/3/2004 3:20 PM 
	To: antlr-interest@yahoogroups.com 
	Cc: 
	Subject: Case sensitive literals
	
	
	Hello,
	 
	When defining literals in the parser-grammar (stat: "if" expr "then" stats "endif";) the generated parser will be case sensitive, and the caseSensitive option is only available for lexers.
	 
	Do I need to define those literals in the lexer after all or is there a way to make the parser case insensitive that I've overlooked?
	 
	Thanks for your help,
	                 Harald Maassen



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From thoth2487 at libero.it  Wed Nov  3 04:57:56 2004
From: thoth2487 at libero.it (thoth2487)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] lexical nondeterminism between IDENT & LABEL
Message-ID: <cmakkk+1dpn@eGroups.com>




Hi to all, I've a very simple language in which there are IDENTifiers
and jump LABELs. An IDENTifier start with ('a'...'z')|('A'..'Z') and
continue with ('a'...'z')|('A'..'Z')|('0'..'9') and a LABEL is like an
IDENTifier but ends with a ':'. When I try following .g I obtain
always a lexical nondeterminsim which I isn't to solve:

//
//	QCL	parser
//
class QCLParser extends Parser;

task_unit
	:	(	EOL				{ System.out.println("<EOL>"); }
		|	n:SL_COMMENT	{ System.out.println("<SL_COMMENT = '" + n.getText()
+ "'"); }
		|   m:IDENT			{ System.out.println("<IDENT = '" + m.getText() + "'"); }
		|   o:LABEL			{ System.out.println("<LABEL = '" + o.getText() + "'"); }
		)*
		EOF!
	;


//
//	QCL	lexer
//
class QCLLexer extends Lexer;

options	{
	k =	2;								// characters of lookahead
	caseSensitive =	true;				// enable case sensitive mode
	charVocabulary = '\0'..'\377';		// ANSI	range 0..255
}

// whitespace
WS
	:	(	' '
		|	'\t'
		|	'\f'
		)
		{ $setType(Token.SKIP);	}
	;
	
// end of line
EOL
	:	(	"\r\n"		// DOS & Windows file format
		|	'\r'		// Macintosh file format [6.0.1]
		|	'\n'		// Unix	file format	[6.0.1]
		)
		{ newline(); }
	;
	
// single line comment
SL_COMMENT
	:	';'
		(~(	'\r' | '\n'	))*
	;
	
// identifier
IDENT
  	: 	('a'..'z' | 'A'..'Z') 
  		('a'..'z' | 'A'..'Z' | '0'..'9')*
	;
	
// label
LABEL
  	: 	('a'..'z' | 'A'..'Z') 
  		('a'..'z' | 'A'..'Z' | '0'..'9')*
  		':'
	;

Example:

MAIN    is an IDENT
MAIN:   is a LABEL

Can you help me ?

Thank you very much
Silverio Diquigiovanni








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Wed Nov  3 09:49:57 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] lexical nondeterminism between IDENT & LABEL
In-Reply-To: <cmakkk+1dpn@eGroups.com>
References: <cmakkk+1dpn@eGroups.com>
Message-ID: <16777.6725.445579.80489@despot.non.net>


>>>>> "thoth2487" == thoth2487  <thoth2487@libero.it> writes:
[...]

> Hi to all, I've a very simple language in which there are IDENTifiers and
> jump LABELs. An IDENTifier start with ('a'...'z')|('A'..'Z') and continue
> with ('a'...'z')|('A'..'Z')|('0'..'9') and a LABEL is like an IDENTifier
> but ends with a ':'. When I try following .g I obtain always a lexical
> nondeterminsim which I isn't to solve:

Stop trying to do that in the lexer.  Let the lexer return the ID for both
and then have your parsing rules distinguish between ID ":" being a label
or the ID is just an ID.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Wed Nov  3 11:36:41 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] lexical nondeterminism between IDENT & LABEL
In-Reply-To: <16777.6725.445579.80489@despot.non.net>
Message-ID: <Pine.LNX.4.44.0411031133340.17547-100000@g4.pauljlucas.org>


On Wed, 3 Nov 2004, John D. Mitchell wrote:

> >>>>> "thoth2487" == thoth2487  <thoth2487@libero.it> writes:
> 
> > Hi to all, I've a very simple language in which there are IDENTifiers and
> > jump LABELs. An IDENTifier start with ('a'...'z')|('A'..'Z') and continue
> > with ('a'...'z')|('A'..'Z')|('0'..'9') and a LABEL is like an IDENTifier
> > but ends with a ':'. When I try following .g I obtain always a lexical
> > nondeterminsim which I isn't to solve:
> 
> Stop trying to do that in the lexer.  Let the lexer return the ID for both
> and then have your parsing rules distinguish between ID ":" being a label
> or the ID is just an ID.

	What's wrong with using a syntaxtic predicate in the lexer?
	Just because a label happens to have the same character pattern
	as an identifier doesn't mean it's conceptually the same kind
	of token.

	Since ANTLR has a much more powerful lexer than most, why not
	take advantage of it?

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Wed Nov  3 11:50:55 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] lexical nondeterminism between IDENT & LABEL
In-Reply-To: <cmakkk+1dpn@eGroups.com>
References: <cmakkk+1dpn@eGroups.com>
Message-ID: <AD1E063C-2DD1-11D9-A42D-000393B5606C@codetransform.com>


On Nov 3, 2004, at 4:57 AM, thoth2487 wrote:

> 	
> // identifier
> IDENT
>   	: 	('a'..'z' | 'A'..'Z')
>   		('a'..'z' | 'A'..'Z' | '0'..'9')*
> 	;
> 	
> // label
> LABEL
>   	: 	('a'..'z' | 'A'..'Z')
>   		('a'..'z' | 'A'..'Z' | '0'..'9')*
>   		':'
> 	;

Factor it into only one rule:
	
// identifier or
// label
IDENT
   	: 	('a'..'z' | 'A'..'Z')
   		('a'..'z' | 'A'..'Z' | '0'..'9')*
   		':' {$setType(LABEL);}
	;

be sure to add LABEL to your tokens{} section

Monty



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Wed Nov  3 11:54:27 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] lexical nondeterminism between IDENT & LABEL
In-Reply-To: <AD1E063C-2DD1-11D9-A42D-000393B5606C@codetransform.com>
Message-ID: <Pine.LNX.4.44.0411031153190.17547-100000@g4.pauljlucas.org>


On Wed, 3 Nov 2004, Monty Zukowski wrote:

> IDENT
>    	: 	('a'..'z' | 'A'..'Z')
>    		('a'..'z' | 'A'..'Z' | '0'..'9')*
>    		':' {$setType(LABEL);}
> 	;

	Shouldn't that be:


		IDENT
			: 	('a'..'z' | 'A'..'Z')
				('a'..'z' | 'A'..'Z' | '0'..'9')*
				(':' {$setType(LABEL);} )?
			;

	?

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Wed Nov  3 12:13:46 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] lexical nondeterminism between IDENT & LABEL
In-Reply-To: <Pine.LNX.4.44.0411031153190.17547-100000@g4.pauljlucas.org>
References: <Pine.LNX.4.44.0411031153190.17547-100000@g4.pauljlucas.org>
Message-ID: <DDBFC63B-2DD4-11D9-A42D-000393B5606C@codetransform.com>


On Nov 3, 2004, at 11:54 AM, Paul J. Lucas wrote:

>
> On Wed, 3 Nov 2004, Monty Zukowski wrote:
>
>> IDENT
>>    	: 	('a'..'z' | 'A'..'Z')
>>    		('a'..'z' | 'A'..'Z' | '0'..'9')*
>>    		':' {$setType(LABEL);}
>> 	;
>
> 	Shouldn't that be:
>
>
> 		IDENT
> 			: 	('a'..'z' | 'A'..'Z')
> 				('a'..'z' | 'A'..'Z' | '0'..'9')*
> 				(':' {$setType(LABEL);} )?
> 			;
>
> 	?

Absolutely!

Thanks,

Monty



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Wed Nov  3 12:17:30 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] lexical nondeterminism between IDENT & LABEL
In-Reply-To: <16777.6725.445579.80489@despot.non.net>
References: <cmakkk+1dpn@eGroups.com> <16777.6725.445579.80489@despot.non.net>
Message-ID: <635ABFCB-2DD5-11D9-A42D-000393B5606C@codetransform.com>


On Nov 3, 2004, at 9:49 AM, John D. Mitchell wrote:

>
>>>>>> "thoth2487" == thoth2487  <thoth2487@libero.it> writes:
> [...]
>
>> Hi to all, I've a very simple language in which there are IDENTifiers 
>> and
>> jump LABELs. An IDENTifier start with ('a'...'z')|('A'..'Z') and 
>> continue
>> with ('a'...'z')|('A'..'Z')|('0'..'9') and a LABEL is like an 
>> IDENTifier
>> but ends with a ':'. When I try following .g I obtain always a lexical
>> nondeterminsim which I isn't to solve:
>
> Stop trying to do that in the lexer.  Let the lexer return the ID for 
> both
> and then have your parsing rules distinguish between ID ":" being a 
> label
> or the ID is just an ID.
>


Some languages like AREV are made much simpler if the lexer can 
distinguish labels from IDs, that was the whole inspiration for my 
ParserFilter example on my website.

Monty

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Wed Nov  3 12:44:36 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] lexical nondeterminism between IDENT & LABEL
In-Reply-To: <Pine.LNX.4.44.0411031133340.17547-100000@g4.pauljlucas.org>
References: <16777.6725.445579.80489@despot.non.net>
	<Pine.LNX.4.44.0411031133340.17547-100000@g4.pauljlucas.org>
Message-ID: <16777.17204.561887.855653@despot.non.net>


>>>>> "Paul" == Paul J Lucas <pauljlucas@mac.com> writes:
[...]

> 	What's wrong with using a syntaxtic predicate in the lexer?

Theoretically?  Nothing.

> Just because a label happens to have the same character pattern as an
> identifier doesn't mean it's conceptually the same kind of token.

Indeed.

However:

(A) Newbies (and even experienced folks :-) too often try to jam way too
much into the lexer.  This is a Very Bad Thing(tm) and, IMHO, should be
generally discouraged.

(B) A common reason given is that "the language is simple" so just do it in
the lexer.  All too often, that's not the case and semantic context is
required. (See my comment below).

(C) When people start their "simple" solutions in the lexer and things get
wacky, they all too often try to hack things to e.g. push context back into
the lexer from the parser to "fix" the problem (and that's Pure Evil(tm) :-).

> 	Since ANTLR has a much more powerful lexer than most, why not take
> advantage of it?

For a complex example of how to deal with sort of confusion in the lexer,
check out the Number rule near the bottom of the StdC grammar.  This is
dealing with purely syntactic ambiguity because of the many uses of '.'.

Take care,
	John



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Wed Nov  3 14:31:30 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] TreeParsing with various roots
Message-ID: <Pine.LNX.4.44.0411031422050.17547-100000@g4.pauljlucas.org>


	Suppose I have in a parser:

		compExpr
		    : re1rangeExpr
		      (co:compOp! re:rangeExpr!
		      	{
			    ## = #(co, re1, re2)
			}
		      )?
		    ;

		compOp
		    : EQ | NE | LT | LE | GT | GE
		    ;

	How to I write the corresponding Treeparser?

		compExpr
		    : #( xxx re1=rangeExpr re2=RangeExpr )
		    ;

	What goes in the place of the "xxx"?  Ideally, I'd like to
	share the code for all compOps.

	I *could* do:

		compOp
		    : (EQ | NE | LT | LE | GT | GE)
		    	{
			    ##.setType( COMP_OP );
			}
		    ;

	then:

		compExpr
		    : #( co:COMP_OP re1=rangeExpr re2=RangeExpr )
		    	{
			    // do something with co.getText()
			}
		    ;

	But having to use the text of the original token seems a bit
	hokey to me.  Is there a better way?

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Wed Nov  3 14:42:43 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] Re: TreeParsing with various roots
In-Reply-To: <Pine.LNX.4.44.0411031422050.17547-100000@g4.pauljlucas.org>
Message-ID: <cmbmt3+h3dd@eGroups.com>



Paul--

Unfortunately, the answer to your question is "not yet".  Alternatives
for roots should be supported--I started to do that for 2.8, but did
not finish--but 2.x currently does not support them.

3.0 will:  Ter, Monty, and I discussed this at last summer's cabal.

--Loring


--- In antlr-interest@yahoogroups.com, "Paul J. Lucas"
<pauljlucas@m...> wrote:
> 	Suppose I have in a parser:
> 
> 		compExpr
> 		    : re1rangeExpr
> 		      (co:compOp! re:rangeExpr!
> 		      	{
> 			    ## = #(co, re1, re2)
> 			}
> 		      )?
> 		    ;
> 
> 		compOp
> 		    : EQ | NE | LT | LE | GT | GE
> 		    ;
> 
> 	How to I write the corresponding Treeparser?
> 
> 		compExpr
> 		    : #( xxx re1=rangeExpr re2=RangeExpr )
> 		    ;
> 
> 	What goes in the place of the "xxx"?  Ideally, I'd like to
> 	share the code for all compOps.
> 
> 	I *could* do:
> 
> 		compOp
> 		    : (EQ | NE | LT | LE | GT | GE)
> 		    	{
> 			    ##.setType( COMP_OP );
> 			}
> 		    ;
> 
> 	then:
> 
> 		compExpr
> 		    : #( co:COMP_OP re1=rangeExpr re2=RangeExpr )
> 		    	{
> 			    // do something with co.getText()
> 			}
> 		    ;
> 
> 	But having to use the text of the original token seems a bit
> 	hokey to me.  Is there a better way?
> 
> 	- Paul





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Wed Nov  3 14:48:28 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] TreeParsing with various roots
In-Reply-To: <Pine.LNX.4.44.0411031422050.17547-100000@g4.pauljlucas.org>
References: <Pine.LNX.4.44.0411031422050.17547-100000@g4.pauljlucas.org>
Message-ID: <7A565847-2DEA-11D9-B916-000393B5606C@codetransform.com>


On Nov 3, 2004, at 2:31 PM, Paul J. Lucas wrote:

> 	But having to use the text of the original token seems a bit
> 	hokey to me.  Is there a better way?

Not saying it's better, but you could also introduce an imaginary root 
to do the same thing.  Makes your tree bigger, though.

Monty



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Wed Nov  3 21:40:59 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] TreeParsing with various roots
In-Reply-To: <Pine.LNX.4.44.0411031422050.17547-100000@g4.pauljlucas.org>
References: <Pine.LNX.4.44.0411031422050.17547-100000@g4.pauljlucas.org>
Message-ID: <16777.49387.429583.586797@despot.non.net>


>>>>> "Paul" == Paul J Lucas <pauljlucas@mac.com> writes:
[...]

> 	What goes in the place of the "xxx"?  Ideally, I'd like to share
> the code for all compOps.

I prefer to create an "imaginary" token.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-1WBfCpm9DAcelw4tMKAcnRc at yahoogroups.com  Wed Nov  3 23:27:00 2004
From: antlr-interest-accept-1WBfCpm9DAcelw4tMKAcnRc at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:28 2004
Subject: MODERATE -- chris@schanck.net posted to antlr-interest
Message-ID: <1099553220.438.29138.m6@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  chris@schanck.net 

The message summary:
--------------------
FROM: chris@schanck.net 
DATE: Thu, 04 Nov 2004 07:23:58 -0000 
SUBJECT: GnuC/C99? 

Has anyone done any work on the GnuC parser to handle the 
C99 constructs? Or done a straight C99/ANSI C parser? 

I only ask because if I can't find one, I get to do one 
myself... 

Chris 

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=359 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-1WBfCpm9DAcelw4tMKAcnRc@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "crsschanck" <chris@schanck.net>
Subject: GnuC/C99?
Date: Thu, 04 Nov 2004 07:23:58 -0000
Size: 1331
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041104/b7d780de/attachment.mht
From thoth2487 at libero.it  Wed Nov  3 23:30:33 2004
From: thoth2487 at libero.it (thoth2487)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] Re: lexical nondeterminism between IDENT & LABEL
In-Reply-To: <16777.6725.445579.80489@despot.non.net>
Message-ID: <cmclqp+qdli@eGroups.com>



--- In antlr-interest@yahoogroups.com, "John D. Mitchell"
<johnm-antlr@n...> wrote:
> Stop trying to do that in the lexer.  
> Let the lexer return the ID for both and then have your
> parsing rules distinguish between ID ":" being a label
> or the ID is just an ID.

I've tried your suggested parser way with:

ident:  IDENT;

label:  IDENT
        COLON
	;

but in this way a LABEL could be either:

MAIN:     // right LABEL
or
MAIN :    // wrong LABEL due space(s)

so I need to change WS rule from:
 WS: (' '|'\t'|'\f') {$setType(Token.SKIP);};

to
 WS: (' '|'\t'|'\f')*;

Now parser work fine with 'ident' & 'label'
but new WS behaviour make more complex parsers
rules which must check always also presence of WS. Eg:

conditional:
  IF
  (WS)?
  expression
  (WS)?
  goto
  ........ and so on

What I've mistaked ? What do you suggest about ?

Thank you very much
Silverio Diquigiovanni





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Wed Nov  3 23:39:10 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] Re: lexical nondeterminism between IDENT &
 LABEL
In-Reply-To: <cmclqp+qdli@eGroups.com>
Message-ID: <Pine.LNX.4.44.0411032336450.17547-100000@g4.pauljlucas.org>


On Thu, 4 Nov 2004, thoth2487 wrote:

> Now parser work fine with 'ident' & 'label'
> but new WS behaviour make more complex parsers
> rules which must check always also presence of WS. Eg:
> 
> conditional:
>   IF
>   (WS)?
>   expression
>   (WS)?
>   goto
>   ........ and so on
> 
> What I've mistaked ? What do you suggest about ?

	You make the rule include whitespace:

		... ( (WS)? ':' { $setType( LABEL ); } )

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From thoth2487 at libero.it  Thu Nov  4 00:34:46 2004
From: thoth2487 at libero.it (thoth2487)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] Re: lexical nondeterminism between IDENT & LABEL
In-Reply-To: <Pine.LNX.4.44.0411031133340.17547-100000@g4.pauljlucas.org>
Message-ID: <cmcpj6+2b30@eGroups.com>



<pauljlucas@m...> wrote:
 
> What's wrong with using a syntaxtic predicate in the lexer?

Can you try to get me a sample of syntaxtic predicate to solve
below ident/label lexical nondeterminism ? :

INDENT: ('A'..'Z'|'a'..'z')*;
LABEL: ('A'..'Z'|'a'..'z')* ':';

Thank you very much
Silverio Diquigiovanni





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From chris at schanck.net  Wed Nov  3 23:23:58 2004
From: chris at schanck.net (crsschanck)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] GnuC/C99?
Message-ID: <cmclee+sg2l@eGroups.com>




Has anyone done any work on the GnuC parser to handle the C99
constructs? Or done a straight C99/ANSI C parser?

I only ask because if I can't find one, I get to do one myself...

Chris








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Thu Nov  4 01:17:53 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] Re: lexical nondeterminism between IDENT &
 LABEL
In-Reply-To: <cmcpj6+2b30@eGroups.com>
Message-ID: <Pine.LNX.4.44.0411040111320.17547-100000@g4.pauljlucas.org>


On Thu, 4 Nov 2004, thoth2487 wrote:

> Can you try to get me a sample of syntaxtic predicate to solve
> below ident/label lexical nondeterminism ? :

	protected Ident
	    : /* fill in the blank */
	    ;

	IDENT
	    : (Ident (WS)? ':')=> Ident { $setType( LABEL ); }
	    ;

	Monty's solution makes the ':' part of the token; the above
	doesn't.  Hence, the above is "cleaner" from the parser
	perspective.

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From s2jafer1 at yahoo.com  Thu Nov  4 03:03:14 2004
From: s2jafer1 at yahoo.com (s2jafer1)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] help - input to lexer
Message-ID: <cmd29i+hvut@eGroups.com>




     i want to know "how to define lexer and parser filter" such that 

the input for token accepts a string which contains both whitespace 

and tab characters.


The following link which is mentioned below is not opening .

http://www.antlr.org/fieldguide/whitespace







 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From s2jafer1 at yahoo.com  Thu Nov  4 03:05:43 2004
From: s2jafer1 at yahoo.com (s2jafer1)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] help - input to lexer
Message-ID: <cmd2e7+ptvc@eGroups.com>




     i want to know "how to define the token in lexer and in parser" 

such that the input for a token accepts a string which contains both 

whitespace and tab characters along with alpha numeric characters.


The following link which is mentioned below is not opening .

http://www.antlr.org/fieldguide/whitespace









 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Thu Nov  4 08:30:04 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] GnuC/C99?
In-Reply-To: <cmclee+sg2l@eGroups.com>
References: <cmclee+sg2l@eGroups.com>
Message-ID: <16778.22796.630814.572687@despot.non.net>


>>>>> "crsschanck" == crsschanck  <chris@schanck.net> writes:
[...]

> Has anyone done any work on the GnuC parser to handle the C99 constructs?
> Or done a straight C99/ANSI C parser?

I personally haven't heard of anyone updating the StdC grammar for C99.

If you send me a copy of the C99 standard, I'd help.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Thu Nov  4 08:35:01 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] GnuC/C99?
In-Reply-To: <16778.22796.630814.572687@despot.non.net>
References: <cmclee+sg2l@eGroups.com> <16778.22796.630814.572687@despot.non.net>
Message-ID: <798C2FFD-2E7F-11D9-B916-000393B5606C@codetransform.com>


I've actually got a set of notes on this since I wrote a bid to upgrade 
the toolkit to C99.

I also have one other client who started a C99 grammar from the spec.  
It's not working yet but it might be another good starting point.  
Probably less work to start with the GCC toolkit, but this client 
wanted a clear mapping from rules to sections in the spec.

Monty

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html

On Nov 4, 2004, at 8:30 AM, John D. Mitchell wrote:

>
>>>>>> "crsschanck" == crsschanck  <chris@schanck.net> writes:
> [...]
>
>> Has anyone done any work on the GnuC parser to handle the C99 
>> constructs?
>> Or done a straight C99/ANSI C parser?
>
> I personally haven't heard of anyone updating the StdC grammar for C99.
>
> If you send me a copy of the C99 standard, I'd help.
>
> Take care,
> 	John
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Thu Nov  4 09:00:39 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] Re: lexical nondeterminism between IDENT & LABEL
In-Reply-To: <cmclqp+qdli@eGroups.com>
References: <16777.6725.445579.80489@despot.non.net>
	<cmclqp+qdli@eGroups.com>
Message-ID: <16778.24631.556886.484367@despot.non.net>


>>>>> "thoth2487" == thoth2487  <thoth2487@libero.it> writes:
[...]

> MAIN: // right LABEL or MAIN : // wrong LABEL due space(s)

Well, I don't know what language you're trying to build so it's hard to
give you specific advice.

If your label construct is truly syntactic then using the fixed version of
Monty's example of doing it in the lexer is a reasonable approach.

However, if the colon is is overloaded (like '.' in the C language) but the
ambiguities are all purely syntactic in nature then doing the more
complicated factoring as exemplified by the Number rule in the StdC lexer
is a reasonable approach.

However, if the ambiguities related to ':' in your language require
semantic context then how you should resolve it in the parser depends on
the semantics of the language.  For an example of this, check out the
StdCParser.g and look for the rules using COLON.


> so I need to change WS rule from: WS: (' '|'\t'|'\f')
> {$setType(Token.SKIP);};

> to WS: (' '|'\t'|'\f')*;

That's pretty much never a good idea for exactly the reason that you
discovered.

Hope this helps,
		John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Thu Nov  4 09:03:26 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] Re: lexical nondeterminism between IDENT & LABEL
In-Reply-To: <Pine.LNX.4.44.0411032336450.17547-100000@g4.pauljlucas.org>
References: <cmclqp+qdli@eGroups.com>
	<Pine.LNX.4.44.0411032336450.17547-100000@g4.pauljlucas.org>
Message-ID: <16778.24798.542124.416238@despot.non.net>


>>>>> "Paul" == Paul J Lucas <pauljlucas@mac.com> writes:
[...]

> 	You make the rule include whitespace:

> 		... ( (WS)? ':' { $setType( LABEL ); } )

Hmm... I thought the OP said that the LABEL's could NOT have any WS between
the ID and the ':'?

Thanks,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Thu Nov  4 09:07:05 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] Re: lexical nondeterminism between IDENT &
 LABEL
In-Reply-To: <16778.24798.542124.416238@despot.non.net>
Message-ID: <Pine.LNX.4.44.0411040904410.17547-100000@g4.pauljlucas.org>


On Thu, 4 Nov 2004, John D. Mitchell wrote:

> >>>>> "Paul" == Paul J Lucas <pauljlucas@mac.com> writes:
> [...]
> 
> > 	You make the rule include whitespace:
> 
> > 		... ( (WS)? ':' { $setType( LABEL ); } )
> 
> Hmm... I thought the OP said that the LABEL's could NOT have any WS between
> the ID and the ':'?

	Maybe.  I don't remember.  I'm just going by what a label is in,
	say, C.  The OP is free to delete the "(WS)?"

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Thu Nov  4 09:08:18 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] GnuC/C99?
In-Reply-To: <798C2FFD-2E7F-11D9-B916-000393B5606C@codetransform.com>
References: <cmclee+sg2l@eGroups.com>
	<16778.22796.630814.572687@despot.non.net>
	<798C2FFD-2E7F-11D9-B916-000393B5606C@codetransform.com>
Message-ID: <16778.25090.537444.257429@despot.non.net>


>>>>> "Monty" == Monty Zukowski <monty@codetransform.com> writes:
[...]
> I've actually got a set of notes on this since I wrote a bid to upgrade
> the toolkit to C99.

Excellent.

> I also have one other client who started a C99 grammar from the spec.
> It's not working yet but it might be another good starting point.
> Probably less work to start with the GCC toolkit, but this client wanted
> a clear mapping from rules to sections in the spec.

Hmm... Did the committee significantly change the grammar in the C99 spec?
FWIW, the StdC grammar was (originally) built to parallel the original
Standard C specification but with the appropriate/necessary LR->LL
changes. So, I'm not clear on how starting from scratch with the C99 spec
would be any better than starting with the old StdC grammar.

Thanks,
	John



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ewbank at synopsys.com  Thu Nov  4 12:08:24 2004
From: ewbank at synopsys.com (Bryan Ewbank)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] ANTLR for a compiler
References: <cmd2e7+ptvc@eGroups.com>
Message-ID: <011a01c4c2aa$0a3c9d70$cc05300a@internal.synopsys.com>


I've been working on building a compiler - not a translator, but a
code-generating compiler - in ANTLR, and I'm getting frustrated.  I am
seriously thinking of abandoning ANTLR in favor of Bison simply because of
the complexity of writing a tree parser (versus a typical visitor-pattern
with preorder/postorder traversal).

I'm currently working on building the symbol table from walking the AST, and
it seems to keep degenerating into a series of "( . )*" productions to cover
that which isn't of interest -- for example, all the expression operators
are not really interesting, so I simply want to pass over them unchanged.

So, can anyone that is using ANTLR for compilation give me guidance,
reassurance, or a shoulder to cry one?  Will there be a profound "aha"
moment after which I will be an ANTLR tree-parser king, or do my files
degenerate into line noise?

Any experienced voice will be appreciated.

Frustratedly,
-- Bryan Ewbank



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ewbank at synopsys.com  Thu Nov  4 12:12:12 2004
From: ewbank at synopsys.com (Bryan Ewbank)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] TreeParsing with various roots
References: <Pine.LNX.4.44.0411031422050.17547-100000@g4.pauljlucas.org> <7A565847-2DEA-11D9-B916-000393B5606C@codetransform.com>
Message-ID: <013a01c4c2aa$92190a80$cc05300a@internal.synopsys.com>


From: "Monty Zukowski" <monty@codetransform.com>
To: <antlr-interest@yahoogroups.com>
Sent: Wednesday, November 03, 2004 17:48
Subject: Re: [antlr-interest] TreeParsing with various roots


>
> On Nov 3, 2004, at 2:31 PM, Paul J. Lucas wrote:
>
> > But having to use the text of the original token seems a bit
> > hokey to me.  Is there a better way?
>
> Not saying it's better, but you could also introduce an imaginary root
> to do the same thing.  Makes your tree bigger, though.

Perhaps an OPERATOR type, as you suggest, but and introduce a subtype member
to preserve the original.  It at least avoids looking at the text and
preserves the information.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Thu Nov  4 12:12:58 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] ANTLR for a compiler
In-Reply-To: <011a01c4c2aa$0a3c9d70$cc05300a@internal.synopsys.com>
References: <cmd2e7+ptvc@eGroups.com> <011a01c4c2aa$0a3c9d70$cc05300a@internal.synopsys.com>
Message-ID: <EBA21916-2E9D-11D9-B840-000393B5606C@codetransform.com>


Are you using grammar subclassing?  I typically write a 'super' tree 
grammar that matches the whole tree grammar, and then only subclass the 
rules which I want to do something in.

Also, have you looked at the findAll... functions which do pattern 
matching on trees?

Monty

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html

On Nov 4, 2004, at 12:08 PM, Bryan Ewbank wrote:

>
> I'm currently working on building the symbol table from walking the 
> AST, and
> it seems to keep degenerating into a series of "( . )*" productions to 
> cover
> that which isn't of interest -- for example, all the expression 
> operators
> are not really interesting, so I simply want to pass over them 
> unchanged.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Thu Nov  4 12:14:31 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] TreeParsing with various roots
In-Reply-To: <013a01c4c2aa$92190a80$cc05300a@internal.synopsys.com>
References: <Pine.LNX.4.44.0411031422050.17547-100000@g4.pauljlucas.org> <7A565847-2DEA-11D9-B916-000393B5606C@codetransform.com> <013a01c4c2aa$92190a80$cc05300a@internal.synopsys.com>
Message-ID: <23287550-2E9E-11D9-B840-000393B5606C@codetransform.com>


On Nov 4, 2004, at 12:12 PM, Bryan Ewbank wrote:

>
> From: "Monty Zukowski" <monty@codetransform.com>
> To: <antlr-interest@yahoogroups.com>
> Sent: Wednesday, November 03, 2004 17:48
> Subject: Re: [antlr-interest] TreeParsing with various roots
>
>
>>
>> On Nov 3, 2004, at 2:31 PM, Paul J. Lucas wrote:
>>
>>> But having to use the text of the original token seems a bit
>>> hokey to me.  Is there a better way?
>>
>> Not saying it's better, but you could also introduce an imaginary root
>> to do the same thing.  Makes your tree bigger, though.
>
> Perhaps an OPERATOR type, as you suggest, but and introduce a subtype 
> member
> to preserve the original.  It at least avoids looking at the text and
> preserves the information.
>
>



Yeah, that's what I meant.  So the tree is #(COMP_OP LE 1 2) or 
whatever, with COMP_OP as the root, the other op, in this case LE as 
the first child.

Monty



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Thu Nov  4 12:35:11 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] TreeParsing with various roots
In-Reply-To: <23287550-2E9E-11D9-B840-000393B5606C@codetransform.com>
Message-ID: <Pine.LNX.4.44.0411041234180.17547-100000@g4.pauljlucas.org>


On Thu, 4 Nov 2004, Monty Zukowski wrote:

> Yeah, that's what I meant.  So the tree is #(COMP_OP LE 1 2) or 
> whatever, with COMP_OP as the root, the other op, in this case LE as 
> the first child.

	This is what I ended up doing simply because it was the easiest
	thing to do and involved the least voodoo.

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Thu Nov  4 12:40:04 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] ANTLR for a compiler
In-Reply-To: <011a01c4c2aa$0a3c9d70$cc05300a@internal.synopsys.com>
Message-ID: <Pine.LNX.4.44.0411041238340.17547-100000@g4.pauljlucas.org>


On Thu, 4 Nov 2004, Bryan Ewbank wrote:

> I've been working on building a compiler - not a translator, but a
> code-generating compiler - in ANTLR, and I'm getting frustrated.  I am
> seriously thinking of abandoning ANTLR in favor of Bison simply because of
> the complexity of writing a tree parser

	You don't *have* to write a tree parser at all in ANTLR.  In
	the action routines of your (non-tree) parser, you simply do
	what you would have done using yacc/bison.

	Why do you want a tree parser?

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Thu Nov  4 12:43:00 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] ANTLR for a compiler
In-Reply-To: <Pine.LNX.4.44.0411041238340.17547-100000@g4.pauljlucas.org>
References: <Pine.LNX.4.44.0411041238340.17547-100000@g4.pauljlucas.org>
Message-ID: <1E28A7EA-2EA2-11D9-B840-000393B5606C@codetransform.com>


On Nov 4, 2004, at 12:40 PM, Paul J. Lucas wrote:

>
> On Thu, 4 Nov 2004, Bryan Ewbank wrote:
>
>> I've been working on building a compiler - not a translator, but a
>> code-generating compiler - in ANTLR, and I'm getting frustrated.  I am
>> seriously thinking of abandoning ANTLR in favor of Bison simply 
>> because of
>> the complexity of writing a tree parser
>
> 	You don't *have* to write a tree parser at all in ANTLR.  In
> 	the action routines of your (non-tree) parser, you simply do
> 	what you would have done using yacc/bison.
>
> 	Why do you want a tree parser?
>

Perhaps he wants more than one pass.

Monty



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Thu Nov  4 12:46:45 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] ANTLR for a compiler
In-Reply-To: <1E28A7EA-2EA2-11D9-B840-000393B5606C@codetransform.com>
Message-ID: <Pine.LNX.4.44.0411041246010.17547-100000@g4.pauljlucas.org>


On Thu, 4 Nov 2004, Monty Zukowski wrote:

> Perhaps he wants more than one pass.

	But bison doesn't do that either so it's not clear how his
	reverting to bison would help.  (It's probably best to let him
	answer than speculate.)

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Thu Nov  4 13:23:09 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] ANTLR for a compiler
In-Reply-To: <011a01c4c2aa$0a3c9d70$cc05300a@internal.synopsys.com>
References: <cmd2e7+ptvc@eGroups.com> <011a01c4c2aa$0a3c9d70$cc05300a@internal.synopsys.com>
Message-ID: <B9E7AF71-2EA7-11D9-89DD-000A95891192@cs.usfca.edu>


Hi Bryan,

You want JBurg or something similar: a tree walker that is explicitly 
designed to generate code.  You can have ambiguous patterns with 
associated costs so that x+1 can be matched either as add one or 
increment.  here is a lab from my grad course where we generate machine 
code from an AST:

http://www.cs.usfca.edu/~parrt/course/652/labs/jburg.html

For example, I say:

JBurg descriptions looks like ANTLR tree grammars except that the 
parentheses are in a different spot (prefix vs postfix notation):

reg : #(ADD r1:reg r2:reg) {...emit instruction(s)...}

  and burg and friends use

reg : ADD(reg r1, reg r2) : 1 {...emit instruction(s)...}

where : 1 implies cost 1. Costs usually are just relative numbers but 
can mean "how many instructions were required?"

ANTLR tree walkers are not designed specifically for instruction 
selection; rather the opposite. :)  Building actual compilers has never 
been my focus (unless you count bytecode compilers, which are much 
easier).

Terence





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From iank at bearcave.com  Thu Nov  4 16:55:03 2004
From: iank at bearcave.com (iank@bearcave.com)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] ANTLR for a compiler
Message-ID: <200411050055.iA50t3m22100@shell2.webquarry.com>



  In my opinion the power of ANTLR is as a parser generator for
  language parsers, not tree parsers.  Given my biases, I'd leave tree
  parsing entirely out of ANTLR.  Automatic tree construction and tree
  parsing seem to have been the source of the majority of problems
  I've seen reported here.  I understand and respect the fact that
  there are other view, I'm just describing mine.

  When I use ANTLR I build a tree of my own design from the parser.
  I build my trees "by hand" (e.g., calling my own tree factory code
  and linking the tree together recursively).  Then I traverse this
  tree using custom tree walker code.  For complex languages (like
  Verilog, for example), multiple passes are necessary (and then there
  are complex issues like elaboration that have to be dealt with).

  I think that your comment about being frustrated with ANTLR and
  using Bison instead will not be very productive for you.  To me the
  advantages of an ANTLR parser compared to Bison are huge.  Going to
  Bison will not help with your tree walker issue, as far as I can
  see.  In using Bison you will simply be making a choice to use
  technology that is over 25 years old, rather than technology
  developed within the last decade.  I would not willingly use
  YACC/Bison ever again.  I've done enough YACC grammar debugging for
  one lifetime.

  I think that it might help to step back from your software and work
  on the design of your compiler passes.  Do not be afraid of multiple
  passes over internal trees.  In most cases they are not that time
  consuming.

  Ian Kaplan


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Thu Nov  4 21:45:18 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] Re: ANTLR for a compiler
In-Reply-To: <Pine.LNX.4.44.0411041238340.17547-100000@g4.pauljlucas.org>
Message-ID: <cmf41e+t4ma@eGroups.com>



--- In antlr-interest@yahoogroups.com, "Paul J. Lucas"
<pauljlucas@m...> wrote:
> On Thu, 4 Nov 2004, Bryan Ewbank wrote:
> 
> > I've been working on building a compiler - not a translator, but a
> > code-generating compiler - in ANTLR, and I'm getting frustrated.  I am
> > seriously thinking of abandoning ANTLR in favor of Bison simply
because of
> > the complexity of writing a tree parser
> 
> 	You don't *have* to write a tree parser at all in ANTLR.  In
> 	the action routines of your (non-tree) parser, you simply do
> 	what you would have done using yacc/bison.

Which is to build a parse tree manually, do a painful transformation
to a custom tree which is then converted to a graph for dataflow
analysis and optimization, transform the graph in one or more passes,
and generate code.

It is also worth noting that for ambiguous languages, the lex/yacc (or
flex/bison) approach often involves implementing feedback from the
parser to the lexer.  The resulting parser is pretty fragile from a
maintainability standpoint, but is tolerated because the language
grammar is pretty much fixed--the language being parsed is not subject
to reengineering except by a standards committee as a rule.  I should
note that lex/yacc is not commonly used in compiler construction--the
common approach is a manually constructed recursive descent recognizer.

> 
> 	Why do you want a tree parser?

Except for simple translation problems, trees and graphs are critical.
 Stallman's big achievement with GCC was RTL (Register Transfer
Language) for describing nodes, connections, and legal transformations
for GCC optimization.  That enables all of the GCC front ends (C/C++,
Fortran, Ada, ...) to share a common backend for each target processor
and for the GCC compiler suite to target a wide range of processors.

--Loring

> 
> 	- Paul





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Thu Nov  4 22:23:13 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] Re: ANTLR for a compiler
In-Reply-To: <B9E7AF71-2EA7-11D9-89DD-000A95891192@cs.usfca.edu>
Message-ID: <cmf68h+h136@eGroups.com>



Burg might be useful for the final passes, but it is not an
all-purpose optimization tool.  lcc used burg, but is not reported to
have achieved great optimization.  My impression is that burg is good
for peephole optimization and the like, but not for the high-level
transformations that can be achieved after dataflow analysis.

--Loring


--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> Hi Bryan,
> 
> You want JBurg or something similar: a tree walker that is explicitly 
> designed to generate code.  You can have ambiguous patterns with 
> associated costs so that x+1 can be matched either as add one or 
> increment.  here is a lab from my grad course where we generate machine 
> code from an AST:
> 
> http://www.cs.usfca.edu/~parrt/course/652/labs/jburg.html
> 
> For example, I say:
> 
> JBurg descriptions looks like ANTLR tree grammars except that the 
> parentheses are in a different spot (prefix vs postfix notation):
> 
> reg : #(ADD r1:reg r2:reg) {...emit instruction(s)...}
> 
>   and burg and friends use
> 
> reg : ADD(reg r1, reg r2) : 1 {...emit instruction(s)...}
> 
> where : 1 implies cost 1. Costs usually are just relative numbers but 
> can mean "how many instructions were required?"
> 
> ANTLR tree walkers are not designed specifically for instruction 
> selection; rather the opposite. :)  Building actual compilers has never 
> been my focus (unless you count bytecode compilers, which are much 
> easier).
> 
> Terence





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From demakov at ispras.ru  Thu Nov  4 23:59:35 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] ANTLR for a compiler
References: <cmd2e7+ptvc@eGroups.com> <011a01c4c2aa$0a3c9d70$cc05300a@internal.synopsys.com>
Message-ID: <010401c4c30d$6421e2b0$8cc79553@marlboro>


From: "Bryan Ewbank" <ewbank@synopsys.com>
> I've been working on building a compiler - not a translator, but a
> code-generating compiler - in ANTLR, and I'm getting frustrated.  I am
> seriously thinking of abandoning ANTLR in favor of Bison simply because of
> the complexity of writing a tree parser (versus a typical visitor-pattern
> with preorder/postorder traversal).

My approach is to use ANTLR only for parsing and manually write parser actions
to create heterogenous tree. Tree structure should is described separately
and used as source for generation of tree node classes, visitors, tree walkers etc

It is already implemented in my project TreeDL. Visit http://treedl.sourceforge.net
for documentation, example and downloads. It was discussed in this list in October,
you can check list archives.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Anthony.Youngman at ECA-International.com  Fri Nov  5 01:24:27 2004
From: Anthony.Youngman at ECA-International.com (Anthony Youngman)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] Re: lexical nondeterminism between IDENT & LABEL
Message-ID: <C7FE35004D40FD45AA342991B88CE40409B06B@lnml1.eca-international.local>


I don't know the OP's language, but I do know (very well) the AREV class
of languages that Monty mentioned.

And the original lexer that parsed that language used a "state
transition table". It's damn difficult to implement that table in an
ANTLR lexer. It's damn difficult to implement that table in an ANTLR
parser.

But creating a filter between the lexer and parser, who's sole purpose
is to provide semantic analysis of the token stream from the lexer
before it gets to the parser, makes analysing these languages a doddle.

Currently the lexer does both token and semantic analysis. It works a
lot of the time. But for some languages its a disaster, and it would be
nice to be able to split the two jobs apart.

Cheers,
Wol

-----Original Message-----
From: John D. Mitchell [mailto:johnm-antlr@non.net] 
Sent: 04 November 2004 17:01
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: lexical nondeterminism between IDENT &
LABEL


Well, I don't know what language you're trying to build so it's hard to
give you specific advice.

If your label construct is truly syntactic then using the fixed version
of
Monty's example of doing it in the lexer is a reasonable approach.

However, if the colon is is overloaded (like '.' in the C language) but
the
ambiguities are all purely syntactic in nature then doing the more
complicated factoring as exemplified by the Number rule in the StdC
lexer
is a reasonable approach.

However, if the ambiguities related to ':' in your language require
semantic context then how you should resolve it in the parser depends on
the semantics of the language.  For an example of this, check out the
StdCParser.g and look for the rules using COLON.



****************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 8272 5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

****************************************************************************



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From marq.kole at philips.com  Fri Nov  5 01:56:42 2004
From: marq.kole at philips.com (Marq Kole)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] ANTLR for Python
Message-ID: <cmfioq+etlp@eGroups.com>



Hi,

I've just uploaded the latest patch in the Files/ANTLR Python 
directory. It now runs all examples flawlessly and has the build 
process for the Python runtime integrated in the ANTLR build 
process. 

I am looking for a few extensions in the way ANTLR handles Python 
grammars. At this moment the header { } block is supported, but just 
like the C++ runtime has the option to have different kinds of 
headers, whose contents are placed in different parts of the 
generated code, I would like to have something similar in Python. To 
be more precise, I would like to have a header whose contents are 
added to the __init__ method of the generated parser, and also a 
header whose contents are added at the end of all generated code, at 
the outer indentation level. That would allow one to add self-
testing code to the grammar, or add another class that uses the 
creater scanner/parser/treeparser classes directly.

Could someone give me a pointer to where in the ANTLR source code 
this kind of stuff is handled so I can add the 
abovementioned "headers"? Also, if anyone else has a good idea on 
what more could be added to the Python runtime, I am open to 
suggestions.

Regards,
Marq







 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ewbank at synopsys.com  Fri Nov  5 08:21:41 2004
From: ewbank at synopsys.com (Bryan Ewbank)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] ANTLR for a compiler
References: <200411050055.iA50t3m22100@shell2.webquarry.com>
Message-ID: <00ef01c4c353$890710a0$cc05300a@internal.synopsys.com>


>   I think that your comment about being frustrated with ANTLR and
>   using Bison instead will not be very productive for you.  To me the
>   advantages of an ANTLR parser compared to Bison are huge.  Going to
>   Bison will not help with your tree walker issue, as far as I can
>   see.  In using Bison you will simply be making a choice to use
>   technology that is over 25 years old, rather than technology
>   developed within the last decade.  I would not willingly use
>   YACC/Bison ever again.  I've done enough YACC grammar debugging for
>   one lifetime.

I agree completely; Bison isn't that bad - it pays the bills - but ANTLR
does a bit more with just a parser.

The trade off is more in the nature of a business decision.  If I'm only
using ANTLR for the parser/scanner, then the benefit is not nearly
what it would be most of the passes are treeparsers.

>   I think that it might help to step back from your software and work
>   on the design of your compiler passes.  Do not be afraid of multiple
>   passes over internal trees.  In most cases they are not that time
>   consuming.

That's the plan, and is also the pain.  Each of those tree-parsers requires
a complete set of rules to describe the tree being passed from the previous
phase - the content of the tree changes as it flows down the pipeline, so
there isn't "just one tree type".

For example, the tree before normalization might have "(= x (+ x 1))" as
well as "(++ x)",
but after normalization there will be no "++" nodes.   Therefore, passes
after that
normalization should report "++" nodes as errors.  Similarly, one pass will
remove all
nodes of a certain type by normalizing the children - so passes after that
one will not
see the same tree node types as those before it.

Ah well, I'll read through the responses and see what the wisdom of the
informed can tell me.  Sorry to share my bad day :-(



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Fri Nov  5 09:38:56 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] ANTLR for a compiler
In-Reply-To: <00ef01c4c353$890710a0$cc05300a@internal.synopsys.com>
References: <200411050055.iA50t3m22100@shell2.webquarry.com> <00ef01c4c353$890710a0$cc05300a@internal.synopsys.com>
Message-ID: <91A59324-2F51-11D9-AE6E-000393B5606C@codetransform.com>


On Nov 5, 2004, at 8:21 AM, Bryan Ewbank wrote:

>
> That's the plan, and is also the pain.  Each of those tree-parsers 
> requires
> a complete set of rules to describe the tree being passed from the 
> previous
> phase - the content of the tree changes as it flows down the pipeline, 
> so
> there isn't "just one tree type".
>
> For example, the tree before normalization might have "(= x (+ x 1))" 
> as
> well as "(++ x)",
> but after normalization there will be no "++" nodes.   Therefore, 
> passes
> after that
> normalization should report "++" nodes as errors.  Similarly, one pass 
> will
> remove all
> nodes of a certain type by normalizing the children - so passes after 
> that
> one will not
> see the same tree node types as those before it.
>
> Ah well, I'll read through the responses and see what the wisdom of the
> informed can tell me.  Sorry to share my bad day :-(
>

Well, you can still cram all the rules into one tree parser.  Just 
because you don't need the #(++ x) rule doesn't mean it can't be there. 
  When you normalize your children put 'em in a new node type and hence 
have a new tree rule.

For instance my AREV to VB parser had a tree grammar that was the 
combination of AREV and VB.  I had some rules like

expr: arevExpr | vbExpr;
stmt: arevStmt | vbStmt;

Then once I was totally VB I could override expr thusly

expr: vbExpr;

That may be a bit simplistic for your compiler, but hopefully you get 
the idea.

A simple way to error check might be to have a visitor that runs 
through the tree to detect unwanted nodes, so that after pass X you 
would run it and make sure you no longer have "++" nodes anywhere in 
your tree.

Monty

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Fri Nov  5 11:51:32 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] just added a "lexers, parser integration" blog
Message-ID: <17E02978-2F64-11D9-89DD-000A95891192@cs.usfca.edu>


Howdy,

I've started formalizing ideas on how the lexers work in ANTLR 3 
(though I have a prototyped implementation already) and how the parser 
/ lexer interact.

http://www.antlr.org/blog/antlr3/lexical.tml

Lots of stuff in there about how to emit tokens etc...

Please let me know if you see anything frightening in there.  I'll keep 
working on this today probably to nail down more details.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Fri Nov  5 13:45:54 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] ANTLR for Python
In-Reply-To: <cmfioq+etlp@eGroups.com>
References: <cmfioq+etlp@eGroups.com>
Message-ID: <117C7938-2F74-11D9-89DD-000A95891192@cs.usfca.edu>


On Nov 5, 2004, at 1:56 AM, Marq Kole wrote:
> Hi,
>
> I've just uploaded the latest patch in the Files/ANTLR Python
> directory. It now runs all examples flawlessly and has the build
> process for the Python runtime integrated in the ANTLR build
> process.

Wow!  Amazing.  Great work :)

> I am looking for a few extensions in the way ANTLR handles Python
> grammars. At this moment the header { } block is supported, but just
> like the C++ runtime has the option to have different kinds of
> headers, whose contents are placed in different parts of the
> generated code, I would like to have something similar in Python. To
> be more precise, I would like to have a header whose contents are
> added to the __init__ method of the generated parser, and also a
> header whose contents are added at the end of all generated code, at
> the outer indentation level. That would allow one to add self-
> testing code to the grammar, or add another class that uses the
> creater scanner/parser/treeparser classes directly.
>
> Could someone give me a pointer to where in the ANTLR source code
> this kind of stuff is handled so I can add the
> abovementioned "headers"?

Well, I normally just add any action before the grammar rules to the 
output class, which can include

{
.... __init__ ...
}

Then you don't need to mess with the header thing.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Fri Nov  5 18:14:34 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] 'humans should not have to grok xml' article
Message-ID: <99E2EC7E-2F99-11D9-89DD-000A95891192@cs.usfca.edu>


Heh, somebody submitted my xml article to

http://discuss.joelonsoftware.com/default.asp? 
pg=pgDiscussThread&ixDiscussTopicParent=18566&ixDiscussGroup=8

as a potential for "best software article".  If you feel like it, you  
can vote (positively or negatively of course according to your view on  
the matter).  Joel will apparently collect the best ones and put in a  
book he's editing.

I have a huge amount of comments collected by ibm on the article, but  
they are anonymously submitted usually.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-fIITm=9HdAlDDy12bqM549g at yahoogroups.com  Fri Nov  5 18:22:04 2004
From: antlr-interest-accept-fIITm=9HdAlDDy12bqM549g at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:28 2004
Subject: MODERATE -- hst_12345@yahoo.com posted to antlr-interest
Message-ID: <1099707724.278.30575.m7@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  hst_12345@yahoo.com 

The message summary:
--------------------
FROM: hst_12345@yahoo.com 
DATE: Sat, 06 Nov 2004 02:21:02 -0000 
SUBJECT: multiple lexer 

I am wokring on a project to parse expressions which is part
of the doc. So I wrote a seperate parser for the expression.
And use multiple lexer. The problem I have is that when 
switch back, one token is eaten from the expression parser. 
Here is my doc syntax: main parser: 

EXP { '1.2+3.5' T; '3.6+6.8' H;} So the main parser rule: 
expression: EXP LCURLY ( SINGLE_QUOTE { 
_selector.select("expressionLex"); expressionParser.Parse();

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=360 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-fIITm=9HdAlDDy12bqM549g@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "hst_12345" <hst_12345@yahoo.com>
Subject: multiple lexer
Date: Sat, 06 Nov 2004 02:21:02 -0000
Size: 2082
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041106/23b03064/attachment.mht
From antlr-interest-accept-mweeU2=QYGondfx6ZcKupUU at yahoogroups.com  Fri Nov  5 18:52:02 2004
From: antlr-interest-accept-mweeU2=QYGondfx6ZcKupUU at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:28 2004
Subject: MODERATE -- geiroves@online.no posted to antlr-interest
Message-ID: <1099709522.448.88411.m22@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  geiroves@online.no 

The message summary:
--------------------
FROM: geiroves@online.no 
DATE: Sat, 06 Nov 2004 02:51:54 -0000 
SUBJECT: Newbie question - Walk AST or Stack Machine? 

Hello, 

I hand-coded my own lexer & parser for a simple c-like 
language I wrote some 10 years ago. I used a stack machine 
to execute the compiled code. I also wrote a debugger for 
the same language. 

I am now in the process of creating a similar language and 
it's debugger. I decided to use ANTLR because it supports 
both Java and C#. 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=361 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-mweeU2=QYGondfx6ZcKupUU@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "Geir Ove Skjaervik" <geiroves@online.no>
Subject: Newbie question - Walk AST or Stack Machine?
Date: Sat, 06 Nov 2004 02:51:54 -0000
Size: 2658
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041106/a34280f9/attachment.mht
From hst_12345 at yahoo.com  Fri Nov  5 18:21:02 2004
From: hst_12345 at yahoo.com (hst_12345)
Date: Mon Dec 20 16:17:28 2004
Subject: [antlr-interest] multiple lexer
Message-ID: <cmhcee+tset@eGroups.com>




I am wokring on a project to parse expressions which is part of the 
doc.  So I wrote a seperate parser for the expression. And use 
multiple lexer. The problem I have is that when switch back, one 
token is eaten from the expression parser. Here is my doc syntax:
main parser:

EXP { '1.2+3.5' T;  '3.6+6.8' H;}
So the main parser rule:
expression:
     EXP LCURLY 
     ( SINGLE_QUOTE {
           _selector.select("expressionLex");
           expressionParser.Parse();
           _selector.select("mainLex");
           }
       SINGLE_QUOTE character
      )+
      ;
The problem is when switch back, it complains to look for SINGLE_QUOTE 
but get T which is next token. I do print out the expression which is 
OK that does not include the single quote. So I do not know where 
the single quote. why when it gets back to main parser and the single 
quote went away.

Please help me out. I do not know what I can do.

Thanks









 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From geiroves at online.no  Fri Nov  5 18:51:54 2004
From: geiroves at online.no (Geir Ove Skjaervik)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Newbie question - Walk AST or Stack Machine?
Message-ID: <cmhe8a+gfa0@eGroups.com>




Hello,

I hand-coded my own lexer & parser for a simple c-like language I 
wrote some 10 years ago. I used a stack machine to execute the 
compiled code. I also wrote a debugger for the same language.

I am now in the process of creating a similar language and it's 
debugger. I decided to use ANTLR because it supports both Java and 
C#.

It's a long time since I done this now, so go easy on me :-) I 
understand that I can use an autmatically generated AST and walk 
it's tree to execute the code instead of using a stack machine. 
However, I have a HARD time finding examples on how this is done 
e.g. for function declarations and calls. (abritrary number of 
parameters). The only thing I have found so far is CHAD, here:

http://www1.cs.columbia.edu/~sedwards/classes/2003/w4115f/final-
reports/CHAD.pdf

Appendix B page 56. shows the chad.g file

Looking at how function declarations and calls is handled walking 
the ChadWalker (p. 100) it looks VERY complex, in fact MUCH more 
complex than generating code for a Stack Machine! It also looks 
complex to DEBUG in case of errors!

Can anyone advise me here:

What's the easiest way to execute my code? Use a Stack Machine or 
Walk an auto-genrated AST? Remember, I also need to write a debugger 
for the language

nd please go easy on the terminology as I am an ANTLR newbie, and 
haven't worked with parsers for 10+ years.

And to the ANTLR people: More examples on this would have been nice.

Geir Ove













 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From anakreonmejdi at yahoo.gr  Sat Nov  6 02:39:42 2004
From: anakreonmejdi at yahoo.gr (Anakreon)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Re: Javascript grammar for ANTLR ?
In-Reply-To: <cm861k+3ltd@eGroups.com>
Message-ID: <20041106103942.85130.qmail@web25001.mail.ukl.yahoo.com>


 --- amohombe <amohombe@yahoo.com> ??????: 
> 
> 
> > It is there too.
> Well, there is:
> 
> "ASP
> Anakreon Mejdi Wed Sep 15, 2004 03:24
> The grammar of asp contains lexers for plaintext"
> 
> I know no one who is so smart from that phrase to
> deduce that there's
> a Javascript grammer :). IMHO, if the page is called
> Grammer, than the
> first column should be the grammer name :).
> 
> Ahmed.
Not really.
Look at http://antlr.org/.
It says:
ASP
Anakreon Mejdi Wed Sep 15, 2004 03:24
The grammar of asp contains lexers for plaintext and
JScript and VBScript....

____________________________________________________________
Do You Yahoo!?
????????? ?? ?????? @yahoo.gr ????????? ??? ??? http://www.otenet.gr


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From anakreonmejdi at yahoo.gr  Sat Nov  6 03:28:21 2004
From: anakreonmejdi at yahoo.gr (Anakreon)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Re: Javascript grammar for ANTLR ?
In-Reply-To: <20041106103942.85130.qmail@web25001.mail.ukl.yahoo.com>
Message-ID: <20041106112821.84624.qmail@web25010.mail.ukl.yahoo.com>


 --- Anakreon <anakreonmejdi@yahoo.gr> ??????: 
> 
>  --- amohombe <amohombe@yahoo.com> ??????: 
> > 
> > 
> > > It is there too.
> > Well, there is:
> > 
> > "ASP
> > Anakreon Mejdi Wed Sep 15, 2004 03:24
> > The grammar of asp contains lexers for plaintext"
> > 
> > I know no one who is so smart from that phrase to
> > deduce that there's
> > a Javascript grammer :). IMHO, if the page is
> called
> > Grammer, than the
> > first column should be the grammer name :).
> > 
> > Ahmed.
> Not really.
> Look at http://antlr.org/.
> It says:
> ASP
> Anakreon Mejdi Wed Sep 15, 2004 03:24
> The grammar of asp contains lexers for plaintext and
> JScript and VBScript....
I was away in a trip and didn't read the mail where
Ternce mentions the problem of parsing the \r char.
I remembered that I had written more then
"The grammar of asp contains lexers for plaintext"
Anyway, the grammar is there.

Anakreon  

____________________________________________________________
Do You Yahoo!?
????????? ?? ?????? @yahoo.gr ????????? ??? ??? http://www.otenet.gr


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From demakov at ispras.ru  Sat Nov  6 05:23:49 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] multiple lexer
References: <cmhcee+tset@eGroups.com>
Message-ID: <005601c4c403$da3a8230$8cc79553@marlboro>


From: "hst_12345" <hst_12345@yahoo.com>
> I am wokring on a project to parse expressions which is part of the 
> doc.  So I wrote a seperate parser for the expression. And use 
> multiple lexer. The problem I have is that when switch back, one 
> token is eaten from the expression parser. Here is my doc syntax:
> main parser:
> 
> EXP { '1.2+3.5' T;  '3.6+6.8' H;}
> So the main parser rule:
> expression:
>      EXP LCURLY 
>      ( SINGLE_QUOTE {
>            _selector.select("expressionLex");
>            expressionParser.Parse();
>            _selector.select("mainLex");
>            }
>        SINGLE_QUOTE character
>       )+
>       ;
> The problem is when switch back, it complains to look for SINGLE_QUOTE 
> but get T which is next token. I do print out the expression which is 
> OK that does not include the single quote. So I do not know where 
> the single quote. why when it gets back to main parser and the single 
> quote went away.

It seems to me that expression parser takes the second single quote from
input strem. In your situation, expression parser needs to see next character
to decide whether to stop parsing expression. It calls nextToken() removing
single token from input stream and donesn't consume it desining to stop 
expression parsing.

The simplest solution - to have in nested lexer/parser stop condition that doesn't
use next token. In this case it is single quote at the end of expression.
And expression lexer will be responsilble for restoring main lexer:

expr: ... SINGLE_QOUTE { _selector.pop(); }

So, in main lexer you only push expression lexer:

expression:
     EXP LCURLY 
     ( SINGLE_QUOTE 
       {
           _selector.push("expressionLex");
           expressionParser.Parse();
           // restored by expression lexer
           // _selector.select("mainLex");
       }
       // it is consumed by expression lexer
       // SINGLE_QUOTE 
       character
      )+
      ;

I've never changed lexer from my parser before and have used
something like this in main lexer:

SINGLE_QUOTE: '\'' { _selector.push("expressionLex"); }

So main parser can process tokens from expression lexer:

expression:
     EXP LCURLY 
     ( SINGLE_QUOTE 
       realExpr // tokens from expression lexer
       character
      )+
      ;

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From joanpujol at gmail.com  Sat Nov  6 12:08:05 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] line numbers in tree parser
In-Reply-To: <cm994v+t0fh@eGroups.com>
References: <cm994v+t0fh@eGroups.com>
Message-ID: <d2d18a104110612086c13d9c9@mail.gmail.com>


You have to extend the CommonAST class to YourASTClass and overwrite
the methods setLine and setColum. Because if you look at code of
CommonAST you will see that is empty for this methods.

Cheers,



On Wed, 03 Nov 2004 00:35:43 -0000, hero_onethousand
<ebell@edgeofreality.com> wrote:
> 
> 
> I apologize in advance if this topic has been discussed, but I had no
> luck searching the archive.
> 
> I am using a tree parser to perform semantic checks/transformations
> and I need to get line numbers to report errors. In the parser I can
> use the lexer's shared input state or the line number stored in a
> token, but neither of these apply when walking the AST in the tree
> parser. AST nodes do not store line numbers like tokens do.
> 
> I am looking for the path of least resistence. My current plan is to
> make some minor alterations to CommonAST and the ASTFactory so the
> current line number is always copied into the AST.
> 
> Evan A. Bell
> Game Programmer
> www.edgeofreality.com
> 
> 
> Yahoo! Groups Links
> 
> 
> 
> 
> 


-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From joanpujol at gmail.com  Sat Nov  6 12:14:38 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] help - input to lexer
In-Reply-To: <cmd2e7+ptvc@eGroups.com>
References: <cmd2e7+ptvc@eGroups.com>
Message-ID: <d2d18a10411061214196c9138@mail.gmail.com>


I don't know if this is what you want. But...

DIGIT: '0'..'9';
LETER: 'a'..'z'|'A'..'Z';
WHITES:	( ' ' | '\t');

STRING: '\"' (DIGIT|LETER|WHITES)* '\"';



On Thu, 04 Nov 2004 11:05:43 -0000, s2jafer1 <s2jafer1@yahoo.com> wrote:
> 
> 
>      i want to know "how to define the token in lexer and in parser"
> 
> such that the input for a token accepts a string which contains both
> 
> whitespace and tab characters along with alpha numeric characters.
> 
> 
> 
> 
> The following link which is mentioned below is not opening .
> 
> http://www.antlr.org/fieldguide/whitespace
> 
> Yahoo! Groups Links
> 
> 
> 
> 
> 


-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From geiroves at online.no  Sat Nov  6 13:12:17 2004
From: geiroves at online.no (Geir Ove Skjaervik)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Please - can someone help me out?
In-Reply-To: <cmhe8a+gfa0@eGroups.com>
Message-ID: <cmjenh+9mpj@eGroups.com>



--- In antlr-interest@yahoogroups.com, "Geir Ove Skjaervik" 
<geiroves@o...> wrote:
> 
> 
> Hello,
> 
> I hand-coded my own lexer & parser for a simple c-like language I 
> wrote some 10 years ago. I used a stack machine to execute the 
> compiled code. I also wrote a debugger for the same language.
> 
> I am now in the process of creating a similar language and it's 
> debugger. I decided to use ANTLR because it supports both Java and 
> C#.
> 
> It's a long time since I done this now, so go easy on me :-) I 
> understand that I can use an autmatically generated AST and walk 
> it's tree to execute the code instead of using a stack machine. 
> However, I have a HARD time finding examples on how this is done 
> e.g. for function declarations and calls. (abritrary number of 
> parameters). The only thing I have found so far is CHAD, here:
> 
> http://www1.cs.columbia.edu/~sedwards/classes/2003/w4115f/final-
> reports/CHAD.pdf
> 
> Appendix B page 56. shows the chad.g file
> 
> Looking at how function declarations and calls is handled walking 
> the ChadWalker (p. 100) it looks VERY complex, in fact MUCH more 
> complex than generating code for a Stack Machine! It also looks 
> complex to DEBUG in case of errors!
> 
> Can anyone advise me here:
> 
> What's the easiest way to execute my code? Use a Stack Machine or 
> Walk an auto-genrated AST? Remember, I also need to write a 
debugger 
> for the language
> 
> nd please go easy on the terminology as I am an ANTLR newbie, and 
> haven't worked with parsers for 10+ years.
> 
> And to the ANTLR people: More examples on this would have been 
nice.
> 
> Geir Ove





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Sat Nov  6 17:36:26 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Re: Please - can someone help me out?
In-Reply-To: <cmjenh+9mpj@eGroups.com>
Message-ID: <cmju6q+gqs2@eGroups.com>



--- In antlr-interest@yahoogroups.com, "Geir Ove Skjaervik"
<geiroves@o...> wrote:
...
> > What's the easiest way to execute my code? Use a Stack Machine or 
> > Walk an auto-genrated AST? Remember, I also need to write a 
> debugger 
> > for the language

Actually, the "best" approach is to implement a threaded code compiler
with a stack-based virtual machine.  That is, the compiler (AST
walker) generates sequences of instruction references (byte codes are
common--each byte encodes an instruction id) and the runtime loops
over a massive case statement--each case encodes the behavior for an
instruction--fetching the instructions in sequence and executing them.
  Data is usually pushed onto a stack when referenced and popped when
used; you also may want to keep a frame pointer for referencing local
variables.  For debugging, you can keep pointers to instruction
locations to track line starts.

I am not aware of a good book on threaded compiler implementation for
C-like languages.  Timothy Budd's "A Little Smalltalk" is worth
reading;  Python internals are a bit gruesome, but the evaluator is in
ceval.c.  The Java VM spec is also worth reading.

--Loring





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From geiroves at online.no  Sun Nov  7 04:53:28 2004
From: geiroves at online.no (Geir Ove Skjaervik)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Re: Please - can someone help me out?
In-Reply-To: <cmju6q+gqs2@eGroups.com>
Message-ID: <cml5s8+10iga@eGroups.com>



Hello,

And thanks a lot for dealing with my "novice" questions :-)

I think I remember how to implement a stack machine, so that part 
should be relatively easy. I am not familiar with the term "threaded 
code compiler though". 

Q1:
As for how to use ANTLR to implement a Stack Machine: Couldn't I 
simply emit the stack instructions from the Parser part of ANTLR? 
(That's what I did in the hand coded lexer / parser I wrote). What 
are the benefits of doing it walking an AST tree?

Additional info: I need a K>1 kind of parser.

I feel pretty comfortable setting up the Lexer and Parser part in 
ANTLR (I think), but the TreeParser part is unfamiliar ground 
although I think I grasp the basics.

Q2:
What would be easier: Implementing a debugger for the Stack Machine 
or the solution where code is executed walking the tree (is this 
called a register machine?)

Thanks for your patitence and help.

Geir Ove







 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Sun Nov  7 11:00:39 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] just added a "lexers, parser integration" blog
In-Reply-To: <17E02978-2F64-11D9-89DD-000A95891192@cs.usfca.edu>
References: <17E02978-2F64-11D9-89DD-000A95891192@cs.usfca.edu>
Message-ID: <16782.28887.111439.33936@despot.non.net>


>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
[...]

> I've started formalizing ideas on how the lexers work in ANTLR 3 (though
> I have a prototyped implementation already) and how the parser / lexer
> interact.

> http://www.antlr.org/blog/antlr3/lexical.tml

"# the parser grammar (or combined grammar) can specify the extra fields
for a token, which results in a grammar specific token. Tokens may also
have a generate attributes table for dynamically setting attributes, thus,
avoiding creation of a million token subclasses. "

boo boo: "a generate attributes table" should be "a general attributes
table".


"Lexer rule return values"

I'm uncomfortable with how complicated that is.

For example, if the "protected" rules are only implicitly known by the
reference to them from the parser, how does that allow for reusing lexers
with different grammars if we have to specify the return type?

Have fun,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Sun Nov  7 11:18:50 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Re: Please - can someone help me out?
In-Reply-To: <cml5s8+10iga@eGroups.com>
References: <cmju6q+gqs2@eGroups.com>
	<cml5s8+10iga@eGroups.com>
Message-ID: <16782.29978.481707.669942@despot.non.net>


>>>>> "Geir" == Geir Ove Skjaervik <geiroves@online.no> writes:
[...]

> Q1: As for how to use ANTLR to implement a Stack Machine: Couldn't I
> simply emit the stack instructions from the Parser part of ANTLR?
> (That's what I did in the hand coded lexer / parser I wrote). What are
> the benefits of doing it walking an AST tree?

Can you do a purely syntax-directed translation for your language?  E.g.,
the answer is basically "no" if you have unresolved forward references that
you have to fix up.  [Of course, you could have your stack machine
evaluator be more complicated and do the fix-ups for you but that is, in
essence, another pass so you've just moved the problem from one place to
another.]


> I feel pretty comfortable setting up the Lexer and Parser part in ANTLR
> (I think), but the TreeParser part is unfamiliar ground although I think
> I grasp the basics.

> Q2: What would be easier: Implementing a debugger for the Stack Machine
> or the solution where code is executed walking the tree (is this called a
> register machine?)

(A) They are basically equivalent given good engineering (i.e., good
factoring).  The stack evaluator is a bit more localized but the tree
evaluator has the explicit context of the tree.

(B) A register machine is something that looks like a CPU.  I.e., it's
model wherein there are (banks of) registers in which computation takes
place, usually some form of "hardware" supported stack, and general/heap
memory.  GCC's RTL is an example of an intermediate representation (IR)
of a register machine model.

Hope this helps,
		John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Sun Nov  7 11:27:57 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Re: Please - can someone help me out?
In-Reply-To: <cml5s8+10iga@eGroups.com>
References: <cml5s8+10iga@eGroups.com>
Message-ID: <20ED9A4A-30F3-11D9-88FC-000A95891192@cs.usfca.edu>



On Nov 7, 2004, at 4:53 AM, Geir Ove Skjaervik wrote:
> Q1:
> As for how to use ANTLR to implement a Stack Machine: Couldn't I
> simply emit the stack instructions from the Parser part of ANTLR?
> (That's what I did in the hand coded lexer / parser I wrote). What
> are the benefits of doing it walking an AST tree?

Have you seen my CS652 lab that builds stack code?

http://www.cs.usfca.edu/~parrt/course/652/labs/trees.html

here's an interpreter and assembler:

http://www.cs.usfca.edu/~parrt/course/652/labs/interp.html

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From geiroves at online.no  Sun Nov  7 11:42:42 2004
From: geiroves at online.no (Geir Ove Skjaervik)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Re: Please - can someone help me out?
In-Reply-To: <16782.29978.481707.669942@despot.non.net>
Message-ID: <cmltri+1hme@eGroups.com>



Hello,

and thanks for the clarifying answers! I see what you mean by 
unsolved references problem: I think I did a two pass in my hand 
coded parser: Thus, I will probably be better of Walking the Tree 
(line :-)). And as you say; I get the conext info for "free" which 
can be usefull for the debugger.

The next thing I would love to get my hands on, is this: An ANTLR 
example aka. the Calc example, but that also adds: function 
definition and function call AND walks a tree to execute the stuff. 
The problem with the provided examples like TinyBasic is that it is 
to big, to much to grasp. A very simple example makes it easier to 
grasp the principle and get flying. I am currently reading the ANTLR 
Reference Manual, but that is a time consuming feat....

Geir Ove


--- In antlr-interest@yahoogroups.com, "John D. Mitchell" <johnm-
antlr@n...> wrote:
> >>>>> "Geir" == Geir Ove Skjaervik <geiroves@o...> writes:
> [...]
> 
> > Q1: As for how to use ANTLR to implement a Stack Machine: 
Couldn't I
> > simply emit the stack instructions from the Parser part of ANTLR?
> > (That's what I did in the hand coded lexer / parser I wrote). 
What are
> > the benefits of doing it walking an AST tree?
> 
> Can you do a purely syntax-directed translation for your 
language?  E.g.,
> the answer is basically "no" if you have unresolved forward 
references that
> you have to fix up.  [Of course, you could have your stack machine
> evaluator be more complicated and do the fix-ups for you but that 
is, in
> essence, another pass so you've just moved the problem from one 
place to
> another.]
> 
> 
> > I feel pretty comfortable setting up the Lexer and Parser part 
in ANTLR
> > (I think), but the TreeParser part is unfamiliar ground although 
I think
> > I grasp the basics.
> 
> > Q2: What would be easier: Implementing a debugger for the Stack 
Machine
> > or the solution where code is executed walking the tree (is this 
called a
> > register machine?)
> 
> (A) They are basically equivalent given good engineering (i.e., 
good
> factoring).  The stack evaluator is a bit more localized but the 
tree
> evaluator has the explicit context of the tree.
> 
> (B) A register machine is something that looks like a CPU.  I.e., 
it's
> model wherein there are (banks of) registers in which computation 
takes
> place, usually some form of "hardware" supported stack, and 
general/heap
> memory.  GCC's RTL is an example of an intermediate representation 
(IR)
> of a register machine model.
> 
> Hope this helps,
> 		John





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From geiroves at online.no  Sun Nov  7 11:53:05 2004
From: geiroves at online.no (Geir Ove Skjaervik)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Re: Please - can someone help me out?
In-Reply-To: <20ED9A4A-30F3-11D9-88FC-000A95891192@cs.usfca.edu>
Message-ID: <cmluf1+8l50@eGroups.com>



Hello Terrence,

And thanks a lot for your feedback. I feel a bit lost for the time 
being, but am in the process of working me through the ANTLR 
reference manual. I love this stuff, and can hardly wait to start 
coding, but must hold back until I understand how to make the right 
decisions.  I haven't seen the material you referred to, but will 
read it.

Might I come with a suggestion that might help newcomers to ANTLR? I 
take my chances: 

An ANTLR example aka. the Calc example, but that also adds:  
function definition and function call AND walks a tree to excute the 
stuff. The problem with the provided examples like TinyBasic is that 
it is to big, to much to grasp. A very simple example makes it 
easier to grasp the principle and get flying. I usually learn by 
examples, then enchance the examples and consult the docs as 
needed :-) If you have such an example already, please provide me 
pointers !

Again, thanks for dealing with these beginners questions!

Geir Ove


--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
wrote:
> 
> On Nov 7, 2004, at 4:53 AM, Geir Ove Skjaervik wrote:
> > Q1:
> > As for how to use ANTLR to implement a Stack Machine: Couldn't I
> > simply emit the stack instructions from the Parser part of ANTLR?
> > (That's what I did in the hand coded lexer / parser I wrote). 
What
> > are the benefits of doing it walking an AST tree?
> 
> Have you seen my CS652 lab that builds stack code?
> 
> http://www.cs.usfca.edu/~parrt/course/652/labs/trees.html
> 
> here's an interpreter and assembler:
> 
> http://www.cs.usfca.edu/~parrt/course/652/labs/interp.html
> 
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Sun Nov  7 12:25:03 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Re: Please - can someone help me out?
In-Reply-To: <cmluf1+8l50@eGroups.com>
References: <cmluf1+8l50@eGroups.com>
Message-ID: <1B6F5B3F-30FB-11D9-88FC-000A95891192@cs.usfca.edu>



On Nov 7, 2004, at 11:53 AM, Geir Ove Skjaervik wrote:
> An ANTLR example aka. the Calc example, but that also adds:
> function definition and function call AND walks a tree to excute the
> stuff. The problem with the provided examples like TinyBasic is that
> it is to big, to much to grasp. A very simple example makes it
> easier to grasp the principle and get flying. I usually learn by
> examples, then enchance the examples and consult the docs as
> needed :-) If you have such an example already, please provide me
> pointers !

Howdy.  Well, hopefully the course labs will help illuminate things. :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Sun Nov  7 15:04:14 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] "protected" lexer rules
Message-ID: <57FEF11A-3111-11D9-88FC-000A95891192@cs.usfca.edu>


Ok, folks, time to come up with a better name for lexer rules that are 
not real tokens (they are only rules called by other rules).  Currently 
it's "protected", which is hideous:

FLOAT : (DIGIT)+ '.' DIGIT | (DIGIT)+ ;

protected
DIGIT : '0'..'9' ;

Ick.  So, should it be an option or keyword?  What would the name be?  
I can't even describe it exactly even in two words. :(

"non token"?  "method"?  "macro"?  "internal"?

Help!

I need to implement this now in the 3.0 system.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Sun Nov  7 15:13:39 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] "protected" lexer rules
References: <57FEF11A-3111-11D9-88FC-000A95891192@cs.usfca.edu>
Message-ID: <000601c4c51f$6acb1a50$0400a8c0@NOTEBOOK>


what about 
private

----- Original Message ----- 
From: "Terence Parr" <parrt@cs.usfca.edu>
To: <antlr-interest@yahoogroups.com>
Sent: Monday, November 08, 2004 10:04 AM
Subject: [antlr-interest] "protected" lexer rules


> 
> Ok, folks, time to come up with a better name for lexer rules that are 
> not real tokens (they are only rules called by other rules).  Currently 
> it's "protected", which is hideous:
> 
> FLOAT : (DIGIT)+ '.' DIGIT | (DIGIT)+ ;
> 
> protected
> DIGIT : '0'..'9' ;
> 
> Ick.  So, should it be an option or keyword?  What would the name be?  
> I can't even describe it exactly even in two words. :(
> 
> "non token"?  "method"?  "macro"?  "internal"?
> 
> Help!
> 
> I need to implement this now in the 3.0 system.
> 
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
> 
> 
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
> 
>  
> 
> 
> 


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Sun Nov  7 15:17:33 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] "protected" lexer rules
In-Reply-To: <57FEF11A-3111-11D9-88FC-000A95891192@cs.usfca.edu>
References: <57FEF11A-3111-11D9-88FC-000A95891192@cs.usfca.edu>
Message-ID: <16782.44301.361774.440568@despot.non.net>


>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
[...]

> Ick.  So, should it be an option or keyword?

Since the concept is fundamental to the nature of those types of rules, I
think it has to be a keyword.

> What would the name be?  I can't even describe it exactly even in two
> words. :(

> "non token"?  "method"?  "macro"?  "internal"?

Their only purpose for existence is to provide a single definition of a
(sub-)structure of (perhaps many) token(s), right?  So, they are really
just "shorthand" (rules).

Take care,
	John



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Sun Nov  7 15:19:39 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] "protected" lexer rules
In-Reply-To: <000601c4c51f$6acb1a50$0400a8c0@NOTEBOOK>
References: <57FEF11A-3111-11D9-88FC-000A95891192@cs.usfca.edu>
	<000601c4c51f$6acb1a50$0400a8c0@NOTEBOOK>
Message-ID: <16782.44427.286988.482220@despot.non.net>


>>>>> "matthew" == matthew ford <Matthew.Ford@forward.com.au> writes:
[...]

> what about private

Ugh. That would get even more confusing.

The "protected" keyword was used since the methods of those rules in the
generated lexer need to be overridable by sub-classes.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Sun Nov  7 15:30:49 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] "protected" lexer rules
References: <57FEF11A-3111-11D9-88FC-000A95891192@cs.usfca.edu><000601c4c51f$6acb1a50$0400a8c0@NOTEBOOK> <16782.44427.286988.482220@despot.non.net>
Message-ID: <001101c4c521$d0bd5c40$0400a8c0@NOTEBOOK>


Hi John,
Ignoring the generated code for a moment,
Is is possiable for there to be multiple Lexer.g files where one .g file
overrides the others
"protected" rules.
If not then "private" seems more appropiate.
matthew

----- Original Message ----- 
From: "John D. Mitchell" <johnm-antlr@non.net>
To: <antlr-interest@yahoogroups.com>
Sent: Monday, November 08, 2004 10:19 AM
Subject: Re: [antlr-interest] "protected" lexer rules


>
> >>>>> "matthew" == matthew ford <Matthew.Ford@forward.com.au> writes:
> [...]
>
> > what about private
>
> Ugh. That would get even more confusing.
>
> The "protected" keyword was used since the methods of those rules in the
> generated lexer need to be overridable by sub-classes.
>
> Take care,
> John
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Sun Nov  7 15:43:01 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] "protected" lexer rules
In-Reply-To: <16782.44301.361774.440568@despot.non.net>
References: <57FEF11A-3111-11D9-88FC-000A95891192@cs.usfca.edu> <16782.44301.361774.440568@despot.non.net>
Message-ID: <C317D646-3116-11D9-88FC-000A95891192@cs.usfca.edu>



On Nov 7, 2004, at 3:17 PM, John D. Mitchell wrote:
>> Ick.  So, should it be an option or keyword?
>
> Since the concept is fundamental to the nature of those types of 
> rules, I
> think it has to be a keyword.

Makes sense.

>> What would the name be?  I can't even describe it exactly even in two
>> words. :(
>
>> "non token"?  "method"?  "macro"?  "internal"?
>
> Their only purpose for existence is to provide a single definition of a
> (sub-)structure of (perhaps many) token(s), right?  So, they are really
> just "shorthand" (rules).

Yes, common substructure with optional actions; e.g., DIGIT might 
compute a value from the char.

So, "shared", "isolated", "common", "sub"?

perhaps there is a different "section"; one for regular rules and then 
one for these shared rules?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Sun Nov  7 15:47:57 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] "protected" lexer rules
In-Reply-To: <C317D646-3116-11D9-88FC-000A95891192@cs.usfca.edu>
References: <57FEF11A-3111-11D9-88FC-000A95891192@cs.usfca.edu>
	<16782.44301.361774.440568@despot.non.net>
	<C317D646-3116-11D9-88FC-000A95891192@cs.usfca.edu>
Message-ID: <16782.46125.726344.423189@despot.non.net>


>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
>>>>>> On Nov 7, 2004, at 3:17 PM, John D. Mitchell wrote:
[...]

>>> "non token"?  "method"?  "macro"?  "internal"?

>> Their only purpose for existence is to provide a single definition of a
>> (sub-)structure of (perhaps many) token(s), right?  So, they are really
>> just "shorthand" (rules).

> Yes, common substructure with optional actions; e.g., DIGIT might compute
> a value from the char.

> So, "shared", "isolated", "common", "sub"?

"Sub" rule is very bad because it's already got a meaning.

"Common" and "shared" rules are both too generic in addition to the fact
that the shorthand rule isn't necessarily commonly used or shared.

At this point, "shorthand" is the best that I can come up with.  That name
is clear; it's not overused in Antlr, the grammar/language community, the
or the general computing world; and it's descriptive of the rule's
functional role.


> perhaps there is a different "section"; one for regular rules and then
> one for these shared rules?

Naw, I prefer to have the helper rules next to the rule that they help.

Hope this helps,
		John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Sun Nov  7 19:44:14 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Re: "protected" lexer rules
In-Reply-To: <16782.46125.726344.423189@despot.non.net>
Message-ID: <cmmq2e+msba@eGroups.com>



--- In antlr-interest@yahoogroups.com, "John D. Mitchell"
<johnm-antlr@n...> wrote:
> > perhaps there is a different "section"; one for regular rules and then
> > one for these shared rules?
> 
> Naw, I prefer to have the helper rules next to the rule that they help.

I think that John is getting closer here with the "helper".  How about
"supporting" or something similar?

--Loring

> Hope this helps,
> 		John





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From jbb at acm.org  Sun Nov  7 20:47:20 2004
From: jbb at acm.org (John B. Brodie)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] "protected" lexer rules
In-Reply-To: <16782.46125.726344.423189@despot.non.net> (johnm-antlr@non.net)
References: <57FEF11A-3111-11D9-88FC-000A95891192@cs.usfca.edu>
 <16782.44301.361774.440568@despot.non.net>
 <C317D646-3116-11D9-88FC-000A95891192@cs.usfca.edu> <16782.46125.726344.423189@despot.non.net>
Message-ID: <E1CR1R2-0002E2-00@gecko>


On Sun, 07 Nov 2004 15:47:57, John D. Mitchell wrote:
>> perhaps there is a different "section"; one for regular rules and then
>> one for these shared rules?
>
>Naw, I prefer to have the helper rules next to the rule that they help.

FWIW I agree with this and John Mitchell's other comments.

And I agree (with Loring?) that maybe `helper` would be a better
keyword.... Or perhaps one of these:

subrule
sub-rule
sub_rule

auxiliary

auxrule
aux-rule
aux_rule

At this time I believe I prefer the keyword `sub-rule`. But perhaps having
a hyphen inside a keyword might be bothersome to some people...

	-jbb


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From csnyder at alumni.ncsu.edu  Sun Nov  7 20:58:52 2004
From: csnyder at alumni.ncsu.edu (kozchris)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Re: "protected" lexer rules
In-Reply-To: <E1CR1R2-0002E2-00@gecko>
Message-ID: <cmmuec+ba6l@eGroups.com>



--- In antlr-interest@yahoogroups.com, "John B. Brodie" <jbb@a...> wrote:
> On Sun, 07 Nov 2004 15:47:57, John D. Mitchell wrote:
> >> perhaps there is a different "section"; one for regular rules and
then
> >> one for these shared rules?
> >
> >Naw, I prefer to have the helper rules next to the rule that they help.
> 

I like "local", "local-rule" or "local-scope" for some reason.

-Chris







 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From joanpujol at gmail.com  Mon Nov  8 00:10:31 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] "protected" lexer rules
In-Reply-To: <57FEF11A-3111-11D9-88FC-000A95891192@cs.usfca.edu>
References: <57FEF11A-3111-11D9-88FC-000A95891192@cs.usfca.edu>
Message-ID: <d2d18a104110800107f80c3d2@mail.gmail.com>


On Sun, 7 Nov 2004 15:04:14 -0800, Terence Parr <parrt@cs.usfca.edu> wrote:

> Ick.  So, should it be an option or keyword?  What would the name be?
> I can't even describe it exactly even in two words. :(
> 
> "non token"?  "method"?  "macro"?  "internal"?
I like "non token". But I think that better in one word nontoken or non_token...

Cheers,


-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From geiroves at online.no  Mon Nov  8 02:26:53 2004
From: geiroves at online.no (Geir Ove Skjaervik)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Re: "protected" lexer rules
In-Reply-To: <57FEF11A-3111-11D9-88FC-000A95891192@cs.usfca.edu>
Message-ID: <cmnhld+dkgk@eGroups.com>




Since it is an ALIAS for a sequence of atoms, why not simply call it 
ALIAS ?

Geir Ove

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
wrote:
> Ok, folks, time to come up with a better name for lexer rules that 
are 
> not real tokens (they are only rules called by other rules).  
Currently 
> it's "protected", which is hideous:
> 
> FLOAT : (DIGIT)+ '.' DIGIT | (DIGIT)+ ;
> 
> protected
> DIGIT : '0'..'9' ;
> 
> Ick.  So, should it be an option or keyword?  What would the name 
be?  
> I can't even describe it exactly even in two words. :(
> 
> "non token"?  "method"?  "macro"?  "internal"?
> 
> Help!
> 
> I need to implement this now in the 3.0 system.
> 
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-8E3l=zRww7kMfzll0c1pgno at yahoogroups.com  Mon Nov  8 05:31:27 2004
From: antlr-interest-accept-8E3l=zRww7kMfzll0c1pgno at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:29 2004
Subject: MODERATE -- kabaz11@yahoo.com posted to antlr-interest
Message-ID: <1099920687.617.32254.m16@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  kabaz11@yahoo.com 

The message summary:
--------------------
FROM: kabaz11@yahoo.com 
DATE: Mon, 08 Nov 2004 13:30:24 -0000 
SUBJECT: Antlr multi lexer . 

Hellow ! My name is : Shlomo Kabaz . 

I am new to this group . 

I am trying to build a parser for "C" language . Started 
with your code of ansi_c . Trying to convert "ansi.g" that 
was probably written for pccts to antlr 2.7.1 . 

I met the article "Conversion of a C++ Parser from PCCTS to 
ANTLR" that was very helpfull . 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=362 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-8E3l=zRww7kMfzll0c1pgno@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "kabaz11" <kabaz11@yahoo.com>
Subject: Antlr multi lexer .
Date: Mon, 08 Nov 2004 13:30:24 -0000
Size: 1745
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041108/2c183065/attachment.mht
From H.A.M.Maassen at student.tue.nl  Mon Nov  8 06:34:37 2004
From: H.A.M.Maassen at student.tue.nl (Maassen, H.A.M.)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] "protected" lexer rules
Message-ID: <1C5C690C06EFE244B83E3F133CA70BDE28584D@studentex6.campus.tue.nl>

Perhaps what's confusing here is not the word itself, but the syntactic idea of using a keyword in front of a rule to denote a property, while other properties are usually specified within an "options{}" clause.
 
Just a random thought :)
 
Regards, Harald Maassen
 
PS:
 
should you go with some form of "subrule" instead of "protected", there is some potential for confusion with the current use of the word subrule in the ANTLR docs.


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 3558 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041108/e266ed14/attachment.bin
From ewbank at synopsys.com  Mon Nov  8 06:47:02 2004
From: ewbank at synopsys.com (Bryan Ewbank)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Re: TreeParsing with various roots
References: <cmbmt3+h3dd@eGroups.com>
Message-ID: <007601c4c5a1$cf441a90$d405300a@internal.synopsys.com>


Paul,

Another option is to have each node have "type" (the usual beastie) and
provide a "subtype" field as well that contains the actual operator.

I'm doing that for qualifiers - "const", "static", etc all report as
#[QUALIFIER,name], but have a subtype field that contain a bitfield telling
me which qualifer was seen.

It requires intermediate rules in the parser to morph the tokens, but it
seems worth it to me...

    qualifier:
        : CONST  { ## = #[QUALIFIER, CONST->getText()]; ## ->
setSubtype(QUAL_CONST); }
        | STATIC { .... }


-- Bryan Ewbank
----- Original Message ----- 
From: "lgcraymer" <lgc@mail1.jpl.nasa.gov>
To: <antlr-interest@yahoogroups.com>
Sent: Wednesday, November 03, 2004 17:42
Subject: [antlr-interest] Re: TreeParsing with various roots


>
>
> Paul--
>
> Unfortunately, the answer to your question is "not yet".  Alternatives
> for roots should be supported--I started to do that for 2.8, but did
> not finish--but 2.x currently does not support them.
>
> 3.0 will:  Ter, Monty, and I discussed this at last summer's cabal.
>
> --Loring
>
>
> --- In antlr-interest@yahoogroups.com, "Paul J. Lucas"
> <pauljlucas@m...> wrote:
> > Suppose I have in a parser:
> >
> > compExpr
> >     : re1rangeExpr
> >       (co:compOp! re:rangeExpr!
> >       {
> >     ## = #(co, re1, re2)
> > }
> >       )?
> >     ;
> >
> > compOp
> >     : EQ | NE | LT | LE | GT | GE
> >     ;
> >
> > How to I write the corresponding Treeparser?
> >
> > compExpr
> >     : #( xxx re1=rangeExpr re2=RangeExpr )
> >     ;
> >
> > What goes in the place of the "xxx"?  Ideally, I'd like to
> > share the code for all compOps.
> >
> > I *could* do:
> >
> > compOp
> >     : (EQ | NE | LT | LE | GT | GE)
> >     {
> >     ##.setType( COMP_OP );
> > }
> >     ;
> >
> > then:
> >
> > compExpr
> >     : #( co:COMP_OP re1=rangeExpr re2=RangeExpr )
> >     {
> >     // do something with co.getText()
> > }
> >     ;
> >
> > But having to use the text of the original token seems a bit
> > hokey to me.  Is there a better way?
> >
> > - Paul
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ewbank at synopsys.com  Mon Nov  8 06:51:52 2004
From: ewbank at synopsys.com (Bryan Ewbank)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Re: "protected" lexer rules
References: <cmnhld+dkgk@eGroups.com>
Message-ID: <009401c4c5a2$7c11ed60$d405300a@internal.synopsys.com>


Perhaps I'm in the minority here, but "protected" defines precisely what it
does; all rules default to "public", but those which are  not to be accessed
by clients are marked "protected".

What's the fuss?  It's not really broken, and this seems somewhat a
gratuitous
difference between 2.x and 3.x.

-- Bryan Ewbank

> Ok, folks, time to come up with a better name for lexer rules that
> are not real tokens (they are only rules called by other rules).
> Currently it's "protected", which is hideous:
>
> FLOAT : (DIGIT)+ '.' DIGIT | (DIGIT)+ ;
>
> protected
> DIGIT : '0'..'9' ;
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From kabaz11 at yahoo.com  Mon Nov  8 05:30:24 2004
From: kabaz11 at yahoo.com (kabaz11)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Antlr multi lexer .
Message-ID: <cmnsdg+ahae@eGroups.com>




Hellow ! My name is : Shlomo Kabaz .

I am new to this group .

I am trying to build a parser for "C" language .
Started with your code of ansi_c . 
Trying to convert "ansi.g" that was probably written for pccts 
 to antlr 2.7.1 .

I met the article "Conversion of a C++ Parser from PCCTS to ANTLR" 
  that was very helpfull .

My question is about multiLexer for the parser that is presented in
 the ansi.g file by the "#lexclass" directive .

I met also the new class "TokenStreamSelector" .

But did not understand how exactly the method should be implemented 
  ( in cpp ) .

Regards .













 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Mon Nov  8 08:50:11 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Antlr multi lexer .
In-Reply-To: <cmnsdg+ahae@eGroups.com>
References: <cmnsdg+ahae@eGroups.com>
Message-ID: <4169645C-31A6-11D9-8840-000393B5606C@codetransform.com>


Perhaps you want to use the existing C parser, see the link below.  It 
includes an ANSI C89 parser as well as a GCC 2.95.3 parser.

Monty

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html

On Nov 8, 2004, at 5:30 AM, kabaz11 wrote:

>
>
>
> Hellow ! My name is : Shlomo Kabaz .
>
> I am new to this group .
>
> I am trying to build a parser for "C" language .
> Started with your code of ansi_c .
> Trying to convert "ansi.g" that was probably written for pccts
>  to antlr 2.7.1 .
>
> I met the article "Conversion of a C++ Parser from PCCTS to ANTLR"
>   that was very helpfull .
>
> My question is about multiLexer for the parser that is presented in
>  the ansi.g file by the "#lexclass" directive .
>
> I met also the new class "TokenStreamSelector" .
>
> But did not understand how exactly the method should be implemented
>   ( in cpp ) .
>
> Regards .
>
>
>
>
>
>
>
>
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ewbank at synopsys.com  Mon Nov  8 08:54:07 2004
From: ewbank at synopsys.com (Bryan Ewbank)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] OT: a few gmail invites
References: <200411050055.iA50t3m22100@shell2.webquarry.com> <00ef01c4c353$890710a0$cc05300a@internal.synopsys.com> <91A59324-2F51-11D9-AE6E-000393B5606C@codetransform.com>
Message-ID: <000901c4c5b3$902be470$d405300a@internal.synopsys.com>


Hi Folks - I've got a few invites to gmail.  If you want one, please email
me directly.  Don't change the subject (my filters will love you :-)

- Bryan Ewbank



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Mon Nov  8 09:17:09 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] "protected" lexer rules
In-Reply-To: <16782.46125.726344.423189@despot.non.net>
References: <57FEF11A-3111-11D9-88FC-000A95891192@cs.usfca.edu> <16782.44301.361774.440568@despot.non.net> <C317D646-3116-11D9-88FC-000A95891192@cs.usfca.edu> <16782.46125.726344.423189@despot.non.net>
Message-ID: <05F5AB8C-31AA-11D9-88FC-000A95891192@cs.usfca.edu>



On Nov 7, 2004, at 3:47 PM, John D. Mitchell wrote:

>
>>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
>>>>>>> On Nov 7, 2004, at 3:17 PM, John D. Mitchell wrote:
> [...]
>
>>>> "non token"?  "method"?  "macro"?  "internal"?
>
>>> Their only purpose for existence is to provide a single definition 
>>> of a
>>> (sub-)structure of (perhaps many) token(s), right?  So, they are 
>>> really
>>> just "shorthand" (rules).
>
>> Yes, common substructure with optional actions; e.g., DIGIT might 
>> compute
>> a value from the char.
>
>> So, "shared", "isolated", "common", "sub"?
>
> "Sub" rule is very bad because it's already got a meaning.

Yeah, it's an ambiguous term already, true.  "subrule" I started using 
a decade ago to mean EBNF stuff; i.e., an anonymous embedded rule.  
However, it's also convenient to use the term for a rule invoked by 
another rule.  Heh, wait, did I just convince myself that subrule is 
not a bad keyword since it's similar enough to one and identical to the 
other?  EBNF should really be embedded rule, but regardless, most 
people will get it if I say:

INT : (DIGIT)+ ;

subrule
DIGIT : '0'..'9' ;

The problem with protected (equally private) is that the intended 
meaning is a side effect of the main meaning of the word.  The above 
snippet would be clear to anybody just casually looking at a new 3.0 
grammar, right?

Hmm....

Ter

>
> "Common" and "shared" rules are both too generic in addition to the 
> fact
> that the shorthand rule isn't necessarily commonly used or shared.
>
> At this point, "shorthand" is the best that I can come up with.  That 
> name
> is clear; it's not overused in Antlr, the grammar/language community, 
> the
> or the general computing world; and it's descriptive of the rule's
> functional role.
>
>
>> perhaps there is a different "section"; one for regular rules and then
>> one for these shared rules?
>
> Naw, I prefer to have the helper rules next to the rule that they help.
>
> Hope this helps,
> 		John
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>
>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Mon Nov  8 09:17:55 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] "protected" lexer rules
In-Reply-To: <E1CR1R2-0002E2-00@gecko>
References: <57FEF11A-3111-11D9-88FC-000A95891192@cs.usfca.edu> <16782.44301.361774.440568@despot.non.net> <C317D646-3116-11D9-88FC-000A95891192@cs.usfca.edu> <16782.46125.726344.423189@despot.non.net> <E1CR1R2-0002E2-00@gecko>
Message-ID: <20E583BB-31AA-11D9-88FC-000A95891192@cs.usfca.edu>



On Nov 7, 2004, at 8:47 PM, John B. Brodie wrote:

>
> On Sun, 07 Nov 2004 15:47:57, John D. Mitchell wrote:
>>> perhaps there is a different "section"; one for regular rules and 
>>> then
>>> one for these shared rules?
>>
>> Naw, I prefer to have the helper rules next to the rule that they 
>> help.
>

> auxiliary

That ain't bad 'cept it's hard to spell!  Perhaps "aux"?

Ter

>
> auxrule
> aux-rule
> aux_rule
>
> At this time I believe I prefer the keyword `sub-rule`. But perhaps 
> having
> a hyphen inside a keyword might be bothersome to some people...

Per my previous email, "subrule" ain't sounding too bad!

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Mon Nov  8 09:25:15 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Re: "protected" lexer rules
In-Reply-To: <cmmuec+ba6l@eGroups.com>
References: <cmmuec+ba6l@eGroups.com>
Message-ID: <279B24A9-31AB-11D9-88FC-000A95891192@cs.usfca.edu>



On Nov 7, 2004, at 8:58 PM, kozchris wrote:

>
>
> --- In antlr-interest@yahoogroups.com, "John B. Brodie" <jbb@a...> 
> wrote:
>> On Sun, 07 Nov 2004 15:47:57, John D. Mitchell wrote:
>>>> perhaps there is a different "section"; one for regular rules and
> then
>>>> one for these shared rules?
>>>
>>> Naw, I prefer to have the helper rules next to the rule that they 
>>> help.
>>
>
> I like "local", "local-rule" or "local-scope" for some reason.

Hi.  Local makes sense too actually.  It's definitely not overloaded in 
the grammar name space, but it too has a meaning as in "local 
variable".  Hmm...it's good actually.  subrule is very specific, but is 
an overloaded term.  Damn!

INT : (DIGIT)+ ;

local
DIGIT : '0'..'9' ;

Hmm..not bad.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Mon Nov  8 09:21:12 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] "protected" lexer rules
In-Reply-To: <05F5AB8C-31AA-11D9-88FC-000A95891192@cs.usfca.edu>
References: <57FEF11A-3111-11D9-88FC-000A95891192@cs.usfca.edu>
	<16782.44301.361774.440568@despot.non.net>
	<C317D646-3116-11D9-88FC-000A95891192@cs.usfca.edu>
	<16782.46125.726344.423189@despot.non.net>
	<05F5AB8C-31AA-11D9-88FC-000A95891192@cs.usfca.edu>
Message-ID: <16783.43784.688446.433874@despot.non.net>


>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
>>>>>> On Nov 7, 2004, at 3:47 PM, John D. Mitchell writes:
[...]

>> "Sub" rule is very bad because it's already got a meaning.

> Yeah, it's an ambiguous term already, true.  "subrule" I started using a
> decade ago to mean EBNF stuff; i.e., an anonymous embedded rule.
> However, it's also convenient to use the term for a rule invoked by
> another rule.  Heh, wait, did I just convince myself that subrule is not
> a bad keyword since it's similar enough to one and identical to the
> other?  EBNF should really be embedded rule, but regardless, most people
> will get it if I say:

> INT : (DIGIT)+ ;

> subrule DIGIT : '0'..'9' ;

> The problem with protected (equally private) is that the intended meaning
> is a side effect of the main meaning of the word.  The above snippet
> would be clear to anybody just casually looking at a new 3.0 grammar,
> right?

Eek! No!  Then it would be impossible/confusing/etc., in conversation, to
distinguish between (normal) rules that are used by other rules and
"helper" rules that are used by other rules.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ebell at edgeofreality.com  Mon Nov  8 09:52:38 2004
From: ebell at edgeofreality.com (hero_onethousand)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] RE: "protected" lexer rules
Message-ID: <cmobp6+ifa4@eGroups.com>



My 2 cents:

I like "substitution". It reminds me of U substitution from calculus.
But, it is a bit long. I think you will have trouble finding one word
that describes the role it plays in the lexer grammar and how it
behaves in the generated code. 


Evan A. Bell
Game Programmer
www.edgeofreality.com
ebell@edgeofreality.com





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From thomas.rolfs at cox.net  Mon Nov  8 09:57:03 2004
From: thomas.rolfs at cox.net (Thomas Rolfs)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Re: "protected" lexer rules
In-Reply-To: <279B24A9-31AB-11D9-88FC-000A95891192@cs.usfca.edu>
References: <cmmuec+ba6l@eGroups.com>
 <279B24A9-31AB-11D9-88FC-000A95891192@cs.usfca.edu>
Message-ID: <129764249.20041108095703@cox.net>



Terence wrote:


> INT : (DIGIT)+ ;

> local
> DIGIT : '0'..'9' ;

> Hmm..not bad.

How about "explicit", as in C++? Or some word that means the rule must be
invoked or referenced from another rule.

-- 
Thomas Rolfs



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Mon Nov  8 11:35:57 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Re: "protected" lexer rules
In-Reply-To: <129764249.20041108095703@cox.net>
References: <cmmuec+ba6l@eGroups.com>
	<279B24A9-31AB-11D9-88FC-000A95891192@cs.usfca.edu>
	<129764249.20041108095703@cox.net>
Message-ID: <16783.51869.27836.432609@despot.non.net>


>>>>> "Thomas" == Thomas Rolfs <thomas.rolfs@cox.net> writes:
>>>>>> Terence writes:
[...]

> How about "explicit", as in C++? Or some word that means the rule must be
> invoked or referenced from another rule.

Not!

That's worse than "protected". I.e., all of the meaning of "explicit" (in
this case) is *implicit*!  That's Unspeakable Evil(tm)!


Of the proposed names so far, besides "shorthand", "alias" is the only one
whose meaning has a direct bearing on the actual nature of that type of
helper rule.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Mon Nov  8 11:37:25 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Re: "protected" lexer rules
In-Reply-To: <279B24A9-31AB-11D9-88FC-000A95891192@cs.usfca.edu>
References: <cmmuec+ba6l@eGroups.com>
	<279B24A9-31AB-11D9-88FC-000A95891192@cs.usfca.edu>
Message-ID: <16783.51957.772428.683996@despot.non.net>


>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
>>>>>> On Nov 7, 2004, at 8:58 PM, kozchris writes:
[...]

> Hi.  Local makes sense too actually.  It's definitely not overloaded in
> the grammar name space, but it too has a meaning as in "local variable".
> Hmm...it's good actually.  subrule is very specific, but is an overloaded
> term.  Damn!

No, it runs into the same problem as with "private".  The rules are
available to subclasses of the lexer so they aren't really local.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr_lakshmi at yahoo.com  Mon Nov  8 12:42:12 2004
From: antlr_lakshmi at yahoo.com (ManimuthuLakshmi Pitchaikani)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] non-determinism
Message-ID: <20041108204212.75893.qmail@web54708.mail.yahoo.com>

Hi,
 
How to avoid non-deterministic types? 
 
In the following example, the keyword 'Assign' is having different notation.
 
1)ERASE ALL ASSIGN
2)ERASE ALL
3)ASSIGN A B
4)ERASE ALL UNASSIGN
 
 
The statement 1,2,4 has a rule.  And statement 3 has a rule.  When the statement 3 is followed by statement 2, the error occurs.
 
It says that "Expected EOF, found A".  This is because the ANTLR recongnises ERASE ALL and then the next statement starting token ASSIGN and try to follow the statement 1 grammer.  
 
Here how i can recongnise the 'ASSIGN' keyword as the starting word of the statement to differentiate the 'ASSIGN'  in other statements? I think this recongisition will avoid the non-determinism.
 
Thanks.
 
Best Regards,
Lakshmi 
 
 
 

			
---------------------------------
Do you Yahoo!?
 Check out the new Yahoo! Front Page. www.yahoo.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041108/7ca6658a/attachment.html
From antlr-interest-accept-BDN36HrsSc0=DhXWHjjuwUI at yahoogroups.com  Mon Nov  8 12:42:24 2004
From: antlr-interest-accept-BDN36HrsSc0=DhXWHjjuwUI at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:29 2004
Subject: MODERATE -- tim@monster-works.co.nz posted to antlr-interest
Message-ID: <1099946544.564.37606.m19@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  tim@monster-works.co.nz 

The message summary:
--------------------
FROM: tim@monster-works.co.nz 
DATE: Tue, 9 Nov 2004 09:51:17 +1300 
SUBJECT: Re: [antlr-interest] Re: "protected" lexer rules 

> > --- In antlr-interest@yahoogroups.com, "John B. Brodie" 
<jbb@a...> > > wrote: > >> On Sun, 07 Nov 2004 15:47:57, 
John D. Mitchell wrote: > >>>> perhaps there is a different 
"section"; one for regular rules and > > then > >>>> one for
these shared rules? > >>> > >>> Naw, I prefer to have the 
helper rules next to the rule that they > >>> help. > >> > >

> > I like "local", "local-rule" or "local-scope" for some 
reason. > > Hi. Local makes sense too actually. It's 
definitely not overloaded in > the grammar name space, but 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=363 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-BDN36HrsSc0=DhXWHjjuwUI@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "Tim Simpson" <tim@monster-works.co.nz>
Subject: Re: [antlr-interest] Re: "protected" lexer rules
Date: Tue, 9 Nov 2004 09:51:17 +1300
Size: 2504
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041108/97bc8034/attachment.mht
From tim at monster-works.co.nz  Mon Nov  8 12:51:17 2004
From: tim at monster-works.co.nz (Tim Simpson)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Re: "protected" lexer rules
References: <cmmuec+ba6l@eGroups.com> <279B24A9-31AB-11D9-88FC-000A95891192@cs.usfca.edu>
Message-ID: <007e01c4c5d4$b2227dc0$ee00000a@eiss.monsterworks.co.nz>



> > --- In antlr-interest@yahoogroups.com, "John B. Brodie" <jbb@a...> 
> > wrote:
> >> On Sun, 07 Nov 2004 15:47:57, John D. Mitchell wrote:
> >>>> perhaps there is a different "section"; one for regular rules and
> > then
> >>>> one for these shared rules?
> >>>
> >>> Naw, I prefer to have the helper rules next to the rule that they 
> >>> help.
> >>
> >
> > I like "local", "local-rule" or "local-scope" for some reason.
> 
> Hi.  Local makes sense too actually.  It's definitely not overloaded in 
> the grammar name space, but it too has a meaning as in "local 
> variable".  Hmm...it's good actually.  subrule is very specific, but is 
> an overloaded term.  Damn!
> 
> INT : (DIGIT)+ ;
> 
> local
> DIGIT : '0'..'9' ;
> 
> Hmm..not bad.
> 
> Ter

Currently I'm toying around with antlr, trying to learn the 
in's and out's. It is a very useful tool. I was thinking about 
this sub/protected rules, and it kind of reminds me of some 
stuff from functional programming.

So what about

INT : (DIGIT)+ 
where {DIGIT : '0'..'9';};

Of course this would only make the definition of DIGIT local to INT.

Thanks for listening, 
  Tim.

--
Tim Simpson, Ph.D







 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Mon Nov  8 13:32:29 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Re: "protected" lexer rules
In-Reply-To: <16783.51957.772428.683996@despot.non.net>
References: <cmmuec+ba6l@eGroups.com> <279B24A9-31AB-11D9-88FC-000A95891192@cs.usfca.edu> <16783.51957.772428.683996@despot.non.net>
Message-ID: <B0FC82B2-31CD-11D9-88FC-000A95891192@cs.usfca.edu>



On Nov 8, 2004, at 11:37 AM, John D. Mitchell wrote:

>
>>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
>>>>>>> On Nov 7, 2004, at 8:58 PM, kozchris writes:
> [...]
>
>> Hi.  Local makes sense too actually.  It's definitely not overloaded 
>> in
>> the grammar name space, but it too has a meaning as in "local 
>> variable".
>> Hmm...it's good actually.  subrule is very specific, but is an 
>> overloaded
>> term.  Damn!
>
> No, it runs into the same problem as with "private".  The rules are
> available to subclasses of the lexer so they aren't really local.

Well, I'm pretty sure inheritance of grammars will go away.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Mon Nov  8 13:36:00 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Re: "protected" lexer rules
In-Reply-To: <007e01c4c5d4$b2227dc0$ee00000a@eiss.monsterworks.co.nz>
References: <cmmuec+ba6l@eGroups.com> <279B24A9-31AB-11D9-88FC-000A95891192@cs.usfca.edu> <007e01c4c5d4$b2227dc0$ee00000a@eiss.monsterworks.co.nz>
Message-ID: <2EE331FC-31CE-11D9-88FC-000A95891192@cs.usfca.edu>



On Nov 8, 2004, at 12:51 PM, Tim Simpson wrote:
> Currently I'm toying around with antlr, trying to learn the
> in's and out's. It is a very useful tool. I was thinking about
> this sub/protected rules, and it kind of reminds me of some
> stuff from functional programming.
>
> So what about
>
> INT : (DIGIT)+
> where {DIGIT : '0'..'9';};
>
> Of course this would only make the definition of DIGIT local to INT.

Hi Tim,

The only problem is that DIGIT is useful for a bunch of rules. :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Mon Nov  8 14:24:07 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Re: "protected" lexer rules
In-Reply-To: <2EE331FC-31CE-11D9-88FC-000A95891192@cs.usfca.edu>
Message-ID: <cmorm7+a8n8@eGroups.com>



--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> 
> On Nov 8, 2004, at 12:51 PM, Tim Simpson wrote:
> > Currently I'm toying around with antlr, trying to learn the
> > in's and out's. It is a very useful tool. I was thinking about
> > this sub/protected rules, and it kind of reminds me of some
> > stuff from functional programming.
> >
> > So what about
> >
> > INT : (DIGIT)+
> > where {DIGIT : '0'..'9';};
> >
> > Of course this would only make the definition of DIGIT local to INT.
> 
> Hi Tim,
> 
> The only problem is that DIGIT is useful for a bunch of rules. :)


INT             : (DIGIT)+ ;
fragment DIGIT  : '0'..'9' ;

-or-

INT             : (DIGIT)+ ;
substring DIGIT : '0'..'9' ;

I like "fragment". 

Micheal
ANTLR/C#





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Mon Nov  8 14:34:09 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Re: "protected" lexer rules
In-Reply-To: <cmorm7+a8n8@eGroups.com>
References: <cmorm7+a8n8@eGroups.com>
Message-ID: <4EBC246D-31D6-11D9-88FC-000A95891192@cs.usfca.edu>



On Nov 8, 2004, at 2:24 PM, micheal_jor wrote:

>
>
> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
>>
>> On Nov 8, 2004, at 12:51 PM, Tim Simpson wrote:
>>> Currently I'm toying around with antlr, trying to learn the
>>> in's and out's. It is a very useful tool. I was thinking about
>>> this sub/protected rules, and it kind of reminds me of some
>>> stuff from functional programming.
>>>
>>> So what about
>>>
>>> INT : (DIGIT)+
>>> where {DIGIT : '0'..'9';};
>>>
>>> Of course this would only make the definition of DIGIT local to INT.
>>
>> Hi Tim,
>>
>> The only problem is that DIGIT is useful for a bunch of rules. :)
>
>
> INT             : (DIGIT)+ ;
> fragment DIGIT  : '0'..'9' ;
>
> -or-
>
> INT             : (DIGIT)+ ;
> substring DIGIT : '0'..'9' ;
>
> I like "fragment".

heh, that's not bad!  Or possibly "subphrase" or "phrase"?  "partial"?

fragment is good, actually!

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Mon Nov  8 15:58:56 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] Re: "protected" lexer rules
In-Reply-To: <cmorm7+a8n8@eGroups.com>
References: <2EE331FC-31CE-11D9-88FC-000A95891192@cs.usfca.edu>
	<cmorm7+a8n8@eGroups.com>
Message-ID: <16784.2112.246276.836558@despot.non.net>


>>>>> "micheal" == micheal jor <open.zone@virgin.net> writes:
[...]

> INT : (DIGIT)+ ; fragment DIGIT : '0'..'9' ;

> I like "fragment".

Works for me.

Thanks,
	John




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr_lakshmi at yahoo.com  Mon Nov  8 16:33:26 2004
From: antlr_lakshmi at yahoo.com (ManimuthuLakshmi Pitchaikani)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] non-deterministic types
Message-ID: <20041109003326.61243.qmail@web54701.mail.yahoo.com>

Hi,
 
How to avoid non-deterministic types? 
 
In the following example, the keyword 'Assign' is having different notation.
 
1)ERASE ALL ASSIGN
2)ERASE ALL
3)ASSIGN A B
4)ERASE ALL UNASSIGN
 
 
The statement 1,2,4 has a rule.  And statement 3 has a rule.  When the statement 3 is followed by statement 2, the error occurs.
 
It says that "Expected EOF, found A".  This is because the ANTLR recongnises ERASE ALL and then the next statement starting token ASSIGN and try to follow the statement 1 grammer.  
 
Here how i can recongnise the 'ASSIGN' keyword as the starting word of the statement to differentiate the 'ASSIGN'  in other statements? I think this recongisition will avoid the non-determinism.
 
Thanks.
 
Best Regards,
Lakshmi 
 


			
---------------------------------
Do you Yahoo!?
 Check out the new Yahoo! Front Page. www.yahoo.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041108/7ce86ca5/attachment.html
From silverio.di at qem.it  Mon Nov  8 23:16:09 2004
From: silverio.di at qem.it (silverio.di@qem.it)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] structure parameter access
Message-ID: <OF1E00B95B.D4642387-ONC1256F47.0025D8D4-C1256F47.0028707E@qem.it>






I've a problem with a simple language which have
some grammar likeness to C/C++ & Java.

I've tried to read the C & Java grammars on ANTLR
web page but I isn't been able to uderstand how they
solve my question.

My language say that:

a) struct_name.struct_parameter

How you can see (a) is likeness to c statement.
My throuble is that in between struct_name and '.' I can't
admit spaces chars and between '.' and struct_parameter
I can't admit spaces chars too. I think this is same behaviour
required to a C/C++ program.

But I don't understand how to obtain that starting from:

statement : label | struct_assign;
label : LABEL EOL;
struct_assign : IDENT POINT IDENT ASSIGN IDENT EOL;

WS : (' ' | '\t' | '\f') { $setType(Token.SKIP); };
EOL : ("\r\n" | '\r' | '\n'   ) { newline(); };
POINT : '.';
IDENT : ('a'..'z')+;

Thank you very much for your suggestions...
Silverio Diquigiovanni



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From joanpujol at gmail.com  Tue Nov  9 00:41:01 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] non-determinism
In-Reply-To: <20041108204212.75893.qmail@web54708.mail.yahoo.com>
References: <20041108204212.75893.qmail@web54708.mail.yahoo.com>
Message-ID: <d2d18a1041109004156805133@mail.gmail.com>


I think that you need a statmen separator.
In your case I think that this separator is the new line character.

Cheers,


On Mon, 8 Nov 2004 12:42:12 -0800 (PST), ManimuthuLakshmi Pitchaikani
<antlr_lakshmi@yahoo.com> wrote:
>  
> Hi, 
>   
> How to avoid non-deterministic types?  
>   
> In the following example, the keyword 'Assign' is having different notation.
>   
> 1)ERASE ALL ASSIGN 
> 2)ERASE ALL 
> 3)ASSIGN A B 
> 4)ERASE ALL UNASSIGN 
>   
>   
> The statement 1,2,4 has a rule.  And statement 3 has a rule.  When the
> statement 3 is followed by statement 2, the error occurs. 
>   
> It says that "Expected EOF, found A".  This is because the ANTLR recongnises
> ERASE ALL and then the next statement starting token ASSIGN and try to
> follow the statement 1 grammer.  
>   
> Here how i can recongnise the 'ASSIGN' keyword as the starting word of the
> statement to differentiate the 'ASSIGN'  in other statements? I think this
> recongisition will avoid the non-determinism. 
>   
> Thanks. 
>   
> Best Regards, 
> Lakshmi  
>   
>   
>  
> 
>  ________________________________
> Do you Yahoo!?
>  Check out the new Yahoo! Front Page. www.yahoo.com 
>  ________________________________
>  Yahoo! Groups Links
>  
> To visit your group on the web, go to:
> http://groups.yahoo.com/group/antlr-interest/
>   
> To unsubscribe from this group, send an email to:
> antlr-interest-unsubscribe@yahoogroups.com
>   
> Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 
> 
> 


-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Anthony.Youngman at ECA-International.com  Tue Nov  9 01:24:23 2004
From: Anthony.Youngman at ECA-International.com (Anthony Youngman)
Date: Mon Dec 20 16:17:29 2004
Subject: [antlr-interest] "protected" lexer rules
Message-ID: <C7FE35004D40FD45AA342991B88CE40409B06D@lnml1.eca-international.local>


My vote would go for "helper" or "subrule".

As I understand it, though, the important difference is that these rules
are "expanded" and don't exist in their own right in the generated code,
so as long as that's made clear in the docu then okay.

I think I'd actually go for "helper" or "helperule". Then the docu says
that a "helper" is an imaginary construct in the grammar that doesn't
get carried into the generated code :-)

Cheers,
Wol

-----Original Message-----
From: John D. Mitchell [mailto:johnm-antlr@non.net] 
Sent: 08 November 2004 17:21
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] "protected" lexer rules



> The problem with protected (equally private) is that the intended
meaning
> is a side effect of the main meaning of the word.  The above snippet
> would be clear to anybody just casually looking at a new 3.0 grammar,
> right?

Eek! No!  Then it would be impossible/confusing/etc., in conversation,
to
distinguish between (normal) rules that are used by other rules and
"helper" rules that are used by other rules.

Take care,
	John



****************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 8272 5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

****************************************************************************



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From klaren at cs.utwente.nl  Tue Nov  9 01:30:54 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] Re: "protected" lexer rules
In-Reply-To: <cmorm7+a8n8@eGroups.com>
References: <2EE331FC-31CE-11D9-88FC-000A95891192@cs.usfca.edu> <cmorm7+a8n8@eGroups.com>
Message-ID: <20041109093054.GE1031@cs.utwente.nl>


On Mon, Nov 08, 2004 at 10:24:07PM -0000, micheal_jor wrote:
> INT             : (DIGIT)+ ;
> fragment DIGIT  : '0'..'9' ;

I like fragment too.

But would also not mind aux(iliary) mentioned elsewhere.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  Chaos always defeats order because it is better organized.
  --- Terry Pratchet



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From i.maier at gmx.de  Tue Nov  9 08:30:56 2004
From: i.maier at gmx.de (Ingo Maier)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] multiple lexer
In-Reply-To: <005601c4c403$da3a8230$8cc79553@marlboro>
References: <cmhcee+tset@eGroups.com>
	 <005601c4c403$da3a8230$8cc79553@marlboro>
Message-ID: <1100017856.3742.8.camel@beeblebox>


On Sat, 2004-11-06 at 08:23, Alexey Demakov wrote:
> From: "hst_12345" <hst_12345@yahoo.com>
> > I am wokring on a project to parse expressions which is part of the 
> > doc.  So I wrote a seperate parser for the expression. And use 
> > multiple lexer. The problem I have is that when switch back, one 
> > token is eaten from the expression parser. Here is my doc syntax:
> > main parser:
> > 
> > EXP { '1.2+3.5' T;  '3.6+6.8' H;}
> > So the main parser rule:
> > expression:
> >      EXP LCURLY 
> >      ( SINGLE_QUOTE {
> >            _selector.select("expressionLex");
> >            expressionParser.Parse();
> >            _selector.select("mainLex");
> >            }
> >        SINGLE_QUOTE character
> >       )+
> >       ;
> > The problem is when switch back, it complains to look for SINGLE_QUOTE 
> > but get T which is next token. I do print out the expression which is 
> > OK that does not include the single quote. So I do not know where 
> > the single quote. why when it gets back to main parser and the single 
> > quote went away.
> 
> It seems to me that expression parser takes the second single quote from
> input strem. In your situation, expression parser needs to see next character
> to decide whether to stop parsing expression. It calls nextToken() removing
> single token from input stream and donesn't consume it desining to stop 
> expression parsing.
> 
> The simplest solution - to have in nested lexer/parser stop condition that doesn't
> use next token. In this case it is single quote at the end of expression.
> And expression lexer will be responsilble for restoring main lexer:
> 
> expr: ... SINGLE_QOUTE { _selector.pop(); }
> 
> So, in main lexer you only push expression lexer:
> 
> expression:
>      EXP LCURLY 
>      ( SINGLE_QUOTE 
>        {
>            _selector.push("expressionLex");
>            expressionParser.Parse();
>            // restored by expression lexer
>            // _selector.select("mainLex");
>        }
>        // it is consumed by expression lexer
>        // SINGLE_QUOTE 
>        character
>       )+
>       ;
> 
> I've never changed lexer from my parser before and have used
> something like this in main lexer:
> 
> SINGLE_QUOTE: '\'' { _selector.push("expressionLex"); }
> 
> So main parser can process tokens from expression lexer:
> 
> expression:
>      EXP LCURLY 
>      ( SINGLE_QUOTE 
>        realExpr // tokens from expression lexer
>        character
>       )+
>       ;
> 
> Regards,
> Alexey

There is no possibility to put the single quote read by the expression
parser/lexer back to the input stream? I mean, so the main parser/lexer
pair could get the chance to parse the single quote by itself (this may
lead to a completely different token for the single quote).

If you want to exchange the expression parser with a different one(s),
you always have to modify the grammar(s) in your solution to fit into
the main parser.

Regards,
Ingo



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lubos.vnuk at rts.at  Tue Nov  9 06:08:51 2004
From: lubos.vnuk at rts.at (Lubos Vnuk)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] Re: "protected" lexer rules
In-Reply-To: <4EBC246D-31D6-11D9-88FC-000A95891192@cs.usfca.edu>
Message-ID: <cmqj1j+g968@eGroups.com>



Or "subtoken" ?

Regards,
Lubos.





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Nov  9 07:18:20 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] "protected" lexer rules
In-Reply-To: <C7FE35004D40FD45AA342991B88CE40409B06D@lnml1.eca-international.local>
References: <C7FE35004D40FD45AA342991B88CE40409B06D@lnml1.eca-international.local>
Message-ID: <96E9A252-3262-11D9-B52C-000393BB647E@cs.usfca.edu>



On Nov 9, 2004, at 1:24 AM, Anthony Youngman wrote:

>
> My vote would go for "helper" or "subrule".
>
> As I understand it, though, the important difference is that these 
> rules
> are "expanded" and don't exist in their own right in the generated 
> code,
> so as long as that's made clear in the docu then okay.

Howdy.  Actually, the rules still end up as methods in the lexer. :)  
Need it for recursion and such.  The issue is that they should not be 
included in the overall rule that predicts which token will match.

Ter





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-RFESkaZjvKZW7weI89sysT8 at yahoogroups.com  Tue Nov  9 09:08:55 2004
From: antlr-interest-accept-RFESkaZjvKZW7weI89sysT8 at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:30 2004
Subject: MODERATE -- seanharteb@yahoo.co.uk posted to antlr-interest
Message-ID: <1100020135.2017.76830.m22@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  seanharteb@yahoo.co.uk 

The message summary:
--------------------
FROM: seanharteb@yahoo.co.uk 
DATE: Tue, 9 Nov 2004 17:08:43 +0000 (GMT) 
SUBJECT: Outputing SQL with "StringTemplate" 

Hey This is a bit general but does anyone have an example or
a link to an example of a template using antlr's template 
engine "StringTemplate" for outputting SQL in a parser. 
THANKS Sean 

--------------------------------- ALL-NEW Yahoo! Messenger -
all new features - even more fun! 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=364 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-RFESkaZjvKZW7weI89sysT8@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: Sean Barry <seanharteb@yahoo.co.uk>
Subject: Outputing SQL with "StringTemplate"
Date: Tue, 9 Nov 2004 17:08:43 +0000 (GMT)
Size: 2307
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041109/415ad3a9/attachment.mht
From seanharteb at yahoo.co.uk  Tue Nov  9 09:08:43 2004
From: seanharteb at yahoo.co.uk (Sean Barry)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] Outputing SQL with "StringTemplate"
Message-ID: <20041109170843.2690.qmail@web25108.mail.ukl.yahoo.com>

Hey 
This is a bit general but does anyone have an example or a link to an example of a template using antlr's template engine "StringTemplate" for outputting SQL in a parser.
THANKS
Sean 

		
---------------------------------
 ALL-NEW Yahoo! Messenger - all new features - even more fun!  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041109/b9d359ca/attachment.html
From parrt at cs.usfca.edu  Tue Nov  9 09:44:25 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] Outputing SQL with "StringTemplate"
In-Reply-To: <20041109170843.2690.qmail@web25108.mail.ukl.yahoo.com>
References: <20041109170843.2690.qmail@web25108.mail.ukl.yahoo.com>
Message-ID: <FF934ADF-3276-11D9-88FC-000A95891192@cs.usfca.edu>



On Nov 9, 2004, at 9:08 AM, Sean Barry wrote:

> Hey
>  This is a bit general but does anyone have an example or a link to an 
> example?of a template using antlr's?template 
> engine?"StringTemplate"?for outputting SQL in a parser.

Do you mean besides the simple stuff I have in the manual like the 
following?

StringTemplate query =
   new StringTemplate("SELECT $column; separator=","$ FROM $table$;");
query.setAttribute("column", "name");
query.setAttribute("column", "email");
query.setAttribute("table", "User");

Is that enough to get you started?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Nov  9 09:45:05 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] Re: "protected" lexer rules
In-Reply-To: <cmqj1j+g968@eGroups.com>
References: <cmqj1j+g968@eGroups.com>
Message-ID: <16F0F95F-3277-11D9-88FC-000A95891192@cs.usfca.edu>



On Nov 9, 2004, at 6:08 AM, Lubos Vnuk wrote:

>
>
> Or "subtoken" ?

Not bad actually.  "fragment" is not as explicit as subtoken.  What do 
people think of subtoken?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Nov  9 13:25:24 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] ANTLR 3 tree structure stuff
Message-ID: <DE817798-3295-11D9-88FC-000A95891192@cs.usfca.edu>


Folks,

In terms of just the data structures (not how trees are constructed, 
rewritten etc...) for ANTLR 3, I've updated the trees blog:

http://www.antlr.org/blog/antlr3/trees.tml

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From gcpa-antlr-interest at m.gmane.org  Tue Nov  9 12:37:38 2004
From: gcpa-antlr-interest at m.gmane.org (Michael Stahl)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] Re: Comparing ASTs of the two Java1.5 grammars
References: <cljjvp+5nqg@eGroups.com>
Message-ID: <pan.2004.11.09.20.37.22.72204@informatik.uni-ulm.de>


On Mon, 25 Oct 2004 20:25:45 +0000, atripp54321 wrote:
> I went to update my JavaEmitter code for the new JDK1.5 grammar,
> and I see we actually have two JDK1.5 grammars listed at antlr.org:
> one by Michael Studman and another by Michael Stahl.
> My code depends on the "shape" of the Java AST produced
> by the grammar, and I'm sure eventually one of these two will
> need to be chosen to be included with ANTLR as the "official" java.g.
> 
> So I tried out these two grammars on the 
> various new 1.5 features, and here are my notes on
> the ASTs that each of these grammars produce.
> For reference, here's the Sun proposed Java 1.5 grammar:
> http://java.sun.com/docs/books/jls/jls-proposed-changes.html
> 
> 1) Annotations
> Neither grammar stores annotations in the AST.
> This seems right to me, as we don't store comments in the AST either.
> Anyone who's annoyed that comments are not stored in the AST
> will now be even more annoyed :)

hm, i believe my grammar should not throw annotations away ever.
that would be a bug.
do you have a testcase?
 
> 2) Generics:
> Given this code:
>     public Vector(Collection<? extends E> c) {
> 
> Studman's produces this:
>             TYPE
>               IDENT Collection
>                 TYPE_ARGUMENTS
>                   TYPE_ARGUMENT
>                     WILDCARD_TYPE
>                       TYPE_UPPER_BOUNDS
>                         IDENT E
>  
> And Stahl's produces this:
>            TYPE
>              IDENT Collection
>              TYPE_ARGS
>                WILDCARD
>                  LITERAL_extends
>                  TYPE
>                    IDENT E
>                    TYPE_ARGS	
> 
> a) One places the TYPE subtree as a child IDENT, the other as a sibling.
> I prefer Stahl's...seems strange for IDENT to have a child.
> b) Studman's has the extra TYPE_ARGUMENT node, which I prefer.

mine would have a TYPE if the argument were not a WILDCARD,
maybe i should have called it WILDCARD_ARG...
i would say that the extra TYPE_ARGUMENT is superfluous in this case,
since you can only have exactly one TYPE or exactly one WILDCARD
within it anyway.

> c) The two trees are different under WILDCARD_TYPE. I prefer Studman's
> but I'd rename "TYPE_UPPER_BOUNDS" to "TYPE_EXTENDS" (and
> "TYPE_LOWER_BOUNDS"
> to "TYPE_SUPER").
> d) That extra TYPE_ARGS at the end of Stahl's shouldn't be there (I think)

that's not a bug, that's a feature :)
my TYPE nodes always come with a TYPE_ARGS nested within, even if
there aren't any type args. i thought it makes more sense this way,
it is similar to e.g. MODIFIERS.

> 2) For-each loop:
> Given this code:
>                 for (Integer i : integers) {
>                 }
> 
> Studman's produces this:
>          LITERAL_for
>            FOR_EACH_CLAUSE
>              PARAMETER_DEF
>                MODIFIERS
>                TYPE
>                  IDENT Integer
>                IDENT i
>              EXPR
>                IDENT integers
>            SLIST
> 
> And Stahl's produces this:
>           LITERAL_for
>             PARAMETER_DEF
>               MODIFIERS
>               TYPE
>                 IDENT Integer
>                 TYPE_ARGS
>               IDENT i
>             EXPR
>               IDENT integers
>             SLIST
> 
> I prefer Studman's with the "FOR_EACH_CLAUSE" node which parallels the
> "FOR_INIT",
> "FOR_CONDITION", and "FOR_ITERATOR" nodes in the old "for" syntax.

oh, i just noticed that i have forgotten this.
my whitespace-preserving parser puts a ENHANCED_FOR there, right
where the FOR_EACH_CLAUSE goes, but the one i put up on antlr.org
does not.

> 3) Enums:
> Given this code:
>    enum Rank2 implements whatever {ONE, TWO, THREE}
> Studman's produces this:
>       ENUM_DEF
>         MODIFIERS
>         IDENT Rank2
>         IMPLEMENTS_CLAUSE
>           IDENT whatever
>         OBJBLOCK
>           ENUM_CONSTANT_DEF
>             ANNOTATIONS
>             IDENT ONE
>           ENUM_CONSTANT_DEF
>             ANNOTATIONS
>             IDENT TWO
>           ENUM_CONSTANT_DEF
>             ANNOTATIONS
>             IDENT THREE
> 
> Stahl's failed with "unexpected token" exception.
> 
> Given a full enum definitions, Studman's produced an AST that's identical
> to a class definition, but with ENUM_DEF in place of CLASS_DEF.
> Stahl's failed on this one too.

oh, that would be because you forgot to turn on the enum keyword
in the lexer. it is off by default, as it is not backwards compatible
with java 1.4 code. just call the enableEnum() method of the lexer
and try again.

> 4) Varargs:
> Given this code:
> 	void test(int i, String... strings)
> 
> Studman's produces this:
>         PARAMETERS
>           PARAMETER_DEF
>             MODIFIERS
>             TYPE
>               LITERAL_int
>             IDENT i
>           VARIABLE_PARAMETER_DEF
>             MODIFIERS
>             TYPE
>               IDENT String
>             IDENT strings
> 
> And Stahl's produces this:
>         PARAMETERS
>           PARAMETER_DEF
>             MODIFIERS
>             TYPE
>               LITERAL_int
>             IDENT i
>           PARAMETER_DEF
>             MODIFIERS
>             TYPE
>               IDENT String
>               TYPE_ARGS
>               ELLIPSIS
>             IDENT strings
> 
> I prefer Studman's AST with the explicit VARIABLE_PARAMETER_DEF node.

hm... i think my ELLIPSIS node there sucks, no idea why i put it
there :)

> 5) Static imports:
> Given this code:
> import static java.lang.Math.PI;
> 
> Studman's produces this:
>   STATIC_IMPORT
>     DOT
>       DOT
>         DOT
>           IDENT java
>           IDENT lang
>         IDENT Math
>       IDENT PI
> 
> And Stahl's produces this:
>   IMPORT
>     LITERAL_static
>     DOT
>       DOT
>         DOT
>           IDENT java
>           IDENT lang
>         IDENT Math
>       IDENT PI
> 
> I prefer Studman's STATIC_IMPORT. The issue here is whether a "static
> import"
> is just an "import" that happens to have a "static" modifier 
> (as when a variable is static),
> or whether it's a new type of thing (in the way that a "static block"
> differs
> from a regular block).

hm, that's what i was asking myself...
will java 1.6 have a "import private", to do away with that
pesky information hiding?
or maybe "import final", for when you're _really_ sure you need
something? "import volatile" when you're not so sure?
oh, sorry i am blathering nonsense.
of course, there will be no java 1.6, they'll call it java 6.0 instead.

> Summary:
> Given that these two both correctly parse Java 1.5 code (which they seem
> to except for the enum problem noted above), choosing one of these to
> be the "official" java.g comes down to which produces a "better" AST.
> I've listed the differences and it looks to me like Studman's AST's
> look like they're more consistent with the ASTs we get today.
> 
> And of course, some guru should look closely at the grammar to make
> sure that it matches the "official" grammar in the JLS, and comments as
> needed, make sure token names are consistent, etc.

i have already checked that my grammar matches the p-f-d (or was it
f-p-d?) of the relevant jsrs that were published in july/august
iirc. excepting some things that could be done in the parser, but
which are better checked in a semantic pass imho.
i hope they haven't changed the syntax yet again since then...

thanks for looking at things :)

michael stahl




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From oliver.zeigermann at gmail.com  Tue Nov  9 14:00:53 2004
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] ANTLR 3 tree structure stuff
In-Reply-To: <DE817798-3295-11D9-88FC-000A95891192@cs.usfca.edu>
References: <DE817798-3295-11D9-88FC-000A95891192@cs.usfca.edu>
Message-ID: <9da4f452041109140058bae83a@mail.gmail.com>


This looks reasonable to me. However, I was wondering why are you so
eager to be compatible to the DOM?

Oliver


On Tue, 9 Nov 2004 13:25:24 -0800, Terence Parr <parrt@cs.usfca.edu> wrote:
> 
> Folks,
> 
> In terms of just the data structures (not how trees are constructed,
> rewritten etc...) for ANTLR 3, I've updated the trees blog:
> 
> http://www.antlr.org/blog/antlr3/trees.tml
> 
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
> 
> 
> Yahoo! Groups Links
> 
> 
> 
> 
>


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Nov  9 14:52:06 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] ANTLR 3 tree structure stuff
In-Reply-To: <9da4f452041109140058bae83a@mail.gmail.com>
References: <DE817798-3295-11D9-88FC-000A95891192@cs.usfca.edu> <9da4f452041109140058bae83a@mail.gmail.com>
Message-ID: <FADE8F15-32A1-11D9-88FC-000A95891192@cs.usfca.edu>



On Nov 9, 2004, at 2:00 PM, Oliver Zeigermann wrote:

>
> This looks reasonable to me. However, I was wondering why are you so
> eager to be compatible to the DOM?

I just wanted to be able to parse DOM trees.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-YXNlkcyNJoQ3wqTYESSycSs at yahoogroups.com  Tue Nov  9 16:25:04 2004
From: antlr-interest-accept-YXNlkcyNJoQ3wqTYESSycSs at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:30 2004
Subject: MODERATE -- stevegianvecchio@hotmail.com posted to antlr-interest
Message-ID: <1100046304.392.31924.m5@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  stevegianvecchio@hotmail.com 

The message summary:
--------------------
FROM: stevegianvecchio@hotmail.com 
DATE: Wed, 10 Nov 2004 00:24:56 -0000 
SUBJECT: AST typecasting problem? 

I created this file: 

public class BeliefAST extends antlr.CommonAST { List 
beliefList; } 

Then in a separated file: 

... AST t1 = parser.getAST(); BeliefAST t2 = (BeliefAST)t1; 

System.out.println("I don't get here."); 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=365 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-YXNlkcyNJoQ3wqTYESSycSs@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "Steve" <stevegianvecchio@hotmail.com>
Subject: AST typecasting problem?
Date: Wed, 10 Nov 2004 00:24:56 -0000
Size: 1895
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041110/9a98f17e/attachment.mht
From stevegianvecchio at hotmail.com  Tue Nov  9 16:24:56 2004
From: stevegianvecchio at hotmail.com (Steve)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] AST typecasting problem?
Message-ID: <cmrn4o+447t@eGroups.com>




I created this file:

public class BeliefAST extends antlr.CommonAST {
    List beliefList;
}

Then in a separated file:

...
AST t1 = parser.getAST();
BeliefAST t2 = (BeliefAST)t1;
System.out.println("I don't get here.");

At the second line, where the typecast takes place, my program exits 
immediately without any errors.  The following code works fine:

...
AST t1 = parser.getAST();
CommonAST t2 = (CommonAST)t1;
System.out.println("I don't get here.");

I can't think of what I'm doing wrong.  I tried replacing my 
BeliefAST file with CommonAST and just changing the text "CommonAST" 
to "BeliefAST" and got the same result.  I can't seem to figure out 
what is causing this, anyone have any ideas?








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Tue Nov  9 17:04:32 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] Re: "protected" lexer rules
In-Reply-To: <16F0F95F-3277-11D9-88FC-000A95891192@cs.usfca.edu>
References: <cmqj1j+g968@eGroups.com>
	<16F0F95F-3277-11D9-88FC-000A95891192@cs.usfca.edu>
Message-ID: <16785.26912.257892.938648@despot.non.net>


>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
>>>>>> On Nov 9, 2004, at 6:08 AM, Lubos Vnuk writes:
[...]

>> Or "subtoken" ?

> Not bad actually.  "fragment" is not as explicit as subtoken.  What do
> people think of subtoken?

Yuck.  That has a similar problem to "subrule" in that "subtoken" already
has meaning when talking about the parts of a complicated rule (regardless
of whether or not subtoken is specified by a separate subrule or not.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Tue Nov  9 17:10:25 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] Re: AST typecasting problem?
In-Reply-To: <cmrn4o+447t@eGroups.com>
Message-ID: <cmrpq1+rtra@eGroups.com>



The most likely cause is (from
http://www.antlr.org/doc/trees.html#_bb3 in the ANTLR manual):

"If you are only interested in specifying the AST node type at
runtime, use the

setASTNodeType(String className)

method on the parser or factory.  By default, trees are constructed of
nodes of type antlr.CommonAST. (You must use the fully-qualified class
name)."

Do that in the parser and you should be okay:  my guess is that your
parser is generating CommonAST nodes (the default).

--Loring

--- In antlr-interest@yahoogroups.com, "Steve" <stevegianvecchio@h...>
wrote:
> 
> 
> I created this file:
> 
> public class BeliefAST extends antlr.CommonAST {
>     List beliefList;
> }
> 
> Then in a separated file:
> 
> ...
> AST t1 = parser.getAST();
> BeliefAST t2 = (BeliefAST)t1;
> System.out.println("I don't get here.");
> 
> At the second line, where the typecast takes place, my program exits 
> immediately without any errors.  The following code works fine:
> 
> ...
> AST t1 = parser.getAST();
> CommonAST t2 = (CommonAST)t1;
> System.out.println("I don't get here.");
> 
> I can't think of what I'm doing wrong.  I tried replacing my 
> BeliefAST file with CommonAST and just changing the text "CommonAST" 
> to "BeliefAST" and got the same result.  I can't seem to figure out 
> what is causing this, anyone have any ideas?





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Tue Nov  9 17:11:25 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] AST typecasting problem?
In-Reply-To: <cmrn4o+447t@eGroups.com>
References: <cmrn4o+447t@eGroups.com>
Message-ID: <16785.27325.260105.979082@despot.non.net>


>>>>> "Steve" == Steve  <stevegianvecchio@hotmail.com> writes:
[...]

> I created this file:

> public class BeliefAST extends antlr.CommonAST { List beliefList; }

> Then in a separated file:

> ...  AST t1 = parser.getAST(); BeliefAST t2 = (BeliefAST)t1;
> System.out.println("I don't get here.");

> At the second line, where the typecast takes place, my program exits
> immediately without any errors.  The following code works fine:

> ...  AST t1 = parser.getAST(); CommonAST t2 = (CommonAST)t1;
> System.out.println("I don't get here.");

> I can't think of what I'm doing wrong.  I tried replacing my BeliefAST
> file with CommonAST and just changing the text "CommonAST" to "BeliefAST"
> and got the same result.  I can't seem to figure out what is causing
> this, anyone have any ideas?

Did you actually hook your new AST/node class into the system so that it
actually gets used?

Check out the cgram/examples/Test.java file.  It uses a custom class called
TNode:
            parser.setASTNodeClass (TNode.class.getName());

Recall that the nodes are created through the astFactory and it has to know
the type of the node to create.

Hope this helps,
		John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Tue Nov  9 17:14:42 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] Re: AST typecasting problem?
In-Reply-To: <cmrpq1+rtra@eGroups.com>
References: <cmrn4o+447t@eGroups.com>
	<cmrpq1+rtra@eGroups.com>
Message-ID: <16785.27522.46562.84019@despot.non.net>


>>>>> "lgcraymer" == lgcraymer  <lgc@mail1.jpl.nasa.gov> writes:
[...]
> The most likely cause is (from http://www.antlr.org/doc/trees.html#_bb3
> in the ANTLR manual):

> "If you are only interested in specifying the AST node type at runtime,
> use the

> setASTNodeType(String className)

Note that the manual hasn't been updated in awhile.

setASTNodeType() has been deprecated. Use setASTNodeClass() instead.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Tue Nov  9 17:14:45 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] Re: "protected" lexer rules
In-Reply-To: <16785.26912.257892.938648@despot.non.net>
Message-ID: <cmrq25+2ora@eGroups.com>



I would agree.  Really, the basic idea is more that of a syllable that
may be included in a word.  I'm not too keen on "fragment" either--you
break things into fragments, you don't build things up from them.

--Loring


--- In antlr-interest@yahoogroups.com, "John D. Mitchell"
<johnm-antlr@n...> wrote:
> >>>>> "Terence" == Terence Parr <parrt@c...> writes:
> >>>>>> On Nov 9, 2004, at 6:08 AM, Lubos Vnuk writes:
> [...]
> 
> >> Or "subtoken" ?
> 
> > Not bad actually.  "fragment" is not as explicit as subtoken.  What do
> > people think of subtoken?
> 
> Yuck.  That has a similar problem to "subrule" in that "subtoken"
already
> has meaning when talking about the parts of a complicated rule
(regardless
> of whether or not subtoken is specified by a separate subrule or not.
> 
> Take care,
> 	John





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Tue Nov  9 17:39:57 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] ANTLR 3 tree structure stuff
References: <DE817798-3295-11D9-88FC-000A95891192@cs.usfca.edu>
Message-ID: <002801c4c6c6$2fce25c0$0400a8c0@NOTEBOOK>


Hi Ter,
While I like any improvment to trees that would eliminate cycles you mention
at the end

" A further restriction is that you should not add the same tree more than
once if you want the getNextSibling() stuff to work. This would be too
expensive to enforce probably. "

If you cannot inforce correct tree construction then not bother change the
existing one.  Tree contruction and manipulation has been the bane of my
work
with Antlr.
I want robust tree construction that will throw a useful error when I try
and do some thing silly or just don't understand what is happening.

matthew

----- Original Message ----- 
From: "Terence Parr" <parrt@cs.usfca.edu>
To: <antlr-interest@yahoogroups.com>
Sent: Wednesday, November 10, 2004 8:25 AM
Subject: [antlr-interest] ANTLR 3 tree structure stuff


>
> Folks,
>
> In terms of just the data structures (not how trees are constructed,
> rewritten etc...) for ANTLR 3, I've updated the trees blog:
>
> http://www.antlr.org/blog/antlr3/trees.tml
>
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From oliver.zeigermann at gmail.com  Wed Nov 10 00:28:33 2004
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] ANTLR 3 tree structure stuff
In-Reply-To: <FADE8F15-32A1-11D9-88FC-000A95891192@cs.usfca.edu>
References: <DE817798-3295-11D9-88FC-000A95891192@cs.usfca.edu>
	 <9da4f452041109140058bae83a@mail.gmail.com>
	 <FADE8F15-32A1-11D9-88FC-000A95891192@cs.usfca.edu>
Message-ID: <9da4f45204111000286e2409cb@mail.gmail.com>


I know there has been a discussion about this some time ago, but could
you explain this for me once more, please?

I thought if you translated (traversed) DOMs instead of ASTs as well
what what be the difficulty if they have some incompatible method
signatures? The DOM objects certainly won't implement the AST
interface, will they? Wouldn't you need different code for both
traversals anyway as the DOM does not have any integer type
information. Additionally it has attributes along with elements and
encodes a document only. Having said this it seems DOM and AST are
semantically incompatible, so why bother on the signature level?

Most likely I got everything wrong again, and if so would you please
explain how it really is supposed to work?

Thanks,

Oliver

On Tue, 9 Nov 2004 14:52:06 -0800, Terence Parr <parrt@cs.usfca.edu> wrote:
> 
> 
> On Nov 9, 2004, at 2:00 PM, Oliver Zeigermann wrote:
> 
> >
> > This looks reasonable to me. However, I was wondering why are you so
> > eager to be compatible to the DOM?
> 
> I just wanted to be able to parse DOM trees.
> 
> 
> 
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
> 
> Yahoo! Groups Links
> 
> 
> 
> 
>


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From silverio.di at qem.it  Wed Nov 10 01:38:20 2004
From: silverio.di at qem.it (silverio.di@qem.it)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] spaces between tokens
Message-ID: <OF983F0A08.CC2464E0-ONC1256F48.00337898-C1256F48.003577D4@qem.it>






Hi,
I've a big problem.

In my grammar, how in many others, the whitespaces are skipped in lexer,
but I've some circumstances in which I need to check that not any spaces
are present between tokens.

Example :
WeekJobHour@Monday = 8

would mean assign 8 (hours) to parameter Monday of structure WeekJobHour.
I would like my lexer extract following tokens:

IDENT ATSIGN IDENT

but my problem is to check than not any WS are present between
IDENT and ATSIGN and between ATSIGN and IDENT so

WeekJobHour@Monday = 8        // is OK
WeekJobHour @Monday = 8       // is BAD
WeekJobHour@ Monday = 8       // is BAD
WeekJobHour  @ Monday = 8           // is BAD too !

I could use following lexer rule:

STRUCT_PARAMETER
      :     ('A'..'Z' | 'a..z')+
            '@'
            ('A'..'Z' | 'a..z')+
      ;

but in parser how can I extract the structure name (WeekJobHour)
and the structure parameter (Monday) form STRUCT_PARAMETER
token ?

I think a similar issue is present in C/C++ structure construct

Thank you for your suggestions about
Silverio Diquigiovanni



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From demakov at ispras.ru  Tue Nov  9 03:40:51 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] structure parameter access
References: <OF1E00B95B.D4642387-ONC1256F47.0025D8D4-C1256F47.0028707E@qem.it>
Message-ID: <000201c4c70f$6980ebb0$8cc79553@marlboro>


From: <silverio.di@qem.it>
> I've a problem with a simple language which have
> some grammar likeness to C/C++ & Java.
> 
> I've tried to read the C & Java grammars on ANTLR
> web page but I isn't been able to uderstand how they
> solve my question.
> 
> My language say that:
> 
> a) struct_name.struct_parameter
> 
> How you can see (a) is likeness to c statement.
> My throuble is that in between struct_name and '.' I can't
> admit spaces chars and between '.' and struct_parameter
> I can't admit spaces chars too. I think this is same behaviour
> required to a C/C++ program.
> 
> But I don't understand how to obtain that starting from:
> 
> statement : label | struct_assign;
> label : LABEL EOL;
> struct_assign : IDENT POINT IDENT ASSIGN IDENT EOL;
> 
> WS : (' ' | '\t' | '\f') { $setType(Token.SKIP); };
> EOL : ("\r\n" | '\r' | '\n'   ) { newline(); };
> POINT : '.';
> IDENT : ('a'..'z')+;
> 
> Thank you very much for your suggestions...
> Silverio Diquigiovanni

Because parser doesn't know about skipped tokens the only way to
skip WS and forbid WS near POINT - is to handle struct_name.struct_parameter
as single token in lexer.
Another idea - the only idea - is to track WS while skipping and decorate
POINT token by flag indicating that there was WS just before or after.
You can check it in parser rule and print error message.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From higgins_barry at yahoo.co.uk  Wed Nov 10 03:31:31 2004
From: higgins_barry at yahoo.co.uk (higgins_barry)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] AST for java decalration
Message-ID: <cmsu6j+92pj@eGroups.com>



HJ all,
In the var declaration for java.g for the line
  int i, q, s;

it creates an AST like this
VARIABLE_DEF
   MODIFIER
   TYPE
   INDENT
for each of the three variables i, q & s.

I've run into a problem when I try to replicate this because my
declarations come in the form
   i, q, s int
Therefore I cannot pass the type as a parameter (as is done in the
java.g) because I have do not hit that token until the other tokens
have been consumed.

Can anyone tell me if there is another way to build my AST which stays
within the accepted form?

Thanks,
Barry





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-lwYLP9_EXnbDrJDp4d19l9Q at yahoogroups.com  Wed Nov 10 04:22:54 2004
From: antlr-interest-accept-lwYLP9_EXnbDrJDp4d19l9Q at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:30 2004
Subject: MODERATE -- eddie_antlr@yahoo.co.uk posted to antlr-interest
Message-ID: <1100089374.462.16924.m4@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  eddie_antlr@yahoo.co.uk 

The message summary:
--------------------
FROM: eddie_antlr@yahoo.co.uk 
DATE: Wed, 10 Nov 2004 12:22:38 +0000 (GMT) 
SUBJECT: Transforming Comments along with trees 

Hi I am building a parser that will convert a piece of t-slq
to the corresponding p-sql. I am using a 
TokenStreamHiddenTokenFilter to ignore but preserve comments
and builld up my source ast tree! I than plan to do maybe 
one or to pass transformations to the tree! However i am 
stuck on how to bring across my comments after each 
transformations! I would greatly appreciate any ideas on how
this can be done! regards ed. 

--------------------------------- ALL-NEW Yahoo! Messenger -
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=366 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-lwYLP9_EXnbDrJDp4d19l9Q@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: dsfsdf fdsfdsf <eddie_antlr@yahoo.co.uk>
Subject: Transforming Comments along with trees
Date: Wed, 10 Nov 2004 12:22:38 +0000 (GMT)
Size: 2804
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041110/f97df8e1/attachment.mht
From silverio.di at qem.it  Wed Nov 10 04:35:23 2004
From: silverio.di at qem.it (silverio.di@qem.it)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] structure parameter access
In-Reply-To: <000201c4c70f$6980ebb0$8cc79553@marlboro>
Message-ID: <OF18090095.A5A893A0-ONC1256F48.0044E096-C1256F48.0045ADBF@qem.it>







"Alexey Demakov" <demakov@ispras.ru> wrote:
>Because parser doesn't know about skipped tokens the only way to
>skip WS and forbid WS near POINT - is to handle
struct_name.struct_parameter
>as single token in lexer.

>Another idea - the only idea - is to track WS while skipping and decorate
>POINT token by flag indicating that there was WS just before or after.
>You can check it in parser rule and print error message.

Ok, I can write:

STRUCT_PARAMETER
      :     IDENT
            '.'
            IDENT
      ;

but in parser how can I extract from STRUCT_PARAMETER token
the structure name and the parameter name ?



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From klaren at cs.utwente.nl  Wed Nov 10 05:05:04 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] Re: "protected" lexer rules
In-Reply-To: <cmrq25+2ora@eGroups.com>
References: <16785.26912.257892.938648@despot.non.net> <cmrq25+2ora@eGroups.com>
Message-ID: <20041110130504.GD32655@cs.utwente.nl>


On Wed, Nov 10, 2004 at 01:14:45AM -0000, lgcraymer wrote:
> I would agree.  Really, the basic idea is more that of a syllable that
> may be included in a word.  I'm not too keen on "fragment" either--you
> break things into fragments, you don't build things up from them.

Triggered by that last remark:
1. part/partial
2. component/comp
3. alias
4. shorthand
5. abbreviation/abbrev

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
              of UCSD Pascal ever released..." --- Larry Smith



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From demakov at ispras.ru  Wed Nov 10 05:19:13 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] structure parameter access
References: <OF18090095.A5A893A0-ONC1256F48.0044E096-C1256F48.0045ADBF@qem.it>
Message-ID: <017a01c4c727$deffe220$8cc79553@marlboro>


From: <silverio.di@qem.it>
> "Alexey Demakov" <demakov@ispras.ru> wrote:
> >Because parser doesn't know about skipped tokens the only way to
> >skip WS and forbid WS near POINT - is to handle
> struct_name.struct_parameter
> >as single token in lexer.
> 
> >Another idea - the only idea - is to track WS while skipping and decorate
> >POINT token by flag indicating that there was WS just before or after.
> >You can check it in parser rule and print error message.
> 
> Ok, I can write:
> 
> STRUCT_PARAMETER
>       :     IDENT
>             '.'
>             IDENT
>       ;
> 
> but in parser how can I extract from STRUCT_PARAMETER token
> the structure name and the parameter name ?

In parser

struct_parameter : t:STRUCT_PARAMETER
{
  String s = t.getText();
  int dot = s.indexOf( '.' );
  String structureName = s.substring( 0, dot );
  String parameterName = s.substring( dot + 1 );
  ...
}
;

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From anakreonmejdi at yahoo.gr  Wed Nov 10 07:39:47 2004
From: anakreonmejdi at yahoo.gr (Anakreon)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] spaces between tokens
In-Reply-To: <OF983F0A08.CC2464E0-ONC1256F48.00337898-C1256F48.003577D4@qem.it>
References: <OF983F0A08.CC2464E0-ONC1256F48.00337898-C1256F48.003577D4@qem.it>
Message-ID: <41923643.6040505@yahoo.gr>


silverio.di@qem.it wrote:
> 
> 
> 
> 
> Hi,
> I've a big problem.
> 
> In my grammar, how in many others, the whitespaces are skipped in lexer,
> but I've some circumstances in which I need to check that not any spaces
> are present between tokens.
> 
> Example :
> WeekJobHour@Monday = 8
> 
> would mean assign 8 (hours) to parameter Monday of structure WeekJobHour.
> I would like my lexer extract following tokens:
> 
> IDENT ATSIGN IDENT
> 
> but my problem is to check than not any WS are present between
> IDENT and ATSIGN and between ATSIGN and IDENT so
> 
> WeekJobHour@Monday = 8        // is OK
> WeekJobHour @Monday = 8       // is BAD
> WeekJobHour@ Monday = 8       // is BAD
> WeekJobHour  @ Monday = 8           // is BAD too !
> 
> I could use following lexer rule:
> 
> STRUCT_PARAMETER
>       :     ('A'..'Z' | 'a..z')+
>             '@'
>             ('A'..'Z' | 'a..z')+
>       ;
> 
> but in parser how can I extract the structure name (WeekJobHour)
> and the structure parameter (Monday) form STRUCT_PARAMETER
> token ?
> 
> I think a similar issue is present in C/C++ structure construct
> 
> Thank you for your suggestions about
> Silverio Diquigiovanni
Make a class wich implements TokenStream wich uses the Lexer.
In the nextToken method, if the lexer returns a token of type 
STRUCT_PARAM, split the token in 3 tokens where the first would be
of type STRUCT_NAME the second STRUCT_AT and the third STRUCT_DAY
and the text of the tokens WeekJobHour, @, Monday respectively.
return the first token from the method and store the other 2.
In the next 2 calls of nextToken return the stored ones.

Pass the implementor of TokenStream instead of your Lexer to the
parser.

Anakreon


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lubos.vnuk at rts.at  Wed Nov 10 05:37:55 2004
From: lubos.vnuk at rts.at (Lubos Vnuk)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] Re: "protected" lexer rules
In-Reply-To: <16785.26912.257892.938648@despot.non.net>
Message-ID: <cmt5jj+hvsi@eGroups.com>



> Yuck.  That has a similar problem to "subrule"
> in that "subtoken" already has meaning when
> talking about the parts of a complicated rule 
I have never heard of referring to a part of a complicated lexer rule 
as a subtoken. I'd call it a segment, a part, a fragment... Isn't a 
subtoken supposed to be a token as well as a subset is a set or a 
subprocedure is still a procedure? If yes, then the 'A' in the 
following example cannot be called "subtoken":

rule: ABC subrule;
ABC: 'A' BC;
protected
BC: 'B' 'C';

I know that based on this reasoning you may object that BC shouldn't 
be called "subtoken" either as a subtoken cannot actually exist as it 
contradicts the definition of a token...but isn't this the exact and 
explicit meaning of what we have been trying to say by "protected" so 
far?


Regards,
Lubos.
P.S.: I vote for any of these: subtoken, imaginary token, virtual 
token, helper token, abstract token, auxiliary token, sublexeme






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From mtiller at ford.com  Wed Nov 10 05:59:48 2004
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] ANTLR 3 tree structure stuff
Message-ID: <FD35CB8B26F9534E86D1AC31F401AB340483FDC2@na1fcm52.dearborn.ford.com>


Out of curiosity, is this blog syndicated anywhere?  I know about
http://www.antlr.org/news/rss but it isn't coming through on that.  Am I
missing something?  If not, any chance you'll syndicate your blog stuff
under this feed or another one hosted at www.antlr.org?

--
Mike

> -----Original Message-----
> From: Terence Parr [mailto:parrt@cs.usfca.edu]
> Sent: Tuesday, November 09, 2004 4:25 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] ANTLR 3 tree structure stuff
> 
> 
> Folks,
> 
> In terms of just the data structures (not how trees are constructed,
> rewritten etc...) for ANTLR 3, I've updated the trees blog:
> 
> http://www.antlr.org/blog/antlr3/trees.tml
> 
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
> 
> 
> 
> 
> 
> 
> Yahoo! Groups Links
> 
> 
> 
> 
> 
> 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From dcaton at shorelinesoftware.com  Wed Nov 10 06:01:34 2004
From: dcaton at shorelinesoftware.com (Don Caton)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] Determining context in lexer?
In-Reply-To: <017a01c4c727$deffe220$8cc79553@marlboro>
Message-ID: <1100095137.18631@mx9.mysite4now.com>


Hi all:

In the language I'm parsing, the square brackets are used for two completely
different things.  The first usage is as an array access operator, i.e.:

  x := id[expr]
  x := id[expr, expr]
  x := id[expr][expr]
  x := f()[expr]

and so on.  No problem.  BUT, square brackets can also delimit literal
strings, i.e.:

  x := [Hello World]   // equivalent to x := "Hello World"
  x := f( [Hello], "World" )

... etc.  The problem is that the lexer tokenizes text such as:

  [x + 1]

into five individual tokens which will eventually match a parser rule such
as:

   arraySubscr: LBRKT expr ( COMMA expr )* RBRKT;

but if the brackets delimit a string, I want the text to be parsed into a
single STRING_LITERAL token, which would eventually match a rule such as:

   literalValue:  STRING_LITERAL | INT_LITERAL | FLOAT_LITERAL | ... etc. ;

Problem is, the lexer does not have context information to decide how to
tokenize a "[" ... "]" sequence of characters.  I don't think the use of "["
is ambiguous and if I knew what the prior token was then I could probably
use a semantic predicate in the lexer rule for "[".  Syntactic and semantic
predicates can look ahead, but I need to look backwards and I didn't find
anything in the docs that addresses this kind of problem.  

-- 
Don




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From td at tmnet.dk  Wed Nov 10 06:13:42 2004
From: td at tmnet.dk (Tim Doege)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] Determining context in lexer?
In-Reply-To: <1100095137.18631@mx9.mysite4now.com>
Message-ID: <OF5C40131E.5EAC9B9E-ONC1256F48.004DCC67-C1256F48.004E4F56@tmnet.dk>


You can simulate "looking backwards" by setting a mark in your lexer rule
using mark() and use rewind(somePosition) and commit() to continue.

- Tim


"Don Caton" <dcaton@shorelinesoftware.com> wrote on 10-11-2004 15:01:34:

>
> Hi all:
>
> In the language I'm parsing, the square brackets are used for two
completely
> different things.  The first usage is as an array access operator, i.e.:
>
>   x := id[expr]
>   x := id[expr, expr]
>   x := id[expr][expr]
>   x := f()[expr]
>
> and so on.  No problem.  BUT, square brackets can also delimit literal
> strings, i.e.:
>
>   x := [Hello World]   // equivalent to x := "Hello World"
>   x := f( [Hello], "World" )
>
> ... etc.  The problem is that the lexer tokenizes text such as:
>
>   [x + 1]
>
> into five individual tokens which will eventually match a parser rule
such
> as:
>
>    arraySubscr: LBRKT expr ( COMMA expr )* RBRKT;
>
> but if the brackets delimit a string, I want the text to be parsed into a
> single STRING_LITERAL token, which would eventually match a rule such as:
>
>    literalValue:  STRING_LITERAL | INT_LITERAL | FLOAT_LITERAL | ... etc.
;
>
> Problem is, the lexer does not have context information to decide how to
> tokenize a "[" ... "]" sequence of characters.  I don't think the use of
"["
> is ambiguous and if I knew what the prior token was then I could probably
> use a semantic predicate in the lexer rule for "[".  Syntactic and
semantic
> predicates can look ahead, but I need to look backwards and I didn't find
> anything in the docs that addresses this kind of problem.
>
> --
> Don
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From demakov at ispras.ru  Wed Nov 10 06:22:26 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] Determining context in lexer?
References: <1100095137.18631@mx9.mysite4now.com>
Message-ID: <01c301c4c730$b4096a10$8cc79553@marlboro>


From: "Don Caton" <dcaton@shorelinesoftware.com>
> In the language I'm parsing, the square brackets are used for two completely
> different things.  The first usage is as an array access operator, i.e.:
> 
>   x := id[expr]
>   x := id[expr, expr]
>   x := id[expr][expr]
>   x := f()[expr]
> 
> and so on.  No problem.  BUT, square brackets can also delimit literal
> strings, i.e.:
> 
>   x := [Hello World]   // equivalent to x := "Hello World"
>   x := f( [Hello], "World" )
> 
> ... etc.  The problem is that the lexer tokenizes text such as:
> 
>   [x + 1]
> 
> into five individual tokens which will eventually match a parser rule such
> as:
> 
>    arraySubscr: LBRKT expr ( COMMA expr )* RBRKT;
> 
> but if the brackets delimit a string, I want the text to be parsed into a
> single STRING_LITERAL token, which would eventually match a rule such as:
> 
>    literalValue:  STRING_LITERAL | INT_LITERAL | FLOAT_LITERAL | ... etc. ;
> 
> Problem is, the lexer does not have context information to decide how to
> tokenize a "[" ... "]" sequence of characters.  I don't think the use of "["
> is ambiguous and if I knew what the prior token was then I could probably
> use a semantic predicate in the lexer rule for "[".  Syntactic and semantic
> predicates can look ahead, but I need to look backwards and I didn't find
> anything in the docs that addresses this kind of problem.  

You can insert filter between lexer and parser. 
This filter will store type of last token.
This info can be used in lexer predicates.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From atripp at comcast.net  Wed Nov 10 07:12:14 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] Re: ANTLR 3 tree structure stuff
In-Reply-To: <DE817798-3295-11D9-88FC-000A95891192@cs.usfca.edu>
Message-ID: <cmtb4e+kep8@eGroups.com>



Terrance,

Why not use the built-in Swing TreeNode data structure?
TreeNode is the interface: 
http://java.sun.com/j2se/1.5.0/docs/api/javax/swing/tree/TreeNode.html
and DefaultMutableTreeNode is your typical implementation:
http://java.sun.com/j2se/1.5.0/docs/api/javax/swin
g/tree/DefaultMutableTreeNode.html

DefaultMutableTreeNode (ugg, what an awful name!) may seem like
overkill, but hey, if the code's already there and working, why not?
If you want something simpler, just subclass MutableTreeNode
instead.

The only difference I see between your proposal and this is
that you have stuff like getNextSibling(), while the built-in
one forces you to use an iterator (actually, it's still using
Enumeration rather than Iterator - another uggh!).

I always thought it strange that Sun chose to put their
List and Map data structures in the java.util package, but their
Tree data structure in javax.swing. Oh well...nonetheless, it
is a true, full-featured and flexible Tree data structure.

See also the tutorial:
http://java.sun.com/docs/books/tutorial/uiswing/components/tree.html
Note that creating a visual JTree becomes trivial, just pass it
the root DefaultMutableTreeNode:
JTree tree = new JTree(root);

Andy





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Wed Nov 10 07:47:13 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] Re: "protected" lexer rules
In-Reply-To: <cmt5jj+hvsi@eGroups.com>
References: <16785.26912.257892.938648@despot.non.net>
	<cmt5jj+hvsi@eGroups.com>
Message-ID: <16786.14337.341116.338708@despot.non.net>


>>>>> "Lubos" == Lubos Vnuk <lubos.vnuk@rts.at> writes:
[...]
> I have never heard of referring to a part of a complicated lexer rule as
> a subtoken. I'd call it a segment, a part, a fragment... Isn't a subtoken
> supposed to be a token as well as a subset is a set or a subprocedure is
> still a procedure? If yes, then the 'A' in the following example cannot
> be called "subtoken":

> rule: ABC subrule; ABC: 'A' BC; protected BC: 'B' 'C';

Sure it can and that's the whole point... "sub" is a very ambiguous
qualifier.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Wed Nov 10 07:55:26 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] ANTLR 3 tree structure stuff
In-Reply-To: <002801c4c6c6$2fce25c0$0400a8c0@NOTEBOOK>
References: <DE817798-3295-11D9-88FC-000A95891192@cs.usfca.edu>
	<002801c4c6c6$2fce25c0$0400a8c0@NOTEBOOK>
Message-ID: <16786.14830.2068.209968@despot.non.net>


>>>>> "matthew" == matthew ford <Matthew.Ford@forward.com.au> writes:
[...]

> Hi Ter, While I like any improvment to trees that would eliminate cycles
> you mention at the end

> " A further restriction is that you should not add the same tree more
> than once if you want the getNextSibling() stuff to work. This would be
> too expensive to enforce probably. "

> If you cannot inforce correct tree construction then not bother change
> the existing one.  Tree contruction and manipulation has been the bane of
> my work with Antlr.  I want robust tree construction that will throw a
> useful error when I try and do some thing silly or just don't understand
> what is happening.

I strongly concur.

Thanks,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ewbank at synopsys.com  Wed Nov 10 08:27:36 2004
From: ewbank at synopsys.com (Bryan Ewbank)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] spaces between tokens
References: <OF983F0A08.CC2464E0-ONC1256F48.00337898-C1256F48.003577D4@qem.it>
Message-ID: <004501c4c742$3074b3a0$c705300a@internal.synopsys.com>


> In my grammar, how in many others, the whitespaces are skipped in lexer,
> but I've some circumstances in which I need to check that not any spaces
> are present between tokens.
> ...
> I think a similar issue is present in C/C++ structure construct
>
I believe you are mistaken here.  The C/C++ grammar treats "." as an
operator, but ignores whitespace around that operator.  Most people have a
"coding style" that prohibits whitespace, but the compiler don't care.  It
sees <ID> <DOT> <ID>.

Try it; I think you will see that whitespace is not an issue.  Even putting
the "." in a separate file that is #include'd should not break the code.

-- Bryan Ewbank




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Wed Nov 10 08:38:34 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] spaces between tokens
In-Reply-To: <41923643.6040505@yahoo.gr>
References: <OF983F0A08.CC2464E0-ONC1256F48.00337898-C1256F48.003577D4@qem.it> <41923643.6040505@yahoo.gr>
Message-ID: <F6D624AE-3336-11D9-AF28-000393B5606C@codetransform.com>


On Nov 10, 2004, at 7:39 AM, Anakreon wrote:

>
> silverio.di@qem.it wrote:
>>
>>
>>
>>
>> Hi,
>> I've a big problem.
>>
>> In my grammar, how in many others, the whitespaces are skipped in 
>> lexer,
>> but I've some circumstances in which I need to check that not any 
>> spaces
>> are present between tokens.
>>
>> Example :
>> WeekJobHour@Monday = 8
>>
>> would mean assign 8 (hours) to parameter Monday of structure 
>> WeekJobHour.
>> I would like my lexer extract following tokens:
>>
>> IDENT ATSIGN IDENT
>>
>> but my problem is to check than not any WS are present between
>> IDENT and ATSIGN and between ATSIGN and IDENT so
>>
>> WeekJobHour@Monday = 8        // is OK
>> WeekJobHour @Monday = 8       // is BAD
>> WeekJobHour@ Monday = 8       // is BAD
>> WeekJobHour  @ Monday = 8           // is BAD too !
>>
>> I could use following lexer rule:
>>
>> STRUCT_PARAMETER
>>       :     ('A'..'Z' | 'a..z')+
>>             '@'
>>             ('A'..'Z' | 'a..z')+
>>       ;
>>
>> but in parser how can I extract the structure name (WeekJobHour)
>> and the structure parameter (Monday) form STRUCT_PARAMETER
>> token ?
>>
>> I think a similar issue is present in C/C++ structure construct
>>
>> Thank you for your suggestions about
>> Silverio Diquigiovanni
> Make a class wich implements TokenStream wich uses the Lexer.
> In the nextToken method, if the lexer returns a token of type
> STRUCT_PARAM, split the token in 3 tokens where the first would be
> of type STRUCT_NAME the second STRUCT_AT and the third STRUCT_DAY
> and the text of the tokens WeekJobHour, @, Monday respectively.
> return the first token from the method and store the other 2.
> In the next 2 calls of nextToken return the stored ones.
>
> Pass the implementor of TokenStream instead of your Lexer to the
> parser.
>
> Anakreon
>

I agree with the above approach, and also read my ParserFilter paper on 
my website, http://www.codetransform.com/filterexample.html

I would recommend an alternative approach, which would be to not skip 
whitespace in the lexer.  Instead, discard it in the parser filter.  
That filter can still check that no whitespace occurs before or after 
an @ between IDENTS.

Alternately you could keep track of state in the lexer.  Set a boolean 
variable in the makeToken() method if the token made was WS.  To see 
what is coming after, inspect LA(1).  Assuming @ is not used in any 
other way, you would have a rule similar to this, where 
previousWasWhitespace is the variable set in makeToken().

AT: { !previousWasWhitespace && (LA(1)==' ' || LA(1)=='\t') }? '@' ;

Monty

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From eddie_antlr at yahoo.co.uk  Wed Nov 10 04:22:38 2004
From: eddie_antlr at yahoo.co.uk (dsfsdf fdsfdsf)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] Transforming Comments along with trees
Message-ID: <20041110122238.94480.qmail@web25210.mail.ukl.yahoo.com>

Hi 
I am building a parser that will convert a piece of t-slq to the corresponding p-sql. I am using a TokenStreamHiddenTokenFilter to ignore but preserve comments and builld up my source ast tree!
I than plan to do maybe one or to pass transformations to the tree!
However i am stuck on how to bring across my comments after each transformations!
I would greatly appreciate any ideas on how this can be done!
regards 
ed.

		
---------------------------------
 ALL-NEW Yahoo! Messenger - all new features - even more fun!  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041110/3b295334/attachment.html
From monty at codetransform.com  Wed Nov 10 08:43:10 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] Re: "protected" lexer rules
In-Reply-To: <20041110130504.GD32655@cs.utwente.nl>
References: <16785.26912.257892.938648@despot.non.net> <cmrq25+2ora@eGroups.com> <20041110130504.GD32655@cs.utwente.nl>
Message-ID: <9B35E5C6-3337-11D9-AF28-000393B5606C@codetransform.com>


On Nov 10, 2004, at 5:05 AM, Ric Klaren wrote:

>
> On Wed, Nov 10, 2004 at 01:14:45AM -0000, lgcraymer wrote:
>> I would agree.  Really, the basic idea is more that of a syllable that
>> may be included in a word.  I'm not too keen on "fragment" either--you
>> break things into fragments, you don't build things up from them.
>
> Triggered by that last remark:
> 1. part/partial
> 2. component/comp
> 3. alias
> 4. shorthand
> 5. abbreviation/abbrev
>

Riffing on the idea of it being internal:

bone
skeleton
vertebra
rib
bulwark
submerged
invisible
internal

Monty



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Wed Nov 10 08:45:54 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] Determining context in lexer?
In-Reply-To: <1100095137.18631@mx9.mysite4now.com>
References: <1100095137.18631@mx9.mysite4now.com>
Message-ID: <FCDAF93D-3337-11D9-AF28-000393B5606C@codetransform.com>


On Nov 10, 2004, at 6:01 AM, Don Caton wrote:

>
> Hi all:
>
> In the language I'm parsing, the square brackets are used for two 
> completely
> different things.  The first usage is as an array access operator, 
> i.e.:
>
>   x := id[expr]
>   x := id[expr, expr]
>   x := id[expr][expr]
>   x := f()[expr]
>
> and so on.  No problem.  BUT, square brackets can also delimit literal
> strings, i.e.:
>
>   x := [Hello World]   // equivalent to x := "Hello World"
>   x := f( [Hello], "World" )
>
> ... etc.  The problem is that the lexer tokenizes text such as:
>
>   [x + 1]
>
> into five individual tokens which will eventually match a parser rule 
> such
> as:
>
>    arraySubscr: LBRKT expr ( COMMA expr )* RBRKT;
>
> but if the brackets delimit a string, I want the text to be parsed 
> into a
> single STRING_LITERAL token, which would eventually match a rule such 
> as:
>
>    literalValue:  STRING_LITERAL | INT_LITERAL | FLOAT_LITERAL | ... 
> etc. ;
>
> Problem is, the lexer does not have context information to decide how 
> to
> tokenize a "[" ... "]" sequence of characters.  I don't think the use 
> of "["
> is ambiguous and if I knew what the prior token was then I could 
> probably
> use a semantic predicate in the lexer rule for "[".  Syntactic and 
> semantic
> predicates can look ahead, but I need to look backwards and I didn't 
> find
> anything in the docs that addresses this kind of problem.
>
> -- 
> Don
>

You can override makeToken() to store the token type of the last token 
returned (maybe you want to not set it if it was whitespace?  will 
depend on your application.

So keep that as an instance variable and then check with your semantic 
predicate.

Monty



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Wed Nov 10 09:15:35 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] Re: "protected" lexer rules
In-Reply-To: <cmrq25+2ora@eGroups.com>
Message-ID: <cmtibn+2arq@eGroups.com>



--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> 
> I would agree.  Really, the basic idea is more that of a syllable that
> may be included in a word.  I'm not too keen on "fragment" either--you
> break things into fragments, you don't build things up from them.

We are discussing rules that are to be used to specify patterns for
matching a part, segment, or fragment of lexical tokens. The complete
lexical token is perhaps not "built" but "assembled" from these
pieces, morsels, tidbits, smidgens, bits or fragments. ;-)

Lubos mentioned sublexeme in a later post in the thread. I liked that
actually but, very few lexical tokens have lexemes - usually only
identifiers and literals. The rules only occasionally define a
sublexeme. What they really define is a fragment of the input that
matches a lexical token.

I still like "fragment" best but, "smidgen" is so HarryPottery and
LordsOfTheRingish ;-)

Micheal
ANTLR/C#






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Wed Nov 10 10:51:23 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] ANTLR 3 tree structure stuff
In-Reply-To: <9da4f45204111000286e2409cb@mail.gmail.com>
References: <DE817798-3295-11D9-88FC-000A95891192@cs.usfca.edu> <9da4f452041109140058bae83a@mail.gmail.com> <FADE8F15-32A1-11D9-88FC-000A95891192@cs.usfca.edu> <9da4f45204111000286e2409cb@mail.gmail.com>
Message-ID: <84A9B412-3349-11D9-88FC-000A95891192@cs.usfca.edu>


On Nov 10, 2004, at 12:28 AM, Oliver Zeigermann wrote:
> I know there has been a discussion about this some time ago, but could
> you explain this for me once more, please?
>
> I thought if you translated (traversed) DOMs instead of ASTs as well
> what what be the difficulty if they have some incompatible method
> signatures?

You can't parse a DOM tree as the type is wrong.  ANTLR expects to walk 
AST, but DOM isn't a subtype so it can't compile.

>  The DOM objects certainly won't implement the AST
> interface, will they?

No but we could make an interface that combined AST and DOM called 
DOMAST and then ANTLR could walk them :)

>  Wouldn't you need different code for both
> traversals anyway as the DOM does not have any integer type
> information.

Oh really?  Is it just a string?  Well, I guess you could subclass dom 
and make it implement DOMAST.

>  Additionally it has attributes along with elements and
> encodes a document only. Having said this it seems DOM and AST are
> semantically incompatible, so why bother on the signature level?

Well, you know WAY more about this than I do so I'll just drop the DOM 
requirement :)

> Most likely I got everything wrong again, and if so would you please
> explain how it really is supposed to work?

Nope, you are almost certainly correct :)

Ter
>
> Thanks,
>
> Oliver
>
> On Tue, 9 Nov 2004 14:52:06 -0800, Terence Parr <parrt@cs.usfca.edu> 
> wrote:
>>
>>
>> On Nov 9, 2004, at 2:00 PM, Oliver Zeigermann wrote:
>>
>>>
>>> This looks reasonable to me. However, I was wondering why are you so
>>> eager to be compatible to the DOM?
>>
>> I just wanted to be able to parse DOM trees.
>>
>>
>>
>> Ter
>> --
>> CS Professor & Grad Director, University of San Francisco
>> Creator, ANTLR Parser Generator, http://www.antlr.org
>> Cofounder, http://www.jguru.com
>> Cofounder, http://www.knowspam.net enjoy email again!
>>
>> Yahoo! Groups Links
>>
>>
>>
>>
>>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>
>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Wed Nov 10 10:52:25 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] ANTLR 3 tree structure stuff
In-Reply-To: <FD35CB8B26F9534E86D1AC31F401AB340483FDC2@na1fcm52.dearborn.ford.com>
References: <FD35CB8B26F9534E86D1AC31F401AB340483FDC2@na1fcm52.dearborn.ford.com>
Message-ID: <A9CB7FAC-3349-11D9-88FC-000A95891192@cs.usfca.edu>


Sorry...my software doesn't know how to read my TML yet to syndicate...

Perhaps xmas time I can update the website...my student is fixing the 
search apparently too ;)

Ter
On Nov 10, 2004, at 5:59 AM, Tiller, Michael (M.M.) wrote:

>
> Out of curiosity, is this blog syndicated anywhere?  I know about
> http://www.antlr.org/news/rss but it isn't coming through on that.  Am 
> I
> missing something?  If not, any chance you'll syndicate your blog stuff
> under this feed or another one hosted at www.antlr.org?
>
> --
> Mike
>
>> -----Original Message-----
>> From: Terence Parr [mailto:parrt@cs.usfca.edu]
>> Sent: Tuesday, November 09, 2004 4:25 PM
>> To: antlr-interest@yahoogroups.com
>> Subject: [antlr-interest] ANTLR 3 tree structure stuff
>>
>>
>> Folks,
>>
>> In terms of just the data structures (not how trees are constructed,
>> rewritten etc...) for ANTLR 3, I've updated the trees blog:
>>
>> http://www.antlr.org/blog/antlr3/trees.tml
>>
>> Ter
>> --
>> CS Professor & Grad Director, University of San Francisco
>> Creator, ANTLR Parser Generator, http://www.antlr.org
>> Cofounder, http://www.jguru.com
>> Cofounder, http://www.knowspam.net enjoy email again!
>>
>>
>>
>>
>>
>>
>> Yahoo! Groups Links
>>
>>
>>
>>
>>
>>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>
>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Wed Nov 10 10:55:25 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] Transforming Comments along with trees
In-Reply-To: <20041110122238.94480.qmail@web25210.mail.ukl.yahoo.com>
References: <20041110122238.94480.qmail@web25210.mail.ukl.yahoo.com>
Message-ID: <14996242-334A-11D9-88FC-000A95891192@cs.usfca.edu>



On Nov 10, 2004, at 4:22 AM, dsfsdf fdsfdsf wrote:

> Hi
>  I am building a parser that will convert a piece of t-slq to the 
> corresponding p-sql. I am using a TokenStreamHiddenTokenFilter to 
> ignore but preserve comments and builld up my source ast tree!
> I than plan to do maybe one or to pass transformations to the tree!
> However i am stuck on how to bring across my comments after each 
> transformations!
> I would greatly appreciate any ideas on how this can be done!

Hi.  First, given the similarity of source / target languages, you 
might want to use TokenStreamRewriteEngine instead.  have you seen that 
article on the site?

For the above, are you saying that the auto construction of trees in 
the tree walker doesn't carry along the hidden stream stuff?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Wed Nov 10 10:56:45 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] Re: "protected" lexer rules
In-Reply-To: <cmtibn+2arq@eGroups.com>
References: <cmtibn+2arq@eGroups.com>
Message-ID: <44571E78-334A-11D9-88FC-000A95891192@cs.usfca.edu>


On Nov 10, 2004, at 9:15 AM, micheal_jor wrote:
> --- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
>>
>> I would agree.  Really, the basic idea is more that of a syllable that
>> may be included in a word.  I'm not too keen on "fragment" either--you
>> break things into fragments, you don't build things up from them.
>
> We are discussing rules that are to be used to specify patterns for
> matching a part, segment, or fragment of lexical tokens. The complete
> lexical token is perhaps not "built" but "assembled" from these
> pieces, morsels, tidbits, smidgens, bits or fragments. ;-)
>
> Lubos mentioned sublexeme in a later post in the thread. I liked that
> actually but, very few lexical tokens have lexemes - usually only
> identifiers and literals. The rules only occasionally define a
> sublexeme. What they really define is a fragment of the input that
> matches a lexical token.
>
> I still like "fragment" best but, "smidgen" is so HarryPottery and
> LordsOfTheRingish ;-)

Hi Michael,

The current 3.0 prototype uses fragment as I like it and it pisses off 
the least number of people I think ;)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Wed Nov 10 11:13:48 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] trees with payloads??
Message-ID: <A68A27D6-334C-11D9-88FC-000A95891192@cs.usfca.edu>


Hi,

[i posted this email to http://www.antlr.org/blog/antlr3/trees.tml ]

After Loring bitched at me on the phone yesterday <snicker>, I'm 
beginning to think he's right:  if separating the node data from the 
navigation is the right concept, then trees should be a single 
implementation that simply carry a "payload" object defined by the 
user.  This is like Sun's MutableTreeNode.

The interesting thing is that the tree nodes themselves are all 
homogeneous, but the payload object could be totally different at each 
node.  So, the parser creates exactly one kind of node with a variety 
of payload (or a single) types. The payload can be defined in the 
grammar itself so that ANTLR can generate the required type(s).

grammar P;

AST {
	Token token; // probably a default field
	String blort;
	...
}

Then ANTLR would generate P_AST type for use when building trees.  For 
heterogeneous trees, we currently allow type names in the tokens 
section:

tokens {
	ID<AST=IDASTNode>; //something like that
	...
}

If we allow field specifications, that is better than specifying a type 
name maybe:

tokens {
	ID<String name, int n>;
	...
}

Whatever.  A random idea.

As a bonus to the payload strategy, we can enhance the tree 
functionality later w/o forcing alterations in people's application; 
their payload objects still fit in our nodes.

This all comes at the cost of an additional object creation (payload 
creation + node creation).

Side note: Mitchell suggested Tokens and Tree nodes should have not 
only fixed fields like this, but the ability to dynamically acquire 
"attributes"; this would basically be a hashmap.  It cuts down on a 
bazillion subclasses.  It would be useful when parsing xml for example. 
  The TAG token could have a list of tag attributes w/o creating 
subclasses etc...

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Wed Nov 10 11:01:03 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] Re: ANTLR 3 tree structure stuff
In-Reply-To: <cmtb4e+kep8@eGroups.com>
References: <cmtb4e+kep8@eGroups.com>
Message-ID: <DE3B3052-334A-11D9-88FC-000A95891192@cs.usfca.edu>



On Nov 10, 2004, at 7:12 AM, atripp54321 wrote:
> Why not use the built-in Swing TreeNode data structure?
> TreeNode is the interface:
> http://java.sun.com/j2se/1.5.0/docs/api/javax/swing/tree/TreeNode.html
> and DefaultMutableTreeNode is your typical implementation:
> http://java.sun.com/j2se/1.5.0/docs/api/javax/swin
> g/tree/DefaultMutableTreeNode.html

Hi Andy,

Thanks for the pointers...well, I don't like Java's libraries much ;) 
except for collections so my structure would be just a thing with a 
List of children and a parent pointer.

> DefaultMutableTreeNode (ugg, what an awful name!) may seem like
> overkill, but hey, if the code's already there and working, why not?

Because "there and working" means something different when you're 
talking about sun. ;)  I cite their I/O library and net library.  
Anybody care to guess what happens when you miss on the DNS lookup?  
Yes, it keeps the lock on the cache and does a net transaction; making 
all other threads wait.  Blah blah blah, you get the point. ;)  
Lectures on how to make java go fast are all about how to avoid using 
sun's libraries ;)

> The only difference I see between your proposal and this is
> that you have stuff like getNextSibling(), while the built-in
> one forces you to use an iterator (actually, it's still using
> Enumeration rather than Iterator - another uggh!).

;)  Yeah, I'm beginning to thing I don't need that next sibling stuff.  
I thought about tree parsing last night.

> See also the tutorial:
> http://java.sun.com/docs/books/tutorial/uiswing/components/tree.html
> Note that creating a visual JTree becomes trivial, just pass it
> the root DefaultMutableTreeNode:
> JTree tree = new JTree(root);

A good selling point.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From atripp at comcast.net  Wed Nov 10 11:49:45 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] Re: ANTLR 3 tree structure stuff
In-Reply-To: <16786.14830.2068.209968@despot.non.net>
Message-ID: <cmtrcp+p7ud@eGroups.com>



--- In antlr-interest@yahoogroups.com, "John D. Mitchell"
<johnm-antlr@n...> wrote:
> >>>>> "matthew" == matthew ford <Matthew.Ford@f...> writes:
> [...]
> 
> > Hi Ter, While I like any improvment to trees that would eliminate
cycles
> > you mention at the end
> 
> > " A further restriction is that you should not add the same tree more
> > than once if you want the getNextSibling() stuff to work. This
would be
> > too expensive to enforce probably. "
> 
> > If you cannot inforce correct tree construction then not bother change
> > the existing one.  Tree contruction and manipulation has been the
bane of
> > my work with Antlr.  I want robust tree construction that will throw a
> > useful error when I try and do some thing silly or just don't
understand
> > what is happening.
> 
> I strongly concur.
> 
> Thanks,
> 	John

Or, make everyone happy by giving us a choice.
Have one Node class that keeps it's children in a TreeSet
(ordered, no dups, fast insert). And have another that
uses a ArrayList (ordered, dups OK, slower insert).
They'd both implement your "Tree" interface.

Andy





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Wed Nov 10 14:11:48 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] trees with payloads??
In-Reply-To: <A68A27D6-334C-11D9-88FC-000A95891192@cs.usfca.edu>
References: <A68A27D6-334C-11D9-88FC-000A95891192@cs.usfca.edu>
Message-ID: <16786.37412.372996.418720@despot.non.net>


>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
[...]

> After Loring bitched at me on the phone yesterday <snicker>, I'm
> beginning to think he's right: if separating the node data from the
> navigation is the right concept, then trees should be a single
> implementation that simply carry a "payload" object defined by the user.
> This is like Sun's MutableTreeNode.

Go Loring!  :-? :-)

I strongly concur.


[...]

> As a bonus to the payload strategy, we can enhance the tree functionality
> later w/o forcing alterations in people's application; their payload
> objects still fit in our nodes.

Yea!

> This all comes at the cost of an additional object creation (payload
> creation + node creation).

In Java, who cares.

For people who care (embedded C), the code gen could be made smart enough
to do just one single allocation for both "objects".


> Side note: Mitchell suggested Tokens and Tree nodes should have not only
> fixed fields like this, but the ability to dynamically acquire
> "attributes"; this would basically be a hashmap.  It cuts down on a
> bazillion subclasses.  It would be useful when parsing xml for example.
> The TAG token could have a list of tag attributes w/o creating subclasses
> etc...

Yeah, that's a damn good idea!  :-?

LinkedHashSet is your friend.

Have fun,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Wed Nov 10 15:23:06 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:30 2004
Subject: [antlr-interest] Re: trees with payloads??
In-Reply-To: <16786.37412.372996.418720@despot.non.net>
Message-ID: <cmu7sq+l13d@eGroups.com>



[If I'm lucky, John will appreciate the content of this enough to keep
him from making a "Netiquette nanny" statement--this is a bit long.]

Actually, performance is part of the reason for payloads--payloads can
be carried from pass to pass without object creation, and--even in
Java--it may be possible to optimize memory management of the
"carrier" objects.  However, I also have strong objections to adding
direct support for either doubly-linked AST nodes or using arrays for
building syntax trees.  Doubly-linked ASTs are a red herring, and
arrays are memory hogs.

If you really need doubly-linked nodes in an ANTLR application, then
the following is almost all of the machinery needed:

Class LinkedAST extends CommonAST {
     LinkedAST back = null;

     public void link(LinkedAST ast) {
         back = ast;
     }

     public LinkedAST prev() {
         return back;
     }

     public boolean hasParent() {
         return back.getFirstChild() == this;
     }

     public boolean hasSibling() {
         return back.getNextSibling() == this;
     }
}


Class ASTLinker {
     LinkedAST current = null;

     public void visit(LinkedAST ast) {
         current = ast;

         if (ast.getFirstChild() != null)
               visitChild();

         if (ast.getNextSibling() != null)
               visitSibling();
      }

     public void visitChild() {
          LinkedAST child = current.getFirstChild();
          LinkedAST context = current;
          child.link(context);
          current = child;
          if (current.getFirstChild() != null)
                visitChild();

          if (current.getNextSibling() != null)
                visitSibling();

          current = context;
      }

      public void visitSibling() {
      // similar to visitChild()
      }
}

ASTLinker is a Visitor which does the double linking; basically, you
would create an ASTLinker and then invoke visit() on the root of the
tree you wanted to doubly-link.

Arrays, besides being memory hogs, do not address the root cause of
the cyclic reference problem.  The cyclic reference problem is due to
the current brute force tree construction algorithm; a better approach
is to build a stream of instruction/payload pairs and then construct
the tree after all instructions have been gathered.  This approach
allows optimized tree construction with no unnecessary object creation
and deletion.

Getting back to payloads:  one of the big advantages is that payloads
can be used throughout the processing passes, starting with tokens. 
By separating navigation information (sibling/child references and
type) from attribute information (text descriptor, line/column
information, and whatever else might be desired), there is no a priori
need to copy attribute information from one processing phase to the
next.  Instead, a creation cost is only incurred when new attributes
need to be added.  [And maybe not then, if one of the attributes is a
Hashmap to support Micheal's suggestion.  Hashmap usage isn't free,
however:  custom payloads would be preferable for both speed and
minimized memory usage.]

One other note:  with payloads, there is no reason for Tokens to
differ from ASTs, except that an AST may have down and right fields
set.  That is:

Class Carrier {
    Payload attr;
    int type = 0;
    Carrier down = null;
    Carrier right = null;

    public Carrier(int type0, Payload att) {
        type = type0;
        attr = att;
    }

    ... // all of the usual AST ops, plus get/set attr
}

Both ASTs and Tokens are then replaced by Carriers (probably with a
better name).  This would have a performance advantage for tree
construction in the Parser since the token Carriers can be linked to
form a syntax tree in the parser.

--Loring

--- In antlr-interest@yahoogroups.com, "John D. Mitchell"
<johnm-antlr@n...> wrote:
> >>>>> "Terence" == Terence Parr <parrt@c...> writes:
> [...]
> 
> > After Loring bitched at me on the phone yesterday <snicker>, I'm
> > beginning to think he's right: if separating the node data from the
> > navigation is the right concept, then trees should be a single
> > implementation that simply carry a "payload" object defined by the
user.
> > This is like Sun's MutableTreeNode.
> 
> Go Loring!  :-? :-)
> 
> I strongly concur.
> 
> 
> [...]
> 
> > As a bonus to the payload strategy, we can enhance the tree
functionality
> > later w/o forcing alterations in people's application; their payload
> > objects still fit in our nodes.
> 
> Yea!
> 
> > This all comes at the cost of an additional object creation (payload
> > creation + node creation).
> 
> In Java, who cares.
> 
> For people who care (embedded C), the code gen could be made smart
enough
> to do just one single allocation for both "objects".
> 
> 
> > Side note: Mitchell suggested Tokens and Tree nodes should have
not only
> > fixed fields like this, but the ability to dynamically acquire
> > "attributes"; this would basically be a hashmap.  It cuts down on a
> > bazillion subclasses.  It would be useful when parsing xml for
example.
> > The TAG token could have a list of tag attributes w/o creating
subclasses
> > etc...
> 
> Yeah, that's a damn good idea!  :-?
> 
> LinkedHashSet is your friend.
> 
> Have fun,
> 	John





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From stevegianvecchio at hotmail.com  Wed Nov 10 15:16:23 2004
From: stevegianvecchio at hotmail.com (Steve)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: AST typecasting problem?
In-Reply-To: <cmrpq1+rtra@eGroups.com>
Message-ID: <cmu7g7+k3f5@eGroups.com>



I made the necessary changes and the code is working properly. Thanks 
to both of you (John and Loring) for your help.

Steve

--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> 
> The most likely cause is (from
> http://www.antlr.org/doc/trees.html#_bb3 in the ANTLR manual):
> 
> "If you are only interested in specifying the AST node type at
> runtime, use the
> 
> setASTNodeType(String className)
> 
> method on the parser or factory.  By default, trees are constructed 
of
> nodes of type antlr.CommonAST. (You must use the fully-qualified 
class
> name)."
> 
> Do that in the parser and you should be okay:  my guess is that your
> parser is generating CommonAST nodes (the default).
> 
> --Loring
> 
> --- In antlr-interest@yahoogroups.com, "Steve" 
<stevegianvecchio@h...>
> wrote:
> > 
> > 
> > I created this file:
> > 
> > public class BeliefAST extends antlr.CommonAST {
> >     List beliefList;
> > }
> > 
> > Then in a separated file:
> > 
> > ...
> > AST t1 = parser.getAST();
> > BeliefAST t2 = (BeliefAST)t1;
> > System.out.println("I don't get here.");
> > 
> > At the second line, where the typecast takes place, my program 
exits 
> > immediately without any errors.  The following code works fine:
> > 
> > ...
> > AST t1 = parser.getAST();
> > CommonAST t2 = (CommonAST)t1;
> > System.out.println("I don't get here.");
> > 
> > I can't think of what I'm doing wrong.  I tried replacing my 
> > BeliefAST file with CommonAST and just changing the 
text "CommonAST" 
> > to "BeliefAST" and got the same result.  I can't seem to figure 
out 
> > what is causing this, anyone have any ideas?





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Wed Nov 10 16:19:07 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: trees with payloads??
In-Reply-To: <A68A27D6-334C-11D9-88FC-000A95891192@cs.usfca.edu>
Message-ID: <cmub5r+ecoh@eGroups.com>



--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> Hi,
> 
> [i posted this email to http://www.antlr.org/blog/antlr3/trees.tml ]
> 
> After Loring bitched at me on the phone yesterday <snicker>, I'm 
> beginning to think he's right:  if separating the node data from the 
> navigation is the right concept, then trees should be a single 
> implementation that simply carry a "payload" object defined by the 
> user.  This is like Sun's MutableTreeNode.

<SNIP>

> grammar P;
> 
> AST {
> 	Token token; // probably a default field
> 	String blort;
> 	...
> }
> 
> Then ANTLR would generate P_AST type for use when building trees.  For 
> heterogeneous trees

<SNIP>

> If we allow field specifications, that is better than specifying a type 
> name maybe:
> 
> tokens {
> 	ID<String name, int n>;
> 	...
> }
> 
> Whatever.  A random idea.

I wasn't planning on discussing this yet so I haven't had a chance to
think through the integration and grammar syntax issues but since you
guys won't keep....

I've been thinking about incorporating aspects of the TreeDL approach
within ANTLR. Basically, we will have our CoolNavigatorAST type that
handles navigation properly and has setObjectData()/setNodeData()
method. The "node data" is a System.Object (or void*)
pointer/reference to whatever the user decides. This is the type we
use as default.

Now, in grammars users can optionally add entries to describe custom
tree nodes (including attributes) that ANTLR will generate. These
would either be subclasses of CoolNavigatorAST or the very similar
CoolNavigatorWithoutNodeDataStuffAST (users presumably won't need the
generic data slots since they can specify custom attributes).

Using your grammar example above as a starting point:

grammar P;

AST
{
    abstract node Expression
    {
    }

    node BinaryExpression : Expression
    {
        attribute binop : enum OpEnum { PLUS, MINUS, MULT, DIVIDE };
        child     left  : Expression;
        child     right : Expression;
    }
}

tokens
{
   PLUS<AST=BinaryExpression>
   MINUS<AST=BinaryExpression>
}

additiveExpr
  :  multiplicativeExpr 
    ( ( p:PLUS^  { #p.operator = OpEnum.PLUS;  } 
      | m:MINUS^ { #m.operator = OpEnum.MINUS; } 
      ) 
      multiplicativeExpr
    )*

The "additiveExpr" rule will generate a node of type BinaryExpression.
Haven't figured out an automatic way to specify the value of the
"operator" field. Or indeed how the two expressions get assigned as
either left or right  :-(

Actually I think my use of "tokens" here is in error. My general
inclination is to leave it to the user to specify tree construction
manually if they decide to use the custom node feature. E.g.

additiveExpr creates [BinaryExpression e]
  :  e.left=multiplicativeExpr 
    ( ( PLUS^  { e.operator = OpEnum.PLUS;  } 
      | MINUS^ { e.operator = OpEnum.MINUS; } 
      ) 
      e.right=multiplicativeExpr
    )*

Of course "creates" would/should probably be "returns" as is the case now.

> As a bonus to the payload strategy, we can enhance the tree 
> functionality later w/o forcing alterations in people's application; 
> their payload objects still fit in our nodes.

This still applies here too.

> This all comes at the cost of an additional object creation (payload 
> creation + node creation).

No additional object creation here.

> Side note: Mitchell suggested Tokens and Tree nodes should have not 
> only fixed fields like this, but the ability to dynamically acquire 
> "attributes"; this would basically be a hashmap.  It cuts down on a 
> bazillion subclasses.  It would be useful when parsing xml for example. 
>   The TAG token could have a list of tag attributes w/o creating 
> subclasses etc...

If the user wants this functionality in their AST class, they can
specify it. Perhaps we can support a "propertybag" atribute type. This
will create a HashMap (or other dictionary object) and two methods
getField(string key) and setField(string key, object data). Perhaps a
restriction that a node can only have one propertybag is required
(including any inherited bags).

    node XmlElement
    {
        propertybag  fields;
        child        left     : Expression;
        child        right    : Expression;
    }

Cheers,

Micheal
ANTLR/C#






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Wed Nov 10 17:01:24 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: trees with payloads??
In-Reply-To: <cmu7sq+l13d@eGroups.com>
Message-ID: <cmudl4+vv63@eGroups.com>



--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:

> Actually, performance is part of the reason for payloads--payloads can
> be carried from pass to pass without object creation, and--even in
> Java--it may be possible to optimize memory management of the
> "carrier" objects.  However, I also have strong objections to adding
> direct support for either doubly-linked AST nodes or using arrays for
> building syntax trees.  Doubly-linked ASTs are a red herring, and
> arrays are memory hogs.

I have my doubts about doubly-linked ASTs too. I don't understand
however how you formed the opinion that arrays are memory hogs. I
would have though they were otherwise. And, if performance is
important, they [might] offer superior locality properties which makes
for very efficient cache usage. I say might only because this also
depends on the memory location of the objects in the array. 

> Arrays, besides being memory hogs, do not address the root cause of
> the cyclic reference problem.  The cyclic reference problem is due to
> the current brute force tree construction algorithm; a better approach
> is to build a stream of instruction/payload pairs and then construct
> the tree after all instructions have been gathered.  This approach
> allows optimized tree construction with no unnecessary object creation
> and deletion.

This is a sorely needed improvement. And getting rid of the cost of
classes like ASTPair (easier in C#/C/C++ than Java I'd admit).

> Getting back to payloads:  one of the big advantages is that payloads
> can be used throughout the processing passes, starting with tokens. 
> By separating navigation information (sibling/child references and
> type) from attribute information (text descriptor, line/column
> information, and whatever else might be desired), there is no a priori
> need to copy attribute information from one processing phase to the
> next.  Instead, a creation cost is only incurred when new attributes
> need to be added.  [And maybe not then, if one of the attributes is a
> Hashmap to support Micheal's suggestion.  Hashmap usage isn't free,
> however:  custom payloads would be preferable for both speed and
> minimized memory usage.]
> 
> One other note:  with payloads, there is no reason for Tokens to
> differ from ASTs, except that an AST may have down and right fields
> set.  That is:
> 
> Class Carrier {
>     Payload attr;
>     int type = 0;
>     Carrier down = null;
>     Carrier right = null;
> 
>     public Carrier(int type0, Payload att) {
>         type = type0;
>         attr = att;
>     }
> 
>     ... // all of the usual AST ops, plus get/set attr
> }
> 
> Both ASTs and Tokens are then replaced by Carriers (probably with a
> better name).  This would have a performance advantage for tree
> construction in the Parser since the token Carriers can be linked to
> form a syntax tree in the parser.

Hmm, I am more inclined to eliminate [the cost of] Token objects
[almost] entirely. I say almost because a mechanism is still needed to
transfer attributes like lexeme/line/col info to AST node objects.

The TokenStream interface in it's current form might not be the [best]
way to go. Unless Token objects can be recycled efficiently.

So how can lexical tokens be modelled as an integer value (or enum
value) usually and yet parsers are able to extract additional info
such as lexeme/line/col on-demand and, inexpensively?

The concept of a Carrier objects could play a part but I don't know
how 'cause I haven't found an answer to my conundrum yet  ;-)

Cheers,

Micheal
ANTLR/C#






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Wed Nov 10 22:12:35 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: Antlr 3.0  spaces between tokens
References: <OF983F0A08.CC2464E0-ONC1256F48.00337898-C1256F48.003577D4@qem.it> <41923643.6040505@yahoo.gr> <F6D624AE-3336-11D9-AF28-000393B5606C@codetransform.com>
Message-ID: <001001c4c7b5$708ddd90$0400a8c0@NOTEBOOK>


Hi Ter,

Perhaps for Antlr 3.0 we can have a better means of handling white space.

Antlr provides an ignore whitespace capability that is appealing
WS : ( ' ' | '\t' | '\n' { newline(); } | '\r' )+
     { $setType(Token.SKIP); }
   ;but every time I try and use it I come across a situation where I really
want/need the white space in the parser.

So I end up having the lexer pass it back to the parser.
(or have switch in the lexer that the parser uses to control the return of
whitespace.  I know this is a no-no but it has worked for me in some cases)

The parser usually only needs to know about the whitespace in a few rules
but now has
(WS)* all over the place to handle whitespace every where.

Basically what I would like to have
 the lexer pass all the whitespace back to the parser) and then in the
parser be able to say
a) for this rule ignore white space.
or
b) for this rule whitespace is important

Actually the second option is more likely.

matthew

----- Original Message ----- 
From: "Monty Zukowski" <monty@codetransform.com>
To: <antlr-interest@yahoogroups.com>
Sent: Thursday, November 11, 2004 3:38 AM
Subject: Re: [antlr-interest] spaces between tokens


>
> On Nov 10, 2004, at 7:39 AM, Anakreon wrote:
>
> >
> > silverio.di@qem.it wrote:
> >>
> >>
> >>
> >>
> >> Hi,
> >> I've a big problem.
> >>
> >> In my grammar, how in many others, the whitespaces are skipped in
> >> lexer,
> >> but I've some circumstances in which I need to check that not any
> >> spaces
> >> are present between tokens.
> >>
> >> Example :
> >> WeekJobHour@Monday = 8
> >>
> >> would mean assign 8 (hours) to parameter Monday of structure
> >> WeekJobHour.
> >> I would like my lexer extract following tokens:
> >>
> >> IDENT ATSIGN IDENT
> >>
> >> but my problem is to check than not any WS are present between
> >> IDENT and ATSIGN and between ATSIGN and IDENT so
> >>
> >> WeekJobHour@Monday = 8        // is OK
> >> WeekJobHour @Monday = 8       // is BAD
> >> WeekJobHour@ Monday = 8       // is BAD
> >> WeekJobHour  @ Monday = 8           // is BAD too !
> >>
> >> I could use following lexer rule:
> >>
> >> STRUCT_PARAMETER
> >>       :     ('A'..'Z' | 'a..z')+
> >>             '@'
> >>             ('A'..'Z' | 'a..z')+
> >>       ;
> >>
> >> but in parser how can I extract the structure name (WeekJobHour)
> >> and the structure parameter (Monday) form STRUCT_PARAMETER
> >> token ?
> >>
> >> I think a similar issue is present in C/C++ structure construct
> >>
> >> Thank you for your suggestions about
> >> Silverio Diquigiovanni
> > Make a class wich implements TokenStream wich uses the Lexer.
> > In the nextToken method, if the lexer returns a token of type
> > STRUCT_PARAM, split the token in 3 tokens where the first would be
> > of type STRUCT_NAME the second STRUCT_AT and the third STRUCT_DAY
> > and the text of the tokens WeekJobHour, @, Monday respectively.
> > return the first token from the method and store the other 2.
> > In the next 2 calls of nextToken return the stored ones.
> >
> > Pass the implementor of TokenStream instead of your Lexer to the
> > parser.
> >
> > Anakreon
> >
>
> I agree with the above approach, and also read my ParserFilter paper on
> my website, http://www.codetransform.com/filterexample.html
>
> I would recommend an alternative approach, which would be to not skip
> whitespace in the lexer.  Instead, discard it in the parser filter.
> That filter can still check that no whitespace occurs before or after
> an @ between IDENTS.
>
> Alternately you could keep track of state in the lexer.  Set a boolean
> variable in the makeToken() method if the token made was WS.  To see
> what is coming after, inspect LA(1).  Assuming @ is not used in any
> other way, you would have a rule similar to this, where
> previousWasWhitespace is the variable set in makeToken().
>
> AT: { !previousWasWhitespace && (LA(1)==' ' || LA(1)=='\t') }? '@' ;
>
> Monty
>
> ANTLR & Java Consultant -- http://www.codetransform.com
> ANSI C/GCC transformation toolkit -- 
> http://www.codetransform.com/gcc.html
> Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Wed Nov 10 22:32:03 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: Antlr 3.0  spaces between tokens
In-Reply-To: <001001c4c7b5$708ddd90$0400a8c0@NOTEBOOK>
Message-ID: <cmv113+8m21@eGroups.com>



Take a look at
<http://www.antlr.org/article/preserving.token.order/preserving.token.order.tml>

It's hard to see how ANTLR 3 could do better.

--Loring

--- In antlr-interest@yahoogroups.com, "matthew ford"
<Matthew.Ford@f...> wrote:
> Hi Ter,
> 
> Perhaps for Antlr 3.0 we can have a better means of handling white
space.
> 
> Antlr provides an ignore whitespace capability that is appealing
> WS : ( ' ' | '\t' | '\n' { newline(); } | '\r' )+
>      { $setType(Token.SKIP); }
>    ;but every time I try and use it I come across a situation where
I really
> want/need the white space in the parser.
> 
> So I end up having the lexer pass it back to the parser.
> (or have switch in the lexer that the parser uses to control the
return of
> whitespace.  I know this is a no-no but it has worked for me in some
cases)
> 
> The parser usually only needs to know about the whitespace in a few
rules
> but now has
> (WS)* all over the place to handle whitespace every where.
> 
> Basically what I would like to have
>  the lexer pass all the whitespace back to the parser) and then in the
> parser be able to say
> a) for this rule ignore white space.
> or
> b) for this rule whitespace is important
> 
> Actually the second option is more likely.
> 
> matthew
> 
> ----- Original Message ----- 
> From: "Monty Zukowski" <monty@c...>
> To: <antlr-interest@yahoogroups.com>
> Sent: Thursday, November 11, 2004 3:38 AM
> Subject: Re: [antlr-interest] spaces between tokens
> 
> 
> >
> > On Nov 10, 2004, at 7:39 AM, Anakreon wrote:
> >
> > >
> > > silverio.di@q... wrote:
> > >>
> > >>
> > >>
> > >>
> > >> Hi,
> > >> I've a big problem.
> > >>
> > >> In my grammar, how in many others, the whitespaces are skipped in
> > >> lexer,
> > >> but I've some circumstances in which I need to check that not any
> > >> spaces
> > >> are present between tokens.
> > >>
> > >> Example :
> > >> WeekJobHour@Monday = 8
> > >>
> > >> would mean assign 8 (hours) to parameter Monday of structure
> > >> WeekJobHour.
> > >> I would like my lexer extract following tokens:
> > >>
> > >> IDENT ATSIGN IDENT
> > >>
> > >> but my problem is to check than not any WS are present between
> > >> IDENT and ATSIGN and between ATSIGN and IDENT so
> > >>
> > >> WeekJobHour@Monday = 8        // is OK
> > >> WeekJobHour @Monday = 8       // is BAD
> > >> WeekJobHour@ Monday = 8       // is BAD
> > >> WeekJobHour  @ Monday = 8           // is BAD too !
> > >>
> > >> I could use following lexer rule:
> > >>
> > >> STRUCT_PARAMETER
> > >>       :     ('A'..'Z' | 'a..z')+
> > >>             '@'
> > >>             ('A'..'Z' | 'a..z')+
> > >>       ;
> > >>
> > >> but in parser how can I extract the structure name (WeekJobHour)
> > >> and the structure parameter (Monday) form STRUCT_PARAMETER
> > >> token ?
> > >>
> > >> I think a similar issue is present in C/C++ structure construct
> > >>
> > >> Thank you for your suggestions about
> > >> Silverio Diquigiovanni
> > > Make a class wich implements TokenStream wich uses the Lexer.
> > > In the nextToken method, if the lexer returns a token of type
> > > STRUCT_PARAM, split the token in 3 tokens where the first would be
> > > of type STRUCT_NAME the second STRUCT_AT and the third STRUCT_DAY
> > > and the text of the tokens WeekJobHour, @, Monday respectively.
> > > return the first token from the method and store the other 2.
> > > In the next 2 calls of nextToken return the stored ones.
> > >
> > > Pass the implementor of TokenStream instead of your Lexer to the
> > > parser.
> > >
> > > Anakreon
> > >
> >
> > I agree with the above approach, and also read my ParserFilter
paper on
> > my website, http://www.codetransform.com/filterexample.html
> >
> > I would recommend an alternative approach, which would be to not skip
> > whitespace in the lexer.  Instead, discard it in the parser filter.
> > That filter can still check that no whitespace occurs before or after
> > an @ between IDENTS.
> >
> > Alternately you could keep track of state in the lexer.  Set a boolean
> > variable in the makeToken() method if the token made was WS.  To see
> > what is coming after, inspect LA(1).  Assuming @ is not used in any
> > other way, you would have a rule similar to this, where
> > previousWasWhitespace is the variable set in makeToken().
> >
> > AT: { !previousWasWhitespace && (LA(1)==' ' || LA(1)=='\t') }? '@' ;
> >
> > Monty
> >
> > ANTLR & Java Consultant -- http://www.codetransform.com
> > ANSI C/GCC transformation toolkit -- 
> > http://www.codetransform.com/gcc.html
> > Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html
> >
> >
> >
> >
> >
> > Yahoo! Groups Links
> >
> >
> >
> >
> >
> >
> >





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Wed Nov 10 22:42:43 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: Antlr 3.0  spaces between tokens
References: <cmv113+8m21@eGroups.com>
Message-ID: <001501c4c7b9$a60e9ff0$0400a8c0@NOTEBOOK>


Perhaps I am missing the point of the that article, but in my case I don't
what to just keep the whitespace for printing.

For some (not all) parser rules,  whitespace is actually important for the
parsing.
So I want the parser to see all the whitespace for some rules and not others

So what I want is the Token.SKIP option on the parser side instead of on the
lexer side and controlled on a rule basis.

matthew

----- Original Message ----- 
From: "lgcraymer" <lgc@mail1.jpl.nasa.gov>
To: <antlr-interest@yahoogroups.com>
Sent: Thursday, November 11, 2004 5:32 PM
Subject: [antlr-interest] Re: Antlr 3.0 spaces between tokens


>
>
> Take a look at
>
<http://www.antlr.org/article/preserving.token.order/preserving.token.order.
tml>
>
> It's hard to see how ANTLR 3 could do better.
>
> --Loring
>
> --- In antlr-interest@yahoogroups.com, "matthew ford"
> <Matthew.Ford@f...> wrote:
> > Hi Ter,
> >
> > Perhaps for Antlr 3.0 we can have a better means of handling white
> space.
> >
> > Antlr provides an ignore whitespace capability that is appealing
> > WS : ( ' ' | '\t' | '\n' { newline(); } | '\r' )+
> >      { $setType(Token.SKIP); }
> >    ;but every time I try and use it I come across a situation where
> I really
> > want/need the white space in the parser.
> >
> > So I end up having the lexer pass it back to the parser.
> > (or have switch in the lexer that the parser uses to control the
> return of
> > whitespace.  I know this is a no-no but it has worked for me in some
> cases)
> >
> > The parser usually only needs to know about the whitespace in a few
> rules
> > but now has
> > (WS)* all over the place to handle whitespace every where.
> >
> > Basically what I would like to have
> >  the lexer pass all the whitespace back to the parser) and then in the
> > parser be able to say
> > a) for this rule ignore white space.
> > or
> > b) for this rule whitespace is important
> >
> > Actually the second option is more likely.
> >
> > matthew
> >
> > ----- Original Message ----- 
> > From: "Monty Zukowski" <monty@c...>
> > To: <antlr-interest@yahoogroups.com>
> > Sent: Thursday, November 11, 2004 3:38 AM
> > Subject: Re: [antlr-interest] spaces between tokens
> >
> >
> > >
> > > On Nov 10, 2004, at 7:39 AM, Anakreon wrote:
> > >
> > > >
> > > > silverio.di@q... wrote:
> > > >>
> > > >>
> > > >>
> > > >>
> > > >> Hi,
> > > >> I've a big problem.
> > > >>
> > > >> In my grammar, how in many others, the whitespaces are skipped in
> > > >> lexer,
> > > >> but I've some circumstances in which I need to check that not any
> > > >> spaces
> > > >> are present between tokens.
> > > >>
> > > >> Example :
> > > >> WeekJobHour@Monday = 8
> > > >>
> > > >> would mean assign 8 (hours) to parameter Monday of structure
> > > >> WeekJobHour.
> > > >> I would like my lexer extract following tokens:
> > > >>
> > > >> IDENT ATSIGN IDENT
> > > >>
> > > >> but my problem is to check than not any WS are present between
> > > >> IDENT and ATSIGN and between ATSIGN and IDENT so
> > > >>
> > > >> WeekJobHour@Monday = 8        // is OK
> > > >> WeekJobHour @Monday = 8       // is BAD
> > > >> WeekJobHour@ Monday = 8       // is BAD
> > > >> WeekJobHour  @ Monday = 8           // is BAD too !
> > > >>
> > > >> I could use following lexer rule:
> > > >>
> > > >> STRUCT_PARAMETER
> > > >>       :     ('A'..'Z' | 'a..z')+
> > > >>             '@'
> > > >>             ('A'..'Z' | 'a..z')+
> > > >>       ;
> > > >>
> > > >> but in parser how can I extract the structure name (WeekJobHour)
> > > >> and the structure parameter (Monday) form STRUCT_PARAMETER
> > > >> token ?
> > > >>
> > > >> I think a similar issue is present in C/C++ structure construct
> > > >>
> > > >> Thank you for your suggestions about
> > > >> Silverio Diquigiovanni
> > > > Make a class wich implements TokenStream wich uses the Lexer.
> > > > In the nextToken method, if the lexer returns a token of type
> > > > STRUCT_PARAM, split the token in 3 tokens where the first would be
> > > > of type STRUCT_NAME the second STRUCT_AT and the third STRUCT_DAY
> > > > and the text of the tokens WeekJobHour, @, Monday respectively.
> > > > return the first token from the method and store the other 2.
> > > > In the next 2 calls of nextToken return the stored ones.
> > > >
> > > > Pass the implementor of TokenStream instead of your Lexer to the
> > > > parser.
> > > >
> > > > Anakreon
> > > >
> > >
> > > I agree with the above approach, and also read my ParserFilter
> paper on
> > > my website, http://www.codetransform.com/filterexample.html
> > >
> > > I would recommend an alternative approach, which would be to not skip
> > > whitespace in the lexer.  Instead, discard it in the parser filter.
> > > That filter can still check that no whitespace occurs before or after
> > > an @ between IDENTS.
> > >
> > > Alternately you could keep track of state in the lexer.  Set a boolean
> > > variable in the makeToken() method if the token made was WS.  To see
> > > what is coming after, inspect LA(1).  Assuming @ is not used in any
> > > other way, you would have a rule similar to this, where
> > > previousWasWhitespace is the variable set in makeToken().
> > >
> > > AT: { !previousWasWhitespace && (LA(1)==' ' || LA(1)=='\t') }? '@' ;
> > >
> > > Monty
> > >
> > > ANTLR & Java Consultant -- http://www.codetransform.com
> > > ANSI C/GCC transformation toolkit -- 
> > > http://www.codetransform.com/gcc.html
> > > Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html
> > >
> > >
> > >
> > >
> > >
> > > Yahoo! Groups Links
> > >
> > >
> > >
> > >
> > >
> > >
> > >
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Wed Nov 10 21:22:59 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: trees with payloads??
In-Reply-To: <cmudl4+vv63@eGroups.com>
Message-ID: <cmusvj+l4h5@eGroups.com>



--- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...>
wrote:
...
> I have my doubts about doubly-linked ASTs too. I don't understand
> however how you formed the opinion that arrays are memory hogs. I
> would have though they were otherwise. And, if performance is
> important, they [might] offer superior locality properties which makes
> for very efficient cache usage. I say might only because this also
> depends on the memory location of the objects in the array. 

Arrays are either part of AST memory, in which case they are of fixed
length and there is almost always wasted space, or they are allocated
as a separate object from the AST, in which case two pointers (down
and right) become one pointer and an object with pointers to a vtable,
a size field, and the array at a minimum.  This is offset by a savings
 for terminal (right == down == null) nodes, but that does not help
much with memory usage.  Arrays are memory hogs.

Locality is not a good argument.  The arrays would not be arrays of
ASTs, but of references to ASTs.  The ASTs themselves would be
scattered to much the same extent in the two cases, and the variable
length arrays would contribute to memory fragmentation.


...

> > One other note:  with payloads, there is no reason for Tokens to
> > differ from ASTs, except that an AST may have down and right fields
> > set.
...
> > Both ASTs and Tokens are then replaced by Carriers (probably with a
> > better name).  This would have a performance advantage for tree
> > construction in the Parser since the token Carriers can be linked to
> > form a syntax tree in the parser.
> 
> Hmm, I am more inclined to eliminate [the cost of] Token objects
> [almost] entirely. I say almost because a mechanism is still needed to
> transfer attributes like lexeme/line/col info to AST node objects.

Not that easy.  You could have a fixed lookahead array, although that
would not work if syn preds are present, containing token data that
was then copied into ASTs as needed.  That leads to a lot of
copying--not very helpful.

> The TokenStream interface in it's current form might not be the [best]
> way to go. Unless Token objects can be recycled efficiently.

Carriers can be very efficiently recycled--you can recycle carrier
nodes from a syntax tree to a Factory, which keeps them in a linked
list and then feeds them back on allocation requests.

> So how can lexical tokens be modelled as an integer value (or enum
> value) usually and yet parsers are able to extract additional info
> such as lexeme/line/col on-demand and, inexpensively?

Token management in lexers is an art.  You have to avoid copying data
as much as possible for performance reasons and minimize memory
allocation.  llk does a reasonably good job; I think that Chris Leung
took advantage of lessons learned from flex and other lexer
generators.  Performance paranoia helps.  Payload objects could help
here, too--you can keep text start and end pointers into a
memory-mapped text file instead of allocating and copying strings.

--Loring

> The concept of a Carrier objects could play a part but I don't know
> how 'cause I haven't found an answer to my conundrum yet  ;-)
> 
> Cheers,
> 
> Micheal
> ANTLR/C#





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Wed Nov 10 22:51:32 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: Antlr 3.0  spaces between tokens
In-Reply-To: <001501c4c7b9$a60e9ff0$0400a8c0@NOTEBOOK>
Message-ID: <cmv25k+10pml@eGroups.com>



The min/max of ASTMinMax gives you an index into the token stream. 
Look for neighboring whitespace tokens.  By carrying the token stream
index around, you carry around references to associated whitespace. 
It's a rather clever trick for solving the whitespace tracking problem.

--Loring

--- In antlr-interest@yahoogroups.com, "matthew ford"
<Matthew.Ford@f...> wrote:
> Perhaps I am missing the point of the that article, but in my case I
don't
> what to just keep the whitespace for printing.
> 
> For some (not all) parser rules,  whitespace is actually important
for the
> parsing.
> So I want the parser to see all the whitespace for some rules and
not others
> 
> So what I want is the Token.SKIP option on the parser side instead
of on the
> lexer side and controlled on a rule basis.
> 
> matthew
> 
> ----- Original Message ----- 
> From: "lgcraymer" <lgc@m...>
> To: <antlr-interest@yahoogroups.com>
> Sent: Thursday, November 11, 2004 5:32 PM
> Subject: [antlr-interest] Re: Antlr 3.0 spaces between tokens
> 
> 
> >
> >
> > Take a look at
> >
>
<http://www.antlr.org/article/preserving.token.order/preserving.token.order.
> tml>
> >
> > It's hard to see how ANTLR 3 could do better.
> >
> > --Loring
> >
> > --- In antlr-interest@yahoogroups.com, "matthew ford"
> > <Matthew.Ford@f...> wrote:
> > > Hi Ter,
> > >
> > > Perhaps for Antlr 3.0 we can have a better means of handling white
> > space.
> > >
> > > Antlr provides an ignore whitespace capability that is appealing
> > > WS : ( ' ' | '\t' | '\n' { newline(); } | '\r' )+
> > >      { $setType(Token.SKIP); }
> > >    ;but every time I try and use it I come across a situation where
> > I really
> > > want/need the white space in the parser.
> > >
> > > So I end up having the lexer pass it back to the parser.
> > > (or have switch in the lexer that the parser uses to control the
> > return of
> > > whitespace.  I know this is a no-no but it has worked for me in some
> > cases)
> > >
> > > The parser usually only needs to know about the whitespace in a few
> > rules
> > > but now has
> > > (WS)* all over the place to handle whitespace every where.
> > >
> > > Basically what I would like to have
> > >  the lexer pass all the whitespace back to the parser) and then
in the
> > > parser be able to say
> > > a) for this rule ignore white space.
> > > or
> > > b) for this rule whitespace is important
> > >
> > > Actually the second option is more likely.
> > >
> > > matthew
> > >
> > > ----- Original Message ----- 
> > > From: "Monty Zukowski" <monty@c...>
> > > To: <antlr-interest@yahoogroups.com>
> > > Sent: Thursday, November 11, 2004 3:38 AM
> > > Subject: Re: [antlr-interest] spaces between tokens
> > >
> > >
> > > >
> > > > On Nov 10, 2004, at 7:39 AM, Anakreon wrote:
> > > >
> > > > >
> > > > > silverio.di@q... wrote:
> > > > >>
> > > > >>
> > > > >>
> > > > >>
> > > > >> Hi,
> > > > >> I've a big problem.
> > > > >>
> > > > >> In my grammar, how in many others, the whitespaces are
skipped in
> > > > >> lexer,
> > > > >> but I've some circumstances in which I need to check that
not any
> > > > >> spaces
> > > > >> are present between tokens.
> > > > >>
> > > > >> Example :
> > > > >> WeekJobHour@Monday = 8
> > > > >>
> > > > >> would mean assign 8 (hours) to parameter Monday of structure
> > > > >> WeekJobHour.
> > > > >> I would like my lexer extract following tokens:
> > > > >>
> > > > >> IDENT ATSIGN IDENT
> > > > >>
> > > > >> but my problem is to check than not any WS are present between
> > > > >> IDENT and ATSIGN and between ATSIGN and IDENT so
> > > > >>
> > > > >> WeekJobHour@Monday = 8        // is OK
> > > > >> WeekJobHour @Monday = 8       // is BAD
> > > > >> WeekJobHour@ Monday = 8       // is BAD
> > > > >> WeekJobHour  @ Monday = 8           // is BAD too !
> > > > >>
> > > > >> I could use following lexer rule:
> > > > >>
> > > > >> STRUCT_PARAMETER
> > > > >>       :     ('A'..'Z' | 'a..z')+
> > > > >>             '@'
> > > > >>             ('A'..'Z' | 'a..z')+
> > > > >>       ;
> > > > >>
> > > > >> but in parser how can I extract the structure name
(WeekJobHour)
> > > > >> and the structure parameter (Monday) form STRUCT_PARAMETER
> > > > >> token ?
> > > > >>
> > > > >> I think a similar issue is present in C/C++ structure construct
> > > > >>
> > > > >> Thank you for your suggestions about
> > > > >> Silverio Diquigiovanni
> > > > > Make a class wich implements TokenStream wich uses the Lexer.
> > > > > In the nextToken method, if the lexer returns a token of type
> > > > > STRUCT_PARAM, split the token in 3 tokens where the first
would be
> > > > > of type STRUCT_NAME the second STRUCT_AT and the third
STRUCT_DAY
> > > > > and the text of the tokens WeekJobHour, @, Monday respectively.
> > > > > return the first token from the method and store the other 2.
> > > > > In the next 2 calls of nextToken return the stored ones.
> > > > >
> > > > > Pass the implementor of TokenStream instead of your Lexer to the
> > > > > parser.
> > > > >
> > > > > Anakreon
> > > > >
> > > >
> > > > I agree with the above approach, and also read my ParserFilter
> > paper on
> > > > my website, http://www.codetransform.com/filterexample.html
> > > >
> > > > I would recommend an alternative approach, which would be to
not skip
> > > > whitespace in the lexer.  Instead, discard it in the parser
filter.
> > > > That filter can still check that no whitespace occurs before
or after
> > > > an @ between IDENTS.
> > > >
> > > > Alternately you could keep track of state in the lexer.  Set a
boolean
> > > > variable in the makeToken() method if the token made was WS. 
To see
> > > > what is coming after, inspect LA(1).  Assuming @ is not used
in any
> > > > other way, you would have a rule similar to this, where
> > > > previousWasWhitespace is the variable set in makeToken().
> > > >
> > > > AT: { !previousWasWhitespace && (LA(1)==' ' || LA(1)=='\t') }?
'@' ;
> > > >
> > > > Monty
> > > >
> > > > ANTLR & Java Consultant -- http://www.codetransform.com
> > > > ANSI C/GCC transformation toolkit -- 
> > > > http://www.codetransform.com/gcc.html
> > > > Embrace the Decay --
http://www.codetransform.com/EmbraceDecay.html
> > > >
> > > >
> > > >
> > > >
> > > >
> > > > Yahoo! Groups Links
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> >
> >
> >
> >
> >
> >
> > Yahoo! Groups Links
> >
> >
> >
> >
> >
> >
> >





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Wed Nov 10 22:55:08 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: Antlr 3.0  spaces between tokens
References: <cmv25k+10pml@eGroups.com>
Message-ID: <001f01c4c7bb$61d4e310$0400a8c0@NOTEBOOK>


A bit too clever for me  how do you write the parser rules?
matthew

----- Original Message ----- 
From: "lgcraymer" <lgc@mail1.jpl.nasa.gov>
To: <antlr-interest@yahoogroups.com>
Sent: Thursday, November 11, 2004 5:51 PM
Subject: [antlr-interest] Re: Antlr 3.0 spaces between tokens


>
>
> The min/max of ASTMinMax gives you an index into the token stream.
> Look for neighboring whitespace tokens.  By carrying the token stream
> index around, you carry around references to associated whitespace.
> It's a rather clever trick for solving the whitespace tracking problem.
>
> --Loring
>
> --- In antlr-interest@yahoogroups.com, "matthew ford"
> <Matthew.Ford@f...> wrote:
> > Perhaps I am missing the point of the that article, but in my case I
> don't
> > what to just keep the whitespace for printing.
> >
> > For some (not all) parser rules,  whitespace is actually important
> for the
> > parsing.
> > So I want the parser to see all the whitespace for some rules and
> not others
> >
> > So what I want is the Token.SKIP option on the parser side instead
> of on the
> > lexer side and controlled on a rule basis.
> >
> > matthew
> >
> > ----- Original Message ----- 
> > From: "lgcraymer" <lgc@m...>
> > To: <antlr-interest@yahoogroups.com>
> > Sent: Thursday, November 11, 2004 5:32 PM
> > Subject: [antlr-interest] Re: Antlr 3.0 spaces between tokens
> >
> >
> > >
> > >
> > > Take a look at
> > >
> >
>
<http://www.antlr.org/article/preserving.token.order/preserving.token.order.
> > tml>
> > >
> > > It's hard to see how ANTLR 3 could do better.
> > >
> > > --Loring
> > >
> > > --- In antlr-interest@yahoogroups.com, "matthew ford"
> > > <Matthew.Ford@f...> wrote:
> > > > Hi Ter,
> > > >
> > > > Perhaps for Antlr 3.0 we can have a better means of handling white
> > > space.
> > > >
> > > > Antlr provides an ignore whitespace capability that is appealing
> > > > WS : ( ' ' | '\t' | '\n' { newline(); } | '\r' )+
> > > >      { $setType(Token.SKIP); }
> > > >    ;but every time I try and use it I come across a situation where
> > > I really
> > > > want/need the white space in the parser.
> > > >
> > > > So I end up having the lexer pass it back to the parser.
> > > > (or have switch in the lexer that the parser uses to control the
> > > return of
> > > > whitespace.  I know this is a no-no but it has worked for me in some
> > > cases)
> > > >
> > > > The parser usually only needs to know about the whitespace in a few
> > > rules
> > > > but now has
> > > > (WS)* all over the place to handle whitespace every where.
> > > >
> > > > Basically what I would like to have
> > > >  the lexer pass all the whitespace back to the parser) and then
> in the
> > > > parser be able to say
> > > > a) for this rule ignore white space.
> > > > or
> > > > b) for this rule whitespace is important
> > > >
> > > > Actually the second option is more likely.
> > > >
> > > > matthew
> > > >
> > > > ----- Original Message ----- 
> > > > From: "Monty Zukowski" <monty@c...>
> > > > To: <antlr-interest@yahoogroups.com>
> > > > Sent: Thursday, November 11, 2004 3:38 AM
> > > > Subject: Re: [antlr-interest] spaces between tokens
> > > >
> > > >
> > > > >
> > > > > On Nov 10, 2004, at 7:39 AM, Anakreon wrote:
> > > > >
> > > > > >
> > > > > > silverio.di@q... wrote:
> > > > > >>
> > > > > >>
> > > > > >>
> > > > > >>
> > > > > >> Hi,
> > > > > >> I've a big problem.
> > > > > >>
> > > > > >> In my grammar, how in many others, the whitespaces are
> skipped in
> > > > > >> lexer,
> > > > > >> but I've some circumstances in which I need to check that
> not any
> > > > > >> spaces
> > > > > >> are present between tokens.
> > > > > >>
> > > > > >> Example :
> > > > > >> WeekJobHour@Monday = 8
> > > > > >>
> > > > > >> would mean assign 8 (hours) to parameter Monday of structure
> > > > > >> WeekJobHour.
> > > > > >> I would like my lexer extract following tokens:
> > > > > >>
> > > > > >> IDENT ATSIGN IDENT
> > > > > >>
> > > > > >> but my problem is to check than not any WS are present between
> > > > > >> IDENT and ATSIGN and between ATSIGN and IDENT so
> > > > > >>
> > > > > >> WeekJobHour@Monday = 8        // is OK
> > > > > >> WeekJobHour @Monday = 8       // is BAD
> > > > > >> WeekJobHour@ Monday = 8       // is BAD
> > > > > >> WeekJobHour  @ Monday = 8           // is BAD too !
> > > > > >>
> > > > > >> I could use following lexer rule:
> > > > > >>
> > > > > >> STRUCT_PARAMETER
> > > > > >>       :     ('A'..'Z' | 'a..z')+
> > > > > >>             '@'
> > > > > >>             ('A'..'Z' | 'a..z')+
> > > > > >>       ;
> > > > > >>
> > > > > >> but in parser how can I extract the structure name
> (WeekJobHour)
> > > > > >> and the structure parameter (Monday) form STRUCT_PARAMETER
> > > > > >> token ?
> > > > > >>
> > > > > >> I think a similar issue is present in C/C++ structure construct
> > > > > >>
> > > > > >> Thank you for your suggestions about
> > > > > >> Silverio Diquigiovanni
> > > > > > Make a class wich implements TokenStream wich uses the Lexer.
> > > > > > In the nextToken method, if the lexer returns a token of type
> > > > > > STRUCT_PARAM, split the token in 3 tokens where the first
> would be
> > > > > > of type STRUCT_NAME the second STRUCT_AT and the third
> STRUCT_DAY
> > > > > > and the text of the tokens WeekJobHour, @, Monday respectively.
> > > > > > return the first token from the method and store the other 2.
> > > > > > In the next 2 calls of nextToken return the stored ones.
> > > > > >
> > > > > > Pass the implementor of TokenStream instead of your Lexer to the
> > > > > > parser.
> > > > > >
> > > > > > Anakreon
> > > > > >
> > > > >
> > > > > I agree with the above approach, and also read my ParserFilter
> > > paper on
> > > > > my website, http://www.codetransform.com/filterexample.html
> > > > >
> > > > > I would recommend an alternative approach, which would be to
> not skip
> > > > > whitespace in the lexer.  Instead, discard it in the parser
> filter.
> > > > > That filter can still check that no whitespace occurs before
> or after
> > > > > an @ between IDENTS.
> > > > >
> > > > > Alternately you could keep track of state in the lexer.  Set a
> boolean
> > > > > variable in the makeToken() method if the token made was WS.
> To see
> > > > > what is coming after, inspect LA(1).  Assuming @ is not used
> in any
> > > > > other way, you would have a rule similar to this, where
> > > > > previousWasWhitespace is the variable set in makeToken().
> > > > >
> > > > > AT: { !previousWasWhitespace && (LA(1)==' ' || LA(1)=='\t') }?
> '@' ;
> > > > >
> > > > > Monty
> > > > >
> > > > > ANTLR & Java Consultant -- http://www.codetransform.com
> > > > > ANSI C/GCC transformation toolkit -- 
> > > > > http://www.codetransform.com/gcc.html
> > > > > Embrace the Decay --
> http://www.codetransform.com/EmbraceDecay.html
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > > Yahoo! Groups Links
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > >
> > >
> > >
> > >
> > >
> > >
> > > Yahoo! Groups Links
> > >
> > >
> > >
> > >
> > >
> > >
> > >
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Wed Nov 10 23:13:00 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: Antlr 3.0  spaces between tokens
In-Reply-To: <001f01c4c7bb$61d4e310$0400a8c0@NOTEBOOK>
Message-ID: <cmv3ds+niuv@eGroups.com>



As usual--you ignore whitespace during parsing.  Then when you need
the whitespace around a token, you peek into the token stream around
the point of interest.  It doesn't help if whitespace is really a
syntax feature and not just a token separator.

--Loring


--- In antlr-interest@yahoogroups.com, "matthew ford"
<Matthew.Ford@f...> wrote:
> A bit too clever for me  how do you write the parser rules?
> matthew
> 
> ----- Original Message ----- 
> From: "lgcraymer" <lgc@m...>
> To: <antlr-interest@yahoogroups.com>
> Sent: Thursday, November 11, 2004 5:51 PM
> Subject: [antlr-interest] Re: Antlr 3.0 spaces between tokens
> 
> 
> >
> >
> > The min/max of ASTMinMax gives you an index into the token stream.
> > Look for neighboring whitespace tokens.  By carrying the token stream
> > index around, you carry around references to associated whitespace.
> > It's a rather clever trick for solving the whitespace tracking
problem.
> >
> > --Loring
> >
> > --- In antlr-interest@yahoogroups.com, "matthew ford"
> > <Matthew.Ford@f...> wrote:
> > > Perhaps I am missing the point of the that article, but in my case I
> > don't
> > > what to just keep the whitespace for printing.
> > >
> > > For some (not all) parser rules,  whitespace is actually important
> > for the
> > > parsing.
> > > So I want the parser to see all the whitespace for some rules and
> > not others
> > >
> > > So what I want is the Token.SKIP option on the parser side instead
> > of on the
> > > lexer side and controlled on a rule basis.
> > >
> > > matthew
> > >
> > > ----- Original Message ----- 
> > > From: "lgcraymer" <lgc@m...>
> > > To: <antlr-interest@yahoogroups.com>
> > > Sent: Thursday, November 11, 2004 5:32 PM
> > > Subject: [antlr-interest] Re: Antlr 3.0 spaces between tokens
> > >
> > >
> > > >
> > > >
> > > > Take a look at
> > > >
> > >
> >
>
<http://www.antlr.org/article/preserving.token.order/preserving.token.order.
> > > tml>
> > > >
> > > > It's hard to see how ANTLR 3 could do better.
> > > >
> > > > --Loring
> > > >
> > > > --- In antlr-interest@yahoogroups.com, "matthew ford"
> > > > <Matthew.Ford@f...> wrote:
> > > > > Hi Ter,
> > > > >
> > > > > Perhaps for Antlr 3.0 we can have a better means of handling
white
> > > > space.
> > > > >
> > > > > Antlr provides an ignore whitespace capability that is appealing
> > > > > WS : ( ' ' | '\t' | '\n' { newline(); } | '\r' )+
> > > > >      { $setType(Token.SKIP); }
> > > > >    ;but every time I try and use it I come across a
situation where
> > > > I really
> > > > > want/need the white space in the parser.
> > > > >
> > > > > So I end up having the lexer pass it back to the parser.
> > > > > (or have switch in the lexer that the parser uses to control the
> > > > return of
> > > > > whitespace.  I know this is a no-no but it has worked for me
in some
> > > > cases)
> > > > >
> > > > > The parser usually only needs to know about the whitespace
in a few
> > > > rules
> > > > > but now has
> > > > > (WS)* all over the place to handle whitespace every where.
> > > > >
> > > > > Basically what I would like to have
> > > > >  the lexer pass all the whitespace back to the parser) and then
> > in the
> > > > > parser be able to say
> > > > > a) for this rule ignore white space.
> > > > > or
> > > > > b) for this rule whitespace is important
> > > > >
> > > > > Actually the second option is more likely.
> > > > >
> > > > > matthew
> > > > >
> > > > > ----- Original Message ----- 
> > > > > From: "Monty Zukowski" <monty@c...>
> > > > > To: <antlr-interest@yahoogroups.com>
> > > > > Sent: Thursday, November 11, 2004 3:38 AM
> > > > > Subject: Re: [antlr-interest] spaces between tokens
> > > > >
> > > > >
> > > > > >
> > > > > > On Nov 10, 2004, at 7:39 AM, Anakreon wrote:
> > > > > >
> > > > > > >
> > > > > > > silverio.di@q... wrote:
> > > > > > >>
> > > > > > >>
> > > > > > >>
> > > > > > >>
> > > > > > >> Hi,
> > > > > > >> I've a big problem.
> > > > > > >>
> > > > > > >> In my grammar, how in many others, the whitespaces are
> > skipped in
> > > > > > >> lexer,
> > > > > > >> but I've some circumstances in which I need to check that
> > not any
> > > > > > >> spaces
> > > > > > >> are present between tokens.
> > > > > > >>
> > > > > > >> Example :
> > > > > > >> WeekJobHour@Monday = 8
> > > > > > >>
> > > > > > >> would mean assign 8 (hours) to parameter Monday of
structure
> > > > > > >> WeekJobHour.
> > > > > > >> I would like my lexer extract following tokens:
> > > > > > >>
> > > > > > >> IDENT ATSIGN IDENT
> > > > > > >>
> > > > > > >> but my problem is to check than not any WS are present
between
> > > > > > >> IDENT and ATSIGN and between ATSIGN and IDENT so
> > > > > > >>
> > > > > > >> WeekJobHour@Monday = 8        // is OK
> > > > > > >> WeekJobHour @Monday = 8       // is BAD
> > > > > > >> WeekJobHour@ Monday = 8       // is BAD
> > > > > > >> WeekJobHour  @ Monday = 8           // is BAD too !
> > > > > > >>
> > > > > > >> I could use following lexer rule:
> > > > > > >>
> > > > > > >> STRUCT_PARAMETER
> > > > > > >>       :     ('A'..'Z' | 'a..z')+
> > > > > > >>             '@'
> > > > > > >>             ('A'..'Z' | 'a..z')+
> > > > > > >>       ;
> > > > > > >>
> > > > > > >> but in parser how can I extract the structure name
> > (WeekJobHour)
> > > > > > >> and the structure parameter (Monday) form STRUCT_PARAMETER
> > > > > > >> token ?
> > > > > > >>
> > > > > > >> I think a similar issue is present in C/C++ structure
construct
> > > > > > >>
> > > > > > >> Thank you for your suggestions about
> > > > > > >> Silverio Diquigiovanni
> > > > > > > Make a class wich implements TokenStream wich uses the
Lexer.
> > > > > > > In the nextToken method, if the lexer returns a token of
type
> > > > > > > STRUCT_PARAM, split the token in 3 tokens where the first
> > would be
> > > > > > > of type STRUCT_NAME the second STRUCT_AT and the third
> > STRUCT_DAY
> > > > > > > and the text of the tokens WeekJobHour, @, Monday
respectively.
> > > > > > > return the first token from the method and store the
other 2.
> > > > > > > In the next 2 calls of nextToken return the stored ones.
> > > > > > >
> > > > > > > Pass the implementor of TokenStream instead of your
Lexer to the
> > > > > > > parser.
> > > > > > >
> > > > > > > Anakreon
> > > > > > >
> > > > > >
> > > > > > I agree with the above approach, and also read my ParserFilter
> > > > paper on
> > > > > > my website, http://www.codetransform.com/filterexample.html
> > > > > >
> > > > > > I would recommend an alternative approach, which would be to
> > not skip
> > > > > > whitespace in the lexer.  Instead, discard it in the parser
> > filter.
> > > > > > That filter can still check that no whitespace occurs before
> > or after
> > > > > > an @ between IDENTS.
> > > > > >
> > > > > > Alternately you could keep track of state in the lexer.  Set a
> > boolean
> > > > > > variable in the makeToken() method if the token made was WS.
> > To see
> > > > > > what is coming after, inspect LA(1).  Assuming @ is not used
> > in any
> > > > > > other way, you would have a rule similar to this, where
> > > > > > previousWasWhitespace is the variable set in makeToken().
> > > > > >
> > > > > > AT: { !previousWasWhitespace && (LA(1)==' ' || LA(1)=='\t') }?
> > '@' ;
> > > > > >
> > > > > > Monty
> > > > > >
> > > > > > ANTLR & Java Consultant -- http://www.codetransform.com
> > > > > > ANSI C/GCC transformation toolkit -- 
> > > > > > http://www.codetransform.com/gcc.html
> > > > > > Embrace the Decay --
> > http://www.codetransform.com/EmbraceDecay.html
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > > Yahoo! Groups Links
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > > Yahoo! Groups Links
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> >
> >
> >
> >
> >
> >
> > Yahoo! Groups Links
> >
> >
> >
> >
> >
> >
> >





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Wed Nov 10 23:35:11 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: trees with payloads??
In-Reply-To: <cmusvj+l4h5@eGroups.com>
Message-ID: <cmv4nf+tfq7@eGroups.com>



--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> 
> --- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...>
> wrote:
> ...
> > I have my doubts about doubly-linked ASTs too. I don't understand
> > however how you formed the opinion that arrays are memory hogs. I
> > would have though they were otherwise. And, if performance is
> > important, they [might] offer superior locality properties which makes
> > for very efficient cache usage. I say might only because this also
> > depends on the memory location of the objects in the array. 
> 
> Arrays are either part of AST memory, in which case they are of fixed
> length and there is almost always wasted space, or they are allocated
> as a separate object from the AST, in which case two pointers (down
> and right) become one pointer and an object with pointers to a vtable,
> a size field, and the array at a minimum.

Fixed length array would typically waste space (or raise errors if
they are too small). Agreed.

ArrayLists-type objects on the other hand don't have to waste space.
They become one pointer to the ArrayList which holds a size field and
an array with [approx] one pointer per child. The vtable is per class
not per instance.

For leaf nodes (where right == down == null) - one pointer is saved
since only one is needed for the ArrayList pointer (which would be
null too).

For internal non-leaf nodes - if the ArrayList is of the exact size
needed, only the ArrayList's size field is extra.

Aren't there always more leaf nodes?

>  This is offset by a savings
>  for terminal (right == down == null) nodes, but that does not help
> much with memory usage.  Arrays are memory hogs.

Fixed-length ones would usually be. Not convinced this holds for
ArrayLists.

> Locality is not a good argument.  The arrays would not be arrays of
> ASTs, but of references to ASTs.

Good point. I did qualify my locality statement.

> The ASTs themselves would be
> scattered to much the same extent in the two cases, and the variable
> length arrays would contribute to memory fragmentation.

The variable length array *might* contribute to memory fragmentation
if there were frequent re-allocations due to arrays outgrowing their
current size. It would be quite easy to ensure this wasn't this case
during tree construction though.

> > > Both ASTs and Tokens are then replaced by Carriers (probably with a
> > > better name).  This would have a performance advantage for tree
> > > construction in the Parser since the token Carriers can be linked to
> > > form a syntax tree in the parser.
> > 
> > Hmm, I am more inclined to eliminate [the cost of] Token objects
> > [almost] entirely. I say almost because a mechanism is still needed to
> > transfer attributes like lexeme/line/col info to AST node objects.
> 
> Not that easy.  You could have a fixed lookahead array, although that
> would not work if syn preds are present, containing token data that
> was then copied into ASTs as needed.  That leads to a lot of
> copying--not very helpful.
> 
> > The TokenStream interface in it's current form might not be the [best]
> > way to go. Unless Token objects can be recycled efficiently.
> 
> Carriers can be very efficiently recycled--you can recycle carrier
> nodes from a syntax tree to a Factory, which keeps them in a linked
> list and then feeds them back on allocation requests.

OK, following on from this:

I can grok Token objects with Carrier objects as payload. Carrier is
passed unchanged to AST objects.

But Token objects and AST objects replaced by Carrier objects?. There
isn't a one-to-one match between Token objects and AST objects in many
 cases. How does the unified Carrier concept deal with this?

> > So how can lexical tokens be modelled as an integer value (or enum
> > value) usually and yet parsers are able to extract additional info
> > such as lexeme/line/col on-demand and, inexpensively?
> 
> Token management in lexers is an art.  You have to avoid copying data
> as much as possible for performance reasons and minimize memory
> allocation.  llk does a reasonably good job; I think that Chris Leung
> took advantage of lessons learned from flex and other lexer
> generators.  Performance paranoia helps.  Payload objects could help
> here, too--you can keep text start and end pointers into a
> memory-mapped text file instead of allocating and copying strings.

Yep, right you are. Performance tuning is hard. You would typically
need to copy selected substrings from the input buffer to another
buffer where the start/end indices refer. Else, you might end up
keeping a 100kB memory-mapped file hanging around just for the sake of
a few substrings.

Cheers,

Micheal
ANTLR/C#





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Thu Nov 11 00:13:16 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: trees with payloads??
In-Reply-To: <cmv4nf+tfq7@eGroups.com>
Message-ID: <cmv6us+5mld@eGroups.com>



--- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...>
wrote:
> 
> --- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> > 
> > --- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...>
> > wrote:
> > ...
> > > I have my doubts about doubly-linked ASTs too. I don't understand
> > > however how you formed the opinion that arrays are memory hogs. I
> > > would have though they were otherwise. And, if performance is
> > > important, they [might] offer superior locality properties which
makes
> > > for very efficient cache usage. I say might only because this also
> > > depends on the memory location of the objects in the array. 
> > 
> > Arrays are either part of AST memory, in which case they are of fixed
> > length and there is almost always wasted space, or they are allocated
> > as a separate object from the AST, in which case two pointers (down
> > and right) become one pointer and an object with pointers to a vtable,
> > a size field, and the array at a minimum.
> 
> Fixed length array would typically waste space (or raise errors if
> they are too small). Agreed.
> 
> ArrayLists-type objects on the other hand don't have to waste space.
> They become one pointer to the ArrayList which holds a size field and
> an array with [approx] one pointer per child. The vtable is per class
> not per instance.

Each object has a pointer to the vtable.

> For leaf nodes (where right == down == null) - one pointer is saved
> since only one is needed for the ArrayList pointer (which would be
> null too).
> 
> For internal non-leaf nodes - if the ArrayList is of the exact size
> needed, only the ArrayList's size field is extra.

Not true--there are hidden fields:  pointer to vtable (vtable
reference), size of allocated memory (larger than the object) or
pointer to following memory, and size of object.  There may also be a
reference counter or other fields for garbage collection (depends on
the GC algorithm).

> Aren't there always more leaf nodes?

Yes, but not all leaf nodes have only null pointers (I'll call them
edge nodes).  The edge nodes are a fraction of the total.

> >  This is offset by a savings
> >  for terminal (right == down == null) nodes, but that does not help
> > much with memory usage.  Arrays are memory hogs.
> 
> Fixed-length ones would usually be. Not convinced this holds for
> ArrayLists.

I should also point out that memory is allocated in "chunks" to avoid
fragmentation.  There is a minimum amount of memory for each allocated
object to help avoid memory fragmentation when objects are deleted and
the memory reused for another create.  64 or 128 bytes is not unusual
for C/C++; Java and C# would be somewhat similar.

...
> > Carriers can be very efficiently recycled--you can recycle carrier
> > nodes from a syntax tree to a Factory, which keeps them in a linked
> > list and then feeds them back on allocation requests.
> 
> OK, following on from this:
> 
> I can grok Token objects with Carrier objects as payload. Carrier is
> passed unchanged to AST objects.

Conceptual block!  AST = Token = Carrier with Payload.

> But Token objects and AST objects replaced by Carrier objects?. There
> isn't a one-to-one match between Token objects and AST objects in many
>  cases. How does the unified Carrier concept deal with this?

Not all Tokens become ASTs, and some ASTs are user-created.  However,
all non-user-created ASTs have corresponding Tokens.  You gain
performance efficiency by using Carriers with Payloads for Tokens and
then reusing them as ASTs.

> > > So how can lexical tokens be modelled as an integer value (or enum
> > > value) usually and yet parsers are able to extract additional info
> > > such as lexeme/line/col on-demand and, inexpensively?
> > 
> > Token management in lexers is an art.  You have to avoid copying data
> > as much as possible for performance reasons and minimize memory
> > allocation.  llk does a reasonably good job; I think that Chris Leung
> > took advantage of lessons learned from flex and other lexer
> > generators.  Performance paranoia helps.  Payload objects could help
> > here, too--you can keep text start and end pointers into a
> > memory-mapped text file instead of allocating and copying strings.
> 
> Yep, right you are. Performance tuning is hard. You would typically
> need to copy selected substrings from the input buffer to another
> buffer where the start/end indices refer. Else, you might end up
> keeping a 100kB memory-mapped file hanging around just for the sake of
> a few substrings.

True, but a 100KB or even 100 MB memory-mapped file is not a big
expense--the OS virtual memory management takes care of that.  If you
only keep a few strings, then you only keep a few blocks of the file
memory-resident.  On the other hand, 20,000 string copies and creates
(5 chars per word, which is probably an overestimate) is a performance
hit.

--Loring

> Cheers,
> 
> Micheal
> ANTLR/C#





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Thu Nov 11 00:33:29 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: Antlr 3.0  spaces between tokens
References: <cmv3ds+niuv@eGroups.com>
Message-ID: <003301c4c7c9$1f6408e0$0400a8c0@NOTEBOOK>


That is what I am talking about
whitespace as a syntax feature and not just a token separator.
This is usually only in a small number of rules
One example I had was a math language where whitespace was significant
inside
[ ] when indexing matrices but elsewhere it was just a token separator.

matthew

----- Original Message ----- 
From: "lgcraymer" <lgc@mail1.jpl.nasa.gov>
To: <antlr-interest@yahoogroups.com>
Sent: Thursday, November 11, 2004 6:13 PM
Subject: [antlr-interest] Re: Antlr 3.0 spaces between tokens


>
>
> As usual--you ignore whitespace during parsing.  Then when you need
> the whitespace around a token, you peek into the token stream around
> the point of interest.  It doesn't help if whitespace is really a
> syntax feature and not just a token separator.
>
> --Loring
>
>
> --- In antlr-interest@yahoogroups.com, "matthew ford"
> <Matthew.Ford@f...> wrote:
> > A bit too clever for me  how do you write the parser rules?
> > matthew
> >
> > ----- Original Message ----- 
> > From: "lgcraymer" <lgc@m...>
> > To: <antlr-interest@yahoogroups.com>
> > Sent: Thursday, November 11, 2004 5:51 PM
> > Subject: [antlr-interest] Re: Antlr 3.0 spaces between tokens
> >
> >
> > >
> > >
> > > The min/max of ASTMinMax gives you an index into the token stream.
> > > Look for neighboring whitespace tokens.  By carrying the token stream
> > > index around, you carry around references to associated whitespace.
> > > It's a rather clever trick for solving the whitespace tracking
> problem.
> > >
> > > --Loring
> > >
> > > --- In antlr-interest@yahoogroups.com, "matthew ford"
> > > <Matthew.Ford@f...> wrote:
> > > > Perhaps I am missing the point of the that article, but in my case I
> > > don't
> > > > what to just keep the whitespace for printing.
> > > >
> > > > For some (not all) parser rules,  whitespace is actually important
> > > for the
> > > > parsing.
> > > > So I want the parser to see all the whitespace for some rules and
> > > not others
> > > >
> > > > So what I want is the Token.SKIP option on the parser side instead
> > > of on the
> > > > lexer side and controlled on a rule basis.
> > > >
> > > > matthew
> > > >
> > > > ----- Original Message ----- 
> > > > From: "lgcraymer" <lgc@m...>
> > > > To: <antlr-interest@yahoogroups.com>
> > > > Sent: Thursday, November 11, 2004 5:32 PM
> > > > Subject: [antlr-interest] Re: Antlr 3.0 spaces between tokens
> > > >
> > > >
> > > > >
> > > > >
> > > > > Take a look at
> > > > >
> > > >
> > >
> >
>
<http://www.antlr.org/article/preserving.token.order/preserving.token.order.
> > > > tml>
> > > > >
> > > > > It's hard to see how ANTLR 3 could do better.
> > > > >
> > > > > --Loring
> > > > >
> > > > > --- In antlr-interest@yahoogroups.com, "matthew ford"
> > > > > <Matthew.Ford@f...> wrote:
> > > > > > Hi Ter,
> > > > > >
> > > > > > Perhaps for Antlr 3.0 we can have a better means of handling
> white
> > > > > space.
> > > > > >
> > > > > > Antlr provides an ignore whitespace capability that is appealing
> > > > > > WS : ( ' ' | '\t' | '\n' { newline(); } | '\r' )+
> > > > > >      { $setType(Token.SKIP); }
> > > > > >    ;but every time I try and use it I come across a
> situation where
> > > > > I really
> > > > > > want/need the white space in the parser.
> > > > > >
> > > > > > So I end up having the lexer pass it back to the parser.
> > > > > > (or have switch in the lexer that the parser uses to control the
> > > > > return of
> > > > > > whitespace.  I know this is a no-no but it has worked for me
> in some
> > > > > cases)
> > > > > >
> > > > > > The parser usually only needs to know about the whitespace
> in a few
> > > > > rules
> > > > > > but now has
> > > > > > (WS)* all over the place to handle whitespace every where.
> > > > > >
> > > > > > Basically what I would like to have
> > > > > >  the lexer pass all the whitespace back to the parser) and then
> > > in the
> > > > > > parser be able to say
> > > > > > a) for this rule ignore white space.
> > > > > > or
> > > > > > b) for this rule whitespace is important
> > > > > >
> > > > > > Actually the second option is more likely.
> > > > > >
> > > > > > matthew
> > > > > >
> > > > > > ----- Original Message ----- 
> > > > > > From: "Monty Zukowski" <monty@c...>
> > > > > > To: <antlr-interest@yahoogroups.com>
> > > > > > Sent: Thursday, November 11, 2004 3:38 AM
> > > > > > Subject: Re: [antlr-interest] spaces between tokens
> > > > > >
> > > > > >
> > > > > > >
> > > > > > > On Nov 10, 2004, at 7:39 AM, Anakreon wrote:
> > > > > > >
> > > > > > > >
> > > > > > > > silverio.di@q... wrote:
> > > > > > > >>
> > > > > > > >>
> > > > > > > >>
> > > > > > > >>
> > > > > > > >> Hi,
> > > > > > > >> I've a big problem.
> > > > > > > >>
> > > > > > > >> In my grammar, how in many others, the whitespaces are
> > > skipped in
> > > > > > > >> lexer,
> > > > > > > >> but I've some circumstances in which I need to check that
> > > not any
> > > > > > > >> spaces
> > > > > > > >> are present between tokens.
> > > > > > > >>
> > > > > > > >> Example :
> > > > > > > >> WeekJobHour@Monday = 8
> > > > > > > >>
> > > > > > > >> would mean assign 8 (hours) to parameter Monday of
> structure
> > > > > > > >> WeekJobHour.
> > > > > > > >> I would like my lexer extract following tokens:
> > > > > > > >>
> > > > > > > >> IDENT ATSIGN IDENT
> > > > > > > >>
> > > > > > > >> but my problem is to check than not any WS are present
> between
> > > > > > > >> IDENT and ATSIGN and between ATSIGN and IDENT so
> > > > > > > >>
> > > > > > > >> WeekJobHour@Monday = 8        // is OK
> > > > > > > >> WeekJobHour @Monday = 8       // is BAD
> > > > > > > >> WeekJobHour@ Monday = 8       // is BAD
> > > > > > > >> WeekJobHour  @ Monday = 8           // is BAD too !
> > > > > > > >>
> > > > > > > >> I could use following lexer rule:
> > > > > > > >>
> > > > > > > >> STRUCT_PARAMETER
> > > > > > > >>       :     ('A'..'Z' | 'a..z')+
> > > > > > > >>             '@'
> > > > > > > >>             ('A'..'Z' | 'a..z')+
> > > > > > > >>       ;
> > > > > > > >>
> > > > > > > >> but in parser how can I extract the structure name
> > > (WeekJobHour)
> > > > > > > >> and the structure parameter (Monday) form STRUCT_PARAMETER
> > > > > > > >> token ?
> > > > > > > >>
> > > > > > > >> I think a similar issue is present in C/C++ structure
> construct
> > > > > > > >>
> > > > > > > >> Thank you for your suggestions about
> > > > > > > >> Silverio Diquigiovanni
> > > > > > > > Make a class wich implements TokenStream wich uses the
> Lexer.
> > > > > > > > In the nextToken method, if the lexer returns a token of
> type
> > > > > > > > STRUCT_PARAM, split the token in 3 tokens where the first
> > > would be
> > > > > > > > of type STRUCT_NAME the second STRUCT_AT and the third
> > > STRUCT_DAY
> > > > > > > > and the text of the tokens WeekJobHour, @, Monday
> respectively.
> > > > > > > > return the first token from the method and store the
> other 2.
> > > > > > > > In the next 2 calls of nextToken return the stored ones.
> > > > > > > >
> > > > > > > > Pass the implementor of TokenStream instead of your
> Lexer to the
> > > > > > > > parser.
> > > > > > > >
> > > > > > > > Anakreon
> > > > > > > >
> > > > > > >
> > > > > > > I agree with the above approach, and also read my ParserFilter
> > > > > paper on
> > > > > > > my website, http://www.codetransform.com/filterexample.html
> > > > > > >
> > > > > > > I would recommend an alternative approach, which would be to
> > > not skip
> > > > > > > whitespace in the lexer.  Instead, discard it in the parser
> > > filter.
> > > > > > > That filter can still check that no whitespace occurs before
> > > or after
> > > > > > > an @ between IDENTS.
> > > > > > >
> > > > > > > Alternately you could keep track of state in the lexer.  Set a
> > > boolean
> > > > > > > variable in the makeToken() method if the token made was WS.
> > > To see
> > > > > > > what is coming after, inspect LA(1).  Assuming @ is not used
> > > in any
> > > > > > > other way, you would have a rule similar to this, where
> > > > > > > previousWasWhitespace is the variable set in makeToken().
> > > > > > >
> > > > > > > AT: { !previousWasWhitespace && (LA(1)==' ' || LA(1)=='\t') }?
> > > '@' ;
> > > > > > >
> > > > > > > Monty
> > > > > > >
> > > > > > > ANTLR & Java Consultant -- http://www.codetransform.com
> > > > > > > ANSI C/GCC transformation toolkit -- 
> > > > > > > http://www.codetransform.com/gcc.html
> > > > > > > Embrace the Decay --
> > > http://www.codetransform.com/EmbraceDecay.html
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > > Yahoo! Groups Links
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > > Yahoo! Groups Links
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > >
> > >
> > >
> > >
> > >
> > >
> > > Yahoo! Groups Links
> > >
> > >
> > >
> > >
> > >
> > >
> > >
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Thu Nov 11 01:19:02 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: Antlr 3.0  spaces between tokens
In-Reply-To: <003301c4c7c9$1f6408e0$0400a8c0@NOTEBOOK>
Message-ID: <cmvaq6+p2p4@eGroups.com>



Context-dependent lexing is a nasty problem.  ANTLR 3 probably won't
solve it.  I ran into exactly the same problem in an expression
grammar for spacecraft sequencing.  The cleanest approach I could come
up with was to have a counter that was incremented by LBRACKET and
decremented by RBRACKET.  If the counter was zero, then whitespace
tokens were marked "SKIP"; if it was positive, then they were "WS" and
recognized by the parser.  That helped simplify the grammar.

--Loring


--- In antlr-interest@yahoogroups.com, "matthew ford"
<Matthew.Ford@f...> wrote:
> That is what I am talking about
> whitespace as a syntax feature and not just a token separator.
> This is usually only in a small number of rules
> One example I had was a math language where whitespace was significant
> inside
> [ ] when indexing matrices but elsewhere it was just a token separator.
> 
> matthew
> 
> ----- Original Message ----- 
> From: "lgcraymer" <lgc@m...>
> To: <antlr-interest@yahoogroups.com>
> Sent: Thursday, November 11, 2004 6:13 PM
> Subject: [antlr-interest] Re: Antlr 3.0 spaces between tokens
> 
> 
> >
> >
> > As usual--you ignore whitespace during parsing.  Then when you need
> > the whitespace around a token, you peek into the token stream around
> > the point of interest.  It doesn't help if whitespace is really a
> > syntax feature and not just a token separator.
> >
> > --Loring
> >
> >
> > --- In antlr-interest@yahoogroups.com, "matthew ford"
> > <Matthew.Ford@f...> wrote:
> > > A bit too clever for me  how do you write the parser rules?
> > > matthew
> > >
> > > ----- Original Message ----- 
> > > From: "lgcraymer" <lgc@m...>
> > > To: <antlr-interest@yahoogroups.com>
> > > Sent: Thursday, November 11, 2004 5:51 PM
> > > Subject: [antlr-interest] Re: Antlr 3.0 spaces between tokens
> > >
> > >
> > > >
> > > >
> > > > The min/max of ASTMinMax gives you an index into the token stream.
> > > > Look for neighboring whitespace tokens.  By carrying the token
stream
> > > > index around, you carry around references to associated
whitespace.
> > > > It's a rather clever trick for solving the whitespace tracking
> > problem.
> > > >
> > > > --Loring
> > > >
> > > > --- In antlr-interest@yahoogroups.com, "matthew ford"
> > > > <Matthew.Ford@f...> wrote:
> > > > > Perhaps I am missing the point of the that article, but in
my case I
> > > > don't
> > > > > what to just keep the whitespace for printing.
> > > > >
> > > > > For some (not all) parser rules,  whitespace is actually
important
> > > > for the
> > > > > parsing.
> > > > > So I want the parser to see all the whitespace for some
rules and
> > > > not others
> > > > >
> > > > > So what I want is the Token.SKIP option on the parser side
instead
> > > > of on the
> > > > > lexer side and controlled on a rule basis.
> > > > >
> > > > > matthew
> > > > >
> > > > > ----- Original Message ----- 
> > > > > From: "lgcraymer" <lgc@m...>
> > > > > To: <antlr-interest@yahoogroups.com>
> > > > > Sent: Thursday, November 11, 2004 5:32 PM
> > > > > Subject: [antlr-interest] Re: Antlr 3.0 spaces between tokens
> > > > >
> > > > >
> > > > > >
> > > > > >
> > > > > > Take a look at
> > > > > >
> > > > >
> > > >
> > >
> >
>
<http://www.antlr.org/article/preserving.token.order/preserving.token.order.
> > > > > tml>
> > > > > >
> > > > > > It's hard to see how ANTLR 3 could do better.
> > > > > >
> > > > > > --Loring
> > > > > >
> > > > > > --- In antlr-interest@yahoogroups.com, "matthew ford"
> > > > > > <Matthew.Ford@f...> wrote:
> > > > > > > Hi Ter,
> > > > > > >
> > > > > > > Perhaps for Antlr 3.0 we can have a better means of handling
> > white
> > > > > > space.
> > > > > > >
> > > > > > > Antlr provides an ignore whitespace capability that is
appealing
> > > > > > > WS : ( ' ' | '\t' | '\n' { newline(); } | '\r' )+
> > > > > > >      { $setType(Token.SKIP); }
> > > > > > >    ;but every time I try and use it I come across a
> > situation where
> > > > > > I really
> > > > > > > want/need the white space in the parser.
> > > > > > >
> > > > > > > So I end up having the lexer pass it back to the parser.
> > > > > > > (or have switch in the lexer that the parser uses to
control the
> > > > > > return of
> > > > > > > whitespace.  I know this is a no-no but it has worked for me
> > in some
> > > > > > cases)
> > > > > > >
> > > > > > > The parser usually only needs to know about the whitespace
> > in a few
> > > > > > rules
> > > > > > > but now has
> > > > > > > (WS)* all over the place to handle whitespace every where.
> > > > > > >
> > > > > > > Basically what I would like to have
> > > > > > >  the lexer pass all the whitespace back to the parser)
and then
> > > > in the
> > > > > > > parser be able to say
> > > > > > > a) for this rule ignore white space.
> > > > > > > or
> > > > > > > b) for this rule whitespace is important
> > > > > > >
> > > > > > > Actually the second option is more likely.
> > > > > > >
> > > > > > > matthew
> > > > > > >
> > > > > > > ----- Original Message ----- 
> > > > > > > From: "Monty Zukowski" <monty@c...>
> > > > > > > To: <antlr-interest@yahoogroups.com>
> > > > > > > Sent: Thursday, November 11, 2004 3:38 AM
> > > > > > > Subject: Re: [antlr-interest] spaces between tokens
> > > > > > >
> > > > > > >
> > > > > > > >
> > > > > > > > On Nov 10, 2004, at 7:39 AM, Anakreon wrote:
> > > > > > > >
> > > > > > > > >
> > > > > > > > > silverio.di@q... wrote:
> > > > > > > > >>
> > > > > > > > >>
> > > > > > > > >>
> > > > > > > > >>
> > > > > > > > >> Hi,
> > > > > > > > >> I've a big problem.
> > > > > > > > >>
> > > > > > > > >> In my grammar, how in many others, the whitespaces are
> > > > skipped in
> > > > > > > > >> lexer,
> > > > > > > > >> but I've some circumstances in which I need to
check that
> > > > not any
> > > > > > > > >> spaces
> > > > > > > > >> are present between tokens.
> > > > > > > > >>
> > > > > > > > >> Example :
> > > > > > > > >> WeekJobHour@Monday = 8
> > > > > > > > >>
> > > > > > > > >> would mean assign 8 (hours) to parameter Monday of
> > structure
> > > > > > > > >> WeekJobHour.
> > > > > > > > >> I would like my lexer extract following tokens:
> > > > > > > > >>
> > > > > > > > >> IDENT ATSIGN IDENT
> > > > > > > > >>
> > > > > > > > >> but my problem is to check than not any WS are present
> > between
> > > > > > > > >> IDENT and ATSIGN and between ATSIGN and IDENT so
> > > > > > > > >>
> > > > > > > > >> WeekJobHour@Monday = 8        // is OK
> > > > > > > > >> WeekJobHour @Monday = 8       // is BAD
> > > > > > > > >> WeekJobHour@ Monday = 8       // is BAD
> > > > > > > > >> WeekJobHour  @ Monday = 8           // is BAD too !
> > > > > > > > >>
> > > > > > > > >> I could use following lexer rule:
> > > > > > > > >>
> > > > > > > > >> STRUCT_PARAMETER
> > > > > > > > >>       :     ('A'..'Z' | 'a..z')+
> > > > > > > > >>             '@'
> > > > > > > > >>             ('A'..'Z' | 'a..z')+
> > > > > > > > >>       ;
> > > > > > > > >>
> > > > > > > > >> but in parser how can I extract the structure name
> > > > (WeekJobHour)
> > > > > > > > >> and the structure parameter (Monday) form
STRUCT_PARAMETER
> > > > > > > > >> token ?
> > > > > > > > >>
> > > > > > > > >> I think a similar issue is present in C/C++ structure
> > construct
> > > > > > > > >>
> > > > > > > > >> Thank you for your suggestions about
> > > > > > > > >> Silverio Diquigiovanni
> > > > > > > > > Make a class wich implements TokenStream wich uses the
> > Lexer.
> > > > > > > > > In the nextToken method, if the lexer returns a token of
> > type
> > > > > > > > > STRUCT_PARAM, split the token in 3 tokens where the
first
> > > > would be
> > > > > > > > > of type STRUCT_NAME the second STRUCT_AT and the third
> > > > STRUCT_DAY
> > > > > > > > > and the text of the tokens WeekJobHour, @, Monday
> > respectively.
> > > > > > > > > return the first token from the method and store the
> > other 2.
> > > > > > > > > In the next 2 calls of nextToken return the stored ones.
> > > > > > > > >
> > > > > > > > > Pass the implementor of TokenStream instead of your
> > Lexer to the
> > > > > > > > > parser.
> > > > > > > > >
> > > > > > > > > Anakreon
> > > > > > > > >
> > > > > > > >
> > > > > > > > I agree with the above approach, and also read my
ParserFilter
> > > > > > paper on
> > > > > > > > my website,
http://www.codetransform.com/filterexample.html
> > > > > > > >
> > > > > > > > I would recommend an alternative approach, which would
be to
> > > > not skip
> > > > > > > > whitespace in the lexer.  Instead, discard it in the
parser
> > > > filter.
> > > > > > > > That filter can still check that no whitespace occurs
before
> > > > or after
> > > > > > > > an @ between IDENTS.
> > > > > > > >
> > > > > > > > Alternately you could keep track of state in the
lexer.  Set a
> > > > boolean
> > > > > > > > variable in the makeToken() method if the token made
was WS.
> > > > To see
> > > > > > > > what is coming after, inspect LA(1).  Assuming @ is
not used
> > > > in any
> > > > > > > > other way, you would have a rule similar to this, where
> > > > > > > > previousWasWhitespace is the variable set in makeToken().
> > > > > > > >
> > > > > > > > AT: { !previousWasWhitespace && (LA(1)==' ' ||
LA(1)=='\t') }?
> > > > '@' ;
> > > > > > > >
> > > > > > > > Monty
> > > > > > > >
> > > > > > > > ANTLR & Java Consultant -- http://www.codetransform.com
> > > > > > > > ANSI C/GCC transformation toolkit -- 
> > > > > > > > http://www.codetransform.com/gcc.html
> > > > > > > > Embrace the Decay --
> > > > http://www.codetransform.com/EmbraceDecay.html
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > > Yahoo! Groups Links
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > > Yahoo! Groups Links
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > > Yahoo! Groups Links
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> >
> >
> >
> >
> >
> >
> > Yahoo! Groups Links
> >
> >
> >
> >
> >
> >
> >





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Thu Nov 11 02:25:54 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: Antlr 3.0  spaces between tokens
References: <cmvaq6+p2p4@eGroups.com>
Message-ID: <000401c4c7d8$d3514ac0$0400a8c0@NOTEBOOK>


Yes I did something much the same

But what about a  SKIP  in the parser side?
I cannot see any conceptual problem providing it.

matthew

----- Original Message ----- 
From: "lgcraymer" <lgc@mail1.jpl.nasa.gov>
To: <antlr-interest@yahoogroups.com>
Sent: Thursday, November 11, 2004 8:19 PM
Subject: [antlr-interest] Re: Antlr 3.0 spaces between tokens


>
>
> Context-dependent lexing is a nasty problem.  ANTLR 3 probably won't
> solve it.  I ran into exactly the same problem in an expression
> grammar for spacecraft sequencing.  The cleanest approach I could come
> up with was to have a counter that was incremented by LBRACKET and
> decremented by RBRACKET.  If the counter was zero, then whitespace
> tokens were marked "SKIP"; if it was positive, then they were "WS" and
> recognized by the parser.  That helped simplify the grammar.
>
> --Loring
>
>
> --- In antlr-interest@yahoogroups.com, "matthew ford"
> <Matthew.Ford@f...> wrote:
> > That is what I am talking about
> > whitespace as a syntax feature and not just a token separator.
> > This is usually only in a small number of rules
> > One example I had was a math language where whitespace was significant
> > inside
> > [ ] when indexing matrices but elsewhere it was just a token separator.
> >
> > matthew
> >
> > ----- Original Message ----- 
> > From: "lgcraymer" <lgc@m...>
> > To: <antlr-interest@yahoogroups.com>
> > Sent: Thursday, November 11, 2004 6:13 PM
> > Subject: [antlr-interest] Re: Antlr 3.0 spaces between tokens
> >
> >
> > >
> > >
> > > As usual--you ignore whitespace during parsing.  Then when you need
> > > the whitespace around a token, you peek into the token stream around
> > > the point of interest.  It doesn't help if whitespace is really a
> > > syntax feature and not just a token separator.
> > >
> > > --Loring
> > >
> > >
> > > --- In antlr-interest@yahoogroups.com, "matthew ford"
> > > <Matthew.Ford@f...> wrote:
> > > > A bit too clever for me  how do you write the parser rules?
> > > > matthew
> > > >
> > > > ----- Original Message ----- 
> > > > From: "lgcraymer" <lgc@m...>
> > > > To: <antlr-interest@yahoogroups.com>
> > > > Sent: Thursday, November 11, 2004 5:51 PM
> > > > Subject: [antlr-interest] Re: Antlr 3.0 spaces between tokens
> > > >
> > > >
> > > > >
> > > > >
> > > > > The min/max of ASTMinMax gives you an index into the token stream.
> > > > > Look for neighboring whitespace tokens.  By carrying the token
> stream
> > > > > index around, you carry around references to associated
> whitespace.
> > > > > It's a rather clever trick for solving the whitespace tracking
> > > problem.
> > > > >
> > > > > --Loring
> > > > >
> > > > > --- In antlr-interest@yahoogroups.com, "matthew ford"
> > > > > <Matthew.Ford@f...> wrote:
> > > > > > Perhaps I am missing the point of the that article, but in
> my case I
> > > > > don't
> > > > > > what to just keep the whitespace for printing.
> > > > > >
> > > > > > For some (not all) parser rules,  whitespace is actually
> important
> > > > > for the
> > > > > > parsing.
> > > > > > So I want the parser to see all the whitespace for some
> rules and
> > > > > not others
> > > > > >
> > > > > > So what I want is the Token.SKIP option on the parser side
> instead
> > > > > of on the
> > > > > > lexer side and controlled on a rule basis.
> > > > > >
> > > > > > matthew
> > > > > >
> > > > > > ----- Original Message ----- 
> > > > > > From: "lgcraymer" <lgc@m...>
> > > > > > To: <antlr-interest@yahoogroups.com>
> > > > > > Sent: Thursday, November 11, 2004 5:32 PM
> > > > > > Subject: [antlr-interest] Re: Antlr 3.0 spaces between tokens
> > > > > >
> > > > > >
> > > > > > >
> > > > > > >
> > > > > > > Take a look at
> > > > > > >
> > > > > >
> > > > >
> > > >
> > >
> >
>
<http://www.antlr.org/article/preserving.token.order/preserving.token.order.
> > > > > > tml>
> > > > > > >
> > > > > > > It's hard to see how ANTLR 3 could do better.
> > > > > > >
> > > > > > > --Loring
> > > > > > >
> > > > > > > --- In antlr-interest@yahoogroups.com, "matthew ford"
> > > > > > > <Matthew.Ford@f...> wrote:
> > > > > > > > Hi Ter,
> > > > > > > >
> > > > > > > > Perhaps for Antlr 3.0 we can have a better means of handling
> > > white
> > > > > > > space.
> > > > > > > >
> > > > > > > > Antlr provides an ignore whitespace capability that is
> appealing
> > > > > > > > WS : ( ' ' | '\t' | '\n' { newline(); } | '\r' )+
> > > > > > > >      { $setType(Token.SKIP); }
> > > > > > > >    ;but every time I try and use it I come across a
> > > situation where
> > > > > > > I really
> > > > > > > > want/need the white space in the parser.
> > > > > > > >
> > > > > > > > So I end up having the lexer pass it back to the parser.
> > > > > > > > (or have switch in the lexer that the parser uses to
> control the
> > > > > > > return of
> > > > > > > > whitespace.  I know this is a no-no but it has worked for me
> > > in some
> > > > > > > cases)
> > > > > > > >
> > > > > > > > The parser usually only needs to know about the whitespace
> > > in a few
> > > > > > > rules
> > > > > > > > but now has
> > > > > > > > (WS)* all over the place to handle whitespace every where.
> > > > > > > >
> > > > > > > > Basically what I would like to have
> > > > > > > >  the lexer pass all the whitespace back to the parser)
> and then
> > > > > in the
> > > > > > > > parser be able to say
> > > > > > > > a) for this rule ignore white space.
> > > > > > > > or
> > > > > > > > b) for this rule whitespace is important
> > > > > > > >
> > > > > > > > Actually the second option is more likely.
> > > > > > > >
> > > > > > > > matthew
> > > > > > > >
> > > > > > > > ----- Original Message ----- 
> > > > > > > > From: "Monty Zukowski" <monty@c...>
> > > > > > > > To: <antlr-interest@yahoogroups.com>
> > > > > > > > Sent: Thursday, November 11, 2004 3:38 AM
> > > > > > > > Subject: Re: [antlr-interest] spaces between tokens
> > > > > > > >
> > > > > > > >
> > > > > > > > >
> > > > > > > > > On Nov 10, 2004, at 7:39 AM, Anakreon wrote:
> > > > > > > > >
> > > > > > > > > >
> > > > > > > > > > silverio.di@q... wrote:
> > > > > > > > > >>
> > > > > > > > > >>
> > > > > > > > > >>
> > > > > > > > > >>
> > > > > > > > > >> Hi,
> > > > > > > > > >> I've a big problem.
> > > > > > > > > >>
> > > > > > > > > >> In my grammar, how in many others, the whitespaces are
> > > > > skipped in
> > > > > > > > > >> lexer,
> > > > > > > > > >> but I've some circumstances in which I need to
> check that
> > > > > not any
> > > > > > > > > >> spaces
> > > > > > > > > >> are present between tokens.
> > > > > > > > > >>
> > > > > > > > > >> Example :
> > > > > > > > > >> WeekJobHour@Monday = 8
> > > > > > > > > >>
> > > > > > > > > >> would mean assign 8 (hours) to parameter Monday of
> > > structure
> > > > > > > > > >> WeekJobHour.
> > > > > > > > > >> I would like my lexer extract following tokens:
> > > > > > > > > >>
> > > > > > > > > >> IDENT ATSIGN IDENT
> > > > > > > > > >>
> > > > > > > > > >> but my problem is to check than not any WS are present
> > > between
> > > > > > > > > >> IDENT and ATSIGN and between ATSIGN and IDENT so
> > > > > > > > > >>
> > > > > > > > > >> WeekJobHour@Monday = 8        // is OK
> > > > > > > > > >> WeekJobHour @Monday = 8       // is BAD
> > > > > > > > > >> WeekJobHour@ Monday = 8       // is BAD
> > > > > > > > > >> WeekJobHour  @ Monday = 8           // is BAD too !
> > > > > > > > > >>
> > > > > > > > > >> I could use following lexer rule:
> > > > > > > > > >>
> > > > > > > > > >> STRUCT_PARAMETER
> > > > > > > > > >>       :     ('A'..'Z' | 'a..z')+
> > > > > > > > > >>             '@'
> > > > > > > > > >>             ('A'..'Z' | 'a..z')+
> > > > > > > > > >>       ;
> > > > > > > > > >>
> > > > > > > > > >> but in parser how can I extract the structure name
> > > > > (WeekJobHour)
> > > > > > > > > >> and the structure parameter (Monday) form
> STRUCT_PARAMETER
> > > > > > > > > >> token ?
> > > > > > > > > >>
> > > > > > > > > >> I think a similar issue is present in C/C++ structure
> > > construct
> > > > > > > > > >>
> > > > > > > > > >> Thank you for your suggestions about
> > > > > > > > > >> Silverio Diquigiovanni
> > > > > > > > > > Make a class wich implements TokenStream wich uses the
> > > Lexer.
> > > > > > > > > > In the nextToken method, if the lexer returns a token of
> > > type
> > > > > > > > > > STRUCT_PARAM, split the token in 3 tokens where the
> first
> > > > > would be
> > > > > > > > > > of type STRUCT_NAME the second STRUCT_AT and the third
> > > > > STRUCT_DAY
> > > > > > > > > > and the text of the tokens WeekJobHour, @, Monday
> > > respectively.
> > > > > > > > > > return the first token from the method and store the
> > > other 2.
> > > > > > > > > > In the next 2 calls of nextToken return the stored ones.
> > > > > > > > > >
> > > > > > > > > > Pass the implementor of TokenStream instead of your
> > > Lexer to the
> > > > > > > > > > parser.
> > > > > > > > > >
> > > > > > > > > > Anakreon
> > > > > > > > > >
> > > > > > > > >
> > > > > > > > > I agree with the above approach, and also read my
> ParserFilter
> > > > > > > paper on
> > > > > > > > > my website,
> http://www.codetransform.com/filterexample.html
> > > > > > > > >
> > > > > > > > > I would recommend an alternative approach, which would
> be to
> > > > > not skip
> > > > > > > > > whitespace in the lexer.  Instead, discard it in the
> parser
> > > > > filter.
> > > > > > > > > That filter can still check that no whitespace occurs
> before
> > > > > or after
> > > > > > > > > an @ between IDENTS.
> > > > > > > > >
> > > > > > > > > Alternately you could keep track of state in the
> lexer.  Set a
> > > > > boolean
> > > > > > > > > variable in the makeToken() method if the token made
> was WS.
> > > > > To see
> > > > > > > > > what is coming after, inspect LA(1).  Assuming @ is
> not used
> > > > > in any
> > > > > > > > > other way, you would have a rule similar to this, where
> > > > > > > > > previousWasWhitespace is the variable set in makeToken().
> > > > > > > > >
> > > > > > > > > AT: { !previousWasWhitespace && (LA(1)==' ' ||
> LA(1)=='\t') }?
> > > > > '@' ;
> > > > > > > > >
> > > > > > > > > Monty
> > > > > > > > >
> > > > > > > > > ANTLR & Java Consultant -- http://www.codetransform.com
> > > > > > > > > ANSI C/GCC transformation toolkit -- 
> > > > > > > > > http://www.codetransform.com/gcc.html
> > > > > > > > > Embrace the Decay --
> > > > > http://www.codetransform.com/EmbraceDecay.html
> > > > > > > > >
> > > > > > > > >
> > > > > > > > >
> > > > > > > > >
> > > > > > > > >
> > > > > > > > > Yahoo! Groups Links
> > > > > > > > >
> > > > > > > > >
> > > > > > > > >
> > > > > > > > >
> > > > > > > > >
> > > > > > > > >
> > > > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > > Yahoo! Groups Links
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > > Yahoo! Groups Links
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > >
> > >
> > >
> > >
> > >
> > >
> > > Yahoo! Groups Links
> > >
> > >
> > >
> > >
> > >
> > >
> > >
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From eddie_antlr at yahoo.co.uk  Thu Nov 11 03:13:16 2004
From: eddie_antlr at yahoo.co.uk (dsfsdf fdsfdsf)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Transforming Comments along with trees
In-Reply-To: <14996242-334A-11D9-88FC-000A95891192@cs.usfca.edu>
Message-ID: <20041111111316.92890.qmail@web25202.mail.ukl.yahoo.com>

ya i have seen the TokenStreamRewriteEngine doc on the website, i feel it would be a bit complicated to implement as the input could be huge, and it doesn't show how to handle comments, besides i'm not too comfortable with it.As for the latter question, after each pass i generate a new tree.
Should these passes automatically bring across the hidden tokens?
how? why not?
And how do i output these hidden tokens after all my transformations are complete?
thanks
ed 

Terence Parr <parrt@cs.usfca.edu> wrote:


On Nov 10, 2004, at 4:22 AM, dsfsdf fdsfdsf wrote:

> Hi
> I am building a parser that will convert a piece of t-slq to the 
> corresponding p-sql. I am using a TokenStreamHiddenTokenFilter to 
> ignore but preserve comments and builld up my source ast tree!
> I than plan to do maybe one or to pass transformations to the tree!
> However i am stuck on how to bring across my comments after each 
> transformations!
> I would greatly appreciate any ideas on how this can be done!

Hi. First, given the similarity of source / target languages, you 
might want to use TokenStreamRewriteEngine instead. have you seen that 
article on the site?

For the above, are you saying that the auto construction of trees in 
the tree walker doesn't carry along the hidden stream stuff?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!






Yahoo! Groups Links








		
---------------------------------
 ALL-NEW Yahoo! Messenger - all new features - even more fun!  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041111/804cfbd4/attachment.html
From Thomas.Aigner at bfd-r.bayern.de  Thu Nov 11 03:16:59 2004
From: Thomas.Aigner at bfd-r.bayern.de (Aigner Thomas)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] =?ISO-8859-1?Q?RE=3A_=C4antlr-interest=DC_Re=3A_Antlr_3=2E0__s?=
	=?ISO-8859-1?Q?paces_between_tokens?=
Message-ID: <0B549933579ED311B46C08000627919503C35229@B3ASRVN2>


Hi,
have you considered an TokenStreamFilter that discards the uninteresting
tokens?
It worked very well for me for an python like indentation scheme.

Thomas

> -----Original Message-----
> From: matthew ford [mailto:Matthew.Ford@forward.com.au] 
> Sent: Thursday, November 11, 2004 9:33 AM
> To: antlr-interest@yahoogroups.com
> Subject: Re: ?antlr-interest? Re: Antlr 3.0 spaces between tokens
> 
> 
> 
> That is what I am talking about
> whitespace as a syntax feature and not just a token separator.
> This is usually only in a small number of rules
> One example I had was a math language where whitespace was significant
> inside
> [ ] when indexing matrices but elsewhere it was just a token 
> separator.
> 
> matthew
> 
> ----- Original Message ----- 
> From: "lgcraymer" <lgc@mail1.jpl.nasa.gov>
> To: <antlr-interest@yahoogroups.com>
> Sent: Thursday, November 11, 2004 6:13 PM
> Subject: [antlr-interest] Re: Antlr 3.0 spaces between tokens
> 
> 
> >
> >
> > As usual--you ignore whitespace during parsing.  Then when you need
> > the whitespace around a token, you peek into the token stream around
> > the point of interest.  It doesn't help if whitespace is really a
> > syntax feature and not just a token separator.
> >
> > --Loring
> >
> >
> > --- In antlr-interest@yahoogroups.com, "matthew ford"
> > <Matthew.Ford@f...> wrote:
> > > A bit too clever for me  how do you write the parser rules?
> > > matthew
> > >
> > > ----- Original Message ----- 
> > > From: "lgcraymer" <lgc@m...>
> > > To: <antlr-interest@yahoogroups.com>
> > > Sent: Thursday, November 11, 2004 5:51 PM
> > > Subject: [antlr-interest] Re: Antlr 3.0 spaces between tokens
> > >
> > >
> > > >
> > > >
> > > > The min/max of ASTMinMax gives you an index into the 
> token stream.
> > > > Look for neighboring whitespace tokens.  By carrying 
> the token stream
> > > > index around, you carry around references to associated 
> whitespace.
> > > > It's a rather clever trick for solving the whitespace tracking
> > problem.
> > > >
> > > > --Loring
> > > >
> > > > --- In antlr-interest@yahoogroups.com, "matthew ford"
> > > > <Matthew.Ford@f...> wrote:
> > > > > Perhaps I am missing the point of the that article, 
> but in my case I
> > > > don't
> > > > > what to just keep the whitespace for printing.
> > > > >
> > > > > For some (not all) parser rules,  whitespace is 
> actually important
> > > > for the
> > > > > parsing.
> > > > > So I want the parser to see all the whitespace for 
> some rules and
> > > > not others
> > > > >
> > > > > So what I want is the Token.SKIP option on the parser 
> side instead
> > > > of on the
> > > > > lexer side and controlled on a rule basis.
> > > > >
> > > > > matthew
> > > > >
> > > > > ----- Original Message ----- 
> > > > > From: "lgcraymer" <lgc@m...>
> > > > > To: <antlr-interest@yahoogroups.com>
> > > > > Sent: Thursday, November 11, 2004 5:32 PM
> > > > > Subject: [antlr-interest] Re: Antlr 3.0 spaces between tokens
> > > > >
> > > > >
> > > > > >
> > > > > >
> > > > > > Take a look at
> > > > > >
> > > > >
> > > >
> > >
> >
> <http://www.antlr.org/article/preserving.token.order/preservin
> g.token.order.
> > > > > tml>
> > > > > >
> > > > > > It's hard to see how ANTLR 3 could do better.
> > > > > >
> > > > > > --Loring
> > > > > >
> > > > > > --- In antlr-interest@yahoogroups.com, "matthew ford"
> > > > > > <Matthew.Ford@f...> wrote:
> > > > > > > Hi Ter,
> > > > > > >
> > > > > > > Perhaps for Antlr 3.0 we can have a better means 
> of handling
> > white
> > > > > > space.
> > > > > > >
> > > > > > > Antlr provides an ignore whitespace capability 
> that is appealing
> > > > > > > WS : ( ' ' | '\t' | '\n' { newline(); } | '\r' )+
> > > > > > >      { $setType(Token.SKIP); }
> > > > > > >    ;but every time I try and use it I come across a
> > situation where
> > > > > > I really
> > > > > > > want/need the white space in the parser.
> > > > > > >
> > > > > > > So I end up having the lexer pass it back to the parser.
> > > > > > > (or have switch in the lexer that the parser uses 
> to control the
> > > > > > return of
> > > > > > > whitespace.  I know this is a no-no but it has 
> worked for me
> > in some
> > > > > > cases)
> > > > > > >
> > > > > > > The parser usually only needs to know about the whitespace
> > in a few
> > > > > > rules
> > > > > > > but now has
> > > > > > > (WS)* all over the place to handle whitespace every where.
> > > > > > >
> > > > > > > Basically what I would like to have
> > > > > > >  the lexer pass all the whitespace back to the 
> parser) and then
> > > > in the
> > > > > > > parser be able to say
> > > > > > > a) for this rule ignore white space.
> > > > > > > or
> > > > > > > b) for this rule whitespace is important
> > > > > > >
> > > > > > > Actually the second option is more likely.
> > > > > > >
> > > > > > > matthew
> > > > > > >
> > > > > > > ----- Original Message ----- 
> > > > > > > From: "Monty Zukowski" <monty@c...>
> > > > > > > To: <antlr-interest@yahoogroups.com>
> > > > > > > Sent: Thursday, November 11, 2004 3:38 AM
> > > > > > > Subject: Re: [antlr-interest] spaces between tokens
> > > > > > >
> > > > > > >
> > > > > > > >
> > > > > > > > On Nov 10, 2004, at 7:39 AM, Anakreon wrote:
> > > > > > > >
> > > > > > > > >
> > > > > > > > > silverio.di@q... wrote:
> > > > > > > > >>
> > > > > > > > >>
> > > > > > > > >>
> > > > > > > > >>
> > > > > > > > >> Hi,
> > > > > > > > >> I've a big problem.
> > > > > > > > >>
> > > > > > > > >> In my grammar, how in many others, the 
> whitespaces are
> > > > skipped in
> > > > > > > > >> lexer,
> > > > > > > > >> but I've some circumstances in which I need 
> to check that
> > > > not any
> > > > > > > > >> spaces
> > > > > > > > >> are present between tokens.
> > > > > > > > >>
> > > > > > > > >> Example :
> > > > > > > > >> WeekJobHour@Monday = 8
> > > > > > > > >>
> > > > > > > > >> would mean assign 8 (hours) to parameter Monday of
> > structure
> > > > > > > > >> WeekJobHour.
> > > > > > > > >> I would like my lexer extract following tokens:
> > > > > > > > >>
> > > > > > > > >> IDENT ATSIGN IDENT
> > > > > > > > >>
> > > > > > > > >> but my problem is to check than not any WS 
> are present
> > between
> > > > > > > > >> IDENT and ATSIGN and between ATSIGN and IDENT so
> > > > > > > > >>
> > > > > > > > >> WeekJobHour@Monday = 8        // is OK
> > > > > > > > >> WeekJobHour @Monday = 8       // is BAD
> > > > > > > > >> WeekJobHour@ Monday = 8       // is BAD
> > > > > > > > >> WeekJobHour  @ Monday = 8           // is BAD too !
> > > > > > > > >>
> > > > > > > > >> I could use following lexer rule:
> > > > > > > > >>
> > > > > > > > >> STRUCT_PARAMETER
> > > > > > > > >>       :     ('A'..'Z' | 'a..z')+
> > > > > > > > >>             '@'
> > > > > > > > >>             ('A'..'Z' | 'a..z')+
> > > > > > > > >>       ;
> > > > > > > > >>
> > > > > > > > >> but in parser how can I extract the structure name
> > > > (WeekJobHour)
> > > > > > > > >> and the structure parameter (Monday) form 
> STRUCT_PARAMETER
> > > > > > > > >> token ?
> > > > > > > > >>
> > > > > > > > >> I think a similar issue is present in C/C++ structure
> > construct
> > > > > > > > >>
> > > > > > > > >> Thank you for your suggestions about
> > > > > > > > >> Silverio Diquigiovanni
> > > > > > > > > Make a class wich implements TokenStream wich uses the
> > Lexer.
> > > > > > > > > In the nextToken method, if the lexer returns 
> a token of
> > type
> > > > > > > > > STRUCT_PARAM, split the token in 3 tokens 
> where the first
> > > > would be
> > > > > > > > > of type STRUCT_NAME the second STRUCT_AT and the third
> > > > STRUCT_DAY
> > > > > > > > > and the text of the tokens WeekJobHour, @, Monday
> > respectively.
> > > > > > > > > return the first token from the method and store the
> > other 2.
> > > > > > > > > In the next 2 calls of nextToken return the 
> stored ones.
> > > > > > > > >
> > > > > > > > > Pass the implementor of TokenStream instead of your
> > Lexer to the
> > > > > > > > > parser.
> > > > > > > > >
> > > > > > > > > Anakreon
> > > > > > > > >
> > > > > > > >
> > > > > > > > I agree with the above approach, and also read 
> my ParserFilter
> > > > > > paper on
> > > > > > > > my website, 
> http://www.codetransform.com/filterexample.html
> > > > > > > >
> > > > > > > > I would recommend an alternative approach, 
> which would be to
> > > > not skip
> > > > > > > > whitespace in the lexer.  Instead, discard it 
> in the parser
> > > > filter.
> > > > > > > > That filter can still check that no whitespace 
> occurs before
> > > > or after
> > > > > > > > an @ between IDENTS.
> > > > > > > >
> > > > > > > > Alternately you could keep track of state in 
> the lexer.  Set a
> > > > boolean
> > > > > > > > variable in the makeToken() method if the token 
> made was WS.
> > > > To see
> > > > > > > > what is coming after, inspect LA(1).  Assuming 
> @ is not used
> > > > in any
> > > > > > > > other way, you would have a rule similar to this, where
> > > > > > > > previousWasWhitespace is the variable set in 
> makeToken().
> > > > > > > >
> > > > > > > > AT: { !previousWasWhitespace && (LA(1)==' ' || 
> LA(1)=='\t') }?
> > > > '@' ;
> > > > > > > >
> > > > > > > > Monty
> > > > > > > >
> > > > > > > > ANTLR & Java Consultant -- http://www.codetransform.com
> > > > > > > > ANSI C/GCC transformation toolkit -- 
> > > > > > > > http://www.codetransform.com/gcc.html
> > > > > > > > Embrace the Decay --
> > > > http://www.codetransform.com/EmbraceDecay.html
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > > Yahoo! Groups Links
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > > Yahoo! Groups Links
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > > Yahoo! Groups Links
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> >
> >
> >
> >
> >
> >
> > Yahoo! Groups Links
> >
> >
> >
> >
> >
> >
> >
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
> 
>  
> 
> 
> 


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lubos.vnuk at rts.at  Thu Nov 11 03:45:48 2004
From: lubos.vnuk at rts.at (Lubos Vnuk)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: "protected" lexer rules
In-Reply-To: <16786.14337.341116.338708@despot.non.net>
Message-ID: <cmvjdc+eu6k@eGroups.com>



> Sure it can and that's the whole point...
> "sub" is a very ambiguous qualifier.
Alright, point taken. I have checked with the Meriam-Webster Online 
dictionary and it is rather ambiguous on "sub-"
http://www.m-w.com/cgi-bin/dictionary?book=Dictionary&va=sub


But as Terence wrote in another post he would go for "fragment" in 
ANTLR3, don't you think that "fragment" has, based on your objection 
that "subtoken" might mean a part of a rule, the same problem?

Cheers,
Lubos.





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Anthony.Youngman at ECA-International.com  Thu Nov 11 05:48:18 2004
From: Anthony.Youngman at ECA-International.com (Anthony Youngman)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] structure parameter access
Message-ID: <C7FE35004D40FD45AA342991B88CE40409B077@lnml1.eca-international.local>


I think this is another example of why a filter between lexer and parser
is a good idea.

If it's white-space-aware, it can simply look for IDENT POINT IDENT, and
redefine POINT as STRUCT_SEPARATOR or something.

Cheers,
Wol 

-----Original Message-----
From: Alexey Demakov [mailto:demakov@ispras.ru] 
Sent: 09 November 2004 11:41
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] structure parameter access


From: <silverio.di@qem.it>
> I've a problem with a simple language which have
> some grammar likeness to C/C++ & Java.
> 
> I've tried to read the C & Java grammars on ANTLR
> web page but I isn't been able to uderstand how they
> solve my question.
> 
> My language say that:
> 
> a) struct_name.struct_parameter
> 
> How you can see (a) is likeness to c statement.
> My throuble is that in between struct_name and '.' I can't
> admit spaces chars and between '.' and struct_parameter
> I can't admit spaces chars too. I think this is same behaviour
> required to a C/C++ program.
> 
> But I don't understand how to obtain that starting from:
> 
> statement : label | struct_assign;
> label : LABEL EOL;
> struct_assign : IDENT POINT IDENT ASSIGN IDENT EOL;
> 
> WS : (' ' | '\t' | '\f') { $setType(Token.SKIP); };
> EOL : ("\r\n" | '\r' | '\n'   ) { newline(); };
> POINT : '.';
> IDENT : ('a'..'z')+;
> 
> Thank you very much for your suggestions...
> Silverio Diquigiovanni

Because parser doesn't know about skipped tokens the only way to
skip WS and forbid WS near POINT - is to handle
struct_name.struct_parameter
as single token in lexer.
Another idea - the only idea - is to track WS while skipping and
decorate
POINT token by flag indicating that there was WS just before or after.
You can check it in parser rule and print error message.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com




 
Yahoo! Groups Links



 





****************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 8272 5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

****************************************************************************



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Thu Nov 11 08:00:17 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: Antlr 3.0  spaces between tokens
In-Reply-To: <000401c4c7d8$d3514ac0$0400a8c0@NOTEBOOK>
References: <cmvaq6+p2p4@eGroups.com> <000401c4c7d8$d3514ac0$0400a8c0@NOTEBOOK>
Message-ID: <C7C1264B-33FA-11D9-B52C-000393BB647E@cs.usfca.edu>



On Nov 11, 2004, at 2:25 AM, matthew ford wrote:

>
> Yes I did something much the same
>
> But what about a  SKIP  in the parser side?
> I cannot see any conceptual problem providing it.

None.  Mitchell yelled at me until I put it in.  Already working great.  
  new mechanism has all tokens coming to parser.  you can set channel  
via simple action in lexer.  Parser tunes to whatever channel it wants.  
  All tokens are always available and all char are always available in  
new scheme.  You can implement your own less-buffered stuff if you're  
reading 30G of data.  The default system will be very nice.  Default  
token match creates a token object, but does not char copy nor string  
alloc; just records start/stop index into char stream.  Trees will just  
point at a token; no copy there either. :)

Anyway, I'm off to Montreal to meet with Etienne Gagnon the SableCC  
guy; giving a talk tomorrow.  Racing off to the airport in a few  
minutes so I'm afraid I won't be able to contribute much until I get  
back on Sunday.  Damn, this discussion and the one on trees is getting  
interesting!  You can be sure I'll be figuring out his tree visitor  
generation stuff (like TreeDL?).

Woohoo!

Ter

>
> matthew
>
> ----- Original Message -----
> From: "lgcraymer" <lgc@mail1.jpl.nasa.gov>
> To: <antlr-interest@yahoogroups.com>
> Sent: Thursday, November 11, 2004 8:19 PM
> Subject: [antlr-interest] Re: Antlr 3.0 spaces between tokens
>
>
>>
>>
>> Context-dependent lexing is a nasty problem.  ANTLR 3 probably won't
>> solve it.  I ran into exactly the same problem in an expression
>> grammar for spacecraft sequencing.  The cleanest approach I could come
>> up with was to have a counter that was incremented by LBRACKET and
>> decremented by RBRACKET.  If the counter was zero, then whitespace
>> tokens were marked "SKIP"; if it was positive, then they were "WS" and
>> recognized by the parser.  That helped simplify the grammar.
>>
>> --Loring
>>
>>
>> --- In antlr-interest@yahoogroups.com, "matthew ford"
>> <Matthew.Ford@f...> wrote:
>>> That is what I am talking about
>>> whitespace as a syntax feature and not just a token separator.
>>> This is usually only in a small number of rules
>>> One example I had was a math language where whitespace was  
>>> significant
>>> inside
>>> [ ] when indexing matrices but elsewhere it was just a token  
>>> separator.
>>>
>>> matthew
>>>
>>> ----- Original Message -----
>>> From: "lgcraymer" <lgc@m...>
>>> To: <antlr-interest@yahoogroups.com>
>>> Sent: Thursday, November 11, 2004 6:13 PM
>>> Subject: [antlr-interest] Re: Antlr 3.0 spaces between tokens
>>>
>>>
>>>>
>>>>
>>>> As usual--you ignore whitespace during parsing.  Then when you need
>>>> the whitespace around a token, you peek into the token stream around
>>>> the point of interest.  It doesn't help if whitespace is really a
>>>> syntax feature and not just a token separator.
>>>>
>>>> --Loring
>>>>
>>>>
>>>> --- In antlr-interest@yahoogroups.com, "matthew ford"
>>>> <Matthew.Ford@f...> wrote:
>>>>> A bit too clever for me  how do you write the parser rules?
>>>>> matthew
>>>>>
>>>>> ----- Original Message -----
>>>>> From: "lgcraymer" <lgc@m...>
>>>>> To: <antlr-interest@yahoogroups.com>
>>>>> Sent: Thursday, November 11, 2004 5:51 PM
>>>>> Subject: [antlr-interest] Re: Antlr 3.0 spaces between tokens
>>>>>
>>>>>
>>>>>>
>>>>>>
>>>>>> The min/max of ASTMinMax gives you an index into the token stream.
>>>>>> Look for neighboring whitespace tokens.  By carrying the token
>> stream
>>>>>> index around, you carry around references to associated
>> whitespace.
>>>>>> It's a rather clever trick for solving the whitespace tracking
>>>> problem.
>>>>>>
>>>>>> --Loring
>>>>>>
>>>>>> --- In antlr-interest@yahoogroups.com, "matthew ford"
>>>>>> <Matthew.Ford@f...> wrote:
>>>>>>> Perhaps I am missing the point of the that article, but in
>> my case I
>>>>>> don't
>>>>>>> what to just keep the whitespace for printing.
>>>>>>>
>>>>>>> For some (not all) parser rules,  whitespace is actually
>> important
>>>>>> for the
>>>>>>> parsing.
>>>>>>> So I want the parser to see all the whitespace for some
>> rules and
>>>>>> not others
>>>>>>>
>>>>>>> So what I want is the Token.SKIP option on the parser side
>> instead
>>>>>> of on the
>>>>>>> lexer side and controlled on a rule basis.
>>>>>>>
>>>>>>> matthew
>>>>>>>
>>>>>>> ----- Original Message -----
>>>>>>> From: "lgcraymer" <lgc@m...>
>>>>>>> To: <antlr-interest@yahoogroups.com>
>>>>>>> Sent: Thursday, November 11, 2004 5:32 PM
>>>>>>> Subject: [antlr-interest] Re: Antlr 3.0 spaces between tokens
>>>>>>>
>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> Take a look at
>>>>>>>>
>>>>>>>
>>>>>>
>>>>>
>>>>
>>>
>>
> <http://www.antlr.org/article/preserving.token.order/ 
> preserving.token.order.
>>>>>>> tml>
>>>>>>>>
>>>>>>>> It's hard to see how ANTLR 3 could do better.
>>>>>>>>
>>>>>>>> --Loring
>>>>>>>>
>>>>>>>> --- In antlr-interest@yahoogroups.com, "matthew ford"
>>>>>>>> <Matthew.Ford@f...> wrote:
>>>>>>>>> Hi Ter,
>>>>>>>>>
>>>>>>>>> Perhaps for Antlr 3.0 we can have a better means of handling
>>>> white
>>>>>>>> space.
>>>>>>>>>
>>>>>>>>> Antlr provides an ignore whitespace capability that is
>> appealing
>>>>>>>>> WS : ( ' ' | '\t' | '\n' { newline(); } | '\r' )+
>>>>>>>>>      { $setType(Token.SKIP); }
>>>>>>>>>    ;but every time I try and use it I come across a
>>>> situation where
>>>>>>>> I really
>>>>>>>>> want/need the white space in the parser.
>>>>>>>>>
>>>>>>>>> So I end up having the lexer pass it back to the parser.
>>>>>>>>> (or have switch in the lexer that the parser uses to
>> control the
>>>>>>>> return of
>>>>>>>>> whitespace.  I know this is a no-no but it has worked for me
>>>> in some
>>>>>>>> cases)
>>>>>>>>>
>>>>>>>>> The parser usually only needs to know about the whitespace
>>>> in a few
>>>>>>>> rules
>>>>>>>>> but now has
>>>>>>>>> (WS)* all over the place to handle whitespace every where.
>>>>>>>>>
>>>>>>>>> Basically what I would like to have
>>>>>>>>>  the lexer pass all the whitespace back to the parser)
>> and then
>>>>>> in the
>>>>>>>>> parser be able to say
>>>>>>>>> a) for this rule ignore white space.
>>>>>>>>> or
>>>>>>>>> b) for this rule whitespace is important
>>>>>>>>>
>>>>>>>>> Actually the second option is more likely.
>>>>>>>>>
>>>>>>>>> matthew
>>>>>>>>>
>>>>>>>>> ----- Original Message -----
>>>>>>>>> From: "Monty Zukowski" <monty@c...>
>>>>>>>>> To: <antlr-interest@yahoogroups.com>
>>>>>>>>> Sent: Thursday, November 11, 2004 3:38 AM
>>>>>>>>> Subject: Re: [antlr-interest] spaces between tokens
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> On Nov 10, 2004, at 7:39 AM, Anakreon wrote:
>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> silverio.di@q... wrote:
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> Hi,
>>>>>>>>>>>> I've a big problem.
>>>>>>>>>>>>
>>>>>>>>>>>> In my grammar, how in many others, the whitespaces are
>>>>>> skipped in
>>>>>>>>>>>> lexer,
>>>>>>>>>>>> but I've some circumstances in which I need to
>> check that
>>>>>> not any
>>>>>>>>>>>> spaces
>>>>>>>>>>>> are present between tokens.
>>>>>>>>>>>>
>>>>>>>>>>>> Example :
>>>>>>>>>>>> WeekJobHour@Monday = 8
>>>>>>>>>>>>
>>>>>>>>>>>> would mean assign 8 (hours) to parameter Monday of
>>>> structure
>>>>>>>>>>>> WeekJobHour.
>>>>>>>>>>>> I would like my lexer extract following tokens:
>>>>>>>>>>>>
>>>>>>>>>>>> IDENT ATSIGN IDENT
>>>>>>>>>>>>
>>>>>>>>>>>> but my problem is to check than not any WS are present
>>>> between
>>>>>>>>>>>> IDENT and ATSIGN and between ATSIGN and IDENT so
>>>>>>>>>>>>
>>>>>>>>>>>> WeekJobHour@Monday = 8        // is OK
>>>>>>>>>>>> WeekJobHour @Monday = 8       // is BAD
>>>>>>>>>>>> WeekJobHour@ Monday = 8       // is BAD
>>>>>>>>>>>> WeekJobHour  @ Monday = 8           // is BAD too !
>>>>>>>>>>>>
>>>>>>>>>>>> I could use following lexer rule:
>>>>>>>>>>>>
>>>>>>>>>>>> STRUCT_PARAMETER
>>>>>>>>>>>>       :     ('A'..'Z' | 'a..z')+
>>>>>>>>>>>>             '@'
>>>>>>>>>>>>             ('A'..'Z' | 'a..z')+
>>>>>>>>>>>>       ;
>>>>>>>>>>>>
>>>>>>>>>>>> but in parser how can I extract the structure name
>>>>>> (WeekJobHour)
>>>>>>>>>>>> and the structure parameter (Monday) form
>> STRUCT_PARAMETER
>>>>>>>>>>>> token ?
>>>>>>>>>>>>
>>>>>>>>>>>> I think a similar issue is present in C/C++ structure
>>>> construct
>>>>>>>>>>>>
>>>>>>>>>>>> Thank you for your suggestions about
>>>>>>>>>>>> Silverio Diquigiovanni
>>>>>>>>>>> Make a class wich implements TokenStream wich uses the
>>>> Lexer.
>>>>>>>>>>> In the nextToken method, if the lexer returns a token of
>>>> type
>>>>>>>>>>> STRUCT_PARAM, split the token in 3 tokens where the
>> first
>>>>>> would be
>>>>>>>>>>> of type STRUCT_NAME the second STRUCT_AT and the third
>>>>>> STRUCT_DAY
>>>>>>>>>>> and the text of the tokens WeekJobHour, @, Monday
>>>> respectively.
>>>>>>>>>>> return the first token from the method and store the
>>>> other 2.
>>>>>>>>>>> In the next 2 calls of nextToken return the stored ones.
>>>>>>>>>>>
>>>>>>>>>>> Pass the implementor of TokenStream instead of your
>>>> Lexer to the
>>>>>>>>>>> parser.
>>>>>>>>>>>
>>>>>>>>>>> Anakreon
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> I agree with the above approach, and also read my
>> ParserFilter
>>>>>>>> paper on
>>>>>>>>>> my website,
>> http://www.codetransform.com/filterexample.html
>>>>>>>>>>
>>>>>>>>>> I would recommend an alternative approach, which would
>> be to
>>>>>> not skip
>>>>>>>>>> whitespace in the lexer.  Instead, discard it in the
>> parser
>>>>>> filter.
>>>>>>>>>> That filter can still check that no whitespace occurs
>> before
>>>>>> or after
>>>>>>>>>> an @ between IDENTS.
>>>>>>>>>>
>>>>>>>>>> Alternately you could keep track of state in the
>> lexer.  Set a
>>>>>> boolean
>>>>>>>>>> variable in the makeToken() method if the token made
>> was WS.
>>>>>> To see
>>>>>>>>>> what is coming after, inspect LA(1).  Assuming @ is
>> not used
>>>>>> in any
>>>>>>>>>> other way, you would have a rule similar to this, where
>>>>>>>>>> previousWasWhitespace is the variable set in makeToken().
>>>>>>>>>>
>>>>>>>>>> AT: { !previousWasWhitespace && (LA(1)==' ' ||
>> LA(1)=='\t') }?
>>>>>> '@' ;
>>>>>>>>>>
>>>>>>>>>> Monty
>>>>>>>>>>
>>>>>>>>>> ANTLR & Java Consultant -- http://www.codetransform.com
>>>>>>>>>> ANSI C/GCC transformation toolkit --
>>>>>>>>>> http://www.codetransform.com/gcc.html
>>>>>>>>>> Embrace the Decay --
>>>>>> http://www.codetransform.com/EmbraceDecay.html
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> Yahoo! Groups Links
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> Yahoo! Groups Links
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> Yahoo! Groups Links
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> Yahoo! Groups Links
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>
>>
>>
>>
>>
>>
>> Yahoo! Groups Links
>>
>>
>>
>>
>>
>>
>>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Thu Nov 11 08:02:32 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Transforming Comments along with trees
In-Reply-To: <20041111111316.92890.qmail@web25202.mail.ukl.yahoo.com>
References: <20041111111316.92890.qmail@web25202.mail.ukl.yahoo.com>
Message-ID: <18BC7064-33FB-11D9-B52C-000393BB647E@cs.usfca.edu>



On Nov 11, 2004, at 3:13 AM, dsfsdf fdsfdsf wrote:

> ya i have seen the TokenStreamRewriteEngine doc on the website, i feel 
> it would be a bit complicated to implement as the input could be huge,

Bigger than virtual memory? ;)

>  and it doesn't show how to handle comments,

They just work.  You get the whole stream of tokens but the parser 
ignores comments.  You do cut/paste operations to the buffer then say 
toString() and it comes back out with you rewrites.  no fuss, no muss!

>  besides i'm not too comfortable with it.

why not?

> As for the latter question, after each pass i generate a new tree.
> Should these passes automatically bring across the hidden tokens?
> how? why not?

If you're doing tree rewrites, then yes, they have to come along.  The 
tree input->output thing should copy that stuff automatically I think.

> And how do i output these hidden tokens after all my transformations 
> are complete?

Do a tree walk and spit them out as you spit the other stuff out.

Ter

> thanks
> ed?
>
> Terence Parr <parrt@cs.usfca.edu> wrote:
>
>
> On Nov 10, 2004, at 4:22 AM, dsfsdf fdsfdsf wrote:
>
> > Hi
> > I am building a parser that will convert a piece of t-slq to the
>  > corresponding p-sql. I am using a TokenStreamHiddenTokenFilter to
> > ignore but preserve comments and builld up my source ast tree!
> > I than plan to do maybe one or to pass transformations to the tree!
> > However i am stuck on how to bring across my comments after each
>  > transformations!
> > I would greatly appreciate any ideas on how this can be done!
>
> Hi. First, given the similarity of source / target languages, you
>  might want to use TokenStreamRewriteEngine instead. have you seen that
>  article on the site?
>
> For the above, are you saying that the auto construction of trees in
> the tree walker doesn't carry along the hidden stream stuff?
>
> Ter
> --
> CS Professor &am p; Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>
>
> ALL-NEW Yahoo! Messenger - all new features - even more fun!
>
>  Yahoo! Groups Links
>
> 	? 	To visit your group on the web, go to:
> http://groups.yahoo.com/group/antlr-interest/
> ?
> 	? 	 To unsubscribe from this group, send an email to:
> antlr-interest-unsubscribe@yahoogroups.com
> ?
> 	? 	 Your use of Yahoo! Groups is subject to the Yahoo! Terms of 
> Service.
>
>  




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From dcaton at shorelinesoftware.com  Thu Nov 11 08:19:55 2004
From: dcaton at shorelinesoftware.com (Don Caton)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Determining context in lexer?
In-Reply-To: <FCDAF93D-3337-11D9-AF28-000393B5606C@codetransform.com>
Message-ID: <1100189842.14625@mx9.mysite4now.com>


Monty:

Thanks - your's was the simplest suggestion and it works great.  Thanks to
the others who also offered suggestions.

Regards,
 
Don Caton
Shoreline Software, Inc.
 

> You can override makeToken() to store the token type of the 
> last token 
> returned (maybe you want to not set it if it was whitespace?  will 
> depend on your application.
> 
> So keep that as an instance variable and then check with your 
> semantic 
> predicate.
> 
> Monty




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Thu Nov 11 08:37:52 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: trees with payloads??
In-Reply-To: <cmv6us+5mld@eGroups.com>
Message-ID: <cn04h0+m3di@eGroups.com>



--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> 
> > ArrayLists-type objects on the other hand don't have to waste space.
> > They become one pointer to the ArrayList which holds a size field and
> > an array with [approx] one pointer per child. The vtable is per class
> > not per instance.
> 
> Each object has a pointer to the vtable.

Didn't I say that?. Oh, I see I didn't.

> > For leaf nodes (where right == down == null) - one pointer is saved
> > since only one is needed for the ArrayList pointer (which would be
> > null too).
> > 
> > For internal non-leaf nodes - if the ArrayList is of the exact size
> > needed, only the ArrayList's size field is extra.
> 
> Not true--there are hidden fields:  pointer to vtable (vtable
> reference), size of allocated memory (larger than the object) or
> pointer to following memory, and size of object.  There may also be a
> reference counter or other fields for garbage collection (depends on
> the GC algorithm).

Per-object space overhead is typically about 8-16 bytes (C++ may be
lower). To that we add the two size fields and a pointer to the
buffer/array - another 12 bytes. About 5-6 pointers in all.

It seems the sweet spot for arrays are nodes with about 6+ edge-node
children.

> > Aren't there always more leaf nodes?
> 
> Yes, but not all leaf nodes have only null pointers (I'll call them
> edge nodes).  The edge nodes are a fraction of the total.

If they are a small enough fraction, arrays would likely use a little
more memory per node on average. Don't the pluses - iteration, direct
N-th child access etc - outweigh this cost?

> > >  This is offset by a savings
> > >  for terminal (right == down == null) nodes, but that does not help
> > > much with memory usage.  Arrays are memory hogs.
> > 
> > Fixed-length ones would usually be. Not convinced this holds for
> > ArrayLists.
> 
> I should also point out that memory is allocated in "chunks" to avoid
> fragmentation.

<SNIP>

> 64 or 128 bytes is not unusual
> for C/C++; Java and C# would be somewhat similar.

Not so important for GC'ed languages.

> > I can grok Token objects with Carrier objects as payload. Carrier is
> > passed unchanged to AST objects.
> 
> Conceptual block!  AST = Token = Carrier with Payload.

Mistyping block ;-). I meant Token with payload, payload pointer
copied to AST.

> > But Token objects and AST objects replaced by Carrier objects?. There
> > isn't a one-to-one match between Token objects and AST objects in many
> >  cases. How does the unified Carrier concept deal with this?
> 
> Not all Tokens become ASTs, and some ASTs are user-created.  However,
> all non-user-created ASTs have corresponding Tokens.  You gain
> performance efficiency by using Carriers with Payloads for Tokens and
> then reusing them as ASTs.

Aha!. Hey, I just had an "Aha!" moment. Coupled with an efficient
recyling scheme, this might just do away with Token objects as I
wanted (assuming there is a need to build an AST). The only downside
is that the AST is forced to be homogenous. That is a biggie - I'm
uneasy about this because heterogenous nodes still lets me party
[neatly] with those pesky Visitors.

Incidentally, I see some payloads being ignored/lost since not all
Token==>AST. Seems they could do with recycling too.

> True, but a 100KB or even 100 MB memory-mapped file is not a big
> expense--the OS virtual memory management takes care of that.  If you
> only keep a few strings, then you only keep a few blocks of the file
> memory-resident.  On the other hand, 20,000 string copies and creates
> (5 chars per word, which is probably an overestimate) is a performance
> hit.

Well, most systems have rather more than one file and, the original
strings are likely to be spread out all over the files (more VM pages
and paging). Keeping then around memory-mapped is a massive overhead
even with ultra-efficient OS VM management. Copying unique strings to
an in-memory buffer (and discarding the files) is likely to be more
performant.

Cheers,

Micheal
ANTLR/C#





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Thu Nov 11 08:40:45 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: "protected" lexer rules
In-Reply-To: <cmvjdc+eu6k@eGroups.com>
References: <16786.14337.341116.338708@despot.non.net>
	<cmvjdc+eu6k@eGroups.com>
Message-ID: <16787.38413.684174.612126@despot.non.net>


>>>>> "Lubos" == Lubos Vnuk <lubos.vnuk@rts.at> writes:
[...]
> Alright, point taken. I have checked with the Meriam-Webster Online
> dictionary and it is rather ambiguous on "sub-"
> http://www.m-w.com/cgi-bin/dictionary?book=Dictionary&va=sub

> But as Terence wrote in another post he would go for "fragment" in
> ANTLR3, don't you think that "fragment" has, based on your objection that
> "subtoken" might mean a part of a rule, the same problem?

Yes, as you and Loring have mentioned, there are various connotations of
the word "fragment" that aren't helpful.  That's why "shorthand" is still,
IMHO, the best word.

However, fragment is different enough from the usual lingo and clear enough
for this particular usage that using it for this case doesn't seem to cause
any significant confusion.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Thu Nov 11 08:52:16 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: Antlr 3.0  spaces between tokens
In-Reply-To: <001001c4c7b5$708ddd90$0400a8c0@NOTEBOOK>
References: <OF983F0A08.CC2464E0-ONC1256F48.00337898-C1256F48.003577D4@qem.it>
	<41923643.6040505@yahoo.gr>
	<F6D624AE-3336-11D9-AF28-000393B5606C@codetransform.com>
	<001001c4c7b5$708ddd90$0400a8c0@NOTEBOOK>
Message-ID: <16787.39104.454664.236993@despot.non.net>


>>>>> "matthew" == matthew ford <Matthew.Ford@forward.com.au> writes:
[...]

> Perhaps for Antlr 3.0 we can have a better means of handling white space.

Did you read Ter's blog entry on lexing from last Sunday?

> Antlr provides an ignore whitespace capability that is appealing WS : ( '
> ' | '\t' | '\n' { newline(); } | '\r' )+ { $setType(Token.SKIP); } ;but
> every time I try and use it I come across a situation where I really
> want/need the white space in the parser.

> So I end up having the lexer pass it back to the parser.  (or have switch
> in the lexer that the parser uses to control the return of whitespace.  I
> know this is a no-no but it has worked for me in some cases)

> The parser usually only needs to know about the whitespace in a few rules
> but now has (WS)* all over the place to handle whitespace every where.

> Basically what I would like to have the lexer pass all the whitespace
> back to the parser) and then in the parser be able to say a) for this
> rule ignore white space.  or b) for this rule whitespace is important

In fact, the v3 lexer will pass on everything that's not explicitly elided
by the user-specified filter rule.

In the lexer, you can assign different tokens to different "channels".

In the parser, you set a default set of channels to pay attention to.

Ter's blog is unclear on this point but the basic idea is that there'll be
some syntax in the parser so that you can have specific parser rules pay
attention to more/less/different channels than the default set.  This will
handle cases like you mention where WS is significant in certain rules and
ignored everywhere else.

Hope this helps,
		John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Thu Nov 11 09:00:59 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: Antlr 3.0  spaces between tokens
In-Reply-To: <C7C1264B-33FA-11D9-B52C-000393BB647E@cs.usfca.edu>
References: <cmvaq6+p2p4@eGroups.com>
	<000401c4c7d8$d3514ac0$0400a8c0@NOTEBOOK>
	<C7C1264B-33FA-11D9-B52C-000393BB647E@cs.usfca.edu>
Message-ID: <16787.39627.294226.797344@despot.non.net>


>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
>>>>>> On Nov 11, 2004, at 2:25 AM, matthew ford writes:
[...]

>> But what about a SKIP in the parser side?  I cannot see any conceptual
>> problem providing it.

> None.  Mitchell yelled at me until I put it in.

Hey! I was NOT yelling!!!  I was merely being ruthless.  :-?

Now, when it comes to doing the new tree stuff, I'm breaking out the
baseball bat.  :-)

Have fun,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Thu Nov 11 09:07:44 2004
From: johnm-antlr at non.net ('Netiquette Nanny)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Administrivia (was: trees with payloads??)
In-Reply-To: <cmu7sq+l13d@eGroups.com>
References: <16786.37412.372996.418720@despot.non.net>
	<cmu7sq+l13d@eGroups.com>
Message-ID: <16787.40032.147798.592516@despot.non.net>


>>>>> "lgcraymer" == lgcraymer  <lgc@mail1.jpl.nasa.gov> writes:
[...]

> [If I'm lucky, John will appreciate the content of this enough to keep
> him from making a "Netiquette nanny" statement--this is a bit long.]

'netiquette nanny says:

	* Top posting is Pure Evil(tm)!

	* Trim those posts!  We don't need a complete copy of the entire,
          growing thread in each message.

[I've separated this response out since it applicable to an awful lot of
posters on this list.]

[FWIW, long content is totally okay as long as it's appropriate. E.g.,
people should NOT submit their huge, broken grammars to the list. Instead,
just put the thing up on an ftp/web site and send a concise post with a URL
to the list.]

Thank you for your support,
			NN



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From demakov at ispras.ru  Thu Nov 11 09:30:32 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] SableCC tree stuff (Was: Antlr 3.0  spaces between tokens)
References: <cmvaq6+p2p4@eGroups.com> <000401c4c7d8$d3514ac0$0400a8c0@NOTEBOOK> <C7C1264B-33FA-11D9-B52C-000393BB647E@cs.usfca.edu>
Message-ID: <020c01c4c814$25b7f350$8cc79553@marlboro>


From: "Terence Parr" <parrt@cs.usfca.edu>
> Anyway, I'm off to Montreal to meet with Etienne Gagnon the SableCC  
> guy; giving a talk tomorrow.  Racing off to the airport in a few  
> minutes so I'm afraid I won't be able to contribute much until I get  
> back on Sunday.  Damn, this discussion and the one on trees is getting  
> interesting!  You can be sure I'll be figuring out his tree visitor  
> generation stuff (like TreeDL?).

I'm playing with SableCC tree, visitors and walkers and can't agree
that generation of tree from grammar is good idea. Even if it is heterogenous
strictly-typed SableCC tree.
I don't like tree node repetition because of grammar conflict resolving.
See java grammar example:

AForStatement
AForStatementNoShortIF

or simple C:

AIfElseStatement
AIfStatement
AIfThenElseStatement

These nodes are the same logically. And three almost identical visit methods 
should be implemented instead of single one.

Another strange thing from simple C example:

ASignedCharSpecifier
ASignedCharTypeSpecifier
ASignedIntSignedIntSpecifier
ASignedIntTypeSpecifier
ASignedLongIntSignedLongSpecifier
ASignedLongSignedLongSpecifier
ASignedLongTypeSpecifier
ASignedShortIntSignedShortSpecifier
ASignedShortSignedShortSpecifier
ASignedShortTypeSpecifier
ASignedSignedIntSpecifier

All of these modifiers can be set of flags in one node!

May be I don't understand SableCC very well, but if my notion
is adequate, SableCC trees are not very useful.

TreeDL now provides tree structure description and generation of:
- tree node class
- visitor interface and some basic visitors implementations
- depth-first tree walker (implemented, but not released yet)
- new features that can be added as plugins very easy.

and the only drawback I see - manual tree construction in parser.

May be sometimes in the future if TreeDL will be used by community,
construction of TreeDL trees will be implemented in ANTLR :)

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Thu Nov 11 09:48:34 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: trees with payloads??
In-Reply-To: <cmu7sq+l13d@eGroups.com>
References: <16786.37412.372996.418720@despot.non.net>
	<cmu7sq+l13d@eGroups.com>
Message-ID: <16787.42482.21551.110015@despot.non.net>


>>>>> "lgcraymer" == lgcraymer  <lgc@mail1.jpl.nasa.gov> writes:
[...]

> Actually, performance is part of the reason for payloads--payloads can be
> carried from pass to pass without object creation, and--even in Java--it
> may be possible to optimize memory management of the "carrier" objects.

Indeed.  

[I didn't bring this up with Ter because his brain was already overflowing
with all of the lexer stuff. :-)]

> However, I also have strong objections to adding direct support for
> either doubly-linked AST nodes or using arrays for building syntax trees.
> Doubly-linked ASTs are a red herring, and arrays are memory hogs.

Philosophically, I think a key point about Antlr v3 is that true, powerful
simplicity is driving things.

So, from that standpoint, what matters to me is that the base model of
Antlr's AST support fundamentally provides the necessary and sufficient
building blocks of tree identity, construction, traversing, searching, and
manipulation.

In terms of performance, there's always the tension between speed and
space.  If the AST model is fundamentally powerful enough than I'm quite
fine with having the different code generators / runtime's choose however
they want to actually implement that model.

[...]
> Arrays, besides being memory hogs, do not address the root cause of the
> cyclic reference problem.  The cyclic reference problem is due to the
> current brute force tree construction algorithm; a better approach is to
> build a stream of instruction/payload pairs and then construct the tree
> after all instructions have been gathered.  

Yes, the cyclic reference problem is crucial to deal with cleanly.  Antlr's
existing model of tree (re-)construction is brittle.  A linguistic approach
(create stream of instructions, sort & unique'ify, and apply) is both more
powerful and simpler.

> This approach allows optimized tree construction with no unnecessary
> object creation and deletion.

Yes and no.  You still have to e.g., create the objects for the stream of
instructions and it takes time and space to sort them, etc.  Of course,
they are small and well contained temporally and locality-wise and so can
be aggressively recycled.

> Getting back to payloads: one of the big advantages is that payloads can
> be used throughout the processing passes, starting with tokens.  By
> separating navigation information (sibling/child references and type)
> from attribute information (text descriptor, line/column information, and
> whatever else might be desired), there is no a priori need to copy
> attribute information from one processing phase to the next.  Instead, a
> creation cost is only incurred when new attributes need to be added.
> [And maybe not then, if one of the attributes is a Hashmap to support
> Micheal's suggestion.  Hashmap usage isn't free, however: custom payloads
> would be preferable for both speed and minimized memory usage.]

I think you're talking about my demand, ahem :-), that there be a standard
slot for a set of dynamic attributes.  The actual set would only be created
if needed so the only required overhead is the reference/pointer.

Yes, the notion of payload fits what Ter's already doing with e.g., not
copying the data out of the underlying data buffer.  AST's will refer to
Tokens.

> One other note: with payloads, there is no reason for Tokens to differ
> from ASTs, except that an AST may have down and right fields set.

Interesting.   I haven't thought through all of the details but it's
certainly conceivable.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Thu Nov 11 10:02:24 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: trees with payloads??
In-Reply-To: <cmusvj+l4h5@eGroups.com>
References: <cmudl4+vv63@eGroups.com>
	<cmusvj+l4h5@eGroups.com>
Message-ID: <16787.43312.503434.40901@despot.non.net>


>>>>> "lgcraymer" == lgcraymer  <lgc@mail1.jpl.nasa.gov> writes:
>>>>>> In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...>
[...]

>> Hmm, I am more inclined to eliminate [the cost of] Token objects
>> [almost] entirely. I say almost because a mechanism is still needed to
>> transfer attributes like lexeme/line/col info to AST node objects.

In general, I don't think that's possible.  I.e., any "solution" you come
up with is just moving around the time/space tradeoffs to different parts.

As Ter noted last week, it's not really the "column" but rather it's an
character index relative to the current line.

[...]
> Token management in lexers is an art.  You have to avoid copying data as
> much as possible for performance reasons and minimize memory allocation.
> llk does a reasonably good job; I think that Chris Leung took advantage
> of lessons learned from flex and other lexer generators.  Performance
> paranoia helps.  Payload objects could help here, too--you can keep text
> start and end pointers into a memory-mapped text file instead of
> allocating and copying strings.

The current Antlr v3 prototype keeps indices into the data buffer of the
start and end of the token.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Thu Nov 11 10:15:34 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: trees with payloads??
In-Reply-To: <cmv6us+5mld@eGroups.com>
References: <cmv4nf+tfq7@eGroups.com>
	<cmv6us+5mld@eGroups.com>
Message-ID: <16787.44102.790391.82344@despot.non.net>


>>>>> "lgcraymer" == lgcraymer  <lgc@mail1.jpl.nasa.gov> writes:
>>>>>> In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...>
[...]

>> Yep, right you are. Performance tuning is hard. You would typically
>> need to copy selected substrings from the input buffer to another buffer
>> where the start/end indices refer. Else, you might end up keeping a
>> 100kB memory-mapped file hanging around just for the sake of a few
>> substrings.

> True, but a 100KB or even 100 MB memory-mapped file is not a big
> expense--the OS virtual memory management takes care of that.  If you
> only keep a few strings, then you only keep a few blocks of the file
> memory-resident.  On the other hand, 20,000 string copies and creates (5
> chars per word, which is probably an overestimate) is a performance hit.

It's pretty easily conceivable that there are some uses and/or platforms
for which that kind of memory lingering is a problem.  I think there is a
relatively simple solution...

At the end of each translation phase, you should be able to manually invoke
an explicit copy-forward of all of the data referenced by a given root
node.  After you do that, you can e.g., invoke the garbage collector, unpin
the file, etc.

Doing that after a lexer which discards a lot of stuff (i.e., a traditional
source to object code compiler) would potentially free up a lot of memory.

Since it's optional and manually induced, the developer gets the option of
invoking it. [Though, of course, a code generator could be tweaked to spit
that out automagically.]

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Thu Nov 11 10:59:39 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: Antlr 3.0  spaces between tokens
References: <OF983F0A08.CC2464E0-ONC1256F48.00337898-C1256F48.003577D4@qem.it><41923643.6040505@yahoo.gr><F6D624AE-3336-11D9-AF28-000393B5606C@codetransform.com><001001c4c7b5$708ddd90$0400a8c0@NOTEBOOK> <16787.39104.454664.236993@despot.non.net>
Message-ID: <000c01c4c820$98897370$0400a8c0@NOTEBOOK>


Sounds interesting.
Although I would need to see more details.  I am not a fan of the token
stream switching that is implemented at the moment.
The interaction with lookahead worries me.
matthew

----- Original Message ----- 
From: "John D. Mitchell" <johnm-antlr@non.net>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, November 12, 2004 3:52 AM
Subject: [antlr-interest] Re: Antlr 3.0 spaces between tokens


>
> >>>>> "matthew" == matthew ford <Matthew.Ford@forward.com.au> writes:
> [...]
>
> > Perhaps for Antlr 3.0 we can have a better means of handling white
space.
>
> Did you read Ter's blog entry on lexing from last Sunday?
>
> > Antlr provides an ignore whitespace capability that is appealing WS :
( '
> > ' | '\t' | '\n' { newline(); } | '\r' )+ { $setType(Token.SKIP); } ;but
> > every time I try and use it I come across a situation where I really
> > want/need the white space in the parser.
>
> > So I end up having the lexer pass it back to the parser.  (or have
switch
> > in the lexer that the parser uses to control the return of whitespace.
I
> > know this is a no-no but it has worked for me in some cases)
>
> > The parser usually only needs to know about the whitespace in a few
rules
> > but now has (WS)* all over the place to handle whitespace every where.
>
> > Basically what I would like to have the lexer pass all the whitespace
> > back to the parser) and then in the parser be able to say a) for this
> > rule ignore white space.  or b) for this rule whitespace is important
>
> In fact, the v3 lexer will pass on everything that's not explicitly elided
> by the user-specified filter rule.
>
> In the lexer, you can assign different tokens to different "channels".
>
> In the parser, you set a default set of channels to pay attention to.
>
> Ter's blog is unclear on this point but the basic idea is that there'll be
> some syntax in the parser so that you can have specific parser rules pay
> attention to more/less/different channels than the default set.  This will
> handle cases like you mention where WS is significant in certain rules and
> ignored everywhere else.
>
> Hope this helps,
> John
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Thu Nov 11 11:11:46 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: Antlr 3.0  spaces between tokens
In-Reply-To: <000c01c4c820$98897370$0400a8c0@NOTEBOOK>
References: <OF983F0A08.CC2464E0-ONC1256F48.00337898-C1256F48.003577D4@qem.it>
	<41923643.6040505@yahoo.gr>
	<F6D624AE-3336-11D9-AF28-000393B5606C@codetransform.com>
	<001001c4c7b5$708ddd90$0400a8c0@NOTEBOOK>
	<16787.39104.454664.236993@despot.non.net>
	<000c01c4c820$98897370$0400a8c0@NOTEBOOK>
Message-ID: <16787.47474.925515.876760@despot.non.net>


>>>>> "matthew" == matthew ford <Matthew.Ford@forward.com.au> writes:
[...]

> Sounds interesting.  Although I would need to see more details.  I am not
> a fan of the token stream switching that is implemented at the moment.
> The interaction with lookahead worries me.

The implementation that Ter has in the prototype looks clean.

In terms of the lookahead, the LA()'s just rip through tokens that are on
channels that aren't being watched.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Thu Nov 11 12:49:57 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] SableCC tree stuff (Was: Antlr 3.0  spaces between tokens)
In-Reply-To: <020c01c4c814$25b7f350$8cc79553@marlboro>
References: <cmvaq6+p2p4@eGroups.com> <000401c4c7d8$d3514ac0$0400a8c0@NOTEBOOK> <C7C1264B-33FA-11D9-B52C-000393BB647E@cs.usfca.edu> <020c01c4c814$25b7f350$8cc79553@marlboro>
Message-ID: <3F72C11D-3423-11D9-8A73-000393B5606C@codetransform.com>


On Nov 11, 2004, at 9:30 AM, Alexey Demakov wrote:

>
> I'm playing with SableCC tree, visitors and walkers and can't agree
> that generation of tree from grammar is good idea. Even if it is 
> heterogenous
> strictly-typed SableCC tree.
> I don't like tree node repetition because of grammar conflict 
> resolving.
> See java grammar example:
>
> AForStatement
> AForStatementNoShortIF
>

ANTLR doesn't make trees from the grammar, it lets you create Abstract 
Syntax Trees.  From this example it seems SableCC is creating parse 
trees, with a node for every rule, unlike ANTLR.

Monty



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Thu Nov 11 12:48:55 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: Antlr 3.0  spaces between tokens
In-Reply-To: <cmv3ds+niuv@eGroups.com>
References: <cmv3ds+niuv@eGroups.com>
Message-ID: <1A347204-3423-11D9-8A73-000393B5606C@codetransform.com>


On Nov 10, 2004, at 11:13 PM, lgcraymer wrote:

>
> As usual--you ignore whitespace during parsing.  Then when you need
> the whitespace around a token, you peek into the token stream around
> the point of interest.  It doesn't help if whitespace is really a
> syntax feature and not just a token separator.
>
> --Loring
>
>
> --- In antlr-interest@yahoogroups.com, "matthew ford"
> <Matthew.Ford@f...> wrote:
>> A bit too clever for me  how do you write the parser rules?

Use a semantic predicate.  Seems to me you could use similar techniques 
as Don Caton just asked about to check for whitespace in makeToken() 
and you could even attach that information to a custom Token, then the 
parser can just use a semantic predicate to ask the token if it had 
whitespace before or after.

Monty



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Thu Nov 11 19:25:40 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: trees with payloads??
In-Reply-To: <16787.42482.21551.110015@despot.non.net>
Message-ID: <cn1afk+rjet@eGroups.com>



--- In antlr-interest@yahoogroups.com, "John D. Mitchell"
<johnm-antlr@n...> wrote:
> >>>>> "lgcraymer" == lgcraymer  <lgc@m...> writes:

> > However, I also have strong objections to adding direct support for
> > either doubly-linked AST nodes or using arrays for building syntax
trees.
> > Doubly-linked ASTs are a red herring, and arrays are memory hogs.
> 
> Philosophically, I think a key point about Antlr v3 is that true,
powerful
> simplicity is driving things.
> 
> So, from that standpoint, what matters to me is that the base model of
> Antlr's AST support fundamentally provides the necessary and sufficient
> building blocks of tree identity, construction, traversing,
searching, and
> manipulation.

We are agreed there.  However, my concerns are that there are a number
of feeping creaturitis requests being made without any understanding
of the utility (or lack thereof, to be more precise), the performance
costs, or the available application-level solutions.

> In terms of performance, there's always the tension between speed and
> space.  If the AST model is fundamentally powerful enough than I'm quite
> fine with having the different code generators / runtime's choose
however
> they want to actually implement that model.

As a point of abstract philosophy, I agree whole-heartedly.  I'll even
agree that there are cases where arrays of pointers are useful and
that there might be ones where doubly-linked lists are useful
(although I can't think of any--it is my experience that there are
better alternatives for tree navigation).  If the ANTLR 3 interface
model allows these alternatives, that is ok by me.  However, both are
inferior in terms of both speed and memory usage to the current AST
implementation model.

> [...]
> > Arrays, besides being memory hogs, do not address the root cause
of the
> > cyclic reference problem.  The cyclic reference problem is due to the
> > current brute force tree construction algorithm; a better approach
is to
> > build a stream of instruction/payload pairs and then construct the
tree
> > after all instructions have been gathered.  
> 
> Yes, the cyclic reference problem is crucial to deal with cleanly. 
Antlr's
> existing model of tree (re-)construction is brittle.  A linguistic
approach
> (create stream of instructions, sort & unique'ify, and apply) is
both more
> powerful and simpler.
> 
> > This approach allows optimized tree construction with no unnecessary
> > object creation and deletion.
> 
> Yes and no.  You still have to e.g., create the objects for the
stream of
> instructions and it takes time and space to sort them, etc.  Of course,
> they are small and well contained temporally and locality-wise and
so can
> be aggressively recycled.

Sorting only becomes an issue if you shift to another implementation
model for AST nodes (like arrays for child lists).  And the stream of
instructions can be implemented as arrays of objects that contain two
values--an integer instruction and an AST/Token reference.  You would
need one array for each level of rule nesting; for most grammars, that
would mean about 10-20 arrays.

> > Getting back to payloads: one of the big advantages is that
payloads can
> > be used throughout the processing passes, starting with tokens.  By
> > separating navigation information (sibling/child references and type)
> > from attribute information (text descriptor, line/column
information, and
> > whatever else might be desired), there is no a priori need to copy
> > attribute information from one processing phase to the next. 
Instead, a
> > creation cost is only incurred when new attributes need to be added.
> > [And maybe not then, if one of the attributes is a Hashmap to support
> > Micheal's suggestion.  Hashmap usage isn't free, however: custom
payloads
> > would be preferable for both speed and minimized memory usage.]
> 
> I think you're talking about my demand, ahem :-), that there be a
standard
> slot for a set of dynamic attributes.  The actual set would only be
created
> if needed so the only required overhead is the reference/pointer.

We part company here.  I can see that as part of an AST library
facility (use this if you want to), but not as a default.  It adds a
library requirement for Hashmap which complicates porting.  On the
other hand, if that requirement were added, I'd be willing to see
syntactic support for symbol table manipulation in ANTLR--that would
be a relatively small next step.

> Yes, the notion of payload fits what Ter's already doing with e.g., not
> copying the data out of the underlying data buffer.  AST's will refer to
> Tokens.
> 
> > One other note: with payloads, there is no reason for Tokens to differ
> > from ASTs, except that an AST may have down and right fields set.
> 
> Interesting.   I haven't thought through all of the details but it's
> certainly conceivable.

Not much to think through.  It shifts the cost of AST allocation from
the parser to the lexer, cuts down on data manipulation in multi-pass
translators, and Carrier recycling could be fairly efficient.

--Loring

> Take care,
> 	John





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Thu Nov 11 20:08:46 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:31 2004
Subject: [antlr-interest] Re: SableCC tree stuff (Was: Antlr 3.0  spaces between tokens)
In-Reply-To: <3F72C11D-3423-11D9-8A73-000393B5606C@codetransform.com>
Message-ID: <cn1d0e+3l81@eGroups.com>



--- In antlr-interest@yahoogroups.com, Monty Zukowski <monty@c...> wrote:
> On Nov 11, 2004, at 9:30 AM, Alexey Demakov wrote:
> 
> >
> > I'm playing with SableCC tree, visitors and walkers and can't agree
> > that generation of tree from grammar is good idea. Even if it is 
> > heterogenous
> > strictly-typed SableCC tree.
> > I don't like tree node repetition because of grammar conflict 
> > resolving.
> > See java grammar example:
> >
> > AForStatement
> > AForStatementNoShortIF
> >
> 
> ANTLR doesn't make trees from the grammar, it lets you create Abstract 
> Syntax Trees.  From this example it seems SableCC is creating parse 
> trees, with a node for every rule, unlike ANTLR.

That's what Alexey was saying.  SableCC takes an LALR/parse tree
approach to language translation, and he finds the ANTLR approach
preferable.

--Loring

> 
> Monty





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Thu Nov 11 20:30:26 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] Re: trees with payloads??
In-Reply-To: <cn1afk+rjet@eGroups.com>
References: <16787.42482.21551.110015@despot.non.net>
	<cn1afk+rjet@eGroups.com>
Message-ID: <16788.15458.718314.689108@despot.non.net>


>>>>> "lgcraymer" == lgcraymer  <lgc@mail1.jpl.nasa.gov> writes:
>>>>>> In antlr-interest@yahoogroups.com, "John D. Mitchell"
[...]

>> I think you're talking about my demand, ahem :-), that there be a
>> standard slot for a set of dynamic attributes.  The actual set would
>> only be created if needed so the only required overhead is the
>> reference/pointer.

> We part company here.  I can see that as part of an AST library facility
> (use this if you want to), but not as a default.  It adds a library
> requirement for Hashmap which complicates porting.

IMNSHO, the dynamic attributes support is a fundamental feature of Antlr
v3.

> On the other hand, if that requirement were added, I'd be willing to see
> syntactic support for symbol table manipulation in ANTLR--that would be a
> relatively small next step.

Hmm... Adding some stack support to the dynamic attribute stuff is a no
brainer but what sort of syntactic support are you thinking of?

Take care,
	John




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Fri Nov 12 00:32:23 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] Re: trees with payloads??
In-Reply-To: <16788.15458.718314.689108@despot.non.net>
Message-ID: <cn1sen+i89b@eGroups.com>



--- In antlr-interest@yahoogroups.com, "John D. Mitchell"
<johnm-antlr@n...> wrote:
> >>>>> "lgcraymer" == lgcraymer  <lgc@m...> writes:
> >>>>>> In antlr-interest@yahoogroups.com, "John D. Mitchell"
> [...]
> 
> >> I think you're talking about my demand, ahem :-), that there be a
> >> standard slot for a set of dynamic attributes.  The actual set would
> >> only be created if needed so the only required overhead is the
> >> reference/pointer.
> 
> > We part company here.  I can see that as part of an AST library
facility
> > (use this if you want to), but not as a default.  It adds a library
> > requirement for Hashmap which complicates porting.
> 
> IMNSHO, the dynamic attributes support is a fundamental feature of Antlr
> v3.

Well, maybe.  It is a feature that has not yet been put to
experimental test.  It might turn out to be extremely valuable, or it
might be just another bit of glitz.

Also, while Hashmaps might be required by ANTLR to support dynamic
attributes, that does not mean that they should be present in the
generated code.  Generating attribute classes or structures should be
pretty straightforward, and the runtime attribute containers should
probably be implemented as fields in the generated lexers, parsers,
and treewalkers so that they are accessible within rules.  That would
certainly help to ensure that analysis passes (most of the work done
in actions) can have good performance.  And the ANTLR 3 output
templates should make the code generation even easier.

> > On the other hand, if that requirement were added, I'd be willing
to see
> > syntactic support for symbol table manipulation in ANTLR--that
would be a
> > relatively small next step.
> 
> Hmm... Adding some stack support to the dynamic attribute stuff is a no
> brainer but what sort of syntactic support are you thinking of?

Structure definition for symbols, scoping support, and I don't know
what else.  It is possible that this could be handled within the
attribute syntax as that develops; however, I still don't see the
argument for ANTLR to directly support dictionaries/hashmaps in
generated code.  I'd much rather be able to generate Java code during
development and efficient C++ code for high-performance standalone
applications; generating attribute structures/classes is preferable to
requiring use of Hashmaps.

--Loring

> Take care,
> 	John





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-88DguZWjW=0cpuECxYD8RNQ at yahoogroups.com  Fri Nov 12 03:08:07 2004
From: antlr-interest-accept-88DguZWjW=0cpuECxYD8RNQ at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:32 2004
Subject: MODERATE -- doublemalam@yahoo.co.uk posted to antlr-interest
Message-ID: <1100257687.424.79994.m1@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  doublemalam@yahoo.co.uk 

The message summary:
--------------------
FROM: doublemalam@yahoo.co.uk 
DATE: Fri, 12 Nov 2004 11:08:04 +0000 (GMT) 
SUBJECT: very different behavoiur 

Hi All, 

i am a new user of Antlr , and suddently falled into so much
problems , that i could not solve my self, if any body of U 
can help me. 

I am attaching 2 files with this email one is the grammar of
a small language and other is the main class files which run
the generated files. 

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=367 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-88DguZWjW=0cpuECxYD8RNQ@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: Muhammad Masoom Alam <doublemalam@yahoo.co.uk>
Subject: very different behavoiur
Date: Fri, 12 Nov 2004 11:08:04 +0000 (GMT)
Size: 8634
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041112/6f7295dd/attachment.mht
From demakov at ispras.ru  Fri Nov 12 05:41:36 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] Re: SableCC tree stuff (Was: Antlr 3.0  spaces between tokens)
References: <cn1d0e+3l81@eGroups.com>
Message-ID: <02be01c4c8bd$54b2bab0$8cc79553@marlboro>


From: "lgcraymer" <lgc@mail1.jpl.nasa.gov>
> --- In antlr-interest@yahoogroups.com, Monty Zukowski <monty@c...> wrote:
> > On Nov 11, 2004, at 9:30 AM, Alexey Demakov wrote:
> > > I'm playing with SableCC tree, visitors and walkers and can't agree
> > > that generation of tree from grammar is good idea. Even if it is 
> > > heterogenous
> > > strictly-typed SableCC tree.
> > > I don't like tree node repetition because of grammar conflict 
> > > resolving.
> > > See java grammar example:
> > >
> > > AForStatement
> > > AForStatementNoShortIF
> > >
> > 
> > ANTLR doesn't make trees from the grammar, it lets you create Abstract 
> > Syntax Trees.  From this example it seems SableCC is creating parse 
> > trees, with a node for every rule, unlike ANTLR.
> 
> That's what Alexey was saying.  SableCC takes an LALR/parse tree
> approach to language translation, and he finds the ANTLR approach
> preferable.

It was criticizm of SableCC only, irrelative of ANTLR.
ANTLR doesn't provide much for heterogenous tree construction.
So I write these actions manually.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From doublemalam at yahoo.co.uk  Fri Nov 12 03:08:04 2004
From: doublemalam at yahoo.co.uk (Muhammad Masoom Alam)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] very different behavoiur
Message-ID: <20041112110804.56459.qmail@web86903.mail.ukl.yahoo.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: Main.java
Type: application/octet-stream
Size: 311 bytes
Desc: Main.java
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041112/252a3566/Main.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: x.g
Type: application/octet-stream
Size: 3562 bytes
Desc: x.g
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041112/252a3566/x.obj
From monty at codetransform.com  Fri Nov 12 08:08:11 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] very different behavoiur
In-Reply-To: <20041112110804.56459.qmail@web86903.mail.ukl.yahoo.com>
References: <20041112110804.56459.qmail@web86903.mail.ukl.yahoo.com>
Message-ID: <0D3FAFE6-34C5-11D9-8A83-000393B5606C@codetransform.com>


>
> i am a new user of Antlr , and suddently falled into so much problems 
> , that i could not solve my self, if any body of U can help me.
> ?
> I am attaching 2 files with this email
> one is the grammar of a small language and other is the main class 
> files which run the generated files.
>

Hi Muhammad,
	You're probably going to need to do a little more work yourself to get 
some help here.  What are your syntax errors?  Have you tried running 
ANTLR with the -trace option so you can see what is happening?  Have 
you tried stepping through in a debugger?  Have you looked at ANTLR's 
generated code?  It's very readable and is the key to understanding 
ANTLR.

Sample input would be a good thing too.  Also,reducing your grammar to 
the smallest possible which still demonstrates the error will make it 
more likely that someone will help you.

Good luck,

Monty



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Anthony.Youngman at ECA-International.com  Fri Nov 12 08:13:23 2004
From: Anthony.Youngman at ECA-International.com (Anthony Youngman)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] Re: "protected" lexer rules
Message-ID: <C7FE35004D40FD45AA342991B88CE40409B078@lnml1.eca-international.local>


Doesn't "smidgen" originate with Winnie the Pooh (or even earlier? :-)

Cheers,
Wol

-----Original Message-----
From: micheal_jor [mailto:open.zone@virgin.net] 
Sent: 10 November 2004 17:16
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: "protected" lexer rules


I still like "fragment" best but, "smidgen" is so HarryPottery and
LordsOfTheRingish ;-)

Micheal
ANTLR/C#



****************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 8272 5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

****************************************************************************



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ewbank at synopsys.com  Fri Nov 12 08:23:39 2004
From: ewbank at synopsys.com (Bryan Ewbank)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] very different behavoiur
References: <20041112110804.56459.qmail@web86903.mail.ukl.yahoo.com>
Message-ID: <008b01c4c8d3$f9111f00$6701a8c0@internal.synopsys.com>


You have commented out the options section of the identifer production;
don't know if this is related to the problem, but it does mean that none of
the keywords will match (like "context", which is the first token required
by your grammar).

-- Bryan Ewbank

> i am a new user of Antlr , and suddently falled into so much problems ,
that i
> could not solve my self, if any body of U can help me.
> Muhammad.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From seanharteb at yahoo.co.uk  Fri Nov 12 09:04:26 2004
From: seanharteb at yahoo.co.uk (Sean Barry)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] reading a template from a file using StringTemplate
Message-ID: <20041112170426.58110.qmail@web25104.mail.ukl.yahoo.com>

Hey 
I have read through the documentation on StringTemplate but I'm still having problems with reading a basic template from a file, I think my template setup may be the problem.
 
Invoking Java code:
 
StringTemplateGroup group = new StringTemplateGroup("myGroup","/Templates" ); 
StringTemplate query = group.getInstanceOf("sql_statement");
query.setAttribute("column", "basic_col1");
query.setAttribute("table", "basic_table1");
System.out.println(query.toString() );
 
and I have a basic SQL template in a text file ("sql_statements.st"):
SELECT $column; separator=","$ FROM $table$;
 
any possible reasons for my runtime error would be appreciated
Regards
Sean

 

 


		
---------------------------------
 ALL-NEW Yahoo! Messenger - all new features - even more fun!  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041112/11392cf3/attachment.html
From H.A.M.Maassen at student.tue.nl  Fri Nov 12 09:24:12 2004
From: H.A.M.Maassen at student.tue.nl (Maassen, H.A.M.)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] very different behavoiur
Message-ID: <1C5C690C06EFE244B83E3F133CA70BDE285854@studentex6.campus.tue.nl>


>>From skimming your grammar, in addition to "options {testLiterals=true;}" being commented out:

> context_definition
>   :  "context" IDENT COLON IDENT LPAREN (INDENT COLON typeName (COMMA)*)+ RPAREN

Does INDENT mean IDENT here?

Je vous prie d'agr?er, madame, monsieur, l'expression de mes sentiments
distingu?s, Harald Maassen 


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From sk at z.pl  Fri Nov 12 10:42:37 2004
From: sk at z.pl (Sebastian Kaliszewski)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] Re: "protected" lexer rules
In-Reply-To: <20041110130504.GD32655@cs.utwente.nl>
References: <16785.26912.257892.938648@despot.non.net> <cmrq25+2ora@eGroups.com> <20041110130504.GD32655@cs.utwente.nl>
Message-ID: <4195041D.60201@softax.pl>


A 0.02PLN from yet another ANTLR user...


Ric Klaren wrote:
> 1. part/partial

I like This one

rgds
-- 
Sebastian Kaliszewski


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Fri Nov 12 10:47:01 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] Re: trees with payloads??
In-Reply-To: <cn1sen+i89b@eGroups.com>
References: <16788.15458.718314.689108@despot.non.net>
	<cn1sen+i89b@eGroups.com>
Message-ID: <16789.1317.454821.628029@despot.non.net>


>>>>> "lgcraymer" == lgcraymer  <lgc@mail1.jpl.nasa.gov> writes:
>>>>>> In antlr-interest@yahoogroups.com, "John D. Mitchell"
[...]

>> IMNSHO, the dynamic attributes support is a fundamental feature of
>> Antlr v3.

> Well, maybe.  It is a feature that has not yet been put to experimental
> test.  It might turn out to be extremely valuable, or it might be just
> another bit of glitz.

It's more than just glitz.

Coming from a language designer's perspective, dynamically scoped
attributes fill a capability niche that is not provided for by any of the
statically scope capabilities.

In terms of praxis, look at how many times people have written their own
(buggy :-) version of dynamic attributes.  Heck, I've done it a handful of
times myself on different translation projects.


> Also, while Hashmaps might be required by ANTLR to support dynamic
> attributes, that does not mean that they should be present in the
> generated code.  Generating attribute classes or structures should be
> pretty straightforward, and the runtime attribute containers should
> probably be implemented as fields in the generated lexers, parsers, and
> treewalkers so that they are accessible within rules.  That would
> certainly help to ensure that analysis passes (most of the work done in
> actions) can have good performance.  And the ANTLR 3 output templates
> should make the code generation even easier.

Again, in terms of implementation, I'm extremely open to allowing the
different code generators & runtime combinations to do whatever they want
as long as they provide all of the capabilities.

As I noted for the notes from the workshop, the dynamically scoped
attributes need to support cabilities for things like LIFO & FIFO access;
specification of things like at most one/n, exactly one/n, at least one/n;
pushing/popping bundles of attributes; search current scope for attribute,
search up stack for attribute; etc.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From eddie_antlr at yahoo.co.uk  Fri Nov 12 07:41:29 2004
From: eddie_antlr at yahoo.co.uk (dsfsdf fdsfdsf)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] Transforming Comments along with trees
In-Reply-To: <18BC7064-33FB-11D9-B52C-000393BB647E@cs.usfca.edu>
Message-ID: <20041112154129.6135.qmail@web25206.mail.ukl.yahoo.com>

Hi
What do you mean by the tree input output thing?
I have been transforming my Source Tree and the comments do
not appear to have been automatically brought acorss.
My code is something like this.
 
ASTPass1.setLocalIntelligence(li);
        ASTPass1.setASTNodeClass("antlr.CommonASTWithHiddenTokens");
        ASTPass1.select(sourceASTAnalyzer.getAST());
        t = (CommonASTWithHiddenTokens) ASTPass1.getAST();
showTree(t,"first pass")
 
In my ASTPass.g file will i have to handle comments manualy there?
thanks
ed
Terence Parr <parrt@cs.usfca.edu> wrote:


On Nov 11, 2004, at 3:13 AM, dsfsdf fdsfdsf wrote:

> ya i have seen the TokenStreamRewriteEngine doc on the website, i feel 
> it would be a bit complicated to implement as the input could be huge,

Bigger than virtual memory? ;)

> and it doesn't show how to handle comments,

They just work. You get the whole stream of tokens but the parser 
ignores comments. You do cut/paste operations to the buffer then say 
toString() and it comes back out with you rewrites. no fuss, no muss!

> besides i'm not too comfortable with it.

why not?

> As for the latter question, after each pass i generate a new tree.
> Should these passes automatically bring across the hidden tokens?
> how? why not?

If you're doing tree rewrites, then yes, they have to come along. The 
tree input->output thing should copy that stuff automatically I think.

> And how do i output these hidden tokens after all my transformations 
> are complete?

Do a tree walk and spit them out as you spit the other stuff out.

Ter

> thanks
> ed 
>
> Terence Parr 
wrote:
>
>
> On Nov 10, 2004, at 4:22 AM, dsfsdf fdsfdsf wrote:
>
> > Hi
> > I am building a parser that will convert a piece of t-slq to the
> > corresponding p-sql. I am using a TokenStreamHiddenTokenFilter to
> > ignore but preserve comments and builld up my source ast tree!
> > I than plan to do maybe one or to pass transformations to the tree!
> > However i am stuck on how to bring across my comments after each
> > transformations!
> > I would greatly appreciate any ideas on how this can be done!
>
> Hi. First, given the similarity of source / target languages, you
> might want to use TokenStreamRewriteEngine instead. have you seen that
> article on the site?
>
> For the above, are you saying that the auto construction of trees in
> the tree walker doesn't carry along the hidden stream stuff?
>
> Ter
> --
> CS Professor &am p; Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>
>
> ALL-NEW Yahoo! Messenger - all new features - even more fun!
>
> Yahoo! Groups Links
>
> ? To visit your group on the web, go to:
> http://groups.yahoo.com/group/antlr-interest/
>  
> ? To unsubscribe from this group, send an email to:
> antlr-interest-unsubscribe@yahoogroups.com
>  
> ? Your use of Yahoo! Groups is subject to the Yahoo! Terms of 
> Service.
>
> 





Yahoo! Groups Links








		
---------------------------------
 ALL-NEW Yahoo! Messenger - all new features - even more fun!  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041112/a89f729d/attachment.html
From johnm-antlr at non.net  Fri Nov 12 09:12:43 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] reading a template from a file using StringTemplate
In-Reply-To: <20041112170426.58110.qmail@web25104.mail.ukl.yahoo.com>
References: <20041112170426.58110.qmail@web25104.mail.ukl.yahoo.com>
Message-ID: <16788.61195.263969.503632@despot.non.net>


>>>>> "Sean" == Sean Barry <seanharteb@yahoo.co.uk> writes:
> Hey I have read through the documentation on StringTemplate but I'm still
> having problems with reading a basic template from a file, I think my
> template setup may be the problem.

> Invoking Java code:

> StringTemplateGroup group = new
> StringTemplateGroup("myGroup","/Templates" ); StringTemplate query =
> group.getInstanceOf("sql_statement"); query.setAttribute("column",
> "basic_col1"); query.setAttribute("table", "basic_table1");
> System.out.println(query.toString() );

> and I have a basic SQL template in a text file ("sql_statements.st"):
> SELECT $column; separator=","$ FROM $table$;

> any possible reasons for my runtime error would be appreciated Regards

(A) What's the run-time error?

(B) Is there some reason that you're not checking the return values for
e.g., null from getInstanceOf()?

(C) Is the template actually in the /Templates directory?  Note that in my
usage, I'm getting having it get templates via the classpath and I'm using
full path names for all of the templates.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Fri Nov 12 14:26:49 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] Re: trees with payloads??
In-Reply-To: <16789.1317.454821.628029@despot.non.net>
Message-ID: <cn3db9+nf3v@eGroups.com>



--- In antlr-interest@yahoogroups.com, "John D. Mitchell"
<johnm-antlr@n...> wrote:
> >>>>> "lgcraymer" == lgcraymer  <lgc@m...> writes:
> >>>>>> In antlr-interest@yahoogroups.com, "John D. Mitchell"
> [...]
> 
> >> IMNSHO, the dynamic attributes support is a fundamental feature of
> >> Antlr v3.
> 
> > Well, maybe.  It is a feature that has not yet been put to
experimental
> > test.  It might turn out to be extremely valuable, or it might be just
> > another bit of glitz.
> 
> It's more than just glitz.
> 
> Coming from a language designer's perspective, dynamically scoped
> attributes fill a capability niche that is not provided for by any
of the
> statically scope capabilities.
> 
> In terms of praxis, look at how many times people have written their own
> (buggy :-) version of dynamic attributes.  Heck, I've done it a
handful of
> times myself on different translation projects.

As have I, which is why I am in the believers camp.  However, it could
still be a feature which is only occasionally useful; until we try it
out, we won't know otherwise.

> 
> > Also, while Hashmaps might be required by ANTLR to support dynamic
> > attributes, that does not mean that they should be present in the
> > generated code.  Generating attribute classes or structures should be
> > pretty straightforward, and the runtime attribute containers should
> > probably be implemented as fields in the generated lexers,
parsers, and
> > treewalkers so that they are accessible within rules.  That would
> > certainly help to ensure that analysis passes (most of the work
done in
> > actions) can have good performance.  And the ANTLR 3 output templates
> > should make the code generation even easier.
> 
> Again, in terms of implementation, I'm extremely open to allowing the
> different code generators & runtime combinations to do whatever they
want
> as long as they provide all of the capabilities.
> 
> As I noted for the notes from the workshop, the dynamically scoped
> attributes need to support cabilities for things like LIFO & FIFO
access;
> specification of things like at most one/n, exactly one/n, at least
one/n;
> pushing/popping bundles of attributes; search current scope for
attribute,
> search up stack for attribute; etc.

This is an area where implementation is likely to have significant
impact on performance.  Yes, we should probably support multi-valued
attributes directly as well as the dynamic scoping, but "capability
first!" is the wrong mantra.  We also need to look at what disciplines
are necessary when using dynamically scoped attributes for
understandability and maintainability.  There are issues of data
typing for generated code, context (which scopes should be searched?)
management, and grammar maintainability (what scopes might apply) that
need to be considered in the design.  Otherwise, dynamically scoped
attributes can have as much negative impact as templates have for C++
as well as having equivalent positive impact.  "I can do everything"
can translate to "I can maintain nothing":  the range of
implementation models allowed can have a great deal of impact. 
Debugging usage of dynamically scoped attributes could be a nightmare.

--Loring

> Take care,
> 	John





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From sunshine at public.kherson.ua  Fri Nov 12 15:05:03 2004
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:17:32 2004
Subject: BENCHMARK. ANTLR. Bad results.
Message-ID: <BDBB0E3F.2359C%sunshine@public.kherson.ua>

Hi Guys.

Well, have gone 18 months as we have start to use ANTLR in our project --
Valentina DBMS, and now I have on hands results of benchmarks for parsing.

They are not good :-(

* We have made loop to add million of records into db table.
Our kernel can do this using low level API Table.AddRecord()
In 98 seconds.

    mySQL can do this (using SQL commands, i.e. With parsing)
    in 323 seconds.


* Next we have made loop which execute million of parings of
    SQL command INSERT, which is full analog of above low
    level non-SSQL command.

Guess how much time this take?!
    1036 seconds !!!

    10 times slower then our Valentina kernel itself
    can do this task.

---------------------------------------------------
We use C++ runtime of ANTLR.
Benches was in the release compile, with full optimization on.

We have not study yet deeply where are problems.
This is what we are going to do in the nearest time.

Just I want to demonstrate that my expectation of bad performance of C++
ANTLR runtime have become reality.

* We will try urgently switch to Lex lexer.

* but IMHO on of the main problems of ANTLR C++, is that it heavally uses
std::string class and a lots of *copying* of string when it parse tokens.
* may be another problem is in exceptions, although I like mechanizm of
exceptions. 

I think that for 3.0 Rick and community should produce own, special, very
optimized for ANTLR tasks antl::string class. This class should simply have
2 pointers on start/end of tokem. Pointer must point directly into original
parsed text. There is no need copy any byte of parsed text. Everything must
work on pointers. Tell me that I am wrong?! :-)



-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------


From sunshine at public.kherson.ua  Fri Nov 12 15:05:03 2004
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
Message-ID: <BDBB0E3F.2359C%sunshine@public.kherson.ua>


Hi Guys.

Well, have gone 18 months as we have start to use ANTLR in our project --
Valentina DBMS, and now I have on hands results of benchmarks for parsing.

They are not good :-(

* We have made loop to add million of records into db table.
Our kernel can do this using low level API Table.AddRecord()
In 98 seconds.

    mySQL can do this (using SQL commands, i.e. With parsing)
    in 323 seconds.


* Next we have made loop which execute million of parings of
    SQL command INSERT, which is full analog of above low
    level non-SSQL command.

Guess how much time this take?!
    1036 seconds !!!

    10 times slower then our Valentina kernel itself
    can do this task.

---------------------------------------------------
We use C++ runtime of ANTLR.
Benches was in the release compile, with full optimization on.

We have not study yet deeply where are problems.
This is what we are going to do in the nearest time.

Just I want to demonstrate that my expectation of bad performance of C++
ANTLR runtime have become reality.

* We will try urgently switch to Lex lexer.

* but IMHO on of the main problems of ANTLR C++, is that it heavally uses
std::string class and a lots of *copying* of string when it parse tokens.
* may be another problem is in exceptions, although I like mechanizm of
exceptions. 

I think that for 3.0 Rick and community should produce own, special, very
optimized for ANTLR tasks antl::string class. This class should simply have
2 pointers on start/end of tokem. Pointer must point directly into original
parsed text. There is no need copy any byte of parsed text. Everything must
work on pointers. Tell me that I am wrong?! :-)



-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Fri Nov 12 15:19:46 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
In-Reply-To: <BDBB0E3F.2359C%sunshine@public.kherson.ua>
Message-ID: <Pine.LNX.4.44.0411121511030.27249-100000@g4.pauljlucas.org>


On Sat, 13 Nov 2004, Ruslan Zasukhin wrote:

> * but IMHO on of the main problems of ANTLR C++, is that it heavally uses
> std::string class and a lots of *copying* of string when it parse tokens.

	std::string (indeed, std:: everything) isn't usually (depending
	on your C++ vendor) some half-assed implementation.  The std
	classes are *supposed* to be written well so that people will
	use them.

	Writing yet another string class makes any API using them
	annoying because then you often have to convert foo::string to
	std::string and vice-versa -- and that most definitely adds
	overhead and negates any performance improvement you may have
	gotten from using foo::string.

	Granted, it's always possible to use an efficient tool in an
	inefficient way, so yes it's possible that std::string isn't
	being used efficiently; but that suggests correcting the use,
	not replacing the tool.

	- Paul




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From sunshine at public.kherson.ua  Fri Nov 12 15:35:24 2004
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
In-Reply-To: <Pine.LNX.4.44.0411121511030.27249-100000@g4.pauljlucas.org>
Message-ID: <BDBB155C.235A4%sunshine@public.kherson.ua>


On 11/13/04 1:19 AM, "Paul J. Lucas" <pauljlucas@mac.com> wrote:

>> * but IMHO on of the main problems of ANTLR C++, is that it heavally uses
>> std::string class and a lots of *copying* of string when it parse tokens.
> 
> std::string (indeed, std:: everything) isn't usually (depending
> on your C++ vendor) some half-assed implementation.  The std
> classes are *supposed* to be written well so that people will
> use them.
> 
> Writing yet another string class makes any API using them
> annoying because then you often have to convert foo::string to
> std::string and vice-versa -- and that most definitely adds
> overhead and negates any performance improvement you may have
> gotten from using foo::string.
> 
> Granted, it's always possible to use an efficient tool in an
> inefficient way, so yes it's possible that std::string isn't
> being used efficiently; but that suggests correcting the use,
> not replacing the tool.

Paul,

Have you ever open the object of std::string In the debugger.
For different vendors this class have 2-3 levels of construction.
std::string class is very overloaded.

You argument that we will die on conversion
        foo::string to std::string

Let me answer that in our project we DO NOT use any STD classes,
Because we have prove they are not effective for our tasks... And because we
always can write own optimized for our task implementation.

May be ANTLR in the _public_ API which we will use in our apps,
Should expose just char*. Then "problem" you point will go away.
If you like std::string in your app no problems

    std::string str = antlr::foo_get_token()

If we like our own class

    fbl::String str = antlr::foo_get_token()

You know, I will kill for speed :-)

So I do not consider as problem do ANYTRHING
if this can increase speed in 2-5-10 times........


-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From iank at bearcave.com  Fri Nov 12 15:40:50 2004
From: iank at bearcave.com (iank@bearcave.com)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
Message-ID: <200411122340.iACNeow25845@shell2.webquarry.com>



> * but IMHO on of the main problems of ANTLR C++, is that it heavally uses
> std::string class and a lots of *copying* of string when it parse tokens.
> * may be another problem is in exceptions, although I like mechanizm of
> exceptions. 
> 
> I think that for 3.0 Rick and community should produce own, special,
> very optimized for ANTLR tasks antl::string class. This class should
> simply have 2 pointers on start/end of tokem. Pointer must point
> directly into original parsed text. There is no need copy any byte
> of parsed text. Everything must work on pointers. Tell me that I am
> wrong?! :-)

  I wrote a reference counted string container originally for ANTLR.
  However I never integrated it into ANTLR.  Obviously it is written
  in C++ and is available under something like the BSD license (e.g.,
  you can do what ever you want with it, but you can't blame me for
  any problems you encounter).  See

     http://www.bearcave.com/software/string/index.html

  I have not benchmarked this against the GNU std::string, so I don't
  know if it is faster or not.  It does properly implement reference
  counted copy-on-write semantics (which is more difficult than I
  thought in C++).  So copying should not be an issue, since it just
  copies pointers.

  Ian


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Fri Nov 12 15:53:19 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] Re: BENCHMARK. ANTLR. Bad results.
In-Reply-To: <BDBB0E3F.2359C%sunshine@public.kherson.ua>
Message-ID: <cn3idf+tbsr@eGroups.com>



--- In antlr-interest@yahoogroups.com, Ruslan Zasukhin <sunshine@p...>
wrote:
[dismal performance figures snipped]

> Just I want to demonstrate that my expectation of bad performance of C++
> ANTLR runtime have become reality.
> 
> * We will try urgently switch to Lex lexer.
> 
> * but IMHO on of the main problems of ANTLR C++, is that it heavally
uses
> std::string class and a lots of *copying* of string when it parse
tokens.
> * may be another problem is in exceptions, although I like mechanizm of
> exceptions. 
> 
> I think that for 3.0 Rick and community should produce own, special,
very
> optimized for ANTLR tasks antl::string class. This class should
simply have
> 2 pointers on start/end of tokem. Pointer must point directly into
original
> parsed text. There is no need copy any byte of parsed text.
Everything must
> work on pointers. Tell me that I am wrong?! :-)

Ruslan--

Performance is very much a concern for ANTLR 3--check out the "trees
with payloads" thread.  ANTLR 2 does much way too much data copying
and object creation/deletion, starting in the lexer but also in the
parser and treewalkers.  I don't think that a special string class is
needed, although payload objects should support alternative
representations via a start/end reference/pointer and a string
reference/pointer that would be set by getText() and setText()
(getText() would also do string creation, if necessary and set the
string reference field).  Ter's DFA work which led him to the LL(*)
approach began with his looking into how to improve ANTLR lexing
performance.

I hope that the shift to flex helps enough.  What does profiling show?

--Loring

> 
> 
> -- 
> Best regards,
> Ruslan Zasukhin      [ I feel the need...the need for speed ]
> -------------------------------------------------------------
> e-mail: ruslan@p...
> web: http://www.paradigmasoft.com
> 
> To subscribe to the Valentina mail list go to:
> http://lists.macserve.net/mailman/listinfo/valentina
> -------------------------------------------------------------





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Fri Nov 12 15:55:25 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
In-Reply-To: <BDBB155C.235A4%sunshine@public.kherson.ua>
Message-ID: <Pine.LNX.4.44.0411121550080.27249-100000@g4.pauljlucas.org>


On Sat, 13 Nov 2004, Ruslan Zasukhin wrote:

> Have you ever open the object of std::string In the debugger.
> For different vendors this class have 2-3 levels of construction.

	And most of this is inlined.  When you single-step in a
	debugger, it goes to the original source line.  In reality,
	most of the construction is inlined and optimized away.

> std::string class is very overloaded.

	I'm not sure what that means, exactly, but the size of the API
	has zero correlation to efficiency.

> Let me answer that in our project we DO NOT use any STD classes,
> Because we have prove they are not effective for our tasks... And because we
> always can write own optimized for our task implementation.

	You do realize that std::string is actually a template and that
	you can plug-in your own underpinning while retaining the
	std::string API, right?

> May be ANTLR in the _public_ API which we will use in our apps,
> Should expose just char*. Then "problem" you point will go away.
> If you like std::string in your app no problems
> 
>     std::string str = antlr::foo_get_token()

	And then the problem is right back again: if ANTLR used
	std::string internally (or any string) and it converts to char*
	and if you use some string class, your object ("str" above) has
	to construct itself -- performance hit.  Now if ANTLR returned
	std::string by reference and you did the assigment above, it's a
	simple pointer copy.

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From j.klaren at utwente.nl  Fri Nov 12 16:10:12 2004
From: j.klaren at utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
In-Reply-To: <BDBB0E3F.2359C%sunshine@public.kherson.ua>
References: <BDBB0E3F.2359C%sunshine@public.kherson.ua>
Message-ID: <20041113001011.GO16297@cs.utwente.nl>

On Sat, Nov 13, 2004 at 01:05:03AM +0200, Ruslan Zasukhin wrote:
> They are not good :-(

Not really surprised :(

> * We will try urgently switch to Lex lexer.

This will probably get you a good increase in speed going on previous
benchmarks.

> * but IMHO on of the main problems of ANTLR C++, is that it heavally uses
> std::string class and a lots of *copying* of string when it parse tokens.

It copies indeed a lot. Among others the penalty for the ! operator in the
lexer. But also a lot of simple tokens could do without text (like for
operators, constant keywords and such).

> * may be another problem is in exceptions, although I like mechanizm of
> exceptions.

It depends on your grammar probably how much performance the exceptions
will kill.

> I think that for 3.0 Rick and community should produce own, special, very
> optimized for ANTLR tasks antl::string class. This class should simply have
> 2 pointers on start/end of tokem. Pointer must point directly into original
> parsed text. There is no need copy any byte of parsed text. Everything must
> work on pointers. Tell me that I am wrong?! :-)

The current C prototype uses mmap and during parsing indices are used into
the mmap'd buffer. So far it only uses numbers for tokens. I put of the
decision on how the text goes into the token, now the text is available in
a temporary buffer and it's now up to the programmer to copy it (note still
prototype). I'd love to make that somehow configurable (by template
switching or some other tricks).

The C prototype does not use exceptions for error handling but return
values, this again leads to loads of if(ok) checks. If this works
out/performs well I'll copy that approach to C++ mode as well. I'm
currently working on glueing a prototype C java lexer to the antlr2 parser
to get some comparison results to the current lexer.

The prototype generates for now selfcontained lexer/parsers (e.g. no
support lib). It should also be fully reentrant.

The stringtemplates currently still impose a structure that

1. reads input and decide which way to go. (Done via simpele nested checks
   or via a DFA built with goto's in the case of infinite prefixes)
2. go that way and reread the input (and actually once more do the check
   already done in step 1)

Yet the impact with the current prototype should be less compared to the
lexers in antlr2 (and to some extent you can customize the templates to
inline more). Ter also mentioned that the most obvious of those read and
reread cases could be optimized. In the case of big lookahead for a
prediction the current setup could lead to trashing.

A problem with the mmap approach is though that you can't parse files that
are ridiculously big (I think.. not 100% sure there) and problems may arise
with OS'es that do not have it (then again you can read it directly into a
buffer and index that).

With the ANTLR3 C++ support code I'd rather make it easy to plug in own
custom string classes than supply another string library that needs to be
maintained (although people have offered custom string libraries) Also the
unicode story will crop up pretty quick when we talk string classes.

I would prefer to have an even smaller core support lib than we have now
(and provide more of the advanced features via example code).

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  "Of all the things I've lost I miss my mind the most --- Ozzy Osbourne

From klaren at cs.utwente.nl  Fri Nov 12 16:10:12 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
In-Reply-To: <BDBB0E3F.2359C%sunshine@public.kherson.ua>
References: <BDBB0E3F.2359C%sunshine@public.kherson.ua>
Message-ID: <20041113001011.GO16297@cs.utwente.nl>


On Sat, Nov 13, 2004 at 01:05:03AM +0200, Ruslan Zasukhin wrote:
> They are not good :-(

Not really surprised :(

> * We will try urgently switch to Lex lexer.

This will probably get you a good increase in speed going on previous
benchmarks.

> * but IMHO on of the main problems of ANTLR C++, is that it heavally uses
> std::string class and a lots of *copying* of string when it parse tokens.

It copies indeed a lot. Among others the penalty for the ! operator in the
lexer. But also a lot of simple tokens could do without text (like for
operators, constant keywords and such).

> * may be another problem is in exceptions, although I like mechanizm of
> exceptions.

It depends on your grammar probably how much performance the exceptions
will kill.

> I think that for 3.0 Rick and community should produce own, special, very
> optimized for ANTLR tasks antl::string class. This class should simply have
> 2 pointers on start/end of tokem. Pointer must point directly into original
> parsed text. There is no need copy any byte of parsed text. Everything must
> work on pointers. Tell me that I am wrong?! :-)

The current C prototype uses mmap and during parsing indices are used into
the mmap'd buffer. So far it only uses numbers for tokens. I put of the
decision on how the text goes into the token, now the text is available in
a temporary buffer and it's now up to the programmer to copy it (note still
prototype). I'd love to make that somehow configurable (by template
switching or some other tricks).

The C prototype does not use exceptions for error handling but return
values, this again leads to loads of if(ok) checks. If this works
out/performs well I'll copy that approach to C++ mode as well. I'm
currently working on glueing a prototype C java lexer to the antlr2 parser
to get some comparison results to the current lexer.

The prototype generates for now selfcontained lexer/parsers (e.g. no
support lib). It should also be fully reentrant.

The stringtemplates currently still impose a structure that

1. reads input and decide which way to go. (Done via simpele nested checks
   or via a DFA built with goto's in the case of infinite prefixes)
2. go that way and reread the input (and actually once more do the check
   already done in step 1)

Yet the impact with the current prototype should be less compared to the
lexers in antlr2 (and to some extent you can customize the templates to
inline more). Ter also mentioned that the most obvious of those read and
reread cases could be optimized. In the case of big lookahead for a
prediction the current setup could lead to trashing.

A problem with the mmap approach is though that you can't parse files that
are ridiculously big (I think.. not 100% sure there) and problems may arise
with OS'es that do not have it (then again you can read it directly into a
buffer and index that).

With the ANTLR3 C++ support code I'd rather make it easy to plug in own
custom string classes than supply another string library that needs to be
maintained (although people have offered custom string libraries) Also the
unicode story will crop up pretty quick when we talk string classes.

I would prefer to have an even smaller core support lib than we have now
(and provide more of the advanced features via example code).

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  "Of all the things I've lost I miss my mind the most --- Ozzy Osbourne



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From braden at endoframe.com  Fri Nov 12 16:20:48 2004
From: braden at endoframe.com (Braden McDaniel)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
In-Reply-To: <Pine.LNX.4.44.0411121550080.27249-100000@g4.pauljlucas.org>
References: <Pine.LNX.4.44.0411121550080.27249-100000@g4.pauljlucas.org>
Message-ID: <41955360.7090401@endoframe.com>


Paul J. Lucas wrote:
> On Sat, 13 Nov 2004, Ruslan Zasukhin wrote:
> 
> 
>>Have you ever open the object of std::string In the debugger.
>>For different vendors this class have 2-3 levels of construction.
> 
> 
> 	And most of this is inlined.  When you single-step in a
> 	debugger, it goes to the original source line.  In reality,
> 	most of the construction is inlined and optimized away.
> 
> 
>>std::string class is very overloaded.
> 
> 
> 	I'm not sure what that means, exactly, but the size of the API
> 	has zero correlation to efficiency.
> 
> 
>>Let me answer that in our project we DO NOT use any STD classes,
>>Because we have prove they are not effective for our tasks... And because we
>>always can write own optimized for our task implementation.
> 
> 
> 	You do realize that std::string is actually a template and that
> 	you can plug-in your own underpinning while retaining the
> 	std::string API, right?

To a degree. You can't specialize std::basic_string for char or wchar_t, 
because those already exist (and are typedef'd as std::string and 
std::wstring, respectively). You can, of course, write your own class 
(or class template) with an API just like std::basic_string.

>>May be ANTLR in the _public_ API which we will use in our apps,
>>Should expose just char*. Then "problem" you point will go away.
>>If you like std::string in your app no problems
>>
>>    std::string str = antlr::foo_get_token()

Ruslan, so far you've provided no evidence that std::string is the 
problem. That's not to suggest that it's not; but I don't think you'll 
get much traction for such a change without reproducible data.

(And that is without raising the issue of whose std::string we're 
talking about.)

> 	And then the problem is right back again: if ANTLR used
> 	std::string internally (or any string) and it converts to char*
> 	and if you use some string class, your object ("str" above) has
> 	to construct itself -- performance hit.  Now if ANTLR returned
> 	std::string by reference and you did the assigment above, it's a
> 	simple pointer copy.

The typical std::string implementation is unlikely to be ideal from an 
efficiency perspective. That's not its role; its role is to be adequate. 
The performance characteristics required of a string class are 
sufficiently application specific that "one size fits most" is probably 
the best the C++ standard library will ever provide.

There's no question that ANTLR could provide a better one. The only 
question is whether std::string tends to be enough of a performance 
bottleneck to make it worth the effort.

Braden


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From braden at endoframe.com  Fri Nov 12 16:24:23 2004
From: braden at endoframe.com (Braden McDaniel)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
In-Reply-To: <200411122340.iACNeow25845@shell2.webquarry.com>
References: <200411122340.iACNeow25845@shell2.webquarry.com>
Message-ID: <41955437.4010801@endoframe.com>


iank@bearcave.com wrote:

>   I wrote a reference counted string container originally for ANTLR.
>   However I never integrated it into ANTLR.  Obviously it is written
>   in C++ and is available under something like the BSD license (e.g.,
>   you can do what ever you want with it, but you can't blame me for
>   any problems you encounter).  See
> 
>      http://www.bearcave.com/software/string/index.html
> 
>   I have not benchmarked this against the GNU std::string, so I don't
>   know if it is faster or not.  It does properly implement reference
>   counted copy-on-write semantics (which is more difficult than I
>   thought in C++).  So copying should not be an issue, since it just
>   copies pointers.

It's worth noting here that COW has fallen out of favor in many 
std::string implementations because it performs poorly when strings are 
shared between threads.

I believe, however, that the GNU libstdc++ std::string still uses COW.

Braden


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Fri Nov 12 17:57:58 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] Re: trees with payloads??
In-Reply-To: <cn3db9+nf3v@eGroups.com>
References: <16789.1317.454821.628029@despot.non.net>
	<cn3db9+nf3v@eGroups.com>
Message-ID: <16789.27174.972126.941221@despot.non.net>


>>>>> "lgcraymer" == lgcraymer  <lgc@mail1.jpl.nasa.gov> writes:
>>>>>> <johnm-antlr@n...> wrote:
[...]

[...dynamically scope attributes...]

> As have I, which is why I am in the believers camp.  However, it could
> still be a feature which is only occasionally useful; until we try it
> out, we won't know otherwise.

Um, er, doing symbol tables is a pretty fundamental need in doing
non-trivial translators.  The dynamically scoped attribute support is, at
the very least, the building block of symbol table management.

Um, er, variations of symbol table management such as def-use chaining
abound in non-trivial translation tasks.

As a personal data point that's completely current... In my current gig,
I'm doing a lot of tree mutation that involves splitting and splicing the
existing tree parts along with completely new parts.  All of the bookeeping
to make that work is, alas, all manually implemented dynamic attributes
(various incestuous combinations of inherited attributes, rule return
values, and propagated standard and manual tree construction).  The
"natural" solution to every single one of the non-trivial transformation
tasks came to mind using dynamically scoped attributes -- then I had to
make it work in the current Antlr.


>> As I noted for the notes from the workshop, the dynamically scoped
>> attributes need to support cabilities for things like LIFO & FIFO
>> access; specification of things like at most one/n, exactly one/n, at
>> least one/n; pushing/popping bundles of attributes; search current scope
>> for attribute, search up stack for attribute; etc.

> This is an area where implementation is likely to have significant impact
> on performance.  Yes, we should probably support multi-valued attributes
> directly as well as the dynamic scoping, but "capability first!" is the
> wrong mantra.

Capability and Simplicity are the two driving forces in Antlr v3.
Sometimes they coincide and sometimes they are in direct opposition and
usually the reality is somewhere in the middle.

An underlying question that I keep hearing in your posts is the question of
where do we draw the line as to what goes into the Antlr core and what is
left to add-ons, libraries, the whim of the code generators and runtimes,
etc.  I think that's the question that we need to be ruthless in always
asking and ruthlessly honest in pursuing the answers.

> We also need to look at what disciplines are necessary when using
> dynamically scoped attributes for understandability and maintainability.
> There are issues of data typing for generated code, context (which scopes
> should be searched?)  management, and grammar maintainability (what
> scopes might apply) that need to be considered in the design.  Otherwise,
> dynamically scoped attributes can have as much negative impact as
> templates have for C++ as well as having equivalent positive impact.  "I
> can do everything" can translate to "I can maintain nothing": the range
> of implementation models allowed can have a great deal of impact.
> Debugging usage of dynamically scoped attributes could be a nightmare.

I hear ya.

I'm less paranoid because the pervasive backbone provided by the grammars
themselves makes dynamically scoped attributes in Antlr qualitatively
constrained as compared to dynamically scoped variables in general purpose
programming languages.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From sunshine at public.kherson.ua  Fri Nov 12 18:02:38 2004
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
In-Reply-To: <Pine.LNX.4.44.0411121550080.27249-100000@g4.pauljlucas.org>
Message-ID: <BDBB37DE.235C4%sunshine@public.kherson.ua>


On 11/13/04 1:55 AM, "Paul J. Lucas" <pauljlucas@mac.com> wrote:

>> Have you ever open the object of std::string In the debugger.
>> For different vendors this class have 2-3 levels of construction.
> 
> And most of this is inlined.  When you single-step in a
> debugger, it goes to the original source line.  In reality,
> most of the construction is inlined and optimized away.

Here can be deep discussion, starting from

1) that exists opinion that deep inlining is devil for CPU caching.

2) finishing that I mean not inlining but structure of std::string object
itself. It have indirect pointers. Few levels. Each indirect pointer slow
down performance. By my tests in general in 3 times.


We need simplest class with just 2 direct pointer.
I think even ref counting is not needed.


-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From sunshine at public.kherson.ua  Fri Nov 12 18:08:38 2004
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
In-Reply-To: <Pine.LNX.4.44.0411121550080.27249-100000@g4.pauljlucas.org>
Message-ID: <BDBB3946.235C8%sunshine@public.kherson.ua>


On 11/13/04 1:55 AM, "Paul J. Lucas" <pauljlucas@mac.com> wrote:

>> Let me answer that in our project we DO NOT use any STD classes,
>> Because we have prove they are not effective for our tasks... And because we
>> always can write own optimized for our task implementation.
> 
> You do realize that std::string is actually a template

:-) Paul, I am not newbie.

We have eat a dog on optimization issues.

FYI, Valentina is known to be faster in hundreds of times of other dbs.
And Valentina is true disk-based DBMS. I.e. I mean we get our speed not
because we are RAM-based db, no. just we use special algorithms. May be some
code we write in more effective way than mySQL guys...

So do not worry, we know what is a C++ template and how they works :-)

> and that you can plug-in your own underpinning while retaining the
> std::string API, right?

actually not so easy task
 

>> May be ANTLR in the _public_ API which we will use in our apps,
>> Should expose just char*. Then "problem" you point will go away.
>> If you like std::string in your app no problems
>> 
>>     std::string str = antlr::foo_get_token()
> 
> And then the problem is right back again: if ANTLR used
> std::string internally (or any string) and it converts to char*
> and if you use some string class, your object ("str" above) has
> to construct itself -- performance hit.

No, because if antlr::string will be as light-weight as 8 bytes (2 pointers)
And will give us before this 10 times win, then construction of my::string
is still wining.

In the worse case I can even not my::construct string object.
I can just call strcmp or else string methods.
So work will be done only in pointers.


> Now if ANTLR returned
> std::string by reference and you did the assigment above, it's a
> simple pointer copy.

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From sunshine at public.kherson.ua  Fri Nov 12 18:11:33 2004
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
In-Reply-To: <20041113001011.GO16297@cs.utwente.nl>
Message-ID: <BDBB39F5.235C9%sunshine@public.kherson.ua>


On 11/13/04 2:10 AM, "Ric Klaren" <klaren@cs.utwente.nl> wrote:

>> I think that for 3.0 Rick and community should produce own, special, very
>> optimized for ANTLR tasks antl::string class. This class should simply have
>> 2 pointers on start/end of tokem. Pointer must point directly into original
>> parsed text. There is no need copy any byte of parsed text. Everything must
>> work on pointers. Tell me that I am wrong?! :-)
> 
> The current C prototype uses mmap and during parsing indices are used into
> the mmap'd buffer. So far it only uses numbers for tokens. I put of the
> decision on how the text goes into the token, now the text is available in
> a temporary buffer and it's now up to the programmer to copy it (note still
> prototype). I'd love to make that somehow configurable (by template
> switching or some other tricks).

Please point me directly.

Does exists ANTLR 3.0 alpha/beta download ?

What URL ?

Thank you in advance.


-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From sunshine at public.kherson.ua  Fri Nov 12 18:13:43 2004
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results. // IBM ICU
In-Reply-To: <20041113001011.GO16297@cs.utwente.nl>
Message-ID: <BDBB3A77.235CA%sunshine@public.kherson.ua>


On 11/13/04 2:10 AM, "Ric Klaren" <klaren@cs.utwente.nl> wrote:

> The C prototype does not use exceptions for error handling but return
> values, this again leads to loads of if(ok) checks. If this works
> out/performs well I'll copy that approach to C++ mode as well. I'm
> currently working on glueing a prototype C java lexer to the antlr2 parser
> to get some comparison results to the current lexer.

Rick,

Have you see how errors are handled in the IBM ICU unicode library ?

They use interesting idea which affect performance it seems and simplify
coding


-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From sunshine at public.kherson.ua  Fri Nov 12 18:15:18 2004
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
In-Reply-To: <20041113001011.GO16297@cs.utwente.nl>
Message-ID: <BDBB3AD6.235CB%sunshine@public.kherson.ua>


On 11/13/04 2:10 AM, "Ric Klaren" <klaren@cs.utwente.nl> wrote:

> 
> A problem with the mmap approach is though that you can't parse files that

Mmap... But if I have not file but just string ?


> are ridiculously big (I think.. not 100% sure there) and problems may arise
> with OS'es that do not have it (then again you can read it directly into a
> buffer and index that).

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From sunshine at public.kherson.ua  Fri Nov 12 18:17:54 2004
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
In-Reply-To: <20041113001011.GO16297@cs.utwente.nl>
Message-ID: <BDBB3B72.235CF%sunshine@public.kherson.ua>


On 11/13/04 2:10 AM, "Ric Klaren" <klaren@cs.utwente.nl> wrote:

> With the ANTLR3 C++ support code I'd rather make it easy to plug in own
> custom string classes than supply another string library that needs to be
> maintained (although people have offered custom string libraries) Also the
> unicode story will crop up pretty quick when we talk string classes.

May be this is good idea.

Then I think only real way -- to use Policy method (based on templates)

I.e. No virtual methods.
Just exists some pre-defined API.

If somebody want own string class, then he need to write small class that
repeat policy API and redirect calls to that string class.


Another way -- interfaces. But this bring overload of virtual calls.
3 times slow down on each call.


> I would prefer to have an even smaller core support lib than we have now
> (and provide more of the advanced features via example code).

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From sunshine at public.kherson.ua  Fri Nov 12 18:24:45 2004
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
In-Reply-To: <41955360.7090401@endoframe.com>
Message-ID: <BDBB3D0D.235D8%sunshine@public.kherson.ua>


On 11/13/04 2:20 AM, "Braden McDaniel" <braden@endoframe.com> wrote:

>>> May be ANTLR in the _public_ API which we will use in our apps,
>>> Should expose just char*. Then "problem" you point will go away.
>>> If you like std::string in your app no problems
>>> 
>>>    std::string str = antlr::foo_get_token()
> 
> Ruslan, so far you've provided no evidence that std::string is the
> problem. 

Right Braden, right.

But it is my expectation. And taking into account that I have spend months
in profiler optimizing Valentina 1.x I hope I can trust to my internal
intuition. 

Just my credo differ from credo:
    early optimization is devil.

I believe that each good developer of master level should feel what way is
better and faster. 

Of course std::string is not the only problem. No.
But I think it is one of the major problems.

We have string to parse, say 2000 bytes.
I do not see ANY REASON to copy any byte from this string to some other
location. Evertyhing can be done only with help of pointers.

You need token that points on firs word?
Okay, make 2 pointers
    p1  -> SELECT * FROM T
    p2  -> * FROM T

Why we need anything else ?!

100% enough... 

> That's not to suggest that it's not; but I don't think you'll
> get much traction for such a change without reproducible data.
> 
> (And that is without raising the issue of whose std::string we're
> talking about.)


And I remember on this list one guy from Russia have write 5-7 tips which he
have apply to generated parser and have made it several times faster.
I also going to find his letter and check if this can work for us.


-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From sunshine at public.kherson.ua  Fri Nov 12 18:28:55 2004
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
In-Reply-To: <41955360.7090401@endoframe.com>
Message-ID: <BDBB3E07.235DB%sunshine@public.kherson.ua>


On 11/13/04 2:20 AM, "Braden McDaniel" <braden@endoframe.com> wrote:

>> And then the problem is right back again: if ANTLR used
>> std::string internally (or any string) and it converts to char*
>> and if you use some string class, your object ("str" above) has
>> to construct itself -- performance hit.  Now if ANTLR returned
>> std::string by reference and you did the assigment above, it's a
>> simple pointer copy.
> 
> The typical std::string implementation is unlikely to be ideal from an
> efficiency perspective. That's not its role; its role is to be adequate.
> The performance characteristics required of a string class are
> sufficiently application specific that "one size fits most" is probably
> the best the C++ standard library will ever provide.
> 
> There's no question that ANTLR could provide a better one. The only
> question is whether std::string tends to be enough of a performance
> bottleneck to make it worth the effort.

I am used to think in this way:

    in ideal system cannot be not ideal parts.
    each part must be ideal.
    right?  :-)

The idea of late optimization is good for GUI-apps for exmaple.

A DBMS, and such tool as ANTLR, which can execute some part of code
millions of times MUST BE ideal.

    1000 seconds == 15 minutes
    == on modern hardware == far far away from ideal    :^)


-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Fri Nov 12 18:50:14 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] Re: trees with payloads??
In-Reply-To: <16789.27174.972126.941221@despot.non.net>
Message-ID: <cn3sp6+978e@eGroups.com>



--- In antlr-interest@yahoogroups.com, "John D. Mitchell"
<johnm-antlr@n...> wrote:
> >>>>> "lgcraymer" == lgcraymer  <lgc@m...> writes:
> >>>>>> <johnm-antlr@n...> wrote:
> [...]
> 
> [...dynamically scope attributes...]
> 
> > As have I, which is why I am in the believers camp.  However, it could
> > still be a feature which is only occasionally useful; until we try it
> > out, we won't know otherwise.
> 
> Um, er, doing symbol tables is a pretty fundamental need in doing
> non-trivial translators.  The dynamically scoped attribute support
is, at
> the very least, the building block of symbol table management.
> 
> Um, er, variations of symbol table management such as def-use chaining
> abound in non-trivial translation tasks.

That is certainly true, but it is also clear that you assume that
dictionaries/hash tables are fundamental to providing dynamic
attribute support.  I don't; in fact I think that that approach would
lead to poor performance in the hands of typical developers and should
be avoided for that reason.  From my perspective, symbol table support
is almost orthogonal to the dynamically scoped attributes.

> As a personal data point that's completely current... In my current gig,
> I'm doing a lot of tree mutation that involves splitting and
splicing the
> existing tree parts along with completely new parts.  All of the
bookeeping
> to make that work is, alas, all manually implemented dynamic attributes
> (various incestuous combinations of inherited attributes, rule return
> values, and propagated standard and manual tree construction).  The
> "natural" solution to every single one of the non-trivial transformation
> tasks came to mind using dynamically scoped attributes -- then I had to
> make it work in the current Antlr.

Been there; done that; I remember the pain.

> 
> >> As I noted for the notes from the workshop, the dynamically scoped
> >> attributes need to support cabilities for things like LIFO & FIFO
> >> access; specification of things like at most one/n, exactly one/n, at
> >> least one/n; pushing/popping bundles of attributes; search
current scope
> >> for attribute, search up stack for attribute; etc.
> 
> > This is an area where implementation is likely to have significant
impact
> > on performance.  Yes, we should probably support multi-valued
attributes
> > directly as well as the dynamic scoping, but "capability first!"
is the
> > wrong mantra.
> 
> Capability and Simplicity are the two driving forces in Antlr v3.
> Sometimes they coincide and sometimes they are in direct opposition and
> usually the reality is somewhere in the middle.

You have left out Performance; that was the driver that got Ter
started on DFAs for lexers and from there to the LL(*) model.
"Capability" has differing interpretations:  the real goal is fast
turnaround of language processors, not to try to incorporate all
features which might be useful.  Simplicity actually just sort of
crept in; I would say that it is present "only" as a matter of good
design practice.

> An underlying question that I keep hearing in your posts is the
question of
> where do we draw the line as to what goes into the Antlr core and
what is
> left to add-ons, libraries, the whim of the code generators and
runtimes,
> etc.  I think that's the question that we need to be ruthless in always
> asking and ruthlessly honest in pursuing the answers.

There are too many custom classes in ANTLR 2--lists, bit arrays,
etc.--that could be done away with.  There are also features like AST
class generation which could be easily supported but are not. 
Incorporating these would significantly improve usability.

I would definitely quibble with the idea that things are left up to
the whim of the code generators.  ANTLR 2 proved that code generation
was very much at the mercy of the implementation model.  I don't
really think that ANTLR 3 will be much different, and that is
especially true for attribute support.

> > We also need to look at what disciplines are necessary when using
> > dynamically scoped attributes for understandability and
maintainability.
> > There are issues of data typing for generated code, context (which
scopes
> > should be searched?)  management, and grammar maintainability (what
> > scopes might apply) that need to be considered in the design. 
Otherwise,
> > dynamically scoped attributes can have as much negative impact as
> > templates have for C++ as well as having equivalent positive
impact.  "I
> > can do everything" can translate to "I can maintain nothing": the
range
> > of implementation models allowed can have a great deal of impact.
> > Debugging usage of dynamically scoped attributes could be a nightmare.
> 
> I hear ya.
> 
> I'm less paranoid because the pervasive backbone provided by the
grammars
> themselves makes dynamically scoped attributes in Antlr qualitatively
> constrained as compared to dynamically scoped variables in general
purpose
> programming languages.

I've seen too many cases of "if it can be abused, it will be abused
whole-heartedly; FUBAR is a way of life".  You should be very paranoid.

--Loring

> Take care,
> 	John





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Fri Nov 12 21:39:57 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
In-Reply-To: <BDBB39F5.235C9%sunshine@public.kherson.ua>
References: <20041113001011.GO16297@cs.utwente.nl>
	<BDBB39F5.235C9%sunshine@public.kherson.ua>
Message-ID: <16789.40493.644940.665137@despot.non.net>


>>>>> "Ruslan" == Ruslan Zasukhin <sunshine@public.kherson.ua> writes:
[...]

> Does exists ANTLR 3.0 alpha/beta download ?

Sorry, no, there's no public availability yet.

John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Fri Nov 12 21:42:07 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
In-Reply-To: <BDBB3AD6.235CB%sunshine@public.kherson.ua>
References: <20041113001011.GO16297@cs.utwente.nl>
	<BDBB3AD6.235CB%sunshine@public.kherson.ua>
Message-ID: <16789.40623.137964.193938@despot.non.net>


>>>>> "Ruslan" == Ruslan Zasukhin <sunshine@public.kherson.ua> writes:
[...]

>> A problem with the mmap approach is though that you can't parse files
>> that

> Mmap... But if I have not file but just string ?

You just pass in the whole string.

If you only have a stream, you pass in the stream and take the extra
performance hit.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Fri Nov 12 22:54:35 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] Re: trees with payloads??
In-Reply-To: <cn3sp6+978e@eGroups.com>
References: <16789.27174.972126.941221@despot.non.net>
	<cn3sp6+978e@eGroups.com>
Message-ID: <16789.44971.259271.405894@despot.non.net>


>>>>> "lgcraymer" == lgcraymer  <lgc@mail1.jpl.nasa.gov> writes:
>>>>>> <johnm-antlr@n...> wrote:
[...]

Sigh.  This is going to be my last post on this thread.

[...dynamically scoped attributes...]

> That is certainly true, but it is also clear that you assume that
> dictionaries/hash tables are fundamental to providing dynamic attribute
> support.

I think that I've been explicitly clear on the fact that I don't care how a
given code generator & runtime implement the model.  Just that they
implement the model with fidelity. I.e., I'm a firm advocate for the "as
if" rule.

> I don't; in fact I think that that approach would lead to poor
> performance in the hands of typical developers and should be avoided for
> that reason.  From my perspective, symbol table support is almost
> orthogonal to the dynamically scoped attributes.

And driving things to an overly static model is certainly something that
I'm worried about in the face of too much "performance at all costs"
whining and complaining prior to serious profiling [and folks please be
clear that I'm talking about Antlr v3 -- we all know that v2 has serious
problems in terms of e.g., performance.]

[...]

>> Capability and Simplicity are the two driving forces in Antlr v3.
>> Sometimes they coincide and sometimes they are in direct opposition and
>> usually the reality is somewhere in the middle.

> You have left out Performance; that was the driver that got Ter started
> on DFAs for lexers and from there to the LL(*) model.  "Capability" has
> differing interpretations: the real goal is fast turnaround of language
> processors, not to try to incorporate all features which might be useful.
> Simplicity actually just sort of crept in; I would say that it is present
> "only" as a matter of good design practice.

No, you're missing a key point that performance as a requirement is just
another capability.

Simplicity is not a side-issue. It's absolutely essential.  For one, it's
one of the things that keeps the "creeping featuritis" from taking over.
Also, true simplicity (from a systemic perspective, not just myopically :-)
increases performance, reliability, robustness, and power.


>> An underlying question that I keep hearing in your posts is the question
>> of where do we draw the line as to what goes into the Antlr core and
>> what is left to add-ons, libraries, the whim of the code generators and
>> runtimes, etc.  I think that's the question that we need to be ruthless
>> in always asking and ruthlessly honest in pursuing the answers.

> There are too many custom classes in ANTLR 2--lists, bit arrays,
> etc.--that could be done away with.

Yep, and many of them won't be coming back in v3.  Yee haa!

> There are also features like AST class generation which could be easily
> supported but are not.  Incorporating these would significantly improve
> usability.

I, for one, am certainly interested in hearing such ideas.  [Up until the
last week or so, Ter has been pretty ruthless in staying away from thinking
(let alone talking) about trees so that he could stay focused on lexing and
parsing.]  In terms of generating AST classes that would help deal with the
whole homogeneous vs. heterogeneous tree war. :-)


> I would definitely quibble with the idea that things are left up to the
> whim of the code generators.  ANTLR 2 proved that code generation was
> very much at the mercy of the implementation model.  I don't really think
> that ANTLR 3 will be much different, and that is especially true for
> attribute support.

I wouldn't use the word "whim" as the code generators (at least any that
want to become "official") have to support all of the Antlr core model.

[...]

>> I'm less paranoid because the pervasive backbone provided by the
>> grammars themselves makes dynamically scoped attributes in Antlr
>> qualitatively constrained as compared to dynamically scoped variables in
>> general purpose programming languages.

> I've seen too many cases of "if it can be abused, it will be abused
> whole-heartedly; FUBAR is a way of life".  You should be very paranoid.

Colloquially, I am paranoid but not petrified. Precisely, I deal in
balancing consequences.  Heck, I've worked on mission- and life-critical
systems: embedded, medical, and financial systems so I have a wee bit of an
idea about software quality. I've also written testing software and taught
software testing and development processes.  But, we do need to be clear
that (production) use of Antlr is not targeted at incompetent people and
therefore my calibration is different.

As I noted, the structure of a grammar literally provides a backbone to
(each phase of a translation) system and that fundamentally changes the
basis against which the dynamically scoped attributes will be used
(especially in comparison to the wild west nightmare of old-school
dynamically scoped variables in general purpose programming languages).
Can they be abused?  Of course.  But is that risk in the context of Antlr
fundamentally any different than letting people manipulate trees (or heck,
giving people the ability to lex and parse in the first place)?
Manipulating code is non-trivial.

Leaving out a fundamental, enabling capability from Antlr is, IMNSHO,
unacceptable.  Again, as I've noted, people manually build their own takes
on dynamically scoped attributes over and over and over again for a wide
variety of uses.  Adding capacity for allowing the dynamic attributes to
exist is very cheap in both time and space. So, the bang for the buck is a
no brainer.  If you have better ways of providing this capability, I'm all
ears.

Thanks,
	John



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From alexsedow at mail.ru  Sat Nov 13 00:21:41 2004
From: alexsedow at mail.ru (Alex Sedow)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
References: <BDBB3D0D.235D8%sunshine@public.kherson.ua>
Message-ID: <003d01c4c959$cdfb3040$07060b0a@home>


> And I remember on this list one guy from Russia have write 5-7 tips which
he
> have apply to generated parser and have made it several times faster.
> I also going to find his letter and check if this can work for us.
>
>
> --
> Best regards,
> Ruslan Zasukhin      [ I feel the need...the need for speed ]
> -------------------------------------------------------------

Hello Ruslan!
Thank you, for remember me.
And thank you for confirm my conclusion - ANTLR/C++ lexer+parser 10 times
slower than hand-written C++ lexer+parser.

Of course, ANTLR/C++ must use its own string. Because custom string may
speed up parsing speed about 3-4 times. In my parsers I use special hash
string class. All structures (tokens, AST nodes) contains smart pointers to
hash strings.
Hash string internals:
offset, size, comment
0, 4, hash code <- pointers refers there
4, 4, reference counter
8, 4, string length
12, N, string (where N is sizeof of ASCIIZ string)
This structure is variable-sized and it always aligned to 2^M size. And I
use custom allocators for allocate/deallocate memory for this structure -
one allocator for every 2^M size (custom allocator on synthetic tests about
15-60 times faster than standart MSVC new).

Alex.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From sunshine at public.kherson.ua  Sat Nov 13 00:42:11 2004
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
In-Reply-To: <003d01c4c959$cdfb3040$07060b0a@home>
Message-ID: <BDBB9583.235FE%sunshine@public.kherson.ua>


On 11/13/04 10:21 AM, "Alex Sedow" <alexsedow@mail.ru> wrote:

>> And I remember on this list one guy from Russia have write 5-7 tips which
> he
>> have apply to generated parser and have made it several times faster.
>> I also going to find his letter and check if this can work for us.
>> 
>> 
>> --
>> Best regards,
>> Ruslan Zasukhin      [ I feel the need...the need for speed ]
>> -------------------------------------------------------------

Hi Alex,

> Hello Ruslan!
> Thank you, for remember me.

:-)

> And thank you for confirm my conclusion - ANTLR/C++ lexer+parser 10 times
> slower than hand-written C++ lexer+parser.

But I doubt we can develop manually SQL parser.
It is huge grammar.

> Of course, ANTLR/C++ must use its own string. Because custom string may
> speed up parsing speed about 3-4 times. In my parsers I use special hash
> string class. All structures (tokens, AST nodes) contains smart pointers to
> hash strings.
> Hash string internals:
> offset, size, comment
> 0, 4, hash code <- pointers refers there
> 4, 4, reference counter
> 8, 4, string length
> 12, N, string (where N is sizeof of ASCIIZ string)

Hmm. So you also copy strings? Why not simply pointer(s)?

> This structure is variable-sized and it always aligned to 2^M size. And I
> use custom allocators for allocate/deallocate memory for this structure -
> one allocator for every 2^M size (custom allocator on synthetic tests about
> 15-60 times faster than standart MSVC new).

Yes right. Btw, our benches was on Visual.
Aslo we will make with CodeWarrior.

CodeWarrior already have built-in manager for new,
And CodeWarrior's new is much faster of Visual's.
Aha. So on CW we can expect better results.

I wonder, 

1) how you replace ANTLR's std::string with you?

2) can you share all these classes ?

3) so in release you use PATCHED ANTLR parser ?
    or you have re-write all by hands? :-)


-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From alexsedow at mail.ru  Sat Nov 13 01:29:00 2004
From: alexsedow at mail.ru (Alex Sedow)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
References: <BDBB9583.235FE%sunshine@public.kherson.ua>
Message-ID: <005f01c4c963$352b9350$07060b0a@home>


> > And thank you for confirm my conclusion - ANTLR/C++ lexer+parser 10
times
> > slower than hand-written C++ lexer+parser.
>
> But I doubt we can develop manually SQL parser.
> It is huge grammar.
>
> > Of course, ANTLR/C++ must use its own string. Because custom string may
> > speed up parsing speed about 3-4 times. In my parsers I use special hash
> > string class. All structures (tokens, AST nodes) contains smart pointers
to
> > hash strings.
> > Hash string internals:
> > offset, size, comment
> > 0, 4, hash code <- pointers refers there
> > 4, 4, reference counter
> > 8, 4, string length
> > 12, N, string (where N is sizeof of ASCIIZ string)
>
> Hmm. So you also copy strings? Why not simply pointer(s)?

No string copying. I use reference counter pointers that refers to string
(string described above).

>
> > This structure is variable-sized and it always aligned to 2^M size. And
I
> > use custom allocators for allocate/deallocate memory for this
structure -
> > one allocator for every 2^M size (custom allocator on synthetic tests
about
> > 15-60 times faster than standart MSVC new).
>
> Yes right. Btw, our benches was on Visual.
> Aslo we will make with CodeWarrior.
>
> CodeWarrior already have built-in manager for new,
> And CodeWarrior's new is much faster of Visual's.
> Aha. So on CW we can expect better results.
>
> I wonder,
>
> 1) how you replace ANTLR's std::string with you?


I don't know how to attach custom string to ANTLR.

>
> 2) can you share all these classes ?

String, smart pointer - yes. But these classes very simple - every C++
programmer may write it.
Allocator (template) - no. I'm not ready to share it (but these is simple
too).

>
> 3) so in release you use PATCHED ANTLR parser ?
>     or you have re-write all by hands? :-)

Sorry. My lexer/parser for C# fully hand-written.

Alex.




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From sunshine at public.kherson.ua  Sat Nov 13 01:43:33 2004
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
In-Reply-To: <005f01c4c963$352b9350$07060b0a@home>
Message-ID: <BDBBA3E5.23608%sunshine@public.kherson.ua>


On 11/13/04 11:29 AM, "Alex Sedow" <alexsedow@mail.ru> wrote:

>>> Of course, ANTLR/C++ must use its own string. Because custom string may
>>> speed up parsing speed about 3-4 times. In my parsers I use special hash
>>> string class. All structures (tokens, AST nodes) contains smart pointers
> to
>>> hash strings.
>>> Hash string internals:
>>> offset, size, comment
>>> 0, 4, hash code <- pointers refers there
>>> 4, 4, reference counter
>>> 8, 4, string length
>>> 12, N, string (where N is sizeof of ASCIIZ string)
>> 
>> Hmm. So you also copy strings? Why not simply pointer(s)?
> 
> No string copying. I use reference counter pointers that refers to string
> (string described above).

I think you mean when you copy YOUR strings.

But what is this?

   12, N, string (where N is sizeof of ASCIIZ string)

As I understand -- this is copy of some word/token which you get from
original string. Right ?

So on creation of YOUR string instance, you make copy.
Right?


-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From sunshine at public.kherson.ua  Sat Nov 13 01:44:45 2004
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
In-Reply-To: <005f01c4c963$352b9350$07060b0a@home>
Message-ID: <BDBBA42D.23609%sunshine@public.kherson.ua>


On 11/13/04 11:29 AM, "Alex Sedow" <alexsedow@mail.ru> wrote:

>> 2) can you share all these classes ?
> 
> String, smart pointer - yes. But these classes very simple - every C++
> programmer may write it.

Time Alex. :-)

On the other hand since you say there is no way insert that into ANTLR...
This will not help us right now

> Allocator (template) - no. I'm not ready to share it (but these is simple
> too).



-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From alexsedow at mail.ru  Sat Nov 13 01:56:33 2004
From: alexsedow at mail.ru (Alex Sedow)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
References: <BDBBA3E5.23608%sunshine@public.kherson.ua>
Message-ID: <006b01c4c967$0e933780$07060b0a@home>


> On 11/13/04 11:29 AM, "Alex Sedow" <alexsedow@mail.ru> wrote:
>
> >>> Of course, ANTLR/C++ must use its own string. Because custom string
may
> >>> speed up parsing speed about 3-4 times. In my parsers I use special
hash
> >>> string class. All structures (tokens, AST nodes) contains smart
pointers
> > to
> >>> hash strings.
> >>> Hash string internals:
> >>> offset, size, comment
> >>> 0, 4, hash code <- pointers refers there
> >>> 4, 4, reference counter
> >>> 8, 4, string length
> >>> 12, N, string (where N is sizeof of ASCIIZ string)
> >>
> >> Hmm. So you also copy strings? Why not simply pointer(s)?
> >
> > No string copying. I use reference counter pointers that refers to
string
> > (string described above).
>
> I think you mean when you copy YOUR strings.
>
> But what is this?
>
>    12, N, string (where N is sizeof of ASCIIZ string)
>
> As I understand -- this is copy of some word/token which you get from
> original string. Right ?
>
> So on creation of YOUR string instance, you make copy.
> Right?
>

Yes, I copy string one time (when create) from source file (like C# source),
to structure.

>
> --
> Best regards,
> Ruslan Zasukhin      [ I feel the need...the need for speed ]



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From alexsedow at mail.ru  Sat Nov 13 02:06:25 2004
From: alexsedow at mail.ru (Alex Sedow)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
References: <BDBBA42D.23609%sunshine@public.kherson.ua>
Message-ID: <007501c4c968$720d1be0$07060b0a@home>


> On 11/13/04 11:29 AM, "Alex Sedow" <alexsedow@mail.ru> wrote:
>
> >> 2) can you share all these classes ?
> >
> > String, smart pointer - yes. But these classes very simple - every C++
> > programmer may write it.
>
> Time Alex. :-)
>
> On the other hand since you say there is no way insert that into ANTLR...
> This will not help us right now

I don't say that. I think it is no so hard replace std::string with pointer
to custom string (For people who know how to do that).

> --
> Best regards,
> Ruslan Zasukhin      [ I feel the need...the need for speed ]



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From sunshine at public.kherson.ua  Sat Nov 13 02:07:29 2004
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
In-Reply-To: <007501c4c968$720d1be0$07060b0a@home>
Message-ID: <BDBBA981.2360F%sunshine@public.kherson.ua>


On 11/13/04 12:06 PM, "Alex Sedow" <alexsedow@mail.ru> wrote:

>>> String, smart pointer - yes. But these classes very simple - every C++
>>> programmer may write it.
>> 
>> Time Alex. :-)
>> 
>> On the other hand since you say there is no way insert that into ANTLR...
>> This will not help us right now
> 
> I don't say that. I think it is no so hard replace std::string with pointer
> to custom string (For people who know how to do that).

Okay, then can you send it to sunshine@public.kherson.ua ?

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From alexsedow at mail.ru  Sat Nov 13 02:29:34 2004
From: alexsedow at mail.ru (Alex Sedow)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
References: <BDBBA981.2360F%sunshine@public.kherson.ua>
Message-ID: <008501c4c96b$ab935660$07060b0a@home>


> On 11/13/04 12:06 PM, "Alex Sedow" <alexsedow@mail.ru> wrote:
>
> >>> String, smart pointer - yes. But these classes very simple - every C++
> >>> programmer may write it.
> >>
> >> Time Alex. :-)
> >>
> >> On the other hand since you say there is no way insert that into
ANTLR...
> >> This will not help us right now
> >
> > I don't say that. I think it is no so hard replace std::string with
pointer
> > to custom string (For people who know how to do that).
>
> Okay, then can you send it to sunshine@public.kherson.ua ?

Ok. I'll send you files today (maybe with some comments).
But you must know that speed improvements you will get from combination
custom string/custom allocator, not from custom string class itself! I.e.
custom string representation must be optimized custom allocator. For
example, my strings optimized for fixed-sized allocator.

Alex.

>
> --
> Best regards,
> Ruslan Zasukhin      [ I feel the need...the need for speed ]



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From doublemalam at yahoo.co.uk  Sat Nov 13 02:58:01 2004
From: doublemalam at yahoo.co.uk (Muhammad Masoom Alam)
Date: Mon Dec 20 16:17:32 2004
Subject: [antlr-interest] very different behavoiur
In-Reply-To: <008b01c4c8d3$f9111f00$6701a8c0@internal.synopsys.com>
Message-ID: <20041113105801.50920.qmail@web86907.mail.ukl.yahoo.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: check.java
Type: application/octet-stream
Size: 332 bytes
Desc: check.java
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041113/63e79218/check.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.g
Type: application/octet-stream
Size: 2686 bytes
Desc: test.g
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041113/63e79218/test.obj
From johnm-antlr at non.net  Sat Nov 13 07:10:06 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
In-Reply-To: <BDBB9583.235FE%sunshine@public.kherson.ua>
References: <003d01c4c959$cdfb3040$07060b0a@home>
	<BDBB9583.235FE%sunshine@public.kherson.ua>
Message-ID: <16790.9166.414088.513462@despot.non.net>


>>>>> "Ruslan" == Ruslan Zasukhin <sunshine@public.kherson.ua> writes:
[...]

> Yes right. Btw, our benches was on Visual.  Aslo we will make with
> CodeWarrior.

> CodeWarrior already have built-in manager for new, And CodeWarrior's new
> is much faster of Visual's.  Aha. So on CW we can expect better results.

Has the world changed in more recent versions of MS Windows internals?
Certainly historically, the MS memory allocator was truly atrocious in
terms of performance.  Especially as churn and memory pressure increase.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From sunshine at public.kherson.ua  Sat Nov 13 08:39:36 2004
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
In-Reply-To: <16790.9166.414088.513462@despot.non.net>
Message-ID: <BDBC0568.23646%sunshine@public.kherson.ua>


On 11/13/04 5:10 PM, "John D. Mitchell" <johnm-antlr@non.net> wrote:

>>>>>> "Ruslan" == Ruslan Zasukhin <sunshine@public.kherson.ua> writes:
> [...]
> 
>> Yes right. Btw, our benches was on Visual.  Aslo we will make with
>> CodeWarrior.
> 
>> CodeWarrior already have built-in manager for new, And CodeWarrior's new
>> is much faster of Visual's.  Aha. So on CW we can expect better results.
> 
> Has the world changed in more recent versions of MS Windows internals?

> Certainly historically, the MS memory allocator was truly atrocious in
> terms of performance.  Especially as churn and memory pressure increase.

This is not issue of Windows internals!

If you look into sources of Visual libs, you will see that

    ::operator new()

Simply calls malloc().

This was in Visual 6.0 and it still in 7.x

In the CodeWarrior they use behind the operator new the whole Heap Manager,
Similar to one discussed in Stroustrup's book. CodeWarrior take care about
small objects and so on.


-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Sat Nov 13 11:33:26 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Re: BENCHMARK. ANTLR. Bad results.
In-Reply-To: <BDBB0E3F.2359C%sunshine@public.kherson.ua>
Message-ID: <cn5ni6+kmt6@eGroups.com>



--- In antlr-interest@yahoogroups.com, Ruslan Zasukhin <sunshine@p...>
wrote:
> Hi Guys.
> 
> Well, have gone 18 months as we have start to use ANTLR in our
project --
> Valentina DBMS, and now I have on hands results of benchmarks for
parsing.
> 
> They are not good :-(

Wasn't expecting otherwise given the subject of your post ;-)

<SNIP>

> ---------------------------------------------------
> We use C++ runtime of ANTLR.
> Benches was in the release compile, with full optimization on.
> 
> We have not study yet deeply where are problems.
> This is what we are going to do in the nearest time.

I was hoping you had run the code through a profiler to locate the
bottleneck *before* posting the results. That would have given us much
better performance info.

> Just I want to demonstrate that my expectation of bad performance of C++
> ANTLR runtime have become reality.
> 
> * We will try urgently switch to Lex lexer.

Well, you have been involved in many threads on ANTLR/C++'s
performance where the first advice is always to swich to a [F]Lex
lexer and, there is a sample that demonstrates this. 

> * but IMHO on of the main problems of ANTLR C++, is that it heavally
uses
> std::string class and a lots of *copying* of string when it parse
tokens.

Perhaps, but without hard profiling data, how can you be certain?.
More importantly, how can you convince other people to accept your
speculation?.

> * may be another problem is in exceptions, although I like mechanizm of
> exceptions.
> 
> I think that for 3.0 Rick and community should produce own, special,
very
> optimized for ANTLR tasks antl::string class. This class should
simply have
> 2 pointers on start/end of tokem. Pointer must point directly into
original
> parsed text. There is no need copy any byte of parsed text.
Everything must
> work on pointers. Tell me that I am wrong?! :-)

I can't but, I can at least ask that you take of one the simple
examples, generate the code then, modify a copy of the generated code
manually to implement the features you feel strongly about.

We can then test both versions. The results can then properly inform
the decisions that are made for v3 code generation.

Cheers,

ANTLR/C#






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From sunshine at public.kherson.ua  Sat Nov 13 12:19:09 2004
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Re: BENCHMARK. ANTLR. Bad results.
In-Reply-To: <cn5ni6+kmt6@eGroups.com>
Message-ID: <BDBC38DD.23681%sunshine@public.kherson.ua>


On 11/13/04 9:33 PM, "micheal_jor" <open.zone@virgin.net> wrote:

>> ---------------------------------------------------
>> We use C++ runtime of ANTLR.
>> Benches was in the release compile, with full optimization on.
>> 
>> We have not study yet deeply where are problems.
>> This is what we are going to do in the nearest time.
> 
> I was hoping you had run the code through a profiler to locate the
> bottleneck *before* posting the results. That would have given us much
> better performance info.
> 
>> Just I want to demonstrate that my expectation of bad performance of C++
>> ANTLR runtime have become reality.
>> 
>> * We will try urgently switch to Lex lexer.
> 
> Well, you have been involved in many threads on ANTLR/C++'s
> performance where the first advice is always to swich to a [F]Lex
> lexer and, there is a sample that demonstrates this.
> 
>> * but IMHO on of the main problems of ANTLR C++, is that it heavally uses
>> std::string class and a lots of *copying* of string when it parse tokens.
> 
> Perhaps, but without hard profiling data, how can you be certain?.

Oh Michael, I can.

Because last 10 years my main job is creation of super-fast piece of code.
I have made a lots of different profiles for a lots of algorithms,
with different compilers and different platforms.

So I hope I have enough experience to say "by eye measure"
that here or there things can be done better.

> More importantly, how can you convince other people to accept your
> speculation?.

Alex Sedow already have give you exact numbers:
    3-4 times speed up thanks to special string + allocator.

Do not worry. We will make profiling also and will try fix some things self.
Of course we will inform this list about results.


>> * may be another problem is in exceptions, although I like mechanizm of
>> exceptions.
>> 
>> I think that for 3.0 Rick and community should produce own, special, very
>> optimized for ANTLR tasks antl::string class. This class should simply have 2
>> pointers on start/end of tokem. Pointer must point directly into original
>> parsed text. There is no need copy any byte of parsed text. Everything must
>> work on pointers. Tell me that I am wrong?! :-)
> 
> I can't but, I can at least ask that you take of one the simple
> examples, generate the code then, modify a copy of the generated code
> manually to implement the features you feel strongly about.
> 
> We can then test both versions. The results can then properly inform
> the decisions that are made for v3 code generation.

Problem is that I do not have a lots of wish to study internals of ANTLR and
its algorithms. This is separate big task...

Exists major developers of ANTLR. I give an advice.
It is business of these developers listen or not.
It is business of these developers TRY and PROVE that std::string is best of
the best by speed.

But if they will find that special class can give us AT LEAST 10% of speed
up, then I vote for new class. I hope my logic is clear ?   :-)


Just I want underline. Many times was told:
    parsing is so fast task comparing to MAJOR DBMS tasks.

    Now we have the first benches which show that our DBMS
    can do work 10-15 times faster that parser itself.

    This means that _such_ parser become huge overhead for us.
    this is not pleasant of course.

I like ANTLR. We have spend 18 months with it.
So I'd prefer get faster ANLTR that to be forced for new parser.


-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Sat Nov 13 13:13:25 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Re: BENCHMARK. ANTLR. Bad results.
In-Reply-To: <BDBC38DD.23681%sunshine@public.kherson.ua>
Message-ID: <cn5tdl+10pam@eGroups.com>



--- In antlr-interest@yahoogroups.com, Ruslan Zasukhin <sunshine@p...>
wrote:

> > More importantly, how can you convince other people to accept your
> > speculation?.
> 
> Alex Sedow already have give you exact numbers:
>     3-4 times speed up thanks to special string + allocator.

OK, I got a 5-7x speedup just by buffering the whole input (tested
with C# not C++). In your tests, were you reading from a file or
memory buffer?

> Do not worry. We will make profiling also and will try fix some
things self.
> Of course we will inform this list about results.

That would be very useful.

> > I can't but, I can at least ask that you take of one the simple
> > examples, generate the code then, modify a copy of the generated code
> > manually to implement the features you feel strongly about.
> > 
> > We can then test both versions. The results can then properly inform
> > the decisions that are made for v3 code generation.
> 
> Problem is that I do not have a lots of wish to study internals of
ANTLR and
> its algorithms. This is separate big task...

You won't be studying ANTLR internals. You would be studying the ANTLR
generated code for a small sample - which you already do for your much
larger project - and augmenting it with changes that you believe would
make it run faster.

> Exists major developers of ANTLR. I give an advice.
> It is business of these developers listen or not.
> It is business of these developers TRY and PROVE that std::string is
best of
> the best by speed.

True but, ANTLR is an open source project whose developers are drawn
from it's pool of users. If you - as a user - can contribute to make
it go faster, why not do it?. It's to your benefit [too] right?

> But if they will find that special class can give us AT LEAST 10% of
speed
> up, then I vote for new class. I hope my logic is clear ?   :-)

Crystal.

> Just I want underline. Many times was told:
>     parsing is so fast task comparing to MAJOR DBMS tasks.
> 
>     Now we have the first benches which show that our DBMS
>     can do work 10-15 times faster that parser itself.
> 
>     This means that _such_ parser become huge overhead for us.
>     this is not pleasant of course.

Too big an overhead in anyone's estimation I'd presume. But the change
to [F]Lex lexing should reduce that considerably. Add a large-ish
in-memory buffer and you should be much happier.

> I like ANTLR. We have spend 18 months with it.
> So I'd prefer get faster ANLTR that to be forced for new parser.

ANTLR is getting faster. It can get there even quicker with more
people/resources.

Micheal
ANTLR/C#





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From sunshine at public.kherson.ua  Sat Nov 13 13:15:24 2004
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Re: BENCHMARK. ANTLR.
In-Reply-To: <cn5tdl+10pam@eGroups.com>
Message-ID: <BDBC460C.2368A%sunshine@public.kherson.ua>


On 11/13/04 11:13 PM, "micheal_jor" <open.zone@virgin.net> wrote:

>> Alex Sedow already have give you exact numbers:
>>     3-4 times speed up thanks to special string + allocator.
> 
> OK, I got a 5-7x speedup just by buffering the whole input (tested
> with C# not C++). In your tests, were you reading from a file or
> memory buffer?

We have just SQL query. 100-20-300 bytes.

So no files invoked.

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Sat Nov 13 13:24:44 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Re: BENCHMARK. ANTLR.
In-Reply-To: <BDBC460C.2368A%sunshine@public.kherson.ua>
Message-ID: <cn5u2s+3f51@eGroups.com>



--- In antlr-interest@yahoogroups.com, Ruslan Zasukhin <sunshine@p...>
wrote:

> >> Alex Sedow already have give you exact numbers:
> >>     3-4 times speed up thanks to special string + allocator.
> > 
> > OK, I got a 5-7x speedup just by buffering the whole input (tested
> > with C# not C++). In your tests, were you reading from a file or
> > memory buffer?
> 
> We have just SQL query. 100-20-300 bytes.
> 
> So no files invoked.

Ok and that also means the input is already buffered in memory.

Hate to ask you this but, you were reusing a single instance of the
Lexer/Parser to run all the million queries right?.

Cheers,

Micheal
ANTLR/C#






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From alexsedow at mail.ru  Sat Nov 13 13:35:25 2004
From: alexsedow at mail.ru (Alex Sedow)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Re: BENCHMARK. ANTLR. Bad results.
References: <cn5tdl+10pam@eGroups.com>
Message-ID: <01b901c4c9c8$b05b9290$07060b0a@home>


> --- In antlr-interest@yahoogroups.com, Ruslan Zasukhin <sunshine@p...>
> wrote:
>
> > > More importantly, how can you convince other people to accept your
> > > speculation?.
> >
> > Alex Sedow already have give you exact numbers:
> >     3-4 times speed up thanks to special string + allocator.
>
> OK, I got a 5-7x speedup just by buffering the whole input (tested
> with C# not C++). In your tests, were you reading from a file or
> memory buffer?

This is just a result of comparison my two old hand-written C++ lexers (with
preprocessors), with std::string and after replacing it with custom hash
string + allocator. And never more.

Little question. Why ANTLR still use buffering for source files? I think
modern computers and operating systems has enough physical or virtual memory
to load full source file. Maybe better remove buffering and simplify logic?

Alex.

>
> Micheal
> ANTLR/C#



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Sat Nov 13 15:53:53 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
In-Reply-To: <BDBC0568.23646%sunshine@public.kherson.ua>
References: <16790.9166.414088.513462@despot.non.net>
	<BDBC0568.23646%sunshine@public.kherson.ua>
Message-ID: <16790.40593.947972.911946@despot.non.net>


>>>>> "Ruslan" == Ruslan Zasukhin <sunshine@public.kherson.ua> writes:
>>>>>> On 11/13/04 5:10 PM, "John D. Mitchell" <johnm-antlr@non.net> writes:
[...]

>> Has the world changed in more recent versions of MS Windows internals?
>> Certainly historically, the MS memory allocator was truly atrocious in
>> terms of performance.  Especially as churn and memory pressure increase.

> This is not issue of Windows internals!

> If you look into sources of Visual libs, you will see that

> ::operator new()

> Simply calls malloc().

> This was in Visual 6.0 and it still in 7.x

I am talking about MS Windows internals -- the OS allocator is a POS
w.r.t. performance (again, unless they completely changed it in recent
editions).

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From sunshine at public.kherson.ua  Sat Nov 13 23:21:02 2004
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
In-Reply-To: <16790.40593.947972.911946@despot.non.net>
Message-ID: <BDBCD3FE.236C1%sunshine@public.kherson.ua>


On 11/14/04 1:53 AM, "John D. Mitchell" <johnm-antlr@non.net> wrote:

>>> Has the world changed in more recent versions of MS Windows internals?
>>> Certainly historically, the MS memory allocator was truly atrocious in
>>> terms of performance.  Especially as churn and memory pressure increase.
> 
>> This is not issue of Windows internals!
> 
>> If you look into sources of Visual libs, you will see that
> 
>> ::operator new()
> 
>> Simply calls malloc().
> 
>> This was in Visual 6.0 and it still in 7.x
> 
> I am talking about MS Windows internals -- the OS allocator is a POS
> w.r.t. performance (again, unless they completely changed it in recent
> editions).

Jon,

OS allocator this is what we all use.

But exists many different Heap Manager models.

E.g. For small objects you will get better speed and smaller RAM usage if
you wil use not just OS allocator but special manager. This is described in
the C++ book of Stroustrup.


-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From joanpujol at gmail.com  Sun Nov 14 02:42:30 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] StringTemplate NullPointerException
Message-ID: <d2d18a104111402427a065749@mail.gmail.com>


Hi,

What's the best method to debug StringTemplate when you get
NullPointerExceptions?

There's a debug mode that can I use to see what of my templates cause
the NullPointer?
Because I have a lot of nested templates, and I don't get any info of
where is the problem and it's hard to debug.

Cheers,

-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From klaren at cs.utwente.nl  Sun Nov 14 07:12:44 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Re: BENCHMARK. ANTLR. Bad results.
In-Reply-To: <01b901c4c9c8$b05b9290$07060b0a@home>
References: <cn5tdl+10pam@eGroups.com> <01b901c4c9c8$b05b9290$07060b0a@home>
Message-ID: <20041114151244.GB16576@cs.utwente.nl>


On Sun, Nov 14, 2004 at 12:35:25AM +0300, Alex Sedow wrote:
> Little question. Why ANTLR still use buffering for source files? 

For C++ there's buffering in the stream interface (if you use the default
inputbuffers). And there's some internal buffering for syntactic predicates
in a cyclic buffer.

> I think modern computers and operating systems has enough physical or
> virtual memory to load full source file. Maybe better remove buffering and
> simplify logic?

In a sense a good point. But there's always some tension between features
and simplicity (and of course speed) ANTLR2 lexers pay dearly for some
features. Also keep in mind that ANTLR is used in a lot of varying
situations. For some buffering a whole file may be impossible. ANTLR2 does
not stop you from reading the whole file in advance, the parts to do that
are all there. See also my post in this thread about the ANTLR3 prototype
for C.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
     Human beings, who are almost unique in having the ability to learn
   from the experience of others, are also remarkable for their apparent
         disinclination to do so. --- Douglas Adams, Last Chance to See



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Sun Nov 14 07:12:34 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] StringTemplate NullPointerException
In-Reply-To: <d2d18a104111402427a065749@mail.gmail.com>
References: <d2d18a104111402427a065749@mail.gmail.com>
Message-ID: <9CC81BD6-364F-11D9-B52C-000393BB647E@cs.usfca.edu>



On Nov 14, 2004, at 2:42 AM, Joan Pujol wrote:
> Hi,
>
> What's the best method to debug StringTemplate when you get
> NullPointerExceptions?

Hi :)

Is it inside StringTemplate that you get the error?

> There's a debug mode that can I use to see what of my templates cause
> the NullPointer?
> Because I have a lot of nested templates, and I don't get any info of
> where is the problem and it's hard to debug.

Have you seen the tree view?  Look at the doc.  Also, you can use a 
debugger to ask any stringtemplate for its attributes and then walk 
down the values.

Ter

>
> Cheers,
>
> -- 
> Joan Jes?s Pujol Espinar
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Sun Nov 14 09:16:37 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Re: Antlr 3.0  spaces between tokens
In-Reply-To: <16787.39104.454664.236993@despot.non.net>
References: <OF983F0A08.CC2464E0-ONC1256F48.00337898-C1256F48.003577D4@qem.it> <41923643.6040505@yahoo.gr> <F6D624AE-3336-11D9-AF28-000393B5606C@codetransform.com> <001001c4c7b5$708ddd90$0400a8c0@NOTEBOOK> <16787.39104.454664.236993@despot.non.net>
Message-ID: <F1349B3F-3660-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 11, 2004, at 8:52 AM, John D. Mitchell wrote:
> Ter's blog is unclear on this point but the basic idea is that 
> there'll be
> some syntax in the parser so that you can have specific parser rules 
> pay
> attention to more/less/different channels than the default set.  This 
> will
> handle cases like you mention where WS is significant in certain rules 
> and
> ignored everywhere else.

I'm starting with a "global" channel to tune to.  Actions can easily 
change the parser channel on the fly; only trouble is lookahead before 
it gets into a rule that needs a different channel.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Sun Nov 14 09:17:30 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Re: Antlr 3.0  spaces between tokens
In-Reply-To: <16787.39627.294226.797344@despot.non.net>
References: <cmvaq6+p2p4@eGroups.com> <000401c4c7d8$d3514ac0$0400a8c0@NOTEBOOK> <C7C1264B-33FA-11D9-B52C-000393BB647E@cs.usfca.edu> <16787.39627.294226.797344@despot.non.net>
Message-ID: <10EE5200-3661-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 11, 2004, at 9:00 AM, John D. Mitchell wrote:
>>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
>>>>>>> On Nov 11, 2004, at 2:25 AM, matthew ford writes:
> [...]
>
>>> But what about a SKIP in the parser side?  I cannot see any 
>>> conceptual
>>> problem providing it.
>
>> None.  Mitchell yelled at me until I put it in.
>
> Hey! I was NOT yelling!!!  I was merely being ruthless.  :-?
>
> Now, when it comes to doing the new tree stuff, I'm breaking out the
> baseball bat.  :-)

Yikes!  Now where is my  battle armor ;)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Sun Nov 14 09:19:20 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Transforming Comments along with trees
In-Reply-To: <20041112154129.6135.qmail@web25206.mail.ukl.yahoo.com>
References: <20041112154129.6135.qmail@web25206.mail.ukl.yahoo.com>
Message-ID: <5233E763-3661-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 12, 2004, at 7:41 AM, dsfsdf fdsfdsf wrote:

> Hi
> What do you mean by the tree input output thing?
> I have been transforming my Source Tree and the comments do
> not appear to have been automatically brought acorss.
> My code is something like this.
> ?
> ASTPass1.setLocalIntelligence(li);
> ??????? ASTPass1.setASTNodeClass("antlr.CommonASTWithHiddenTokens");
> ??????? ASTPass1.select(sourceASTAnalyzer.getAST());
> ??????? t = (CommonASTWithHiddenTokens) ASTPass1.getAST();
> showTree(t,"first pass")
> ?
> In my ASTPass.g file will i have to handle comments manualy there?

Does your lexer allow comments to return or do you set Token.SKIP?    
Mostly likely that is the issue.

Terence
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Sun Nov 14 09:36:53 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] building instruction/ASTnode pairs
Message-ID: <C5BCD7B1-3663-11D9-A398-000A95891192@cs.usfca.edu>


Loring spake:

>> Arrays, besides being memory hogs, do not address the root cause of 
>> the
>> cyclic reference problem.  The cyclic reference problem is due to the
>> current brute force tree construction algorithm; a better approach is 
>> to
>> build a stream of instruction/payload pairs and then construct the 
>> tree
>> after all instructions have been gathered.
>
john mitchell spake:

> Yes, the cyclic reference problem is crucial to deal with cleanly.  
> Antlr's
> existing model of tree (re-)construction is brittle.  A linguistic 
> approach
> (create stream of instructions, sort & unique'ify, and apply) is both 
> more
> powerful and simpler.

Loring or John.  May i have a simple example (rule + pseudo-actions or 
whatever) that explains more precisely about what you intend?  I 
understand the concept; TokenStreamRewriteEngine does not actually 
modify the token buffer, it tracks a list of "instructions" that are 
carried out when you say "toString()".

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Sun Nov 14 09:41:57 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] thoughts on parsing entity payloads
Message-ID: <7AE10849-3664-11D9-A398-000A95891192@cs.usfca.edu>


Gang,

Just a couple of thoughts after scanning through the email threads.

Re: buffer copying etc...

To be clear, the current implementation assumes that the entire input 
will be in memory, with hooks to not do this.  An AST points at a token 
which points into a token buffer.  No chars should be copied; no 
strings should be created.

Re: single info "payload" object

Interesting.  The lexer creates a single object that is the token and 
also the tree node.  Interesting.  Saves n memory allocations (and 
associated GC cost later).

As for more thinking about trees: after I perfect lexing / parsing, I 
will turn my attention to trees (though I read what all you just said). 
  Progress is definitely being made on 3.0--it is a thing of beauty; I'm 
just about done with a testing rig that lets you interpret any grammar 
(ignoring actions) w/o generating code and compiling.  Useful for 
testing and very useful for GUI prototyping tool anticipated to begin 
next semester with a hot shot programmer. :)

Terence
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Sun Nov 14 09:49:44 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] summary of trip to Montreal/SableCC land
Message-ID: <91879115-3665-11D9-A398-000A95891192@cs.usfca.edu>


Howdy,

Just met with Etienne Gagnon, the SableCC guy, in Montreal and gave an 
ANTLR lecture.  Etienne is a smart guy and seems to have the same goal 
as I do in general: building good parsing / translation tools for 
commercial programmers.  His further goals are language independence 
and hiding the complexities of LR-based parsing from the grammar 
developer.  I believe SableCC is currently LALR(1), but he has finished 
creating a method that will get him closer to LR(1).  He has the start 
of a visual debugger (for eclipse) that seems nice.  For language 
independence, SableCC does not allow actions in the grammar.  As for 
tree construction, he builds trees that are "type safe"; that is, they 
conform to a particular structure specified in a "tree grammar" 
section.  ANTLR takes the opposite approach which is: you have to parse 
trees multiple times during translation so let the tree walker check 
the structure ("type safety" in his terminology) as it must traverse it 
anyway.  Further, the structure changes so the original tree grammar 
("type structure") is no longer valid after creation.

He is going to try to implement linear approximate lookahead for 
SableCC.  I showed him some tricks :)

He loved the dynamically-scoped attributes thing, by the way. :)

Terence
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Sun Nov 14 10:18:18 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Re: building instruction/ASTnode pairs
In-Reply-To: <C5BCD7B1-3663-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <cn87ha+mgfq@eGroups.com>



--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> Loring spake:
> 
> >> Arrays, besides being memory hogs, do not address the root cause of 
> >> the
> >> cyclic reference problem.  The cyclic reference problem is due to the
> >> current brute force tree construction algorithm; a better
approach is 
> >> to
> >> build a stream of instruction/payload pairs and then construct the 
> >> tree
> >> after all instructions have been gathered.
> >
> john mitchell spake:
> 
> > Yes, the cyclic reference problem is crucial to deal with cleanly.  
> > Antlr's
> > existing model of tree (re-)construction is brittle.  A linguistic 
> > approach
> > (create stream of instructions, sort & unique'ify, and apply) is both 
> > more
> > powerful and simpler.
> 
> Loring or John.  May i have a simple example (rule + pseudo-actions or 
> whatever) that explains more precisely about what you intend?  I 
> understand the concept; TokenStreamRewriteEngine does not actually 
> modify the token buffer, it tracks a list of "instructions" that are 
> carried out when you say "toString()".

There is a full implementation of the concept in the 2.8 code--take a
look at JavaCodeGenerator.interpretTreeAction (the instruction
interpreter), TreeActionElement (the instruction stream), and
TreeCodeBlock (single instruction plus data).  antlr.g plus
NewMakeGrammar has code that sets the instruction stream.  There is
about 100 LOC total.  The only additional feature needed for ANTLR 3
is to reset the instruction stream; I did not need that for tree
action construction.  The version there uses ASTPair, but that was
done to fit with the existing AST construction in ANTLR 2.

--Loring

> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Sun Nov 14 12:24:46 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] BENCHMARK. ANTLR. Bad results.
In-Reply-To: <BDBCD3FE.236C1%sunshine@public.kherson.ua>
References: <16790.40593.947972.911946@despot.non.net>
	<BDBCD3FE.236C1%sunshine@public.kherson.ua>
Message-ID: <16791.48910.246907.370147@despot.non.net>


>>>>> "Ruslan" == Ruslan Zasukhin <sunshine@public.kherson.ua> writes:
[...]

>> I am talking about MS Windows internals -- the OS allocator is a POS
>> w.r.t. performance (again, unless they completely changed it in recent
>> editions).

> OS allocator this is what we all use.

No, some of us use better operating systems which have better allocators.

Sometimes, if we're stuck with bad OSs, instead of sticking with the
wretched allocator, we go to the hassle of replacing it (the simplest way
being to front the OS's allocator with an (intelligent) wrapper.

> But exists many different Heap Manager models.

> E.g. For small objects you will get better speed and smaller RAM usage if
> you wil use not just OS allocator but special manager. This is described
> in the C++ book of Stroustrup.

Yes, that makes things better but that doesn't mean that the underlying
performance of the OS's allocator isn't affecting performance.

"Profile, don't speculate." --DJB

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Sun Nov 14 17:50:19 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Re: Antlr 3.0  spaces between tokens
References: <OF983F0A08.CC2464E0-ONC1256F48.00337898-C1256F48.003577D4@qem.it> <41923643.6040505@yahoo.gr> <F6D624AE-3336-11D9-AF28-000393B5606C@codetransform.com> <001001c4c7b5$708ddd90$0400a8c0@NOTEBOOK> <16787.39104.454664.236993@despot.non.net> <F1349B3F-3660-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <001001c4cab5$7680a450$0400a8c0@NOTEBOOK>


Hi Ter,

You need to find a solution to the lookahead problem or these channels will
not be much improvement over token streams or switching the lexer state from
the parser.
matthew

----- Original Message ----- 
From: "Terence Parr" <parrt@cs.usfca.edu>
To: <antlr-interest@yahoogroups.com>
Sent: Monday, November 15, 2004 4:16 AM
Subject: Re: [antlr-interest] Re: Antlr 3.0 spaces between tokens


>
>
> On Nov 11, 2004, at 8:52 AM, John D. Mitchell wrote:
> > Ter's blog is unclear on this point but the basic idea is that
> > there'll be
> > some syntax in the parser so that you can have specific parser rules
> > pay
> > attention to more/less/different channels than the default set.  This
> > will
> > handle cases like you mention where WS is significant in certain rules
> > and
> > ignored everywhere else.
>
> I'm starting with a "global" channel to tune to.  Actions can easily
> change the parser channel on the fly; only trouble is lookahead before
> it gets into a rule that needs a different channel.
>
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Sun Nov 14 18:15:21 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] More on TokenWithIndex
In-Reply-To: <Pine.LNX.4.44.0410311509080.17547-100000@g4.pauljlucas.org>
Message-ID: <Pine.LNX.4.44.0411141810581.27249-100000@g4.pauljlucas.org>


On Sun, 31 Oct 2004, Paul J. Lucas wrote:

> 	I've been playing with this stuff for several days now and have
> 	something that works well.

	I have a polished, working demo available at:

		http://homepage.mac.com/pauljlucas/software/IndexedToken.tar.gz

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From stevegianvecchio at hotmail.com  Sun Nov 14 19:28:28 2004
From: stevegianvecchio at hotmail.com (Steve)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Anyone have Robin Debreuil's C# Grammar?
Message-ID: <cn97os+kkqn@eGroups.com>



The link to download this is broken.

I e-mailed the author, but no word back just yet. I wanted to check 
if anyone here has this grammar file that could e-mail it to me?

My e-mail is: srgian@cs.wm.edu

Thanks!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From eddie_antlr at yahoo.co.uk  Mon Nov 15 02:29:06 2004
From: eddie_antlr at yahoo.co.uk (dsfsdf fdsfdsf)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Transforming Comments along with trees
In-Reply-To: <5233E763-3661-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <20041115102906.76195.qmail@web25210.mail.ukl.yahoo.com>

hi
no i am not setting my comment to be skipped in my lexer.
After i do my parsing build up my source tree and tree walk,and 
i can see the hidden tokens.
When i try and verify the tree and do my passes no hidden tokens present.
Should i be setting my comment to a specific type in my lexer?
thanks 
ed
 


Terence Parr <parrt@cs.usfca.edu> wrote:


On Nov 12, 2004, at 7:41 AM, dsfsdf fdsfdsf wrote:

> Hi
> What do you mean by the tree input output thing?
> I have been transforming my Source Tree and the comments do
> not appear to have been automatically brought acorss.
> My code is something like this.
>  
> ASTPass1.setLocalIntelligence(li);
>         ASTPass1.setASTNodeClass("antlr.CommonASTWithHiddenTokens");
>         ASTPass1.select(sourceASTAnalyzer.getAST());
>         t = (CommonASTWithHiddenTokens) ASTPass1.getAST();
> showTree(t,"first pass")
>  
> In my ASTPass.g file will i have to handle comments manualy there?

Does your lexer allow comments to return or do you set Token.SKIP? 
Mostly likely that is the issue.

Terence
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!






Yahoo! Groups Links








		
---------------------------------
Moving house? Beach bar in Thailand? New Wardrobe? Win ?10k with Yahoo! Mail to make your dream a reality.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041115/a81b2857/attachment.html
From demakov at ispras.ru  Mon Nov 15 07:09:19 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] summary of trip to Montreal/SableCC land
References: <91879115-3665-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <002f01c4cb25$149d0600$8cc79553@marlboro>


From: "Terence Parr" <parrt@cs.usfca.edu>
> ... As for 
> tree construction, he builds trees that are "type safe"; that is, they 
> conform to a particular structure specified in a "tree grammar" 
> section.

561 generated files in 'node' package for Java 1.1 and 
409 for Simple C - imho, trees generated by SableCC are not very handy.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Mon Nov 15 07:32:21 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] summary of trip to Montreal/SableCC land
In-Reply-To: <002f01c4cb25$149d0600$8cc79553@marlboro>
References: <91879115-3665-11D9-A398-000A95891192@cs.usfca.edu> <002f01c4cb25$149d0600$8cc79553@marlboro>
Message-ID: <8AEF3D95-371B-11D9-B52C-000393BB647E@cs.usfca.edu>



On Nov 15, 2004, at 7:09 AM, Alexey Demakov wrote:

>
> From: "Terence Parr" <parrt@cs.usfca.edu>
>> ... As for
>> tree construction, he builds trees that are "type safe"; that is, they
>> conform to a particular structure specified in a "tree grammar"
>> section.
>
> 561 generated files in 'node' package for Java 1.1 and
> 409 for Simple C - imho, trees generated by SableCC are not very handy.

Yep, I don't like the visitor mechanism as I discussed with Etienne 
and, like jjtree for javacc, I don't like generating a class per node.  
That is pretty gross.  First, people are so in love with objects that 
EVERYTHING must be a class.  It's amazing we got any work done before 
oo, right? ;)  Also, when doing translations, it is the tree structure 
that is important.  Occasionally, you need special info at particular 
nodes, but this is really just a set of attributes (mitchell is saying 
this should be a dynamic list like HashMap or something).  You do NOT 
need to make this a separate object type just to access an overridden 
method like "action()" because it is the action location in the grammar 
that gives you the proper "event trigger".  It has context (where it 
lives in a rule) and you can have actions communicate easily whereas 
visitor actions are like "incommunicato islands".  This is why Etienne 
particularly liked my dynamically-scoped attributes thingy (although I 
think I need to give Gary Funck credit; he asked for these back in my 
SORCERER days a decade ago--i think he has trouble remembering if he 
invented them).  Visitors find it VERY difficult to pass in context; 
can't use parameters, right?  You'd have to make each action method 
have the combined set of parameters you need to pass.

Anyway, I should really flesh all this out in an article--and describe 
why you need tree grammars more to get people using them.  First, I 
suppose I need to get a less buggy tree parser going ;)

Ter





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From demakov at ispras.ru  Mon Nov 15 09:07:55 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] summary of trip to Montreal/SableCC land
References: <91879115-3665-11D9-A398-000A95891192@cs.usfca.edu> <002f01c4cb25$149d0600$8cc79553@marlboro> <8AEF3D95-371B-11D9-B52C-000393BB647E@cs.usfca.edu>
Message-ID: <024701c4cb35$a65bdd40$8cc79553@marlboro>


From: "Terence Parr" <parrt@cs.usfca.edu>
> On Nov 15, 2004, at 7:09 AM, Alexey Demakov wrote:
> > From: "Terence Parr" <parrt@cs.usfca.edu>
> >> ... As for
> >> tree construction, he builds trees that are "type safe"; that is, they
> >> conform to a particular structure specified in a "tree grammar"
> >> section.
> >
> > 561 generated files in 'node' package for Java 1.1 and
> > 409 for Simple C - imho, trees generated by SableCC are not very handy.
> 
> Yep, I don't like the visitor mechanism as I discussed with Etienne 
> and, like jjtree for javacc, I don't like generating a class per node.  
> That is pretty gross.  

Manually developed Java tree has about 150 nodes. I think it is about equivalent
to tree grammar size for ANTLR. So, I don't like implementation, not the idea itself.
Bad implementation can kill any idea :)

> First, people are so in love with objects that 
> EVERYTHING must be a class.  It's amazing we got any work done before 
> oo, right? ;)

Personally, I think that in Java vs C battle automatic memory management  
is more important than objects :)

> Also, when doing translations, it is the tree structure 
> that is important.  

Agree. So, let's specify it! :)

> Occasionally, you need special info at particular 
> nodes, but this is really just a set of attributes (mitchell is saying 
> this should be a dynamic list like HashMap or something).  You do NOT 

Yes, there should be possible to specify additional attributes for particalar node,
and should be possible to have dynamic attributes because we don't know beforehand
what users of tree structure want. 

> need to make this a separate object type just to access an overridden 
> method like "action()" because it is the action location in the grammar 

The main reason to have separate class for each node is reliability.
With type checking you can be sure that every tree that can be constructed
corresponds to syntactically correct input program.
After all, tree can be constructed not only by parser, but from XML serialization or
from another tree after some transformation. In this case we will notice
corrupted tree only at run-time.

> that gives you the proper "event trigger".  It has context (where it 
> lives in a rule) and you can have actions communicate easily whereas 
> visitor actions are like "incommunicato islands".  This is why Etienne 

You have access to children and parent of node that is parameter of visitor action.
What else do you need? Do you mean that it is not easy to locate node
within parent's children? But I don't remember such situation in real life.
In any case, context information can be passed through fields of visitor.
It solves the problem.

> particularly liked my dynamically-scoped attributes thingy (although I 
> think I need to give Gary Funck credit; he asked for these back in my 
> SORCERER days a decade ago--i think he has trouble remembering if he 
> invented them).  Visitors find it VERY difficult to pass in context; 
> can't use parameters, right?  You'd have to make each action method 
> have the combined set of parameters you need to pass.

In fact, I don't think that visitor is the best solution.
Recall the meaning of visitor pattern - to have virtual methods for tree nodes
without modification of node classes. There is another solution for this problem
- AOP-like powerful generation technics that allow to generate what you need
from clear description.

Clear description is important - how to reveal tree structure to team developers?

> Anyway, I should really flesh all this out in an article--and describe 
> why you need tree grammars more to get people using them.  First, I 
> suppose I need to get a less buggy tree parser going ;)

Worth to read :)

Btw, I begin to understand that separate tree description is closer to ANTLR
tree parsers than I thought before...
But what if I need more that one pass over tree - should I repeat tree grammar
in each tree walker? I don't like to have same info more than in one place.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Mon Nov 15 09:44:43 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] summary of trip to Montreal/SableCC land
In-Reply-To: <024701c4cb35$a65bdd40$8cc79553@marlboro>
References: <91879115-3665-11D9-A398-000A95891192@cs.usfca.edu> <002f01c4cb25$149d0600$8cc79553@marlboro> <8AEF3D95-371B-11D9-B52C-000393BB647E@cs.usfca.edu> <024701c4cb35$a65bdd40$8cc79553@marlboro>
Message-ID: <08714613-372E-11D9-A398-000A95891192@cs.usfca.edu>


On Nov 15, 2004, at 9:07 AM, Alexey Demakov wrote:
>> First, people are so in love with objects that
>> EVERYTHING must be a class.  It's amazing we got any work done before
>> oo, right? ;)
>
> Personally, I think that in Java vs C battle automatic memory 
> management
> is more important than objects :)

Agreed.  I won't program without GC anymore. ;)

>> Also, when doing translations, it is the tree structure
>> that is important.
>
> Agree. So, let's specify it! :)

you bet!  I have been doing so for over 10 years; I call them tree 
grammars :)

>> need to make this a separate object type just to access an overridden
>> method like "action()" because it is the action location in the 
>> grammar
>
> The main reason to have separate class for each node is reliability.
> With type checking you can be sure that every tree that can be 
> constructed
> corresponds to syntactically correct input program.

By "type checking", you mean grammatical structure.  Grammars are 
particularly good at structure I think you'd agree otherwise you 
wouldn't be using antlr for generating parsers. ;)

> After all, tree can be constructed not only by parser, but from XML 
> serialization or
> from another tree after some transformation. In this case we will 
> notice
> corrupted tree only at run-time.

You will only notice this at run-time no matter what if you have 
actions in your grammar that constructs trees.  Only statically 
specified trees (ala sablecc) can be checked statically.  Seriously 
though, this is a pretty limiting constraint.  The "meaning" of the 
input often requires different tree structures than strict syntax would 
imply else we'd all use parse trees not ASTs.

Further, and more importantly, complex translators require multiple 
passes over a tree that usually means altering the structure.  Your 
static checking is gone the minute you jump to actions (whether a 
grammar or a visitor) to manipulate the tree.  And, w/o actions of 
course you cannot translate ;)

>> that gives you the proper "event trigger".  It has context (where it
>> lives in a rule) and you can have actions communicate easily whereas
>> visitor actions are like "incommunicato islands".  This is why Etienne
>
> You have access to children and parent of node that is parameter of 
> visitor action.
> What else do you need?

Long distance info.  For example, you are deeply nested in an 
expression node.  What is the surrounding method name?  It is very 
inefficient to walk upwards in the tree each time you need info.  You 
should set a value in the method node action that is visible anywhere 
below.

>  Do you mean that it is not easy to locate node
> within parent's children?

No, just inefficient. :)

>  But I don't remember such situation in real life.
> In any case, context information can be passed through fields of 
> visitor.
> It solves the problem.

Almost.  You need a stack of them.  Imagine that you need a reference 
to the declarations for each {...} block.  Now if you set an instance 
variable, what happens when you nest {..}?  Clearly you need a stack.  
Why do this by hand?  Believe me, in my experience, you need context 
and generally you need it to nest.

>> particularly liked my dynamically-scoped attributes thingy (although I
>> think I need to give Gary Funck credit; he asked for these back in my
>> SORCERER days a decade ago--i think he has trouble remembering if he
>> invented them).  Visitors find it VERY difficult to pass in context;
>> can't use parameters, right?  You'd have to make each action method
>> have the combined set of parameters you need to pass.
>
> In fact, I don't think that visitor is the best solution.
> Recall the meaning of visitor pattern - to have virtual methods for 
> tree nodes
> without modification of node classes. There is another solution for 
> this problem
> - AOP-like powerful generation technics that allow to generate what 
> you need
> from clear description.

Yep, i am fond of the idea of aspects, but I'm not sure how I can use 
them effectively in antlr.  I use the "poor man's" version all the 
time, where I put behavior.action() code everywhere and then pass in a 
behavior object.

> Clear description is important - how to reveal tree structure to team 
> developers?

Certainly not by making coders read a manually written or auto 
generated parser.  Grammars are perfect.  Recall that I started out 
putting tree structure comments in my methods that handled trees only 
to realize I should make these suckers executable 
documentation--sorcerer was born. :)

>> Anyway, I should really flesh all this out in an article--and describe
>> why you need tree grammars more to get people using them.  First, I
>> suppose I need to get a less buggy tree parser going ;)
>
> Worth to read :)

I hope so.  I certainly have picked up some "best practices" ideas over 
the years. :)

> Btw, I begin to understand that separate tree description is closer to 
> ANTLR
> tree parsers than I thought before...

:)  Hooray!

> But what if I need more that one pass over tree - should I repeat tree 
> grammar
> in each tree walker? I don't like to have same info more than in one 
> place.

Agreed.  You have identified something that uses up lots of my spare 
"CPU" time.  One solution is to simply use a tree grammar to call 
action methods and then you can subclass the tree parser. Now, you are 
back to the visitor idea and don't have to repeat the tree, however, 
this is unsatisfying as I've said.  I believe that we need a model 
where you can cut/paste a grammar to multiple phases and then push 
updates to all phases when the structure changes.  In reality, this is 
called RCS (diff3).  For papers, i'll make up some fancy name ;)

Good discussion!  I think I'll post this conversation as a mini article 
on the antlr.org site.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Mon Nov 15 09:45:14 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Anyone have Robin Debreuil's C# Grammar?
In-Reply-To: <cn97os+kkqn@eGroups.com>
References: <cn97os+kkqn@eGroups.com>
Message-ID: <1B24506A-372E-11D9-A398-000A95891192@cs.usfca.edu>


I have emailed him myself a while back...no response.  Anybody else 
know where to get a copy of the C# grammar?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From devel at hunsicker.de  Mon Nov 15 09:57:23 2004
From: devel at hunsicker.de (Marco Hunsicker)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Anyone have Robin Debreuil's C# Grammar?
In-Reply-To: <cn97os+kkqn@eGroups.com>
References: <cn97os+kkqn@eGroups.com>
Message-ID: <1779297652.20041115185723@hunsicker.de>


Hello Steve,

S> The link to download this is broken.

S> I e-mailed the author, but no word back just yet. I wanted to check
S> if anyone here has this grammar file that could e-mail it to me?

I have the grammar, i.e. probably not the latest revision - the
archive does not contain any version information. The grammar file is
dated 03/05/2004. If you mind I could send it to you (zipped ~ 90KB)

Cheers,

Marco Hunsicker



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Mon Nov 15 10:02:53 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Anyone have Robin Debreuil's C# Grammar?
In-Reply-To: <1779297652.20041115185723@hunsicker.de>
References: <cn97os+kkqn@eGroups.com> <1779297652.20041115185723@hunsicker.de>
Message-ID: <925EE06A-3730-11D9-A398-000A95891192@cs.usfca.edu>


Hi Marco,

Can you upload to the grammar section at antlr.org?  Thanks!
Ter
On Nov 15, 2004, at 9:57 AM, Marco Hunsicker wrote:

>
> Hello Steve,
>
> S> The link to download this is broken.
>
> S> I e-mailed the author, but no word back just yet. I wanted to check
> S> if anyone here has this grammar file that could e-mail it to me?
>
> I have the grammar, i.e. probably not the latest revision - the
> archive does not contain any version information. The grammar file is
> dated 03/05/2004. If you mind I could send it to you (zipped ~ 90KB)
>
> Cheers,
>
> Marco Hunsicker
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>
>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From alexsedow at mail.ru  Mon Nov 15 10:00:17 2004
From: alexsedow at mail.ru (Alex Sedow)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Anyone have Robin Debreuil's C# Grammar?
References: <cn97os+kkqn@eGroups.com> <1B24506A-372E-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <005501c4cb3c$f99ae210$07060b0a@home>


> I have emailed him myself a while back...no response.  Anybody else 
> know where to get a copy of the C# grammar?
> 
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!

I may send Robin's CSharpCompiler0.5_src.zip and CSharpCompiler0.5_exe.zip.
I download these files some months ago.

Alex.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From devel at hunsicker.de  Mon Nov 15 10:11:24 2004
From: devel at hunsicker.de (Marco Hunsicker)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Anyone have Robin Debreuil's C# Grammar?
In-Reply-To: <925EE06A-3730-11D9-A398-000A95891192@cs.usfca.edu>
References: <cn97os+kkqn@eGroups.com> <1779297652.20041115185723@hunsicker.de>
 <925EE06A-3730-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <857837949.20041115191124@hunsicker.de>


Hello Terence,

TP> Can you upload to the grammar section at antlr.org?  Thanks!

Done!

BTW, it is possible to use HTML tags in the submission form? The page
does not provide any help here. If not, I think it would be a nice
feature (maybe one of your students ... ;)

Cheers,

Marco Hunsicker




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Mon Nov 15 10:16:25 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Anyone have Robin Debreuil's C# Grammar?
In-Reply-To: <857837949.20041115191124@hunsicker.de>
References: <cn97os+kkqn@eGroups.com> <1779297652.20041115185723@hunsicker.de> <925EE06A-3730-11D9-A398-000A95891192@cs.usfca.edu> <857837949.20041115191124@hunsicker.de>
Message-ID: <762C96CC-3732-11D9-A398-000A95891192@cs.usfca.edu>


On Nov 15, 2004, at 10:11 AM, Marco Hunsicker wrote:
> Hello Terence,
>
> TP> Can you upload to the grammar section at antlr.org?  Thanks!
>
> Done!

Thanks!

> BTW, it is possible to use HTML tags in the submission form? The page
> does not provide any help here. If not, I think it would be a nice
> feature (maybe one of your students ... ;)

I think it strips them :(

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From devel at hunsicker.de  Mon Nov 15 10:13:42 2004
From: devel at hunsicker.de (Marco Hunsicker)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Anyone have Robin Debreuil's C# Grammar?
In-Reply-To: <005501c4cb3c$f99ae210$07060b0a@home>
References: <cn97os+kkqn@eGroups.com>
 <1B24506A-372E-11D9-A398-000A95891192@cs.usfca.edu>
 <005501c4cb3c$f99ae210$07060b0a@home>
Message-ID: <924107608.20041115191342@hunsicker.de>


Hello Alex,

>> [...]
>> Anybody else know where to get a copy of the C# grammar?

AS> I may send Robin's CSharpCompiler0.5_src.zip and
AS> CSharpCompiler0.5_exe.zip. I download these files some months ago.

Could you please check the file date of the cs.g? I've just uploaded a
version dating from 03/05/2004. If your version is newer, the download
link probably should be updated. Thanks!

Cheers,


Marco Hunsicker



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From alexsedow at mail.ru  Mon Nov 15 10:18:44 2004
From: alexsedow at mail.ru (Alex Sedow)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Anyone have Robin Debreuil's C# Grammar?
References: <cn97os+kkqn@eGroups.com> <1B24506A-372E-11D9-A398-000A95891192@cs.usfca.edu> <005501c4cb3c$f99ae210$07060b0a@home> <924107608.20041115191342@hunsicker.de>
Message-ID: <006701c4cb3f$8b579ed0$07060b0a@home>


Hello Marco,

> >> [...]
> >> Anybody else know where to get a copy of the C# grammar?
> 
> AS> I may send Robin's CSharpCompiler0.5_src.zip and
> AS> CSharpCompiler0.5_exe.zip. I download these files some months ago.
> 
> Could you please check the file date of the cs.g? I've just uploaded a
> version dating from 03/05/2004. If your version is newer, the download
> link probably should be updated. Thanks!
> 
> Cheers,
> 
> Marco Hunsicker

csharp.g - 31/05/2004, 57558 bytes.

Alex.


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From devel at hunsicker.de  Mon Nov 15 10:23:36 2004
From: devel at hunsicker.de (Marco Hunsicker)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Anyone have Robin Debreuil's C# Grammar?
In-Reply-To: <762C96CC-3732-11D9-A398-000A95891192@cs.usfca.edu>
References: <cn97os+kkqn@eGroups.com> <1779297652.20041115185723@hunsicker.de>
 <925EE06A-3730-11D9-A398-000A95891192@cs.usfca.edu>
 <857837949.20041115191124@hunsicker.de>
 <762C96CC-3732-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <92004998.20041115192336@hunsicker.de>


Hello Terence,

>> BTW, it is possible to use HTML tags in the submission form? The page
>> does not provide any help here. If not, I think it would be a nice
>> feature (maybe one of your students ... ;)

TP> I think it strips them :(

Certainly not something you should worry about, there is important
stuff to be done :)

Is it possible to update or remove a file sharing entry? The grammar
from Alex Sedow is more recent!



Cheers,

Marco Hunsicker



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Mon Nov 15 10:31:42 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Anyone have Robin Debreuil's C# Grammar?
In-Reply-To: <92004998.20041115192336@hunsicker.de>
References: <cn97os+kkqn@eGroups.com> <1779297652.20041115185723@hunsicker.de> <925EE06A-3730-11D9-A398-000A95891192@cs.usfca.edu> <857837949.20041115191124@hunsicker.de> <762C96CC-3732-11D9-A398-000A95891192@cs.usfca.edu> <92004998.20041115192336@hunsicker.de>
Message-ID: <98CB2412-3734-11D9-A398-000A95891192@cs.usfca.edu>


> Is it possible to update or remove a file sharing entry? The grammar
> from Alex Sedow is more recent!

Ooops..ok, let's use the "Terence Application Server"; send it to me 
directly and I'll push the change manually. :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From alexsedow at mail.ru  Mon Nov 15 10:32:22 2004
From: alexsedow at mail.ru (Alex Sedow)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Anyone have Robin Debreuil's C# Grammar?
References: <cn97os+kkqn@eGroups.com> <1779297652.20041115185723@hunsicker.de> <925EE06A-3730-11D9-A398-000A95891192@cs.usfca.edu> <857837949.20041115191124@hunsicker.de> <762C96CC-3732-11D9-A398-000A95891192@cs.usfca.edu> <92004998.20041115192336@hunsicker.de>
Message-ID: <008801c4cb41$72e612d0$07060b0a@home>


> Hello Terence,
> 
> >> BTW, it is possible to use HTML tags in the submission form? The page
> >> does not provide any help here. If not, I think it would be a nice
> >> feature (maybe one of your students ... ;)
> 
> TP> I think it strips them :(
> 
> Certainly not something you should worry about, there is important
> stuff to be done :)
> 
> Is it possible to update or remove a file sharing entry? The grammar
> from Alex Sedow is more recent!
> 
> 
> 
> Cheers,
> 
> Marco Hunsicker

Terence, Marco,

1. How to upload file to antlr.org?
2. Upload only csharp.g or full zip file?

Alex.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From devel at hunsicker.de  Mon Nov 15 10:35:48 2004
From: devel at hunsicker.de (Marco Hunsicker)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Anyone have Robin Debreuil's C# Grammar?
In-Reply-To: <006701c4cb3f$8b579ed0$07060b0a@home>
References: <cn97os+kkqn@eGroups.com>
 <1B24506A-372E-11D9-A398-000A95891192@cs.usfca.edu>
 <005501c4cb3c$f99ae210$07060b0a@home> <924107608.20041115191342@hunsicker.de>
 <006701c4cb3f$8b579ed0$07060b0a@home>
Message-ID: <1118103298.20041115193548@hunsicker.de>


Hello Alex,

>> Could you please check the file date of the cs.g? I've just uploaded a
>> version dating from 03/05/2004. If your version is newer, the download
>> link probably should be updated. Thanks!

AS> csharp.g - 31/05/2004, 57558 bytes.

Could you please send the complete archive to Terence directly (parrt
at cs.usfca.edu). He will manually update the file sharing entry.
Thanks much!

Cheers,


Marco Hunsicker




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From alexsedow at mail.ru  Mon Nov 15 10:43:36 2004
From: alexsedow at mail.ru (Alex Sedow)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Anyone have Robin Debreuil's C# Grammar?
References: <cn97os+kkqn@eGroups.com> <1B24506A-372E-11D9-A398-000A95891192@cs.usfca.edu> <005501c4cb3c$f99ae210$07060b0a@home> <924107608.20041115191342@hunsicker.de> <006701c4cb3f$8b579ed0$07060b0a@home> <1118103298.20041115193548@hunsicker.de>
Message-ID: <00bd01c4cb43$0656b690$07060b0a@home>


> Could you please send the complete archive to Terence directly (parrt
> at cs.usfca.edu). He will manually update the file sharing entry.
> 
> Cheers,
> 
> Marco Hunsicker

I send files.

Alex.


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From greenj at ix.netcom.com  Mon Nov 15 12:24:14 2004
From: greenj at ix.netcom.com (John Allen Green)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] tree parsers and stacks
Message-ID: <2F5F3013A7F77757D318AA10@[192.168.190.150]>



> From Terence Parr, 11/15/2004 9:44 AM -0800:
> 
> Almost.  You need a stack of them.  Imagine that you need a reference 
> to the declarations for each {...} block.  Now if you set an instance 
> variable, what happens when you nest {..}?  Clearly you need a stack.
>  Why do this by hand?  Believe me, in my experience, you need context 
> and generally you need it to nest.


I haven't looked into the source, but is there an option in the tree
parser generator so that the resulting parser keeps a stack of the head
nodes, as the tree is descended? That would allow you to climb up the
tree at any point within the tree parser, to find the enclosing
expression, statement, function, etc. It might save you from some of
the effort of writing actions in the grammar manually, for keeping
stacks for scopes and whatnot.

I'm using the tree parser for analysis, but not transforms, so I just
use an AST with additional "back" and "up" links. So... I don't really
need it, I'm just curious.  :)


John
www.joanju.com
 


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Mon Nov 15 13:01:55 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Re: summary of trip to Montreal/SableCC land
In-Reply-To: <08714613-372E-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <cnb5g3+u7g8@eGroups.com>



--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:

> > The main reason to have separate class for each node is reliability.
> > With type checking you can be sure that every tree that can be 
> > constructed
> > corresponds to syntactically correct input program.
> 
> By "type checking", you mean grammatical structure.  Grammars are 
> particularly good at structure I think you'd agree otherwise you 
> wouldn't be using antlr for generating parsers. ;)
> 
> > After all, tree can be constructed not only by parser, but from XML 
> > serialization or
> > from another tree after some transformation. In this case we will 
> > notice
> > corrupted tree only at run-time.
> 
> You will only notice this at run-time no matter what if you have 
> actions in your grammar that constructs trees.  Only statically 
> specified trees (ala sablecc) can be checked statically.  Seriously 
> though, this is a pretty limiting constraint.  The "meaning" of the 
> input often requires different tree structures than strict syntax would 
> imply else we'd all use parse trees not ASTs.

I understood Alexey's point to be that the use of [properly designed]
heterogenous AST nodes removes the need to [re-]check the structure of
trees during each treewalking phase as tree parsers currently have to.
There is a cost associated with this. Of course hetero-nodes also
better support visitors for those times when they are preferred.

> Further, and more importantly, complex translators require multiple 
> passes over a tree that usually means altering the structure.  Your 
> static checking is gone the minute you jump to actions (whether a 
> grammar or a visitor) to manipulate the tree.  And, w/o actions of 
> course you cannot translate ;)

We are usually transforming from one definite structure to another
equally definite (but perhaps different) structure at each stage.
Depending on the differences between the input and output tree
structures and how many of them we have, I can see that the
heterogenous approach may become unwieldy at some point. I still feel
ANTLR needs to support both.

> > Btw, I begin to understand that separate tree description is
closer to 
> > ANTLR
> > tree parsers than I thought before...
> 
> :)  Hooray!

Except for the fact that separate tree description supports the use of
hetero-nodes much better than ANTLR currently does.

> > But what if I need more that one pass over tree - should I repeat
tree 
> > grammar
> > in each tree walker? I don't like to have same info more than in one 
> > place.
> 
> Agreed.  You have identified something that uses up lots of my spare 
> "CPU" time.  One solution is to simply use a tree grammar to call 
> action methods and then you can subclass the tree parser. Now, you are 
> back to the visitor idea and don't have to repeat the tree, however, 
> this is unsatisfying as I've said.  I believe that we need a model 
> where you can cut/paste a grammar to multiple phases and then push 
> updates to all phases when the structure changes.  In reality, this is 
> called RCS (diff3).  For papers, i'll make up some fancy name ;)

This is a biggie me thinks. I've tried a tool that allows the grammar
to be separated from actions in separate files. A grammar template
file is then merged with an action code from another file to form a
complete ANTLR input file. It works but, it isn't overly satisfying
when done manually ;-(

I feel an editor that hides the distinction between the grammar
template file and the [multiple] action files is needed to make this
work better. ;-)

Micheal
ANTLR/C#





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Mon Nov 15 13:34:54 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Re: summary of trip to Montreal/SableCC land
In-Reply-To: <cnb5g3+u7g8@eGroups.com>
References: <cnb5g3+u7g8@eGroups.com>
Message-ID: <3087C6C6-374E-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 15, 2004, at 1:01 PM, micheal_jor wrote:
>> You will only notice this at run-time no matter what if you have
>> actions in your grammar that constructs trees.  Only statically
>> specified trees (ala sablecc) can be checked statically.  Seriously
>> though, this is a pretty limiting constraint.  The "meaning" of the
>> input often requires different tree structures than strict syntax 
>> would
>> imply else we'd all use parse trees not ASTs.
>
> I understood Alexey's point to be that the use of [properly designed]
> heterogenous AST nodes removes the need to [re-]check the structure of
> trees during each treewalking phase as tree parsers currently have to.

Well, it can do some but not all; you have to be very very careful with 
types.  For example, I just finished somethign in my little article 
about lists of children such as argument lists.  Unless you use 
List<Argument>, you cannot guarantee anything about tree structure.

> There is a cost associated with this. Of course hetero-nodes also
> better support visitors for those times when they are preferred.

Yep, they make it easy to figure out what method is being executed 
because a method override is used not a big switch-on-node-type.

>> Further, and more importantly, complex translators require multiple
>> passes over a tree that usually means altering the structure.  Your
>> static checking is gone the minute you jump to actions (whether a
>> grammar or a visitor) to manipulate the tree.  And, w/o actions of
>> course you cannot translate ;)
>
> We are usually transforming from one definite structure to another
> equally definite (but perhaps different) structure at each stage.

yep.

> Depending on the differences between the input and output tree
> structures and how many of them we have, I can see that the
> heterogenous approach may become unwieldy at some point. I still feel
> ANTLR needs to support both.

I agree.  Sometimes hetero trees are nice. :)  For big translations, 
however, 500 node types just adds complexity.  You should focus on tree 
structure.  Type systems are blunt instruments for specifying 
structure. ;)

>>> Btw, I begin to understand that separate tree description is
> closer to
>>> ANTLR
>>> tree parsers than I thought before...
>>
>> :)  Hooray!
>
> Except for the fact that separate tree description supports the use of
> hetero-nodes much better than ANTLR currently does.

ANTLR supports general "ID should become IDNode" level support as well 
as individual reference ID<AST=IDNode> hetero specs.  What else would 
you like?  I'll start thinking about it when I get to trees. :)

>>> But what if I need more that one pass over tree - should I repeat
> tree
>>> grammar
>>> in each tree walker? I don't like to have same info more than in one
>>> place.
>>
>> Agreed.  You have identified something that uses up lots of my spare
>> "CPU" time.  One solution is to simply use a tree grammar to call
>> action methods and then you can subclass the tree parser. Now, you are
>> back to the visitor idea and don't have to repeat the tree, however,
>> this is unsatisfying as I've said.  I believe that we need a model
>> where you can cut/paste a grammar to multiple phases and then push
>> updates to all phases when the structure changes.  In reality, this is
>> called RCS (diff3).  For papers, i'll make up some fancy name ;)
>
> This is a biggie me thinks. I've tried a tool that allows the grammar
> to be separated from actions in separate files. A grammar template
> file is then merged with an action code from another file to form a
> complete ANTLR input file. It works but, it isn't overly satisfying
> when done manually ;-(

Yeah, I argue it's hard to have your actions "dangling in mid air" in a 
separate file too. ;)

> I feel an editor that hides the distinction between the grammar
> template file and the [multiple] action files is needed to make this
> work better. ;-)

Yes, a tool that lets you derive a new pass from a "template" grammar 
is what we want. :)  I think diff3 that is ANTLR grammar based not text 
based will do nicely :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From marq.kole at philips.com  Mon Nov 15 14:27:31 2004
From: marq.kole at philips.com (Marq Kole)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Re: ANTLR for Python
In-Reply-To: <117C7938-2F74-11D9-89DD-000A95891192@cs.usfca.edu>
Message-ID: <cnbagj+8vaa@eGroups.com>



--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
wrote:
<SNIP>
> > I am looking for a few extensions in the way ANTLR handles Python
> > grammars. At this moment the header { } block is supported, but 
just
> > like the C++ runtime has the option to have different kinds of
> > headers, whose contents are placed in different parts of the
> > generated code, I would like to have something similar in 
Python. To
> > be more precise, I would like to have a header whose contents are
> > added to the __init__ method of the generated parser, and also a
> > header whose contents are added at the end of all generated 
code, at
> > the outer indentation level. That would allow one to add self-
> > testing code to the grammar, or add another class that uses the
> > creater scanner/parser/treeparser classes directly.
> >
> > Could someone give me a pointer to where in the ANTLR source code
> > this kind of stuff is handled so I can add the
> > abovementioned "headers"?
> 
> Well, I normally just add any action before the grammar rules to 
the 
> output class, which can include
> 
> {
> .... __init__ ...
> }
> 
> Then you don't need to mess with the header thing.
 
Ter,

Errr, that's just fine, except that the __init__() method for the 
parser class is already defined in the Python code generator, as it 
is required to perform initialization when constructing a new 
instance in Python. Also, Python does not support overloading, so I 
can only have one __init__() method. So I'm afraid your suggestion 
wouldn't fly.

Of course, there are alternatives: I can define empty __preinit__() 
and __postinit__() methods in the base parsers (LLkParser class) in 
the Python runtime, that are called from the __init__() method in 
that base parser.
This LLkParser.__init__() method is actually called from the 
generated parser, so when I override the __preinit__() and 
__postinit__() methods in the actions outside the grammar rules the 
initialization is augmented in the required way.

Problem: this approach is not portable to inherited parsers, as 
there is no requirement in Python that the superclass initializer is 
called when initializing an instance of a subclass. Also, the built-
in super() function does not normally do what you think it would do; 
it can be very misleading and unreliable.

Therefore my request for how to make specific headers:
- header "init" { } is needed, but I do not actually need separate
  preinit and postinit, I guess. Otherwise it would be:
- header "preinit" { } and
- header "postinit" { }
- header { } is necessary as well, but that's already available.
- header "post" { } would be needed to add any code after the
  generated parser/lexer/treeparser class, for instance for self
  testing.

Regards,
Marq






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Mon Nov 15 14:51:56 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Re: summary of trip to Montreal/SableCC land
In-Reply-To: <3087C6C6-374E-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <cnbbuc+o71q@eGroups.com>



--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
[snipped]
> Yes, a tool that lets you derive a new pass from a "template" grammar 
> is what we want. :)  I think diff3 that is ANTLR grammar based not text 
> based will do nicely :)
> 
> Ter

This should be fairly easy to implement.  diff works on an "alphabet"
which is usually taken to be lines of text (each unique line is a
"character" in the alphabet).  By changing the alphabet to be
non-whitespace tokens in a grammar file (TOKENs defined by antlr.g)
instead of lines and then mapping token sequence differences back to
lines, it should be fairly easy to get exactly what we would want. 
Since the core engine can be adopted from GNU diff3 or some other open
source baseline (if someone has done a simple Java version, that would
help), this is probably a good student project--only the adaptation of
input to ANTLRLexer identified tokens and the backend printer need to
be developed.  Both of those should be simple, and there are some good
software engineering lessons to be learned from the exercise.

--Loring

> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From hombre at gmail.com  Mon Nov 15 14:58:56 2004
From: hombre at gmail.com (Tom Verbeure)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] summary of trip to Montreal/SableCC land
In-Reply-To: <08714613-372E-11D9-A398-000A95891192@cs.usfca.edu>
References: <91879115-3665-11D9-A398-000A95891192@cs.usfca.edu>
	 <002f01c4cb25$149d0600$8cc79553@marlboro>
	 <8AEF3D95-371B-11D9-B52C-000393BB647E@cs.usfca.edu>
	 <024701c4cb35$a65bdd40$8cc79553@marlboro>
	 <08714613-372E-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <f7896340041115145852f709e2@mail.gmail.com>


> >  But I don't remember such situation in real life.
> > In any case, context information can be passed through fields of
> > visitor.
> > It solves the problem.
> 
> Almost.  You need a stack of them.  Imagine that you need a reference
> to the declarations for each {...} block.  Now if you set an instance
> variable, what happens when you nest {..}?  Clearly you need a stack.
> Why do this by hand?  Believe me, in my experience, you need context
> and generally you need it to nest.

This is a very interesting discussion. Forgive me for interrupting
with what may be a beginners question. :-)
I understand that a stack is sometimes needed to retrieve information
from nested context. What's not clear to me is how Antlr in particular
makes it easier to access or manage this stack.
Is this something that is currently already available in antlr 2.x? Or
is this something new that will be added in 3.x? If it's the latter,
then I'll just eagerly wait its release, if it's the latter, could you
point me to an example that implements this?

Thanks,
Tom


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-pim0HV8q7APJBt1pg8aXBYs at yahoogroups.com  Mon Nov 15 17:04:31 2004
From: antlr-interest-accept-pim0HV8q7APJBt1pg8aXBYs at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:33 2004
Subject: MODERATE -- hanasaki@hanaden.com posted to antlr-interest
Message-ID: <1100567071.612.35818.m19@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  hanasaki@hanaden.com 

The message summary:
--------------------
FROM: hanasaki@hanaden.com 
DATE: Tue, 16 Nov 2004 01:04:04 -0000 
SUBJECT: stream parsing of http / smtp 

Anyone ever considered a grammar for smtp or http protocols?
Does antlr have the ability to deal with the non-printable 
characters that may come in a stream for a binary transfer 
of a file (ex: ftp) 

Thanks, 

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=368 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-pim0HV8q7APJBt1pg8aXBYs@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "hanasakihanaden" <hanasaki@hanaden.com>
Subject: stream parsing of http / smtp
Date: Tue, 16 Nov 2004 01:04:04 -0000
Size: 1394
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041116/8c8af2fb/attachment.mht
From lgc at mail1.jpl.nasa.gov  Mon Nov 15 17:15:52 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Re: summary of trip to Montreal/SableCC land
In-Reply-To: <f7896340041115145852f709e2@mail.gmail.com>
Message-ID: <cnbkc8+ampn@eGroups.com>



--- In antlr-interest@yahoogroups.com, Tom Verbeure <hombre@g...> wrote:
> > >  But I don't remember such situation in real life.
> > > In any case, context information can be passed through fields of
> > > visitor.
> > > It solves the problem.
> > 
> > Almost.  You need a stack of them.  Imagine that you need a reference
> > to the declarations for each {...} block.  Now if you set an instance
> > variable, what happens when you nest {..}?  Clearly you need a stack.
> > Why do this by hand?  Believe me, in my experience, you need context
> > and generally you need it to nest.
> 
> This is a very interesting discussion. Forgive me for interrupting
> with what may be a beginners question. :-)
> I understand that a stack is sometimes needed to retrieve information
> from nested context. What's not clear to me is how Antlr in particular
> makes it easier to access or manage this stack.
> Is this something that is currently already available in antlr 2.x? Or
> is this something new that will be added in 3.x? If it's the latter,
> then I'll just eagerly wait its release, if it's the latter, could you
> point me to an example that implements this?

Actually, the answer is "neither", although it is still possible that
 stacks could creep into 3.0 (i. e.:  3.0 is still in development and
anything could happen).  For ANTLR 2, context is provided by passing
arguments to rules.  For ANTLR 3, dynamic scoping of attributes is
planned to provide somewhat more functionality, but this approach is
still under exploration so don't look for Ter to have a definitive
answer (defined syntax with clearly defined behavior for attributes) soon.

--Loring

> Thanks,
> Tom





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From hanasaki at hanaden.com  Mon Nov 15 17:04:04 2004
From: hanasaki at hanaden.com (hanasakihanaden)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] stream parsing of http / smtp
Message-ID: <cnbjm4+1jnu@eGroups.com>




Anyone ever considered a grammar for smtp or http protocols?  Does
antlr have the ability to deal with the non-printable characters that
may come in a stream for a binary transfer of a file (ex: ftp)

Thanks,








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Mon Nov 15 17:28:29 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Re: summary of trip to Montreal/SableCC land
In-Reply-To: <cnbkc8+ampn@eGroups.com>
References: <cnbkc8+ampn@eGroups.com>
Message-ID: <D1FD245E-376E-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 15, 2004, at 5:15 PM, lgcraymer wrote:
>> This is a very interesting discussion. Forgive me for interrupting
>> with what may be a beginners question. :-)
>> I understand that a stack is sometimes needed to retrieve information
>> from nested context. What's not clear to me is how Antlr in particular
>> makes it easier to access or manage this stack.
>> Is this something that is currently already available in antlr 2.x? Or
>> is this something new that will be added in 3.x? If it's the latter,
>> then I'll just eagerly wait its release, if it's the latter, could you
>> point me to an example that implements this?
>
> Actually, the answer is "neither", although it is still possible that
>  stacks could creep into 3.0 (i. e.:  3.0 is still in development and
> anything could happen).  For ANTLR 2, context is provided by passing
> arguments to rules.  For ANTLR 3, dynamic scoping of attributes is
> planned to provide somewhat more functionality, but this approach is
> still under exploration so don't look for Ter to have a definitive
> answer (defined syntax with clearly defined behavior for attributes) 
> soon.

Actually, I held off my answer as I'm still writing up that discussion 
this very second. ;)

3.0 will have exactly this stack mechanism; "remote attribution" it was 
originally called.  We'll call it dynamic scoping of attributes and 
perhaps add a new twist.  I'll have something for you to read in a few 
hours.

As Loring say, however, anything can happen before the release ;)  I'm 
cranking away at the moment though because I'm very comfortable with 
the decisions I'm making given past experience (for example SORCERER 
had these stacked attributes).  It's only when we get into new stuff 
that I need to ponder stuff and get everybody's feedback/experience. :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Mon Nov 15 17:41:43 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] stream parsing of http / smtp
In-Reply-To: <cnbjm4+1jnu@eGroups.com>
References: <cnbjm4+1jnu@eGroups.com>
Message-ID: <AB93E1C4-3770-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 15, 2004, at 5:04 PM, hanasakihanaden wrote:

>
>
>
> Anyone ever considered a grammar for smtp or http protocols?  Does
> antlr have the ability to deal with the non-printable characters that
> may come in a stream for a binary transfer of a file (ex: ftp)

Sure. :)  Handles binary no sweat.  smtp and http are pretty simple 
(minus the headers I guess in HTTP) so I'm not sure a grammar is worth 
the hassle.  I have a student looking at an IMAP grammar, however.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Mon Nov 15 18:42:23 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Translators Should Use Tree Grammars
Message-ID: <24D056E8-3779-11D9-A398-000A95891192@cs.usfca.edu>


Ok, whew!  8 furiously written pages on visitors, tree node classes, 
tree grammars, and action execution:

http://www.antlr.org/article/1100569809276/use.tree.grammars.tml

Hopefully, this is clearly written.  Regardless, it summarizes my 
position rather thoroughly. ;)  Please send me feedback if you think 
the article can be improved etc...

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Mon Nov 15 19:50:18 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <24D056E8-3779-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <cnbtdq+p7u5@eGroups.com>



--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> Ok, whew!  8 furiously written pages on visitors, tree node classes, 
> tree grammars, and action execution:
> 
> http://www.antlr.org/article/1100569809276/use.tree.grammars.tml
> 
> Hopefully, this is clearly written.  Regardless, it summarizes my 
> position rather thoroughly. ;)  Please send me feedback if you think 
> the article can be improved etc...

Comments:
C1. Remote attribution is cool but, does it remain useful if one
already has a symbol table?

C2. Visitors tend to be used with tree built from strongly-typed nodes
(heterogenous nodes). Ignoring the [potential] typing issue related to
the representation of lists of [children] nodes,  the strong typing
enforces structural "correctness" - so explicit tree structure
validation isn't required. You get it for free.


Errata:

E1. Section "Grammars as formal structure specifications" - "not"
missing in first sentence:
"No one will argue that building a text parser by hand should be done
manually in most circumstances."

 - should be -

   "No one will argue that building a text parser by hand should not
be done manually in most circumstances."

Nice. Very clearly argued points in the article.

Cheers!

Micheal
ANTLR/C#





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Mon Nov 15 21:57:07 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <cnbtdq+p7u5@eGroups.com>
References: <24D056E8-3779-11D9-A398-000A95891192@cs.usfca.edu>
	<cnbtdq+p7u5@eGroups.com>
Message-ID: <16793.38579.246994.884356@despot.non.net>


>>>>> "micheal" == micheal jor <open.zone@virgin.net> writes:
>>>>>> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
[...]

> Comments: C1. Remote attribution is cool but, does it remain useful if
> one already has a symbol table?

Sure, it's basically what people do by hand now to keep track of stuff
during e.g., complex tree transformations.

> C2. Visitors tend to be used with tree built from strongly-typed nodes
> (heterogenous nodes). Ignoring the [potential] typing issue related to
> the representation of lists of [children] nodes, the strong typing
> enforces structural "correctness" - so explicit tree structure validation
> isn't required. You get it for free.

TANSTAAFL.

You trade off that type information for having to manage all of those
classes. 

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From demakov at ispras.ru  Tue Nov 16 03:29:33 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:33 2004
Subject: [antlr-interest] Re: summary of trip to Montreal/SableCC land
References: <cnb5g3+u7g8@eGroups.com> <3087C6C6-374E-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <012501c4cbcf$8c145cb0$8cc79553@marlboro>


From: "Terence Parr" <parrt@cs.usfca.edu>
> Well, it can do some but not all; you have to be very very careful with 
> types.  For example, I just finished somethign in my little article 
> about lists of children such as argument lists.  Unless you use 
> List<Argument>, you cannot guarantee anything about tree structure.

Yes, but why to run ahead of locomotive? :) We should be consistent with
features that target language offers. When target is Java 1.5 
(oh, sorry, Java 5 :) ) or the next version of C# we can use new features.
In the current Java it can be an option - checking list member types 
in node constructor. Or ability to use list type that checks element type.

> > Depending on the differences between the input and output tree
> > structures and how many of them we have, I can see that the
> > heterogenous approach may become unwieldy at some point. I still feel
> > ANTLR needs to support both.

Now the interface of node factory used by ANTLR is not sufficient to build
hetero-trees. But changes required to support it are very small - add node 
type as part of creator method name, i.e. factory.createSomeNode(...)
instead of create(...) now. At least factory.create( SomeNode.class, ... ).
And translate #() parameters as create() parameters, not add() calls.
(I use create(), not make() because it is mentioned in ANTLR docs).
In fact, is not much shorter than manual calls of tree factory in actions.

> I agree.  Sometimes hetero trees are nice. :)  For big translations, 
> however, 500 node types just adds complexity.  You should focus on tree 

200, not 500. 500 nodes means more than 500 grammar rules.
I think, language that requires 500 nodes in well-designed AST
is unusable :) 

And when these 200 nodes are described in a single file (or several
- to separate statements, expressions, high level structures etc)
with only one line for each child/attribute - it is quite useful.

> structure.  Type systems are blunt instruments for specifying 
> structure. ;)

Type system is not sole instrument. Structure description of hetero-tree 
is equivalent to tree grammar. Compare

    binary_expr : l = expr s = sign r = expr ;

and

    node BinaryExpr : Expr
    {
        child Expr left;
        attribute enum { PLUS, MINUS, MULT, DIV } sign;
        child Expr right;
    }

The difference is in generated code. For ANTR all information is in 
"smart" tree parser. For hetero-tree description (of course, I use TreeDL :) ) 
- it is tree node classes with all possible information about tree structure
and ability to generate additional systematic code (visitor interface 
and implementations, tree walkers and all that can be generated using tree description)
to implement actions over tree.

So, I see drawback of ANTLR tree data model - It can be used ONLY with tree parsers
because of pain of getting correct child position. And no one existing IDE will help you.
In contrast, when there are get/set methods for each child/attribute it is possible
to use code completion to speed up development.

> >>> Btw, I begin to understand that separate tree description is
> > closer to
> >>> ANTLR
> >>> tree parsers than I thought before...
> >>
> >> :)  Hooray!

You see, I've explained it above.

> > Except for the fact that separate tree description supports the use of
> > hetero-nodes much better than ANTLR currently does.
> 
> ANTLR supports general "ID should become IDNode" level support as well 
> as individual reference ID<AST=IDNode> hetero specs.  What else would 
> you like?  I'll start thinking about it when I get to trees. :)

My thoughts are above - alternate #() translation.

> >>> But what if I need more that one pass over tree - should I repeat
> > tree
> >>> grammar
> >>> in each tree walker? I don't like to have same info more than in one
> >>> place.
> >>
> >> Agreed.  You have identified something that uses up lots of my spare
> >> "CPU" time.  One solution is to simply use a tree grammar to call
> >> action methods and then you can subclass the tree parser. Now, you are
> >> back to the visitor idea and don't have to repeat the tree, however,
> >> this is unsatisfying as I've said.  I believe that we need a model
> >> where you can cut/paste a grammar to multiple phases and then push
> >> updates to all phases when the structure changes.  In reality, this is
> >> called RCS (diff3).  For papers, i'll make up some fancy name ;)

At least, ANTLR should provide tree grammar comparision to make sure
that all changes were propagated, manually or automatically.

> Yes, a tool that lets you derive a new pass from a "template" grammar 
> is what we want. :)  I think diff3 that is ANTLR grammar based not text 
> based will do nicely :)

Is it similar to making html docs from parser description? :)

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From seanharteb at yahoo.co.uk  Tue Nov 16 04:37:17 2004
From: seanharteb at yahoo.co.uk (Sean Barry)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] StringTemplate group file query
Message-ID: <20041116123717.10747.qmail@web25109.mail.ukl.yahoo.com>

Hey
In the documentation it shows how to call a file with a single template and how to use a group file by having the template embedded in the invoking Java code itself:
 
ex. 
String templates = "group simple; vardef(type,name) ...";
StringTemplateGroup group = new StringTemplateGroup(new StringReader(templates));

What would be the java code if I wanted to put a group file in a text file and have it invoked by Java code in another file just like when invoking a single template from a file?
Regards
Sean

		
---------------------------------
Moving house? Beach bar in Thailand? New Wardrobe? Win ?10k with Yahoo! Mail to make your dream a reality.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041116/815a25c2/attachment.html
From klaren at cs.utwente.nl  Tue Nov 16 05:22:34 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] Re: ANTLR for Python
In-Reply-To: <cnbagj+8vaa@eGroups.com>
References: <117C7938-2F74-11D9-89DD-000A95891192@cs.usfca.edu> <cnbagj+8vaa@eGroups.com>
Message-ID: <20041116132234.GA28164@cs.utwente.nl>


On Mon, Nov 15, 2004 at 10:27:31PM -0000, Marq Kole wrote:
> Therefore my request for how to make specific headers:
> - header "init" { } is needed, but I do not actually need separate
>   preinit and postinit, I guess. Otherwise it would be:
> - header "preinit" { } and
> - header "postinit" { }
> - header { } is necessary as well, but that's already available.
> - header "post" { } would be needed to add any code after the
>   generated parser/lexer/treeparser class, for instance for self
>   testing.

AFAIK there's no testing on the named headers they just get added in a
hashmap. So you should be able to directly put one or more in the .g files.
In the codegenerator you can call behavior.headerActions.get("init") to get
the token for the complete action text (see printHeader in
CppCodegenerator.java)

After that it's just a matter of plugging them where they need to go.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  "Of all the things I've lost I miss my mind the most --- Ozzy Osbourne



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From hombre at gmail.com  Tue Nov 16 06:55:07 2004
From: hombre at gmail.com (Tom Verbeure)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] Re: summary of trip to Montreal/SableCC land
In-Reply-To: <D1FD245E-376E-11D9-A398-000A95891192@cs.usfca.edu>
References: <cnbkc8+ampn@eGroups.com>
	 <D1FD245E-376E-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <f789634004111606555732dddb@mail.gmail.com>


> Actually, I held off my answer as I'm still writing up that discussion
> this very second. ;)

It's a great article that clarifies a lot. Thanks!

Tom


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From silverio.di at qem.it  Tue Nov 16 08:10:20 2004
From: silverio.di at qem.it (silverio.di@qem.it)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] ANTLR + ECLIPSE + GCC
Message-ID: <OF4D5E9891.5AC4C2D2-ONC1256F4E.0058A68D-C1256F4E.00595393@qem.it>






Hi to all,
have someone already used the series ANTLR + ECLIPSE +
ECLIPSE ANTLR Plugin + GCC (cygwin) in Windows ?

If you have or know a web page with a simple tutorial about
please write the address link....

Thank you very much...



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From demakov at ispras.ru  Tue Nov 16 08:33:10 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] ANTLR + ECLIPSE + GCC
References: <OF4D5E9891.5AC4C2D2-ONC1256F4E.0058A68D-C1256F4E.00595393@qem.it>
Message-ID: <02a301c4cbf9$f5e29920$8cc79553@marlboro>


From: <silverio.di@qem.it>
> have someone already used the series ANTLR + ECLIPSE +
> ECLIPSE ANTLR Plugin + GCC (cygwin) in Windows ?
> 
> If you have or know a web page with a simple tutorial about
> please write the address link....

I use all but GCC. What it changes? Simply install Eclipse plugin
and use 'Compile ANTLR grammar' in context menu of ANTLR files to 
generate all you need.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Nov 16 08:49:56 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] StringTemplate group file query
In-Reply-To: <20041116123717.10747.qmail@web25109.mail.ukl.yahoo.com>
References: <20041116123717.10747.qmail@web25109.mail.ukl.yahoo.com>
Message-ID: <8BC23B5A-37EF-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 16, 2004, at 4:37 AM, Sean Barry wrote:

> Hey
> In the documentation it shows how to call a file with a single 
> template and how to use a group file by having the template embedded 
> in the invoking Java code itself:
> ?
> ex.
>  String templates = "group simple; vardef(type,name) ...";
> StringTemplateGroup group = new StringTemplateGroup(new 
> StringReader(templates));
> What would be the java code if I wanted to put a group file?in a text 
> file and have it invoked by Java code in another file just like when 
> invoking a single template from a file?

Try new FileReader("file.stg") rather than new StringReader and it 
should work, right?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From eddie_antlr at yahoo.co.uk  Tue Nov 16 08:53:43 2004
From: eddie_antlr at yahoo.co.uk (dsfsdf fdsfdsf)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] How to copy/reference hidden tokens in transformations
Message-ID: <20041116165343.59310.qmail@web25201.mail.ukl.yahoo.com>

When i am creating a new tree from my source tree that has some hidden tokens, how do i copy these hidden across?
At the moment it is not doing it automatically.
thanks
ed.

		
---------------------------------
Win a castle  for NYE with your mates and Yahoo! Messenger 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041116/a4a2130b/attachment.html
From parrt at cs.usfca.edu  Tue Nov 16 09:12:05 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <cnbtdq+p7u5@eGroups.com>
References: <cnbtdq+p7u5@eGroups.com>
Message-ID: <A39DB116-37F2-11D9-A398-000A95891192@cs.usfca.edu>


On Nov 15, 2004, at 7:50 PM, micheal_jor wrote:
> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
>> Ok, whew!  8 furiously written pages on visitors, tree node classes,
>> tree grammars, and action execution:
>>
>> http://www.antlr.org/article/1100569809276/use.tree.grammars.tml
>>
>> Hopefully, this is clearly written.  Regardless, it summarizes my
>> position rather thoroughly. ;)  Please send me feedback if you think
>> the article can be improved etc...
>
> Comments:
> C1. Remote attribution is cool but, does it remain useful if one
> already has a symbol table?

I feel that you do still need it.  There are many contextual things you 
need to track that are not properly stored in the symbol table.  
Further, the sym tab cannot give you a stack of values for a single 
attribute.

>
> C2. Visitors tend to be used with tree built from strongly-typed nodes
> (heterogenous nodes). Ignoring the [potential] typing issue related to
> the representation of lists of [children] nodes,  the strong typing
> enforces structural "correctness" - so explicit tree structure
> validation isn't required. You get it for free.

Yes, I really like that "correctness by construction" feature; assuming 
you can actually guarantee it.  For optional children, though, the type 
system cannot help you--you need code in the ctor for that node to 
check if the children make sense.  That's ok, but now you must have a 
tool such as TreeDL or SableCC generate the classes for you; shouldn't 
build parsers by hand. ;)

> Errata:
>
> E1. Section "Grammars as formal structure specifications" - "not"
> missing in first sentence:
> "No one will argue that building a text parser by hand should be done
> manually in most circumstances."
>
>  - should be -
>
>    "No one will argue that building a text parser by hand should not
> be done manually in most circumstances."

Fixed.

> Nice. Very clearly argued points in the article.

Thanks :)

I'll let it ride for a while and see if i can add more junk later.  
Doing just tweaks now.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From demakov at ispras.ru  Tue Nov 16 09:19:06 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] Translators Should Use Tree Grammars
References: <24D056E8-3779-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <02d401c4cc00$60b111e0$8cc79553@marlboro>


From: "Terence Parr" <parrt@cs.usfca.edu>
> Ok, whew!  8 furiously written pages on visitors, tree node classes, 
> tree grammars, and action execution:
> 
> http://www.antlr.org/article/1100569809276/use.tree.grammars.tml
> 
> Hopefully, this is clearly written.  Regardless, it summarizes my 
> position rather thoroughly. ;)  Please send me feedback if you think 
> the article can be improved etc...

Ok, I'll try to be advocate of hetero-trees. :)

The main point: if we have good description of heterohenous tree
we can generate all we need. In the article hetero-trees are considered 
without tool support. Of course, manual maintenance of node classes is
difficult. But with proper tool you don't need to write get/set
methods for chilren and attributes, don't need to write additional checks.

It is easy enough to write

node Program
{
    child Stmt+ stmtList;
}

to specify that Program is non-empty list of Statements. 
TreeDL tool from this description generates class Program
with get/set methods for child stmtList that is non-empty list of statements.
Note, that list length checking in set method is generated automatically.
Moreover, a bunch of other useful methods are generated.

The tree description for Java requires about 150 nodes.
Usual number of children and attributes: 2-3. So, it's easy enough
to mainain one file with such tree description, not 150 java classes!
even they are also in single file (nested in tree description class)
and have very simple structure.

> 1. tree structure is not validated 

Visitor should not validate tree structure, because it is described separately
and checked during tree construction. When tree structure is well-designed,
you can not create tree that doesn't correspond to syntactically correct input program.
Btw, parser is not right place to check tree correctness because tree can be 
constructed even without parser :) So, tree should be self-validating.

> Node actions may compute data needed by future actions. 
> Because each action is isolated (usually as a overridden method in another class),
> you cannot use the usual programming constructs like local variables, parameters,
> and return values to pass information. You must use instance variables which are 
> clumsy and violate data hiding principles.

If data is related to node (for example, cross-references between references and 
definition), it can be stored in [dynamic] attribute of that node.
I don't know how to use local variables to pass info to other method :)
but parameters and return values can be used for visitors. At least in interface methods
- of course, between visit-methods parameters should be passed using visitor fields.

class ActionVisitor
{
    // used by visit-methods
    Parameters parameters;
    // set by visit methods
    // can be used to simulate different return types
    ReturnValue returnValue;

    public ReturnValue process( Node node, Parameters parameters )
    {
        this.parameters = parameters;
        node.accept( this );
        return this.returnValue;
    }

    public void visit( SomeNode node )
    {
        // instead of return
        // unfortunately compiler can't check that all control paths
        // return value
        this.returnValue = 
            // node and parameters can be used
            F( node, parameters );
    }
}

Not very good-looking, but it works. Better if it is generated 
from some clear description like usual methods.

On the other hand hetero-trees allow easy access to child subtree.
As far as I know in tree grammar we have access only to entities 
mentioned in current rule? And another rule is required to return value of 

node.getSomeChild().getAnotherChild().getYetAnotherChild() ?

> Manual Tree Walkers
> 2. manually built tree walkers have no guarantee that their parsing 
> logic is complete and consistent 

The same is true for tree parsers - structure of tree built by parser 
can differ from tree used in tree grammar.

> 3. manually building tree walkers is much more laborious than the visitor pattern 

Visiting and tree walking are independent things.
The main purpose of visitor pattern is implementation of "external virtual methods"
for tree nodes. Visitors can use different tree walking strateges (or don't use walking at all):

1. Generated tree walker calls actions for each node. Actions called only from tree walker,
so only tree walker uses accept() methods of nodes to call correct walk() method of child node.
Class with action methods need not to implement visitor pattern.

In this case tree walking doesn't require additional work - walker is generated.
But it is useful only in simple cases when actions can be called before/after subtree walking.
If you need action/walking mixture, you need manual tree walker (at least some methods overriden).

2. Manual tree walking using child.accept( this ) in visit methods.

Yes, requires additional work and
> 1. action and tree structure walking code is entangled; you risk breaking action code
> when altering the walking code 
is true

3. There are special cases when manual tree walking doesn't require additional work.
For example, for codegeneration I use library that support such templates

class CodeGeneratorVisitor
{
    public void visitBinaryExpr( BinaryExpr node )
    {
        // template for output
        txt( "${left} ${sign} ${right}" );
    }
}

visit methods for parameters ${...} are called automatically in library method txt().
(I know, there is drawback - patterns can not be checked at compile-time, will try 
to improve code generation library in the future)

I think the last case is the hint of what should be a source for visitor generation
- I repeat, description should be clear from implementation details, 
only what we want to express.

> For example, how do you express that a child can be optional? 

node PlusNode : ExprNode
{
    child ExprNode left;
    child ExprNode? right;
}

In TreeDL types don't allow null value implicitly. You need to write '?' that means 'optional'
as in BNF notation. As far as I remember in some specification languages (VDM)
type [T] means 'value of type T or null'. May be if it would be used in programming languages,
NullPointerException would be rare. 
Damn, I need to improve my English :) Hope, you can understand me, but I'm 
sure there is grammatical error. 

> he says that his manually developed Java tree has about 150 nodes.
> Regardless, you are still looking at lots of files.

No, I'm looking at single file with tree description. :)
It has about 1200 lines with some comments.
Parser is about three times longer.

Errata:
> enapsulating
-> encapsulating

> For example, why look in n files for n different statement node types? 
> All StatementList can show is, at most, a typed list: List<StatementNode>. 
> It says absolutely nothing about what the statements are--the subclasses
> of StatementNode seem a rather weak and indirect method for specifying 
> such a close relationship. 

> You cannot list the expression tree types; one must find all subclasses of ExprNode. 

HTML documentation can be generated from TreeDL tree description
with cross-references between node type and all inherited node types.
Example: 
http://treedl.sourceforge.net/treedl/treedl/com/unitesk/atp/treedl/TreeDL.tdl-xref/index.html

> Not only is the tree grammar more explicit (i.e., you are saying exactly 
> what you mean rather than co-opting a type system),

As I mentioned in one of previous messages, it seems that tree grammar and tree description
are almost equivalent.

>it is smaller,  

Than what? Than generated from tree description Java files? Of course.
Tree description itself also is longer but mainly because it is written line-per-child
and uses longer keywords :) But I believe TreeDL is more readable (especially
for newbies) than ANTLR tree grammar (without actions, but with labels for subrules).

> it is completely self-contained 

The same is true for TreeDL tree description.

> and formally guarantees tree structure 

Again, it's true for TreeDL. But TreeDL checks trees during construction,
not during processing. 

Btw, repeating tree grammar when writing each action in some sence is like 
repeating a class declaration in each method that process objects of this class :)

> (as opposed to hand-written walk() methods that might forget to walk down 
> one of the children). 

But not for generated walkers. And when actions are written manually,
missing of some child walking usually cause missing action.
In tree grammar also is possible to miss action.
So, chances are similar. :)

> I should also point out that Loring Craymer has a 
> means of automatically generating tree grammars from the text parser grammar 
> that builds trees (to be released in the 2.8 experimental release). 

Sounds interesting.

> Context Information

I'm also not very happy with visitors. But the way of passing context information
can be used not only with ANTLR tree grammars. Some notation can be used as source
for specification of actions over tree. It can be similar to tree grammar in part of
context information handling, but don't need to describe full tree structure
because it is described separately. And from it we can generate visitors or what else we need.

Some time ago, I played with preprocessor that generates visitors from something like this:

node SomeNode
{
    visit Visitor1
    {
        for( int i = 0; i < $#childList; i++ )
        {
            F( $childList[i] )
        }
    }

    visit Visitor2
    {
        anotherNode.$childOfAnotherNode
    }
}

visit() methods are grouped by node, like methods. And children can be referenced using $childName
shorthand notation because I hate Java long getChildName() and like C# properties.

May be now it is time to remember this tool and rethink what should be a source
and what should be generated. I'm inspired by tree grammars :)

> Multiple Tree Grammars

According to my experience, cut/paste without tool support causes many-many errors.
"Text editor in skilful hands - an awful weapon" :)

In any case, tree grammars and descriptions - are two approaches to the same problem.
I believe that both are powerful enough, both have drawbacks and both can be significantly improved.
May be it will make compiler construction even easier than today :)

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Nov 16 09:35:22 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] Re: summary of trip to Montreal/SableCC land
In-Reply-To: <012501c4cbcf$8c145cb0$8cc79553@marlboro>
References: <cnb5g3+u7g8@eGroups.com> <3087C6C6-374E-11D9-A398-000A95891192@cs.usfca.edu> <012501c4cbcf$8c145cb0$8cc79553@marlboro>
Message-ID: <E4C61A40-37F5-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 16, 2004, at 3:29 AM, Alexey Demakov wrote:

>
> From: "Terence Parr" <parrt@cs.usfca.edu>
>> Well, it can do some but not all; you have to be very very careful 
>> with
>> types.  For example, I just finished somethign in my little article
>> about lists of children such as argument lists.  Unless you use
>> List<Argument>, you cannot guarantee anything about tree structure.
>
> Yes, but why to run ahead of locomotive? :) We should be consistent 
> with
> features that target language offers.

Agreed, so my point is that you cannot guarantee tree is correct <java 
1.5.

>>> Depending on the differences between the input and output tree
>>> structures and how many of them we have, I can see that the
>>> heterogenous approach may become unwieldy at some point. I still feel
>>> ANTLR needs to support both.
>
> Now the interface of node factory used by ANTLR is not sufficient to 
> build
> hetero-trees. But changes required to support it are very small - add 
> node
> type as part of creator method name, i.e. factory.createSomeNode(...)
> instead of create(...) now. At least factory.create( SomeNode.class, 
> ... ).
> And translate #() parameters as create() parameters, not add() calls.
> (I use create(), not make() because it is mentioned in ANTLR docs).
> In fact, is not much shorter than manual calls of tree factory in 
> actions.

Cool.  I look at this when I do the trees.

>> I agree.  Sometimes hetero trees are nice. :)  For big translations,
>> however, 500 node types just adds complexity.  You should focus on 
>> tree
>
> 200, not 500. 500 nodes means more than 500 grammar rules.
> I think, language that requires 500 nodes in well-designed AST
> is unusable :)
>
> And when these 200 nodes are described in a single file (or several
> - to separate statements, expressions, high level structures etc)
> with only one line for each child/attribute - it is quite useful.

Yes, it looks very much like a grammar, right? ;)

>> structure.  Type systems are blunt instruments for specifying
>> structure. ;)
>
> Type system is not sole instrument. Structure description of 
> hetero-tree
> is equivalent to tree grammar.

Not true I'm afraid.  From your own manual, you have

abstract node Stmt
{
}

which does not describe what a statement looks like.  You must find all 
subclasses ;)

> Compare
>
>     binary_expr : l = expr s = sign r = expr ;
>
> and
>
>     node BinaryExpr : Expr
>     {
>         child Expr left;
>         attribute enum { PLUS, MINUS, MULT, DIV } sign;
>         child Expr right;
>     }
>
> The difference is in generated code.

Correct in this case.  See above though ;)  ANTLR can easily generate 
this type-based approach.

> So, I see drawback of ANTLR tree data model - It can be used ONLY with 
> tree parsers
> because of pain of getting correct child position.

Correct...this situation is because I think tree grammars are the only 
way to go except for simple cases such as the little visitor I 
demonstrate in the article (per my update just now).

> At least, ANTLR should provide tree grammar comparision to make sure
> that all changes were propagated, manually or automatically.

Yes, a good tool to have.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Nov 16 09:51:52 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] Translators Should Use Tree Grammars
In-Reply-To: <02d401c4cc00$60b111e0$8cc79553@marlboro>
References: <24D056E8-3779-11D9-A398-000A95891192@cs.usfca.edu> <02d401c4cc00$60b111e0$8cc79553@marlboro>
Message-ID: <32BFB319-37F8-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 16, 2004, at 9:19 AM, Alexey Demakov wrote:

>
> From: "Terence Parr" <parrt@cs.usfca.edu>
>> Ok, whew!  8 furiously written pages on visitors, tree node classes,
>> tree grammars, and action execution:
>>
>> http://www.antlr.org/article/1100569809276/use.tree.grammars.tml
>>
>> Hopefully, this is clearly written.  Regardless, it summarizes my
>> position rather thoroughly. ;)  Please send me feedback if you think
>> the article can be improved etc...
>
> Ok, I'll try to be advocate of hetero-trees. :)

Using tree grammars has nothing to do with hetero vs homo trees.  i can 
parse both.  Hetero trees are only useful for when you want to 
manipulate them manually.

> The main point: if we have good description of heterohenous tree
> we can generate all we need. In the article hetero-trees are considered
> without tool support. Of course, manual maintenance of node classes is
> difficult. But with proper tool you don't need to write get/set
> methods for chilren and attributes, don't need to write additional 
> checks.

ANTLR could generate classes just as you do, though I don't like the 
style of so many generated tree node types.

>> 1. tree structure is not validated
>
> Visitor should not validate tree structure, because it is described 
> separately
> and checked during tree construction.

Are you sure?  Do you check for missing children with code?  No type 
system can check this for you as null is valid for any type. ;)

>  When tree structure is well-designed,
> you can not create tree that doesn't correspond to syntactically 
> correct input program.

Yes, that is nice (assuming the type system is up to it...only OO 
languages can get close).

> Btw, parser is not right place to check tree correctness because tree 
> can be
> constructed even without parser :) So, tree should be self-validating.

A nice feature, but you must walk the tree anyway, can we agree?  Might 
as well validate as you go; it's free once you have your TreeDL or my 
grammar.

>> Node actions may compute data needed by future actions.
>> Because each action is isolated (usually as a overridden method in 
>> another class),
>> you cannot use the usual programming constructs like local variables, 
>> parameters,
>> and return values to pass information. You must use instance 
>> variables which are
>> clumsy and violate data hiding principles.
>
> If data is related to node (for example, cross-references between 
> references and
> definition), it can be stored in [dynamic] attribute of that node.
> I don't know how to use local variables to pass info to other method :)
> but parameters and return values can be used for visitors. At least in 
> interface methods
> - of course, between visit-methods parameters should be passed using 
> visitor fields.
>
> class ActionVisitor
> {
>     // used by visit-methods
>     Parameters parameters;
>     // set by visit methods
>     // can be used to simulate different return types
>     ReturnValue returnValue;
>
>     public ReturnValue process( Node node, Parameters parameters )
>     {
>         this.parameters = parameters;
>         node.accept( this );
>         return this.returnValue;
>     }
>
>     public void visit( SomeNode node )
>     {
>         // instead of return
>         // unfortunately compiler can't check that all control paths
>         // return value
>         this.returnValue =
>             // node and parameters can be used
>             F( node, parameters );
>     }
> }
>
> Not very good-looking, but it works. Better if it is generated
> from some clear description like usual methods.

Yes, a mechanism could be built but a bit ugly as you say.  Remote 
attribution gives you lots of capabilities too.

> On the other hand hetero-trees allow easy access to child subtree.
> As far as I know in tree grammar we have access only to entities
> mentioned in current rule?

You must write code in a visitor to go to the children.  We use 
patterns (i.e., rule references) in antlr to do that.  Naturally we 
could use actions to go to the children manually ala visitors ;)

>> Manual Tree Walkers
>> 2. manually built tree walkers have no guarantee that their parsing
>> logic is complete and consistent
>
> The same is true for tree parsers - structure of tree built by parser
> can differ from tree used in tree grammar.

Yeah, but the parser will say "yes" or "no", right?  Build what you 
want, then I parse it to check as I have to visit anyway each node.

>> 3. manually building tree walkers is much more laborious than the 
>> visitor pattern
>
> Visiting and tree walking are independent things.
> The main purpose of visitor pattern is implementation of "external 
> virtual methods"
> for tree nodes. Visitors can use different tree walking strateges (or 
> don't use walking at all):

Yep.

> 1. Generated tree walker calls actions for each node. Actions called 
> only from tree walker,
> so only tree walker uses accept() methods of nodes to call correct 
> walk() method of child node.
> Class with action methods need not to implement visitor pattern.
>
> In this case tree walking doesn't require additional work - walker is 
> generated.
> But it is useful only in simple cases when actions can be called 
> before/after subtree walking.
> If you need action/walking mixture, you need manual tree walker (at 
> least some methods overriden).
>
> 2. Manual tree walking using child.accept( this ) in visit methods.
>
> Yes, requires additional work and
>> 1. action and tree structure walking code is entangled; you risk 
>> breaking action code
>> when altering the walking code
> is true
>
> 3. There are special cases when manual tree walking doesn't require 
> additional work.
> For example, for codegeneration I use library that support such 
> templates
>
> class CodeGeneratorVisitor
> {
>     public void visitBinaryExpr( BinaryExpr node )
>     {
>         // template for output
>         txt( "${left} ${sign} ${right}" );
>     }
> }
>
> visit methods for parameters ${...} are called automatically in 
> library method txt().
> (I know, there is drawback - patterns can not be checked at 
> compile-time, will try
> to improve code generation library in the future)
>
> I think the last case is the hint of what should be a source for 
> visitor generation
> - I repeat, description should be clear from implementation details,
> only what we want to express.
>
>> For example, how do you express that a child can be optional?
>
> node PlusNode : ExprNode
> {
>     child ExprNode left;
>     child ExprNode? right;
> }
>
> In TreeDL types don't allow null value implicitly. You need to write 
> '?' that means 'optional'
> as in BNF notation. As far as I remember in some specification 
> languages (VDM)
> type [T] means 'value of type T or null'. May be if it would be used 
> in programming languages,
> NullPointerException would be rare.
> Damn, I need to improve my English :) Hope, you can understand me, but 
> I'm
> sure there is grammatical error.

Your English is great!

So, you generate code in the constructor to validate that the correct 
pointers are null / not-null?  That is good and is required.

>> he says that his manually developed Java tree has about 150 nodes.
>> Regardless, you are still looking at lots of files.
>
> No, I'm looking at single file with tree description. :)

That is true.  Do you ever look at the generated classes though?  You 
talk about manually setting/getting/building etc...  If you never look 
at the output, all is well and i'll change the article ;)

> It has about 1200 lines with some comments.
> Parser is about three times longer.
>
> Errata:
>> enapsulating
> -> encapsulating

oops.

>> For example, why look in n files for n different statement node types?
>> All StatementList can show is, at most, a typed list: 
>> List<StatementNode>.
>> It says absolutely nothing about what the statements are--the 
>> subclasses
>> of StatementNode seem a rather weak and indirect method for specifying
>> such a close relationship.
>
>> You cannot list the expression tree types; one must find all 
>> subclasses of ExprNode.
>
> HTML documentation can be generated from TreeDL tree description
> with cross-references between node type and all inherited node types.

Yes, but what you have is not a grammar unless it explicitly shows the 
possible subtrees.  Why use implicit rather than explicit 
specification.  You are so close to a grammar!  I think the summary is 
that you generate types and I generate methods and I allow actions in 
the grammar rather than visitors. ;)

>> Not only is the tree grammar more explicit (i.e., you are saying 
>> exactly
>> what you mean rather than co-opting a type system),
>
> As I mentioned in one of previous messages, it seems that tree grammar 
> and tree description
> are almost equivalent.

Almost ;)

>> it is smaller,
>
> Than what? Than generated from tree description Java files? Of course.
> Tree description itself also is longer but mainly because it is 
> written line-per-child
> and uses longer keywords :) But I believe TreeDL is more readable 
> (especially
> for newbies) than ANTLR tree grammar (without actions, but with labels 
> for subrules).

Perhaps as they are more familiar with fields than grammars.

>> it is completely self-contained
>
> The same is true for TreeDL tree description.

Minus the fact that stmt node does not list the statements, I might 
agree. ;)

>> and formally guarantees tree structure
>
> Again, it's true for TreeDL. But TreeDL checks trees during 
> construction,
> not during processing.

Correct.  A nice feature.

> Btw, repeating tree grammar when writing each action in some sence is 
> like
> repeating a class declaration in each method that process objects of 
> this class :)
>
>> (as opposed to hand-written walk() methods that might forget to walk 
>> down
>> one of the children).
>
> But not for generated walkers. And when actions are written manually,
> missing of some child walking usually cause missing action.
> In tree grammar also is possible to miss action.

Not a parsing action, just a user action.

> So, chances are similar. :)

more likely that a programmer will screw up the parser than their 
actions within a grammar otherwise we'd not use parser generators ;)

>> I should also point out that Loring Craymer has a
>> means of automatically generating tree grammars from the text parser 
>> grammar
>> that builds trees (to be released in the 2.8 experimental release).
>
> Sounds interesting.
>
>> Context Information
>
> I'm also not very happy with visitors. But the way of passing context 
> information
> can be used not only with ANTLR tree grammars. Some notation can be 
> used as source
> for specification of actions over tree. It can be similar to tree 
> grammar in part of
> context information handling, but don't need to describe full tree 
> structure
> because it is described separately. And from it we can generate 
> visitors or what else we need.
>
> Some time ago, I played with preprocessor that generates visitors from 
> something like this:
>
> node SomeNode
> {
>     visit Visitor1
>     {
>         for( int i = 0; i < $#childList; i++ )
>         {
>             F( $childList[i] )
>         }
>     }
>
>     visit Visitor2
>     {
>         anotherNode.$childOfAnotherNode
>     }
> }
>
> visit() methods are grouped by node, like methods. And children can be 
> referenced using $childName
> shorthand notation because I hate Java long getChildName() and like C# 
> properties.

That is good and is equiv to grammars + actions, right? :)

> May be now it is time to remember this tool and rethink what should be 
> a source
> and what should be generated. I'm inspired by tree grammars :)

Hooray!  Soon we will agree completely minus what the generated code 
looks like :)

>> Multiple Tree Grammars
>
> According to my experience, cut/paste without tool support causes 
> many-many errors.
> "Text editor in skilful hands - an awful weapon" :)

;)

> In any case, tree grammars and descriptions - are two approaches to 
> the same problem.
> I believe that both are powerful enough, both have drawbacks and both 
> can be significantly improved.
> May be it will make compiler construction even easier than today :)

Let's hope!

Thanks for the great discussion.
Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Tue Nov 16 09:46:22 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] How to copy/reference hidden tokens in transformations
In-Reply-To: <20041116165343.59310.qmail@web25201.mail.ukl.yahoo.com>
References: <20041116165343.59310.qmail@web25201.mail.ukl.yahoo.com>
Message-ID: <6DB5FA80-37F7-11D9-B82A-000393B5606C@codetransform.com>


On Nov 16, 2004, at 8:53 AM, dsfsdf fdsfdsf wrote:

> When i am creating a new tree from my source tree that has some hidden 
> tokens, how do i copy these hidden across?
> At the moment it is not doing it automatically.
> thanks
> ed.
>

There is a method to override called initialize(AST node) which is 
called to let you copy your stuff over.  For example see TNode.java in 
the GCC toolkit distribution.

Monty

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Nov 16 09:59:39 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] How to copy/reference hidden tokens in transformations
In-Reply-To: <20041116165343.59310.qmail@web25201.mail.ukl.yahoo.com>
References: <20041116165343.59310.qmail@web25201.mail.ukl.yahoo.com>
Message-ID: <4931D68A-37F9-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 16, 2004, at 8:53 AM, dsfsdf fdsfdsf wrote:

> When i am creating a new tree from my source tree that has some hidden 
> tokens, how do i copy these hidden across?
> At the moment it is not doing it automatically.
> thanks

Hi Ed.  Can't remember so I did a test.

Here is a grammar:

class TP extends TreeParser;

options {
         buildAST=true;
}

a : ID ;

It generates relevant code:

                         tmp1_AST = astFactory.create((AST)_t);
                         tmp1_AST_in = (AST)_t;
                         astFactory.addASTChild(currentAST, tmp1_AST);
                         match(_t,ID);

So I looked at:

     /** Create a new empty AST node; if the user did not specify
      *  an AST node type, then create a default one: CommonAST.
      */
     public AST create(AST tr) {
         if (tr == null) return null;		// create(null) == null
         AST t = create(tr.getType());
		if ( t!=null ) {
			t.initialize(tr);
		}
         return t;
     }

which invokes CommonASTWithHiddenTokens.initialize(AST) but that is 
inherited from CommonAST:

     public void initialize(AST t) {
         setText(t.getText());
         setType(t.getType());
     }

Hmm...seems like that should be override just like I do for Token arg:

     public void initialize(Token tok) {
         CommonHiddenStreamToken t = (CommonHiddenStreamToken)tok;
         super.initialize(t);
         hiddenBefore = t.getHiddenBefore();
         hiddenAfter = t.getHiddenAfter();
     }

Seems I forgot to do this.  Ok, I suggest subclassing 
CommonASTWithHiddenTokens and overriding to be something like:

     public void initialize(AST t) {
         hiddenBefore = t.getHiddenBefore();
         hiddenAfter = t.getHiddenAfter();
         super.initialize(t);
     }

Let me know if that works and I'll put it in ;)

Don't forget to use the new subclass when you set the AST type etc... 
in the parser/tree parser.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ewbank at synopsys.com  Tue Nov 16 10:24:39 2004
From: ewbank at synopsys.com (Bryan)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] Re: How to copy/reference hidden tokens in transformations
In-Reply-To: <6DB5FA80-37F7-11D9-B82A-000393B5606C@codetransform.com>
Message-ID: <cndgl7+dgbc@eGroups.com>



Monty Zukowski said:
> There is a method to override called initialize(AST node) which is 
> called to let you copy your stuff over.  For example see
> TNode.java in the GCC toolkit distribution.

There's a minor gotcha, at least in C++.  You need to match the 
prototype exactly -- the argument for initialize must be the same
as that in the base class, not your new node type; otherwise, it is
not overloaded and the new function is bypassed.

I'd originally used my new class as the argument to the initialize() 
function, but that doesn't work - it does not correctly overload the 
function in the base class.  You must use the same prototype.

Once I realized that, my iniitalize function worked, but it's a bit 
more obsure:

 95     // overload base class - prototype must match exactly to
 96     // intercept generated calls.
 97     virtual void
 98     TreeNode::initialize(ANTLR_USE_NAMESPACE(antlr)RefAST node)
 99     {
100         CommonAST::initialize(node);
101         // need to change the type to get at the new members
102         RefTreeNode t = RefTreeNode(node);
103         setSubtype(t->getSubtype());
104     }

I'm sure there are other, and better, ways to deal with this, but 
this seems to be working for me..





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From doublemalam at yahoo.co.uk  Tue Nov 16 12:18:01 2004
From: doublemalam at yahoo.co.uk (Muhammad Masoom Alam)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] one question regarding tree walking
In-Reply-To: <0D3FAFE6-34C5-11D9-8A83-000393B5606C@codetransform.com>
Message-ID: <20041116201801.29965.qmail@web86909.mail.ukl.yahoo.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: Main.java
Type: application/octet-stream
Size: 1014 bytes
Desc: Main.java
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041116/14a4181d/Main.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: x.g
Type: application/octet-stream
Size: 8779 bytes
Desc: x.g
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041116/14a4181d/x.obj
From parrt at cs.usfca.edu  Tue Nov 16 09:29:59 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] just updated tree grammar article
Message-ID: <23ED73E4-37F5-11D9-A398-000A95891192@cs.usfca.edu>


Howdy,

Updated to address some useful comments from you folks.  I added an 
example visitor that I used the other day to build parse trees during 
grammar interpretation for ANTLR 3.0.  :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From joanpujol at gmail.com  Tue Nov 16 13:44:01 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] Reparsing a subtree. Or another solution?
Message-ID: <d2d18a1041116134454d45d45@mail.gmail.com>


Hello,

The small question is:

How can I reparse a subtree when parsing the complete AST using a treeparser?

I need this, because, is the best form I have found to solve this problem.

I have:
expression[rvalue]:
	procedurecall(expressionlist[BitSet])
    |IDENT { Code to check if ident is initialized and other checks}
	;
	
	expressionlist[Bitset]: (expression[rvalue])+ //Each rvalue is fixed
acording a position in the BitSet.
	

The problem is that I have input,output and input/output parameters in
procedurecalls. For the output parameters I have to mark rvalue as
false. But the problem is that I can't do it because I can't determine
wich is the procedure to call until I have parsed the expressionlist
(Then I can't determine if the parameter is an output one).
And then I have though that I need to parse one time to get the types
and another to do the checks. But I want to only parse this part of
the tree.
This is the best solution? Or there is something wrong in my design?

Also I though that I have to add a parameter to expression -->
expression[rvalue,noerrors]. To set noerrors to true in the first
pass. To avoid to report the errors twice.

A lot of thanks in advance,
-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From joanpujol at gmail.com  Tue Nov 16 14:07:14 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] Recovering from missing tokens
Message-ID: <d2d18a104111614074507927b@mail.gmail.com>


Hello,

I have a pseudocode language similar to java. Now I want to start the
syntactic error checks and recovery.
(I use lookahead of 1 token)
If I have:

algorism

const
	CONST1:integer=10   //CONST1 is an ident
fconst

var
	a:integer   //a is an ident
fvar
//Start of code for exemple an assignment
a:=10	 //a is an ident

falgorism

If for example the user forgot to put the const token.
What is the best way to solve the error and recovery from it?

Because the parser gets CONST1 (an identifier) and put the parser in
the code rule. And the I think that is very hard to recovery.


A lot of thanks in advance,

-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Tue Nov 16 14:11:06 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] Re: Reparsing a subtree. Or another solution?
In-Reply-To: <d2d18a1041116134454d45d45@mail.gmail.com>
Message-ID: <cndttr+hhh9@eGroups.com>



In general, there are three approaches to this type of problem.
1.)  Multiple passes over the full tree--that has the advantage of
clarity, and the navigation overhead is usually minimal.

2.)  Duplicate the subtrees of interest, and have different walkers
(distinguished by actions, not by tree syntax) for the duplicates. 
This may have maintainability advantages.

3.)  For the second pass, walk the tree in an action.  That is:

subTreeTest
    :
    #( a:A B C ) { secondPass(#a); }
    ;

secondPass
    :
    #( A B C )
    ;

These are roughly ordered by increasing speed (although the speed
differential will be small unless the tree being walked is quite large
and the subtrees only a small fraction of the full tree) and
decreasing maintainability.

--Loring

--- In antlr-interest@yahoogroups.com, Joan Pujol <joanpujol@g...> wrote:
> Hello,
> 
> The small question is:
> 
> How can I reparse a subtree when parsing the complete AST using a
treeparser?
> 
> I need this, because, is the best form I have found to solve this
problem.
> 
> I have:
> expression[rvalue]:
> 	procedurecall(expressionlist[BitSet])
>     |IDENT { Code to check if ident is initialized and other checks}
> 	;
> 	
> 	expressionlist[Bitset]: (expression[rvalue])+ //Each rvalue is fixed
> acording a position in the BitSet.
> 	
> 
> The problem is that I have input,output and input/output parameters in
> procedurecalls. For the output parameters I have to mark rvalue as
> false. But the problem is that I can't do it because I can't determine
> wich is the procedure to call until I have parsed the expressionlist
> (Then I can't determine if the parameter is an output one).
> And then I have though that I need to parse one time to get the types
> and another to do the checks. But I want to only parse this part of
> the tree.
> This is the best solution? Or there is something wrong in my design?
> 
> Also I though that I have to add a parameter to expression -->
> expression[rvalue,noerrors]. To set noerrors to true in the first
> pass. To avoid to report the errors twice.
> 
> A lot of thanks in advance,
> -- 
> Joan Jes?s Pujol Espinar





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-CVV7MATkp3CtMUZr9NzvXDI at yahoogroups.com  Tue Nov 16 14:12:56 2004
From: antlr-interest-accept-CVV7MATkp3CtMUZr9NzvXDI at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:34 2004
Subject: MODERATE -- ron_bennatan@guardium.com posted to antlr-interest
Message-ID: <1100643176.176.44144.m13@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  ron_bennatan@guardium.com 

The message summary:
--------------------
FROM: ron_bennatan@guardium.com 
DATE: Tue, 16 Nov 2004 22:12:47 -0000 
SUBJECT: Perfomance question re bit iterator 

Hi, 

We have fairly complex parsers with some (but not too much) 

loookahead. We generate C++ code and we use 
codeGenBitsetThreshold=4. 

We've been doing some performance testing and when running 
gprof we see that around 40% of the time is in 
MismatchTokenException and specifically in 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=369 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-CVV7MATkp3CtMUZr9NzvXDI@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "ron_bennatan" <ron_bennatan@guardium.com>
Subject: Perfomance question re bit iterator
Date: Tue, 16 Nov 2004 22:12:47 -0000
Size: 1854
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041116/1914150a/attachment.mht
From ron_bennatan at guardium.com  Tue Nov 16 14:12:47 2004
From: ron_bennatan at guardium.com (ron_bennatan)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] Perfomance question re bit iterator
Message-ID: <cndu0v+2m7u@eGroups.com>




Hi,

We have fairly complex parsers with some (but not too much) 
loookahead. We generate C++ code and we use codeGenBitsetThreshold=4.

We've been doing some performance testing and when running gprof we 
see that around 40% of the time is in MismatchTokenException and 
specifically in std::_Bit_iterator std::_copy. 

Can anyone shed some light as to what exactly MismatchTokenException 
is, when it is raised (we think we know - but are not sure) and what 
we can do to reduce the run time? Also, are there any tips as to how 
to reduce the number of copies and anything else that can reduce the 
number of these exceptions and copies.

Thanks.








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Nov 16 14:52:48 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] Perfomance question re bit iterator
In-Reply-To: <cndu0v+2m7u@eGroups.com>
References: <cndu0v+2m7u@eGroups.com>
Message-ID: <3CEF43C4-3822-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 16, 2004, at 2:12 PM, ron_bennatan wrote:
> We've been doing some performance testing and when running gprof we
> see that around 40% of the time is in MismatchTokenException and
> specifically in std::_Bit_iterator std::_copy.
>
> Can anyone shed some light as to what exactly MismatchTokenException
> is, when it is raised (we think we know - but are not sure) and what
> we can do to reduce the run time? Also, are there any tips as to how
> to reduce the number of copies and anything else that can reduce the
> number of these exceptions and copies.

My guess is that the MismatchTokenException is due to backtracking.  Do 
you use lots of syntactic predicates?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From mrosgood at yahoo.com  Tue Nov 16 14:52:39 2004
From: mrosgood at yahoo.com (Jason Aaron Osgood)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] LL(*) and PackRat
Message-ID: <cne0bn+q78r@eGroups.com>



Hi Terence Parr-


It's exciting to see ANTLR still on the move.

I just read your ANTLR 2004 slides for LL(*) parsing.  I'm still
nursing the dream of learning enough about parsing to adapt the
interactive parsing algorithms from Harmonia (Tim Wagner et al) to
ANTLR.  (Phil Cook et al from UQ has some followup work.)

While digging around, I learned about Bryan Ford's Packrat Parsing
algorithm.  (There's a part to Java called Rats!  Very droll.)

Is there a comparison of LL(*) and Packrat parsing?  

I like how both are trying to simplify the development of grammars.  I
have a small head and really struggled to get some of my language
ideas working with ANTLR.  I ended up modifying my language to make
the implementation easier.  Not necessarily bad.  I just was trying to
solve a problem.

Since Packrat memoizes all the tokens, the heap usage can get pretty
big.  I have the impression that LL(*) won't have that characteristic.


One other thing: Googing for "LL(*)" will be somewhat problematic. 
Perhaps a synonym is in order?  No one should repeat Microsoft's
mistake with "C#".


Cheers, Jason Aaron Osgood / Seattle WA





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Tue Nov 16 15:00:27 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] Re: Perfomance question re bit iterator
In-Reply-To: <cndu0v+2m7u@eGroups.com>
Message-ID: <cne0qb+49vg@eGroups.com>



--- In antlr-interest@yahoogroups.com, "ron_bennatan"
<ron_bennatan@g...> wrote:
> 
> 
> Hi,
> 
> We have fairly complex parsers with some (but not too much) 
> loookahead. We generate C++ code and we use codeGenBitsetThreshold=4.
> 
> We've been doing some performance testing and when running gprof we 
> see that around 40% of the time is in MismatchTokenException and 
> specifically in std::_Bit_iterator std::_copy. 
> 
> Can anyone shed some light as to what exactly MismatchTokenException 
> is, when it is raised (we think we know - but are not sure) and what 
> we can do to reduce the run time? Also, are there any tips as to how 
> to reduce the number of copies and anything else that can reduce the 
> number of these exceptions and copies.

It is raised in calls to Parser::match().  For this to happen without
being reported at the user level means that a syntactic predicate is
"failing".  Check your grammar and try to refactor it to remove
synpreds wherever possible.

--Loring

> Thanks.





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Tue Nov 16 15:08:00 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] Re: Perfomance question re bit iterator
In-Reply-To: <cne0qb+49vg@eGroups.com>
Message-ID: <cne18g+u8fe@eGroups.com>



One other trick--find out which synpred is causing problems (if there
is only one).  There will be two (or more) alternatives differentiated
by the synpred; try reversing the order of the alternatives (and
change the synpred accordingly).  If you are using a synpred on a low
probability alternative, then it will almost always generate an
exception; if you reverse the alternatives, it may rarely do so.

--Loring





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From joanpujol at gmail.com  Tue Nov 16 15:12:44 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] Re: Reparsing a subtree. Or another solution?
In-Reply-To: <cndttr+hhh9@eGroups.com>
References: <d2d18a1041116134454d45d45@mail.gmail.com>
	 <cndttr+hhh9@eGroups.com>
Message-ID: <d2d18a1041116151216083f8c@mail.gmail.com>


A lot of thanks for your excellent reply.

On Tue, 16 Nov 2004 22:11:06 -0000, lgcraymer <lgc@mail1.jpl.nasa.gov> wrote:
> 
> 
> In general, there are three approaches to this type of problem.
> 1.)  Multiple passes over the full tree--that has the advantage of
> clarity, and the navigation overhead is usually minimal.
Well, I already know this alternative, but I found it very "hard" if I
only need the reparsing for one check, and only in very small parts of
the AST.
Currently I use two pass, one for type discovering (I have forward
references) and the second for type checking an others. And if I can't
I don't want to put a third pass.
 
> 2.)  Duplicate the subtrees of interest, and have different walkers
> (distinguished by actions, not by tree syntax) for the duplicates.
> This may have maintainability advantages.
I can't understand this alternative well.
Please, can you put an small example?

> 3.)  For the second pass, walk the tree in an action.  That is:
> 
> subTreeTest
>     :
>     #( a:A B C ) { secondPass(#a); }
>     ;
> 
> secondPass
>     :
>     #( A B C )
>     ;
The third aproach seems very nice to my needs.

A lot of thanks,


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Tue Nov 16 15:42:35 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] Re: Reparsing a subtree. Or another solution?
In-Reply-To: <d2d18a1041116151216083f8c@mail.gmail.com>
Message-ID: <cne39b+kfe3@eGroups.com>



--- In antlr-interest@yahoogroups.com, Joan Pujol <joanpujol@g...> wrote:
> A lot of thanks for your excellent reply.
> 
> On Tue, 16 Nov 2004 22:11:06 -0000, lgcraymer <lgc@m...> wrote:
...
> > 2.)  Duplicate the subtrees of interest, and have different walkers
> > (distinguished by actions, not by tree syntax) for the duplicates.
> > This may have maintainability advantages.
> I can't understand this alternative well.
> Please, can you put an small example?

Basically, if you have a subtree, say "a", then you use
factory->dupTree(#a) in an action and add it to the current rule's
tree.  The simplest case is actually messy in 2.7 (I didn't think
through the implementation), so you are probably better off adopting
the third approach.

--Loring





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Nov 16 16:09:52 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] java 1.4 as min value?
Message-ID: <00E4C2A6-382D-11D9-A398-000A95891192@cs.usfca.edu>


How do people feel about ANTLR 3.0 requiring 1.4 JDK or above?  I want 
two things so far:

LinkedHashMap

and

memory mapped I/O

Thoughts?  Perhaps those using 1.3 are doing so for legacy reasons and 
therefore are having to use 2.x version of ANTLR anyway.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Nov 16 17:27:57 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] ANTLR 3.0 lexer speed :)
Message-ID: <E95A4217-3837-11D9-A398-000A95891192@cs.usfca.edu>


Ok, I'm starting to check out lexer speed for Java.  Comparing pascal 
lexer speed (no parsing for now).  I turn on -Xint and -Xmx200M to 
avoid compilation and GC interruption.  I load entire file into memory 
with FileReader.read(char[]).  Naturally, the new char[file.length()] 
takes a while to allocate and zero out the memory.  Ick.  memory mapped 
I/O should be faster I imagine, but "should" never seems to match up to 
my expectations with Sun's libraries. ;)

Anyhoo, with -Xint on, ANTLR 3.0 is about 6 times faster even before I 
optimize the DFAs; I "backtrack" (i.e., test chars twice) now on each 
keyword I'm pretty sure whereas the 2.0 lexer uses a hashtable for 
keywords.

I run each input file a bunch of times on each test to prevent the VM 
start up from skewing the results.

Now, allowing the on-the-fly java compiler, ANTLR 3 is about 5.5 times 
faster than ANTLR 2 so about the same, which is comforting.

I noticed, however, that if i tweaked my test file then it didn't get 
compiled dynamically and the damn thing takes LONGER than ANTLR 2.  
Ugh.  A statically-compiled language would be nice sometimes ;)

Just to give some absolute numbers, on my 1Ghz mac os x laptop with 1G 
ram, it takes 2.58s to lex a 177k pascal file 50 times with ANTLR 3; 
that's 8.85M of text throughput.  The ANTLR 2 version takes about 
14.42s.

I'm not sure Ruslan will be happy yet, but I am at this early stage of 
the game. ;)  I'm not sure how much of the difference is the fully 
buffered char stream, but whatever.  I'll take the new numbers.

Terence
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Tue Nov 16 17:30:33 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] Re: java 1.4 as min value?
In-Reply-To: <00E4C2A6-382D-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <cne9jp+k1lm@eGroups.com>



1.4 dates back to 2002.  java.sun.com provides only 1.4.2 and 5.0 (nee
1.5) for download.  IBM still supports a 1.3.1 download in addition to
1.4.  SGI supports a range of downloads, from 1.1.18 to 1.4.1

It looks like anyone depending on pre-1.4 has already got
maintainability problems and they can only get worse.

1.4 is a good baseline.  1.5 still scares me because of the addition
of generics, but I have yet to investigate whether Sun avoided the
pitfalls that C++ ran into with standardizing templates before
standard practice had emerged.

--Loring


--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> How do people feel about ANTLR 3.0 requiring 1.4 JDK or above?  I want 
> two things so far:
> 
> LinkedHashMap
> 
> and
> 
> memory mapped I/O
> 
> Thoughts?  Perhaps those using 1.3 are doing so for legacy reasons and 
> therefore are having to use 2.x version of ANTLR anyway.
> 
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Tue Nov 16 17:50:11 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] Re: java 1.4 as min value?
References: <cne9jp+k1lm@eGroups.com>
Message-ID: <000801c4cc47$c64f0bf0$0400a8c0@NOTEBOOK>


V1.4 is OK with me also.

V1.5's thread locking fails on a program that runs just fine under V1.4
(Sun mucked about with the thread priorities etc.) so I am postponing moving
to V1.5 for the moment.
matthew
----- Original Message ----- 
From: "lgcraymer" <lgc@mail1.jpl.nasa.gov>
To: <antlr-interest@yahoogroups.com>
Sent: Wednesday, November 17, 2004 12:30 PM
Subject: [antlr-interest] Re: java 1.4 as min value?


>
>
> 1.4 dates back to 2002.  java.sun.com provides only 1.4.2 and 5.0 (nee
> 1.5) for download.  IBM still supports a 1.3.1 download in addition to
> 1.4.  SGI supports a range of downloads, from 1.1.18 to 1.4.1
>
> It looks like anyone depending on pre-1.4 has already got
> maintainability problems and they can only get worse.
>
> 1.4 is a good baseline.  1.5 still scares me because of the addition
> of generics, but I have yet to investigate whether Sun avoided the
> pitfalls that C++ ran into with standardizing templates before
> standard practice had emerged.
>
> --Loring
>
>
> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> > How do people feel about ANTLR 3.0 requiring 1.4 JDK or above?  I want
> > two things so far:
> >
> > LinkedHashMap
> >
> > and
> >
> > memory mapped I/O
> >
> > Thoughts?  Perhaps those using 1.3 are doing so for legacy reasons and
> > therefore are having to use 2.x version of ANTLR anyway.
> >
> > Ter
> > --
> > CS Professor & Grad Director, University of San Francisco
> > Creator, ANTLR Parser Generator, http://www.antlr.org
> > Cofounder, http://www.jguru.com
> > Cofounder, http://www.knowspam.net enjoy email again!
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From csnyder at alumni.ncsu.edu  Tue Nov 16 19:05:58 2004
From: csnyder at alumni.ncsu.edu (kozchris)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] Re: java 1.4 as min value?
In-Reply-To: <00E4C2A6-382D-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <cnef6m+gbl7@eGroups.com>



1.4 works for me. 

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> How do people feel about ANTLR 3.0 requiring 1.4 JDK or above?  I want 
> two things so far:
> 
> LinkedHashMap
> 
> and
> 
> memory mapped I/O
> 
> Thoughts?  Perhaps those using 1.3 are doing so for legacy reasons and 
> therefore are having to use 2.x version of ANTLR anyway.
> 
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Tue Nov 16 21:00:09 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] LL(*) and PackRat
In-Reply-To: <cne0bn+q78r@eGroups.com>
References: <cne0bn+q78r@eGroups.com>
Message-ID: <16794.56025.800276.699082@despot.non.net>


>>>>> "Jason" == Jason Aaron Osgood <mrosgood@yahoo.com> writes:
[...]

> One other thing: Googing for "LL(*)" will be somewhat problematic.
> Perhaps a synonym is in order?  No one should repeat Microsoft's mistake
> with "C#".

Indeed.

"LL-star" seems to be the front runner.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Tue Nov 16 21:04:11 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] Re: java 1.4 as min value?
In-Reply-To: <cne9jp+k1lm@eGroups.com>
References: <00E4C2A6-382D-11D9-A398-000A95891192@cs.usfca.edu>
	<cne9jp+k1lm@eGroups.com>
Message-ID: <16794.56267.887586.183961@despot.non.net>


>>>>> "lgcraymer" == lgcraymer  <lgc@mail1.jpl.nasa.gov> writes:
[...]

> It looks like anyone depending on pre-1.4 has already got maintainability
> problems and they can only get worse.

There's an archive page of the old Sun JRE's.  It's kind of hard to find
but it's out there.

> 1.4 is a good baseline.

I concur.

> 1.5 still scares me because of the addition of generics, but I have yet
> to investigate whether Sun avoided the pitfalls that C++ ran into with
> standardizing templates before standard practice had emerged.

No but they did something just as bad.  Generics in Java are done via type
erasure at compile time.  Sigh.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From demakov at ispras.ru  Wed Nov 17 00:23:37 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] Re: summary of trip to Montreal/SableCC land
References: <cnb5g3+u7g8@eGroups.com> <3087C6C6-374E-11D9-A398-000A95891192@cs.usfca.edu> <012501c4cbcf$8c145cb0$8cc79553@marlboro> <E4C61A40-37F5-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <005401c4cc7e$bce55bf0$8cc79553@marlboro>


From: "Terence Parr" <parrt@cs.usfca.edu>
> On Nov 16, 2004, at 3:29 AM, Alexey Demakov wrote:
> > From: "Terence Parr" <parrt@cs.usfca.edu>
> >> Well, it can do some but not all; you have to be very very careful 
> >> with
> >> types.  For example, I just finished somethign in my little article
> >> about lists of children such as argument lists.  Unless you use
> >> List<Argument>, you cannot guarantee anything about tree structure.
> >
> > Yes, but why to run ahead of locomotive? :) We should be consistent 
> > with
> > features that target language offers.
> 
> Agreed, so my point is that you cannot guarantee tree is correct <java 
> 1.5.

I can. But didn't think it's necessary. Ok, I'll add an option to generate
such checks.

> >> I agree.  Sometimes hetero trees are nice. :)  For big translations,
> >> however, 500 node types just adds complexity.  You should focus on 
> >> tree
> >
> > 200, not 500. 500 nodes means more than 500 grammar rules.
> > I think, language that requires 500 nodes in well-designed AST
> > is unusable :)
> >
> > And when these 200 nodes are described in a single file (or several
> > - to separate statements, expressions, high level structures etc)
> > with only one line for each child/attribute - it is quite useful.
> 
> Yes, it looks very much like a grammar, right? ;)

Of course :) And '?', '*', '+' in tree description emphasize this fact.
But tree description is primary data description. And requires additional
notation for actions. In contrast to tree grammar it is not required
to redescribe tree structure in action descriptions.

> >> structure.  Type systems are blunt instruments for specifying
> >> structure. ;)
> >
> > Type system is not sole instrument. Structure description of 
> > hetero-tree is equivalent to tree grammar.
> 
> Not true I'm afraid.  From your own manual, you have
> 
> abstract node Stmt
> {
> }
> 
> which does not describe what a statement looks like.  You must find all 
> subclasses ;)

Good documentation with cross-references helps. In any case, it is usual situation
for OO languages :) I often look in JDK JavaDocs to find required implementation of
OutputStream or something.

> > So, I see drawback of ANTLR tree data model - It can be used ONLY with 
> > tree parsers
> > because of pain of getting correct child position.
> 
> Correct...this situation is because I think tree grammars are the only 
> way to go except for simple cases such as the little visitor I 
> demonstrate in the article (per my update just now).

Another thought: Is it possible to write partial tree grammar?
If I need to go from root node to some known subtree and don't want
to specify other parts of tree? Can I write something like

rule : #(ROOT unknown unknown child unknown) ;

child : #(CHILD unknown unknown anotherChild) ;

anotherChild : #( ID ) ;

unknown : ???

Or I should inherit this small tree grammar from full one?
In any case, will ANTLR walk entire tree?

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From demakov at ispras.ru  Wed Nov 17 00:55:18 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] Translators Should Use Tree Grammars
References: <24D056E8-3779-11D9-A398-000A95891192@cs.usfca.edu> <02d401c4cc00$60b111e0$8cc79553@marlboro> <32BFB319-37F8-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <007201c4cc83$29d00fe0$8cc79553@marlboro>


From: "Terence Parr" <parrt@cs.usfca.edu>
> On Nov 16, 2004, at 9:19 AM, Alexey Demakov wrote:
> > From: "Terence Parr" <parrt@cs.usfca.edu>
> >> Ok, whew!  8 furiously written pages on visitors, tree node classes,
> >> tree grammars, and action execution:
> >>
> >> http://www.antlr.org/article/1100569809276/use.tree.grammars.tml
> >>
> >> Hopefully, this is clearly written.  Regardless, it summarizes my
> >> position rather thoroughly. ;)  Please send me feedback if you think
> >> the article can be improved etc...
> >
> > Ok, I'll try to be advocate of hetero-trees. :)
> 
> Using tree grammars has nothing to do with hetero vs homo trees.  i can 

Agree. I consider to add option to generated implementation of AST node interface :)

> parse both.  Hetero trees are only useful for when you want to 
> manipulate them manually.

Yes, but there are other applications of tree description.

> >  When tree structure is well-designed,
> > you can not create tree that doesn't correspond to syntactically 
> > correct input program.
> 
> Yes, that is nice (assuming the type system is up to it...only OO 
> languages can get close).

Almost all functionality of modern OO languages (Java, C#) can be simulated
even in C :) It affects only amount of generated code.
I have experience of translation from RSL specification language
to C-like language - had to translate high-level abstract data types
and to implement garbage collection.

> You must write code in a visitor to go to the children.  We use 
> patterns (i.e., rule references) in antlr to do that.  Naturally we 
> could use actions to go to the children manually ala visitors ;)

But you can't use children names until they are referenced in rule?

> > No, I'm looking at single file with tree description. :)
> 
> That is true.  Do you ever look at the generated classes though?  You 
> talk about manually setting/getting/building etc...  If you never look 
> at the output, all is well and i'll change the article ;)

Yes, tree description is the only source I use. It's easy to mentally 
translate children names to get/set method names :)

> >> You cannot list the expression tree types; one must find all 
> >> subclasses of ExprNode.
> >
> > HTML documentation can be generated from TreeDL tree description
> > with cross-references between node type and all inherited node types.
> 
> Yes, but what you have is not a grammar unless it explicitly shows the 
> possible subtrees.  Why use implicit rather than explicit 
> specification.  

Yes, it's not grammar. But I have all usual OOP bonuses - tree description
can be extended.  :)

> You are so close to a grammar!  I think the summary is 
> that you generate types and I generate methods and I allow actions in 
> the grammar rather than visitors. ;)

Yes, I think tree grammars should be supported by TreeDL :)
But ways to process trees will not restricted to it :)

> > But I believe TreeDL is more readable (especially
> > for newbies) than ANTLR tree grammar (without actions, but with labels 
> > for subrules).
> 
> Perhaps as they are more familiar with fields than grammars.

I watch your ideas since PCCTS and have to say that they are great
but sometimes requires time to understand :)

> >> it is completely self-contained
> >
> > The same is true for TreeDL tree description.
> 
> Minus the fact that stmt node does not list the statements, I might 
> agree. ;)

Consider tree description as a whole :)

> > visit() methods are grouped by node, like methods. And children can be 
> > referenced using $childName
> > shorthand notation because I hate Java long getChildName() and like C# 
> > properties.
> 
> That is good and is equiv to grammars + actions, right? :)

Yep :)

> > May be now it is time to remember this tool and rethink what should be 

remember -> recall

> > a source
> > and what should be generated. I'm inspired by tree grammars :)
> 
> Hooray!  Soon we will agree completely minus what the generated code 
> looks like :)

I hope :) As I skip parts of message where we've reached consensus,
this message is much shorter :)

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From demakov at ispras.ru  Wed Nov 17 01:03:20 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] java 1.4 as min value?
References: <00E4C2A6-382D-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <009001c4cc84$48febd20$8cc79553@marlboro>


From: "Terence Parr" <parrt@cs.usfca.edu>
> How do people feel about ANTLR 3.0 requiring 1.4 JDK or above?  I want 
> two things so far:

+1 vote for >= JDK1.4

ANTLR 2.x is a workaround for older versions :)

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From marq.kole at philips.com  Wed Nov 17 01:22:54 2004
From: marq.kole at philips.com (Marq Kole)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] header sections (was: Re: ANTLR for Python)
In-Reply-To: <20041116132234.GA28164@cs.utwente.nl>
Message-ID: <cnf59e+cvio@eGroups.com>



--- In antlr-interest@yahoogroups.com, Ric Klaren <klaren@c...> 
wrote:
> On Mon, Nov 15, 2004 at 10:27:31PM -0000, Marq Kole wrote:
<SNIP>

Ric,

Thanks for the explanation, I got it working in one go.

Now that I have had a look at it, I am beginning to wonder: the 
header section seems to be generic, so not tied to either a lexer, 
parser or treeparser in particular. The ANTLR manual as it is did 
seem to acknowledge that impression. So if I have a file with both a 
lexer and a parser, a named header section will be added to both 
generated classes, that is: the same named header. If you do 
anything else than including headers in such a header section (for 
instance, defining auxillary classes or functions, or global 
variables) it will result in duplicated code.

So would we need to put a warning in the manual sections on Cpp and 
Python runtime (don't know if C# uses those) that if you use named 
headers you'd better make separate grammar files for your lexer, 
parser and treeparser.

Alternatively, we can do some clever processing on the named header 
files (this is just a proposal). If I want a named 
section "__init__" - I'm going to the scheme devised for Python now -
 to be used only for the lexer class, I could provide a 
name "<LexerClassName>.__init__" for the header. In the case there 
is also a parser in the file, that would not get the code in this 
header section. By using the actual name of the class instead of a 
name "lexer.__init__" it would even be possible to address this 
issue with 2 lexer definitions in the .g file (if that is at all 
possible). 

Marq






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From joanpujol at gmail.com  Wed Nov 17 03:50:01 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] Re: How to copy/reference hidden tokens in transformations
In-Reply-To: <cndgl7+dgbc@eGroups.com>
References: <6DB5FA80-37F7-11D9-B82A-000393B5606C@codetransform.com>
	 <cndgl7+dgbc@eGroups.com>
Message-ID: <d2d18a1041117035027c9d2e3@mail.gmail.com>


On Tue, 16 Nov 2004 18:24:39 -0000, Bryan <ewbank@synopsys.com> wrote:
> There's a minor gotcha, at least in C++.  You need to match the
> prototype exactly -- the argument for initialize must be the same
> as that in the base class, not your new node type; otherwise, it is
> not overloaded and the new function is bypassed.
In java too. Java like C++ hasn't dynamic binding for parameters.
There are extensions like multijava but...

Cheers,


-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From joanpujol at gmail.com  Wed Nov 17 03:58:05 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] one question regarding tree walking
In-Reply-To: <20041116201801.29965.qmail@web86909.mail.ukl.yahoo.com>
References: <0D3FAFE6-34C5-11D9-8A83-000393B5606C@codetransform.com>
	 <20041116201801.29965.qmail@web86909.mail.ukl.yahoo.com>
Message-ID: <d2d18a104111703585afe6325@mail.gmail.com>


On Tue, 16 Nov 2004 20:18:01 +0000 (GMT), Muhammad Masoom Alam
<doublemalam@yahoo.co.uk> wrote:
> : ( typeName o:COLON^ ((COMMA!)? IDENT)* {#o.setType(PARAMETERCOLON);} SEMI!
> ) 
> 
> how I can write a tree walker expression so that this kind of tree can be
> matched
Us ? and * like in your parser.
 
> I have written 
> 
> operation_definition1
> 
>                   : #(PARAMETERCOLON  j:typeName (IDENT)+) 

In your parser you have (..IDENT)* and in the TreeParser you have (IDENT)+
Use the '*'


Cheers,
-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From joanpujol at gmail.com  Wed Nov 17 04:06:13 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] java 1.4 as min value?
In-Reply-To: <009001c4cc84$48febd20$8cc79553@marlboro>
References: <00E4C2A6-382D-11D9-A398-000A95891192@cs.usfca.edu>
	 <009001c4cc84$48febd20$8cc79553@marlboro>
Message-ID: <d2d18a10411170406426626fe@mail.gmail.com>


Java 1.4 -->  +1



-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From doublemalam at yahoo.co.uk  Wed Nov 17 04:36:04 2004
From: doublemalam at yahoo.co.uk (Muhammad Masoom Alam)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] one question regarding tree walking plz help
Message-ID: <20041117123604.51679.qmail@web86905.mail.ukl.yahoo.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: x.g
Type: application/octet-stream
Size: 5286 bytes
Desc: x.g
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041117/a8a9b9a3/x.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Main.java
Type: application/octet-stream
Size: 1012 bytes
Desc: Main.java
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041117/a8a9b9a3/Main.obj
From eddie_antlr at yahoo.co.uk  Wed Nov 17 06:28:48 2004
From: eddie_antlr at yahoo.co.uk (dsfsdf fdsfdsf)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] How to copy/reference hidden tokens in transformations
In-Reply-To: <4931D68A-37F9-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <20041117142848.30832.qmail@web25209.mail.ukl.yahoo.com>

hi ter
Did that suggestion and it worked.
 
public void initialize(AST t)
{  hiddenBefore = ((CommonASTWithHiddenTokens)t).getHiddenBefore();
   hiddenAfter = ((CommonASTWithHiddenTokens)t).getHiddenAfter();
   super.initialize(t) 
}
 
Both hiddenBefore and hiddenAfter must be cast to type CommonASTWithHiddenTokens to allow access to the methods getHiddenAfter() and getHiddenBefore()
And replace CommonASTWithHiddenTokens objects with your new class in your parser class.
thanks for all the help.
ed. 
 

Terence Parr <parrt@cs.usfca.edu> wrote:


On Nov 16, 2004, at 8:53 AM, dsfsdf fdsfdsf wrote:

> When i am creating a new tree from my source tree that has some hidden 
> tokens, how do i copy these hidden across?
> At the moment it is not doing it automatically.
> thanks

Hi Ed. Can't remember so I did a test.

Here is a grammar:

class TP extends TreeParser;

options {
buildAST=true;
}

a : ID ;

It generates relevant code:

tmp1_AST = astFactory.create((AST)_t);
tmp1_AST_in = (AST)_t;
astFactory.addASTChild(currentAST, tmp1_AST);
match(_t,ID);

So I looked at:

/** Create a new empty AST node; if the user did not specify
* an AST node type, then create a default one: CommonAST.
*/
public AST create(AST tr) {
if (tr == null) return null; // create(null) == null
AST t = create(tr.getType());
if ( t!=null ) {
t.initialize(tr);
}
return t;
}

which invokes CommonASTWithHiddenTokens.initialize(AST) but that is 
inherited from CommonAST:

public void initialize(AST t) {
setText(t.getText());
setType(t.getType());
}

Hmm...seems like that should be override just like I do for Token arg:

public void initialize(Token tok) {
CommonHiddenStreamToken t = (CommonHiddenStreamToken)tok;
super.initialize(t);
hiddenBefore = t.getHiddenBefore();
hiddenAfter = t.getHiddenAfter();
}

Seems I forgot to do this. Ok, I suggest subclassing 
CommonASTWithHiddenTokens and overriding to be something like:

public void initialize(AST t) {
hiddenBefore = t.getHiddenBefore();
hiddenAfter = t.getHiddenAfter();
super.initialize(t);
}

Let me know if that works and I'll put it in ;)

Don't forget to use the new subclass when you set the AST type etc... 
in the parser/tree parser.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!






Yahoo! Groups Links








		
---------------------------------
Win a castle  for NYE with your mates and Yahoo! Messenger 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041117/1ba4ef83/attachment.html
From csnyder at alumni.ncsu.edu  Wed Nov 17 06:38:20 2004
From: csnyder at alumni.ncsu.edu (kozchris)
Date: Mon Dec 20 16:17:34 2004
Subject: [antlr-interest] Re: one question regarding tree walking plz help
In-Reply-To: <20041117123604.51679.qmail@web86905.mail.ukl.yahoo.com>
Message-ID: <cnfnos+s2di@eGroups.com>



i think your problem is that your code block is in the wrong place. 

try this:
variable_definition 
 : #(TYPENAME t:typeName (i:IDENT { 
 
 System.out.println("The NAME of the Auxilary variable is : +i.getText());
 
 System.out.println("The type of the Auxilary variable is : +t.getText());
 
}
  )+ 
) ;

that should run for each IDENT.
What you had ran for the entire rule. E.G. once.

Chris


 
 

--- In antlr-interest@yahoogroups.com, Muhammad Masoom Alam
<doublemalam@y...> wrote:
> Dear all.
>  
> i will be more specific in this email to my problem
> i will state my problem in the following points.
>  I have a small language for which i want to do syntax and sematic
checking. 
> 
>    As for as syntax checking is concerned , i am able to do it with
Parser and Lexer of ANTLR and that is no problem 
>    but when it comes to semantic checking, where i need to build a
tree and then later on parse the tree(i.e. extract tree node values ,
so that i can check according to my logic and to have some fruit ful
results ,    my work fails) and so far , i have no help regarding this
over the internet.
>             suppose i have a rule in my Parser file i.e.
>              startrule
>                         : ( VAR! (variable_definition SEMI! )+)?
>                         ;
>           
> variable_definition : typeName ( IDENT (COMMA)? )+
{#variable_definition = #([TYPENAME,"TYPENAME"],#variable_definition);} 
> 
>                         ; 
>                                                                       ;
>      now rule state that 
>             if i have an expression var int i,j,k; real a,b,c;
>  
>    it should make TYPENAME as root and int , i , j , k as childs.
> similarly   TYPENAME as root and real a,b,c as childs.
>  
> that is done becaz when i print the tree , it gives me the results
like this 
> 
> ( TYPENAME int I , j ,k ) ( TYPENAME real a , b, c )
> 
> The problem is that i cant read the tree in the Treewalker section 
> 
> if i specify a rule in tree walking section like this
> 
> variable_definition
> 
> : #(TYPENAME t:typeName (i:IDENT)+ )
> 
> { 
> 
> System.out.println("The NAME of the Auxilary variable is :
"+i.getText());
> 
> System.out.println("The type of the Auxilary variable is :
"+t.getText());
> 
> }
> 
> it does give me just first child and next sibling but not more. how
i can take infinite sibling nodes 
> 
> I am enclosing the JAVA file and grammar file and if you give the
input as follow
> 
>  var int I,j,k;real a,b,c;
> 
> you will see a tree and other results.
> 
> whether i am wrong in the tree construction , or i am doing some
other error.
> 
> I will be very thankful to you for your kind time .
> 
> with Best Regards.
> 
> Muhammad.
> 
> 
> 
> 
> 		
> ---------------------------------
> Moving house? Beach bar in Thailand? New Wardrobe? Win ?10k with
Yahoo! Mail to make your dream a reality.





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-8QfnQEJ6PJgxrSFGJl87Jq8 at yahoogroups.com  Wed Nov 17 06:58:56 2004
From: antlr-interest-accept-8QfnQEJ6PJgxrSFGJl87Jq8 at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:34 2004
Subject: MODERATE -- hanasaki@hanaden.com posted to antlr-interest
Message-ID: <1100703536.449.6402.m7@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  hanasaki@hanaden.com 

The message summary:
--------------------
FROM: hanasaki@hanaden.com 
DATE: Wed, 17 Nov 2004 08:58:35 -0600 
SUBJECT: java 1.4 as min value? - 

How do people feel about ANTLR 3.0 requiring 1.4 JDK or 
above? I want two things so far: 

LinkedHashMap 

and 

memory mapped I/O 

Thoughts? Perhaps those using 1.3 are doing so for legacy 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=370 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-8QfnQEJ6PJgxrSFGJl87Jq8@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: hanasaki <hanasaki@hanaden.com>
Subject: java 1.4 as min value? -
Date: Wed, 17 Nov 2004 08:58:35 -0600
Size: 3057
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041117/d2ef795e/attachment.mht
From hanasaki at hanaden.com  Wed Nov 17 06:58:35 2004
From: hanasaki at hanaden.com (hanasaki)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] java 1.4 as min value? -
Message-ID: <419B671B.3050901@hanaden.com>



How do people feel about ANTLR 3.0 requiring 1.4 JDK or above?  I want
two things so far:

LinkedHashMap

and

memory mapped I/O

Thoughts?  Perhaps those using 1.3 are doing so for legacy reasons and
therefore are having to use 2.x version of ANTLR anyway.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
===

As a general rule, I recommend to my clients that they should move to a 
version no later than one year after it goes to final release.  Having 
said this, I know of several projects that currently locked into 1.3.x 
and a few at 1.2.x for "interesting" business reasons.

My vote: use 1.4! NIO and memory mapping may do wonders for speed!
as for 1.5 aka 5.0?... maybe fall 2005 if there is any specific feature 
that will add major value to antlr that is.  Supporting production 
products on a two version old jdk sounds like an exception that costs 
for support.







 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From gudnabrsam at yahoo.com  Wed Nov 17 07:33:03 2004
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] java 1.4 as min value?
In-Reply-To: <00E4C2A6-382D-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <20041117153303.61799.qmail@web20427.mail.yahoo.com>


I assume you refer to ANTLR 3.0's Java runtime since
the "Tool" couldn't work without that either, and the
restriction could only matter with regard to the
runtime.  You can ship ANTLR 3.0 with a 1.4-dependent
runtime library, but is there any practical reason why
a user couldn't supply their own backend for
compatibility with earlier Java releases if they
REALLY (, REALLY) needed to?

--- Terence Parr <parrt@cs.usfca.edu> wrote:

> 
> How do people feel about ANTLR 3.0 requiring 1.4 JDK
> or above?  I want 
> two things so far:
> 
> LinkedHashMap
> 
> and
> 
> memory mapped I/O
> 
> Thoughts?  Perhaps those using 1.3 are doing so for
> legacy reasons and 
> therefore are having to use 2.x version of ANTLR
> anyway.
> 
> Ter
> --
> CS Professor & Grad Director, University of San
> Francisco
> Creator, ANTLR Parser Generator,
> http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email
> again!
> 
> 
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
>     antlr-interest-unsubscribe@yahoogroups.com
> 
>  
> 
> 
> 
> 



		
__________________________________ 
Do you Yahoo!? 
The all-new My Yahoo! - Get yours free! 
http://my.yahoo.com 
 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ric.klaren at gmail.com  Wed Nov 17 08:06:53 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] header sections (was: Re: ANTLR for Python)
In-Reply-To: <cnf59e+cvio@eGroups.com>
References: <20041116132234.GA28164@cs.utwente.nl> <cnf59e+cvio@eGroups.com>
Message-ID: <20041117160653.GC19926@cs.utwente.nl>


Hi,

On Wed, Nov 17, 2004 at 09:22:54AM -0000, Marq Kole wrote:
> Thanks for the explanation, I got it working in one go.

Good! :)

> Now that I have had a look at it, I am beginning to wonder: the 
> header section seems to be generic, so not tied to either a lexer, 
> parser or treeparser in particular. 

Think you're right there. Hmmm. I guess you're te first to notice. I never
much needed the sections and always split lexer/parser/treeparser so I've
never run into it myself. Other than a bug in the antlr parser with respect
to them.

> The ANTLR manual as it is did 
> seem to acknowledge that impression. So if I have a file with both a 
> lexer and a parser, a named header section will be added to both 
> generated classes, that is: the same named header. If you do 
> anything else than including headers in such a header section (for 
> instance, defining auxillary classes or functions, or global 
> variables) it will result in duplicated code.

Not pretty indeed. Would require some shoveling around of code to fix. Move
the hashmap with the action tokens from the behavior class to the grammar
subclasses (if I recall right on the last one)

> So would we need to put a warning in the manual sections on Cpp and 
> Python runtime (don't know if C# uses those) that if you use named 
> headers you'd better make separate grammar files for your lexer, 
> parser and treeparser.

Or that...

> Alternatively, we can do some clever processing on the named header 
> files (this is just a proposal). If I want a named 
> section "__init__" - I'm going to the scheme devised for Python now -
>  to be used only for the lexer class, I could provide a 
> name "<LexerClassName>.__init__" for the header. In the case there 
> is also a parser in the file, that would not get the code in this 
> header section. By using the actual name of the class instead of a 
> name "lexer.__init__" it would even be possible to address this 
> issue with 2 lexer definitions in the .g file (if that is at all 
> possible). 

2 lexers in one .g is not possible. Your idea will work I guess although
moving some stuff around might be prettier. Hmm might also need some fixing
in antlr.g.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
              of UCSD Pascal ever released..." --- Larry Smith



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-DDJ4X3AgNx7WNxXdwU5qAJY at yahoogroups.com  Wed Nov 17 08:52:30 2004
From: antlr-interest-accept-DDJ4X3AgNx7WNxXdwU5qAJY at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:35 2004
Subject: MODERATE -- lally.singh@gmail.com posted to antlr-interest
Message-ID: <1100710350.534.18491.m11@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  lally.singh@gmail.com 

The message summary:
--------------------
FROM: lally.singh@gmail.com 
DATE: Wed, 17 Nov 2004 16:51:35 -0000 
SUBJECT: building ASTs for recursive lists 

Hi all, I'm trying to use the OCL grammar to write an 
interpreter. Unfortunately, I'm having trouble converting 
the grammar into an AST builder. I've got clauses like: 

logicalExpression : relationalExpression ( logicalOperator 
relationalExpression )* ; 

Where logicalOperator is relatively simple: logicalOperator 

: "and" | "or" | "xor" | "implies" ; 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=371 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-DDJ4X3AgNx7WNxXdwU5qAJY@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "Lally Singh" <lally.singh@gmail.com>
Subject: building ASTs for recursive lists
Date: Wed, 17 Nov 2004 16:51:35 -0000
Size: 1827
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041117/93f7e344/attachment.mht
From lally.singh at gmail.com  Wed Nov 17 08:51:35 2004
From: lally.singh at gmail.com (Lally Singh)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] building ASTs for recursive lists
Message-ID: <cnfvin+it1o@eGroups.com>




Hi all, I'm trying to use the OCL grammar to write an interpreter. 
Unfortunately, I'm having trouble converting the grammar into an AST
builder.  I've got clauses like:

logicalExpression
  : relationalExpression
    ( logicalOperator relationalExpression )*
  ;

Where logicalOperator is relatively simple:
logicalOperator
  : "and"
  | "or"
  | "xor"
  | "implies"
  ;

Unfortunately, I can't seem to change logicalExpression to what I'd
like:
logicalExpression
  : relationalExpression
    ( logicalOperator^ relationalExpression )*
  ;

To build a proper tree.  Why can't I? Or even better? How can I?

Thanks for your time,

-Lally








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Wed Nov 17 09:30:59 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] java 1.4 as min value?
In-Reply-To: <20041117153303.61799.qmail@web20427.mail.yahoo.com>
References: <20041117153303.61799.qmail@web20427.mail.yahoo.com>
Message-ID: <722F9E26-38BE-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 17, 2004, at 7:33 AM, Matt Benson wrote:

>
> I assume you refer to ANTLR 3.0's Java runtime since
> the "Tool" couldn't work without that either, and the
> restriction could only matter with regard to the
> runtime.  You can ship ANTLR 3.0 with a 1.4-dependent
> runtime library, but is there any practical reason why
> a user couldn't supply their own backend for
> compatibility with earlier Java releases if they
> REALLY (, REALLY) needed to?

Yeah, there's no problem; they can provide their own CharStream and all 
is well.

Though, I just started using LinkedHashMap in the analysis engine; 
believe it or not, I'm dumping my own OrderedHashtable in favor of a 
standard java class!  Wow! ;)  Saves code space, but makes antlr itself 
1.4 dependent.  I do like the 1.3 compatibility thing, but...

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Wed Nov 17 09:36:46 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] tree parsers and stacks
In-Reply-To: <2F5F3013A7F77757D318AA10@[192.168.190.150]>
References: <2F5F3013A7F77757D318AA10@[192.168.190.150]>
Message-ID: <41034E54-38BF-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 15, 2004, at 12:24 PM, John Allen Green wrote:
> I haven't looked into the source, but is there an option in the tree
> parser generator so that the resulting parser keeps a stack of the head
> nodes, as the tree is descended? That would allow you to climb up the
> tree at any point within the tree parser, to find the enclosing
> expression, statement, function, etc. It might save you from some of
> the effort of writing actions in the grammar manually, for keeping
> stacks for scopes and whatnot.
>
> I'm using the tree parser for analysis, but not transforms, so I just
> use an AST with additional "back" and "up" links. So... I don't really
> need it, I'm just curious.  :)

Hi John,

You could add the UP pointer yourself in a subclass and then change the 
ast factory to set the up pointer maybe.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From bharath.sundararaman at starthis.com  Wed Nov 17 09:32:49 2004
From: bharath.sundararaman at starthis.com (Bharath Sundararaman)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] AST, value manipulation.
Message-ID: <B1180416E5C44E49AE556D23DBB45B29060E18@webmail.starthis.com>


Hi Antlers,

I generated an AST from my parser and I am extending TreeParser to
perform type checking. How are the values of the variables
stored/retrieved? For example, let's say I have a declaration of the
form:

VAR
v: INT := 2;
a: ARRAY[1..10] OF INT;
END_VAR

And I have a statement 

a[v] := 200;

In my type checking code, I can ensure that the type of variable "v" is
INT, because I store the (name,type) of variable "v" in the symbol
table. But, I also want to check if index "v" is within bounds, which
means I need to retrieve the value of "v" and make sure it does not
exceed the range 1..10 

How is the value of "v" stored? Should I store it in the symbol table or
should I fetch it from the AST node, where it was originally declared? 

Thanks!

Bharath.

-----Original Message-----
From: Terence Parr [mailto:parrt@cs.usfca.edu] 
Sent: Wednesday, November 17, 2004 11:37 AM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] tree parsers and stacks



On Nov 15, 2004, at 12:24 PM, John Allen Green wrote:
> I haven't looked into the source, but is there an option in the tree
> parser generator so that the resulting parser keeps a stack of the
head
> nodes, as the tree is descended? That would allow you to climb up the
> tree at any point within the tree parser, to find the enclosing
> expression, statement, function, etc. It might save you from some of
> the effort of writing actions in the grammar manually, for keeping
> stacks for scopes and whatnot.
>
> I'm using the tree parser for analysis, but not transforms, so I just
> use an AST with additional "back" and "up" links. So... I don't really
> need it, I'm just curious.  :)

Hi John,

You could add the UP pointer yourself in a subclass and then change the 
ast factory to set the up pointer maybe.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links



 





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Wed Nov 17 09:38:49 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] Re: ANTLR for Python
In-Reply-To: <cnbagj+8vaa@eGroups.com>
References: <cnbagj+8vaa@eGroups.com>
Message-ID: <8A77DCF9-38BF-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 15, 2004, at 2:27 PM, Marq Kole wrote:
>>
>> Well, I normally just add any action before the grammar rules to
> the
>> output class, which can include
>>
>> {
>> .... __init__ ...
>> }
>>
>> Then you don't need to mess with the header thing.
>
> Ter,
>
> Errr, that's just fine, except that the __init__() method for the
> parser class is already defined in the Python code generator, as it
> is required to perform initialization when constructing a new
> instance in Python. Also, Python does not support overloading, so I
> can only have one __init__() method. So I'm afraid your suggestion
> wouldn't fly.

Oh, so that's the problem.  Hmm...yeah that is a tough one.  I'm 
thinking of being more formal in ANTLR 3.0.  For example, we could have 
a generic "init" section that gets copied to the appropriate 
constructor(s).

> Of course, there are alternatives: I can define empty __preinit__()
> and __postinit__() methods in the base parsers (LLkParser class) in
> the Python runtime, that are called from the __init__() method in
> that base parser.
> This LLkParser.__init__() method is actually called from the
> generated parser, so when I override the __preinit__() and
> __postinit__() methods in the actions outside the grammar rules the
> initialization is augmented in the required way.
>
> Problem: this approach is not portable to inherited parsers, as
> there is no requirement in Python that the superclass initializer is
> called when initializing an instance of a subclass. Also, the built-
> in super() function does not normally do what you think it would do;
> it can be very misleading and unreliable.

Hmm...yeah, I don't know python well enough to help :(

> Therefore my request for how to make specific headers:
> - header "init" { } is needed, but I do not actually need separate
>   preinit and postinit, I guess. Otherwise it would be:

The C++ parser uses

header "foo" {...}

I know so the infrastructure is there for sure.

> - header "preinit" { } and
> - header "postinit" { }
> - header { } is necessary as well, but that's already available.
> - header "post" { } would be needed to add any code after the
>   generated parser/lexer/treeparser class, for instance for self
>   testing.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Wed Nov 17 09:53:19 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] LL(*) and PackRat
In-Reply-To: <cne0bn+q78r@eGroups.com>
References: <cne0bn+q78r@eGroups.com>
Message-ID: <912A06CC-38C1-11D9-A398-000A95891192@cs.usfca.edu>


On Nov 16, 2004, at 2:52 PM, Jason Aaron Osgood wrote:
> Hi Terence Parr-

Hi Jason :)

> It's exciting to see ANTLR still on the move.

Thanks for keeping track.  Long time no see :)

> I just read your ANTLR 2004 slides for LL(*) parsing.  I'm still
> nursing the dream of learning enough about parsing to adapt the
> interactive parsing algorithms from Harmonia (Tim Wagner et al) to
> ANTLR.  (Phil Cook et al from UQ has some followup work.)

:)

> While digging around, I learned about Bryan Ford's Packrat Parsing
> algorithm.  (There's a part to Java called Rats!  Very droll.)

Yeah, Bryan is one smart dude.  His packrat thing is cool.  His PEG 
(parser expr. grammars) have a nice new variant of a syn pred too.

> Is there a comparison of LL(*) and Packrat parsing?

Sriram Srinivasan compared the two for me in terms of speed.  Naturally 
memoizing is pretty slow, but boy is it powerful.  I'm pretty sure it's 
full context-free; you can get the ambiguous derivations too.  That is 
from memory.  A quick check of the paper would correct me I'm sure.

Anyway, LL(*) is essentially an automatic backtracking mechanism 
similar in principle to all of the recent increases in parsing power 
from the other camps.  We are starting to trade some speed for power 
now that machines kick butt! ;)  LL(*) degenerates to LL(k) for a fixed 
k if your grammar is LL(k).  If it is not LL(k), it searches further 
ahead to find tokens that will help it make choices.  I'm 99% sure it 
will be able to do some grammars LR(k) cannot, but LR will still be 
able to handle grammars LL(*) cannot such as left recursive grammars.  
So no strict ordering.  Anyhoo, you can look at the slides of my 
ANTLR2004 talk for more.

> I like how both are trying to simplify the development of grammars.  I
> have a small head and really struggled to get some of my language
> ideas working with ANTLR.  I ended up modifying my language to make
> the implementation easier.  Not necessarily bad.  I just was trying to
> solve a problem.

Yeah, this should make building grammars MUCH easier for everybody.

> Since Packrat memoizes all the tokens, the heap usage can get pretty
> big.  I have the impression that LL(*) won't have that characteristic.

Yeah, it can be an order of magnitude slower according to Sriram, 
though still it's impressive as hell.

> One other thing: Googing for "LL(*)" will be somewhat problematic.
> Perhaps a synonym is in order?  No one should repeat Microsoft's
> mistake with "C#".

Yes, I've AGONIZED over this.  LL(*) is super cool, but the * means 
something in most search engines.  I note that C# returns 9 million 
results so it's probably ok, but LL(*) is less "findable".  LL(*) 
brings up LL Bean catalog.  "LL(*) parsing" brings up LL(k) etc... as 
you'd expect. :(  LL(\*) does not fix it.  I've been leaving variants 
of LL(*) on the web such as LL(star) and LL-star.  Google finds 
LL(star) actually.  4th item is my LL(*) lecture.  "LL(star) parsing" 
puts it first.  Putting actual quotes around "LL(star) parsing" gets 
you 2 pages, both are mine.  I note it does not find my "blog" entries 
on LL(*) parsing however.

Hmm...I'm leaning towards LL(star), but boy it's tough to get a unique 
symbol given the LL term.  I deliberately left off the E in "antler" to 
make ANTLR for uniqueness.  Foresight, eh?  That was back in the late 
80's ;)

Anybody have another name or "spelling"?  I'd like LL in there, but 
that's the problem term!  By the way, people thought of the basic idea 
back in the 70's calling it LL-regular, but that is actually totally 
different.  When I search for LL-regular it actually picks up my blog 
entry.  Damn!

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Wed Nov 17 09:59:16 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] How to copy/reference hidden tokens in transformations
In-Reply-To: <20041117142848.30832.qmail@web25209.mail.ukl.yahoo.com>
References: <20041117142848.30832.qmail@web25209.mail.ukl.yahoo.com>
Message-ID: <65DED3F9-38C2-11D9-A398-000A95891192@cs.usfca.edu>


Awesome.  Fixed in main line code.
Ter
On Nov 17, 2004, at 6:28 AM, dsfsdf fdsfdsf wrote:

> hi ter
> Did that suggestion and it worked.
> ?
> public void initialize(AST t)
> {??hiddenBefore = ((CommonASTWithHiddenTokens)t).getHiddenBefore();
> ???hiddenAfter = ((CommonASTWithHiddenTokens)t).getHiddenAfter();
> ???super.initialize(t)?
> }
> ?
> Both hiddenBefore and hiddenAfter must be cast to type 
> CommonASTWithHiddenTokens to allow access to the methods 
> getHiddenAfter() and getHiddenBefore()
> And replace CommonASTWithHiddenTokens objects?with?your new class in 
> your parser class.
> thanks for all the help.
> ed.?
> ?
>
> Terence Parr <parrt@cs.usfca.edu> wrote:
>
>
> On Nov 16, 2004, at 8:53 AM, dsfsdf fdsfdsf wrote:
>
> > When i am creating a new tree from my source tree that has some 
> hidden
>  > tokens, how do i copy these hidden across?
> > At the moment it is not doing it automatically.
> > thanks
>
> Hi Ed. Can't remember so I did a test.
>
> Here is a grammar:
>
> class TP extends TreeParser;
>
> options {
> buildAST=true;
> }
>
> a : ID ;
>
> It generates relevant code:
>
> tmp1_AST = astFactory.create((AST)_t);
> tmp1_AST_in = (AST)_t;
> astFactory.addASTChild(currentAST, tmp1_AST);
> match(_t,ID);
>
> So I looked at:
>
> /** Create a new empty AST node; if the user did not specify
> * an AST node type, then create a default one: CommonAST.
> */
> public AST create(AST tr) {
> if (tr == null) return null; // create(null) == null
> AST t = create(tr.getType());
> if ( t !=null )  {
> t.initialize(tr);
> }
> return t;
> }
>
> which invokes CommonASTWithHiddenTokens.initialize(AST) but that is
> inherited from CommonAST:
>
> public void initialize(AST t) {
> setText(t.getText());
> setType(t.getType());
> }
>
> Hmm...seems like that should be override just like I do for Token arg:
>
> public void initialize(Token tok) {
> CommonHiddenStreamToken t = (CommonHiddenStreamToken)tok;
> super.initialize(t);
> hiddenBefore = t.getHiddenBefore();
> hiddenAfter = t.getHiddenAfter();
> }
>
> Seems I forgot to do this. Ok, I suggest subclassing
>  CommonASTWithHiddenTokens and overriding to be something like:
>
> public void initialize(AST t) {
> hiddenBefore = t.getHiddenBefore();
> hiddenAfter = t.getHiddenAfter();
> super.initialize(t);
> }
>
> Let me know if that works and I'll put it in ;)
>
> Don't forget to use the new subclass when you set the AST type etc...
>  in the parser/tree parser.
>
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>
>
> Win a castle for NYE with your mates and Yahoo! Messenger
>
> Yahoo! Groups Links
>
> 	? 	To visit your group on the web, go to:
> http://groups.yahoo.com/group/antlr-interest/
> ?
> 	? 	 To unsubscribe from this group, send an email to:
> antlr-interest-unsubscribe@yahoogroups.com
> ?
> 	? 	 Your use of Yahoo! Groups is subject to the Yahoo! Terms of 
> Service.
>
>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From doublemalam at yahoo.co.uk  Wed Nov 17 10:08:05 2004
From: doublemalam at yahoo.co.uk (Muhammad Masoom Alam)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] Re: one question regarding tree walking plz help
In-Reply-To: <cnfnos+s2di@eGroups.com>
Message-ID: <20041117180805.27629.qmail@web86901.mail.ukl.yahoo.com>

really thanks man 
 
u really helped me to out of this situation , The problem is resloved but still i after the parsing of the tree , i get the excetpion that
 

var int a,b,c;real d,e;

s

( TYPENAME int a b c ) ( TYPENAME real d e )

The NAME of the Auxilary variable is :a

The type of the Auxilary variable is :int

The NAME of the Auxilary variable is :b

The type of the Auxilary variable is :int

The NAME of the Auxilary variable is :c

The type of the Auxilary variable is :int

The NAME of the Auxilary variable is :d

The type of the Auxilary variable is :real

The NAME of the Auxilary variable is :e

The type of the Auxilary variable is :real

<AST>:0:0: unexpected AST node: int

<AST>:0:0: unexpected AST node: real
i dont know why these two exceptions occur, 
 
but any way Thanks again.
with Best regards.
Muhammad.

kozchris <csnyder@alumni.ncsu.edu> wrote:


i think your problem is that your code block is in the wrong place. 

try this:
variable_definition 
: #(TYPENAME t:typeName (i:IDENT { 

System.out.println("The NAME of the Auxilary variable is : +i.getText());

System.out.println("The type of the Auxilary variable is : +t.getText());

}
)+ 
) ;

that should run for each IDENT.
What you had ran for the entire rule. E.G. once.

Chris





--- In antlr-interest@yahoogroups.com, Muhammad Masoom Alam
wrote:
> Dear all.
> 
> i will be more specific in this email to my problem
> i will state my problem in the following points.
> I have a small language for which i want to do syntax and sematic
checking. 
> 
> As for as syntax checking is concerned , i am able to do it with
Parser and Lexer of ANTLR and that is no problem 
> but when it comes to semantic checking, where i need to build a
tree and then later on parse the tree(i.e. extract tree node values ,
so that i can check according to my logic and to have some fruit ful
results , my work fails) and so far , i have no help regarding this
over the internet.
> suppose i have a rule in my Parser file i.e.
> startrule
> : ( VAR! (variable_definition SEMI! )+)?
> ;
> 
> variable_definition : typeName ( IDENT (COMMA)? )+
{#variable_definition = #([TYPENAME,"TYPENAME"],#variable_definition);} 
> 
> ; 
> ;
> now rule state that 
> if i have an expression var int i,j,k; real a,b,c;
> 
> it should make TYPENAME as root and int , i , j , k as childs.
> similarly TYPENAME as root and real a,b,c as childs.
> 
> that is done becaz when i print the tree , it gives me the results
like this 
> 
> ( TYPENAME int I , j ,k ) ( TYPENAME real a , b, c )
> 
> The problem is that i cant read the tree in the Treewalker section 
> 
> if i specify a rule in tree walking section like this
> 
> variable_definition
> 
> : #(TYPENAME t:typeName (i:IDENT)+ )
> 
> { 
> 
> System.out.println("The NAME of the Auxilary variable is :
"+i.getText());
> 
> System.out.println("The type of the Auxilary variable is :
"+t.getText());
> 
> }
> 
> it does give me just first child and next sibling but not more. how
i can take infinite sibling nodes 
> 
> I am enclosing the JAVA file and grammar file and if you give the
input as follow
> 
> var int I,j,k;real a,b,c;
> 
> you will see a tree and other results.
> 
> whether i am wrong in the tree construction , or i am doing some
other error.
> 
> I will be very thankful to you for your kind time .
> 
> with Best Regards.
> 
> Muhammad.
> 
> 
> 
> 
> 
> ---------------------------------
> Moving house? Beach bar in Thailand? New Wardrobe? Win ?10k with
Yahoo! Mail to make your dream a reality.






Yahoo! Groups Links









		
---------------------------------
 ALL-NEW Yahoo! Messenger - all new features - even more fun!  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041117/b4538fcc/attachment.html
From eddie_antlr at yahoo.co.uk  Wed Nov 17 11:01:05 2004
From: eddie_antlr at yahoo.co.uk (dsfsdf fdsfdsf)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] How to copy/reference hidden tokens in transformations
In-Reply-To: <65DED3F9-38C2-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <20041117190105.14902.qmail@web25202.mail.ukl.yahoo.com>

hi ter
There may be one other glitch,
I have a file ASTPass1 which transforms one of my trees,
However antlr does not generate this tree with the comments.
I have gone through the generated ASTPass1.java file and 
have found that the root of this problem lies within the 
ASTFactory method >
 
public AST make(AST[] nodes)
 
This is a sample of my ASTPass1 file
 
ASTArray ASTarray = (new ASTArray(5)).add(tmp1_AST).add(s_AST).add(into_tree).add(f_AST).add(w_AST);
  
  Parser.treeWalker(((CommonASTWithHiddenTokens2)ASTarray.array[3]));

  select_AST=(CommonASTWithHiddenTokens2)astFactory.make(ASTarray); 
  Parser.treeWalker((CommonASTWithHiddenTokens2)select_AST);
 
I do a tree walk before the ASTFactory.make method gets called and here i input the AST that has the hidden token and it correctly outputs the hidden token.
However when i do a tree walk after the make() methos gets called
the hidden token doesn't get printed out.
I have debugged through the ASTFactory.make method and i can see that the AST that is supposed to hold the token does exist and the hidden token exists.
Maybe its worth noting that the AST that has the hidden token has a firstChild of a normal token which in turn is linked to the hidden token.
 
Does the ASTFactory class need to be overidden maybe?
 
thanks
ed.


Terence Parr <parrt@cs.usfca.edu> wrote:

Awesome. Fixed in main line code.
Ter
On Nov 17, 2004, at 6:28 AM, dsfsdf fdsfdsf wrote:

> hi ter
> Did that suggestion and it worked.
>  
> public void initialize(AST t)
> {  hiddenBefore = ((CommonASTWithHiddenTokens)t).getHiddenBefore();
>    hiddenAfter = ((CommonASTWithHiddenTokens)t).getHiddenAfter();
>    super.initialize(t) 
> }
>  
> Both hiddenBefore and hiddenAfter must be cast to type 
> CommonASTWithHiddenTokens to allow access to the methods 
> getHiddenAfter() and getHiddenBefore()
> And replace CommonASTWithHiddenTokens objects with your new class in 
> your parser class.
> thanks for all the help.
> ed. 
>  
>
> Terence Parr 
wrote:
>
>
> On Nov 16, 2004, at 8:53 AM, dsfsdf fdsfdsf wrote:
>
> > When i am creating a new tree from my source tree that has some 
> hidden
> > tokens, how do i copy these hidden across?
> > At the moment it is not doing it automatically.
> > thanks
>
> Hi Ed. Can't remember so I did a test.
>
> Here is a grammar:
>
> class TP extends TreeParser;
>
> options {
> buildAST=true;
> }
>
> a : ID ;
>
> It generates relevant code:
>
> tmp1_AST = astFactory.create((AST)_t);
> tmp1_AST_in = (AST)_t;
> astFactory.addASTChild(currentAST, tmp1_AST);
> match(_t,ID);
>
> So I looked at:
>
> /** Create a new empty AST node; if the user did not specify
> * an AST node type, then create a default one: CommonAST.
> */
> public AST create(AST tr) {
> if (tr == null) return null; // create(null) == null
> AST t = create(tr.getType());
> if ( t !=null ) {
> t.initialize(tr);
> }
> return t;
> }
>
> which invokes CommonASTWithHiddenTokens.initialize(AST) but that is
> inherited from CommonAST:
>
> public void initialize(AST t) {
> setText(t.getText());
> setType(t.getType());
> }
>
> Hmm...seems like that should be override just like I do for Token arg:
>
> public void initialize(Token tok) {
> CommonHiddenStreamToken t = (CommonHiddenStreamToken)tok;
> super.initialize(t);
> hiddenBefore = t.getHiddenBefore();
> hiddenAfter = t.getHiddenAfter();
> }
>
> Seems I forgot to do this. Ok, I suggest subclassing
> CommonASTWithHiddenTokens and overriding to be something like:
>
> public void initialize(AST t) {
> hiddenBefore = t.getHiddenBefore();
> hiddenAfter = t.getHiddenAfter();
> super.initialize(t);
> }
>
> Let me know if that works and I'll put it in ;)
>
> Don't forget to use the new subclass when you set the AST type etc...
> in the parser/tree parser.
>
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>
>
> Win a castle for NYE with your mates and Yahoo! Messenger
>
> Yahoo! Groups Links
>
> ? To visit your group on the web, go to:
> http://groups.yahoo.com/group/antlr-interest/
>  
> ? To unsubscribe from this group, send an email to:
> antlr-interest-unsubscribe@yahoogroups.com
>  
> ? Your use of Yahoo! Groups is subject to the Yahoo! Terms of 
> Service.
>
>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!






Yahoo! Groups Links








		
---------------------------------
Win a castle  for NYE with your mates and Yahoo! Messenger 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041117/59e17ad7/attachment.html
From parrt at cs.usfca.edu  Wed Nov 17 11:37:05 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] Java memory mapped IO is slow for big files :(
Message-ID: <0FE5C5C6-38D0-11D9-A398-000A95891192@cs.usfca.edu>


Howdy,

In typical fashion, your expectations are not always met with java 
libraries.  I'm using jdk 1.4.2 on my os x box.  I expected that memory 
mapping a big file would be very fast, but it appears that reading it a 
chunk of a time is MUCH  faster (even using ANTLR 2):

Reading a 44M file 1 time:

2m15s memory mapped IO
1m05s ANTLR 2 small buffer
2m12s ANTLR 3 with char[size-of-file]

So reading into a small buffer (BufferedReader) wins easily over making 
a huge buffer.

Now reading a small 44 line (1173 byte) file 500 times:

0.69s memory mapped IO
2.35s ANTLR 2 small buffer
0.76s ANTLR 3 with char[size-of-file]

It seems that mmap io has a small advantage over char[] for small 
files.  The advantage over ANTLR 2 is due to the big overhead in ANTLR 
2 not the reading into a small buffer issue (the small buffer still 
holds the whole file probably).

BTW, both mmap and char[] take lots of memory to run.  2 bytes per char 
and you're up to 88M to hold the buffer ;)

Hmm... 1.4 NIO doesn't seem worth the effort.  char[] is fast enough 
until you get a big file and then reading a buffer at a time is faster. 
  Reading a small buffer at a time is fast IO-wise, but the CharStream 
interface must still be able to yield chars at random locations for 
getting token text.  People might have to subclass Token to store the 
actual string if they are parsing 50M files.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From marq.kole at philips.com  Wed Nov 17 13:27:37 2004
From: marq.kole at philips.com (Marq Kole)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] header sections (was: Re: ANTLR for Python)
In-Reply-To: <20041117160653.GC19926@cs.utwente.nl>
Message-ID: <cngfo9+moih@eGroups.com>



--- In antlr-interest@yahoogroups.com, Ric Klaren <ric.klaren@g...> 
wrote:
> > Now that I have had a look at it, I am beginning to wonder: the 
> > header section seems to be generic, so not tied to either a 
lexer, 
> > parser or treeparser in particular. 
> 
> Think you're right there. Hmmm. I guess you're te first to notice. 
I never
> much needed the sections and always split lexer/parser/treeparser 
so I've
> never run into it myself. Other than a bug in the antlr parser 
with respect
> to them.
>

<SNIP>

> > Alternatively, we can do some clever processing on the named 
header 
> > files (this is just a proposal). If I want a named 
> > section "__init__" - I'm going to the scheme devised for Python 
now -
> >  to be used only for the lexer class, I could provide a 
> > name "<LexerClassName>.__init__" for the header. In the case 
there 
> > is also a parser in the file, that would not get the code in 
this 
> > header section. By using the actual name of the class instead of 
a 
> > name "lexer.__init__" it would even be possible to address this 
> > issue with 2 lexer definitions in the .g file (if that is at all 
> > possible). 
> 
> 2 lexers in one .g is not possible. Your idea will work I guess 
although
> moving some stuff around might be prettier. Hmm might also need 
some fixing
> in antlr.g.

Ric,

Moving things around in the .g files is going to be hard if you do 
not want to break existing code. Maybe that is something to consider 
when doing ANTLR 3.

In the meanwhile, the scheme using named headers that refer to the 
classname works beautifully. I now have an implementation in the 
Python code generator that can handle

header "InstrTreeParser.__init__" {
    // do some treewalker stuff
}

Having defined earlier:

    private static final String initHeaderAction = "__init__";

The simple solution is by replacing the code:

    printHeaderAction(initHeaderAction);

by:

    printHeaderAction(initHeaderAction);
    printHeaderAction(grammar.getClassName() + "." +
                      initHeaderAction);

So in case there is just one grammar per file, you can use 
the "__init__" header, if you have both Lexer and Parser (and/or 
TreeParser) you can use the class-specific "__init__" header. You 
can even use both to provide both shared and specific initialization 
code.

This can be readily translated to any of the code generators for the 
other languages.

Regards,
Marq






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Wed Nov 17 14:22:19 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] Re: Java memory mapped IO is slow for big files :(
In-Reply-To: <0FE5C5C6-38D0-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <cngiur+3lpb@eGroups.com>



--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> Howdy,
> 
> In typical fashion, your expectations are not always met with java 
> libraries.  I'm using jdk 1.4.2 on my os x box.  I expected that memory 
> mapping a big file would be very fast, but it appears that reading it a 
> chunk of a time is MUCH  faster (even using ANTLR 2):
> 
> Reading a 44M file 1 time:
> 
> 2m15s memory mapped IO
> 1m05s ANTLR 2 small buffer
> 2m12s ANTLR 3 with char[size-of-file]
> 
> So reading into a small buffer (BufferedReader) wins easily over making 
> a huge buffer.
> 
> Now reading a small 44 line (1173 byte) file 500 times:
> 
> 0.69s memory mapped IO
> 2.35s ANTLR 2 small buffer
> 0.76s ANTLR 3 with char[size-of-file]
> 

Ter--

Given the normal variations in timing, it looks like memory-mapped I/O
and char[file] are almost identical.  That is reasonable--they should
be pretty close, and the figures look right:  for the large file,
reading the entire file will be slightly faster than paging the
mmapped file, but for the large file, mmap will page in 4K while the
char[size-of-file] will do two separate accesses.  What do you bet
that the difference between those and the buffered read() is bounds
checking?  Try access via StringReader, StringIterator, and
ByteArrayInputStream--any one (or all) of those might have a more
efficient implementation that minimizes the bounds checks.

--Loring





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Wed Nov 17 16:01:57 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] Re: Java memory mapped IO is slow for big files :(
In-Reply-To: <cngiur+3lpb@eGroups.com>
References: <cngiur+3lpb@eGroups.com>
Message-ID: <1081E271-38F5-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 17, 2004, at 2:22 PM, lgcraymer wrote:
> Ter--
>
> Given the normal variations in timing, it looks like memory-mapped I/O
> and char[file] are almost identical.

Almost...mmap has a slight advantage; I can crank up n very large and 
still see it (for small files).

>   That is reasonable--they should
> be pretty close, and the figures look right:  for the large file,
> reading the entire file will be slightly faster than paging the
> mmapped file, but for the large file, mmap will page in 4K while the
> char[size-of-file] will do two separate accesses.

What do mean by two accesses?

>   What do you bet
> that the difference between those and the buffered read() is bounds
> checking?

both have to check an array though right?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Wed Nov 17 16:10:50 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] Java memory mapped IO is slow for big files :(
In-Reply-To: <0FE5C5C6-38D0-11D9-A398-000A95891192@cs.usfca.edu>
References: <0FE5C5C6-38D0-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <16795.59530.47466.598941@despot.non.net>


>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
[...]

> In typical fashion, your expectations are not always met with java
> libraries.  I'm using jdk 1.4.2 on my os x box.

Well, that's part of the problem.  Apple hasn't been the best at making
their port of the JDK great.  Also, are you completely up to date with the
Java version?  Early versions had lots of bugs.  I.e., I'd be careful about
extrapolating generally from those numbers without actually verifying the
numbers on at least MS Windows and Linux.

Also, are you testing this on your laptop?  The disks on the Apple laptops
suck ass in terms of speed.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ric.klaren at gmail.com  Wed Nov 17 16:18:48 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] header sections (was: Re: ANTLR for Python)
In-Reply-To: <cngfo9+moih@eGroups.com>
References: <20041117160653.GC19926@cs.utwente.nl> <cngfo9+moih@eGroups.com>
Message-ID: <bc607a4e0411171618525cd028@mail.gmail.com>


Hi,

On Wed, 17 Nov 2004 21:27:37 -0000, Marq Kole <marq.kole@philips.com> wrote:
> > 2 lexers in one .g is not possible. Your idea will work I guess
> although
> > moving some stuff around might be prettier. Hmm might also need
> some fixing
> > in antlr.g.
> 
> Moving things around in the .g files is going to be hard if you do
> not want to break existing code. Maybe that is something to consider
> when doing ANTLR 3.

It is probably possible to move the headersections into the classDef
rule that way there could be header sections for each
lexer/parser/treeparser in a rule. I think it would be mostly
backwards compatible. The normal header section (without name) should
probably be treated in the old way and the rest on per
lexer/parser/treeparser basis.

Since noone ran into this before I guess it's just as good to mark it
in the docs. Your workaround doesn't look bad. Although I could expect
some minor problems if you also implemented the namespace options in
python (erm do those exist in python?).

It's definitely something that should be done right in antlr3.
(they're not implemented yet there I think)

Cheers,

Ric


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Wed Nov 17 16:31:55 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] Re: Java memory mapped IO is slow for big files :(
In-Reply-To: <16795.59530.47466.598941@despot.non.net>
Message-ID: <cngqhr+ulul@eGroups.com>



--- In antlr-interest@yahoogroups.com, "John D. Mitchell"
<johnm-antlr@n...> wrote:
> >>>>> "Terence" == Terence Parr <parrt@c...> writes:
> [...]
> 
> > In typical fashion, your expectations are not always met with java
> > libraries.  I'm using jdk 1.4.2 on my os x box.
> 
> Well, that's part of the problem.  Apple hasn't been the best at making
> their port of the JDK great.  Also, are you completely up to date
with the
> Java version?  Early versions had lots of bugs.  I.e., I'd be
careful about
> extrapolating generally from those numbers without actually
verifying the
> numbers on at least MS Windows and Linux.
> 
> Also, are you testing this on your laptop?  The disks on the Apple
laptops
> suck ass in terms of speed.

John--

If you take a closer look at Ter's data, it looks like the conclusion
is that
a = c[n] // c is a character array
is noticeably slower than
a = X.read().

That might be due to bounds checking, array indexing, and/or something
else; it's not a disk issue because the three tests are more-or-less
equivalent in terms of disk usage.

--Loring

> Take care,
> 	John





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Wed Nov 17 17:06:26 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] header sections (was: Re: ANTLR for Python)
In-Reply-To: <bc607a4e0411171618525cd028@mail.gmail.com>
Message-ID: <cngsii+mliq@eGroups.com>



The "header" section dates back to the earliest versions of PCCTS that
I worked with.  There it was a place to put "C" includes, not for
actionable code.  That model works for Java, C++, and C# as well.

For Marq's problem, I think that it would be better to have an
optional "init" section in addition to any header section(s).  That
would fit other languages with module initialization code (if I
remember right, OCaml needs something like that).  The big advantage
would be to keep the declaration semantics of the "header" separate
from the executable semantics of initialization.

--Loring


--- In antlr-interest@yahoogroups.com, Ric Klaren <ric.klaren@g...> wrote:
> Hi,
> 
> On Wed, 17 Nov 2004 21:27:37 -0000, Marq Kole <marq.kole@p...> wrote:
> > > 2 lexers in one .g is not possible. Your idea will work I guess
> > although
> > > moving some stuff around might be prettier. Hmm might also need
> > some fixing
> > > in antlr.g.
> > 
> > Moving things around in the .g files is going to be hard if you do
> > not want to break existing code. Maybe that is something to consider
> > when doing ANTLR 3.
> 
> It is probably possible to move the headersections into the classDef
> rule that way there could be header sections for each
> lexer/parser/treeparser in a rule. I think it would be mostly
> backwards compatible. The normal header section (without name) should
> probably be treated in the old way and the rest on per
> lexer/parser/treeparser basis.
> 
> Since noone ran into this before I guess it's just as good to mark it
> in the docs. Your workaround doesn't look bad. Although I could expect
> some minor problems if you also implemented the namespace options in
> python (erm do those exist in python?).
> 
> It's definitely something that should be done right in antlr3.
> (they're not implemented yet there I think)
> 
> Cheers,
> 
> Ric





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-fGggbWkqDOyqk5f_gQTBRJ4 at yahoogroups.com  Wed Nov 17 18:31:27 2004
From: antlr-interest-accept-fGggbWkqDOyqk5f_gQTBRJ4 at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:35 2004
Subject: MODERATE -- teddemc@yahoo.com posted to antlr-interest
Message-ID: <1100745087.472.89543.m25@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  teddemc@yahoo.com 

The message summary:
--------------------
FROM: teddemc@yahoo.com 
DATE: Thu, 18 Nov 2004 02:31:09 -0000 
SUBJECT: What do I set CLASSPATH to?? 

I used Gentoo to install antlr, but what do I need to set 
CLASSPATH to in order to compile using javac?? I get this 
error: 

Main.java:2: package antlr does not exist 

Sorry.. Don't know where else to turn for help.. I've been 
looking all over the web. 

Matthew 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=372 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-fGggbWkqDOyqk5f_gQTBRJ4@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "teddemc" <teddemc@yahoo.com>
Subject: What do I set CLASSPATH to??
Date: Thu, 18 Nov 2004 02:31:09 -0000
Size: 1437
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041118/8a8744b7/attachment.mht
From teddemc at yahoo.com  Wed Nov 17 18:31:09 2004
From: teddemc at yahoo.com (teddemc)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] What do I set CLASSPATH to??
Message-ID: <cnh1hd+j6ch@eGroups.com>




 
I used Gentoo to install antlr, but what do I need to set CLASSPATH 
to in order to compile using javac??  I get this error: 
 
Main.java:2: package antlr does not exist 
 
Sorry.. Don't know where else to turn for help.. I've been looking 
all over the web. 
 
Matthew 








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Wed Nov 17 18:48:12 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] What do I set CLASSPATH to??
In-Reply-To: <cnh1hd+j6ch@eGroups.com>
References: <cnh1hd+j6ch@eGroups.com>
Message-ID: <49C10375-390C-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 17, 2004, at 6:31 PM, teddemc wrote:
> I used Gentoo to install antlr, but what do I need to set CLASSPATH
> to in order to compile using javac??  I get this error:
>
> Main.java:2: package antlr does not exist
>
> Sorry.. Don't know where else to turn for help.. I've been looking
> all over the web.

Howdy...find antlr.jar and put it in the classpath...it must have been 
put somewhere.  UNIX "find" will find it if nothing else ;)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Wed Nov 17 18:58:41 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] Re: Java memory mapped IO is slow for big files :(
In-Reply-To: <cngqhr+ulul@eGroups.com>
References: <16795.59530.47466.598941@despot.non.net>
	<cngqhr+ulul@eGroups.com>
Message-ID: <16796.4065.38168.39206@despot.non.net>


>>>>> "lgcraymer" == lgcraymer  <lgc@mail1.jpl.nasa.gov> writes:
>>>>>>> "Terence" == Terence Parr <parrt@c...> writes:
[...]

> If you take a closer look at Ter's data, it looks like the conclusion is
> that a = c[n] // c is a character array is noticeably slower than a =
> X.read().

> That might be due to bounds checking, array indexing, and/or something
> else; it's not a disk issue because the three tests are more-or-less
> equivalent in terms of disk usage.

I'm not clear on that because it's unclear from Ter's message exactly what
he was (really :-) doing.  Perhaps he can put his test programs up so we
can check them out.

For example, allocating a huge array (and zeroing it), filling it, and then
iterating through it (and keeping the data around) is a bit different than
just BufferedReader'ing your way through a file and throwing away the data.

Thanks,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From mail at martin-probst.com  Thu Nov 18 00:09:11 2004
From: mail at martin-probst.com (Martin Probst)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] What do I set CLASSPATH to??
In-Reply-To: <cnh1hd+j6ch@eGroups.com>
References: <cnh1hd+j6ch@eGroups.com>
Message-ID: <1100765351.9513.2.camel@narr.homeip.net>


Hi,
it should be either in /usr/share/antlr/lib/antlr.jar or
in /usr/share/antlr-2.7.x/antlr.jar. I had a special problem on gentoo
also, while they create some kind of an executable called "antlr" this
is overridden if PCCTS gets intalled. This might cause you trouble if
you try to start ANTLR directly with "antlr" - running the jar should be
fine.

mfg
Martin

Am Donnerstag, den 18.11.2004, 02:31 +0000 schrieb teddemc:
> 
> 
>  
> I used Gentoo to install antlr, but what do I need to set CLASSPATH 
> to in order to compile using javac??  I get this error: 
>  
> Main.java:2: package antlr does not exist 
>  
> Sorry.. Don't know where else to turn for help.. I've been looking 
> all over the web. 
>  
> Matthew 
> 
> 
> 
> 
> 
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
> 
>  
> 
> 
> 
> 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From H.A.M.Maassen at student.tue.nl  Thu Nov 18 01:04:36 2004
From: H.A.M.Maassen at student.tue.nl (Maassen, H.A.M.)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] building ASTs for recursive lists
Message-ID: <1C5C690C06EFE244B83E3F133CA70BDE28585C@studentex6.campus.tue.nl>

" Unfortunately, I can't seem to change logicalExpression to what I'd
like:

logicalExpression
  : relationalExpression
    ( logicalOperator^ relationalExpression )*
  ;

To build a proper tree.  Why can't I? Or even better? How can I? "

 
Here's how I did my expressions:

logicalExpression:!
  e1:relationalExpression  (o:logicalOperator e2:logicalExpression)?
  { #logicalExpression = #(#o, #e1, #e2); }
;
 
Getting my grammar to build decent trees has uglied it up quite a bit :(
 
Regards, Harald Maassen


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 4126 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041118/e528699e/attachment.bin
From H.A.M.Maassen at student.tue.nl  Thu Nov 18 01:10:23 2004
From: H.A.M.Maassen at student.tue.nl (Maassen, H.A.M.)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] AST, value manipulation.
Message-ID: <1C5C690C06EFE244B83E3F133CA70BDE28585D@studentex6.campus.tue.nl>

I don't think rangechecking is (usually? ever?) done at compile time. How would you check the following?
 
v := Random(20)
w := GetInput()
a[v] := a[w]
 

	-----Original Message----- 
	From: Bharath Sundararaman [mailto:bharath.sundararaman@starthis.com] 
	Sent: Wed 11/17/2004 6:32 PM 
	To: antlr-interest@yahoogroups.com 
	Cc: 
	Subject: [antlr-interest] AST, value manipulation.
	
	

	...
	
	VAR
	v: INT := 2;
	a: ARRAY[1..10] OF INT;
	END_VAR
	
	And I have a statement
	
	a[v] := 200;
	
	..., I also want to check if index "v" is within bounds, which
	means I need to retrieve the value of "v" and make sure it does not
	exceed the range 1..10



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 4230 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041118/f38f33ef/attachment.bin
From bharath.sundararaman at starthis.com  Thu Nov 18 06:51:00 2004
From: bharath.sundararaman at starthis.com (Bharath Sundararaman)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] AST, value manipulation.
Message-ID: <B1180416E5C44E49AE556D23DBB45B29060E29@webmail.starthis.com>

Yeah, that makes sense. I guess I should take a vacation. 

 

Thanks for the help!

 

Bharath.

 

________________________________

From: Maassen, H.A.M. [mailto:H.A.M.Maassen@student.tue.nl] 
Sent: Thursday, November 18, 2004 3:10 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] AST, value manipulation.

 

I don't think rangechecking is (usually? ever?) done at compile time.
How would you check the following?

 

v := Random(20)

w := GetInput()

a[v] := a[w]

 

	-----Original Message----- 
	From: Bharath Sundararaman
[mailto:bharath.sundararaman@starthis.com] 
	Sent: Wed 11/17/2004 6:32 PM 
	To: antlr-interest@yahoogroups.com 
	Cc: 
	Subject: [antlr-interest] AST, value manipulation.

	...
	
	VAR
	v: INT := 2;
	a: ARRAY[1..10] OF INT;
	END_VAR
	
	And I have a statement
	
	a[v] := 200;
	
	..., I also want to check if index "v" is within bounds, which
	means I need to retrieve the value of "v" and make sure it does
not
	exceed the range 1..10

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041118/64c66b1e/attachment.html
From sk at z.pl  Thu Nov 18 06:56:15 2004
From: sk at z.pl (Sebastian Kaliszewski)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] header sections (was: Re: ANTLR for Python)
In-Reply-To: <bc607a4e0411171618525cd028@mail.gmail.com>
References: <20041117160653.GC19926@cs.utwente.nl> <cngfo9+moih@eGroups.com> <bc607a4e0411171618525cd028@mail.gmail.com>
Message-ID: <419CB80F.3060207@softax.pl>


Ric Klaren wrote:
 >[snip]
> Since noone ran into this before

I did. Had to do stupid #ifdefs to work around the feature. It's not a 
biggie, not a bug just a feature.

> I guess it's just as good to mark it
> in the docs. 

Wellyes, it should be at least documented.

>[snip] 
> It's definitely something that should be done right in antlr3.

Yup.

rgds
-- 
Sebastian Kaliszewski



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Thu Nov 18 08:57:57 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] building ASTs for recursive lists
In-Reply-To: <1C5C690C06EFE244B83E3F133CA70BDE28585C@studentex6.campus.tue.nl>
References: <1C5C690C06EFE244B83E3F133CA70BDE28585C@studentex6.campus.tue.nl>
Message-ID: <16796.54421.12462.817181@despot.non.net>


>>>>> "Maassen," == Maassen, H A M <H.A.M.Maassen@student.tue.nl> writes:
[...]

> " Unfortunately, I can't seem to change logicalExpression to what I'd
> like:

> logicalExpression : relationalExpression ( logicalOperator^
> relationalExpression )*

> ;

Well, note clearly that you have a sub-clause there which can be *zero*.


> To build a proper tree.  Why can't I? Or even better? How can I? "

What do you mean by "proper"?

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Thu Nov 18 09:00:51 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] AST, value manipulation.
In-Reply-To: <1C5C690C06EFE244B83E3F133CA70BDE28585D@studentex6.campus.tue.nl>
References: <1C5C690C06EFE244B83E3F133CA70BDE28585D@studentex6.campus.tue.nl>
Message-ID: <16796.54595.470928.478313@despot.non.net>


>>>>> "Maassen," == Maassen, H A M <H.A.M.Maassen@student.tue.nl> writes:
[...]

> I don't think rangechecking is (usually? ever?) done at compile time. How
> would you check the following?

If you wanted to, you can do a static analysis on the indices and array
sizes and determine if they are statically known or not.  If they are known
then you can check them right then and there and elide the runtime check.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From bharath.sundararaman at starthis.com  Thu Nov 18 09:31:28 2004
From: bharath.sundararaman at starthis.com (Bharath Sundararaman)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] AST, value manipulation.
Message-ID: <B1180416E5C44E49AE556D23DBB45B29060E31@webmail.starthis.com>


Hi John,

That's exactly what I am trying to do! In order to decide if the array index value is statically known, I have to store the value someplace and have a check for 

IF variable_value is known
	Check if it complies with the array range

Can you give me some pointers/links/information that can help me achieve this? I searched the web and looked at some books in vain. Is this static analysis not regular practice? This is the first time I'm writing a compiler, please bear with me if you find my questions na?ve.

Thanks!

Bharath.

-----Original Message-----
From: John D. Mitchell [mailto:johnm-antlr@non.net] 
Sent: Thursday, November 18, 2004 11:01 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] AST, value manipulation.


>>>>> "Maassen," == Maassen, H A M <H.A.M.Maassen@student.tue.nl> writes:
[...]

> I don't think rangechecking is (usually? ever?) done at compile time. How
> would you check the following?

If you wanted to, you can do a static analysis on the indices and array
sizes and determine if they are statically known or not.  If they are known
then you can check them right then and there and elide the runtime check.

Take care,
	John


 
Yahoo! Groups Links



 





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lally.singh at gmail.com  Thu Nov 18 09:09:55 2004
From: lally.singh at gmail.com (Lally Singh)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] building ASTs for recursive lists
In-Reply-To: <16796.54421.12462.817181@despot.non.net>
References: <1C5C690C06EFE244B83E3F133CA70BDE28585C@studentex6.campus.tue.nl>
	 <16796.54421.12462.817181@despot.non.net>
Message-ID: <3b3449e004111809097017f91e@mail.gmail.com>


On Thu, 18 Nov 2004 08:57:57 -0800, John D. Mitchell
<johnm-antlr@non.net> wrote:
> 
> >>>>> "Maassen," == Maassen, H A M <H.A.M.Maassen@student.tue.nl> writes:
> > logicalExpression : relationalExpression ( logicalOperator^
> > relationalExpression )*
> Well, note clearly that you have a sub-clause there which can be *zero*.
You mean the * matching nothing? What would I note it for?  Sorry, my
last project was JavaCC, this is all still pretty new to me.


> > To build a proper tree.  Why can't I? Or even better? How can I? "
> 
> What do you mean by "proper"?
I just want something I can easily traverse with a tree parser.  As
I'm even newer to that, the simpler the tree the better I figure.

Thanks for all your help!!
-ls

-- 
Evil will win because good is dumb.


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Thu Nov 18 09:42:28 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] AST, value manipulation.
In-Reply-To: <B1180416E5C44E49AE556D23DBB45B29060E31@webmail.starthis.com>
References: <B1180416E5C44E49AE556D23DBB45B29060E31@webmail.starthis.com>
Message-ID: <16796.57092.931322.636512@despot.non.net>


>>>>> "Bharath" == Bharath Sundararaman <bharath.sundararaman@starthis.com> writes:
[...]

> That's exactly what I am trying to do! In order to decide if the array
> index value is statically known, I have to store the value someplace and
> have a check for

Depending on your language, you also have to know if the size of the array
is static or not.


> IF variable_value is known Check if it complies with the array range

> Can you give me some pointers/links/information that can help me achieve
> this? I searched the web and looked at some books in vain. Is this static
> analysis not regular practice? This is the first time I'm writing a
> compiler, please bear with me if you find my questions na?ve.

You might want to look for the more general notion of "use-def" (and
"def-use") chains.  I.e., you link together the uses of each variable with
it's definition.

Of course, it would probably be wise to start with basic "constant
propagation".

Hope this helps,
		John



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Thu Nov 18 09:59:48 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] more specific (lang independent?) actions (WAS: header sections)
Message-ID: <A3370DF6-398B-11D9-A398-000A95891192@cs.usfca.edu>


[yahoo groups suck...didn't see this come across either their web 
interface or email...sending again...stupid yahoo]

Howdy.  Along these lines, I'm feeling a general trend in my thoughts 
towards having more formal actions rather than "type in whatever you 
want and hope it compiles" actions.

For starters, this header issue.  We only want the header so we can say 
"put me in this package and import this stuff" and we need actions 
within the parser (outside of a rule) to define constructors, methods, 
define variables etc...

Actions within rules.  For trees, we have suffix operators that work 
great in many cases but we currently have to use random actions and 
special #(...) expressions within those actions.  Currently, we have to 
"read" actions looking for those special operators.  Happens in lexers 
too.  we have to look for $setType etc...  The $setType is meant as a 
language independent way to set the type.  For the interpreter (as part 
of the GUI) in ANTLR 3, I need to be able to see these set type and set 
channel actions w/o having to read java, c#, c++, etc...

So, here's the start of an idea.  Let's *say what we really mean* 
instead of just providing a slot to put an action, hoping it will end 
up in the right spot in the output.  The 'header "section" {..}' thing 
is the right direction, but let's make it more meaningful and identify 
the things we need to be able to say:

* parser superclass if OO language

* package, module, namespace ...

* includes, imports etc...

* constructor OO or init() non-OO

* instance variables (or similar shared var in non-OO languages)

* instance method definitions needed by the parser that you want 
directly in the output class

* lexer actions (set type, ...)

* tree construction actions

Anything else?  Well, let's start with that and see if a syntax 
appears.  For now, I'll stay away from what is really inside the action 
except for lexer/tree actions (separate thoughts there).  (I'm making 
the terms java-centric <snicker>).

grammar P(...options..., package=org.antlr.test, super=DBGParser);

import {
import java.io.*;
}

init {
	code, not a ctor method def.  Just code to init
	antlr will generate this into the ctor or whatever
}

fields {
String currentMethodName;
int level;
}

methods {
public void computeFoo() {
	...
}
}

start : ID '=' INT ^{start = ^('=' ID INT)} ;

ID : ('a'..'z')+ ;
INT : ('0'..'9')+ ;
WS : (' '|'\t')+ ${channel=99;} ;

where I have integrated the parser/lexer and used language indendent 
actions for lexer and tree stuff (similar to Loring's I believe).

These are just initial thoughts that we should discuss; naturally, 
we're just at the idea stage--don't take this as "what that maniac is 
doing." ;)

Ter

--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Thu Nov 18 10:34:09 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] more specific (lang independent?) actions (WAS: header sections)
In-Reply-To: <A3370DF6-398B-11D9-A398-000A95891192@cs.usfca.edu>
References: <A3370DF6-398B-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <6F97EF36-3990-11D9-B1F3-000393B5606C@codetransform.com>


On Nov 18, 2004, at 9:59 AM, Terence Parr wrote:
> grammar P(...options..., package=org.antlr.test, super=DBGParser);
>
> import {
> import java.io.*;
> }
>
> init {
> 	code, not a ctor method def.  Just code to init
> 	antlr will generate this into the ctor or whatever
> }
>
> fields {
> String currentMethodName;
> int level;
> }
>
> methods {
> public void computeFoo() {
> 	...
> }
> }
>
>

So are these handled by a generic rule like ID '{' (.)* '}'  where the 
stuff inside is just passed as an attribute to the template?  So 
antlr.g doesn't have to change if some other language needs its own 
special block?

Monty



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Thu Nov 18 10:43:59 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] more specific (lang independent?) actions (WAS: header sections)
In-Reply-To: <6F97EF36-3990-11D9-B1F3-000393B5606C@codetransform.com>
References: <A3370DF6-398B-11D9-A398-000A95891192@cs.usfca.edu> <6F97EF36-3990-11D9-B1F3-000393B5606C@codetransform.com>
Message-ID: <CF20A0B2-3991-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 18, 2004, at 10:34 AM, Monty Zukowski wrote:
> On Nov 18, 2004, at 9:59 AM, Terence Parr wrote:
>> grammar P(...options..., package=org.antlr.test, super=DBGParser);
>>
>> import {
>> import java.io.*;
>> }
>>
>> init {
>> 	code, not a ctor method def.  Just code to init
>> 	antlr will generate this into the ctor or whatever
>> }
>>
>> fields {
>> String currentMethodName;
>> int level;
>> }
>>
>> methods {
>> public void computeFoo() {
>> 	...
>> }
>> }
>>
>>
>
> So are these handled by a generic rule like ID '{' (.)* '}'  where the
> stuff inside is just passed as an attribute to the template?  So
> antlr.g doesn't have to change if some other language needs its own
> special block?

Wow.  Devious thought.  I like the flexibility so any language target 
could require special code sections.  We'd probably have to make it

section fields {
....
}

rather than

fields {
}

A VERY interesting idea.  C++ might need a whole slew of sections...

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Thu Nov 18 10:49:47 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] more specific (lang independent?) actions (WAS: header sections)
In-Reply-To: <CF20A0B2-3991-11D9-A398-000A95891192@cs.usfca.edu>
References: <A3370DF6-398B-11D9-A398-000A95891192@cs.usfca.edu> <6F97EF36-3990-11D9-B1F3-000393B5606C@codetransform.com> <CF20A0B2-3991-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <9ED79D90-3992-11D9-B1F3-000393B5606C@codetransform.com>


On Nov 18, 2004, at 10:43 AM, Terence Parr wrote:

>
>
> On Nov 18, 2004, at 10:34 AM, Monty Zukowski wrote:
>> On Nov 18, 2004, at 9:59 AM, Terence Parr wrote:
>>>
>>
>> So are these handled by a generic rule like ID '{' (.)* '}'  where the
>> stuff inside is just passed as an attribute to the template?  So
>> antlr.g doesn't have to change if some other language needs its own
>> special block?
>
> Wow.  Devious thought.  I like the flexibility so any language target
> could require special code sections.  We'd probably have to make it
>
> section fields {
> ....
> }
>
> rather than
>
> fields {
> }
>
>

More devious than you might presume.  This opens the field for aspects 
in a .g file ;)

Now to press my luck for conditionals.....I suppose that can be 
controlled by which templates are in use.

section debug {
#DEFINE DEBUG 1
}

section error_reporting {
...
}

section tracing {
...
}

We need to get a handle on stuff like optionally including my own 
tracing methods v. the standard ones in a sane way.  I'm not sure I'm 
awake enough to coherently describe everything we need.

Monty



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Thu Nov 18 10:52:20 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] more specific (lang independent?) actions (WAS: header sections)
In-Reply-To: <9ED79D90-3992-11D9-B1F3-000393B5606C@codetransform.com>
References: <A3370DF6-398B-11D9-A398-000A95891192@cs.usfca.edu> <6F97EF36-3990-11D9-B1F3-000393B5606C@codetransform.com> <CF20A0B2-3991-11D9-A398-000A95891192@cs.usfca.edu> <9ED79D90-3992-11D9-B1F3-000393B5606C@codetransform.com>
Message-ID: <F9B8968B-3992-11D9-B1F3-000393B5606C@codetransform.com>


> More devious than you might presume.  This opens the field for aspects
> in a .g file ;)
>
> Now to press my luck for conditionals.....I suppose that can be
> controlled by which templates are in use.
>
> section debug {
> #DEFINE DEBUG 1
> }
>
> section error_reporting {
> ...
> }
>
> section tracing {
> ...
> }
>

Oh!  Oh!  I know!  I know!

section defaultExceptionHandler(MismatchedTokenException) {
catch (MismatchedTokenException) {
	....
}

}


Monty



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From mail at martin-probst.com  Thu Nov 18 12:01:13 2004
From: mail at martin-probst.com (Martin Probst)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] Nondeterminism on Keywords with multiple meanings
Message-ID: <1100808073.9513.19.camel@narr.homeip.net>


Hi,
for some time I thought I had actually managed to come over XQuery's
keyword ambiguities but after the last "Grammar update" I'm boned again.

In XQuery every keyword may also be used to identify an XML tag. My
specific problem is with declarations - from the grammar:

Setter ::= XMLSpaceDecl | DefaultCollationDecl 
	   | BaseURIDecl | ConstructionDecl | OrderingModeDecl 
	   | EmptyOrderingDecl | InheritNamespacesDecl

And all these setters start with a "declare". Without switching to LA(2)
the XQuery team "solves" this problem by defining 25 different lexical
states with ~10 different transitions in each state. I wanted to avoid
this by using syntatic predicates like this:

( ( "declare" "xmlspace" ) => xmlSpaceDecl
| ( "declare" "default" ) => defaultDecl 
| ( "declare" "base-uri" ) => baseURIDecl 
| ( "declare" "construction" ) => constructionDecl 
| ( "declare" "ordering" ) => orderingModeDecl 
| ( "import" "schema" ) => schemaImport 
| ( "import" "module" ) => moduleImport 
| ( "declare" "namespace" ) => namespaceDecl 
| ( "declare" "variable" ) => varDecl 
| ( "declare" "function" ) => functionDecl ) SEPARATOR )*

Which somewhat works, though there is an ambiguity between
end-of-the-block on "declare" and "import".
So a statement like:
> declare base-uri "foo";
> declare
- which is valid XQuery - will fail.

Now my question is: can anyone see an easy (and not too slow) way out of
this situation? I'm using C++ btw.

mfg
Martin



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From marq.kole at philips.com  Thu Nov 18 12:17:36 2004
From: marq.kole at philips.com (Marq Kole)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] Re: more specific (lang independent?) actions (WAS: header sections)
In-Reply-To: <CF20A0B2-3991-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <cnj010+rhnr@eGroups.com>



--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 

<SNIP>

> > So are these handled by a generic rule like ID '{' (.)* '}'  
where the
> > stuff inside is just passed as an attribute to the template?  So
> > antlr.g doesn't have to change if some other language needs its 
own
> > special block?
> 
> Wow.  Devious thought.  I like the flexibility so any language 
target 
> could require special code sections.  We'd probably have to make it
> 
> section fields {
> ....
> }
> 
> rather than
> 
> fields {
> }
> 
> A VERY interesting idea.  C++ might need a whole slew of 
sections...

What I do like about the current approach is that is extremely easy 
to change the way separate sections are defined and used within the 
code generator. If you need different types of sections for any 
supported language, language independence becomes more of an 
theoretical issue than of practical consequences.

It is just very practical to have the

header "name" {
}

sections at the start for any global stuff, and something like

code "name" {
}

sections after the optional actions section (needed for backwards 
compatibility) in each of the lexer/parser/treewalker definitions.

The way code generation is currently handled in C++ is different 
from that in Python, but it is very easy to make customized sections 
and introduce these at the appropriate places in the code generator.

In the end, if you want to rewrite a grammar in ANTLR C++ to ANTLR 
Python, you will need to consider how each of the "language 
independent" sections translates to the concepts of the other 
language.

In the end it all comes down to correctly documenting the available 
sections for each of the supported language in the ANTLR runtime 
documentation.

Greetz,
Marq






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Thu Nov 18 09:25:03 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] Re: more specific (lang independent?) actions (WAS: header sections)
In-Reply-To: <419CB80F.3060207@softax.pl>
References: <20041117160653.GC19926@cs.utwente.nl> <cngfo9+moih@eGroups.com> <bc607a4e0411171618525cd028@mail.gmail.com> <419CB80F.3060207@softax.pl>
Message-ID: <C825A5AE-3986-11D9-A398-000A95891192@cs.usfca.edu>


Howdy.  Along these lines, I'm feeling a general trend in my thoughts 
towards having more formal actions rather than "type in whatever you 
want and hope it compiles" actions.

For starters, this header issue.  We only want the header so we can say 
"put me in this package and import this stuff" and we need actions 
within the parser (outside of a rule) to define constructors, methods, 
define variables etc...

Actions within rules.  For trees, we have suffix operators that work 
great in many cases but we currently have to use random actions and 
special #(...) expressions within those actions.  Currently, we have to 
"read" actions looking for those special operators.  Happens in lexers 
too.  we have to look for $setType etc...  The $setType is meant as a 
language independent way to set the type.  For the interpreter (as part 
of the GUI) in ANTLR 3, I need to be able to see these set type and set 
channel actions w/o having to read java, c#, c++, etc...

So, here's the start of an idea.  Let's *say what we really mean* 
instead of just providing a slot to put an action, hoping it will end 
up in the right spot in the output.  The 'header "section" {..}' thing 
is the right direction, but let's make it more meaningful and identify 
the things we need to be able to say:

* parser superclass if OO language

* package, module, namespace ...

* includes, imports etc...

* constructor OO or init() non-OO

* instance variables (or similar shared var in non-OO languages)

* instance method definitions needed by the parser that you want 
directly in the output class

* lexer actions (set type, ...)

* tree construction actions

Anything else?  Well, let's start with that and see if a syntax 
appears.  For now, I'll stay away from what is really inside the action 
except for lexer/tree actions (separate thoughts there).  (I'm making 
the terms java-centric <snicker>).

grammar P(...options..., package=org.antlr.test, super=DBGParser);

import {
import java.io.*;
}

init {
	code, not a ctor method def.  Just code to init
	antlr will generate this into the ctor or whatever
}

fields {
String currentMethodName;
int level;
}

methods {
public void computeFoo() {
	...
}
}

start : ID '=' INT ^{start = ^('=' ID INT)} ;

ID : ('a'..'z')+ ;
INT : ('0'..'9')+ ;
WS : (' '|'\t')+ ${channel=99;} ;

where I have integrated the parser/lexer and used language indendent 
actions for lexer and tree stuff (similar to Loring's I believe).

These are just initial thoughts that we should discuss; naturally, 
we're just at the idea stage--don't take this as "what that maniac is 
doing." ;)

Ter

On Nov 18, 2004, at 6:56 AM, Sebastian Kaliszewski wrote:
> Ric Klaren wrote:
>> [snip]
>> Since noone ran into this before
>
> I did. Had to do stupid #ifdefs to work around the feature. It's not a
> biggie, not a bug just a feature.
>
>> I guess it's just as good to mark it
>> in the docs.
>
> Wellyes, it should be at least documented.
>
>> [snip]
>> It's definitely something that should be done right in antlr3.
>
> Yup.
>
> rgds
> -- 
> Sebastian Kaliszewski
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From stevegianvecchio at hotmail.com  Thu Nov 18 13:38:01 2004
From: stevegianvecchio at hotmail.com (Steve)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] Anyone have Robin Debreuil's C# Grammar?
In-Reply-To: <00bd01c4cb43$0656b690$07060b0a@home>
Message-ID: <cnj4np+7fli@eGroups.com>



--- In antlr-interest@yahoogroups.com, "Alex Sedow" <alexsedow@m...> 
wrote:
> > Could you please send the complete archive to Terence directly 
(parrt
> > at cs.usfca.edu). He will manually update the file sharing entry.
> > 
> > Cheers,
> > 
> > Marco Hunsicker
> 
> I send files.
> 
> Alex.

Thanks Terence, Marco and Alex! Glad to see the C# files available 
now.

Steve





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-l5QQqLuWLXcfPuaEJtXTF60 at yahoogroups.com  Thu Nov 18 13:45:14 2004
From: antlr-interest-accept-l5QQqLuWLXcfPuaEJtXTF60 at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:35 2004
Subject: MODERATE -- teddemc@yahoo.com posted to antlr-interest
Message-ID: <1100814314.355.90679.m24@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  teddemc@yahoo.com 

The message summary:
--------------------
FROM: teddemc@yahoo.com 
DATE: Thu, 18 Nov 2004 13:45:10 -0800 (PST) 
SUBJECT: Tutorial Seems to Have Improper Java 

While I code in C/C++ and flex/bison, I am new to Java and 
trying to learn antlr, too. The following link is to code I 
found in an antlr tutorial: 

http://pastebin.com/121239 

But it doesn't work.. javac says it's expecting '{' after: 

class ExrLexer extends lever; 

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=373 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-l5QQqLuWLXcfPuaEJtXTF60@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: Matthew Tedder <teddemc@yahoo.com>
Subject: Tutorial Seems to Have Improper Java
Date: Thu, 18 Nov 2004 13:45:10 -0800 (PST)
Size: 1818
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041118/bcae4d54/attachment.mht
From teddemc at yahoo.com  Thu Nov 18 13:45:10 2004
From: teddemc at yahoo.com (Matthew Tedder)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] Tutorial Seems to Have Improper Java
In-Reply-To: <49C10375-390C-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <20041118214510.18896.qmail@web52910.mail.yahoo.com>



While I code in C/C++ and flex/bison, I am new to Java
and trying to learn antlr, too.  The following link is
to code I found in an antlr tutorial:

http://pastebin.com/121239

But it doesn't work.. javac says it's expecting '{'
after:

class ExrLexer extends lever;

Can anyone tell me what is wrong here?  Once I get
just one simple thing working, I think I could be
happy playing with it for a while..

Matthew






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From stevegianvecchio at hotmail.com  Thu Nov 18 14:07:52 2004
From: stevegianvecchio at hotmail.com (Steve)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] ANTLR-based Bug Finder
Message-ID: <cnj6fo+9r0m@eGroups.com>



Hi everyone,

I am just finishing work on multi-language error detection tool built 
using ANTLR. The tool analyzes ASTs built from Java, Pascal, and C 
grammars to find logic errors.

I'd like to take this error detection tool and catch some bugs. This 
isn't an ANTLR question, just asking for suggestions.  What types of 
common logic errors are easy to find in real world programs? I can 
find many different types of simple rule-based errors with the tool 
such as:

Never divide by 0. 
Never dereference a null pointer. 
Never use an uninitialized variable. 

The tool currently works for Java and Pascal. It should be working 
soon for C. Does anyone have any suggestions as to what type of 
errors to look for and what programs (with source code available) 
would be good to look at? I don't mind looking at older versions of 
popular programs, finding bugs that have already been found would 
still be a good test for my program. I appreciate any suggestions.

I would also like to thank the group members and others that have 
contributed to ANTLR.  The response here has been excellent for each 
of the questions that I have had.

Many thanks,

Steve





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Thu Nov 18 14:34:50 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:35 2004
Subject: [antlr-interest] Re: more specific (lang independent?) actions (WAS: header sections)
In-Reply-To: <CF20A0B2-3991-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <cnj82a+mghm@eGroups.com>



--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> 
> On Nov 18, 2004, at 10:34 AM, Monty Zukowski wrote:
> > On Nov 18, 2004, at 9:59 AM, Terence Parr wrote:
> >> grammar P(...options..., package=org.antlr.test, super=DBGParser);
> >>
> >> import {
> >> import java.io.*;
> >> }
> >>
> >> init {
> >> 	code, not a ctor method def.  Just code to init
> >> 	antlr will generate this into the ctor or whatever
> >> }
> >>
> >> fields {
> >> String currentMethodName;
> >> int level;
> >> }
> >>
> >> methods {
> >> public void computeFoo() {
> >> 	...
> >> }
> >> }
> >>
> >>
> >
> > So are these handled by a generic rule like ID '{' (.)* '}'  where the
> > stuff inside is just passed as an attribute to the template?  So
> > antlr.g doesn't have to change if some other language needs its own
> > special block?
> 
> Wow.  Devious thought.  I like the flexibility so any language target 
> could require special code sections.  We'd probably have to make it
> 
> section fields {
> ....
> }

I like the way this discussion has been going, but even better would
be to use a language qualifier where appropriate:

java header { ... }
or
cpp options { ... }
or
python init { ... }

Then these special actions could be treated as file-level attributes
by the code generators for the target languages.  With any luck, the
language-specificity can be localized to output grammar files.

--Loring

> rather than
> 
> fields {
> }
> 
> A VERY interesting idea.  C++ might need a whole slew of sections...
> 
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Thu Nov 18 14:49:41 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Tutorial Seems to Have Improper Java
In-Reply-To: <20041118214510.18896.qmail@web52910.mail.yahoo.com>
References: <20041118214510.18896.qmail@web52910.mail.yahoo.com>
Message-ID: <2257F180-39B4-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 18, 2004, at 1:45 PM, Matthew Tedder wrote:
> While I code in C/C++ and flex/bison, I am new to Java
> and trying to learn antlr, too.  The following link is
> to code I found in an antlr tutorial:
>
> http://pastebin.com/121239
>
> But it doesn't work.. javac says it's expecting '{'
> after:
>
> class ExrLexer extends lever;
>
> Can anyone tell me what is wrong here?  Once I get
> just one simple thing working, I think I could be
> happy playing with it for a while..

Somebody has the main and .g file looking like one.  Make this a 
separate file:

import antlr.*;
public class Main {
??public static void main(String[] args) throws Exception {
????ExprLexer lexer = new ExprLexer(System.in);
????ExprParser parser = new ExprParser(lexer);
????parser.expr();
??}
}

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Thu Nov 18 14:51:35 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Re: more specific (lang independent?) actions (WAS: header sections)
In-Reply-To: <cnj82a+mghm@eGroups.com>
References: <cnj82a+mghm@eGroups.com>
Message-ID: <666F1F3D-39B4-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 18, 2004, at 2:34 PM, lgcraymer wrote:
>> section fields {
>> ....
>> }
>
> I like the way this discussion has been going, but even better would
> be to use a language qualifier where appropriate:
>
> java header { ... }
> or
> cpp options { ... }
> or
> python init { ... }

Ooooh.  Yeah, that way you'd know when you have a problem converting a 
grammar to a different language.

That said, it seems like some should be universal so you don't have to 
change per target:

init {...}

right?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Thu Nov 18 11:51:23 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] ANTLR-based Bug Finder
In-Reply-To: <cnj6fo+9r0m@eGroups.com>
References: <cnj6fo+9r0m@eGroups.com>
Message-ID: <419CFD3B.6090700@codetransform.com>


> What types of common logic errors are easy to find in real world programs?


A good place to start would be the manuals for 'lint' like tools.

Monty


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From teddemc at yahoo.com  Thu Nov 18 15:39:42 2004
From: teddemc at yahoo.com (Matthew Tedder)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Tutorial Seems to Have Improper Java
In-Reply-To: <2257F180-39B4-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <20041118233942.78769.qmail@web52901.mail.yahoo.com>



Separating them into separate files doesn't seem to
make any difference... The following line gives an
error... it's expecting a '{'

class ExprLexer extends Lexer;

I am learning Java, but I know C++.. I presume Lexer
is defined in antlr.* but I do not understand what is
supposed to be happening here...

Matthew



--- Terence Parr <parrt@cs.usfca.edu> wrote:

> 
> 
> On Nov 18, 2004, at 1:45 PM, Matthew Tedder wrote:
> > While I code in C/C++ and flex/bison, I am new to
> Java
> > and trying to learn antlr, too.  The following
> link is
> > to code I found in an antlr tutorial:
> >
> > http://pastebin.com/121239
> >
> > But it doesn't work.. javac says it's expecting
> '{'
> > after:
> >
> > class ExrLexer extends lever;
> >
> > Can anyone tell me what is wrong here?  Once I get
> > just one simple thing working, I think I could be
> > happy playing with it for a while..
> 
> Somebody has the main and .g file looking like one. 
> Make this a 
> separate file:
> 
> import antlr.*;
> public class Main {
> public static void main(String[] args) throws
> Exception {
> ExprLexer lexer = new ExprLexer(System.in);
> ExprParser parser = new ExprParser(lexer);
> parser.expr();
> }
> }
> 
> Ter
> --
> CS Professor & Grad Director, University of San
> Francisco
> Creator, ANTLR Parser Generator,
> http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email
> again!
> 
> 
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
>     antlr-interest-unsubscribe@yahoogroups.com
> 
>  
> 
> 
> 
> 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From braden at endoframe.com  Thu Nov 18 15:49:05 2004
From: braden at endoframe.com (Braden McDaniel)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Tutorial Seems to Have Improper Java
In-Reply-To: <20041118233942.78769.qmail@web52901.mail.yahoo.com>
References: <20041118233942.78769.qmail@web52901.mail.yahoo.com>
Message-ID: <419D34F1.4040602@endoframe.com>


Matthew Tedder wrote:
> 
> Separating them into separate files doesn't seem to
> make any difference... The following line gives an
> error... it's expecting a '{'
> 
> class ExprLexer extends Lexer;
> 
> I am learning Java, but I know C++.. I presume Lexer
> is defined in antlr.* but I do not understand what is
> supposed to be happening here...

You're supposed to process the .g file with antlr, not javac:

   $ java antlr.Tool foo.g

The antlr jar file needs to be in your CLASSPATH.

Braden


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From csnyder at alumni.ncsu.edu  Thu Nov 18 15:55:02 2004
From: csnyder at alumni.ncsu.edu (kozchris)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Re: Tutorial Seems to Have Improper Java
In-Reply-To: <20041118233942.78769.qmail@web52901.mail.yahoo.com>
Message-ID: <cnjcon+mq2g@eGroups.com>



looked at the example.
Create 2 files Main.java and LP.g as defined below.
Run LP.g file through antlr and get ExprLexer.java and ExprParser.java.
Make sure your class path has the antlr.jar and directory with your 3
java files.
Build your 3 java files "javac *.java" and run "java Main".

Chris

//first file:
//Main.java
import antlr.*;
public class Main {
  public static void main(String[] args) throws Exception {
    ExprLexer lexer = new ExprLexer(System.in);
    ExprParser parser = new ExprParser(lexer);
    parser.expr();
  }
} 
//////////////////////
//end first file
//////////////////////

//second file
//LP.g
// Lexer
class ExprLexer extends Lexer;

options {
    k=2; // needed for newline junk
    charVocabulary='\u0000'..'\u007F'; // allow ascii
}

LPAREN: '(' ;
RPAREN: ')' ;
PLUS  : '+' ;
MINUS : '-' ;
STAR  : '*' ;
INT   : ('0'..'9')+ ;
WS    : ( ' '
        | '\r' '\n'
        | '\n'
        | '\t'
        )
        {$setType(Token.SKIP);}
      ;


// Parser
class ExprParser extends Parser;

expr:   mexpr ((PLUS|MINUS) mexpr)*
    ;

mexpr
    :   atom (STAR atom)*
    ;

atom:   INT
    |   LPAREN expr RPAREN
    ;
//////////////////////
//end second file
//////////////////////



--- In antlr-interest@yahoogroups.com, Matthew Tedder <teddemc@y...>
wrote:
> 
> Separating them into separate files doesn't seem to
> make any difference... The following line gives an
> error... it's expecting a '{'
> 
> class ExprLexer extends Lexer;
> 
> I am learning Java, but I know C++.. I presume Lexer
> is defined in antlr.* but I do not understand what is
> supposed to be happening here...
> 
> Matthew
> 
> 
> 
> --- Terence Parr <parrt@c...> wrote:
> 
> > 
> > 
> > On Nov 18, 2004, at 1:45 PM, Matthew Tedder wrote:
> > > While I code in C/C++ and flex/bison, I am new to
> > Java
> > > and trying to learn antlr, too.  The following
> > link is
> > > to code I found in an antlr tutorial:
> > >
> > > http://pastebin.com/121239
> > >
> > > But it doesn't work.. javac says it's expecting
> > '{'
> > > after:
> > >
> > > class ExrLexer extends lever;
> > >
> > > Can anyone tell me what is wrong here?  Once I get
> > > just one simple thing working, I think I could be
> > > happy playing with it for a while..
> > 
> > Somebody has the main and .g file looking like one. 
> > Make this a 
> > separate file:
> > 
> > import antlr.*;
> > public class Main {
> >   public static void main(String[] args) throws
> > Exception {
> >     ExprLexer lexer = new ExprLexer(System.in);
> >     ExprParser parser = new ExprParser(lexer);
> >     parser.expr();
> >   }
> > }
> > 
> > Ter
> > --
> > CS Professor & Grad Director, University of San
> > Francisco
> > Creator, ANTLR Parser Generator,
> > http://www.antlr.org
> > Cofounder, http://www.jguru.com
> > Cofounder, http://www.knowspam.net enjoy email
> > again!
> > 
> > 
> > 
> > 
> > 
> >  
> > Yahoo! Groups Links
> > 
> > 
> >     antlr-interest-unsubscribe@yahoogroups.com
> > 
> >  
> > 
> > 
> > 
> >





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Thu Nov 18 16:16:21 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Re: more specific (lang independent?) actions (WAS: header sections)
In-Reply-To: <666F1F3D-39B4-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <cnje0l+k0ar@eGroups.com>



--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> 
> On Nov 18, 2004, at 2:34 PM, lgcraymer wrote:
> >> section fields {
> >> ....
> >> }
> >
> > I like the way this discussion has been going, but even better would
> > be to use a language qualifier where appropriate:
> >
> > java header { ... }
> > or
> > cpp options { ... }
> > or
> > python init { ... }
> 
> Ooooh.  Yeah, that way you'd know when you have a problem converting a 
> grammar to a different language.
> 
> That said, it seems like some should be universal so you don't have to 
> change per target:
> 
> init {...}

Actually,
options { ... }
is probably a better example--init sections would likely contain code,
and it might not be unusual to have a grammar that contained, say

python init { ... }
OCaml init { ... }

and can generate code for either target.  [There would be both generic
options and target-dependent options.]  That does assume that the
attribute and output template support is a big help in achieving
target independence for most things and that we are talking about the
few bits that do not fit.  I believe that Ric's 3.0 C code generator
is a strong indicator that the assumption is valid.

--Loring

> right?
> 
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Thu Nov 18 16:38:37 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] ANTLR-based Bug Finder
In-Reply-To: <cnj6fo+9r0m@eGroups.com>
References: <cnj6fo+9r0m@eGroups.com>
Message-ID: <16797.16525.64501.816980@despot.non.net>


>>>>> "Steve" == Steve  <stevegianvecchio@hotmail.com> writes:
[...]

> I am just finishing work on multi-language error detection tool built
> using ANTLR. The tool analyzes ASTs built from Java, Pascal, and C
> grammars to find logic errors.

Cool!


> I'd like to take this error detection tool and catch some bugs. This
> isn't an ANTLR question, just asking for suggestions.  What types of
> common logic errors are easy to find in real world programs? I can find
> many different types of simple rule-based errors with the tool such as:

> Never divide by 0.  Never dereference a null pointer.  Never use an
> uninitialized variable.

For Java, examples include FindBugs and PMD. UTGL (Use the Google, Luke
:-).


> The tool currently works for Java and Pascal. It should be working soon
> for C. Does anyone have any suggestions as to what type of errors to look
> for and what programs (with source code available) would be good to look
> at? I don't mind looking at older versions of popular programs, finding
> bugs that have already been found would still be a good test for my
> program. I appreciate any suggestions.

Any of the popular open-source projects floating around that catches your
fancy. 

Have fun,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Thu Nov 18 20:23:50 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] setTokenObjectClass() and class-loaders
Message-ID: <Pine.LNX.4.44.0411181659260.5076-100000@g4.pauljlucas.org>


	It seems to be the case that using this method breaks if the
	parser is in a child class-loader of that used to load ANTLR.
	It would be nice if you simply passed the Class rather than a
	String so ANTLR never calls Class.forName().

	I also have to derive from ASTFactory so I can get access to
	theASTNodeTypeClass and set it manually.

	Sigh...  :-(

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Thu Nov 18 20:49:49 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] setTokenObjectClass() and class-loaders
In-Reply-To: <Pine.LNX.4.44.0411181659260.5076-100000@g4.pauljlucas.org>
References: <Pine.LNX.4.44.0411181659260.5076-100000@g4.pauljlucas.org>
Message-ID: <714EC032-39E6-11D9-B52C-000393BB647E@cs.usfca.edu>


Yeah i just used that function today and decided it was weird also.  
Sorry about that.

You know the routine...was in start up and had no time to think about 
consistency, goodness, etc...

Ter
On Nov 18, 2004, at 8:23 PM, Paul J. Lucas wrote:

>
> 	It seems to be the case that using this method breaks if the
> 	parser is in a child class-loader of that used to load ANTLR.
> 	It would be nice if you simply passed the Class rather than a
> 	String so ANTLR never calls Class.forName().
>
> 	I also have to derive from ASTFactory so I can get access to
> 	theASTNodeTypeClass and set it manually.
>
> 	Sigh...  :-(
>
> 	- Paul
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From atripp at comcast.net  Thu Nov 18 20:52:01 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Re: Java memory mapped IO is slow for big files :(
In-Reply-To: <0FE5C5C6-38D0-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <cnju5h+kj8c@eGroups.com>



See this huge thread at javalobby.org for a discussion
on Java I/O performance:
http://www.javalobby.org/forums/thread.jspa?threadID=14768&start=30&tstart=-1

The thread's title mentions "Java 5" but there's nothing specific
about JDK1.5 in the issue - it's all about buffering
vs. reading into an array.

See this post within that thread for "the best answer" and
a sample code attachment:
http://www.javalobby.org/forums/thread.jspa?threadID=14768&messageID=91813072&tstart=-1

Andy





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From doublemalam at yahoo.co.uk  Fri Nov 19 01:31:02 2004
From: doublemalam at yahoo.co.uk (Muhammad Masoom Alam)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Assigning perorities to different production rules
In-Reply-To: <0FE5C5C6-38D0-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <20041119093102.67320.qmail@web86909.mail.ukl.yahoo.com>


Dear all,

I have one confusion regarging production rules 

suppose i have production rule as follows

expression :addingexpression;

addingexpression : IDENT  (DOT! IDENT)* | DOT CONTAINS^

now the probelm is that the first possibitlty god executed and not the 2nd one as CONTAINS is a key word but a also a valid identifier.and as a result first possiblity is always executed not the 2nd one, is there is any way to assign some perority to these rules so that it should check for the 2nd one as well.

Regards.

Muhammad.

 

     

: 

now adding 

		
---------------------------------
Moving house? Beach bar in Thailand? New Wardrobe? Win ?10k with Yahoo! Mail to make your dream a reality.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041119/2777a5dd/attachment.html
From lgc at mail1.jpl.nasa.gov  Fri Nov 19 04:09:51 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Re: Assigning perorities to different production rules
In-Reply-To: <20041119093102.67320.qmail@web86909.mail.ukl.yahoo.com>
Message-ID: <cnknqf+spmt@eGroups.com>



Syntactic predicates will prioritize alternatives.  From your
description, I suspect that there is another problem and that you mean 

addingexpression:  IDENT ( (DOT! IDENT)* | DOT CONTAINS^ ) ;

I think that what you want is

addingexpression:
    IDENT
    (    (DOT CONTAINS => DOT CONTAINS^
    |    (DOT! IDENT)*
    )
    ;

--Loring

--- In antlr-interest@yahoogroups.com, Muhammad Masoom Alam
<doublemalam@y...> wrote:
> 
> Dear all,
> 
> I have one confusion regarging production rules 
> 
> suppose i have production rule as follows
> 
> expression :addingexpression;
> 
> addingexpression : IDENT  (DOT! IDENT)* | DOT CONTAINS^
> 
> now the probelm is that the first possibitlty god executed and not
the 2nd one as CONTAINS is a key word but a also a valid
identifier.and as a result first possiblity is always executed not the
2nd one, is there is any way to assign some perority to these rules so
that it should check for the 2nd one as well.
> 
> Regards.
> 
> Muhammad.
> 
>  
> 
>      
> 
> : 
> 
> now adding 
> 
> 		
> ---------------------------------
> Moving house? Beach bar in Thailand? New Wardrobe? Win ?10k with
Yahoo! Mail to make your dream a reality.





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-fpN4GUje1u1hm_hk5rOOZiw at yahoogroups.com  Fri Nov 19 09:23:37 2004
From: antlr-interest-accept-fpN4GUje1u1hm_hk5rOOZiw at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:36 2004
Subject: MODERATE -- jmcclain@tcshealthcare.com posted to antlr-interest
Message-ID: <1100885017.397.14126.m6@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  jmcclain@tcshealthcare.com 

The message summary:
--------------------
FROM: jmcclain@tcshealthcare.com 
DATE: Fri, 19 Nov 2004 17:23:00 -0000 
SUBJECT: simple function call translator 

Howdy, at work, we have a simple rules engine in 
powerbuilder that reads a condition field, a operator field,
a result field and a consequence field from a table. This 
information is entered to the table via client server app to
define when to apply computed fields and field properties 
(hidden, disabled, etc..) to a client / server screen - 
similar to a rudimentary workflow e.g. condition field: 
function(paramter_expression, parameter_ expresion,...) 

operator: standar logical operator 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=374 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-fpN4GUje1u1hm_hk5rOOZiw@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "jm42163jm" <jmcclain@tcshealthcare.com>
Subject: simple function call translator
Date: Fri, 19 Nov 2004 17:23:00 -0000
Size: 2442
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041119/31b534ad/attachment.mht
From jmcclain at tcshealthcare.com  Fri Nov 19 09:23:00 2004
From: jmcclain at tcshealthcare.com (jm42163jm)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] simple function call translator
Message-ID: <cnla5k+3abq@eGroups.com>




Howdy, at work, we have a simple rules engine in powerbuilder that 
reads a condition field, a operator field, a result field and a 
consequence field from a table. This information is entered to the 
table via client server app to define when to apply computed fields 
and field properties (hidden, disabled, etc..) to a client / server 
screen - similar to a rudimentary workflow e.g. 
condition field: function(paramter_expression, parameter_ 
expresion,...)

operator: standar logical operator 

result: function(paramter_expression, paramter_ expression,...)

parameter_expression: could be another function call, a 
value/variable, or an expression

the consequence will be a computed field, e.g. function call, a 
value/variable, or an expression

we need to be able to translate these powerbuilder function calls 
into java function calls that reproduce the same functionality

what tool is best to do this type of translation?

what do I do since I do not have a formal grammar - I only have the 
function declarations, and an understanding that this does not have 
to be completey robust as only a subset of powerbuilder functions are 
involved and there are no standard programming constructs (loops, 
conditions, assignments, etc..)?










 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Fri Nov 19 10:00:47 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] "back to the future" (merged lexer / parser spec)
Message-ID: <F0777C46-3A54-11D9-A398-000A95891192@cs.usfca.edu>


Howdy,

One of the things that I liked about old PCCTS (and that was different 
though I doubt I invented) 15 years ago was the fact that you could 
have one spec.  You didn't need both a lexer and parser spec, which we 
all know can cause lots of mismatches between token types etc...

So, ANTLR 3 will allow you to reference char and string literals in 
rules and also to define lexer rules all in the same spec.  For 
example,

grammar foo;

a : ID "while" '.' ;

ID : ('a'..'z')+ ;

Results in this parser:

     public void a()
     {
         match(ID);
         match(2);
         match(3);
     }

where the literal references are replaced with an appropriate token 
type reference.  ANTLR automatically builds this:

lexer grammar fooLexer;

T2 : "while" ;
T3 : '.' ;
ID:('a'..'z')+;

and generates code (all without writing it to the disk).  I just use a 
StringTemplate:

	/** For merged lexer/parsers, we must construct a separate lexer spec.
	 *  This is the template for lexer; put the literals first then the
	 *  regular rules.
	 */
	protected StringTemplate lexerGrammarST =
		new StringTemplate(
			"lexer grammar <name>Lexer;\n" +
			"\n" +
			"<literals:{T<it.type> : <it.literal> ;\n}>\n" +
			"<rules>",
			AngleBracketTemplateLexer.class
		);

to generate the new lexer string and then do a "new 
Grammar(lexerGrammarString)" to get the new grammar object. :)  Gotta 
love StringTemplate for code gen!

You can still have separate specs, but you usually won't need to do 
that.

With this merged spec, ultimately I would like to do context-sensitive 
(goal-oriented) lexing so we could handle things like the C++ nested 
template lexing issue.  With input "List<List<int>>" you don't know in 
the lexer w/o context if the final ">>" is two '>' or one '>>' (shift).

Oh, another thing.  With the rules for tokens in the parser spec, you 
can specify the kind of tree node to create for each token with an 
option:

INT
options {
	AST=IntNode;
}
	:	('0'..'9')+
	;

Handy. :)

Actually 3.0 does the merged spec right now; took me an hour or two.  
The new code base is SOooooo sweet.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Fri Nov 19 14:37:17 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Re: "back to the future" (merged lexer / parser spec)
In-Reply-To: <F0777C46-3A54-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <cnlsit+karq@eGroups.com>



Ter--

How about extending the capability to grammars in multiple files? 
That is, support literals in all files, export the literal strings to
a text file (or files--one per grammar) and add a "requires" option to
the lexer.

A good implementation would require translating "!#" into "BangHash"
or something similar via table lookup, but that should be pretty easy.
 Then keyword literals could be used in tree grammars for readability.
 It would also make it more practical to keep the lexer grammar in a
separate file from the other grammars which could improve maintainability.

--Loring





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Fri Nov 19 15:00:59 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] patching a tree (recoverability)
Message-ID: <Pine.LNX.4.44.0411191423450.5076-100000@g4.pauljlucas.org>


	Suppose I want to parse and compile as much as possible.  An
	example is having:

		funcDecl
		    : DECLARE! FUNCTION^ IDENT '('! paramList ')'! funcBody ';'!
		    	{
			    ##.setType( FUNC_DECL );
			}
		    ;

	I want to recover if something doesn't parse in funcBody and
	produce a tree not having a body.  The reason is that the
	compiler (tree-walker) could compile the program from the AST as
	much as possible.  In this case, it could at least enter the
	function signature for the failed-to-compile function into the
	symbol table so that some later function can call the failed
	function and not generate a "function not declared" error.

	But how to communicate the "failed-ness" from the parser to the
	tree-parser?  Is there a standard-practice "ANTLR way" to do
	this?  If not, I've been thinking along the lines of
	introducing an "ERROR" token (yes, like yacc) and "patching" it
	into the tree.

		funcBody
		    : '{'! expr '}'!
		    ;
		    exception
		    catch [ TokenStreamRecognitionException e ] {
		    	## = #([ERROR,"ERROR"]);
		    }

	Then in the tree-parser I can do:

		functionDecl
		    : #( FUNC_DECL IDENT paramList
			( funcBody
			    {
			    	// The normal case
			    }
			| ERROR
			    {
			    	// At least enter the signature into the
				// symbol table.
			    }
			)
		       )
		    ;

	Comments?

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From atripp at comcast.net  Fri Nov 19 15:10:56 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <24D056E8-3779-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <cnlui0+l878@eGroups.com>



Terence,

Here's my 8-page-or-so furiously written diatribe against
treewalkers:
http://jazillian.com/antlr/trees.html

I don't address the Visitor pattern, and I haven't even finished
reading your page and the posted responses. I just thought I'd
get my early, uninformed thoughts down on paper first.
Wouldn't want to let well-argued points that you gurus
make make get in my way of opinions :)

Andy





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From atripp at comcast.net  Fri Nov 19 15:16:09 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Re: simple function call translator
In-Reply-To: <cnla5k+3abq@eGroups.com>
Message-ID: <cnlurp+no45@eGroups.com>



--- In antlr-interest@yahoogroups.com, "jm42163jm" <jmcclain@t...> wrote:
> 
> 
> Howdy, at work, we have a simple rules engine in powerbuilder that 
> reads a condition field, a operator field, a result field and a 
> consequence field from a table. This information is entered to the 
> table via client server app to define when to apply computed fields 
> and field properties (hidden, disabled, etc..) to a client / server 
> screen - similar to a rudimentary workflow e.g. 
> condition field: function(paramter_expression, parameter_ 
> expresion,...)
> 
> operator: standar logical operator 
> 
> result: function(paramter_expression, paramter_ expression,...)
> 
> parameter_expression: could be another function call, a 
> value/variable, or an expression
> 
> the consequence will be a computed field, e.g. function call, a 
> value/variable, or an expression
> 
> we need to be able to translate these powerbuilder function calls 
> into java function calls that reproduce the same functionality
> 
> what tool is best to do this type of translation?
> 
> what do I do since I do not have a formal grammar - I only have the 
> function declarations, and an understanding that this does not have 
> to be completey robust as only a subset of powerbuilder functions are 
> involved and there are no standard programming constructs (loops, 
> conditions, assignments, etc..)?

My advice would be to at least start writing it "by hand" first.
That is, don't bother yet with a lexer or parser, just
write some simple code to do read in your powerbuilder
output and generate the Java code.

Only if you get to the point where you say "this is ridiculous,
the input format is just too complicated for me to write
all this code to handle it"...only then should you resort to
an ANTLR-like tool.

Andy





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Fri Nov 19 16:29:54 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <cnlui0+l878@eGroups.com>
Message-ID: <cnm362+6ema@eGroups.com>



Well, I hassled Ter about his under-analyzing what could and could not
be done with visitors, so I feel perfectly free to complain that you
have mis-analyzed what can and can't be done with trees.

First of all, your "tree library" description and examples are exactly
the sort of thing that one does with a tree walker and cannot be done
generically by hand (declarations have syntax and are identified by
subtree structure--syntax and semantics vary across languages, so
defining a canonical structure can be difficult). 
"getAllGlobalVars()" is easily done as a tree walker pass; I do that
sort of thing as a matter of routine unless I have to worry about
speed, and I'm hardly alone in that.  The renaming is then just a
second pass.  Your "bottom up" algorithm is messier (findDeclaration()
will be pretty ugly) and will be slower than the approach of
constructing symbol tables during a tree walk and then checking
VAR_REFS against the local and global symbol tables as they are
encountered.

I don't understand your TreeStack.  It sort of sounds like an
attribute stack, but not quite.

As to the multiple passes:  multiple tree walker passes are the norm,
not something that is difficult to do.  That is one of the real
strengths of ANTLR syntax trees, and is a feature that separates ANTLR
from translator generators that use parse trees.  The first
applications of SORCERER involved a 13-pass FORTRAN translator that
Ter did and a 7-pass Pascal-to-Ada translator by Gary Funck.

Your pretty-printer example is the sort of thing that can be done with
either a visitor or tree walker without much trouble; in the latter
case, I would usually either factor out the sets of alternative node
types so that the actions are not much different than your case
statement and are clustered in only a few rules or use a heteroAST
with type-specific toString() variants.

In your "Limitations" example, you manually match a subtree and decide
how to print accordingly.  The equivalent tree snippet is something like

ad :
    #( ARRAY_DECLARATOR
        ( { out.print("["); } e:EXPR { out.print(e.toString() + "]"); }
        | i:ID { out.print(#i.toString() + "[]"); }
        )
    )
    ;

Note that you can put actions in reasonable places--they won't execute
unless matching is successful.

In short, I think that you still haven't yet grokked the power of trees.

--Loring

--- In antlr-interest@yahoogroups.com, "atripp54321" <atripp@c...> wrote:
> 
> Terence,
> 
> Here's my 8-page-or-so furiously written diatribe against
> treewalkers:
> http://jazillian.com/antlr/trees.html
> 
> I don't address the Visitor pattern, and I haven't even finished
> reading your page and the posted responses. I just thought I'd
> get my early, uninformed thoughts down on paper first.
> Wouldn't want to let well-argued points that you gurus
> make make get in my way of opinions :)
> 
> Andy





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Fri Nov 19 17:17:01 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Re: patching a tree (recoverability)
In-Reply-To: <Pine.LNX.4.44.0411191423450.5076-100000@g4.pauljlucas.org>
Message-ID: <cnm5ud+uhme@eGroups.com>



--- In antlr-interest@yahoogroups.com, "Paul J. Lucas"
<pauljlucas@m...> wrote:
> 	Suppose I want to parse and compile as much as possible.  An
> 	example is having:
> 
> 		funcDecl
> 		    : DECLARE! FUNCTION^ IDENT '('! paramList ')'! funcBody ';'!
> 		    	{
> 			    ##.setType( FUNC_DECL );
> 			}
> 		    ;
> 
> 	I want to recover if something doesn't parse in funcBody and
> 	produce a tree not having a body.  The reason is that the
> 	compiler (tree-walker) could compile the program from the AST as
> 	much as possible.  In this case, it could at least enter the
> 	function signature for the failed-to-compile function into the
> 	symbol table so that some later function can call the failed
> 	function and not generate a "function not declared" error.

Recovery is your first tough problem.  ANTLR error handling will allow
you to intercept the error within your grammar.  The next problem is
to resynch the token stream.  If you are looking at a fragment A B C D
and an error is thrown because C is unexpected, then you still have D
to deal with if it was part of the syntactic construct being matched
(that is, you need to throw away D because you can recognized E F G).
 So you will usually need to consume a few tokens before getting back
in synch.  Resynching is very syntax-dependent; if you look at
antlr.g, you can see places where a few abortive attempts were made to
achieve grammar error recovery.

> 	But how to communicate the "failed-ness" from the parser to the
> 	tree-parser?  Is there a standard-practice "ANTLR way" to do
> 	this?  If not, I've been thinking along the lines of
> 	introducing an "ERROR" token (yes, like yacc) and "patching" it
> 	into the tree.
>
> 		funcBody
> 		    : '{'! expr '}'!
> 		    ;
> 		    exception
> 		    catch [ TokenStreamRecognitionException e ] {
> 		    	## = #([ERROR,"ERROR"]);
> 		    }
> 
> 	Then in the tree-parser I can do:
> 
> 		functionDecl
> 		    : #( FUNC_DECL IDENT paramList
> 			( funcBody
> 			    {
> 			    	// The normal case
> 			    }
> 			| ERROR
> 			    {
> 			    	// At least enter the signature into the
> 				// symbol table.
> 			    }
> 			)
> 		       )
> 		    ;
> 
> 	Comments?

This could work--it depends very much on the language problem you are
addressing.  In general, once you have managed to resynch the token
stream, you are in unknown territory from an ANTLR perspective.

--Loring

> 	- Paul





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From atripp at comcast.net  Fri Nov 19 18:36:45 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Re: ANTLR-based Bug Finder
In-Reply-To: <cnj6fo+9r0m@eGroups.com>
Message-ID: <cnmajt+jeb6@eGroups.com>



--- In antlr-interest@yahoogroups.com, "Steve" <stevegianvecchio@h...>
wrote:
> 
> Hi everyone,
> 
> I am just finishing work on multi-language error detection tool
built 
> using ANTLR. The tool analyzes ASTs built from Java, Pascal, and C 
> grammars to find logic errors.
> 
> I'd like to take this error detection tool and catch some bugs.
This 
> isn't an ANTLR question, just asking for suggestions.  What types
of 
> common logic errors are easy to find in real world programs? I can 
> find many different types of simple rule-based errors with the tool 
> such as:
> 
> Never divide by 0. 
> Never dereference a null pointer. 
> Never use an uninitialized variable. 
> 
> The tool currently works for Java and Pascal.

Sorry, I have no answers...just questions...
So you're doing control-flow analysis?
Do you have any documentation on how it works?
What's the product called, and what license is it under?

Andy





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From stevegianvecchio at hotmail.com  Fri Nov 19 23:13:00 2004
From: stevegianvecchio at hotmail.com (Steve)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Re: ANTLR-based Bug Finder
In-Reply-To: <cnmajt+jeb6@eGroups.com>
Message-ID: <cnmqps+ftrh@eGroups.com>



--- In antlr-interest@yahoogroups.com, "atripp54321" <atripp@c...> 
wrote:
> 
> --- In antlr-interest@yahoogroups.com, "Steve" 
<stevegianvecchio@h...>
> wrote:
> > 
> > Hi everyone,
> > 
> > I am just finishing work on multi-language error detection tool
> built 
> > using ANTLR. The tool analyzes ASTs built from Java, Pascal, and 
C 
> > grammars to find logic errors.
> > 
> > I'd like to take this error detection tool and catch some bugs.
> This 
> > isn't an ANTLR question, just asking for suggestions.  What types
> of 
> > common logic errors are easy to find in real world programs? I 
can 
> > find many different types of simple rule-based errors with the 
tool 
> > such as:
> > 
> > Never divide by 0. 
> > Never dereference a null pointer. 
> > Never use an uninitialized variable. 
> > 
> > The tool currently works for Java and Pascal.
> 
> Sorry, I have no answers...just questions...
> So you're doing control-flow analysis?
> Do you have any documentation on how it works?
> What's the product called, and what license is it under?
> 
> Andy

Hi Andy,

The rules I mentioned above are checked using very simple value 
tracking. There is no flow control being done.

The work that I am currently finishing is the first functional 
version of the tool. This is basically a proof-of-concept and needs 
to be tested against real world code to see if my approach works. If 
it works well I plan on releasing a later version into the public 
domain. The project is unnamed and mainly undocumented at this point.

Steve





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From joanpujol at gmail.com  Sat Nov 20 01:57:33 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] StringTemplate and newlines
Message-ID: <d2d18a1041120015730cb341b@mail.gmail.com>


Hi,

I'm using StringTemplate to generate Java code from my compiler (that
also translates code).
And I'm very happy with it. But I have some problems with newlines
that I don't know how to resolve.


Problem 1 (The easy one)

My grammar is like

algorithm
  const
    ...
    ...
   fconst
   var
    ...
   fvar
...

where const ... fconst is optional.

Then my template for algorithm is:

algorithm(const,var...)::= <<
   class Algorithm {
     ....
    <if(const)><const:{<it.type> <it.name>;};separator="\n"><endif>
  ...
>>

The problem is that If I haven't constants then I get a newline, if I
haven't vars another, and etc. I can solve it putting all in a single
line. But then the grammar isn't readable


Problem 2 (The hard one)

My language have input/output parameters for methods and basic types.
Then to translate this to java I do something like:

f ( output integer i) ->  void f(TypeEncapsulator _i)
{
  int i=_i.deencapsulateInt();
  ...
  _i.encapsulateInt();
}

And for expression that calls a method that is where I have te problem:
I want to call f(i)  // where i is output parameter
{ TypeEncapsulator _i=new TypeEncapsulator(i);
   f(_i);
   i=_i.deencapsulateInt();
}


Well I tested two templates with function calls. To do the things more
easy, I have one template with functioncalls that have at least one
output parameter, and other for normal ones (without any output
parameter)

Template 1:
outputfunctioncall(name,parameter)::=  <<
{ <if(parameter.isoutput)> <parameter:{TypeEncapsulator _<it.name>=
.... };separator="\n"> <endif>  //The encapsulator

<name>(<parameter:{...  //The function call   

   <if(parameter.isoutput)> <parameter: ...//The deencapsulator


This works well when all the parameters are output ones. But when some
method only has some output parameters, and the last parameter is an
input one. All the info that is inside <if(parameter.isoutput)> is
lost.

The Template 2 used to solve this is to use:
<parameter:{<if(it.isoutput)> TypeEncapsulator _....};separator="\n">...
...

Then it works, but then the problem is that for each non output
parameter I get a new line.

A lot of thanks in advance.
  
-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Sat Nov 20 09:52:10 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] StringTemplate and newlines
In-Reply-To: <d2d18a1041120015730cb341b@mail.gmail.com>
References: <d2d18a1041120015730cb341b@mail.gmail.com>
Message-ID: <E6C008BC-3B1C-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 20, 2004, at 1:57 AM, Joan Pujol wrote:
> Hi,
>
> I'm using StringTemplate to generate Java code from my compiler (that
> also translates code).
> And I'm very happy with it. But I have some problems with newlines
> that I don't know how to resolve.

I suspect that my 2.1 beta will make you happy ;)

> Problem 1 (The easy one)
>
> My grammar is like
>
> algorithm
>   const
>     ...
>     ...
>    fconst
>    var
>     ...
>    fvar
> ...
>
> where const ... fconst is optional.
>
> Then my template for algorithm is:
>
> algorithm(const,var...)::= <<
>    class Algorithm {
>      ....
>     <if(const)><const:{<it.type> <it.name>;};separator="\n"><endif>
>   ...
>>>

Hmm...it seems like I need another rule that says something if entire 
line is an expression that does not evaluate to anything, then skip the 
line.  This like:

<foo>
<bar>

will get you two blank links if you don't have values there.  
Hmm...might be hard to detect for the <if> stuff.  I'm adding to list.

> The problem is that If I haven't constants then I get a newline, if I
> haven't vars another, and etc. I can solve it putting all in a single
> line. But then the grammar isn't readable

Agreed; i'm working hard on 2.1 to make it be better about newlines.

> Problem 2 (The hard one)
>
> My language have input/output parameters for methods and basic types.
> Then to translate this to java I do something like:
>
> f ( output integer i) ->  void f(TypeEncapsulator _i)
> {
>   int i=_i.deencapsulateInt();
>   ...
>   _i.encapsulateInt();
> }
>
> And for expression that calls a method that is where I have te problem:
> I want to call f(i)  // where i is output parameter
> { TypeEncapsulator _i=new TypeEncapsulator(i);
>    f(_i);
>    i=_i.deencapsulateInt();
> }
>
>
> Well I tested two templates with function calls. To do the things more
> easy, I have one template with functioncalls that have at least one
> output parameter, and other for normal ones (without any output
> parameter)
>
> Template 1:
> outputfunctioncall(name,parameter)::=  <<
> { <if(parameter.isoutput)> <parameter:{TypeEncapsulator _<it.name>=
> .... };separator="\n"> <endif>  //The encapsulator
>
> <name>(<parameter:{...  //The function call
>
>    <if(parameter.isoutput)> <parameter: ...//The deencapsulator
>
>
> This works well when all the parameters are output ones. But when some
> method only has some output parameters, and the last parameter is an
> input one. All the info that is inside <if(parameter.isoutput)> is
> lost.
>
> The Template 2 used to solve this is to use:
> <parameter:{<if(it.isoutput)> TypeEncapsulator 
> _....};separator="\n">...
> ...
>
> Then it works, but then the problem is that for each non output
> parameter I get a new line.
>
> A lot of thanks in advance.

It would take me a while to figure precisely your problem here.  It 
seems like a similar problem as above: an expression on a line by 
itself that generates no output gets a newline.  Is that correct?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From atripp at comcast.net  Sat Nov 20 10:57:29 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <cnm362+6ema@eGroups.com>
Message-ID: <cno42p+28c5@eGroups.com>



--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> 
> Well, I hassled Ter about his under-analyzing what could and could not
> be done with visitors, so I feel perfectly free to complain that you
> have mis-analyzed what can and can't be done with trees.

I tried not to say that certain things can't be done with treewalkers.
I explained how I did them without a treewalker and said it
didn't look (to me) to be as easy with a treewalker.
I was hoping someone would take my examples, show how they
can be done with a treewalker, so that we can compare the two.

Take my whole JavaEmitter thing. If that's so easy to do
with a treewalker, why hasn't anyone done it, either in
the years before I wrote mine or since then? It only
took me a day or two, can't someone take a day and write a treewalker
to emit Java code, so we can compare the two?

> 
> First of all, your "tree library" description and examples are exactly
> the sort of thing that one does with a tree walker and cannot be done
> generically by hand (declarations have syntax and are identified by
> subtree structure--syntax and semantics vary across languages, so
> defining a canonical structure can be difficult).

Could you give an example of something that 
you think can't be done "by hand"?
 
> "getAllGlobalVars()" is easily done as a tree walker pass; I do that
> sort of thing as a matter of routine unless I have to worry about
> speed, and I'm hardly alone in that. 
 
It's easily done by hand, too, without even having to know
any grammar syntax.

> The renaming is then just a
> second pass.  Your "bottom up" algorithm is messier (findDeclaration()
> will be pretty ugly) and will be slower than the approach of
> constructing symbol tables during a tree walk and then checking
> VAR_REFS against the local and global symbol tables as they are
> encountered.

I agree that it will be slower in general, but suppose you
are applying hundreds of changes, any one of which can
affect the symbol table. You'd need to either keep re-generating
the symbol table (which would be slow), or write lots of
code that keeps the symbol table up to date with the numerous
AST changes.

The general principle is "don't duplicate data";
that the symbol table contains a subset of
data from the AST...it only exists for efficiency. Accessing
the AST directly rather than using a symbol table
would (IMO) require less code. Whether you need the
added speed of the symbol table depends on the application.

> 
> I don't understand your TreeStack.  It sort of sounds like an
> attribute stack, but not quite.

Just saying that you need to keep "state" information as you
walk the tree. For example, are we currently inside a function
definition or not? Is this the first reference to this variable?
etc.

> 
> As to the multiple passes:  multiple tree walker passes are the norm,
> not something that is difficult to do.  That is one of the real
> strengths of ANTLR syntax trees, and is a feature that separates ANTLR
> from translator generators that use parse trees.  The first
> applications of SORCERER involved a 13-pass FORTRAN translator that
> Ter did and a 7-pass Pascal-to-Ada translator by Gary Funck.

OK.

> 
> Your pretty-printer example is the sort of thing that can be done with
> either a visitor or tree walker without much trouble; in the latter
> case, I would usually either factor out the sets of alternative node
> types so that the actions are not much different than your case
> statement and are clustered in only a few rules or use a heteroAST
> with type-specific toString() variants.

So then what about the specific problems I pointed out
under "Comparing approaches by analyzing ease of change"?
For example, what about the spacing issue I mention, and 
how would you change the ordering of printing of AST children?
I'm not saying it can't be done with a treewalker, I'm just
saying I think it will require some real thought, whereas
with vanilla Java code, these things are trivial.

> 
> In your "Limitations" example, you manually match a subtree and decide
> how to print accordingly.  The equivalent tree snippet is something like
> 
> ad :
>     #( ARRAY_DECLARATOR
>         ( { out.print("["); } e:EXPR { out.print(e.toString() + "]"); }
>         | i:ID { out.print(#i.toString() + "[]"); }
>         )
>     )
>     ;

Gack! So for comparison, here's my equivalent non-treewalker code:
case ARRAY_DECLARATOR:
    if (child1.getType() == EXPR) {
        out.print("[");
        print(child1);
        out.print("]");
    }
    else {
        print(child1);
        out.print("[]");
    }
    break;

99.9% of Java developers (i.e. the non-ANTLR experts) will find
the second one easier to write, to read, and to maintain.
Try to see that treewalker code through the eyes of
someone who doesn't know ANTLR or is just an ANTLR newbie.

> 
> Note that you can put actions in reasonable places--they won't execute
> unless matching is successful.
> 
> In short, I think that you still haven't yet grokked the power of trees.

Yes, probably not. I'm sure they're quite powerful, but I'm more
concerned with ease-of-development for ANTLR newbies and
those who don't know ANTLR at all (and don't really care to learn it).

Andy





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Sat Nov 20 11:36:33 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <cno42p+28c5@eGroups.com>
References: <cno42p+28c5@eGroups.com>
Message-ID: <7C34B436-3B2B-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 20, 2004, at 10:57 AM, atripp54321 wrote:
> Take my whole JavaEmitter thing. If that's so easy to do
> with a treewalker, why hasn't anyone done it, either in
> the years before I wrote mine or since then? It only
> took me a day or two, can't someone take a day and write a treewalker
> to emit Java code, so we can compare the two?

Hi Andy,

I'm on a coding frenzy on 3.0 so I'll have to comment in detail later, 
but I built an emitter for my CS652 students doing the "Java + C++ 
style comments" project.  Trivial but a hassle.  Took me a few hours 
rather than a day or two.  Want it?  559 lines and handles precedence 
properly so that extra parentheses are not generated spuriously (well, 
that was my intent) ;)

As you point out further in your response to Loring, the tree grammar 
one is sometimes less obvious to the newbie for sure!

I'll counter by saying we shouldn't be printing back this way. ;)  
Templates are the name of the game for generating output :)  If the 
output is very similar to the input, a better way is to just do my 
tricks: either TokenStreamRewriteEngine or track token order in the 
tree so you can dump automatically :)

Back to coding... (see next email message) :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Sat Nov 20 11:38:28 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] error message internationalization
Message-ID: <C04D171A-3B2B-11D9-A398-000A95891192@cs.usfca.edu>


Howdy,

I'm working on the internationalization of the error messages for 
antlr.  It even pays attention to file encoding to make message files 
work for non-8 bit message files.  Further, the message files are 
actually string template group files (John Mitchell's idea I think) so 
you can do easy message rewriting.  For example, here is the start of 
my english/US default message file:

group en_US;

// file errors
CANNOT_CLOSE_FILE(arg) ::= "cannot close file <arg>: <exception>"
....

The code now does:

ErrorManager.error(ErrorManager.CANNOT_CLOSE_FILE, fileName, ioe);

so there are no hardcoded error messages.  Can't wait to see error 
messages in Mandarin and Russian!

Cool, eh?  Man, that StringTemplate is just plain useful!  Woohoo!  I'm 
racing to prepare for the hotshot GUI guy, Jean Bovet, who will start 
playing around with ANTLR 3.0 shortly. :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From joanpujol at gmail.com  Sat Nov 20 12:41:13 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] StringTemplate and newlines
In-Reply-To: <E6C008BC-3B1C-11D9-A398-000A95891192@cs.usfca.edu>
References: <d2d18a1041120015730cb341b@mail.gmail.com>
	 <E6C008BC-3B1C-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <d2d18a1041120124112f901ea@mail.gmail.com>


On Sat, 20 Nov 2004 09:52:10 -0800, Terence Parr <parrt@cs.usfca.edu> wrote:

> I suspect that my 2.1 beta will make you happy ;)
WoooW. Very Happy yes ;)

> It would take me a while to figure precisely your problem here.  It
> seems like a similar problem as above: an expression on a line by
> itself that generates no output gets a newline.  Is that correct?

If I use the template2 (the one that works) yes. But for my template1
that doesn't works it's not the problem. I will try to be more
general:

The template 1 is :

template1(param1,param2) ::= //Where param2 is <param2:{parama,paramb}>

In my code I set param1 one time and param2 several times.
For some param2 parama is true and for some others parama is false

then if the template is:
<<
    <if(param2.parama)> <param2:{ <it.parama> <it.paramb>}> <endif>
    <param1>
     ....
>>

The problem is that if I set some param2 that have parama true and
then I set one param2 that  has parama to false all the info putted
inside the if is lost.
Thus I have to put the if inside the <param2{, that is what I do in my
template2, and the problem then are the newlines.

Cheers,

-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Sat Nov 20 15:13:14 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <cno42p+28c5@eGroups.com>
Message-ID: <cnoj2a+hgh5@eGroups.com>



--- In antlr-interest@yahoogroups.com, "atripp54321" <atripp@c...> wrote:
> 
> --- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> > 
> > Well, I hassled Ter about his under-analyzing what could and could not
> > be done with visitors, so I feel perfectly free to complain that you
> > have mis-analyzed what can and can't be done with trees.
> 
> I tried not to say that certain things can't be done with treewalkers.
> I explained how I did them without a treewalker and said it
> didn't look (to me) to be as easy with a treewalker.
> I was hoping someone would take my examples, show how they
> can be done with a treewalker, so that we can compare the two.
> 
> Take my whole JavaEmitter thing. If that's so easy to do
> with a treewalker, why hasn't anyone done it, either in
> the years before I wrote mine or since then? It only
> took me a day or two, can't someone take a day and write a treewalker
> to emit Java code, so we can compare the two?

Google doesn't exactly find your JavaEmitter in widespread use, and
the documentation is too sparse to make it clear why you would want to
use it as a Java generator.  What does the generated Java code do?  As
to the AST pretty-printing:  it is easy enough to write a
pretty-printing visitor.  I don't use them, but that is mainly because
a generated tree grammar does the same thing and is a better basis for
iterating tree structure with.

> > 
> > First of all, your "tree library" description and examples are exactly
> > the sort of thing that one does with a tree walker and cannot be done
> > generically by hand (declarations have syntax and are identified by
> > subtree structure--syntax and semantics vary across languages, so
> > defining a canonical structure can be difficult).
> 
> Could you give an example of something that 
> you think can't be done "by hand"?

It is not that it cannot be done by hand--it cannot be done
generically, a key requirement for a library function.

> > "getAllGlobalVars()" is easily done as a tree walker pass; I do that
> > sort of thing as a matter of routine unless I have to worry about
> > speed, and I'm hardly alone in that. 
>  
> It's easily done by hand, too, without even having to know
> any grammar syntax.

Not true; you have to know the form and type content of the subtree
you are using to identify a variable.  That is syntax.

> > The renaming is then just a
> > second pass.  Your "bottom up" algorithm is messier (findDeclaration()
> > will be pretty ugly) and will be slower than the approach of
> > constructing symbol tables during a tree walk and then checking
> > VAR_REFS against the local and global symbol tables as they are
> > encountered.
> 
> I agree that it will be slower in general, but suppose you
> are applying hundreds of changes, any one of which can
> affect the symbol table. You'd need to either keep re-generating
> the symbol table (which would be slow), or write lots of
> code that keeps the symbol table up to date with the numerous
> AST changes.

The performance gap then widens considerably--symbol table
construction during a treewalk is a dynamic process, but all it really
amounts to is inserting data structures in a hash table (possibly with
additional support for removing local variables en masse) and either
replacing the data structure contents as needed or deleting and
re-inserting a specific element.  Symbol tables are a handy tool, and
are quite efficient when used correctly.

> The general principle is "don't duplicate data";
> that the symbol table contains a subset of
> data from the AST...it only exists for efficiency. Accessing
> the AST directly rather than using a symbol table
> would (IMO) require less code. Whether you need the
> added speed of the symbol table depends on the application.

This is sometimes true, but it is more often true that symbol tables
incorporate a semantic interpretation of parts of the AST.  Take a
global variable, for example:  to construct a symbol, you have to
decode type, name, and other properties from the AST.  The only
reduction in code from using the AST directly is entry into the symbol
table and some of the symbol construction (packaging, not analysis). 
The penalty for not doing that is to have the analysis code repeated
multiple times.

> > 
> > I don't understand your TreeStack.  It sort of sounds like an
> > attribute stack, but not quite.
> 
> Just saying that you need to keep "state" information as you
> walk the tree. For example, are we currently inside a function
> definition or not? Is this the first reference to this variable?
> etc.
> 
> > 
> > As to the multiple passes:  multiple tree walker passes are the norm,
> > not something that is difficult to do.  That is one of the real
> > strengths of ANTLR syntax trees, and is a feature that separates ANTLR
> > from translator generators that use parse trees.  The first
> > applications of SORCERER involved a 13-pass FORTRAN translator that
> > Ter did and a 7-pass Pascal-to-Ada translator by Gary Funck.
> 
> OK.
> 
> > 
> > Your pretty-printer example is the sort of thing that can be done with
> > either a visitor or tree walker without much trouble; in the latter
> > case, I would usually either factor out the sets of alternative node
> > types so that the actions are not much different than your case
> > statement and are clustered in only a few rules or use a heteroAST
> > with type-specific toString() variants.
> 
> So then what about the specific problems I pointed out
> under "Comparing approaches by analyzing ease of change"?
> For example, what about the spacing issue I mention, and 
> how would you change the ordering of printing of AST children?
> I'm not saying it can't be done with a treewalker, I'm just
> saying I think it will require some real thought, whereas
> with vanilla Java code, these things are trivial.

Tree grammars are easier to change:  the action additions are
equivalent to the code additions in your case statements.  The
specific example you give can be handled by building up strings for
printing (something that 3.0 will automate), by doing separate walks
over subtrees from within actions, or by further transformation.

Solving these types of problem is easy:  the issue with printing is
almost always a matter of fidding with the details until the output
"looks good" (esthetics rather than implementation).

> > 
> > In your "Limitations" example, you manually match a subtree and decide
> > how to print accordingly.  The equivalent tree snippet is
something like
> > 
> > ad :
> >     #( ARRAY_DECLARATOR
> >         ( { out.print("["); } e:EXPR { out.print(e.toString() +
"]"); }
> >         | i:ID { out.print(#i.toString() + "[]"); }
> >         )
> >     )
> >     ;
> 
> Gack! So for comparison, here's my equivalent non-treewalker code:
> case ARRAY_DECLARATOR:
>     if (child1.getType() == EXPR) {
>         out.print("[");
>         print(child1);
>         out.print("]");
>     }
>     else {
>         print(child1);
>         out.print("[]");
>     }
>     break;
> 
> 99.9% of Java developers (i.e. the non-ANTLR experts) will find
> the second one easier to write, to read, and to maintain.
> Try to see that treewalker code through the eyes of
> someone who doesn't know ANTLR or is just an ANTLR newbie.

Well, I could have formatted the tree snippet for readability instead
of compactness--this is a fairly long post.  And I probably should not
have included the toString()'s where you omitted them--that does
reduce clarity.  And were this not a toy example, EXPR would be a
subtree.  None of that is particularly relevant; it strays from your
original claim that this is difficult to do with tree grammars when in
fact it is easy.

> > 
> > Note that you can put actions in reasonable places--they won't execute
> > unless matching is successful.
> > 
> > In short, I think that you still haven't yet grokked the power of
trees.
> 
> Yes, probably not. I'm sure they're quite powerful, but I'm more
> concerned with ease-of-development for ANTLR newbies and
> those who don't know ANTLR at all (and don't really care to learn it).

Trees and tree grammars are exceedingly powerful and easy to use
(especially with automated tree generation, coming soon with 2.8). 
However, they do seem esoteric at first.  That is largely due to
habituation to procedural languages; once you shift to a syntax-driven
language paradigm (ANTLR and other BNF and EBNF language recognizers),
then trees are a natural next step.  Because of the difficulties in
making this paradigm shift, newbies usually don't use trees unless
they already have a language translation background.  Once you have
made that shift, though, trees and tree grammars are an essential part
of ANTLR usage.

--Loring


> Andy





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Sat Nov 20 18:43:04 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <cnlui0+l878@eGroups.com>
Message-ID: <cnovbo+cb4u@eGroups.com>



--- In antlr-interest@yahoogroups.com, "atripp54321" <atripp@c...> wrote:
> 
> Terence,
> 
> Here's my 8-page-or-so furiously written diatribe against
> treewalkers:
> http://jazillian.com/antlr/trees.html
> 
> I don't address the Visitor pattern, and I haven't even finished
> reading your page and the posted responses. I just thought I'd
> get my early, uninformed thoughts down on paper first.
> Wouldn't want to let well-argued points that you gurus
> make make get in my way of opinions :)
> 
> Andy

Hi Andy,

Read your paper and my overall impression is this:

Yes, anything that an ANTLR tree parser can do can also be done in
other ways including the tree-library approach that you describe.
Nevertheless, I consider the tree-grammar approach to be the "best"
choice from an engineering point of view. You get the most bang for
the least amount of work. Alexey's TreeDL approach also has some
positives from an engineering pov.

My other impression was that you haven't grokked the tree-grammar
approach yet. It can take a while as my posts to the list attest but,
it's time well spent if you intend to build complex language
analysis/transformation tools with ANTLR.

Section-secific comments:
=========================

1. The Complex Case: Tranforming a C AST to a Java AST
======================================================

The tree-library approaches you outline rely on methods that would
seem to involve significant local (and/or global) tree
navigation/searching and analysis. Take getAllGlobalVarNames() for
instance - in the general case it would have to search the entire
input AST (or AST forest in the multi-file case) to build up this
list. Similarly for getAllLocalVarNames (localized search) and
findDeclaration (global search).

With the typical tree-grammar approach, a symbol table is built
(either during parsing or as a separate phase) and is then use to
answer queries such as "is this a global var declaration?" or "get all
global var declarations" very efficiently. Some times, the structure
of the tree encodes such information. For instance, it may be that
global var declarations are always children COMPILATION_UNIT nodes. So
you might have:

compilationUnit
 :  #( COMPILATION_UNIT
       ( .......
       |  variableDeclaration[VarDeclarationKind.Global]
       | ......
       )*
    )
 ;
 
statementList
 :  #( STMT_LIST
       ( .......
       |  variableDeclaration[VarDeclarationKind.Local]
       | ......
       )*
    )
 ;
 
variableDeclaration [VarDeclarationKind varKind]
 : #( VARIABLE_DEF type
      ( ID ( variableInitialization )?
        {
           if (varKind == VarDeclarationKind.Global)
           {
             // process global variable decl
           }
           else
           {
             // process non-global variable decl
           }
        }
      )*
    )
  ;

To be able to answer queries such as "get all VAR_REF nodes that refer
to this declaration" efficiently, you would have added appropriate
attributes during the symbol table construction pass(es). In fact, it
is helpful to think of the information in the symbol table as
attributes of nodes in the AST (which is what they are in fact). They
are just designed for very fast lookup.


2a. Keeping the TreeStack and SymbolTable in sync with the AST
==============================================================

I don't understand the need for a TreeStack. If what we are talking
about is renaming a local variable then, following on from the grammar
snippets in my previous comments:

variableDeclaration [VarDeclarationKind varKind]
 : #( VARIABLE_DEF type
      ( varid:ID ( variableInitialization )?
        {
           if (varKind == VarDeclarationKind.Global)
           {
             // process global variable decl
           }
           else
           {
             // process non-global variable decl
             IBinding varDecl = #varid.Binding;
             if (thisVarNeedsRenaming(varDecl,....))
             {
             	string....
             	renameLocalVarTo(varDecl, #varid, getNewNameFor(varDecl));
             }
           }
        }
      )*
    )
  ;

Where renameLocalVarTo() might is a method that looks something like:

void renameLocalVarTo(IBinding decl, ISimpleIdentNode node, string
newName)
{
   IList refNodes = node.getAllReferringNodes();
   foreach(INode refnode in refNodes)
   {
      refnode.setText(newName);
   }
   node.setText(newName);
   
   decl.Scope.rename(decl, newName);  // a) removes decl and it's key
from scope dictionary
                                      // b) re-inserts decl with a new key
}


2b. Do you want methods in AST or TreeStack?
============================================

decl.Scope.getAllBindings() or similar should give you a list of all
names in the scope. This isn't a tree-grammar approach benefit. ANTLR
does nothing to help or hinder the requirement that the symbol table
code has to be written.

Since the symbol table stores extended node attributes, there isn't a
question of which is more "natural". The binding attribute on the node
is where the actions starts:
  IBinding decl  = #varid.Binding;
  IList bindings = decl.Scope.getAllBindings();


2c. Sometimes you need multiple passes
======================================

Given all the information that the symbol table construction phase
accumulates, it would be pretty easy to provide a getAllGlobalVar()
method on the symbol table object itself. Combined with the
getAllReferringNodes() method on the nodes, what you propose is
trivially accomplished. And without expensive (re-)calculation.


3. The Simple Case: PrettyPrinting an AST
=========================================

There are two general approaches to pretty printing with a tree-grammar:
a) Embed the knowledge of how to print each AST element within the
tree-grammar
     builtInType [Writer output]
      :   "void"	{ output.write("void"); }
      |   "boolean"	{ output.write("boolean"); }
          ........
      ;

b) Use hetero-AST classes that know how to print themselves to a
stream or writer. The tree-grammar simple invokes the class's print()
method and supplies the stream or writer.
     builtInType [Writer output]
      :   v:"void"	{#v.print(output);}
      |   b:"boolean"	{#b.print(output);}
          ........
      ;


4. Comparing approaches by analyzing ease of change
===================================================

In your third change - we want three blank lines after the "package"
line instead of two - I can't understand why there is any confusion in
the tree-grammar approach. If you are adding lines *after* the output
from the package rule and, the rootID rule calls the package rule then
the change would be in the rootID rule. In your description, it is
clear that the rootID rule prints the current two lines in any case.

In your fourth change - we want to change the order of printing...and
print the static block before the variable declarations for example -
you can simply employ multiple output writers. Buffer all static
blocks in one writer, all variable declarations in another etc. At the
end print contents of the various writers in any order you wish. No
need to modify the AST structure.


5. Limitations of TreeWalkers
=============================

I don't see a tree-grammar limitation here Andy. I may be wrong but,
isn't the real problem that "a[3]" is an array access while "int[] x"
is an array declaration?. If I am right they would have difference AST
representations in any case.

In any case, I can't provide a tree-grammar equivalent of your sample
without knowing what the child of the ARRAY_DECLARATOR is when it
isn't an EXPR. In other words without knowing a bit more about your
tree's grammar.


6. Contrasting the approaches
=============================

1. Code generation isn't magic. We all use it quite happily for lexers
and parsers for instance. The same benefits exist for tree parsers.

2. It can be argued that the tree-grammar approach actually encourages
your "keep related code together" maxim. All the code (excluding
library code) that applies to a phase of your transformation is kept
together in one file - the grammar file.

3. Complex tools require training investment before you can use then
effectively. Having invested in training to be able to ANTLR notation
for specifying lexers and parsers, tree parsers are the next logical step.

4. The comments about debugging apply equally to generated tree
parsers and hand-written tree walkers (they are often very similar).
The tree structure is the same in any case so print the AST as you please.

5. ANTLR support for hetero-ASTs could be improved but nothing you
have mentioned so far is beyond the support ANTLR 2.7.4's hetero-AST
support. Can you give an example where this is important?


7. Summary
==========

All I can say is that the two approaches you present here are tools
for getting a job done. If you've invested the time to learn both
approaches and you feel the tree-library approach offers you more then
by all means use it. 

I suspect however that you are yet to fully grok the tree-grammar
approach. What information or resources would help you to better
understand the tree-grammar approach?. Perhaps knowing this would help
in making ANTLR v3 docs even more useful.

Cheers!

Micheal
ANTLR/C#






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Sat Nov 20 19:14:58 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <cno42p+28c5@eGroups.com>
Message-ID: <cnp17i+j0r8@eGroups.com>



--- In antlr-interest@yahoogroups.com, "atripp54321" <atripp@c...> wrote:

> Take my whole JavaEmitter thing. If that's so easy to do
> with a treewalker, why hasn't anyone done it, either in
> the years before I wrote mine or since then? It only
> took me a day or two, can't someone take a day and write a treewalker
> to emit Java code, so we can compare the two?

Google for "jparse". This project has an example of the hetero-node
approach to pretty printing using a treewalker.

> > First of all, your "tree library" description and examples are exactly
> > the sort of thing that one does with a tree walker and cannot be done
> > generically by hand (declarations have syntax and are identified by
> > subtree structure--syntax and semantics vary across languages, so
> > defining a canonical structure can be difficult).
> 
> Could you give an example of something that 
> you think can't be done "by hand"?

It isn't so much it can't be done for a particular case, more like it
can't be [easily] done as a generic set of library routines for all cases.


> > "getAllGlobalVars()" is easily done as a tree walker pass; I do that
> > sort of thing as a matter of routine unless I have to worry about
> > speed, and I'm hardly alone in that. 
>  
> It's easily done by hand, too, without even having to know
> any grammar syntax.

You have to know the tree structure. That is what the grammar encodes.

> > The renaming is then just a
> > second pass.  Your "bottom up" algorithm is messier (findDeclaration()
> > will be pretty ugly) and will be slower than the approach of
> > constructing symbol tables during a tree walk and then checking
> > VAR_REFS against the local and global symbol tables as they are
> > encountered.
> 
> I agree that it will be slower in general, but suppose you
> are applying hundreds of changes, any one of which can
> affect the symbol table. You'd need to either keep re-generating
> the symbol table (which would be slow), or write lots of
> code that keeps the symbol table up to date with the numerous
> AST changes.

Or, you can design the symbol table to be updatable. You change the
affected nodes and ask the symbol table to update the relevant entry.

> The general principle is "don't duplicate data";
> that the symbol table contains a subset of
> data from the AST...it only exists for efficiency. Accessing
> the AST directly rather than using a symbol table
> would (IMO) require less code. Whether you need the
> added speed of the symbol table depends on the application.

The symbol table stores AST node attributes in a format that is
especially fast to query. There isn't any duplication really.

> > I don't understand your TreeStack.  It sort of sounds like an
> > attribute stack, but not quite.
> 
> Just saying that you need to keep "state" information as you
> walk the tree. For example, are we currently inside a function
> definition or not? Is this the first reference to this variable?
> etc.

Use the [symbol] table Luke ;-)

> So then what about the specific problems I pointed out
> under "Comparing approaches by analyzing ease of change"?
> For example, what about the spacing issue I mention, and 
> how would you change the ordering of printing of AST children?
> I'm not saying it can't be done with a treewalker, I'm just
> saying I think it will require some real thought, whereas
> with vanilla Java code, these things are trivial.

See my earlier response to your paper. The code might look something like:

rootID
  :  #( ROOT_ID ......
         ( ....... package { output.write("\n\n\n\"); } ....... )*
     )
  ;

> > In your "Limitations" example, you manually match a subtree and decide
> > how to print accordingly.  The equivalent tree snippet is
something like
> > 
> > ad :
> >     #( ARRAY_DECLARATOR
> >         ( { out.print("["); } e:EXPR { out.print(e.toString() +
"]"); }
> >         | i:ID { out.print(#i.toString() + "[]"); }
> >         )
> >     )
> >     ;
> 
> Gack! So for comparison, here's my equivalent non-treewalker code:
> case ARRAY_DECLARATOR:
>     if (child1.getType() == EXPR) {
>         out.print("[");
>         print(child1);
>         out.print("]");
>     }
>     else {
>         print(child1);
>         out.print("[]");
>     }
>     break;
> 
> 99.9% of Java developers (i.e. the non-ANTLR experts) will find
> the second one easier to write, to read, and to maintain.

Andy this is a fallacious argument. You could say the same of lexer or
parser rules yet most Java developers would rather use a lexer/parser
generator than code them directly in Java.

Grammar tools are...well...tools just like Java. We need to learn how
to use them effectively. Lisp programmers would find the Java code
similarly alien but that doesn't distract from it's usefulness to you
or other java programmers.

In any case, as a Java & ANTLR user, I find the grammar snippet much
more useful and easier/cheaper to maintain. Both are equally readable
to me.

> Try to see that treewalker code through the eyes of
> someone who doesn't know ANTLR or is just an ANTLR newbie.

I'd say such a person simply needs more training about ANTLR. The
question is determining what resources would be most useful i.e.
finding an engineering solution to the production of ANTLR
documentation. Now if only there was a documentation generator grammar
and oracle  ;-)

> > Note that you can put actions in reasonable places--they won't execute
> > unless matching is successful.
> > 
> > In short, I think that you still haven't yet grokked the power of
trees.
> 
> Yes, probably not. I'm sure they're quite powerful, but I'm more
> concerned with ease-of-development for ANTLR newbies and
> those who don't know ANTLR at all (and don't really care to learn it).

It sounds like you are describing people who are happy to do invest
the resources needed to be able to use Java/C#/C++/Python etc
effectively but, are unwilling to do so for ANTLR. I'm not sure there
is any way to help such people short of urging them to learn how to
use ANTLR. Is there?


As for ease of development, just think of the benefits of specifying
lexer and parser using grammars. You get similar benefits for
post-parse analysis and transformation passes from using tree grammars.

Cheers,

Micheal
ANTLR/C#





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Sat Nov 20 19:21:52 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <7C34B436-3B2B-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <cnp1kg+3id2@eGroups.com>



--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:

> Hi Andy,
> 
> I'm on a coding frenzy on 3.0 so I'll have to comment in detail later, 
> but I built an emitter for my CS652 students doing the "Java + C++ 
> style comments" project.  Trivial but a hassle.  Took me a few hours 
> rather than a day or two.  Want it?  559 lines and handles precedence 
> properly so that extra parentheses are not generated spuriously (well, 
> that was my intent) ;)

I'd like to take a gander ;-)

Add to file sharing maybe?

> As you point out further in your response to Loring, the tree grammar 
> one is sometimes less obvious to the newbie for sure!
> 
> I'll counter by saying we shouldn't be printing back this way. ;)  
> Templates are the name of the game for generating output :)  If the 
> output is very similar to the input, a better way is to just do my 
> tricks: either TokenStreamRewriteEngine or track token order in the 
> tree so you can dump automatically :)

Do you have articles/samples demonstrating the use of string templates
for output (including pretty-printing) too? ;-)

Micheal
ANTLR/C#






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Sat Nov 20 22:07:46 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <cnp1kg+3id2@eGroups.com>
Message-ID: <cnpbbi+3sob@eGroups.com>



--- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...>
wrote:

> Do you have articles/samples demonstrating the use of string templates
> for output (including pretty-printing) too? ;-)

Nevermind, www.stringtemplate.org has links to many. This looks useful:
  http://www.codegeneration.net/tiki-read_article.php?articleId=65

Micheal
ANTLR/C#






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Sat Nov 20 23:16:41 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] ITLS (was: Translators Should Use Tree Grammars)
In-Reply-To: <cnlui0+l878@eGroups.com>
References: <24D056E8-3779-11D9-A398-000A95891192@cs.usfca.edu>
	<cnlui0+l878@eGroups.com>
Message-ID: <16800.16601.192395.192669@despot.non.net>


>>>>> "atripp54321" == atripp54321  <atripp@comcast.net> writes:
[...]

> I don't address the Visitor pattern, and I haven't even finished reading
> your page and the posted responses. I just thought I'd get my early,
> uninformed thoughts down on paper first.  Wouldn't want to let
> well-argued points that you gurus make make get in my way of opinions :)

Good to write down your ideas before getting tainted by the rest of us but
you might want to hold off on "publishing" until after you have read and
digested the existing state of practice. :-( :-)


> Here's my 8-page-or-so furiously written diatribe against treewalkers:
> http://jazillian.com/antlr/trees.html

Well, I don't have time to get into all of the silliness (and other folks
have already done a fair job at it :-) so here's a more general facet that,
alas, is missed completely in your diatribe...


"Programming" is about the creation and transformation of relationships.
That process is mediated by the creation and manipulation of "languages".
I don't care if you call the language a "language" or "protocol" or "API"
or "idiom" or "pattern" or "design" or "framework" or "architecture" or
"paradigm" or etc. (ad nauseum).

One sad fact in the software world is that coders literally get lost in the
"code" and forget all about the fact that they are dealing with
languages. [And please do note carefullly that I wrote "languages",
plural.]

Another sad fact is that most programming language "designers" have fallen
victim to the same problem as the rest and their programming languages are
"designed" (almost uniformly horribly, I must say) for people to write more
incomprehensible "code" rather than languages.


Much of the perennial arguments around visitors vs. tree walkers (and the
attendant homogeneous vs. heterogeneous node typing) is rooted [sorry :-)]
in this fallacy that visitors are somehow intrinsically better because the
programmer has to do all of the work for themselves (which, even if not
explicit, really means that the programmer has all of the freedom that they
want to 'break the rules' and do whatever hacks they want [this is a clear
manifestation, in programmers, of the addiction to the belief of control]).


The crucial fact is that grammars are the best tool that we have to
articulate languages precisely because their focus is the grammar of the
language (which is a combination of lexical; syntactic; and denotational,
situational, and (ultimately) connotational semantics).

Hand-written approaches (to non-grammar-based solutions) are doomed to
hiding and obscuring the fundamental facets of the language as the
"grammar" of the language is dispersed throughout the implementation
details which are expressed through a "general purpose programming
language" (e.g., Java, C, OCaml, etc.)


So, let me end with two (hopefully at least slightly humorous) variations
of a couple of old saws:

	* It's the language, stupid!

	* Any non-trivial program written in a general purpose programming
          language contains ad-hoc, bug-ridden, inarticulate
          implementations of multiple, informally-specified, incomplete
          languages.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Sat Nov 20 23:22:57 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] error message internationalization
In-Reply-To: <C04D171A-3B2B-11D9-A398-000A95891192@cs.usfca.edu>
References: <C04D171A-3B2B-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <16800.16977.902615.373410@despot.non.net>


>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
[...]

> It even pays attention to file encoding to make message files work for
> non-8 bit message files.

Care to translate that into english?  :-)

> Further, the message files are actually string template group files (John
> Mitchell's idea I think) so you can do easy message rewriting.  For
> example, here is the start of my english/US default message file:

Yea!

[...]

> ErrorManager.error(ErrorManager.CANNOT_CLOSE_FILE, fileName, ioe);

And the ErrorManager than e.g., throws a Runtime exception so that the
controlling program can e.g., continue or choke & die as it pleases,
right?


> so there are no hardcoded error messages.  Can't wait to see error
> messages in Mandarin and Russian!

:-)

Rock on,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From atripp at comcast.net  Sun Nov 21 08:32:13 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <cnoj2a+hgh5@eGroups.com>
Message-ID: <cnqfud+geq5@eGroups.com>



 
> Google doesn't exactly find your JavaEmitter in widespread use, and
> the documentation is too sparse to make it clear why you would want to
> use it as a Java generator.  What does the generated Java code do? 

It just prints out a Java AST as reasonably-formatted Java code.
I know it's not widely used, but as far as I know, 100% of
the people that print a ANTLR-generated Java-AST use it,
because (AFAIK) no treewalker to do the same thing exists.

> As
> to the AST pretty-printing:  it is easy enough to write a
> pretty-printing visitor.  I don't use them, but that is mainly because
> a generated tree grammar does the same thing and is a better basis for
> iterating tree structure with.

I would think you'd certainly want to separate your AST processing
code from your AST printing code, no?

> 
> > > 
> > > First of all, your "tree library" description and examples are
exactly
> > > the sort of thing that one does with a tree walker and cannot be
done
> > > generically by hand (declarations have syntax and are identified by
> > > subtree structure--syntax and semantics vary across languages, so
> > > defining a canonical structure can be difficult).
> > 
> > Could you give an example of something that 
> > you think can't be done "by hand"?
> 
> It is not that it cannot be done by hand--it cannot be done
> generically, a key requirement for a library function.

OK, can you give me an example of some sort of AST processing
that can't be done generically with a library?

> 
> > > "getAllGlobalVars()" is easily done as a tree walker pass; I do that
> > > sort of thing as a matter of routine unless I have to worry about
> > > speed, and I'm hardly alone in that. 
> >  
> > It's easily done by hand, too, without even having to know
> > any grammar syntax.
> 
> Not true; you have to know the form and type content of the subtree
> you are using to identify a variable.  That is syntax.

You can easily find that out with a library function.
Using library functions to figure out the context info you need
seems easier to me than trying to keep a running log of your
context info (i.e. a symbol table plus
that TreeStack thing I was taking about)

> 
> > > The renaming is then just a
> > > second pass.  Your "bottom up" algorithm is messier
(findDeclaration()
> > > will be pretty ugly) and will be slower than the approach of
> > > constructing symbol tables during a tree walk and then checking
> > > VAR_REFS against the local and global symbol tables as they are
> > > encountered.
> > 
> > I agree that it will be slower in general, but suppose you
> > are applying hundreds of changes, any one of which can
> > affect the symbol table. You'd need to either keep re-generating
> > the symbol table (which would be slow), or write lots of
> > code that keeps the symbol table up to date with the numerous
> > AST changes.
> 
> The performance gap then widens considerably--symbol table
> construction during a treewalk is a dynamic process, but all it really
> amounts to is inserting data structures in a hash table (possibly with
> additional support for removing local variables en masse) and either
> replacing the data structure contents as needed or deleting and
> re-inserting a specific element.  Symbol tables are a handy tool, and
> are quite efficient when used correctly.

Then don't you need to have a zillion methods in the symbol table
for maintaining it? For example, I may change a variable name,
type, or modifiers. I may move the variable declaration (say from
the start of a function to the middle, or from within a function
to outside the function, or even to a different file).

> 
> > The general principle is "don't duplicate data";
> > that the symbol table contains a subset of
> > data from the AST...it only exists for efficiency. Accessing
> > the AST directly rather than using a symbol table
> > would (IMO) require less code. Whether you need the
> > added speed of the symbol table depends on the application.
> 
> This is sometimes true, but it is more often true that symbol tables
> incorporate a semantic interpretation of parts of the AST.  Take a
> global variable, for example:  to construct a symbol, you have to
> decode type, name, and other properties from the AST.  The only
> reduction in code from using the AST directly is entry into the symbol
> table and some of the symbol construction (packaging, not analysis). 
> The penalty for not doing that is to have the analysis code repeated
> multiple times.

Again, seems like you need methods for maintaining the symbol table
(or else continually regenerate it).


> > So then what about the specific problems I pointed out
> > under "Comparing approaches by analyzing ease of change"?
> > For example, what about the spacing issue I mention, and 
> > how would you change the ordering of printing of AST children?
> > I'm not saying it can't be done with a treewalker, I'm just
> > saying I think it will require some real thought, whereas
> > with vanilla Java code, these things are trivial.
> 
> Tree grammars are easier to change:  the action additions are
> equivalent to the code additions in your case statements.  The
> specific example you give can be handled by building up strings for
> printing (something that 3.0 will automate), by doing separate walks
> over subtrees from within actions, or by further transformation.

I don't think you're answering the question.
Specifically, I don't think it's easy (or at least not trivial)
to print the children of a node in some order other than the
order that they appear in the AST.

> 
> Solving these types of problem is easy:  the issue with printing is
> almost always a matter of fidding with the details until the output
> "looks good" (esthetics rather than implementation).

But aren't they interrelated? Shouldn't the solution approach
(treewalker vs. non-treewalker) help the developer to "get it
right" the first time? And it should let you spend 95% of 
your "tinkering" time thinking about the problem ("do I
want spaces here") rather than the implementation ("I need
to add a space here, unless the next character is ')', how
do I do that?")

> 
> > > 
> > > In your "Limitations" example, you manually match a subtree and
decide
> > > how to print accordingly.  The equivalent tree snippet is
> something like
> > > 
> > > ad :
> > >     #( ARRAY_DECLARATOR
> > >         ( { out.print("["); } e:EXPR { out.print(e.toString() +
> "]"); }
> > >         | i:ID { out.print(#i.toString() + "[]"); }
> > >         )
> > >     )
> > >     ;
> > 
> > Gack! So for comparison, here's my equivalent non-treewalker code:
> > case ARRAY_DECLARATOR:
> >     if (child1.getType() == EXPR) {
> >         out.print("[");
> >         print(child1);
> >         out.print("]");
> >     }
> >     else {
> >         print(child1);
> >         out.print("[]");
> >     }
> >     break;
> > 
> > 99.9% of Java developers (i.e. the non-ANTLR experts) will find
> > the second one easier to write, to read, and to maintain.
> > Try to see that treewalker code through the eyes of
> > someone who doesn't know ANTLR or is just an ANTLR newbie.
> 
> Well, I could have formatted the tree snippet for readability instead
> of compactness--this is a fairly long post.  And I probably should not
> have included the toString()'s where you omitted them--that does
> reduce clarity.  And were this not a toy example, EXPR would be a
> subtree.  None of that is particularly relevant; it strays from your
> original claim that this is difficult to do with tree grammars when in
> fact it is easy.

Easy for you, not for me.
The cleanups you mention would not change the fact that having
Java code embedded inside ANTLR grammar is very confusing for
those who are not used to it. And I don't see why I should
need to learn (and really become an expert in) ANTLR grammars
to simply search and manipulate a tree data structure that
happened to be generated by ANTLR.

> 
> > > 
> > > Note that you can put actions in reasonable places--they won't
execute
> > > unless matching is successful.
> > > 
> > > In short, I think that you still haven't yet grokked the power of
> trees.
> > 
> > Yes, probably not. I'm sure they're quite powerful, but I'm more
> > concerned with ease-of-development for ANTLR newbies and
> > those who don't know ANTLR at all (and don't really care to learn it).
> 
> Trees and tree grammars are exceedingly powerful and easy to use
> (especially with automated tree generation, coming soon with 2.8). 
> However, they do seem esoteric at first.  That is largely due to
> habituation to procedural languages; once you shift to a syntax-driven
> language paradigm (ANTLR and other BNF and EBNF language recognizers),
> then trees are a natural next step.  Because of the difficulties in
> making this paradigm shift, newbies usually don't use trees unless
> they already have a language translation background.  Once you have
> made that shift, though, trees and tree grammars are an essential part
> of ANTLR usage.
> 
> --Loring

Yea, I agree. It's a lot like a procedural and OO oriented 
programmer trying to learn a functional language (e.g. Prolog).
That's a tough transition to make, and I'd like to avoid it,
especially when I'll already have lots of procedural/OO
code doing processing.

Another big issue that I guess I didn't mention explicitly
but we've hit here is that I think the following functionality
should be clearly and completely separated:
* lexing and parsing of input (using ANTLR)
* AST processing
* AST printing

IMO, there's no reason for the AST processing or AST printing
to have any dependencies on ANTLR. And my proposal is to have
the AST processing should have two parts: 
1) a generic tree-manipulation
library that works with tree data structures in general - nothing
specific to ASTs even. And 2) Application-specific code that
relies on AST structure but not ANTLR.






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From oliver.zeigermann at gmail.com  Sun Nov 21 09:16:16 2004
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] ITLS (was: Translators Should Use Tree Grammars)
In-Reply-To: <16800.16601.192395.192669@despot.non.net>
References: <24D056E8-3779-11D9-A398-000A95891192@cs.usfca.edu>
	 <cnlui0+l878@eGroups.com> <16800.16601.192395.192669@despot.non.net>
Message-ID: <9da4f452041121091671bbbaff@mail.gmail.com>


On Sat, 20 Nov 2004 23:16:41 -0800, John D. Mitchell
<johnm-antlr@non.net> wrote:
> Well, I don't have time to get into all of the silliness (and other folks
> have already done a fair job at it :-) so here's a more general facet that,
> alas, is missed completely in your diatribe...

Saying something is silly without explaining what is not very convincing...
 
>         * Any non-trivial program written in a general purpose programming
>           language contains ad-hoc, bug-ridden, inarticulate
>           implementations of multiple, informally-specified, incomplete
>           languages.

What are you referring to here: the equivalence of phrase structure
grammars and a turing machine? If so, program and grammar are just two
ways to look at a problem with neither of them having precedence over
the other. So, your argument does not seem to be too convincing to me.

Oliver


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From oliver.zeigermann at gmail.com  Sun Nov 21 09:34:13 2004
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <cnlui0+l878@eGroups.com>
References: <24D056E8-3779-11D9-A398-000A95891192@cs.usfca.edu>
	 <cnlui0+l878@eGroups.com>
Message-ID: <9da4f4520411210934148360f1@mail.gmail.com>


I understand most of your stuff and especially the one about Magic.
What I do not quite understand that - as it seems - for the parser you
accept grammars are a concise language to describe the language to
parse and seem to prefer it over pure Java. Why not for certain tree
transformations? I understand in tree transformations the emphasis is
not on revealing structure (analysis), but rahter on what to do with
certain patterns (synthesis).Do you thing this the important
difference?

Oliver

On Fri, 19 Nov 2004 23:10:56 -0000, atripp54321 <atripp@comcast.net> wrote:
> 
> 
> Terence,
> 
> Here's my 8-page-or-so furiously written diatribe against
> treewalkers:
> http://jazillian.com/antlr/trees.html
> 
> I don't address the Visitor pattern, and I haven't even finished
> reading your page and the posted responses. I just thought I'd
> get my early, uninformed thoughts down on paper first.
> Wouldn't want to let well-argued points that you gurus
> make make get in my way of opinions :)
> 
> Andy
> 
> 
> 
> 
> Yahoo! Groups Links
> 
> 
> 
> 
>


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From atripp at comcast.net  Sun Nov 21 09:57:46 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <cnovbo+cb4u@eGroups.com>
Message-ID: <cnqkuq+p8f5@eGroups.com>



Hi Michael,
Thanks for the input!
My replies embedded below.

> Hi Andy,
> 
> Read your paper and my overall impression is this:
> 
> Yes, anything that an ANTLR tree parser can do can also be done in
> other ways including the tree-library approach that you describe.
> Nevertheless, I consider the tree-grammar approach to be the "best"
> choice from an engineering point of view. You get the most bang for
> the least amount of work. Alexey's TreeDL approach also has some
> positives from an engineering pov.
> 
> My other impression was that you haven't grokked the tree-grammar
> approach yet. It can take a while as my posts to the list attest
but,
> it's time well spent if you intend to build complex language
> analysis/transformation tools with ANTLR.
> 
> Section-secific comments:
> =========================
> 
> 1. The Complex Case: Tranforming a C AST to a Java AST
> ======================================================
> 
> The tree-library approaches you outline rely on methods that would
> seem to involve significant local (and/or global) tree
> navigation/searching and analysis. Take getAllGlobalVarNames() for
> instance - in the general case it would have to search the entire
> input AST (or AST forest in the multi-file case) to build up this
> list. Similarly for getAllLocalVarNames (localized search) and
> findDeclaration (global search).

The getAllGlobalVarNames() method would only have to search
"global space" in the AST, it wouldn't have to search within
FUNCTION_DEF nodes, for example. Yes, many of these
functions would be inefficient, so whether the approach is reasonable
would depend on the app. I'm essentially doing this slow approach,
but even slower, in Jazillian. I actually search linear
streams of tokens. But then again, it's just a translator,
not a compiler. If it takes a few minutes to translate a
million lines of input, that's ok for me.

> 
> With the typical tree-grammar approach, a symbol table is built
> (either during parsing or as a separate phase) and is then use to
> answer queries such as "is this a global var declaration?" or "get
all
> global var declarations" very efficiently. Some times, the structure
> of the tree encodes such information. For instance, it may be that
> global var declarations are always children COMPILATION_UNIT nodes.
So
> you might have:
> 
> compilationUnit
>  :  #( COMPILATION_UNIT
>        ( .......
>        |  variableDeclaration[VarDeclarationKind.Global]
>        | ......
>        )*
>     )
>  ;
>  
> statementList
>  :  #( STMT_LIST
>        ( .......
>        |  variableDeclaration[VarDeclarationKind.Local]
>        | ......
>        )*
>     )
>  ;
>  
> variableDeclaration [VarDeclarationKind varKind]
>  : #( VARIABLE_DEF type
>       ( ID ( variableInitialization )?
>         {
>            if (varKind == VarDeclarationKind.Global)
>            {
>              // process global variable decl
>            }
>            else
>            {
>              // process non-global variable decl
>            }
>         }
>       )*
>     )
>   ;
> 
> To be able to answer queries such as "get all VAR_REF nodes that
refer
> to this declaration" efficiently, you would have added appropriate
> attributes during the symbol table construction pass(es).

Right. My problem is that the amount of information I feel I'd
need in the symbol table is HUGE. Some examples of info I need:

"Is this variable ever used in an expression where I could change
it to from an int type to a boolean type?"

"Is this variable v ever used later in this function in either
'v = x;' form or 'if (v)' form?"

"Is this method named 'main' and have two arguments, one of 'int'
type and the second of 'char *[]', 'char **', or similar type?"

"What other variables are assigned a value in which this variable
is part of the value?"

You're probably thinking that these would not go into the symbol
table, I would just have to write AST-searching code for that.
My point is that by the time I've got this huge library of
AST-searching code to do these things, the symbol table is
superfluous.
 


> In fact, it
> is helpful to think of the information in the symbol table as
> attributes of nodes in the AST (which is what they are in fact).
They
> are just designed for very fast lookup.
> 
> 
> 2a. Keeping the TreeStack and SymbolTable in sync with the AST
> ==============================================================
> 
> I don't understand the need for a TreeStack. If what we are talking
> about is renaming a local variable then, following on from the
grammar
> snippets in my previous comments:
> 
> variableDeclaration [VarDeclarationKind varKind]
>  : #( VARIABLE_DEF type
>       ( varid:ID ( variableInitialization )?
>         {
>            if (varKind == VarDeclarationKind.Global)
>            {
>              // process global variable decl
>            }
>            else
>            {
>              // process non-global variable decl
>              IBinding varDecl = #varid.Binding;
>              if (thisVarNeedsRenaming(varDecl,....))
>              {
>              	string....
>              	renameLocalVarTo(varDecl, #varid, 
getNewNameFor(varDecl));
>              }
>            }
>         }
>       )*
>     )
>   ;
> 
> Where renameLocalVarTo() might is a method that looks something
like:
> 
> void renameLocalVarTo(IBinding decl, ISimpleIdentNode node, string
> newName)
> {
>    IList refNodes = node.getAllReferringNodes();
>    foreach(INode refnode in refNodes)
>    {
>       refnode.setText(newName);
>    }
>    node.setText(newName);
>    
>    decl.Scope.rename(decl, newName);  // a) removes decl and it's
key
> from scope dictionary
>                                       // b) re-inserts decl with a
new key
> }

No, we're not just talking about renaming local variables,
we're talking about hundreds of different transformations,
of which renaming local variables is just one example.

My objection is the way the tree grammar approach slices the
problem. You have this line above:
              // process global variable decl

Well, there may be dozens of "rules" or "transformations" that
apply to global variables. I don't want one section of
code where global variable declarations are handled, with
bits and pieces of each of these "rules" embedded there.

I want each "rule" to stand on its own, as a chunk of code.
I want a renameVariables() method that happens to deal
with global variables. I don't want a dozen different operations
at the "Global Variabiable Definition" node of the grammar.
Multiple treewalkers helps that, but then you've got a the
grammar spread across a dozen files. And just storing
"all information about the Global Variable Definition" in
a symbol table just doesn't cut it (see the previous section
for why).

The TreeStack thing was my way of capturing this "all information
about the AST (that's not in the symbol table) 
that we may have picked up along the way."


> 2b. Do you want methods in AST or TreeStack?
> ============================================
> 
> decl.Scope.getAllBindings() or similar should give you a list of all
> names in the scope. This isn't a tree-grammar approach benefit.
ANTLR
> does nothing to help or hinder the requirement that the symbol table
> code has to be written.
> 
> Since the symbol table stores extended node attributes, there isn't
a
> question of which is more "natural". 

Again, my issue is that by the time you've extended the symbol
table to include all the information I want, it's become
a monster (see example questions earlier).

> The binding attribute on the node
> is where the actions starts:
>   IBinding decl  = #varid.Binding;
>   IList bindings = decl.Scope.getAllBindings();

Objection, your honor! The defense is mixing ANTLR grammar
with Java code again! Sorry :) Yo just cringe cada vez
Veo languages mezclado together. It's very hard to read
if you don't know both languages.

(Translation: I just cringe every time I see languages mixed
together)

 
> 2c. Sometimes you need multiple passes
> ======================================
> 
> Given all the information that the symbol table construction phase
> accumulates, it would be pretty easy to provide a getAllGlobalVar()
> method on the symbol table object itself. Combined with the
> getAllReferringNodes() method on the nodes, what you propose is
> trivially accomplished. And without expensive (re-)calculation.

But what about maintenance? You need to keep it up to date.
I may have 20 different "transformation rules" that can
change a global variable declaration. That means the symbol
table has to be notified and be able to handle each of these
changes, or it has to be smart enough to know when its become
out of date and regenerate itself.


> 4. Comparing approaches by analyzing ease of change
> ===================================================
> 
> In your third change - we want three blank lines after the "package"
> line instead of two - I can't understand why there is any confusion
in
> the tree-grammar approach. If you are adding lines *after* the
output
> from the package rule and, the rootID rule calls the package rule
then
> the change would be in the rootID rule. In your description, it is
> clear that the rootID rule prints the current two lines in any case.

With the tree grammar approach, isn't the whole idea that
each node just prints itself? That a node doesn't print its
children, they print themselves (in the order that they appear
in the AST). So to add a few extra lines (or print children
in a particular order), you have to have your RootID node
explicitly print it's children in a certain order with 
certain stuff printed in between. 

So in that case, the treewalker approach isn't buying you anything.
And if you've got half your nodes automatically "just printing
themselves", and the other half doing this "print my children
in this order and with this stuff in between", then you've
got a mess: two general approaches mixed together.

> 
> In your fourth change - we want to change the order of
printing...and
> print the static block before the variable declarations for example
-
> you can simply employ multiple output writers. Buffer all static
> blocks in one writer, all variable declarations in another etc. At
the
> end print contents of the various writers in any order you wish. No
> need to modify the AST structure.

And isn't that quite a bit more involved than:
    print(getChild(ast, PACKAGE_DEF));
    printChildren(ast, "\n",  IMPORT);
    out.println();
    out.println();
    print(getChild(ast, CLASS_DEF));    // only one of these...
    print(getChild(ast, INTERFACE_DEF));  // will print anything
    out.println();

> 
> 
> 5. Limitations of TreeWalkers
> =============================
> 
> I don't see a tree-grammar limitation here Andy. I may be wrong but,
> isn't the real problem that "a[3]" is an array access while "int[]
x"
> is an array declaration?. If I am right they would have difference
AST
> representations in any case.

No, the problem is that a C array declaration can take either form:
int a[3];
int[3] a;
> 
> In any case, I can't provide a tree-grammar equivalent of your
sample
> without knowing what the child of the ARRAY_DECLARATOR is when it
> isn't an EXPR. In other words without knowing a bit more about your
> tree's grammar.

The child of an ARRAY_DECLARATION is always an EXPR.

...which highlights one of my major points: you need to understand
the AST structure whether you use a treewalker or not. I don't
even remember what the issue is here, but whatever it is, you're
about to go off and find an ARRAY_DECLARATION rule in an ANTLR
tree grammar and figure out how to stuff in some Java code.
I'd prefer to just be at an "case ARRAY_DECLARATION:" point
in some Java code, and just say:

AST expr = ast.getFirstChild();
doSomethingWithExpr(expr);
> 
> 
> 6. Contrasting the approaches
> =============================
> 
> 1. Code generation isn't magic. We all use it quite happily for
lexers
> and parsers for instance. The same benefits exist for tree parsers.

We use ANTLR-like tools for lexers and parsers because the
code they generate is straightforward and generic. Given a grammar,
you know exactly what the lexer and parser code should look like.

However, with AST-to-AST transformation, it's not at all clear
what the functionality needs to be. For example, given a "C source
AST" to "Java source AST", we would all come up with different
algorithms to do that transformation. 

We would all end up with
a set of "rules" like "Find all FUNCTION_DEF nodes with an IDENT
child with text 'main' and a PARAMS_DEF child that has two children,
the first of which has a TYPE node with type 'int' ...
Does a symbol table help us with finding such a node?
No. Which is easier: to extend the symbol table to include
that information, or write a tree-search library to find it?
I think the library approach is easier, especially if we can use
a preexisting nice, standard tree-search-library out there.

> 
> 2. It can be argued that the tree-grammar approach actually
encourages
> your "keep related code together" maxim. All the code (excluding
> library code) that applies to a phase of your transformation is kept
> together in one file - the grammar file.

No, you're going to need multiple passes on the tree.

For the "main method" example, I want all my code that handles
"main method C to Java" in one class. I don't want it
spread across one grammar that stores method and parameter info
in a symbol table, a second grammar that makes the change, and
a third grammar that makes changes to any "main" function calls.

> 
> 3. Complex tools require training investment before you can use then
> effectively. Having invested in training to be able to ANTLR
notation
> for specifying lexers and parsers, tree parsers are the next logical
step.

But I'm able to use the ANTLR lexer and parser without any real
training. I should be able to *use* ANTLR without really knowing
much about ANTLR grammars. I just want ANTLR to lex and parse
C source and pass me the AST, and I'll take it from there.

> 
> 4. The comments about debugging apply equally to generated tree
> parsers and hand-written tree walkers (they are often very similar).
> The tree structure is the same in any case so print the AST as you
please.

I'm not proposing "hand-written tree walkers" so much as
a "tree searching and manipulation library". My whole
point is that AST-to-AST translation is better done as a
rule-based pattern-matching scheme than a top-down AST-walking
scheme. Take a look at:
http://jazillian.com/how.html
And think about how you'd do all those things with a treewalker.
i'm certain it would be horrendous.

> 
> 5. ANTLR support for hetero-ASTs could be improved but nothing you
> have mentioned so far is beyond the support ANTLR 2.7.4's hetero-AST
> support. Can you give an example where this is important?

I'm not sure what you mean. The ANTLR treewalker approach basically
says "embed your actions at each node of the grammar". That's
fine for certain apps, especially compilers, interpreters,
and code-annotators. But I don't see how it would work for
a complex source-to-source translator, in which the rules
for transformation are complex.

I've spent the last couple of years writing a C to Java translator,
yet I have no idea what actions I would fire at any particular
node in a treewalker. That's as it should be. If I asked you
"when translating C to Java, what do you do with a function
declaration", the question makes no sense. On the other hand,
if I ask "when translating C to Java, how to you translate
the main() method?", now I can easily tell you the steps.
That's how the problem should be sliced.

> 
> 
> 7. Summary
> ==========
> 
> All I can say is that the two approaches you present here are tools
> for getting a job done. If you've invested the time to learn both
> approaches and you feel the tree-library approach offers you more
then
> by all means use it. 
> 
> I suspect however that you are yet to fully grok the tree-grammar
> approach. What information or resources would help you to better
> understand the tree-grammar approach?. Perhaps knowing this would
help
> in making ANTLR v3 docs even more useful.
> 
> Cheers!
> 
> Micheal
> ANTLR/C#

The problem is that I don't
think the tree-grammar approach gets too complicated until
you've got a pretty large system. I think the first 10% of
my C-to-Java translator would be fine using a treewalker.
But soon the symbol table would seem to be completely
inadequate and I'd end up with all sorts of AST-searching
code anyway.

Again, thanks for the input. 
Andy





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Sun Nov 21 10:18:36 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] error message internationalization
In-Reply-To: <16800.16977.902615.373410@despot.non.net>
References: <C04D171A-3B2B-11D9-A398-000A95891192@cs.usfca.edu> <16800.16977.902615.373410@despot.non.net>
Message-ID: <C28C6BDE-3BE9-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 20, 2004, at 11:22 PM, John D. Mitchell wrote:

>
>>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
> [...]
>
>> It even pays attention to file encoding to make message files work for
>> non-8 bit message files.
>
> Care to translate that into english?  :-)

Meanie ;)  Sure.  What I mean is that StringTemplate 2.1 is/will be 
sensitive to the local file.encoding so that if you live in China, you 
are not limited to 8-bit ascii files for templates.  ANTLR 3 has to 
allow error message files containing 16-bit unicode so file encodings 
are important.  Fortunately, ST just makes this work :)

>> ErrorManager.error(ErrorManager.CANNOT_CLOSE_FILE, fileName, ioe);
>
> And the ErrorManager than e.g., throws a Runtime exception so that the
> controlling program can e.g., continue or choke & die as it pleases,
> right?

I think the code currently throws an exception or not depending on the 
situation (in the calling code); usually i try to keep going.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From atripp at comcast.net  Sun Nov 21 10:16:20 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <cnp17i+j0r8@eGroups.com>
Message-ID: <cnqm1k+2l2i@eGroups.com>



--- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...>
wrote:
> 
> --- In antlr-interest@yahoogroups.com, "atripp54321" <atripp@c...>
wrote:
> 
> > Take my whole JavaEmitter thing. If that's so easy to do
> > with a treewalker, why hasn't anyone done it, either in
> > the years before I wrote mine or since then? It only
> > took me a day or two, can't someone take a day and write a treewalker
> > to emit Java code, so we can compare the two?
> 
> Google for "jparse". This project has an example of the hetero-node
> approach to pretty printing using a treewalker.
> 
> > > First of all, your "tree library" description and examples are
exactly
> > > the sort of thing that one does with a tree walker and cannot be
done
> > > generically by hand (declarations have syntax and are identified by
> > > subtree structure--syntax and semantics vary across languages, so
> > > defining a canonical structure can be difficult).
> > 
> > Could you give an example of something that 
> > you think can't be done "by hand"?
> 
> It isn't so much it can't be done for a particular case, more like it
> can't be [easily] done as a generic set of library routines for all
cases.

I'll propose a specific tree-search-and-manipulation library
and show how it could be extended for typical AST usage.

> 
> 
> > > "getAllGlobalVars()" is easily done as a tree walker pass; I do that
> > > sort of thing as a matter of routine unless I have to worry about
> > > speed, and I'm hardly alone in that. 
> >  
> > It's easily done by hand, too, without even having to know
> > any grammar syntax.
> 
> You have to know the tree structure. That is what the grammar encodes.

Yes, you have to know the tree structure in any case, it's
the ANTLR grammar syntax that can be avoided.

> 
> > > The renaming is then just a
> > > second pass.  Your "bottom up" algorithm is messier
(findDeclaration()
> > > will be pretty ugly) and will be slower than the approach of
> > > constructing symbol tables during a tree walk and then checking
> > > VAR_REFS against the local and global symbol tables as they are
> > > encountered.
> > 
> > I agree that it will be slower in general, but suppose you
> > are applying hundreds of changes, any one of which can
> > affect the symbol table. You'd need to either keep re-generating
> > the symbol table (which would be slow), or write lots of
> > code that keeps the symbol table up to date with the numerous
> > AST changes.
> 
> Or, you can design the symbol table to be updatable. You change the
> affected nodes and ask the symbol table to update the relevant entry.

For any variable declaration, I can:
change the variable name
change the type
add and delete modifiers
move the declaration to another place in the tree, changing
  it from local to global or global to local
remove the declaration
move the declaration to a different AST

That's just for variable declarations off the top of my head.
The code would have to maintain both the AST and the symbol table.
That's a lot of duplicate work.

> 
> > The general principle is "don't duplicate data";
> > that the symbol table contains a subset of
> > data from the AST...it only exists for efficiency. Accessing
> > the AST directly rather than using a symbol table
> > would (IMO) require less code. Whether you need the
> > added speed of the symbol table depends on the application.
> 
> The symbol table stores AST node attributes in a format that is
> especially fast to query. There isn't any duplication really.

It *is* duplication of data...the symbol table can be regenerated from
the AST at any time.

> 
> > > I don't understand your TreeStack.  It sort of sounds like an
> > > attribute stack, but not quite.
> > 
> > Just saying that you need to keep "state" information as you
> > walk the tree. For example, are we currently inside a function
> > definition or not? Is this the first reference to this variable?
> > etc.
> 
> Use the [symbol] table Luke ;-)

Whether that information is combined with the symbol table or not,
it's still a mess.

> 
> > So then what about the specific problems I pointed out
> > under "Comparing approaches by analyzing ease of change"?
> > For example, what about the spacing issue I mention, and 
> > how would you change the ordering of printing of AST children?
> > I'm not saying it can't be done with a treewalker, I'm just
> > saying I think it will require some real thought, whereas
> > with vanilla Java code, these things are trivial.
> 
> See my earlier response to your paper. The code might look something
like:
> 
> rootID
>   :  #( ROOT_ID ......
>          ( ....... package { output.write("\n\n\n\"); } ....... )*
>      )
>   ;
> 
> > > In your "Limitations" example, you manually match a subtree and
decide
> > > how to print accordingly.  The equivalent tree snippet is
> something like
> > > 
> > > ad :
> > >     #( ARRAY_DECLARATOR
> > >         ( { out.print("["); } e:EXPR { out.print(e.toString() +
> "]"); }
> > >         | i:ID { out.print(#i.toString() + "[]"); }
> > >         )
> > >     )
> > >     ;
> > 
> > Gack! So for comparison, here's my equivalent non-treewalker code:
> > case ARRAY_DECLARATOR:
> >     if (child1.getType() == EXPR) {
> >         out.print("[");
> >         print(child1);
> >         out.print("]");
> >     }
> >     else {
> >         print(child1);
> >         out.print("[]");
> >     }
> >     break;
> > 
> > 99.9% of Java developers (i.e. the non-ANTLR experts) will find
> > the second one easier to write, to read, and to maintain.
> 
> Andy this is a fallacious argument. You could say the same of lexer or
> parser rules yet most Java developers would rather use a lexer/parser
> generator than code them directly in Java.

I can use ANTLR and the grammars that come with it without
understanding the grammar syntax at all. In that way, I've
got a lexer and parser without hand coding and without
knowing ANTLR syntax. I'd like to be able to work with
ASTs without knowing ANTLR syntax too.

(In fact I do know ANTLR syntax, but you get the point).

> 
> Grammar tools are...well...tools just like Java. We need to learn how
> to use them effectively. Lisp programmers would find the Java code
> similarly alien but that doesn't distract from it's usefulness to you
> or other java programmers.
> 
> In any case, as a Java & ANTLR user, I find the grammar snippet much
> more useful and easier/cheaper to maintain. Both are equally readable
> to me.

As a hard-core Java programmer, but just a casual ANTLR user,
I don't want to get mired in ANTLR syntax for what amounts
to basic tree data structure stuff.

> 
> > Try to see that treewalker code through the eyes of
> > someone who doesn't know ANTLR or is just an ANTLR newbie.
> 
> I'd say such a person simply needs more training about ANTLR. The
> question is determining what resources would be most useful i.e.
> finding an engineering solution to the production of ANTLR
> documentation. Now if only there was a documentation generator grammar
> and oracle  ;-)

More ANTLR training would help, but I still think ANTLR
tree grammars are the wrong tool for tree-data-structure
search and manipulation.

> 
> > > Note that you can put actions in reasonable places--they won't
execute
> > > unless matching is successful.
> > > 
> > > In short, I think that you still haven't yet grokked the power of
> trees.
> > 
> > Yes, probably not. I'm sure they're quite powerful, but I'm more
> > concerned with ease-of-development for ANTLR newbies and
> > those who don't know ANTLR at all (and don't really care to learn it).
> 
> It sounds like you are describing people who are happy to do invest
> the resources needed to be able to use Java/C#/C++/Python etc
> effectively but, are unwilling to do so for ANTLR. I'm not sure there
> is any way to help such people short of urging them to learn how to
> use ANTLR. Is there?

Yes! Write your apps using just the Java/C#/C++ language that
they already know.

> 
> 
> As for ease of development, just think of the benefits of specifying
> lexer and parser using grammars. You get similar benefits for
> post-parse analysis and transformation passes from using tree grammars.

See my earlier comments: a BNF-like grammar is the best way
to specify lexer and parser functionality. It's not the best
way to specify translator functionality, IMHO.

> 
> Cheers,
> 
> Micheal
> ANTLR/C#

Andy





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Sun Nov 21 10:25:34 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] added Java emitter to file sharing
Message-ID: <BC129A9A-3BEA-11D9-A398-000A95891192@cs.usfca.edu>


Howdy,

Just added the java.tree.g file I used in my class project to dump java 
back out from the java AST.  It was easy but lots of annoying typing ;) 
  A key point to notice vis-a-vis the tree grammar vs hand-built walker 
/ library discussion is that it is only like 200 lines added to the 
tree grammar.  Whole thing is only 560 lines.  Generates 3367 lines of 
Java code from that grammar (now, *that* would be a lot of typing). ;)

http://www.antlr.org/share/list

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Sun Nov 21 10:47:14 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] ITLS (was: Translators Should Use Tree Grammars)
In-Reply-To: <9da4f452041121091671bbbaff@mail.gmail.com>
References: <24D056E8-3779-11D9-A398-000A95891192@cs.usfca.edu>
	<cnlui0+l878@eGroups.com>
	<16800.16601.192395.192669@despot.non.net>
	<9da4f452041121091671bbbaff@mail.gmail.com>
Message-ID: <16800.58034.655738.436112@despot.non.net>


>>>>> "Oliver" == Oliver Zeigermann <oliver.zeigermann@gmail.com> writes:
>>>>>> <johnm-antlr@non.net> wrote:
[...]

>> Well, I don't have time to get into all of the silliness (and other
>> folks have already done a fair job at it :-) so here's a more general
>> facet that, alas, is missed completely in your diatribe...

> Saying something is silly without explaining what is not very
> convincing...

I apologize for being too busy with paying work to spend extra time on
this. As my parenthetical remark noted, other folks (e.g. Loring, Michael,
and Ter) have commented on a number of issues in Andy's arguments.


>> * Any non-trivial program written in a general purpose programming
>> language contains ad-hoc, bug-ridden, inarticulate implementations of
>> multiple, informally-specified, incomplete languages.

> What are you referring to here: the equivalence of phrase structure
> grammars and a turing machine? If so, program and grammar are just two
> ways to look at a problem with neither of them having precedence over the
> other. So, your argument does not seem to be too convincing to me.

(A) Look up Greenspun's Tenth Rule.

(B) Never explain a joke.

(C) Not getting the joke, alas, would seem to indicate that you didn't
understand the point of rest of my post and well, I don't see anything that
I can do about that at this point.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From atripp at comcast.net  Sun Nov 21 13:18:05 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:36 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <7C34B436-3B2B-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <cnr0md+feab@eGroups.com>




> I'm on a coding frenzy on 3.0 so I'll have to comment in detail later, 
> but I built an emitter for my CS652 students doing the "Java + C++ 
> style comments" project.  Trivial but a hassle.  Took me a few hours 
> rather than a day or two.  Want it?  559 lines and handles precedence 
> properly so that extra parentheses are not generated spuriously (well, 
> that was my intent) ;)

Yea, I just checked out the java.print.g tree grammar
in that JParse thing - 423 lines, very straightforward.
I'd like to see your version, too though - seems like
your "Sharing" section is the place for it.

> 
> As you point out further in your response to Loring, the tree grammar 
> one is sometimes less obvious to the newbie for sure!
> 
> I'll counter by saying we shouldn't be printing back this way. ;)  
> Templates are the name of the game for generating output :)  If the 
> output is very similar to the input, a better way is to just do my 
> tricks: either TokenStreamRewriteEngine or track token order in the 
> tree so you can dump automatically :)

Yea, I suppose a treewalker is fine when the output is so very
close to just a printing of the inorder traversal of the AST.
But I'm still not convinced that a treewalker is the best
for very complex AST-to-AST transformations.

Andy

> 
> Back to coding... (see next email message) :)
> 
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Sun Nov 21 13:46:41 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <cnqkuq+p8f5@eGroups.com>
Message-ID: <cnr2c1+124e@eGroups.com>



--- In antlr-interest@yahoogroups.com, "atripp54321" <atripp@c...> wrote:

Hi Andy,

> > Section-secific comments:
> > =========================
> > 
> > 1. The Complex Case: Tranforming a C AST to a Java AST
> > ======================================================

> > To be able to answer queries such as "get all VAR_REF nodes that
> refer
> > to this declaration" efficiently, you would have added appropriate
> > attributes during the symbol table construction pass(es).
> 
> Right. My problem is that the amount of information I feel I'd
> need in the symbol table is HUGE. Some examples of info I need:
> 
> "Is this variable ever used in an expression where I could change
> it to from an int type to a boolean type?"
> 
> "Is this variable v ever used later in this function in either
> 'v = x;' form or 'if (v)' form?"
> 
> "Is this method named 'main' and have two arguments, one of 'int'
> type and the second of 'char *[]', 'char **', or similar type?"
> 
> "What other variables are assigned a value in which this variable
> is part of the value?"

A symbol table is a data structure (or set of data structures) that
stores and supports provides fast query of [some] AST node attributes.
Some of those attributes may either fully answer or help in answering
your queries.

Your particular usage - a C-to-Java translator - would require no more
than is typically stored in a symbol table. You are performing static
code analysis and there are established techniques and literature on
the subject...

> You're probably thinking that these would not go into the symbol
> table, I would just have to write AST-searching code for that.
> My point is that by the time I've got this huge library of
> AST-searching code to do these things, the symbol table is
> superfluous.

You build the symbol table (or at least collect the information it
contains and performs the semantic checks it enables in some other
way) as part of the process of building an AST. If you know all your
input programs will be always be correct, you can skip parts of the
process. Unless your post-parse analysis needs the information.....

> > 2a. Keeping the TreeStack and SymbolTable in sync with the AST
> > ==============================================================

> No, we're not just talking about renaming local variables,
> we're talking about hundreds of different transformations,
> of which renaming local variables is just one example.

Fine. Provide "hooks" into your processing flow and plug in your
"transformation objects". The rename point above might be one place to
provide a hook for rules that deal with local variables.

> My objection is the way the tree grammar approach slices the
> problem. You have this line above:
>               // process global variable decl
> 
> Well, there may be dozens of "rules" or "transformations" that
> apply to global variables. I don't want one section of
> code where global variable declarations are handled, with
> bits and pieces of each of these "rules" embedded there.

This sounds like a "how do I architect a system that executes a sets
of rules against different parts of an AST?" question to me rather
than a tree-library vs tree-grammar approach question.

You can have a look at how tools like PMD and CheckStyle are architected.

> > 2b. Do you want methods in AST or TreeStack?
> > ============================================
> > 
> > decl.Scope.getAllBindings() or similar should give you a list of all
> > names in the scope. This isn't a tree-grammar approach benefit.
> ANTLR
> > does nothing to help or hinder the requirement that the symbol table
> > code has to be written.
> > 
> > Since the symbol table stores extended node attributes, there isn't
> a
> > question of which is more "natural". 
> 
> Again, my issue is that by the time you've extended the symbol
> table to include all the information I want, it's become
> a monster (see example questions earlier).

There is no need to "extend" the symbol table. It has information in
it and you decide based on your requirements what analysis functions
you wish to expose (and can expose efficiently). If you need more, you
employ additional formalisms and techniques in static code analysis.

> > The binding attribute on the node
> > is where the actions starts:
> >   IBinding decl  = #varid.Binding;
> >   IList bindings = decl.Scope.getAllBindings();
> 
> Objection, your honor! The defense is mixing ANTLR grammar
> with Java code again! Sorry :) Yo just cringe cada vez
> Veo languages mezclado together. It's very hard to read
> if you don't know both languages.

Do you similarly cringe when you use ANTLR to build lexers and
parsers?. Is there some reason why you feel tree-parsers are any
different?

> > 2c. Sometimes you need multiple passes
> > ======================================
> > 
> > Given all the information that the symbol table construction phase
> > accumulates, it would be pretty easy to provide a getAllGlobalVar()
> > method on the symbol table object itself. Combined with the
> > getAllReferringNodes() method on the nodes, what you propose is
> > trivially accomplished. And without expensive (re-)calculation.
> 
> But what about maintenance? You need to keep it up to date.
> I may have 20 different "transformation rules" that can
> change a global variable declaration. That means the symbol
> table has to be notified and be able to handle each of these
> changes, or it has to be smart enough to know when its become
> out of date and regenerate itself.

So you need an updatable symbol table?. Build one. Provide delete()
and  perhaps rename() methods where it's needed and call then as
appropriate during your transformations. Don't see a problem here sorry.

> > 4. Comparing approaches by analyzing ease of change
> > ===================================================
> > 
> > In your third change - we want three blank lines after the "package"
> > line instead of two - I can't understand why there is any confusion
> in
> > the tree-grammar approach. If you are adding lines *after* the
> output
> > from the package rule and, the rootID rule calls the package rule
> then
> > the change would be in the rootID rule. In your description, it is
> > clear that the rootID rule prints the current two lines in any case.
> 
> With the tree grammar approach, isn't the whole idea that
> each node just prints itself?

Where did you get this idea from. The tree-grammar approach lets you
build tree-walkers by specify a grammar for the tree that is to be
walked and action code to execute as the tree is walked. What your
action code does is up to you.

> So in that case, the treewalker approach isn't buying you anything.

Time. You don't have to write the tree parsers by hand.

> > In your fourth change - we want to change the order of
> printing...and
> > print the static block before the variable declarations for example
> -
> > you can simply employ multiple output writers. Buffer all static
> > blocks in one writer, all variable declarations in another etc. At
> the
> > end print contents of the various writers in any order you wish. No
> > need to modify the AST structure.
> 
> And isn't that quite a bit more involved than:
>     print(getChild(ast, PACKAGE_DEF));
>     printChildren(ast, "\n",  IMPORT);
>     out.println();
>     out.println();
>     print(getChild(ast, CLASS_DEF));    // only one of these...
>     print(getChild(ast, INTERFACE_DEF));  // will print anything
>     out.println();

This seven lines of code don't matter much. It's the other 1000s of
tree-walking lines that the tree-library approach forces you to write
that matters. In the tree-grammar approach, ANTLR generates all that.

Incidentally, the tree-grammar snippet is lucid and equally concise (4
additional lines compare to the as-is print of the AST):

typeDefinition [PrintWriter output]
{ 
  StringWriter classW  = new StringWriter();      //LINE 1
  StringWriter ifaceW  = new StringWriter();      //LINE 2
}
  :  ( classDeclaration[classW]
     | interfaceDeclaration[ifaceW]
     )*
     {
       // swap to your hearts contents
       output.write(classW.toString();          //LINE 3
       output.write(ifaceW.toString();          //LINE 4
     }
  ;

> > 5. Limitations of TreeWalkers
> > =============================
> > 
> > I don't see a tree-grammar limitation here Andy. I may be wrong but,
> > isn't the real problem that "a[3]" is an array access while "int[]
> x"
> > is an array declaration?. If I am right they would have difference
> AST
> > representations in any case.
> 
> No, the problem is that a C array declaration can take either form:
> int a[3];
> int[3] a;

And they mean the same thing right?. Isn't the point of an AST to
remove concrete syntax irregularities like this?. Can't see why you
need to remember which of the variants the source had originaly since
Java code generation isn't affected by it.

> > In any case, I can't provide a tree-grammar equivalent of your
> sample
> > without knowing what the child of the ARRAY_DECLARATOR is when it
> > isn't an EXPR. In other words without knowing a bit more about your
> > tree's grammar.
> 
> The child of an ARRAY_DECLARATION is always an EXPR.

But "int[] x" has no expression....

> ...which highlights one of my major points: you need to understand
> the AST structure whether you use a treewalker or not. I don't
> even remember what the issue is here, but whatever it is, you're
> about to go off and find an ARRAY_DECLARATION rule in an ANTLR
> tree grammar and figure out how to stuff in some Java code.
> I'd prefer to just be at an "case ARRAY_DECLARATION:" point
> in some Java code, and just say:
> 
> AST expr = ast.getFirstChild();
> doSomethingWithExpr(expr);

My generated tree-grammar does the same ultimately. I just don't have
to write all the code manually.

> > 6. Contrasting the approaches
> > =============================
> > 
> > 1. Code generation isn't magic. We all use it quite happily for
> lexers
> > and parsers for instance. The same benefits exist for tree parsers.
> 
> We use ANTLR-like tools for lexers and parsers because the
> code they generate is straightforward and generic. Given a grammar,
> you know exactly what the lexer and parser code should look like.

So you are unfamiliar with tree parsers. Sounds like you could benefit
from learning more about them.

> However, with AST-to-AST transformation, it's not at all clear
> what the functionality needs to be. For example, given a "C source
> AST" to "Java source AST", we would all come up with different
> algorithms to do that transformation.

As we could about the structure of the AST we build in the parser. Or
if to build an AST at all. Or the names we give to our tokens in the
lexer and how many there are. Or whether to use two lexers and a
parser or just one of each etc....

> We would all end up with
> a set of "rules" like "Find all FUNCTION_DEF nodes with an IDENT
> child with text 'main' and a PARAMS_DEF child that has two children,
> the first of which has a TYPE node with type 'int' ...
> Does a symbol table help us with finding such a node?

Nodes are part of the AST. Symbol table stores node *attributes*.

> No. Which is easier: to extend the symbol table to include
> that information, or write a tree-search library to find it?

Neither. Let ANTLR write the tree-search library for you is what I'll
recommend.

> I think the library approach is easier, especially if we can use
> a preexisting nice, standard tree-search-library out there.

As Loring pointed out, trees for different apps are likely to be very
different indeed. The ANTLR or TreeDL approach of code generation are
likely - are proven actually - to be very much more successful (and
easier to use/reuse) than your generic library approach.

> > 2. It can be argued that the tree-grammar approach actually
> encourages
> > your "keep related code together" maxim. All the code (excluding
> > library code) that applies to a phase of your transformation is kept
> > together in one file - the grammar file.
> 
> No, you're going to need multiple passes on the tree.

I wrote (note the added empahasis): 

"All the code (excluding library code) that applies to a **phase** of
your transformation is kept together in one file - the grammar file."

> For the "main method" example, I want all my code that handles
> "main method C to Java" in one class. I don't want it
> spread across one grammar that stores method and parameter info
> in a symbol table, a second grammar that makes the change, and
> a third grammar that makes changes to any "main" function calls.

Sure, and you can build a framework that allows you to do that on top
of whatever approach you choose - TreeDL+visitors, ANTLR+tree-parsers
or even ad-hoc as you are doing.

> > 3. Complex tools require training investment before you can use then
> > effectively. Having invested in training to be able to ANTLR
> notation
> > for specifying lexers and parsers, tree parsers are the next logical
> step.
> 
> But I'm able to use the ANTLR lexer and parser without any real
> training. I should be able to *use* ANTLR without really knowing
> much about ANTLR grammars.

Did you require the same of Java?. To be able to use it without
knowing much about the language or it's libraries.

> I just want ANTLR to lex and parse
> C source and pass me the AST, and I'll take it from there.

Why use an AST at all?. Or indeed a generated lexer or parser?. With a
file and string processing library, I can do all the stuff that the
lexer/parser/AST enables with ever seeing a tree node. It would be
messy but it would be all Java and I probably won't even have to learn
Java. ;-)

> > 4. The comments about debugging apply equally to generated tree
> > parsers and hand-written tree walkers (they are often very similar).
> > The tree structure is the same in any case so print the AST as you
> please.
> 
> I'm not proposing "hand-written tree walkers" so much as
> a "tree searching and manipulation library". My whole
> point is that AST-to-AST translation is better done as a
> rule-based pattern-matching scheme than a top-down AST-walking
> scheme. Take a look at:
> http://jazillian.com/how.html
> And think about how you'd do all those things with a treewalker.
> i'm certain it would be horrendous.

It's a lot of work but the code structure would be simple and easy to
maintain.

> > 5. ANTLR support for hetero-ASTs could be improved but nothing you
> > have mentioned so far is beyond the support ANTLR 2.7.4's hetero-AST
> > support. Can you give an example where this is important?
> 
> I'm not sure what you mean. The ANTLR treewalker approach basically
> says "embed your actions at each node of the grammar". That's
> fine for certain apps, especially compilers, interpreters,
> and code-annotators. But I don't see how it would work for
> a complex source-to-source translator, in which the rules
> for transformation are complex.

That's how these apps are generally written nonetheless.

> > 7. Summary
> > ==========

> The problem is that I don't
> think the tree-grammar approach gets too complicated until
> you've got a pretty large system. I think the first 10% of
> my C-to-Java translator would be fine using a treewalker.
> But soon the symbol table would seem to be completely
> inadequate and I'd end up with all sorts of AST-searching
> code anyway.

I feel I should repeat that you probably would benefit from reviewing
the literature on static code analysis techniques and implementations.
That's what you are doing in an ad-hoc fashion. It will hurt
eventually as you attempt more complex analysis. IOW, some of the
issues you raise are really about tree-library vs tree-grammar IMHO.

Cheers,

Micheal
ANTLR/C#





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From atripp at comcast.net  Sun Nov 21 13:57:22 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] Re: ITLS (was: Translators Should Use Tree Grammars)
In-Reply-To: <16800.16601.192395.192669@despot.non.net>
Message-ID: <cnr302+ag56@eGroups.com>



John,
Interesting read.
I don't know if my reply has anything to do with what you said,
but here goes anyway :)

When deciding on an approach (meaning a programming language,
tools, etc) to a programming problem, I first try to describe some
examples in normal english. So, with a C-to-Java translator,
I start saying "I'm going to have lots of specifications like the
following":

"Replace any C main() functions with equivalent Java main() functions".

I then try to describe an algorithm, also in English:

"Find any main() function that return 'int' (or no return type
is specified) and take two arguments - an 'int' and an
array of char pointers. Replace it with this signature:
'public static void main(String[] args)', and replace all references
to 'argc' with args.length and arg[] with args[]. Also,
deal with the off-by-one problem with args[]."

Then I look for the language or tool that lets me specify
my algorithm in a way that most closely matches my English
description.

For lexers and parsers, a BNF-like spec best matches
the English description of the problem (lexer: "A Token
is one of the following sequences of characters", for a parser,
"A package definition is the token 'package' followed by
an ID token, followed by zero or more "."-and-ID-token, followed
by a ';'").

Now sometimes a whole different way of approaching the problem
can work out in the end. For example, you might end up replacing
a lot of C++/Java code with a
a state machine or a set of "business rules" or whatever.
But requiring the application developer to change his mindset
in such a major way is a major burden. It must be extremely
clear at the end that there's a large benefit, as the
developer will constantly be struggling to re-phrase the
'natural' algorithm that first pops into his head, into the
new mechanism.

With lexers and parsers, the natural way to think about the
problem is clearly specified with a BNF-like grammar. But
with a complex AST-to-AST transformation, the natural thought
process is to have a sequence of 'rules' like:
"here are the steps to change the main() function".
This is much more intuitive then a set of actions embedded
in the BNF-like grammar, as the thought process there is
"Here are the things that I should do to translate 
a C FUNCTION_DEF to a Java one."

I have a rule to change a main() function, another to change
a printf() function, and dozens (or hundreds) of others.
These rules don't have a lot in common with each other, and 
I'd hate to have an action for each one at the FUNCTION_DEF
node in a grammar. I'd also hate to have a single
handleAllFunctionDefinitions() method that's called at each
function declaration. That's just not a natural way to think
about the problem.

As an aside, I guess I'm just a non-conformist.
I know full well that the "right" way to do a translator
is to parse into an AST and then do AST-to-AST conversion.
And I tried that for a few months and then abandoned it.
I'm just not smart enough to take a snippet of code,
parse it into an AST in my head, figure out what the "output"
AST should look like in my head, and write the code to
change it. Instead, I just want to write:
int main(int argc, char *argv[]) { --> public static void main(String
args) {

And so that's what I did. I started over, removed all the AST stuff,
and spent the next two years working
with token streams directly, building rules like that one.
It's horribly inefficient and error prone, but I do spend
95% of my time thinking about what the rules should be.
With the AST stuff, I spent probably 80% of my time figuring out
how to implement the rules and only 20% on what the rules should
be.

And please don't dismiss me as "some lunatic that doesn't
even believe in symbol tables", I'm just not believing in them
for certain applications. And the performance requirements for
a one-time source-to-source translator are completely different
from those for a compiler or interpreter.

Andy








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Sun Nov 21 13:59:49 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] OOPS! Re: Translators Should Use Tree Grammars
In-Reply-To: <cnr2c1+124e@eGroups.com>
Message-ID: <cnr34l+tna8@eGroups.com>



--- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...>
wrote:

Correction:

> IOW, some of the
> issues you raise are really about tree-library vs tree-grammar IMHO.

should have been:

"IOW, some of the issues you raise are ***NOT*** really about
tree-library vs tree-grammar IMHO."

Cheers,

Micheal
ANTLR/C#





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From atripp at comcast.net  Sun Nov 21 15:03:55 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <9da4f4520411210934148360f1@mail.gmail.com>
Message-ID: <cnr6sr+93vg@eGroups.com>



--- In antlr-interest@yahoogroups.com, Oliver Zeigermann
<oliver.zeigermann@g...> wrote:
> I understand most of your stuff and especially the one about Magic.
> What I do not quite understand that - as it seems - for the parser you
> accept grammars are a concise language to describe the language to
> parse and seem to prefer it over pure Java. Why not for certain tree
> transformations? I understand in tree transformations the emphasis is
> not on revealing structure (analysis), but rahter on what to do with
> certain patterns (synthesis).Do you thing this the important
> difference?

Yes, I think that's it exactly.
It seems to me that something like a C-to-Java translator
is more like an English-to-Spanish translator than it is like
a C-to-object code compiler. The work that needs to be done
is so large and complicated, that it lends itself to
a pattern-matching-and-replacement approach rather than
a traverse-the-AST approach.

I did investigate some of the natural language translation tools,
and there were lots of different approaches, but most were
loose pattern-matching approaches. That's because parsing
English into a tree-like structure (English grammar...noun,
verb, etc) doesn't do much for you. The rules for translation
are so complicated that you can't say "when we see a noun, do
the following". You might think that you could say
"when we find adjective-noun, change it to noun-adjective", but
there are so many thousands of exceptions to that rule that
it doesn't help much to think in that way.

I mean look at this huge list of just some of what's
 needed to convert
C to Java, omitting almost all detail:
http://jazillian.com/how.html
How can you specify
that kind of functionality in a tree grammar?  You'll end up
with tens of thousands of lines of code embedded within
a couple of hundred lines of grammar. Moving the code
out into another file doesn't change much.

I don't want to "walk the tree", I want to "search the tree
for patterns and make replacements". If the tree transformations
can all be nicely specified in a little language (like TXL),
then that's fine. But from what I've seen, TXL looks
pretty limited and cryptic too.

Andy
> 
> Oliver






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Sun Nov 21 22:35:52 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <cnr0md+feab@eGroups.com>
References: <7C34B436-3B2B-11D9-A398-000A95891192@cs.usfca.edu>
	<cnr0md+feab@eGroups.com>
Message-ID: <16801.35016.21372.511678@despot.non.net>


>>>>> "atripp54321" == atripp54321  <atripp@comcast.net> writes:
[...]

>> I'll counter by saying we shouldn't be printing back this way. ;)
>> Templates are the name of the game for generating output :) If the
>> output is very similar to the input, a better way is to just do my
>> tricks: either TokenStreamRewriteEngine or track token order in the tree
>> so you can dump automatically :)

> Yea, I suppose a treewalker is fine when the output is so very close to
> just a printing of the inorder traversal of the AST.  But I'm still not
> convinced that a treewalker is the best for very complex AST-to-AST
> transformations.

I'm confused.  Are you talking about source output or tree manipulations
(or both)?

For emitting source, a tree walker which builds up attributes on the way
down and emits (using e.g., StringTemplates) when coming back up is pretty
slick.

For generating new trees, you might want to check out the recent thread
where Loring and I talked about tree creation instruction streams.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Sun Nov 21 22:45:20 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <cnr6sr+93vg@eGroups.com>
References: <9da4f4520411210934148360f1@mail.gmail.com>
	<cnr6sr+93vg@eGroups.com>
Message-ID: <16801.35584.115989.287460@despot.non.net>


>>>>> "atripp54321" == atripp54321  <atripp@comcast.net> writes:
>>>>>> <oliver.zeigermann@g...> wrote:
[...]

>> I understand most of your stuff and especially the one about Magic.
>> What I do not quite understand that - as it seems - for the parser you
>> accept grammars are a concise language to describe the language to parse
>> and seem to prefer it over pure Java. Why not for certain tree
>> transformations? I understand in tree transformations the emphasis is
>> not on revealing structure (analysis), but rahter on what to do with
>> certain patterns (synthesis).Do you thing this the important difference?

> Yes, I think that's it exactly.  It seems to me that something like a
> C-to-Java translator is more like an English-to-Spanish translator than
> it is like a C-to-object code compiler. The work that needs to be done is
> so large and complicated, that it lends itself to a
> pattern-matching-and-replacement approach rather than a traverse-the-AST
> approach.

You've just given the rationale for running the hell away from the insanity
caused by "pattern-matching-and-replacement" approaches... They fail to
hold up under the pressure of non-trivial systems.  The very fact that
their behavior is incestuously emergent destroys any semblance of
robustness in the face of change, clarity in debuggability, etc.  The
simplest example of this nightmare is XSLT.  Even hardcore (from a rigor
POV) approaches like prolog work well only for constrained domains and
contexts).


[...]

> I mean look at this huge list of just some of what's needed to convert C
> to Java, omitting almost all detail: http://jazillian.com/how.html How
> can you specify that kind of functionality in a tree grammar?  You'll end
> up with tens of thousands of lines of code embedded within a couple of
> hundred lines of grammar. Moving the code out into another file doesn't
> change much.

Multiple phases.


> I don't want to "walk the tree", I want to "search the tree for patterns
> and make replacements".

That's exactly what a tree walker gives you.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Sun Nov 21 23:12:46 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] Re: ITLS (was: Translators Should Use Tree Grammars)
In-Reply-To: <cnr302+ag56@eGroups.com>
References: <16800.16601.192395.192669@despot.non.net>
	<cnr302+ag56@eGroups.com>
Message-ID: <16801.37230.160995.265724@despot.non.net>


>>>>> "atripp54321" == atripp54321  <atripp@comcast.net> writes:
[...]

> John, Interesting read.  I don't know if my reply has anything to do with
> what you said, but here goes anyway :)

:-)

FWIW, I quite like your forthrightness in who you are and where you're
coming from.

> Now sometimes a whole different way of approaching the problem can work
> out in the end. For example, you might end up replacing a lot of C++/Java
> code with a a state machine or a set of "business rules" or whatever.

You do realize that any code is just a state machine, encoding the rules
for creating and transforming various internal and external relationships,
right?  The fact that that nature is obscured/lost is, IMNSHO, a
fundamental flaw of general purpose programmings languages.


> But requiring the application developer to change his mindset in such a
> major way is a major burden. It must be extremely clear at the end that
> there's a large benefit, as the developer will constantly be struggling
> to re-phrase the 'natural' algorithm that first pops into his head, into
> the new mechanism.

If all you know is how to use your claw hammer, you're not going to be a
very good carpenter (or handyman or electrician or plumber or CEO).

Nothing personal but I must say that I find an awful lot of the arguments
in the software world are nothing more than multi-party monologues where
each person is arguing "my claw hammer kung fu is always better than your
stupid nail gun kung fu".  Argue enough for your limitations and sure
enough, they're yours. :-)


> With lexers and parsers, the natural way to think about the problem is
> clearly specified with a BNF-like grammar. But with a complex AST-to-AST
> transformation, the natural thought process is to have a sequence of
> 'rules' like: "here are the steps to change the main() function".  This
> is much more intuitive then a set of actions embedded in the BNF-like
> grammar, as the thought process there is "Here are the things that I
> should do to translate a C FUNCTION_DEF to a Java one."

Again, you've described precisely what a tree grammar is for.  Your task is
translating from one language to another and a grammar is the fundamental
unit of language understanding and transformation.

[...]

> And so that's what I did. I started over, removed all the AST stuff, and
> spent the next two years working with token streams directly, building
> rules like that one.  It's horribly inefficient and error prone,
						      ^^^^^^^^^^^

"And that, my young apprentice, is why you fail [this lesson]."  :-)

As my "rule" pointed out, what you've done is spent a lot of time and
effort in (poorly) recreating language translation grammars.  Part of the
confusion is that you haven't realized/admitted that yet because you
haven't yet done the homework to learn the lingo (to be able to communicate
with the language translation community) and ways that people have been
developing and using in translation work for many years.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From anakreonmejdi at yahoo.gr  Mon Nov 22 03:24:01 2004
From: anakreonmejdi at yahoo.gr (Anakreon)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <cnr0md+feab@eGroups.com>
References: <cnr0md+feab@eGroups.com>
Message-ID: <41A1CC51.8030309@yahoo.gr>


> Yea, I suppose a treewalker is fine when the output is so very
> close to just a printing of the inorder traversal of the AST.
> But I'm still not convinced that a treewalker is the best
> for very complex AST-to-AST transformations.
> 
> Andy
In my opinion treewalker is capable for complex transformations.
For example, in ASPA a Jscript class declaration is transformed
into a PHP class declaration.
See this code for example:
    function getWidth() {
        return this.width;
    }


    function setWidth(w) {
        this.width = w;
    }


    function getDimension() {
        return Math.pow(this.width, 2);
    }

    function Rectangle() {
        this.pos = new Point(0, 0);
        this.width = 10;
        this.attr = aa;
        this.getDimension = getDimension;
        this.getWidth = getWidth
        this.setWidth = setWidth;
        this.getPosition = getPosition
        this.setPosition = setPosition;
        this.incPos = function() {
            this.pos.x++;
            this.pos.y++;
        }
        this.toString = function() {
            return "[" + this.pos.x 
            + ", " + this.pos.y
            + ", " + (this.pos.x + this.width)
            + ", " + (this.pos.y + this.width) + "]";
        }
    }


    function getPosition() {
        return this.pos;
    }

    function setPosition(x, y) {
        this.pos.setX(x);
        this.pos.setY(y);
    }


    function Point(x, y) {
        this.x = x;
        this.y = y;
        this.setX = _X;
        this.setY = _Y
    }

    function _X(x) {
        this.x = x;
    }

    function _Y(y) {
        this.y = y;
    }

which declares a class Rectangle and Point
The transformed code in PHP looks like:
class Rectangle {
  var $width;
  var $pos;
  var $attr;
  function Rectangle() {
    global $aa;
    $this->pos = new Point(0, 0);
    $this->width = 10;
    $this->attr = $aa;
  }
  function getDimension() {
    return pow($this->width, 2);
  }
  function getWidth() {
    return $this->width;
  }
  function toString() {
    return "[" . $this->pos->$x . ", " . $this->pos->$y . ", " . ($this->pos->$x + $this->width)
 . ", " . ($this->pos->$y + $this->width) . "]";
  }
  function setWidth($w) {
    $this->width = $w;
  }
  function setPosition($x, $y) {
    $this->pos->setX($x);
    $this->pos->setY($y);
  }
  function incPos() {
    $this->pos->$x++;
    $this->pos->$y++;
  }
  function getPosition() {
    return $this->pos;
  }
}

class Point {
  var $y;
  var $x;
  function Point($x, $y) {
    $this->x = $x;
    $this->y = $y;
  }
  function setY($y) {
    $this->y = $y;
  }
  function setX($x) {
    $this->x = $x;
  }
}

The transformations involved are complex and are handled with the treewalker
Antrl generates.
The code generation is handled by a TreeParser which recognizes the generated AST of the
translator(AST of PHP) and a class of 171 lines (including the header which declares that
the source is GPL).

Personally I found no limitations in the TreeParser approach although I believe that the
transformations involved are quite complex.

Anakreon 


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-KwzqFF9svaaUTiFtm=RjF9U at yahoogroups.com  Mon Nov 22 06:11:46 2004
From: antlr-interest-accept-KwzqFF9svaaUTiFtm=RjF9U at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:37 2004
Subject: MODERATE -- prashantdeva@yahoo.com posted to antlr-interest
Message-ID: <1101132706.424.76678.m10@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  prashantdeva@yahoo.com 

The message summary:
--------------------
FROM: prashantdeva@yahoo.com 
DATE: Mon, 22 Nov 2004 14:10:07 -0000 
SUBJECT: Is it possible to pause/resume parsing/lexing with ANTLR? 

Is it possible that say in the middle of a multi line 
comment, i tell the parser/lexer to stop parsing, save some 
info, then when i want to resume parsing i can just feed 
that info back in the parser and it will just continue where
it left off. I also wont have to specially specify whether 
to parse a comment or anything. Just that i feed in that 
info, and call a general method say 'parse' and it just 
resumes parsing where it left off. 

Stuff like this can be really useful in making editors for 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=375 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-KwzqFF9svaaUTiFtm=RjF9U@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "prashantdeva" <prashantdeva@yahoo.com>
Subject: Is it possible to pause/resume parsing/lexing with ANTLR?
Date: Mon, 22 Nov 2004 14:10:07 -0000
Size: 2016
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041122/a3e8a97f/attachment.mht
From atripp at comcast.net  Mon Nov 22 06:40:17 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <16801.35016.21372.511678@despot.non.net>
Message-ID: <cnstoh+66se@eGroups.com>



--- In antlr-interest@yahoogroups.com, "John D. Mitchell"
<johnm-antlr@n...> wrote:
> >>>>> "atripp54321" == atripp54321  <atripp@c...> writes:
> [...]
> 
> >> I'll counter by saying we shouldn't be printing back this way. ;)
> >> Templates are the name of the game for generating output :) If
the
> >> output is very similar to the input, a better way is to just do
my
> >> tricks: either TokenStreamRewriteEngine or track token order in
the tree
> >> so you can dump automatically :)
> 
> > Yea, I suppose a treewalker is fine when the output is so very
close to
> > just a printing of the inorder traversal of the AST.  But I'm
still not
> > convinced that a treewalker is the best for very complex
AST-to-AST
> > transformations.
> 
> I'm confused.  Are you talking about source output or tree
manipulations
> (or both)?

I'm saying that a treewalker may be ok for source output, but
I still don't think it's good for tree manipulations.

> 
> For emitting source, a tree walker which builds up attributes on
the way
> down and emits (using e.g., StringTemplates) when coming back up is
pretty
> slick.

Isn't the only thing it needs to "build up" the level if indentation?

Also, your "pretty slick" phrase worries me.
The goal is always to write code that works and can be easily
understood by others, not to be clever.

To (mis) quote Kernighan: "If you ever find a section of your
code that you find particularly clever, strike it out and
do it again."

> 
> For generating new trees, you might want to check out the recent
thread
> where Loring and I talked about tree creation instruction streams.

OK, thanks.
> 
> Take care,
> 	John





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From prashantdeva at yahoo.com  Mon Nov 22 06:10:07 2004
From: prashantdeva at yahoo.com (prashantdeva)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] Is it possible to pause/resume parsing/lexing with ANTLR?
Message-ID: <cnsrvv+2d5i@eGroups.com>




Is it possible that say in the middle of a multi line comment, i tell
the parser/lexer to stop parsing, save some info, then when i want to
resume parsing i can just feed that info back in the parser and it
will just continue where it left off. 
I also wont have to specially specify whether to parse a comment or
anything. Just that i feed in that info, and call a general method say
'parse' and it just resumes parsing where it left off.

Stuff like this can be really useful in making editors for IDE's cause
say everytime a user types a character inside a comment , i dont have
to parse right from the begining. I just put in some info in the
parser and it just eats the next letter typed , without me having to
tell it anything specifically like 'resume comment parsing' or anything.

PRASHANT








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Mon Nov 22 09:42:10 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] Ad hoc simplisticity (was: Translators Should Use Tree Grammars)
In-Reply-To: <cnstoh+66se@eGroups.com>
References: <16801.35016.21372.511678@despot.non.net>
	<cnstoh+66se@eGroups.com>
Message-ID: <16802.9458.6067.409668@despot.non.net>


>>>>> "atripp54321" == atripp54321  <atripp@comcast.net> writes:
>>>>>> <johnm-antlr@n...> wrote:
>>>>>>> "atripp54321" == atripp54321 <atripp@c...> writes:
[...]

>>> Yea, I suppose a treewalker is fine when the output is so very close to
>>> just a printing of the inorder traversal of the AST.  But I'm still not
>>> convinced that a treewalker is the best for very complex AST-to-AST
>>> transformations.

>> I'm confused.  Are you talking about source output or tree manipulations
>> (or both)?

> I'm saying that a treewalker may be ok for source output, but I still
> don't think it's good for tree manipulations.

Okay, well, sigh... Since you haven't done your homework and don't seem to
understand tree grammars and don't seem to be acknowledging that need, this
will be my last post in this thread.

>> For emitting source, a tree walker which builds up attributes on the way
>> down and emits (using e.g., StringTemplates) when coming back up is
>> pretty slick.

> Isn't the only thing it needs to "build up" the level if indentation?

Hmm... Aren't you the one who was complaining about the need to be able to
emit things in whatever order you want?  Geez.


If I may be so bold, it seems rather clear to me that you're suffering from
the all too common malady of confusing simplistic for simple (and
simplicity for simplisticity).  Ad hoc approaches are often justified based
upon their local, so-called "simplicity" but, alas, that's just another
garden path.  I.e., it's not just that you can't see the forest for the
trees but that you're missing the trees by looking only at some bark.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Mon Nov 22 10:24:55 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] ITLS (was: Translators Should Use Tree Grammars)
In-Reply-To: <9da4f452041121091671bbbaff@mail.gmail.com>
References: <24D056E8-3779-11D9-A398-000A95891192@cs.usfca.edu>
	<cnlui0+l878@eGroups.com>
	<16800.16601.192395.192669@despot.non.net>
	<9da4f452041121091671bbbaff@mail.gmail.com>
Message-ID: <16802.12023.228438.874074@despot.non.net>


>>>>> "Oliver" == Oliver Zeigermann <oliver.zeigermann@gmail.com> writes:
>>>>>> <johnm-antlr@non.net> wrote:
[...]

>> * Any non-trivial program written in a general purpose programming
>> language contains ad-hoc, bug-ridden, inarticulate implementations of
>> multiple, informally-specified, incomplete languages.

> What are you referring to here: the equivalence of phrase structure
> grammars and a turing machine? If so, program and grammar are just two
> ways to look at a problem with neither of them having precedence over the
> other. So, your argument does not seem to be too convincing to me.

I'm saying that programmers, whether they understand this or not, are
*always* creating and manipulating languages when they create and modify
code.

I'm saying that general purpose programming languages (GPPLs) almost
completely miss that point and therefore the code that people write in
those GPPLs are almost always extremely poor, confusing, bug-ridden,
etc. implementations of the informally-specified (usually implicit),
horribly designed (usually accreted rather than actually designed)
languages that the programmer is creating and manipulating.


[For the "linguists" in the audience, let me humbly suggest looking at the
history and evolution of programming languages slightly differently...
There are two primary thrusts of GPPL development, mathematics (formal
logic, symbolism, abstractionism) and hardware abstraction (performance,
mechanistic, conformist).  All GPPLs are some combination of the tradeoffs
between those two (often conflicting) needs.  Given the historical lack of
hardware horsepower, it's no wonder that the hardware abstraction camp has
been so dominant.  This left the abstract, mathematics school of thought on
the mostly research fringe where they've had to watch their old ideas get
"rediscovered" (usually poorly :-) by succeeding generations of the popular
GPPLs.  Structured programming, functional programming, meta-programming,
dynamic languages, OOP, OOD, patterns, etc.  So far, that all is fairly
commonly understood.  Now, take a step to the left and look again at that
evolution in terms of how all of those approaches are about trying to get a
grip on the real languages that the programmers are trying to create and
manipulate to develop (as) their systems.]


The mainstream (of the self-styled programming avant garde, anyways :-) is
finally starting to play around in this direction.  To wit, look at all of
the work on pattern languages and domain specific languages.  Look at all
of the sudden, "revolutionary" interest in code generation and
reflection-based code manipulation.  Look at the press that folks like
Gosling got for working on a toolset based upon manipulating abstract
representations of programs.  Etc.  Heck, look at the growing buzz over the
"Language Oriented Programming" pitch by the founder of JetBrains (the
IntelliJ IDE company).

For example, look at the continuing evolution of "aspect oriented
programming" -- they are trying to backfit the ability to create and
manipulate (higher-level) languages on top of the existing GPPLs.  As their
ad hoc approach continues to run into more and more fundamental problems,
they continue to try to increase the power of their approach -- alas,
mostly through more ad hoc measures (conventions, etc.).


Hope this helps,
		John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From sk at z.pl  Mon Nov 22 11:53:52 2004
From: sk at z.pl (Sebastian Kaliszewski)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] ITLS
In-Reply-To: <16802.12023.228438.874074@despot.non.net>
References: <24D056E8-3779-11D9-A398-000A95891192@cs.usfca.edu>	<cnlui0+l878@eGroups.com>	<16800.16601.192395.192669@despot.non.net>	<9da4f452041121091671bbbaff@mail.gmail.com> <16802.12023.228438.874074@despot.non.net>
Message-ID: <41A243D0.8060900@softax.pl>


John D. Mitchell wrote:
[snip]
> I'm saying that general purpose programming languages (GPPLs) almost
> completely miss that point and therefore the code that people write in
> those GPPLs are almost always extremely poor, confusing, bug-ridden,
> etc. implementations of the informally-specified (usually implicit),
> horribly designed (usually accreted rather than actually designed)
> languages that the programmer is creating and manipulating.

Well, just to clarify things and make your point more clear, which (might be 
no GPPL -- I 100% agree that typically they are bad) language you like then? 
Or which one is closest to your likings, or at list a step in right 
direction? Or what your ideal language be look like?

[snip]
> The mainstream (of the self-styled programming avant garde, anyways :-) is
> finally starting to play around in this direction.  To wit, look at all of
> the work on pattern languages and domain specific languages.  Look at all
> of the sudden, "revolutionary" interest in code generation and
> reflection-based code manipulation.  Look at the press that folks like
> Gosling got for working on a toolset based upon manipulating abstract
> representations of programs.  Etc.

1963 Lisp macros revisisted ;) ?

>  Heck, look at the growing buzz over the
> "Language Oriented Programming" pitch by the founder of JetBrains (the
> IntelliJ IDE company).

This all (LOP) looks nice at first glance but there are big problems sitting 
in there. First of the being the fast that definig a DSL is not that easy 
task --  doing it right requires above average competence. The author slides 
easily over that (fig. 2 lacks one important thing long ------> for creating 
proper DSL).

> 
> For example, look at the continuing evolution of "aspect oriented
> programming" -- they are trying to backfit the ability to create and
> manipulate (higher-level) languages on top of the existing GPPLs.  As their
> ad hoc approach continues to run into more and more fundamental problems,
> they continue to try to increase the power of their approach -- alas,
> mostly through more ad hoc measures (conventions, etc.).

Most of that AOP looks like (and IMHO in fact is) just a "higher order hack".


rgds
-- 
Sebastian Kaliszewski



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From doublemalam at yahoo.co.uk  Mon Nov 22 12:06:52 2004
From: doublemalam at yahoo.co.uk (Muhammad Masoom Alam)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] how to perform exact matching during tree parsing instead of sufficient matching
In-Reply-To: <41A243D0.8060900@softax.pl>
Message-ID: <20041122200652.48997.qmail@web86902.mail.ukl.yahoo.com>


 

Dear all,

 

As mentioned in the documentation of ANTLR that it performs sufficient matches instead of exact matches.

 

But I want exact match , I have a the following lines of code

 

check_rule

            :  (#(AND #(OR somerule1) #(IMPLIES somerule2)))

            | ( #(AND somerule3) #(IMPLIES somerule4)) 

            ;

 

it doesnot work 

 

I have tried the solution as follows

 

Check_rule 

: (#(AND #(OR somerule1) #(IMPLIES somerule2)))=> (#(AND #(OR somerule1) 

#(IMPLIES somerule2)))

|

( #(AND somerule3) #(IMPLIES somerule4))  => ( #(AND somerule3) #(IMPLIES somerule4))

 

if some body can help me in this

Regards

Muhammad.

 

		
---------------------------------
 ALL-NEW Yahoo! Messenger - all new features - even more fun!  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041122/2ed6a4e9/attachment.html
From atripp at comcast.net  Mon Nov 22 13:16:12 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <cnr2c1+124e@eGroups.com>
Message-ID: <cntkus+eo4s@eGroups.com>



--- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...>
wrote:
> 
> --- In antlr-interest@yahoogroups.com, "atripp54321" <atripp@c...>
wrote:
> 
> Hi Andy,
> 
> > > Section-secific comments:
> > > =========================
> > > 
> > > 1. The Complex Case: Tranforming a C AST to a Java AST
> > > ======================================================
> 
> > > To be able to answer queries such as "get all VAR_REF nodes that
> > refer
> > > to this declaration" efficiently, you would have added
appropriate
> > > attributes during the symbol table construction pass(es).
> > 
> > Right. My problem is that the amount of information I feel I'd
> > need in the symbol table is HUGE. Some examples of info I need:
> > 
> > "Is this variable ever used in an expression where I could change
> > it to from an int type to a boolean type?"
> > 
> > "Is this variable v ever used later in this function in either
> > 'v = x;' form or 'if (v)' form?"
> > 
> > "Is this method named 'main' and have two arguments, one of 'int'
> > type and the second of 'char *[]', 'char **', or similar type?"
> > 
> > "What other variables are assigned a value in which this variable
> > is part of the value?"
> 
> A symbol table is a data structure (or set of data structures) that
> stores and supports provides fast query of [some] AST node
attributes.
> Some of those attributes may either fully answer or help in
answering
> your queries.

I know what a symbol table is, thank you.
I've just made the point that I don't think that a symbol
table typically contains the sort of information that I
just gave four examples of.

> 
> Your particular usage - a C-to-Java translator - would require no
more
> than is typically stored in a symbol table. 

So you believe that a symbol table typically contains answers
to the kinds of questions I list above? If so, can you
give me a reference to such an implementation, or mention
of one in the literature? Maybe I just haven't kept up to
date, but I've always read that a symbol table contains
little more than variable and method declaration and
scope information.

> You are performing static
> code analysis and there are established techniques and literature on
> the subject...

Yes, and I'm saying that I've tried the established techniques
and found them severely lacking.

> 
> > You're probably thinking that these would not go into the symbol
> > table, I would just have to write AST-searching code for that.
> > My point is that by the time I've got this huge library of
> > AST-searching code to do these things, the symbol table is
> > superfluous.
> 
> You build the symbol table (or at least collect the information it
> contains and performs the semantic checks it enables in some other
> way) as part of the process of building an AST. If you know all your
> input programs will be always be correct, you can skip parts of the
> process. Unless your post-parse analysis needs the information.....

I don't think you're addressing what I said: I'm saying that
if I make my symbol table so complicated that it contains the
information that I need (e.g. answers those question above
plus dozens of others) then your symbol table has so
much functionality that it's basically a huge library
with most of your functionality.

> 
> > > 2a. Keeping the TreeStack and SymbolTable in sync with the AST
> > > ==============================================================
> 
> > No, we're not just talking about renaming local variables,
> > we're talking about hundreds of different transformations,
> > of which renaming local variables is just one example.
> 
> Fine. Provide "hooks" into your processing flow and plug in your
> "transformation objects". The rename point above might be one place
to
> provide a hook for rules that deal with local variables.

OK, and my app would best be served by having each node's
action be the same: check to see if this node in the AST
matches any of my "transformation rules", and do the
corresponding transformation. And of course, at that point,
I'm not really using the power of the treewalker approach.

> 
> > My objection is the way the tree grammar approach slices the
> > problem. You have this line above:
> >               // process global variable decl
> > 
> > Well, there may be dozens of "rules" or "transformations" that
> > apply to global variables. I don't want one section of
> > code where global variable declarations are handled, with
> > bits and pieces of each of these "rules" embedded there.
> 
> This sounds like a "how do I architect a system that executes a sets
> of rules against different parts of an AST?" question to me rather
> than a tree-library vs tree-grammar approach question.

Yes, that's the question exactly. And the answer is either
"use a tree-library" or "use a tree-grammar".
> 
> You can have a look at how tools like PMD and CheckStyle are
architected.

OK, I'll check those out, thanks.

> 
> > > 2b. Do you want methods in AST or TreeStack?
> > > ============================================
> > > 
> > > decl.Scope.getAllBindings() or similar should give you a list
of all
> > > names in the scope. This isn't a tree-grammar approach benefit.
> > ANTLR
> > > does nothing to help or hinder the requirement that the symbol
table
> > > code has to be written.
> > > 
> > > Since the symbol table stores extended node attributes, there
isn't
> > a
> > > question of which is more "natural". 
> > 
> > Again, my issue is that by the time you've extended the symbol
> > table to include all the information I want, it's become
> > a monster (see example questions earlier).
> 
> There is no need to "extend" the symbol table. It has information in
> it and you decide based on your requirements what analysis functions
> you wish to expose (and can expose efficiently). If you need more,
you
> employ additional formalisms and techniques in static code analysis.
> 
> > > The binding attribute on the node
> > > is where the actions starts:
> > >   IBinding decl  = #varid.Binding;
> > >   IList bindings = decl.Scope.getAllBindings();
> > 
> > Objection, your honor! The defense is mixing ANTLR grammar
> > with Java code again! Sorry :) Yo just cringe cada vez
> > Veo languages mezclado together. It's very hard to read
> > if you don't know both languages.
> 
> Do you similarly cringe when you use ANTLR to build lexers and
> parsers?. Is there some reason why you feel tree-parsers are any
> different?

No, because there's no mixing of code there, it's all ANTLR.
And besides, I can (pretty much) use ANTLR without understanding
the grammar syntax - just use the .g files that came with it.

> 
> > > 2c. Sometimes you need multiple passes
> > > ======================================
> > > 
> > > Given all the information that the symbol table construction
phase
> > > accumulates, it would be pretty easy to provide a
getAllGlobalVar()
> > > method on the symbol table object itself. Combined with the
> > > getAllReferringNodes() method on the nodes, what you propose is
> > > trivially accomplished. And without expensive (re-)calculation.
> > 
> > But what about maintenance? You need to keep it up to date.
> > I may have 20 different "transformation rules" that can
> > change a global variable declaration. That means the symbol
> > table has to be notified and be able to handle each of these
> > changes, or it has to be smart enough to know when its become
> > out of date and regenerate itself.
> 
> So you need an updatable symbol table?. Build one. Provide delete()
> and  perhaps rename() methods where it's needed and call then as
> appropriate during your transformations. Don't see a problem here
sorry.

By the time the symbol table contains all the functionality
I need, it's no longer a "symbol table" (at least not like
one I've ever heard of), it's a "tree library".

> 
> > > 4. Comparing approaches by analyzing ease of change
> > > ===================================================
> > > 
> > > In your third change - we want three blank lines after the
"package"
> > > line instead of two - I can't understand why there is any
confusion
> > in
> > > the tree-grammar approach. If you are adding lines *after* the
> > output
> > > from the package rule and, the rootID rule calls the package
rule
> > then
> > > the change would be in the rootID rule. In your description, it
is
> > > clear that the rootID rule prints the current two lines in any
case.
> > 
> > With the tree grammar approach, isn't the whole idea that
> > each node just prints itself?
> 
> Where did you get this idea from. The tree-grammar approach lets you
> build tree-walkers by specify a grammar for the tree that is to be
> walked and action code to execute as the tree is walked. What your
> action code does is up to you.

Right, but the whole point of the tree grammar is to minimize
the amount of code that you have to write. What's the point
of embedding 30,000 lines of code inside a 350 line grammar,
if you could have just written 30,020 lines that do the same
thing?

> 
> > So in that case, the treewalker approach isn't buying you
anything.
> 
> Time. You don't have to write the tree parsers by hand.

Only if a top-down walk of the tree is the basis of the
code that you need. If your code is something else (like
applying a series of pattern-matching rules), then
you have to write all the code even when using a tree grammar.

> 
> > > In your fourth change - we want to change the order of
> > printing...and
> > > print the static block before the variable declarations for
example
> > -
> > > you can simply employ multiple output writers. Buffer all static
> > > blocks in one writer, all variable declarations in another etc.
At
> > the
> > > end print contents of the various writers in any order you
wish. No
> > > need to modify the AST structure.
> > 
> > And isn't that quite a bit more involved than:
> >     print(getChild(ast, PACKAGE_DEF));
> >     printChildren(ast, "\n",  IMPORT);
> >     out.println();
> >     out.println();
> >     print(getChild(ast, CLASS_DEF));    // only one of these...
> >     print(getChild(ast, INTERFACE_DEF));  // will print anything
> >     out.println();
> 
> This seven lines of code don't matter much. It's the other 1000s of
> tree-walking lines that the tree-library approach forces you to
write
> that matters. In the tree-grammar approach, ANTLR generates all
that.

No, it doesn't generate any of that.
The only thing the tree grammar approach is giving you is that
its walking the tree for you. You still have to write all the
code that does everything else.

> 
> Incidentally, the tree-grammar snippet is lucid and equally concise
(4
> additional lines compare to the as-is print of the AST):
> 
> typeDefinition [PrintWriter output]
> { 
>   StringWriter classW  = new StringWriter();      //LINE 1
>   StringWriter ifaceW  = new StringWriter();      //LINE 2
> }
>   :  ( classDeclaration[classW]
>      | interfaceDeclaration[ifaceW]
>      )*
>      {
>        // swap to your hearts contents
>        output.write(classW.toString();          //LINE 3
>        output.write(ifaceW.toString();          //LINE 4
>      }
>   ;

I'm sorry, I just don't think that's as clear.
Most of that's because I know Java much more than I know
ANTLR. But most people know Java (or C, C++, or C#) much
more than ANTLR.

> 
> > > 5. Limitations of TreeWalkers
> > > =============================
> > > 
> > > I don't see a tree-grammar limitation here Andy. I may be wrong
but,
> > > isn't the real problem that "a[3]" is an array access while
"int[]
> > x"
> > > is an array declaration?. If I am right they would have
difference
> > AST
> > > representations in any case.
> > 
> > No, the problem is that a C array declaration can take either
form:
> > int a[3];
> > int[3] a;
> 
> And they mean the same thing right?. Isn't the point of an AST to
> remove concrete syntax irregularities like this?. Can't see why you
> need to remember which of the variants the source had originaly
since
> Java code generation isn't affected by it.

That's the point of ASTs in theory, but not in practice.
This cgram grammar does generate different ASTs
for these two inputs, for example.

> 
> > > In any case, I can't provide a tree-grammar equivalent of your
> > sample
> > > without knowing what the child of the ARRAY_DECLARATOR is when
it
> > > isn't an EXPR. In other words without knowing a bit more about
your
> > > tree's grammar.
> > 
> > The child of an ARRAY_DECLARATION is always an EXPR.
> 
> But "int[] x" has no expression....

Yes it does, it's just the empty expression - an EXPR with
no children.

> 
> > ...which highlights one of my major points: you need to understand
> > the AST structure whether you use a treewalker or not. I don't
> > even remember what the issue is here, but whatever it is, you're
> > about to go off and find an ARRAY_DECLARATION rule in an ANTLR
> > tree grammar and figure out how to stuff in some Java code.
> > I'd prefer to just be at an "case ARRAY_DECLARATION:" point
> > in some Java code, and just say:
> > 
> > AST expr = ast.getFirstChild();
> > doSomethingWithExpr(expr);
> 
> My generated tree-grammar does the same ultimately. I just don't
have
> to write all the code manually.

Which code is it that you don't have to write because of the
tree grammar? Isn't it only some simple code that walks the
tree? I mean, isn't it little more than this:
void walk(AST ast) {
   doSomeAction(ast);
   Iterator i = ast.getChildren().iterator();
   while (i.hasNext()) {
     AST child = (AST) i.next();
     walk(child);
   }
}



> 
> > > 6. Contrasting the approaches
> > > =============================
> > > 
> > > 1. Code generation isn't magic. We all use it quite happily for
> > lexers
> > > and parsers for instance. The same benefits exist for tree
parsers.
> > 
> > We use ANTLR-like tools for lexers and parsers because the
> > code they generate is straightforward and generic. Given a
grammar,
> > you know exactly what the lexer and parser code should look like.
> 
> So you are unfamiliar with tree parsers. Sounds like you could
benefit
> from learning more about them.

I think I do understand tree parsers. I understand what code
they will generate. But the code they generate is not
the best basis to build a translation app on top of.

A lexer is just a lexer: the ANTLR-generated lexer does its
job, and your app can just deal with it's output (a token stream).
A Parser does it's job so that you can deal with its output
(an AST). A treewalker is not providing a clear "output"
like a lexer or parser, it's just providing a framework to
automatically walk a tree, for you to embed your actions within.
My main point is that any sufficiently complex
translator will not have a top-down tree walk as it's
underlying framework.

> 
> > However, with AST-to-AST transformation, it's not at all clear
> > what the functionality needs to be. For example, given a "C source
> > AST" to "Java source AST", we would all come up with different
> > algorithms to do that transformation.
> 
> As we could about the structure of the AST we build in the parser.
Or
> if to build an AST at all. Or the names we give to our tokens in the
> lexer and how many there are. Or whether to use two lexers and a
> parser or just one of each etc....

Not really. Given the problem of lexing a single C source
file, we'd all choose the same solution: one lexer (generated from
some nice list of tokens). Given the problem of parsing a
single token-stream into an AST, we'd all chose the same solution:
a parser (generated from some BNF-like input grammar).

But given a single AST that represents a C program, some
would choose a treewalker to change it to a "Java AST", and
others would not.

> 
> > We would all end up with
> > a set of "rules" like "Find all FUNCTION_DEF nodes with an IDENT
> > child with text 'main' and a PARAMS_DEF child that has two
children,
> > the first of which has a TYPE node with type 'int' ...
> > Does a symbol table help us with finding such a node?
> 
> Nodes are part of the AST. Symbol table stores node *attributes*.

So then your answer is "no, a symbol table does not contain
that information". OK. And what if most of my app deals with
that type of information that's not available in a symbol
table?

> 
> > No. Which is easier: to extend the symbol table to include
> > that information, or write a tree-search library to find it?
> 
> Neither. Let ANTLR write the tree-search library for you is what
I'll
> recommend.

Whoa...I have no idea how that would work, but sounds interesting.

> 
> > I think the library approach is easier, especially if we can use
> > a preexisting nice, standard tree-search-library out there.
> 
> As Loring pointed out, trees for different apps are likely to be
very
> different indeed. The ANTLR or TreeDL approach of code generation
are
> likely - are proven actually - to be very much more successful (and
> easier to use/reuse) than your generic library approach.

Can you give me some examples of uses of ANTLR treewalkers 
to do complex translations? Someone else mentioned ASPA,
which I'm investigating now.

> 
> > > 2. It can be argued that the tree-grammar approach actually
> > encourages
> > > your "keep related code together" maxim. All the code (excluding
> > > library code) that applies to a phase of your transformation is
kept
> > > together in one file - the grammar file.
> > 
> > No, you're going to need multiple passes on the tree.
> 
> I wrote (note the added empahasis): 
> 
> "All the code (excluding library code) that applies to a **phase**
of
> your transformation is kept together in one file - the grammar
file."

OK, well I'm saying that a typical "translation rule" is going
to contain multiple phases. And it's going to be very hard
to keep the code for each rule separate from the others when
you have multiple phases.

> 
> > For the "main method" example, I want all my code that handles
> > "main method C to Java" in one class. I don't want it
> > spread across one grammar that stores method and parameter info
> > in a symbol table, a second grammar that makes the change, and
> > a third grammar that makes changes to any "main" function calls.
> 
> Sure, and you can build a framework that allows you to do that on
top
> of whatever approach you choose - TreeDL+visitors,
ANTLR+tree-parsers
> or even ad-hoc as you are doing.
> 
> > > 3. Complex tools require training investment before you can use
then
> > > effectively. Having invested in training to be able to ANTLR
> > notation
> > > for specifying lexers and parsers, tree parsers are the next
logical
> > step.
> > 
> > But I'm able to use the ANTLR lexer and parser without any real
> > training. I should be able to *use* ANTLR without really knowing
> > much about ANTLR grammars.
> 
> Did you require the same of Java?. To be able to use it without
> knowing much about the language or it's libraries.

Yes! I use many programs that are written in Java, C, and many
other languages without ever seeing their source code.
I use the Java libraries without understanding their internals.

Are you saying it's not reasonable for me to want to be
able to deal with ASTs without having to use ANTLR syntax?
Shouldn't I be able to just swap out ANTLR and plug in
lex/yacc or some other AST-generating tool (not that I
would, of course :)?

> 
> > I just want ANTLR to lex and parse
> > C source and pass me the AST, and I'll take it from there.
> 
> Why use an AST at all?. Or indeed a generated lexer or parser?.
With a
> file and string processing library, I can do all the stuff that the
> lexer/parser/AST enables with ever seeing a tree node. It would be
> messy but it would be all Java and I probably won't even have to
learn
> Java. ;-)

Heh, I know you're joking, but that's almost exactly what I
actually spent the last two years doing!
I built the lexer with ANTLR, and I use an ANTLR-generated parser
for expression processing, but the rest is pure Java.
The approach does have drawbacks, but I'm convinced that it
was the right decision.

I've got more source-to-source translation functionality
than I've seen than any other tool, by an order of magnitude.
(Feel free to show me one that has more, of course :)

> 
> > > 4. The comments about debugging apply equally to generated tree
> > > parsers and hand-written tree walkers (they are often very
similar).
> > > The tree structure is the same in any case so print the AST as
you
> > please.
> > 
> > I'm not proposing "hand-written tree walkers" so much as
> > a "tree searching and manipulation library". My whole
> > point is that AST-to-AST translation is better done as a
> > rule-based pattern-matching scheme than a top-down AST-walking
> > scheme. Take a look at:
> > http://jazillian.com/how.html
> > And think about how you'd do all those things with a treewalker.
> > i'm certain it would be horrendous.
> 
> It's a lot of work but the code structure would be simple and easy
to
> maintain.

Again, any examples of ANTLR treewalkers that 
have that much functionality?
> 
> > > 5. ANTLR support for hetero-ASTs could be improved but nothing
you
> > > have mentioned so far is beyond the support ANTLR 2.7.4's
hetero-AST
> > > support. Can you give an example where this is important?
> > 
> > I'm not sure what you mean. The ANTLR treewalker approach
basically
> > says "embed your actions at each node of the grammar". That's
> > fine for certain apps, especially compilers, interpreters,
> > and code-annotators. But I don't see how it would work for
> > a complex source-to-source translator, in which the rules
> > for transformation are complex.
> 
> That's how these apps are generally written nonetheless.
> 
> > > 7. Summary
> > > ==========
> 
> > The problem is that I don't
> > think the tree-grammar approach gets too complicated until
> > you've got a pretty large system. I think the first 10% of
> > my C-to-Java translator would be fine using a treewalker.
> > But soon the symbol table would seem to be completely
> > inadequate and I'd end up with all sorts of AST-searching
> > code anyway.
> 
> I feel I should repeat that you probably would benefit from
reviewing
> the literature on static code analysis techniques and
implementations.
> That's what you are doing in an ad-hoc fashion. It will hurt
> eventually as you attempt more complex analysis. 

Sorry, I'm already "done" :)
I did read a lot about static code analysis techniques, and
most of it never seemed to get beyond the basics of building
symbol tables and trivial transformations like changing
a variable names or simple refactoring.

> IOW, some of the
> issues you raise are really about tree-library vs tree-grammar IMHO.

That's what I'm trying for...that's what the thread's about.

Thanks,
Andy

> 
> Cheers,
> 
> Micheal
> ANTLR/C#





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Mon Nov 22 13:36:29 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] The AST thus far before an error
Message-ID: <Pine.LNX.4.44.0411221333280.18815-100000@g4.pauljlucas.org>


	It seems to be the case that, during parsing and AST
	generation, if an exception is thrown, the AST is trashed
	(specifically, the value of returnAST isn't propagated back up
	the call-stack).

	This is most unforunate.  I *really* need to build and keep the
	AST right up to the point an exception is thrown.  Is there any
	way to do this?

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Mon Nov 22 14:09:25 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] The AST thus far before an error
In-Reply-To: <Pine.LNX.4.44.0411221333280.18815-100000@g4.pauljlucas.org>
References: <Pine.LNX.4.44.0411221333280.18815-100000@g4.pauljlucas.org>
Message-ID: <2BF6CC3D-3CD3-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 22, 2004, at 1:36 PM, Paul J. Lucas wrote:

>
> 	It seems to be the case that, during parsing and AST
> 	generation, if an exception is thrown, the AST is trashed
> 	(specifically, the value of returnAST isn't propagated back up
> 	the call-stack).
>
> 	This is most unforunate.  I *really* need to build and keep the
> 	AST right up to the point an exception is thrown.  Is there any
> 	way to do this?

You can probably toss in an exception handler on each rule which 
prevents it from rippling back up the call chain.  Would that work?  Or 
I think an option will simply turn off all automatic recovery.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From oliver.zeigermann at gmail.com  Mon Nov 22 15:27:30 2004
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <cntkus+eo4s@eGroups.com>
References: <cnr2c1+124e@eGroups.com> <cntkus+eo4s@eGroups.com>
Message-ID: <9da4f45204112215272d71ec5@mail.gmail.com>


On Mon, 22 Nov 2004 21:16:12 -0000, atripp54321 <atripp@comcast.net> wrote:
> No, because there's no mixing of code there, it's all ANTLR.
> And besides, I can (pretty much) use ANTLR without understanding
> the grammar syntax - just use the .g files that came with it.

Just for me, as I tend to be a little sluggish: You use the ANTLR
grammar (for C) and let it generate the AST? Which is something that
can be done without any idea of ANTLR... Then you access this AST and
make the translation to Java as explained in your article, right?
Well, you would at least have to know the structure of the AST, or am
I getting it all wrong again?

 > Right, but the whole point of the tree grammar is to minimize
> the amount of code that you have to write. What's the point
> of embedding 30,000 lines of code inside a 350 line grammar,
> if you could have just written 30,020 lines that do the same
> thing?

I thought it might be because of readability and maintenance. Where
you have a separation of what describes the structure (the AST
traversal notation) and what is to be done (the Java code).

> Only if a top-down walk of the tree is the basis of the
> code that you need. If your code is something else (like
> applying a series of pattern-matching rules), then
> you have to write all the code even when using a tree grammar.

I think this is a strong argument. When you think of natural language
processing (or the translation Andy does) there hardly is
one-after-the-other processing.
 
Oliver


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Mon Nov 22 13:00:42 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <9da4f45204112215272d71ec5@mail.gmail.com>
References: <cnr2c1+124e@eGroups.com> <cntkus+eo4s@eGroups.com> <9da4f45204112215272d71ec5@mail.gmail.com>
Message-ID: <41A2537A.1030807@codetransform.com>


Oliver Zeigermann wrote:
> On Mon, 22 Nov 2004 21:16:12 -0000, atripp54321 <atripp@comcast.net> wrote:
> 
>>Only if a top-down walk of the tree is the basis of the
>>code that you need. If your code is something else (like
>>applying a series of pattern-matching rules), then
>>you have to write all the code even when using a tree grammar.
> 
> 
> I think this is a strong argument. When you think of natural language
> processing (or the translation Andy does) there hardly is
> one-after-the-other processing.

I found when doing my AREV translator that although I thought of my 
translations as being very specific -- translate AREV case statements 
into VB if-else statements, or translate dynamic array assignments into 
function calls -- I would simply implement them by overriding the few 
rules I needed to after subclassing from my tree grammar superclass. 
This let me do the usual tree grammar tricks like keeping track of the 
context.  In one case I had to distinguish between the root of an 
expression and sub-expressions -- this was easy in my tree grammar.

This may have not been very efficient since I was walking and building 
trees for every other rule even though I didn't need to.  The building 
far outweighs the walking, and Loring has been addressing that issue 
with his new tree code.

The dominant academic approach seems to be to let you define a "rule 
soup" and the engine figures out which rules must happen before which 
other rules.  This prolog-type approach leads to very hard to debug 
translators.

I agree that pattern-matching with ANTLR grammars is not fun, because 
you do the actual testing in actions or semantic predicates.  However, 
this is actually implemented as a tree walker in the BaseAST or 
CommonAST findAll and findAllPartial methods.

In the future ANTLR could have better support of pattern matching of 
trees.  I can't remember any specifics right now, but I'd be surprised 
if Loring hasn't already addressed it with the 2.8/3.0 tree stuff.

The thing is, once I've matched a pattern I usually want to do a 
transformation on it.  A natural way to do that is with templates -- one 
to match, the other to transform.  Please see 
http://www.erights.org/elang/quasi/overview.html for some examples (I 
helped flesh out some implementation details of those but it's really 
the work of Mark Miller).  The pattern can be written as source language 
code with special markers for generic expressions or whatnot.  The 
translation patter could be written in code as well and translated into 
a tree (assuming a parser exists) with appropriate parts copied from the 
original tree to the new tree.

The main point is that I still want to specify the order of my 
translations.  There are some directions ANTLR could go toward making 
the specification of translations easier, namely pattern matching and 
substitution.

Wish I had more time to flesh this out, maybe tomorrow.

Monty
http://www.codetransform.com


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-Wmu9Q_bKM5GGG_5xrjzjOAs at yahoogroups.com  Mon Nov 22 16:24:36 2004
From: antlr-interest-accept-Wmu9Q_bKM5GGG_5xrjzjOAs at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:37 2004
Subject: MODERATE -- jmcclain@tcshealthcare.com posted to antlr-interest
Message-ID: <1101169476.416.87721.m19@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  jmcclain@tcshealthcare.com 

The message summary:
--------------------
FROM: jmcclain@tcshealthcare.com 
DATE: Mon, 22 Nov 2004 16:29:49 -0800 
SUBJECT: antlr newbie - any example grammars out there? 

I am learning the ANTLR meta-Language. Are there any 
grammars out there that I can borrow from to create a simple

function parser as a test case? 

John McClain Senior Software Engineer TCS Healthcare 
jmcclain@tcshealthcare.com (530)886-1700x235 "Before you 
criticize someone, walk a mile in their shoes. That way, 
you'll be a mile from them, and you'll have their shoes." 

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=376 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-Wmu9Q_bKM5GGG_5xrjzjOAs@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "John MccLain" <jmcclain@tcshealthcare.com>
Subject: antlr newbie - any example grammars out there?
Date: Mon, 22 Nov 2004 16:29:49 -0800
Size: 1738
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041123/74bc1716/attachment.mht
From jmcclain at tcshealthcare.com  Mon Nov 22 16:29:49 2004
From: jmcclain at tcshealthcare.com (John MccLain)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] antlr newbie - any example grammars out there?
Message-ID: <JMEOIPJEDGMHCIOMBHLIAEOHDGAA.jmcclain@tcshealthcare.com>




I am learning the ANTLR meta-Language.
 Are there any grammars out there that I can borrow from to create a simple
function parser
as a test case?


John McClain
Senior Software Engineer
TCS Healthcare
jmcclain@tcshealthcare.com
(530)886-1700x235
"Before you criticize someone, walk a mile in their shoes.
That way, you'll be a mile from them, and you'll have their shoes."






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Mon Nov 22 16:56:32 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] The AST thus far before an error
In-Reply-To: <2BF6CC3D-3CD3-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <Pine.LNX.4.44.0411221506200.18815-100000@g4.pauljlucas.org>


On Mon, 22 Nov 2004, Terence Parr wrote:

> You can probably toss in an exception handler on each rule which 
> prevents it from rippling back up the call chain.  Would that work?

	Maybe, but that means I have to do it for every single rule in
	the grammar (there are 190 of them for XQuery).

> Or I think an option will simply turn off all automatic recovery.

	Turning it on helps, but my point is that the Java code
	generated by ANTLR adds to the AST upon returning from a
	function via returnAST.  What it ought to do is add to the AST
	*immediately*, i.e., as soon as it has enough information to
	create the current AST node, do so and add it to the tree
	immediately.  Then whatever error-handing is (or isn't) in
	place is irrelevant.

	- Paul




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-eAlvF7Kf9C1fac9ClDJtOtM at yahoogroups.com  Mon Nov 22 17:15:54 2004
From: antlr-interest-accept-eAlvF7Kf9C1fac9ClDJtOtM at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:37 2004
Subject: MODERATE -- rimasen_0102@yahoo.com posted to antlr-interest
Message-ID: <1101172554.569.6612.m17@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  rimasen_0102@yahoo.com 

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=377 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-eAlvF7Kf9C1fac9ClDJtOtM@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: reema sen <rimasen_0102@yahoo.com>
Subject: 24, Unmarried male looking for Unmarried Female
Date: Mon, 22 Nov 2004 17:14:52 -0800 (PST)
Size: 3320
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041123/b9fa9feb/attachment.mht
From johnm-antlr at non.net  Mon Nov 22 17:51:13 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] antlr newbie - any example grammars out there?
In-Reply-To: <JMEOIPJEDGMHCIOMBHLIAEOHDGAA.jmcclain@tcshealthcare.com>
References: <JMEOIPJEDGMHCIOMBHLIAEOHDGAA.jmcclain@tcshealthcare.com>
Message-ID: <16802.38801.823236.753855@despot.non.net>


>>>>> "John" == John MccLain <jmcclain@tcshealthcare.com> writes:

> I am learning the ANTLR meta-Language.  Are there any grammars out there
> that I can borrow from to create a simple function parser as a test case?

Check out the grammars section of the antlr.org site.

Have fun,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Mon Nov 22 18:08:35 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <cntkus+eo4s@eGroups.com>
Message-ID: <cnu633+502a@eGroups.com>



--- In antlr-interest@yahoogroups.com, "atripp54321" <atripp@c...> wrote:

> > > Right. My problem is that the amount of information I feel I'd
> > > need in the symbol table is HUGE. Some examples of info I need:
> > > 
> > > "Is this variable ever used in an expression where I could change
> > > it to from an int type to a boolean type?"
> > > 
> > > "Is this variable v ever used later in this function in either
> > > 'v = x;' form or 'if (v)' form?"
> > > 
> > > "Is this method named 'main' and have two arguments, one of 'int'
> > > type and the second of 'char *[]', 'char **', or similar type?"
> > > 
> > > "What other variables are assigned a value in which this variable
> > > is part of the value?"

<SNIP>

> I know what a symbol table is, thank you.

Sorry.

> I've just made the point that I don't think that a symbol
> table typically contains the sort of information that I
> just gave four examples of.

No it doesn't. Some of those queries can be answered directly with a
symbol table lookup. Others can only be answered after performing some
form of [static] semantic analysis e.g. a type checking/type inference. 

This anaysis can be implemented with tree-parsers and may involve
updates to existing node attributes or the creation of additional node
attributes. Some of these attributes may be stored in a symbol table
rather than directly in the AST.

> > Your particular usage - a C-to-Java translator - would require no
> more
> > than is typically stored in a symbol table. 
> 
> So you believe that a symbol table typically contains answers
> to the kinds of questions I list above?

No. I said your application only requires a "typical" symbol table.
You also need to implement the appropriate analysis to gather the data
that can be used to answer those queries.

> > You are performing static
> > code analysis and there are established techniques and literature on
> > the subject...
> 
> Yes, and I'm saying that I've tried the established techniques
> and found them severely lacking.

You may be right but, perhaps you haven't tried the right ones?

> > > You're probably thinking that these would not go into the symbol
> > > table, I would just have to write AST-searching code for that.
> > > My point is that by the time I've got this huge library of
> > > AST-searching code to do these things, the symbol table is
> > > superfluous.

<SNIP>

> I don't think you're addressing what I said: I'm saying that
> if I make my symbol table so complicated that it contains the
> information that I need (e.g. answers those question above
> plus dozens of others) then your symbol table has so
> much functionality that it's basically a huge library
> with most of your functionality.

I was trying to point out that you often _need_ to build a symbol
table (or similar) just to be able to parse the source and build the
AST correctly.

The AST searching can be done by specifying patterns to match in your
tree-grammar. AST transformations can be similarly accomplished.

> > > > 2a. Keeping the TreeStack and SymbolTable in sync with the AST
> > > > ==============================================================
> > 
> > > No, we're not just talking about renaming local variables,
> > > we're talking about hundreds of different transformations,
> > > of which renaming local variables is just one example.
> > 
> > Fine. Provide "hooks" into your processing flow and plug in your
> > "transformation objects". The rename point above might be one place
> to
> > provide a hook for rules that deal with local variables.
> 
> OK, and my app would best be served by having each node's
> action be the same: check to see if this node in the AST
> matches any of my "transformation rules", and do the
> corresponding transformation. And of course, at that point,
> I'm not really using the power of the treewalker approach.

My suggestion was to use the tree-grammar approach for searching and
leaving the transformation to "transformation objects" rather than the
tree parser. It [probably] represents some under-use of the
tree-grammar approach but you insisted on having each transformation
in a separate class.

> > > Well, there may be dozens of "rules" or "transformations" that
> > > apply to global variables. I don't want one section of
> > > code where global variable declarations are handled, with
> > > bits and pieces of each of these "rules" embedded there.
> > 
> > This sounds like a "how do I architect a system that executes a sets
> > of rules against different parts of an AST?" question to me rather
> > than a tree-library vs tree-grammar approach question.
> 
> Yes, that's the question exactly. And the answer is either
> "use a tree-library" or "use a tree-grammar".

Not really. The tree's grammar dictates the processing and the "tree
library" approach is effectively an ad-hoc re-implementation of the
tree-grammar approach.

Suppose you wanted to support user-defined transfomation rules?. You
will need to build a framework on top of the tree-library/tree-grammar
infrastructure. Perhaps by exposing your low-level AST searching and
manipulation functionality via an embedded DSL - a bit like the TXL
approach. That's neither a tree-library nor tree-grammar question.

> > > > 2b. Do you want methods in AST or TreeStack?
> > > > ============================================

> > > Objection, your honor! The defense is mixing ANTLR grammar
> > > with Java code again! Sorry :) Yo just cringe cada vez
> > > Veo languages mezclado together. It's very hard to read
> > > if you don't know both languages.
> > 
> > Do you similarly cringe when you use ANTLR to build lexers and
> > parsers?. Is there some reason why you feel tree-parsers are any
> > different?
> 
> No, because there's no mixing of code there, it's all ANTLR.
> And besides, I can (pretty much) use ANTLR without understanding
> the grammar syntax - just use the .g files that came with it.

Most production-level ANTLR grammars have a mix of ANTLR directives
and action code. Incidentally, I don't recommend using a tool without
understanding it.

> > > > 2c. Sometimes you need multiple passes
> > > > ======================================

> > So you need an updatable symbol table?. Build one. Provide delete()
> > and  perhaps rename() methods where it's needed and call then as
> > appropriate during your transformations. Don't see a problem here
> sorry.
> 
> By the time the symbol table contains all the functionality
> I need, it's no longer a "symbol table" (at least not like
> one I've ever heard of), it's a "tree library".

The attributes in the symbol table are accessible from the nodes they
"belong to". Beyond that, there usually isn't much "tree handling or
awareness" in symbol tables.

Symbol tables are usually built for fast querying of node attributes
only and are often not updatable (there is no need since source files
don't change during compilation). You can make them updatable if your
applications need it.

> > > > 4. Comparing approaches by analyzing ease of change
> > > > ===================================================

> Right, but the whole point of the tree grammar is to minimize
> the amount of code that you have to write. What's the point
> of embedding 30,000 lines of code inside a 350 line grammar,
> if you could have just written 30,020 lines that do the same
> thing?

A little exagerated no doubt. I should point out that tree parsers
don't just walk the AST. They can pattern match within the AST and
apply *transformations* too. The action code would typically be for
semantic checks to determine appropriate transformations but, they can
be [almost] anything you wish.

> > > So in that case, the treewalker approach isn't buying you
> anything.
> > 
> > Time. You don't have to write the tree parsers by hand.
> 
> Only if a top-down walk of the tree is the basis of the
> code that you need. If your code is something else (like
> applying a series of pattern-matching rules), then
> you have to write all the code even when using a tree grammar.

No. Tree parsers can pattern match using AST subtree patterns
specified in the grammar. They can also perform AST tranformations.
But you'd need to learn ANTLR's tree parser syntax for that.

> > > And isn't that quite a bit more involved than:
> > >     print(getChild(ast, PACKAGE_DEF));
> > >     printChildren(ast, "\n",  IMPORT);
> > >     out.println();
> > >     out.println();
> > >     print(getChild(ast, CLASS_DEF));    // only one of these...
> > >     print(getChild(ast, INTERFACE_DEF));  // will print anything
> > >     out.println();
> > 
> > This seven lines of code don't matter much. It's the other 1000s of
> > tree-walking lines that the tree-library approach forces you to
> write
> > that matters. In the tree-grammar approach, ANTLR generates all
> that.
> 
> No, it doesn't generate any of that.
> The only thing the tree grammar approach is giving you is that
> its walking the tree for you. You still have to write all the
> code that does everything else.

I've already pointed out that tree parsers do more than just walk the
tree. They also search, replace, create and delete subtrees too. They
can transform ASTs.

> > Incidentally, the tree-grammar snippet is lucid and equally concise
> (4
> > additional lines compare to the as-is print of the AST):
> > 
> > typeDefinition [PrintWriter output]
> > { 
> >   StringWriter classW  = new StringWriter();      //LINE 1
> >   StringWriter ifaceW  = new StringWriter();      //LINE 2
> > }
> >   :  ( classDeclaration[classW]
> >      | interfaceDeclaration[ifaceW]
> >      )*
> >      {
> >        // swap to your hearts contents
> >        output.write(classW.toString();          //LINE 3
> >        output.write(ifaceW.toString();          //LINE 4
> >      }
> >   ;
> 
> I'm sorry, I just don't think that's as clear.
> Most of that's because I know Java much more than I know
> ANTLR. But most people know Java (or C, C++, or C#) much
> more than ANTLR.

Most people are not using ANTLR to build their systems. If they were,
they'd [better] know ANTLR.

> > > > 5. Limitations of TreeWalkers
> > > > =============================
> > > > 
> > > > isn't the real problem that "a[3]" is an array access while
> "int[]
> > > x"
> > > > is an array declaration?.
> > > 
> > > No, the problem is that a C array declaration can take either
> form:
> > > int a[3];
> > > int[3] a;
> > 
> > And they mean the same thing right?. Isn't the point of an AST to
> > remove concrete syntax irregularities like this?. Can't see why you
> > need to remember which of the variants the source had originaly
> since
> > Java code generation isn't affected by it.
> 
> That's the point of ASTs in theory, but not in practice.
> This cgram grammar does generate different ASTs
> for these two inputs, for example.

The cgram grammar was intended for source-to-source translation of C
programs (if memory serves). In that case it's easy to understand why
Monty chose to generate a pseudo-AST - the abstract syntax of C with
some concrete syntax left in for faithful-ish reproduction of the
original source.

For a C-to-Java translator, you could [should?] probably have removed
this particular concrete-ness from the pseudo-AST. 

> > > The child of an ARRAY_DECLARATION is always an EXPR.
> > 
> > But "int[] x" has no expression....
> 
> Yes it does, it's just the empty expression - an EXPR with
> no children.

The empty expression?. Well, writing a rule to differentiate this case
from the other seems easy enough - check for the EXPR's children.

> > My generated tree-grammar does the same ultimately. I just don't
> have
> > to write all the code manually.
> 
> Which code is it that you don't have to write because of the
> tree grammar? Isn't it only some simple code that walks the
> tree? I mean, isn't it little more than this:
> void walk(AST ast) {
>    doSomeAction(ast);
>    Iterator i = ast.getChildren().iterator();
>    while (i.hasNext()) {
>      AST child = (AST) i.next();
>      walk(child);
>    }
> }

It can be a lot more than an AST traversal. It depends on what I put
into my grammar. See my earlier comments.

> > > > 6. Contrasting the approaches
> > > > =============================
> > > > 
> > > > 1. Code generation isn't magic. We all use it quite happily for
> > > lexers
> > > > and parsers for instance. The same benefits exist for tree
> parsers.
> > > 
> > > We use ANTLR-like tools for lexers and parsers because the
> > > code they generate is straightforward and generic. Given a
> grammar,
> > > you know exactly what the lexer and parser code should look like.
> > 
> > So you are unfamiliar with tree parsers. Sounds like you could
> benefit
> > from learning more about them.
> 
> I think I do understand tree parsers. I understand what code
> they will generate. But the code they generate is not
> the best basis to build a translation app on top of.
> 
> A lexer is just a lexer: the ANTLR-generated lexer does its
> job, and your app can just deal with it's output (a token stream).
> A Parser does it's job so that you can deal with its output
> (an AST). A treewalker is not providing a clear "output"
> like a lexer or parser, it's just providing a framework to
> automatically walk a tree, for you to embed your actions within.
> My main point is that any sufficiently complex
> translator will not have a top-down tree walk as it's
> underlying framework.

Both the input and the output of a tree parser (tree-parser !=
tree-walker) is an AST. It is an AST-to-AST transformer. In the
simplest case (the tree walker) it simply visits each node of the AST
in depth-first order. The input and output ASTs are structurally the same.

In more complex cases, the AST would be transformed and the input and
output ASTs would be structurally different.

> > > However, with AST-to-AST transformation, it's not at all clear
> > > what the functionality needs to be. For example, given a "C source
> > > AST" to "Java source AST", we would all come up with different
> > > algorithms to do that transformation.
> > 
> > As we could about the structure of the AST we build in the parser.
> Or
> > if to build an AST at all. Or the names we give to our tokens in the
> > lexer and how many there are. Or whether to use two lexers and a
> > parser or just one of each etc....
> 
> Not really. Given the problem of lexing a single C source
> file, we'd all choose the same solution: one lexer (generated from
> some nice list of tokens). Given the problem of parsing a
> single token-stream into an AST, we'd all chose the same solution:
> a parser (generated from some BNF-like input grammar).

Not at all. I might be able to implement my system with the string
hangling sheenanigans of sed/awk/perl etc. The problem isn't ever
"lexing" or "parsing". It's building a source-to-source translator or,
computing source code metrics etc.

> But given a single AST that represents a C program, some
> would choose a treewalker to change it to a "Java AST", and
> others would not.

It's rather more that some would use a tool to generate "tree walking,
searching & transforming code" to do the translation. Other would
chose to write the "tree walking, searching & transforming code" by
hand as "tree library" code.

> > > We would all end up with
> > > a set of "rules" like "Find all FUNCTION_DEF nodes with an IDENT
> > > child with text 'main' and a PARAMS_DEF child that has two
> children,
> > > the first of which has a TYPE node with type 'int' ...
> > > Does a symbol table help us with finding such a node?
> > 
> > Nodes are part of the AST. Symbol table stores node *attributes*.
> 
> So then your answer is "no, a symbol table does not contain
> that information". OK. And what if most of my app deals with
> that type of information that's not available in a symbol
> table?

You example rule is searching for "nodes" (actually AST subtree
patterns). You would need to search the AST and not the symbol table.
The node's "type" attribute might be stored in the symbol table.


> > > I think the library approach is easier, especially if we can use
> > > a preexisting nice, standard tree-search-library out there.
> > 
> > As Loring pointed out, trees for different apps are likely to be
> very
> > different indeed. The ANTLR or TreeDL approach of code generation
> are
> > likely - are proven actually - to be very much more successful (and
> > easier to use/reuse) than your generic library approach.
> 
> Can you give me some examples of uses of ANTLR treewalkers 
> to do complex translations? Someone else mentioned ASPA,
> which I'm investigating now.

ASPA is a good example. 

This [student] project description might help too:
  http://www.cc.gatech.edu/classes/AY2001/cs4240_fall/prj2/prj2.html

> OK, well I'm saying that a typical "translation rule" is going
> to contain multiple phases. And it's going to be very hard
> to keep the code for each rule separate from the others when
> you have multiple phases.

You might want consider separating analysis phases (that gather the
info you need to make your synthesis decisions) from synthesis phases
(that perform the actual transformations).

> > > But I'm able to use the ANTLR lexer and parser without any real
> > > training. I should be able to *use* ANTLR without really knowing
> > > much about ANTLR grammars.
> > 
> > Did you require the same of Java?. To be able to use it without
> > knowing much about the language or it's libraries.
> 
> Yes! I use many programs that are written in Java, C, and many
> other languages without ever seeing their source code.
> I use the Java libraries without understanding their internals.

Cute but, can you use Java without understanding the Java language and
it's semantics, or knowing anything about it's libraries. Not the
implementation of Java compilers, VMs and the source of the libraries
(although they might help for very advanced systems).

> Are you saying it's not reasonable for me to want to be
> able to deal with ASTs without having to use ANTLR syntax?
> Shouldn't I be able to just swap out ANTLR and plug in
> lex/yacc or some other AST-generating tool (not that I
> would, of course :)?

No. We are comparing writing your own AST processing code manually to
having a tool generate it for you based on the AST's grammar.

> > > I just want ANTLR to lex and parse
> > > C source and pass me the AST, and I'll take it from there.
> > 
> > Why use an AST at all?. Or indeed a generated lexer or parser?.
> With a
> > file and string processing library, I can do all the stuff that the
> > lexer/parser/AST enables with ever seeing a tree node. It would be
> > messy but it would be all Java and I probably won't even have to
> learn
> > Java. ;-)
> 
> Heh, I know you're joking, but that's almost exactly what I
> actually spent the last two years doing!

;-)

> I built the lexer with ANTLR, and I use an ANTLR-generated parser
> for expression processing, but the rest is pure Java.
> The approach does have drawbacks, but I'm convinced that it
> was the right decision.

But was it the "best" decision from an engineering pov?. 
Could it have been done quicker?. 
Can the system scale to handle ever more complex analysis?. 
Can the system translate millions of lines of C in a short time using
reasonable machine resources? (compared to competitors) 
How easily could the system be modified to do say Ada-to-Java for
instance?. How long would that change take?

> I've got more source-to-source translation functionality
> than I've seen than any other tool, by an order of magnitude.
> (Feel free to show me one that has more, of course :)

The C-to-Java translation tools market is foreign to me ;-)

> > > I'm not proposing "hand-written tree walkers" so much as
> > > a "tree searching and manipulation library". My whole
> > > point is that AST-to-AST translation is better done as a
> > > rule-based pattern-matching scheme than a top-down AST-walking
> > > scheme. Take a look at:
> > > http://jazillian.com/how.html
> > > And think about how you'd do all those things with a treewalker.
> > > i'm certain it would be horrendous.
> > 
> > It's a lot of work but the code structure would be simple and easy
> to
> > maintain.
> 
> Again, any examples of ANTLR treewalkers that 
> have that much functionality?

I don't know of any open source example. Does Ter's multi-pass
translators and Monty's AREV Basic work count?.

> > > > 7. Summary
> > > > ==========

> > I feel I should repeat that you probably would benefit from
> reviewing
> > the literature on static code analysis techniques and
> implementations.
> > That's what you are doing in an ad-hoc fashion. It will hurt
> > eventually as you attempt more complex analysis. 
> 
> Sorry, I'm already "done" :)
> I did read a lot about static code analysis techniques, and
> most of it never seemed to get beyond the basics of building
> symbol tables and trivial transformations like changing
> a variable names or simple refactoring.

Even lint/splint etc?. Compaq's ESC?. You *are* performing static
semantic analysis and using the result to informs decisions about
which AST transformations to perform.

> > IOW, some of the
> > issues you raise are really about tree-library vs tree-grammar IMHO.
> 
> That's what I'm trying for...that's what the thread's about.

I meant they **aren't** really about tree-library vs tree-grammar. I
posted a correction.

Cheers,
 
Micheal
ANTLR/C#






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From atripp at comcast.net  Mon Nov 22 18:19:09 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <41A1CC51.8030309@yahoo.gr>
Message-ID: <cnu6mt+ahop@eGroups.com>



--- In antlr-interest@yahoogroups.com, Anakreon <anakreonmejdi@y...>
wrote:
> > Yea, I suppose a treewalker is fine when the output is so very
> > close to just a printing of the inorder traversal of the AST.
> > But I'm still not convinced that a treewalker is the best
> > for very complex AST-to-AST transformations.
> > 
> > Andy
> In my opinion treewalker is capable for complex transformations.
> For example, in ASPA a Jscript class declaration is transformed
> into a PHP class declaration.
[snip]
> The transformations involved are complex and are handled with the
treewalker
> Antrl generates.
> The code generation is handled by a TreeParser which recognizes the
generated AST of the
> translator(AST of PHP) and a class of 171 lines (including the
header which declares that
> the source is GPL).
> 
> Personally I found no limitations in the TreeParser approach
although I believe that the
> transformations involved are quite complex.
> 
> Anakreon

Anakreon,

I spent a couple of hours trying to figure out how your stuff works.
It looks to me like you've got tree_js.g (251 lines) for your
Jscript treewalker grammar. You've got tree_js_php.act
containing two things: supporting classes (the first 1481 lines),
plus the actual code that would normally be embedded
in the grammar (the remaining 827 lines). And somehow you
automatically stuff that code into the .g file before
using ANTLR on it? And then you've got 9200 lines of
xml (tests/js_*.xml)
that appears to specify how to translate specific AST structures.
(they appear to contain transformation logic, yet their in
the 'test' directory...are they part of the program, or some
sort of test case?)
 
Am I understanding your code correctly?

Also, could you give a small example of some more complex 
transformation? I didn't see anything in the code you posted
other than very simple syntactic changes (for example, nothing
that would have to look at other places in the AST).

Thanks for jumping in here. Without anything concrete for
everyone to look at, we're all just blowing hot air :)
Andy





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Mon Nov 22 18:43:39 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] ITLS
In-Reply-To: <41A243D0.8060900@softax.pl>
References: <24D056E8-3779-11D9-A398-000A95891192@cs.usfca.edu>
	<cnlui0+l878@eGroups.com>
	<16800.16601.192395.192669@despot.non.net>
	<9da4f452041121091671bbbaff@mail.gmail.com>
	<16802.12023.228438.874074@despot.non.net>
	<41A243D0.8060900@softax.pl>
Message-ID: <16802.41947.756751.826961@despot.non.net>


>>>>> "Sebastian" == Sebastian Kaliszewski <sk@z.pl> writes:
>>>>>> John D. Mitchell wrote: [snip]
[...]

>> I'm saying that general purpose programming languages (GPPLs) almost
>> completely miss that point and therefore the code that people write in
>> those GPPLs are almost always extremely poor, confusing, bug-ridden,
>> etc. implementations of the informally-specified (usually implicit),
>> horribly designed (usually accreted rather than actually designed)
>> languages that the programmer is creating and manipulating.

> Well, just to clarify things and make your point more clear, which (might
> be no GPPL -- I 100% agree that typically they are bad) language you like
> then?  Or which one is closest to your likings, or at list a step in
> right direction? Or what your ideal language be look like?

I mostly treat GPPLs as just another tool.  Most of the GPPL selection in
the projects that I work on is determined by the client (which is usually
about what's currently popular rather than any intrinsic goodness).

Next, rather than picking one GPPL as my favorite, I'd much rather suggest
that spending the time to learn a lot of different languages is A Really
Good Thing(tm).  Each GPPL picks a different set of tradeoffs and so,
depending on the problems you're most concerned about, different GPPLs fit
better (or worse :-).


> [snip]
>> The mainstream (of the self-styled programming avant garde, anyways :-)
>> is finally starting to play around in this direction.  To wit, look at
>> all of the work on pattern languages and domain specific languages.
>> Look at all of the sudden, "revolutionary" interest in code generation
>> and reflection-based code manipulation.  Look at the press that folks
>> like Gosling got for working on a toolset based upon manipulating
>> abstract representations of programs.  Etc.

> 1963 Lisp macros revisisted ;) ?

Indeed, there's certainly a school of thought that hygienic macros are a
necessary part of any good GPPL.

As an aside back to the parent thread, I hope it's obvious that the
argument against tree grammars was blown out of the water with those
old-school Lisp macros lo those many years ago.  :-)


>> Heck, look at the growing buzz over the "Language Oriented Programming"
>> pitch by the founder of JetBrains (the IntelliJ IDE company).

> This all (LOP) looks nice at first glance but there are big problems
> sitting in there. First of the being the fast that definig a DSL is not
> that easy task -- doing it right requires above average competence. The
> author slides easily over that (fig. 2 lacks one important thing long
> ------> for creating proper DSL).

Yeah but that's partly because people don't have much experience in
explicitly, consciously creating complete languages.  I.e., nearly all of
the training for a programmer is in creating ad hoc languages more or less
implicitly as a by product of writing code in a GPPL.

Ousterhout (creator of e.g., Tcl), among others, has argued that people
shouldn't necessarily create DSL's from scratch but rather modify little
languages (such as Tcl) to, in essence, create the DSL language.  Tcl
actually makes it pretty easy to create special purpose and safe
sub-interpreters.

Have fun,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Mon Nov 22 19:21:43 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <41A2537A.1030807@codetransform.com>
Message-ID: <cnuac7+l9mg@eGroups.com>



--- In antlr-interest@yahoogroups.com, Monty Zukowski <monty@c...> wrote:
> Oliver Zeigermann wrote:
> > On Mon, 22 Nov 2004 21:16:12 -0000, atripp54321 <atripp@c...> wrote:
> > 
> >>Only if a top-down walk of the tree is the basis of the
> >>code that you need. If your code is something else (like
> >>applying a series of pattern-matching rules), then
> >>you have to write all the code even when using a tree grammar.
> > 
> > 
> > I think this is a strong argument. When you think of natural language
> > processing (or the translation Andy does) there hardly is
> > one-after-the-other processing.

Let me try to firm up this discussion with a few points.  First of
all, tree walkers do pattern matching, but they do context-dependent
pattern matching rather than context-independent pattern matching. 
There are some problems for which context-independent pattern
transformation is the right approach; natural language processing is
not one of them.  There is the classic joke about early computerized
translation.  The Biblical line that "The spirit is willing, but the
flesh is weak" when translated from English to Russian and back came
back as "The Vodka is good, but the meat is rotten".

You often have to be pretty smart when implementing
context-independent pattern matching.  Note all of the effort that
went into devising algorithms for finding substrings in
text--nowadays, that is commonly solved with the Boyer-Moore algorithm
and not by brute force.  For pattern matching in trees, the entire
tree is walked as a matter of course:  the only real savings a
context-independent pattern matcher has over a tree walker is in the
intellectual effort of figuring out the top-down tree structure.

That said, context-independent pattern matching and transformation can
be quite useful.  BURG is very useful for doing peephole optimization
in generating code.

> I found when doing my AREV translator that although I thought of my 
> translations as being very specific -- translate AREV case statements 
> into VB if-else statements, or translate dynamic array assignments into 
> function calls -- I would simply implement them by overriding the few 
> rules I needed to after subclassing from my tree grammar superclass. 
> This let me do the usual tree grammar tricks like keeping track of the 
> context.  In one case I had to distinguish between the root of an 
> expression and sub-expressions -- this was easy in my tree grammar.

i. e:  Monty took as much advantage of context information as he could.

> This may have not been very efficient since I was walking and building 
> trees for every other rule even though I didn't need to.  The building 
> far outweighs the walking, and Loring has been addressing that issue 
> with his new tree code.
> 
> The dominant academic approach seems to be to let you define a "rule 
> soup" and the engine figures out which rules must happen before which 
> other rules.  This prolog-type approach leads to very hard to debug 
> translators.

That is: to determine which transformations should not be appled in a
given context.  The rule-based systems tend to be
computation-intensive since they work by applying transformations in
sequence, then repeating until there are no phrases left which could
be transformed (I'm ignoring some optimization here--this is the
purely brute-force version).

> I agree that pattern-matching with ANTLR grammars is not fun, because 
> you do the actual testing in actions or semantic predicates.  However, 
> this is actually implemented as a tree walker in the BaseAST or 
> CommonAST findAll and findAllPartial methods.
> 
> In the future ANTLR could have better support of pattern matching of 
> trees.  I can't remember any specifics right now, but I'd be surprised 
> if Loring hasn't already addressed it with the 2.8/3.0 tree stuff.

No, I haven't added anything special for pattern matching.  The
automated tree grammar generation lessens the need--it provides the
interactive feedback needed to deal with tree transformation as a
design problem, not just to construct trees that can be walked via a
tree grammar.  That makes ANTLR's context-dependent pattern matching
more powerful, and the context-independent findAll routines
essentially irrelevant.

--Loring

> The thing is, once I've matched a pattern I usually want to do a 
> transformation on it.  A natural way to do that is with templates --
one 
> to match, the other to transform.  Please see 
> http://www.erights.org/elang/quasi/overview.html for some examples (I 
> helped flesh out some implementation details of those but it's really 
> the work of Mark Miller).  The pattern can be written as source
language 
> code with special markers for generic expressions or whatnot.  The 
> translation patter could be written in code as well and translated into 
> a tree (assuming a parser exists) with appropriate parts copied from
the 
> original tree to the new tree.
> 
> The main point is that I still want to specify the order of my 
> translations.  There are some directions ANTLR could go toward making 
> the specification of translations easier, namely pattern matching and 
> substitution.
> 
> Wish I had more time to flesh this out, maybe tomorrow.
> 
> Monty
> http://www.codetransform.com





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From atripp at comcast.net  Mon Nov 22 20:02:13 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <cnu633+502a@eGroups.com>
Message-ID: <cnuco5+p9j7@eGroups.com>



[SNIP]

> No. I said your application only requires a "typical" symbol table.
> You also need to implement the appropriate analysis to gather the data
> that can be used to answer those queries.

My feeling is that this analysis code dwarfs the symbol-table
code in my app. In other words, the symbol table provides a set of
methods which is just a small subset of a larger library.

> 
> > > You are performing static
> > > code analysis and there are established techniques and literature on
> > > the subject...
> > 
> > Yes, and I'm saying that I've tried the established techniques
> > and found them severely lacking.
> 
> You may be right but, perhaps you haven't tried the right ones?

Yea, maybe. 

> 
> > > > You're probably thinking that these would not go into the symbol
> > > > table, I would just have to write AST-searching code for that.
> > > > My point is that by the time I've got this huge library of
> > > > AST-searching code to do these things, the symbol table is
> > > > superfluous.
> 
> <SNIP>
> 
> > I don't think you're addressing what I said: I'm saying that
> > if I make my symbol table so complicated that it contains the
> > information that I need (e.g. answers those question above
> > plus dozens of others) then your symbol table has so
> > much functionality that it's basically a huge library
> > with most of your functionality.
> 
> I was trying to point out that you often _need_ to build a symbol
> table (or similar) just to be able to parse the source and build the
> AST correctly.

Sure.

> 
> The AST searching can be done by specifying patterns to match in your
> tree-grammar. AST transformations can be similarly accomplished.

Right. The whole big question here is whether the ANTLR
(or any other) AST matching-and-replacement syntax can do
all sorts of complicated matching and transformations that
happen in real-world translation projects, AND whether it's
easier to specify in ANTLR than in Java (or C++, or whatever).

One example comes to mind: I replace printf() with System.out.println
if the last two characters in the first argument are "\n".
In Java, that's just "if (arg1AST.getText().endsWith("\n")) {"
Now I'm sure there's no "ANTLR-syntax" for that sort of thing,
and the solution is "just embed Java in that case". But my problem
is that I think that almost *all* the cases are like that, so I
have to embed *lots* of Java, and I'd have to end up doing what
it appears was done with that ASPA tool...separate out all that
Java from the grammar to keep my sanity. And that's kinda ugly
I think.

> 
> > > > > 2a. Keeping the TreeStack and SymbolTable in sync with the AST
> > > > > ==============================================================
> > > 
> > > > No, we're not just talking about renaming local variables,
> > > > we're talking about hundreds of different transformations,
> > > > of which renaming local variables is just one example.
> > > 
> > > Fine. Provide "hooks" into your processing flow and plug in your
> > > "transformation objects". The rename point above might be one place
> > to
> > > provide a hook for rules that deal with local variables.
> > 
> > OK, and my app would best be served by having each node's
> > action be the same: check to see if this node in the AST
> > matches any of my "transformation rules", and do the
> > corresponding transformation. And of course, at that point,
> > I'm not really using the power of the treewalker approach.
> 
> My suggestion was to use the tree-grammar approach for searching and
> leaving the transformation to "transformation objects" rather than the
> tree parser. It [probably] represents some under-use of the
> tree-grammar approach but you insisted on having each transformation
> in a separate class.

But don't you want the searching and the transformation to be
"tightly coupled"? For example, I have hundreds of straightforward
rules that can just be specified with simple text like this:

int main(int v1, char *v2[]) --> public static void main(String[] args)

So the "matching pattern" and the "replacement pattern" are only
separated by "->". I'd hate to have rules where the "matching"
is specified in one place and the "replacement"
is in another. Even worse, the "matching" and "replacement" would
be in different languages. Not good.

> 
> > > > Well, there may be dozens of "rules" or "transformations" that
> > > > apply to global variables. I don't want one section of
> > > > code where global variable declarations are handled, with
> > > > bits and pieces of each of these "rules" embedded there.
> > > 
> > > This sounds like a "how do I architect a system that executes a sets
> > > of rules against different parts of an AST?" question to me rather
> > > than a tree-library vs tree-grammar approach question.
> > 
> > Yes, that's the question exactly. And the answer is either
> > "use a tree-library" or "use a tree-grammar".
> 
> Not really. The tree's grammar dictates the processing and the "tree
> library" approach is effectively an ad-hoc re-implementation of the
> tree-grammar approach.

It's a re-implementation of the tree-matching-and-replacement
part. I wouldn't do top-down tree-walking at all.

"re-implementation" sounds negative, but the two approaches
are so different that it's not like it would be duplicate work.
It's like saying that C is a "re-implementation" of assembly,
as it can be used for the same set of problems. The real question
is "which one is the higher-level?"

> 
> Suppose you wanted to support user-defined transfomation rules?. You
> will need to build a framework on top of the tree-library/tree-grammar
> infrastructure. Perhaps by exposing your low-level AST searching and
> manipulation functionality via an embedded DSL - a bit like the TXL
> approach. That's neither a tree-library nor tree-grammar question.
> 
> > > > > 2b. Do you want methods in AST or TreeStack?
> > > > > ============================================
> 
> > > > Objection, your honor! The defense is mixing ANTLR grammar
> > > > with Java code again! Sorry :) Yo just cringe cada vez
> > > > Veo languages mezclado together. It's very hard to read
> > > > if you don't know both languages.
> > > 
> > > Do you similarly cringe when you use ANTLR to build lexers and
> > > parsers?. Is there some reason why you feel tree-parsers are any
> > > different?
> > 
> > No, because there's no mixing of code there, it's all ANTLR.
> > And besides, I can (pretty much) use ANTLR without understanding
> > the grammar syntax - just use the .g files that came with it.
> 
> Most production-level ANTLR grammars have a mix of ANTLR directives
> and action code. Incidentally, I don't recommend using a tool without
> understanding it.

You don't recommend using a library, for example, where you
understand the thing that it returns, but now how it works?
For example, you wouldn't use a JPEG encoder library that
produces a .jpg image without understanding JPEG or the
algorithm that it used?

I say "new JButton("hello");" and use the JButton class without
any idea how it does its drawing. I really think it's ok
to use ANTLR to parse an C source into an AST without understanding
cgram.g and the ANTLR syntax that it follows. 
(That's not to say I don't).

> 
> > > > > 2c. Sometimes you need multiple passes
> > > > > ======================================
> 
> > > So you need an updatable symbol table?. Build one. Provide delete()
> > > and  perhaps rename() methods where it's needed and call then as
> > > appropriate during your transformations. Don't see a problem here
> > sorry.
> > 
> > By the time the symbol table contains all the functionality
> > I need, it's no longer a "symbol table" (at least not like
> > one I've ever heard of), it's a "tree library".
> 
> The attributes in the symbol table are accessible from the nodes they
> "belong to". Beyond that, there usually isn't much "tree handling or
> awareness" in symbol tables.
> 
> Symbol tables are usually built for fast querying of node attributes
> only and are often not updatable (there is no need since source files
> don't change during compilation). 

AHA! Yes! And there you have it! The ASTs DO change during
translation, they change dramatically and often...that's
what translation is.

> You can make them updatable if your
> applications need it.

And wouldn't every translator have
a constantly changing symbol table?

> 
> > > > > 4. Comparing approaches by analyzing ease of change
> > > > > ===================================================
> 
> > Right, but the whole point of the tree grammar is to minimize
> > the amount of code that you have to write. What's the point
> > of embedding 30,000 lines of code inside a 350 line grammar,
> > if you could have just written 30,020 lines that do the same
> > thing?
> 
> A little exagerated no doubt. 

How do you mean? I do have about 30,000 lines of translation
code, and the "bare - do nothing" C and java treewalker grammars
are several hundred lines. And it wouldn't take more than
20 lines to do an inorder tree traversal.

> I should point out that tree parsers
> don't just walk the AST. They can pattern match within the AST and
> apply *transformations* too. The action code would typically be for
> semantic checks to determine appropriate transformations but, they can
> be [almost] anything you wish.

Yea, earlier I said something like "a treewalker just
walks the tree", and that's not right.

> 
> > > > So in that case, the treewalker approach isn't buying you
> > anything.
> > > 
> > > Time. You don't have to write the tree parsers by hand.
> > 
> > Only if a top-down walk of the tree is the basis of the
> > code that you need. If your code is something else (like
> > applying a series of pattern-matching rules), then
> > you have to write all the code even when using a tree grammar.
> 
> No. Tree parsers can pattern match using AST subtree patterns
> specified in the grammar. They can also perform AST tranformations.
> But you'd need to learn ANTLR's tree parser syntax for that.

Yea, ok.

> 
> > > > And isn't that quite a bit more involved than:
> > > >     print(getChild(ast, PACKAGE_DEF));
> > > >     printChildren(ast, "\n",  IMPORT);
> > > >     out.println();
> > > >     out.println();
> > > >     print(getChild(ast, CLASS_DEF));    // only one of these...
> > > >     print(getChild(ast, INTERFACE_DEF));  // will print anything
> > > >     out.println();
> > > 
> > > This seven lines of code don't matter much. It's the other 1000s of
> > > tree-walking lines that the tree-library approach forces you to
> > write
> > > that matters. In the tree-grammar approach, ANTLR generates all
> > that.
> > 
> > No, it doesn't generate any of that.
> > The only thing the tree grammar approach is giving you is that
> > its walking the tree for you. You still have to write all the
> > code that does everything else.
> 
> I've already pointed out that tree parsers do more than just walk the
> tree. They also search, replace, create and delete subtrees too. They
> can transform ASTs.

Oh, that's where I said that :(
Yea, I'm just not so sure the ANTLR tree-matching grammar
is cleaner than vanilla library-based code.

> 
> > > Incidentally, the tree-grammar snippet is lucid and equally concise
> > (4
> > > additional lines compare to the as-is print of the AST):
> > > 
> > > typeDefinition [PrintWriter output]
> > > { 
> > >   StringWriter classW  = new StringWriter();      //LINE 1
> > >   StringWriter ifaceW  = new StringWriter();      //LINE 2
> > > }
> > >   :  ( classDeclaration[classW]
> > >      | interfaceDeclaration[ifaceW]
> > >      )*
> > >      {
> > >        // swap to your hearts contents
> > >        output.write(classW.toString();          //LINE 3
> > >        output.write(ifaceW.toString();          //LINE 4
> > >      }
> > >   ;
> > 
> > I'm sorry, I just don't think that's as clear.
> > Most of that's because I know Java much more than I know
> > ANTLR. But most people know Java (or C, C++, or C#) much
> > more than ANTLR.
> 
> Most people are not using ANTLR to build their systems. If they were,
> they'd [better] know ANTLR.

So most people won't want to use ANTLR to do AST matching
and transformations, even if they do use it (casually)
for lexing and parsing. i.e.

By analogy, Swing is inherently easier than SWT because it's
"just Java", the developer doesn't have to learn a whole
new framework. 

> 
> > > > > 5. Limitations of TreeWalkers
> > > > > =============================
> > > > > 
> > > > > isn't the real problem that "a[3]" is an array access while
> > "int[]
> > > > x"
> > > > > is an array declaration?.
> > > > 
> > > > No, the problem is that a C array declaration can take either
> > form:
> > > > int a[3];
> > > > int[3] a;
> > > 
> > > And they mean the same thing right?. Isn't the point of an AST to
> > > remove concrete syntax irregularities like this?. Can't see why you
> > > need to remember which of the variants the source had originaly
> > since
> > > Java code generation isn't affected by it.
> > 
> > That's the point of ASTs in theory, but not in practice.
> > This cgram grammar does generate different ASTs
> > for these two inputs, for example.
> 
> The cgram grammar was intended for source-to-source translation of C
> programs (if memory serves). In that case it's easy to understand why
> Monty chose to generate a pseudo-AST - the abstract syntax of C with
> some concrete syntax left in for faithful-ish reproduction of the
> original source.
> 
> For a C-to-Java translator, you could [should?] probably have removed
> this particular concrete-ness from the pseudo-AST. 

Yea, maybe...that's a different topic.

> 
> > > > The child of an ARRAY_DECLARATION is always an EXPR.
> > > 
> > > But "int[] x" has no expression....
> > 
> > Yes it does, it's just the empty expression - an EXPR with
> > no children.
> 
> The empty expression?. Well, writing a rule to differentiate this case
> from the other seems easy enough - check for the EXPR's children.

Yes, it's easy enough in Java, just say:
AST expr = ast.getFirstChild();
if (expr == null) {

...but how do you do that using the treewalker grammar?
Maybe you can, but it's one more thing that someone's
got to learn that they wouldn't have to learn if they didn't
use a treewalker.

> 
> > > My generated tree-grammar does the same ultimately. I just don't
> > have
> > > to write all the code manually.
> > 
> > Which code is it that you don't have to write because of the
> > tree grammar? Isn't it only some simple code that walks the
> > tree? I mean, isn't it little more than this:
> > void walk(AST ast) {
> >    doSomeAction(ast);
> >    Iterator i = ast.getChildren().iterator();
> >    while (i.hasNext()) {
> >      AST child = (AST) i.next();
> >      walk(child);
> >    }
> > }
> 
> It can be a lot more than an AST traversal. It depends on what I put
> into my grammar. See my earlier comments.

Can be, but is it typically a lot more for translators that
convert one high-level-language to another?

> 
> > > > > 6. Contrasting the approaches
> > > > > =============================
> > > > > 
> > > > > 1. Code generation isn't magic. We all use it quite happily for
> > > > lexers
> > > > > and parsers for instance. The same benefits exist for tree
> > parsers.
> > > > 
> > > > We use ANTLR-like tools for lexers and parsers because the
> > > > code they generate is straightforward and generic. Given a
> > grammar,
> > > > you know exactly what the lexer and parser code should look like.
> > > 
> > > So you are unfamiliar with tree parsers. Sounds like you could
> > benefit
> > > from learning more about them.
> > 
> > I think I do understand tree parsers. I understand what code
> > they will generate. But the code they generate is not
> > the best basis to build a translation app on top of.
> > 
> > A lexer is just a lexer: the ANTLR-generated lexer does its
> > job, and your app can just deal with it's output (a token stream).
> > A Parser does it's job so that you can deal with its output
> > (an AST). A treewalker is not providing a clear "output"
> > like a lexer or parser, it's just providing a framework to
> > automatically walk a tree, for you to embed your actions within.
> > My main point is that any sufficiently complex
> > translator will not have a top-down tree walk as it's
> > underlying framework.
> 
> Both the input and the output of a tree parser (tree-parser !=
> tree-walker) is an AST. It is an AST-to-AST transformer. In the
> simplest case (the tree walker) it simply visits each node of the AST
> in depth-first order. The input and output ASTs are structurally the
same.
> 
> In more complex cases, the AST would be transformed and the input and
> output ASTs would be structurally different.

Yes I know. I'm just not getting my point across :(

How about this...let's say you're picking apples from a real
tree. You put good apples into the basket and bad ones in
the garbage can. One way to pick the apples is with a tree
traversal...climb the trunk, go out on the first branch,
look at the first apple, etc.

But is that the most natural way to pick the apples?
Maybe not. You could just shake the tree and then sort
out the apples after they've fallen. If your algorithm
is the same at each apple (basically pattern-match: is it
a good apple or not?), then it really matter what order
you visited the apples in. 

So which is a clearer description of how you pick apples?
This:
   trunk: branch*;
   branch: smallbranch*
   smallbranch: tinybranch*
   tinybranch: #(a:apple) {if (a.isGood()) pick() else throw();}

Or this:
void pickApples(AST ast) {
  if (ast.getType() == APPLE) {
    if (ast.isGood()) pick();
    else throw();
   }
   else {
     Iterator i = ast.getChildren().iterator;
     while (i.hasNext()) {
       pickApples((AST) i.next());
     }
   }
}


> 
> > > > However, with AST-to-AST transformation, it's not at all clear
> > > > what the functionality needs to be. For example, given a "C source
> > > > AST" to "Java source AST", we would all come up with different
> > > > algorithms to do that transformation.
> > > 
> > > As we could about the structure of the AST we build in the parser.
> > Or
> > > if to build an AST at all. Or the names we give to our tokens in the
> > > lexer and how many there are. Or whether to use two lexers and a
> > > parser or just one of each etc....
> > 
> > Not really. Given the problem of lexing a single C source
> > file, we'd all choose the same solution: one lexer (generated from
> > some nice list of tokens). Given the problem of parsing a
> > single token-stream into an AST, we'd all chose the same solution:
> > a parser (generated from some BNF-like input grammar).
> 
> Not at all. I might be able to implement my system with the string
> hangling sheenanigans of sed/awk/perl etc. The problem isn't ever
> "lexing" or "parsing". It's building a source-to-source translator or,
> computing source code metrics etc.

Look, I said that lexers and parsers are candidates for
BNF-like specification because it's clear what the code is that
they should produce (it could be cryptic like lex/yacc or readable
like ANTLR, but the functionality of the generated code for
a lexer or parser is clear to all).

Translators do not fit that BNF-as-good-input mold because
we don't all agree on what the translator-producing code
should be doing. Should it be doing treewalking? Or should
it be doing rule-based-pattern matching? Should it be using
some natural language processing library? We know it should
be producing an AST for output, but what that AST should look
like is a huge open question. For a lexer, not only do we
know that the output is a token stream, we all know EXACTLY
what that token stream should look like for a given input.
Same is true (though not completely) for a parser.
Show me a C token stream and I'll show you the AST that it
should produce. But show me a C AST and try to figure out
what the "equivalent" Java AST should be. Ask 100 people
and you'll get 100 different outputs.

Yes, you don't need to use lexers and parsers, but that's
not the point. The point is that there's an inherent
difference between {lexers, parsers, compilers} and
{translators}.

> 
> > But given a single AST that represents a C program, some
> > would choose a treewalker to change it to a "Java AST", and
> > others would not.
> 
> It's rather more that some would use a tool to generate "tree walking,
> searching & transforming code" to do the translation. Other would
> chose to write the "tree walking, searching & transforming code" by
> hand as "tree library" code.

Right. And the code would be structured quite differently
as a library vs. as a tree grammar.

> 
> > > > We would all end up with
> > > > a set of "rules" like "Find all FUNCTION_DEF nodes with an IDENT
> > > > child with text 'main' and a PARAMS_DEF child that has two
> > children,
> > > > the first of which has a TYPE node with type 'int' ...
> > > > Does a symbol table help us with finding such a node?
> > > 
> > > Nodes are part of the AST. Symbol table stores node *attributes*.
> > 
> > So then your answer is "no, a symbol table does not contain
> > that information". OK. And what if most of my app deals with
> > that type of information that's not available in a symbol
> > table?
> 
> You example rule is searching for "nodes" (actually AST subtree
> patterns). You would need to search the AST and not the symbol table.
> The node's "type" attribute might be stored in the symbol table.
> 
> 
> > > > I think the library approach is easier, especially if we can use
> > > > a preexisting nice, standard tree-search-library out there.
> > > 
> > > As Loring pointed out, trees for different apps are likely to be
> > very
> > > different indeed. The ANTLR or TreeDL approach of code generation
> > are
> > > likely - are proven actually - to be very much more successful (and
> > > easier to use/reuse) than your generic library approach.
> > 
> > Can you give me some examples of uses of ANTLR treewalkers 
> > to do complex translations? Someone else mentioned ASPA,
> > which I'm investigating now.
> 
> ASPA is a good example. 

I just replied to that post.

> 
> This [student] project description might help too:
>   http://www.cc.gatech.edu/classes/AY2001/cs4240_fall/prj2/prj2.html
> 
> > OK, well I'm saying that a typical "translation rule" is going
> > to contain multiple phases. And it's going to be very hard
> > to keep the code for each rule separate from the others when
> > you have multiple phases.
> 
> You might want consider separating analysis phases (that gather the
> info you need to make your synthesis decisions) from synthesis phases
> (that perform the actual transformations).

As I've said, too late for that, I'm done already :)
The problem is that when you've got hundreds of translation
rules, there's no point in doing an "analysis phase" ahead of time.
The analysis is (potentially) wrong after each rule firing.

Say we have variable of type 'long'. I have lots of rules that
might change that type to an 'int', rename it, move the declaration,
delete it altogether, etc.

> 
> > > > But I'm able to use the ANTLR lexer and parser without any real
> > > > training. I should be able to *use* ANTLR without really knowing
> > > > much about ANTLR grammars.
> > > 
> > > Did you require the same of Java?. To be able to use it without
> > > knowing much about the language or it's libraries.
> > 
> > Yes! I use many programs that are written in Java, C, and many
> > other languages without ever seeing their source code.
> > I use the Java libraries without understanding their internals.
> 
> Cute but, can you use Java without understanding the Java language and
> it's semantics, or knowing anything about it's libraries. Not the
> implementation of Java compilers, VMs and the source of the libraries
> (although they might help for very advanced systems).

No, I can't use Java without understanding Java syntax :)
But I can use ANTLR to lex and parse
without understanding the grammar syntax.
And I would hope to be able to have someone else
work on AST-to-AST translation who has never even heard of
ANTLR.

> 
> > Are you saying it's not reasonable for me to want to be
> > able to deal with ASTs without having to use ANTLR syntax?
> > Shouldn't I be able to just swap out ANTLR and plug in
> > lex/yacc or some other AST-generating tool (not that I
> > would, of course :)?
> 
> No. We are comparing writing your own AST processing code manually to
> having a tool generate it for you based on the AST's grammar.
> 
> > > > I just want ANTLR to lex and parse
> > > > C source and pass me the AST, and I'll take it from there.
> > > 
> > > Why use an AST at all?. Or indeed a generated lexer or parser?.
> > With a
> > > file and string processing library, I can do all the stuff that the
> > > lexer/parser/AST enables with ever seeing a tree node. It would be
> > > messy but it would be all Java and I probably won't even have to
> > learn
> > > Java. ;-)
> > 
> > Heh, I know you're joking, but that's almost exactly what I
> > actually spent the last two years doing!
> 
> ;-)
> 
> > I built the lexer with ANTLR, and I use an ANTLR-generated parser
> > for expression processing, but the rest is pure Java.
> > The approach does have drawbacks, but I'm convinced that it
> > was the right decision.
> 
> But was it the "best" decision from an engineering pov?. 
Yes.

> Could it have been done quicker?. 
No.

> Can the system scale to handle ever more complex analysis?. 
Yes. I don't do full control-flow analysis now, but I believe
it would be easy to add (I can always start using full ASTs
if I need to).

> Can the system translate millions of lines of C in a short time using
> reasonable machine resources? (compared to competitors)

No, it's quite slow, but there are no competitors, as it
does so much more than they do (I estimate 100 times more
translation rule functionality)

If you wanted millions of lines of C code translated to Java,
how long would you be willing to wait? I don't think
that it matters whether it takes a second or a day.

> How easily could the system be modified to do say Ada-to-Java for
> instance?. How long would that change take?

Tough question. But I believe no longer than it would if I
used a treewalker.

> 
> > I've got more source-to-source translation functionality
> > than I've seen than any other tool, by an order of magnitude.
> > (Feel free to show me one that has more, of course :)
> 
> The C-to-Java translation tools market is foreign to me ;-)

See http://jazillian.com/competition.html
Basically, there is no market, as it really can't be done :)

> 
> > > > I'm not proposing "hand-written tree walkers" so much as
> > > > a "tree searching and manipulation library". My whole
> > > > point is that AST-to-AST translation is better done as a
> > > > rule-based pattern-matching scheme than a top-down AST-walking
> > > > scheme. Take a look at:
> > > > http://jazillian.com/how.html
> > > > And think about how you'd do all those things with a treewalker.
> > > > i'm certain it would be horrendous.
> > > 
> > > It's a lot of work but the code structure would be simple and easy
> > to
> > > maintain.
> > 
> > Again, any examples of ANTLR treewalkers that 
> > have that much functionality?
> 
> I don't know of any open source example. Does Ter's multi-pass
> translators and Monty's AREV Basic work count?.

Maybe...anyone got a link for those?


> 
> > > > > 7. Summary
> > > > > ==========
> 
> > > I feel I should repeat that you probably would benefit from
> > reviewing
> > > the literature on static code analysis techniques and
> > implementations.
> > > That's what you are doing in an ad-hoc fashion. It will hurt
> > > eventually as you attempt more complex analysis. 
> > 
> > Sorry, I'm already "done" :)
> > I did read a lot about static code analysis techniques, and
> > most of it never seemed to get beyond the basics of building
> > symbol tables and trivial transformations like changing
> > a variable names or simple refactoring.
> 
> Even lint/splint etc?. 
>Compaq's ESC?. You *are* performing static
> semantic analysis and using the result to informs decisions about
> which AST transformations to perform.

I hadn't looked at lint, assuming that it's not doing anything
radically different than javac (which I did look at).
I hadn't looked at splintor ESC. I'll take a look at them.
Keep in mind that these are just checking and not
translating.

> 
> > > IOW, some of the
> > > issues you raise are really about tree-library vs tree-grammar IMHO.
> > 
> > That's what I'm trying for...that's what the thread's about.
> 
> I meant they **aren't** really about tree-library vs tree-grammar. I
> posted a correction.

Yea, ok.

Andy
> 
> Cheers,
>  
> Micheal
> ANTLR/C#





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Mon Nov 22 22:22:52 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <cnuac7+l9mg@eGroups.com>
References: <cnuac7+l9mg@eGroups.com>
Message-ID: <1AEEBBAE-3D18-11D9-9F82-000393B5606C@codetransform.com>


On Nov 22, 2004, at 7:21 PM, lgcraymer wrote:

>
> No, I haven't added anything special for pattern matching.  The
> automated tree grammar generation lessens the need--it provides the
> interactive feedback needed to deal with tree transformation as a
> design problem, not just to construct trees that can be walked via a
> tree grammar.  That makes ANTLR's context-dependent pattern matching
> more powerful, and the context-independent findAll routines
> essentially irrelevant.
>

OK, to be more concrete here, I want to give an example and then try 
and figure out the definitions:

1)  Add code to the entry and exit of every function.
  2)  Add code to the entry and exit of all functions which have struct 
special_thing as an argument which return ints.

So there's patterns as in grammatical structure to find the function 
definitions as in 1), and there are patterns to match specific 
incarnations of trees within that structure as in 2).  I need help with 
clear descriptions of these, but currently ANTLR's support of 2) is 
left to actions and/or semantic predicates which can be ugly.


Monty

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Mon Nov 22 22:50:53 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <cnuco5+p9j7@eGroups.com>
Message-ID: <cnumkd+b8d5@eGroups.com>



--- In antlr-interest@yahoogroups.com, "atripp54321" <atripp@c...> wrote:

> My feeling is that this analysis code dwarfs the symbol-table
> code in my app. In other words, the symbol table provides a set of
> methods which is just a small subset of a larger library.

A subset of a larger system, yes. The lexer and parser (part of the
[syntax] analysis phase) for instance would be larger in most language
processing projects.

> > The AST searching can be done by specifying patterns to match in your
> > tree-grammar. AST transformations can be similarly accomplished.
> 
> Right. The whole big question here is whether the ANTLR
> (or any other) AST matching-and-replacement syntax can do
> all sorts of complicated matching and transformations that
> happen in real-world translation projects, AND whether it's
> easier to specify in ANTLR than in Java (or C++, or whatever).
> 
> One example comes to mind: I replace printf() with System.out.println
> if the last two characters in the first argument are "\n".
> In Java, that's just "if (arg1AST.getText().endsWith("\n")) {"
> Now I'm sure there's no "ANTLR-syntax" for that sort of thing,
> and the solution is "just embed Java in that case".

- Specify a pattern to match FUNCTION_CALL subtrees or whatever
they're called.
- Embed action code that performs required semantic checks - e.g.
check that it is "printf" etc.
- Depending on the checks perform the transformation using ANTLR
syntax, embedded action code or a mixture (you might need to update
auxilliary structures such as the symbol table in addition to AST
changes).

> But my problem
> is that I think that almost *all* the cases are like that, so I
> have to embed *lots* of Java, and I'd have to end up doing what
> it appears was done with that ASPA tool...separate out all that
> Java from the grammar to keep my sanity. And that's kinda ugly
> I think.

I don't think Anakreaon's reason for using the annotation tool was to
keep his sanity. Perhaps he just wanted the tree grammar specified in
one place. The structural differences between a C and a Java AST might
have precluded the use of the tool had he been working on a C-to-Java
translator.

> But don't you want the searching and the transformation to be
> "tightly coupled"? For example, I have hundreds of straightforward
> rules that can just be specified with simple text like this:
> 
> int main(int v1, char *v2[]) --> public static void main(String[] args)
> 
> So the "matching pattern" and the "replacement pattern" are only
> separated by "->". I'd hate to have rules where the "matching"
> is specified in one place and the "replacement"
> is in another. Even worse, the "matching" and "replacement" would
> be in different languages. Not good.

ANTLR syntax can specify both matching and trasformation. As can Java.
Or even a custom DSL (as you have presumably implemented above). One
option saves more time than the others.

> > Most production-level ANTLR grammars have a mix of ANTLR directives
> > and action code. Incidentally, I don't recommend using a tool without
> > understanding it.
> 
> You don't recommend using a library, for example, where you
> understand the thing that it returns, but now how it works?
> For example, you wouldn't use a JPEG encoder library that
> produces a .jpg image without understanding JPEG or the
> algorithm that it used?

Not without understanding what JPEG is and that the library is encode
JPEG. Also what input it requires and what the output would be. Then I
might try it on a few sample taks. I might really have been looking
for an MPEG encoding library after all  ;-)

> I say "new JButton("hello");" and use the JButton class without
> any idea how it does its drawing. I really think it's ok
> to use ANTLR to parse an C source into an AST without understanding
> cgram.g and the ANTLR syntax that it follows. 
> (That's not to say I don't).

Apples and oranges. Your JButton analogy is more like "I can use ANTLR
without needing to fully understand the contents of Ter's PhD thesis."
You can use JButton with understanding Java. And import syntax and
semantics. Classpaths. Object construction.....

> > Symbol tables are usually built for fast querying of node attributes
> > only and are often not updatable (there is no need since source files
> > don't change during compilation). 
> 
> AHA! Yes! And there you have it! The ASTs DO change during
> translation, they change dramatically and often...that's
> what translation is.
> 
> > You can make them updatable if your
> > applications need it.
> 
> And wouldn't every translator have
> a constantly changing symbol table?

Not neccessarily. A Pascal-to-Modula2 or GWBASIC-to-VB translator
might not need an updatable symbol table. I'm just guessing here mind you.

> > > > > > 4. Comparing approaches by analyzing ease of change
> > > > > > ===================================================
> > 
> > > Right, but the whole point of the tree grammar is to minimize
> > > the amount of code that you have to write. What's the point
> > > of embedding 30,000 lines of code inside a 350 line grammar,
> > > if you could have just written 30,020 lines that do the same
> > > thing?
> > 
> > A little exagerated no doubt. 
> 
> How do you mean? I do have about 30,000 lines of translation
> code, and the "bare - do nothing" C and java treewalker grammars
> are several hundred lines. And it wouldn't take more than
> 20 lines to do an inorder tree traversal.

It would take rather more if you preserved context info as the
tree-grammar approach does.

As for the 30,000 lines, I wonder how much of that would be generated
in an equivalent "tree-grammar" project.

> > Most people are not using ANTLR to build their systems. If they were,
> > they'd [better] know ANTLR.
> 
> So most people won't want to use ANTLR to do AST matching
> and transformations, even if they do use it (casually)
> for lexing and parsing. i.e.

Don't know. I do know that most people aren't building langauge
processors explicitly and therefore have no need to use ANTLR or other
similar tools (including "tree libraries").

> By analogy, Swing is inherently easier than SWT because it's
> "just Java", the developer doesn't have to learn a whole
> new framework. 

To a Java developer, SWT is just Java too. Am I missing something or
are you saying Swing is easier because its from Sun and/or is included
in the standard java distributions.

> > The empty expression?. Well, writing a rule to differentiate this case
> > from the other seems easy enough - check for the EXPR's children.
> 
> Yes, it's easy enough in Java, just say:
> AST expr = ast.getFirstChild();
> if (expr == null) {
> 
> ...but how do you do that using the treewalker grammar?
> Maybe you can, but it's one more thing that someone's
> got to learn that they wouldn't have to learn if they didn't
> use a treewalker.

You weren't born with the ability and knowledge to write that Java
code snippet were you?  ;-)

> > It can be a lot more than an AST traversal. It depends on what I put
> > into my grammar. See my earlier comments.
> 
> Can be, but is it typically a lot more for translators that
> convert one high-level-language to another?

I'd suggest that depends on the langauges involved.

> > Both the input and the output of a tree parser (tree-parser !=
> > tree-walker) is an AST. It is an AST-to-AST transformer. In the
> > simplest case (the tree walker) it simply visits each node of the AST
> > in depth-first order. The input and output ASTs are structurally the
> same.
> > 
> > In more complex cases, the AST would be transformed and the input and
> > output ASTs would be structurally different.
> 
> Yes I know. I'm just not getting my point across :(
> 
> How about this...let's say you're picking apples from a real
> tree.

Oh come on!

> You put good apples into the basket and bad ones in
> the garbage can. One way to pick the apples is with a tree
> traversal...climb the trunk, go out on the first branch,
> look at the first apple, etc.
> 
> But is that the most natural way to pick the apples?
> Maybe not. You could just shake the tree and then sort
> out the apples after they've fallen.

Sorry, don't like my apples overly bruised  ;-)

> > Not at all. I might be able to implement my system with the string
> > hangling sheenanigans of sed/awk/perl etc. The problem isn't ever
> > "lexing" or "parsing". It's building a source-to-source translator or,
> > computing source code metrics etc.
> 
> Look, I said that lexers and parsers are candidates for
> BNF-like specification because it's clear what the code is that
> they should produce (it could be cryptic like lex/yacc or readable
> like ANTLR, but the functionality of the generated code for
> a lexer or parser is clear to all).

Clear to you. That is what you mean right. And by implication, tree
parsers aren't. I suggested you should learn more about them. Perhaps
do a simple source-to-source project to get a feel for them.

<SNIP>

> Show me a C token stream and I'll show you the AST that it
> should produce. But show me a C AST and try to figure out
> what the "equivalent" Java AST should be. Ask 100 people
> and you'll get 100 different outputs.

Didn't we discuss an issue with the C AST structure for
ARRAY_DECLARATOR?. It would seem AST structure isn't universally
uniform after all.

> Yes, you don't need to use lexers and parsers, but that's
> not the point. The point is that there's an inherent
> difference between {lexers, parsers, compilers} and
> {translators}.

Compilers are translators. Lexers, parsers and treeparsers are
components of translators.

> > You might want consider separating analysis phases (that gather the
> > info you need to make your synthesis decisions) from synthesis phases
> > (that perform the actual transformations).
> 
> As I've said, too late for that, I'm done already :)
> The problem is that when you've got hundreds of translation
> rules, there's no point in doing an "analysis phase" ahead of time.
> The analysis is (potentially) wrong after each rule firing.
> 
> Say we have variable of type 'long'. I have lots of rules that
> might change that type to an 'int', rename it, move the declaration,
> delete it altogether, etc.

Nevertheless, translators are [almost] always written to operate in
such phases with synthesis following analysis.

> No, I can't use Java without understanding Java syntax :)
> But I can use ANTLR to lex and parse
> without understanding the grammar syntax.

Only because someone else has done all the work. Same as using a Java
library without having to write the code. What if there were no ready
made C grammar? Or if (like the C++ grammar) it doesn't have AST
building directives?

> > I don't know of any open source example. Does Ter's multi-pass
> > translators and Monty's AREV Basic work count?.
> 
> Maybe...anyone got a link for those?

The ANTLR site has some info on both project as does Monty's site.

> > Even lint/splint etc?. 
> >Compaq's ESC?. You *are* performing static
> > semantic analysis and using the result to informs decisions about
> > which AST transformations to perform.
> 
> I hadn't looked at lint, assuming that it's not doing anything
> radically different than javac (which I did look at).
> I hadn't looked at splintor ESC. I'll take a look at them.
> Keep in mind that these are just checking and not
> translating.

Translating is checking followed by transforming followed by checking
then transforming then....

Cheers,

Micheal
ANTLR/C#






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From doublemalam at yahoo.co.uk  Mon Nov 22 23:13:23 2004
From: doublemalam at yahoo.co.uk (Muhammad Masoom Alam)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] exact matching verses sufficient matches plz help
In-Reply-To: <20041122200652.48997.qmail@web86902.mail.ukl.yahoo.com>
Message-ID: <20041123071323.40269.qmail@web86902.mail.ukl.yahoo.com>

dear all,
Plz help me in exact matches problem i have attached with this.
 
regards.

Muhammad Masoom Alam <doublemalam@yahoo.co.uk> wrote:

 

Dear all,

 

As mentioned in the documentation of ANTLR that it performs sufficient matches instead of exact matches.

 

But I want exact match , I have a the following lines of code

 

check_rule

            :  (#(AND #(OR somerule1) #(IMPLIES somerule2)))

            | ( #(AND somerule3) #(IMPLIES somerule4)) 

            ;

 

it doesnot work 

 

I have tried the solution as follows

 

Check_rule 

: (#(AND #(OR somerule1) #(IMPLIES somerule2)))=> (#(AND #(OR somerule1) 

#(IMPLIES somerule2)))

|

( #(AND somerule3) #(IMPLIES somerule4))  => ( #(AND somerule3) #(IMPLIES somerule4))

 

if some body can help me in this

Regards

Muhammad.

 


---------------------------------
ALL-NEW Yahoo! Messenger - all new features - even more fun! 

---------------------------------
Yahoo! Groups Links

   To visit your group on the web, go to:
http://groups.yahoo.com/group/antlr-interest/
  
   To unsubscribe from this group, send an email to:
antlr-interest-unsubscribe@yahoogroups.com
  
   Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 


		
---------------------------------
Moving house? Beach bar in Thailand? New Wardrobe? Win ?10k with Yahoo! Mail to make your dream a reality.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041123/edd5601b/attachment.html
From open.zone at virgin.net  Mon Nov 22 23:20:52 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] Re: exact matching verses sufficient matches plz help
In-Reply-To: <20041123071323.40269.qmail@web86902.mail.ukl.yahoo.com>
Message-ID: <cnuock+3ac1@eGroups.com>



--- In antlr-interest@yahoogroups.com, Muhammad Masoom Alam
<doublemalam@y...> wrote:
> dear all,
> Plz help me in exact matches problem i have attached with this.
>  
> regards.


> As mentioned in the documentation of ANTLR that it performs
sufficient matches instead of exact matches.

> But I want exact match , I have a the following lines of code
> check_rule
> 
>             :  (#(AND #(OR somerule1) #(IMPLIES somerule2)))
> 
>             | ( #(AND somerule3) #(IMPLIES somerule4)) 
> 
>             ;
> it doesnot work 

What do you mean here?. What exactly happens, is there an error
message (if so, what was it?) etc.

In any case aren't you missing a leading '#' in the second alternative?

  : (#(AND #(OR somerule1) #(IMPLIES somerule2)))
  | #( #(AND somerule3) #(IMPLIES somerule4)) 
  ;

Micheal






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From doublemalam at yahoo.co.uk  Mon Nov 22 23:35:26 2004
From: doublemalam at yahoo.co.uk (Muhammad Masoom Alam)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] Re: exact matching verses sufficient matches plz help
In-Reply-To: <cnuock+3ac1@eGroups.com>
Message-ID: <20041123073526.10705.qmail@web86909.mail.ukl.yahoo.com>



Dear Michael

The problem is that i got no error

but wrong traversing of the tree is done by ANTLR e.g.

startrule
        : (check_rule)+
        ;
check_rule
          : and_implies
          | check1 
          ;
and_implies
          : 
          ( #(AND #(OR and_implies) #(IMPLIES 
implies_tree))) => #(AND #(OR and_implies) #(IMPLIES
implies_tree))

;
 check1 
       :

( #(AND check)) => #(AND check #(IMPLIES
implies_tree))

;


Problem

The problem is that always after matching the first
node and that is the root node and AND it executes the
first rule i.e and_implies and not check at all. even
if the 2nd rule is applicable

This solution i have taken from ANTLR documentation
which says some thing about the exact matching and
sufficient matching.
and even i remove the => sign and write the rule in
original form , i cant parse the exact matching .

Error which comes
<AST>:0:0: expecting "or", found 'And'

why i am saying that it performs sufficient matches,
becaz if u remove the rule and_implies , it directly
matches the check rule.

with Best regards.
Muhammad.



	
	
		
___________________________________________________________ 
ALL-NEW Yahoo! Messenger - all new features - even more fun! http://uk.messenger.yahoo.com


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Mon Nov 22 23:41:08 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <1AEEBBAE-3D18-11D9-9F82-000393B5606C@codetransform.com>
Message-ID: <cnupik+7phs@eGroups.com>



--- In antlr-interest@yahoogroups.com, Monty Zukowski <monty@c...> wrote:
> On Nov 22, 2004, at 7:21 PM, lgcraymer wrote:
> 
> >
> > No, I haven't added anything special for pattern matching.  The
> > automated tree grammar generation lessens the need--it provides the
> > interactive feedback needed to deal with tree transformation as a
> > design problem, not just to construct trees that can be walked via a
> > tree grammar.  That makes ANTLR's context-dependent pattern matching
> > more powerful, and the context-independent findAll routines
> > essentially irrelevant.
> >
> 
> OK, to be more concrete here, I want to give an example and then try 
> and figure out the definitions:
> 
> 1)  Add code to the entry and exit of every function.
>   2)  Add code to the entry and exit of all functions which have struct 
> special_thing as an argument which return ints.
>
> So there's patterns as in grammatical structure to find the function 
> definitions as in 1), and there are patterns to match specific 
> incarnations of trees within that structure as in 2).  I need help with 
> clear descriptions of these, but currently ANTLR's support of 2) is 
> left to actions and/or semantic predicates which can be ugly.

Ok, tree construction predicates might help some with case 2, but this
is a case where you need to a.)  identify function declaration syntax,
b.) record argument and return value semantics, and c.) take action
that depends on recognizing these specific semantic elements.

Assuming that you do not have explicit return types here (otherwise
this is trivial) then a-c translate to:
a.)  whether or not function declaration syntax is unambiguous at the
parser level, build trees for which function declarations are
unambiguously recognized.
b.)  record return semantics either as an attribute (field) of the
function declaration root node or by inserting a return type subtree
during one treewalk pass.  Argument syntax/semantics is presumably
already available before walking the function body; if not, reorganize
the tree to achieve that.
c.)  Having recorded the semantic information where it can be
accessed, carry out the statement insertions either in a subsequent
tree transforming pass or in a code generation pass.

This is not a bad example.  a) is one or more passes to consolidate
syntactic information into a usable tree form, b.) is a semantic
analysis pass, and c.) is a pass to express semantic information into
syntactic form.

--Loring

> 
> 
> Monty
> 
> ANTLR & Java Consultant -- http://www.codetransform.com
> ANSI C/GCC transformation toolkit -- 
> http://www.codetransform.com/gcc.html
> Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Tue Nov 23 00:35:08 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:37 2004
Subject: [antlr-interest] Re: exact matching verses sufficient matches plz help
In-Reply-To: <20041123073526.10705.qmail@web86909.mail.ukl.yahoo.com>
Message-ID: <cnusns+slab@eGroups.com>



This seems odd.  In this form, the synpreds within the rules aren't
very useful (there are no alternatives to disambiguate).  You should
be able to delete the synpreds and define check_rule as

check_rule
     :
     ( #( AND OR ) )=> and_implies
     |  check1
     ;

Try that and see what happens; also, take a look at the generated code
and see if it makes sense.  What is your target language?  This could
be a problem with the code generator's handling of synpreds.

--Loring

--- In antlr-interest@yahoogroups.com, Muhammad Masoom Alam
<doublemalam@y...> wrote:
> 
> Dear Michael
> 
> The problem is that i got no error
> 
> but wrong traversing of the tree is done by ANTLR e.g.
> 
> startrule
>         : (check_rule)+
>         ;
> check_rule
>           : and_implies
>           | check1 
>           ;
> and_implies
>           : 
>           ( #(AND #(OR and_implies) #(IMPLIES 
> implies_tree))) => #(AND #(OR and_implies) #(IMPLIES
> implies_tree))
> 
> ;
>  check1 
>        :
> 
> ( #(AND check)) => #(AND check #(IMPLIES
> implies_tree))
> 
> ;
> 
> 
> Problem
> 
> The problem is that always after matching the first
> node and that is the root node and AND it executes the
> first rule i.e and_implies and not check at all. even
> if the 2nd rule is applicable
> 
> This solution i have taken from ANTLR documentation
> which says some thing about the exact matching and
> sufficient matching.
> and even i remove the => sign and write the rule in
> original form , i cant parse the exact matching .
> 
> Error which comes
> <AST>:0:0: expecting "or", found 'And'
> 
> why i am saying that it performs sufficient matches,
> becaz if u remove the rule and_implies , it directly
> matches the check rule.
> 
> with Best regards.
> Muhammad.
> 
> 
> 
> 	
> 	
> 		
> ___________________________________________________________ 
> ALL-NEW Yahoo! Messenger - all new features - even more fun!
http://uk.messenger.yahoo.com





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From H.A.M.Maassen at student.tue.nl  Tue Nov 23 01:27:37 2004
From: H.A.M.Maassen at student.tue.nl (Maassen, H.A.M.)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] declarations after code
Message-ID: <1C5C690C06EFE244B83E3F133CA70BDE28585E@studentex6.campus.tue.nl>

Hello,
 
I'm in a bit of a fix :)
 
I'm currently writing a parser for a language that can have variables declared after the code where they are used. In addition, the language is ambiguous depending on the types of the variables.
 
For example, the following code results in two different trees depending on the types of the variables "a", "b" and "c":
 
Code
  a b c
 
Here, "a" could be a function that takes "b" and "c" as parameters or "a", "b" and "c" could each be separate functions (the language has no statement-separator).
 
It looks like I'll have to do two passes over the code, once to get all the variable types and once to parse the statements (and then a treewalk for full blown semantic checks).
 
Can anyone think of a cleaner solution to this problem?
 
Je vous prie d'agr?er, madame, monsieur, l'expression de mes sentiments distingu?s, 
Harald Maassen 


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 
From open.zone at virgin.net  Tue Nov 23 01:42:04 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <41A2537A.1030807@codetransform.com>
Message-ID: <cnv0lc+n65a@eGroups.com>



--- In antlr-interest@yahoogroups.com, Monty Zukowski <monty@c...> wrote:

> This may have not been very efficient since I was walking and building 
> trees for every other rule even though I didn't need to.  The building 
> far outweighs the walking, and Loring has been addressing that issue 
> with his new tree code.

Does a tranforming tree parser (i.e. buildAST=true) really rebuild
every node of the tree it traverses?. Even if no explicit
transformation is specified?. I was under the impression it simply
walked it.

> I agree that pattern-matching with ANTLR grammars is not fun, because 
> you do the actual testing in actions or semantic predicates.  

You don't have to (do the testing in actions/sem_preds). You could
encode the disambiguating attributes in the tree itself. Messy though.

> The main point is that I still want to specify the order of my 
> translations.  There are some directions ANTLR could go toward making 
> the specification of translations easier, namely pattern matching and 
> substitution.

AFAIK, ANTLR's meta-langauge already supports pattern matching (on AST
structure) and substitution in tree parser grammars.

Short of additional passes, can't see how a tool like ANTLR can help
with the ordering issue. Actually, what is the issue with the ordering
of translations?

Micheal
ANTLR/C#





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Tue Nov 23 01:51:08 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Re: declarations after code
In-Reply-To: <1C5C690C06EFE244B83E3F133CA70BDE28585E@studentex6.campus.tue.nl>
Message-ID: <cnv16c+35m7@eGroups.com>



--- In antlr-interest@yahoogroups.com, "Maassen, H.A.M."
<H.A.M.Maassen@s...> wrote:
> Hello,
>  
> I'm in a bit of a fix :)
>  
> I'm currently writing a parser for a language that can have
variables declared after the code where they are used. In addition,
the language is ambiguous depending on the types of the variables.
>  
> For example, the following code results in two different trees
depending on the types of the variables "a", "b" and "c":
>  
> Code
>   a b c
>  
> Here, "a" could be a function that takes "b" and "c" as parameters
or "a", "b" and "c" could each be separate functions (the language has
no statement-separator).
>  
> It looks like I'll have to do two passes over the code, once to get
all the variable types and once to parse the statements (and then a
treewalk for full blown semantic checks).
>  
> Can anyone think of a cleaner solution to this problem?

Tree parsers, multiple phases and a symbol table. 

- Parse the source (entering declarations into the table as you) and
build an AST
- Walk the AST and use the symtab info to restructure your tree (your
symtab already has info about all declarations you will encounter)
- Walk the AST again and do your full blown semantics check

You can write more complex code that would reduce this to a single
post-parse AST traversal in many cases by recording (during the parse)
the AST subtrees that need fixing. Fix before the full semantic checks.

Cheers!

Micheal
ANTLR/C#





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From H.A.M.Maassen at student.tue.nl  Tue Nov 23 02:02:40 2004
From: H.A.M.Maassen at student.tue.nl (Maassen, H.A.M.)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] declarations after code
Message-ID: <1C5C690C06EFE244B83E3F133CA70BDE28585F@studentex6.campus.tue.nl>

Thinking about this, would it be possible to jump the lexer and parser around the code to skip the statements until the declarations section is parsed and then go back and parse them?
 
Code
  a b c
 
Type
  a = func
  b = func
  c = func
 
So my parser would look something like this:
 
program: {store position 1} 
         (.)* declarations 
         {store position 2} 
         {go to position 1} 
         statements 
         {go to position2};
statements: "code" (var)*;
declarations "type" ( var EQUALS type )*;
 
Can something like this be done?
 
Or what if I buffer the tokens read in the statements block?
 
program: { buffering=true; } 
         statements 
         { buffering=false;} 
         declarations 
         { parse buffered statements; };
statements: "code" (var)*;
declarations "type" ( var EQUALS type )*;
 
Any thoughts would be greatly appreciated :)
Regards, Harald Maassen

	-----Original Message----- 
	From: Maassen, H.A.M. 
	Sent: Tue 11/23/2004 10:27 AM 
	To: antlr-interest@yahoogroups.com 
	Cc: 
	Subject: [antlr-interest] declarations after code
	
	

	Hello,
	
	I'm in a bit of a fix :)
	
	I'm currently writing a parser for a language that can have variables declared after the code where they are used. In addition, the language is ambiguous depending on the types of the variables.
	
	For example, the following code results in two different trees depending on the types of the variables "a", "b" and "c":
	
	Code
	  a b c
	
	Here, "a" could be a function that takes "b" and "c" as parameters or "a", "b" and "c" could each be separate functions (the language has no statement-separator).
	
	It looks like I'll have to do two passes over the code, once to get all the variable types and once to parse the statements (and then a treewalk for full blown semantic checks).
	
	Can anyone think of a cleaner solution to this problem?
	
	Je vous prie d'agr?er, madame, monsieur, l'expression de mes sentiments distingu?s,
	Harald Maassen
	
	
	
	Yahoo! Groups Links
	
	
	
	
	



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 7006 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041123/5aacc820/attachment.bin
From anakreonmejdi at yahoo.gr  Tue Nov 23 01:51:01 2004
From: anakreonmejdi at yahoo.gr (Anakreon)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <cnu6mt+ahop@eGroups.com>
References: <cnu6mt+ahop@eGroups.com>
Message-ID: <41A30805.2070902@yahoo.gr>


> Anakreon,
> 
> I spent a couple of hours trying to figure out how your stuff works.
The codebase is large. I have extensive docs on how the translator is
implemented but is in Greek. 
> It looks to me like you've got tree_js.g (251 lines) for your
> Jscript treewalker grammar. You've got tree_js_php.act
> containing two things: supporting classes (the first 1481 lines),
> plus the actual code that would normally be embedded
> in the grammar (the remaining 827 lines). And somehow you
> automatically stuff that code into the .g file before
I use annotation, a tool which is available from antlr site.
Inside the grammar a placeholder for the action code looks like this:
<code_here> and in an other file the actual code is inserted like this:
@code_here : //Java code 
The two files are merged before antlr is called.
> using ANTLR on it? And then you've got 9200 lines of
> xml (tests/js_*.xml)
Those are just test cases. The AST generated by the Parser and the TreeParser
are saved in a file when I'm certain that the result is OK.
When I change the grammar, I compare the EAST generated from those 2 phases
with the stored EAST in the files. This process is automated with JUnit and
a custom TestCase class. 
> that appears to specify how to translate specific AST structures.
> (they appear to contain transformation logic, yet their in
> the 'test' directory...are they part of the program, or some
> sort of test case?)
The xml which contain transformation logic are in the objects
directory.
> Also, could you give a small example of some more complex 
> transformation? I didn't see anything in the code you posted
> other than very simple syntactic changes (for example, nothing
> that would have to look at other places in the AST).
The post was about transformation of syntactic structures.
The class definition of JScript was transformed into an equivalent
syntactic structure of PHP.
If by complex transformation you mean method calls 
(because the transformation I posted is really complex) I'll demonstrate
a transformation of an ActiveX call:
Code from tests/sources/response.asp
 <%
Response.Buffer = true
Response.CacheControl = "Public"
cache = Response.CacheControl
Response.ContentType = "text/plain"
cType = Response.ContentType
a = Response.isClientConnected
Response.status = "Some Status"
Response.pics = "pics"
Response.Expires = "123"
Response.ExpiresAbsolute = "12/2/2004"
Response.addHeader "MyHeader", "HeaderValue"
Response.AppendToLog "This is my message"
Response.Clear()
Response.Clear
Response.end
Response.End()
Response.Flush
Response.Flush()
Response.redirect "Some url"
Response.write(html)
Response.write html & "<br>"
Response.Cookies("A") = "Value"
Response.Cookies("A")("B") = "Other value"
%>
Code generated by command:./run.sh tests/sources/response.asp . -s
<?php
ob_start();
session_cache_limiter("Public");
$cache = session_cache_limiter();
header("Content-type: " . "text/plain");
$cType = $_SERVER["CONTENT_TYPE"];
$a = connection_status() == 0;
header("Status: " . "Some Status");
header("pics-label: " . "pics");
header("Expires: " . gmdate("D, d M Y H:i:s", time() + "123") . "GMT");
header("Expires: " . "12/2/2004");
header("MyHeader" . ": " . "HeaderValue");
error_log("This is my message");
ob_clean();
ob_clean();
ob_flush_end();
exit();
ob_flush_end();
exit();
ob_flush();
ob_flush();
header("Location: " . "Some url");
print($html);
print($html . "<br>");
set_cookie("A", "Value");
set_cookie("A" . "[" . "B" . "]", "Other value");
?>

An other complex transformation could be the test case tests/sources/string.asp
which tests the translation of the String built-in object of Jscript.

If you need more info send a mail.
In case the antlr list is not interested on this issue, send email to my address
only.

Anakreon


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Anthony.Youngman at ECA-International.com  Tue Nov 23 02:24:36 2004
From: Anthony.Youngman at ECA-International.com (Anthony Youngman)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] ITLS (was: Translators Should Use Tree Grammars)
Message-ID: <C7FE35004D40FD45AA342991B88CE40409B08D@lnml1.eca-international.local>


And to add my tuppence-worth, speaking as an *engineer* (actually,
scientist by training), the computer mathematicians are making exactly
the same mistake as the hardware people, namely a belief in abstraction
...

Okay, I'm more into database theory, but you're talking about logic,
symbolism and abstraction - all branches of PURE mathematics. Where is
the *scientific* evidence that all this maths is *relevant* to problem
in hand (stuff like experiment, statistics, etc etc).

My favourite example that I always quote is Newtonian Mechanics. Viewed
as an exercise in Maths, it's perfect. Can anybody point out any
*mathematical* flaws in its arguments? Yet viewed as an exercise in
*science*, it's irrelevant in many cases because it just doesn't
describe the world as it is.

Sorry if I'm drifting way off topic, but I really get wound up when
people seek to justify their world view through mathematics. There's a
very big gulf between *correct* maths and *relevant* maths, and too many
people seem to think that just because it's the former, it has to be the
latter too. (Look at modern physics - we have many "correct" theories,
we're just trying to work out which ones are "relevant".)

Cheers,
Wol

-----Original Message-----
From: John D. Mitchell [mailto:johnm-antlr@non.net] 
Sent: 22 November 2004 18:25
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] ITLS (was: Translators Should Use Tree
Grammars)


[For the "linguists" in the audience, let me humbly suggest looking at
the
history and evolution of programming languages slightly differently...
There are two primary thrusts of GPPL development, mathematics (formal
logic, symbolism, abstractionism) and hardware abstraction (performance,
mechanistic, conformist).  All GPPLs are some combination of the
tradeoffs
between those two (often conflicting) needs.  Given the historical lack
of
hardware horsepower, it's no wonder that the hardware abstraction camp
has
been so dominant.  This left the abstract, mathematics school of thought
on
the mostly research fringe where they've had to watch their old ideas
get
"rediscovered" (usually poorly :-) by succeeding generations of the
popular
GPPLs.  Structured programming, functional programming,
meta-programming,
dynamic languages, OOP, OOD, patterns, etc.  So far, that all is fairly
commonly understood.  Now, take a step to the left and look again at
that
evolution in terms of how all of those approaches are about trying to
get a
grip on the real languages that the programmers are trying to create and
manipulate to develop (as) their systems.]



****************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 8272 5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

****************************************************************************



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Anthony.Youngman at ECA-International.com  Tue Nov 23 03:38:52 2004
From: Anthony.Youngman at ECA-International.com (Anthony Youngman)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
Message-ID: <C7FE35004D40FD45AA342991B88CE40409B091@lnml1.eca-international.local>


Let's see your pattern match cope with the following line of (*real*)
code from a (*real*) language ...

REM: REM = REM( 85, 17) ;* REM calculate the remainder

Where REM is sequentially a label, a variable, a function, and a
statement. I think that pretty much this statement is in the compiler's
regression tests to make sure it works properly :-)

Cheers,
Wol

-----Original Message-----
From: John D. Mitchell [mailto:johnm-antlr@non.net] 
Sent: 22 November 2004 06:45
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars


>>>>> "atripp54321" == atripp54321  <atripp@comcast.net> writes:
>>>>>> <oliver.zeigermann@g...> wrote:
[...]


> Yes, I think that's it exactly.  It seems to me that something like a
> C-to-Java translator is more like an English-to-Spanish translator
than
> it is like a C-to-object code compiler. The work that needs to be done
is
> so large and complicated, that it lends itself to a
> pattern-matching-and-replacement approach rather than a
traverse-the-AST
> approach.

You've just given the rationale for running the hell away from the
insanity
caused by "pattern-matching-and-replacement" approaches... They fail to
hold up under the pressure of non-trivial systems.  The very fact that
their behavior is incestuously emergent destroys any semblance of
robustness in the face of change, clarity in debuggability, etc.  The
simplest example of this nightmare is XSLT.  Even hardcore (from a rigor
POV) approaches like prolog work well only for constrained domains and
contexts).


[...]

> I mean look at this huge list of just some of what's needed to convert
C
> to Java, omitting almost all detail: http://jazillian.com/how.html How
> can you specify that kind of functionality in a tree grammar?  You'll
end
> up with tens of thousands of lines of code embedded within a couple of
> hundred lines of grammar. Moving the code out into another file
doesn't
> change much.

Multiple phases.


> I don't want to "walk the tree", I want to "search the tree for
patterns
> and make replacements".

That's exactly what a tree walker gives you.

Take care,
	John


 
Yahoo! Groups Links



 





****************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 8272 5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

****************************************************************************



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-7SHfnq2TtMSgdDjxK=Zv5u8 at yahoogroups.com  Tue Nov 23 04:23:37 2004
From: antlr-interest-accept-7SHfnq2TtMSgdDjxK=Zv5u8 at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:38 2004
Subject: MODERATE -- j.theess@tu-bs.de posted to antlr-interest
Message-ID: <1101212617.478.23822.m21@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  j.theess@tu-bs.de 

The message summary:
--------------------
FROM: j.theess@tu-bs.de 
DATE: Tue, 23 Nov 2004 13:21:15 +0100 
SUBJECT: Re: [antlr-interest] "back to the future" (merged lexer / parser spec) 

Terence Parr wrote: 

>With this merged spec, ultimately I would like to do 
context-sensitive >(goal-oriented) lexing so we could handle
things like the C++ nested >template lexing issue. With 
input "List<List<int>>" you don't know in >the lexer w/o 
context if the final ">>" is two '>' or one '>>' (shift). > 

I don't know if it's come up before, but "list<list<int>>" 
actually isn't legal in c++. Haven't got the ANSI spec here 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=378 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-7SHfnq2TtMSgdDjxK=Zv5u8@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: =?ISO-8859-1?Q?Jens_Thee=DF?= <j.theess@tu-bs.de>
Subject: Re: [antlr-interest] "back to the future" (merged lexer / parser
 spec)
Date: Tue, 23 Nov 2004 13:21:15 +0100
Size: 2562
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041123/1d4967b9/attachment.mht
From eddie_antlr at yahoo.co.uk  Tue Nov 23 04:55:35 2004
From: eddie_antlr at yahoo.co.uk (dsfsdf fdsfdsf)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] How to copy/reference hidden tokens in transformations
In-Reply-To: <20041117190105.14902.qmail@web25202.mail.ukl.yahoo.com>
Message-ID: <20041123125535.50860.qmail@web25207.mail.ukl.yahoo.com>

hi
No bug existed,error existed in my tree walker code
thanks
ed.

dsfsdf fdsfdsf <eddie_antlr@yahoo.co.uk> wrote:
hi ter
There may be one other glitch,
I have a file ASTPass1 which transforms one of my trees,
However antlr does not generate this tree with the comments.
I have gone through the generated ASTPass1.java file and 
have found that the root of this problem lies within the 
ASTFactory method >
 
public AST make(AST[] nodes)
 
This is a sample of my ASTPass1 file
 
ASTArray ASTarray = (new ASTArray(5)).add(tmp1_AST).add(s_AST).add(into_tree).add(f_AST).add(w_AST);
  
  Parser.treeWalker(((CommonASTWithHiddenTokens2)ASTarray.array[3]));

  select_AST=(CommonASTWithHiddenTokens2)astFactory.make(ASTarray); 
  Parser.treeWalker((CommonASTWithHiddenTokens2)select_AST);
 
I do a tree walk before the ASTFactory.make method gets called and here i input the AST that has the hidden token and it correctly outputs the hidden token.
However when i do a tree walk after the make() methos gets called
the hidden token doesn't get printed out.
I have debugged through the ASTFactory.make method and i can see that the AST that is supposed to hold the token does exist and the hidden token exists.
Maybe its worth noting that the AST that has the hidden token has a firstChild of a normal token which in turn is linked to the hidden token.
 
Does the ASTFactory class need to be overidden maybe?
 
thanks
ed.


Terence Parr <parrt@cs.usfca.edu> wrote:

Awesome. Fixed in main line code.
Ter
On Nov 17, 2004, at 6:28 AM, dsfsdf fdsfdsf wrote:

> hi ter
> Did that suggestion and it worked.
>  
> public void initialize(AST t)
> {  hiddenBefore = ((CommonASTWithHiddenTokens)t).getHiddenBefore();
>    hiddenAfter = ((CommonASTWithHiddenTokens)t).getHiddenAfter();
>    super.initialize(t) 
> }
>  
> Both hiddenBefore and hiddenAfter must be cast to type 
> CommonASTWithHiddenTokens to allow access to the methods 
> getHiddenAfter() and getHiddenBefore()
> And replace CommonASTWithHiddenTokens objects with your new class in 
> your parser class.
> thanks for all the help.
> ed. 
>  
>
> Terence Parr 
wrote:
>
>
> On Nov 16, 2004, at 8:53 AM, dsfsdf fdsfdsf wrote:
>
> > When i am creating a new tree from my source tree that has some 
> hidden
> > tokens, how do i copy these hidden across?
> > At the moment it is not doing it automatically.
> > thanks
>
> Hi Ed. Can't remember so I did a test.
>
> Here is a grammar:
>
> class TP extends TreeParser;
>
> options {
> buildAST=true;
> }
>
> a : ID ;
>
> It generates relevant code:
>
> tmp1_AST = astFactory.create((AST)_t);
> tmp1_AST_in = (AST)_t;
> astFactory.addASTChild(currentAST, tmp1_AST);
> match(_t,ID);
>
> So I looked at:
>
> /** Create a new empty AST node; if the user did not specify
> * an AST node type, then create a default one: CommonAST.
> */
> public AST create(AST tr) {
> if (tr == null) return null; // create(null) == null
> AST t = create(tr.getType());
> if ( t !=null ) {
> t.initialize(tr);
> }
> return t;
> }
>
> which invokes CommonASTWithHiddenTokens.initialize(AST) but that is
> inherited from CommonAST:
>
> public void initialize(AST t) {
> setText(t.getText());
> setType(t.getType());
> }
>
> Hmm...seems like that should be override just like I do for Token arg:
>
> public void initialize(Token tok) {
> CommonHiddenStreamToken t = (CommonHiddenStreamToken)tok;
> super.initialize(t);
> hiddenBefore = t.getHiddenBefore();
> hiddenAfter = t.getHiddenAfter();
> }
>
> Seems I forgot to do this. Ok, I suggest subclassing
> CommonASTWithHiddenTokens and overriding to be something like:
>
> public void initialize(AST t) {
> hiddenBefore = t.getHiddenBefore();
> hiddenAfter = t.getHiddenAfter();
> super.initialize(t);
> }
>
> Let me know if that works and I'll put it in ;)
>
> Don't forget to use the new subclass when you set the AST type etc...
> in the parser/tree parser.
>
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>
>
> Win a castle for NYE with your mates and Yahoo! Messenger
>
> Yahoo! Groups Links
>
> ? To visit your group on the web, go to:
> http://groups.yahoo.com/group/antlr-interest/
>  
> ? To unsubscribe from this group, send an email to:
> antlr-interest-unsubscribe@yahoogroups.com
>  
> ? Your use of Yahoo! Groups is subject to the Yahoo! Terms of 
> Service.
>
>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!






Yahoo! Groups Links









---------------------------------
Win a castle for NYE with your mates and Yahoo! Messenger 

---------------------------------
Yahoo! Groups Links

   To visit your group on the web, go to:
http://groups.yahoo.com/group/antlr-interest/
  
   To unsubscribe from this group, send an email to:
antlr-interest-unsubscribe@yahoogroups.com
  
   Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 


		
---------------------------------
 ALL-NEW Yahoo! Messenger - all new features - even more fun!  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041123/37bf4ddf/attachment.html
From atripp at comcast.net  Tue Nov 23 07:16:04 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <16801.35584.115989.287460@despot.non.net>
Message-ID: <cnvk7k+8gcs@eGroups.com>




> > I don't want to "walk the tree", I want to "search the tree for
patterns
> > and make replacements".
> 
> That's exactly what a tree walker gives you.

But only matching at a particular point in the walking of the
tree, right? In other words, I can't just say "match this pattern
anywhere in the AST", I have to put the pattern at a particular
place in the grammar (or put that action at each and every
node in the grammar). Or Am I missing something?

> 
> Take care,
> 	John





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-GwfykQwQjaA=cvqtQHBvd08 at yahoogroups.com  Tue Nov 23 07:22:57 2004
From: antlr-interest-accept-GwfykQwQjaA=cvqtQHBvd08 at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:38 2004
Subject: MODERATE -- kevin@kevlindev.com posted to antlr-interest
Message-ID: <1101223377.352.80860.m18@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  kevin@kevlindev.com 

The message summary:
--------------------
FROM: kevin@kevlindev.com 
DATE: Tue, 23 Nov 2004 09:22:44 -0600 
SUBJECT: Name Collision 

Hello, 

I'm just starting out with ANTLR and I've run across a name 
collision with my generated C# code. When I look at the 
generate parser code, I see approximately the following: 

public class MyParser : antlr.LLkParser { ... public const 
int RBRACKET = 37; ... 

public void someRule() { ... Token RBRACKET = null; ... 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=379 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-GwfykQwQjaA=cvqtQHBvd08@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "Kevin Lindsey" <kevin@kevlindev.com>
Subject: Name Collision
Date: Tue, 23 Nov 2004 09:22:44 -0600
Size: 6664
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041123/6f131107/attachment.mht
From antlr-interest-accept-MHSy1=HEW2EfQlWDgHVLzqU at yahoogroups.com  Tue Nov 23 07:25:36 2004
From: antlr-interest-accept-MHSy1=HEW2EfQlWDgHVLzqU at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:38 2004
Subject: MODERATE -- kevin@kevlindev.com posted to antlr-interest
Message-ID: <1101223536.151.66440.m22@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  kevin@kevlindev.com 

The message summary:
--------------------
FROM: kevin@kevlindev.com 
DATE: Tue, 23 Nov 2004 09:23:41 -0600 
SUBJECT: Differing behavior between ParseTreeDebugParse and Parser 

Hello, 

I decided to follow the suggestion of one of the ANTLR 
articles which describes how to generate the derivation of a
parse for debugging purposes. This was working great and 
then I started getting stack underflows from 
ParseTreeDebugParser. I reverted my grammar, but for the 
life of me the problem persists. I decided to switch back to
the default "extends Parser" and the exact same parse 
completes successfully. I have defaultErrorHandler set to 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=380 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-MHSy1=HEW2EfQlWDgHVLzqU@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "Kevin Lindsey" <kevin@kevlindev.com>
Subject: Differing behavior between ParseTreeDebugParse and Parser
Date: Tue, 23 Nov 2004 09:23:41 -0600
Size: 3856
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041123/9c8e2e8f/attachment.mht
From demakov at ispras.ru  Tue Nov 23 07:34:11 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
References: <cnvk7k+8gcs@eGroups.com>
Message-ID: <01ae01c4d171$e16c7e70$8cc79553@marlboro>


> > > I don't want to "walk the tree", I want to "search the tree for
> patterns
> > > and make replacements".
> > 
> > That's exactly what a tree walker gives you.
> 
> But only matching at a particular point in the walking of the
> tree, right? In other words, I can't just say "match this pattern
> anywhere in the AST", I have to put the pattern at a particular
> place in the grammar (or put that action at each and every
> node in the grammar). Or Am I missing something?

But if this pattern contains some node reference, it can be placed
only in particular place in grammar - where that node is referenced :)
And I think that most of reasonable patterns are linked to some node...

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From atripp at comcast.net  Tue Nov 23 07:47:07 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <9da4f45204112215272d71ec5@mail.gmail.com>
Message-ID: <cnvm1r+a6fj@eGroups.com>



--- In antlr-interest@yahoogroups.com, Oliver Zeigermann
<oliver.zeigermann@g...> wrote:
> On Mon, 22 Nov 2004 21:16:12 -0000, atripp54321 <atripp@c...> wrote:
> > No, because there's no mixing of code there, it's all ANTLR.
> > And besides, I can (pretty much) use ANTLR without understanding
> > the grammar syntax - just use the .g files that came with it.
> 
> Just for me, as I tend to be a little sluggish: You use the ANTLR
> grammar (for C) and let it generate the AST? Which is something that
> can be done without any idea of ANTLR... Then you access this AST and
> make the translation to Java as explained in your article, right?
> Well, you would at least have to know the structure of the AST, or am
> I getting it all wrong again?

That's exactly right. (Though I do know some ANTLR grammar
syntax, but for the sake of argument, assume I don't).

> 
>  > Right, but the whole point of the tree grammar is to minimize
> > the amount of code that you have to write. What's the point
> > of embedding 30,000 lines of code inside a 350 line grammar,
> > if you could have just written 30,020 lines that do the same
> > thing?
> 
> I thought it might be because of readability and maintenance. Where
> you have a separation of what describes the structure (the AST
> traversal notation) and what is to be done (the Java code).

With treewalkers or not, you're always going to have
the "shape" of the AST buried throughout your code.






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From atripp at comcast.net  Tue Nov 23 08:05:06 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <1AEEBBAE-3D18-11D9-9F82-000393B5606C@codetransform.com>
Message-ID: <cnvn3i+jpu2@eGroups.com>



And:

3) At every variable declaration where the type is "FILE *",
look at all references and check for fopen() (and similar) calls
to check whether the file is opened for reading, writing, or both.
Replace the variable type by ObjectInputStream, ObjectOutputStream,
or RandomAccessFile based on that. Because you changed a variable type,
be sure to check all other references of the variable, as you may
have to also change the types of other variables. During that
checking, you may find that in fact you can't make it an
ObjectInputStream and you'll have to resort to RandomAccessFile.
Change all references for read/write to their Java equivalents.
Wrap all these IO operations in appropriate try/catch blocks
at a reasonable level.

I just picked that transformation rule at random...let me
know if you'd like me to search for a complicated one :)

Andy







 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From j.theess at tu-bs.de  Tue Nov 23 08:17:42 2004
From: j.theess at tu-bs.de (=?ISO-8859-1?Q?Jens_Thee=DF?=)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] java15.g: Can't parse only conditionalExpression
Message-ID: <41A362A6.2050005@tu-bs.de>


Hi,

I'm developing a tool that parses a textual form of UML sequence 
diagrams with some embedded java. The embedded java includes compound 
statements and conditional expressions. Before integrating the java 
parser (java15.g) into the sequence diagram parser, I tested the java 
parser stand-alone on some input it will encounter in the sequence 
diagram. The setup is as follows:

         JavaLexer lexer = new JavaLexer(r);
         lexer.setFilename(f);
         JavaRecognizer parser = new JavaRecognizer(lexer);
         parser.setFilename(f);
         parser.conditionalExpression();     // or 
parser.compoundStatement().

The call to parser.compoundStatement() does fine with following input:

{
    testfiles.A a = new testfiles.A();
    sdVariables.put("testfiles.A", "a", a);
}

However, a call to parser.conditionalExpression() fails on following input:

1 == 2

or

d.startsWith("ha")

What am I missing? Isn't the input a valid conditional expression?

Thanks,
Jens


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From atripp at comcast.net  Tue Nov 23 08:23:14 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <41A30805.2070902@yahoo.gr>
Message-ID: <cnvo5i+pfmt@eGroups.com>



Anakreon,
OK, thanks. Now I see.
So you have, for example, this rule in XML:
  <!-- Check w3 for header name -->
  <property name="CacheControl" type="DSTRING">
    <arg type="DSTRING" />
    <read>
      <ast name="METHOD_CALL" text="session_cache_limiter" />
    </read>
    <write>
      <ast name="METHOD_CALL" text="session_cache_limiter">
          <ast name="ARGLIST_VALUES">
              <arg index="1" />
          </ast>
      </ast>
    </write>
  </property>

...which says to replace this:
Response.CacheControl = "X"
...with this:
session_cache_limiter("X");


I'm still not seeing how you do the more complicated stuff like
accessing information that's in different parts of the AST.
Do you have a symbol table? And can you get a list of all
the references to a particular variable? In other words,
the XML files in the object directory specify the simpler
types of transformations, but where is the code for
the more complicated cases?

I'll send future questions (if any) in email.
Thanks again,
Andy





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From kevin at kevlindev.com  Tue Nov 23 07:23:41 2004
From: kevin at kevlindev.com (Kevin Lindsey)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Differing behavior between ParseTreeDebugParse and Parser
Message-ID: <200411231523.iANFNna13746@westhost38.westhost.net>

Hello,
 
I decided to follow the suggestion of one of the ANTLR articles which
describes how to generate the derivation of a parse for debugging purposes.
This was working great and then I started getting stack underflows from
ParseTreeDebugParser. I reverted my grammar, but for the life of me the
problem persists. I decided to switch back to the default "extends Parser"
and the exact same parse completes successfully. I have defaultErrorHandler
set to false, so I believe I should see any errors encountered during the
parse. Is this an indication that something is wrong with my grammar or with
ParseTreeDebugParser. BTW, I'm using the C# generation.
 
Thanks,
Kevin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041123/d8f67e52/attachment.html
From kevin at kevlindev.com  Tue Nov 23 07:22:44 2004
From: kevin at kevlindev.com (Kevin Lindsey)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Name Collision
Message-ID: <200411231522.iANFMpa13123@westhost38.westhost.net>

Hello,
 
I'm just starting out with ANTLR and I've run across a name collision with
my generated C# code. When I look at the generate parser code, I see
approximately the following:
 
public  class MyParser : antlr.LLkParser
{
    ...
    public const int RBRACKET = 37;
    ...
 
    public void someRule()
    {
        ...
        Token  RBRACKET = null;
        ...
 
        switch ( LA(1) )
        {
            ...
            match(RBRACKET);
            ...
        }
}
 
The RBRACKET in the match call should use the const RBRACKET, but the local
RBRACKET is hiding that name. I can easily get around this problem by
prefixing "MyParser." to the match parameter, but I have to make this change
everytime I change the grammar, which is a lot right now :-). Is there any
way to remedy this in the code generation?
 
Thanks,
Kevin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041123/b30afeb4/attachment.html
From j.theess at tu-bs.de  Tue Nov 23 04:21:15 2004
From: j.theess at tu-bs.de (=?ISO-8859-1?Q?Jens_Thee=DF?=)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] "back to the future" (merged lexer / parser
 spec)
In-Reply-To: <F0777C46-3A54-11D9-A398-000A95891192@cs.usfca.edu>
References: <F0777C46-3A54-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <41A32B3B.5010508@tu-bs.de>



Terence Parr wrote:

>With this merged spec, ultimately I would like to do context-sensitive 
>(goal-oriented) lexing so we could handle things like the C++ nested 
>template lexing issue.  With input "List<List<int>>" you don't know in 
>the lexer w/o context if the final ">>" is two '>' or one '>>' (shift).
>
I don't know if it's come up before, but "list<list<int>>" actually 
isn't legal in c++. Haven't got the ANSI spec here but at least g++ 
3.3.3 complains with an "error: `>>' should be `> >' in template class 
name". You have to write "list<list<int> >" instead, which should be 
lexable without context. Don't know how it's with the java generics though.

Anyway, context-sensitive lexing is a feature I'd like to see. When I 
find the time (next year or decade), I intend to write a parser for 
Wiki-text using antlr, and I think that this new lexing could come in 
handy there.

Greetings,
Jens





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From atripp at comcast.net  Tue Nov 23 08:35:51 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <C7FE35004D40FD45AA342991B88CE40409B091@lnml1.eca-international.local>
Message-ID: <cnvot7+u33b@eGroups.com>



--- In antlr-interest@yahoogroups.com, "Anthony Youngman"
<Anthony.Youngman@E...> wrote:
> Let's see your pattern match cope with the following line of
(*real*)
> code from a (*real*) language ...
> 
> REM: REM = REM( 85, 17) ;* REM calculate the remainder
> 
> Where REM is sequentially a label, a variable, a function, and a
> statement. I think that pretty much this statement is in the
compiler's
> regression tests to make sure it works properly :-)
> 
> Cheers,
> Wol

The way Jazillian handles it is this.
The ANTLR-generated parser will remove the comment (but
not before I save it, and I'll restore it at the end).
My GotoRemoverRule removes all labels and gotos.
My findAllVariableReferences() will include the variable
reference, but not the function call, and my findAllFunctionCalls()
method will find just the function call. Both these methods
look at local syntax (the "(" following) to figure out
whether it's a function call or a variable reference.

I know, you're all cringing :(

Andy





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-3CAB8Ds9lKB_j7QEpLUIDZ0 at yahoogroups.com  Tue Nov 23 08:41:15 2004
From: antlr-interest-accept-3CAB8Ds9lKB_j7QEpLUIDZ0 at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:38 2004
Subject: MODERATE -- Bruno.Delzant@proximus.net posted to antlr-interest
Message-ID: <1101228075.483.59862.m20@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  Bruno.Delzant@proximus.net 

The message summary:
--------------------
FROM: Bruno.Delzant@proximus.net 
DATE: Tue, 23 Nov 2004 17:40:57 +0100 
SUBJECT: Space in values 

Hi, 

I have a small problem. I would like to parse the following 
text file: 

message BMB.JAN.PROVISIONING.REQUEST = { string PRIORITY = 
"3" string REQ_USER_ID = "PTS_JDA" string REQ_PROC_ID = 
"process" string REQUEST_DATE = "20020101" string 
PRIMARY_SUBS_ID = "004741112770000" string SECONDARY_SUBS_ID
= "058739 21" message TASK = { string TASK_TYPE = 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=381 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-3CAB8Ds9lKB_j7QEpLUIDZ0@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "DELZANT Bruno \(BMB\)" <Bruno.Delzant@proximus.net>
Subject: Space in values
Date: Tue, 23 Nov 2004 17:40:57 +0100
Size: 13447
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041123/5f7101b1/attachment.mht
From atripp at comcast.net  Tue Nov 23 08:47:13 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <01ae01c4d171$e16c7e70$8cc79553@marlboro>
Message-ID: <cnvpih+p1v1@eGroups.com>



--- In antlr-interest@yahoogroups.com, "Alexey Demakov" <demakov@i...>
wrote:
> > > > I don't want to "walk the tree", I want to "search the tree for
> > patterns
> > > > and make replacements".
> > > 
> > > That's exactly what a tree walker gives you.
> > 
> > But only matching at a particular point in the walking of the
> > tree, right? In other words, I can't just say "match this pattern
> > anywhere in the AST", I have to put the pattern at a particular
> > place in the grammar (or put that action at each and every
> > node in the grammar). Or Am I missing something?
> 
> But if this pattern contains some node reference, it can be placed
> only in particular place in grammar - where that node is referenced :)
> And I think that most of reasonable patterns are linked to some node...

Yea, you're right, almost every pattern-matching rule
should probably only match at a certain point in the grammar.
I don't like having to figure out where that point is for
every rule (I'd rather just let the runtime churn a bit), but
maybe I'm just too lazy :)

Andy
> 
> Regards,
> Alexey
> 
> -----
> Alexey Demakov
> TreeDL: Tree Description Language: http://treedl.sourceforge.net
> RedVerst Group: http://www.unitesk.com





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From atripp at comcast.net  Tue Nov 23 08:52:22 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Re: java15.g: Can't parse only conditionalExpression
In-Reply-To: <41A362A6.2050005@tu-bs.de>
Message-ID: <cnvps6+l207@eGroups.com>



--- In antlr-interest@yahoogroups.com, Jens Thee? <j.theess@t...> wrote:
> Hi,
> 
> I'm developing a tool that parses a textual form of UML sequence 
> diagrams with some embedded java. The embedded java includes compound 
> statements and conditional expressions. Before integrating the java 
> parser (java15.g) into the sequence diagram parser, I tested the java 
> parser stand-alone on some input it will encounter in the sequence 
> diagram. The setup is as follows:
> 
>          JavaLexer lexer = new JavaLexer(r);
>          lexer.setFilename(f);
>          JavaRecognizer parser = new JavaRecognizer(lexer);
>          parser.setFilename(f);
>          parser.conditionalExpression();     // or 
> parser.compoundStatement().
> 
> The call to parser.compoundStatement() does fine with following input:
> 
> {
>     testfiles.A a = new testfiles.A();
>     sdVariables.put("testfiles.A", "a", a);
> }
> 
> However, a call to parser.conditionalExpression() fails on following
input:
> 
> 1 == 2
> 
> or
> 
> d.startsWith("ha")
> 
> What am I missing? Isn't the input a valid conditional expression?
> 
> Thanks,
> Jens

Yea, I've always had this problem too. The problem (I think)
is that whenever you try calling any parser method other
than the top-level one (compilationUnit), you run the risk of
the parser trying to check "lookahead" tokens that don't exist.

What I do to get around it is to have a function that first
appends ";;" before parsing an expression. The semicolons
stop the lookahead from failing, and they're not part of the
generated AST.

That might be a nice enhancement to ANTLR - make sure
that any parser method can be called (not sure if that's
possible though)

Andy





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From anakreonmejdi at yahoo.gr  Tue Nov 23 08:51:43 2004
From: anakreonmejdi at yahoo.gr (Anakreon)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <cnvo5i+pfmt@eGroups.com>
References: <cnvo5i+pfmt@eGroups.com>
Message-ID: <41A36A9F.2030005@yahoo.gr>


atripp54321 wrote:
> 
> Anakreon,
> OK, thanks. Now I see.
> So you have, for example, this rule in XML:
>   <!-- Check w3 for header name -->
>   <property name="CacheControl" type="DSTRING">
>     <arg type="DSTRING" />
>     <read>
>       <ast name="METHOD_CALL" text="session_cache_limiter" />
>     </read>
>     <write>
>       <ast name="METHOD_CALL" text="session_cache_limiter">
>           <ast name="ARGLIST_VALUES">
>               <arg index="1" />
>           </ast>
>       </ast>
>     </write>
>   </property>
> 
> ...which says to replace this:
> Response.CacheControl = "X"
> ...with this:
> session_cache_limiter("X");
yes
> 
> 
> I'm still not seeing how you do the more complicated stuff like
> accessing information that's in different parts of the AST.
More information on how xml is used as template for translation
can be found at http://www.antlr.org/workshop/ANTLR2004/proceedings/XMLAsASTTemplates.pdf
> Do you have a symbol table? And can you get a list of all
There is a symbol table populated by the parser.
> the references to a particular variable? In other words,
I do not need this information, if I understand correctly your question
For example, if I find this code in Jscript:
var b = a.length
All I need to know is what is variable "a"
>>From the symbol table, I can find out what kind of object is referenced
by a, and handle the case.    
But I do not need to know what variable "a" was referencing before.
For example:
a = 30; //is an instance of class Number
a = "Hello" //is an instance of class String
var b = a.length //length is a property of String, it used to be a Number
but at this point the TreeParser does not have that information and does
not care.

> the XML files in the object directory specify the simpler
> types of transformations, but where is the code for
> the more complicated cases?
All the code is at the *_php.act files.
Additionally a family of classes hold information about classes
and objects. They are illustrated at the doc I sent to antlr workshop.

I'll use an example:
a = "Hello"
The AST for this is:
(EXR ASSIGN a "Hello)
In the rule for ASSIGN, a check is done if the left operand is an IDENTIFIER
(it is in this case).
If is an IDENTIFIER, the right operand is checked.
At this particular case, the right operand is an instance of class String 
(described at the objects/string.xml file).
The symbol table (a Map in my case) is updated with key equal to "a" and 
value an instance of ASPObjectInstance.
var b = a.lenght
AST: (EXPR ASSIGN b (DOT a length))
First the subtree (DOT a length) is examined.
>>From the symbol table, I retrieve the ASPObjectInstance bounded to this variable.
The ASPObjectInstance contains this info:
class: String
instance: a
member: null
I get the class String, and query for a member called length.
The result is a Property instance.
The ASPObjectInstance is updated to contain the info:
class: String
instance: a
member: length (instance of Property)
The subtree is transformed into a node of type ObjectAST

Now the tree is:
 
(EXPR ASSIGN b ObjectAST) 
The rule for assign is called.
The ASPObjectInstance is taken from the ObjectAST node, and
the return type of the Property is checked.
This is done because if the return type is not a primitive, the symbol table should be
updated.
A property has two methods, a read and a write as it should be obvious from
the  XML snipset you posted.
In this case we are reading from the property.
>>From the ASPObjectInstance the member is retrieved and the method:
AST read(AST instance) is called where the value of the parameter in this
case is the node [IDENTIFIER, "a"].

>>From the description of the class provided in the XML file, and the argument
given to the method the AST ([METHOD_CALL, "strlen] ([ARGLIST_VALUES] a)) is 
created.

The final AST produced from (EXPR ASSIGN b (DOT a length))
is (EXPR (ASSIGN b (strlen (ARGLIST_VALUES a)))

I could describe a more complicated code sample but this
the idea behind the translation.

Anakreon


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Nov 23 09:28:29 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Re: java15.g: Can't parse only conditionalExpression
In-Reply-To: <cnvps6+l207@eGroups.com>
References: <cnvps6+l207@eGroups.com>
Message-ID: <1738E240-3D75-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 23, 2004, at 8:52 AM, atripp54321 wrote:
>> However, a call to parser.conditionalExpression() fails on following
> input:
>>
>> 1 == 2
>>
>> or
>>
>> d.startsWith("ha")
>>
>> What am I missing? Isn't the input a valid conditional expression?
>>
>> Thanks,
>> Jens
>
> Yea, I've always had this problem too. The problem (I think)
> is that whenever you try calling any parser method other
> than the top-level one (compilationUnit), you run the risk of
> the parser trying to check "lookahead" tokens that don't exist.
>
> What I do to get around it is to have a function that first
> appends ";;" before parsing an expression. The semicolons
> stop the lookahead from failing, and they're not part of the
> generated AST.
>
> That might be a nice enhancement to ANTLR - make sure
> that any parser method can be called (not sure if that's
> possible though)

ANTLR only thinks top-level rules (unreferenced by other rules) can be 
followed by "end of input" so it's a matter of doing a trick as Andy 
suggests or just adding a rule like:

conditionalExpressionTopLevel : conditionalExpression ;

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Nov 23 09:30:43 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Differing behavior between ParseTreeDebugParse and Parser
In-Reply-To: <200411231523.iANFNna13746@westhost38.westhost.net>
References: <200411231523.iANFNna13746@westhost38.westhost.net>
Message-ID: <675A74F7-3D75-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 23, 2004, at 7:23 AM, Kevin Lindsey wrote:

> Hello,
> ?
> I decided to follow the suggestion of one of the ANTLR articles which 
> describes how to generate the derivation of a parse for debugging 
> purposes. This was working great and then I started getting stack 
> underflows from ParseTreeDebugParser. I reverted my grammar, but for 
> the life of me the problem persists. I decided to switch back to the 
> default "extends Parser" and the exact same parse completes 
> successfully. I have defaultErrorHandler set to false, so I believe I 
> should see any errors encountered during the parse. Is this an 
> indication that something is wrong with my grammar or with 
> ParseTreeDebugParser. BTW, I'm using the C# generation.

Hi Kevin,

Very strange.  And you reran antlr on the grammar of course before 
recompiling and running?  I sometimes forget ;)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Nov 23 09:29:42 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] "back to the future" (merged lexer / parser spec)
In-Reply-To: <41A32B3B.5010508@tu-bs.de>
References: <F0777C46-3A54-11D9-A398-000A95891192@cs.usfca.edu> <41A32B3B.5010508@tu-bs.de>
Message-ID: <42DE84D4-3D75-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 23, 2004, at 4:21 AM, Jens Thee? wrote:

>
>
> Terence Parr wrote:
>
>> With this merged spec, ultimately I would like to do context-sensitive
>> (goal-oriented) lexing so we could handle things like the C++ nested
>> template lexing issue.  With input "List<List<int>>" you don't know in
>> the lexer w/o context if the final ">>" is two '>' or one '>>' 
>> (shift).
>>
> I don't know if it's come up before, but "list<list<int>>" actually
> isn't legal in c++. Haven't got the ANSI spec here but at least g++
> 3.3.3 complains with an "error: `>>' should be `> >' in template class
> name". You have to write "list<list<int> >" instead, which should be
> lexable without context. Don't know how it's with the java generics 
> though.

I'm pretty sure java allows >> and makes the lexer track context to get 
the correct answer.

> Anyway, context-sensitive lexing is a feature I'd like to see. When I

Me too!

> find the time (next year or decade), I intend to write a parser for
> Wiki-text using antlr, and I think that this new lexing could come in
> handy there.

Have you seen my TML?  It's wiki-inspired (though I like it better 
<wink>).

http://www.antlr.org/TML/index.tml

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Nov 23 09:31:56 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Name Collision
In-Reply-To: <200411231522.iANFMpa13123@westhost38.westhost.net>
References: <200411231522.iANFMpa13123@westhost38.westhost.net>
Message-ID: <92B30543-3D75-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 23, 2004, at 7:22 AM, Kevin Lindsey wrote:
> Hello,
> ?
> I'm just starting out with ANTLR and I've run across a name collision 
> with my generated C# code. When I look at the generate parser code, I 
> see approximately the following:
> ?
> public? class MyParser : antlr.LLkParser
> {
> ??? ...
> ??? public const int RBRACKET = 37;
> ??? ...
> ?
> ??? public void someRule()
> ??? {
> ??????? ...
> ??????? Token? RBRACKET = null;
> ??????? ...
> ?
> ??????? switch ( LA(1) )
> ??????? {
> ??????????? ...
> ??????????? match(RBRACKET);
> ??????????? ...
> ??????? }
> }
> ?
> The RBRACKET in the match call should use the const RBRACKET, but the 
> local RBRACKET is hiding that name. I can easily get around this 
> problem?by prefixing "MyParser." to the match parameter, but I have to 
> make this change everytime I change the grammar, which is a lot right 
> now :-). Is there any way to remedy this in the code generation?

Hmm...that seems like a bug to me; not sure how anything could compile. 
  What was the input?  If you did

RBRACKET:RBRACKET

or something, you'd see this.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Bruno.Delzant at proximus.net  Tue Nov 23 08:40:57 2004
From: Bruno.Delzant at proximus.net (DELZANT Bruno (BMB))
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Space in values
Message-ID: <1E1E0B9826A3FA4CB384D1E79DF7480A04BE13@ECLU574.nt.mobile.belgacom.be>

Hi,
 
I have a small problem. I would like to parse the following text file:
 
 message BMB.JAN.PROVISIONING.REQUEST = {
  string PRIORITY = "3"
  string REQ_USER_ID = "PTS_JDA"
  string REQ_PROC_ID = "process"
  string REQUEST_DATE = "20020101"
  string PRIMARY_SUBS_ID = "004741112770000"
  string SECONDARY_SUBS_ID = "058739 21"
  message TASK = {
    string TASK_TYPE = "Add_Subscr iber"
    string IMSI = "206011000000530"
    string GSM_NUMBER = "004741112770000"
    string KI_NUMBER="BB9803224E50F02E0053BD681E0F8E88"
    string SUPP_SERV = "ADTBELADTIN4ADTSO0"
    string CUSTOMER_ACCOUNT="00003639"
  }
}

As you can see in bolded values, I have introduced spaces, and my
current grammar failed on this !
 
Here is the grammar:
 
header {
package be.belgacom.mobile.pft.generated;
}
 
class PftParser extends Parser;
{ String prefix = null; 
}
 
message
{ prefix = "- "; }
  :  "message" {System.out.println("New message");}
    ALPHA_NUM_STRING EQUAL BRACE_OPEN entries BRACE_CLOSE
  ;
  
entries
  :  (entry | task) +
  ;
 
entry
  :  "string" a:ALPHA_NUM_STRING EQUAL QUOTE b:ALPHA_NUM_STRING QUOTE 
    { System.out.println(prefix + a.getText() + " - " + b.getText()); }
  ;
 
task
  :  "message" {System.out.println("Task start detected !"); prefix =
"|-- ";}
    "TASK" EQUAL BRACE_OPEN (entry)+ BRACE_CLOSE
    { System.out.println("Task end detected !"); prefix = "- ";}
  ;
 
class PftLexer extends Lexer;
 
ALPHA_NUM_STRING
  :  ( 'a'..'z' | 'A'..'Z' | '0'..'9' | '_' | '.' )+
  ;
 
QUOTE
  :  '\"'
  ;
 
EQUAL
  :  '='
  ;  
  
BRACE_OPEN
  :  '{'
  ;  
 
BRACE_CLOSE
  :  '}'
  ;  
  
WS  :   (   ' ' 
        |   '\t'
        |   '\r' '\n' { newline(); }
        |   '\n'      { newline(); }
        )
        {$setType(Token.SKIP);}
        ;

With this grammar file, I get an error on spaces in bolded value. the
parser is expecting a double quote and not a space.
But I do not see how to solve this (I am new with antlr).
 
If someone has 2 minutes to spend helping me, I will be grateful !
 
Thanks,
Bruno
 


**** DISCLAIMER ****

"This e-mail and any attachment thereto may contain information which is confidential and/or protected by intellectual property rights and are intended for the sole use of the recipient(s) named above. This email is not intended to create or affect any contractual arrangements between the parties.
Any use of the information contained herein (including, but not limited to, total or partial reproduction, communication or distribution in any form) by other persons than the designated recipient(s) is prohibited. 
If you have received this e-mail in error, please notify the sender either by telephone or by e-mail and delete the material from any computer".

Thank you for your cooperation.

For further information about Proximus mobile phone services please see our website at http://www.proximus.be or refer to any Proximus agent.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041123/d423aa5e/attachment.html
From parrt at cs.usfca.edu  Tue Nov 23 09:53:11 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Space in values
In-Reply-To: <1E1E0B9826A3FA4CB384D1E79DF7480A04BE13@ECLU574.nt.mobile.belgacom.be>
References: <1E1E0B9826A3FA4CB384D1E79DF7480A04BE13@ECLU574.nt.mobile.belgacom.be>
Message-ID: <8AADB6DA-3D78-11D9-A398-000A95891192@cs.usfca.edu>


Hi.  The answer is to put STRING as a token in the lexer :)  See the 
java grammar or a perhaps a simpler grammar.

Ter
On Nov 23, 2004, at 8:40 AM, DELZANT Bruno (BMB) wrote:
> With this grammar file, I get an error on spaces in bolded value. the 
> parser is expecting a double quote and not a space.
> But I do not see how to solve this (I am?new with antlr).
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From kevin at kevlindev.com  Tue Nov 23 09:46:57 2004
From: kevin at kevlindev.com (Kevin Lindsey)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Name Collision
In-Reply-To: <92B30543-3D75-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <200411231747.iANHl5L10829@westhost38.westhost.net>

Hi Terence,
?
>> The RBRACKET in the match call should use the const RBRACKET, but the 
>> local RBRACKET is hiding that name. I can easily get around this 
>> problem?by prefixing "MyParser." to the match parameter, but I have to 
>> make this change everytime I change the grammar, which is a lot right 
>> now :-). Is there any way to remedy this in the code generation?

> Hmm...that seems like a bug to me; not sure how anything could compile. 
>  What was the input?

I'm not sure if we can have attachments on this group, so I'm attaching and
inlining a .g file that recreates the problem. Note that even though some of
the content may not be relevant, it reflects what I'm using in my full
grammar. I just want to make sure you have all you need to recreate the
problem. You'll see the situation I described in the typeSpec() method.

Thanks,
Kevin

//
//  Global options
//
options
{
    language = "CSharp";
    namespace = "Temp.Msil";
}

//
//  Parser
//
class MyParser extends Parser;
options
{
    k = 2;
    buildAST = true;
    defaultErrorHandler = false;
}
typeSpec
    : className
    : LBRACKET Name1 RBRACKET
    : LBRACKET MODULE Name1 RBRACKET
    | type
    ;

className
    : LBRACKET Name1 RBRACKET slashedName
    | LBRACKET MODULE Name1 RBRACKET slashedName
    | slashedName
    ;

slashedName
    : Name1 (SLASH Name1)*
    ;

type
    : "class" className
    | "object"
    | "string"
    | "value" "class" className
    | "valuetype" className
    | "typedref"
    | "char"
    | "void"
    | "bool"
    ;

//
//  Lexer
//
class MyLexer extends Lexer;
options
{
    k = 3;
}
LBRACKET: '[';
MODULE:   ".module" ;
Name1:    (ALPHA)+ ('.' (ALPHA)+)?;
RBRACKET: ']';
SLASH:    '/';

protected
ALPHA: ('_' | 'a'..'z' | 'A'..'Z' );


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: temp.g
Type: application/octet-stream
Size: 901 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041123/641139c3/temp.obj
From j.theess at tu-bs.de  Tue Nov 23 09:54:42 2004
From: j.theess at tu-bs.de (=?ISO-8859-1?Q?Jens_Thee=DF?=)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Re: java15.g: Can't parse only conditionalExpression
In-Reply-To: <1738E240-3D75-11D9-A398-000A95891192@cs.usfca.edu>
References: <cnvps6+l207@eGroups.com> <1738E240-3D75-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <41A37962.6090706@tu-bs.de>


Terence Parr wrote:

>ANTLR only thinks top-level rules (unreferenced by other rules) can be 
>followed by "end of input" so it's a matter of doing a trick as Andy 
>suggests or just adding a rule like:
>
>conditionalExpressionTopLevel : conditionalExpression ;
>
Works great! Thanks.

Next thing is how to best switch lexers. Fortunately, I have control 
over the syntax of the language (I'm extending the sequence diagram 
syntax to allow for embedded java actions). Following example is what I 
would like to do:

a -> b.foo(5, String d:d.startsWith("ha"), 10);

This is a sequence diagram event meaning that obj. a calls b.foo with 
the parameters 5, a String that starts with "ha", and 10. To support 
this, I think I would have to switch lexers from the parser, which is a 
no-no. So I could modify the syntax to look like this:

a -> b.foo(5, String d:j{d.startsWith("ha")}, 10);

or something similar, where I would switch to Java lexer upon seeing 
"j{" and switch back upon "}". Or is there any easy way to support the 
first version?

Jens



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From jbb at acm.org  Tue Nov 23 10:23:57 2004
From: jbb at acm.org (John B. Brodie)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Name Collision
In-Reply-To: <200411231747.iANHl5L10829@westhost38.westhost.net> (message from
	Kevin Lindsey on Tue, 23 Nov 2004 11:46:57 -0600)
References: <200411231747.iANHl5L10829@westhost38.westhost.net>
Message-ID: <E1CWfKX-0003ii-00@gecko>


Greetings!

I am surprised your grammar processes through Antlr without complaint!

>typeSpec
>    : className
>    : LBRACKET Name1 RBRACKET
>    : LBRACKET MODULE Name1 RBRACKET
>    | type
>    ;

I do not know what having multiple ':'s in a rule means, but Antlr
does not seem to complain. Did you really mean:

typeSpec
    : className
    | LBRACKET Name1 RBRACKET
    | LBRACKET MODULE Name1 RBRACKET
    | type
    ;

I think this is not a Name Collision issue, but rather a bug in
Antlr's overpermissive acceptance of rules having multiple ':'s.

Hope this helps....
	-jbb


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From kevin at kevlindev.com  Tue Nov 23 10:09:36 2004
From: kevin at kevlindev.com (Kevin Lindsey)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Differing behavior between ParseTreeDebugParse and Parser
In-Reply-To: <675A74F7-3D75-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <200411231809.iANI9il26080@westhost38.westhost.net>

Hello again,
 
>> I decided to follow the suggestion of one of the ANTLR articles which 
>> describes how to generate the derivation of a parse for debugging 
>> purposes. This was working great and then I started getting stack 
>> underflows from ParseTreeDebugParser. I reverted my grammar, but for 
>> the life of me the problem persists. I decided to switch back to the 
>> default "extends Parser" and the exact same parse completes 
>> successfully. I have defaultErrorHandler set to false, so I believe I 
>> should see any errors encountered during the parse. Is this an 
>> indication that something is wrong with my grammar or with 
>> ParseTreeDebugParser. BTW, I'm using the C# generation.

> Very strange.  And you reran antlr on the grammar of course before
> recompiling and running?  I sometimes forget ;)

Me too, so I've added it as pre-build action so I don't have to remember
anymore :-). Yeah, I just switched back to ParseTreeDebugParser with my
working grammar, and it underflows. The exception dump follows (and is
attached).

Thanks for you help,
Kevin


System.InvalidOperationException: Stack empty.
   at System.Collections.Stack.Peek()
   at antlr.debug.ParseTreeDebugParser.addCurrentTokenToParseTree() in
D:\Xamlon\3rdparty\antlr-runtime\src\antlr.debug\ParseTreeDebugParser.cs:lin
e 116
   at antlr.debug.ParseTreeDebugParser.match(Int32 i) in
D:\Xamlon\3rdparty\antlr-runtime\src\antlr.debug\ParseTreeDebugParser.cs:lin
e 81
   at Xamlon.Flash.Msil.MsilParser.assemblyRefHead() in
d:\xamlon\xamlon\products\engine\flash\msilparser\msilparser.cs:line 483
   at Xamlon.Flash.Msil.MsilParser.decl() in
d:\xamlon\xamlon\products\engine\flash\msilparser\msilparser.cs:line 404
   at Xamlon.Flash.Msil.MsilParser.decls() in
d:\xamlon\xamlon\products\engine\flash\msilparser\msilparser.cs:line 301
   at Xamlon.Flash.Msil.MsilParser.msil() in
d:\xamlon\xamlon\products\engine\flash\msilparser\msilparser.cs:line 275
   at MsilParser_GUI.Form1.Parse(String source) in
d:\xamlon\xamlon\tools\msilparser_gui\form1.cs:line 189


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
System.InvalidOperationException: Stack empty.
   at System.Collections.Stack.Peek()
   at antlr.debug.ParseTreeDebugParser.addCurrentTokenToParseTree() in D:\Xamlon\3rdparty\antlr-runtime\src\antlr.debug\ParseTreeDebugParser.cs:line 116
   at antlr.debug.ParseTreeDebugParser.match(Int32 i) in D:\Xamlon\3rdparty\antlr-runtime\src\antlr.debug\ParseTreeDebugParser.cs:line 81
   at Xamlon.Flash.Msil.MsilParser.assemblyRefHead() in d:\xamlon\xamlon\products\engine\flash\msilparser\msilparser.cs:line 483
   at Xamlon.Flash.Msil.MsilParser.decl() in d:\xamlon\xamlon\products\engine\flash\msilparser\msilparser.cs:line 404
   at Xamlon.Flash.Msil.MsilParser.decls() in d:\xamlon\xamlon\products\engine\flash\msilparser\msilparser.cs:line 301
   at Xamlon.Flash.Msil.MsilParser.msil() in d:\xamlon\xamlon\products\engine\flash\msilparser\msilparser.cs:line 275
   at MsilParser_GUI.Form1.Parse(String source) in d:\xamlon\xamlon\tools\msilparser_gui\form1.cs:line 189

From parrt at cs.usfca.edu  Tue Nov 23 10:38:35 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Name Collision
In-Reply-To: <200411231747.iANHl5L10829@westhost38.westhost.net>
References: <200411231747.iANHl5L10829@westhost38.westhost.net>
Message-ID: <E1FEDD7D-3D7E-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 23, 2004, at 9:46 AM, Kevin Lindsey wrote:
> typeSpec
>     : className
>     : LBRACKET Name1 RBRACKET
>     : LBRACKET MODULE Name1 RBRACKET
>     | type
>     ;

Make the second two colons pipes and you're done. :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-oNSuszLpM048PIuhWzfX8Ug at yahoogroups.com  Tue Nov 23 10:23:28 2004
From: antlr-interest-accept-oNSuszLpM048PIuhWzfX8Ug at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:38 2004
Subject: MODERATE -- Sunil@SShome.net posted to antlr-interest
Message-ID: <1101234208.320.42887.m23@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  Sunil@SShome.net 

The message summary:
--------------------
FROM: Sunil@SShome.net 
DATE: Tue, 23 Nov 2004 18:23:24 -0000 
SUBJECT: Catch all grammer if specific grammer productions not specified 

Hi All, 

I am trying th write grammer for a 4GL language. There are 
many constructs/statements in the language and in the first 
pass I m not sure I will have time to get to all the 
statement definitions in grammer file. 

So what I would like to do is - if a valid grammer 
definition is found for a statement then I would like the 
AST to be built using the grammer rules else - I would like 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=382 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-oNSuszLpM048PIuhWzfX8Ug@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "sbelgaonkar" <Sunil@SShome.net>
Subject: Catch all grammer if specific grammer productions not specified
Date: Tue, 23 Nov 2004 18:23:24 -0000
Size: 1779
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041123/cf43288f/attachment.mht
From johnm-antlr at non.net  Tue Nov 23 10:27:47 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] ITLS (was: Translators Should Use Tree Grammars)
In-Reply-To: <C7FE35004D40FD45AA342991B88CE40409B08D@lnml1.eca-international.local>
References: <C7FE35004D40FD45AA342991B88CE40409B08D@lnml1.eca-international.local>
Message-ID: <16803.33059.751167.759447@despot.non.net>


'netiquette nanny says: 

	* Top posting is evil, please use humane quoting.

	* Legal disclaimers are non-sensical, especially in public mailing
          lists like this one.

>>>>> "Anthony" == Anthony Youngman <Anthony.Youngman@ECA-International.com> writes:
[...]

> And to add my tuppence-worth, speaking as an *engineer* (actually,
> scientist by training), the computer mathematicians are making exactly
> the same mistake as the hardware people, namely a belief in abstraction
> ...

Indeed.  What I was describing is a dichotomy.  Neither side is, a priori,
correct/right/true.


> Okay, I'm more into database theory, but you're talking about logic,
> symbolism and abstraction - all branches of PURE mathematics. Where is
> the *scientific* evidence that all this maths is *relevant* to problem in
> hand (stuff like experiment, statistics, etc etc).

IMHO, both sides are better looked at as being tools in our kit to solving
the problem at hand.

[...]

> Sorry if I'm drifting way off topic, but I really get wound up when
> people seek to justify their world view through mathematics. There's a
> very big gulf between *correct* maths and *relevant* maths, and too many
> people seem to think that just because it's the former, it has to be the
> latter too. (Look at modern physics - we have many "correct" theories,
> we're just trying to work out which ones are "relevant".)

Indeed, that tiny issue of dealing with reality is something that the
software world has spent way too much time in denial about.

Thanks,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From kevin at kevlindev.com  Tue Nov 23 10:48:17 2004
From: kevin at kevlindev.com (Kevin Lindsey)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Name Collision
In-Reply-To: <E1CWfKX-0003ii-00@gecko>
Message-ID: <200411231848.iANImPQ18863@westhost38.westhost.net>


John, 

> I am surprised your grammar processes through Antlr without
> complaint!

>>typeSpec
>>    : className
>>    : LBRACKET Name1 RBRACKET
>>    : LBRACKET MODULE Name1 RBRACKET
>>    | type
>>    ;

Yikes! You're right...and that explains why I wasn't getting a
nondeterminism with the className to 2'nd and 3'rd alternates, which was
confusing me.

> I think this is not a Name Collision issue, but rather a bug in
> Antlr's overpermissive acceptance of rules having multiple ':'s.
>
> Hope this helps....

Yes, it does...thanks John!

-Kevin



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Sunil at SShome.net  Tue Nov 23 10:23:24 2004
From: Sunil at SShome.net (sbelgaonkar)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Catch all grammer if specific grammer productions not specified
Message-ID: <cnvv6s+71i2@eGroups.com>




Hi All,

I am trying th write grammer for a 4GL language. There are many 
constructs/statements in the language and in the first pass I m not 
sure I will have time to get to all the statement definitions in 
grammer file.

So what I would like to do is - if a valid grammer definition is 
found for a statement then I would like the AST to be built using 
the grammer rules else -  I would like to lump all the unparseable 
(no grammer) code into a sigle node (like comments). Is there a way 
to do this usign ANTLR?

Any help would be greatly appreciated.

Regards,

Sunil.








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Nov 23 11:02:26 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:38 2004
Subject: [antlr-interest] Re: java15.g: Can't parse only conditionalExpression
In-Reply-To: <41A37962.6090706@tu-bs.de>
References: <cnvps6+l207@eGroups.com> <1738E240-3D75-11D9-A398-000A95891192@cs.usfca.edu> <41A37962.6090706@tu-bs.de>
Message-ID: <37394CFA-3D82-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 23, 2004, at 9:54 AM, Jens Thee? wrote:
> Next thing is how to best switch lexers. Fortunately, I have control
> over the syntax of the language (I'm extending the sequence diagram
> syntax to allow for embedded java actions). Following example is what I
> would like to do:
>
> a -> b.foo(5, String d:d.startsWith("ha"), 10);
>
> This is a sequence diagram event meaning that obj. a calls b.foo with
> the parameters 5, a String that starts with "ha", and 10. To support
> this, I think I would have to switch lexers from the parser, which is a
> no-no. So I could modify the syntax to look like this:
>
> a -> b.foo(5, String d:j{d.startsWith("ha")}, 10);
>
> or something similar, where I would switch to Java lexer upon seeing
> "j{" and switch back upon "}". Or is there any easy way to support the
> first version?

Not sure why you need it.  Why doesn't the following work:

a -> b.foo(5, d.startsWith("ha"), 10);

?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Nov 23 11:05:19 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Differing behavior between ParseTreeDebugParse and Parser
In-Reply-To: <200411231809.iANI9il26080@westhost38.westhost.net>
References: <200411231809.iANI9il26080@westhost38.westhost.net>
Message-ID: <9E302D4E-3D82-11D9-A398-000A95891192@cs.usfca.edu>


Hi Kevin

Not sure what's wrong.  I can only suggest walking thru with a debugger 
(your grammar) and then see where in the parse it is when it gets the 
exception.

The triggers for the stack operations are pretty obvious.  I think I oh 
wait!  Do you have -traceParser on?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From kevin at kevlindev.com  Tue Nov 23 11:05:46 2004
From: kevin at kevlindev.com (Kevin Lindsey)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Name Collision
In-Reply-To: <E1FEDD7D-3D7E-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <200411231905.iANJ5sJ30108@westhost38.westhost.net>


 
Ter,

> From: Terence Parr, Tuesday, November 23, 2004 12:39 PM
>
>On Nov 23, 2004, at 9:46 AM, Kevin Lindsey wrote:
>> typeSpec
>>     : className
>>     : LBRACKET Name1 RBRACKET
>>     : LBRACKET MODULE Name1 RBRACKET
>>     | type
>>     ;
>
> Make the second two colons pipes and you're done. :)

I was hoping this was a newbie mistake, embarrassing as that may be :-)

Thanks,
Kevin



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Nov 23 11:33:35 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] photos and more audio
Message-ID: <9122DB32-3D86-11D9-A398-000A95891192@cs.usfca.edu>


Well better late than never...i have my photos and the StringTemplate 
lecture audio up at:

http://www.antlr.org/workshop/ANTLR2004/summary.tml

I'll try to add names and nasty comments to the photo page. ;)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From kevin at kevlindev.com  Tue Nov 23 11:27:26 2004
From: kevin at kevlindev.com (Kevin Lindsey)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Differing behavior between ParseTreeDebugParse and Parser
In-Reply-To: <9E302D4E-3D82-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <200411231927.iANJRZh12556@westhost38.westhost.net>


Ter,
 
> I think I oh wait!  Do you have -traceParser on?

Bingo! I lost that when I reverted my project file. That clears up a few
confusing things.

Thanks again for you help. Hopefully I'll get to the intermediate ANTLR
skill level soon.

-Kevin



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Nov 23 11:46:00 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Differing behavior between ParseTreeDebugParse and Parser
In-Reply-To: <200411231927.iANJRZh12556@westhost38.westhost.net>
References: <200411231927.iANJRZh12556@westhost38.westhost.net>
Message-ID: <4D887402-3D88-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 23, 2004, at 11:27 AM, Kevin Lindsey wrote:

>
> Ter,
>
>> I think I oh wait!  Do you have -traceParser on?
>
> Bingo! I lost that when I reverted my project file. That clears up a 
> few
> confusing things.
>
> Thanks again for you help. Hopefully I'll get to the intermediate ANTLR
> skill level soon.

No worries...newbie problems are often wackiness on ANTLR's part. :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From atripp at comcast.net  Tue Nov 23 12:48:01 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <41A36A9F.2030005@yahoo.gr>
Message-ID: <co07m1+4v55@eGroups.com>



Anakreon,

Thanks for the help. Thanks to your code, I think I
finally see why I'm seeing things differently....

You basically invoke code at the start and/or end of
each visit to each tree node. For example, you have this
in js_tree.g:

  | #(WHILE <pre_while> expr statement <post_while>)

...and this in js_tree_php.act:

@pre_while : { incLabels(); }
@post_while : { decLabels(); }

Most of these chunks of code are just a few lines, with
a few a bit larger (@assign is 50 lines, for example).
About 800 lines in total of automatically-fired-by-treewalker
code.

Why Am I seeing things diffently from (most) everyone else here?
Wthen I look at my rules, and ask "how would he do that?"
and the answer is almost always "he wouldn't". My translator
is not just translating the core language, but the core libraries
too. And the translations are not just simple syntactics,
they're high-level rewrites.

Just to pick one example, many C functions return error codes.
For example, fopen() returns a 0 if it can't open a file.
That needs to be replaced with exception handling in Java.
So I have a list of the functions and the values they return
on error. I check for calls to the functions, and look for
various patterns of error checking, such as:
-----------------------------
if (fopen(xxx) == 0) { // return value checked
// error code
}
else {
// non-error code
}
-----------------------------
v = fopen(xxx); // return value stored and checked later
...
if (v != 0) {
// non-error code
}
-----------------------------

And once I've found one of these patterns, I store the
"error code" and "non-error code" (both of which may be more
than just an AST, they are a sequence of statements),
and produce the corresponding try/catch block in Java.
And, if there are several statements that may throw
the same exception, we don't want this:
try {
  open();
} catch(IOException e) {
  // error code
}
try {
  read();
} catch(IOException e) {
  // error code again!
}

So, I've got to do some real work to figure out where to
put the try/catch stuff.

Correct me if I'm wrong, but I don't think your translator
is doing anything nearly that complex. I have many simple
syntactic rules as you do, but I also have many complex 
rules like this one.

So, now that I think about it,
maybe even this one rule involves several things that you probably
wouldn't see in your typical language-to-language translator:

* handling of library functions, not just core language
* replacing whole mechanisms/paradigms (error codes from 
  library functions being replaced by exception handling)
* complex pattern matching (e.g. checking for various comparisons
  the return value like ==, !=, <, etc. and even checking for
  storage in a variable and then usage of that variable)

In case you think that this rule is just an exceptionally
complex one, here are a few other examples:

* structs, unions, and enums become whole Java classes, including
  constructors and changes at each reference
* memory management is done "by hand" in C must be changed to
  use Java objects.
* I handle multiple input files, and change C file names
  to Java ones (including combining "hello.c" and "hello.h" into
  "Hello.java"
* There are different rules in Java and C for where an array
  can be initialized.
* The syntax and semantics for array declaration are different
  (In C, it's "struct person a[3];", in Java it's 
   "Person a[] = new Person[3];" plus a loop to initialize it)

Those are just some of my rules that start with "A"
(AddClassRule, AddConstructorRule, ApplicationFileRenameRule,
ArrayInitializerRule, ArrayDeclarationRule).

Now I'm really starting to wonder about how much all the
language-to-language translators out there are really doing.
I know for a fact that the C-to-Java ones (other than Jazillian)
are only doing trivial syntactic changes
(see http://jazillian.com/competition.html for details).

What's the most complex translator that that people
have seen? (Complex meaning functionality, not internals).

Andy





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From anakreonmejdi at yahoo.gr  Tue Nov 23 13:50:52 2004
From: anakreonmejdi at yahoo.gr (Anakreon)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <co07m1+4v55@eGroups.com>
References: <co07m1+4v55@eGroups.com>
Message-ID: <41A3B0BC.9000305@yahoo.gr>


atripp54321 wrote:
> 
> Anakreon,
> 
> Thanks for the help. Thanks to your code, I think I
> finally see why I'm seeing things differently....
> 
> You basically invoke code at the start and/or end of
> each visit to each tree node. For example, you have this
> in js_tree.g:
> 
>   | #(WHILE <pre_while> expr statement <post_while>)
> 
> ...and this in js_tree_php.act:
> 
> @pre_while : { incLabels(); }
> @post_while : { decLabels(); }
This is used for the break statement with a label.
In PHP is replaced with "break aNumber"
> 
> Most of these chunks of code are just a few lines, with
> a few a bit larger (@assign is 50 lines, for example).
> About 800 lines in total of automatically-fired-by-treewalker
> code.
> 
> Why Am I seeing things diffently from (most) everyone else here?
> Wthen I look at my rules, and ask "how would he do that?"
> and the answer is almost always "he wouldn't". My translator
> is not just translating the core language, but the core libraries
> too. And the translations are not just simple syntactics,
> they're high-level rewrites.
ASPA translates core libraries too. The built-in functions and classes
of Jscript and VBScript and ActiveX components are supported.
This should be obvious from the prior post containing the steps
to translate someString.length into strlen($someString).
The example I chose was deliberately simple.
> 
> Just to pick one example, many C functions return error codes.
> For example, fopen() returns a 0 if it can't open a file.
> That needs to be replaced with exception handling in Java.
> So I have a list of the functions and the values they return
> on error. I check for calls to the functions, and look for
> various patterns of error checking, such as:
> -----------------------------
> if (fopen(xxx) == 0) { // return value checked
> // error code
> }
> else {
> // non-error code
> }
> -----------------------------
> v = fopen(xxx); // return value stored and checked later
> ...
> if (v != 0) {
> // non-error code
> }
> -----------------------------
This is in my TODO list for ASPA.
I had limited time for the development (was an assignment
from the university) and didn't consider this issue
as top priority.
I have some ideas of how to implement this, but will check
the way you handled this problem for inspiration.
> 
> And once I've found one of these patterns, I store the
> "error code" and "non-error code" (both of which may be more
> than just an AST, they are a sequence of statements),
> and produce the corresponding try/catch block in Java.
> And, if there are several statements that may throw
> the same exception, we don't want this:
> try {
>   open();
> } catch(IOException e) {
>   // error code
> }
> try {
>   read();
> } catch(IOException e) {
>   // error code again!
> }
> 
> So, I've got to do some real work to figure out where to
> put the try/catch stuff.
> 
> Correct me if I'm wrong, but I don't think your translator
> is doing anything nearly that complex. I have many simple
I can't tell if it does something this complex. One complex
translation is the example I sent about class definition in
JScript. The problem of error handling is not implemented
but I don't think that is not achievable with TreeParser.
I just did not have enough time to implement it. 
> syntactic rules as you do, but I also have many complex 
> rules like this one.
> 
> So, now that I think about it,
> maybe even this one rule involves several things that you probably
> wouldn't see in your typical language-to-language translator:
> 
> * handling of library functions, not just core language
This is done in ASPA.
> * replacing whole mechanisms/paradigms (error codes from 
>   library functions being replaced by exception handling)
No
> * complex pattern matching (e.g. checking for various comparisons
>   the return value like ==, !=, <, etc. and even checking for
>   storage in a variable and then usage of that variable)
I don't understand the point about the operators.
Operators which are handled differently then others in ASPA
are:
JScript: The '+' operator. If the operands are numbers the translation
is '+', otherwise the operator is considered to perform string concatenation.
VB: The logical operators (and, or, not ...) if have int operands are thought
to perform bitwise operations, and are handled properly.
> 
> In case you think that this rule is just an exceptionally
> complex one, here are a few other examples:
> 
> * structs, unions, and enums become whole Java classes, including
>   constructors and changes at each reference
The same is true for jscript classes. The functions are placed inside
the class body, if the variables(members) are defined and assigned a value
in the PHP class only the declaration exists and the members are initialized
inside the constructor body, etc  
> * memory management is done "by hand" in C must be changed to
>   use Java objects.
This is a problem specific to your project. A complex problem
indeed.
> * I handle multiple input files, and change C file names
>   to Java ones (including combining "hello.c" and "hello.h" into
>   "Hello.java"
This is true for ASPA too. Other files are included in a file
with the #include directive.
Also, because ASP contains two languages, there exists a mechanism
to share information among different parsers and TreePasers, but this
is specific to my application. 
> * There are different rules in Java and C for where an array
>   can be initialized.
> * The syntax and semantics for array declaration are different
>   (In C, it's "struct person a[3];", in Java it's 
>    "Person a[] = new Person[3];" plus a loop to initialize it)
None of this problems are unachievable with a TreeParser in my opinion.
A similar issue about arrays exists in VB.
Example:
dim a(12, 3) 'multi dimension array
a(0, 1) = 0
a(0, 2) = 2
PHP:
$a = array(array()); //emulate multi dimension arrays with nested ones
$a[0][0] = 1;
$a[0][1] = 2;
I give this example to illustrate that the 2 problems you refer
are application specific, but a similar problem can be solved
with the TreeParser approach.
> Now I'm really starting to wonder about how much all the
> language-to-language translators out there are really doing.
> I know for a fact that the C-to-Java ones (other than Jazillian)
> are only doing trivial syntactic changes
> (see http://jazillian.com/competition.html for details).
It should feel good to know that you have built the best tool
available for a problem.

What this thread should make clear is that there are many
approaches to solve the same domain of problems. I consider
your work important because offerers an alternative methodology
for solving the translation problem. But personally I prefer
the TreeParser methodology. You point that there are 800 lines
of code fired by the treewalker. I don't know, because never counted
them. Anyway the aid the treewalker offered for me was that it would
fire the appropriate method and I didn't have to worry about it.
For example in the rule:
#(DOT (d1:expression | dt:type | dthis:THIS) d2:expression <dot>)
the code:
    if (#d1 != null) { //expression.expression
        #expression = resolveDot(#d1, #d2);
    } else if (#dt != null) { //Array.prototype
        #expression = resolveClassAttribute(#dt, #d2);
    } else { //this.something
        #expression = resolveObjectAttribute(#d2);
    }
is fired.
This is very important because from the grammar definition
I can be sure that only those 3 cases can occur. Additionally
it was simple to model the methods which should offer the functionality
required for each case. I did not have to worry about how the expressions
d1 and d2 should be translated because the treewalker had previously fired
the appropriate code sections to take care of that.
So the problem is partitioned effectively into smaller problems by the treewalker
for me. This is the greatest benefit from the TreeParser in my opinion.
It doesn't matter if there are 800 lines of code or less activated by the
treewalker. What matters is that the treewalker offers entry points for specific
sub-problems. 

Anyway, I think that the choice of methodology (treewalker or other)
is up to the developer. It can just be a matter of taste if all
the available methodologies can offer a solution to the problem.

What ASPA (and other TreeParser based translators) and jazillian
prove is that both methodologies are capable to offer a solution.
> 
> What's the most complex translator that that people
> have seen? (Complex meaning functionality, not internals).
I can't tell.

Anakreon


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From j.theess at tu-bs.de  Tue Nov 23 13:54:41 2004
From: j.theess at tu-bs.de (=?ISO-8859-1?Q?Jens_Thee=DF?=)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Re: java15.g: Can't parse only conditionalExpression
In-Reply-To: <37394CFA-3D82-11D9-A398-000A95891192@cs.usfca.edu>
References: <cnvps6+l207@eGroups.com> <1738E240-3D75-11D9-A398-000A95891192@cs.usfca.edu> <41A37962.6090706@tu-bs.de> <37394CFA-3D82-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <41A3B1A1.2090507@tu-bs.de>


Terence Parr wrote:

>On Nov 23, 2004, at 9:54 AM, Jens Thee? wrote:
>  
>
>>Next thing is how to best switch lexers. Fortunately, I have control
>>over the syntax of the language (I'm extending the sequence diagram
>>syntax to allow for embedded java actions). Following example is what I
>>would like to do:
>>
>>a -> b.foo(5, String d:d.startsWith("ha"), 10);
>>
>>This is a sequence diagram event meaning that obj. a calls b.foo with
>>the parameters 5, a String that starts with "ha", and 10. To support
>>this, I think I would have to switch lexers from the parser, which is a
>>no-no. So I could modify the syntax to look like this:
>>
>>a -> b.foo(5, String d:j{d.startsWith("ha")}, 10);
>>
>>or something similar, where I would switch to Java lexer upon seeing
>>"j{" and switch back upon "}". Or is there any easy way to support the
>>first version?
>>    
>>
>
>Not sure why you need it.  Why doesn't the following work:
>
>a -> b.foo(5, d.startsWith("ha"), 10);
>
>?
>
>Ter
>
To give you the big picture, I'm developing a tool to translate a 
sequence diagram into a junit test (as java source). All "x -> y" events 
in the sd are translated into java classes which can compare events from 
a tracer to the expected event. So a

"a -> b.foo(int i: 5)"

in the sd is translated into a class including a function compareArgs, 
which binds a new sd-variable i upon succesful match:

public boolean compareArgs(Object[] args)
{
    int i = args[0];
    if (i == 5)
    {
        sdVariables.put("i", i);
        return true;
    }
    else
        return false;
}


Now for the embedded java. I am to implement sd events of the form

"a -> b.foo(String d: d.startsWith(e));"

where e is a variable bound previously in the sd and d is bound upon 
successful match.This translates to

public boolean compareArgs(Object[] args)
{
    String d = (String) args[0];
    String e = (String) sdVariables.get("e");
    if (d.startsWith(e))
    {
        sdVariables.put("d", d);
        return true;
    }
    else
        return false;
}

So I need to parse the "d.startsWith(e)" part of the sd event with the 
JavaRecognizer, to find out variables used in the expression. The rest 
of  the sd event needs to be parsed by the SDParser.

Jens


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ron_bennatan at guardium.com  Tue Nov 23 15:44:55 2004
From: ron_bennatan at guardium.com (ron_bennatan)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] LA lookahead very long (garbage)
Message-ID: <co0i1n+sfmh@eGroups.com>



Hi,

We've been using ANTLR very successfully for over a year and love 
it. We generate C++ code from the grammars and have 4 parsers being 
used by 4 different threads.

Recently we've been experiencing a problem that we've not yet been 
able to solve. The system crashes randomly. We tried everything we 
can think of to no avail. The wierd thing is that it somehow always 
crashes in the parser (and only in one of them) although the code 
for using the 4 different parsers is the same. When it does crash it 
is because LA (called from nextToken()) has instead of 1 or 2 a 
value like 15 Million - obviously garbage due to some memory leak or 
misuse.

I know this is not specifically in the parser (or more specifically -
 we are not balmin the parser) but does anyone have any suggestions 
or previous such experiences (that were hopefully resolved)?

Thanks,
-Ron





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Tue Nov 23 15:54:29 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Re: LA lookahead very long (garbage)
In-Reply-To: <co0i1n+sfmh@eGroups.com>
Message-ID: <co0ijl+tlvv@eGroups.com>



Ron--

This sounds like the kind of problem that you use Purify or Insure++
for.  Your description sounds like a memory overwrite that just
happens to trip the parser rather than being due to an ANTLR bug.

--Loring


--- In antlr-interest@yahoogroups.com, "ron_bennatan"
<ron_bennatan@g...> wrote:
> 
> Hi,
> 
> We've been using ANTLR very successfully for over a year and love 
> it. We generate C++ code from the grammars and have 4 parsers being 
> used by 4 different threads.
> 
> Recently we've been experiencing a problem that we've not yet been 
> able to solve. The system crashes randomly. We tried everything we 
> can think of to no avail. The wierd thing is that it somehow always 
> crashes in the parser (and only in one of them) although the code 
> for using the 4 different parsers is the same. When it does crash it 
> is because LA (called from nextToken()) has instead of 1 or 2 a 
> value like 15 Million - obviously garbage due to some memory leak or 
> misuse.
> 
> I know this is not specifically in the parser (or more specifically -
>  we are not balmin the parser) but does anyone have any suggestions 
> or previous such experiences (that were hopefully resolved)?
> 
> Thanks,
> -Ron





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ric.klaren at gmail.com  Tue Nov 23 16:06:50 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] LA lookahead very long (garbage)
In-Reply-To: <co0i1n+sfmh@eGroups.com>
References: <co0i1n+sfmh@eGroups.com>
Message-ID: <bc607a4e04112316066d32b838@mail.gmail.com>


Hi,

On Tue, 23 Nov 2004 23:44:55 -0000, ron_bennatan
<ron_bennatan@guardium.com> wrote:
> We've been using ANTLR very successfully for over a year and love
> it. We generate C++ code from the grammars and have 4 parsers being
> used by 4 different threads.

The parsers are completely disjunct? E.g. no data is shared or when
it's shared it's correctly mutex'ed? Which platform? If windows antlr
DLL's used/VC version ?

> Recently we've been experiencing a problem that we've not yet been
> able to solve. The system crashes randomly. We tried everything we
> can think of to no avail. The wierd thing is that it somehow always
> crashes in the parser (and only in one of them) although the code
> for using the 4 different parsers is the same. When it does crash it
> is because LA (called from nextToken()) has instead of 1 or 2 a
> value like 15 Million - obviously garbage due to some memory leak or
> misuse.

Already tried using -traceParser/Lexer/TreeParser ? To get a trace of
the error situation ? Tried running with a memory debugger ? Does a
backtrace say something intelligible ?

A bogus value would probably be a stack corruption somewhere. Best bet
is a memory debugger probably. (or do you have code that calls LA()
manually?)

Cheers,

Ric


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Tue Nov 23 13:28:12 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <co07m1+4v55@eGroups.com>
References: <co07m1+4v55@eGroups.com>
Message-ID: <41A3AB6C.1080804@codetransform.com>


atripp54321 wrote:

> What's the most complex translator that that people
> have seen? (Complex meaning functionality, not internals).

Have a look at my writeup of the AREV to VB translator:

http://www.codetransform.com/fun_with_antlr.html

Monty


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Tue Nov 23 13:54:35 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <41A3AB6C.1080804@codetransform.com>
References: <co07m1+4v55@eGroups.com> <41A3AB6C.1080804@codetransform.com>
Message-ID: <41A3B19B.90206@codetransform.com>


> atripp54321 wrote:
> 
> 
>>What's the most complex translator that that people
>>have seen? (Complex meaning functionality, not internals).
> 

The most complex translator I've seen elsewhere is CCured 
http://manju.cs.berkeley.edu/ccured/index.html

The C Intermediate Language which CCured is based upon is a very well 
thought out piece of software.  They reduce C to a basic set of 
primitives, for instance all loops become while(1) loops with explicit 
breaks.  See
http://manju.cs.berkeley.edu/cil/cil005.html#sec-cabs2cil for details.

This basic set of primitives is more useful for C to C transformations 
and not well suited to translating C to another language.  That said, 
reducing the complexity of C to the subset makes it easier to write 
analysis and translation code because there are far fewer variations to 
deal with.

This software is written in OCaml and I've had more than one client 
dismiss the tool because of that.

In any case I highly recommend studying this tool because it gives 
excellent details on what is involved in a serious translation project.

Monty


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ewbank at synopsys.com  Tue Nov 23 13:47:37 2004
From: ewbank at synopsys.com (Bryan Ewbank)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] RE: denial (was: ITLS)
In-Reply-To: <16803.33059.751167.759447@despot.non.net>
Message-ID: <200411232146.QAA24762@us54.synopsys.com>


> Indeed, that tiny issue of dealing with reality is something 
> that the software world has spent way too much time in denial
> about.
> - John

Thank you for the best laugh I've had this week.

- Bryan Ewbank
"The best tool for requirements analysis and design is a crayon" 




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From atripp at comcast.net  Tue Nov 23 19:03:20 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <41A3AB6C.1080804@codetransform.com>
Message-ID: <co0tlo+ch3b@eGroups.com>



--- In antlr-interest@yahoogroups.com, Monty Zukowski <monty@c...>
wrote:
> atripp54321 wrote:
> 
> > What's the most complex translator that that people
> > have seen? (Complex meaning functionality, not internals).
> 
> Have a look at my writeup of the AREV to VB translator:
> 
> http://www.codetransform.com/fun_with_antlr.html
> 
> Monty

Yes, I had looked at that early on. If you have
more details written up (or have the code
laying around), I'd love to see it.

I think what makes my situation different is the approach I took.
The example you give on that page says you change this:
IF R.CUST.ADDR[1,6] = 'PO BOX'
...to this...
IF (arvEQ(arvSUBSTRING(arvEXTRACT(R_CUST_ADDR, CUA_ADDR_LN1, 0, 0), 1,
6), "PO BOX")

I made a decision early on that I wanted to generate Java code
that looks hand written, even at the expense of possibly not
being correct code! I have a lot of writeup on this at my website.
The other C-to-Java tools (e.g. C2J and Ephedra) do what you're
doing here: generate code that works correctly, but is not at
all what a person would write.

So try to write down the VB code as you would
write it manually, and then figure out how you would do that
translation, and see if a treewalker is still a good fit.
Maybe it will be for you, but I guess I never got comfortable
enough with treewalkers (and I guess ANTLR in general) to
make it a good fit for me.

And thanks so much for writing the cgram grammar - don't know
where I'd be without it (perhaps still at a "real job" :)

Andy





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From atripp at comcast.net  Tue Nov 23 19:09:28 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <41A3B19B.90206@codetransform.com>
Message-ID: <co0u18+6vi1@eGroups.com>



--- In antlr-interest@yahoogroups.com, Monty Zukowski <monty@c...>
wrote:
> > atripp54321 wrote:
> > 
> > 
> >>What's the most complex translator that that people
> >>have seen? (Complex meaning functionality, not internals).
> > 
> 
> The most complex translator I've seen elsewhere is CCured 
> http://manju.cs.berkeley.edu/ccured/index.html
> 
> The C Intermediate Language which CCured is based upon is a very
well 
> thought out piece of software.  They reduce C to a basic set of 
> primitives, for instance all loops become while(1) loops with
explicit 
> breaks.  See
> http://manju.cs.berkeley.edu/cil/cil005.html#sec-cabs2cil for
details.
> 
> This basic set of primitives is more useful for C to C
transformations 
> and not well suited to translating C to another language.  That
said, 
> reducing the complexity of C to the subset makes it easier to write 
> analysis and translation code because there are far fewer
variations to 
> deal with.
> 
> This software is written in OCaml and I've had more than one client 
> dismiss the tool because of that.
> 
> In any case I highly recommend studying this tool because it gives 
> excellent details on what is involved in a serious translation
project.
> 
> Monty

Thanks, I'll look at that. One of the tools I looked at
was one called DMS from Semantic Designs:
http://semdesigns.com/Products/DMS/DMSToolkit.html

IIRC, it does something similar: it has a front-end for
each of various languages, parses them all into some
common intermediate language (or perhaps just 
an AST in a standard format, I don't remember).
That tool looked like an ideal platform to build a
translator on top of, but it was out of my price range.

Andy





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From atripp at comcast.net  Tue Nov 23 19:18:21 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <41A3B0BC.9000305@yahoo.gr>
Message-ID: <co0uht+r72f@eGroups.com>




> ASPA translates core libraries too. The built-in functions and classes
> of Jscript and VBScript and ActiveX components are supported.
> This should be obvious from the prior post containing the steps
> to translate someString.length into strlen($someString).

I looked again and I don't see anything that it's doing that's
complex.
changing "someString.length" to "strlen(#someString)" is
pretty simple. I realize you support more complex stuff,
so could you give me an example?

One example that I do:
printf("i=%d c=%c\n", i, c);
...becomes...
System.out.println("i=" + i + " c=" + c);
So I parse the format string, check for "\n" at the end, 
and replace the various placeholders ("%d" and "%c") with
arguments (i and c), using the "+" operator. How would I
specify that (or something else that complicated) using
your system?


> The example I chose was deliberately simple.
> > 
> > Just to pick one example, many C functions return error codes.
> > For example, fopen() returns a 0 if it can't open a file.
> > That needs to be replaced with exception handling in Java.
> > So I have a list of the functions and the values they return
> > on error. I check for calls to the functions, and look for
> > various patterns of error checking, such as:
> > -----------------------------
> > if (fopen(xxx) == 0) { // return value checked
> > // error code
> > }
> > else {
> > // non-error code
> > }
> > -----------------------------
> > v = fopen(xxx); // return value stored and checked later
> > ...
> > if (v != 0) {
> > // non-error code
> > }
> > -----------------------------
> This is in my TODO list for ASPA.
> I had limited time for the development (was an assignment
> from the university) and didn't consider this issue
> as top priority.
> I have some ideas of how to implement this, but will check
> the way you handled this problem for inspiration.

The question that this thread poses, though, is 
"will you be using a treewalker to implement this?"
I doubt that ANTLR's treewalker matching could handle it
(at least not in a cleaner way than writing it by hand).



> > syntactic rules as you do, but I also have many complex 
> > rules like this one.
> > 
> > So, now that I think about it,
> > maybe even this one rule involves several things that you probably
> > wouldn't see in your typical language-to-language translator:
> > 
> > * handling of library functions, not just core language
> This is done in ASPA.

Hmm...anyone have a feel for the size of the
ASP libraries vs. the C libraries
(http://www.gnu.org/software/libc/manual/html_node/)?

> > * replacing whole mechanisms/paradigms (error codes from 
> >   library functions being replaced by exception handling)
> No
> > * complex pattern matching (e.g. checking for various comparisons
> >   the return value like ==, !=, <, etc. and even checking for
> >   storage in a variable and then usage of that variable)
> I don't understand the point about the operators.
> Operators which are handled differently then others in ASPA
> are:
> JScript: The '+' operator. If the operands are numbers the translation
> is '+', otherwise the operator is considered to perform string
concatenation.
> VB: The logical operators (and, or, not ...) if have int operands
are thought
> to perform bitwise operations, and are handled properly.

My point was that when looking for various patterns of
checking for error conditions in C code, you've
got to also check for things like
if (fopen < 0)
if (fopen != 0)

...and not just
if (fopen == 0).
that's all.

> > 
> > In case you think that this rule is just an exceptionally
> > complex one, here are a few other examples:
> > 
> > * structs, unions, and enums become whole Java classes, including
> >   constructors and changes at each reference
> The same is true for jscript classes. The functions are placed inside
> the class body, if the variables(members) are defined and assigned a
value
> in the PHP class only the declaration exists and the members are
initialized
> inside the constructor body, etc 

Can you give me an example of where in your code you produce
constructor code?
 
> > * memory management is done "by hand" in C must be changed to
> >   use Java objects.
> This is a problem specific to your project. A complex problem
> indeed.
> > * I handle multiple input files, and change C file names
> >   to Java ones (including combining "hello.c" and "hello.h" into
> >   "Hello.java"
> This is true for ASPA too. Other files are included in a file
> with the #include directive.

And I assume that variables declared in one file can be referenced
in another? Do you put all files in one large AST? If not,
how do you handle moving things from one AST to another?
 
> Also, because ASP contains two languages, there exists a mechanism
> to share information among different parsers and TreePasers, but this
> is specific to my application. 
> > * There are different rules in Java and C for where an array
> >   can be initialized.
> > * The syntax and semantics for array declaration are different
> >   (In C, it's "struct person a[3];", in Java it's 
> >    "Person a[] = new Person[3];" plus a loop to initialize it)
> None of this problems are unachievable with a TreeParser in my opinion.

Sure, but what I'm trying to do is to bring up the things that
I do that don't seem (to me) like they'd be easy using a
treewalker, and asking you (or anyone else) to explain how
you use a treewalker to implement them. You mentioned
that you use a treewalker, so I'm still struggling to
understand how you use it for anything nontrivial.
 
> A similar issue about arrays exists in VB.
> Example:
> dim a(12, 3) 'multi dimension array
> a(0, 1) = 0
> a(0, 2) = 2
> PHP:
> $a = array(array()); //emulate multi dimension arrays with nested ones
> $a[0][0] = 1;
> $a[0][1] = 2;
> I give this example to illustrate that the 2 problems you refer
> are application specific, but a similar problem can be solved
> with the TreeParser approach.

I don't see how that problem is similar. Isn't the VB-to-PHP
translation that you show here a trivial syntax change?
(or am I missing something, like the fact that in VB you're
setting element (0,1) to 0 and in PHP, you're setting element
(0,) to 1).

I do stuff like if I see a two-dimensional array of chars,
check all the usages to see if it should be changed to
a one-dimensional array of Strings. Or check if a one
dimensional array of chars should just be a String.
I then look for all kinds of gyrations that C programmers
do on char arrays (putting in '\0', searching it, etc) and
replace them with calls to String methods.

> > Now I'm really starting to wonder about how much all the
> > language-to-language translators out there are really doing.
> > I know for a fact that the C-to-Java ones (other than Jazillian)
> > are only doing trivial syntactic changes
> > (see http://jazillian.com/competition.html for details).
> It should feel good to know that you have built the best tool
> available for a problem.
> 
> What this thread should make clear is that there are many
> approaches to solve the same domain of problems. 

I'm sorry to be so hardheaded and I mean no disrespect, but
I need to understand more about what you're doing to
convince myself that we really are dealing with the same domain.

If you could just briefly describe, say, your most complex
transformation, and point me to the right place in your
code so I can investigate more, I'd appreciate it.

> I consider
> your work important because offerers an alternative methodology
> for solving the translation problem. But personally I prefer
> the TreeParser methodology. You point that there are 800 lines
> of code fired by the treewalker. I don't know, because never counted
> them. Anyway the aid the treewalker offered for me was that it would
> fire the appropriate method and I didn't have to worry about it.
> For example in the rule:
> #(DOT (d1:expression | dt:type | dthis:THIS) d2:expression <dot>)
> the code:
>     if (#d1 != null) { //expression.expression
>         #expression = resolveDot(#d1, #d2);
>     } else if (#dt != null) { //Array.prototype
>         #expression = resolveClassAttribute(#dt, #d2);
>     } else { //this.something
>         #expression = resolveObjectAttribute(#d2);
>     }
> is fired.

Hmm...so you're saying "here are all the transformations
that need to be done whenever I encounter a DOT inside an
expression". Boy, it really is hard for me to think about
things that way, I'm so used to my other way. Let me
see if I can think of some of the situations that I
handle that deal with a DOT inside an expression.

Here's one: in C, a field can be a function pointer, so you
can have a function call: "a.f()" (the syntax is far
more complicated, but if I have to write it down,
I'll throw up...but you get the idea). 
Java doesn't have function pointers,
so I check for various function-pointer patterns
 and replace all the function pointer
fields and use Java reflection in its place. It's all very
involved. 

Here's another usage of DOT: one rule might replace a sort
by a call to "Collections.sort(a)". I have a rule that
looks for usage of classes (such as Collections) that
require Java "import" statements. Do I really want to do
a check at the DOT node that says "if the left side
is the name of a class, then import that class"?
That logic has nothing at all to do with the
function-pointer logic - why should they be in
the same place in the code? Just because they both
happen to involve a DOT?

I would
guess there are a few more situations where I have to
do various transformations involving DOT. If so, I'd
have to add even more unrelated cases to this one "DOT" place in
the code. That's slicing the problem the wrong way.

> This is very important because from the grammar definition
> I can be sure that only those 3 cases can occur.

Yea, I can appreciate that. You're sure you've handled
every possible input. But on the other hand, you're not
at all sure that you've handled all the cases.
For example, you surely have one place in the grammar
that handles the "+" binary operator. You know you
have things covered by covering that one case with, say,
a call to a handleBinaryPlus() method. But what does that
method do? Does it:
* remove redundant zeros (x+0 and 0+x become x)
* simplify expressions (x + -1 becomes x - 1)
* record the fact that each operand is involved in an arithmatic
  operation (and thus better not get it's type changed to boolean)
* combine consecutive string concatenation where possible ("a" + "b" 
   becomes just "ab")

I'm just making these examples up, but you see my point: that
many nodes in the grammar will have multiple, unrelated,
"actions" that need to be fired.

Isn't it more natural to have a separate rule for each of the
above items? That way, 1) we avoid having this handleBinaryPlus()
method performing 4 completely unrelated functions, and 2)
we avoid having the "change x from int to boolean" logic
split across handleBinaryPlus() and other functions.

I know it sounds weird to say "I'm not too concerned
that I cover all the cases of possible input". But picture
a natural language processing engine. Do they even care that
they've got code to fire on each possible input grammar
(noun-verb-object, adj-noun-verb-object, and 10,000 others)?
No. They're too busy writing zillions of rules to handle
all the real-world cases. ("Great, you have a rule that
replaces adj-noun in English to noun-adj in Spanish, now
you're 1% of the way done, start writing exception rules,
starting with "The White House").

>  Additionally
> it was simple to model the methods which should offer the functionality
> required for each case. I did not have to worry about how the
expressions
> d1 and d2 should be translated because the treewalker had previously
fired
> the appropriate code sections to take care of that.

I just don't see the advantage of this "fire a rule at each
node" approach. As I look through my rules, almost none
of them involve a single node in the tree. And even when 
rules do involve a single node, I don't want to mix
them together. For example, one rule removes the "u"
in "123u" (java doesn't have unsigned types). And another
removes the "L" in "123L" (because a C long is [usually]
an Java int). Yes, I can have one handleNumber() method
fire at the NUMBER node that does both of these. But
I'd rather not slice the problem that way. Instead, I'd
like the NumberWithURule to traverse the AST and make its
changes, and the NumberWithLRule to traverse the AST and
make its changes.


> So the problem is partitioned effectively into smaller problems by
the treewalker
> for me. This is the greatest benefit from the TreeParser in my opinion.
> It doesn't matter if there are 800 lines of code or less activated
by the
> treewalker. What matters is that the treewalker offers entry points
for specific
> sub-problems. 

My point is that as that 800 lines grows to tens of thousands
of lines, most of the code will start to deal with whole sections
of the tree rather than individual nodes.

> 
> Anyway, I think that the choice of methodology (treewalker or other)
> is up to the developer. It can just be a matter of taste if all
> the available methodologies can offer a solution to the problem.

Yes, definitely.

> 
> What ASPA (and other TreeParser based translators) and jazillian
> prove is that both methodologies are capable to offer a solution.

I'm sure the treewalker approach is well proven and works
fine for most translators. It's just that my goals with
Jazillian bit off more than a treewalker can chew :)

> > 
> > What's the most complex translator that that people
> > have seen? (Complex meaning functionality, not internals).
> I can't tell.
> 
> Anakreon

Thanks again for your time.
Andy

p.s. I assume the Spanish translation of "The White House" is
"The White House" and not "La Casa Blanca" :)





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From silverio.di at qem.it  Tue Nov 23 22:50:43 2004
From: silverio.di at qem.it (silverio.di@qem.it)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Issue & bug tracking for ANTLR
Message-ID: <OFA6BA3D78.64018AF0-ONC1256F56.0024F6CB-C1256F56.00261262@qem.it>






I would like if www.antlr.org begin to use the powerful issue/bug tracking
from opensource "mantisbt". We use it for our products and we found it
very useful and simply to install.

Mantisbt is good to maintain:
- note about bugs
- version management
- attached files & documents
- users (viewer/reporter/developer/manager/etc).
- changelog
- full configurabile between config_inc.php
- etc...

It requires only PHP and MySQL.

Try to see;

http://www.mantisbt.org/
http://sourceforge.net/projects/mantisbt/

for an example
http://bugs.mantisbt.org/view_all_bug_page.php



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Bruno.Delzant at proximus.net  Wed Nov 24 00:28:18 2004
From: Bruno.Delzant at proximus.net (DELZANT Bruno (BMB))
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Space in values (need more info)
Message-ID: <1E1E0B9826A3FA4CB384D1E79DF7480A04BE14@ECLU574.nt.mobile.belgacom.be>

Thanks for the help, but ... I don't see what you mean :-/ I have read
the part on string in the user guide, but I don't see what's the help of
this.
I'll try perhaps with a simpler example of what I want to achieve:
Need to parse the following input:

PRIORITY = "3"
REQ_USER_ID = "PTS JDA"
REQ_PROC_ID = "process"

As you can see, there is a space in second quoted string.
With the following grammar, I am getting stuck on that space.
How can I improve the grammar to detect space in this quoted string and
get back the value ?


  _____  

header {package test;}
class MyParser extends Parser;

 
entries: (entry)+ ;
  
entry:  a:ALPHA_NUM_STRING EQUAL QUOTE b:ALPHA_NUM_STRING QUOTE
     { System.out.println(a.getText() + " - " + b.getText()); };
 
class MyLexer extends Lexer;
 
ALPHA_NUM_STRING
  :  ( 'a'..'z' | 'A'..'Z' | '0'..'9' | '_' | '.' )+ ;
 
QUOTE: '\"' ;
 
EQUAL: '=';  
  
WS:   ( ' ' | '\t'
    | '\r' '\n' { newline(); }
        |   '\n'      { newline(); }
        ) {$setType(Token.SKIP);} ;
  _____  


Output of the program I ran with this grammar and input:
PRIORITY - 3
line 2:20: expecting QUOTE, found 'JDA'
REQ_PROC_ID - process



>-----Original Message-----
>From: Terence Parr [mailto:parrt@cs.usfca.edu]
>Sent: Tuesday, November 23, 2004 6:53 PM
>To: antlr-interest@yahoogroups.com
>Subject: Re: [antlr-interest] Space in values
>
>
>
>Hi.  The answer is to put STRING as a token in the lexer :)  See the
>java grammar or a perhaps a simpler grammar.
>
>Ter
>On Nov 23, 2004, at 8:40 AM, DELZANT Bruno (BMB) wrote:
>> With this grammar file, I get an error on spaces in bolded value. the
>> parser is expecting a double quote and not a space.
>> But I do not see how to solve this (I am new with antlr).
>--
>CS Professor & Grad Director, University of San Francisco
>Creator, ANTLR Parser Generator, http://www.antlr.org
>Cofounder, http://www.jguru.com Cofounder,
>http://www.knowspam.net enjoy email again!
>
>
>
>
>
>
>Yahoo! Groups Links
>
>
>
>
>
>
>
> 



**** DISCLAIMER ****

"This e-mail and any attachment thereto may contain information which is confidential and/or protected by intellectual property rights and are intended for the sole use of the recipient(s) named above. This email is not intended to create or affect any contractual arrangements between the parties.
Any use of the information contained herein (including, but not limited to, total or partial reproduction, communication or distribution in any form) by other persons than the designated recipient(s) is prohibited. 
If you have received this e-mail in error, please notify the sender either by telephone or by e-mail and delete the material from any computer".

Thank you for your cooperation.

For further information about Proximus mobile phone services please see our website at http://www.proximus.be or refer to any Proximus agent.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041124/d6c95c4b/attachment.html
From Anthony.Youngman at ECA-International.com  Wed Nov 24 02:06:19 2004
From: Anthony.Youngman at ECA-International.com (Anthony Youngman)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] "back to the future" (merged lexer / parser
    spec)
Message-ID: <C7FE35004D40FD45AA342991B88CE40409B093@lnml1.eca-international.local>


Ask Monty ... "List<List<int>>" is only too legal in AREV (and similar) BASICs.

I don't know how good a filter would be at parsing that, but it might well help - especially as the original language was *defined* using a state transition table ...

Oh - Jens also missed the possibility that either or both the "<"s could be the "less than" operator :-) that's the trap AREV has to watch out for :-)

Cheers,
Wol

-----Original Message-----
From: Terence Parr [mailto:parrt@cs.usfca.edu] 
Sent: 23 November 2004 17:30
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] "back to the future" (merged lexer / parser spec)



On Nov 23, 2004, at 4:21 AM, Jens Thee? wrote:

>
>
> Terence Parr wrote:
>
>> With this merged spec, ultimately I would like to do context-sensitive
>> (goal-oriented) lexing so we could handle things like the C++ nested
>> template lexing issue.  With input "List<List<int>>" you don't know in
>> the lexer w/o context if the final ">>" is two '>' or one '>>' 
>> (shift).
>>
> I don't know if it's come up before, but "list<list<int>>" actually
> isn't legal in c++. Haven't got the ANSI spec here but at least g++
> 3.3.3 complains with an "error: `>>' should be `> >' in template class
> name". You have to write "list<list<int> >" instead, which should be
> lexable without context. Don't know how it's with the java generics 
> though.

I'm pretty sure java allows >> and makes the lexer track context to get 
the correct answer.

> Anyway, context-sensitive lexing is a feature I'd like to see. When I

Me too!

> find the time (next year or decade), I intend to write a parser for
> Wiki-text using antlr, and I think that this new lexing could come in
> handy there.

Have you seen my TML?  It's wiki-inspired (though I like it better 
<wink>).

http://www.antlr.org/TML/index.tml

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links



 





****************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 8272 5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

****************************************************************************



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From H.A.M.Maassen at student.tue.nl  Wed Nov 24 02:38:27 2004
From: H.A.M.Maassen at student.tue.nl (Maassen, H.A.M.)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Storing ambiguity in the tree
Message-ID: <1C5C690C06EFE244B83E3F133CA70BDE285860@studentex6.campus.tue.nl>


Hello,
 
I am following Micheal's suggestion of fixing the ambiguities in my language by doing a treewalk-pass after storing type-information in the first parse-pass.
 
What I'd like to do, though, is store code that can be interpreted in multiple ways by making a subtree for each possible interpretation. My treewalker can then simply select the appropriate one instead of having to do (potentially complicated) reformattings on the tree.
 
Example:
 
Code
  MyIdentifier(2) - 2 > 5
 
can become:
 
PROCEDURECALL
  PROC NAME
    MyIdentifier
  PARAMS
    2
CHECK
  >
    -2
    5
 
or:
 
PROCEDURECALL
  NAME
    MyIdentifier
CHECK
  >
    -
      2
      2
    5
 
or:
 
CHECK
  >
    -
      FUNCTIONCALL
        NAME
          MyIdentifier
        PARAMS
          2
      2
    5
 
...all depending on the type of MyIdentifier (I hope these trees came through in readable form).
 
It seems a lot easier to detect these possibilities during parsing (which was what I was doing before I ran into the problem of variables being defined later in the text than where they are used) than to figure out and rewrite these trees afterwards.
 
Any suggestions?
 
Thank you, Harald Maassen


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From demakov at ispras.ru  Wed Nov 24 04:53:17 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Storing ambiguity in the tree
References: <1C5C690C06EFE244B83E3F133CA70BDE285860@studentex6.campus.tue.nl>
Message-ID: <011a01c4d224$91401c50$8cc79553@marlboro>


> What I'd like to do, though, is store code that can be interpreted in multiple ways by making a subtree for each possible
interpretation. My treewalker can then simply select the appropriate one instead of having to do (potentially complicated)
reformattings on the tree.

How many possible variants can exist? May be better to store list of tokens (instead of one or more subtrees)
and parse them when additional info is available?

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Wed Nov 24 05:04:04 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Re: Space in values (need more info)
In-Reply-To: <1E1E0B9826A3FA4CB384D1E79DF7480A04BE14@ECLU574.nt.mobile.belgacom.be>
Message-ID: <co20s4+6lig@eGroups.com>



--- In antlr-interest@yahoogroups.com, "DELZANT Bruno \(BMB\)"
<Bruno.Delzant@p...> wrote:
> Thanks for the help, but ... I don't see what you mean :-/ I have read
> the part on string in the user guide, but I don't see what's the help of
> this.

Ter meant that you should include a separate rule that matches quoted
strings in your lexer. You can use the STRING_LITERAL rule in the
java.g sample grammar as a starting point to create your own.

> I'll try perhaps with a simpler example of what I want to achieve:
> Need to parse the following input:
> 
> PRIORITY = "3"
> REQ_USER_ID = "PTS JDA"
> REQ_PROC_ID = "process"
> 
> As you can see, there is a space in second quoted string.
> With the following grammar, I am getting stuck on that space.
> How can I improve the grammar to detect space in this quoted string and
> get back the value ?

If you have a STRING rule (and deleted the QUOTE rule) the lexer would
return the following tokens for each of the input lines above:

   ALPHA_NUM_STRING EQUAL STRING

The string token would have the whole of the quoted string (e.g. "PTS
JDA") as it's lexeme (available via the getText() method.

Cheers!

Micheal
ANTLR/C#





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From H.A.M.Maassen at student.tue.nl  Wed Nov 24 05:18:43 2004
From: H.A.M.Maassen at student.tue.nl (Maassen, H.A.M.)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Storing ambiguity in the tree
Message-ID: <1C5C690C06EFE244B83E3F133CA70BDE285861@studentex6.campus.tue.nl>

> From: Alexey Demakov [mailto:demakov@ispras.ru] 
>
> How many possible variants can exist? May be better to store list of tokens (instead of one or more subtrees)
> and parse them when additional info is available?

How would I go about doing this?


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 3434 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041124/c86a1bff/attachment.bin
From anakreonmejdi at yahoo.gr  Wed Nov 24 06:00:41 2004
From: anakreonmejdi at yahoo.gr (Anakreon)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <co0uht+r72f@eGroups.com>
References: <co0uht+r72f@eGroups.com>
Message-ID: <41A49409.8010907@yahoo.gr>


atripp54321 wrote:
> 
> 
>>ASPA translates core libraries too. The built-in functions and classes
>>of Jscript and VBScript and ActiveX components are supported.
>>This should be obvious from the prior post containing the steps
>>to translate someString.length into strlen($someString).
> 
> 
> I looked again and I don't see anything that it's doing that's
> complex.
> changing "someString.length" to "strlen(#someString)" is
> pretty simple. I realize you support more complex stuff,
> so could you give me an example?
Well, this transformation is not hard coded. The application knows
nothing about the String class. The information is provided via the
xml files. I have described the method of translation so far. 
> 
> One example that I do:
> printf("i=%d c=%c\n", i, c);
> ...becomes...
> System.out.println("i=" + i + " c=" + c);
I did not have to make this kind of translations in ASP.
One somehow similar case is the opening of a connection
from the ADODB library.
con.open "Connection String"
I chose to transform this into openConnection($con, "Conection String").
The method openConnection is defined in PHP in a file I called runtime.php
which will do the appropriate actions to get a connection based on that
string. 
> So I parse the format string, check for "\n" at the end, 
> and replace the various placeholders ("%d" and "%c") with
> arguments (i and c), using the "+" operator. How would I
> specify that (or something else that complicated) using
> your system?
This complex? no.
The values of literal strings do not influence translation decisions
in ASPA.
> Hmm...anyone have a feel for the size of the
> ASP libraries vs. the C libraries
> (http://www.gnu.org/software/libc/manual/html_node/)?
Why size would be a problem? One assumption made for ASPA
is that any method or property an ActiveX or built-in method
can be emulated with a PHP code block or method call.
ASPA offerers a way to bind an ASP method to a PHP method
or code block. If someone wishes to support yet an other
ActiveX he just have to write one more XML file.

> My point was that when looking for various patterns of
> checking for error conditions in C code, you've
> got to also check for things like
> if (fopen < 0)
> if (fopen != 0)
> 
> ...and not just
> if (fopen == 0).
> that's all.
> 
I see. Error handling is not implemented.
>>The same is true for jscript classes. The functions are placed inside
>>the class body, if the variables(members) are defined and assigned a
> 
> value
> 
>>in the PHP class only the declaration exists and the members are
> 
> initialized
> 
>>inside the constructor body, etc 
> 
> 
> Can you give me an example of where in your code you produce
> constructor code?
>  
Look at gr.omadak.leviathan.asp.objects.JsUserDefinedMethod and also
the rule @end in tree_js_php.act and the method transformToClass.
You might argue that the transformation is done with hand-written code.
But the information the code I wrote is provided by the treewalker
as the tree was traversed. 
> 
>>>* I handle multiple input files, and change C file names
>>>  to Java ones (including combining "hello.c" and "hello.h" into
>>>  "Hello.java"
>>
>>This is true for ASPA too. Other files are included in a file
>>with the #include directive.
> 
> 
> And I assume that variables declared in one file can be referenced
> in another?
Yes.
> Do you put all files in one large AST?
No
> If not,
> how do you handle moving things from one AST to another?
Nothing is moved. For each ASP file a file with PHP code is generated.
But the symbol table of the TreeParser of the included file is available
to the TreeParser of the file which included it. Only info are moved
not the variables them self.
> Sure, but what I'm trying to do is to bring up the things that
> I do that don't seem (to me) like they'd be easy using a
> treewalker, and asking you (or anyone else) to explain how
> you use a treewalker to implement them. You mentioned
> that you use a treewalker, so I'm still struggling to
> understand how you use it for anything nontrivial.
Trivial is a subjective concept. What is nontrivial for
me might be trivial for you and vice versa.
Perhaps you could see the code generated for each
of the files available in the tests/sources directory and
decide if the transformations are trivial.
If you are using Linux, from the ASPA directory type:
./parse.sh -b tests -o out
and the translated files will be placed inside the "out" dir.
Some of the files will not have equivalent php files because
they where written in order to examine the behaver upon failure.
>>What this thread should make clear is that there are many
>>approaches to solve the same domain of problems. 
> 
> 
> I'm sorry to be so hardheaded and I mean no disrespect, but
> I need to understand more about what you're doing to
> convince myself that we really are dealing with the same domain.
It's OK.
I think the domain is source->source translation.
> 
> If you could just briefly describe, say, your most complex
> transformation, and point me to the right place in your
> code so I can investigate more, I'd appreciate it.
As I wrote before, complex and trivial is somehow subjective.
I consider the examples below as complex transformations:
1)ActiveX which contain Collections
	a = Request.Cookies 'this provides the raw cookies string
	a = Request.Cookies("key") 'the value of a key
	a = Request.Cookies("key")("subkey")
The problem was that in the first case Cookies seems like
a property of the Request class.
In the second like a method and in the third ??
The problem was solved by defining nested classes inside the Request
class (I am referring to the xml file) which provide default properties.   
2)The transformation of Jscript classes in PHP classes.
3)If a variable used inside a function exists outside of it's scope
it should be defined with the keyword "global" in php. The "algorithm"
is described in the file etc/function_notes.txt

> Hmm...so you're saying "here are all the transformations
> that need to be done whenever I encounter a DOT inside an
> expression".
Well yes. Note however that the transformation decisions
are influenced by the code which was parsed before the
DOT was encountered. If we have a.length, but "a" is not
a reference to an instance of a class which does not have
a property called length, it would be an error.   

> Boy, it really is hard for me to think about
> things that way, I'm so used to my other way. Let me
> see if I can think of some of the situations that I
> handle that deal with a DOT inside an expression.
The way of thinking is a matter of idiosynkrasi (I hope
this is the English word)
> 
> Here's one: in C, a field can be a function pointer, so you
> can have a function call: "a.f()" (the syntax is far
> more complicated, but if I have to write it down,
> I'll throw up...but you get the idea). 
> Java doesn't have function pointers,
> so I check for various function-pointer patterns
>  and replace all the function pointer
> fields and use Java reflection in its place. It's all very
> involved. 
Hard problem but application specific. One simpler check
which ASPA performs on variable usage is for arrays in VB.
If we have the code "c = a(expr)" this could be a call to
method "a" or the element with index "expr" if "a" is an
array. So APSA has to know if "a" was declared as an array
or the result of a method which returns an array was assigned
to identifier "a".  
> 
> Here's another usage of DOT: one rule might replace a sort
> by a call to "Collections.sort(a)". I have a rule that
> looks for usage of classes (such as Collections) that
> require Java "import" statements. Do I really want to do
An import may be required for the translated code in ASPA
too. In the XML file, a requirement for an import can be defined
for a class (if any member of the class is called an require 'file'
statement is generated), for a member (only if the member is called
the 'require' is generated) or a function. 
> a check at the DOT node that says "if the left side
> is the name of a class, then import that class"?
> That logic has nothing at all to do with the
> function-pointer logic - why should they be in
> the same place in the code? Just because they both
> happen to involve a DOT?
This is a matter of code organization. What I do
is to call a method which then calls other methods
to handle cases of a different logic. They are not
in the same place.
> 
> I would
> guess there are a few more situations where I have to
> do various transformations involving DOT. If so, I'd
> have to add even more unrelated cases to this one "DOT" place in
> the code. That's slicing the problem the wrong way.
How can we discuss the right way of slicing a problem
in an objective way?
> 
> 
>>This is very important because from the grammar definition
>>I can be sure that only those 3 cases can occur.
> 
> 
> Yea, I can appreciate that. You're sure you've handled
> every possible input. But on the other hand, you're not
> at all sure that you've handled all the cases.
> For example, you surely have one place in the grammar
> that handles the "+" binary operator. You know you
> have things covered by covering that one case with, say,
> a call to a handleBinaryPlus() method. But what does that
> method do? Does it:
> * remove redundant zeros (x+0 and 0+x become x)
> * simplify expressions (x + -1 becomes x - 1)
No. ASPA is not a code optimizer but a translator.
> * record the fact that each operand is involved in an arithmatic
>   operation (and thus better not get it's type changed to boolean)
ASP and PHP(fortunately) are loosely typed languages. But still some
translating decisions are based on the types of the operands.
The way to handle this is based on heuristic methods and is not guarantied
to be always successful.
> * combine consecutive string concatenation where possible ("a" + "b" 
>    becomes just "ab")
This can be done but I didn't do it. An other thing are expressions
like
a = " there"
Response.write "hello" & a 'prints hello there
which in PHP can be simplified into:
print("hello$a")
I didn't do this because I'm not sure a user of the
program would think of it as a feature. He could prefer
to have print("hello" . $a) instead. But it can be easily done.

> Isn't it more natural to have a separate rule for each of the
> above items? That way, 1) we avoid having this handleBinaryPlus()
> method performing 4 completely unrelated functions, and 2)
> we avoid having the "change x from int to boolean" logic
> split across handleBinaryPlus() and other functions.
A matter of taste I'm afraid.

> I just don't see the advantage of this "fire a rule at each
> node" approach. As I look through my rules, almost none
> of them involve a single node in the tree.
Example:
a = "one" + true + "two" + new Date() + "three" + 5
(EXPR (ASSIGN a (PLUS (PLUS (PLUS (PLUS (PLUS one true) two) (NEW DATE ELIST)) three) 5)
The translated one:
(EXPR (ASSIGN a (CONCAT (CONCAT (CONCAT (CONCAT (CONCAT one true) two) [METHOD_CALL, getdate]) three) 5)
Except for the deepest PLUS, there are single node operands involved.
But each time PLUS rule is called it only cares about the [guessed] type
of it's operands. 
> And even when 
> rules do involve a single node, I don't want to mix
> them together. For example, one rule removes the "u"
> in "123u" (java doesn't have unsigned types). And another
> removes the "L" in "123L" (because a C long is [usually]
> an Java int). Yes, I can have one handleNumber() method
> fire at the NUMBER node that does both of these. But
> I'd rather not slice the problem that way. Instead, I'd
> like the NumberWithURule to traverse the AST and make its
> changes, and the NumberWithLRule to traverse the AST and
> make its changes.
ASPA is single pass, but you could do those transformations
mentioned above in many passes.

> My point is that as that 800 lines grows to tens of thousands
> of lines, most of the code will start to deal with whole sections
> of the tree rather than individual nodes.
My experience does not confirm that.
The code deals with individual nodes and any other information
stored about those nodes. The information is gathered from preceding
code by examining individual nodes.


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Jim.OConnor at microfocus.com  Wed Nov 24 06:24:04 2004
From: Jim.OConnor at microfocus.com (Jim O'Connor)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] java.g, java.tree.g, and SUPER_CTOR_CALL
Message-ID: <3AC103F1B7EEEC48A855ACB1D2819E91034809D1@rock-corpmail.microfocus.com>

Hi All,
  I'm having a difficulty with the java grammars and it's handling of
"super()" in a constructor.  Sorry if this has been addressed elsewhere.
 
Example:
 
public class AB {
      public AB() {
            super();
      ABC abc = new ABC();
            abc.toString();
            abc.myABC();
      }
}
 
The java.g file has the following code:
 
constructorBody
    :   lc:LCURLY^ {#lc.setType(SLIST);}
            ( options { greedy=true; } : explicitConstructorInvocation)?
            (statement)*
        RCURLY!
    ;
/** Catch obvious constructor calls, but not the expr.super(...) calls */
explicitConstructorInvocation
    :   "this"! lp1:LPAREN^ argList RPAREN! SEMI!
            {#lp1.setType(CTOR_CALL);}
    |   "super"! lp2:LPAREN^ argList RPAREN! SEMI!
            {#lp2.setType(SUPER_CTOR_CALL);}
    ;
 
This is appears to construct a good tree with the SUPER_CTOR_CALL as a child
of the SLIST parent.
 
The problem shows itself in the tree grammar.  The condensed generated code
is below.
 
 
      public final void slist(AST _t) throws RecognitionException {
            match(_t,SLIST);
            _t = _t.getFirstChild();
            {
            _loop20035:
            do {
                  if ((_tokenSet_1.member(_t.getType()))) {
                        stat(_t);
                        _t = _retTree;
                  }
                  else 
                        break _loop20035;
            } while (true);
      }
 
 
The if condition fails with "_t" holding the SUPER_CTOR_CALL value.  The
SUPER_CTOR_CALL is in the following rule tree, and only in this rule tree.  
 
stat: typeDefinition
      |     variableDef
      |     expression
....... others 
 
      ;
 
 
Expression   //Offending parent???? EXPR
      :     #(EXPR expr)
      ;
 
 
expr: #(QUESTION expr expr expr)    // trinary operator
 
....... others 
 
 
      |     primaryExpression
      ;
 
 
primaryExpression
    :   IDENT
....... others 
 
      |     ctorCall
 
....... others 
      ;
 
 
 
 
ctorCall
      :     #( CTOR_CALL elist )
      |     #( SUPER_CTOR_CALL
                  (     elist
                  |     primaryExpression elist
                  )
             )
      ;
 
 
It appears that the SUPER_CTOR_CALL is in the stat list but shoved down
below the #(EXPR expr) tree.  There are comments about ambiguities.  I don't
want to insert the ctorCall into a spot that would cause more problems.
Should I concentrate on java.g or java.tree.g?
 
I'm using the 1.3 java.g but the 1.5 java.g appears to have the same
construct.
 
 
 
The tree grammar runs "successfully?".  It ignores the input and moves on.
 
 
 
 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041124/6a201434/attachment.html
From demakov at ispras.ru  Wed Nov 24 06:47:12 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Storing ambiguity in the tree
References: <1C5C690C06EFE244B83E3F133CA70BDE285861@studentex6.campus.tue.nl>
Message-ID: <01c601c4d234$7baf39b0$8cc79553@marlboro>


From: "Maassen, H.A.M." <H.A.M.Maassen@student.tue.nl>
> > From: Alexey Demakov [mailto:demakov@ispras.ru] 
> >
> > How many possible variants can exist? May be better to store list of tokens (instead of one or more subtrees)
> > and parse them when additional info is available?
> 
> How would I go about doing this?

My idea is to build some "flat" tree for ambiguous portions of input, 
i.e. all input tokens should be children of one root node.
So at the second pass we can run parser on list of children and build subtree.
It's only idea, I can't get you more details on implementation now.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Bruno.Delzant at proximus.net  Wed Nov 24 06:31:26 2004
From: Bruno.Delzant at proximus.net (DELZANT Bruno (BMB))
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Re: Space in values (need more info)
Message-ID: <1E1E0B9826A3FA4CB384D1E79DF7480A4D84BD@ECLU574.nt.mobile.belgacom.be>


Thanks Micheal for your help, it's now clear for me and it works !

BR,
Bruno


**** DISCLAIMER ****

"This e-mail and any attachment thereto may contain information which is confidential and/or protected by intellectual property rights and are intended for the sole use of the recipient(s) named above. This email is not intended to create or affect any contractual arrangements between the parties.
Any use of the information contained herein (including, but not limited to, total or partial reproduction, communication or distribution in any form) by other persons than the designated recipient(s) is prohibited. 
If you have received this e-mail in error, please notify the sender either by telephone or by e-mail and delete the material from any computer".

Thank you for your cooperation.

For further information about Proximus mobile phone services please see our website at http://www.proximus.be or refer to any Proximus agent.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Wed Nov 24 08:18:54 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] java.g, java.tree.g, and SUPER_CTOR_CALL
In-Reply-To: <3AC103F1B7EEEC48A855ACB1D2819E91034809D1@rock-corpmail.microfocus.com>
References: <3AC103F1B7EEEC48A855ACB1D2819E91034809D1@rock-corpmail.microfocus.com>
Message-ID: <89378F2C-3E34-11D9-9362-000393B5606C@codetransform.com>


On Nov 24, 2004, at 6:24 AM, Jim O'Connor wrote:

>
> ?
>
> The if condition fails with "_t" holding the SUPER_CTOR_CALL value.? 
> The SUPER_CTOR_CALL is in the following rule tree, and only in this 
> rule tree. ?
>
> ?
>
> stat: typeDefinition
>
> ????? |???? variableDef
>
> ????? |???? expression
>
> ....... others
>
> ?
>
> ????? ;
>
> ?
>
> ?
>
> Expression ??//Offending parent???? EXPR
>
> ????? :???? #(EXPR expr)
>
> ????? ;
>
> ?
>
> ?
>
> expr: #(QUESTION expr expr expr)??? // trinary operator
>
> ?
>
> ....... others
>
> ?
>
> ?
>
> ????? |???? primaryExpression
>
> ????? ;
>
> ?
>
> ?
>
> primaryExpression
>
> ??? :?? IDENT
>
> ....... others
>
> ?
>
> ????? |???? ctorCall
>
> ?
>
> ....... others
>
> ????? ;
>
> ?
>
> ?
>
> ?
>
> ?
>
> ctorCall
>
> ????? :???? #( CTOR_CALL elist )
>
> ????? |???? #( SUPER_CTOR_CALL
>
> ????????????????? (???? elist
>
> ????????????????? |???? primaryExpression elist
>
> ????????????????? )
>
> ??????????? ?)
>
> ????? ;
>
> ?
>
> ?
>
> It appears that the SUPER_CTOR_CALL is in the stat list but shoved 
> down below the #(EXPR expr) tree. ?There are comments about 
> ambiguities. ?I don't want to insert the ctorCall into a spot that 
> would cause more problems. ?Should I concentrate on java.g or 
> java.tree.g?

I'm not totally sure what the author's intent was, but the simplest 
solution seems to be to wrap the ctors into a #(EXPR parent)

explicitConstructorInvocation

??? :?? ( "this"! lp1:LPAREN^ argList RPAREN! SEMI!

??????????? {#lp1.setType(CTOR_CALL);}

??? |?? "super"! lp2:LPAREN^ argList RPAREN! SEMI!

??????????? {#lp2.setType(SUPER_CTOR_CALL);}
	)
	{ ##=#(#[EXPR],##);}
??? ;

?
Monty


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From demakov at ispras.ru  Wed Nov 24 08:28:55 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] treecc: AOP Approach to Writing Compilers
Message-ID: <026001c4d242$b158ae30$8cc79553@marlboro>


I've found another tool for specification of heterogenous tree
http://www.southern-storm.com.au/treecc.html

It uses AOP approach mentioned during our discussion on tree processing:
http://www.southern-storm.com.au/treecc_essay.html

Very interesting, I wonder why haven't seen it before.

It is used in DotGNU Portable.NET, so seems to be stable enough.

Btw, I've just released TreeDL 1.0...

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From eddie_antlr at yahoo.co.uk  Wed Nov 24 08:30:02 2004
From: eddie_antlr at yahoo.co.uk (dsfsdf fdsfdsf)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] new line character rule
Message-ID: <20041124163002.64734.qmail@web25207.mail.ukl.yahoo.com>

Hi 
I have a white space rule
WS:( ' ' | '\t' | '\r' | '\n' ) ;
I want to create a seperate rule for the new line character 
so i wrote 
NL: ( '\n' | '\r'); and took out the \n and \r from the WS rule
I than hide these tokens in a filter and parse and do my
transformations.
However my genertaion fails.
Is there another way of writing a new line rule?
thanks 
ed.

		
---------------------------------
 ALL-NEW Yahoo! Messenger - all new features - even more fun!  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041124/8ef79ede/attachment.html
From open.zone at virgin.net  Wed Nov 24 08:31:57 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Re: treecc: AOP Approach to Writing Compilers
In-Reply-To: <026001c4d242$b158ae30$8cc79553@marlboro>
Message-ID: <co2d1t+h5r9@eGroups.com>



--- In antlr-interest@yahoogroups.com, "Alexey Demakov" <demakov@i...>
wrote:
> I've found another tool for specification of heterogenous tree
> http://www.southern-storm.com.au/treecc.html
> 
> It uses AOP approach mentioned during our discussion on tree processing:
> http://www.southern-storm.com.au/treecc_essay.html
> 
> Very interesting, I wonder why haven't seen it before.

I looked at it a couple of years ago. It seemed easy to use and useful
but it was tied to a Yacc-ish way of life. Sigh...

I didn't get the AOP-ness though. I though it was just a tree builder.
Perhaps I missed something.

Micheal
ANTLR/C#





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From demakov at ispras.ru  Wed Nov 24 08:43:12 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] new line character rule
References: <20041124163002.64734.qmail@web25207.mail.ukl.yahoo.com>
Message-ID: <027b01c4d244$b01f0ad0$8cc79553@marlboro>

What exactly fails?

I use the following rule

protected
NL : (   {LA(2) == '\n'}? '\r' '\n'
       | '\r'
       | '\n'
     )
     { newline(); }
   ;

WS : ( options { greedy = true; } :
          ' '
       | '\t'
       | '\f'
       | NL
     )+
   ;

  ----- Original Message ----- 
  From: dsfsdf fdsfdsf 
  To: antlr-interest@yahoogroups.com 
  Sent: Wednesday, November 24, 2004 7:30 PM
  Subject: [antlr-interest] new line character rule


  Hi 
  I have a white space rule
  WS:( ' ' | '\t' | '\r' | '\n' ) ;
  I want to create a seperate rule for the new line character 
  so i wrote 
  NL: ( '\n' | '\r'); and took out the \n and \r from the WS rule
  I than hide these tokens in a filter and parse and do my
  transformations.
  However my genertaion fails.
  Is there another way of writing a new line rule?
  thanks 
  ed.


------------------------------------------------------------------------------
  ALL-NEW Yahoo! Messenger - all new features - even more fun! 

------------------------------------------------------------------------------
  Yahoo! Groups Links

    a.. To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/
      
    b.. To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com
      
    c.. Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041124/3a200566/attachment.html
From demakov at ispras.ru  Wed Nov 24 08:46:24 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Re: treecc: AOP Approach to Writing Compilers
References: <co2d1t+h5r9@eGroups.com>
Message-ID: <027c01c4d245$22b61070$8cc79553@marlboro>


From: "micheal_jor" <open.zone@virgin.net>
> --- In antlr-interest@yahoogroups.com, "Alexey Demakov" <demakov@i...>
> wrote:
> > I've found another tool for specification of heterogenous tree
> > http://www.southern-storm.com.au/treecc.html
> > 
> > It uses AOP approach mentioned during our discussion on tree processing:
> > http://www.southern-storm.com.au/treecc_essay.html
> > 
> > Very interesting, I wonder why haven't seen it before.
> 
> I looked at it a couple of years ago. It seemed easy to use and useful
> but it was tied to a Yacc-ish way of life. Sigh...

I don't see any dependencies on yacc. Only % in notation.
But I'm reading treecc docs only about a hour :)

> I didn't get the AOP-ness though. I though it was just a tree builder.
> Perhaps I missed something.

The second link describes the tree?? way of tree processing.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ewbank at synopsys.com  Wed Nov 24 08:50:41 2004
From: ewbank at synopsys.com (Bryan Ewbank)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Storing ambiguity in the tree
In-Reply-To: <01c601c4d234$7baf39b0$8cc79553@marlboro>
Message-ID: <200411241649.LAA15409@us54.synopsys.com>


Alexey, others,

I'm doing the same thing - for me, it was forced because the new language
requires support for user-defined infix operators (with differing precedence
and arity - ugh).  That means I have a pass that does precedence after the
pass that does type analysis.  On the up side, it greatly simplifies the
parser grammar:

	EXPR : ( operator | terminal )* { ## = #( [EXPR,"EXPR"], ##); }
		// EXPR node is to provide a hook for precedence pass.

To take this further, I'm also recognizing if/else as separate entities,
then rejecting (as a semantic error) any else-statement without a leading
if-statement.

I'm working also on a paper on this, titled something like "precedence ain't
parsing", that will hopefully end up on antlr.org someday.

- Bryan Ewbank
"The best tool for requirements analysis and design is a crayon" 


Alexey Demakov said:
> My idea is to build some "flat" tree for ambiguous portions 
> of input, i.e. all input tokens should be children of one root node.
>
> So at the second pass we can run parser on list of children 
> and build subtree. It's only idea, I can't get you more details
> on implementation now.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ewbank at synopsys.com  Wed Nov 24 08:57:05 2004
From: ewbank at synopsys.com (Bryan Ewbank)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Space in values (need more info)
In-Reply-To: <1E1E0B9826A3FA4CB384D1E79DF7480A04BE14@ECLU574.nt.mobile.belgacom.be>
Message-ID: <200411241655.LAA15850@us54.synopsys.com>


> Thanks for the help, but ... I don't see what you mean...
> Need to parse the following input:
> 
> PRIORITY = "3"
> REQ_USER_ID = "PTS JDA"
> REQ_PROC_ID = "process"
> 
> As you can see, there is a space in second quoted string.
> With the following grammar, I am getting stuck on that space.
> How can I improve the grammar to detect space in this quoted 
> string and get back the value ?

Don't do this in the grammar; have the scanner eat STRING as a unit instead.
What I use is like this:

	protected ESC: '\\' ( 'f' | 'r' | 't' | '"' | '\\' );
	STRING: '"' ( ESC | ~('\\' | '"') )* '"';

Now the parser sees STRING as a single token - and the text of the STRING
will be the entire string - including the leading and trailing " characters,
as well as any white space in the middle.

- Bryan Ewbank
"The best tool for requirements analysis and design is a crayon" 




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Wed Nov 24 08:45:26 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] new line character rule
In-Reply-To: <20041124163002.64734.qmail@web25207.mail.ukl.yahoo.com>
Message-ID: <Pine.LNX.4.44.0411240834030.18815-100000@g4.pauljlucas.org>


On Wed, 24 Nov 2004, dsfsdf fdsfdsf wrote:

> NL: ( '\n' | '\r');

	I believe that should be:

		NL: ('\r')? '\n' ;

	Unix newlines are just '\n', so having '\r' optional works fine.
	Windows newlines are "\r\n", so, again, the above works fine.

	Or, since both have '\n' in them, you can treat '\r' as any
	other whitespace and not as part of a newline, i.e., a newline
	only is '\n'.

	Hence, I don't think the example in the ANTLR documentation is
	optimal.

	- Paul

	P.S.: Mac newlines back in the OS9 days were just '\r', but
	since OSX and the fact that OSX is *nix, IMHO coding for just
	'\r' is no longer necessary.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Wed Nov 24 09:51:36 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Re: treecc: AOP Approach to Writing Compilers
In-Reply-To: <027c01c4d245$22b61070$8cc79553@marlboro>
References: <co2d1t+h5r9@eGroups.com>
	<027c01c4d245$22b61070$8cc79553@marlboro>
Message-ID: <16804.51752.900370.127399@despot.non.net>


>>>>> "Alexey" == Alexey Demakov <demakov@ispras.ru> writes:
[...]

>> I didn't get the AOP-ness though. I though it was just a tree builder.
>> Perhaps I missed something.

> The second link describes the tree?? way of tree processing.

Hmm... Sorry but I really don't understand your "AOP" comments either.  Can
you explain with more detail?

Certainly there are natural "aspects" in a grammar based approach such as
the grammar structure itself but I'm certainly not going to call that AOP
compiler writing.

Thanks,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From mtiller at ford.com  Wed Nov 24 10:07:09 2004
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] treecc: AOP Approach to Writing Compilers
Message-ID: <FD35CB8B26F9534E86D1AC31F401AB340483FDDD@na1fcm52.dearborn.ford.com>


Alexey,

  Thanks for posting this.  This is quite interesting.  Many of my ML
friends gush about being able to do things like this in ML.  I suspect
there is room to bring the sort of exhaustive pattern machine and
high-level type descriptions of ML into a more mainstream environment
like ANLTR.

  Have you given any thought to implementing these kinds of pattern
matching features in TreeDL?!  I'm already quite interested in TreeDL
but pattern matching capabilities would be a fascinating addition.

  I'm no compiler expert, but I can't help but see lots of related but
not quite cohesive ideas floating around on this subject.  The recent
thread on tree grammars (to use or not to use) plus the comments I've
gotten from my ML friends along with my own experiences gives me the
sense that perhaps there is a way to formulate these ideas in a more
universal way.  Personally, I like the pattern matching approach in ML
because it seems like something that can be analyzed more (e.g. for
holes) than a tree grammar.  It also seems like it maps more to the
compilation stages (type inference, constant folding, etc).  But I'll
say it again "I'm no compiler expert".

  Thanks again.

P.S. - I don't quite see the AOP part of Treecc.  It really just seems
like a high-level data model language that supports code generation for
the underlying data structures.  Of course, I still don't get AOP so
maybe that is why I can't see it.

--
Mike

> -----Original Message-----
> From: Alexey Demakov [mailto:demakov@ispras.ru]
> Sent: Wednesday, November 24, 2004 11:29 AM
> To: ANTLR
> Subject: [antlr-interest] treecc: AOP Approach to Writing Compilers
> 
> 
> I've found another tool for specification of heterogenous tree
> http://www.southern-storm.com.au/treecc.html
> 
> It uses AOP approach mentioned during our discussion on tree
processing:
> http://www.southern-storm.com.au/treecc_essay.html
> 
> Very interesting, I wonder why haven't seen it before.
> 
> It is used in DotGNU Portable.NET, so seems to be stable enough.
> 
> Btw, I've just released TreeDL 1.0...
> 
> Regards,
> Alexey
> 
> -----
> Alexey Demakov
> TreeDL: Tree Description Language: http://treedl.sourceforge.net
> RedVerst Group: http://www.unitesk.com
> 
> 
> 
> 
> 
> Yahoo! Groups Links
> 
> 
> 
> 
> 
> 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Wed Nov 24 10:22:39 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Issue & bug tracking for ANTLR
In-Reply-To: <OFA6BA3D78.64018AF0-ONC1256F56.0024F6CB-C1256F56.00261262@qem.it>
References: <OFA6BA3D78.64018AF0-ONC1256F56.0024F6CB-C1256F56.00261262@qem.it>
Message-ID: <D28C09A9-3E45-11D9-A398-000A95891192@cs.usfca.edu>


Hi, thanks.  I may use a java-based solution or might spend a few days 
and build my own tailored system.  Probably can get a good student to 
build it. :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Wed Nov 24 10:27:12 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] new line character rule
In-Reply-To: <Pine.LNX.4.44.0411240834030.18815-100000@g4.pauljlucas.org>
References: <Pine.LNX.4.44.0411240834030.18815-100000@g4.pauljlucas.org>
Message-ID: <757BEBA8-3E46-11D9-A398-000A95891192@cs.usfca.edu>



On Nov 24, 2004, at 8:45 AM, Paul J. Lucas wrote:

>
> On Wed, 24 Nov 2004, dsfsdf fdsfdsf wrote:
>
>> NL: ( '\n' | '\r');
>
> 	I believe that should be:
>
> 		NL: ('\r')? '\n' ;

Yes, I use this version myself now.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From eddie_antlr at yahoo.co.uk  Wed Nov 24 10:39:50 2004
From: eddie_antlr at yahoo.co.uk (dsfsdf fdsfdsf)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] new line character rule
In-Reply-To: <757BEBA8-3E46-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <20041124183950.4780.qmail@web25205.mail.ukl.yahoo.com>

Hi
ok i tried that but i still have errors.
when i make this rule aswell as the white space rule, my output doesn't generate, if i even set the NL to skip it doesn't output.
If i set the WS to skip and hide the NL I generate no output.
I hide these tokens from the filter when i use them.
I could make NL protected but i need to reference a NL token later on.
Any ideas why this is happening?
thanks
ed.


Terence Parr <parrt@cs.usfca.edu> wrote:


On Nov 24, 2004, at 8:45 AM, Paul J. Lucas wrote:

>
> On Wed, 24 Nov 2004, dsfsdf fdsfdsf wrote:
>
>> NL: ( '\n' | '\r');
>
> I believe that should be:
>
> NL: ('\r')? '\n' ;

Yes, I use this version myself now.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!






Yahoo! Groups Links








		
---------------------------------
 ALL-NEW Yahoo! Messenger - all new features - even more fun!  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041124/2b8e66a0/attachment.html
From ewbank at synopsys.com  Wed Nov 24 10:44:40 2004
From: ewbank at synopsys.com (Bryan Ewbank)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Issue & bug tracking for ANTLR
In-Reply-To: <D28C09A9-3E45-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <200411241843.NAA22548@us54.synopsys.com>


Ter said, in response to a request for bug/issue tracking:
> Hi, thanks.  I may use a java-based solution or might spend a 
> few days and build my own tailored system.  Probably can get 
> a good student to build it. :)

Ack!  Is that NIH rearing it's head?  Why not something that already lives?

- Bryan Ewbank
"The best tool for requirements analysis and design is a crayon" 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From jmcclain at tcshealthcare.com  Wed Nov 24 11:01:36 2004
From: jmcclain at tcshealthcare.com (John MccLain)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] antlr newbie - I need help on this one
Message-ID: <JMEOIPJEDGMHCIOMBHLIMEDBDHAA.jmcclain@tcshealthcare.com>



Howdy,
Here is my problem:
I have list of ~150 powerbuilder functions that I need to translate into
their associated Java function calls.
I do not need to translate the entire powerscript language, I am only
translating powerscript expression.
Here is an example of a typical expression that would need to be translated:

left(gf_RetrieveValue( 'patient', 'phone',
'patient_identity='+string(gf_GetPatientIdentity( )), 'No Phone Number on
File' ),3)+'-'+mid(gf_RetrieveValue( 'patient', 'phone',
'patient_identity='+string(gf_GetPatientIdentity( )), 'No Phone Number on
File' ), 0, 100)

the function prototypes would be:

left(String s, int n) => return a string of the leftmost 3 chars
gf_RetrieveValue(String table, String column, String whereClause, String
default) => returns a string from a table/field/whereclause in a DB
string(int n)=> converts into to string
gf_GetPatientIdentity( )=> Returns an int. This would be the patientID in
the current context
mid(String s, int start, int length)=>returns subtring of s starting from
start and ending at length

Some of these functions do not have associated standard java function calls
(e.g., gf_RetrieveValue), so I would have to write them.

All function parameters can themselves be string or numeric expressions

I do not wish to compute the values of the expressions, as they could be
dependent on data that would not be available in the running context. I only
wish to generate the associated java specific translation. This translation
along with a condition under which to execute the code will be put into a
format that will be sent to a rules engine (http://www.drools.org/) for
processing.


Is there any easy way to do this???

Is there an example/tutorial out there of something similar to this?

What would be a good way to approach this problem?

I have ~ 1.5 months to get this done, and it's been a long time since class
141, compiler construction!

John McClain
Senior Software Engineer
TCS Healthcare
jmcclain@tcshealthcare.com
(530)886-1700x235
"Before you criticize someone, walk a mile in their shoes.
That way, you'll be a mile from them, and you'll have their shoes."



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Wed Nov 24 11:29:43 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Issue & bug tracking for ANTLR
In-Reply-To: <200411241843.NAA22548@us54.synopsys.com>
References: <200411241843.NAA22548@us54.synopsys.com>
Message-ID: <317C3FF9-3E4F-11D9-A398-000A95891192@cs.usfca.edu>


On Nov 24, 2004, at 10:44 AM, Bryan Ewbank wrote:
> Ter said, in response to a request for bug/issue tracking:
>> Hi, thanks.  I may use a java-based solution or might spend a
>> few days and build my own tailored system.  Probably can get
>> a good student to build it. :)
>
> Ack!  Is that NIH rearing it's head?  Why not something that already 
> lives?

Ok, i'll uninvent ANTLR and StringTemplate since yacc and velocity 
already live ;)

Seriously, I build my own stuff unless I find something that is better 
than I can do (for my purposes) in a few days (you'll note that jGuru 
uses resin and lucene as I can't do better myself and certainly not in 
any kind of quick turnaround).  Case in point is my class file and byte 
code assembler I built over a few days.  No dependency on BCEL or other 
programs when installing antlr and my stuff is smaller.  Further, it 
was fun!

Remember my opinion of most "free" software ;)  I get frustrated and 
then I build something to fix the situation.  Note that I'm conversing 
with Matt Benson at the moment to create HumAnt, a human readable 
version of Ant with its filthy xml spec.  Oddly enough what I came up 
with looks like make w/o the whitespace issue. ;)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From atripp at comcast.net  Wed Nov 24 11:55:04 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <41A49409.8010907@yahoo.gr>
Message-ID: <co2ouo+fv94@eGroups.com>



Anakreon,
Thanks again for the input. Just a few comments.

> I think the domain is source->source translation.

After all this discussion, I'm starting to think of my thing
as at a bit higher-level than other translators (at least
ASPA). Yes, I do the simple stuff, but I'm mostly doing
the "rewrite this C code in the way a human would rewrite it".
That includes stuff like:
* replace all library calls
* replace return-error-codes with exception handling
* remove all gotos
* replace enum/struct/union with a new class
* replace all pointers (by far the most complicated part of my app)
* restructure code (refactoring) to fit the Java style
* rename files, vars, methods to follow Java conventions
etc.

So I'd like to call my thing a "language rewriter" rather than
"language translator". Where "rewrite" here means "This C
code is a mess, let's rewrite it in Java", not "term rewriting".

> The way of thinking is a matter of idiosynkrasi (I hope
> this is the English word)
Idiosyncratic, I guess.

> Hard problem but application specific. 

Isn't *everything* application specific? I mean If we're translating
from language A to B, and that's all we know so far, 
is there anything that we know needs to be done?
Even using a lexer or parser may not be necessary.

> An import may be required for the translated code in ASPA
> too. In the XML file, a requirement for an import can be defined
> for a class (if any member of the class is called an require 'file'
> statement is generated), for a member (only if the member is called
> the 'require' is generated) or a function. 

I had thought of doing it that way, too, but decided against it.
I didn't want to constantly have to worry about what
"import-needed" classes each rule might need. So I just
have a single rule at the end that has a list of all the
"import-needed" classes (kept in a file that's generated
from the Java source via a doclet - pretty cool),
 and searches for them.

> > I would
> > guess there are a few more situations where I have to
> > do various transformations involving DOT. If so, I'd
> > have to add even more unrelated cases to this one "DOT" place in
> > the code. That's slicing the problem the wrong way.
> How can we discuss the right way of slicing a problem
> in an objective way?

Yea, good point. Now I tend to think that my problem with
treewalkers is just due to my (possibly unique) approach.
As I mentioned elsewhere, perhaps my "translator" is functioning
more like a natural language translator.

> > 
> > 
> >>This is very important because from the grammar definition
> >>I can be sure that only those 3 cases can occur.
> > 
> > 
> > Yea, I can appreciate that. You're sure you've handled
> > every possible input. But on the other hand, you're not
> > at all sure that you've handled all the cases.
> > For example, you surely have one place in the grammar
> > that handles the "+" binary operator. You know you
> > have things covered by covering that one case with, say,
> > a call to a handleBinaryPlus() method. But what does that
> > method do? Does it:
> > * remove redundant zeros (x+0 and 0+x become x)
> > * simplify expressions (x + -1 becomes x - 1)
> No. ASPA is not a code optimizer but a translator.

Right, and mine is a "rewriter" - and a human wouldn't write
"x+0", so I refactor stuff like that. 
(Note that this "x+0" is the example used by Terence
in his guide to treewalkers.

> > * record the fact that each operand is involved in an arithmatic
> >   operation (and thus better not get it's type changed to boolean)
> ASP and PHP(fortunately) are loosely typed languages. But still some
> translating decisions are based on the types of the operands.
> The way to handle this is based on heuristic methods and is not
guarantied
> to be always successful.
> > * combine consecutive string concatenation where possible ("a" + "b" 
> >    becomes just "ab")
> This can be done but I didn't do it. An other thing are expressions
> like
> a = " there"
> Response.write "hello" & a 'prints hello there
> which in PHP can be simplified into:
> print("hello$a")
> I didn't do this because I'm not sure a user of the
> program would think of it as a feature. He could prefer
> to have print("hello" . $a) instead. But it can be easily done.

Yes, I don't do that one either, but I do similar stuff.
I have 19 rules (written in Java - more that are just written
with simple text) witch just do this "normalization"
(changes that do not change functionality, but just clean up
the structure), like add braces around "then" and "else" clauses,
combine statements where appropriate, remove commas within
"for" clauses, etc.

.
> 
> > Isn't it more natural to have a separate rule for each of the
> > above items? That way, 1) we avoid having this handleBinaryPlus()
> > method performing 4 completely unrelated functions, and 2)
> > we avoid having the "change x from int to boolean" logic
> > split across handleBinaryPlus() and other functions.
> A matter of taste I'm afraid.

It's also a matter of degree, I think.
I suspect that most of the actions that fire within your grammar
only have a single "rule to apply" or at most two or three.
For me, just the fact that I have hundreds of rules and only
about 70 non-terminals in the grammar, means that I have
at least a few "rules" that apply at each grammar node.

> 
> > I just don't see the advantage of this "fire a rule at each
> > node" approach. As I look through my rules, almost none
> > of them involve a single node in the tree.
> Example:
> a = "one" + true + "two" + new Date() + "three" + 5
> (EXPR (ASSIGN a (PLUS (PLUS (PLUS (PLUS (PLUS one true) two) (NEW
DATE ELIST)) three) 5)
> The translated one:
> (EXPR (ASSIGN a (CONCAT (CONCAT (CONCAT (CONCAT (CONCAT one true)
two) [METHOD_CALL, getdate]) three) 5)
> Except for the deepest PLUS, there are single node operands involved.
> But each time PLUS rule is called it only cares about the [guessed] type
> of it's operands. 

Ahhh...good example! To translate that line to Java, you've
got to first convert each of the non-string operands to
a String. To do that, you've got to know something about
what "new Date()" evaluates to, as well as what the other
operands evaluate to. You would need to change "new Date()"
to something, perhaps quite different, but ONLY do that
change because the "new Date()" appears inside an expression
involving "+" where the expresion will be String type. You cannot
just blindly convert "new Date()" to something without
knowing the context (maybe you can if you're just trying to
produce code that works, but not if you're trying to
write code that looks hand-written).

> > And even when 
> > rules do involve a single node, I don't want to mix
> > them together. For example, one rule removes the "u"
> > in "123u" (java doesn't have unsigned types). And another
> > removes the "L" in "123L" (because a C long is [usually]
> > an Java int). Yes, I can have one handleNumber() method
> > fire at the NUMBER node that does both of these. But
> > I'd rather not slice the problem that way. Instead, I'd
> > like the NumberWithURule to traverse the AST and make its
> > changes, and the NumberWithLRule to traverse the AST and
> > make its changes.
> ASPA is single pass, but you could do those transformations
> mentioned above in many passes.

And how many passes (and associated tree-grammars) do I have to
have before it becomes a total mess? 10? 50?
I really don't want to keep track of all those rules each
doing multiple passes.
(say the "new Date()" conversion rule relies on the first
pass to find the "new Date()" pattern, another pass to
check the local context, a third pass to add some
"import" that the Date() class might need)

Andy





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ewbank at synopsys.com  Wed Nov 24 11:57:59 2004
From: ewbank at synopsys.com (Bryan Ewbank)
Date: Mon Dec 20 16:17:39 2004
Subject: [antlr-interest] sometimes ya just gotta smile
Message-ID: <200411241956.OAA27425@us54.synopsys.com>


How many other people have been bit by having a grammar production named
"operator" while using C++?  I stared at the code for quite a while before
realizing that:
	public: void operator()
is an illegal class member attempting to overload the function interface to
the class object.

Oh boy; time to go home.

- Bryan Ewbank
"The best tool for requirements analysis and design is a crayon"



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Wed Nov 24 12:04:18 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] sometimes ya just gotta smile
In-Reply-To: <200411241956.OAA27425@us54.synopsys.com>
Message-ID: <Pine.LNX.4.44.0411241203440.18815-100000@g4.pauljlucas.org>


On Wed, 24 Nov 2004, Bryan Ewbank wrote:

> How many other people have been bit by having a grammar production named
> "operator" while using C++?

	Or, in my case, one named "import" while using Java.  (The
	XQuery language has an "import" statement.)

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Wed Nov 24 12:43:26 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] Re: Issue & bug tracking for ANTLR
In-Reply-To: <317C3FF9-3E4F-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <co2rpe+hgf@eGroups.com>



--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> On Nov 24, 2004, at 10:44 AM, Bryan Ewbank wrote:
> > Ter said, in response to a request for bug/issue tracking:
> >> Hi, thanks.  I may use a java-based solution or might spend a
> >> few days and build my own tailored system.  Probably can get
> >> a good student to build it. :)
> >
> > Ack!  Is that NIH rearing it's head?  Why not something that already 
> > lives?

Scarab <http://scarab.tigris.org/> gets pretty good reviews as being
easy to install, full-featured, and easy to use.  It is implemented
via Java Servlets.

> Ok, i'll uninvent ANTLR and StringTemplate since yacc and velocity 
> already live ;)

Apples and oranges.  ANTLR (nee PCCTS) is a significant step up over
table-driven LALR and parse trees.  StringTemplate sounds like (I
still haven't used it yet--something to learn this weekend) a novel
paradigm which also makes life easier.

> Seriously, I build my own stuff unless I find something that is better 
> than I can do (for my purposes) in a few days (you'll note that jGuru 
> uses resin and lucene as I can't do better myself and certainly not in 
> any kind of quick turnaround).  Case in point is my class file and byte 
> code assembler I built over a few days.  No dependency on BCEL or other 
> programs when installing antlr and my stuff is smaller.  Further, it 
> was fun!
> Remember my opinion of most "free" software ;)  I get frustrated and 
> then I build something to fix the situation.  Note that I'm conversing 

C'mon Ter--how many years have you lived off of Sun Java?  The above
is a neanderthal view, which you don't really practice--there is an
incredible amount of professionally written free software out there
these days.  Some of it is corporate flagship software released as
Open Source (eclipse, Java, OpenOffice, ...), some of it is useful
software tools which probably would either not be commercially
viable--it is hard to make money selling software tools these days--or
are to advance the state of the practice (JUnit and ArgoUML are good
examples of this), some of it is free because the underlying design
concepts are still undergoing evolution, and some of it is free as a
means of advertising professional skills.  User support for Open
Source software is often better than for an equivalent commercial
product--and, for software with active developers, the Open Source
product has a good chance of surpassing the commercial competition.

That said, there is also a considerable amount of non-professional,
single-developer software out there that is not well written.  Part of
the effort in adopting any software is that you have to do a product
analysis.  Is the software mature?  Is there a likelihood of support?
 Is there an active developer community?  And it ain't just the free
software for which that applies--there is a fair amount of dreck being
marketed commercially.  Caveat emptor!

> with Matt Benson at the moment to create HumAnt, a human readable 
> version of Ant with its filthy xml spec.  Oddly enough what I came up 
> with looks like make w/o the whitespace issue. ;)

Gack!!!  One of the nice things about modern IDEs is that they
generate Ant or make code for you, and provide wizards to guide you
through the rarely used ("advanced") features when needed.  Textual
representations of dependency relationships are good for processing,
but mediocre for communicating to humans.  The "filthy xml spec" is a
feature--it is just enough pain that people have been driven to put
together friendly GUI front ends.  Makefiles are traditionally
incomprehensible to the average user--how would HumAnt be an
improvement with a make-like syntax?

Cheers!

--Loring

> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Wed Nov 24 13:11:07 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] Re: treecc: AOP Approach to Writing Compilers
In-Reply-To: <027c01c4d245$22b61070$8cc79553@marlboro>
Message-ID: <co2tdb+ighb@eGroups.com>



--- In antlr-interest@yahoogroups.com, "Alexey Demakov" <demakov@i...>
wrote:

> > > I've found another tool for specification of heterogenous tree
> > > http://www.southern-storm.com.au/treecc.html

<SNIP>

> > I looked at it a couple of years ago. It seemed easy to use and useful
> > but it was tied to a Yacc-ish way of life. Sigh...
> 
> I don't see any dependencies on yacc. Only % in notation.
> But I'm reading treecc docs only about a hour :)

That [dependency] seems to have disappeared (or perhaps I was wrong
and it never existed). I see treecc can now generate code for
languages other than C too. Treecc has changed a lot I see...

> > I didn't get the AOP-ness though. I though it was just a tree builder.
> > Perhaps I missed something.
> 
> The second link describes the tree?? way of tree processing.

I read both. Can't quite agree it's AOP. Nevermind, it seems useful
[at last] in any case. One for the check-this-out list...

Cheers!

Micheal






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From H.A.M.Maassen at student.tue.nl  Wed Nov 24 13:52:18 2004
From: H.A.M.Maassen at student.tue.nl (Maassen, H.A.M.)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] sometimes ya just gotta smile
Message-ID: <1C5C690C06EFE244B83E3F133CA70BDE9F852E@studentex6.campus.tue.nl>


> From: Bryan Ewbank [mailto:ewbank@synopsys.com]
> ..
> How many other people have been bit by having a grammar 
> production named
> "operator" while using C++?

I had a "string" production for a couple of seconds :)

Je vous prie d'agr?er, madame, monsieur, l'expression de mes sentiments
distingu?s, Harald Maassen


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From iank at bearcave.com  Wed Nov 24 13:57:36 2004
From: iank at bearcave.com (iank@bearcave.com)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] Re: HumAnt (XML is evil and other non-ANTLR topics)
Message-ID: <200411242157.iAOLvaC08860@shell2.webquarry.com>



> Note that I'm conversing with Matt Benson at the moment to create
> HumAnt, a human readable version of Ant with its filthy xml spec.
> Oddly enough what I came up with looks like make w/o the whitespace
> issue. ;)

  Yet another example that Terence rocks!

  I recall that in the early days XML was described as a format for
  computer communication, not for humans to read and write.  Yet we
  now find ourselves in a world where we're writing XML all them
  time.  Resin uses an XML configuration file, SOAP uses an XML
  configuration file.  My colleagues build tools that read human
  written XML.  And then there is Ant, that also takes XML as input.
  Yech!  HumAnt sounds like a great idea.  XML as a language is very
  awkward.

  Ian


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Wed Nov 24 14:05:57 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] Re: HumAnt (XML is evil and other non-ANTLR topics)
In-Reply-To: <200411242157.iAOLvaC08860@shell2.webquarry.com>
Message-ID: <co30k5+822h@eGroups.com>



--- In antlr-interest@yahoogroups.com, iank@b... wrote:

<SNIP>

>   And then there is Ant, that also takes XML as input.
>   Yech!  HumAnt sounds like a great idea.

Only as a Ant preprocessor. Why re-invent the [Ant] wheel hey?.

In any case, who would maintain a forked HumAnt version of Ant in
future when Ter is busy with ANTLR3, StringTemplate, lectures, new
projects etc...

Micheal
ANTLR/C#





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Wed Nov 24 14:48:01 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] Re: HumAnt (XML is evil and other non-ANTLR topics)
In-Reply-To: <co30k5+822h@eGroups.com>
References: <co30k5+822h@eGroups.com>
Message-ID: <E5068CC0-3E6A-11D9-8238-000A95891192@cs.usfca.edu>



On Nov 24, 2004, at 2:05 PM, micheal_jor wrote:

>
>
> --- In antlr-interest@yahoogroups.com, iank@b... wrote:
>
> <SNIP>
>
>>   And then there is Ant, that also takes XML as input.
>>   Yech!  HumAnt sounds like a great idea.
>
> Only as a Ant preprocessor. Why re-invent the [Ant] wheel hey?.
>
> In any case, who would maintain a forked HumAnt version of Ant in
> future when Ter is busy with ANTLR3, StringTemplate, lectures, new
> projects etc...

No worries folks...just doing a preprocessor that hooks into ant 
directly ;)   Trying to make a statement.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From gudnabrsam at yahoo.com  Wed Nov 24 18:48:03 2004
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] Re: HumAnt (XML is evil and other non-ANTLR topics)
In-Reply-To: <co30k5+822h@eGroups.com>
Message-ID: <20041125024803.12443.qmail@web20428.mail.yahoo.com>


--- micheal_jor <open.zone@virgin.net> wrote:
> --- In antlr-interest@yahoogroups.com, iank@b...
> wrote:
> <SNIP>
> >   And then there is Ant, that also takes XML as
> input.
> >   Yech!  HumAnt sounds like a great idea.
> 
> Only as a Ant preprocessor. Why re-invent the [Ant]
> wheel hey?.
> 
> In any case, who would maintain a forked HumAnt
> version of Ant in
> future when Ter is busy with ANTLR3, StringTemplate,
> lectures, new
> projects etc...

Indeed.  Fear not, Micheal... know that there are
basically two ways to implement HumAnt without
necessitating ongoing maintenance.  First, Ant is
structured to allow pluggable Project configuration so
that HumAnt could provide an implementation of a class
called ProjectHelper.  This might allow more freedom
in the syntax definition although I don't expect there
to be much freedom to be won from the basic concepts
of XML attributes and elements.  A second and simpler
option is, as you seem to suggest, to implement HumAnt
so that it provides a SAX Parser implementation,
emitting XML events from non-XML input.  Perhaps a
hack but also much easier to implement...

-Matt
> 
> Micheal
> ANTLR/C#
> 
> 
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
>     antlr-interest-unsubscribe@yahoogroups.com
> 
>  
> 
> 
> 
> 



	
		
__________________________________ 
Do you Yahoo!? 
Yahoo! Mail - You care about security. So do we. 
http://promotions.yahoo.com/new_mail


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From silverio.di at qem.it  Wed Nov 24 23:35:29 2004
From: silverio.di at qem.it (silverio.di@qem.it)
Date: Mon Dec 20 16:17:40 2004
Subject: Rif: Re: [antlr-interest] Issue & bug tracking for ANTLR
In-Reply-To: <D28C09A9-3E45-11D9-A398-000A95891192@cs.usfca.edu>
Message-ID: <OF5EC48EFF.EAD0B256-ONC1256F57.0028F9CB-C1256F57.002A2E4C@qem.it>







Terence Parr <parrt@cs.usfca.edu> wrote:
>
> Hi, thanks.  I may use a java-based solution or might spend a few days
> and build my own tailored system.  Probably can get a good student to
> build it. :)

I often like to write by myself existing products so they meet better
my requirements, but this is possible (unfortunately) only for little
projects (in my realty).

Actually, in the past, I've bugun to write a bugtracking using Delphi +
Web services for Apache with SOAP layer. After a lot I've saw many
and many weeks of jobs to obtain a beta product (a good bugtracking
system isn't so simple). When I've saw MantisBT already done and
working, product of many years of opensource work I've decided to
stop my adventure and use that, saving my energies and time to
more exciting projects...



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From arnarb at oddi.is  Thu Nov 25 00:42:20 2004
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] Issue & bug tracking for ANTLR
Message-ID: <s1a59af7.007@emil.oddi.is>


Hi there,

>>> parrt@cs.usfca.edu 24.11.2004 18:22:39 >>>
> Hi, thanks.  I may use a java-based solution or might spend a few
days 
> and build my own tailored system.  Probably can get a good student to

> build it. :)

I'd recommend that you check out Trac
(http://projects.edgewall.com/trac/). It handles tickets, roadmap
milestones and integrates closely to SVN version control. Even if you'd
rather write your own, it's a good place to get ideas :o)

Arnar



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Thu Nov 25 01:52:46 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] Re: Translators Should Use Tree Grammars
In-Reply-To: <co2ouo+fv94@eGroups.com>
Message-ID: <co4a1e+ha6t@eGroups.com>



--- In antlr-interest@yahoogroups.com, "atripp54321" <atripp@c...> wrote:
> 
> Anakreon,
> Thanks again for the input. Just a few comments.
> 
> > I think the domain is source->source translation.
> 
> After all this discussion, I'm starting to think of my thing
> as at a bit higher-level than other translators (at least
> ASPA).

<SNIP>

> So I'd like to call my thing a "language rewriter" rather than
> "language translator". Where "rewrite" here means "This C
> code is a mess, let's rewrite it in Java", not "term rewriting".

<SNIP>

> Yea, good point. Now I tend to think that my problem with
> treewalkers is just due to my (possibly unique) approach.
> As I mentioned elsewhere, perhaps my "translator" is functioning
> more like a natural language translator.

Andy,

This paper offers some insight into some of the techniques used in the
field:

   A Survey of Strategies in Rule-Based Program Transformation Systems
   by Eelco Visser (pub. 2004)
     -- http://www.cs.uu.nl/~visser/ftp/Vis04-survey.pdf

ANTLR's tree grammar approach is included. For those too busy too read
it all, tree parsers are noted as not supporting the separation of
[tranformation] rules,  [rule application] strategies and generic tree
traversals.

Cheers!

Micheal
ANTLR/C#





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Anthony.Youngman at ECA-International.com  Thu Nov 25 03:32:20 2004
From: Anthony.Youngman at ECA-International.com (Anthony Youngman)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] Re: Issue & bug tracking for ANTLR
Message-ID: <C7FE35004D40FD45AA342991B88CE40409B09A@lnml1.eca-international.local>


I came across an interesting article a while back, which said that a lot
of nix people are very literary. Plays on words are very common in nix
but not elsewhere - where else would you get a mail client called
"mutt", or "biff" (allegedly, the name of the author's dog)?

One of the *infuriating* things about modern computing is that GUIs dumb
it down so much that EVERYBODY is treated like an idiot and experts
aren't allowed to get on with the job.

I'll give you that wizards *can* be useful (and that XML was *not*
designed to be read or written by humans in the normal course of events
... :-), but - and I don't mean this badly - can I give you the
following thought: "the average user is incompetent". So don't hamstring
the experts with GUIs and IDEs designed for idiots.

NB - I'd class myself as both "average" *and* "incompetent" as far as
ANTLR goes - so no disrepect there, and as for anything in general, just
look at car drivers, or UK customer service, or most things. For a
professional example, look at lawyers - why are the good ones expensive?
Because there are so few! I'd guess that's true of pretty much ANY human
endeavour ...

Cheers,
Wol

-----Original Message-----
From: lgcraymer [mailto:lgc@mail1.jpl.nasa.gov] 
Sent: 24 November 2004 20:43
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Issue & bug tracking for ANTLR


Gack!!!  One of the nice things about modern IDEs is that they
generate Ant or make code for you, and provide wizards to guide you
through the rarely used ("advanced") features when needed.  Textual
representations of dependency relationships are good for processing,
but mediocre for communicating to humans.  The "filthy xml spec" is a
feature--it is just enough pain that people have been driven to put
together friendly GUI front ends.  Makefiles are traditionally
incomprehensible to the average user--how would HumAnt be an
improvement with a make-like syntax?

Cheers!

--Loring



****************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 8272 5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

****************************************************************************



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From H.A.M.Maassen at student.tue.nl  Thu Nov 25 05:36:41 2004
From: H.A.M.Maassen at student.tue.nl (Maassen, H.A.M.)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] Storing ambiguity in the tree
Message-ID: <1C5C690C06EFE244B83E3F133CA70BDE285863@studentex6.campus.tue.nl>

Thanks for the suggestions,
 
so if I understand correctly, you propose parsing the source file and storing the 
statements-part of the code as a flat tree. Then, in a second pass (using a 
TreeParser), do the actual parsing of the statements (using a symbol table from the 
first pass).
 
I have two problems with this:
 
-) First off is a practical problem: I can't get the treeparser to decently build 
trees :(
It won't allow the "^" operator, and commands like "{ ## = ([VIRT, "VIRTUAL"], ##); }" 
cause invalid AST node type crashes. If I'm being a complete newbie here please 
help me out! :)
 
-) Second is a more theoretical problem in that it all seems a little.. awkward. The 
grammar gets spread over two parsers (and some parts copied in both), and the source
is walked twice.
This seems especially convoluted when compared to the (IMO) much more intuitive idea 
of keeping statements "on hold" until the accompanying declarations are parsed:
 
program: stats[true] decs
         { this.setTokenBuffer = mytokenbuffer; }
         stats[false]
         { this.setTokenBuffer = <the lexer>; }
       ;
 
stats[boolean buffering]
  : { buffering }? 
    ( ~("end")
      { mytokenbuffer.Add(t); }
    )*
  | <actual statement grammar>
  ;
 
decs: <declaration grammar>
    ;

While this looks more elegant to me, it doesn't seem ANTLR is very supportive of it - 
I can't find an easy way to switch the tokenbuffer back and forth (like a stack) and 
I have a bad feeling about the ramifications this will have on lookahead and 
guessing.
Any input would be greatly appreciated :)
 
Regards, Harald Maassen
 

	-----Original Message----- 
	From: Bryan Ewbank [mailto:ewbank@synopsys.com] 
	Sent: Wed 11/24/2004 5:50 PM 
	To: antlr-interest@yahoogroups.com 
	Cc: 
	Subject: RE: [antlr-interest] Storing ambiguity in the tree
	
	


	Alexey, others,
	
	I'm doing the same thing - for me, it was forced because the new language
	requires support for user-defined infix operators (with differing precedence
	and arity - ugh).  That means I have a pass that does precedence after the
	pass that does type analysis.  On the up side, it greatly simplifies the
	parser grammar:
	
	        EXPR : ( operator | terminal )* { ## = #( [EXPR,"EXPR"], ##); }
	                // EXPR node is to provide a hook for precedence pass.
	
	To take this further, I'm also recognizing if/else as separate entities,
	then rejecting (as a semantic error) any else-statement without a leading
	if-statement.
	
	I'm working also on a paper on this, titled something like "precedence ain't
	parsing", that will hopefully end up on antlr.org someday.
	
	- Bryan Ewbank
	"The best tool for requirements analysis and design is a crayon"
	
	
	Alexey Demakov said:
	> My idea is to build some "flat" tree for ambiguous portions
	> of input, i.e. all input tokens should be children of one root node.
	>
	> So at the second pass we can run parser on list of children
	> and build subtree. It's only idea, I can't get you more details
	> on implementation now.
	
	
	
	
	Yahoo! Groups Links
	
	
	
	
	
	
	
	



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 7994 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041125/da147fbb/attachment.bin
From demakov at ispras.ru  Thu Nov 25 08:39:37 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] treecc: AOP Approach to Writing Compilers
References: <FD35CB8B26F9534E86D1AC31F401AB340483FDDD@na1fcm52.dearborn.ford.com>
Message-ID: <017e01c4d30d$5a672040$8cc79553@marlboro>


From: "Tiller, Michael (M.M.)" <mtiller@ford.com>
>   Thanks for posting this.  This is quite interesting.  Many of my ML
> friends gush about being able to do things like this in ML.  I suspect
> there is room to bring the sort of exhaustive pattern machine and
> high-level type descriptions of ML into a more mainstream environment
> like ANLTR.

Unfortunately, I'm not familiar with ML :(

>   Have you given any thought to implementing these kinds of pattern
> matching features in TreeDL?!  I'm already quite interested in TreeDL
> but pattern matching capabilities would be a fascinating addition.

Generally, yes. But I think it is more 'operation over subtree' than 
pattern matching. In my understanding, pattern matching proposes that you
specify more than just a node - may be children types or attribute values -
and some engine searches tree and executes your actions in context 
of matched pattern. I don't like such engine, because prefer 
to control order of tree walking.

When processing a tree, we need some natural way to specify actions over
tree as a whole or some subtree. Action, like usual method, have signature.
Because of heterogenous tree description we don't need to repeat 
full tree structure as in ANTLR tree grammars.
But action body should be defined for each inherited node type with ability 
to use super-implementation. Translation tool should check consistence 
of action definition.

>   I'm no compiler expert, but I can't help but see lots of related but
> not quite cohesive ideas floating around on this subject.  The recent
> thread on tree grammars (to use or not to use) plus the comments I've
> gotten from my ML friends along with my own experiences gives me the
> sense that perhaps there is a way to formulate these ideas in a more
> universal way.  Personally, I like the pattern matching approach in ML
> because it seems like something that can be analyzed more (e.g. for
> holes) than a tree grammar.  It also seems like it maps more to the
> compilation stages (type inference, constant folding, etc).  But I'll
> say it again "I'm no compiler expert".

Can you write some short review of ML features that can be useful for tree
processing? At least ideas. Or point me to existing document.
I'll try to read something about ML, but not sure can find time :(

> P.S. - I don't quite see the AOP part of Treecc.  It really just seems
> like a high-level data model language that supports code generation for
> the underlying data structures.  Of course, I still don't get AOP so
> maybe that is why I can't see it.

Well, every answer on my message contains similar statement.
Let it be on conscience of author of "Treecc: An Aspect-Oriented Approach to Writing Compilers" :)
May be it is not AOP in usual sence, but I see some similarity.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From demakov at ispras.ru  Thu Nov 25 08:56:50 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] error locations: how to emulate #line functionality in Java?
Message-ID: <018a01c4d30f$c23d6470$8cc79553@marlboro>


Hi all, 

I need ideas.
After source to source translation, generated files are compiled
using, for example, Java compiler. If source file contains user-supplied
code in target language, it can cause compile time errors.
For example, it can be user actions in ANTLR grammar.
In compiler messages, error locations are in generated files.
So, often you need to look in generated parser to find out, what's wrong.
If it is not a bug in the translation tool, you see that problem is 
in your code and should be corrected in source file (*.g).
I suppose, if error location in compiler message was in source file,
you were able to correct it without having to look at generated files.
In C language there are preprocessor directive #line used by lex/yacc
that tell compiler which file name and line number should be used in error messages.
As far as I know, Java doesn't provide such functionality in any way.
So, I see the only method to emulate it is to store translation table with correspondence
between source and generated files and line numbers and translate compiler
error messages back at source level.
May be you have better ideas? If solution will be suitable not only for Java - it will be great.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Thu Nov 25 10:24:31 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] error locations: how to emulate #line functionality in Java?
In-Reply-To: <018a01c4d30f$c23d6470$8cc79553@marlboro>
References: <018a01c4d30f$c23d6470$8cc79553@marlboro>
Message-ID: <3FBCFC08-3F0F-11D9-8238-000A95891192@cs.usfca.edu>



On Nov 25, 2004, at 8:56 AM, Alexey Demakov wrote:
> In C language there are preprocessor directive #line used by lex/yacc
> that tell compiler which file name and line number should be used in 
> error messages.
> As far as I know, Java doesn't provide such functionality in any way.
> So, I see the only method to emulate it is to store translation table 
> with correspondence
> between source and generated files and line numbers and translate 
> compiler
> error messages back at source level.
> May be you have better ideas? If solution will be suitable not only 
> for Java - it will be great.

Hi,

I believe that if you toy with the .class files you can change the 
file/line info table. :)  I plan on doing that for my cyclic DFAs for 
which I generate byte codes directly.  I think I can get them to point 
back into the grammar file. :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-Yr76yOxCUOweJirw6pEVjU4 at yahoogroups.com  Thu Nov 25 10:20:42 2004
From: antlr-interest-accept-Yr76yOxCUOweJirw6pEVjU4 at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:40 2004
Subject: MODERATE -- Ralf.Callenberg@web.de posted to antlr-interest
Message-ID: <1101406842.174.51290.m11@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  Ralf.Callenberg@web.de 

The message summary:
--------------------
FROM: Ralf.Callenberg@web.de 
DATE: Thu, 25 Nov 2004 18:19:58 -0000 
SUBJECT: glib and traceparser 

Hello, 

when I specify glib and traceparser on the command line, I 
got the message 

warning: invalid command-line argument: -traceParser; 
ignored 

In other grammars, where I don't have a super grammar 
everything is fine. 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=383 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-Yr76yOxCUOweJirw6pEVjU4@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "rcallenberg" <Ralf.Callenberg@web.de>
Subject: glib and traceparser
Date: Thu, 25 Nov 2004 18:19:58 -0000
Size: 1436
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041125/7c495634/attachment.mht
From Ralf.Callenberg at web.de  Thu Nov 25 10:19:58 2004
From: Ralf.Callenberg at web.de (rcallenberg)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] glib and traceparser
Message-ID: <co57oe+ghmd@eGroups.com>




Hello,

when I specify glib and traceparser on the command line, I got the
message 

warning: invalid command-line argument: -traceParser; ignored

In other grammars, where I don't have a super grammar everything is
fine.

What's wrong here?

Greetings,
Ralf








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Thu Nov 25 10:38:22 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] Re: HumAnt (XML is evil and other non-ANTLR topics)
In-Reply-To: <20041125024803.12443.qmail@web20428.mail.yahoo.com>
References: <20041125024803.12443.qmail@web20428.mail.yahoo.com>
Message-ID: <2F57A92F-3F11-11D9-9362-000393B5606C@codetransform.com>


On Nov 24, 2004, at 6:48 PM, Matt Benson wrote:

>  A second and simpler
> option is, as you seem to suggest, to implement HumAnt
> so that it provides a SAX Parser implementation,
> emitting XML events from non-XML input.  Perhaps a
> hack but also much easier to implement...

You may find some inspiration in the XML shorthands such as YAML or 
PSLT.

Monty



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-YCICgre_SGgCxwLP9iLY6B8 at yahoogroups.com  Thu Nov 25 10:48:51 2004
From: antlr-interest-accept-YCICgre_SGgCxwLP9iLY6B8 at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:40 2004
Subject: MODERATE -- Ralf.Callenberg@web.de posted to antlr-interest
Message-ID: <1101408531.246.10217.m8@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  Ralf.Callenberg@web.de 

The message summary:
--------------------
FROM: Ralf.Callenberg@web.de 
DATE: Thu, 25 Nov 2004 18:48:35 -0000 
SUBJECT: Re: glib and traceparser 

Hello, > > when I specify glib and traceparser on the 
command line, I got the > message > > warning: invalid 
command-line argument: -traceParser; ignored 

Sorry, forget it, this warning does not seem to have a 
meaning: calls to traceIn/traceOut are generated 
nevertheless. 

Greetings, Ralf 

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=384 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-YCICgre_SGgCxwLP9iLY6B8@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "rcallenberg" <Ralf.Callenberg@web.de>
Subject: Re: glib and traceparser
Date: Thu, 25 Nov 2004 18:48:35 -0000
Size: 1511
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041125/e69ac453/attachment.mht
From parrt at cs.usfca.edu  Thu Nov 25 11:25:02 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] grammar nondeterminism warnings for 3.0
Message-ID: <B4211A34-3F17-11D9-8238-000A95891192@cs.usfca.edu>


Howdy,

I'm working on the last hard problem before I can sprint to the finish 
on basic lexing/parsing for 3.0: displaying useful information to the 
programmer about what is wrong with their grammars.  Just wrote up my 
thoughts on the 3.0 nondeterminism warning mechanism:

http://www.antlr.org/blog/antlr3/lookahead.tml

I think you'll find what I intend to provide interesting. :)

I have most of what I need to generate good messages, but I needed to 
explore what we really wanted so I can put the final touches on the 
error management system.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From anakreonmejdi at yahoo.gr  Thu Nov 25 13:13:48 2004
From: anakreonmejdi at yahoo.gr (Anakreon)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] error locations: how to emulate #line functionality
 in Java?
In-Reply-To: <018a01c4d30f$c23d6470$8cc79553@marlboro>
References: <018a01c4d30f$c23d6470$8cc79553@marlboro>
Message-ID: <41A64B0C.8060802@yahoo.gr>


I think java debugger interface provides support for
classes generated from more then one file.
This classes would be generated from compilers which produce
java byte code from other languages.

Perhaps you could use that feature, but look at sun for more
details because I might be wrong about the existence of this feature.

Anakreon


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From anakreonmejdi at yahoo.gr  Thu Nov 25 13:23:16 2004
From: anakreonmejdi at yahoo.gr (Anakreon)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] Storing ambiguity in the tree
In-Reply-To: <1C5C690C06EFE244B83E3F133CA70BDE285860@studentex6.campus.tue.nl>
References: <1C5C690C06EFE244B83E3F133CA70BDE285860@studentex6.campus.tue.nl>
Message-ID: <41A64D44.2060901@yahoo.gr>


I had a problem which might be similar to yours.
In VBScript this code: "a(2)" might be a call to function "a"
or might access an element from an array called "a".
The ambiguity is resolved in the TreeParser but the solution does
not need to store possible trees. 

Is it possible to know from the parser what is a procedure or function
declaration unambiguisly?
If so, perhaps I can help based on the solution of my own problem.

Anakreon.


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Ralf.Callenberg at web.de  Thu Nov 25 10:48:35 2004
From: Ralf.Callenberg at web.de (rcallenberg)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] Re: glib and traceparser
In-Reply-To: <co57oe+ghmd@eGroups.com>
Message-ID: <co59e3+q9ic@eGroups.com>




Hello,
> 
> when I specify glib and traceparser on the command line, I got the
> message 
> 
> warning: invalid command-line argument: -traceParser; ignored

Sorry, forget it, this warning does not seem to have a meaning: calls
to traceIn/traceOut are generated nevertheless.

Greetings,
Ralf








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From H.A.M.Maassen at student.tue.nl  Fri Nov 26 02:33:25 2004
From: H.A.M.Maassen at student.tue.nl (Maassen, H.A.M.)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] Rewriting trees
Message-ID: <1C5C690C06EFE244B83E3F133CA70BDE28586A@studentex6.campus.tue.nl>

Ok I'm stumped.. I've looked through the manual, the FAQ, but I can't figure out how to reorder trees using a treeparser.. why won't this work:

rule: "if" // ignore subtrees for now
      { ## = #([VIRT,"IF STATEMENT"], ##); }
    ;
 
How do I tell the treewalker to just copy subtrees without having to describe their exact structure?
 
rule: #("if" (.)*)  // this doesn't work :(
    ;
 
Am I missing anything? Is it right under my nose? I know it can't be this difficult...
Are there any tree-reordering examples out there? The ones I downloaded from ANTLR.org don't rewrite but rather generate code or calculate expressions or something else unrelated...
 
S.O.S., Harald Maassen


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 4114 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041126/27e4dfb6/attachment.bin
From dcaton at shorelinesoftware.com  Fri Nov 26 07:47:01 2004
From: dcaton at shorelinesoftware.com (Don Caton)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] sometimes ya just gotta smile
In-Reply-To: <200411241956.OAA27425@us54.synopsys.com>
Message-ID: <1101483903.2589@mx9.mysite4now.com>


> -----Original Message-----
> From: Bryan Ewbank [mailto:ewbank@synopsys.com] 
> Sent: Wednesday, November 24, 2004 2:58 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] sometimes ya just gotta smile
> 
> 
> How many other people have been bit by having a grammar 
> production named "operator" while using C++?  I stared at the 
> code for quite a while before realizing that:
> 	public: void operator()
> is an illegal class member attempting to overload the 
> function interface to the class object.
> 

Yep.  So will a rule like this in a lexer:

  LT: '<' ;

because of a name clash with Antlr's internal LT() method.

It would be real nice if Antlr had the option of adding an underscore or
some configurable prefix to all generated method names, i.e.:

  options
  {
     methodPrefix = "rule_";
  }

--
Regards,
 
Don Caton
Shoreline Software, Inc.
 




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Fri Nov 26 08:51:37 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] sometimes ya just gotta smile
In-Reply-To: <1101483903.2589@mx9.mysite4now.com>
References: <1101483903.2589@mx9.mysite4now.com>
Message-ID: <6FCACA8A-3FCB-11D9-8238-000A95891192@cs.usfca.edu>



On Nov 26, 2004, at 7:47 AM, Don Caton wrote:
> Yep.  So will a rule like this in a lexer:
>
>   LT: '<' ;
>
> because of a name clash with Antlr's internal LT() method.
>
> It would be real nice if Antlr had the option of adding an underscore 
> or
> some configurable prefix to all generated method names, i.e.:
>
>   options
>   {
>      methodPrefix = "rule_";
>   }

Sounds rational to me...perhaps 2.7.5?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Fri Nov 26 08:52:24 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] Rewriting trees
In-Reply-To: <1C5C690C06EFE244B83E3F133CA70BDE28586A@studentex6.campus.tue.nl>
References: <1C5C690C06EFE244B83E3F133CA70BDE28586A@studentex6.campus.tue.nl>
Message-ID: <8C05BB60-3FCB-11D9-8238-000A95891192@cs.usfca.edu>



On Nov 26, 2004, at 2:33 AM, Maassen, H.A.M. wrote:

> Ok I'm stumped.. I've looked through the manual, the FAQ, but I can't 
> figure out how to reorder trees using a treeparser.. why won't this 
> work:
>
> rule: "if" // ignore subtrees for now
>       { ## = #([VIRT,"IF STATEMENT"], ##); }
>     ;
>
> How do I tell the treewalker to just copy subtrees without having to 
> describe their exact structure?
>
> rule: #("if" (.)*)  // this doesn't work :(
>     ;
>
> Am I missing anything? Is it right under my nose? I know it can't be 
> this difficult...
> Are there any tree-reordering examples out there? The ones I 
> downloaded from ANTLR.org don't rewrite but rather generate code or 
> calculate expressions or something else unrelated...

Howdy.  First rule of using antlr: what does the generated parser look 
like?  Second, do you have builtAST on in the tree grammar?

:)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Fri Nov 26 07:51:18 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] Rewriting trees
In-Reply-To: <8C05BB60-3FCB-11D9-8238-000A95891192@cs.usfca.edu>
References: <1C5C690C06EFE244B83E3F133CA70BDE28586A@studentex6.campus.tue.nl> <8C05BB60-3FCB-11D9-8238-000A95891192@cs.usfca.edu>
Message-ID: <41A750F6.6070408@codetransform.com>


Terence Parr wrote:
> 
> On Nov 26, 2004, at 2:33 AM, Maassen, H.A.M. wrote:
> 
> 
>>Ok I'm stumped.. I've looked through the manual, the FAQ, but I can't 
>>figure out how to reorder trees using a treeparser.. why won't this 
>>work:
>>
>>rule: "if" // ignore subtrees for now
>>      { ## = #([VIRT,"IF STATEMENT"], ##); }
>>    ;
>>
>>How do I tell the treewalker to just copy subtrees without having to 
>>describe their exact structure?
>>
>>rule: #("if" (.)*)  // this doesn't work :(
>>    ;
>>
>>Am I missing anything? Is it right under my nose? I know it can't be 
>>this difficult...
>>Are there any tree-reordering examples out there? The ones I 
>>downloaded from ANTLR.org don't rewrite but rather generate code or 
>>calculate expressions or something else unrelated...
> 

Note that the tree parser builds trees as it parses.  If it doesn't 
parse -- like when you use "." -- then it will not build that tree.

Monty


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-0OZ9qjKt1lwVTRvyBe56iRk at yahoogroups.com  Fri Nov 26 15:47:28 2004
From: antlr-interest-accept-0OZ9qjKt1lwVTRvyBe56iRk at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:40 2004
Subject: MODERATE -- prashantdeva@yahoo.com posted to antlr-interest
Message-ID: <1101512848.424.43270.m25@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  prashantdeva@yahoo.com 

The message summary:
--------------------
FROM: prashantdeva@yahoo.com 
DATE: Fri, 26 Nov 2004 23:46:29 -0000 
SUBJECT: A problem with EOF. 

I am trying to give Antlr a null terminated string to parse 
using a StringReader. Something like- 

String text; .... StringReader reader = new 
StringReader(text); 

But now when the end of the string is reached, Antlr wants a
EOF instead of a null, so it throws an exception saying 
'unexpected token found : null'. 

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=385 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-0OZ9qjKt1lwVTRvyBe56iRk@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "prashantdeva" <prashantdeva@yahoo.com>
Subject: A problem with EOF.
Date: Fri, 26 Nov 2004 23:46:29 -0000
Size: 1775
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041126/3512dab9/attachment.mht
From prashantdeva at yahoo.com  Fri Nov 26 15:46:29 2004
From: prashantdeva at yahoo.com (prashantdeva)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] A problem with EOF.
Message-ID: <co8f8l+m0lg@eGroups.com>




I am trying to give Antlr a null terminated string to parse using a
StringReader. Something like-

String text;
....
StringReader reader = new StringReader(text);

But now when the end of the string is reached, Antlr wants a EOF
instead of a null, so it throws an exception saying 'unexpected token
found : null'.

Is there any way i can Antlr to look for a null instead of EOF as the
terminating character so that it doesnt throw the exception everytime?

Of course i can catch the exception everytime, but i need to parse
VERY frequently and exceptions thrown can prove very expensive.

PRASHANT








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-Rg__IZP6NoxUhugM5gMBcuE at yahoogroups.com  Fri Nov 26 17:07:13 2004
From: antlr-interest-accept-Rg__IZP6NoxUhugM5gMBcuE at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:40 2004
Subject: MODERATE -- soniya_agarwal82@yahoo.com posted to antlr-interest
Message-ID: <1101517633.423.35596.m13@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  soniya_agarwal82@yahoo.com 

The message summary:
--------------------
FROM: soniya_agarwal82@yahoo.com 
DATE: Fri, 26 Nov 2004 17:06:08 -0800 (PST) 
SUBJECT: Mahes looking for a good forever life partner 

Mahes Palaniandy Naidu 

29, Unmarried Female looking for Unmarried Male 

--------------------------------- Do you Yahoo!? Yahoo! Mail
- Helps protect you from nasty viruses.
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=386 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-Rg__IZP6NoxUhugM5gMBcuE@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: Sonia Agarwal <soniya_agarwal82@yahoo.com>
Subject: Mahes looking for a good forever life partner
Date: Fri, 26 Nov 2004 17:06:08 -0800 (PST)
Size: 3902
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041127/19bd95c6/attachment.mht
From antlr-interest-accept-P6YkEvch0fHL0RCKPZPY4Yo at yahoogroups.com  Sat Nov 27 01:32:22 2004
From: antlr-interest-accept-P6YkEvch0fHL0RCKPZPY4Yo at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:40 2004
Subject: MODERATE -- soniya_agarwal82@yahoo.com posted to antlr-interest
Message-ID: <1101547942.528.46267.m10@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  soniya_agarwal82@yahoo.com 

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=387 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-P6YkEvch0fHL0RCKPZPY4Yo@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "soniya_agarwal82" <soniya_agarwal82@yahoo.com>
Subject: you
Date: 27 Nov 2004 15:04:24 +0530
Size: 101690
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041127/0b05a848/attachment.mht
From antlr-interest-accept-QqPY1JiEtK0tiol15AGdT4s at yahoogroups.com  Sat Nov 27 01:33:14 2004
From: antlr-interest-accept-QqPY1JiEtK0tiol15AGdT4s at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:40 2004
Subject: MODERATE -- soniya_agarwal82@yahoo.com posted to antlr-interest
Message-ID: <1101547994.157.82646.m18@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  soniya_agarwal82@yahoo.com 

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=388 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-QqPY1JiEtK0tiol15AGdT4s@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "soniya_agarwal82" <soniya_agarwal82@yahoo.com>
Subject: Update
Date: 27 Nov 2004 15:05:33 +0530
Size: 113509
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041127/3b29014a/attachment.mht
From doublemalam at yahoo.co.uk  Sat Nov 27 06:11:02 2004
From: doublemalam at yahoo.co.uk (Muhammad Masoom Alam)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] how to impose evaluation
In-Reply-To: <8C05BB60-3FCB-11D9-8238-000A95891192@cs.usfca.edu>
Message-ID: <20041127141102.74481.qmail@web86904.mail.ukl.yahoo.com>


Dear all,
  
let suppose i have the rule

 start
     : (check)+
       expression
     ;
    
 check
     : rule1
      | rule2
     ;
expression
  : rule3
   | rule4
  ;

now i want that rule3 should be executed if rule1 is
the last rule executed , else rule4 
i.e. what i wanted the execution result of check rule 
should impact rule expression

 how this will b possible , i have tried with a
variable flag , but that was not successful

bye
Muhammad


	
	
		
___________________________________________________________ 
ALL-NEW Yahoo! Messenger - all new features - even more fun! http://uk.messenger.yahoo.com


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From H.A.M.Maassen at student.tue.nl  Sat Nov 27 06:21:30 2004
From: H.A.M.Maassen at student.tue.nl (Maassen, H.A.M.)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] how to impose evaluation
Message-ID: <1C5C690C06EFE244B83E3F133CA70BDE9F8533@studentex6.campus.tue.nl>


A flag should work:

>  start
>      : (check)+
>        expression
>      ;
>     
>  check
>      : rule1
         { mybool = true; }
>       | rule2
          { mybool = false; }
>      ;
> expression
>   : { mybool }? rule3
>   | { !mybool }? rule4
>   ;


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From virtualaspirin at yahoo.com  Sat Nov 27 13:26:11 2004
From: virtualaspirin at yahoo.com (Akhilesh Mritunjai)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] A problem with EOF.
In-Reply-To: <co8f8l+m0lg@eGroups.com>
Message-ID: <20041127212611.49855.qmail@web54702.mail.yahoo.com>



Off the head:

You'd need to tell ANTLR that a null is expected.

define a lexer rule:

NULL_CHAR: '\u0000';

then define your parser rule like:

text:
  subrules ... ... ... NULL_CHAR! EOF! ;

This ought to solve the problem.

- Akhilesh

--- prashantdeva <prashantdeva@yahoo.com> wrote:
> But now when the end of the string is reached, Antlr
> wants a EOF
> instead of a null, so it throws an exception saying
> 'unexpected token
> found : null'.



	
		
__________________________________ 
Do you Yahoo!? 
Yahoo! Mail - You care about security. So do we. 
http://promotions.yahoo.com/new_mail


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From doublemalam at yahoo.co.uk  Sun Nov 28 00:36:19 2004
From: doublemalam at yahoo.co.uk (Muhammad Masoom Alam)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] <AST>:0:0: expecting IDENT, found '<ASTNULL>'
In-Reply-To: <1C5C690C06EFE244B83E3F133CA70BDE9F8533@studentex6.campus.tue.nl>
Message-ID: <20041128083619.42491.qmail@web86908.mail.ukl.yahoo.com>


Dear all

during tree evaluation , we often this exception/error

<AST>:0:0: expecting IDENT, found '<ASTNULL>'
or

<AST>: expecting IDENT, found '<empty tree>'

is there is any specific reason for these errors ,
becaz program is running as well, and if tree
evaluation grammar is correct , why these errors are
comming and how we can avoid them or stop them.

i means some specfic soltuion ??

with Best Regards
Muhammad.


		
___________________________________________________________ 
Win a castle for NYE with your mates and Yahoo! Messenger 
http://uk.messenger.yahoo.com


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Sun Nov 28 01:38:12 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] Re: <AST>:0:0: expecting IDENT, found '<ASTNULL>'
In-Reply-To: <20041128083619.42491.qmail@web86908.mail.ukl.yahoo.com>
Message-ID: <coc6a4+nlia@eGroups.com>



--- In antlr-interest@yahoogroups.com, Muhammad Masoom Alam
<doublemalam@y...> wrote:
> Dear all
> 
> during tree evaluation , we often this exception/error
> 
> <AST>:0:0: expecting IDENT, found '<ASTNULL>'
> or
> 
> <AST>: expecting IDENT, found '<empty tree>'
> 
> is there is any specific reason for these errors ,

Most likely reason is that your tree grammar doesn't match the tree
structure encountered at runtime.

You can check for this by printing the AST structure (try the ASTFrame
if implementing in Java/C#) for the input. This can then be compared
to the tree grammar. 

[** For C# only, the ToTree() methods will print the tree as a text
diagram.]

Cheers,

Micheal
ANTLR/C#






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From doublemalam at yahoo.co.uk  Sun Nov 28 01:41:21 2004
From: doublemalam at yahoo.co.uk (Muhammad Masoom Alam)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] Re: <AST>:0:0: expecting IDENT, found '<ASTNULL>'
In-Reply-To: <coc6a4+nlia@eGroups.com>
Message-ID: <20041128094121.16059.qmail@web86910.mail.ukl.yahoo.com>




I have printed the tree with java frame , and and i
have constructed the tree walker according to it , but
what is specific exception that occurs , that i can
also check in the sourcecode to see the error , becaz
tree is giving the results.

u 2 cheers
Muhammad.


		
___________________________________________________________ 
Moving house? Beach bar in Thailand? New Wardrobe? Win ?10k with Yahoo! Mail to make your dream a reality. 
Get Yahoo! Mail www.yahoo.co.uk/10k


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Sun Nov 28 01:52:56 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] Re: <AST>:0:0: expecting IDENT, found '<ASTNULL>'
In-Reply-To: <20041128094121.16059.qmail@web86910.mail.ukl.yahoo.com>
Message-ID: <coc75o+fcr7@eGroups.com>



--- In antlr-interest@yahoogroups.com, Muhammad Masoom Alam
<doublemalam@y...> wrote:

DISCLAIMER: I'm replying off the top of my head here so make sure you
double-check this:

> I have printed the tree with java frame , and and i
> have constructed the tree walker according to it , but
> what is specific exception that occurs ,

It's a MismatchedTokenException. Most likely thrown in one of the
match() methods of the TreeParser class.

 that i can
> also check in the sourcecode to see the error , becaz
> tree is giving the results.

I don't fully understand what you said about the tree structure but I
do advise re-checking the tree structure for the failing input *very
carefully* against your tree grammar. That's the most likely source of
this problem imo.

Cheers!

Micheal







 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Sun Nov 28 10:04:24 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] Re: tree parsing errors (was <AST>:0:0: expecting IDENT, found '<ASTNULL>')
In-Reply-To: <20041128083619.42491.qmail@web86908.mail.ukl.yahoo.com>
References: <20041128083619.42491.qmail@web86908.mail.ukl.yahoo.com>
Message-ID: <EF85B9B4-4167-11D9-8238-000A95891192@cs.usfca.edu>



On Nov 28, 2004, at 12:36 AM, Muhammad Masoom Alam wrote:
> Dear all
>
> during tree evaluation , we often this exception/error
>
> <AST>:0:0: expecting IDENT, found '<ASTNULL>'
> or
>
> <AST>: expecting IDENT, found '<empty tree>'
>
> is there is any specific reason for these errors ,
> becaz program is running as well, and if tree
> evaluation grammar is correct , why these errors are
> comming and how we can avoid them or stop them.
>
> i means some specfic soltuion ??

Hi.  First my profuse apologies.  This tree parser error is essentially 
worthless. :(  I have a suggestion, however, until I can pay attention 
to the tree parsers.

I have my own AST node in which I store the actual token matched as a 
payload.  You need to override:

     public void initialize(Token token) {
         this.token = token;
     }

so that you can store the token in the AST node.  Then, override 
getLine so you can get line info:

     public int getLine() {
         if ( token!=null ) {
             return token.getLine();
         }
         return 0;
     }

This works great except for imaginary nodes (nodes for which there was 
no real token).  I use this as "operators" in my tree to say things 
like "the subtree is a var decl"; e.g., DECL token type.  Creating a 
token "out of thin air" means you must set it's line number to 
something sane.  You will see me do things like this in my grammar:

{declNode.setLine(line); declNode.setColumn(col);}

where I have computed line/col from another (real) token.  Then error 
messages seem to be ok :)

Also turn on -traceTreeParser and it will tell you what rule you were 
in when you got the message.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From stevegianvecchio at hotmail.com  Sun Nov 28 09:57:20 2004
From: stevegianvecchio at hotmail.com (Steve)
Date: Mon Dec 20 16:17:40 2004
Subject: [antlr-interest] ANTLRLexer.java extra local variables
Message-ID: <cod3i0+10124@eGroups.com>



There are a number of functions in ANTLRLexer.java that have a local 
variable _saveIndex that is created, but never initialized or used.  
Is this variable supposed to be used by these functions or was it 
left there by mistake?

Thanks,

Steve





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Sun Nov 28 14:13:23 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] ANTLRLexer.java extra local variables
In-Reply-To: <cod3i0+10124@eGroups.com>
References: <cod3i0+10124@eGroups.com>
Message-ID: <B83284F6-418A-11D9-8238-000A95891192@cs.usfca.edu>



On Nov 28, 2004, at 9:57 AM, Steve wrote:

>
>
> There are a number of functions in ANTLRLexer.java that have a local
> variable _saveIndex that is created, but never initialized or used.
> Is this variable supposed to be used by these functions or was it
> left there by mistake?

Used when you toy with the text of a token I believe.  I just define by 
default even if not needed.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From demakov at ispras.ru  Mon Nov 29 01:10:47 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] error locations: how to emulate #line functionality in Java?
References: <018a01c4d30f$c23d6470$8cc79553@marlboro> <3FBCFC08-3F0F-11D9-8238-000A95891192@cs.usfca.edu>
Message-ID: <017e01c4d5f3$508fb120$8cc79553@marlboro>


From: "Terence Parr" <parrt@cs.usfca.edu>
> On Nov 25, 2004, at 8:56 AM, Alexey Demakov wrote:
> > In C language there are preprocessor directive #line used by lex/yacc
> > that tell compiler which file name and line number should be used in 
> > error messages.
> > As far as I know, Java doesn't provide such functionality in any way.
> > So, I see the only method to emulate it is to store translation table 
> > with correspondence
> > between source and generated files and line numbers and translate 
> > compiler
> > error messages back at source level.
> > May be you have better ideas? If solution will be suitable not only 
> > for Java - it will be great.
> 
> I believe that if you toy with the .class files you can change the 
> file/line info table. :)  I plan on doing that for my cyclic DFAs for 
> which I generate byte codes directly.  I think I can get them to point 
> back into the grammar file. :)

It is useful for source level debugging, but I primary interested in
translation of compile-time error messages.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ewbank at synopsys.com  Mon Nov 29 06:51:21 2004
From: ewbank at synopsys.com (Bryan)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Re: how to impose evaluation
In-Reply-To: <20041127141102.74481.qmail@web86904.mail.ukl.yahoo.com>
Message-ID: <cofd19+etkk@eGroups.com>



Another way to do this, with recursion, is:

  start
    : rule1 ( rule3 | start )
    | rule2 ( rule4 | start )
    ;

This doesn't do the "want execution of one rule to alter another 
rule", but approaches the problem in a different way...


> i want that rule3 should be executed if rule1 is
> the last rule executed , else rule4 
> i.e. what i wanted the execution result of check rule 
> should impact rule expression





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-Or8OHA4wVg2JuSjgj4M8HSU at yahoogroups.com  Mon Nov 29 12:59:17 2004
From: antlr-interest-accept-Or8OHA4wVg2JuSjgj4M8HSU at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:41 2004
Subject: MODERATE -- jimmyatwork1@yahoo.com posted to antlr-interest
Message-ID: <1101761957.1280.66970.m15@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  jimmyatwork1@yahoo.com 

The message summary:
--------------------
FROM: jimmyatwork1@yahoo.com 
DATE: Mon, 29 Nov 2004 20:58:25 -0000 
SUBJECT: C++ Grammar for .Net VC++ 7.1 

Does any know of a ported version of David Wigg's C++ 
grammar (3.0 grammer first published in July 2004) that 
works under Visual C++ 7.1 (or 7.0) for .Net? 

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=389 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-Or8OHA4wVg2JuSjgj4M8HSU@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "jimmyatwork1" <jimmyatwork1@yahoo.com>
Subject: C++ Grammar for .Net VC++ 7.1
Date: Mon, 29 Nov 2004 20:58:25 -0000
Size: 1345
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041129/daabd72e/attachment.mht
From jimmyatwork1 at yahoo.com  Mon Nov 29 12:58:25 2004
From: jimmyatwork1 at yahoo.com (jimmyatwork1)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] C++ Grammar for .Net VC++ 7.1
Message-ID: <cog2hh+fcki@eGroups.com>




Does any know of a ported version of David Wigg's C++ grammar (3.0
grammer first published in July 2004) that works under Visual C++ 7.1
(or 7.0) for .Net?








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ewbank at synopsys.com  Mon Nov 29 18:59:49 2004
From: ewbank at synopsys.com (Bryan Ewbank)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] New AST and findAll in C++
Message-ID: <200411300258.VAA27544@us54.synopsys.com>


I'm attempting to use findAll in the C++ world with a new node type
(ASTLabelType="MyNodeRef"), and have problems because the functions are all
declared using the BaseAST referent class - thus the link fails because of
type mismatches.

Do I need to redefine all these functions in my new AST node type, or do I
just use vector<RefAST> and pretend it matches??

- Bryan Ewbank
"The best tool for requirements analysis and design is a crayon"



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Tue Nov 30 00:28:52 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Re: New AST and findAll in C++
In-Reply-To: <200411300258.VAA27544@us54.synopsys.com>
Message-ID: <cohb04+rgt0@eGroups.com>



Bryan--

These are relic methods from early in SORCERER development.  Best is
to avoid them--either substitute a tree grammar search or a visitor
class (easiest way to build a vector of single nodes).  I would be
surprised if they made it into ANTLR 3.

--Loring


--- In antlr-interest@yahoogroups.com, "Bryan Ewbank" <ewbank@s...> wrote:
> I'm attempting to use findAll in the C++ world with a new node type
> (ASTLabelType="MyNodeRef"), and have problems because the functions
are all
> declared using the BaseAST referent class - thus the link fails
because of
> type mismatches.
> 
> Do I need to redefine all these functions in my new AST node type,
or do I
> just use vector<RefAST> and pretend it matches??
> 
> - Bryan Ewbank
> "The best tool for requirements analysis and design is a crayon"





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From H.A.M.Maassen at student.tue.nl  Tue Nov 30 03:17:24 2004
From: H.A.M.Maassen at student.tue.nl (Maassen, H.A.M.)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Rewriting trees
Message-ID: <1C5C690C06EFE244B83E3F133CA70BDE28586D@studentex6.campus.tue.nl>

Thanks for the help.
Although I did indeed include the BuildAST option, your suggestion helped me find the real culprit:
 
ASTLabelType = "antlr.CommonAST";
 
I don't even remember how that got there... chalk one up to blind copy/pasting ;)
 
Regards, Harald Maassen
 

	-----Original Message----- 
	From: Monty Zukowski [mailto:monty@codetransform.com] 
	Sent: Fri 11/26/2004 4:51 PM 
	To: antlr-interest@yahoogroups.com 
	Cc: 
	Subject: Re: [antlr-interest] Rewriting trees
	
	


	Terence Parr wrote:
	>
	> On Nov 26, 2004, at 2:33 AM, Maassen, H.A.M. wrote:
	>
	>
	>>Ok I'm stumped.. I've looked through the manual, the FAQ, but I can't
	>>figure out how to reorder trees using a treeparser.. why won't this
	>>work:
	>>
	>>rule: "if" // ignore subtrees for now
	>>      { ## = #([VIRT,"IF STATEMENT"], ##); }
	>>    ;
	>>
	>>How do I tell the treewalker to just copy subtrees without having to
	>>describe their exact structure?
	>>
	>>rule: #("if" (.)*)  // this doesn't work :(
	>>    ;
	>>
	>>Am I missing anything? Is it right under my nose? I know it can't be
	>>this difficult...
	>>Are there any tree-reordering examples out there? The ones I
	>>downloaded from ANTLR.org don't rewrite but rather generate code or
	>>calculate expressions or something else unrelated...
	>
	
	Note that the tree parser builds trees as it parses.  If it doesn't
	parse -- like when you use "." -- then it will not build that tree.
	
	Monty
	
	
	
	Yahoo! Groups Links
	
	
	
	
	
	
	
	



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 5790 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041130/c4696ad7/attachment.bin
From H.A.M.Maassen at student.tue.nl  Tue Nov 30 04:44:20 2004
From: H.A.M.Maassen at student.tue.nl (Maassen, H.A.M.)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Rewriting trees
Message-ID: <1C5C690C06EFE244B83E3F133CA70BDE28586E@studentex6.campus.tue.nl>

Alright, ignore that. It's still not working. I'm fresh out of ideas. Here's the whole grammar:

options {
 language = "CSharp";
}

// ______________________________________________________________________

class MyLexer extends Lexer;
options { k = 2; 
          caseSensitive = false;
          caseSensitiveLiterals = false;
          charVocabulary='\u0000'..'\uFFFE';
        }

ID: ('a'..'z')+;

WS
  : ( ' '
    | '\t'
    | '\f'
    
    // handle newlines
    | ( "\r\n"  // DOS
      | '\r'    // Macintosh
      | '\n'    // Unix
      )  
      { newline(); }
    )
    { $setType(Token.SKIP); }
  ;   

// ______________________________________________________________________
 
 
class MyParser extends Parser;
options
{ k = 1;
  buildAST = true;
}

program
     : "begin"^ (ID | program)* "end"!
     ;

// ______________________________________________________________________


class MyWalker extends TreeParser;
options
{ buildAST = true; }

tokens
{ V; }

program
     : #("begin" (program)*)
     |! ID
       { ## = #([V, "ID"]); }    // <--- generates Invalid AST Node Type error
     ;
     
HELP! ;)

Regards, Harald Maassen



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 5078 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041130/37656bbc/attachment.bin
From bharath.sundararaman at starthis.com  Tue Nov 30 08:44:38 2004
From: bharath.sundararaman at starthis.com (Bharath Sundararaman)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] AST to XML serialization.
Message-ID: <B1180416E5C44E49AE556D23DBB45B29060EB1@webmail.starthis.com>

Hi all,

 

I am trying to convert my AST to XML format. I have my own AST class
which extends antlr.CommonAST and I used the following code from
http://www.antlr.org/doc/trees.html#AST%20Serialization in the ANTLR
reference manual:

 

MyAST t = (MyAST) parser.getAST( ); // MyAST extends CommonAST

Writer w = new OutputStreamWriter(System.out);
t.xmlSerialize(w);
w.write("\n");
w.flush();

 

My understanding is that this code should serialize the AST into XML and
print it on my console (System.out) but I get a NullPointerException of
this form:

 

parser exception: java.lang.NullPointerException

java.lang.NullPointerException

      at antlr.BaseAST.encode(BaseAST.java:401)

      at antlr.BaseAST.xmlSerializeRootOpen(BaseAST.java:454)

      at antlr.BaseAST.xmlSerialize(BaseAST.java:474)

 

 

Also, when I try to print my AST to the console,

System.out.println(t.toStringList( )); , it works just fine.

 

I guess it has to do with character encoding but I am not sure what the
exact problem is. Any thoughts/suggestions/comments are welcome.

 

Thanks in advance!



Bharath.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041130/388c8e8f/attachment.html
From parrt at cs.usfca.edu  Tue Nov 30 10:23:04 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Re: New AST and findAll in C++
In-Reply-To: <cohb04+rgt0@eGroups.com>
References: <cohb04+rgt0@eGroups.com>
Message-ID: <E0504FDD-42FC-11D9-8238-000A95891192@cs.usfca.edu>



On Nov 30, 2004, at 12:28 AM, lgcraymer wrote:
> Bryan--
>
> These are relic methods from early in SORCERER development.  Best is
> to avoid them--either substitute a tree grammar search or a visitor
> class (easiest way to build a vector of single nodes).  I would be
> surprised if they made it into ANTLR 3.

Actually, per some good comments by Andy and by my own experience, 
sometimes you just want to do a quick pattern match in an action and 
don't want to go make a rule.  Or, you might be outside a grammar and 
don't to go make a new grammar etc...

Anyway, all something to think about once I get lexing/parsing/error 
handling nailed. :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ric.klaren at gmail.com  Tue Nov 30 10:57:42 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] New AST and findAll in C++
In-Reply-To: <200411300258.VAA27544@us54.synopsys.com>
References: <200411300258.VAA27544@us54.synopsys.com>
Message-ID: <bc607a4e041130105723b8c8fe@mail.gmail.com>


Hi,

On Mon, 29 Nov 2004 21:59:49 -0500, Bryan Ewbank <ewbank@synopsys.com> wrote:
> I'm attempting to use findAll in the C++ world with a new node type
> (ASTLabelType="MyNodeRef"), and have problems because the functions are all
> declared using the BaseAST referent class - thus the link fails because of
> type mismatches.

The link fails ? Or the compile ? I would suspect some casting to be
necessary or reconstruction of a RefAST reference counter from the
MyNodeRef input, whichever works. I never use the findAll things. I
could suspect they don't work very well with custom ast's due to the
reference counter.

> Do I need to redefine all these functions in my new AST node type, or do I
> just use vector<RefAST> and pretend it matches??

If you do redefine them, make them templates outside the the AST
nodes, that way the compiler will sort things out for itself with some
luck. Keeping algorithms like this and the types they work on
separated is really good practice.

Cheers,

Ric


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From gudnabrsam at yahoo.com  Tue Nov 30 12:44:53 2004
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Re: HumAnt (XML is evil and other non-ANTLR topics)
In-Reply-To: <2F57A92F-3F11-11D9-9362-000393B5606C@codetransform.com>
Message-ID: <20041130204453.55884.qmail@web20424.mail.yahoo.com>


Monty:  I have heard of and read about YAML before,
but not PSLT.  Googling doesn't seem to yield useful
results.  Got a link?

Thanks,
Matt

--- Monty Zukowski <monty@codetransform.com> wrote:

> 
> On Nov 24, 2004, at 6:48 PM, Matt Benson wrote:
> 
> >  A second and simpler
> > option is, as you seem to suggest, to implement
> HumAnt
> > so that it provides a SAX Parser implementation,
> > emitting XML events from non-XML input.  Perhaps a
> > hack but also much easier to implement...
> 
> You may find some inspiration in the XML shorthands
> such as YAML or 
> PSLT.
> 
> Monty
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
>     antlr-interest-unsubscribe@yahoogroups.com
> 
>  
> 
> 
> 
> 



		
__________________________________ 
Do you Yahoo!? 
Meet the all-new My Yahoo! - Try it today! 
http://my.yahoo.com 
 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Tue Nov 30 13:10:05 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Re: HumAnt (XML is evil and other non-ANTLR topics)
In-Reply-To: <20041130204453.55884.qmail@web20424.mail.yahoo.com>
References: <20041130204453.55884.qmail@web20424.mail.yahoo.com>
Message-ID: <357D9B06-4314-11D9-B790-000393B5606C@codetransform.com>


On Nov 30, 2004, at 12:44 PM, Matt Benson wrote:

>
> Monty:  I have heard of and read about YAML before,
> but not PSLT.  Googling doesn't seem to yield useful
> results.  Got a link?
>

Sorry, it was PXSL.

http://community.moertel.com/pxsl/


Monty



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-9c_nXau70oIhd=YMuZWJ=UE at yahoogroups.com  Tue Nov 30 14:38:28 2004
From: antlr-interest-accept-9c_nXau70oIhd=YMuZWJ=UE at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:41 2004
Subject: MODERATE -- malikzsyifg@yahoo.com posted to antlr-interest
Message-ID: <1101854308.399.62906.m2@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  malikzsyifg@yahoo.com 

The message summary:
--------------------
FROM: malikzsyifg@yahoo.com 
DATE: Tue, 30 Nov 2004 22:37:53 -0000 
SUBJECT: less bills 

hey, 

Just wanted to share some info and see if I could help 
anyone else lower their mortgage payments, I saved nearly 
$200 off my monthly payment! 

Takes two minutes take a look. 

http://agocras.net/azwh1 

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=390 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-9c_nXau70oIhd=YMuZWJ=UE@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "malikzsyifg" <malikzsyifg@yahoo.com>
Subject: less bills
Date: Tue, 30 Nov 2004 22:37:53 -0000
Size: 1506
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041130/06f2a6ff/attachment.mht
From antlr-interest-accept-Sp6Xn9a_UgEGJB=7erHR1Yg at yahoogroups.com  Tue Nov 30 16:58:42 2004
From: antlr-interest-accept-Sp6Xn9a_UgEGJB=7erHR1Yg at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:41 2004
Subject: MODERATE -- namitakaur83@yahoo.com posted to antlr-interest
Message-ID: <1101862722.320.85405.m25@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  namitakaur83@yahoo.com 

The message summary:
--------------------
FROM: namitakaur83@yahoo.com 
DATE: Tue, 30 Nov 2004 16:57:41 -0800 (PST) 
SUBJECT: Shoba is easy going, warm & nice girl 

__________________________________________________ Do You 
Yahoo!? Tired of spam? Yahoo! Mail has the best spam 
protection around http://mail.yahoo.com 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=391 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-Sp6Xn9a_UgEGJB=7erHR1Yg@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: namita kaur <namitakaur83@yahoo.com>
Subject: Shoba is easy going, warm & nice girl
Date: Tue, 30 Nov 2004 16:57:41 -0800 (PST)
Size: 2986
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041201/339faf78/attachment.mht
