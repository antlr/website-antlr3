From coxbrian at msu.edu  Sat Jul  1 02:09:39 2006
From: coxbrian at msu.edu (Brian Cox)
Date: Sat Jul  1 02:09:40 2006
Subject: [antlr-interest] LT(0) Specification
Message-ID: <200607010509.40371.coxbrian@msu.edu>

On Friday 23 June 2006 10:46, Carleton Coffrin wrote:
>       I am having a problem with the Java version of ANTLR 2.7.5 where
> in the middle of parsing a token stream LT(0) returns 'null'.  In all

I don't know about 2.7.5, but in ANTLR 3 the token stream's LT(0) method is
documented to produce "undefined" results, with null being one of the
possibly appropriate return values.  Only calling LT with non-zero values is
guaranteed to return defined values (that is, the token 'n' steps before or
after the current position in the stream).  It looks like ANTLR 2.7.x has
similar, if not the exact same, behavior.  You'd need help from one of the
ANTLR gurus for more insight as to exactly why that is, since I'm a bit in
the dark about it myself.

--
 * Brian Cox <coxbrian@msu.edu>
From e.papegaaij at student.utwente.nl  Sat Jul  1 05:26:28 2006
From: e.papegaaij at student.utwente.nl (Emond Papegaaij)
Date: Sat Jul  1 05:26:34 2006
Subject: [antlr-interest] Trouble with ANTLR 3 grammar
In-Reply-To: <71B0DEFF-2E0E-414D-BAE1-ED5586E855F4@cs.usfca.edu>
References: <200606291101.16634.e.papegaaij@student.utwente.nl>
	<200606302043.32598.e.papegaaij@student.utwente.nl>
	<71B0DEFF-2E0E-414D-BAE1-ED5586E855F4@cs.usfca.edu>
Message-ID: <200607011426.28849.e.papegaaij@student.utwente.nl>

On Friday 30 June 2006 20:51, Terence Parr wrote:
> On Jun 30, 2006, at 11:43 AM, Emond Papegaaij wrote:
> > I'm printing the tokens (for debugging) before parsing with a
> > simple while
> > loop. Maybe this is causing the problem? I've included the
> > Main.java that,
> > together with the grammar included in my first mail in this thread,
> > triggers
> > the problem.
>
> That should be ok; you can try tokens.toString() but that only prints
> the text by default.
>
> Hmm...so when you print that stuff, the channel shows 99 on the
> whitespace right before going to the parser?

The lexer does hit 'channel=99', but only after the token is already emitted. 
Printing the channel inside the loop in Main shows '0'. For every WS token 
mWS is called twice. It seems that on the first call the token is emitted, 
and on the second call the channel is set. I can't explain why. Here is some 
output with println statements added at the start of the method, at 
the 'channel=99' statement and at the 'emit' statement:

inWS
emit(11,1,9,0,9,9)
inWS
channel=99; line=1 char=9
inWS
emit(11,1,11,0,11,12)
inWS
channel=99; line=1 char=11


Best regards,
Emond Papegaaij
From e.papegaaij at student.utwente.nl  Sat Jul  1 05:27:54 2006
From: e.papegaaij at student.utwente.nl (Emond Papegaaij)
Date: Sat Jul  1 05:27:58 2006
Subject: [antlr-interest] Reuse of tokens and rules
In-Reply-To: <ebc876d70606300748x1dc0006ek155baa5f689c91fa@mail.gmail.com>
References: <200606301622.26448.e.papegaaij@student.utwente.nl>
	<ebc876d70606300748x1dc0006ek155baa5f689c91fa@mail.gmail.com>
Message-ID: <200607011427.54983.e.papegaaij@student.utwente.nl>

On Friday 30 June 2006 16:48, Thomas Brandon wrote:
> Check out the island-grammar example in the v3 examples pack. Should give
> you the basis for everything you need.

Thanks for the hint. I think the island-grammar will work pretty well.

Best regards,
Emond
From parrt at cs.usfca.edu  Sat Jul  1 12:02:26 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Jul  1 12:01:19 2006
Subject: [antlr-interest] Trouble with ANTLR 3 grammar
In-Reply-To: <200607011426.28849.e.papegaaij@student.utwente.nl>
References: <200606291101.16634.e.papegaaij@student.utwente.nl>
	<200606302043.32598.e.papegaaij@student.utwente.nl>
	<71B0DEFF-2E0E-414D-BAE1-ED5586E855F4@cs.usfca.edu>
	<200607011426.28849.e.papegaaij@student.utwente.nl>
Message-ID: <104E5972-9B91-4F7F-A36E-D554F07D792B@cs.usfca.edu>


On Jul 1, 2006, at 5:26 AM, Emond Papegaaij wrote:
> The lexer does hit 'channel=99', but only after the token is  
> already emitted.
> Printing the channel inside the loop in Main shows '0'. For every  
> WS token
> mWS is called twice. It seems that on the first call the token is  
> emitted,
> and on the second call the channel is set. I can't explain why.

Ah!  I think that gives me the hint...remember that filter mode  
backtracks, looking for a match.  When it finds one, it rewinds and  
does the rule "with feeling".

Ter
> Here is some
> output with println statements added at the start of the method, at
> the 'channel=99' statement and at the 'emit' statement:
>
> inWS
> emit(11,1,9,0,9,9)
> inWS
> channel=99; line=1 char=9
> inWS
> emit(11,1,11,0,11,12)
> inWS
> channel=99; line=1 char=11
>
>
> Best regards,
> Emond Papegaaij

From tbrandonau at gmail.com  Sat Jul  1 12:20:00 2006
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Sat Jul  1 12:20:02 2006
Subject: [antlr-interest] Reuse of tokens and rules
In-Reply-To: <200607011427.54983.e.papegaaij@student.utwente.nl>
References: <200606301622.26448.e.papegaaij@student.utwente.nl>
	<ebc876d70606300748x1dc0006ek155baa5f689c91fa@mail.gmail.com>
	<200607011427.54983.e.papegaaij@student.utwente.nl>
Message-ID: <ebc876d70607011220te73bcbdtf19d7946aaac8508@mail.gmail.com>

No problem, though note, as Ter says, that just having your lexer rule
handle the whole action block and then parsing the resulting string to
another parser may be a more straightforward option.
So, to handle multiple languages you could have something like:
ACTION:
   (    {isPython}? a=PYTHON_ACTION
   |    {isJava}? a=JAVA_ACTION
...
   ) { parseAction($a.text); }

fragment PYTHON_ACTION ...;

Though if you want to extend the set of languages later then seperate
grammars as in the example is probably better. Also, any errors found
parsing this way would need to be translated to proper locations for
reporting.

Tom.

On 7/1/06, Emond Papegaaij <e.papegaaij@student.utwente.nl> wrote:
> On Friday 30 June 2006 16:48, Thomas Brandon wrote:
> > Check out the island-grammar example in the v3 examples pack. Should give
> > you the basis for everything you need.
>
> Thanks for the hint. I think the island-grammar will work pretty well.
>
> Best regards,
> Emond
>
From e.papegaaij at student.utwente.nl  Sun Jul  2 23:49:00 2006
From: e.papegaaij at student.utwente.nl (Emond Papegaaij)
Date: Sun Jul  2 23:49:04 2006
Subject: [antlr-interest] Reuse of tokens and rules
In-Reply-To: <ebc876d70607011220te73bcbdtf19d7946aaac8508@mail.gmail.com>
References: <200606301622.26448.e.papegaaij@student.utwente.nl>
	<200607011427.54983.e.papegaaij@student.utwente.nl>
	<ebc876d70607011220te73bcbdtf19d7946aaac8508@mail.gmail.com>
Message-ID: <200607030849.00209.e.papegaaij@student.utwente.nl>

On Saturday 01 July 2006 21:20, Thomas Brandon wrote:
> No problem, though note, as Ter says, that just having your lexer rule
> handle the whole action block and then parsing the resulting string to
> another parser may be a more straightforward option.
> So, to handle multiple languages you could have something like:
> ACTION:
>    (    {isPython}? a=PYTHON_ACTION
>
>    |    {isJava}? a=JAVA_ACTION
>
> ...
>    ) { parseAction($a.text); }
>
> fragment PYTHON_ACTION ...;

This will lead to many lexer rules matching almost everything, with a 
predicate to enable them. Right now I'm already hitting the limit of what 
ANTLR can handle with ambiguous lexers. I need several rules, both lexer and 
parser, for every language. Keeping them together in a single grammar file 
will make it a lot easier to maintain them. It also means I can reuse the 
same grammar file in multiple parsers (I actually need 2 parsers with 
embedded actions).

Thanks for the help.

Best regards,
Emond
From tbrandonau at gmail.com  Mon Jul  3 02:42:14 2006
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Mon Jul  3 02:42:17 2006
Subject: [antlr-interest] Reuse of tokens and rules
In-Reply-To: <200607030849.00209.e.papegaaij@student.utwente.nl>
References: <200606301622.26448.e.papegaaij@student.utwente.nl>
	<200607011427.54983.e.papegaaij@student.utwente.nl>
	<ebc876d70607011220te73bcbdtf19d7946aaac8508@mail.gmail.com>
	<200607030849.00209.e.papegaaij@student.utwente.nl>
Message-ID: <ebc876d70607030242w110e21b7l88bf0c5943cc01f9@mail.gmail.com>

Having all the language specific rules marked with fragment and
accessed through gated predicates should mean they will not cause any
ambiguity problems.
And I wasn't suggesting you forgo entirely sperate language specific
parsers, that example rule collected the whole action as a single
token in your main grammar. The text of the token is then parsed by a
seperate language specific parser. So parseAction would create the
appropriate parser for the given action language (specified in a
seperate grammar file) and parse the text of the token with it. It
would then need to integrate the results into the main parse tree
somehow.
So, you'd have PYTHON_ACTION, JAVA_ACTION etc and subrules handling
strings, comments adnt eh like to properly detect the exit token but
otherwise not looking at the language at all. These would need to be
duplicated in each grammar file but are fairly basic and unlikely to
change if the set of target languages remains fixed. Then, if you need
more than just the unanalysed text of the rule you parse that with
seperate language specific parsers. Which would be reused among
seperate grammars. So actually, rather than parsing in the ACTION
lexer rule, in your parser you'd have something like:
actionBlock: ACTION;
declarationActionBlock: a=ACTION { res = parseAction($a.text);
doSomething(res); };
I was mainly fleshing out Ter's point that while in some cases full
embedded lexers for picking out the embedded language blocks may be
warranted, in many cases they are a more complicated solution than is
needed. In the example they are warranted by the langauge complexity
in your case they may be warranted by issues of reuse.

Tom.
On 7/3/06, Emond Papegaaij <e.papegaaij@student.utwente.nl> wrote:
> On Saturday 01 July 2006 21:20, Thomas Brandon wrote:
> > No problem, though note, as Ter says, that just having your lexer rule
> > handle the whole action block and then parsing the resulting string to
> > another parser may be a more straightforward option.
> > So, to handle multiple languages you could have something like:
> > ACTION:
> >    (    {isPython}? a=PYTHON_ACTION
> >
> >    |    {isJava}? a=JAVA_ACTION
> >
> > ...
> >    ) { parseAction($a.text); }
> >
> > fragment PYTHON_ACTION ...;
>
> This will lead to many lexer rules matching almost everything, with a
> predicate to enable them. Right now I'm already hitting the limit of what
> ANTLR can handle with ambiguous lexers. I need several rules, both lexer and
> parser, for every language. Keeping them together in a single grammar file
> will make it a lot easier to maintain them. It also means I can reuse the
> same grammar file in multiple parsers (I actually need 2 parsers with
> embedded actions).
>
> Thanks for the help.
>
> Best regards,
> Emond
>
From rhill03 at eds.com  Mon Jul  3 04:43:35 2006
From: rhill03 at eds.com (Hill, Robert)
Date: Mon Jul  3 04:44:10 2006
Subject: [antlr-interest] Quick Question
Message-ID: <2E909902FD3A03419E3A905908AE3DD40218EC70@UKNSM201.emea.corp.eds.com>

Recently revisiting an old parser, and came across this

QUOTE 	(i1:WORD | i2:IDENT) {if (i1==null)
returnString.Append(i2.getText()); else
returnString.Append(i1.getText()); } 

So, is it acceptable (good form?) to replace the above with 

QUOTE 	{returnString = LT(1).getText(); } (WORD | IDENT) 

I can't see any problem with the generated code, other than possibly the
return string not having the correct token on a mismatch which isn't an
issue in this case. I just want to cut down on the clutter.

Or am I missing something ? 
Cheers,

Rob


--
Rob Hill
EDS - Hallamshire Business Park
F1E/045
Sheffield	
T:	+44 (0) 114 291 1928
M:	+44 (0) 791 732 1227
E:	rhill03@eds.com


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060703/0989da73/attachment.html
From prashant.deva at gmail.com  Mon Jul  3 06:06:28 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Mon Jul  3 06:06:30 2006
Subject: [antlr-interest] Quick Question
In-Reply-To: <2E909902FD3A03419E3A905908AE3DD40218EC70@UKNSM201.emea.corp.eds.com>
References: <2E909902FD3A03419E3A905908AE3DD40218EC70@UKNSM201.emea.corp.eds.com>
Message-ID: <41fed8f80607030606g3a857b89o3d65eec600d19e1f@mail.gmail.com>

Seems ok to me.
-- 
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com

On 7/3/06, Hill, Robert <rhill03@eds.com> wrote:
>
>  Recently revisiting an old parser, and came across this
>
> QUOTE   (i1:WORD | i2:IDENT)* {***if (i1==null) returnString.Append(
> i2.getText()); else returnString.Append(i1.getText());* }*
>
> So, is it acceptable (good form?) to replace the above with
>
> QUOTE   {returnString = LT(1).getText(); } (WORD | IDENT)
>
> I can't see any problem with the generated code, other than possibly the
> return string not having the correct token on a mismatch which isn't an
> issue in this case. I just want to cut down on the clutter.
>
> Or am I missing something ?
> Cheers,
>
> Rob
>
> --
> *Rob Hill*
> *EDS - Hallamshire Business Park*
> *F1E/045*
> *Sheffield       *
> *T:      +44 (0) 114 291 1928*
> *M:      +44 (0) 791 732 1227*
> *E:      **rhill03@eds.com* <rhill03@eds.com>**
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060703/2d5eb252/attachment.html
From rhill03 at eds.com  Mon Jul  3 06:46:31 2006
From: rhill03 at eds.com (Hill, Robert)
Date: Mon Jul  3 06:47:21 2006
Subject: [antlr-interest] Quick Question
In-Reply-To: <41fed8f80607030606g3a857b89o3d65eec600d19e1f@mail.gmail.com>
Message-ID: <2E909902FD3A03419E3A905908AE3DD40218EC9E@UKNSM201.emea.corp.eds.com>

thanks, for the quick answer Prashant, speedy as always :)
 
-- 
Rob Hill 
EDS - Hallamshire Business Park 
F1E/045 
Sheffield       
T:      +44 (0) 114 291 1928 
M:      +44 (0) 791 732 1227 
E:      rhill03@eds.com <mailto:rhill03@eds.com>  
 


________________________________

	From: Prashant Deva [mailto:prashant.deva@gmail.com] 
	Sent: 03 July 2006 14:06
	To: Hill, Robert
	Cc: ANTLR Interest
	Subject: Re: [antlr-interest] Quick Question
	
	
	Seems ok to me.
	-- 
	Prashant Deva
	Creator, ANTLR Studio
	Founder, Placid Systems, www.placidsystems.com
	
	
	On 7/3/06, Hill, Robert <rhill03@eds.com> wrote: 

		Recently revisiting an old parser, and came across this 

		QUOTE   (i1:WORD | i2:IDENT) {if (i1==null)
returnString.Append(i2.getText()); else
returnString.Append(i1.getText()); } 

		So, is it acceptable (good form?) to replace the above
with 

		QUOTE   {returnString = LT(1).getText(); } (WORD |
IDENT) 

		I can't see any problem with the generated code, other
than possibly the return string not having the correct token on a
mismatch which isn't an issue in this case. I just want to cut down on
the clutter. 

		Or am I missing something ? 
		Cheers, 

		Rob 


		-- 
		Rob Hill 
		EDS - Hallamshire Business Park 
		F1E/045 
		Sheffield       
		T:      +44 (0) 114 291 1928 
		M:      +44 (0) 791 732 1227 
		E:      rhill03@eds.com <mailto:rhill03@eds.com>  






-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060703/5694612e/attachment-0001.html
From prashant.deva at gmail.com  Mon Jul  3 06:51:11 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Mon Jul  3 06:51:13 2006
Subject: [antlr-interest] Quick Question
In-Reply-To: <2E909902FD3A03419E3A905908AE3DD40218EC9E@UKNSM201.emea.corp.eds.com>
References: <41fed8f80607030606g3a857b89o3d65eec600d19e1f@mail.gmail.com>
	<2E909902FD3A03419E3A905908AE3DD40218EC9E@UKNSM201.emea.corp.eds.com>
Message-ID: <41fed8f80607030651g2b886f48pb57d0a060ddf5186@mail.gmail.com>

:)

-- 
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com

On 7/3/06, Hill, Robert <rhill03@eds.com> wrote:
>
>  thanks, for the quick answer Prashant, speedy as always :)
>
> --
> *Rob Hill*
> *EDS - Hallamshire Business Park*
> *F1E/045*
> *Sheffield       *
> *T:      +44 (0) 114 291 1928*
> *M:      +44 (0) 791 732 1227*
> *E:      **rhill03@eds.com* <rhill03@eds.com>**
>
>
>  ------------------------------
> *From:* Prashant Deva [mailto:prashant.deva@gmail.com]
> *Sent:* 03 July 2006 14:06
> *To:* Hill, Robert
> *Cc:* ANTLR Interest
> *Subject:* Re: [antlr-interest] Quick Question
>
> Seems ok to me.
> --
> Prashant Deva
> Creator, ANTLR Studio
> Founder, Placid Systems, www.placidsystems.com
>
> On 7/3/06, Hill, Robert <rhill03@eds.com> wrote:
> >
> >  Recently revisiting an old parser, and came across this
> >
> > QUOTE   (i1:WORD | i2:IDENT)* {***if (i1==null) returnString.Append(
> > i2.getText()); else returnString.Append(i1.getText());* }*
> >
> > So, is it acceptable (good form?) to replace the above with
> >
> > QUOTE   {returnString = LT(1).getText(); } (WORD | IDENT)
> >
> > I can't see any problem with the generated code, other than possibly the
> > return string not having the correct token on a mismatch which isn't an
> > issue in this case. I just want to cut down on the clutter.
> >
> > Or am I missing something ?
> > Cheers,
> >
> > Rob
> >
> > --
> > *Rob Hill*
> > *EDS - Hallamshire Business Park*
> > *F1E/045*
> > *Sheffield       *
> > *T:      +44 (0) 114 291 1928*
> > *M:      +44 (0) 791 732 1227*
> > *E:      **rhill03@eds.com* <rhill03@eds.com>**
> >
> >
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060703/45233139/attachment.html
From antlr at jazillian.com  Mon Jul  3 07:36:27 2006
From: antlr at jazillian.com (Andy Tripp)
Date: Mon Jul  3 07:36:30 2006
Subject: [antlr-interest] New User help!
In-Reply-To: <1151637336.4979.40.camel@localhost>
References: <1151637336.4979.40.camel@localhost>
Message-ID: <44A92B6B.8050107@jazillian.com>

Walter,

ANTLR has whole "treewalker" ability, where you basically embed code inside
a grammar that describes the AST structure. Producing pretty code from
an AST is
probably the simplest example of where you'd use this. Here's Terrence's
treewalker
that does what you want:
http://antlr.org/share/1101058268251/java.tree.g

Or, if you don't want to get your mind around the whole "treewalker"
thing, you
could use my "just walk the tree by hand" approach:
http://www.jazillian.com/antlr/emitter.html

Andy


Walter Schilling wrote:

>I'm just starting to use ANTLR and I've got a question that I think
>should be obvious but I have yet to see an answer for.  I'm sure I'm
>just looking in the wrong spot.  I'm writing a Java analysis tool that
>uses the Java ANTLR grammar.  On various occasions in my design, I need
>to take the AST that I have generated and translate / walk that back to
>the original text.  For example, if I had the java construct:
>
>if ((x==0) && (y==true))
>
>the AST would be represented as :
>if
>  EXPR
>    &&
>      ==
>        x
>        0
>      ==
>        y
>        true
>  { 
>...
>
>Given that a portion of my data structure is an AST starting with the
>EXPR node, is there any easy way I can walk the tree and regenerate my
>original text?  I'm thinking this should be something easy and obvious,
>but short of hand coding a java recursive loop (which so far has not
>achieved quite what I want, I haven't found an easy way to do this.)  It
>feels like there should be some way to use the existing tree walked I
>have to do this, but I'm thus far drawing a blank.
>
>Thanks for your assistance,
>
>Walt Schilling
>
>  
>


From jose.ventura.roda at gmail.com  Mon Jul  3 07:46:46 2006
From: jose.ventura.roda at gmail.com (Jose Ventura)
Date: Mon Jul  3 07:46:48 2006
Subject: [antlr-interest] Java to C# or VB.net
Message-ID: <e39abda10607030746h5ca7e223v4dc3e966ef57a32@mail.gmail.com>

Hi all,

Does somebody know a java to c# or java to vb.net conversor?


Any help will be apprecitad.

thank's.
Jos? Ventura
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060703/c3dd8e7b/attachment.html
From e.papegaaij at student.utwente.nl  Mon Jul  3 08:26:45 2006
From: e.papegaaij at student.utwente.nl (Emond Papegaaij)
Date: Mon Jul  3 08:26:49 2006
Subject: [antlr-interest] Reuse of tokens and rules
In-Reply-To: <ebc876d70606300748x1dc0006ek155baa5f689c91fa@mail.gmail.com>
References: <200606301622.26448.e.papegaaij@student.utwente.nl>
	<ebc876d70606300748x1dc0006ek155baa5f689c91fa@mail.gmail.com>
Message-ID: <200607031726.45385.e.papegaaij@student.utwente.nl>

On Friday 30 June 2006 16:48, Thomas Brandon wrote:
> On 7/1/06, Emond Papegaaij <e.papegaaij@student.utwente.nl> wrote:
> <cut need token reuse>
> > Is it possible to write small specifications for these constructs and
> > import the one needed? These rules are only a small portion of all the
> > rules. I don't like the solution of having to maintain the same parser and
> > lexer for multiple target languages.
> >
> > PS. I'm using ANTLR v3.
>
> Check out the island-grammar example in the v3 examples pack. Should give
> you the basis for everything you need.

I'm running into a problem with the island-grammar solution. In that example 
the boundaries of the tokens are easily matched in the outer language. For 
example javadoc starts with /** and ends with */. The embedded Simple 
statements are surrounded by '{' and '}'. In my language I most of 
the 'islands' are not that clear. For example 'identifier' is taken from the 
java specification.

In the island-grammar example the nested grammar is started with the beginning 
of the token is matched. However in my case there is no way to know when to 
switch grammars. It seems I need some way to try to parse a token (and thus a 
rule in the nested grammar) and continue when it is not a match.

Another problem I'm facing is terminating the nested grammar. Most rules don't 
end with a specific token. This makes it impossible to end the lexer. Isn't 
it possible to have the lexer produce tokens on demand, rather than at the 
start? That way I can simply return from the parser rule and continue with 
the outer grammar.

Best regards,
Emond
From prashant.deva at gmail.com  Mon Jul  3 08:40:01 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Mon Jul  3 08:40:04 2006
Subject: [antlr-interest] Java to C# or VB.net
In-Reply-To: <e39abda10607030746h5ca7e223v4dc3e966ef57a32@mail.gmail.com>
References: <e39abda10607030746h5ca7e223v4dc3e966ef57a32@mail.gmail.com>
Message-ID: <41fed8f80607030840o60722d83m2143cc5b46e0a1b1@mail.gmail.com>

Would be one *hell* of a convertor if it exists ;)

-- 
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060703/047ecf17/attachment.html
From Mark.Pollack at codestreet.com  Mon Jul  3 08:41:28 2006
From: Mark.Pollack at codestreet.com (Mark Pollack)
Date: Mon Jul  3 08:41:42 2006
Subject: [antlr-interest] Java to C# or VB.net
Message-ID: <422539CFD78B784896418166FDA60D47027AA488@MI8NYCMAIL10.Mi8.com>

Hi,
Check out http://msdn.microsoft.com/vstudio/downloads/tools/jlca/
Cheers,
Mark
 


________________________________

	From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Prashant Deva
	Sent: Monday, July 03, 2006 11:40 AM
	To: Jose Ventura
	Cc: antlr-interest@antlr.org
	Subject: Re: [antlr-interest] Java to C# or VB.net
	
	
	Would be one *hell* of a convertor if it exists ;)
	
	-- 
	Prashant Deva
	Creator, ANTLR Studio
	Founder, Placid Systems, www.placidsystems.com
	

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060703/cc6214f6/attachment.html
From parrt at cs.usfca.edu  Mon Jul  3 10:30:48 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Jul  3 10:29:31 2006
Subject: [antlr-interest] status
Message-ID: <665EAB10-0203-4D0F-89CB-470750C57D58@cs.usfca.edu>

Just to let you know what I've been working on last week (and being  
silent):

backtrack mode that let's you type in any old crap and ANTLR will  
backtrack if it can't figure out what you meant.  No errors are  
reported by antlr during analysis.  It implicitly adds a syn pred in  
front of every production, using them only if static grammar LL(*)  
analysis fails.

A java 1.5 grammar from the spec. that is clean and readable...was  
started by Dieter Frej and I played around heavily looking at a  
variety of sources.

I experimented a great deal with Rats!, the PEG generator and  
converted it's java grammar to ANTLR v3 to see how well ANTLR could  
deal with it.  Whence, the backtrack mode.  That damn Rats! tool is  
fast!

I have a few big bugs queued up; thanks for the email...

I hope to have b2 out in a day or two.

Ter
From antlr at jazillian.com  Mon Jul  3 13:47:01 2006
From: antlr at jazillian.com (Andy Tripp)
Date: Mon Jul  3 13:47:02 2006
Subject: [antlr-interest] Java to C# or VB.net
In-Reply-To: <e39abda10607030746h5ca7e223v4dc3e966ef57a32@mail.gmail.com>
References: <e39abda10607030746h5ca7e223v4dc3e966ef57a32@mail.gmail.com>
Message-ID: <44A98245.6020705@jazillian.com>

Jose Ventura wrote:

> Hi all,
>  
> Does somebody know a java to c# or java to vb.net <http://vb.net> 
> conversor?
>  
>  
> Any help will be apprecitad.
>  
> thank's.
> Jos? Ventura

Danny Coward at Sun has an Eclipse plugin that lets you go the other way:
C# and VB.NET to Java.
https://net2java.dev.java.net/

I'll spare you the commentary of the wisdom of going from Java to VB.NET 
or C# :)
From parrt at cs.usfca.edu  Mon Jul  3 16:39:58 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Jul  3 16:38:40 2006
Subject: [antlr-interest] Trouble with ANTLR 3 grammar
In-Reply-To: <200607011426.28849.e.papegaaij@student.utwente.nl>
References: <200606291101.16634.e.papegaaij@student.utwente.nl>
	<200606302043.32598.e.papegaaij@student.utwente.nl>
	<71B0DEFF-2E0E-414D-BAE1-ED5586E855F4@cs.usfca.edu>
	<200607011426.28849.e.papegaaij@student.utwente.nl>
Message-ID: <66A580A3-4B5A-4DCD-AE0F-17CF90FF000E@cs.usfca.edu>


On Jul 1, 2006, at 5:26 AM, Emond Papegaaij wrote:

> On Friday 30 June 2006 20:51, Terence Parr wrote:
>> On Jun 30, 2006, at 11:43 AM, Emond Papegaaij wrote:
>>> I'm printing the tokens (for debugging) before parsing with a
>>> simple while
>>> loop. Maybe this is causing the problem? I've included the
>>> Main.java that,
>>> together with the grammar included in my first mail in this thread,
>>> triggers
>>> the problem.
>>
>> That should be ok; you can try tokens.toString() but that only prints
>> the text by default.
>>
>> Hmm...so when you print that stuff, the channel shows 99 on the
>> whitespace right before going to the parser?
>
> The lexer does hit 'channel=99', but only after the token is  
> already emitted.
> Printing the channel inside the loop in Main shows '0'. For every  
> WS token
> mWS is called twice. It seems that on the first call the token is  
> emitted,
> and on the second call the channel is set. I can't explain why.  
> Here is some
> output with println statements added at the start of the method, at
> the 'channel=99' statement and at the 'emit' statement:
>
> inWS
> emit(11,1,9,0,9,9)

Ok, ANTLR will match WS in guess mode (backtracking) and then do it  
again with feeling.  It only emits at the outermost token rule  
invoked (in case INT invokes DIGIT) and only if you have not emitted  
a token yourself:

             if ( token==null && ruleNestingLevel==1 ) {
                 emit 
(type,line,charPosition,channel,start,getCharIndex()-1);
             }

So, somehow durin backtracking you are setting token (via emit()  
maybe).  Do you have an emit or token assignment inside an init action?

This all works perfectly in my fuzzy java example.

Ter

From e.papegaaij at student.utwente.nl  Tue Jul  4 00:41:42 2006
From: e.papegaaij at student.utwente.nl (Emond Papegaaij)
Date: Tue Jul  4 00:41:48 2006
Subject: [antlr-interest] Trouble with ANTLR 3 grammar
In-Reply-To: <66A580A3-4B5A-4DCD-AE0F-17CF90FF000E@cs.usfca.edu>
References: <200606291101.16634.e.papegaaij@student.utwente.nl>
	<200607011426.28849.e.papegaaij@student.utwente.nl>
	<66A580A3-4B5A-4DCD-AE0F-17CF90FF000E@cs.usfca.edu>
Message-ID: <200607040941.42571.e.papegaaij@student.utwente.nl>

On Tuesday 04 July 2006 01:39, Terence Parr wrote:
> On Jul 1, 2006, at 5:26 AM, Emond Papegaaij wrote:
> > The lexer does hit 'channel=99', but only after the token is
> > already emitted.
> > Printing the channel inside the loop in Main shows '0'. For every
> > WS token
> > mWS is called twice. It seems that on the first call the token is
> > emitted,
> > and on the second call the channel is set. I can't explain why.
> > Here is some
> > output with println statements added at the start of the method, at
> > the 'channel=99' statement and at the 'emit' statement:
> >
> > inWS
> > emit(11,1,9,0,9,9)
>
> Ok, ANTLR will match WS in guess mode (backtracking) and then do it
> again with feeling.  It only emits at the outermost token rule
> invoked (in case INT invokes DIGIT) and only if you have not emitted
> a token yourself:
>
>              if ( token==null && ruleNestingLevel==1 ) {
>                  emit
> (type,line,charPosition,channel,start,getCharIndex()-1);
>              }
>
> So, somehow durin backtracking you are setting token (via emit()
> maybe).  Do you have an emit or token assignment inside an init action?
>
> This all works perfectly in my fuzzy java example.

It seems to be related to the ACTION tokens. Removing the tokens fixes the 
problem. WS was declared after the ACTION tokens, but moving it up didn't 
solve the problem. I've attached a minimised version of the first grammar 
that still shows WS tokens. The input is:

Printable {
  iface getString;
}

Using the Main I sent earlier, I get this result (WS = <7>):

[@0,0:8='Printable',<4>,1:0] channel = 0
[@1,9:9=' ',<7>,1:9] channel = 0
[@2,10:10='{',<8>,1:10] channel = 0
[@3,11:12='\n\t',<7>,1:11] channel = 0
[@4,13:17='iface',<5>,2:1] channel = 0
....
[specification]: line 1:9 mismatched token: [@1,9:9=' ',<7>,1:9]; expecting 
type '{'

Commenting out METHOD_SIG_ACTION and replacing it with IDENTIFIER correctly 
gives (WS = <6>):

[@0,0:8='Printable',<4>,1:0] channel = 0
[@2,10:10='{',<7>,1:10] channel = 0
[@4,13:17='iface',<5>,2:1] channel = 0
....

Changing METHOD_SIG_ACTION to no longer match certain whitespace characters 
causes the corresponding WS tokens to be moved to channel 99. For example 
changing METHOD_SIG_ACTION to (~(';'|' '))+ gives the following tokens (WS = 
<7>):

[@0,0:8='Printable',<4>,1:0] channel = 0
[@2,10:10='{',<8>,1:10] channel = 0
[@3,11:12='\n\t',<7>,1:11] channel = 0
[@4,13:17='iface',<5>,2:1] channel = 0
....

Note that token @1 is now at channel 99, but token @3 is still at channel 0.

As you can see in the grammar, I've only got actions that set the 'sigFollow' 
flag and one that sets channel=99. I don't emit tokens in the actions, or set 
token in any other way.

Best regard,
Emond
-------------- next part --------------
grammar TPL;

options {
	filter = true;
}

@lexer::members {
	private boolean sigFollow = false;
}

specification
	: IDENTIFIER '{' ifaceMethod* '}'
	;

ifaceMethod
	: IFACE METHOD_SIG_ACTION ';'
	;

IFACE: 'iface' {sigFollow = true;};

WS: ( ' ' | '\t' | '\f' | '\r' | '\n')+ { channel=99; } ;

METHOD_SIG_ACTION: {sigFollow}?=>
                   {sigFollow = false;}
                   (~(';'))+
                   ;

IDENTIFIER: ('a'..'z'|'A'..'Z'|'_'|'$') ('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'$')* ;
From lachinois at hotmail.com  Tue Jul  4 07:06:45 2006
From: lachinois at hotmail.com (Daniel Shane)
Date: Tue Jul  4 07:06:48 2006
Subject: [antlr-interest] Tree Transformation,
	can problem be solved easily with ANTLR??
Message-ID: <BAY105-W63DF57119DE9DDEC8C3B8BB710@phx.gbl>

Hi!

I have nearly finished my new Lucene query builder using ANTLR, and it works like a charm, in fact I'm about to release it to the Lucene community, but I have one case that I cant seem to resolve easily. Maybe its just because I dont have that much experience in tree transformations, but here is the problem.

I have an operator, call N_PROXIMITY, which takes the form "/n" like /1, /12, /200 etc... and this operator is binary (takes 2 operands).

If someone enters this :

A /1 B /2 C /3 D

I would like ANTLR to reorder the priority to this :

(((A /1 B) /2 C) /3 D)

Meaning that the lowest numbers have the highest priority.

If this was the query :

A /3 B /2 C

This would be the result :

(A /3 (B /2 C))

In my ANTLR parser, I build a AST tree that simply orders them first come first serve disregarding the values of the operators, and I'm trying to write an ANTLR tree transformation that could rebalance the tree to take into account the N_PROXIMITY level/value.

Would anyone have an easy idea on how that could be done without playing with the AST like this :

// UGLY Code that rebalances an /n based AST to take into account the chaining of /n operators
// Lower /n operators have higher priority than higher /n operators
public AST transformNProximityAST(AST t) {
		while(true) {
			if (t.getFirstChild() == null) {
				return t;
			}
			if (t.getFirstChild().getType() != N_PROXIMITY) {
				return t;
			}
			
			int type = t.getType();
			String text = t.getText();
			
			if (Integer.parseInt(t.getText().substring(1)) < Integer.parseInt(t.getFirstChild().getText().substring(1))) {
				CommonAST left = new CommonAST();
				left.setType(t.getFirstChild().getFirstChild().getType());
				left.setText(t.getFirstChild().getFirstChild().getText());
				
				CommonAST newAST = new CommonAST();
				
				CommonAST right = new CommonAST();
				right.setType(t.getType());
				right.setText(t.getText());
				right.addChild(t.getFirstChild().getFirstChild().getNextSibling());
				right.addChild(t.getFirstChild().getNextSibling());
				
				t.initialize(t.getFirstChild().getType(), t.getFirstChild().getText());
				t.setFirstChild(null);
				t.setNextSibling(null);
				t.addChild(left);
				t.addChild(transformNProximityAST(right));
			}
			
			return t;
		}
	}
_________________________________________________________________
Be one of the first to try Windows Live Mail.
http://ideas.live.com/programpage.aspx?versionId=5d21c51a-b161-4314-9b0e-4911fb2b2e6d
From jose.ventura.roda at gmail.com  Tue Jul  4 07:09:39 2006
From: jose.ventura.roda at gmail.com (Jose Ventura)
Date: Tue Jul  4 07:09:44 2006
Subject: Fwd: [antlr-interest] Java to C# or VB.net
In-Reply-To: <44A98245.6020705@jazillian.com>
References: <e39abda10607030746h5ca7e223v4dc3e966ef57a32@mail.gmail.com>
	<44A98245.6020705@jazillian.com>
Message-ID: <e39abda10607040709o1958155bt8035135639c4d6e2@mail.gmail.com>

Thank's for your suggestions.

I don't want to go to vb.net, but I'm forced.

Thank's again.
Jos? Ventura.

---------- Forwarded message ----------
From: Andy Tripp <antlr@jazillian.com>
Date: Jul 3, 2006 10:47 PM
Subject: Re: [antlr-interest] Java to C# or VB.net
To: Jose Ventura <jose.ventura.roda@gmail.com>
Cc: antlr-interest@antlr.org

Jose Ventura wrote:

> Hi all,
>
> Does somebody know a java to c# or java to vb.net <http://vb.net>
> conversor?
>
>
> Any help will be apprecitad.
>
> thank's.
> Jos? Ventura

Danny Coward at Sun has an Eclipse plugin that lets you go the other way:
C# and VB.NET to Java.
https://net2java.dev.java.net/

I'll spare you the commentary of the wisdom of going from Java to VB.NET
or C# :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060704/65882f21/attachment.html
From jose.ventura.roda at gmail.com  Tue Jul  4 07:34:17 2006
From: jose.ventura.roda at gmail.com (Jose Ventura)
Date: Tue Jul  4 07:34:24 2006
Subject: [antlr-interest] Question about tree grammar (antlr 3)
Message-ID: <e39abda10607040734gb1cb6c3m3d33589add4c21e9@mail.gmail.com>

I have this rule in a tree grammar (antlr 3)


> setDir : ^('dir' LITERAL )
>

I need to invoke a method with the LITERAL token text, I use this rule


> setDir : ^('dir' LITERAL {s.setDirIn(((Tree)$LITERAL).getText());})


Do somebody know one better, without cast?

Thank's in advance.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060704/12bb1a6a/attachment.html
From parrt at cs.usfca.edu  Tue Jul  4 08:49:57 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Jul  4 08:50:01 2006
Subject: [antlr-interest] Tree Transformation,
	can problem be solved easily with ANTLR??
In-Reply-To: <BAY105-W63DF57119DE9DDEC8C3B8BB710@phx.gbl>
References: <BAY105-W63DF57119DE9DDEC8C3B8BB710@phx.gbl>
Message-ID: <93DADDE6-5D1C-42B2-9579-029EB833840D@cs.usfca.edu>


On Jul 4, 2006, at 7:06 AM, Daniel Shane wrote:

> Hi!
>
> I have nearly finished my new Lucene query builder using ANTLR, and  
> it works like a charm, in fact I'm about to release it to the  
> Lucene community, but I have one case that I cant seem to resolve  
> easily. Maybe its just because I dont have that much experience in  
> tree transformations, but here is the problem.
>
> I have an operator, call N_PROXIMITY, which takes the form "/n"  
> like /1, /12, /200 etc... and this operator is binary (takes 2  
> operands).
>
> If someone enters this :
>
> A /1 B /2 C /3 D
>
> I would like ANTLR to reorder the priority to this :
>
> (((A /1 B) /2 C) /3 D)
>
> Meaning that the lowest numbers have the highest priority.
>
> If this was the query :
>
> A /3 B /2 C
>
> This would be the result :
>
> (A /3 (B /2 C))

Hi...thank gawd somebody is fixing that ridiculously bad parser in  
lucene!!!!!

i've only got a few seconds, but sounds to me like you really need a  
sem pred and oddly enough left recursion

expr : {something smart here}? expr '/' INT expr
        | term
        ;

that predicate will need to look past a term and see the next  
operator.  For examle

A /2 B /1 C

the pred should scan past A as LA(1) and see the operator value.  I  
did a trick with recursion levels to do left recursion 10 years ago  
but can't remember.  seems with unfixed priority levels this could be  
bad actually.  ok nevermind.

Try building a data structure that tracks the list of operators  
(tracking operands) and then sorts them.  *then* build a tree quickly  
from the operands pointed to by the operators.  Might be simpler than  
transforming a tree.

Ter

From parrt at cs.usfca.edu  Tue Jul  4 08:51:13 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Jul  4 08:51:15 2006
Subject: [antlr-interest] Question about tree grammar (antlr 3)
In-Reply-To: <e39abda10607040734gb1cb6c3m3d33589add4c21e9@mail.gmail.com>
References: <e39abda10607040734gb1cb6c3m3d33589add4c21e9@mail.gmail.com>
Message-ID: <ACEF426A-3A0F-44CC-AB86-D4746C15B0FA@cs.usfca.edu>


On Jul 4, 2006, at 7:34 AM, Jose Ventura wrote:

> I have this rule in a tree grammar (antlr 3)
>
> setDir : ^('dir' LITERAL )
>
> I need to invoke a method with the LITERAL token text, I use this rule
>
> setDir : ^('dir' LITERAL {s.setDirIn(((Tree)$LITERAL).getText());})
>
> Do somebody know one better, without cast?

You can try setting ASTLabelType as a grammar option or more simply  
do this:

setDir : ^('dir' LITERAL {s.setDirIn($LITERAL.text);}) ;

:)

Ter

From kroepke at dolphin-services.de  Tue Jul  4 09:11:47 2006
From: kroepke at dolphin-services.de (Kay Roepke)
Date: Tue Jul  4 09:11:53 2006
Subject: [antlr-interest] Question about tree grammar (antlr 3)
In-Reply-To: <ACEF426A-3A0F-44CC-AB86-D4746C15B0FA@cs.usfca.edu>
References: <e39abda10607040734gb1cb6c3m3d33589add4c21e9@mail.gmail.com>
	<ACEF426A-3A0F-44CC-AB86-D4746C15B0FA@cs.usfca.edu>
Message-ID: <3FC8D5BA-8493-46F9-A697-5A1A39AF64E2@dolphin-services.de>


On 4. Jul 2006, at 17:51 Uhr, Terence Parr wrote:

>> setDir : ^('dir' LITERAL {s.setDirIn(((Tree)$LITERAL).getText());})
>>
>> Do somebody know one better, without cast?
>
> You can try setting ASTLabelType as a grammar option or more simply  
> do this:
>
> setDir : ^('dir' LITERAL {s.setDirIn($LITERAL.text);}) ;

As an alternative you could also do

setDir : ^('dir' LITERAL {s.setDirIn(($LITERAL.tree).getText());})

to get rid of the explicit cast. But in this it probably doesn't make  
sense, since
the text is much easier accessable per Ter's suggestion.

See Java.stg for the templates that make it happen (very close to the  
end of the file).

-k
From sohail at taggedtype.net  Tue Jul  4 21:44:33 2006
From: sohail at taggedtype.net (Sohail Somani)
Date: Tue Jul  4 21:44:42 2006
Subject: Fwd: [antlr-interest] Java to C# or VB.net
In-Reply-To: <e39abda10607040709o1958155bt8035135639c4d6e2@mail.gmail.com>
References: <e39abda10607030746h5ca7e223v4dc3e966ef57a32@mail.gmail.com>
	<44A98245.6020705@jazillian.com>
	<e39abda10607040709o1958155bt8035135639c4d6e2@mail.gmail.com>
Message-ID: <1152074674.8051.0.camel@localhost.localdomain>

On Tue, 2006-07-04 at 16:09 +0200, Jose Ventura wrote:
> 
> Thank's for your suggestions.
>  
> I don't want to go to vb.net, but I'm forced.
>  
> Thank's again.
> Jos? Ventura.

vb.net is the new python

</sarcasm>

From jose.ventura.roda at gmail.com  Wed Jul  5 00:31:18 2006
From: jose.ventura.roda at gmail.com (Jose Ventura)
Date: Wed Jul  5 00:31:26 2006
Subject: Fwd: [antlr-interest] Question about tree grammar (antlr 3)
In-Reply-To: <ACEF426A-3A0F-44CC-AB86-D4746C15B0FA@cs.usfca.edu>
References: <e39abda10607040734gb1cb6c3m3d33589add4c21e9@mail.gmail.com>
	<ACEF426A-3A0F-44CC-AB86-D4746C15B0FA@cs.usfca.edu>
Message-ID: <e39abda10607050031t12d802ebxc388506e36831d6f@mail.gmail.com>

Hi Terence,

I have added "ASTLabelType=CommonTree" and then I can use $LITERAL.text


Thank's a lot.
Jos? Ventura.




---------- Forwarded message ----------
From: Terence Parr <parrt@cs.usfca.edu>
Date: Jul 4, 2006 5:51 PM
Subject: Re: [antlr-interest] Question about tree grammar (antlr 3)
To: ANTLR Interest <antlr-interest@antlr.org>


On Jul 4, 2006, at 7:34 AM, Jose Ventura wrote:

> I have this rule in a tree grammar (antlr 3)
>
> setDir : ^('dir' LITERAL )
>
> I need to invoke a method with the LITERAL token text, I use this rule
>
> setDir : ^('dir' LITERAL {s.setDirIn(((Tree)$LITERAL).getText());})
>
> Do somebody know one better, without cast?

You can try setting ASTLabelType as a grammar option or more simply
do this:

setDir : ^('dir' LITERAL {s.setDirIn($LITERAL.text);}) ;

:)

Ter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060705/1bed7936/attachment.html
From rowan at querix.com  Wed Jul  5 03:46:37 2006
From: rowan at querix.com (Rowan Woodhouse)
Date: Wed Jul  5 03:46:47 2006
Subject: [antlr-interest] Unicode Support
Message-ID: <QllSVUJIMCggQ0ZBV2AsMTc4MTU3OTY4@magenta>

 Hi,

I've been looking through the archives/web site etc to try to figure this out but I haven't been able to come up with a definate answer, so hear goes.

I am looking at writing a lexer in c/c++ that can handle ascii or unicode encoded input files and allow the use of unicode characters for things such as string literals and identifiers. For example the source code could be:

function main
  define AAA integer
  define somename string
  AAA = 2
  somename = "BBBB"
  CCCC(AAA, somename)
end main

function CCCC(AAA, somename)
  if somename == "BABA"
    return AAA
  else
    return 0
end CCCC

where AAA, BBBB, CCCC and BABA are all chinese character strings.

Would it be possible to get Antlr to generate a C lexer for this? If not what of the above would be possible, ie just the string literals?

Many thanks,
Rowan
From jose.ventura.roda at gmail.com  Wed Jul  5 04:53:54 2006
From: jose.ventura.roda at gmail.com (Jose Ventura)
Date: Wed Jul  5 04:53:57 2006
Subject: [antlr-interest] Help with tree walker in antlr 3
Message-ID: <e39abda10607050453l2e5406e0pfcda48a9665fa428@mail.gmail.com>

Hi all,


with a tree like this:

   PROGRAMA (SET (...) EXECUTE (...))

I'm need to walk trought se subnodes o SET node, but not
trought the EXECUTE subnodes.

For this, i put this rule:



> programa: ^(PROGRAMA set EXECUTE);
> set: ^(SET ...);
>

the result is : [programa]: line 0:0 mismatched tree node: DOWN; expecting
type <UP>

In antlr 2 I could do  #(PROGRAMA set EXECUTE), Can i do it in antlr 3?

thank's
Jos? Ventura
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060705/ba5f407f/attachment.html
From madcapmaggie at yahoo.com  Wed Jul  5 10:13:04 2006
From: madcapmaggie at yahoo.com (Peggy Fieland)
Date: Wed Jul  5 10:13:07 2006
Subject: [antlr-interest] Unicode Support
In-Reply-To: <QllSVUJIMCggQ0ZBV2AsMTc4MTU3OTY4@magenta>
Message-ID: <20060705171304.97485.qmail@web60017.mail.yahoo.com>

I can't say anything about version 3, but in version
2.7.5 (or 6), it's possible to add unicode support by
modelling it on the unicode example. They use UTF8
encoding.

I have some files (slightly modified from the example)
that I am using -- I added 
   MismatchedUnicodeCharException.cpp  to lib/cpp/src
and 
  MismatchedUnicodeCharException.hpp
  UnicodeCharBuffer.hpp
  UnicodeCharScanner.hpp

to lib/cpp/antlr

it's then possible to define identifiers/strings that
contain unicode characters and parse utf8-encoded
input that contains identifiers and strings with
unicode characters.

If you are interested in gory details (like the files
themselves or more details on the lexer itself) feel
free to contact me.

Peggy

--- Rowan Woodhouse <rowan@querix.com> wrote:

>  Hi,
> 
> I've been looking through the archives/web site etc
> to try to figure this out but I haven't been able to
> come up with a definate answer, so hear goes.
> 
> I am looking at writing a lexer in c/c++ that can
> handle ascii or unicode encoded input files and
> allow the use of unicode characters for things such
> as string literals and identifiers. For example the
> source code could be:
> 
> function main
>   define AAA integer
>   define somename string
>   AAA = 2
>   somename = "BBBB"
>   CCCC(AAA, somename)
> end main
> 
> function CCCC(AAA, somename)
>   if somename == "BABA"
>     return AAA
>   else
>     return 0
> end CCCC
> 
> where AAA, BBBB, CCCC and BABA are all chinese
> character strings.
> 
> Would it be possible to get Antlr to generate a C
> lexer for this? If not what of the above would be
> possible, ie just the string literals?
> 
> Many thanks,
> Rowan
> 

From rbmullen at umich.edu  Wed Jul  5 10:16:55 2006
From: rbmullen at umich.edu (Robert Mullenix)
Date: Wed Jul  5 10:16:58 2006
Subject: [antlr-interest] Translating from C++ to C
Message-ID: <8ed5e9d0607051016t1d0e9ebdt51dd7587c9a06af@mail.gmail.com>

Hello all,

I've just started learning ANTLR.  I hope this isn't a silly problem, but
I'm having difficulty finding documentation on how to use ANTLR to convert a
C++ grammar to a strictly C output.  I realize that C is a subset of C++,
but I'm trying to develop an augmented C++ grammar and want to take this one
step at a time.  It is my understanding that C is not a code generation
target for ANTLR 2.75, but is one for v3.  From what I can tell, it looks
like I'll need to build v3 and then use a C++ grammar available on the
website (there is one, right?).  After that, I can start working on the
Parser/Lexer file to add any neato features that are the real object of this
endeavor.

If anyone could point me in the right direction, I'd be very grateful.

Thanks in advance,
Robert Mullenix
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060705/a59f018d/attachment.html
From parrt at cs.usfca.edu  Wed Jul  5 10:26:20 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Jul  5 10:24:53 2006
Subject: [antlr-interest] Trouble with ANTLR 3 grammar
In-Reply-To: <200607040941.42571.e.papegaaij@student.utwente.nl>
References: <200606291101.16634.e.papegaaij@student.utwente.nl>
	<200607011426.28849.e.papegaaij@student.utwente.nl>
	<66A580A3-4B5A-4DCD-AE0F-17CF90FF000E@cs.usfca.edu>
	<200607040941.42571.e.papegaaij@student.utwente.nl>
Message-ID: <051E786F-BDDA-4BC9-95D8-380DC1334551@cs.usfca.edu>


On Jul 4, 2006, at 12:41 AM, Emond Papegaaij wrote:
> It seems to be related to the ACTION tokens. Removing the tokens  
> fixes the
> problem. WS was declared after the ACTION tokens, but moving it up  
> didn't
> solve the problem. I've attached a minimised version of the first  
> grammar
> that still shows WS tokens. The input is:

WS is attempted first hence it will always match before  
METHOD_SIG_ACTION; unreachable.  WS must be after.

Oh, I think I see the problem...hang on.  Sure...cool.  Change the  
lexerRule template in Java.stg to wrap the emit code:

         <execAction({
         if ( token==null && ruleNestingLevel==1 ) {
             emit(type,line,charPosition,channel,start,getCharIndex 
()-1);
         }<\n>
         }
         )>

in execAction template, which puts an IF around it.

Works now for me.

I should ship b2 today/tomrrow so you can wait if you want.
Ter
From parrt at cs.usfca.edu  Wed Jul  5 10:28:32 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Jul  5 10:27:05 2006
Subject: [antlr-interest] Help with tree walker in antlr 3
In-Reply-To: <e39abda10607050453l2e5406e0pfcda48a9665fa428@mail.gmail.com>
References: <e39abda10607050453l2e5406e0pfcda48a9665fa428@mail.gmail.com>
Message-ID: <EA6E71E8-AF73-46AF-9973-6D67FDDB9CF1@cs.usfca.edu>


On Jul 5, 2006, at 4:53 AM, Jose Ventura wrote:

> Hi all,
>
>
> with a tree like this:
>
>    PROGRAMA (SET (...) EXECUTE (...))
>
> I'm need to walk trought se subnodes o SET node, but not trought  
> the EXECUTE subnodes.
>
> For this, i put this rule:
>
>
> programa: ^(PROGRAMA set EXECUTE);
> set: ^(SET ...);
>
> the result is : [programa]: line 0:0 mismatched tree node: DOWN;  
> expecting type <UP>
>
> In antlr 2 I could do  #(PROGRAMA set EXECUTE), Can i do it in  
> antlr 3?
>

Yeah, no antlr wants exact matches.  Can you try .* or something?  I  
have a note to myself to find an idiom to "skip subtree".  I may have  
to tell the tree node stream to skip rather than matching a bunch of  
junk.

Ter

From prashant.deva at gmail.com  Wed Jul  5 13:24:08 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Wed Jul  5 13:24:12 2006
Subject: [antlr-interest] Unicode Support
In-Reply-To: <QllSVUJIMCggQ0ZBV2AsMTc4MTU3OTY4@magenta>
References: <QllSVUJIMCggQ0ZBV2AsMTc4MTU3OTY4@magenta>
Message-ID: <41fed8f80607051324s22adc6c3v981b73d83b828cfa@mail.gmail.com>

Hi Rowman,
  Look at the docs for a 'charVocabulary' option in the lexer to specify a
unicode char range in the lexer.

-- 
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com

On 7/5/06, Rowan Woodhouse <rowan@querix.com> wrote:
>
> Hi,
>
> I've been looking through the archives/web site etc to try to figure this
> out but I haven't been able to come up with a definate answer, so hear goes.
>
> I am looking at writing a lexer in c/c++ that can handle ascii or unicode
> encoded input files and allow the use of unicode characters for things such
> as string literals and identifiers. For example the source code could be:
>
> function main
>   define AAA integer
>   define somename string
>   AAA = 2
>   somename = "BBBB"
>   CCCC(AAA, somename)
> end main
>
> function CCCC(AAA, somename)
>   if somename == "BABA"
>     return AAA
>   else
>     return 0
> end CCCC
>
> where AAA, BBBB, CCCC and BABA are all chinese character strings.
>
> Would it be possible to get Antlr to generate a C lexer for this? If not
> what of the above would be possible, ie just the string literals?
>
> Many thanks,
> Rowan
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060706/dc6fa8bb/attachment.html
From parrt at cs.usfca.edu  Wed Jul  5 16:28:06 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Jul  5 16:26:39 2006
Subject: [antlr-interest] ANTLR 3.0 beta 2 released
Message-ID: <D931E449-FE25-4840-AF4A-F708D55AC937@cs.usfca.edu>

Hi,

After a furious coding session, 3.0b2 is available.

http://www.antlr.org/download/antlr-3.0b2.tar.gz

The changes:

http://www.antlr.org/v3/README.txt

It is getting pretty damn good.  Here is my brand new Java 1.5  
grammar (some of it Java spec was typed by Dieter).  Very close to  
spec with bugs fixed and some clean up and LL-sanitizing:

http://www.antlr.org/grammar/1152141644268/java.g

The new feature (a big one) is the backtrack=true option for grammar,  
rule, block that let's you type in any old crap and ANTLR will  
backtrack if it can't figure out what you meant.  No errors are  
reported by antlr during analysis.  It implicitly adds a syn pred in  
front of every production, using them only if static grammar LL(*)  
analysis fails.  Syn pred code is not generated if the pred is not  
used in a decision. This is essentially a rapid prototyping mode.  It  
is what I have used on the java.g.  Oh, it doesn't memoize partial  
parses (i.e., rule parsing results) during backtracking automatically  
now.  You must also say memoize=true.  Can make a HUGE difference to  
turn on.

Enjoy.

Ter
PS	Progress is being made on other targets but nothing complete yet.

From antlr-list at arizona-software.ch  Wed Jul  5 21:58:01 2006
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Wed Jul  5 21:58:10 2006
Subject: [antlr-interest] ANTLRWorks 1.0ea11 available
Message-ID: <1070BC06-5DEF-41F1-99E5-FF8DD0EE1B89@arizona-software.ch>

Hello,

I have updated ANTLRWorks to include ANTLR 3.0b2: you can download  
the new version here:

www.antlr.org/works

Best regards,

Jean

From e.papegaaij at student.utwente.nl  Wed Jul  5 23:52:48 2006
From: e.papegaaij at student.utwente.nl (Emond Papegaaij)
Date: Wed Jul  5 23:52:53 2006
Subject: [antlr-interest] Trouble with ANTLR 3 grammar
In-Reply-To: <051E786F-BDDA-4BC9-95D8-380DC1334551@cs.usfca.edu>
References: <200606291101.16634.e.papegaaij@student.utwente.nl>
	<200607040941.42571.e.papegaaij@student.utwente.nl>
	<051E786F-BDDA-4BC9-95D8-380DC1334551@cs.usfca.edu>
Message-ID: <200607060852.48733.e.papegaaij@student.utwente.nl>

On Wednesday 05 July 2006 19:26, Terence Parr wrote:
> On Jul 4, 2006, at 12:41 AM, Emond Papegaaij wrote:
> > It seems to be related to the ACTION tokens. Removing the tokens
> > fixes the
> > problem. WS was declared after the ACTION tokens, but moving it up
> > didn't
> > solve the problem. I've attached a minimised version of the first
> > grammar
> > that still shows WS tokens. The input is:
>
> Works now for me.
>
> I should ship b2 today/tomrrow so you can wait if you want.

Thanks, it's fixed!

Emond
From Michiel_Vermandel at axi.be  Thu Jul  6 00:00:50 2006
From: Michiel_Vermandel at axi.be (Michiel Vermandel)
Date: Thu Jul  6 00:00:55 2006
Subject: [antlr-interest] ANTLR 3.0 beta 2 released
In-Reply-To: <D931E449-FE25-4840-AF4A-F708D55AC937@cs.usfca.edu>
Message-ID: <OF0E588EF3.8113C945-ONC12571A3.00264028-C12571A3.0026875E@Axi.be>

Hi Ter,

I might be overlooking it but I did not see any announcement on the b2 
release in the news section of the antlr.org site.
Just an idea?

Regards,

Michiel





Terence Parr <parrt@cs.usfca.edu> 
Sent by: antlr-interest-bounces@antlr.org
06/07/2006 01:28

To
Antlr Interest <antlr-interest@antlr.org>
cc

Subject
[antlr-interest] ANTLR 3.0 beta 2 released






Hi,

After a furious coding session, 3.0b2 is available.

http://www.antlr.org/download/antlr-3.0b2.tar.gz

The changes:

http://www.antlr.org/v3/README.txt

It is getting pretty damn good.  Here is my brand new Java 1.5 
grammar (some of it Java spec was typed by Dieter).  Very close to 
spec with bugs fixed and some clean up and LL-sanitizing:

http://www.antlr.org/grammar/1152141644268/java.g

The new feature (a big one) is the backtrack=true option for grammar, 
rule, block that let's you type in any old crap and ANTLR will 
backtrack if it can't figure out what you meant.  No errors are 
reported by antlr during analysis.  It implicitly adds a syn pred in 
front of every production, using them only if static grammar LL(*) 
analysis fails.  Syn pred code is not generated if the pred is not 
used in a decision. This is essentially a rapid prototyping mode.  It 
is what I have used on the java.g.  Oh, it doesn't memoize partial 
parses (i.e., rule parsing results) during backtracking automatically 
now.  You must also say memoize=true.  Can make a HUGE difference to 
turn on.

Enjoy.

Ter
PS               Progress is being made on other targets but nothing 
complete yet.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060706/df2b3140/attachment.html
From tbrandonau at gmail.com  Thu Jul  6 06:29:12 2006
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Thu Jul  6 06:29:15 2006
Subject: [antlr-interest] Empty input files
Message-ID: <ebc876d70607060629m1860ad1fo244d7adcc338c97f@mail.gmail.com>

Currently passing an empty grammar to Antlr leads to it trying to create a
tree parser with a name of null. Would it be possible for it to instead give
some sort of no grammar defined error. Or just exit, you of course get other
errors. The issue is with an if block in CodeGenerator.java in
genRecognizer() where on line 377 there is:
else {
  recognizerST = templates.getInstanceOf("treeParser");
  ...
grammar.type is 0 but it is treated as a tree parser due to the unchecked
else.

Tom.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060706/98aa5b61/attachment.html
From Michiel_Vermandel at axi.be  Thu Jul  6 08:03:57 2006
From: Michiel_Vermandel at axi.be (Michiel Vermandel)
Date: Thu Jul  6 08:04:08 2006
Subject: [antlr-interest] nondeterminism issue
Message-ID: <OFE1E1A447.CE0F0302-ONC12571A3.00522EDB-C12571A3.0052C21B@Axi.be>

Hi,

I get quite some warnings when parsing my grammar and I'm trying to 
understand why.
I started with the lexer and I isolated one warning.

My lexer is now reduced to: see below.

When I parse this grammar file I get:

ANTLR Parser Generator   Version 2.7.5rc2 (2005-01-08)   1989-2005 
jGuru.com
FormsLexerSnip.g:17:35: warning:lexical nondeterminism between alts 1 and 
2 of block upon
FormsLexerSnip.g:17:35:     k==1:'\n'
FormsLexerSnip.g:17:35:     k==2:<end-of-token>,'\t','\n','\r',' '
FormsLexerSnip.g:17:35:     k==3:<end-of-token>,'\t','\n','\r',' '
FormsLexerSnip.g:17:35:     k==4:<end-of-token>,'\t','\n','\r',' '
Press any key to continue . . .

Can anyone explain me why I get this warning?

Thanks

Michiel


Lexer:
----------------------------------------------------------------
class FormsLexer extends Lexer;

options {
                exportVocab = Forms;
                testLiterals = false;
                k = 4;
                caseSensitive = false;
                caseSensitiveLiterals = false;
                charVocabulary = '\3' .. '\177';
        }

WS      :       (   ' '
                    |   '\t'
                    |   ('\n'|'\r'('\n')?) {newline();}
                  )+
                { $setType(Token.SKIP); }
   ;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060706/b65c4aa4/attachment.html
From zhixueyong at hotmail.com  Thu Jul  6 09:35:52 2006
From: zhixueyong at hotmail.com (Xue Yong Zhi)
Date: Thu Jul  6 09:36:11 2006
Subject: [antlr-interest] Re: nondeterminism issue
In-Reply-To: <OFE1E1A447.CE0F0302-ONC12571A3.00522EDB-C12571A3.0052C21B@Axi.be>
References: <OFE1E1A447.CE0F0302-ONC12571A3.00522EDB-C12571A3.0052C21B@Axi.be>
Message-ID: <e8je56$a99$1@sea.gmane.org>


It is 'linear approximate lookahead' issue, which confuses lots of new 
users of ANTLR. In your case just shutdown the warning since it is harmless:

('\n'|'\r'(options{greedy=true;}:'\n')?)

> 
> WS        :        (   ' '
>                     |        '\t'
>                     |        ('\n'|'\r'('\n')?) {newline();}
>                   )+
>                 { $setType(Token.SKIP); }
>    ;


-- 
Xue Yong Zhi
http://seclib.blogspot.com

From parrt at cs.usfca.edu  Thu Jul  6 10:54:49 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Jul  6 10:53:21 2006
Subject: [antlr-interest] ANTLR 3.0 beta 2 released
In-Reply-To: <OF0E588EF3.8113C945-ONC12571A3.00264028-C12571A3.0026875E@Axi.be>
References: <OF0E588EF3.8113C945-ONC12571A3.00264028-C12571A3.0026875E@Axi.be>
Message-ID: <BC518B7E-788B-49F8-806F-9932ED94D0FC@cs.usfca.edu>


On Jul 6, 2006, at 12:00 AM, Michiel Vermandel wrote:

>
> Hi Ter,
>
> I might be overlooking it but I did not see any announcement on the  
> b2 release in the news section of the antlr.org site.
> Just an idea?

A good one... :)

Ter
From parrt at cs.usfca.edu  Thu Jul  6 10:57:29 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Jul  6 10:56:01 2006
Subject: [antlr-interest] Empty input files
In-Reply-To: <ebc876d70607060629m1860ad1fo244d7adcc338c97f@mail.gmail.com>
References: <ebc876d70607060629m1860ad1fo244d7adcc338c97f@mail.gmail.com>
Message-ID: <D9D7E65A-E08C-4DA2-A580-ADFC35262FFE@cs.usfca.edu>

On Jul 6, 2006, at 6:29 AM, Thomas Brandon wrote:

> Currently passing an empty grammar to Antlr leads to it trying to  
> create a tree parser with a name of null.

added to bug list.
Ter
From sunjigang1965 at yahoo.com.cn  Thu Jul  6 11:46:34 2006
From: sunjigang1965 at yahoo.com.cn (=?gb2312?q?=CB=EF=BC=CD=B8=D5=20Jigang=20(Robert)=20Sun?=)
Date: Thu Jul  6 11:53:21 2006
Subject: [antlr-interest] is all right recursion warning unharmful?
Message-ID: <20060706184634.99955.qmail@web15704.mail.cnb.yahoo.com>

Hi,

I am not sure if I should ignore the warning:

graphExp: (brackGraph)+ (op graphExp)*; //line 33

par.g:33: warning:nondeterminism upon
par.g:33:     k==1:UpperCaseId,LowerCaseId,FunnyId
par.g:33:     k==2:IntDenot,RealDenot,CharDenot,UpperCaseId,LowerCaseId,FunnyId,
";","=","(",")","True","False"
par.g:33:     between alt 1 and exit branch of block
par.g:33: warning:nondeterminism upon
par.g:33:     k==1:UpperCaseId,LowerCaseId,FunnyId
par.g:33:     k==2:IntDenot,RealDenot,CharDenot,UpperCaseId,LowerCaseId,FunnyId,
"(","True","False"
par.g:33:     between alt 1 and exit branch of block

What I know is that some nonderterministism caused by right recursion is unharmful; but I am not
sure if it is true for all right recursive cases.

Thanks.

Jigang


		
___________________________________________________________ 
-3.5G20M 
http://cn.mail.yahoo.com
From raj.sisodia at impetus.co.in  Thu Jul  6 13:38:29 2006
From: raj.sisodia at impetus.co.in (raj sisodia)
Date: Thu Jul  6 13:38:10 2006
Subject: [antlr-interest] Want to write a scripting language
Message-ID: <69a8052d32104980.3210498069a8052d@impetus.co.in>

Thanks Suman, but can you point me to specifics...

Thanks,
Raj Singh Sisodia

----- Original Message -----
From: "Suman Karumuri" <mansuk@gmail.com>
Date: Wednesday, July 5, 2006 4:31 am
Subject: Re: [antlr-interest] Want to write a scripting language

> Hi,
> 
> Look at a compiler text book or some online tutorials.
> The Unix programming environment, by Kernighan and Pike is a good
> place to start. Also look at the archives of comp.lang.compilers.
> 
> -Suman
> 
> On 6/29/06, raj sisodia <raj.sisodia@impetus.co.in> wrote:
> > Hi,
> >
> > I am new to antlr and I am writing a scripting language (in 
> antlr v3)
> > which looks similar to java, with simple loop commands, if 
> statement,> basic type, arrays etc. I am able to write the parser 
> (though facing
> > problem at the AST side but I'll figure that out).
> >
> > My problem is that, this script would be loosely coupled with 
> another> application written in java and I would like to use the 
> classes> written there. So in a way, my script won't allow the 
> user to
> > explicitly call classes but would itself internally use classes 
from
> > the other application as required. Also I do not want the user to
> > compile the script, that should happen only at runtime (would 
> love if
> > compilation to byte-code can be avoided) and execute the script 
step
> > by step.
> >
> > I would also like to develop a simple editor (but with 
Intellisence)
> > for this. Could anyone please provide me little guidance on 
> this? I
> > tried searching for material that might help me but failed to find
> > much of use (possibly I am looking at wrong places).
> >
> > Thanks,
> > Raj
> >
> >
> >
> >
> >
> 

From bcox at wilytech.com  Thu Jul  6 15:35:46 2006
From: bcox at wilytech.com (Brian Cox)
Date: Thu Jul  6 15:35:47 2006
Subject: [antlr-interest] LA(0)?
Message-ID: <43FB907D.10606@wilytech.com>

Hi,

I've been looking at some 3rd party code that uses ANTLR.  It has calls 
to LA(0)
to get the previous token. I've looked at various examples on the web 
site that use LA(1)
and LA(2) but not LA(0); does this work?

Thanks,
Brian
From dholenstein at gmail.com  Fri Jul  7 04:08:18 2006
From: dholenstein at gmail.com (Dominik Holenstein)
Date: Fri Jul  7 04:08:22 2006
Subject: [antlr-interest] ANTLRv2 or ANTLRv3?
Message-ID: <8ab6a9f00607070408t69754902t5a72267009c2396d@mail.gmail.com>

Hello group,

I am new to ANTLR and I am currently learning ANTLRv2.

As the majority of the posts in this group are related to ANTLRv3 I am
thinking of switching to ANTLRv3.

I have these questions:
- Is it too early to switch to ANTLRv3 now?
- How did you or do you learn ANTLRv3? Reading the samples available
on the website? Try & error?
- Has somebody written a simple ANTLRv3 tutorial already?

Thank you very much in advance for any help!

Kind regards,
Dominik
From jose.ventura.roda at gmail.com  Fri Jul  7 04:33:01 2006
From: jose.ventura.roda at gmail.com (Jose Ventura)
Date: Fri Jul  7 04:33:03 2006
Subject: [antlr-interest] Problem with ASTLabelType unlike CommonTree
Message-ID: <e39abda10607070433t61fc5ddfr1197270eef094c68@mail.gmail.com>

I have problems with the ASTLabelType=DoubleLinkTree. I'm going to explain
some question about CommonTree and DoubleLink.

BaseTree implements Tree
CommonTree extends BaseTree
DoubleLink extends BaseTree


- Question 1.
=============

Tree interface have

              public static final Tree INVALID_NODE = new CommonTree(
Token.INVALID_TOKEN);

I think this sentence can to give problems because finally DoubleLink also
implements Tree trought BaseTree, when it's use this var (INVALID_NODE) in
any class derived from BaseTree (except CommonTree), the cast will be
incorrect.


- Question 2.
=============

When I use the ASTLabelType=DoubleLink I have problem with the code
generated in parser, because the treeAdaptor even use the CommonTreeAdaptor.

               protected TreeAdaptor adaptor = new CommonTreeAdaptor();

Then the sentence like

               root_0 = (DoubleLinkTree)adaptor.nil();

have problems with cast

               Exception in thread "main" java.lang.ClassCastException:
org.antlr.runtime.tree.CommonTree


My Suggestion
=============

I have think very much before to do this suggestion because I'm not have a
large java experiency, but ...


I think:

- INVALID_NODE must declared like "public static final Tree INVALID_NODE =
new BaseTree(Token.INVALID_TOKEN)", for this, BaseTree must have the token
var and it can't be abstract class.

- When it's use an ASTLabelType unlike CommonTree, we must have a
TreeAdaptor specific for the AST type, and the antlr generated code must to
use this TreeAdaptor.

- Maybe it's the same with the CommonTreeNodeStream, even tought I don't
research it.



I hope don't tell too much stupidities.

Thank's
Jos? Ventura
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060707/341b252e/attachment.html
From asingh05 at vt.edu  Fri Jul  7 07:19:26 2006
From: asingh05 at vt.edu (Amrinder Singh)
Date: Fri Jul  7 07:19:30 2006
Subject: [antlr-interest] Problem with wrapper program
Message-ID: <4502BF0B@zathras>

Hello,

I was trying to develop a parser based on the Mantra design. I wrote a wrapper 
program similar to Tool.java to run the parser. When I try to run a sample 
input on it, it gives a ClassCastException when a tree is constructed on the 
line root_0 = (MyAST) adaptor.nil();
However, Mantra does not encounter this error even though it has the same line 
in its code. Any idea what could be causing it? If required I could send my 
grammar file.

Amrinder


From parrt at cs.usfca.edu  Fri Jul  7 10:04:14 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Jul  7 10:02:39 2006
Subject: [antlr-interest] ANTLRv2 or ANTLRv3?
In-Reply-To: <8ab6a9f00607070408t69754902t5a72267009c2396d@mail.gmail.com>
References: <8ab6a9f00607070408t69754902t5a72267009c2396d@mail.gmail.com>
Message-ID: <5ACD69BA-EB38-44CE-87BF-9D5EF2C2D374@cs.usfca.edu>


On Jul 7, 2006, at 4:08 AM, Dominik Holenstein wrote:

> Hello group,
>
> I am new to ANTLR and I am currently learning ANTLRv2.

Hi,Unless you are an experienced language developer I suggest waiting  
until more documentation is available for the new version.

Ter
>
> As the majority of the posts in this group are related to ANTLRv3 I am
> thinking of switching to ANTLRv3.
>
> I have these questions:
> - Is it too early to switch to ANTLRv3 now?
> - How did you or do you learn ANTLRv3? Reading the samples available
> on the website? Try & error?
> - Has somebody written a simple ANTLRv3 tutorial already?
>
> Thank you very much in advance for any help!
>
> Kind regards,
> Dominik

From parrt at cs.usfca.edu  Fri Jul  7 10:07:38 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Jul  7 10:06:04 2006
Subject: [antlr-interest] Problem with wrapper program
In-Reply-To: <4502BF0B@zathras>
References: <4502BF0B@zathras>
Message-ID: <02113CDF-2874-4B1F-A57B-D0DA196C247B@cs.usfca.edu>


On Jul 7, 2006, at 7:19 AM, Amrinder Singh wrote:

> Hello,
>
> I was trying to develop a parser based on the Mantra design. I  
> wrote a wrapper
> program similar to Tool.java to run the parser. When I try to run a  
> sample
> input on it, it gives a ClassCastException when a tree is  
> constructed on the
> line root_0 = (MyAST) adaptor.nil();
> However, Mantra does not encounter this error even though it has  
> the same line
> in its code. Any idea what could be causing it? If required I could  
> send my
> grammar file.

Hi.  Did you see

     // Custom adaptor to create MantraAST node type
     static final TreeAdaptor adaptor = new CommonTreeAdaptor() {
         public Object create(Token payload) {
             return new MantraAST(payload);
         }
     };

at the top and then:

         Mantra g = new Mantra(tokens,symtab);
         g.setTreeAdaptor(adaptor);

to tell ANTLR which nodes to create?

Ter
From parrt at cs.usfca.edu  Fri Jul  7 10:33:54 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Jul  7 10:32:20 2006
Subject: [antlr-interest] coordinating efforts on ANTLR v3 targets
Message-ID: <7457647C-B870-44F9-8560-4362C7D7BD27@cs.usfca.edu>

Hi,

I currently have this info on targets for v3; authors, please respond  
with status.  New targets anyone?

Java: uncle T
	Up to date ;)

C++: Ric Klaren
	Still committed to C++; looks like end of july restart

C#: Michael / Kunle
	They are working on it now

C: Jim Idle
	Has good progress

Objective-C: Kay Roepke
	Good progress

Python: Marq Kole, Wolfgang Hafelinger?
	Marq is waiting for ANTLR v3 feature list to stabilize...

Ruby: Martin Traverso
	http://split-s.blogspot.com/2005/12/antlr-for-ruby.html

LISP

Parrot vm compiler: Bernhard Schmalhofer
	http://www.annocpan.org/~LTOETSCH/parrot-0.4.5/languages/bc/docs/ 
antlr_3.pod

PhP: Ryan King?

Let's make sure we don't duplicate our efforts...

Ter
From prashant.deva at gmail.com  Fri Jul  7 12:09:18 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Fri Jul  7 12:09:22 2006
Subject: [antlr-interest] ANTLRv2 or ANTLRv3?
In-Reply-To: <8ab6a9f00607070408t69754902t5a72267009c2396d@mail.gmail.com>
References: <8ab6a9f00607070408t69754902t5a72267009c2396d@mail.gmail.com>
Message-ID: <41fed8f80607071209v6201ae9cvc7155933e06a4660@mail.gmail.com>

Sticking to ANTLR 2 will allow you to use cool IDEs like ANTLR Studio (
antlrstudio.com).

(I know, I know, shameless marketing, but couldnt resist) ;-)

-- 
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com

On 7/7/06, Dominik Holenstein <dholenstein@gmail.com> wrote:
>
> Hello group,
>
> I am new to ANTLR and I am currently learning ANTLRv2.
>
> As the majority of the posts in this group are related to ANTLRv3 I am
> thinking of switching to ANTLRv3.
>
> I have these questions:
> - Is it too early to switch to ANTLRv3 now?
> - How did you or do you learn ANTLRv3? Reading the samples available
> on the website? Try & error?
> - Has somebody written a simple ANTLRv3 tutorial already?
>
> Thank you very much in advance for any help!
>
> Kind regards,
> Dominik
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060708/efee5ed4/attachment.html
From prashant.deva at gmail.com  Fri Jul  7 12:11:49 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Fri Jul  7 12:11:53 2006
Subject: [antlr-interest] coordinating efforts on ANTLR v3 targets
In-Reply-To: <7457647C-B870-44F9-8560-4362C7D7BD27@cs.usfca.edu>
References: <7457647C-B870-44F9-8560-4362C7D7BD27@cs.usfca.edu>
Message-ID: <41fed8f80607071211o65696055x93eeb73fa9d5553b@mail.gmail.com>

But how will we fulfill our world domination plans without an incremental
parser ;-)

Prashant

On 7/7/06, Terence Parr <parrt@cs.usfca.edu> wrote:
>
> Hi,
>
> I currently have this info on targets for v3; authors, please respond
> with status.  New targets anyone?
>
> Java: uncle T
>         Up to date ;)
>
> C++: Ric Klaren
>         Still committed to C++; looks like end of july restart
>
> C#: Michael / Kunle
>         They are working on it now
>
> C: Jim Idle
>         Has good progress
>
> Objective-C: Kay Roepke
>         Good progress
>
> Python: Marq Kole, Wolfgang Hafelinger?
>         Marq is waiting for ANTLR v3 feature list to stabilize...
>
> Ruby: Martin Traverso
>         http://split-s.blogspot.com/2005/12/antlr-for-ruby.html
>
> LISP
>
> Parrot vm compiler: Bernhard Schmalhofer
>         http://www.annocpan.org/~LTOETSCH/parrot-0.4.5/languages/bc/docs/
> antlr_3.pod
>
> PhP: Ryan King?
>
> Let's make sure we don't duplicate our efforts...
>
> Ter
>



-- 
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060708/38cb73f7/attachment.html
From timothy.bocek at guidant.com  Fri Jul  7 14:34:16 2006
From: timothy.bocek at guidant.com (Bocek, Timothy (RDM))
Date: Fri Jul  7 14:34:21 2006
Subject: [antlr-interest] Exported vocabularies not matching up
Message-ID: <B808615611E7C6498F918EA4BBB0406B6DE730@STPEVS02.stp.guidant.com>

I'm working on a simple set of grammars in ANTLR version 2.7.5.  I am exporting lexers and grammars for Python.  My problem arises when I export the vocabulary from my lexer definition, then import the vocabulary into my parser definitions (I am using the same lexer with two different parsers, so having the lexer and parsers in one file is not an option).  The vocabulary exported from the lexer looks like this:

IF="if"=4
THEN="then"=5
ELSE="else"=6
RETURN="return"=7
TRUE="true"=8
FALSE="false"=9
APPLICABLE="applicable"=10
NOT_APPLICABLE="not_applicable"=11
ENUM_ITEMS="enum_items"=12
AND="and"=13
OR="or"=14
NOT="not"=15
ABS="abs"=16
MIN="min"=17
MAX="max"=18
ROUND="round"=19
WS=20
COMMENT=21
LETTER=22
DIGIT=23
SIMPLE_IDENTIFIER=24
IDENTIFIER=25
INTEGER=26
LPAREN=27
RPAREN=28
LBRACK=29
RBRACK=30
COMMA=31
DOT=32
SEMICOLON=33
PLUS=34
MINUS=35
TIMES=36
DIVIDE=37
EQ=38
NE=39
GT=40
LT=41
GE=42
LE=43

However, the vocabulary exported from the parsers looks like this:

IF="if"=4
THEN="then"=5
ELSE="else"=6
TRUE="true"=7
FALSE="false"=8
APPLICABLE="applicable"=9
NOT_APPLICABLE="not_applicable"=10
AND="and"=11
OR="or"=12
NOT="not"=13
WS=14
COMMENT=15
LETTER=16
DIGIT=17
SIMPLE_IDENTIFIER=18
IDENTIFIER=19
INTEGER=20
LPAREN=21
RPAREN=22
LBRACK=23
RBRACK=24
COMMA=25
DOT=26
SEMICOLON=27
PLUS=28
MINUS=29
TIMES=30
DIVIDE=31
EQ=32
NE=33
GT=34
LT=35
GE=36
LE=37
RETURN="return"=38
ENUM_ITEMS="enum_items"=39
ABS="abs"=40
MIN="min"=41
MAX="max"=42
ROUND="round"=43

As you can see, although the same tokens appear in both the lexer and the parser, the numerical identifiers have changed!  I have checked the import and export statements in my lexer and parsers and they look like they should be working.  Does anyone have an idea as to what might be causing this?  I am new to ANTLR, so help would be appreciated greatly!

Thanks,
Tim Bocek

"Any views expressed in this e-mail are not those of Guidant Corporation."
From asingh05 at vt.edu  Fri Jul  7 16:10:11 2006
From: asingh05 at vt.edu (Amrinder Singh)
Date: Fri Jul  7 16:10:14 2006
Subject: [antlr-interest] Problem with wrapper program
Message-ID: <4509362D@zathras>

Thanks, its fixed.


From parrt at cs.usfca.edu  Fri Jul  7 16:50:01 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Jul  7 16:48:27 2006
Subject: [antlr-interest] 3.0 final will require t.g has t in it
Message-ID: <07B202D4-9544-453F-B1C0-B0682BF85E01@cs.usfca.edu>

Just a friendly warning...we agreed that CParser.g should have  
grammar CParser in it not whatever you want.  We'll need to find  
grammars and vocabularies soon...this will break some examples that  
use java.g for JavaParser inside...

Be advised...

Ter
From sohail at taggedtype.net  Fri Jul  7 17:45:45 2006
From: sohail at taggedtype.net (Sohail Somani)
Date: Fri Jul  7 17:45:52 2006
Subject: [antlr-interest] 3.0 final will require t.g has t in it
In-Reply-To: <07B202D4-9544-453F-B1C0-B0682BF85E01@cs.usfca.edu>
References: <07B202D4-9544-453F-B1C0-B0682BF85E01@cs.usfca.edu>
Message-ID: <1152319545.11499.1.camel@localhost.localdomain>

On Fri, 2006-07-07 at 16:50 -0700, Terence Parr wrote:
> Just a friendly warning...we agreed that CParser.g should have  
> grammar CParser in it not whatever you want.  We'll need to find  
> grammars and vocabularies soon...this will break some examples that  
> use java.g for JavaParser inside...

Phew. Finally. Writing build tools to work with antlr is quite a task
otherwise...

Are we also going to require that *only* t exists in t.g?

It would make things a lot easier...

From parrt at cs.usfca.edu  Fri Jul  7 18:06:21 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Jul  7 18:04:46 2006
Subject: [antlr-interest] 3.0 final will require t.g has t in it
In-Reply-To: <1152319545.11499.1.camel@localhost.localdomain>
References: <07B202D4-9544-453F-B1C0-B0682BF85E01@cs.usfca.edu>
	<1152319545.11499.1.camel@localhost.localdomain>
Message-ID: <CA2DA01D-5D17-429D-BC60-7C50B425C240@cs.usfca.edu>


On Jul 7, 2006, at 5:45 PM, Sohail Somani wrote:

> On Fri, 2006-07-07 at 16:50 -0700, Terence Parr wrote:
>> Just a friendly warning...we agreed that CParser.g should have
>> grammar CParser in it not whatever you want.  We'll need to find
>> grammars and vocabularies soon...this will break some examples that
>> use java.g for JavaParser inside...
>
> Phew. Finally. Writing build tools to work with antlr is quite a task
> otherwise...
>
> Are we also going to require that *only* t exists in t.g?

Yep.  One grammar per file.

Ter
From asingh05 at vt.edu  Fri Jul  7 18:18:08 2006
From: asingh05 at vt.edu (Amrinder Singh)
Date: Fri Jul  7 18:18:09 2006
Subject: [antlr-interest] Printing the AST
Message-ID: <4509E854@zathras>

I try to print the tree in the list ofrmat using the function  
"r.tree.toStringTree()" where r is of type MyParser.compilationUnit_return and 
we run the statement "r =  g.compilationUnit();". However, all it prints is a 
list of nulls.
tree: (null (null null (null null) (null null (null null null) null (null null 
null null null) (null (null (null (null (null null null) null) (null (null 
null))))))))
How can I print the tree with the symbols?

Amrinder


From open.zone at virgin.net  Fri Jul  7 19:14:05 2006
From: open.zone at virgin.net (Micheal J)
Date: Fri Jul  7 18:56:06 2006
Subject: [antlr-interest] 3.0 final will require t.g has t in it
In-Reply-To: <CA2DA01D-5D17-429D-BC60-7C50B425C240@cs.usfca.edu>
Message-ID: <001f01c6a234$31258760$c704a8c0@hercules>


> > On Jul 7, 2006, at 5:45 PM, Sohail Somani wrote:
> > Are we also going to require that *only* t exists in t.g?
> > 

> On Jul 8, 2006, at 02:06 AM, Terence Parr wrote:
> Yep.  One grammar per file.
> 
> Ter

Did you mean one explicit grammar per file?. IIRC, parser grammars can
define a lexer implicitly.

Incidentally, (a) how would such a lexer be named? and, (b) was the @header
issue resolved? (i.e. @header contents not getting into implicitly defined
lexers).


Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.

From Kai.Koehne at student.hpi.uni-potsdam.de  Sat Jul  8 00:20:20 2006
From: Kai.Koehne at student.hpi.uni-potsdam.de (Koehne Kai)
Date: Sat Jul  8 00:20:24 2006
Subject: [antlr-interest] Exported vocabularies not matching up
In-Reply-To: <B808615611E7C6498F918EA4BBB0406B6DE730@STPEVS02.stp.guidant.com>
Message-ID: <D90489B77ED9F8439A3C784F732BEC9C824FAB@3mxstu1r.hpi.uni-potsdam.de>

Hi,

maybe a stupid suggestion, but did you check that you generate the lexer and the parser in the correct order? I had similar problems until I detected that my ant task mixed it up ... If it is something different, you should maybe post a minimal example ...

Regards,

Kai Koehne

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org]On Behalf Of Bocek, Timothy
(RDM)
Sent: Friday, July 07, 2006 11:34 PM
To: antlr-interest@antlr.org
Subject: [antlr-interest] Exported vocabularies not matching up


I'm working on a simple set of grammars in ANTLR version 2.7.5.  I am exporting lexers and grammars for Python.  My problem arises when I export the vocabulary from my lexer definition, then import the vocabulary into my parser definitions (I am using the same lexer with two different parsers, so having the lexer and parsers in one file is not an option).  The vocabulary exported from the lexer looks like this:

IF="if"=4
THEN="then"=5
ELSE="else"=6
RETURN="return"=7
TRUE="true"=8
FALSE="false"=9
APPLICABLE="applicable"=10
NOT_APPLICABLE="not_applicable"=11
ENUM_ITEMS="enum_items"=12
AND="and"=13
OR="or"=14
NOT="not"=15
ABS="abs"=16
MIN="min"=17
MAX="max"=18
ROUND="round"=19
WS=20
COMMENT=21
LETTER=22
DIGIT=23
SIMPLE_IDENTIFIER=24
IDENTIFIER=25
INTEGER=26
LPAREN=27
RPAREN=28
LBRACK=29
RBRACK=30
COMMA=31
DOT=32
SEMICOLON=33
PLUS=34
MINUS=35
TIMES=36
DIVIDE=37
EQ=38
NE=39
GT=40
LT=41
GE=42
LE=43

However, the vocabulary exported from the parsers looks like this:

IF="if"=4
THEN="then"=5
ELSE="else"=6
TRUE="true"=7
FALSE="false"=8
APPLICABLE="applicable"=9
NOT_APPLICABLE="not_applicable"=10
AND="and"=11
OR="or"=12
NOT="not"=13
WS=14
COMMENT=15
LETTER=16
DIGIT=17
SIMPLE_IDENTIFIER=18
IDENTIFIER=19
INTEGER=20
LPAREN=21
RPAREN=22
LBRACK=23
RBRACK=24
COMMA=25
DOT=26
SEMICOLON=27
PLUS=28
MINUS=29
TIMES=30
DIVIDE=31
EQ=32
NE=33
GT=34
LT=35
GE=36
LE=37
RETURN="return"=38
ENUM_ITEMS="enum_items"=39
ABS="abs"=40
MIN="min"=41
MAX="max"=42
ROUND="round"=43

As you can see, although the same tokens appear in both the lexer and the parser, the numerical identifiers have changed!  I have checked the import and export statements in my lexer and parsers and they look like they should be working.  Does anyone have an idea as to what might be causing this?  I am new to ANTLR, so help would be appreciated greatly!

Thanks,
Tim Bocek

"Any views expressed in this e-mail are not those of Guidant Corporation."
From kroepke at dolphin-services.de  Sat Jul  8 00:33:11 2006
From: kroepke at dolphin-services.de (Kay Roepke)
Date: Sat Jul  8 00:33:19 2006
Subject: [antlr-interest] Re: coordinating efforts on ANTLR v3 targets
In-Reply-To: <7457647C-B870-44F9-8560-4362C7D7BD27@cs.usfca.edu>
References: <7457647C-B870-44F9-8560-4362C7D7BD27@cs.usfca.edu>
Message-ID: <5F6AB144-BD57-47C3-868E-1BEC30A7E451@dolphin-services.de>


On 7. Jul 2006, at 19:33 Uhr, Terence Parr wrote:

> Objective-C: Kay Roepke
> 	Good progress

:)

At the moment I'm working on the parser runtime and templates. The  
runtime is mostly done, but not really tested right now, because the
templates aren't up to date. I hope to make some progress today, so  
that I have a working parser in the evening.
The lexer is missing some stuff related to list labels, but that  
isn't a top priority for me right now.
I've implemented the new table-based DFA - wasn't a whole lot and  
thankfully reduced the generated code a bit. Should be a lot faster,  
too :)

Treeparsers will come last, since they don't make a whole lot of  
sense without parsers...

Once the parser is working for the simple grammars, I'll clean up the  
code a bit and push it to the depot. Need to tweak all the standard
copyright stuff, too.

Cheers,

-k
From prashant.deva at gmail.com  Sat Jul  8 05:47:33 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Sat Jul  8 05:47:35 2006
Subject: [antlr-interest] ANTLR Studio : Free Open Source licenses available!
Message-ID: <41fed8f80607080547t7ac4e759wbf6162d221fbd269@mail.gmail.com>

If you are developing an open source project, you can get a free, non
commercial license of ANTLR Studio!

Just send me an email an pdeva@placidsystems.com

Blog posting of this announcement available at -
http://placidsystems.com/blog/

-- 
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060708/1833a579/attachment.html
From mail at martin-probst.com  Sat Jul  8 07:38:37 2006
From: mail at martin-probst.com (Martin Probst)
Date: Sat Jul  8 07:38:44 2006
Subject: [antlr-interest] Printing the AST
In-Reply-To: <4509E854@zathras>
References: <4509E854@zathras>
Message-ID: <BF89C95B-13E4-454D-A8C2-D09616F27B3A@martin-probst.com>

This probably means your AST nodes all have a "null" string value. If  
you construct nodes in code like this:
   AST ast = #[NODE];
it will have no string value. Like this:
   AST ast = #[NODE, "node"];
it will have a value. However, you can access the type and print it  
from the parser, e.g.
   String tokenName = myparser._tokens[ast.getType()];
You'll have to write some trivial recursive code to print the tree  
yourself, e.g.

f(ast) {
   String tokenName = myparser._tokens[ast.getType()];
   print(tokenName);
   print("(");
   for (child: ast.getChildren())
     f(child);
   print(")");
}

HTH,
Martin

Am 08.07.2006 um 03:18 schrieb Amrinder Singh:

> I try to print the tree in the list ofrmat using the function
> "r.tree.toStringTree()" where r is of type  
> MyParser.compilationUnit_return and
> we run the statement "r =  g.compilationUnit();". However, all it  
> prints is a
> list of nulls.
> tree: (null (null null (null null) (null null (null null null) null  
> (null null
> null null null) (null (null (null (null (null null null) null)  
> (null (null
> null))))))))
> How can I print the tree with the symbols?
>
> Amrinder
>
>
>

From parrt at cs.usfca.edu  Sat Jul  8 16:46:21 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Jul  8 16:46:25 2006
Subject: [antlr-interest] 3.0 final will require t.g has t in it
In-Reply-To: <001f01c6a234$31258760$c704a8c0@hercules>
References: <001f01c6a234$31258760$c704a8c0@hercules>
Message-ID: <C564AEA5-CC69-40BB-8745-62CB729C3875@cs.usfca.edu>


On Jul 7, 2006, at 7:14 PM, Micheal J wrote:
>
>>> On Jul 7, 2006, at 5:45 PM, Sohail Somani wrote:
>>> Are we also going to require that *only* t exists in t.g?
>>>
>
>> On Jul 8, 2006, at 02:06 AM, Terence Parr wrote:
>> Yep.  One grammar per file.
>>
>> Ter
>
> Did you mean one explicit grammar per file?. IIRC, parser grammars can
> define a lexer implicitly.

Yes, one "grammar" keyword, but could be combined parser/lexer.

> Incidentally, (a) how would such a lexer be named? and, (b) was the  
> @header
> issue resolved? (i.e. @header contents not getting into implicitly  
> defined
> lexers).

a) it's "<grammarName>Lexer"

b) Yup.

@header {...}
@lexer::header {...}

Ter
From sohail at taggedtype.net  Sun Jul  9 15:20:41 2006
From: sohail at taggedtype.net (Sohail Somani)
Date: Sun Jul  9 15:20:48 2006
Subject: [antlr-interest] Writing an interactive interpreter with TreeParsers
Message-ID: <1152483641.22852.3.camel@localhost.localdomain>

Hi,

Is it possible to write an interactive interpreter using TreeParsers
with antlr? I think not because you have to complete parsing input
before you can start the tree parser.

Is this correct?

I suppose I could interpret one line at a time...

Thanks!

Sohail

From craymer at warpiv.com  Sun Jul  9 15:49:00 2006
From: craymer at warpiv.com (Loring Craymer)
Date: Sun Jul  9 15:49:03 2006
Subject: [antlr-interest] Writing an interactive interpreter with
	TreeParsers
In-Reply-To: <1152483641.22852.3.camel@localhost.localdomain>
Message-ID: <00c601c6a3a9$df2fa540$6402a8c0@Fafnir>

Right the second time.  It isn't the number of stages to interpret stuff,
it's the size of the input.  Once the input is valid (successful parse), you
can process an AST.  The equivalent happens with Python, for example:  all
input is converted into a parse tree, and then byte code before the byte
code interpreter is invoked to process the statement(s).

--Loring


> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Sohail Somani
> Sent: Sunday, July 09, 2006 3:21 PM
> To: antlr-interest
> Subject: [antlr-interest] Writing an interactive interpreter with
> TreeParsers
> 
> Hi,
> 
> Is it possible to write an interactive interpreter using TreeParsers
> with antlr? I think not because you have to complete parsing input
> before you can start the tree parser.
> 
> Is this correct?
> 
> I suppose I could interpret one line at a time...
> 
> Thanks!
> 
> Sohail


From sohail at taggedtype.net  Sun Jul  9 16:31:01 2006
From: sohail at taggedtype.net (Sohail Somani)
Date: Sun Jul  9 16:31:10 2006
Subject: [antlr-interest] Writing an interactive interpreter with
	TreeParsers
In-Reply-To: <00c601c6a3a9$df2fa540$6402a8c0@Fafnir>
References: <00c601c6a3a9$df2fa540$6402a8c0@Fafnir>
Message-ID: <1152487862.1964.1.camel@localhost.localdomain>

On Sun, 2006-07-09 at 15:49 -0700, Loring Craymer wrote:
> Right the second time.  It isn't the number of stages to interpret stuff,
> it's the size of the input.  Once the input is valid (successful parse), you
> can process an AST.  The equivalent happens with Python, for example:  all
> input is converted into a parse tree, and then byte code before the byte
> code interpreter is invoked to process the statement(s).
> 
> --Loring

I had come to this conclusion as well as I've only(!) written a full
translator with antlr so far. Sounds alright to me.

Now I just have to figure out what I changed to make it not parse
anymore! Note to self: Put toy projects in svn too :)

Thanks!

Sohail

From jsamort at gmail.com  Sun Jul  9 16:55:34 2006
From: jsamort at gmail.com (Scott Amort)
Date: Sun Jul  9 16:55:38 2006
Subject: [antlr-interest] reusing a parser for unit testing
Message-ID: <44B19776.10905@gmail.com>

Hi All,

I'm writing a series of unit tests, and am wondering how to reuse my
ANTLR parser (C++ target) within these tests.  I have to setup and
teardown my parser each time I test a new input stream (currently simple
single line stringstream objects), but it would seem to be more
efficient to group related testing streams into a single test and only
setup/teardown once.  However, I can't seem to reset the parser - after
the first input stream, it gives me recognition errors, even though I
have populated the stringstream with a new string.

I came across some older mailing list archives about this, and here is
my approach (for this particular parser, start() expects a string
enclosed by square brackets):

istream_->str( "[testing string]" );
parser_->start();

// next round

istream_->str( "[new testing string]" );

// reset lexer, parser
lexer_->getInputState()->initialize( *istream_, "<testing stream>" );
parser_->getInputState()->reset();
parser_->setFilename( "<testing stream>" );

parser_->start();

But it doesn't seem to work, the first time works fine, but the next
round gives me this error:

<testing stream>: error: recognition error
<testing stream>:1:1: expecting [, found ''

Could anyone offer some assistance?  Thanks!

Best,
Scott
From p05bl at astec.com.pl  Sun Jul  9 23:53:39 2006
From: p05bl at astec.com.pl (Bartlomiej Laczkowski)
Date: Sun Jul  9 23:53:11 2006
Subject: [antlr-interest] nested blocks of code problem
Message-ID: <44B1F973.6020500@astec.com.pl>


Hello!

I have a little problems with parsing nested blocks of code. First I 
will introduce on what the problem is based on.
I need to parse blocks of codes with greedy rules to omit the single 
tokens inside the body but not other blocks of code. The most important 
thing is to find start keyword of block and the ending keyword, so rule 
can look like this:

someBlock
:
START_KEYWORD
(
(someBlock) => someBlock
|
(.) => (options {greedy = false} : .*)
)
END_KEYWORD
;

So if we have situation like this:

start_1
some, some,
start_2
some
end_2
end_1

then everythung will works properly, but if we won't give the end_2 of 
block the greeder will eat the end_1 of outer block of code and other 
blocks.
In my project I need to find the ending of first block even when the 
programmer forgets about ending other inner blocks of code. So I wanted
to pass some arguments from outer block to rule someBlock, which would 
tells me in which outer blocks parsing was started so I can stop the 
greeder when I will
get the END_KEYWORD of outer block.:

someBlock[in_which_block_ending] returns[end]
:
START_KEYWORD
(
(someBlock) => end = someBlock[in_which_block_ending]
|
(.) => (options {greedy = false} : .*)
)
END_KEYWORD | (if possible???) in_which_block_ending
;

As for now i found it not possible, because i can only pass arguments 
like Tokens or Java variables, but i can not pass the things like rules 
from lexer like END_KEYWORD2 or something like that. Is it possible to 
make something like this? Or maybe there is some other simple way to 
make this problem clear?

--
Bart?omiej ?a;czkowski
Software Developer

*ASTEC Sp. z o.o.
*ul. Piaskowa 14, PL 65-209 Zielona G?ra
Tel: +48(0) 68 32 980 00
Fax: +48(0) 68 32 980 03

B.Laczkowski@astec.com.pl

www.astec.com.pl
www.gis.astec.com.pl
www.mdt-project.com
www.dict.pl
www.dep.pl

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060710/a076a39d/attachment.html
From ric.klaren at gmail.com  Mon Jul 10 00:48:14 2006
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Jul 10 00:48:19 2006
Subject: [antlr-interest] LA(0)?
In-Reply-To: <43FB907D.10606@wilytech.com>
References: <43FB907D.10606@wilytech.com>
Message-ID: <bc607a4e0607100048ge75ba8fk2b6ffd0a4f30b4e6@mail.gmail.com>

Hi,

On 2/22/06, Brian Cox <bcox@wilytech.com> wrote:
> I've been looking at some 3rd party code that uses ANTLR.  It has calls
> to LA(0)
> to get the previous token. I've looked at various examples on the web
> site that use LA(1)
> and LA(2) but not LA(0); does this work?

Think it should work. But that's from the top of my head without
checking the code.

Cheers,

Ric

PS write a little test program, check that it works for the first
token and for a situation where the limit of the cyclic buffer is
reached when backtracking (use a mark call somewhere at the start, see
generated code) Or check the code/comments of TokenBuffer (if memory
serves me right).
From Michiel_Vermandel at axi.be  Mon Jul 10 00:58:33 2006
From: Michiel_Vermandel at axi.be (Michiel Vermandel)
Date: Mon Jul 10 00:58:39 2006
Subject: [antlr-interest] nondeterminism issue for dummies ?
Message-ID: <OF8C74F182.48E4A164-ONC12571A7.002B9FC8-C12571A7.002BCFD6@Axi.be>

Hi, 

another nondeterminism issue... 

The issue is in deciding between a single-line comment rule or a directive 
rule. 

A single-line comment is "--" (two minus signs) followed by anything 
untill the end of the line. 

A directive is "--"(two minus signs) follwed by spaces or tabs, then 
followed by some reserved words such as "axi.locate" or "axi.reject" 

So: 

"-- hello world" CRLF 

is a comment 

"-- axi.locate blabla" CRLF 

is a directive. 

My rule works though gives a nondeterminism warning. 

Rule: 
-------------------------------- 

SL_COMMENT 
        :        "--"!  ( 
               ( 
                  (' '|        '\t')* 
                  ( 
                     ("axi.locate") => (  "axi.locate" { _ttype = 
AXI_DIRECTIVE; } ) 
                    |("axi.reject") => (  "axi.reject" { _ttype = 
AXI_DIRECTIVE; } ) 
                  ) 
                ) 
                | (~('a')) (~('\n'|'\r'))* 
            ) 
            CRLF 
        ; 

Warning: 
------------------------------ 
ANTLR Parser Generator   Version 2.7.5rc2 (2005-01-08)   1989-2005 
jGuru.com 
FormsLexerSnip.g:20:24: warning:lexical nondeterminism between alts 1 and 
2 of block upon 
FormsLexerSnip.g:20:24:     k==1:'\t',' ' 
FormsLexerSnip.g:20:24:     k==2:'\t',' ','a','x' 
FormsLexerSnip.g:20:24:     k==3:'\t',' ','a','i','x' 
FormsLexerSnip.g:20:24:     k==4:'\t',' ','.','a','i','x' 


Any ideas how to rewrite this rule so it parses without warning? 
Or just ignore the warning? 

Thanks a lot! 

Have a great weekend! 

Michiel 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060710/4458ab4f/attachment.html
From craymer at warpiv.com  Mon Jul 10 01:10:06 2006
From: craymer at warpiv.com (Loring Craymer)
Date: Mon Jul 10 01:10:10 2006
Subject: [antlr-interest] nondeterminism issue for dummies ?
In-Reply-To: <OF8C74F182.48E4A164-ONC12571A7.002B9FC8-C12571A7.002BCFD6@Axi.be>
Message-ID: <00db01c6a3f8$4181cb80$6402a8c0@Fafnir>

ANTLR can't see past the leading whitespace; you want to do something like

 

(           ( (WS)* "axi.") => (WS)* "axi."                  // include
whitespace in synpred

            (           "locate"

                        |

                                    "reject"

            )

            |

                        (~('a')) (~('\n'|'\r'))*

)

CRLF

 

The non-determinism is real in this case.

 

--Loring

 

  _____  

From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Michiel Vermandel
Sent: Monday, July 10, 2006 12:59 AM
To: antlr-interest@antlr.org
Subject: [antlr-interest] nondeterminism issue for dummies ?

 


Hi, 

another nondeterminism issue... 

The issue is in deciding between a single-line comment rule or a directive
rule. 

A single-line comment is "--" (two minus signs) followed by anything untill
the end of the line. 

A directive is "--"(two minus signs) follwed by spaces or tabs, then
followed by some reserved words such as "axi.locate" or "axi.reject" 

So: 

"-- hello world" CRLF 

is a comment 

"-- axi.locate blabla" CRLF 

is a directive. 

My rule works though gives a nondeterminism warning. 

Rule: 
-------------------------------- 

SL_COMMENT 
       :        "--"!  ( 
              ( 
                 (' '|        '\t')* 
                 (   
                    ("axi.locate") => (  "axi.locate" { _ttype =
AXI_DIRECTIVE; } ) 
                   |("axi.reject") => (  "axi.reject" { _ttype =
AXI_DIRECTIVE; } ) 
                 ) 
               ) 
               | (~('a')) (~('\n'|'\r'))* 
           ) 
           CRLF 
       ; 

Warning: 
------------------------------ 
ANTLR Parser Generator   Version 2.7.5rc2 (2005-01-08)   1989-2005 jGuru.com

FormsLexerSnip.g:20:24: warning:lexical nondeterminism between alts 1 and 2
of block upon 
FormsLexerSnip.g:20:24:     k==1:'\t',' ' 
FormsLexerSnip.g:20:24:     k==2:'\t',' ','a','x' 
FormsLexerSnip.g:20:24:     k==3:'\t',' ','a','i','x' 
FormsLexerSnip.g:20:24:     k==4:'\t',' ','.','a','i','x' 


Any ideas how to rewrite this rule so it parses without warning? 
Or just ignore the warning? 

Thanks a lot! 

Have a great weekend! 

Michiel 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060710/58c77458/attachment-0001.html
From tbrandonau at gmail.com  Mon Jul 10 03:07:23 2006
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Mon Jul 10 03:07:25 2006
Subject: [antlr-interest] 3.0 final will require t.g has t in it
In-Reply-To: <C564AEA5-CC69-40BB-8745-62CB729C3875@cs.usfca.edu>
References: <001f01c6a234$31258760$c704a8c0@hercules>
	<C564AEA5-CC69-40BB-8745-62CB729C3875@cs.usfca.edu>
Message-ID: <ebc876d70607100307w43b31caenb68e10e30cdc7fcd@mail.gmail.com>

The handling of both of these is a little illogical\annoying.
With the naming, if I set my grammar to MyLang say then I get
MyLang.java for the parser which isn't very good. So I change it to
MyLangParser but then I get MyLangParserLexer.java.
Perhaps if it automatically appended Parser to the parser name as
well. So "grammar MyLang" would generate MyLangParser.(java|tokens)
and MyLangLexer.(java|tokens). If this change was just applied to
combined specs it would produce natural output names but would
slightly complicate input-output mapping. MyLang.g could generate
either:
1) MyLang.java - a lexer, parser or tree parser
2) MyLangParser.java and MyLangLexer.g (currently this will produce
MyLang.java and MyLangLexer.java)
You could force the grammar name to include the type for seperate
specs, so a combined grammar would be MyLang.g while a seperate lexer
must be MyLangLexer.g. This makes input->output mapping consistent and
seems fine for parsers\lexers though AssignSymbolsTreeParser.g is a
little less natural than just AssignSymbols.g.

Also, perhaps the default scope could represent the combined grammar.
This seems more logical. In a combined definition the unscoped @header
block is naturally thought of as the header for both parser and lexer.
So you'd have:
@header { package mypackage; }
@parser::header { int parserState;}
@lexer::header { int lexerState; }

Tom.
On 7/9/06, Terence Parr <parrt@cs.usfca.edu> wrote:
>
> On Jul 7, 2006, at 7:14 PM, Micheal J wrote:
> >
> >>> On Jul 7, 2006, at 5:45 PM, Sohail Somani wrote:
> >>> Are we also going to require that *only* t exists in t.g?
> >>>
> >
> >> On Jul 8, 2006, at 02:06 AM, Terence Parr wrote:
> >> Yep.  One grammar per file.
> >>
> >> Ter
> a) it's "<grammarName>Lexer"
>
> b) Yup.
>
> @header {...}
> @lexer::header {...}
>
> Ter
>
From timothy.bocek at guidant.com  Mon Jul 10 08:47:38 2006
From: timothy.bocek at guidant.com (Bocek, Timothy (RDM))
Date: Mon Jul 10 08:47:43 2006
Subject: [antlr-interest] Exported vocabularies not matching up
In-Reply-To: <D90489B77ED9F8439A3C784F732BEC9C824FAB@3mxstu1r.hpi.uni-potsdam.de>
Message-ID: <B808615611E7C6498F918EA4BBB0406B6DE731@STPEVS02.stp.guidant.com>

Not a stupid suggestion at all, although the batch script I was using to compile the grammars seemed to be doing things in the right order.  Fiddling with the script a bit got things to work, although I'm still unsure as to what was going wrong.  That, however, isn't an antlr issue.

Maybe it's time to install a Windows build of Make? ;)

Thanks again for the suggestion!
-Tim Bocek

"Any views expressed in this e-mail are not those of Guidant Corporation."

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org]On Behalf Of Koehne Kai
Sent: Saturday, July 08, 2006 12:20 AM
To: antlr-interest@antlr.org
Subject: RE: [antlr-interest] Exported vocabularies not matching up


Hi,

maybe a stupid suggestion, but did you check that you generate the lexer and the parser in the correct order? I had similar problems until I detected that my ant task mixed it up ... If it is something different, you should maybe post a minimal example ...

Regards,

Kai Koehne

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org]On Behalf Of Bocek, Timothy
(RDM)
Sent: Friday, July 07, 2006 11:34 PM
To: antlr-interest@antlr.org
Subject: [antlr-interest] Exported vocabularies not matching up


I'm working on a simple set of grammars in ANTLR version 2.7.5.  I am exporting lexers and grammars for Python.  My problem arises when I export the vocabulary from my lexer definition, then import the vocabulary into my parser definitions (I am using the same lexer with two different parsers, so having the lexer and parsers in one file is not an option).  The vocabulary exported from the lexer looks like this:

IF="if"=4
THEN="then"=5
ELSE="else"=6
RETURN="return"=7
TRUE="true"=8
FALSE="false"=9
APPLICABLE="applicable"=10
NOT_APPLICABLE="not_applicable"=11
ENUM_ITEMS="enum_items"=12
AND="and"=13
OR="or"=14
NOT="not"=15
ABS="abs"=16
MIN="min"=17
MAX="max"=18
ROUND="round"=19
WS=20
COMMENT=21
LETTER=22
DIGIT=23
SIMPLE_IDENTIFIER=24
IDENTIFIER=25
INTEGER=26
LPAREN=27
RPAREN=28
LBRACK=29
RBRACK=30
COMMA=31
DOT=32
SEMICOLON=33
PLUS=34
MINUS=35
TIMES=36
DIVIDE=37
EQ=38
NE=39
GT=40
LT=41
GE=42
LE=43

However, the vocabulary exported from the parsers looks like this:

IF="if"=4
THEN="then"=5
ELSE="else"=6
TRUE="true"=7
FALSE="false"=8
APPLICABLE="applicable"=9
NOT_APPLICABLE="not_applicable"=10
AND="and"=11
OR="or"=12
NOT="not"=13
WS=14
COMMENT=15
LETTER=16
DIGIT=17
SIMPLE_IDENTIFIER=18
IDENTIFIER=19
INTEGER=20
LPAREN=21
RPAREN=22
LBRACK=23
RBRACK=24
COMMA=25
DOT=26
SEMICOLON=27
PLUS=28
MINUS=29
TIMES=30
DIVIDE=31
EQ=32
NE=33
GT=34
LT=35
GE=36
LE=37
RETURN="return"=38
ENUM_ITEMS="enum_items"=39
ABS="abs"=40
MIN="min"=41
MAX="max"=42
ROUND="round"=43

As you can see, although the same tokens appear in both the lexer and the parser, the numerical identifiers have changed!  I have checked the import and export statements in my lexer and parsers and they look like they should be working.  Does anyone have an idea as to what might be causing this?  I am new to ANTLR, so help would be appreciated greatly!

Thanks,
Tim Bocek

"Any views expressed in this e-mail are not those of Guidant Corporation."
From mail at martin-probst.com  Mon Jul 10 09:27:22 2006
From: mail at martin-probst.com (Martin Probst)
Date: Mon Jul 10 09:27:26 2006
Subject: [antlr-interest] 3.0 final will require t.g has t in it
In-Reply-To: <ebc876d70607100307w43b31caenb68e10e30cdc7fcd@mail.gmail.com>
References: <001f01c6a234$31258760$c704a8c0@hercules>
	<C564AEA5-CC69-40BB-8745-62CB729C3875@cs.usfca.edu>
	<ebc876d70607100307w43b31caenb68e10e30cdc7fcd@mail.gmail.com>
Message-ID: <D74F5CDC-B638-4F9C-96B2-2FBFF8654A7B@martin-probst.com>

Can't you just create any implicitly defined Lexers as private static  
member classes of the parser, provide a MyParser(String input)/ 
MyParser(Reader input), and be done? If you're already abstracting  
away the Parser/Lexer difference in the .g file, why have it return  
in Java land? Sounds quite confusing to me ...

Martin

Am 10.07.2006 um 12:07 schrieb Thomas Brandon:

> The handling of both of these is a little illogical\annoying.
> With the naming, if I set my grammar to MyLang say then I get
> MyLang.java for the parser which isn't very good. So I change it to
> MyLangParser but then I get MyLangParserLexer.java.
> Perhaps if it automatically appended Parser to the parser name as
> well. So "grammar MyLang" would generate MyLangParser.(java|tokens)
> and MyLangLexer.(java|tokens). If this change was just applied to
> combined specs it would produce natural output names but would
> slightly complicate input-output mapping. MyLang.g could generate
> either:
> 1) MyLang.java - a lexer, parser or tree parser
> 2) MyLangParser.java and MyLangLexer.g (currently this will produce
> MyLang.java and MyLangLexer.java)
> You could force the grammar name to include the type for seperate
> specs, so a combined grammar would be MyLang.g while a seperate lexer
> must be MyLangLexer.g. This makes input->output mapping consistent and
> seems fine for parsers\lexers though AssignSymbolsTreeParser.g is a
> little less natural than just AssignSymbols.g.
>
> Also, perhaps the default scope could represent the combined grammar.
> This seems more logical. In a combined definition the unscoped @header
> block is naturally thought of as the header for both parser and lexer.
> So you'd have:
> @header { package mypackage; }
> @parser::header { int parserState;}
> @lexer::header { int lexerState; }
>
> Tom.
> On 7/9/06, Terence Parr <parrt@cs.usfca.edu> wrote:
>>
>> On Jul 7, 2006, at 7:14 PM, Micheal J wrote:
>> >
>> >>> On Jul 7, 2006, at 5:45 PM, Sohail Somani wrote:
>> >>> Are we also going to require that *only* t exists in t.g?
>> >>>
>> >
>> >> On Jul 8, 2006, at 02:06 AM, Terence Parr wrote:
>> >> Yep.  One grammar per file.
>> >>
>> >> Ter
>> a) it's "<grammarName>Lexer"
>>
>> b) Yup.
>>
>> @header {...}
>> @lexer::header {...}
>>
>> Ter
>>
>

From parrt at cs.usfca.edu  Mon Jul 10 10:49:58 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Jul 10 10:48:13 2006
Subject: [antlr-interest] 3.0 final will require t.g has t in it
In-Reply-To: <ebc876d70607100307w43b31caenb68e10e30cdc7fcd@mail.gmail.com>
References: <001f01c6a234$31258760$c704a8c0@hercules>
	<C564AEA5-CC69-40BB-8745-62CB729C3875@cs.usfca.edu>
	<ebc876d70607100307w43b31caenb68e10e30cdc7fcd@mail.gmail.com>
Message-ID: <4D4E3726-58A8-4B18-B40E-C005A7A89E02@cs.usfca.edu>


On Jul 10, 2006, at 3:07 AM, Thomas Brandon wrote:

> The handling of both of these is a little illogical\annoying.
> With the naming, if I set my grammar to MyLang say then I get
> MyLang.java for the parser which isn't very good. So I change it to
> MyLangParser but then I get MyLangParserLexer.java.
> Perhaps if it automatically appended Parser to the parser name as
> well. So "grammar MyLang" would generate MyLangParser.(java|tokens)
> and MyLangLexer.(java|tokens).

Heh, that's pretty good!  Anybody object to this?

> If this change was just applied to
> combined specs it would produce natural output names but would
> slightly complicate input-output mapping. MyLang.g could generate
> either:
> 1) MyLang.java - a lexer, parser or tree parser
> 2) MyLangParser.java and MyLangLexer.g (currently this will produce
> MyLang.java and MyLangLexer.java)

Oh, that is true...although we'll only be asking for a grammar to  
derive from or whatever.  I think it's ok to not be able to derive  
from an implicit lexer.  If you ask for grammar G then it must be in G.g

> You could force the grammar name to include the type for seperate
> specs, so a combined grammar would be MyLang.g while a seperate lexer
> must be MyLangLexer.g. This makes input->output mapping consistent and
> seems fine for parsers\lexers though AssignSymbolsTreeParser.g is a
> little less natural than just AssignSymbols.g.
>
> Also, perhaps the default scope could represent the combined grammar.
> This seems more logical. In a combined definition the unscoped @header
> block is naturally thought of as the header for both parser and lexer.
> So you'd have:
> @header { package mypackage; }
> @parser::header { int parserState;}
> @lexer::header { int lexerState; }

For the most part you don't want stuff going to the lexer I found in  
practice...separating them is ok I think.

Ter
>
> Tom.
> On 7/9/06, Terence Parr <parrt@cs.usfca.edu> wrote:
>>
>> On Jul 7, 2006, at 7:14 PM, Micheal J wrote:
>> >
>> >>> On Jul 7, 2006, at 5:45 PM, Sohail Somani wrote:
>> >>> Are we also going to require that *only* t exists in t.g?
>> >>>
>> >
>> >> On Jul 8, 2006, at 02:06 AM, Terence Parr wrote:
>> >> Yep.  One grammar per file.
>> >>
>> >> Ter
>> a) it's "<grammarName>Lexer"
>>
>> b) Yup.
>>
>> @header {...}
>> @lexer::header {...}
>>
>> Ter
>>

From mail at martin-probst.com  Mon Jul 10 12:01:27 2006
From: mail at martin-probst.com (Martin Probst)
Date: Mon Jul 10 12:01:32 2006
Subject: [antlr-interest] 3.0 final will require t.g has t in it
In-Reply-To: <4D4E3726-58A8-4B18-B40E-C005A7A89E02@cs.usfca.edu>
References: <001f01c6a234$31258760$c704a8c0@hercules>
	<C564AEA5-CC69-40BB-8745-62CB729C3875@cs.usfca.edu>
	<ebc876d70607100307w43b31caenb68e10e30cdc7fcd@mail.gmail.com>
	<4D4E3726-58A8-4B18-B40E-C005A7A89E02@cs.usfca.edu>
Message-ID: <89FA6179-0D97-469F-B543-9B9119D894A9@martin-probst.com>

>>  So "grammar MyLang" would generate MyLangParser.(java|tokens)
>> and MyLangLexer.(java|tokens).
>
> Heh, that's pretty good!  Anybody object to this?

Well, why would you want to expose the Lexer as a top-level class if  
the user didn't even declare it explicitly? Have it be a nested class  
within the parser, that would keep the user surprise as low as possible.

Martin
From parrt at cs.usfca.edu  Mon Jul 10 12:15:09 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Jul 10 12:13:24 2006
Subject: [antlr-interest] 3.0 final will require t.g has t in it
In-Reply-To: <89FA6179-0D97-469F-B543-9B9119D894A9@martin-probst.com>
References: <001f01c6a234$31258760$c704a8c0@hercules>
	<C564AEA5-CC69-40BB-8745-62CB729C3875@cs.usfca.edu>
	<ebc876d70607100307w43b31caenb68e10e30cdc7fcd@mail.gmail.com>
	<4D4E3726-58A8-4B18-B40E-C005A7A89E02@cs.usfca.edu>
	<89FA6179-0D97-469F-B543-9B9119D894A9@martin-probst.com>
Message-ID: <4181A8E6-5BEB-4234-A533-71107739B39B@cs.usfca.edu>


On Jul 10, 2006, at 12:01 PM, Martin Probst wrote:

>>>  So "grammar MyLang" would generate MyLangParser.(java|tokens)
>>> and MyLangLexer.(java|tokens).
>>
>> Heh, that's pretty good!  Anybody object to this?
>
> Well, why would you want to expose the Lexer as a top-level class  
> if the user didn't even declare it explicitly? Have it be a nested  
> class within the parser, that would keep the user surprise as low  
> as possible.

That would make the file too big to debug sometimes; java has weird  
limits.  Also, it's a convenience but it doesn't change the fact that  
ANTLR is generating parser and lexer from that grammar.  THough I  
guess you're right...one could pass the input stream to the parser  
and ignore the lexer..hmm...anybody have an opinion?
Ter

From dieter_frej at gmx.net  Mon Jul 10 12:14:30 2006
From: dieter_frej at gmx.net (Dieter Frej)
Date: Mon Jul 10 13:16:48 2006
Subject: [antlr-interest] v3: strange debugging message in new java.g grammar
Message-ID: <44B2A716.1010005@gmx.net>

Hi everybody,

since Terence wrote that the new Java grammar was not tested
exhaustively, I thought I could do that. So I wrote the following small
program and ran it (java JCKParsing.java 2>err.txt).

String file = 
"/home/db/jck/JCK-compiler-15a/tests/lang/FP/fpl001/fpl00101m8/fpl00101m8.java";
try {
   CharStream cs = new ANTLRFileStream(file);
   JavaParserLexer lexer = new JavaParserLexer(cs);

   CommonTokenStream tokens = new CommonTokenStream();
   tokens.setTokenSource(lexer);

   JavaParser parser = new JavaParser(tokens);
   parser.compilationUnit();
} catch (IOException ioe) {
   System.err.println("(ioe): |" + ioe.getMessage() + "|");
} catch (NoViableAltException nvae) {
   System.err.println("(nvae): |" + nvae.getMessage() + "|");
} catch (MismatchedTokenException mte) {
   System.err.println("(mte): |" + mte.getMessage() + "|");
} catch (RecognitionException re) {
   System.err.println("(re): |" + re.getMessage() + "|");
}

I got the following in my err.txt and I have no idea where this came
from because it does not look like an exception (they should all be
handled).

/home/db/jck/JCK-compiler-15a/tests/lang/FP/fpl001/fpl00101m8/fpl00101m8.java
[compilationUnit, typeDeclaration, classOrInterfaceDeclaration, 
classDeclaration, normalClassDeclaration, classBody, 
classBodyDeclaration, memberDecl]: line
  20:18 decision=<<132:1: memberDecl : ( ( 
genericMethodOrConstructorDecl )=> genericMethodOrConstructorDecl | ( 
methodDeclaration )=> methodDeclaration | (
fieldDeclaration )=> fieldDeclaration | ( 'void' Identifier 
voidMethodDeclaratorRest )=> 'void' Identifier voidMethodDeclaratorRest 
| ( Identifier construct
orDeclaratorRest )=> Identifier constructorDeclaratorRest | ( 
interfaceDeclaration )=> interfaceDeclaration | classDeclaration );>> 
state 15 (decision=36) n
o viable alt; token=[@106,466:468='int',<59>,20:18]
[compilationUnit, typeDeclaration, classOrInterfaceDeclaration, 
classDeclaration, normalClassDeclaration, classBody, 
classBodyDeclaration, memberDecl, const
ructorDeclaratorRest, formalParameters]: line 20:53 mismatched token: 
[@119,501:508='strictfp',<54>,20:53]; expecting type ')'
---------------


Any comments on this?

- Didi
From parrt at cs.usfca.edu  Mon Jul 10 14:20:51 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Jul 10 14:19:04 2006
Subject: [antlr-interest] v3: strange debugging message in new java.g
	grammar
In-Reply-To: <44B2A716.1010005@gmx.net>
References: <44B2A716.1010005@gmx.net>
Message-ID: <B7D58678-44E2-4730-941B-7F6DF4AC77F6@cs.usfca.edu>


On Jul 10, 2006, at 12:14 PM, Dieter Frej wrote:

> Hi everybody,
>
> since Terence wrote that the new Java grammar was not tested
> exhaustively, I thought I could do that. So I wrote the following  
> small
> program and ran it (java JCKParsing.java 2>err.txt).

By default ANTLR does not send the exceptions back out...it tries to  
recover.  Override reportError and recover if you want; also can set  
trycatchclause action I think it is.
>
> I got the following in my err.txt and I have no idea where this came
> from because it does not look like an exception (they should all be
> handled).
>
> /home/db/jck/JCK-compiler-15a/tests/lang/FP/fpl001/fpl00101m8/ 
> fpl00101m8.java
> [compilationUnit, typeDeclaration, classOrInterfaceDeclaration,  
> classDeclaration, normalClassDeclaration, classBody,  
> classBodyDeclaration, memberDecl]: line
>  20:18 decision=<<132:1: memberDecl :  
> ( ( genericMethodOrConstructorDecl )=>  
> genericMethodOrConstructorDecl | ( methodDeclaration )=>  
> methodDeclaration | (
> fieldDeclaration )=> fieldDeclaration | ( 'void' Identifier  
> voidMethodDeclaratorRest )=> 'void' Identifier  
> voidMethodDeclaratorRest | ( Identifier construct
> orDeclaratorRest )=> Identifier constructorDeclaratorRest |  
> ( interfaceDeclaration )=> interfaceDeclaration |  
> classDeclaration );>> state 15 (decision=36) n
> o viable alt; token=[@106,466:468='int',<59>,20:18]
> [compilationUnit, typeDeclaration, classOrInterfaceDeclaration,  
> classDeclaration, normalClassDeclaration, classBody,  
> classBodyDeclaration, memberDecl, const
> ructorDeclaratorRest, formalParameters]: line 20:53 mismatched  
> token: [@119,501:508='strictfp',<54>,20:53]; expecting type ')'
> ---------------
> Any comments on this?

That says that in formalParameters, it didn't like strictfp.   
Hmm...must be a bug in the spec.  I did this:

formalParameterDecls
         :       'final'? annotations? type formalParameterDeclsRest?
         ;

seems like strictfp, a modifier, needs to be in there.  Maybe I  
simplified.  what's at line 20, char 53?

Ter
From jsamort at gmail.com  Mon Jul 10 16:26:44 2006
From: jsamort at gmail.com (Scott Amort)
Date: Mon Jul 10 16:26:49 2006
Subject: [antlr-interest] failed assertion in CircularQueue.hpp
Message-ID: <44B2E234.9010807@gmail.com>

Hi All,

I am getting the following failed assertion while working with my ANTLR
2.7.6 parser/lexer (C++ target):

scripts/../lib/cpp/antlr/CircularQueue.hpp:59: void
antlr::CircularQueue<T>::removeItems(size_t) [with T =
antlr::TokenRefCount<antlr::Token>]: Assertion `nb <= entries()' failed.

Would anyone be able to enlighten me as to what is happening, and
whether the fault lies with my code or ANTLR?

Thanks so much!

Best,
Scott
From craymer at warpiv.com  Mon Jul 10 16:41:15 2006
From: craymer at warpiv.com (Loring Craymer)
Date: Mon Jul 10 16:41:17 2006
Subject: [antlr-interest] 3.0 final will require t.g has t in it
In-Reply-To: <4181A8E6-5BEB-4234-A533-71107739B39B@cs.usfca.edu>
Message-ID: <00e901c6a47a$5674ac10$6402a8c0@Fafnir>

If you are going to have combined grammars, Martin's suggestion is a good
one--the generated code then looks like it was from a combined grammar, and
having implicit lexer creation in such cases would be a convenience.

--Loring


> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Terence Parr
> Sent: Monday, July 10, 2006 12:15 PM
> To: Antlr Interest
> Subject: Re: [antlr-interest] 3.0 final will require t.g has t in it
> 
> 
> On Jul 10, 2006, at 12:01 PM, Martin Probst wrote:
> 
> >>>  So "grammar MyLang" would generate MyLangParser.(java|tokens)
> >>> and MyLangLexer.(java|tokens).
> >>
> >> Heh, that's pretty good!  Anybody object to this?
> >
> > Well, why would you want to expose the Lexer as a top-level class
> > if the user didn't even declare it explicitly? Have it be a nested
> > class within the parser, that would keep the user surprise as low
> > as possible.
> 
> That would make the file too big to debug sometimes; java has weird
> limits.  Also, it's a convenience but it doesn't change the fact that
> ANTLR is generating parser and lexer from that grammar.  THough I
> guess you're right...one could pass the input stream to the parser
> and ignore the lexer..hmm...anybody have an opinion?
> Ter


From jose.ventura.roda at gmail.com  Tue Jul 11 00:57:16 2006
From: jose.ventura.roda at gmail.com (Jose Ventura)
Date: Tue Jul 11 00:57:18 2006
Subject: [antlr-interest] antlr3.jar for apache-ant
Message-ID: <e39abda10607110057i68b61b90nf97724498d94e1d9@mail.gmail.com>

Hi,

I don't found an antlr3.jar for apache-ant. If exists, do someone know where
is it?

Thank's
Jos? Ventura
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060711/ad4d1351/attachment.html
From Anthony.Youngman at eca-international.com  Tue Jul 11 02:49:30 2006
From: Anthony.Youngman at eca-international.com (Anthony Youngman)
Date: Tue Jul 11 02:49:35 2006
Subject: [antlr-interest] 3.0 final will require t.g has t in it
In-Reply-To: <89FA6179-0D97-469F-B543-9B9119D894A9@martin-probst.com>
Message-ID: <C7FE35004D40FD45AA342991B88CE40401290320@lnml1.eca-international.local>

Well, I'm not an experienced user of Antlr, but in my attempts to get it
working I have one source file (BASIC.g), which contains three
consecutive grammar definitions, namely BASICLexer, BASICParser and
BASICTreeParser.

Amongst other things, that seems to be a good way of not getting the
symbol table messed up :-) and it also makes sense to me as a simple way
to keep everything together.

So, basically :-) , I'm already using this technique, and all the stuff
about forcing the grammar file name to be an exact match to the java
class generated is likely to break my (and probably other peoples') way
of thinking.

Forcing the file name to match the root of a bunch of grammar classes,
however, is sensible and I'd go along with that no problem...

Cheers,
Wol

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Martin Probst
Sent: 10 July 2006 20:01
To: Terence Parr
Cc: Antlr Interest
Subject: Re: [antlr-interest] 3.0 final will require t.g has t in it

>>  So "grammar MyLang" would generate MyLangParser.(java|tokens)
>> and MyLangLexer.(java|tokens).
>
> Heh, that's pretty good!  Anybody object to this?

Well, why would you want to expose the Lexer as a top-level class if  
the user didn't even declare it explicitly? Have it be a nested class  
within the parser, that would keep the user surprise as low as possible.

Martin

* ************************************************************************ *

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 8272 5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

* ************************************************************************ *
From jose.ventura.roda at gmail.com  Tue Jul 11 06:31:11 2006
From: jose.ventura.roda at gmail.com (Jose Ventura)
Date: Tue Jul 11 06:31:18 2006
Subject: [antlr-interest] antlr3 & ant
Message-ID: <e39abda10607110631x48d2a838mebeb61c54fa5d02c@mail.gmail.com>

Hi all,

I'm have a problem with ant & antlr3. --other more ;-)

If I run the ant with a antlr2 grammar all it's ok, but if it's a antlr3
grammar not run ok. The classpath link with antlr3, and the -d option of ant
show these messages:


generator:
  [antlr] Found C:\antlr\300\lib\antlr-2.7.6.jar
  [antlr] Found C:\antlr\300\lib\antlr-2.7.6.jar
  [antlr] Setting target to: C:\Documents and Settings\JVR3651A\My
Documents\java\Transformer\LeTra\src\letra\comp\letra.g
  [antlr] Setting output directory to: C:\Documents and Settings\JVR3651A\My
Documents\java\Transformer\LeTra\src\letra\comp

BUILD FAILED
C:\Documents and Settings\JVR3651A\My
Documents\java\Transformer\LeTra\build.xml:32: Unable to determine generated
class

for this target:

<target name="generator">
     <antlr target="${letra.g}" />
</target>



Can anyone help me?

Thank's
Jos? Ventura.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060711/a688e25f/attachment.html
From norbert.ploett at siemens.com  Tue Jul 11 06:32:22 2006
From: norbert.ploett at siemens.com (Ploett, Norbert)
Date: Tue Jul 11 06:32:28 2006
Subject: [antlr-interest] Using nonterminals as root node in tree parser
	rules
Message-ID: <88AEA5AC18A141439A0D954EB037B0D3068B4063@ERLD164A.ww004.siemens.net>

Hi all, 
 
it seems that this cannot be done in an antlr tree parser:
 
nonterminal :
        TERMINAL1
    |   TERMINAL2
    ;
 
rule : 
        #(nonterminal other_stuff)
    ;
 
So we have several alternative tokens as the tree root that we would
like to match with rule.
Any other elegant way to do this short of
 
rule :
        #(TERMINAL1 other_stuff)
    |   #(TERMINAL2 other_stuff)
    ;
 
?
 
Thanks,
 
 
Norbert
From jsamort at gmail.com  Tue Jul 11 07:57:46 2006
From: jsamort at gmail.com (Scott Amort)
Date: Tue Jul 11 07:57:51 2006
Subject: [antlr-interest] Re: failed assertion in CircularQueue.hpp
In-Reply-To: <44B2E234.9010807@gmail.com>
References: <44B2E234.9010807@gmail.com>
Message-ID: <44B3BC6A.4030909@gmail.com>

Scott Amort wrote:
> scripts/../lib/cpp/antlr/CircularQueue.hpp:59: void
> antlr::CircularQueue<T>::removeItems(size_t) [with T =
> antlr::TokenRefCount<antlr::Token>]: Assertion `nb <= entries()' failed.

Sorry to be a pain, but has anyone encountered this before?  Testing my
library has ground to a halt until I can figure this one out.

It seems to be related to my throwing a SemanticException from within
the parser (during some validation).  Here is the actual code that
triggers it:

if ( node->getFirstChild()->getType() == GTokenTypes::GTaggedRange ) {
  if ( node->getText() != "requiredrange" ) {
    throw antlr::SemanticException(
      "tag: '\\" + node->toString() + "' is missing required tagged range",
      getFilename(),
      node->getLine(),
      node->getColumn());
  }
}

Nothing out of the ordinary, I don't think, and I use similar code in
numerous other places in the parser with no ill effect.  The only
possible difference I can see is that GTaggedRange is a dummy token type
that I manually created during parsing i.e. with:

tokens { // dummy header tokens
  ...
  GTaggedRange;
}

and,

## = #( #[GTaggedRange,"TR"], ## );

The failed assertion only began showing up once I introduced this dummy
header token, but it could be coincidence (and I have used other dummy
header tokens without problems in other parts of the parser).

I realize everyone is working hard on the upcoming ANTLR3, but if
someone could spare a few moments to help me out, I would really
appreciate it!

Best,
Scott
From ric.klaren at gmail.com  Tue Jul 11 08:25:22 2006
From: ric.klaren at gmail.com (Ric Klaren)
Date: Tue Jul 11 08:25:26 2006
Subject: [antlr-interest] Re: failed assertion in CircularQueue.hpp
In-Reply-To: <44B3BC6A.4030909@gmail.com>
References: <44B2E234.9010807@gmail.com> <44B3BC6A.4030909@gmail.com>
Message-ID: <bc607a4e0607110825g1a4d283fme2f3bb85a76a4268@mail.gmail.com>

Hi,

On 7/11/06, Scott Amort <jsamort@gmail.com> wrote:
> Scott Amort wrote:
> > scripts/../lib/cpp/antlr/CircularQueue.hpp:59: void
> > antlr::CircularQueue<T>::removeItems(size_t) [with T =
> > antlr::TokenRefCount<antlr::Token>]: Assertion `nb <= entries()' failed.
>
> Sorry to be a pain, but has anyone encountered this before?  Testing my
> library has ground to a halt until I can figure this one out.

There have been a few reports of people triggering this assert. It's
on my antlr 2.7 todo list. But so far I lacked a concise example that
triggered it. If you can get me a somewhat minimal example that
triggers it. (compiling code + input) Then I can look at it. If I have
to reconstruct the problem myself then it will probably stay shelved
untill my holidays.

> It seems to be related to my throwing a SemanticException from within
> the parser (during some validation).  Here is the actual code that
> triggers it:
>
> if ( node->getFirstChild()->getType() == GTokenTypes::GTaggedRange ) {
>   if ( node->getText() != "requiredrange" ) {
>     throw antlr::SemanticException(
>       "tag: '\\" + node->toString() + "' is missing required tagged range",
>       getFilename(),
>       node->getLine(),
>       node->getColumn());
>   }
> }

It's probably significant to know the grammar construct in which it is
used (and it may also be dependant on the input)

> Nothing out of the ordinary, I don't think, and I use similar code in
> numerous other places in the parser with no ill effect.  The only
> possible difference I can see is that GTaggedRange is a dummy token type
> that I manually created during parsing i.e. with:

I strongly doubt wether it is the imaginary token. I would search
along the lines of newly introduced syntactic/semantic predicates or a
change in the test input.

> The failed assertion only began showing up once I introduced this dummy
> header token, but it could be coincidence (and I have used other dummy
> header tokens without problems in other parts of the parser).
>
> I realize everyone is working hard on the upcoming ANTLR3,

I wish I was working on ANTLR3 ;) (or able to sync up on 2 stuff)

> but if someone could spare a few moments to help me out, I would really
> appreciate it!

My time is pretty limited but I'll try and have a look again. If you
can provide code to reproduce it, then that would speed things up
significantly.

Cheers,

Ric
From jsamort at gmail.com  Tue Jul 11 10:05:18 2006
From: jsamort at gmail.com (Scott Amort)
Date: Tue Jul 11 10:05:23 2006
Subject: [antlr-interest] Re: failed assertion in CircularQueue.hpp
In-Reply-To: <bc607a4e0607110825g1a4d283fme2f3bb85a76a4268@mail.gmail.com>
References: <44B2E234.9010807@gmail.com> <44B3BC6A.4030909@gmail.com>
	<bc607a4e0607110825g1a4d283fme2f3bb85a76a4268@mail.gmail.com>
Message-ID: <44B3DA4E.4010102@gmail.com>

Hi Ric,

Ric Klaren wrote:
> There have been a few reports of people triggering this assert. It's
> on my antlr 2.7 todo list. But so far I lacked a concise example that
> triggered it. If you can get me a somewhat minimal example that
> triggers it. (compiling code + input) Then I can look at it. If I have
> to reconstruct the problem myself then it will probably stay shelved
> untill my holidays.

Thanks for the response - I will try to trim away the excess and see if
I can provide you with a minimal example of the problem.  I did rework
my grammar to not use imaginary tokens, but that didn't solve the
problem.  The basic structure of the grammar hasn't changed, but it is a
new set of input.  I'll be in touch soon.

Thanks again,
Scott
From rbmullen at umich.edu  Tue Jul 11 10:14:29 2006
From: rbmullen at umich.edu (Robert Mullenix)
Date: Tue Jul 11 10:14:33 2006
Subject: [antlr-interest] C++ to C conversion
Message-ID: <8ed5e9d0607111014gf0333depde5a9425c0a15060@mail.gmail.com>

Hello group,

Has anyone already written a conversion from C++ to C?  I don't want to
completely reinventing the wheel.

I've looked at LLVM, but think that ANTLR would be easier to work with
(especially with the slick IDE).

Thanks,
Robert Mullenix
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060711/8a61d153/attachment.html
From m.axmed at gmail.com  Tue Jul 11 10:45:07 2006
From: m.axmed at gmail.com (Mo)
Date: Tue Jul 11 10:45:12 2006
Subject: [antlr-interest] newbie faces unexpected tokens
Message-ID: <460fae650607111045t5ce642fej222849e4cac64bbf@mail.gmail.com>

Hi all,
 i'm an antlr newbie and realise it has probably been posted before,
but i cant find much

i'm trying to read strings in the form of:   foo.bar.foo and parse
them into a tree structure for later  and have the following simple
grammar definitions

in the   lexer

DOT : '.' ;
IDENT
      options {testLiterals=true;}
      : ('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9')*
      ;


and in the parser an simple test case

event
      : "on"^ IDENT  LBRACE!
          symbol SEMI!
           RBRACE!
    ;

symbol
        :  IDENT   (DOT^ IDENT )*
        ;


however any attempt at reading:  foo.bar.foo;
returns the following error

 unexpected char: 'b'

using

 symbol
         :  IDENT   ("."^ IDENT )*
         ;

returns

expecting SEMI, found 'barfoo'


coincidentally if i replace the DOT in  the symbol definition with
something else i.e. COMMA it works ...

could anybody be kind enough to point out were i'm being stupid here !

your time and help is much appreciated --
cheers
 mo
From herumor at fastwebnet.it  Tue Jul 11 11:36:58 2006
From: herumor at fastwebnet.it (Herumor)
Date: Tue Jul 11 11:36:57 2006
Subject: [antlr-interest] Compiling errors with antlrworks
Message-ID: <44B3EFCA.3000400@fastwebnet.it>

I'm creating this grammar for generating a Java sub-languge as an
exercise and I'm having some compiling errors.
http://rifers.org/paste/show/1096
There you can find the code and the errors I'm having.
I'm using the last version of antlrworks to compile that as to produce
that grammar I followed the tail of the Java grammar on the website that
is made for ANTLR 3.0.
Greetings,
Deviad

From jsamort at gmail.com  Tue Jul 11 12:45:16 2006
From: jsamort at gmail.com (Scott Amort)
Date: Tue Jul 11 12:45:20 2006
Subject: [antlr-interest] newbie faces unexpected tokens
In-Reply-To: <460fae650607111045t5ce642fej222849e4cac64bbf@mail.gmail.com>
References: <460fae650607111045t5ce642fej222849e4cac64bbf@mail.gmail.com>
Message-ID: <44B3FFCC.7000700@gmail.com>

Hi Mo,

Mo wrote:
> Hi all,
> i'm an antlr newbie and realise it has probably been posted before,
> but i cant find much
> 
> i'm trying to read strings in the form of:   foo.bar.foo and parse
> them into a tree structure for later  and have the following simple
> grammar definitions
> 

The following successfully parsed (ignoring whitespace):

on foo{foo.bar.foo;}

Lexer:

IDENT
options {
  testLiterals = true;
}
	: ('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9')*
	;

DOT
	: '.'
	;

LBRACE
	: '{'
	;

RBRACE
	: '}'
	;

SEMI
	: ';'
	;

Parser:

event
	: "on"^ IDENT LBRACE! symbol SEMI! RBRACE!
	;

symbol
	: IDENT (DOT^ IDENT)*
	;

Perhaps if you post your full grammar file it may be easier to see what
is happening.

Best,
Scott
From jsamort at gmail.com  Tue Jul 11 12:52:28 2006
From: jsamort at gmail.com (Scott Amort)
Date: Tue Jul 11 12:52:33 2006
Subject: [antlr-interest] Compiling errors with antlrworks
In-Reply-To: <44B3EFCA.3000400@fastwebnet.it>
References: <44B3EFCA.3000400@fastwebnet.it>
Message-ID: <44B4017C.1020905@gmail.com>

Hi Deviad,

Herumor wrote:
> I'm creating this grammar for generating a Java sub-languge as an
> exercise and I'm having some compiling errors.
> http://rifers.org/paste/show/1096

The error seems pretty self-explanatory,

'myjavagrammar.g:4:9: unexpected token: ('

You are using round brackets to enclose your options, instead of {}.

Best,
Scott
From parrt at cs.usfca.edu  Tue Jul 11 12:54:28 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Jul 11 12:52:38 2006
Subject: [antlr-interest] 3.0 final will require t.g has t in it
In-Reply-To: <C7FE35004D40FD45AA342991B88CE40401290320@lnml1.eca-international.local>
References: <C7FE35004D40FD45AA342991B88CE40401290320@lnml1.eca-international.local>
Message-ID: <17052393-B91B-477A-9E5F-D14A90E87A3D@cs.usfca.edu>


On Jul 11, 2006, at 2:49 AM, Anthony Youngman wrote:

> Well, I'm not an experienced user of Antlr, but in my attempts to  
> get it
> working I have one source file (BASIC.g), which contains three
> consecutive grammar definitions, namely BASICLexer, BASICParser and
> BASICTreeParser.

Well, v3 doesn't allow multiple 'grammar' defs per file.

> [snip]
>
> Forcing the file name to match the root of a bunch of grammar classes,
> however, is sensible and I'd go along with that no problem...

So I think people are proposing C.g generating CParser.java if  
parser, CLexer.java if lexer grammar, CTreeParser.java if tree  
grammar.  If combined then CParser.java *and* CLexer.java.

In the future if you need to reference a grammar, you'd use it's name  
like C, which must be in C.g.  The type would not be specified just  
like you don't differentiate in java between class and interface and  
enum.

Makes sense?
Ter
From parrt at cs.usfca.edu  Tue Jul 11 12:55:54 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Jul 11 12:54:07 2006
Subject: [antlr-interest] Using nonterminals as root node in tree parser
	rules
In-Reply-To: <88AEA5AC18A141439A0D954EB037B0D3068B4063@ERLD164A.ww004.siemens.net>
References: <88AEA5AC18A141439A0D954EB037B0D3068B4063@ERLD164A.ww004.siemens.net>
Message-ID: <5BE02C03-989B-4398-AD54-75CE98327B08@cs.usfca.edu>


On Jul 11, 2006, at 6:32 AM, Ploett, Norbert wrote:

> Hi all,
>
> it seems that this cannot be done in an antlr tree parser:
>
> nonterminal :
>         TERMINAL1
>     |   TERMINAL2
>     ;
>
> rule :
>         #(nonterminal other_stuff)
>     ;

Allowed in v3, but not v2.

Ter

From m.axmed at gmail.com  Tue Jul 11 14:33:46 2006
From: m.axmed at gmail.com (Mo)
Date: Tue Jul 11 14:33:50 2006
Subject: [antlr-interest] newbie faces unexpected tokens
In-Reply-To: <44B3FFCC.7000700@gmail.com>
References: <460fae650607111045t5ce642fej222849e4cac64bbf@mail.gmail.com>
	<44B3FFCC.7000700@gmail.com>
Message-ID: <460fae650607111433v1bc7efd1m963c1383837b8942@mail.gmail.com>

Hi Scott,

On 7/11/06, Scott Amort <jsamort@gmail.com> wrote:
> Hi Mo,
>

> The following successfully parsed (ignoring whitespace):
>
> on foo{foo.bar.foo;}

umm, must  be the rest of my grammar then, but it's virtually all commented out!


> Perhaps if you post your full grammar file it may be easier to see what
> is happening.


anyhow here it is

-----------------------------------

class PicycleLexer extends Lexer;
	options {
		k = 3;
		exportVocab = PicycleScript;
		charVocabulary = '\3'..'\377';
		testLiterals = false;
	}

	// Whitespace -- ignored
	WS
	  : ( ' '
	    | '\t'
	    | '\f'
	
	    // handle newlines
	    | ( "\r\n"  // DOS/Windows
	      | '\r'    // Macintosh
	      | '\n'    // Unix
	      )
	      // increment the line count in the scanner
	      { newline(); }
	    )
	    { $setType(Token.SKIP); }
	  ;
	
	 // Single-line comments
	COMMENT
	  : ( ("//" | '#') (~('\n'|'\r'))* )
	  	
	    { $setType(Token.SKIP); }
	  ;
	
	// multiple-line comments
	ML_COMMENT
	  : "/*"	
		( /* '\r' '\n' can be matched in one alternative or by matching
	  	 '\r' in one iteration and '\n' in another. I am trying to
	  		 handle any flavor of newline that comes in, but the language
	   		that allows both "\r\n" and "\r" and "\n" to all be valid
	   		newline is ambiguous. Consequently, the resulting grammar
	   		must be ambiguous. I'm shutting this warning off.
		*/
	      options {
	        generateAmbigWarnings=false;
	      }
	      :  { LA(2)!='/' }? '*'
	      | '\r' '\n' {newline();}
	      | '\r' {newline();}
	      | '\n' {newline();}
	      | ~('*'|'\n'|'\r')
	    )*
	    "*/"
	    {$setType(Token.SKIP);}
	;

	PLUS	: '+';
	DASH	: '-' (NUMBER { $setType(NUMBER); })?;
	STAR	: '*';
	MOD		: '%';
	SLASH	: '/';
	LPREN	: '(';
	RPREN	: ')';
	LBRACE	: '{';
	RBRACE	: '}';
	COMMA	: ',';
	DOT		: '.';
	IS		: '=';
	EQ		: "==";
	NE		: "!=";
	GE		: ">=";
	LE		: "<=";
	GT		: '>';
	LT		: '<';
	NOT		: '!';
	AND     : "&&";
	OR		: "||";
	SEMI	: ';';
	COLON	: ':';
	ARROW	: "->";
	
	IDENT
	  options {testLiterals=true;}
	  : ('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9')*
	  ;
	
	NUMBER options {testLiterals=true;}
	  : ('0'..'9')+ ('.' ('0'..'9')*)? | '.' ('0'..'9')+;

	STRING :   '"'!
	    ( '"' '"'!
	    )*
	    ( '"'!
	    | // nothing -- write error message
	    )
		;



class PicycleParser extends Parser;
	options {
		k = 3;
		buildAST = true;
		exportVocab = PicycleScript;
	}
	tokens {
		ROOT;
	}
	
	program :
			"policy"^ IDENT LBRACE! (policy )+ RBRACE!
	;
	
	policy
		:
		 event
		 | function
		 | assignmentStatement
		;

   	function
   		: "function"^  IDENT farguments
   			LBRACE!
   				(statement)*
   				(return_expr ) ?
   			RBRACE!

   		;
	
	farguments
		: LPREN^ (IDENT (COMMA! IDENT)*)?  RPREN! ;
 	
 	event
  	: "on"^ IDENT  LBRACE!
	  	symbol SEMI!
  	 /*  (assignmentStatement)*	  	
	  (	
	    (preconditions)*
	   	(action)*
	   	(postconditions)* 	
	    )  	*/
	   	RBRACE!
	;
	
  preconditions
  	:
  		"preconditions"^  LBRACE!
   	   	(statement )*	
		RBRACE!
	;

  action
  	: "action"^  LBRACE!
   	   	(statement )*	
  	   	RBRACE!
	;

  postconditions
  	: "postconditions"^  LBRACE!
   	   	(statement )*	
   	 RBRACE!
	;

  	
	statement
		:
		 assignmentStatement
		|  foreach
		| while_stmt
		| if_stmt
		| function_call SEMI!
		;
		

	assignmentStatement
	  	: 	
	  	symbol (IS^ expression ) SEMI!
	  		
	  	;

	
	while_stmt
		: "while"^ LPREN! logic RPREN! then_stmt ;	
	foreach
		: "foreach"^ LPREN!
			 (logic
			 	|
			 	{ #foreach = #(#foreach, #([NUMBER, "1"])); }
			 ) 	RPREN! then_stmt
		;

	if_stmt
		: "if"^ LPREN! logic RPREN! then_stmt (else_stmt)*		
		;		
		
	then_stmt
		: "then"^ LBRACE!   (statement)*  (return_expr )? RBRACE!
		;	

	else_stmt
		: "elif"^  LPREN! logic RPREN! then_stmt ( else_stmt)
		| "else"^ LBRACE!   (statement)* (return_expr )? RBRACE!
		;
		 	
	
	expression
		: expression_2 (PLUS^ expression_2 | DASH^ expression_2)*
		;

	expression_2
		: expression_3 (STAR^ expression_3 | SLASH^ expression_3 | MOD^
expression_3)*
		;

	expression_3
		: atom | LPREN! expression RPREN!
		;
		
	logic
		: logic_2
			(
			    AND^ logic_2
			  | OR^ logic_2
			)*
		;

	logic_2
		: logic_3
			(
				
			  GT^ logic_3
			  | LT^ logic_3
			  | GE^ logic_3
			  | EQ^ logic_3
			  | NE^ logic_3
			) *
		;
		
	logic_3
		: (NOT^)? logic_4
		;
		
	logic_4
		:( LPREN! logic) => RPREN! 	
		| expression
		;
		
	atom
		: NUMBER
		| STRING
		| symbol
		| function_call
		;
	
	symbol
		:  IDENT   (DOT^ IDENT )*
		;
	

	function_call 	
		:  (IDENT^ LPREN!
			(
				arguments
				| !
			 	{ #function_call = #(#function_call, #([IDENT, "null"])); }
				)
			RPREN!)
		;
	
	return_expr
		: "return" ^
			(
				atom
				| !
			 	{ #return_expr = #(#return_expr, #([IDENT, "null"])); }
			 	
			)
			SEMI!	
		;
	
	
	arguments
		:  (atom (COMMA! atom)*)
		;


---------------

cheers
 mo
From sunjigang1965 at yahoo.com.cn  Tue Jul 11 16:26:22 2006
From: sunjigang1965 at yahoo.com.cn (=?gb2312?q?=CB=EF=BC=CD=B8=D5=20Jigang=20(Robert)=20Sun?=)
Date: Tue Jul 11 16:26:28 2006
Subject: [antlr-interest] Should the lex warning be ignored?
Message-ID: <20060711232622.64155.qmail@web15709.mail.cnb.yahoo.com>

The following lexer rules IntDenot and FunnyId are obviously distinguishable, but warning still be
given:

options {
    language  = "CSharp";
    namespace = "Clean"; 
}

class Lex extends Lexer;
options { 
            k=2;            
        }                

IntDenot: (Sign)? (Digit)+;
FunnyId: ('@'|Sign)+;

protected Digit: '0'..'9';
protected Sign: '+'|'-'|'~';


lex.g: warning:lexical nondeterminism between rules IntDenot and FunnyId upon
lex.g:     k==1:'+','-','~'
lex.g:     k==2:<end-of-token>

I know there are maybe input like "9", of which the length is less than 2, but it is still could
be distinguished with FunnyIds like "@", "+" and "+-". Should I ignore the warning?

Thanks.

Jigang




		
___________________________________________________________ 
-3.5G20M 
http://cn.mail.yahoo.com
From coxbrian at msu.edu  Tue Jul 11 18:19:42 2006
From: coxbrian at msu.edu (Brian Cox)
Date: Tue Jul 11 18:19:34 2006
Subject: [antlr-interest] 3.0 final will require t.g has t in it
In-Reply-To: <17052393-B91B-477A-9E5F-D14A90E87A3D@cs.usfca.edu>
References: <C7FE35004D40FD45AA342991B88CE40401290320@lnml1.eca-international.local>
	<17052393-B91B-477A-9E5F-D14A90E87A3D@cs.usfca.edu>
Message-ID: <200607112119.42622.coxbrian@msu.edu>

On Tuesday 11 July 2006 15:54, Terence Parr wrote:
> So I think people are proposing C.g generating CParser.java if
> parser, CLexer.java if lexer grammar, CTreeParser.java if tree
> grammar.  If combined then CParser.java *and* CLexer.java.
>
> In the future if you need to reference a grammar, you'd use it's name
> like C, which must be in C.g.  The type would not be specified just
> like you don't differentiate in java between class and interface and
> enum.

If there can be only one grammar definition per file, then I would assume that 
sooner or later there's going to be a need for people to have two or three 
files per language to specify the parser as well as the lexer and/or the tree 
parser(s).  I suspect the natural tendency would be to name the primary 
grammar as just the name of the language, with additional grammars consisting 
of the language name plus the type of grammar.

For example, lets say there's a C.g, CLexer.g and CTreeParser.g?  Would the 
generated classes then be CParser, CLexerLexer and CTreeParserTreeParser?  
That doesn't make sense to me.  Or would there be special handling for the 
case where the type of grammar is embedded into the grammar name?

-- 
 * Brian Cox <coxbrian@msu.edu>
From mail at martin-probst.com  Wed Jul 12 00:20:46 2006
From: mail at martin-probst.com (Martin Probst)
Date: Wed Jul 12 00:20:54 2006
Subject: [antlr-interest] 3.0 final will require t.g has t in it
In-Reply-To: <17052393-B91B-477A-9E5F-D14A90E87A3D@cs.usfca.edu>
References: <C7FE35004D40FD45AA342991B88CE40401290320@lnml1.eca-international.local>
	<17052393-B91B-477A-9E5F-D14A90E87A3D@cs.usfca.edu>
Message-ID: <F4A22DE7-BB54-477F-BF83-1FE80B3585B1@martin-probst.com>

> So I think people are proposing C.g generating CParser.java if  
> parser, CLexer.java if lexer grammar, CTreeParser.java if tree  
> grammar.  If combined then CParser.java *and* CLexer.java.

I wouldn't go that way. In that case you'd need build tools like ANT  
to find out of which type the included grammar in F.g is - not good.  
If you have only exactly one grammar per .g file, then you can simply  
name the file FooParser.g and you will not run into the  
FooParserLexer.java problem the original author described.

This suffix will create the need to either look into the .g file, or  
start guessing (in a certain order), both of which isn't a good idea  
in my opinion.

Martin

From herumor at fastwebnet.it  Wed Jul 12 01:43:13 2006
From: herumor at fastwebnet.it (Herumor)
Date: Wed Jul 12 01:43:18 2006
Subject: [antlr-interest] AST trees
Message-ID: <44B4B621.6040907@fastwebnet.it>

Hello everyone,

I attached to this e-mail the AST that I found in the Java grammar on
ANTLR'S website to define "expression".
Since I'm a newbie in this kind of things I googled around and I found a
cool and easy example of an AST tree:

orexpression : andexpression ("or"^ andexpression)*
                 ;
andexpression
                 : notexpression ("and"^ notexpression)*
                 ;
notexpression
                : ("not"^)? atom
                ;
atom
         : condition
         | LEFT_PAREN! orexpression RIGHT_PAREN!

condition
        : "true"
        | "false" ... ... etc. etc.

What I understood as a newbie is that this technique is used to define
the precedence between the operators, which is for sure a useful thing.
Another thing I understood is that AST works like a binary tree:
                      A - > B | C

or expression  = andexpression;
andexpression = notexpression;
notexpression = ["not"]  atom
atom = condition LEFT_PAREN! orexpression RIGHT_PAREN!
condition  = "true" | "false" ...

So, in the end     notexpression = ["not"]  ("true" | "false")
LEFT_PAREN! orexpression RIGHT_PAREN!
Now, this was a simple AST tree, but how does the attached AST work? Is
there anyway to make the attached AST tree more "scholastic"?
After all I need just a parser with the rules which produce a simple
Java sublanguage with the main things: binary selection, while loop,
sequence, class...
so operator precedence is a plus in my case. But doing this project I
saw that defining "expression" is quite complex and everything depends
on how well you define it.
Expression is needed in these cases in my specific case: Var
declaration, assignment (that in java can be done on casting time),
binary selection, while loop.
I came to AST tree because I saw that it was impossible to define a
single keyword called expression and create rules straight with
terminals because that produced errors like:
there are 1,2, 3 choices which might produce this and that, so I
disabled choices 1 and 2...
This said is an AST tree needed in my case or are there some
"scholastic" and easy ways to do the job?

Thanks for help,
Deviad

-------------- next part --------------
parExpression
        :       '(' expression ')'
        ;


expression
        :       conditionalExpression (assignmentOperator expression)?
        ;
        
assignmentOperator
        :       '='
    |   '+='
    |   '-='
    |   '*='
    |   '/='
    |   '&='
    |   '|='
    |   '^='
    |   '%='
    |   '<' '<' '='
    |   '>' '>' '='
    |   '>' '>' '>' '='
        ;

conditionalExpression
    :   conditionalOrExpression ( '?' expression ':' expression )?
        ;

conditionalOrExpression
    :   conditionalAndExpression ( '||' conditionalAndExpression )*
        ;

conditionalAndExpression
    :   inclusiveOrExpression ( '&&' inclusiveOrExpression )*
        ;

inclusiveOrExpression
    :   exclusiveOrExpression ( '|' exclusiveOrExpression )*
        ;

exclusiveOrExpression
    :   andExpression ( '^' andExpression )*
        ;

andExpression
    :   equalityExpression ( '&' equalityExpression )*
        ;

equalityExpression
    :   instanceOfExpression ( ('==' | '!=') instanceOfExpression )*
        ;

instanceOfExpression
    :   relationalExpression ('instanceof' type)?
        ;

relationalExpression
    :   shiftExpression ( relationalOp shiftExpression )*
        ;
        
relationalOp
        :       ('<' '=' | '>' '=' | '<' | '>')
        ;

shiftExpression
    :   additiveExpression ( shiftOp additiveExpression )*
        ;

        // TODO: need a sem pred to check column on these >>>
shiftOp
        :       ('<' '<' | '>' '>' '>' | '>' '>')
        ;


additiveExpression
    :   multiplicativeExpression ( ('+' | '-') multiplicativeExpression )*
        ;

multiplicativeExpression
    :   unaryExpression ( ( '*' | '/' | '%' ) unaryExpression )*
        ;
        
unaryExpression
    :   '+' unaryExpression
    |   '-' unaryExpression
    |   '++' primary
    |   '--' primary
    |   unaryExpressionNotPlusMinus
    ;

unaryExpressionNotPlusMinus
    :   '~' unaryExpression
    |   '!' unaryExpression
    |   castExpression
    |   primary selector* ('++'|'--')?
    ;

castExpression
    :  '(' primitiveType ')' unaryExpression
    |  '(' (expression | type) ')' unaryExpressionNotPlusMinus
    ;

primary
    :   parExpression
    |   nonWildcardTypeArguments
        (explicitGenericInvocationSuffix | 'this' arguments)
    |   'this' (arguments)?
    |   'super' superSuffix
    |   literal
    |   'new' creator
    |   Identifier ('.' Identifier)* (identifierSuffix)?
    |   primitiveType ('[' ']')* '.' 'class'
    |   'void' '.' 'class'
        ;

identifierSuffix
        :       ('[' ']')+ '.' 'class'
        |       ('[' expression ']')+ // can also be matched by selector, but do here
    |   arguments
    |   '.' 'class'
    |   '.' explicitGenericInvocation
    |   '.' 'this'
    |   '.' 'super' arguments
    |   '.' 'new' (nonWildcardTypeArguments)? innerCreator
        ;
        
creator
        :       nonWildcardTypeArguments? createdName
        (arrayCreatorRest | classCreatorRest)
        ;

createdName
        :       Identifier nonWildcardTypeArguments?
        ('.' Identifier nonWildcardTypeArguments?)*
    |   primitiveType
        ;
        
innerCreator
        :       Identifier classCreatorRest
        ;

arrayCreatorRest
        :       '['
        (   ']' ('[' ']')* arrayInitializer
        |   expression ']' ('[' expression ']')* ('[' ']')*
        )
        ;

classCreatorRest
        :       arguments classBody?
        ;
        
explicitGenericInvocation
        :       nonWildcardTypeArguments explicitGenericInvocationSuffix
        ;
        
nonWildcardTypeArguments
        :       '<' typeList '>'
        ;
        
explicitGenericInvocationSuffix
        :       'super' superSuffix
        |   Identifier arguments
        ;
        
selector
        :       '.' Identifier (arguments)?
        |   '.' 'this'
        |   '.' 'super' superSuffix
        |   '.' 'new' (nonWildcardTypeArguments)? innerCreator
        |   '[' expression ']'
        ;
        
superSuffix
        :       arguments
        |   '.' Identifier (arguments)?
    ;

arguments
        :       '(' expressionList? ')'
        ;
From norbert.ploett at siemens.com  Wed Jul 12 01:06:07 2006
From: norbert.ploett at siemens.com (Ploett, Norbert)
Date: Wed Jul 12 02:10:36 2006
Subject: [antlr-interest] Parser sneaks out of file with unknown tokens
Message-ID: <88AEA5AC18A141439A0D954EB037B0D3068B45A5@ERLD164A.ww004.siemens.net>

Hi all,

let me give you an example:

Here is what my parser looks like, simplified of course:
==================================
class SimpleParser extends Parser;

options { k = 2; buildAST = true; defaultErrorHandler = false ; }

edd 
    		options {defaultErrorHandler=true;} 
	:	(definition)+
	;

definition
	:	VARIABLE IDENTIFIER SEMICOLON
	;
==================================

Now I give this input:
==================================
VARIABLE A ;
VARIABLE B ;
C LIKE VARIABLE A ;
==================================

The parser should (in my opinion) choke on the last line and report an
error. But this is not the case. In the edd() method the parser is in an
infinite loop, trying to evaluate "definition"s. When trying to evaluate
another "definition" it notes that an IDENTIFIER token is not in the
entry set to the "definition" rule, exits the loop and just quits
without any error indication.

What is the intended way to get an error message in this situation?

Thanks for hints


Norbert Ploett


From antlr at shmuelhome.mine.nu  Wed Jul 12 03:03:54 2006
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Wed Jul 12 03:04:04 2006
Subject: [antlr-interest] Parser sneaks out of file with unknown tokens
In-Reply-To: <88AEA5AC18A141439A0D954EB037B0D3068B45A5@ERLD164A.ww004.siemens.net>
References: <88AEA5AC18A141439A0D954EB037B0D3068B45A5@ERLD164A.ww004.siemens.net>
Message-ID: <44B4C90A.5010403@shmuelhome.mine.nu>

Ploett, Norbert wrote:
> Hi all,
>
> let me give you an example:
>
> Here is what my parser looks like, simplified of course:
> ==================================
> class SimpleParser extends Parser;
>
> options { k = 2; buildAST = true; defaultErrorHandler = false ; }
>
> edd 
>     		options {defaultErrorHandler=true;} 
> 	:	(definition)+
> 	;
>
> definition
> 	:	VARIABLE IDENTIFIER SEMICOLON
> 	;
> ==================================
>
> Now I give this input:
> ==================================
> VARIABLE A ;
> VARIABLE B ;
> C LIKE VARIABLE A ;
> ==================================
>
> The parser should (in my opinion) choke on the last line and report an
> error. But this is not the case. In the edd() method the parser is in an
> infinite loop, trying to evaluate "definition"s. When trying to evaluate
> another "definition" it notes that an IDENTIFIER token is not in the
> entry set to the "definition" rule, exits the loop and just quits
> without any error indication.
>
> What is the intended way to get an error message in this situation?
>
> Thanks for hints
>
>
> Norbert Ploett
>
>
>   
Your grammar was obeyed by the input. You had two instances of 
"definition". To get it to fail if there is any bad input, you need to 
specify a termination condition, i.e. a token that must follow the 
repeated pattern (definition). For this simple case that would be EOF. 
So change your grammar to read

:	(definition)+ EOF




-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.394 / Virus Database: 268.9.10/384 - Release Date: 7/10/2006

From joerg at jrsoftware.de  Wed Jul 12 03:29:59 2006
From: joerg at jrsoftware.de (=?ISO-8859-1?Q?J=F6rg_Rathlev?=)
Date: Wed Jul 12 03:30:08 2006
Subject: [antlr-interest] newbie faces unexpected tokens
In-Reply-To: <460fae650607111433v1bc7efd1m963c1383837b8942@mail.gmail.com>
References: <460fae650607111045t5ce642fej222849e4cac64bbf@mail.gmail.com>	<44B3FFCC.7000700@gmail.com>
	<460fae650607111433v1bc7efd1m963c1383837b8942@mail.gmail.com>
Message-ID: <44B4CF27.2020300@jrsoftware.de>

Hi Mo,

> 	NUMBER options {testLiterals=true;}
> 	  : ('0'..'9')+ ('.' ('0'..'9')*)? | '.' ('0'..'9')+;

I'm just guessing, but maybe the lexer tries to read ".bar" as a NUMBER
token, not as a DOT followed by an IDENT. The lookahead sets of those
two alternatives should be different, but maybe they are not due to
Antlr's linear approximate lookahead. Do you get any nondeterminism
warnings?

You can probably use syntactic predicates to solve this problem, or you
could do something like the JavaLexer in java.g does, that is, rewrite
the second alternative of your number rule to something like the
following and remove the DOT rule, so that a DOT token will be
recognized inside the NUMBER rule:

  '.' {_ttype = DOT;} ('0'..'9' {_ttype = NUMBER;} )+


Cheers
Joerg

From sohail at taggedtype.net  Wed Jul 12 09:55:58 2006
From: sohail at taggedtype.net (Sohail Somani)
Date: Wed Jul 12 09:56:23 2006
Subject: [antlr-interest] antlr 2.7.6 cpp target - unnecessary recompliation
Message-ID: <1152723358.5291.1.camel@localhost.localdomain>

Hi,

I'm trying to avoid unnecessary recompilation where adding a header in
my tree parser's implementation or changing data structures that it uses
in name only (in the interface) forces the driver to recompile.

Is there a syntax for including headers in only the cpp file?

Thanks,

Sohail


From sohail at taggedtype.net  Wed Jul 12 09:57:31 2006
From: sohail at taggedtype.net (Sohail Somani)
Date: Wed Jul 12 09:57:42 2006
Subject: [antlr-interest] antlr 2.7.6 cpp target - unnecessary
	recompliation
In-Reply-To: <1152723358.5291.1.camel@localhost.localdomain>
References: <1152723358.5291.1.camel@localhost.localdomain>
Message-ID: <1152723451.5291.4.camel@localhost.localdomain>

Err should be 2.7.5 :)



From sohail at taggedtype.net  Wed Jul 12 10:02:30 2006
From: sohail at taggedtype.net (Sohail Somani)
Date: Wed Jul 12 10:02:38 2006
Subject: [antlr-interest] antlr 2.7.6 cpp target - unnecessary
	recompliation
In-Reply-To: <1152723358.5291.1.camel@localhost.localdomain>
References: <1152723358.5291.1.camel@localhost.localdomain>
Message-ID: <1152723750.5291.6.camel@localhost.localdomain>

On Wed, 2006-07-12 at 09:55 -0700, Sohail Somani wrote:
> Hi,
> 
> I'm trying to avoid unnecessary recompilation where adding a header in
> my tree parser's implementation or changing data structures that it uses
> in name only (in the interface) forces the driver to recompile.
> 
> Is there a syntax for including headers in only the cpp file?

Further is there a syntax for including function definitions in the cpp
file?

Thanks

Sohail

From antlr at jazillian.com  Wed Jul 12 10:10:53 2006
From: antlr at jazillian.com (Andy Tripp)
Date: Wed Jul 12 10:10:47 2006
Subject: [antlr-interest] C++ to C conversion
In-Reply-To: <8ed5e9d0607111014gf0333depde5a9425c0a15060@mail.gmail.com>
References: <8ed5e9d0607111014gf0333depde5a9425c0a15060@mail.gmail.com>
Message-ID: <44B52D1D.3050105@jazillian.com>

Robert Mullenix wrote:

> Hello group,
>
> Has anyone already written a conversion from C++ to C?  I don't want 
> to completely reinventing the wheel.
>
> I've looked at LLVM, but think that ANTLR would be easier to work with 
> (especially with the slick IDE).
>
> Thanks,
> Robert Mullenix

Maybe you could bring cfront back from the dead ;)
http://en.wikipedia.org/wiki/Cfront
From sohail at taggedtype.net  Wed Jul 12 11:19:38 2006
From: sohail at taggedtype.net (Sohail Somani)
Date: Wed Jul 12 11:19:51 2006
Subject: [antlr-interest] antlr 2.7.6 cpp target - unnecessary
	recompliation
In-Reply-To: <1152723750.5291.6.camel@localhost.localdomain>
References: <1152723358.5291.1.camel@localhost.localdomain>
	<1152723750.5291.6.camel@localhost.localdomain>
Message-ID: <1152728378.5291.8.camel@localhost.localdomain>

On Wed, 2006-07-12 at 10:02 -0700, Sohail Somani wrote:
> On Wed, 2006-07-12 at 09:55 -0700, Sohail Somani wrote:
> > Hi,
> > 
> > I'm trying to avoid unnecessary recompilation where adding a header in
> > my tree parser's implementation or changing data structures that it uses
> > in name only (in the interface) forces the driver to recompile.
> > 
> > Is there a syntax for including headers in only the cpp file?
> 
> Further is there a syntax for including function definitions in the cpp
> file?

header "<identifier>" {  }

NEVER MIND :)

From asingh05 at vt.edu  Wed Jul 12 12:49:25 2006
From: asingh05 at vt.edu (Amrinder Singh)
Date: Wed Jul 12 12:49:26 2006
Subject: [antlr-interest] Re: tree --> tree transformation
Message-ID: <45383621@zathras>

On Jun 22, 2006, at 12:06 PM, Bernhard Damberger wrote:

As a starting point, would it be possible for me to just make the
> two fixes you outline below (locally), and just build trees using
> that for now? It would be nice to be able to continue my
> development while your still hashing out the issue of dups/no dups
> etc.

Bernhard,

We're also interested in doing tree --> tree transformations.
If you get a chance, please post your fixes on the mailing list.

Thanks


From m.axmed at gmail.com  Wed Jul 12 13:21:57 2006
From: m.axmed at gmail.com (Mo)
Date: Wed Jul 12 13:23:49 2006
Subject: [antlr-interest] newbie faces unexpected tokens
In-Reply-To: <44B4CF27.2020300@jrsoftware.de>
References: <460fae650607111045t5ce642fej222849e4cac64bbf@mail.gmail.com>
	<44B3FFCC.7000700@gmail.com>
	<460fae650607111433v1bc7efd1m963c1383837b8942@mail.gmail.com>
	<44B4CF27.2020300@jrsoftware.de>
Message-ID: <460fae650607121321x5540eca3of0329817e85bca6a@mail.gmail.com>

Hi J?rg,
 thanks for your reply,  having looked at my grammar again after
Scott's response i realised that NUMBER was in conflict

again much much appreciated

cheers
 mo

On 7/12/06, J?rg Rathlev <joerg@jrsoftware.de> wrote:
> Hi Mo,
>
> >       NUMBER options {testLiterals=true;}
> >         : ('0'..'9')+ ('.' ('0'..'9')*)? | '.' ('0'..'9')+;
>
> I'm just guessing, but maybe the lexer tries to read ".bar" as a NUMBER
> token, not as a DOT followed by an IDENT. The lookahead sets of those
> two alternatives should be different, but maybe they are not due to
> Antlr's linear approximate lookahead. Do you get any nondeterminism
> warnings?
>
> You can probably use syntactic predicates to solve this problem, or you
> could do something like the JavaLexer in java.g does, that is, rewrite
> the second alternative of your number rule to something like the
> following and remove the DOT rule, so that a DOT token will be
> recognized inside the NUMBER rule:
>
>   '.' {_ttype = DOT;} ('0'..'9' {_ttype = NUMBER;} )+
>
>
> Cheers
> Joerg
>
>
From jose.ventura.roda at gmail.com  Thu Jul 13 00:10:40 2006
From: jose.ventura.roda at gmail.com (Jose Ventura)
Date: Thu Jul 13 00:10:42 2006
Subject: Fwd: [antlr-interest] antlr3 & an
In-Reply-To: <20060712150653.78693.qmail@web55103.mail.re4.yahoo.com>
References: <e39abda10607110631x48d2a838mebeb61c54fa5d02c@mail.gmail.com>
	<20060712150653.78693.qmail@web55103.mail.re4.yahoo.com>
Message-ID: <e39abda10607130010t72a5ecdv324f1845dd148ca0@mail.gmail.com>

Ok Matt, it's a great news, I wish you luck.

Thank's
Jos? Ventura.

---------- Forwarded message ----------
From: Matt Benson <gudnabrsam@yahoo.com>
Date: Jul 12, 2006 5:06 PM
Subject: Re: [antlr-interest] antlr3 & an
To: Jose Ventura <jose.ventura.roda@gmail.com>

Jose:
ANTLR3 has, as you probably know, a different syntax
from ANTLR 2.x, so the 2.x Tool will not process
ANTLR3 grammars.  The existing Ant task is for ANTLR
2.x.  Hopefully soon (I will be working on it soon)
there will be an ANTLR3 task.  I believe Ter has
verified his acceptance for it to live in the ANTLR
world; my plan is for it to be an antlib, with the
main task simply defined by the name "tool".  Normal
use would have you import the antlib into an "antlr3"
namespace; your buildfile might contain:

<project xmlns:antlr3="antlib:org.antlr">
...
<target name="g">
   <antlr3:tool ...>
     <fileset refid="grammarfiles" />
   </antlr3:tool>
</target>
</project>

Wish me luck,
Matt

--- Jose Ventura <jose.ventura.roda@gmail.com> wrote:

> Hi all,
>
> I'm have a problem with ant & antlr3. --other more
> ;-)
>
> If I run the ant with a antlr2 grammar all it's ok,
> but if it's a antlr3
> grammar not run ok. The classpath link with antlr3,
> and the -d option of ant
> show these messages:
>
>
> generator:
>   [antlr] Found C:\antlr\300\lib\antlr-2.7.6.jar
>   [antlr] Found C:\antlr\300\lib\antlr-2.7.6.jar
>   [antlr] Setting target to: C:\Documents and
> Settings\JVR3651A\My
>
Documents\java\Transformer\LeTra\src\letra\comp\letra.g
>   [antlr] Setting output directory to: C:\Documents
> and Settings\JVR3651A\My
> Documents\java\Transformer\LeTra\src\letra\comp
>
> BUILD FAILED
> C:\Documents and Settings\JVR3651A\My
> Documents\java\Transformer\LeTra\build.xml:32:
> Unable to determine generated
> class
>
> for this target:
>
> <target name="generator">
>      <antlr target="${letra.g}" />
> </target>
>
>
>
> Can anyone help me?
>
> Thank's
> Jos? Ventura.
>


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around
http://mail.yahoo.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060713/354f1ebf/attachment.html
From herumor at fastwebnet.it  Thu Jul 13 01:41:15 2006
From: herumor at fastwebnet.it (Herumor)
Date: Thu Jul 13 01:41:18 2006
Subject: [antlr-interest] Antlr 3.0: run time and java compiling errors
Message-ID: <44B6072B.2090703@fastwebnet.it>

Hello people,
yesterday I came with these errors:

Using Java 1.5 grammar for ANTLR 3 provided on the website on runtime,
after compiling, I get this:


C:\antlrworks\mio_codice\fatto>java JavaParser < JavaParser.java
Exception in thread "main" java.lang.NoClassDefFoundError: JavaParser

C:\antlrworks\mio_codice\fatto>java JavaParser
Exception in thread "main" java.lang.NoClassDefFoundError: JavaParser

With the grammar that I converted into a compiler with ANTLR, on
compiling time of .java file I get this:


C:\antlrworks\mio_codice\test>javac JavaParser.java
JavaParser.java:42: <identifier> expected
    public void class() throws RecognitionException {
                ^
JavaParser.java:42: <identifier> expected
    public void class() throws RecognitionException {
                     ^
JavaParser.java:2704: '{' expected
    public static final BitSet FOLLOW_AccessSpecifier_in_class36 = new
BitSet(ne
w long[]{0x0000000000040000L});

                              ^
JavaParser.java:2866: '}' expected
}
 ^
4 errors

I hope you can help me.
Thanks forward for help,
Deviad

From mail at martin-probst.com  Thu Jul 13 06:14:32 2006
From: mail at martin-probst.com (Martin Probst)
Date: Thu Jul 13 06:14:37 2006
Subject: [antlr-interest] Antlr 3.0: run time and java compiling errors
In-Reply-To: <44B6072B.2090703@fastwebnet.it>
References: <44B6072B.2090703@fastwebnet.it>
Message-ID: <2FFF4EBF-B38B-4433-9EE2-BC000A763B65@martin-probst.com>

Hi,

> C:\antlrworks\mio_codice\fatto>java JavaParser < JavaParser.java
> Exception in thread "main" java.lang.NoClassDefFoundError: JavaParser
>
> C:\antlrworks\mio_codice\fatto>java JavaParser
> Exception in thread "main" java.lang.NoClassDefFoundError: JavaParser

Did you compile the class? Is your classpath set up correctly?

> C:\antlrworks\mio_codice\test>javac JavaParser.java
> JavaParser.java:42: <identifier> expected
>     public void class() throws RecognitionException {
>                 ^
> JavaParser.java:42: <identifier> expected
>     public void class() throws RecognitionException {
>                      ^

This seems to be an actual problem of the grammar. It probably has a  
rule called "class", which is illegal in Java as "class" is a  
keyword. Simply rename the rule in the .g file.

> JavaParser.java:2704: '{' expected
>     public static final BitSet FOLLOW_AccessSpecifier_in_class36 = new
> BitSet(ne
> w long[]{0x0000000000040000L});
>
>                               ^
> JavaParser.java:2866: '}' expected
> }
>  ^
> 4 errors

No idea about this one, maybe something coming from the context in  
that file?

Martin
From parrt at cs.usfca.edu  Thu Jul 13 08:40:42 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Jul 13 08:40:49 2006
Subject: [antlr-interest] Antlr 3.0: run time and java compiling errors
In-Reply-To: <44B6072B.2090703@fastwebnet.it>
References: <44B6072B.2090703@fastwebnet.it>
Message-ID: <1B78D882-7D1F-4247-BB14-8CE9B6F2D95F@cs.usfca.edu>

Hi.  These are very strange errors (could be classpath issue); the  
public void class thing is odd.  No rule name 'class' exists.  Works  
fine under 1.4; ok, 1.5 works:

~/antlr/code/examples-v3/java/java $ java -Xmx400M org.antlr.Tool java.g
ANTLR Parser Generator   Early Access Version 3.0b3 (July ??, 2006)   
1989-2006
java.g:719:9: Decision can match input such as "'0'..'9'{'E', 'e'} 
{'+', '-'}'0'..'9'{'D', 'F', 'd', 'f'}" using multiple alternatives:  
3, 4
As a result, alternative(s) 4 were disabled for that input
java.g:762:35: Decision can match input such as "{'$', 'A'..'Z', '_',  
'a'..'z', '\u00C0'..'\u00D6', '\u00D8'..'\u00F6', '\u00F8'..'\u1FFF',  
'\u3040'..'\u318F', '\u3300'..'\u337F', '\u3400'..'\u3D2D',  
'\u4E00'..'\u9FFF', '\uF900'..'\uFAFF'}" using multiple alternatives:  
1, 2
As a result, alternative(s) 2 were disabled for that input
~/antlr/code/examples-v3/java/java $ javac *.java
~/antlr/code/examples-v3/java/java $ java -version
java version "1.5.0_06"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_06-112)
Java HotSpot(TM) Client VM (build 1.5.0_06-64, mixed mode, sharing)

Terence

From m.axmed at gmail.com  Thu Jul 13 12:10:31 2006
From: m.axmed at gmail.com (Mo)
Date: Thu Jul 13 12:10:37 2006
Subject: [antlr-interest] searching the AST
Message-ID: <460fae650607131210m2d2421c1vd35dd5934f1f35a6@mail.gmail.com>

Hi all,
  i was wondering if any one could suggest what the best way to search
the AST tree when walking it.

I have code in the form of

variable = foo(bar);

and somewhere else in the code i the declaration for foo, i.e:

function foo(bar){
  return "blah";
}

I can already parse and evaluate expresions that appear in their 'use' order.

However, i'd prefer that during the interpretation process, when the
TreeParser encounters a function call, for it to be able to look
through the whole tree to determine whether the function referred to
exists, if it does load it as the current sub-tree to process and
process it, the return control to the point where the function call
occurred.


 and as always much appreciated

cheers,
mo
From michael.pflug at thomson.com  Thu Jul 13 13:46:48 2006
From: michael.pflug at thomson.com (michael.pflug@thomson.com)
Date: Thu Jul 13 13:46:56 2006
Subject: [antlr-interest] tree grammar help
Message-ID: <C3A072E2F8962C4BBF413A00D9FBEFDC1145105C@TSHUSMIANMSG07.ERF.THOMSON.COM>

I have a tree grammar with the rule:

: tableName=identifier DOT columnName=identifier  ((LITERAL_as)?
alias=identifier)?

 

We are trying to make the first identifier with DOT optional like this:

: (tableName=identifier DOT)? columnName=identifier  ((LITERAL_as)?
alias=identifier)?

 

The generation passes, but generates a bad IF statement.  _t.getType()
can not equal SQL_IDENTIFIER and DOT at the same time

It looks like this:

if ((_t.getType()==SQL_IDENTIFIER) && (_t.getType()==DOT)) {

                                    tableName=identifier(_t);

                                    _t = _retTree;

                                    AST tmp16_AST_in = (AST)_t;

                                    match(_t,DOT);

                                    _t = _t.getNextSibling();

                        }

                        else if ((_t.getType()==SQL_IDENTIFIER) &&
(_tokenSet_0.member(_t.getType()))) {

                        }

                        else {

                                    throw new NoViableAltException(_t);

                        }

 

Any ideas on a grammar that would work?

 

Thanks.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060713/b2d69728/attachment.html
From sunjigang1965 at yahoo.com.cn  Fri Jul 14 08:11:48 2006
From: sunjigang1965 at yahoo.com.cn (=?gb2312?q?=CB=EF=BC=CD=B8=D5=20Jigang=20(Robert)=20Sun?=)
Date: Fri Jul 14 08:11:52 2006
Subject: [antlr-interest] a left recursive walker rule
Message-ID: <20060714151148.22808.qmail@web15706.mail.cnb.yahoo.com>

Hi,
I have a rule in tree walker, which is left recursive:  A : (A|B)+ C ,

so I am trying to eliminate it 

A : (A|B)+ C
=> A : ( A(A|B)* | B(A|B)*) C
=> A : A(A|B)* C | B(A|B)* C
=> A : B(A|B)* C  ((A|B)* C)*
=> A : B ( (A|B)* C )+
=> A : B ( ( B((A|B)* C)+ |B )* C )+ //replace A with " B ( (A|B)* C )+ "
=> A : B( ( B [((A|B)* C)+ | ]* C)+ // need to replace A with " B ( (A|B)* C )+ " again
=> A : ... //then again and again forever, never ends

Any better solution?

Thanks

Jigang





		
___________________________________________________________ 
-3.5G20M 
http://cn.mail.yahoo.com/
From kototamo at gmail.com  Fri Jul 14 08:46:52 2006
From: kototamo at gmail.com (kototama kototama)
Date: Fri Jul 14 08:46:56 2006
Subject: [antlr-interest] Need help on constructing trees
Message-ID: <9604cc9f0607140846r32624e4ak4519a5d8f6bb358d@mail.gmail.com>

Hi,

Here is an extract of my grammar for a tiny programming language :

public_section!: PUBLIC LBRACE v:var_decl_list m:method_def_list RBRACE
{#public_section = #( [PUBLIC_SECTION, "public_section"],
#([VAR_DECLS,"var_decls"], v) , #([METHOD_DEFS, "method_defs"], m) );}
;

var_decl_list: (var_decl)*
;

var_decl!: LET t:type i:id (ASSIGN v:value)? EOS
      { #var_decl = #([VAR_DECL, "var_decl"], t, i, #([INIT_VALUE, "value"],
v)); }
;

I would like to simplify the public_section like this :

public_section!: PUBLIC LBRACE (v:var_decl)* m:method_def_list RBRACE

to avoid the definition of var_decl_list. Is it possible ? I don't find the
correct way to build the tree ("var_decls" contains only the last definition
if I do so).

Thanks in advance for your help!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060714/70a32e99/attachment.html
From m.axmed at gmail.com  Fri Jul 14 10:05:04 2006
From: m.axmed at gmail.com (Mo)
Date: Fri Jul 14 10:05:07 2006
Subject: [antlr-interest] Need help on constructing trees
In-Reply-To: <9604cc9f0607140846r32624e4ak4519a5d8f6bb358d@mail.gmail.com>
References: <9604cc9f0607140846r32624e4ak4519a5d8f6bb358d@mail.gmail.com>
Message-ID: <460fae650607141005j4111fc26ufac797921b36f0fa@mail.gmail.com>

Hi kototama,

assuming that you want your code to  look like:

public foo (blah) {

 method methodName(blah) {
   }

}


then the following will build a tree for you

----
the lexer


LPREN	: '(';
RPREN	: ')';
LBRACE	: '{';
RBRACE	: '}';
COMMA	: ',';
SEMI	: ';';

IDENT
  options {testLiterals=true;}
  : ('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9')* ;

NUMBER options {testLiterals=true;}
  : ('0'..'9')+ ('.' ('0'..'9')*)? | '.' ('0'..'9')+;

STRING
 : '"' ( EscapeSequence | ~('\\'|'"') )* '"' ;
	
EscapeSequence
    	:   '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\') ;


----------

the parser

public_section
  :
   "public"^ IDENT LBRACE! (method )* RBRACE!
  ;

 method
   : "method"^  IDENT LPREN arguments RPREN
      LBRACE!
(var_decl)*
      RBRACE!
   ;

atom
  : INIT_VALUE
  | IDENT
  | STRING
  ;

arguments
  :  (atom (COMMA! atom)*)
  ;





On 7/14/06, kototama kototama <kototamo@gmail.com> wrote:
> Hi,
>
> Here is an extract of my grammar for a tiny programming language :
>
> public_section!: PUBLIC LBRACE v:var_decl_list m:method_def_list RBRACE
> {#public_section = #( [PUBLIC_SECTION, "public_section"],
> #([VAR_DECLS,"var_decls"], v) , #([METHOD_DEFS, "method_defs"], m) );}
> ;
>
> var_decl_list: (var_decl)*
> ;
>
> var_decl!: LET t:type i:id (ASSIGN v:value)? EOS
>       { #var_decl = #([VAR_DECL, "var_decl"], t, i, #([INIT_VALUE, "value"],
> v)); }
> ;
>
> I would like to simplify the public_section like this :
>
> public_section!: PUBLIC LBRACE (v:var_decl)* m:method_def_list RBRACE
>
> to avoid the definition of var_decl_list. Is it possible ? I don't find the
> correct way to build the tree ("var_decls" contains only the last definition
> if I do so).
>
> Thanks in advance for your help!
>
From m.axmed at gmail.com  Fri Jul 14 10:07:08 2006
From: m.axmed at gmail.com (Mo)
Date: Fri Jul 14 10:07:12 2006
Subject: [antlr-interest] Need help on constructing trees
In-Reply-To: <460fae650607141005j4111fc26ufac797921b36f0fa@mail.gmail.com>
References: <9604cc9f0607140846r32624e4ak4519a5d8f6bb358d@mail.gmail.com>
	<460fae650607141005j4111fc26ufac797921b36f0fa@mail.gmail.com>
Message-ID: <460fae650607141007p640c46c8jf1b81def467bcf12@mail.gmail.com>

sorry accidently hit send too early..
any how that psuedo code works for me,

cheers
 mo

On 7/14/06, Mo <m.axmed@gmail.com> wrote:
> Hi kototama,
>
> assuming that you want your code to  look like:
>
> public foo (blah) {
>
>  method methodName(blah) {
>    }
>
> }
>
>
> then the following will build a tree for you
>
> ----
> the lexer
>
>
> LPREN   : '(';
> RPREN   : ')';
> LBRACE  : '{';
> RBRACE  : '}';
> COMMA   : ',';
> SEMI    : ';';
>
> IDENT
>   options {testLiterals=true;}
>   : ('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9')* ;
>
> NUMBER options {testLiterals=true;}
>   : ('0'..'9')+ ('.' ('0'..'9')*)? | '.' ('0'..'9')+;
>
> STRING
>  : '"' ( EscapeSequence | ~('\\'|'"') )* '"' ;
>
> EscapeSequence
>         :   '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\') ;
>
>
> ----------
>
> the parser
>
> public_section
>   :
>    "public"^ IDENT LBRACE! (method )* RBRACE!
>   ;
>
>  method
>    : "method"^  IDENT LPREN arguments RPREN
>       LBRACE!
> (var_decl)*
>       RBRACE!
>    ;
>
> atom
>   : INIT_VALUE
>   | IDENT
>   | STRING
>   ;
>
> arguments
>   :  (atom (COMMA! atom)*)
>   ;
>
>
>
>
>
> On 7/14/06, kototama kototama <kototamo@gmail.com> wrote:
> > Hi,
> >
> > Here is an extract of my grammar for a tiny programming language :
> >
> > public_section!: PUBLIC LBRACE v:var_decl_list m:method_def_list RBRACE
> > {#public_section = #( [PUBLIC_SECTION, "public_section"],
> > #([VAR_DECLS,"var_decls"], v) , #([METHOD_DEFS, "method_defs"], m) );}
> > ;
> >
> > var_decl_list: (var_decl)*
> > ;
> >
> > var_decl!: LET t:type i:id (ASSIGN v:value)? EOS
> >       { #var_decl = #([VAR_DECL, "var_decl"], t, i, #([INIT_VALUE, "value"],
> > v)); }
> > ;
> >
> > I would like to simplify the public_section like this :
> >
> > public_section!: PUBLIC LBRACE (v:var_decl)* m:method_def_list RBRACE
> >
> > to avoid the definition of var_decl_list. Is it possible ? I don't find the
> > correct way to build the tree ("var_decls" contains only the last definition
> > if I do so).
> >
> > Thanks in advance for your help!
> >
>
From lgcraymer at yahoo.com  Fri Jul 14 23:32:33 2006
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Fri Jul 14 23:32:37 2006
Subject: [antlr-interest] a left recursive walker rule
In-Reply-To: <20060714151148.22808.qmail@web15706.mail.cnb.yahoo.com>
Message-ID: <20060715063233.82288.qmail@web55914.mail.re3.yahoo.com>

This looks very weird--you have no termination condition for the recursion.  Normally, recursive rules have termination conditions and the recursion-to-iteration conversion is relatively straightforward.  I cannot easily imaging how you got to this form.  What did the annotated parser rule look like that got you here?

--Loring


"??????????? Jigang (Robert) Sun" <sunjigang1965@yahoo.com.cn> wrote: Hi,
I have a rule in tree walker, which is left recursive:  A : (A|B)+ C ,

so I am trying to eliminate it 

A : (A|B)+ C
=> A : ( A(A|B)* | B(A|B)*) C
=> A : A(A|B)* C | B(A|B)* C
=> A : B(A|B)* C  ((A|B)* C)*
=> A : B ( (A|B)* C )+
=> A : B ( ( B((A|B)* C)+ |B )* C )+ //replace A with " B ( (A|B)* C )+ "
=> A : B( ( B [((A|B)* C)+ | ]* C)+ // need to replace A with " B ( (A|B)* C )+ " again
=> A : ... //then again and again forever, never ends

Any better solution?

Thanks

Jigang





  
___________________________________________________________ 
?????????????????????????????-3.5G???????????????20M???????????? 
http://cn.mail.yahoo.com/


 		
---------------------------------
Do you Yahoo!?
 Get on board. You're invited to try the new Yahoo! Mail Beta.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060714/ee2846a7/attachment.html
From endigitalmind at yahoo.co.uk  Sun Jul 16 14:53:30 2006
From: endigitalmind at yahoo.co.uk (Phil Ritchie)
Date: Sun Jul 16 14:53:34 2006
Subject: [antlr-interest] Records
Message-ID: <20060716215330.85956.qmail@web25814.mail.ukl.yahoo.com>

[Using ANTLRWorks 1.0ea11]
 
I'm creating a grammar to parse a record oriented file. (I know, there are more appropriate ways.) Everything works just dandy for the first record but then parsing stops. I have defined my start rule as:
 
file    :    record+
        ;
 
The whole definition of record appears to be fine so I'm stumped.
 
Phil.
From parrt at cs.usfca.edu  Sun Jul 16 15:05:28 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun Jul 16 15:05:28 2006
Subject: [antlr-interest] Records
In-Reply-To: <20060716215330.85956.qmail@web25814.mail.ukl.yahoo.com>
References: <20060716215330.85956.qmail@web25814.mail.ukl.yahoo.com>
Message-ID: <39D1FAE5-BBF8-4BC8-A6AB-462E4DA4A707@cs.usfca.edu>


On Jul 16, 2006, at 2:53 PM, Phil Ritchie wrote:

> [Using ANTLRWorks 1.0ea11]
>
> I'm creating a grammar to parse a record oriented file. (I know,  
> there are more appropriate ways.) Everything works just dandy for  
> the first record but then parsing stops. I have defined my start  
> rule as:
>
> file    :    record+
>         ;
>
> The whole definition of record appears to be fine so I'm stumped.

Whitespace issue?  Returning newline as a real token on the main  
"channel"?

Ter

From endigitalmind at yahoo.co.uk  Sun Jul 16 22:48:27 2006
From: endigitalmind at yahoo.co.uk (Phil Ritchie)
Date: Sun Jul 16 22:48:30 2006
Subject: [antlr-interest] Records
Message-ID: <20060717054827.1824.qmail@web25804.mail.ukl.yahoo.com>

----- Original Message ----
From: Terence Parr <parrt@cs.usfca.edu>
To: Antlr Interest <antlr-interest@antlr.org>
Sent: Sunday, 16 July, 2006 11:05:28 PM
Subject: Re: [antlr-interest] Records


On Jul 16, 2006, at 2:53 PM, Phil Ritchie wrote:

> [Using ANTLRWorks 1.0ea11]
>
> I'm creating a grammar to parse a record oriented file. (I know,  
> there are more appropriate ways.) Everything works just dandy for  
> the first record but then parsing stops. I have defined my start  
> rule as:
>
> file    :    record+
>         ;
>
> The whole definition of record appears to be fine so I'm stumped.

Whitespace issue?  Returning newline as a real token on the main  
"channel"?

Ter

No, I wasn't. Maybe I should. Changed my specification of file to:
file    :    (record '\n')+
        ;

but it's now clashing with the individual record fields which can be multiline, eg:
field1: some text on 
multiple lines
field2: more multiline
text
field1: multiline text for 
record 2 field1
field2: field2, record2
text

I've defined field1 and field2 as reserved words and for the single record parsing it works fine with newline on channel 99.

Phil.
From endigitalmind at yahoo.co.uk  Sun Jul 16 23:11:39 2006
From: endigitalmind at yahoo.co.uk (Phil Ritchie)
Date: Sun Jul 16 23:11:43 2006
Subject: Fw: [antlr-interest] Records - working
Message-ID: <20060717061139.10604.qmail@web25804.mail.ukl.yahoo.com>



----- Forwarded Message ----
From: Phil Ritchie <endigitalmind@yahoo.co.uk>
To: antlr-interest@antlr.org
Sent: Monday, 17 July, 2006 6:48:27 AM
Subject: Re: [antlr-interest] Records


----- Original Message ----
From: Terence Parr <parrt@cs.usfca.edu>
To: Antlr Interest <antlr-interest@antlr.org>
Sent: Sunday, 16 July, 2006 11:05:28 PM
Subject: Re: [antlr-interest] Records


On Jul 16, 2006, at 2:53 PM, Phil Ritchie wrote:

> [Using ANTLRWorks 1.0ea11]
>
> I'm creating a grammar to parse a record oriented file. (I know,  
> there are more appropriate ways.) Everything works just dandy for  
> the first record but then parsing stops. I have defined my start  
> rule as:
>
> file    :    record+
>         ;
>
> The whole definition of record appears to be fine so I'm stumped.

Whitespace issue?  Returning newline as a real token on the main  
"channel"?

Ter

Don't you just hate it when software does what you specify and not, when late at night and tired, you just wanted it to pick up on your intentions? ;-)
 
Although I'd added the definition for 'file' (multiple records) to my grammar I was specifying the start rule as 'record'.

Phil.
From kototamo at gmail.com  Mon Jul 17 05:38:01 2006
From: kototamo at gmail.com (kototama kototama)
Date: Mon Jul 17 05:38:06 2006
Subject: [antlr-interest] Need help on constructing trees
In-Reply-To: <460fae650607141005j4111fc26ufac797921b36f0fa@mail.gmail.com>
References: <9604cc9f0607140846r32624e4ak4519a5d8f6bb358d@mail.gmail.com>
	<460fae650607141005j4111fc26ufac797921b36f0fa@mail.gmail.com>
Message-ID: <9604cc9f0607170538u3e80a9bak6a35125a541705a7@mail.gmail.com>

>
>
>
> then the following will build a tree for you
>
it's ok for building the tree, I just wanted to simplify the way I did (by
avoiding the declaration of var_decl_list)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060717/dac0b74b/attachment.html
From ewbank at gmail.com  Mon Jul 17 08:20:47 2006
From: ewbank at gmail.com (Bryan Ewbank)
Date: Mon Jul 17 08:20:53 2006
Subject: [antlr-interest] a left recursive walker rule
In-Reply-To: <20060715063233.82288.qmail@web55914.mail.re3.yahoo.com>
References: <20060714151148.22808.qmail@web15706.mail.cnb.yahoo.com>
	<20060715063233.82288.qmail@web55914.mail.re3.yahoo.com>
Message-ID: <dd3a065f0607170820i7b685670p454bf7df41c5a547@mail.gmail.com>

> "???? Jigang (Robert) Sun" <sunjigang1965@yahoo.com.cn> wrote:
>  Hi,
> I have a rule in tree walker, which is left recursive:  A : (A|B)+ C ,
>
> so I am trying to eliminate it
> ...

I think this matches the same regex:
    A : ( (B)+ (C)+ )+ ;

This is more intuitive than anything else, by exploring the strings generated;
it therefore might be wrong (I didn't test it rigorously), but it might be good
place to start explorations.

Look at the strings generated by "A : (A|B)+ C", assuming B and C are
terminals:  "A" must, in any final application, generate "(B)+C"; and "A"
itself ends with "C", so "B(C)+" is generated by recursion.

Hope I didn't miss something, and hope this helps a bit,
- Bryan
From sthibaudeau at sqli.com  Mon Jul 17 09:00:50 2006
From: sthibaudeau at sqli.com (sthibaudeau@sqli.com)
Date: Mon Jul 17 09:00:55 2006
Subject: [antlr-interest] Would ANTLR be useful for my needs ?
Message-ID: <51994.194.3.42.2.1153152050.squirrel@194.3.42.2>

Hi,

As far as I'm concerned it's not really obvious if I could use ANTLR for
my needs.

Given a lot of Java files (almost 20,000) I'd like to have a program which
would be able to :
- list all classes and interfaces,
- list all implementations between classes and interfaces,
- list all generalizations between classes,
- list all methods with complete signature,
- list all methods calls...

Could I use ANTLR to do that ? If so, could you give me pointers on how to
do that ?

Thanks,
St?phane Thibaudeau.

From prashant.deva at gmail.com  Mon Jul 17 09:51:25 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Mon Jul 17 09:51:27 2006
Subject: [antlr-interest] Would ANTLR be useful for my needs ?
In-Reply-To: <51994.194.3.42.2.1153152050.squirrel@194.3.42.2>
References: <51994.194.3.42.2.1153152050.squirrel@194.3.42.2>
Message-ID: <41fed8f80607170951n6d0583ah559ce6008fee2207@mail.gmail.com>

Yes, you could use ANTLR for that.
Just download the java grammar from antlr site to parse java.
Now in the parser, you can write actions to extract all the data regarding
the java files and put it in your data structures to use them in your code.

-- 
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060717/e786ae08/attachment.html
From kototamo at gmail.com  Mon Jul 17 10:20:23 2006
From: kototamo at gmail.com (kototama kototama)
Date: Mon Jul 17 10:20:26 2006
Subject: [antlr-interest] System.TypeLoadException when using namespace for
	my own AST in C#
Message-ID: <9604cc9f0607171020k369ecca8r8bd3349db50ec352@mail.gmail.com>

Hello,

I have something like this in my grammar file for the parser :

headers {
 using Ktmc;
}

[...]

tokens {
[...]
METHOD_DEF<AST=MyAST>;
}

and MyAST is defined like this (I use C# and antlr 2.7.6) :

namespace Ktmc
{
    class MyAST : antlr.CommonAST
    {
[...]

It doesn't work at all !!! When running the application I've got the
following problem :

Error : System.TypeLoadException: Unable to load AST Node Type: 'MyAST'
   at antlr.ASTFactory.loadNodeTypeObject(String nodeTypeName)

What is surprising is that it works perfectly well if I doesn't put MyAST in
a namespace! Any ideas ?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060717/53ca3fd6/attachment.html
From parrt at cs.usfca.edu  Mon Jul 17 11:17:57 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Jul 17 11:15:42 2006
Subject: [antlr-interest] timing of official "final" ANTLR 3.0 release
Message-ID: <B65E73D9-0490-4AD8-BA22-A20D1A893BA1@cs.usfca.edu>

Hi,

I'm going to keep pumping out betas until I can get ST finished and  
write some documentation for ANTLR v3.  Further, I need to push out a  
few papers to ensure I still have a job ;)  Also I want to write the  
v2 to v3 translator and make some more grammars.  Just finished up C  
grammar and will push soon.

Not sure what that means in terms of final release, but it will just  
keep getting better.  It will be released when it's ready not the  
artificial deadline I had of July 31.  Decided that just doesn't make  
sense given that we have a stable v2 platform and v3 "final" doesn't  
really mean much since it's available for use now.

Terence
From ptasillo at us.ibm.com  Mon Jul 17 13:49:09 2006
From: ptasillo at us.ibm.com (Paul Tasillo)
Date: Mon Jul 17 13:49:13 2006
Subject: [antlr-interest] observation on example in "An Introduction To
	ANTLR"
Message-ID: <OFC454ECF7.A5903689-ON852571AE.0071E7C9-852571AE.00726AC0@us.ibm.com>

I was following the examples in Terrance Parr's document "An Introduction 
To ANTLR" (http://www.cs.usfca.edu/~parrt/course/652/lectures/antlr.html) 
and couldn't get the tool to recognize end of line characters such that 
the expr() method returned. After reading some of Ashley Mill's ANTLR 
documents, I found the following change the seemed to solve the problem:

The original lexer has:

class ExprLexer extends Lexer;

options {
    k=2; // needed for newline junk
    charVocabulary='\u0000'..'\u007F'; // allow ascii
}

LPAREN: '(' ;
RPAREN: ')' ;
PLUS  : '+' ;
MINUS : '-' ;
STAR  : '*' ;
INT   : ('0'..'9')+ ;
WS    : ( ' '
        | '\r' '\n'
        | '\n'
        | '\t'
        )
        {$setType(Token.SKIP);}
      ; 


I found this change was helpful:

class ExprLexer extends Lexer;

options {
        k=2;
        charVocabulary='\u0000'..'\u007F'; //allow ascii
        }
 
LPAREN  :        '(';
RPAREN  :       ')';
PLUS    :       '+';
MINUS   :       '-';
STAR    :       '*';
INT     :       ('0'..'9')+ ;
NEWLINE :('\r''\n'
        |'\n'
        |'\r'
        )
        {newline();};
WS      : (' '|'\t') 
        {$setType(Token.SKIP);};


I was running on Windows XP Pro with Java 1.4.2 and the latest Beta of 
Antlr 3.02b I think.

-Paul

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060717/b557b981/attachment.html
From endigitalmind at yahoo.co.uk  Mon Jul 17 14:22:29 2006
From: endigitalmind at yahoo.co.uk (Phil Ritchie)
Date: Mon Jul 17 14:22:43 2006
Subject: [antlr-interest] timing of official "final" ANTLR 3.0 release
In-Reply-To: <B65E73D9-0490-4AD8-BA22-A20D1A893BA1@cs.usfca.edu>
Message-ID: <20060717212229.89730.qmail@web25812.mail.ukl.yahoo.com>


----- Original Message ----
From: Terence Parr <parrt@cs.usfca.edu>
To: Antlr Interest <antlr-interest@antlr.org>
Sent: Monday, 17 July, 2006 7:17:57 PM
Subject: [antlr-interest] timing of official "final" ANTLR 3.0 release


>Hi,
>
>I'm going to keep pumping out betas until I can get ST finished and  
>write some documentation for ANTLR v3.
 
I was just going to start using StringTemplate with v3. Is there enough there to do basic stuff with or should I hold off?
 
Phil
From parrt at cs.usfca.edu  Mon Jul 17 14:27:03 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Jul 17 14:24:47 2006
Subject: [antlr-interest] timing of official "final" ANTLR 3.0 release
In-Reply-To: <20060717212229.89730.qmail@web25812.mail.ukl.yahoo.com>
References: <20060717212229.89730.qmail@web25812.mail.ukl.yahoo.com>
Message-ID: <255E8513-0730-4F62-9739-E89D11BC1DB5@cs.usfca.edu>


On Jul 17, 2006, at 2:22 PM, Phil Ritchie wrote:
> I was just going to start using StringTemplate with v3. Is there  
> enough there to do basic stuff with or should I hold off?

Should work no problem...check out the mantra language example for  
lots of ST work :)
Ter

From mark.venbrux at gmail.com  Mon Jul 17 14:26:53 2006
From: mark.venbrux at gmail.com (Mark Venbrux)
Date: Mon Jul 17 14:26:58 2006
Subject: [antlr-interest] internal error while generating code with V3
In-Reply-To: <OF9F1E8F29.ABFF3366-ONC12571AE.004D5A53-C12571AE.004D7F02@philips.com>
References: <OF9F1E8F29.ABFF3366-ONC12571AE.004D5A53-C12571AE.004D7F02@philips.com>
Message-ID: <fa6015a20607171426k3e9db1fm4524e70842a3b205@mail.gmail.com>

>
>
> Hi,
> We are using AntLRWorks 1.0 ea 11 and have a problem with code generation
> for the parser.
> "tokenRefBang.st" seems to be missing. Is this a problem with AntLR?
> The only place where we found this template is in 'AST.stg'. We are
> generating a parser with stringtemplate output, no tree-parsing involved.
> If required, we could strip our grammar to provide a sample, but maybe
> this is a known problem. What's your advice?
>
> [15:11:37] internal error: ....LexerParser.g :
> java.lang.IllegalArgumentException: Can't find template tokenRefBang.st
> org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate(
> StringTemplateGroup.java:483)
> org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(
> StringTemplateGroup.java:370)
> org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(
> StringTemplateGroup.java:382)
> org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate(
> StringTemplateGroup.java:462)
> org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(
> StringTemplateGroup.java:370)
> org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(
> StringTemplateGroup.java:382)
> org.antlr.codegen.CodeGenTreeWalker.getTokenElementST(
> CodeGenTreeWalker.java:159)
> org.antlr.codegen.CodeGenTreeWalker.atom(CodeGenTreeWalker.java:1868)
> org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1348)
> org.antlr.codegen.CodeGenTreeWalker.alternative(CodeGenTreeWalker.java
> :1104)
> org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:988)
> org.antlr.codegen.CodeGenTreeWalker.ebnf(CodeGenTreeWalker.java:2161)
> org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1619)
> org.antlr.codegen.CodeGenTreeWalker.alternative(CodeGenTreeWalker.java
> :1104)
> org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:988)
> org.antlr.codegen.CodeGenTreeWalker.rule(CodeGenTreeWalker.java:716)
> org.antlr.codegen.CodeGenTreeWalker.rules(CodeGenTreeWalker.java:507)
> org.antlr.codegen.CodeGenTreeWalker.grammarSpec(CodeGenTreeWalker.java
> :449)
> org.antlr.codegen.CodeGenTreeWalker.grammar(CodeGenTreeWalker.java:301)
> org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:401)
> org.antlr.Tool.processGrammar(Tool.java:321)
> org.antlr.Tool.process(Tool.java:252)
> org.antlr.works.generate.CodeGenerate.generate(CodeGenerate.java:113)
> org.antlr.works.generate.CodeGenerate.run(CodeGenerate.java:197)
> java.lang.Thread.run(Unknown Source)
>
> Thanks in advance,
>
>        Henk.
>
>
> ---------------------------------------------------------------------------------
>
> ---------------------------------------------------------------------------------
> Every day is a gift. That's why its called "The Present".
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060717/b94e9654/attachment.html
From parrt at cs.usfca.edu  Mon Jul 17 14:33:33 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Jul 17 14:31:19 2006
Subject: [antlr-interest] internal error while generating code with V3
In-Reply-To: <fa6015a20607171426k3e9db1fm4524e70842a3b205@mail.gmail.com>
References: <OF9F1E8F29.ABFF3366-ONC12571AE.004D5A53-C12571AE.004D7F02@philips.com>
	<fa6015a20607171426k3e9db1fm4524e70842a3b205@mail.gmail.com>
Message-ID: <136934AF-5075-4BC0-82C0-A32FB8B82995@cs.usfca.edu>

Hi.  Remove any ! char you have in the grammar.  I may have fixed  
this to give a warning in a later version; can't remember.

Ter

From david.crosson at wanadoo.fr  Tue Jul 18 07:30:04 2006
From: david.crosson at wanadoo.fr (David CROSSON)
Date: Tue Jul 18 07:30:09 2006
Subject: [antlr-interest] ANTLR  3.0b2 - small bug inside your build.xml
Message-ID: <4464237.1153233004750.JavaMail.www@wwinf1512>

Small bug inside your build.xml file, the generated jar for antlr
doesn't provide the file "ANTLRCore.sti" :

  <fileset dir="${src.dir}" includes="**/*.stg, **/*.st"/>
should become
  <fileset dir="${src.dir}" includes="**/*.stg, **/*.st, **/*.sti"/>

Best regards,
Crosson david.

From david.crosson at wanadoo.fr  Tue Jul 18 08:24:10 2006
From: david.crosson at wanadoo.fr (David CROSSON)
Date: Tue Jul 18 08:24:14 2006
Subject: [antlr-interest] ANTLR3.0b2 - Best practice to end parsing ?
Message-ID: <27710949.1153236249993.JavaMail.www@wwinf1512>

I'm looking for the best way to stop scanning
a data stream which contains structured text
data blocks; Do you thing that the following :

SampleParser.all_return rc;
while(true) {
    rc=parser.all();
    BaseTree tree = (BaseTree)rc.getTree();
    if (tree.isNil()) break;
}
    
is the best way to end the scan once all the
structured data blocsk have been found ?




grammar SampleParser;
options {
    filter=true;
    output=AST;
}
@header {
  package stackdumpparser.parsers;
}
@lexer::header {
  package stackdumpparser.parsers;
}
all : 'A' {System.out.println("Found");}
    ;




public void testBasic() throws RecognitionException, InterruptedException {
    CharStream in = new ANTLRStringStream("BABAA");
    SampleParserLexer lexer = new SampleParserLexer(in);
    CommonTokenStream tokens = new CommonTokenStream(lexer);
    SampleParser parser = new SampleParser(tokens);
    int i=0;
    SampleParser.all_return rc;
    while(true) {
        rc=parser.all();
        BaseTree tree = (BaseTree)rc.getTree();
        if (tree.isNil()) break;
    }
}

Best regards,
Crosson david.

From david.crosson at wanadoo.fr  Tue Jul 18 08:44:12 2006
From: david.crosson at wanadoo.fr (David CROSSON)
Date: Tue Jul 18 08:44:18 2006
Subject: [antlr-interest] ANTLR3.0b2 - Action not executed
Message-ID: <5990006.1153237452836.JavaMail.www@wwinf1512>

In the following sample grammar, the action is
not executed although it is when using 3.0ea8
and although the pattern is well recognized and
returned !

Sample Grammar :

    grammar SampleParser;
    options {
        filter=true;
        output=AST;
    }
    @header {
      package stackdumpparser.parsers;
    }
    @lexer::header {
      package stackdumpparser.parsers;
    }
    all : 'A' {System.out.println("must be executed !!");}
        ;


Test case :

    package stackdumpparsertest;
    import junit.framework.*;
    import org.antlr.runtime.ANTLRStringStream;
    import org.antlr.runtime.CharStream;
    import org.antlr.runtime.CommonTokenStream;
    import org.antlr.runtime.RecognitionException;
    import org.antlr.runtime.tree.BaseTree;
    import stackdumpparser.parsers.SampleParser;
    import stackdumpparser.parsers.SampleParserLexer;
    
    public class AntlrFeaturesTest extends TestCase {
        
        public AntlrFeaturesTest(String testName) {
            super(testName);
        }
    
        protected void setUp() throws Exception {
        }
    
        protected void tearDown() throws Exception {
        }
        
        public void testBasic() throws RecognitionException, InterruptedException {
            CharStream in = new ANTLRStringStream("BABAA");
            SampleParserLexer lexer = new SampleParserLexer(in);
            CommonTokenStream tokens = new CommonTokenStream(lexer);
            SampleParser parser = new SampleParser(tokens);
            int i=0;
            SampleParser.all_return rc;
            while(true) {
                rc=parser.all();
                BaseTree tree = (BaseTree)rc.getTree();
                if (tree.isNil()) break;
                System.out.println("Found "+(i++)+" : "+tree.toString());
            }
        }
    }

Best regards,
Crosson David.
From david.crosson at wanadoo.fr  Tue Jul 18 08:57:47 2006
From: david.crosson at wanadoo.fr (David CROSSON)
Date: Tue Jul 18 08:57:51 2006
Subject: [antlr-interest] ANTLR3.0b2 - rule STRING uses rewrite syntax or
 operator with no output option
Message-ID: <28156803.1153238267505.JavaMail.www@wwinf1512>

I got a grammar  with this rule :
...
options {
    filter=true;
    output=AST;
}
...
STRING : '"'! (~'"')* '"'! ;
...

Using latest release of ANTLR I now got this error :
"jrockit.g:246:13: rule STRING uses rewrite syntax or operator with no output option"
I'm using the ! operator elsewhere without any problem but within a lexer rule I got this strange
errormessage, no error with ea8.

best regards,
David crosson.
From sunjigang1965 at yahoo.com.cn  Tue Jul 18 11:04:12 2006
From: sunjigang1965 at yahoo.com.cn (=?gb2312?q?=CB=EF=BC=CD=B8=D5=20Jigang=20(Robert)=20Sun?=)
Date: Tue Jul 18 11:04:17 2006
Subject: =?gb2312?q?=BB=D8=B8=B4=A3=BA=20Re:=20[antlr-interest]=20a=20left=20recur?=
	=?gb2312?q?sive=20walker=20rule?=
In-Reply-To: <20060715055338.73609.qmail@web55911.mail.re3.yahoo.com>
Message-ID: <20060718180412.73031.qmail@web15709.mail.cnb.yahoo.com>

Sorry I had a few days off.

The corresponding parser rule is A : ("("A")" |B)+ C, I turned off "(" and ")", thus caused the
problem in tree walker.

Jigang

--- Loring Craymer <lgcraymer@yahoo.com>:

> This looks very weird--you have no termination condition for the recursion.  Normally, recursive
> rules have termination conditions and the recursion-to-iteration conversion is relatively
> straightforward.  I cannot easily imaging how you got to this form.  What did the annotated
> parser rule look like that got you here?
> 
> --Loring
> 
> " Jigang (Robert) Sun" <sunjigang1965@yahoo.com.cn> wrote: Hi,
> I have a rule in tree walker, which is left recursive:  A : (A|B)+ C ,
> 
> so I am trying to eliminate it 
> 
> A : (A|B)+ C
> => A : ( A(A|B)* | B(A|B)*) C
> => A : A(A|B)* C | B(A|B)* C
> => A : B(A|B)* C  ((A|B)* C)*
> => A : B ( (A|B)* C )+
> => A : B ( ( B((A|B)* C)+ |B )* C )+ //replace A with " B ( (A|B)* C )+ "
> => A : B( ( B [((A|B)* C)+ | ]* C)+ // need to replace A with " B ( (A|B)* C )+ " again
> => A : ... //then again and again forever, never ends
> 
> Any better solution?
> 
> Thanks
> 
> Jigang
> 
> 
> 
> 
> 
>   
> ___________________________________________________________ 
> -3.5G 
> http://cn.mail.yahoo.com/
> 
> 
>  		
> ---------------------------------
> Talk is cheap. Use Yahoo! Messenger to make PC-to-Phone calls.  Great rates starting at 1/min.



	

	
		
___________________________________________________________ 
Mp3-
http://music.yahoo.com.cn/?source=mail_mailbox_footer
From sunjigang1965 at yahoo.com.cn  Tue Jul 18 13:09:47 2006
From: sunjigang1965 at yahoo.com.cn (=?gb2312?q?=CB=EF=BC=CD=B8=D5=20Jigang=20(Robert)=20Sun?=)
Date: Tue Jul 18 13:10:02 2006
Subject: [antlr-interest] parser nondeterminism rule
Message-ID: <20060718200947.30654.qmail@web15706.mail.cnb.yahoo.com>

I have a parser rule,

graphExp: (brackGraph)+ (options {greedy=true;}:op graphExp)*;  //line 101

brackGraph: op | ("(" graphExp ")")=> "(" graphExp ")" 

op: UpperCaseId | LowerCaseId | FunnyId;

I know op (UpperCaseId | LowerCaseId | FunnyId) is either part of brackGraph or (op graphExp)*,
and in (op graphExp)*  op could be a subset of graphExp,

so warning was given:

par.g:101: warning:nondeterminism upon
par.g:101:     k==1:UpperCaseId,LowerCaseId,FunnyId
par.g:101:     between alt 1 and exit branch of block

I have not got an idea about it.

Thanks.

Jigang



		
___________________________________________________________ 
-3.5G20M 
http://cn.mail.yahoo.com/
From sunjigang1965 at yahoo.com.cn  Tue Jul 18 16:54:18 2006
From: sunjigang1965 at yahoo.com.cn (=?gb2312?q?=CB=EF=BC=CD=B8=D5=20Jigang=20(Robert)=20Sun?=)
Date: Tue Jul 18 16:54:25 2006
Subject: =?gb2312?q?=20=BB=D8=B8=B4=A3=BA=20Re:=20[antlr-interest]=20a=20left=20re?=
	=?gb2312?q?cursive=20walker=20rule?=
Message-ID: <20060718235418.96211.qmail@web15706.mail.cnb.yahoo.com>


Sorry I had a few days off.

The corresponding parser rule is A : ("("A")" |B)+ C, I turned off "(" and ")", thus caused the>
problem in tree walker.
 
 Jigang
 
> --- Loring Craymer <lgcraymer@yahoo.com>:
> 
> > This looks very weird--you have no termination condition for the recursion.  Normally,
> recursive
> > rules have termination conditions and the recursion-to-iteration conversion is relatively
> > straightforward.  I cannot easily imaging how you got to this form.  What did the annotated
> > parser rule look like that got you here?
> > 
> > --Loring
> > 
> > " Jigang (Robert) Sun" <sunjigang1965@yahoo.com.cn> wrote: Hi,
> > I have a rule in tree walker, which is left recursive:  A : (A|B)+ C ,
> > 
> > so I am trying to eliminate it 
> > 
> > A : (A|B)+ C
> > => A : ( A(A|B)* | B(A|B)*) C
> > => A : A(A|B)* C | B(A|B)* C
> > => A : B(A|B)* C  ((A|B)* C)*
> > => A : B ( (A|B)* C )+
> > => A : B ( ( B((A|B)* C)+ |B )* C )+ //replace A with " B ( (A|B)* C )+ "
> > => A : B( ( B [((A|B)* C)+ | ]* C)+ // need to replace A with " B ( (A|B)* C )+ " again
> > => A : ... //then again and again forever, never ends
> > 
> > Any better solution?
> > 
> > Thanks
> > 
> > Jigang
> > 



		
___________________________________________________________ 
-3.5G20M 
http://cn.mail.yahoo.com/
From craig at palantir.co.za  Tue Jul 18 22:57:45 2006
From: craig at palantir.co.za (Craig Main)
Date: Tue Jul 18 22:59:15 2006
Subject: [antlr-interest] C# Target,
Message-ID: <20060719055911.4A483DCE03@www.antlr.org>

Hi Guys,

With version 3.0 now in beta, I was wondering if we would be lucky enough to
get a version 3.0 C# target and runtime soon.
I am very keen to use 3.0.

Regards
Craig


From jose.sanleandro at ventura24.es  Wed Jul 19 02:07:27 2006
From: jose.sanleandro at ventura24.es (Jose San Leandro)
Date: Wed Jul 19 02:13:59 2006
Subject: [antlr-interest] literals versus arbitrary text
Message-ID: <200607191107.28049.jose.sanleandro@ventura24.es>

Hi,

I'm encountering difficulties trying to implement a grammar to process Java 
sources, but only to get the main class or interface declaration.
Previously, I was using a regexp such as:

(.*?)?(public|protected|private)\s+(class|interface)(\s+extends.*?)?
(\s+implements.*?)?(\{.*)

Such approach had a performance drawback, and I chose to define a grammar 
instead. However, I don't know how to handle the difference between an 
occurrence of the 'class' word inside the copyright header, in the class 
declaration, or inside the class' code.
I started defining a literal for each of the words I care about, but the 
difference is not the word, but its context.
Which is the approach in cases like this? I mean, a grammar which starts 
thinking everything is arbitrary text until a context is found, then parse 
such context, and digest the rest.

Thank you very much in advance, and thanks Ter and the rest for both ANTLR and 
ST.

Jose.
From harsh at archpro-da.com  Wed Jul 19 11:40:14 2006
From: harsh at archpro-da.com (Harsh Chilwal)
Date: Wed Jul 19 11:40:18 2006
Subject: [antlr-interest] Newbie: Reccomendations needed
Message-ID: <1535.207.47.16.26.1153334414.squirrel@207.47.16.26>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060720/98187c49/attachment.html
From Vinay.Ahuja at idea.com  Wed Jul 19 12:31:52 2006
From: Vinay.Ahuja at idea.com (Ahuja, Vinay)
Date: Wed Jul 19 12:32:01 2006
Subject: [antlr-interest] Identifiers starting with numbers
Message-ID: <D85E888CA6639D4A81F5BC9038A3DB3B159656@fl133mx23prd001.idea.com>


Hi,

We are writing an antlr grammar for a scripting language (very similar
to pascal as far as basic constructs go).

This is how we have defined IDENT

IDENT
	options {testLiterals=true;}
	:	('a'..'z') ('a'..'z'|'0'..'9'|'_')*   //pspsps
	;

We also have numeric integer defined as follows:

NUM_INT
	:	('0'..'9')+ // everything starts with a digit sequence
		(	(	{(LA(2)!='.')&&(LA(2)!=')')}?
// force k=2; avoid ".."
//PSPSPS example ARRAY (.1..99.) OF char; // after .. thinks it's a
NUM_REAL
				'.' {$setType(NUM_REAL);}	// dot
means we are float
				('0'..'9')+ (EXPONENT)?
			)?
		|	EXPONENT {$setType(NUM_REAL);}	// 'E' means we
are float
		)
	;


In our scripting language, the identifier can start with numbers. We
changed IDENT to be like this


IDENT
	options {testLiterals=true;}
	:	('a'..'z'|'0'..'9'|'_')*   //pspsps
	;

Now, the parser is causing ambiguities and does not parse integers
correctly. We expected ambiguities anyways.

What is a good way to make this work? Any suggestions. Do we need to put
any syntactic predicate? If so how?

Thanks for your help.

Regards,
Vinay






Confidentiality Notice: The material in this e-mail is intended only for the use of the individual to whom it is addressed and may contain information that is confidential, privileged, and exempt from disclosure under applicable law. If you are not the intended recipient, be advised that the unauthorized use, disclosure, copying, distribution, or the taking of any action in reliance on this information is strictly prohibited. If you have received this e-mail in error, please immediately notify us at 866-335-3289 to arrange for the return of this material to us. Thank You.
From mail at martin-probst.com  Wed Jul 19 13:58:52 2006
From: mail at martin-probst.com (Martin Probst)
Date: Wed Jul 19 13:59:00 2006
Subject: [antlr-interest] Identifiers starting with numbers
In-Reply-To: <D85E888CA6639D4A81F5BC9038A3DB3B159656@fl133mx23prd001.idea.com>
References: <D85E888CA6639D4A81F5BC9038A3DB3B159656@fl133mx23prd001.idea.com>
Message-ID: <A4F150CD-4B11-40FE-A4A0-27834E423769@martin-probst.com>

Hi,

> In our scripting language, the identifier can start with numbers. We
> changed IDENT to be like this

So what is the lexical difference between an identifier and a number?  
How do you decide if the single token: '5'
is a number or an identifier? Or 55123 for that matter?

If there is no lexical difference, you will have to make the decision  
within the parser, e.g. have '5' be a number and then a rule
identifier: IDENT | INT_NUM;
This will probably give you ambiguities, but they should be  
resolvable within the parser. If they are not, it's most likely that  
your language in itself is ambiguous. E.g. in this case:

var 5 := 12;
var foo := 5; // is foo = 5 or foo = 12?

> IDENT
> 	options {testLiterals=true;}
> 	:	('a'..'z'|'0'..'9'|'_')*   //pspsps
> 	;

This rule allows empty identifiers, you should use '+'.

Regards,
Martin


From endigitalmind at yahoo.co.uk  Wed Jul 19 15:03:02 2006
From: endigitalmind at yahoo.co.uk (Phil Ritchie)
Date: Wed Jul 19 15:03:07 2006
Subject: [antlr-interest] ANTLR Workshop/Tutorial
Message-ID: <20060719220302.54862.qmail@web25804.mail.ukl.yahoo.com>

Two questions that are borne of frustration at my rate of progress in becoming really proficient with antlr:
 
1. Am I really mad trying to use antlr to build parsers and translators for essentially record-based files?
2. Are there any antlr version 3 fluent people in Dublin, Ireland that would be willing and able to give one or two workshops/interactive tutorials?
 
Phil.
From parrt at cs.usfca.edu  Wed Jul 19 15:38:10 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Jul 19 15:35:46 2006
Subject: [antlr-interest] ANTLR Workshop/Tutorial
In-Reply-To: <20060719220302.54862.qmail@web25804.mail.ukl.yahoo.com>
References: <20060719220302.54862.qmail@web25804.mail.ukl.yahoo.com>
Message-ID: <CB16696C-4900-4630-9700-2D990A8DABC6@cs.usfca.edu>


On Jul 19, 2006, at 3:03 PM, Phil Ritchie wrote:

> Two questions that are borne of frustration at my rate of progress  
> in becoming really proficient with antlr:
>
> 1. Am I really mad trying to use antlr to build parsers and  
> translators for essentially record-based files?
> 2. Are there any antlr version 3 fluent people in Dublin, Ireland  
> that would be willing and able to give one or two workshops/ 
> interactive tutorials?

I wish I had time/money to come over to Dublin to help you out! ;)   
Love Ireland (in the summer)...

Can you describe your problems simply or is it really workshop time?

Ter

From gt54-antlr at cyconix.com  Wed Jul 19 15:36:00 2006
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Wed Jul 19 15:36:07 2006
Subject: [antlr-interest] Newbie: Reccomendations needed
In-Reply-To: <1535.207.47.16.26.1153334414.squirrel@207.47.16.26>
References: <1535.207.47.16.26.1153334414.squirrel@207.47.16.26>
Message-ID: <44BEB3D0.8010802@cyconix.com>

Harsh Chilwal wrote:

>         The constructs are very simple. I dont want to modify the 3rd 
> party parser to make it understand our constructs. Instead i want to 
> write a preprocessor which can filter out our constructs and churn out 
> standard verilog to the 3rd party parser.
>        Is Antlr a good tool to write a preprocessor for verilog/c kind 
> of a language. 

Depends. How 'simple' are your constructs? How deeply buried in the 
grammar are they? Can you give some examples? Modifying your existing 
translator is almost certainly your best option - why don't you want to 
do this?

Paul
From parrt at cs.usfca.edu  Wed Jul 19 15:39:56 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Jul 19 15:37:34 2006
Subject: [antlr-interest] Newbie: Reccomendations needed
In-Reply-To: <1535.207.47.16.26.1153334414.squirrel@207.47.16.26>
References: <1535.207.47.16.26.1153334414.squirrel@207.47.16.26>
Message-ID: <C3FDF674-A304-4D6D-B229-0356869E0FE6@cs.usfca.edu>


On Jul 19, 2006, at 11:40 AM, Harsh Chilwal wrote:

>     Hi,
>         I am not a parser expert and also new to Antlr. I have an  
> intruging problem more.
>         We have to do a verilog language parser. As part of the our  
> flow, we have added some constructs to the language.
>         Now we are using a 3rd party language parser which does not  
> understand those constructs.
>         The constructs are very simple. I dont want to modify the  
> 3rd party parser to make it understand our constructs. Instead i  
> want to write a preprocessor which can filter out our constructs  
> and churn out standard verilog to the 3rd party parser.
>        Is Antlr a good tool to write a preprocessor for verilog/c  
> kind of a language. I  would need to handle file inclusions, macro  
> processing.

The includes are probably easiest with a smart channel of  
characters.  Then, yes, macros and such are great in ANTLR.  You  
could translate the token stream into another token stream and then  
parse w/o relexing if you wanted.

> Somewhere i have read about channels in Antlr3. Can i make a  
> verilog channel and pass standard verilog to that channel and our  
> constructs to a different channel.

Sure.  you can only parse one channel at a time though.

Ter

>        Basically i am trying to creat a language filter which can  
> seperate out 2 language tokens into different channels.
>        Any suggestion will be really appreciated.
> Thanks in advance,
> regards,
> Harsh

From lgcraymer at yahoo.com  Wed Jul 19 15:39:13 2006
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Wed Jul 19 15:39:19 2006
Subject: [antlr-interest] ANTLR Workshop/Tutorial
In-Reply-To: <20060719220302.54862.qmail@web25804.mail.ukl.yahoo.com>
Message-ID: <20060719223913.54889.qmail@web55911.mail.re3.yahoo.com>

Phil--

1.)  No.  ANTLR is very good for record-based files.  File formats have simple and unambiguous grammars.

2.)  If you are a newbie, don't use ANTLR 3 now--wait for the documentation, including a tutorial (Ter will be using it to teach with:  that will make sure the documentation is wrung out).  Use ANTLR 2--the documentation is solid, you can ask questions on the list and get very good feedback, and it will solve your problem.  You may run into occasional issues with the LL(k)-approximate lookahead (reports of nondeterminisms that aren't really there), but feedback from the list will put you on the right track.

Porting a grammar from ANTLR 2 to ANTLR 3 should not be difficult unless you do a lot of manual tree manipulation--you have no pressing need to be an early adopter.  You should use StringTemplate for code generation, though--it makes a big difference, although there too the documentation could and will be improved.

--Loring

Phil Ritchie <endigitalmind@yahoo.co.uk> wrote: Two questions that are borne of frustration at my rate of progress in becoming really proficient with antlr:
 
1. Am I really mad trying to use antlr to build parsers and translators for essentially record-based files?
2. Are there any antlr version 3 fluent people in Dublin, Ireland that would be willing and able to give one or two workshops/interactive tutorials?
 
Phil.


 		
---------------------------------
Do you Yahoo!?
 Next-gen email? Have it all with the  all-new Yahoo! Mail Beta.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060719/6c28df98/attachment.html
From Jayne.Ochoa at absg.com  Wed Jul 19 16:09:21 2006
From: Jayne.Ochoa at absg.com (Ochoa, Jayne)
Date: Wed Jul 19 16:09:20 2006
Subject: [antlr-interest] Determining a finite number of characters and
	getting tokens
Message-ID: <635F6C7B8484E1478EDD2BC05017642004F37675@100-MAIL-V-001.absg.net>

Good afternoon! (Atleast from Dallas, TX. :) )

I am very new to ANTLR. Just heard about it a month ago and am still
studying the docs and trying to understand it. I am familiar with EBNF
and have been playing around with ANTLR. Still having trouble, however.
My development environment is Visual Studio 2005 and C#.

Two questions:
1) I need to be able to simply grab a token from the parser. I was
trying to do something very simple based on the cut and paste example,
but have not been able to just "grab" a token. How does one go about
doing that? Or does it depend on the grammar? 

2) I created an incredibly simple grammar for a phone number just to get
my feet wet with ANTLR. Is there a way to determine a finite number of
digits? I'll paste my grammar file. I realize it's a bit ammateurish,
but I was simply playing around with this to understand how to create a
grammar file for ANTLR. I have pasted my grammar file below. Reading it,
it is obvious as to why I get a non-determinism error for NUM3 and NUM4.

This is why I have that question as to whether it is possible to dermine
a finite number of digits. For example, in my grammar below, NUM3 would
be defined as 3 digits.

-- Jayne

---- Begin Phonenumber.g file ----
// Parser

header
{
  using System;
  using System.Collections.Generic;
  using System.Text;
}

options
{
  language = "CSharp";
  namespace = "PhoneNumber";
}

class PhoneNoParser extends Parser;

options
{
  defaultErrorHandler = false;
  k=2;
}

phonenumber
  : NUM3 DOT NUM3 DOT NUM4
  | areacode NUM3 DASH NUM4
  ;
  
areacode
  : LPAREN NUM3 RPAREN
  | NUM3 (SLASH | DASH)
  ;
  
  
// Lexer

class PhoneNoLexer extends Lexer;

options
{
  k=2;
}

NUM3
  : DIGIT DIGIT DIGIT
  ;

NUM4
  : NUM3 DIGIT
  ;

DASH
  : '-'
  ;

DOT
  : '.'
  ;

SLASH
  : '/'
  ;

LPAREN
  : '('
  ;

RPAREN
  : ')'
  ;

DIGIT
  : '0'..'9'
  ;

WS 
  : (
    ' '
  | '\t'
  | ( '\n'
    | '\r'
    | "\r\n")
    {newline();}
  )
  { $setType(Token.SKIP);}
  ;
---- END Phonenumber.g file ----
From lgcraymer at yahoo.com  Wed Jul 19 16:44:04 2006
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Wed Jul 19 16:44:07 2006
Subject: [antlr-interest] Determining a finite number of characters and
	getting tokens
In-Reply-To: <635F6C7B8484E1478EDD2BC05017642004F37675@100-MAIL-V-001.absg.net>
Message-ID: <20060719234404.76161.qmail@web55902.mail.re3.yahoo.com>

Jayne--

1.)  Look at the section entitled "Element Labels" in the documentation.  If I understand your question correctly, you want to label a token and assign it to a variable from a parser rule.

2.)  This is handled via a definition like

NUMBER
    :
    { int count = 0; }
    ( DIGIT { count++} )+
    {    if (count == 3)
            $setType(NUM3)
        else if (count == 4)
            $setType(NUM4)
    }
    ;

Also, DIGIT should be a protected rule (does not return a token, just adds characters to the character buffer).

Good luck!

--Loring

"Ochoa, Jayne" <Jayne.Ochoa@absg.com> wrote: Good afternoon! (Atleast from Dallas, TX. :) )

I am very new to ANTLR. Just heard about it a month ago and am still
studying the docs and trying to understand it. I am familiar with EBNF
and have been playing around with ANTLR. Still having trouble, however.
My development environment is Visual Studio 2005 and C#.

Two questions:
1) I need to be able to simply grab a token from the parser. I was
trying to do something very simple based on the cut and paste example,
but have not been able to just "grab" a token. How does one go about
doing that? Or does it depend on the grammar? 

2) I created an incredibly simple grammar for a phone number just to get
my feet wet with ANTLR. Is there a way to determine a finite number of
digits? I'll paste my grammar file. I realize it's a bit ammateurish,
but I was simply playing around with this to understand how to create a
grammar file for ANTLR. I have pasted my grammar file below. Reading it,
it is obvious as to why I get a non-determinism error for NUM3 and NUM4.

This is why I have that question as to whether it is possible to dermine
a finite number of digits. For example, in my grammar below, NUM3 would
be defined as 3 digits.

-- Jayne

---- Begin Phonenumber.g file ----
// Parser

header
{
  using System;
  using System.Collections.Generic;
  using System.Text;
}

options
{
  language = "CSharp";
  namespace = "PhoneNumber";
}

class PhoneNoParser extends Parser;

options
{
  defaultErrorHandler = false;
  k=2;
}

phonenumber
  : NUM3 DOT NUM3 DOT NUM4
  | areacode NUM3 DASH NUM4
  ;
  
areacode
  : LPAREN NUM3 RPAREN
  | NUM3 (SLASH | DASH)
  ;
  
  
// Lexer

class PhoneNoLexer extends Lexer;

options
{
  k=2;
}

NUM3
  : DIGIT DIGIT DIGIT
  ;

NUM4
  : NUM3 DIGIT
  ;

DASH
  : '-'
  ;

DOT
  : '.'
  ;

SLASH
  : '/'
  ;

LPAREN
  : '('
  ;

RPAREN
  : ')'
  ;

DIGIT
  : '0'..'9'
  ;

WS 
  : (
    ' '
  | '\t'
  | ( '\n'
    | '\r'
    | "\r\n")
    {newline();}
  )
  { $setType(Token.SKIP);}
  ;
---- END Phonenumber.g file ----


 __________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060719/303c5369/attachment-0001.html
From parrt at cs.usfca.edu  Wed Jul 19 17:27:49 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Jul 19 17:25:25 2006
Subject: [antlr-interest] ANTLR  3.0b2 - small bug inside your build.xml
In-Reply-To: <4464237.1153233004750.JavaMail.www@wwinf1512>
References: <4464237.1153233004750.JavaMail.www@wwinf1512>
Message-ID: <3F73D01A-32E9-4E77-A533-EAD0BE5AC6B9@cs.usfca.edu>

fixed. Merci.
Terence
On Jul 18, 2006, at 7:30 AM, David CROSSON wrote:

> Small bug inside your build.xml file, the generated jar for antlr
> doesn't provide the file "ANTLRCore.sti" :
>
>   <fileset dir="${src.dir}" includes="**/*.stg, **/*.st"/>
> should become
>   <fileset dir="${src.dir}" includes="**/*.stg, **/*.st, **/*.sti"/>
>
> Best regards,
> Crosson david.
>

From parrt at cs.usfca.edu  Wed Jul 19 17:28:48 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Jul 19 17:26:27 2006
Subject: [antlr-interest] ANTLR3.0b2 - Best practice to end parsing ?
In-Reply-To: <27710949.1153236249993.JavaMail.www@wwinf1512>
References: <27710949.1153236249993.JavaMail.www@wwinf1512>
Message-ID: <9E8506BC-AEB0-48FB-834B-4C753AA30DBA@cs.usfca.edu>


On Jul 18, 2006, at 8:24 AM, David CROSSON wrote:

> I'm looking for the best way to stop scanning
> a data stream which contains structured text
> data blocks; Do you thing that the following :
>
> SampleParser.all_return rc;
> while(true) {
>     rc=parser.all();
>     BaseTree tree = (BaseTree)rc.getTree();
>     if (tree.isNil()) break;
> }
>
> is the best way to end the scan once all the
> structured data blocsk have been found ?

Shouldn't the parser decide when it should finish?

Terence
From parrt at cs.usfca.edu  Wed Jul 19 17:34:37 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Jul 19 17:32:14 2006
Subject: [antlr-interest] ANTLR3.0b2 - Action not executed
In-Reply-To: <5990006.1153237452836.JavaMail.www@wwinf1512>
References: <5990006.1153237452836.JavaMail.www@wwinf1512>
Message-ID: <FC97E8C5-E380-44FE-8C86-22B2F02E1885@cs.usfca.edu>


On Jul 18, 2006, at 8:44 AM, David CROSSON wrote:

> In the following sample grammar, the action is
> not executed although it is when using 3.0ea8
> and although the pattern is well recognized and
> returned !

Thanks for the nicely packaged report!

I get this with b2 (+ some minor tweaks):

~/tmp $ java Test
Found 0 : A
Found 1 : A
Found 2 : A
[all]: line 0:-1 mismatched token: [@0,0:0='<no text>',<-1>,0:-1];  
expecting type 'A'
...

So it's doing something on this side...hmm...weird.
Ter
From parrt at cs.usfca.edu  Wed Jul 19 17:40:31 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Jul 19 17:38:08 2006
Subject: [antlr-interest] ANTLR3.0b2 - rule STRING uses rewrite syntax or
	operator with no output option
In-Reply-To: <28156803.1153238267505.JavaMail.www@wwinf1512>
References: <28156803.1153238267505.JavaMail.www@wwinf1512>
Message-ID: <C842031E-59D6-4E49-A549-F9D9802B1DE5@cs.usfca.edu>


On Jul 18, 2006, at 8:57 AM, David CROSSON wrote:

> I got a grammar  with this rule :
> ...
> options {
>     filter=true;
>     output=AST;
> }
> ...
> STRING : '"'! (~'"')* '"'! ;
> ...
>
> Using latest release of ANTLR I now got this error :
> "jrockit.g:246:13: rule STRING uses rewrite syntax or operator with  
> no output option"
> I'm using the ! operator elsewhere without any problem but within a  
> lexer rule I got this strange
> errormessage, no error with ea8.

Wow!  Oh, that's a lexer rule with ! in it.  Illegal.  Remove and it  
should work.

Ter

From parrt at cs.usfca.edu  Wed Jul 19 17:40:58 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Jul 19 17:38:35 2006
Subject: [antlr-interest] C# Target,
In-Reply-To: <20060719055911.4A483DCE03@www.antlr.org>
References: <20060719055911.4A483DCE03@www.antlr.org>
Message-ID: <37D89CBA-F692-484F-BCF1-CE3C09D7B94B@cs.usfca.edu>


On Jul 18, 2006, at 10:57 PM, Craig Main wrote:

> Hi Guys,
>
> With version 3.0 now in beta, I was wondering if we would be lucky  
> enough to
> get a version 3.0 C# target and runtime soon.
> I am very keen to use 3.0.

I'll let Kunle and Michael answer, but I suspect they are getting  
close :)

Terence

From tbrandonau at gmail.com  Wed Jul 19 20:37:25 2006
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Wed Jul 19 20:37:28 2006
Subject: [antlr-interest] Identifiers starting with numbers
In-Reply-To: <A4F150CD-4B11-40FE-A4A0-27834E423769@martin-probst.com>
References: <D85E888CA6639D4A81F5BC9038A3DB3B159656@fl133mx23prd001.idea.com>
	<A4F150CD-4B11-40FE-A4A0-27834E423769@martin-probst.com>
Message-ID: <ebc876d70607192037m3c8bbc25o4d37889d526e9ba8@mail.gmail.com>

Or is it that identifiers can start with a number but must still
contain a letter somewhere? If so then (under Antlr 2.7.6 anyway) you
will need to match identifiers starting with a number in your numeric
literal rule and set the token type. Something like:
NUMBER: DIGIT ( DIGIT | LETTER { _ttype = IDENT; } )*;
should do it.

Tom.
On 7/20/06, Martin Probst <mail@martin-probst.com> wrote:
> Hi,
>
> > In our scripting language, the identifier can start with numbers. We
> > changed IDENT to be like this
>
> So what is the lexical difference between an identifier and a number?
> How do you decide if the single token: '5'
> is a number or an identifier? Or 55123 for that matter?
>
>
> Regards,
> Martin
>
>
>
From open.zone at virgin.net  Wed Jul 19 23:08:47 2006
From: open.zone at virgin.net (Micheal J)
Date: Wed Jul 19 22:50:38 2006
Subject: [antlr-interest] System.TypeLoadException when using namespace
	formy own AST in C#
In-Reply-To: <9604cc9f0607171020k369ecca8r8bd3349db50ec352@mail.gmail.com>
Message-ID: <01ae01c6abc2$f7483ef0$c704a8c0@hercules>

Yes. Use the fully qualified name for your type (including
version/public-key-token if in a strong-named assembly).
 
 
Micheal
 

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of kototama kototama
Sent: 17 July 2006 18:20
To: antlr-interest@antlr.org
Subject: [antlr-interest] System.TypeLoadException when using namespace
formy own AST in C#


Hello,

I have something like this in my grammar file for the parser :

headers {
 using Ktmc;
}

[...]

tokens {
[...]
METHOD_DEF<AST=MyAST>;
}

and MyAST is defined like this (I use C# and antlr 2.7.6) :

namespace Ktmc
{
    class MyAST : antlr.CommonAST
    {
[...]

It doesn't work at all !!! When running the application I've got the
following problem :

Error : System.TypeLoadException : Unable to load AST Node Type: 'MyAST'
   at antlr.ASTFactory.loadNodeTypeObject(String nodeTypeName)

What is surprising is that it works perfectly well if I doesn't put MyAST in
a namespace! Any ideas ?


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060720/0cc02692/attachment.html
From craig at palantir.co.za  Thu Jul 20 00:33:07 2006
From: craig at palantir.co.za (Craig Main)
Date: Thu Jul 20 00:33:13 2006
Subject: [antlr-interest] C# Target,
In-Reply-To: <37D89CBA-F692-484F-BCF1-CE3C09D7B94B@cs.usfca.edu>
Message-ID: <20060720073308.2DA05DCCAF@www.antlr.org>


The suspense is killing me, literally.
I really hope it is close :-)

Craig

On Jul 18, 2006, at 10:57 PM, Craig Main wrote:

> Hi Guys,
>
> With version 3.0 now in beta, I was wondering if we would be lucky  
> enough to
> get a version 3.0 C# target and runtime soon.
> I am very keen to use 3.0.

I'll let Kunle and Michael answer, but I suspect they are getting  
close :)

Terence



From endigitalmind at yahoo.co.uk  Thu Jul 20 00:45:16 2006
From: endigitalmind at yahoo.co.uk (Phil Ritchie)
Date: Thu Jul 20 00:45:21 2006
Subject: [antlr-interest] ANTLR Workshop/Tutorial
In-Reply-To: <CB16696C-4900-4630-9700-2D990A8DABC6@cs.usfca.edu>
Message-ID: <20060720074516.57458.qmail@web25809.mail.ukl.yahoo.com>

----- Original Message ----
From: Terence Parr <parrt@cs.usfca.edu>
To: Antlr Interest <antlr-interest@antlr.org>
Sent: Wednesday, 19 July, 2006 11:38:10 PM
Subject: Re: [antlr-interest] ANTLR Workshop/Tutorial


On Jul 19, 2006, at 3:03 PM, Phil Ritchie wrote:

> I wish I had time/money to come over to Dublin to help you out! ;)   
> Love Ireland (in the summer)...
 
Wish I could afford to bring you over. Can't you arrange some kind of University exchange? ;-)

> Can you describe your problems simply or is it really workshop time?
 
Don't think so. Possibly due to lack of confidence in phrasing the questions accurately.

Ter
From endigitalmind at yahoo.co.uk  Thu Jul 20 00:49:24 2006
From: endigitalmind at yahoo.co.uk (Phil Ritchie)
Date: Thu Jul 20 00:49:30 2006
Subject: [antlr-interest] ANTLR Workshop/Tutorial
In-Reply-To: <20060719223913.54889.qmail@web55911.mail.re3.yahoo.com>
Message-ID: <20060720074924.59012.qmail@web25809.mail.ukl.yahoo.com>

Loring
 
Lots of good advice and encouragement, thanks.


----- Original Message ----
From: Loring Craymer <lgcraymer@yahoo.com>
To: Phil Ritchie <endigitalmind@yahoo.co.uk>; antlr-interest@antlr.org
Sent: Wednesday, 19 July, 2006 11:39:13 PM
Subject: Re: [antlr-interest] ANTLR Workshop/Tutorial

Phil--

1.)  No.  ANTLR is very good for record-based files.  File formats have simple and unambiguous grammars.

2.)  If you are a newbie, don't use ANTLR 3 now--wait for the documentation, including a tutorial (Ter will be using it to teach with:  that will make sure the documentation is wrung out).  Use ANTLR 2--the documentation is solid, you can ask questions on the list and get very good feedback, and it will solve your problem.  You may run into occasional issues with the LL(k)-approximate lookahead (reports of nondeterminisms that aren't really there), but feedback from the list will put you on the right track.

Porting a grammar from ANTLR 2 to ANTLR 3 should not be difficult unless you do a lot of manual tree manipulation--you have no pressing need to be an early adopter.  You should use StringTemplate for code generation, though--it makes a big difference, although there too the documentation could and will be improved.

--Loring

Phil Ritchie <endigitalmind@yahoo.co.uk> wrote: 
Two questions that are borne of frustration at my rate of progress in becoming really proficient with antlr:

1. Am I really mad trying to use antlr to build parsers and translators for essentially record-based files?
2. Are there any antlr version 3 fluent people in Dublin, Ireland that would be willing and able to give one or two workshops/interactive tutorials?

Phil.





Do you Yahoo!?
Next-gen email? Have it all with the all-new Yahoo! Mail Beta.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060720/7c95d5ee/attachment-0001.html
From bans.vglab at gmail.com  Thu Jul 20 03:15:30 2006
From: bans.vglab at gmail.com (Bans VGLab)
Date: Thu Jul 20 03:15:33 2006
Subject: [antlr-interest] parser nondeterminism rule
In-Reply-To: <20060718200947.30654.qmail@web15706.mail.cnb.yahoo.com>
References: <20060718200947.30654.qmail@web15706.mail.cnb.yahoo.com>
Message-ID: <626f78830607200315s2d15d03dxc8fe3e6a2daf71c3@mail.gmail.com>

Hello Jigang,

The first rule can be re-written like this:

graphExp
    : brackGraph
        (
            brackGraph
            |
        )+
        (options {greedy=true;}:op graphExp)*
    ;

So, the statement "between alt 1 and exit branch of block" means the first
alternative in the grammar expression " brackGraph |  " and its exit.

This can be easily seen with this example derivation:

Applying different alternatives in the rule 1, we can derive

"brackGraph op graphExp"
          and
"brackGraph brackGraph brackGraph".

But both of them will eventually derive
   "op op op"

So looking at the next terminal LA(1) which could be any of the "UpperCaseId
| LowerCaseId | FunnyId", there is no way to predict which alternative to
pick. This can go to arbitrary depth. So, increasing k to any value will not
solve the problem. You need to re-structure the grammar.

Hope this helps.

-Sujeet Banerjee
SMTS
Persistent Systems Pvt. Ltd.

On 7/19/06,  Jigang (Robert) Sun <sunjigang1965@yahoo.com.cn> wrote:
>
> I have a parser rule,
>
> graphExp: (brackGraph)+ (options {greedy=true;}:op graphExp)*;  //line 101
>
> brackGraph: op | ("(" graphExp ")")=> "(" graphExp ")"
>
> op: UpperCaseId | LowerCaseId | FunnyId;
>
> I know op (UpperCaseId | LowerCaseId | FunnyId) is either part of
> brackGraph or (op graphExp)*,
> and in (op graphExp)*  op could be a subset of graphExp,
>
> so warning was given:
>
> par.g:101: warning:nondeterminism upon
> par.g:101:     k==1:UpperCaseId,LowerCaseId,FunnyId
> par.g:101:     between alt 1 and exit branch of block
>
> I have not got an idea about it.
>
> Thanks.
>
> Jigang
>
>
>
>
> ___________________________________________________________
> -3.5G20M
> http://cn.mail.yahoo.com/
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060720/2367b86d/attachment.html
From bans.vglab at gmail.com  Thu Jul 20 03:57:40 2006
From: bans.vglab at gmail.com (Bans VGLab)
Date: Thu Jul 20 03:57:44 2006
Subject: [antlr-interest] Re: tree grammar help
In-Reply-To: <626f78830607200343r52eeb85dn72ebac72cbd4e0ee@mail.gmail.com>
References: <C3A072E2F8962C4BBF413A00D9FBEFDC1145105C@TSHUSMIANMSG07.ERF.THOMSON.COM>
	<626f78830607200343r52eeb85dn72ebac72cbd4e0ee@mail.gmail.com>
Message-ID: <626f78830607200357t429ea44r7a40354008be16b@mail.gmail.com>

Hello Michael

I hope you are trying to walk an AST generated by SQL.

I have few suggestions; you may follow any or more that's convenient to you:

1. while parsing, make the DOT as parent using ^ operator. That'll make the
AST easier to walk. In general, it's true for any operator.

2. You should make use of Heterogeneous parsing. This allows you to abstract
most of the information in the node itself, which is done at  the time of
parsing. In your case, the aspects like "Qualifer" and "alias" can be put
inside a COLUM_NODE at the time of parsing. This has advantages. If tomorrow
you want to support something like "Catalog1.Schema1.Tab1.Col1", your tree
parser will not be affected. The qualifier aspect within the COLUM_NODE will
abstract this information, which can be evolved anytime later.

3. Don't treat AST as the regular Syntax Tree (what we studied in Aho
Ulman's dragon book, I guess). An ideal AST removes unnecessary keywords
like "AS" while parsing. It should only capture the relevant components. The
relation between these components should be manifested with appropriates
edges in the tree. This eases tree-parsing a lot, in terms of
tims-space-complexities and coding.

-Sujeet Banerjee
SMTS
Persistent Systems Private Limited.


On 7/14/06, michael.pflug@thomson.com < michael.pflug@thomson.com> wrote:
>
>  I have a tree grammar with the rule:
>
> : tableName=identifier DOT columnName=identifier  ((LITERAL_as)?
> alias=identifier)?
>
>
>
> We are trying to make the first identifier with DOT optional like this:
>
> : (tableName=identifier DOT)? columnName=identifier  ((LITERAL_as)?
> alias=identifier)?
>
>
>
> The generation passes, but generates a bad IF statement.  _t.getType() can
> not equal SQL_IDENTIFIER and DOT at the same time
>
> It looks like this:
>
> *if ((_t.getType()==SQL_IDENTIFIER) && (_t.getType()==DOT))* {
>
>                                     tableName=identifier(_t);
>
>                                     _t = _retTree;
>
>                                     AST tmp16_AST_in = (AST)_t;
>
>                                     match(_t,DOT);
>
>                                     _t = _t.getNextSibling();
>
>                         }
>
>                         else if ((_t.getType()==SQL_IDENTIFIER) &&
> (_tokenSet_0.member(_t.getType()))) {
>
>                         }
>
>                         else {
>
>                                     throw new NoViableAltException(_t);
>
>                         }
>
>
>
> Any ideas on a grammar that would work?
>
>
>
> Thanks.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060720/23714439/attachment.html
From romje at javaxpert.com  Thu Jul 20 05:31:37 2006
From: romje at javaxpert.com (romje@javaxpert.com)
Date: Thu Jul 20 05:35:22 2006
Subject: [antlr-interest] Strange report on console
Message-ID: <46199.207.45.248.31.1153398697.squirrel@buggy.javaxpert.com>


Hi all,
using the latest stable ANTLR release I've got some strange information on
my console:

line 1:1: expecting "File", found 'File'

This is an excerpt from my grammar..

header_eliot_unit:
                  file_identifier
                  ;
file_identifier:
                "File" HEADER_SEPARATOR PATH
                "RS" QUALIFIED_NAME
                ;

Can't see what 's wrong with it...
Can't figure how ANTLR see a string as a kind of char indeed....


grepping through the source code, found this message comes from the
MismatchedTokenException#getMessage().. Why such exception ?
I hope that File is seen a File isn't it ?

Any clue welcomed

Cheers
jerome
-- 
Auteur cahiers du programmeur J2EE - Eyrolles 2003

From sunjigang1965 at yahoo.com.cn  Thu Jul 20 05:56:36 2006
From: sunjigang1965 at yahoo.com.cn (=?gb2312?q?=CB=EF=BC=CD=B8=D5=20Jigang=20(Robert)=20Sun?=)
Date: Thu Jul 20 05:56:44 2006
Subject: =?gb2312?q?=BB=D8=B8=B4=A3=BA=20[antlr-interest]=20Strange=20report=20on?=
	=?gb2312?q?=20console?=
In-Reply-To: <46199.207.45.248.31.1153398697.squirrel@buggy.javaxpert.com>
Message-ID: <20060720125636.77678.qmail@web15704.mail.cnb.yahoo.com>

I suppose the rules is parser rules. Could "File" be recognised as a token by you lexer? I mean 
you should have a lexer rule like

ID: (LETTER)+;
protected LETTER:'a'..'z'|'A'..'Z';

in your rule of
  file_identifier:
                 "File" HEADER_SEPARATOR PATH
                 "RS" QUALIFIED_NAME
                 ;

"File" is intended to be recognised as LITERAL_File, by my experience only after input stream
"File" be firstly matched by a lexer rule, them it is taken as type LITERAL_File.

I am not sure if I am right. 

Jigang
--- romje@javaxpert.com:

> 
> Hi all,
> using the latest stable ANTLR release I've got some strange information on
> my console:
> 
> line 1:1: expecting "File", found 'File'
> 
> This is an excerpt from my grammar..
> 
> header_eliot_unit:
>                   file_identifier
>                   ;
> file_identifier:
>                 "File" HEADER_SEPARATOR PATH
>                 "RS" QUALIFIED_NAME
>                 ;
> 
> Can't see what 's wrong with it...
> Can't figure how ANTLR see a string as a kind of char indeed....
> 
> 
> grepping through the source code, found this message comes from the
> MismatchedTokenException#getMessage().. Why such exception ?
> I hope that File is seen a File isn't it ?
> 
> Any clue welcomed
> 
> Cheers
> jerome
> -- 
> Auteur cahiers du programmeur J2EE - Eyrolles 2003
> 
> 


__________________________________________________
?
http://cn.mail.yahoo.com
From sunjigang1965 at yahoo.com.cn  Thu Jul 20 06:49:24 2006
From: sunjigang1965 at yahoo.com.cn (=?gb2312?q?=CB=EF=BC=CD=B8=D5=20Jigang=20(Robert)=20Sun?=)
Date: Thu Jul 20 06:49:29 2006
Subject: =?gb2312?q?=BB=D8=B8=B4=A3=BA=20Re:=20[antlr-interest]=20parser=20nondete?=
	=?gb2312?q?rminism=20rule?=
In-Reply-To: <626f78830607200315s2d15d03dxc8fe3e6a2daf71c3@mail.gmail.com>
Message-ID: <20060720134924.88294.qmail@web15705.mail.cnb.yahoo.com>


My parser rules-- 
 
graphExp: (brackGraph)+ (options {greedy=true;}:op graphExp)*;

op        : funcName;// contains constructorName;  UpperCaseId | LowerCaseId | FunnyId;
brackGraph: graphVar | ("(" graphExp ")")=> "(" graphExp ")" | constructor | specialExp;
specialExp: basicValue;
graphVar  : var;//var is Varible in Clean language report
constructor: constructorName | "("! constructorName ")"!;

is based on Clean Language report at
ftp://ftp.cs.kun.nl/pub/Clean/Clean20/doc/CleanRep2.0.pdf

relevant grammar from the report is (on page 113,116 ,117)

GraphExpr = Application //I merged this rule with the next, so Application is not used
Application = {BrackGraph}+ | GraphExpr Operator GraphExpr//I did left recursion elimination at
this
Operator = FunctionName | ConstructorName

BrackGraph = GraphVariable
  | Constructor
  | Function
  | (GraphExpr)
  | LambdaAbstr
  | CaseExpr
  | LetExpr
  | SpecialExpression
  | DynamicExpression

Constructor = onstructorName | (ConstructorName)

FunctionName = LowerCaseId | UpperCaseId | FunnyId
ConstructorName = UpperCaseId | FunnyId
Variable = LowerCaseId

//the following is terminals
LowerCaseId; = LowerCaseChar~{IdChar}
UpperCaseId = UpperCaseChar~{IdChar}
FunnyId = {SpecialChar}+

My parser rules is a subset of it. I wish you can check if I have done the left recurion
elimination  properly. It must be my cause, there should be no problem with the Clean language
specification. 

Thanks.

Jigang 

--- Bans VGLab <bans.vglab@gmail.com>:

> Hello Jigang,
> 
> The first rule can be re-written like this:
> 
> graphExp
>     : brackGraph
>         (
>             brackGraph
>             |
>         )+
>         (options {greedy=true;}:op graphExp)*
>     ;
> 
> So, the statement "between alt 1 and exit branch of block" means the first
> alternative in the grammar expression " brackGraph |  " and its exit.
> 
> This can be easily seen with this example derivation:
> 
> Applying different alternatives in the rule 1, we can derive
> 
> "brackGraph op graphExp"
>           and
> "brackGraph brackGraph brackGraph".
> 
> But both of them will eventually derive
>    "op op op"
> 
> So looking at the next terminal LA(1) which could be any of the "UpperCaseId
> | LowerCaseId | FunnyId", there is no way to predict which alternative to
> pick. This can go to arbitrary depth. So, increasing k to any value will not
> solve the problem. You need to re-structure the grammar.
> 
> Hope this helps.
> 
> -Sujeet Banerjee
> SMTS
> Persistent Systems Pvt. Ltd.
> 
> On 7/19/06,  Jigang (Robert) Sun <sunjigang1965@yahoo.com.cn> wrote:
> >
> > I have a parser rule,
> >
> > graphExp: (brackGraph)+ (options {greedy=true;}:op graphExp)*;  //line 101
> >
> > brackGraph: op | ("(" graphExp ")")=> "(" graphExp ")"
> >
> > op: UpperCaseId | LowerCaseId | FunnyId;
> >
> > I know op (UpperCaseId | LowerCaseId | FunnyId) is either part of
> > brackGraph or (op graphExp)*,
> > and in (op graphExp)*  op could be a subset of graphExp,
> >
> > so warning was given:
> >
> > par.g:101: warning:nondeterminism upon
> > par.g:101:     k==1:UpperCaseId,LowerCaseId,FunnyId
> > par.g:101:     between alt 1 and exit branch of block
> >
> > I have not got an idea about it.
> >
> > Thanks.
> >
> > Jigang
> >
> >
> >
> >
> > ___________________________________________________________
> > -3.5G20M
> > http://cn.mail.yahoo.com/
> >
> 



		
___________________________________________________________ 
-3.5G20M 
http://cn.mail.yahoo.com
From lgcraymer at yahoo.com  Thu Jul 20 10:45:04 2006
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Thu Jul 20 10:45:23 2006
Subject: [antlr-interest] Strange report on console
In-Reply-To: <46199.207.45.248.31.1153398697.squirrel@buggy.javaxpert.com>
Message-ID: <20060720174504.24962.qmail@web55904.mail.re3.yahoo.com>

This looks like an ANTLR 3 problem.  Ter changed to single-quoted strings ('File' is a STRING_LITERAL), but the lexer also recognizes double-quoted STRINGs (DOUBLE_QUOTED_STRING_LITERAL).  Change "File" to 'File' in your grammar, and do the same for other doubly quoted strings.

--Loring

romje@javaxpert.com wrote: 
Hi all,
using the latest stable ANTLR release I've got some strange information on
my console:

line 1:1: expecting "File", found 'File'

This is an excerpt from my grammar..

header_eliot_unit:
                  file_identifier
                  ;
file_identifier:
                "File" HEADER_SEPARATOR PATH
                "RS" QUALIFIED_NAME
                ;

Can't see what 's wrong with it...
Can't figure how ANTLR see a string as a kind of char indeed....


grepping through the source code, found this message comes from the
MismatchedTokenException#getMessage().. Why such exception ?
I hope that File is seen a File isn't it ?

Any clue welcomed

Cheers
jerome
-- 
Auteur cahiers du programmeur J2EE - Eyrolles 2003



 		
---------------------------------
Yahoo! Messenger with Voice. Make PC-to-Phone Calls to the US (and 30+ countries) for 2?/min or less.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060720/5978cdc5/attachment.html
From parrt at cs.usfca.edu  Thu Jul 20 11:13:04 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Jul 20 11:10:41 2006
Subject: [antlr-interest] Strange report on console
In-Reply-To: <46199.207.45.248.31.1153398697.squirrel@buggy.javaxpert.com>
References: <46199.207.45.248.31.1153398697.squirrel@buggy.javaxpert.com>
Message-ID: <434DB548-82FC-4BC6-88B1-7E849EB67C3A@cs.usfca.edu>


On Jul 20, 2006, at 5:31 AM, romje@javaxpert.com wrote:

>
> Hi all,
> using the latest stable ANTLR release I've got some strange  
> information on
> my console:
>
> line 1:1: expecting "File", found 'File'

This is usually a token type mismatch problem.  You did not import  
the token vocab into your lexer or something.

Terence

From Eric.Liprandi at ftc.usda.gov  Thu Jul 20 14:38:46 2006
From: Eric.Liprandi at ftc.usda.gov (Liprandi, Eric - Fort Collins, CO)
Date: Thu Jul 20 14:38:51 2006
Subject: [antlr-interest] Windows .exe build for 2.7.6 anyone?
Message-ID: <5BFB5B5CFE89A4429A93DAC79E8041F4013488E6@COFORTCOL2S303>

Hi everyone,

 

We have been trying to compile 2.7.6 as a standalone exe file for
windows without any success.

Has anyone done that successfully?

We are using the 2.7.5 version posted on the website last year for now,
but we would love to use 2.7.6.

We have .Net 1.1 and 2.0 on all our build environment if that helps.

 

Thanks,

 

Eric.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060720/cee6cbf2/attachment.html
From open.zone at virgin.net  Thu Jul 20 15:32:40 2006
From: open.zone at virgin.net (Micheal J)
Date: Thu Jul 20 15:14:31 2006
Subject: [antlr-interest] Windows .exe build for 2.7.6 anyone?
In-Reply-To: <5BFB5B5CFE89A4429A93DAC79E8041F4013488E6@COFORTCOL2S303>
Message-ID: <021801c6ac4c$6a547650$c704a8c0@hercules>

If you mean the .exe executable version that run on the.NET framework, a
2.7.6 version is already shared on the website (or you can create your own
with ikvm).
 
If you mean GCJ executables, can't help you there. I guess you could try
creating your own too. Not sure what the benefit is above the
straightforward ikvm version though.
 
 
Micheal
 

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Liprandi, Eric - Fort
Collins, CO
Sent: 20 July 2006 22:39
To: antlr-interest@antlr.org
Subject: [antlr-interest] Windows .exe build for 2.7.6 anyone?



Hi everyone,

 

We have been trying to compile 2.7.6 as a standalone exe file for windows
without any success.

Has anyone done that successfully?

We are using the 2.7.5 version posted on the website last year for now, but
we would love to use 2.7.6.

We have .Net 1.1 and 2.0 on all our build environment if that helps.

 

Thanks,

 

Eric.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060720/af92a702/attachment.html
From dieter_frej at gmx.net  Thu Jul 20 14:42:22 2006
From: dieter_frej at gmx.net (Dieter Frej)
Date: Thu Jul 20 15:44:51 2006
Subject: [antlr-interest] v3: strange debugging message in new java.g
	grammar
In-Reply-To: <B7D58678-44E2-4730-941B-7F6DF4AC77F6@cs.usfca.edu>
References: <44B2A716.1010005@gmx.net>
	<B7D58678-44E2-4730-941B-7F6DF4AC77F6@cs.usfca.edu>
Message-ID: <44BFF8BE.8000905@gmx.net>

Hi Ter,

> By default ANTLR does not send the exceptions back out...it tries to  
> recover.  Override reportError and recover if you want; also can set  
> trycatchclause action I think it is.
is there somewhere a list of all available grammar options and all
availabe action stuff? That would make development easier...


>> I got the following in my err.txt and I have no idea where this came
>> from because it does not look like an exception (they should all be
>> handled).
>>
>> /home/db/jck/JCK-compiler-15a/tests/lang/FP/fpl001/fpl00101m8/ 
>> fpl00101m8.java
>> [compilationUnit, typeDeclaration, classOrInterfaceDeclaration,  
>> classDeclaration, normalClassDeclaration, classBody,  
>> classBodyDeclaration, memberDecl]: line
>>  20:18 decision=<<132:1: memberDecl :  ( ( 
>> genericMethodOrConstructorDecl )=>  genericMethodOrConstructorDecl | ( 
>> methodDeclaration )=>  methodDeclaration | (
>> fieldDeclaration )=> fieldDeclaration | ( 'void' Identifier  
>> voidMethodDeclaratorRest )=> 'void' Identifier  
>> voidMethodDeclaratorRest | ( Identifier construct
>> orDeclaratorRest )=> Identifier constructorDeclaratorRest |  ( 
>> interfaceDeclaration )=> interfaceDeclaration |  classDeclaration );>> 
>> state 15 (decision=36) n
>> o viable alt; token=[@106,466:468='int',<59>,20:18]
>> [compilationUnit, typeDeclaration, classOrInterfaceDeclaration,  
>> classDeclaration, normalClassDeclaration, classBody,  
>> classBodyDeclaration, memberDecl, const
>> ructorDeclaratorRest, formalParameters]: line 20:53 mismatched  token: 
>> [@119,501:508='strictfp',<54>,20:53]; expecting type ')'
>> ---------------
>> Any comments on this?
> 
> 
> That says that in formalParameters, it didn't like strictfp.   
> Hmm...must be a bug in the spec.  I did this:
> 
> formalParameterDecls
>         :       'final'? annotations? type formalParameterDeclsRest?
>         ;
> 
> seems like strictfp, a modifier, needs to be in there.  Maybe I  
> simplified.  what's at line 20, char 53?
oh, well, it was to late when I sent that email. Line 20 is

public static int run(String argv[], PrintStream strictfp) {

so it should fail because strictfp is a reserved keyword which is not
allowed as name...

- Didi
From craig at palantir.co.za  Thu Jul 20 22:43:10 2006
From: craig at palantir.co.za (Craig Main)
Date: Thu Jul 20 22:43:18 2006
Subject: [antlr-interest] Windows .exe build for 2.7.6 anyone?
In-Reply-To: <5BFB5B5CFE89A4429A93DAC79E8041F4013488E6@COFORTCOL2S303>
Message-ID: <20060721054314.1712BDCF22@www.antlr.org>

Hi Eric,

 

I have two executable versions I have built.

I have one native exe, built with gcj, and one compiled to MSIL using ikvm.

 

I could mail them to you if you can receive mail messages of around three
megabytes in size (each).

 

Maybe Terrence is keen to provide a download though?

 

Cheers

Craig

 

  _____  

From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Liprandi, Eric - Fort
Collins, CO
Sent: 20 July 2006 11:39 PM
To: antlr-interest@antlr.org
Subject: [antlr-interest] Windows .exe build for 2.7.6 anyone?

 

Hi everyone,

 

We have been trying to compile 2.7.6 as a standalone exe file for windows
without any success.

Has anyone done that successfully?

We are using the 2.7.5 version posted on the website last year for now, but
we would love to use 2.7.6.

We have .Net 1.1 and 2.0 on all our build environment if that helps.

 

Thanks,

 

Eric.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060721/d466c066/attachment.html
From parrt at cs.usfca.edu  Thu Jul 20 23:06:03 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Jul 20 23:06:06 2006
Subject: [antlr-interest] Windows .exe build for 2.7.6 anyone?
In-Reply-To: <20060721054314.1712BDCF22@www.antlr.org>
References: <20060721054314.1712BDCF22@www.antlr.org>
Message-ID: <79A1F284-AB88-49DE-8181-06F17805C082@cs.usfca.edu>


On Jul 20, 2006, at 10:43 PM, Craig Main wrote:

> Hi Eric,
>
>
>
> I have two executable versions I have built.
>
> I have one native exe, built with gcj, and one compiled to MSIL  
> using ikvm.
>
>
>
> I could mail them to you if you can receive mail messages of around  
> three megabytes in size (each).
>
>
>
> Maybe Terrence is keen to provide a download though?
Sure.  Email them to me and I'll put on download page :)
Ter

From ejohnsoe2001 at yahoo.com  Fri Jul 21 07:13:09 2006
From: ejohnsoe2001 at yahoo.com (Edgar Johnson)
Date: Fri Jul 21 07:13:13 2006
Subject: [antlr-interest] Question regarding latest ansi c grammar release.
Message-ID: <20060721141310.84870.qmail@web52805.mail.yahoo.com>

Hi,
 
  When using the latest release of the ansi c grammar for antlr 3 
released by Parr on wed of this week (Terence Parr Wed Jul 19, 2006 18:18 link: www.antlr.org/grammar/list), 
I recieved the following output: 
   
  C:\projects\antlr\ANTLRW~1\c>runs pt.h
Parsing: samples\pt.h . . .
[translation_unit, external_declaration, declaration,
declaration_specifiers]: line 8:8 required (...)+ loop (decision=9
) did not match anything; token=[@54,79:87='SVector64',<4>,8:8]
define type SVector64
[translation_unit, external_declaration, declaration]: line 8:18
mismatched token: [@56,89:92='temp',<4>,8:18]; expectin
g type ';'
SVector64 is a type
define type SGeocentric
SVector64 is a type
define type SLocation
  
   for the following input:
  
C:\projects\antlr\ANTLRW~1\c>type samples\pt.h
struct SVector64
{
               int X;
               int Y;
               int Z;
};
  typedef SVector64 temp;
typedef SVector64 SGeocentric;
typedef SVector64 SLocation;
   
   
  How come the tokens do not match for the first occurence? (did not 
match anything)
   
  Thanks,
  Edgar



<!--
 		
---------------------------------
How low will we go? Check out Yahoo! Messenger?s low  PC-to-Phone call rates.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060721/1fb565d7/attachment-0001.html
From Eric.Liprandi at ftc.usda.gov  Fri Jul 21 08:14:26 2006
From: Eric.Liprandi at ftc.usda.gov (Liprandi, Eric - Fort Collins, CO)
Date: Fri Jul 21 08:14:34 2006
Subject: [antlr-interest] Windows .exe build for 2.7.6 anyone?
Message-ID: <5BFB5B5CFE89A4429A93DAC79E8041F401348935@COFORTCOL2S303>

You guys rock!

Thanks Craig!
Thanks Terrence!

Long live ANTLR!

Eric.

-----Original Message-----
From: Terence Parr [mailto:parrt@cs.usfca.edu] 
Sent: Friday, July 21, 2006 12:06 AM
To: Craig Main
Cc: Liprandi, Eric - Fort Collins, CO; Antlr Interest
Subject: Re: [antlr-interest] Windows .exe build for 2.7.6 anyone?


On Jul 20, 2006, at 10:43 PM, Craig Main wrote:

> Hi Eric,
>
>
>
> I have two executable versions I have built.
>
> I have one native exe, built with gcj, and one compiled to MSIL  
> using ikvm.
>
>
>
> I could mail them to you if you can receive mail messages of around  
> three megabytes in size (each).
>
>
>
> Maybe Terrence is keen to provide a download though?
Sure.  Email them to me and I'll put on download page :)
Ter


From Eric.Liprandi at ftc.usda.gov  Fri Jul 21 08:40:51 2006
From: Eric.Liprandi at ftc.usda.gov (Liprandi, Eric - Fort Collins, CO)
Date: Fri Jul 21 08:40:57 2006
Subject: [antlr-interest] Windows .exe build for 2.7.6 anyone?
Message-ID: <5BFB5B5CFE89A4429A93DAC79E8041F40134893B@COFORTCOL2S303>

Craig,

 

As I always like to expend my knowledge, do you have a "recipe" for
building it?

We were able to produce the jar file after some minor tweaking, but I am
short on how to actually make it executable.

 

Thanks again,

 

Eric.

 

  _____  

From: Craig Main [mailto:craig@palantir.co.za] 
Sent: Thursday, July 20, 2006 11:43 PM
To: Liprandi, Eric - Fort Collins, CO; antlr-interest@antlr.org
Subject: RE: [antlr-interest] Windows .exe build for 2.7.6 anyone?

 

Hi Eric,

 

I have two executable versions I have built.

I have one native exe, built with gcj, and one compiled to MSIL using
ikvm.

 

I could mail them to you if you can receive mail messages of around
three megabytes in size (each).

 

Maybe Terrence is keen to provide a download though?

 

Cheers

Craig

 

  _____  

From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Liprandi, Eric -
Fort Collins, CO
Sent: 20 July 2006 11:39 PM
To: antlr-interest@antlr.org
Subject: [antlr-interest] Windows .exe build for 2.7.6 anyone?

 

Hi everyone,

 

We have been trying to compile 2.7.6 as a standalone exe file for
windows without any success.

Has anyone done that successfully?

We are using the 2.7.5 version posted on the website last year for now,
but we would love to use 2.7.6.

We have .Net 1.1 and 2.0 on all our build environment if that helps.

 

Thanks,

 

Eric.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060721/5d8a44ac/attachment.html
From the_e57 at yahoo.com  Fri Jul 21 11:31:11 2006
From: the_e57 at yahoo.com (Eugen Cazacu)
Date: Fri Jul 21 11:31:14 2006
Subject: [antlr-interest] Problem with memory management
Message-ID: <20060721183111.5911.qmail@web52112.mail.yahoo.com>

Hi, I am new to this list, someone recommended me to
join it so that I can get my questions and problems
about antlr answered.
I am writing a verilog parser in antl, actually it is
finished, now we are running tests on it, one type of
test revealed a pretty big problem with antlr design.
I must mention that the generated code is C++.
The problem is in the way the AST is built. This
nextSibling/firstChild tree design has a problem when
one node has many children, because they are all
stored in a unidirectional list if I use CommonAST
class. The problem occures on the destruction of the
tree. It happenes like this: you want to destroy the
root node, the root has many children, it calls the
destructor of the first child node, that one in order
to destroy calls the destructor on all of its members
and calls the destructor of the next sibling, the
destructor of the next sibling calls the destructor of
its next sibling and so on until the last sibling.
Since one node might have many children, this causes a
recursive call if all of the destructors in depth. IF
a node has as many as 20000-30000 children there are
at least 20000-30000 recursive calls, if we would
consider that the refCounter adds one more function
call for each node we would have from 40000 to 60000
recursive functions calls, which causes a stack
overflow and make the program to end with a
segmentation fault. To avoid this probelem I wrote a
special destroy function to delete the AST after I
don't need it any more, that looks like this:

void destroy(RefAST &ast) {
  if(!ast.get())
    return;
  std::cerr << "before destroy" << endl;
  std::queue<RefAST> destroyQueue;
  destroyQueue.push(ast);
  ast = 0;
  RefAST temp1, temp2;
  while(!destroyQueue.empty()) {
    temp1 = destroyQueue.front();
    destroyQueue.pop();
    temp2 = temp1->getFirstChild();
    temp1->setFirstChild(RefAST(0));
    if(temp2.get())
      destroyQueue.push(temp2);
    temp2 = temp1->getNextSibling();
    temp1->setNextSibling(RefAST(0));
    if(temp2.get())
      destroyQueue.push(temp2);
    temp1 = 0;
    temp2 = 0;
  }

(this function moves the nodes in a vector type
structures and then deletes them, this way I avoid the
recursive call of the destructors)
This make the program terminate correctly. But only in
the case when the parser doesn't throw any exceptions
(MismatchedTokenException for example). When the
parser does this, it destroyes whatever tree was built
by itself and if the tree is similar to what I
described before, a stack overflow occures and the
program end without printing the exception message in
a segmentation fault, because I can only catch the
exceptions after antlr tryes to delete the tree.

To avoid this problem I am attempting now to write my
own AST Node class derived from AST that would
simulate the behaviour of it, but would use a more
linear structure, small example:

class MyAST : public AST {
  vector<RefMyAST> m_children;
  RefMyAST parent;
};

But here I got another problem. The reference counting
antlr nechanism doesn't have a weak reference class (I
can't use strong references, RefCount, because it
would cause a the object to have a counted reference
to itself and it will never be destroyed, since antlr
RefCount doesn't check for loop references) , that I
could use in place of "this" pointer, I need it
because all the antlr interface uses Refs. This would
make me to rewrite antlr code, which I don't want to
do because when a new version of antlr will appear I
will have to rewrite some code again. I hope that
someone could help with this here.

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From walter.schilling at computer.org  Fri Jul 21 12:41:13 2006
From: walter.schilling at computer.org (Walter Schilling)
Date: Fri Jul 21 12:41:21 2006
Subject: [antlr-interest] Line number help
Message-ID: <1153510873.7920.46.camel@localhost>

Good afternoon.

I am having some difficulty developing a Java analysis tool when it
comes to line numberings and I want to see if there is a better way to
handle what I need done.  In specific, I desire two bits of information
from my tree parser, the starting line / column location for a construct
and the ending line / column location for a construct.  Per one of the
older FAQ answers in the antlr documentation, I have extended the
CommonAST class to include line numbers and locations.  However, if I
have a rule such as:

expression
	:	#(EXPR expr)
	;

the line number and column number within the AST are always zero.  I
suspect this has to do with the way they are constructed in the parser.
As an interim measure, I have developed routines which walk the
expression structure to find the starting and ending line numbers, but
is there any easy way of appending this information right into the EXPR
node?  That is, any way short of modifying each and every rule where I
create such a tree structure when parsing the code?

Thanks,

Walt Schilling

-- 
Walter W. Schilling, Jr.
2004 - 2005 Ohio Space Grant Consortium PhD. Fellowship Recipient
University of Toledo PhD Doctoral Candidate
MSES 1998 University of Toledo
BSEE 1997 Ohio Northern University

From lgcraymer at yahoo.com  Fri Jul 21 16:30:15 2006
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Fri Jul 21 16:30:19 2006
Subject: [antlr-interest] Problem with (C++) memory management
In-Reply-To: <20060721183111.5911.qmail@web52112.mail.yahoo.com>
Message-ID: <20060721233015.30453.qmail@web55905.mail.re3.yahoo.com>

Eugen--

You will probably need Ric Klaren's help on this--I think that you need to modify the ~RefAST destructor.

--Loring


Eugen Cazacu <the_e57@yahoo.com> wrote: Hi, I am new to this list, someone recommended me to
join it so that I can get my questions and problems
about antlr answered.
I am writing a verilog parser in antl, actually it is
finished, now we are running tests on it, one type of
test revealed a pretty big problem with antlr design.
I must mention that the generated code is C++.
The problem is in the way the AST is built. This
nextSibling/firstChild tree design has a problem when
one node has many children, because they are all
stored in a unidirectional list if I use CommonAST
class. The problem occures on the destruction of the
tree. It happenes like this: you want to destroy the
root node, the root has many children, it calls the
destructor of the first child node, that one in order
to destroy calls the destructor on all of its members
and calls the destructor of the next sibling, the
destructor of the next sibling calls the destructor of
its next sibling and so on until the last sibling.
Since one node might have many children, this causes a
recursive call if all of the destructors in depth. IF
a node has as many as 20000-30000 children there are
at least 20000-30000 recursive calls, if we would
consider that the refCounter adds one more function
call for each node we would have from 40000 to 60000
recursive functions calls, which causes a stack
overflow and make the program to end with a
segmentation fault. To avoid this probelem I wrote a
special destroy function to delete the AST after I
don't need it any more, that looks like this:

void destroy(RefAST &ast) {
  if(!ast.get())
    return;
  std::cerr << "before destroy" << endl;
  std::queue destroyQueue;
  destroyQueue.push(ast);
  ast = 0;
  RefAST temp1, temp2;
  while(!destroyQueue.empty()) {
    temp1 = destroyQueue.front();
    destroyQueue.pop();
    temp2 = temp1->getFirstChild();
    temp1->setFirstChild(RefAST(0));
    if(temp2.get())
      destroyQueue.push(temp2);
    temp2 = temp1->getNextSibling();
    temp1->setNextSibling(RefAST(0));
    if(temp2.get())
      destroyQueue.push(temp2);
    temp1 = 0;
    temp2 = 0;
  }

(this function moves the nodes in a vector type
structures and then deletes them, this way I avoid the
recursive call of the destructors)
This make the program terminate correctly. But only in
the case when the parser doesn't throw any exceptions
(MismatchedTokenException for example). When the
parser does this, it destroyes whatever tree was built
by itself and if the tree is similar to what I
described before, a stack overflow occures and the
program end without printing the exception message in
a segmentation fault, because I can only catch the
exceptions after antlr tryes to delete the tree.

To avoid this problem I am attempting now to write my
own AST Node class derived from AST that would
simulate the behaviour of it, but would use a more
linear structure, small example:

class MyAST : public AST {
  vector m_children;
  RefMyAST parent;
};

But here I got another problem. The reference counting
antlr nechanism doesn't have a weak reference class (I
can't use strong references, RefCount, because it
would cause a the object to have a counted reference
to itself and it will never be destroyed, since antlr
RefCount doesn't check for loop references) , that I
could use in place of "this" pointer, I need it
because all the antlr interface uses Refs. This would
make me to rewrite antlr code, which I don't want to
do because when a new version of antlr will appear I
will have to rewrite some code again. I hope that
someone could help with this here.

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 


 __________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060721/93b7182d/attachment.html
From parrt at cs.usfca.edu  Fri Jul 21 17:03:26 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Jul 21 17:00:58 2006
Subject: [antlr-interest] much improved LL(*) analysis errors
Message-ID: <53B89E3D-B9B5-487D-919D-ACCC599F850D@cs.usfca.edu>

Hi, some days you just get lucky.  Been racking my brain trying to  
find a more graceful way of "failing" to analyze a decision with LL 
(*).  ANTLR was taking 18s to handle a Java grammar directly ripped  
from Rats! packrat parser.  It turns out that the set of decisions  
for which ANTLR times out is the same set (so far) of non-LL(*)  
decisions.  Morever, I'm able to detect this situation quickly and  
report rather than timing out. Errors look like:

java.g:468:23: [fatal] rule concreteDimensions has non-LL(*)
     decision due to recursive rule invocations in alts 1,2.  Resolve
     by left-factoring or using syntactic predicates with fixed k
     lookahead or use backtrack=true option.

For the full story, check this out:

http://www.antlr.org/blog/antlr3/lookahead.tml

Ter
From parrt at cs.usfca.edu  Fri Jul 21 17:51:30 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Jul 21 17:49:01 2006
Subject: [antlr-interest] v3: strange debugging message in new java.g
	grammar
In-Reply-To: <44BFF8BE.8000905@gmx.net>
References: <44B2A716.1010005@gmx.net>
	<B7D58678-44E2-4730-941B-7F6DF4AC77F6@cs.usfca.edu>
	<44BFF8BE.8000905@gmx.net>
Message-ID: <852FD889-BBF0-4C71-81D6-55F8809D6CAF@cs.usfca.edu>


On Jul 20, 2006, at 2:42 PM, Dieter Frej wrote:

> Hi Ter,
>
>> By default ANTLR does not send the exceptions back out...it tries  
>> to  recover.  Override reportError and recover if you want; also  
>> can set  trycatchclause action I think it is.
> is there somewhere a list of all available grammar options and all
> availabe action stuff? That would make development easier...

Yep. *any* doc would help ;)  I'd look at Grammar.java:

	public static final Set legalOptions =
			new HashSet() {
				{
				add("language"); add("tokenVocab");
				add("output"); add("ASTLabelType");
				add("TokenLabelType");
				add("superClass");
				add("filter");
				add("k");
				add("backtrack");
				add("memoize");
				}
			};

Ter
From parrt at cs.usfca.edu  Fri Jul 21 18:05:17 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Jul 21 18:02:48 2006
Subject: [antlr-interest] Question regarding latest ansi c grammar release.
In-Reply-To: <20060721141310.84870.qmail@web52805.mail.yahoo.com>
References: <20060721141310.84870.qmail@web52805.mail.yahoo.com>
Message-ID: <B8E50F13-56A7-4B74-8F32-36862F31997A@cs.usfca.edu>

On Jul 21, 2006, at 7:13 AM, Edgar Johnson wrote:
>    for the following input:
>
> C:\projects\antlr\ANTLRW~1\c>type samples\pt.h
> struct SVector64
> {
>                int X;
>                int Y;
>                int Z;
> };
>   typedef SVector64 temp;

That is not valid C if I remember...need struct in that typedef :)

Ter
From parrt at cs.usfca.edu  Fri Jul 21 18:21:04 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Jul 21 18:18:36 2006
Subject: [antlr-interest] ANTLR 3.0b3 released
Message-ID: <963C3142-AAB2-42A9-9BAB-078A1FBE2D14@cs.usfca.edu>

Howdy...lots of new stuff in beta 3:

http://www.antlr.org/v3/README.txt

Updated examples to have C grammar:

http://www.antlr.org/download/examples-v3.tar.gz

Dev guys: Label antlr-3.0b3 is state of b3 in depot.

Terence



From parrt at cs.usfca.edu  Fri Jul 21 18:21:57 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Jul 21 18:19:29 2006
Subject: [antlr-interest] Re: (follow up) Question regarding latest ansi c
	grammar release.
In-Reply-To: <B8E50F13-56A7-4B74-8F32-36862F31997A@cs.usfca.edu>
References: <20060721141310.84870.qmail@web52805.mail.yahoo.com>
	<B8E50F13-56A7-4B74-8F32-36862F31997A@cs.usfca.edu>
Message-ID: <51A661BB-0B38-4A82-A5D6-0CF9B14B0704@cs.usfca.edu>

On Jul 21, 2006, at 6:05 PM, Terence Parr wrote:
> On Jul 21, 2006, at 7:13 AM, Edgar Johnson wrote:
>>    for the following input:
>>
>> C:\projects\antlr\ANTLRW~1\c>type samples\pt.h
>> struct SVector64
>> {
>>                int X;
>>                int Y;
>>                int Z;
>> };
>>   typedef SVector64 temp;
>
> That is not valid C if I remember...need struct in that typedef :)

I should mention that ANTLRWorks quickly told me this not my brain. ;)

Terence
From tbrandonau at gmail.com  Fri Jul 21 22:21:44 2006
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Fri Jul 21 22:21:49 2006
Subject: [antlr-interest] Backtrack option breaks AST rewrite
Message-ID: <ebc876d70607212221l235c817dm1c1186e54eb68496@mail.gmail.com>

In Antlr 3.0b3 setting the backtrack option seems to break parsing of
tree rewrites using closures. This grammar:
grammar CParser;
options {
    backtrack=true;
    output=AST;
}
tokens { TU; }
translation_unit
	: external_declaration+
	  -> ^( TU external_declaration+ /*Err here*/)
	;
external_declaration
	: 'a'
	;

gives errors:
0:0: syntax error: codegen: <AST>:0:0: unexpected AST node: synpred3
13:13: expecting EOB, found 'external_declaration'
(13,13 is at the end of the tree rewrite block, as indeicated)
Removing the backtrack option fixes it, as does removing the closure
on the rewrite rule (i.e. "-> ^( TU external_declaration)").

Thanks,
Tom.
From rajeevb2 at yahoo.com  Sat Jul 22 00:21:27 2006
From: rajeevb2 at yahoo.com (Rajeev Bharadhwaj)
Date: Sat Jul 22 00:21:32 2006
Subject: [antlr-interest] Question on aborting rule based on pattern
Message-ID: <20060722072127.96531.qmail@web50315.mail.yahoo.com>

How do I stop matching so it can reduce the rule?

aaa : "AAAA" SPACE bbb ccc ;

bbb : ( ddd )+ ;

ddd : ha:ATOM ":" SPACE eee SPACE ; // Rule 1

eee : hva:ATOM (":" hvap:ATOM)* ;

ccc : "XXX" ":" SPACE ((cccentry)+ ; // Rule 2

I would like Rule 1 to stop matching when
ha.getText()==XXX, so aaa can shift to Rule 2 (ccc).

ATOM matches alphabets and numbers to create strings.

R B

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From stanio at myrealbox.com  Sat Jul 22 04:14:57 2006
From: stanio at myrealbox.com (Stanimir Stamenkov)
Date: Sat Jul 22 04:15:06 2006
Subject: [antlr-interest] Question on aborting rule based on pattern
In-Reply-To: <20060722072127.96531.qmail@web50315.mail.yahoo.com>
References: <20060722072127.96531.qmail@web50315.mail.yahoo.com>
Message-ID: <44C208B1.20609@myrealbox.com>

/Rajeev Bharadhwaj/:

> How do I stop matching so it can reduce the rule?
> 
> aaa : "AAAA" SPACE bbb ccc ;
> 
> bbb : ( ddd )+ ;
> 
> ddd : ha:ATOM ":" SPACE eee SPACE ; // Rule 1
> 
> eee : hva:ATOM (":" hvap:ATOM)* ;
> 
> ccc : "XXX" ":" SPACE ((cccentry)+ ; // Rule 2
> 
> I would like Rule 1 to stop matching when
> ha.getText()==XXX, so aaa can shift to Rule 2 (ccc).
> 
> ATOM matches alphabets and numbers to create strings.

Do semantic predicates [1] work for you?

ddd : ha:ATOM { !"XXX".equals(ha.getText()) }? ...

[1] http://www.antlr.org/doc/metalang.html#SemanticPredicates

-- 
Stanimir
From jsamort at gmail.com  Sat Jul 22 12:40:19 2006
From: jsamort at gmail.com (Scott Amort)
Date: Sat Jul 22 12:40:23 2006
Subject: [antlr-interest] ANTLR 3 and StringTemplate
Message-ID: <44C27F23.5090708@gmail.com>

Hi All,

I am quite looking forward to ANTLR 3, and I am looking for a bit of advice.

Currently, I am working on a project that translates a textual musical
representation into graphical output.  The project will consist of a
lexer/parser in a shared library (currently almost finished implementing
with ANTLR 2); a second shared library that will actually perform the
computations necessary to properly layout the graphical representation;
and ultimately, a graphical front-end to display (and manipulate) the
end result.  For now, the development is focused on the first two
libraries (both to be implemented in C++), and a simple command-line
application is being used to co-ordinate and test.

Somewhat tangentially, it would also be beneficial to be able to convert
the textual representation to other text-based formats.  This would seem
to be exactly what StringTemplate is designed for, but I have a few
questions.

I see that StringTemplate uses only Java, C# or Python.  Can I have it
interact with my C++ ANTLR 2 parser library?  For example, can I write
some Python code that will obtain a data structure from the parser
library and then use StringTemplate to obtain the correct output?  I
know that C++/Python interoperability is theoretically possible, but I
am wondering if anyone using StringTemplate has any direct experience
with this option.  I have looked at a few StringTemplate examples, but
they seem to generate both the data and the output template, instead of
obtaining the data from an external source.

The main issue seems to be language choice - C++ will be the main
development language for this project (except for the graphical
front-end, which will likely be C#/Mono), and I am unsure as to whether
it is either possible and/or desirable to mix languages to obtain the
benefits of StringTemplate.  Should I instead just implement an
alternative in C++ (although this seems like reworking the wheel
considering how useful StringTemplate appears to be)?  Finally, will
ANTLR 3 with its use of StringTemplate offer any solutions?

Thanks for any assistance!

Best,
Scott
From eric at omnicurious.com  Sat Jul 22 12:53:23 2006
From: eric at omnicurious.com (Eric Holmberg)
Date: Sat Jul 22 12:54:08 2006
Subject: [antlr-interest] Lexer:  Default token?
Message-ID: <000c01c6adc8$7e25f8c0$0a00a8c0@FASTBRICK>

I have a case where depending upon the context of the parse, I want to
either parse all tokens or ignore then, but still save them to the AST
(hidden tokens are fine).  The problem is that there aren't any rules for
the characters defined in the lexer, so the lexer throws a parse exception.

Is there a way, in the lexer, to specify a default token type such that if a
character/character-sequence doesn't match any of the token rules, then it
gets packaged up in this default token type?

I can always do this by hand, but it's tedious and gets tricky for rules
that match comments, etc.

-Eric

From rajeevb2 at yahoo.com  Sat Jul 22 16:04:03 2006
From: rajeevb2 at yahoo.com (Rajeev Bharadhwaj)
Date: Sat Jul 22 16:04:06 2006
Subject: [antlr-interest] Question on aborting rule based on pattern
In-Reply-To: <44C208B1.20609@myrealbox.com>
Message-ID: <20060722230403.43707.qmail@web50314.mail.yahoo.com>

I tried inserting the semantic predicate, it fires
alright but it throws a SemanticException. This looks
more like a mechanism to find syntax errors and abort
the parsing. In my case, I want to catch the exception
and stop matching ddd and continue parsing.

Rajeev

--- Stanimir Stamenkov <stanio@myrealbox.com> wrote:

> /Rajeev Bharadhwaj/:
> 
> > How do I stop matching so it can reduce the rule?
> > 
> > aaa : "AAAA" SPACE bbb ccc ;
> > 
> > bbb : ( ddd )+ ;
> > 
> > ddd : ha:ATOM ":" SPACE eee SPACE ; // Rule 1
> > 
> > eee : hva:ATOM (":" hvap:ATOM)* ;
> > 
> > ccc : "XXX" ":" SPACE ((cccentry)+ ; // Rule 2
> > 
> > I would like Rule 1 to stop matching when
> > ha.getText()==XXX, so aaa can shift to Rule 2
> (ccc).
> > 
> > ATOM matches alphabets and numbers to create
> strings.
> 
> Do semantic predicates [1] work for you?
> 
> ddd : ha:ATOM { !"XXX".equals(ha.getText()) }? ...
> 
> [1]
>
http://www.antlr.org/doc/metalang.html#SemanticPredicates
> 
> -- 
> Stanimir
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From tbrandonau at gmail.com  Sat Jul 22 23:37:45 2006
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Sat Jul 22 23:37:49 2006
Subject: [antlr-interest] Re: Backtrack option breaks AST rewrite
In-Reply-To: <ebc876d70607212221l235c817dm1c1186e54eb68496@mail.gmail.com>
References: <ebc876d70607212221l235c817dm1c1186e54eb68496@mail.gmail.com>
Message-ID: <ebc876d70607222337r7a4d003aif943354c5de20850@mail.gmail.com>

After a little debugging the issue seems to be with the
prefixWithSynPred helper in ANTLRParser.  This gets called for stuff
in rewrite blocks and the generated syntactic predicates cause the
codegen error. The relevant call hierarchies are:
rewrite_element
  ebnfSuffix
    prefixWithSynPred
for rewrite trees and:
rewrite_ebnf
  setToBlockWithSet
    prefixWithSynPred
for non-tree rewrites.
Removing the call to prefixWithSynPred from these rules when in
rewrite blocks seems to fix the error.

Tom.

On 7/22/06, Thomas Brandon <tbrandonau@gmail.com> wrote:
> In Antlr 3.0b3 setting the backtrack option seems to break parsing of
> tree rewrites using closures. This grammar:
> grammar CParser;
> options {
>     backtrack=true;
>     output=AST;
> }
> tokens { TU; }
> translation_unit
>         : external_declaration+
>           -> ^( TU external_declaration+ /*Err here*/)
>         ;
> external_declaration
>         : 'a'
>         ;
>
> gives errors:
> 0:0: syntax error: codegen: <AST>:0:0: unexpected AST node: synpred3
> 13:13: expecting EOB, found 'external_declaration'
> (13,13 is at the end of the tree rewrite block, as indeicated)
> Removing the backtrack option fixes it, as does removing the closure
> on the rewrite rule (i.e. "-> ^( TU external_declaration)").
>
> Thanks,
> Tom.
>
From stanio at myrealbox.com  Sun Jul 23 00:20:57 2006
From: stanio at myrealbox.com (Stanimir Stamenkov)
Date: Sun Jul 23 00:21:06 2006
Subject: [antlr-interest] Question on aborting rule based on pattern
In-Reply-To: <20060722230403.43707.qmail@web50314.mail.yahoo.com>
References: <20060722230403.43707.qmail@web50314.mail.yahoo.com>
Message-ID: <44C32359.60409@myrealbox.com>

/Rajeev Bharadhwaj/:

> I tried inserting the semantic predicate, it fires 
> alright but it throws a SemanticException. This looks 
> more like a mechanism to find syntax errors and abort 
> the parsing. In my case, I want to catch the exception 
> and stop matching ddd and continue parsing.

You need to put 'aaa' and 'ccc' productions as alternatives to some 
rule, like:

aaa : "AAAA" SPACE bbb ccc
     | ccc ;

bbb : ( ddd )+ ;

ddd : ha:ATOM { !"XXX".equals(ha.getText()) }?
       ":" SPACE eee SPACE ; // Rule 1

eee : hva:ATOM (":" hvap:ATOM)* ;

ccc : "XXX" ":" SPACE ((cccentry)+ ; // Rule 2

-- 
Stanimir
From tbrandonau at gmail.com  Sun Jul 23 02:20:16 2006
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Sun Jul 23 02:20:19 2006
Subject: [antlr-interest] Re: Backtrack option breaks AST rewrite
In-Reply-To: <ebc876d70607222337r7a4d003aif943354c5de20850@mail.gmail.com>
References: <ebc876d70607212221l235c817dm1c1186e54eb68496@mail.gmail.com>
	<ebc876d70607222337r7a4d003aif943354c5de20850@mail.gmail.com>
Message-ID: <ebc876d70607230220n6d4562fboe17399d252662470@mail.gmail.com>

I found another issue with backtracking. With backtrack and memoize on
the use of labels can result in invalid code. For example the
following grammar:
grammar BTErr2;
options {
 backtrack=true;
 memoize=true;
 k=2;
 output=AST;
}
a: 'c' dl=d
 | 'c' d
 ;
d: 'd' ;

gives java error "dl cannot be resolved" in BTErr2.java. The
combination of backtracking and memoization results in ANTLR
generating a syntactic predicate "( 'c' dl= d )=>", which is
implemented in a synpred1_fragment method, with the label assignment
resulting in "dl=d();" but dl is not defined in the synpred method.

Tom.
From rashmi.shenoy at gmail.com  Sun Jul 23 23:42:19 2006
From: rashmi.shenoy at gmail.com (rashmi shenoy)
Date: Sun Jul 23 23:42:24 2006
Subject: [antlr-interest] Unicode RecognitionException
Message-ID: <52eba2e70607232342j19ab2d1aud4b000688c561e10@mail.gmail.com>

Hi,

I have a situation in my program where I need to read strings from a file
and recognise them as words or unicode chars.
The input is read from a UTF-8 file char by char. When the character read is
a non-english char say Japanese, then the following exception is thrown. I
have done the following in my antlr.g file:

1. In Lexer-options, charVocabulary='\u0080'..'\ufffe';
2. TOKEN_UNICODE : ('\u0080'..'\ufffe')+   ;
3. In the rules section of parser, I have  the following :

 rule :
     TOKEN_words
       {
            print("words");
       }

     |  TOKEN_UNICODE
       {
           print("Unicode");
       }

But when I run my program,  *antlr.NoViableException  unexpected token:
\u0082* is thrown.
How do I fix this ?

Regards
Rash
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060724/bb7bfda5/attachment.html
From tbrandonau at gmail.com  Mon Jul 24 00:27:16 2006
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Mon Jul 24 00:27:19 2006
Subject: [antlr-interest] Re: Backtrack option breaks AST rewrite
In-Reply-To: <ebc876d70607230220n6d4562fboe17399d252662470@mail.gmail.com>
References: <ebc876d70607212221l235c817dm1c1186e54eb68496@mail.gmail.com>
	<ebc876d70607222337r7a4d003aif943354c5de20850@mail.gmail.com>
	<ebc876d70607230220n6d4562fboe17399d252662470@mail.gmail.com>
Message-ID: <ebc876d70607240027g6c98df22n6c54bb5fe6116dd2@mail.gmail.com>

And also, this grammar:
grammar ASTOpsErr;
options {
    backtrack=true;
    k=2;
    output=AST;
}
a :( 'b'^ 'i'? 'c'!
  |  'b' 'i'
  )
  ;
results in the exception:
internal error: ASTOpsErr.g : java.lang.IllegalArgumentException:
Can't find template tokenRefRoot.st
org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate(StringTemplateGroup.java:485)
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:372)
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:384)
org.antlr.codegen.CodeGenTreeWalker.getTokenElementST(CodeGenTreeWalker.java:159)
org.antlr.codegen.CodeGenTreeWalker.atom(CodeGenTreeWalker.java:1917)
org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1348)
org.antlr.codegen.CodeGenTreeWalker.alternative(CodeGenTreeWalker.java:1104)
org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:988)
org.antlr.codegen.CodeGenTreeWalker.rule(CodeGenTreeWalker.java:716)
,,,

Backtracking generates syntactic predicates containing tree operators
but the AST templates are removed for syntactic predicates by "rule"
in codegen.g.

Tom.
From stanio at myrealbox.com  Mon Jul 24 00:28:59 2006
From: stanio at myrealbox.com (Stanimir Stamenkov)
Date: Mon Jul 24 00:30:14 2006
Subject: [antlr-interest] Question on aborting rule based on pattern
In-Reply-To: <44C32359.60409@myrealbox.com>
References: <20060722230403.43707.qmail@web50314.mail.yahoo.com>
	<44C32359.60409@myrealbox.com>
Message-ID: <44C476BB.5080009@myrealbox.com>

/Stanimir Stamenkov/:

> You need to put 'aaa' and 'ccc' productions as alternatives to some 
> rule, like:
[...]

Or may be I haven't understood you goal correctly and you might need 
a syntactic predicate [1] in the 'ddd' rule:

aaa : "AAAA" SPACE bbb ccc ;

bbb : ( ddd )+ ;

ddd : ("XXX") => ccc
     | ha:ATOM ":" SPACE eee SPACE ; // Rule 1

eee : hva:ATOM (":" hvap:ATOM)* ;

ccc : "XXX" ":" SPACE ((cccentry)+ ; // Rule 2

Or if the 'ATOM' lexer rule tests for literals it would match the 
"XXX" literal and I think no predicate is necessary:

ddd : ccc
     | ha:ATOM ":" SPACE eee SPACE ; // Rule 1

But I see ambiguity arises and finally you may need to change the 
'aaa' and 'bbb' rules:

aaa : "AAAA" SPACE bbb ;

bbb : ( ddd )+ ccc ;

ddd : ha:ATOM ":" SPACE eee SPACE ; // Rule 1

eee : hva:ATOM (":" hvap:ATOM)* ;

ccc : "XXX" ":" SPACE ((cccentry)+ ; // Rule 2

The above given the 'ATOM' lexer rule tests for literals.

[1] http://www.antlr.org/doc/metalang.html#SyntacticPredicates

-- 
Stanimir
From stanio at myrealbox.com  Mon Jul 24 00:35:53 2006
From: stanio at myrealbox.com (Stanimir Stamenkov)
Date: Mon Jul 24 00:37:05 2006
Subject: [antlr-interest] Question on aborting rule based on pattern
In-Reply-To: <20060723155321.27056.qmail@web50303.mail.yahoo.com>
References: <20060723155321.27056.qmail@web50303.mail.yahoo.com>
Message-ID: <44C47859.2090207@myrealbox.com>

/Rajeev Bharadhwaj/:

> Does it automatically switch to ccc without catching 
> SemanticException
> 
> Does it assume that '"AAAA" SPACE bbb ccc' rule 
> failed, hence any actions added to the end after ccc 
> are not executed but those between bbb and ccc are 
> executed?

As far as I know (and I'm pretty new to ANTLR, too) when there are 
alternatives which might match the same thing with the specified 
look ahead ANTLR is switching into guessing mode and doesn't 
propagate recognition exceptions but just catches them to try the 
next alternative. In this regard my suggestion was not useful as 
"AAAA" and "XXX" literals (the starting of 'aaa' and 'ccc' rules) 
are different and no guessing will take place, I suppose. You may 
see if my other reply (using a syntactic predicate) will help you more.

-- 
Stanimir
From tbrandonau at gmail.com  Mon Jul 24 01:36:56 2006
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Mon Jul 24 01:37:02 2006
Subject: [antlr-interest] Question on aborting rule based on pattern
In-Reply-To: <20060722072127.96531.qmail@web50315.mail.yahoo.com>
References: <20060722072127.96531.qmail@web50315.mail.yahoo.com>
Message-ID: <ebc876d70607240136j934a691qa3b4435fff57c105@mail.gmail.com>

You might like to have a look at some information on the difference
between LL and LR grammars. LR grammars make their decisions on the
right edge of productions, shifting tokens until they can reduce.
ANTLR on the other hand generates LL parsers. These decide which
alternative they will take on the left-edge instead, based on the
first k tokens of the input. To get around the limitations of a small
fixed lookahead you can use syntactic predicates and semantic
predicates. Check the docs.

Is "XXX" a keyword in your language? i.e. Is "XXX: x:y" a valid ddd? I
think you need to look at literal testing in the lexer. Given that
example either "XXX" will be matched as an ATOM in your lexer and ccc
will not work or "XXX" is a literal in your lexer and it will not
match as an ATOM in ddd. Or you should get an ambiguous lexer. Have
you got your token imports\exports set up correctly for literals in
the parser? Check the docs on vocabularies and importing\exporting.
If XXX is not a keyword so "XXX: x:y" is a valid ddd then you can
either use ("XXX"|ATOM) everywhere you want both which probably would
not be very nice, or you need to match "XXX" as an ATOM and use a
semantic predicate to check the token text. I don't have Antlr 2
running on this machine so I can't check but you might be able to use
something like:
aaa : "AAAA" SPACE ddd+ { LT(1).$getText == "XXX" }? ccc;
ccc : ATOM ":" SPACE ((cccentry)+ ;
I don't think you can put the predicate in rule ccc because Antlr 2
does not support predicate hoisting from called rules. And ANTLR may
not use the predicate for the exiting of ddd+. Then you might need to
use a semantic predicate within a syntactic predicate. Something like:
bbb:  ddd ( ( ccc )=> /*epsilon*/ | bbb );
ccc : { LT(1).$getText == "XXX" }? ATOM ":" SPACE ((cccentry)+ ;
The predicate will cause ANTLR to attempt to match ccc (with actions
disabled). If it succeeds it follows the first alternative and drops
out of the nested loop. If it fails it will go to the next alternative
and match a bbb. So it will keep matching nested bbb's until it sees a
ccc.

Tom.

On 7/22/06, Rajeev Bharadhwaj <rajeevb2@yahoo.com> wrote:
> How do I stop matching so it can reduce the rule?
>
> aaa : "AAAA" SPACE bbb ccc ;
>
> bbb : ( ddd )+ ;
>
> ddd : ha:ATOM ":" SPACE eee SPACE ; // Rule 1
>
> eee : hva:ATOM (":" hvap:ATOM)* ;
>
> ccc : "XXX" ":" SPACE ((cccentry)+ ; // Rule 2
>
> I would like Rule 1 to stop matching when
> ha.getText()==XXX, so aaa can shift to Rule 2 (ccc).
>
> ATOM matches alphabets and numbers to create strings.
>
> R B
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>
From wiggjd at lsbu.ac.uk  Mon Jul 24 03:33:00 2006
From: wiggjd at lsbu.ac.uk (Wigg, J D)
Date: Mon Jul 24 03:35:46 2006
Subject: [antlr-interest] Java 5 (aka 1.5) grammar
Message-ID: <10A786EB5741DE4DB252F7B9B9423D3A01085B1A@CSD-EXBE-VS2.lsbu.ac.uk>

I would like to have a look at Michael Studman's Java 5 grammar but I
can't see a way of seeing it properly or downloading it. The version
on the antlr website doesn't seem to contain any end of line
characters. What have I done wrong?
 
I would also be interested to know its relationship to Michael Stahl's
version. Can Studman's version be considered an update of Stahl's
version?
 
David Wigg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060724/209cfdfc/attachment.html
From ric.klaren at gmail.com  Mon Jul 24 04:09:05 2006
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Jul 24 04:09:11 2006
Subject: [antlr-interest] Problem with memory management
In-Reply-To: <20060721183111.5911.qmail@web52112.mail.yahoo.com>
References: <20060721183111.5911.qmail@web52112.mail.yahoo.com>
Message-ID: <bc607a4e0607240409y7ff5ed4pd3e3ce27c0263e47@mail.gmail.com>

Hi,

On 7/21/06, Eugen Cazacu <the_e57@yahoo.com> wrote:
> I am writing a verilog parser in antl, actually it is
> finished, now we are running tests on it, one type of
> test revealed a pretty big problem with antlr design.
> I must mention that the generated code is C++.
> The problem is in the way the AST is built. This
> nextSibling/firstChild tree design has a problem when
> one node has many children, because they are all
> stored in a unidirectional list if I use CommonAST
> class. The problem occures on the destruction of the
> tree. ...  this causes a
> recursive call if all of the destructors in depth. IF
> a node has as many as 20000-30000 children there are
> at least 20000-30000 recursive calls, if we would

Yup this is a known problem. Occasionally there's someone that runs into it.

> ...
> To avoid this probelem I wrote a
> special destroy function to delete the AST after I
> don't need it any more, that looks like this:
>
> void destroy(RefAST &ast) {
>   if(!ast.get())
>     return;
>   std::cerr << "before destroy" << endl;
>   std::queue<RefAST> destroyQueue;
>   destroyQueue.push(ast);
>   ast = 0;
>   RefAST temp1, temp2;
>   while(!destroyQueue.empty()) {
>     temp1 = destroyQueue.front();
>     destroyQueue.pop();
>     temp2 = temp1->getFirstChild();
>     temp1->setFirstChild(RefAST(0));
>     if(temp2.get())
>       destroyQueue.push(temp2);
>     temp2 = temp1->getNextSibling();
>     temp1->setNextSibling(RefAST(0));
>     if(temp2.get())
>       destroyQueue.push(temp2);
>     temp1 = 0;
>     temp2 = 0;
>   }

This is indeed a good work around.

> This make the program terminate correctly. But only in
> the case when the parser doesn't throw any exceptions
> (MismatchedTokenException for example). When the
> parser does this, it destroyes whatever tree was built
> by itself and if the tree is similar to what I
> described before, a stack overflow occures and the
> program end without printing the exception message in
> a segmentation fault, because I can only catch the
> exceptions after antlr tryes to delete the tree.
>
> To avoid this problem I am attempting now to write my
> own AST Node class derived from AST that would
> simulate the behaviour of it, but would use a more
> linear structure, small example:

It's probably easier to override the destructor of the parser (e.g.
add a custom destructor in the .g file) and include the previous fix
to that? Or maybe I'm missing something (don't have access to the code
atm so can't check)

> But here I got another problem. The reference counting
> antlr nechanism doesn't have a weak reference class (I
> can't use strong references, RefCount, because it
> would cause a the object to have a counted reference
> to itself and it will never be destroyed, since antlr
> RefCount doesn't check for loop references) , that I
> could use in place of "this" pointer, I need it
> because all the antlr interface uses Refs. This would
> make me to rewrite antlr code, which I don't want to
> do because when a new version of antlr will appear I
> will have to rewrite some code again. I hope that
> someone could help with this here.

The reference counter is something I'd rather not touch. It's very
much tailored to the antlr runtime. Trying to use a smarter reference
counter and inject it into the antlr runtime will probably get you
some gray hairs. Got some work in progress code for it but that broke
around heterogeneous AST's.

Expect something better in antlr3. I will (re)start on the C++ codegen
for ANTLR 3 in one/two weeks.

Cheers,

Ric
From open.zone at virgin.net  Mon Jul 24 06:06:31 2006
From: open.zone at virgin.net (Micheal J)
Date: Mon Jul 24 05:48:25 2006
Subject: [antlr-interest] Java 5 (aka 1.5) grammar
In-Reply-To: <10A786EB5741DE4DB252F7B9B9423D3A01085B1A@CSD-EXBE-VS2.lsbu.ac.uk>
Message-ID: <001d01c6af21$fcce7c10$c704a8c0@hercules>

David,
 
I suggest Scott Wisniewski's or Luca Colombi's versions. Luca's comments
suggests that his version is the latest evolution of Studman's original
contribution. Stahl's is a different lineage entirely.
 
Incidentally, I can view Studman's grammar files properly (online with a
browser and also offline using my text editor). I suspect you are using
Notepad or a similar text editor that doesn't understand that text files may
have DOS, Unix or Mac line endings (or indeed a combination of all three in
the same file!). Metapap, Notepad2, NotePad++, TextPad, UltraEdit etc are
some of the alternatives to Notepad.
 
 
Micheal 

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Wigg, J D
Sent: 24 July 2006 11:33
To: antlr-interest@antlr.org
Subject: [antlr-interest] Java 5 (aka 1.5) grammar


I would like to have a look at Michael Studman's Java 5 grammar but I can't
see a way of seeing it properly or downloading it. The version on the antlr
website doesn't seem to contain any end of line characters. What have I done
wrong?
 
I would also be interested to know its relationship to Michael Stahl's
version. Can Studman's version be considered an update of Stahl's version?
 
David Wigg

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060724/3d73ce6c/attachment-0001.html
From eric-public at omnicurious.com  Mon Jul 24 06:12:06 2006
From: eric-public at omnicurious.com (Eric)
Date: Mon Jul 24 06:12:52 2006
Subject: [antlr-interest] Lexer: Default token?
Message-ID: <001101c6af22$c41a88e0$0a00a8c0@FASTBRICK>

Just an update, I ended up using the following solution.  It's definitely
not the fastest way to do things, but it makes maintenance of the grammar
easier.

START
  :
    (WS_)           => WS_          {$setType(WS_);}
  | (C_COMMENT)     => C_COMMENT    {$setType(C_COMMENT);}
  | (CPP_COMMENT)   => CPP_COMMENT  {$setType(CPP_COMMENT);}
  | (IDENTIFIER)    => IDENTIFIER   {$setType(IDENTIFIER);}
  | (INT)           => INT          {$setType(INT);}
  | (LCURLY)        => LCURLY       {$setType(LCURLY);}
  | (RCURLY)        => RCURLY       {$setType(RCURLY);}
  | (LPAREN)        => LPAREN       {$setType(LPAREN);}
  | (RPAREN)        => RPAREN       {$setType(RPAREN);}
  | (LBRACKET)      => LBRACKET     {$setType(LBRACKET);}
  | (RBRACKET)      => RBRACKET     {$setType(RBRACKET);}
  | ANY_CHAR                        {$setType(ANY_CHAR);}
  ;

protected 
ANY_CHAR: .;  

// The remaining token rules go here (and are all protected).


Let me know if people have some better ideas on how to do this.

-Eric



> I have a case where depending upon the context of the parse, I want to
> either parse all tokens or ignore then, but still save them to the AST
> (hidden tokens are fine).  The problem is that there aren't any rules for
> the characters defined in the lexer, so the lexer throws a parse
exception.
>
> Is there a way, in the lexer, to specify a default token type such that if
a
> character/character-sequence doesn't match any of the token rules, then it
> gets packaged up in this default token type?
>
> I can always do this by hand, but it's tedious and gets tricky for rules
> that match comments, etc.
> 
> -Eric

From eric-public at omnicurious.com  Mon Jul 24 06:29:19 2006
From: eric-public at omnicurious.com (Eric)
Date: Mon Jul 24 06:30:06 2006
Subject: [antlr-interest] Lexer:  Default token?
Message-ID: <001401c6af25$2bfa6a00$0a00a8c0@FASTBRICK>

This is a repost to see if I can get this go match up with the previous
message thread.

Original message:

Just an update, I ended up using the following solution.  It's definitely
not the fastest way to do things, but it makes maintenance of the grammar
easier.

START
  :
    (WS_)           => WS_          {$setType(WS_);}
  | (C_COMMENT)     => C_COMMENT    {$setType(C_COMMENT);}
  | (CPP_COMMENT)   => CPP_COMMENT  {$setType(CPP_COMMENT);}
  | (IDENTIFIER)    => IDENTIFIER   {$setType(IDENTIFIER);}
  | (INT)           => INT          {$setType(INT);}
  | (LCURLY)        => LCURLY       {$setType(LCURLY);}
  | (RCURLY)        => RCURLY       {$setType(RCURLY);}
  | (LPAREN)        => LPAREN       {$setType(LPAREN);}
  | (RPAREN)        => RPAREN       {$setType(RPAREN);}
  | (LBRACKET)      => LBRACKET     {$setType(LBRACKET);}
  | (RBRACKET)      => RBRACKET     {$setType(RBRACKET);}
  | ANY_CHAR                        {$setType(ANY_CHAR);}
  ;

protected 
ANY_CHAR: .;  

// The remaining token rules go here (and are all protected).


Let me know if people have some better ideas on how to do this.

-Eric



> I have a case where depending upon the context of the parse, I want to 
> either parse all tokens or ignore then, but still save them to the AST 
> (hidden tokens are fine).  The problem is that there aren't any rules 
> for the characters defined in the lexer, so the lexer throws a parse 
> exception.
>
> Is there a way, in the lexer, to specify a default token type such 
> that if a character/character-sequence doesn't match any of the token 
> rules, then it gets packaged up in this default token type?
>
> I can always do this by hand, but it's tedious and gets tricky for 
> rules that match comments, etc.
> 
> -Eric

From herumor at fastwebnet.it  Mon Jul 24 06:32:49 2006
From: herumor at fastwebnet.it (Herumor)
Date: Mon Jul 24 06:32:55 2006
Subject: [antlr-interest] Guard condition into while and if statements
Message-ID: <44C4CC01.1080202@fastwebnet.it>

Hello people,
after a week of vacation I got back to work on my project for uni.
Following some examples I created this piece of a grammar for ANTLR 3.
I dunno how to close this though when I define mulexpr and how to link
this with an identifier for example.
This piece of a grammar in fact (the 2nd) declares the precedence of
each operator compared to another but it doesn't say what comes before
the operator and what next.

Before the following piece of code I wrote this one (the 1st) on my own
which should allow us to create an expression to put into the round
brackets of a while statement or into an if one. This though didn't
consider the precedence which I considered instead in the second piece
of code.
I need to correlate the 2 things.
Thanks forward for help.

1st piece of code
*
parExpression : LRBRACK expression RRBRACK;

expression : fouropexpr;
   

fouropexpr : (Identifier | NumberString) ((PLUS | MINUS |MUL |DIV | MOD)
(Identifier | NumberString))* relexpr*;

relexpr : (EQUAL | NOT_EQUAL | GT | LT | GTE | LTE) fouropexpr lorexpr*;


lorexpr  : landexpr ( LOR landexpr)*;

landexpr: LAND relexpr;*


/---------------------------------------------------------------------------------------------------------------
/
2nd piece of code
/
/*expression
    :    conditionalExpression (assignmentOperator expression)?
    ;


conditionalExpression : conditionalAndExpression ( LOR
conditionalAndExpression )* ;

conditionalAndExpression : bitwiseor ( LAND bitwiseor )* ;
bitwiseor :  bitwisexor ( BOR bitwisexor)* ;
bitwisexor : bitwiseand (BXOR bitwiseand)* ;
bitwiseand : equalityexpr ( BAND equalityexpr )* ;
equalityexpr : relationalexpr ( (EQUAL | NOT_EQUAL) relationalexpr)* ;
relationalexpr : shiftexpr ((LTE | LT | GTE | GT) shiftexpr)* ;
shiftexpr : addexpr ((SR | BSR | SL) addexpr)* ;
addexpr: mulexpr ((PLUS | MINUS) mulexpr)* ;
mulexpr :

assignmentOperator : ASSIGN
               | BAND_ASSIGN
                   | BOR_ASSIGN
               | BXOR_ASSIGN
                   | SL_ASSIGN
                   | BSR_ASSIGN
                   | SR_ASSIGN       
                   | MOD_ASSIGN   
                   | MUL_ASSIGN   
                   | DIV_ASSIGN       
                   | MINUS_ASSIGN   
                   | PLUS_ASSIGN
           ;*/


/*// OPERATORS

QUESTION        :    '?'        ;
LRBRACK            :    '('        ;
RRBRACK            :    ')'        ;
LSBRACK            :    '['        ;
RSBRACK            :    ']'        ;
LCBRACK            :    '{'        ;
RCBRACK            :    '}'        ;
COLON            :    ':'        ;
COMMA            :    ','        ;
DOT             :    '.'        ;
LNOT            :    '!'        ;
INC                :    '++'    ;
DEC                :    '--'    ;
MOD                :    '%'        ;
SEMI            :    ';'        ;

//  ARITHMETIC OPERATORS

DIV                :    '/'        ;
PLUS            :    '+'        ;
MINUS            :    '-'        ;
MUL             :    '*'        ;



// LOGICAL OPERATORS

LAND            :    '&&'    ;
LOR                :    '||'    ;



// RELATIONAL OPERATORS

LTE                :    '<='    ;
LT                :    '<'        ;
GTE                :    '>='    ;
GT                :    '>'        ;


// ASSIGN OPERATORS
ASSIGN            :    '='        ;
BAND_ASSIGN        :    '&='    ;
BOR_ASSIGN        :    '|='    ;
BXOR_ASSIGN        :    '^='    ;
SL_ASSIGN        :    '<<='    ;
BSR_ASSIGN        :    '>>>='    ;
SR_ASSIGN        :    '>>='    ;
MOD_ASSIGN        :    '%='    ;
MUL_ASSIGN        :    '*='    ;
DIV_ASSIGN        :    '/='    ;
MINUS_ASSIGN    :    '-='    ;
PLUS_ASSIGN        :    '+='    ;

// BITWISE OPERATORS

BXOR            :    '^'        ;
BOR                :    '|'        ;
BAND            :    '&'        ;
BNOT            :    '~'        ;


// EQUALITY OPERATORS

EQUAL            :    '=='    ;
NOT_EQUAL        :    '!='    ;



// SHIFT
SR                :    '>>'    ;
BSR                :    '>>>'    ;
SL                :    '<<'    ;*/


///
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060724/a18c707d/attachment.html
From eric-public at omnicurious.com  Mon Jul 24 06:37:46 2006
From: eric-public at omnicurious.com (Eric)
Date: Mon Jul 24 06:38:35 2006
Subject: [antlr-interest] Lexer:  Default token?
Message-ID: <001901c6af26$5ae8c4a0$0a00a8c0@FASTBRICK>

This is a repost to see if I can get this go match up with the previous
message thread.  Sorry for the extra messages. <blush>

Original message:

Just an update, I ended up using the following solution.  It's definitely
not the fastest way to do things, but it makes maintenance of the grammar
easier.

START
  :
    (WS_)           => WS_          {$setType(WS_);}
  | (C_COMMENT)     => C_COMMENT    {$setType(C_COMMENT);}
  | (CPP_COMMENT)   => CPP_COMMENT  {$setType(CPP_COMMENT);}
  | (IDENTIFIER)    => IDENTIFIER   {$setType(IDENTIFIER);}
  | (INT)           => INT          {$setType(INT);}
  | (LCURLY)        => LCURLY       {$setType(LCURLY);}
  | (RCURLY)        => RCURLY       {$setType(RCURLY);}
  | (LPAREN)        => LPAREN       {$setType(LPAREN);}
  | (RPAREN)        => RPAREN       {$setType(RPAREN);}
  | (LBRACKET)      => LBRACKET     {$setType(LBRACKET);}
  | (RBRACKET)      => RBRACKET     {$setType(RBRACKET);}
  | ANY_CHAR                        {$setType(ANY_CHAR);}
  ;

protected 
ANY_CHAR: .;  

// The remaining token rules go here (and are all protected).


Let me know if people have some better ideas on how to do this.

-Eric



> Date: Sat, 22 Jul 2006 13:53:23 -0600
> From: "Eric Holmberg" <eric@omnicurious.com>
> Subject: [antlr-interest] Lexer:  Default token?
> To: <antlr-interest@antlr.org>
> Message-ID: <000c01c6adc8$7e25f8c0$0a00a8c0@FASTBRICK>
> Content-Type: text/plain;	charset="us-ascii"
> 
> I have a case where depending upon the context of the parse, I want to
> either parse all tokens or ignore then, but still save them to the AST 
> (hidden tokens are fine).  The problem is that there aren't any rules 
> for the characters defined in the lexer, so the lexer throws a parse 
> exception.
>
> Is there a way, in the lexer, to specify a default token type such
> that if a character/character-sequence doesn't match any of the token 
> rules, then it gets packaged up in this default token type?
>
> I can always do this by hand, but it's tedious and gets tricky for
> rules that match comments, etc.
> 
> -Eric

From eric at omnicurious.com  Mon Jul 24 06:43:31 2006
From: eric at omnicurious.com (Eric Holmberg)
Date: Mon Jul 24 06:44:17 2006
Subject: [antlr-interest] Silly List Question
Message-ID: <001b01c6af27$2755af30$0a00a8c0@FASTBRICK>

Hmmm... As you have probably already noticed, I seem to be having a problem
getting reply messages to show up in the sequence of a message thread
instead of as new messages.

What do I need to put into the message / header to get the reply messages
matched to the original message?

-Eric

From obf at gmx.de  Mon Jul 24 10:56:59 2006
From: obf at gmx.de (Oliver Fischer)
Date: Mon Jul 24 10:57:08 2006
Subject: [antlr-interest] Custom error message for semantic predicate
Message-ID: <44C509EB.6030802@gmx.de>

Hello,

does someone how I can specify an custom error message for semantic
predicate like "Identifier >abc< is unknown" :

identifier
 : { isValidIdentifier(LT(1)->getText().data()) }?
     identifier "=" value NL
 ;

The standard error message seems to be the predicate itself.

Regards,

Oliver

From kroepke at dolphin-services.de  Mon Jul 24 11:01:31 2006
From: kroepke at dolphin-services.de (Kay Roepke)
Date: Mon Jul 24 11:01:40 2006
Subject: [antlr-interest] ANTLR 3 and StringTemplate
In-Reply-To: <44C27F23.5090708@gmail.com>
References: <44C27F23.5090708@gmail.com>
Message-ID: <2536ED15-EB52-43C9-8A06-1283D851FD18@dolphin-services.de>


On 22. Jul 2006, at 21:40 Uhr, Scott Amort wrote:

>  Should I instead just implement an
> alternative in C++ (although this seems like reworking the wheel
> considering how useful StringTemplate appears to be)?  Finally, will
> ANTLR 3 with its use of StringTemplate offer any solutions?

You could do a C++ port of StringTemplate, instead of doing yet- 
another-template-thingy ;)
v3 has support to directly use templates and assign values to  
template variables from within your grammar.
This works similarly to AST support. Obviously this feature is only  
available to targets that have
a native ST implementation available.
The other (main) use of ST in v3 is code generation, but that's in  
Java, so that doesn't help you with your
problem. :(

For the far future, I plan to do an Objective-C port of ST for ANTLR  
as well as for standalone use.
I don't know if anyone else plans to do a port to another C-based  
language, but it'd be nice to have.

If you don't mind the performance hit, you could try to interface  
with a language such as Java or Python.
Especially Python should be easy (*I think* there is a C++ bridge for  
Python). That wouldn't give you the template output
of v3, but you'd be able to use ST via your own code (or in actions).

If all fails you could use JNI to bridge over to Java. That's yucky  
and cumbersome but should work. But if you are ready
to make that investment it would really be more feasible to do a C++  
port. Most of the stuff should be easy to port especially
given that ST uses ANTLR 2 for its grammars (for which you already  
have a C++ version :))

HTH,

-k

From antlr at jazillian.com  Mon Jul 24 11:08:12 2006
From: antlr at jazillian.com (Andy Tripp)
Date: Mon Jul 24 11:08:01 2006
Subject: [antlr-interest] Java 5 (aka 1.5) grammar
In-Reply-To: <10A786EB5741DE4DB252F7B9B9423D3A01085B1A@CSD-EXBE-VS2.lsbu.ac.uk>
References: <10A786EB5741DE4DB252F7B9B9423D3A01085B1A@CSD-EXBE-VS2.lsbu.ac.uk>
Message-ID: <44C50C8C.9010708@jazillian.com>

Wigg, J D wrote:

>
>  
> I would also be interested to know its relationship to Michael Stahl's 
> version. Can Studman's version be considered an update of Stahl's version?
>  

See 
http://www.antlr.org/pipermail/antlr-interest/2004-October/009742.html
for a full comparison between the two versions of java.g for JDK1.5.

From open.zone at virgin.net  Mon Jul 24 11:46:34 2006
From: open.zone at virgin.net (Micheal J)
Date: Mon Jul 24 11:28:25 2006
Subject: [antlr-interest] ANTLR 3 and StringTemplate
In-Reply-To: <2536ED15-EB52-43C9-8A06-1283D851FD18@dolphin-services.de>
Message-ID: <000f01c6af51$7d82e560$c704a8c0@hercules>

Kay, Soctt,

> You could do a C++ port of StringTemplate, instead of doing yet- 
> another-template-thingy ;)
...
> For the far future, I plan to do an Objective-C port of ST for ANTLR  
> as well as for standalone use.
> I don't know if anyone else plans to do a port to another C-based  
> language, but it'd be nice to have.
...
> But if you are ready
> to make that investment it would really be more feasible to do a C++  
> port. Most of the stuff should be easy to port especially
> given that ST uses ANTLR 2 for its grammars (for which you already  
> have a C++ version :))

Just thinking out loud...sounds like cooperating on a C port of ST could be
a win-win for both of you. Objective-C has no issues interfacing with C
libraries afaict. 

C programs are _technically_ valid C++ and ObjC programs so, you could use
the library as is or, you could develop a tiny wrapper to implement a native
C++ or ObjC interface.

ANTLR V3 already has a C codegen so you don't have to use V2 for you ST
port.

Micheal


From parrt at cs.usfca.edu  Mon Jul 24 11:32:48 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Jul 24 11:30:06 2006
Subject: [antlr-interest] ANTLR 3 and StringTemplate
In-Reply-To: <2536ED15-EB52-43C9-8A06-1283D851FD18@dolphin-services.de>
References: <44C27F23.5090708@gmail.com>
	<2536ED15-EB52-43C9-8A06-1283D851FD18@dolphin-services.de>
Message-ID: <09C1DDD1-E56F-425A-8272-ED80CCCAE603@cs.usfca.edu>


On Jul 24, 2006, at 11:01 AM, Kay Roepke wrote:
> You could do a C++ port of StringTemplate, instead of doing yet- 
> another-template-thingy ;)

Is that possible?  You need heavy reflection

> For the far future, I plan to do an Objective-C port of ST for  
> ANTLR as well as for standalone use.

Hooray!

Ter
From parrt at cs.usfca.edu  Mon Jul 24 11:33:14 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Jul 24 11:30:34 2006
Subject: [antlr-interest] Custom error message for semantic predicate
In-Reply-To: <44C509EB.6030802@gmx.de>
References: <44C509EB.6030802@gmx.de>
Message-ID: <0A123995-928B-492B-A73D-8CD3623D10DF@cs.usfca.edu>

Hi Oliver, can you catch the SemanticPredicate exception and then  
display the error you want?
Ter
On Jul 24, 2006, at 10:56 AM, Oliver Fischer wrote:

> Hello,
>
> does someone how I can specify an custom error message for semantic
> predicate like "Identifier >abc< is unknown" :
>
> identifier
>  : { isValidIdentifier(LT(1)->getText().data()) }?
>      identifier "=" value NL
>  ;
>
> The standard error message seems to be the predicate itself.
>
> Regards,
>
> Oliver
>

From parrt at cs.usfca.edu  Mon Jul 24 11:34:24 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Jul 24 11:31:43 2006
Subject: [antlr-interest] Backtrack option breaks AST rewrite
In-Reply-To: <ebc876d70607212221l235c817dm1c1186e54eb68496@mail.gmail.com>
References: <ebc876d70607212221l235c817dm1c1186e54eb68496@mail.gmail.com>
Message-ID: <0304A8F5-9DE8-4D08-AD5A-D0AA691E4D74@cs.usfca.edu>

Hi, yes, I forgot about actions, rewrites, and tree operators...give  
me a moment and I'll filter that out for autobacktracking.
Ter
From parrt at cs.usfca.edu  Mon Jul 24 11:35:53 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Jul 24 11:33:13 2006
Subject: [antlr-interest] Re: Backtrack option breaks AST rewrite
In-Reply-To: <ebc876d70607230220n6d4562fboe17399d252662470@mail.gmail.com>
References: <ebc876d70607212221l235c817dm1c1186e54eb68496@mail.gmail.com>
	<ebc876d70607222337r7a4d003aif943354c5de20850@mail.gmail.com>
	<ebc876d70607230220n6d4562fboe17399d252662470@mail.gmail.com>
Message-ID: <6C21AE47-8618-4E29-9B9E-A29346CCD0E6@cs.usfca.edu>


On Jul 23, 2006, at 2:20 AM, Thomas Brandon wrote:

> I found another issue with backtracking. With backtrack and memoize on
> the use of labels can result in invalid code. For example the
> following grammar:
> grammar BTErr2;
> options {
> backtrack=true;
> memoize=true;
> k=2;
> output=AST;
> }
> a: 'c' dl=d
> | 'c' d
> ;
> d: 'd' ;
>
> gives java error "dl cannot be resolved" in BTErr2.java. The
> combination of backtracking and memoization results in ANTLR
> generating a syntactic predicate "( 'c' dl= d )=>", which is
> implemented in a synpred1_fragment method, with the label assignment
> resulting in "dl=d();" but dl is not defined in the synpred method.

This should not be anything related to memoization, it is however a  
problem with the manner in which I auto generate predicates. :)

I'll have a fix for you shortly.

Ter

From peter.palotas at gmail.com  Mon Jul 24 11:33:38 2006
From: peter.palotas at gmail.com (Peter Palotas)
Date: Mon Jul 24 11:33:42 2006
Subject: [antlr-interest] Problem compiling in Visual C++ 7.1
Message-ID: <bca7b0010607241133y18ef02cby6dcb469ebaeaca0c@mail.gmail.com>

Hi,

I've been trying to compile antlr-2.7.6 in Visual C++ 7.1 (Part of Visual
Studio .NET 2003), but the librarian creates a bunch of warnings about
things being defined twice in the object files which are then replicated
when trying to link to the generated library (see bottom of mail).

Any ideas on what to do to correct this? I simply made a new project,
included all .cpp files from the lib\cpp\src\ directory, compiled as static
library, single-threaded debug, and this is the result.

The command-line options generated for compiling is: /Od /I "..\..\antlr-
2.7.6\lib\cpp" /D "_DEBUG" /D "_LIB" /D "_MBCS" /FD /EHsc /RTC1 /MLd
/Fo"Debug/" /Fd"Debug/vc70.pdb" /W3 /nologo /c /Wp64 /ZI /TP

And for the librarian the not so interesting: /OUT:"..\..\lib/libantlrd.lib"
/NOLOGO

Any help on this would be greatly appreciated.

Sincerely, Peter


The warnings from the librarian are:

Creating library...
Token.obj : warning LNK4006: "public: static int const antlr::Token::SKIP"
(?SKIP@Token@antlr@@2HB) already defined in TreeParser.obj; second
definition ignored
Token.obj : warning LNK4006: "public: static int const
antlr::Token::EOF_TYPE" (?EOF_TYPE@Token@antlr@@2HB) already defined in
TreeParser.obj; second definition ignored
Token.obj : warning LNK4006: "public: static int const
antlr::Token::INVALID_TYPE" (?INVALID_TYPE@Token@antlr@@2HB) already defined
in TreeParser.obj; second definition ignored
Token.obj : warning LNK4006: "public: static int const
antlr::Token::NULL_TREE_LOOKAHEAD" (?NULL_TREE_LOOKAHEAD@Token@antlr@@2HB)
already defined in TreeParser.obj; second definition ignored
Token.obj : warning LNK4006: "public: static int const
antlr::Token::MIN_USER_TYPE" (?MIN_USER_TYPE@Token@antlr@@2HB) already
defined in TreeParser.obj; second definition ignored
MismatchedTokenException.obj : warning LNK4006: "public: static int const
antlr::MismatchedTokenException::NOT_SET" (?NOT_SET@
MismatchedTokenException@antlr@@2HB) already defined in TreeParser.obj;
second definition ignored
MismatchedTokenException.obj : warning LNK4006: "public: static int const
antlr::MismatchedTokenException::SET"
(?SET@MismatchedTokenException@antlr@@2HB)
already defined in TreeParser.obj; second definition ignored
MismatchedTokenException.obj : warning LNK4006: "public: static int const
antlr::MismatchedTokenException::NOT_RANGE" (?NOT_RANGE@
MismatchedTokenException@antlr@@2HB) already defined in TreeParser.obj;
second definition ignored
MismatchedTokenException.obj : warning LNK4006: "public: static int const
antlr::MismatchedTokenException::RANGE" (?RANGE@
MismatchedTokenException@antlr@@2HB) already defined in TreeParser.obj;
second definition ignored
MismatchedTokenException.obj : warning LNK4006: "public: static int const
antlr::MismatchedTokenException::NOT_TOKEN" (?NOT_TOKEN@
MismatchedTokenException@antlr@@2HB) already defined in TreeParser.obj;
second definition ignored
MismatchedTokenException.obj : warning LNK4006: "public: static int const
antlr::MismatchedTokenException::TOKEN" (?TOKEN@
MismatchedTokenException@antlr@@2HB) already defined in TreeParser.obj;
second definition ignored
MismatchedCharException.obj : warning LNK4006: "public: static int const
antlr::MismatchedCharException::NOT_SET" (?NOT_SET@
MismatchedCharException@antlr@@2HB) already defined in
NoViableAltForCharException.obj; second definition ignored
MismatchedCharException.obj : warning LNK4006: "public: static int const
antlr::MismatchedCharException::SET" (?SET@MismatchedCharException@antlr@@2HB)
already defined in NoViableAltForCharException.obj; second definition
ignored
MismatchedCharException.obj : warning LNK4006: "public: static int const
antlr::MismatchedCharException::NOT_RANGE" (?NOT_RANGE@
MismatchedCharException@antlr@@2HB) already defined in
NoViableAltForCharException.obj; second definition ignored
MismatchedCharException.obj : warning LNK4006: "public: static int const
antlr::MismatchedCharException::RANGE"
(?RANGE@MismatchedCharException@antlr@@2HB)
already defined in NoViableAltForCharException.obj; second definition
ignored
MismatchedCharException.obj : warning LNK4006: "public: static int const
antlr::MismatchedCharException::NOT_CHAR" (?NOT_CHAR@
MismatchedCharException@antlr@@2HB) already defined in
NoViableAltForCharException.obj; second definition ignored
MismatchedCharException.obj : warning LNK4006: "public: static int const
antlr::MismatchedCharException::CHAR"
(?CHAR@MismatchedCharException@antlr@@2HB)
already defined in NoViableAltForCharException.obj; second definition
ignored
CharScanner.obj : warning LNK4006: "private: static int const
antlr::CharScanner::NO_CHAR" (?NO_CHAR@CharScanner@antlr@@0HB) already
defined in NoViableAltForCharException.obj; second definition ignored
CharScanner.obj : warning LNK4006: "public: static int const
antlr::CharScanner::EOF_CHAR" (?EOF_CHAR@CharScanner@antlr@@2HB) already
defined in NoViableAltForCharException.obj; second definition ignored
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060724/d721b8b8/attachment.html
From open.zone at virgin.net  Mon Jul 24 11:59:50 2006
From: open.zone at virgin.net (Micheal J)
Date: Mon Jul 24 11:41:40 2006
Subject: [antlr-interest] ANTLR 3 and StringTemplate
In-Reply-To: <09C1DDD1-E56F-425A-8272-ED80CCCAE603@cs.usfca.edu>
Message-ID: <001001c6af53$57ce44c0$c704a8c0@hercules>

> On Jul 24, 2006, at 11:01 AM, Kay Roepke wrote:
> > You could do a C++ port of StringTemplate, instead of doing yet-
> > another-template-thingy ;)
> 
> Is that possible?  You need heavy reflection

Possible, yes. There will be restrictions on the aggregate types that can be
used with such a port however.

Other option if for independent ObjC and C++/RTTI ports. Seems like a lot of
work...

Micheal

From peter.palotas at gmail.com  Mon Jul 24 11:47:50 2006
From: peter.palotas at gmail.com (Peter Palotas)
Date: Mon Jul 24 11:47:55 2006
Subject: [antlr-interest] Re: Problem compiling in Visual C++ 7.1
In-Reply-To: <bca7b0010607241133y18ef02cby6dcb469ebaeaca0c@mail.gmail.com>
References: <bca7b0010607241133y18ef02cby6dcb469ebaeaca0c@mail.gmail.com>
Message-ID: <bca7b0010607241147i2dea027dra01dcca1e70f834a@mail.gmail.com>

Just discovered that compiling version 2.7.5 with the exact same project
settings seems to work just fine by the way. So it seems the problem was
introduced in version 2.7.6?

// Peter

On 7/24/06, Peter Palotas <peter.palotas@gmail.com> wrote:
>
> Hi,
>
> I've been trying to compile antlr-2.7.6 in Visual C++ 7.1 (Part of Visual
> Studio .NET 2003), but the librarian creates a bunch of warnings about
> things being defined twice in the object files which are then replicated
> when trying to link to the generated library (see bottom of mail).
>
> Any ideas on what to do to correct this? I simply made a new project,
> included all .cpp files from the lib\cpp\src\ directory, compiled as static
> library, single-threaded debug, and this is the result.
>
> The command-line options generated for compiling is: /Od /I "..\..\antlr-
> 2.7.6\lib\cpp" /D "_DEBUG" /D "_LIB" /D "_MBCS" /FD /EHsc /RTC1 /MLd
> /Fo"Debug/" /Fd"Debug/vc70.pdb" /W3 /nologo /c /Wp64 /ZI /TP
>
> And for the librarian the not so interesting:
> /OUT:"..\..\lib/libantlrd.lib" /NOLOGO
>
> Any help on this would be greatly appreciated.
>
> Sincerely, Peter
>
>
> The warnings from the librarian are:
>
> Creating library...
> Token.obj : warning LNK4006: "public: static int const antlr::Token::SKIP"
> (?SKIP@ Token@antlr@@2HB) already defined in TreeParser.obj; second
> definition ignored
> Token.obj : warning LNK4006: "public: static int const
> antlr::Token::EOF_TYPE" (?EOF_TYPE@Token@antlr@@2HB) already defined in
> TreeParser.obj ; second definition ignored
> Token.obj : warning LNK4006: "public: static int const
> antlr::Token::INVALID_TYPE" (?INVALID_TYPE@Token@antlr@@2HB) already
> defined in TreeParser.obj; second definition ignored
> Token.obj : warning LNK4006: "public: static int const
> antlr::Token::NULL_TREE_LOOKAHEAD" (?NULL_TREE_LOOKAHEAD@Token@antlr@@2HB)
> already defined in TreeParser.obj; second definition ignored
> Token.obj : warning LNK4006: "public: static int const
> antlr::Token::MIN_USER_TYPE" (?MIN_USER_TYPE@ Token@antlr@@2HB) already
> defined in TreeParser.obj; second definition ignored
> MismatchedTokenException.obj : warning LNK4006: "public: static int const
> antlr::MismatchedTokenException::NOT_SET" (?NOT_SET@
> MismatchedTokenException@antlr @@2HB) already defined in TreeParser.obj;
> second definition ignored
> MismatchedTokenException.obj : warning LNK4006: "public: static int const
> antlr::MismatchedTokenException::SET" (?SET@MismatchedTokenException@antlr@@2HB) already defined in
> TreeParser.obj; second definition ignored
> MismatchedTokenException.obj : warning LNK4006: "public: static int const
> antlr::MismatchedTokenException::NOT_RANGE" (?NOT_RANGE@
> MismatchedTokenException@antlr @@2HB) already defined in TreeParser.obj;
> second definition ignored
> MismatchedTokenException.obj : warning LNK4006: "public: static int const
> antlr::MismatchedTokenException::RANGE" (?RANGE@
> MismatchedTokenException@antlr @@2HB) already defined in TreeParser.obj;
> second definition ignored
> MismatchedTokenException.obj : warning LNK4006: "public: static int const
> antlr::MismatchedTokenException::NOT_TOKEN" (?NOT_TOKEN@
> MismatchedTokenException@antlr @@2HB) already defined in TreeParser.obj;
> second definition ignored
> MismatchedTokenException.obj : warning LNK4006: "public: static int const
> antlr::MismatchedTokenException::TOKEN" (?TOKEN@
> MismatchedTokenException@antlr @@2HB) already defined in TreeParser.obj;
> second definition ignored
> MismatchedCharException.obj : warning LNK4006: "public: static int const
> antlr::MismatchedCharException::NOT_SET" (?NOT_SET@
> MismatchedCharException@antlr @@2HB) already defined in
> NoViableAltForCharException.obj; second definition ignored
> MismatchedCharException.obj : warning LNK4006: "public: static int const
> antlr::MismatchedCharException::SET" (?SET@MismatchedCharException@antlr@@2HB) already defined in
> NoViableAltForCharException.obj; second definition ignored
> MismatchedCharException.obj : warning LNK4006: "public: static int const
> antlr::MismatchedCharException::NOT_RANGE" (?NOT_RANGE@
> MismatchedCharException@antlr@@2HB) already defined in
> NoViableAltForCharException.obj; second definition ignored
> MismatchedCharException.obj : warning LNK4006: "public: static int const
> antlr::MismatchedCharException::RANGE" (?RANGE@
> MismatchedCharException@antlr@@2HB) already defined in
> NoViableAltForCharException.obj; second definition ignored
> MismatchedCharException.obj : warning LNK4006: "public: static int const
> antlr::MismatchedCharException::NOT_CHAR" (?NOT_CHAR@
> MismatchedCharException@antlr@@2HB) already defined in
> NoViableAltForCharException.obj; second definition ignored
> MismatchedCharException.obj : warning LNK4006: "public: static int const
> antlr::MismatchedCharException::CHAR" (?CHAR@
> MismatchedCharException@antlr@@2HB) already defined in
> NoViableAltForCharException.obj; second definition ignored
> CharScanner.obj : warning LNK4006: "private: static int const
> antlr::CharScanner::NO_CHAR" (?NO_CHAR@ CharScanner@antlr@@0HB) already
> defined in NoViableAltForCharException.obj; second definition ignored
> CharScanner.obj : warning LNK4006: "public: static int const
> antlr::CharScanner::EOF_CHAR" (?EOF_CHAR@CharScanner@antlr @@2HB) already
> defined in NoViableAltForCharException.obj; second definition ignored
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060724/7a483f92/attachment-0001.html
From kroepke at dolphin-services.de  Mon Jul 24 12:11:15 2006
From: kroepke at dolphin-services.de (Kay Roepke)
Date: Mon Jul 24 12:11:25 2006
Subject: [antlr-interest] ANTLR 3 and StringTemplate
In-Reply-To: <001001c6af53$57ce44c0$c704a8c0@hercules>
References: <001001c6af53$57ce44c0$c704a8c0@hercules>
Message-ID: <C8AAC185-3EA9-454F-B11E-FDEBB70882F4@dolphin-services.de>


On 24. Jul 2006, at 20:59 Uhr, Micheal J wrote:

>> Is that possible?  You need heavy reflection
>
> Possible, yes. There will be restrictions on the aggregate types  
> that can be
> used with such a port however.

Yeah, that's why I wouldn't really consider a pure-C port. At least  
it wouldn't be my first choice ;)

> Other option if for independent ObjC and C++/RTTI ports. Seems like  
> a lot of
> work...

Well, sorta. Java maps relatively well to ObjC, probably because of  
history. There are various things
one needs to consider, but I'm going through most of them with the  
ObjC runtime, so I figure doing a
ST port in ObjC sounds like more work than it actually is. Still a  
fair amount of work, testing and such
but I want to support template output for ANTLR, so I don't really  
have a choice.

-k
From karpdantax at yahoo.com.br  Mon Jul 24 13:04:24 2006
From: karpdantax at yahoo.com.br (Karp Dantax)
Date: Mon Jul 24 13:04:47 2006
Subject: [antlr-interest] Re: Problem compiling in Visual C++ 7.1
References: <bca7b0010607241133y18ef02cby6dcb469ebaeaca0c@mail.gmail.com>
	<bca7b0010607241147i2dea027dra01dcca1e70f834a@mail.gmail.com>
Message-ID: <003501c6af5c$5dd88200$2101a8c0@bedeschi>

ANTLR 2.7.6 in VC++ 7.1
-------------------------------------

In config.hpp:

# if ( _MSC_VER < 1320 )
# define NO_STATIC_CONSTS
# endif

In TokenStreamRewriteEngine.cpp:

#ifndef NO_STATIC_CONSTS
const size_t TokenStreamRewriteEngine::MIN_TOKEN_INDEX = 0;
const int TokenStreamRewriteEngine::PROGRAM_INIT_SIZE = 100;
#endif

  ----- Original Message ----- 
  From: Peter Palotas 
  To: antlr-interest@antlr.org 
  Sent: Monday, July 24, 2006 3:47 PM
  Subject: [antlr-interest] Re: Problem compiling in Visual C++ 7.1


  Just discovered that compiling version 2.7.5 with the exact same project settings seems to work just fine by the way. So it seems the problem was introduced in version 2.7.6?

  // Peter


  On 7/24/06, Peter Palotas <peter.palotas@gmail.com> wrote:
    Hi,

    I've been trying to compile antlr-2.7.6 in Visual C++ 7.1 (Part of Visual Studio .NET 2003), but the librarian creates a bunch of warnings about things being defined twice in the object files which are then replicated when trying to link to the generated library (see bottom of mail). 

    Any ideas on what to do to correct this? I simply made a new project, included all .cpp files from the lib\cpp\src\ directory, compiled as static library, single-threaded debug, and this is the result.

    The command-line options generated for compiling is: /Od /I "..\..\antlr- 2.7.6\lib\cpp" /D "_DEBUG" /D "_LIB" /D "_MBCS" /FD /EHsc /RTC1 /MLd /Fo"Debug/" /Fd"Debug/vc70.pdb" /W3 /nologo /c /Wp64 /ZI /TP

    And for the librarian the not so interesting: /OUT:"..\..\lib/libantlrd.lib" /NOLOGO 

    Any help on this would be greatly appreciated.

    Sincerely, Peter


    The warnings from the librarian are:

    Creating library...
    Token.obj : warning LNK4006: "public: static int const antlr::Token::SKIP" (?SKIP@ Token@antlr@@2HB) already defined in TreeParser.obj; second definition ignored
    Token.obj : warning LNK4006: "public: static int const antlr::Token::EOF_TYPE" (?EOF_TYPE@Token@antlr@@2HB) already defined in TreeParser.obj ; second definition ignored
    Token.obj : warning LNK4006: "public: static int const antlr::Token::INVALID_TYPE" (?INVALID_TYPE@Token@antlr@@2HB) already defined in TreeParser.obj; second definition ignored
    Token.obj : warning LNK4006: "public: static int const antlr::Token::NULL_TREE_LOOKAHEAD" (?NULL_TREE_LOOKAHEAD@Token@antlr@@2HB) already defined in TreeParser.obj; second definition ignored
    Token.obj : warning LNK4006: "public: static int const antlr::Token::MIN_USER_TYPE" (?MIN_USER_TYPE@ Token@antlr@@2HB) already defined in TreeParser.obj; second definition ignored
    MismatchedTokenException.obj : warning LNK4006: "public: static int const antlr::MismatchedTokenException::NOT_SET" (?NOT_SET@MismatchedTokenException@antlr @@2HB) already defined in TreeParser.obj; second definition ignored
    MismatchedTokenException.obj : warning LNK4006: "public: static int const antlr::MismatchedTokenException::SET" (?SET@MismatchedTokenException@antlr @@2HB) already defined in TreeParser.obj; second definition ignored
    MismatchedTokenException.obj : warning LNK4006: "public: static int const antlr::MismatchedTokenException::NOT_RANGE" (?NOT_RANGE@MismatchedTokenException@antlr @@2HB) already defined in TreeParser.obj; second definition ignored
    MismatchedTokenException.obj : warning LNK4006: "public: static int const antlr::MismatchedTokenException::RANGE" (?RANGE@MismatchedTokenException@antlr @@2HB) already defined in TreeParser.obj; second definition ignored
    MismatchedTokenException.obj : warning LNK4006: "public: static int const antlr::MismatchedTokenException::NOT_TOKEN" (?NOT_TOKEN@MismatchedTokenException@antlr @@2HB) already defined in TreeParser.obj; second definition ignored
    MismatchedTokenException.obj : warning LNK4006: "public: static int const antlr::MismatchedTokenException::TOKEN" (?TOKEN@MismatchedTokenException@antlr @@2HB) already defined in TreeParser.obj; second definition ignored
    MismatchedCharException.obj : warning LNK4006: "public: static int const antlr::MismatchedCharException::NOT_SET" (?NOT_SET@MismatchedCharException@antlr @@2HB) already defined in NoViableAltForCharException.obj; second definition ignored
    MismatchedCharException.obj : warning LNK4006: "public: static int const antlr::MismatchedCharException::SET" (?SET@MismatchedCharException@antlr @@2HB) already defined in NoViableAltForCharException.obj; second definition ignored
    MismatchedCharException.obj : warning LNK4006: "public: static int const antlr::MismatchedCharException::NOT_RANGE" (?NOT_RANGE@ MismatchedCharException@antlr@@2HB) already defined in NoViableAltForCharException.obj; second definition ignored
    MismatchedCharException.obj : warning LNK4006: "public: static int const antlr::MismatchedCharException::RANGE" (?RANGE@ MismatchedCharException@antlr@@2HB) already defined in NoViableAltForCharException.obj; second definition ignored
    MismatchedCharException.obj : warning LNK4006: "public: static int const antlr::MismatchedCharException::NOT_CHAR" (?NOT_CHAR@ MismatchedCharException@antlr@@2HB) already defined in NoViableAltForCharException.obj; second definition ignored
    MismatchedCharException.obj : warning LNK4006: "public: static int const antlr::MismatchedCharException::CHAR" (?CHAR@ MismatchedCharException@antlr@@2HB) already defined in NoViableAltForCharException.obj; second definition ignored
    CharScanner.obj : warning LNK4006: "private: static int const antlr::CharScanner::NO_CHAR" (?NO_CHAR@ CharScanner@antlr@@0HB) already defined in NoViableAltForCharException.obj; second definition ignored
    CharScanner.obj : warning LNK4006: "public: static int const antlr::CharScanner::EOF_CHAR" (?EOF_CHAR@CharScanner@antlr @@2HB) already defined in NoViableAltForCharException.obj; second definition ignored



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060724/4b923bc1/attachment.html
From james_cataldo at agilent.com  Mon Jul 24 13:06:34 2006
From: james_cataldo at agilent.com (james_cataldo@agilent.com)
Date: Mon Jul 24 13:06:43 2006
Subject: [antlr-interest] ANTLR Eclipse Plugin
Message-ID: <6F94DB018DCB9E4AB34E7FE503AF2B168585A6@wcosmb05.cos.agilent.com>

Does anyone know if the code for the ANTLR Eclipse Plugin is open source?  If so, does anyone know where I might find it?  I've been doing a lot of antlr coding recently, and I would like to make a few modifications to match my needs a bit better.

 

Thanks,

Adam Cataldo

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060724/74c5d14e/attachment.html
From james_cataldo at agilent.com  Mon Jul 24 13:15:30 2006
From: james_cataldo at agilent.com (james_cataldo@agilent.com)
Date: Mon Jul 24 13:15:35 2006
Subject: [antlr-interest] ANTLR Eclipse Plugin
Message-ID: <6F94DB018DCB9E4AB34E7FE503AF2B168585B1@wcosmb05.cos.agilent.com>

Sorry if this is a repeat; it doesn't look like my last post was successful. Does anyone know if the code for the ANTLR Eclipse Plugin is open source?  If so, does anyone know where I might find it?  I've been doing a lot of antlr coding recently, and I would like to make a few modifications to match my needs a bit better.

 

Thanks,

Adam Cataldo

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060724/9c06bb11/attachment.html
From lgcraymer at yahoo.com  Mon Jul 24 13:30:57 2006
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Mon Jul 24 13:31:02 2006
Subject: [antlr-interest] ANTLR Eclipse Plugin
In-Reply-To: <6F94DB018DCB9E4AB34E7FE503AF2B168585B1@wcosmb05.cos.agilent.com>
Message-ID: <20060724203057.66182.qmail@web55906.mail.re3.yahoo.com>

Seek and ye shall find--an ANTLR Eclipse search gets you
http://antlreclipse.sourceforge.net/
and if you look a little further, you get to the canonical sourceforge page
http://sourceforge.net/project/showfiles.php?group_id=55477

--Loring

james_cataldo@agilent.com wrote:              Sorry if this is a repeat; it doesn???t look like my last post was successful. Does anyone know if the code for the ANTLR Eclipse Plugin is open source?  If so, does anyone know where I might find it?  I???ve been doing a lot of antlr coding recently, and I would like to make a few modifications to match my needs a bit better.
   
  Thanks,
  Adam Cataldo
   
  
  

 		
---------------------------------
Do you Yahoo!?
 Next-gen email? Have it all with the  all-new Yahoo! Mail Beta.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060724/8c77b5bb/attachment-0001.html
From peter.palotas at gmail.com  Mon Jul 24 13:48:02 2006
From: peter.palotas at gmail.com (Peter Palotas)
Date: Mon Jul 24 13:48:08 2006
Subject: [antlr-interest] How to parse eg. a PHP file?
Message-ID: <bca7b0010607241348y602c9e32tcf9c34e2f03bd92b@mail.gmail.com>

Hi,

I'm wondering if anyone has any pointers on how to go about creating a
lexer/parser for something that looks like a PHP file in the sense that the
actual source code that needs to be parsed is enclosed in special "tags" in
the file, any text outside these "tags" are allowed, and is treated as some
sort of special statement in the parser. (In the PHP case it is translated
into an "echo <string>" statement.

I need to do a preprocessor kind of thing that will work in pretty much this
way, but I'm having troubles figuring out how to write the lexer for this?
Any tips are greatly appreciated.

Sincerely,
Peter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060724/0a204966/attachment.html
From scott at javadude.com  Mon Jul 24 14:53:53 2006
From: scott at javadude.com (Scott Stanchfield)
Date: Mon Jul 24 14:12:24 2006
Subject: [antlr-interest] ANTLR Eclipse Plugin
In-Reply-To: <6F94DB018DCB9E4AB34E7FE503AF2B168585A6@wcosmb05.cos.agilent.com>
References: <6F94DB018DCB9E4AB34E7FE503AF2B168585A6@wcosmb05.cos.agilent.com>
Message-ID: <29081.12.173.51.158.1153778033.squirrel@www.javadude.com>

If you have any interesting changes that you think would be good for
others as well, let me know, and I'll see if I can merge them in (or make
you a committer).

-- Scott

> Does anyone know if the code for the ANTLR Eclipse Plugin is open source?
> If so, does anyone know where I might find it?  I've been doing a lot of
> antlr coding recently, and I would like to make a few modifications to
> match my needs a bit better.
>
>
>
> Thanks,
>
> Adam Cataldo
>
>


From jsamort at gmail.com  Mon Jul 24 14:16:58 2006
From: jsamort at gmail.com (Scott Amort)
Date: Mon Jul 24 14:17:09 2006
Subject: [antlr-interest] ANTLR 3 and StringTemplate
In-Reply-To: <2536ED15-EB52-43C9-8A06-1283D851FD18@dolphin-services.de>
References: <44C27F23.5090708@gmail.com>
	<2536ED15-EB52-43C9-8A06-1283D851FD18@dolphin-services.de>
Message-ID: <44C538CA.2010609@gmail.com>

Hi Kay,

Kay Roepke wrote:
> 
> On 22. Jul 2006, at 21:40 Uhr, Scott Amort wrote:
> 
>>  Should I instead just implement an
>> alternative in C++ (although this seems like reworking the wheel
>> considering how useful StringTemplate appears to be)?  Finally, will
>> ANTLR 3 with its use of StringTemplate offer any solutions?
> 
> You could do a C++ port of StringTemplate, instead of doing 
> yet-another-template-thingy ;)
> v3 has support to directly use templates and assign values to template 
> variables from within your grammar.
> This works similarly to AST support. Obviously this feature is only 
> available to targets that have
> a native ST implementation available.

Right... makes sense.  I certainly considered the C++ port option.  I'll 
have to look a bit closer at the StringTemplate code and see what I'd be 
getting myself into :-)

> If you don't mind the performance hit, you could try to interface with a 
> language such as Java or Python.
> Especially Python should be easy (*I think* there is a C++ bridge for 
> Python). That wouldn't give you the template output
> of v3, but you'd be able to use ST via your own code (or in actions).

This seems like a not-too bad tradeoff, especially in the short term.  I 
have done some research, and am thinking of Python together with 
Boost.Python.  I will likely go this route and investigate a C++ port 
for a better long-term solution.

Thanks,
Scott
From james_cataldo at agilent.com  Mon Jul 24 14:29:13 2006
From: james_cataldo at agilent.com (james_cataldo@agilent.com)
Date: Mon Jul 24 14:29:20 2006
Subject: [antlr-interest] ANTLR Eclipse Plugin
Message-ID: <6F94DB018DCB9E4AB34E7FE503AF2B16858604@wcosmb05.cos.agilent.com>

Hi Scott,

I'd be happy to submit any changes I make, which will surely be modest.  For instance, I might add some auto features, so that if I type

{

within a rule, I get

{} 

with my cursor in the middle.  Are the .java files available somewhere for downloading?  The jar files on sourceforge only contain the .class files. 

Thanks,
Adam Cataldo

-----Original Message-----
From: Scott Stanchfield [mailto:scott@javadude.com] 
Sent: Monday, July 24, 2006 2:54 PM
To: james_cataldo@agilent.com
Cc: antlr-interest@antlr.org
Subject: Re: [antlr-interest] ANTLR Eclipse Plugin

If you have any interesting changes that you think would be good for
others as well, let me know, and I'll see if I can merge them in (or make
you a committer).

-- Scott

> Does anyone know if the code for the ANTLR Eclipse Plugin is open source?
> If so, does anyone know where I might find it?  I've been doing a lot of
> antlr coding recently, and I would like to make a few modifications to
> match my needs a bit better.
>
>
>
> Thanks,
>
> Adam Cataldo
>
>


From open.zone at virgin.net  Mon Jul 24 15:01:55 2006
From: open.zone at virgin.net (Micheal J)
Date: Mon Jul 24 14:43:45 2006
Subject: [antlr-interest] How to parse eg. a PHP file?
In-Reply-To: <bca7b0010607241348y602c9e32tcf9c34e2f03bd92b@mail.gmail.com>
Message-ID: <002501c6af6c$c7be8b00$c704a8c0@hercules>

Check out Anakreon's (I hope I spelled hat correctly) ASP parser that parses
embedded VBScript and JScript source.
 
 
Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Peter Palotas
Sent: 24 July 2006 21:48
To: antlr-interest@antlr.org
Subject: [antlr-interest] How to parse eg. a PHP file?


Hi,

I'm wondering if anyone has any pointers on how to go about creating a
lexer/parser for something that looks like a PHP file in the sense that the
actual source code that needs to be parsed is enclosed in special "tags" in
the file, any text outside these "tags" are allowed, and is treated as some
sort of special statement in the parser. (In the PHP case it is translated
into an "echo <string>" statement. 

I need to do a preprocessor kind of thing that will work in pretty much this
way, but I'm having troubles figuring out how to write the lexer for this?
Any tips are greatly appreciated.

Sincerely,
Peter


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060724/9a0d0e92/attachment.html
From scott at javadude.com  Mon Jul 24 15:48:30 2006
From: scott at javadude.com (Scott Stanchfield)
Date: Mon Jul 24 15:48:42 2006
Subject: [antlr-interest] ANTLR Eclipse Plugin
In-Reply-To: <6F94DB018DCB9E4AB34E7FE503AF2B16858604@wcosmb05.cos.agilent.com>
Message-ID: <200607242330.k6ONUFlN022702@s2.eroute.net>

You can hook up to CVS at sourceforge to get them -- the instructions are
somewhere on the project page.

LMK if you can't figure it out. (SF isn't the easiest site to navigate...)

Later,
-- Scott

> -----Original Message-----
> From: james_cataldo@agilent.com [mailto:james_cataldo@agilent.com] 
> Sent: Monday, July 24, 2006 5:29 PM
> To: scott@javadude.com
> Cc: antlr-interest@antlr.org
> Subject: RE: [antlr-interest] ANTLR Eclipse Plugin
> 
> Hi Scott,
> 
> I'd be happy to submit any changes I make, which will surely 
> be modest.  For instance, I might add some auto features, so 
> that if I type
> 
> {
> 
> within a rule, I get
> 
> {} 
> 
> with my cursor in the middle.  Are the .java files available 
> somewhere for downloading?  The jar files on sourceforge only 
> contain the .class files. 
> 
> Thanks,
> Adam Cataldo
> 
> -----Original Message-----
> From: Scott Stanchfield [mailto:scott@javadude.com]
> Sent: Monday, July 24, 2006 2:54 PM
> To: james_cataldo@agilent.com
> Cc: antlr-interest@antlr.org
> Subject: Re: [antlr-interest] ANTLR Eclipse Plugin
> 
> If you have any interesting changes that you think would be 
> good for others as well, let me know, and I'll see if I can 
> merge them in (or make you a committer).
> 
> -- Scott
> 
> > Does anyone know if the code for the ANTLR Eclipse Plugin 
> is open source?
> > If so, does anyone know where I might find it?  I've been 
> doing a lot 
> > of antlr coding recently, and I would like to make a few 
> modifications 
> > to match my needs a bit better.
> >
> >
> >
> > Thanks,
> >
> > Adam Cataldo
> >
> >
> 
> 
> 


From mortench2004 at yahoo.dk  Tue Jul 25 04:14:48 2006
From: mortench2004 at yahoo.dk (M C)
Date: Tue Jul 25 04:14:54 2006
Subject: [antlr-interest] Tree to Tree transformations using ANTLR3?
Message-ID: <20060725111448.88485.qmail@web25805.mail.ukl.yahoo.com>

  Since ANTLR3's wonderful TreeAdaptor let ANTLR3 work with non-ANTLR trees in a efficient way, I am considering using ANTLR3 as a generic tree (or maybe graph) transformation tool... I.e. where the input is a tree and output is a new tree. Example domains would be tree rewriting optimizers, rule engines and maybe some graph processing tools. 
 
 However the examples I could find are all text parsing related, so I am unsure if this kind of "Tree 2 Tree" transformations are or will be supported by ANTLR3?

/Morten
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060725/923c4262/attachment.html
From dotnetfr at gmail.com  Tue Jul 25 05:09:45 2006
From: dotnetfr at gmail.com (dotnet fr)
Date: Tue Jul 25 05:09:51 2006
Subject: [antlr-interest] Simple question
Message-ID: <dcb971710607250509m1ea9f50ckc460f71646f0a507@mail.gmail.com>

Hi Everyone,

I've got a simple question :

-in the parser I have :
chars	:	(CHAR)+	;
option buildAST is set to true;

-in the lexer I have :
CHAR	:   ('a'..'z') | ('A'..'Z')    ;

When I print the ast, my chars is not a token but a letter (the first)
with a lot of siblings. How to get the chars like a Token ?

Thank you in advance

-- 
dotnet
From jhan at InfinityInfo.com  Tue Jul 25 06:15:56 2006
From: jhan at InfinityInfo.com (Jiho Han)
Date: Tue Jul 25 06:15:54 2006
Subject: [antlr-interest] Token class in lexer - lexical nondeterminism error
Message-ID: <89ACF43E70DC0C4B812FEA71B98CE2EE1B7EF4@infsrv00.InfinityInfo.com>

I am new to ANTLR.
I have the following defined in my lexer.

OP_EQ		: '=' ;
OP_NEQ	: "<>" ;
OP_GT		: '>' ;
OP_LT		: '<' ;
OP_GE		: ">=" ;
OP_LE		: "<=" ;
LPAREN	: '(' ;
RPAREN	: ')' ;
OPERATOR	: (OP_EQ | OP_NEQ | OP_GT | OP_LT | OP_GE | OP_LE) ;

When I run it through antlr I get:

FilterExpression.g: warning:lexical nondeterminism between rules OP_EQ
and OPERATOR upon
FilterExpression.g:     k==1:'='
FilterExpression.g:     k==2:<end-of-token>

And bunch of others like it.

I tried to create OPERATOR as a token class as mentioned in the antlr
documentation in the section titled, Meta Language.

So that I can do this in the parser:

expr: ID OPERATOR^ VALUELITERAL ;

Instead of,

expr: ID (OP_EQ | OP_NEQ | OP_GT | OP_LT | OP_GE | OP_LE) VALUELITERAL ;

What am I missing?
Thanks

Jiho Han
Senior Software Engineer
Infinity Info Systems
The Sales Technology Experts
Tel: 212.563.4400 x216
Fax: 212.760.0540
jhan@infinityinfo.com
www.infinityinfo.com <http://www.infinityinfo.com/> 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060725/19e01a82/attachment-0001.html
From peter.palotas at gmail.com  Tue Jul 25 07:00:39 2006
From: peter.palotas at gmail.com (Peter Palotas)
Date: Tue Jul 25 07:00:45 2006
Subject: [antlr-interest] Lexer question: Matchin everything up to a specifc
	token or EOF?
Message-ID: <bca7b0010607250700l2b2db4a1mf4068fd8f2ec5081@mail.gmail.com>

Hi,

I want my lexer to macth any character up until a specific sequence of
characters, say "<?", or EOF.

Tried the rule:

PCDATA
    : ( options
         { greedy=false; }
         :  .
         )* ("<?")?
         ;

Which keeps matching nothing forever, so that wasn't very good. And matching
the EOF char doesn't seem to be possible, or? Any pointers on how to
accomplish this?

// Peter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060725/982eb67a/attachment.html
From rhill03 at eds.com  Tue Jul 25 07:29:07 2006
From: rhill03 at eds.com (Hill, Robert)
Date: Tue Jul 25 07:30:12 2006
Subject: [antlr-interest] Simple question
In-Reply-To: <dcb971710607250509m1ea9f50ckc460f71646f0a507@mail.gmail.com>
Message-ID: <2E909902FD3A03419E3A905908AE3DD4022A2129@UKNSM201.emea.corp.eds.com>

You need to get the Lexer to return 1 token containing all your
characters (probably best calling it a "String" or "CharacterLiteral"
perhaps ;) ) instead of the lexer returning 1 token per char and
building a tree of those single character tokens.

try

>chars	:	CHAR	;
>option buildAST is set to true;

>CHAR	:   ('a'..'z' | 'A'..'Z')+;

Cheers,
Rob



--
Rob Hill
EDS - Hallamshire Business Park
F1E/045
Sheffield	
T:	+44 (0) 114 291 1928
M:	+44 (0) 791 732 1227
E:	rhill03@eds.com

 

>-----Original Message-----
>From: antlr-interest-bounces@antlr.org 
>[mailto:antlr-interest-bounces@antlr.org] On Behalf Of dotnet fr
>Sent: 25 July 2006 13:10
>To: antlr-interest@antlr.org
>Subject: [antlr-interest] Simple question
>
>Hi Everyone,
>
>I've got a simple question :
>
>-in the parser I have :
>chars	:	(CHAR)+	;
>option buildAST is set to true;
>
>-in the lexer I have :
>CHAR	:   ('a'..'z') | ('A'..'Z')    ;
>
>When I print the ast, my chars is not a token but a letter 
>(the first) with a lot of siblings. How to get the chars like a Token ?
>
>Thank you in advance
>
>--
>dotnet
>
From tbrandonau at gmail.com  Tue Jul 25 07:39:35 2006
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Tue Jul 25 07:39:44 2006
Subject: [antlr-interest] Lexer question: Matchin everything up to a
	specifc token or EOF?
In-Reply-To: <bca7b0010607250700l2b2db4a1mf4068fd8f2ec5081@mail.gmail.com>
References: <bca7b0010607250700l2b2db4a1mf4068fd8f2ec5081@mail.gmail.com>
Message-ID: <ebc876d70607250739g772432fai88c0b7d9a69c4f57@mail.gmail.com>

On 7/26/06, Peter Palotas <peter.palotas@gmail.com> wrote:
> Hi,
>
> I want my lexer to macth any character up until a specific sequence of
> characters, say "<?", or EOF.
>
> Tried the rule:
>
> PCDATA
>     : ( options
>          { greedy=false; }
>          :  .
>          )* ("<?")?
>          ;
>
I think you want to check the lookahead rather than matching the end
token in your PCDATA rule. Something like (check syntax):
protected
PCDATA: ( { !('<' == LA(1) && '?' == LA(2)) }? .)+ ;

Then normal EOF handling should apply and "<?" would be handled by a
seperate lexer rule.
Tom.

>
> // Peter
>
From prashant.deva at gmail.com  Tue Jul 25 08:16:41 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Tue Jul 25 08:16:47 2006
Subject: [antlr-interest] ANTLR Studio: Too many requests for open source
	license
Message-ID: <41fed8f80607250816r60b433blb8a491fe082af04f@mail.gmail.com>

I am flooded with requests for open source licenses for ANTLR Studio.

This is for everyone who wants one and is reading this mailing list -

You may send me the request mail, but there might be some delay in my reply.
Also please make sure you mention your project's website in your email and
create an account at placidsystems.com.
I will just add the license to that account.
Until you get the full license you can use the eval license.

-- 
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060725/c476c71d/attachment.html
From james_cataldo at agilent.com  Tue Jul 25 08:21:50 2006
From: james_cataldo at agilent.com (james_cataldo@agilent.com)
Date: Tue Jul 25 08:22:24 2006
Subject: [antlr-interest] Token class in lexer - lexical nondeterminism
	error
Message-ID: <6F94DB018DCB9E4AB34E7FE503AF2B168586F0@wcosmb05.cos.agilent.com>

The problem is that if the lexer sees an equals sign, it has two tokens it can create.  One is an OP_EQ token, and the other is an OPERATOR token.  I suggest you make a rule called operator in your parser:

> operator:
>    (OP_EQ | OP_NEQ | OP_GT | OP_LT | OP_GE | OP_LE)
> ;

Then you shouldn't get any problem about nondeterminism, because tokens will be sent to the parser from the lexer, not characters. Character streams are sent to the lexer, which then creates token streams to send to the parser.  Hope this helps.

Cheers,
Adam

________________________________________
From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Jiho Han
Sent: Tuesday, July 25, 2006 6:16 AM
To: antlr-interest@antlr.org
Subject: [antlr-interest] Token class in lexer - lexical nondeterminism error

I am new to ANTLR. 
I have the following defined in my lexer. 
OP_EQ?? ??????? : '=' ; 
OP_NEQ? : "<>" ; 
OP_GT?? ??????? : '>' ; 
OP_LT?? ??????? : '<' ; 
OP_GE?? ??????? : ">=" ; 
OP_LE?? ??????? : "<=" ; 
LPAREN? : '(' ; 
RPAREN? : ')' ; 
OPERATOR??????? : (OP_EQ | OP_NEQ | OP_GT | OP_LT | OP_GE | OP_LE) ; 
When I run it through antlr I get: 
FilterExpression.g: warning:lexical nondeterminism between rules OP_EQ and OPERATOR upon 
FilterExpression.g:???? k==1:'=' 
FilterExpression.g:???? k==2:<end-of-token> 
And bunch of others like it. 
I tried to create OPERATOR as a token class as mentioned in the antlr documentation in the section titled, Meta Language.
So that I can do this in the parser: 
expr: ID OPERATOR^ VALUELITERAL ; 
Instead of, 
expr: ID (OP_EQ | OP_NEQ | OP_GT | OP_LT | OP_GE | OP_LE) VALUELITERAL ; 
What am I missing? 
Thanks 
Jiho Han
Senior Software Engineer
Infinity Info Systems
The Sales Technology Experts
Tel: 212.563.4400 x216
Fax: 212.760.0540
jhan@infinityinfo.com
www.infinityinfo.com 

From jhan at InfinityInfo.com  Tue Jul 25 08:32:59 2006
From: jhan at InfinityInfo.com (Jiho Han)
Date: Tue Jul 25 08:32:54 2006
Subject: [antlr-interest] Token class in lexer - lexical nondeterminism
	error
Message-ID: <89ACF43E70DC0C4B812FEA71B98CE2EE1B7EF5@infsrv00.InfinityInfo.com>

Thanks for the tip.  In fact, I have proceeded on that path but then what is all this business with token class?

The reason this Token Class interested me in the first place is that the element label can't be applied to a parser rule like below:

expr: (a:ID op:operator value:LITERAL) ;

To use them in the semantic action.  If, however, I had OPERATOR token class, I could:

expr: (a:ID op:OPERATOR value:LITERAL) ;

I am trying to avoid:

expr: (a:ID (eq:OP_EQ | neq:OP_NEQ | gt:OP_GT | lt:OP_LT | ge:OP_GE | le:OP_LE) value:LITERAL) ;

Something like that.  I want to be able to apply a single label to a group of TOKENs - token class to use in the semantic action that follows.
Thanks
Jiho

-----Original Message-----
From: james_cataldo@agilent.com [mailto:james_cataldo@agilent.com] 
Sent: Tuesday, July 25, 2006 11:22 AM
To: Jiho Han; antlr-interest@antlr.org
Subject: RE: [antlr-interest] Token class in lexer - lexical nondeterminism error

The problem is that if the lexer sees an equals sign, it has two tokens it can create.  One is an OP_EQ token, and the other is an OPERATOR token.  I suggest you make a rule called operator in your parser:

> operator:
>    (OP_EQ | OP_NEQ | OP_GT | OP_LT | OP_GE | OP_LE) ;

Then you shouldn't get any problem about nondeterminism, because tokens will be sent to the parser from the lexer, not characters. Character streams are sent to the lexer, which then creates token streams to send to the parser.  Hope this helps.

Cheers,
Adam

________________________________________
From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Jiho Han
Sent: Tuesday, July 25, 2006 6:16 AM
To: antlr-interest@antlr.org
Subject: [antlr-interest] Token class in lexer - lexical nondeterminism error

I am new to ANTLR. 
I have the following defined in my lexer. 
OP_EQ?? ??????? : '=' ;
OP_NEQ? : "<>" ;
OP_GT?? ??????? : '>' ;
OP_LT?? ??????? : '<' ;
OP_GE?? ??????? : ">=" ;
OP_LE?? ??????? : "<=" ;
LPAREN? : '(' ;
RPAREN? : ')' ;
OPERATOR??????? : (OP_EQ | OP_NEQ | OP_GT | OP_LT | OP_GE | OP_LE) ; When I run it through antlr I get: 
FilterExpression.g: warning:lexical nondeterminism between rules OP_EQ and OPERATOR upon
FilterExpression.g:???? k==1:'=' 
FilterExpression.g:???? k==2:<end-of-token> And bunch of others like it. 
I tried to create OPERATOR as a token class as mentioned in the antlr documentation in the section titled, Meta Language.
So that I can do this in the parser: 
expr: ID OPERATOR^ VALUELITERAL ;
Instead of,
expr: ID (OP_EQ | OP_NEQ | OP_GT | OP_LT | OP_GE | OP_LE) VALUELITERAL ; What am I missing? 
Thanks
Jiho Han
Senior Software Engineer
Infinity Info Systems
The Sales Technology Experts
Tel: 212.563.4400 x216
Fax: 212.760.0540
jhan@infinityinfo.com
www.infinityinfo.com 

From james_cataldo at agilent.com  Tue Jul 25 08:44:56 2006
From: james_cataldo at agilent.com (james_cataldo@agilent.com)
Date: Tue Jul 25 08:45:03 2006
Subject: [antlr-interest] Token class in lexer - lexical nondeterminism
	error
Message-ID: <6F94DB018DCB9E4AB34E7FE503AF2B16858710@wcosmb05.cos.agilent.com>


>  expr: (a:ID op:operator value:LITERAL) ;

What is it that you can't do with this set of labels?  It's okay to add labels to a subrule.


-----Original Message-----
From: james_cataldo@agilent.com [mailto:james_cataldo@agilent.com]
Sent: Tuesday, July 25, 2006 11:22 AM
To: Jiho Han; antlr-interest@antlr.org
Subject: RE: [antlr-interest] Token class in lexer - lexical nondeterminism error

The problem is that if the lexer sees an equals sign, it has two tokens it can create.  One is an OP_EQ token, and the other is an OPERATOR token.  I suggest you make a rule called operator in your parser:

> operator:
>    (OP_EQ | OP_NEQ | OP_GT | OP_LT | OP_GE | OP_LE) ;

Then you shouldn't get any problem about nondeterminism, because tokens will be sent to the parser from the lexer, not characters. Character streams are sent to the lexer, which then creates token streams to send to the parser.  Hope this helps.

Cheers,
Adam

________________________________________
From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Jiho Han
Sent: Tuesday, July 25, 2006 6:16 AM
To: antlr-interest@antlr.org
Subject: [antlr-interest] Token class in lexer - lexical nondeterminism error

I am new to ANTLR. 
I have the following defined in my lexer. 
OP_EQ?? ??????? : '=' ;
OP_NEQ? : "<>" ;
OP_GT?? ??????? : '>' ;
OP_LT?? ??????? : '<' ;
OP_GE?? ??????? : ">=" ;
OP_LE?? ??????? : "<=" ;
LPAREN? : '(' ;
RPAREN? : ')' ;
OPERATOR??????? : (OP_EQ | OP_NEQ | OP_GT | OP_LT | OP_GE | OP_LE) ; When I run it through antlr I get: 
FilterExpression.g: warning:lexical nondeterminism between rules OP_EQ and OPERATOR upon
FilterExpression.g:???? k==1:'=' 
FilterExpression.g:???? k==2:<end-of-token> And bunch of others like it. 
I tried to create OPERATOR as a token class as mentioned in the antlr documentation in the section titled, Meta Language.
So that I can do this in the parser: 
expr: ID OPERATOR^ VALUELITERAL ;
Instead of,
expr: ID (OP_EQ | OP_NEQ | OP_GT | OP_LT | OP_GE | OP_LE) VALUELITERAL ; What am I missing? 
Thanks
Jiho Han
Senior Software Engineer
Infinity Info Systems
The Sales Technology Experts
Tel: 212.563.4400 x216
Fax: 212.760.0540
jhan@infinityinfo.com
www.infinityinfo.com 

From jhan at InfinityInfo.com  Tue Jul 25 08:51:42 2006
From: jhan at InfinityInfo.com (Jiho Han)
Date: Tue Jul 25 08:51:38 2006
Subject: [antlr-interest] Token class in lexer - lexical nondeterminism
	error
Message-ID: <89ACF43E70DC0C4B812FEA71B98CE2EE1B7EF7@infsrv00.InfinityInfo.com>

When I go to compile the generated parser, the compiler complains:

Variable named 'op' doesn't exist.  And indeed, in the method 'expr', there is no such variable declared.
This does not happen when I use a token.

-----Original Message-----
From: james_cataldo@agilent.com [mailto:james_cataldo@agilent.com] 
Sent: Tuesday, July 25, 2006 11:45 AM
To: Jiho Han; james_cataldo@agilent.com; antlr-interest@antlr.org
Subject: RE: [antlr-interest] Token class in lexer - lexical nondeterminism error


>  expr: (a:ID op:operator value:LITERAL) ;

What is it that you can't do with this set of labels?  It's okay to add labels to a subrule.


-----Original Message-----
From: james_cataldo@agilent.com [mailto:james_cataldo@agilent.com]
Sent: Tuesday, July 25, 2006 11:22 AM
To: Jiho Han; antlr-interest@antlr.org
Subject: RE: [antlr-interest] Token class in lexer - lexical nondeterminism error

The problem is that if the lexer sees an equals sign, it has two tokens it can create.  One is an OP_EQ token, and the other is an OPERATOR token.  I suggest you make a rule called operator in your parser:

> operator:
>    (OP_EQ | OP_NEQ | OP_GT | OP_LT | OP_GE | OP_LE) ;

Then you shouldn't get any problem about nondeterminism, because tokens will be sent to the parser from the lexer, not characters. Character streams are sent to the lexer, which then creates token streams to send to the parser.  Hope this helps.

Cheers,
Adam

________________________________________
From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Jiho Han
Sent: Tuesday, July 25, 2006 6:16 AM
To: antlr-interest@antlr.org
Subject: [antlr-interest] Token class in lexer - lexical nondeterminism error

I am new to ANTLR. 
I have the following defined in my lexer. 
OP_EQ?? ??????? : '=' ;
OP_NEQ? : "<>" ;
OP_GT?? ??????? : '>' ;
OP_LT?? ??????? : '<' ;
OP_GE?? ??????? : ">=" ;
OP_LE?? ??????? : "<=" ;
LPAREN? : '(' ;
RPAREN? : ')' ;
OPERATOR??????? : (OP_EQ | OP_NEQ | OP_GT | OP_LT | OP_GE | OP_LE) ; When I run it through antlr I get: 
FilterExpression.g: warning:lexical nondeterminism between rules OP_EQ and OPERATOR upon
FilterExpression.g:???? k==1:'=' 
FilterExpression.g:???? k==2:<end-of-token> And bunch of others like it. 
I tried to create OPERATOR as a token class as mentioned in the antlr documentation in the section titled, Meta Language.
So that I can do this in the parser: 
expr: ID OPERATOR^ VALUELITERAL ;
Instead of,
expr: ID (OP_EQ | OP_NEQ | OP_GT | OP_LT | OP_GE | OP_LE) VALUELITERAL ; What am I missing? 
Thanks
Jiho Han
Senior Software Engineer
Infinity Info Systems
The Sales Technology Experts
Tel: 212.563.4400 x216
Fax: 212.760.0540
jhan@infinityinfo.com
www.infinityinfo.com 

From jhan at InfinityInfo.com  Tue Jul 25 08:57:33 2006
From: jhan at InfinityInfo.com (Jiho Han)
Date: Tue Jul 25 08:57:28 2006
Subject: [antlr-interest] Token class in lexer - lexical nondeterminism
	error
Message-ID: <89ACF43E70DC0C4B812FEA71B98CE2EE1B7EF8@infsrv00.InfinityInfo.com>

Hmm... I discovered that with buildAST = true, I get a variable called op_AST instead.
Without buildAST (false), there is neither op nor op_AST.

-----Original Message-----
From: james_cataldo@agilent.com [mailto:james_cataldo@agilent.com] 
Sent: Tuesday, July 25, 2006 11:45 AM
To: Jiho Han; james_cataldo@agilent.com; antlr-interest@antlr.org
Subject: RE: [antlr-interest] Token class in lexer - lexical nondeterminism error


>  expr: (a:ID op:operator value:LITERAL) ;

What is it that you can't do with this set of labels?  It's okay to add labels to a subrule.


-----Original Message-----
From: james_cataldo@agilent.com [mailto:james_cataldo@agilent.com]
Sent: Tuesday, July 25, 2006 11:22 AM
To: Jiho Han; antlr-interest@antlr.org
Subject: RE: [antlr-interest] Token class in lexer - lexical nondeterminism error

The problem is that if the lexer sees an equals sign, it has two tokens it can create.  One is an OP_EQ token, and the other is an OPERATOR token.  I suggest you make a rule called operator in your parser:

> operator:
>    (OP_EQ | OP_NEQ | OP_GT | OP_LT | OP_GE | OP_LE) ;

Then you shouldn't get any problem about nondeterminism, because tokens will be sent to the parser from the lexer, not characters. Character streams are sent to the lexer, which then creates token streams to send to the parser.  Hope this helps.

Cheers,
Adam

________________________________________
From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Jiho Han
Sent: Tuesday, July 25, 2006 6:16 AM
To: antlr-interest@antlr.org
Subject: [antlr-interest] Token class in lexer - lexical nondeterminism error

I am new to ANTLR. 
I have the following defined in my lexer. 
OP_EQ?? ??????? : '=' ;
OP_NEQ? : "<>" ;
OP_GT?? ??????? : '>' ;
OP_LT?? ??????? : '<' ;
OP_GE?? ??????? : ">=" ;
OP_LE?? ??????? : "<=" ;
LPAREN? : '(' ;
RPAREN? : ')' ;
OPERATOR??????? : (OP_EQ | OP_NEQ | OP_GT | OP_LT | OP_GE | OP_LE) ; When I run it through antlr I get: 
FilterExpression.g: warning:lexical nondeterminism between rules OP_EQ and OPERATOR upon
FilterExpression.g:???? k==1:'=' 
FilterExpression.g:???? k==2:<end-of-token> And bunch of others like it. 
I tried to create OPERATOR as a token class as mentioned in the antlr documentation in the section titled, Meta Language.
So that I can do this in the parser: 
expr: ID OPERATOR^ VALUELITERAL ;
Instead of,
expr: ID (OP_EQ | OP_NEQ | OP_GT | OP_LT | OP_GE | OP_LE) VALUELITERAL ; What am I missing? 
Thanks
Jiho Han
Senior Software Engineer
Infinity Info Systems
The Sales Technology Experts
Tel: 212.563.4400 x216
Fax: 212.760.0540
jhan@infinityinfo.com
www.infinityinfo.com 

From jhan at InfinityInfo.com  Tue Jul 25 09:02:48 2006
From: jhan at InfinityInfo.com (Jiho Han)
Date: Tue Jul 25 09:02:44 2006
Subject: [antlr-interest] How does one use the result of parser besides
	semantic actions?
Message-ID: <89ACF43E70DC0C4B812FEA71B98CE2EE1B7EF9@infsrv00.InfinityInfo.com>

Almost all of the examples and tutorials I've seen uses semantic actions
to "use" the parser result.
And most of these are very trivial (take calc for example).
How do I go about using the parser without using semantic actions?  Are
there events or is there a set of apis for walking the result, etc.?

Thanks

Jiho Han
Senior Software Engineer
Infinity Info Systems
The Sales Technology Experts
Tel: 212.563.4400 x216
Fax: 212.760.0540
jhan@infinityinfo.com
www.infinityinfo.com <http://www.infinityinfo.com/> 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060725/27030a64/attachment.html
From james_cataldo at agilent.com  Tue Jul 25 09:30:16 2006
From: james_cataldo at agilent.com (james_cataldo@agilent.com)
Date: Tue Jul 25 09:30:24 2006
Subject: [antlr-interest] How does one use the result of parser
	besidessemantic actions?
Message-ID: <6F94DB018DCB9E4AB34E7FE503AF2B16858747@wcosmb05.cos.agilent.com>

There's two solutions.  One is to build a sequence of antlr tree parsers (which are basically just tree walkers) and use semantic actions to do things like scope checking, type checking, tree pruning/transforming, and code generation.  Of course, everything gets compiled to Java code, and there is a fairly rich API for doing things manually.  This is the second option.

I prefer the first option, because you avoid writing custom methods for depth first search, but there's a little extra effort required up front to think about semantic actions using tree parsers.  You will likely write some Java classes this way to serve as helpers for your tree walkers.  I agree that I haven't seen a great end-to-end example.  I've been developing such an example, but it's propriatary, so unfotunately I can't share it.

Cheers,
Adam Cataldo

________________________________

From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Jiho Han
Sent: Tuesday, July 25, 2006 9:03 AM
To: antlr-interest@antlr.org
Subject: [antlr-interest] How does one use the result of parser besidessemantic actions?



Almost all of the examples and tutorials I've seen uses semantic actions to "use" the parser result. 
And most of these are very trivial (take calc for example). 
How do I go about using the parser without using semantic actions?  Are there events or is there a set of apis for walking the result, etc.?

Thanks 

Jiho Han
Senior Software Engineer
Infinity Info Systems
The Sales Technology Experts
Tel: 212.563.4400 x216
Fax: 212.760.0540
jhan@infinityinfo.com <mailto:jhan@infinityinfo.com> 
www.infinityinfo.com <http://www.infinityinfo.com/>  


From jsamort at gmail.com  Tue Jul 25 09:30:11 2006
From: jsamort at gmail.com (Scott Amort)
Date: Tue Jul 25 09:30:36 2006
Subject: [antlr-interest] Token class in lexer - lexical nondeterminism
	error
In-Reply-To: <89ACF43E70DC0C4B812FEA71B98CE2EE1B7EF4@infsrv00.InfinityInfo.com>
References: <89ACF43E70DC0C4B812FEA71B98CE2EE1B7EF4@infsrv00.InfinityInfo.com>
Message-ID: <44C64713.20303@gmail.com>

Hi,

Jiho Han wrote:
> I am new to ANTLR.
> I have the following defined in my lexer.
> 
> OP_EQ		: '=' ;
> OP_NEQ	: "<>" ;
> OP_GT		: '>' ;
> OP_LT		: '<' ;
> OP_GE		: ">=" ;
> OP_LE		: "<=" ;
> LPAREN	: '(' ;
> RPAREN	: ')' ;

You need to preface these rules with 'protected', for example:

protected OP_EQ: '=';

> OPERATOR	: (OP_EQ | OP_NEQ | OP_GT | OP_LT | OP_GE | OP_LE) ;
> 
> When I run it through antlr I get:
> 
> FilterExpression.g: warning:lexical nondeterminism between rules OP_EQ
> and OPERATOR upon
> FilterExpression.g:     k==1:'='
> FilterExpression.g:     k==2:<end-of-token>
> 
> And bunch of others like it.

This is due to non-determinism between any of these expressions (i.e.
are you matching OP_EQ or OPERATOR?)  Using the 'protected' keyword
tells ANTLR that your OP_* rules are helpers, and are not to be passed
on to the parser.

Best,
Scott
From herumor at fastwebnet.it  Tue Jul 25 09:34:49 2006
From: herumor at fastwebnet.it (Herumor)
Date: Tue Jul 25 09:34:51 2006
Subject: [antlr-interest] Lexical nondeterminism with Decimal Literals
Message-ID: <44C64829.9070008@fastwebnet.it>

Hello,
to avoid lexical nondeterminism in a rule like this with ANTLR 2.7.6
DecimalLiteral : Numberstring DOT Numberstring
Numbers : '0' .. '9'
NumberString : (Numbers)+
I created this rule instead

protected NUMBERS : ('0' | '1'..'9' ('0'..'9')*) (DOT ('0'..'9')+
{$setType(DECIMAL_NUMBERS);})? ;  


I wanna know if this way to do is OK or could generate troubles further.
Thanks forward for help.
From parrt at cs.usfca.edu  Tue Jul 25 09:38:19 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Jul 25 09:35:33 2006
Subject: [antlr-interest] v3 wiki pages are being updated
Message-ID: <1415E020-45AD-401E-9C80-2DDBAF7ACEBC@cs.usfca.edu>

Howdy, people like Dieter are updating the wiki FAQ and doc.  As you  
learn stuff about v3 please help write the doc!

Don't worry if you don't know where a page should go...i can reorg  
later.

http://www.antlr.org/wiki/display/ANTLR3/Home

Ter
From parrt at cs.usfca.edu  Tue Jul 25 09:45:27 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Jul 25 09:42:41 2006
Subject: [antlr-interest] Tree to Tree transformations using ANTLR3?
In-Reply-To: <20060725111448.88485.qmail@web25805.mail.ukl.yahoo.com>
References: <20060725111448.88485.qmail@web25805.mail.ukl.yahoo.com>
Message-ID: <2B856C8D-F2A0-4028-8C49-75AC26E4E588@cs.usfca.edu>


On Jul 25, 2006, at 4:14 AM, M C wrote:

> Since ANTLR3's wonderful TreeAdaptor let ANTLR3 work with non-ANTLR  
> trees in a efficient way, I am considering using ANTLR3 as a  
> generic tree (or maybe graph) transformation tool... I.e. where the  
> input is a tree and output is a new tree. Example domains would be  
> tree rewriting optimizers, rule engines and maybe some graph  
> processing tools.
>
> However the examples I could find are all text parsing related, so  
> I am unsure if this kind of "Tree 2 Tree" transformations are or  
> will be supported by ANTLR3?

Hi Morten, unfortunately, not implemented yet :(
Ter
From jhan at InfinityInfo.com  Tue Jul 25 10:36:37 2006
From: jhan at InfinityInfo.com (Jiho Han)
Date: Tue Jul 25 10:36:30 2006
Subject: [antlr-interest] Token class in lexer - lexical
	nondeterminismerror
Message-ID: <89ACF43E70DC0C4B812FEA71B98CE2EE1B7EFB@infsrv00.InfinityInfo.com>

I see.  Then I guess I better make sure the parser won't need to use any
of the OP_* tokens.
Thanks!

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Scott Amort
Sent: Tuesday, July 25, 2006 12:30 PM
To: antlr-interest@antlr.org
Subject: Re: [antlr-interest] Token class in lexer - lexical
nondeterminismerror

Hi,

Jiho Han wrote:
> I am new to ANTLR.
> I have the following defined in my lexer.
> 
> OP_EQ		: '=' ;
> OP_NEQ	: "<>" ;
> OP_GT		: '>' ;
> OP_LT		: '<' ;
> OP_GE		: ">=" ;
> OP_LE		: "<=" ;
> LPAREN	: '(' ;
> RPAREN	: ')' ;

You need to preface these rules with 'protected', for example:

protected OP_EQ: '=';

> OPERATOR	: (OP_EQ | OP_NEQ | OP_GT | OP_LT | OP_GE | OP_LE) ;
> 
> When I run it through antlr I get:
> 
> FilterExpression.g: warning:lexical nondeterminism between rules OP_EQ

> and OPERATOR upon
> FilterExpression.g:     k==1:'='
> FilterExpression.g:     k==2:<end-of-token>
> 
> And bunch of others like it.

This is due to non-determinism between any of these expressions (i.e.
are you matching OP_EQ or OPERATOR?)  Using the 'protected' keyword
tells ANTLR that your OP_* rules are helpers, and are not to be passed
on to the parser.

Best,
Scott
From jhan at InfinityInfo.com  Tue Jul 25 10:41:40 2006
From: jhan at InfinityInfo.com (Jiho Han)
Date: Tue Jul 25 10:41:34 2006
Subject: [antlr-interest] Treeparser question
Message-ID: <89ACF43E70DC0C4B812FEA71B98CE2EE1B7EFC@infsrv00.InfinityInfo.com>

In this example from a tutorial,

class ExpressionParser extends Parser;
options { buildAST=true; }

expr     : sumExpr SEMI!;
sumExpr  : prodExpr ((PLUS^|MINUS^) prodExpr)* ; 
prodExpr : powExpr ((MUL^|DIV^|MOD^) powExpr)* ;
powExpr  : atom (POW^ atom)? ;
atom     : INT ;

class ExpressionLexer extends Lexer;

PLUS  : '+' ;
MINUS : '-' ;
MUL   : '*' ;
DIV   : '/' ;
MOD   : '%' ;
POW   : '^' ;
SEMI  : ';' ;
protected DIGIT : '0'..'9' ;
INT   : (DIGIT)+ ;

{import java.lang.Math;}
class ExpressionTreeWalker extends TreeParser;

expr returns [double r]
  { double a,b; r=0; }

  : #(PLUS  a=expr b=expr)  { r=a+b; }
  | #(MINUS a=expr b=expr)  { r=a-b; }
  | #(MUL   a=expr b=expr)  { r=a*b; }
  | #(DIV   a=expr b=expr)  { r=a/b; }
  | #(MOD   a=expr b=expr)  { r=a%b; }
  | #(POW   a=expr b=expr)  { r=Math.pow(a,b); }
  | i:INT { r=(double)Integer.parseInt(i.getText()); }
  ;
   
Does expr reference in #(PLUS  a=expr b=expr) in the treeparser refer to
itself or the one in ExpressionParser?
Basically, I am having a hard time going from a parser to a tree parser
in my own project.
Thanks

Jiho Han
Senior Software Engineer
Infinity Info Systems
The Sales Technology Experts
Tel: 212.563.4400 x216
Fax: 212.760.0540
jhan@infinityinfo.com
www.infinityinfo.com <http://www.infinityinfo.com/> 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060725/6ebfa2cf/attachment-0001.html
From ewbank at gmail.com  Tue Jul 25 11:08:01 2006
From: ewbank at gmail.com (Bryan Ewbank)
Date: Tue Jul 25 11:08:05 2006
Subject: [antlr-interest] Conforming CPP implementation, anyone?
Message-ID: <dd3a065f0607251108n49d12f0ob7936668d02f736f@mail.gmail.com>

Is anyone aware of a C-preprocessor implementation in ANTLR?

Thanks,
- Bryan
From parrt at cs.usfca.edu  Tue Jul 25 11:08:09 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Jul 25 11:08:14 2006
Subject: [antlr-interest] antlr-2.7.6.exe on download page
Message-ID: <AC42CA2B-EBB9-4B15-95C8-13B5EB144AF9@cs.usfca.edu>

Just added to download page.  tanks to Craig Main for building it.
Ter
From herumor at fastwebnet.it  Tue Jul 25 11:37:10 2006
From: herumor at fastwebnet.it (Herumor)
Date: Tue Jul 25 11:37:15 2006
Subject: [antlr-interest] Nondeterminism warnings upon Lexer and Grammar
Message-ID: <44C664D6.5070101@fastwebnet.it>

Hello everyone,
this is my first post here I hope I'll get some help.
Here there are my parser and lexer:
http://www.rafb.net/paste/results/CErdtH29.html
http://www.rafb.net/paste/results/Mslbw522.html

----------Warnings-------------------------
1)

[code]C:\Documents and
Settings\spotted\Documenti\grammatica\codice_generato>java antl
r.Tool EasyJavaParser.g
ANTLR Parser Generator   Version 2.7.6 (2005-12-22)   1989-2005
EasyJavaParser.g:86: warning:nondeterminism between alts 1 and 2 of
block upon
EasyJavaParser.g:86:     k==1:Type
EasyJavaParser.g:86:     k==2:Identifier
[/code]

2)
[code]
C:\Documents and
Settings\spotted\Documenti\grammatica\codice_generato>java antl
r.Tool EasyJavaLexer.g
ANTLR Parser Generator   Version 2.7.6 (2005-12-22)   1989-2005
error: Lexer rule ESC is not defined
EasyJavaLexer.g: warning:lexical nondeterminism between rules
AccessSpecifier an
d ReturnType upon
EasyJavaLexer.g:     k==1:'f','s','v'
EasyJavaLexer.g:     k==2:'o','y'
EasyJavaLexer.g:     k==3:'a','i','l','n','o','t'
EasyJavaLexer.g:     k==4:'a'
EasyJavaLexer.g: warning:lexical nondeterminism between rules
AccessSpecifier an
d Type upon
EasyJavaLexer.g:     k==1:'f','s'
EasyJavaLexer.g:     k==2:'o','y'
EasyJavaLexer.g:     k==3:'a','l','n','o','t'
EasyJavaLexer.g:     k==4:'a'
EasyJavaLexer.g: warning:lexical nondeterminism between rules ReturnType
and Typ
e upon
EasyJavaLexer.g:     k==1:'b'..'d','f','i','l','s'
EasyJavaLexer.g:     k==2:'h','l','n','o','y'
EasyJavaLexer.g:     k==3:'a','l','n','o','t','u'
EasyJavaLexer.g:     k==4:<end-of-token>,'a','b','e','g','r'
Exiting due to errors.
[/code]

They are the 2 errors that I'm getting.
I'd like to know if I can safely disable  the warning in the case of the
parser and if yes how if not is there a solution?
In the case of the Lexer I have no idea why there's nondeterminism and
I'd like someone to explain me.

From lgcraymer at yahoo.com  Tue Jul 25 13:45:05 2006
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Tue Jul 25 13:45:11 2006
Subject: [antlr-interest] ANTLR Yggdrasil pre-release announcement
Message-ID: <20060725204505.14152.qmail@web55910.mail.re3.yahoo.com>

All--
   
  I am about 2 weeks away from an early release of ANTLR Yggdrasil.  ANTLR Yggdrasil is an ANTLR variant built on the ANTLR 3 recognition engine and (for the near term) StringTemplate.  It has the following features:
   
    
   Strongly typed attributes:  Yggdrasil supports definition of attribute types and attribute variables and provides a very simple attribute algebra.  Attributes are first class syntactic elements of Yggdrasil:  that is, attribute manipulations are primarily done through the attribute algebra and rarely through actions.  Base attribute types include Carrier and Payload for tree manipulation; Payloads (Tokens) are passed intact from input to output tree.  
   Code generation for attribute types:  Yggdrasil generates code for user-defined attribute types, without hindering the user's ability to define classes in the target language.  Yggdrasil also generates a Payload factory to support heterogeneous tree construction.  
   Tree rewrite through attribute manipulations.  Any element in a tree can be assigned to an attribute variable and later instantiated in the tree by referencing the attribute variable.  Attributes--including the type field in payloads--can be set or referenced using Yggdrasil syntax.  This makes a difference for tree grammar generation--perhaps the commonest attribute manipulation in ANTLR 2 was to change the type field of an AST node in an action, where it was essentially invisible and the generated tree recognized the original type, not the modified one.  
   Predicated tree construction.  Construction predicates direct tree construction much the same way that (matching) semantic predicated direct recognition of semantic constructs.  
   Full model/view separation of grammar and target.  All actions (and semantic predicates) are templates; output can be retargeted by replacing the template definition files used by the grammar.  It should be possible to "develop in Java, deliver in C" once Yggdrasil supports a C target.
   
  Later versions will provide automatic tree grammar generation and "compiled" StringTemplates (to improve retargetability of Yggdrasil and reduce memory usage).
  For more information, check out the manual/whitepaper that I have posted to the antlr.org web site.
   
  Yggdrasil is an outgrowth of my experiences with ANTLR 2.8 and the concepts I presented at the last ANTLR workshop.  Some of those concepts--notably attribute variables and dynamic scoping--in turn grew out of the Oregon ANTLR Cabal discussions.  Thanks, Ter, Monty!
   
  Current status:  I have the grammars and code generation working for Java (StringTemplate makes a big difference!) and unit tests for most of the runtime code that differs from ANTLR 3.  Left to do are integration (including updating to match the latest ANTLR 3 fixes) and testing for representative grammars, including playing with attribute types.  That should take about 2 weeks.
   
  --Loring

 		
---------------------------------
Talk is cheap. Use Yahoo! Messenger to make PC-to-Phone calls.  Great rates starting at 1?/min.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060725/31c3cdf6/attachment.html
From jhan at InfinityInfo.com  Tue Jul 25 14:44:25 2006
From: jhan at InfinityInfo.com (Jiho Han)
Date: Tue Jul 25 14:44:25 2006
Subject: [antlr-interest] RE: Treeparser question
Message-ID: <89ACF43E70DC0C4B812FEA71B98CE2EE1B7F03@infsrv00.InfinityInfo.com>

I figured out that it's referring to itself.  Makes sense now.

Another issue is - although non-critical - that I have duplicate
semantic actions for multiple rules and I don't know how to combine
them:

	compExpr	: #(OP_EQ IDENTIFIER literal) {
				AST op = compExpr_AST_in;
				AST id =
compExpr_AST_in.getFirstChild();
				AST value = id.getNextSibling();
				AddEntityQueryClause(op, id, value);
			}
			| #(OP_GT IDENTIFIER literal) {
				AST op = compExpr_AST_in;
				AST id =
compExpr_AST_in.getFirstChild();
				AST value = id.getNextSibling();
				AddEntityQueryClause(op, id, value);
			}
			| #(STARTSWITH IDENTIFIER literal) {
				AST op = compExpr_AST_in;
				AST id =
compExpr_AST_in.getFirstChild();
				AST value = id.getNextSibling();
				AddEntityQueryClause(op, id, value);
			} ;
With the rule like above, as you can see, all of the semantic actions
are identical.  Is there a way to combine them?
Also, if you take a look, I am having to use the generated code's
variable (hack) to get at the nodes.  I tried labeling them as:

#(op:OP_EQ id:IDENTIFIER value:literal) but then it complained for the
alternatives (for redeclaring them).  Then I added an init section that
declares them
{
    AST op, id, value;
}

And tried #(op=OP_EQ id=IDENTIFIER value=literal) but it croaked again.
What am I doing wrong?
Thanks

> _____________________________________________ 
> From: 	Jiho Han  
> Sent:	Tuesday, July 25, 2006 1:42 PM
> To:	antlr-interest@antlr.org
> Subject:	Treeparser question
> 
> In this example from a tutorial,
> 
> class ExpressionParser extends Parser;
> options { buildAST=true; }
> 
> expr     : sumExpr SEMI!;
> sumExpr  : prodExpr ((PLUS^|MINUS^) prodExpr)* ; 
> prodExpr : powExpr ((MUL^|DIV^|MOD^) powExpr)* ;
> powExpr  : atom (POW^ atom)? ;
> atom     : INT ;
> 
> class ExpressionLexer extends Lexer;
> 
> PLUS  : '+' ;
> MINUS : '-' ;
> MUL   : '*' ;
> DIV   : '/' ;
> MOD   : '%' ;
> POW   : '^' ;
> SEMI  : ';' ;
> protected DIGIT : '0'..'9' ;
> INT   : (DIGIT)+ ;
> 
> {import java.lang.Math;}
> class ExpressionTreeWalker extends TreeParser;
> 
> expr returns [double r]
>   { double a,b; r=0; }
> 
>   : #(PLUS  a=expr b=expr)  { r=a+b; }
>   | #(MINUS a=expr b=expr)  { r=a-b; }
>   | #(MUL   a=expr b=expr)  { r=a*b; }
>   | #(DIV   a=expr b=expr)  { r=a/b; }
>   | #(MOD   a=expr b=expr)  { r=a%b; }
>   | #(POW   a=expr b=expr)  { r=Math.pow(a,b); }
>   | i:INT { r=(double)Integer.parseInt(i.getText()); }
>   ;
>    
> Does expr reference in #(PLUS  a=expr b=expr) in the treeparser refer
> to itself or the one in ExpressionParser?
> Basically, I am having a hard time going from a parser to a tree
> parser in my own project.
> Thanks
> 
> Jiho Han
> Senior Software Engineer
> Infinity Info Systems
> The Sales Technology Experts
> Tel: 212.563.4400 x216
> Fax: 212.760.0540
> jhan@infinityinfo.com
> www.infinityinfo.com <http://www.infinityinfo.com/> 
> 
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060725/b5c10e87/attachment.html
From jsamort at gmail.com  Tue Jul 25 15:22:25 2006
From: jsamort at gmail.com (Scott Amort)
Date: Tue Jul 25 15:22:38 2006
Subject: [antlr-interest] Nondeterminism warnings upon Lexer and Grammar
In-Reply-To: <44C664D6.5070101@fastwebnet.it>
References: <44C664D6.5070101@fastwebnet.it>
Message-ID: <44C699A1.6010806@gmail.com>

Hi,

Herumor wrote:
> ANTLR Parser Generator   Version 2.7.6 (2005-12-22)   1989-2005
> error: Lexer rule ESC is not defined

To begin, you are missing an ESC rule.  Presumably you copied this from 
some outside source, but neglected to copy the referenced rule.

> EasyJavaLexer.g: warning:lexical nondeterminism between rules
> AccessSpecifier an
> d ReturnType upon
> EasyJavaLexer.g:     k==1:'f','s','v'
> EasyJavaLexer.g:     k==2:'o','y'
> EasyJavaLexer.g:     k==3:'a','i','l','n','o','t'
> EasyJavaLexer.g:     k==4:'a'
> EasyJavaLexer.g: warning:lexical nondeterminism between rules
> AccessSpecifier an
> d Type upon
> EasyJavaLexer.g:     k==1:'f','s'
> EasyJavaLexer.g:     k==2:'o','y'
> EasyJavaLexer.g:     k==3:'a','l','n','o','t'
> EasyJavaLexer.g:     k==4:'a'
> EasyJavaLexer.g: warning:lexical nondeterminism between rules ReturnType
> and Typ
> e upon
> EasyJavaLexer.g:     k==1:'b'..'d','f','i','l','s'
> EasyJavaLexer.g:     k==2:'h','l','n','o','y'
> EasyJavaLexer.g:     k==3:'a','l','n','o','t','u'
> EasyJavaLexer.g:     k==4:<end-of-token>,'a','b','e','g','r'
> Exiting due to errors.
> [/code]

Here, I think your best bet is to just keep an identifier rule in the 
lexer, and put your literals in the parser.  A couple of items of 
interest: I believe you should have all of your lexer rules uppercase 
(i.e. IDENTIFIER, not Identifier); and, why have you broken up your 
literals (i.e. "publ" "ic")?

Best,
Scott
From sunjigang1965 at yahoo.com.cn  Tue Jul 25 16:54:28 2006
From: sunjigang1965 at yahoo.com.cn (=?gb2312?q?=CB=EF=BC=CD=B8=D5=20Jigang=20(Robert)=20Sun?=)
Date: Tue Jul 25 16:54:36 2006
Subject: [antlr-interest] question about csharp_v1 example
Message-ID: <20060725235429.58626.qmail@web15704.mail.cnb.yahoo.com>

Hi,
I am trying the csharp_v1 example coming with v2.7.6. All the files are located in 
D:\antlr-2.7.6\examples\csharp\csharp_v1. The content of my dos mode .bat file is --

d:\j2sdk1.4.2_05\bin\java -cp antlr.jar antlr.Tool UnicodeLexerBase.g

d:\j2sdk1.4.2_05\bin\java -cp antlr.jar antlr.Tool CSharpLexerBase.g
d:\j2sdk1.4.2_05\bin\java -cp antlr.jar antlr.Tool CSharpLexer.g
d:\j2sdk1.4.2_05\bin\java -cp antlr.jar antlr.Tool CSharpParser.g
d:\j2sdk1.4.2_05\bin\java -cp antlr.jar antlr.Tool CSharpPrettyPrinter.g
d:\j2sdk1.4.2_05\bin\java -cp antlr.jar antlr.Tool CSharpPreprocessorLexer.g
d:\j2sdk1.4.2_05\bin\java -cp antlr.jar antlr.Tool CSharpPreprocessorHooverLexer.g

The console displays-- 

D:\antlr-2.7.6\examples\csharp\csharp_v1>d:\j2sdk1.4.2_05\bin\java -cp antlr.jar
 antlr.Tool UnicodeLexerBase.g
ANTLR Parser Generator   Version 2.7.6 (2005-12-22)   1989-2005

D:\antlr-2.7.6\examples\csharp\csharp_v1>d:\j2sdk1.4.2_05\bin\java -cp antlr.jar
 antlr.Tool CSharpLexerBase.g
ANTLR Parser Generator   Version 2.7.6 (2005-12-22)   1989-2005
error: grammar UnicodeLexerBase not defined

D:\antlr-2.7.6\examples\csharp\csharp_v1>d:\j2sdk1.4.2_05\bin\java -cp antlr.jar
 antlr.Tool CSharpLexer.g
ANTLR Parser Generator   Version 2.7.6 (2005-12-22)   1989-2005
error: grammar CSharpLexerBase not defined

D:\antlr-2.7.6\examples\csharp\csharp_v1>d:\j2sdk1.4.2_05\bin\java -cp antlr.jar
 antlr.Tool CSharpParser.g
ANTLR Parser Generator   Version 2.7.6 (2005-12-22)   1989-2005
panic: Cannot find importVocab file 'CSharpLexerTokenTypes.txt'

D:\antlr-2.7.6\examples\csharp\csharp_v1>d:\j2sdk1.4.2_05\bin\java -cp antlr.jar
 antlr.Tool CSharpPrettyPrinter.g
ANTLR Parser Generator   Version 2.7.6 (2005-12-22)   1989-2005
panic: Cannot find importVocab file 'CSharpTokenTypes.txt'

D:\antlr-2.7.6\examples\csharp\csharp_v1>d:\j2sdk1.4.2_05\bin\java -cp antlr.jar
 antlr.Tool CSharpPreprocessorLexer.g
ANTLR Parser Generator   Version 2.7.6 (2005-12-22)   1989-2005
error: grammar CSharpLexerBase not defined

D:\antlr-2.7.6\examples\csharp\csharp_v1>d:\j2sdk1.4.2_05\bin\java -cp antlr.jar
 antlr.Tool CSharpPreprocessorHooverLexer.g
ANTLR Parser Generator   Version 2.7.6 (2005-12-22)   1989-2005
error: grammar CSharpLexerBase not defined


only first grammar file is processed as sucessfully. Files in
D:\antlr-2.7.6\examples\csharp\csharp_v1 are--

2006-07-26  00:39    <DIR>          .
2006-07-26  00:39    <DIR>          ..
2005-12-23  17:58           443,432 antlr.jar
2005-12-10  02:23             6,684 ASTNode.cs
2005-12-10  02:23             7,990 ASTNodeFactory.cs
2006-07-26  00:31    <DIR>          bin
2005-12-10  02:23             1,985 CodeMaskEnums.cs
2006-07-26  00:21               512 cs.bat
2005-12-10  02:23            24,148 csharp.flex
2005-12-10  02:23           129,352 CSharpFlexLexer.cs
2005-12-10  02:23            19,182 CSharpLexer.g
2005-12-10  02:23             4,901 CSharpLexerBase.g
2006-07-26  00:31             5,128 CSharpParser.csproj
2005-12-10  02:23            50,508 CSharpParser.g
2005-12-10  02:23             8,294 CSharpPreprocessorHooverLexer.g
2005-12-10  02:23             8,700 CSharpPreprocessorLexer.g
2005-12-10  02:23            42,481 CSharpPrettyPrinter.g
2005-12-10  02:23             5,773 csharp_v1.build
2005-12-10  02:23             4,494 CustomHiddenStreamToken.cs
2005-12-10  02:23             1,448 LICENSE.TXT
2005-12-10  02:23             9,748 Main.cs
2006-07-26  00:31    <DIR>          obj
2005-12-10  02:23             5,612 README.TXT
2006-02-24  01:07    <DIR>          testfiles
2006-02-24  01:07    <DIR>          Tools
2006-07-26  00:35           163,028 UnicodeLexerBase.cs
2005-12-10  02:23            22,712 UnicodeLexerBase.g
2006-07-26  00:35               718 UnicodeLexerBaseTokenTypes.cs
2006-07-26  00:35               379 UnicodeLexerBaseTokenTypes.txt

File UnicodeLexerBase.g is in current directory, I do not know what is "error: grammar
UnicodeLexerBase not defined" asking for.

Jigang


		
___________________________________________________________ 
-3.5G20M 
http://cn.mail.yahoo.com/
From greenj at ix.netcom.com  Tue Jul 25 17:08:42 2006
From: greenj at ix.netcom.com (John Green)
Date: Tue Jul 25 17:10:04 2006
Subject: [antlr-interest] matching an AST segment with Java 5
Message-ID: <44C6B28A.50607@ix.netcom.com>

With Java 5 and autoboxing, I could use nested Object arrays as a quick and dirty description for a segment of an AST. Has anybody done this sort of thing before? Specifically, I wonder if match(AST, Object[]) as per my "usage example" below has been written and exists in any of the Antlr or other libraries.

It'll be easy to write, I'd just rather use existing libraries.  :)


int PLUS = 20;
int NUMBER = 30;
void m(AST currentNode) {
	// Looking for: #(PLUS #(PLUS NUMBER NUMBER) NUMBER)
	// and if found, print the text of the first NUMBER node.
	Object [] match = match(currentNode,
		new Object[]{PLUS, new Object[]{PLUS, NUMBER, NUMBER}, NUMBER}
		);
	if (match!=null) {
		out.println(((AST)((Object[])match[1])[1]).getText());
	}
}


Cheers,
John
www.joanju.com
From parrt at cs.usfca.edu  Tue Jul 25 18:53:30 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Jul 25 18:53:36 2006
Subject: [antlr-interest] started a todo and bug list on wiki
Message-ID: <DC6D7A46-5203-4837-B5CB-007399C1E17D@cs.usfca.edu>

I'm starting to add my to do list

http://www.antlr.org/wiki/display/ANTLR3/To+implement

I'm using labels to indicate priority and status.

I'll add my bugs soon too.

Nice that we can comment on this stuff too.

Ter
From open.zone at virgin.net  Tue Jul 25 21:02:23 2006
From: open.zone at virgin.net (Micheal J)
Date: Tue Jul 25 20:44:18 2006
Subject: [antlr-interest] question about csharp_v1 example
In-Reply-To: <20060725235429.58626.qmail@web15704.mail.cnb.yahoo.com>
Message-ID: <006501c6b068$5012bb10$c704a8c0@hercules>

> Hi,
> I am trying the csharp_v1 example coming with v2.7.6. All the 
> files are located in 
> D:\antlr-2.7.6\examples\csharp\csharp_v1. The content of my 
> dos mode .bat file is --

Robert, 

1. I _strongly_ advise installing Nant and using the supplied build file.
It's as simple as typing "Nant".

2. If you don't want to install Nant, read (1) again.

3. If you *really* can't install Nant, you should read the contents of the
Nant build file to get the correct commands (and the order in which they
should run) to build the project.


Cheers,

Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.

From herumor at fastwebnet.it  Wed Jul 26 00:09:30 2006
From: herumor at fastwebnet.it (Herumor)
Date: Wed Jul 26 00:09:33 2006
Subject: [antlr-interest] Runtime errors (I guess the hardest to fix)
Message-ID: <44C7152A.2030305@fastwebnet.it>

Hello everyone,
I'm having the following errors on runtime.


C:\Documents and
Settings\spotted\Documenti\grammatica\codice_generato>java Easy
Java
Progetto realizzato da Davide Pugliese

Inserire nome del file: test.txt

line 1:1: unexpected token: public
line 1:14: expecting IDENTIFIER, found 'pippo'
line 1:22: expecting LCBRACK, found 'null'

Esecuzione Terminata.

Here you can find the grammar and the contents of the file what with I
made the test:
http://www.rafb.net/paste/results/gyyR5u38.html

Thank you very much for help.
From dotnetfr at gmail.com  Wed Jul 26 00:38:27 2006
From: dotnetfr at gmail.com (dotnet fr)
Date: Wed Jul 26 00:38:31 2006
Subject: [antlr-interest] Simple question
In-Reply-To: <2E909902FD3A03419E3A905908AE3DD4022A2129@UKNSM201.emea.corp.eds.com>
References: <dcb971710607250509m1ea9f50ckc460f71646f0a507@mail.gmail.com>
	<2E909902FD3A03419E3A905908AE3DD4022A2129@UKNSM201.emea.corp.eds.com>
Message-ID: <dcb971710607260038n5e6dfdfg30d5b61667bb1a42@mail.gmail.com>

Okay, I understand better ;) Every token should be in the lexer

I have tried :

// in the parser
startRule       :
       chars
       ;
chars  :       LSTRING    ;

// in the lexer
LSTRING   :   ('a'..'z' | 'A'..'Z')+;

// in a input file
ftest

but It write :
line 1:1: expecting LSTRING, found 'f'

That's strange

Cheers

dotnetfr

2006/7/25, Hill, Robert <rhill03@eds.com>:
> You need to get the Lexer to return 1 token containing all your
> characters (probably best calling it a "String" or "CharacterLiteral"
> perhaps ;) ) instead of the lexer returning 1 token per char and
> building a tree of those single character tokens.
>
> try
>
> >chars  :       CHAR    ;
> >option buildAST is set to true;
>
> >CHAR   :   ('a'..'z' | 'A'..'Z')+;
>
> Cheers,
> Rob
>
>
>
> --
> Rob Hill
> EDS - Hallamshire Business Park
> F1E/045
> Sheffield
> T:      +44 (0) 114 291 1928
> M:      +44 (0) 791 732 1227
> E:      rhill03@eds.com
>
>
>
> >-----Original Message-----
> >From: antlr-interest-bounces@antlr.org
> >[mailto:antlr-interest-bounces@antlr.org] On Behalf Of dotnet fr
> >Sent: 25 July 2006 13:10
> >To: antlr-interest@antlr.org
> >Subject: [antlr-interest] Simple question
> >
> >Hi Everyone,
> >
> >I've got a simple question :
> >
> >-in the parser I have :
> >chars  :       (CHAR)+ ;
> >option buildAST is set to true;
> >
> >-in the lexer I have :
> >CHAR   :   ('a'..'z') | ('A'..'Z')    ;
> >
> >When I print the ast, my chars is not a token but a letter
> >(the first) with a lot of siblings. How to get the chars like a Token ?
> >
> >Thank you in advance
> >
> >--
> >dotnet
> >
>


-- 
dotnet
From dotnetfr at gmail.com  Wed Jul 26 01:33:05 2006
From: dotnetfr at gmail.com (dotnet fr)
Date: Wed Jul 26 01:33:09 2006
Subject: [antlr-interest] Simple question
In-Reply-To: <2E909902FD3A03419E3A905908AE3DD4022A2129@UKNSM201.emea.corp.eds.com>
References: <dcb971710607250509m1ea9f50ckc460f71646f0a507@mail.gmail.com>
	<2E909902FD3A03419E3A905908AE3DD4022A2129@UKNSM201.emea.corp.eds.com>
Message-ID: <dcb971710607260133n7cb77c12sfecd7ab8e0305169@mail.gmail.com>

It's okay, it works very well.

Thank you a lot Robert for this fast good answer :)

2006/7/25, Hill, Robert <rhill03@eds.com>:
> You need to get the Lexer to return 1 token containing all your
> characters (probably best calling it a "String" or "CharacterLiteral"
> perhaps ;) ) instead of the lexer returning 1 token per char and
> building a tree of those single character tokens.
>
> try
>
> >chars  :       CHAR    ;
> >option buildAST is set to true;
>
> >CHAR   :   ('a'..'z' | 'A'..'Z')+;
>
> Cheers,
> Rob
>
>
>
> --
> Rob Hill
> EDS - Hallamshire Business Park
> F1E/045
> Sheffield
> T:      +44 (0) 114 291 1928
> M:      +44 (0) 791 732 1227
> E:      rhill03@eds.com
>
>
>
> >-----Original Message-----
> >From: antlr-interest-bounces@antlr.org
> >[mailto:antlr-interest-bounces@antlr.org] On Behalf Of dotnet fr
> >Sent: 25 July 2006 13:10
> >To: antlr-interest@antlr.org
> >Subject: [antlr-interest] Simple question
> >
> >Hi Everyone,
> >
> >I've got a simple question :
> >
> >-in the parser I have :
> >chars  :       (CHAR)+ ;
> >option buildAST is set to true;
> >
> >-in the lexer I have :
> >CHAR   :   ('a'..'z') | ('A'..'Z')    ;
> >
> >When I print the ast, my chars is not a token but a letter
> >(the first) with a lot of siblings. How to get the chars like a Token ?
> >
> >Thank you in advance
> >
> >--
> >dotnet
> >
>


-- 
dotnet
From jose.ventura.roda at gmail.com  Wed Jul 26 03:59:08 2006
From: jose.ventura.roda at gmail.com (Jose Ventura)
Date: Wed Jul 26 03:59:12 2006
Subject: [antlr-interest] CommonAST derived class problem
Message-ID: <e39abda10607260359o3e6788derb3388dc89888cbf1@mail.gmail.com>

I've one problem whit a derived AST class. When I use the option 1 all run
ok, but when I trie to use the option 2 I have a problem.

  Option 1
  --------
  in parser/ext/parser.g
        ASTLabelType = "parser.Nodo"

  in parser/Nodo.java
        public class Nodo extends CommonAST{...}

  Option 2
  --------

  in parser/ext/parser.g
        ASTLabelType = "parser.ext.NodoA"

  in parser/ext/NodoA
        public class NodoA extends Nodo {...}

  in parser/Nodo.java
        public abstract class Nodo extends CommonAST{...}

  problem:
  -----------
        Can't create AST Node parser.ext.NodoA

        this occurs in the next method of ASTFactory.java
 protected AST create(Class c) {
        AST t = null;
        try {
*               t = (AST)c.newInstance(); // make a new one     <<====*
             }
        catch (Exception e) {
              error("Can't create AST Node " + c.getName());
              return null;
        }
        return t;
}



       Apparently, the class parser.ext.NodoA is founded because if I change
the class name to another, the message is "Can't find/access AST Node type
NodoB", then if NodoA is derived from Nodo and Nodo from CommonAST, what's
the problem?

       I was able to see where can be it.

       Any help will be appreciated

   Thank's in advance.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060726/a07f65a9/attachment.html
From stanio at myrealbox.com  Wed Jul 26 04:13:20 2006
From: stanio at myrealbox.com (Stanimir Stamenkov)
Date: Wed Jul 26 04:13:26 2006
Subject: [antlr-interest] CommonAST derived class problem
In-Reply-To: <e39abda10607260359o3e6788derb3388dc89888cbf1@mail.gmail.com>
References: <e39abda10607260359o3e6788derb3388dc89888cbf1@mail.gmail.com>
Message-ID: <44C74E50.7090604@myrealbox.com>

/Jose Ventura/:

>         Can't create AST Node parser.ext.NodoA
> 
>         this occurs in the next method of ASTFactory.java
> 
>  protected AST create(Class c) {
>         AST t = null;
>         try {
> *               t = (AST)c.newInstance(); // make a new one     <<====*
>              }
[...]

You obviously need to define a default no-arguments constructor for 
your AST subclass - have you done it already?

-- 
Stanimir
From jose.ventura.roda at gmail.com  Wed Jul 26 04:25:45 2006
From: jose.ventura.roda at gmail.com (Jose Ventura)
Date: Wed Jul 26 04:25:52 2006
Subject: [antlr-interest] CommonAST derived class problem
In-Reply-To: <44C74E50.7090604@myrealbox.com>
References: <e39abda10607260359o3e6788derb3388dc89888cbf1@mail.gmail.com>
	<44C74E50.7090604@myrealbox.com>
Message-ID: <e39abda10607260425o6d751c06jf244fc7e2b5923e8@mail.gmail.com>

Ok, Stanimir. I thought I was tested it, but not. Run ok.

Thank's.
Jos? Ventura.


On 7/26/06, Stanimir Stamenkov <stanio@myrealbox.com> wrote:
>
> /Jose Ventura/:
>
> >         Can't create AST Node parser.ext.NodoA
> >
> >         this occurs in the next method of ASTFactory.java
> >
> >  protected AST create(Class c) {
> >         AST t = null;
> >         try {
> > *               t = (AST)c.newInstance(); // make a new one     <<====*
> >              }
> [...]
>
> You obviously need to define a default no-arguments constructor for
> your AST subclass - have you done it already?
>
> --
> Stanimir
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060726/097392ab/attachment.html
From wiggjd at lsbu.ac.uk  Wed Jul 26 05:07:31 2006
From: wiggjd at lsbu.ac.uk (Wigg, J D)
Date: Wed Jul 26 05:07:12 2006
Subject: [antlr-interest] Java 5 (aka 1.5) grammar
Message-ID: <10A786EB5741DE4DB252F7B9B9423D3A01085B1D@CSD-EXBE-VS2.lsbu.ac.uk>

Thanks Michael and Andy for your information.
 
To download Studman's grammar I had to right click and use "Save as"
instead of copying and pasting.
 
The comparison of the ASTs produced by the Stahl and Studman grammars
(Oct 2004) was very interesting Andy.
 
>From a quick study of the version notes it looks as though the Stahl
and Studman lineages separated in April 2004 whereas the Colombi and
Wisniewski lineages separated from Studman in March 2005.
 
I am currently using Studman's version and will probably continue to
develop it for our purposes.
 
One of the things I would like to do is avoid using a
"conditionalExpression" for the LHS of an "assignmentExpression",
which is so expensive when an "identPrimary" appears to be adequate.
 
Thanks for you help.
 
David.
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060726/85ee7b32/attachment-0001.html
From naveed_jee at yahoo.com  Wed Jul 26 07:43:53 2006
From: naveed_jee at yahoo.com (naveed riaz)
Date: Wed Jul 26 07:44:00 2006
Subject: [antlr-interest] Help Needed Verilog AST
Message-ID: <20060726144353.7526.qmail@web34205.mail.mud.yahoo.com>

Hi all..
Currently i am working on Verilog diagonosis.
on antlr website there is a grammar available for
verilog but i dont
think it supports AST.
Is there some one who has worked on Verilog AST or can
some one guide me
how to change that
grammar in such a way that i can get an AST. Any help
......
Best of Regards..


 




		
___________________________________________________________ 
All New Yahoo! Mail ? Tired of Vi@gr@! come-ons? Let our SpamGuard protect you. http://uk.docs.yahoo.com/nowyoucan.html
From james_cataldo at agilent.com  Wed Jul 26 08:18:56 2006
From: james_cataldo at agilent.com (james_cataldo@agilent.com)
Date: Wed Jul 26 08:19:01 2006
Subject: [antlr-interest] Help Needed Verilog AST
Message-ID: <6F94DB018DCB9E4AB34E7FE503AF2B1685897C@wcosmb05.cos.agilent.com>

In the options sections of VerilogParser, add 

> buildAST = true; 

This will put the parser in AST generation mode.  The default AST is probably not what you want, but the ANTLR documentation chapter about Tree Parsers should tell you everything you need to know about how to customize it.  The ASTFrame class can help you debug the AST to make sure you get what you want.  I hope this helps.

Adam

-----Original Message-----
From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-bounces@antlr.org] On Behalf Of naveed riaz
Sent: Wednesday, July 26, 2006 7:44 AM
To: antlr-interest@antlr.org
Subject: [antlr-interest] Help Needed Verilog AST

Hi all..
Currently i am working on Verilog diagonosis.
on antlr website there is a grammar available for verilog but i dont think it supports AST.
Is there some one who has worked on Verilog AST or can some one guide me how to change that grammar in such a way that i can get an AST. Any help ......
Best of Regards..


 




		
___________________________________________________________
All New Yahoo! Mail - Tired of Vi@gr@! come-ons? Let our SpamGuard protect you. http://uk.docs.yahoo.com/nowyoucan.html
From greenj at ix.netcom.com  Wed Jul 26 09:53:32 2006
From: greenj at ix.netcom.com (John Green)
Date: Wed Jul 26 09:54:11 2006
Subject: [antlr-interest] Re: matching an AST segment with Java 5
In-Reply-To: <44C6B28A.50607@ix.netcom.com>
References: <44C6B28A.50607@ix.netcom.com>
Message-ID: <44C79E0C.1060900@ix.netcom.com>

John Green wrote:
>     // Looking for: #(PLUS #(PLUS NUMBER NUMBER) NUMBER)
>     // and if found, print the text of the first NUMBER node.
>     Object [] match = match(currentNode,
>         new Object[]{PLUS, new Object[]{PLUS, NUMBER, NUMBER}, NUMBER}
>         );


Filling in the code for match() was easy. Here's a quick test mTest(), which calls a sample usage m(), which calls match().


private static final int PLUS = 20;
private static final int NUMBER = 30;
void mTest() {
	AST p1 = new CommonAST(); p1.setType(PLUS);
	AST p2 = new CommonAST(); p2.setType(PLUS);
	AST n1 = new CommonAST(); n1.setType(NUMBER); n1.setText("1");
	AST n2 = new CommonAST(); n2.setType(NUMBER); n2.setText("2");
	AST n3 = new CommonAST(); n3.setType(NUMBER); n3.setText("3");
	p1.setFirstChild(p2);
	p2.setFirstChild(n1);
	n1.setNextSibling(n2);
	p2.setNextSibling(n3);
	m(p1);
}

void m(AST currentNode) {
	// Looking for: #(PLUS #(PLUS NUMBER NUMBER) NUMBER)
	// and if found, print the text of the first NUMBER node.
	Object [] match = match(
			currentNode
			, new Object[]{PLUS, new Object[]{PLUS, NUMBER, NUMBER}, NUMBER}
			);
	if (match!=null) {
		System.out.println(((AST)((Object[])match[1])[1]).getText());
	} else {
		System.out.println("No match");
	}
}

Object[] match(AST ast, Object[] objarray) {
	if (ast==null) return null;
	Object[] ret = new Object[objarray.length];
	ret[0] = ast;
	AST currAST = ast.getFirstChild();
	for (int count = 1; count < objarray.length; count++) {
		if (currAST==null) return null;
		if (objarray[count] instanceof Object[]) {
			Object[] nonterminal = match(currAST, (Object[])objarray[count]);
			if (nonterminal==null) return null;
			ret[count] = nonterminal;
		} else {
			ret[count] = currAST;
		}
		currAST = currAST.getNextSibling();
	}
	return ret;
}





John Green wrote:
> With Java 5 and autoboxing, I could use nested Object arrays as a quick 
> and dirty description for a segment of an AST. Has anybody done this 
> sort of thing before? Specifically, I wonder if match(AST, Object[]) as 
> per my "usage example" below has been written and exists in any of the 
> Antlr or other libraries.
> 
> It'll be easy to write, I'd just rather use existing libraries.  :)
> <snip>
> 
> Cheers,
> John
> www.joanju.com
> 
From greenj at ix.netcom.com  Wed Jul 26 09:59:04 2006
From: greenj at ix.netcom.com (John Green)
Date: Wed Jul 26 10:00:57 2006
Subject: [antlr-interest] Re: matching an AST segment with Java 5
In-Reply-To: <44C79E0C.1060900@ix.netcom.com>
References: <44C6B28A.50607@ix.netcom.com> <44C79E0C.1060900@ix.netcom.com>
Message-ID: <44C79F58.2090307@ix.netcom.com>

Whoops, that's really incomplete. I hit send too soon. How embarrassing. Need more coffee. Please delete my last post and pretend you didn't see it.  :-/

John Green wrote:
> John Green wrote:
>>     // Looking for: #(PLUS #(PLUS NUMBER NUMBER) NUMBER)
>>     // and if found, print the text of the first NUMBER node.
>>     Object [] match = match(currentNode,
>>         new Object[]{PLUS, new Object[]{PLUS, NUMBER, NUMBER}, NUMBER}
>>         );
> 
> 
> Filling in the code for match() was easy. Here's a quick test mTest(), 
> which calls a sample usage m(), which calls match().
> 
> 
> private static final int PLUS = 20;
> private static final int NUMBER = 30;
> void mTest() {
>     AST p1 = new CommonAST(); p1.setType(PLUS);
>     AST p2 = new CommonAST(); p2.setType(PLUS);
>     AST n1 = new CommonAST(); n1.setType(NUMBER); n1.setText("1");
>     AST n2 = new CommonAST(); n2.setType(NUMBER); n2.setText("2");
>     AST n3 = new CommonAST(); n3.setType(NUMBER); n3.setText("3");
>     p1.setFirstChild(p2);
>     p2.setFirstChild(n1);
>     n1.setNextSibling(n2);
>     p2.setNextSibling(n3);
>     m(p1);
> }
> 
> void m(AST currentNode) {
>     // Looking for: #(PLUS #(PLUS NUMBER NUMBER) NUMBER)
>     // and if found, print the text of the first NUMBER node.
>     Object [] match = match(
>             currentNode
>             , new Object[]{PLUS, new Object[]{PLUS, NUMBER, NUMBER}, 
> NUMBER}
>             );
>     if (match!=null) {
>         System.out.println(((AST)((Object[])match[1])[1]).getText());
>     } else {
>         System.out.println("No match");
>     }
> }
> 
> Object[] match(AST ast, Object[] objarray) {
>     if (ast==null) return null;
>     Object[] ret = new Object[objarray.length];
>     ret[0] = ast;
>     AST currAST = ast.getFirstChild();
>     for (int count = 1; count < objarray.length; count++) {
>         if (currAST==null) return null;
>         if (objarray[count] instanceof Object[]) {
>             Object[] nonterminal = match(currAST, 
> (Object[])objarray[count]);
>             if (nonterminal==null) return null;
>             ret[count] = nonterminal;
>         } else {
>             ret[count] = currAST;
>         }
>         currAST = currAST.getNextSibling();
>     }
>     return ret;
> }
> 
> 
> 
> 
> 
> John Green wrote:
>> With Java 5 and autoboxing, I could use nested Object arrays as a 
>> quick and dirty description for a segment of an AST. Has anybody done 
>> this sort of thing before? Specifically, I wonder if match(AST, 
>> Object[]) as per my "usage example" below has been written and exists 
>> in any of the Antlr or other libraries.
>>
>> It'll be easy to write, I'd just rather use existing libraries.  :)
>> <snip>
>>
>> Cheers,
>> John
>> www.joanju.com
>>
> 
From greenj at ix.netcom.com  Wed Jul 26 10:25:44 2006
From: greenj at ix.netcom.com (John Green)
Date: Wed Jul 26 10:28:16 2006
Subject: [antlr-interest] Re: matching an AST segment with Java 5 (fixed)
In-Reply-To: <44C6B28A.50607@ix.netcom.com>
References: <44C6B28A.50607@ix.netcom.com>
Message-ID: <44C7A598.9000006@ix.netcom.com>

OK, now it actually matches the node types, rather than just the tree shape. Sigh.

Here's a quick test mTest(), which calls a sample usage m(), which calls match().


private static final int PLUS = 20;
private static final int NUMBER = 30;
void mTest() {
	AST p1 = new CommonAST(); p1.setType(PLUS);
	AST p2 = new CommonAST(); p2.setType(PLUS);
	AST n1 = new CommonAST(); n1.setType(NUMBER); n1.setText("1");
	AST n2 = new CommonAST(); n2.setType(NUMBER); n2.setText("2");
	AST n3 = new CommonAST(); n3.setType(NUMBER); n3.setText("3");
	p1.setFirstChild(p2);
	p2.setFirstChild(n1);
	n1.setNextSibling(n2);
	p2.setNextSibling(n3);
	m(p1);
}

void m(AST currentNode) {
	// Looking for: #(PLUS #(PLUS NUMBER NUMBER) NUMBER)
	// and if found, print the text of the first NUMBER node.
	Object [] match = match(
			currentNode
			, new Object[]{PLUS, new Object[]{PLUS, NUMBER, NUMBER}, NUMBER}
			);
	if (match!=null) {
		System.out.println(((AST)((Object[])match[1])[1]).getText());
	} else {
		System.out.println("No match");
	}
}

/** Match an AST to a (possibly nested) array of integer node types.
 * <p>
 * Matches AST node types to the integer values in the input Object[].
 * The first integer value in the Object[] is expected to match the
 * head node of an AST branch. Multiple Object[] may be nested, to
 * describe the shape of the AST to be matched.
 * <p>
 * The input Object[] may describe just the beginning portion of the
 * AST. The Object[] is not expected to describe the entire AST in
 * order to match.
 * @author John Green (www.joanju.com)
 * @param ast Parent node of the AST branch to match.
 * @param objarray Possibly nested Object[] of integer node types.
 * @return An Object[] matching the shape of the input Object[], but
 * with AST node references rather than integer node types. Null if
 * the AST does not match the input Object[].
 */
public static Object[] match(AST ast, Object[] objarray) {
	if	(	ast==null
		||	ast.getType() != (Integer)objarray[0]	
		) return null;
	Object[] ret = new Object[objarray.length];
	ret[0] = ast;
	AST currAST = ast.getFirstChild();
	for (int count = 1; count < objarray.length; count++) {
		if (currAST==null) return null;
		if (objarray[count] instanceof Object[]) {
			Object[] nonterminal = match(currAST, (Object[])objarray[count]);
			if (nonterminal==null) return null;
			ret[count] = nonterminal;
		} else {
			if (currAST.getType() != (Integer)objarray[count]) return null;
			ret[count] = currAST;
		}
		currAST = currAST.getNextSibling();
	}
	return ret;
}


John Green wrote:
> With Java 5 and autoboxing, I could use nested Object arrays as a quick 
> and dirty description for a segment of an AST. Has anybody done this 
> sort of thing before? Specifically, I wonder if match(AST, Object[]) as 
> per my "usage example" below has been written and exists in any of the 
> Antlr or other libraries.
> 
> It'll be easy to write, I'd just rather use existing libraries.  :)
> 
> Cheers,
> John
> www.joanju.com
> 
From jbb at acm.org  Wed Jul 26 12:55:03 2006
From: jbb at acm.org (John B. Brodie)
Date: Wed Jul 26 12:55:54 2006
Subject: [antlr-interest] Runtime errors (I guess the hardest to fix)
In-Reply-To: <44C7152A.2030305@fastwebnet.it> (message from Herumor on Wed, 26
	Jul 2006 09:09:30 +0200)
References: <44C7152A.2030305@fastwebnet.it>
Message-ID: <E1G5pTD-0004y9-00@gecko>

herumor@fastwebnet.it asked:
>Hello everyone,
>I'm having the following errors on runtime.
>
>
>C:\Documents and
>Settings\spotted\Documenti\grammatica\codice_generato>java Easy
>Java
>Progetto realizzato da Davide Pugliese
>
>Inserire nome del file: test.txt
>
>line 1:1: unexpected token: public
>line 1:14: expecting IDENTIFIER, found 'pippo'
>line 1:22: expecting LCBRACK, found 'null'
>
>Esecuzione Terminata.
>
>Here you can find the grammar and the contents of the file what with I
>made the test:
>http://www.rafb.net/paste/results/gyyR5u38.html
>
>Thank you very much for help.

I think maybe the definitions for tokens is not in-sync between your parser
and your lexer.

You seem to be using separate files for each. Which is fine for v2.  But
---and my memory of this is hazy--- when you do that you should exportVocab
from the parser and then importVocab into the lexer *AND* ensure that you
build the parser before building the lexer.

or you could just use a single file containing both the parser and the
lexer and thereby avoid this problem...

also I note that on line 71 of the parser you refer to `Type` which is not
defined anywhere --- maybe it should be a reference to `type` ?

Hope this helps...
  --jbb
From herumor at fastwebnet.it  Wed Jul 26 14:32:41 2006
From: herumor at fastwebnet.it (Herumor)
Date: Wed Jul 26 14:32:43 2006
Subject: [antlr-interest] Runtime errors (I guess the hardest to fix)
In-Reply-To: <E1G5pTD-0004y9-00@gecko>
References: <44C7152A.2030305@fastwebnet.it> <E1G5pTD-0004y9-00@gecko>
Message-ID: <44C7DF79.70504@fastwebnet.it>

Thanks for helping John.
Now there are just some minor issues but the parser seams to work :D
I'd like to change some error messages and fix the rule so that when it
finds some occurrences like a while statement or an if one which
currently does not display it will prompt it out.
I've written the problems into detail here:
http://www.rafb.net/paste/results/P1IU2555.html

> I think maybe the definitions for tokens is not in-sync between your parser
> and your lexer.
>
> You seem to be using separate files for each. Which is fine for v2.  But
> ---and my memory of this is hazy--- when you do that you should exportVocab
> from the parser and then importVocab into the lexer *AND* ensure that you
> build the parser before building the lexer.
>
> or you could just use a single file containing both the parser and the
> lexer and thereby avoid this problem...
>
> also I note that on line 71 of the parser you refer to `Type` which is not
> defined anywhere --- maybe it should be a reference to `type` ?
>
> Hope this helps...
>   --jbb
>
>   

From parrt at cs.usfca.edu  Wed Jul 26 17:05:36 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Jul 26 17:05:40 2006
Subject: [antlr-interest] wow!  antlr runtime just got faster!
Message-ID: <8272F7C6-46DD-412F-BEAC-080CA1C7BEE3@cs.usfca.edu>

Howdy folks,

So I've been playing with the DFA state tables that come out or ANTLR  
(only for complicated decisions) and I told it to avoid making if- 
then-else chains unless a predicate is present.  Turns out that the  
lexer for Java had a big if-then-else chain as the main entry point.   
ugh.  Turning that into an array lookup has *DRAMATICALLY* improved  
the efficiency.

My informal tests show that we shave almost 40% off the overall exec  
speed parsing JDK 1.4 source.  The new DFAs in a parser/lexer combo  
dropped from 7.3 seconds on a java grammar to 4.3.

Using the if-then-else chain:

java -Xmx100M org.antlr.Tool -Xmaxdfaedges 512 java.g

takes about 7.3s to parse 1.4 source tree:

time java -Xms200M -Xmx400M Main /usr/local/javasrc/java

I get about 4.3s to parse.  WOW!

Running a syntax-converted java grammar from Robert Grimm's cool  
Rats! PEG-based tool into ANTLR yields about 6.4s, but with the if- 
then-else it takes 9.4s.  Note that Robert's tool does amazingly  
well: I originally clocked it at around 7.x seconds on my box but  
somehow today it's taking 13s; weird, well assume it's 7.x seconds  
for now til I can investigate.  ANTLR v2 takes 8.8s but on that  
grammar, antlr 3 does like 3.X seconds (haven't checked that one in a  
while).  Javacc does about 4.3s using it's java grammar.  Note Rats!  
does no static analysis; the speed comes from clever optimizations at  
run-time.

The java grammar has lots of unicode so new DFA thing matters for  
it.  For C grammar it shouldn't matter too much if at all.  Anyway,  
interesting little tidbit.

Ter
From dotnetfr at gmail.com  Thu Jul 27 00:39:18 2006
From: dotnetfr at gmail.com (dotnet fr)
Date: Thu Jul 27 00:39:23 2006
Subject: [antlr-interest] Lexer question
Message-ID: <dcb971710607270039j4083a5fepc21eabfbc0c86109@mail.gmail.com>

Hi Everyone,

I have a problem about the antlr lexer.

In input I have :
10;
1500;
0.50;

In my lexer I have :
DOUBLE		: ('-')? ('0'..'9')+ '.' ('0'..'9')* ;
INTEGER		: ('0'..'9')+ ;
SEMICOLON	: ';' ;

In my parser and lexer I have k=5.

But I've got an error, the lexer seems to get his TOKENS in the order.
It gets the 10 like a double (the first in the list) and send an
exception
(exception: expecting ''.'', found '';'')

I want the lexer to skip and try the next TOKEN and send an exception
only if there isn't any solutions.

Is anyone got this problem too ?

Cheers,

Tomy
From herumor at fastwebnet.it  Thu Jul 27 01:18:19 2006
From: herumor at fastwebnet.it (Herumor)
Date: Thu Jul 27 01:18:19 2006
Subject: [antlr-interest] Changing Error message shape
Message-ID: <44C876CB.3010203@fastwebnet.it>

Now there are just some minor issues but the parser seams to work :D
I'd like to change some error messages.
Here I've explained it into detail here:

http://www.rafb.net/paste/results/K5lItI59.html

Thanks forward for help.
Davide Pugliese


From anup_sankaran at yahoo.com  Thu Jul 27 03:33:56 2006
From: anup_sankaran at yahoo.com (Anup Shankar)
Date: Thu Jul 27 03:34:00 2006
Subject: [antlr-interest] A Grammar Issue..
Message-ID: <20060727103356.51354.qmail@web53506.mail.yahoo.com>

Hi,
   
  Iam trying to come up with a simple grammar, which can parse commands the given to it.
   
  The below is the abstract grammar file::
  ----------------------------------------------------------------------------------------------------------------------------
  options {
  language="Cpp";
  }
  class ftpParser extends Parser;
  options {
  genHashLines = true; // include line number information
  k =5;
  }
  cmd: openCmd 
   
  openCmd: open SPACE (hostname)+ EOL;
  hostname: ( SPLCHAR | STRING);
  open: "open";
   
   
  class ftpLexer extends Lexer;
  options {
  k=2;
  charVocabulary = '\3'..'\377';
  caseSensitive=false;
  }
  EOL :
  ( "\r\n"
  | '\n'
  | '\r'
  ) 
  ;
  STRING :( 'a'..'z' |'0'..'9' | ','..'/'
  )
  ;
   
  SPLCHAR: ('$'..'+' | '['..'_' );
   
  ----------------------------------------------------------------------------------------------------------------------
   
  The invocation code is 
  --------------------------------
  istringstream input_string;
  istream *input=NULL;
   
  input_string.str( "open server1.net");
  input = &input_string;
  ftpLexer lexer(*input);
  ftpParser parser(lexer);
  parser.cmd();
   
  SwithStmt
  --------------
  void ftpParser::cmd() {
  
  try { // for error handling
  switch ( LA(1)) {
  case LITERAL_open:
  {
  openCmd();
  break;
  }
   
  }
  Here iam facing problems, where the comparision of the literal in this case "open" is not succeeding, in the Switch case stmt..
   
   
  Could any of you help me out in this issue.
   
   
   
  Thanks,
  Anup

 		
---------------------------------
Talk is cheap. Use Yahoo! Messenger to make PC-to-Phone calls.  Great rates starting at 1?/min.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060727/02ca673a/attachment.html
From sunjigang1965 at yahoo.com.cn  Thu Jul 27 05:05:29 2006
From: sunjigang1965 at yahoo.com.cn (=?gb2312?q?=CB=EF=BC=CD=B8=D5=20Jigang=20(Robert)=20Sun?=)
Date: Thu Jul 27 05:05:37 2006
Subject: =?gb2312?q?=BB=D8=B8=B4=A3=BA=20RE:=20[antlr-interest]=20question=20about?=
	=?gb2312?q?=20csharp=5Fv1=20example?=
In-Reply-To: <006501c6b068$5012bb10$c704a8c0@hercules>
Message-ID: <20060727120529.14949.qmail@web15710.mail.cnb.yahoo.com>

Anyone know how to run csharp_v1.build? It is in XML format. 

Thanks.

Jigang 


--- Micheal J <open.zone@virgin.net>:

> > Hi,
> > I am trying the csharp_v1 example coming with v2.7.6. All the 
> > files are located in 
> > D:\antlr-2.7.6\examples\csharp\csharp_v1. The content of my 
> > dos mode .bat file is --
> 
> Robert, 
> 
> 1. I _strongly_ advise installing Nant and using the supplied build file.
> It's as simple as typing "Nant".
> 
> 2. If you don't want to install Nant, read (1) again.
> 
> 3. If you *really* can't install Nant, you should read the contents of the
> Nant build file to get the correct commands (and the order in which they
> should run) to build the project.
> 
> 
> Cheers,
> 
> Micheal
> 
> -----------------------
> The best way to contact me is via the list/forum. My time is very limited.
> 
> 


__________________________________________________
?
http://cn.mail.yahoo.com
From dholenstein at gmail.com  Thu Jul 27 05:13:45 2006
From: dholenstein at gmail.com (Dominik Holenstein)
Date: Thu Jul 27 05:13:51 2006
Subject: [antlr-interest] Lexer question
In-Reply-To: <dcb971710607270253p949a248tae512840a2f88928@mail.gmail.com>
References: <dcb971710607270039j4083a5fepc21eabfbc0c86109@mail.gmail.com>
	<8ab6a9f00607270145w14d29cd4s682123531f2fda06@mail.gmail.com>
	<dcb971710607270201y77dbdb02p68ae2e05e55f0e53@mail.gmail.com>
	<8ab6a9f00607270248yf4df259lfceb9b1f334dd19b@mail.gmail.com>
	<dcb971710607270253p949a248tae512840a2f88928@mail.gmail.com>
Message-ID: <8ab6a9f00607270513v61721ffdr688890100808513c@mail.gmail.com>

Tomy,
I have played around with your Lexer and Parser code and have found
this solution:


-------------------------------------------------------
ANTLR Grammar (file n.g):

class NumParser extends Parser;

startRule : (line)* ;

line 	  : (
         	  d:DOUBLE
         	  {System.out.println("Double: "+d.getText());}
         	  |
                   i:INTEGER
                  {System.out.println("Integer: "+i.getText());}	
                   )
                   ;


class NumLexer extends Lexer;

DOUBLE          : (('-')? ('0'..'9')+ '.' ('0'..'9')* )=> ('-')?
('0'..'9')+ '.' ('0'..'9')* | ('0'..'9')+ {$setType(INTEGER);} ;

INTEGER         : ('0'..'9')+ ;

SEMICOLON    : ';' { $setType(Token.SKIP); } ;

NEWLINE	       : (('\r''\n')=> '\r''\n'         		
	       | '\r'
       	       | '\n'
       	       ) { $setType(Token.SKIP); }
      			;
WS                  : (' '|'\t') { $setType(Token.SKIP); } ;

---------------------------------------------------

The Java test code (Main.java):

import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileWriter;
import java.io.IOException;

public class Main {
	public static void main (String[] args) {
		try {
			// Make sure you change the path for your input file
			DataInputStream input = new DataInputStream(new
FileInputStream("E:\\ANTLR\\Examples\\Numbers\\input.txt"));
			NumLexer lexer = new NumLexer(input);
	    	NumParser parser = new NumParser(lexer);
	    	try {
	    		parser.startRule();
	    	} catch(Exception e) {}
        } catch (FileNotFoundException e) {
        	System.out.println("Error: Cannot open file for reading");
        }
	}
}

--------------------------------------------------------------
Data in the input file (input.txt):
10;
1500;
0.50;
35;
7.25;
3000;

---------------------------------------------------------------

I have added all files as attachments to this e-mail.

You can set k=1 because of the semantic predicate what makes the
parser a bit faster.
The System.out... messages are for testing purposes. I can see then in
the console the output of the parser. I am working with Eclipse 3.2
and ANTLR Studio. I am not sure whether this is 'good' programming
style but it works ;-) . Inputs, feedbacks and better solutions are
welcomed.

I hope it helps!

Regards,
Dominik





On 7/27/06, dotnet fr <dotnetfr@gmail.com> wrote:
> Hi Dominik,
>
> I'm happy to meet a person like me!
> I'm a beginner with antlr and codeworker too ;)
> I'm each minute I'm learning new key. Antlr seems very powerful yeah.
> My project is to create first a class generator, structure generator
> and in final a structure (or class loader). It means I use parsing and
> generation code.
> What do you do with antlr, what is your interest in informatics ?
>
> Cheers
> Tomy
>
> 2006/7/27, Dominik Holenstein <dholenstein@gmail.com>:
> > Hi Tomy,
> > I don't know codeworker but will have a look at it.
> > ANTLR is very powerful and with v3 coming in fall it will get much better.
> > I am a beginner with Java and ANTLR so everything is 'difficult' at
> > the moment. But I am progressing and learning every day!
> > I will look at your issue this afternoon.
> >
> > Regards,
> > Dominik
> >
> >
> >
> > On 7/27/06, dotnet fr <dotnetfr@gmail.com> wrote:
> > > Hi Dominik,
> > >
> > > I have seen in the Predicated LL(k) Lexing in the ANTLR documentation
> > > witch treats about this kind of problem. It works but it's not the
> > > best solution I think ;)
> > > I thought that the antlr lexer try the first token and if it doesn't
> > > match, it go to
> > > the second etc..
> > >
> > > My parser grammar :
> > >
> > > startRule
> > >        :
> > >                nbp_debug
> > >        ;
> > >
> > > protected
> > > debug    :
> > >        (
> > >                DATE
> > >        |       DOUBLE
> > >        |       INTEGER
> > >        |       SEMICOLON
> > >        )*
> > >        ;
> > >
> > > What do you think about Antlr ? I have to do the same project with
> > > codeworker and antlr. Antlr seems more difficult to manipulate.
> > >
> > > Cheers,
> > >
> > > Tomy
> > >
> > > 2006/7/27, Dominik Holenstein <dholenstein@gmail.com>:
> > > > Tomy,
> > > >
> > > > What is you grammar in the parser?
> > > > Thanks.
> > > >
> > > > Dominik
> > > >
> > > >
> > > > On 7/27/06, dotnet fr <dotnetfr@gmail.com> wrote:
> > > > > Hi Everyone,
> > > > >
> > > > > I have a problem about the antlr lexer.
> > > > >
> > > > > In input I have :
> > > > > 10;
> > > > > 1500;
> > > > > 0.50;
> > > > >
> > > > > In my lexer I have :
> > > > > DOUBLE          : ('-')? ('0'..'9')+ '.' ('0'..'9')* ;
> > > > > INTEGER         : ('0'..'9')+ ;
> > > > > SEMICOLON       : ';' ;
> > > > >
> > > > > In my parser and lexer I have k=5.
> > > > >
> > > > > But I've got an error, the lexer seems to get his TOKENS in the order.
> > > > > It gets the 10 like a double (the first in the list) and send an
> > > > > exception
> > > > > (exception: expecting ''.'', found '';'')
> > > > >
> > > > > I want the lexer to skip and try the next TOKEN and send an exception
> > > > > only if there isn't any solutions.
> > > > >
> > > > > Is anyone got this problem too ?
> > > > >
> > > > > Cheers,
> > > > >
> > > > > Tomy
> > > > >
> > > >
> > >
> > >
> > > --
> > > dotnet
> > >
> >
>
>
> --
> dotnet
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: n.g
Type: application/octet-stream
Size: 737 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20060727/5dc59c67/n-0001.obj
-------------- next part --------------
import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileWriter;
import java.io.IOException;

public class Main {
	public static void main (String[] args) {
		try {
			// Make sure you change the path of the file 
			DataInputStream input = new DataInputStream(new FileInputStream("E:\\ANTLR\\Examples\\Numbers\\input.txt"));
			NumLexer lexer = new NumLexer(input);
	    		NumParser parser = new NumParser(lexer);
	    		try {
	    			parser.startRule();
	    		} catch(Exception e) {}
        		} catch (FileNotFoundException e) {
        			System.out.println("Error: Cannot open file for reading");
        		  }
             } // publix static...
} // public class Main...
-------------- next part --------------
10;
1500;
0.50;
35;
7.25;
3000;

From dholenstein at gmail.com  Thu Jul 27 05:40:31 2006
From: dholenstein at gmail.com (Dominik Holenstein)
Date: Thu Jul 27 05:40:38 2006
Subject: Fwd: [antlr-interest] Lexer question (Update on Input from Dominik)
Message-ID: <8ab6a9f00607270540y4c5a2bd1g36b1ef3ee95cc33d@mail.gmail.com>

Tomy,

When using the provided code in the previous e-mail ANTLR is showing
this warning:
lexical nondeterminism between rules DOUBLE and INTEGER upon k==1:'0'..'9'

I have raised k up to 12 and this did not help. But interestingly, the
output in the console is correct.

Regards,
Dominik




---------- Forwarded message ----------
From: Dominik Holenstein <dholenstein@gmail.com>
Date: Jul 27, 2006 2:13 PM
Subject: Re: [antlr-interest] Lexer question
To: dotnet fr <dotnetfr@gmail.com>, antlr-interest@antlr.org


Tomy,
I have played around with your Lexer and Parser code and have found
this solution:


-------------------------------------------------------
ANTLR Grammar (file n.g):

class NumParser extends Parser;

startRule : (line)* ;

line      : (
                 d:DOUBLE
                 {System.out.println("Double: "+d.getText());}
                 |
                  i:INTEGER
                 {System.out.println("Integer: "+i.getText());}
                  )
                  ;


class NumLexer extends Lexer;

DOUBLE          : (('-')? ('0'..'9')+ '.' ('0'..'9')* )=> ('-')?
('0'..'9')+ '.' ('0'..'9')* | ('0'..'9')+ {$setType(INTEGER);} ;

INTEGER         : ('0'..'9')+ ;

SEMICOLON    : ';' { $setType(Token.SKIP); } ;

NEWLINE        : (('\r''\n')=> '\r''\n'
              | '\r'
              | '\n'
              ) { $setType(Token.SKIP); }
                       ;
WS                  : (' '|'\t') { $setType(Token.SKIP); } ;

---------------------------------------------------

The Java test code (Main.java):

import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileWriter;
import java.io.IOException;

public class Main {
       public static void main (String[] args) {
               try {
                       // Make sure you change the path for your input file
                       DataInputStream input = new DataInputStream(new
FileInputStream("E:\\ANTLR\\Examples\\Numbers\\input.txt"));
                       NumLexer lexer = new NumLexer(input);
               NumParser parser = new NumParser(lexer);
               try {
                       parser.startRule();
               } catch(Exception e) {}
       } catch (FileNotFoundException e) {
               System.out.println("Error: Cannot open file for reading");
       }
       }
}

--------------------------------------------------------------
Data in the input file (input.txt):
10;
1500;
0.50;
35;
7.25;
3000;

---------------------------------------------------------------

I have added all files as attachments to this e-mail.

You can set k=1 because of the semantic predicate what makes the
parser a bit faster.
The System.out... messages are for testing purposes. I can see then in
the console the output of the parser. I am working with Eclipse 3.2
and ANTLR Studio. I am not sure whether this is 'good' programming
style but it works ;-) . Inputs, feedbacks and better solutions are
welcomed.

I hope it helps!

Regards,
Dominik





On 7/27/06, dotnet fr <dotnetfr@gmail.com> wrote:
> Hi Dominik,
>
> I'm happy to meet a person like me!
> I'm a beginner with antlr and codeworker too ;)
> I'm each minute I'm learning new key. Antlr seems very powerful yeah.
> My project is to create first a class generator, structure generator
> and in final a structure (or class loader). It means I use parsing and
> generation code.
> What do you do with antlr, what is your interest in informatics ?
>
> Cheers
> Tomy
>
> 2006/7/27, Dominik Holenstein <dholenstein@gmail.com>:
> > Hi Tomy,
> > I don't know codeworker but will have a look at it.
> > ANTLR is very powerful and with v3 coming in fall it will get much better.
> > I am a beginner with Java and ANTLR so everything is 'difficult' at
> > the moment. But I am progressing and learning every day!
> > I will look at your issue this afternoon.
> >
> > Regards,
> > Dominik
> >
> >
> >
> > On 7/27/06, dotnet fr <dotnetfr@gmail.com> wrote:
> > > Hi Dominik,
> > >
> > > I have seen in the Predicated LL(k) Lexing in the ANTLR documentation
> > > witch treats about this kind of problem. It works but it's not the
> > > best solution I think ;)
> > > I thought that the antlr lexer try the first token and if it doesn't
> > > match, it go to
> > > the second etc..
> > >
> > > My parser grammar :
> > >
> > > startRule
> > >        :
> > >                nbp_debug
> > >        ;
> > >
> > > protected
> > > debug    :
> > >        (
> > >                DATE
> > >        |       DOUBLE
> > >        |       INTEGER
> > >        |       SEMICOLON
> > >        )*
> > >        ;
> > >
> > > What do you think about Antlr ? I have to do the same project with
> > > codeworker and antlr. Antlr seems more difficult to manipulate.
> > >
> > > Cheers,
> > >
> > > Tomy
> > >
> > > 2006/7/27, Dominik Holenstein <dholenstein@gmail.com>:
> > > > Tomy,
> > > >
> > > > What is you grammar in the parser?
> > > > Thanks.
> > > >
> > > > Dominik
> > > >
> > > >
> > > > On 7/27/06, dotnet fr <dotnetfr@gmail.com> wrote:
> > > > > Hi Everyone,
> > > > >
> > > > > I have a problem about the antlr lexer.
> > > > >
> > > > > In input I have :
> > > > > 10;
> > > > > 1500;
> > > > > 0.50;
> > > > >
> > > > > In my lexer I have :
> > > > > DOUBLE          : ('-')? ('0'..'9')+ '.' ('0'..'9')* ;
> > > > > INTEGER         : ('0'..'9')+ ;
> > > > > SEMICOLON       : ';' ;
> > > > >
> > > > > In my parser and lexer I have k=5.
> > > > >
> > > > > But I've got an error, the lexer seems to get his TOKENS in the order.
> > > > > It gets the 10 like a double (the first in the list) and send an
> > > > > exception
> > > > > (exception: expecting ''.'', found '';'')
> > > > >
> > > > > I want the lexer to skip and try the next TOKEN and send an exception
> > > > > only if there isn't any solutions.
> > > > >
> > > > > Is anyone got this problem too ?
> > > > >
> > > > > Cheers,
> > > > >
> > > > > Tomy
> > > > >
> > > >
> > >
> > >
> > > --
> > > dotnet
> > >
> >
>
>
> --
> dotnet
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: n.g
Type: application/octet-stream
Size: 737 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20060727/f19333f2/n.obj
-------------- next part --------------
import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileWriter;
import java.io.IOException;

public class Main {
	public static void main (String[] args) {
		try {
			// Make sure you change the path of the file 
			DataInputStream input = new DataInputStream(new FileInputStream("E:\\ANTLR\\Examples\\Numbers\\input.txt"));
			NumLexer lexer = new NumLexer(input);
	    		NumParser parser = new NumParser(lexer);
	    		try {
	    			parser.startRule();
	    		} catch(Exception e) {}
        		} catch (FileNotFoundException e) {
        			System.out.println("Error: Cannot open file for reading");
        		  }
             } // publix static...
} // public class Main...
-------------- next part --------------
10;
1500;
0.50;
35;
7.25;
3000;

From jhan at InfinityInfo.com  Thu Jul 27 05:53:08 2006
From: jhan at InfinityInfo.com (Jiho Han)
Date: Thu Jul 27 05:53:13 2006
Subject: [antlr-interest] Lexer question (Update on Input from Dominik)
Message-ID: <89ACF43E70DC0C4B812FEA71B98CE2EE1B7F14@infsrv00.InfinityInfo.com>

I was looking at ms sql grammar by Tomasz Jastrzebski (on antlr.org) and
this is what I found:

protected
Integer :;

protected
Real :; 

Number
    :
      ( (Digit)+ ('.' | 'e') ) => (Digit)+ ( '.' (Digit)* (Exponent)? |
Exponent) { _ttype = Real; }
    | '.' { _ttype = DOT; } ( (Digit)+ (Exponent)? { _ttype = Real; } )?
    | (Digit)+ { _ttype = Integer; }
    | "0x" ('a'..'f' | Digit)* { _ttype = HexLiteral; } // "0x" is valid
hex literal
    ;

k is set to 2.

I haven't tested it so I don't know.
Furthermore, since I'm a newbie, I am not even sure what the two Integer
and Real rule is supposed to do either.  What does it do?  It's empty?

Jiho

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Dominik
Holenstein
Sent: Thursday, July 27, 2006 8:41 AM
To: dotnet fr; antlr-interest@antlr.org
Subject: Fwd: [antlr-interest] Lexer question (Update on Input from
Dominik)

Tomy,

When using the provided code in the previous e-mail ANTLR is showing
this warning:
lexical nondeterminism between rules DOUBLE and INTEGER upon
k==1:'0'..'9'

I have raised k up to 12 and this did not help. But interestingly, the
output in the console is correct.

Regards,
Dominik




---------- Forwarded message ----------
From: Dominik Holenstein <dholenstein@gmail.com>
Date: Jul 27, 2006 2:13 PM
Subject: Re: [antlr-interest] Lexer question
To: dotnet fr <dotnetfr@gmail.com>, antlr-interest@antlr.org


Tomy,
I have played around with your Lexer and Parser code and have found this
solution:


-------------------------------------------------------
ANTLR Grammar (file n.g):

class NumParser extends Parser;

startRule : (line)* ;

line      : (
                 d:DOUBLE
                 {System.out.println("Double: "+d.getText());}
                 |
                  i:INTEGER
                 {System.out.println("Integer: "+i.getText());}
                  )
                  ;


class NumLexer extends Lexer;

DOUBLE          : (('-')? ('0'..'9')+ '.' ('0'..'9')* )=> ('-')?
('0'..'9')+ '.' ('0'..'9')* | ('0'..'9')+ {$setType(INTEGER);} ;

INTEGER         : ('0'..'9')+ ;

SEMICOLON    : ';' { $setType(Token.SKIP); } ;

NEWLINE        : (('\r''\n')=> '\r''\n'
              | '\r'
              | '\n'
              ) { $setType(Token.SKIP); }
                       ;
WS                  : (' '|'\t') { $setType(Token.SKIP); } ;

---------------------------------------------------

The Java test code (Main.java):

import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileWriter;
import java.io.IOException;

public class Main {
       public static void main (String[] args) {
               try {
                       // Make sure you change the path for your input
file
                       DataInputStream input = new DataInputStream(new
FileInputStream("E:\\ANTLR\\Examples\\Numbers\\input.txt"));
                       NumLexer lexer = new NumLexer(input);
               NumParser parser = new NumParser(lexer);
               try {
                       parser.startRule();
               } catch(Exception e) {}
       } catch (FileNotFoundException e) {
               System.out.println("Error: Cannot open file for
reading");
       }
       }
}

--------------------------------------------------------------
Data in the input file (input.txt):
10;
1500;
0.50;
35;
7.25;
3000;

---------------------------------------------------------------

I have added all files as attachments to this e-mail.

You can set k=1 because of the semantic predicate what makes the parser
a bit faster.
The System.out... messages are for testing purposes. I can see then in
the console the output of the parser. I am working with Eclipse 3.2 and
ANTLR Studio. I am not sure whether this is 'good' programming style but
it works ;-) . Inputs, feedbacks and better solutions are welcomed.

I hope it helps!

Regards,
Dominik





On 7/27/06, dotnet fr <dotnetfr@gmail.com> wrote:
> Hi Dominik,
>
> I'm happy to meet a person like me!
> I'm a beginner with antlr and codeworker too ;) I'm each minute I'm 
> learning new key. Antlr seems very powerful yeah.
> My project is to create first a class generator, structure generator 
> and in final a structure (or class loader). It means I use parsing and

> generation code.
> What do you do with antlr, what is your interest in informatics ?
>
> Cheers
> Tomy
>
> 2006/7/27, Dominik Holenstein <dholenstein@gmail.com>:
> > Hi Tomy,
> > I don't know codeworker but will have a look at it.
> > ANTLR is very powerful and with v3 coming in fall it will get much
better.
> > I am a beginner with Java and ANTLR so everything is 'difficult' at 
> > the moment. But I am progressing and learning every day!
> > I will look at your issue this afternoon.
> >
> > Regards,
> > Dominik
> >
> >
> >
> > On 7/27/06, dotnet fr <dotnetfr@gmail.com> wrote:
> > > Hi Dominik,
> > >
> > > I have seen in the Predicated LL(k) Lexing in the ANTLR 
> > > documentation witch treats about this kind of problem. It works 
> > > but it's not the best solution I think ;) I thought that the antlr

> > > lexer try the first token and if it doesn't match, it go to the 
> > > second etc..
> > >
> > > My parser grammar :
> > >
> > > startRule
> > >        :
> > >                nbp_debug
> > >        ;
> > >
> > > protected
> > > debug    :
> > >        (
> > >                DATE
> > >        |       DOUBLE
> > >        |       INTEGER
> > >        |       SEMICOLON
> > >        )*
> > >        ;
> > >
> > > What do you think about Antlr ? I have to do the same project with

> > > codeworker and antlr. Antlr seems more difficult to manipulate.
> > >
> > > Cheers,
> > >
> > > Tomy
> > >
> > > 2006/7/27, Dominik Holenstein <dholenstein@gmail.com>:
> > > > Tomy,
> > > >
> > > > What is you grammar in the parser?
> > > > Thanks.
> > > >
> > > > Dominik
> > > >
> > > >
> > > > On 7/27/06, dotnet fr <dotnetfr@gmail.com> wrote:
> > > > > Hi Everyone,
> > > > >
> > > > > I have a problem about the antlr lexer.
> > > > >
> > > > > In input I have :
> > > > > 10;
> > > > > 1500;
> > > > > 0.50;
> > > > >
> > > > > In my lexer I have :
> > > > > DOUBLE          : ('-')? ('0'..'9')+ '.' ('0'..'9')* ;
> > > > > INTEGER         : ('0'..'9')+ ;
> > > > > SEMICOLON       : ';' ;
> > > > >
> > > > > In my parser and lexer I have k=5.
> > > > >
> > > > > But I've got an error, the lexer seems to get his TOKENS in
the order.
> > > > > It gets the 10 like a double (the first in the list) and send 
> > > > > an exception
> > > > > (exception: expecting ''.'', found '';'')
> > > > >
> > > > > I want the lexer to skip and try the next TOKEN and send an 
> > > > > exception only if there isn't any solutions.
> > > > >
> > > > > Is anyone got this problem too ?
> > > > >
> > > > > Cheers,
> > > > >
> > > > > Tomy
> > > > >
> > > >
> > >
> > >
> > > --
> > > dotnet
> > >
> >
>
>
> --
> dotnet
>
From dotnetfr at gmail.com  Thu Jul 27 06:05:19 2006
From: dotnetfr at gmail.com (dotnet fr)
Date: Thu Jul 27 06:05:24 2006
Subject: [antlr-interest] Lexer question
In-Reply-To: <8ab6a9f00607270513v61721ffdr688890100808513c@mail.gmail.com>
References: <dcb971710607270039j4083a5fepc21eabfbc0c86109@mail.gmail.com>
	<8ab6a9f00607270145w14d29cd4s682123531f2fda06@mail.gmail.com>
	<dcb971710607270201y77dbdb02p68ae2e05e55f0e53@mail.gmail.com>
	<8ab6a9f00607270248yf4df259lfceb9b1f334dd19b@mail.gmail.com>
	<dcb971710607270253p949a248tae512840a2f88928@mail.gmail.com>
	<8ab6a9f00607270513v61721ffdr688890100808513c@mail.gmail.com>
Message-ID: <dcb971710607270605q6526de71p912caffbfe9f18a@mail.gmail.com>

Dominik,
Thank you for your solution, it works very well.
I have another one, it looks like the same ;)

In the lexer -------------------
INTORDOUBLE
	: (INTEGER '.') => DOUBLE	{ $setType(DOUBLE); }
	| INTEGER			{ $setType(INTEGER); }
	;

protected
DOUBLE		: ('-')? ('0'..'9')+ '.' ('0'..'9')* ;
protected
INTEGER		: ('0'..'9')+ ;

and in the parser ---------------------------

startRule : (line)* ;

line : DOUBLE | INTEGER;

Regards,
Tomy

2006/7/27, Dominik Holenstein <dholenstein@gmail.com>:
> Tomy,
> I have played around with your Lexer and Parser code and have found
> this solution:
>
>
> -------------------------------------------------------
> ANTLR Grammar (file n.g):
>
> class NumParser extends Parser;
>
> startRule : (line)* ;
>
> line      : (
>                  d:DOUBLE
>                  {System.out.println("Double: "+d.getText());}
>                  |
>                   i:INTEGER
>                  {System.out.println("Integer: "+i.getText());}
>                   )
>                   ;
>
>
> class NumLexer extends Lexer;
>
> DOUBLE          : (('-')? ('0'..'9')+ '.' ('0'..'9')* )=> ('-')?
> ('0'..'9')+ '.' ('0'..'9')* | ('0'..'9')+ {$setType(INTEGER);} ;
>
> INTEGER         : ('0'..'9')+ ;
>
> SEMICOLON    : ';' { $setType(Token.SKIP); } ;
>
> NEWLINE        : (('\r''\n')=> '\r''\n'
>               | '\r'
>               | '\n'
>               ) { $setType(Token.SKIP); }
>                        ;
> WS                  : (' '|'\t') { $setType(Token.SKIP); } ;
>
> ---------------------------------------------------
>
> The Java test code (Main.java):
>
> import java.io.DataInputStream;
> import java.io.FileInputStream;
> import java.io.FileNotFoundException;
> import java.io.FileWriter;
> import java.io.IOException;
>
> public class Main {
>        public static void main (String[] args) {
>                try {
>                        // Make sure you change the path for your input file
>                        DataInputStream input = new DataInputStream(new
> FileInputStream("E:\\ANTLR\\Examples\\Numbers\\input.txt"));
>                        NumLexer lexer = new NumLexer(input);
>                NumParser parser = new NumParser(lexer);
>                try {
>                        parser.startRule();
>                } catch(Exception e) {}
>        } catch (FileNotFoundException e) {
>                System.out.println("Error: Cannot open file for reading");
>        }
>        }
> }
>
> --------------------------------------------------------------
> Data in the input file (input.txt):
> 10;
> 1500;
> 0.50;
> 35;
> 7.25;
> 3000;
>
> ---------------------------------------------------------------
>
> I have added all files as attachments to this e-mail.
>
> You can set k=1 because of the semantic predicate what makes the
> parser a bit faster.
> The System.out... messages are for testing purposes. I can see then in
> the console the output of the parser. I am working with Eclipse 3.2
> and ANTLR Studio. I am not sure whether this is 'good' programming
> style but it works ;-) . Inputs, feedbacks and better solutions are
> welcomed.
>
> I hope it helps!
>
> Regards,
> Dominik
>
>
>
>
>
> On 7/27/06, dotnet fr <dotnetfr@gmail.com> wrote:
> > Hi Dominik,
> >
> > I'm happy to meet a person like me!
> > I'm a beginner with antlr and codeworker too ;)
> > I'm each minute I'm learning new key. Antlr seems very powerful yeah.
> > My project is to create first a class generator, structure generator
> > and in final a structure (or class loader). It means I use parsing and
> > generation code.
> > What do you do with antlr, what is your interest in informatics ?
> >
> > Cheers
> > Tomy
> >
> > 2006/7/27, Dominik Holenstein <dholenstein@gmail.com>:
> > > Hi Tomy,
> > > I don't know codeworker but will have a look at it.
> > > ANTLR is very powerful and with v3 coming in fall it will get much better.
> > > I am a beginner with Java and ANTLR so everything is 'difficult' at
> > > the moment. But I am progressing and learning every day!
> > > I will look at your issue this afternoon.
> > >
> > > Regards,
> > > Dominik
> > >
> > >
> > >
> > > On 7/27/06, dotnet fr <dotnetfr@gmail.com> wrote:
> > > > Hi Dominik,
> > > >
> > > > I have seen in the Predicated LL(k) Lexing in the ANTLR documentation
> > > > witch treats about this kind of problem. It works but it's not the
> > > > best solution I think ;)
> > > > I thought that the antlr lexer try the first token and if it doesn't
> > > > match, it go to
> > > > the second etc..
> > > >
> > > > My parser grammar :
> > > >
> > > > startRule
> > > >        :
> > > >                nbp_debug
> > > >        ;
> > > >
> > > > protected
> > > > debug    :
> > > >        (
> > > >                DATE
> > > >        |       DOUBLE
> > > >        |       INTEGER
> > > >        |       SEMICOLON
> > > >        )*
> > > >        ;
> > > >
> > > > What do you think about Antlr ? I have to do the same project with
> > > > codeworker and antlr. Antlr seems more difficult to manipulate.
> > > >
> > > > Cheers,
> > > >
> > > > Tomy
> > > >
> > > > 2006/7/27, Dominik Holenstein <dholenstein@gmail.com>:
> > > > > Tomy,
> > > > >
> > > > > What is you grammar in the parser?
> > > > > Thanks.
> > > > >
> > > > > Dominik
> > > > >
> > > > >
> > > > > On 7/27/06, dotnet fr <dotnetfr@gmail.com> wrote:
> > > > > > Hi Everyone,
> > > > > >
> > > > > > I have a problem about the antlr lexer.
> > > > > >
> > > > > > In input I have :
> > > > > > 10;
> > > > > > 1500;
> > > > > > 0.50;
> > > > > >
> > > > > > In my lexer I have :
> > > > > > DOUBLE          : ('-')? ('0'..'9')+ '.' ('0'..'9')* ;
> > > > > > INTEGER         : ('0'..'9')+ ;
> > > > > > SEMICOLON       : ';' ;
> > > > > >
> > > > > > In my parser and lexer I have k=5.
> > > > > >
> > > > > > But I've got an error, the lexer seems to get his TOKENS in the order.
> > > > > > It gets the 10 like a double (the first in the list) and send an
> > > > > > exception
> > > > > > (exception: expecting ''.'', found '';'')
> > > > > >
> > > > > > I want the lexer to skip and try the next TOKEN and send an exception
> > > > > > only if there isn't any solutions.
> > > > > >
> > > > > > Is anyone got this problem too ?
> > > > > >
> > > > > > Cheers,
> > > > > >
> > > > > > Tomy
> > > > > >
> > > > >
> > > >
> > > >
> > > > --
> > > > dotnet
> > > >
> > >
> >
> >
> > --
> > dotnet
> >
>
>
>


-- 
dotnet
From craig at palantir.co.za  Thu Jul 27 06:40:41 2006
From: craig at palantir.co.za (Craig Main)
Date: Thu Jul 27 06:40:50 2006
Subject: [antlr-interest] matchSetTrack.st
Message-ID: <20060727134046.923D8DD070@www.antlr.org>

Hi,

I have started working on migrating my 2.7.6 grammar to version 3.0.
I am using the 11 ea version of studio.

I get an IllegalArgumentException, cannot find template matchSetTrack.st
org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate.

My grammar, WIP

grammar RuleParser;
options {
	output = AST;
	ASTLabelType = CommonTree;
}

start		: statement+
		;
statement	: assign
		;
assign	: ID ASSIGN expression
		;
expression	: lvalue=term (operator=(PLUS|MINUS) rvalue=term)* ->
^($operator $lvalue $rvalue)
		;
term		: factor ((MULTIPLY|DIVIDE) factor)*
		;
factor	: literal
		;
literal	: ID
		| FLOAT
		;
/* tokens */
ID 		: ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
		;
ASSIGN     	: '=' ;
MULTIPLY        : '*' ;
DIVIDE          : '/' ;
PLUS            : '+' ;
MINUS           : '-' ;
DIGIT		: '0'..'9' ;
FLOAT		: (DIGIT)+ ('.' (DIGIT)*)?

Regards
Craig



From open.zone at virgin.net  Thu Jul 27 07:46:42 2006
From: open.zone at virgin.net (Micheal J)
Date: Thu Jul 27 07:28:39 2006
Subject: =?utf-8?Q?RE:_=C2=BB=C3=98=C2=B8=C2=B4=C2=A3=C2=BA_RE:_=5Bantlr-intere?=
	=?utf-8?Q?st=5D_question_about_csharp=5Fv1_example?=
In-Reply-To: <20060727120529.14949.qmail@web15710.mail.cnb.yahoo.com>
Message-ID: <000e01c6b18b$7c7a2cf0$c704a8c0@hercules>

Robert,

> Jigang (Robert) Sun
> Sent: 27 July 2006 13:05
> To: antlr-interest@antlr.org
> Subject: ??? RE: [antlr-interest] question about csharp_v1 example
>
> Anyone know how to run csharp_v1.build? It is in XML format. 

It's a Nant build file - http://nant.sourceforge.net/

Grab Nant 0.85 rc3 or rc4 (or even a nightly build if you are adventurous).

Once you've installed Nant, just type "nant" from the csharp_v1 directory.

Cheers!

Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.

From open.zone at virgin.net  Thu Jul 27 07:54:00 2006
From: open.zone at virgin.net (Micheal J)
Date: Thu Jul 27 07:35:53 2006
Subject: [antlr-interest] Lexer question (Update on Input from Dominik)
In-Reply-To: <89ACF43E70DC0C4B812FEA71B98CE2EE1B7F14@infsrv00.InfinityInfo.com>
Message-ID: <000f01c6b18c$81b66570$c704a8c0@hercules>

> I was looking at ms sql grammar by Tomasz Jastrzebski (on 
> antlr.org) and this is what I found:
> 
> protected
> Integer :;
> 
> protected
> Real :; 
> 
> Number
>     :
>       ( (Digit)+ ('.' | 'e') ) => (Digit)+ ( '.' (Digit)* 
> (Exponent)? |
> Exponent) { _ttype = Real; }
>     | '.' { _ttype = DOT; } ( (Digit)+ (Exponent)? { _ttype = 
> Real; } )?
>     | (Digit)+ { _ttype = Integer; }
>     | "0x" ('a'..'f' | Digit)* { _ttype = HexLiteral; } // 
> "0x" is valid hex literal
>     ;
> 
> k is set to 2.
> 
> I haven't tested it so I don't know.
> Furthermore, since I'm a newbie, I am not even sure what the 
> two Integer and Real rule is supposed to do either.  What 
> does it do?  It's empty?
> 
> Jiho

Interger/Real:
--------------

I'm guessing that the author is trying to define those token types. He
should have used a tokens block e.g.
	tokens
	{
		INTEGER;
		REAL;
		......
	}


Examples of lexing numbers:
---------------------------

The KCSParse/csharp_v1 grammar has a more extensive set of rules for dealing
with numeric tokens.

Find it in the examples/csharp directory of a 2.7.6 distro or on the web
site in file sharing.


Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.

From sunjigang1965 at yahoo.com.cn  Thu Jul 27 07:38:20 2006
From: sunjigang1965 at yahoo.com.cn (=?gb2312?q?=CB=EF=BC=CD=B8=D5=20Jigang=20(Robert)=20Sun?=)
Date: Thu Jul 27 07:38:39 2006
Subject: =?gb2312?q?=BB=D8=B8=B4=A3=BA=20RE:=20=C2=BB=C3=98=C2=B8=C2=B4=C2=A3=C2?=
	=?gb2312?q?=BA=20RE:=20[antlr-interest]=20question=20about=20csharp=5Fv1=20?=
	=?gb2312?q?example?=
In-Reply-To: <000e01c6b18b$7c7a2cf0$c704a8c0@hercules>
Message-ID: <20060727143820.67483.qmail@web15710.mail.cnb.yahoo.com>

Hi, 
I downloaded NAnt, but I got error--

D:\antlr-2.7.6\examples\csharp\csharp_v1>nant
NAnt 0.85 (Build 0.85.2344.0; rc4; 2006-6-2)
Copyright (C) 2001-2006 Gerry Shaw
http://nant.sourceforge.net

Buildfile: file:///D:/antlr-2.7.6/examples/csharp/csharp_v1/csharp_v1.build
Target framework: Microsoft .NET Framework 2.0
Target(s) specified: test

   [tstamp] 2006727 15:33:05.
     [echo] Building project: 'CSharp v1 Grammar Sample for ANTLR'

generate:

     [exec] java.lang.NoClassDefFoundError: antlr/Tool
     [exec] Exception in thread "main"

BUILD FAILED - 0 non-fatal error(s), 2 warning(s)

D:\antlr-2.7.6\examples\csharp\csharp_v1\csharp_v1.build(52,10):
External Program Failed: java.exe (return code was 1)

Total time: 1.5 seconds.


In csharp_v1.build, I also replaced "antlr.Tool" with "antlr.jar antlr.Tool ", it ends the same.

Jigang


--- Micheal J <open.zone@virgin.net>:

> Robert,
> 
> > Jigang (Robert) Sun
> > Sent: 27 July 2006 13:05
> > To: antlr-interest@antlr.org
> > Subject:  RE: [antlr-interest] question about csharp_v1 example
> >
> > Anyone know how to run csharp_v1.build? It is in XML format. 
> 
> It's a Nant build file - http://nant.sourceforge.net/
> 
> Grab Nant 0.85 rc3 or rc4 (or even a nightly build if you are adventurous).
> 
> Once you've installed Nant, just type "nant" from the csharp_v1 directory.
> 
> Cheers!
> 
> Micheal
> 
> -----------------------
> The best way to contact me is via the list/forum. My time is very limited.
> 
> 



		
___________________________________________________________ 
-3.5G20M 
http://cn.mail.yahoo.com
From open.zone at virgin.net  Thu Jul 27 07:59:49 2006
From: open.zone at virgin.net (Micheal J)
Date: Thu Jul 27 07:41:37 2006
Subject: [antlr-interest] Lexer question
In-Reply-To: <dcb971710607270605q6526de71p912caffbfe9f18a@mail.gmail.com>
Message-ID: <001001c6b18d$4fa200c0$c704a8c0@hercules>

Hi,

> Thank you for your solution, it works very well.
> I have another one, it looks like the same ;)
> 
> In the lexer -------------------
> INTORDOUBLE
> 	: (INTEGER '.') => DOUBLE	{ $setType(DOUBLE); }
> 	| INTEGER			{ $setType(INTEGER); }
> 	;

Syntactic predicates (e.g. "(INTEGER '.') => DOUBLE" ) are expensive as they
can involve guessing/backtracking. Particularly bad in a lexer.

See how the KCSParse/csharp_v1 sample lexes numeric tokens. No synpreds
iirc.


Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.

From jhan at InfinityInfo.com  Thu Jul 27 07:45:50 2006
From: jhan at InfinityInfo.com (Jiho Han)
Date: Thu Jul 27 07:45:53 2006
Subject: [antlr-interest] Lexer question (Update on Input from Dominik)
Message-ID: <89ACF43E70DC0C4B812FEA71B98CE2EE1B7F19@infsrv00.InfinityInfo.com>

Perhaps, I don't understand what tokens section does.

Is

tokens
{
    AND = "and";
}

different from,

AND: "and";

?  And what is an imaginary token?  I read the meta language document
but I can't seem to grasp them.

And what does,

tokens
{
    INTEGER :;
}

really mean?  There is the token defined but it doesn't represent
anything?

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Micheal J
Sent: Thursday, July 27, 2006 10:54 AM
To: antlr-interest@antlr.org
Subject: RE: [antlr-interest] Lexer question (Update on Input from
Dominik)

> I was looking at ms sql grammar by Tomasz Jastrzebski (on
> antlr.org) and this is what I found:
> 
> protected
> Integer :;
> 
> protected
> Real :;
> 
> Number
>     :
>       ( (Digit)+ ('.' | 'e') ) => (Digit)+ ( '.' (Digit)* (Exponent)? 
> |
> Exponent) { _ttype = Real; }
>     | '.' { _ttype = DOT; } ( (Digit)+ (Exponent)? { _ttype = Real; } 
> )?
>     | (Digit)+ { _ttype = Integer; }
>     | "0x" ('a'..'f' | Digit)* { _ttype = HexLiteral; } // "0x" is 
> valid hex literal
>     ;
> 
> k is set to 2.
> 
> I haven't tested it so I don't know.
> Furthermore, since I'm a newbie, I am not even sure what the two 
> Integer and Real rule is supposed to do either.  What does it do?  
> It's empty?
> 
> Jiho

Interger/Real:
--------------

I'm guessing that the author is trying to define those token types. He
should have used a tokens block e.g.
	tokens
	{
		INTEGER;
		REAL;
		......
	}


Examples of lexing numbers:
---------------------------

The KCSParse/csharp_v1 grammar has a more extensive set of rules for
dealing with numeric tokens.

Find it in the examples/csharp directory of a 2.7.6 distro or on the web
site in file sharing.


Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very
limited.

From greg at onvoq.com  Thu Jul 27 07:57:25 2006
From: greg at onvoq.com (Greg Clemenson)
Date: Thu Jul 27 07:57:30 2006
Subject: [antlr-interest] Lexer question
In-Reply-To: <dcb971710607270605q6526de71p912caffbfe9f18a@mail.gmail.com>
References: <dcb971710607270039j4083a5fepc21eabfbc0c86109@mail.gmail.com>
	<8ab6a9f00607270145w14d29cd4s682123531f2fda06@mail.gmail.com>
	<dcb971710607270201y77dbdb02p68ae2e05e55f0e53@mail.gmail.com>
	<8ab6a9f00607270248yf4df259lfceb9b1f334dd19b@mail.gmail.com>
	<dcb971710607270253p949a248tae512840a2f88928@mail.gmail.com>
	<8ab6a9f00607270513v61721ffdr688890100808513c@mail.gmail.com>
	<dcb971710607270605q6526de71p912caffbfe9f18a@mail.gmail.com>
Message-ID: <9050B03C-747B-49B5-AA33-1B519621249B@onvoq.com>

Tomy,

I would try something like this:

In the Lexer:

INTEGER: ('0'..'9')+;

In the parser:

integer: INTEGER;
double: INTEGER '.'  (INTEGER)?;

Or to be a bit fancier, try this:

integer	:  ('-')? INTEGER;
double	:  ('-')? INTEGER '.'  (INTEGER)?
		|  ('-')? '.' INTEGER
		;


The advantage of this approach is that it only requires 1 level of  
lookahead (k=1) and no semantic rules, so the lexer can do its work  
in a single pass over the input characters.

More generally, if multiple rules begin with a non-trivial  
overlapping definition, you are better off to create a separate rule  
to recognize just the overlapping part, and rewriting the original  
rules to begin with the overlap rule.  In this case, the overlapping  
part was the INTEGER definition.

Greg

On Jul 27, 2006, at 6:05 AM, dotnet fr wrote:

> Dominik,
> Thank you for your solution, it works very well.
> I have another one, it looks like the same ;)
>
> In the lexer -------------------
> INTORDOUBLE
> 	: (INTEGER '.') => DOUBLE	{ $setType(DOUBLE); }
> 	| INTEGER			{ $setType(INTEGER); }
> 	;
>
> protected
> DOUBLE		: ('-')? ('0'..'9')+ '.' ('0'..'9')* ;
> protected
> INTEGER		: ('0'..'9')+ ;
>
> and in the parser ---------------------------
>
> startRule : (line)* ;
>
> line : DOUBLE | INTEGER;
>
> Regards,
> Tomy
>
> 2006/7/27, Dominik Holenstein <dholenstein@gmail.com>:
>> Tomy,
>> I have played around with your Lexer and Parser code and have found
>> this solution:
>>
>>
>> -------------------------------------------------------
>> ANTLR Grammar (file n.g):
>>
>> class NumParser extends Parser;
>>
>> startRule : (line)* ;
>>
>> line      : (
>>                  d:DOUBLE
>>                  {System.out.println("Double: "+d.getText());}
>>                  |
>>                   i:INTEGER
>>                  {System.out.println("Integer: "+i.getText());}
>>                   )
>>                   ;
>>
>>
>> class NumLexer extends Lexer;
>>
>> DOUBLE          : (('-')? ('0'..'9')+ '.' ('0'..'9')* )=> ('-')?
>> ('0'..'9')+ '.' ('0'..'9')* | ('0'..'9')+ {$setType(INTEGER);} ;
>>
>> INTEGER         : ('0'..'9')+ ;
>>
>> SEMICOLON    : ';' { $setType(Token.SKIP); } ;
>>
>> NEWLINE        : (('\r''\n')=> '\r''\n'
>>               | '\r'
>>               | '\n'
>>               ) { $setType(Token.SKIP); }
>>                        ;
>> WS                  : (' '|'\t') { $setType(Token.SKIP); } ;
>>
>> ---------------------------------------------------
>>
>> The Java test code (Main.java):
>>
>> import java.io.DataInputStream;
>> import java.io.FileInputStream;
>> import java.io.FileNotFoundException;
>> import java.io.FileWriter;
>> import java.io.IOException;
>>
>> public class Main {
>>        public static void main (String[] args) {
>>                try {
>>                        // Make sure you change the path for your  
>> input file
>>                        DataInputStream input = new DataInputStream 
>> (new
>> FileInputStream("E:\\ANTLR\\Examples\\Numbers\\input.txt"));
>>                        NumLexer lexer = new NumLexer(input);
>>                NumParser parser = new NumParser(lexer);
>>                try {
>>                        parser.startRule();
>>                } catch(Exception e) {}
>>        } catch (FileNotFoundException e) {
>>                System.out.println("Error: Cannot open file for  
>> reading");
>>        }
>>        }
>> }
>>
>> --------------------------------------------------------------
>> Data in the input file (input.txt):
>> 10;
>> 1500;
>> 0.50;
>> 35;
>> 7.25;
>> 3000;
>>
>> ---------------------------------------------------------------
>>
>> I have added all files as attachments to this e-mail.
>>
>> You can set k=1 because of the semantic predicate what makes the
>> parser a bit faster.
>> The System.out... messages are for testing purposes. I can see  
>> then in
>> the console the output of the parser. I am working with Eclipse 3.2
>> and ANTLR Studio. I am not sure whether this is 'good' programming
>> style but it works ;-) . Inputs, feedbacks and better solutions are
>> welcomed.
>>
>> I hope it helps!
>>
>> Regards,
>> Dominik
>>
>>
>>
>>
>>
>> On 7/27/06, dotnet fr <dotnetfr@gmail.com> wrote:
>> > Hi Dominik,
>> >
>> > I'm happy to meet a person like me!
>> > I'm a beginner with antlr and codeworker too ;)
>> > I'm each minute I'm learning new key. Antlr seems very powerful  
>> yeah.
>> > My project is to create first a class generator, structure  
>> generator
>> > and in final a structure (or class loader). It means I use  
>> parsing and
>> > generation code.
>> > What do you do with antlr, what is your interest in informatics ?
>> >
>> > Cheers
>> > Tomy
>> >
>> > 2006/7/27, Dominik Holenstein <dholenstein@gmail.com>:
>> > > Hi Tomy,
>> > > I don't know codeworker but will have a look at it.
>> > > ANTLR is very powerful and with v3 coming in fall it will get  
>> much better.
>> > > I am a beginner with Java and ANTLR so everything is  
>> 'difficult' at
>> > > the moment. But I am progressing and learning every day!
>> > > I will look at your issue this afternoon.
>> > >
>> > > Regards,
>> > > Dominik
>> > >
>> > >
>> > >
>> > > On 7/27/06, dotnet fr <dotnetfr@gmail.com> wrote:
>> > > > Hi Dominik,
>> > > >
>> > > > I have seen in the Predicated LL(k) Lexing in the ANTLR  
>> documentation
>> > > > witch treats about this kind of problem. It works but it's  
>> not the
>> > > > best solution I think ;)
>> > > > I thought that the antlr lexer try the first token and if it  
>> doesn't
>> > > > match, it go to
>> > > > the second etc..
>> > > >
>> > > > My parser grammar :
>> > > >
>> > > > startRule
>> > > >        :
>> > > >                nbp_debug
>> > > >        ;
>> > > >
>> > > > protected
>> > > > debug    :
>> > > >        (
>> > > >                DATE
>> > > >        |       DOUBLE
>> > > >        |       INTEGER
>> > > >        |       SEMICOLON
>> > > >        )*
>> > > >        ;
>> > > >
>> > > > What do you think about Antlr ? I have to do the same  
>> project with
>> > > > codeworker and antlr. Antlr seems more difficult to manipulate.
>> > > >
>> > > > Cheers,
>> > > >
>> > > > Tomy
>> > > >
>> > > > 2006/7/27, Dominik Holenstein <dholenstein@gmail.com>:
>> > > > > Tomy,
>> > > > >
>> > > > > What is you grammar in the parser?
>> > > > > Thanks.
>> > > > >
>> > > > > Dominik
>> > > > >
>> > > > >
>> > > > > On 7/27/06, dotnet fr <dotnetfr@gmail.com> wrote:
>> > > > > > Hi Everyone,
>> > > > > >
>> > > > > > I have a problem about the antlr lexer.
>> > > > > >
>> > > > > > In input I have :
>> > > > > > 10;
>> > > > > > 1500;
>> > > > > > 0.50;
>> > > > > >
>> > > > > > In my lexer I have :
>> > > > > > DOUBLE          : ('-')? ('0'..'9')+ '.' ('0'..'9')* ;
>> > > > > > INTEGER         : ('0'..'9')+ ;
>> > > > > > SEMICOLON       : ';' ;
>> > > > > >
>> > > > > > In my parser and lexer I have k=5.
>> > > > > >
>> > > > > > But I've got an error, the lexer seems to get his TOKENS  
>> in the order.
>> > > > > > It gets the 10 like a double (the first in the list) and  
>> send an
>> > > > > > exception
>> > > > > > (exception: expecting ''.'', found '';'')
>> > > > > >
>> > > > > > I want the lexer to skip and try the next TOKEN and send  
>> an exception
>> > > > > > only if there isn't any solutions.
>> > > > > >
>> > > > > > Is anyone got this problem too ?
>> > > > > >
>> > > > > > Cheers,
>> > > > > >
>> > > > > > Tomy
>> > > > > >
>> > > > >
>> > > >
>> > > >
>> > > > --
>> > > > dotnet
>> > > >
>> > >
>> >
>> >
>> > --
>> > dotnet
>> >
>>
>>
>>
>
>
> -- 
> dotnet
>

From open.zone at virgin.net  Thu Jul 27 08:16:13 2006
From: open.zone at virgin.net (Micheal J)
Date: Thu Jul 27 07:58:04 2006
Subject: =?utf-8?Q?RE:_=C2=BB=C3=98=C2=B8=C2=B4=C2=A3=C2=BA_RE:_=5Bantlr-intere?=
	=?utf-8?Q?st=5D_question_about_csharp=5Fv1_example?=
In-Reply-To: <20060727143820.67483.qmail@web15710.mail.cnb.yahoo.com>
Message-ID: <001101c6b18f$9c717a00$c704a8c0@hercules>

Robert,

> Hi, 
> I downloaded NAnt, but I got error--
> 
> D:\antlr-2.7.6\examples\csharp\csharp_v1>nant
> NAnt 0.85 (Build 0.85.2344.0; rc4; 2006-6-2)
> Copyright (C) 2001-2006 Gerry Shaw
> http://nant.sourceforge.net
> 
> Buildfile: 
> file:///D:/antlr-2.7.6/examples/csharp/csharp_v1/csharp_v1.build
> Target framework: Microsoft .NET Framework 2.0
> Target(s) specified: test
> 
>    [tstamp] 2006?7?27? 15:33:05.
>      [echo] Building project: 'CSharp v1 Grammar Sample for ANTLR'
> 
> generate:
> 
>      [exec] java.lang.NoClassDefFoundError: antlr/Tool
>      [exec] Exception in thread "main"

This says "I couldn't find the Tool.class file in D:\antlr-2.7.6\antlr"

You should build antlr itself first.


If you can't (or won't) build antlr, make the following changes to the *original* csharp_v1.build

1. Find this line:
	    <property name="antlr.dir" value="..\..\.."/>

  Add the following below it:
	    <property name="antlr.cp" value="..\..\..\antlr.jar"/>


2. Find this line:
    <target name="generate" description="calls ANTLR to generate Lexers/Parsers">    	

   Change all occurences of ${antlr.dir} IN THIS TARGET ONLY (i.e. between <target ..> and the closing </target>) to:
	${antlr.cp}

This changes basically say, "use the version of the antlr .class files found in antlr.jar". Consequently. any changes you've made to your local copy of the antlr tool's sources would not be reflected here obviously.

> In csharp_v1.build, I also replaced "antlr.Tool" with 
> "antlr.jar antlr.Tool ", it ends the same.

Don't do this  ;-)

Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.

From open.zone at virgin.net  Thu Jul 27 08:20:30 2006
From: open.zone at virgin.net (Micheal J)
Date: Thu Jul 27 08:02:19 2006
Subject: [antlr-interest] Lexer question
In-Reply-To: <9050B03C-747B-49B5-AA33-1B519621249B@onvoq.com>
Message-ID: <001201c6b190$349cb510$c704a8c0@hercules>

Hi,

> Tomy,
> 
> I would try something like this:
> 
> In the Lexer:
> 
> INTEGER: ('0'..'9')+;
> 
> In the parser:
> 
> integer: INTEGER;
> double: INTEGER '.'  (INTEGER)?;

This allows whitespace around the '.' such as "1 .0" and "1. 0" and "1
.     0"

You really want the lexer to break your input alphabet into tokens.


Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.

From jbb at acm.org  Thu Jul 27 08:17:08 2006
From: jbb at acm.org (John B. Brodie)
Date: Thu Jul 27 08:17:15 2006
Subject: [antlr-interest] Lexer question
In-Reply-To: <9050B03C-747B-49B5-AA33-1B519621249B@onvoq.com> (message from
	Greg Clemenson on Thu, 27 Jul 2006 07:57:25 -0700)
References: <dcb971710607270039j4083a5fepc21eabfbc0c86109@mail.gmail.com>
	<8ab6a9f00607270145w14d29cd4s682123531f2fda06@mail.gmail.com>
	<dcb971710607270201y77dbdb02p68ae2e05e55f0e53@mail.gmail.com>
	<8ab6a9f00607270248yf4df259lfceb9b1f334dd19b@mail.gmail.com>
	<dcb971710607270253p949a248tae512840a2f88928@mail.gmail.com>
	<8ab6a9f00607270513v61721ffdr688890100808513c@mail.gmail.com>
	<dcb971710607270605q6526de71p912caffbfe9f18a@mail.gmail.com>
	<9050B03C-747B-49B5-AA33-1B519621249B@onvoq.com>
Message-ID: <E1G67bo-0002y2-00@gecko>

>I would try something like this:
>
>In the Lexer:
>
>INTEGER: ('0'..'9')+;
>
>In the parser:
>
>integer: INTEGER;
>double: INTEGER '.'  (INTEGER)?;
>
>Or to be a bit fancier, try this:
>...snipped...

Unfortunately doing this in the parser will permit embedded whitespace in
the double.

That is, assuming whitespace is $setType(SKIP) in the lexer, `1 . 2` is now
a valid double - or perhaps even worse:

1



// a comment



.

is also valid (again assuming the lexer is SKIP'ing whitespace and comments).
From sunjigang1965 at yahoo.com.cn  Thu Jul 27 08:28:42 2006
From: sunjigang1965 at yahoo.com.cn (=?gb2312?q?=CB=EF=BC=CD=B8=D5=20Jigang=20(Robert)=20Sun?=)
Date: Thu Jul 27 08:28:49 2006
Subject: =?gb2312?q?=BB=D8=B8=B4=A3=BA=20RE:=20=C2=BB=C3=98=C2=B8=C2=B4=C2=A3=C2?=
	=?gb2312?q?=BA=20RE:=20[antlr-interest]=20question=20about=20csharp=5Fv1=20?=
	=?gb2312?q?example?=
In-Reply-To: <001101c6b18f$9c717a00$c704a8c0@hercules>
Message-ID: <20060727152842.32690.qmail@web15703.mail.cnb.yahoo.com>

Hi Micheal,

I made the two changes as showed on attached file. The run screen is --

D:\antlr-2.7.6\examples\csharp\csharp_v1>nant
NAnt 0.85 (Build 0.85.2344.0; rc4; 2006-6-2)
Copyright (C) 2001-2006 Gerry Shaw
http://nant.sourceforge.net

Buildfile: file:///D:/antlr-2.7.6/examples/csharp/csharp_v1/csharp_v1.build
Target framework: Microsoft .NET Framework 2.0
Target(s) specified: test

   [tstamp] 2006727 16:21:30.
     [echo] Building project: 'CSharp v1 Grammar Sample for ANTLR'

generate:

     [exec] java.lang.NoClassDefFoundError: antlr/jar
     [exec] Exception in thread "main"

BUILD FAILED - 0 non-fatal error(s), 2 warning(s)

D:\antlr-2.7.6\examples\csharp\csharp_v1\csharp_v1.build(52,10):
External Program Failed: java.exe (return code was 1)

Total time: 1.1 seconds.

It seems to be the same.

Thanks.

Jigang

--- Micheal J <open.zone@virgin.net>:

> Robert,
> 
> > Hi, 
> > I downloaded NAnt, but I got error--
> > 
> > D:\antlr-2.7.6\examples\csharp\csharp_v1>nant
> > NAnt 0.85 (Build 0.85.2344.0; rc4; 2006-6-2)
> > Copyright (C) 2001-2006 Gerry Shaw
> > http://nant.sourceforge.net
> > 
> > Buildfile: 
> > file:///D:/antlr-2.7.6/examples/csharp/csharp_v1/csharp_v1.build
> > Target framework: Microsoft .NET Framework 2.0
> > Target(s) specified: test
> > 
> >    [tstamp] 2006727 15:33:05.
> >      [echo] Building project: 'CSharp v1 Grammar Sample for ANTLR'
> > 
> > generate:
> > 
> >      [exec] java.lang.NoClassDefFoundError: antlr/Tool
> >      [exec] Exception in thread "main"
> 
> This says "I couldn't find the Tool.class file in D:\antlr-2.7.6\antlr"
> 
> You should build antlr itself first.
> 
> 
> If you can't (or won't) build antlr, make the following changes to the *original*
> csharp_v1.build
> 
> 1. Find this line:
> 	    <property name="antlr.dir" value="..\..\.."/>
> 
>   Add the following below it:
> 	    <property name="antlr.cp" value="..\..\..\antlr.jar"/>
> 
> 
> 2. Find this line:
>     <target name="generate" description="calls ANTLR to generate Lexers/Parsers">    	
> 
>    Change all occurences of ${antlr.dir} IN THIS TARGET ONLY (i.e. between <target ..> and the
> closing </target>) to:
> 	${antlr.cp}
> 
> This changes basically say, "use the version of the antlr .class files found in antlr.jar".
> Consequently. any changes you've made to your local copy of the antlr tool's sources would not
> be reflected here obviously.
> 
> > In csharp_v1.build, I also replaced "antlr.Tool" with 
> > "antlr.jar antlr.Tool ", it ends the same.
> 
> Don't do this  ;-)
> 
> Micheal
> 
> -----------------------
> The best way to contact me is via the list/forum. My time is very limited.
> 
> 


		
___________________________________________________________ 
-3.5G20M 
http://cn.mail.yahoo.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: csharp_v1.build
Type: application/octet-stream
Size: 5819 bytes
Desc: pat454868658
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20060727/f0e31814/csharp_v1.obj
From open.zone at virgin.net  Thu Jul 27 09:04:39 2006
From: open.zone at virgin.net (Micheal J)
Date: Thu Jul 27 08:46:32 2006
Subject: =?iso-8859-1?B?UkU6ILvYuLSjuiBSRTogwrvDfsK4wrTCo8K6IFJFOiBbYW50bHItaW50?=
	=?iso-8859-1?B?ZXJlc3RdIHF1ZXN0aW9uIGFib3V0IGNzaGFycF92MSBleGFtcGxl?=
In-Reply-To: <20060727152842.32690.qmail@web15703.mail.cnb.yahoo.com>
Message-ID: <001901c6b196$5f4e5e20$c704a8c0@hercules>

Robert,

>      [exec] java.lang.NoClassDefFoundError: antlr/jar
>      [exec] Exception in thread "main"

I specifically mentioned that the change should be applied to the *original*
build file ;-)

Change this line in your attached build:
        <exec program="java.exe" commandline="-cp ${antlr.cp} antlr.jar
UnicodeLexerBase.g" failonerror="true"/>
To:
        <exec program="java.exe" commandline="-cp ${antlr.cp} antlr.Tool
UnicodeLexerBase.g" failonerror="true"/>

There may be other changes that you've made in your *.build file, I haven't
checked. If in doubt, start from the *original* build file ;-)


Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.

From dotnetfr at gmail.com  Thu Jul 27 09:04:31 2006
From: dotnetfr at gmail.com (dotnet fr)
Date: Thu Jul 27 09:04:35 2006
Subject: [antlr-interest] Lexer question
In-Reply-To: <9050B03C-747B-49B5-AA33-1B519621249B@onvoq.com>
References: <dcb971710607270039j4083a5fepc21eabfbc0c86109@mail.gmail.com>
	<8ab6a9f00607270145w14d29cd4s682123531f2fda06@mail.gmail.com>
	<dcb971710607270201y77dbdb02p68ae2e05e55f0e53@mail.gmail.com>
	<8ab6a9f00607270248yf4df259lfceb9b1f334dd19b@mail.gmail.com>
	<dcb971710607270253p949a248tae512840a2f88928@mail.gmail.com>
	<8ab6a9f00607270513v61721ffdr688890100808513c@mail.gmail.com>
	<dcb971710607270605q6526de71p912caffbfe9f18a@mail.gmail.com>
	<9050B03C-747B-49B5-AA33-1B519621249B@onvoq.com>
Message-ID: <dcb971710607270904s6f75ee5ej330b39526af7edb3@mail.gmail.com>

Greg,

It's good too.
But when I generate the AST, the double isn't like a block.
For example : 10.5
I will have :
kid : 10
sib : .
sib : 5
I would like to have 10.5 directly.

I'm a beginner with ANTLR, perhaps there is a solution to have a block
with your solution.

Cheers,

Tomy

2006/7/27, Greg Clemenson <greg@onvoq.com>:
> Tomy,
>
> I would try something like this:
>
> In the Lexer:
>
> INTEGER: ('0'..'9')+;
>
> In the parser:
>
> integer: INTEGER;
> double: INTEGER '.'  (INTEGER)?;
>
> Or to be a bit fancier, try this:
>
> integer :  ('-')? INTEGER;
> double  :  ('-')? INTEGER '.'  (INTEGER)?
>                |  ('-')? '.' INTEGER
>                ;
>
>
> The advantage of this approach is that it only requires 1 level of
> lookahead (k=1) and no semantic rules, so the lexer can do its work
> in a single pass over the input characters.
>
> More generally, if multiple rules begin with a non-trivial
> overlapping definition, you are better off to create a separate rule
> to recognize just the overlapping part, and rewriting the original
> rules to begin with the overlap rule.  In this case, the overlapping
> part was the INTEGER definition.
>
> Greg
>
> On Jul 27, 2006, at 6:05 AM, dotnet fr wrote:
>
> > Dominik,
> > Thank you for your solution, it works very well.
> > I have another one, it looks like the same ;)
> >
> > In the lexer -------------------
> > INTORDOUBLE
> >       : (INTEGER '.') => DOUBLE       { $setType(DOUBLE); }
> >       | INTEGER                       { $setType(INTEGER); }
> >       ;
> >
> > protected
> > DOUBLE                : ('-')? ('0'..'9')+ '.' ('0'..'9')* ;
> > protected
> > INTEGER               : ('0'..'9')+ ;
> >
> > and in the parser ---------------------------
> >
> > startRule : (line)* ;
> >
> > line : DOUBLE | INTEGER;
> >
> > Regards,
> > Tomy
> >
> > 2006/7/27, Dominik Holenstein <dholenstein@gmail.com>:
> >> Tomy,
> >> I have played around with your Lexer and Parser code and have found
> >> this solution:
> >>
> >>
> >> -------------------------------------------------------
> >> ANTLR Grammar (file n.g):
> >>
> >> class NumParser extends Parser;
> >>
> >> startRule : (line)* ;
> >>
> >> line      : (
> >>                  d:DOUBLE
> >>                  {System.out.println("Double: "+d.getText());}
> >>                  |
> >>                   i:INTEGER
> >>                  {System.out.println("Integer: "+i.getText());}
> >>                   )
> >>                   ;
> >>
> >>
> >> class NumLexer extends Lexer;
> >>
> >> DOUBLE          : (('-')? ('0'..'9')+ '.' ('0'..'9')* )=> ('-')?
> >> ('0'..'9')+ '.' ('0'..'9')* | ('0'..'9')+ {$setType(INTEGER);} ;
> >>
> >> INTEGER         : ('0'..'9')+ ;
> >>
> >> SEMICOLON    : ';' { $setType(Token.SKIP); } ;
> >>
> >> NEWLINE        : (('\r''\n')=> '\r''\n'
> >>               | '\r'
> >>               | '\n'
> >>               ) { $setType(Token.SKIP); }
> >>                        ;
> >> WS                  : (' '|'\t') { $setType(Token.SKIP); } ;
> >>
> >> ---------------------------------------------------
> >>
> >> The Java test code (Main.java):
> >>
> >> import java.io.DataInputStream;
> >> import java.io.FileInputStream;
> >> import java.io.FileNotFoundException;
> >> import java.io.FileWriter;
> >> import java.io.IOException;
> >>
> >> public class Main {
> >>        public static void main (String[] args) {
> >>                try {
> >>                        // Make sure you change the path for your
> >> input file
> >>                        DataInputStream input = new DataInputStream
> >> (new
> >> FileInputStream("E:\\ANTLR\\Examples\\Numbers\\input.txt"));
> >>                        NumLexer lexer = new NumLexer(input);
> >>                NumParser parser = new NumParser(lexer);
> >>                try {
> >>                        parser.startRule();
> >>                } catch(Exception e) {}
> >>        } catch (FileNotFoundException e) {
> >>                System.out.println("Error: Cannot open file for
> >> reading");
> >>        }
> >>        }
> >> }
> >>
> >> --------------------------------------------------------------
> >> Data in the input file (input.txt):
> >> 10;
> >> 1500;
> >> 0.50;
> >> 35;
> >> 7.25;
> >> 3000;
> >>
> >> ---------------------------------------------------------------
> >>
> >> I have added all files as attachments to this e-mail.
> >>
> >> You can set k=1 because of the semantic predicate what makes the
> >> parser a bit faster.
> >> The System.out... messages are for testing purposes. I can see
> >> then in
> >> the console the output of the parser. I am working with Eclipse 3.2
> >> and ANTLR Studio. I am not sure whether this is 'good' programming
> >> style but it works ;-) . Inputs, feedbacks and better solutions are
> >> welcomed.
> >>
> >> I hope it helps!
> >>
> >> Regards,
> >> Dominik
> >>
> >>
> >>
> >>
> >>
> >> On 7/27/06, dotnet fr <dotnetfr@gmail.com> wrote:
> >> > Hi Dominik,
> >> >
> >> > I'm happy to meet a person like me!
> >> > I'm a beginner with antlr and codeworker too ;)
> >> > I'm each minute I'm learning new key. Antlr seems very powerful
> >> yeah.
> >> > My project is to create first a class generator, structure
> >> generator
> >> > and in final a structure (or class loader). It means I use
> >> parsing and
> >> > generation code.
> >> > What do you do with antlr, what is your interest in informatics ?
> >> >
> >> > Cheers
> >> > Tomy
> >> >
> >> > 2006/7/27, Dominik Holenstein <dholenstein@gmail.com>:
> >> > > Hi Tomy,
> >> > > I don't know codeworker but will have a look at it.
> >> > > ANTLR is very powerful and with v3 coming in fall it will get
> >> much better.
> >> > > I am a beginner with Java and ANTLR so everything is
> >> 'difficult' at
> >> > > the moment. But I am progressing and learning every day!
> >> > > I will look at your issue this afternoon.
> >> > >
> >> > > Regards,
> >> > > Dominik
> >> > >
> >> > >
> >> > >
> >> > > On 7/27/06, dotnet fr <dotnetfr@gmail.com> wrote:
> >> > > > Hi Dominik,
> >> > > >
> >> > > > I have seen in the Predicated LL(k) Lexing in the ANTLR
> >> documentation
> >> > > > witch treats about this kind of problem. It works but it's
> >> not the
> >> > > > best solution I think ;)
> >> > > > I thought that the antlr lexer try the first token and if it
> >> doesn't
> >> > > > match, it go to
> >> > > > the second etc..
> >> > > >
> >> > > > My parser grammar :
> >> > > >
> >> > > > startRule
> >> > > >        :
> >> > > >                nbp_debug
> >> > > >        ;
> >> > > >
> >> > > > protected
> >> > > > debug    :
> >> > > >        (
> >> > > >                DATE
> >> > > >        |       DOUBLE
> >> > > >        |       INTEGER
> >> > > >        |       SEMICOLON
> >> > > >        )*
> >> > > >        ;
> >> > > >
> >> > > > What do you think about Antlr ? I have to do the same
> >> project with
> >> > > > codeworker and antlr. Antlr seems more difficult to manipulate.
> >> > > >
> >> > > > Cheers,
> >> > > >
> >> > > > Tomy
> >> > > >
> >> > > > 2006/7/27, Dominik Holenstein <dholenstein@gmail.com>:
> >> > > > > Tomy,
> >> > > > >
> >> > > > > What is you grammar in the parser?
> >> > > > > Thanks.
> >> > > > >
> >> > > > > Dominik
> >> > > > >
> >> > > > >
> >> > > > > On 7/27/06, dotnet fr <dotnetfr@gmail.com> wrote:
> >> > > > > > Hi Everyone,
> >> > > > > >
> >> > > > > > I have a problem about the antlr lexer.
> >> > > > > >
> >> > > > > > In input I have :
> >> > > > > > 10;
> >> > > > > > 1500;
> >> > > > > > 0.50;
> >> > > > > >
> >> > > > > > In my lexer I have :
> >> > > > > > DOUBLE          : ('-')? ('0'..'9')+ '.' ('0'..'9')* ;
> >> > > > > > INTEGER         : ('0'..'9')+ ;
> >> > > > > > SEMICOLON       : ';' ;
> >> > > > > >
> >> > > > > > In my parser and lexer I have k=5.
> >> > > > > >
> >> > > > > > But I've got an error, the lexer seems to get his TOKENS
> >> in the order.
> >> > > > > > It gets the 10 like a double (the first in the list) and
> >> send an
> >> > > > > > exception
> >> > > > > > (exception: expecting ''.'', found '';'')
> >> > > > > >
> >> > > > > > I want the lexer to skip and try the next TOKEN and send
> >> an exception
> >> > > > > > only if there isn't any solutions.
> >> > > > > >
> >> > > > > > Is anyone got this problem too ?
> >> > > > > >
> >> > > > > > Cheers,
> >> > > > > >
> >> > > > > > Tomy
> >> > > > > >
> >> > > > >
> >> > > >
> >> > > >
> >> > > > --
> >> > > > dotnet
> >> > > >
> >> > >
> >> >
> >> >
> >> > --
> >> > dotnet
> >> >
> >>
> >>
> >>
> >
> >
> > --
> > dotnet
> >
>
>


-- 
dotnet
From open.zone at virgin.net  Thu Jul 27 09:30:45 2006
From: open.zone at virgin.net (Micheal J)
Date: Thu Jul 27 09:12:38 2006
Subject: [antlr-interest] Lexer question
In-Reply-To: <dcb971710607270904s6f75ee5ej330b39526af7edb3@mail.gmail.com>
Message-ID: <001a01c6b19a$03be2230$c704a8c0@hercules>

> It's good too.
> But when I generate the AST, the double isn't like a block.
> For example : 10.5
> I will have :
> kid : 10
> sib : .
> sib : 5
> I would like to have 10.5 directly.
> 
> I'm a beginner with ANTLR, perhaps there is a solution to 
> have a block with your solution.

The lexer is responsible for breaking your input into tokens. It's not a
parser's job. Do it in the lexer.


Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.

From james_cataldo at agilent.com  Thu Jul 27 09:22:25 2006
From: james_cataldo at agilent.com (james_cataldo@agilent.com)
Date: Thu Jul 27 09:22:30 2006
Subject: [antlr-interest] RE: Thanks for Your Help and question
Message-ID: <6F94DB018DCB9E4AB34E7FE503AF2B16858C57@wcosmb05.cos.agilent.com>

On second thought, this is about how to walk trees using a tree parsrers.  Building trees is very simple.  It's in the doc's on 

http://www.antlr.org/doc/metalang.html#_bb4 

under the heading  "Production Element Operators".  To build a tree, 


1) add 

> buidAST = true; 

to the options section of your parser.

2) For any token/rule that should serve as a root of a subtree, add 
'^'.  Example:

> add :
>   NUM PLUS^ NUM
> ;

gives you the tree

#(PLUS NUM NUM), or equivalently 

    PLUS
   /    \
NUM      NUM

3) For any token/rule you want to ignore, add '!'.  Example:

> command :
>  ID^ LPARENTHESIS! (ID (COMMA! ID)*)? RPARENTHESIS!
>

gives you

#(ID ID ... ID)

where the root of this tree is the first ID.

I hope this helps.

Cheers,
Adam

-----Original Message-----
From: Naveed Riaz [mailto:nriaz@ist.tugraz.at] 
Sent: Thursday, July 27, 2006 5:43 AM
To: james_cataldo@agilent.com
Subject: Thanks for Your Help and question

Dear james Cataldo...
Thank You very much for your help on antlr-interest ...
I hope you dont mind contacting on your personal email address.
Actually my problem is that i dont think that there is complete reference on antlr website that how a text parser grammar like provided in the antlr website for verilog can be transformed in to the tree parsing grammar.  How do i have to annotate that grammar and what kind of rules i should have in mind before the conversions.
I shall be really thank ful if you can guide me in this aspect....
Best of Regards...

From parrt at cs.usfca.edu  Thu Jul 27 09:56:50 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Jul 27 09:56:55 2006
Subject: [antlr-interest] matchSetTrack.st
In-Reply-To: <20060727134046.923D8DD070@www.antlr.org>
References: <20060727134046.923D8DD070@www.antlr.org>
Message-ID: <90A24861-DC8E-4D6E-B395-81F2B5AC5D14@cs.usfca.edu>


On Jul 27, 2006, at 6:40 AM, Craig Main wrote:

Hi, i think operator=(PLUS|MINUS)  is the issue.  Can u try putting  
the label on each of the alts?

Ter


From oliver.zeigermann at gmail.com  Thu Jul 27 01:56:14 2006
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Thu Jul 27 11:39:29 2006
Subject: [antlr-interest] ANTLR3.0b2 - rule STRING uses rewrite syntax or
	operator with no output option
In-Reply-To: <C842031E-59D6-4E49-A549-F9D9802B1DE5@cs.usfca.edu>
References: <28156803.1153238267505.JavaMail.www@wwinf1512>
	<C842031E-59D6-4E49-A549-F9D9802B1DE5@cs.usfca.edu>
Message-ID: <9da4f4520607270156u15fdc8f5m36aef2921e4d99d2@mail.gmail.com>

2006/7/20, Terence Parr <parrt@cs.usfca.edu>:
>
> On Jul 18, 2006, at 8:57 AM, David CROSSON wrote:
>
> > I got a grammar  with this rule :
> > ...
> > options {
> >     filter=true;
> >     output=AST;
> > }
> > ...
> > STRING : '"'! (~'"')* '"'! ;
> > ...
> >
> > Using latest release of ANTLR I now got this error :
> > "jrockit.g:246:13: rule STRING uses rewrite syntax or operator with
> > no output option"
> > I'm using the ! operator elsewhere without any problem but within a
> > lexer rule I got this strange
> > errormessage, no error with ea8.
>
> Wow!  Oh, that's a lexer rule with ! in it.  Illegal.  Remove and it
> should work.

But what about the effect David wanted to have, namely strip the
quotes from the lexer token. How to achieve that? Is it possible to
send single charactes to a different (e.g. 99) channel?

Oliver
From parrt at cs.usfca.edu  Thu Jul 27 12:04:45 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Jul 27 12:04:50 2006
Subject: [antlr-interest] ANTLR3.0b2 - rule STRING uses rewrite syntax or
	operator with no output option
In-Reply-To: <9da4f4520607270156u15fdc8f5m36aef2921e4d99d2@mail.gmail.com>
References: <28156803.1153238267505.JavaMail.www@wwinf1512>
	<C842031E-59D6-4E49-A549-F9D9802B1DE5@cs.usfca.edu>
	<9da4f4520607270156u15fdc8f5m36aef2921e4d99d2@mail.gmail.com>
Message-ID: <E1838779-6E5E-4199-A157-F3EB190C86BD@cs.usfca.edu>

On Jul 27, 2006, at 1:56 AM, Oliver Zeigermann wrote:
>> Wow!  Oh, that's a lexer rule with ! in it.  Illegal.  Remove and it
>> should work.
>
> But what about the effect David wanted to have, namely strip the
> quotes from the lexer token. How to achieve that? Is it possible to
> send single charactes to a different (e.g. 99) channel?

There was a very big discussion on this earlier.   I decided to  
require an action to deal with this :)
Ter


From lgcraymer at yahoo.com  Thu Jul 27 15:16:35 2006
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Thu Jul 27 15:16:39 2006
Subject: [antlr-interest] ANTLR3.0b2 - rule STRING uses rewrite syntax or
	operator with no output option
In-Reply-To: <E1838779-6E5E-4199-A157-F3EB190C86BD@cs.usfca.edu>
Message-ID: <20060727221635.21994.qmail@web55913.mail.re3.yahoo.com>

Oliver--

Yggdrasil will support that sort of thing, but probably not until 0.6.  I have done a first cut at "copy on write" lexer text editing support (necessary to maintain lexing speed), but have to do some work with the lexer library classes.

I should note that the change in the underlying model for lexed text for ANTLR 3 should make for much faster lexers.  It does mean, though, that it takes a little more effort to implement efficient text editing.

--Loring



 __________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060727/90481241/attachment.html
From parrt at cs.usfca.edu  Thu Jul 27 16:59:36 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Jul 27 16:59:40 2006
Subject: [antlr-interest] completed todo and bug list
Message-ID: <DE35FF2C-C9B9-4996-B968-563ED3693132@cs.usfca.edu>

http://www.antlr.org/wiki/display/ANTLR3/ANTLR+v3+To+Do+List

you can search through now to see if something has been reported  
already.

Ter
From jbb at acm.org  Thu Jul 27 18:09:28 2006
From: jbb at acm.org (John B. Brodie)
Date: Thu Jul 27 18:09:35 2006
Subject: [antlr-interest] Antlr v3 -- Lexing '..' and '1.'
Message-ID: <E1G6Gr2-0000xY-00@gecko>

Greetings!

I am trying to construct a lexer under Antlr v3 that will recognize a
RANGE (e.g. '..') operator, FLOAT (e.g. 1.) numbers, and some other stuff.

Here is what I have so far:

//------------------------- begin cut here ---------------------------

grammar Test;

test : .+ EOF ;

DOT : '.' ;
RANGE : '..' ;
ELLIPSIS : '...' ;

NATURAL : UINT ;

FLOAT :
        ( UINT ('.' ~'.') => ('.' UINT? EXPONENT?) ) /*1*/
    |   ( UINT EXPONENT )
    |   ( '.' UINT EXPONENT? )
    ;

fragment EXPONENT : ( 'e' | 'E' ) ( '+' | '-' )? UINT ;

fragment DIGIT_10 : '0'..'9' ;
fragment UINT : DIGIT_10+ ;



// Whitespace -- ignored
WS	:	(	' '
		|	'\t'
		|	'\f'
		|	( '\r' | '\n' ) // handle newlines
		)+
		{ channel=99; }
	;

//------------------------- end cut here -----------------------------

My problems center around (i think) the line I have labeled /*1*/ above.

I want to recognize a '.' inside a FLOAT if and only if that '.' is not
followed by another '.'

I think the syntactic predicate in /*1*/ does that.

Antlr v3 ignores the predicate.

Can you help me fix this?

(also attached below is a rather tooooo long Java test driver)

This is very similar to a problem in Pascal. Has the v2 Pascal grammar
been ported to v3 yet? If so, just point me to it.

Also I think I saw on the Mantra website that Mantra also is meant to have
floats and a RANGE operator, but I could not find any handling of RANGE in
the grammar contained in the Mantra source tar-ball.

I must have missed something here, please point me in the proper direction.

Thanks in advance!
   -jbb

TestDriver.java follows...
//------------------------- begin cut here ---------------------------
import java.io.*;
import java.util.*;

import org.antlr.runtime.*;

public class TestDriver {
   
   private static class Pair {
      public String input;
      public int[] expected;
      public Pair(String i, int[]e) {
         input = i;
         expected = e;
      }
   }

   private static final Pair[] x = {
      new Pair("1",new int[]{Test.NATURAL}),
      new Pair(".",new int[]{Test.DOT}),
      new Pair("..",new int[]{Test.RANGE}),
      new Pair("...",new int[]{Test.ELLIPSIS}),
      new Pair(".0",new int[]{Test.FLOAT}),
      new Pair(".0e+0",new int[]{Test.FLOAT}),
      new Pair("1.0",new int[]{Test.FLOAT}),
      new Pair("1.",new int[]{Test.FLOAT}),
      new Pair("1.0",new int[]{Test.FLOAT}),
      new Pair("1.0e+0",new int[]{Test.FLOAT}),
      new Pair("1e1",new int[]{Test.FLOAT}),
      new Pair("1e+1",new int[]{Test.FLOAT}),
      new Pair("1e-1",new int[]{Test.FLOAT}),
      new Pair("1 . 2",new int[]{Test.NATURAL,
                                 Test.WS,
                                 Test.DOT,
                                 Test.WS,
                                 Test.NATURAL}),
      new Pair("1 .. 2",new int[]{Test.NATURAL,
                                  Test.WS,
                                  Test.RANGE,
                                  Test.WS,
                                  Test.NATURAL}),
      new Pair("1 ... 2",new int[]{Test.NATURAL,
                                   Test.WS,
                                   Test.ELLIPSIS,
                                   Test.WS,
                                   Test.NATURAL}),
      new Pair("1. . 2.",new int[]{Test.FLOAT,
                                   Test.WS,
                                   Test.DOT,
                                   Test.WS,
                                   Test.FLOAT}),
      new Pair("1. .. 2.",new int[]{Test.FLOAT,
                                    Test.WS,
                                    Test.RANGE,
                                    Test.WS,
                                    Test.FLOAT}),
      new Pair("1. ... 2.",new int[]{Test.FLOAT,
                                     Test.WS,
                                     Test.ELLIPSIS,
                                     Test.WS,
                                     Test.FLOAT}),
      new Pair("1.1 . 2.2",new int[]{Test.FLOAT,
                                     Test.WS,
                                     Test.DOT,
                                     Test.WS,
                                     Test.FLOAT}),
      new Pair("1.1 .. 2.2",new int[]{Test.FLOAT,
                                      Test.WS,
                                      Test.RANGE,
                                      Test.WS,
                                      Test.FLOAT}),
      new Pair("1.1 ... 2.2",new int[]{Test.FLOAT,
                                       Test.WS,
                                       Test.ELLIPSIS,
                                       Test.WS,
                                       Test.FLOAT}),
      new Pair("1.",new int[]{Test.FLOAT}),
      new Pair("1..",new int[]{Test.NATURAL,Test.RANGE}),
      new Pair("1...",new int[]{Test.NATURAL,Test.ELLIPSIS}),
      new Pair("1.2",new int[]{Test.FLOAT}),
      new Pair("1..2",new int[]{Test.NATURAL,
                                Test.RANGE,
                                Test.NATURAL}),
      new Pair("1...2",new int[]{Test.NATURAL,
                                 Test.ELLIPSIS,
                                 Test.NATURAL})
   };

   public static void main(String[] args) {
      for(int i = 0; i < x.length; ++i) {
         try {
            System.out.format("testing `%s`: ",x[i].input);
            boolean success = true;

            CommonTokenStream tokens = new CommonTokenStream
               (new TestLexer
                (new ANTLRStringStream(x[i].input)));

            List l = tokens.getTokens();
            if( l.size() == x[i].expected.length ) {
               for(int j = 0; j < x[i].expected.length; ++j) {
                  Token t = (Token)l.get(j);
                  if (t.getType() != x[i].expected[j]) {
                     success = false;
                     System.out.format("token number %s, %s should be %s; ",
                                       j,
                                       Test.tokenNames[t.getType()],
                                       Test.tokenNames[x[i].expected[j]]);
                  }
               }
            } else {
               success = false;
               System.out.format("...wrong number of tokens:%s should be %s; ",
                                 l.size(),x[i].expected.length);
            }
            if (success) {
               System.out.format("OK%n");
            } else {
               System.out.format("FAIL: ");
               if( l.size() == 0 ) {
                  System.out.format("no tokens found!%n");
               } else {
                  Token t = (Token)l.get(0);
                  System.out.format("([%s,%s]",
                                    Test.tokenNames[t.getType()],
                                    t.getText());
                  for(int j = 1; j < l.size(); ++j) {
                     t = (Token)l.get(j);
                     System.out.format(", [%s,%s]",
                                       Test.tokenNames[t.getType()],
                                       t.getText());
                  }
                  System.out.format(")%n");
               }
            }
         } catch(Exception e) {
            System.out.println("exception: "+e);
         }
      }
   }
}
//------------------------- end cut here -----------------------------

From parrt at cs.usfca.edu  Thu Jul 27 18:42:34 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Jul 27 18:42:39 2006
Subject: [antlr-interest] Antlr v3 -- Lexing '..' and '1.'
In-Reply-To: <E1G6Gr2-0000xY-00@gecko>
References: <E1G6Gr2-0000xY-00@gecko>
Message-ID: <29AFB5E1-233F-43D9-9043-ABAD2718624D@cs.usfca.edu>


On Jul 27, 2006, at 6:09 PM, John B. Brodie wrote:

> Greetings!
>
> I am trying to construct a lexer under Antlr v3 that will recognize a
> RANGE (e.g. '..') operator, FLOAT (e.g. 1.) numbers, and some other  
> stuff.

Hi. Nice analysis.  My intended solution was simply to allow you to  
emit more than one token per lexer rule. :)  So, when you are in  
FLOAT and see a following '.' then just emit INT DOT DOT with three  
emit() calls.  ANTLR will know you have emitted a token and will not  
auto-emit. :)

Ter

From lgcraymer at yahoo.com  Thu Jul 27 19:20:25 2006
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Thu Jul 27 19:20:31 2006
Subject: [antlr-interest] Antlr v3 -- Lexing '..' and '1.'
In-Reply-To: <29AFB5E1-233F-43D9-9043-ABAD2718624D@cs.usfca.edu>
Message-ID: <20060728022025.18342.qmail@web55910.mail.re3.yahoo.com>

Ter--

Not supported as of b3.  Lexer.token is single-valued; it needs to be an array to support multiple emits.  The three emits would only result in returning the last DOT.

--Loring

Terence Parr <parrt@cs.usfca.edu> wrote: 
On Jul 27, 2006, at 6:09 PM, John B. Brodie wrote:

> Greetings!
>
> I am trying to construct a lexer under Antlr v3 that will recognize a
> RANGE (e.g. '..') operator, FLOAT (e.g. 1.) numbers, and some other  
> stuff.

Hi. Nice analysis.  My intended solution was simply to allow you to  
emit more than one token per lexer rule. :)  So, when you are in  
FLOAT and see a following '.' then just emit INT DOT DOT with three  
emit() calls.  ANTLR will know you have emitted a token and will not  
auto-emit. :)

Ter



 		
---------------------------------
Do you Yahoo!?
 Get on board. You're invited to try the new Yahoo! Mail Beta.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060727/454b806b/attachment.html
From parrt at cs.usfca.edu  Thu Jul 27 19:28:33 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Jul 27 19:28:39 2006
Subject: [antlr-interest] Antlr v3 -- Lexing '..' and '1.'
In-Reply-To: <20060728022025.18342.qmail@web55910.mail.re3.yahoo.com>
References: <20060728022025.18342.qmail@web55910.mail.re3.yahoo.com>
Message-ID: <D0BA349D-75AA-478F-9157-BFFE45C7CBE9@cs.usfca.edu>


On Jul 27, 2006, at 7:20 PM, Loring Craymer wrote:

> Ter--
>
> Not supported as of b3.  Lexer.token is single-valued; it needs to  
> be an array to support multiple emits.  The three emits would only  
> result in returning the last DOT.
>

Oh right...you have to subclass to make that a list and then override  
nextToken to pull from list not Token.  Sorry...I should make that  
little class sometime :)

Ter

From lgcraymer at yahoo.com  Thu Jul 27 19:33:43 2006
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Thu Jul 27 19:33:45 2006
Subject: [antlr-interest] Antlr v3 -- Lexing '..' and '1.'
In-Reply-To: <D0BA349D-75AA-478F-9157-BFFE45C7CBE9@cs.usfca.edu>
Message-ID: <20060728023343.31208.qmail@web55912.mail.re3.yahoo.com>

You might also want to make that change to support backtracking--discarding and rebuilding tokens is a needless expense.

--Loring

Terence Parr <parrt@cs.usfca.edu> wrote: 
On Jul 27, 2006, at 7:20 PM, Loring Craymer wrote:

> Ter--
>
> Not supported as of b3.  Lexer.token is single-valued; it needs to  
> be an array to support multiple emits.  The three emits would only  
> result in returning the last DOT.
>

Oh right...you have to subclass to make that a list and then override  
nextToken to pull from list not Token.  Sorry...I should make that  
little class sometime :)

Ter



 		
---------------------------------
Do you Yahoo!?
 Next-gen email? Have it all with the  all-new Yahoo! Mail Beta.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060727/860cedda/attachment.html
From anup_sankaran at yahoo.com  Thu Jul 27 21:25:39 2006
From: anup_sankaran at yahoo.com (Anup Shankar)
Date: Thu Jul 27 21:25:46 2006
Subject: [antlr-interest] Fwd: antlr-interest Digest, Vol 20, Issue 46
Message-ID: <20060728042539.90341.qmail@web53504.mail.yahoo.com>

Hi,
   
  Can someone help me out here, it's bit urgent...
   
  Thanks,
  Anup


Message: 6
Date: Thu, 27 Jul 2006 03:33:56 -0700 (PDT)
From: Anup Shankar 
Subject: [antlr-interest] A Grammar Issue..
To: antlr-interest@antlr.org
Message-ID: <20060727103356.51354.qmail@web53506.mail.yahoo.com>
Content-Type: text/plain; charset="iso-8859-1"

Hi,

Iam trying to come up with a simple grammar, which can parse commands the given to it.

The below is the abstract grammar file::
----------------------------------------------------------------------------------------------------------------------------
options {
language="Cpp";
}
class ftpParser extends Parser;
options {
genHashLines = true; // include line number information
k =5;
}
cmd: openCmd 

openCmd: open SPACE (hostname)+ EOL;
hostname: ( SPLCHAR | STRING);
open: "open";


class ftpLexer extends Lexer;
options {
k=2;
charVocabulary = '\3'..'\377';
caseSensitive=false;
}
EOL :
( "\r\n"
| '\n'
| '\r'
) 
;
STRING :( 'a'..'z' |'0'..'9' | ','..'/'
)
;

SPLCHAR: ('$'..'+' | '['..'_' );

----------------------------------------------------------------------------------------------------------------------

The invocation code is 
--------------------------------
istringstream input_string;
istream *input=NULL;

input_string.str( "open server1.net");
input = &input_string;
ftpLexer lexer(*input);
ftpParser parser(lexer);
parser.cmd();

SwithStmt
--------------
void ftpParser::cmd() {

try { // for error handling
switch ( LA(1)) {
case LITERAL_open:
{
openCmd();
break;
}

}
Here iam facing problems, where the comparision of the literal in this case "open" is not succeeding, in the Switch case stmt..


Could any of you help me out in this issue.



Thanks,
Anup




 		
---------------------------------
Yahoo! Music Unlimited - Access over 1 million songs.Try it free. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060727/dbf1b76e/attachment-0001.html
From open.zone at virgin.net  Thu Jul 27 23:24:00 2006
From: open.zone at virgin.net (Micheal J)
Date: Thu Jul 27 23:27:01 2006
Subject: [antlr-interest] completed todo and bug list
In-Reply-To: <DE35FF2C-C9B9-4996-B968-563ED3693132@cs.usfca.edu>
Message-ID: <004501c6b20e$6aa67d20$c704a8c0@hercules>

> 
> http://www.antlr.org/wiki/display/ANTLR3/ANTLR+v3+To+Do+List
> 
> you can search through now to see if something has been reported  
> already.
> 
> Ter

Looks like you need Jira too - http://www.atlassian.com/software/jira/.  ;-)

Seriously. It has Perforce integration although I have no idea if all this
is available under on OSS license.
- http://confluence.atlassian.com/display/JIRAEXT/JIRA+Perforce+Plugin


Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.

From open.zone at virgin.net  Thu Jul 27 23:24:00 2006
From: open.zone at virgin.net (Micheal J)
Date: Thu Jul 27 23:27:02 2006
Subject: [antlr-interest] A Grammar Issue..
In-Reply-To: <20060727103356.51354.qmail@web53506.mail.yahoo.com>
Message-ID: <004601c6b20e$6b57cbc0$c704a8c0@hercules>

Hi,
 
Basic comments: You need to use the "tokens" option to specify "open" and,
you also need to set the option "testLiterals" on your STRING lexer rule.
 
See the ANTLR docs.
 
 
Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Anup Shankar
Sent: 27 July 2006 11:34
To: antlr-interest@antlr.org
Subject: [antlr-interest] A Grammar Issue..


Hi,
 
Iam trying to come up with a simple grammar, which can parse commands the
given to it.
 
The below is the abstract grammar file::
----------------------------------------------------------------------------
------------------------------------------------

options {
language="Cpp";
}
class ftpParser extends Parser;
options {
genHashLines = true; // include line number information
k =5;
}
cmd: openCmd 
 

openCmd: open SPACE (hostname)+ EOL;

hostname: ( SPLCHAR | STRING);

open: "open";

 
 
class ftpLexer extends Lexer;
options {
k=2;
charVocabulary = '\3'..'\377';
caseSensitive=false;
}
EOL :
( "\r\n"
| '\n'
| '\r'
) 
;

STRING :( 'a'..'z' |'0'..'9' | ','..'/'
)
;
 
SPLCHAR: ('$'..'+' | '['..'_' );
 
----------------------------------------------------------------------------
------------------------------------------
 
The invocation code is 
--------------------------------

istringstream input_string;
istream *input=NULL;

 
input_string.str( "open server1.net");
input = &input_string;
ftpLexer lexer(*input);
ftpParser parser(lexer);
parser.cmd();
 
SwithStmt
--------------
void ftpParser::cmd() {
try { // for error handling

switch ( LA(1)) {
case LITERAL_open:
{
openCmd();
break;
}
 
}
Here iam facing problems, where the comparision of the literal in this case
"open" is not succeeding, in the Switch case stmt..
 
 
Could any of you help me out in this issue.
 
 
 
Thanks,
Anup



  _____  

Talk is cheap. Use Yahoo! Messenger to make PC-to-Phone calls. Great
<http://us.rd.yahoo.com/mail_us/taglines/postman7/*http://us.rd.yahoo.com/ev
t=39666/*http://messenger.yahoo.com> rates starting at 1?/min.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060728/36fc6b79/attachment.html
From open.zone at virgin.net  Thu Jul 27 23:15:40 2006
From: open.zone at virgin.net (Micheal J)
Date: Fri Jul 28 01:02:17 2006
Subject: [antlr-interest] A Grammar Issue..
In-Reply-To: <20060727103356.51354.qmail@web53506.mail.yahoo.com>
Message-ID: <004001c6b20d$40ff7400$c704a8c0@hercules>

Hi,
 
Basic comments: You need to use the "tokens" option to specify "open" and,
you also need to set the option "testLiterals" on your STRING lexer rule.
 
See the ANTLR docs.
 
 
Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Anup Shankar
Sent: 27 July 2006 11:34
To: antlr-interest@antlr.org
Subject: [antlr-interest] A Grammar Issue..


Hi,
 
Iam trying to come up with a simple grammar, which can parse commands the
given to it.
 
The below is the abstract grammar file::
----------------------------------------------------------------------------
------------------------------------------------

options {
language="Cpp";
}
class ftpParser extends Parser;
options {
genHashLines = true; // include line number information
k =5;
}
cmd: openCmd 
 

openCmd: open SPACE (hostname)+ EOL;

hostname: ( SPLCHAR | STRING);

open: "open";

 
 
class ftpLexer extends Lexer;
options {
k=2;
charVocabulary = '\3'..'\377';
caseSensitive=false;
}
EOL :
( "\r\n"
| '\n'
| '\r'
) 
;

STRING :( 'a'..'z' |'0'..'9' | ','..'/'
)
;
 
SPLCHAR: ('$'..'+' | '['..'_' );
 
----------------------------------------------------------------------------
------------------------------------------
 
The invocation code is 
--------------------------------

istringstream input_string;
istream *input=NULL;

 
input_string.str( "open server1.net");
input = &input_string;
ftpLexer lexer(*input);
ftpParser parser(lexer);
parser.cmd();
 
SwithStmt
--------------
void ftpParser::cmd() {
try { // for error handling

switch ( LA(1)) {
case LITERAL_open:
{
openCmd();
break;
}
 
}
Here iam facing problems, where the comparision of the literal in this case
"open" is not succeeding, in the Switch case stmt..
 
 
Could any of you help me out in this issue.
 
 
 
Thanks,
Anup



  _____  

Talk is cheap. Use Yahoo! Messenger to make PC-to-Phone calls. Great
<http://us.rd.yahoo.com/mail_us/taglines/postman7/*http://us.rd.yahoo.com/ev
t=39666/*http://messenger.yahoo.com> rates starting at 1?/min.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060728/0368e503/attachment.html
From T.Heiber at pilz.de  Fri Jul 28 01:02:22 2006
From: T.Heiber at pilz.de (Timo Heiber)
Date: Fri Jul 28 01:02:33 2006
Subject: [antlr-interest] Abwesenheitsnachricht / Out-of-Office Reply
Message-ID: <OFD174513A.1F211686-ONC12571B9.002C29C5-C12571B9.002C29C5@pilz.de>


Ich werde ab  28.07.2006 nicht im B?ro sein. Ich kehre zur?ck am
31.07.2006.

I am out of the office on July 28th. I am going to reply to your e-mail
when I return.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060728/0f6fd3a9/attachment.html
From craig at palantir.co.za  Fri Jul 28 01:54:56 2006
From: craig at palantir.co.za (Craig Main)
Date: Fri Jul 28 01:55:07 2006
Subject: [antlr-interest] matchSetTrack.st
In-Reply-To: <20060727134046.923D8DD070@www.antlr.org>
Message-ID: <20060728085503.3AD00DCD20@www.antlr.org>

Hi Terrence,

You are correct.

 operator=(PLUS|MINUS) // Produces a rather nasty exception message!
 (operator=PLUS|operator=MINUS) // works fine.

Is it something that should be fixed?

Also, I have this niggling feeling that I am approaching the grammar below
in the 'old' way and not in the 'new' way.

Are you going to provide a simple expression parser that uses all the
version 3.0 features for us to work from (and admire). If not, you could
possibly give me a few pointers. I am sure there are lots of people in the
list, who would benefit from the help. My little example is quite indicative
of parsing.

Cheers
Regards
Craig

Changing it to 

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Craig Main
Sent: 27 July 2006 15:41
To: 'Antlr Interest'
Subject: [antlr-interest] matchSetTrack.st

Hi,

I have started working on migrating my 2.7.6 grammar to version 3.0.
I am using the 11 ea version of studio.

I get an IllegalArgumentException, cannot find template matchSetTrack.st
org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate.

My grammar, WIP

grammar RuleParser;
options {
	output = AST;
	ASTLabelType = CommonTree;
}

start		: statement+
		;
statement	: assign
		;
assign	: ID ASSIGN expression
		;
expression	: lvalue=term (operator=(PLUS|MINUS) rvalue=term)* ->
^($operator $lvalue $rvalue)
		;
term		: factor ((MULTIPLY|DIVIDE) factor)*
		;
factor	: literal
		;
literal	: ID
		| FLOAT
		;
/* tokens */
ID 		: ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
		;
ASSIGN     	: '=' ;
MULTIPLY        : '*' ;
DIVIDE          : '/' ;
PLUS            : '+' ;
MINUS           : '-' ;
DIGIT		: '0'..'9' ;
FLOAT		: (DIGIT)+ ('.' (DIGIT)*)?

Regards
Craig





From dotnetfr at gmail.com  Fri Jul 28 07:02:21 2006
From: dotnetfr at gmail.com (dotnet fr)
Date: Fri Jul 28 07:02:26 2006
Subject: [antlr-interest] Code generation output in C++
Message-ID: <dcb971710607280702i4bb677f7te7a87b9500494b24@mail.gmail.com>

Hi Everyone,

I'm looking to generate output code in c++.
I've found StringTemplate but it's only available in .net and java.
Is there an equivalent in c++ ?

Cheers

Tomy
From jsamort at gmail.com  Fri Jul 28 08:02:33 2006
From: jsamort at gmail.com (Scott Amort)
Date: Fri Jul 28 08:02:40 2006
Subject: [antlr-interest] Fwd: antlr-interest Digest, Vol 20, Issue 46
In-Reply-To: <20060728042539.90341.qmail@web53504.mail.yahoo.com>
References: <20060728042539.90341.qmail@web53504.mail.yahoo.com>
Message-ID: <44CA2709.8020905@gmail.com>

Hi Anup,

Anup Shankar wrote:
> The invocation code is 
> --------------------------------
> istringstream input_string;
> istream *input=NULL;
> 
> input_string.str( "open server1.net");
> input = &input_string;
> ftpLexer lexer(*input);
> ftpParser parser(lexer);
> parser.cmd();
> 
> SwithStmt
> --------------
> void ftpParser::cmd() {
> 
> try { // for error handling
> switch ( LA(1)) {
> case LITERAL_open:
> {
> openCmd();
> break;
> }
> 
> }
> Here iam facing problems, where the comparision of the literal in this case "open" is not succeeding, in the Switch case stmt..

What is the actual error message?  How do you know the switch is not
succeeding?

Best,
Scott
From mark.venbrux at gmail.com  Fri Jul 28 08:06:55 2006
From: mark.venbrux at gmail.com (Mark Venbrux)
Date: Fri Jul 28 08:06:58 2006
Subject: [antlr-interest] include files in V3
Message-ID: <fa6015a20607280806q5934cbc0i7597c9cf7d330628@mail.gmail.com>

Hi,
Quick question:
Is there an example of parsing included files already?

If there is not, I'm willing to create an example, with usage of the right
pointers though ;)

Cheers,
  Mark
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060728/e2776923/attachment.html
From jsamort at gmail.com  Fri Jul 28 08:11:57 2006
From: jsamort at gmail.com (Scott Amort)
Date: Fri Jul 28 08:12:02 2006
Subject: [antlr-interest] Code generation output in C++
In-Reply-To: <dcb971710607280702i4bb677f7te7a87b9500494b24@mail.gmail.com>
References: <dcb971710607280702i4bb677f7te7a87b9500494b24@mail.gmail.com>
Message-ID: <44CA293D.6090006@gmail.com>

Hi,

dotnet fr wrote:
> I'm looking to generate output code in c++.

Do you just need ANTLR to output C++?  This is already possible in 2.7.6
(and will be available in v3).

> I've found StringTemplate but it's only available in .net and java.
> Is there an equivalent in c++ ?

There was some discussion about this just recently on the list.  I am
also interested in a C++ port of StringTemplate, and have been
investigating the possibility.  There are some tricky bits (reflection),
but I think it should be possible.  I can't guarantee a timeline, but
I'll let the list know when/if I can get something working.

Best,
Scott
From swalton at cs.utah.edu  Fri Jul 28 09:31:48 2006
From: swalton at cs.utah.edu (Sean Walton)
Date: Fri Jul 28 09:31:51 2006
Subject: [antlr-interest] AST rewriting
Message-ID: <44CA3BF4.8020809@cs.utah.edu>

I have poring over the documentation and trying to figure out how to do 
AST rewriting.  I finally figured out how to use "^" to emit a parent 
node.  But I would like to create a parent node so that an implied 
declaration (like a C method) can be flagged appropriately.  This is the 
kind of thing that I would like to get from the source:

    Source:
         int* fn(char c, long l);

    Grammar:
         method: retval ID LPAREN! (params)? RPAREN! SEMI!;
         params: param (COMMA! param)*;
         param: retval ID

    AST:
         (METHOD REVAL(int *) fn PARAMS(PARAM(REVAL(char), c) 
PARAM(RETVAL(long), l)))

-Sean
From parrt at cs.usfca.edu  Fri Jul 28 10:35:51 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Jul 28 10:35:55 2006
Subject: [antlr-interest] include files in V3
In-Reply-To: <fa6015a20607280806q5934cbc0i7597c9cf7d330628@mail.gmail.com>
References: <fa6015a20607280806q5934cbc0i7597c9cf7d330628@mail.gmail.com>
Message-ID: <1BA1E8F0-83F4-44C6-8E1A-DBFF0F246428@cs.usfca.edu>


On Jul 28, 2006, at 8:06 AM, Mark Venbrux wrote:

> Hi,
> Quick question:
> Is there an example of parsing included files already?

Not yet.

> If there is not, I'm willing to create an example, with usage of  
> the right pointers though ;)

Great!  Please create an example.  I have an example of embedded  
languages, but for simple includes, I think a simple CharStream  
object that knew how to suck chars from multiple files after seeing  
#include would be great!

Ter

From parrt at cs.usfca.edu  Fri Jul 28 10:36:02 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Jul 28 10:36:08 2006
Subject: [antlr-interest] ownership/rights for wiki content
Message-ID: <A0AFEA24-E0F0-4690-86C4-D090675CC8B8@cs.usfca.edu>

Hi,

My current strategy of BSD license for ANTLR and my insistence on  
contributors guaranteeing that they have the rights to contribute  
their work has led to many more (big) companies being able to use the  
new ANTLR.  Previously the weird "almost public domain" license  
bothered some companies.  More importantly, however, they wanted  
signatures from 15 years of contributors indicating nothing had been  
stolen from elsewhere and put into ANTLR (tainting source code).   
Think "SCO linux lawsuit".  My new feedback page circumvents this  
legal issue.

Anyway, as I intend to write a book which includes the raw reference  
manual that we are building (I note some serious contributions from  
Kunle last night!  Thanks!), I will need to have the right to do  
that.  I am proposing an identical "certificate of origin with teeth  
(indemnification)" (that all major code contributors will have to  
sign shortly):

http://www.antlr.org/ANTLR-contributor-agreement.pdf

So for the wiki, you would guarantee that you are not copying  
somebody else's work into the wiki and that you grant the antlr  
project license to publish the work without compensating you.

If we can agree on this, then I will alter the wiki signup to include  
this "click-wrap license" just like I have on the bottom of the  
feedback page:

http://www.antlr.org/misc/feedback

So, you will still own your work but you are granting me a license to  
publish it or whatever.

Yes, this legal crap is a pain but is a reality today.  I'm about to  
close a deal with a big player if they think that the contributor's  
cert. of origin is ok; so, this stuff really matters and is good for  
the project.

Terence
From parrt at cs.usfca.edu  Fri Jul 28 10:53:15 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Jul 28 10:53:19 2006
Subject: [antlr-interest] tutorials
Message-ID: <E1162C1B-85B3-44AD-AE51-044881FA11CB@cs.usfca.edu>

Added a page for people to stick tutorials under:

http://www.antlr.org/wiki/display/ANTLR3/Tutorials

and

http://www.antlr.org/wiki/display/ST/Tutorials

Terence
From zulfiqar.malik at gmail.com  Sun Jul 30 02:51:30 2006
From: zulfiqar.malik at gmail.com (Zulfiqar Malik)
Date: Sun Jul 30 02:52:07 2006
Subject: [antlr-interest] ANTLR problem
Message-ID: <12e3c2cb0607300251u3ff0be38o485d22f1cf5a8f0f@mail.gmail.com>

Hi,

I am using ANTLR 2.7.6. I am familiar with other parser generating
tools like bison, slk etc. but this is the first time i am using
ANTLR. I am writing a grammar with a C# like syntax and bison was
proving to be quite restrivtive so i decided to switch to ANTLR.
I got everything up and running and made a dll (VS8.0) for usage in
C++. Trying out the minimalistic parser given in the "getting started"
page i encounter an exception at the following line of code (for any
token, in this particular case mNEWLINE in the lexer):

	if ( _createToken && _token==ANTLR_USE_NAMESPACE(antlr)nullToken &&
_ttype!=ANTLR_USE_NAMESPACE(antlr)Token::SKIP ) {
	   _token = makeToken(_ttype);
	   _token->setText(text.substr(_begin, text.length()-_begin));
	}
	_returnToken = _token; // <--- CRASH ON THIS LINE

and it should crash since _returnToken is not initialized and points
to an invalid memory address. I don't know how to solve this problem.
I am using VS8.0 on WinXP SP2 (which shouldn't be an issue). Thanks in
advance.

Grammar is given below:

options {
	language="Cpp";
}

class P extends Parser;
options {
	k = 2;
}

startRule
    :   n:NAME
        //{printf("Hi there, %s\n", n);}
    ;

class L extends Lexer;

// one-or-more letters followed by a newline
NAME:   ( 'a'..'z'|'A'..'Z' )+ NEWLINE
    ;

NEWLINE
    :   '\r' '\n'   // DOS
    |   '\n'        // UNIX
		{
		/*_ttype = antlr::Token::SKIP; newline();*/ }
    ;

-- 
Regards,
Zulfiqar Inayat Malik.
From zulfiqar.malik at gmail.com  Sun Jul 30 03:14:06 2006
From: zulfiqar.malik at gmail.com (Zulfiqar Malik)
Date: Sun Jul 30 03:14:10 2006
Subject: [antlr-interest] Re: ANTLR problem
In-Reply-To: <12e3c2cb0607300251u3ff0be38o485d22f1cf5a8f0f@mail.gmail.com>
References: <12e3c2cb0607300251u3ff0be38o485d22f1cf5a8f0f@mail.gmail.com>
Message-ID: <12e3c2cb0607300314s5f741751v4e06f3f8091d1f6@mail.gmail.com>

One thing that i forgot to mention is that everything works fine in
debug mode i.e. Debug CRT (Multithreaded Debug DLL). Obviously i don't
want this.

On 7/30/06, Zulfiqar Malik <zulfiqar.malik@gmail.com> wrote:
> Hi,
>
> I am using ANTLR 2.7.6. I am familiar with other parser generating
> tools like bison, slk etc. but this is the first time i am using
> ANTLR. I am writing a grammar with a C# like syntax and bison was
> proving to be quite restrivtive so i decided to switch to ANTLR.
> I got everything up and running and made a dll (VS8.0) for usage in
> C++. Trying out the minimalistic parser given in the "getting started"
> page i encounter an exception at the following line of code (for any
> token, in this particular case mNEWLINE in the lexer):
>
>         if ( _createToken && _token==ANTLR_USE_NAMESPACE(antlr)nullToken &&
> _ttype!=ANTLR_USE_NAMESPACE(antlr)Token::SKIP ) {
>            _token = makeToken(_ttype);
>            _token->setText(text.substr(_begin, text.length()-_begin));
>         }
>         _returnToken = _token; // <--- CRASH ON THIS LINE
>
> and it should crash since _returnToken is not initialized and points
> to an invalid memory address. I don't know how to solve this problem.
> I am using VS8.0 on WinXP SP2 (which shouldn't be an issue). Thanks in
> advance.
>
> Grammar is given below:
>
> options {
>         language="Cpp";
> }
>
> class P extends Parser;
> options {
>         k = 2;
> }
>
> startRule
>     :   n:NAME
>         //{printf("Hi there, %s\n", n);}
>     ;
>
> class L extends Lexer;
>
> // one-or-more letters followed by a newline
> NAME:   ( 'a'..'z'|'A'..'Z' )+ NEWLINE
>     ;
>
> NEWLINE
>     :   '\r' '\n'   // DOS
>     |   '\n'        // UNIX
>                 {
>                 /*_ttype = antlr::Token::SKIP; newline();*/ }
>     ;
>
> --
> Regards,
> Zulfiqar Inayat Malik.
>


-- 
Regards,
Zulfiqar Inayat Malik.
From craig at palantir.co.za  Sun Jul 30 05:59:13 2006
From: craig at palantir.co.za (Craig Main)
Date: Sun Jul 30 05:59:24 2006
Subject: [antlr-interest] Rewrite Problem,
Message-ID: <20060730125919.C84A9DCC30@www.antlr.org>

Hi,

 

I am trying to get a tree with the operator as a root tree node, and then
the two operands, so with versions prior to 3 I would have used.

 

expression        : lvalue=term ((operator=PLUS^|operator=MINUS^)
rvalue=term)*  // note where the ^ is.

                        ;

 

And now I try the following:

 

expression        : lvalue=term ((operator=PLUS|operator=MINUS)
rvalue=term)* -> ^($operator $lvalue $rvalue)*

                        ; // I also tried $operator $expression $expression,
which is actually more correct because it is a recursive structure.

 

All kinds of weird things are happening to the tree, sometimes there are no
nodes in the tree. It is just (nil)

I have pasted the whole grammar below.

 

How do I build an AST using the new rules that would match the following
(this is what I have in my version 2.7.6 tree):

expression

                                 : #(PLUS l=expression r=expression);}

                                 | #(MINUS l=expression r=expression)
{result=ExpressionOperation.Subtract(l,r);}

                                 | #(MULTIPLY l=expression r=expression)
{result=ExpressionOperation.Multiply(l,r);}

                                 | #(DIVIDE l=expression r=expression)
{result=ExpressionOperation.Divide(l,r);}

                                 | result=term {log.Debug("term");}

                                 ;

 

My problem is that I don't know how to specify the expression properly.

I need something like ^($operator $expression $expression), and not $lvalue
and $rvalue, because they are actually expressions as well?

That results in a nil tree again.

 

A cog is not turning.

 

 

The whole grammar is as follows.

grammar RuleParser;

options {

            output = AST;

            ASTLabelType = CommonTree;

}

start                  : statement+;

statement          : assign

                        ;

assign              : ID ASSIGN^ expression// -> ^(ASSIGN expression)

                        ;

expression        : lvalue=term ((operator=PLUS|operator=MINUS)
rvalue=term)* -> ^($operator $lvalue $rvalue)*

                        ;

term                  : lvalue=factor ((operator=MULTIPLY^|operator=DIVIDE^)
rvalue=factor)* //-> ^($operator $lvalue $rvalue)*

                        ;

factor               : literal

                        ;

literal                : ID^

                        | FLOAT^

                        ;

/* tokens */

ID                     : ('a'..'z'|'A'..'Z'|'_')
('a'..'z'|'A'..'Z'|'_'|'0'..'9')*

                        ;

ASSIGN            : '=' ;

MULTIPLY        : '*' ;

DIVIDE          : '/' ;

PLUS            : '+' ;

MINUS           : '-' ;

 

DIGIT                : '0'..'9' ;

FLOAT              : (DIGIT)+ ('.' (DIGIT)*)?

                        ;

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060730/4bbe153e/attachment.html
From jsamort at gmail.com  Sun Jul 30 08:07:31 2006
From: jsamort at gmail.com (Scott Amort)
Date: Sun Jul 30 08:07:40 2006
Subject: [antlr-interest] ANTLR problem
In-Reply-To: <12e3c2cb0607300251u3ff0be38o485d22f1cf5a8f0f@mail.gmail.com>
References: <12e3c2cb0607300251u3ff0be38o485d22f1cf5a8f0f@mail.gmail.com>
Message-ID: <44CCCB33.8050403@gmail.com>

Hi,

Zulfiqar Malik wrote:
> i encounter an exception at the following line of code (for any
> token, in this particular case mNEWLINE in the lexer):
> 
>     if ( _createToken && _token==ANTLR_USE_NAMESPACE(antlr)nullToken &&
> _ttype!=ANTLR_USE_NAMESPACE(antlr)Token::SKIP ) {
>        _token = makeToken(_ttype);
>        _token->setText(text.substr(_begin, text.length()-_begin));
>     }
>     _returnToken = _token; // <--- CRASH ON THIS LINE
> 
> and it should crash since _returnToken is not initialized and points
> to an invalid memory address.

No, this is not the case.  _returnToken is a protected member of 
CharScanner (of which your lexer L is a derived class).  Otherwise you 
would have gotten a compiler error, because not only was _returnToken 
not initialised in your snippet, it wasn't even declared!

What is the exception you are receiving?  Make sure you put your test 
code in a try..catch block and see what information the exception is 
providing.

Best,
Scott
From parrt at cs.usfca.edu  Sun Jul 30 09:44:50 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun Jul 30 09:44:53 2006
Subject: [antlr-interest] Rewrite Problem,
In-Reply-To: <20060730125919.C84A9DCC30@www.antlr.org>
References: <20060730125919.C84A9DCC30@www.antlr.org>
Message-ID: <26D50288-08B5-40C4-8606-779537A6826F@cs.usfca.edu>

Hi.  Try

^($operator $expression $rvalue)*

:)

which means make a new root with left child consisting of old  
expression and right child of new operand.
Ter
From zulfiqar.malik at gmail.com  Sun Jul 30 10:36:07 2006
From: zulfiqar.malik at gmail.com (Zulfiqar Malik)
Date: Sun Jul 30 10:36:10 2006
Subject: [antlr-interest] ANTLR problem
In-Reply-To: <44CCCB33.8050403@gmail.com>
References: <12e3c2cb0607300251u3ff0be38o485d22f1cf5a8f0f@mail.gmail.com>
	<44CCCB33.8050403@gmail.com>
Message-ID: <12e3c2cb0607301036p360749b7s21b2ff737693480c@mail.gmail.com>

Ok, i finally found out the problem and this will probably serve as a
warning to all those starting out with VS8.0 project.
I was getting all sort of weird errors, CRT exceptions and the likes
and the scenarios were not consistent. You know the sort of errors you
get when you try to compile different projects with different
C-runtime. Obviously i was compiling with /MD compiler option for all
dependent projects. It turns out that the antlr support library (for
which i created the dll project using VS8.0) had the following option
turned on (which was not in the application using this dll)

Project Properties:
->C/C++
->->Language (Treat wchar_t as built-in type)

was set to Yes. This was turned off in the application and hence the
weird errors. Once i turned it off all the errors got fixed, and
turning it off reduced my dll size from 560KB to 180KB!!! Anyways,
thanks for help.

On a side note, is there any online book or tutorial series for ANTLR,
you know something that can serve as a quick reference because i find
the documentation (although clear) not so well organized so it does
not serve as a good quick lookup reference.

On 7/30/06, Scott Amort <jsamort@gmail.com> wrote:
> Hi,
>
> Zulfiqar Malik wrote:
> > i encounter an exception at the following line of code (for any
> > token, in this particular case mNEWLINE in the lexer):
> >
> >     if ( _createToken && _token==ANTLR_USE_NAMESPACE(antlr)nullToken &&
> > _ttype!=ANTLR_USE_NAMESPACE(antlr)Token::SKIP ) {
> >        _token = makeToken(_ttype);
> >        _token->setText(text.substr(_begin, text.length()-_begin));
> >     }
> >     _returnToken = _token; // <--- CRASH ON THIS LINE
> >
> > and it should crash since _returnToken is not initialized and points
> > to an invalid memory address.
>
> No, this is not the case.  _returnToken is a protected member of
> CharScanner (of which your lexer L is a derived class).  Otherwise you
> would have gotten a compiler error, because not only was _returnToken
> not initialised in your snippet, it wasn't even declared!
>
> What is the exception you are receiving?  Make sure you put your test
> code in a try..catch block and see what information the exception is
> providing.
>
> Best,
> Scott
>


-- 
Regards,
Zulfiqar Inayat Malik.
From sohail at taggedtype.net  Sun Jul 30 11:36:33 2006
From: sohail at taggedtype.net (Sohail Somani)
Date: Sun Jul 30 11:36:41 2006
Subject: [antlr-interest] ANTLR problem
In-Reply-To: <12e3c2cb0607301036p360749b7s21b2ff737693480c@mail.gmail.com>
References: <12e3c2cb0607300251u3ff0be38o485d22f1cf5a8f0f@mail.gmail.com>
	<44CCCB33.8050403@gmail.com>
	<12e3c2cb0607301036p360749b7s21b2ff737693480c@mail.gmail.com>
Message-ID: <1154284593.20692.4.camel@localhost.localdomain>

On Sun, 2006-07-30 at 22:36 +0500, Zulfiqar Malik wrote:
> Ok, i finally found out the problem and this will probably serve as a
> warning to all those starting out with VS8.0 project.
> I was getting all sort of weird errors, CRT exceptions and the likes
> and the scenarios were not consistent. You know the sort of errors you
> get when you try to compile different projects with different
> C-runtime. Obviously i was compiling with /MD compiler option for all
> dependent projects. It turns out that the antlr support library (for
> which i created the dll project using VS8.0) had the following option
> turned on (which was not in the application using this dll)
> 
> Project Properties:
> ->C/C++
> ->->Language (Treat wchar_t as built-in type)
> 
> was set to Yes. This was turned off in the application and hence the
> weird errors. Once i turned it off all the errors got fixed, and
> turning it off reduced my dll size from 560KB to 180KB!!! Anyways,
> thanks for help.

Thanks for being a good mailing list citizen! Do you think you can post
this on the wiki? Though I generally build all third party libraries
myself, others may find it useful: www.antlr.org/wiki

Sohail

From kototamo at gmail.com  Sun Jul 30 14:57:29 2006
From: kototamo at gmail.com (kototama kototama)
Date: Sun Jul 30 14:57:35 2006
Subject: [antlr-interest] Understanding a really simple nondeterminism :p
Message-ID: <9604cc9f0607301457gc00c721g2387595d0742dfd8@mail.gmail.com>

Hello,

Sorry for this question but I don't understand the nondeterminism of the
following grammar :

a: b (MUL b)*
;

b: DEGREE a
 | ID
;

Thanks in advance for your help!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060730/fb2b3464/attachment.html
From jbb at acm.org  Sun Jul 30 15:40:16 2006
From: jbb at acm.org (John B. Brodie)
Date: Sun Jul 30 15:40:23 2006
Subject: [antlr-interest] Understanding a really simple nondeterminism :p
In-Reply-To: <9604cc9f0607301457gc00c721g2387595d0742dfd8@mail.gmail.com>
	(message from kototama kototama on Sun, 30 Jul 2006 23:57:29 +0200)
References: <9604cc9f0607301457gc00c721g2387595d0742dfd8@mail.gmail.com>
Message-ID: <E1G7JxI-0007BK-00@gecko>

on Sun, 30 Jul 2006 23:57:29 +0200, kototama kototama asked:
>Hello,

Hi!

>Sorry for this question but I don't understand the nondeterminism of the
>following grammar :
>
>a: b (MUL b)*
>;
>
>b: DEGREE a
> | ID
>;
>
>Thanks in advance for your help!

Consider an input consisting of this sequence of 4 tokens:

                           DEGREE ID MUL ID

we have two ways to parse them:

     a              or                 a
      \                               /|\
       b                             / | \
      / \                           b MUL ID
DEGREE   a                         / \
        /|\                  DEGREE   a
       / | \                           \
     ID MUL ID                          b
                                         \
                                          ID

e.g we could have either DEGREE (ID MUL ID) or (DEGREE ID) MUL ID

thus the nondeterminism.

Hope this helps...
   -jbb
From jbb at acm.org  Sun Jul 30 16:02:25 2006
From: jbb at acm.org (John B. Brodie)
Date: Sun Jul 30 16:02:33 2006
Subject: [antlr-interest] Antlr v3 -- Lexing '..' and '1.'
In-Reply-To: <D0BA349D-75AA-478F-9157-BFFE45C7CBE9@cs.usfca.edu> (message from
	Terence Parr on Thu, 27 Jul 2006 19:28:33 -0700)
References: <20060728022025.18342.qmail@web55910.mail.re3.yahoo.com>
	<D0BA349D-75AA-478F-9157-BFFE45C7CBE9@cs.usfca.edu>
Message-ID: <E1G7KIj-0007ze-00@gecko>

Ter and Loring :-

Thanks for your replies!

I now have a working lexer fragment that handles float and '..'  tokens,
attached below.

I hope my implementation matches your intent for dealing with this....

(I also attach a TestDriver should anybody want to try to reproduce my result)

Thanks again!
   -jbb

Test.g follows...
//---------------------------begin cut here---------------------------
grammar Test;

//------------------------------------------------------------------------
// code to be incorporated into the generated lexer...

@lexer::header {
import java.util.Vector;
}

@lexer::members {
    // maximum number of emit() calls inside any rule action
    private static final int MAX_EMIT_COUNT = 2;

    // buffer (queue) to hold the emit()'d tokens
    private Token [] myToken = new Token[MAX_EMIT_COUNT];
    private int add_idx = 0; // deposit emit token here
    private int next_idx = 0; // next token to be delivered to parser

    public void emit(Token t) {
        token = t; // set flag to avoid automatic emit() at end of rule.
        myToken[add_idx++] = t;
    }

    public Token nextToken() {
        while (true) {
            if ( add_idx == next_idx ) {
                token = null;
                add_idx = 0;
                next_idx = 0;
                tokenStartCharIndex = getCharIndex();
                if ( input.LA(1)==CharStream.EOF ) {
                    return Token.EOF_TOKEN;
                }
                try {
                    mTokens();
                }
                catch (RecognitionException re) {
                    reportError(re);
                    recover(re);
                }
            } else {
                Token result = myToken[next_idx++];
                if ( result != Token.SKIP_TOKEN ) { // discard SKIP tokens
                    return result;
                }
            }
        }
    }
}


//------------------------------------------------------------------------
// next follows the (dummy) parser...

test : .+ EOF;

//------------------------------------------------------------------------
// and now, we specify the lexical analyzer...

DOT : '.' ;
RANGE : '..' ;
ELLIPSIS : '...' ;

NATURAL : UINT ;

FLOAT :
        ( i=UINT d=DOT
            ( ( UINT? EXPONENT? )
            | ( r=DOT
                    ( ( /*empty*/
                            { i.setType(NATURAL);
                              emit(i);
                              d.setType(RANGE);
                              d.setText("..");
                              emit(d); } )
                    | ( e=DOT
                            { i.setType(NATURAL);
                              emit(i);
                              d.setType(ELLIPSIS);
                              d.setText("...");
                              emit(d); } )
                    ) )
            ) )
    |   ( UINT EXPONENT )
    |   ( DOT UINT EXPONENT? )
    ;

fragment EXPONENT : ( 'e' | 'E' ) ( '+' | '-' )? UINT ;

fragment DIGIT_10 : '0'..'9' ;
fragment UINT : DIGIT_10+ ;



// Whitespace -- ignored
WS  :   (   ' '
        |   '\t'
        |   '\f'
        |   ( '\r' | '\n' ) // handle newlines
        )+
        { channel=99; }
    ;
//---------------------------end cut here-----------------------------

TestDriver.java follows:
//---------------------------begin cut here---------------------------
import java.io.*;
import java.util.*;

import org.antlr.runtime.*;

public class TestDriver {
   
   private static class Pair {
      public String input;
      public int[] expected;
      public Pair(String i, int[]e) {
         input = i;
         expected = e;
      }
   }

   private static final Pair[] x = {
      new Pair("1",new int[]{Test.NATURAL}),
      new Pair(".",new int[]{Test.DOT}),
      new Pair("..",new int[]{Test.RANGE}),
      new Pair("...",new int[]{Test.ELLIPSIS}),
      new Pair(".0",new int[]{Test.FLOAT}),
      new Pair(".0e+0",new int[]{Test.FLOAT}),
      new Pair("1.0",new int[]{Test.FLOAT}),
      new Pair("1.",new int[]{Test.FLOAT}),
      new Pair("1.0",new int[]{Test.FLOAT}),
      new Pair("1.0e+0",new int[]{Test.FLOAT}),
      new Pair("1e1",new int[]{Test.FLOAT}),
      new Pair("1e+1",new int[]{Test.FLOAT}),
      new Pair("1e-1",new int[]{Test.FLOAT}),
      new Pair("1 . 2",new int[]{Test.NATURAL,
                                 Test.WS,
                                 Test.DOT,
                                 Test.WS,
                                 Test.NATURAL}),
      new Pair("1 .. 2",new int[]{Test.NATURAL,
                                  Test.WS,
                                  Test.RANGE,
                                  Test.WS,
                                  Test.NATURAL}),
      new Pair("1 ... 2",new int[]{Test.NATURAL,
                                   Test.WS,
                                   Test.ELLIPSIS,
                                   Test.WS,
                                   Test.NATURAL}),
      new Pair("1. . 2.",new int[]{Test.FLOAT,
                                   Test.WS,
                                   Test.DOT,
                                   Test.WS,
                                   Test.FLOAT}),
      new Pair("1. .. 2.",new int[]{Test.FLOAT,
                                    Test.WS,
                                    Test.RANGE,
                                    Test.WS,
                                    Test.FLOAT}),
      new Pair("1. ... 2.",new int[]{Test.FLOAT,
                                     Test.WS,
                                     Test.ELLIPSIS,
                                     Test.WS,
                                     Test.FLOAT}),
      new Pair("1.1 . 2.2",new int[]{Test.FLOAT,
                                     Test.WS,
                                     Test.DOT,
                                     Test.WS,
                                     Test.FLOAT}),
      new Pair("1.1 .. 2.2",new int[]{Test.FLOAT,
                                      Test.WS,
                                      Test.RANGE,
                                      Test.WS,
                                      Test.FLOAT}),
      new Pair("1.1 ... 2.2",new int[]{Test.FLOAT,
                                       Test.WS,
                                       Test.ELLIPSIS,
                                       Test.WS,
                                       Test.FLOAT}),
      new Pair("1.",new int[]{Test.FLOAT}),
      new Pair("1..",new int[]{Test.NATURAL,Test.RANGE}),
      new Pair("1...",new int[]{Test.NATURAL,Test.ELLIPSIS}),
      new Pair("1.2",new int[]{Test.FLOAT}),
      new Pair("1..2",new int[]{Test.NATURAL,
                                Test.RANGE,
                                Test.NATURAL}),
      new Pair("1...2",new int[]{Test.NATURAL,
                                 Test.ELLIPSIS,
                                 Test.NATURAL})
   };

   private static void printTokens(List l) {

      if( l.size() == 0 ) {
         System.out.format("no tokens found!%n");

      } else {
         Token t = (Token)l.get(0);
         System.out.format("([%s,%s]",
                           Test.tokenNames[t.getType()],
                           t.getText());
         for(int j = 1; j < l.size(); ++j) {
            t = (Token)l.get(j);
            System.out.format(", [%s,%s]",
                              Test.tokenNames[t.getType()],
                              t.getText());
         }
         System.out.format(")");
      }
   }

   private static boolean checkTokens(List l, int [] p) {
      boolean success = true;

      if( l.size() == p.length ) {

         for(int j = 0; j < p.length; ++j) {
            Token t = (Token)l.get(j);
            if (t.getType() != p[j]) {
               success = false;
               System.out.format(" token number %s, %s should be %s; ",
                                 j,
                                 Test.tokenNames[t.getType()],
                                 Test.tokenNames[p[j]]);
            }
         }

      } else {
         success = false;
         System.out.format("...wrong number of tokens:%s should be %s; ",
                           l.size(),p.length);
      }

      return success;
   }

   public static void main(String[] args) {
      for(int i = 0; i < x.length; ++i) {
         try {
            System.out.format("testing `%s`: ",x[i].input);

            CommonTokenStream tokens = new CommonTokenStream
               (new TestLexer
                (new ANTLRStringStream(x[i].input)));

            List l = tokens.getTokens();
            printTokens(l);
            if (checkTokens(l, x[i].expected)) {
               System.out.format(" --- OK%n");
            } else {
               System.out.format(" --- FAIL%n");
            }

         } catch(Exception e) {
            System.out.println("exception: "+e);
         }
      }
   }
}
//---------------------------end cut here-----------------------------
From peter.palotas at gmail.com  Mon Jul 31 03:35:20 2006
From: peter.palotas at gmail.com (Peter Palotas)
Date: Mon Jul 31 03:35:48 2006
Subject: [antlr-interest] Passing extra arguments to constructor?
Message-ID: <000601c6b48d$06147430$0600a8c0@castor>

Hi,

I was wondering if it is possible to specify additional arguments to pass to
the generated Parser's constructor and how this should be done?

Sincerely,
Peter

From peter.palotas at gmail.com  Mon Jul 31 03:37:13 2006
From: peter.palotas at gmail.com (Peter Palotas)
Date: Mon Jul 31 03:37:39 2006
Subject: [antlr-interest] Searching the FAQ broken?
Message-ID: <000701c6b48d$49a81b20$0600a8c0@castor>

Hi, another question:  Why doesn't searching the FAQ work? It is really hard
to search for an answer there before asking here when the search doesn't
work. All I get when trying to search is:

ERROR

I'm sorry Dave, I can't do that.

Premium-only search resource: universe

// Peter

From dragonoe at mcmaster.ca  Mon Jul 31 05:01:49 2006
From: dragonoe at mcmaster.ca (O.E. Dragon)
Date: Mon Jul 31 05:02:03 2006
Subject: [antlr-interest] Passing extra arguments to constructor?
In-Reply-To: <000601c6b48d$06147430$0600a8c0@castor>
Message-ID: <web-133978888@cgpsrv2.cis.mcmaster.ca>

On Mon, 31 Jul 2006 12:35:20 +0200
 "Peter Palotas" <peter.palotas@gmail.com> wrote:
> I was wondering if it is possible to specify additional arguments to
> pass to the generated Parser's constructor and how this should be
done?

Hi,

In Java, you could create a subclass to the Parser class generated by
ANTLR. This class would have the contructors you want and would call
super(...) with the generated Parser's usual arguments. I presume you
could do something similar in C#, C++ or Python as those are all OO
languages, but I have no experience with them.

Cheers,
-Olivier
From dwashington at gmx.net  Mon Jul 31 05:31:39 2006
From: dwashington at gmx.net (Denis Washington)
Date: Mon Jul 31 05:30:56 2006
Subject: [antlr-interest] if ( ) {
Message-ID: <44CDF82B.70703@gmx.net>

Hi,

I have a major problem with the code generation of ANTLR v3. After
generating code for my grammar file (see below), I get the following
error message when compiling:

./SchlichtParser.java:2352: illegal start of expression
            if (  ) {
                  ^

I use version 3.0b3.

Here's the grammar file (some bits taken from the Java example grammar):


/*
* schlicht.g
*
* The Schlicht Compiler (Schc)
* Copyright (C) 2006  Denis Washington <dwashington@gmx.net>
*
* This program is free software; you can redistribute it and/or
* modify it under the terms of the GNU General Public License
* as published by the Free Software Foundation; either version 2
* of the License, or (at your option) any later version.
*
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU General Public License for more details.
*
* You should have received a copy of the GNU General Public License
* along with this program; if not, write to the Free Software
* Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA
02110-1301,
* USA.
*/


grammar SchlichtParser;

options
{
    k = 2;
    backtrack = true;
    memoize = true;
}

///// Compilation Unit
/////////////////////////////////////////////////////////

compilationUnit
    : unitBodyDeclaration*
    ;

unitBodyDeclaration
    : programDeclaration
    | variableDeclaration
    | functionDeclaration
    ;


///// Program
//////////////////////////////////////////////////////////////////

programDeclaration
    :   'program' simpleIdentifier block
    ;


///// Variables
////////////////////////////////////////////////////////////////

variableDeclaration
    :   'var' variableDeclarators ';'
    ;

variableDeclarators
    :   variableDeclarator (',' variableDeclarator)*
    ;

variableDeclarator
    :   declarator (':=' expression)?
    ;

declarator
    :   simpleIdentifier ':' typename
    ;


///// Functions
////////////////////////////////////////////////////////////////

functionDeclaration
    :   'function' simpleIdentifier
        '(' functionArguments? ')'
        (':' typename)?
        block
    ;

functionArguments
    :   functionArgument (',' functionArgument)*
    ;

functionArgument
    :   declarator
    ;


///// Type Names
///////////////////////////////////////////////////////////////

typename
    : builtInType
    ;

builtInType
    :   'integer'
    |   'boolean'
    ;


///// Statements
///////////////////////////////////////////////////////////////

statement
    :   block
    |   declarationStatement
    |   expressionStatement
    ;

block
    :   '{' statement* '}'
    ;

declarationStatement
    :   variableDeclaration
    ;

expressionStatement
    :   expression ';'
    ;


///// Expressions
//////////////////////////////////////////////////////////////

expression
    :   assignmentExpression
    ;

assignmentExpression
    :   additiveExpression (':=' assignmentExpression)*
    ;

additiveExpression
    :   multiplicativeExpression (('+'|'-') additiveExpression)*
    ;

multiplicativeExpression
    :   unaryExpression (('*'|'/') multiplicativeExpression)*
    ;

unaryExpression
    :   'not' unaryExpression
    |   primaryExpression
    ;

primaryExpression
    :   simpleIdentifier
    |   integerLiteral
    |   booleanLiteral
    ;

integerLiteral
    :  '-'? decimalLiteral
    ;

booleanLiteral
    : 'true'
    | 'false'
    ;

///// Lexical Analysis
/////////////////////////////////////////////////////////

decimalLiteral
    :   ( '0' | '1'..'9' '0'..'9'* )
    ;

simpleIdentifier
    :   (letter|'_'|'$') (letter|digit|'_'|'$')*
    ;

fragment
letter
    :   '\u0041'..'\u005a' |
        '\u0061'..'\u007a' |
        '\u00c0'..'\u00d6' |
        '\u00d8'..'\u00f6' |
        '\u00f8'..'\u00ff' |
        '\u0100'..'\u1fff' |
        '\u3040'..'\u318f' |
        '\u3300'..'\u337f' |
        '\u3400'..'\u3d2d' |
        '\u4e00'..'\u9fff' |
        '\uf900'..'\ufaff'
    ;

fragment
digit
    :   '\u0030'..'\u0039' |
        '\u0660'..'\u0669' |
        '\u06f0'..'\u06f9' |
        '\u0966'..'\u096f' |
        '\u09e6'..'\u09ef' |
        '\u0a66'..'\u0a6f' |
        '\u0ae6'..'\u0aef' |
        '\u0b66'..'\u0b6f' |
        '\u0be7'..'\u0bef' |
        '\u0c66'..'\u0c6f' |
        '\u0ce6'..'\u0cef' |
        '\u0d66'..'\u0d6f' |
        '\u0e50'..'\u0e59' |
        '\u0ed0'..'\u0ed9' |
        '\u1040'..'\u1049'
    ;

whitespace
    :   (' '|'\r'|'\t'|'\u000C'|'\n') { channel = 99; }
    ;

comment
    :   '/*' ( options { greedy = false; }: . )* '*/' { channel = 99; }
    ;

lineComment
    : '//' ~('\n'|'\r')* '\r'? '\n' { channel = 99; }
    ;

From scott at javadude.com  Mon Jul 31 05:36:23 2006
From: scott at javadude.com (Scott Stanchfield)
Date: Mon Jul 31 05:36:37 2006
Subject: [antlr-interest] Passing extra arguments to constructor?
In-Reply-To: <web-133978888@cgpsrv2.cis.mcmaster.ca>
Message-ID: <200607311317.k6VDH7Jh032673@s2.eroute.net>

It's easier to create instance variables and setter methods in the parser:

header {
...
}

class MyParser extends Parser;

{
  private SomeType someVariable_;
  public void setSomeVariable(SomeType someVariable) {
    someVariable_ = someVariable;
  }
} 

rule1:
  ...

Then after you create the parser instance, and before you trigger the
top-level rule, just set the values you need.

(You should be able to do this in most other OO target languages as well,
though I've only used ANTLR for Java)

-- Scott

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of O.E. Dragon
> Sent: Monday, July 31, 2006 8:02 AM
> To: antlr-interest@antlr.org
> Subject: Re: [antlr-interest] Passing extra arguments to constructor?
> 
> On Mon, 31 Jul 2006 12:35:20 +0200
>  "Peter Palotas" <peter.palotas@gmail.com> wrote:
> > I was wondering if it is possible to specify additional 
> arguments to 
> > pass to the generated Parser's constructor and how this should be
> done?
> 
> Hi,
> 
> In Java, you could create a subclass to the Parser class 
> generated by ANTLR. This class would have the contructors you 
> want and would call
> super(...) with the generated Parser's usual arguments. I 
> presume you could do something similar in C#, C++ or Python 
> as those are all OO languages, but I have no experience with them.
> 
> Cheers,
> -Olivier
> 


From dwashington at gmx.net  Mon Jul 31 05:54:09 2006
From: dwashington at gmx.net (Denis Washington)
Date: Mon Jul 31 05:53:30 2006
Subject: [antlr-interest] matchRange()
Message-ID: <44CDFD71.1040701@gmx.net>

Hi,
 Another problem. When compiling, javac talks about an unknown method 
matchRange() used frequently in the generated code. What is this about?
From Abhijit_Ghonge at infosys.com  Mon Jul 31 05:57:15 2006
From: Abhijit_Ghonge at infosys.com (Abhijit Nandkumar Ghonge)
Date: Mon Jul 31 05:57:42 2006
Subject: [antlr-interest] lex to antlr
Message-ID: <D72A054DF5002D4FA6CF14252F7997B8D97DD1@BLRKECMSG13.ad.infosys.com>


Is there any tool by which I can convert  the lex grammer to antlr
grammer?



Abhijit.









**************** CAUTION - Disclaimer *****************
This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended solely for the use of the addressee(s). If you are not the intended recipient, please notify the sender by e-mail and delete the original message. Further, you are not to copy, disclose, or distribute this e-mail or its contents to any other person and any such actions are unlawful. This e-mail may contain viruses. Infosys has taken every reasonable precaution to minimize this risk, but is not liable for any damage you may sustain as a result of any virus in this e-mail. You should carry out your own virus checks before opening the e-mail or attachment. Infosys reserves the right to monitor and review the content of all messages sent to or from this e-mail address. Messages sent to or from this e-mail address may be stored on the Infosys e-mail system.
***INFOSYS******** End of Disclaimer ********INFOSYS***
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060731/76b9b2e8/attachment.html
From kay.roepke at epublica.de  Mon Jul 31 06:02:54 2006
From: kay.roepke at epublica.de (=?ISO-8859-1?Q?Kay_R=F6pke?=)
Date: Mon Jul 31 06:03:02 2006
Subject: [antlr-interest] if ( ) {
In-Reply-To: <44CDF82B.70703@gmx.net>
References: <44CDF82B.70703@gmx.net>
Message-ID: <990AEE91-0559-492C-9646-655BB8F7CF4B@epublica.de>


On 31. Jul 2006, at 14:31 Uhr, Denis Washington wrote:

> I have a major problem with the code generation of ANTLR v3. After
> generating code for my grammar file (see below), I get the following
> error message when compiling:
>
> ./SchlichtParser.java:2352: illegal start of expression
>            if (  ) {
>                  ^
>
> I use version 3.0b3.
>
> Here's the grammar file (some bits taken from the Java example  
> grammar):

Hi!

Well, the problem is that you do all your lexical analysis in the  
parser.
Lexer rules must be all-uppercase.
Simply changing all rules below the comment "Lexical analysis" to  
uppercase (and all the references, too)
at least makes it compile without a glitch.

There might be other problems with the grammar, but I cannot look  
into that right now, due to time issues :(

HTH,

-k
From kay.roepke at epublica.de  Mon Jul 31 06:06:05 2006
From: kay.roepke at epublica.de (=?ISO-8859-1?Q?Kay_R=F6pke?=)
Date: Mon Jul 31 06:06:13 2006
Subject: [antlr-interest] matchRange()
In-Reply-To: <44CDFD71.1040701@gmx.net>
References: <44CDFD71.1040701@gmx.net>
Message-ID: <2A199B7B-758D-4920-9FD7-0CAD8E97B2FA@epublica.de>


On 31. Jul 2006, at 14:54 Uhr, Denis Washington wrote:

> Another problem. When compiling, javac talks about an unknown  
> method matchRange() used frequently in the generated code. What is  
> this about?

Hi again,

this is also pointing towards that lexical analysis must be done in a  
lexer. matchRange() is a method of Lexer (not BaseRecognizer).
decimalLiteral in your grammar is really a lexer rule, but gets put  
into the parser because it's not named correctly. Should be  
DECIMALLITERAL.

-k
From kay.roepke at epublica.de  Mon Jul 31 06:11:43 2006
From: kay.roepke at epublica.de (=?ISO-8859-1?Q?Kay_R=F6pke?=)
Date: Mon Jul 31 06:11:59 2006
Subject: [antlr-interest] lex to antlr
In-Reply-To: <D72A054DF5002D4FA6CF14252F7997B8D97DD1@BLRKECMSG13.ad.infosys.com>
References: <D72A054DF5002D4FA6CF14252F7997B8D97DD1@BLRKECMSG13.ad.infosys.com>
Message-ID: <C44867DE-90DC-48C5-868B-B5F043358A2D@epublica.de>


On 31.07.2006, at 14:57 , Abhijit Nandkumar Ghonge wrote:

> Is there any tool by which I can convert  the lex grammer to antlr  
> grammer?

I know of none, but you might want to take a look here:
http://www.imada.sdu.dk/~morling/

Look for "issue 2" (from LR to LL)

HTH,

-k
From james_cataldo at agilent.com  Mon Jul 31 08:56:57 2006
From: james_cataldo at agilent.com (james_cataldo@agilent.com)
Date: Mon Jul 31 08:57:05 2006
Subject: [antlr-interest] FW: Thanks for Your Help and question
Message-ID: <6F94DB018DCB9E4AB34E7FE503AF2B168591CD@wcosmb05.cos.agilent.com>

Naveed,
 
I'm forwarding this onto the list, in case anyone else has an opinion.

________________________________

From: Naveed Riaz [mailto:nriaz@ist.tugraz.at] 
Sent: Monday, July 31, 2006 8:54 AM
To: james_cataldo@agilent.com
Subject: Re: Thanks for Your Help and question


 I am mailing you this time for two problems i am facing... I shall be really grateful if you spare a part of your
precious time and kindly mention the causes of the problems i am facing...

I am using the following tree grammar , 
class VerilogParser extends Parser;
options{
k = 2;                        // two token lookahead
exportVocab = Verilog;
defaultErrorHandler = false; 
buildAST = true;       // Call its vocabulary "Verilog"
}
tokens{
MODULE_NAME;}

source_text :
        ( description )*
    EOF!
        ;

description :
        module
            ;

module options {defaultErrorHandler = true;} :
        p:"module"^ {#p.setType(MODULE_NAME);}  
         name_of_module   ( list_of_ports )? SEMI!
    "endmodule"!
        ;

list_of_ports :
        LPAREN! port ( COMMA^ port )* RPAREN!
        ;

port :
    (port_expression)?
 |
        DOT! name_of_port LPAREN! (port_expression)? RPAREN!
    ;

port_expression :
        port_reference |
    LBRACE! port_reference ( COMMA^ port_reference )* RBRACE!
        ;
port_reference :
        ( name_of_variable LBRACK expression COLON ) =>
        name_of_variable LBRACK! expression! COLON! expression! RBRACK |
        ( name_of_variable LBRACK ) =>
        name_of_variable LBRACK! expression RBRACK |
        name_of_variable
    ;
expression: (|)
;
name_of_module :            local_identifier ;
name_of_port   :             local_identifier;
name_of_variable: local_identifier ;
local_identifier :
        IDENTIFIER 
        ;


When i give the input  
module d_ff ( d, clk, q, q_bar);
The parser works fine but it does not show any tree structure.....Whats the cause???whats faulty in grammar..
i want it to be showed like "module" as the parent and then its name and the list of ports as children and further
the individual ports as children of list of ports....


The other problem i why it gives me error if i want to change the above grammar to the following grammar,
i have used (**) sign for the problem part.
source_text :
        ( description )*
    EOF!
        ;

description :
        module
            ;

module  :
        "module"         name_of_module^(**)   ( list_of_ports )? SEMI!
    "endmodule"!
        ;

list_of_ports :
        LPAREN! port^(**) ( COMMA port )* RPAREN!
        ;

port :
    (port_expression)?
 |
        DOT! name_of_port^(**) LPAREN! (port_expression)? RPAREN!
    ;

port_expression :
        port_reference |
    LBRACE! port_reference(**) ( COMMA port_reference )* RBRACE!
        ;
port_reference :
        ( name_of_variable LBRACK expression COLON ) =>
        name_of_variable^(**) LBRACK! expression! COLON! expression! RBRACK |
        ( name_of_variable LBRACK ) =>
        name_of_variable LBRACK! expression RBRACK |
        name_of_variable
    ;
expression: (|)
;
name_of_module :            local_identifier ;
name_of_port   :             local_identifier;
name_of_variable: local_identifier ;
local_identifier :
        IDENTIFIER 
        ;






-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060731/4add4e9c/attachment.html
From craig at palantir.co.za  Mon Jul 31 09:20:57 2006
From: craig at palantir.co.za (Craig Main)
Date: Mon Jul 31 09:21:02 2006
Subject: [antlr-interest] Rewrite Problem,
In-Reply-To: <26D50288-08B5-40C4-8606-779537A6826F@cs.usfca.edu>
Message-ID: <20060731162100.97CB6DCE10@www.antlr.org>


Hi Ter,

I am still battling with this.
I do not understand the rewrite rules.

Given the following simple term, in the standard expression/term/factor
arrangement.

expression	: l=term ((op=PLUS|op=MINUS) r=term)*

If I write the expression with the correct tree manipulation operators:

expression	: l=term ((op=PLUS^|op=MINUS^) r=term)*

Then I get a complete AST tree when I parse the expression 'a = 90+23-11'
I can match the tree correctly with:

expression:
  #(PLUS l=expression r=expression)
| #(MINUS l=expression r=expression)


When I try to do the new stuff (version 3.0)
I leave out the tree manipulation as that produces an error.
I use:

expression	: l=term ((op=PLUS|op=MINUS) r=term)*

and then add:
-> ^($op $expression $r)*

And the tree is just a nil node.

I also tried

-> ^($op $l $r)*

And get the same thing.

Am I interpreting the thing wrong?

I have included the grammar in case anyone wants to have a quick squiz.
In its current form, I loose the +23 in 'a = 90+23-11'
Regards
Craig
 

To: Antlr Interest
Subject: Re: [antlr-interest] Rewrite Problem,

Hi.  Try

^($operator $expression $rvalue)*

:)

which means make a new root with left child consisting of old  
expression and right child of new operand.
Ter
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rules-3.g
Type: application/octet-stream
Size: 746 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20060731/d698938b/rules-3-0001.obj
From parrt at cs.usfca.edu  Mon Jul 31 11:42:52 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Jul 31 11:42:57 2006
Subject: [antlr-interest] Rewrite Problem,
In-Reply-To: <20060731162100.97CB6DCE10@www.antlr.org>
References: <20060731162100.97CB6DCE10@www.antlr.org>
Message-ID: <89A0C025-6E8C-4A3A-BFF6-78BEE9A11DB6@cs.usfca.edu>


On Jul 31, 2006, at 9:20 AM, Craig Main wrote:

>
> Hi Ter,
>
> I am still battling with this.
> I do not understand the rewrite rules.
>
> Given the following simple term, in the standard expression/term/ 
> factor
> arrangement.
>
> expression	: l=term ((op=PLUS|op=MINUS) r=term)*
>
> If I write the expression with the correct tree manipulation  
> operators:
>
> expression	: l=term ((op=PLUS^|op=MINUS^) r=term)*

You want ^^ not ^ ;)

>
> Then I get a complete AST tree when I parse the expression 'a = 90 
> +23-11'
> I can match the tree correctly with:
>
> expression:
>   #(PLUS l=expression r=expression)
> | #(MINUS l=expression r=expression)
>
>
> When I try to do the new stuff (version 3.0)
> I leave out the tree manipulation as that produces an error.
> I use:
>
> expression	: l=term ((op=PLUS|op=MINUS) r=term)*
>
> and then add:
> -> ^($op $expression $r)*
>
> And the tree is just a nil node.

That would need to be inside the loop.

Take a look at mantra.g for example:

postfixExpression
	:   (primary->primary) // set return tree
         (   lp='(' args=expressionList ')'  -> ^(CALL  
$postfixExpression $args)
         |   lb='[' ie=expression ']'        -> ^(INDEX  
$postfixExpression $ie)
         |   dot='.' p=primary               -> ^(FIELDACCESS  
$postfixExpression $p)
         |   c=':' cl=closure[false]         -> ^(APPLY ^(EXPR  
$postfixExpression) $cl)
         )*
         ;

works great!

Ter
