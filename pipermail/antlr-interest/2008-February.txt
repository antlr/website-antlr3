From stevagewp at gmail.com  Fri Feb  1 05:59:39 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Sat, 2 Feb 2008 00:59:39 +1100
Subject: [antlr-interest] Bug? "new (new" code generated.
In-Reply-To: <b8ceeef70801312358ia29d6f3n3abe85bf8f1f25dd@mail.gmail.com>
References: <b8ceeef70801312358ia29d6f3n3abe85bf8f1f25dd@mail.gmail.com>
Message-ID: <b8ceeef70802010559g59b8d600h8d2b291d0fb3abd6@mail.gmail.com>

On 2/1/08, Steve Bennett <stevagewp at gmail.com> wrote:
> I split a working grammar into a lexer and parser. Using Antlrworks
> 1.1.7, I now get this error:

Investigating slightly, the problem is obviously that
$java_parser_lexer$ is blank when it gets inserted in
DBParserGlueCode.st:

$java_parser_lexer$ lex = new $java_parser_lexer$(new
ANTLRFileStream("$input_file$"));

But I can't figure out what I'm doing wrong. The top of my parser file
looks like this:

parser grammar mediawiki2;
options { tokenVocab=mediawikil; output=AST;}

My lexer file looks like this:
lexer grammar mediawikil;

tokens {
...

Any ideas, anyone?

Thanks,
Steve

From jimi at temporal-wave.com  Fri Feb  1 07:14:39 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 1 Feb 2008 07:14:39 -0800
Subject: [antlr-interest] Apparently equivalent code refactoring doesn't
	work
In-Reply-To: <b8ceeef70801311922n5c8e2369wb067e1a4283192d@mail.gmail.com>
Message-ID: <"L9C128594490A467183BF53A03AE5A4E6.1201880232.scalix.temporal-wave.com*"@MHS>

Steve,

When you translate your grammar, use the -debug option. This generates 
code that causes the parser to start and wait for a connect from a 
debugging tool (in this case ANTLRWorks). When you start ANTLRWorks 
debugger, you will see that there is a Remote Debug option on the menu. 
Use localhost as your name after starting your parser.

I use netbeans, but people have preferences for other IDEs of course. 
Netbeans uses ANT, which means that it can use the ANT task for ANTLR, 
which you can download from the site (somewhere, I forget where but a 
search should find it). Follow the instructions for making the ANT task 
available to ANT then create a new project in Netbeans. It will create a 
file called build.xml, which you can edit within netbeans. You usually 
put source code under the project directory in a ./src sub directory. 
Then you use the usual java directory structure for packages. Use the 
library manager to create a library that contains the ANTLR jar, the 
ANTLR 2.7.7 jar and the stringtemplate jar (at appropriate versions). I 
use ANTLRLatest as a library name for instance. Add this library to your 
project.

Now place the .g{3pl} or whatever suffix you use in the directory where 
you want the .java files to generate. So, if you have added 
@lexer::header and @parser::@header to the grammar and placed a package 
statement in there, then place the grammar where ever the .java files 
should be. 

Now, edit the build.xml file and add a -pre-compile target, where you 
can put the ANTLR tasks for each of your grammars. Now you can build and 
debug.

Here is an example layout and build.xml from one of my projects:

Directories:

vbdotnet\  - project dir
vbdotnet\java\src  - source package root
vbdotnet\java\src\com\temporalwave\parsers\vbdotnet  - grammar location

When it builds you get:

Vbdotnet\build - output classes
Vbdotnet\dist - location of output.jar
Vbdotnet\lib - copies of any libraries it depends on such as ANTLR

Then my build.xml looks like this (comments excluded):


<?xml version="1.0" encoding="UTF-8"?>
<project name="vbdotnet" default="default" basedir=".">
    <description>Builds, tests, and runs the project 
vbdotnet.</description>
    <import file="nbproject/build-impl.xml"/>
    
    <property name="grammar.dir" 
location="java/com/temporalwave/parsers/vbdotnet/" />
    <property name="antlr.libdir" location="C:/antlrsrc/lib" />

     <patternset id="antlr.libs">
        <include name="antlr-2008-01-10.16.jar" />
        <include name="stringtemplate-3.1b1.jar" />
        <include name="antlr.jar" />
    </patternset>

    <path id="antlr.path">
        <fileset dir="${antlr.libdir}" casesensitive="yes">
           <patternset refid="antlr.libs" />
        </fileset>
    </path>

    <target name="-pre-compile">
        <antlr:antlr3 xmlns:antlr="antlib:org/apache/tools/ant/antlr" 
            target="${grammar.dir}/vbdotnet.g3pl" 
               depend="true">

            <classpath>
                <path refid="antlr.path" />
            </classpath>
        </antlr:antlr3>
    </target>
    
</project>


Most of that text is the same for every project, with just the locations 
of things changed. Though I like Netbeans, I am not a fan of ANT really, 
so there may be better ways to configure the script, but that works 
nicely. 

If you want a debug version of the output, then change the task to add 
-debug to the ANTLR tool invocation when in debug mode (see Netbeans 
docs and ANTLR ant task readme). Then you can debug the grammar with 
ANTLRWorks and the output java with Netbeans at the same time. 


Remember a parser compiled with -debug will block at runtime until a 
debugger connects to it!

Jim


> -----Original Message-----
> From: Steve Bennett [mailto:stevagewp at gmail.com]
> Sent: Thursday, January 31, 2008 7:23 PM
> To: Jim Idle
> Subject: Re: [antlr-interest] Apparently equivalent code refactoring
> doesn't work
> 
> On 2/1/08, Jim Idle <jimi at temporal-wave.com> wrote:
> > The easy way is just to compile your grammar in a separate place 
such
> as
> > Netbeans, then run it with the debug option and tell ANTLRWorks to
> > connect remotely.
> 
> Ok, any tutorials on that? I'm not well-versed on Netbeans or even the
> ANTLR API for that matter. I do have a testbed java program up and
> running though...perhaps you mean that I just need to pass some kind
> of debug flag to the .Parse(...) call?
> 
> Thanks,
> Steve



From r.mark.volkmann at gmail.com  Fri Feb  1 07:37:40 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Fri, 1 Feb 2008 09:37:40 -0600
Subject: [antlr-interest] Bug? "new (new" code generated.
In-Reply-To: <b8ceeef70802010559g59b8d600h8d2b291d0fb3abd6@mail.gmail.com>
References: <b8ceeef70801312358ia29d6f3n3abe85bf8f1f25dd@mail.gmail.com>
	<b8ceeef70802010559g59b8d600h8d2b291d0fb3abd6@mail.gmail.com>
Message-ID: <f0fcc6820802010737v49a38813u5e6cb012cbcece1e@mail.gmail.com>

I think I ran into this same problem. I believe the following is a
true statement.

If your lexer grammar and parser grammar are in separate files then in
order to debug the parser grammar using ANTLRWorks, you have to use
remote debugging.

Here are the steps that work for me.

1) Modify your build script (I use Ant) to include the -debug option
when running org.antlr.Tool.
2) ant clean run (where the run target runs your application that uses
the generated classes)
3) start ANTLRWorks
4) open the parser grammar file
5) select Debugger ... Debug Remote...
6) press "Connect" button
7) use the debugger as usual

I added a wiki entry on this at
http://www.antlr.org/wiki/pages/viewpage.action?pageId=5832732.

On Feb 1, 2008 7:59 AM, Steve Bennett <stevagewp at gmail.com> wrote:
> On 2/1/08, Steve Bennett <stevagewp at gmail.com> wrote:
> > I split a working grammar into a lexer and parser. Using Antlrworks
> > 1.1.7, I now get this error:
>
> Investigating slightly, the problem is obviously that
> $java_parser_lexer$ is blank when it gets inserted in
> DBParserGlueCode.st:
>
> $java_parser_lexer$ lex = new $java_parser_lexer$(new
> ANTLRFileStream("$input_file$"));
>
> But I can't figure out what I'm doing wrong. The top of my parser file
> looks like this:
>
> parser grammar mediawiki2;
> options { tokenVocab=mediawikil; output=AST;}
>
> My lexer file looks like this:
> lexer grammar mediawikil;
>
> tokens {
> ...
>
> Any ideas, anyone?
>
> Thanks,
> Steve
>



-- 
R. Mark Volkmann
Object Computing, Inc.

From andreas.ravnestad at gmail.com  Fri Feb  1 08:25:09 2008
From: andreas.ravnestad at gmail.com (Andreas Ravnestad)
Date: Fri, 1 Feb 2008 17:25:09 +0100
Subject: [antlr-interest] Tree parser for large (and changing) grammars
Message-ID: <db3e39e10802010825t60e7b4a9i2cf1c2e2c7bd0aaf@mail.gmail.com>

Our XQuery project is moving along, and now we plan to write a tree
parser and convert the AST into relational algebra.

It seems a challenging part of the work will be to write the tree
grammar itself. A common approach seems to be "copy & paste", however
this creates a problem with maintainability since the rewrite rules in
the parser grammar will change over time as we work our way through
it.

Any ideas about how to make this as painless as possible? What is your
workflow for writing tree parser for large grammers?

Thanks,
Andreas

From stevagewp at gmail.com  Fri Feb  1 08:55:03 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Sat, 2 Feb 2008 03:55:03 +1100
Subject: [antlr-interest] Bug? "new (new" code generated.
In-Reply-To: <f0fcc6820802010737v49a38813u5e6cb012cbcece1e@mail.gmail.com>
References: <b8ceeef70801312358ia29d6f3n3abe85bf8f1f25dd@mail.gmail.com>
	<b8ceeef70802010559g59b8d600h8d2b291d0fb3abd6@mail.gmail.com>
	<f0fcc6820802010737v49a38813u5e6cb012cbcece1e@mail.gmail.com>
Message-ID: <b8ceeef70802010855y5caaaabfl26ab0bb68bf6d53d@mail.gmail.com>

On 2/2/08, Mark Volkmann <r.mark.volkmann at gmail.com> wrote:
> I think I ran into this same problem. I believe the following is a
> true statement.
>
> If your lexer grammar and parser grammar are in separate files then in
> order to debug the parser grammar using ANTLRWorks, you have to use
> remote debugging.

If so, then the following is also a true statement:

The benefits of having a lexer grammar and parser grammar in separate
files are outweighed by the inconvenience of not being able to use
ANTLRworks.

:)

I think one of the difficulties I'm having is that I don't *have* a
"build script" to modify. I guess there's an unstated, fairly
reasonable assumption that one is attempting to build a parser that
does something: hence one sooner or later has to write a program that
does something with it. Hence, one has a build infrastructure with a
script of some kind.

Unfortunately, I don't have any of that, because I"m not attempting to
build a working program here; my goal is purely to produce a grammar
that describes a certain language. I'm using ANTLR primarily to verify
that the grammar is in fact correct. I don't really expect to use the
generated Java file for anything.

All of this explains why I panic whenever the ANTLRworks IDE fails for
some reason - I don't have much way of investigating the problem. But
I guess I'll have to look at setting up a more serious build
infrastructure than I have so far.

(in the short term, I've remerged my two grammars)

Steve

From stevagewp at gmail.com  Fri Feb  1 09:08:22 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Sat, 2 Feb 2008 04:08:22 +1100
Subject: [antlr-interest] Lexer rule problem - ANTLR 2.7.7
In-Reply-To: <20080201074527.AF0DB11EBBE@www.antlr.org>
References: <mailman.9370.1201799079.2502.antlr-interest@antlr.org>
	<005601c86435$1710cb40$0300a8c0@chesterford>
	<20080201074527.AF0DB11EBBE@www.antlr.org>
Message-ID: <b8ceeef70802010908v15c6d397m5c9dba6eb265c2b4@mail.gmail.com>

On 2/1/08, Gavin Lambert <antlr at mirality.co.nz> wrote:
> Unit testing.  Construct a test harness for your lexer/parser in
> the language of your choice (eg. via JUnit, NUnit, CppUnit, or one
> of the many other frameworks) and run it frequently to ensure that
> changes you've made to your grammar haven't broken anything.

Is there any tutorial on this? It sounds like a good idea.

Steve

From r.mark.volkmann at gmail.com  Fri Feb  1 09:47:28 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Fri, 1 Feb 2008 11:47:28 -0600
Subject: [antlr-interest] Bug? "new (new" code generated.
In-Reply-To: <b8ceeef70802010855y5caaaabfl26ab0bb68bf6d53d@mail.gmail.com>
References: <b8ceeef70801312358ia29d6f3n3abe85bf8f1f25dd@mail.gmail.com>
	<b8ceeef70802010559g59b8d600h8d2b291d0fb3abd6@mail.gmail.com>
	<f0fcc6820802010737v49a38813u5e6cb012cbcece1e@mail.gmail.com>
	<b8ceeef70802010855y5caaaabfl26ab0bb68bf6d53d@mail.gmail.com>
Message-ID: <f0fcc6820802010947i3a4e1e5ej30db1ffd75bc30ec@mail.gmail.com>

On Feb 1, 2008 10:55 AM, Steve Bennett <stevagewp at gmail.com> wrote:
> On 2/2/08, Mark Volkmann <r.mark.volkmann at gmail.com> wrote:
> > I think I ran into this same problem. I believe the following is a
> > true statement.
> >
> > If your lexer grammar and parser grammar are in separate files then in
> > order to debug the parser grammar using ANTLRWorks, you have to use
> > remote debugging.
>
> If so, then the following is also a true statement:
>
> The benefits of having a lexer grammar and parser grammar in separate
> files are outweighed by the inconvenience of not being able to use
> ANTLRworks.
>
> :)

I don't understand why ANTLRWorks can't deal with the grammars being
in separate files and support debugging without using the remote
option. I doubt this is something it couldn't do. I suspect it's just
something that Jean Bovet hasn't gotten around to implementing.

> I think one of the difficulties I'm having is that I don't *have* a
> "build script" to modify. I guess there's an unstated, fairly
> reasonable assumption that one is attempting to build a parser that
> does something: hence one sooner or later has to write a program that
> does something with it. Hence, one has a build infrastructure with a
> script of some kind.
>
> Unfortunately, I don't have any of that, because I"m not attempting to
> build a working program here; my goal is purely to produce a grammar
> that describes a certain language. I'm using ANTLR primarily to verify
> that the grammar is in fact correct. I don't really expect to use the
> generated Java file for anything.
>
> All of this explains why I panic whenever the ANTLRworks IDE fails for
> some reason - I don't have much way of investigating the problem. But
> I guess I'll have to look at setting up a more serious build
> infrastructure than I have so far.
>
> (in the short term, I've remerged my two grammars)

That makes sense. If you ever decide to create an Ant build script,
I'd be glad to help by sharing mine.

-- 
R. Mark Volkmann
Object Computing, Inc.

From r.mark.volkmann at gmail.com  Fri Feb  1 09:50:15 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Fri, 1 Feb 2008 11:50:15 -0600
Subject: [antlr-interest] Lexer rule problem - ANTLR 2.7.7
In-Reply-To: <b8ceeef70802010908v15c6d397m5c9dba6eb265c2b4@mail.gmail.com>
References: <mailman.9370.1201799079.2502.antlr-interest@antlr.org>
	<005601c86435$1710cb40$0300a8c0@chesterford>
	<20080201074527.AF0DB11EBBE@www.antlr.org>
	<b8ceeef70802010908v15c6d397m5c9dba6eb265c2b4@mail.gmail.com>
Message-ID: <f0fcc6820802010950r4724e9e8hdcd06c5f6d255f62@mail.gmail.com>

On Feb 1, 2008 11:08 AM, Steve Bennett <stevagewp at gmail.com> wrote:
> On 2/1/08, Gavin Lambert <antlr at mirality.co.nz> wrote:
> > Unit testing.  Construct a test harness for your lexer/parser in
> > the language of your choice (eg. via JUnit, NUnit, CppUnit, or one
> > of the many other frameworks) and run it frequently to ensure that
> > changes you've made to your grammar haven't broken anything.
>
> Is there any tutorial on this? It sounds like a good idea.

There is a tutorial on gUnit at
http://www.antlr.org/wiki/display/ANTLR3/gUnit+-+Grammar+Unit+Testing.
I think the latest version doesn't work with recent ANTLR intermediate
builds though. Hopefully there will be an update soon.

-- 
R. Mark Volkmann
Object Computing, Inc.

From discontinuum at gmail.com  Fri Feb  1 09:51:39 2008
From: discontinuum at gmail.com (Erik Kratochvil)
Date: Fri, 1 Feb 2008 18:51:39 +0100
Subject: [antlr-interest] tokenVocab and certain rules cause
	NullPointerException in org.antlr.Tool
Message-ID: <f4dc39b90802010951q4a971888ledebce3801d86a31@mail.gmail.com>

Good evening (at least to all in my timezone ;).

I have encountered an extremely odd behaviour while experimenting with
the following grammar:

grammar Expr;
options { tokenVocab = Basic; }
r: (~S)+;
S:';';
W:' ';

The Basic.tokens file contains one line only (well, two lines as a
matter of fact because antlr expects a newline after each token
definition)

Gosub=10

The problem is that the Lexer/Parser cannot be generated,
org.antlr.Tool fails with

ANTLR Parser Generator  Version 3.0.1 (August 13, 2007)  1989-2007
error(10):  internal error: Expr.g : java.lang.NullPointerException
org.antlr.codegen.Target.getTokenTypeAsTargetLabel(Target.java:146)
org.antlr.codegen.CodeGenerator.getTokenTypeAsTargetLabel(CodeGenerator.java:825)
...
org.antlr.Tool.main(Tool.java:70)

The funny thing is that if I slightly change the rule *r*, the
Lexer/Parser is generated without any complaint.

grammar Expr;
options { tokenVocab = Basic; }
r: (S)+; // S instead of ~S
S:';';
W:' ';

The truly funny thing is that when I remove the tokenVocab clause from
the original grammar, the Lexer/Parser is -again- generated without
any complaint.

grammar Expr;
// no tokenVocab here
r: (~S)+;
S:';';
W:' ';

Does anyone know what may be wrong?


-- 
Erik Kratochvil

From phreed at gmail.com  Fri Feb  1 10:02:13 2008
From: phreed at gmail.com (Fred)
Date: Fri, 1 Feb 2008 12:02:13 -0600
Subject: [antlr-interest] Extensions which I have found useful
Message-ID: <cb0c557b0802011002m1c0a53fesb5e6fc9be0660d37@mail.gmail.com>

A couple of items which I have found useful in the development of an
IDL parser (with constraints).

----------
For StringTemplates, provide a toSubList(List list, String formatName)
method in AttributeRenderer similar to its toString(Object obj, String
formatName) method.
The toSubList() method would provide formatting of attribute lists.
(I can explain the scenario where this was needed if you care.)
The method is useful when the order, position, presence of elements in
a list attribute need to be changed prior to formatting its elements.
This could be generalized to include the 'separator' argument.
At present the toSubList() method is called from the model prior to
invoking the template.
I believe that it would be more appropriate to perform this formatting
in the view (i.e. template).

-------------
Modify the *Walker.input to be a stack rather than a single variable.
Then similar to what is done with scope, allow the position in the AST
to be changed (input = new CommonTreeNodeStream(subtree))  as the rule
is entered.
(In my current implementation the subtree is obtained from a symbol table.)
Normally, a preparatory pass through the AST to augment the symbol
table with the relevant information would be performed but that makes
the association less clear.
Conceptually, the input stack provides a way to "lazily" augment the
symbol table.

From lefevrol at yahoo.com  Fri Feb  1 11:18:10 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Fri, 01 Feb 2008 20:18:10 +0100
Subject: [antlr-interest] internal error
Message-ID: <fnvr9t$dhd$1@ger.gmane.org>

When ANTLR blows up with:

    error(10):  internal error: ListExpr.g :
    java.lang.IllegalArgumentException: <some message>

when trying to process a grammar, is it a bug?

Thanks,

-- O.L.


From jaluber at gmx.de  Fri Feb  1 11:27:34 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 01 Feb 2008 20:27:34 +0100
Subject: [antlr-interest] internal error
In-Reply-To: <fnvr9t$dhd$1@ger.gmane.org>
References: <fnvr9t$dhd$1@ger.gmane.org>
Message-ID: <47A372A6.3010001@gmx.de>

Olivier Lefevre schrieb:
> When ANTLR blows up with:
> 
>    error(10):  internal error: ListExpr.g :
>    java.lang.IllegalArgumentException: <some message>
> 
> when trying to process a grammar, is it a bug?
> 
> Thanks,
> 
> -- O.L.
> 

Without having seen your grammar - or the actual exception message - we 
can't say. It would be nice, if you could distill a minimal example 
exhibiting this behaviour, if you don't want to post your original grammar.

Johannes

From mark.edgeworth at scarletcode.co.uk  Fri Feb  1 11:32:19 2008
From: mark.edgeworth at scarletcode.co.uk (Mark Edgeworth)
Date: Fri, 1 Feb 2008 19:32:19 -0000
Subject: [antlr-interest] Lexer rule problem - ANTLR 2.7.7
In-Reply-To: <0MKxIC-1JKqaY0WVr-0005mT@mx.kundenserver.de>
Message-ID: <007c01c86509$29ffcc40$0300a8c0@chesterford>

Hey, Gavin, thanks so much for the personalized reply!  I am continually
impressed by the level of interest and support form members of this group.

I have been using the gUnit environment for catching cases like this as you
suggest, and I'm reasonably happy with that approach.  
However there are grammar constructs (such as the one in the example) which
should (may) be detectable as ambiguous without having to create a test.
The problem with a test is that it is not going to be portable to the next
grammar I develop.

To some extent antlr already does this - for example, it can spot when a
rule has two ambiguous paths and will warn you.  I guess I was prompting for
this facility to be improved.  A prime example might be a check to ensure
that the cardinality of each token in a parse rule matches that in the tree
construction.  For example, to catch the fault in the following:
 my_rule: 
	a b+ c*  -> ^(a b+ c+)

...which gives a RewriteEmptyStreamException if the right (wrong) input is
given.  I could write a test case, but only if I spot it.  The first person
to trip over this might be my customer...

I love ANTLR, but boy is it frustrating at times!

Many thanks,

Mark Edgeworth 
 
Incoras Solutions Ltd.
Tel:  +44 (0)700 580 8048;  Fax: +44 (0)700 597 8009
Skype: 'markedgeworth'

-----Original Message-----
From: Gavin Lambert [mailto:antlr at mirality.co.nz] 
At 07:14 1/02/2008, Mark Edgeworth wrote:
 >As a relatively new user of ANTLR I have spent literally ages on 

 >just this sort of issue recently.  ANTLR is a great tool and 
just
 >so powerful, but will often accept 'unusual' grammar constructs
 >from newbies like me that can never work properly.  Any extra
 >build time checks are worth their weight in gold to me as I
 >learn... (ie 'lint' for .g files?)

Unit testing.  Construct a test harness for your lexer/parser in 
the language of your choice (eg. via JUnit, NUnit, CppUnit, or one 
of the many other frameworks) and run it frequently to ensure that 
changes you've made to your grammar haven't broken anything.

It's not quite build time (although it could be -- some build 
utilities can automatically run tests after building) but it's 
very specific and helps you make sure that your parser is doing 
what you think it's doing.

It's especially useful for testing the lexer in isolation, since 
you can't really do that properly in ANTLRworks.


From lefevrol at yahoo.com  Fri Feb  1 11:42:12 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Fri, 01 Feb 2008 20:42:12 +0100
Subject: [antlr-interest] internal error
In-Reply-To: <47A372A6.3010001@gmx.de>
References: <fnvr9t$dhd$1@ger.gmane.org> <47A372A6.3010001@gmx.de>
Message-ID: <fnvsmv$iuf$1@ger.gmane.org>

The grammar (the sorry abortion of one, rather) and the
stack trace on the console are attached. Frankly I was
asking whether it is a bug out of courtesy: when faced
with invalid input, a tool like ANTLR should definitely
put a nice message, not blow up.

Regards,

-- O.L.

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Bug1.g
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20080201/7da1e624/attachment.pl 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Bug1.txt
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20080201/7da1e624/attachment.txt 

From r.mark.volkmann at gmail.com  Fri Feb  1 12:28:50 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Fri, 1 Feb 2008 14:28:50 -0600
Subject: [antlr-interest] internal error
In-Reply-To: <fnvsmv$iuf$1@ger.gmane.org>
References: <fnvr9t$dhd$1@ger.gmane.org> <47A372A6.3010001@gmx.de>
	<fnvsmv$iuf$1@ger.gmane.org>
Message-ID: <f0fcc6820802011228y4d3c20b3h87a7543134f65011@mail.gmail.com>

On Feb 1, 2008 1:42 PM, Olivier Lefevre <lefevrol at yahoo.com> wrote:
> The grammar (the sorry abortion of one, rather) and the
> stack trace on the console are attached. Frankly I was
> asking whether it is a bug out of courtesy: when faced
> with invalid input, a tool like ANTLR should definitely
> put a nice message, not blow up.
>
> Regards,
>
> -- O.L.
>
>
> grammar Bug1;
>
> options {
>         output = AST;
> }
>
> tokens {
>         ARRAY; ITEM;
> }
>
> prog:   stat+ ;
>
> stat:
>         list NEWLINE -> list
>     |   NEWLINE      ->

I think you don't need the line above if you change NEWLINE the way I
show below.

>     ;
>
> list : '['! (elements)? ']'! -> ^(ARRAY elements) ;

You are using AST operators (in this case !) and a tree construction
rewrite rule in the same rule alternative. I thought that wasn't
allowed. I think you want this.

list: '[' elements? ']' -> ^(ARRAY elements?);

or maybe

list: '[' elements ']' -> ^(ARRAY elements);

> elements : item (','! item)* ;
>
> // ints only for now
> item : INT -> ^(ITEM item) ;

Should this be change to the following?

item: INT -> ^(ITEM INT);

> INT: '0'..'9'+ ;
> NEWLINE:'\r'?'\n' ;

Try the following to allow any number of newlines to terminate a statement.

NEWLINE: ('\r'? '\n')+

> WS: (' '|'\t'|'\n'|'\r')+ {skip();} ;

If you want to use newlines as statement terminators then you can't
skip the characters that make them up. Try changing the line above to
this.

WS: (' ' | '\t')+ { skip(); };

> ANTLR Parser Generator  Version 3.0.1 (August 13, 2007)  1989-2007
> error(10):  internal error: Bug1.g : java.lang.IllegalArgumentException: Can't find template tokenRefBangTrack.st
> org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate(StringTemplateGroup.java:485)
> org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:372)
> org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:384)
> org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate(StringTemplateGroup.java:464)
> org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:372)
> org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:384)
> org.antlr.codegen.CodeGenTreeWalker.getTokenElementST(CodeGenTreeWalker.java:160)
> org.antlr.codegen.CodeGenTreeWalker.atom(CodeGenTreeWalker.java:1992)
> org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1641)
> org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1490)
> org.antlr.codegen.CodeGenTreeWalker.alternative(CodeGenTreeWalker.java:1252)
> org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:1037)
> org.antlr.codegen.CodeGenTreeWalker.rule(CodeGenTreeWalker.java:753)
> org.antlr.codegen.CodeGenTreeWalker.rules(CodeGenTreeWalker.java:544)
> org.antlr.codegen.CodeGenTreeWalker.grammarSpec(CodeGenTreeWalker.java:486)
> org.antlr.codegen.CodeGenTreeWalker.grammar(CodeGenTreeWalker.java:333)
> org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:406)
> org.antlr.Tool.processGrammar(Tool.java:347)
> org.antlr.Tool.process(Tool.java:268)
> org.antlr.Tool.main(Tool.java:70)
>
>



-- 
R. Mark Volkmann
Object Computing, Inc.

From dejas9000 at gmail.com  Fri Feb  1 12:29:39 2008
From: dejas9000 at gmail.com (Dejas Ninethousand)
Date: Fri, 1 Feb 2008 14:29:39 -0600
Subject: [antlr-interest] Possible bug in swapping intermediary terminal?
Message-ID: <38a26f430802011229h65682482t14d1ce9d4edfd7ec@mail.gmail.com>

Hi,

I'm having a problem getting a grammar to to accept "foo.bar.Dec" and I'm
not sure why.  I think it may be a bug.  Consider my initial grammar:

type_identifier
    : IDENTIFIER
    |
    TYPE_IDENTIFIER_FULL
    ;

IDENTIFIER
    : ('a'..'z'|'A'..'Z')('a'..'z'|'A'..'Z'|'0'..'9')*
    ;

PACKAGE_SEPARATOR
    :    '.'
    ;

TYPE_IDENTIFIER_FULL
    : IDENTIFIER (PACKAGE_SEPARATOR IDENTIFIER)+
    ;

This grammar accepts the "foo.bar.Dec" input no problems.  However, I wanted
to modify the grammar to eliminate the the intermediary TYPE_IDENTIFIER_FULL
terminal by taking its rhs and allowing it to directly derive from
type_identifier:

type_identifier
    : IDENTIFIER
    |
    IDENTIFIER (PACKAGE_SEPARATOR IDENTIFIER)+
    ;

IDENTIFIER
    : ('a'..'z'|'A'..'Z')('a'..'z'|'A'..'Z'|'0'..'9')*
    ;

PACKAGE_SEPARATOR
    :    '.'
    ;

Now when I give ANTLRWorks the same "foo.bar.Dec" to interpret, it builds
the tree :

<grammar XXX>
type_identifier
foo
.
bar
.
Dec
NoViableAltException


... and I don't understand why.  These grammars seem equivalent to me.  Is
there something I'm not seeing or is this a bug?

Thanks,
Dejas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080201/bbe86d10/attachment.html 

From r.mark.volkmann at gmail.com  Fri Feb  1 12:38:57 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Fri, 1 Feb 2008 14:38:57 -0600
Subject: [antlr-interest] Possible bug in swapping intermediary terminal?
In-Reply-To: <38a26f430802011229h65682482t14d1ce9d4edfd7ec@mail.gmail.com>
References: <38a26f430802011229h65682482t14d1ce9d4edfd7ec@mail.gmail.com>
Message-ID: <f0fcc6820802011238p5616e6eew4daed67c6ec7f3cb@mail.gmail.com>

On Feb 1, 2008 2:29 PM, Dejas Ninethousand <dejas9000 at gmail.com> wrote:
> Hi,
>
> I'm having a problem getting a grammar to to accept "foo.bar.Dec" and I'm
> not sure why.  I think it may be a bug.  Consider my initial grammar:
>
> type_identifier
>      : IDENTIFIER
>     |
>     TYPE_IDENTIFIER_FULL
>     ;
>
> IDENTIFIER
>     : ('a'..'z'|'A'..'Z')('a'..'z'|'A'..'Z'|'0'..'9')*
>      ;
>
> PACKAGE_SEPARATOR
>     :    '.'
>     ;
>
> TYPE_IDENTIFIER_FULL
>     : IDENTIFIER (PACKAGE_SEPARATOR IDENTIFIER)+
>     ;
>
> This grammar accepts the "foo.bar.Dec" input no problems.  However, I wanted
> to modify the grammar to eliminate the the intermediary TYPE_IDENTIFIER_FULL
> terminal by taking its rhs and allowing it to directly derive from
> type_identifier:
>
> type_identifier
>     : IDENTIFIER
>     |
>     IDENTIFIER (PACKAGE_SEPARATOR IDENTIFIER)+
>     ;
>
> IDENTIFIER
>     : ('a'..'z'|'A'..'Z')('a'..'z'|'A'..'Z'|'0'..'9')*
>      ;
>
> PACKAGE_SEPARATOR
>     :    '.'
>     ;
>
> Now when I give ANTLRWorks the same "foo.bar.Dec" to interpret, it builds
> the tree :
>
> <grammar XXX>
>  type_identifier
> foo
> .
> bar
> .
> Dec
> NoViableAltException
>
>
> ... and I don't understand why.  These grammars seem equivalent to me.  Is
> there something I'm not seeing or is this a bug?

I hate it when people say "Works for me!"  ;-)
Unfortunately that's what I have to say here. I ran the ANTLRWorks
debugger on the following grammar and gave it your input of
"foo.bar.Dec" and it created the correct parse tree.

grammar package;

type_identifier
  : IDENTIFIER
  | IDENTIFIER (PACKAGE_SEPARATOR IDENTIFIER)+
  ;

IDENTIFIER
  : ('a'..'z'|'A'..'Z')('a'..'z'|'A'..'Z'|'0'..'9')*
  ;

PACKAGE_SEPARATOR: '.';

-- 
R. Mark Volkmann
Object Computing, Inc.

From antlr at mirality.co.nz  Fri Feb  1 12:42:01 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 02 Feb 2008 09:42:01 +1300
Subject: [antlr-interest] tokenVocab and certain rules cause
 NullPointerException in org.antlr.Tool
In-Reply-To: <f4dc39b90802010951q4a971888ledebce3801d86a31@mail.gmail.co
 m>
References: <f4dc39b90802010951q4a971888ledebce3801d86a31@mail.gmail.com>
Message-ID: <20080201204220.940B811ED28@www.antlr.org>

At 06:51 2/02/2008, Erik Kratochvil wrote:
 >
 >grammar Expr;
 >options { tokenVocab = Basic; }
 >r: (~S)+;
 >S:';';
 >W:' ';
[...]
 >The funny thing is that if I slightly change the rule *r*, the
 >Lexer/Parser is generated without any complaint.

Generally I've found that ~ only works properly in lexer rules, 
not parser rules.

 >The truly funny thing is that when I remove the tokenVocab 
clause
 >from the original grammar, the Lexer/Parser is -again- generated 

 >without any complaint.

No idea about that one :)

Although, since you're making a combined grammar, the options 
section applies to both lexer and parser, which might be confusing 
things.  I'm not sure if this is valid syntax, but try this:

lexer::options { tokenVocab = Basic; }

Failing that, try splitting your grammar into separate lexer and 
parser grammars.


From antlr at mirality.co.nz  Fri Feb  1 12:52:08 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 02 Feb 2008 09:52:08 +1300
Subject: [antlr-interest] Possible bug in swapping intermediary terminal?
In-Reply-To: <38a26f430802011229h65682482t14d1ce9d4edfd7ec@mail.gmail.co
 m>
References: <38a26f430802011229h65682482t14d1ce9d4edfd7ec@mail.gmail.com>
Message-ID: <20080201205219.8002B11ED1D@www.antlr.org>

At 09:29 2/02/2008, Dejas Ninethousand wrote:

>type_identifier
>     : IDENTIFIER
>     |
>     IDENTIFIER (PACKAGE_SEPARATOR IDENTIFIER)+
>     ;

It's generally a bad idea to have the same left-prefix in 
different alts, since ANTLR has a tendency to fall back on LL(1) 
behaviour.  Try rewriting this like so:

type_identifier
     : IDENTIFIER (PACKAGE_SEPARATOR IDENTIFIER)*
     ;

Incidentally (and assuming that you've got a standard 
hidden-channel WS rule), by moving this pattern into the parser 
from the lexer you've instantly said that these inputs are still 
valid type_identifiers:
   "foo.bar.Dec"
   "foo.         bar  .    Dec"
   "foo   .
           bar.
      Dec"

If that's not desired behaviour, then you should put it back into 
the lexer (since the WS rule is a sibling of other lexer rules, 
you have to explicitly mention when WS is allowed within another 
lexer rule).


From lefevrol at yahoo.com  Fri Feb  1 12:54:11 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Fri, 01 Feb 2008 21:54:11 +0100
Subject: [antlr-interest] internal error
In-Reply-To: <f0fcc6820802011228y4d3c20b3h87a7543134f65011@mail.gmail.com>
References: <fnvr9t$dhd$1@ger.gmane.org>
	<47A372A6.3010001@gmx.de>	<fnvsmv$iuf$1@ger.gmane.org>
	<f0fcc6820802011228y4d3c20b3h87a7543134f65011@mail.gmail.com>
Message-ID: <fo00tt$1v0$1@ger.gmane.org>

Hi Mark,

Thanks for the advice. I was pilfering the JSON grammar but
my mental map of ANTLR is still very imperfect. Doesn't
ANTLR still have a bug, though? It should *never* blow up.

>> list : '['! (elements)? ']'! -> ^(ARRAY elements) ;
> 
> You are using AST operators (in this case !) and a tree construction
> rewrite rule in the same rule alternative. I thought that wasn't
> allowed.

OK, that makes sense.

> I think you want this: 
> list: '[' elements? ']' -> ^(ARRAY elements?);

I am unclear as to what the '?' will do in a tree rewrite rule.

> or maybe
> list: '[' elements ']' -> ^(ARRAY elements);

Intuitively that makes more sense to me.

> Should this be change to the following?
> item: INT -> ^(ITEM INT);

Actually I think one can dispense with the ITEM token entirely and
have items hang directly from the ARRAY token in this case since
they are atomic.

>> WS: (' '|'\t'|'\n'|'\r')+ {skip();} ;
> 
> If you want to use newlines as statement terminators then you can't
> skip the characters that make them up.

Expr.g in ? 3.3 of the book does just that, though. Isn't that what
the NEWLINE as a stat option is for?

The attached grammar works fine but only for a single line of input.
With more lines it puts:

Exception in thread "main" 
org.antlr.runtime.tree.RewriteEmptyStreamException: rule elements
         at 
org.antlr.runtime.tree.RewriteRuleElementStream._next(RewriteRuleElementStream.java:158)
         at 
org.antlr.runtime.tree.RewriteRuleElementStream.next(RewriteRuleElementStream.java:145)
         at ListExprParser.list(ListExprParser.java:307)
         at ListExprParser.stat(ListExprParser.java:158)
         at ListExprParser.prog(ListExprParser.java:78)
         at Test_ListExpr.main(Test_ListExpr.java:12)

which is really unhelpful. It looks like ANTLR is blowing up again.

Regards,

-- O.L.

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: ListExpr.g
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20080201/169d12ed/attachment.pl 

From dejas9000 at gmail.com  Fri Feb  1 12:57:48 2008
From: dejas9000 at gmail.com (Dejas Ninethousand)
Date: Fri, 1 Feb 2008 14:57:48 -0600
Subject: [antlr-interest] Possible bug in swapping intermediary terminal?
In-Reply-To: <47a38684.20664e0a.2720.52fdSMTPIN_ADDED@mx.google.com>
References: <38a26f430802011229h65682482t14d1ce9d4edfd7ec@mail.gmail.com>
	<47a38684.20664e0a.2720.52fdSMTPIN_ADDED@mx.google.com>
Message-ID: <38a26f430802011257g6f681a46oeb78da9e8ca0da45@mail.gmail.com>

 changing IDENTIFIER (PACKAGE_SEPARATOR IDENTIFIER)+ to IDENTIFIER
(PACKAGE_SEPARATOR IDENTIFIER)* produces the same problem.  Though that is a
good point about the whitespace... I had not considered that.

-- Dejas

On Feb 1, 2008 2:52 PM, Gavin Lambert <antlr at mirality.co.nz> wrote:

> At 09:29 2/02/2008, Dejas Ninethousand wrote:
>
> >type_identifier
> >     : IDENTIFIER
> >     |
> >     IDENTIFIER (PACKAGE_SEPARATOR IDENTIFIER)+
> >     ;
>
> It's generally a bad idea to have the same left-prefix in
> different alts, since ANTLR has a tendency to fall back on LL(1)
> behaviour.  Try rewriting this like so:
>
> type_identifier
>     : IDENTIFIER (PACKAGE_SEPARATOR IDENTIFIER)*
>     ;
>
> Incidentally (and assuming that you've got a standard
> hidden-channel WS rule), by moving this pattern into the parser
> from the lexer you've instantly said that these inputs are still
> valid type_identifiers:
>   "foo.bar.Dec"
>   "foo.         bar  .    Dec"
>   "foo   .
>           bar.
>      Dec"
>
> If that's not desired behaviour, then you should put it back into
> the lexer (since the WS rule is a sibling of other lexer rules,
> you have to explicitly mention when WS is allowed within another
> lexer rule).
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080201/424a0f2f/attachment.html 

From antlr at mirality.co.nz  Fri Feb  1 13:08:09 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 02 Feb 2008 10:08:09 +1300
Subject: [antlr-interest] Possible bug in swapping intermediary terminal?
In-Reply-To: <38a26f430802011257g6f681a46oeb78da9e8ca0da45@mail.gmail.co
 m>
References: <38a26f430802011229h65682482t14d1ce9d4edfd7ec@mail.gmail.com>
	<47a38684.20664e0a.2720.52fdSMTPIN_ADDED@mx.google.com>
	<38a26f430802011257g6f681a46oeb78da9e8ca0da45@mail.gmail.com>
Message-ID: <20080201210831.209B011ED04@www.antlr.org>

At 09:57 2/02/2008, Dejas Ninethousand wrote:

>changing IDENTIFIER (PACKAGE_SEPARATOR IDENTIFIER)+ to IDENTIFIER 
>(PACKAGE_SEPARATOR IDENTIFIER)* produces the same problem.

Did you just change that one alt, or did you also remove the first 
alt as I suggested?

Still, as Mark issued a "works for me!" then maybe you need to try 
running a different version of ANTLR.  Or alternatively you're 
testing with a different grammar than you're posting here, and 
it's some other aspect of the grammar that's confusing things.


From antlr at mirality.co.nz  Fri Feb  1 13:22:50 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 02 Feb 2008 10:22:50 +1300
Subject: [antlr-interest] internal error
In-Reply-To: <fo00tt$1v0$1@ger.gmane.org>
References: <fnvr9t$dhd$1@ger.gmane.org> <47A372A6.3010001@gmx.de>
	<fnvsmv$iuf$1@ger.gmane.org>
	<f0fcc6820802011228y4d3c20b3h87a7543134f65011@mail.gmail.com>
	<fo00tt$1v0$1@ger.gmane.org>
Message-ID: <20080201212306.9B22111ED42@www.antlr.org>

At 09:54 2/02/2008, Olivier Lefevre wrote:
 >
 >Thanks for the advice. I was pilfering the JSON grammar but
 >my mental map of ANTLR is still very imperfect. Doesn't
 >ANTLR still have a bug, though? It should *never* blow up.

True, but ANTLR's own error handling is a little 
flaky at present since it's still using ANTLR 2.7 
internally.  This should improve in time.

 >> I think you want this:
 >> list: '[' elements? ']' -> ^(ARRAY elements?);
 >
 >I am unclear as to what the '?' will do in a tree rewrite rule.

The cardinality of a rewrite rule element must 
match the cardinality of the actual element.  In 
the case above, you're telling the rewrite engine 
that "elements" might not have any value, so it 
needs to insert a test to check for that before 
inserting it into the tree.  Had you left the ? 
out, it treats it as an assertion that "elements" 
always has exactly one value and thus won't 
include the test (for performance reasons), which 
will lead to a runtime exception if it turns out 
that it wasn't actually supplied.

Similarly, when matching something with + or * on 
the left you should use the same in the rewrite 
rule.  Although it's the cardinality that's 
important, not having an exact match -- for 
example this rule is correct:

foo: a+=bar SEP a+=bar SEP a+=bar -> ^(BARLIST $a+);

Since even though there's no +s on the left 
you're still generating 1..n values in "a".

 >Expr.g in ? 3.3 of the book does just that, though. Isn't that
 >what the NEWLINE as a stat option is for?

I haven't seen that example, but it's generally a 
bad idea to match the same set of characters from 
multiple lexer rules, since it causes 
ambiguity.  In particular, if you have both a 
NEWLINE and a WS rule (and assuming the NEWLINE 
rule is listed first and only matches one newline 
sequence) then NEWLINE will be matched whenever 
there is a single newline in the input, but WS 
will be matched instead whenever there are 
multiple newlines, or newlines followed by other 
whitespace (since that's the longest match 
possible).  In addition, you can't refer to any 
hidden (or off-channel) token from the parser 
directly.  So what Mark was saying is true.

 >Exception in thread "main"
 >org.antlr.runtime.tree.RewriteEmptyStreamException: 
rule elements
 >         at
 >org.antlr.runtime.tree.RewriteRuleElementStream._next(RewriteRuleEl
 >ementStream.java:158)
 >         at
 >org.antlr.runtime.tree.RewriteRuleElementStream.next(RewriteRuleEle
 >mentStream.java:145)
 >         at ListExprParser.list(ListExprParser.java:307)
 >         at ListExprParser.stat(ListExprParser.java:158)
 >         at ListExprParser.prog(ListExprParser.java:78)
 >         at Test_ListExpr.main(Test_ListExpr.java:12)

It's not that unhelpful -- it's telling you that 
there's a problem with the rewrite rule in the 
"list" rule.  Sure, it's not a pretty message, 
but it gives you all the info you need.

 >list : '[' (elements)? ']'
 >        -> ^(ARRAY elements)
 >     ;

There's that cardinality mismatch again.  This 
will throw the exception above given an input of 
"[]", since as I explained above "elements" may 
not have a value but the rewrite rule is asserting that it does.

 >NEWLINE:'\r'?'\n' ;
 >WS: (' '|'\t'|'\n'|'\r')+ {skip();} ;

And again you've still got the newline ambiguity.  Don't do that.


From r.mark.volkmann at gmail.com  Fri Feb  1 13:24:22 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Fri, 1 Feb 2008 15:24:22 -0600
Subject: [antlr-interest] Possible bug in swapping intermediary terminal?
In-Reply-To: <38a26f430802011247q7f86ebf3tf98673066064dfa4@mail.gmail.com>
References: <38a26f430802011229h65682482t14d1ce9d4edfd7ec@mail.gmail.com>
	<f0fcc6820802011238p5616e6eew4daed67c6ec7f3cb@mail.gmail.com>
	<38a26f430802011247q7f86ebf3tf98673066064dfa4@mail.gmail.com>
Message-ID: <f0fcc6820802011324k6e915949g851994e37eebc5ea@mail.gmail.com>

On Feb 1, 2008 2:47 PM, Dejas Ninethousand <dejas9000 at gmail.com> wrote:
> Can you send me your grammar file?

It's attached.

> Also I'm using ANTLRWorks 1.5  Is that the same version for you as well?

I think you mean 1.1.5. Yes, that's what I tested with. I just
downloaded 1.1.7 and tried that. That works too. A screenshot is
attached.

> On Feb 1, 2008 2:38 PM, Mark Volkmann <r.mark.volkmann at gmail.com> wrote:
>
> >
> >
> >
> > On Feb 1, 2008 2:29 PM, Dejas Ninethousand <dejas9000 at gmail.com> wrote:
> > > Hi,
> > >
> > > I'm having a problem getting a grammar to to accept "foo.bar.Dec" and
> I'm
> > > not sure why.  I think it may be a bug.  Consider my initial grammar:
> > >
> > > type_identifier
> > >      : IDENTIFIER
> > >     |
> > >     TYPE_IDENTIFIER_FULL
> > >     ;
> > >
> > > IDENTIFIER
> > >     : ('a'..'z'|'A'..'Z')('a'..'z'|'A'..'Z'|'0'..'9')*
> > >      ;
> > >
> > > PACKAGE_SEPARATOR
> > >     :    '.'
> > >     ;
> > >
> > > TYPE_IDENTIFIER_FULL
> > >     : IDENTIFIER (PACKAGE_SEPARATOR IDENTIFIER)+
> > >     ;
> > >
> > > This grammar accepts the "foo.bar.Dec" input no problems.  However, I
> wanted
> > > to modify the grammar to eliminate the the intermediary
> TYPE_IDENTIFIER_FULL
> > > terminal by taking its rhs and allowing it to directly derive from
> > > type_identifier:
> > >
> > > type_identifier
> > >     : IDENTIFIER
> > >     |
> > >     IDENTIFIER (PACKAGE_SEPARATOR IDENTIFIER)+
> > >     ;
> > >
> > > IDENTIFIER
> > >     : ('a'..'z'|'A'..'Z')('a'..'z'|'A'..'Z'|'0'..'9')*
> > >      ;
> > >
> > > PACKAGE_SEPARATOR
> > >     :    '.'
> > >     ;
> > >
> > > Now when I give ANTLRWorks the same "foo.bar.Dec" to interpret, it
> builds
> > > the tree :
> > >
> > > <grammar XXX>
> > >  type_identifier
> > > foo
> > > .
> > > bar
> > > .
> > > Dec
> > > NoViableAltException
> > >
> > >
> > > ... and I don't understand why.  These grammars seem equivalent to me.
> Is
> > > there something I'm not seeing or is this a bug?
> >
> > I hate it when people say "Works for me!"  ;-)
> > Unfortunately that's what I have to say here. I ran the ANTLRWorks
> > debugger on the following grammar and gave it your input of
> > "foo.bar.Dec" and it created the correct parse tree.
> >
> > grammar package;
> >
> >
> >
> >
> > type_identifier
> >  : IDENTIFIER
> >  | IDENTIFIER (PACKAGE_SEPARATOR IDENTIFIER)+
> >  ;
> >
> > IDENTIFIER
> >  : ('a'..'z'|'A'..'Z')('a'..'z'|'A'..'Z'|'0'..'9')*
> >  ;
> >
> > PACKAGE_SEPARATOR: '.';
> >
> > --
> > R. Mark Volkmann
> > Object Computing, Inc.
> >
>
>



-- 
R. Mark Volkmann
Object Computing, Inc.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: package.g
Type: application/octet-stream
Size: 197 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080201/a52ae0f0/attachment-0001.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Picture 1.png
Type: image/png
Size: 23242 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080201/a52ae0f0/attachment-0001.png 

From lefevrol at yahoo.com  Fri Feb  1 13:41:38 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Fri, 01 Feb 2008 22:41:38 +0100
Subject: [antlr-interest] internal error
In-Reply-To: <20080201212306.9B22111ED42@www.antlr.org>
References: <fnvr9t$dhd$1@ger.gmane.org>
	<47A372A6.3010001@gmx.de>	<fnvsmv$iuf$1@ger.gmane.org>	<f0fcc6820802011228y4d3c20b3h87a7543134f65011@mail.gmail.com>	<fo00tt$1v0$1@ger.gmane.org>
	<20080201212306.9B22111ED42@www.antlr.org>
Message-ID: <fo03mi$b6j$1@ger.gmane.org>

Thanks again very much for the explanations.

> The cardinality of a rewrite rule element must match the cardinality of 
> the actual element.  In the case above, you're telling the rewrite 
> engine that "elements" might not have any value, so it needs to insert a 
> test to check for that before inserting it into the tree.  Had you left 
> the ? out, it treats it as an assertion that "elements" always has 
> exactly one value and thus won't include the test (for performance 
> reasons), which will lead to a runtime exception if it turns out that it 
> wasn't actually supplied.

Wonderful! As you pointed out farther down, that was the reason for the
RewriteEmptyStreamException I posted earlier, not the presence of multiple 
lines in the input (there was a "[]" in my inputs).

>> Expr.g in ? 3.3 of the book does just that, though. Isn't that
>> what the NEWLINE as a stat option is for?
> 
> I haven't seen that example

I have attached it. You don't need the book to get it, as all the
code from the book is available somewhere on the ANTLR site as a
zip file.

> In particular, if you have both a NEWLINE and a WS rule

But I need a WS because I want to allow superfluous spaces anywhere,
e.g. not just [1,2], [1, 2], [ 1 , 2 ] etc etc without encumbering
the array rule with ( *) and such.

> It's not that unhelpful 

OK, maybe with experience one can decode it but do all runtime
problems lead to blowups? Why doesn't it just say "Invalid input:
[] at line 3" or some such?

-- O.L.


From lefevrol at yahoo.com  Fri Feb  1 13:46:09 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Fri, 01 Feb 2008 22:46:09 +0100
Subject: [antlr-interest] internal error
In-Reply-To: <20080201212306.9B22111ED42@www.antlr.org>
References: <fnvr9t$dhd$1@ger.gmane.org>
	<47A372A6.3010001@gmx.de>	<fnvsmv$iuf$1@ger.gmane.org>	<f0fcc6820802011228y4d3c20b3h87a7543134f65011@mail.gmail.com>	<fo00tt$1v0$1@ger.gmane.org>
	<20080201212306.9B22111ED42@www.antlr.org>
Message-ID: <fo03v1$bvo$1@ger.gmane.org>

Sorry I forgot to attach the Expr.g I was referring to. Here it is.

-- O.L.

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Expr.g
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20080201/bdc18374/attachment.pl 

From lefevrol at yahoo.com  Fri Feb  1 14:02:14 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Fri, 01 Feb 2008 23:02:14 +0100
Subject: [antlr-interest] internal error
In-Reply-To: <f0fcc6820802011228y4d3c20b3h87a7543134f65011@mail.gmail.com>
References: <fnvr9t$dhd$1@ger.gmane.org>
	<47A372A6.3010001@gmx.de>	<fnvsmv$iuf$1@ger.gmane.org>
	<f0fcc6820802011228y4d3c20b3h87a7543134f65011@mail.gmail.com>
Message-ID: <fo04t6$esv$1@ger.gmane.org>

> NEWLINE: ('\r'? '\n')+
> 
>> WS: (' '|'\t'|'\n'|'\r')+ {skip();} ;
> 
> If you want to use newlines as statement terminators then you can't
> skip the characters that make them up.

My understanding is that in the grammar in question NEWLINE will be
matched first, so it is OK to have a skip instruction in WS. But
it's true it is a contradiction (in intent, not in practice) to both
skip and process newlines. That is what the example from the book
does, though.

-- O.L.


From jaluber at gmx.de  Fri Feb  1 14:36:46 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 01 Feb 2008 23:36:46 +0100
Subject: [antlr-interest] internal error
In-Reply-To: <fo03mi$b6j$1@ger.gmane.org>
References: <fnvr9t$dhd$1@ger.gmane.org>	<47A372A6.3010001@gmx.de>	<fnvsmv$iuf$1@ger.gmane.org>	<f0fcc6820802011228y4d3c20b3h87a7543134f65011@mail.gmail.com>	<fo00tt$1v0$1@ger.gmane.org>	<20080201212306.9B22111ED42@www.antlr.org>
	<fo03mi$b6j$1@ger.gmane.org>
Message-ID: <47A39EFE.2000505@gmx.de>

Olivier Lefevre schrieb:
>> It's not that unhelpful 
> 
> OK, maybe with experience one can decode it but do all runtime
> problems lead to blowups? Why doesn't it just say "Invalid input:
> [] at line 3" or some such?

As Gavin said, ANTLR 3 still uses ANTLR 2.7.7 internally, which creates 
some limitations. Like unfriendly error messages. Maybe ANTLR 3.2 can 
finally bootstrap itself with a 3.x version.

Johannes

From antlr at mirality.co.nz  Fri Feb  1 14:33:48 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 02 Feb 2008 11:33:48 +1300
Subject: [antlr-interest] internal error
In-Reply-To: <fo03mi$b6j$1@ger.gmane.org>
References: <fnvr9t$dhd$1@ger.gmane.org> <47A372A6.3010001@gmx.de>
	<fnvsmv$iuf$1@ger.gmane.org>
	<f0fcc6820802011228y4d3c20b3h87a7543134f65011@mail.gmail.com>
	<fo00tt$1v0$1@ger.gmane.org>
	<20080201212306.9B22111ED42@www.antlr.org>
	<fo03mi$b6j$1@ger.gmane.org>
Message-ID: <20080201223359.E9A5511ED46@www.antlr.org>

At 10:41 2/02/2008, Olivier Lefevre wrote:
 >
 >But I need a WS because I want to allow superfluous spaces
 >anywhere, e.g. not just [1,2], [1, 2], [ 1 , 2 ] etc etc
 >without encumbering the array rule with ( *) and such.

If it's just superfluous spaces you want to keep, then you can 
simply remove the newline characters from the WS rule and 
everything will be fine.

If you want to permit superfluous newlines as well then really you 
shouldn't be trying to match them at the parser level.

Ok, yes, it's in that example you posted, but that seems a bit 
dodgy to me.  As I said before that will do the "wrong thing" when 
faced with multiple newlines or newlines followed by other 
whitespace.

 >OK, maybe with experience one can decode it but do all runtime
 >problems lead to blowups? Why doesn't it just say "Invalid 
input:
 >[] at line 3" or some such?

Really that ought to produce a compiler warning (or error), since 
the ANTLR compiler ought to be able to figure out the cardinality 
in most cases (although as I said before there are some constructs 
that can be misleading).

At runtime though it's mostly too late.  You see, it's already 
successfully matched "[]" as valid input (which it is, according 
to your grammar), and now it's trying to put that into an 
AST.  The rewrite rule is telling it that there must always be an 
"elements" term, but as it happens it doesn't have one.  What else 
can it do but to blow up?

This is where having unit tests to exercise your lexer/parser is a 
good idea, since you'll catch this sort of thing at that point 
(assuming your test cases are comprehensive enough).


From jimi at temporal-wave.com  Fri Feb  1 14:25:41 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 1 Feb 2008 14:25:41 -0800
Subject: [antlr-interest] internal error
In-Reply-To: <20080201223359.E9A5511ED46@www.antlr.org>
Message-ID: <"L7324065772D04e2485297CA850B483DF.1201906105.scalix.temporal-wave.com*"@MHS>

Perhaps better is to put the whitespace and/or new lines on their own 
channel, then use a gated predicate to see if there is one there or not 
at just the strategic points where it matters. For instance:

identifier
  (
     {( (TokenStream)input ).get( input.index()-1 ).getType() != WS }?=>

				DOT identifier
  )*

Jim

> -----Original Message-----
> From: Gavin Lambert [mailto:antlr at mirality.co.nz]
> Sent: Friday, February 01, 2008 2:34 PM
> To: Olivier Lefevre; antlr-interest at antlr.org
> Subject: Re: [antlr-interest] internal error
> 
> At 10:41 2/02/2008, Olivier Lefevre wrote:
>  >
>  >But I need a WS because I want to allow superfluous spaces
>  >anywhere, e.g. not just [1,2], [1, 2], [ 1 , 2 ] etc etc
>  >without encumbering the array rule with ( *) and such.
> 
> If it's just superfluous spaces you want to keep, then you can
> simply remove the newline characters from the WS rule and
> everything will be fine.
> 
> If you want to permit superfluous newlines as well then really you
> shouldn't be trying to match them at the parser level.
> 
> Ok, yes, it's in that example you posted, but that seems a bit
> dodgy to me.  As I said before that will do the "wrong thing" when
> faced with multiple newlines or newlines followed by other
> whitespace.
> 
>  >OK, maybe with experience one can decode it but do all runtime
>  >problems lead to blowups? Why doesn't it just say "Invalid
> input:
>  >[] at line 3" or some such?
> 
> Really that ought to produce a compiler warning (or error), since
> the ANTLR compiler ought to be able to figure out the cardinality
> in most cases (although as I said before there are some constructs
> that can be misleading).
> 
> At runtime though it's mostly too late.  You see, it's already
> successfully matched "[]" as valid input (which it is, according
> to your grammar), and now it's trying to put that into an
> AST.  The rewrite rule is telling it that there must always be an
> "elements" term, but as it happens it doesn't have one.  What else
> can it do but to blow up?
> 
> This is where having unit tests to exercise your lexer/parser is a
> good idea, since you'll catch this sort of thing at that point
> (assuming your test cases are comprehensive enough).
> 



From matthieu at offthelip.org  Fri Feb  1 15:00:36 2008
From: matthieu at offthelip.org (Matthieu Riou)
Date: Fri, 1 Feb 2008 15:00:36 -0800
Subject: [antlr-interest] Impossible to reference more than one global
	scope?
In-Reply-To: <62377207-A297-4E0C-8BE8-42806B3E5E4D@cs.usfca.edu>
References: <fbdc6a970801311515i1cf98bbfrae1f8e6c93510c41@mail.gmail.com>
	<fbdc6a970801311536k32c8c5f9j5c717236d8d83090@mail.gmail.com>
	<62377207-A297-4E0C-8BE8-42806B3E5E4D@cs.usfca.edu>
Message-ID: <fbdc6a970802011500k4f28e782t228ab1919a6c67ee@mail.gmail.com>

Looks like :)

Matthieu

On Jan 31, 2008 5:24 PM, Terence Parr <parrt at cs.usfca.edu> wrote:

> Hmm...scope be
> scope A, B, C;
>
> i thought.  Wow, did i forget the COMMA?
>
> Ter
>
> On Jan 31, 2008, at 3:36 PM, Matthieu Riou wrote:
>
> I found the solution by looking into the codegen grammar. Apparently
> several scopes should be declared simply by separating them with a space
> like this:
>
> process
> scope BPELScope Parent;
>         :           ...
>
> Maybe this should be documented somewhere (it's not in the book) and the
> grammar posted online( [1] which seems to be indicating colons in the
> ruleScopeSpec rule) should be updated?
>
> Thanks,
> Matthieu
>
> [1] http://www.antlr.org/grammar/ANTLR/ANTLRv3.g
>
> On Jan 31, 2008 3:15 PM, Matthieu Riou <matthieu at offthelip.org> wrote:
>
> > Hi,
> >
> > I've having some problems with a rule that needs to reference two global
> > scopes:
> >
> > scope BPELScope { OScope oscope; }
> > scope Parent { OActivity activity; }
> > ...
> > process
> > scope BPELScope, Parent;
> >         :           ...
> >
> > This leads to a "expecting SEMI, found ',' " error. Moreover the java
> > code generated is missing a stack push as I only have the following:
> >
> > Parent_stack.push(new Parent_scope());
> >
> > The BPELScope stack should also be pushed a new value but it's not,
> > resulting in an EmptyStackException at runtime. I also tried specifying the
> > two scopes as two different lines like this:
> >
> > process
> > scope BPELScope;
> > scope Parent;
> >         :           ...
> >
> > The error disappears but the call to push a new value in the stack is
> > still missing resulting in the same EmptyStackException. Am I missing the
> > right way to specify several global scope references or is it a bug?
> >
> > Thanks,
> > Matthieu
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080201/7630234f/attachment.html 

From xverges at gmail.com  Fri Feb  1 15:04:44 2008
From: xverges at gmail.com (Xavier)
Date: Sat, 2 Feb 2008 00:04:44 +0100
Subject: [antlr-interest] Rewrite to templates broken?
In-Reply-To: <479E6AC8.7000508@gmx.de>
References: <6cf1e0bb0801271437g524cae78tb1bdcc010c81b3fa@mail.gmail.com>
	<6cf1e0bb0801271617g5b2746aajd306c08921d340c8@mail.gmail.com>
	<479E6AC8.7000508@gmx.de>
Message-ID: <6cf1e0bb0802011504o4d0ca422r91494ad0a29b779e@mail.gmail.com>

I'm sorry, I'm unable to pull any failing test case from my svn. I'm
left wondering if I did some brain-dead observation or there was
something special with the input files that I tried when I posted.

My apologies for making you waset your time :-(

-Xv

On Jan 29, 2008 12:52 AM, Johannes Luber <jaluber at gmx.de> wrote:
> Xavier schrieb:
> > I'm able to avoid the effects mentioned in my earlier post by using
> >
> > file: (line NewLine)* line? EOF;
> >
> > line:   nonComment? comment?
> >                 {
> >                          Console.Out.WriteLine("[line]" + $text + "[/line]");
> >                  }
> >                  ->template(out={$text}) "[line]<out>[/line]"
> >
> >
>
> Could you please post - or send me directly - a complete grammar?
> Otherwise I can't test it.
>
> Johannes
>



-- 
-Xavier

From jaluber at gmx.de  Fri Feb  1 15:12:24 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Sat, 02 Feb 2008 00:12:24 +0100
Subject: [antlr-interest] Rewrite to templates broken?
In-Reply-To: <6cf1e0bb0802011504o4d0ca422r91494ad0a29b779e@mail.gmail.com>
References: <6cf1e0bb0801271437g524cae78tb1bdcc010c81b3fa@mail.gmail.com>	
	<6cf1e0bb0801271617g5b2746aajd306c08921d340c8@mail.gmail.com>	
	<479E6AC8.7000508@gmx.de>
	<6cf1e0bb0802011504o4d0ca422r91494ad0a29b779e@mail.gmail.com>
Message-ID: <47A3A758.9060706@gmx.de>

Xavier schrieb:
> I'm sorry, I'm unable to pull any failing test case from my svn. I'm
> left wondering if I did some brain-dead observation or there was
> something special with the input files that I tried when I posted.
> 
> My apologies for making you waset your time :-(

I didn't lose even 5 minutes. So no sweat for this. :)

Johannes

From lefevrol at yahoo.com  Fri Feb  1 15:09:10 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Sat, 02 Feb 2008 00:09:10 +0100
Subject: [antlr-interest] internal error
In-Reply-To: <20080201223359.E9A5511ED46@www.antlr.org>
References: <fnvr9t$dhd$1@ger.gmane.org>
	<47A372A6.3010001@gmx.de>	<fnvsmv$iuf$1@ger.gmane.org>	<f0fcc6820802011228y4d3c20b3h87a7543134f65011@mail.gmail.com>	<fo00tt$1v0$1@ger.gmane.org>	<20080201212306.9B22111ED42@www.antlr.org>	<fo03mi$b6j$1@ger.gmane.org>
	<20080201223359.E9A5511ED46@www.antlr.org>
Message-ID: <fo08qn$qqd$1@ger.gmane.org>

> Ok, yes, it's in that example you posted, but that seems a bit dodgy to me.

The example couldn't be more authoritative (to a newbie at least) given its
provenance but I see the problem and I will follow your advice.

> This is where having unit tests to exercise your lexer/parser is a good 
> idea, since you'll catch this sort of thing at that point (assuming your 
> test cases are comprehensive enough).

Well, but that is just what I was doing: it was a sample input file with
[] that caught the problem; I don't expect empty lists in the real-world
inputs. And this silly list grammar is itself an attempt to modularize the
development of a more complex grammar to make it easier to develop and
test.

-- O.L.


From lefevrol at yahoo.com  Fri Feb  1 15:15:54 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Sat, 02 Feb 2008 00:15:54 +0100
Subject: [antlr-interest] internal error
In-Reply-To: <20080201223359.E9A5511ED46@www.antlr.org>
References: <fnvr9t$dhd$1@ger.gmane.org>
	<47A372A6.3010001@gmx.de>	<fnvsmv$iuf$1@ger.gmane.org>	<f0fcc6820802011228y4d3c20b3h87a7543134f65011@mail.gmail.com>	<fo00tt$1v0$1@ger.gmane.org>	<20080201212306.9B22111ED42@www.antlr.org>	<fo03mi$b6j$1@ger.gmane.org>
	<20080201223359.E9A5511ED46@www.antlr.org>
Message-ID: <fo097b$ruu$1@ger.gmane.org>

> At runtime though it's mostly too late. 

No, it's not. This is Java, so it doesn't have to blow up: it
could catch the exception and try to reason about its cause.
I hope some future version will do that.

-- O.L.


From antlr at jazillian.com  Fri Feb  1 16:08:30 2008
From: antlr at jazillian.com (Andy Tripp)
Date: Fri, 01 Feb 2008 19:08:30 -0500
Subject: [antlr-interest] Tree parser for large (and changing) grammars
In-Reply-To: <db3e39e10802010825t60e7b4a9i2cf1c2e2c7bd0aaf@mail.gmail.com>
References: <db3e39e10802010825t60e7b4a9i2cf1c2e2c7bd0aaf@mail.gmail.com>
Message-ID: <47A3B47E.6030301@jazillian.com>

Andreas,

You're right. The tree grammar itself is redundant. It's a formal 
specification of the "shape" of the
AST produced by the parser (with the addition of your own tree-walking 
actions, of course).
Every time you make changes to the parser that affect what ASTs can be 
produced,
you most likely will break the tree grammar.

Here: http://jazillian.com/articles/treewalkers.html
are my thoughts on the subject.

Andy

Andreas Ravnestad wrote:
> Our XQuery project is moving along, and now we plan to write a tree
> parser and convert the AST into relational algebra.
>
> It seems a challenging part of the work will be to write the tree
> grammar itself. A common approach seems to be "copy & paste", however
> this creates a problem with maintainability since the rewrite rules in
> the parser grammar will change over time as we work our way through
> it.
>
> Any ideas about how to make this as painless as possible? What is your
> workflow for writing tree parser for large grammers?
>
> Thanks,
> Andreas
>
>   


From lefevrol at yahoo.com  Fri Feb  1 16:21:03 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Sat, 02 Feb 2008 01:21:03 +0100
Subject: [antlr-interest] Reporting bugs
Message-ID: <fo0d1g$78q$1@ger.gmane.org>

It looks like ordinary people cannot file bug reports
against ANTLR. Is that true?

-- O.L.


From parrt at cs.usfca.edu  Fri Feb  1 16:32:17 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 1 Feb 2008 16:32:17 -0800
Subject: [antlr-interest] Reporting bugs
In-Reply-To: <fo0d1g$78q$1@ger.gmane.org>
References: <fo0d1g$78q$1@ger.gmane.org>
Message-ID: <4C277E6D-60FA-4FA4-95F9-A445E234C5CB@cs.usfca.edu>

yup.  i want to filter them.  if you alll decide it's a bug and i'm  
not responding, email me directly :)

what's the issue?

thanks!
Ter
On Feb 1, 2008, at 4:21 PM, Olivier Lefevre wrote:

> It looks like ordinary people cannot file bug reports
> against ANTLR. Is that true?
>
> -- O.L.
>


From parrt at cs.usfca.edu  Fri Feb  1 16:35:16 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 1 Feb 2008 16:35:16 -0800
Subject: [antlr-interest] Extensions which I have found useful
In-Reply-To: <cb0c557b0802011002m1c0a53fesb5e6fc9be0660d37@mail.gmail.com>
References: <cb0c557b0802011002m1c0a53fesb5e6fc9be0660d37@mail.gmail.com>
Message-ID: <B608E168-E4A4-44A2-80A0-E117434FD508@cs.usfca.edu>


On Feb 1, 2008, at 10:02 AM, Fred wrote:

> A couple of items which I have found useful in the development of an
> IDL parser (with constraints).
>
> ----------
> For StringTemplates, provide a toSubList(List list, String formatName)
> method in AttributeRenderer similar to its toString(Object obj, String
> formatName) method.
> The toSubList() method would provide formatting of attribute lists.
> (I can explain the scenario where this was needed if you care.)
> The method is useful when the order, position, presence of elements in
> a list attribute need to be changed prior to formatting its elements.

can you just have model order before it's sent in?

> This could be generalized to include the 'separator' argument.
> At present the toSubList() method is called from the model prior to
> invoking the template.
> I believe that it would be more appropriate to perform this formatting
> in the view (i.e. template).
>
> -------------
> Modify the *Walker.input to be a stack rather than a single variable.
> Then similar to what is done with scope, allow the position in the AST
> to be changed (input = new CommonTreeNodeStream(subtree))  as the rule
> is entered.
> (In my current implementation the subtree is obtained from a symbol  
> table.)
> Normally, a preparatory pass through the AST to augment the symbol
> table with the relevant information would be performed but that makes
> the association less clear.
> Conceptually, the input stack provides a way to "lazily" augment the
> symbol table.

interesting. i'll think about this when doing an interpreter.

Ter

From antlr at mirality.co.nz  Fri Feb  1 17:19:41 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 02 Feb 2008 14:19:41 +1300
Subject: [antlr-interest] internal error
In-Reply-To: <fo097b$ruu$1@ger.gmane.org>
References: <fnvr9t$dhd$1@ger.gmane.org> <47A372A6.3010001@gmx.de>
	<fnvsmv$iuf$1@ger.gmane.org>
	<f0fcc6820802011228y4d3c20b3h87a7543134f65011@mail.gmail.com>
	<fo00tt$1v0$1@ger.gmane.org>
	<20080201212306.9B22111ED42@www.antlr.org>
	<fo03mi$b6j$1@ger.gmane.org>
	<20080201223359.E9A5511ED46@www.antlr.org>
	<fo097b$ruu$1@ger.gmane.org>
Message-ID: <20080202011953.A0CFE11ED43@www.antlr.org>

At 12:15 2/02/2008, Olivier Lefevre wrote:
 >No, it's not. This is Java, so it doesn't have to blow up: it
 >could catch the exception and try to reason about its cause.
 >I hope some future version will do that.

The cause is a mistake on the part of the grammar author.  It's 
not the parser's responsibility to sort that out.  (It might be 
the compiler's responsibility, but as already explained ANTLR's 
ability to detect this sort of thing is limited at the moment 
because it's still using an old version internally.)

Exploding is a perfectly reasonable response to this sort of 
thing: it's a situation that should never have happened in the 
first place.


From stevagewp at gmail.com  Fri Feb  1 17:51:22 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Sat, 2 Feb 2008 12:51:22 +1100
Subject: [antlr-interest] ArrayIndexOutOfBoundsException
In-Reply-To: <b8ceeef70801300634y6f78efe0lda89205ff5b57278@mail.gmail.com>
References: <b8ceeef70801300634y6f78efe0lda89205ff5b57278@mail.gmail.com>
Message-ID: <b8ceeef70802011751i5d7ef143hb3e97b5a5e7e0918@mail.gmail.com>

Hi,
  Just wondering if anyone could have a look at this or give me
suggestions. I keep hitting this and similar exceptions and can't find
a workaround.

Thanks,
Steve

On 1/31/08, Steve Bennett <stevagewp at gmail.com> wrote:
> Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: -1

From lefevrol at yahoo.com  Fri Feb  1 18:59:16 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Sat, 02 Feb 2008 03:59:16 +0100
Subject: [antlr-interest] Reporting bugs
In-Reply-To: <4C277E6D-60FA-4FA4-95F9-A445E234C5CB@cs.usfca.edu>
References: <fo0d1g$78q$1@ger.gmane.org>
	<4C277E6D-60FA-4FA4-95F9-A445E234C5CB@cs.usfca.edu>
Message-ID: <fo0ma5$rgb$1@ger.gmane.org>

Terence Parr wrote:
> yup.  i want to filter them. 

??? Nobody says you couldn't filter them: you can always mark
as invalid and close or even delete those you disagree with.

> what's the issue?

See under "internal error". Briefly,
1) The compiler should not bomb when encountering a mix of
    AST operators and a tree construction rewrite rule, as in
    list : '['! (elements)? ']'! -> ^(ARRAY elements) ;
    It's probably illegal and it should just say that
2) It should not allow mismatches between the cardinality of
    a rewrite rule element and the cardinality of the actual
    element, as in
    list: '[' elements? ']' -> ^(ARRAY elements) ;
    Right now it does and that can lead the parser to bomb at
    runtime.

Regards,

-- O.L.


From lefevrol at yahoo.com  Fri Feb  1 19:08:01 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Sat, 02 Feb 2008 04:08:01 +0100
Subject: [antlr-interest] internal error
In-Reply-To: <20080202011953.A0CFE11ED43@www.antlr.org>
References: <fnvr9t$dhd$1@ger.gmane.org>
	<47A372A6.3010001@gmx.de>	<fnvsmv$iuf$1@ger.gmane.org>	<f0fcc6820802011228y4d3c20b3h87a7543134f65011@mail.gmail.com>	<fo00tt$1v0$1@ger.gmane.org>	<20080201212306.9B22111ED42@www.antlr.org>	<fo03mi$b6j$1@ger.gmane.org>	<20080201223359.E9A5511ED46@www.antlr.org>	<fo097b$ruu$1@ger.gmane.org>
	<20080202011953.A0CFE11ED43@www.antlr.org>
Message-ID: <fo0mqi$sid$1@ger.gmane.org>

> Exploding is a perfectly reasonable response to this sort of thing: it's 
> a situation that should never have happened in the first place.

Fine but even so the exception could include a human-readable message about
which precondition was violated: exceptions without a message are hard on
users.

-- O.L.



From jimi at temporal-wave.com  Fri Feb  1 18:49:39 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 1 Feb 2008 18:49:39 -0800
Subject: [antlr-interest] Reporting bugs
In-Reply-To: <fo0ma5$rgb$1@ger.gmane.org>
Message-ID: <"L2AAF5B5ABD164819A0F77B262F5342A7.1201921943.scalix.temporal-wave.com*"@MHS>

These are already reported. There is a finite amount of time to fix 
things unfortunately and your comments are noted and they are correct, 
but until the ANTLR parser is written in ANTLR3 it is difficult to catch 
some of these things and that hasn't risen to the top of the list yet I 
am afraid. So, in the short term you have to get experience. Though it 
isn't quite kosher to say this, it does actually help you to understand 
what is going on ;-)

Jim

> -----Original Message-----
> From: Olivier Lefevre [mailto:lefevrol at yahoo.com]
> Sent: Friday, February 01, 2008 6:59 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Reporting bugs
> 
> Terence Parr wrote:
> > yup.  i want to filter them.
> 
> ??? Nobody says you couldn't filter them: you can always mark
> as invalid and close or even delete those you disagree with.
> 
> > what's the issue?
> 
> See under "internal error". Briefly,
> 1) The compiler should not bomb when encountering a mix of
>     AST operators and a tree construction rewrite rule, as in
>     list : '['! (elements)? ']'! -> ^(ARRAY elements) ;
>     It's probably illegal and it should just say that
> 2) It should not allow mismatches between the cardinality of
>     a rewrite rule element and the cardinality of the actual
>     element, as in
>     list: '[' elements? ']' -> ^(ARRAY elements) ;
>     Right now it does and that can lead the parser to bomb at
>     runtime.
> 
> Regards,
> 
> -- O.L.
> 



From jimi at temporal-wave.com  Fri Feb  1 18:50:23 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 1 Feb 2008 18:50:23 -0800
Subject: [antlr-interest] internal error
In-Reply-To: <fo0mqi$sid$1@ger.gmane.org>
Message-ID: <"L059CAEB22FB542338F2A0A76B24784CE.1201921983.scalix.temporal-wave.com*"@MHS>

As stated to you a few times now - this type of better error reporting 
is coming, just not quite yet.

Jim

> -----Original Message-----
> From: Olivier Lefevre [mailto:lefevrol at yahoo.com]
> Sent: Friday, February 01, 2008 7:08 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] internal error
> 
> > Exploding is a perfectly reasonable response to this sort of thing:
> it's
> > a situation that should never have happened in the first place.
> 
> Fine but even so the exception could include a human-readable message
> about
> which precondition was violated: exceptions without a message are hard
> on
> users.
> 
> -- O.L.
> 
> 



From stevagewp at gmail.com  Fri Feb  1 19:27:12 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Sat, 2 Feb 2008 14:27:12 +1100
Subject: [antlr-interest] Reporting bugs
In-Reply-To: <4C277E6D-60FA-4FA4-95F9-A445E234C5CB@cs.usfca.edu>
References: <fo0d1g$78q$1@ger.gmane.org>
	<4C277E6D-60FA-4FA4-95F9-A445E234C5CB@cs.usfca.edu>
Message-ID: <b8ceeef70802011927l4eb80f83v68bb941ca5985cf7@mail.gmail.com>

On 2/2/08, Terence Parr <parrt at cs.usfca.edu> wrote:
> yup.  i want to filter them.  if you alll decide it's a bug and i'm
> not responding, email me directly :)

Does that mean it's correct to email them to the list? Though I have
to say, there does seem to be a bit of a grey area as to what is a bug
or not, and from my perspective, it's very hard to tell whether it's
user error or a bug that caused a given Java exception.

Steve

From stevagewp at gmail.com  Fri Feb  1 19:48:41 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Sat, 2 Feb 2008 14:48:41 +1100
Subject: [antlr-interest] ArrayIndexOutOfBoundsException
In-Reply-To: <b8ceeef70802011751i5d7ef143hb3e97b5a5e7e0918@mail.gmail.com>
References: <b8ceeef70801300634y6f78efe0lda89205ff5b57278@mail.gmail.com>
	<b8ceeef70802011751i5d7ef143hb3e97b5a5e7e0918@mail.gmail.com>
Message-ID: <b8ceeef70802011948t37a92729h733bcb1552ed02d9@mail.gmail.com>

I've managed to narrow it down a bit to this rule:

literal_right_bracket
         { !prohibit_literal_right_bracket &&
(prohibit_literal_link_end <= 0 || input.LA(2)!= RIGHT_BRACKET) }?
         RIGHT_BRACKET;

As written, the exception occurs in a string like [[foo]] (where this
rule should not apply due to the semantic predicate). I've had this
rule for a while and it normally works, so I don't know what else I
have changed.

Changing the rule to either of the following prevents the exception
occurring (but with incorrect behaviour):

/* remove the semantic predicate */
literal_right_bracket
         RIGHT_BRACKET;


/* change to a non-ambiguous token */
literal_right_bracket
        { !prohibit_literal_right_bracket &&
(prohibit_literal_link_end <= 0 || input.LA(2)!= RIGHT_BRACKET)  }? =>
'&';

Does this indicate anything?

Steve

From lefevrol at yahoo.com  Fri Feb  1 19:49:30 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Sat, 02 Feb 2008 04:49:30 +0100
Subject: [antlr-interest] internal error
In-Reply-To: <"L059CAEB22FB542338F2A0A76B24784CE.1201921983.scalix.temporal-wave.com*"@MHS>
References: <fo0mqi$sid$1@ger.gmane.org>
	<"L059CAEB22FB542338F2A0A76B24784CE.1201921983.scalix.temporal-wave.com*"@MHS>
Message-ID: <fo0p8a$1fi$1@ger.gmane.org>

Jim Idle wrote:
> As stated to you a few times now - this type of better error reporting 
> is coming, just not quite yet.

OK.

-- O.L.


From lefevrol at yahoo.com  Fri Feb  1 19:56:48 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Sat, 02 Feb 2008 04:56:48 +0100
Subject: [antlr-interest] Reporting bugs
In-Reply-To: <"L2AAF5B5ABD164819A0F77B262F5342A7.1201921943.scalix.temporal-wave.com*"@MHS>
References: <fo0ma5$rgb$1@ger.gmane.org>
	<"L2AAF5B5ABD164819A0F77B262F5342A7.1201921943.scalix.temporal-wave.com*"@MHS>
Message-ID: <fo0pm1$2db$1@ger.gmane.org>

Jim Idle wrote:
> These are already reported. 

Thanks. Out of curiosity, what are the exact bug numbers? I
had scanned the list already but hadn't recognized anything
that matched these two issues.

-- O.L.


From lefevrol at yahoo.com  Fri Feb  1 20:01:37 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Sat, 02 Feb 2008 05:01:37 +0100
Subject: [antlr-interest] internal error
In-Reply-To: <"L059CAEB22FB542338F2A0A76B24784CE.1201921983.scalix.temporal-wave.com*"@MHS>
References: <fo0mqi$sid$1@ger.gmane.org>
	<"L059CAEB22FB542338F2A0A76B24784CE.1201921983.scalix.temporal-wave.com*"@MHS>
Message-ID: <fo0pv1$2db$2@ger.gmane.org>

Jim Idle wrote:
> As stated to you a few times now - this type of better error reporting 
> is coming, just not quite yet.

In fairness to me you didn't quite say that: rather, you said "it's
perfectly fine to bomb in this scenario", which didn't give much
confidence that the issue will be addressed even after it becomes
possible to ;-)

-- O.L.


From antlr at mirality.co.nz  Fri Feb  1 23:17:39 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 02 Feb 2008 20:17:39 +1300
Subject: [antlr-interest] ArrayIndexOutOfBoundsException
In-Reply-To: <b8ceeef70802011948t37a92729h733bcb1552ed02d9@mail.gmail.co
 m>
References: <b8ceeef70801300634y6f78efe0lda89205ff5b57278@mail.gmail.com>
	<b8ceeef70802011751i5d7ef143hb3e97b5a5e7e0918@mail.gmail.com>
	<b8ceeef70802011948t37a92729h733bcb1552ed02d9@mail.gmail.com>
Message-ID: <20080202071826.BDF8811ED5D@www.antlr.org>

At 16:48 2/02/2008, Steve Bennett wrote:
 >
 >I've managed to narrow it down a bit to this rule:
 >
 >literal_right_bracket
 >         { !prohibit_literal_right_bracket &&
 >(prohibit_literal_link_end <= 0 || input.LA(2)!= RIGHT_BRACKET) 
}?
 >         RIGHT_BRACKET;
 >
 >As written, the exception occurs in a string like [[foo]] (where 

 >this rule should not apply due to the semantic predicate). I've
 >had this rule for a while and it normally works, so I don't
 >know what else I have changed.

Predicates can be hoisted outside the rule they're defined in, to 
help in deciding whether that rule should be entered in the first 
place or not.  I thought that only applied to gated predicates, 
but there might be a special case for a leading ungated predicate 
(since that's how you had to do it in ANTLR 2).

So my best guess at this point is that it's the call to 
input.LA(2), which is occurring when there isn't two characters of 
lookahead available (eg. next character is EOF).  If that really 
is the problem, then failing the predicate early when input.LA(1) 
== EOF will probably sort it out.


From antlr at mirality.co.nz  Fri Feb  1 23:26:54 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 02 Feb 2008 20:26:54 +1300
Subject: [antlr-interest] internal error
In-Reply-To: <fo0pv1$2db$2@ger.gmane.org>
References: <fo0mqi$sid$1@ger.gmane.org>
	<"L059CAEB22FB542338F2A0A76B24784CE.1201921983.scalix.temporal-wave.com*"@MHS>
	<fo0pv1$2db$2@ger.gmane.org>
Message-ID: <20080202072703.916BF11ED7E@www.antlr.org>

At 17:01 2/02/2008, Olivier Lefevre wrote:
 >
 >In fairness to me you didn't quite say that: rather, you said
 >"it's perfectly fine to bomb in this scenario", which didn't
 >give much confidence that the issue will be addressed even
 >after it becomes possible to ;-)

Actually Jim didn't say that -- I did.  And that was only half of 
what I said.

To rephrase: "It is reasonable behaviour for the parser to throw 
an exception in that case, because it is a case that it should 
never have to deal with in the first place.  This is because it is 
not an error in the input, it is an error in the code itself, and 
thus not the responsibility of that code.  (It is not possible to 
write code that can defend itself from errors in its own 
source.)  Where the defensive line should be drawn is at the 
compiler generating that code, which should detect that incorrect 
generated code will result and report it as an error to the 
grammar author.  However this is not yet possible due to the 
structure of ANTLR (since it's still using an old version 
internally), so fixing it will have to wait until the structure is 
updated."


From stevagewp at gmail.com  Sat Feb  2 00:53:23 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Sat, 2 Feb 2008 19:53:23 +1100
Subject: [antlr-interest] ArrayIndexOutOfBoundsException
In-Reply-To: <47a41943.0f87460a.3276.ffffdc0eSMTPIN_ADDED@mx.google.com>
References: <b8ceeef70801300634y6f78efe0lda89205ff5b57278@mail.gmail.com>
	<b8ceeef70802011751i5d7ef143hb3e97b5a5e7e0918@mail.gmail.com>
	<b8ceeef70802011948t37a92729h733bcb1552ed02d9@mail.gmail.com>
	<47a41943.0f87460a.3276.ffffdc0eSMTPIN_ADDED@mx.google.com>
Message-ID: <b8ceeef70802020053p44bd90bbq40cde81ad6f7fa90@mail.gmail.com>

On 2/2/08, Gavin Lambert <antlr at mirality.co.nz> wrote:
>  >I've managed to narrow it down a bit to this rule:

(I've actually narrowed it down slightly further: if the predicate
passes (eg, { true }? =>...), everything is ok. It's a failing
predicate that bombs)

> Predicates can be hoisted outside the rule they're defined in, to
> help in deciding whether that rule should be entered in the first
> place or not.  I thought that only applied to gated predicates,

Yeah, I've seen that before, and normally the symptom is unrecognised
variables, which are actually fields unreachable from the hoisting
object.

> but there might be a special case for a leading ungated predicate
> (since that's how you had to do it in ANTLR 2).
>
> So my best guess at this point is that it's the call to
> input.LA(2), which is occurring when there isn't two characters of
> lookahead available (eg. next character is EOF).  If that really
> is the problem, then failing the predicate early when input.LA(1)
> == EOF will probably sort it out.

Good thoughts, but it doesn't seem to be that here, as it's failing
mid sentence (well short of the EOF), and it's bombing even without
hte reference to input.LA(). Any others ideas?

Steve

From stevagewp at gmail.com  Sat Feb  2 01:05:14 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Sat, 2 Feb 2008 20:05:14 +1100
Subject: [antlr-interest] internal error
In-Reply-To: <20080202072703.916BF11ED7E@www.antlr.org>
References: <fo0mqi$sid$1@ger.gmane.org>
	<L059CAEB22FB542338F2A0A76B24784CE.1201921983.scalix.temporal-wave.com*@MHS>
	<fo0pv1$2db$2@ger.gmane.org>
	<20080202072703.916BF11ED7E@www.antlr.org>
Message-ID: <b8ceeef70802020105w63b41736meb5d91c4061a3ef5@mail.gmail.com>

On 2/2/08, Gavin Lambert <antlr at mirality.co.nz> wrote:
> source.)  Where the defensive line should be drawn is at the
> compiler generating that code, which should detect that incorrect
> generated code will result and report it as an error to the
> grammar author.  However this is not yet possible due to the
> structure of ANTLR (since it's still using an old version
> internally), so fixing it will have to wait until the structure is
> updated."

It would certainly be useful to people like me who aren't very
familiar with the structure of ANTLR if the following types of errors
could be distinguished:

1) User error in ANTLR grammar (eg, missing semicolon)
2) Error in generated code (that is, Java couldn't compile it)
3) Other inability to generate code (eg, lack of heap space, couldn't
find tokens file...)
4) User error in input (that is, the input doesn't match the grammar)

 and possibly:

5) User error in embedded, compiled code (eg, the target code you
write into a rule is itself faulty)
6) Other runtime error in generated code (whether caused by a faulty
grammar or a problem in the generator)

I notice that sometimes errors in category 2 and 3 give spurious
errors like "nullpointerexception" and it can be confusing for novices
like me to understand what the error is and where it's coming from. So
it's very pleasing to know that this will all be magically fixed in
the next five minutes :)

Steve

From antlr at mirality.co.nz  Sat Feb  2 01:16:41 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 02 Feb 2008 22:16:41 +1300
Subject: [antlr-interest] ArrayIndexOutOfBoundsException
In-Reply-To: <b8ceeef70802020053p44bd90bbq40cde81ad6f7fa90@mail.gmail.co
 m>
References: <b8ceeef70801300634y6f78efe0lda89205ff5b57278@mail.gmail.com>
	<b8ceeef70802011751i5d7ef143hb3e97b5a5e7e0918@mail.gmail.com>
	<b8ceeef70802011948t37a92729h733bcb1552ed02d9@mail.gmail.com>
	<47a41943.0f87460a.3276.ffffdc0eSMTPIN_ADDED@mx.google.com>
	<b8ceeef70802020053p44bd90bbq40cde81ad6f7fa90@mail.gmail.com>
Message-ID: <20080202091653.041ED11ED51@www.antlr.org>

At 21:53 2/02/2008, Steve Bennett wrote:
 >
 >Good thoughts, but it doesn't seem to be that here, as it's
 >failing mid sentence (well short of the EOF), and it's
 >bombing even without hte reference to input.LA(). Any others
 >ideas?

I thought you said that when you removed the predicate the problem 
went away?

Anyway, to requote the original full exception you posted earlier:
 >Exception in thread "main"
 >java.lang.ArrayIndexOutOfBoundsException: -1
 >	at org.antlr.runtime.DFA.predict(DFA.java:44)
 >	at mediawiki1Parser.inline_text(mediawiki1Parser.java:13618)
 >	at 
mediawiki1Parser.header_simple_text(mediawiki1Parser.java:16669)
 >	at mediawiki1Parser.header3(mediawiki1Parser.java:5423)
 >	at 
mediawiki1Parser.synpred19_fragment(mediawiki1Parser.java:19872)
 >	at mediawiki1Parser.synpred19(mediawiki1Parser.java:20998)
 >	at mediawiki1Parser.headerline(mediawiki1Parser.java:4238)
 >	at 
mediawiki1Parser.synpred3_fragment(mediawiki1Parser.java:19604)
 >	at mediawiki1Parser.synpred3(mediawiki1Parser.java:21158)
 >	at mediawiki1Parser.line(mediawiki1Parser.java:1295)
 >	at mediawiki1Parser.article(mediawiki1Parser.java:915)
 >	at mediawiki1Parser.start(mediawiki1Parser.java:299)
 >	at __Test__.main(__Test__.java:14)

So, it's trying to parse a "line".  In doing that, it's calling 
ahead through a syntactic predicate which ends up involving 
"headerline", which in turn has another syntactic predicate 
leading to "header3", then "header_simple_text", and finally 
"inline_text".  Presumably the problem lies somewhere in that 
chain of rules -- and not necessarily at the end.  (I know you've 
changed things since this particular exception, so you're getting 
it somewhere else now, but you can follow the same line of 
reasoning on the full trace of the exception you're getting 
now.)  The main thing is that you can tell from the trace which 
rules are "locked" and which ones are "speculative" based on 
whether they appear before or after a synpred call, and from that 
you might be able to tell whether it's going down the wrong path.

 >literal_right_bracket
 >         { !prohibit_literal_right_bracket &&
 >(prohibit_literal_link_end <= 0 || input.LA(2)!= RIGHT_BRACKET) 
}?
 >         RIGHT_BRACKET;
[...]
 >Changing the rule to either of the following prevents the
 >exception occurring (but with incorrect behaviour):
[...]
 >literal_right_bracket
 >        { !prohibit_literal_right_bracket &&
 >(prohibit_literal_link_end <= 0 || input.LA(2)!= 
RIGHT_BRACKET)  }?
 >=> '&';

You actually made two changes here -- you changed the character it 
was matching and you changed it to a gated predicate.  Have you 
tried the original version but as a gated predicate instead?  (It 
looks like it ought to be a gated predicate anyway.)


From stevagewp at gmail.com  Sat Feb  2 01:27:08 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Sat, 2 Feb 2008 20:27:08 +1100
Subject: [antlr-interest] Debugger performance indicative of actual
	performance?
Message-ID: <b8ceeef70802020127u1ab2791na95721f04460443a@mail.gmail.com>

Using the debugger to parse some typical input is taking what seems
like a very long time to me - 5-10 seconds for a 7kb file. How
indicative is this likely to be of the performance I'll get in a
production environment? How much can a grammar be tuned for
performance?

I ask because 5-10 seconds could well be 2 or even 3 orders of
magnitude too slow...

Steve

From stevagewp at gmail.com  Sat Feb  2 02:45:11 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Sat, 2 Feb 2008 21:45:11 +1100
Subject: [antlr-interest] ArrayIndexOutOfBoundsException
In-Reply-To: <47a43505.1287460a.09ff.4b2cSMTPIN_ADDED@mx.google.com>
References: <b8ceeef70801300634y6f78efe0lda89205ff5b57278@mail.gmail.com>
	<b8ceeef70802011751i5d7ef143hb3e97b5a5e7e0918@mail.gmail.com>
	<b8ceeef70802011948t37a92729h733bcb1552ed02d9@mail.gmail.com>
	<47a41943.0f87460a.3276.ffffdc0eSMTPIN_ADDED@mx.google.com>
	<b8ceeef70802020053p44bd90bbq40cde81ad6f7fa90@mail.gmail.com>
	<47a43505.1287460a.09ff.4b2cSMTPIN_ADDED@mx.google.com>
Message-ID: <b8ceeef70802020245x179a93d2v5f49d280619e3fa9@mail.gmail.com>

On 2/2/08, Gavin Lambert <antlr at mirality.co.nz> wrote:
> I thought you said that when you removed the predicate the problem
> went away?

Right:

With predicate that returns true: succeeds
With no predicate at all: succeeds
With predicate that fails (including "false") : fails

>
> Anyway, to requote the original full exception you posted earlier:
>  >Exception in thread "main"
>  >java.lang.ArrayIndexOutOfBoundsException: -1
>  >      at org.antlr.runtime.DFA.predict(DFA.java:44)
>  >      at mediawiki1Parser.inline_text(mediawiki1Parser.java:13618)
>  >      at
> mediawiki1Parser.header_simple_text(mediawiki1Parser.java:16669)
>  >      at mediawiki1Parser.header3(mediawiki1Parser.java:5423)
>  >      at
> mediawiki1Parser.synpred19_fragment(mediawiki1Parser.java:19872)
>  >      at mediawiki1Parser.synpred19(mediawiki1Parser.java:20998)
>  >      at mediawiki1Parser.headerline(mediawiki1Parser.java:4238)
>  >      at
> mediawiki1Parser.synpred3_fragment(mediawiki1Parser.java:19604)
>  >      at mediawiki1Parser.synpred3(mediawiki1Parser.java:21158)
>  >      at mediawiki1Parser.line(mediawiki1Parser.java:1295)
>  >      at mediawiki1Parser.article(mediawiki1Parser.java:915)
>  >      at mediawiki1Parser.start(mediawiki1Parser.java:299)
>  >      at __Test__.main(__Test__.java:14)
>
> So, it's trying to parse a "line".  In doing that, it's calling
> ahead through a syntactic predicate which ends up involving
> "headerline", which in turn has another syntactic predicate
> leading to "header3", then "header_simple_text", and finally
> "inline_text".  Presumably the problem lies somewhere in that
> chain of rules -- and not necessarily at the end.  (I know you've
> changed things since this particular exception, so you're getting
> it somewhere else now, but you can follow the same line of
> reasoning on the full trace of the exception you're getting
> now.)  The main thing is that you can tell from the trace which
> rules are "locked" and which ones are "speculative" based on
> whether they appear before or after a synpred call, and from that
> you might be able to tell whether it's going down the wrong path.

Hmm. From the parse tree I can see that it's still in speculative mode
(blue). Here's the simplest sentence which exhibits the problem:

[[a|b]]

What this is about is ] by itself is a literal square bracket, but in
certain contexts like the b, you can't have a ]. I use a flag to rule
it out. This sentence generates this following traceback:

Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: -1
	at org.antlr.runtime.DFA.predict(DFA.java:44)
	at mediawiki3Parser.simple_inline_elem(mediawiki3Parser.java:15484)
	at mediawiki3Parser.synpred38_fragment(mediawiki3Parser.java:21941)
	at mediawiki3Parser.synpred38(mediawiki3Parser.java:22519)
	at mediawiki3Parser.simple_text(mediawiki3Parser.java:15077)
	at mediawiki3Parser.link_caption(mediawiki3Parser.java:7210)
	at mediawiki3Parser.internal_link(mediawiki3Parser.java:6964)
	at mediawiki3Parser.synpred33_fragment(mediawiki3Parser.java:21856)
	at mediawiki3Parser.synpred33(mediawiki3Parser.java:22455)
	at mediawiki3Parser.inline_text(mediawiki3Parser.java:14386)
	at mediawiki3Parser.paragraph(mediawiki3Parser.java:14168)
	at mediawiki3Parser.line(mediawiki3Parser.java:1565)
	at mediawiki3Parser.article(mediawiki3Parser.java:947)
	at mediawiki3Parser.start(mediawiki3Parser.java:330)
	at __Test__.main(__Test__.java:14)

So it's normal that it should enter simple_inline_element
speculatively for the ] it encounters, then it should fail, as ] is
not a valid "simple element" in this context. To do this, it calls a
few more rules, really_basic_element, punctuation, and finally
literal_right_bracket.

In other words, the traceback seems reasonable, and corresponds to the
graphical parser tree. But instead of then rejecting the
'simple_inline_elem' rule, colouring the node red and moving on, it
dies.

Frustratingly, when I try to look up the traceback in the generated
code, the line numbers don't seem to match. For example, synpred38 is
labelled as being on line 23214, but it should be 18939-18951. In the
generated code I do see the failed call to predict. Is there some
debugging code I could put in that might shed light? It's like this:

...
            // C:\\antlr\\mediawiki3.g:493:5: ( (
accidental_magic_link )=> accidental_magic_link | ( (
punctuation_before_nbsp )=> punctuation_before_nbsp ) | ( APOSTROPHES
)=> bold_and_italics | ( ( nbsp_before_punctuation )=>
nbsp_before_punctuation )+ | angle_tag | ( ( html_entity )=>
html_entity ) | really_basic_elem )
            int alt69=7;
            alt69 = dfa69.predict(input);
            switch (alt69) {
                case 1 :
...



> You actually made two changes here -- you changed the character it
> was matching and you changed it to a gated predicate.  Have you
> tried the original version but as a gated predicate instead?  (It
> looks like it ought to be a gated predicate anyway.)

Whoops, that was a typo in my email. I always use the "{pred }? =>
tokens" form, as the "{pred}? tokens" form tends to abort the pass if
it doesn't match.

Steve

From jaluber at gmx.de  Sat Feb  2 03:08:04 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Sat, 02 Feb 2008 12:08:04 +0100
Subject: [antlr-interest] Reporting bugs
In-Reply-To: <b8ceeef70802011927l4eb80f83v68bb941ca5985cf7@mail.gmail.com>
References: <fo0d1g$78q$1@ger.gmane.org>	<4C277E6D-60FA-4FA4-95F9-A445E234C5CB@cs.usfca.edu>
	<b8ceeef70802011927l4eb80f83v68bb941ca5985cf7@mail.gmail.com>
Message-ID: <47A44F14.8090309@gmx.de>

Steve Bennett schrieb:
> On 2/2/08, Terence Parr <parrt at cs.usfca.edu> wrote:
>> yup.  i want to filter them.  if you alll decide it's a bug and i'm
>> not responding, email me directly :)
> 
> Does that mean it's correct to email them to the list? Though I have
> to say, there does seem to be a bit of a grey area as to what is a bug
> or not, and from my perspective, it's very hard to tell whether it's
> user error or a bug that caused a given Java exception.

I suppose that is the reason why Ter doesn't want entries directly 
entered. The experienced people on the mailing list can help to discern 
bugs from user errors.

Johannes

From jaluber at gmx.de  Sat Feb  2 03:12:35 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Sat, 02 Feb 2008 12:12:35 +0100
Subject: [antlr-interest] internal error
In-Reply-To: <b8ceeef70802020105w63b41736meb5d91c4061a3ef5@mail.gmail.com>
References: <fo0mqi$sid$1@ger.gmane.org>	<L059CAEB22FB542338F2A0A76B24784CE.1201921983.scalix.temporal-wave.com*@MHS>	<fo0pv1$2db$2@ger.gmane.org>	<20080202072703.916BF11ED7E@www.antlr.org>
	<b8ceeef70802020105w63b41736meb5d91c4061a3ef5@mail.gmail.com>
Message-ID: <47A45023.4030206@gmx.de>

Steve Bennett schrieb:
> I notice that sometimes errors in category 2 and 3 give spurious
> errors like "nullpointerexception" and it can be confusing for novices
> like me to understand what the error is and where it's coming from. So
> it's very pleasing to know that this will all be magically fixed in
> the next five minutes :)

Make that "next five months".

Johannes

From antlr at mirality.co.nz  Sat Feb  2 03:13:45 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 03 Feb 2008 00:13:45 +1300
Subject: [antlr-interest] ArrayIndexOutOfBoundsException
In-Reply-To: <b8ceeef70802020245x179a93d2v5f49d280619e3fa9@mail.gmail.co
 m>
References: <b8ceeef70801300634y6f78efe0lda89205ff5b57278@mail.gmail.com>
	<b8ceeef70802011751i5d7ef143hb3e97b5a5e7e0918@mail.gmail.com>
	<b8ceeef70802011948t37a92729h733bcb1552ed02d9@mail.gmail.com>
	<47a41943.0f87460a.3276.ffffdc0eSMTPIN_ADDED@mx.google.com>
	<b8ceeef70802020053p44bd90bbq40cde81ad6f7fa90@mail.gmail.com>
	<47a43505.1287460a.09ff.4b2cSMTPIN_ADDED@mx.google.com>
	<b8ceeef70802020245x179a93d2v5f49d280619e3fa9@mail.gmail.com>
Message-ID: <20080202111358.AF2C211ED9A@www.antlr.org>

At 23:45 2/02/2008, Steve Bennett wrote:
 >Frustratingly, when I try to look up the traceback in the
 >generated code, the line numbers don't seem to match. For
 >example, synpred38 is labelled as being on line 23214, but
 >it should be 18939-18951. In the generated code I do see
 >the failed call to predict. Is there some debugging code
 >I could put in that might shed light?

Presumably you're using ANTLRworks' debug mode, then, rather than 
running it directly?

Open up ANTLRworks' Preferences page and have a look at the Output 
Path on the first page.  It'll either be set to "Same as grammar" 
or a custom path.  Either way, open up that folder.

Now start a debugging session.  (That's important -- "Generate 
Code" produces a release build, while starting the debugger 
produces a debug build.  They're slightly different.)  The 
generated lexer and parser files in the output folder should now 
be up to date, and match what ANTLRworks is actually running with.


From dmitry.gusev at gmail.com  Sat Feb  2 04:53:47 2008
From: dmitry.gusev at gmail.com (Dmitry Gusev)
Date: Sat, 2 Feb 2008 15:53:47 +0300
Subject: [antlr-interest] Suppress error mesages in console
Message-ID: <37a147f40802020453n19e5af5ci9433ce07e0c45fc0@mail.gmail.com>

If I try to parse bad input I have error messages in console like this:

line 1:6 mismatched character ']' expecting ':'

How can I suppress this output?


-- 
Dmitry Gusev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080202/eb47cdaa/attachment.html 

From jimi at temporal-wave.com  Sat Feb  2 06:46:27 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 2 Feb 2008 06:46:27 -0800
Subject: [antlr-interest] Reporting bugs
In-Reply-To: <b8ceeef70802011927l4eb80f83v68bb941ca5985cf7@mail.gmail.com>
Message-ID: <"LB19D002386924161A4E7EE98A68B88A2.1201964958.scalix.temporal-wave.com*"@MHS>



> -----Original Message-----
> From: Steve Bennett [mailto:stevagewp at gmail.com]
> Sent: Friday, February 01, 2008 7:27 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Reporting bugs
> 
> On 2/2/08, Terence Parr <parrt at cs.usfca.edu> wrote:
> > yup.  i want to filter them.  if you alll decide it's a bug and i'm
> > not responding, email me directly :)
> 
> Does that mean it's correct to email them to the list? Though I have
> to say, there does seem to be a bit of a grey area as to what is a bug
> or not, and from my perspective, it's very hard to tell whether it's
> user error or a bug that caused a given Java exception.
> 

That's why Ter wants to filter them ;-). Unless Terence states 
otherwise, I think that emailing to the list is fine. There is also the 
feedback form available within ANTLR works. For the C runtime, I prefer 
the email list as a reporting mechanism.

Jim



From jimi at temporal-wave.com  Sat Feb  2 06:48:37 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 2 Feb 2008 06:48:37 -0800
Subject: [antlr-interest] internal error
In-Reply-To: <fo0pv1$2db$2@ger.gmane.org>
Message-ID: <"LE52A145B173544b2B1A6EA6C6A4D9C94.1201965089.scalix.temporal-wave.com*"@MHS>



> -----Original Message-----
> From: Olivier Lefevre [mailto:lefevrol at yahoo.com]
> Sent: Friday, February 01, 2008 8:02 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] internal error
> 
> Jim Idle wrote:
> > As stated to you a few times now - this type of better error
> reporting
> > is coming, just not quite yet.
> 
> In fairness to me you didn't quite say that: rather, you said "it's
> perfectly fine to bomb in this scenario", which didn't give much
> confidence that the issue will be addressed even after it becomes
> possible to ;-)

Someone else said that, not me :-) I don't think that it is good for it 
to bomb and as far as I know, neither does Terence :-)

Jim


From lefevrol at yahoo.com  Sat Feb  2 07:27:06 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Sat, 02 Feb 2008 16:27:06 +0100
Subject: [antlr-interest] Reporting bugs
In-Reply-To: <"L2AAF5B5ABD164819A0F77B262F5342A7.1201921943.scalix.temporal-wave.com*"@MHS>
References: <fo0ma5$rgb$1@ger.gmane.org>
	<"L2AAF5B5ABD164819A0F77B262F5342A7.1201921943.scalix.temporal-wave.com*"@MHS>
Message-ID: <fo224b$vj7$1@ger.gmane.org>

So, which bugs numbers are we talking about? It would be
instructive for me to see which bug reports, written by
the master himself ;-) are the correlates of the problems
I experienced in the trenches. It would help me make sense
of ANTLR architecture and nomenclature.

Thanks again,

-- O.L.


From jimi at temporal-wave.com  Sat Feb  2 07:07:32 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 2 Feb 2008 07:07:32 -0800
Subject: [antlr-interest] Suppress error mesages in console
In-Reply-To: <37a147f40802020453n19e5af5ci9433ce07e0c45fc0@mail.gmail.com>
Message-ID: <"LC0178CED2A1D402680A1EB42A7875706.1201966226.scalix.temporal-wave.com*"@MHS>

Implement your own error reporting routine (should be an example in the
wiki I think) and then you can do anything you like including being
silent. However, this looks like a lexer specification problem. Do you
have something that takes a path like: ?0?...?9?+ ?:? and your input is
[999]? You need to allow the lexer rule to end before the ?:? and let
the lexer change the type of the token to whatever that means.

 

In a lexer, unless you feel that your rules encapsulate all input at all
points, then you may find it useful to have as your last rule:

 

UNKNOWN : . {System.err.println(?Debug: Character ?? + $text + ?? is not
catered for.?); } ;

 

Jim

 

From: Dmitry Gusev [mailto:dmitry.gusev at gmail.com] 
Sent: Saturday, February 02, 2008 4:54 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Suppress error mesages in console

 

If I try to parse bad input I have error messages in console like this:

line 1:6 mismatched character ']' expecting ':'

How can I suppress this output?



-- 
Dmitry Gusev 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080202/7cfb1aaa/attachment-0001.html 

From himanshu.garg at gmail.com  Sat Feb  2 07:59:08 2008
From: himanshu.garg at gmail.com (HG)
Date: Sat, 2 Feb 2008 21:29:08 +0530
Subject: [antlr-interest] SimpleCalc C Target example does not compile
Message-ID: <6f82a7270802020759q75d1c468la965cf497feb2ad7@mail.gmail.com>

Compiling the example given in
http://www.antlr.org/wiki/display/ANTLR3/Using+the+ANTLR3+C+Target

    simplecalcparser.c
    simplecalcparser.c(283) : error C2065: 'pSimpleCalcLexer' : undeclared
identifier

due to the following lines in the same file:-

    pSimpleCalcLexer lex = SimpleCalcLexerNew(input);

but pSimpleCalcLexer is not defined/declared in either SimpleCalcParser.c or
in the included files.

Should this compile at all?

Thank You,
Himanshu.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080202/a8e2456b/attachment.html 

From dmitry.gusev at gmail.com  Sat Feb  2 08:14:31 2008
From: dmitry.gusev at gmail.com (Dmitry Gusev)
Date: Sat, 2 Feb 2008 19:14:31 +0300
Subject: [antlr-interest] Suppress error mesages in console
In-Reply-To: <LC0178CED2A1D402680A1EB42A7875706.1201966226.scalix.temporal-wave.com*@MHS>
References: <37a147f40802020453n19e5af5ci9433ce07e0c45fc0@mail.gmail.com>
	<LC0178CED2A1D402680A1EB42A7875706.1201966226.scalix.temporal-wave.com*@MHS>
Message-ID: <37a147f40802020814nd5f1080tbe6a1fa611a60a8b@mail.gmail.com>

I did implement my own error reporing routine, my grammar with that routine
is there: http://pastebin.com/f3ac5c70

But still I can't figure out where those errors are coming from... Here is
how I'm parsing the input:

            1. ANTLRStringStream input = new CaseInsensitiveStringStream
(expression);
            2. ExpressionLexer lexer = new ExpressionLexer(input);
            3. CommonTokenStream stream = new CommonTokenStream(lexer);
            4. ExpressionParser parser = new ExpressionParser(stream);
            5. try
            6. {
            7.    ExpressionParser.expr_return r = parser.expr();
            8.
            9.    return (CommonTree) r.Tree;
           10. } catch (RecognitionException) {
           11.     throw new MultipleRecognitionExceptions(parser.GetErrors
());
           12. }

The error messages I've mentioned appears in line 3

I know why the error occured, and I've made the bad input especially for the
example.

But the question is how to write the error handling routine that will
suppress that errors to be written to the standard output.


On Feb 2, 2008 6:07 PM, Jim Idle <jimi at temporal-wave.com> wrote:

>  Implement your own error reporting routine (should be an example in the
> wiki I think) and then you can do anything you like including being silent.
> However, this looks like a lexer specification problem. Do you have
> something that takes a path like: '0'...'9'+ ':' and your input is [999]?
> You need to allow the lexer rule to end before the ':' and let the lexer
> change the type of the token to whatever that means.
>
>
>
> In a lexer, unless you feel that your rules encapsulate all input at all
> points, then you may find it useful to have as your last rule:
>
>
>
> UNKNOWN : . {System.err.println("Debug: Character '" + $text + "' is not
> catered for."); } ;
>
>
>
> Jim
>
>
>
> *From:* Dmitry Gusev [mailto:dmitry.gusev at gmail.com]
> *Sent:* Saturday, February 02, 2008 4:54 AM
> *To:* antlr-interest at antlr.org
> *Subject:* [antlr-interest] Suppress error mesages in console
>
>
>
> If I try to parse bad input I have error messages in console like this:
>
> line 1:6 mismatched character ']' expecting ':'
>
> How can I suppress this output?
>
>
>
> --
> Dmitry Gusev
>



-- 
Dmitry Gusev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080202/363e2099/attachment.html 

From kroepke at classdump.org  Sat Feb  2 10:42:43 2008
From: kroepke at classdump.org (=?ISO-8859-1?Q?Kay_R=F6pke?=)
Date: Sat, 2 Feb 2008 19:42:43 +0100
Subject: [antlr-interest] Just plain var or $var.value?
In-Reply-To: <fnt19o$a8n$1@ger.gmane.org>
References: <fnt19o$a8n$1@ger.gmane.org>
Message-ID: <58FFD66B-4134-4B77-AAFE-78040A140E8D@classdump.org>

Hi Olivier!

On Jan 31, 2008, at 6:42 PM, Olivier Lefevre wrote:

> Still reading the book. Comparing tour/tree/Eval.g
> and tour/eval/Eval.g I was struck by the difference
> between, say, "a+b" in the former vs. "$e.value" in
> the latter. I tried changing accesses in the first
> file from the "var" to "$var.$value" form and vice-
> versa in the latter file and in both cases it seemed
> to work.

"seemed" :)

Indeed it is just coincidence that it did work. It's basically an  
implementation detail in the way the Java target behaves. See below.

>
> This is a bit confusing. Is it a kind of syntactic sugar?
> Clearly the two forms are not always equivalent since,
> e.g, replacing "$e.value" by "e" in the latter file is
> ok but if you replace "$expr.value" by "expr" antlr does
> not complain (maybe it should?) but EvalParser will not
> compile. What is going on here and in which section of
> the manual is it fully spec'ed out?

Every reference to a label (as in b=expr - b is the label here) is  
translated by ANTLR into the target language using special code  
generation templates.
It's basically up to the target author what the name of the variable  
will be in the generated code. You don't have to and you shouldn't care.
The Java target happens to just use the label you provided, but other  
targets might not do that (i.e. the ObjC target prefixes all all  
labels with a '_' character to prevent clashes with reserved words and  
types).
Thus, each time you reference a label in an action without using the  
$label syntax, it's an error, even though ANTLR cannot catch it. You  
are relying on implementation details that are opaque to you, in fact  
your code might break any time.
So I'd say the example in the book is wrong, unfortunately. I'm not  
sure if it is fixed in the second printing of the book, but to make  
sure it doesn't fall down, I'm cc'ing Terence here.

In short, ANTLR can't complain about the lack of the $ but you should  
always use it. That way ANTLR can check if the return value you are  
trying to access is valid.

Even more so, the example in the book should be:

expr returns [int value]
	:	^('+' a=expr b=expr) {$value = $a.value + $b.value;}
	...and so on...
	;

That would be the correct and future proof way of doing it.
tour/eval/Expr.g is correct, while tour/trees/Eval.g is not :(

HTH,
-k

-- 
Kay R?pke
http://classdump.org/







From lefevrol at yahoo.com  Sat Feb  2 12:13:04 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Sat, 02 Feb 2008 21:13:04 +0100
Subject: [antlr-interest] Minor suggestion re. Java output
Message-ID: <fo2isi$ir0$1@ger.gmane.org>

To make things a little nicer in client code,
ANTLR could covariantly specialize return types
in return classes. E.g., when you have

options {
         output = AST;
         ASTLabelType=CommonTree;
}

in the grammar the xxx_return classes in the
Parser could have a method

    public CommonTree getTree() { return tree; }

instead of

    public Object getTree() { return tree; }

That way we wouldn't need to cast. Since one
goal of ANTLR is to emit code that doesn't look
too wildly different from what one might have
written by hand I think it makes sense to try
to make the code more idiomatic.

Regards,

-- O.L.


From r.mark.volkmann at gmail.com  Sat Feb  2 12:58:04 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Sat, 2 Feb 2008 14:58:04 -0600
Subject: [antlr-interest] Debugger performance indicative of actual
	performance?
In-Reply-To: <b8ceeef70802020127u1ab2791na95721f04460443a@mail.gmail.com>
References: <b8ceeef70802020127u1ab2791na95721f04460443a@mail.gmail.com>
Message-ID: <f0fcc6820802021258j607e0374rf7c9ab65f0e410e4@mail.gmail.com>

On Feb 2, 2008 3:27 AM, Steve Bennett <stevagewp at gmail.com> wrote:
> Using the debugger to parse some typical input is taking what seems
> like a very long time to me - 5-10 seconds for a 7kb file. How
> indicative is this likely to be of the performance I'll get in a
> production environment? How much can a grammar be tuned for
> performance?
>
> I ask because 5-10 seconds could well be 2 or even 3 orders of
> magnitude too slow...

I can't answer the question. However, I've never found it useful to
process that much input in the debugger. Typically I'm using it to
verify that my grammar is producing the AST that I want for certain
kinds of input. The amount of input required to verify that for me is
typically 10 lines or less. Looking through the AST for 7 KB of input
seems overwhelming.

-- 
R. Mark Volkmann
Object Computing, Inc.

From akhailtash at gmail.com  Sat Feb  2 13:08:19 2008
From: akhailtash at gmail.com (Amal Khailtash)
Date: Sat, 2 Feb 2008 16:08:19 -0500
Subject: [antlr-interest] Possible bug?
Message-ID: <f6a04d790802021308q188c6cadu1d390a51566e5b7a@mail.gmail.com>

I have the following grammar, other than the problem with the fragment
(I don't know why unreachable).  Can I not use greedy=false on
fragment?

It seems, ANTLR declares variables c and e twice!

---BEGIN Test.g-------------------------------------
grammar Test;

tokens
{
  TEXT;
  COMMENT = '$comment';
  END     = '$end';
}

@lexer::members {
List tokens = new ArrayList();

public void emit( Token token )
{
  super.token = token;
  tokens.add(token);
}

public Token nextToken()
{
  super.nextToken();
  if ( tokens.size()==0 )
  {
    return Token.EOF_TOKEN;
  }
  return (Token)tokens.remove(0);
}
}

@header {
// Header
import java.io.*;
}

@members {
public static void main( String[] args ) throws Exception
{
  TestLexer lexer = new TestLexer( new ANTLRFileStream(args[0]) );
  CommonTokenStream tokens = new CommonTokenStream( lexer );
  TestParser parser = new TestParser( tokens );

/**/
  try {
    Token token;
    while( (token = lexer.nextToken())!=Token.EOF_TOKEN )
    {
      System.out.println( "------------------------------------------------"
);
      System.out.println( "Token: [" + token.getText() + "]" );
    }
  } catch( Throwable t ) {
    System.out.println( "Exception: " + t );
    t.printStackTrace();
  }
/**/

  try {
    parser.start();
  } catch( Exception e ) {
    System.err.println( "Exception: " + e );
    e.printStackTrace();
  }
}
}

start
  : comment+
  ;

comment
//      : '$comment' TEXT '$end'
//      : '$comment' (options {greedy=false;} : .)* '$end'
        : COMMENT_T
        ;

COMMENT_T
//      : c='$comment' t=(options {greedy=false;} : .)* e='$end'
        : c='$comment' t=TEXT_T e='$end'
        {
          $c.setType(COMMENT);
          emit($c);
          $t.setType(TEXT);
          emit($t);
          $e.setType(END);
          emit($e);
        }
        ;

fragment
TEXT_T
        :       (options {greedy=false;} : .)*
//      :       (~('$'|'e'|'n'|'d'))*
//  : 't'
        ;

//NEWLINE : '\r'? '\n' ;
WS
  : ( ' '
    | '\t'
    | '\r'? '\n'
    )+
    //{skip();}
    {$channel=HIDDEN;}
  ;
---END Test.g-------------------------------------

---BEGIN errors-------------------------------------
[20:10:34] warning(201): Test.g:91:32: The following alternatives are
unreachable: 1
[20:10:34] warning(201): Test.g:91:32: The following alternatives are
unreachable: 1
[20:10:38] TestLexer.java:93: c is already defined in mCOMMENT_T()
[20:10:38]             Token c = new CommonToken(input,
Token.INVALID_TOKEN_TYPE, Token.DEFAULT_CHANNEL, cStart,
getCharIndex()-1);
[20:10:38]                   ^
[20:10:38] TestLexer.java:99: e is already defined in mCOMMENT_T()
[20:10:38]             Token e = new CommonToken(input,
Token.INVALID_TOKEN_TYPE, Token.DEFAULT_CHANNEL, eStart,
getCharIndex()-1);
[20:10:38]                   ^
[20:10:38] Note: TestLexer.java uses unchecked or unsafe operations.
[20:10:38] Note: Recompile with -Xlint:unchecked for details.
[20:10:38] 2 errors
---END errors-------------------------------------
-- Amal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080202/0246e883/attachment.html 

From dmitry.gusev at gmail.com  Sat Feb  2 13:12:41 2008
From: dmitry.gusev at gmail.com (Dmitry Gusev)
Date: Sun, 3 Feb 2008 00:12:41 +0300
Subject: [antlr-interest] Suppress error mesages in console
In-Reply-To: <37a147f40802020814nd5f1080tbe6a1fa611a60a8b@mail.gmail.com>
References: <37a147f40802020453n19e5af5ci9433ce07e0c45fc0@mail.gmail.com>
	<LC0178CED2A1D402680A1EB42A7875706.1201966226.scalix.temporal-wave.com*@MHS>
	<37a147f40802020814nd5f1080tbe6a1fa611a60a8b@mail.gmail.com>
Message-ID: <37a147f40802021312m71495113ide37f2e58b480b9@mail.gmail.com>

Looks like it's all around BaseRecognizer reportError(...)

Thanks anyway

On Feb 2, 2008 7:14 PM, Dmitry Gusev <dmitry.gusev at gmail.com> wrote:

> I did implement my own error reporing routine, my grammar with that
> routine is there: http://pastebin.com/f3ac5c70
>
> But still I can't figure out where those errors are coming from... Here is
> how I'm parsing the input:
>
>             1. ANTLRStringStream input = new CaseInsensitiveStringStream
> (expression);
>             2. ExpressionLexer lexer = new ExpressionLexer(input);
>             3. CommonTokenStream stream = new CommonTokenStream(lexer);
>             4. ExpressionParser parser = new ExpressionParser(stream);
>             5. try
>             6. {
>             7.    ExpressionParser.expr_return r = parser.expr();
>             8.
>             9.    return (CommonTree) r.Tree;
>            10. } catch (RecognitionException) {
>            11.     throw new MultipleRecognitionExceptions(
> parser.GetErrors());
>            12. }
>
> The error messages I've mentioned appears in line 3
>
> I know why the error occured, and I've made the bad input especially for
> the example.
>
> But the question is how to write the error handling routine that will
> suppress that errors to be written to the standard output.
>
>
> On Feb 2, 2008 6:07 PM, Jim Idle <jimi at temporal-wave.com> wrote:
>
> >  Implement your own error reporting routine (should be an example in the
> > wiki I think) and then you can do anything you like including being silent.
> > However, this looks like a lexer specification problem. Do you have
> > something that takes a path like: '0'...'9'+ ':' and your input is [999]?
> > You need to allow the lexer rule to end before the ':' and let the lexer
> > change the type of the token to whatever that means.
> >
> >
> >
> > In a lexer, unless you feel that your rules encapsulate all input at all
> > points, then you may find it useful to have as your last rule:
> >
> >
> >
> > UNKNOWN : . {System.err.println("Debug: Character '" + $text + "' is not
> > catered for."); } ;
> >
> >
> >
> > Jim
> >
> >
> >
> > *From:* Dmitry Gusev [mailto:dmitry.gusev at gmail.com]
> > *Sent:* Saturday, February 02, 2008 4:54 AM
> > *To:* antlr-interest at antlr.org
> > *Subject:* [antlr-interest] Suppress error mesages in console
> >
> >
> >
> > If I try to parse bad input I have error messages in console like this:
> >
> > line 1:6 mismatched character ']' expecting ':'
> >
> > How can I suppress this output?
> >
> >
> >
> > --
> > Dmitry Gusev
> >
>
>
>
> --
> Dmitry Gusev




-- 
Dmitry Gusev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080203/f6949495/attachment.html 

From jimi at temporal-wave.com  Sat Feb  2 13:18:36 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 2 Feb 2008 13:18:36 -0800
Subject: [antlr-interest] SimpleCalc C Target example does not compile
In-Reply-To: <6f82a7270802020759q75d1c468la965cf497feb2ad7@mail.gmail.com>
Message-ID: <"L07799DA54E06452895553F0BC14B973B.1201988490.scalix.temporal-wave.com*"@MHS>

I?ll take a look but please double check that you have produced
everything correctly as these examples did all compile and work
correctly with the 3.0.1 release.

 

Jim

 

From: HG [mailto:himanshu.garg at gmail.com] 
Sent: Saturday, February 02, 2008 7:59 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] SimpleCalc C Target example does not compile

 

Compiling the example given in
http://www.antlr.org/wiki/display/ANTLR3/Using+the+ANTLR3+C+Target

    simplecalcparser.c
    simplecalcparser.c(283) : error C2065: 'pSimpleCalcLexer' :
undeclared identifier

due to the following lines in the same file:-

    pSimpleCalcLexer lex = SimpleCalcLexerNew(input);

but pSimpleCalcLexer is not defined/declared in either
SimpleCalcParser.c or in the included files.

Should this compile at all?

Thank You,
Himanshu.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080202/ab301740/attachment-0001.html 

From jimi at temporal-wave.com  Sat Feb  2 13:19:52 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 2 Feb 2008 13:19:52 -0800
Subject: [antlr-interest] Suppress error mesages in console
In-Reply-To: <37a147f40802020812m6256168et6871de9669eea640@mail.gmail.com>
Message-ID: <"L936A0E2AA45C4847AF9EE16A85FBDB2A.1201988564.scalix.temporal-wave.com*"@MHS>

These are coming from the lexer is what I was trying to say. You have
nothing to catch characters that cannot match any rule, so you get an
error from the lexre.

 

Jim

 

From: Dmitry Gusev [mailto:dmitry.gusev at gmail.com] 
Sent: Saturday, February 02, 2008 8:13 AM
To: Jim Idle
Subject: Re: [antlr-interest] Suppress error mesages in console

 

I did implement my own error reporing routine, my grammar with that
routine is there: http://pastebin.com/f3ac5c70

But still I can't figure out where those errors are coming from... Here
is how I'm parsing the input:

            1. ANTLRStringStream input = new
CaseInsensitiveStringStream(expression);
            2. ExpressionLexer lexer = new ExpressionLexer(input);
            3. CommonTokenStream stream = new CommonTokenStream(lexer);
            4. ExpressionParser parser = new ExpressionParser(stream);
            5. try
            6. {
            7.    ExpressionParser.expr_return r = parser.expr();
            8.
            9.    return (CommonTree) r.Tree;
           10. } catch (RecognitionException) {
           11.     throw new
MultipleRecognitionExceptions(parser.GetErrors());
           12. }

The error messages I've mentioned appears in line 3

I know why the error occured, and I've made the bad input especially for
the example.

But the question is how to write the error handling routine that will
suppress that errors to be written to the standard output.

On Feb 2, 2008 6:07 PM, Jim Idle <jimi at temporal-wave.com> wrote:

Implement your own error reporting routine (should be an example in the
wiki I think) and then you can do anything you like including being
silent. However, this looks like a lexer specification problem. Do you
have something that takes a path like: '0'...'9'+ ':' and your input is
[999]? You need to allow the lexer rule to end before the ':' and let
the lexer change the type of the token to whatever that means. 

  

In a lexer, unless you feel that your rules encapsulate all input at all
points, then you may find it useful to have as your last rule: 

  

UNKNOWN : . {System.err.println("Debug: Character '" + $text + "' is not
catered for."); } ; 

  

Jim 

  

From: Dmitry Gusev [mailto:dmitry.gusev at gmail.com] 
Sent: Saturday, February 02, 2008 4:54 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Suppress error mesages in console 

  

If I try to parse bad input I have error messages in console like this: 

line 1:6 mismatched character ']' expecting ':'

How can I suppress this output? 



-- 
Dmitry Gusev 




-- 
Dmitry Gusev 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080202/d19e5a93/attachment.html 

From jimi at temporal-wave.com  Sat Feb  2 13:21:57 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 2 Feb 2008 13:21:57 -0800
Subject: [antlr-interest] Minor suggestion re. Java output
In-Reply-To: <fo2isi$ir0$1@ger.gmane.org>
Message-ID: <"LB02C8BF6C929487cA3A5B45EC746A692.1201988691.scalix.temporal-wave.com*"@MHS>

A tree is not guaranteed to be any particular type or interface as the 
tree adaptor can produce anything it likes. Hence it must be an object. 
This is explained in the code etc.

Jim

> -----Original Message-----
> From: Olivier Lefevre [mailto:lefevrol at yahoo.com]
> Sent: Saturday, February 02, 2008 12:13 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Minor suggestion re. Java output
> 
> To make things a little nicer in client code,
> ANTLR could covariantly specialize return types
> in return classes. E.g., when you have
> 
> options {
>          output = AST;
>          ASTLabelType=CommonTree;
> }
> 
> in the grammar the xxx_return classes in the
> Parser could have a method
> 
>     public CommonTree getTree() { return tree; }
> 
> instead of
> 
>     public Object getTree() { return tree; }
> 
> That way we wouldn't need to cast. Since one
> goal of ANTLR is to emit code that doesn't look
> too wildly different from what one might have
> written by hand I think it makes sense to try
> to make the code more idiomatic.
> 
> Regards,
> 
> -- O.L.
> 



From jimi at temporal-wave.com  Sat Feb  2 13:23:55 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 2 Feb 2008 13:23:55 -0800
Subject: [antlr-interest] Debugger performance indicative of actual
	performance?
In-Reply-To: <f0fcc6820802021258j607e0374rf7c9ab65f0e410e4@mail.gmail.com>
Message-ID: <"LF5A592B2536F480cA5D1BB0CF96B498F.1201988809.scalix.temporal-wave.com*"@MHS>

Extremely unlikely that the debug version is giving you any performance 
information. The biggest problem with that java stuff is that Java takes 
a hundred years to initialize, then the parser executes in 0.003 
seconds. You are probably seeing the startup time for the debugger and 
so on and not the actual parsing. 

Jim

> -----Original Message-----
> From: Mark Volkmann [mailto:r.mark.volkmann at gmail.com]
> Sent: Saturday, February 02, 2008 12:58 PM
> To: Steve Bennett
> Cc: antlr-interest
> Subject: Re: [antlr-interest] Debugger performance indicative of 
actual
> performance?
> 
> On Feb 2, 2008 3:27 AM, Steve Bennett <stevagewp at gmail.com> wrote:
> > Using the debugger to parse some typical input is taking what seems
> > like a very long time to me - 5-10 seconds for a 7kb file. How
> > indicative is this likely to be of the performance I'll get in a
> > production environment? How much can a grammar be tuned for
> > performance?
> >
> > I ask because 5-10 seconds could well be 2 or even 3 orders of
> > magnitude too slow...
> 
> I can't answer the question. However, I've never found it useful to
> process that much input in the debugger. Typically I'm using it to
> verify that my grammar is producing the AST that I want for certain
> kinds of input. The amount of input required to verify that for me is
> typically 10 lines or less. Looking through the AST for 7 KB of input
> seems overwhelming.
> 
> --
> R. Mark Volkmann
> Object Computing, Inc.



From antlr at mirality.co.nz  Sat Feb  2 14:36:48 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 03 Feb 2008 11:36:48 +1300
Subject: [antlr-interest] Possible bug?
In-Reply-To: <f6a04d790802021308q188c6cadu1d390a51566e5b7a@mail.gmail.co
 m>
References: <f6a04d790802021308q188c6cadu1d390a51566e5b7a@mail.gmail.com>
Message-ID: <20080202223747.BBD9E11ED07@www.antlr.org>

At 10:08 3/02/2008, Amal Khailtash wrote:
>COMMENT_T
>//      : c='$comment' t=(options {greedy=false;} : .)* e='$end'
>         : c='$comment' t=TEXT_T e='$end'
>         {
>           $c.setType(COMMENT);
>           emit($c);
>           $t.setType(TEXT);
>           emit($t);
>           $e.setType(END);
>           emit($e);
>         }
>         ;

I can't really answer to the rest of your problem, but unless 
something has changed when I wasn't looking, the above code 
doesn't do what you seem to be trying to do.  "emit" doesn't 
actually emit a token, it simply sets which token will be emitted 
when the rule ends.  Thus you're only going to be emitting the END 
token from that rule. 


From compilers at gmail.com  Sat Feb  2 16:08:38 2008
From: compilers at gmail.com (Dan S.)
Date: Sat, 2 Feb 2008 16:08:38 -0800
Subject: [antlr-interest] Error return code
Message-ID: <139944a50802021608p4e7ad7c6ue5e5fa6e5d30019c@mail.gmail.com>

Hi,

I'm using ANTLRv3 and having an issue with invoking it
from a Makefile.

I run ANTLR on my grammar using "java org.antlr.Tool
myGrammar.g" in my Makefile. However, whenever there
is an error in my grammar, the return code is still 0.

I'm assuming the problem is my lack of knowledge of
Java, so hopefully someone can point me in the right
direction to figure out how to catch grammar errors.

Dan.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080202/f4bffb20/attachment.html 

From clinton.roy at gmail.com  Sat Feb  2 16:34:46 2008
From: clinton.roy at gmail.com (Clinton Roy)
Date: Sun, 3 Feb 2008 10:34:46 +1000
Subject: [antlr-interest] Error return code
In-Reply-To: <139944a50802021608p4e7ad7c6ue5e5fa6e5d30019c@mail.gmail.com>
References: <139944a50802021608p4e7ad7c6ue5e5fa6e5d30019c@mail.gmail.com>
Message-ID: <9c0715e40802021634g137b5eb7k955883f3d0a34d6d@mail.gmail.com>

Hi Dan,

On Feb 3, 2008 10:08 AM, Dan S. <compilers at gmail.com> wrote:
> I'm using ANTLRv3 and having an issue with invoking it
> from a Makefile.
>
> I run ANTLR on my grammar using "java org.antlr.Tool
> myGrammar.g" in my Makefile. However, whenever there
>
> is an error in my grammar, the return code is still 0.

This problem has been fixed in source control versions, but is not yet
available in a released version:

http://www.antlr.org:8888/browse/ANTLR-43

3.1 should be out any day now..

You should be able to work the bug that by using test -nt, something like:

fooParser.c: foo.g
     java org.antlr.Tool foo.g
    test fooParser -nt foo.g

Hope that helps,
-- 
Clinton Roy
CSIRO - Robotics Platform Engineer
Autonomous Systems Lab

humbug.org.au  - Brisbane Unix Group
azure.humbug.org.au/~croy/blog - Blog
flickr.com/photos/croy/ - Photos

From compilers at gmail.com  Sat Feb  2 17:23:16 2008
From: compilers at gmail.com (Dan S.)
Date: Sat, 2 Feb 2008 17:23:16 -0800
Subject: [antlr-interest] Error return code
In-Reply-To: <139944a50802021608p4e7ad7c6ue5e5fa6e5d30019c@mail.gmail.com>
References: <139944a50802021608p4e7ad7c6ue5e5fa6e5d30019c@mail.gmail.com>
Message-ID: <139944a50802021723x4e8632e6q22d98c5a7fc0c2a9@mail.gmail.com>

Hi Roy,

First, I assume you meant "test fooParser.c -nt foo.g".

Secondly, this does not work for me. Even though ANTLR is hitting an
error, it generates all the output files, or at least partial ones.

Dan.

> Hi Dan,
>
> On Feb 3, 2008 10:08 AM, Dan S. <compilers at gmail.com> wrote:
> > I'm using ANTLRv3 and having an issue with invoking it
> > from a Makefile.
> >
> > I run ANTLR on my grammar using "java org.antlr.Tool
> > myGrammar.g" in my Makefile. However, whenever there
> >
> > is an error in my grammar, the return code is still 0.
>
> This problem has been fixed in source control versions, but is not yet
> available in a released version:
>
> http://www.antlr.org:8888/browse/ANTLR-43
>
> 3.1 should be out any day now..
>
> You should be able to work the bug that by using test -nt, something like:
>
> fooParser.c: foo.g
> java org.antlr.Tool foo.g
> test fooParser -nt foo.g
>
> Hope that helps,
> --
> Clinton Roy
> CSIRO - Robotics Platform Engineer
> Autonomous Systems Lab
>
> humbug.org.au - Brisbane Unix Group
> azure.humbug.org.au/~croy/blog - Blog
> flickr.com/photos/croy/ - Photos

From stevagewp at gmail.com  Sat Feb  2 18:38:38 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Sun, 3 Feb 2008 13:38:38 +1100
Subject: [antlr-interest] Debugger performance indicative of actual
	performance?
In-Reply-To: <f0fcc6820802021258j607e0374rf7c9ab65f0e410e4@mail.gmail.com>
References: <b8ceeef70802020127u1ab2791na95721f04460443a@mail.gmail.com>
	<f0fcc6820802021258j607e0374rf7c9ab65f0e410e4@mail.gmail.com>
Message-ID: <b8ceeef70802021838j5fca6547ref0918c80da7638f@mail.gmail.com>

On 2/3/08, Mark Volkmann <r.mark.volkmann at gmail.com> wrote:
> I can't answer the question. However, I've never found it useful to
> process that much input in the debugger. Typically I'm using it to
> verify that my grammar is producing the AST that I want for certain
> kinds of input. The amount of input required to verify that for me is
> typically 10 lines or less. Looking through the AST for 7 KB of input
> seems overwhelming.

Ah. The main reason is that my project is basically attempting to
define a grammar for a language with a massive corpus but no real
specification. So I'm feeding it lots of medium sized files just to
find out what real-world language features have yet to be added to the
grammar.

Jim Idle wrote:
>Extremely unlikely that the debug version is giving you any performance
>information. The biggest problem with that java stuff is that Java takes
>a hundred years to initialize, then the parser executes in 0.003
>seconds. You are probably seeing the startup time for the debugger and
>so on and not the actual parsing.

Ok, that's promising, though I notice that from the time the first
output appears to the final output is still a few seconds. I guess
there are ways to render the grammar more efficient though.

Oh, and I took the obvious (silly me) advice to just try hte damn
thing in a test harness: 0.687 seconds for one 7kb file. That seems
relatively promising.

Steve

From stevagewp at gmail.com  Sat Feb  2 22:24:56 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Sun, 3 Feb 2008 17:24:56 +1100
Subject: [antlr-interest] Small antlrworks request
Message-ID: <b8ceeef70802022224h1db8dbbfie619a20b005b5846@mail.gmail.com>

Along with the "auto-indent ':' in rule" option, it would be nice to
have an option to turn off indenting pipes (or put them in the same
option). Tabs in my source code just don't do it for me.

Thanks,
Steve

From stevagewp at gmail.com  Sun Feb  3 04:21:52 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Sun, 3 Feb 2008 23:21:52 +1100
Subject: [antlr-interest] Gated semantic predicates behaving like validating
	predicates
Message-ID: <b8ceeef70802030421y96a0500q6dfd80eedda1c500@mail.gmail.com>

Hi all (and sorry for spamming the list),

I've got a weird situation where some code that has been working for a
long time is now generating failed predicate messages:

line 1:17 rule RFC_LINK failed predicate: {!in_noparse}?
line 1:19 rule RFC_LINK failed predicate: {!in_noparse}?

Where the code looks like this:

----
RFC_LINK: {!in_noparse}?=>
  ((RFC_LINK_ACTUAL) => RFC_LINK_ACTUAL
  | LETTER { $type=LETTERS; }
  );

fragment
RFC_LINK_ACTUAL:
    'RFC'
    ' '+
    ('0'..'9')+;
----

I actually have a sequence of rules that start with that predicate,
and if I comment one out, the next one just fails.

I don't understand what I could have changed to suddenly make this
occur. I was experimenting with the latest build, but this should be
ANTLRworks 1.1.7.

Similarly, this code is now generating warnings (and refusing to
compile under 3.1b1 which seems to be stricter about unreachable
tokens):

ESCAPED_PUNC     : {in_noparse}? => '#' | '*' | ':' | ';' | '|' | '['
| ']' | '=' | '/';


HASH            : {!in_noparse}? => '#';
ASTERISK        : {!in_noparse}? => '*';
...

[23:18:57] warning(208): C:\antlr\mediawiki4.g:932:1: The following
token definitions are unreachable:
ASTERISK,COLON,SEMICOLON,PIPE,LEFT_BRACKET,RIGHT_BRACKET,EQUALS,SLASH


Obviously I have inadvertently changed something to cause this, but
what? Any ideas welcome.

Steve, who apologises for his constant newbie questions.

From cieslewski at hcs.ufl.edu  Sun Feb  3 05:42:57 2008
From: cieslewski at hcs.ufl.edu (Grzegorz Cieslewski)
Date: Sun, 3 Feb 2008 08:42:57 -0500
Subject: [antlr-interest] Tree Rewriting
Message-ID: <7aa837f80802030542g5a4e027ax252a909e80647176@mail.gmail.com>

I am just starting on a project that would much benefit ability to
rewrite the AST's.  I believe that this functionality will be
available in 3.1.  Is is already available in 3.1b1?  If so is there
some documentation or an example that show how that type of grammar
works?  I am sorry if this is a silly question, I am relatively new to
antlr.

-- 
=====================================================
Grzegorz Cieslewski
Research Assistant
High-performance Computing & Simulation (HCS) Research Laboratory
University of Florida, Dept. of Electrical and Computer Engineering
330 Benton Hall, Gainesville, FL, 32611-6200
Phone: (352) 392-9041
Email: cieslewski at hcs.ufl.edu
Web: www.hcs.ufl.edu
=====================================================

From stevagewp at gmail.com  Sun Feb  3 06:27:24 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Mon, 4 Feb 2008 01:27:24 +1100
Subject: [antlr-interest] Gated semantic predicates behaving like
	validating predicates
In-Reply-To: <b8ceeef70802030421y96a0500q6dfd80eedda1c500@mail.gmail.com>
References: <b8ceeef70802030421y96a0500q6dfd80eedda1c500@mail.gmail.com>
Message-ID: <b8ceeef70802030627w770c952bg9c87c8cc18ec590a@mail.gmail.com>

On 2/3/08, Steve Bennett <stevagewp at gmail.com> wrote:
> Obviously I have inadvertently changed something to cause this, but
> what? Any ideas welcome.

Ok, with some investigation, I have narrowed it down to a change I
made - but I don't see why the change is bad. In the following code,
the LEFT_BRACKET is the older (functional) method whereas
RIGHT_BRACKET is using my improved (non-functional) method:

LEFT_BRACKET    : {!this.in_noparse}? => '[';
RIGHT_BRACKET   : {!this.in_noparse}? => ']';

ESCAPED_PUNC     : ESCAPED__LEFT_BRACKET  | ']';

fragment
ESCAPED_LEFT_BRACKET:
                  {this.in_noparse}? =>  '[';

So apparently there is a problem when two rules refer to the same
string literal, with just a gated semantic predicate distinguishing
them? Does that sound right?

Steve

From stevagewp at gmail.com  Sun Feb  3 06:38:37 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Mon, 4 Feb 2008 01:38:37 +1100
Subject: [antlr-interest] Gated semantic predicates behaving like
	validating predicates
In-Reply-To: <b8ceeef70802030627w770c952bg9c87c8cc18ec590a@mail.gmail.com>
References: <b8ceeef70802030421y96a0500q6dfd80eedda1c500@mail.gmail.com>
	<b8ceeef70802030627w770c952bg9c87c8cc18ec590a@mail.gmail.com>
Message-ID: <b8ceeef70802030638y4f05b4c0p9c6283d699d27acb@mail.gmail.com>

Dammit, I found the error. I didn't realise (or forgot) that gated
predicates apply at the subrule level, not just the rule level.

ESCAPED_PUNC     : {this.in_noparse}? => ('#' | '*' | ':' | ';' | '|'
| '[' | ']' | '=' | '/');

is correct.

ESCAPED_PUNC     : {this.in_noparse}? => '#' | '*' | ':' | ';' | '|' |
'[' | ']' | '=' | '/';

is incorrect.

Ouch. What a lot of time spent on what turned out to be missing parentheses.

I have also learnt that this kind of construct is incorrect:

FOO: {flag}? => 'X';
UNFOO: 'X';

You need to specify the reverse semantic predicate.

Anyway, thanks for listening everyone, you've been very supportive :)

Steve

From jaluber at gmx.de  Sun Feb  3 06:49:36 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Sun, 03 Feb 2008 15:49:36 +0100
Subject: [antlr-interest] Tree Rewriting
In-Reply-To: <7aa837f80802030542g5a4e027ax252a909e80647176@mail.gmail.com>
References: <7aa837f80802030542g5a4e027ax252a909e80647176@mail.gmail.com>
Message-ID: <47A5D480.4040208@gmx.de>

Grzegorz Cieslewski schrieb:
> I am just starting on a project that would much benefit ability to
> rewrite the AST's.  I believe that this functionality will be
> available in 3.1.  Is is already available in 3.1b1?  If so is there
> some documentation or an example that show how that type of grammar
> works?  I am sorry if this is a silly question, I am relatively new to
> antlr.
> 
It should be available in 3.1b1. I am not aware of polished 
documentation, but on the Wiki under "Terence's Notes" you may find 
further information on that matter.

Johannes

From stevagewp at gmail.com  Sun Feb  3 08:02:29 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Mon, 4 Feb 2008 03:02:29 +1100
Subject: [antlr-interest] ArrayIndexOutOfBoundsException
In-Reply-To: <b8ceeef70801300634y6f78efe0lda89205ff5b57278@mail.gmail.com>
References: <b8ceeef70801300634y6f78efe0lda89205ff5b57278@mail.gmail.com>
Message-ID: <b8ceeef70802030802o13cf5e28i7b78a29641370d35@mail.gmail.com>

On 1/31/08, Steve Bennett <stevagewp at gmail.com> wrote:
> I received this:
>
> Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: -1

If any of the developers are interested, I have narrowed this down to
a place where if I comment out a single token subrule, the problem
goes away. Unfortunately that small change causes massive differences
in the generated output, problably hoisting rules all over the place.

Anyway, I have quarantined the two sets of grammars and generated
code, with the buggy input, if anyone wants them.

Steve

From jimi at temporal-wave.com  Sun Feb  3 08:14:32 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 3 Feb 2008 08:14:32 -0800
Subject: [antlr-interest] Gated semantic predicates behaving like
	validating predicates
In-Reply-To: <b8ceeef70802030638y4f05b4c0p9c6283d699d27acb@mail.gmail.com>
Message-ID: <"L254955AB655F4217B3BF0A8F8DF20763.1202056649.scalix.temporal-wave.com*"@MHS>

Actually you are probably better matching the token letters that overlap 
in one rule, then changing the type in an action afterwards. Otherwise 
you are specifying the same sequence over and over again and duplicate 
the predicate and its converse and so on.

Jim

> -----Original Message-----
> From: Steve Bennett [mailto:stevagewp at gmail.com]
> Sent: Sunday, February 03, 2008 6:39 AM
> To: antlr-interest
> Subject: Re: [antlr-interest] Gated semantic predicates behaving like
> validating predicates
> 
> Dammit, I found the error. I didn't realise (or forgot) that gated
> predicates apply at the subrule level, not just the rule level.
> 
> ESCAPED_PUNC     : {this.in_noparse}? => ('#' | '*' | ':' | ';' | '|'
> | '[' | ']' | '=' | '/');
> 
> is correct.
> 
> ESCAPED_PUNC     : {this.in_noparse}? => '#' | '*' | ':' | ';' | '|' |
> '[' | ']' | '=' | '/';
> 
> is incorrect.
> 
> Ouch. What a lot of time spent on what turned out to be missing
> parentheses.
> 
> I have also learnt that this kind of construct is incorrect:
> 
> FOO: {flag}? => 'X';
> UNFOO: 'X';
> 
> You need to specify the reverse semantic predicate.
> 
> Anyway, thanks for listening everyone, you've been very supportive :)
> 
> Steve



From antlr at mirality.co.nz  Sun Feb  3 11:24:54 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 04 Feb 2008 08:24:54 +1300
Subject: [antlr-interest] Gated semantic predicates behaving like
 validating predicates
In-Reply-To: <b8ceeef70802030421y96a0500q6dfd80eedda1c500@mail.gmail.com
 >
References: <b8ceeef70802030421y96a0500q6dfd80eedda1c500@mail.gmail.com>
Message-ID: <20080203192507.04E4911EE35@www.antlr.org>

At 01:21 4/02/2008, Steve Bennett wrote:
 >
 >ESCAPED_PUNC     : {in_noparse}? => '#' | '*' | ':' | ';' | '|' 
|
 >'[' | ']' | '=' | '/';
 >
 >
 >HASH            : {!in_noparse}? => '#';
 >ASTERISK        : {!in_noparse}? => '*';

Given that you're matching the same characters in both, I'd turn 
this around:

HASH  :  '#' { if (in_noparse) { $type = ESCAPED_PUNC; } };
...

Seems simpler.

Or even just leave it as a HASH and deal with the difference in 
the parser instead, but that depends on how your grammar is 
structured.


From guntiso at latnet.lv  Sun Feb  3 13:37:50 2008
From: guntiso at latnet.lv (Guntis Ozols)
Date: Sun,  3 Feb 2008 23:37:50 +0200
Subject: [antlr-interest] Minor suggestion re. Java output
In-Reply-To: <"LB02C8BF6C929487cA3A5B45EC746A692.1201988691.scalix.temporal-wave.com*"@MHS>
References: <"LB02C8BF6C929487cA3A5B45EC746A692.1201988691.scalix.temporal-wave.com*"@MHS>
Message-ID: <1202074670.47a6342e2153b@clients.latnet.lv>

> A tree is not guaranteed to be any particular type or interface as the
> tree adaptor can produce anything it likes. Hence it must be an object.
> This is explained in the code etc.
>
> Jim

Casting tree once is not that big of a deal, but tons of casting could be
eliminated, plus there is no need for an option, if CommonTree.getChild()
returned CommonTree.

Covariant return types are available since java 1.5 (Sept 2004).

Also, how about using enum for tokens? It would free client code of prefixes in
switch statements, plus toString() would be available and more.

Guntis

> > To make things a little nicer in client code,
> > ANTLR could covariantly specialize return types
> > in return classes. E.g., when you have
> >
> > options {
> >          output = AST;
> >          ASTLabelType=CommonTree;
> > }
> >
> > in the grammar the xxx_return classes in the
> > Parser could have a method
> >
> >     public CommonTree getTree() { return tree; }
> >
> > instead of
> >
> >     public Object getTree() { return tree; }
> >
> > That way we wouldn't need to cast. Since one
> > goal of ANTLR is to emit code that doesn't look
> > too wildly different from what one might have
> > written by hand I think it makes sense to try
> > to make the code more idiomatic.
> >
> > Regards,
> >
> > -- O.L.


From jaluber at gmx.de  Sun Feb  3 14:24:15 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Sun, 03 Feb 2008 23:24:15 +0100
Subject: [antlr-interest] Minor suggestion re. Java output
In-Reply-To: <1202074670.47a6342e2153b@clients.latnet.lv>
References: <"LB02C8BF6C929487cA3A5B45EC746A692.1201988691.scalix.temporal-wave.com*"@MHS>
	<1202074670.47a6342e2153b@clients.latnet.lv>
Message-ID: <47A63F0F.202@gmx.de>

Guntis Ozols schrieb:
>> A tree is not guaranteed to be any particular type or interface as the
>> tree adaptor can produce anything it likes. Hence it must be an object.
>> This is explained in the code etc.
>>
>> Jim
> 
> Casting tree once is not that big of a deal, but tons of casting could be
> eliminated, plus there is no need for an option, if CommonTree.getChild()
> returned CommonTree.
> 
> Covariant return types are available since java 1.5 (Sept 2004).

The Java target remains for the foreseeable future 1.4. I haven't looked 
if C# allows this, too, but it would be possible to use templates and 
specify the template parameter so that it uses the ASTLabelType value.

> Also, how about using enum for tokens? It would free client code of prefixes in
> switch statements, plus toString() would be available and more.

Could do that only for C#, but for Java you are out of luck. As long 
people use 1.4 for projects, ANTLR can't easily move. I have that 
problem with the C# target, though I'm quite sure that no one uses C# 1 
in combination with ANTLR.

Johannes

From guntiso at latnet.lv  Sun Feb  3 15:52:37 2008
From: guntiso at latnet.lv (Guntis Ozols)
Date: Mon,  4 Feb 2008 01:52:37 +0200
Subject: [antlr-interest] Minor suggestion re. Java output
In-Reply-To: <47A63F0F.202@gmx.de>
References: <"LB02C8BF6C929487cA3A5B45EC746A692.1201988691.scalix.temporal-wave.com*"@MHS>
	<1202074670.47a6342e2153b@clients.latnet.lv> <47A63F0F.202@gmx.de>
Message-ID: <1202082757.47a653c509af1@clients.latnet.lv>

> >> A tree is not guaranteed to be any particular type or interface as the
> >> tree adaptor can produce anything it likes. Hence it must be an object.
> >> This is explained in the code etc.
> >>
> >> Jim
> >
> > Casting tree once is not that big of a deal, but tons of casting could be
> > eliminated, plus there is no need for an option, if CommonTree.getChild()
> > returned CommonTree.
> >
> > Covariant return types are available since java 1.5 (Sept 2004).
> >
> > Guntis
>
> The Java target remains for the foreseeable future 1.4. I haven't looked
> if C# allows this, too, but it would be possible to use templates and
> specify the template parameter so that it uses the ASTLabelType value.
>
> > Also, how about using enum for tokens? It would free client code of
> prefixes in
> > switch statements, plus toString() would be available and more.
>
> Could do that only for C#, but for Java you are out of luck. As long
> people use 1.4 for projects, ANTLR can't easily move. I have that
> problem with the C# target, though I'm quite sure that no one uses C# 1
> in combination with ANTLR.
>
> Johannes

Ok, I've created a couple of simple classes and eliminated tens of casts and
newlines (I am using java 1.6). I think I'll get to tokens later. If I
understand correctly, since I have no actions, ASTLabelType is of no use
anyway. If somebody's interested, here's the code:

////////////////////////////////////////// Ast.java
import org.antlr.runtime.Token;
import org.antlr.runtime.tree.CommonTree;

public class Ast extends CommonTree {

    public Ast(Ast node) {
        super(node);
    }

    public Ast(Token t) {
        super(t);
    }

    @Override
    public Ast dupNode() {
        return new Ast(this);
    }

    @Override
    public Ast getChild(int i) {
        return (Ast) super.getChild(i);
    }
}

////////////////////////////////////////// AstAdaptor.java
import org.antlr.runtime.Token;
import org.antlr.runtime.tree.CommonTreeAdaptor;

public class AstAdaptor extends CommonTreeAdaptor {

    @Override
    public Object create(Token payload) {
        return new Ast(payload);
    }
}



From guntiso at latnet.lv  Sun Feb  3 16:57:55 2008
From: guntiso at latnet.lv (Guntis Ozols)
Date: Mon,  4 Feb 2008 02:57:55 +0200
Subject: [antlr-interest] Minor suggestion re. Java output
In-Reply-To: <47A63F0F.202@gmx.de>
References: <"LB02C8BF6C929487cA3A5B45EC746A692.1201988691.scalix.temporal-wave.com*"@MHS>
	<1202074670.47a6342e2153b@clients.latnet.lv> <47A63F0F.202@gmx.de>
Message-ID: <1202086675.47a66313e80cb@clients.latnet.lv>

> The Java target remains for the foreseeable future 1.4.
> ...
> Could do that only for C#, but for Java you are out of luck.
> As long people use 1.4 for projects, ANTLR can't easily move
> ...
> Johannes

I do not understand those people.
Do they develop their compilers on embedded devices?

You can use generics, enums, ... and still be compatible with java 1.4.
Please take a look at retroweaver - http://retroweaver.sourceforge.net/
and reconsider 'foreseeable future'.

I've used retroweaver 1.1 back in 2005 successfully on a project with
thousands of classes (back then, I had to fix it and submitted a patch).
Now it's 2008, version 2.0.3 is out, it should be pretty good.

Guntis


From talk2anurag at gmail.com  Sun Feb  3 17:19:52 2008
From: talk2anurag at gmail.com (Anurag Agarwal)
Date: Mon, 4 Feb 2008 06:49:52 +0530
Subject: [antlr-interest] FailedPredicateException with c.g grammar
In-Reply-To: <38769c270802031713y753b6980r3aba73da452b6ae1@mail.gmail.com>
References: <38769c270802031713y753b6980r3aba73da452b6ae1@mail.gmail.com>
Message-ID: <38769c270802031719j4cda6370n12142da7f8333b8f@mail.gmail.com>

On Feb 4, 2008 6:43 AM, Anurag Agarwal <talk2anurag at gmail.com> wrote:

> Hi,
>
> I am new to Antlr. I downloaded iANTLRWorks 1.1.7 for Windows few days
> back. It seems to be working fine with Expr.g sample grammar.
>
> I am trying to use c.g grammar. I am giving input
> int i;
>
> to interpreter and immediately I get FailedPredicatedException.
>
> Any pointers in this regards will be helpful.
>
> Regards,
> Anurag.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080204/626be505/attachment.html 

From antlr-list at arizona-software.ch  Sun Feb  3 22:46:19 2008
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Sun, 3 Feb 2008 22:46:19 -0800
Subject: [antlr-interest] Bug? "new (new" code generated.
In-Reply-To: <b8ceeef70801312358ia29d6f3n3abe85bf8f1f25dd@mail.gmail.com>
References: <b8ceeef70801312358ia29d6f3n3abe85bf8f1f25dd@mail.gmail.com>
Message-ID: <36433464-632A-4E2F-9100-CD7FE1E6FE90@arizona-software.ch>

ANTLRWorks does not support yet the split grammar. I will add full  
support in version 1.2 with the help of two mechanisms: ANTLRWorks  
will first try to find the lexer by using the name provided in  
tokenVocab. If this name does not exist, ANTLRWorks will ask the user  
to provide the name/file of the lexer grammar.

Regards,

Jean

On Jan 31, 2008, at 11:58 PM, Steve Bennett wrote:

> I split a working grammar into a lexer and parser. Using Antlrworks
> 1.1.7, I now get this error:
>
> [18:36:53] C:\antlr\__Test__.java:9: <identifier> expected
> [18:36:53]  lex = new (new ANTLRFileStream("C:\\antlr\ 
> \__Test___input.txt"));
> [18:36:53]            ^
> [18:36:53] C:\antlr\__Test__.java:9: '(' or '[' expected
> [18:36:53]  lex = new (new ANTLRFileStream("C:\\antlr\ 
> \__Test___input.txt"));
> [18 
> : 
> 36 
> : 
> 53]                                                                  ^
> [18:36:53] 2 errors
>
> Here's the complete code being generated. Am I doing something wrong?
>
> import java.io.*;
> import org.antlr.runtime.*;
> import org.antlr.runtime.debug.DebugEventSocketProxy;
>
>
> public class __Test__ {
>
>    public static void main(String args[]) throws Exception {
> lex = new (new ANTLRFileStream("C:\\antlr\\__Test___input.txt"));
>        CommonTokenStream tokens = new CommonTokenStream(lex);
>
>        mediawiki2Parser g = new mediawiki2Parser(tokens, 49153);
>        try {
>            g.start();
>        } catch (RecognitionException e) {
>            e.printStackTrace();
>        }
>    }
> }
>
> Steve


From jaluber at gmx.de  Mon Feb  4 03:17:51 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Mon, 04 Feb 2008 12:17:51 +0100
Subject: [antlr-interest] Minor suggestion re. Java output
In-Reply-To: <1202086675.47a66313e80cb@clients.latnet.lv>
References: <"LB02C8BF6C929487cA3A5B45EC746A692.1201988691.scalix.temporal-wave.com*"@MHS>
	<1202074670.47a6342e2153b@clients.latnet.lv> <47A63F0F.202@gmx.de>
	<1202086675.47a66313e80cb@clients.latnet.lv>
Message-ID: <47A6F45F.9010701@gmx.de>

Guntis Ozols schrieb:
>> The Java target remains for the foreseeable future 1.4.
>> ...
>> Could do that only for C#, but for Java you are out of luck.
>> As long people use 1.4 for projects, ANTLR can't easily move
>> ...
>> Johannes
> 
> I do not understand those people.
> Do they develop their compilers on embedded devices?

They may not develop their compilers on on embedded devices but maybe 
the compilers have to run on those devices. Or it could be a policy. Big 
companies with security in mind tend to be one or two versions behind 
the current software.

> You can use generics, enums, ... and still be compatible with java 1.4.
> Please take a look at retroweaver - http://retroweaver.sourceforge.net/
> and reconsider 'foreseeable future'.

I am the wrong person to convince - I do not use Java, if I can help it. 
The only way Ter will change his mind is if you can convince him of 
being able to enforce the use of RetroWeaver for those, who have to use 1.4.

Johannes

From jaluber at gmx.de  Mon Feb  4 03:19:26 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Mon, 04 Feb 2008 12:19:26 +0100
Subject: [antlr-interest] FailedPredicateException with c.g grammar
In-Reply-To: <38769c270802031719j4cda6370n12142da7f8333b8f@mail.gmail.com>
References: <38769c270802031713y753b6980r3aba73da452b6ae1@mail.gmail.com>
	<38769c270802031719j4cda6370n12142da7f8333b8f@mail.gmail.com>
Message-ID: <47A6F4BE.8060008@gmx.de>

Anurag Agarwal schrieb:
> 
> 
> On Feb 4, 2008 6:43 AM, Anurag Agarwal <talk2anurag at gmail.com 
> <mailto:talk2anurag at gmail.com>> wrote:
> 
>     Hi,
> 
>     I am new to Antlr. I downloaded iANTLRWorks 1.1.7 for Windows few
>     days back. It seems to be working fine with Expr.g sample grammar.
> 
>     I am trying to use c.g grammar. I am giving input
>     int i;
> 
>     to interpreter and immediately I get FailedPredicatedException.
> 
>     Any pointers in this regards will be helpful.
> 
>     Regards,
>     Anurag.
> 
> 
c.g maybe uses predicates. ANTLRworks interpreter doesn't work with 
predicates - you have to use the debugger for that.

Johannes

From ianmdev at yahoo.co.uk  Mon Feb  4 04:07:41 2008
From: ianmdev at yahoo.co.uk (Ian McDonagh)
Date: Mon, 4 Feb 2008 12:07:41 +0000 (GMT)
Subject: [antlr-interest] Reusing grammars
Message-ID: <937976.68565.qm@web26310.mail.ukl.yahoo.com>

Hi all

I want to implement my own template language (like Velocity, JSP or ASP) and reuse an existing ANTLR 3.0 grammar I've written for evaluating expressions.

I might have something like this:
________________________________________
Contacts:
@foreach( getPeople(lastName) )
Name: ${Name}
@end
________________________________________

This input would be parsed to construct a template, which is made up of various nodes, which could in turn be merged with a context to produce the template output.  The parsed template structure would look something like this:
#Text:"Contacts:"
#ForEach: getPeople(lastName)
|----#Text:"Name: "
|----#Expression: Name

My problem is that my expression language uses some of the same tokens I want to use in my template language, so it's difficult to use a lexical filter only (which is pretty simple with tags like '<%' and '%>').

Is it possible to parse the entire input in one pass, switching between different parsers?

With ANTLR 2.7 I could just use grammar inheritance.  What to do in ANTLR 3?

Any advice would be greatly appreciated.
Thanks.






      __________________________________________________________
Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080204/3ffbcacb/attachment-0001.html 

From discontinuum at gmail.com  Mon Feb  4 05:43:29 2008
From: discontinuum at gmail.com (Erik Kratochvil)
Date: Mon, 4 Feb 2008 14:43:29 +0100
Subject: [antlr-interest] tokenVocab and certain rules cause
	NullPointerException in org.antlr.Tool
In-Reply-To: <47a3842d.195c4e0a.1fd6.4dbaSMTPIN_ADDED@mx.google.com>
References: <f4dc39b90802010951q4a971888ledebce3801d86a31@mail.gmail.com>
	<47a3842d.195c4e0a.1fd6.4dbaSMTPIN_ADDED@mx.google.com>
Message-ID: <f4dc39b90802040543m424c50f0y13d57bdbb094fccb@mail.gmail.com>

Hi, thanks for interesting tips. I did as you instructed and split the
grammar into two grammars.

lexer grammar Flex;
S:';';
W:' ';

and

parser grammar Fpar;
options { tokenVocab = Basic; tokenVocab = Flex; }
r: (~S)+;

If the file Basic.tokens contained just

Gosub=10

the exception was not thrown. However, if I tried to change it to

S=10

the exception was back like Arnold Schwarzenegger's Terminator.

I'm resigning to forcing ANTLR to assign certain token types to
selected literals and I'm going to hardwire them via my own
testLiterals() or setType().


Erik Kratochv?l

From discontinuum at gmail.com  Mon Feb  4 05:57:22 2008
From: discontinuum at gmail.com (Erik Kratochvil)
Date: Mon, 4 Feb 2008 14:57:22 +0100
Subject: [antlr-interest] ArrayIndexOutOfBoundsException
Message-ID: <f4dc39b90802040557v76f7f6fen4545da1a9c20a1b8@mail.gmail.com>

Hi.

I would also like to share an ArrayIndexOutOfBoundsException. My
grammar has 4KSLOC so I'm afraid I will not be able to pinpoint the
problematic spot.

For what it's worth, I'm using backtrack = true.


error(10):  internal error: O.g : java.lang.ArrayIndexOutOfBoundsException: 2
org.antlr.analysis.NFAState.addTransition(NFAState.java:113)
org.antlr.tool.TreeToNFAConverter.rule(TreeToNFAConverter.java:586)
org.antlr.tool.TreeToNFAConverter.rules(TreeToNFAConverter.java:378)
org.antlr.tool.TreeToNFAConverter.grammarSpec(TreeToNFAConverter.java:332)
org.antlr.tool.TreeToNFAConverter.grammar(TreeToNFAConverter.java:156)
org.antlr.tool.Grammar.createNFAs(Grammar.java:763)
org.antlr.tool.GrammarSanity.checkAllRulesForLeftRecursion(GrammarSanity.java:27)
org.antlr.tool.Grammar.checkAllRulesForLeftRecursion(Grammar.java:1388)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:268)
org.antlr.Tool.processGrammar(Tool.java:347)
org.antlr.Tool.process(Tool.java:311)
org.antlr.Tool.main(Tool.java:70)

-- 
Erik Kratochvil

From ralf_c at web.de  Mon Feb  4 06:12:46 2008
From: ralf_c at web.de (Ralf Cremerius)
Date: Mon, 04 Feb 2008 15:12:46 +0100
Subject: [antlr-interest] No output using GUnit?
Message-ID: <25833349@web.de>

Hello,

I'm experiencing strange behaviour using GUnit:

GUnit is "installed" properly and works as expected for some of my grammars. For others, which also can be translated with ANTLR without problems, there appears no output on the console for any correct GUnit script. I tried lots of different contents  in the script testing these "problematic grammars", but none generates any output. Even something as trivial as this doesn't work:

---------------

gunit PreDL;

rule:
"input" OK

---------------

Though I get an error message from GUnit, in case I include syntactical errors inside the script.

The name of the grammar tested is spelled correctly, of course. I've got no ideas left, has anybody experienced problems like this before?

Thanks in advance,
   Ralf
_______________________________________________________________________
Jetzt neu! Sch?tzen Sie Ihren PC mit McAfee und WEB.DE. 30 Tage
kostenlos testen. http://www.pc-sicherheit.web.de/startseite/?mc=022220


From phreed at gmail.com  Mon Feb  4 06:36:52 2008
From: phreed at gmail.com (Fred)
Date: Mon, 4 Feb 2008 08:36:52 -0600
Subject: [antlr-interest] Oh my, code too large
Message-ID: <cb0c557b0802040636i1dfb1899ia27a11008a656061@mail.gmail.com>

I have recently run into this (previously posted) problem and was
wondering what the status was?
There is a slight difference though, the error is found in a tree
grammar rather than a lexer.

"The problem is real.
Java effectively limits you to 65KBytes per method of byte-code.
The source of the limit is the definition of  the class files.
A class file includes, for each method, a table of  exception handlers,
and each of the entries in these tables includes the address
(in bytes relative to the beginning of the method) of the
beginning and end of the try-block, stored as two 16-bit integers.
There is no way around this.
I hope that there are people out there  who can make suggestions as to
how to modify your lexer to generate
less code."
Peace
- John


On Dec 13, 2007, at 2:51 PM, Andreas Ravnestad wrote:

> On 12/13/07, Andreas Ravnestad <andreas.ravnestad at gmail.com> wrote:
>> Sometimes ANTLR generates a lexer which will make javac choke on
>> itself with a message resembling this:
>>
>>  code too large
>>     public int specialStateTransition(int s, IntStream input)throws
NoViableAltException {

From phreed at gmail.com  Mon Feb  4 08:25:14 2008
From: phreed at gmail.com (Fred)
Date: Mon, 4 Feb 2008 10:25:14 -0600
Subject: [antlr-interest] Extensions which I have found useful
In-Reply-To: <cb0c557b0802011645v3e7b7745w8ab401dfe0c95c62@mail.gmail.com>
References: <cb0c557b0802011002m1c0a53fesb5e6fc9be0660d37@mail.gmail.com>
	<B608E168-E4A4-44A2-80A0-E117434FD508@cs.usfca.edu>
	<cb0c557b0802011645v3e7b7745w8ab401dfe0c95c62@mail.gmail.com>
Message-ID: <cb0c557b0802040825te01bb16h3ed7ebcae6e6d40b@mail.gmail.com>

On Feb 1, 2008 6:35 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
>
> On Feb 1, 2008, at 10:02 AM, Fred wrote:
>
> > A couple of items which I have found useful in the development of an
> > IDL parser (with constraints).
> >
> > ----------
> > For StringTemplates, provide a toSubList(List list, String formatName)
> > method in AttributeRenderer similar to its toString(Object obj, String
> > formatName) method.
> > The toSubList() method would provide formatting of attribute lists.
> > (I can explain the scenario where this was needed if you care.)
> > The method is useful when the order, position, presence of elements in
> > a list attribute need to be changed prior to formatting its elements.

> can you just have model order before it's sent in?

Not really, the order of the list is dependent on the output language.
The compiler needs to generate methods
that conform to data structures that are *structurally different*.
Without getting into the details, the language specific data structure
are produced by two different compilers (produced by different people).
So, the approach you suggest would require that the model be aware of
the view details.
What I do now is have the model invoke the toSubList() method of the
language specific renderer.
I actually works pretty well.
What I am suggesting is that the 'format' idea be extended to work
with attributes that are lists.

> > This could be generalized to include the 'separator' argument.
> > At present the toSubList() method is called from the model prior to
> > invoking the template.
> > I believe that it would be more appropriate to perform this formatting
> > in the view (i.e. template).

> Ter
>

peace
Fred

From phreed at gmail.com  Mon Feb  4 08:29:35 2008
From: phreed at gmail.com (Fred)
Date: Mon, 4 Feb 2008 10:29:35 -0600
Subject: [antlr-interest] Extensions which I have found useful
In-Reply-To: <cb0c557b0802011649g66fac636g28d1ddcbbbc6e1e2@mail.gmail.com>
References: <cb0c557b0802011002m1c0a53fesb5e6fc9be0660d37@mail.gmail.com>
	<B608E168-E4A4-44A2-80A0-E117434FD508@cs.usfca.edu>
	<cb0c557b0802011649g66fac636g28d1ddcbbbc6e1e2@mail.gmail.com>
Message-ID: <cb0c557b0802040829i29e31930g943d8a674322386d@mail.gmail.com>

On Feb 1, 2008 6:35 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
>
> On Feb 1, 2008, at 10:02 AM, Fred wrote:
<chop/>
> > Modify the *Walker.input to be a stack rather than a single variable.
> > Then similar to what is done with scope, allow the position in the AST
> > to be changed (input = new CommonTreeNodeStream(subtree))  as the rule
> > is entered.
> > (In my current implementation the subtree is obtained from a symbol
> > table.)
> > Normally, a preparatory pass through the AST to augment the symbol
> > table with the relevant information would be performed but that makes
> > the association less clear.
> > Conceptually, the input stack provides a way to "lazily" augment the
> > symbol table.
>
> interesting. i'll think about this when doing an interpreter.
>
> Ter
>
I can almost get the current implementation of 'scope' to do the whole
thing, but not quite.
Would it be a problem to have the 'input' property be implemented as a
stack rather than (in addition to) a variable?

By the way...
If the 'scope XYZ;' is used and something goes wrong during the
'@init' of a rule the finally section of the try doesn't run.
Meaning, there is a situation wherein the scope stack doesn't get
popped, leaving it in a damaged state.

peace

From jimi at temporal-wave.com  Mon Feb  4 08:39:49 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 4 Feb 2008 08:39:49 -0800
Subject: [antlr-interest] Minor suggestion re. Java output
In-Reply-To: <1202074670.47a6342e2153b@clients.latnet.lv>
Message-ID: <"L51905EA5D6D44569BC5B69481A68A893.1202144582.scalix.temporal-wave.com*"@MHS>



> -----Original Message-----
> From: Guntis Ozols [mailto:guntiso at latnet.lv]
> Sent: Sunday, February 03, 2008 1:38 PM
> To: Jim Idle
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Minor suggestion re. Java output
> 
> > A tree is not guaranteed to be any particular type or interface as
> the
> > tree adaptor can produce anything it likes. Hence it must be an
> object.
> > This is explained in the code etc.
> >
> > Jim
> 
> Casting tree once is not that big of a deal, but tons of casting could
> be
> eliminated, plus there is no need for an option, if
> CommonTree.getChild()
> returned CommonTree.
> 
> Covariant return types are available since java 1.5 (Sept 2004).
> 
> Also, how about using enum for tokens? It would free client code of
> prefixes in
> switch statements, plus toString() would be available and more.

The original code was 1.4 compliant - I don't know how Ter feels about 
being 1.5+ compliant but it is probably OK these days. However to b 
co-variant you must be able to return things that or more or less 
derived and an adapter can do anything it likes including ignoring 
CommonTree and so on. What you probably want to do is just derive from 
CommonTree and add the method yourself. The generated code will carry on 
using (cast) but your code can use your own methods. 

I think using enums is a reasonable suggestion, but I seemed to think 
that there was some reason not to do it and I don't remember what it 
was.

Jim



From jimi at temporal-wave.com  Mon Feb  4 08:41:47 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 4 Feb 2008 08:41:47 -0800
Subject: [antlr-interest] Minor suggestion re. Java output
In-Reply-To: <47A63F0F.202@gmx.de>
Message-ID: <"L00A94E9933324df9858EDBFBCC6CAF9A.1202144701.scalix.temporal-wave.com*"@MHS>



> -----Original Message-----
> From: Johannes Luber [mailto:jaluber at gmx.de]
> Sent: Sunday, February 03, 2008 2:24 PM
> To: Guntis Ozols
> Cc: Jim Idle; antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Minor suggestion re. Java output
> 
> Guntis Ozols schrieb:
> >
> > Covariant return types are available since java 1.5 (Sept 2004).
> 
> The Java target remains for the foreseeable future 1.4. I haven't
> looked
> if C# allows this, too, but it would be possible to use templates and
> specify the template parameter so that it uses the ASTLabelType value.

C# does allow covariance. I know because I just coded it in my C# parser 
;-). However I would not worry about early versions of C# if I were you, 
only that the code is mono compatible, which seems a good aim.

Jim



From jimi at temporal-wave.com  Mon Feb  4 08:46:37 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 4 Feb 2008 08:46:37 -0800
Subject: [antlr-interest] Reusing grammars
In-Reply-To: <937976.68565.qm@web26310.mail.ukl.yahoo.com>
Message-ID: <"LD7EA9632C873400fAF4E68439B505EB9.1202144992.scalix.temporal-wave.com*"@MHS>

If your language change is switchable at the lexical level, then you can
use island grammars ? see the example of this in the downloadable 3.0
examples.

 

Jim

 

From: Ian McDonagh [mailto:ianmdev at yahoo.co.uk] 
Sent: Monday, February 04, 2008 4:08 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Reusing grammars

 

Hi all

I want to implement my own template language (like Velocity, JSP or ASP)
and reuse an existing ANTLR 3.0 grammar I've written for evaluating
expressions.

I might have something like this:
________________________________________
Contacts:
@foreach( getPeople(lastName) )
Name: ${Name}
@end
________________________________________

This input would be parsed to construct a template, which is made up of
various nodes, which could in turn be merged with a context to produce
the template output.  The parsed template structure would look something
like this:
#Text:"Contacts:"
#ForEach: getPeople(lastName)
|----#Text:"Name: "
|----#Expression: Name

My problem is that my expression language uses some of the same tokens I
want to use in my template language, so it's difficult to use a lexical
filter only (which is pretty simple with tags like '<%' and '%>').

Is it possible to parse the entire input in one pass, switching between
different parsers?

With ANTLR 2.7 I could just use grammar inheritance.  What to do in
ANTLR 3?

Any advice would be greatly appreciated.
Thanks.



 

  _____  

Sent from Yahoo! - a smarter inbox.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080204/7e9c9fc6/attachment-0001.html 

From darien.hager at etelos-inc.com  Mon Feb  4 13:08:20 2008
From: darien.hager at etelos-inc.com (Darien Hager)
Date: Mon, 4 Feb 2008 13:08:20 -0800
Subject: [antlr-interest] PHP5 Build target status?
Message-ID: <c8c997f40802041308o70fe542dme23c1b6f543a3412@mail.gmail.com>

Out of curiosity, does anyone know the current status for getting PHP5 as a
build target for Antlr?

I'm ot sure whether there's pre-existing code to look at or if it has to be
from scratch. (The wiki just has question marks.)

-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are not
the intended recipient, then this is notice that any use, disclosure,
dissemination, distribution or copying is strictly prohibited. If you have
received this message in error please contact the sender by reply mail and
destroy all copies of the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080204/5d5d28d3/attachment.html 

From jimi at temporal-wave.com  Mon Feb  4 13:40:02 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 4 Feb 2008 13:40:02 -0800
Subject: [antlr-interest] PHP5 Build target status?
In-Reply-To: <c8c997f40802041308o70fe542dme23c1b6f543a3412@mail.gmail.com>
Message-ID: <"L664ECCEFE2FD4fa98AD710DF0160EDF5.1202162600.scalix.temporal-wave.com*"@MHS>

I was contemplating it, but there are many other things I have to do
first for C and C++

 

Jim

 

From: Darien Hager [mailto:darien.hager at etelos-inc.com] 
Sent: Monday, February 04, 2008 1:08 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] PHP5 Build target status?

 

Out of curiosity, does anyone know the current status for getting PHP5
as a build target for Antlr? 

I'm ot sure whether there's pre-existing code to look at or if it has to
be from scratch. (The wiki just has question marks.)

-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com 

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are
not the intended recipient, then this is notice that any use,
disclosure, dissemination, distribution or copying is strictly
prohibited. If you have received this message in error please contact
the sender by reply mail and destroy all copies of the original message.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080204/3426d494/attachment.html 

From shro8822 at vandals.uidaho.edu  Mon Feb  4 14:07:23 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Mon, 04 Feb 2008 14:07:23 -0800
Subject: [antlr-interest] how to match up to EOL
Message-ID: <BAYC1-PASMTP124880CD27EA50C1AA8E5DF5330@CEZ.ICE>

I need to match the regex '.*' but in the GREP form where '.' dose not 
match \n or \r. I considered ".*('\r'|'\n')" but that also gets the EOL 
and I mustn't do that. I can't seem to a regex help page or I'd try for 
[^\n\r]*.

Any help?

Benjamin Shropshire

From shro8822 at vandals.uidaho.edu  Mon Feb  4 15:07:18 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Mon, 04 Feb 2008 15:07:18 -0800
Subject: [antlr-interest] How do I get a parser and lexer to work together
Message-ID: <BAYC1-PASMTP045ABD60B4580797E64A9CF5330@CEZ.ICE>

I have a lex.g and a parse.g. Both run through antlr just fine and then 
link, however the parser is generating it's own enumerations for the 
lexical tokens. I need it to use the definitions generated by antlr when 
it makes the lexer. I need the lexer in a different file because I need 
to be able to use it in more than one grammar. I don't want to resort to 
using cpp or sed to make this work.

How do I tell antlr to do this?
Where is this documented? (a.k.a. how could I have found this out my self?)

Benjamin Shropshire

From jaluber at gmx.de  Mon Feb  4 15:19:24 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 05 Feb 2008 00:19:24 +0100
Subject: [antlr-interest] How do I get a parser and lexer to work
	together
In-Reply-To: <BAYC1-PASMTP045ABD60B4580797E64A9CF5330@CEZ.ICE>
References: <BAYC1-PASMTP045ABD60B4580797E64A9CF5330@CEZ.ICE>
Message-ID: <47A79D7C.2090203@gmx.de>

Benjamin Shropshire schrieb:
> I have a lex.g and a parse.g. Both run through antlr just fine and then 
> link, however the parser is generating it's own enumerations for the 
> lexical tokens. I need it to use the definitions generated by antlr when 
> it makes the lexer. I need the lexer in a different file because I need 
> to be able to use it in more than one grammar. I don't want to resort to 
> using cpp or sed to make this work.
> 
> How do I tell antlr to do this?
Use the tokenVocab option to do that. In your case:

option {
tokenVocab=lex;
}

> Where is this documented? (a.k.a. how could I have found this out my self?)

In the book or probably on the wiki.

Johannes

From lefevrol at yahoo.com  Mon Feb  4 16:29:04 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Tue, 05 Feb 2008 01:29:04 +0100
Subject: [antlr-interest] Minor suggestion re. Java output
In-Reply-To: <"LB02C8BF6C929487cA3A5B45EC746A692.1201988691.scalix.temporal-wave.com*"@MHS>
References: <fo2isi$ir0$1@ger.gmane.org>
	<"LB02C8BF6C929487cA3A5B45EC746A692.1201988691.scalix.temporal-wave.com*"@MHS>
Message-ID: <fo8akl$u2u$1@ger.gmane.org>

Jim Idle wrote:
> A tree is not guaranteed to be any particular type or interface as the 
> tree adaptor can produce anything it likes. Hence it must be an object. 

In that case what is the purpose of

options {
         output = AST;
         ASTLabelType=CommonTree;
}

-- O.L.


From lefevrol at yahoo.com  Mon Feb  4 16:35:20 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Tue, 05 Feb 2008 01:35:20 +0100
Subject: [antlr-interest] Just plain var or $var.value?
In-Reply-To: <58FFD66B-4134-4B77-AAFE-78040A140E8D@classdump.org>
References: <fnt19o$a8n$1@ger.gmane.org>
	<58FFD66B-4134-4B77-AAFE-78040A140E8D@classdump.org>
Message-ID: <fo8b0d$u2u$2@ger.gmane.org>

Hi Kay,

Thanks for the explanation. I am pretty relieved as it means you
always need to "dollarize" labels and this is nice and regular.

> So I'd say the example in the book is wrong, unfortunately. I'm not sure 
> if it is fixed in the second printing of the book

It's not fixed in the PDF at any rate since that it what I am reading.
Fixing the PDF should be doable: this particular fix has no impact on
the pagination.

-- O.L.


From lefevrol at yahoo.com  Mon Feb  4 16:48:15 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Tue, 05 Feb 2008 01:48:15 +0100
Subject: [antlr-interest] A few suggestions re. ANTLRWorks
Message-ID: <fo8bol$1rr$1@ger.gmane.org>

When debugging, the first thing ANTLRWorks does is pop
up a file save dialog requesting a file name where to
save the grammar. Since it is an error to save a grammar
xxx in any other file than xxx.g but ANTLRWorks will let
you do that (and later put a wavy underline under the
grammar name) it should not pop up a file dialog but a
directory dialog and then automatically give the file
the only valid name under that directory: that would be
more robust.

Next comes the Input Text dialog. The Start Rule was set
to a (seemingly randomly chosen) rule in the grammar
describing a single line, so that the debugger terminated
after the first line of input. This drove me _nuts_ and it
took me a while to realize (by chance) what was going on.
It seems to me that the only sensible default for the Start
Rule is the topmost rule of the grammar, whatever that is,
and that it should be set to _that_ the first time.

Third, given how much aggravation spaces, newlines etc can
cause, it would be nice if ANTLRWorks, in the input window,
could highlight these characters, e.g., after the fashion of
emacs blank-mode-on. I have attached an example to show what
I mean.

Regards,

-- O.L.


-------------- next part --------------
A non-text attachment was scrubbed...
Name: list.txt.png
Type: image/png
Size: 1496 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080205/f8146434/attachment.png 

From darien.hager at etelos-inc.com  Mon Feb  4 16:52:34 2008
From: darien.hager at etelos-inc.com (Darien Hager)
Date: Mon, 4 Feb 2008 16:52:34 -0800
Subject: [antlr-interest] how to match up to EOL
In-Reply-To: <BAYC1-PASMTP124880CD27EA50C1AA8E5DF5330@CEZ.ICE>
References: <BAYC1-PASMTP124880CD27EA50C1AA8E5DF5330@CEZ.ICE>
Message-ID: <c8c997f40802041652n5c0b1981mf7031c77ca55cb04@mail.gmail.com>

What about:

fragment AnyButNewline: ~('\r'|'\n');

Or setting the greedy option false?

-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are not
the intended recipient, then this is notice that any use, disclosure,
dissemination, distribution or copying is strictly prohibited. If you have
received this message in error please contact the sender by reply mail and
destroy all copies of the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080204/a41db358/attachment-0001.html 

From lefevrol at yahoo.com  Mon Feb  4 17:01:38 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Tue, 05 Feb 2008 02:01:38 +0100
Subject: [antlr-interest] Oh my, code too large
In-Reply-To: <db3e39e10712131135x29184fb2k10368398cec45b17@mail.gmail.com>
References: <db3e39e10712131135x29184fb2k10368398cec45b17@mail.gmail.com>
Message-ID: <fo8cho$3u9$1@ger.gmane.org>

Re. that 65Kb limit, since ANTLR emits Java code and not
bytecodes directly, I would simply dive into the lexer
and split the offending method by hand.  Not the greatest
workflow, to be sure, but that shouldn't be all that hard.

-- O.L.


From darien.hager at etelos-inc.com  Mon Feb  4 20:06:45 2008
From: darien.hager at etelos-inc.com (Darien Hager)
Date: Mon, 4 Feb 2008 20:06:45 -0800
Subject: [antlr-interest] PHP5 Build target status?
In-Reply-To: <L664ECCEFE2FD4fa98AD710DF0160EDF5.1202162600.scalix.temporal-wave.com*@MHS>
References: <c8c997f40802041308o70fe542dme23c1b6f543a3412@mail.gmail.com>
	<L664ECCEFE2FD4fa98AD710DF0160EDF5.1202162600.scalix.temporal-wave.com*@MHS>
Message-ID: <c8c997f40802042006l2eeaf7a1s1d465467773f180a@mail.gmail.com>

On 2/4/08, Jim Idle <jimi at temporal-wave.com> wrote:
>
> I was contemplating it, but there are many other things I have to do first
> for C and C++
>

Okay... I just wanted to check that--if I were to start mucking about trying
to create it--I wouldn't be duplicating work already done in some codebase
on hiatus somewhere.

-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are not
the intended recipient, then this is notice that any use, disclosure,
dissemination, distribution or copying is strictly prohibited. If you have
received this message in error please contact the sender by reply mail and
destroy all copies of the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080204/ad311f48/attachment.html 

From jimi at temporal-wave.com  Mon Feb  4 20:35:02 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 4 Feb 2008 20:35:02 -0800
Subject: [antlr-interest] Minor suggestion re. Java output
In-Reply-To: <fo8akl$u2u$1@ger.gmane.org>
Message-ID: <"L701E0C3631B74f48AD0595DE411EA414.1202187503.scalix.temporal-wave.com*"@MHS>



> -----Original Message-----
> From: Olivier Lefevre [mailto:lefevrol at yahoo.com]
> Sent: Monday, February 04, 2008 4:29 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Minor suggestion re. Java output
> 
> Jim Idle wrote:
> > A tree is not guaranteed to be any particular type or interface as
> the
> > tree adaptor can produce anything it likes. Hence it must be an
> object.
> 
> In that case what is the purpose of
> 
> options {
>          output = AST;
>          ASTLabelType=CommonTree;
> }
> 
> -- O.L.

Errr... to tell the code generator what to cast the output to from 
'object', which was what the original discussion was about! Your point 
might have been better phrased without the output=AST, which is 
superfluous to your question don't you think?

Ironically, ASTLabelType is not required in the C target, which is the 
least object oriented target for obvious reasons. These reasons may 
actually indicate that requiring a certain base level interface is 
reasonable, but what Ter has implemented has the maximum adaptability 
for the smallish price of having to cast; he doesn't want to assume the 
very latest language constructs, where such things might reasonably be 
avoided. I think that most people would have to agree that this is the 
gestalt that a programming tool should adopt.

A few things to bear in mind:

 - Remember that the Java code target is 1.4;
 - The code is put together by the string template hence it is a view 
and cannot know anything about the model;
 - All the elements of the output can be derived from, hence these 
questions are about being lazy. I am all for development tools allowing 
one to be lazy, but only as lazy as possible. There is a bigger view to 
consider here;

Your post here smacks a little of 'trying to catch someone out'. I only 
post here to try to help people, so I don't see the point of your 
innuendo. I don't know everything about every aspect of ANTLR, but I am 
versed in a lot of the reasons that things are the way they are and 
could give more technical explanations if warranted. Additionally, I 
don't try to defend a position that ANTLR currently occupies just 
because Ter did it that way and I happen to like the bloke. I am 
perfectly happy to call for improvements, but why term your question 
like that? I would not do you the discourtesy of saying that you dont 
know what you are talking about, even though you don't seem to have all 
the information.

The advantage of just a few people authoring a tool is that it tends to 
be good quality and consistent, the disadvantage is a limited bandwidth. 


Jim


From jimi at temporal-wave.com  Mon Feb  4 20:45:29 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 4 Feb 2008 20:45:29 -0800
Subject: [antlr-interest] A few suggestions re. ANTLRWorks
In-Reply-To: <fo8bol$1rr$1@ger.gmane.org>
Message-ID: <"L30F4EE07FF02400dAF7A630F139F9CFB.1202188132.scalix.temporal-wave.com*"@MHS>



> -----Original Message-----
> From: Olivier Lefevre [mailto:lefevrol at yahoo.com]
> Sent: Monday, February 04, 2008 4:48 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] A few suggestions re. ANTLRWorks
> 
> When debugging, the first thing ANTLRWorks does is pop up a file save
> dialog requesting a file name where to save the grammar. Since it is 
an
> error to save a grammar xxx in any other file than xxx.g 


Or xxx.g3pl, or g3t or any other suffix.

> but ANTLRWorks
> will let you do that (and later put a wavy underline under the grammar
> name) it should not pop up a file dialog but a directory dialog and
> then automatically give the file the only valid name under that
> directory: that would be more robust.

Which is a fair point that it perhaps should at least pre-fill the file 
name.

> Next comes the Input Text dialog. The Start Rule was set to a
> (seemingly randomly chosen) rule in the grammar describing a single
> line, so that the debugger terminated after the first line of input.
> This drove me _nuts_ and it took me a while to realize (by chance) 
what
> was going on.
> It seems to me that the only sensible default for the Start Rule is 
the
> topmost rule of the grammar, whatever that is, and that it should be
> set to _that_ the first time.

There is no real reason that the first rule is likely to be more correct 
as a target than any other. Choose your rule and it remembers your 
choice. There are many grammars where the 'start' rule depends on what 
you are testing. It might be more likely than not that the first rule 
listed is the start rule, but more likely that a rule ending with the 
EOF token is the start rule.

> Third, given how much aggravation spaces, newlines etc can cause, it
> would be nice if ANTLRWorks, in the input window, could highlight 
these
> characters, e.g., after the fashion of emacs blank-mode-on. I have
> attached an example to show what I mean.

Whitespace has no meaning in ANTLR grammars. In lexer rules, it can only 
assume that what you put in there is what you meant. You are confusing 
something that you personally find confusing/annoying, but after a while 
I don't think people in general do (I am prepared to be told otherwise 
;-).) So, while I see your point about highlighting 'whitespace', I am 
not sure it is generally useful. What you call whitespace has no real 
meaning without context.

Jim


From jimi at temporal-wave.com  Mon Feb  4 20:46:19 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 4 Feb 2008 20:46:19 -0800
Subject: [antlr-interest] PHP5 Build target status?
In-Reply-To: <c8c997f40802042006l2eeaf7a1s1d465467773f180a@mail.gmail.com>
Message-ID: <"L5FD07F038A0746adB94CB6F1A8AE470B.1202188181.scalix.temporal-wave.com*"@MHS>

No ? go for it if you are prepared to support it J

 

From: Darien Hager [mailto:darien.hager at etelos-inc.com] 
Sent: Monday, February 04, 2008 8:07 PM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] PHP5 Build target status?

 

 

On 2/4/08, Jim Idle <jimi at temporal-wave.com> wrote:

   I was contemplating it, but there are many other things I have to do
   first for C and C++ 


Okay... I just wanted to check that--if I were to start mucking about
trying to create it--I wouldn't be duplicating work already done in some
codebase on hiatus somewhere.

-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com 

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are
not the intended recipient, then this is notice that any use,
disclosure, dissemination, distribution or copying is strictly
prohibited. If you have received this message in error please contact
the sender by reply mail and destroy all copies of the original message.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080204/93ebdeb0/attachment.html 

From clinton.roy at gmail.com  Mon Feb  4 21:10:53 2008
From: clinton.roy at gmail.com (Clinton Roy)
Date: Tue, 5 Feb 2008 15:10:53 +1000
Subject: [antlr-interest] Error return code
In-Reply-To: <139944a50802021723x4e8632e6q22d98c5a7fc0c2a9@mail.gmail.com>
References: <139944a50802021608p4e7ad7c6ue5e5fa6e5d30019c@mail.gmail.com>
	<139944a50802021723x4e8632e6q22d98c5a7fc0c2a9@mail.gmail.com>
Message-ID: <9c0715e40802042110s53075c8chaf12d09713f79cfd@mail.gmail.com>

Hi Dan,

On Feb 3, 2008 11:23 AM, Dan S. <compilers at gmail.com> wrote:
> First, I assume you meant "test fooParser.c -nt foo.g".

Yeah, something like that ;)

> Secondly, this does not work for me. Even though ANTLR is hitting an
> error, it generates all the output files, or at least partial ones.

Drat :(
3.1 it is.

sorry for the blind alley.
-- 
Clinton Roy
CSIRO - Robotics Platform Engineer
Autonomous Systems Lab

humbug.org.au  - Brisbane Unix Group
azure.humbug.org.au/~croy/blog - Blog
flickr.com/photos/croy/ - Photos

From stevagewp at gmail.com  Mon Feb  4 22:56:44 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Tue, 5 Feb 2008 17:56:44 +1100
Subject: [antlr-interest] Generateambigwarnings option
Message-ID: <b8ceeef70802042256l42caca54v3b8df6596afd95ef@mail.gmail.com>

I noticed this option in some older grammars, but it doesn't seem to
be around anymore. Did it change names? It looks handy for making a
more readable grammar.

Steve

From antlr at mirality.co.nz  Mon Feb  4 23:27:33 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 05 Feb 2008 20:27:33 +1300
Subject: [antlr-interest] Generateambigwarnings option
In-Reply-To: <b8ceeef70802042256l42caca54v3b8df6596afd95ef@mail.gmail.co
 m>
References: <b8ceeef70802042256l42caca54v3b8df6596afd95ef@mail.gmail.com>
Message-ID: <20080205072746.EA3D911ED1B@www.antlr.org>

At 19:56 5/02/2008, Steve Bennett wrote:
 >
 >I noticed this option in some older grammars, but it doesn't 
seem
 >to be around anymore. Did it change names? It looks handy for
 >making a more readable grammar.

That's a v2-ism.  In v3 you're expected to either live with it or 
rewrite your grammar so it's not ambiguous any more ;)


-- 
No virus found in this outgoing message.
Checked by AVG Free Edition. 
Version: 7.5.516 / Virus Database: 269.19.19/1258 - Release Date: 4/02/2008 10:10



From R.Swapna at de.bosch.com  Mon Feb  4 23:33:07 2008
From: R.Swapna at de.bosch.com (Swapna R (GS-EC/EDG5 - RBIN/EMT2))
Date: Tue, 5 Feb 2008 08:33:07 +0100
Subject: [antlr-interest] Slightly different C-Parser
Message-ID: <0C2DFB192AFF6D42B6B3A83827D749BF5CC7DE@si-mail64.de.bosch.com>

Hello,

 For my project work I need to parse C-files. Sometimes It can be that
not all header files are present. I have found the GNU-C grammars. 
 Is it a good idea to change these grammars for specific use-cases ? How
do you suggest me to go ahead ?

 Incase of code not conforming to C-syntax instead of generating a
exception I want it to continue further and just creating a problem
statment for the problematic code.

Can you anyone of you help me ? This is very important as we are under
pressure to take decision about the parser.

Regards,
Swapna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080205/a11ee595/attachment.html 

From antlr at zavalon.com  Mon Feb  4 23:34:16 2008
From: antlr at zavalon.com (Neville Clark)
Date: Tue, 05 Feb 2008 18:34:16 +1100
Subject: [antlr-interest] How to redirect all of antlr parser's error
 messages without changing recovery.
Message-ID: <47A81178.8040906@zavalon.com>

Hi all,
I am new to both this list and to antlr.
I have to questions
1. How to override all of antlr's parser errors but without changing 
antlr's recovery. I am running as an Eclipse plug-in, and I want to use 
"problem marker" instead of "System.err".
Overriding "reportError" catches most of the output. But had to also 
override "recoverFromMismatchedToken" and "mismatch" as per below
@Override
public void recoverFromMismatchedToken(IntStream input,
                                                                    
RecognitionException mte,
                                                                   int 
ttype,
                                                                   
BitSet follow) throws RecognitionException
{
  //System.err.println("BR.recoverFromMismatchedToken");    <<<=== I 
removed this line
  // if next token is what we are looking for then "delete" this token
  if ( input.LA(2)==ttype )
  {
      reportError(mte);
      /*
      System.err.println("recoverFromMismatchedToken deleting 
"+input.LT(1)+
                                   " since "+input.LT(2)+" is what we 
want");
     */
      beginResync();
      input.consume(); // simply delete extra token
     endResync();
     input.consume(); // move past ttype token as if all were ok
     return;
  }
  if ( !recoverFromMismatchedElement(input,mte,follow) )
  {
       throw mte;
  }
}

As indicated in above had to override and reproduce the same 
functionality except for the print statement.
Also required to override "mismatch" and reproduce it's code without change
Is there a better way.

2nd Question
In a combined grammar is it possible to "superClass" the Lexer as well 
as the Parser. I have added
options
{
   superClass=MyParserSuperClass;
}
which works for the parser. But can not find same for the Lexer (within 
a combined grammar).
I have not tried but am assuming I can superClass the Lexer if I 
separate the Parser and Lexer.

Thanks in advance,
Nev

From niranjan8712 at gmail.com  Tue Feb  5 00:35:42 2008
From: niranjan8712 at gmail.com (niranjan deshpande)
Date: Tue, 5 Feb 2008 09:35:42 +0100
Subject: [antlr-interest] Problem in running the grammer file
Message-ID: <eaf1f1240802050035t23d8038kd0733f511882dac3@mail.gmail.com>

Hi all,

I am trying to get acquainted with ANTLR, and going through the getting
started stuff on the ANTLR web site.
When I try to run a simple grammer file, i get the following exception -

Exception in thread "main" java.lang.NoSuchMethodError:
antlr.TokenStreamRewrite
Engine.size()I
        at org.antlr.tool.Grammar.defineLexerRuleFoundInParser(Grammar.java
:1064
)
        at org.antlr.tool.DefineGrammarItemsWalker.rule
(DefineGrammarItemsWalker
.java:783)
        at org.antlr.tool.DefineGrammarItemsWalker.rules
(DefineGrammarItemsWalke
r.java:490)
        at org.antlr.tool.DefineGrammarItemsWalker.grammarSpec
(DefineGrammarItem
sWalker.java:335)
        at org.antlr.tool.DefineGrammarItemsWalker.grammar
(DefineGrammarItemsWal
ker.java:191)
        at org.antlr.tool.Grammar.setGrammarContent(Grammar.java:559)
        at org.antlr.tool.Grammar.<init>(Grammar.java:456)
        at org.antlr.Tool.getGrammar(Tool.java:331)
        at org.antlr.Tool.process(Tool.java:267)
        at org.antlr.Tool.main(Tool.java:70)

I have added all the jars antlr-2.7.7.jar, antlr-3.0.1.jar and
stringtemplate-3.0.jar in the class path. But its not helping. Please let mw
know if I am missing anything.


-- 
Regards,
Niranjan Deshpande

"Shut yourself from the world and create the reality you want"
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080205/63815846/attachment.html 

From discontinuum at gmail.com  Tue Feb  5 02:12:27 2008
From: discontinuum at gmail.com (Erik Kratochvil)
Date: Tue, 5 Feb 2008 11:12:27 +0100
Subject: [antlr-interest] Problem in running the grammer file
In-Reply-To: <eaf1f1240802050035t23d8038kd0733f511882dac3@mail.gmail.com>
References: <eaf1f1240802050035t23d8038kd0733f511882dac3@mail.gmail.com>
Message-ID: <f4dc39b90802050212l7d58de22t28920cc08e51f0db@mail.gmail.com>

Hi, aren't you supposed to use stringtemplate-3.1b1.jar?

On 2/5/08, niranjan deshpande <niranjan8712 at gmail.com> wrote:

> I have added all the jars antlr-2.7.7.jar, antlr-3.0.1.jar and
> stringtemplate-3.0.jar in the class path. But its not helping. Please let mw
> know if I am missing anything.

-- 
Erik Kratochv?l

From discontinuum at gmail.com  Tue Feb  5 02:57:05 2008
From: discontinuum at gmail.com (Erik Kratochvil)
Date: Tue, 5 Feb 2008 11:57:05 +0100
Subject: [antlr-interest] Grammar.createLookaheadDFA(): could not even do
	k=1 for decision 45; 
Message-ID: <f4dc39b90802050257wee0187fkde094ef3c18deb80@mail.gmail.com>

Hi.

I have a parser grammar which would not be processed neither by
antlr-3.0.1 (official release) nor by antlr-3.1b1
(antlr-2008-01-23.10.tar.gz).

antlr-3.0.1 fails with:

error(10):  internal error:
org.antlr.tool.Grammar.createLookaheadDFA(Grammar.java:864): could not
even do k=1 for decision 442

antlr-3.1b1 fails with a little bit more descriptive error:

error(10):  internal error:
org.antlr.tool.Grammar.createLookaheadDFA(Grammar.java:1138): could
not even do k=1 for decision 442; reason: timed out (>1000ms)

on top of that antlr-3.1b1 adds a NullPointerException:

error(10):  internal error: O.g : java.lang.NullPointerException
org.antlr.tool.Grammar.getTokenDisplayName(Grammar.java:2158)
org.antlr.codegen.CodeGenerator.genTokenTypeNames(CodeGenerator.java:823)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:433)
org.antlr.Tool.generateRecognizer(Tool.java:416)
org.antlr.Tool.process(Tool.java:285)
org.antlr.Tool.main(Tool.java:70)


What precisely does this error(10) mean?

-- 
Erik Kratochv?l

From jaluber at gmx.de  Tue Feb  5 03:57:52 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 05 Feb 2008 12:57:52 +0100
Subject: [antlr-interest] Generateambigwarnings option
In-Reply-To: <20080205072746.EA3D911ED1B@www.antlr.org>
References: <b8ceeef70802042256l42caca54v3b8df6596afd95ef@mail.gmail.com>
	<20080205072746.EA3D911ED1B@www.antlr.org>
Message-ID: <47A84F40.9060202@gmx.de>

Gavin Lambert schrieb:
> At 19:56 5/02/2008, Steve Bennett wrote:
>  >
>  >I noticed this option in some older grammars, but it doesn't seem
>  >to be around anymore. Did it change names? It looks handy for
>  >making a more readable grammar.
> 
> That's a v2-ism.  In v3 you're expected to either live with it or 
> rewrite your grammar so it's not ambiguous any more ;)

That kind of option in some form is on the todo list. Not sure, when Ter 
decides to attack this.

Johannes

From r.mark.volkmann at gmail.com  Tue Feb  5 04:41:14 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Tue, 5 Feb 2008 06:41:14 -0600
Subject: [antlr-interest] syntactic predicates vs. backtrack=true
Message-ID: <f0fcc6820802050441j4481f0bbwa4f92bddebe6e730@mail.gmail.com>

Can someone describe a case where it's better to use syntactic
predicates on rule alternatives than just specifying backtrack=true as
a rule option? It certainly introduces less clutter in the grammar to
use backtrack and of course there is less to type and less opportunity
for error. Is it significantly more efficient to use syntactic
predicates?

-- 
R. Mark Volkmann
Object Computing, Inc.

From jaluber at gmx.de  Tue Feb  5 04:58:48 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 05 Feb 2008 13:58:48 +0100
Subject: [antlr-interest] syntactic predicates vs. backtrack=true
In-Reply-To: <f0fcc6820802050441j4481f0bbwa4f92bddebe6e730@mail.gmail.com>
References: <f0fcc6820802050441j4481f0bbwa4f92bddebe6e730@mail.gmail.com>
Message-ID: <47A85D88.7030508@gmx.de>

Mark Volkmann schrieb:
> Can someone describe a case where it's better to use syntactic
> predicates on rule alternatives than just specifying backtrack=true as
> a rule option? It certainly introduces less clutter in the grammar to
> use backtrack and of course there is less to type and less opportunity
> for error. Is it significantly more efficient to use syntactic
> predicates?
> 

Maybe 
<http://www.antlr.org/wiki/display/ANTLR3/How+to+remove+global+backtracking+from+your+grammar> 
includes the required information. It collects my (limited?) knowledge 
on this matter.

Johannes

From r.mark.volkmann at gmail.com  Tue Feb  5 05:00:12 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Tue, 5 Feb 2008 07:00:12 -0600
Subject: [antlr-interest] A few suggestions re. ANTLRWorks
In-Reply-To: <L30F4EE07FF02400dAF7A630F139F9CFB.1202188132.scalix.temporal-wave.com*@MHS>
References: <fo8bol$1rr$1@ger.gmane.org>
	<L30F4EE07FF02400dAF7A630F139F9CFB.1202188132.scalix.temporal-wave.com*@MHS>
Message-ID: <f0fcc6820802050500x58439a59obac7ecd33d8d827@mail.gmail.com>

On Feb 4, 2008 10:45 PM, Jim Idle <jimi at temporal-wave.com> wrote:
>
> > -----Original Message-----
> > From: Olivier Lefevre [mailto:lefevrol at yahoo.com]
> > Sent: Monday, February 04, 2008 4:48 PM
> > To: antlr-interest at antlr.org
> > Subject: [antlr-interest] A few suggestions re. ANTLRWorks
> >
> > Next comes the Input Text dialog. The Start Rule was set to a
> > (seemingly randomly chosen) rule in the grammar describing a single
> > line, so that the debugger terminated after the first line of input.
> > This drove me _nuts_ and it took me a while to realize (by chance)
> what
> > was going on.
> > It seems to me that the only sensible default for the Start Rule is
> the
> > topmost rule of the grammar, whatever that is, and that it should be
> > set to _that_ the first time.
>
> There is no real reason that the first rule is likely to be more correct
> as a target than any other. Choose your rule and it remembers your
> choice. There are many grammars where the 'start' rule depends on what
> you are testing. It might be more likely than not that the first rule
> listed is the start rule, but more likely that a rule ending with the
> EOF token is the start rule.

I agree that the best first guess is to find the rule that ends in
EOF. However, if none do then guessing that the first rule in the
grammar is the start rule seems much better than the current,
seemingly random guess. Is it random? I haven't been able to detect a
pattern.

-- 
R. Mark Volkmann
Object Computing, Inc.

From r.mark.volkmann at gmail.com  Tue Feb  5 05:27:13 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Tue, 5 Feb 2008 07:27:13 -0600
Subject: [antlr-interest] How to redirect all of antlr parser's error
	messages without changing recovery.
In-Reply-To: <47A81178.8040906@zavalon.com>
References: <47A81178.8040906@zavalon.com>
Message-ID: <f0fcc6820802050527v79e4bfa7i51b602f963ee415d@mail.gmail.com>

On Feb 5, 2008 1:34 AM, Neville Clark <antlr at zavalon.com> wrote:
> Hi all,
> I am new to both this list and to antlr.
> I have to questions
> 1. How to override all of antlr's parser errors but without changing
> antlr's recovery. I am running as an Eclipse plug-in, and I want to use
> "problem marker" instead of "System.err".
> Overriding "reportError" catches most of the output. But had to also
> override "recoverFromMismatchedToken" and "mismatch" as per below
> @Override
> public void recoverFromMismatchedToken(IntStream input,
>
> RecognitionException mte,
>                                                                    int
> ttype,
>
> BitSet follow) throws RecognitionException
> {
>   //System.err.println("BR.recoverFromMismatchedToken");    <<<=== I
> removed this line
>   // if next token is what we are looking for then "delete" this token
>   if ( input.LA(2)==ttype )
>   {
>       reportError(mte);
>       /*
>       System.err.println("recoverFromMismatchedToken deleting
> "+input.LT(1)+
>                                    " since "+input.LT(2)+" is what we
> want");
>      */
>       beginResync();
>       input.consume(); // simply delete extra token
>      endResync();
>      input.consume(); // move past ttype token as if all were ok
>      return;
>   }
>   if ( !recoverFromMismatchedElement(input,mte,follow) )
>   {
>        throw mte;
>   }
> }
>
> As indicated in above had to override and reproduce the same
> functionality except for the print statement.
> Also required to override "mismatch" and reproduce it's code without change
> Is there a better way.

I think you just need to override the emitErrorMessage method in
BaseRecognizer which is the superclass of Lexer, Parser and
TreeParser. Make sure you do it for all three (if you are using all
three). You can have one @members section for each grammar type. You
just need to add a grammar type prefix to @members like this.

@lexer::members {
  ...
}

@parser::members {
  ...
}

@treeparser::members {
  ...
}

> 2nd Question
> In a combined grammar is it possible to "superClass" the Lexer as well
> as the Parser. I have added
> options
> {
>    superClass=MyParserSuperClass;
> }
> which works for the parser. But can not find same for the Lexer (within
> a combined grammar).
> I have not tried but am assuming I can superClass the Lexer if I
> separate the Parser and Lexer.

I think you do have to separate your grammar in order to specify a
custom superclass for both the generated lexer and the generated
parser since superClass is a grammar option.

-- 
R. Mark Volkmann
Object Computing, Inc.

From r.mark.volkmann at gmail.com  Tue Feb  5 05:31:43 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Tue, 5 Feb 2008 07:31:43 -0600
Subject: [antlr-interest] Grammar.createLookaheadDFA(): could not even
	do k=1 for decision 45; 
In-Reply-To: <f4dc39b90802050257wee0187fkde094ef3c18deb80@mail.gmail.com>
References: <f4dc39b90802050257wee0187fkde094ef3c18deb80@mail.gmail.com>
Message-ID: <f0fcc6820802050531x7c9f3a6bof6d527cce1df8495@mail.gmail.com>

On Feb 5, 2008 4:57 AM, Erik Kratochvil <discontinuum at gmail.com> wrote:
> Hi.
>
> I have a parser grammar which would not be processed neither by
> antlr-3.0.1 (official release) nor by antlr-3.1b1
> (antlr-2008-01-23.10.tar.gz).
>
> antlr-3.0.1 fails with:
>
> error(10):  internal error:
> org.antlr.tool.Grammar.createLookaheadDFA(Grammar.java:864): could not
> even do k=1 for decision 442
>
> antlr-3.1b1 fails with a little bit more descriptive error:
>
> error(10):  internal error:
> org.antlr.tool.Grammar.createLookaheadDFA(Grammar.java:1138): could
> not even do k=1 for decision 442; reason: timed out (>1000ms)
>
> on top of that antlr-3.1b1 adds a NullPointerException:
>
> error(10):  internal error: O.g : java.lang.NullPointerException
> org.antlr.tool.Grammar.getTokenDisplayName(Grammar.java:2158)
> org.antlr.codegen.CodeGenerator.genTokenTypeNames(CodeGenerator.java:823)
> org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:433)
> org.antlr.Tool.generateRecognizer(Tool.java:416)
> org.antlr.Tool.process(Tool.java:285)
> org.antlr.Tool.main(Tool.java:70)
>
>
> What precisely does this error(10) mean?

Could you try to reproduce this error with a small subset of your
grammar and then send that to the list so we can try it?

-- 
R. Mark Volkmann
Object Computing, Inc.

From r.mark.volkmann at gmail.com  Tue Feb  5 05:51:00 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Tue, 5 Feb 2008 07:51:00 -0600
Subject: [antlr-interest] syntactic predicates vs. backtrack=true
In-Reply-To: <47A85D88.7030508@gmx.de>
References: <f0fcc6820802050441j4481f0bbwa4f92bddebe6e730@mail.gmail.com>
	<47A85D88.7030508@gmx.de>
Message-ID: <f0fcc6820802050551o66eea974p119ed0123799ae9@mail.gmail.com>

On Feb 5, 2008 6:58 AM, Johannes Luber <jaluber at gmx.de> wrote:
> Mark Volkmann schrieb:
> > Can someone describe a case where it's better to use syntactic
> > predicates on rule alternatives than just specifying backtrack=true as
> > a rule option? It certainly introduces less clutter in the grammar to
> > use backtrack and of course there is less to type and less opportunity
> > for error. Is it significantly more efficient to use syntactic
> > predicates?
> >
>
> Maybe
> <http://www.antlr.org/wiki/display/ANTLR3/How+to+remove+global+backtracking+from+your+grammar>
> includes the required information. It collects my (limited?) knowledge
> on this matter.

Thanks! I learned some new things by reading that. I'm still a little
confused though. In section 12.2 of the book (page 300 in my copy) it
says:

"ANTLR also supports an auto-backtracking feature whereby ANTLR
inserts syntactic predicates on the left edge of every alternative."

So it seems to me that these rules are equivalent in both behavior and
performance.

foo
options { backtrack = true; }
  : option1
  | option2
  | option3
  ;

foo
  : (option1)=> option1
  | (option2)=> option2
  | option3
  ;

If this is true then I think I prefer using backtrack because it adds
less clutter to the rule.

-- 
R. Mark Volkmann
Object Computing, Inc.

From r.mark.volkmann at gmail.com  Tue Feb  5 05:53:35 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Tue, 5 Feb 2008 07:53:35 -0600
Subject: [antlr-interest] A few suggestions re. ANTLRWorks
In-Reply-To: <d4e11e980802050541u92fd84l5d8fa8cc0057c708@mail.gmail.com>
References: <fo8bol$1rr$1@ger.gmane.org>
	<L30F4EE07FF02400dAF7A630F139F9CFB.1202188132.scalix.temporal-wave.com*@MHS>
	<f0fcc6820802050500x58439a59obac7ecd33d8d827@mail.gmail.com>
	<d4e11e980802050541u92fd84l5d8fa8cc0057c708@mail.gmail.com>
Message-ID: <f0fcc6820802050553q2d91fcdavcf16ba23e3decfd5@mail.gmail.com>

On Feb 5, 2008 7:41 AM, Nikolas Everett <nik9000 at gmail.com> wrote:
>
> On Feb 5, 2008 8:00 AM, Mark Volkmann <r.mark.volkmann at gmail.com> wrote:
>
> >
> > On Feb 4, 2008 10:45 PM, Jim Idle <jimi at temporal-wave.com> wrote:
> > >
> > > > -----Original Message-----
> > > > From: Olivier Lefevre [mailto:lefevrol at yahoo.com]
> > > > Sent: Monday, February 04, 2008 4:48 PM
> > > > To: antlr-interest at antlr.org
> > > > Subject: [antlr-interest] A few suggestions re. ANTLRWorks
> > > >
> >
> > > > Next comes the Input Text dialog. The Start Rule was set to a
> > > > (seemingly randomly chosen) rule in the grammar describing a single
> > > > line, so that the debugger terminated after the first line of input.
> > > > This drove me _nuts_ and it took me a while to realize (by chance)
> > > what
> > > > was going on.
> > > > It seems to me that the only sensible default for the Start Rule is
> > > the
> > > > topmost rule of the grammar, whatever that is, and that it should be
> > > > set to _that_ the first time.
> > >
> > > There is no real reason that the first rule is likely to be more correct
> > > as a target than any other. Choose your rule and it remembers your
> > > choice. There are many grammars where the 'start' rule depends on what
> > > you are testing. It might be more likely than not that the first rule
> > > listed is the start rule, but more likely that a rule ending with the
> > > EOF token is the start rule.
> >
> > I agree that the best first guess is to find the rule that ends in
> > EOF. However, if none do then guessing that the first rule in the
> > grammar is the start rule seems much better than the current,
> > seemingly random guess. Is it random? I haven't been able to detect a
> > pattern.
>
> I often test rules that don't end in EOF.  The best thing from my
> perspective would be to pick the first rule that parses EOF by default.  If
> no rules parse EOF, pick the first rule by default.  If I have already
> picked a rule, stick with it.

Agreed!

-- 
R. Mark Volkmann
Object Computing, Inc.

From discontinuum at gmail.com  Tue Feb  5 06:00:14 2008
From: discontinuum at gmail.com (Erik Kratochvil)
Date: Tue, 5 Feb 2008 15:00:14 +0100
Subject: [antlr-interest] Grammar.createLookaheadDFA(): could not even
	do k=1 for decision 45; 
In-Reply-To: <f0fcc6820802050531x7c9f3a6bof6d527cce1df8495@mail.gmail.com>
References: <f4dc39b90802050257wee0187fkde094ef3c18deb80@mail.gmail.com>
	<f0fcc6820802050531x7c9f3a6bof6d527cce1df8495@mail.gmail.com>
Message-ID: <f4dc39b90802050600n5bdc022fvc088f5cf1a44cc7d@mail.gmail.com>

I can certainly try but the grammar has 400+ rules so it may take some
time. I was hoping for some clue that would help me to localize the
problematic set of rules before I start narrowing the grammar.

On 2/5/08, Mark Volkmann <r.mark.volkmann at gmail.com> wrote:
>
> Could you try to reproduce this error with a small subset of your
> grammar and then send that to the list so we can try it?
>


-- 
Erik Kratochv?l

From jaluber at gmx.de  Tue Feb  5 06:05:53 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 05 Feb 2008 15:05:53 +0100
Subject: [antlr-interest] syntactic predicates vs. backtrack=true
In-Reply-To: <f0fcc6820802050551o66eea974p119ed0123799ae9@mail.gmail.com>
References: <f0fcc6820802050441j4481f0bbwa4f92bddebe6e730@mail.gmail.com>	
	<47A85D88.7030508@gmx.de>
	<f0fcc6820802050551o66eea974p119ed0123799ae9@mail.gmail.com>
Message-ID: <47A86D41.5010507@gmx.de>

Mark Volkmann schrieb:
> Thanks! I learned some new things by reading that. I'm still a little
> confused though. In section 12.2 of the book (page 300 in my copy) it
> says:
> 
> "ANTLR also supports an auto-backtracking feature whereby ANTLR
> inserts syntactic predicates on the left edge of every alternative."
> 
> So it seems to me that these rules are equivalent in both behavior and
> performance.
> 
> foo
> options { backtrack = true; }
>   : option1
>   | option2
>   | option3
>   ;
> 
> foo
>   : (option1)=> option1
>   | (option2)=> option2
>   | option3
>   ;
> 
> If this is true then I think I prefer using backtrack because it adds
> less clutter to the rule.
> 

I'm not sure if that is the only tradeoff here, but Ter can answer this 
better than I can here.

Johannes

From ianmdev at yahoo.co.uk  Tue Feb  5 06:07:41 2008
From: ianmdev at yahoo.co.uk (Ian McDonagh)
Date: Tue, 5 Feb 2008 14:07:41 +0000 (GMT)
Subject: [antlr-interest] Reusing grammars
Message-ID: <696596.12998.qm@web26302.mail.ukl.yahoo.com>

Thanks for that.

I've managed to implement my template system using a combination of a lexical filter and some custom helper classes.

They work together kind of how a SAX parser works with XML. When I encounter a specific token, I check if it is terminating a block, and if so I process that block.

Like the island grammar example in the downloadable examples, I keep track of tokens that appear in both my template language and my expression language.

Thus, I can have constructs like this:
____________________________________________

Dear $title ${firstName + lastName}

Here is a list of your friends:
@foreach( [friend] )Name: $firstName at if( textlength(lastName) > 0 ) $lastName at end e-mail: $email
@end
____________________________________________

I can parse the above template to an intermediate (compiled) form and then merge it with a particular context to produce output.

Hope this all makes sense.

If anyone needs more info on how I did this, feel free to mail me :)

----- Original Message ----
From: Jim Idle <jimi at temporal-wave.com>
To: antlr-interest at antlr.org
Sent: Monday, 4 February, 2008 6:46:37 PM
Subject: Re: [antlr-interest] Reusing grammars





 


<!--
 _filtered {font-family:"Cambria Math";panose-1:2 4 5 3 5 4 6 3 2 4;}
 _filtered {font-family:Calibri;panose-1:2 15 5 2 2 2 4 3 2 4;}
 _filtered {font-family:Tahoma;panose-1:2 11 6 4 3 5 4 4 2 4;}
 _filtered {font-family:Verdana;panose-1:2 11 6 4 3 5 4 4 2 4;}
/* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;margin-bottom:.0001pt;font-size:12.0pt;font-family:"Times New Roman", "serif";}
a:link, span.MsoHyperlink
	{color:blue;text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;text-decoration:underline;}
p
	{margin-right:0in;margin-left:0in;font-size:12.0pt;font-family:"Times New Roman", "serif";}
span.EmailStyle18
	{font-family:"Calibri", "sans-serif";color:#1F497D;}
.MsoChpDefault
	{font-size:10.0pt;}
 _filtered {margin:1.0in 1.0in 1.0in 1.0in;}
div.Section1
	{}
-->






If your language change is switchable at the lexical level, then
you can use island grammars ? see the example of this in the downloadable 3.0
examples. 




   




Jim 




   










From: Ian McDonagh
[mailto:ianmdev at yahoo.co.uk] 


Sent: Monday, February 04, 2008 4:08 AM


To: antlr-interest at antlr.org


Subject: [antlr-interest] Reusing grammars 










   








Hi
all





I want to implement my own template language (like Velocity, JSP or ASP) and
reuse an existing ANTLR 3.0 grammar I've written for evaluating expressions.





I might have something like this:


________________________________________


Contacts:


@foreach( getPeople(lastName) )


Name: ${Name}


@end


________________________________________





This input would be parsed to construct a template, which is made up of various
nodes, which could in turn be merged with a context to produce the template
output.  The parsed template structure would look something like this:


#Text:"Contacts:"


#ForEach: getPeople(lastName)


|----#Text:"Name: "


|----#Expression: Name





My problem is that my expression language uses some of the same tokens I want
to use in my template language, so it's difficult to use a lexical filter only
(which is pretty simple with tags like '<%' and '%>').





Is it possible to parse the entire input in one pass, switching between
different parsers?





With ANTLR 2.7 I could just use grammar inheritance.  What to do in ANTLR
3?





Any advice would be greatly appreciated.


Thanks.





 










   






  






Sent from Yahoo!
- a smarter inbox. 
















      ___________________________________________________________
Support the World Aids Awareness campaign this month with Yahoo! For Good http://uk.promotions.yahoo.com/forgood/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080205/3f81af61/attachment.html 

From guntiso at latnet.lv  Tue Feb  5 06:35:40 2008
From: guntiso at latnet.lv (Guntis Ozols)
Date: Tue,  5 Feb 2008 16:35:40 +0200
Subject: [antlr-interest] Minor suggestion re. Java output
In-Reply-To: <"L701E0C3631B74f48AD0595DE411EA414.1202187503.scalix.temporal-wave.com*"@MHS>
References: <"L701E0C3631B74f48AD0595DE411EA414.1202187503.scalix.temporal-wave.com*"@MHS>
Message-ID: <1202222140.47a8743c34628@clients.latnet.lv>

>  - Remember that the Java code target is 1.4;
>  - The code is put together by the string template hence it is a view
> and cannot know anything about the model;
>  - All the elements of the output can be derived from, hence these
> questions are about being lazy. I am all for development tools allowing
> one to be lazy, but only as lazy as possible. There is a bigger view to
> consider here;
>
> Jim

It is also about less memory/cycles for each node and smaller/simpler code.

The question that is puzzling me is:
  if java code target was 1.5 or later
  would then it be possible for CommonTree to return CommonTree children?

I think the typical use cases are (no casting necessary, covariance ok):
  - use default ast
  - extend TreeAdaptor and extend Tree/BaseTree/CommonTree

How typical do you think is to create a tree with nodes that are
instances of CommonTree having children that are not? (btw, BaseTree.children
is protected, can be accessed anyway)

Guntis


From jflack at math.purdue.edu  Tue Feb  5 07:34:42 2008
From: jflack at math.purdue.edu (J Chapman Flack)
Date: Tue, 05 Feb 2008 10:34:42 -0500
Subject: [antlr-interest] Minor suggestion re. Java output
In-Reply-To: <mailman.11158.1202222145.2502.antlr-interest@antlr.org>
References: <mailman.11158.1202222145.2502.antlr-interest@antlr.org>
Message-ID: <47A88212.2060102@math.purdue.edu>


jimi> - Remember that the Java code target is 1.4;
jimi> - The code is put together by the string template hence it
jimi>   is a view and cannot know anything about the model;

guntiso> The question that is puzzling me is:
guntiso>   if java code target was 1.5 or later
guntiso>   would then it be possible for CommonTree to return
guntiso>   CommonTree children?

What this thread makes me wonder (and it's not a rhetorical
question, because I don't know the answer) is, would it be a
feasible project for somebody who wanted Java output that takes
advantage of more modern features to modify the Java 1.4 string
templates into a 1.5 set?  Then we could have both.

Such a project might also reveal what additional information the
model needs to expose, if any, in order to support a view that
could make use of, for example, covariant return typing. It would
complicate the project, of course, if any such changes were needed
in the model, but they would probably be useful for other future
backends as well.

-Chap

From cieslewski at hcs.ufl.edu  Tue Feb  5 07:49:06 2008
From: cieslewski at hcs.ufl.edu (Grzegorz Cieslewski)
Date: Tue, 5 Feb 2008 10:49:06 -0500
Subject: [antlr-interest] Tree Rewriting problem -
	RewriteEmptyStreamException at runtime
Message-ID: <7aa837f80802050749h440945bs989df8f764555e76@mail.gmail.com>

I am using the 3.1b1 version of antlr so I could do some tree
rewriting.  I found a good set of examples in the
TestTreeGrammarRewriteAST.java file and decided to start
experimenting.  Unfortunately I have run in to a problem with my
program throwing an exception.
My Grammar is:
grammar T;
options {output=AST;}
tokens
{
	EXPR;
}
a : type ID INT -> ^(EXPR type ID INT);
type	:	'int'
	|	'char';
ID : 'a'..'z'+ ;
INT : '0'..'9'+;
WS : (' '|'\n') {$channel=HIDDEN;} ;

and the tree grammar:

tree grammar TP;
options {
	output=AST;
	ASTLabelType=CommonTree;
	tokenVocab=T;}
	
a	: ^(EXPR type ID INT) -> ^(EXPR type INT ID)
	;

type	:	'int'
	|	'char';

f
Everything compiles but I get following error during runtime (with
input "int abc 123"):

Exception in thread "main"
org.antlr.runtime.tree.RewriteEmptyStreamException: rule type
        at org.antlr.runtime.tree.RewriteRuleElementStream._next(RewriteRuleElementStream.java:158)
        at org.antlr.runtime.tree.RewriteRuleElementStream.nextTree(RewriteRuleElementStream.java:145)
        at simpleCrw.declaration(simpleCrw.java:182)
        at simpleCrw.file(simpleCrw.java:92)
        at Main2.main(Main2.java:41)

I have noticed that if I change the rule type in the tree grammar as
follows the problem does not occur:

tree grammar TP;
options {
	output=AST;
	ASTLabelType=CommonTree;
	tokenVocab=T;}
	
a	: ^(EXPR type ID INT) -> ^(EXPR type INT ID)
	;

type	:	'int';

I have tracked this a little further.  When I remove the rewrite rule
from the tree grammar :

tree grammar TP;
options {
	output=AST;
	ASTLabelType=CommonTree;
	tokenVocab=T;}
	
a	: ^(EXPR type ID INT)
	;

type	:	'int'
	|	'char';

The output tree I get after the LexerParser is
EXPR
|-int
|-abc
|-123

but after the tree grammar I get the tree missing the int node
EXPR
|-abc
|-123

Does any one have any idea as to what is going on?

P.S. I attached my whole setup


-- 
=====================================================
Grzegorz Cieslewski
Research Assistant
High-performance Computing & Simulation (HCS) Research Laboratory
University of Florida, Dept. of Electrical and Computer Engineering
330 Benton Hall, Gainesville, FL, 32611-6200
Phone: (352) 392-9041
Email: cieslewski at hcs.ufl.edu
Web: www.hcs.ufl.edu
=====================================================
-------------- next part --------------
A non-text attachment was scrubbed...
Name: treerw.tgz
Type: application/x-gzip
Size: 2321 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080205/b9a4a374/attachment.tgz 

From R.Swapna at de.bosch.com  Tue Feb  5 07:52:51 2008
From: R.Swapna at de.bosch.com (Swapna R (GS-EC/EDG5 - RBIN/EMT2))
Date: Tue, 5 Feb 2008 16:52:51 +0100
Subject: [antlr-interest] Slightly different C-Parser
In-Reply-To: <0C2DFB192AFF6D42B6B3A83827D749BF5CC7DE@si-mail64.de.bosch.com>
References: <0C2DFB192AFF6D42B6B3A83827D749BF5CC7DE@si-mail64.de.bosch.com>
Message-ID: <0C2DFB192AFF6D42B6B3A83827D749BF5CC7F4@si-mail64.de.bosch.com>

Dear All,
 
 I think my question was not clear. 
 
 I downloaded the GNU C grammars but it is not supported in antlrworks
1.1.6. Can we find these grammars for this version ?
 
 The parser we need has to work in a environment where some of the
includes are missing and also for one single macro there could be
multiple definitions. 
 
 So for these to satisfy we would require to take certain deviations
from the GNU C parser. IS this a good idea ? Do you suggest that we
should write entire parser according to our needs ?
 
 Anyone of you please respond.
 
regards,
Swapna

________________________________

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Swapna R
(GS-EC/EDG5 - RBIN/EMT2)
Sent: Tuesday, February 05, 2008 8:33 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Slightly different C-Parser



Hello, 

 For my project work I need to parse C-files. Sometimes It can be that
not all header files are present. I have found the GNU-C grammars. 

 Is it a good idea to change these grammars for specific use-cases ? How
do you suggest me to go ahead ? 

 Incase of code not conforming to C-syntax instead of generating a
exception I want it to continue further and just creating a problem
statment for the problematic code.

Can you anyone of you help me ? This is very important as we are under
pressure to take decision about the parser. 

Regards, 
Swapna 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080205/297c9844/attachment.html 

From jimi at temporal-wave.com  Tue Feb  5 08:09:49 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 5 Feb 2008 08:09:49 -0800
Subject: [antlr-interest] Minor suggestion re. Java output
In-Reply-To: <1202222140.47a8743c34628@clients.latnet.lv>
Message-ID: <"L07A47765C5144cb2848A2E1E14FBBD28.1202229194.scalix.temporal-wave.com*"@MHS>

As I was intimating in my last over-reaction ;-), I think that if the 
target was changed to 1.5+, then it may not be unreasonable to expect a 
certain level of interface compatibility and so perhaps some of this 
could be changed. However CommonTree, while by its name intimating that 
it is expected to be what people will generally use, might be too high 
up. The C target expects that you have implemented the calls to base 
tree and therefore the internal pointers are all to that type. That type 
contains a pointer to the next higher type, which can be CommonTree or 
anything you like really. So, you never cast anything in C.

In generated code, smaller is still good of course but the generating of 
the casts and so on isn't a big deal. In your own custom code you can 
derive from the existing classes and create the method signatures you 
need. The cast involves a runtime check to be sure, but I think it 
unlikely that you could measure its effects on the average tree parser.

I also believe that Ter has been contemplating targeting 1.5 for a while 
because of the use of generics and I think that 3.1 may in fact be 1.5 
dependant. At some point, another look at the situation is warranted. 
There are also plenty of other elements that can be improved for code 
generation and will be addressed over time I am sure. For now, it is 
faster than the v2 system and so is heading in the right direction.

Jim

> -----Original Message-----
> From: Guntis Ozols [mailto:guntiso at latnet.lv]
> Sent: Tuesday, February 05, 2008 6:36 AM
> To: Jim Idle
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Minor suggestion re. Java output
> 
> >  - Remember that the Java code target is 1.4;
> >  - The code is put together by the string template hence it is a 
view
> > and cannot know anything about the model;
> >  - All the elements of the output can be derived from, hence these
> > questions are about being lazy. I am all for development tools
> allowing
> > one to be lazy, but only as lazy as possible. There is a bigger view
> to
> > consider here;
> >
> > Jim
> 
> It is also about less memory/cycles for each node and smaller/simpler
> code.
> 
> The question that is puzzling me is:
>   if java code target was 1.5 or later
>   would then it be possible for CommonTree to return CommonTree
> children?
> 
> I think the typical use cases are (no casting necessary, covariance
> ok):
>   - use default ast
>   - extend TreeAdaptor and extend Tree/BaseTree/CommonTree
> 
> How typical do you think is to create a tree with nodes that are
> instances of CommonTree having children that are not? (btw,
> BaseTree.children
> is protected, can be accessed anyway)
> 
> Guntis
> 



From lefevrol at yahoo.com  Tue Feb  5 08:35:04 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Tue, 05 Feb 2008 17:35:04 +0100
Subject: [antlr-interest] Minor suggestion re. Java output
In-Reply-To: <"L701E0C3631B74f48AD0595DE411EA414.1202187503.scalix.temporal-wave.com*"@MHS>
References: <fo8akl$u2u$1@ger.gmane.org>
	<"L701E0C3631B74f48AD0595DE411EA414.1202187503.scalix.temporal-wave.com*"@MHS>
Message-ID: <foa37u$vrm$1@ger.gmane.org>

I think you are overreacting and that you are definitely the one
stooping to innuendo when you write:

    "Your point might have been better phrased without the
     output=AST, which is superfluous to your question don't
     you think?"

Furthermore I am missing the point of your sarcasm. From a Test.g
grammar with

options {
     output = AST;
     ASTLabelType=CommonTree;
}

ANTLR will create a TestLexer.java and a TestParser.java, the
latter with methods like

     public static class prog_return extends ParserRuleReturnScope {
         CommonTree tree;
         public Object getTree() { return tree; }
     };

Thus my question makes sense, I think: I requested a CommonTree
type for AST nodes and that is what I got, so I don't see why you
say that tree nodes can be anything. And if they really can be
anything, then once again what is the point of "ASTLabelType=
CommonTree;"? If it is not here to constrain the node type, then
for some other purpose, I presume, and I was merely asking which
one. If is not my fault if you construe every question as a want
of what you'd probably call "proper respect".

> Your post here smacks a little of 'trying to catch someone out'.

No, you are inventing things. You seem to have a problem with people
who are persistent in trying to actually _understand_ the tool they
use instead of being content to hack until they find something that
works.

 > - Remember that the Java code target is 1.4;

Fine. I would suggest we leave it at that.

Regards,

-- O.L.


From jimi at temporal-wave.com  Tue Feb  5 08:25:31 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 5 Feb 2008 08:25:31 -0800
Subject: [antlr-interest] Slightly different C-Parser
In-Reply-To: <0C2DFB192AFF6D42B6B3A83827D749BF5CC7F4@si-mail64.de.bosch.com>
Message-ID: <"L1811B07002E945db8A9AB0714C461B9A.1202230138.scalix.temporal-wave.com*"@MHS>

Starting with the GNU C grammars isn?t a bad idea if you don?t feel up
to writing one from scratch. There is the basis of a C parser for ANTLR3
in the downloadable examples tar (see the downloads page). However some
of the situations you pose here (such as multiple ambiguous macro
definitions) might make the job impossible. You need a pre-processor for
C or would need to just parse the macro references without expanding
them and take them as read. A lot of semantic checking would just be
impossible. 

 

However it should be perfectly feasible to write a parser that will skip
includes if they are not there and just parse the structure of C,
assuming that the macros were written correctly and expect ?;? after
them (some people write macros with code in that contains the ?;?). Then
ANTLR3 will recover automatically from a lot of common errors such as a
missing ?;? and so on., so you should get a long way without too much
refinement. 



It can be a useful technique to program the structure of syntax errors
that are common, where you can do so without creating lots of
ambiguities. This will allow very specific messages to be produced.
Generally you want your parser to accept just about any old junk that
seems like it might be syntactically valid, then your semantic phase can
be quite specific about the problems it finds. So, when you see a
language spec that says something like ?generics can?t be used here?,
just use a common rule that allows them anyway and avoids ambiguity,
then your semantic check will pick up the illegal use and flag it. When
you are trying to do a partial parse like this, the semantics will be
more difficult and you may be given code that would not be in error if a
macro was defined. 

 

If possible, you should look to see if you cannot just get full source,
but I assume you have valid reasons for this partial parse. Assuming
that there is some specific purpose for this tool, then you might
consider writing a lexer and grammar that is much more specific to that
purpose, perhaps only pulling out the things you are inspecting from the
lexer (if possible) or perhaps you can write a pre-processor that fills
in missing elements (or takes partial definitions away or something).
Whether or not a good place to start for something like this is the
existing grammar depends on what you are trying to do I think.

 

 

Jim

 

From: Swapna R (GS-EC/EDG5 - RBIN/EMT2) [mailto:R.Swapna at de.bosch.com] 
Sent: Tuesday, February 05, 2008 7:53 AM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Slightly different C-Parser

 

Dear All,

 

 I think my question was not clear. 

 

 I downloaded the GNU C grammars but it is not supported in antlrworks
1.1.6. Can we find these grammars for this version ?

 

 The parser we need has to work in a environment where some of the
includes are missing and also for one single macro there could be
multiple definitions. 

 

 So for these to satisfy we would require to take certain deviations
from the GNU C parser. IS this a good idea ? Do you suggest that we
should write entire parser according to our needs ?

 

 Anyone of you please respond.

 

regards,

Swapna

 

  _____  

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Swapna R
(GS-EC/EDG5 - RBIN/EMT2)
Sent: Tuesday, February 05, 2008 8:33 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Slightly different C-Parser

Hello, 

 For my project work I need to parse C-files. Sometimes It can be that
not all header files are present. I have found the GNU-C grammars. 

 Is it a good idea to change these grammars for specific use-cases ? How
do you suggest me to go ahead ? 

 Incase of code not conforming to C-syntax instead of generating a
exception I want it to continue further and just creating a problem
statment for the problematic code.

Can you anyone of you help me ? This is very important as we are under
pressure to take decision about the parser. 

Regards, 
Swapna 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080205/49bf0f2a/attachment-0001.html 

From lefevrol at yahoo.com  Tue Feb  5 08:56:05 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Tue, 05 Feb 2008 17:56:05 +0100
Subject: [antlr-interest] A few suggestions re. ANTLRWorks
In-Reply-To: <"L30F4EE07FF02400dAF7A630F139F9CFB.1202188132.scalix.temporal-wave.com*"@MHS>
References: <fo8bol$1rr$1@ger.gmane.org>
	<"L30F4EE07FF02400dAF7A630F139F9CFB.1202188132.scalix.temporal-wave.com*"@MHS>
Message-ID: <foa4fc$4pg$1@ger.gmane.org>

> Or xxx.g3pl, or g3t or any other suffix.

OK.

> Which is a fair point that it perhaps should at least pre-fill 
 > the file name.

Yes, pre-filling is the best one could do now.

> Whitespace has no meaning in ANTLR grammars.

I was not talking of whitespace in grammars but in inputs. If, say,
tabs have meaning in your grammar, you'd like for tabs to be visible
in the input.

-- O.L.


From jimi at temporal-wave.com  Tue Feb  5 08:36:14 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 5 Feb 2008 08:36:14 -0800
Subject: [antlr-interest] Grammar.createLookaheadDFA(): could not even
	do k=1 for decision 45; 
In-Reply-To: <f4dc39b90802050257wee0187fkde094ef3c18deb80@mail.gmail.com>
Message-ID: <"LED1250A66F624a02BE06A0F4EEEE7845.1202230778.scalix.temporal-wave.com*"@MHS>



> -----Original Message-----
> From: Erik Kratochvil [mailto:discontinuum at gmail.com]
> Sent: Tuesday, February 05, 2008 2:57 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Grammar.createLookaheadDFA(): could not even
> do k=1 for decision 45;
> 
> Hi.
> 
> I have a parser grammar which would not be processed neither by
> antlr-3.0.1 (official release) nor by antlr-3.1b1
> (antlr-2008-01-23.10.tar.gz).
> 
> antlr-3.0.1 fails with:
> 
> error(10):  internal error:
> org.antlr.tool.Grammar.createLookaheadDFA(Grammar.java:864): could not
> even do k=1 for decision 442
> 
> antlr-3.1b1 fails with a little bit more descriptive error:
> 
> error(10):  internal error:
> org.antlr.tool.Grammar.createLookaheadDFA(Grammar.java:1138): could
> not even do k=1 for decision 442; reason: timed out (>1000ms)

It means that your grammar is extremely ambiguous and the analysis of 
that particular decision has timed out (1000ms is the default). You 
could try to increase this timeout (see the wiki for the option), but it 
is likely to just take longer to time out I am afraid. 

You could try backtracking (but this is quite a performance overhead, so 
you should only really do it for prototyping or where you dont really 
care about performance), or try using k=1 options in some of the 
subrules and so on. However, your best bet is to step back in time with 
your grammar and find out what you introduced to make it exhibit this 
behavior, then re-specify the grammar in a less ambiguous fashion.

Jim


From jimi at temporal-wave.com  Tue Feb  5 08:53:21 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 5 Feb 2008 08:53:21 -0800
Subject: [antlr-interest] syntactic predicates vs. backtrack=true
In-Reply-To: <f0fcc6820802050441j4481f0bbwa4f92bddebe6e730@mail.gmail.com>
Message-ID: <"L60DF3624A3224c32881F9723E903EEE6.1202231804.scalix.temporal-wave.com*"@MHS>

In my opinion you should never use backtracking unless performance is 
not a big deal for you. It is good for prototyping and as you say it can 
make the specification of your grammar easier/neater. 

If your grammar is ending up with lots of nested syntactic predicates 
(that cause multiple executions of them) and you dont want to put in 
the effort to solve the issues (remember that there are some places 
where you must use a predicate, such as distinguishing generics from 
logical expressions in C#), then using backtracking and memoizing might 
well be faster than all the predicates.

Backtracking basically trys each alt that might be predicted in turn 
until it finds one that works. The memoizing option allows the paresr to 
realize that it has already tried some parts of the path and skip them 
so it helps a lot performance wise, but you are still doing all that 
looking ahead and abandoning paths. With a good knowledge of what is 
happening though, you can favor the alts that are most likely to come up 
and help a lot.

I would say that if you are producing a tool that does not run 
continuously or on many many input streams, and/or the parse is 
generally a small part of the overall time, then you may find 
backtracking is just fine and infinitely preferable to lots of 
predicates.

There are some languages that are not necessarily good targets for an 
ANTLR grammar and there isn't a good way to parse them without 
backtracking or lots of predicates. Wiki markup languages are like that 
for instance because they are a bit haphazard and tend to have lots of 
context. If you are not trying to parse such a language, then it is 
usually possible to create a syntactic parser that has very few 
ambiguities. Experience and effort is required. Experience lets you spot 
the things that are truly an ambiguity in the language spec vs something 
that you could specify in a better way.

Remember that your parser is only there to filter out valid syntax from 
invalid syntax, not to try and allow different syntactic paths for 
things that are essentially the same syntax. Amalgamate all common token 
sequences, even if this allows through code that isnt really valid. 
Then filter such things out semantically in the tree parser (you should 
always end up with a syntactically sound tree). Many times language 
specs are written in an informative manner and distinguish things that 
are really semantics, such as methodName and interfaceName, which are 
syntactically the same thing and perhaps create long starting sequences 
before you can infer syntactically that you have a method declaration 
not an interface declaration and so on.

I hope that helps, but in summary, try not to use backtracking and 
memoizing, but dont throw out the options completely as there are 
reasonable situations where they are perfectly fine.

Jim

> -----Original Message-----
> From: Mark Volkmann [mailto:r.mark.volkmann at gmail.com]
> Sent: Tuesday, February 05, 2008 4:41 AM
> To: antlr-interest
> Subject: [antlr-interest] syntactic predicates vs. backtrack=true
> 
> Can someone describe a case where it's better to use syntactic
> predicates on rule alternatives than just specifying backtrack=true as
> a rule option? It certainly introduces less clutter in the grammar to
> use backtrack and of course there is less to type and less opportunity
> for error. Is it significantly more efficient to use syntactic
> predicates?
> 
> --
> R. Mark Volkmann
> Object Computing, Inc.



From jimi at temporal-wave.com  Tue Feb  5 08:59:02 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 5 Feb 2008 08:59:02 -0800
Subject: [antlr-interest] Minor suggestion re. Java output
In-Reply-To: <47A88212.2060102@math.purdue.edu>
Message-ID: <"L1D2A56EA3EA64a80B7811818660F7856.1202232151.scalix.temporal-wave.com*"@MHS>



> -----Original Message-----
> From: J Chapman Flack [mailto:jflack at math.purdue.edu]
> Sent: Tuesday, February 05, 2008 7:35 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Minor suggestion re. Java output
> 
> 
> jimi> - Remember that the Java code target is 1.4;
> jimi> - The code is put together by the string template hence it
> jimi>   is a view and cannot know anything about the model;
> 
> guntiso> The question that is puzzling me is:
> guntiso>   if java code target was 1.5 or later
> guntiso>   would then it be possible for CommonTree to return
> guntiso>   CommonTree children?
> 
> What this thread makes me wonder (and it's not a rhetorical
> question, because I don't know the answer) is, would it be a
> feasible project for somebody who wanted Java output that takes
> advantage of more modern features to modify the Java 1.4 string
> templates into a 1.5 set?  Then we could have both.

Certainly, but you would probably need runtime changes. In the end I am 
not sure that you would really gain that much though to be honest. But, 
those that feel strongly about it do of course have the entire source to 
play with, so trying it and pointing out a 30% performance gain or 
something would go a long way to making the point :-)

Jim


From jimi at temporal-wave.com  Tue Feb  5 09:04:45 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 5 Feb 2008 09:04:45 -0800
Subject: [antlr-interest] A few suggestions re. ANTLRWorks
In-Reply-To: <foa4fc$4pg$1@ger.gmane.org>
Message-ID: <"LBBC78FD8F43F494e935E282FD705C1A7.1202232494.scalix.temporal-wave.com*"@MHS>



> -----Original Message-----
> From: Olivier Lefevre [mailto:lefevrol at yahoo.com]
> Sent: Tuesday, February 05, 2008 8:56 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] A few suggestions re. ANTLRWorks
> 
> > Or xxx.g3pl, or g3t or any other suffix.
> 
> OK.
> 
> > Which is a fair point that it perhaps should at least pre-fill
>  > the file name.
> 
> Yes, pre-filling is the best one could do now.
> 
> > Whitespace has no meaning in ANTLR grammars.
> 
> I was not talking of whitespace in grammars but in inputs. If, say,
> tabs have meaning in your grammar, you'd like for tabs to be visible
> in the input.

Perhaps I was not clear. The meaning of whitespace is totally what you 
make it, but I guess that what you are saying is that because tab 
'	' 
looks the same as 

'     ' 

then perhaps it should use \t to distinguish, which seems reasonable. As 
the development of the tool continues, I am sure that reasonable 
suggestions will be incorporated.

Jim



From r.mark.volkmann at gmail.com  Tue Feb  5 11:43:50 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Tue, 5 Feb 2008 13:43:50 -0600
Subject: [antlr-interest] syntactic predicates vs. backtrack=true
In-Reply-To: <L60DF3624A3224c32881F9723E903EEE6.1202231804.scalix.temporal-wave.com*@MHS>
References: <f0fcc6820802050441j4481f0bbwa4f92bddebe6e730@mail.gmail.com>
	<L60DF3624A3224c32881F9723E903EEE6.1202231804.scalix.temporal-wave.com*@MHS>
Message-ID: <f0fcc6820802051143n7a8288b6q533f8563a767fc7a@mail.gmail.com>

On Feb 5, 2008 10:53 AM, Jim Idle <jimi at temporal-wave.com> wrote:
> In my opinion you should never use backtracking unless performance is
> not a big deal for you. It is good for prototyping and as you say it can
> make the specification of your grammar easier/neater.

I snipped out a lot of your post which was excellent. However, I'm
still confused by this statement in the book.

"ANTLR also supports an auto-backtracking feature whereby ANTLR
inserts syntactic predicates on the left edge of every alternative."

To me this statement implies that the backtrack option is just a
shortcut for inserting syntactic predicates. Doesn't that mean that
these rules are equivalent in both behavior and
performance? If not, can someone explain how they differ at runtime?
Note that I'm specifying the backtrack option on a specific rule, not
on the entire grammar.

foo
options { backtrack = true; }
 : option1
 | option2
 | option3
 ;

foo
 : (option1)=> option1
 | (option2)=> option2
 | option3
 ;

-- 
R. Mark Volkmann
Object Computing, Inc.

From andreas.bartho at inf.tu-dresden.de  Tue Feb  5 12:19:28 2008
From: andreas.bartho at inf.tu-dresden.de (Andreas Bartho)
Date: Tue, 05 Feb 2008 21:19:28 +0100
Subject: [antlr-interest] syntactic predicates vs. backtrack=true
In-Reply-To: <f0fcc6820802051143n7a8288b6q533f8563a767fc7a@mail.gmail.com>
References: <f0fcc6820802050441j4481f0bbwa4f92bddebe6e730@mail.gmail.com>	<L60DF3624A3224c32881F9723E903EEE6.1202231804.scalix.temporal-wave.com*@MHS>
	<f0fcc6820802051143n7a8288b6q533f8563a767fc7a@mail.gmail.com>
Message-ID: <47A8C4D0.2080708@inf.tu-dresden.de>

Hi Mark,

> To me this statement implies that the backtrack option is just a
> shortcut for inserting syntactic predicates. 

That's right.

> Doesn't that mean that
> these rules are equivalent in both behavior and
> performance? 

Not necessarily. Consider, for example, C#'s typedeclaration rule:

typedeclaration
     :   classdeclaration
     |   structdeclaration
      ...
     ;

With backtracking on, this becomes:

typedeclaration
     :   (classeclaration) => classdeclaration
     |   (structdeclaration) => structdeclaration
      ...
     ;

This is an awful lot of overhead. To distinguish the alternatives one 
would only need to check for a special keyword. This can be done by 
manually specifying a syntactic predicate.

typedeclaration
     :   (attributes? classmodifiers? PARTIAL? CLASS) => classdeclaration
     |   (attributes? structmodifiers? PARTIAL? STRUCT) => structdeclaration
     ....
     ;

The whole stuff after the keyword isn't processed any longer.

Please that for the example backtracking might not be necessary at all. 
I haven't tested it yet. But it illustrates the point.

Andreas Bartho


If not, can someone explain how they differ at runtime?
> Note that I'm specifying the backtrack option on a specific rule, not
> on the entire grammar.
> 
> foo
> options { backtrack = true; }
>  : option1
>  | option2
>  | option3
>  ;
> 
> foo
>  : (option1)=> option1
>  | (option2)=> option2
>  | option3
>  ;
> 


From jimi at temporal-wave.com  Tue Feb  5 12:23:22 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 5 Feb 2008 12:23:22 -0800
Subject: [antlr-interest] syntactic predicates vs. backtrack=true
In-Reply-To: <f0fcc6820802051143n7a8288b6q533f8563a767fc7a@mail.gmail.com>
Message-ID: <"LC9FAD8FA85514420A7754D3C196EC98E.1202244413.scalix.temporal-wave.com*"@MHS>



> -----Original Message-----
> From: Mark Volkmann [mailto:r.mark.volkmann at gmail.com]
> Sent: Tuesday, February 05, 2008 11:44 AM
> To: Jim Idle
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] syntactic predicates vs. backtrack=true
> 
> On Feb 5, 2008 10:53 AM, Jim Idle <jimi at temporal-wave.com> wrote:
> > In my opinion you should never use backtracking unless performance 
is
> > not a big deal for you. It is good for prototyping and as you say it
> can
> > make the specification of your grammar easier/neater.
> 
> I snipped out a lot of your post which was excellent. However, I'm
> still confused by this statement in the book.
> 
> "ANTLR also supports an auto-backtracking feature whereby ANTLR
> inserts syntactic predicates on the left edge of every alternative."
> 
> To me this statement implies that the backtrack option is just a
> shortcut for inserting syntactic predicates. Doesn't that mean that
> these rules are equivalent in both behavior and
> performance? If not, can someone explain how they differ at runtime?
> Note that I'm specifying the backtrack option on a specific rule, not
> on the entire grammar.

Backtrack on a rule can be good too. It is inserting automatic 
predicates but if you use the memoizing option, then it will shortcut 
predicates that it has tried before, so sometimes it is better than 
syntactic predicates. Using it on a whole grammar is expensive of 
course.

Jim



From jimi at temporal-wave.com  Tue Feb  5 12:24:54 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 5 Feb 2008 12:24:54 -0800
Subject: [antlr-interest] syntactic predicates vs. backtrack=true
In-Reply-To: <47A8C4D0.2080708@inf.tu-dresden.de>
Message-ID: <"LC2A43E57DE0D4c7cA0A288A69AF8FF33.1202244500.scalix.temporal-wave.com*"@MHS>



> -----Original Message-----
> From: Andreas Bartho [mailto:andreas.bartho at inf.tu-dresden.de]
> Sent: Tuesday, February 05, 2008 12:19 PM
> To: Mark Volkmann
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] syntactic predicates vs. backtrack=true
> 
> Hi Mark,
> 
> > To me this statement implies that the backtrack option is just a
> > shortcut for inserting syntactic predicates.
> 
> That's right.
> 
> > Doesn't that mean that
> > these rules are equivalent in both behavior and
> > performance?
> 
> Not necessarily. Consider, for example, C#'s typedeclaration rule:
> 
> typedeclaration
>      :   classdeclaration
>      |   structdeclaration
>       ...
>      ;
> 
> With backtracking on, this becomes:
> 
> typedeclaration
>      :   (classeclaration) => classdeclaration
>      |   (structdeclaration) => structdeclaration
>       ...
>      ;
> 
> This is an awful lot of overhead. To distinguish the alternatives one
> would only need to check for a special keyword. This can be done by
> manually specifying a syntactic predicate.
> 
> typedeclaration
>      :   (attributes? classmodifiers? PARTIAL? CLASS) =>
> classdeclaration
>      |   (attributes? structmodifiers? PARTIAL? STRUCT) =>
> structdeclaration
>      ....
>      ;
> >  ;

Not the best example though as you dont need backtracking or 
predicates to parse C#, other than the one that the spec ordains ;-)

Jim


From darien.hager at etelos-inc.com  Tue Feb  5 14:44:14 2008
From: darien.hager at etelos-inc.com (Darien Hager)
Date: Tue, 5 Feb 2008 14:44:14 -0800
Subject: [antlr-interest] A few suggestions re. ANTLRWorks
In-Reply-To: <LBBC78FD8F43F494e935E282FD705C1A7.1202232494.scalix.temporal-wave.com*@MHS>
References: <foa4fc$4pg$1@ger.gmane.org>
	<LBBC78FD8F43F494e935E282FD705C1A7.1202232494.scalix.temporal-wave.com*@MHS>
Message-ID: <c8c997f40802051444h37474c4ds252589898a5e7446@mail.gmail.com>

To attempt to rephrase Mr. Lefevre's request:

It's not about the grammar construction window, with all thesyntax
highlighting etc. In there, it's always better to use '\t' instead.

Instead, I believe he means the interpreter/debug input text boxes, when
entering sample data to be parsed.

In them, it is possible to accidentally enter or copy/paste sample data with
erroneous whitespace that is difficult to see and may cause misleading
results.

This is especially true for trailing whitespace or whitespace that occurs
near where word-wrap kicks in.

-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are not
the intended recipient, then this is notice that any use, disclosure,
dissemination, distribution or copying is strictly prohibited. If you have
received this message in error please contact the sender by reply mail and
destroy all copies of the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080205/c15d59e6/attachment.html 

From lgcraymer at yahoo.com  Tue Feb  5 16:55:37 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Tue, 5 Feb 2008 16:55:37 -0800 (PST)
Subject: [antlr-interest] syntactic predicates vs. backtrack=true
In-Reply-To: <f0fcc6820802051143n7a8288b6q533f8563a767fc7a@mail.gmail.com>
Message-ID: <462812.13471.qm@web55909.mail.re3.yahoo.com>


--- Mark Volkmann <r.mark.volkmann at gmail.com> wrote:

> On Feb 5, 2008 10:53 AM, Jim Idle
> <jimi at temporal-wave.com> wrote:
> > In my opinion you should never use backtracking
> unless performance is
> > not a big deal for you. It is good for prototyping
> and as you say it can
> > make the specification of your grammar
> easier/neater.
> 
> I snipped out a lot of your post which was
> excellent. However, I'm
> still confused by this statement in the book.
> 
> "ANTLR also supports an auto-backtracking feature
> whereby ANTLR
> inserts syntactic predicates on the left edge of
> every alternative."
> 
> To me this statement implies that the backtrack
> option is just a
> shortcut for inserting syntactic predicates. Doesn't
> that mean that
> these rules are equivalent in both behavior and
> performance? If not, can someone explain how they
> differ at runtime?
> Note that I'm specifying the backtrack option on a
> specific rule, not
> on the entire grammar.
> 
Well, almost.  Backtracking inserts synpreds at all
decision points, and the analysis engine tries to
remove unnecessary ones.  More importantly, though,
the use of backtracking masks the cases where rules
can be refactored.  Manually inserted synpreds (or
rule/subrule backtracking) are the better approach for
production grammars because the effort of fine-tuning
leads to significant performance optimizations.  If
you are doing something quick and dirty,
backtrack=true can lessen development time.  For
production grammars, though, Jim's "never use the
backtrack option at the grammar level" is right on
target.

--Loring


      ____________________________________________________________________________________
Looking for last minute shopping deals?  
Find them fast with Yahoo! Search.  http://tools.search.yahoo.com/newsearch/category.php?category=shopping

From discontinuum at gmail.com  Wed Feb  6 00:25:34 2008
From: discontinuum at gmail.com (Erik Kratochvil)
Date: Wed, 6 Feb 2008 09:25:34 +0100
Subject: [antlr-interest] Grammar.createLookaheadDFA(): could not even
	do k=1 for decision 45; 
In-Reply-To: <LED1250A66F624a02BE06A0F4EEEE7845.1202230778.scalix.temporal-wave.com*@MHS>
References: <f4dc39b90802050257wee0187fkde094ef3c18deb80@mail.gmail.com>
	<LED1250A66F624a02BE06A0F4EEEE7845.1202230778.scalix.temporal-wave.com*@MHS>
Message-ID: <f4dc39b90802060025j2ce71768v14e88414d9a71463@mail.gmail.com>

On 2/5/08, Jim Idle <jimi at temporal-wave.com> wrote:
>
> It means that your grammar is extremely ambiguous and the analysis of
> that particular decision has timed out (1000ms is the default). You
> could try to increase this timeout (see the wiki for the option), but it
> is likely to just take longer to time out I am afraid.
>
> You could try backtracking (but this is quite a performance overhead, so
> you should only really do it for prototyping or where you dont really
> care about performance), or try using k=1 options in some of the
> subrules and so on. However, your best bet is to step back in time with
> your grammar and find out what you introduced to make it exhibit this
> behavior, then re-specify the grammar in a less ambiguous fashion.
>

Aha. The problem is that the grammar is not mine, I sort of inherited
it. It was written for antlr 2.7 (and it worked well) and my task was
to convert it so that it works with antlr 3. It is true that the
grammar has some ambiguity issues, there are more than three dozens of
syntactic and semantic predicates and the generated parser.java has
more than 100MB while the size of the parser generated by antlr2.7 was
only 2.3MB. I guess that conversion from 2.7 to 3.0 is not as easy as
I thought :)

Thank you very much, I shall do as you suggest - I'll try to rewrite
the problematic rules.

-- 
Erik Kratochv?l

From jimi at temporal-wave.com  Wed Feb  6 08:01:23 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 6 Feb 2008 08:01:23 -0800
Subject: [antlr-interest] A few suggestions re. ANTLRWorks
In-Reply-To: <c8c997f40802051444h37474c4ds252589898a5e7446@mail.gmail.com>
Message-ID: <"LE434C7FA86474ee1948C9B3B0018A4FC.1202315103.scalix.temporal-wave.com*"@MHS>

Yes ? I understood what he meant.

 

Jim

 

From: Darien Hager [mailto:darien.hager at etelos-inc.com] 
Sent: Tuesday, February 05, 2008 2:44 PM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] A few suggestions re. ANTLRWorks

 

To attempt to rephrase Mr. Lefevre's request:

It's not about the grammar construction window, with all thesyntax
highlighting etc. In there, it's always better to use '\t' instead. 

Instead, I believe he means the interpreter/debug input text boxes, when
entering sample data to be parsed.

In them, it is possible to accidentally enter or copy/paste sample data
with erroneous whitespace that is difficult to see and may cause
misleading results.

This is especially true for trailing whitespace or whitespace that
occurs near where word-wrap kicks in.

-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com 

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are
not the intended recipient, then this is notice that any use,
disclosure, dissemination, distribution or copying is strictly
prohibited. If you have received this message in error please contact
the sender by reply mail and destroy all copies of the original message.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080206/51a9b9b6/attachment-0001.html 

From jimi at temporal-wave.com  Wed Feb  6 08:08:04 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 6 Feb 2008 08:08:04 -0800
Subject: [antlr-interest] Grammar.createLookaheadDFA(): could not even
	do k=1 for decision 45; 
In-Reply-To: <f4dc39b90802060025j2ce71768v14e88414d9a71463@mail.gmail.com>
Message-ID: <"L5B09D4A04EB44325A01633378E973DEA.1202315499.scalix.temporal-wave.com*"@MHS>

You may well find that rather than using the existing grammar as your 
guide, it is easier to start with a blank screen and build up to the 
full grammar using 3.x constructs. As you add new productions, you will 
be able to see which of them are causing ambiguities and diagnose them 
as either grammar problems which you can refactor, or real language 
ambiguities which require a little more ingenuity.

Jim
> -----Original Message-----
> From: Erik Kratochvil [mailto:discontinuum at gmail.com]
> Sent: Wednesday, February 06, 2008 12:26 AM
> To: Jim Idle
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Grammar.createLookaheadDFA(): could not
> even do k=1 for decision 45;
> 
> On 2/5/08, Jim Idle <jimi at temporal-wave.com> wrote:
> >
> > It means that your grammar is extremely ambiguous and the analysis 
of
> > that particular decision has timed out (1000ms is the default). You
> > could try to increase this timeout (see the wiki for the option), 
but
> it
> > is likely to just take longer to time out I am afraid.
> >
> > You could try backtracking (but this is quite a performance 
overhead,
> so
> > you should only really do it for prototyping or where you dont 
really
> > care about performance), or try using k=1 options in some of the
> > subrules and so on. However, your best bet is to step back in time
> with
> > your grammar and find out what you introduced to make it exhibit 
this
> > behavior, then re-specify the grammar in a less ambiguous fashion.
> >
> 
> Aha. The problem is that the grammar is not mine, I sort of inherited
> it. It was written for antlr 2.7 (and it worked well) and my task was
> to convert it so that it works with antlr 3. It is true that the
> grammar has some ambiguity issues, there are more than three dozens of
> syntactic and semantic predicates and the generated parser.java has
> more than 100MB while the size of the parser generated by antlr2.7 was
> only 2.3MB. I guess that conversion from 2.7 to 3.0 is not as easy as
> I thought :)
> 
> Thank you very much, I shall do as you suggest - I'll try to rewrite
> the problematic rules.
> 
> --
> Erik Kratochv?l



From SWatt at infobal.com  Wed Feb  6 08:49:57 2008
From: SWatt at infobal.com (Stuart Watt)
Date: Wed, 6 Feb 2008 11:49:57 -0500 
Subject: [antlr-interest] Slightly different C-Parser
Message-ID: <96AD91D781CCD511A66000B0D0D15C49043DADDA@EXSVR1>

I had this problem, and in the end walked away from all existing C grammars.
What I developed in the end was a slightly enhanced tokeniser, which matched
most kinds of brackets, and required fairly significant fixing-up which I
did using an XML-based AST, XPath, and some rather nasty Perl code. 
 
The problem is that C type definitions can be required to determine what
kind of declaration path to follow, and C type definitions are missing if
the include files are missing. This is over and above the macro issue. In
the end I came to the conclusion that a C parser is not what was needed, and
a skeletal parser for C-like languages (also developed using ANTLR) was a
better way forward. In the end, with a few good rules of thumb, I could find
all I needed from both C and C++ files, about as well as a commercial
product, although I have only tested it a couple of relatively
straightforward packages. I suspect it would fail badly on code which pushes
C macro and type definitions, such as that used in inter-language linking
systems. However, since that isn't what I'm trying to parse, I just decided
not to care about it.
 
Macros can usually be ignored a lot of the time. I was working on the
assumption that a macro would usually behave (a) like a variable, or (b)
like a function, depending on context of use. Yes, sometimes they can be
used in a way that is impossible to lex properly, but in the end I stripped
macro definitions from the source at a preprocessing stage, and just
recorded their existence later. 
 
It all probably depends on the depth of the parse you need. I didn't need
much, and I was working with code that was known to compile (Jim's useful
error hint wasn't needed), so a shallow skeletal parser worked fine. If I
needed to get into data flow, I'd probably have pushed harder at the C
grammar, and used backtracking a whole lot more, to see how good I could get
the AST. 
 
All the best
Stuart

-----Original Message-----
From: Jim Idle [mailto:jimi at temporal-wave.com]
Sent: Tuesday, February 05, 2008 11:26 AM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Slightly different C-Parser



Starting with the GNU C grammars isn?t a bad idea if you don?t feel up to
writing one from scratch. There is the basis of a C parser for ANTLR3 in the
downloadable examples tar (see the downloads page). However some of the
situations you pose here (such as multiple ambiguous macro definitions)
might make the job impossible. You need a pre-processor for C or would need
to just parse the macro references without expanding them and take them as
read. A lot of semantic checking would just be impossible. 

  

However it should be perfectly feasible to write a parser that will skip
includes if they are not there and just parse the structure of C, assuming
that the macros were written correctly and expect ?;? after them (some
people write macros with code in that contains the ?;?). Then ANTLR3 will
recover automatically from a lot of common errors such as a missing ?;? and
so on., so you should get a long way without too much refinement. 



It can be a useful technique to program the structure of syntax errors that
are common, where you can do so without creating lots of ambiguities. This
will allow very specific messages to be produced. Generally you want your
parser to accept just about any old junk that seems like it might be
syntactically valid, then your semantic phase can be quite specific about
the problems it finds. So, when you see a language spec that says something
like ?generics can?t be used here?, just use a common rule that allows them
anyway and avoids ambiguity, then your semantic check will pick up the
illegal use and flag it. When you are trying to do a partial parse like
this, the semantics will be more difficult and you may be given code that
would not be in error if a macro was defined. 

  

If possible, you should look to see if you cannot just get full source, but
I assume you have valid reasons for this partial parse. Assuming that there
is some specific purpose for this tool, then you might consider writing a
lexer and grammar that is much more specific to that purpose, perhaps only
pulling out the things you are inspecting from the lexer (if possible) or
perhaps you can write a pre-processor that fills in missing elements (or
takes partial definitions away or something). Whether or not a good place to
start for something like this is the existing grammar depends on what you
are trying to do I think. 

  

  

Jim 

  

From: Swapna R (GS-EC/EDG5 - RBIN/EMT2) [mailto:R.Swapna at de.bosch.com] 
Sent: Tuesday, February 05, 2008 7:53 AM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Slightly different C-Parser 

  

Dear All, 

  

 I think my question was not clear. 

  

 I downloaded the GNU C grammars but it is not supported in antlrworks
1.1.6. Can we find these grammars for this version ? 

  

 The parser we need has to work in a environment where some of the includes
are missing and also for one single macro there could be multiple
definitions. 

  

 So for these to satisfy we would require to take certain deviations from
the GNU C parser. IS this a good idea ? Do you suggest that we should write
entire parser according to our needs ? 

  

 Anyone of you please respond. 

  

regards, 

Swapna 

  

  _____  

   

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Swapna R (GS-EC/EDG5
- RBIN/EMT2)
Sent: Tuesday, February 05, 2008 8:33 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Slightly different C-Parser 

Hello, 

 For my project work I need to parse C-files. Sometimes It can be that not
all header files are present. I have found the GNU-C grammars. 

 Is it a good idea to change these grammars for specific use-cases ? How do
you suggest me to go ahead ? 

 Incase of code not conforming to C-syntax instead of generating a exception
I want it to continue further and just creating a problem statment for the
problematic code. 

Can you anyone of you help me ? This is very important as we are under
pressure to take decision about the parser. 

Regards, 
Swapna 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080206/d0793e2f/attachment.html 

From nelson.ana at gmail.com  Wed Feb  6 09:37:17 2008
From: nelson.ana at gmail.com (Ana Nelson)
Date: Wed, 6 Feb 2008 17:37:17 +0000
Subject: [antlr-interest] gUnit special character escaping
Message-ID: <a7d6d2740802060937u113cd8dbrd1a51917ff8b393@mail.gmail.com>

I'm trying to write gUnit tests for expressions like

"ABC DE"\n

The quotes are part of the expression, so I've been trying to escape the
quotes and newline as follows to include them in my .testsuite file:

"\"ABC DE\"\n"

But, gUnit doesn't seem to like escaped quotes, or I'm not escaping them
properly. I've tried various alternatives but haven't found anything that
works. I have a clumsy workaround which is to put the quoted expression "ABC
DE" into an external text file.

If anyone knows the correct way of escaping quotes (and newlines) in gUnit,
or if someone can tell me that it's not possible, I would appreciate it.
I've looked in the gunit.jar source and see references to escaped quotes in
the parser grammar but can't manage to work that back into how to write
them.

Many thanks! :-)

Ana
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080206/dbcc1828/attachment-0001.html 

From andreas.bartho at inf.tu-dresden.de  Wed Feb  6 10:15:46 2008
From: andreas.bartho at inf.tu-dresden.de (Andreas Bartho)
Date: Wed, 06 Feb 2008 19:15:46 +0100
Subject: [antlr-interest] gUnit special character escaping
In-Reply-To: <a7d6d2740802060937u113cd8dbrd1a51917ff8b393@mail.gmail.com>
References: <a7d6d2740802060937u113cd8dbrd1a51917ff8b393@mail.gmail.com>
Message-ID: <47A9F952.6010901@inf.tu-dresden.de>

Hi Ana,

have you tried

<< "ABC DE"
 >>

as described in the wiki?

Andreas

Ana Nelson wrote:
> I'm trying to write gUnit tests for expressions like
> 
> "ABC DE"\n
> 
> The quotes are part of the expression, so I've been trying to escape the 
> quotes and newline as follows to include them in my .testsuite file:
> 
> "\"ABC DE\"\n"
> 
> But, gUnit doesn't seem to like escaped quotes, or I'm not escaping them 
> properly. I've tried various alternatives but haven't found anything 
> that works. I have a clumsy workaround which is to put the quoted 
> expression "ABC DE" into an external text file.
> 
> If anyone knows the correct way of escaping quotes (and newlines) in 
> gUnit, or if someone can tell me that it's not possible, I would 
> appreciate it. I've looked in the gunit.jar source and see references to 
> escaped quotes in the parser grammar but can't manage to work that back 
> into how to write them.
> 
> Many thanks! :-)
> 
> Ana
> 


From peter.bulychev at gmail.com  Wed Feb  6 11:01:09 2008
From: peter.bulychev at gmail.com (Peter Bulychev)
Date: Wed, 6 Feb 2008 21:01:09 +0200
Subject: [antlr-interest] tree construction facility doesn't work for me
Message-ID: <ef5132890802061101t2edfe14as49187bcde6ccc4e1@mail.gmail.com>

Hello.

I want to test the tree construction facility of ANTLR.

I have downloaded
http://www.antlr.org/wiki/download/attachments/1037/SimpleC.g and then
performed following steps:

> java  org.antlr.Tool SimpleC.g
> javac  *.java
> java  Main  input
>

But Java says during the last step:

> Exception in thread "main" java.lang.NoClassDefFoundError: Main


And this is true, I can't find the Main class: `grep Main *.java` returns
nothing.

Please, tell me, where I am incorrect.

Thank you.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080206/4a431e5a/attachment.html 

From jaluber at gmx.de  Wed Feb  6 11:12:26 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Wed, 06 Feb 2008 20:12:26 +0100
Subject: [antlr-interest] tree construction facility doesn't work for me
In-Reply-To: <ef5132890802061101t2edfe14as49187bcde6ccc4e1@mail.gmail.com>
References: <ef5132890802061101t2edfe14as49187bcde6ccc4e1@mail.gmail.com>
Message-ID: <47AA069A.1050407@gmx.de>

Peter Bulychev schrieb:
> Hello.
> 
> I want to test the tree construction facility of ANTLR.
> 
> I have downloaded 
> http://www.antlr.org/wiki/download/attachments/1037/SimpleC.g and then 
> performed following steps:
> 
>     java  org.antlr.Tool SimpleC.g
>     javac  *.java
>     java  Main  input
> 
> 
> But Java says during the last step:
> 
>     Exception in thread "main" java.lang.NoClassDefFoundError: Main
> 
> 
> And this is true, I can't find the Main class: `grep Main *.java` 
> returns nothing.
> 
> Please, tell me, where I am incorrect.
> 
You need a driver class, too. There should be a few in the examples.zip 
on the webpage to adapt from.

Johannes

From ae.armstrong at gmail.com  Wed Feb  6 11:28:05 2008
From: ae.armstrong at gmail.com (Aaron Armstrong)
Date: Wed, 6 Feb 2008 11:28:05 -0800
Subject: [antlr-interest] Best practices in making ASTs
Message-ID: <5a086d5a0802061128j1bf9841bhaacfd38cf5451f7@mail.gmail.com>

I'm trying to make a non-flat AST from the java grammar given on the
antlr.org website. All I'm wanting is a node with the grammar rule, then all
its children being parts in that rule.  For example, importDeclaration:
importDeclaration: 'import' 'static'? Identifier ('.' Identifier)* ('.'
'*')? ';' ;
I just map it to the current grammar via -> and add ^:
importDeclaration: 'import' 'static'? Identifier ('.' Identifier)* ('.'
'*')? ';' -> ^('import' 'static'? Identifier ('.' Identifier)* ('.' '*')?
';');
The problem is when the parser recognizes import java.io.*;, the AST grammar
gets to the java.io and exits prematurely on .* because it doesn't match '.'
Identifier.  Essentially, it's not performing lookahead in the AST output
grammar.  Is there a good workaround to this?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080206/ecd0e936/attachment.html 

From leon.antlr at mac.com  Wed Feb  6 11:37:38 2008
From: leon.antlr at mac.com (Leon Su)
Date: Wed, 6 Feb 2008 11:37:38 -0800
Subject: [antlr-interest] gUnit special character escaping
In-Reply-To: <47A9F952.6010901@inf.tu-dresden.de>
References: <a7d6d2740802060937u113cd8dbrd1a51917ff8b393@mail.gmail.com>
	<47A9F952.6010901@inf.tu-dresden.de>
Message-ID: <6D02A42C-FAC1-4B04-84E9-6B5AE3617128@mac.com>

Hi,

gUnit accepts escaped character in its testsuite expressions, but  
there's a bug currently.
You may try multiple-line expression as Andreas suggested.
A minor update of gUnit will be release in these days.
(the bug is also fixed.)

Regards,

Leon

On Feb 6, 2008, at 10:15 AM, Andreas Bartho wrote:

> Hi Ana,
>
> have you tried
>
> << "ABC DE"
> >>
>
> as described in the wiki?
>
> Andreas
>
> Ana Nelson wrote:
>> I'm trying to write gUnit tests for expressions like
>> "ABC DE"\n
>> The quotes are part of the expression, so I've been trying to  
>> escape the quotes and newline as follows to include them in  
>> my .testsuite file:
>> "\"ABC DE\"\n"
>> But, gUnit doesn't seem to like escaped quotes, or I'm not  
>> escaping them properly. I've tried various alternatives but  
>> haven't found anything that works. I have a clumsy workaround  
>> which is to put the quoted expression "ABC DE" into an external  
>> text file.
>> If anyone knows the correct way of escaping quotes (and newlines)  
>> in gUnit, or if someone can tell me that it's not possible, I  
>> would appreciate it. I've looked in the gunit.jar source and see  
>> references to escaped quotes in the parser grammar but can't  
>> manage to work that back into how to write them.
>> Many thanks! :-)
>> Ana
>


From peter.bulychev at gmail.com  Wed Feb  6 12:21:53 2008
From: peter.bulychev at gmail.com (Peter Bulychev)
Date: Wed, 6 Feb 2008 22:21:53 +0200
Subject: [antlr-interest] grammars with AST support
Message-ID: <ef5132890802061221l7a72360ey5cf3bd37f0b64acd@mail.gmail.com>

Hello.

I perform research on static analysis and my tool takes on input AST
representation of programs.
I want to use ANTRL to produce ASTs for different programming languages (C,
C++, C#, Java, Python, ...).
Where can I get grammars which can produce AST?

I have searched http://www.antlr.org/grammar/list, but there are no
AST-featured grammars, which supports this ability.

-- 
Best regards,
   Peter Bulychev.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080206/b74faa5c/attachment.html 

From SWatt at infobal.com  Wed Feb  6 12:48:05 2008
From: SWatt at infobal.com (Stuart Watt)
Date: Wed, 6 Feb 2008 15:48:05 -0500 
Subject: [antlr-interest] grammars with AST support
Message-ID: <96AD91D781CCD511A66000B0D0D15C49043DADDC@EXSVR1>

Hi Peter
 
ASTs are conceptual structures rather than texts, so they don't have that
kind of a grammar (except for tree parsing, and most of the grammars can
generate ASTs like these already). So that would be one solution, use tree
parsers and connect them to the existing ones. 
 
I don't think it is common to parse ANTLRs default (slightly Lisp-style) AST
text representations, because they don't want to write it and read it again,
as you do lose information when you do that. Having said that, the closest
may be the GraphViz dot grammar (see DOTTreeGenerator in the runtime).
 
It is easiest to write ASTs out in a well-defined structure (e.g., dot, XML)
and then parsing is easy. Extensibility (e.g., XML) allows your different
languages to add in extra information if needed, without requiring changes
to processing. 
 
--S

-----Original Message-----
From: Peter Bulychev [mailto:peter.bulychev at gmail.com]
Sent: Wednesday, February 06, 2008 3:22 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] grammars with AST support


Hello.

I perform research on static analysis and my tool takes on input AST
representation of programs. 
I want to use ANTRL to produce ASTs for different programming languages (C,
C++, C#, Java, Python, ...). 
Where can I get grammars which can produce AST?

I have searched http://www.antlr.org/grammar/list
<http://www.antlr.org/grammar/list> , but there are no AST-featured
grammars, which supports this ability.

-- 
Best regards,
   Peter Bulychev. 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080206/97577cea/attachment.html 

From jaluber at gmx.de  Wed Feb  6 14:02:28 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Wed, 06 Feb 2008 23:02:28 +0100
Subject: [antlr-interest] grammars with AST support
In-Reply-To: <ef5132890802061221l7a72360ey5cf3bd37f0b64acd@mail.gmail.com>
References: <ef5132890802061221l7a72360ey5cf3bd37f0b64acd@mail.gmail.com>
Message-ID: <47AA2E74.7080206@gmx.de>

Peter Bulychev schrieb:
> Hello.
> 
> I perform research on static analysis and my tool takes on input AST 
> representation of programs.
> I want to use ANTRL to produce ASTs for different programming languages 
> (C, C++, C#, Java, Python, ...).
> Where can I get grammars which can produce AST?
> 
> I have searched http://www.antlr.org/grammar/list, but there are no 
> AST-featured grammars, which supports this ability.

Until now no one has written such grammars or finished them already. 
Reasons are:

- In case of C and C++, I don't believe that ANTLR can handle the 
preprocessor part correctly without any custom code (C# has a similar 
corner case, but its effect can be nearly ignored - or checked against 
to inform the programmer to change the code a bit)
- The tree transformation part is only possibly with ANTLR 3.1. More 
complicated need this for correct implementation.
- C++ is supposed to be hellish for compiler builders, so I don't expect 
a grammar popping up soon
- There are still ANTLR bugs, which prevent the use of some allowed 
constructs - that's the case for my own work-in-progress C# grammar.

If you like, I can send you the sources, but at best I have finished 
only 20% what is required for a full compiler.

Johannes

From mgaulin at globalspec.com  Wed Feb  6 14:17:42 2008
From: mgaulin at globalspec.com (Gaulin, Mark)
Date: Wed, 6 Feb 2008 17:17:42 -0500
Subject: [antlr-interest] Trying to parsing CFML (ColdFusion)
Message-ID: <5C5A62059F1B8F4AB33B1B0C23B9670603282BF8@gshqxc01.globalspec.net>

Hi Folks
I'm trying to write a parser for CFML (aka ColdFusion) and could use
some guidance.  CFML is a web scripting language where a .cfm page will
have a mix of html (or other "stuff") and CFML tags (which all start
with "<cf").  One of the ugliest part of the language (in terms of
parsing) is the built-in interpolation that can happen in the "html"
part.  Here's a simple example:
 
<cfset x = "Hello, world!">
    <html>
    <body>
<cfoutput>
        I say #x#<br>
        This is ##1.<br> <!--- shows "#1" --->
</cfoutput>
        This a #2. <!--- shows "#2" --->
    </body>
    </html>
 
 
The cfoutput tag processes all of the text between the open & close tag
and expands anything between hash symbols; two hash symbols are used to
escape to a single hash in the output. If there is no cfoutput "in
scope" then the hash symbol is just a hash symbol, and should not be
escaped.
 
Here's another fun part of the language... the hash can surround an
expression:
<cfoutput>
    #1+Max(2,3)# should be "4"
</cfoutput>
 
And string literals do interpolation too (so I guess they are not
literal), but in a stack-like way:
<cfset y = "I said #IIF(true, DE("yes"), DE("no"))#!">
Notice that the double quotes around "a" are just fine because the
hash-delimited interpolation part (#IIF(true, DE("yes"), DE("no"))#)
sort of takes precedence over the outer double-quoted string part.
 
Is this grammar (& lexer) possible with ANTLR?  For someone new to it?
It started to feel like this is a case of an "island grammar", but even
attempting to parse a "simple" quoted string (that can contain hashes)
all by itself is blowing my mind... the lexer is very very context
dependent.
 
Can anyone offer some advice?  I'm almost tempted to just write the
thing in straight java, but that feels lame (and tedious).
 
Thanks
    Mark
    
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080206/934724b9/attachment.html 

From jaluber at gmx.de  Wed Feb  6 14:29:48 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Wed, 06 Feb 2008 23:29:48 +0100
Subject: [antlr-interest] Trying to parsing CFML (ColdFusion)
In-Reply-To: <5C5A62059F1B8F4AB33B1B0C23B9670603282BF8@gshqxc01.globalspec.net>
References: <5C5A62059F1B8F4AB33B1B0C23B9670603282BF8@gshqxc01.globalspec.net>
Message-ID: <47AA34DC.8030802@gmx.de>

Gaulin, Mark schrieb:
> Is this grammar (& lexer) possible with ANTLR?  For someone new to it?  
> It started to feel like this is a case of an "island grammar", but even 
> attempting to parse a "simple" quoted string (that can contain hashes) 
> all by itself is blowing my mind... the lexer is very very context 
> dependent.
>  
> Can anyone offer some advice?  I'm almost tempted to just write the 
> thing in straight java, but that feels lame (and tedious).

This looks like that you need at least to control the lexer from the 
parser. That isn't possible in ANTLR yet, but doable to add it yourself. 
I suppose that will be less work than to write a parser yourself.

Johannes

From troy.daniels at baesystems.com  Wed Feb  6 14:30:39 2008
From: troy.daniels at baesystems.com (Daniels, Troy (US SSA))
Date: Wed, 6 Feb 2008 17:30:39 -0500
Subject: [antlr-interest] syntactic predicates vs. backtrack=true
References: <f0fcc6820802050441j4481f0bbwa4f92bddebe6e730@mail.gmail.com>	<47A85D88.7030508@gmx.de><f0fcc6820802050551o66eea974p119ed0123799ae9@mail.gmail.com>
	<47A86D41.5010507@gmx.de>
Message-ID: <40CBD611A793EA438464B91E749DD8B0039BA51C@blums0017.bluelnk.net>

 

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org 
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Johannes Luber
> Sent: Tuesday, February 05, 2008 9:06 AM
> To: Mark Volkmann
> Cc: antlr-interest
> Subject: Re: [antlr-interest] syntactic predicates vs. backtrack=true
> 
> Mark Volkmann schrieb:
> > Thanks! I learned some new things by reading that. I'm 
> still a little 
> > confused though. In section 12.2 of the book (page 300 in 
> my copy) it
> > says:
> > 
> > "ANTLR also supports an auto-backtracking feature whereby ANTLR 
> > inserts syntactic predicates on the left edge of every alternative."
> > 
> > So it seems to me that these rules are equivalent in both 
> behavior and 
> > performance.
> > 
> > foo
> > options { backtrack = true; }
> >   : option1
> >   | option2
> >   | option3
> >   ;
> > 
> > foo
> >   : (option1)=> option1
> >   | (option2)=> option2
> >   | option3
> >   ;
> > 
> > If this is true then I think I prefer using backtrack 
> because it adds 
> > less clutter to the rule.
> > 
> 
> I'm not sure if that is the only tradeoff here, but Ter can 
> answer this better than I can here.
> 

Once advantage is that you can make an explicit syntactic predicate
terminate much quicker to evaluate than the full expression.  Consider a
rule for a java language parser that matches where you actually begin to
define a class or interface.  A plausible way to write this is

classOrInterfaceWithPredicate
	: (classModifier* CLASS) => classDefinition
	| (classModifier* INTERFACE) => interfaceDefinition
	;

classOrInterfaceWithBacktracking { backtrack = true; }
	: classDefinition
	| interfaceDefinition
	;

With backtracking, it would parse the entire class (possibly thousands
of symbols), then determine that it was a class and redo the parse with
actions enabled.  With an explicit predicate, once if finds the "class"
token (almost certainly in the first 5 tokens), it knows that this will
match a class and can restart immediately.

Troy

> Johannes
> 

From jpen054 at ec.auckland.ac.nz  Wed Feb  6 23:59:55 2008
From: jpen054 at ec.auckland.ac.nz (Jamie Penney)
Date: Thu, 07 Feb 2008 20:59:55 +1300
Subject: [antlr-interest] ANTLRWorks freezing
Message-ID: <47AABA7B.8080303@ec.auckland.ac.nz>

Hi Team,

I am having an issue where ANTLRWorks will lock up when attempting to 
open or save a project. Clicking on the open or save menu items causes 
my CPU usage to jump to 100%, and ANTLRWorks locks up - but still 
repaints the window. It eventually gets around to bringing up the 
open/save dialog. It does not do this on my laptop however. Any ideas as 
to why this is? I have tried increasing the heap size and all of those 
standard java tricks already.

Thanks,
Jamie Penney
-- 
Jamie Penney

http://www.jamiepenney.co.nz

From nelson.ana at gmail.com  Thu Feb  7 00:05:11 2008
From: nelson.ana at gmail.com (Ana Nelson)
Date: Thu, 7 Feb 2008 08:05:11 +0000
Subject: [antlr-interest] gUnit special character escaping
In-Reply-To: <6D02A42C-FAC1-4B04-84E9-6B5AE3617128@mac.com>
References: <a7d6d2740802060937u113cd8dbrd1a51917ff8b393@mail.gmail.com>
	<47A9F952.6010901@inf.tu-dresden.de>
	<6D02A42C-FAC1-4B04-84E9-6B5AE3617128@mac.com>
Message-ID: <a7d6d2740802070005j7af80b12o8b14fe45732b5f83@mail.gmail.com>

Hi Leon & Andreas,

Thanks for the suggestions.

I did try the << >> notation but it didn't seem to work for me. I'll try it
again, I could have just used it incorrectly. I put my string on the 2nd
line so maybe it was complaining about the blank line.

Look forward to the gUnit update.

Thanks! :-)


On 06/02/2008, Leon Su <leon.antlr at mac.com> wrote:
>
> Hi,
>
> gUnit accepts escaped character in its testsuite expressions, but
> there's a bug currently.
> You may try multiple-line expression as Andreas suggested.
> A minor update of gUnit will be release in these days.
> (the bug is also fixed.)
>
> Regards,
>
> Leon
>
> On Feb 6, 2008, at 10:15 AM, Andreas Bartho wrote:
>
> > Hi Ana,
> >
> > have you tried
> >
> > << "ABC DE"
> > >>
> >
> > as described in the wiki?
> >
> > Andreas
> >
> > Ana Nelson wrote:
> >> I'm trying to write gUnit tests for expressions like
> >> "ABC DE"\n
> >> The quotes are part of the expression, so I've been trying to
> >> escape the quotes and newline as follows to include them in
> >> my .testsuite file:
> >> "\"ABC DE\"\n"
> >> But, gUnit doesn't seem to like escaped quotes, or I'm not
> >> escaping them properly. I've tried various alternatives but
> >> haven't found anything that works. I have a clumsy workaround
> >> which is to put the quoted expression "ABC DE" into an external
> >> text file.
> >> If anyone knows the correct way of escaping quotes (and newlines)
> >> in gUnit, or if someone can tell me that it's not possible, I
> >> would appreciate it. I've looked in the gunit.jar source and see
> >> references to escaped quotes in the parser grammar but can't
> >> manage to work that back into how to write them.
> >> Many thanks! :-)
> >> Ana
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080207/b04b750f/attachment.html 

From discontinuum at gmail.com  Thu Feb  7 00:32:56 2008
From: discontinuum at gmail.com (Erik Kratochvil)
Date: Thu, 7 Feb 2008 09:32:56 +0100
Subject: [antlr-interest] Grammar.createLookaheadDFA(): could not even
	do k=1 for decision 45; 
In-Reply-To: <L5B09D4A04EB44325A01633378E973DEA.1202315499.scalix.temporal-wave.com*@MHS>
References: <f4dc39b90802060025j2ce71768v14e88414d9a71463@mail.gmail.com>
	<L5B09D4A04EB44325A01633378E973DEA.1202315499.scalix.temporal-wave.com*@MHS>
Message-ID: <f4dc39b90802070032l32fc8cf1s6b53a6ca0e990cd4@mail.gmail.com>

Indeed, writing the grammar from scratch would be the best solution :)

The enormous size of parser was caused by huge number of syntactic
predicates (or backtrack=true) toghether with k = *. In most rules,
left-factoring, reducing the number of predicates, and reducing the
lookahead to 2 fixed the problem with the createLookaheadDFA(). After
that, the size of parser was back to 2.6M with k=2 and 3.0M with k=*.

Thank you for your advice, I've found it most helpful.


On 2/6/08, Jim Idle <jimi at temporal-wave.com> wrote:
> You may well find that rather than using the existing grammar as your
> guide, it is easier to start with a blank screen and build up to the
> full grammar using 3.x constructs. As you add new productions, you will
> be able to see which of them are causing ambiguities and diagnose them
> as either grammar problems which you can refactor, or real language
> ambiguities which require a little more ingenuity.

-- 
Erik Kratochv?l

From nelson.ana at gmail.com  Thu Feb  7 02:05:43 2008
From: nelson.ana at gmail.com (Ana Nelson)
Date: Thu, 7 Feb 2008 10:05:43 +0000
Subject: [antlr-interest] gUnit special character escaping
In-Reply-To: <6D02A42C-FAC1-4B04-84E9-6B5AE3617128@mac.com>
References: <a7d6d2740802060937u113cd8dbrd1a51917ff8b393@mail.gmail.com>
	<47A9F952.6010901@inf.tu-dresden.de>
	<6D02A42C-FAC1-4B04-84E9-6B5AE3617128@mac.com>
Message-ID: <a7d6d2740802070205h4a3cd806u2ba00a3ac37c01b6@mail.gmail.com>

Following Andreas' example I got the multi-line expressions to work. I had
originally tried

<<
"ABC DE"
>>

rather than

<< "ABC DE"
>>

and was getting an error since I was testing a "line" rule which only
expected a single newline character but was getting 2.

I added a note about this on the gUnit Wiki page in SimpleC.testsuite.



On 06/02/2008, Leon Su <leon.antlr at mac.com> wrote:
>
> Hi,
>
> gUnit accepts escaped character in its testsuite expressions, but
> there's a bug currently.
> You may try multiple-line expression as Andreas suggested.
> A minor update of gUnit will be release in these days.
> (the bug is also fixed.)
>
> Regards,
>
> Leon
>
> On Feb 6, 2008, at 10:15 AM, Andreas Bartho wrote:
>
> > Hi Ana,
> >
> > have you tried
> >
> > << "ABC DE"
> > >>
> >
> > as described in the wiki?
> >
> > Andreas
> >
> > Ana Nelson wrote:
> >> I'm trying to write gUnit tests for expressions like
> >> "ABC DE"\n
> >> The quotes are part of the expression, so I've been trying to
> >> escape the quotes and newline as follows to include them in
> >> my .testsuite file:
> >> "\"ABC DE\"\n"
> >> But, gUnit doesn't seem to like escaped quotes, or I'm not
> >> escaping them properly. I've tried various alternatives but
> >> haven't found anything that works. I have a clumsy workaround
> >> which is to put the quoted expression "ABC DE" into an external
> >> text file.
> >> If anyone knows the correct way of escaping quotes (and newlines)
> >> in gUnit, or if someone can tell me that it's not possible, I
> >> would appreciate it. I've looked in the gunit.jar source and see
> >> references to escaped quotes in the parser grammar but can't
> >> manage to work that back into how to write them.
> >> Many thanks! :-)
> >> Ana
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080207/8e347e14/attachment.html 

From peter.bulychev at gmail.com  Thu Feb  7 02:38:35 2008
From: peter.bulychev at gmail.com (Peter Bulychev)
Date: Thu, 7 Feb 2008 12:38:35 +0200
Subject: [antlr-interest] real-life programs
Message-ID: <ef5132890802070238r30990f5ft85e2572bd422c62f@mail.gmail.com>

Hello.

Thank for answering my previous question. I want to reformulate it more
generally now. Of course, I can get the answers on some points by myself,
but if you answer me, it will  save my time great and maybe it will be
useful to somebody else in future.


   1. Is ANTRL suitable to parse real-life programs? For instance, is it
   possible to write a grammar, using which I will be able to parse all C#
   projects from SourceForge? I agree with fact of missing some details such as
   preprocessing directives but I want all files to be parsed. Maybe, the
   grammar should be less strict than the programming language.
   2. Can I modify this grammar to generate AST representations of
   real-life programs?
   3. Is it possible to work with scopes of variables? I want to "glue
   together" all leaves with the same variable.


Thank you.

-- 
Best regards,
   Peter Bulychev.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080207/eda6320b/attachment.html 

From jaluber at gmx.de  Thu Feb  7 03:46:03 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Thu, 07 Feb 2008 12:46:03 +0100
Subject: [antlr-interest] real-life programs
In-Reply-To: <ef5132890802070238r30990f5ft85e2572bd422c62f@mail.gmail.com>
References: <ef5132890802070238r30990f5ft85e2572bd422c62f@mail.gmail.com>
Message-ID: <47AAEF7B.9010902@gmx.de>

Peter Bulychev schrieb:
> Hello.
> 
> Thank for answering my previous question. I want to reformulate it more 
> generally now. Of course, I can get the answers on some points by 
> myself, but if you answer me, it will  save my time great and maybe it 
> will be useful to somebody else in future.
> 
>    1. Is ANTRL suitable to parse real-life programs? For instance, is it
>       possible to write a grammar, using which I will be able to parse
>       all C# projects from SourceForge? I agree with fact of missing
>       some details such as preprocessing directives but I want all files
>       to be parsed. Maybe, the grammar should be less strict than the
>       programming language.

Yes, I'm working on a C# grammar myself, so I can say that it is 
possible to parse C#. The only exception is a corner case of the C# 
preprocessor, but the likelyhood of appearing is small, as it can't be 
really abused (although one should check if the corner case actually 
appeared and tell the programmer to rewrite it).

#ifdef A
/*
#else
*/
#endif

showcases the problem.

>    2. Can I modify this grammar to generate AST representations of
>       real-life programs?

Yes.

>    3. Is it possible to work with scopes of variables?

Yes.

> I want to "glue
>       together" all leaves with the same variable.

You want to turn the tree into a graph then? Not sure if you have to do 
it that way. I suppose putting the same reference into the leaves will 
suffice and you don't lose information about the original position of 
the token.

Johannes

From spoulson3 at yahoo.com  Thu Feb  7 05:19:20 2008
From: spoulson3 at yahoo.com (Shawn Poulson)
Date: Thu, 7 Feb 2008 05:19:20 -0800 (PST)
Subject: [antlr-interest] Grammar handling of whitespaces
Message-ID: <705205.4361.qm@web30603.mail.mud.yahoo.com>

Hello all,

I've had success so far with generating my grammar for my C# target,
with help from several individuals here.  One of the tips I've used is
to use a lexer rule to skip whitespaces using a rule like:

WS : (' '|'\r'|'\t'|'\n') { $channel=HIDDEN; }

This is very helpful for most parser rules, so I don't have to
explicitly put whitespaces throughout my parser rules.  But, there are
times where I don't want whitespaces between certain elements.  Is
there a way to handle this?

Thanks.

---
Shawn Poulson
spoulson at explodingcoder.com

From discontinuum at gmail.com  Thu Feb  7 05:54:17 2008
From: discontinuum at gmail.com (Erik Kratochvil)
Date: Thu, 7 Feb 2008 14:54:17 +0100
Subject: [antlr-interest] Grammar handling of whitespaces
In-Reply-To: <705205.4361.qm@web30603.mail.mud.yahoo.com>
References: <705205.4361.qm@web30603.mail.mud.yahoo.com>
Message-ID: <f4dc39b90802070554h3750c264r5337c83f620e9cd3@mail.gmail.com>

Could you provide an example?

On 2/7/08, Shawn Poulson <spoulson3 at yahoo.com> wrote:
> Hello all,
>
> I've had success so far with generating my grammar for my C# target,
> with help from several individuals here.  One of the tips I've used is
> to use a lexer rule to skip whitespaces using a rule like:
>
> WS : (' '|'\r'|'\t'|'\n') { $channel=HIDDEN; }
>
> This is very helpful for most parser rules, so I don't have to
> explicitly put whitespaces throughout my parser rules.  But, there are
> times where I don't want whitespaces between certain elements.  Is
> there a way to handle this?
>
> Thanks.
>
> ---
> Shawn Poulson
> spoulson at explodingcoder.com
>


-- 
Erik Kratochv?l

From jaluber at gmx.de  Thu Feb  7 06:20:07 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Thu, 07 Feb 2008 15:20:07 +0100
Subject: [antlr-interest] Grammar handling of whitespaces
In-Reply-To: <705205.4361.qm@web30603.mail.mud.yahoo.com>
References: <705205.4361.qm@web30603.mail.mud.yahoo.com>
Message-ID: <47AB1397.1040503@gmx.de>

Shawn Poulson schrieb:
> Hello all,
> 
> I've had success so far with generating my grammar for my C# target,
> with help from several individuals here.  One of the tips I've used is
> to use a lexer rule to skip whitespaces using a rule like:
> 
> WS : (' '|'\r'|'\t'|'\n') { $channel=HIDDEN; }
> 
> This is very helpful for most parser rules, so I don't have to
> explicitly put whitespaces throughout my parser rules.  But, there are
> times where I don't want whitespaces between certain elements.  Is
> there a way to handle this?

Untested yet, but this should work:

arrow
	:	first=ASSIGNMENT second=GT {$first.index + 1 == $second.index}? // 
Nothing between the tokens?
	;

Johannes

From discontinuum at gmail.com  Thu Feb  7 06:22:28 2008
From: discontinuum at gmail.com (Erik Kratochvil)
Date: Thu, 7 Feb 2008 15:22:28 +0100
Subject: [antlr-interest] Grammar handling of whitespaces
In-Reply-To: <47AB1397.1040503@gmx.de>
References: <705205.4361.qm@web30603.mail.mud.yahoo.com>
	<47AB1397.1040503@gmx.de>
Message-ID: <f4dc39b90802070622w330a794dgf50aa0feed71882c@mail.gmail.com>

Aha.

First, make a new lexer lexer rule
ARROW : '=>';
and then use it in the parser rule arrow
arrow : ARROW ...whatever here...;

Does this solve your problem?


On 2/7/08, Johannes Luber <jaluber at gmx.de> wrote:
> Shawn Poulson schrieb:
> > Hello all,
> >
> > I've had success so far with generating my grammar for my C# target,
> > with help from several individuals here.  One of the tips I've used is
> > to use a lexer rule to skip whitespaces using a rule like:
> >
> > WS : (' '|'\r'|'\t'|'\n') { $channel=HIDDEN; }
> >
> > This is very helpful for most parser rules, so I don't have to
> > explicitly put whitespaces throughout my parser rules.  But, there are
> > times where I don't want whitespaces between certain elements.  Is
> > there a way to handle this?
>
> Untested yet, but this should work:
>
> arrow
>         :       first=ASSIGNMENT second=GT {$first.index + 1 == $second.index}? //
> Nothing between the tokens?
>         ;
>
> Johannes
>


-- 
Erik Kratochv?l

From tbrandonau at gmail.com  Thu Feb  7 07:10:44 2008
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Fri, 8 Feb 2008 02:10:44 +1100
Subject: [antlr-interest] grammars with AST support
In-Reply-To: <ef5132890802061221l7a72360ey5cf3bd37f0b64acd@mail.gmail.com>
References: <ef5132890802061221l7a72360ey5cf3bd37f0b64acd@mail.gmail.com>
Message-ID: <ebc876d70802070710y59c58a72x2c44c4ae1b0c1a7a@mail.gmail.com>

On Feb 7, 2008 7:21 AM, Peter Bulychev <peter.bulychev at gmail.com> wrote:

> Hello.
>
> I perform research on static analysis and my tool takes on input AST
> representation of programs.
> I want to use ANTRL to produce ASTs for different programming languages
> (C, C++, C#, Java, Python, ...).
> Where can I get grammars which can produce AST?
>
> I have searched http://www.antlr.org/grammar/list, but there are no
> AST-featured grammars, which supports this ability.
>
Search the list I think grammars for all the languages you mention, though
not necessarily with ASTs.
There were some people working on AST producing grammars for Java, search
the list. Or see Johannes for C#. There has been some talk about converting
the ANTLR 2.7 GCC grammar to v3 but don't know that went anywhere. There is
a C grammar for V3 in the examples but I don't know how well tested it is
and from memory it doesn't produce an AST. Unsure about Python though I
think one of the Python implementations may use ANTLR, came up on the list
recently.
It is possible in ANTLR but depending on your needs it could be a rather
difficult task. Writing the parser for a compiler say, while certainly
possible in ANTLR, is a very large task. Handling program errors in a
sensible way is a quite difficult. If you don't need to handle errors
particularly sensibly then the task is easier but still a big undertaking.
It also depends on the language. C# and Java are (for the most part) fairly
clean languages to parse. C\C++ are rather more tricky. Not sure about
Python.
Depending on the details of your project you may be better looking at
alternate solutions. e.g. CodeDOM for .NET, Java Compiler API, GCC's -fdump
for C\C++, one of the Python implementations. Building and maintaining a
language front-end is no small task, ANTLR makes it quite easy to do the
basic parsing but there's a lot more to it than that, depending on the exact
needs.

Tom.

>
> --
> Best regards,
>    Peter Bulychev.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080208/db6064c8/attachment.html 

From jaluber at gmx.de  Thu Feb  7 07:20:32 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Thu, 07 Feb 2008 16:20:32 +0100
Subject: [antlr-interest] Grammar handling of whitespaces
In-Reply-To: <f4dc39b90802070622w330a794dgf50aa0feed71882c@mail.gmail.com>
References: <705205.4361.qm@web30603.mail.mud.yahoo.com>	
	<47AB1397.1040503@gmx.de>
	<f4dc39b90802070622w330a794dgf50aa0feed71882c@mail.gmail.com>
Message-ID: <47AB21C0.9090105@gmx.de>

Erik Kratochvil schrieb:
> Aha.
> 
> First, make a new lexer lexer rule
> ARROW : '=>';
> and then use it in the parser rule arrow
> arrow : ARROW ...whatever here...;
> 
> Does this solve your problem?

Well, the way he asks, he doesn't want to create a lexer rule for these 
special situations. So your approach is probably the wrong one.

Johannes
> 
> On 2/7/08, Johannes Luber <jaluber at gmx.de> wrote:
>> Shawn Poulson schrieb:
>>> Hello all,
>>>
>>> I've had success so far with generating my grammar for my C# target,
>>> with help from several individuals here.  One of the tips I've used is
>>> to use a lexer rule to skip whitespaces using a rule like:
>>>
>>> WS : (' '|'\r'|'\t'|'\n') { $channel=HIDDEN; }
>>>
>>> This is very helpful for most parser rules, so I don't have to
>>> explicitly put whitespaces throughout my parser rules.  But, there are
>>> times where I don't want whitespaces between certain elements.  Is
>>> there a way to handle this?
>> Untested yet, but this should work:
>>
>> arrow
>>         :       first=ASSIGNMENT second=GT {$first.index + 1 == $second.index}? //
>> Nothing between the tokens?
>>         ;
>>
>> Johannes
>>
> 
> 


From jimi at temporal-wave.com  Thu Feb  7 06:53:01 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 7 Feb 2008 06:53:01 -0800
Subject: [antlr-interest] real-life programs
In-Reply-To: <ef5132890802070238r30990f5ft85e2572bd422c62f@mail.gmail.com>
Message-ID: <"L281AD21A4E614b0199A9110299A6BB82.1202395988.scalix.temporal-wave.com*"@MHS>

Peter,

 

 

In answer to 1) I have a commercial version of a C# parser built to
ECMA-334 4th edition that will soon be available. This does all the
pre-processing (in the lexer as per the spec), supports generics and
everything else as per the spec ? there are no omissions. I am currently
completing the tree grammar and then it will be ready for release with
the Java target, after which C and C# targets will follow. I am not
suggesting that you would have to buy this from me, just pointing out
that building commercial grade parsers is eminently possible right now.
I also have parsers for other languages working in released products at
various companies (mostly the C target). There are sometimes a few
issues to deal with, but no show stopping problems.

 

In answer to 2, I have obviously done so with the C# parser and also
with query languages and so on. There is nothing stopping you but your
own time and ingenuity ;-)

 

In answer to 3, ANTLR does support scopes in the grammar, and they can
be useful for symbol tables or level tracking variables and so on.
However, I am not sure exactly what your requirement is of course J. For
C#, you really need to build a symbol handler and handle symbols and
semantics in multiple passes. Scopes can make it easier to see which
level you are at and therefore which symbol table and so on, but there
are other approaches of course.

 

Jim

 

From: Peter Bulychev [mailto:peter.bulychev at gmail.com] 
Sent: Thursday, February 07, 2008 2:39 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] real-life programs

 

Hello.

Thank for answering my previous question. I want to reformulate it more
generally now. Of course, I can get the answers on some points by
myself, but if you answer me, it will  save my time great and maybe it
will be useful to somebody else in future.

1. Is ANTRL suitable to parse real-life programs? For instance, is it
   possible to write a grammar, using which I will be able to parse all
   C# projects from SourceForge? I agree with fact of missing some
   details such as preprocessing directives but I want all files to be
   parsed. Maybe, the grammar should be less strict than the programming
   language.
2. Can I modify this grammar to generate AST representations of
   real-life programs? 
3. Is it possible to work with scopes of variables? I want to "glue
   together" all leaves with the same variable.


Thank you.

-- 
Best regards,
   Peter Bulychev. 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080207/98ac0ca7/attachment.html 

From tbrandonau at gmail.com  Thu Feb  7 07:17:57 2008
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Fri, 8 Feb 2008 02:17:57 +1100
Subject: [antlr-interest] grammars with AST support
In-Reply-To: <ebc876d70802070710y59c58a72x2c44c4ae1b0c1a7a@mail.gmail.com>
References: <ef5132890802061221l7a72360ey5cf3bd37f0b64acd@mail.gmail.com>
	<ebc876d70802070710y59c58a72x2c44c4ae1b0c1a7a@mail.gmail.com>
Message-ID: <ebc876d70802070717m52979e97w3356bd30edc93085@mail.gmail.com>

Oops, hit send a little early, couple of corrections.

On Feb 8, 2008 2:10 AM, Thomas Brandon <tbrandonau at gmail.com> wrote:

> On Feb 7, 2008 7:21 AM, Peter Bulychev <peter.bulychev at gmail.com> wrote:
>
> > Hello.
> >
> > I perform research on static analysis and my tool takes on input AST
> > representation of programs.
> > I want to use ANTRL to produce ASTs for different programming languages
> > (C, C++, C#, Java, Python, ...).
> > Where can I get grammars which can produce AST?
> >
> > I have searched http://www.antlr.org/grammar/list, but there are no
> > AST-featured grammars, which supports this ability.
>
> Search the mailing list I think grammars for all the languages you
mention, except C++, have been discussed, though not necessarily with ASTs.

> There were some people working on AST producing grammars for Java, search
> the list. Or see Johannes for C#.
>
There has been some talk about converting the ANTLR 2.7 Gnu C grammar to v3
but don't know that went anywhere. And I don't know it does an AST either.

> There is a C grammar for V3 in the examples but I don't know how well
> tested it is and from memory it doesn't produce an AST. Unsure about Python
> though I think one of the Python implementations may use ANTLR, came up on
> the list recently.
> It is possible in ANTLR but depending on your needs it could be a rather
> difficult task. Writing the parser for a compiler say, while certainly
> possible in ANTLR, is a very large task. Handling program errors in a
> sensible way is a quite difficult. If you don't need to handle errors
> particularly sensibly then the task is easier but still a big undertaking.
> It also depends on the language. C# and Java are (for the most part)
> fairly clean languages to parse. C\C++ are rather more tricky. Not sure
> about Python.
> Depending on the details of your project you may be better looking at
> alternate solutions. e.g. CodeDOM for .NET, Java Compiler API, GCC's
> -fdump for C\C++, one of the Python implementations. Building and
> maintaining a language front-end is no small task, ANTLR makes it quite easy
> to do the basic parsing but there's a lot more to it than that, depending on
> the exact needs.
>
> Tom.
>
> >
> > --
> > Best regards,
> >    Peter Bulychev.
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080208/2888a8f0/attachment.html 

From jimi at temporal-wave.com  Thu Feb  7 06:57:49 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 7 Feb 2008 06:57:49 -0800
Subject: [antlr-interest] real-life programs
In-Reply-To: <47AAEF7B.9010902@gmx.de>
Message-ID: <"L8D498176254D41a48796613442DA3603.1202396276.scalix.temporal-wave.com*"@MHS>

> -----Original Message-----
> From: Johannes Luber [mailto:jaluber at gmx.de]
 
> Yes, I'm working on a C# grammar myself, so I can say that it is
> possible to parse C#. The only exception is a corner case of the C#
> preprocessor, but the likelyhood of appearing is small, as it can't be
> really abused (although one should check if the corner case actually
> appeared and tell the programmer to rewrite it).
> 
> #ifdef A
> /*
> #else
> */
> #endif
> 
> showcases the problem.

This is not actually an issue. It just needs careful consideration in 
the lexer, which is where the pre-processing must be performed, not in 
the parser. Getting this right has nothing to do with ANTLR per se ;-)

It actually points out though that sometimes you must step away from 
trying to get a grammar to do something that seems difficult or 
impossible. If it does, then there is a good chance that you are missing 
something about the implementation. While the way some other tools such 
as yacc and lex work can guide implementations to different solutions 
than ANTLR does, in general WHERE things are implemented cannot really 
be changed. Hence the C# pre-processor must be implemented in the lexer 
(though a separate pre-processing grammar could also do it with extra 
overhead).

Jim



From cieslewski at hcs.ufl.edu  Thu Feb  7 07:28:06 2008
From: cieslewski at hcs.ufl.edu (Grzegorz Cieslewski)
Date: Thu, 7 Feb 2008 10:28:06 -0500
Subject: [antlr-interest] Tree Rewriting problem -
	RewriteEmptyStreamException at runtime
In-Reply-To: <47AAF531.4090002@mtu.net>
References: <7aa837f80802050749h440945bs989df8f764555e76@mail.gmail.com>
	<47AAF531.4090002@mtu.net>
Message-ID: <7aa837f80802070728n478e83aep9b3d14e6e60f734a@mail.gmail.com>

My mistake,  I have been experimenting with more complex grammar and
accidentally pasted that error.
The error I am getting in the grammar attached it

Exception in thread "main"
org.antlr.runtime.tree.RewriteEmptyStreamException: rule type
        at org.antlr.runtime.tree.RewriteRuleElementStream._next(RewriteRuleElementStream.java:158)
        at org.antlr.runtime.tree.RewriteRuleElementStream.nextTree(RewriteRuleElementStream.java:145)
        at TP.a(TP.java:125)
        at Main.main(Main.java:37)

I am working on a c parser (and more), I used the ANSI C grammar by
Terence that is on the website as a start point.
In that grammar he has a rule called type specifiers which looks like:

type_specifier
	: 'void'
	| 'char'
	| 'short'
	| 'int'
	| 'long'
	| 'float'
	| 'double'
	| 'signed'
	| 'unsigned'
	| struct_or_union_specifier
	| enum_specifier
	| type_id
	;

He does not defines them as tokens either.  I guess I am just little
confused about which way is the correct way?



On Feb 7, 2008 7:10 AM, Jon Schewe <jpschewe at mtu.net> wrote:
> I typically don't do rewrites in my tree grammar, but in my parser.  So
> that might be a problem.  The other thing that I've noticed helps with
> these errors is to make sure to define tokens for all elements.  So
> 'int' and 'char' should be defined in your lexer as tokens and then
> reference the tokens in your parser and tree grammar.
>
> It also seems that the exception doesn't match your grammar.  The errors
> simpleCrw.declaration and simpleCrw.file suggest to me that you have a
> grammar named simpleCrw with rules declaration and file and that's where
> the error is.  However those rules don't exist in the file you sent.
>
>
> Grzegorz Cieslewski wrote:
> > I am using the 3.1b1 version of antlr so I could do some tree
> > rewriting.  I found a good set of examples in the
> > TestTreeGrammarRewriteAST.java file and decided to start
> > experimenting.  Unfortunately I have run in to a problem with my
> > program throwing an exception.
> > My Grammar is:
> > grammar T;
> > options {output=AST;}
> > tokens
> > {
> >       EXPR;
> > }
> > a : type ID INT -> ^(EXPR type ID INT);
> > type  :       'int'
> >       |       'char';
> > ID : 'a'..'z'+ ;
> > INT : '0'..'9'+;
> > WS : (' '|'\n') {$channel=HIDDEN;} ;
> >
> > and the tree grammar:
> >
> > tree grammar TP;
> > options {
> >       output=AST;
> >       ASTLabelType=CommonTree;
> >       tokenVocab=T;}
> >
> > a     : ^(EXPR type ID INT) -> ^(EXPR type INT ID)
> >       ;
> >
> > type  :       'int'
> >       |       'char';
> >
> > f
> > Everything compiles but I get following error during runtime (with
> > input "int abc 123"):
> >
> > Exception in thread "main"
> > org.antlr.runtime.tree.RewriteEmptyStreamException: rule type
> >         at org.antlr.runtime.tree.RewriteRuleElementStream._next(RewriteRuleElementStream.java:158)
> >         at org.antlr.runtime.tree.RewriteRuleElementStream.nextTree(RewriteRuleElementStream.java:145)
> >         at simpleCrw.declaration(simpleCrw.java:182)
> >         at simpleCrw.file(simpleCrw.java:92)
> >         at Main2.main(Main2.java:41)
> >
> > I have noticed that if I change the rule type in the tree grammar as
> > follows the problem does not occur:
> >
> > tree grammar TP;
> > options {
> >       output=AST;
> >       ASTLabelType=CommonTree;
> >       tokenVocab=T;}
> >
> > a     : ^(EXPR type ID INT) -> ^(EXPR type INT ID)
> >       ;
> >
> > type  :       'int';
> >
> > I have tracked this a little further.  When I remove the rewrite rule
> > from the tree grammar :
> >
> > tree grammar TP;
> > options {
> >       output=AST;
> >       ASTLabelType=CommonTree;
> >       tokenVocab=T;}
> >
> > a     : ^(EXPR type ID INT)
> >       ;
> >
> > type  :       'int'
> >       |       'char';
> >
> > The output tree I get after the LexerParser is
> > EXPR
> > |-int
> > |-abc
> > |-123
> >
> > but after the tree grammar I get the tree missing the int node
> > EXPR
> > |-abc
> > |-123
> >
> > Does any one have any idea as to what is going on?
> >
> > P.S. I attached my whole setup
> >
> >
> >
>
> --
> Jon Schewe | http://mtu.net/~jpschewe
> If you see an attachment named signature.asc, this is my digital
> signature.
> See http://www.gnupg.org for more information.
>
> For I am convinced that neither death nor life, neither angels
> nor demons, neither the present nor the future, nor any
> powers, neither height nor depth, nor anything else in all
> creation, will be able to separate us from the love of God that
> is in Christ Jesus our Lord. - Romans 8:38-39
>
>



-- 
=====================================================
Grzegorz Cieslewski
Research Assistant
High-performance Computing & Simulation (HCS) Research Laboratory
University of Florida, Dept. of Electrical and Computer Engineering
330 Benton Hall, Gainesville, FL, 32611-6200
Phone: (352) 392-9041
Email: cieslewski at hcs.ufl.edu
Web: www.hcs.ufl.edu
=====================================================

From mgaulin at globalspec.com  Thu Feb  7 07:43:29 2008
From: mgaulin at globalspec.com (Gaulin, Mark)
Date: Thu, 7 Feb 2008 10:43:29 -0500
Subject: [antlr-interest] Trying to parsing CFML (ColdFusion)
In-Reply-To: <47AA34DC.8030802@gmx.de>
References: <5C5A62059F1B8F4AB33B1B0C23B9670603282BF8@gshqxc01.globalspec.net>
	<47AA34DC.8030802@gmx.de>
Message-ID: <5C5A62059F1B8F4AB33B1B0C23B9670603282D54@gshqxc01.globalspec.net>

Hi
Thanks for the feedback.  I wonder if I should handle this in multiple
passes (with different parsers)... In one pass I could extract the
relatively easy-to-spot tag-based elements, and in this simple pass just
grab all of the text between two tags and store it as a property (or
subelement) of the parent element.

Sample input:

Html here 1
<cfif ...>
	html here 2
<cfelse>
	html here 3
</cfif>
Html here 4

The goal would be to tokenize everything between the tags into a single
"content" (aka html) token.  This limits the harder problem of
tokenizing expressions to the "attributes" in the cftags (the "..." in
the cfif).  Parsing the html can be done by a separate parser later.

This makes the tokenizer stateful, but there are only two states:
looking for a cftag start or looking for a cftag end.

Does this make sense?  

Thanks
	Mark

-----Original Message-----
From: Johannes Luber [mailto:jaluber at gmx.de] 
Sent: Wednesday, February 06, 2008 5:30 PM
To: Gaulin, Mark
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Trying to parsing CFML (ColdFusion)

Gaulin, Mark schrieb:
> Is this grammar (& lexer) possible with ANTLR?  For someone new to it?

> It started to feel like this is a case of an "island grammar", but 
> even attempting to parse a "simple" quoted string (that can contain 
> hashes) all by itself is blowing my mind... the lexer is very very 
> context dependent.
>  
> Can anyone offer some advice?  I'm almost tempted to just write the 
> thing in straight java, but that feels lame (and tedious).

This looks like that you need at least to control the lexer from the
parser. That isn't possible in ANTLR yet, but doable to add it yourself.

I suppose that will be less work than to write a parser yourself.

Johannes

From jpschewe at mtu.net  Thu Feb  7 07:50:37 2008
From: jpschewe at mtu.net (Jon Schewe)
Date: Thu, 07 Feb 2008 09:50:37 -0600
Subject: [antlr-interest] Tree Rewriting problem -
 RewriteEmptyStreamException at runtime
In-Reply-To: <7aa837f80802070728n478e83aep9b3d14e6e60f734a@mail.gmail.com>
References: <7aa837f80802050749h440945bs989df8f764555e76@mail.gmail.com>	
	<47AAF531.4090002@mtu.net>
	<7aa837f80802070728n478e83aep9b3d14e6e60f734a@mail.gmail.com>
Message-ID: <47AB28CD.4060200@mtu.net>

I don't know if one is more correct than the other.  I've just found
that it seems to work better to have everything defined as tokens. 

As far as the exception goes, I'm not sure, other than not doing the
rewrite in the tree grammar.  Is there any reason you can't do this in
the parser?

Grzegorz Cieslewski wrote:
> My mistake,  I have been experimenting with more complex grammar and
> accidentally pasted that error.
> The error I am getting in the grammar attached it
>
> Exception in thread "main"
> org.antlr.runtime.tree.RewriteEmptyStreamException: rule type
>         at org.antlr.runtime.tree.RewriteRuleElementStream._next(RewriteRuleElementStream.java:158)
>         at org.antlr.runtime.tree.RewriteRuleElementStream.nextTree(RewriteRuleElementStream.java:145)
>         at TP.a(TP.java:125)
>         at Main.main(Main.java:37)
>
> I am working on a c parser (and more), I used the ANSI C grammar by
> Terence that is on the website as a start point.
> In that grammar he has a rule called type specifiers which looks like:
>
> type_specifier
> 	: 'void'
> 	| 'char'
> 	| 'short'
> 	| 'int'
> 	| 'long'
> 	| 'float'
> 	| 'double'
> 	| 'signed'
> 	| 'unsigned'
> 	| struct_or_union_specifier
> 	| enum_specifier
> 	| type_id
> 	;
>
> He does not defines them as tokens either.  I guess I am just little
> confused about which way is the correct way?
>
>
>
> On Feb 7, 2008 7:10 AM, Jon Schewe <jpschewe at mtu.net> wrote:
>   
>> I typically don't do rewrites in my tree grammar, but in my parser.  So
>> that might be a problem.  The other thing that I've noticed helps with
>> these errors is to make sure to define tokens for all elements.  So
>> 'int' and 'char' should be defined in your lexer as tokens and then
>> reference the tokens in your parser and tree grammar.
>>
>> It also seems that the exception doesn't match your grammar.  The errors
>> simpleCrw.declaration and simpleCrw.file suggest to me that you have a
>> grammar named simpleCrw with rules declaration and file and that's where
>> the error is.  However those rules don't exist in the file you sent.
>>
>>
>> Grzegorz Cieslewski wrote:
>>     
>>> I am using the 3.1b1 version of antlr so I could do some tree
>>> rewriting.  I found a good set of examples in the
>>> TestTreeGrammarRewriteAST.java file and decided to start
>>> experimenting.  Unfortunately I have run in to a problem with my
>>> program throwing an exception.
>>> My Grammar is:
>>> grammar T;
>>> options {output=AST;}
>>> tokens
>>> {
>>>       EXPR;
>>> }
>>> a : type ID INT -> ^(EXPR type ID INT);
>>> type  :       'int'
>>>       |       'char';
>>> ID : 'a'..'z'+ ;
>>> INT : '0'..'9'+;
>>> WS : (' '|'\n') {$channel=HIDDEN;} ;
>>>
>>> and the tree grammar:
>>>
>>> tree grammar TP;
>>> options {
>>>       output=AST;
>>>       ASTLabelType=CommonTree;
>>>       tokenVocab=T;}
>>>
>>> a     : ^(EXPR type ID INT) -> ^(EXPR type INT ID)
>>>       ;
>>>
>>> type  :       'int'
>>>       |       'char';
>>>
>>> f
>>> Everything compiles but I get following error during runtime (with
>>> input "int abc 123"):
>>>
>>> Exception in thread "main"
>>> org.antlr.runtime.tree.RewriteEmptyStreamException: rule type
>>>         at org.antlr.runtime.tree.RewriteRuleElementStream._next(RewriteRuleElementStream.java:158)
>>>         at org.antlr.runtime.tree.RewriteRuleElementStream.nextTree(RewriteRuleElementStream.java:145)
>>>         at simpleCrw.declaration(simpleCrw.java:182)
>>>         at simpleCrw.file(simpleCrw.java:92)
>>>         at Main2.main(Main2.java:41)
>>>
>>> I have noticed that if I change the rule type in the tree grammar as
>>> follows the problem does not occur:
>>>
>>> tree grammar TP;
>>> options {
>>>       output=AST;
>>>       ASTLabelType=CommonTree;
>>>       tokenVocab=T;}
>>>
>>> a     : ^(EXPR type ID INT) -> ^(EXPR type INT ID)
>>>       ;
>>>
>>> type  :       'int';
>>>
>>> I have tracked this a little further.  When I remove the rewrite rule
>>> from the tree grammar :
>>>
>>> tree grammar TP;
>>> options {
>>>       output=AST;
>>>       ASTLabelType=CommonTree;
>>>       tokenVocab=T;}
>>>
>>> a     : ^(EXPR type ID INT)
>>>       ;
>>>
>>> type  :       'int'
>>>       |       'char';
>>>
>>> The output tree I get after the LexerParser is
>>> EXPR
>>> |-int
>>> |-abc
>>> |-123
>>>
>>> but after the tree grammar I get the tree missing the int node
>>> EXPR
>>> |-abc
>>> |-123
>>>
>>> Does any one have any idea as to what is going on?
>>>
>>> P.S. I attached my whole setup
>>>
>>>
>>>
>>>       
>> --
>> Jon Schewe | http://mtu.net/~jpschewe
>> If you see an attachment named signature.asc, this is my digital
>> signature.
>> See http://www.gnupg.org for more information.
>>
>> For I am convinced that neither death nor life, neither angels
>> nor demons, neither the present nor the future, nor any
>> powers, neither height nor depth, nor anything else in all
>> creation, will be able to separate us from the love of God that
>> is in Christ Jesus our Lord. - Romans 8:38-39
>>
>>
>>     
>
>
>
>   

-- 
Jon Schewe | http://mtu.net/~jpschewe
If you see an attachment named signature.asc, this is my digital
signature.
See http://www.gnupg.org for more information.

For I am convinced that neither death nor life, neither angels 
nor demons, neither the present nor the future, nor any 
powers, neither height nor depth, nor anything else in all 
creation, will be able to separate us from the love of God that 
is in Christ Jesus our Lord. - Romans 8:38-39


From cieslewski at hcs.ufl.edu  Thu Feb  7 08:10:28 2008
From: cieslewski at hcs.ufl.edu (Grzegorz Cieslewski)
Date: Thu, 7 Feb 2008 11:10:28 -0500
Subject: [antlr-interest] Tree Rewriting problem -
	RewriteEmptyStreamException at runtime
In-Reply-To: <47AB28CD.4060200@mtu.net>
References: <7aa837f80802050749h440945bs989df8f764555e76@mail.gmail.com>
	<47AAF531.4090002@mtu.net>
	<7aa837f80802070728n478e83aep9b3d14e6e60f734a@mail.gmail.com>
	<47AB28CD.4060200@mtu.net>
Message-ID: <7aa837f80802070810u66da620dkc60e840acdaac386@mail.gmail.com>

I believe that it is possible to do the rewrites I need in the parser
but I wanted a solution that is little more robust.  (I do not know
the full scope of my project yet)

As to the error I explicitly defined  tokens for 'int' and 'char' but
the error still occurs.

grammar T;
options {output=AST;}
tokens
{
	EXPR;
}
a : type ID INT -> ^(EXPR type ID INT);
type	:	TYPE_INT
	|	TYPE_CHAR;
	
TYPE_INT
	:	'int';
TYPE_CHAR
	:	'char';	
ID : 'a'..'z'+ ;
INT : '0'..'9'+;
WS : (' '|'\n') {$channel=HIDDEN;} ;


tree grammar TP;
options {
	output=AST;
	ASTLabelType=CommonTree;
	tokenVocab=T;}
	
	
a	: ^(EXPR type ID INT) -> ^(EXPR type INT ID)
	;

type	:	TYPE_INT
	|	TYPE_CHAR;



On Feb 7, 2008 10:50 AM, Jon Schewe <jpschewe at mtu.net> wrote:
> I don't know if one is more correct than the other.  I've just found
> that it seems to work better to have everything defined as tokens.
>
> As far as the exception goes, I'm not sure, other than not doing the
> rewrite in the tree grammar.  Is there any reason you can't do this in
> the parser?
>
>
> Grzegorz Cieslewski wrote:
> > My mistake,  I have been experimenting with more complex grammar and
> > accidentally pasted that error.
> > The error I am getting in the grammar attached it
> >
> > Exception in thread "main"
> > org.antlr.runtime.tree.RewriteEmptyStreamException: rule type
> >         at org.antlr.runtime.tree.RewriteRuleElementStream._next(RewriteRuleElementStream.java:158)
> >         at org.antlr.runtime.tree.RewriteRuleElementStream.nextTree(RewriteRuleElementStream.java:145)
> >         at TP.a(TP.java:125)
> >         at Main.main(Main.java:37)
> >
> > I am working on a c parser (and more), I used the ANSI C grammar by
> > Terence that is on the website as a start point.
> > In that grammar he has a rule called type specifiers which looks like:
> >
> > type_specifier
> >       : 'void'
> >       | 'char'
> >       | 'short'
> >       | 'int'
> >       | 'long'
> >       | 'float'
> >       | 'double'
> >       | 'signed'
> >       | 'unsigned'
> >       | struct_or_union_specifier
> >       | enum_specifier
> >       | type_id
> >       ;
> >
> > He does not defines them as tokens either.  I guess I am just little
> > confused about which way is the correct way?
> >
> >
> >
> > On Feb 7, 2008 7:10 AM, Jon Schewe <jpschewe at mtu.net> wrote:
> >
> >> I typically don't do rewrites in my tree grammar, but in my parser.  So
> >> that might be a problem.  The other thing that I've noticed helps with
> >> these errors is to make sure to define tokens for all elements.  So
> >> 'int' and 'char' should be defined in your lexer as tokens and then
> >> reference the tokens in your parser and tree grammar.
> >>
> >> It also seems that the exception doesn't match your grammar.  The errors
> >> simpleCrw.declaration and simpleCrw.file suggest to me that you have a
> >> grammar named simpleCrw with rules declaration and file and that's where
> >> the error is.  However those rules don't exist in the file you sent.
> >>
> >>
> >> Grzegorz Cieslewski wrote:
> >>
> >>> I am using the 3.1b1 version of antlr so I could do some tree
> >>> rewriting.  I found a good set of examples in the
> >>> TestTreeGrammarRewriteAST.java file and decided to start
> >>> experimenting.  Unfortunately I have run in to a problem with my
> >>> program throwing an exception.
> >>> My Grammar is:
> >>> grammar T;
> >>> options {output=AST;}
> >>> tokens
> >>> {
> >>>       EXPR;
> >>> }
> >>> a : type ID INT -> ^(EXPR type ID INT);
> >>> type  :       'int'
> >>>       |       'char';
> >>> ID : 'a'..'z'+ ;
> >>> INT : '0'..'9'+;
> >>> WS : (' '|'\n') {$channel=HIDDEN;} ;
> >>>
> >>> and the tree grammar:
> >>>
> >>> tree grammar TP;
> >>> options {
> >>>       output=AST;
> >>>       ASTLabelType=CommonTree;
> >>>       tokenVocab=T;}
> >>>
> >>> a     : ^(EXPR type ID INT) -> ^(EXPR type INT ID)
> >>>       ;
> >>>
> >>> type  :       'int'
> >>>       |       'char';
> >>>
> >>> f
> >>> Everything compiles but I get following error during runtime (with
> >>> input "int abc 123"):
> >>>
> >>> Exception in thread "main"
> >>> org.antlr.runtime.tree.RewriteEmptyStreamException: rule type
> >>>         at org.antlr.runtime.tree.RewriteRuleElementStream._next(RewriteRuleElementStream.java:158)
> >>>         at org.antlr.runtime.tree.RewriteRuleElementStream.nextTree(RewriteRuleElementStream.java:145)
> >>>         at simpleCrw.declaration(simpleCrw.java:182)
> >>>         at simpleCrw.file(simpleCrw.java:92)
> >>>         at Main2.main(Main2.java:41)
> >>>
> >>> I have noticed that if I change the rule type in the tree grammar as
> >>> follows the problem does not occur:
> >>>
> >>> tree grammar TP;
> >>> options {
> >>>       output=AST;
> >>>       ASTLabelType=CommonTree;
> >>>       tokenVocab=T;}
> >>>
> >>> a     : ^(EXPR type ID INT) -> ^(EXPR type INT ID)
> >>>       ;
> >>>
> >>> type  :       'int';
> >>>
> >>> I have tracked this a little further.  When I remove the rewrite rule
> >>> from the tree grammar :
> >>>
> >>> tree grammar TP;
> >>> options {
> >>>       output=AST;
> >>>       ASTLabelType=CommonTree;
> >>>       tokenVocab=T;}
> >>>
> >>> a     : ^(EXPR type ID INT)
> >>>       ;
> >>>
> >>> type  :       'int'
> >>>       |       'char';
> >>>
> >>> The output tree I get after the LexerParser is
> >>> EXPR
> >>> |-int
> >>> |-abc
> >>> |-123
> >>>
> >>> but after the tree grammar I get the tree missing the int node
> >>> EXPR
> >>> |-abc
> >>> |-123
> >>>
> >>> Does any one have any idea as to what is going on?
> >>>
> >>> P.S. I attached my whole setup
> >>>
> >>>
> >>>
> >>>
> >> --
> >> Jon Schewe | http://mtu.net/~jpschewe
> >> If you see an attachment named signature.asc, this is my digital
> >> signature.
> >> See http://www.gnupg.org for more information.
> >>
> >> For I am convinced that neither death nor life, neither angels
> >> nor demons, neither the present nor the future, nor any
> >> powers, neither height nor depth, nor anything else in all
> >> creation, will be able to separate us from the love of God that
> >> is in Christ Jesus our Lord. - Romans 8:38-39
> >>
> >>
> >>
> >
> >
> >
> >
>
> --
> Jon Schewe | http://mtu.net/~jpschewe
> If you see an attachment named signature.asc, this is my digital
> signature.
> See http://www.gnupg.org for more information.
>
> For I am convinced that neither death nor life, neither angels
> nor demons, neither the present nor the future, nor any
> powers, neither height nor depth, nor anything else in all
> creation, will be able to separate us from the love of God that
> is in Christ Jesus our Lord. - Romans 8:38-39
>
>



-- 
=====================================================
Grzegorz Cieslewski
Research Assistant
High-performance Computing & Simulation (HCS) Research Laboratory
University of Florida, Dept. of Electrical and Computer Engineering
330 Benton Hall, Gainesville, FL, 32611-6200
Phone: (352) 392-9041
Email: cieslewski at hcs.ufl.edu
Web: www.hcs.ufl.edu
=====================================================

From jimi at temporal-wave.com  Thu Feb  7 07:59:23 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 7 Feb 2008 07:59:23 -0800
Subject: [antlr-interest] Grammar handling of whitespaces
In-Reply-To: <705205.4361.qm@web30603.mail.mud.yahoo.com>
Message-ID: <"L7311FA8E354B4599BCE7284F831875F5.1202399964.scalix.temporal-wave.com*"@MHS>

Use a semantic (probably gated is what is needed) predicate to look at 
the previous off channel token. If it is a whitespace, then disallow the 
following rule, issue an error or whatever it is you need:

{( (TokenStream)input ).get( input.index()-1 ).getType() != WS }?=> 
optionalrule. The get() call does not skip off channel tokens.

Jim



> -----Original Message-----
> From: Shawn Poulson [mailto:spoulson3 at yahoo.com]
> Sent: Thursday, February 07, 2008 5:19 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Grammar handling of whitespaces
> 
> Hello all,
> 
> I've had success so far with generating my grammar for my C# target,
> with help from several individuals here.  One of the tips I've used is
> to use a lexer rule to skip whitespaces using a rule like:
> 
> WS : (' '|'\r'|'\t'|'\n') { $channel=HIDDEN; }
> 
> This is very helpful for most parser rules, so I don't have to
> explicitly put whitespaces throughout my parser rules.  But, there are
> times where I don't want whitespaces between certain elements.  Is
> there a way to handle this?
> 
> Thanks.
> 
> ---
> Shawn Poulson
> spoulson at explodingcoder.com



From spoulson3 at yahoo.com  Thu Feb  7 08:28:37 2008
From: spoulson3 at yahoo.com (Shawn Poulson)
Date: Thu, 7 Feb 2008 08:28:37 -0800 (PST)
Subject: [antlr-interest] Grammar handling of whitespaces
In-Reply-To: <47AB21C0.9090105@gmx.de>
Message-ID: <175474.61831.qm@web30607.mail.mud.yahoo.com>


--- Johannes Luber <jaluber at gmx.de> wrote:
> Erik Kratochvil schrieb:
> > First, make a new lexer lexer rule
> > ARROW : '=>';
> > and then use it in the parser rule arrow
> > arrow : ARROW ...whatever here...;
> 
> Well, the way he asks, he doesn't want to create a lexer rule for
> these 
> special situations. So your approach is probably the wrong one.

I will try both suggestions shortly, when I'm at my development PC. 
But, since it was asked, here's an example of what I'm trying to do. 
Throughout my grammars I'm working with things like my timespan_p
parsers. (You can tell I've worked with boost::spirit, no?)  The
timespan_p expects the form: "Td.h.m.s.fff", where 'T' is literal and
some of the elements are optional.  e.g. "T30" is 30 seconds, "T15:0"
indicates 15 minutes.

Currently, the parser will accept a whitespace between the 'T' and each
number elements.  e.g. "T 15 : 0" is equivalent to the previous
example.  This is not desired and, to me, considered poor form.

In boost::spirit, they utilize a directive "lexeme_d[]" that surrounds
parser references that are not processed by the skip parser (in this
case, the WS rule), thereby enforcing no whitespace inbetween.  e.g.
"lexeme_d[ 'T' >> int_p >> ':' >> int_p ]" is valid in spirit.  Maybe
ANTLR could use an equivalent directive?


---
Shawn Poulson
spoulson at explodingcoder.com

From tema75 at hotmail.com  Thu Feb  7 08:53:08 2008
From: tema75 at hotmail.com (Artem Portnoy)
Date: Thu, 7 Feb 2008 16:53:08 +0000
Subject: [antlr-interest] Help with TokenStreamHiddenTokenFilter
Message-ID: <BAY122-W4281F13AE84E496A89B138D02E0@phx.gbl>

Hi,

I desperately need help with the TokenStreamHiddenTokenFilter. I'm using the java15.g grammar for Antlr v2. I managed to construct a tree using antlr.CommonHiddenStreamToken, but the tree appears to be incomplete. Some of the java comments are missing in the tree that gets constructed. For example, given the following text

/** class comment */
public class Test {
  public String field1; // field comment
}

the first comment is getting set into hiddenBefore for token "public", but the second comment is getting set into hiddenAfter for token ";". The problem is that the semicolon token is not present in the AST tree, so I can't get to the comment. The code I use is listed below.

    JavaLexer lexer = new JavaLexer(new FileInputStream(args[0]));
    // use the special token objects
    lexer.setTokenObjectClass("antlr.CommonHiddenStreamToken");
    // create the stream filter; hide WS and SL_COMMENT
    filter = new HFTokenStreamHiddenTokenFilter(lexer);
    filter.discard(JavaRecognizer.WS);
    filter.hide(JavaRecognizer.SL_COMMENT);
    filter.hide(JavaRecognizer.ML_COMMENT);
    // create the parser
    JavaRecognizer parser = new JavaRecognizer(filter);
    // create trees that copy hidden tokens into tree also
    parser.setASTNodeClass("antlr.CommonASTWithHiddenTokens");
    // Parse the input statements
    parser.compilationUnit();
    AST tree = parser.getAST();

Thank you,

Artem

_________________________________________________________________
Shed those extra pounds with MSN and The Biggest Loser!
http://biggestloser.msn.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080207/199f96dd/attachment.html 

From pepone.onrez at gmail.com  Thu Feb  7 09:13:58 2008
From: pepone.onrez at gmail.com (pepone.onrez)
Date: Thu, 7 Feb 2008 18:13:58 +0100
Subject: [antlr-interest] Antlr v2 question
Message-ID: <198501d60802070913h227e8460ma3b5fbc8123a50fb@mail.gmail.com>

I creation a language parser based on java.g example of antrl  v2 for my on
language that is and idl

I want antlr genearte a tree for each compilation unit that is a diferent
file.

Here is my compiltation unit parser rule.

I add the operator ^ to the first newline of white space and this makes
antlr create a root tree for all the other rules
but how can I do the same with out need this WS NEWLINE at the bigining of
each file.

mpl_compile_unit:
    {
        std::cerr<<"mpl_compile_unit begin"<<std::endl;
    }
    (WS^ | NEWLINE^)
    (mpl_include_directive (WS|NEWLINE))*
    (WS|NEWLINE)* (mpl_module_definition)?
    {
        std::cerr<<"mpl_compile_unit end"<<std::endl;
    };



Here is the tree that's i generate with antlr

(
 ( # include   < oz / meta . mpl > )
 ( # include   < oz / meta . mpl > )

 ( module   oz {
         ( module   files {
                 ( class   Node ( extends     Object   ) {
                         ( int ( [ ' name '   =   ' value ' ] )     id ; )
                         ( int   parent ; )
                         ( string   name ; )
                 } ; )

                 ( class   File ( extends     Node ) {
                         ( Node *   parent ; )
                         ( string   value ; )
                         ( Object ( [ ' sql '   =   ' blabla ' ] ) ( [ ' sql
'   =   ' blabla2 ' ] )     more ; )
                 } ; )

                 ( interface   IFile { } ; )
         } ; )
 } ; ) )


Thanks in advance
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080207/fa303a6a/attachment.html 

From jflack at math.purdue.edu  Thu Feb  7 10:08:25 2008
From: jflack at math.purdue.edu (J Chapman Flack)
Date: Thu, 07 Feb 2008 13:08:25 -0500
Subject: [antlr-interest] idea: lexer "sync points"
In-Reply-To: <mailman.12084.1202394152.2502.antlr-interest@antlr.org>
References: <mailman.12084.1202394152.2502.antlr-interest@antlr.org>
Message-ID: <47AB4919.5090603@math.purdue.edu>


In some previous thread I glimpsed a statement passing by suggesting
that ANTLR 3 currently generates a lexer that tokenizes the entire
input before parsing begins.

1. Did I hear that right?  (If not, can someone give a quick summary of
    the right way to understand how an ANTLR 3 lexer really does manage
    its input character stream and output token stream buffers?  In that
    case, some of the rest of this message may become moot.)

2. If I did, there are a couple of concerns that raises for me.  The
    first is already often mentioned, that it is hard to build a
    stateful lexer taking cues from the parser, if the lexer runs
    arbitrarily far ahead.

    The second concern is one I haven't seen mentioned here lately, so
    here it is: what if I want my program, with an ANTLR-parsed input
    language, to work in a coprocess setting?

    Here is a simple example, using the Korn shell on Solaris 9, doing a
    calculation too big for ksh itself:

    $ bc |&
    $ print -p "sqrt(12345678987654321)"
    $ read -p result
    $ print $result
    111111111
    $ print -p "sqrt(12345679012345678987654320987654321)"
    $ read -p result
    $ print $result
    111111111111111111

    With this technique I can write a shell script that does any amount
    of arbitrary-precision arithmetic but only spends the cost of
    starting a bc subprocess once (in a Unix-like environnment that's a
    significant cost, so reusing one process is a win).  The
    technique generalizes; any program can use it, but not every program
    can be used as a subprocess--sometimes for good reasons, sometimes
    not. Here's one that won't work, for no good reason:

    $ tr '[a-z]' '[A-Z]' |&
    $ print -p "i'm not shouting"
    $ read -p result
    [deadlock]

    The version of tr on this system uses a braindamaged input buffering
    strategy. Its read() call has completed and given it a perfectly
    good short result to operate on--pipes and the I/O calls are
    specifically designed to work that way--but the programmer has
    insisted on blindly filling an arbitrarily-sized buffer before doing
    anything useful. The result is a program that is unusable as a
    coprocess.

When developing a program with a generated lexer/parser, two things are
essential to ensuring that the program won't deadlock that way:

1. The language facilities (InputStream, Reader, etc.) used by the
    program to supply input to the generated lexer have to be chosen and
    used carefully to avoid blindly blocking for more data when a
    partial buffer is available. Generally the language features are
    designed so that this requirement can be met if the programmer pays
    attention.

2. The lexer generator has to generate code that avoids unnecessary
    blocking calls on its input source.  (I once had to give up on an
    ANTLR competitor for a given project, because there was NO WAY to
    make it generate a lexer with this property.)

I had a thought on a lexer-grammar feature that could be useful for
both of these issues (stateful lexing, and coprocess usability).
Suppose you could mark, at chosen points in the lexer grammar, a SYNC
POINT. This is a point beyond which the generated lexer will buffer no
more tokens, and make no more blocking calls on input, until the parser
has caught up the token buffer and requested another token. For
stateful lexing you would plant a sync point at the spots where the
parser might want to switch the lexing behavior. For deadlock avoidance
your sync points would be at newlines or semicolons or whatever could
terminate an independently executable statement in your language.

The generator should be able to analyze the parser and lexer to warn of
any decisions where lookahead would have to cross a sync point.

I think this could be a quite useful feature. Comments?

Chapman Flack

From corellian.c at gmail.com  Thu Feb  7 10:29:17 2008
From: corellian.c at gmail.com (Cristian Peraferrer)
Date: Thu, 7 Feb 2008 19:29:17 +0100
Subject: [antlr-interest] Which is the best tool for implementing unitary
	tests?
Message-ID: <3F8FFBF7-A751-4A09-B90D-63D5B8E57FB9@gmail.com>

Hi,

Which is the best tool for implementing unitary tests (in Java) to  
apply to an ANTLR project?

Chris

-- 
GPG Key-ID: 0x564903FA - Jabber ID: corellian at swissjabber.ch


From kroepke at classdump.org  Thu Feb  7 10:33:08 2008
From: kroepke at classdump.org (=?ISO-8859-1?Q?Kay_R=F6pke?=)
Date: Thu, 7 Feb 2008 19:33:08 +0100
Subject: [antlr-interest] idea: lexer "sync points"
In-Reply-To: <47AB4919.5090603@math.purdue.edu>
References: <mailman.12084.1202394152.2502.antlr-interest@antlr.org>
	<47AB4919.5090603@math.purdue.edu>
Message-ID: <1CE8EA61-D762-47CD-994C-3E187E5FBF92@classdump.org>

Hi!

On Feb 7, 2008, at 7:08 PM, J Chapman Flack wrote:

> In some previous thread I glimpsed a statement passing by suggesting
> that ANTLR 3 currently generates a lexer that tokenizes the entire
> input before parsing begins.

That is the out-of-the-box behavior, right.

> 1. Did I hear that right?  (If not, can someone give a quick summary  
> of
>   the right way to understand how an ANTLR 3 lexer really does manage
>   its input character stream and output token stream buffers?  In that
>   case, some of the rest of this message may become moot.)


But there's more to the story:
A lexer is passed the character stream (via a stringstream object or  
similar) and
will ask it for chars.
The lexer itself only knows how to get the next token (via nextToken()  
in interface TokenSource for Java).

It is the fillBuffer method in CommonTokenStream that actually is  
responsible for pulling in all the tokens. If you do now want this  
behavior (maybe because you are reading input from a socket or pipe)  
you could easily provide a different buffered or unbuffered  
TokenStream implementation.

The parser uses the TokenStream interface to get new tokens as it  
needs lookahead information or wants to seek on the stream (or  
whatever you do in actions/sempreds etc).

I think that answers the question, right?

HTH,
-k
-- 
Kay R?pke
http://classdump.org/







From antlr at mirality.co.nz  Thu Feb  7 10:57:05 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 08 Feb 2008 07:57:05 +1300
Subject: [antlr-interest] Grammar handling of whitespaces
In-Reply-To: <175474.61831.qm@web30607.mail.mud.yahoo.com>
References: <47AB21C0.9090105@gmx.de>
	<175474.61831.qm@web30607.mail.mud.yahoo.com>
Message-ID: <20080207185907.D0A8911ED10@www.antlr.org>

At 05:28 8/02/2008, Shawn Poulson wrote:
 >In boost::spirit, they utilize a directive "lexeme_d[]" that
 >surrounds parser references that are not processed by the
 >skip parser (in this case, the WS rule), thereby enforcing
 >no whitespace inbetween.  e.g. "lexeme_d[ 'T' >> int_p >>
 >':' >> int_p ]" is valid in spirit.
 >Maybe ANTLR could use an equivalent directive?

Umm, yes, that's called "a lexer rule".


-- 
No virus found in this outgoing message.
Checked by AVG Free Edition. 
Version: 7.5.516 / Virus Database: 269.19.21/1265 - Release Date: 7/02/2008 11:17



From r.mark.volkmann at gmail.com  Thu Feb  7 12:40:22 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Thu, 7 Feb 2008 14:40:22 -0600
Subject: [antlr-interest] Which is the best tool for implementing
	unitary tests?
In-Reply-To: <3F8FFBF7-A751-4A09-B90D-63D5B8E57FB9@gmail.com>
References: <3F8FFBF7-A751-4A09-B90D-63D5B8E57FB9@gmail.com>
Message-ID: <f0fcc6820802071240v5b2fc186naa16437d8364f79a@mail.gmail.com>

On Feb 7, 2008 12:29 PM, Cristian Peraferrer <corellian.c at gmail.com> wrote:
> Hi,
>
> Which is the best tool for implementing unitary tests (in Java) to
> apply to an ANTLR project?

Take a look at gUnit. The tests aren't written in Java, but it seems
like a great way to test grammars. See
http://www.antlr.org/wiki/display/ANTLR3/gUnit+-+Grammar+Unit+Testing.

-- 
R. Mark Volkmann
Object Computing, Inc.

From jimi at temporal-wave.com  Thu Feb  7 12:14:55 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 7 Feb 2008 12:14:55 -0800
Subject: [antlr-interest] Grammar handling of whitespaces
In-Reply-To: <20080207185907.D0A8911ED10@www.antlr.org>
Message-ID: <"L7E5CA5839A0B47bc86D8F754BB9632C5.1202415302.scalix.temporal-wave.com*"@MHS>

But, if you can't have a single lexer rule for that, then the gated 
predicate looking at hidden tokens is required.

However, perhaps the OP thought that the hidden WS would be hidden from 
other lexer rules too? Which it isn't of course. If there is a 
whitespace, it would fail to match a rule:

X: 'aaaa' ':'?

'aaaa' WS ':' would be different tokens.

Jim

> -----Original Message-----
> From: Gavin Lambert [mailto:antlr at mirality.co.nz]
> Sent: Thursday, February 07, 2008 10:57 AM
> To: Shawn Poulson; Johannes Luber; Erik Kratochvil
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Grammar handling of whitespaces
> 
> At 05:28 8/02/2008, Shawn Poulson wrote:
>  >In boost::spirit, they utilize a directive "lexeme_d[]" that
>  >surrounds parser references that are not processed by the
>  >skip parser (in this case, the WS rule), thereby enforcing
>  >no whitespace inbetween.  e.g. "lexeme_d[ 'T' >> int_p >>
>  >':' >> int_p ]" is valid in spirit.
>  >Maybe ANTLR could use an equivalent directive?
> 
> Umm, yes, that's called "a lexer rule".
> 
> 
> --
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.5.516 / Virus Database: 269.19.21/1265 - Release Date:
> 7/02/2008 11:17
> 
> 



From jpen054 at ec.auckland.ac.nz  Thu Feb  7 19:50:36 2008
From: jpen054 at ec.auckland.ac.nz (Jamie Penney)
Date: Fri, 08 Feb 2008 16:50:36 +1300
Subject: [antlr-interest] Trying to keep whitespace in an AST
Message-ID: <47ABD18C.9050409@ec.auckland.ac.nz>

Hi all,
I am trying to work out how to create a grammar that will build an AST 
that keeps both comments and some whitespace. Basically the output will 
be formatted code, but we need the semantic information provided by the 
AST for other parts of the system. Any comments and blank lines need to 
be kept in the output code. Is it possible to have rewriting and AST 
generation turned on at the same time, or do I have to write two 
separate grammars? I am new to ANTLR so sorry if I have the wrong idea 
about anything.
To give a concrete example, say I have a language that represents basic 
C style statements like so:

int a    = 0;
int b    = 1;
int c    = 2;

// reassign a
a = b + c;

What I need is the semantic information provided by an AST (whether a 
statement is a declaration, assignment, ect), but I need to transform 
the language partially too. I need to format the individual elements 
consistently, so each would be of the form a = b + c; but I also need to 
retain the newlines and comments between elements.

If anyone could point me in the right direction I would be very grateful.

Thanks,
Jamie Penney

From gudnabrsam at yahoo.com  Thu Feb  7 20:16:07 2008
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Thu, 7 Feb 2008 20:16:07 -0800 (PST)
Subject: [antlr-interest] Trying to keep whitespace in an AST
In-Reply-To: <47ABD18C.9050409@ec.auckland.ac.nz>
Message-ID: <921013.86501.qm@web55104.mail.re4.yahoo.com>

Are you trying to pretty-print all the source, or just
what you've augmented?  Does this wiki entry approach
what you're looking for:

http://www.antlr.org/wiki/pages/viewpage.action?pageId=1752

?

-Matt

--- Jamie Penney <jpen054 at ec.auckland.ac.nz> wrote:

> Hi all,
> I am trying to work out how to create a grammar that
> will build an AST 
> that keeps both comments and some whitespace.
> Basically the output will 
> be formatted code, but we need the semantic
> information provided by the 
> AST for other parts of the system. Any comments and
> blank lines need to 
> be kept in the output code. Is it possible to have
> rewriting and AST 
> generation turned on at the same time, or do I have
> to write two 
> separate grammars? I am new to ANTLR so sorry if I
> have the wrong idea 
> about anything.
> To give a concrete example, say I have a language
> that represents basic 
> C style statements like so:
> 
> int a    = 0;
> int b    = 1;
> int c    = 2;
> 
> // reassign a
> a = b + c;
> 
> What I need is the semantic information provided by
> an AST (whether a 
> statement is a declaration, assignment, ect), but I
> need to transform 
> the language partially too. I need to format the
> individual elements 
> consistently, so each would be of the form a = b +
> c; but I also need to 
> retain the newlines and comments between elements.
> 
> If anyone could point me in the right direction I
> would be very grateful.
> 
> Thanks,
> Jamie Penney
> 



      ____________________________________________________________________________________
Looking for last minute shopping deals?  
Find them fast with Yahoo! Search.  http://tools.search.yahoo.com/newsearch/category.php?category=shopping

From gudnabrsam at yahoo.com  Thu Feb  7 20:37:38 2008
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Thu, 7 Feb 2008 20:37:38 -0800 (PST)
Subject: [antlr-interest] Fwd: Re:  Trying to keep whitespace in an AST
Message-ID: <644599.59193.qm@web55107.mail.re4.yahoo.com>

copying list...

--- Jamie Penney <jpen054 at ec.auckland.ac.nz> wrote:

> Date: Fri, 08 Feb 2008 17:25:04 +1300
> From: Jamie Penney <jpen054 at ec.auckland.ac.nz>
> To: Matt Benson <gudnabrsam at yahoo.com>
> Subject: Re: [antlr-interest] Trying to keep
> whitespace in an AST
> 
> What I need to do is use the AST to create an in
> memory model of the 
> code using our own model classes. So for instance we
> have a model to 
> represent a method, which needs to know everything
> about the method. It 
> needs the text of the method, but doesn't need to
> parse it. I need to be 
> able to record the amount of whitespace and the
> comments that come 
> before the method, so that I can put that into our
> code model objects. 
> These code model objects are used for a bunch of
> different stuff, 
> modified, then printed out (which does the actual
> pretty printing).
> 
> So I guess I need an AST that keeps newlines and
> comments associated 
> with particular nodes. The pretty printing is done
> by our code so the 
> grammar doesn't need to do that.
> 
> Thanks,
> Jamie Penney
> 
> Matt Benson wrote:
> > Are you trying to pretty-print all the source, or
> just
> > what you've augmented?  Does this wiki entry
> approach
> > what you're looking for:
> >
> >
>
http://www.antlr.org/wiki/pages/viewpage.action?pageId=1752
> >
> > ?
> >
> > -Matt
> >
> > --- Jamie Penney <jpen054 at ec.auckland.ac.nz>
> wrote:
> >
> >   
> >> Hi all,
> >> I am trying to work out how to create a grammar
> that
> >> will build an AST 
> >> that keeps both comments and some whitespace.
> >> Basically the output will 
> >> be formatted code, but we need the semantic
> >> information provided by the 
> >> AST for other parts of the system. Any comments
> and
> >> blank lines need to 
> >> be kept in the output code. Is it possible to
> have
> >> rewriting and AST 
> >> generation turned on at the same time, or do I
> have
> >> to write two 
> >> separate grammars? I am new to ANTLR so sorry if
> I
> >> have the wrong idea 
> >> about anything.
> >> To give a concrete example, say I have a language
> >> that represents basic 
> >> C style statements like so:
> >>
> >> int a    = 0;
> >> int b    = 1;
> >> int c    = 2;
> >>
> >> // reassign a
> >> a = b + c;
> >>
> >> What I need is the semantic information provided
> by
> >> an AST (whether a 
> >> statement is a declaration, assignment, ect), but
> I
> >> need to transform 
> >> the language partially too. I need to format the
> >> individual elements 
> >> consistently, so each would be of the form a = b
> +
> >> c; but I also need to 
> >> retain the newlines and comments between
> elements.
> >>
> >> If anyone could point me in the right direction I
> >> would be very grateful.
> >>
> >> Thanks,
> >> Jamie Penney
> >>
> >>     
> >
> >
> >
> >      
>
____________________________________________________________________________________
> > Looking for last minute shopping deals?  
> > Find them fast with Yahoo! Search. 
>
http://tools.search.yahoo.com/newsearch/category.php?category=shopping
> >   
> 
> 



      ____________________________________________________________________________________
Never miss a thing.  Make Yahoo your home page. 
http://www.yahoo.com/r/hs

From jpen054 at ec.auckland.ac.nz  Thu Feb  7 21:24:56 2008
From: jpen054 at ec.auckland.ac.nz (Jamie Penney)
Date: Fri, 08 Feb 2008 18:24:56 +1300
Subject: [antlr-interest] Fwd: Re:  Trying to keep whitespace in an AST
In-Reply-To: <644599.59193.qm@web55107.mail.re4.yahoo.com>
References: <644599.59193.qm@web55107.mail.re4.yahoo.com>
Message-ID: <47ABE7A8.8050802@ec.auckland.ac.nz>

My apologies - one of the other email lists I use has the reply-to 
address set to the list address.

Matt Benson wrote:
> copying list...
>
> --- Jamie Penney <jpen054 at ec.auckland.ac.nz> wrote:
>
>   
>> Date: Fri, 08 Feb 2008 17:25:04 +1300
>> From: Jamie Penney <jpen054 at ec.auckland.ac.nz>
>> To: Matt Benson <gudnabrsam at yahoo.com>
>> Subject: Re: [antlr-interest] Trying to keep
>> whitespace in an AST
>>
>> What I need to do is use the AST to create an in
>> memory model of the 
>> code using our own model classes. So for instance we
>> have a model to 
>> represent a method, which needs to know everything
>> about the method. It 
>> needs the text of the method, but doesn't need to
>> parse it. I need to be 
>> able to record the amount of whitespace and the
>> comments that come 
>> before the method, so that I can put that into our
>> code model objects. 
>> These code model objects are used for a bunch of
>> different stuff, 
>> modified, then printed out (which does the actual
>> pretty printing).
>>
>> So I guess I need an AST that keeps newlines and
>> comments associated 
>> with particular nodes. The pretty printing is done
>> by our code so the 
>> grammar doesn't need to do that.
>>
>> Thanks,
>> Jamie Penney
>>
>> Matt Benson wrote:
>>     
>>> Are you trying to pretty-print all the source, or
>>>       
>> just
>>     
>>> what you've augmented?  Does this wiki entry
>>>       
>> approach
>>     
>>> what you're looking for:
>>>
>>>
>>>       
> http://www.antlr.org/wiki/pages/viewpage.action?pageId=1752
>   
>>> ?
>>>
>>> -Matt
>>>
>>> --- Jamie Penney <jpen054 at ec.auckland.ac.nz>
>>>       
>> wrote:
>>     
>>>   
>>>       
>>>> Hi all,
>>>> I am trying to work out how to create a grammar
>>>>         
>> that
>>     
>>>> will build an AST 
>>>> that keeps both comments and some whitespace.
>>>> Basically the output will 
>>>> be formatted code, but we need the semantic
>>>> information provided by the 
>>>> AST for other parts of the system. Any comments
>>>>         
>> and
>>     
>>>> blank lines need to 
>>>> be kept in the output code. Is it possible to
>>>>         
>> have
>>     
>>>> rewriting and AST 
>>>> generation turned on at the same time, or do I
>>>>         
>> have
>>     
>>>> to write two 
>>>> separate grammars? I am new to ANTLR so sorry if
>>>>         
>> I
>>     
>>>> have the wrong idea 
>>>> about anything.
>>>> To give a concrete example, say I have a language
>>>> that represents basic 
>>>> C style statements like so:
>>>>
>>>> int a    = 0;
>>>> int b    = 1;
>>>> int c    = 2;
>>>>
>>>> // reassign a
>>>> a = b + c;
>>>>
>>>> What I need is the semantic information provided
>>>>         
>> by
>>     
>>>> an AST (whether a 
>>>> statement is a declaration, assignment, ect), but
>>>>         
>> I
>>     
>>>> need to transform 
>>>> the language partially too. I need to format the
>>>> individual elements 
>>>> consistently, so each would be of the form a = b
>>>>         
>> +
>>     
>>>> c; but I also need to 
>>>> retain the newlines and comments between
>>>>         
>> elements.
>>     
>>>> If anyone could point me in the right direction I
>>>> would be very grateful.
>>>>
>>>> Thanks,
>>>> Jamie Penney
>>>>
>>>>     
>>>>         
>>>
>>>      
>>>       
> ____________________________________________________________________________________
>   
>>> Looking for last minute shopping deals?  
>>> Find them fast with Yahoo! Search. 
>>>       
> http://tools.search.yahoo.com/newsearch/category.php?category=shopping
>   
>>>   
>>>       
>>     
>
>
>
>       ____________________________________________________________________________________
> Never miss a thing.  Make Yahoo your home page. 
> http://www.yahoo.com/r/hs
>   

-- 
Jamie Penney

http://www.jamiepenney.co.nz

From eyboy.sanchez at yahoo.com  Thu Feb  7 22:19:51 2008
From: eyboy.sanchez at yahoo.com (Adrian Sanchez)
Date: Thu, 7 Feb 2008 22:19:51 -0800 (PST)
Subject: [antlr-interest] Tree Construction - DOT operator
Message-ID: <455470.23567.qm@web63412.mail.re1.yahoo.com>



Hi guys,


 


I?m just new to Antlr (just started studying it last week)
and I want to ask for your help.  I?m trying to learn about tree construction/tree
parsing and was stumped with this problem.  


 


See, I?m trying to create an AST from the following rules
(this is based on the Python grammar in the antlr site):


 




primary : atom (trailer)*;


                                               





trailer : '.' ID  //e.g. Rect1.Width?;


                                               



args : ID (',' ID)*;


 


I was wondering how I could represent the AST for
primary.  I was thinking of something like:


 


1.      
->  atom
             //if
there is no trailer


2.      
->  ^(GETMEMBER atom ID)  //if
there is a trailer


 


This sounds like a pretty simple and common scenario so I?m
sure you guys can help.  Thanks.






      ____________________________________________________________________________________
Never miss a thing.  Make Yahoo your home page. 
http://www.yahoo.com/r/hs
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080207/3be11ca3/attachment-0001.html 

From peter.bulychev at gmail.com  Fri Feb  8 01:19:53 2008
From: peter.bulychev at gmail.com (Peter Bulychev)
Date: Fri, 8 Feb 2008 11:19:53 +0200
Subject: [antlr-interest] FishEye tarball doesn't work
Message-ID: <ef5132890802080119r53718f7eh7f5c7be6a4d139d7@mail.gmail.com>

Hello.

I tried to download fresh sources from
http://fisheye2.cenqua.com/browse/antlr but it wasn't possible (I tried from
several machines and ip addresses).

How can I download it through anonymous CVS?

-- 
Best regards,
   Peter Bulychev.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080208/dd32361e/attachment.html 

From jaluber at gmx.de  Fri Feb  8 03:42:58 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 08 Feb 2008 12:42:58 +0100
Subject: [antlr-interest] FishEye tarball doesn't work
In-Reply-To: <ef5132890802080119r53718f7eh7f5c7be6a4d139d7@mail.gmail.com>
References: <ef5132890802080119r53718f7eh7f5c7be6a4d139d7@mail.gmail.com>
Message-ID: <47AC4042.20306@gmx.de>

Peter Bulychev schrieb:
> Hello.
> 
> I tried to download fresh sources from 
> http://fisheye2.cenqua.com/browse/antlr but it wasn't possible (I tried 
> from several machines and ip addresses).

Unfortunately, Fisheye doesn't work reliable for whatever reason.

> How can I download it through anonymous CVS?
> 
> -- 
> Best regards,
>    Peter Bulychev.

There no anonymous CVS. Ter uses Perforce, which doesn't allow anonymous 
accesses, but if you ask him, he would give you a read-only access account.

Johannes

From cieslewski at hcs.ufl.edu  Fri Feb  8 06:00:27 2008
From: cieslewski at hcs.ufl.edu (Grzegorz Cieslewski)
Date: Fri, 8 Feb 2008 09:00:27 -0500
Subject: [antlr-interest] Problem with Duplicating nodes/trees
Message-ID: <7aa837f80802080600u7955857ewad43f23d9a6f911d@mail.gmail.com>

Hello All,

I have encountered a problem with tree duplication during AST
construction.  I boiled my problem to following grammar.

grammar T2;
options {output=AST;}
tokens
{
	TEST;
}
a : c (',' c)* b -> ^(TEST c b)+
;
b 	:	INT;
c	: 	ID;

ID : 'a'..'z'+ ;
INT : '0'..'9'+;
WS : (' '|'\n') {$channel=HIDDEN;} ;

For input like "x, y, z 1", I was expecting to get a tree looking like
 ^(TEST x 1) ^(TEST y 1) ^(TEST z 1),
but the antlr seems not to duplicate the b rule and I get ^(TEST x 1)
^(TEST y) ^(TEST z).

Does any one know what am I doing wrong?  Is this a bug or a "feature".

Thanks,



-- 
=====================================================
Grzegorz Cieslewski
Research Assistant
High-performance Computing & Simulation (HCS) Research Laboratory
University of Florida, Dept. of Electrical and Computer Engineering
330 Benton Hall, Gainesville, FL, 32611-6200
Phone: (352) 392-9041
Email: cieslewski at hcs.ufl.edu
Web: www.hcs.ufl.edu
=====================================================

From r.mark.volkmann at gmail.com  Fri Feb  8 06:38:17 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Fri, 8 Feb 2008 08:38:17 -0600
Subject: [antlr-interest] Problem with Duplicating nodes/trees
In-Reply-To: <7aa837f80802080600u7955857ewad43f23d9a6f911d@mail.gmail.com>
References: <7aa837f80802080600u7955857ewad43f23d9a6f911d@mail.gmail.com>
Message-ID: <f0fcc6820802080638i1e08810cj53dca4b46a39ba6c@mail.gmail.com>

On Feb 8, 2008 8:00 AM, Grzegorz Cieslewski <cieslewski at hcs.ufl.edu> wrote:
> Hello All,
>
> I have encountered a problem with tree duplication during AST
> construction.  I boiled my problem to following grammar.
>
> grammar T2;
> options {output=AST;}
> tokens
> {
>         TEST;
> }
> a : c (',' c)* b -> ^(TEST c b)+
> ;
> b       :       INT;
> c       :       ID;
>
> ID : 'a'..'z'+ ;
> INT : '0'..'9'+;
> WS : (' '|'\n') {$channel=HIDDEN;} ;
>
> For input like "x, y, z 1", I was expecting to get a tree looking like
>  ^(TEST x 1) ^(TEST y 1) ^(TEST z 1),
> but the antlr seems not to duplicate the b rule and I get ^(TEST x 1)
> ^(TEST y) ^(TEST z).
>
> Does any one know what am I doing wrong?  Is this a bug or a "feature".

Based on section 7.5 of the book, in the subsection titled
"Duplicating Nodes and Trees", what you have looks correct. The
relevant statement is this.

"In a rewrite rule, ANTLR duplicates any element with cardinality one
when referenced more than once or encountered more than once because
of an EBNF * or + suffice operator."

b is your element with a cardinality of one and it is encountered more
than once in your rewrite rule with a + operator, but it isn't being
duplicated.

I tried your grammar in the latest intermediate build and it doesn't
work. I hope someone else has an idea why. I think it's possible
you've found a bug.

-- 
R. Mark Volkmann
Object Computing, Inc.

From jaluber at gmx.de  Fri Feb  8 07:24:14 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 08 Feb 2008 16:24:14 +0100
Subject: [antlr-interest]  Fwd: Re:  Trying to keep whitespace in an AST
Message-ID: <47AC741E.7000906@gmx.de>

> So I guess I need an AST that keeps newlines and
> comments associated 
> with particular nodes. The pretty printing is done
> by our code so the 
> grammar doesn't need to do that.

Well, there are problems with the naive way of simply attaching newlines 
and comments. The AST grammar doesn't recognize "The comments and 
whitespace everywhere" requirement. So you can insert at every possible 
point "(WS | COMMENT)*", but that would be ugly.

One could try to tell the parser to check for WS and COMMENT in addition 
to the expected node, but that would interfere with syntactic 
predicates, which don't check for theses variants. One could try to 
change the template but I'm not sure how feasible this is. There could 
be other problems lurking.

The way I'd go is to use channels. Put newlines and COMMENT into a 
channel separate from the unneeded whitespace. This would reduce the 
problem into accessing the off-channel tokens at the right places and to 
keep them after grammar transformations. But so far I haven't checked 
out, how one can do the latter properly.

Johannes

From cieslewski at hcs.ufl.edu  Fri Feb  8 07:58:07 2008
From: cieslewski at hcs.ufl.edu (Grzegorz Cieslewski)
Date: Fri, 8 Feb 2008 10:58:07 -0500
Subject: [antlr-interest] Problem with Duplicating nodes/trees
In-Reply-To: <f0fcc6820802080638i1e08810cj53dca4b46a39ba6c@mail.gmail.com>
References: <7aa837f80802080600u7955857ewad43f23d9a6f911d@mail.gmail.com>
	<f0fcc6820802080638i1e08810cj53dca4b46a39ba6c@mail.gmail.com>
Message-ID: <7aa837f80802080758l2791109ex3f8f876873276906@mail.gmail.com>

I looked through the code that ANTLR generates.  It seems to me that
the function
org.antlr.runtime.tree.RewriteRuleElementStream.next() is not
following the spec.
It does not perform duplication correctly when the size()==1.


On Feb 8, 2008 9:38 AM, Mark Volkmann <r.mark.volkmann at gmail.com> wrote:
> On Feb 8, 2008 8:00 AM, Grzegorz Cieslewski <cieslewski at hcs.ufl.edu> wrote:
> > Hello All,
> >
> > I have encountered a problem with tree duplication during AST
> > construction.  I boiled my problem to following grammar.
> >
> > grammar T2;
> > options {output=AST;}
> > tokens
> > {
> >         TEST;
> > }
> > a : c (',' c)* b -> ^(TEST c b)+
> > ;
> > b       :       INT;
> > c       :       ID;
> >
> > ID : 'a'..'z'+ ;
> > INT : '0'..'9'+;
> > WS : (' '|'\n') {$channel=HIDDEN;} ;
> >
> > For input like "x, y, z 1", I was expecting to get a tree looking like
> >  ^(TEST x 1) ^(TEST y 1) ^(TEST z 1),
> > but the antlr seems not to duplicate the b rule and I get ^(TEST x 1)
> > ^(TEST y) ^(TEST z).
> >
> > Does any one know what am I doing wrong?  Is this a bug or a "feature".
>
> Based on section 7.5 of the book, in the subsection titled
> "Duplicating Nodes and Trees", what you have looks correct. The
> relevant statement is this.
>
> "In a rewrite rule, ANTLR duplicates any element with cardinality one
> when referenced more than once or encountered more than once because
> of an EBNF * or + suffice operator."
>
> b is your element with a cardinality of one and it is encountered more
> than once in your rewrite rule with a + operator, but it isn't being
> duplicated.
>
> I tried your grammar in the latest intermediate build and it doesn't
> work. I hope someone else has an idea why. I think it's possible
> you've found a bug.
>
> --
> R. Mark Volkmann
> Object Computing, Inc.
>



-- 
=====================================================
Grzegorz Cieslewski
Research Assistant
High-performance Computing & Simulation (HCS) Research Laboratory
University of Florida, Dept. of Electrical and Computer Engineering
330 Benton Hall, Gainesville, FL, 32611-6200
Phone: (352) 392-9041
Email: cieslewski at hcs.ufl.edu
Web: www.hcs.ufl.edu
=====================================================

From jaluber at gmx.de  Fri Feb  8 08:09:51 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 08 Feb 2008 17:09:51 +0100
Subject: [antlr-interest] Lexer rule question
Message-ID: <47AC7ECF.8060006@gmx.de>

Hi!

I have never needed to know the answer before now, but what is the 
actual difference between:

A : B ;

B : 'B' ;

and

A : B ;

fragment B : 'B' ;

? How many tokens are produced in the first variant? 1 or 2? And if 2, 
what do they actually contain for values?

Johannes

From brent.yates at gmail.com  Fri Feb  8 08:05:26 2008
From: brent.yates at gmail.com (Brent Yates)
Date: Fri, 8 Feb 2008 11:05:26 -0500
Subject: [antlr-interest] Tree Construction - DOT operator
Message-ID: <6edc6c380802080805k2503a995q18b0805d7e0e4113@mail.gmail.com>

Adrian,

Try:

// Imaginary tokes for AST rewrite
tokens
    {
    GETMEMBER;
    }

primary
    :    (atom -> atom)  ( (t+=trailer)+ -> ^(GETMEMBER $primary $t+) )?
    ;

trailer
    :    '.'! ID
    ;



Regards,

Brent Yates
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080208/a5e90d11/attachment.html 

From tema75 at hotmail.com  Fri Feb  8 08:33:29 2008
From: tema75 at hotmail.com (Artem Portnoy)
Date: Fri, 8 Feb 2008 16:33:29 +0000
Subject: [antlr-interest] Fwd: Re:  Trying to keep whitespace in an AST
In-Reply-To: <47AC741E.7000906@gmx.de>
References: <47AC741E.7000906@gmx.de>
Message-ID: <BAY122-W7FD64C2FDABC9E3E884EFD02F0@phx.gbl>

I'm trying to solve the exact same problem. I found some sample code here http://www.antlr.org/article/whitespace/index.html. The problem is that the way the existing Java grammar is written, not all the tokens end up in the AST tree, such as semicolons, curly brakets, etc. The result of this is some of the comments end up getting weaved onto these "missing" tokens, and there's no way to get them back from AST. If somebody knows how to resolve this issue please share the information.

Thank you,

Artem
> Date: Fri, 8 Feb 2008 16:24:14 +0100
> From: jaluber at gmx.de
> To: antlr-interest at antlr.org
> Subject: [antlr-interest]  Fwd: Re:  Trying to keep whitespace in an AST
> 
> > So I guess I need an AST that keeps newlines and
> > comments associated 
> > with particular nodes. The pretty printing is done
> > by our code so the 
> > grammar doesn't need to do that.
> 
> Well, there are problems with the naive way of simply attaching newlines 
> and comments. The AST grammar doesn't recognize "The comments and 
> whitespace everywhere" requirement. So you can insert at every possible 
> point "(WS | COMMENT)*", but that would be ugly.
> 
> One could try to tell the parser to check for WS and COMMENT in addition 
> to the expected node, but that would interfere with syntactic 
> predicates, which don't check for theses variants. One could try to 
> change the template but I'm not sure how feasible this is. There could 
> be other problems lurking.
> 
> The way I'd go is to use channels. Put newlines and COMMENT into a 
> channel separate from the unneeded whitespace. This would reduce the 
> problem into accessing the off-channel tokens at the right places and to 
> keep them after grammar transformations. But so far I haven't checked 
> out, how one can do the latter properly.
> 
> Johannes

_________________________________________________________________
Helping your favorite cause is as easy as instant messaging.?You IM, we give.
http://im.live.com/Messenger/IM/Home/?source=text_hotmail_join
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080208/1b1894f9/attachment.html 

From jaluber at gmx.de  Fri Feb  8 08:54:47 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 08 Feb 2008 17:54:47 +0100
Subject: [antlr-interest] Fwd: Re:  Trying to keep whitespace in an AST
In-Reply-To: <BAY122-W7FD64C2FDABC9E3E884EFD02F0@phx.gbl>
References: <47AC741E.7000906@gmx.de>
	<BAY122-W7FD64C2FDABC9E3E884EFD02F0@phx.gbl>
Message-ID: <47AC8957.3060803@gmx.de>

Artem Portnoy schrieb:
> I'm trying to solve the exact same problem. I found some sample code 
> here http://www.antlr.org/article/whitespace/index.html. The problem is 
> that the way the existing Java grammar is written, not all the tokens 
> end up in the AST tree, such as semicolons, curly brakets, etc. The 
> result of this is some of the comments end up getting weaved onto these 
> "missing" tokens, and there's no way to get them back from AST. If 
> somebody knows how to resolve this issue please share the information.

The description is still for ANTLR 2.7.7. Did you manage to translate 
into ANTLR 3 syntax? I am nonetheless wondering, why you get the pure 
syntactical tokens with the whitespace. My understanding is that each 
token includes only the text it actually matched. Did you check the 
"intermediate" tokens for being only whitespace and comments? If that 
doesn't work the only option is to include the neglected tokens into the 
AST.

Johannes


From tema75 at hotmail.com  Fri Feb  8 09:28:42 2008
From: tema75 at hotmail.com (Artem Portnoy)
Date: Fri, 8 Feb 2008 17:28:42 +0000
Subject: [antlr-interest] Fwd: Re:  Trying to keep whitespace in an AST
In-Reply-To: <47AC8957.3060803@gmx.de>
References: <47AC741E.7000906@gmx.de>
	<BAY122-W7FD64C2FDABC9E3E884EFD02F0@phx.gbl> <47AC8957.3060803@gmx.de>
Message-ID: <BAY122-W10A2A301917857B1D1A63ED02F0@phx.gbl>

Johannes,

I have no idea how to do the same thing in Antlr v3. I couldn't find much information or examples. This is the only thing I found and I couldn't make much sense of it http://www.antlr.org/wiki/pages/viewpage.action?pageId=1057. It just sounds too vague for me with what little understanding of antlr I've got. In my case, I do not care about whitespace. All I need is the ability to access the comments.

The way TokenStreamHiddenTokenFilter works in Antlr 2 is that it looks for hidden tokens, such as comments and whitespace and sets them onto the preceding or trailing "regular" token. Because it has no knowledge of which tokens are bound for inclusion in the AST tree I'm faced with the problem I described before.

Regards,
Artem
> Date: Fri, 8 Feb 2008 17:54:47 +0100
> From: jaluber at gmx.de
> To: tema75 at hotmail.com
> CC: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Fwd: Re:  Trying to keep whitespace in an AST
> 
> Artem Portnoy schrieb:
> > I'm trying to solve the exact same problem. I found some sample code 
> > here http://www.antlr.org/article/whitespace/index.html. The problem is 
> > that the way the existing Java grammar is written, not all the tokens 
> > end up in the AST tree, such as semicolons, curly brakets, etc. The 
> > result of this is some of the comments end up getting weaved onto these 
> > "missing" tokens, and there's no way to get them back from AST. If 
> > somebody knows how to resolve this issue please share the information.
> 
> The description is still for ANTLR 2.7.7. Did you manage to translate 
> into ANTLR 3 syntax? I am nonetheless wondering, why you get the pure 
> syntactical tokens with the whitespace. My understanding is that each 
> token includes only the text it actually matched. Did you check the 
> "intermediate" tokens for being only whitespace and comments? If that 
> doesn't work the only option is to include the neglected tokens into the 
> AST.
> 
> Johannes
> 

_________________________________________________________________
Helping your favorite cause is as easy as instant messaging.?You IM, we give.
http://im.live.com/Messenger/IM/Home/?source=text_hotmail_join
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080208/fa1ba8ba/attachment.html 

From jaluber at gmx.de  Fri Feb  8 10:04:26 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 08 Feb 2008 19:04:26 +0100
Subject: [antlr-interest] Fwd: Re:  Trying to keep whitespace in an AST
In-Reply-To: <BAY122-W10A2A301917857B1D1A63ED02F0@phx.gbl>
References: <47AC741E.7000906@gmx.de>
	<BAY122-W7FD64C2FDABC9E3E884EFD02F0@phx.gbl>
	<47AC8957.3060803@gmx.de>
	<BAY122-W10A2A301917857B1D1A63ED02F0@phx.gbl>
Message-ID: <47AC99AA.3010902@gmx.de>

Artem Portnoy schrieb:
> Johannes,
> 
> I have no idea how to do the same thing in Antlr v3. I couldn't find 
> much information or examples. This is the only thing I found and I 
> couldn't make much sense of it 
> http://www.antlr.org/wiki/pages/viewpage.action?pageId=1057. It just 
> sounds too vague for me with what little understanding of antlr I've 
> got. In my case, I do not care about whitespace. All I need is the 
> ability to access the comments.

Looking at this, one would set in the comments rule "{channel = 
COMMENT_CHANNEL;}", with COMMENT_CHANNEL defined like 50. Then you need 
to access from your CommonTree node in the tree grammar getStartIndex() 
and getStopIndex(). Then you scan in the TokenStream via a for-loop from 
start index until stop index via get(i), if the returned token has the 
channel value COMMENT_CHANNEL. Output those.

That should principally work; start and stop index may vary on your 
needs though.

Johannes

P.S.: 
<http://www.antlr.org/wiki/display/ANTLR3/encoding+off-channel+tokens+in+the+tree> 
looks at first as the right match, but is missing all the required 
information.

From jimi at temporal-wave.com  Fri Feb  8 10:22:37 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 8 Feb 2008 10:22:37 -0800
Subject: [antlr-interest] Trying to keep whitespace in an AST
In-Reply-To: <47ABD18C.9050409@ec.auckland.ac.nz>
Message-ID: <"L5333E35754944a31A4C66CB570438C39.1202494979.scalix.temporal-wave.com*"@MHS>

Well, remember that the AST is, err abstract ;-). It is just a construct 
made from the token stream that you parsed. The parser skips tokens that 
you create "off-channel", such as comments:

COMMENT: '//' ~NL*  { $channel = 2; } ;

Now, when you walk you AST and find a method, you just need the token 
index of the start sequence of your method declaration (this of course 
depends on the language). Then you can traverse backwards in the token 
stream (the stream you passed to the parser, mostly CommonTokenStream) 
for that index, and pick up any off-channel tokens that were ignored by 
the parser. If your common token stream is called tstream, then:

tstream.get(index) will return the token at index n, whether it is on 
the parsing channel or not. There is also tstrem.getRange(.., which will 
return a List of the tokens in a range, whether on channel or off 
channel.


So, you hit the 'method' keyword/node/token and find out its index (or 
the index of a real token rather than an imaginary one perhaps). Then 
you traverse back through the stream until some trigger point such as 
the first on-channel token before the comments or something. Only you 
can know exactly where you start and stop, and the problem of 
associating comments with the correct syntactical element is a thorny 
one!

Jim

> -----Original Message-----
> From: Jamie Penney [mailto:jpen054 at ec.auckland.ac.nz]
> Sent: Thursday, February 07, 2008 7:51 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Trying to keep whitespace in an AST
> 
> Hi all,
> I am trying to work out how to create a grammar that will build an AST
> that keeps both comments and some whitespace. Basically the output 
will
> be formatted code, but we need the semantic information provided by 
the
> AST for other parts of the system. Any comments and blank lines need 
to
> be kept in the output code. Is it possible to have rewriting and AST
> generation turned on at the same time, or do I have to write two
> separate grammars? I am new to ANTLR so sorry if I have the wrong idea
> about anything.
> To give a concrete example, say I have a language that represents 
basic
> C style statements like so:
> 
> int a    = 0;
> int b    = 1;
> int c    = 2;
> 
> // reassign a
> a = b + c;
> 
> What I need is the semantic information provided by an AST (whether a
> statement is a declaration, assignment, ect), but I need to transform
> the language partially too. I need to format the individual elements
> consistently, so each would be of the form a = b + c; but I also need
> to
> retain the newlines and comments between elements.
> 
> If anyone could point me in the right direction I would be very
> grateful.
> 
> Thanks,
> Jamie Penney



From jimi at temporal-wave.com  Fri Feb  8 10:34:44 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 8 Feb 2008 10:34:44 -0800
Subject: [antlr-interest] Lexer rule question
In-Reply-To: <47AC7ECF.8060006@gmx.de>
Message-ID: <"L71E040E995C244f3B8B89BCA5B6D2CFE.1202495706.scalix.temporal-wave.com*"@MHS>

> -----Original Message-----
> From: Johannes Luber [mailto:jaluber at gmx.de]
> Sent: Friday, February 08, 2008 8:10 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Lexer rule question
> 
> Hi!
> 
> I have never needed to know the answer before now, but what is the
> actual difference between:
> 
> A : B ;
> 
> B : 'B' ;
> 
> and
> 
> A : B ;
> 
> fragment B : 'B' ;

In the first instance, you will get an error that B is unreachable 
because it sees a  non fragment rule A first and that calls B. Because B 
is not a fragment, ANTLR tries to produce a token match for that as well 
as A and finds that the spec for both A and B is exactly the same.

In the second instance, B is a fragment and so ANTLR knows not to try to 
produce a real token B, as it is just a rule that is called by other 
lexer token definitions. Hence there is only a spec for the token A, 
which just calls the rule B.

All rules produce a single token only, but may call other rules, whether 
fragment rules or not, as part of the spec. However, if you dont use 
the fragment modifier, then the lexer will try to produce a token for 
that rule on its own, as well as the other rules that use it in 
combination.

So, basically, if your rule is just something for another rule to match 
with such as DIGIT etc, then use fragment and the lexer will not try to 
produce code that matches and produces the token DIGIT. Always use 
fragment if the parser is not expecting a token called by the lexer rule 
name.

To produce multiple tokens from one production you have to start 
deriving the token stream and storing the tokens produced in a List that 
you can consume/add to the token list (see source code comments here). 
That would be an overhead that most lexers dont need, so it isnt the 
default. There are few occasions that the only solution is to produce 
two tokens from one lexer rule; it does happen but I have always managed 
to find another way.

Jim



From parrt at cs.usfca.edu  Fri Feb  8 11:59:48 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 8 Feb 2008 11:59:48 -0800
Subject: [antlr-interest] Mantra now easily accesses any Java class (1.0a5
	release)
Message-ID: <3E8E7446-ADFB-4971-AC24-571CA1051D47@cs.usfca.edu>

  check out the examples at the bottom of:

http://www.antlr.org/wiki/display/Mantra/Examples

under "Accessing POJOs".

Download 1.0a5 here:

http://www.antlr.org/wiki/display/Mantra/The+Mantra+Programming+Language

This connection to Java is done through the magic of  
mantra.lang.JavaProxyObject in the runtime library.

Other changes in this release include mantra class X becoming _X in  
the output Java code to avoid collisions.

Ter

From cieslewski at hcs.ufl.edu  Fri Feb  8 12:10:06 2008
From: cieslewski at hcs.ufl.edu (Grzegorz Cieslewski)
Date: Fri, 8 Feb 2008 15:10:06 -0500
Subject: [antlr-interest] Problem with Duplicating nodes/trees
In-Reply-To: <7aa837f80802080758l2791109ex3f8f876873276906@mail.gmail.com>
References: <7aa837f80802080600u7955857ewad43f23d9a6f911d@mail.gmail.com>
	<f0fcc6820802080638i1e08810cj53dca4b46a39ba6c@mail.gmail.com>
	<7aa837f80802080758l2791109ex3f8f876873276906@mail.gmail.com>
Message-ID: <7aa837f80802081210w655930e4m2fdd874bd0963b9a@mail.gmail.com>

I did some more testing and found a simpler case that demonstrates the problem

grammar T2;
options {output=AST;}
tokens
{
	TEST;
}
a : b -> ^(TEST b b)
;
b 	:	INT;
c	: 	ID;

ID : 'a'..'z'+ ;
INT : '0'..'9'+;
WS : (' '|'\n') {$channel=HIDDEN;} ;

For input "123" I was expecting ^(TEST 123 123) but I get ^(TEST 123).
 It seems to me that this is a bug.


On Feb 8, 2008 10:58 AM, Grzegorz Cieslewski <cieslewski at hcs.ufl.edu> wrote:
> I looked through the code that ANTLR generates.  It seems to me that
> the function
> org.antlr.runtime.tree.RewriteRuleElementStream.next() is not
> following the spec.
> It does not perform duplication correctly when the size()==1.
>
>
>
> On Feb 8, 2008 9:38 AM, Mark Volkmann <r.mark.volkmann at gmail.com> wrote:
> > On Feb 8, 2008 8:00 AM, Grzegorz Cieslewski <cieslewski at hcs.ufl.edu> wrote:
> > > Hello All,
> > >
> > > I have encountered a problem with tree duplication during AST
> > > construction.  I boiled my problem to following grammar.
> > >
> > > grammar T2;
> > > options {output=AST;}
> > > tokens
> > > {
> > >         TEST;
> > > }
> > > a : c (',' c)* b -> ^(TEST c b)+
> > > ;
> > > b       :       INT;
> > > c       :       ID;
> > >
> > > ID : 'a'..'z'+ ;
> > > INT : '0'..'9'+;
> > > WS : (' '|'\n') {$channel=HIDDEN;} ;
> > >
> > > For input like "x, y, z 1", I was expecting to get a tree looking like
> > >  ^(TEST x 1) ^(TEST y 1) ^(TEST z 1),
> > > but the antlr seems not to duplicate the b rule and I get ^(TEST x 1)
> > > ^(TEST y) ^(TEST z).
> > >
> > > Does any one know what am I doing wrong?  Is this a bug or a "feature".
> >
> > Based on section 7.5 of the book, in the subsection titled
> > "Duplicating Nodes and Trees", what you have looks correct. The
> > relevant statement is this.
> >
> > "In a rewrite rule, ANTLR duplicates any element with cardinality one
> > when referenced more than once or encountered more than once because
> > of an EBNF * or + suffice operator."
> >
> > b is your element with a cardinality of one and it is encountered more
> > than once in your rewrite rule with a + operator, but it isn't being
> > duplicated.
> >
> > I tried your grammar in the latest intermediate build and it doesn't
> > work. I hope someone else has an idea why. I think it's possible
> > you've found a bug.
> >
> > --
> > R. Mark Volkmann
> > Object Computing, Inc.
> >
>
>
>
>
> --
> =====================================================
> Grzegorz Cieslewski
> Research Assistant
> High-performance Computing & Simulation (HCS) Research Laboratory
> University of Florida, Dept. of Electrical and Computer Engineering
> 330 Benton Hall, Gainesville, FL, 32611-6200
> Phone: (352) 392-9041
> Email: cieslewski at hcs.ufl.edu
> Web: www.hcs.ufl.edu
> =====================================================
>



-- 
=====================================================
Grzegorz Cieslewski
Research Assistant
High-performance Computing & Simulation (HCS) Research Laboratory
University of Florida, Dept. of Electrical and Computer Engineering
330 Benton Hall, Gainesville, FL, 32611-6200
Phone: (352) 392-9041
Email: cieslewski at hcs.ufl.edu
Web: www.hcs.ufl.edu
=====================================================

From parrt at cs.usfca.edu  Fri Feb  8 13:24:50 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 8 Feb 2008 13:24:50 -0800
Subject: [antlr-interest] Problem with Duplicating nodes/trees
In-Reply-To: <7aa837f80802081210w655930e4m2fdd874bd0963b9a@mail.gmail.com>
References: <7aa837f80802080600u7955857ewad43f23d9a6f911d@mail.gmail.com>
	<f0fcc6820802080638i1e08810cj53dca4b46a39ba6c@mail.gmail.com>
	<7aa837f80802080758l2791109ex3f8f876873276906@mail.gmail.com>
	<7aa837f80802081210w655930e4m2fdd874bd0963b9a@mail.gmail.com>
Message-ID: <6AD8323E-2E18-40B3-AC84-9CE2DC7669B7@cs.usfca.edu>

I believe I have fixed these in the 3.1 beta

Ter
On Feb 8, 2008, at 12:10 PM, Grzegorz Cieslewski wrote:

> I did some more testing and found a simpler case that demonstrates  
> the problem
>
> grammar T2;
> options {output=AST;}
> tokens
> {
> 	TEST;
> }
> a : b -> ^(TEST b b)
> ;
> b 	:	INT;
> c	: 	ID;
>
> ID : 'a'..'z'+ ;
> INT : '0'..'9'+;
> WS : (' '|'\n') {$channel=HIDDEN;} ;
>
> For input "123" I was expecting ^(TEST 123 123) but I get ^(TEST 123).
> It seems to me that this is a bug.
>
>
> On Feb 8, 2008 10:58 AM, Grzegorz Cieslewski  
> <cieslewski at hcs.ufl.edu> wrote:
>> I looked through the code that ANTLR generates.  It seems to me that
>> the function
>> org.antlr.runtime.tree.RewriteRuleElementStream.next() is not
>> following the spec.
>> It does not perform duplication correctly when the size()==1.
>>
>>
>>
>> On Feb 8, 2008 9:38 AM, Mark Volkmann <r.mark.volkmann at gmail.com>  
>> wrote:
>>> On Feb 8, 2008 8:00 AM, Grzegorz Cieslewski  
>>> <cieslewski at hcs.ufl.edu> wrote:
>>>> Hello All,
>>>>
>>>> I have encountered a problem with tree duplication during AST
>>>> construction.  I boiled my problem to following grammar.
>>>>
>>>> grammar T2;
>>>> options {output=AST;}
>>>> tokens
>>>> {
>>>>        TEST;
>>>> }
>>>> a : c (',' c)* b -> ^(TEST c b)+
>>>> ;
>>>> b       :       INT;
>>>> c       :       ID;
>>>>
>>>> ID : 'a'..'z'+ ;
>>>> INT : '0'..'9'+;
>>>> WS : (' '|'\n') {$channel=HIDDEN;} ;
>>>>
>>>> For input like "x, y, z 1", I was expecting to get a tree looking  
>>>> like
>>>> ^(TEST x 1) ^(TEST y 1) ^(TEST z 1),
>>>> but the antlr seems not to duplicate the b rule and I get ^(TEST  
>>>> x 1)
>>>> ^(TEST y) ^(TEST z).
>>>>
>>>> Does any one know what am I doing wrong?  Is this a bug or a  
>>>> "feature".
>>>
>>> Based on section 7.5 of the book, in the subsection titled
>>> "Duplicating Nodes and Trees", what you have looks correct. The
>>> relevant statement is this.
>>>
>>> "In a rewrite rule, ANTLR duplicates any element with cardinality  
>>> one
>>> when referenced more than once or encountered more than once because
>>> of an EBNF * or + suffice operator."
>>>
>>> b is your element with a cardinality of one and it is encountered  
>>> more
>>> than once in your rewrite rule with a + operator, but it isn't being
>>> duplicated.
>>>
>>> I tried your grammar in the latest intermediate build and it doesn't
>>> work. I hope someone else has an idea why. I think it's possible
>>> you've found a bug.
>>>
>>> --
>>> R. Mark Volkmann
>>> Object Computing, Inc.
>>>
>>
>>
>>
>>
>> --
>> =====================================================
>> Grzegorz Cieslewski
>> Research Assistant
>> High-performance Computing & Simulation (HCS) Research Laboratory
>> University of Florida, Dept. of Electrical and Computer Engineering
>> 330 Benton Hall, Gainesville, FL, 32611-6200
>> Phone: (352) 392-9041
>> Email: cieslewski at hcs.ufl.edu
>> Web: www.hcs.ufl.edu
>> =====================================================
>>
>
>
>
> -- 
> =====================================================
> Grzegorz Cieslewski
> Research Assistant
> High-performance Computing & Simulation (HCS) Research Laboratory
> University of Florida, Dept. of Electrical and Computer Engineering
> 330 Benton Hall, Gainesville, FL, 32611-6200
> Phone: (352) 392-9041
> Email: cieslewski at hcs.ufl.edu
> Web: www.hcs.ufl.edu
> =====================================================


From dave at badgers-in-foil.co.uk  Fri Feb  8 14:44:17 2008
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Fri, 8 Feb 2008 22:44:17 +0000
Subject: [antlr-interest] Trying to keep whitespace in an AST
In-Reply-To: <"L5333E35754944a31A4C66CB570438C39.1202494979.scalix.temporal-wave.com*"@MHS>
References: <47ABD18C.9050409@ec.auckland.ac.nz>
	<"L5333E35754944a31A4C66CB570438C39.1202494979.scalix.temporal-wave.com*"@MHS>
Message-ID: <20080208224416.GA21044@badgers-in-foil.co.uk>

On Fri, Feb 08, 2008 at 10:22:37AM -0800, Jim Idle wrote:
> Now, when you walk you AST and find a method, you just need the token 
> index of the start sequence of your method declaration (this of course 
> depends on the language). Then you can traverse backwards in the token 
> stream (the stream you passed to the parser, mostly CommonTokenStream) 
> for that index, and pick up any off-channel tokens that were ignored by 
> the parser.

I've implemented this approach, more or less, but with additional effort
to take into account changes to the AST.

What made most sense to me was to alter the token stream to account for
the AST changes.  i.e. if I remove a method, I delete from the stream
between child.start and child.stop tokens inclusive.

Of course, CommonTree nodes store start/stop *indexes*, which will leave
lots of AST nodes with invalid indexes if was actually change the
underlying token-stream array.

My solution was to switch the token-stream from an array to a
doubly-linked list, and to replace start/stop indexes with references to
the actual token objects.  Now if a subtree is deleted, I can unlink the
appropriate sublist from the token-stream, and all remaining start/stop
references in the AST will still be valid.

It's quite a lot of effort to maintain that list of tokens, and some
things aren't as nice as I'd wish, but I can happily refactor AST
subtrees while maintaining the formatting of the rest of the file.
That includes keeping doc-comments connected to methods, etc.


Code here,

  http://svn.badgers-in-foil.co.uk/metaas/trunk/src/main/java/uk/co/badgersinfoil/metaas/impl/antlr/


ta,
dave

-- 
http://david.holroyd.me.uk/

From jaluber at gmx.de  Fri Feb  8 15:35:42 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Sat, 09 Feb 2008 00:35:42 +0100
Subject: [antlr-interest] Trying to keep whitespace in an AST
In-Reply-To: <20080208224416.GA21044@badgers-in-foil.co.uk>
References: <47ABD18C.9050409@ec.auckland.ac.nz>	<"L5333E35754944a31A4C66CB570438C39.1202494979.scalix.temporal-wave.com*"@MHS>
	<20080208224416.GA21044@badgers-in-foil.co.uk>
Message-ID: <47ACE74E.3010905@gmx.de>

David Holroyd schrieb:
> 
> 
> Code here,
> 
>   http://svn.badgers-in-foil.co.uk/metaas/trunk/src/main/java/uk/co/badgersinfoil/metaas/impl/antlr/

Very nice! But what license is the code under? A "We may do as we 
please, as long we attribute you" one? That would be the MIT/X license. 
I use it it like:

"The MIT License

Copyright (c) 2007-2008 Johannes Luber

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to 
deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE."

Or do prefer one other?

Johannes

From dave at badgers-in-foil.co.uk  Fri Feb  8 15:46:55 2008
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Fri, 8 Feb 2008 23:46:55 +0000
Subject: [antlr-interest] Trying to keep whitespace in an AST
In-Reply-To: <47ACE74E.3010905@gmx.de>
References: <47ABD18C.9050409@ec.auckland.ac.nz>
	<"L5333E35754944a31A4C66CB570438C39.1202494979.scalix.temporal-wave.com*"@MHS>
	<20080208224416.GA21044@badgers-in-foil.co.uk>
	<47ACE74E.3010905@gmx.de>
Message-ID: <20080208234655.GB21044@badgers-in-foil.co.uk>

On Sat, Feb 09, 2008 at 12:35:42AM +0100, Johannes Luber wrote:
> David Holroyd schrieb:
> >Code here,
> >
> >  http://svn.badgers-in-foil.co.uk/metaas/trunk/src/main/java/uk/co/badgersinfoil/metaas/impl/antlr/
> 
> Very nice! But what license is the code under? A "We may do as we 
> please, as long we attribute you" one? That would be the MIT/X license. 

Oh yes: LGPL, due to the grammar I took from another open-source
project.  (I keep meaning to ask the original author if they're willing
to make it available under the Apache license, and these parts might be
seperable into a new project if there is interest.)

  http://maven.badgers-in-foil.co.uk/sites/metaas/license.html


ta,
dave

-- 
http://david.holroyd.me.uk/

From leon.antlr at mac.com  Fri Feb  8 16:28:41 2008
From: leon.antlr at mac.com (Leon Su)
Date: Fri, 8 Feb 2008 16:28:41 -0800
Subject: [antlr-interest] gUnit 1.0.2 updated
Message-ID: <534F012A-1A2B-4704-BF03-E097FD14EE2A@mac.com>

Hi,

gUnit 1.0.2 is available on the wiki (attachment page):
http://www.antlr.org/wiki/display/ANTLR3/gUnit+-+Grammar+Unit+Testing
It's compatible with the latest antlr-2008-01-23.10.

If you're still using ANTLR 3.0 or 3.0.1, please use the gUnit 1.0.1.

Regards,

Leon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080208/c833bea4/attachment.html 

From jpen054 at ec.auckland.ac.nz  Fri Feb  8 16:48:33 2008
From: jpen054 at ec.auckland.ac.nz (Jamie Penney)
Date: Sat, 09 Feb 2008 13:48:33 +1300
Subject: [antlr-interest] Trying to keep whitespace in an AST
Message-ID: <47ACF861.2050203@ec.auckland.ac.nz>

Thanks for all the replies everyone. I will give the off channel idea a

shot and see if it is feasible. I am working on a simple proof of 
concept grammar
over the weekend so I will report back with how difficult it is to 
associate the whitespace/comments with the correct node.

Thanks
Jamie

Jim Idle wrote:
> Well, remember that the AST is, err abstract ;-). It is just a construct 
> made from the token stream that you parsed. The parser skips tokens that 
> you create "off-channel", such as comments:
>
> COMMENT: '//' ~NL*  { $channel = 2; } ;
>
> Now, when you walk you AST and find a method, you just need the token 
> index of the start sequence of your method declaration (this of course 
> depends on the language). Then you can traverse backwards in the token 
> stream (the stream you passed to the parser, mostly CommonTokenStream) 
> for that index, and pick up any off-channel tokens that were ignored by 
> the parser. If your common token stream is called tstream, then:
>
> tstream.get(index) will return the token at index n, whether it is on 
> the parsing channel or not. There is also tstrem.getRange(.., which will 
> return a List of the tokens in a range, whether on channel or off 
> channel.
>
>
> So, you hit the 'method' keyword/node/token and find out its index (or 
> the index of a real token rather than an imaginary one perhaps). Then 
> you traverse back through the stream until some trigger point such as 
> the first on-channel token before the comments or something. Only you 
> can know exactly where you start and stop, and the problem of 
> associating comments with the correct syntactical element is a thorny 
> one!
>
> Jim
>
>   
>> -----Original Message-----
>> From: Jamie Penney [mailto:jpen054 at ec.auckland.ac.nz]
>> Sent: Thursday, February 07, 2008 7:51 PM
>> To: antlr-interest at antlr.org
>> Subject: [antlr-interest] Trying to keep whitespace in an AST
>>
>> Hi all,
>> I am trying to work out how to create a grammar that will build an AST
>> that keeps both comments and some whitespace. Basically the output 
>>     
> will
>   
>> be formatted code, but we need the semantic information provided by 
>>     
> the
>   
>> AST for other parts of the system. Any comments and blank lines need 
>>     
> to
>   
>> be kept in the output code. Is it possible to have rewriting and AST
>> generation turned on at the same time, or do I have to write two
>> separate grammars? I am new to ANTLR so sorry if I have the wrong idea
>> about anything.
>> To give a concrete example, say I have a language that represents 
>>     
> basic
>   
>> C style statements like so:
>>
>> int a    = 0;
>> int b    = 1;
>> int c    = 2;
>>
>> // reassign a
>> a = b + c;
>>
>> What I need is the semantic information provided by an AST (whether a
>> statement is a declaration, assignment, ect), but I need to transform
>> the language partially too. I need to format the individual elements
>> consistently, so each would be of the form a = b + c; but I also need
>> to
>> retain the newlines and comments between elements.
>>
>> If anyone could point me in the right direction I would be very
>> grateful.
>>
>> Thanks,
>> Jamie Penney
>>     
>
>
>   

-- 
Jamie Penney

http://www.jamiepenney.co.nz



-- 
Jamie Penney

http://www.jamiepenney.co.nz

From darien.hager at etelos-inc.com  Fri Feb  8 17:28:22 2008
From: darien.hager at etelos-inc.com (Darien Hager)
Date: Fri, 8 Feb 2008 17:28:22 -0800
Subject: [antlr-interest] PHP5 Build target status?
In-Reply-To: <L5FD07F038A0746adB94CB6F1A8AE470B.1202188181.scalix.temporal-wave.com*@MHS>
References: <c8c997f40802042006l2eeaf7a1s1d465467773f180a@mail.gmail.com>
	<L5FD07F038A0746adB94CB6F1A8AE470B.1202188181.scalix.temporal-wave.com*@MHS>
Message-ID: <c8c997f40802081728l62676001w83bc54d39a80a870@mail.gmail.com>

On 2/4/08, Jim Idle <jimi at temporal-wave.com> wrote:
>
> No ? go for it if you are prepared to support it J
>
I'll see if it works first :P

Just to get this archived somewhere for the next person with the same
question... So far I've managed to get PHP5.stg to a state where the Lexer
and Parser code it generates is valid PHP logic.

One big wrinkle: PHP5 has no try-catch-finally.

-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are not
the intended recipient, then this is notice that any use, disclosure,
dissemination, distribution or copying is strictly prohibited. If you have
received this message in error please contact the sender by reply mail and
destroy all copies of the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080208/3e540042/attachment-0001.html 

From r.mark.volkmann at gmail.com  Fri Feb  8 18:40:45 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Fri, 8 Feb 2008 20:40:45 -0600
Subject: [antlr-interest] gUnit 1.0.2 updated
In-Reply-To: <534F012A-1A2B-4704-BF03-E097FD14EE2A@mac.com>
References: <534F012A-1A2B-4704-BF03-E097FD14EE2A@mac.com>
Message-ID: <f0fcc6820802081840i5b69ee33h80feef1d2b4a0070@mail.gmail.com>

On Feb 8, 2008 6:28 PM, Leon Su <leon.antlr at mac.com> wrote:
> Hi,
>
> gUnit 1.0.2 is available on the wiki (attachment page):
> http://www.antlr.org/wiki/display/ANTLR3/gUnit+-+Grammar+Unit+Testing
> It's compatible with the latest antlr-2008-01-23.10.

Thank you so much Leon! I've been waiting for this.

Is there a trick to testing the start rule which generates the topmost
AST containing the nil root element supplied by ANTLR?

Here's the rule I'm testing.

script: NEWLINE? statement*;

statement is a rule that ends in terminator.
terminator can be a NEWLINE or EOF.

Here's the test that isn't working.

script:
<<
a = 19
list variables
>> -> ((= a 19) (list variables))

I get the following output.

1 failures found:
test13 (script) -
expected: ((= a 19) (list variables))
actual:
 (= a 19) (list variables)

-- 
R. Mark Volkmann
Object Computing, Inc.

From leon.antlr at mac.com  Fri Feb  8 20:34:14 2008
From: leon.antlr at mac.com (Leon Su)
Date: Fri, 8 Feb 2008 20:34:14 -0800
Subject: [antlr-interest] gUnit 1.0.2 updated
In-Reply-To: <f0fcc6820802081840i5b69ee33h80feef1d2b4a0070@mail.gmail.com>
References: <534F012A-1A2B-4704-BF03-E097FD14EE2A@mac.com>
	<f0fcc6820802081840i5b69ee33h80feef1d2b4a0070@mail.gmail.com>
Message-ID: <F657E513-D4E4-4400-9E67-4CBEDA4B888B@mac.com>

Hi Mark,

Thanks for pointing out this. When testing a start rule (output=AST),  
gUnit will
get the nil node generated from ANTLR which represents a list of  
subtrees.
The outermost parentheses are not displayed currently.
I'll add this to the next release. Sorry for the inconvenience.

Leon

On Feb 8, 2008, at 6:40 PM, Mark Volkmann wrote:

> On Feb 8, 2008 6:28 PM, Leon Su <leon.antlr at mac.com> wrote:
>> Hi,
>>
>> gUnit 1.0.2 is available on the wiki (attachment page):
>> http://www.antlr.org/wiki/display/ANTLR3/gUnit+-+Grammar+Unit+Testing
>> It's compatible with the latest antlr-2008-01-23.10.
>
> Thank you so much Leon! I've been waiting for this.
>
> Is there a trick to testing the start rule which generates the topmost
> AST containing the nil root element supplied by ANTLR?
>
> Here's the rule I'm testing.
>
> script: NEWLINE? statement*;
>
> statement is a rule that ends in terminator.
> terminator can be a NEWLINE or EOF.
>
> Here's the test that isn't working.
>
> script:
> <<
> a = 19
> list variables
>>> -> ((= a 19) (list variables))
>
> I get the following output.
>
> 1 failures found:
> test13 (script) -
> expected: ((= a 19) (list variables))
> actual:
>  (= a 19) (list variables)
>
> -- 
> R. Mark Volkmann
> Object Computing, Inc.


From jimi at temporal-wave.com  Fri Feb  8 22:01:22 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 8 Feb 2008 22:01:22 -0800
Subject: [antlr-interest] PHP5 Build target status?
In-Reply-To: <c8c997f40802081728l62676001w83bc54d39a80a870@mail.gmail.com>
Message-ID: <"LD2FB771812B34c9f84CF794BC3BB6BBB.1202536905.scalix.temporal-wave.com*"@MHS>

You can just steal the methodology of the C target, which also does not
have try/catch. However, I am pretty sure that PHP5 DOES have try/catch
in Zend, and that it is PHP4 that you have to use set_error_handler in?

 

http://php.mirrors.ilisys.com.au/manual/en/language.exceptions.php

 

 

Jim

 

From: Darien Hager [mailto:darien.hager at etelos-inc.com] 
Sent: Friday, February 08, 2008 5:28 PM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] PHP5 Build target status?

 

On 2/4/08, Jim Idle <jimi at temporal-wave.com> wrote:

   No ? go for it if you are prepared to support it J

I'll see if it works first :P

Just to get this archived somewhere for the next person with the same
question... So far I've managed to get PHP5.stg to a state where the
Lexer and Parser code it generates is valid PHP logic.

One big wrinkle: PHP5 has no try-catch-finally.


-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com 

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are
not the intended recipient, then this is notice that any use,
disclosure, dissemination, distribution or copying is strictly
prohibited. If you have received this message in error please contact
the sender by reply mail and destroy all copies of the original message.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080208/36bfbb9c/attachment.html 

From jimi at temporal-wave.com  Fri Feb  8 22:03:52 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 8 Feb 2008 22:03:52 -0800
Subject: [antlr-interest] PHP5 Build target status?
In-Reply-To: <"LD2FB771812B34c9f84CF794BC3BB6BBB.1202536905.scalix.temporal-wave.com*"@MHS>
Message-ID: <"LD1F29F6E8FE44a2a94A8BCF035C3438A.1202537058.scalix.temporal-wave.com*"@MHS>

Ah ? no finally you mean. It doesn?t have goto either ;-), so you might
need to do what the C target does after all, but avoid the goto
statement.

 

Jim

 

From: Jim Idle 
Sent: Friday, February 08, 2008 10:01 PM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] PHP5 Build target status?

 

You can just steal the methodology of the C target, which also does not
have try/catch. However, I am pretty sure that PHP5 DOES have try/catch
in Zend, and that it is PHP4 that you have to use set_error_handler in? 

 

http://php.mirrors.ilisys.com.au/manual/en/language.exceptions.php 

 

 

Jim 

 

From: Darien Hager [mailto:darien.hager at etelos-inc.com] 
Sent: Friday, February 08, 2008 5:28 PM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] PHP5 Build target status? 

 

On 2/4/08, Jim Idle <jimi at temporal-wave.com> wrote: 

   No ? go for it if you are prepared to support it J 

I'll see if it works first :P

Just to get this archived somewhere for the next person with the same
question... So far I've managed to get PHP5.stg to a state where the
Lexer and Parser code it generates is valid PHP logic.

One big wrinkle: PHP5 has no try-catch-finally. 


-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com 

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are
not the intended recipient, then this is notice that any use,
disclosure, dissemination, distribution or copying is strictly
prohibited. If you have received this message in error please contact
the sender by reply mail and destroy all copies of the original message.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080208/441f1172/attachment.html 

From r.mark.volkmann at gmail.com  Sat Feb  9 03:17:36 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Sat, 9 Feb 2008 05:17:36 -0600
Subject: [antlr-interest] gUnit 1.0.2 updated
In-Reply-To: <F657E513-D4E4-4400-9E67-4CBEDA4B888B@mac.com>
References: <534F012A-1A2B-4704-BF03-E097FD14EE2A@mac.com>
	<f0fcc6820802081840i5b69ee33h80feef1d2b4a0070@mail.gmail.com>
	<F657E513-D4E4-4400-9E67-4CBEDA4B888B@mac.com>
Message-ID: <f0fcc6820802090317n6f9df184me4dedf84205c671d@mail.gmail.com>

On Feb 8, 2008 10:34 PM, Leon Su <leon.antlr at mac.com> wrote:
> Hi Mark,
>
> Thanks for pointing out this. When testing a start rule (output=AST),
> gUnit will
> get the nil node generated from ANTLR which represents a list of
> subtrees.
> The outermost parentheses are not displayed currently.
> I'll add this to the next release. Sorry for the inconvenience.

No problem. So that means that even though I don't see the outer
parens, gUnit knows they are there. Why then do I get this output
indicating a test failure? It seems the actual output matches the
expected.

expected: ((= a 19) (list variables))
actual:
  (= a 19) (list variables)

Something is suspicious about the whitespace between "actual:" and the
first "(". There is a newline and two spaces.

Let me know if you'd like the files for my grammar and my test.

> On Feb 8, 2008, at 6:40 PM, Mark Volkmann wrote:
>
> > On Feb 8, 2008 6:28 PM, Leon Su <leon.antlr at mac.com> wrote:
> >> Hi,
> >>
> >> gUnit 1.0.2 is available on the wiki (attachment page):
> >> http://www.antlr.org/wiki/display/ANTLR3/gUnit+-+Grammar+Unit+Testing
> >> It's compatible with the latest antlr-2008-01-23.10.
> >
> > Thank you so much Leon! I've been waiting for this.
> >
> > Is there a trick to testing the start rule which generates the topmost
> > AST containing the nil root element supplied by ANTLR?
> >
> > Here's the rule I'm testing.
> >
> > script: NEWLINE? statement*;
> >
> > statement is a rule that ends in terminator.
> > terminator can be a NEWLINE or EOF.
> >
> > Here's the test that isn't working.
> >
> > script:
> > <<
> > a = 19
> > list variables
> >>> -> ((= a 19) (list variables))
> >
> > I get the following output.
> >
> > 1 failures found:
> > test13 (script) -
> > expected: ((= a 19) (list variables))
> > actual:
> >  (= a 19) (list variables)
> >
> > --
> > R. Mark Volkmann
> > Object Computing, Inc.
>
>



-- 
R. Mark Volkmann
Object Computing, Inc.

From stevagewp at gmail.com  Sat Feb  9 06:53:41 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Sun, 10 Feb 2008 01:53:41 +1100
Subject: [antlr-interest] Generateambigwarnings option
In-Reply-To: <47a80ff4.05a4100a.4cbd.fffff0b9SMTPIN_ADDED@mx.google.com>
References: <b8ceeef70802042256l42caca54v3b8df6596afd95ef@mail.gmail.com>
	<47a80ff4.05a4100a.4cbd.fffff0b9SMTPIN_ADDED@mx.google.com>
Message-ID: <b8ceeef70802090653uc9cfe1bs5926f4292397fca6@mail.gmail.com>

On 2/5/08, Gavin Lambert <antlr at mirality.co.nz> wrote:
> At 19:56 5/02/2008, Steve Bennett wrote:
>  >
>  >I noticed this option in some older grammars, but it doesn't
> seem
>  >to be around anymore. Did it change names? It looks handy for
>  >making a more readable grammar.
>
> That's a v2-ism.  In v3 you're expected to either live with it or
> rewrite your grammar so it's not ambiguous any more ;)

Yeah, well that's sort of what I figured. Both options are kind of
inconvenient: pages of warnings obscure real warnings that I should
know about. Placing synpreds everywhere reduces readability, and iiuc,
performance.

Not a biggie though.

Steve

From stevagewp at gmail.com  Sat Feb  9 09:53:22 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Sun, 10 Feb 2008 04:53:22 +1100
Subject: [antlr-interest] Syntactic anti-predicates
Message-ID: <b8ceeef70802090953v5bb8d0b1p8d25215e1e8cf3a8@mail.gmail.com>

Is there a convenient way to say "if the upcoming tokens look like X Y
Z" then *don't* match this rule? It seems I always have to resort to a
semantic predicate like this:

{input.LA(1) != X && input.LA(2) != Y}? =>  R

or some complicated rule that amount to not X Y Z:

(notXYZ) => R

Is there a simple way I'm missing?

Thanks,
Steve

From leon.antlr at mac.com  Sat Feb  9 10:42:19 2008
From: leon.antlr at mac.com (Leon Su)
Date: Sat, 9 Feb 2008 10:42:19 -0800
Subject: [antlr-interest] gUnit 1.0.2 updated
In-Reply-To: <f0fcc6820802090317n6f9df184me4dedf84205c671d@mail.gmail.com>
References: <534F012A-1A2B-4704-BF03-E097FD14EE2A@mac.com>
	<f0fcc6820802081840i5b69ee33h80feef1d2b4a0070@mail.gmail.com>
	<F657E513-D4E4-4400-9E67-4CBEDA4B888B@mac.com>
	<f0fcc6820802090317n6f9df184me4dedf84205c671d@mail.gmail.com>
Message-ID: <50B6A7FE-63B1-40D4-A602-360E9AC689CB@mac.com>

Yes, I would like to have the files for your grammar and test.
They will be helpful for me to test and debug the program.
Thanks!

Leon

On Feb 9, 2008, at 3:17 AM, Mark Volkmann wrote:

> On Feb 8, 2008 10:34 PM, Leon Su <leon.antlr at mac.com> wrote:
>> Hi Mark,
>>
>> Thanks for pointing out this. When testing a start rule (output=AST),
>> gUnit will
>> get the nil node generated from ANTLR which represents a list of
>> subtrees.
>> The outermost parentheses are not displayed currently.
>> I'll add this to the next release. Sorry for the inconvenience.
>
> No problem. So that means that even though I don't see the outer
> parens, gUnit knows they are there. Why then do I get this output
> indicating a test failure? It seems the actual output matches the
> expected.
>
> expected: ((= a 19) (list variables))
> actual:
>   (= a 19) (list variables)
>
> Something is suspicious about the whitespace between "actual:" and the
> first "(". There is a newline and two spaces.
>
> Let me know if you'd like the files for my grammar and my test.
>
>> On Feb 8, 2008, at 6:40 PM, Mark Volkmann wrote:
>>
>>> On Feb 8, 2008 6:28 PM, Leon Su <leon.antlr at mac.com> wrote:
>>>> Hi,
>>>>
>>>> gUnit 1.0.2 is available on the wiki (attachment page):
>>>> http://www.antlr.org/wiki/display/ANTLR3/gUnit+-+Grammar+Unit 
>>>> +Testing
>>>> It's compatible with the latest antlr-2008-01-23.10.
>>>
>>> Thank you so much Leon! I've been waiting for this.
>>>
>>> Is there a trick to testing the start rule which generates the  
>>> topmost
>>> AST containing the nil root element supplied by ANTLR?
>>>
>>> Here's the rule I'm testing.
>>>
>>> script: NEWLINE? statement*;
>>>
>>> statement is a rule that ends in terminator.
>>> terminator can be a NEWLINE or EOF.
>>>
>>> Here's the test that isn't working.
>>>
>>> script:
>>> <<
>>> a = 19
>>> list variables
>>>>> -> ((= a 19) (list variables))
>>>
>>> I get the following output.
>>>
>>> 1 failures found:
>>> test13 (script) -
>>> expected: ((= a 19) (list variables))
>>> actual:
>>>  (= a 19) (list variables)
>>>
>>> --
>>> R. Mark Volkmann
>>> Object Computing, Inc.
>>
>>
>
>
>
> -- 
> R. Mark Volkmann
> Object Computing, Inc.


From antlr at mirality.co.nz  Sat Feb  9 13:36:02 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 10 Feb 2008 10:36:02 +1300
Subject: [antlr-interest] Syntactic anti-predicates
In-Reply-To: <b8ceeef70802090953v5bb8d0b1p8d25215e1e8cf3a8@mail.gmail.co
 m>
References: <b8ceeef70802090953v5bb8d0b1p8d25215e1e8cf3a8@mail.gmail.com>
Message-ID: <20080209213622.842B111ED5E@www.antlr.org>

At 06:53 10/02/2008, Steve Bennett wrote:
 >
 >Is there a convenient way to say "if the upcoming tokens look
 >like X Y Z" then *don't* match this rule? It seems I always
 >have to resort to a semantic predicate like this:
 >
 >{input.LA(1) != X && input.LA(2) != Y}? =>  R
 >
 >or some complicated rule that amount to not X Y Z:
 >
 >(notXYZ) => R
 >
 >Is there a simple way I'm missing?

Why not just use:

ruleA
   :  (X Y Z) => ruleXYZ
   |  ruleNotXYZ
   ;

?


-- 
No virus found in this outgoing message.
Checked by AVG Free Edition. 
Version: 7.5.516 / Virus Database: 269.20.0/1268 - Release Date: 9/02/2008 11:54



From micke.hovmoller at gmail.com  Sat Feb  9 13:49:55 2008
From: micke.hovmoller at gmail.com (=?ISO-8859-1?Q?Micke_Hovm=F6ller?=)
Date: Sat, 9 Feb 2008 22:49:55 +0100
Subject: [antlr-interest] Beginner question: rule preference?
Message-ID: <18b4fcc20802091349y3d142846m18ab484e621435ea@mail.gmail.com>

I'm trying to parse this small text:
-----
** Dealing down cards **
Dealt to Player [ Td , 3c ]
-----

With this grammar in ANTLRWorks 1.1.7

-----
grammar Mini;

dealingdown
	:	'** Dealing down cards **' NEWLINE 'Dealt to ' ID ' [ ' card ','
card ']' NEWLINE;

card	:	RANK SUIT;

RANK	:	('2'..'9'|'T'|'J'|'Q'|'K'|'A') ;

SUIT	:	('d'|'c'|'h'|'s');

ID  :   ('a'..'z'|'A'..'Z'|'_'|'0'..'9')+ ;

NEWLINE:'\r'? '\n' ;
-----

This gives a MismatchedTokenException when I get to the "Td" input. I
suppose this is because that matches with ID as well. What do I do to
tell the grammar to use the card part only here?

(I have ordered the ANTLR book from Amazon, but it hasn't arrived yet,
and I can't wait to get my project started.)

/Micke

From andreas.bartho at inf.tu-dresden.de  Sat Feb  9 14:16:42 2008
From: andreas.bartho at inf.tu-dresden.de (Andreas Bartho)
Date: Sat, 09 Feb 2008 23:16:42 +0100
Subject: [antlr-interest] Removing global backtracking
Message-ID: <47AE264A.8020807@inf.tu-dresden.de>

Hello,

inspired by the recent discussion about global backtracking I tried to 
remove global backtracking from my grammar. My plan was to enable 
backtracking for each rule individually, then turn global backtracking 
off and try to disable individual backtracking for one rule at a time to 
identify the rules that cause problems.
However, this does not work. ANTLR reports for a number of rules that 
multiple alternatives can match a given input (even for rules that have 
only one alternative).
Isn't global backtracking and local backtracking for each rule supposed 
to be equivalent? If not, how do they differ?
I tried version 3.01 and the latest intermediate built.

Andreas

From r.mark.volkmann at gmail.com  Sat Feb  9 14:41:24 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Sat, 9 Feb 2008 16:41:24 -0600
Subject: [antlr-interest] Beginner question: rule preference?
In-Reply-To: <18b4fcc20802091349y3d142846m18ab484e621435ea@mail.gmail.com>
References: <18b4fcc20802091349y3d142846m18ab484e621435ea@mail.gmail.com>
Message-ID: <f0fcc6820802091441s248deccfp4273dc8a3c834383@mail.gmail.com>

On Feb 9, 2008 3:49 PM, Micke Hovm?ller <micke.hovmoller at gmail.com> wrote:
> I'm trying to parse this small text:
> -----
> ** Dealing down cards **
> Dealt to Player [ Td , 3c ]
> -----
>
> With this grammar in ANTLRWorks 1.1.7
>
> -----
> grammar Mini;
>
> dealingdown
>         :       '** Dealing down cards **' NEWLINE 'Dealt to ' ID ' [ ' card ','
> card ']' NEWLINE;
>
> card    :       RANK SUIT;
>
> RANK    :       ('2'..'9'|'T'|'J'|'Q'|'K'|'A') ;
>
> SUIT    :       ('d'|'c'|'h'|'s');
>
> ID  :   ('a'..'z'|'A'..'Z'|'_'|'0'..'9')+ ;
>
> NEWLINE:'\r'? '\n' ;
> -----
>
> This gives a MismatchedTokenException when I get to the "Td" input. I
> suppose this is because that matches with ID as well. What do I do to
> tell the grammar to use the card part only here?

There are a few problems with your grammar.

1) Your grammar says the input has to end with a NEWLINE. You probably
want it to end with the special token EOF.

2) I think you want card to be a token and you don't want rank and
suit to be tokens. You'll learn more about fragment rules in the book.

3) You should handle whitespace differently.

Here's my solution. It works with your example input. Note that you
had several unnecessary parentheses in your grammar.

grammar Mini;

dealingdown
  : '** Dealing down cards **' NEWLINE
    'Dealt to' ID '[' CARD ',' CARD ']' EOF;

CARD: RANK SUIT;
fragment RANK: '2'..'9'|'T'|'J'|'Q'|'K'|'A';
fragment SUIT: 'd'|'c'|'h'|'s';

ID: ('a'..'z'|'A'..'Z'|'_'|'0'..'9')+ ;

NEWLINE: '\r'? '\n';
WS: ' '+ { $channel = HIDDEN; };

> (I have ordered the ANTLR book from Amazon, but it hasn't arrived yet,
> and I can't wait to get my project started.)

It really helped me!

-- 
R. Mark Volkmann
Object Computing, Inc.

From jpen054 at ec.auckland.ac.nz  Sat Feb  9 15:58:16 2008
From: jpen054 at ec.auckland.ac.nz (Jamie Penney)
Date: Sun, 10 Feb 2008 12:58:16 +1300
Subject: [antlr-interest] ANTLRWorks freezing
In-Reply-To: <A2C37C0D-1E4B-4383-9216-EE14B5D251CE@arizona-software.ch>
References: <47AABA7B.8080303@ec.auckland.ac.nz>
	<A2C37C0D-1E4B-4383-9216-EE14B5D251CE@arizona-software.ch>
Message-ID: <47AE3E18.10204@ec.auckland.ac.nz>

Unfortunately it doesn't do it anymore - I purchased a new motherboard 
and cpu yesterday and formatted my machine and now it works fine! Sorry 
I couldn't be more help.

Jamie

Jean Bovet wrote:
> Hi,
>
> Could you be more specific about your configuration? Also, is there 
> any exceptions in the terminal? Can you try to take a thread dump when 
> it is consuming 100% CPU?
>
> Regards,
>
> Jean
>
> On Feb 6, 2008, at 11:59 PM, Jamie Penney wrote:
>
>> Hi Team,
>>
>> I am having an issue where ANTLRWorks will lock up when attempting to 
>> open or save a project. Clicking on the open or save menu items 
>> causes my CPU usage to jump to 100%, and ANTLRWorks locks up - but 
>> still repaints the window. It eventually gets around to bringing up 
>> the open/save dialog. It does not do this on my laptop however. Any 
>> ideas as to why this is? I have tried increasing the heap size and 
>> all of those standard java tricks already.
>>
>> Thanks,
>> Jamie Penney
>> -- 
>> Jamie Penney
>>
>> http://www.jamiepenney.co.nz
>

From stevagewp at gmail.com  Sat Feb  9 19:48:50 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Sun, 10 Feb 2008 14:48:50 +1100
Subject: [antlr-interest] Syntactic anti-predicates
In-Reply-To: <47ae1cd6.0a87460a.2c94.ffffb235SMTPIN_ADDED@mx.google.com>
References: <b8ceeef70802090953v5bb8d0b1p8d25215e1e8cf3a8@mail.gmail.com>
	<47ae1cd6.0a87460a.2c94.ffffb235SMTPIN_ADDED@mx.google.com>
Message-ID: <b8ceeef70802091948h71261c64w6acd1e58356dff45@mail.gmail.com>

On 2/10/08, Gavin Lambert <antlr at mirality.co.nz> wrote:
> Why not just use:
>
> ruleA
>    :  (X Y Z) => ruleXYZ
>    |  ruleNotXYZ
>    ;

Ok, well say the context looks something like this:


ruleB:
   ruleA*
   X Y W
;

What I want to do is tell ruleA to break out if there's X Y W coming
rather than X Y Z. Maybe it's as simple as:

ruleA: (X Y Z) => X Y Z;

as you suggest. I'm probably just confused :)

Steve

From akhailtash at gmail.com  Sat Feb  9 21:05:57 2008
From: akhailtash at gmail.com (Amal Khailtash)
Date: Sun, 10 Feb 2008 00:05:57 -0500
Subject: [antlr-interest] Verilog VCD Parser
Message-ID: <f6a04d790802092105v798ae7adh4819e88f4719a76f@mail.gmail.com>

Can someone please guide me to writing a grammar that can parse the
following:

  $comment
    ANY CHARACTER HERE INCLUDING WHITESPACE
  $end

  $version
    ANY CHARACTER HERE INCLUDING WHITESPACE
  $end

I am having problem with the text between the two keywords.  Generally
whitespace is ignored, but not if it is between $commen/$end or
$version/$end.

Any help would be appreciated,
-- Amal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080210/63e8ca74/attachment.html 

From ph_reader at faes.net  Sun Feb 10 02:39:31 2008
From: ph_reader at faes.net (Philippe Faes)
Date: Sun, 10 Feb 2008 11:39:31 +0100
Subject: [antlr-interest] translating a tree to another tree
Message-ID: <b4f9f36e0802100239x67e27f5sbaac777987e04161@mail.gmail.com>

Dear all,

I would like to translate an AST, generated with ANTLR to another AST. This
is usefull for having layers of intermediate representations, each new layer
more abstract than the previous.
I tried using a treewalker and setting output=AST, but this gives two
problems.
First, I need to set   ASTLabelType=Token so that the TreeAdaptor can take
Tokens as input. This is not what I want, since the tree being walked
constists of Tree nodes.
Second, the generated code tries to read retval.stop on objects of
TreeRuleReturnScope, but these objects only have a "start" field. The "stop"
field is found in ParserRuleReturnScope, but the tree walker uses
TreeRuleReturnScope instead.

Am I doing something wrong? Is the generation of new trees from old trees
not supported in ANTLR? If not: Why? It seems like a natural thing to try.

kind regards
Philippe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080210/3edd39a1/attachment.html 

From pink at odahoda.de  Sun Feb 10 03:24:32 2008
From: pink at odahoda.de (Benjamin Niemann)
Date: Sun, 10 Feb 2008 12:24:32 +0100
Subject: [antlr-interest] translating a tree to another tree
References: <b4f9f36e0802100239x67e27f5sbaac777987e04161@mail.gmail.com>
Message-ID: <fommtg$bt9$1@ger.gmane.org>

Hi Philippe,

Philippe Faes wrote:

> I would like to translate an AST, generated with ANTLR to another AST.
> This is usefull for having layers of intermediate representations, each
> new layer more abstract than the previous.
> I tried using a treewalker and setting output=AST, but this gives two
> problems.
> First, I need to set   ASTLabelType=Token so that the TreeAdaptor can take
> Tokens as input. This is not what I want, since the tree being walked
> constists of Tree nodes.
> Second, the generated code tries to read retval.stop on objects of
> TreeRuleReturnScope, but these objects only have a "start" field. The
> "stop" field is found in ParserRuleReturnScope, but the tree walker uses
> TreeRuleReturnScope instead.
> 
> Am I doing something wrong? Is the generation of new trees from old trees
> not supported in ANTLR? If not: Why? It seems like a natural thing to try.

output=AST for tree parsers is supported by the upcoming 3.1 release. 3.0
can't do it. You could try a recent daily build from
<http://www.antlr.org/download/build/>. The official release should not be
far ahead.

HTH

-- 
Benjamin Niemann
Email: pink at odahoda dot de
WWW: http://pink.odahoda.de/


From stevagewp at gmail.com  Sun Feb 10 05:20:40 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Mon, 11 Feb 2008 00:20:40 +1100
Subject: [antlr-interest] syntactic predicates vs. backtrack=true
In-Reply-To: <L60DF3624A3224c32881F9723E903EEE6.1202231804.scalix.temporal-wave.com*@MHS>
References: <f0fcc6820802050441j4481f0bbwa4f92bddebe6e730@mail.gmail.com>
	<L60DF3624A3224c32881F9723E903EEE6.1202231804.scalix.temporal-wave.com*@MHS>
Message-ID: <b8ceeef70802100520qebad812r5752ed09570ad90d@mail.gmail.com>

On 2/6/08, Jim Idle <jimi at temporal-wave.com> wrote:
> There are some languages that are not necessarily good targets for an
> ANTLR grammar and there isn't a good way to parse them without
> backtracking or lots of predicates. Wiki markup languages are like that
> for instance because they are a bit haphazard and tend to have lots of
> context. If you are not trying to parse such a language, then it is
> usually possible to create a syntactic parser that has very few
> ambiguities. Experience and effort is required. Experience lets you spot
> the things that are truly an ambiguity in the language spec vs something
> that you could specify in a better way.

Hey Jim, would you mind expanding on why parsing Wiki markup with
ANTLR is a bad idea? I ask because, uh, I'm trying to write a parser
for wikitext with ANTLR :) The two problems you raise are "a bit
haphazard" and "lots of context". For me, the first is the entire
reason for the ANTLR grammar: to define all the rules rigidly (for the
first time) so that end users of the wikitext actually have a fixed
understanding of what the grammar is. And the second I haven't found
too bad: a small number of flags like "prohibit_literal_pipe" has
really solved that problem: rather than using "context" like "I'm
deeply nested inside a table, therefore I can't start a line with a
pipe", I push the restrictions down: "This table cell is normal text,
except no line can start with a pipe".

The biggest difficulty has been that *everything* is valid syntax: if
it doesn't match some particular language construction, it just
renders literally:

[[image:foo.jpg|thumbnail|this is a foo!]] <- that renders an image

[[image:foo.jpg|thumbnail|this is a foo!] <- that renders literally

Which means that potentially everything has to be parsed several times
for different constructs, and if all that fails, it has to be parsed
once more as literally. Is this what you mean by "allowing different
syntax paths"?

Anyway, I'd like to know if there are other reasons why ANTLR is a bad
choice for a wikitext parser.

Many thanks,
Steve

From jaluber at gmx.de  Sun Feb 10 05:39:13 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Sun, 10 Feb 2008 14:39:13 +0100
Subject: [antlr-interest] Removing global backtracking
In-Reply-To: <47AE264A.8020807@inf.tu-dresden.de>
References: <47AE264A.8020807@inf.tu-dresden.de>
Message-ID: <47AEFE81.6040601@gmx.de>

Andreas Bartho schrieb:
> Hello,
> 
> inspired by the recent discussion about global backtracking I tried to 
> remove global backtracking from my grammar. My plan was to enable 
> backtracking for each rule individually, then turn global backtracking 
> off and try to disable individual backtracking for one rule at a time to 
> identify the rules that cause problems.
> However, this does not work. ANTLR reports for a number of rules that 
> multiple alternatives can match a given input (even for rules that have 
> only one alternative).
> Isn't global backtracking and local backtracking for each rule supposed 
> to be equivalent? If not, how do they differ?
> I tried version 3.01 and the latest intermediate built.
> 
> Andreas
> 
I believe that this behavior means that you have an 
if-then-else-ambiguity in your grammar. Usually their default behaviour 
is the required one.

Johannes

From r.mark.volkmann at gmail.com  Sun Feb 10 06:33:01 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Sun, 10 Feb 2008 08:33:01 -0600
Subject: [antlr-interest] Verilog VCD Parser
In-Reply-To: <f6a04d790802092105v798ae7adh4819e88f4719a76f@mail.gmail.com>
References: <f6a04d790802092105v798ae7adh4819e88f4719a76f@mail.gmail.com>
Message-ID: <f0fcc6820802100633j72a0561ctb82f00296c07dff1@mail.gmail.com>

On Feb 9, 2008 11:05 PM, Amal Khailtash <akhailtash at gmail.com> wrote:
> Can someone please guide me to writing a grammar that can parse the
> following:
>
>   $comment
>     ANY CHARACTER HERE INCLUDING WHITESPACE
>   $end
>
>   $version
>     ANY CHARACTER HERE INCLUDING WHITESPACE
>    $end
>
> I am having problem with the text between the two keywords.  Generally
> whitespace is ignored, but not if it is between $commen/$end or
> $version/$end.

Here's a start, but it's not completely correct. I'll keep trying.

grammar Verilog;

script: block* EOF;

block: comment | version;

comment: '$comment' CONTENT '$end';

version: '$version' CONTENT '$end';

NEWLINE: ('\r'? '\n')+ { $channel = HIDDEN; };

CONTENT
//options { greedy = false; }
  : ~('$')*
  ;

-- 
R. Mark Volkmann
Object Computing, Inc.

From r.mark.volkmann at gmail.com  Sun Feb 10 06:35:14 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Sun, 10 Feb 2008 08:35:14 -0600
Subject: [antlr-interest] Verilog VCD Parser
In-Reply-To: <f0fcc6820802100633j72a0561ctb82f00296c07dff1@mail.gmail.com>
References: <f6a04d790802092105v798ae7adh4819e88f4719a76f@mail.gmail.com>
	<f0fcc6820802100633j72a0561ctb82f00296c07dff1@mail.gmail.com>
Message-ID: <f0fcc6820802100635w2958105h872efd40f0dbe9f3@mail.gmail.com>

On Feb 10, 2008 8:33 AM, Mark Volkmann <r.mark.volkmann at gmail.com> wrote:
> On Feb 9, 2008 11:05 PM, Amal Khailtash <akhailtash at gmail.com> wrote:
> > Can someone please guide me to writing a grammar that can parse the
> > following:
> >
> >   $comment
> >     ANY CHARACTER HERE INCLUDING WHITESPACE
> >   $end
> >
> >   $version
> >     ANY CHARACTER HERE INCLUDING WHITESPACE
> >    $end
> >
> > I am having problem with the text between the two keywords.  Generally
> > whitespace is ignored, but not if it is between $commen/$end or
> > $version/$end.
>
> Here's a start, but it's not completely correct. I'll keep trying.
>
> grammar Verilog;
>
> script: block* EOF;
>
> block: comment | version;
>
> comment: '$comment' CONTENT '$end';
>
> version: '$version' CONTENT '$end';
>
> NEWLINE: ('\r'? '\n')+ { $channel = HIDDEN; };
>
> CONTENT
> //options { greedy = false; }
>   : ~('$')*
>   ;

Hey, this does work! I fell into that old trap of not selecting the
correct start rule in ANTLRWorks. The downside of my grammar is that
you can't have a '$' in the content of a comment or version.

-- 
R. Mark Volkmann
Object Computing, Inc.

From akhailtash at gmail.com  Sun Feb 10 07:17:02 2008
From: akhailtash at gmail.com (Amal Khailtash)
Date: Sun, 10 Feb 2008 10:17:02 -0500
Subject: [antlr-interest] Tokenizing question
Message-ID: <f6a04d790802100717k1043385awb00dccc4f9a26790@mail.gmail.com>

In a language that whitespace is ignored, how can one tokenize and parse
constructs like this:

  word : number identifier ;

where 'word' could look like:

  10 abc  or  10abc

In this case number and identifier could have no whitespace between them or
have some.

-- Amal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080210/a292a196/attachment.html 

From akhailtash at gmail.com  Sun Feb 10 08:44:35 2008
From: akhailtash at gmail.com (Amal Khailtash)
Date: Sun, 10 Feb 2008 11:44:35 -0500
Subject: [antlr-interest] Verilog VCD Parser
In-Reply-To: <f0fcc6820802100635w2958105h872efd40f0dbe9f3@mail.gmail.com>
References: <f6a04d790802092105v798ae7adh4819e88f4719a76f@mail.gmail.com>
	<f0fcc6820802100633j72a0561ctb82f00296c07dff1@mail.gmail.com>
	<f0fcc6820802100635w2958105h872efd40f0dbe9f3@mail.gmail.com>
Message-ID: <f6a04d790802100844x574e9104mf965fcd119ec7615@mail.gmail.com>

That's the problem.  There is no restriction on comment/version content.
Especially version might have cvs keywords, say $revision, ...

On Feb 10, 2008 9:35 AM, Mark Volkmann <r.mark.volkmann at gmail.com> wrote:

> On Feb 10, 2008 8:33 AM, Mark Volkmann <r.mark.volkmann at gmail.com> wrote:
> > On Feb 9, 2008 11:05 PM, Amal Khailtash <akhailtash at gmail.com> wrote:
> > > Can someone please guide me to writing a grammar that can parse the
> > > following:
> > >
> > >   $comment
> > >     ANY CHARACTER HERE INCLUDING WHITESPACE
> > >   $end
> > >
> > >   $version
> > >     ANY CHARACTER HERE INCLUDING WHITESPACE
> > >    $end
> > >
> > > I am having problem with the text between the two keywords.  Generally
> > > whitespace is ignored, but not if it is between $commen/$end or
> > > $version/$end.
> >
> > Here's a start, but it's not completely correct. I'll keep trying.
> >
> > grammar Verilog;
> >
> > script: block* EOF;
> >
> > block: comment | version;
> >
> > comment: '$comment' CONTENT '$end';
> >
> > version: '$version' CONTENT '$end';
> >
> > NEWLINE: ('\r'? '\n')+ { $channel = HIDDEN; };
> >
> > CONTENT
> > //options { greedy = false; }
> >   : ~('$')*
> >   ;
>
> Hey, this does work! I fell into that old trap of not selecting the
> correct start rule in ANTLRWorks. The downside of my grammar is that
> you can't have a '$' in the content of a comment or version.
>
> --
> R. Mark Volkmann
> Object Computing, Inc.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080210/cde72d6c/attachment.html 

From akhailtash at gmail.com  Sun Feb 10 09:59:38 2008
From: akhailtash at gmail.com (Amal Khailtash)
Date: Sun, 10 Feb 2008 12:59:38 -0500
Subject: [antlr-interest] Lexer ambiguities
Message-ID: <f6a04d790802100959r1e5a69f4r4d1f41ed1cfcbd93@mail.gmail.com>

How does one resolve lexer ambiguities?  I have a grammar like:

  a : NUMBER UNIT ;
  b : VALUE NAME ;

  NUMBER : ('0'..'9')+ ;
  UNIT : 'kg'  | 'lb' ;

  VALUE : '0' | '1' ;
  NAME : ('!'..'~')+ ;

How can I distinguish between a NUMBER and a VALUE and between a UNIT and a
NAME?
-- Amal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080210/fce1523a/attachment.html 

From jimi at temporal-wave.com  Sun Feb 10 10:08:12 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 10 Feb 2008 10:08:12 -0800
Subject: [antlr-interest] syntactic predicates vs. backtrack=true
In-Reply-To: <b8ceeef70802100520qebad812r5752ed09570ad90d@mail.gmail.com>
Message-ID: <"L2791444DC1524bb5A9A5B01292813C26.1202666937.scalix.temporal-wave.com*"@MHS>



> -----Original Message-----
> From: Steve Bennett [mailto:stevagewp at gmail.com]
> Sent: Sunday, February 10, 2008 5:21 AM
> To: antlr-interest
> Subject: Re: [antlr-interest] syntactic predicates vs. backtrack=true
> 
> On 2/6/08, Jim Idle <jimi at temporal-wave.com> wrote:
> > There are some languages that are not necessarily good targets for 
an
> > ANTLR grammar and there isn't a good way to parse them without
> > backtracking or lots of predicates. Wiki markup languages are like
> that
> > for instance because they are a bit haphazard and tend to have lots
> of
> > context. If you are not trying to parse such a language, then it is
> > usually possible to create a syntactic parser that has very few
> > ambiguities. Experience and effort is required. Experience lets you
> spot
> > the things that are truly an ambiguity in the language spec vs
> something
> > that you could specify in a better way.
> 
> Hey Jim, would you mind expanding on why parsing Wiki markup with
> ANTLR is a bad idea? I ask because, uh, I'm trying to write a parser
> for wikitext with ANTLR :)

I thought you might be :-)

> The two problems you raise are "a bit
> haphazard" and "lots of context". For me, the first is the entire
> reason for the ANTLR grammar: to define all the rules rigidly (for the
> first time) so that end users of the wikitext actually have a fixed
> understanding of what the grammar is. 

Ah, well here you touch on two issues. I find a reasonably well thought 
out treatment of that in the VB.Net language spec, where it deals with 
what will happen if: the spec doesn't specify something and a new 
version of the compiler does something different than a previous 
version; the spec specifies something incorrectly; the compiler 
specifies something incorrectly; and so on. 

So, when you say "define all the rules rigidly", you can mean that you 
don't want to change the markup language at all, just fix it as it is 
now, in time, forever, or you could mean that you want to create an 
actual formal spec and weed out those constructs that are 'obviously' 
incorrect. The latter implies that pages that used to render correctly 
would no longer do so of course. I like wikis but I do think that the 
markup languages could have been a bit more formal without placing undue 
pressure on users to learn too much. The problem is that after the first 
week, when it seems easy, you start to run into things that ought to 
render but just print out literally. Because there is no rigid syntax, 
the wiki renderer cannot do anything sensible such as say "Did you leave 
out a ']' here --^ ?".

So, because invalid looking syntax just renders without error, you 
create a situation where all you can really do is try every possibility 
and just revert to a catch all "spit it out" rule if nothing matches. 
This is of course what backtracking will do for you. In the case of a 
wiki page, I would think that the overhead is fairly insignificant 
unless your higher level rules cause the entire page to be traversed 30 
times (which is what memoizing helps with of course). 

> And the second I haven't found
> too bad: a small number of flags like "prohibit_literal_pipe" has
> really solved that problem: rather than using "context" like "I'm
> deeply nested inside a table, therefore I can't start a line with a
> pipe", I push the restrictions down: "This table cell is normal text,
> except no line can start with a pipe".

Yes, such things are reasonable. There is no need to be a purist about 
such things. Personally I am much more practical about this sort of 
thing. If you end up with a grammar that no one would say is pretty but 
is eminently maintainable, then you have improved your lot providing it 
is fast enough. 

> 
> The biggest difficulty has been that *everything* is valid syntax: if
> it doesn't match some particular language construction, it just
> renders literally:
> 
> [[image:foo.jpg|thumbnail|this is a foo!]] <- that renders an image
> 
> [[image:foo.jpg|thumbnail|this is a foo!] <- that renders literally
> 
> Which means that potentially everything has to be parsed several times
> for different constructs, and if all that fails, it has to be parsed
> once more as literally. Is this what you mean by "allowing different
> syntax paths"?

Yes, but backtracking with memoizing will help a lot here as once the 
parser hits the same input point with the same rule and has found that 
does not match, it will find it memorized and just skip a second and 
subsequent attempt. So, with wiki markups, I suggest that having global 
level backtracking and memorization is in fact what you want.

> 
> Anyway, I'd like to know if there are other reasons why ANTLR is a bad
> choice for a wikitext parser.

No, not really. A series of regular expressions (such as {f}lex for 
instance) still traverses stuff and then rejects until it find something 
that works. That is probably faster because it is just whipping through 
characters, but is more difficult to maintain and less obvious that it 
lets through things you didnt mean to (which then become de facto 
standards ;-).

Basically, if you like using ANTLR then with enough ingenuity you will 
get that hammer to work just fine, but so long as you keep in mind that 
you are trying to deal with something that it is not exactly intended 
for and so don't beat up on the tool because it doesnt have a 
grappling hook, then just go ahead and beat it in to shape. If you are 
the person that defines what the language is then you might take the 
opportunity to cull some things from it. Having to escape things that 
render literally if you dont want the renderer to say "Did you leave 
out a ']' here?" probably only affects a few people?

> 
> Many thanks,
> Steve



From sergio at moredata.pt  Sun Feb 10 12:35:29 2008
From: sergio at moredata.pt (=?ISO-8859-1?Q?S=E9rgio_Ferreira?=)
Date: Sun, 10 Feb 2008 20:35:29 +0000
Subject: [antlr-interest] translating a tree to another tree
In-Reply-To: <fommtg$bt9$1@ger.gmane.org>
References: <b4f9f36e0802100239x67e27f5sbaac777987e04161@mail.gmail.com>
	<fommtg$bt9$1@ger.gmane.org>
Message-ID: <47AF6011.2000000@moredata.pt>

In the current version what will be the best strategy to change the 
original AST to a changed AST that could then be used in a tree parser 
to generate code using string template ?

Thanks
S?rgio Ferreira
> Hi Philippe,
>
> Philippe Faes wrote:
>
>   
>> I would like to translate an AST, generated with ANTLR to another AST.
>> This is usefull for having layers of intermediate representations, each
>> new layer more abstract than the previous.
>> I tried using a treewalker and setting output=AST, but this gives two
>> problems.
>> First, I need to set   ASTLabelType=Token so that the TreeAdaptor can take
>> Tokens as input. This is not what I want, since the tree being walked
>> constists of Tree nodes.
>> Second, the generated code tries to read retval.stop on objects of
>> TreeRuleReturnScope, but these objects only have a "start" field. The
>> "stop" field is found in ParserRuleReturnScope, but the tree walker uses
>> TreeRuleReturnScope instead.
>>
>> Am I doing something wrong? Is the generation of new trees from old trees
>> not supported in ANTLR? If not: Why? It seems like a natural thing to try.
>>     
>
> output=AST for tree parsers is supported by the upcoming 3.1 release. 3.0
> can't do it. You could try a recent daily build from
> <http://www.antlr.org/download/build/>. The official release should not be
> far ahead.
>
> HTH
>
>   


From gudnabrsam at yahoo.com  Sun Feb 10 13:05:55 2008
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Sun, 10 Feb 2008 13:05:55 -0800 (PST)
Subject: [antlr-interest] debugging v3
Message-ID: <406525.16153.qm@web55113.mail.re4.yahoo.com>

Can anyone give me a high-level idea of the purpose of
the AW debugger?  I am trying to get my proverbial
feet wet in v3 (FINALLY) and working on a somewhat
loose grammar, and having little luck figuring out
e.g. what token has been returned from the lexer and
thus why the hell a given parser rule isn't being
selected.  :)  Is this beyond what the AW debugger
wants to tell me or am I just unable to figure out the
UI for some reason?

Thanks,
Matt


      ____________________________________________________________________________________
Looking for last minute shopping deals?  
Find them fast with Yahoo! Search.  http://tools.search.yahoo.com/newsearch/category.php?category=shopping

From lambrych at gmail.com  Sun Feb 10 13:11:02 2008
From: lambrych at gmail.com (Jakub Lambrych)
Date: Sun, 10 Feb 2008 22:11:02 +0100
Subject: [antlr-interest] [Tree grammar] Mismatch tree node
Message-ID: <20080210221102.25ceceef@t43>

Hello Everybody!

I would like to ask You whether exists in Tree Grammar a posibility of
not walking through the whole AST tree (in my pass I'm only interested
in data stored on the first level in the tree).

I'll give a working example:

I only want to read the "label" staff 

<code>
operation
	: ^(OPERATION ^(LABEL label?) IDENTIFIER ^(ARGUMENTS
arguments*))
	;

label	: a=ETIQUETA {System.out.println($a.text);}
	;

</code>
but Anlr forces me to implement whole "walking" (implementing
"arguments" rule, tha depends on another rule etc. etc.)

My question is, whether exists a solution with what I could define the
tree grammar more or less like:
<code>
operation: ^(OPERATION ^(LABEL label?) IDENTIFIER ARGUMENTS;
label	: a=ETIQUETA {System.out.println($a.text);}
	;
</code>


Of course in the example above i get Mismathed tree node error : down
expected <UP>.

I would be very very grateful for the answer as I'm sitting few hours
already trying to fix it somehow.

Once again thanx,
Jakub Lambrych
-- 
OpenPGP Public Key: http://lambrych.info/Jakub_Lambrych.asc
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080210/167490be/attachment.bin 

From r.mark.volkmann at gmail.com  Sun Feb 10 13:35:00 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Sun, 10 Feb 2008 15:35:00 -0600
Subject: [antlr-interest] debugging v3
In-Reply-To: <406525.16153.qm@web55113.mail.re4.yahoo.com>
References: <406525.16153.qm@web55113.mail.re4.yahoo.com>
Message-ID: <f0fcc6820802101335i29fa87f6l709ba62b074ddc06@mail.gmail.com>

On Feb 10, 2008 3:05 PM, Matt Benson <gudnabrsam at yahoo.com> wrote:
> Can anyone give me a high-level idea of the purpose of
> the AW debugger?  I am trying to get my proverbial
> feet wet in v3 (FINALLY) and working on a somewhat
> loose grammar, and having little luck figuring out
> e.g. what token has been returned from the lexer and
> thus why the hell a given parser rule isn't being
> selected.  :)  Is this beyond what the AW debugger
> wants to tell me or am I just unable to figure out the
> UI for some reason?

It is capable of doing what you want. I'm trying to figure out the
best way to walk you through it. I'm preparing to give a presentation
on ANTLR soon. The current version of my slides is available at
http://www.ociweb.com/mark/programming/ANTLR3.pdf. Slides 41 and 42
may be helpful. The PDF is 18 meg. so it will take a while to come up
in your browser.

I'm willing to walk you though using it over the phone if you'd like.
If you want to do that, send me a private email and I'll send you my
number.

-- 
R. Mark Volkmann
Object Computing, Inc.

From r.mark.volkmann at gmail.com  Sun Feb 10 13:43:00 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Sun, 10 Feb 2008 15:43:00 -0600
Subject: [antlr-interest] [Tree grammar] Mismatch tree node
In-Reply-To: <20080210221102.25ceceef@t43>
References: <20080210221102.25ceceef@t43>
Message-ID: <f0fcc6820802101343p381438ebh58eb380bb623633c@mail.gmail.com>

On Feb 10, 2008 3:11 PM, Jakub Lambrych <lambrych at gmail.com> wrote:
> Hello Everybody!
>
> I would like to ask You whether exists in Tree Grammar a posibility of
> not walking through the whole AST tree (in my pass I'm only interested
> in data stored on the first level in the tree).

I haven't done this before, but I suspect the answer is to skip
writing a tree parser grammar and instead write Java code using the
ANTLR API to directly process the AST returned by the executing the
generated parser method for your start rule. If you want to try this
approach then you'll find this API documentation very useful.

http://antlr.org/api/

Call getTree() on the object returned by the start rule method. In the
default case, that returns a CommonTree object. I'm looking that the
Java API documentation. CommonTree inherits from BaseTree. BaseTree
has the methods getChildCount() and getChild(int i). That should get
you started.

> I'll give a working example:
>
> I only want to read the "label" staff
>
> <code>
> operation
>         : ^(OPERATION ^(LABEL label?) IDENTIFIER ^(ARGUMENTS
> arguments*))
>         ;
>
> label   : a=ETIQUETA {System.out.println($a.text);}
>         ;
>
> </code>
> but Anlr forces me to implement whole "walking" (implementing
> "arguments" rule, tha depends on another rule etc. etc.)
>
> My question is, whether exists a solution with what I could define the
> tree grammar more or less like:
> <code>
> operation: ^(OPERATION ^(LABEL label?) IDENTIFIER ARGUMENTS;
> label   : a=ETIQUETA {System.out.println($a.text);}
>         ;
> </code>
>
>
> Of course in the example above i get Mismathed tree node error : down
> expected <UP>.
>
> I would be very very grateful for the answer as I'm sitting few hours
> already trying to fix it somehow.
>
> Once again thanx,
> Jakub Lambrych
> --
> OpenPGP Public Key: http://lambrych.info/Jakub_Lambrych.asc
>



-- 
R. Mark Volkmann
Object Computing, Inc.

From r.mark.volkmann at gmail.com  Sun Feb 10 13:44:52 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Sun, 10 Feb 2008 15:44:52 -0600
Subject: [antlr-interest] Tokenizing question
In-Reply-To: <f6a04d790802100717k1043385awb00dccc4f9a26790@mail.gmail.com>
References: <f6a04d790802100717k1043385awb00dccc4f9a26790@mail.gmail.com>
Message-ID: <f0fcc6820802101344i48839662wa9c56c04bc38f9f5@mail.gmail.com>

On Feb 10, 2008 9:17 AM, Amal Khailtash <akhailtash at gmail.com> wrote:
> In a language that whitespace is ignored, how can one tokenize and parse
> constructs like this:
>
>   word : number identifier ;
>
> where 'word' could look like:
>
>   10 abc  or  10abc
>
> In this case number and identifier could have no whitespace between them or
> have some.

How can you tell where one "word" ends and the next begins?
Is each "word" on its own line?

-- 
R. Mark Volkmann
Object Computing, Inc.

From gudnabrsam at yahoo.com  Sun Feb 10 13:46:52 2008
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Sun, 10 Feb 2008 13:46:52 -0800 (PST)
Subject: [antlr-interest] debugging v3
In-Reply-To: <f0fcc6820802101335i29fa87f6l709ba62b074ddc06@mail.gmail.com>
Message-ID: <74744.97738.qm@web55103.mail.re4.yahoo.com>

Thanks for your response, Mark.  I am still muddling
around with it, but I will take a look at your WIP
presentation and keep in mind your offer of voice
help.

Related, though more specific:  has anyone noticed any
situation where the debugger seems to process a given
set of input successfully where the interpreter does
not?  In this case I have the interpreter telling me
it received a FailedPredicateException (syntactic) but
the debugger shows no such thing.

-Matt

--- Mark Volkmann <r.mark.volkmann at gmail.com> wrote:

> On Feb 10, 2008 3:05 PM, Matt Benson
> <gudnabrsam at yahoo.com> wrote:
> > Can anyone give me a high-level idea of the
> purpose of
> > the AW debugger?  I am trying to get my proverbial
> > feet wet in v3 (FINALLY) and working on a somewhat
> > loose grammar, and having little luck figuring out
> > e.g. what token has been returned from the lexer
> and
> > thus why the hell a given parser rule isn't being
> > selected.  :)  Is this beyond what the AW debugger
> > wants to tell me or am I just unable to figure out
> the
> > UI for some reason?
> 
> It is capable of doing what you want. I'm trying to
> figure out the
> best way to walk you through it. I'm preparing to
> give a presentation
> on ANTLR soon. The current version of my slides is
> available at
> http://www.ociweb.com/mark/programming/ANTLR3.pdf.
> Slides 41 and 42
> may be helpful. The PDF is 18 meg. so it will take a
> while to come up
> in your browser.
> 
> I'm willing to walk you though using it over the
> phone if you'd like.
> If you want to do that, send me a private email and
> I'll send you my
> number.
> 
> -- 
> R. Mark Volkmann
> Object Computing, Inc.
> 



      ____________________________________________________________________________________
Looking for last minute shopping deals?  
Find them fast with Yahoo! Search.  http://tools.search.yahoo.com/newsearch/category.php?category=shopping

From r.mark.volkmann at gmail.com  Sun Feb 10 13:51:38 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Sun, 10 Feb 2008 15:51:38 -0600
Subject: [antlr-interest] debugging v3
In-Reply-To: <74744.97738.qm@web55103.mail.re4.yahoo.com>
References: <f0fcc6820802101335i29fa87f6l709ba62b074ddc06@mail.gmail.com>
	<74744.97738.qm@web55103.mail.re4.yahoo.com>
Message-ID: <f0fcc6820802101351t59f3de41x12b49851ef15ef8a@mail.gmail.com>

On Feb 10, 2008 3:46 PM, Matt Benson <gudnabrsam at yahoo.com> wrote:
> Thanks for your response, Mark.  I am still muddling
> around with it, but I will take a look at your WIP
> presentation and keep in mind your offer of voice
> help.
>
> Related, though more specific:  has anyone noticed any
> situation where the debugger seems to process a given
> set of input successfully where the interpreter does
> not?  In this case I have the interpreter telling me
> it received a FailedPredicateException (syntactic) but
> the debugger shows no such thing.

Ah ... that's on slide 40 of my presentation. ;-)
The interpreter doesn't support use of predicates, whereas the
debugger does. I think someone pointed that out on this mailing list a
couple of weeks ago and that's how I learned about that limitation.

-- 
R. Mark Volkmann
Object Computing, Inc.

From jaluber at gmx.de  Sun Feb 10 13:57:36 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Sun, 10 Feb 2008 22:57:36 +0100
Subject: [antlr-interest] debugging v3
In-Reply-To: <74744.97738.qm@web55103.mail.re4.yahoo.com>
References: <74744.97738.qm@web55103.mail.re4.yahoo.com>
Message-ID: <47AF7350.6060308@gmx.de>

Matt Benson schrieb:
> Thanks for your response, Mark.  I am still muddling
> around with it, but I will take a look at your WIP
> presentation and keep in mind your offer of voice
> help.
> 
> Related, though more specific:  has anyone noticed any
> situation where the debugger seems to process a given
> set of input successfully where the interpreter does
> not?  In this case I have the interpreter telling me
> it received a FailedPredicateException (syntactic) but
> the debugger shows no such thing.

The interpreter doesn't work with predicates. Using the debugger is the 
safest option here.

Johannes

From gudnabrsam at yahoo.com  Sun Feb 10 13:55:40 2008
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Sun, 10 Feb 2008 13:55:40 -0800 (PST)
Subject: [antlr-interest] debugging v3
In-Reply-To: <47AF7350.6060308@gmx.de>
Message-ID: <381954.60666.qm@web55101.mail.re4.yahoo.com>

Thanks, Mark/Johannes!  I guess that's what happens
when I leave the list for a couple of months...

-Matt

--- Johannes Luber <jaluber at gmx.de> wrote:

> Matt Benson schrieb:
> > Thanks for your response, Mark.  I am still
> muddling
> > around with it, but I will take a look at your WIP
> > presentation and keep in mind your offer of voice
> > help.
> > 
> > Related, though more specific:  has anyone noticed
> any
> > situation where the debugger seems to process a
> given
> > set of input successfully where the interpreter
> does
> > not?  In this case I have the interpreter telling
> me
> > it received a FailedPredicateException (syntactic)
> but
> > the debugger shows no such thing.
> 
> The interpreter doesn't work with predicates. Using
> the debugger is the 
> safest option here.
> 
> Johannes
> 



      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ 


From r.mark.volkmann at gmail.com  Sun Feb 10 14:00:10 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Sun, 10 Feb 2008 16:00:10 -0600
Subject: [antlr-interest] Lexer ambiguities
In-Reply-To: <f6a04d790802100959r1e5a69f4r4d1f41ed1cfcbd93@mail.gmail.com>
References: <f6a04d790802100959r1e5a69f4r4d1f41ed1cfcbd93@mail.gmail.com>
Message-ID: <f0fcc6820802101400o1c16920fnc346113f66eaf079@mail.gmail.com>

On Feb 10, 2008 11:59 AM, Amal Khailtash <akhailtash at gmail.com> wrote:
> How does one resolve lexer ambiguities?  I have a grammar like:
>
>   a : NUMBER UNIT ;
>   b : VALUE NAME ;
>
>   NUMBER : ('0'..'9')+ ;
>   UNIT : 'kg'  | 'lb' ;
>
>   VALUE : '0' | '1' ;
>    NAME : ('!'..'~')+ ;
>
> How can I distinguish between a NUMBER and a VALUE and between a UNIT and a
> NAME?

I believe the key is that the order of lexer rules is significant.
You need to put the VALUE rule before the NUMBER rule
and the UNIT rule before the NAME rule
so that the most specific one wins out.

I can get your grammar to work if the input has spaces between the
parts of a and b like this.

19 kg
1 Amal

I'm not sure if there's a way to make this work without the spaces.

Here's my version of the grammar.

grammar NumberValue;

file: line+;
line: (a | b) terminator;

a: NUMBER UNIT;
b: VALUE NAME;

VALUE: '0' | '1';
NUMBER: '0'..'9'+;

UNIT: 'kg' | 'lb';
NAME: '!'..'~'+;

terminator: NEWLINE | EOF;
NEWLINE: ('\r'? '\n')+;
WHITESPACE: (' ' | '\t')+ { $channel = HIDDEN; };

-- 
R. Mark Volkmann
Object Computing, Inc.

From lilypondtool at organum.hu  Sun Feb 10 14:03:40 2008
From: lilypondtool at organum.hu (Bertalan Fodor)
Date: Sun, 10 Feb 2008 23:03:40 +0100
Subject: [antlr-interest] External lexer in Antlrworks debugger
Message-ID: <47AF74BC.5@organum.hu>

Hi,

I have a JFlex lexer for a grammar. I would like to debug the grammar 
with Antlrworks debugger. Can I customize the generated _Test_ class 
and/or override the constructor for the default generated lexer?

Or should I try remote debugging instead?

Thank you,

Bert

From jaluber at gmx.de  Sun Feb 10 14:12:46 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Sun, 10 Feb 2008 23:12:46 +0100
Subject: [antlr-interest] External lexer in Antlrworks debugger
In-Reply-To: <47AF74BC.5@organum.hu>
References: <47AF74BC.5@organum.hu>
Message-ID: <47AF76DE.3040909@gmx.de>

Bertalan Fodor schrieb:
> Hi,
> 
> I have a JFlex lexer for a grammar. I would like to debug the grammar 
> with Antlrworks debugger. Can I customize the generated _Test_ class 
> and/or override the constructor for the default generated lexer?
> 
> Or should I try remote debugging instead?
> 
> Thank you,
> 
> Bert
> 

It's possible to specify, if starting the debugger session means also 
the regeneration of the code. Change this setting in the preferences, 
generate once the code and then modify it (make a copy, too).

Johannes

From shro8822 at vandals.uidaho.edu  Sun Feb 10 14:11:51 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Sun, 10 Feb 2008 14:11:51 -0800
Subject: [antlr-interest] debugging v3
In-Reply-To: <f0fcc6820802101335i29fa87f6l709ba62b074ddc06@mail.gmail.com>
References: <406525.16153.qm@web55113.mail.re4.yahoo.com>
	<f0fcc6820802101335i29fa87f6l709ba62b074ddc06@mail.gmail.com>
Message-ID: <BAYC1-PASMTP0359AC0F0CB06E6AAD107AF5290@CEZ.ICE>

Mark Volkmann wrote:
> On Feb 10, 2008 3:05 PM, Matt Benson <gudnabrsam at yahoo.com> wrote:
>   
>> Can anyone give me a high-level idea of the purpose of
>> the AW debugger?  I am trying to get my proverbial
>> feet wet in v3 (FINALLY) and working on a somewhat
>> loose grammar, and having little luck figuring out
>> e.g. what token has been returned from the lexer and
>> thus why the hell a given parser rule isn't being
>> selected.  :)  Is this beyond what the AW debugger
>> wants to tell me or am I just unable to figure out the
>> UI for some reason?
>>     
>
> http://www.ociweb.com/mark/programming/ANTLR3.pdf. Slides 41 and 42
>   
I'll take a look at the slides, but Is there a quick way under the 
AntlrWorks debugger to skip the lexer and just feed the parser a list of 
tokens by number or otherwise? (#23, #7, If, Then, ...)

From darach at gmail.com  Sun Feb 10 14:16:10 2008
From: darach at gmail.com (Darach Ennis)
Date: Sun, 10 Feb 2008 22:16:10 +0000
Subject: [antlr-interest] Syntactic anti-predicates
In-Reply-To: <b8ceeef70802090953v5bb8d0b1p8d25215e1e8cf3a8@mail.gmail.com>
References: <b8ceeef70802090953v5bb8d0b1p8d25215e1e8cf3a8@mail.gmail.com>
Message-ID: <4d596d820802101416w163bee67lb0f346a139d10cdc@mail.gmail.com>

Hi Steve, all.

Brief delurk! I've had a similar situation recently and found that the
following worked with a test
grammar as follows. My logic is slightly different: Between a ',' and a ').'
arbitrary token sequences
may be present. My difficulty is in matching the ')' as ')' can be present
in the arbitrary token sequences
*but* I'm guaranteed that I will always see a '(' before a ')' for a valid
'arbitrary token sequence'. So I
can use those facts to correctly identify the terminal ')' for the arbitrary
code block and/or fail accordingly:

grammar Test;

@parser::header {
package testing;

import java.io.*;
}

@lexer::header {
package testing;

}

@lexer::members {
 int pc = 0;
}

@parser::members {
 public static void main(String args[]) throws Throwable {
       final ANTLRInputStream cs = new ANTLRInputStream(new
FileInputStream("resources/test.txt"));
       final TestLexer el = new TestLexer(cs);
       final CommonTokenStream et = new CommonTokenStream(el);
       final TestParser ep = new TestParser(et);
       ep.test();
 }
}

test:   (B (t=T { System.out.println("T: " + t.getText()); })? E)+;

T   : { pc = 0; } ',' ( ~(')'|'(')| WS | '(' { pc++; } | { pc > 0}?=> ')' {
pc--; } )* ')' '.';
B:  '<b>';
E:  '<e>';
WS  :   (' ' | '\t' | '\n' | '\r' | '\f') { $channel=HIDDEN; };

Here is some test content:

<b><e>
<b> , {} arbitrary code [] ).<e>
<b> , () () () () () ()

() {} []
). <e>

Here is the test/debug output:

T: , {} arbitrary code [] ).
T: , () () () () () ()

() {} []
).

The gated predicate ( ... { pc > 0?=> ')'  ... ) and parenthesis 'reference
counting'
is what allows this to work but I've had limited/little success with more
complex
contexts such as trying to match more than a single character for
terminating the
arbitrary token sequence block.

The same grammar fails to produce the same output and/or exhibit the same
behavior when interpreted by ANTLRworks with the same input data. Having
the book definitely helps too.

In my case I'm trying to build a preprocessor so I've begun referring to the
cpp
grammar (http://www.antlr.org/grammar/1166665121622/Cpp.tar) by YoungKi
KU to see if I can grok some ideas or learn something from that.


Regards,

Darach.





On Feb 9, 2008 5:53 PM, Steve Bennett <stevagewp at gmail.com> wrote:
> Is there a convenient way to say "if the upcoming tokens look like X Y
> Z" then *don't* match this rule? It seems I always have to resort to a
> semantic predicate like this:
>
> {input.LA(1) != X && input.LA(2) != Y}? =>  R
>
> or some complicated rule that amount to not X Y Z:
>
> (notXYZ) => R
>
> Is there a simple way I'm missing?
>
> Thanks,
> Steve
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080210/3aaef570/attachment-0001.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.jpg
Type: image/jpeg
Size: 9260 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080210/3aaef570/attachment-0001.jpg 

From jaluber at gmx.de  Sun Feb 10 14:21:20 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Sun, 10 Feb 2008 23:21:20 +0100
Subject: [antlr-interest] debugging v3
In-Reply-To: <BAYC1-PASMTP0359AC0F0CB06E6AAD107AF5290@CEZ.ICE>
References: <406525.16153.qm@web55113.mail.re4.yahoo.com>	<f0fcc6820802101335i29fa87f6l709ba62b074ddc06@mail.gmail.com>
	<BAYC1-PASMTP0359AC0F0CB06E6AAD107AF5290@CEZ.ICE>
Message-ID: <47AF78E0.4090600@gmx.de>

Benjamin Shropshire schrieb:
> I'll take a look at the slides, but Is there a quick way under the 
> AntlrWorks debugger to skip the lexer and just feed the parser a list of 
> tokens by number or otherwise? (#23, #7, If, Then, ...)
> 

Not that I know of.

Johannes

From akhailtash at gmail.com  Sun Feb 10 14:33:06 2008
From: akhailtash at gmail.com (Amal Khailtash)
Date: Sun, 10 Feb 2008 17:33:06 -0500
Subject: [antlr-interest] Tokenizing question
In-Reply-To: <f0fcc6820802101344i48839662wa9c56c04bc38f9f5@mail.gmail.com>
References: <f6a04d790802100717k1043385awb00dccc4f9a26790@mail.gmail.com>
	<f0fcc6820802101344i48839662wa9c56c04bc38f9f5@mail.gmail.com>
Message-ID: <f6a04d790802101433v3f22147bu169f36a800dffca9@mail.gmail.com>

Each word is separated with whitespace.  Again this is from a Verilog VCD
grammar that seems to have many ambiguities.  I rewrote it to make it simple
to explain.  Part of the original grammar looks like:

value_change_dump_definition
  : declaration_command* enddefinitions simulation_command*
  ;

declaration_command
  : <other_rules_here>
  | timescale
  ;

timescale
  : '$timescale' NUMBER time_unit '$end'

time_unit
  : 's'
  | 'ms'
  | 'us'
  | 'ns'
  | 'ps'
  | 'fs'
  ;

simulation_command
  : <other_rules_here>
  | value_change
  ;

value_change
  : scalar_value_change
  ;

scalar_value_change
  : VALUE IDENTIFIER
  ;

VALUE
  : ('0' | '1' | 'x' | 'X' | 'z' | 'Z')
  ;

IDENTIFIER
  : ('!'..'~')+
  ;

fragment
DIGIT
  : '0'..'9'
  ;

NUMBER
  : DIGIT+
  ;

The problem is the scalar_value_change rule.  VALUE and IDENTIFIER can be
connected together.

A sample scalar_value_change is:

1aae
0aae

There are many ambiguities in this grammar even at the lexer level that is
giving me a hard time.

-- Amal

On Feb 10, 2008 4:44 PM, Mark Volkmann <r.mark.volkmann at gmail.com> wrote:

> On Feb 10, 2008 9:17 AM, Amal Khailtash <akhailtash at gmail.com> wrote:
> > In a language that whitespace is ignored, how can one tokenize and parse
> > constructs like this:
> >
> >   word : number identifier ;
> >
> > where 'word' could look like:
> >
> >   10 abc  or  10abc
> >
> > In this case number and identifier could have no whitespace between them
> or
> > have some.
>
> How can you tell where one "word" ends and the next begins?
> Is each "word" on its own line?
>
> --
> R. Mark Volkmann
> Object Computing, Inc.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080210/d2c45662/attachment.html 

From jpen054 at ec.auckland.ac.nz  Sun Feb 10 17:10:53 2008
From: jpen054 at ec.auckland.ac.nz (Jamie Penney)
Date: Mon, 11 Feb 2008 14:10:53 +1300
Subject: [antlr-interest] TSQL Grammar
Message-ID: <47AFA09D.8030904@ec.auckland.ac.nz>

Hi All,
I'm sure this has been asked a million times, but I can't find anything 
in the archives. Has anyone written a T-SQL grammar, or at least gotten 
something close to working that I might be able to modify?

Thanks,
Jamie Penney

From r.mark.volkmann at gmail.com  Sun Feb 10 17:11:39 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Sun, 10 Feb 2008 19:11:39 -0600
Subject: [antlr-interest] Tokenizing question
In-Reply-To: <f6a04d790802101433v3f22147bu169f36a800dffca9@mail.gmail.com>
References: <f6a04d790802100717k1043385awb00dccc4f9a26790@mail.gmail.com>
	<f0fcc6820802101344i48839662wa9c56c04bc38f9f5@mail.gmail.com>
	<f6a04d790802101433v3f22147bu169f36a800dffca9@mail.gmail.com>
Message-ID: <f0fcc6820802101711m216f201erc010503efd4d8ec5@mail.gmail.com>

On Feb 10, 2008 4:33 PM, Amal Khailtash <akhailtash at gmail.com> wrote:
> Each word is separated with whitespace.

But the parts of each "word" are not. That seems to be the hard part!
For example, the input is "1aae", not "1 aae".
I've tried hard to figure this out and I'm coming up empty.
I hope someone else can offer a clue.

Is it true that the lexer uses the first lexer rule that matches when
multiple lexer rules match? That's what I thought, but now I'm not
sure.

> Again this is from a Verilog VCD
> grammar that seems to have many ambiguities.  I rewrote it to make it simple
> to explain.  Part of the original grammar looks like:
>
> value_change_dump_definition
>    : declaration_command* enddefinitions simulation_command*
>   ;
>
> declaration_command
>   : <other_rules_here>
>   | timescale
>   ;
>
> timescale
>   : '$timescale' NUMBER time_unit '$end'
>
> time_unit
>   : 's'
>   | 'ms'
>   | 'us'
>   | 'ns'
>   | 'ps'
>   | 'fs'
>   ;
>
> simulation_command
>   : <other_rules_here>
>   | value_change
>    ;
>
> value_change
>   : scalar_value_change
>   ;
>
> scalar_value_change
>   : VALUE IDENTIFIER
>   ;
>
> VALUE
>   : ('0' | '1' | 'x' | 'X' | 'z' | 'Z')
>    ;
>
> IDENTIFIER
>   : ('!'..'~')+
>   ;
>
> fragment
>  DIGIT
>    : '0'..'9'
>    ;
>
> NUMBER
>   : DIGIT+
>   ;
>
> The problem is the scalar_value_change rule.  VALUE and IDENTIFIER can be
> connected together.
>
> A sample scalar_value_change is:
>
> 1aae
> 0aae
>
> There are many ambiguities in this grammar even at the lexer level that is
> giving me a hard time.
>
> -- Amal
>
>
>
> On Feb 10, 2008 4:44 PM, Mark Volkmann <r.mark.volkmann at gmail.com> wrote:
> >
> >
> >
> > On Feb 10, 2008 9:17 AM, Amal Khailtash <akhailtash at gmail.com> wrote:
> > > In a language that whitespace is ignored, how can one tokenize and parse
> > > constructs like this:
> > >
> > >   word : number identifier ;
> > >
> > > where 'word' could look like:
> > >
> > >   10 abc  or  10abc
> > >
> > > In this case number and identifier could have no whitespace between them
> or
> > > have some.
> >
> > How can you tell where one "word" ends and the next begins?
> > Is each "word" on its own line?
> >
> > --
> > R. Mark Volkmann
> > Object Computing, Inc.
> >
>
>



-- 
R. Mark Volkmann
Object Computing, Inc.

From stevagewp at gmail.com  Sun Feb 10 17:35:07 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Mon, 11 Feb 2008 12:35:07 +1100
Subject: [antlr-interest] syntactic predicates vs. backtrack=true
In-Reply-To: <L2791444DC1524bb5A9A5B01292813C26.1202666937.scalix.temporal-wave.com*@MHS>
References: <b8ceeef70802100520qebad812r5752ed09570ad90d@mail.gmail.com>
	<L2791444DC1524bb5A9A5B01292813C26.1202666937.scalix.temporal-wave.com*@MHS>
Message-ID: <b8ceeef70802101735x12c97ebeke983821fb61b621c@mail.gmail.com>

On 2/11/08, Jim Idle <jimi at temporal-wave.com> wrote:
> So, when you say "define all the rules rigidly", you can mean that you
> don't want to change the markup language at all, just fix it as it is
> now, in time, forever, or you could mean that you want to create an
> actual formal spec and weed out those constructs that are 'obviously'
> incorrect. The latter implies that pages that used to render correctly
> would no longer do so of course. I like wikis but I do think that the

Fortunately, the notion of "render correctly" is not well defined, and
is hence subject to negotiation. We have reached a compromise along
the lines of "correct is whatever the current parser does, unless
people think that's incorrect". Or similarly, "correct is whatever
makes the most sense out of the existing corpus of wikitext".

IMHO, the default behaviour of rendering literally is really an
artefact of the regexp-based parser currently in use. There is strong
agreement that a "syntax error" should not prevent a page saving, but
I think people are open to the idea that a clear error could render
specially (eg, in red), and a list of errors/warnings/suggestions be
generated.

> markup languages could have been a bit more formal without placing undue
> pressure on users to learn too much. The problem is that after the first

Yeah. And some of the construcs are just painfully bad. '''foo''' is
bold. ''foo'' is italics. ''''foo''' is apostrophe + bold. Except that
''''foo''' blah ''''' turns them into something completely different.
And for the ultimate (ok, not quite) in non LALR:

{|
|this is a table cell. except that a table cell can be preceded by a
CSS "style" property. Which is what this text will turn out to be if
ever we hit a single pipe. Which could be a very, very long time. |
Oops, there it is. Turns out it *was* a style property after all! ||
Now here's another cell. The same story applies. || Ah, turns out that
one didn't have a style property...
|}

> week, when it seems easy, you start to run into things that ought to
> render but just print out literally. Because there is no rigid syntax,
> the wiki renderer cannot do anything sensible such as say "Did you leave
> out a ']' here --^ ?".

Hopefully with The New Parser (still a fair way off...for starters we
need a PHP language target) this will become possible.

> So, because invalid looking syntax just renders without error, you
> create a situation where all you can really do is try every possibility
> and just revert to a catch all "spit it out" rule if nothing matches.
> This is of course what backtracking will do for you. In the case of a
> wiki page, I would think that the overhead is fairly insignificant
> unless your higher level rules cause the entire page to be traversed 30
> times (which is what memoizing helps with of course).

It's funny, I never even considered switching backtracking on. I may
have tried it once, and the grammar didn't work, so I turned it off
again. In any case, I don't think I would have really understand how
ANTLR worked if I'd had it on from the start. I also suspect that for
reasons mentioned in another thread, better performance may arise from
targeted synpreds. Performance *is* quite important.

> Yes, such things are reasonable. There is no need to be a purist about
> such things. Personally I am much more practical about this sort of
> thing. If you end up with a grammar that no one would say is pretty but
> is eminently maintainable, then you have improved your lot providing it
> is fast enough.

Grasshopper still can't distinguish "pretty" from "ugly" and
"maintanable" from "horrible mess".

> Yes, but backtracking with memoizing will help a lot here as once the
> parser hits the same input point with the same rule and has found that
> does not match, it will find it memorized and just skip a second and
> subsequent attempt. So, with wiki markups, I suggest that having global
> level backtracking and memorization is in fact what you want.

Yeah, I only just discovered memozing. Perhaps it should be the default?

> No, not really. A series of regular expressions (such as {f}lex for
> instance) still traverses stuff and then rejects until it find something
> that works. That is probably faster because it is just whipping through
> characters, but is more difficult to maintain and less obvious that it
> lets through things you didnt mean to (which then become de facto
> standards ;-).

Plus, if you look at the current parser, it ends up doing a lot of
work twice, as it has to keep applying the same constructs. "Replace
every X with Y...except that there could be links, so first replace
those with something else, then put them back afterwards".

> grappling hook, then just go ahead and beat it in to shape. If you are
> the person that defines what the language is then you might take the
> opportunity to cull some things from it. Having to escape things that
> render literally if you dont want the renderer to say "Did you leave
> out a ']' here?" probably only affects a few people?

Right. There is agreement that the language should change as little as
possible with the implementation of the new parser (mostly for social
reasons), but I'm looking forward to bending the language around a bit
after that ;)

Steve

From jpen054 at ec.auckland.ac.nz  Sun Feb 10 17:51:02 2008
From: jpen054 at ec.auckland.ac.nz (Jamie Penney)
Date: Mon, 11 Feb 2008 14:51:02 +1300
Subject: [antlr-interest] Matching lists of items
Message-ID: <47AFAA06.5030402@ec.auckland.ac.nz>

Hi All,
If I have a list of expressions that are separated by a separator 
character (say ','), is there a concise way of matching this? So far I 
am using the following:

expression (',' expression)*

but it seems quite verbose. Is there a shortcut for this? It gets quite 
cumbersome once the expression part gets large.

Thanks,
Jamie Penney

From jpen054 at ec.auckland.ac.nz  Sun Feb 10 18:50:40 2008
From: jpen054 at ec.auckland.ac.nz (Jamie Penney)
Date: Mon, 11 Feb 2008 15:50:40 +1300
Subject: [antlr-interest] TSQL Grammar
In-Reply-To: <ee873c070802101845h52c10a9ex6cc9ff18669a5084@mail.gmail.com>
References: <47AFA09D.8030904@ec.auckland.ac.nz>
	<ee873c070802101845h52c10a9ex6cc9ff18669a5084@mail.gmail.com>
Message-ID: <47AFB800.8040007@ec.auckland.ac.nz>

I need a TSQL grammar for generating an AST from TSQL code for a 
commercial product I am working on. We were using programmar for 
parsing, but the guy who wrote it hasn't replied to any emails for a 
while and hasn't updated it for a while. We are trying to shift to ANTLR 
but we need to find replacements for the programmar grammars we have first.

Is your grammar licensed under a commercially friendly license (MIT or 
similar)? If so, I would be happy to give back any additions I make.

Thanks,
Jamie Penney

Alexandre Porcelli wrote:
> What is your interest in T-SQL?
> I wrote a T-SQL grammar... it is a really HUGE job....
>
> On Feb 10, 2008 11:10 PM, Jamie Penney <jpen054 at ec.auckland.ac.nz> wrote:
>   
>> Hi All,
>> I'm sure this has been asked a million times, but I can't find anything
>> in the archives. Has anyone written a T-SQL grammar, or at least gotten
>> something close to working that I might be able to modify?
>>
>> Thanks,
>> Jamie Penney
>>
>>     


From unicorn at kurskline.ru  Mon Feb 11 00:08:14 2008
From: unicorn at kurskline.ru (Roman V. Kiseliov)
Date: Mon, 11 Feb 2008 11:08:14 +0300
Subject: [antlr-interest] unsubscribe
Message-ID: <020e01c86c85$40c1ec00$c245c400$@ru>

unsubscribe

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080211/c34a1fd5/attachment-0001.html 

From fridi70 at gmx.de  Mon Feb 11 01:28:22 2008
From: fridi70 at gmx.de (Fridi)
Date: Mon, 11 Feb 2008 10:28:22 +0100
Subject: [antlr-interest] TokenStreamSelector + ANTLRv3
Message-ID: <47B01536.5060404@gmx.de>

is there any replacement for the ANTLR v2 TokenStreamSelector in ANTLR v3
any examples how to achive selecting different lexers depending on the 
header of a file?

thanks in advance,
  fridi
 

From jaluber at gmx.de  Mon Feb 11 03:21:26 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Mon, 11 Feb 2008 12:21:26 +0100
Subject: [antlr-interest] Matching lists of items
In-Reply-To: <47AFAA06.5030402@ec.auckland.ac.nz>
References: <47AFAA06.5030402@ec.auckland.ac.nz>
Message-ID: <47B02FB6.9000101@gmx.de>

Jamie Penney schrieb:
> Hi All,
> If I have a list of expressions that are separated by a separator 
> character (say ','), is there a concise way of matching this? So far I 
> am using the following:
> 
> expression (',' expression)*
> 
> but it seems quite verbose. Is there a shortcut for this? It gets quite 
> cumbersome once the expression part gets large.

You could create an extra rule for expression, but I don't know if one 
can really write it shorter except via creating a special syntax.

Johannes

From antlr at mirality.co.nz  Mon Feb 11 03:51:45 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 12 Feb 2008 00:51:45 +1300
Subject: [antlr-interest] Verilog VCD Parser
In-Reply-To: <f6a04d790802100844x574e9104mf965fcd119ec7615@mail.gmail.co
 m>
References: <f6a04d790802092105v798ae7adh4819e88f4719a76f@mail.gmail.com>
	<f0fcc6820802100633j72a0561ctb82f00296c07dff1@mail.gmail.com>
	<f0fcc6820802100635w2958105h872efd40f0dbe9f3@mail.gmail.com>
	<f6a04d790802100844x574e9104mf965fcd119ec7615@mail.gmail.com>
Message-ID: <20080211115207.E2AA911ED86@www.antlr.org>

At 05:44 11/02/2008, Amal Khailtash wrote:

>That's the problem.  There is no restriction on comment/version 
>content.  Especially version might have cvs keywords, say 
>$revision, ...
[...]
> > CONTENT
> > //options { greedy = false; }
> >   : ~('$')*
> >   ;

Well, there's probably a cleaner way to do it, and bear in mind 
that I haven't actually tested this, but something along these 
lines might work:

CONTENT
   :  (  ~'$'
      |  '$'
         (  ~'e'
         |  'e'
            (  ~'n'
            |  'n' ~'d'
            )
         )
      )*
   ;

Yet another alternative: first, replace the '$end' literal in the 
comment and version rules with END, change the CONTENT in each to 
CONTENT*, then add these rules:

fragment END: '$end';

CONTENT
   :  '$' ( ('end') => 'end' { $type = END; } )?
   |  (~'$')*
   ;

This is possibly less ideal, since it will end up generating 
multiple CONTENT tokens if there are embedded $s, but it should 
end up matching properly.  I think.  (Again, untested.)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080212/cce661e4/attachment.html 
-------------- next part --------------


No virus found in this outgoing message.
Checked by AVG Free Edition. 
Version: 7.5.516 / Virus Database: 269.20.2/1270 - Release Date: 10/02/2008 12:21

From antlr at mirality.co.nz  Mon Feb 11 04:05:41 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 12 Feb 2008 01:05:41 +1300
Subject: [antlr-interest] Lexer ambiguities
In-Reply-To: <f0fcc6820802101400o1c16920fnc346113f66eaf079@mail.gmail.co
 m>
References: <f6a04d790802100959r1e5a69f4r4d1f41ed1cfcbd93@mail.gmail.com>
	<f0fcc6820802101400o1c16920fnc346113f66eaf079@mail.gmail.com>
Message-ID: <20080211120555.052A311EDD6@www.antlr.org>

At 11:00 11/02/2008, Mark Volkmann wrote:
 >>   a : NUMBER UNIT ;
 >>   b : VALUE NAME ;
 >>
 >>   NUMBER : ('0'..'9')+ ;
 >>   UNIT : 'kg'  | 'lb' ;
 >>
 >>   VALUE : '0' | '1' ;
 >>    NAME : ('!'..'~')+ ;
 >>
 >> How can I distinguish between a NUMBER and a VALUE and between 
a
 >> UNIT and a NAME?
 >
 >I believe the key is that the order of lexer rules is 
significant.

That's true, but...

 >You need to put the VALUE rule before the NUMBER rule
 >and the UNIT rule before the NAME rule

That's not.

The trouble here is that you're both thinking (or at least that's 
what it sounds like) that the parser is choosing the lexer rules 
it wants to look at, which is not the case.

Lexing happens as a completely independent first step; the 
character stream is scanned and any non-fragment lexer rules are 
considered as possible candidates for generated tokens.  Of those, 
generally speaking the token match that consumes the most input 
"wins", but failing that the first listed rule wins.  And all of 
this happens before a single parser rule is evaluated.

So in the example above, swapping the rules will work for input 
like "1 bob" and "24 kg", but will fail on "1 kg", since that's 
VALUE UNIT and that doesn't match any of the parser rules.

Two options:

1. remove the VALUE rule entirely (changing rule "b" to use a 
NUMBER as well) and either add a validation predicate to check the 
range of number entered is valid within the grammar or leave that 
to semantic checks outside the grammar.

2. change rule "a" to accept both NUMBERs and VALUEs.  (And swap 
them as Mark suggested.)


-- 
No virus found in this outgoing message.
Checked by AVG Free Edition. 
Version: 7.5.516 / Virus Database: 269.20.2/1270 - Release Date: 10/02/2008 12:21



From antlr at mirality.co.nz  Mon Feb 11 04:14:51 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 12 Feb 2008 01:14:51 +1300
Subject: [antlr-interest] Tokenizing question
In-Reply-To: <f6a04d790802101433v3f22147bu169f36a800dffca9@mail.gmail.co
 m>
References: <f6a04d790802100717k1043385awb00dccc4f9a26790@mail.gmail.com>
	<f0fcc6820802101344i48839662wa9c56c04bc38f9f5@mail.gmail.com>
	<f6a04d790802101433v3f22147bu169f36a800dffca9@mail.gmail.com>
Message-ID: <20080211121507.17AF611ED45@www.antlr.org>

At 11:33 11/02/2008, Amal Khailtash wrote:

>Each word is separated with whitespace.  Again this is from a 
>Verilog VCD grammar that seems to have many ambiguities.  I 
>rewrote it to make it simple to explain.  Part of the original 
>grammar looks like:
[...]
>scalar_value_change
>   : VALUE IDENTIFIER
>   ;
>
>VALUE
>   : ('0' | '1' | 'x' | 'X' | 'z' | 'Z')
>   ;
>
>IDENTIFIER
>   : ('!'..'~')+
>   ;
>
>fragment
>DIGIT
>   : '0'..'9'
>   ;
>
>NUMBER
>   : DIGIT+
>   ;

You're going to have to be careful with that VALUE rule, since it 
intersects with both IDENTIFIER and NUMBER.  (This isn't 
necessarily an error, it just means you need to realise you might 
end up with a VALUE token when you're expecting one of the 
others.)

>The problem is the scalar_value_change rule.  VALUE and 
>IDENTIFIER can be connected together.
>
>A sample scalar_value_change is:
>
>1aae
>0aae

I'm assuming there's also a WS rule with skip() or $channel = 
HIDDEN that you didn't present above.

If both "1 aae" and "1aae" are valid constructs, then what you 
already have should be fine.  Tokens are not required to be 
separated by whitespace; whitespace (or any other skipped or 
hidden token) merely act as a "break" between character sequences 
that could otherwise have been merged into a single token.

In other words, "1 aae" should produce VALUE WS IDENTIFIER (with 
the WS skipped or ignored), and "1aae" should produce VALUE 
IDENTIFIER.  In both cases it matches the scalar_value_change 
rule.

Now, "11aae" wouldn't -- that would be NUMBER IDENTIFIER.  But "1 
1aae" would be VALUE WS VALUE IDENTIFIER, again with the WS 
skipped or ignored.  So you can see the whitespace acting as a 
token break here.


-- 
No virus found in this outgoing message.
Checked by AVG Free Edition. 
Version: 7.5.516 / Virus Database: 269.20.2/1270 - Release Date: 10/02/2008 12:21



From discontinuum at gmail.com  Mon Feb 11 05:14:30 2008
From: discontinuum at gmail.com (Erik Kratochvil)
Date: Mon, 11 Feb 2008 14:14:30 +0100
Subject: [antlr-interest] Size of parser
Message-ID: <f4dc39b90802110514p3f607665l5a8f674c0ee42f22@mail.gmail.com>

Hi.

I have a parser grammar that has 2KSLOC and 300+ rules and about 20
predicates. I use these options:

options {
  output = AST;
  ASTLabelType = CommonTree;
  tokenVocab = GLex; // vocabulary from lexer
  k = 2;
}

For this grammar, ANTLR 3.0.1 generates a parser that has 2.8MB (over
60KSLOC). I wonder, how big parsers do you have? Is there anything I
can do to reduce the size of the final parser (like reducing the
number of predicates or rewriting some rules)? Or is it just that
ANTLR does not generate optimized code?

Thank you for sharing your ideas.

-- 
Erik Kratochv?l

From stevagewp at gmail.com  Mon Feb 11 05:45:53 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Tue, 12 Feb 2008 00:45:53 +1100
Subject: [antlr-interest] Syntactic anti-predicates
In-Reply-To: <47ae1cd6.0a87460a.2c94.ffffb235SMTPIN_ADDED@mx.google.com>
References: <b8ceeef70802090953v5bb8d0b1p8d25215e1e8cf3a8@mail.gmail.com>
	<47ae1cd6.0a87460a.2c94.ffffb235SMTPIN_ADDED@mx.google.com>
Message-ID: <b8ceeef70802110545r2dfc24b3u7cd9441d6e231685@mail.gmail.com>

On 2/10/08, Gavin Lambert <antlr at mirality.co.nz> wrote:
> Why not just use:
>
> ruleA
>    :  (X Y Z) => ruleXYZ
>    |  ruleNotXYZ
>    ;

Ok, I've now got a good, non-contrived example to show the problem:

table:
   LEFT_BRACE PIPE ws? table_format? NL
   table_line*
   ws? PIPE RIGHT_BRACE;

table_line:
   ws?
   (
   (PIPE PLUS) => table_caption
   | (PIPE HYPHEN) => table_row_separator
   | (EXCLAMATION) => table_header_cells
   | (PIPE) => table_data_cells
   );

----
Here, the problem is that table_line is inside a looping construct.
Each time it loops, there can be whitespace, then a |} (end of table),
or one of the other forms: |-, |+, |text.

By the time the syntactic predicate inside fails the match, it's too
late. I could left factor table_line:

table_line:
   (
   (ws? PIPE PLUS) => ws? table_caption
   | (ws? PIPE HYPHEN) => ws? table_row_separator
   | (ws? EXCLAMATION) => ws? table_header_cells
   | (ws? PIPE) => ws? table_data_cells
   );

But that's inelegant. My ideal solution would have this line:

   table_line*

replaced with something like:

   (~(ws? PIPE RIGHT_BRACE) => table_line)*

The only way to get around it at the moment that I can see is to
either left factor as above, or use a semantic predicate - which I'm
not really sure how to use with an arbitrary length rule like ws.

Oh, or I can turn the loop inside out:

table:
   LEFT_BRACE PIPE ws? table_format? NL
   ws?
   (table_line ws?)*
   PIPE RIGHT_BRACE;

This does actually work. It's slightly disconcerting having the
whitespace grouped with the previous line, but it's less bad than the
other alternatives I think.

Steve

From r.mark.volkmann at gmail.com  Mon Feb 11 06:03:39 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Mon, 11 Feb 2008 08:03:39 -0600
Subject: [antlr-interest] Lexer ambiguities
In-Reply-To: <47b03a23.20f8720a.2b96.ffffa51dSMTPIN_ADDED@mx.google.com>
References: <f6a04d790802100959r1e5a69f4r4d1f41ed1cfcbd93@mail.gmail.com>
	<f0fcc6820802101400o1c16920fnc346113f66eaf079@mail.gmail.com>
	<47b03a23.20f8720a.2b96.ffffa51dSMTPIN_ADDED@mx.google.com>
Message-ID: <f0fcc6820802110603i2940c811u910315a042aad268@mail.gmail.com>

On Feb 11, 2008 6:05 AM, Gavin Lambert <antlr at mirality.co.nz> wrote:
> At 11:00 11/02/2008, Mark Volkmann wrote:
>  >>   a : NUMBER UNIT ;
>  >>   b : VALUE NAME ;
>  >>
>  >>   NUMBER : ('0'..'9')+ ;
>  >>   UNIT : 'kg'  | 'lb' ;
>  >>
>  >>   VALUE : '0' | '1' ;
>  >>    NAME : ('!'..'~')+ ;
>  >>
>  >> How can I distinguish between a NUMBER and a VALUE and between
> a
>  >> UNIT and a NAME?
>  >
>  >I believe the key is that the order of lexer rules is
> significant.
>
> That's true, but...
>
>  >You need to put the VALUE rule before the NUMBER rule
>  >and the UNIT rule before the NAME rule
>
> That's not.
>
> The trouble here is that you're both thinking (or at least that's
> what it sounds like) that the parser is choosing the lexer rules
> it wants to look at, which is not the case.

I wasn't thinking that, but I was confused about how the lexer decides
which lexer rule to apply next.

> Lexing happens as a completely independent first step; the
> character stream is scanned and any non-fragment lexer rules are
> considered as possible candidates for generated tokens.  Of those,
> generally speaking the token match that consumes the most input
> "wins",

Ah, I didn't realize that. Why did you say "generally"? Do you know of
some exceptions to this?

> but failing that the first listed rule wins.

Why would it fail? Is it only because multiple lexer rules might match
the same number of characters?

> And all of
> this happens before a single parser rule is evaluated.
>
> So in the example above, swapping the rules will work for input
> like "1 bob" and "24 kg", but will fail on "1 kg", since that's
> VALUE UNIT and that doesn't match any of the parser rules.
>
> Two options:
>
> 1. remove the VALUE rule entirely (changing rule "b" to use a
> NUMBER as well) and either add a validation predicate to check the
> range of number entered is valid within the grammar or leave that
> to semantic checks outside the grammar.
>
> 2. change rule "a" to accept both NUMBERs and VALUEs.  (And swap
> them as Mark suggested.)

I tried option #2. My grammar is below, but it doesn't work with the
following input.

1Mark
19kg

Any idea why?

grammar NumberValue;

file: (line terminator)*;
line: a | b;
a: (VALUE | NUMBER) UNIT;
b: VALUE NAME;

VALUE: '0' | '1';
NUMBER: '0'..'9'+;

UNIT: 'kg' | 'lb';
NAME: '!'..'~'+;

terminator: NEWLINE | EOF;
NEWLINE: ('\r'? '\n')+;
WHITESPACE: (' ' | '\t')+ { $channel = HIDDEN; };

-- 
R. Mark Volkmann
Object Computing, Inc.

From jaluber at gmx.de  Mon Feb 11 06:08:32 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Mon, 11 Feb 2008 15:08:32 +0100
Subject: [antlr-interest] Lexer rule question
In-Reply-To: <"L71E040E995C244f3B8B89BCA5B6D2CFE.1202495706.scalix.temporal-wave.com*"@MHS>
References: <"L71E040E995C244f3B8B89BCA5B6D2CFE.1202495706.scalix.temporal-wave.com*"@MHS>
Message-ID: <47B056E0.50602@gmx.de>

Jim Idle schrieb:
>> -----Original Message-----
>> From: Johannes Luber [mailto:jaluber at gmx.de]
>> Sent: Friday, February 08, 2008 8:10 AM
>> To: antlr-interest at antlr.org
>> Subject: [antlr-interest] Lexer rule question
>>
>> Hi!
>>
>> I have never needed to know the answer before now, but what is the
>> actual difference between:
>>
>> A : B ;
>>
>> B : 'B' ;
>>
>> and
>>
>> A : B ;
>>
>> fragment B : 'B' ;
> 
> In the first instance, you will get an error that B is unreachable 
> because it sees a  non fragment rule A first and that calls B. Because B 
> is not a fragment, ANTLR tries to produce a token match for that as well 
> as A and finds that the spec for both A and B is exactly the same.
> 
> In the second instance, B is a fragment and so ANTLR knows not to try to 
> produce a real token B, as it is just a rule that is called by other 
> lexer token definitions. Hence there is only a spec for the token A, 
> which just calls the rule B.
> 
> All rules produce a single token only, but may call other rules, whether 
> fragment rules or not, as part of the spec. However, if you dont use 
> the fragment modifier, then the lexer will try to produce a token for 
> that rule on its own, as well as the other rules that use it in 
> combination.

Wait a minute. If I have the following situation:

A : B C;

B : 'B';

C : 'C':

Does ANTLR still give unreachable warnings? Does ANTLR produces three 
tokens (A, B and C)?
> 
> So, basically, if your rule is just something for another rule to match 
> with such as DIGIT etc, then use fragment and the lexer will not try to 
> produce code that matches and produces the token DIGIT. Always use 
> fragment if the parser is not expecting a token called by the lexer rule 
> name.

OK.

> To produce multiple tokens from one production you have to start 
> deriving the token stream and storing the tokens produced in a List that 
> you can consume/add to the token list (see source code comments here). 
> That would be an overhead that most lexers dont need, so it isnt the 
> default. There are few occasions that the only solution is to produce 
> two tokens from one lexer rule; it does happen but I have always managed 
> to find another way.

So my hypothetical situation above would only create the token A, if it 
would work at all?

Johannes

From markwright at internode.on.net  Mon Feb 11 06:57:15 2008
From: markwright at internode.on.net (Mark Wright)
Date: Tue, 12 Feb 2008 01:57:15 +1100
Subject: [antlr-interest] antlr-2007-12-31.14 was a great pre-release
Message-ID: <20080212015715.00007a4f@goanna>

Hi,

ANTLR is great.  I am really happy that it can compile my grammar.

My favourite pre-release is antlr-2007-12-31.14.  antlr-2007-12-31.14
is more than 10 times faster than the antlr-2007-12-31.17 pre-release
and all subsequent pre-releases up to the latest I could download
antlr-2008-02-05.15 (fisheye never works for me).

My ANTLR grammar is slightly over 2000 lines, the generated parser is
about 2.7 MB:

goanna% wc Tntdbo.g TntdboParser.java
    2134    4975   79049 Tntdbo.g
   46561  117928 2681755 TntdboParser.java
   48695  122903 2760804 total
goanna% 

Times for antlr to compile it with java 1.5.0_14-b03 on a 2.8 GHz
Opteron are:

 25416 ms - antlr-2007-12-31.14 - love this pre-release!
405494 ms - antlr-2008-02-05.15 - its great that it compiles it!

The grammar has 149 dis-ambiguating semantic predicates, no other
predicates. There is no use of ANTLR backtracking.

Thanks, Mark

antlr-2007-12-31.14
-------------------

gmake p
java -Xmx512m
-classpath /h/goanna/2/eng/dev/tntdbo/java_src:/h/goanna/2/eng/dev/tntdbo:/h/goanna/2/ts/antlr/antlr-2007-12-31.14/lib/antlr-2007-12-31.14.jar:/h/goanna/2/ts/antlr/antlr-2007-12-31.14/lib/runtime-2007-12-31.14.jar:/h/goanna/2/ts/antlr/antlr-2007-12-31.14/lib/stringtemplate-3.1b1.jar:/h/goanna/2/ts/antlr/antlr-2007-12-31.14/lib/antlr-2.7.7.jar
org.antlr.Tool -Xconversiontimeout 600000 -report Tntdbo.g ANTLR Parser
Generator  Version 3.1b1 (??)  1989-2007 ANTLR Grammar Report; Stats
Version 4 Grammar: Tntdbo Type: combined
Target language: Java
Output: AST
Grammar option k: none
Grammar option backtrack: false
Rules: 193
Productions: 484
Decisions: 266
Cyclic DFA decisions: 0
LL(1) decisions: 167
Min fixed k: -1
Max fixed k: 5
Average fixed k: 0.462406015037594
Standard deviation of fixed k: 1.060658499894118
Min acyclic DFA states: 0
Max acyclic DFA states: 88
Average acyclic DFA states: 8.101503759398497
Standard deviation of acyclic DFA states: 15.430948979548202
Total acyclic DFA states: 2155
Min cyclic DFA states: 0
Max cyclic DFA states: 0
Average cyclic DFA states: 0.0
Standard deviation of cyclic DFA states: 0.0
Total cyclic DFA states: 0
Vocabulary size: 297
DFA creation time in ms: 25416
Number of semantic predicates found: 149
Number of manual fixed lookahead k=value options: 68
Number of nondeterministic decisions: 109
Number of nondeterministic decisions resolved with predicates: 109
Number of DFA conversions terminated early: 0
Number of errors: 0
Number of warnings: 0
Number of infos: 0
Number of syntactic predicates found: 0
Decisions with syntactic predicates: 0
Decision DFAs using syntactic predicates: 0
Decisions with semantic predicates: 69
Decision DFAs using semantic predicates: 109

Backtracking report:
Number of decisions that backtrack: 0

NFA conversion early termination report:
Number of NFA conversions that terminated early: 0

rm -f TntdboParser.java.orig
mv TntdboParser.java TntdboParser.java.orig
sed -f sed_fix_dot_tree.sed TntdboParser.java.orig
>TntdboParser.java.missing_right_curly_brace cat
>TntdboParser.java.missing_right_curly_brace
>missing_right_curly_brace.txt >TntdboParser.java

Compilation finished at Tue Feb 12 00:36:39

-- 

antlr-2008-02-05.15
-------------------

-*- mode: compilation; default-directory:
"/h/goanna/2/eng/dev/tntdbo/java_src/tntdbo/dboc/" -*- Compilation
started at Tue Feb 12 00:50:28

gmake p
java -Xmx512m
-classpath /h/goanna/2/eng/dev/tntdbo/java_src:/h/goanna/2/eng/dev/tntdbo:/h/goanna/2/ts/antlr/antlr-2008-02-05.15/lib/antlr-2008-02-05.15.jar:/h/goanna/2/ts/antlr/antlr-2008-02-05.15/lib/runtime-2008-02-05.15.jar:/h/goanna/2/ts/antlr/antlr-2008-02-05.15/lib/stringtemplate-3.1b1.jar:/h/goanna/2/ts/antlr/antlr-2008-02-05.15/lib/antlr-2.7.7.jar
org.antlr.Tool -Xconversiontimeout 600000 -report Tntdbo.g ANTLR Parser
Generator  Version 3.1b1 (??)  1989-2007 ANTLR Grammar Report; Stats
Version 4 Grammar: Tntdbo Type: combined
Target language: Java
Output: AST
Grammar option k: none
Grammar option backtrack: false
Rules: 193
Productions: 484
Decisions: 266
Cyclic DFA decisions: 0
LL(1) decisions: 167
Min fixed k: -1
Max fixed k: 5
Average fixed k: 0.462406015037594
Standard deviation of fixed k: 1.060658499894118
Min acyclic DFA states: 0
Max acyclic DFA states: 88
Average acyclic DFA states: 8.101503759398497
Standard deviation of acyclic DFA states: 15.430948979548202
Total acyclic DFA states: 2155
Min cyclic DFA states: 0
Max cyclic DFA states: 0
Average cyclic DFA states: 0.0
Standard deviation of cyclic DFA states: 0.0
Total cyclic DFA states: 0
Vocabulary size: 297
DFA creation time in ms: 405494
Number of semantic predicates found: 149
Number of manual fixed lookahead k=value options: 68
Number of nondeterministic decisions: 109
Number of nondeterministic decisions resolved with predicates: 109
Number of DFA conversions terminated early: 0
Number of errors: 0
Number of warnings: 0
Number of infos: 1
Number of syntactic predicates found: 0
Decisions with syntactic predicates: 0
Decision DFAs using syntactic predicates: 0
Decisions with semantic predicates: 69
Decision DFAs using semantic predicates: 109

Backtracking report:
Number of decisions that backtrack: 0

NFA conversion early termination report:
Number of NFA conversions that terminated early: 0


Compilation finished at Tue Feb 12 00:57:27


-- 

From jaluber at gmx.de  Mon Feb 11 07:19:40 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Mon, 11 Feb 2008 16:19:40 +0100
Subject: [antlr-interest] antlr-2007-12-31.14 was a great pre-release
In-Reply-To: <20080212015715.00007a4f@goanna>
References: <20080212015715.00007a4f@goanna>
Message-ID: <47B0678C.50208@gmx.de>

Mark Wright schrieb:
> Hi,
> 
> ANTLR is great.  I am really happy that it can compile my grammar.
> 
> My favourite pre-release is antlr-2007-12-31.14.  antlr-2007-12-31.14
> is more than 10 times faster than the antlr-2007-12-31.17 pre-release
> and all subsequent pre-releases up to the latest I could download
> antlr-2008-02-05.15 (fisheye never works for me).

Do I interpret correctly, that later prereleases didn't have any 
speed-up? Or they had a speed-up, but not as fast one the last 2007 release?

Johannes

From antlr at shmuelhome.mine.nu  Mon Feb 11 07:21:01 2008
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Mon, 11 Feb 2008 17:21:01 +0200
Subject: [antlr-interest] Lexer ambiguities
In-Reply-To: <f6a04d790802100959r1e5a69f4r4d1f41ed1cfcbd93@mail.gmail.com>
References: <f6a04d790802100959r1e5a69f4r4d1f41ed1cfcbd93@mail.gmail.com>
Message-ID: <47B067DD.9060008@shmuelhome.mine.nu>

Amal Khailtash wrote:
> How does one resolve lexer ambiguities?  I have a grammar like:
>
>   a : NUMBER UNIT ;
>   b : VALUE NAME ;
>
>   NUMBER : ('0'..'9')+ ;
>   UNIT : 'kg'  | 'lb' ;
>
>   VALUE : '0' | '1' ;
>   NAME : ('!'..'~')+ ;
>
> How can I distinguish between a NUMBER and a VALUE and between a UNIT 
> and a NAME?
> -- Amal
>
As you know, the ambiguity at the lexer level is intrinsic. Every VALUE 
is a NUMBER and everything is a NAME. The lexer runs in its own 
environment and therefore the parser rules can't help resolve the lexer 
ambiguities. I would rewrite the rules as follows:

a : (NUMBER|value) unit ;
  b : value NAME ;

unit: 'kg'  | 'lb' ;
value: '0' | '1';

  NUMBER : ('0'..'9')+ ;
  NAME : (('!'..'/')|(':'..'~'))
              ('!'..'~')* ;

The trick is that the lexer overrides the catchalls for the literal 
inputs. I changed the definition of NAME so that it never begins with a 
number. Otherwise I ran into an ambiguity with NUMBER. As an added note, 
you need to decide how you want to handle whitespace.


From r.mark.volkmann at gmail.com  Mon Feb 11 07:40:17 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Mon, 11 Feb 2008 09:40:17 -0600
Subject: [antlr-interest] Lexer ambiguities
In-Reply-To: <47B067DD.9060008@shmuelhome.mine.nu>
References: <f6a04d790802100959r1e5a69f4r4d1f41ed1cfcbd93@mail.gmail.com>
	<47B067DD.9060008@shmuelhome.mine.nu>
Message-ID: <f0fcc6820802110740y24f47980pd6ef55933a6f43d6@mail.gmail.com>

On Feb 11, 2008 9:21 AM, shmuel siegel <antlr at shmuelhome.mine.nu> wrote:
>
> Amal Khailtash wrote:
> > How does one resolve lexer ambiguities?  I have a grammar like:
> >
> >   a : NUMBER UNIT ;
> >   b : VALUE NAME ;
> >
> >   NUMBER : ('0'..'9')+ ;
> >   UNIT : 'kg'  | 'lb' ;
> >
> >   VALUE : '0' | '1' ;
> >   NAME : ('!'..'~')+ ;
> >
> > How can I distinguish between a NUMBER and a VALUE and between a UNIT
> > and a NAME?
> > -- Amal
> >
> As you know, the ambiguity at the lexer level is intrinsic. Every VALUE
> is a NUMBER and everything is a NAME. The lexer runs in its own
> environment and therefore the parser rules can't help resolve the lexer
> ambiguities. I would rewrite the rules as follows:
>
> a : (NUMBER|value) unit ;
>   b : value NAME ;
>
> unit: 'kg'  | 'lb' ;
> value: '0' | '1';
>
>   NUMBER : ('0'..'9')+ ;
>   NAME : (('!'..'/')|(':'..'~'))
>               ('!'..'~')* ;
>
> The trick is that the lexer overrides the catchalls for the literal
> inputs. I changed the definition of NAME so that it never begins with a
> number. Otherwise I ran into an ambiguity with NUMBER. As an added note,
> you need to decide how you want to handle whitespace.

I can't get your ideas above to work. If you tested this, can you send
us your complete grammar file?

Here is my grammar with your ideas incorporated.

grammar NumberValue;

file: (line terminator)*;
line: a | b;
a: (value | NUMBER) unit;
b: value NAME;

unit: 'kg' | 'lb';
value: '0' | '1';

NUMBER: '0'..'9'+;
NAME: ('!'..'/' | ':'..'~' | '!'..'~')+;

terminator: NEWLINE | EOF;
NEWLINE: ('\r'? '\n')+;
WHITESPACE: (' ' | '\t')+ { $channel = HIDDEN; };

Here is my input.

1Mark
19kg

-- 
R. Mark Volkmann
Object Computing, Inc.

From markwright at internode.on.net  Mon Feb 11 08:12:01 2008
From: markwright at internode.on.net (Mark Wright)
Date: Tue, 12 Feb 2008 03:12:01 +1100
Subject: [antlr-interest] antlr-2007-12-31.14 was a great pre-release
In-Reply-To: <47B0678C.50208@gmx.de>
References: <20080212015715.00007a4f@goanna>
	<47B0678C.50208@gmx.de>
Message-ID: <20080212031201.00004c7f@goanna>

On Mon, 11 Feb 2008 16:19:40 +0100
Johannes Luber <jaluber at gmx.de> wrote:

> Mark Wright schrieb:
> > Hi,
> > 
> > ANTLR is great.  I am really happy that it can compile my grammar.
> > 
> > My favourite pre-release is antlr-2007-12-31.14.
> > antlr-2007-12-31.14 is more than 10 times faster than the
> > antlr-2007-12-31.17 pre-release and all subsequent pre-releases up
> > to the latest I could download antlr-2008-02-05.15 (fisheye never
> > works for me).
> 
> Do I interpret correctly, that later prereleases didn't have any 
> speed-up? Or they had a speed-up, but not as fast one the last 2007
> release?
> 
> Johannes

Hello Johannes,

antlr-2007-12-28.10 was the first pre-release that can compile my
grammar.   I just tried ANTLR 3.0.1, it runs for 6 minutes before
running out of heap space with -Xmx512m.

So yes: antlr-2007-12-28.10 to antlr-2007-12-31.14 were really great
pre-releases, they compile my grammar faster that ANTLR 3.0.1 and
current pre-releases:

 25416 ms - antlr-2007-12-31.14 - love this pre-release!
361301 ms - antlr-2007-12-31.17 - first release with the change.
405494 ms - antlr-2008-02-05.15 - its great that it compiles it.

There is a comment added to the CHANGES.TXT file between the
antlr-2007-12-31.14 and antlr-2007-12-31.17 pre-releases:

goanna% diff -wc antlr-2007-12-31.14/CHANGES.txt
antlr-2007-12-31.17/CHANGES.txt *** antlr-2007-12-31.14/CHANGES.txt
Tue Jan  1 09:03:10 2008 --- antlr-2007-12-31.17/CHANGES.txt     Tue
Jan  1 12:10:04 2008 ***************
*** 10,15 ****
--- 10,24 ----
  
  December 31, 2007
  
+ * Added the start of a semantic predicate computation for LL(1) to solve
+   a problem with slow grammar analysis even with k=1 due to predicates.
+   Then I realized the problem with that grammar was elsewhere.
+   Semantic context really shouldn't be used when preventing closure
+   recomputation.  The predicates became huge even though the reduced
+   value would be no different.  The analyzer seems faster now that
+   I am not testing predicate values all the time.  Further it may
+   terminate sooner just due to reduced closure recursion.
+ 
  * Moved FIRST/FOLLOW computations to a separate class LL1Analyzer to
    tidy up.
  
goanna% 

I was crazy enough to be working on my grammar on New Years Eve as well.

The output for antlr-2007-12-31.17 pre-release is below, the outputs
for antlr-2007-12-31.14 and antlr-2008-02-05.15 were in my last email.

Thanks, Mark

Compilation started at Tue Feb 12 02:42:17

antlr-2007-12-31.17
-------------------

gmake p
java -Xmx512m
-classpath /h/goanna/2/eng/dev/tntdbo/java_src:/h/goanna/2/eng/dev/tntdbo:/h/goanna/2/ts/antlr/antlr-2007-12-31.17/lib/antlr-2007-12-31.17.jar:/h/goanna/2/ts/antlr/antlr-2007-12-31.17/lib/runtime-2007-12-31.17.jar:/h/goanna/2/ts/antlr/antlr-2007-12-31.17/lib/stringtemplate-3.1b1.jar:/h/goanna/2/ts/antlr/antlr-2007-12-31.17/lib/antlr-2.7.7.jar
org.antlr.Tool -Xconversiontimeout 600000 -report Tntdbo.g ANTLR Parser
Generator  Version 3.1b1 (??)  1989-2007 ANTLR Grammar Report; Stats
Version 4 Grammar: Tntdbo Type: combined
Target language: Java
Output: AST
Grammar option k: none
Grammar option backtrack: false
Rules: 193
Productions: 484
Decisions: 266
Cyclic DFA decisions: 0
LL(1) decisions: 167
Min fixed k: -1
Max fixed k: 5
Average fixed k: 0.462406015037594
Standard deviation of fixed k: 1.060658499894118
Min acyclic DFA states: 0
Max acyclic DFA states: 88
Average acyclic DFA states: 8.101503759398497
Standard deviation of acyclic DFA states: 15.430948979548202
Total acyclic DFA states: 2155
Min cyclic DFA states: 0
Max cyclic DFA states: 0
Average cyclic DFA states: 0.0
Standard deviation of cyclic DFA states: 0.0
Total cyclic DFA states: 0
Vocabulary size: 297
DFA creation time in ms: 361301
Number of semantic predicates found: 149
Number of manual fixed lookahead k=value options: 68
Number of nondeterministic decisions: 109
Number of nondeterministic decisions resolved with predicates: 109
Number of DFA conversions terminated early: 0
Number of errors: 0
Number of warnings: 0
Number of infos: 0
Number of syntactic predicates found: 0
Decisions with syntactic predicates: 0
Decision DFAs using syntactic predicates: 0
Decisions with semantic predicates: 69
Decision DFAs using semantic predicates: 109

Backtracking report:
Number of decisions that backtrack: 0

NFA conversion early termination report:
Number of NFA conversions that terminated early: 0


Compilation finished at Tue Feb 12 02:48:32

From antlr at shmuelhome.mine.nu  Mon Feb 11 09:14:25 2008
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Mon, 11 Feb 2008 19:14:25 +0200
Subject: [antlr-interest] Lexer ambiguities
In-Reply-To: <f0fcc6820802110740y24f47980pd6ef55933a6f43d6@mail.gmail.com>
References: <f6a04d790802100959r1e5a69f4r4d1f41ed1cfcbd93@mail.gmail.com>	
	<47B067DD.9060008@shmuelhome.mine.nu>
	<f0fcc6820802110740y24f47980pd6ef55933a6f43d6@mail.gmail.com>
Message-ID: <47B08271.5070402@shmuelhome.mine.nu>

Mark Volkmann wrote:
> I can't get your ideas above to work. If you tested this, can you send
> us your complete grammar file?
>
> Here is my grammar with your ideas incorporated.
>
> grammar NumberValue;
>
> file: (line terminator)*;
> line: a | b;
> a: (value | NUMBER) unit;
> b: value NAME;
>
> unit: 'kg' | 'lb';
> value: '0' | '1';
>
> NUMBER: '0'..'9'+;
> NAME: ('!'..'/' | ':'..'~' | '!'..'~')+;
>
> terminator: NEWLINE | EOF;
> NEWLINE: ('\r'? '\n')+;
> WHITESPACE: (' ' | '\t')+ { $channel = HIDDEN; };
>
> Here is my input.
>
> 1Mark
> 19kg
>
>   
Close. Try:

NAME: ('!'..'/' | ':'..'~' ) ('!'..'~')*;




From parrt at cs.usfca.edu  Mon Feb 11 09:51:54 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 11 Feb 2008 09:51:54 -0800
Subject: [antlr-interest] antlr-2007-12-31.14 was a great pre-release
In-Reply-To: <20080212031201.00004c7f@goanna>
References: <20080212015715.00007a4f@goanna> <47B0678C.50208@gmx.de>
	<20080212031201.00004c7f@goanna>
Message-ID: <07ED34BA-BD4E-48CD-9B53-0268D8D77648@cs.usfca.edu>

Hi Mark,

  very strange.  I have added this to my near-term to do list!
Ter
On Feb 11, 2008, at 8:12 AM, Mark Wright wrote:

> On Mon, 11 Feb 2008 16:19:40 +0100
> Johannes Luber <jaluber at gmx.de> wrote:
>
>> Mark Wright schrieb:
>>> Hi,
>>>
>>> ANTLR is great.  I am really happy that it can compile my grammar.
>>>
>>> My favourite pre-release is antlr-2007-12-31.14.
>>> antlr-2007-12-31.14 is more than 10 times faster than the
>>> antlr-2007-12-31.17 pre-release and all subsequent pre-releases up
>>> to the latest I could download antlr-2008-02-05.15 (fisheye never
>>> works for me).
>>
>> Do I interpret correctly, that later prereleases didn't have any
>> speed-up? Or they had a speed-up, but not as fast one the last 2007
>> release?
>>
>> Johannes
>
> Hello Johannes,
>
> antlr-2007-12-28.10 was the first pre-release that can compile my
> grammar.   I just tried ANTLR 3.0.1, it runs for 6 minutes before
> running out of heap space with -Xmx512m.
>
> So yes: antlr-2007-12-28.10 to antlr-2007-12-31.14 were really great
> pre-releases, they compile my grammar faster that ANTLR 3.0.1 and
> current pre-releases:
>
> 25416 ms - antlr-2007-12-31.14 - love this pre-release!
> 361301 ms - antlr-2007-12-31.17 - first release with the change.
> 405494 ms - antlr-2008-02-05.15 - its great that it compiles it.
>
> There is a comment added to the CHANGES.TXT file between the
> antlr-2007-12-31.14 and antlr-2007-12-31.17 pre-releases:
>
> goanna% diff -wc antlr-2007-12-31.14/CHANGES.txt
> antlr-2007-12-31.17/CHANGES.txt *** antlr-2007-12-31.14/CHANGES.txt
> Tue Jan  1 09:03:10 2008 --- antlr-2007-12-31.17/CHANGES.txt     Tue
> Jan  1 12:10:04 2008 ***************
> *** 10,15 ****
> --- 10,24 ----
>
>  December 31, 2007
>
> + * Added the start of a semantic predicate computation for LL(1) to  
> solve
> +   a problem with slow grammar analysis even with k=1 due to  
> predicates.
> +   Then I realized the problem with that grammar was elsewhere.
> +   Semantic context really shouldn't be used when preventing closure
> +   recomputation.  The predicates became huge even though the reduced
> +   value would be no different.  The analyzer seems faster now that
> +   I am not testing predicate values all the time.  Further it may
> +   terminate sooner just due to reduced closure recursion.
> +
>  * Moved FIRST/FOLLOW computations to a separate class LL1Analyzer to
>    tidy up.
>
> goanna%
>
> I was crazy enough to be working on my grammar on New Years Eve as  
> well.
>
> The output for antlr-2007-12-31.17 pre-release is below, the outputs
> for antlr-2007-12-31.14 and antlr-2008-02-05.15 were in my last email.
>
> Thanks, Mark
>
> Compilation started at Tue Feb 12 02:42:17
>
> antlr-2007-12-31.17
> -------------------
>
> gmake p
> java -Xmx512m
> -classpath /h/goanna/2/eng/dev/tntdbo/java_src:/h/goanna/2/eng/dev/ 
> tntdbo:/h/goanna/2/ts/antlr/antlr-2007-12-31.17/lib/ 
> antlr-2007-12-31.17.jar:/h/goanna/2/ts/antlr/antlr-2007-12-31.17/lib/ 
> runtime-2007-12-31.17.jar:/h/goanna/2/ts/antlr/antlr-2007-12-31.17/ 
> lib/stringtemplate-3.1b1.jar:/h/goanna/2/ts/antlr/ 
> antlr-2007-12-31.17/lib/antlr-2.7.7.jar
> org.antlr.Tool -Xconversiontimeout 600000 -report Tntdbo.g ANTLR  
> Parser
> Generator  Version 3.1b1 (??)  1989-2007 ANTLR Grammar Report; Stats
> Version 4 Grammar: Tntdbo Type: combined
> Target language: Java
> Output: AST
> Grammar option k: none
> Grammar option backtrack: false
> Rules: 193
> Productions: 484
> Decisions: 266
> Cyclic DFA decisions: 0
> LL(1) decisions: 167
> Min fixed k: -1
> Max fixed k: 5
> Average fixed k: 0.462406015037594
> Standard deviation of fixed k: 1.060658499894118
> Min acyclic DFA states: 0
> Max acyclic DFA states: 88
> Average acyclic DFA states: 8.101503759398497
> Standard deviation of acyclic DFA states: 15.430948979548202
> Total acyclic DFA states: 2155
> Min cyclic DFA states: 0
> Max cyclic DFA states: 0
> Average cyclic DFA states: 0.0
> Standard deviation of cyclic DFA states: 0.0
> Total cyclic DFA states: 0
> Vocabulary size: 297
> DFA creation time in ms: 361301
> Number of semantic predicates found: 149
> Number of manual fixed lookahead k=value options: 68
> Number of nondeterministic decisions: 109
> Number of nondeterministic decisions resolved with predicates: 109
> Number of DFA conversions terminated early: 0
> Number of errors: 0
> Number of warnings: 0
> Number of infos: 0
> Number of syntactic predicates found: 0
> Decisions with syntactic predicates: 0
> Decision DFAs using syntactic predicates: 0
> Decisions with semantic predicates: 69
> Decision DFAs using semantic predicates: 109
>
> Backtracking report:
> Number of decisions that backtrack: 0
>
> NFA conversion early termination report:
> Number of NFA conversions that terminated early: 0
>
>
> Compilation finished at Tue Feb 12 02:48:32


From gudnabrsam at yahoo.com  Mon Feb 11 10:36:13 2008
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon, 11 Feb 2008 10:36:13 -0800 (PST)
Subject: [antlr-interest] Do lexer rules have scopes?
Message-ID: <902768.68024.qm@web55112.mail.re4.yahoo.com>

When attempting to generate:

grammar wip;

entry
	:	Token* EOF
	;

Token
	:	DollarBrace
	;

fragment
DollarBrace
scope {
	int depth;
}
	:	'${' {$DollarBrace::depth++;}
		(DollarBrace|.)*
		'}' {$DollarBrace::depth--;}
	;


I get:

[12:33:17] error(10):  internal error: /tmp/wip.g3 :
java.lang.NullPointerException
org.antlr.tool.DefineGrammarItemsWalker.ruleScopeSpec(DefineGrammarItemsWalker.java:964)
org.antlr.tool.DefineGrammarItemsWalker.rule(DefineGrammarItemsWalker.java:805)
org.antlr.tool.DefineGrammarItemsWalker.rules(DefineGrammarItemsWalker.java:490)
org.antlr.tool.DefineGrammarItemsWalker.grammarSpec(DefineGrammarItemsWalker.java:335)
org.antlr.tool.DefineGrammarItemsWalker.grammar(DefineGrammarItemsWalker.java:191)
org.antlr.tool.Grammar.setGrammarContent(Grammar.java:559)
org.antlr.tool.Grammar.<init>(Grammar.java:456)
org.antlr.Tool.getGrammar(Tool.java:331)
org.antlr.Tool.process(Tool.java:267)
org.antlr.works.generate.CodeGenerate.generate(Unknown
Source)
org.antlr.works.generate.CodeGenerate.run(Unknown
Source)
java.lang.Thread.run(Thread.java:613)

:(

-Matt


      ____________________________________________________________________________________
Never miss a thing.  Make Yahoo your home page. 
http://www.yahoo.com/r/hs

From antlr at mirality.co.nz  Mon Feb 11 10:52:01 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 12 Feb 2008 07:52:01 +1300
Subject: [antlr-interest] Do lexer rules have scopes?
In-Reply-To: <902768.68024.qm@web55112.mail.re4.yahoo.com>
References: <902768.68024.qm@web55112.mail.re4.yahoo.com>
Message-ID: <20080211185213.D6F1A11ED87@www.antlr.org>

At 07:36 12/02/2008, Matt Benson wrote:
 >
 >When attempting to generate:
[...]
 >fragment
 >DollarBrace
 >scope {
 >	int depth;
 >}
 >	:	'${' {$DollarBrace::depth++;}
 >		(DollarBrace|.)*
 >		'}' {$DollarBrace::depth--;}
 >	;
 >
 >
 >I get:
 >
 >[12:33:17] error(10):  internal error: /tmp/wip.g3 :
 >java.lang.NullPointerException
 >org.antlr.tool.DefineGrammarItemsWalker.ruleScopeSpec(DefineGrammar
 >ItemsWalker.java:964)

I don't believe lexer rules support scopes, no.  You can use 
member variables, though, as long as you're careful.


From gudnabrsam at yahoo.com  Mon Feb 11 10:55:44 2008
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon, 11 Feb 2008 10:55:44 -0800 (PST)
Subject: [antlr-interest] Do lexer rules have scopes?
Message-ID: <853865.92408.qm@web55103.mail.re4.yahoo.com>


--- Gavin Lambert <antlr at mirality.co.nz> wrote:

> At 07:36 12/02/2008, Matt Benson wrote:
>  >
>  >When attempting to generate:
> [...]
>  >fragment
>  >DollarBrace
>  >scope {
>  >	int depth;
>  >}
>  >	:	'${' {$DollarBrace::depth++;}
>  >		(DollarBrace|.)*
>  >		'}' {$DollarBrace::depth--;}
>  >	;
>  >
>  >
>  >I get:
>  >
>  >[12:33:17] error(10):  internal error: /tmp/wip.g3
> :
>  >java.lang.NullPointerException
> 
>
>org.antlr.tool.DefineGrammarItemsWalker.ruleScopeSpec(DefineGrammar
>  >ItemsWalker.java:964)
> 
> I don't believe lexer rules support scopes, no.  You
> can use 
> member variables, though, as long as you're careful.
> 

Thanks, Gavin.  I was able to get this working using
input parameters.  :)

-Matt

> 



      ____________________________________________________________________________________
Looking for last minute shopping deals?  
Find them fast with Yahoo! Search.  http://tools.search.yahoo.com/newsearch/category.php?category=shopping

From nelson.ana at gmail.com  Mon Feb 11 11:18:26 2008
From: nelson.ana at gmail.com (Ana Nelson)
Date: Mon, 11 Feb 2008 19:18:26 +0000
Subject: [antlr-interest] ANTLR + JRuby blog post with examples,
	grammar testing
Message-ID: <a7d6d2740802111118l470db76eva7ca66e4e82291a2@mail.gmail.com>

If anyone uses JRuby + the Java target, I've just written up some notes on
testing ANTLR grammars with test/unit and
also capturing Java's output and error streams.

Examples in subversion repository:
http://dev.agent.ie/svn/antlr/jruby-examples/

Blog post:
http://ananelson.com/said/on/2008/02/11/redirecting-java-output-streams-in-jruby-and-antlr-unit-testing/

I would be delighted to hear feedback/compare notes with anyone else using
ANTLR + JRuby.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080211/68593cfe/attachment.html 

From akhailtash at gmail.com  Mon Feb 11 13:20:38 2008
From: akhailtash at gmail.com (Amal Khailtash)
Date: Mon, 11 Feb 2008 16:20:38 -0500
Subject: [antlr-interest] Tokenizing question
In-Reply-To: <47b03c4b.1ed7720a.3570.ffff9ee6SMTPIN_ADDED@mx.google.com>
References: <f6a04d790802100717k1043385awb00dccc4f9a26790@mail.gmail.com>
	<f0fcc6820802101344i48839662wa9c56c04bc38f9f5@mail.gmail.com>
	<f6a04d790802101433v3f22147bu169f36a800dffca9@mail.gmail.com>
	<47b03c4b.1ed7720a.3570.ffff9ee6SMTPIN_ADDED@mx.google.com>
Message-ID: <f6a04d790802111320l1cbd4bfdu76bde272ffc08b00@mail.gmail.com>

Yes, I think my biggest problem as you mentioned is the fact that
VALUE, NUMBER and IDENTIFIER all overlap!  And yes, I get a NUMBER
where I expect a VALUE, or an VALUE where I expect an IDENTIFIER, or
so many other ways.

I completely understand that LEXER is done at a different stage and
that makes it difficult.  Tools like the old good lex have lexer
states to do context sensitive lexing.  ANTLR does not have context
sensitive lexing.

So what is the recommended solution?  Should I merge all these rules
into one?  Can I not use syntactic predicates in the lexer to resolve
this?
-- Amal

On Feb 11, 2008 7:14 AM, Gavin Lambert <antlr at mirality.co.nz> wrote:

> At 11:33 11/02/2008, Amal Khailtash wrote:
>
> >Each word is separated with whitespace.  Again this is from a
> >Verilog VCD grammar that seems to have many ambiguities.  I
> >rewrote it to make it simple to explain.  Part of the original
> >grammar looks like:
> [...]
> >scalar_value_change
> >   : VALUE IDENTIFIER
> >   ;
> >
> >VALUE
> >   : ('0' | '1' | 'x' | 'X' | 'z' | 'Z')
> >   ;
> >
> >IDENTIFIER
> >   : ('!'..'~')+
> >   ;
> >
> >fragment
> >DIGIT
> >   : '0'..'9'
> >   ;
> >
> >NUMBER
> >   : DIGIT+
> >   ;
>
> You're going to have to be careful with that VALUE rule, since it
> intersects with both IDENTIFIER and NUMBER.  (This isn't
> necessarily an error, it just means you need to realise you might
> end up with a VALUE token when you're expecting one of the
> others.)
>
> >The problem is the scalar_value_change rule.  VALUE and
> >IDENTIFIER can be connected together.
> >
> >A sample scalar_value_change is:
> >
> >1aae
> >0aae
>
> I'm assuming there's also a WS rule with skip() or $channel =
> HIDDEN that you didn't present above.
>
> If both "1 aae" and "1aae" are valid constructs, then what you
> already have should be fine.  Tokens are not required to be
> separated by whitespace; whitespace (or any other skipped or
> hidden token) merely act as a "break" between character sequences
> that could otherwise have been merged into a single token.
>
> In other words, "1 aae" should produce VALUE WS IDENTIFIER (with
> the WS skipped or ignored), and "1aae" should produce VALUE
> IDENTIFIER.  In both cases it matches the scalar_value_change
> rule.
>
> Now, "11aae" wouldn't -- that would be NUMBER IDENTIFIER.  But "1
> 1aae" would be VALUE WS VALUE IDENTIFIER, again with the WS
> skipped or ignored.  So you can see the whitespace acting as a
> token break here.
>
>
> --
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.5.516 / Virus Database: 269.20.2/1270 - Release Date:
> 10/02/2008 12:21
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080211/b7a78113/attachment.html 

From r.mark.volkmann at gmail.com  Mon Feb 11 13:39:34 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Mon, 11 Feb 2008 15:39:34 -0600
Subject: [antlr-interest] Tokenizing question
In-Reply-To: <f6a04d790802111320l1cbd4bfdu76bde272ffc08b00@mail.gmail.com>
References: <f6a04d790802100717k1043385awb00dccc4f9a26790@mail.gmail.com>
	<f0fcc6820802101344i48839662wa9c56c04bc38f9f5@mail.gmail.com>
	<f6a04d790802101433v3f22147bu169f36a800dffca9@mail.gmail.com>
	<47b03c4b.1ed7720a.3570.ffff9ee6SMTPIN_ADDED@mx.google.com>
	<f6a04d790802111320l1cbd4bfdu76bde272ffc08b00@mail.gmail.com>
Message-ID: <f0fcc6820802111339j32308c75jeaedbea8223e201d@mail.gmail.com>

On Feb 11, 2008 3:20 PM, Amal Khailtash <akhailtash at gmail.com> wrote:
> Yes, I think my biggest problem as you mentioned is the fact that
>  VALUE, NUMBER and IDENTIFIER all overlap!  And yes, I get a NUMBER
>  where I expect a VALUE, or an VALUE where I expect an IDENTIFIER, or
>  so many other ways.
>
>
> I completely understand that LEXER is done at a different stage and
>  that makes it difficult.  Tools like the old good lex have lexer
>  states to do context sensitive lexing.  ANTLR does not have context
>  sensitive lexing.
>
>
> So what is the recommended solution?  Should I merge all these rules
>  into one?  Can I not use syntactic predicates in the lexer to resolve
>  this?

I think Shmuel Siegel provided a solution in the thread on "Lexer
ambiguities". The trick is to make the most general of your
conflicting rules be a lexer rule and make the other, more specific
rules be parser rules.

Here's some sample input.

$timescale
  19ms
$end
1Amal

Here's a grammar that parses it using the trick from Shmuel.

grammar Verilog2;

value_change_dump_definition
  : declaration_command* simulation_command* EOF
  ; // omitted enddefinitions from middle of sequence

declaration_command: timescale; // omitted other alternatives
timescale: '$timescale' NUMBER time_unit '$end';
time_unit: 's' | 'ms' | 'us' | 'ns' | 'ps' | 'fs';
simulation_command: value_change; // omitted other alternatives
value_change: scalar_value_change;
scalar_value_change: value IDENTIFIER;

value: '0' | '1' | 'x' | 'X' | 'z' | 'Z';
NUMBER: DIGIT+;
fragment DIGIT: '0'..'9';

// An IDENTIFIER cannot begin with a digit.
IDENTIFIER: ('!'..'/' | ':'..'~') ('!'..'~')*;

WHITESPACE: (' ' | '\t')+ { $channel = HIDDEN; };
NEWLINE: ('\r'? '\n')+ { $channel = HIDDEN; };

> On Feb 11, 2008 7:14 AM, Gavin Lambert <antlr at mirality.co.nz> wrote:
> >
> > At 11:33 11/02/2008, Amal Khailtash wrote:
> >
> > >Each word is separated with whitespace.  Again this is from a
> > >Verilog VCD grammar that seems to have many ambiguities.  I
> > >rewrote it to make it simple to explain.  Part of the original
> > >grammar looks like:
> > [...]
> >
> > >scalar_value_change
> > >   : VALUE IDENTIFIER
> > >   ;
> > >
> > >VALUE
> > >   : ('0' | '1' | 'x' | 'X' | 'z' | 'Z')
> > >   ;
> > >
> > >IDENTIFIER
> > >   : ('!'..'~')+
> > >   ;
> > >
> > >fragment
> > >DIGIT
> > >   : '0'..'9'
> > >   ;
> > >
> > >NUMBER
> > >   : DIGIT+
> > >   ;
> >
> > You're going to have to be careful with that VALUE rule, since it
> > intersects with both IDENTIFIER and NUMBER.  (This isn't
> > necessarily an error, it just means you need to realise you might
> > end up with a VALUE token when you're expecting one of the
> > others.)
> >
> >
> > >The problem is the scalar_value_change rule.  VALUE and
> > >IDENTIFIER can be connected together.
> > >
> > >A sample scalar_value_change is:
> > >
> > >1aae
> > >0aae
> >
> > I'm assuming there's also a WS rule with skip() or $channel =
> > HIDDEN that you didn't present above.
> >
> > If both "1 aae" and "1aae" are valid constructs, then what you
> > already have should be fine.  Tokens are not required to be
> > separated by whitespace; whitespace (or any other skipped or
> > hidden token) merely act as a "break" between character sequences
> > that could otherwise have been merged into a single token.
> >
> > In other words, "1 aae" should produce VALUE WS IDENTIFIER (with
> > the WS skipped or ignored), and "1aae" should produce VALUE
> > IDENTIFIER.  In both cases it matches the scalar_value_change
> > rule.
> >
> > Now, "11aae" wouldn't -- that would be NUMBER IDENTIFIER.  But "1
> > 1aae" would be VALUE WS VALUE IDENTIFIER, again with the WS
> > skipped or ignored.  So you can see the whitespace acting as a
> > token break here.

-- 
R. Mark Volkmann
Object Computing, Inc.

From shro8822 at vandals.uidaho.edu  Mon Feb 11 14:12:57 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Mon, 11 Feb 2008 14:12:57 -0800
Subject: [antlr-interest] adding actions to rules breaks stuff
Message-ID: <BAYC1-PASMTP0116C76A92601D67D28967F52A0@CEZ.ICE>

I have a grammar that Antlr will process. However when I try to add actions

example:
///////
document [Object o]
    : i+=import* c+=thing* EOF {o=new Doc(i,o);}
    ;

import [Object s]
    : 'import' s_=Text eol_ {s=s_;}
    ;
//////
it says this:

    missing parameter(s) on rule reference: import

When I add an action to the top most rule it works, but when I add an 
action to any rule that is used by anyone else, I get that error message.
I'm assuming I'm doing something wrong but I can't find anything in the 
docs that is useful. A (well documented) example or a pointer into the 
documentation would be appreciated. Also, how could I have found the 
info my self would be of even more help.

Benjamin Shropshire

From gudnabrsam at yahoo.com  Mon Feb 11 14:24:23 2008
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon, 11 Feb 2008 14:24:23 -0800 (PST)
Subject: [antlr-interest] Ant build
Message-ID: <16118.40627.qm@web55105.mail.re4.yahoo.com>

All:  I had thought there were problems with the Ant
build, but I can no longer locate the emails that made
me think so.  I had intended to address these; if
anyone knows of anything wrong with the existing Ant
build, please let me know as I've finally gotten p4 to
allow me to synch up and everything.  In return I'll
try and put together some annoying lexing questions
for the list.  ;)

Thanks,
Matt


      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ 


From gudnabrsam at yahoo.com  Mon Feb 11 14:26:51 2008
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon, 11 Feb 2008 14:26:51 -0800 (PST)
Subject: [antlr-interest] Unit tests WAS Ant build
In-Reply-To: <16118.40627.qm@web55105.mail.re4.yahoo.com>
Message-ID: <191272.43011.qm@web55105.mail.re4.yahoo.com>

Also, can anyone confirm that there are test failures
in HEAD (or the equivalent concept in p4)?  Running
the tests through Ant I get 18 failed o/o 862 tests.

Thanks,
Matt

--- Matt Benson <gudnabrsam at yahoo.com> wrote:

> All:  I had thought there were problems with the Ant
> build, but I can no longer locate the emails that
> made
> me think so.  I had intended to address these; if
> anyone knows of anything wrong with the existing Ant
> build, please let me know as I've finally gotten p4
> to
> allow me to synch up and everything.  In return I'll
> try and put together some annoying lexing questions
> for the list.  ;)
> 
> Thanks,
> Matt
> 
> 
>      
>
____________________________________________________________________________________
> Be a better friend, newshound, and 
> know-it-all with Yahoo! Mobile.  Try it now. 
>
http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
> 
> 
> 



      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ 


From jaluber at gmx.de  Mon Feb 11 14:31:13 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Mon, 11 Feb 2008 23:31:13 +0100
Subject: [antlr-interest] Ant build
In-Reply-To: <16118.40627.qm@web55105.mail.re4.yahoo.com>
References: <16118.40627.qm@web55105.mail.re4.yahoo.com>
Message-ID: <47B0CCB1.8070300@gmx.de>

Matt Benson schrieb:
> All:  I had thought there were problems with the Ant
> build, but I can no longer locate the emails that made
> me think so.  I had intended to address these; if
> anyone knows of anything wrong with the existing Ant
> build, please let me know as I've finally gotten p4 to
> allow me to synch up and everything.  In return I'll
> try and put together some annoying lexing questions
> for the list.  ;)

Can you get the ant-build run successfully on your end? I get this error:

"Buildfile: build.xml

generator-prepare:
     [mkdir] Created dir: /.../ANTLR/code/antlr/main/codegen
      [copy] Copying 6 files to /.../ANTLR/code/antlr/main/codegen

generator:
     [antlr] Exception in thread "main" java.lang.NoClassDefFoundError: 
antlr/Tool
     [antlr] Caused by: java.lang.ClassNotFoundException: antlr.Tool
     [antlr]     at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
     [antlr]     at java.security.AccessController.doPrivileged(Native 
Method)
     [antlr]     at 
java.net.URLClassLoader.findClass(URLClassLoader.java:188)
     [antlr]     at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
     [antlr]     at 
sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:276)
     [antlr]     at java.lang.ClassLoader.loadClass(ClassLoader.java:251)
     [antlr]     at 
java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)

BUILD FAILED
/.../ANTLR/code/antlr/main/build.xml:102: The following error occurred 
while executing this line:
/.../ANTLR/code/antlr/main/build.xml:55: ANTLR returned: 1"

I suppose the problem is that two grammars are already for ANTLR v3, 
while the others are still for ANTLR 2.7.7.

Johannes

From jaluber at gmx.de  Mon Feb 11 14:32:31 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Mon, 11 Feb 2008 23:32:31 +0100
Subject: [antlr-interest] Unit tests WAS Ant build
In-Reply-To: <191272.43011.qm@web55105.mail.re4.yahoo.com>
References: <191272.43011.qm@web55105.mail.re4.yahoo.com>
Message-ID: <47B0CCFF.4020803@gmx.de>

Matt Benson schrieb:
> Also, can anyone confirm that there are test failures
> in HEAD (or the equivalent concept in p4)?  Running
> the tests through Ant I get 18 failed o/o 862 tests.

How do you run them?

Johannes

From gudnabrsam at yahoo.com  Mon Feb 11 15:04:59 2008
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon, 11 Feb 2008 15:04:59 -0800 (PST)
Subject: [antlr-interest] Ant build
In-Reply-To: <47B0CCB1.8070300@gmx.de>
Message-ID: <568578.89632.qm@web55102.mail.re4.yahoo.com>


--- Johannes Luber <jaluber at gmx.de> wrote:

> Matt Benson schrieb:
> > All:  I had thought there were problems with the
> Ant
> > build, but I can no longer locate the emails that
> made
> > me think so.  I had intended to address these; if
> > anyone knows of anything wrong with the existing
> Ant
> > build, please let me know as I've finally gotten
> p4 to
> > allow me to synch up and everything.  In return
> I'll
> > try and put together some annoying lexing
> questions
> > for the list.  ;)
> 
> Can you get the ant-build run successfully on your
> end? I get this error:
> 
> "Buildfile: build.xml
> 
> generator-prepare:
>      [mkdir] Created dir:
> /.../ANTLR/code/antlr/main/codegen
>       [copy] Copying 6 files to
> /.../ANTLR/code/antlr/main/codegen
> 
> generator:
>      [antlr] Exception in thread "main"
> java.lang.NoClassDefFoundError: 
> antlr/Tool
>      [antlr] Caused by:
> java.lang.ClassNotFoundException: antlr.Tool
>      [antlr]     at
>
java.net.URLClassLoader$1.run(URLClassLoader.java:200)
>      [antlr]     at
> java.security.AccessController.doPrivileged(Native 
> Method)
>      [antlr]     at 
>
java.net.URLClassLoader.findClass(URLClassLoader.java:188)
>      [antlr]     at
>
java.lang.ClassLoader.loadClass(ClassLoader.java:306)
>      [antlr]     at 
>
sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:276)
>      [antlr]     at
>
java.lang.ClassLoader.loadClass(ClassLoader.java:251)
>      [antlr]     at 
>
java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
> 
> BUILD FAILED
> /.../ANTLR/code/antlr/main/build.xml:102: The
> following error occurred 
> while executing this line:
> /.../ANTLR/code/antlr/main/build.xml:55: ANTLR
> returned: 1"
> 
> I suppose the problem is that two grammars are
> already for ANTLR v3, 
> while the others are still for ANTLR 2.7.7.

This means ANTLR 2 is not found for generating files. 
At present you need to install an ANTLR 2 (I use
2.7.7) jar in $ANT_HOME/lib as well as in ./lib. 
Also, stringtemplate.jar needs to be in ./lib.  I'm
going to send Ter an updated buildfile that 1) uses
the ANTLR 2 jar in ./lib for generation so it's not
necessary to add it both places (though it shouldn't
hurt) as well as provides warnings when ANTLR 2 or
stringtemplate is missing.

br,
Matt


> 
> Johannes
> 



      ____________________________________________________________________________________
Never miss a thing.  Make Yahoo your home page. 
http://www.yahoo.com/r/hs

From gudnabrsam at yahoo.com  Mon Feb 11 15:09:53 2008
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon, 11 Feb 2008 15:09:53 -0800 (PST)
Subject: [antlr-interest] Unit tests WAS Ant build
In-Reply-To: <47B0CCFF.4020803@gmx.de>
Message-ID: <113637.28525.qm@web55106.mail.re4.yahoo.com>


--- Johannes Luber <jaluber at gmx.de> wrote:

> Matt Benson schrieb:
> > Also, can anyone confirm that there are test
> failures
> > in HEAD (or the equivalent concept in p4)? 
> Running
> > the tests through Ant I get 18 failed o/o 862
> tests.
> 
> How do you run them?
> 
See my answer to the previous mail.  Once you have the
requisite jars in ./lib you should be able to run the
unit tests with:

ant test

HTH,
Matt

> Johannes
> 



      ____________________________________________________________________________________
Never miss a thing.  Make Yahoo your home page. 
http://www.yahoo.com/r/hs

From markwright at internode.on.net  Mon Feb 11 15:15:13 2008
From: markwright at internode.on.net (Mark Wright)
Date: Tue, 12 Feb 2008 10:15:13 +1100
Subject: [antlr-interest] adding actions to rules breaks stuff
In-Reply-To: <BAYC1-PASMTP0116C76A92601D67D28967F52A0@CEZ.ICE>
References: <BAYC1-PASMTP0116C76A92601D67D28967F52A0@CEZ.ICE>
Message-ID: <20080212101513.00006ebf@goanna>

Hello Benjamin,

The ANTLR syntax:

import [Object s]

declares rule import as taking a parameter s.  So ANTLR is
pointing out that when you call it in document, it needs
to pass it the parameter, something like:

document [Object o]
     : (i+=import[o])* c+=thing* EOF {o=new Doc($i,o);}
    ;

If you wanted just a local variable instead, then these can
be declared like:

document
@init { Object o; }
    : i+=import* c+=thing* EOF {o=new Doc($i,o);}
    ;

import
@init { Object s; }
    : 'import' s_=Text eol_ {s=$s_;}
    ;

I strongly recommend buying and reading the ANTLR book.

Regards, Mark

On Mon, 11 Feb 2008 14:12:57 -0800
Benjamin Shropshire <shro8822 at vandals.uidaho.edu> wrote:

> I have a grammar that Antlr will process. However when I try to add
> actions
> 
> example:
> ///////
> document [Object o]
>     : i+=import* c+=thing* EOF {o=new Doc(i,o);}
>     ;
> 
> import [Object s]
>     : 'import' s_=Text eol_ {s=s_;}
>     ;
> //////
> it says this:
> 
>     missing parameter(s) on rule reference: import
> 
> When I add an action to the top most rule it works, but when I add an 
> action to any rule that is used by anyone else, I get that error
> message. I'm assuming I'm doing something wrong but I can't find
> anything in the docs that is useful. A (well documented) example or a
> pointer into the documentation would be appreciated. Also, how could
> I have found the info my self would be of even more help.
> 
> Benjamin Shropshire


-- 

From jimi at temporal-wave.com  Mon Feb 11 15:00:05 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 11 Feb 2008 15:00:05 -0800
Subject: [antlr-interest] TSQL Grammar
In-Reply-To: <47AFB800.8040007@ec.auckland.ac.nz>
Message-ID: <"L50A110C63A494687AEEF82030BC85918.1202772297.scalix.temporal-wave.com*"@MHS>

As this seems to come  up a lot, I feel justified in saying on the list 
that I will shortly have a TSQL parser and tree parser available on 
commercial terms which will include royalty free source code for a 
reasonable price. Reasonable is probably beyond the average individual I 
am afraid but very agreeable for companies I should think as the task is 
an immense one if you want to achieve it without too much in the way of 
predicates etc.

Jim

> -----Original Message-----
> From: Jamie Penney [mailto:jpen054 at ec.auckland.ac.nz]
> Sent: Sunday, February 10, 2008 6:51 PM
> To: antlr-interest at antlr.org
> Cc: Jamie Penney
> Subject: Re: [antlr-interest] TSQL Grammar
> 
> I need a TSQL grammar for generating an AST from TSQL code for a
> commercial product I am working on. We were using programmar for
> parsing, but the guy who wrote it hasn't replied to any emails for a
> while and hasn't updated it for a while. We are trying to shift to
> ANTLR
> but we need to find replacements for the programmar grammars we have
> first.
> 
> Is your grammar licensed under a commercially friendly license (MIT or
> similar)? If so, I would be happy to give back any additions I make.
> 
> Thanks,
> Jamie Penney
> 
> Alexandre Porcelli wrote:
> > What is your interest in T-SQL?
> > I wrote a T-SQL grammar... it is a really HUGE job....
> >
> > On Feb 10, 2008 11:10 PM, Jamie Penney <jpen054 at ec.auckland.ac.nz>
> wrote:
> >
> >> Hi All,
> >> I'm sure this has been asked a million times, but I can't find
> anything
> >> in the archives. Has anyone written a T-SQL grammar, or at least
> gotten
> >> something close to working that I might be able to modify?
> >>
> >> Thanks,
> >> Jamie Penney
> >>
> >>
> 



From shro8822 at vandals.uidaho.edu  Mon Feb 11 15:25:12 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Mon, 11 Feb 2008 15:25:12 -0800
Subject: [antlr-interest] adding actions to rules breaks stuff
In-Reply-To: <20080212101513.00006ebf@goanna>
References: <BAYC1-PASMTP0116C76A92601D67D28967F52A0@CEZ.ICE>
	<20080212101513.00006ebf@goanna>
Message-ID: <BAYC1-PASMTP062B1BA9E27A737F4B4074F52A0@CEZ.ICE>

Mark Wright wrote:
> Hello Benjamin,
>
> The ANTLR syntax:
>
> import [Object s]
>
> declares rule import as taking a parameter s.  So ANTLR is
> pointing out that when you call it in document, it needs
> to pass it the parameter, something like:
>
> document [Object o]
>      : (i+=import[o])* c+=thing* EOF {o=new Doc($i,o);}
>     ;
Ah!! this looks like it works:

import returns [Object s]


> I strongly recommend buying and reading the ANTLR book.
>
>   
I can't afford it and I don't known if it would be worth having the 
company buy it as I'm still in the "will this be useful stage". A bit of 
a catch-22: can't figure the program out without the book, can't justify 
buying the book without figuring the program out! That's why online docs 
are so important to me!

From jimi at temporal-wave.com  Mon Feb 11 15:08:55 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 11 Feb 2008 15:08:55 -0800
Subject: [antlr-interest] adding actions to rules breaks stuff
In-Reply-To: <BAYC1-PASMTP0116C76A92601D67D28967F52A0@CEZ.ICE>
Message-ID: <"L3859D5B805A4463f8CAF0F916AF9F23A.1202772826.scalix.temporal-wave.com*"@MHS>



> -----Original Message-----
> From: Benjamin Shropshire [mailto:shro8822 at vandals.uidaho.edu]
> Sent: Monday, February 11, 2008 2:13 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] adding actions to rules breaks stuff
> 
> I have a grammar that Antlr will process. However when I try to add
> actions
> 
> example:
> ///////
> document [Object o]
>     : i+=import* c+=thing* EOF {o=new Doc(i,o);}
>     ;
> 
> import [Object s]
>     : 'import' s_=Text eol_ {s=s_;}
>     ;
> //////
> it says this:
> 
>     missing parameter(s) on rule reference: import
> 

The error message is as clear as it can be I think. You are using the 
rule import without giving it any calling parameters but you have 
declared it as taking a parameter. Perhaps you meant the import rule to 
use a returns [ Object s] ?

Jim


From jimi at temporal-wave.com  Mon Feb 11 15:11:10 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 11 Feb 2008 15:11:10 -0800
Subject: [antlr-interest] adding actions to rules breaks stuff
In-Reply-To: <BAYC1-PASMTP062B1BA9E27A737F4B4074F52A0@CEZ.ICE>
Message-ID: <"L8F61DB75749C4ca1B55066272D1D718D.1202772952.scalix.temporal-wave.com*"@MHS>

Did you download the examples zip/tar and take a look at those, as well 
as the wiki pages?

Jim 

> -----Original Message-----
> From: Benjamin Shropshire [mailto:shro8822 at vandals.uidaho.edu]
> Sent: Monday, February 11, 2008 3:25 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] adding actions to rules breaks stuff
> 
> Mark Wright wrote:
> > Hello Benjamin,
> >
> > The ANTLR syntax:
> >
> > import [Object s]
> >
> > declares rule import as taking a parameter s.  So ANTLR is
> > pointing out that when you call it in document, it needs
> > to pass it the parameter, something like:
> >
> > document [Object o]
> >      : (i+=import[o])* c+=thing* EOF {o=new Doc($i,o);}
> >     ;
> Ah!! this looks like it works:
> 
> import returns [Object s]
> 
> 
> > I strongly recommend buying and reading the ANTLR book.
> >
> >
> I can't afford it and I don't known if it would be worth having the
> company buy it as I'm still in the "will this be useful stage". A bit
> of
> a catch-22: can't figure the program out without the book, can't
> justify
> buying the book without figuring the program out! That's why online
> docs
> are so important to me!



From peter.bulychev at gmail.com  Mon Feb 11 16:21:21 2008
From: peter.bulychev at gmail.com (Peter Bulychev)
Date: Tue, 12 Feb 2008 02:21:21 +0200
Subject: [antlr-interest] put instructions into constructors
Message-ID: <ef5132890802111621t56936b2at161e4fafb2cf2cc6@mail.gmail.com>

Hello.

How can I put instructions in the constructors of all *_return classes?

Thank you.

-- 
Best regards,
   Peter Bulychev.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080212/fee13a52/attachment.html 

From markwright at internode.on.net  Mon Feb 11 16:27:12 2008
From: markwright at internode.on.net (Mark Wright)
Date: Tue, 12 Feb 2008 11:27:12 +1100
Subject: [antlr-interest] Syntactic anti-predicates
In-Reply-To: <b8ceeef70802110545r2dfc24b3u7cd9441d6e231685@mail.gmail.com>
References: <b8ceeef70802090953v5bb8d0b1p8d25215e1e8cf3a8@mail.gmail.com>
	<47ae1cd6.0a87460a.2c94.ffffb235SMTPIN_ADDED@mx.google.com>
	<b8ceeef70802110545r2dfc24b3u7cd9441d6e231685@mail.gmail.com>
Message-ID: <20080212112712.00002778@goanna>

Hello Darach and Steve,

> Is there a convenient way to say "if the upcoming tokens look like X Y
> Z" then *don't* match this rule?

I find that path leads to madness in a complex grammar.

An alternative approach that can be made to work is to
place dis-ambiguating semantic predicates on every other alternative.

> It seems I always have to resort to a
> semantic predicate like this:
>
> {input.LA(1) != X && input.LA(2) != Y}? =>  R
>
> or some complicated rule that amount to not X Y Z:
>
> (notXYZ) => R
>
> Is there a simple way I'm missing?

The left factoring approach you found later looks correct:

> By the time the syntactic predicate inside fails the match, it's too
> late.

So you understand the problem.

> I could left factor table_line:

> table_line:
>   (
>   (ws? PIPE PLUS) => ws? table_caption
>   | (ws? PIPE HYPHEN) => ws? table_row_separator
>   | (ws? EXCLAMATION) => ws? table_header_cells
>   | (ws? PIPE) => ws? table_data_cells
>   );
>
> But that's inelegant.

Looks elagant and like it might work to me.

> The only way to get around it at the moment that I can see is to
> either left factor as above, or use a semantic predicate - which I'm
> not really sure how to use with an arbitrary length rule like ws.

If you don't mind writing and debugging thousands of lines of your
own code, then dis-ambiguating semantic predicates are very powerful
for complex grammars.  Abitrary length rules and rules that call other
rules can be handled with iterative loops and little hand coded
recursive descent compilers.

Darach writes:
> The gated predicate ( ... { pc > 0?=> ')'  ... ) and parenthesis
>'reference counting'
> is what allows this to work but I've had limited/little success with
> more complex
> contexts such as trying to match more than a single character for
> terminating the
> arbitrary token sequence block.

You can write a dis-ambiguating semantic predicate the scans forward
matching parentheses.  Dis-ambiguating semantic predicates are called
multiple times, so it easier to debug to log the answers and cache
the result. I have attached an example to show how to log and cache
the results.

> The same grammar fails to produce the same output and/or exhibit the
> same behavior when interpreted by ANTLRworks with the same input data.

I think someone else noted recently on this list that the ANTLRworks
interpreter does not understand the gated predicate, and you would have
to use the debugger.

> Having the book definitely helps too.

The book is great.

Regards, Mark

-- 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Makefile
Type: application/octet-stream
Size: 1232 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080212/fa747b62/attachment-0002.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SemanticActions.java
Type: text/x-java
Size: 4853 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080212/fa747b62/attachment-0003.bin 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: u.c
Type: text/x-csrc
Size: 14 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080212/fa747b62/attachment-0004.bin 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Unsigned.g
Type: application/octet-stream
Size: 692 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080212/fa747b62/attachment-0003.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Unsigned.java
Type: text/x-java
Size: 3158 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080212/fa747b62/attachment-0005.bin 

From jimi at temporal-wave.com  Mon Feb 11 16:33:00 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 11 Feb 2008 16:33:00 -0800
Subject: [antlr-interest] put instructions into constructors
In-Reply-To: <ef5132890802111621t56936b2at161e4fafb2cf2cc6@mail.gmail.com>
Message-ID: <"L749D98816A3E4cc98343B59A4FA68B63.1202777870.scalix.temporal-wave.com*"@MHS>

The *_return are really just containers for the ?real? return values.
What you probably looking to do is have your rules return your own
objects, the constructors for which you can of course code to be
whatever you like.

 

If you write:

 

rulea

returns [ int x, int y ]

 

You can just as easily write:

 

rulea

returns [ myPointClass point]

 

Then your action code can: { $point = new myPointClass(whatever); }

 

And invocations of the rule:

 

 ? xx= rulea ?

 

Can then use (in actions):

 

   { out.println(?Point is ? + $xx.point); }

 

Hope that helps,

 

Jim

 

From: Peter Bulychev [mailto:peter.bulychev at gmail.com] 
Sent: Monday, February 11, 2008 4:21 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] put instructions into constructors

 

Hello.

How can I put instructions in the constructors of all *_return classes?

Thank you.

-- 
Best regards,
   Peter Bulychev. 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080211/4d174648/attachment.html 

From jimi at temporal-wave.com  Mon Feb 11 16:46:20 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 11 Feb 2008 16:46:20 -0800
Subject: [antlr-interest] Syntactic anti-predicates
In-Reply-To: <20080212112712.00002778@goanna>
Message-ID: <"L9602091A08364767A9892950BA159506.1202778671.scalix.temporal-wave.com*"@MHS>



> -----Original Message-----
> From: Mark Wright [mailto:markwright at internode.on.net]
> 
> > I could left factor table_line:
> 
> > table_line:
> >   (
> >   (ws? PIPE PLUS) => ws? table_caption
> >   | (ws? PIPE HYPHEN) => ws? table_row_separator
> >   | (ws? EXCLAMATION) => ws? table_header_cells
> >   | (ws? PIPE) => ws? table_data_cells
> >   );
> >
> > But that's inelegant.
> 
> Looks elagant and like it might work to me.

If you move the ws and PIPE out more then you probably won't need the 
predicates at all:

ws?  // Do you really need this, can't you just use $channel=2 or 
$channel=HIDDEN?

	(
		PIPE // Take this out of the following rules

			( table_caption
			  | table_data_cells ....

		| table_header_cells
 ....

Or as this looks like wiki, just use global backtracking and 
memorization and let the runtime decide :-)

Jim


From Austin_Hastings at Yahoo.com  Mon Feb 11 13:44:51 2008
From: Austin_Hastings at Yahoo.com (Austin Hastings)
Date: Mon, 11 Feb 2008 16:44:51 -0500
Subject: [antlr-interest] Tokenizing question
In-Reply-To: <f6a04d790802111320l1cbd4bfdu76bde272ffc08b00@mail.gmail.com>
References: <f6a04d790802100717k1043385awb00dccc4f9a26790@mail.gmail.com>	<f0fcc6820802101344i48839662wa9c56c04bc38f9f5@mail.gmail.com>	<f6a04d790802101433v3f22147bu169f36a800dffca9@mail.gmail.com>	<47b03c4b.1ed7720a.3570.ffff9ee6SMTPIN_ADDED@mx.google.com>
	<f6a04d790802111320l1cbd4bfdu76bde272ffc08b00@mail.gmail.com>
Message-ID: <47B0C1D3.2080702@Yahoo.com>

Amal,

While antlr doesn't explicitly support lexer states, you can use the 
@lexer::members block to add data elements to your lexer, and of course 
you can put whatever code you want in place. I have used this with some 
success to "state-ify" parts of a lexer. You just have to code the state 
info by hand. :(

My approach dealt with using curly braces to delimit "opaque" versus 
"transparent" blocks. My grammar was such that every "opaque" block was 
preceded by one of a set of known tokens. Any time I saw such a token, I 
set a "opaque-block-coming" flag. The rest is pretty obvious.


=Austin


Amal Khailtash wrote:
> Yes, I think my biggest problem as you mentioned is the fact that
> VALUE, NUMBER and IDENTIFIER all overlap!  And yes, I get a NUMBER
> where I expect a VALUE, or an VALUE where I expect an IDENTIFIER, or
> so many other ways.
>
> I completely understand that LEXER is done at a different stage and
> that makes it difficult.  Tools like the old good lex have lexer
> states to do context sensitive lexing.  ANTLR does not have context
> sensitive lexing.
>
> So what is the recommended solution?  Should I merge all these rules
> into one?  Can I not use syntactic predicates in the lexer to resolve
> this?
>
> -- Amal
>
> On Feb 11, 2008 7:14 AM, Gavin Lambert <antlr at mirality.co.nz 
> <mailto:antlr at mirality.co.nz>> wrote:
>
>     At 11:33 11/02/2008, Amal Khailtash wrote:
>
>     >Each word is separated with whitespace.  Again this is from a
>     >Verilog VCD grammar that seems to have many ambiguities.  I
>     >rewrote it to make it simple to explain.  Part of the original
>     >grammar looks like:
>     [...]
>     >scalar_value_change
>     >   : VALUE IDENTIFIER
>     >   ;
>     >
>     >VALUE
>     >   : ('0' | '1' | 'x' | 'X' | 'z' | 'Z')
>     >   ;
>     >
>     >IDENTIFIER
>     >   : ('!'..'~')+
>     >   ;
>     >
>     >fragment
>     >DIGIT
>     >   : '0'..'9'
>     >   ;
>     >
>     >NUMBER
>     >   : DIGIT+
>     >   ;
>
>     You're going to have to be careful with that VALUE rule, since it
>     intersects with both IDENTIFIER and NUMBER.  (This isn't
>     necessarily an error, it just means you need to realise you might
>     end up with a VALUE token when you're expecting one of the
>     others.)
>
>     >The problem is the scalar_value_change rule.  VALUE and
>     >IDENTIFIER can be connected together.
>     >
>     >A sample scalar_value_change is:
>     >
>     >1aae
>     >0aae
>
>     I'm assuming there's also a WS rule with skip() or $channel =
>     HIDDEN that you didn't present above.
>
>     If both "1 aae" and "1aae" are valid constructs, then what you
>     already have should be fine.  Tokens are not required to be
>     separated by whitespace; whitespace (or any other skipped or
>     hidden token) merely act as a "break" between character sequences
>     that could otherwise have been merged into a single token.
>
>     In other words, "1 aae" should produce VALUE WS IDENTIFIER (with
>     the WS skipped or ignored), and "1aae" should produce VALUE
>     IDENTIFIER.  In both cases it matches the scalar_value_change
>     rule.
>
>     Now, "11aae" wouldn't -- that would be NUMBER IDENTIFIER.  But "1
>     1aae" would be VALUE WS VALUE IDENTIFIER, again with the WS
>     skipped or ignored.  So you can see the whitespace acting as a
>     token break here.
>
>
>     --
>     No virus found in this outgoing message.
>     Checked by AVG Free Edition.
>     Version: 7.5.516 / Virus Database: 269.20.2/1270 - Release Date:
>     10/02/2008 12:21
>
>
>
> ------------------------------------------------------------------------
>
> No virus found in this incoming message.
> Checked by AVG Free Edition. 
> Version: 7.5.516 / Virus Database: 269.20.2/1272 - Release Date: 2/11/2008 5:28 PM
>   


From stevagewp at gmail.com  Mon Feb 11 18:38:43 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Tue, 12 Feb 2008 13:38:43 +1100
Subject: [antlr-interest] Syntactic anti-predicates
In-Reply-To: <L9602091A08364767A9892950BA159506.1202778671.scalix.temporal-wave.com*@MHS>
References: <20080212112712.00002778@goanna>
	<L9602091A08364767A9892950BA159506.1202778671.scalix.temporal-wave.com*@MHS>
Message-ID: <b8ceeef70802111838n510bf15ag24e9254b1116ec31@mail.gmail.com>

On 2/12/08, Jim Idle <jimi at temporal-wave.com> wrote:
> ws?  // Do you really need this, can't you just use $channel=2 or
> $channel=HIDDEN?

It's a good question. The language is sufficiently poorly defined that
I want to be quite precise about where exactly whitespace is allowed.
And of course, being a text markup language, there are many places
where whitespace must be preserved literally.

Actually come to think of it, I think I can't use $channel=HIDDEN
because the lexer can never be certain whether the whitespace is
significant or not. I think.

>
>         (
>                 PIPE // Take this out of the following rules
>
>                         ( table_caption
>                           | table_data_cells ....
>
>                 | table_header_cells
>  ....

Looks interesting, I'll have a play. Though, isn't there something
less desirable about having a rule like:

table_caption: PLUS ....

When a table caption actually starts PIPE PLUS? It seems less readable
and to make the grammar less useful as a human readable document?

> Or as this looks like wiki, just use global backtracking and
> memorization and let the runtime decide :-)

Yeah, it's an option. But the "how to remove global backtracking" link
that was posted recently convinced me that it's a hell of a lot easier
to add global backtracking than it is to remove it later :)

Steve

From markwright at internode.on.net  Mon Feb 11 18:52:15 2008
From: markwright at internode.on.net (Mark Wright)
Date: Tue, 12 Feb 2008 13:52:15 +1100
Subject: [antlr-interest] antlr-2007-12-31.14 was a great pre-release
In-Reply-To: <07ED34BA-BD4E-48CD-9B53-0268D8D77648@cs.usfca.edu>
References: <20080212015715.00007a4f@goanna> <47B0678C.50208@gmx.de>
	<20080212031201.00004c7f@goanna>
	<07ED34BA-BD4E-48CD-9B53-0268D8D77648@cs.usfca.edu>
Message-ID: <20080212135215.00004335@goanna>

On Mon, 11 Feb 2008 09:51:54 -0800
Terence Parr <parrt at cs.usfca.edu> wrote:

> Hi Mark,
> 
>   very strange.  I have added this to my near-term to do list!
> Ter

Hello Ter and everyone,

Great, thanks very much.

Another great thing about the antlr-2007-12-31.14 pre-release is the
generated parser works!  Well I assume it is probably my fault that code
generated by the antlr-2007-12-31.17 to antlr-2008-02-05.15 pre-releases
does not work, as any mistake in a dis-ambiguating semantic predicate
would provide the wrong answer to ANTLR, which of course would cause the
parser not to work.  Anyway sometime after 25th February when I have some
time (I am under lots of time pressure at the moment) I will investigate
the problem with the generated parser not working with the antlr-2007-12-31.17
to antlr-2008-02-05.15 pre-releases.

The problem with the generated parser not working occurs on this input:

class A
{
public:
  A(void);
};

The log of my answers from my dis-ambiguating semantic predicates with
the generated parser with antlr-2007-12-31.14 is:

12/02/2008 01:43:08 SemanticActions isStorageClassSpecifierOptTypeIdInitDeclarator
INFO: 1:0 false 
12/02/2008 01:43:08 SemanticActions isStorageClassSpecifierOptTypeIdNoInitDeclarator
INFO: 1:0 true 
12/02/2008 01:43:08 SemanticActions isNonTemplateSpecializationClassDefinitionHead
INFO: 1:0 true 
12/02/2008 01:43:08 SemanticActions isNonTemplateElaboratedClassSpecifier
INFO: 1:0 false 
12/02/2008 01:43:08 SemanticActions isTemplateElaboratedClassSpecifier
INFO: 1:0 false 
12/02/2008 01:43:08 SemanticActions isTypeSpecifierSeqAbstractDeclarator
INFO: 1:0 false 
12/02/2008 01:43:08 SemanticActions isTemplateSpecializationClassDefinitionHead
INFO: 1:0 false 
12/02/2008 01:43:08 SemanticActions isConstructorDefinition
INFO: 4:2 false 
12/02/2008 01:43:08 SemanticActions isConstructorDefaultDefinition
INFO: 4:2 false 
12/02/2008 01:43:08 SemanticActions isConstructorDeleteDefinition
INFO: 4:2 false 
12/02/2008 01:43:08 SemanticActions isConstructorDeclaration
INFO: 4:2 true 
12/02/2008 01:43:08 SemanticActions isNoCcQualifierName
INFO: 4:2 false 
(CLASS_DEFINITION (CLASS_HEAD class A) public (CONSTRUCTOR_DECLARATION A (PARAMETER_DECLARATION_LIST (PARAMETER_DECLARATION void))))

And with antlr-2008-02-05.15:

12/02/2008 01:48:41 SemanticActions isStorageClassSpecifierOptTypeIdInitDeclarator
INFO: 1:0 false 
12/02/2008 01:48:41 SemanticActions isStorageClassSpecifierOptTypeIdNoInitDeclarator
INFO: 1:0 true 
12/02/2008 01:48:41 SemanticActions isTemplateElaboratedClassSpecifier
INFO: 1:0 false 
12/02/2008 01:48:41 SemanticActions isTemplateSpecializationClassDefinitionHead
INFO: 1:0 false 
12/02/2008 01:48:41 SemanticActions isTypeSpecifierSeqAbstractDeclarator
INFO: 1:0 false 
12/02/2008 01:48:41 SemanticActions isNonTemplateElaboratedClassSpecifier
INFO: 1:0 false 
12/02/2008 01:48:41 SemanticActions isNonTemplateSpecializationClassDefinitionHead
INFO: 1:0 true 
12/02/2008 01:48:41 SemanticActions isConstructorDefaultDefinition
INFO: 4:2 false 
12/02/2008 01:48:41 SemanticActions isConstructorDefinition
INFO: 4:2 false 
12/02/2008 01:48:41 SemanticActions isConstructorDeleteDefinition
INFO: 4:2 false 
12/02/2008 01:48:42 SemanticActions isConstructorDeclaration
INFO: 4:2 true 
12/02/2008 01:48:42 SemanticActions isNoCcQualifierName
INFO: 4:2 false 
12/02/2008 01:48:42 SemanticActions isPureDestructorDeclaration
INFO: 4:2 false 
12/02/2008 01:48:42 SemanticActions isPureConversionFunctionDeclaration
INFO: 4:2 false 
12/02/2008 01:48:42 SemanticActions isTypeSpecifierSeqAbstractDeclarator
INFO: 4:2 true 
12/02/2008 01:48:42 SemanticActions isQualifiedTemplateKeywordSimpleTemplateId
INFO: 4:2 false 
line 4:3 [translation_unit, declaration_seq, declaration, block_declaration, simple_declaration, decl_defn_declaration, type_id, type_specifier_seq, type_specifier, class_specifier, member_specification, member_declaration_or_access_specifier_c, member_declaration]  no viable alt; token=[@10,21:21='(',<10>,4:3] (decision=210 state 3) decision=<<1558:1: member_declaration : ( member_function_definition ( ';' )? | {...}? constructor_head ';' -> ^( CONSTRUCTOR_DECLARATION constructor_head ) | {...}? destructor_head pure_specifier ';' -> ^( PURE_DESTRUCTOR_DECLARATION destructor_head ) | {...}? conversion_function_head pure_specifier ';' -> ^( PURE_CONVERSION_FUNCTION_DECLARATION conversion_function_head ) | {...}? destructor_head ';' -> ^( DESTRUCTOR_DECLARATION destructor_head ) | {...}? conversion_function_head ';' -> ^( CONVERSION_FUNCTION_DECLARATION conversion_function_head ) | ( function_specifier )? ( storage_class_specifier )? type_id member_declarator_list[$function_specifier.tree, $storage_class_specifier.tree, $type_id.tree] ';' -> member_declarator_list | t= 'typedef' type_id typedef_declarator_list[$t, null, null, $type_id.tree] ';' -> typedef_declarator_list | member_friend_declaration | cc_opt_nested_name_specifier ( 'template' )? unqualified_id ';' | using_declaration | static_assert_declaration | template_declaration );>>
<missing type: 5>

I guess its my fault.  I can debug it later (starting 25th February).
I just mention it as another difference between the antlr-2007-12-31.14 
and later pre-releases.  It looks tricky, I don't really like to ask anyone
to look at that until I have a chance to do more testing and debugging
since it could be my fault.

The rule has the second alternative with the sa.isConstructorDeclaration()
dis-ambiguating semantic predicate which the answer is true.

There are lots of ambiguities in the grammar which are all resolved with
dis-ambiguating semantic predicates.  So the
sa.isTypeSpecifierSeqAbstractDeclarator() is hoisted into the 7th alternative,
and its true, a constructor does look like a typeid followed by an
abstract_declarator.  I was kind of hoping the second alternative would be
chosen since it is listed earlier, and it is in antlr-2007-12-31.14
pre-release.  In later pre-releases its not.  But of course an error in
a dis-ambiguating semantic predicate or in my grammar could cause the
second alternative to not match, I will investigate it later.

member_declaration
        :   member_function_definition ';'?
        |   {sa.isConstructorDeclaration((TokenStream)input)}?
                constructor_head ';'
                {sa.memberDeclarationConstructorDeclaration($constructor_head.tree);}
                -> ^(CONSTRUCTOR_DECLARATION constructor_head)
        |   {sa.isPureDestructorDeclaration((TokenStream)input)}?
                destructor_head pure_specifier ';'
                {sa.memberDeclarationDestructorDeclaration($destructor_head.tree, true);}
                -> ^(PURE_DESTRUCTOR_DECLARATION destructor_head)
        |   {sa.isPureConversionFunctionDeclaration((TokenStream)input)}?
                conversion_function_head pure_specifier ';'
                {sa.memberDeclarationConversionFunctionDeclaration($conversion_function_head.tree, true);}
                -> ^(PURE_CONVERSION_FUNCTION_DECLARATION conversion_function_head)
        |   {sa.isDestructorDeclaration((TokenStream)input)}?
                destructor_head ';'
                {sa.memberDeclarationDestructorDeclaration($destructor_head.tree, false);}
                -> ^(DESTRUCTOR_DECLARATION destructor_head)
        |   {sa.isConversionFunctionDeclaration((TokenStream)input)}?
                conversion_function_head ';'
                {sa.memberDeclarationConversionFunctionDeclaration($conversion_function_head.tree, false);}
                -> ^(CONVERSION_FUNCTION_DECLARATION conversion_function_head)
        |   function_specifier? storage_class_specifier? type_id member_declarator_list[$function_specifier.tree, $storage_class_specifier.tree, $type_id.tree] ';'
                -> member_declarator_list
        |   t='typedef' type_id typedef_declarator_list[$t, null, null, $type_id.tree] ';'
                -> typedef_declarator_list
        |   member_friend_declaration
        |   cc_opt_nested_name_specifier 'template'? unqualified_id ';'
        |   using_declaration
        |   static_assert_declaration
        |   template_declaration
        ;

Thanks very much, Mark

-- 

From stevagewp at gmail.com  Mon Feb 11 18:58:45 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Tue, 12 Feb 2008 13:58:45 +1100
Subject: [antlr-interest] Syntactic anti-predicates
In-Reply-To: <L9602091A08364767A9892950BA159506.1202778671.scalix.temporal-wave.com*@MHS>
References: <20080212112712.00002778@goanna>
	<L9602091A08364767A9892950BA159506.1202778671.scalix.temporal-wave.com*@MHS>
Message-ID: <b8ceeef70802111858l370d4188mec7af88842ef03e0@mail.gmail.com>

Ok, I had another go, and thought this might work:

table_line
 options { k= 2; }:
   table_header_cells
   |((PIPE ~RIGHT_BRACE) => ( table_caption | table_row_separator |
table_data_cells))
   ;

But it doesn't. Table captions parse fine, but as soon as it hits a
row separator, it starts down the table_caption rule, fails, and bails
out entirely.

So I obviously don't get how the lookahead stuff works at all. I would
have thought even a k of 2 is sufficient here: go into table_caption,
look for a pipe, look for a plus - no good? Ok, go, go into
table_row_separator, look for a pipe, look for a hyphen...ok. Perhaps
one of these masses of warnings is trying to tell me something useful:

[13:49:39] warning(205): C:\antlr\mediawiki10.g:292:29: ANTLR could
not analyze this decision in rule table_line; often this is because of
recursive rule references visible from the left edge of alternatives.
ANTLR will re-analyze the decision with a fixed lookahead of k=1.
Consider using "options {k=1;}" for that decision and possibly adding
a syntactic predicate.


Is that saying that k > 1 is out of the question for that rule? I
guess that would explain it?

[I'm asking all this out of curiosity and desire to understand - I
have a working solution for this bit of the grammar]

Steve

From gbr at newtechlaw.com  Mon Feb 11 19:21:30 2008
From: gbr at newtechlaw.com (Gerald B. Rosenberg)
Date: Mon, 11 Feb 2008 19:21:30 -0800
Subject: [antlr-interest] Syntactic anti-predicates
In-Reply-To: <b8ceeef70802110545r2dfc24b3u7cd9441d6e231685@mail.gmail.co
 m>
References: <b8ceeef70802090953v5bb8d0b1p8d25215e1e8cf3a8@mail.gmail.com>
	<47ae1cd6.0a87460a.2c94.ffffb235SMTPIN_ADDED@mx.google.com>
	<b8ceeef70802110545r2dfc24b3u7cd9441d6e231685@mail.gmail.com>
Message-ID: <200802120321.m1C3LLZI010982@tach.newtechlaw.com>

Won't this do the trick?

table:
    LEFT_BRACE PIPE ws? table_format? NL
    ( ( ws? PIPE RIGHT_BRACE )=> ws? PIPE RIGHT_BRACE | table_line )+
;

At 05:45 AM 2/11/2008, Steve Bennett wrote:
>On 2/10/08, Gavin Lambert <antlr at mirality.co.nz> wrote:
> > Why not just use:
> >
> > ruleA
> >    :  (X Y Z) => ruleXYZ
> >    |  ruleNotXYZ
> >    ;
>
>Ok, I've now got a good, non-contrived example to show the problem:
>
>table:
>    LEFT_BRACE PIPE ws? table_format? NL
>    table_line*
>    ws? PIPE RIGHT_BRACE;
>
>table_line:
>    ws?
>    (
>    (PIPE PLUS) => table_caption
>    | (PIPE HYPHEN) => table_row_separator
>    | (EXCLAMATION) => table_header_cells
>    | (PIPE) => table_data_cells
>    );
>
>----
>Here, the problem is that table_line is inside a looping construct.
>Each time it loops, there can be whitespace, then a |} (end of table),
>or one of the other forms: |-, |+, |text.
>
>By the time the syntactic predicate inside fails the match, it's too
>late. I could left factor table_line:
>
>table_line:
>    (
>    (ws? PIPE PLUS) => ws? table_caption
>    | (ws? PIPE HYPHEN) => ws? table_row_separator
>    | (ws? EXCLAMATION) => ws? table_header_cells
>    | (ws? PIPE) => ws? table_data_cells
>    );
>
>But that's inelegant. My ideal solution would have this line:
>
>    table_line*
>
>replaced with something like:
>
>    (~(ws? PIPE RIGHT_BRACE) => table_line)*
>
>The only way to get around it at the moment that I can see is to
>either left factor as above, or use a semantic predicate - which I'm
>not really sure how to use with an arbitrary length rule like ws.
>
>Oh, or I can turn the loop inside out:
>
>table:
>    LEFT_BRACE PIPE ws? table_format? NL
>    ws?
>    (table_line ws?)*
>    PIPE RIGHT_BRACE;
>
>This does actually work. It's slightly disconcerting having the
>whitespace grouped with the previous line, but it's less bad than the
>other alternatives I think.
>
>Steve

----
Gerald B. Rosenberg, Esq.
NewTechLaw
260 Sheridan Ave., Suite 208
Palo Alto, CA  94306-2009

650.325.2100  (office)  /  650.703.1724  (cell)
650.325.2107  (facsimile)

www.newtechlaw.com


CONFIDENTIALITY NOTICE:  This email message (including any 
attachments) is being sent by an attorney, is for the sole use of the 
intended recipient, and may contain confidential and privileged 
information.  Any unauthorized review, use, disclosure or 
distribution is prohibited.  If you are not the intended recipient, 
please contact the sender immediately by reply email and delete all 
copies of this message and any attachments without retaining a copy.  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080211/9648c475/attachment.html 

From dan at remember.this.name  Mon Feb 11 19:22:09 2008
From: dan at remember.this.name (Dan Ellis)
Date: Tue, 12 Feb 2008 03:22:09 +0000
Subject: [antlr-interest] Conflicting lexer tokens?
Message-ID: <b0977ec90802111922y1e8cdfbeg8419e75c33e2cd5d@mail.gmail.com>

Hi. I'm new to ANTLR, but liking the look of it. However, I'm having a
problem with my first grammar. When I try to parse test_input.txt with
grammar Parser.g using ptest.py, I get the following error:

    line 6:11 mismatched input 'foo' expecting DomainPart

If I swap the order of DomainPart and Identifier, I get this error:

    line 1:9 mismatched input 'Room' expecting Identifier

What have I done wrong? Thanks.

Dan
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Package.g
Type: application/octet-stream
Size: 907 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080212/7d1b647e/attachment.obj 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: test_input.txt
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20080212/7d1b647e/attachment.txt 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ptest.py
Type: application/octet-stream
Size: 372 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080212/7d1b647e/attachment-0001.obj 

From dan at remember.this.name  Mon Feb 11 19:46:44 2008
From: dan at remember.this.name (Dan Ellis)
Date: Tue, 12 Feb 2008 03:46:44 +0000
Subject: [antlr-interest] Conflicting lexer tokens?
In-Reply-To: <b0977ec90802111922y1e8cdfbeg8419e75c33e2cd5d@mail.gmail.com>
References: <b0977ec90802111922y1e8cdfbeg8419e75c33e2cd5d@mail.gmail.com>
Message-ID: <b0977ec90802111946q2f5b5935nce25a0d8b4baedb5@mail.gmail.com>

On 12/02/2008, Dan Ellis <dan at remember.this.name> wrote:

> What have I done wrong?

I think my problem here is forgetting that even though all the rules
are in one file, the lexer and the parser are separate, so the lexer
needs to be able to distingiush between Identifier and DomainPart
without any clues from the parser part of the grammar.

I see the Java example uses Identifier for DomainPart, which does rule
out domains with '-' in them and allows ones with '_'. Is there a
better way to do what I'm trying?

From markwright at internode.on.net  Mon Feb 11 20:35:28 2008
From: markwright at internode.on.net (Mark Wright)
Date: Tue, 12 Feb 2008 15:35:28 +1100
Subject: [antlr-interest] translating a tree to another tree
In-Reply-To: <47AF6011.2000000@moredata.pt>
References: <b4f9f36e0802100239x67e27f5sbaac777987e04161@mail.gmail.com>
	<fommtg$bt9$1@ger.gmane.org> <47AF6011.2000000@moredata.pt>
Message-ID: <20080212153528.00002924@goanna>

On Sun, 10 Feb 2008 20:35:29 +0000
S?rgio Ferreira <sergio at moredata.pt> wrote:

> In the current version what will be the best strategy to change the 
> original AST to a changed AST that could then be used in a tree
> parser to generate code using string template ?

Hello S?rgio,

You can walk the tree manually as described in:

http://jazillian.com/articles/treewalkers.html

Since you are changing the AST, you may not have all the
information available as you visit each node to instantly
generate the new AST.  In which case, you will have to
collect the information first in some other data structures.

Then you can either walk the original AST again, looking up
information collected in the data structures from the first
walk, or walk the data structures, and hand code the
creation of the new AST.

It works great, as you can figure out which information the
string templates need, and calculate it all up front, then
output an AST in the simplest possible format that the
string templates can use.  Its really neat, the string templates
(and the tree parser if you are creating a new AST that is simpler
than the original AST) can be as dumb as possible, while all the smarts
are in the code that analyzes the original AST and data structures.

Regards, Mark

-- 

From Austin_Hastings at Yahoo.com  Mon Feb 11 20:00:51 2008
From: Austin_Hastings at Yahoo.com (Austin Hastings)
Date: Mon, 11 Feb 2008 23:00:51 -0500
Subject: [antlr-interest] Conflicting lexer tokens?
In-Reply-To: <b0977ec90802111946q2f5b5935nce25a0d8b4baedb5@mail.gmail.com>
References: <b0977ec90802111922y1e8cdfbeg8419e75c33e2cd5d@mail.gmail.com>
	<b0977ec90802111946q2f5b5935nce25a0d8b4baedb5@mail.gmail.com>
Message-ID: <47B119F3.1050603@Yahoo.com>

You're right - the lexer doesn't have any context. What is this:

Foo

Is that an Identifer or DomainPart?

Your best bet is probably to allow both, and then signal an error if the 
wrong kind comes in. Allow either underscore or dash (or both) in a 
"Name", and then let the parser disambiguate (and check to make sure 
that there aren't any illegal characters in the Name).

Alternatively, you could have the lexer recognize NamePart's and Dash's 
and Underbar's, and then assemble them in the parser.

=Austin


Dan Ellis wrote:
> On 12/02/2008, Dan Ellis <dan at remember.this.name> wrote:
>
>   
>> What have I done wrong?
>>     
>
> I think my problem here is forgetting that even though all the rules
> are in one file, the lexer and the parser are separate, so the lexer
> needs to be able to distingiush between Identifier and DomainPart
> without any clues from the parser part of the grammar.
>
> I see the Java example uses Identifier for DomainPart, which does rule
> out domains with '-' in them and allows ones with '_'. Is there a
> better way to do what I'm trying?
>
>
>   



From stevagewp at gmail.com  Mon Feb 11 21:19:30 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Tue, 12 Feb 2008 16:19:30 +1100
Subject: [antlr-interest] Syntactic anti-predicates
In-Reply-To: <200802120321.m1C3LLZI010982@tach.newtechlaw.com>
References: <b8ceeef70802090953v5bb8d0b1p8d25215e1e8cf3a8@mail.gmail.com>
	<47ae1cd6.0a87460a.2c94.ffffb235SMTPIN_ADDED@mx.google.com>
	<b8ceeef70802110545r2dfc24b3u7cd9441d6e231685@mail.gmail.com>
	<200802120321.m1C3LLZI010982@tach.newtechlaw.com>
Message-ID: <b8ceeef70802112119l196dd1b2k323d879eb9290921@mail.gmail.com>

On 2/12/08, Gerald B. Rosenberg <gbr at newtechlaw.com> wrote:
>
>  Won't this do the trick?
>
>  table:
>     LEFT_BRACE PIPE ws? table_format? NL
>     ( ( ws? PIPE RIGHT_BRACE )=> ws? PIPE RIGHT_BRACE | table_line )+
>  ;

It's close, but matches too much input on data like:

{|
|foo
|}
|blah

That last row (|blah) should not be matched by the table rule. Sort of
comes back to the need for the anti-predicate: the only way to
terminate a loop is for everything in it to fail, and it can be a bit
awkward arranging for that to take place.

Steve

From gbr at newtechlaw.com  Mon Feb 11 23:20:51 2008
From: gbr at newtechlaw.com (Gerald B. Rosenberg)
Date: Mon, 11 Feb 2008 23:20:51 -0800
Subject: [antlr-interest] Syntactic anti-predicates
In-Reply-To: <b8ceeef70802112119l196dd1b2k323d879eb9290921@mail.gmail.co
 m>
References: <b8ceeef70802090953v5bb8d0b1p8d25215e1e8cf3a8@mail.gmail.com>
	<47ae1cd6.0a87460a.2c94.ffffb235SMTPIN_ADDED@mx.google.com>
	<b8ceeef70802110545r2dfc24b3u7cd9441d6e231685@mail.gmail.com>
	<200802120321.m1C3LLZI010982@tach.newtechlaw.com>
	<b8ceeef70802112119l196dd1b2k323d879eb9290921@mail.gmail.com>
Message-ID: <200802120720.m1C7Km6w011888@tach.newtechlaw.com>

Your source spec is completely ambiguous.  So force the loop termination:

table
   @init{ boolean done = false; } :
      LEFT_BRACE PIPE ws? table_format? NL
           ( ( ws? PIPE RIGHT_BRACE )=> ws? PIPE RIGHT_BRACE { 
done=true; } | { !done }? table_line )+
;

Perhaps the cleaner solution would be to disambiguate the PIPE 
combinations in the lexer:

  table:
      LB_PIPE ws? table_format? NL
      ( ( ~PIPE_RB )=>  table_line )* ws? PIPE_RB
   ;

LB_PIPE: '{|' { intable = true; } ;

PIPE : '|}'      { $type=PIPE_RB;  intable = false; }
          | '|+'     { $type=PIPE_PLUS; }
          | '|-'      { $type=PIPE_HYPH; }
          | '|' TEXT   { if (intable) $type=PIPE_FOO else 
$type=PIPE_BLAH; } // if intable modes are needed
          | '|'
;


At 09:19 PM 2/11/2008, Steve Bennett wrote:
>On 2/12/08, Gerald B. Rosenberg <gbr at newtechlaw.com> wrote:
> >
> >  Won't this do the trick?
> >
> >  table:
> >     LEFT_BRACE PIPE ws? table_format? NL
> >     ( ( ws? PIPE RIGHT_BRACE )=> ws? PIPE RIGHT_BRACE | table_line )+
> >  ;
>
>It's close, but matches too much input on data like:
>
>{|
>|foo
>|}
>|blah
>
>That last row (|blah) should not be matched by the table rule. Sort of
>comes back to the need for the anti-predicate: the only way to
>terminate a loop is for everything in it to fail, and it can be a bit
>awkward arranging for that to take place.
>
>Steve


From antlr at mirality.co.nz  Mon Feb 11 23:51:26 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 12 Feb 2008 20:51:26 +1300
Subject: [antlr-interest] Tokenizing question
In-Reply-To: <f0fcc6820802111339j32308c75jeaedbea8223e201d@mail.gmail.co
 m>
References: <f6a04d790802100717k1043385awb00dccc4f9a26790@mail.gmail.com>
	<f0fcc6820802101344i48839662wa9c56c04bc38f9f5@mail.gmail.com>
	<f6a04d790802101433v3f22147bu169f36a800dffca9@mail.gmail.com>
	<47b03c4b.1ed7720a.3570.ffff9ee6SMTPIN_ADDED@mx.google.com>
	<f6a04d790802111320l1cbd4bfdu76bde272ffc08b00@mail.gmail.com>
	<f0fcc6820802111339j32308c75jeaedbea8223e201d@mail.gmail.com>
Message-ID: <20080212075142.1679211EDC7@www.antlr.org>

At 10:39 12/02/2008, Mark Volkmann wrote:
 >I think Shmuel Siegel provided a solution in the thread on 
"Lexer
 >ambiguities". The trick is to make the most general of your
 >conflicting rules be a lexer rule and make the other, more
 >specific rules be parser rules.
[...]
 >declaration_command: timescale; // omitted other alternatives
 >timescale: '$timescale' NUMBER time_unit '$end';
 >time_unit: 's' | 'ms' | 'us' | 'ns' | 'ps' | 'fs';
 >simulation_command: value_change; // omitted other alternatives
 >value_change: scalar_value_change;
 >scalar_value_change: value IDENTIFIER;
 >
 >value: '0' | '1' | 'x' | 'X' | 'z' | 'Z';
 >NUMBER: DIGIT+;
 >fragment DIGIT: '0'..'9';
 >
 >// An IDENTIFIER cannot begin with a digit.
 >IDENTIFIER: ('!'..'/' | ':'..'~') ('!'..'~')*;

You have to be careful with this sort of thing too :)  Any time 
you use a quoted literal string in a parser rule, it secretly 
creates a new lexer rule.  This means that "ms" can now never be 
an IDENTIFIER, and neither can "x".

In other words, the "value" rule defined above is effectively 
equivalent to this:

value: T401 | T402 | T403 | T404 | T405 | T406;
T401: '0';
T402: '1';
T403: 'x';
T404: 'X';
T405: 'z';
T406: 'Z';

It won't generate duplicates, though, so you can "add back" the 
ones you want via another parser rule.  For example, to permit "x 
x" as a scalar_value_change (the first being the value, the second 
an identifier):

scalar_value_change: value identifier;
value: '0' | '1' | 'x' | 'X' | 'z' | 'Z';
identifier: IDENTIFIER | 'x' | 'X' | 'z' | 'Z' | time_unit;
number: NUMBER | '0' | '1';

I usually prefer to avoid using literal strings in parser rules at 
all (it helps to remind me of this effect, and it makes the 
generated code easier to understand), but some people think it 
makes the grammar easier to read by using them.  As long as you 
don't forget how it works underneath, either is fine -- it's just 
a matter of taste.


From alexander at gaengel.de  Tue Feb 12 05:16:36 2008
From: alexander at gaengel.de (=?ISO-8859-15?Q?Alexander_G=E4ngel?=)
Date: Tue, 12 Feb 2008 14:16:36 +0100
Subject: [antlr-interest] Emit two Tokens in one Lexer Rule
Message-ID: <47B19C34.6080607@gaengel.de>

All I know is that I can't emit 2 Tokens in one Lexer Rule.

My problem it that I have to decide if I have an Float like  1.1 or an 
Int DOT Identifiert lik 5.max
My workaround would be to emit just the first an restart lexing from the 
last correct charterer. So I would Just emit 5 as Int and reparse from 
the Dot.

Thanks for your Help
Alexander



From porcelli at uol.com.br  Tue Feb 12 05:26:44 2008
From: porcelli at uol.com.br (Alexandre Porcelli)
Date: Tue, 12 Feb 2008 11:26:44 -0200
Subject: [antlr-interest] Emit two Tokens in one Lexer Rule
In-Reply-To: <47B19C34.6080607@gaengel.de>
References: <47B19C34.6080607@gaengel.de>
Message-ID: <ee873c070802120526ifb57cc4hfe48b968fce0306d@mail.gmail.com>

Alexander,

 You should override the emit and nextToken methods to do it.
 A sample here:

    // buffer (queue) to hold the emit()'d tokens
    private LinkedList<Token> myToken = new LinkedList<Token>();

    public void emit(Token t) {
        token = t;
        myToken.add(t);
    }

	private void advanceInput(){
		tokenStartCharIndex = input.index();
		tokenStartCharPositionInLine = input.getCharPositionInLine();
		tokenStartLine = input.getLine();
	}

	public Token nextToken() {
		while (true) {
			if (myToken.size() == 0) {
				token = null;
				channel = Token.DEFAULT_CHANNEL;
				advanceInput();
				text = null;
                                if (input.LA(1) == CharStream.EOF) {
					return Token.EOF_TOKEN;
				}
				try {
					mTokens();
					if (token == null) {
						emit();
					} else if (token == Token.SKIP_TOKEN) {
						continue;
					}
				} catch (RecognitionException re) {
					reportError(re);
					recover(re);
				}
			} else {
				Token result = myToken.poll();
				if (result != Token.SKIP_TOKEN || result != null) { // discard
																	// SKIP
																	// tokens
					return result;
				}
			}
		}
	}

Regards,
Alexandre Porcelli

On Feb 12, 2008 11:16 AM, Alexander G?ngel <alexander at gaengel.de> wrote:
> All I know is that I can't emit 2 Tokens in one Lexer Rule.
>
> My problem it that I have to decide if I have an Float like  1.1 or an
> Int DOT Identifiert lik 5.max
> My workaround would be to emit just the first an restart lexing from the
> last correct charterer. So I would Just emit 5 as Int and reparse from
> the Dot.
>
> Thanks for your Help
> Alexander
>
>
>

From darach at gmail.com  Tue Feb 12 06:24:30 2008
From: darach at gmail.com (Darach Ennis)
Date: Tue, 12 Feb 2008 14:24:30 +0000
Subject: [antlr-interest] Syntactic anti-predicates
In-Reply-To: <20080212112712.00002778@goanna>
References: <b8ceeef70802090953v5bb8d0b1p8d25215e1e8cf3a8@mail.gmail.com>
	<47ae1cd6.0a87460a.2c94.ffffb235SMTPIN_ADDED@mx.google.com>
	<b8ceeef70802110545r2dfc24b3u7cd9441d6e231685@mail.gmail.com>
	<20080212112712.00002778@goanna>
Message-ID: <4d596d820802120624u1bd9ab8flced13fac94f829d6@mail.gmail.com>

Hi Mark, all.

I've tried the semantic action approach and it works an absolute charm,
thank you!

I can see why it scales nicely into complex grammars.

The disambiguating predicate approach introduced considerable cross-cutting
concerns
into both the lexer and parser. So semantic actions are a lot like 'aspects'
in that they
consolidate crosscutting concerns into a single place.

It is worth trying both approaches once just to go through the learning
experience... so
I'm glad I pulled some, but not all, of my hair out!

Here's what I did with my 'real' grammar. I moved my
'ArbitraryTokenSequence' definition
higher up the declaration order. I defined conflicting and/or intersecting
tokens higher
again. In this way I was able to coerce types accordingly. Also there are a
hell of a lot
more arbitrary tokens the preprocessor tokens in my case so this order
should keep
the semantic actions nice and small. The semantic action code was very easy
to test drive
and to debug in the usual way:

    private final int[] ARBITRARY_TOKENS = {
            TestParser.ArbitraryCodeSequence,
            TestParser.Whitespace,
            TestParser.Variable,
            TestParser.AtomLiteral
    };

    public boolean isOneOf(final int[] types, int candidate) {
        for(int t : types) {
            if (candidate == t) return true;
        }
        return false;
    }

    public boolean isArbitraryTokenSequence(TokenStream input) {
        int i = 0;
        do {
            final Token token;
            try {
                token = input.get(i);
            } catch(IndexOutOfBoundsException e) {
                break; // empty or arbitrary tokens until eof (eg: no
directives)
            }
            if (token == null) { break; }
            final int type = token.getType();
            if (!isOneOf(ARBITRARY_TOKENS,type)) {
                // It could be a conflicting token, we can coerce
accordingly ...
                if (type == TestParser.LeftParen) {
                    token.setType(TestParser.Separator); // it is only a
left paren we care about if it is within a directive rule, ie: we dont care
in this case
                } else if (type == TestParser.FullStop) {
                    token.setType(TestParser.Separator); // ditto, see above
                } else {
                    break;
                }
            }

            i++;
        } while(true);
        return (i > 0); // at least one token matches
    }

This semantic action above is fairly raw and still a work in progress but in
only 30 minutes I've been a lot
more productive than with the dis-ambiguating predicate approach and my
grammar is simpler and easier
to maintain as a result.


Regards,

Darach.



On Feb 12, 2008 12:27 AM, Mark Wright <markwright at internode.on.net> wrote:

> Hello Darach and Steve,
>
> > Is there a convenient way to say "if the upcoming tokens look like X Y
> > Z" then *don't* match this rule?
>
> I find that path leads to madness in a complex grammar.
>
> An alternative approach that can be made to work is to
> place dis-ambiguating semantic predicates on every other alternative.
>
> > It seems I always have to resort to a
> > semantic predicate like this:
> >
> > {input.LA(1) != X && input.LA(2) != Y}? =>  R
> >
> > or some complicated rule that amount to not X Y Z:
> >
> > (notXYZ) => R
> >
> > Is there a simple way I'm missing?
>
> The left factoring approach you found later looks correct:
>
> > By the time the syntactic predicate inside fails the match, it's too
> > late.
>
> So you understand the problem.
>
> > I could left factor table_line:
>
> > table_line:
> >   (
> >   (ws? PIPE PLUS) => ws? table_caption
> >   | (ws? PIPE HYPHEN) => ws? table_row_separator
> >   | (ws? EXCLAMATION) => ws? table_header_cells
> >   | (ws? PIPE) => ws? table_data_cells
> >   );
> >
> > But that's inelegant.
>
> Looks elagant and like it might work to me.
>
> > The only way to get around it at the moment that I can see is to
> > either left factor as above, or use a semantic predicate - which I'm
> > not really sure how to use with an arbitrary length rule like ws.
>
> If you don't mind writing and debugging thousands of lines of your
> own code, then dis-ambiguating semantic predicates are very powerful
> for complex grammars.  Abitrary length rules and rules that call other
> rules can be handled with iterative loops and little hand coded
> recursive descent compilers.
>
> Darach writes:
> > The gated predicate ( ... { pc > 0?=> ')'  ... ) and parenthesis
> >'reference counting'
> > is what allows this to work but I've had limited/little success with
> > more complex
> > contexts such as trying to match more than a single character for
> > terminating the
> > arbitrary token sequence block.
>
> You can write a dis-ambiguating semantic predicate the scans forward
> matching parentheses.  Dis-ambiguating semantic predicates are called
> multiple times, so it easier to debug to log the answers and cache
> the result. I have attached an example to show how to log and cache
> the results.
>
> > The same grammar fails to produce the same output and/or exhibit the
> > same behavior when interpreted by ANTLRworks with the same input data.
>
> I think someone else noted recently on this list that the ANTLRworks
> interpreter does not understand the gated predicate, and you would have
> to use the debugger.
>
> > Having the book definitely helps too.
>
> The book is great.
>
> Regards, Mark
>
> --
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080212/9d62f496/attachment.html 

From mark.heieis at shaw.ca  Tue Feb 12 08:25:47 2008
From: mark.heieis at shaw.ca (Mark Heieis)
Date: Tue, 12 Feb 2008 08:25:47 -0800
Subject: [antlr-interest] Direct access and manipulation of tokens in
	existing trees
Message-ID: <47B1C88B.1060008@shaw.ca>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080212/279afb0b/attachment.html 

From ad_cooney at hotmail.com  Tue Feb 12 09:23:15 2008
From: ad_cooney at hotmail.com (Adam Cooney)
Date: Tue, 12 Feb 2008 17:23:15 +0000
Subject: [antlr-interest] Java AST Grammar
Message-ID: <BLU124-W377786AF163CAC13E783AC842B0@phx.gbl>


Hi,
I'm rather new to ANTLR and require a java AST grammar which will end up taking a Java file as an input and creating the AST for the Java code. So far I have only found a normal Java 5 grammar but without AST compatability and was wondering if anyone had a Java AST grammar or could direct me to some information about  altering the grammar to output an AST.
 
ps http://www.antlr.org/grammar/1152141644268/Java.g Is the Java grammar I downloaded, I tried some other ones but they were outdated and did not work in antlr 3.
Thanks
Adam
_________________________________________________________________
Telly addicts unite!
http://www.searchgamesbox.com/tvtown.shtml
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080212/70b0053d/attachment-0001.html 

From micke.hovmoller at gmail.com  Tue Feb 12 10:05:52 2008
From: micke.hovmoller at gmail.com (=?ISO-8859-1?Q?Micke_Hovm=F6ller?=)
Date: Tue, 12 Feb 2008 19:05:52 +0100
Subject: [antlr-interest] MismatchedTokenException and how to find errors in
	ANTLRWorks
Message-ID: <18b4fcc20802121005x3e97df50s9124afadd10cea07@mail.gmail.com>

I have a bit of a problem finding the errors in my grammar, and would
appreciate some hints on how to go about finding them.

I have this rule in my grammar:
dealingriver
	:	'** Dealing River ** :  [ ' CARD ']' NEWLINE ;

and this input:
** Dealing River ** :  [ 3d ]

(All this part of larger grammar and input.)

ANTLRWorks finds the dealingriver rule, splits it into '** Dealing
River ** :  [ ' and 3d but gives this message as the third leaf in the
node:
  MismatchedTokenException(5!=31)

This leads to my questions:
1. Is there a more extensive list of error messages than the fairly
short one in the ANTLR reference book?

2. What is the easiest way to find which tokens are referred to by, in
this case, 5 and 31? If I generate the grammer, I can look in the
.token file, but that seems tedious. Can't I find that inside
ANTLRWorks somewhere? (FWIW, this is what I found in the .token file:
'** Dealing Turn ** :  ['=31
ID=5

ID is defined as:
ID: ('a'..'z'|'A'..'Z')('a'..'z'|'A'..'Z'|'_'|'0'..'9')+ ; )


3. I get this error a lot, it seems. How should I think/what should I
look for in debugging?

(4. Is it obvious what is wrong here? I expect to have found the issue
shortly, but I'm still interested in the general questions above.)

/Micke

From snyder at t-vec.com  Tue Feb 12 10:09:00 2008
From: snyder at t-vec.com (Chris Snyder)
Date: Tue, 12 Feb 2008 13:09:00 -0500
Subject: [antlr-interest] Antlrworks Debug gives java.net.Connection
	Exception
Message-ID: <006f01c86da2$58abc200$265d080a@Gizmo>

Hello,

 

I'm trying to use the Antlrworks debugger locally but I keep getting the
error:

 

java.net.ConnectException: Connection refused: connect

 

and a dialog box that says:

 

Cannot launch the debugger.

Time-out waiting to connect to the remote parser.

 

I tried turning off the Windows firewall but that didn't help.

 

Can someone provide the work around for this issue?

 

Thanks,

Chris

 

 T-VEC Technologies, Inc.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080212/e2947036/attachment.html 

From ad_cooney at hotmail.com  Tue Feb 12 10:40:06 2008
From: ad_cooney at hotmail.com (Adam Cooney)
Date: Tue, 12 Feb 2008 18:40:06 +0000
Subject: [antlr-interest] Java AST Grammar
In-Reply-To: <c8c997f40802121033u16153999n8a3a1bd76318f30f@mail.gmail.com>
References: <BLU124-W377786AF163CAC13E783AC842B0@phx.gbl>
	<c8c997f40802121033u16153999n8a3a1bd76318f30f@mail.gmail.com>
Message-ID: <BLU124-W40E6A64FA2B39492880230842B0@phx.gbl>


Well, I'm attempting to compare two Java source files by creating 2 ASTs and comparing the two to generated ASTs, so I can find changes in the code and errors. 


Date: Tue, 12 Feb 2008 10:33:17 -0800From: darien.hager at etelos-inc.comTo: ad_cooney at hotmail.comSubject: Re: [antlr-interest] Java AST GrammarI don't think there is any particular "correct" way to make a Java AST---the kind of tree made really depends on what you're trying to do.I'd suggest you look up AST rewrite rules. The example JSON grammar has some examples (look for the -> line)http://www.antlr.org/wiki/display/ANTLR3/JSON+Interpreter-- Darien HagerDeveloperEtelos, Inc.darien at etelos.com http://www.etelos.com"Revolutionizing the way applications are developed, distributed and consumed."This e-mail message, including attachments, may contain confidential information for the sole use of the intended recipient(s). If you are not the intended recipient, then this is notice that any use, disclosure, dissemination, distribution or copying is strictly prohibited. If you have received this message in error please contact the sender by reply mail and destroy all copies of the original message. 
_________________________________________________________________
Share what Santa brought you
https://www.mycooluncool.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080212/281acf26/attachment.html 

From darien.hager at etelos-inc.com  Tue Feb 12 10:57:13 2008
From: darien.hager at etelos-inc.com (Darien Hager)
Date: Tue, 12 Feb 2008 10:57:13 -0800
Subject: [antlr-interest] Error rollback on incomplete input?
Message-ID: <c8c997f40802121057i6916b720j748b9c3aa64e8246@mail.gmail.com>

I'm experimenting with using ANTLR to parse some streaming (network) data
broken up into statements. The statements come in a stream, but the end may
be fragmentary.


For example, suppose a statement was just a quoted string (which could
contain a semicolon as the terminator)
_________________
tokens{ TERM=';';
example_statement : WS? QUOTEDSTRING WS? TERM;
/* QUOTEDSTRING, WS, omitted. */
_________________
example fragmentary input:
 "hello world" ; "how are you today?" ; "fine; thank y
_________________



What I'd like to do is run parser.example_statement(); repeatedly
until an error occurs,
and then defer further runs until more data has arrived.

Does this sound feasible to anyone? I'm guessing I cannot do this on an
inputstream/lexer
level, since the lexer attempts to lex everything in one pass.

-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are not
the intended recipient, then this is notice that any use, disclosure,
dissemination, distribution or copying is strictly prohibited. If you have
received this message in error please contact the sender by reply mail and
destroy all copies of the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080212/dda30935/attachment.html 

From jimi at temporal-wave.com  Tue Feb 12 10:35:55 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 12 Feb 2008 10:35:55 -0800
Subject: [antlr-interest] MismatchedTokenException and how to find
	errors in ANTLRWorks
In-Reply-To: <18b4fcc20802121005x3e97df50s9124afadd10cea07@mail.gmail.com>
Message-ID: <"L544255A47E1D43afBF73972B3785860D.1202842861.scalix.temporal-wave.com*"@MHS>

I strongly believe that using literal strings in the grammar is fraught 
with difficulties for the beginner and advise against it. Take the 
string literals out of the grammar and create your own tokens, then you 
will see the ambiguities (or otherwise) between your tokens and so on. 
You are probably better off with something like this (guessing at the 
card sequence etc):

grammar cards;

dealingRiver
	: STARSTAR RIVER STARSTAR COLON LBRACKET c=ID RBRACKET NL // Only 
keep the NL unhidden if the grammar is ambiguous otherwise
		{
			String card = $c.text;
			char suit = card.charAt(1);
			char cardinalty = card.charAt(0);
			
			if 	(card.length() !=2 || !(suit == 'd' || suit == 
'h' || suit == 'c' || suit == 's')) // And so on
			{
				System.out.println("Invalid card '" + card + "'");
			}
		}
	;

// Leadins and keywords
//
RIVER	: 'Dealing River' ;

// Punctuation
//
LBRACKET	:	'['	;
RBRACKET	:	']'	;
COLON		:	':'	;
STARSTAR	:	'**';

// ID
//
ID	: ('a'..'z'|'A'..'Z'|'_'|'0'..'9')+ 
	;

// NEWLINE
//
NL	: '\r'? '\n'	
	;

// Whitespace
//
WS	: (' ' | '\t')+
	{
		$channel = HIDDEN;
	}
	;

ANY	: .	{ $channel = HIDDEN; System.out.println("Unknown char '" 
+ $text + "' on line " + $line);	}	;

Note that you should match anything that is vaguely OK in the lexer, 
then check it semantically later. This allows you better errors than 
"Mismatched char...". You really dont want your lexer issuing any 
ANTLR generated errors if you can help it.

Jim

> -----Original Message-----
> From: Micke Hovm?ller [mailto:micke.hovmoller at gmail.com]
> Sent: Tuesday, February 12, 2008 10:06 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] MismatchedTokenException and how to find
> errors in ANTLRWorks
> 
> I have a bit of a problem finding the errors in my grammar, and would
> appreciate some hints on how to go about finding them.
> 
> I have this rule in my grammar:
> dealingriver
> 	:	'** Dealing River ** :  [ ' CARD ']' NEWLINE ;
> 
> and this input:
> ** Dealing River ** :  [ 3d ]
> 
> (All this part of larger grammar and input.)
> 
> ANTLRWorks finds the dealingriver rule, splits it into '** Dealing
> River ** :  [ ' and 3d but gives this message as the third leaf in the
> node:
>   MismatchedTokenException(5!=31)
> 
> This leads to my questions:
> 1. Is there a more extensive list of error messages than the fairly
> short one in the ANTLR reference book?
> 
> 2. What is the easiest way to find which tokens are referred to by, in
> this case, 5 and 31? If I generate the grammer, I can look in the
> .token file, but that seems tedious. Can't I find that inside
> ANTLRWorks somewhere? (FWIW, this is what I found in the .token file:
> '** Dealing Turn ** :  ['=31
> ID=5
> 
> ID is defined as:
> ID: ('a'..'z'|'A'..'Z')('a'..'z'|'A'..'Z'|'_'|'0'..'9')+ ; )
> 
> 
> 3. I get this error a lot, it seems. How should I think/what should I
> look for in debugging?
> 
> (4. Is it obvious what is wrong here? I expect to have found the issue
> shortly, but I'm still interested in the general questions above.)
> 
> /Micke



From jimi at temporal-wave.com  Tue Feb 12 10:36:42 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 12 Feb 2008 10:36:42 -0800
Subject: [antlr-interest] Antlrworks Debug gives java.net.Connection
	Exception
In-Reply-To: <006f01c86da2$58abc200$265d080a@Gizmo>
Message-ID: <"L8308FA3840084a68A6B580670465B877.1202842908.scalix.temporal-wave.com*"@MHS>

Try changing the port number in preferences, something else is possibly
using the same port. 

 

Jim

 

From: Chris Snyder [mailto:snyder at t-vec.com] 
Sent: Tuesday, February 12, 2008 10:09 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Antlrworks Debug gives java.net.Connection
Exception

 

Hello,

 

I?m trying to use the Antlrworks debugger locally but I keep getting the
error:

 

java.net.ConnectException: Connection refused: connect

 

and a dialog box that says:

 

Cannot launch the debugger.

Time-out waiting to connect to the remote parser.

 

I tried turning off the Windows firewall but that didn?t help.

 

Can someone provide the work around for this issue?

 

Thanks,

Chris

 

 T-VEC Technologies, Inc.

 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080212/d19f20c9/attachment-0001.html 

From antlr at mirality.co.nz  Tue Feb 12 11:25:30 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 13 Feb 2008 08:25:30 +1300
Subject: [antlr-interest] Emit two Tokens in one Lexer Rule
In-Reply-To: <47B19C34.6080607@gaengel.de>
References: <47B19C34.6080607@gaengel.de>
Message-ID: <20080212192549.62E1211EC82@www.antlr.org>

At 02:16 13/02/2008, Alexander G?ngel wrote:
 >
 >My problem it that I have to decide if I have 
an Float like  1.1 or
 >an Int DOT Identifiert lik 5.max
 >My workaround would be to emit just the first an restart lexing
 >from the last correct charterer. So I would Just emit 5 as Int
 >and reparse from the Dot.

Which is easy enough with a syntactic predicate:

fragment FLOAT: NUMBER DOT NUMBER;
INT
   : NUMBER
     ((DOT NUMBER) => DOT NUMBER { $type = FLOAT; })?
   ;
fragment NUMBER: DIGIT+;
fragment DIGIT: '0'..'9';


From snyder at t-vec.com  Tue Feb 12 11:33:57 2008
From: snyder at t-vec.com (Chris Snyder)
Date: Tue, 12 Feb 2008 14:33:57 -0500
Subject: [antlr-interest] Antlrworks Debug gives
	java.net.ConnectionException
In-Reply-To: <"L8308FA3840084a68A6B580670465B877.1202842908.scalix.temporal-wave.com*"@MHS>
References: <006f01c86da2$58abc200$265d080a@Gizmo>
	<"L8308FA3840084a68A6B580670465B877.1202842908.scalix.temporal-wave.com*"@MHS>
Message-ID: <009301c86dae$36731d30$265d080a@Gizmo>

Thanks for the response.

I had already tried that but it turns out not to be the problem. 

Apparently I have a grammar issue.
I clicked on the output window in the debugger and saw this:

Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
	at org.antlr.runtime.DFA.unpackEncodedString(DFA.java:151)
	at MScriptLexer.<clinit>(MScriptLexer.java:14863)
	at __Test__.main(__Test__.java:9)

I tried increasing the heap with ?Xmx1024m but am still getting this error.

I downloaded the antlr source and loaded everything up in Eclipse but that
class turns out to not in the source distribution I downloaded here
http://antlr.org/download.html. 

The DFA28_transitionS variable that it is being looped over and passed to
unpackEncodedString has 1344 Strings in it. Is there something I should look
for in my grammar to reduce this array size?

Thank you,
Chris

________________________________________
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
Sent: Tuesday, February 12, 2008 1:37 PM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Antlrworks Debug gives
java.net.ConnectionException

Try changing the port number in preferences, something else is possibly
using the same port. 

Jim 

From: Chris Snyder [mailto:snyder at t-vec.com] 
Sent: Tuesday, February 12, 2008 10:09 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Antlrworks Debug gives java.net.Connection
Exception 

Hello, 

I?m trying to use the Antlrworks debugger locally but I keep getting the
error: 

java.net.ConnectException: Connection refused: connect 

and a dialog box that says: 

Cannot launch the debugger. 
Time-out waiting to connect to the remote parser. 

I tried turning off the Windows firewall but that didn?t help. 

Can someone provide the work around for this issue? 

Thanks, 
Chris 

?T-VEC Technologies, Inc. 



From gudnabrsam at yahoo.com  Tue Feb 12 11:39:36 2008
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Tue, 12 Feb 2008 11:39:36 -0800 (PST)
Subject: [antlr-interest] MismatchedTokenException and how to find
	errors in ANTLRWorks
In-Reply-To: <"L544255A47E1D43afBF73972B3785860D.1202842861.scalix.temporal-wave.com*"@MHS>
Message-ID: <860747.11829.qm@web55104.mail.re4.yahoo.com>


--- Jim Idle <jimi at temporal-wave.com> wrote:

> I strongly believe that using literal strings in the
> grammar is fraught 
> with difficulties for the beginner and advise
> against it.

[SNIP]

But... the examples say it's okay!  ;)

Seriously, Jim:  what's the likelihood of your (or
anyone's) being able to sum up the reason for this
fairly succinctly?  What is the #1 gotcha about using
literals vs. tokens that ANTLR3 beginners overlook?

br,
Matt



      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ 


From antlr at mirality.co.nz  Tue Feb 12 11:58:24 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 13 Feb 2008 08:58:24 +1300
Subject: [antlr-interest] MismatchedTokenException and how to find
 errors in ANTLRWorks
In-Reply-To: <860747.11829.qm@web55104.mail.re4.yahoo.com>
References: <"L544255A47E1D43afBF73972B3785860D.1202842861.scalix.temporal-wave.com*"@MHS>
	<860747.11829.qm@web55104.mail.re4.yahoo.com>
Message-ID: <20080212195844.1C8FC11ED29@www.antlr.org>

At 08:39 13/02/2008, Matt Benson wrote:
 >Seriously, Jim:  what's the likelihood of your (or
 >anyone's) being able to sum up the reason for this
 >fairly succinctly?  What is the #1 gotcha about using
 >literals vs. tokens that ANTLR3 beginners overlook?

I gave my answer to that question yesterday (though more 
briefly).  As I see it, there are two big drawbacks to using 
literal strings in the parser:

1. The generated code becomes filled with references to "T32" and 
"T63" etc rather than anything meaningful, making it harder to 
understand.  (And also complicating things if you want to generate 
an AST later on.)

2. It's too easy to forget that each quoted string produces a 
lexer rule (which may conflict with other rules), making it harder 
to find the source of ambiguity problems.  In addition, "'x' 'y'" 
is not the same as "'xy'" in the parser, though it is in the 
lexer; this can cause confusion.


From gudnabrsam at yahoo.com  Tue Feb 12 12:03:47 2008
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Tue, 12 Feb 2008 12:03:47 -0800 (PST)
Subject: [antlr-interest] MismatchedTokenException and how to find
	errors in ANTLRWorks
Message-ID: <309267.64792.qm@web55109.mail.re4.yahoo.com>


--- Gavin Lambert <antlr at mirality.co.nz> wrote:

> At 08:39 13/02/2008, Matt Benson wrote:
>  >Seriously, Jim:  what's the likelihood of your (or
>  >anyone's) being able to sum up the reason for this
>  >fairly succinctly?  What is the #1 gotcha about
> using
>  >literals vs. tokens that ANTLR3 beginners
> overlook?
> 
> I gave my answer to that question yesterday (though
> more 
> briefly).  As I see it, there are two big drawbacks
> to using 
> literal strings in the parser:
> 
> 1. The generated code becomes filled with references
> to "T32" and 
> "T63" etc rather than anything meaningful, making it
> harder to 
> understand.  (And also complicating things if you
> want to generate 
> an AST later on.)
> 
> 2. It's too easy to forget that each quoted string
> produces a 
> lexer rule (which may conflict with other rules),
> making it harder 
> to find the source of ambiguity problems.  In
> addition, "'x' 'y'" 
> is not the same as "'xy'" in the parser, though it
> is in the 
> lexer; this can cause confusion.
> 
> 

Thanks, Gavin.  Now flip the coin:  what, if anything,
is _good_ about literals in the parser outside of a
rapid prototyping context?

-Matt


      ____________________________________________________________________________________
Looking for last minute shopping deals?  
Find them fast with Yahoo! Search.  http://tools.search.yahoo.com/newsearch/category.php?category=shopping

From jimi at temporal-wave.com  Tue Feb 12 11:46:10 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 12 Feb 2008 11:46:10 -0800
Subject: [antlr-interest] Emit two Tokens in one Lexer Rule
In-Reply-To: <20080212192549.62E1211EC82@www.antlr.org>
Message-ID: <"L7A3D1C765C0A46698B7DFF979FF3B554.1202847075.scalix.temporal-wave.com*"@MHS>



> -----Original Message-----
> From: Gavin Lambert [mailto:antlr at mirality.co.nz]
> Sent: Tuesday, February 12, 2008 11:26 AM
> To: Alexander G?ngel; antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Emit two Tokens in one Lexer Rule
> 
> At 02:16 13/02/2008, Alexander G?ngel wrote:
>  >
>  >My problem it that I have to decide if I have
> an Float like  1.1 or
>  >an Int DOT Identifiert lik 5.max
>  >My workaround would be to emit just the first an restart lexing
>  >from the last correct charterer. So I would Just emit 5 as Int
>  >and reparse from the Dot.
> 
> Which is easy enough with a syntactic predicate:
> 
> fragment FLOAT: NUMBER DOT NUMBER;
> INT
>    : NUMBER
>      ((DOT NUMBER) => DOT NUMBER { $type = FLOAT; })?
>    ;

And even better if you dont repdicate the entire number set ;-)

((DOT DIGIT) => ....

> fragment NUMBER: DIGIT+;
> fragment DIGIT: '0'..'9';
> 



From jimi at temporal-wave.com  Tue Feb 12 11:50:10 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 12 Feb 2008 11:50:10 -0800
Subject: [antlr-interest] MismatchedTokenException and how to find
	errors in ANTLRWorks
In-Reply-To: <860747.11829.qm@web55104.mail.re4.yahoo.com>
Message-ID: <"LB9F5699FA5EF4b77AB092F4111F28328.1202847316.scalix.temporal-wave.com*"@MHS>



> -----Original Message-----
> From: Matt Benson [mailto:gudnabrsam at yahoo.com]
> Sent: Tuesday, February 12, 2008 11:40 AM
> To: Jim Idle; antlr-interest at antlr.org
> Subject: Re: [antlr-interest] MismatchedTokenException and how to find
> errors in ANTLRWorks
> 
> 
> --- Jim Idle <jimi at temporal-wave.com> wrote:
> 
> > I strongly believe that using literal strings in the
> > grammar is fraught
> > with difficulties for the beginner and advise
> > against it.
> 
> [SNIP]
> 
> But... the examples say it's okay!  ;)
> 
> Seriously, Jim:  what's the likelihood of your (or
> anyone's) being able to sum up the reason for this
> fairly succinctly?  What is the #1 gotcha about using
> literals vs. tokens that ANTLR3 beginners overlook?

Just scan through the last six months posts and find that an awful lot 
of people just assume that when you write:

'xxx' 

that the rule goes off and looks in the character stream right at that 
moment in time for 'x' 'x' 'x' and then they have no idea why their 
literals conflict with other lexer rules and xxx does not return an ID 
later on. 

Hence, the best thing is not to use this until you understand how it is 
all goes together. To be honest, even then I am not sure that I see the 
advantage myself.

Jim
 



From snyder at t-vec.com  Tue Feb 12 12:17:30 2008
From: snyder at t-vec.com (Chris Snyder)
Date: Tue, 12 Feb 2008 15:17:30 -0500
Subject: [antlr-interest] Antlrworks Debug
	givesjava.net.ConnectionException
In-Reply-To: <009301c86dae$36731d30$265d080a@Gizmo>
References: <006f01c86da2$58abc200$265d080a@Gizmo><"L8308FA3840084a68A6B580670465B877.1202842908.scalix.temporal-wave.com*"@MHS>
	<009301c86dae$36731d30$265d080a@Gizmo>
Message-ID: <009401c86db4$4bc52010$265d080a@Gizmo>

In case someone else has a similar problem here is what I found.

I had about 110 function names that I wanted to match to distinguish between
built in and user defined names. If I remove all those names from the lexer
and default to looking for (Identifier LPAREN) I can debug. 

I did try having the names in the parser instead of the lexer with the same
result. I think I can work around this issue though. 

C

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Chris Snyder
Sent: Tuesday, February 12, 2008 2:34 PM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Antlrworks Debug
givesjava.net.ConnectionException

Thanks for the response.

I had already tried that but it turns out not to be the problem. 

Apparently I have a grammar issue.
I clicked on the output window in the debugger and saw this:

Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
	at org.antlr.runtime.DFA.unpackEncodedString(DFA.java:151)
	at MScriptLexer.<clinit>(MScriptLexer.java:14863)
	at __Test__.main(__Test__.java:9)

I tried increasing the heap with ?Xmx1024m but am still getting this error.

I downloaded the antlr source and loaded everything up in Eclipse but that
class turns out to not in the source distribution I downloaded here
http://antlr.org/download.html. 

The DFA28_transitionS variable that it is being looped over and passed to
unpackEncodedString has 1344 Strings in it. Is there something I should look
for in my grammar to reduce this array size?

Thank you,
Chris

________________________________________
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
Sent: Tuesday, February 12, 2008 1:37 PM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Antlrworks Debug gives
java.net.ConnectionException

Try changing the port number in preferences, something else is possibly
using the same port. 

Jim 

From: Chris Snyder [mailto:snyder at t-vec.com] 
Sent: Tuesday, February 12, 2008 10:09 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Antlrworks Debug gives java.net.Connection
Exception 

Hello, 

I?m trying to use the Antlrworks debugger locally but I keep getting the
error: 

java.net.ConnectException: Connection refused: connect 

and a dialog box that says: 

Cannot launch the debugger. 
Time-out waiting to connect to the remote parser. 

I tried turning off the Windows firewall but that didn?t help. 

Can someone provide the work around for this issue? 

Thanks, 
Chris 

?T-VEC Technologies, Inc. 



From parrt at cs.usfca.edu  Tue Feb 12 13:21:52 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 12 Feb 2008 13:21:52 -0800
Subject: [antlr-interest] new build
Message-ID: <B5153C4E-9456-4F58-8A5D-A411A4AB7446@cs.usfca.edu>

Hi. Fixed some good stuff:

http://www.antlr.org/download/build/antlr-2008-02-12.13.tar.gz

* Fixed ANTLR-219.
   It looks like the AST construction code for sets was totally messed  
up.
   This was for not only the new tree parser AST construction, but also
   the regular tree construction for parsers. I had to introduce  
templates
   in the ASTTreeParser.stg file to deal with this. added unit tests:
   TestTreeGrammarRewriteAST.testSetMatchNoRewrite(),
   testSetMatchNoRewriteLevel2(), testSetMatchNoRewriteLevel2Root().
   Had to add template matchRuleBlockSet()
   to differentiate between a regular set in one that is an entire rule.
   If it is an entire rule, it has to set the return value, retval.tree.

* Fixed ANTLR-220.
   Made TreeAdaptor dupNode and dupTree events emit debugging events
   so AW could see tree node duplications.

February 4, 2008

* BACKWARD INCOMPATIBILITY
   Added getSourceName to IntStream and TokenSource interfaces and  
also the
   BaseRecognizer.  Have to know where char come from for error  
messages.
   Widespread change, but a trivial one.

etc...

see CHANGES.txt

Ter

From jpen054 at ec.auckland.ac.nz  Tue Feb 12 14:09:27 2008
From: jpen054 at ec.auckland.ac.nz (Jamie Penney)
Date: Wed, 13 Feb 2008 11:09:27 +1300
Subject: [antlr-interest] CSharp API
Message-ID: <47B21917.40601@ec.auckland.ac.nz>

Hi All,

The link to the C# API seems to be dead. Does anyone know where I can 
find a copy of this?

Thanks,
Jamie Penney

-- 
Jamie Penney

http://www.jamiepenney.co.nz

From peter.bulychev at gmail.com  Tue Feb 12 14:16:11 2008
From: peter.bulychev at gmail.com (Peter Bulychev)
Date: Wed, 13 Feb 2008 00:16:11 +0200
Subject: [antlr-interest] Java AST Grammar
In-Reply-To: <BLU124-W40E6A64FA2B39492880230842B0@phx.gbl>
References: <BLU124-W377786AF163CAC13E783AC842B0@phx.gbl>
	<c8c997f40802121033u16153999n8a3a1bd76318f30f@mail.gmail.com>
	<BLU124-W40E6A64FA2B39492880230842B0@phx.gbl>
Message-ID: <ef5132890802121416v76b09fd3yd466820f70e91b20@mail.gmail.com>

Hello.

I perform similar work now. I am occupied with creating of an open-source
AST-based duplicate code detection tool.
It works only with Python ASTs now and I want to add Java language support.
So, I also am interested in building AST of Java code.

I think, there are two solutions:
*) Add AST-building facilities to
http://www.antlr.org/grammar/1152141644268/Java.g . This task seems to be
easy at the first sight but I don't know its real complexity.
*) There is an existing ANTLR 2 grammar in the Same project (
http://www.cs.usfca.edu/projects/same). I tried it and it works (the example
is given in the end of this letter). I don't know how does it correlate with
the Java grammar for
ANTLR 3. This grammar can be used in ANTLR 2 or can be translated to ANTLR
3. I don't know drawbacks of ANTLR 2, so I don't know which version of ANTLR
to use.

And as it was said

> the kind of tree made really depends on what you're trying to do.
>

For example, I need flatten grammar (all statements in the same block are
siblings in AST) with fixed arity for each type of node.

Maybe, if we have the same requirements for the AST we can share the task.
What do you think about this idea? But I have to note, that I use Python
target. If you use another one, then we should fork at some moment.

And of course, please inform me if you find something new.

Example for java15.g:

[peter at localhost myparser]$ cat input.java
public class Main
{
  public static void func (int param)
  {
    for (int i = 0; i < 9; i++)
      {
        for (int j = 0; j < i; j++)
          {
            i = i && i && j;
            i += 1;
          }
      }
  }
}
[peter at localhost myparser]$
[peter at localhost myparser]$ java Main
 ( CLASS_DEF ( CLASS_H ( MODIFIERS public ) Main EXTENDS_CLAUSE
IMPLEMENTS_CLAUSE ) ( OBJBLOCK ( METHOD_DEF ( METHOD_D ( MODIFIERS public
static ) ( TYPE void ) ( METHOD_H func ( PARAMETERS ( PARAMETER_DEF
MODIFIERS ( TYPE int ) param ) ) ) ) ( { ( for ( FOR_H ( FOR_INIT (
VARIABLE_DEF MODIFIERS ( TYPE int ) i ( = ( EXPR 0 ) ) ) ) ( FOR_CONDITION (
EXPR ( < i 9 ) ) ) ( FOR_ITERATOR ( ELIST ( EXPR ( ++ i ) ) ) ) ) ( { ( for
( FOR_H ( FOR_INIT ( VARIABLE_DEF MODIFIERS ( TYPE int ) j ( = ( EXPR 0 ) )
) ) ( FOR_CONDITION ( EXPR ( < j i ) ) ) ( FOR_ITERATOR ( ELIST ( EXPR ( ++
j ) ) ) ) ) ( { ( EXPR ( = i ( && ( && i i ) j ) ) ) ( EXPR ( += i 1 ) ) ) )
) ) ) ) ) )


2008/2/12, Adam Cooney <ad_cooney at hotmail.com>:
>
>  Well, I'm attempting to compare two Java source files by creating 2 ASTs
> and comparing the two to generated ASTs, so I can find changes in the code
> and errors.
>
>  ------------------------------
> Date: Tue, 12 Feb 2008 10:33:17 -0800
> From: darien.hager at etelos-inc.com
> To: ad_cooney at hotmail.com
> Subject: Re: [antlr-interest] Java AST Grammar
>
> I don't think there is any particular "correct" way to make a Java
> AST---the kind of tree made really depends on what you're trying to do.
>
> I'd suggest you look up AST rewrite rules. The example JSON grammar has
> some examples (look for the -> line)
> http://www.antlr.org/wiki/display/ANTLR3/JSON+Interpreter
>
>
>
>
> --
> Darien Hager
> Developer
> Etelos, Inc.
> darien at etelos.com
>
> http://www.etelos.com
> "Revolutionizing the way applications are developed, distributed and
> consumed."
>
> This e-mail message, including attachments, may contain confidential
> information for the sole use of the intended recipient(s). If you are not
> the intended recipient, then this is notice that any use, disclosure,
> dissemination, distribution or copying is strictly prohibited. If you have
> received this message in error please contact the sender by reply mail and
> destroy all copies of the original message.
>
>
> ------------------------------
> Everything in one place. All new Windows Live!<http://www.windowslive.co.uk/get-live>
>



-- 
Best regards,
   Peter Bulychev.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080213/ea37ed87/attachment-0001.html 

From guntiso at latnet.lv  Tue Feb 12 15:58:27 2008
From: guntiso at latnet.lv (Guntis Ozols)
Date: Wed, 13 Feb 2008 01:58:27 +0200
Subject: [antlr-interest] MismatchedTokenException and how to find
	errors in ANTLRWorks
In-Reply-To: <20080212195844.1C8FC11ED29@www.antlr.org>
References: <"L544255A47E1D43afBF73972B3785860D.1202842861.scalix.temporal-wave.com*"@MHS>
	<860747.11829.qm@web55104.mail.re4.yahoo.com>
	<20080212195844.1C8FC11ED29@www.antlr.org>
Message-ID: <1202860707.47b232a37783e@clients.latnet.lv>

>  >Seriously, Jim:  what's the likelihood of your (or
>  >anyone's) being able to sum up the reason for this
>  >fairly succinctly?  What is the #1 gotcha about using
>  >literals vs. tokens that ANTLR3 beginners overlook?
>
> I gave my answer to that question yesterday (though more
> briefly).  As I see it, there are two big drawbacks to using
> literal strings in the parser:
>
> 1. The generated code becomes filled with references to "T32" and
> "T63" etc rather than anything meaningful, making it harder to
> understand.  (And also complicating things if you want to generate
> an AST later on.)
>
> 2. It's too easy to forget that each quoted string produces a
> lexer rule (which may conflict with other rules), making it harder
> to find the source of ambiguity problems.  In addition, "'x' 'y'"
> is not the same as "'xy'" in the parser, though it is in the
> lexer; this can cause confusion.

Sure it is confusing. I fell into this 'xy' trap, too.
If COLON is defined and STAR is defined, then creating
another token for ':*' in a *parser* rule is confusing.
It should be fixed in antlr.
At least, antlr should emit 'anonymous token' warning[s].

I prefer literals because of simplicity / readability.
The tool needs to be patched, not users.

Guntis


From antlr at shmuelhome.mine.nu  Tue Feb 12 16:03:24 2008
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Wed, 13 Feb 2008 02:03:24 +0200
Subject: [antlr-interest] MismatchedTokenException and how to find
 errors in ANTLRWorks
In-Reply-To: <309267.64792.qm@web55109.mail.re4.yahoo.com>
References: <309267.64792.qm@web55109.mail.re4.yahoo.com>
Message-ID: <47B233CC.6070703@shmuelhome.mine.nu>

Matt Benson wrote:
> --- Gavin Lambert <antlr at mirality.co.nz> wrote:
>
>   
>> At 08:39 13/02/2008, Matt Benson wrote:
>>  >Seriously, Jim:  what's the likelihood of your (or
>>  >anyone's) being able to sum up the reason for this
>>  >fairly succinctly?  What is the #1 gotcha about
>> using
>>  >literals vs. tokens that ANTLR3 beginners
>> overlook?
>>
>> I gave my answer to that question yesterday (though
>> more 
>> briefly).  As I see it, there are two big drawbacks
>> to using 
>> literal strings in the parser:
>>
>> 1. The generated code becomes filled with references
>> to "T32" and 
>> "T63" etc rather than anything meaningful, making it
>> harder to 
>> understand.  (And also complicating things if you
>> want to generate 
>> an AST later on.)
>>
>> 2. It's too easy to forget that each quoted string
>> produces a 
>> lexer rule (which may conflict with other rules),
>> making it harder 
>> to find the source of ambiguity problems.  In
>> addition, "'x' 'y'" 
>> is not the same as "'xy'" in the parser, though it
>> is in the 
>> lexer; this can cause confusion.
>>
>>
>>     
>
> Thanks, Gavin.  Now flip the coin:  what, if anything,
> is _good_ about literals in the parser outside of a
> rapid prototyping context?
>
> -Matt
>
>   
Anyone coming from the ANTLR2 world will remember another problem with
literals. If the literal was the same as a token, the literal overrode
the token. Any parser rule that used the token would get a hard to debug
mismatched token exception. ANTRL3 solves the problem by giving both
forms the same token id, thereby making them synonyms. So, if you live
in both worlds, it might be best to avoid literals.
Another drawback of literals is that there is no error checking.
Literals are alway "right", even if misspelled. This can become an issue
if the literal is used more than once in the grammar.

On the plus side, literals stop you from needing to define unique,
meaningful names for each literal.
I find that literals make the grammar more readable. The syntax diagrams
of AntlrWorks make you really appreciate literals. When switching a
grammar from ANTLR2 to ANTLR3 I switched all of the keywords to literals.
In my testing, I have found that I need to define the literal tokens
before the corresponding regular expressions. Literals seem to do this
automatically.




From shro8822 at vandals.uidaho.edu  Tue Feb 12 16:40:56 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Tue, 12 Feb 2008 16:40:56 -0800
Subject: [antlr-interest] funny error message
Message-ID: <BAYC1-PASMTP120E37A0AA5ECF245BA893F5240@CEZ.ICE>

I was getting a funny "token definitions are unreachable" warning. After 
a few hours of staring at it I (by accident) figured out it was saying 
that one of my lex rules would never match because a previously defined 
rule would match anything it could.

the rules

GText    : ~('\n' | '\r')*    ;
Literal_text    : '\"' ( 'a'..'z') '\"'    ;

The full warning is:

warning(208): D:\__.g:##:##: The following token definitions are 
unreachable: Literal_text

Could someone please improve this error message? The text is almost 
worthless unless you already know what it's saying.

Hopefully Google will index this before the next person has trouble with 
this error because IIRC Google wasn't any help either.

From jpen054 at ec.auckland.ac.nz  Tue Feb 12 17:09:53 2008
From: jpen054 at ec.auckland.ac.nz (Jamie Penney)
Date: Wed, 13 Feb 2008 14:09:53 +1300
Subject: [antlr-interest] Problem with generated code
Message-ID: <47B24361.6080502@ec.auckland.ac.nz>

Hi All,

I am having an issue that I wonder if someone could help me with. I have 
a rule:

// For contextual keywords like get, set and yield
contextual_keyword[string identifier]
    :    { input.LT(1).Text == $identifier }? IDENTIFIER
        -> {$identifier == "from"}? FROM[$IDENTIFIER]    // Transform 
all known contextual keywords into
        -> {$identifier == "let"}? LET[$IDENTIFIER]        // their 
corresponding imaginary token
......................
        -> {$identifier == "remove"}? REMOVE[$IDENTIFIER]
        -> IDENTIFIER    // For unknown ones
    ;

That seems to first action seems to be pulled up into whatever other 
rules use this one in the generated code. So I end up with this sort of 
thing:
                    int alt80 = 2;
                    int LA80_0 = input.LA(1);
                   
                    if ( (LA80_0 == IDENTIFIER) )
                    {
                        int LA80_1 = input.LA(2);
                       
                        if ( ( input.LT(1).Text == identifier ) )
                        {
                            alt80 = 1;
                        }
                       
                   
                    }

Which won't work because identifier hasn't been defined yet. The actual 
call to contextual_keyword() doesn't happen until well after this 
section, as it is further down the rule tree. So my question is, why is 
the first action in this rule being brought up, even though it has a 
dependency on the parameter passed to the rule? Is there a way to avoid 
this behaviour?

Thanks,
Jamie Penney

-- 
Jamie Penney

http://www.jamiepenney.co.nz

From darien.hager at etelos-inc.com  Tue Feb 12 17:20:45 2008
From: darien.hager at etelos-inc.com (Darien Hager)
Date: Tue, 12 Feb 2008 17:20:45 -0800
Subject: [antlr-interest] Error rollback on incomplete input?
In-Reply-To: <c8c997f40802121057i6916b720j748b9c3aa64e8246@mail.gmail.com>
References: <c8c997f40802121057i6916b720j748b9c3aa64e8246@mail.gmail.com>
Message-ID: <c8c997f40802121720h28061445x7ac38356cd0b3ca9@mail.gmail.com>

More or less solved, and I feel a little silly at missing it the first time
around. Huzzah for exploratory debugging. For the search engine record and
lurkers:

Use the CommonTokenStream's mark() and
rewind() functions. (Assuming you've already disabled ANTLR's recovery attempts)

Alternately, the index() and get() methods of CommonTokenStream can pull
back the next Token about to be processed, which in turn has information
about it's offset within the stream or original string.

-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are not
the intended recipient, then this is notice that any use, disclosure,
dissemination, distribution or copying is strictly prohibited. If you have
received this message in error please contact the sender by reply mail and
destroy all copies of the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080212/6007806a/attachment.html 

From tbrandonau at gmail.com  Tue Feb 12 17:30:17 2008
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Wed, 13 Feb 2008 12:30:17 +1100
Subject: [antlr-interest] MismatchedTokenException and how to find
	errors in ANTLRWorks
In-Reply-To: <1202860707.47b232a37783e@clients.latnet.lv>
References: <L544255A47E1D43afBF73972B3785860D.1202842861.scalix.temporal-wave.com*@MHS>
	<860747.11829.qm@web55104.mail.re4.yahoo.com>
	<20080212195844.1C8FC11ED29@www.antlr.org>
	<1202860707.47b232a37783e@clients.latnet.lv>
Message-ID: <ebc876d70802121730t698f6022i2d4855bdae877755@mail.gmail.com>

On Feb 13, 2008 10:58 AM, Guntis Ozols <guntiso at latnet.lv> wrote:

> Sure it is confusing. I fell into this 'xy' trap, too.
> If COLON is defined and STAR is defined, then creating
> another token for ':*' in a *parser* rule is confusing.
> It should be fixed in antlr.
> At least, antlr should emit 'anonymous token' warning[s].
>
> I prefer literals because of simplicity / readability.
> The tool needs to be patched, not users.
>
> Guntis
>
> If I understand your "problem" I don't think this can be fixed. If you
type ':*', how can ANTLR know you don't want ':*' as a single token. It is
perfectly valid to have ':', '*' and ':*' tokens, so this is what ANTLR
produces.
And emitting a warning just because you use a perfectly valid (if easily
misusable) construct doesn't seem right.
Unfortunately I don't think this is a case where ANTLR can protect you from
yourself.
Perhaps literals could be allowed in the parser but only to refer to tokens
defined in the lexer, generating an error otherwise. That should alleviate
many (if not all) of the issues while still allowing the stylistic choice
some seem to want.

Tom.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080213/e2a30f1b/attachment.html 

From darien.hager at etelos-inc.com  Tue Feb 12 17:42:51 2008
From: darien.hager at etelos-inc.com (Darien Hager)
Date: Tue, 12 Feb 2008 17:42:51 -0800
Subject: [antlr-interest] MismatchedTokenException and how to find
	errors in ANTLRWorks
In-Reply-To: <ebc876d70802121730t698f6022i2d4855bdae877755@mail.gmail.com>
References: <L544255A47E1D43afBF73972B3785860D.1202842861.scalix.temporal-wave.com*@MHS>
	<860747.11829.qm@web55104.mail.re4.yahoo.com>
	<20080212195844.1C8FC11ED29@www.antlr.org>
	<1202860707.47b232a37783e@clients.latnet.lv>
	<ebc876d70802121730t698f6022i2d4855bdae877755@mail.gmail.com>
Message-ID: <c8c997f40802121742pbea7542ldd4d12983ddcc9e2@mail.gmail.com>

>
> Perhaps literals could be allowed in the parser but only to refer to
> tokens defined in the lexer, generating an error otherwise. That should
> alleviate many (if not all) of the issues while still allowing the stylistic
> choice some seem to want.
>

That makes sense to me. Parser-literals would mainly be a way to avoid
remembering the token name and/or for readability.

Although... could this cause problems with the tokenVocabulary option?
Suppose someone wants to extend and build upon an existing (read-only) lexer
grammar, but cannot define new literals in the parser.


-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are not
the intended recipient, then this is notice that any use, disclosure,
dissemination, distribution or copying is strictly prohibited. If you have
received this message in error please contact the sender by reply mail and
destroy all copies of the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080212/305c56d3/attachment.html 

From parrt at cs.usfca.edu  Tue Feb 12 18:19:15 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 12 Feb 2008 18:19:15 -0800
Subject: [antlr-interest] funny error message
In-Reply-To: <BAYC1-PASMTP120E37A0AA5ECF245BA893F5240@CEZ.ICE>
References: <BAYC1-PASMTP120E37A0AA5ECF245BA893F5240@CEZ.ICE>
Message-ID: <D965CB0B-278D-4DF7-8F54-2E1C4579E5A8@cs.usfca.edu>

Hi.  Do you have a suggestion? perhaps " this token definition can  
never be matched"?

Ter
On Feb 12, 2008, at 4:40 PM, Benjamin Shropshire wrote:

> I was getting a funny "token definitions are unreachable" warning.  
> After a few hours of staring at it I (by accident) figured out it  
> was saying that one of my lex rules would never match because a  
> previously defined rule would match anything it could.
>
> the rules
>
> GText    : ~('\n' | '\r')*    ;
> Literal_text    : '\"' ( 'a'..'z') '\"'    ;
>
> The full warning is:
>
> warning(208): D:\__.g:##:##: The following token definitions are  
> unreachable: Literal_text
>
> Could someone please improve this error message? The text is almost  
> worthless unless you already know what it's saying.
>
> Hopefully Google will index this before the next person has trouble  
> with this error because IIRC Google wasn't any help either.


From darien.hager at etelos-inc.com  Tue Feb 12 18:39:43 2008
From: darien.hager at etelos-inc.com (Darien Hager)
Date: Tue, 12 Feb 2008 18:39:43 -0800
Subject: [antlr-interest] funny error message
In-Reply-To: <D965CB0B-278D-4DF7-8F54-2E1C4579E5A8@cs.usfca.edu>
References: <BAYC1-PASMTP120E37A0AA5ECF245BA893F5240@CEZ.ICE>
	<D965CB0B-278D-4DF7-8F54-2E1C4579E5A8@cs.usfca.edu>
Message-ID: <c8c997f40802121839m6f794dd9m49d9c4bfdbc2d8e9@mail.gmail.com>

Well, with hindsight it looks like a pretty good error message.

I guess it might hinge on the definition of "unreachable" or what component
is doing the reaching. Two possible quick interpretations of the message:

This token cannot be reached...
1) ...because it is an orphan not used by any parser rules.
2) ...because other lexer tokens will always match first.

I think I might assume explanation #1, just from reading the error message,
while it appears to be #2 that is happening.

-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are not
the intended recipient, then this is notice that any use, disclosure,
dissemination, distribution or copying is strictly prohibited. If you have
received this message in error please contact the sender by reply mail and
destroy all copies of the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080212/d001edf8/attachment.html 

From guntiso at latnet.lv  Tue Feb 12 20:37:18 2008
From: guntiso at latnet.lv (Guntis Ozols)
Date: Wed, 13 Feb 2008 06:37:18 +0200
Subject: [antlr-interest] MismatchedTokenException and how to
	find	errors in ANTLRWorks
In-Reply-To: <ebc876d70802121730t698f6022i2d4855bdae877755@mail.gmail.com>
References: <L544255A47E1D43afBF73972B3785860D.1202842861.scalix.temporal-wave.com*@MHS>
	<860747.11829.qm@web55104.mail.re4.yahoo.com>
	<20080212195844.1C8FC11ED29@www.antlr.org>
	<1202860707.47b232a37783e@clients.latnet.lv>
	<ebc876d70802121730t698f6022i2d4855bdae877755@mail.gmail.com>
Message-ID: <1202877438.47b273fe9c753@clients.latnet.lv>

> > Sure it is confusing. I fell into this 'xy' trap, too.
> > If COLON is defined and STAR is defined, then creating
> > another token for ':*' in a *parser* rule is confusing.
> > It should be fixed in antlr.
> > At least, antlr should emit 'anonymous token' warning[s].
> >
> > I prefer literals because of simplicity / readability.
> > The tool needs to be patched, not users.

> If I understand your "problem" I don't think this can be fixed. If you
> type ':*', how can ANTLR know you don't want ':*' as a single token.

Because:
 - there is only one grammar file for both lexer and parser
 - ':*' is mentioned in a parser rule only
 - there are lexer rules in that same file for ':' and '*'
 so lexer rules can be combined automatically to support parser rules

> It is perfectly valid to have ':', '*' and ':*' tokens, so this is
> what ANTLR produces.
> And emitting a warning just because you use a perfectly valid (if easily
> misusable) construct doesn't seem right.
> Unfortunately I don't think this is a case where ANTLR can protect
> you from yourself.
> Perhaps literals could be allowed in the parser but only to refer to tokens
> defined in the lexer, generating an error otherwise. That should alleviate
> many (if not all) of the issues while still allowing the stylistic choice
> some seem to want.
>
> Tom.

Emitting a warning doesn't seem right, generating an error is better?
I feel OK with that. Although I actually think that allowing literals
in parser can enable to create some very simple grammars easier.
But magically creating tokens by default really is a bad choice.
Perhaps an option to explicitly allow creation of anonymous tokens
is the best solution.

Guntis


From markwright at internode.on.net  Tue Feb 12 21:05:32 2008
From: markwright at internode.on.net (Mark Wright)
Date: Wed, 13 Feb 2008 16:05:32 +1100
Subject: [antlr-interest] Problem with generated code
In-Reply-To: <47B24361.6080502@ec.auckland.ac.nz>
References: <47B24361.6080502@ec.auckland.ac.nz>
Message-ID: <20080213160532.000041a3@goanna>

> So my question is,
> why is the first action in this rule being brought up, even though it
> has a dependency on the parameter passed to the rule?

Hello Jamie,

Because its a dis-ambiguating semantic predicate, ANTLR will hoist
these into rules where it needs them to resolving ambiguities.
Also ANTLR is likely to call it multiple times.

> Is there a way to avoid this behaviour?
> 
> Thanks,
> Jamie Penney
> 

No.  You will need to write the dis-ambiguating semantic predicate
so that it obtains the information it needs from:

- scanning looking at tokens, usually forwards, but sometimes
I add a symbol with some information to a token and then look
backwards for it.

- looking up stuff in a symbol table.

- or you could look in an ANTLR scope that is active everywhere the
the dis-ambiguating semantic predicate could be hoisted to.

Regards, Mark

-- 

From tbrandonau at gmail.com  Tue Feb 12 21:53:42 2008
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Wed, 13 Feb 2008 16:53:42 +1100
Subject: [antlr-interest] MismatchedTokenException and how to find
	errors in ANTLRWorks
In-Reply-To: <1202877438.47b273fe9c753@clients.latnet.lv>
References: <L544255A47E1D43afBF73972B3785860D.1202842861.scalix.temporal-wave.com*@MHS>
	<860747.11829.qm@web55104.mail.re4.yahoo.com>
	<20080212195844.1C8FC11ED29@www.antlr.org>
	<1202860707.47b232a37783e@clients.latnet.lv>
	<ebc876d70802121730t698f6022i2d4855bdae877755@mail.gmail.com>
	<1202877438.47b273fe9c753@clients.latnet.lv>
Message-ID: <ebc876d70802122153i5e69d919t765284c17b05154e@mail.gmail.com>

On Feb 13, 2008 3:37 PM, Guntis Ozols <guntiso at latnet.lv> wrote:
>
> > > Sure it is confusing. I fell into this 'xy' trap, too.
> > > If COLON is defined and STAR is defined, then creating
> > > another token for ':*' in a *parser* rule is confusing.
> > > It should be fixed in antlr.
> > > At least, antlr should emit 'anonymous token' warning[s].
> > >
> > > I prefer literals because of simplicity / readability.
> > > The tool needs to be patched, not users.
>
>
> > If I understand your "problem" I don't think this can be fixed. If you
> > type ':*', how can ANTLR know you don't want ':*' as a single token.
>
> Because:
>  - there is only one grammar file for both lexer and parser
>  - ':*' is mentioned in a parser rule only
>  - there are lexer rules in that same file for ':' and '*'
>  so lexer rules can be combined automatically to support parser rules
I don't really think ANTLR should guess that. That could result in
very weird behaviour when a literal you use in a parser happens to be
the combination of two lexer rules. And also, a literal in the parser
should refer to a single token not multiple tokens. ':*' and ':' '*'
should be referring to different things.
>
>
>
> > It is perfectly valid to have ':', '*' and ':*' tokens, so this is
> > what ANTLR produces.
> > And emitting a warning just because you use a perfectly valid (if easily
> > misusable) construct doesn't seem right.
> > Unfortunately I don't think this is a case where ANTLR can protect
> > you from yourself.
> > Perhaps literals could be allowed in the parser but only to refer to tokens
> > defined in the lexer, generating an error otherwise. That should alleviate
> > many (if not all) of the issues while still allowing the stylistic choice
> > some seem to want.
> >
> > Tom.
>
> Emitting a warning doesn't seem right, generating an error is better?
> I feel OK with that. Although I actually think that allowing literals
> in parser can enable to create some very simple grammars easier.
> But magically creating tokens by default really is a bad choice.
> Perhaps an option to explicitly allow creation of anonymous tokens
> is the best solution.
>
> Guntis
My point was that as long as this is valid syntax it seems very
peculiar to give a warning (or error) just because that sort of syntax
is often misunderstood or misused.
I guess you could have an option and otherwise only allow literals
that were specified in the lexer. Though I'm not even sure I think
either of those is worth the effort (especially the option).
There should be (and probably is) introductory documentation that
details such things. This results from a basic misunderstanding as to
the separation of lexing and parsing, this crops up here and in other
places, it's something you just have to learn and once you do I think
the current arrangement is natural.

Tom.

From tbrandonau at gmail.com  Tue Feb 12 21:55:52 2008
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Wed, 13 Feb 2008 16:55:52 +1100
Subject: [antlr-interest] MismatchedTokenException and how to find
	errors in ANTLRWorks
In-Reply-To: <c8c997f40802121742pbea7542ldd4d12983ddcc9e2@mail.gmail.com>
References: <L544255A47E1D43afBF73972B3785860D.1202842861.scalix.temporal-wave.com*@MHS>
	<860747.11829.qm@web55104.mail.re4.yahoo.com>
	<20080212195844.1C8FC11ED29@www.antlr.org>
	<1202860707.47b232a37783e@clients.latnet.lv>
	<ebc876d70802121730t698f6022i2d4855bdae877755@mail.gmail.com>
	<c8c997f40802121742pbea7542ldd4d12983ddcc9e2@mail.gmail.com>
Message-ID: <ebc876d70802122155o66a594e6lb129f77d9ce98fc6@mail.gmail.com>

On Feb 13, 2008 12:42 PM, Darien Hager <darien.hager at etelos-inc.com> wrote:
>
> > Perhaps literals could be allowed in the parser but only to refer to
> tokens defined in the lexer, generating an error otherwise. That should
> alleviate many (if not all) of the issues while still allowing the stylistic
> choice some seem to want.
> >
>
> That makes sense to me. Parser-literals would mainly be a way to avoid
> remembering the token name and/or for readability.
>
> Although... could this cause problems with the tokenVocabulary option?
> Suppose someone wants to extend and build upon an existing (read-only) lexer
> grammar, but cannot define new literals in the parser.
>
You can't do that now. The only time you can define literals in the
parser is in a combined grammar, if you share a lexer between multiple
parsers you have to move all literals to the lexer (one of the other
reasons I avoid defining literals in the parser).

Tom.
>
> --
> Darien Hager
> Developer
> Etelos, Inc.
> darien at etelos.com
>
> http://www.etelos.com
> "Revolutionizing the way applications are developed, distributed and
> consumed."
>
> This e-mail message, including attachments, may contain confidential
> information for the sole use of the intended recipient(s). If you are not
> the intended recipient, then this is notice that any use, disclosure,
> dissemination, distribution or copying is strictly prohibited. If you have
> received this message in error please contact the sender by reply mail and
> destroy all copies of the original message.

From tbrandonau at gmail.com  Tue Feb 12 21:58:33 2008
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Wed, 13 Feb 2008 16:58:33 +1100
Subject: [antlr-interest] Problem with generated code
In-Reply-To: <20080213160532.000041a3@goanna>
References: <47B24361.6080502@ec.auckland.ac.nz>
	<20080213160532.000041a3@goanna>
Message-ID: <ebc876d70802122158y62ee305dtee731d0925313294@mail.gmail.com>

On Feb 13, 2008 4:05 PM, Mark Wright <markwright at internode.on.net> wrote:
> > So my question is,
> > why is the first action in this rule being brought up, even though it
> > has a dependency on the parameter passed to the rule?
>
> Hello Jamie,
>
> Because its a dis-ambiguating semantic predicate, ANTLR will hoist
> these into rules where it needs them to resolving ambiguities.
> Also ANTLR is likely to call it multiple times.
>
> > Is there a way to avoid this behaviour?
> >
> > Thanks,
> > Jamie Penney
> >
>
> No.  You will need to write the dis-ambiguating semantic predicate
> so that it obtains the information it needs from:
>
> - scanning looking at tokens, usually forwards, but sometimes
> I add a symbol with some information to a token and then look
> backwards for it.
>
> - looking up stuff in a symbol table.
>
> - or you could look in an ANTLR scope that is active everywhere the
> the dis-ambiguating semantic predicate could be hoisted to.

This is a problem with that method of handling contextual keywords. I
would use one of the other methods of handling this that do not cause
such problems (see the wiki entry).

Tom.
>
> Regards, Mark
>
> --
>

From stevagewp at gmail.com  Wed Feb 13 00:26:36 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Wed, 13 Feb 2008 19:26:36 +1100
Subject: [antlr-interest] Syntactic anti-predicates
In-Reply-To: <200802120720.m1C7Km6w011888@tach.newtechlaw.com>
References: <b8ceeef70802090953v5bb8d0b1p8d25215e1e8cf3a8@mail.gmail.com>
	<47ae1cd6.0a87460a.2c94.ffffb235SMTPIN_ADDED@mx.google.com>
	<b8ceeef70802110545r2dfc24b3u7cd9441d6e231685@mail.gmail.com>
	<200802120321.m1C3LLZI010982@tach.newtechlaw.com>
	<b8ceeef70802112119l196dd1b2k323d879eb9290921@mail.gmail.com>
	<200802120720.m1C7Km6w011888@tach.newtechlaw.com>
Message-ID: <b8ceeef70802130026i109e6e8an2cc9f2ffd70c8aab@mail.gmail.com>

On 2/12/08, Gerald B. Rosenberg <gbr at newtechlaw.com> wrote:
> table
>    @init{ boolean done = false; } :
>       LEFT_BRACE PIPE ws? table_format? NL
>            ( ( ws? PIPE RIGHT_BRACE )=> ws? PIPE RIGHT_BRACE {
> done=true; } | { !done }? table_line )+
> ;

Ah yes. Didn't think of that.


> Perhaps the cleaner solution would be to disambiguate the PIPE
> combinations in the lexer:

Possible, but probably more complex than the rules you give. I don't
really want to be matching |+ as a table token everywhere. And {| is
only a table start at the beginning of a line, for instance. I've
become a bit wary of using any lexer tokens at all for this stuff -
otherwise you end up having to right special rules whenever they're to
be treated as literal.

Steve

From micke.hovmoller at gmail.com  Wed Feb 13 01:09:19 2008
From: micke.hovmoller at gmail.com (=?ISO-8859-1?Q?Micke_Hovm=F6ller?=)
Date: Wed, 13 Feb 2008 10:09:19 +0100
Subject: [antlr-interest] funny error message
In-Reply-To: <c8c997f40802121839m6f794dd9m49d9c4bfdbc2d8e9@mail.gmail.com>
References: <BAYC1-PASMTP120E37A0AA5ECF245BA893F5240@CEZ.ICE>
	<D965CB0B-278D-4DF7-8F54-2E1C4579E5A8@cs.usfca.edu>
	<c8c997f40802121839m6f794dd9m49d9c4bfdbc2d8e9@mail.gmail.com>
Message-ID: <18b4fcc20802130109r55004348u57014b2c392f40ee@mail.gmail.com>

On Feb 13, 2008 3:39 AM, Darien Hager <darien.hager at etelos-inc.com> wrote:
>
> Well, with hindsight it looks like a pretty good error message.
>
> I guess it might hinge on the definition of "unreachable" or what component
> is doing the reaching. Two possible quick interpretations of the message:
>
> This token cannot be reached...
> 1) ...because it is an orphan not used by any parser rules.
> 2) ...because other lexer tokens will always match first.
>
> I think I might assume explanation #1, just from reading the error message,
> while it appears to be #2 that is happening.

I have stumbled upon this as well, and I also mistakenly assumed that
the error message referred to case 1, when in fact it did refer to
case #2.

I don't know if case #2 will be caught and reported, and if so, if it
gives the same error message. My suggestion would be to change the
error message to text #2 specifically. If #1 is caught, the message
should be different. (Maybe that is already the case?)

(Bad or incomplete error messages bothers me more than it should. I
can still get upset thinking about Oracle's classic "wrong number or
types of arguments". What lazy fool decided to save half an hour of
development time merging two separate errors into one?)

/Micke

From micke.hovmoller at gmail.com  Wed Feb 13 01:24:05 2008
From: micke.hovmoller at gmail.com (=?ISO-8859-1?Q?Micke_Hovm=F6ller?=)
Date: Wed, 13 Feb 2008 10:24:05 +0100
Subject: [antlr-interest] MismatchedTokenException and how to find
	errors in ANTLRWorks
In-Reply-To: <18b4fcc20802121005x3e97df50s9124afadd10cea07@mail.gmail.com>
References: <18b4fcc20802121005x3e97df50s9124afadd10cea07@mail.gmail.com>
Message-ID: <18b4fcc20802130124t6cf7604by7c80cb8474e17fb6@mail.gmail.com>

On Feb 12, 2008 7:05 PM, Micke Hovm?ller <micke.hovmoller at gmail.com> wrote:
>
> This leads to my questions:
> 1. Is there a more extensive list of error messages than the fairly
> short one in the ANTLR reference book?
>
> 2. What is the easiest way to find which tokens are referred to by, in
> this case, 5 and 31? If I generate the grammer, I can look in the
> .token file, but that seems tedious. Can't I find that inside
> ANTLRWorks somewhere?

Thanks for the discussion regarding this issue. I changed most of my
literals to tokens and made great progress.

However, I still don't know the answers to these two questions. Can I
get any further help from inside ANTLRWorks? The reference book
indicates that loads of context is stored and available for the error
message, but I can't find it.

/Micke

From antlr at zavalon.com  Wed Feb 13 01:38:19 2008
From: antlr at zavalon.com (Nev)
Date: Wed, 13 Feb 2008 20:38:19 +1100
Subject: [antlr-interest] How to find missing tokens in eclipse.
Message-ID: <6hhg72$1h4sga@ipmail04.adl2.internode.on.net>

This is some what along the same lines of "MismatchedTokenException and how
to finderrors in ANTLRWorks"

 

I am writing an Eclipse plug-in and having trouble verifying that there are
no missing tokens (or miss spelled token names)

What I am seeing is that if the token is *not* required by the source that
is being parsed, then there is no indication that there is a miss match
between lexer and parser.

Is there a way to force errors if there is a missing token at compile time,
or is there a utility that can check for missing tokens.

 

As a comment on previous post, I would also like to be able to use literals
in the parser for readability and for better error messages.

In both case I would rather see '++' then PLUS_PLUS. But also would like an
error report at compile time if the literal is missing in the lexer.

 

A second problem I have is build order. This is most likely to be a short
coming in the Eclipse plug-in I am using,

but I find that I need to modify and save each of the grammar files in
sequence, lexer, parser, tree to ensure token changes are propagated

from the lexer each of the .tokens files.

 

Regards

Nev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080213/54c210a0/attachment.html 

From mark.edgeworth at scarletcode.co.uk  Wed Feb 13 02:11:33 2008
From: mark.edgeworth at scarletcode.co.uk (Mark Edgeworth)
Date: Wed, 13 Feb 2008 10:11:33 -0000
Subject: [antlr-interest] Eclipse support for the latest versions of ANTLR
Message-ID: <000c01c86e28$cfba2810$0300a8c0@chesterford>

Hi again,

 

I use Eclipse almost exclusively for all my development work, most of which
is in Java.  I have been reasonably successful in using the ANTLR plugin
from Scott Stanchfield, but the version of ANTLR in the plugin is 3.0.1 and
I'd like to move on.  However, looks like he got upset over something and is
not playing ANTLR anymore (the plugin source is not available for a rebuild
either).  There is another plugin from 'Certiv' which again uses ANTLR 3.0.1
in the plugin (as of 0.30.beta).

 

Any suggestions?  

 

Incidentally, I hardly ever use ANTLRWorks as it does not play well with
Eclipse.  Are there plans to port it?

 

Mark Edgeworth 

 

Incoras Solutions Ltd

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080213/901830f3/attachment.html 

From JALuber at gmx.de  Wed Feb 13 04:15:22 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Wed, 13 Feb 2008 13:15:22 +0100
Subject: [antlr-interest] CSharp API
In-Reply-To: <47B21917.40601@ec.auckland.ac.nz>
References: <47B21917.40601@ec.auckland.ac.nz>
Message-ID: <20080213121522.235000@gmx.net>

> Hi All,
> 
> The link to the C# API seems to be dead. Does anyone know where I can 
> find a copy of this?

There was never a working copy. Try using Sandcastle on CodePlex on the project files, when having generated XML documentation.

Johannes
-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger

From andersen at ontologyworks.com  Wed Feb 13 07:55:45 2008
From: andersen at ontologyworks.com (Bill Andersen)
Date: Wed, 13 Feb 2008 10:55:45 -0500
Subject: [antlr-interest] Tree grammar code gen problem
Message-ID: <DE66C5B9-9C3C-4BDF-A77D-4A4E212A5B3C@ontologyworks.com>

Folks,

I'm doing my first ANTLR (3) tree grammar and am running into a  
problem with generated Java code.  The grammar is a tree grammar meant  
to output another AST.

The grammar file options look like:

options {
	language=Java;	
	tokenVocab=NFL;
	output=AST;	
	TokenLabelType=CommonToken;
	ASTLabelType=CommonTree;
}

Some sample generated Java code I'm seeing looks like this:

protected TreeAdaptor adaptor = new CommonTreeAdaptor();

public final term_return term() throws RecognitionException {
         term_return retval = new term_return();
         retval.start = input.LT(1);

         CommonTree root_0 = null;

         CommonTree QSTRING1=null;
	...

Later in this method I'm seeing

         QSTRING1_tree = (CommonTree)adaptor.create(QSTRING1);

But TreeAdaptor.create has only one one-arg version and that is  
supposed to take a Token.

Any idea what's going on?  I admit I don't have much experience with  
this, but I've looked on the web and in the ANTLR 3 book with no  
luck.  Any help appreciated!

	.billl



From jaluber at gmx.de  Wed Feb 13 09:34:43 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Wed, 13 Feb 2008 18:34:43 +0100
Subject: [antlr-interest] Tree grammar code gen problem
In-Reply-To: <DE66C5B9-9C3C-4BDF-A77D-4A4E212A5B3C@ontologyworks.com>
References: <DE66C5B9-9C3C-4BDF-A77D-4A4E212A5B3C@ontologyworks.com>
Message-ID: <47B32A33.3080501@gmx.de>

Bill Andersen schrieb:
> Any idea what's going on?  I admit I don't have much experience with 
> this, but I've looked on the web and in the ANTLR 3 book with no luck.  
> Any help appreciated!

Did you use a current intermediate build? ANTLR 3.0.1 doesn't support 
tree rewriting yet.

Johannes

From jaluber at gmx.de  Wed Feb 13 09:39:22 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Wed, 13 Feb 2008 18:39:22 +0100
Subject: [antlr-interest] Direct access and manipulation of tokens in
 existing trees
In-Reply-To: <47B1C88B.1060008@shaw.ca>
References: <47B1C88B.1060008@shaw.ca>
Message-ID: <47B32B4A.3090203@gmx.de>

Mark Heieis schrieb:
> Is there a way to get direct access to tokens of existing trees and then 
> maintain the reference points to those tokens so that they can be changed?
> 
> The output of the tree is a formula which has placeholder tokens (eg X0) 
> for the input values. What I would like to do is replace a placeholder 
> token  with actual values. Because I have to iterate through lots of 
> values using the same formula (tree), rather than reprocess the whole 
> input formula over and over, it would seem to make more sense to just 
> use a placeholder token and replace that before sending it on for eval. 
> This is assuming the overhead to find and change a token directly is 
> more efficient than just updating the raw input and reprocessing from 
> the beginning again.
> 
> I've looked at TreeWizard, which seems to have what I need, but can't 
> seem to figure out how to get a TreeAdapter from an existing tree which 
> is needed to create a TreeWizard, and whether changes to it will be 
> reflected in the original tree.
> 
> Hopefully, that all makes sense. Any pointers would be much appreciated.

You have to create a special token class, which is basically a 
self-dereferencing pointer. Any access to the actual value is delegated 
towards the real token. In other words, there is one place alone where 
changes have to be made. It should be a good idea to create a registry, 
which retrieves a token based on a number.

Johannes

From jimi at temporal-wave.com  Wed Feb 13 09:38:24 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 13 Feb 2008 09:38:24 -0800
Subject: [antlr-interest] MismatchedTokenException and how to find
	errors in ANTLRWorks
In-Reply-To: <1202860707.47b232a37783e@clients.latnet.lv>
Message-ID: <"L8E250C16E04A4149964C9B10DE5FCBF4.1202925825.scalix.temporal-wave.com*"@MHS>



> -----Original Message-----
> From: Guntis Ozols [mailto:guntiso at latnet.lv]


> > 2. It's too easy to forget that each quoted string produces a
> > lexer rule (which may conflict with other rules), making it harder
> > to find the source of ambiguity problems.  In addition, "'x' 'y'"
> > is not the same as "'xy'" in the parser, though it is in the
> > lexer; this can cause confusion.
> 
> Sure it is confusing. I fell into this 'xy' trap, too.
> If COLON is defined and STAR is defined, then creating
> another token for ':*' in a *parser* rule is confusing.
> It should be fixed in antlr.

What should be fixed? 'x' 'y' IS something different to the parser than 
the lexer! ':' '*' and ':*' ARE different tokens.

> At least, antlr should emit 'anonymous token' warning[s].
> 

This post is a classic example of the problem. I am not trying to single 
out the poster, just point out the fact that the literals in the parser 
create great confusion when your knowledge of the tool is low, and I 
don't think you should use this until you have a better command of the 
tool. One certainly should not ask for things to be 'fixed'

There isn't anything wrong with the tool, it is doing what you tell it 
to do. The token isnt anonymous, it is called T66 or whatever, the 
runtime doesn't know that you created it by specifying it in the parser. 
So, I don't see why "anonymous token" would help you at all.

> I prefer literals because of simplicity / readability.

However, you are showing in fact that if anything, it is more 
complicated, not simpler. Readability is subjective. Is ':' anymore 
readable than COLON once you have the simple rule that words starting 
with Upper Case are tokens from the lexer?

> The tool needs to be patched, not users.

A tool should strive to be as simple as possible, but no simpler :-) 
While that statement makes sense, you are an under an obligation to 
yourself to try to make sure you understand the tool too. Ironically, my 
statement that literals in parsers are confusing is based entirely upon 
your stated premise.

Jim
 



From jimi at temporal-wave.com  Wed Feb 13 09:42:38 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 13 Feb 2008 09:42:38 -0800
Subject: [antlr-interest] Problem with generated code
In-Reply-To: <47B24361.6080502@ec.auckland.ac.nz>
Message-ID: <"L1436924C3724432dA23F1F1056D2B7BB.1202926079.scalix.temporal-wave.com*"@MHS>

The predicates can be hoisted (this is a feature), hence the identifier 
is not available in the context that the predicate runs. You can avoid 
this by using a scope:

xxx[String ident]
scope
{
  String identifier;
}
@init
{
	$xxx::identifier = ident;
}

...
:

> -----Original Message-----
> From: Jamie Penney [mailto:jpen054 at ec.auckland.ac.nz]
> Sent: Tuesday, February 12, 2008 5:10 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Problem with generated code
> 
> Hi All,
> 
> I am having an issue that I wonder if someone could help me with. I
> have
> a rule:
> 
> // For contextual keywords like get, set and yield
> contextual_keyword[string identifier]
>     :    { input.LT(1).Text == $identifier }? IDENTIFIER
>         -> {$identifier == "from"}? FROM[$IDENTIFIER]    // Transform
> all known contextual keywords into
>         -> {$identifier == "let"}? LET[$IDENTIFIER]        // their
> corresponding imaginary token
> ......................
>         -> {$identifier == "remove"}? REMOVE[$IDENTIFIER]
>         -> IDENTIFIER    // For unknown ones
>     ;
> 
> That seems to first action seems to be pulled up into whatever other
> rules use this one in the generated code. So I end up with this sort 
of
> thing:
>                     int alt80 = 2;
>                     int LA80_0 = input.LA(1);
> 
>                     if ( (LA80_0 == IDENTIFIER) )
>                     {
>                         int LA80_1 = input.LA(2);
> 
>                         if ( ( input.LT(1).Text == identifier ) )
>                         {
>                             alt80 = 1;
>                         }
> 
> 
>                     }
> 
> Which won't work because identifier hasn't been defined yet. The 
actual
> call to contextual_keyword() doesn't happen until well after this
> section, as it is further down the rule tree. So my question is, why 
is
> the first action in this rule being brought up, even though it has a
> dependency on the parameter passed to the rule? Is there a way to 
avoid
> this behaviour?
> 
> Thanks,
> Jamie Penney
> 
> --
> Jamie Penney
> 
> http://www.jamiepenney.co.nz



From jimi at temporal-wave.com  Wed Feb 13 09:45:19 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 13 Feb 2008 09:45:19 -0800
Subject: [antlr-interest] funny error message
In-Reply-To: <c8c997f40802121839m6f794dd9m49d9c4bfdbc2d8e9@mail.gmail.com>
Message-ID: <"LBB12FB1CAA26412e90149447B9CAA9DE.1202926240.scalix.temporal-wave.com*"@MHS>

 

 

From: Darien Hager [mailto:darien.hager at etelos-inc.com] 
Sent: Tuesday, February 12, 2008 6:40 PM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] funny error message

 

 

Well, with hindsight it looks like a pretty good error message.

I guess it might hinge on the definition of "unreachable" or what
component is doing the reaching. Two possible quick interpretations of
the message:

This token cannot be reached...
1) ...because it is an orphan not used by any parser rules. 

The lexer and parser are not connected. The lexer just has to tokenize
and does not care if the consumer (which may not be a parser) knows
about the token.


2) ...because other lexer tokens will always match first.  

I think I might assume explanation #1, just from reading the error
message, while it appears to be #2 that is happening.


But, as #1 has no meaning, then there is only #2 to consider J

Jim


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080213/55625f3e/attachment.html 

From antlr at shmuelhome.mine.nu  Wed Feb 13 10:31:38 2008
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Wed, 13 Feb 2008 20:31:38 +0200
Subject: [antlr-interest] MismatchedTokenException and how to find
 errors in ANTLRWorks
In-Reply-To: <"L8E250C16E04A4149964C9B10DE5FCBF4.1202925825.scalix.temporal-wave.com*"@MHS>
References: <"L8E250C16E04A4149964C9B10DE5FCBF4.1202925825.scalix.temporal-wave.com*"@MHS>
Message-ID: <47B3378A.8040001@shmuelhome.mine.nu>

Jim Idle wrote:
> ....
>
> There isn't anything wrong with the tool, it is doing what you tell it 
> to do. The token isnt anonymous, it is called T66 or whatever, the 
> runtime doesn't know that you created it by specifying it in the parser. 
> So, I don't see why "anonymous token" would help you at all.
>
> .....
>> The tool needs to be patched, not users.
>>     
>
> A tool should strive to be as simple as possible, but no simpler :-) 
> While that statement makes sense, you are an under an obligation to 
> yourself to try to make sure you understand the tool too. Ironically, my 
> statement that literals in parsers are confusing is based entirely upon 
> your stated premise.
>
> Jim
I thought that another voice should jump in here. Even though Jim and I 
are usually on different sides of usability arguments (Jim takes the 
side of the ANTLR developer and I take the side of the ANTLR rule 
writer), I totally agree with him here. Not only is ANTLR doing what you 
told it to do, it is doing what you would want it to do if you were more 
experienced with the tool. Personally, I am amazed that ANTLR can 
distinguish between '+', '=', and '+='. Criticism of the tool should be 
postponed until you truly understand what the tool is doing.
ANTLR is a parser and lexer generator (okay, it is other things too). 
The fact that ANTLR lets you implicitly generate lexer rules by using 
literals in the parser does not change the fact that they are lexer 
rules and must conform to the lexer paradigm.

Shmuel


From tbrandonau at gmail.com  Wed Feb 13 10:45:08 2008
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Thu, 14 Feb 2008 05:45:08 +1100
Subject: [antlr-interest] Problem with generated code
In-Reply-To: <L1436924C3724432dA23F1F1056D2B7BB.1202926079.scalix.temporal-wave.com*@MHS>
References: <47B24361.6080502@ec.auckland.ac.nz>
	<L1436924C3724432dA23F1F1056D2B7BB.1202926079.scalix.temporal-wave.com*@MHS>
Message-ID: <ebc876d70802131045s50e93ba9sf7eb3afddc3a7b6e@mail.gmail.com>

On Feb 14, 2008 4:42 AM, Jim Idle <jimi at temporal-wave.com> wrote:
> The predicates can be hoisted (this is a feature), hence the identifier
> is not available in the context that the predicate runs. You can avoid
> this by using a scope:
>
> xxx[String ident]
> scope
> {
>  String identifier;
> }
> @init
> {
>        $xxx::identifier = ident;
> }
>
> ...
> :
Isn't that going to be hoisted into contexts prior to entering the
rule and so before the @init action where identifier will have an
incorrect value?

Tom.
>
>
>
>
> > -----Original Message-----
> > From: Jamie Penney [mailto:jpen054 at ec.auckland.ac.nz]
> > Sent: Tuesday, February 12, 2008 5:10 PM
> > To: antlr-interest at antlr.org
> > Subject: [antlr-interest] Problem with generated code
> >
> > Hi All,
> >
> > I am having an issue that I wonder if someone could help me with. I
> > have
> > a rule:
> >
> > // For contextual keywords like get, set and yield
> > contextual_keyword[string identifier]
> >     :    { input.LT(1).Text == $identifier }? IDENTIFIER
> >         -> {$identifier == "from"}? FROM[$IDENTIFIER]    // Transform
> > all known contextual keywords into
> >         -> {$identifier == "let"}? LET[$IDENTIFIER]        // their
> > corresponding imaginary token
> > ......................
> >         -> {$identifier == "remove"}? REMOVE[$IDENTIFIER]
> >         -> IDENTIFIER    // For unknown ones
> >     ;
> >
> > That seems to first action seems to be pulled up into whatever other
> > rules use this one in the generated code. So I end up with this sort
> of
> > thing:
> >                     int alt80 = 2;
> >                     int LA80_0 = input.LA(1);
> >
> >                     if ( (LA80_0 == IDENTIFIER) )
> >                     {
> >                         int LA80_1 = input.LA(2);
> >
> >                         if ( ( input.LT(1).Text == identifier ) )
> >                         {
> >                             alt80 = 1;
> >                         }
> >
> >
> >                     }
> >
> > Which won't work because identifier hasn't been defined yet. The
> actual
> > call to contextual_keyword() doesn't happen until well after this
> > section, as it is further down the rule tree. So my question is, why
> is
> > the first action in this rule being brought up, even though it has a
> > dependency on the parameter passed to the rule? Is there a way to
> avoid
> > this behaviour?
> >
> > Thanks,
> > Jamie Penney
> >
> > --
> > Jamie Penney
> >
> > http://www.jamiepenney.co.nz
>
>
>

From jimi at temporal-wave.com  Wed Feb 13 10:22:15 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 13 Feb 2008 10:22:15 -0800
Subject: [antlr-interest] MismatchedTokenException and how to find
	errors in ANTLRWorks
In-Reply-To: <47B3378A.8040001@shmuelhome.mine.nu>
Message-ID: <"L73627F07E3744dc4BE6CDDDF8A764BD1.1202928457.scalix.temporal-wave.com*"@MHS>



> -----Original Message-----
> From: shmuel siegel [mailto:antlr at shmuelhome.mine.nu]
> Sent: Wednesday, February 13, 2008 10:32 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] MismatchedTokenException and how to find
> errors in ANTLRWorks
> 
> Jim Idle wrote:
> > ....
> >
> > There isn't anything wrong with the tool, it is doing what you tell
> it
> > to do. The token isnt anonymous, it is called T66 or whatever, the
> > runtime doesn't know that you created it by specifying it in the
> parser.
> > So, I don't see why "anonymous token" would help you at all.
> >
> > .....
> >> The tool needs to be patched, not users.
> >>
> >
> > A tool should strive to be as simple as possible, but no simpler :-)
> > While that statement makes sense, you are an under an obligation to
> > yourself to try to make sure you understand the tool too. 
Ironically,
> my
> > statement that literals in parsers are confusing is based entirely
> upon
> > your stated premise.
> >
> > Jim
> I thought that another voice should jump in here. Even though Jim and 
I
> are usually on different sides of usability arguments (Jim takes the
> side of the ANTLR developer and I take the side of the ANTLR rule
> writer), 

Well, I am not too sure about that statement being universally true, or 
even true that often. The reason I am saying that the literals are 
confusing is out of sympathy for grammar writers (one of which I am 
dont forget ;-).

> I totally agree with him here.

And there you go ;-)

Jim


From antlr at mirality.co.nz  Wed Feb 13 10:47:44 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 14 Feb 2008 07:47:44 +1300
Subject: [antlr-interest] MismatchedTokenException and how to find
 errors in ANTLRWorks
In-Reply-To: <47B233CC.6070703@shmuelhome.mine.nu>
References: <309267.64792.qm@web55109.mail.re4.yahoo.com>
	<47B233CC.6070703@shmuelhome.mine.nu>
Message-ID: <20080213184819.F37A611EE63@www.antlr.org>

At 13:03 13/02/2008, shmuel siegel wrote:
 >In my testing, I have found that I need to define the literal
 >tokens before the corresponding regular expressions. Literals
 >seem to do this automatically.

If you define your literal tokens in the "tokens" block, it has 
the same effect.


From jpen054 at ec.auckland.ac.nz  Wed Feb 13 11:14:03 2008
From: jpen054 at ec.auckland.ac.nz (Jamie Penney)
Date: Thu, 14 Feb 2008 08:14:03 +1300
Subject: [antlr-interest] Problem with generated code
In-Reply-To: <ebc876d70802131045s50e93ba9sf7eb3afddc3a7b6e@mail.gmail.com>
References: <47B24361.6080502@ec.auckland.ac.nz>	<L1436924C3724432dA23F1F1056D2B7BB.1202926079.scalix.temporal-wave.com*@MHS>
	<ebc876d70802131045s50e93ba9sf7eb3afddc3a7b6e@mail.gmail.com>
Message-ID: <47B3417B.5080906@ec.auckland.ac.nz>

Thanks for the replies everyone,

What I ended up doing was changing this into a number of different 
rules, rather than one rule for all keywords.
This created compilable code, but I don't know if it is correct. I kept 
the old code, so should I go back and
change this to use scopes?

Cheers,
Jamie Penney

Thomas Brandon wrote:
> On Feb 14, 2008 4:42 AM, Jim Idle <jimi at temporal-wave.com> wrote:
>   
>> The predicates can be hoisted (this is a feature), hence the identifier
>> is not available in the context that the predicate runs. You can avoid
>> this by using a scope:
>>
>> xxx[String ident]
>> scope
>> {
>>  String identifier;
>> }
>> @init
>> {
>>        $xxx::identifier = ident;
>> }
>>
>> ...
>> :
>>     
> Isn't that going to be hoisted into contexts prior to entering the
> rule and so before the @init action where identifier will have an
> incorrect value?
>
> Tom.
>   
>>
>>
>>     
>>> -----Original Message-----
>>> From: Jamie Penney [mailto:jpen054 at ec.auckland.ac.nz]
>>> Sent: Tuesday, February 12, 2008 5:10 PM
>>> To: antlr-interest at antlr.org
>>> Subject: [antlr-interest] Problem with generated code
>>>
>>> Hi All,
>>>
>>> I am having an issue that I wonder if someone could help me with. I
>>> have
>>> a rule:
>>>
>>> // For contextual keywords like get, set and yield
>>> contextual_keyword[string identifier]
>>>     :    { input.LT(1).Text == $identifier }? IDENTIFIER
>>>         -> {$identifier == "from"}? FROM[$IDENTIFIER]    // Transform
>>> all known contextual keywords into
>>>         -> {$identifier == "let"}? LET[$IDENTIFIER]        // their
>>> corresponding imaginary token
>>> ......................
>>>         -> {$identifier == "remove"}? REMOVE[$IDENTIFIER]
>>>         -> IDENTIFIER    // For unknown ones
>>>     ;
>>>
>>> That seems to first action seems to be pulled up into whatever other
>>> rules use this one in the generated code. So I end up with this sort
>>>       
>> of
>>     
>>> thing:
>>>                     int alt80 = 2;
>>>                     int LA80_0 = input.LA(1);
>>>
>>>                     if ( (LA80_0 == IDENTIFIER) )
>>>                     {
>>>                         int LA80_1 = input.LA(2);
>>>
>>>                         if ( ( input.LT(1).Text == identifier ) )
>>>                         {
>>>                             alt80 = 1;
>>>                         }
>>>
>>>
>>>                     }
>>>
>>> Which won't work because identifier hasn't been defined yet. The
>>>       
>> actual
>>     
>>> call to contextual_keyword() doesn't happen until well after this
>>> section, as it is further down the rule tree. So my question is, why
>>>       
>> is
>>     
>>> the first action in this rule being brought up, even though it has a
>>> dependency on the parameter passed to the rule? Is there a way to
>>>       
>> avoid
>>     
>>> this behaviour?
>>>
>>> Thanks,
>>> Jamie Penney
>>>
>>> --
>>> Jamie Penney
>>>
>>> http://www.jamiepenney.co.nz
>>>       
>>
>>     

-- 
Jamie Penney

http://www.jamiepenney.co.nz

From parrt at cs.usfca.edu  Wed Feb 13 11:19:55 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 13 Feb 2008 11:19:55 -0800
Subject: [antlr-interest] funny error message
Message-ID: <4E35B1AA-0982-4E6A-8A48-7133E7760851@cs.usfca.edu>

Thanks guys.  good work.  I have change the error msg templates:

UNREACHABLE_ALTS(alts) ::= <<
The following alternatives can never be matched: <alts; separator=",">< 
\n>
 >>

UNREACHABLE_TOKENS(tokens) ::= <<
The following token definitions can never be matched because prior  
tokens match the same input: <tokens; separator=",">
 >>

pushed to depot.

Ter

From jaluber at gmx.de  Wed Feb 13 11:21:42 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Wed, 13 Feb 2008 20:21:42 +0100
Subject: [antlr-interest] Problem with generated code
In-Reply-To: <47B3417B.5080906@ec.auckland.ac.nz>
References: <47B24361.6080502@ec.auckland.ac.nz>	<L1436924C3724432dA23F1F1056D2B7BB.1202926079.scalix.temporal-wave.com*@MHS>	<ebc876d70802131045s50e93ba9sf7eb3afddc3a7b6e@mail.gmail.com>
	<47B3417B.5080906@ec.auckland.ac.nz>
Message-ID: <47B34346.6060204@gmx.de>

Jamie Penney schrieb:
> Thanks for the replies everyone,
> 
> What I ended up doing was changing this into a number of different 
> rules, rather than one rule for all keywords.
> This created compilable code, but I don't know if it is correct. I kept 
> the old code, so should I go back and
> change this to use scopes?

Using scopes reduces the code duplication.

Johannes

From tbrandonau at gmail.com  Wed Feb 13 11:37:57 2008
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Thu, 14 Feb 2008 06:37:57 +1100
Subject: [antlr-interest] Problem with generated code
In-Reply-To: <47B34346.6060204@gmx.de>
References: <47B24361.6080502@ec.auckland.ac.nz>
	<L1436924C3724432dA23F1F1056D2B7BB.1202926079.scalix.temporal-wave.com*@MHS>
	<ebc876d70802131045s50e93ba9sf7eb3afddc3a7b6e@mail.gmail.com>
	<47B3417B.5080906@ec.auckland.ac.nz> <47B34346.6060204@gmx.de>
Message-ID: <ebc876d70802131137s66374abal461066e8651c07fd@mail.gmail.com>

On Feb 14, 2008 6:21 AM, Johannes Luber <jaluber at gmx.de> wrote:
> Jamie Penney schrieb:
> > Thanks for the replies everyone,
> >
> > What I ended up doing was changing this into a number of different
> > rules, rather than one rule for all keywords.
> > This created compilable code, but I don't know if it is correct. I kept
> > the old code, so should I go back and
> > change this to use scopes?
>
> Using scopes reduces the code duplication.
>
> Johannes
>
Not really, given the code the OP used. The methods are:
1) Keywords in lexer, ident_or_keyword parser rule
One lexer rule and alternative in parser rule per keyword.
2) Hardcoded parser rules checking IDENT token text
One parser rule per keyword.
3) OPs method
Alternative in contextual_keyword per keyword

1 requires changes in two places, 2 and 3 are pretty similar.
1 will probably be the fastest method as it won't require predicates.
3 will be slightly slower than 2 in at least some cases as it has to
run through the predicates to get into contextual_keyword and then
again in contextual_keyword. Though there's probably not much
practical difference between any of them.

If you want to go back to scopes you'd need to check the generated
code to ensure that scopes do solve the problem.

Tom.

From tbrandonau at gmail.com  Wed Feb 13 11:43:54 2008
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Thu, 14 Feb 2008 06:43:54 +1100
Subject: [antlr-interest] [antlr-dev] ANTLRWorks ANTLR embedding
In-Reply-To: <727127.9568.qm@web55111.mail.re4.yahoo.com>
References: <727127.9568.qm@web55111.mail.re4.yahoo.com>
Message-ID: <ebc876d70802131143r357b60deg5ca0ec2a26c41b6e@mail.gmail.com>

You can just replace the included ANTLR JAR in the ANTLRWorks JAR (or
run an extracted ANTLRWorks). Seems better for bleeding edge users to
do this than the extra effort of writing\maintaining code pointing it
at the external JAR and requiring all users to set this up.

Tom.
On Feb 14, 2008 6:28 AM, Matt Benson <gudnabrsam at yahoo.com> wrote:
> Would it be possible to ship ANTLRWorks such that it
> includes and references a separate ANTLR jar rather
> than embedding the contents of an ANTLR jar?  Then it
> would be possible for bleeding edge depot users to
> drop in an updated ANTLR jar (I expect this would
> usually be compatible).
>
> WDYT?
>
> -Matt
>
>
>       ____________________________________________________________________________________
> Never miss a thing.  Make Yahoo your home page.
> http://www.yahoo.com/r/hs
> _______________________________________________
> antlr-dev mailing list
> antlr-dev at antlr.org
> http://www.antlr.org/mailman/listinfo/antlr-dev
>

From gudnabrsam at yahoo.com  Wed Feb 13 13:02:55 2008
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Wed, 13 Feb 2008 13:02:55 -0800 (PST)
Subject: [antlr-interest] [antlr-dev] ANTLRWorks ANTLR embedding
In-Reply-To: <ebc876d70802131143r357b60deg5ca0ec2a26c41b6e@mail.gmail.com>
Message-ID: <985958.1269.qm@web55106.mail.re4.yahoo.com>


--- Thomas Brandon <tbrandonau at gmail.com> wrote:

> You can just replace the included ANTLR JAR in the
> ANTLRWorks JAR (or
> run an extracted ANTLRWorks). Seems better for
> bleeding edge users to
> do this than the extra effort of writing\maintaining
> code pointing it
> at the external JAR and requiring all users to set
> this up.

I forgot that the aim was probably to have everything
available as a single jar.  ;)  Although the
Class-Path attribute might help an antlrworks.jar find
an antlr.jar in the same directory.  I suppose I can
try to doctor my OS X install; either way I still end
up with a convenient single point of launch.

-Matt

> 
> Tom.
> On Feb 14, 2008 6:28 AM, Matt Benson
> <gudnabrsam at yahoo.com> wrote:
> > Would it be possible to ship ANTLRWorks such that
> it
> > includes and references a separate ANTLR jar
> rather
> > than embedding the contents of an ANTLR jar?  Then
> it
> > would be possible for bleeding edge depot users to
> > drop in an updated ANTLR jar (I expect this would
> > usually be compatible).
> >
> > WDYT?
> >
> > -Matt
> >
> >
> >      
>
____________________________________________________________________________________
> > Never miss a thing.  Make Yahoo your home page.
> > http://www.yahoo.com/r/hs
> > _______________________________________________
> > antlr-dev mailing list
> > antlr-dev at antlr.org
> >
> http://www.antlr.org/mailman/listinfo/antlr-dev
> >
> 



      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ 


From lgcraymer at yahoo.com  Wed Feb 13 12:16:47 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Wed, 13 Feb 2008 12:16:47 -0800 (PST)
Subject: [antlr-interest] MismatchedTokenException and how to find
	errors in ANTLRWorks
Message-ID: <382629.73435.qm@web55901.mail.re3.yahoo.com>

I've learned that "the customer is always right" is good policy on bug reports--not that he is right about the specifics, but that he is usually right that "there is a problem".  As Guntis points out, in this case it is not the literals that are the problem but the confusion arising from combined grammars which hide the lexer.  I argued with Ter against having combined grammars for that reason; where ANTLR historically has differed from other "upscale" translation packages is in its "one grammar, one pass" approach, especially for tree grammars.  However, Ter and I agreed to disagree on this issue; the result is that support for combined grammars should include more detailed documentation on the subject of literals and their use.   Jim's approach of discouraging beginners from using them has to be incorrect; literals are not an advanced feature but a user convenience if they are properly documented.

--Loring

----- Original Message ----
> From: shmuel siegel <antlr at shmuelhome.mine.nu>
> To: antlr-interest at antlr.org
> Sent: Wednesday, February 13, 2008 10:31:38 AM
> Subject: Re: [antlr-interest] MismatchedTokenException and how to find errors in ANTLRWorks
> 
> Jim Idle wrote:
> > ....
> >
> > There isn't anything wrong with the tool, it is doing what you tell it 
> > to do. The token isnt anonymous, it is called T66 or whatever, the 
> > runtime doesn't know that you created it by specifying it in the parser. 
> > So, I don't see why "anonymous token" would help you at all.
> >
> > .....
> >> The tool needs to be patched, not users.
> >>     
> >
> > A tool should strive to be as simple as possible, but no simpler :-) 
> > While that statement makes sense, you are an under an obligation to 
> > yourself to try to make sure you understand the tool too. Ironically, my 
> > statement that literals in parsers are confusing is based entirely upon 
> > your stated premise.
> >
> > Jim
> I thought that another voice should jump in here. Even though Jim and I 
> are usually on different sides of usability arguments (Jim takes the 
> side of the ANTLR developer and I take the side of the ANTLR rule 
> writer), I totally agree with him here. Not only is ANTLR doing what you 
> told it to do, it is doing what you would want it to do if you were more 
> experienced with the tool. Personally, I am amazed that ANTLR can 
> distinguish between '+', '=', and '+='. Criticism of the tool should be 
> postponed until you truly understand what the tool is doing.
> ANTLR is a parser and lexer generator (okay, it is other things too). 
> The fact that ANTLR lets you implicitly generate lexer rules by using 
> literals in the parser does not change the fact that they are lexer 
> rules and must conform to the lexer paradigm.
> 
> Shmuel
> 
> 




      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ 


From jimi at temporal-wave.com  Wed Feb 13 13:57:42 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 13 Feb 2008 13:57:42 -0800
Subject: [antlr-interest] MismatchedTokenException and how to find
	errors in ANTLRWorks
In-Reply-To: <382629.73435.qm@web55901.mail.re3.yahoo.com>
Message-ID: <"L24064BF2660C4e6a824DD1003EBA512A.1202941385.scalix.temporal-wave.com*"@MHS>



> -----Original Message-----
> From: Loring Craymer [mailto:lgcraymer at yahoo.com]
> Sent: Wednesday, February 13, 2008 12:17 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] MismatchedTokenException and how to find
> errors in ANTLRWorks
> 
> I've learned that "the customer is always right" is good policy on bug
> reports--not that he is right about the specifics, but that he is
> usually right that "there is a problem". 

I dont think that anyone has said anything different to this, 
including myself. However, what I think is wrong is that they are there 
in the first place. Others think they are a good idea, however I don't 
see any good way to explain it to new users when all they want to do is 
start hacking away (as we all do, with everything).

> As Guntis points out, in this
> case it is not the literals that are the problem but the confusion
> arising from combined grammars which hide the lexer. 

> Jim's
> approach of discouraging beginners from using them has to be 
incorrect;
> literals are not an advanced feature but a user convenience if they 
are
> properly documented.

If you think that all that is wrong is they are not documented properly, 
then there is an easy solution that you can provide, being to document 
them. Personally, I think that new users wont read that documentation 
either at all or at least properly and will be in exactly the same 
situation. If I had a vote, I would vote to remove them altogether. I 
never said that they were an advanced feature, but that the issues are 
too confusing for new users hence only users with a bit more knowledge 
of how it flows together can use them without confusing their selves.

In the absence of any other options, the 'approach' to suggest not using 
them has helped quite a few people, and as such I must disagree that it 
is somehow wrong. 

Jim 
 



From jpen054 at ec.auckland.ac.nz  Wed Feb 13 18:57:03 2008
From: jpen054 at ec.auckland.ac.nz (Jamie Penney)
Date: Thu, 14 Feb 2008 15:57:03 +1300
Subject: [antlr-interest] RewriteEmptyStreamException
Message-ID: <47B3ADFF.8010000@ec.auckland.ac.nz>

Hi All,
I am getting the following exception when executing a rewrite rule:

Antlr.Runtime.Tree.RewriteEmptyStreamException: rule type
   at Antlr.Runtime.Tree.RewriteRuleElementStream`1._Next()
   at 
Antlr.Runtime.Tree.RewriteRuleSubtreeStream.FetchObject(ProcessHandler ph)
   at Antlr.Runtime.Tree.RewriteRuleSubtreeStream.NextTree()
   at Kerriv.CSharpML.CSharp3ParserSyntax.using_namespace_directive() in 
....


This is cause by the code generated from the following rule:
using_namespace_directive
    :    USING type SEMICOLON -> ^(USING type SEMICOLON)
    ;

Any ideas as to where I should start with this? The documentation and 
Google haven't given me any clues.

Thanks,
Jamie Penney

From jpen054 at ec.auckland.ac.nz  Wed Feb 13 19:01:52 2008
From: jpen054 at ec.auckland.ac.nz (Jamie Penney)
Date: Thu, 14 Feb 2008 16:01:52 +1300
Subject: [antlr-interest] RewriteEmptyStreamException
In-Reply-To: <47B3ADFF.8010000@ec.auckland.ac.nz>
References: <47B3ADFF.8010000@ec.auckland.ac.nz>
Message-ID: <47B3AF20.1060609@ec.auckland.ac.nz>

Forgot to mention that I am using the antlr-2008-01-23.10 build. I tried 
the lastest build after Terrance announced it, but it was giving me 
Template missing exceptions after I recompiled to add some stuff I 
needed to the CSharp target.

Jamie

Jamie Penney wrote:
> Hi All,
> I am getting the following exception when executing a rewrite rule:
>
> Antlr.Runtime.Tree.RewriteEmptyStreamException: rule type
>   at Antlr.Runtime.Tree.RewriteRuleElementStream`1._Next()
>   at 
> Antlr.Runtime.Tree.RewriteRuleSubtreeStream.FetchObject(ProcessHandler 
> ph)
>   at Antlr.Runtime.Tree.RewriteRuleSubtreeStream.NextTree()
>   at Kerriv.CSharpML.CSharp3ParserSyntax.using_namespace_directive() 
> in ....
>
>
> This is cause by the code generated from the following rule:
> using_namespace_directive
>    :    USING type SEMICOLON -> ^(USING type SEMICOLON)
>    ;
>
> Any ideas as to where I should start with this? The documentation and 
> Google haven't given me any clues.
>
> Thanks,
> Jamie Penney


From jpen054 at ec.auckland.ac.nz  Wed Feb 13 19:38:31 2008
From: jpen054 at ec.auckland.ac.nz (Jamie Penney)
Date: Thu, 14 Feb 2008 16:38:31 +1300
Subject: [antlr-interest] RewriteEmptyStreamException
In-Reply-To: <47B3AF20.1060609@ec.auckland.ac.nz>
References: <47B3ADFF.8010000@ec.auckland.ac.nz>
	<47B3AF20.1060609@ec.auckland.ac.nz>
Message-ID: <47B3B7B7.9070606@ec.auckland.ac.nz>

To answer my own question, it seems like I had an alternative in the 
'type' rule that didn't have a rewrite rule associated with it. I 
thought ANTLR was supposed to automatically create an AST if you didn't 
specify a rewrite rule? For whoever is interested, this was the rule:
type
    :    (namespace_or_type_name -> ^(TYPE $namespace_or_type_name) // 
JP Added -> ^(TYPE $namespace_or_type_name)
        |    simple_type
        |    OBJECT
        |    STRING
        |    VOID s1=STAR -> ^(VOID $s1)
        )    (s2=STAR -> ^(TYPE $type OP_POINTER[$s2])
            |    INTERR -> ^(TYPE $type OP_NULLABLE[$INTERR])
            |    (rank_specifier)=> rank_specifier -> ^(TYPE $type 
rank_specifier)
            )*
    ;

Because the second group (starting with s2=STAR) is optional, if it 
wasn't triggered there was no rewrite rule triggered.



Jamie Penney wrote:
> Forgot to mention that I am using the antlr-2008-01-23.10 build. I 
> tried the lastest build after Terrance announced it, but it was giving 
> me Template missing exceptions after I recompiled to add some stuff I 
> needed to the CSharp target.
>
> Jamie
>
> Jamie Penney wrote:
>> Hi All,
>> I am getting the following exception when executing a rewrite rule:
>>
>> Antlr.Runtime.Tree.RewriteEmptyStreamException: rule type
>>   at Antlr.Runtime.Tree.RewriteRuleElementStream`1._Next()
>>   at 
>> Antlr.Runtime.Tree.RewriteRuleSubtreeStream.FetchObject(ProcessHandler 
>> ph)
>>   at Antlr.Runtime.Tree.RewriteRuleSubtreeStream.NextTree()
>>   at Kerriv.CSharpML.CSharp3ParserSyntax.using_namespace_directive() 
>> in ....
>>
>>
>> This is cause by the code generated from the following rule:
>> using_namespace_directive
>>    :    USING type SEMICOLON -> ^(USING type SEMICOLON)
>>    ;
>>
>> Any ideas as to where I should start with this? The documentation and 
>> Google haven't given me any clues.
>>
>> Thanks,
>> Jamie Penney
>


From antlr at mirality.co.nz  Wed Feb 13 23:12:28 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 14 Feb 2008 20:12:28 +1300
Subject: [antlr-interest] MismatchedTokenException and how to find
 errors in ANTLRWorks
In-Reply-To: <"L24064BF2660C4e6a824DD1003EBA512A.1202941385.scalix.tempo
	ral-wave.com*"@MHS>
References: <382629.73435.qm@web55901.mail.re3.yahoo.com>
	<"L24064BF2660C4e6a824DD1003EBA512A.1202941385.scalix.temporal-wave.com*"@MHS>
Message-ID: <20080214071243.C743011ECD7@www.antlr.org>

At 10:57 14/02/2008, Jim Idle wrote:
 >
 >If I had a vote, I would vote to remove them altogether. I
 >never said that they were an advanced feature, but that the
 >issues are too confusing for new users hence only users with
 >a bit more knowledge of how it flows together can use them
 >without confusing their selves.

Easy solution: in a future version of ANTLR, disable them by 
default and include an option to re-enable them.  Put the 
description of that option on the same page that explains how to 
use the feature properly ;)


From guntiso at latnet.lv  Thu Feb 14 02:06:11 2008
From: guntiso at latnet.lv (Guntis Ozols)
Date: Thu, 14 Feb 2008 12:06:11 +0200
Subject: [antlr-interest] MismatchedTokenException and how to find
	errors in ANTLRWorks
In-Reply-To: <382629.73435.qm@web55901.mail.re3.yahoo.com>
References: <382629.73435.qm@web55901.mail.re3.yahoo.com>
Message-ID: <1202983571.47b412933e934@clients.latnet.lv>

> I've learned that "the customer is always right" is good policy on bug
> reports--not that he is right about the specifics, but that he is usually
> right that "there is a problem".

Wise

> As Guntis points out, in this case it is not the literals that are
> the problem but the confusion arising from combined grammars which
> hide the lexer.

I like antlr because of combined grammars, I think it is the right direction.

And I think that the root of the problem in this case
is antlrs broken lexer (please, forgive me again)

> > > There isn't anything wrong with the tool, it is doing what you tell it
> > > to do. The token isnt anonymous, it is called T66 or whatever,

I guess I should be thankful it is not called AK-47.
Is java.util.AbstractMap$2$1.class anonymous?

> > runtime doesn't know that you created it by specifying it in the parser.
> > So, I don't see why "anonymous token" would help you at all.

It would help me at design time to see I have a potential problem.
Not me, actually, I've already learned my lesson. It could help
others and could save many man-hours by clearly showing what is
going on.

> > Criticism of the tool should be postponed until you
> > truly understand what the tool is doing

By that time, I'll be a pro at avoiding traps and obstacles to the
point I will not notice them, so it will be too late to report anything.

BTW I think I understand what the tool is doing in this particular
case and I was not asking for help, was I? Adding
System.err.println("Anonymous token in parser rule: " + lit);
to AssignTokenTypesWalker.assignStringTypes(Grammar) works well for me.

Guntis


From tbrandonau at gmail.com  Thu Feb 14 02:41:49 2008
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Thu, 14 Feb 2008 21:41:49 +1100
Subject: [antlr-interest] MismatchedTokenException and how to find
	errors in ANTLRWorks
In-Reply-To: <1202983571.47b412933e934@clients.latnet.lv>
References: <382629.73435.qm@web55901.mail.re3.yahoo.com>
	<1202983571.47b412933e934@clients.latnet.lv>
Message-ID: <ebc876d70802140241q4a386dfch6a65b2ec2770bffa@mail.gmail.com>

On Thu, Feb 14, 2008 at 9:06 PM, Guntis Ozols <guntiso at latnet.lv> wrote:
>  > As Guntis points out, in this case it is not the literals that are
>  > the problem but the confusion arising from combined grammars which
>  > hide the lexer.
>
>  I like antlr because of combined grammars, I think it is the right direction.
>
>  And I think that the root of the problem in this case
>  is antlrs broken lexer (please, forgive me again)
Might help to elaborate on that. Given the problem currently discussed
I don't think this is broken. This is just the way all such tools
work. A lexer takes in characters and spits out tokens. A parser takes
in tokens and spits out nodes. I don't know that a tool that combined
these would be possible or a good thing and it certainly isn't what
ANTLR or any other such tool attempts to provide. I kind of agree that
combined grammars can obfuscate this point. Though I agree with Jim's
point that tools should be designed more to provide the most ease to
the people who understand them than to provide the most ease to the
people learning them (for tools like ANTLR that aren't aimed at
low-level users) so I think combined grammars are a good feature.
>  BTW I think I understand what the tool is doing in this particular
>  case and I was not asking for help, was I? Adding
>  System.err.println("Anonymous token in parser rule: " + lit);
>  to AssignTokenTypesWalker.assignStringTypes(Grammar) works well for me.
But surely for those that understand and want to use parser defined
literals having many such messages printed out is just unacceptable.
Either remove them or add an option for them, a message about them
doesn't seem a good compromise.

Tom.
>
>  Guntis
>
>

From Konstantin.Plotnikov at motorola.com  Thu Feb 14 07:19:26 2008
From: Konstantin.Plotnikov at motorola.com (Plotnikov Konstantin-HJQ468)
Date: Thu, 14 Feb 2008 15:19:26 -0000
Subject: [antlr-interest] antlr studio -> antlr
Message-ID: <8D20BBB55F590E42AADF592A815E861702429F76@zuk35exm65.ds.mot.com>

We have been using Antlr Studio to develop a grammar and have used a
method getLengthConsumed inadvertantly, which appears to be an Antlr
Studio specific method. We are trying to make our code not dependent
upon the Antlr studio code. Is there an equivalent method to find the
current length of the stream that we have consumed? 

Thank you,
Konstantin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080214/66c8c3fd/attachment.html 

From troy.daniels at baesystems.com  Thu Feb 14 07:27:54 2008
From: troy.daniels at baesystems.com (Daniels, Troy (US SSA))
Date: Thu, 14 Feb 2008 10:27:54 -0500
Subject: [antlr-interest] funny error message
References: <"LBB12FB1CAA26412e90149447B9CAA9DE.1202926240.scalix.temporal-wave.com*"@MHS>
Message-ID: <40CBD611A793EA438464B91E749DD8B003A8CA9C@blums0017.bluelnk.net>

 


  _____  

	From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
	Sent: Wednesday, February 13, 2008 12:45 PM
	To: antlr-interest at antlr.org
	Subject: Re: [antlr-interest] funny error message
	
	

	  

	  

	From: Darien Hager [mailto:darien.hager at etelos-inc.com] 
	Sent: Tuesday, February 12, 2008 6:40 PM
	To: antlr-interest at antlr.org
	Subject: Re: [antlr-interest] funny error message 

	  

	  

	Well, with hindsight it looks like a pretty good error message.
	
	I guess it might hinge on the definition of "unreachable" or
what component is doing the reaching. Two possible quick interpretations
of the message:
	
	This token cannot be reached...
	1) ...because it is an orphan not used by any parser rules. 

	The lexer and parser are not connected. The lexer just has to
tokenize and does not care if the consumer (which may not be a parser)
knows about the token.  

However, I can see "...because it is an orphan not used by any lexer
rules. "  While this lexer grammar is valid, it's likely not what the
user intended.

A: B;

fragment B: 'B';

fragment C: 'C';

C isn't unreachable in sense #2, but it won't ever be used.

Troy

	
	2) ...because other lexer tokens will always match first.  
	
	I think I might assume explanation #1, just from reading the
error message, while it appears to be #2 that is happening.
	

	But, as #1 has no meaning, then there is only #2 to consider J 

	Jim 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080214/5bfab5fe/attachment.html 

From stevagewp at gmail.com  Thu Feb 14 08:14:44 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Fri, 15 Feb 2008 03:14:44 +1100
Subject: [antlr-interest] funny error message
In-Reply-To: <40CBD611A793EA438464B91E749DD8B003A8CA9C@blums0017.bluelnk.net>
References: <LBB12FB1CAA26412e90149447B9CAA9DE.1202926240.scalix.temporal-wave.com*@MHS>
	<40CBD611A793EA438464B91E749DD8B003A8CA9C@blums0017.bluelnk.net>
Message-ID: <b8ceeef70802140814h2853e73al86ff8551d120f1f0@mail.gmail.com>

On 2/15/08, Daniels, Troy (US SSA) <troy.daniels at baesystems.com> wrote:
> fragment B: 'B';
>
> fragment C: 'C';
>
> C isn't unreachable in sense #2, but it won't ever be used.

On a similar note, ANTLRworks should probably mark fragment lexer
rules with a red wavy underline if used in a parser rule.

Steve

From jimi at temporal-wave.com  Thu Feb 14 08:48:32 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 14 Feb 2008 08:48:32 -0800
Subject: [antlr-interest] antlr studio -> antlr
In-Reply-To: <8D20BBB55F590E42AADF592A815E861702429F76@zuk35exm65.ds.mot.com>
Message-ID: <"LCF0AAC25AB7040729C37F335B19425A6.1203009251.scalix.temporal-wave.com*"@MHS>

 

 

From: Plotnikov Konstantin-HJQ468
[mailto:Konstantin.Plotnikov at motorola.com] 
Sent: Thursday, February 14, 2008 7:19 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] antlr studio -> antlr

 

We have been using Antlr Studio to develop a grammar and have used a
method getLengthConsumed inadvertantly, which appears to be an Antlr
Studio specific method. We are trying to make our code not dependent
upon the Antlr studio code. Is there an equivalent method to find the
current length of the stream that we have consumed? 

 

I presume that you mean the character input stream, but as everything
should derive from the same base class, you should find that the index()
method on your input stream gives you what you need, regardless of the
stream type.

Jim


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080214/36acb32e/attachment.html 

From jimi at temporal-wave.com  Thu Feb 14 08:51:05 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 14 Feb 2008 08:51:05 -0800
Subject: [antlr-interest] funny error message
In-Reply-To: <40CBD611A793EA438464B91E749DD8B003A8CA9C@blums0017.bluelnk.net>
Message-ID: <"LF3006DF9FE9F4cbd8AA41B1E9DE8D6B7.1203009403.scalix.temporal-wave.com*"@MHS>

 

 

From: Daniels, Troy \(US SSA\) [mailto:troy.daniels at baesystems.com] 
Sent: Thursday, February 14, 2008 7:28 AM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] funny error message

 

 

    

  _____  

   From: antlr-interest-bounces at antlr.org
   [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
   Sent: Wednesday, February 13, 2008 12:45 PM
   To: antlr-interest at antlr.org
   Subject: Re: [antlr-interest] funny error message

    

    

   From: Darien Hager [mailto:darien.hager at etelos-inc.com] 
   Sent: Tuesday, February 12, 2008 6:40 PM
   To: antlr-interest at antlr.org
   Subject: Re: [antlr-interest] funny error message 

    

    

   Well, with hindsight it looks like a pretty good error message.
   
   I guess it might hinge on the definition of "unreachable" or what
   component is doing the reaching. Two possible quick interpretations
   of the message:
   
   This token cannot be reached...
   1) ...because it is an orphan not used by any parser rules. 

   The lexer and parser are not connected. The lexer just has to
   tokenize and does not care if the consumer (which may not be a
   parser) knows about the token.  

However, I can see "...because it is an orphan not used by any lexer
rules. "  While this lexer grammar is valid, it's likely not what the
user intended.

A: B;

fragment B: 'B';

fragment C: 'C';

C isn't unreachable in sense #2, but it won't ever be used

Except for:

 

A: B

  ( ?C? { $type = C; }

    |

 );

I understand what people are asking for, but it gets into the realm
where ?fixing? something for once person would be braking it for others.

 

Jim

 

 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080214/6547c189/attachment-0001.html 

From troy.daniels at baesystems.com  Thu Feb 14 09:49:42 2008
From: troy.daniels at baesystems.com (Daniels, Troy (US SSA))
Date: Thu, 14 Feb 2008 12:49:42 -0500
Subject: [antlr-interest] funny error message
References: <"LF3006DF9FE9F4cbd8AA41B1E9DE8D6B7.1203009403.scalix.temporal-wave.com*"@MHS>
Message-ID: <40CBD611A793EA438464B91E749DD8B003A8CB88@blums0017.bluelnk.net>

 


  _____  

	From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
	Sent: Thursday, February 14, 2008 11:51 AM
	To: antlr-interest at antlr.org
	Subject: Re: [antlr-interest] funny error message
	
	

	  

	  

	From: Daniels, Troy \(US SSA\)
[mailto:troy.daniels at baesystems.com] 
	Sent: Thursday, February 14, 2008 7:28 AM
	To: antlr-interest at antlr.org
	Subject: Re: [antlr-interest] funny error message 

	  

	  

		  

  _____  

		   

		From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
		Sent: Wednesday, February 13, 2008 12:45 PM
		To: antlr-interest at antlr.org
		Subject: Re: [antlr-interest] funny error message 

		  

		  

		From: Darien Hager [mailto:darien.hager at etelos-inc.com] 
		Sent: Tuesday, February 12, 2008 6:40 PM
		To: antlr-interest at antlr.org
		Subject: Re: [antlr-interest] funny error message 

		  

		  

		Well, with hindsight it looks like a pretty good error
message.
		
		I guess it might hinge on the definition of
"unreachable" or what component is doing the reaching. Two possible
quick interpretations of the message:
		
		This token cannot be reached...
		1) ...because it is an orphan not used by any parser
rules. 

		The lexer and parser are not connected. The lexer just
has to tokenize and does not care if the consumer (which may not be a
parser) knows about the token.   

	However, I can see "...because it is an orphan not used by any
lexer rules. "  While this lexer grammar is valid, it's likely not what
the user intended. 

	A: B; 

	fragment B: 'B'; 

	fragment C: 'C'; 

	C isn't unreachable in sense #2, but it won't ever be used 

	Except for: 

	  

	A: B 

	  ( 'C' { $type = C; } 

	    | 

	 ); 

	I understand what people are asking for, but it gets into the
realm where 'fixing' something for once person would be braking it for
others. 

	   

If this is the only place you use C, shouldn't you define this as

@tokens { C; }

rather than 

fragment C: 'C';

(Assume the correct syntax; I haven't moved to v3 yet.)

 It seems that the fragment rule rather than the token declaration could
easily lead to confusion, as a subsequent update might yield

 

A: B ( 'C1' { $type = C;} | }

fragment C: 'C';

If you see the C rule but not where C is set, you'd expect C to
correspond to 'C' in the input, but it actually corresponds to 'C1'.
The grammar still works, at least until somebody adds

D: B | C;

Troy

 

	Jim 

	  

	  

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080214/7632421f/attachment.html 

From parrt at cs.usfca.edu  Thu Feb 14 10:49:37 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 14 Feb 2008 10:49:37 -0800
Subject: [antlr-interest] RewriteEmptyStreamException
In-Reply-To: <47B3B7B7.9070606@ec.auckland.ac.nz>
References: <47B3ADFF.8010000@ec.auckland.ac.nz>
	<47B3AF20.1060609@ec.auckland.ac.nz>
	<47B3B7B7.9070606@ec.auckland.ac.nz>
Message-ID: <631C31AE-854E-4192-9185-0F4602B940C0@cs.usfca.edu>

Hi. If you have any rewrite in an alternative, the auto AST  
construction is turned off for the entire alternative even if you set  
it just inside a subrule.

Ter
On Feb 13, 2008, at 7:38 PM, Jamie Penney wrote:

> To answer my own question, it seems like I had an alternative in the  
> 'type' rule that didn't have a rewrite rule associated with it. I  
> thought ANTLR was supposed to automatically create an AST if you  
> didn't specify a rewrite rule? For whoever is interested, this was  
> the rule:
> type
>   :    (namespace_or_type_name -> ^(TYPE $namespace_or_type_name) //  
> JP Added -> ^(TYPE $namespace_or_type_name)
>       |    simple_type
>       |    OBJECT
>       |    STRING
>       |    VOID s1=STAR -> ^(VOID $s1)
>       )    (s2=STAR -> ^(TYPE $type OP_POINTER[$s2])
>           |    INTERR -> ^(TYPE $type OP_NULLABLE[$INTERR])
>           |    (rank_specifier)=> rank_specifier -> ^(TYPE $type  
> rank_specifier)
>           )*
>   ;
>
> Because the second group (starting with s2=STAR) is optional, if it  
> wasn't triggered there was no rewrite rule triggered.
>
>
>
> Jamie Penney wrote:
>> Forgot to mention that I am using the antlr-2008-01-23.10 build. I  
>> tried the lastest build after Terrance announced it, but it was  
>> giving me Template missing exceptions after I recompiled to add  
>> some stuff I needed to the CSharp target.
>>
>> Jamie
>>
>> Jamie Penney wrote:
>>> Hi All,
>>> I am getting the following exception when executing a rewrite rule:
>>>
>>> Antlr.Runtime.Tree.RewriteEmptyStreamException: rule type
>>>  at Antlr.Runtime.Tree.RewriteRuleElementStream`1._Next()
>>>  at  
>>> Antlr 
>>> .Runtime.Tree.RewriteRuleSubtreeStream.FetchObject(ProcessHandler  
>>> ph)
>>>  at Antlr.Runtime.Tree.RewriteRuleSubtreeStream.NextTree()
>>>  at  
>>> Kerriv.CSharpML.CSharp3ParserSyntax.using_namespace_directive()  
>>> in ....
>>>
>>>
>>> This is cause by the code generated from the following rule:
>>> using_namespace_directive
>>>   :    USING type SEMICOLON -> ^(USING type SEMICOLON)
>>>   ;
>>>
>>> Any ideas as to where I should start with this? The documentation  
>>> and Google haven't given me any clues.
>>>
>>> Thanks,
>>> Jamie Penney
>>
>


From antlr at mirality.co.nz  Thu Feb 14 11:16:13 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 15 Feb 2008 08:16:13 +1300
Subject: [antlr-interest] funny error message
In-Reply-To: <40CBD611A793EA438464B91E749DD8B003A8CB88@blums0017.bluelnk .net>
References: <"LF3006DF9FE9F4cbd8AA41B1E9DE8D6B7.1203009403.scalix.temporal-wave.com*"@MHS>
	<40CBD611A793EA438464B91E749DD8B003A8CB88@blums0017.bluelnk.net>
Message-ID: <20080214191636.1111011EC21@www.antlr.org>

At 06:49 15/02/2008, Daniels, Troy (US SSA) wrote:
>If this is the only place you use C, shouldn't you define this as
>
>@tokens { C; }
>
>rather than
>
>fragment C: 'C';
>
>(Assume the correct syntax; I haven't moved to v3 yet.)

I agree with you -- but last time I checked ANTLR generated a 
warning when doing that (along the lines of "rule C has no body"), 
which is not especially helpful.

(And it's "tokens", not "@tokens".  But otherwise correct.)


From mark.heieis at shaw.ca  Thu Feb 14 11:18:36 2008
From: mark.heieis at shaw.ca (Mark Heieis)
Date: Thu, 14 Feb 2008 11:18:36 -0800
Subject: [antlr-interest] Direct access and manipulation of tokens in
 existing trees
In-Reply-To: <47B32B4A.3090203@gmx.de>
References: <47B1C88B.1060008@shaw.ca> <47B32B4A.3090203@gmx.de>
Message-ID: <47B4940C.7060600@shaw.ca>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080214/f0b92ce0/attachment-0001.html 

From phreed at gmail.com  Thu Feb 14 11:50:05 2008
From: phreed at gmail.com (Fred)
Date: Thu, 14 Feb 2008 13:50:05 -0600
Subject: [antlr-interest] Syntactic Predicate with Tree Grammar
Message-ID: <cb0c557b0802141150p557dbf70vb44537be3610e53d@mail.gmail.com>

Given an AST as follows...
<A>
  <B>
    <C>
      <E>
        <F>
    <D>
      <F>

...or expanded into a node list {where '(' means DOWN and ')' means UP}...

A ( B ( C ( E ( F ) ) D ( F ) ) )

...and a tree grammar (fragment)...

expr
  : (^(B ^(C .) .))=>
    ^(B ^(C a1=.) b1=.) -> doX()
  | ^(B a2=. b2=.) -> doY()
  ;

...I get an error like...

A.g: node from after line ..:.. no viable alternative at input 'UP'

...where the line number corresponds to the C node.

From phreed at gmail.com  Thu Feb 14 12:38:05 2008
From: phreed at gmail.com (Fred)
Date: Thu, 14 Feb 2008 14:38:05 -0600
Subject: [antlr-interest]  Re: Syntactic Predicate with Tree Grammar
Message-ID: <cb0c557b0802141238g33b9e9dcg2bdc387f3dc30466@mail.gmail.com>

Apparently, this is a known bug in the way the DFA is generated.
I introduced a k=4 option to the rule and all is well.

>  Given an AST as follows...
>  <A>
>   <B>
>     <C>
>       <E>
>         <F>
>     <D>
>       <F>
>
>  ...or expanded into a node list {where '(' means DOWN and ')' means UP}...
>
>  A ( B ( C ( E ( F ) ) D ( F ) ) )
>
>  ...and a tree grammar (fragment)...
>
>  expr
>   : (^(B ^(C .) .))=>
>     ^(B ^(C a1=.) b1=.) -> doX()
>   | ^(B a2=. b2=.) -> doY()
>   ;
>
>  ...I get an error like...
>
>  A.g: node from after line ..:.. no viable alternative at input 'UP'
>
>  ...where the line number corresponds to the C node.
>

From siemsen at ucar.edu  Thu Feb 14 14:07:44 2008
From: siemsen at ucar.edu (siemsen at ucar.edu)
Date: Thu, 14 Feb 2008 15:07:44 -0700
Subject: [antlr-interest] feeding conditional terms to stringtemplate
Message-ID: <5990877B-DF19-4268-9875-2488357FEFF3@ucar.edu>

I've got this rule in an ANTLR 3 grammar:

qualifierDeclaration
	: QUALIFIER qualifierName COLON qualifierType qualifierFlavorList?  
SEMICOLON
         {
		qualifierDefinition qDef = new qualifierDefinition(
			$qualifierName.text,
			$qualifierType.type,
			$qualifierFlavorList.fList);
	}
     ;

It works fine when a qualifierFlavorList exists in the input stream.   
When it doesn't, I get a NullPointerException because  
$qualifierFlavorList.fList isn't defined.  To make it work, I did this:

qualifierDeclaration
	: QUALIFIER qualifierName COLON qualifierType  
( qFl=qualifierFlavorList )? SEMICOLON
         {
		ArrayList fl = new ArrayList();
		if (qFl != null) {
			fl = qFl.fList;
		}
		qualifierDefinition qDef = new qualifierDefinition(
			$qualifierName.text,
			$qualifierType.type,
			fl);
	}
     ;

This seems rather klunky.  Is there a more elegant way to deal with it?

-- Pete

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080214/3b606b6e/attachment.html 

From jpen054 at ec.auckland.ac.nz  Thu Feb 14 17:17:24 2008
From: jpen054 at ec.auckland.ac.nz (Jamie Penney)
Date: Fri, 15 Feb 2008 14:17:24 +1300
Subject: [antlr-interest] [antlr-dev] ANTLRWorks ANTLR embedding
In-Reply-To: <985958.1269.qm@web55106.mail.re4.yahoo.com>
References: <985958.1269.qm@web55106.mail.re4.yahoo.com>
Message-ID: <47B4E824.8020904@ec.auckland.ac.nz>

I can't get ANTLRWorks to work with an incremental build of ANTLR - 
ANTLRWorks seems to have the ANTLR jar extracted internally, rather than 
having it as a jar so I can't just replace the jar. Extracting 
ANTLRWorks and overwriting the ANTLR class files doesn't work either - 
it either doesn't run the ANTLR Tool or doesn't start up at all. What is 
the easiest way of setting this up? I've even tried building ANTLRWorks 
from source, but that doesn't even work straight off the bat, so I can't 
try to use the updated ANTLR jar.

Thanks,
Jamie Penney

Matt Benson wrote:
> --- Thomas Brandon <tbrandonau at gmail.com> wrote:
>
>   
>> You can just replace the included ANTLR JAR in the
>> ANTLRWorks JAR (or
>> run an extracted ANTLRWorks). Seems better for
>> bleeding edge users to
>> do this than the extra effort of writing\maintaining
>> code pointing it
>> at the external JAR and requiring all users to set
>> this up.
>>     
>
> I forgot that the aim was probably to have everything
> available as a single jar.  ;)  Although the
> Class-Path attribute might help an antlrworks.jar find
> an antlr.jar in the same directory.  I suppose I can
> try to doctor my OS X install; either way I still end
> up with a convenient single point of launch.
>
> -Matt
>
>   
>> Tom.
>> On Feb 14, 2008 6:28 AM, Matt Benson
>> <gudnabrsam at yahoo.com> wrote:
>>     
>>> Would it be possible to ship ANTLRWorks such that
>>>       
>> it
>>     
>>> includes and references a separate ANTLR jar
>>>       
>> rather
>>     
>>> than embedding the contents of an ANTLR jar?  Then
>>>       
>> it
>>     
>>> would be possible for bleeding edge depot users to
>>> drop in an updated ANTLR jar (I expect this would
>>> usually be compatible).
>>>
>>> WDYT?
>>>
>>> -Matt
>>>
>>>
>>>      
>>>       
> ____________________________________________________________________________________
>   
>>> Never miss a thing.  Make Yahoo your home page.
>>> http://www.yahoo.com/r/hs
>>> _______________________________________________
>>> antlr-dev mailing list
>>> antlr-dev at antlr.org
>>>
>>>       
>> http://www.antlr.org/mailman/listinfo/antlr-dev
>>     
>
>
>
>       ____________________________________________________________________________________
> Be a better friend, newshound, and 
> know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ 
>
>   


From parrt at cs.usfca.edu  Thu Feb 14 17:22:53 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 14 Feb 2008 17:22:53 -0800
Subject: [antlr-interest] feeding conditional terms to stringtemplate
In-Reply-To: <5990877B-DF19-4268-9875-2488357FEFF3@ucar.edu>
References: <5990877B-DF19-4268-9875-2488357FEFF3@ucar.edu>
Message-ID: <ABD8D623-C2AD-4FFC-B954-33A1A46CFEB4@cs.usfca.edu>


On Feb 14, 2008, at 2:07 PM, siemsen at ucar.edu wrote:

> I've got this rule in an ANTLR 3 grammar:
>
> qualifierDeclaration
> 	: QUALIFIER qualifierName COLON qualifierType qualifierFlavorList?  
> SEMICOLON
>         {
> 		qualifierDefinition qDef = new qualifierDefinition(
> 			$qualifierName.text,
> 			$qualifierType.type,
> 			$qualifierFlavorList.fList);
> 	}
>     ;
>
> It works fine when a qualifierFlavorList exists in the input  
> stream.  When it doesn't, I get a NullPointerException because  
> $qualifierFlavorList.fList isn't defined.  To make it work, I did  
> this:

3.1 will have the null ptr guard done automatically.
Ter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080214/c1590611/attachment.html 

From jpen054 at ec.auckland.ac.nz  Thu Feb 14 17:31:03 2008
From: jpen054 at ec.auckland.ac.nz (Jamie Penney)
Date: Fri, 15 Feb 2008 14:31:03 +1300
Subject: [antlr-interest] [antlr-dev] ANTLRWorks ANTLR embedding
In-Reply-To: <47B4E824.8020904@ec.auckland.ac.nz>
References: <985958.1269.qm@web55106.mail.re4.yahoo.com>
	<47B4E824.8020904@ec.auckland.ac.nz>
Message-ID: <47B4EB57.4030308@ec.auckland.ac.nz>

I figured out why it wouldn't compile ANTLRWorks - the 'prepare-osx' 
target did not specify if="is-macos". Adding that fixed that build for me.

For a bit of additional information on my actual problem, it throws the 
following exception when I call Generate in ANTLRWorks. I have examined 
the Grammar source and it does not have the method ANTLRWorks is looking 
for.

Exception in thread "class org.antlr.works.visualization.VisualDrawing" 
java.lan
g.NoSuchMethodError: org.antlr.tool.Grammar.createNFAs()V
        at 
org.antlr.works.grammar.EngineGrammar.createParserGrammar(Unknown Sou
rce)
        at org.antlr.works.grammar.EngineGrammar.createGrammars(Unknown 
Source)
        at 
org.antlr.works.visualization.VisualDrawing.threadProcessText(Unknown
 Source)
        at org.antlr.works.visualization.VisualDrawing.threadRun(Unknown 
Source)

        at org.antlr.works.ate.syntax.misc.ATEThread.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
Exception in thread "Thread-5" java.lang.NoSuchMethodError: 
org.antlr.tool.Gramm
ar.createNFAs()V
        at 
org.antlr.works.grammar.EngineGrammar.createParserGrammar(Unknown Sou
rce)
        at org.antlr.works.grammar.EngineGrammar.createGrammars(Unknown 
Source)
        at org.antlr.works.grammar.EngineGrammar.analyze(Unknown Source)
        at org.antlr.works.grammar.CheckGrammar.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)


Jamie Penney wrote:
> I can't get ANTLRWorks to work with an incremental build of ANTLR - 
> ANTLRWorks seems to have the ANTLR jar extracted internally, rather 
> than having it as a jar so I can't just replace the jar. Extracting 
> ANTLRWorks and overwriting the ANTLR class files doesn't work either - 
> it either doesn't run the ANTLR Tool or doesn't start up at all. What 
> is the easiest way of setting this up? I've even tried building 
> ANTLRWorks from source, but that doesn't even work straight off the 
> bat, so I can't try to use the updated ANTLR jar.
>
> Thanks,
> Jamie Penney
>
> Matt Benson wrote:
>> --- Thomas Brandon <tbrandonau at gmail.com> wrote:
>>
>>  
>>> You can just replace the included ANTLR JAR in the
>>> ANTLRWorks JAR (or
>>> run an extracted ANTLRWorks). Seems better for
>>> bleeding edge users to
>>> do this than the extra effort of writing\maintaining
>>> code pointing it
>>> at the external JAR and requiring all users to set
>>> this up.
>>>     
>>
>> I forgot that the aim was probably to have everything
>> available as a single jar.  ;)  Although the
>> Class-Path attribute might help an antlrworks.jar find
>> an antlr.jar in the same directory.  I suppose I can
>> try to doctor my OS X install; either way I still end
>> up with a convenient single point of launch.
>>
>> -Matt
>>
>>  
>>> Tom.
>>> On Feb 14, 2008 6:28 AM, Matt Benson
>>> <gudnabrsam at yahoo.com> wrote:
>>>    
>>>> Would it be possible to ship ANTLRWorks such that
>>>>       
>>> it
>>>    
>>>> includes and references a separate ANTLR jar
>>>>       
>>> rather
>>>    
>>>> than embedding the contents of an ANTLR jar?  Then
>>>>       
>>> it
>>>    
>>>> would be possible for bleeding edge depot users to
>>>> drop in an updated ANTLR jar (I expect this would
>>>> usually be compatible).
>>>>
>>>> WDYT?
>>>>
>>>> -Matt
>>>>
>>>>
>>>>            
>> ____________________________________________________________________________________ 
>>
>>  
>>>> Never miss a thing.  Make Yahoo your home page.
>>>> http://www.yahoo.com/r/hs
>>>> _______________________________________________
>>>> antlr-dev mailing list
>>>> antlr-dev at antlr.org
>>>>
>>>>       
>>> http://www.antlr.org/mailman/listinfo/antlr-dev
>>>     
>>
>>
>>
>>       
>> ____________________________________________________________________________________ 
>>
>> Be a better friend, newshound, and know-it-all with Yahoo! Mobile.  
>> Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
>>   
>


From parrt at cs.usfca.edu  Thu Feb 14 18:05:51 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 14 Feb 2008 18:05:51 -0800
Subject: [antlr-interest] new build, fixes AST creation in tree grammars
Message-ID: <06BB8B40-61AA-48CC-B04B-E15F78BD42B6@cs.usfca.edu>

http://www.antlr.org/download/build/antlr-2008-02-14.18.tar.gz

February 14, 2008

* Fixed a bug in the code generation where tree level 0 was used
   no matter what to rewrite trees in tree grammars. added unit test

* Fixed ANTLR-221. exceptions were generated when using
   AST construction operators and no output=AST option.

February 13, 2008

* Improved error msgs for unreachable alts and tokens.

Ter

From a.shneyderman at gmail.com  Fri Feb 15 01:50:27 2008
From: a.shneyderman at gmail.com (Alex Shneyderman)
Date: Fri, 15 Feb 2008 10:50:27 +0100
Subject: [antlr-interest] Lexer rules with params
Message-ID: <693a69ba0802150150l5b7f1f3fxac09b124b2ec6ad5@mail.gmail.com>

I have lexer rule like this :

NewLine[boolean significantWhiteSpace]
    : ('\r\n' | '\r' | '\n') { if (!significantWhiteSpace) {$channel=HIDDEN;} }
    ;

antlr generates Lexer that is invalid in method mTokens the case stmt
is missing parmater:

case 100 :
                {
                mNewLine();
                }
                break;

Parameters are not allowed to non-fragment lexer rules ? Or this is a bug ?

From antlr at mirality.co.nz  Fri Feb 15 02:26:51 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 15 Feb 2008 23:26:51 +1300
Subject: [antlr-interest] Lexer rules with params
In-Reply-To: <693a69ba0802150150l5b7f1f3fxac09b124b2ec6ad5@mail.gmail.co
 m>
References: <693a69ba0802150150l5b7f1f3fxac09b124b2ec6ad5@mail.gmail.com>
Message-ID: <20080215102704.D1D8311EC21@www.antlr.org>

At 22:50 15/02/2008, Alex Shneyderman wrote:
 >antlr generates Lexer that is invalid in method mTokens the case 

 >stmt is missing parmater:
 >
 >case 100 :
 >                {
 >                mNewLine();
 >                }
 >                break;
 >
 >Parameters are not allowed to non-fragment lexer rules ? Or this 
is
 >a bug ?

That's right, parameters are not allowed on non-fragment lexer 
rules.  (Think about it: mTokens is automatically generated by 
ANTLR itself -- what would it pass as a parameter?)


From ad_cooney at hotmail.com  Fri Feb 15 03:45:50 2008
From: ad_cooney at hotmail.com (Adam Cooney)
Date: Fri, 15 Feb 2008 11:45:50 +0000
Subject: [antlr-interest] Java AST Grammar
In-Reply-To: <D2866F35-D1BB-4C25-9227-D32EFB4EBEED@jacelridge.com>
References: <BLU124-W377786AF163CAC13E783AC842B0@phx.gbl>
	<D2866F35-D1BB-4C25-9227-D32EFB4EBEED@jacelridge.com>
Message-ID: <BLU124-W1277F8D47D6B2E5641832084260@phx.gbl>


Thanks John, I'm going to look into using the AST grammar you've provided. Hopefully it will be adequate enough even if it is still a work in progress. Please, when you update it could you send me a copy of the Grammar if that's at all possible.
 
@Peter Bulychev
Thanks for showing me the Same project, I am also going to look into the grammar they use and hopefully one of the two will do what I want. I honestly dont have the time and also the knowledge to create my own Java AST grammar at the moment. I believe I also share similar requirements to you except that my language will just be Java files (it's meant to also have PHP support but I have yet to find a PHP AST grammar, or even an up to date PHP grammar). Sharing advice etc would be quite good, but I cannot share the task because my project is for a 3rd year university dissertation and thus, has to be done sololy. I am allowed to use other peoples grammars though as the time frame I have to attempt this is so small that if I had to make everything myself I can't see it happening. The project itself seems to be much more complicated than I or my lecturer most likely anticipated, but I'm pretty sure general advice is allowed.
 
Thanks for the help so far guys, it is much appreciated.
Adam


CC: john at jacelridge.com; antlr-interest at antlr.orgFrom: john at jacelridge.comTo: ad_cooney at hotmail.comSubject: Re: [antlr-interest] Java AST GrammarDate: Tue, 12 Feb 2008 17:41:05 -0500I have been working on a Java grammar that produces an AST; and a companion tree grammar that produces equivalent Java code from an AST.  This is still a work-in-progress, but you're welcome to what I have. 

Please let me know if you run into any problems with this, as I'm trying to make it work nicely.

Peace
- John



_________________________________________________________________
Free games, great prizes - get gaming at Gamesbox. 
http://www.searchgamesbox.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080215/1f1e64cd/attachment.html 

From darach at gmail.com  Fri Feb 15 06:14:12 2008
From: darach at gmail.com (Darach Ennis)
Date: Fri, 15 Feb 2008 14:14:12 +0000
Subject: [antlr-interest] Lexical error recovery by manual symbol
	(character) insertion/deletion?
Message-ID: <4d596d820802150614ha6185aem40407dd60dd8215d@mail.gmail.com>

Hi all.

I have a small testcase grammar as follows which can correctly match integer
and floats and dots
unless any <number><dot><non-number> sequence is in the input stream wherein
it tries to match
a float, fails and issues an error due to not finding a lexical subrule
alternative.

Input phrase example:

1 2.3 .4 9. 9...

Output errors:
line 1:11 required (...)+ loop did not match anything at character ' ' //
aka: the character proceeding the occurance of '9.' above, a space
line 1:14 required (...)+ loop did not match anything at character '.' //
aka: the character proceeding the second occurance of '9.' above, another
dot

Note that '.4' above is not a float but a dot followed by the integer four.
This gets matched correctly.

As '.' is used as a terminal for a statement and a lone integer is a valid
expression the sequence of
tokens <digit><dot> is valid.

The grammar:

test:   literal+;
literal:    I | D | F;
I   :   ('0' | '1'..'9' '0'..'9'*) ;
F :   ('0' | '1'..'9' '0'..'9'*) '.' '0'..'9'+;
D   :   '.';
WS  :   (' ' | '\t' | '\n' | '\r') { $channel=HIDDEN; };
C   :   '#' ~('\n'|'\r')* ('\r'|'\n') { $channel=HIDDEN; };

Introducing an erroneous rule to mop up the subrule mismatch is about the
only strategy that seems to work:

test:   literal+;
literal:    I | D | F | ERR;
I   :   ('0' | '1'..'9' '0'..'9'*);
F :   ('0' | '1'..'9' '0'..'9'*) '.' '0'..'9'+;
D   :   '.';
ERR: I D;
WS  :   (' ' | '\t' | '\n' | '\r') { $channel=HIDDEN; };
C   :   '#' ~('\n'|'\r')* ('\r'|'\n') { $channel=HIDDEN; };

This might be just fine in simpler grammars. However, I'm looking for
something akin to error recovery
by symbol insertion but at the lexer/character level, not in the parser as
described in the book. In my
case any dot character preceeded with a digit but not followed by a digit
should be preceeded by a
whitespace:

2.3 -> <number><dot><number>
.3 -> <dot> <number>
3. -> . <number> <whitespace> <dot>

Thus in the third production we would avoid the lexical ambiguity simply by
separating the 'mismatched float' <integer> and <dot>
tokens by an intervening whitespace. However, it looks like manual error
recovery in lexer rules is not supported by ANTLRv3, at
least in the java grammar. Here's a modified (and probably illegal) 'F'
lexer rule:

F :   ('0' | '1'..'9' '0'..'9'*) '.' '0'..'9'+
    ;
    catch [RecognitionException re] {
        // recover?
    }

ANTLR will try and generate code for this, but there are missing templates
for the error recovery:

ANTLR Parser Generator  Version 3.0.1 (August 13, 2007)  1989-2007
error(10):  internal error: /tmp/BadDot.g : java.util.NoSuchElementException:
no such attribute: exceptions in template context [lexerRule]
org.antlr.stringtemplate.StringTemplate.rawSetAttribute(StringTemplate.java
:661)
org.antlr.stringtemplate.StringTemplate.setAttribute(StringTemplate.java
:522)
org.antlr.stringtemplate.StringTemplate.setAttribute(StringTemplate.java
:604)
org.antlr.stringtemplate.StringTemplate.setAttribute(StringTemplate.java
:565)
org.antlr.codegen.CodeGenTreeWalker.exceptionHandler(CodeGenTreeWalker.java
:1413)
org.antlr.codegen.CodeGenTreeWalker.exceptionGroup(CodeGenTreeWalker.java
:1103)
org.antlr.codegen.CodeGenTreeWalker.rule(CodeGenTreeWalker.java:805)
org.antlr.codegen.CodeGenTreeWalker.rules(CodeGenTreeWalker.java:544)
org.antlr.codegen.CodeGenTreeWalker.grammarSpec(CodeGenTreeWalker.java:486)
org.antlr.codegen.CodeGenTreeWalker.grammar(CodeGenTreeWalker.java:297)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:406)
org.antlr.Tool.processGrammar(Tool.java:347)
org.antlr.Tool.process(Tool.java:311)
org.antlr.Tool.main(Tool.java:70)

Is there a simpler fix to the dot-ambiguity that I'm missing? Would a
lexical error recovery mechanism
be justifiably used in this case? Or, is this user error or a limitation/bug
with ANTLRv3?

Regards,

Darach.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080215/00e8119a/attachment.html 

From r.mark.volkmann at gmail.com  Fri Feb 15 06:56:09 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Fri, 15 Feb 2008 08:56:09 -0600
Subject: [antlr-interest] new build, fixes AST creation in tree grammars
In-Reply-To: <06BB8B40-61AA-48CC-B04B-E15F78BD42B6@cs.usfca.edu>
References: <06BB8B40-61AA-48CC-B04B-E15F78BD42B6@cs.usfca.edu>
Message-ID: <f0fcc6820802150656i2dbece87p915b7c22324343b@mail.gmail.com>

On Thu, Feb 14, 2008 at 8:05 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
> http://www.antlr.org/download/build/antlr-2008-02-14.18.tar.gz
>
>  February 14, 2008
>
>  * Fixed a bug in the code generation where tree level 0 was used
>    no matter what to rewrite trees in tree grammars. added unit test
>
>  * Fixed ANTLR-221. exceptions were generated when using
>    AST construction operators and no output=AST option.
>
>  February 13, 2008
>
>  * Improved error msgs for unreachable alts and tokens.

One of my grammars that has been working every intermediate build
doesn't work with this one. Here are some of the error messages I get
while running org.antlr.Tool.

     [java] error(100): MathLexer.g:0:0: syntax error: assign.types:
<AST>:0:0: unexpected AST node:
     [java] error(100): MathLexer.g:0:0: syntax error: assign.types:
<AST>:0:0: expecting BLOCK, found ''
     [java] error(100): MathLexer.g:0:0: syntax error: assign.types:
<AST>:0:0: unexpected AST node:
     [java] error(100): MathLexer.g:0:0: syntax error: define:
<AST>:0:0: unexpected AST node:
     [java] error(10):  internal error: MathLexer.g :
java.lang.NullPointerException

I can send you the grammar files if you'd like to see them.

-- 
R. Mark Volkmann
Object Computing, Inc.

From darach at gmail.com  Fri Feb 15 07:34:55 2008
From: darach at gmail.com (Darach Ennis)
Date: Fri, 15 Feb 2008 15:34:55 +0000
Subject: [antlr-interest] Lexical error recovery by manual symbol
	(character) insertion/deletion?
In-Reply-To: <4d596d820802150614ha6185aem40407dd60dd8215d@mail.gmail.com>
References: <4d596d820802150614ha6185aem40407dd60dd8215d@mail.gmail.com>
Message-ID: <4d596d820802150734n15becfabl4010b8a08a20ca26@mail.gmail.com>

Hi all.

After some trial and error and a little brain-stretching the following seems
to work:

F:   ('0' | '1'..'9' '0'..'9'*)
    (
        { input.LA(1) == '.' && Character.isDigit(input.LA(2)) }?=> ('.'
'0'..'9'+) { _type = F; }
        |   { _type = I; }
    )
    ;

So collapsing the common fragments of the Integer and Float lexer rules into
a common rule and gating the '.' appropriately seems to resolve the issue.
Of
course, now I is imaginary... I've noticed that this works only if the rule
is a
non-fragment rule:

[antlr3] ANTLR Parser Generator  Version 3.0.1 (August 13, 2007)  1989-2007
   [antlr3] warning(105): /tmp/FragmentFloat.g:35:94: no lexer rule
corresponding to token: I
    [javac] Compiling 2 source files to
/play/eclipse/workspace/jerlang/build
    [javac]
/play/eclipse/workspace/jerlang/src/org/pojodyne/jerlang/antlr/testing/TestFloatLexer.java:143:
cannot find symbol
    [javac] symbol  : variable _type
    [javac] location: class
org.pojodyne.jerlang.antlr.testing.TestFloatLexer
    [javac]                      _type = F;
    [javac]                      ^
    [javac]
/play/eclipse/workspace/jerlang/src/org/pojodyne/jerlang/antlr/testing/TestFloatLexer.java:150:
cannot find symbol
    [javac] symbol  : variable _type
    [javac] location: class
org.pojodyne.jerlang.antlr.testing.TestFloatLexer
    [javac]                      _type = I;
    [javac]                      ^
    [javac] 2 errors

Perhaps this is related to the fact that fragment lexer rules do not accept
parameters? The _type field should
be defined in lexer fragment rules so that ambiguity such as the above can
be resolved without making a
rule public.

So in answer to my own question: Lexical recovery is most likely a sign of
an inflexible brain, not an inflexible ANTLR, at least in this case.

Regards,

Darach.

On Fri, Feb 15, 2008 at 2:14 PM, Darach Ennis <darach at gmail.com> wrote:

> Hi all.
>
> I have a small testcase grammar as follows which can correctly match
> integer and floats and dots
> unless any <number><dot><non-number> sequence is in the input stream
> wherein it tries to match
> a float, fails and issues an error due to not finding a lexical subrule
> alternative.
>
> Input phrase example:
>
> 1 2.3 .4 9. 9...
>
> Output errors:
> line 1:11 required (...)+ loop did not match anything at character ' ' //
> aka: the character proceeding the occurance of '9.' above, a space
> line 1:14 required (...)+ loop did not match anything at character '.' //
> aka: the character proceeding the second occurance of '9.' above, another
> dot
>
> Note that '.4' above is not a float but a dot followed by the integer
> four. This gets matched correctly.
>
> As '.' is used as a terminal for a statement and a lone integer is a valid
> expression the sequence of
> tokens <digit><dot> is valid.
>
> The grammar:
>
> test:   literal+;
> literal:    I | D | F;
> I   :   ('0' | '1'..'9' '0'..'9'*) ;
> F :   ('0' | '1'..'9' '0'..'9'*) '.' '0'..'9'+;
> D   :   '.';
> WS  :   (' ' | '\t' | '\n' | '\r') { $channel=HIDDEN; };
> C   :   '#' ~('\n'|'\r')* ('\r'|'\n') { $channel=HIDDEN; };
>
> Introducing an erroneous rule to mop up the subrule mismatch is about the
> only strategy that seems to work:
>
> test:   literal+;
> literal:    I | D | F | ERR;
> I   :   ('0' | '1'..'9' '0'..'9'*);
> F :   ('0' | '1'..'9' '0'..'9'*) '.' '0'..'9'+;
> D   :   '.';
> ERR: I D;
> WS  :   (' ' | '\t' | '\n' | '\r') { $channel=HIDDEN; };
> C   :   '#' ~('\n'|'\r')* ('\r'|'\n') { $channel=HIDDEN; };
>
> This might be just fine in simpler grammars. However, I'm looking for
> something akin to error recovery
> by symbol insertion but at the lexer/character level, not in the parser as
> described in the book. In my
> case any dot character preceeded with a digit but not followed by a digit
> should be preceeded by a
> whitespace:
>
> 2.3 -> <number><dot><number>
> .3 -> <dot> <number>
> 3. -> . <number> <whitespace> <dot>
>
> Thus in the third production we would avoid the lexical ambiguity simply
> by separating the 'mismatched float' <integer> and <dot>
> tokens by an intervening whitespace. However, it looks like manual error
> recovery in lexer rules is not supported by ANTLRv3, at
> least in the java grammar. Here's a modified (and probably illegal) 'F'
> lexer rule:
>
> F :   ('0' | '1'..'9' '0'..'9'*) '.' '0'..'9'+
>     ;
>     catch [RecognitionException re] {
>         // recover?
>     }
>
> ANTLR will try and generate code for this, but there are missing templates
> for the error recovery:
>
> ANTLR Parser Generator  Version 3.0.1 (August 13, 2007)  1989-2007
> error(10):  internal error: /tmp/BadDot.g :
> java.util.NoSuchElementException: no such attribute: exceptions in
> template context [lexerRule]
> org.antlr.stringtemplate.StringTemplate.rawSetAttribute(
> StringTemplate.java:661)
> org.antlr.stringtemplate.StringTemplate.setAttribute(StringTemplate.java
> :522)
> org.antlr.stringtemplate.StringTemplate.setAttribute(StringTemplate.java
> :604)
> org.antlr.stringtemplate.StringTemplate.setAttribute(StringTemplate.java
> :565)
> org.antlr.codegen.CodeGenTreeWalker.exceptionHandler(
> CodeGenTreeWalker.java:1413)
> org.antlr.codegen.CodeGenTreeWalker.exceptionGroup(CodeGenTreeWalker.java
> :1103)
> org.antlr.codegen.CodeGenTreeWalker.rule(CodeGenTreeWalker.java:805)
> org.antlr.codegen.CodeGenTreeWalker.rules(CodeGenTreeWalker.java:544)
> org.antlr.codegen.CodeGenTreeWalker.grammarSpec(CodeGenTreeWalker.java
> :486)
> org.antlr.codegen.CodeGenTreeWalker.grammar(CodeGenTreeWalker.java:297)
> org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:406)
> org.antlr.Tool.processGrammar(Tool.java:347)
> org.antlr.Tool.process(Tool.java:311)
> org.antlr.Tool.main(Tool.java:70)
>
> Is there a simpler fix to the dot-ambiguity that I'm missing? Would a
> lexical error recovery mechanism
> be justifiably used in this case? Or, is this user error or a
> limitation/bug with ANTLRv3?
>
> Regards,
>
> Darach.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080215/93126061/attachment-0001.html 

From darach at gmail.com  Fri Feb 15 07:43:11 2008
From: darach at gmail.com (Darach Ennis)
Date: Fri, 15 Feb 2008 15:43:11 +0000
Subject: [antlr-interest] Lexical error recovery by manual symbol
	(character) insertion/deletion?
In-Reply-To: <4d596d820802150734n15becfabl4010b8a08a20ca26@mail.gmail.com>
References: <4d596d820802150614ha6185aem40407dd60dd8215d@mail.gmail.com>
	<4d596d820802150734n15becfabl4010b8a08a20ca26@mail.gmail.com>
Message-ID: <4d596d820802150743k3ec2cf5cuda882cbd543c3676@mail.gmail.com>

Hi all.

Least, but not least... this 'fix' only works if the now imaginary 'I' token
is *not* declared in the tokens section.
Declaring the token in the tokens section will 'break' the 'fix'.

Regards,

Darach.

On Fri, Feb 15, 2008 at 3:34 PM, Darach Ennis <darach at gmail.com> wrote:

> Hi all.
>
> After some trial and error and a little brain-stretching the following
> seems to work:
>
> F:   ('0' | '1'..'9' '0'..'9'*)
>     (
>         { input.LA(1) == '.' && Character.isDigit(input.LA(2)) }?=> ('.'
> '0'..'9'+) { _type = F; }
>         |   { _type = I; }
>     )
>     ;
>
> So collapsing the common fragments of the Integer and Float lexer rules
> into
> a common rule and gating the '.' appropriately seems to resolve the issue.
> Of
> course, now I is imaginary... I've noticed that this works only if the
> rule is a
> non-fragment rule:
>
> [antlr3] ANTLR Parser Generator  Version 3.0.1 (August 13, 2007)
> 1989-2007
>    [antlr3] warning(105): /tmp/FragmentFloat.g:35:94: no lexer rule
> corresponding to token: I
>     [javac] Compiling 2 source files to
> /play/eclipse/workspace/jerlang/build
>     [javac]
> /play/eclipse/workspace/jerlang/src/org/pojodyne/jerlang/antlr/testing/TestFloatLexer.java:143:
> cannot find symbol
>     [javac] symbol  : variable _type
>     [javac] location: class
> org.pojodyne.jerlang.antlr.testing.TestFloatLexer
>     [javac]                      _type = F;
>     [javac]                      ^
>     [javac]
> /play/eclipse/workspace/jerlang/src/org/pojodyne/jerlang/antlr/testing/TestFloatLexer.java:150:
> cannot find symbol
>     [javac] symbol  : variable _type
>     [javac] location: class
> org.pojodyne.jerlang.antlr.testing.TestFloatLexer
>     [javac]                      _type = I;
>     [javac]                      ^
>     [javac] 2 errors
>
> Perhaps this is related to the fact that fragment lexer rules do not
> accept parameters? The _type field should
> be defined in lexer fragment rules so that ambiguity such as the above can
> be resolved without making a
> rule public.
>
> So in answer to my own question: Lexical recovery is most likely a sign of
> an inflexible brain, not an inflexible ANTLR, at least in this case.
>
> Regards,
>
> Darach.
>
>
> On Fri, Feb 15, 2008 at 2:14 PM, Darach Ennis <darach at gmail.com> wrote:
>
> > Hi all.
> >
> > I have a small testcase grammar as follows which can correctly match
> > integer and floats and dots
> > unless any <number><dot><non-number> sequence is in the input stream
> > wherein it tries to match
> > a float, fails and issues an error due to not finding a lexical subrule
> > alternative.
> >
> > Input phrase example:
> >
> > 1 2.3 .4 9. 9...
> >
> > Output errors:
> > line 1:11 required (...)+ loop did not match anything at character ' '
> > // aka: the character proceeding the occurance of '9.' above, a space
> > line 1:14 required (...)+ loop did not match anything at character '.'
> > // aka: the character proceeding the second occurance of '9.' above, another
> > dot
> >
> > Note that '.4' above is not a float but a dot followed by the integer
> > four. This gets matched correctly.
> >
> > As '.' is used as a terminal for a statement and a lone integer is a
> > valid expression the sequence of
> > tokens <digit><dot> is valid.
> >
> > The grammar:
> >
> > test:   literal+;
> > literal:    I | D | F;
> > I   :   ('0' | '1'..'9' '0'..'9'*) ;
> > F :   ('0' | '1'..'9' '0'..'9'*) '.' '0'..'9'+;
> > D   :   '.';
> > WS  :   (' ' | '\t' | '\n' | '\r') { $channel=HIDDEN; };
> > C   :   '#' ~('\n'|'\r')* ('\r'|'\n') { $channel=HIDDEN; };
> >
> > Introducing an erroneous rule to mop up the subrule mismatch is about
> > the only strategy that seems to work:
> >
> > test:   literal+;
> > literal:    I | D | F | ERR;
> > I   :   ('0' | '1'..'9' '0'..'9'*);
> > F :   ('0' | '1'..'9' '0'..'9'*) '.' '0'..'9'+;
> > D   :   '.';
> > ERR: I D;
> > WS  :   (' ' | '\t' | '\n' | '\r') { $channel=HIDDEN; };
> > C   :   '#' ~('\n'|'\r')* ('\r'|'\n') { $channel=HIDDEN; };
> >
> > This might be just fine in simpler grammars. However, I'm looking for
> > something akin to error recovery
> > by symbol insertion but at the lexer/character level, not in the parser
> > as described in the book. In my
> > case any dot character preceeded with a digit but not followed by a
> > digit should be preceeded by a
> > whitespace:
> >
> > 2.3 -> <number><dot><number>
> > .3 -> <dot> <number>
> > 3. -> . <number> <whitespace> <dot>
> >
> > Thus in the third production we would avoid the lexical ambiguity simply
> > by separating the 'mismatched float' <integer> and <dot>
> > tokens by an intervening whitespace. However, it looks like manual error
> > recovery in lexer rules is not supported by ANTLRv3, at
> > least in the java grammar. Here's a modified (and probably illegal) 'F'
> > lexer rule:
> >
> > F :   ('0' | '1'..'9' '0'..'9'*) '.' '0'..'9'+
> >     ;
> >     catch [RecognitionException re] {
> >         // recover?
> >     }
> >
> > ANTLR will try and generate code for this, but there are missing
> > templates for the error recovery:
> >
> > ANTLR Parser Generator  Version 3.0.1 (August 13, 2007)  1989-2007
> > error(10):  internal error: /tmp/BadDot.g :
> > java.util.NoSuchElementException: no such attribute: exceptions in
> > template context [lexerRule]
> > org.antlr.stringtemplate.StringTemplate.rawSetAttribute(
> > StringTemplate.java:661)
> > org.antlr.stringtemplate.StringTemplate.setAttribute(StringTemplate.java
> > :522)
> > org.antlr.stringtemplate.StringTemplate.setAttribute(StringTemplate.java
> > :604)
> > org.antlr.stringtemplate.StringTemplate.setAttribute(StringTemplate.java
> > :565)
> > org.antlr.codegen.CodeGenTreeWalker.exceptionHandler(
> > CodeGenTreeWalker.java:1413)
> > org.antlr.codegen.CodeGenTreeWalker.exceptionGroup(
> > CodeGenTreeWalker.java:1103)
> > org.antlr.codegen.CodeGenTreeWalker.rule(CodeGenTreeWalker.java:805)
> > org.antlr.codegen.CodeGenTreeWalker.rules(CodeGenTreeWalker.java:544)
> > org.antlr.codegen.CodeGenTreeWalker.grammarSpec(CodeGenTreeWalker.java
> > :486)
> > org.antlr.codegen.CodeGenTreeWalker.grammar(CodeGenTreeWalker.java:297)
> > org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:406)
> > org.antlr.Tool.processGrammar(Tool.java:347)
> > org.antlr.Tool.process(Tool.java:311)
> > org.antlr.Tool.main(Tool.java:70)
> >
> > Is there a simpler fix to the dot-ambiguity that I'm missing? Would a
> > lexical error recovery mechanism
> > be justifiably used in this case? Or, is this user error or a
> > limitation/bug with ANTLRv3?
> >
> > Regards,
> >
> > Darach.
> >
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080215/eba1c11a/attachment.html 

From carter_cheng at yahoo.com  Fri Feb 15 09:36:59 2008
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Fri, 15 Feb 2008 09:36:59 -0800 (PST)
Subject: [antlr-interest] antlrworks versus command line type debugging
Message-ID: <942451.36144.qm@web50105.mail.re2.yahoo.com>

Hi everyone,

I have recently started using ANTLR 3.0.1 to develop a
grammar for the LPC programming language but ran into
a strange issue. A certain piece of code I have
generates errors when parsed using a standard mocked
up Test.java but when I step through the same code
with ANTLRWorks there is no error. 

I am curious if there might be something wrong with
how I am generating the *Parser.java file or if
ANTLRWorks somehow behaves differently than using java
org.antlr.Tool (without options).

Thanks in advance,

Carter.
 


      ____________________________________________________________________________________
Never miss a thing.  Make Yahoo your home page. 
http://www.yahoo.com/r/hs

From antlr at jazillian.com  Fri Feb 15 10:11:45 2008
From: antlr at jazillian.com (Andy Tripp)
Date: Fri, 15 Feb 2008 13:11:45 -0500
Subject: [antlr-interest] Java AST Grammar
In-Reply-To: <BLU124-W1277F8D47D6B2E5641832084260@phx.gbl>
References: <BLU124-W377786AF163CAC13E783AC842B0@phx.gbl>	<D2866F35-D1BB-4C25-9227-D32EFB4EBEED@jacelridge.com>
	<BLU124-W1277F8D47D6B2E5641832084260@phx.gbl>
Message-ID: <47B5D5E1.7060406@jazillian.com>

Adam,
You might want to just stick with ANTLR2 for building a Java AST.
See this: 
http://www.antlr.org/pipermail/antlr-interest/2004-October/009742.html
for a comparison of two existing ANTLR2 Java grammars.
Andy

Adam Cooney wrote:
> Thanks John, I'm going to look into using the AST grammar you've 
> provided. Hopefully it will be adequate enough even if it is still a 
> work in progress. Please, when you update it could you send me a copy 
> of the Grammar if that's at all possible.
>  
> @Peter Bulychev
> Thanks for showing me the Same project, I am also going to look into 
> the grammar they use and hopefully one of the two will do what I want. 
> I honestly dont have the time and also the knowledge to create my own 
> Java AST grammar at the moment. I believe I also share similar 
> requirements to you except that my language will just be Java files 
> (it's meant to also have PHP support but I have yet to find a PHP AST 
> grammar, or even an up to date PHP grammar). Sharing advice etc would 
> be quite good, but I cannot share the task because my project is for a 
> 3rd year university dissertation and thus, has to be done sololy. I am 
> allowed to use other peoples grammars though as the time frame I have 
> to attempt this is so small that if I had to make everything myself I 
> can't see it happening. The project itself seems to be much more 
> complicated than I or my lecturer most likely anticipated, but I'm 
> pretty sure general advice is allowed.
>  
> Thanks for the help so far guys, it is much appreciated.
> Adam
>
>
>     ------------------------------------------------------------------------
>     CC: john at jacelridge.com; antlr-interest at antlr.org
>     From: john at jacelridge.com
>     To: ad_cooney at hotmail.com
>     Subject: Re: [antlr-interest] Java AST Grammar
>     Date: Tue, 12 Feb 2008 17:41:05 -0500
>
>     I have been working on a Java grammar that produces an AST; and a
>     companion tree grammar that produces equivalent Java code from an
>     AST.  This is still a work-in-progress, but you're welcome to what
>     I have.
>
>     Please let me know if you run into any problems with this, as I'm
>     trying to make it work nicely.
>
>     Peace
>     - John
>
>
> ------------------------------------------------------------------------
> She said what? About who? Shameful celebrity quotes on Search Star! 
> <http://www.msnsearchstar.com>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080215/25e240cc/attachment.html 

From antlr at mirality.co.nz  Fri Feb 15 11:42:46 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 16 Feb 2008 08:42:46 +1300
Subject: [antlr-interest] Lexical error recovery by manual symbol
 (character) insertion/deletion?
In-Reply-To: <4d596d820802150734n15becfabl4010b8a08a20ca26@mail.gmail.co
 m>
References: <4d596d820802150614ha6185aem40407dd60dd8215d@mail.gmail.com>
	<4d596d820802150734n15becfabl4010b8a08a20ca26@mail.gmail.com>
Message-ID: <20080215194415.D146F11EB6F@www.antlr.org>

At 04:34 16/02/2008, Darach Ennis wrote:
>After some trial and error and a little brain-stretching the 
>following seems to work:
>
>F:   ('0' | '1'..'9' '0'..'9'*)
>     (
>         { input.LA(1) == '.' && Character.isDigit(input.LA(2)) 
> }?=> ('.' '0'..'9'+) { _type = F; }
>         |   { _type = I; }
>     )
>     ;

First: don't use _type (that's an implementation detail).  Use 
$type instead.

Second: solutions to this issue have been posted several times 
before; a common alternative solution is:

fragment DIGIT: '0'..'9';
fragment NUMBER: DIGIT+;
fragment FLOAT: NUMBER DOT NUMBER;
INT
   :  NUMBER
      ( (DOT DIGIT) => DOT NUMBER { $type = FLOAT; } )?
   ;

(Or you could replace that first NUMBER in the INT rule with ('0' 
| '1'..'9' DIGIT*) if you wanted to ensure leading zeros were 
invalid.)

The actual contents of the FLOAT rule don't matter, though it's 
usually preferable to make it look similar to what it's going to 
represent.

FLOAT can actually be put into the tokens section instead, but 
only if it has no content (since if it has content it becomes a 
top-level rule, which isn't the goal); unfortunately doing this 
causes ANTLR to emit a warning at present, which is why the dummy 
fragment approach is usually preferred.

>The _type field should be defined in lexer fragment rules so that 
>ambiguity such as the above can be resolved without making a rule 
>public.

Lexer fragment rules never emit tokens, so $type is completely 
meaningless for them.  Any type-juggling must be done in the 
top-level rule.


From darach at gmail.com  Fri Feb 15 13:17:10 2008
From: darach at gmail.com (Darach Ennis)
Date: Fri, 15 Feb 2008 21:17:10 +0000
Subject: [antlr-interest] Lexical error recovery by manual symbol
	(character) insertion/deletion?
In-Reply-To: <47b5eb90.0c87460a.3e29.ffff999aSMTPIN_ADDED@mx.google.com>
References: <4d596d820802150614ha6185aem40407dd60dd8215d@mail.gmail.com>
	<4d596d820802150734n15becfabl4010b8a08a20ca26@mail.gmail.com>
	<47b5eb90.0c87460a.3e29.ffff999aSMTPIN_ADDED@mx.google.com>
Message-ID: <4d596d820802151317gdc5c2a0u5ab9113a73fcf65f@mail.gmail.com>

Hi Gavin,

Thanks for the clarifications and historical information.

However the dummy-fragment approach is counter-intuitive at best because the
lexer rules FLOAT and NUMBER are what I'm using in my parser rules section.
But these
are fragment rules... so this is bad practice!

The fact that 'top-level' lexer rules can emit types and fragment rules
cannot isn't
mentioned in that section of the book. The 'fragment' keyword merely infers
the
intended (ie: not mandated) visibility of the rule. So the 'dummy-fragment
approach'
is more of a lucky side-effect adopted as a feature? Thankfully, ANTLR
doesn't
complain when fragment rules are referred to directly in parser rules...

The following makes more sense, at least to me, but is of course completely
illegal syntax:

fragment DIGIT: '0'..'9'; // this is a genuine fragment rule
imaginary NUMBER: DIGIT+; // this is an imaginary / special token
imaginary FLOAT: NUMBER DOT NUMBER; // this is an imaginary / special token
generator INT_OR_FLOAT
  :  NUMBER // => NUMBER is implicit here?
     ( (DOT DIGIT) => DOT NUMBER { $type = FLOAT; } )?
  ;

I appreciate there may be technical reasons for restricting fragment rules
such that
they can not emit tokens but the notion of a fragment (lexer-visible, not
parser-visible)
and a type-generating (may emit tokens) rule should not necessarily be
mutually exclusive.

To quote from the definitive ANTLR bible, page 92-93 in the 'Fragment Lexer
Rules' section:

      Because ANTLR assumes that all lexer rules are valid tokens, you must
prefix factored
      "helper rules" with the fragment keyword. This keyword tells ANTLR
that you intend for
      this rule to be called only by other rules and that it should not
yield a token to the parser.

Similarly, on page 127, in the token/lexer rule attribute table the
attribute $type is described as:

      The token type (nonzero positive integer) of the token such as INT;
translates to a call to getType().

No mention of a restriction for fragment rules there, so one should be able
to manipulate the type
information in this case.

So when I see the keyword 'fragment' it is explicitly communicating 'do not
refer to me in a parser
rule'. The dummy-fragment approach is breaking this rule and so I
(innocently) overlooked any solution using
them. The bible deems this a sin, but as this is an accepted means to an
end, call me a sinner!

I'll take the approach, because it works, but i'll document every single
usage in my lexer rules
because it is relatively non-standard and non-documented unless you use
ANTLR every day.

Regards,

Darach.






On Fri, Feb 15, 2008 at 7:42 PM, Gavin Lambert <antlr at mirality.co.nz> wrote:

> At 04:34 16/02/2008, Darach Ennis wrote:
> >After some trial and error and a little brain-stretching the
> >following seems to work:
> >
> >F:   ('0' | '1'..'9' '0'..'9'*)
> >     (
> >         { input.LA(1) == '.' && Character.isDigit(input.LA(2))
> > }?=> ('.' '0'..'9'+) { _type = F; }
> >         |   { _type = I; }
> >     )
> >     ;
>
> First: don't use _type (that's an implementation detail).  Use
> $type instead.
>
> Second: solutions to this issue have been posted several times
> before; a common alternative solution is:
>
> fragment DIGIT: '0'..'9';
> fragment NUMBER: DIGIT+;
> fragment FLOAT: NUMBER DOT NUMBER;
> INT
>   :  NUMBER
>      ( (DOT DIGIT) => DOT NUMBER { $type = FLOAT; } )?
>   ;
>
> (Or you could replace that first NUMBER in the INT rule with ('0'
> | '1'..'9' DIGIT*) if you wanted to ensure leading zeros were
> invalid.)
>
> The actual contents of the FLOAT rule don't matter, though it's
> usually preferable to make it look similar to what it's going to
> represent.
>
> FLOAT can actually be put into the tokens section instead, but
> only if it has no content (since if it has content it becomes a
> top-level rule, which isn't the goal); unfortunately doing this
> causes ANTLR to emit a warning at present, which is why the dummy
> fragment approach is usually preferred.
>
> >The _type field should be defined in lexer fragment rules so that
> >ambiguity such as the above can be resolved without making a rule
> >public.
>
> Lexer fragment rules never emit tokens, so $type is completely
> meaningless for them.  Any type-juggling must be done in the
> top-level rule.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080215/486e1818/attachment.html 

From oliver.kowalke at gmx.de  Fri Feb 15 14:55:05 2008
From: oliver.kowalke at gmx.de (Oliver Kowalke)
Date: Fri, 15 Feb 2008 23:55:05 +0100
Subject: [antlr-interest] case-insensitivity not in v3?!
Message-ID: <200802152355.06095.oliver.kowalke@gmx.de>

Hi,
is it correct that in ANTLR v3.x has no such options caseSensitive and 
caseSensitiveLiterals as ANTLR v2.x?
best regards,
Oliver

From oliver.kowalke at gmx.de  Fri Feb 15 15:01:39 2008
From: oliver.kowalke at gmx.de (Oliver Kowalke)
Date: Sat, 16 Feb 2008 00:01:39 +0100
Subject: [antlr-interest] separat lexer + parser grammars
Message-ID: <200802160001.39340.oliver.kowalke@gmx.de>

Hi,
I want to sepparat lexer and parser into different files.
I don't know where I've to put the tokens option.
tokens
{
        WORKFLOW = 'workflow';
}

If I put it into the lexer file I get:
literals are illegal in lexer tokens{} section: 'workflow'

I I put it into the parser grammar I get:
literal has no associated lexer rule: 'workflow'

Could you please give me an hint, please?

best regards,
Oliver

From jaluber at gmx.de  Fri Feb 15 15:06:22 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Sat, 16 Feb 2008 00:06:22 +0100
Subject: [antlr-interest] case-insensitivity not in v3?!
In-Reply-To: <200802152355.06095.oliver.kowalke@gmx.de>
References: <200802152355.06095.oliver.kowalke@gmx.de>
Message-ID: <47B61AEE.9090605@gmx.de>

Oliver Kowalke schrieb:
> Hi,
> is it correct that in ANTLR v3.x has no such options caseSensitive and 
> caseSensitiveLiterals as ANTLR v2.x?
> best regards,
> Oliver
> 

That is correct, but on the wiki there is some explanation, how you can 
implement it yourself.

Johannes

From r.mark.volkmann at gmail.com  Fri Feb 15 15:06:04 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Fri, 15 Feb 2008 17:06:04 -0600
Subject: [antlr-interest] separat lexer + parser grammars
In-Reply-To: <200802160001.39340.oliver.kowalke@gmx.de>
References: <200802160001.39340.oliver.kowalke@gmx.de>
Message-ID: <f0fcc6820802151506t2a3e2eaewfa4b099e15c07bc6@mail.gmail.com>

On Fri, Feb 15, 2008 at 5:01 PM, Oliver Kowalke <oliver.kowalke at gmx.de> wrote:
> Hi,
>  I want to sepparat lexer and parser into different files.
>  I don't know where I've to put the tokens option.
>  tokens
>  {
>         WORKFLOW = 'workflow';
>  }
>
>  If I put it into the lexer file I get:
>  literals are illegal in lexer tokens{} section: 'workflow'
>
>  I I put it into the parser grammar I get:
>  literal has no associated lexer rule: 'workflow'
>
>  Could you please give me an hint, please?

Is 'workflow' a real token that can appear in an input stream or is it
an imaginary token that only appears in ASTs that your parser grammar
creates?

I think if it's a token that can appear in input then you should
define it in your lexer grammar. Otherwise you should define it in
your parser grammar. I only have experience with using "tokens { ...
}" for imaginary tokens and so I only use it in parser grammars. I'm
sure others can shed more light on this.

-- 
R. Mark Volkmann
Object Computing, Inc.

From jaluber at gmx.de  Fri Feb 15 15:09:32 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Sat, 16 Feb 2008 00:09:32 +0100
Subject: [antlr-interest] separat lexer + parser grammars
In-Reply-To: <200802160001.39340.oliver.kowalke@gmx.de>
References: <200802160001.39340.oliver.kowalke@gmx.de>
Message-ID: <47B61BAC.3010509@gmx.de>

Oliver Kowalke schrieb:
> Hi,
> I want to sepparat lexer and parser into different files.
> I don't know where I've to put the tokens option.
> tokens
> {
>         WORKFLOW = 'workflow';
> }
> 
> If I put it into the lexer file I get:
> literals are illegal in lexer tokens{} section: 'workflow'
> 
> I I put it into the parser grammar I get:
> literal has no associated lexer rule: 'workflow'
> 
> Could you please give me an hint, please?
> 
> best regards,
> Oliver
> 
I believe you can't use "tokens {..}" in a lexer grammar. Use "WORKFLOW 
: 'workflow' ;" instead

Johannes

From shro8822 at vandals.uidaho.edu  Fri Feb 15 15:18:01 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Fri, 15 Feb 2008 15:18:01 -0800
Subject: [antlr-interest] use of += with * in C#
Message-ID: <BAYC1-PASMTP0791886C10141D1AE45DC8F5260@CEZ.ICE>

I can't seem to make antler generate usable action rules for grammars 
with +=.

what I;m trying is this:

grammar test_g;
options
{
    language=CSharp;
    backtrack=false;
    output=AST;
}

tokens {
Import        =    'import';
NewLine        =    '\r\n';
}

WS        :    (' ' | '\t')+;
GText        :    '//' ~('\n' | '\r')*;
FText        :    ('A'..'Z' | 'a'..'z')*;

document
    :
    (i += import)*
     EOF
      {foreach(string t in $i) Console.Write("\n>>"+(t));}
    ;

import returns [string s]
    : 'import' (' ' | '\t')+ FText eol_ {$s=$FText.Text;}
    ;

eol_
    : GText? '\r\n'
    ;


====

The problem is that the thing that 'import' generates and 'document' 
accumulates in the variable 'i' is not a C# string, in fact 'i' seems to 
accumulate a set of null pointers.

What am I doing wrong?? Near as I can tell, I'm making some sort of 
really bad assumption about what antlr is expecting, but I'm not seeing 
where it is.

(BTW, the manual hasn't yet been of much help in this)

From antlr at mirality.co.nz  Fri Feb 15 15:19:00 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 16 Feb 2008 12:19:00 +1300
Subject: [antlr-interest] Lexical error recovery by manual symbol
 (character) insertion/deletion?
In-Reply-To: <4d596d820802151317gdc5c2a0u5ab9113a73fcf65f@mail.gmail.com
 >
References: <4d596d820802150614ha6185aem40407dd60dd8215d@mail.gmail.com>
	<4d596d820802150734n15becfabl4010b8a08a20ca26@mail.gmail.com>
	<47b5eb90.0c87460a.3e29.ffff999aSMTPIN_ADDED@mx.google.com>
	<4d596d820802151317gdc5c2a0u5ab9113a73fcf65f@mail.gmail.com>
Message-ID: <20080215231918.C111611EC41@www.antlr.org>

At 10:17 16/02/2008, Darach Ennis wrote:
>However the dummy-fragment approach is counter-intuitive at best 
>because the
>lexer rules FLOAT and NUMBER are what I'm using in my parser 
>rules section. But these
>are fragment rules... so this is bad practice!
>
>The fact that 'top-level' lexer rules can emit types and fragment 
>rules cannot isn't
>mentioned in that section of the book. The 'fragment' keyword 
>merely infers the
>intended (ie: not mandated) visibility of the rule. So the 
>'dummy-fragment approach'
>is more of a lucky side-effect adopted as a feature? Thankfully, 
>ANTLR doesn't
>complain when fragment rules are referred to directly in parser 
>rules...

Well, not quite.  What actually happens is that every named lexer 
rule (including those listed in the "tokens" block) gets assigned 
a token type id -- you can see this in the .tokens file that it 
generates.

At the parser level, you are not referring to rules as such, you 
are just saying "I am expecting a token with this type id".

Every lexer has a single automatic rule ("Tokens", with the 
generated code in the mTokens method) which is what really gets 
called to generate the token stream.  This rule automatically 
refers to all lexer rules (and non-empty "tokens" block entries), 
except for those marked as being "fragment"s.  The rules called by 
the Tokens rule are usually called "top level rules".

Each call to the mTokens method is expected to generate exactly 
one token; while by default the token type will match that of the 
top-level rule being called, but that rule can assign a different 
type if it wants to.  That's what is in play here.  Since all 
lexer rules (including fragments) have type ids, any of them are 
possible values.

>fragment DIGIT: '0'..'9'; // this is a genuine fragment rule
>imaginary NUMBER: DIGIT+; // this is an imaginary / special token
>imaginary FLOAT: NUMBER DOT NUMBER; // this is an imaginary / 
>special token
>generator INT_OR_FLOAT
>   :  NUMBER // => NUMBER is implicit here?
>      ( (DOT DIGIT) => DOT NUMBER { $type = FLOAT; } )?
>   ;

I agree.  I find it a bit irritating that I can't say "I'm 
creating this rule just for convenience; it doesn't need a token 
type id".  Although I'd probably be happier with something like 
this:

tokens { FLOAT; }          // imaginary: type id generated but no 
warning
fragment DIGIT: '0'..'9';  // fragment: no type id generated
fragment NUMBER: DIGIT+;   // again, no type id
INT                        // type id generated
   : NUMBER
     ( (DOT DIGIT) => DOT NUMBER { $type = FLOAT; } )?
   ;

This actually *is* valid syntax right now, but for some weird 
reason the use of purely imaginary tokens (those in the tokens 
block without bodies) started generating warnings for no apparent 
reason a while ago, and fragments have always generated type ids 
(and I don't think they should).

>       Because ANTLR assumes that all lexer rules are valid 
> tokens, you must prefix
>       factored "helper rules" with the fragment keyword. This 
> keyword tells ANTLR
>       that you intend for this rule to be called only by other 
> rules and that it
>       should not yield a token to the parser.
[...]
>       The token type (nonzero positive integer) of the token 
> such as INT;
>       translates to a call to getType().
>
>No mention of a restriction for fragment rules there, so one 
>should be able to manipulate the type information in this case.

No, I think you're misinterpreting.  The first paragraph basically 
says "rules marked with 'fragment' don't generate tokens", while 
the second says "$type holds the type id for the token that will 
be generated".  From the combination it should be evident that 
$type is not valid in fragment rules.

>So when I see the keyword 'fragment' it is explicitly 
>communicating 'do not refer to me in a parser rule'.

No, it's saying "I don't automatically generate a token", which is 
not quite the same thing.


From antlr at mirality.co.nz  Fri Feb 15 15:24:17 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 16 Feb 2008 12:24:17 +1300
Subject: [antlr-interest] use of += with * in C#
In-Reply-To: <BAYC1-PASMTP0791886C10141D1AE45DC8F5260@CEZ.ICE>
References: <BAYC1-PASMTP0791886C10141D1AE45DC8F5260@CEZ.ICE>
Message-ID: <20080215232436.A886D11EB20@www.antlr.org>

At 12:18 16/02/2008, Benjamin Shropshire wrote:
 >document
 >    :
 >    (i += import)*
 >     EOF
 >      {foreach(string t in $i) Console.Write("\n>>"+(t));}
 >    ;
 >
 >import returns [string s]
 >    : 'import' (' ' | '\t')+ FText eol_ {$s=$FText.Text;}
 >    ;

$i is not a list of strings, it is a list of "import rule return 
structures".  (And I'm not exactly sure what type name that is; 
you'll need to check the generated code.)  This is partly because 
rules are permitted to return multiple things.

So you'd need to change the code in the document rule to:

   foreach (someType t in $i) Console.Write("\n>>" + t.s);

(replacing someType with the actual return type of the import 
rule.)


From timm.turn at gmail.com  Fri Feb 15 16:02:36 2008
From: timm.turn at gmail.com (Timmy Turner)
Date: Sat, 16 Feb 2008 01:02:36 +0100
Subject: [antlr-interest] [Newbie] What do you think of my grammar?
	(sql-like, for downloading websites)
Message-ID: <d4de96670802151602r6f180f37y1ab24b205a7d70a6@mail.gmail.com>

Hi there!

I have created a little sql-like language for downloading websites, and used
antlr to generate the parser/lexer.

To keep the post short, I put the grammar-definition on this page:
http://nopaste.php-quake.net/17078

It's used like: select pages, images from '
http://en.wikipedia.org/wiki/Main_Page' where url like '(.*)en\.(.*)'

This works great so far (Terence Parr's book was a great help), but i'm
still looking for a way of ignoring comments during a statement:

select
  pages, images
from
  'http://en.wikipedia.org/wiki/Main_Page'
--This is a comment that should be ignored
where url like '(.*)en\.(.*)'


do you have any idea how to implement this?

Also, since this is the first language i have ever designed, I'd like to ask
you what you think of it - have I made any common mistakes, or are there
maybe any best practices I should stick with?

I'm also looking for some sort of a java-gui-component capable of basic
syntax-highlighting for my language. I tried JEdit-Syntax (
http://syntax.jedit.org/ ) and adapting the syntax-highlighting to my needs
was very easy, as there was alread tsql support, but unfortunately this
component has by far too many bugs - I tried fixing them and got most of it
working but i can't seem to figure out a way to fix the horizontal
scrollbar. Maybe anyone of you knows a component suitable for me?

Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080216/80ad7383/attachment.html 

From shro8822 at vandals.uidaho.edu  Fri Feb 15 16:43:19 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Fri, 15 Feb 2008 16:43:19 -0800
Subject: [antlr-interest] Non trivial C# examples
Message-ID: <BAYC1-PASMTP15172554E25EBA2043E7DAF5270@CEZ.ICE>

Does anyone known of where I can find some non trivial working examples 
of antlr projects done in C#?

I'm not looking for projects people have done but stuff that was written 
specifically to be an example for new users. The examples that are used 
in the documentation are so trivial that they don't get to what I need 
and the projects I can find are complicated enough that I can't find the 
stuff I need.


From shro8822 at vandals.uidaho.edu  Fri Feb 15 17:00:08 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Fri, 15 Feb 2008 17:00:08 -0800
Subject: [antlr-interest] Why cant += be used without an "output=" option
	(and other Q's)
Message-ID: <BAYC1-PASMTP0539AF89FCFB385F0B3FCFF5270@CEZ.ICE>

I want to create a grammar that has a repeated term in it:

rule : red+;

Then I want to add an action to this rule that collects the red's and 
returns the list of them. Thats shouldn't be to hard:

rule returns [IList l ]:  (i += red)+ {$l = $i};

but antlr now insistent I add

options { output=template; }
or
options { output=AST; }

but both of these are worthless for my needs; 'template' turns i into a 
list of StringTemplate's and 'AST' try to do something with tree's. What 
I want is to just get a list of the things that red returns.

Is this even possible?

If it isn't that either antlr has a _serious_ design flaw or it has bean 
_seriously_ miss-marketed. This operation (parse a tree and give me, the 
user, unrestricted and direct access to the actual things that was 
parsed by the referenced rules) is the ONLY thing I was looking for when 
I found antlr. From a first pass over the documentation I got the 
impression that it would give me this. From trying to do this, I'm 
beginnings to fear that it is utterly impossible!

Seriously people, you seem to have a major problem. If antlr isn't 
supposed to do what I'm wanting it to do, why has it taken me 2 weeks to 
learn this? If antlr can do this, why haven't I yet bean able to figure 
out how? (I really hope it isn't the other possibility that antlr is 
just flat broken.)

Benjamin Shropshire




From darach at gmail.com  Fri Feb 15 17:36:59 2008
From: darach at gmail.com (Darach Ennis)
Date: Sat, 16 Feb 2008 01:36:59 +0000
Subject: [antlr-interest] Lexical error recovery by manual symbol
	(character) insertion/deletion?
In-Reply-To: <47b61df4.2286460a.1be0.5615SMTPIN_ADDED@mx.google.com>
References: <4d596d820802150614ha6185aem40407dd60dd8215d@mail.gmail.com>
	<4d596d820802150734n15becfabl4010b8a08a20ca26@mail.gmail.com>
	<47b5eb90.0c87460a.3e29.ffff999aSMTPIN_ADDED@mx.google.com>
	<4d596d820802151317gdc5c2a0u5ab9113a73fcf65f@mail.gmail.com>
	<47b61df4.2286460a.1be0.5615SMTPIN_ADDED@mx.google.com>
Message-ID: <4d596d820802151736nb9cd0d8vde232b974f104d59@mail.gmail.com>

Hi Gavin,

I think you've analysed this a lot more deeply than I have. Your
responses are being really helpful to increasing my understanding,
so thank you! :)


> I agree.  I find it a bit irritating that I can't say "I'm
> creating this rule just for convenience; it doesn't need a token
> type id".  Although I'd probably be happier with something like
> this:
>
> tokens { FLOAT; }          // imaginary: type id generated but no
> warning
> fragment DIGIT: '0'..'9';  // fragment: no type id generated
> fragment NUMBER: DIGIT+;   // again, no type id
> INT                        // type id generated
>    : NUMBER
>     ( (DOT DIGIT) => DOT NUMBER { $type = FLOAT; } )?
>   ;
>

Yes, agreed. I tried a similar syntax early on as the use of tokens { ... }
for
lexer rules seems fairly natural. However, I used the same syntax a little
differently:

tokens { FLOAT; INT; }
fragment DIGIT: '0'..'9';
fragment NUMBER
  : DIGIT+ => INT // making this explicit is good documentation
    ( (DOT DIGIT) => DOT NUMBER { $type = FLOAT; } )?
  ;

This is a little more self-documenting (to my eyes) at the expense of being
a little
more verbose. Using the rule name's type id in the default case is clever
but there
are cases where it would not work so well:

fragment DIRECTIVE:
  '-' (
        'define' => DEFINE
      | 'include' => INCLUDE
      | 'if' => IF
      | ... etc
    );

In this case the '-' alone has no real meaning. So using the parent rules
type id
could be seen as a clever optimization from a certain perspective.

Regards,

Darach.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080216/21c4143b/attachment.html 

From tbrandonau at gmail.com  Fri Feb 15 17:45:05 2008
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Sat, 16 Feb 2008 12:45:05 +1100
Subject: [antlr-interest] Why cant += be used without an "output="
	option (and other Q's)
In-Reply-To: <BAYC1-PASMTP0539AF89FCFB385F0B3FCFF5270@CEZ.ICE>
References: <BAYC1-PASMTP0539AF89FCFB385F0B3FCFF5270@CEZ.ICE>
Message-ID: <ebc876d70802151745n6cfbd962ib48f115f4da27b5d@mail.gmail.com>

On Feb 16, 2008 12:00 PM, Benjamin Shropshire
<shro8822 at vandals.uidaho.edu> wrote:
> I want to create a grammar that has a repeated term in it:
>
> rule : red+;
>
> Then I want to add an action to this rule that collects the red's and
> returns the list of them. Thats shouldn't be to hard:
>
> rule returns [IList l ]:  (i += red)+ {$l = $i};
>
> but antlr now insistent I add
>
> options { output=template; }
> or
> options { output=AST; }
>
> but both of these are worthless for my needs; 'template' turns i into a
> list of StringTemplate's and 'AST' try to do something with tree's. What
> I want is to just get a list of the things that red returns.
>
> Is this even possible?
>
This is a bug (or perhaps better an oversight) in ANTLR 3.0.1 that I
believe has been fixed in the latest intermediate release of ANTLR.
ANTLR did not allow labels in parsers without an output. I think the
intermediate builds should be fairly stable as far as basic
functionality goes and I believe a release is due fairly soon. Or as a
workaround in the current version you can add output=AST and ignore
the AST tree, you will be able to access both the returned AST and any
custom rule returns (use $i.l instead of just $i). Or you could build
an AST and then have your application deal with this instead of
directly collecting a list.
> If it isn't that either antlr has a _serious_ design flaw or it has bean
> _seriously_ miss-marketed. This operation (parse a tree and give me, the
> user, unrestricted and direct access to the actual things that was
> parsed by the referenced rules) is the ONLY thing I was looking for when
> I found antlr. From a first pass over the documentation I got the
> impression that it would give me this. From trying to do this, I'm
> beginnings to fear that it is utterly impossible!
>
> Seriously people, you seem to have a major problem. If antlr isn't
> supposed to do what I'm wanting it to do, why has it taken me 2 weeks to
> learn this? If antlr can do this, why haven't I yet bean able to figure
> out how? (I really hope it isn't the other possibility that antlr is
> just flat broken.)
I can't say exactly why it took you so long to get to this point. I
would imagine a need to familiarise yourself with the more basic
aspects of ANTLR played some role. The fact that you ran into an issue
in the current release played a fairly major role. The fact that this
isn't a totally standard way of proceeding doesn't help either. More
usually you would output an AST or use templates to generate output so
this sort of processing isn't the major focus of ANTLR. It should do
it certainly but the documentation and testing isn't focussed on it.
And certainly the state of the ANTLR documentation doesn't help. This
has been discussed. There is the book which is currently the most
complete reference, though in your case even this may not have made
this immediately obvious due to the previous point. As an open source
project Terrence directs his time based on his own needs, as he
should. There have been more pressing concerns for him than
documentation. Others are free to work on the documentation through
the wiki, this is still a work in progress though. If you are
dissatisfied with this then perhaps a commercial product would better
meet your demands.

Tom.
>
> Benjamin Shropshire
>
>
>
>

From tbrandonau at gmail.com  Fri Feb 15 17:48:07 2008
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Sat, 16 Feb 2008 12:48:07 +1100
Subject: [antlr-interest] Why cant += be used without an "output="
	option (and other Q's)
In-Reply-To: <ebc876d70802151745n6cfbd962ib48f115f4da27b5d@mail.gmail.com>
References: <BAYC1-PASMTP0539AF89FCFB385F0B3FCFF5270@CEZ.ICE>
	<ebc876d70802151745n6cfbd962ib48f115f4da27b5d@mail.gmail.com>
Message-ID: <ebc876d70802151748i533fd44bkdd651bb5b0a5ec7f@mail.gmail.com>

Oh, I notice from your other post that it looks like you are using C#.
The latest intermediate builds may not work with C# as they are
primarily Java builds with other targets operating to different
schedules so it may not be possible to use that.

Tom.

From tbrandonau at gmail.com  Fri Feb 15 17:54:06 2008
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Sat, 16 Feb 2008 12:54:06 +1100
Subject: [antlr-interest] Non trivial C# examples
In-Reply-To: <BAYC1-PASMTP15172554E25EBA2043E7DAF5270@CEZ.ICE>
References: <BAYC1-PASMTP15172554E25EBA2043E7DAF5270@CEZ.ICE>
Message-ID: <ebc876d70802151754p7783e5d2n1c131b22fafb0076@mail.gmail.com>

Check out the examples package. Available from the ANTLR download page
or from http://www.antlr.org/download/examples-v3.tar.gz

Tom.

On Feb 16, 2008 11:43 AM, Benjamin Shropshire
<shro8822 at vandals.uidaho.edu> wrote:
> Does anyone known of where I can find some non trivial working examples
> of antlr projects done in C#?
>
> I'm not looking for projects people have done but stuff that was written
> specifically to be an example for new users. The examples that are used
> in the documentation are so trivial that they don't get to what I need
> and the projects I can find are complicated enough that I can't find the
> stuff I need.
>
>

From stevagewp at gmail.com  Fri Feb 15 20:22:43 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Sat, 16 Feb 2008 15:22:43 +1100
Subject: [antlr-interest] ANTLR/ANTLRworks error message suggestion
Message-ID: <b8ceeef70802152022j19e2c5d0rec33e0bfd6c9f8a3@mail.gmail.com>

Periodically ANTLRworks gives me the message "Could not even do k=1
for decision 114". I vaguely understand that this means that some set
of rules is horrendously ambiguous and ANTLR couldn't analyse it. But
the message isn't very useful as it doesn't tell me where the problem
is. Clicking "show console" doesn't help much either, as the last line
of the console reads:


[15:17:57] error(10):  internal error:
org.antlr.tool.Message.toString(Message.java:124): Assertion failed!
Message ID 10 created but is not present in errorMsgIDs or
warningMsgIDs.


Prior to which there are just lots of warnings. If there is any
possibility of providing names of rules rather than decision numbers
(which I'm not sure how to use), that would be very helpful.

Possibly related issue, I'm getting this error message which I can't
interpret at all:

[15:17:56] error(100): C:\antlr\mediawiki11intransit.g:0:0: syntax
error: buildnfa: <AST>:1162:8: expecting EOA, found 'SLASH'

The rule is:

fragment EXTENSION_TAG_CLOSE:
    LT SLASH SAME_EXTENSION_NAME (SPACE* ATTR)? SPACE* (SLASH? GT)
  ;


Can anyone explain it? Again, maybe a slightly more descriptive error
message would help?

Steve

From stevagewp at gmail.com  Fri Feb 15 23:29:07 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Sat, 16 Feb 2008 18:29:07 +1100
Subject: [antlr-interest] Can lexer rules return values?
Message-ID: <b8ceeef70802152329l228a14aay16d8a249371b02fc@mail.gmail.com>

I was sure I read something about lexer fragment rules being able to
return values, but it doesn't seem to work. My rule:

fragment EXTENSION_TAG_OPEN returns [boolean selfclose=false]:
    LT EXTENSION_NAME (SPACE* ATTR)? SPACE* (SLASH {$selfclose=true;})? GT
  ;


The errors:

[18:19:31] C:\antlr\mediawiki11intransitLexer.java:3262: cannot return
a value from method whose result type is void
[18:19:31]             mLT(); if (failed) return selfclose;

etc.

The generated code:
    // $ANTLR start EXTENSION_TAG_OPEN
    public final void mEXTENSION_TAG_OPEN() throws RecognitionException {
        boolean selfclose = false;

        try {
            // C:\\antlr\\mediawiki11intransit.g:1157:62: ( LT
EXTENSION_NAME ( ( SPACE )* ATTR )? ( SPACE )* ( SLASH )? GT )
            // C:\\antlr\\mediawiki11intransit.g:1158:5: LT
EXTENSION_NAME ( ( SPACE )* ATTR )? ( SPACE )* ( SLASH )? GT
            {
            mLT(); if (failed) return selfclose;

etc.

Am I doing something wrong?

Steve

From oliver.kowalke at gmx.de  Fri Feb 15 23:35:44 2008
From: oliver.kowalke at gmx.de (Oliver Kowalke)
Date: Sat, 16 Feb 2008 08:35:44 +0100
Subject: [antlr-interest] C-Runtime in C++ prog
Message-ID: <200802160835.44774.oliver.kowalke@gmx.de>

Hello,
because the C++-runtime (antlr-v3) is not available yet - could I use the 
C-runtime in my C++ application and embedd C++ code in the grammar rules?

Does the C-Runtime report errors as return values (I didn't found an example 
in the documentation)?

best regards,
Oliver

From antlr at mirality.co.nz  Fri Feb 15 23:47:45 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 16 Feb 2008 20:47:45 +1300
Subject: [antlr-interest] Lexical error recovery by manual symbol
 (character) insertion/deletion?
In-Reply-To: <4d596d820802151736nb9cd0d8vde232b974f104d59@mail.gmail.com
 >
References: <4d596d820802150614ha6185aem40407dd60dd8215d@mail.gmail.com>
	<4d596d820802150734n15becfabl4010b8a08a20ca26@mail.gmail.com>
	<47b5eb90.0c87460a.3e29.ffff999aSMTPIN_ADDED@mx.google.com>
	<4d596d820802151317gdc5c2a0u5ab9113a73fcf65f@mail.gmail.com>
	<47b61df4.2286460a.1be0.5615SMTPIN_ADDED@mx.google.com>
	<4d596d820802151736nb9cd0d8vde232b974f104d59@mail.gmail.com>
Message-ID: <20080216074758.BAD2C11EB4F@www.antlr.org>

At 14:36 16/02/2008, Darach Ennis wrote:
>tokens { FLOAT; INT; }
>fragment DIGIT: '0'..'9';
>fragment NUMBER
>   : DIGIT+ => INT // making this explicit is good documentation
>     ( (DOT DIGIT) => DOT NUMBER { $type = FLOAT; } )?
>   ;

The problem with that is that if NUMBER is a fragment it won't 
ever be called by the root Tokens rule, and if it is called by 
another lexer rule it can't then generate a token so it's fairly 
pointless :)  You're also needlessly creating a NUMBER rule (and 
then using it inappropriately in the FLOAT branch).

To fully expand the rules I posted, making everything explicit 
(this almost works as is -- you'd probably have to convert the 
FLOAT token to a non-empty fragment rule to avoid a warning 
though):

tokens { FLOAT; }
fragment DIGIT: '0'..'9';
INT
   : DIGIT+
     (  /* nothing -- it's an INT */
     |  (DOT DIGIT) => DOT DIGIT+ { $type = FLOAT; }
     )
   ;

The "default" output of the rule should be the name of the rule 
itself.  The additional cases just allow for a bit of flexibility 
in case two output tokens have common indefinite-length prefixes.

>fragment DIRECTIVE:
>   '-' (
>         'define' => DEFINE
>       | 'include' => INCLUDE
>       | 'if' => IF
>       | ... etc
>     );

Again, if that's a fragment it won't ever be called and none of 
those would result.  However, what you're trying to do there is 
(usually) fairly straightforward with the current syntax (I say 
"usually" because with certain patterns the lexer can sometimes 
get confused.  But that's being worked on):

tokens {
   DEFINE = '-define';
   INCLUDE = '-include';
   IF = '-if';
   ...
}


From antlr at mirality.co.nz  Fri Feb 15 23:54:19 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 16 Feb 2008 20:54:19 +1300
Subject: [antlr-interest] Can lexer rules return values?
In-Reply-To: <b8ceeef70802152329l228a14aay16d8a249371b02fc@mail.gmail.co
 m>
References: <b8ceeef70802152329l228a14aay16d8a249371b02fc@mail.gmail.com>
Message-ID: <20080216075434.D081511EB7D@www.antlr.org>

At 20:29 16/02/2008, Steve Bennett wrote:
 >I was sure I read something about lexer fragment rules being 
able
 >to return values, but it doesn't seem to work. My rule:

IIRC, there was some discussion that they ought to be able to, but 
I don't think they can at the moment, no.

I think you can use scopes (though I also recall some discussion 
that scopes didn't work in the lexer, but I think that was for a 
much older version), or failing that, some member variables.

 >fragment EXTENSION_TAG_OPEN returns [boolean selfclose=false]:
 >    LT EXTENSION_NAME (SPACE* ATTR)? SPACE* (SLASH
 >{$selfclose=true;})? GT
 >  ;

This is looking complicated enough (and with embedded whitespace 
to boot) that perhaps it ought to be in the parser instead.


From stevagewp at gmail.com  Sat Feb 16 01:22:45 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Sat, 16 Feb 2008 20:22:45 +1100
Subject: [antlr-interest] Can lexer rules return values?
In-Reply-To: <47b696bb.21d7720a.377b.67bdSMTPIN_ADDED@mx.google.com>
References: <b8ceeef70802152329l228a14aay16d8a249371b02fc@mail.gmail.com>
	<47b696bb.21d7720a.377b.67bdSMTPIN_ADDED@mx.google.com>
Message-ID: <b8ceeef70802160122n523822c7i8979d3178e3eeb44@mail.gmail.com>

On 2/16/08, Gavin Lambert <antlr at mirality.co.nz> wrote:
> IIRC, there was some discussion that they ought to be able to, but
> I don't think they can at the moment, no.

Maybe I was thinking of rule parameters.


> I think you can use scopes (though I also recall some discussion
> that scopes didn't work in the lexer, but I think that was for a
> much older version), or failing that, some member variables.

I'll try member vars.

> This is looking complicated enough (and with embedded whitespace
> to boot) that perhaps it ought to be in the parser instead.

My knowledge on such things is pretty limited, but I think I'm better
off with it in the lexer. I need to detect these embedded XML-ish
tags, then opaquely match everything through to the matching close
tag, and then farm the lot out to an external program. I don't want
any kind of AST for the tag or its contents, for example. However, I
guess I will end up with a massive token.

I'm a bit confused about what will happen if I use the parser instead:
I will get a sequence of basically meaningless tokens whose types I
will just ignore. Maybe it's ok.

Steve

From stevagewp at gmail.com  Sat Feb 16 06:22:27 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Sun, 17 Feb 2008 01:22:27 +1100
Subject: [antlr-interest] ANTLR could not analyze...
Message-ID: <b8ceeef70802160622x309002d5m170f8b7563c35e29@mail.gmail.com>

[01:19:04] warning(205): mediawiki11intransit.g:302:4: ANTLR could not
analyze this decision in rule table_line; often this is because of
recursive rule references visible from the left edge of alternatives.
ANTLR will re-analyze the decision with a fixed lookahead of k=1.
Consider using "options {k=1;}" for that decision and possibly adding
a syntactic predicate.

What does this warning mean? What can I do about it?

table_line
 options { k= 1; }
:
   (
   (PIPE PLUS) => table_caption
   | (PIPE HYPHEN) => table_row_separator
   | (EXCLAMATION) => table_header_cells
   | (PIPE ~RIGHT_BRACE) => table_data_cells
   );


As you can see, I'm using options k=1, and no shortage of syntactic
predicates - what else can I do?

Aside question: What exactly is the scope of options? Does setting an
option on a rule carry through to rules referred to in that rule?

Steve

From jimi at temporal-wave.com  Sat Feb 16 07:55:27 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 16 Feb 2008 07:55:27 -0800
Subject: [antlr-interest] Verifying bug reports in C runtime, beta testers,
	unit tests
Message-ID: <"LF4E2B79F92174b859735097812C59227.1203177332.scalix.temporal-wave.com*"@MHS>

I am just about finished with the updates for the C runtime for the
impending ANTLR 3.1 release, but I need to verify a few things and look
for a little help.

 

Firstly, a number of you sent me bug reports, which I believe I kept
track of correctly, but I think I missed putting some of them in Jira.
Then my new mail server trashed all my archives and an eagle swooped
down from the sky and stole my homework, and? The long and short of it
is that in order that I can make sure I really have covered all the
reported bugs, if you have reported a bug or asked for a feature from me
since the last release, please send me a repeat email with the bug and I
will endeavor to ensure that the bugs are fixed. Sorry for the extra
work, but in future I will be putting things straight into Jira as I get
them rather than fooling myself that I will have the time to verify the
bugs first and so on. I am fine with getting repeat reports and won?t  b
upset or offended, so just email me anything you have in case I have
missed it. Thanks in advance for that.

 

 

Secondly, once the code is testable I would hope that some of you might
wish to try it out for m and tell me of any bugs that you find. I have
not had a lot of testing time for this release so if a few of us get
together then the testing will take no time at all. I don?t need anyone
to find the actual reason for the bugs, just give me grammar snippets or
code snippets and tell me what goes wrong. Let m know if you have time
to do that.

 

Thirdly, the other targets have unit tests that can be run for
regressions and so on. Apart from hating producing unit test, I always
think it is a good idea for someone other than the developer to write
such things. If anyone feels like they are pedantic enough to write good
unit tests for the C runtime (I don?t care how they are written etc, so
long as it does not involve installing 60 Java jars to do it ;-), then
please let me know and I will arrange some access to perforce for
writing these with Ter.

 

Finally, I intend that this release will allow the generated code to be
compiled as C++. This does not mean that the libraries will compile as
C++, they will still be an external C library, but it should mean that
you can use your own C++ classes in your grammar and they will compile
just fine. The output file will still be a .c, so it is up to you to
switch on whatever flags you need to compile it as C++. I would like to
know if anyone is willing to test this out as soon as I say go. There is
nothing special to do but try it out, but I would just like to know that
one or two people HAVE tried it out, rather than just hope they have.

 

Finally finally, this release will come with a huge improvement in API
and usage documentation, which will be placed on the web site from the
usual API documentation links on the front page.  I am hoping that a few
people might run through it looking for errors or places where my
Yorkshire/Cockney/American grammar combination doesn?t make sense.

 

Thanks for you help,

 

Jim


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080216/505d0195/attachment.html 

From jimi at temporal-wave.com  Sat Feb 16 07:57:25 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 16 Feb 2008 07:57:25 -0800
Subject: [antlr-interest] case-insensitivity not in v3?!
In-Reply-To: <200802152355.06095.oliver.kowalke@gmx.de>
Message-ID: <"L48B93538269E4faaAF4FF6880CA48958.1203177455.scalix.temporal-wave.com*"@MHS>

If you type case insensitivity in the search box on the front page, the 
first link is:

http://www.antlr.org/wiki/pages/viewpage.action?pageId=1782

Jim???!!??!!




> -----Original Message-----
> From: Oliver Kowalke [mailto:oliver.kowalke at gmx.de]
> Sent: Friday, February 15, 2008 2:55 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] case-insensitivity not in v3?!
> 
> Hi,
> is it correct that in ANTLR v3.x has no such options caseSensitive and
> caseSensitiveLiterals as ANTLR v2.x?
> best regards,
> Oliver



From jimi at temporal-wave.com  Sat Feb 16 08:10:35 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 16 Feb 2008 08:10:35 -0800
Subject: [antlr-interest] C-Runtime in C++ prog
In-Reply-To: <200802160835.44774.oliver.kowalke@gmx.de>
Message-ID: <"LEBCA0EE1F513471bADD75861F1A0724E.1203178242.scalix.temporal-wave.com*"@MHS>

In the next release (coming soon) you will be able to embed C++ code in 
your C grammar as the output will be compilable as C++. However, you 
should not really need to put C++ code of any importance in the grammar, 
just make it call an external API that has extern "C" linkage. You 
should keep the code in your grammar files to an absolute minimum, just 
for maintenance reasons really.

Not sure what you mean by errors as return values. When a syntax error 
occurs, it fires a series of function calls that culminate in a call to 
displayRecognitionError. However, you can override these functions 
(usually you only need to override the displayRecognitionError) and make 
them do whatever you like.

The next release is coming shortly and this has lots more documentation. 
I will talk to Ter about putting the new doxygen API stuff up there now 
as while some of it wont work until 3.1, there is lots of good 
background information in there.

So, as far as C++ is concerned:

3.0

Compile runtime as C, compile generated code as C, use C in actions, 
call external "C" API, link with C runtime library

3.1

Compile runtime as C, compile generated code as C++ (if you need to), 
use C+ in actions, call C++ stuff, link with C runtime API.

My feeling is that other than some wrapper classes for tokens and so on, 
that might be all that C++ people really need, but we will see how it 
pans out.

Jim




> -----Original Message-----
> From: Oliver Kowalke [mailto:oliver.kowalke at gmx.de]
> Sent: Friday, February 15, 2008 11:36 PM
> To: antlr-interest
> Subject: [antlr-interest] C-Runtime in C++ prog
> 
> Hello,
> because the C++-runtime (antlr-v3) is not available yet - could I use
> the
> C-runtime in my C++ application and embedd C++ code in the grammar
> rules?
> 
> Does the C-Runtime report errors as return values (I didn't found an
> example
> in the documentation)?
> 
> best regards,
> Oliver



From oliver.kowalke at gmx.de  Sat Feb 16 11:15:23 2008
From: oliver.kowalke at gmx.de (Oliver Kowalke)
Date: Sat, 16 Feb 2008 20:15:23 +0100
Subject: [antlr-interest] C-Runtime in C++ prog
In-Reply-To: <"LEBCA0EE1F513471bADD75861F1A0724E.1203178242.scalix.temporal-wave.com*"@MHS>
References: <"LEBCA0EE1F513471bADD75861F1A0724E.1203178242.scalix.temporal-wave.com*"@MHS>
Message-ID: <200802162015.24034.oliver.kowalke@gmx.de>

Am Samstag, 16. Februar 2008 17:10:35 schrieb Jim Idle:
> In the next release (coming soon) you will be able to embed C++ code in
> your C grammar as the output will be compilable as C++. However, you
> should not really need to put C++ code of any importance in the grammar,
> just make it call an external API that has extern "C" linkage.

I refered to actions - as I can remeber correctly ANTLR ignores the content of 
actions. It seams I was wrong.

> You 
> should keep the code in your grammar files to an absolute minimum, just
> for maintenance reasons really.

I'm sorry I don't understand this. If I implement an interpreter I have to put 
in code inside the actions - right?

> Not sure what you mean by errors as return values. When a syntax error
> occurs, it fires a series of function calls that culminate in a call to
> displayRecognitionError. However, you can override these functions
> (usually you only need to override the displayRecognitionError) and make
> them do whatever you like.

I mean in C++ you throw exceptions (2.x version of ANTLR) in the case of 
errors. But exceptions are not part of C.

> The next release is coming shortly and this has lots more documentation.
> I will talk to Ter about putting the new doxygen API stuff up there now
> as while some of it wont work until 3.1, there is lots of good
> background information in there.

that would be greate

> So, as far as C++ is concerned:
>
> 3.0
>
> Compile runtime as C, compile generated code as C, use C in actions,
> call external "C" API, link with C runtime library
>
> 3.1
>
> Compile runtime as C, compile generated code as C++ (if you need to),
> use C+ in actions, call C++ stuff, link with C runtime API.

OK

> My feeling is that other than some wrapper classes for tokens and so on,
> that might be all that C++ people really need, but we will see how it
> pans out.

best regards,
Oliver

From shro8822 at vandals.uidaho.edu  Sat Feb 16 11:25:33 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Sat, 16 Feb 2008 11:25:33 -0800
Subject: [antlr-interest] Why cant += be used without an
 "output="	option (and other Q's)
In-Reply-To: <ebc876d70802151745n6cfbd962ib48f115f4da27b5d@mail.gmail.com>
References: <BAYC1-PASMTP0539AF89FCFB385F0B3FCFF5270@CEZ.ICE>
	<ebc876d70802151745n6cfbd962ib48f115f4da27b5d@mail.gmail.com>
Message-ID: <BAYC1-PASMTP0689D7552135AAF308BA82F5270@CEZ.ICE>

Thomas Brandon wrote:
> On Feb 16, 2008 12:00 PM, Benjamin Shropshire
> <shro8822 at vandals.uidaho.edu> wrote:
>   
>> I want to create a grammar that has a repeated term in it:
>>
>> rule : red+;
>>
>> Then I want to add an action to this rule that collects the red's and
>> returns the list of them. Thats shouldn't be to hard:
>>
>> rule returns [IList l ]:  (i += red)+ {$l = $i};
>>
>> but antlr now insistent I add
>>
>> options { output=template; }
>> or
>> options { output=AST; }
>>
>> but both of these are worthless for my needs; 'template' turns i into a
>> list of StringTemplate's and 'AST' try to do something with tree's. What
>> I want is to just get a list of the things that red returns.
>>
>> Is this even possible?
>>
>>     
> This is a bug (or perhaps better an oversight) in ANTLR 3.0.1 that I
> believe has been fixed in the latest intermediate release of ANTLR.
> ANTLR did not allow labels in parsers without an output. I think the
> intermediate builds should be fairly stable as far as basic
> functionality goes and I believe a release is due fairly soon. Or as a
> workaround in the current version you can add output=AST and ignore
> the AST tree, you will be able to access both the returned AST and any
> custom rule returns (use $i.l instead of just $i). Or you could build
> an AST and then have your application deal with this instead of
> directly collecting a list.
>   
>> If it isn't that either antlr has a _serious_ design flaw or it has bean
>> _seriously_ miss-marketed. This operation (parse a tree and give me, the
>> user, unrestricted and direct access to the actual things that was
>> parsed by the referenced rules) is the ONLY thing I was looking for when
>> I found antlr. From a first pass over the documentation I got the
>> impression that it would give me this. From trying to do this, I'm
>> beginnings to fear that it is utterly impossible!
>>
>> Seriously people, you seem to have a major problem. If antlr isn't
>> supposed to do what I'm wanting it to do, why has it taken me 2 weeks to
>> learn this? If antlr can do this, why haven't I yet bean able to figure
>> out how? (I really hope it isn't the other possibility that antlr is
>> just flat broken.)
>>     
> I can't say exactly why it took you so long to get to this point. I
> would imagine a need to familiarise yourself with the more basic
> aspects of ANTLR played some role.

I'm not shure "familiarise" is the correct word; maybe "find" would be 
better (more on that below)

>  The fact that you ran into an issue
> in the current release played a fairly major role.
OK
>  The fact that this
> isn't a totally standard way of proceeding doesn't help either. More
> usually you would output an AST or use templates to generate output so
> this sort of processing isn't the major focus of ANTLR.
    That right there is my question: why didn't I find this out in the 
first 5 minutes? First impressions are very important, if you put 
something out and at first it looks like one thing and it turns out it 
isn't, if the user doesn't find this out vary quickly, when they do they 
you will be luck if they don't feel like you tricked them. In my cases, 
I think that many of my issues have come from the fact that I don't 
known what questions to ask. Something isn't working the way I expect 
but I don't even known where the start looking for the solution (in my 
cases I wasted most of a day trying to find a syntax error when the real 
error was a philosophy one.

    Correct me if I'm wrong, but isn't what I'm doing the normal mode of 
approach for building a parser in something like yacc or bison? In my 
limited experience the normal approach has been let the generated parser 
find the pieces and let the user write the code to do something with it, 
in my case I was going to manually build the AST.

     The change I'm hoping for would take about 15-20 minutes by an 
expert in antlr: wright up a "this is how antler is expected to be used" 
paragraph that has all the "differences in approch" that antlr has with 
regards to other ways of building a parser (by-hand, yacc, etc). 
Probubly the hardest part would be figuring out where to put it on the 
website so that it would be found by anyone looking at antlr even if 
they arn't looking for it. I guess it would be a FNAQ page (frequently 
not (but should be) asked questions)
> If you are
> dissatisfied with this then perhaps a commercial product would better
> meet your demands.
>
>   
the part I'm dissatisfied with is the front page. As I see it there are 
a few critical pieces of information that need to be added (or be 
obversely linked  from it) these include a 2-3 sentence description of 
what antler expects the user to do ("Antlr is a system for building 
recognizers, token parsers and tree parsers. It is designed to be used 
to build token parsers from language agnostic grammars that are then 
used to feed language specific tree parsers to perform the custom data 
operations. <verbiage about StringTemplate> While it can operate in 
other modes these are what it is intended to do.")

Sorry about the rambling post:
Benjamin Shropshire

> Tom.


From shro8822 at vandals.uidaho.edu  Sat Feb 16 11:25:49 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Sat, 16 Feb 2008 11:25:49 -0800
Subject: [antlr-interest] Non trivial C# examples
In-Reply-To: <ebc876d70802151754p7783e5d2n1c131b22fafb0076@mail.gmail.com>
References: <BAYC1-PASMTP15172554E25EBA2043E7DAF5270@CEZ.ICE>
	<ebc876d70802151754p7783e5d2n1c131b22fafb0076@mail.gmail.com>
Message-ID: <BAYC1-PASMTP0898AFA48480D8D8AB8E8DF5270@CEZ.ICE>

Thomas Brandon wrote:
> Check out the examples package. Available from the ANTLR download page
> or from http://www.antlr.org/download/examples-v3.tar.gz
>
> Tom.
>
>   
Don't take my word choice to seriously but:

WHY THE #$%@#$@ isn't that link on the FRONT PAGE!?!?!?!

:-b

That link or a link to some sort of index* to it should be on the front 
page (I think putting it on the top-of-page link bar would be about 
right). Also I think it would be handy to have more examples of minimal 
grammars that demonstrate features. (I rather hope the code for these 
already exist in antlr's test suite.)

Benjamin Shropshire

* "example foo.g shows uses of ___, example bar.g shows use of ____, 
example baz.g uses AST, example pickle.g uses StringTemplate, ..." 
sorted with things that do stuff "the antlr way" at the top.

> On Feb 16, 2008 11:43 AM, Benjamin Shropshire
> <shro8822 at vandals.uidaho.edu> wrote:
>   
>> Does anyone known of where I can find some non trivial working examples
>> of antlr projects done in C#?
>>
>> I'm not looking for projects people have done but stuff that was written
>> specifically to be an example for new users. The examples that are used
>> in the documentation are so trivial that they don't get to what I need
>> and the projects I can find are complicated enough that I can't find the
>> stuff I need.
>>
>>
>>     
>
>   


From jimi at temporal-wave.com  Sat Feb 16 11:04:01 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 16 Feb 2008 11:04:01 -0800
Subject: [antlr-interest] C-Runtime in C++ prog
In-Reply-To: <200802162015.24034.oliver.kowalke@gmx.de>
Message-ID: <"L152FC2437DF54dcfBFC0A77426CA58CC.1203188653.scalix.temporal-wave.com*"@MHS>

> -----Original Message-----
> From: Oliver Kowalke [mailto:oliver.kowalke at gmx.de]
> > just make it call an external API that has extern "C" linkage.
> 
> I refered to actions - as I can remeber correctly ANTLR ignores the
> content of
> actions. It seams I was wrong.

ANTLR does, but the C/C++ compiler doesn't. The generated code is only C 
compatible right now.

> > You
> > should keep the code in your grammar files to an absolute minimum,
> just
> > for maintenance reasons really.
> 
> I'm sorry I don't understand this. If I implement an interpreter I 
have
> to put
> in code inside the actions - right?

Yes, but all it need do is call an external function. You dont have to 
embed 500 lines of C++ code in the action. The external funcitno call 
can have C linkage and then it all works fine.

> > Not sure what you mean by errors as return values. When a syntax
> error
> > occurs, it fires a series of function calls that culminate in a call
> to
> > displayRecognitionError. However, you can override these functions
> > (usually you only need to override the displayRecognitionError) and
> make
> > them do whatever you like.
> 
> I mean in C++ you throw exceptions (2.x version of ANTLR) in the case
> of
> errors. But exceptions are not part of C.

Hence it is a sequence of function calls and then drops out of the rule 
function properly because it detects that error state. You don't need to 
do anything but decide what to do when you are asked to print an error.

JiIm

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Jim Idle.vcf
Type: text/x-vcard
Size: 1863 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080216/40725a75/attachment.vcf 

From tbrandonau at gmail.com  Sat Feb 16 11:57:38 2008
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Sun, 17 Feb 2008 06:57:38 +1100
Subject: [antlr-interest] Non trivial C# examples
In-Reply-To: <BAYC1-PASMTP0898AFA48480D8D8AB8E8DF5270@CEZ.ICE>
References: <BAYC1-PASMTP15172554E25EBA2043E7DAF5270@CEZ.ICE>
	<ebc876d70802151754p7783e5d2n1c131b22fafb0076@mail.gmail.com>
	<BAYC1-PASMTP0898AFA48480D8D8AB8E8DF5270@CEZ.ICE>
Message-ID: <ebc876d70802161157m1536340cy84012f83f4afad4@mail.gmail.com>

On Feb 17, 2008 6:25 AM, Benjamin Shropshire
<shro8822 at vandals.uidaho.edu> wrote:
> Thomas Brandon wrote:
> > Check out the examples package. Available from the ANTLR download page
> > or from http://www.antlr.org/download/examples-v3.tar.gz
> >
> > Tom.
> >
> >
> Don't take my word choice to seriously but:
>
> WHY THE #$%@#$@ isn't that link on the FRONT PAGE!?!?!?!
>
> :-b
Well, it's on the download page which you presumably went to to get
ANTLR. But I'll admit it isn't very visible there. Not sure if it's in
the newer intermediate builds, I think the examples may only have been
added to the depot since the last release. That would seem a good idea
if they aren't already.
>
> That link or a link to some sort of index* to it should be on the front
> page (I think putting it on the top-of-page link bar would be about
> right). Also I think it would be handy to have more examples of minimal
> grammars that demonstrate features. (I rather hope the code for these
> already exist in antlr's test suite.)
>
Some of those are just small examples that demonstrate
features\approaches. Not sure how sensibly you could break it down
further.

Tom.
> Benjamin Shropshire
>
> * "example foo.g shows uses of ___, example bar.g shows use of ____,
> example baz.g uses AST, example pickle.g uses StringTemplate, ..."
> sorted with things that do stuff "the antlr way" at the top.
>
>
> > On Feb 16, 2008 11:43 AM, Benjamin Shropshire
> > <shro8822 at vandals.uidaho.edu> wrote:
> >
> >> Does anyone known of where I can find some non trivial working examples
> >> of antlr projects done in C#?
> >>
> >> I'm not looking for projects people have done but stuff that was written
> >> specifically to be an example for new users. The examples that are used
> >> in the documentation are so trivial that they don't get to what I need
> >> and the projects I can find are complicated enough that I can't find the
> >> stuff I need.
> >>
> >>
> >>
> >
> >
>
>

From antlr at mirality.co.nz  Sat Feb 16 12:02:55 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 17 Feb 2008 09:02:55 +1300
Subject: [antlr-interest] Non trivial C# examples
In-Reply-To: <BAYC1-PASMTP0898AFA48480D8D8AB8E8DF5270@CEZ.ICE>
References: <BAYC1-PASMTP15172554E25EBA2043E7DAF5270@CEZ.ICE>
	<ebc876d70802151754p7783e5d2n1c131b22fafb0076@mail.gmail.com>
	<BAYC1-PASMTP0898AFA48480D8D8AB8E8DF5270@CEZ.ICE>
Message-ID: <20080216200332.9988F11EB84@www.antlr.org>

At 08:25 17/02/2008, Benjamin Shropshire wrote:
 >Don't take my word choice to seriously but:
 >
 >WHY THE #$%@#$@ isn't that link on the FRONT PAGE!?!?!?!

Because none of the downloads are on the front page.

It is listed on the downloads page, under the heading 
"Examples".  Perhaps it ought to be moved further up the page, but 
that's the only problem I can see.


From vbar at comp.cz  Sat Feb 16 12:03:17 2008
From: vbar at comp.cz (Vaclav Barta)
Date: Sat, 16 Feb 2008 21:03:17 +0100
Subject: [antlr-interest] C-Runtime in C++ prog
In-Reply-To: <"L152FC2437DF54dcfBFC0A77426CA58CC.1203188653.scalix.temporal-wave.com*"@MHS>
References: <"L152FC2437DF54dcfBFC0A77426CA58CC.1203188653.scalix.temporal-wave.com*"@MHS>
Message-ID: <47B74185.2030706@comp.cz>

Jim Idle wrote:
>> -----Original Message-----
>> From: Oliver Kowalke [mailto:oliver.kowalke at gmx.de]
>>> occurs, it fires a series of function calls that culminate in a call
>>> to displayRecognitionError. However, you can override these functions
>>> (usually you only need to override the displayRecognitionError) and
>>> make them do whatever you like.
>> I mean in C++ you throw exceptions (2.x version of ANTLR) in the case
>> of errors. But exceptions are not part of C.
> Hence it is a sequence of function calls and then drops out of the rule 
> function properly because it detects that error state. You don't need to 
> do anything but decide what to do when you are asked to print an error.
Well, but because the runtime is C, I couldn't decide to throw an 
exception there - right?

	Bye
		Vasek
--
http://www.mangrove.cz/


From jimi at temporal-wave.com  Sat Feb 16 14:42:44 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 16 Feb 2008 14:42:44 -0800
Subject: [antlr-interest] C-Runtime in C++ prog
In-Reply-To: <47B74185.2030706@comp.cz>
Message-ID: <"LB3098FEE811D404b8BEBC17650ED4413.1203201779.scalix.temporal-wave.com*"@MHS>

The function you install must have C linkage, but you should be able to 
throw an exception if it is compiled with exception handling as the C 
library does not try to catch anything. But, by that time you have 
already 'caught' the exception so there is probably no need anyway ;-)

Jim


> -----Original Message-----
> From: Vaclav Barta [mailto:vbar at comp.cz]


> > function properly because it detects that error state. You don't 
need
> to
> > do anything but decide what to do when you are asked to print an
> error.
> Well, but because the runtime is C, I couldn't decide to throw an
> exception there - right?
> 
> 	Bye
> 		Vasek
> --
> http://www.mangrove.cz/
> 



From lilypondtool at organum.hu  Sat Feb 16 15:27:43 2008
From: lilypondtool at organum.hu (Bertalan Fodor)
Date: Sun, 17 Feb 2008 00:27:43 +0100
Subject: [antlr-interest] Is this synpred valid?
Message-ID: <47B7716F.9010106@organum.hu>

Hi,

I'm curious if this form of syntactical predicates is valid and means 
what I mean (I know it gets compiled and seems to work, but I would like 
to make it sure):

body: ((definition)=>definition)* sequence

That means, definition's checking for syntactical predicate will run for 
all iterations.

Thank you,

Bert

From antlr at mirality.co.nz  Sat Feb 16 15:54:40 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 17 Feb 2008 12:54:40 +1300
Subject: [antlr-interest] C-Runtime in C++ prog
In-Reply-To: <"LB3098FEE811D404b8BEBC17650ED4413.1203201779.scalix.tempo
	ral-wave.com*"@MHS>
References: <47B74185.2030706@comp.cz>
	<"LB3098FEE811D404b8BEBC17650ED4413.1203201779.scalix.temporal-wave.com*"@MHS>
Message-ID: <20080216235455.14B2011EB82@www.antlr.org>

At 11:42 17/02/2008, Jim Idle wrote:
 >The function you install must have C linkage, but you should be
 >able to throw an exception if it is compiled with exception
 >handling as the C library does not try to catch anything.

Wouldn't throwing an exception from a rule confuse the runtime 
code?  Since it won't have done any necessary cleanup?

It seems to me it's generally bad practice to let exceptions 
"escape" a particular code layer -- in this case, they probably 
shouldn't cross over the C/C++ boundary.  (It seems just as 
dangerous as letting exceptions cross a module boundary, eg. from 
user code to OS code or from application to library.)


From tbrandonau at gmail.com  Sat Feb 16 20:23:59 2008
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Sun, 17 Feb 2008 15:23:59 +1100
Subject: [antlr-interest] Why cant += be used without an "output="
	option (and other Q's)
In-Reply-To: <BAYC1-PASMTP0689D7552135AAF308BA82F5270@CEZ.ICE>
References: <BAYC1-PASMTP0539AF89FCFB385F0B3FCFF5270@CEZ.ICE>
	<ebc876d70802151745n6cfbd962ib48f115f4da27b5d@mail.gmail.com>
	<BAYC1-PASMTP0689D7552135AAF308BA82F5270@CEZ.ICE>
Message-ID: <ebc876d70802162023r2315f7k127ca8d0b34dc5ca@mail.gmail.com>

On Feb 17, 2008 6:25 AM, Benjamin Shropshire
<shro8822 at vandals.uidaho.edu> wrote:
>
> Thomas Brandon wrote:
> > On Feb 16, 2008 12:00 PM, Benjamin Shropshire
> > <shro8822 at vandals.uidaho.edu> wrote:
> >
> >  The fact that this
> > isn't a totally standard way of proceeding doesn't help either. More
> > usually you would output an AST or use templates to generate output so
> > this sort of processing isn't the major focus of ANTLR.
>     That right there is my question: why didn't I find this out in the
> first 5 minutes? First impressions are very important, if you put
> something out and at first it looks like one thing and it turns out it
> isn't, if the user doesn't find this out vary quickly, when they do they
> you will be luck if they don't feel like you tricked them. In my cases,
> I think that many of my issues have come from the fact that I don't
> known what questions to ask. Something isn't working the way I expect
> but I don't even known where the start looking for the solution (in my
> cases I wasted most of a day trying to find a syntax error when the real
> error was a philosophy one.
>
>     Correct me if I'm wrong, but isn't what I'm doing the normal mode of
> approach for building a parser in something like yacc or bison? In my
> limited experience the normal approach has been let the generated parser
> find the pieces and let the user write the code to do something with it,
> in my case I was going to manually build the AST.
>
I'm not that familiar with the specifics of other parser tools. I
think the main difference is the presence of inbuilt AST and
StringTemplate handling. Other tools do not have inbuilt output
support so their output is generic. ANTLR also intends to handle such
generic output. It's not so much that what you want to do is a corner
case in terms of ANTLRs intended usage but that it is a corner case in
its actual usage. Many people would write code to do similar things to
what you are trying to do it just seems (given the lack of attention
to this particular problem in ANTLR) that most have also been using
ANTLRs output support. There has been some discussion of this problem,
it was again reported a few days ago leading to it being fixed in the
latest intermediate build. But it has not come up enough to have been
fixed yet. This is also as ANTLR 3 is still in a relatively early
phase and feature additions and major bugs have taken up much of the
development effort, overshadowing more minor issues such as this.
Given ANTLRs very good inbuilt AST support I can't see many reasons to
not use this if you are building an AST. You can produce any sort of
output tree you want. And can still use custom AST building code with
output=AST. Though ANTLRs tree construction operators and rewrite
rules mean this is rarely difficult.
>      The change I'm hoping for would take about 15-20 minutes by an
> expert in antlr: wright up a "this is how antler is expected to be used"
> paragraph that has all the "differences in approch" that antlr has with
> regards to other ways of building a parser (by-hand, yacc, etc).
> Probubly the hardest part would be figuring out where to put it on the
> website so that it would be found by anyone looking at antlr even if
> they arn't looking for it. I guess it would be a FNAQ page (frequently
> not (but should be) asked questions)
> > If you are
> > dissatisfied with this then perhaps a commercial product would better
> > meet your demands.
> >
> >
> the part I'm dissatisfied with is the front page. As I see it there are
> a few critical pieces of information that need to be added (or be
> obversely linked  from it) these include a 2-3 sentence description of
> what antler expects the user to do ("Antlr is a system for building
> recognizers, token parsers and tree parsers. It is designed to be used
> to build token parsers from language agnostic grammars that are then
> used to feed language specific tree parsers to perform the custom data
> operations. <verbiage about StringTemplate> While it can operate in
> other modes these are what it is intended to do.")
>
Well, it's likely any such description\page would still have given the
impression that ANTLR was suitable for what you wanted. It is designed
to be it was just the implementation was lagging behind, and the lack
of usage meant this hadn't been as major a concern as such problems in
other areas might have been.
But certainly such a comparison page in the wiki sounds like a good idea.

Tom.
> Sorry about the rambling post:
> Benjamin Shropshire
>
> > Tom.
>
>

From timm.turn at gmail.com  Sun Feb 17 03:25:31 2008
From: timm.turn at gmail.com (Timmy Turner)
Date: Sun, 17 Feb 2008 12:25:31 +0100
Subject: [antlr-interest] Preprocessor Directives for ANTLR in Grammar
	Definition
Message-ID: <d4de96670802170325ncd5115albc31c2f1b277e2d@mail.gmail.com>

In my grammar definition I have code like this (target language is Java):

[code]
keyvalue:    SQ '=' (NONE|SQ)
        {
            System.out.println("PARSER: Parameter: "+$keyvalue.text);
            addParameter($keyvalue.text);
        }
[code]

The generated parser extends a class that provides the method
addParameter and everything works fine - but ANTLR and its debugger of
course don't know this.

So every time I debug my grammar inside ANTLR, I have to comment out
this lines. Is there maybe something like C-style preprocessor
directives (define, ifdef, etc.) for ANTLR grammar definitions (or
something simillar) that might help me?

Thanks!

From stevagewp at gmail.com  Sun Feb 17 05:31:32 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Mon, 18 Feb 2008 00:31:32 +1100
Subject: [antlr-interest] Is this synpred valid?
In-Reply-To: <47B7716F.9010106@organum.hu>
References: <47B7716F.9010106@organum.hu>
Message-ID: <b8ceeef70802170531g5d637d71vfbe00f996f1f893f@mail.gmail.com>

On 2/17/08, Bertalan Fodor <lilypondtool at organum.hu> wrote:
> I'm curious if this form of syntactical predicates is valid and means
> what I mean (I know it gets compiled and seems to work, but I would like
> to make it sure):
>
> body: ((definition)=>definition)* sequence
>
> That means, definition's checking for syntactical predicate will run for
> all iterations.

I use this form of syntactic predicate very frequently. I think it's
not strictly needed in most cases (the default is to loop), but can be
used to prevent unwanted looping.

Steve

From carter_cheng at yahoo.com  Sun Feb 17 06:14:59 2008
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Sun, 17 Feb 2008 06:14:59 -0800 (PST)
Subject: [antlr-interest] possible bug in ANTLR 3.0.1
Message-ID: <461611.98341.qm@web50107.mail.re2.yahoo.com>

Hi everyone,

I have been trying to replicate something very similar
to the code listed on p.183 of the ANTLR Reference but
this seems to cause an error when you attempt to
compile the *Parser.java file because ANTLR "forgets"
to declare variables correctly. 

I managed to correct the problem for in my case
inserting one line in the two respective functions:

type_return type27* = null;

After which the file compiles without complaints and
seems to execute properly. I am wondering if this
error has been resolved with the newer betas and where
I might be able to find them. 

If I am in error about this I apologize, I am still
rather new at this. 

Thanks in advance,

Carter.


      ____________________________________________________________________________________
Never miss a thing.  Make Yahoo your home page. 
http://www.yahoo.com/r/hs

From carter_cheng at yahoo.com  Sun Feb 17 06:37:04 2008
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Sun, 17 Feb 2008 06:37:04 -0800 (PST)
Subject: [antlr-interest] generating runtime error messages with ANTLR
Message-ID: <459920.67996.qm@web50111.mail.re2.yahoo.com>

Hi everyone,

I have been trying to build a compiler using ANTLR
3.0.1 to handle most of the frontend work. I am
curious if there is a canonical method for passing
line count, character position information downstream
to other phases of the compiler which can be then used
for error reporting either in the type check phase
after the AST is constructed or at runtime.

Is there some canonical method for capturing this
information in the AST which can then be used to
generate error reports?

Regards,

Carter.

 


      ____________________________________________________________________________________
Never miss a thing.  Make Yahoo your home page. 
http://www.yahoo.com/r/hs

From luca.dallolio at gmail.com  Sun Feb 17 12:25:14 2008
From: luca.dallolio at gmail.com (Luca Dall'Olio)
Date: Sun, 17 Feb 2008 21:25:14 +0100
Subject: [antlr-interest] java stacktrace grammar
In-Reply-To: <47B896E0.5060902@unimaticaspa.it>
References: <47B896E0.5060902@unimaticaspa.it>
Message-ID: <47B8982A.9090906@gmail.com>

Hello to everybody,
I am trying to use antlr to parse a logged java stacktrace, such as this 
input:

"java.lang.ExceptionInInitializerError
at 
com.x.tests.hibernate.BasicTankerSetupTest.beforeClass(BasicTankerSetupTest.java:16) 

Caused by: java.lang.RuntimeException
at com.x.tests.hibernate.HibernateUtil.clinit(HibernateUtil.java:20)"

This is my first antlr grammar and I understand I don't know much about 
them (I am learning from the java 1.5 grammar); the grammar attached 
seems to be able to cope with that input, but I am having problems when 
adding the exception message.
If I write the following rules and try them in AntlrWorks 1.1.7 I get a 
MismatchedTokenException(0!=0) in the first rule, could you please give 
me any hint about this?

messageLine
   :   (qualifiedClass ':' message?)+
    ;

qualifiedClass
   :    packagePath Identifier
   ;

packagePath      :    (Identifier '.')+
   ;

message
   :    MessagePart+
   ;

MessagePart       :    Letter*
   ;

Thank you in advance,
Luca
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: StackTraceText.g
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20080217/226f4830/attachment.pl 

From jimi at temporal-wave.com  Sun Feb 17 13:54:23 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 17 Feb 2008 13:54:23 -0800
Subject: [antlr-interest] possible bug in ANTLR 3.0.1
In-Reply-To: <461611.98341.qm@web50107.mail.re2.yahoo.com>
Message-ID: <"L91DE896991C44f2798DB5321C6419EBD.1203285259.scalix.temporal-wave.com*"@MHS>

We would need to see your code to see if there is anything wrong I am 
afraid.

Jim

> -----Original Message-----
> From: Carter Cheng [mailto:carter_cheng at yahoo.com]
> Sent: Sunday, February 17, 2008 6:15 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] possible bug in ANTLR 3.0.1
> 
> Hi everyone,
> 
> I have been trying to replicate something very similar
> to the code listed on p.183 of the ANTLR Reference but
> this seems to cause an error when you attempt to
> compile the *Parser.java file because ANTLR "forgets"
> to declare variables correctly.
> 
> I managed to correct the problem for in my case
> inserting one line in the two respective functions:
> 
> type_return type27* = null;
> 
> After which the file compiles without complaints and
> seems to execute properly. I am wondering if this
> error has been resolved with the newer betas and where
> I might be able to find them.
> 
> If I am in error about this I apologize, I am still
> rather new at this.
> 
> Thanks in advance,
> 
> Carter.
> 
> 
> 
> 
_______________________________________________________________________
> _____________
> Never miss a thing.  Make Yahoo your home page.
> http://www.yahoo.com/r/hs



From shro8822 at vandals.uidaho.edu  Sun Feb 17 15:15:16 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Sun, 17 Feb 2008 15:15:16 -0800
Subject: [antlr-interest] Why cant += be used without an
 "output="	option (and other Q's)
In-Reply-To: <ebc876d70802162023r2315f7k127ca8d0b34dc5ca@mail.gmail.com>
References: <BAYC1-PASMTP0539AF89FCFB385F0B3FCFF5270@CEZ.ICE>	<ebc876d70802151745n6cfbd962ib48f115f4da27b5d@mail.gmail.com>	<BAYC1-PASMTP0689D7552135AAF308BA82F5270@CEZ.ICE>
	<ebc876d70802162023r2315f7k127ca8d0b34dc5ca@mail.gmail.com>
Message-ID: <BAYC1-PASMTP03714BA1C0AB40A74E58B9F5200@CEZ.ICE>

Thomas Brandon wrote:
> On Feb 17, 2008 6:25 AM, Benjamin Shropshire
> <shro8822 at vandals.uidaho.edu> wrote:
>   
>>     
> Given ANTLRs very good inbuilt AST support I can't see many reasons to
> not use this if you are building an AST. You can produce any sort of
> output tree you want. And can still use custom AST building code with
> output=AST. Though ANTLRs tree construction operators and rewrite
> rules mean this is rarely difficult.
>   
One cases (abet not common) would be where the programmer is trying to 
generate faster (or less memory intensive) code. By taking total control 
of the AST I can build the final AST that /I/ want in the first pass 
rather than in another pass with a tree parser. this would allow total 
control over the node types and also allow the use of much less generic 
constructs. I also suspect that the added complexity of the 2 pass 
system (at first) is more than the removed complexity of not having to 
generate the AST stuff my self, especially because I will more than 
likely do just that in the tree parser.

>> the part I'm dissatisfied with is the front page. As I see it there are
>> a few critical pieces of information that need to be added (or be
>> obversely linked  from it) these include a 2-3 sentence description of
>> what antler expects the user to do ("Antlr is a system for building
>> recognizers, token parsers and tree parsers. It is designed to be used
>> to build token parsers from language agnostic grammars that are then
>> used to feed language specific tree parsers to perform the custom data
>> operations. <verbiage about StringTemplate> While it can operate in
>> other modes these are what it is intended to do.")
>>     
> Well, it's likely any such description\page would still have given the
> impression that ANTLR was suitable for what you wanted.
 From what you said, ANTLR is suitable for what I want, in theory just 
not in practices. But saying that the major use profile is something 
else would have bean a huge hit as to my problems. I tend to be a 
minimalist when learning things. I learn the absolute minimum I can to 
get started and then learn stuff as I need it to do what I need. If 
something about ANTLR being designed to generate AST building code had 
bean on the front page (or there abouts) I would have gone and looked 
for that info rather than skip it because I didn't see how I needed it.

>  It is designed
> to be it was just the implementation was lagging behind, and the lack
> of usage meant this hadn't been as major a concern as such problems in
> other areas might have been.
> But certainly such a comparison page in the wiki sounds like a good idea.
>
> Tom.
>   
>> Sorry about the rambling post:
>> Benjamin Shropshire
>>     


From shro8822 at vandals.uidaho.edu  Sun Feb 17 15:15:28 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Sun, 17 Feb 2008 15:15:28 -0800
Subject: [antlr-interest] Non trivial C# examples
In-Reply-To: <ebc876d70802161157m1536340cy84012f83f4afad4@mail.gmail.com>
References: <BAYC1-PASMTP15172554E25EBA2043E7DAF5270@CEZ.ICE>	<ebc876d70802151754p7783e5d2n1c131b22fafb0076@mail.gmail.com>	<BAYC1-PASMTP0898AFA48480D8D8AB8E8DF5270@CEZ.ICE>
	<ebc876d70802161157m1536340cy84012f83f4afad4@mail.gmail.com>
Message-ID: <BAYC1-PASMTP0540A2DB6BD3BB1F7CC1D8F5200@CEZ.ICE>

Thomas Brandon wrote:
> On Feb 17, 2008 6:25 AM, Benjamin Shropshire
> <shro8822 at vandals.uidaho.edu> wrote:
>   
>> Thomas Brandon wrote:
>>     
>>> Check out the examples package. Available from the ANTLR download page
>>> or from http://www.antlr.org/download/examples-v3.tar.gz
>>>
>>> Tom.
>>>
>>>
>>>       
>> Don't take my word choice to seriously but:
>>
>> WHY THE #$%@#$@ isn't that link on the FRONT PAGE!?!?!?!
>>
>> :-b
>>     
> Well, it's on the download page which you presumably went to to get
> ANTLR. But I'll admit it isn't very visible there. Not sure if it's in
> the newer intermediate builds, I think the examples may only have been
> added to the depot since the last release. That would seem a good idea
> if they aren't already.
>   
>> That link or a link to some sort of index* to it should be on the front
>> page (I think putting it on the top-of-page link bar would be about
>> right). Also I think it would be handy to have more examples of minimal
>> grammars that demonstrate features. (I rather hope the code for these
>> already exist in antlr's test suite.)
>>
>>     
> Some of those are just small examples that demonstrate
> features\approaches. Not sure how sensibly you could break it down
> further.
>
>   
I think things like the following would be practical and useful:

a grammar that shows how to accumulate terms with a '*' rules using AST, 
string templates, and action rules.
how to pass an arbitrary type from a sub rule back up
how to pass an arbitrary type as a parameter
...

I don't known enough about antlr to suggest others but I suspect that 
this is illustrative. As mentioned befour, these cases would parallel 
the set of cases that should be in the test suite. They don't even have 
to be very realistic, just able to show how something works.

> Tom.
>   


From carter_cheng at yahoo.com  Sun Feb 17 17:37:24 2008
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Sun, 17 Feb 2008 17:37:24 -0800 (PST)
Subject: [antlr-interest] possible bug in ANTLR 3.0.1
In-Reply-To: <"L91DE896991C44f2798DB5321C6419EBD.1203285259.scalix.temporal-wave.com*"@MHS>
Message-ID: <637188.46551.qm@web50107.mail.re2.yahoo.com>

Hello Jim,

Here is the file in question. 

Regards,

Carter.

--- Jim Idle <jimi at temporal-wave.com> wrote:

> We would need to see your code to see if there is
> anything wrong I am 
> afraid.
> 
> Jim
> 
> > -----Original Message-----
> > From: Carter Cheng [mailto:carter_cheng at yahoo.com]
> > Sent: Sunday, February 17, 2008 6:15 AM
> > To: antlr-interest at antlr.org
> > Subject: [antlr-interest] possible bug in ANTLR
> 3.0.1
> > 
> > Hi everyone,
> > 
> > I have been trying to replicate something very
> similar
> > to the code listed on p.183 of the ANTLR Reference
> but
> > this seems to cause an error when you attempt to
> > compile the *Parser.java file because ANTLR
> "forgets"
> > to declare variables correctly.
> > 
> > I managed to correct the problem for in my case
> > inserting one line in the two respective
> functions:
> > 
> > type_return type27* = null;
> > 
> > After which the file compiles without complaints
> and
> > seems to execute properly. I am wondering if this
> > error has been resolved with the newer betas and
> where
> > I might be able to find them.
> > 
> > If I am in error about this I apologize, I am
> still
> > rather new at this.
> > 
> > Thanks in advance,
> > 
> > Carter.
> > 
> > 
> > 
> > 
>
_______________________________________________________________________
> > _____________
> > Never miss a thing.  Make Yahoo your home page.
> > http://www.yahoo.com/r/hs
> 
> 
> 



      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: LPC.g
Type: application/octet-stream
Size: 7175 bytes
Desc: 4118805548-LPC.g
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080217/205f6518/attachment-0001.obj 

From jimi at temporal-wave.com  Sun Feb 17 19:35:38 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 17 Feb 2008 19:35:38 -0800
Subject: [antlr-interest] Why cant += be used without an
	"output="	option (and other Q's)
In-Reply-To: <BAYC1-PASMTP03714BA1C0AB40A74E58B9F5200@CEZ.ICE>
Message-ID: <"LE925D902E855441880CA4CD7AA9B0B83.1203305738.scalix.temporal-wave.com*"@MHS>

> -----Original Message-----
> From: Benjamin Shropshire [mailto:shro8822 at vandals.uidaho.edu]
> Sent: Sunday, February 17, 2008 3:15 PM
> To: Thomas Brandon
> Cc: Antlr Interest
> Subject: Re: [antlr-interest] Why cant += be used without an "output="
> option (and other Q's)
> 
> Thomas Brandon wrote:
> > On Feb 17, 2008 6:25 AM, Benjamin Shropshire
> > <shro8822 at vandals.uidaho.edu> wrote:
> >
> >>
> > Given ANTLRs very good inbuilt AST support I can't see many reasons
> to
> > not use this if you are building an AST. You can produce any sort of
> > output tree you want. And can still use custom AST building code 
with
> > output=AST. Though ANTLRs tree construction operators and rewrite
> > rules mean this is rarely difficult.
> >
> One cases (abet not common) would be where the programmer is trying to
> generate faster (or less memory intensive) code. By taking total
> control
> of the AST I can build the final AST that /I/ want 

That is what the tree adaptor is for. It will build anything you like, 
all you do is supply a class that supplies that interface so that the 
rewrite rules have something to call, what you do after that is up to 
you. You are trying to solve problems that have already been solved and 
I think you need to gather a little more knowledge before you run off at 
tangents and telling people how to write the tool and web site.

> > impression that ANTLR was suitable for what you wanted.
>  From what you said, ANTLR is suitable for what I want, in theory just
> not in practices. But saying that the major use profile is something
> else would have bean a huge hit as to my problems. I tend to be a
> minimalist when learning things. I learn the absolute minimum I can to
> get started and then learn stuff as I need it to do what I need. If
> something about ANTLR being designed to generate AST building code had
> bean on the front page (or there abouts) I would have gone and looked
> for that info rather than skip it because I didn't see how I needed 
it.

Well, that's fine, but if the tool does not seem to do what you want 
because you have not read something yet, then you should neither 
complain too vehemently, nor assume that you are correct in your 
assumptions, until you have looked further than the front page of the 
web site. The front page of the web site would have to be very large 
indeed to cover everything that everyone thinks should be on it, hence 
the search box is on the front page. 

I presume, from scanning your posts, that this minimalist philosophy 
also applies, to your spilling, grammer, dickshun and mannurs :-) ? In 
this case I think that what you have assumed to be the minimal knowledge 
is not quite enough.

Jim


From stevagewp at gmail.com  Sun Feb 17 20:45:56 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Mon, 18 Feb 2008 15:45:56 +1100
Subject: [antlr-interest] Unterminated html comments
Message-ID: <b8ceeef70802172045v7459aa4byc55e34feb7cd1a26@mail.gmail.com>

Can anyone think how to lex both terminated and unterminated HTML
comments? That is:

<!-- this should all be one token -->

<!-- this should all be one token <EOF>

I have this:

HTML_COMMENT:
    (('<!--') => '<!--' .* ('-->' | EOF) { $channel=HIDDEN; })
    | '<' { $type=LT; };

But it doesn't work. On a line like: <!-- foo -->, the "<!-- f" gets
lost (doesn't form a token in ANTLRworks).

If I remove the "| EOF", it matches normal comments fine, but not
unterminated ones.

Thanks all,
Steve

From stevagewp at gmail.com  Sun Feb 17 20:47:23 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Mon, 18 Feb 2008 15:47:23 +1100
Subject: [antlr-interest] ANTLR could not analyze...
In-Reply-To: <b8ceeef70802160622x309002d5m170f8b7563c35e29@mail.gmail.com>
References: <b8ceeef70802160622x309002d5m170f8b7563c35e29@mail.gmail.com>
Message-ID: <b8ceeef70802172047p1e9857d0l6692e17c841bb438@mail.gmail.com>

On 2/17/08, Steve Bennett <stevagewp at gmail.com> wrote:
> ANTLR will re-analyze the decision with a fixed lookahead of k=1.
> Consider using "options {k=1;}" for that decision and possibly adding
> a syntactic predicate.

...


> As you can see, I'm using options k=1, and no shortage of syntactic
> predicates - what else can I do?

Any response to this one? It seems to be a bug. Is there anything I
can do about it?

Steve

From aaron.m.lebo at gmail.com  Sun Feb 17 21:52:34 2008
From: aaron.m.lebo at gmail.com (Aaron Lebo)
Date: Sun, 17 Feb 2008 23:52:34 -0600
Subject: [antlr-interest] Reading from sys.stdin with ANTLR-Python (for an
	REPL)
Message-ID: <d4f450350802172152r21978a74l6f1b824e784b9032@mail.gmail.com>

Hi. I'm obviously using the Python runtime of ANTLR.

Reading from a file and parsing it is trivial. The code looks a bit like:

import antlr3
import LangLexer
import LangParser

input = antlr3.ANTLRFileStream('filename...')
lexer = LangLexer.LangLexer(input)
tokens = antlr3.CommonTokenStream(lexer)
parser = LangParser.LangParser(tokens)

So I'm having no issue with that. What I am wanting to do is an REPL and I
need to interactively parse the data coming from sys.stdin. The problem is
that all of the 'Stream' classes from the antlr3 package read all input on
creation, so passing sys.stdin or sys.stdin.read() causes the REPL to hang,
as something like antlr3.ANTLRInputStream(sys.stdin) reads infinitely.

Am I making sense? What solution is there?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080217/c7673723/attachment.html 

From antlr at mirality.co.nz  Sun Feb 17 23:23:07 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 18 Feb 2008 20:23:07 +1300
Subject: [antlr-interest] Why cant += be used without an
 "output="	option (and other Q's)
In-Reply-To: <BAYC1-PASMTP03714BA1C0AB40A74E58B9F5200@CEZ.ICE>
References: <BAYC1-PASMTP0539AF89FCFB385F0B3FCFF5270@CEZ.ICE>
	<ebc876d70802151745n6cfbd962ib48f115f4da27b5d@mail.gmail.com>
	<BAYC1-PASMTP0689D7552135AAF308BA82F5270@CEZ.ICE>
	<ebc876d70802162023r2315f7k127ca8d0b34dc5ca@mail.gmail.com>
	<BAYC1-PASMTP03714BA1C0AB40A74E58B9F5200@CEZ.ICE>
Message-ID: <20080218072325.92FBA11EA99@www.antlr.org>

At 12:15 18/02/2008, Benjamin Shropshire wrote:
 >One cases (abet not common) would be where the programmer is
 >trying to generate faster (or less memory intensive) code. By
 >taking total control of the AST I can build the final AST that
 >/I/ want in the first pass rather than in another pass with a
 >tree parser. this would allow total control over the node types
 >and also allow the use of much less generic constructs.

Way back in the very early beta days of ANTLR3, I used it to parse 
a fairly simple DSL, generating C++ source and header files as 
outputs.

Since StringTemplate and ASTs were new and unfamiliar to me at the 
time (and there was almost no documentation), I didn't use them; 
instead writing things the ANTLR2 way by using embedded code 
fragments.

It was very straightforward to do something like:
   { AddParameter($type.text, $name.text); }
to add a newly-parsed parameter from the source language to the 
in-memory data structures that modelled the content.

At the end of the whole process, I called the "WriteSourceFile" 
and "WriteHeaderFile" routines, each of which iterated through the 
data structure and generated the appropriate output.  (I probably 
could have done it in one pass, but speed wasn't a priority.)

So it's certainly possible to parse into custom data structures; 
I'm not really sure what you're having trouble with.

(Nowadays I probably would end up using an AST, but I'd still not 
use StringTemplate, since I'm primarily using the C target and 
there isn't a port yet.  I also wouldn't have used a tree parser, 
because I still haven't seen any point in using them :)  I 
probably would have used scopes more, though, avoiding the need to 
track some of the context outside the parser.)


From nelson.ana at gmail.com  Mon Feb 18 01:27:05 2008
From: nelson.ana at gmail.com (Ana Nelson)
Date: Mon, 18 Feb 2008 09:27:05 +0000
Subject: [antlr-interest] Reading from sys.stdin with ANTLR-Python (for
	an REPL)
In-Reply-To: <d4f450350802172152r21978a74l6f1b824e784b9032@mail.gmail.com>
References: <d4f450350802172152r21978a74l6f1b824e784b9032@mail.gmail.com>
Message-ID: <a7d6d2740802180127y11886478w2ca1bb94b18e24c5@mail.gmail.com>

Hi, Aaron,

I'm a ruby developer and have only dabbled in python. If you only need to
read 1 line at a time without keeping track of prior inputs and if you don't
mind the overhead of creating a new parser with each line of input then
something like this might work:

while 1:
  line = sys.stdin.readline()
  if not line: break
  strm = antlr3.ANTLRStringStream(line)
  lexer = LangLexer.LangLexer(strm)
  tokens = antlr3.CommonTokenStream(lexer)
  parser = LangParser.LangParser(tokens)
  # do stuff here...
print "finished!"

Also I notice that "input" is a python function. Not sure if that might be
causing a conflict? I see it's used in the example so it's probably okay,
but it stands out in my syntax highlighter.

I'm thinking the "right" way to do this will be to create the parser and
lexer prior to entering the loop and somehow append each line to an
InputStream as it's read, but maybe the above will get you started.

-Ana


On 18/02/2008, Aaron Lebo <aaron.m.lebo at gmail.com> wrote:
>
> Hi. I'm obviously using the Python runtime of ANTLR.
>
> Reading from a file and parsing it is trivial. The code looks a bit like:
>
> import antlr3
> import LangLexer
> import LangParser
>
> input = antlr3.ANTLRFileStream('filename...')
> lexer = LangLexer.LangLexer(input)
> tokens = antlr3.CommonTokenStream(lexer)
> parser = LangParser.LangParser(tokens)
>
> So I'm having no issue with that. What I am wanting to do is an REPL and I
> need to interactively parse the data coming from sys.stdin. The problem is
> that all of the 'Stream' classes from the antlr3 package read all input on
> creation, so passing sys.stdin or sys.stdin.read() causes the REPL to
> hang, as something like antlr3.ANTLRInputStream(sys.stdin) reads
> infinitely.
>
> Am I making sense? What solution is there?
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080218/fa716137/attachment.html 

From tbrandonau at gmail.com  Mon Feb 18 01:40:14 2008
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Mon, 18 Feb 2008 20:40:14 +1100
Subject: [antlr-interest] Reading from sys.stdin with ANTLR-Python (for
	an REPL)
In-Reply-To: <d4f450350802172152r21978a74l6f1b824e784b9032@mail.gmail.com>
References: <d4f450350802172152r21978a74l6f1b824e784b9032@mail.gmail.com>
Message-ID: <ebc876d70802180140n36bb18b9x697b03dd970044ea@mail.gmail.com>

On Feb 18, 2008 4:52 PM, Aaron Lebo <aaron.m.lebo at gmail.com> wrote:
> Hi. I'm obviously using the Python runtime of ANTLR.
>
> Reading from a file and parsing it is trivial. The code looks a bit like:
>
> import antlr3
> import LangLexer
> import LangParser
>
> input = antlr3.ANTLRFileStream('filename...')
>  lexer = LangLexer.LangLexer(input)
> tokens = antlr3.CommonTokenStream(lexer)
> parser = LangParser.LangParser(tokens)
>
> So I'm having no issue with that. What I am wanting to do is an REPL and I
> need to interactively parse the data coming from sys.stdin. The problem is
> that all of the 'Stream' classes from the antlr3 package read all input on
> creation, so passing sys.stdin or sys.stdin.read() causes the REPL to hang,
> as something like antlr3.ANTLRInputStream(sys.stdin) reads infinitely.
>
> Am I making sense? What solution is there?
>
You could provide your own input stream implementation.
CommonTokenStream (in Java anyway) also reads all tokens on first
access so you would need to provide your own implementation there as
well.
I believe such an implementation has been posted on the list. For Java
but would give you something to convert.
Or you could lex\parse a line at a time. You could reuse the lexer and
parser. Either create a modifiable input stream or pass the lexer a
new one for each line. Either create a new token stream each line or
implement your own. This may be easier than supporting all the
possible cases in a truly incremental input design.

Tom.

From aaron.m.lebo at gmail.com  Mon Feb 18 02:25:08 2008
From: aaron.m.lebo at gmail.com (Aaron Lebo)
Date: Mon, 18 Feb 2008 04:25:08 -0600
Subject: [antlr-interest] Reading from sys.stdin with ANTLR-Python (for
	an REPL)
In-Reply-To: <a7d6d2740802180127y11886478w2ca1bb94b18e24c5@mail.gmail.com>
References: <d4f450350802172152r21978a74l6f1b824e784b9032@mail.gmail.com>
	<a7d6d2740802180127y11886478w2ca1bb94b18e24c5@mail.gmail.com>
Message-ID: <d4f450350802180225w4e187443j1d9ea792b243bf67@mail.gmail.com>

Thanks for the response Ana.

You are right, input is a built-in function, but even using a different
identifier doesn't make a difference. I originally was only reading 1 line
at a time like you suggested, but that doesn't handle tokens which can span
multiple lines (like say comments or strings). And being able to handle
multi-line strings is the whole reason I am in this mess. :)

Your last suggestion doesn't seem like a bad idea, but I'm not sure how that
would like in practice. Can anyone else offer some help?



On Feb 18, 2008 3:27 AM, Ana Nelson <nelson.ana at gmail.com> wrote:

> Hi, Aaron,
>
> I'm a ruby developer and have only dabbled in python. If you only need to
> read 1 line at a time without keeping track of prior inputs and if you don't
> mind the overhead of creating a new parser with each line of input then
> something like this might work:
>
> while 1:
>   line = sys.stdin.readline()
>   if not line: break
>   strm = antlr3.ANTLRStringStream(line)
>   lexer = LangLexer.LangLexer(strm)
>   tokens = antlr3.CommonTokenStream(lexer)
>   parser = LangParser.LangParser(tokens)
>   # do stuff here...
> print "finished!"
>
> Also I notice that "input" is a python function. Not sure if that might be
> causing a conflict? I see it's used in the example so it's probably okay,
> but it stands out in my syntax highlighter.
>
> I'm thinking the "right" way to do this will be to create the parser and
> lexer prior to entering the loop and somehow append each line to an
> InputStream as it's read, but maybe the above will get you started.
>
> -Ana
>
>
>
> On 18/02/2008, Aaron Lebo <aaron.m.lebo at gmail.com> wrote:
> >
> > Hi. I'm obviously using the Python runtime of ANTLR.
> >
> > Reading from a file and parsing it is trivial. The code looks a bit
> > like:
> >
> > import antlr3
> > import LangLexer
> > import LangParser
> >
> > input = antlr3.ANTLRFileStream('filename...')
> > lexer = LangLexer.LangLexer(input)
> > tokens = antlr3.CommonTokenStream(lexer)
> > parser = LangParser.LangParser(tokens)
> >
> > So I'm having no issue with that. What I am wanting to do is an REPL and
> > I need to interactively parse the data coming from sys.stdin. The
> > problem is that all of the 'Stream' classes from the antlr3 package read all
> > input on creation, so passing sys.stdin or sys.stdin.read() causes the
> > REPL to hang, as something like antlr3.ANTLRInputStream(sys.stdin) reads
> > infinitely.
> >
> > Am I making sense? What solution is there?
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080218/4f8f12b2/attachment-0001.html 

From lefevrol at yahoo.com  Mon Feb 18 02:27:00 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Mon, 18 Feb 2008 11:27:00 +0100
Subject: [antlr-interest] Factoring token definitions
Message-ID: <fpbmho$m8c$1@ger.gmane.org>

Sometimes a literal is used in several tokens and you want to factor it 
out. For instance you might want to define

   DIGIT: '0'..'9';
   INT: DIGIT+;

The problem with this is that when faced with a single digit the lexer will 
mark it as a DIGIT whereas you'd like to get an INT in all cases. Reversing 
the order of INT and DIGIT might give the desired results in the lexer, if 
I understand that correctly, but that fails even earlier, with ANTLR 
complaining that DIGIT is unreachable when you try to compile the grammar.

Basically, one would like to define DIGIT as a "non-token" token, i.e., a 
token literal that can be used in the definition of other token but cannot 
be matched as such by the lexer. I cannot find a way to do that...

Thanks,

-- O.L.


From thkarcher at gmx.de  Mon Feb 18 02:34:17 2008
From: thkarcher at gmx.de (Thomas Karcher)
Date: Mon, 18 Feb 2008 11:34:17 +0100
Subject: [antlr-interest] Factoring token definitions
In-Reply-To: <fpbmho$m8c$1@ger.gmane.org>
References: <fpbmho$m8c$1@ger.gmane.org>
Message-ID: <1203330857.4392.6.camel@localhost>

Salut Olivier,

>    DIGIT: '0'..'9';
>    INT: DIGIT+;
> The problem with this is that when faced with a single digit the lexer will 
> mark it as a DIGIT whereas you'd like to get an INT in all cases. Reversing 
> the order of INT and DIGIT might give the desired results in the lexer, if 
> I understand that correctly, but that fails even earlier, with ANTLR 
> complaining that DIGIT is unreachable when you try to compile the grammar.

The answer might be:

fragment
DIGIT: '0'..'9';

INT: DIGIT+;


Try it ... the "fragment" keyword should do exactly what you want.


Regards,
Thomas


-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Dies ist ein digital signierter Nachrichtenteil
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080218/0397a5d5/attachment.bin 

From lefevrol at yahoo.com  Mon Feb 18 02:30:59 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Mon, 18 Feb 2008 11:30:59 +0100
Subject: [antlr-interest] Buglet in book
Message-ID: <fpbmp7$n3n$1@ger.gmane.org>

On p. 110 it gives List<List<int>> as an example of nested type 
specification. While this is not germane to the discussion there, it is 
invalid Java nonetheless since primitive types line int and generics do not 
mix.

-- O.L.


From lefevrol at yahoo.com  Mon Feb 18 02:51:48 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Mon, 18 Feb 2008 11:51:48 +0100
Subject: [antlr-interest] Factoring token definitions
In-Reply-To: <1203330857.4392.6.camel@localhost>
References: <fpbmho$m8c$1@ger.gmane.org> <1203330857.4392.6.camel@localhost>
Message-ID: <fpbo08$s5n$1@ger.gmane.org>

Indeed fragment is exactly what I was looking for. Thanks!

-- O.L.


From discontinuum at gmail.com  Mon Feb 18 04:48:37 2008
From: discontinuum at gmail.com (Erik Kratochvil)
Date: Mon, 18 Feb 2008 13:48:37 +0100
Subject: [antlr-interest] Code too large
Message-ID: <f4dc39b90802180448n128b981br9b2b9d2059882fa2@mail.gmail.com>

Hi.

I have a very complicated grammar that pushes ANTLR 3 to its limits.
The first thing is that the generated parser has 1.8MB (and I confess
I tried my best to reduce the size). Well, as soon as I accepted it
another problem emerged - the parser cannot be compiled. The reason
is:

> javac OParser.java

OParser.java:37096: code too large
public static final BitSet FOLLOW_BOM_in_start_rule73 = new BitSet(new
long[]{0x0000000000000002L,0x0020002000000000
L,0x000C000040020400L,0x0111000600020220L,0x4000000100000001L,0x0000000180000000L,0x0000000000000000L,0x1300088005000000
L,0x0000000000000000L,0x0000000000021000L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000
L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000
L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000
L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000
L,0x0000000000000000L,0x0000000000000000L,0x0000000080001000L});
                               ^
1 error

It is a dead end, isn't it? Is there anything I can do?

-- 
Erik Kratochv?l

From discontinuum at gmail.com  Mon Feb 18 04:54:32 2008
From: discontinuum at gmail.com (Erik Kratochvil)
Date: Mon, 18 Feb 2008 13:54:32 +0100
Subject: [antlr-interest] Code too large
In-Reply-To: <f4dc39b90802180448n128b981br9b2b9d2059882fa2@mail.gmail.com>
References: <f4dc39b90802180448n128b981br9b2b9d2059882fa2@mail.gmail.com>
Message-ID: <f4dc39b90802180454s6a671394wd7baa022e988adb4@mail.gmail.com>

I apologize, I should have searched in other threads as well. The
answer is there:

http://www.antlr.org/pipermail/antlr-interest/2008-January/025824.html




On 2/18/08, Erik Kratochvil <discontinuum at gmail.com> wrote:
> Hi.
>
> I have a very complicated grammar that pushes ANTLR 3 to its limits.
> The first thing is that the generated parser has 1.8MB (and I confess
> I tried my best to reduce the size). Well, as soon as I accepted it
> another problem emerged - the parser cannot be compiled. The reason
> is:
>
> > javac OParser.java
>
> OParser.java:37096: code too large
> public static final BitSet FOLLOW_BOM_in_start_rule73 = new BitSet(new
> long[]{0x0000000000000002L,0x0020002000000000
> L,0x000C000040020400L,0x0111000600020220L,0x4000000100000001L,0x0000000180000000L,0x0000000000000000L,0x1300088005000000
> L,0x0000000000000000L,0x0000000000021000L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000
> L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000
> L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000
> L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000L,0x0000000000000000
> L,0x0000000000000000L,0x0000000000000000L,0x0000000080001000L});
>                                ^
> 1 error
>
> It is a dead end, isn't it? Is there anything I can do?
>
> --
> Erik Kratochv?l
>

From andersen at ontologyworks.com  Mon Feb 18 06:34:43 2008
From: andersen at ontologyworks.com (Bill Andersen)
Date: Mon, 18 Feb 2008 09:34:43 -0500
Subject: [antlr-interest] AST node creation
Message-ID: <A15E7D16-FBEA-4B16-9908-34E6C964948C@ontologyworks.com>

I've been trying the example on p 170 of the ANTLR reference, with a  
small tweak.  I have a tree-generating grammar ( output=AST is set }

name
	: NAME
		-> { new CommonTree(new CommonToken(NAME, "Fred")) }
	| BLANK_NAME
	;

meant to convert any NAMEs seen to "Fred".  When I run the parser and  
print the AST I don't see any Fred NAMEs, even though the test input  
hits this production plenty.

Running the code thru the debugger shows the relevant code

root_0 = (Object)adaptor.nil();
// 102:3: ->
{
   adaptor.addChild(root_0,  new CommonTree(new CommonToken(NAME,  
"Fred")) );
}

is being executed.  Am I missing anything?

   .bill

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080218/b8674975/attachment.html 

From andersen at ontologyworks.com  Mon Feb 18 06:37:12 2008
From: andersen at ontologyworks.com (Bill Andersen)
Date: Mon, 18 Feb 2008 09:37:12 -0500
Subject: [antlr-interest] AST node creation
In-Reply-To: <A15E7D16-FBEA-4B16-9908-34E6C964948C@ontologyworks.com>
References: <A15E7D16-FBEA-4B16-9908-34E6C964948C@ontologyworks.com>
Message-ID: <BE00519D-FD54-419E-A896-38599E6FA0A5@ontologyworks.com>

Folks,

My apologies.  The example below works - some kind of lag in Eclipse.

On Feb 18, 2008, at 09:34 , Bill Andersen wrote:

> I've been trying the example on p 170 of the ANTLR reference, with a  
> small tweak.  I have a tree-generating grammar ( output=AST is set }
>
> name
> 	: NAME
> 		-> { new CommonTree(new CommonToken(NAME, "Fred")) }
> 	| BLANK_NAME
> 	;
>
> meant to convert any NAMEs seen to "Fred".  When I run the parser  
> and print the AST I don't see any Fred NAMEs, even though the test  
> input hits this production plenty.
>
> Running the code thru the debugger shows the relevant code
>
> root_0 = (Object)adaptor.nil();
> // 102:3: ->
> {
>   adaptor.addChild(root_0,  new CommonTree(new CommonToken(NAME,  
> "Fred")) );
> }
>
> is being executed.  Am I missing anything?
>
>   .bill
>

Bill Andersen (andersen at ontologyworks.com)
Ontology Works, Inc. (www.ontologyworks.com)
3600 O'Donnell Street, Suite 600
Baltimore, MD 21224
Office: 410-675-1201
Cell: 443-858-6444



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080218/8e54153b/attachment.html 

From jimi at temporal-wave.com  Mon Feb 18 07:27:41 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 18 Feb 2008 07:27:41 -0800
Subject: [antlr-interest] Unterminated html comments
In-Reply-To: <b8ceeef70802172045v7459aa4byc55e34feb7cd1a26@mail.gmail.com>
Message-ID: <"H00000670004328f.1203348340.scalix.temporal-wave.com*"@MHS>





> -----Original Message-----
> From: Steve Bennett [mailto:stevagewp at gmail.com]
> Sent: Sunday, February 17, 2008 8:46 PM
> To: antlr-interest
> Subject: [antlr-interest] Unterminated html comments
> 
> Can anyone think how to lex both terminated and unterminated HTML
> comments? That is:
> 
> <!-- this should all be one token -->
> 
> <!-- this should all be one token <EOF>
> 
> I have this:
> 
> HTML_COMMENT:
>     (('<!--') => '<!--' .* ('-->' | EOF) { $channel=HIDDEN; })
>     | '<' { $type=LT; };
> 
> But it doesn't work. On a line like: <!-- foo -->, the "<!-- f" gets
> lost (doesn't form a token in ANTLRworks).

You probably want the greedy=false option on that .* rule: ( options 
{greedy=false;} : . )*

Jim


-------------- next part --------------
A non-text attachment was scrubbed...
Name: Jim Idle.vcf
Type: text/x-vcard
Size: 1863 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080218/272a941e/attachment-0001.vcf 

From r.mark.volkmann at gmail.com  Mon Feb 18 08:08:02 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Mon, 18 Feb 2008 10:08:02 -0600
Subject: [antlr-interest] generating runtime error messages with ANTLR
In-Reply-To: <459920.67996.qm@web50111.mail.re2.yahoo.com>
References: <459920.67996.qm@web50111.mail.re2.yahoo.com>
Message-ID: <f0fcc6820802180808v7cf8d7d0o2d88b0c51499fb56@mail.gmail.com>

On Feb 17, 2008 8:37 AM, Carter Cheng <carter_cheng at yahoo.com> wrote:
> Hi everyone,
>
> I have been trying to build a compiler using ANTLR
> 3.0.1 to handle most of the frontend work. I am
> curious if there is a canonical method for passing
> line count, character position information downstream
> to other phases of the compiler which can be then used
> for error reporting either in the type check phase
> after the AST is constructed or at runtime.
>
> Is there some canonical method for capturing this
> information in the AST which can then be used to
> generate error reports?

The default AST tree node class CommonTree has methods to get that
information. The getLine method works as expected, but it seems that
getCharPositionWithinLine always returns zero. Is that a known bug?

-- 
R. Mark Volkmann
Object Computing, Inc.

From stevagewp at gmail.com  Mon Feb 18 08:17:11 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Tue, 19 Feb 2008 03:17:11 +1100
Subject: [antlr-interest] Unterminated html comments
In-Reply-To: <H00000670004328f.1203348340.scalix.temporal-wave.com*@MHS>
References: <b8ceeef70802172045v7459aa4byc55e34feb7cd1a26@mail.gmail.com>
	<H00000670004328f.1203348340.scalix.temporal-wave.com*@MHS>
Message-ID: <b8ceeef70802180817y2e5269ddtb928f9124afdcf46@mail.gmail.com>

On 2/19/08, Jim Idle <jimi at temporal-wave.com> wrote:
> You probably want the greedy=false option on that .* rule: ( options
> {greedy=false;} : . )*

Hmm, the book says that .* is automatically nongreedy:

"What you really want ...is the terse notation: '.*' and '.+'.
...ANTLR considers them idioms for "Match any symbol until
you see what lies beyond the subrule." ANTLR automatically makes
these two subrules nongreedy. So, you can use '.*' instead of manually
specifying the option."


(manually specifying the option didn't change the behaviour of the
rule, that I can tell).

Any other ideas?

Steve

From darach at gmail.com  Mon Feb 18 08:58:41 2008
From: darach at gmail.com (Darach Ennis)
Date: Mon, 18 Feb 2008 16:58:41 +0000
Subject: [antlr-interest] No viable for alternative with ISO-LATIN-1
	non-breaking space character
Message-ID: <4d596d820802180858r5a4fb349ue11a89457d31d39f@mail.gmail.com>

Hi guys,

I'm not sure if this is a case of user error or a bug. I have replicated the
issue in a testcase as follows:

grammar Test;

@parser::header {
  import java.io.FileInputStream;
}

@parser::members {
  public static void main(String args[]) throws Throwable {
    final ANTLRInputStream cs = new ANTLRInputStream(new
FileInputStream("/tmp/nbsp.txt"));
    final TestLexer sl = new TestLexer(cs);
    final CommonTokenStream cts = new CommonTokenStream(sl);
    final TestParser sp = new TestParser(cts);
    sp.rules();
  }
}

rules:    anything+;
anything: Other | Directive ;
Other:   '-' ( ('directive') => ('directive') { $type = Directive; } | /*
empty */ );
WS    :    (' ' | '\t' | '\f' | '\r' | '\n' | '\u00a0') { $channel=HIDDEN;
};

Despite defining a non-breaking space (iso-latin-1) within the whitespace
hiding lexer rule 'WS'
test input with this character fails to parse as expected. Here is some test
input:

-directive ?-directive ?-directive ?-directive - - -

Here is some example output:

line 1:11 no viable alternative at character '?'
line 1:24 no viable alternative at character '?'
line 1:37 no viable alternative at character '?'


Given the above grammar I would have expected the non-breaking space
(\u00a0) to be ignored.

Is this a bug or user error? If user error, can anyone suggest a grammar
fix?

Regards,

Darach.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080218/78a59d16/attachment.html 

From stevagewp at gmail.com  Mon Feb 18 09:03:08 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Tue, 19 Feb 2008 04:03:08 +1100
Subject: [antlr-interest] Suggestions for ANTLRworks
Message-ID: <b8ceeef70802180903l5fafb412u94e522dd25777484@mail.gmail.com>

Some minor bugs/suggestions for the ANTLRworks developers:

- The AST pane should be cleared when a new debug session is begun.
Currently it seems to only be cleared when the first AST node is
constructed.
- Automatically select the "Text" radio button in "Input Text" window
when text is entered into the field. (Or disable that field when the
radio button is not selected).
- There are situations where ANTLRworks fails to recompile a changed
grammar. Eg, begin debugging/compiling, then cancel, then press debug
again - an old compiled version is used.
- Have another syntax highlight colour for syntactic predicates -
would be good to make them less obtrusive.
- Make it possible to permanently hide the "Rule" and "Root" debug
panes. I find they just take up space and are pretty fiddly to hide.
- More feedback on the lexing process? It's good that you can see what
tokens are matched, but it's hard to tell what's wrong when text
doesn't match any token...?
- Clicking on an AST node could take you to the parser rule...
- Move the debug buttons to the main toolbar. Or at least the stop
button - it's inconvenient to have to change to the debug tab just to
be able to terminate the session.
- If possible, don't invalidate the syntax diagrams the instant you
change the grammar - it makes it difficult to fix warnings, as every
time you fix one, the diagrams are gone again.
- Show the 'tokens' element in the navigation treeview on the left.
- An option to hide all completed synpreds in the parse tree. Once a
rule has completely matched, it'd be nice to hide all the green and
red trees leading up to it.
- Colour highlighting in the alternate parse tree view.
- Support more Windows shortcut keys: shift+del is the most important
- Don't de-maximise the grammar window when pressing ctrl+F (if possible)
- "Toggle syntax diagram" button seems redundant: why not generate the
syntax diagram if that tab is selected, don't generate it otherwise?
- Double click on a console line to take you to the relevant grammar
line (presumably can scan for grammarname.g:999:9 ...)
- (I just notice that errors apparently generate little red flags in
the right margin - perhaps the left margin would be more eye
catching...)
- Right-click shortcut to generate synpred: selected text foo becomes
(foo) => foo
- Some feedback on "remove all left recursion" - didn't produce any
message or anyhting when I tried.

ANTLRworks is truly an amazing tool, thanks very much for developing it!

Steve

From snyder at t-vec.com  Mon Feb 18 09:06:45 2008
From: snyder at t-vec.com (Chris Snyder)
Date: Mon, 18 Feb 2008 12:06:45 -0500
Subject: [antlr-interest] Verifying bug reports in C runtime,
	beta testers, unit tests
In-Reply-To: <"LF4E2B79F92174b859735097812C59227.1203177332.scalix.temporal-wave.com*"@MHS>
References: <"LF4E2B79F92174b859735097812C59227.1203177332.scalix.temporal-wave.com*"@MHS>
Message-ID: <006801c87250$a4f57900$265d080a@Gizmo>

Hello Jim,

 

I have an Antlr V2 C++ project that I would like to port. I'd be willing to
try porting it to Antlr V3 and C++ as a test.

 

Chris

 

  _____  

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
Sent: Saturday, February 16, 2008 10:55 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Verifying bug reports in C runtime, beta
testers,unit tests

 

I am just about finished with the updates for the C runtime for the
impending ANTLR 3.1 release, but I need to verify a few things and look for
a little help. 

 

Firstly, a number of you sent me bug reports, which I believe I kept track
of correctly, but I think I missed putting some of them in Jira. Then my new
mail server trashed all my archives and an eagle swooped down from the sky
and stole my homework, and... The long and short of it is that in order that
I can make sure I really have covered all the reported bugs, if you have
reported a bug or asked for a feature from me since the last release, please
send me a repeat email with the bug and I will endeavor to ensure that the
bugs are fixed. Sorry for the extra work, but in future I will be putting
things straight into Jira as I get them rather than fooling myself that I
will have the time to verify the bugs first and so on. I am fine with
getting repeat reports and won't  b upset or offended, so just email me
anything you have in case I have missed it. Thanks in advance for that. 

 

 

Secondly, once the code is testable I would hope that some of you might wish
to try it out for m and tell me of any bugs that you find. I have not had a
lot of testing time for this release so if a few of us get together then the
testing will take no time at all. I don't need anyone to find the actual
reason for the bugs, just give me grammar snippets or code snippets and tell
me what goes wrong. Let m know if you have time to do that. 

 

Thirdly, the other targets have unit tests that can be run for regressions
and so on. Apart from hating producing unit test, I always think it is a
good idea for someone other than the developer to write such things. If
anyone feels like they are pedantic enough to write good unit tests for the
C runtime (I don't care how they are written etc, so long as it does not
involve installing 60 Java jars to do it ;-), then please let me know and I
will arrange some access to perforce for writing these with Ter. 

 

Finally, I intend that this release will allow the generated code to be
compiled as C++. This does not mean that the libraries will compile as C++,
they will still be an external C library, but it should mean that you can
use your own C++ classes in your grammar and they will compile just fine.
The output file will still be a .c, so it is up to you to switch on whatever
flags you need to compile it as C++. I would like to know if anyone is
willing to test this out as soon as I say go. There is nothing special to do
but try it out, but I would just like to know that one or two people HAVE
tried it out, rather than just hope they have. 

 

Finally finally, this release will come with a huge improvement in API and
usage documentation, which will be placed on the web site from the usual API
documentation links on the front page.  I am hoping that a few people might
run through it looking for errors or places where my
Yorkshire/Cockney/American grammar combination doesn't make sense. 

 

Thanks for you help, 

 

Jim 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080218/231b58b9/attachment.html 

From iwm at doc.ic.ac.uk  Mon Feb 18 10:49:54 2008
From: iwm at doc.ic.ac.uk (Ian Moor)
Date: Mon, 18 Feb 2008 18:49:54 +0000 (GMT)
Subject: [antlr-interest] cant find tokenRefBangTrack
Message-ID: <2023219.521203360594703.JavaMail.ICEMail@snegopad>

I am constructing a grammar for a very small subset of C and 
the section for the if statement, which is similar to the example in the book 
generates an internal error :

 error(10):  internal error: Pico.g : java.lang.IllegalArgumentException: Can't find template tokenRefBangTrack.st

the code is 
 if_stmt    :  IF LPAREN! cond=expr RPAREN! stmt=statement      
              ( ( (ELSE) =>   ELSE) elsestmt = statement -> 
                  ^( IFELSE  $cond   $stmt $elsestmt )
               | /* empty no else */  ->
                  ^( IF $cond $stmt ) 
                  
              )             ;

Without the rewrite rules the grammar compiles.
Is there another way to do this ?
 Ian W Moor                    Department of Computing,
iwm at doc.ic.ac.uk           Imperial College.
                                    180 Queensgate
                                     London SW7 2AZ UK.
 
  


From oliver.kowalke at gmx.de  Mon Feb 18 11:05:35 2008
From: oliver.kowalke at gmx.de (Oliver Kowalke)
Date: Mon, 18 Feb 2008 20:05:35 +0100
Subject: [antlr-interest] Verifying bug reports in C runtime,
	beta testers, unit tests
In-Reply-To: <"LF4E2B79F92174b859735097812C59227.1203177332.scalix.temporal-wave.com*"@MHS>
References: <"LF4E2B79F92174b859735097812C59227.1203177332.scalix.temporal-wave.com*"@MHS>
Message-ID: <200802182005.35831.oliver.kowalke@gmx.de>

Hello Jim,

> Finally, I intend that this release will allow the generated code to be
> compiled as C++. This does not mean that the libraries will compile as C++,
> they will still be an external C library, but it should mean that you can
> use your own C++ classes in your grammar and they will compile just fine.
> The output file will still be a .c, so it is up to you to switch on
> whatever flags you need to compile it as C++. I would like to know if
> anyone is willing to test this out as soon as I say go. There is nothing
> special to do but try it out, but I would just like to know that one or two
> people HAVE tried it out, rather than just hope they have.

I'd like to try it - if you could tell me where I can download your c-runtime.

best regards,
Oliver

From antlr at mirality.co.nz  Mon Feb 18 11:09:47 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 19 Feb 2008 08:09:47 +1300
Subject: [antlr-interest] Why cant += be used without an
 "output="	option (and other Q's)
In-Reply-To: <BAYC1-PASMTP05E59F388000FFB75CBF64F5210@CEZ.ICE>
References: <BAYC1-PASMTP0539AF89FCFB385F0B3FCFF5270@CEZ.ICE>
	<ebc876d70802151745n6cfbd962ib48f115f4da27b5d@mail.gmail.com>
	<BAYC1-PASMTP0689D7552135AAF308BA82F5270@CEZ.ICE>
	<ebc876d70802162023r2315f7k127ca8d0b34dc5ca@mail.gmail.com>
	<BAYC1-PASMTP03714BA1C0AB40A74E58B9F5200@CEZ.ICE>
	<BAY0-PAMC1-F7wElo7q00012dbd@bay0-pamc1-f7.bay0.hotmail.com>
	<BAYC1-PASMTP05E59F388000FFB75CBF64F5210@CEZ.ICE>
Message-ID: <20080218190959.687D411EAF7@www.antlr.org>

At 07:19 19/02/2008, Benjamin Shropshire wrote:
 >What I'm having trouble with it using the += operator. If I set
 >output=AST then ANTLR adds the sub rules return to some sort of
 >list, however it also seems to expect me to generate an AST node 

 >in the sub rule for it to return. If I don't, I get a list of
 >nulls (and end up with seg-v's) I still haven't figured out how
 >to have a sub rule generate and return a specific type rather
 >than the default antlr type.

If you're using code fragments to construct your own data 
structures (and thus aren't generating an AST), there's no need to 
use += at all.

If you are generating an AST, then every rule needs to generate an 
AST, although you can also return additional information.


From brent.yates at gmail.com  Mon Feb 18 11:16:10 2008
From: brent.yates at gmail.com (Brent Yates)
Date: Mon, 18 Feb 2008 14:16:10 -0500
Subject: [antlr-interest] cant find tokenRefBangTrack
In-Reply-To: <2023219.521203360594703.JavaMail.ICEMail@snegopad>
References: <2023219.521203360594703.JavaMail.ICEMail@snegopad>
Message-ID: <6edc6c380802181116i7eead5afra18e2fd40528fdd8@mail.gmail.com>

I have seen this before when mixing rewrite and !^ styles.  I believe that
if you remove the !'s it will work fine.  Also, it may be a little clearer
if you write the rule like this (unverified):

 if_stmt    :  (IF LPAREN cond=expr RPAREN stmt=statement -> ^(IF $cond
$stmt) )
               (ELSE elsestmt = statement -> ^( IFELSE  $cond   $stmt
$elsestmt ) )?
            ;

Brent Yates

On Feb 18, 2008 1:49 PM, Ian Moor <iwm at doc.ic.ac.uk> wrote:

> I am constructing a grammar for a very small subset of C and
> the section for the if statement, which is similar to the example in the
> book
> generates an internal error :
>
>  error(10):  internal error: Pico.g : java.lang.IllegalArgumentException:
> Can't find template tokenRefBangTrack.st
>
> the code is
>  if_stmt    :  IF LPAREN! cond=expr RPAREN! stmt=statement
>              ( ( (ELSE) =>   ELSE) elsestmt = statement ->
>                  ^( IFELSE  $cond   $stmt $elsestmt )
>               | /* empty no else */  ->
>                  ^( IF $cond $stmt )
>
>              )             ;
>
> Without the rewrite rules the grammar compiles.
> Is there another way to do this ?
>  Ian W Moor                    Department of Computing,
> iwm at doc.ic.ac.uk           Imperial College.
>                                    180 Queensgate
>                                     London SW7 2AZ UK.
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080218/5a961f22/attachment.html 

From pink at odahoda.de  Mon Feb 18 11:49:41 2008
From: pink at odahoda.de (Benjamin Niemann)
Date: Mon, 18 Feb 2008 20:49:41 +0100
Subject: [antlr-interest] Reading from sys.stdin with ANTLR-Python (for
	an REPL)
References: <d4f450350802172152r21978a74l6f1b824e784b9032@mail.gmail.com>
Message-ID: <fpcngl$icr$1@ger.gmane.org>

Hi Aaron,

Aaron Lebo wrote:

> Hi. I'm obviously using the Python runtime of ANTLR.
> 
> Reading from a file and parsing it is trivial. The code looks a bit like:
> 
> import antlr3
> import LangLexer
> import LangParser
> 
> input = antlr3.ANTLRFileStream('filename...')
> lexer = LangLexer.LangLexer(input)
> tokens = antlr3.CommonTokenStream(lexer)
> parser = LangParser.LangParser(tokens)
> 
> So I'm having no issue with that. What I am wanting to do is an REPL and I
> need to interactively parse the data coming from sys.stdin. The problem is
> that all of the 'Stream' classes from the antlr3 package read all input on
> creation, so passing sys.stdin or sys.stdin.read() causes the REPL to
> hang, as something like antlr3.ANTLRInputStream(sys.stdin) reads
> infinitely.
> 
> Am I making sense? What solution is there?

ANTLR out of the box is not really suited for such incremential parsing -
that's not a Python specific issue. Building an incremential TokenStream is
not a big deal - I have the code already, and I'm planning for a long time
now to clean it up and add it to the Python runtime... But the logic to
detect when a statement is complete resides in the parser and I don't know
a solution for that problem...

-Ben


-- 
Benjamin Niemann
Email: pink at odahoda dot de
WWW: http://pink.odahoda.de/


From parrt at cs.usfca.edu  Mon Feb 18 12:21:59 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 18 Feb 2008 12:21:59 -0800
Subject: [antlr-interest] cant find tokenRefBangTrack
In-Reply-To: <6edc6c380802181116i7eead5afra18e2fd40528fdd8@mail.gmail.com>
References: <2023219.521203360594703.JavaMail.ICEMail@snegopad>
	<6edc6c380802181116i7eead5afra18e2fd40528fdd8@mail.gmail.com>
Message-ID: <EE204E50-7766-42D7-BB33-32C2969052FB@cs.usfca.edu>

latest build emits a better error message I believe.
Ter
On Feb 18, 2008, at 11:16 AM, Brent Yates wrote:

> I have seen this before when mixing rewrite and !^ styles.  I  
> believe that if you remove the !'s it will work fine.  Also, it may  
> be a little clearer if you write the rule like this (unverified):
>
>  if_stmt    :  (IF LPAREN cond=expr RPAREN stmt=statement -> ^(IF  
> $cond $stmt) )
>                (ELSE elsestmt = statement -> ^( IFELSE  $cond    
> $stmt $elsestmt ) )?
>             ;
>
> Brent Yates
>
> On Feb 18, 2008 1:49 PM, Ian Moor <iwm at doc.ic.ac.uk> wrote:
> I am constructing a grammar for a very small subset of C and
> the section for the if statement, which is similar to the example in  
> the book
> generates an internal error :
>
>  error(10):  internal error: Pico.g :  
> java.lang.IllegalArgumentException: Can't find template  
> tokenRefBangTrack.st
>
> the code is
>  if_stmt    :  IF LPAREN! cond=expr RPAREN! stmt=statement
>              ( ( (ELSE) =>   ELSE) elsestmt = statement ->
>                  ^( IFELSE  $cond   $stmt $elsestmt )
>               | /* empty no else */  ->
>                  ^( IF $cond $stmt )
>
>              )             ;
>
> Without the rewrite rules the grammar compiles.
> Is there another way to do this ?
>  Ian W Moor                    Department of Computing,
> iwm at doc.ic.ac.uk           Imperial College.
>                                    180 Queensgate
>                                     London SW7 2AZ UK.
>
>
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080218/04304073/attachment.html 

From jimi at temporal-wave.com  Mon Feb 18 12:06:12 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 18 Feb 2008 12:06:12 -0800
Subject: [antlr-interest] ANTLR could not analyze...
In-Reply-To: <b8ceeef70802172047p1e9857d0l6692e17c841bb438@mail.gmail.com>
Message-ID: <"H0000067000432e3.1203348461.scalix.temporal-wave.com*"@MHS>

> -----Original Message-----
> From: Steve Bennett [mailto:stevagewp at gmail.com]


> On 2/17/08, Steve Bennett <stevagewp at gmail.com> wrote:
> > ANTLR will re-analyze the decision with a fixed lookahead of k=1.
> > Consider using "options {k=1;}" for that decision and possibly 
adding
> > a syntactic predicate.
> 
> ...
> 
> 
> > As you can see, I'm using options k=1, and no shortage of syntactic
> > predicates - what else can I do?
> 
> Any response to this one? It seems to be a bug. Is there anything I
> can do about it?

I doubt it is a bug, but it is possible. Are using backtrack=true? I 
think that that will be necessary for what you are parsing, as though 
you could probably find ways around it, I am not sure you would end up 
with anything better than backtracking with memorization in this case. 
Also, give the latest snapshot a try and see if you get anything 
different, just in case.

Jim

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Jim Idle.vcf
Type: text/x-vcard
Size: 1863 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080218/f304015f/attachment.vcf 

From jimi at temporal-wave.com  Mon Feb 18 12:53:11 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 18 Feb 2008 12:53:11 -0800
Subject: [antlr-interest] No viable for alternative with ISO-LATIN-1
	non-breaking space character
In-Reply-To: <4d596d820802180858r5a4fb349ue11a89457d31d39f@mail.gmail.com>
Message-ID: <"H0000067000435c9.1203367990.scalix.temporal-wave.com*"@MHS>

Are you sure that that is actually? character 0xa0? Print the hex value
of it.

?

However, I think that perhaps ?you need to add the ?UTF8? encoding
option to your input stream?

?

new ANTLRFileStream((/tmp/nbsp.txt", "UTF8")

?

Jim

?

From: Darach Ennis [mailto:darach at gmail.com] 
Sent: Monday, February 18, 2008 8:59 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] No viable for alternative with ISO-LATIN-1
non-breaking space character

?

Hi guys,

I'm not sure if this is a case of user error or a bug. I have replicated
the issue in a testcase as follows:

grammar Test;

@parser::header {
? import java.io.FileInputStream;
}

@parser::members {
? public static void main(String args[]) throws Throwable {
??? final ANTLRInputStream cs = new ANTLRInputStream(new
FileInputStream("/tmp/nbsp.txt"));
??? final TestLexer sl = new TestLexer(cs);
??? final CommonTokenStream cts = new CommonTokenStream(sl);
??? final TestParser sp = new TestParser(cts);
??? sp.rules();
? }
}

rules:??? anything+;
anything: Other | Directive ;
Other:?? '-' ( ('directive') => ('directive') { $type = Directive; } |
/* empty */ );
WS??? :??? (' ' | '\t' | '\f' | '\r' | '\n' | '\u00a0') {
$channel=HIDDEN; };

Despite defining a non-breaking space (iso-latin-1) within the
whitespace hiding lexer rule 'WS'
test input with this character fails to parse as expected. Here is some
test input:

-directive ?-directive ?-directive ?-directive - - -

Here is some example output:

line 1:11 no viable alternative at character '?'
line 1:24 no viable alternative at character '?'
line 1:37 no viable alternative at character '?'


Given the above grammar I would have expected the non-breaking space
(\u00a0) to be ignored.

Is this a bug or user error? If user error, can anyone suggest a grammar
fix?

Regards,

Darach.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080218/f1e1234d/attachment.html 

From jimi at temporal-wave.com  Mon Feb 18 12:57:41 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 18 Feb 2008 12:57:41 -0800
Subject: [antlr-interest] Verifying bug reports in C runtime,
	beta testers, unit tests
In-Reply-To: <200802182005.35831.oliver.kowalke@gmx.de>
Message-ID: <"H0000067000435d0.1203368191.scalix.temporal-wave.com*"@MHS>

I will announce the availability and down load links shortly,

Thanks for your time.

Jim




> -----Original Message-----
> From: Oliver Kowalke [mailto:oliver.kowalke at gmx.de]
> Sent: Monday, February 18, 2008 11:06 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Verifying bug reports in C runtime, beta
> testers, unit tests
> 
> Hello Jim,
> 
> > Finally, I intend that this release will allow the generated code to
> be
> > compiled as C++. This does not mean that the libraries will compile
> as C++,
> > they will still be an external C library, but it should mean that 
you
> can
> > use your own C++ classes in your grammar and they will compile just
> fine.
> > The output file will still be a .c, so it is up to you to switch on
> > whatever flags you need to compile it as C++. I would like to know 
if
> > anyone is willing to test this out as soon as I say go. There is
> nothing
> > special to do but try it out, but I would just like to know that one
> or two
> > people HAVE tried it out, rather than just hope they have.
> 
> I'd like to try it - if you could tell me where I can download your c-
> runtime.
> 
> best regards,
> Oliver


-------------- next part --------------
A non-text attachment was scrubbed...
Name: Jim Idle.vcf
Type: text/x-vcard
Size: 1863 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080218/d8109551/attachment.vcf 

From jimi at temporal-wave.com  Mon Feb 18 12:58:47 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 18 Feb 2008 12:58:47 -0800
Subject: [antlr-interest] cant find tokenRefBangTrack
In-Reply-To: <6edc6c380802181116i7eead5afra18e2fd40528fdd8@mail.gmail.com>
Message-ID: <"H0000067000436b4.1203368261.scalix.temporal-wave.com*"@MHS>

Yes, for the short term, this is what you get. Ter has a plan to stop
this happening as it is very annoying.

 

Jim

 

 

 

From: Brent Yates [mailto:brent.yates at gmail.com] 
Sent: Monday, February 18, 2008 11:16 AM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] cant find tokenRefBangTrack

 

I have seen this before when mixing rewrite and !^ styles.  I believe
that if you remove the !'s it will work fine.  Also, it may be a little
clearer if you write the rule like this (unverified):

 if_stmt    :  (IF LPAREN cond=expr RPAREN stmt=statement -> ^(IF $cond
$stmt) )
               (ELSE elsestmt = statement -> ^( IFELSE  $cond   $stmt
$elsestmt ) )?
            ;

Brent Yates

On Feb 18, 2008 1:49 PM, Ian Moor <iwm at doc.ic.ac.uk> wrote:

I am constructing a grammar for a very small subset of C and
the section for the if statement, which is similar to the example in the
book
generates an internal error :

 error(10):  internal error: Pico.g :
java.lang.IllegalArgumentException: Can't find template
tokenRefBangTrack.st

the code is
 if_stmt    :  IF LPAREN! cond=expr RPAREN! stmt=statement
             ( ( (ELSE) =>   ELSE) elsestmt = statement ->
                 ^( IFELSE  $cond   $stmt $elsestmt )
              | /* empty no else */  ->
                 ^( IF $cond $stmt )

             )             ;

Without the rewrite rules the grammar compiles.
Is there another way to do this ?
 Ian W Moor                    Department of Computing,
iwm at doc.ic.ac.uk           Imperial College.
                                   180 Queensgate
                                    London SW7 2AZ UK.



 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080218/029ffff8/attachment-0001.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Jim Idle.vcf
Type: text/x-vcard
Size: 1863 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080218/029ffff8/attachment-0001.vcf 

From jpen054 at ec.auckland.ac.nz  Mon Feb 18 13:31:52 2008
From: jpen054 at ec.auckland.ac.nz (Jamie Penney)
Date: Tue, 19 Feb 2008 10:31:52 +1300
Subject: [antlr-interest] Rewrite rule question
Message-ID: <47B9F948.2030201@ec.auckland.ac.nz>

Hi All,

I have a set of rewrite rules like so:
primary_expression :
        (literal | simple_name | ... )
        (DOT IDENTIFIER some_rule -> ^(PRIMARY_EXPRESSION 
$primary_expression DOT IDENTIFIER type_argument_list_handler)
            |    ... )*

If there are none of the last group, then no rewrite rule is triggered. 
If I specify a rewrite rule on the first group, will the rewrite rules 
in the second group overwrite the ones from the first if they are 
triggered (this is the behaviour I want)? Is there a way of doing this? 
There are quite a lot of alternatives in both groups, and they are all 
quite different, so I'm not sure what I should be doing here.

Thanks,
Jamie

From jimi at temporal-wave.com  Mon Feb 18 13:37:39 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 18 Feb 2008 13:37:39 -0800
Subject: [antlr-interest] Rewrite rule question
In-Reply-To: <47B9F948.2030201@ec.auckland.ac.nz>
Message-ID: <"L6E41E12005AB487dAF3F48AA0813B58E.1203370659.scalix.temporal-wave.com*"@MHS>

> -----Original Message-----
> From: Jamie Penney [mailto:jpen054 at ec.auckland.ac.nz]
> Sent: Monday, February 18, 2008 1:32 PM
> I have a set of rewrite rules like so:
> primary_expression :
>         (literal | simple_name | ... )
>         (DOT IDENTIFIER some_rule -> ^(PRIMARY_EXPRESSION 
$primary_expression DOT IDENTIFIER type_argument_list_handler)
>             |    ... )*
> 
> If there are none of the last group, then no rewrite rule is 
triggered.
> If I specify a rewrite rule on the first group, will the rewrite rules
> in the second group overwrite the ones from the first if they are
> triggered (this is the behaviour I want)? 

Yes. But you may find that you have to supply rewrites for the other 
alts when you supply a rewrite for one of them. You could place that in 
a subrule if you want to avoid having to do that.

Jim




From jpen054 at ec.auckland.ac.nz  Mon Feb 18 14:04:40 2008
From: jpen054 at ec.auckland.ac.nz (Jamie Penney)
Date: Tue, 19 Feb 2008 11:04:40 +1300
Subject: [antlr-interest] Empty alternative causes error
Message-ID: <47BA00F8.9050305@ec.auckland.ac.nz>

Hi All,
I have the following rules:
type_argument_list_handler
    :    (type_argument_list)=> type_argument_list -> ^(OPTIONAL 
type_argument_list)
    |    /*empty*/ -> ^(OPTIONAL)
    ;

type_argument_list
    :    LT type_parameters GT -> ^(OPEN_GENERICS[$LT] type_parameters 
CLOSE_GENERICS[$GT])
    ;

If I try to remove the empty alternative, I get warnings about 
type_argument_list_handler being able to handle LT using multiple 
alternatives, yet there are no alternatives. If I leave it there, I get 
a test for the UP token generated from that rule, yet UP does not exist.

I have two possible answers to this problem.
1) The grammar is wrong. Is there another way of specifying empty rules?
2) ANTLR is wrong. I know that Token.UP is really what it is searching 
for, yet it uses UP instead. Is this possibly a bug?

Thanks,
Jamie

From jpen054 at ec.auckland.ac.nz  Mon Feb 18 14:07:17 2008
From: jpen054 at ec.auckland.ac.nz (Jamie Penney)
Date: Tue, 19 Feb 2008 11:07:17 +1300
Subject: [antlr-interest] Rewrite rule question
In-Reply-To: <"L6E41E12005AB487dAF3F48AA0813B58E.1203370659.scalix.temporal-wave.com*"@MHS>
References: <"L6E41E12005AB487dAF3F48AA0813B58E.1203370659.scalix.temporal-wave.com*"@MHS>
Message-ID: <47BA0195.0@ec.auckland.ac.nz>

Jim Idle wrote:
>> -----Original Message-----
>> From: Jamie Penney [mailto:jpen054 at ec.auckland.ac.nz]
>> Sent: Monday, February 18, 2008 1:32 PM
>> I have a set of rewrite rules like so:
>> primary_expression :
>>         (literal | simple_name | ... )
>>         (DOT IDENTIFIER some_rule -> ^(PRIMARY_EXPRESSION 
>>     
> $primary_expression DOT IDENTIFIER type_argument_list_handler)
>   
>>             |    ... )*
>>
>> If there are none of the last group, then no rewrite rule is 
>>     
> triggered.
>   
>> If I specify a rewrite rule on the first group, will the rewrite rules
>> in the second group overwrite the ones from the first if they are
>> triggered (this is the behaviour I want)? 
>>     
>
> Yes. But you may find that you have to supply rewrites for the other 
> alts when you supply a rewrite for one of them. You could place that in 
> a subrule if you want to avoid having to do that.
>
> Jim
That should be fine. I am trying to preserve the existing rewrite rules 
if I can.

Thanks,
Jamie Penney

From darach at gmail.com  Mon Feb 18 14:38:21 2008
From: darach at gmail.com (Darach Ennis)
Date: Mon, 18 Feb 2008 22:38:21 +0000
Subject: [antlr-interest] No viable for alternative with ISO-LATIN-1
	non-breaking space character
In-Reply-To: <H0000067000435c9.1203367990.scalix.temporal-wave.com*@MHS>
References: <4d596d820802180858r5a4fb349ue11a89457d31d39f@mail.gmail.com>
	<H0000067000435c9.1203367990.scalix.temporal-wave.com*@MHS>
Message-ID: <4d596d820802181438md66db5dw7d928597ef687e5f@mail.gmail.com>

Hi Jim.

Bingo! Thank you! You were very close:

new ANTLRFileStream("/tmp/nbsp.txt", "ISO-8859-1")

The non-breaking-space is encoding specific and my input stream is
iso-8859-1
so this should be iso-8859-1 in my case. What is the default encoding in
ANTLRInputStream?
Is it UTF-8 or the system encoding? The javadoc could mention what the
default is.

Regards,

Darach.

PS: I generally use the POSIX.1 od  utility (od -H file.txt on unix/linux)
to verify characters in the input encoding.

On Feb 18, 2008 8:53 PM, Jim Idle <jimi at temporal-wave.com> wrote:

>  Are you sure that that is actually  character 0xa0? Print the hex value
> of it.
>
>
>
> However, I think that perhaps  you need to add the "UTF8" encoding option
> to your input stream?
>
>
>
> new ANTLRFileStream((/tmp/nbsp.txt", "UTF8")
>
>
>
> Jim
>
>
>
> *From:* Darach Ennis [mailto:darach at gmail.com]
> *Sent:* Monday, February 18, 2008 8:59 AM
> *To:* antlr-interest at antlr.org
> *Subject:* [antlr-interest] No viable for alternative with ISO-LATIN-1
> non-breaking space character
>
>
>
> Hi guys,
>
> I'm not sure if this is a case of user error or a bug. I have replicated
> the issue in a testcase as follows:
>
> grammar Test;
>
> @parser::header {
>   import java.io.FileInputStream;
> }
>
> @parser::members {
>   public static void main(String args[]) throws Throwable {
>     final ANTLRInputStream cs = new ANTLRInputStream(new
> FileInputStream("/tmp/nbsp.txt"));
>     final TestLexer sl = new TestLexer(cs);
>     final CommonTokenStream cts = new CommonTokenStream(sl);
>     final TestParser sp = new TestParser(cts);
>     sp.rules();
>   }
> }
>
> rules:    anything+;
> anything: Other | Directive ;
> Other:   '-' ( ('directive') => ('directive') { $type = Directive; } | /*
> empty */ );
> WS    :    (' ' | '\t' | '\f' | '\r' | '\n' | '\u00a0') { $channel=HIDDEN;
> };
>
> Despite defining a non-breaking space (iso-latin-1) within the whitespace
> hiding lexer rule 'WS'
> test input with this character fails to parse as expected. Here is some
> test input:
>
> -directive ?-directive ?-directive ?-directive - - -
>
> Here is some example output:
>
> line 1:11 no viable alternative at character '?'
> line 1:24 no viable alternative at character '?'
> line 1:37 no viable alternative at character '?'
>
>
> Given the above grammar I would have expected the non-breaking space
> (\u00a0) to be ignored.
>
> Is this a bug or user error? If user error, can anyone suggest a grammar
> fix?
>
> Regards,
>
> Darach.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080218/abf2da0f/attachment.html 

From jpen054 at ec.auckland.ac.nz  Mon Feb 18 14:41:41 2008
From: jpen054 at ec.auckland.ac.nz (Jamie Penney)
Date: Tue, 19 Feb 2008 11:41:41 +1300
Subject: [antlr-interest] No viable for alternative with
 ISO-LATIN-1	non-breaking space character
In-Reply-To: <4d596d820802181438md66db5dw7d928597ef687e5f@mail.gmail.com>
References: <4d596d820802180858r5a4fb349ue11a89457d31d39f@mail.gmail.com>	<H0000067000435c9.1203367990.scalix.temporal-wave.com*@MHS>
	<4d596d820802181438md66db5dw7d928597ef687e5f@mail.gmail.com>
Message-ID: <47BA09A5.8010903@ec.auckland.ac.nz>

I had an issue earlier today with the Java version of the grammar I am 
working on not reading UTF-8 encoded text properly. I would also like to 
know what the default is.

Thanks,
Jamie Penney

Darach Ennis wrote:
> Hi Jim.
>
> Bingo! Thank you! You were very close:
>
> new ANTLRFileStream("/tmp/nbsp.txt", "ISO-8859-1")
>
> The non-breaking-space is encoding specific and my input stream is 
> iso-8859-1
> so this should be iso-8859-1 in my case. What is the default encoding 
> in ANTLRInputStream?
> Is it UTF-8 or the system encoding? The javadoc could mention what the 
> default is.
>
> Regards,
>
> Darach.
>
> PS: I generally use the POSIX.1 od  utility (od -H file.txt on 
> unix/linux) to verify characters in the input encoding.
>
> On Feb 18, 2008 8:53 PM, Jim Idle <jimi at temporal-wave.com 
> <mailto:jimi at temporal-wave.com>> wrote:
>
>     Are you sure that that is actually  character 0xa0? Print the hex
>     value of it.
>
>      
>
>     However, I think that perhaps  you need to add the "UTF8" encoding
>     option to your input stream?
>
>      
>
>     new ANTLRFileStream((/tmp/nbsp.txt", "UTF8")
>
>      
>
>     Jim
>
>      
>
>     *From:* Darach Ennis [mailto:darach at gmail.com
>     <mailto:darach at gmail.com>]
>     *Sent:* Monday, February 18, 2008 8:59 AM
>     *To:* antlr-interest at antlr.org <mailto:antlr-interest at antlr.org>
>     *Subject:* [antlr-interest] No viable for alternative with
>     ISO-LATIN-1 non-breaking space character
>
>      
>
>     Hi guys,
>
>     I'm not sure if this is a case of user error or a bug. I have
>     replicated the issue in a testcase as follows:
>
>     grammar Test;
>
>     @parser::header {
>       import java.io.FileInputStream;
>     }
>
>     @parser::members {
>       public static void main(String args[]) throws Throwable {
>         final ANTLRInputStream cs = new ANTLRInputStream(new
>     FileInputStream("/tmp/nbsp.txt"));
>         final TestLexer sl = new TestLexer(cs);
>         final CommonTokenStream cts = new CommonTokenStream(sl);
>         final TestParser sp = new TestParser(cts);
>         sp.rules();
>       }
>     }
>
>     rules:    anything+;
>     anything: Other | Directive ;
>     Other:   '-' ( ('directive') => ('directive') { $type = Directive;
>     } | /* empty */ );
>     WS    :    (' ' | '\t' | '\f' | '\r' | '\n' | '\u00a0') {
>     $channel=HIDDEN; };
>
>     Despite defining a non-breaking space (iso-latin-1) within the
>     whitespace hiding lexer rule 'WS'
>     test input with this character fails to parse as expected. Here is
>     some test input:
>
>     -directive ?-directive ?-directive ?-directive - - -
>
>     Here is some example output:
>
>     line 1:11 no viable alternative at character '?'
>     line 1:24 no viable alternative at character '?'
>     line 1:37 no viable alternative at character '?'
>
>
>     Given the above grammar I would have expected the non-breaking
>     space (\u00a0) to be ignored.
>
>     Is this a bug or user error? If user error, can anyone suggest a
>     grammar fix?
>
>     Regards,
>
>     Darach.
>
>


From stevagewp at gmail.com  Mon Feb 18 14:53:15 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Tue, 19 Feb 2008 09:53:15 +1100
Subject: [antlr-interest] Unterminated html comments
In-Reply-To: <b8ceeef70802180817y2e5269ddtb928f9124afdcf46@mail.gmail.com>
References: <b8ceeef70802172045v7459aa4byc55e34feb7cd1a26@mail.gmail.com>
	<H00000670004328f.1203348340.scalix.temporal-wave.com*@MHS>
	<b8ceeef70802180817y2e5269ddtb928f9124afdcf46@mail.gmail.com>
Message-ID: <b8ceeef70802181453o2352e14eg35f9ab7576beff48@mail.gmail.com>

On 2/19/08, Steve Bennett <stevagewp at gmail.com> wrote:
> (manually specifying the option didn't change the behaviour of the
> rule, that I can tell).
>
> Any other ideas?

Hey, just tried forcing greedy=true with a slight tweak and it works as desired:

HTML_COMMENT:
    (('<!--' .* '-->') => '<!--' .* '-->' { $channel=HIDDEN; })
    |(('<!--') => '<!--' (options {greedy=true;}: .)*  { $channel=HIDDEN; })
    | '<' { $type=LT; };

Seems to pass all the test cases I can think of. (Well, except it's
losing the first character on malformed comments but anyway...)

Steve

From stevagewp at gmail.com  Mon Feb 18 14:53:47 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Tue, 19 Feb 2008 09:53:47 +1100
Subject: [antlr-interest] ANTLR could not analyze...
In-Reply-To: <H0000067000432e3.1203348461.scalix.temporal-wave.com*@MHS>
References: <b8ceeef70802172047p1e9857d0l6692e17c841bb438@mail.gmail.com>
	<H0000067000432e3.1203348461.scalix.temporal-wave.com*@MHS>
Message-ID: <b8ceeef70802181453g78863b65s961bbc0528f307c2@mail.gmail.com>

On 2/19/08, Jim Idle <jimi at temporal-wave.com> wrote:
> I doubt it is a bug, but it is possible. Are using backtrack=true? I
> think that that will be necessary for what you are parsing, as though
> you could probably find ways around it, I am not sure you would end up
> with anything better than backtracking with memorization in this case.
> Also, give the latest snapshot a try and see if you get anything
> different, just in case.

With backtrack=true, I don't get the warnings, but the grammar also
doesn't behave quite correctly. Not sure why, but in a standard test
input, one of the rules fails. Probably fixable. I guess I've been
avoiding backtracking until now to really understand what it does...it
may be a good solution for readability though.

Can you explain why the warnings don't appear with backtrack=true?

I can't really test the snapshot (immediately) because it treats
certain warnings as errors. Eg, "The following alternatives are
unreachable: 1". In ANTLRworks that's a warning, with the snapshot
it's an error. Actually it also seems to generate the original warning
(Could not analyze...) but then ramps it up to a warning (internal
error...could not even do k=1 for decision 20).

Were these deliberate choices? What was the reasoning?

Aside: the "following alternatives are unreachable" warning/error it
gives points to the middle character of the sequence ".)*" in my
HTML_COMMENT rule:

HTML_COMMENT:
    (('<!--') => '<!--' (options {greedy=false;}: .)* ('-->' | EOF) {
$channel=HIDDEN; })
    | '<' { $type=LT; };

Why is that unreachable?

Steve

From jimi at temporal-wave.com  Mon Feb 18 14:35:44 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 18 Feb 2008 14:35:44 -0800
Subject: [antlr-interest] Empty alternative causes error
In-Reply-To: <47BA00F8.9050305@ec.auckland.ac.nz>
Message-ID: <"L03CE740D17E04ccb86AC344FCDDE681F.1203374144.scalix.temporal-wave.com*"@MHS>

My educated guess is that you are trying to write a C# parser and 
falling in to the trap of typing in the language spec too literally. The 
spec is not a spec for writing a grammar and so it creates ambiguities 
all over the place. Basically, you just cannot write it by following the 
language spec like that, you must left factor everything so it is a 
sensible grammar.

I suspect that what is happening is that when you remove the empty alt, 
a rule higher up creates the ambiguity. There is a difference between 
generic declarations and generic invocations and you also need to be 
able to distinguish between generics and the < operator in some 
circumstances. 

Finally, you don't need the CLOSE_GENERICS element of the tree you are 
building.

There are no bugs in this area that I am aware of, I am afraid that you 
probably need to rethink your grammar.

Jim




> -----Original Message-----
> From: Jamie Penney [mailto:jpen054 at ec.auckland.ac.nz]
> Sent: Monday, February 18, 2008 2:05 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Empty alternative causes error
> 
> Hi All,
> I have the following rules:
> type_argument_list_handler
>     :    (type_argument_list)=> type_argument_list -> ^(OPTIONAL
> type_argument_list)
>     |    /*empty*/ -> ^(OPTIONAL)
>     ;
> 
> type_argument_list
>     :    LT type_parameters GT -> ^(OPEN_GENERICS[$LT] type_parameters
> CLOSE_GENERICS[$GT])
>     ;
> 
> If I try to remove the empty alternative, I get warnings about
> type_argument_list_handler being able to handle LT using multiple
> alternatives, yet there are no alternatives. If I leave it there, I 
get
> a test for the UP token generated from that rule, yet UP does not
> exist.
> 
> I have two possible answers to this problem.
> 1) The grammar is wrong. Is there another way of specifying empty
> rules?
> 2) ANTLR is wrong. I know that Token.UP is really what it is searching
> for, yet it uses UP instead. Is this possibly a bug?
> 
> Thanks,
> Jamie



From jimi at temporal-wave.com  Mon Feb 18 14:39:40 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 18 Feb 2008 14:39:40 -0800
Subject: [antlr-interest] No viable for alternative with ISO-LATIN-1
	non-breaking space character
In-Reply-To: <4d596d820802181438md66db5dw7d928597ef687e5f@mail.gmail.com>
Message-ID: <"L9F105323298948169F271994273A3DF9.1203374380.scalix.temporal-wave.com*"@MHS>

The encoding is just the usual Java defaults as ANTLRFileStream just
uses standard Java IO routines and passes on what you give it. If you
give it nothing, then you get the Java default.

 

Jim

 

 

 

From: Darach Ennis [mailto:darach at gmail.com] 
Sent: Monday, February 18, 2008 2:38 PM
To: Jim Idle
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] No viable for alternative with ISO-LATIN-1
non-breaking space character

 

Hi Jim.

Bingo! Thank you! You were very close:

new ANTLRFileStream("/tmp/nbsp.txt", "ISO-8859-1")

The non-breaking-space is encoding specific and my input stream is
iso-8859-1
so this should be iso-8859-1 in my case. What is the default encoding in
ANTLRInputStream?
Is it UTF-8 or the system encoding? The javadoc could mention what the
default is.



 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080218/b181f19d/attachment.html 

From guntiso at latnet.lv  Mon Feb 18 15:08:22 2008
From: guntiso at latnet.lv (Guntis Ozols)
Date: Tue, 19 Feb 2008 01:08:22 +0200
Subject: [antlr-interest] No viable for alternative with
	ISO-LATIN-1	non-breaking space character
In-Reply-To: <47BA09A5.8010903@ec.auckland.ac.nz>
References: <4d596d820802180858r5a4fb349ue11a89457d31d39f@mail.gmail.com>
	<H0000067000435c9.1203367990.scalix.temporal-wave.com*@MHS>
	<4d596d820802181438md66db5dw7d928597ef687e5f@mail.gmail.com>
	<47BA09A5.8010903@ec.auckland.ac.nz>
Message-ID: <1203376102.47ba0fe6b03c7@clients.latnet.lv>

See:
http://java.sun.com/j2se/1.4.2/docs/api/java/nio/charset/Charset.html

"Every instance of the Java virtual machine has a default charset, which may or
may not be one of the standard charsets. The default charset is determined
during virtual-machine startup and typically depends upon the locale and
charset being used by the underlying operating system."

Guntis

> I had an issue earlier today with the Java version of the grammar I am
> working on not reading UTF-8 encoded text properly. I would also like to
> know what the default is.
>
> Thanks,
> Jamie Penney
>
> Darach Ennis wrote:
> > Hi Jim.
> >
> > Bingo! Thank you! You were very close:
> >
> > new ANTLRFileStream("/tmp/nbsp.txt", "ISO-8859-1")
> >
> > The non-breaking-space is encoding specific and my input stream is
> > iso-8859-1
> > so this should be iso-8859-1 in my case. What is the default encoding
> > in ANTLRInputStream?
> > Is it UTF-8 or the system encoding? The javadoc could mention what the
> > default is.
> >
> > Regards,
> >
> > Darach.
> >
> > PS: I generally use the POSIX.1 od  utility (od -H file.txt on
> > unix/linux) to verify characters in the input encoding.
> >
> > On Feb 18, 2008 8:53 PM, Jim Idle <jimi at temporal-wave.com
> > <mailto:jimi at temporal-wave.com>> wrote:
> >
> >     Are you sure that that is actually  character 0xa0? Print the hex
> >     value of it.
> >
> >
> >
> >     However, I think that perhaps  you need to add the "UTF8" encoding
> >     option to your input stream?
> >
> >
> >
> >     new ANTLRFileStream((/tmp/nbsp.txt", "UTF8")
> >
> >
> >
> >     Jim
> >
> >
> >
> >     *From:* Darach Ennis [mailto:darach at gmail.com
> >     <mailto:darach at gmail.com>]
> >     *Sent:* Monday, February 18, 2008 8:59 AM
> >     *To:* antlr-interest at antlr.org <mailto:antlr-interest at antlr.org>
> >     *Subject:* [antlr-interest] No viable for alternative with
> >     ISO-LATIN-1 non-breaking space character
> >
> >
> >
> >     Hi guys,
> >
> >     I'm not sure if this is a case of user error or a bug. I have
> >     replicated the issue in a testcase as follows:
> >
> >     grammar Test;
> >
> >     @parser::header {
> >       import java.io.FileInputStream;
> >     }
> >
> >     @parser::members {
> >       public static void main(String args[]) throws Throwable {
> >         final ANTLRInputStream cs = new ANTLRInputStream(new
> >     FileInputStream("/tmp/nbsp.txt"));
> >         final TestLexer sl = new TestLexer(cs);
> >         final CommonTokenStream cts = new CommonTokenStream(sl);
> >         final TestParser sp = new TestParser(cts);
> >         sp.rules();
> >       }
> >     }
> >
> >     rules:    anything+;
> >     anything: Other | Directive ;
> >     Other:   '-' ( ('directive') => ('directive') { $type = Directive;
> >     } | /* empty */ );
> >     WS    :    (' ' | '\t' | '\f' | '\r' | '\n' | '\u00a0') {
> >     $channel=HIDDEN; };
> >
> >     Despite defining a non-breaking space (iso-latin-1) within the
> >     whitespace hiding lexer rule 'WS'
> >     test input with this character fails to parse as expected. Here is
> >     some test input:
> >
> >     -directive ?-directive ?-directive ?-directive - - -
> >
> >     Here is some example output:
> >
> >     line 1:11 no viable alternative at character '?'
> >     line 1:24 no viable alternative at character '?'
> >     line 1:37 no viable alternative at character '?'
> >
> >
> >     Given the above grammar I would have expected the non-breaking
> >     space (\u00a0) to be ignored.
> >
> >     Is this a bug or user error? If user error, can anyone suggest a
> >     grammar fix?
> >
> >     Regards,
> >
> >     Darach.



From jpen054 at ec.auckland.ac.nz  Mon Feb 18 16:37:55 2008
From: jpen054 at ec.auckland.ac.nz (Jamie Penney)
Date: Tue, 19 Feb 2008 13:37:55 +1300
Subject: [antlr-interest] Empty alternative causes error
In-Reply-To: <"L03CE740D17E04ccb86AC344FCDDE681F.1203374144.scalix.temporal-wave.com*"@MHS>
References: <"L03CE740D17E04ccb86AC344FCDDE681F.1203374144.scalix.temporal-wave.com*"@MHS>
Message-ID: <47BA24E3.5080307@ec.auckland.ac.nz>

You are correct. I am working on an unfinished grammar with Johannes 
Luber. The extra symbols in the rewrite rule are needed by Johannes for 
his project. Any chance you (or anyone else) could have a quick look at 
it and give us some pointers? This is the Java target version, as I was 
having difficulties debugging the C# target version.

Thanks,
Jamie Penney

Jim Idle wrote:
> My educated guess is that you are trying to write a C# parser and 
> falling in to the trap of typing in the language spec too literally. The 
> spec is not a spec for writing a grammar and so it creates ambiguities 
> all over the place. Basically, you just cannot write it by following the 
> language spec like that, you must left factor everything so it is a 
> sensible grammar.
>
> I suspect that what is happening is that when you remove the empty alt, 
> a rule higher up creates the ambiguity. There is a difference between 
> generic declarations and generic invocations and you also need to be 
> able to distinguish between generics and the < operator in some 
> circumstances. 
>
> Finally, you don't need the CLOSE_GENERICS element of the tree you are 
> building.
>
> There are no bugs in this area that I am aware of, I am afraid that you 
> probably need to rethink your grammar.
>
> Jim
>
>
>
>
>   
>> -----Original Message-----
>> From: Jamie Penney [mailto:jpen054 at ec.auckland.ac.nz]
>> Sent: Monday, February 18, 2008 2:05 PM
>> To: antlr-interest at antlr.org
>> Subject: [antlr-interest] Empty alternative causes error
>>
>> Hi All,
>> I have the following rules:
>> type_argument_list_handler
>>     :    (type_argument_list)=> type_argument_list -> ^(OPTIONAL
>> type_argument_list)
>>     |    /*empty*/ -> ^(OPTIONAL)
>>     ;
>>
>> type_argument_list
>>     :    LT type_parameters GT -> ^(OPEN_GENERICS[$LT] type_parameters
>> CLOSE_GENERICS[$GT])
>>     ;
>>
>> If I try to remove the empty alternative, I get warnings about
>> type_argument_list_handler being able to handle LT using multiple
>> alternatives, yet there are no alternatives. If I leave it there, I 
>>     
> get
>   
>> a test for the UP token generated from that rule, yet UP does not
>> exist.
>>
>> I have two possible answers to this problem.
>> 1) The grammar is wrong. Is there another way of specifying empty
>> rules?
>> 2) ANTLR is wrong. I know that Token.UP is really what it is searching
>> for, yet it uses UP instead. Is this possibly a bug?
>>
>> Thanks,
>> Jamie
>>     
>
>
>   

-------------- next part --------------
A non-text attachment was scrubbed...
Name: grammar.zip
Type: application/x-zip-compressed
Size: 32139 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080219/79eb562e/attachment-0001.bin 

From lefevrol at yahoo.com  Mon Feb 18 19:03:33 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Tue, 19 Feb 2008 04:03:33 +0100
Subject: [antlr-interest] Evaluator bailing out early?
Message-ID: <fpdgua$2rk$1@ger.gmane.org>

If in tour/trees/Eval.g (I am referring to the book examples) you comment 
out, say, the part about assignments (central 2 lines of stat rule) and 
then you feed to the evaluator sample input containing an assignment, 
everything after that assignment (including the assignment itself) will be 
ignored or at least it seems so because there is no printout anymore from 
System.out.println($expr.value). I am attaching the grammar for reference.
A sample input would be

20
(+ 22 30)
(- 21 30)
(= a 3)
30
(+ 2 4)

Everything after (= a 3) will be ignored. It looks as if the evaluator is 
bailing out at the first ummatched AST node, which is surprising behaviour: 
I would have expected an error.

-- O.L.

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Eval.g
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20080219/a483f310/attachment.pl 

From brent.yates at gmail.com  Mon Feb 18 20:22:54 2008
From: brent.yates at gmail.com (Brent Yates)
Date: Mon, 18 Feb 2008 23:22:54 -0500
Subject: [antlr-interest] Evaluator bailing out early?
In-Reply-To: <fpdgua$2rk$1@ger.gmane.org>
References: <fpdgua$2rk$1@ger.gmane.org>
Message-ID: <6edc6c380802182022k40ad2cc4wb340de9ca4952756@mail.gmail.com>

I assume that you are testing in ANTLRWorks.  ANTLRWorks calls the
*prog*rule function which consumes tokens until it returns a match or
an error.
In this case it returns a match.  ANTLRWorks ignores any tokens after the
rule function returns (maybe a warning should be added?).  If you add an EOF
to the prog rule you should get an error as the rule will be forced to
handle ALL the tokens for a match to be made.  I often make a special rule,
for example test_rule, where I add the EOF token.  This way I am not
changing my grammar just to make testing easier.

test_rule
    : prog EOF
    ;


Brent Yates
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080218/78756a01/attachment.html 

From lefevrol at yahoo.com  Mon Feb 18 21:09:08 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Tue, 19 Feb 2008 06:09:08 +0100
Subject: [antlr-interest] Evaluator bailing out early?
In-Reply-To: <6edc6c380802182022k40ad2cc4wb340de9ca4952756@mail.gmail.com>
References: <fpdgua$2rk$1@ger.gmane.org>
	<6edc6c380802182022k40ad2cc4wb340de9ca4952756@mail.gmail.com>
Message-ID: <fpdo9q$jba$1@ger.gmane.org>

I was using a test rig, not ANTLRWorks, but yes I was calling prog()

> If you add an EOF to the prog rule you should get an error as the
> rule will be forced to handle ALL the tokens for a match to be made.

I see. That is sorta like bracketing regex strings with '^' and '$' to 
force the entire input string to be matched, correct?

> I often make a special rule, for example test_rule, where I add the EOF token.

Good idea. That works for test rigs, too. Why would you _not_ want to match 
the entire input, though?

Thanks again,

-- O.L.


From oliver.kowalke at gmx.de  Mon Feb 18 21:34:58 2008
From: oliver.kowalke at gmx.de (Oliver Kowalke)
Date: Tue, 19 Feb 2008 06:34:58 +0100
Subject: [antlr-interest] grammar patterns/best practice?
Message-ID: <200802190634.58582.oliver.kowalke@gmx.de>

Hello,
is a collection of patterns used in grammars avaialbe on the INet?
I mean patterns used in order to solve some kind of problems:

...
comparison_op
	:
	EQ | GE | GEQ | IEQ | LE | LEQ | NEQ
	;

factor_op
	:
	STAR | SOLIDUS
	;

term_op
	:
	PLUS | MINUS
	;
...
condition
	: boolean_term ( OR boolean_term )*
;

boolean_term
	: boolean_factor ( AND boolean_factor )*
	;

boolean_factor
	: ( NOT )? predicate
;

predicate
	:
	value comparison_op value
	;

value
	:
	term ( options{ greedy=true; } : term_op term )*
	;

term :
	factor ( options{ greedy=true; } : factor_op factor)*
	;

factor
	:
	( sign ) ? unsigned_value
	;
...

(used for logical and arithmetic operators).
best regards,
Oliver

From antlr at mirality.co.nz  Tue Feb 19 03:07:13 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 20 Feb 2008 00:07:13 +1300
Subject: [antlr-interest] Why cant += be used without an
 "output="	option (and other Q's)
In-Reply-To: <BAYC1-PASMTP11FB9C229BC608E0E27DC6F5220@CEZ.ICE>
References: <BAYC1-PASMTP0539AF89FCFB385F0B3FCFF5270@CEZ.ICE>
	<ebc876d70802151745n6cfbd962ib48f115f4da27b5d@mail.gmail.com>
	<BAYC1-PASMTP0689D7552135AAF308BA82F5270@CEZ.ICE>
	<ebc876d70802162023r2315f7k127ca8d0b34dc5ca@mail.gmail.com>
	<BAYC1-PASMTP03714BA1C0AB40A74E58B9F5200@CEZ.ICE>
	<BAY0-PAMC1-F7wElo7q00012dbd@bay0-pamc1-f7.bay0.hotmail.com>
	<BAYC1-PASMTP05E59F388000FFB75CBF64F5210@CEZ.ICE>
	<BAY0-PAMC1-F1376AKG00015067@bay0-pamc1-f13.bay0.hotmail.com>
	<BAYC1-PASMTP11FB9C229BC608E0E27DC6F5220@CEZ.ICE>
Message-ID: <20080219110728.1286011ED01@www.antlr.org>

At 14:32 19/02/2008, Benjamin Shropshire wrote (off-list):
 >I'm guessing from that statement that something like this would 
be
 >done
 >
 >a returns [MyType c] :
 >        (b {if(c == null) c = new MyType(); c.accumulateB($b); 
})*
 >        (g {if(c == null) c = new MyType(); c.accumulateG($g); 
})*
 >        ;

Well, you could do that, but probably a more common use would be:

a returns [MyType c]
@init { $c = new MyType(); }
   :  (  b { $c.accumulateB($b); }
      |  g { $c.accumulateG($g); }
      )*
   ;

Note: I changed the grammar slightly to permit 'b's and 'g's to be 
intermixed.  If they're strictly ordered then things get even 
simpler than this, since they can be factored out to type-specific 
subrules.  Also this version will return an 'empty' object instead 
of a null when no items are present, but that seems reasonable to 
me.

And BTW: don't forget to hit the Reply All button, not just the 
Reply button.


From alexander at gaengel.de  Tue Feb 19 06:53:30 2008
From: alexander at gaengel.de (=?UTF-8?B?QWxleGFuZGVyIEfDpG5nZWw=?=)
Date: Tue, 19 Feb 2008 15:53:30 +0100
Subject: [antlr-interest] Oh my, code too large
In-Reply-To: <cb0c557b0802040636i1dfb1899ia27a11008a656061@mail.gmail.com>
References: <cb0c557b0802040636i1dfb1899ia27a11008a656061@mail.gmail.com>
Message-ID: <47BAED6A.8090800@gaengel.de>

Is there any solution too this Problem?

I just run into it an now I'm not sure  how I can modify my Grammar to 
get it to work.

Alexander

Fred schrieb:
> I have recently run into this (previously posted) problem and was
> wondering what the status was?
> There is a slight difference though, the error is found in a tree
> grammar rather than a lexer.
>
> "The problem is real.
> Java effectively limits you to 65KBytes per method of byte-code.
> The source of the limit is the definition of  the class files.
> A class file includes, for each method, a table of  exception handlers,
> and each of the entries in these tables includes the address
> (in bytes relative to the beginning of the method) of the
> beginning and end of the try-block, stored as two 16-bit integers.
> There is no way around this.
> I hope that there are people out there  who can make suggestions as to
> how to modify your lexer to generate
> less code."
> Peace
> - John
>
>
> On Dec 13, 2007, at 2:51 PM, Andreas Ravnestad wrote:
>
>   
>> On 12/13/07, Andreas Ravnestad <andreas.ravnestad at gmail.com> wrote:
>>     
>>> Sometimes ANTLR generates a lexer which will make javac choke on
>>> itself with a message resembling this:
>>>
>>>  code too large
>>>     public int specialStateTransition(int s, IntStream input)throws
>>>       
> NoViableAltException {
>
>   
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080219/f57ba43a/attachment.html 

From dejas9000 at gmail.com  Tue Feb 19 09:27:57 2008
From: dejas9000 at gmail.com (Dejas Ninethousand)
Date: Tue, 19 Feb 2008 11:27:57 -0600
Subject: [antlr-interest] Building Treenodes from Kleene Closure
Message-ID: <38a26f430802190927m4c6f433bxa3ab9d8176150d36@mail.gmail.com>

If I have the grammar:


expression_list
    :
expression (EXPRESSION_LIST_SEPARATOR expression)* -> EXPRESSION_LIST
;

Is there anyway to build the AST such that *n *EXPRESSION_LIST_SEPARATOR
nodes actually appear the number of times the separator appears in the
input?  If so, how would I express that on the right hand side of the arrow?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080219/b8f4bcae/attachment.html 

From carter_cheng at yahoo.com  Tue Feb 19 09:29:09 2008
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Tue, 19 Feb 2008 09:29:09 -0800 (PST)
Subject: [antlr-interest] generating runtime error messages with ANTLR
In-Reply-To: <f0fcc6820802180808v7cf8d7d0o2d88b0c51499fb56@mail.gmail.com>
Message-ID: <246406.46823.qm@web50110.mail.re2.yahoo.com>

Thanks for this.

Regards,

Carter.
--- Mark Volkmann <r.mark.volkmann at gmail.com> wrote:

> On Feb 17, 2008 8:37 AM, Carter Cheng
> <carter_cheng at yahoo.com> wrote:
> > Hi everyone,
> >
> > I have been trying to build a compiler using ANTLR
> > 3.0.1 to handle most of the frontend work. I am
> > curious if there is a canonical method for passing
> > line count, character position information
> downstream
> > to other phases of the compiler which can be then
> used
> > for error reporting either in the type check phase
> > after the AST is constructed or at runtime.
> >
> > Is there some canonical method for capturing this
> > information in the AST which can then be used to
> > generate error reports?
> 
> The default AST tree node class CommonTree has
> methods to get that
> information. The getLine method works as expected,
> but it seems that
> getCharPositionWithinLine always returns zero. Is
> that a known bug?
> 
> -- 
> R. Mark Volkmann
> Object Computing, Inc.
> 



      ____________________________________________________________________________________
Looking for last minute shopping deals?  
Find them fast with Yahoo! Search.  http://tools.search.yahoo.com/newsearch/category.php?category=shopping

From antlr at shmuelhome.mine.nu  Tue Feb 19 09:37:16 2008
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Tue, 19 Feb 2008 19:37:16 +0200
Subject: [antlr-interest] Building Treenodes from Kleene Closure
In-Reply-To: <38a26f430802190927m4c6f433bxa3ab9d8176150d36@mail.gmail.com>
References: <38a26f430802190927m4c6f433bxa3ab9d8176150d36@mail.gmail.com>
Message-ID: <47BB13CC.3080104@shmuelhome.mine.nu>

Dejas Ninethousand wrote:
> If I have the grammar:
>
>    
> expression_list
>     :
> expression (EXPRESSION_LIST_SEPARATOR expression)* -> EXPRESSION_LIST
> ;
>
> Is there anyway to build the AST such that /n 
> /EXPRESSION_LIST_SEPARATOR nodes actually appear the number of times 
> the separator appears in the input?  If so, how would I express that 
> on the right hand side of the arrow?
>
>
Am I not undertstanding your question? Will this do?

expression_list
    :
e+=expression (EXPRESSION_LIST_SEPARATOR e+=expression)* -> 
^(EXPRESSION_LIST $e+)
;


From dejas9000 at gmail.com  Tue Feb 19 10:07:05 2008
From: dejas9000 at gmail.com (Dejas Ninethousand)
Date: Tue, 19 Feb 2008 12:07:05 -0600
Subject: [antlr-interest] Building Treenodes from Kleene Closure
In-Reply-To: <47BB13CC.3080104@shmuelhome.mine.nu>
References: <38a26f430802190927m4c6f433bxa3ab9d8176150d36@mail.gmail.com>
	<47BB13CC.3080104@shmuelhome.mine.nu>
Message-ID: <38a26f430802191007y7f760036p488cfaf014ed1e9@mail.gmail.com>

I think that's moving in the right direction, except I want the seperators
and not the expression.  I tried:

expression (e+=EXPRESSION_LIST_SEPARATOR expression)* -> $e+ EXPRESSION_LIST

which works fine unless there are 0 occurences of EXPRESSION_LIST_SEPARATOR
expression in which case the parser throws an early exit exception.  Is
there a way to exclude the $e+ if the number of occurrences is zero?

I tried:

expression_list
    :
    expression -> EXPRESSION_LIST
    |
    expression (e+=EXPRESSION_LIST_SEPARATOR expression)+ -> $e+
EXPRESSION_LIST

but ANTLER complains about introduction of left recursion (which I don't
see).



On Feb 19, 2008 11:37 AM, shmuel siegel <antlr at shmuelhome.mine.nu> wrote:

> Dejas Ninethousand wrote:
> > If I have the grammar:
> >
> >
> > expression_list
> >     :
> > expression (EXPRESSION_LIST_SEPARATOR expression)* -> EXPRESSION_LIST
> > ;
> >
> > Is there anyway to build the AST such that /n
> > /EXPRESSION_LIST_SEPARATOR nodes actually appear the number of times
> > the separator appears in the input?  If so, how would I express that
> > on the right hand side of the arrow?
> >
> >
> Am I not undertstanding your question? Will this do?
>
> expression_list
>    :
> e+=expression (EXPRESSION_LIST_SEPARATOR e+=expression)* ->
> ^(EXPRESSION_LIST $e+)
> ;
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080219/013e82ed/attachment-0001.html 

From jimi at temporal-wave.com  Tue Feb 19 09:55:14 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 19 Feb 2008 09:55:14 -0800
Subject: [antlr-interest] Oh my, code too large
In-Reply-To: <47BAED6A.8090800@gaengel.de>
Message-ID: <"LB20AF3DBA82A42b89156E5022130CCB6.1203443725.scalix.temporal-wave.com*"@MHS>

IN 3.1 (coming soon now), you can take out parts of your grammar into
separate files, then use the import function to import say
?xyzexpressions? into your root grammar. You can use a snapshot of ANTLR
3.1 as it will be released quite soon. The imported grammars all occupy
their own class and so the issue goes away.

 

Jim

 

 

 

From: Alexander G?ngel [mailto:alexander at gaengel.de] 
Sent: Tuesday, February 19, 2008 6:54 AM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Oh my, code too large

 

Is there any solution too this Problem?

I just run into it an now I'm not sure  how I can modify my Grammar to
get it to work.

Alexander

Fred schrieb: 

I have recently run into this (previously posted) problem and was
wondering what the status was?
There is a slight difference though, the error is found in a tree
grammar rather than a lexer.
 
"The problem is real.
Java effectively limits you to 65KBytes per method of byte-code.
The source of the limit is the definition of  the class files.
A class file includes, for each method, a table of  exception handlers,
and each of the entries in these tables includes the address
(in bytes relative to the beginning of the method) of the
beginning and end of the try-block, stored as two 16-bit integers.
There is no way around this.
I hope that there are people out there  who can make suggestions as to
how to modify your lexer to generate
less code."
Peace
- John
 
 
On Dec 13, 2007, at 2:51 PM, Andreas Ravnestad wrote:
 
  

   On 12/13/07, Andreas Ravnestad <andreas.ravnestad at gmail.com>
   wrote:
       

      Sometimes ANTLR generates a lexer which will make javac choke on
      itself with a message resembling this:
       
       code too large
          public int specialStateTransition(int s, IntStream
      input)throws
            

NoViableAltException {
 
  

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080219/b1133f57/attachment.html 

From shro8822 at vandals.uidaho.edu  Tue Feb 19 10:24:55 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Tue, 19 Feb 2008 10:24:55 -0800
Subject: [antlr-interest] Why cant += be used without an "output="
 option (and other Q's)
In-Reply-To: <BAY0-PAMC1-F2QY2BPZ0001d999@bay0-pamc1-f2.bay0.hotmail.com>
References: <BAYC1-PASMTP0539AF89FCFB385F0B3FCFF5270@CEZ.ICE>
	<ebc876d70802151745n6cfbd962ib48f115f4da27b5d@mail.gmail.com>
	<BAYC1-PASMTP0689D7552135AAF308BA82F5270@CEZ.ICE>
	<ebc876d70802162023r2315f7k127ca8d0b34dc5ca@mail.gmail.com>
	<BAYC1-PASMTP03714BA1C0AB40A74E58B9F5200@CEZ.ICE>
	<BAY0-PAMC1-F7wElo7q00012dbd@bay0-pamc1-f7.bay0.hotmail.com>
	<BAYC1-PASMTP05E59F388000FFB75CBF64F5210@CEZ.ICE>
	<BAY0-PAMC1-F1376AKG00015067@bay0-pamc1-f13.bay0.hotmail.com>
	<BAYC1-PASMTP11FB9C229BC608E0E27DC6F5220@CEZ.ICE>
	<BAY0-PAMC1-F2QY2BPZ0001d999@bay0-pamc1-f2.bay0.hotmail.com>
Message-ID: <47BB1EF7.50304@vandals.uidaho.edu>

Gavin Lambert wrote:

> At 14:32 19/02/2008, Benjamin Shropshire wrote (off-list):
> >I'm guessing from that statement that something like this would be
> >done
> >
> >a returns [MyType c] :
> >        (b {if(c == null) c = new MyType(); c.accumulateB($b); })*
> >        (g {if(c == null) c = new MyType(); c.accumulateG($g); })*
> >        ;
>
> Well, you could do that, but probably a more common use would be:
>
> a returns [MyType c]
> @init { $c = new MyType(); }
>   :  (  b { $c.accumulateB($b); }
>      |  g { $c.accumulateG($g); }
>      )*
>   ;
>
> Note: I changed the grammar slightly to permit 'b's and 'g's to be 
> intermixed.  If they're strictly ordered then things get even simpler 
> than this, since they can be factored out to type-specific subrules.

I'm not following that? Would that be something like adding "bs : b*;  
gs : g*; "? I'm not seeing the advantage of that. (It will most likely 
hit me here about 10 min after hitting send)

> And BTW: don't forget to hit the Reply All button, not just the Reply 
> button.
>
oops.


From antlr at mirality.co.nz  Tue Feb 19 10:40:34 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 20 Feb 2008 07:40:34 +1300
Subject: [antlr-interest] Building Treenodes from Kleene Closure
In-Reply-To: <38a26f430802191007y7f760036p488cfaf014ed1e9@mail.gmail.com
 >
References: <38a26f430802190927m4c6f433bxa3ab9d8176150d36@mail.gmail.com>
	<47BB13CC.3080104@shmuelhome.mine.nu>
	<38a26f430802191007y7f760036p488cfaf014ed1e9@mail.gmail.com>
Message-ID: <20080219184056.4D98911ED50@www.antlr.org>

At 07:07 20/02/2008, Dejas Ninethousand wrote:
>I think that's moving in the right direction, except I want the 
>seperators and not the expression.  I tried:
>
>expression (e+=EXPRESSION_LIST_SEPARATOR expression)* -> $e+ 
>EXPRESSION_LIST
>
>which works fine unless there are 0 occurences of 
>EXPRESSION_LIST_SEPARATOR expression in which case the parser 
>throws an early exit exception.  Is there a way to exclude the 
>$e+ if the number of occurrences is zero?

Yeah: $e*. :)

>I tried:
>
>expression_list
>     :
>     expression -> EXPRESSION_LIST
>     |
>     expression (e+=EXPRESSION_LIST_SEPARATOR expression)+ -> $e+ 
> EXPRESSION_LIST
>
>but ANTLER complains about introduction of left recursion (which 
>I don't see).

Can 'expression' include 'expression_list'?

But anyway, what you do have there is common left prefixes in 
alts, which isn't a good idea.  Try this instead:

expression_list
   :  expression -> EXPRESSION_LIST
      ( (e+=EXPRESSION_LIST_SEPARATOR expression)+ -> 
^(EXPRESSION_LIST $e+) )?
   ;

But it's a bit strange that you're throwing away all the actual 
expressions.


From antlr at mirality.co.nz  Tue Feb 19 10:42:42 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 20 Feb 2008 07:42:42 +1300
Subject: [antlr-interest] Why cant += be used without an "output="
 option (and other Q's)
In-Reply-To: <47BB1EF7.50304@vandals.uidaho.edu>
References: <BAYC1-PASMTP0539AF89FCFB385F0B3FCFF5270@CEZ.ICE>
	<ebc876d70802151745n6cfbd962ib48f115f4da27b5d@mail.gmail.com>
	<BAYC1-PASMTP0689D7552135AAF308BA82F5270@CEZ.ICE>
	<ebc876d70802162023r2315f7k127ca8d0b34dc5ca@mail.gmail.com>
	<BAYC1-PASMTP03714BA1C0AB40A74E58B9F5200@CEZ.ICE>
	<BAY0-PAMC1-F7wElo7q00012dbd@bay0-pamc1-f7.bay0.hotmail.com>
	<BAYC1-PASMTP05E59F388000FFB75CBF64F5210@CEZ.ICE>
	<BAY0-PAMC1-F1376AKG00015067@bay0-pamc1-f13.bay0.hotmail.com>
	<BAYC1-PASMTP11FB9C229BC608E0E27DC6F5220@CEZ.ICE>
	<BAY0-PAMC1-F2QY2BPZ0001d999@bay0-pamc1-f2.bay0.hotmail.com>
	<47BB1EF7.50304@vandals.uidaho.edu>
Message-ID: <20080219184256.811E711ED83@www.antlr.org>

At 07:24 20/02/2008, Benjamin Shropshire wrote:
 >I'm not following that? Would that be something like adding "bs 
:
 >b*;  gs : g*; "? I'm not seeing the advantage of that. (It will
 >most likely hit me here about 10 min after hitting send)

Well, I guess there isn't really any direct advantage.  I just 
think it's a bit tidier to separate them :)


From carter_cheng at yahoo.com  Tue Feb 19 11:30:23 2008
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Tue, 19 Feb 2008 11:30:23 -0800 (PST)
Subject: [antlr-interest] compile error from ANTLR generated Parser.java
	with AST's
Message-ID: <914074.3322.qm@web50106.mail.re2.yahoo.com>

Hello everyone,

I was wondering if I could get some help diagnosing an
error which I dont quite understand. I attempted to
generate a grammar file using both the most current
beta and ANTLR 3.0.1 and I am getting the following
error-

Thanks in advance,

Carter.

LPCParser.java:10381: cannot find symbol
symbol  : variable UP
location: class LPCParser
                    else if (
(LA70_0==EOF||LA70_0==UP||LA70_0==Identifier||(LA70_0>=74
&& LA70_0<=76)||LA70_0==78||LA70_0==80||(LA70_0>=83 &&
LA70_0<=85)||(LA70_0>=98 && LA70_0<=99)||(LA70_0>=101
&& LA70_0<=129)||(LA70_0>=132 && LA70_0<=134)) ) {
                                                    ^
LPCParser.java:10747: cannot find symbol
symbol  : variable UP
location: class LPCParser
                else if (
(LA79_2==EOF||LA79_2==UP||LA79_2==Identifier||(LA79_2>=74
&& LA79_2<=76)||LA79_2==78||LA79_2==80||(LA79_2>=83 &&
LA79_2<=85)||(LA79_2>=98 && LA79_2<=99)||(LA79_2>=101
&& LA79_2<=129)||(LA79_2>=132 && LA79_2<=134)) ) {





      ____________________________________________________________________________________
Never miss a thing.  Make Yahoo your home page. 
http://www.yahoo.com/r/hs

From darien.hager at etelos-inc.com  Tue Feb 19 11:34:05 2008
From: darien.hager at etelos-inc.com (Darien Hager)
Date: Tue, 19 Feb 2008 11:34:05 -0800
Subject: [antlr-interest] Reading from sys.stdin with ANTLR-Python (for
	an REPL)
In-Reply-To: <fpcngl$icr$1@ger.gmane.org>
References: <d4f450350802172152r21978a74l6f1b824e784b9032@mail.gmail.com>
	<fpcngl$icr$1@ger.gmane.org>
Message-ID: <c8c997f40802191134k72c62e9arf1bd4ea477623e21@mail.gmail.com>

On 2/18/08, Benjamin Niemann <pink at odahoda.de> wrote:
>
> 
> ANTLR out of the box is not really suited for such incremential parsing -
> that's not a Python specific issue. Building an incremential TokenStream
> is
> not a big deal - I have the code already, and I'm planning for a long time
> now to clean it up and add it to the Python runtime... But the logic to
> detect when a statement is complete resides in the parser and I don't know
> a solution for that problem...
>

I think there was some talk a while back about incremental parsing in ANLTR,
but I'm not sure what came of it. It would be pretty cool to use it for
things like syntax-highlighting tools, etc.


On 2/17/08, *Aaron Lebo* <aaron.m.lebo at gmail.com> wrote:
> So I'm having no issue with that. What I am wanting to do is an REPL and I
need to interactively parse the data coming from sys.stdin.
> The problem is that all of the 'Stream' classes from the antlr3 package
read all input on creation, so passing sys.stdin or sys.stdin.read()
> causes the REPL to hang, as something like antlr3.ANTLRInputStream(
sys.stdin) reads infinitely.





I dabbled with parsing input data incrementally a little while back with a
simple grammar. Just an outline for what sorta-kinda-might-have worked (Java
runtime)

A) Define a parser rule to match one single statement, when expecting a
series.
B) Define "junk" tokens for things like unterminated quoted strings, invalid
token fragments terminated by EOF, etc.
C) Subclass the parser/lexer to disable automatic recovery and to generally
throw exceptions more readily.
D) Have an inner and outer loop.
E) The outer loop makes a new token stream starting with any leftovers
from the last token stream. IT then appending the incoming data.
F) The inner loop tries uses the parser and token stream to match as many
statements as it can, marking it's progress in the stream each time. When it
fails (parser exception), it breaks out of the loop.

-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are not
the intended recipient, then this is notice that any use, disclosure,
dissemination, distribution or copying is strictly prohibited. If you have
received this message in error please contact the sender by reply mail and
destroy all copies of the original message.0
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080219/a1a06cf7/attachment-0001.html 

From spoulson3 at yahoo.com  Tue Feb 19 12:17:39 2008
From: spoulson3 at yahoo.com (Shawn Poulson)
Date: Tue, 19 Feb 2008 12:17:39 -0800 (PST)
Subject: [antlr-interest] Understanding Lexer rules
Message-ID: <307403.83169.qm@web30605.mail.mud.yahoo.com>

I've come to a bit of a misunderstanding of how the lexer rules work in
ANTLR.  If I were to create a simple rule to capture whole numbers:

UINT: ('0'..'9')+;

I find that anywhere I use a number in a rule is invalid because UINT
already scooped up any possible numbers as a UINT.  This causes
problems when I want to scan or parse, say, a single digit somewhere in
a parser rule.

This also becomes a problem if I wanted to make a lexer rule such as:
ALPHA: ('a'..'z'|'A'..'Z')+;

This sets a precident that any alphas are scanned off before parsers
can do anything with it.  This is bad when you want, say, just 'T' and
not ALPHA in your parser rule.

Am I using the lexer improperly?  Is there a better way to use these
rules?

Thanks.

---
Shawn Poulson
spoulson at explodingcoder.com

From jpen054 at ec.auckland.ac.nz  Tue Feb 19 12:20:03 2008
From: jpen054 at ec.auckland.ac.nz (Jamie Penney)
Date: Wed, 20 Feb 2008 09:20:03 +1300
Subject: [antlr-interest] compile error from ANTLR generated Parser.java
 with AST's
Message-ID: <47BB39F3.20506@ec.auckland.ac.nz>

I am also having this error. It is related to an empty rule alternative 
somewhere in your grammar. You can change UP to Token.UP and it will 
compile fine.

Jamie

Carter Cheng wrote:
> Hello everyone,
>
> I was wondering if I could get some help diagnosing an
> error which I dont quite understand. I attempted to
> generate a grammar file using both the most current
> beta and ANTLR 3.0.1 and I am getting the following
> error-
>
> Thanks in advance,
>
> Carter.
>
> LPCParser.java:10381: cannot find symbol
> symbol  : variable UP
> location: class LPCParser
>                     else if (
> (LA70_0==EOF||LA70_0==UP||LA70_0==Identifier||(LA70_0>=74
> && LA70_0<=76)||LA70_0==78||LA70_0==80||(LA70_0>=83 &&
> LA70_0<=85)||(LA70_0>=98 && LA70_0<=99)||(LA70_0>=101
> && LA70_0<=129)||(LA70_0>=132 && LA70_0<=134)) ) {
>                                                     ^
> LPCParser.java:10747: cannot find symbol
> symbol  : variable UP
> location: class LPCParser
>                 else if (
> (LA79_2==EOF||LA79_2==UP||LA79_2==Identifier||(LA79_2>=74
> && LA79_2<=76)||LA79_2==78||LA79_2==80||(LA79_2>=83 &&
> LA79_2<=85)||(LA79_2>=98 && LA79_2<=99)||(LA79_2>=101
> && LA79_2<=129)||(LA79_2>=132 && LA79_2<=134)) ) {
>
>
>
>
>
>       ____________________________________________________________________________________
> Never miss a thing.  Make Yahoo your home page. 
> http://www.yahoo.com/r/hs
>   




From darien.hager at etelos-inc.com  Tue Feb 19 12:44:07 2008
From: darien.hager at etelos-inc.com (Darien Hager)
Date: Tue, 19 Feb 2008 12:44:07 -0800
Subject: [antlr-interest] Understanding Lexer rules
In-Reply-To: <307403.83169.qm@web30605.mail.mud.yahoo.com>
References: <307403.83169.qm@web30605.mail.mud.yahoo.com>
Message-ID: <c8c997f40802191244o330c0245v4175eb987fb60ec6@mail.gmail.com>

Ooops, meant to send to
list, since any confirmation or correction is appreciated. Re-sending:

_______
I was thinking about this earlier today... I probably have some incorrect
assumptions in here, but my current theories:

1) It helps to consider lexer rules (token definitions) to be separate from
the parser rules, even though they're in the same file.
2) Unlike parser rules, the order of appearance matters. (The auto-named
tokens generated by literals in parser rules are appended.)
3) The lexer seeks to match the first viable token.
4) Order your tokens from most specific and complex to least specific and
generic.
5) Ensure that any lexer rules which are only for convenience (and not as
fully valid first-class tokenson their own) are marked "fragmentary".

Bear in mind, these are things I haven't rigorously tested and I'm not an
ANTLR guru.

So, for example, I'd put NUMERIC (the specific case) before ALPHANUMERIC in
the lexer rules.

-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are not
the intended recipient, then this is notice that any use, disclosure,
dissemination, distribution or copying is strictly prohibited. If you have
received this message in error please contact the sender by reply mail and
destroy all copies of the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080219/fc14e82e/attachment.html 

From darach at gmail.com  Tue Feb 19 13:00:59 2008
From: darach at gmail.com (Darach Ennis)
Date: Tue, 19 Feb 2008 21:00:59 +0000
Subject: [antlr-interest] Conditional AST tree construction with custom
	TreeAdaptor?
Message-ID: <4d596d820802191300l54afd414vd3d8588f8cf989fb@mail.gmail.com>

Hi guys,

I've hacked up a variant of TreeAdaptor which allows me to conditionally
'grow' ASTs.
This has turned out to be pretty effective for writing my preprocessor but
with a few
caveats, one in particular:

When in 'skipping' mode, I obviously want to be able to create tokens and
pass them
on to the parser but I don't want all of them, necessarily in my resultant
tree...
so my create looks a little like as follows:

    public Object create(Token arg0) {
        if (isProcessing()) {
            return base.create(arg0);
        }
        return arg0;
    }

However, although the tree being constructed and toStringTree() are correct
all of the created
tokens (even those logically being skipped) are present in the resultant
tree. This isn't so bad
as I can filter out those tokens through setting them on a 'SKIP' channel
with a small change to
my create(...) method, as follows:

    public Object create(Token arg0) {
        if (isProcessing()) {
            return base.create(arg0);
        }
        arg0.setChannel(666);
        return arg0;
    }

This works fairly well but some tokens seem to miss their queue and their
channels are thus
set inappropriately. Is there a better point in the construction of the tree
(eg: addChild) or consuming
of the token stream where the channel can be set more effectively?

My current workaround is to resort to the following sledgehammer action:

{ someToken.setChannel(666); }

This is effective at keeping the token range for a given tree consistent
with intent but litters
the grammar with a few setChannel calls which I'd like to remove. Perhaps I
should be
subclassing/customizing CommonTree also? Has anyone on the list modified
TreeAdaptor
successfully to take on extra duties for specific grammars such as this?

Regards,

Darach.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080219/b48cc363/attachment.html 

From alexander at gaengel.de  Tue Feb 19 14:09:41 2008
From: alexander at gaengel.de (=?UTF-8?B?QWxleGFuZGVyIEfDpG5nZWw=?=)
Date: Tue, 19 Feb 2008 23:09:41 +0100
Subject: [antlr-interest] Oh my, code too large
In-Reply-To: <"LB20AF3DBA82A42b89156E5022130CCB6.1203443725.scalix.temporal-wave.com*"@MHS>
References: <"LB20AF3DBA82A42b89156E5022130CCB6.1203443725.scalix.temporal-wave.com*"@MHS>
Message-ID: <47BB53A5.1090002@gaengel.de>

Thank you these are good news.

But I have modified my Grammar so for now it works again, hopefully till 
3.1 comes out.

Alexander

Jim Idle schrieb:
>
> IN 3.1 (coming soon now), you can take out parts of your grammar into 
> separate files, then use the import function to import say 
> ?xyzexpressions? into your root grammar. You can use a snapshot of 
> ANTLR 3.1 as it will be released quite soon. The imported grammars all 
> occupy their own class and so the issue goes away.
>
>  
>
> Jim
>
>  
>
>  
>
>  
>
> *From:* Alexander G?ngel [mailto:alexander at gaengel.de]
> *Sent:* Tuesday, February 19, 2008 6:54 AM
> *To:* antlr-interest at antlr.org
> *Subject:* Re: [antlr-interest] Oh my, code too large
>
>  
>
> Is there any solution too this Problem?
>
> I just run into it an now I'm not sure  how I can modify my Grammar to 
> get it to work.
>
> Alexander
>
> Fred schrieb:
>
> I have recently run into this (previously posted) problem and was
>   
> wondering what the status was?
>   
> There is a slight difference though, the error is found in a tree
>   
> grammar rather than a lexer.
>   
>  
>   
> "The problem is real.
>   
> Java effectively limits you to 65KBytes per method of byte-code.
>   
> The source of the limit is the definition of  the class files.
>   
> A class file includes, for each method, a table of  exception handlers,
>   
> and each of the entries in these tables includes the address
>   
> (in bytes relative to the beginning of the method) of the
>   
> beginning and end of the try-block, stored as two 16-bit integers.
>   
> There is no way around this.
>   
> I hope that there are people out there  who can make suggestions as to
>   
> how to modify your lexer to generate
>   
> less code."
>   
> Peace
>   
> - John
>   
>  
>   
>  
>   
> On Dec 13, 2007, at 2:51 PM, Andreas Ravnestad wrote:
>   
>  
>   
>   
>   
>
>     On 12/13/07, Andreas Ravnestad <andreas.ravnestad at gmail.com> wrote:
>         
>
>         
>         
>
>         Sometimes ANTLR generates a lexer which will make javac choke on
>               
>
>         itself with a message resembling this:
>               
>
>          
>               
>
>          code too large
>               
>
>             public int specialStateTransition(int s, IntStream input)throws
>               
>
>               
>               
>
> NoViableAltException {
>   
>  
>   
>   
>   
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080219/54fcceaf/attachment.html 

From ad_cooney at hotmail.com  Tue Feb 19 14:12:03 2008
From: ad_cooney at hotmail.com (Adam Cooney)
Date: Tue, 19 Feb 2008 22:12:03 +0000
Subject: [antlr-interest] Java AST Grammar
In-Reply-To: <D2866F35-D1BB-4C25-9227-D32EFB4EBEED@jacelridge.com>
References: <BLU124-W377786AF163CAC13E783AC842B0@phx.gbl>
	<D2866F35-D1BB-4C25-9227-D32EFB4EBEED@jacelridge.com>
Message-ID: <BLU124-W20E1DA9084AC8AE70D020484220@phx.gbl>


Hi John, I've been having some trouble running your grammar. I keep getting the following error:
 
C:\antlr-3.0b7\lib\Java\eg\ast>java org.antlr.Tool JavaAST.gANTLR Parser Generator  Version 3.0b7 (April 12, 2007)  1989-2007error(100): JavaAST.g:709:53: syntax error: antlr: JavaAST.g:709:53: unexpectedtoken: ?error(100): JavaAST.g:710:61: syntax error: antlr: JavaAST.g:710:61: unexpectedtoken: ?error(100): JavaAST.g:711:51: syntax error: antlr: JavaAST.g:711:51: unexpectedtoken: ?error(100): JavaAST.g:712:58: syntax error: antlr: JavaAST.g:712:58: unexpectedtoken: ?error(100): JavaAST.g:0:0: syntax error: assign.types: <AST>:0:0: unexpected end of subtreeerror(10):  internal error: JavaAST.g : java.lang.ClassCastException: antlr.ASTNULLType cannot be cast to org.antlr.tool.GrammarASTorg.antlr.tool.AssignTokenTypesWalker.block(AssignTokenTypesWalker.java:1215)org.antlr.tool.AssignTokenTypesWalker.rule(AssignTokenTypesWalker.java:1030)org.antlr.tool.AssignTokenTypesWalker.rules(AssignTokenTypesWalker.java:610)org.antlr.tool.AssignTokenTypesWalker.grammarSpec(AssignTokenTypesWalker.java:492)org.antlr.tool.AssignTokenTypesWalker.grammar(AssignTokenTypesWalker.java:363)org.antlr.tool.Grammar.setGrammarContent(Grammar.java:539)org.antlr.tool.Grammar.<init>(Grammar.java:448)org.antlr.Tool.getGrammar(Tool.java:331)org.antlr.Tool.process(Tool.java:267)org.antlr.Tool.main(Tool.java:70)
 
Any idea what could be causing it? I'm pretty new to ANTLR, but the stringtemplate and antlr JARs are in the classpath, and I ran the example treeparsers fine. Could it be due to using antlr-3.0b7 rather than antlr-3.0.1? I was using 3.0.1 but after installing it and resetting the classpaths for some reason i got a Java classloader error even after restarting the computer, and so I just reverted back to this one.


CC: john at jacelridge.com; antlr-interest at antlr.orgFrom: john at jacelridge.comTo: ad_cooney at hotmail.comSubject: Re: [antlr-interest] Java AST GrammarDate: Tue, 12 Feb 2008 17:41:05 -0500I have been working on a Java grammar that produces an AST; and a companion tree grammar that produces equivalent Java code from an AST.  This is still a work-in-progress, but you're welcome to what I have. 

Please let me know if you run into any problems with this, as I'm trying to make it work nicely.

Peace
- John



_________________________________________________________________
Free games, great prizes - get gaming at Gamesbox. 
http://www.searchgamesbox.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080219/4356431e/attachment-0001.html 

From parrt at cs.usfca.edu  Tue Feb 19 14:14:37 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 19 Feb 2008 14:14:37 -0800
Subject: [antlr-interest] Java AST Grammar
In-Reply-To: <BLU124-W20E1DA9084AC8AE70D020484220@phx.gbl>
References: <BLU124-W377786AF163CAC13E783AC842B0@phx.gbl>
	<D2866F35-D1BB-4C25-9227-D32EFB4EBEED@jacelridge.com>
	<BLU124-W20E1DA9084AC8AE70D020484220@phx.gbl>
Message-ID: <EE1198D7-F943-45B8-A832-C694BD22106F@cs.usfca.edu>

  Hi Adam.  Almost certainly this is a 3.0b7 issue. please grab 3.0.1  
and try to make it work.
Ter
On Feb 19, 2008, at 2:12 PM, Adam Cooney wrote:

> Hi John, I've been having some trouble running your grammar. I keep  
> getting the following error:
>
> C:\antlr-3.0b7\lib\Java\eg\ast>java org.antlr.Tool JavaAST.g
> ANTLR Parser Generator  Version 3.0b7 (April 12, 2007)  1989-2007
> error(100): JavaAST.g:709:53: syntax error: antlr: JavaAST.g:709:53:  
> unexpected
> token: ?
> error(100): JavaAST.g:710:61: syntax error: antlr: JavaAST.g:710:61:  
> unexpected
> token: ?
> error(100): JavaAST.g:711:51: syntax error: antlr: JavaAST.g:711:51:  
> unexpected
> token: ?
> error(100): JavaAST.g:712:58: syntax error: antlr: JavaAST.g:712:58:  
> unexpected
> token: ?
> error(100): JavaAST.g:0:0: syntax error: assign.types: <AST>:0:0:  
> unexpected end
>  of subtree
> error(10):  internal error: JavaAST.g :  
> java.lang.ClassCastException: antlr.ASTN
> ULLType cannot be cast to org.antlr.tool.GrammarAST
> org 
> .antlr.tool.AssignTokenTypesWalker.block(AssignTokenTypesWalker.java: 
> 1215)
> org 
> .antlr.tool.AssignTokenTypesWalker.rule(AssignTokenTypesWalker.java: 
> 1030)
> org 
> .antlr.tool.AssignTokenTypesWalker.rules(AssignTokenTypesWalker.java: 
> 610)
> org 
> .antlr 
> .tool.AssignTokenTypesWalker.grammarSpec(AssignTokenTypesWalker.java: 
> 49
> 2)
> org 
> .antlr 
> .tool.AssignTokenTypesWalker.grammar(AssignTokenTypesWalker.java:363)
> org.antlr.tool.Grammar.setGrammarContent(Grammar.java:539)
> org.antlr.tool.Grammar.<init>(Grammar.java:448)
> org.antlr.Tool.getGrammar(Tool.java:331)
> org.antlr.Tool.process(Tool.java:267)
> org.antlr.Tool.main(Tool.java:70)
>
> Any idea what could be causing it? I'm pretty new to ANTLR, but the  
> stringtemplate and antlr JARs are in the classpath, and I ran the  
> example treeparsers fine. Could it be due to using antlr-3.0b7  
> rather than antlr-3.0.1? I was using 3.0.1 but after installing it  
> and resetting the classpaths for some reason i got a Java  
> classloader error even after restarting the computer, and so I just  
> reverted back to this one.
>
>
> CC: john at jacelridge.com; antlr-interest at antlr.org
> From: john at jacelridge.com
> To: ad_cooney at hotmail.com
> Subject: Re: [antlr-interest] Java AST Grammar
> Date: Tue, 12 Feb 2008 17:41:05 -0500
>
> I have been working on a Java grammar that produces an AST; and a  
> companion tree grammar that produces equivalent Java code from an  
> AST.  This is still a work-in-progress, but you're welcome to what I  
> have.
>
> Please let me know if you run into any problems with this, as I'm  
> trying to make it work nicely.
>
> Peace
> - John
>
>
> She said what? About who? Shameful celebrity quotes on Search Star!

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080219/1191ec6e/attachment.html 

From ae.armstrong at gmail.com  Tue Feb 19 14:23:45 2008
From: ae.armstrong at gmail.com (Aaron Armstrong)
Date: Tue, 19 Feb 2008 14:23:45 -0800
Subject: [antlr-interest] NullPointerException in
	org.antlr.runtime.BaseRecognizer.memoize
Message-ID: <5a086d5a0802191423s5e809a00ud7013559ddfabedf@mail.gmail.com>

I took the supplied java grammar and tried to make a parse tree out of a
very small program.  I used ANTLRWorks with the ?debug flag to generate the
parser and lexer code.  When I ran my test code, I got a
NullPointerException:

Exception in thread "main" java.lang.NullPointerException
            at org.antlr.runtime.BaseRecognizer.memoize(BaseRecognizer.java
:741)
            at JavaParser.compilationUnit(JavaParser.java:367)
            cont'd?

Has this been encountered before by anyone?  Thanks in advance.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080219/5f54cbf9/attachment.html 

From ad_cooney at hotmail.com  Tue Feb 19 15:08:32 2008
From: ad_cooney at hotmail.com (Adam Cooney)
Date: Tue, 19 Feb 2008 23:08:32 +0000
Subject: [antlr-interest] Java AST Grammar
In-Reply-To: <EE1198D7-F943-45B8-A832-C694BD22106F@cs.usfca.edu>
References: <BLU124-W377786AF163CAC13E783AC842B0@phx.gbl>
	<D2866F35-D1BB-4C25-9227-D32EFB4EBEED@jacelridge.com>
	<BLU124-W20E1DA9084AC8AE70D020484220@phx.gbl>
	<EE1198D7-F943-45B8-A832-C694BD22106F@cs.usfca.edu>
Message-ID: <BLU124-W409C2C11303D4B77400A7D84220@phx.gbl>


Thanks Terrence. I upgraded to 3.0.1 and I believe I installed it correctly. I had slgiht confusion with hte stringtemplate JARs. Anyway, I only mention this because I still get an error and the error is to do with the StringTemplate.
 
C:\antlr-3.0b7\lib\Java\eg\ast>java org.antlr.Tool JavaAST.gANTLR Parser Generator  Version 3.0.1 (August 13, 2007)  1989-2007error(10):  internal error: JavaAST.g : java.lang.IllegalArgumentException: Can't find template tokenRefRuleRootTrack.storg.antlr.stringtemplate.StringTemplateGroup.lookupTemplate(StringTemplateGroup.java:485)org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:372)org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:384)org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate(StringTemplateGroup.java:464)org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:372)org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:384)org.antlr.codegen.CodeGenTreeWalker.getTokenElementST(CodeGenTreeWalker.java:160)org.antlr.codegen.CodeGenTreeWalker.atom(CodeGenTreeWalker.java:2017)org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1641)org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1478)org.antlr.codegen.CodeGenTreeWalker.alternative(CodeGenTreeWalker.java:1252)org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:1037)org.antlr.codegen.CodeGenTreeWalker.rule(CodeGenTreeWalker.java:753)org.antlr.codegen.CodeGenTreeWalker.rules(CodeGenTreeWalker.java:544)org.antlr.codegen.CodeGenTreeWalker.grammarSpec(CodeGenTreeWalker.java:486)org.antlr.codegen.CodeGenTreeWalker.grammar(CodeGenTreeWalker.java:333)org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:406)org.antlr.Tool.processGrammar(Tool.java:347)org.antlr.Tool.process(Tool.java:268)org.antlr.Tool.main(Tool.java:70)My current CLASSPATH is:
.;C:\antlr-3.0b7\lib\antlr-3.0.1.jar; C:\antlr-3.0b7\lib\antlr-2.7.7.jar; C:\antlr-3.0b7\lib\stringtemplate-3.0.jar; C:\antlr-3.0b7\lib\stringtemplate-3.1b1.jar; C:\antlr-3.0b7\lib\antlr-runtime-3.0.1.jar;C:\Program Files\Java\jre1.6.0_03\bin; 
 
I've tried: putting stringtemplate-3.1b1 before 3.0, removing 3.1b1 altogether, removing 3.0 altogtehr and putting 3.0 first. Still, everytime I have got this error. Not sure if perhaps env vars aren't updating correctly or if it isn't a problem with those at all. If you (or someone else) has any idea why I get this error, i'd appreciate it.
Thanks Adam


CC: antlr-interest at antlr.orgFrom: parrt at cs.usfca.eduTo: ad_cooney at hotmail.comSubject: Re: [antlr-interest] Java AST GrammarDate: Tue, 19 Feb 2008 14:14:37 -0800 Hi Adam.  Almost certainly this is a 3.0b7 issue. please grab 3.0.1 and try to make it work. 
Ter

On Feb 19, 2008, at 2:12 PM, Adam Cooney wrote:

Hi John, I've been having some trouble running your grammar. I keep getting the following error: C:\antlr-3.0b7\lib\Java\eg\ast>java org.antlr.Tool JavaAST.gANTLR Parser Generator  Version 3.0b7 (April 12, 2007)  1989-2007error(100): JavaAST.g:709:53: syntax error: antlr: JavaAST.g:709:53: unexpectedtoken: ?error(100): JavaAST.g:710:61: syntax error: antlr: JavaAST.g:710:61: unexpectedtoken: ?error(100): JavaAST.g:711:51: syntax error: antlr: JavaAST.g:711:51: unexpectedtoken: ?error(100): JavaAST.g:712:58: syntax error: antlr: JavaAST.g:712:58: unexpectedtoken: ?error(100): JavaAST.g:0:0: syntax error: assign.types: <AST>:0:0: unexpected end of subtreeerror(10):  internal error: JavaAST.g : java.lang.ClassCastException: antlr.ASTNULLType cannot be cast to org.antlr.tool.GrammarASTorg.antlr.tool.AssignTokenTypesWalker.block(AssignTokenTypesWalker.java:1215)org.antlr.tool.AssignTokenTypesWalker.rule(AssignTokenTypesWalker.java:1030)org.antlr.tool.AssignTokenTypesWalker.rules(AssignTokenTypesWalker.java:610)org.antlr.tool.AssignTokenTypesWalker.grammarSpec(AssignTokenTypesWalker.java:492)org.antlr.tool.AssignTokenTypesWalker.grammar(AssignTokenTypesWalker.java:363)org.antlr.tool.Grammar.setGrammarContent(Grammar.java:539)org.antlr.tool.Grammar.<init>(Grammar.java:448)org.antlr.Tool.getGrammar(Tool.java:331)org.antlr.Tool.process(Tool.java:267)org.antlr.Tool.main(Tool.java:70) Any idea what could be causing it? I'm pretty new to ANTLR, but the stringtemplate and antlr JARs are in the classpath, and I ran the example treeparsers fine. Could it be due to using antlr-3.0b7 rather than antlr-3.0.1? I was using 3.0.1 but after installing it and resetting the classpaths for some reason i got a Java classloader error even after restarting the computer, and so I just reverted back to this one.


CC: john at jacelridge.com; antlr-interest at antlr.orgFrom: john at jacelridge.comTo: ad_cooney at hotmail.comSubject: Re: [antlr-interest] Java AST GrammarDate: Tue, 12 Feb 2008 17:41:05 -0500I have been working on a Java grammar that produces an AST; and a companion tree grammar that produces equivalent Java code from an AST.  This is still a work-in-progress, but you're welcome to what I have. 

Please let me know if you run into any problems with this, as I'm trying to make it work nicely.

Peace
- John




She said what? About who? Shameful celebrity quotes on Search Star!
_________________________________________________________________
Get Hotmail on your mobile, text MSN to 63463!
http://mobile.uk.msn.com/pc/mail.aspx
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080219/d1714d9f/attachment.html 

From john at jacelridge.com  Tue Feb 19 16:53:57 2008
From: john at jacelridge.com (John Ridgway)
Date: Tue, 19 Feb 2008 19:53:57 -0500
Subject: [antlr-interest] Java AST Grammar
In-Reply-To: <BLU124-W20E1DA9084AC8AE70D020484220@phx.gbl>
References: <BLU124-W377786AF163CAC13E783AC842B0@phx.gbl>
	<D2866F35-D1BB-4C25-9227-D32EFB4EBEED@jacelridge.com>
	<BLU124-W20E1DA9084AC8AE70D020484220@phx.gbl>
Message-ID: <CAD63C78-E67C-471C-B78A-9124E3A2CA58@jacelridge.com>

Yes, you need 3.0b7 won't work, but, actually, neither will 3.0.1.   
There is a bug in 3.0.1 (fixed in current beta releases of 3.1) that  
causes certain things not to work (they're marked with something like  
<---- trouble here in the grammar).  Get the latest release of 3.1beta  
and you'll be much happier.  (With 3.0.1 it will compile, it will just  
fail at runtime or give you a bad AST.)

I have to say that I was very impressed; when I pointed the bug out to  
Terence he got a new version with the fix out in a few (maybe one) days.

Peace
- John


On Feb 19, 2008, at 5:12 PM, Adam Cooney wrote:

> Hi John, I've been having some trouble running your grammar. I keep  
> getting the following error:
>
> C:\antlr-3.0b7\lib\Java\eg\ast>java org.antlr.Tool JavaAST.g
> ANTLR Parser Generator  Version 3.0b7 (April 12, 2007)  1989-2007
> error(100): JavaAST.g:709:53: syntax error: antlr: JavaAST.g:709:53:  
> unexpected
> token: ?
> error(100): JavaAST.g:710:61: syntax error: antlr: JavaAST.g:710:61:  
> unexpected
> token: ?
> error(100): JavaAST.g:711:51: syntax error: antlr: JavaAST.g:711:51:  
> unexpected
> token: ?
> error(100): JavaAST.g:712:58: syntax error: antlr: JavaAST.g:712:58:  
> unexpected
> token: ?
> error(100): JavaAST.g:0:0: syntax error: assign.types: <AST>:0:0:  
> unexpected end
>  of subtree
> error(10):  internal error: JavaAST.g :  
> java.lang.ClassCastException: antlr.ASTN
> ULLType cannot be cast to org.antlr.tool.GrammarAST
> org 
> .antlr.tool.AssignTokenTypesWalker.block(AssignTokenTypesWalker.java: 
> 1215)
> org 
> .antlr.tool.AssignTokenTypesWalker.rule(AssignTokenTypesWalker.java: 
> 1030)
> org 
> .antlr.tool.AssignTokenTypesWalker.rules(AssignTokenTypesWalker.java: 
> 610)
> org 
> .antlr 
> .tool.AssignTokenTypesWalker.grammarSpec(AssignTokenTypesWalker.java: 
> 49
> 2)
> org 
> .antlr 
> .tool.AssignTokenTypesWalker.grammar(AssignTokenTypesWalker.java:363)
> org.antlr.tool.Grammar.setGrammarContent(Grammar.java:539)
> org.antlr.tool.Grammar.<init>(Grammar.java:448)
> org.antlr.Tool.getGrammar(Tool.java:331)
> org.antlr.Tool.process(Tool.java:267)
> org.antlr.Tool.main(Tool.java:70)
>
> Any idea what could be causing it? I'm pretty new to ANTLR, but the  
> stringtemplate and antlr JARs are in the classpath, and I ran the  
> example treeparsers fine. Could it be due to using antlr-3.0b7  
> rather than antlr-3.0.1? I was using 3.0.1 but after installing it  
> and resetting the classpaths for some reason i got a Java  
> classloader error even after restarting the computer, and so I just  
> reverted back to this one.
>
>
> CC: john at jacelridge.com; antlr-interest at antlr.org
> From: john at jacelridge.com
> To: ad_cooney at hotmail.com
> Subject: Re: [antlr-interest] Java AST Grammar
> Date: Tue, 12 Feb 2008 17:41:05 -0500
>
> I have been working on a Java grammar that produces an AST; and a  
> companion tree grammar that produces equivalent Java code from an  
> AST.  This is still a work-in-progress, but you're welcome to what I  
> have.
>
> Please let me know if you run into any problems with this, as I'm  
> trying to make it work nicely.
>
> Peace
> - John
>
>
> She said what? About who? Shameful celebrity quotes on Search Star!

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080219/06dc3d9d/attachment-0001.html 

From shro8822 at vandals.uidaho.edu  Tue Feb 19 16:56:07 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Tue, 19 Feb 2008 16:56:07 -0800
Subject: [antlr-interest] default output path
Message-ID: <BAYC1-PASMTP0521BBB1C3E37CF11F9791F5230@CEZ.ICE>

How do I set antlr works to by default to generate it's output in the 
same place as it's input regardless of where that is? I just spent about 
an hour trying to get Antlr to generate something and it the problem was 
it wasn't generating the output where I thought it was. I have set the 
default path to '.' but I don't trust that; the first doc I opened today 
is in the output folder, what if it was not or something else managed to 
change the current directory.

Also; why isn't* "output next to input" the default? I can't think of 
any cases where I would want any other global default. Am I missing 
something here?

Benjamin Shropshire

*this is a real question, I'm assumeing there is a reason and I'd like 
to know what it is.

From jpen054 at ec.auckland.ac.nz  Tue Feb 19 17:05:39 2008
From: jpen054 at ec.auckland.ac.nz (Jamie Penney)
Date: Wed, 20 Feb 2008 14:05:39 +1300
Subject: [antlr-interest] default output path
In-Reply-To: <BAYC1-PASMTP0521BBB1C3E37CF11F9791F5230@CEZ.ICE>
References: <BAYC1-PASMTP0521BBB1C3E37CF11F9791F5230@CEZ.ICE>
Message-ID: <47BB7CE3.4050606@ec.auckland.ac.nz>

Are you talking about ANTLRWorks, the ANTLR development environment, or 
the command line ANTLR tool? The command line version has the behaviour 
you exprect, ANTLRWorks defaults to using /tmp/ANTLR or something. Why 
does everything take you multiple hours/days to fix? This was something 
I realised in about 5 minutes, when my grammar files weren't generated 
in the main directory, but were debugging fine.

It is a silly default though, I agree.

Jamie

Benjamin Shropshire wrote:
> How do I set antlr works to by default to generate it's output in the 
> same place as it's input regardless of where that is? I just spent 
> about an hour trying to get Antlr to generate something and it the 
> problem was it wasn't generating the output where I thought it was. I 
> have set the default path to '.' but I don't trust that; the first doc 
> I opened today is in the output folder, what if it was not or 
> something else managed to change the current directory.
>
> Also; why isn't* "output next to input" the default? I can't think of 
> any cases where I would want any other global default. Am I missing 
> something here?
>
> Benjamin Shropshire
>
> *this is a real question, I'm assumeing there is a reason and I'd like 
> to know what it is.


From lefevrol at yahoo.com  Tue Feb 19 17:34:22 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Wed, 20 Feb 2008 02:34:22 +0100
Subject: [antlr-interest] Buglet in book
In-Reply-To: <fpbmp7$n3n$1@ger.gmane.org>
References: <fpbmp7$n3n$1@ger.gmane.org>
Message-ID: <fpg034$cl6$1@ger.gmane.org>

Sorry, I meant on p.310. The search engine in Acrobat would have found the 
string anyway.

Regards,

-- O.L.


From lefevrol at yahoo.com  Tue Feb 19 17:48:43 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Wed, 20 Feb 2008 02:48:43 +0100
Subject: [antlr-interest] Java AST Grammar
In-Reply-To: <BLU124-W377786AF163CAC13E783AC842B0@phx.gbl>
References: <BLU124-W377786AF163CAC13E783AC842B0@phx.gbl>
Message-ID: <fpg0u2$esm$1@ger.gmane.org>

Adam Cooney wrote:
> I'm rather new to ANTLR and require a java AST grammar which will end up 
> taking a Java file as an input and creating the AST for the Java code. 

Perhaps you don't need ANTLR for this. The JDK has included an AST API for
some time: it lives in the com.sun.source.tree and com.sun.source.util 
packages. It is not well documented but googling for "tree API" + javac (or 
java) should bring up enough information to get you started.

-- O.L.


From shro8822 at vandals.uidaho.edu  Tue Feb 19 17:53:13 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Tue, 19 Feb 2008 17:53:13 -0800
Subject: [antlr-interest] default output path
In-Reply-To: <47BB7CE3.4050606@ec.auckland.ac.nz>
References: <BAYC1-PASMTP0521BBB1C3E37CF11F9791F5230@CEZ.ICE>
	<47BB7CE3.4050606@ec.auckland.ac.nz>
Message-ID: <BAYC1-PASMTP1165FA1EFF907CB5736653F5230@CEZ.ICE>

Jamie Penney wrote:
> Are you talking about ANTLRWorks, the ANTLR development environment,
that

> or the command line ANTLR tool? The command line version has the 
> behaviour you exprect, ANTLRWorks defaults to using /tmp/ANTLR or 
> something. Why does everything take you multiple hours/days to fix?
I only work part time a few days a week for one (divide multi-day range 
intervals by about 4). For another, I'm overly reluctant to abandon an 
approach after I've started trying it (if I wasn't I'd have abandoned 
Antlr about 15 min after I first looked at it). This time: because I 
wasn't deleting the .cs files and I had managed to kick it into working 
from the command line the last I was working. Visual studio was just 
using the old files.

I don't known what to expect to come out the back end so the fact that 
nothing noticeable was change didn't clue me in as fast as It should*. 
Also a fair part of that time was spent searching through the docs and 
samples for examples similar to what I was doing.

> This was something I realised in about 5 minutes, when my grammar 
> files weren't generated in the main directory, but were debugging fine.
>
> It is a silly default though, I agree.
>
> Jamie
>

* when you have no idea what's wrong or how the details work, it's 
really can be hard to tell what's important. Sort of the inverse of 
this: http://www.thecfooncall.com/wheretoputthex.html

From parrt at cs.usfca.edu  Tue Feb 19 18:45:34 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 19 Feb 2008 18:45:34 -0800
Subject: [antlr-interest] updated symbol table lecture
Message-ID: <CAEB301D-532C-4404-A9A2-59F3172F0744@cs.usfca.edu>

Hi, I have updated my symbol table management lecture in preparation  
for tomorrow's class:

http://www.antlr.org/wiki/display/CS652/Symbol+tables

Is better than it was, but when I do I textbook in a year or two, I  
will have to work hard to make a really nice description.

Ter

From antlr at mirality.co.nz  Wed Feb 20 00:17:06 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 20 Feb 2008 21:17:06 +1300
Subject: [antlr-interest] Understanding Lexer rules
In-Reply-To: <c8c997f40802191244o330c0245v4175eb987fb60ec6@mail.gmail.co
 m>
References: <307403.83169.qm@web30605.mail.mud.yahoo.com>
	<c8c997f40802191244o330c0245v4175eb987fb60ec6@mail.gmail.com>
Message-ID: <20080220081723.5F20411E93A@www.antlr.org>

At 09:44 20/02/2008, Darien Hager wrote:
>1) It helps to consider lexer rules (token definitions) to be 
>separate from the parser rules, even though they're in the same 
>file.

Yes.  In fact my opinion is that it's best not to use character 
literals in the parser at all (since this helps to reinforce the 
separation between lexer and parser).  There was a big discussion 
on this last week.

>2) Unlike parser rules, the order of appearance matters. (The 
>auto-named tokens generated by literals in parser rules are 
>appended.)

I believe they're prepended, actually.  And the order only sort-of 
matters; a rule that consumes more input will usually win against 
one that consumes less input regardless of order.

>3) The lexer seeks to match the first viable token.

Sort of (see above).

>4) Order your tokens from most specific and complex to least 
>specific and generic.
>5) Ensure that any lexer rules which are only for convenience 
>(and not as fully valid first-class tokenson their own) are 
>marked "fragmentary".

Yes.

>So, for example, I'd put NUMERIC (the specific case) before 
>ALPHANUMERIC in the lexer rules.

I'm not entirely sure whether input such as "42foo" will resolve 
to ALPHANUMERIC or NUMERIC ALPHANUMERIC (it probably depends on 
how the rules are defined).  Either way, you need to word your 
parser rules carefully if NUMERIC is a complete subset of 
ALPHANUMERIC.


From jpschewe at mtu.net  Wed Feb 20 03:52:38 2008
From: jpschewe at mtu.net (Jon Schewe)
Date: Wed, 20 Feb 2008 05:52:38 -0600
Subject: [antlr-interest] Why is ANTLR getting lost?
Message-ID: <47BC1486.1060703@mtu.net>

I've got a piece of a grammar that is causing ANTLR to get lost and I'm 
not sure.  I've written unit tests with JUnit to call the different 
rules to parse specific pieces of code with the input slowly getting 
larger and it fails when I add the rule "constraintDecls".  Grammar is 
attached, one should just need to look at the first few rules.

The rule constraintDecls calls constraints, which calls constraintDecl.  
Here is are two test methods, the first one passes the second one fails:
  /**
   * @throws RecognitionException
   */
  @Test
  public void testConstraints0() throws RecognitionException {
    final String data = "constraint3: 5.0 <= 6 + 6 * a[1 + 3] * c - 1 <= 
10.0;";

    final GHOCESLexer lexer = new GHOCESLexer(new ANTLRStringStream(data));
    final CommonTokenStream tokens = new CommonTokenStream(lexer);
    final GHOCESParser parser = new GHOCESParser(tokens);
    final GHOCESParser.constraints_return r = parser.constraints();
    Assert.assertNotNull(r);
  }

  /**
   * @throws RecognitionException
   */
  @Test
  public void testConstraintDecls0() throws RecognitionException {
    final String data = "Constraints constraint3: 5.0 <= 6 + 6 * a[1 + 
3] * c - 1 <= 10.0;";

    final GHOCESLexer lexer = new GHOCESLexer(new ANTLRStringStream(data));
    final CommonTokenStream tokens = new CommonTokenStream(lexer);
    final GHOCESParser parser = new GHOCESParser(tokens);
    final GHOCESParser.constraintDecls_return r = parser.constraintDecls();
    Assert.assertNotNull(r);
  }
Error is (I force an exception in emit to be sure what the call stack is):
203 [main] ERROR 
com.honeywell.htc.schedinfra.pconstraint.parser.GHOCESParser - line 
25:17 no viable alternative at input '1'
java.lang.RuntimeException
    at 
com.honeywell.htc.schedinfra.pconstraint.parser.GHOCESParser.emitErrorMessage(GHOCESParser.java:124)
    at 
org.antlr.runtime.BaseRecognizer.displayRecognitionError(BaseRecognizer.java:152)
    at org.antlr.runtime.BaseRecognizer.reportError(BaseRecognizer.java:144)
    at 
com.honeywell.htc.schedinfra.pconstraint.parser.GHOCESParser.constraintDecl(GHOCESParser.java:2523)
    at 
com.honeywell.htc.schedinfra.pconstraint.parser.GHOCESParser.constraints(GHOCESParser.java:1940)
    at 
com.honeywell.htc.schedinfra.pconstraint.parser.GHOCESParser.constraintDecls(GHOCESParser.java:700)
    at 
com.honeywell.htc.schedinfra.pconstraint.parser.GHOCESParser.program(GHOCESParser.java:176)
    at 
com.honeywell.htc.schedinfra.pconstraint.GHOCES.parseFile(GHOCES.java:401)
    at 
com.honeywell.htc.schedinfra.pconstraint.parser.test.TestParser.testSubscripts(TestParser.java:116)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at junit.framework.TestCase.runTest(TestCase.java:168)
    at junit.framework.TestCase.runBare(TestCase.java:134)
    at junit.framework.TestResult$1.protect(TestResult.java:110)
    at junit.framework.TestResult.runProtected(TestResult.java:128)
    at junit.framework.TestResult.run(TestResult.java:113)
    at junit.framework.TestCase.run(TestCase.java:124)
    at junit.framework.TestSuite.runTest(TestSuite.java:232)
    at junit.framework.TestSuite.run(TestSuite.java:227)
    at 
org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:81)
    at 
org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:38)
    at 
org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at 
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)
    at 
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)
    at 
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)
    at 
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)
219 [main] INFO 
com.honeywell.htc.schedinfra.pconstraint.parser.test.TestParser - 
Running testSummation
219 [main] INFO 
com.honeywell.htc.schedinfra.pconstraint.parser.test.TestParser - 
Running testAddExpr0
235 [main] INFO 
com.honeywell.htc.schedinfra.pconstraint.parser.test.TestParser - 
Running testConstraintDecl0
235 [main] ERROR 
com.honeywell.htc.schedinfra.pconstraint.parser.GHOCESParser - line 1:30 
no viable alternative at input '1'

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: GHOCES.g
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20080220/19bc3eb9/attachment-0001.pl 

From jpschewe at mtu.net  Wed Feb 20 04:14:49 2008
From: jpschewe at mtu.net (Jon Schewe)
Date: Wed, 20 Feb 2008 06:14:49 -0600
Subject: [antlr-interest] Why is ANTLR getting lost?
In-Reply-To: <47BC1486.1060703@mtu.net>
References: <47BC1486.1060703@mtu.net>
Message-ID: <47BC19B9.2040301@mtu.net>

Ok, it's actually failing in testConstraints as well.  I just can't get 
a reasonable error value out of antlr.  Is there a good way to check for 
an error from ANTLR in such a case?  The constraints() method is 
returning non-null and not throwing an exception, however I'm getting a 
call to emit with "no viable alternative at input...".

Jon Schewe wrote:
> I've got a piece of a grammar that is causing ANTLR to get lost and 
> I'm not sure.  I've written unit tests with JUnit to call the 
> different rules to parse specific pieces of code with the input slowly 
> getting larger and it fails when I add the rule "constraintDecls".  
> Grammar is attached, one should just need to look at the first few rules.
>
> The rule constraintDecls calls constraints, which calls 
> constraintDecl.  Here is are two test methods, the first one passes 
> the second one fails:
>  /**
>   * @throws RecognitionException
>   */
>  @Test
>  public void testConstraints0() throws RecognitionException {
>    final String data = "constraint3: 5.0 <= 6 + 6 * a[1 + 3] * c - 1 
> <= 10.0;";
>
>    final GHOCESLexer lexer = new GHOCESLexer(new 
> ANTLRStringStream(data));
>    final CommonTokenStream tokens = new CommonTokenStream(lexer);
>    final GHOCESParser parser = new GHOCESParser(tokens);
>    final GHOCESParser.constraints_return r = parser.constraints();
>    Assert.assertNotNull(r);
>  }
>
>  /**
>   * @throws RecognitionException
>   */
>  @Test
>  public void testConstraintDecls0() throws RecognitionException {
>    final String data = "Constraints constraint3: 5.0 <= 6 + 6 * a[1 + 
> 3] * c - 1 <= 10.0;";
>
>    final GHOCESLexer lexer = new GHOCESLexer(new 
> ANTLRStringStream(data));
>    final CommonTokenStream tokens = new CommonTokenStream(lexer);
>    final GHOCESParser parser = new GHOCESParser(tokens);
>    final GHOCESParser.constraintDecls_return r = 
> parser.constraintDecls();
>    Assert.assertNotNull(r);
>  }
> Error is (I force an exception in emit to be sure what the call stack 
> is):
> 203 [main] ERROR 
> com.honeywell.htc.schedinfra.pconstraint.parser.GHOCESParser - line 
> 25:17 no viable alternative at input '1'
> java.lang.RuntimeException
>    at 
> com.honeywell.htc.schedinfra.pconstraint.parser.GHOCESParser.emitErrorMessage(GHOCESParser.java:124) 
>
>    at 
> org.antlr.runtime.BaseRecognizer.displayRecognitionError(BaseRecognizer.java:152) 
>
>    at 
> org.antlr.runtime.BaseRecognizer.reportError(BaseRecognizer.java:144)
>    at 
> com.honeywell.htc.schedinfra.pconstraint.parser.GHOCESParser.constraintDecl(GHOCESParser.java:2523) 
>
>    at 
> com.honeywell.htc.schedinfra.pconstraint.parser.GHOCESParser.constraints(GHOCESParser.java:1940) 
>
>    at 
> com.honeywell.htc.schedinfra.pconstraint.parser.GHOCESParser.constraintDecls(GHOCESParser.java:700) 
>
>    at 
> com.honeywell.htc.schedinfra.pconstraint.parser.GHOCESParser.program(GHOCESParser.java:176) 
>
>    at 
> com.honeywell.htc.schedinfra.pconstraint.GHOCES.parseFile(GHOCES.java:401) 
>
>    at 
> com.honeywell.htc.schedinfra.pconstraint.parser.test.TestParser.testSubscripts(TestParser.java:116) 
>
>    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
>    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
>    at java.lang.reflect.Method.invoke(Unknown Source)
>    at junit.framework.TestCase.runTest(TestCase.java:168)
>    at junit.framework.TestCase.runBare(TestCase.java:134)
>    at junit.framework.TestResult$1.protect(TestResult.java:110)
>    at junit.framework.TestResult.runProtected(TestResult.java:128)
>    at junit.framework.TestResult.run(TestResult.java:113)
>    at junit.framework.TestCase.run(TestCase.java:124)
>    at junit.framework.TestSuite.runTest(TestSuite.java:232)
>    at junit.framework.TestSuite.run(TestSuite.java:227)
>    at 
> org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:81) 
>
>    at 
> org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:38) 
>
>    at 
> org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) 
>
>    at 
> org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460) 
>
>    at 
> org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673) 
>
>    at 
> org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386) 
>
>    at 
> org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196) 
>
> 219 [main] INFO 
> com.honeywell.htc.schedinfra.pconstraint.parser.test.TestParser - 
> Running testSummation
> 219 [main] INFO 
> com.honeywell.htc.schedinfra.pconstraint.parser.test.TestParser - 
> Running testAddExpr0
> 235 [main] INFO 
> com.honeywell.htc.schedinfra.pconstraint.parser.test.TestParser - 
> Running testConstraintDecl0
> 235 [main] ERROR 
> com.honeywell.htc.schedinfra.pconstraint.parser.GHOCESParser - line 
> 1:30 no viable alternative at input '1'
>


From jpschewe at mtu.net  Wed Feb 20 04:32:46 2008
From: jpschewe at mtu.net (Jon Schewe)
Date: Wed, 20 Feb 2008 06:32:46 -0600
Subject: [antlr-interest] Why is ANTLR getting lost?
In-Reply-To: <47BC1486.1060703@mtu.net>
References: <47BC1486.1060703@mtu.net>
Message-ID: <47BC1DEE.6050005@mtu.net>

I've figured out that ANTLR is dying in the DFA when it's trying to 
determine which branch of the constraintDecl rule to follow.  Attached 
is the grammar, suggestions on how to resolve this are very welcome.

Test case is here:
  /**
   * @throws RecognitionException
   */
  @Test
  public void testConstraintDecl0() throws RecognitionException {
    final String data = "constraint3: 5.0 <= 6 + 6 * a[1 + 3] * c - 1 <= 
10.0;";

    final GHOCESLexer lexer = new GHOCESLexer(new ANTLRStringStream(data));
    final CommonTokenStream tokens = new CommonTokenStream(lexer);
    final GHOCESParser parser = new GHOCESParser(tokens);
    final GHOCESParser.constraintDecl_return r = parser.constraintDecl();
    Assert.assertNotNull(r);
  }

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: GHOCES.g
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20080220/51edd6a9/attachment.pl 

From spoulson3 at yahoo.com  Wed Feb 20 04:44:58 2008
From: spoulson3 at yahoo.com (Shawn Poulson)
Date: Wed, 20 Feb 2008 04:44:58 -0800 (PST)
Subject: [antlr-interest] Understanding Lexer rules
In-Reply-To: <mailman.16697.1203508385.2502.antlr-interest@antlr.org>
Message-ID: <774379.45790.qm@web30601.mail.mud.yahoo.com>

> From: Gavin Lambert <antlr at mirality.co.nz>
> 
> >So, for example, I'd put NUMERIC (the specific case) before 
> >ALPHANUMERIC in the lexer rules.
> 
> I'm not entirely sure whether input such as "42foo" will resolve 
> to ALPHANUMERIC or NUMERIC ALPHANUMERIC (it probably depends on 
> how the rules are defined).  Either way, you need to word your 
> parser rules carefully if NUMERIC is a complete subset of 
> ALPHANUMERIC.

What do you need to be careful about, exactly, to avoid this ambiguity?

See, I'm getting hung up on how any change I make to a lexer rule
breaks a number of parser rules.  Here's a quick example that parses a
string that defines a datetime span.  It should take input like
"2008-01-30 5:16:27.677 lasting T30", which indicates that date with a
timespan of 30 seconds.

This portion works.  Now, I want to implement a 'fetch' construct where
you can instead supply "@{some text}" to reference a stored value by
name.  To enable this, I uncomment out the commented code in the
sample.  Once done, the fetch feature works, but now the previous
syntax defined by once_p is getting hung up on the 'lasting' keyword
with "NoViableAltException".  It seems the SYMBOL lexer rule is
gobbling up the text.

Can someone clarify what is going on?

--------->>
grammar T;

prog:
   once_p /* | fetch_p */ ;

once_p: start=datetime_p ('lasting' duration=timespan_p);

//fetch_p: '@{' name=SYMBOL '}';

datetime_p:
   (y=UINT '-' mo=UINT '-' d=UINT)?
   h=UINT ':' m=UINT (':' s=UINT ('.' ms=UINT)? )?;

timespan_p:
   'T' (((d=int_p '.')? h=int_p ':')? m=int_p ':')? s=int_p ('.'
ms=int_p)?;

int_p: '-'? UINT;

//SYMBOL: LEADIDCHAR IDCHAR*;
//IDCHAR: LETTER | DIGIT | '_' | ' ' | '-';
//LEADIDCHAR: LETTER | '_';

UINT: DIGIT+;
fragment DIGIT: '0'..'9';
fragment LETTER: 'a'..'z'|'A'..'Z';
WS: (' '|'\t'|'\r'|'\n'|'\u000C')+ { $channel=HIDDEN; };
<<---------

---
Shawn Poulson
spoulson at explodingcoder.com

From Vitaliy at dbsophic.com  Wed Feb 20 05:08:18 2008
From: Vitaliy at dbsophic.com (Vitaliy)
Date: Wed, 20 Feb 2008 15:08:18 +0200
Subject: [antlr-interest] Partitioning Antlr grammar into a couple files
Message-ID: <000001c873c1$ab9c9ff0$02d5dfd0$@com>

Hello,

 

I found no reference about this in the documentation - 

I wonder if it's possible to divide the grammar definition between multiple
number of files - 

 

I've defined a pretty large grammar - around 150 rules, spanning over 1500
lines.

When I first tried to generate the code using AntlrWorks, it just got stuck,
and after adding more memory to the process, it managed to generate almost
200,000 lines of C# code.

 

Anyway, It's really hard to test \ manage such a big grammar. Is there a way
to split it between a number of files?

 

Thanks,

Vitaliy

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080220/65aaf733/attachment-0001.html 

From r.mark.volkmann at gmail.com  Wed Feb 20 05:37:51 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Wed, 20 Feb 2008 07:37:51 -0600
Subject: [antlr-interest] Understanding Lexer rules
In-Reply-To: <20080220081723.5F20411E93A@www.antlr.org>
References: <307403.83169.qm@web30605.mail.mud.yahoo.com>
	<c8c997f40802191244o330c0245v4175eb987fb60ec6@mail.gmail.com>
	<20080220081723.5F20411E93A@www.antlr.org>
Message-ID: <f0fcc6820802200537v4d4f6daal8f7afa2e378d36b3@mail.gmail.com>

On Feb 20, 2008 2:17 AM, Gavin Lambert <antlr at mirality.co.nz> wrote:
> At 09:44 20/02/2008, Darien Hager wrote:
> >1) It helps to consider lexer rules (token definitions) to be
> >separate from the parser rules, even though they're in the same
> >file.
>
> Yes.  In fact my opinion is that it's best not to use character
> literals in the parser at all (since this helps to reinforce the
> separation between lexer and parser).  There was a big discussion
> on this last week.
>
> >2) Unlike parser rules, the order of appearance matters. (The
> >auto-named tokens generated by literals in parser rules are
> >appended.)
>
> I believe they're prepended, actually.  And the order only sort-of
> matters; a rule that consumes more input will usually win against
> one that consumes less input regardless of order.

This really bothers me. Every time this subject comes up it seems that
people talk about what they *think* happens, using words like "I
believe", "sort-of" and "usually". Gavin, I'm not faulting you. You're
supplying as much information as you have which is helpful. I just
wish that someone who knows for sure would speak up and put the
definitive information in the wiki so we can stop speculating on how
the lexer chooses the next rule to apply.

> >3) The lexer seeks to match the first viable token.
>
> Sort of (see above).

-- 
R. Mark Volkmann
Object Computing, Inc.

From antlr at shmuelhome.mine.nu  Wed Feb 20 06:04:06 2008
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Wed, 20 Feb 2008 16:04:06 +0200
Subject: [antlr-interest] Why is ANTLR getting lost?
In-Reply-To: <47BC1DEE.6050005@mtu.net>
References: <47BC1486.1060703@mtu.net> <47BC1DEE.6050005@mtu.net>
Message-ID: <47BC3356.4070400@shmuelhome.mine.nu>

Jon Schewe wrote:
> I've figured out that ANTLR is dying in the DFA when it's trying to 
> determine which branch of the constraintDecl rule to follow.  Attached 
> is the grammar, suggestions on how to resolve this are very welcome.
>
> Test case is here:
>  /**
>   * @throws RecognitionException
>   */
>  @Test
>  public void testConstraintDecl0() throws RecognitionException {
>    final String data = "constraint3: 5.0 <= 6 + 6 * a[1 + 3] * c - 1 
> <= 10.0;";
>
>    final GHOCESLexer lexer = new GHOCESLexer(new 
> ANTLRStringStream(data));
>    final CommonTokenStream tokens = new CommonTokenStream(lexer);
>    final GHOCESParser parser = new GHOCESParser(tokens);
>    final GHOCESParser.constraintDecl_return r = parser.constraintDecl();
>    Assert.assertNotNull(r);
>  }
>
I can't tell you why but I can tell you that the dfa predictor is 
failing on
        (addExpr[true] EQ) => addExpr[true] EQ addExpr[false]
      | (number LE addExpr[true] LE) => lb=number LE addExpr[false] LE 
ub=number
      | (addExpr[true] LE) => ae+=addExpr[true] LE ae+=addExpr[false]

Note that the second alternative satisfies the conditions of the 
condition of the third alternative. If you eliminate the third 
alternative, the rule works. The rule also works if you change the third 
alternative to be different then the second, say by adding LE before 
addExpr. I suspect that something is wrong with the dfa predictor.



From jaluber at gmx.de  Wed Feb 20 06:04:09 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Wed, 20 Feb 2008 15:04:09 +0100
Subject: [antlr-interest] Partitioning Antlr grammar into a couple files
In-Reply-To: <000001c873c1$ab9c9ff0$02d5dfd0$@com>
References: <000001c873c1$ab9c9ff0$02d5dfd0$@com>
Message-ID: <47BC3359.1040402@gmx.de>

Vitaliy schrieb:
> Hello,
> 
> I found no reference about this in the documentation -
> 
> I wonder if it's possible to divide the grammar definition between 
> multiple number of files -
> 
> I've defined a pretty large grammar - around 150 rules, spanning over 
> 1500 lines.
> 
> When I first tried to generate the code using AntlrWorks, it just got 
> stuck, and after adding more memory to the process, it managed to 
> generate almost 200,000 lines of C# code.
> 
> Anyway, It's really hard to test \ manage such a big grammar. Is there a 
> way to split it between a number of files?

ANTLR 3.1 will include grammar inheritance, which is the option you want 
to use. Normally I'd recommend to use an intermediary build, but the 
latest builds are broken and I haven't come around to fix that yet. Look 
  at early January builds, which did work. Documentation is in an 
example grammar which should be included in the build (at least the 
latest builds include that example).

Johannes

From micke.hovmoller at gmail.com  Wed Feb 20 06:03:36 2008
From: micke.hovmoller at gmail.com (=?ISO-8859-1?Q?Micke_Hovm=F6ller?=)
Date: Wed, 20 Feb 2008 15:03:36 +0100
Subject: [antlr-interest] Understanding Lexer rules
In-Reply-To: <f0fcc6820802200537v4d4f6daal8f7afa2e378d36b3@mail.gmail.com>
References: <307403.83169.qm@web30605.mail.mud.yahoo.com>
	<c8c997f40802191244o330c0245v4175eb987fb60ec6@mail.gmail.com>
	<20080220081723.5F20411E93A@www.antlr.org>
	<f0fcc6820802200537v4d4f6daal8f7afa2e378d36b3@mail.gmail.com>
Message-ID: <18b4fcc20802200603o111b13d1h39508ed59d67dd8a@mail.gmail.com>

On 2/20/08, Mark Volkmann <r.mark.volkmann at gmail.com> wrote:
>
> This really bothers me. Every time this subject comes up it seems that
> people talk about what they *think* happens, using words like "I
> believe", "sort-of" and "usually". Gavin, I'm not faulting you. You're
> supplying as much information as you have which is helpful. I just
> wish that someone who knows for sure would speak up and put the
> definitive information in the wiki so we can stop speculating on how
> the lexer chooses the next rule to apply.

I'd like to second this motion, and just add that this information
will have to include some quite detailed and specific examples. This
seems like the sort of thing that is just too complex for most people
to understand without examples.

/Micke

From jaluber at gmx.de  Wed Feb 20 06:22:43 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Wed, 20 Feb 2008 15:22:43 +0100
Subject: [antlr-interest] Understanding Lexer rules
In-Reply-To: <18b4fcc20802200603o111b13d1h39508ed59d67dd8a@mail.gmail.com>
References: <307403.83169.qm@web30605.mail.mud.yahoo.com>	<c8c997f40802191244o330c0245v4175eb987fb60ec6@mail.gmail.com>	<20080220081723.5F20411E93A@www.antlr.org>	<f0fcc6820802200537v4d4f6daal8f7afa2e378d36b3@mail.gmail.com>
	<18b4fcc20802200603o111b13d1h39508ed59d67dd8a@mail.gmail.com>
Message-ID: <47BC37B3.7080101@gmx.de>

Micke Hovm?ller schrieb:
> On 2/20/08, Mark Volkmann <r.mark.volkmann at gmail.com> wrote:
>> This really bothers me. Every time this subject comes up it seems that
>> people talk about what they *think* happens, using words like "I
>> believe", "sort-of" and "usually". Gavin, I'm not faulting you. You're
>> supplying as much information as you have which is helpful. I just
>> wish that someone who knows for sure would speak up and put the
>> definitive information in the wiki so we can stop speculating on how
>> the lexer chooses the next rule to apply.
> 
> I'd like to second this motion, and just add that this information
> will have to include some quite detailed and specific examples. This
> seems like the sort of thing that is just too complex for most people
> to understand without examples.
> 
> /Micke
> 
Isn't 
<http://www.antlr.org/wiki/display/ANTLR3/Quick+Starter+on+Parser+Grammars+-+No+Past+Experience+Required> 
including this information in the "How to define tokens" section?

Johannes

From r.mark.volkmann at gmail.com  Wed Feb 20 06:35:24 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Wed, 20 Feb 2008 08:35:24 -0600
Subject: [antlr-interest] Understanding Lexer rules
In-Reply-To: <47BC37B3.7080101@gmx.de>
References: <307403.83169.qm@web30605.mail.mud.yahoo.com>
	<c8c997f40802191244o330c0245v4175eb987fb60ec6@mail.gmail.com>
	<20080220081723.5F20411E93A@www.antlr.org>
	<f0fcc6820802200537v4d4f6daal8f7afa2e378d36b3@mail.gmail.com>
	<18b4fcc20802200603o111b13d1h39508ed59d67dd8a@mail.gmail.com>
	<47BC37B3.7080101@gmx.de>
Message-ID: <f0fcc6820802200635g3efb9e4ek3fda4a03a3b5a98@mail.gmail.com>

On Feb 20, 2008 8:22 AM, Johannes Luber <jaluber at gmx.de> wrote:
> Micke Hovm?ller schrieb:
>
> > On 2/20/08, Mark Volkmann <r.mark.volkmann at gmail.com> wrote:
> >> This really bothers me. Every time this subject comes up it seems that
> >> people talk about what they *think* happens, using words like "I
> >> believe", "sort-of" and "usually". Gavin, I'm not faulting you. You're
> >> supplying as much information as you have which is helpful. I just
> >> wish that someone who knows for sure would speak up and put the
> >> definitive information in the wiki so we can stop speculating on how
> >> the lexer chooses the next rule to apply.
> >
> > I'd like to second this motion, and just add that this information
> > will have to include some quite detailed and specific examples. This
> > seems like the sort of thing that is just too complex for most people
> > to understand without examples.
> >
> > /Micke
> >
> Isn't
> <http://www.antlr.org/wiki/display/ANTLR3/Quick+Starter+on+Parser+Grammars+-+No+Past+Experience+Required>
> including this information in the "How to define tokens" section?

Let's see if I can summarize the rules from this wiki section.

If the upcoming characters in the stream match a non-imaginary token
defined in a token spec. then that is used. tokens { ... } comes
first.

After that, lexer rules are evaluated in the order in which they are
specified. The first one that matches the upcoming characters in the
stream is used, not the one that matches the greatest number of
characters.

After that, literals specified in parser rules are considered. This
means that parser rules containing literals will not match the input
if there is a lexer rule that matches the same input.

Does all that sound correct?

At the end of the "How to define tokens" section in the wiki it says
that "lexer rules will greedily match the maximum of applicable
characters". There is an exception to this. When the patterns ".*" or
".+" appear in a lexer rule, they do no match greedily.

-- 
R. Mark Volkmann
Object Computing, Inc.

From jpschewe at mtu.net  Wed Feb 20 06:42:35 2008
From: jpschewe at mtu.net (Jon Schewe)
Date: Wed, 20 Feb 2008 08:42:35 -0600
Subject: [antlr-interest] Why is ANTLR getting lost?
In-Reply-To: <47BC3356.4070400@shmuelhome.mine.nu>
References: <47BC1486.1060703@mtu.net> <47BC1DEE.6050005@mtu.net>
	<47BC3356.4070400@shmuelhome.mine.nu>
Message-ID: <47BC3C5B.4090702@mtu.net>


shmuel siegel wrote:
> Jon Schewe wrote:
>> I've figured out that ANTLR is dying in the DFA when it's trying to
>> determine which branch of the constraintDecl rule to follow. 
>> Attached is the grammar, suggestions on how to resolve this are very
>> welcome.
>>
>> Test case is here:
>>  /**
>>   * @throws RecognitionException
>>   */
>>  @Test
>>  public void testConstraintDecl0() throws RecognitionException {
>>    final String data = "constraint3: 5.0 <= 6 + 6 * a[1 + 3] * c - 1
>> <= 10.0;";
>>
>>    final GHOCESLexer lexer = new GHOCESLexer(new
>> ANTLRStringStream(data));
>>    final CommonTokenStream tokens = new CommonTokenStream(lexer);
>>    final GHOCESParser parser = new GHOCESParser(tokens);
>>    final GHOCESParser.constraintDecl_return r = parser.constraintDecl();
>>    Assert.assertNotNull(r);
>>  }
>>
> I can't tell you why but I can tell you that the dfa predictor is
> failing on
>        (addExpr[true] EQ) => addExpr[true] EQ addExpr[false]
>      | (number LE addExpr[true] LE) => lb=number LE addExpr[false] LE
> ub=number
>      | (addExpr[true] LE) => ae+=addExpr[true] LE ae+=addExpr[false]
>
> Note that the second alternative satisfies the conditions of the
> condition of the third alternative. If you eliminate the third
> alternative, the rule works. The rule also works if you change the
> third alternative to be different then the second, say by adding LE
> before addExpr. I suspect that something is wrong with the dfa predictor.
>
I need both alternatives to do the tree rewrite correctly.  I removed
the extra sytantatic predicate on the third alternative, but that didn't
help. 

-- 
Jon Schewe | http://mtu.net/~jpschewe
If you see an attachment named signature.asc, this is my digital
signature.
See http://www.gnupg.org for more information.

For I am convinced that neither death nor life, neither angels 
nor demons, neither the present nor the future, nor any 
powers, neither height nor depth, nor anything else in all 
creation, will be able to separate us from the love of God that 
is in Christ Jesus our Lord. - Romans 8:38-39


From jaluber at gmx.de  Wed Feb 20 06:50:57 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Wed, 20 Feb 2008 15:50:57 +0100
Subject: [antlr-interest] Understanding Lexer rules
In-Reply-To: <f0fcc6820802200635g3efb9e4ek3fda4a03a3b5a98@mail.gmail.com>
References: <307403.83169.qm@web30605.mail.mud.yahoo.com>	
	<c8c997f40802191244o330c0245v4175eb987fb60ec6@mail.gmail.com>	
	<20080220081723.5F20411E93A@www.antlr.org>	
	<f0fcc6820802200537v4d4f6daal8f7afa2e378d36b3@mail.gmail.com>	
	<18b4fcc20802200603o111b13d1h39508ed59d67dd8a@mail.gmail.com>	
	<47BC37B3.7080101@gmx.de>
	<f0fcc6820802200635g3efb9e4ek3fda4a03a3b5a98@mail.gmail.com>
Message-ID: <47BC3E51.1010806@gmx.de>

Mark Volkmann schrieb:
  > Let's see if I can summarize the rules from this wiki section.
> 
> If the upcoming characters in the stream match a non-imaginary token
> defined in a token spec. then that is used. tokens { ... } comes
> first.

Correct.

> After that, lexer rules are evaluated in the order in which they are
> specified. The first one that matches the upcoming characters in the
> stream is used, not the one that matches the greatest number of
> characters.

No. Rereading the text, I suppose one could be confused about that, as 
it isn't as clear as it could be. Is adding "Longer matches are 
preferred over shorter matches. If one has two tokens KEY='key'; and 
KEYWORD='keyword';, then the input 'keyword' will match KEYWORD, even if 
KEY comes first." enough?

> After that, literals specified in parser rules are considered. This
> means that parser rules containing literals will not match the input
> if there is a lexer rule that matches the same input.
> 
> Does all that sound correct?
> 
> At the end of the "How to define tokens" section in the wiki it says
> that "lexer rules will greedily match the maximum of applicable
> characters". There is an exception to this. When the patterns ".*" or
> ".+" appear in a lexer rule, they do no match greedily.

I'll add that.

Johannes



From phreed at gmail.com  Wed Feb 20 06:52:27 2008
From: phreed at gmail.com (Fred)
Date: Wed, 20 Feb 2008 08:52:27 -0600
Subject: [antlr-interest] Why is ANTLR getting lost?
Message-ID: <cb0c557b0802200652ke0f93bx58fe23ada65b0ee6@mail.gmail.com>

If I'm not mistaken this is a know bug in 3.0.1
You can work around it by using LL(k) rather than LL(*) thereby
suppressing the construction of the DFA.
This can be done by adding...
 options { k=4 }
...to the offending rule.

peace

> Date: Wed, 20 Feb 2008 06:32:46 -0600
> From: Jon Schewe <jpschewe at mtu.net>
> Subject: Re: [antlr-interest] Why is ANTLR getting lost?
> To: antlr-interest <antlr-interest at antlr.org>
> Message-ID: <47BC1DEE.6050005 at mtu.net>
> Content-Type: text/plain; charset="iso-8859-1"
>
> I've figured out that ANTLR is dying in the DFA when it's trying to
> determine which branch of the constraintDecl rule to follow.  Attached
> is the grammar, suggestions on how to resolve this are very welcome.
>
> Test case is here:
>   /**
>    * @throws RecognitionException
>    */
>   @Test
>   public void testConstraintDecl0() throws RecognitionException {
>     final String data = "constraint3: 5.0 <= 6 + 6 * a[1 + 3] * c - 1 <=
> 10.0;";
>
>     final GHOCESLexer lexer = new GHOCESLexer(new ANTLRStringStream(data));
>     final CommonTokenStream tokens = new CommonTokenStream(lexer);
>     final GHOCESParser parser = new GHOCESParser(tokens);
>     final GHOCESParser.constraintDecl_return r = parser.constraintDecl();
>     Assert.assertNotNull(r);
>   }

From r.mark.volkmann at gmail.com  Wed Feb 20 06:54:51 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Wed, 20 Feb 2008 08:54:51 -0600
Subject: [antlr-interest] Understanding Lexer rules
In-Reply-To: <47BC3E51.1010806@gmx.de>
References: <307403.83169.qm@web30605.mail.mud.yahoo.com>
	<c8c997f40802191244o330c0245v4175eb987fb60ec6@mail.gmail.com>
	<20080220081723.5F20411E93A@www.antlr.org>
	<f0fcc6820802200537v4d4f6daal8f7afa2e378d36b3@mail.gmail.com>
	<18b4fcc20802200603o111b13d1h39508ed59d67dd8a@mail.gmail.com>
	<47BC37B3.7080101@gmx.de>
	<f0fcc6820802200635g3efb9e4ek3fda4a03a3b5a98@mail.gmail.com>
	<47BC3E51.1010806@gmx.de>
Message-ID: <f0fcc6820802200654t3c5734b5g9fe0c6d77329735e@mail.gmail.com>

On Feb 20, 2008 8:50 AM, Johannes Luber <jaluber at gmx.de> wrote:
> Mark Volkmann schrieb:
>   > Let's see if I can summarize the rules from this wiki section.
> >
> > If the upcoming characters in the stream match a non-imaginary token
> > defined in a token spec. then that is used. tokens { ... } comes
> > first.
>
> Correct.
>
> > After that, lexer rules are evaluated in the order in which they are
> > specified. The first one that matches the upcoming characters in the
> > stream is used, not the one that matches the greatest number of
> > characters.
>
> No. Rereading the text, I suppose one could be confused about that, as
> it isn't as clear as it could be. Is adding "Longer matches are
> preferred over shorter matches. If one has two tokens KEY='key'; and
> KEYWORD='keyword';, then the input 'keyword' will match KEYWORD, even if
> KEY comes first." enough?

Does the same rule about matching the maximum length apply when the
lexer rules use the cardinality operators (?, * and +)? I recommend
adding something about that and not just showing examples with fixed
literal values.

In case of a tie in the number of characters matched by multiple lexer
rules, does the first one win?

> > After that, literals specified in parser rules are considered. This
> > means that parser rules containing literals will not match the input
> > if there is a lexer rule that matches the same input.
> >
> > Does all that sound correct?
> >
> > At the end of the "How to define tokens" section in the wiki it says
> > that "lexer rules will greedily match the maximum of applicable
> > characters". There is an exception to this. When the patterns ".*" or
> > ".+" appear in a lexer rule, they do no match greedily.
>
> I'll add that.
>
> Johannes

Thanks Johannes!

-- 
R. Mark Volkmann
Object Computing, Inc.

From jaluber at gmx.de  Wed Feb 20 07:05:21 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Wed, 20 Feb 2008 16:05:21 +0100
Subject: [antlr-interest] Understanding Lexer rules
In-Reply-To: <f0fcc6820802200654t3c5734b5g9fe0c6d77329735e@mail.gmail.com>
References: <307403.83169.qm@web30605.mail.mud.yahoo.com>	
	<c8c997f40802191244o330c0245v4175eb987fb60ec6@mail.gmail.com>	
	<20080220081723.5F20411E93A@www.antlr.org>	
	<f0fcc6820802200537v4d4f6daal8f7afa2e378d36b3@mail.gmail.com>	
	<18b4fcc20802200603o111b13d1h39508ed59d67dd8a@mail.gmail.com>	
	<47BC37B3.7080101@gmx.de>	
	<f0fcc6820802200635g3efb9e4ek3fda4a03a3b5a98@mail.gmail.com>	
	<47BC3E51.1010806@gmx.de>
	<f0fcc6820802200654t3c5734b5g9fe0c6d77329735e@mail.gmail.com>
Message-ID: <47BC41B1.704@gmx.de>

Mark Volkmann schrieb:
> On Feb 20, 2008 8:50 AM, Johannes Luber <jaluber at gmx.de> wrote:
>> No. Rereading the text, I suppose one could be confused about that, as
>> it isn't as clear as it could be. Is adding "Longer matches are
>> preferred over shorter matches. If one has two tokens KEY='key'; and
>> KEYWORD='keyword';, then the input 'keyword' will match KEYWORD, even if
>> KEY comes first." enough?
> 
> Does the same rule about matching the maximum length apply when the
> lexer rules use the cardinality operators (?, * and +)? I recommend
> adding something about that and not just showing examples with fixed
> literal values.
 >
> In case of a tie in the number of characters matched by multiple lexer
> rules, does the first one win?

I honestly never thought about that, but I believe that the first one 
has to win, or the "keyword vs. identifier" disambiguation wouldn't 
work. Can you whip up some tests to confirm this with a bigger test set? 
I am short of time. :(

Johannes

From jpschewe at mtu.net  Wed Feb 20 07:14:03 2008
From: jpschewe at mtu.net (Jon Schewe)
Date: Wed, 20 Feb 2008 09:14:03 -0600
Subject: [antlr-interest] Why is ANTLR getting lost?
In-Reply-To: <cb0c557b0802200652ke0f93bx58fe23ada65b0ee6@mail.gmail.com>
References: <cb0c557b0802200652ke0f93bx58fe23ada65b0ee6@mail.gmail.com>
Message-ID: <47BC43BB.3000305@mtu.net>

Thanks, that worked.

Fred wrote:
> If I'm not mistaken this is a know bug in 3.0.1
> You can work around it by using LL(k) rather than LL(*) thereby
> suppressing the construction of the DFA.
> This can be done by adding...
>  options { k=4 }
> ...to the offending rule.
>
> peace
>
>   
>> Date: Wed, 20 Feb 2008 06:32:46 -0600
>> From: Jon Schewe <jpschewe at mtu.net>
>> Subject: Re: [antlr-interest] Why is ANTLR getting lost?
>> To: antlr-interest <antlr-interest at antlr.org>
>> Message-ID: <47BC1DEE.6050005 at mtu.net>
>> Content-Type: text/plain; charset="iso-8859-1"
>>
>> I've figured out that ANTLR is dying in the DFA when it's trying to
>> determine which branch of the constraintDecl rule to follow.  Attached
>> is the grammar, suggestions on how to resolve this are very welcome.
>>
>> Test case is here:
>>   /**
>>    * @throws RecognitionException
>>    */
>>   @Test
>>   public void testConstraintDecl0() throws RecognitionException {
>>     final String data = "constraint3: 5.0 <= 6 + 6 * a[1 + 3] * c - 1 <=
>> 10.0;";
>>
>>     final GHOCESLexer lexer = new GHOCESLexer(new ANTLRStringStream(data));
>>     final CommonTokenStream tokens = new CommonTokenStream(lexer);
>>     final GHOCESParser parser = new GHOCESParser(tokens);
>>     final GHOCESParser.constraintDecl_return r = parser.constraintDecl();
>>     Assert.assertNotNull(r);
>>   }
>>     

-- 
Jon Schewe | http://mtu.net/~jpschewe
If you see an attachment named signature.asc, this is my digital
signature.
See http://www.gnupg.org for more information.

For I am convinced that neither death nor life, neither angels 
nor demons, neither the present nor the future, nor any 
powers, neither height nor depth, nor anything else in all 
creation, will be able to separate us from the love of God that 
is in Christ Jesus our Lord. - Romans 8:38-39


From r.mark.volkmann at gmail.com  Wed Feb 20 07:52:10 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Wed, 20 Feb 2008 09:52:10 -0600
Subject: [antlr-interest] Understanding Lexer rules
In-Reply-To: <47BC41B1.704@gmx.de>
References: <307403.83169.qm@web30605.mail.mud.yahoo.com>
	<c8c997f40802191244o330c0245v4175eb987fb60ec6@mail.gmail.com>
	<20080220081723.5F20411E93A@www.antlr.org>
	<f0fcc6820802200537v4d4f6daal8f7afa2e378d36b3@mail.gmail.com>
	<18b4fcc20802200603o111b13d1h39508ed59d67dd8a@mail.gmail.com>
	<47BC37B3.7080101@gmx.de>
	<f0fcc6820802200635g3efb9e4ek3fda4a03a3b5a98@mail.gmail.com>
	<47BC3E51.1010806@gmx.de>
	<f0fcc6820802200654t3c5734b5g9fe0c6d77329735e@mail.gmail.com>
	<47BC41B1.704@gmx.de>
Message-ID: <f0fcc6820802200752we6c4a81m9bd3ef5e5e99d713@mail.gmail.com>

On Feb 20, 2008 9:05 AM, Johannes Luber <jaluber at gmx.de> wrote:
> Mark Volkmann schrieb:
> > On Feb 20, 2008 8:50 AM, Johannes Luber <jaluber at gmx.de> wrote:
> >> No. Rereading the text, I suppose one could be confused about that, as
> >> it isn't as clear as it could be. Is adding "Longer matches are
> >> preferred over shorter matches. If one has two tokens KEY='key'; and
> >> KEYWORD='keyword';, then the input 'keyword' will match KEYWORD, even if
> >> KEY comes first." enough?
> >
> > Does the same rule about matching the maximum length apply when the
> > lexer rules use the cardinality operators (?, * and +)? I recommend
> > adding something about that and not just showing examples with fixed
> > literal values.
>  >
> > In case of a tie in the number of characters matched by multiple lexer
> > rules, does the first one win?
>
> I honestly never thought about that, but I believe that the first one
> has to win, or the "keyword vs. identifier" disambiguation wouldn't
> work. Can you whip up some tests to confirm this with a bigger test set?
> I am short of time. :(

Yeah, I'll do that. I may not get to it until this weekend though.

-- 
R. Mark Volkmann
Object Computing, Inc.

From jimi at temporal-wave.com  Wed Feb 20 08:28:26 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 20 Feb 2008 08:28:26 -0800
Subject: [antlr-interest] Partitioning Antlr grammar into a couple files
In-Reply-To: <000001c873c1$ab9c9ff0$02d5dfd0$@com>
Message-ID: <"L79041F47490046a19BAB9E8234363C86.1203524934.scalix.temporal-wave.com*"@MHS>

This is a feature of ANTLR 3.1. You can use a snapshot release of this
(see downloads page) and try the import directive.

 

Jim

 

 

 

From: Vitaliy [mailto:Vitaliy at dbsophic.com] 
Sent: Wednesday, February 20, 2008 5:08 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Partitioning Antlr grammar into a couple files

 

Hello,

 

I found no reference about this in the documentation - 

I wonder if it's possible to divide the grammar definition between
multiple number of files - 

 

I've defined a pretty large grammar - around 150 rules, spanning over
1500 lines.

When I first tried to generate the code using AntlrWorks, it just got
stuck, and after adding more memory to the process, it managed to
generate almost 200,000 lines of C# code.

 

Anyway, It's really hard to test \ manage such a big grammar. Is there a
way to split it between a number of files?

 

Thanks,

Vitaliy


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080220/45d5d541/attachment.html 

From jpschewe at mtu.net  Wed Feb 20 08:56:44 2008
From: jpschewe at mtu.net (Jon Schewe)
Date: Wed, 20 Feb 2008 10:56:44 -0600
Subject: [antlr-interest] Why is ANTLR getting lost?
In-Reply-To: <cb0c557b0802200652ke0f93bx58fe23ada65b0ee6@mail.gmail.com>
References: <cb0c557b0802200652ke0f93bx58fe23ada65b0ee6@mail.gmail.com>
Message-ID: <47BC5BCC.7090208@mtu.net>

Ok that worked for one case, however it hasn't worked for another case
that is valid.  I put the options {k=4; } in the rule and I still see a
DFA being constructed and predict called on it.

Fred wrote:
> If I'm not mistaken this is a know bug in 3.0.1
> You can work around it by using LL(k) rather than LL(*) thereby
> suppressing the construction of the DFA.
> This can be done by adding...
>  options { k=4 }
> ...to the offending rule.
>
> peace
>
>   
>> Date: Wed, 20 Feb 2008 06:32:46 -0600
>> From: Jon Schewe <jpschewe at mtu.net>
>> Subject: Re: [antlr-interest] Why is ANTLR getting lost?
>> To: antlr-interest <antlr-interest at antlr.org>
>> Message-ID: <47BC1DEE.6050005 at mtu.net>
>> Content-Type: text/plain; charset="iso-8859-1"
>>
>> I've figured out that ANTLR is dying in the DFA when it's trying to
>> determine which branch of the constraintDecl rule to follow.  Attached
>> is the grammar, suggestions on how to resolve this are very welcome.
>>
>> Test case is here:
>>   /**
>>    * @throws RecognitionException
>>    */
>>   @Test
>>   public void testConstraintDecl0() throws RecognitionException {
>>     final String data = "constraint3: 5.0 <= 6 + 6 * a[1 + 3] * c - 1 <=
>> 10.0;";
>>
>>     final GHOCESLexer lexer = new GHOCESLexer(new ANTLRStringStream(data));
>>     final CommonTokenStream tokens = new CommonTokenStream(lexer);
>>     final GHOCESParser parser = new GHOCESParser(tokens);
>>     final GHOCESParser.constraintDecl_return r = parser.constraintDecl();
>>     Assert.assertNotNull(r);
>>   }
>>     

-- 
Jon Schewe | http://mtu.net/~jpschewe
If you see an attachment named signature.asc, this is my digital
signature.
See http://www.gnupg.org for more information.

For I am convinced that neither death nor life, neither angels 
nor demons, neither the present nor the future, nor any 
powers, neither height nor depth, nor anything else in all 
creation, will be able to separate us from the love of God that 
is in Christ Jesus our Lord. - Romans 8:38-39


From jimi at temporal-wave.com  Wed Feb 20 08:35:04 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 20 Feb 2008 08:35:04 -0800
Subject: [antlr-interest] Why is ANTLR getting lost?
In-Reply-To: <47BC3356.4070400@shmuelhome.mine.nu>
Message-ID: <"L0FD049B0C70840bfBC84EBCC2722C520.1203525332.scalix.temporal-wave.com*"@MHS>

That rule should really be simplified, but try that 3.1 snapshot.

Jim



> -----Original Message-----
> From: shmuel siegel [mailto:antlr at shmuelhome.mine.nu]
> Sent: Wednesday, February 20, 2008 6:04 AM
> 

> I can't tell you why but I can tell you that the dfa predictor is
> failing on
>         (addExpr[true] EQ) => addExpr[true] EQ addExpr[false]
>       | (number LE addExpr[true] LE) => lb=number LE addExpr[false] LE
> ub=number
>       | (addExpr[true] LE) => ae+=addExpr[true] LE ae+=addExpr[false]
> 
> Note that the second alternative satisfies the conditions of the
> condition of the third alternative. If you eliminate the third
> alternative, the rule works. The rule also works if you change the
> third
> alternative to be different then the second, say by adding LE before
> addExpr. I suspect that something is wrong with the dfa predictor.
> 
> 



From jpschewe at mtu.net  Wed Feb 20 09:11:44 2008
From: jpschewe at mtu.net (Jon Schewe)
Date: Wed, 20 Feb 2008 11:11:44 -0600
Subject: [antlr-interest] Why is ANTLR getting lost?
In-Reply-To: <47BC5BCC.7090208@mtu.net>
References: <cb0c557b0802200652ke0f93bx58fe23ada65b0ee6@mail.gmail.com>
	<47BC5BCC.7090208@mtu.net>
Message-ID: <47BC5F50.6040009@mtu.net>

Apparently options don't carry through parens.  I refactored the rule so
that instead of parens I have a separate rule with the cases in it and
that works.

Jon Schewe wrote:
> Ok that worked for one case, however it hasn't worked for another case
> that is valid.  I put the options {k=4; } in the rule and I still see a
> DFA being constructed and predict called on it.
>
> Fred wrote:
>   
>> If I'm not mistaken this is a know bug in 3.0.1
>> You can work around it by using LL(k) rather than LL(*) thereby
>> suppressing the construction of the DFA.
>> This can be done by adding...
>>  options { k=4 }
>> ...to the offending rule.
>>
>> peace
>>
>>   
>>     
>>> Date: Wed, 20 Feb 2008 06:32:46 -0600
>>> From: Jon Schewe <jpschewe at mtu.net>
>>> Subject: Re: [antlr-interest] Why is ANTLR getting lost?
>>> To: antlr-interest <antlr-interest at antlr.org>
>>> Message-ID: <47BC1DEE.6050005 at mtu.net>
>>> Content-Type: text/plain; charset="iso-8859-1"
>>>
>>> I've figured out that ANTLR is dying in the DFA when it's trying to
>>> determine which branch of the constraintDecl rule to follow.  Attached
>>> is the grammar, suggestions on how to resolve this are very welcome.
>>>
>>> Test case is here:
>>>   /**
>>>    * @throws RecognitionException
>>>    */
>>>   @Test
>>>   public void testConstraintDecl0() throws RecognitionException {
>>>     final String data = "constraint3: 5.0 <= 6 + 6 * a[1 + 3] * c - 1 <=
>>> 10.0;";
>>>
>>>     final GHOCESLexer lexer = new GHOCESLexer(new ANTLRStringStream(data));
>>>     final CommonTokenStream tokens = new CommonTokenStream(lexer);
>>>     final GHOCESParser parser = new GHOCESParser(tokens);
>>>     final GHOCESParser.constraintDecl_return r = parser.constraintDecl();
>>>     Assert.assertNotNull(r);
>>>   }
>>>     
>>>       
>
>   

-- 
Jon Schewe | http://mtu.net/~jpschewe
If you see an attachment named signature.asc, this is my digital
signature.
See http://www.gnupg.org for more information.

For I am convinced that neither death nor life, neither angels 
nor demons, neither the present nor the future, nor any 
powers, neither height nor depth, nor anything else in all 
creation, will be able to separate us from the love of God that 
is in Christ Jesus our Lord. - Romans 8:38-39


From darien.hager at etelos-inc.com  Wed Feb 20 09:52:25 2008
From: darien.hager at etelos-inc.com (Darien Hager)
Date: Wed, 20 Feb 2008 09:52:25 -0800
Subject: [antlr-interest] Understanding Lexer rules
In-Reply-To: <47BC3E51.1010806@gmx.de>
References: <307403.83169.qm@web30605.mail.mud.yahoo.com>
	<c8c997f40802191244o330c0245v4175eb987fb60ec6@mail.gmail.com>
	<20080220081723.5F20411E93A@www.antlr.org>
	<f0fcc6820802200537v4d4f6daal8f7afa2e378d36b3@mail.gmail.com>
	<18b4fcc20802200603o111b13d1h39508ed59d67dd8a@mail.gmail.com>
	<47BC37B3.7080101@gmx.de>
	<f0fcc6820802200635g3efb9e4ek3fda4a03a3b5a98@mail.gmail.com>
	<47BC3E51.1010806@gmx.de>
Message-ID: <c8c997f40802200952s3d635b9er53941ff7087ab398@mail.gmail.com>

On 2/20/08, Johannes Luber <jaluber at gmx.de> wrote:
> Mark Volkmann schrieb:
>
> No. Rereading the text, I suppose one could be confused about that, as
>  it isn't as clear as it could be. Is adding "Longer matches are
>  preferred over shorter matches. If one has two tokens KEY='key'; and
>  KEYWORD='keyword';, then the input 'keyword' will match KEYWORD, even if
>  KEY comes first." enough?

I think the reason it is conterintuitive to me is that I assume a
different model for the lexer, and with it comes different assumptions
about behavior.

1, flawed model: The lexer loops through all tokens to find the first
one that matches what it sees when it looks ahead into the character
stream. When it finds one that matches, it moves on to the next point
in the stream and continues.

2, better model: The lexer keeps a set of "still possible" tokens, and
inches through the stream character by character, thinning the set as
appropriate, until only one possibility remains.

Is #2 closer to the actual behavior?
-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are
not the intended recipient, then this is notice that any use,
disclosure, dissemination, distribution or copying is strictly
prohibited. If you have received this message in error please contact
the sender by reply mail and destroy all copies of the original
message.

This e-mail message, including attachments, may contain confidential information for the sole use of the intended recipient(s). If you are not the intended recipient, then this is notice that any use, disclosure, dissemination, distribution or copying is strictly prohibited.  If you have received this message in error please contact the sender by reply mail and destroy all copies of the original message.


From divot_powell at hotmail.com  Wed Feb 20 11:07:52 2008
From: divot_powell at hotmail.com (Daniel Powell)
Date: Wed, 20 Feb 2008 19:07:52 +0000
Subject: [antlr-interest] (no subject)
Message-ID: <BLU122-W1572A2C053B66D661A75BDFD230@phx.gbl>


Hi,

I'm currently making a parser for a project and have encountered an issue I can't find a solution to.

I have made my lexer and that works fine, but when I apply rules I've found an odd situation. The rules are followed exactly up until it reaches the end of all of the rules, and then it ignores all text after that point. Instead I would like it to throw an error because there should not be any text once the final rule has been completed.

A very basic example of my antlr code is below:

   class SmallCParser extends Parser;
   options {
     buildAST=true;
   }

   program
       : start
       ;

   start
       : IDENTIFIER EQUALS INT SEMICOLON
       ;
         class SmallCLexer extends Lexer;

   protected
   CHAR_LIT : ('a'..'z'|'A'..'Z');

   protected
   DIGIT : ('0'..'9');

   IDENTIFIER : CHAR_LIT (CHAR_LIT | DIGIT)*;
   INT   : (DIGIT)+;

   EQUALS : '=';
   SEMICOLON : ';';

This code works to the extent described above in that it will happily accept the code 'a=5;' as it should do, but will also accept the code 'a=5;hfjdshfkjs'. Instead I would like it to throw an error when it reaches the hfjdshfkjs. The hfjdshfkjs does not make it to the AST so the final code would be correct in this circumstance but not in all and I would like it to be able to point out an error to the programmer because the extra code should not be there..

Any advice would be greatly appreciated..


Thanks

Dan
divot underscore powell at hotmail dot com


_________________________________________________________________
Get Hotmail on your mobile, text MSN to 63463!
http://mobile.uk.msn.com/pc/mail.aspx

From Ari.Steinberg at EMBARCADERO.COM  Wed Feb 20 11:18:47 2008
From: Ari.Steinberg at EMBARCADERO.COM (Ari Steinberg)
Date: Wed, 20 Feb 2008 14:18:47 -0500
Subject: [antlr-interest] (no subject)
In-Reply-To: <BLU122-W1572A2C053B66D661A75BDFD230@phx.gbl>
References: <BLU122-W1572A2C053B66D661A75BDFD230@phx.gbl>
Message-ID: <4B7C684C16970541B6EBEE81E7CB799D0116898B@ettoma02.embarcadero.com>

Add EOF to the end of your rule program (or start) rule.

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Daniel Powell
Sent: Wednesday, February 20, 2008 2:08 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] (no subject)


Hi,

I'm currently making a parser for a project and have encountered an
issue I can't find a solution to.

I have made my lexer and that works fine, but when I apply rules I've
found an odd situation. The rules are followed exactly up until it
reaches the end of all of the rules, and then it ignores all text after
that point. Instead I would like it to throw an error because there
should not be any text once the final rule has been completed.

A very basic example of my antlr code is below:

   class SmallCParser extends Parser;
   options {
     buildAST=true;
   }

   program
       : start
       ;

   start
       : IDENTIFIER EQUALS INT SEMICOLON
       ;
         class SmallCLexer extends Lexer;

   protected
   CHAR_LIT : ('a'..'z'|'A'..'Z');

   protected
   DIGIT : ('0'..'9');

   IDENTIFIER : CHAR_LIT (CHAR_LIT | DIGIT)*;
   INT   : (DIGIT)+;

   EQUALS : '=';
   SEMICOLON : ';';

This code works to the extent described above in that it will happily
accept the code 'a=5;' as it should do, but will also accept the code
'a=5;hfjdshfkjs'. Instead I would like it to throw an error when it
reaches the hfjdshfkjs. The hfjdshfkjs does not make it to the AST so
the final code would be correct in this circumstance but not in all and
I would like it to be able to point out an error to the programmer
because the extra code should not be there..

Any advice would be greatly appreciated..


Thanks

Dan
divot underscore powell at hotmail dot com


_________________________________________________________________
Get Hotmail on your mobile, text MSN to 63463!
http://mobile.uk.msn.com/pc/mail.aspx
CONFIDENTIALITY NOTICE: This email message is for the sole use of the intended recipient(s) 
and may contain confidential and privileged information. Any unauthorized review, use, 
disclosure or distribution is prohibited. If you are not the intended recipient, please 
contact the sender by reply email and destroy all copies of the original message.


From divot_powell at hotmail.com  Wed Feb 20 11:34:12 2008
From: divot_powell at hotmail.com (Daniel Powell)
Date: Wed, 20 Feb 2008 19:34:12 +0000
Subject: [antlr-interest] (no subject)
In-Reply-To: <4B7C684C16970541B6EBEE81E7CB799D0116898B@ettoma02.embarcadero.com>
References: <BLU122-W1572A2C053B66D661A75BDFD230@phx.gbl>
	<4B7C684C16970541B6EBEE81E7CB799D0116898B@ettoma02.embarcadero.com>
Message-ID: <BLU122-W21E91EC7F4963644303AACFD230@phx.gbl>


Thanks, unfortunately I've already tried that one. Whilst it does catch the error of the jargon, it also creates the error "exception: line 1:5: unexpected char: 0xA" with legitimate code, i.e. 'a=5;'. Any thoughts?

Dan

----------------------------------------
> Date: Wed, 20 Feb 2008 14:18:47 -0500
> From: Ari.Steinberg at EMBARCADERO.COM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] (no subject)
> 
> Add EOF to the end of your rule program (or start) rule.
> 
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Daniel Powell
> Sent: Wednesday, February 20, 2008 2:08 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] (no subject)
> 
> 
> Hi,
> 
> I'm currently making a parser for a project and have encountered an
> issue I can't find a solution to.
> 
> I have made my lexer and that works fine, but when I apply rules I've
> found an odd situation. The rules are followed exactly up until it
> reaches the end of all of the rules, and then it ignores all text after
> that point. Instead I would like it to throw an error because there
> should not be any text once the final rule has been completed.
> 
> A very basic example of my antlr code is below:
> 
>    class SmallCParser extends Parser;
>    options {
>      buildAST=true;
>    }
> 
>    program
>        : start
>        ;
> 
>    start
>        : IDENTIFIER EQUALS INT SEMICOLON
>        ;
>          class SmallCLexer extends Lexer;
> 
>    protected
>    CHAR_LIT : ('a'..'z'|'A'..'Z');
> 
>    protected
>    DIGIT : ('0'..'9');
> 
>    IDENTIFIER : CHAR_LIT (CHAR_LIT | DIGIT)*;
>    INT   : (DIGIT)+;
> 
>    EQUALS : '=';
>    SEMICOLON : ';';
> 
> This code works to the extent described above in that it will happily
> accept the code 'a=5;' as it should do, but will also accept the code
> 'a=5;hfjdshfkjs'. Instead I would like it to throw an error when it
> reaches the hfjdshfkjs. The hfjdshfkjs does not make it to the AST so
> the final code would be correct in this circumstance but not in all and
> I would like it to be able to point out an error to the programmer
> because the extra code should not be there..
> 
> Any advice would be greatly appreciated..
> 
> 
> Thanks
> 
> Dan
> divot underscore powell at hotmail dot com
> 
> 
> _________________________________________________________________
> Get Hotmail on your mobile, text MSN to 63463!
> http://mobile.uk.msn.com/pc/mail.aspx
> CONFIDENTIALITY NOTICE: This email message is for the sole use of the intended recipient(s) 
> and may contain confidential and privileged information. Any unauthorized review, use, 
> disclosure or distribution is prohibited. If you are not the intended recipient, please 
> contact the sender by reply email and destroy all copies of the original message.
> 

_________________________________________________________________
Free games, great prizes - get gaming at Gamesbox. 
http://www.searchgamesbox.com

From antlr at mirality.co.nz  Wed Feb 20 11:55:06 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 21 Feb 2008 08:55:06 +1300
Subject: [antlr-interest] (no subject)
In-Reply-To: <BLU122-W21E91EC7F4963644303AACFD230@phx.gbl>
References: <BLU122-W1572A2C053B66D661A75BDFD230@phx.gbl>
	<4B7C684C16970541B6EBEE81E7CB799D0116898B@ettoma02.embarcadero.com>
	<BLU122-W21E91EC7F4963644303AACFD230@phx.gbl>
Message-ID: <20080220195549.AD49811ED7B@www.antlr.org>

At 08:34 21/02/2008, Daniel Powell wrote:
 >
 >Thanks, unfortunately I've already tried that one. Whilst it 
does
 >catch the error of the jargon, it also creates the error
 >"exception: line 1:5: unexpected char: 0xA" with legitimate 
code,
 >i.e. 'a=5;'. Any thoughts?

Character 0x0A is a newline, so clearly you don't have a lexer 
rule that can match newlines, so it can't create a token for 
it.  Add one and the problem will go away.

If newlines / whitespace isn't significant in your language, then 
either skip() it or put it onto a hidden channel.


From antlr at mirality.co.nz  Wed Feb 20 11:57:18 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 21 Feb 2008 08:57:18 +1300
Subject: [antlr-interest] (no subject)
In-Reply-To: <7.1.0.9.0.20080221085317.0620db68@mirality.co.nz>
References: <BLU122-W1572A2C053B66D661A75BDFD230@phx.gbl>
	<4B7C684C16970541B6EBEE81E7CB799D0116898B@ettoma02.embarcadero.com>
	<BLU122-W21E91EC7F4963644303AACFD230@phx.gbl>
	<7.1.0.9.0.20080221085317.0620db68@mirality.co.nz>
Message-ID: <20080220195730.D076211EDAC@www.antlr.org>

Mere moments ago, I wrote:
 >If newlines / whitespace isn't significant in your language, 
then
 >either skip() it or put it onto a hidden channel.

Sorry, didn't notice you're using ANTLR v2.  The "hidden channel" 
stuff is a v3-ism; in v2 skipping is your only option.


From troy.daniels at baesystems.com  Wed Feb 20 12:02:16 2008
From: troy.daniels at baesystems.com (Daniels, Troy (US SSA))
Date: Wed, 20 Feb 2008 15:02:16 -0500
Subject: [antlr-interest] (no subject)
References: <BLU122-W1572A2C053B66D661A75BDFD230@phx.gbl><4B7C684C16970541B6EBEE81E7CB799D0116898B@ettoma02.embarcadero.com>
	<BLU122-W21E91EC7F4963644303AACFD230@phx.gbl>
Message-ID: <40CBD611A793EA438464B91E749DD8B003B19ECD@blums0017.bluelnk.net>

 

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org 
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Daniel Powell
> Sent: Wednesday, February 20, 2008 2:34 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] (no subject)
> 
> 
> Thanks, unfortunately I've already tried that one. Whilst it 
> does catch the error of the jargon, it also creates the error 
> "exception: line 1:5: unexpected char: 0xA" with legitimate 
> code, i.e. 'a=5;'. Any thoughts?

Are you sure that you're input is 

'a=5;'

and not

'a=5;
'

with an extra blank line at the end?  0xA is either CR or LF, so I'm
guessing you're probably (possibly accidentally) including an newline at
the end of your input.

Most likely, you want to fix this by adding a rule to ignore whitespace.

Troy

> 
> Dan
> 
> ----------------------------------------
> > Date: Wed, 20 Feb 2008 14:18:47 -0500
> > From: Ari.Steinberg at EMBARCADERO.COM
> > To: antlr-interest at antlr.org
> > Subject: Re: [antlr-interest] (no subject)
> > 
> > Add EOF to the end of your rule program (or start) rule.
> > 
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org 
> > [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Daniel Powell
> > Sent: Wednesday, February 20, 2008 2:08 PM
> > To: antlr-interest at antlr.org
> > Subject: [antlr-interest] (no subject)
> > 
> > 
> > Hi,
> > 
> > I'm currently making a parser for a project and have encountered an 
> > issue I can't find a solution to.
> > 
> > I have made my lexer and that works fine, but when I apply 
> rules I've 
> > found an odd situation. The rules are followed exactly up until it 
> > reaches the end of all of the rules, and then it ignores all text 
> > after that point. Instead I would like it to throw an error because 
> > there should not be any text once the final rule has been completed.
> > 
> > A very basic example of my antlr code is below:
> > 
> >    class SmallCParser extends Parser;
> >    options {
> >      buildAST=true;
> >    }
> > 
> >    program
> >        : start
> >        ;
> > 
> >    start
> >        : IDENTIFIER EQUALS INT SEMICOLON
> >        ;
> >          class SmallCLexer extends Lexer;
> > 
> >    protected
> >    CHAR_LIT : ('a'..'z'|'A'..'Z');
> > 
> >    protected
> >    DIGIT : ('0'..'9');
> > 
> >    IDENTIFIER : CHAR_LIT (CHAR_LIT | DIGIT)*;
> >    INT   : (DIGIT)+;
> > 
> >    EQUALS : '=';
> >    SEMICOLON : ';';
> > 
> > This code works to the extent described above in that it 
> will happily 
> > accept the code 'a=5;' as it should do, but will also 
> accept the code 
> > 'a=5;hfjdshfkjs'. Instead I would like it to throw an error when it 
> > reaches the hfjdshfkjs. The hfjdshfkjs does not make it to 
> the AST so 
> > the final code would be correct in this circumstance but not in all 
> > and I would like it to be able to point out an error to the 
> programmer 
> > because the extra code should not be there..
> > 
> > Any advice would be greatly appreciated..
> > 
> > 
> > Thanks
> > 
> > Dan
> > divot underscore powell at hotmail dot com
> > 
> > 
> > _________________________________________________________________
> > Get Hotmail on your mobile, text MSN to 63463!
> > http://mobile.uk.msn.com/pc/mail.aspx
> > CONFIDENTIALITY NOTICE: This email message is for the sole 
> use of the 
> > intended recipient(s) and may contain confidential and privileged 
> > information. Any unauthorized review, use, disclosure or 
> distribution 
> > is prohibited. If you are not the intended recipient, 
> please contact the sender by reply email and destroy all 
> copies of the original message.
> > 
> 
> _________________________________________________________________
> Free games, great prizes - get gaming at Gamesbox. 
> http://www.searchgamesbox.com
> 

From divot_powell at hotmail.com  Wed Feb 20 12:05:26 2008
From: divot_powell at hotmail.com (Daniel Powell)
Date: Wed, 20 Feb 2008 20:05:26 +0000
Subject: [antlr-interest] (no subject)
In-Reply-To: <BAY0-MC7-F17I3yrURa0026ccf5@bay0-mc7-f17.bay0.hotmail.com>
References: <BLU122-W1572A2C053B66D661A75BDFD230@phx.gbl>
	<4B7C684C16970541B6EBEE81E7CB799D0116898B@ettoma02.embarcadero.com>
	<BLU122-W21E91EC7F4963644303AACFD230@phx.gbl>
	<7.1.0.9.0.20080221085317.0620db68@mirality.co.nz> 
	<BAY0-MC7-F17I3yrURa0026ccf5@bay0-mc7-f17.bay0.hotmail.com>
Message-ID: <BLU122-W23D0BE0B8456879CDBE17FFD230@phx.gbl>


That did it, thanks so much..

Dan
----------------------------------------
> Date: Thu, 21 Feb 2008 08:57:18 +1300
> To: divot_powell at hotmail.com; antlr-interest at antlr.org
> From: antlr at mirality.co.nz
> Subject: Re: [antlr-interest] (no subject)
> 
> Mere moments ago, I wrote:
> >If newlines / whitespace isn't significant in your language, 
> then
> >either skip() it or put it onto a hidden channel.
> 
> Sorry, didn't notice you're using ANTLR v2.  The "hidden channel" 
> stuff is a v3-ism; in v2 skipping is your only option.
> 

_________________________________________________________________
Who's friends with who and co-starred in what?
http://www.searchgamesbox.com/celebrityseparation.shtml

From guntiso at latnet.lv  Wed Feb 20 12:37:49 2008
From: guntiso at latnet.lv (Guntis Ozols)
Date: Wed, 20 Feb 2008 22:37:49 +0200
Subject: [antlr-interest] RFE: warn if root rule is missing (no EOF)
Message-ID: <1203539869.47bc8f9dac011@clients.latnet.lv>




From jimi at temporal-wave.com  Wed Feb 20 12:14:45 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 20 Feb 2008 12:14:45 -0800
Subject: [antlr-interest] RFE: warn if root rule is missing (no EOF)
In-Reply-To: <1203539869.47bc8f9dac011@clients.latnet.lv>
Message-ID: <"LB8F4CC78AC3E4e6cAFA5E65A5F89604E.1203538503.scalix.temporal-wave.com*"@MHS>

This is not a valid thing to do. Not everyone WANTs a rule to end in 
EOF.

Jim

> -----Original Message-----
> From: Guntis Ozols [mailto:guntiso at latnet.lv]
> Sent: Wednesday, February 20, 2008 12:38 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] RFE: warn if root rule is missing (no EOF)
> 
> 
> 



From lgcraymer at yahoo.com  Wed Feb 20 12:53:25 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Wed, 20 Feb 2008 12:53:25 -0800 (PST)
Subject: [antlr-interest] Understanding Lexer rules
Message-ID: <47578.48862.qm@web55908.mail.re3.yahoo.com>

#2 is a pretty fair way of describing what a DFA does (how ANTLR's LL(*) works).  Additionally, ANTLR automatically generates an mTokens rule which is an exhaustive list of TOKEN rules as alternatives :  
mTokens : A | B | C .. Z ;

In cases of ambiguity, the ordering of alternatives matters; for the lexer, that means the order in which they appear in the mTokens rule.  At present, I believe that that order reflects the order in which the rules are defined (IIRC, the rule names are kept in a OrderedHashSet).

--Loring

----- Original Message ----
> From: Darien Hager <darien.hager at etelos-inc.com>
> To: antlr-interest at antlr.org
> Sent: Wednesday, February 20, 2008 9:52:25 AM
> Subject: Re: [antlr-interest] Understanding Lexer rules
> 
> On 2/20/08, Johannes Luber  wrote:
> > Mark Volkmann schrieb:
> >
> > No. Rereading the text, I suppose one could be confused about that, as
> >  it isn't as clear as it could be. Is adding "Longer matches are
> >  preferred over shorter matches. If one has two tokens KEY='key'; and
> >  KEYWORD='keyword';, then the input 'keyword' will match KEYWORD, even if
> >  KEY comes first." enough?
> 
> I think the reason it is conterintuitive to me is that I assume a
> different model for the lexer, and with it comes different assumptions
> about behavior.
> 
> 1, flawed model: The lexer loops through all tokens to find the first
> one that matches what it sees when it looks ahead into the character
> stream. When it finds one that matches, it moves on to the next point
> in the stream and continues.
> 
> 2, better model: The lexer keeps a set of "still possible" tokens, and
> inches through the stream character by character, thinning the set as
> appropriate, until only one possibility remains.
> 
> Is #2 closer to the actual behavior?
> -- 
> Darien Hager
> Developer
> Etelos, Inc.
> darien at etelos.com
> 
> http://www.etelos.com
> "Revolutionizing the way applications are developed, distributed and consumed."
> 
> This e-mail message, including attachments, may contain confidential
> information for the sole use of the intended recipient(s). If you are
> not the intended recipient, then this is notice that any use,
> disclosure, dissemination, distribution or copying is strictly
> prohibited. If you have received this message in error please contact
> the sender by reply mail and destroy all copies of the original
> message.
> 
> This e-mail message, including attachments, may contain confidential information 
> for the sole use of the intended recipient(s). If you are not the intended 
> recipient, then this is notice that any use, disclosure, dissemination, 
> distribution or copying is strictly prohibited.  If you have received this 
> message in error please contact the sender by reply mail and destroy all copies 
> of the original message.
> 
> 




      ____________________________________________________________________________________
Looking for last minute shopping deals?  
Find them fast with Yahoo! Search.  http://tools.search.yahoo.com/newsearch/category.php?category=shopping

From guntiso at latnet.lv  Wed Feb 20 14:58:42 2008
From: guntiso at latnet.lv (Guntis Ozols)
Date: Thu, 21 Feb 2008 00:58:42 +0200
Subject: [antlr-interest] RFE: warn if root rule is missing (no EOF)
In-Reply-To: <"LB8F4CC78AC3E4e6cAFA5E65A5F89604E.1203538503.scalix.temporal-wave.com*"@MHS>
References: <"LB8F4CC78AC3E4e6cAFA5E65A5F89604E.1203538503.scalix.temporal-wave.com*"@MHS>
Message-ID: <1203548322.47bcb0a2789d7@clients.latnet.lv>

> This is not a valid thing to do.
> Not everyone WANTs a rule to end in EOF.
>
> Jim

Of course this is not a valid thing to do if you want to
boost trafic for this list, keep newbies puzzled and
everyone else on this list busy.

I am subscribed to this list only for few months,
and seen this EOF issue (and other issues)
pop up numerous times.

To keep everyone happy, there could be command line option
'help-dummies', which could enable this and other warnings.
Hopefully it can be 'on' by default.

Guntis


From darien.hager at etelos-inc.com  Wed Feb 20 15:00:46 2008
From: darien.hager at etelos-inc.com (Darien Hager)
Date: Wed, 20 Feb 2008 15:00:46 -0800
Subject: [antlr-interest] Understanding Lexer rules
In-Reply-To: <47578.48862.qm@web55908.mail.re3.yahoo.com>
References: <47578.48862.qm@web55908.mail.re3.yahoo.com>
Message-ID: <c8c997f40802201500p1eac58f5l5e4b167c7b8fbf17@mail.gmail.com>

[Drat. Yet again I click reply and don't fix the cc/to fields.]

Loring Craymer wrote:
>  In cases of ambiguity, the ordering of alternatives matters; for the lexer, that
> means the order in which they appear in the mTokens rule.  At present, I
> believe that that order reflects the order in which the rules are defined (IIRC, the
> rule names are kept in a OrderedHashSet).


Yeah, I'm not so good with the the DFA diagrams and theory. Okay, so
 to revise my mental-model-of-thumb:

 "The lexer keeps a set of "still possible" tokens, and inches through
the stream character by character. Each time, it iterates through the
remaining token definitions (in the order the appear in the grammar)
and removes the ones which do not match. It does some more checks so
it knows if it should error or not before starting anew, but if a
token is emitted it will have been that last-one-standing. "

This would explain why order only matters when two token definitions
have both ambiguity and equal length.

Ergo, if you have:

A: 'test' '0'..'9' ;
B: 'test2';
Z: 'a'..'z';

The parser will take the string "test2a" and generate  [A,Z].

If tokens were defined in the order BAZ inside the grammar, the lexer
would generate [B,Z]. (Not yet tested.)

-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are
not the intended recipient, then this is notice that any use,
disclosure, dissemination, distribution or copying is strictly
prohibited. If you have received this message in error please contact
the sender by reply mail and destroy all copies of the original
message.

This e-mail message, including attachments, may contain confidential information for the sole use of the intended recipient(s). If you are not the intended recipient, then this is notice that any use, disclosure, dissemination, distribution or copying is strictly prohibited.  If you have received this message in error please contact the sender by reply mail and destroy all copies of the original message.


From lgcraymer at yahoo.com  Wed Feb 20 15:38:33 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Wed, 20 Feb 2008 15:38:33 -0800 (PST)
Subject: [antlr-interest] RFE: warn if root rule is missing (no EOF)
Message-ID: <121291.63208.qm@web55912.mail.re3.yahoo.com>

I think that you miss Jim's point.  It is not necessary for a grammar to have a rule that references EOF.  For that matter, it is possible to have rules reference EOF without being root rules (I have to admit, though, that I have never seen an instance where this would make sense).  All that the EOF does is force a rule to read to end-of-file or throw a "NoViableAlt" exception.

--Loring

----- Original Message ----
> From: Guntis Ozols <guntiso at latnet.lv>
> To: antlr-interest at antlr.org
> Sent: Wednesday, February 20, 2008 2:58:42 PM
> Subject: Re: [antlr-interest] RFE: warn if root rule is missing (no EOF)
> 
> This is not a valid thing to do.
> > Not everyone WANTs a rule to end in EOF.
> >
> > Jim
> 
> Of course this is not a valid thing to do if you want to
> boost trafic for this list, keep newbies puzzled and
> everyone else on this list busy.
> 
> I am subscribed to this list only for few months,
> and seen this EOF issue (and other issues)
> pop up numerous times.
> 
> To keep everyone happy, there could be command line option
> 'help-dummies', which could enable this and other warnings.
> Hopefully it can be 'on' by default.
> 
> Guntis
> 
> 




      ____________________________________________________________________________________
Looking for last minute shopping deals?  
Find them fast with Yahoo! Search.  http://tools.search.yahoo.com/newsearch/category.php?category=shopping

From troy.daniels at baesystems.com  Wed Feb 20 16:27:08 2008
From: troy.daniels at baesystems.com (Daniels, Troy (US SSA))
Date: Wed, 20 Feb 2008 19:27:08 -0500
Subject: [antlr-interest] RFE: warn if root rule is missing (no EOF)
References: <121291.63208.qm@web55912.mail.re3.yahoo.com>
Message-ID: <40CBD611A793EA438464B91E749DD8B003B1A04D@blums0017.bluelnk.net>

Both of you are right.  You're making different points.

1.  Not every grammar needs to reference EOF.  If your grammar does not
reference EOF and does exactly what you want it to do, it should not
generate a warning.

2.  Not adding EOF is a common beginner mistake and generates many,
similar messages to the email list.  Something should be done so that
beginners are aware that (almost always) you want to end your base rule
with EOF.


A reasonable solution to both points is a command line option that
prints an warning if no rule references EOF.  The warning should be
worded with the expectation that most users who see it will be new to
the tool.

"New" users will see the warning and add an EOF to their main rule,
rather than spending an hour trying to figure out why it doesn't work,
then bothering all of us with an email.

"Advanced" users who know that their grammar does not reference EOF and
why this is correct will be able to disable the option and suppress the
warning.  

Troy

 

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org 
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Loring Craymer
> Sent: Wednesday, February 20, 2008 6:39 PM
> To: Guntis Ozols; antlr-interest at antlr.org
> Subject: Re: [antlr-interest] RFE: warn if root rule is 
> missing (no EOF)
> 
> I think that you miss Jim's point.  It is not necessary for a 
> grammar to have a rule that references EOF.  For that matter, 
> it is possible to have rules reference EOF without being root 
> rules (I have to admit, though, that I have never seen an 
> instance where this would make sense).  All that the EOF does 
> is force a rule to read to end-of-file or throw a 
> "NoViableAlt" exception.
> 
> --Loring
> 
> ----- Original Message ----
> > From: Guntis Ozols <guntiso at latnet.lv>
> > To: antlr-interest at antlr.org
> > Sent: Wednesday, February 20, 2008 2:58:42 PM
> > Subject: Re: [antlr-interest] RFE: warn if root rule is missing (no 
> > EOF)
> > 
> > This is not a valid thing to do.
> > > Not everyone WANTs a rule to end in EOF.
> > >
> > > Jim
> > 
> > Of course this is not a valid thing to do if you want to 
> boost trafic 
> > for this list, keep newbies puzzled and everyone else on this list 
> > busy.
> > 
> > I am subscribed to this list only for few months, and seen this EOF 
> > issue (and other issues) pop up numerous times.
> > 
> > To keep everyone happy, there could be command line option 
> > 'help-dummies', which could enable this and other warnings.
> > Hopefully it can be 'on' by default.
> > 
> > Guntis
> > 
> > 
> 
> 
> 
> 
>       
> ______________________________________________________________
> ______________________
> Looking for last minute shopping deals?  
> Find them fast with Yahoo! Search.  
> http://tools.search.yahoo.com/newsearch/category.php?category=shopping
> 

From lgcraymer at yahoo.com  Wed Feb 20 17:42:24 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Wed, 20 Feb 2008 17:42:24 -0800 (PST)
Subject: [antlr-interest] RFE: warn if root rule is missing (no EOF)
Message-ID: <792259.90598.qm@web55910.mail.re3.yahoo.com>

Troy--

Usually, it is not the "not adding EOF" that is a beginner's mistake, it is the structuring of a grammar to require an explicit EOF.  That is, the top level rule depends on a stop marker, such as "}", to terminate, and processing may stop before an EOF is reached.  The only time your grammar needs an  EOF is to consume tokens from such a stop marker to the end of file; I find that rare.

--Loring


----- Original Message ----
> From: "Daniels, Troy (US SSA)" <troy.daniels at baesystems.com>
> To: Loring Craymer <lgcraymer at yahoo.com>; Guntis Ozols <guntiso at latnet.lv>; antlr-interest at antlr.org
> Sent: Wednesday, February 20, 2008 4:27:08 PM
> Subject: RE: [antlr-interest] RFE: warn if root rule is missing (no EOF)
> 
> Both of you are right.  You're making different points.
> 
> 1.  Not every grammar needs to reference EOF.  If your grammar does not
> reference EOF and does exactly what you want it to do, it should not
> generate a warning.
> 
> 2.  Not adding EOF is a common beginner mistake and generates many,
> similar messages to the email list.  Something should be done so that
> beginners are aware that (almost always) you want to end your base rule
> with EOF.
> 
> 
> A reasonable solution to both points is a command line option that
> prints an warning if no rule references EOF.  The warning should be
> worded with the expectation that most users who see it will be new to
> the tool.
> 
> "New" users will see the warning and add an EOF to their main rule,
> rather than spending an hour trying to figure out why it doesn't work,
> then bothering all of us with an email.
> 
> "Advanced" users who know that their grammar does not reference EOF and
> why this is correct will be able to disable the option and suppress the
> warning.  
> 
> Troy
> 
>  
> 
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org 
> > [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Loring Craymer
> > Sent: Wednesday, February 20, 2008 6:39 PM
> > To: Guntis Ozols; antlr-interest at antlr.org
> > Subject: Re: [antlr-interest] RFE: warn if root rule is 
> > missing (no EOF)
> > 
> > I think that you miss Jim's point.  It is not necessary for a 
> > grammar to have a rule that references EOF.  For that matter, 
> > it is possible to have rules reference EOF without being root 
> > rules (I have to admit, though, that I have never seen an 
> > instance where this would make sense).  All that the EOF does 
> > is force a rule to read to end-of-file or throw a 
> > "NoViableAlt" exception.
> > 
> > --Loring
> > 
> > ----- Original Message ----
> > > From: Guntis Ozols 
> > > To: antlr-interest at antlr.org
> > > Sent: Wednesday, February 20, 2008 2:58:42 PM
> > > Subject: Re: [antlr-interest] RFE: warn if root rule is missing (no 
> > > EOF)
> > > 
> > > This is not a valid thing to do.
> > > > Not everyone WANTs a rule to end in EOF.
> > > >
> > > > Jim
> > > 
> > > Of course this is not a valid thing to do if you want to 
> > boost trafic 
> > > for this list, keep newbies puzzled and everyone else on this list 
> > > busy.
> > > 
> > > I am subscribed to this list only for few months, and seen this EOF 
> > > issue (and other issues) pop up numerous times.
> > > 
> > > To keep everyone happy, there could be command line option 
> > > 'help-dummies', which could enable this and other warnings.
> > > Hopefully it can be 'on' by default.
> > > 
> > > Guntis
> > > 
> > > 
> > 
> > 
> > 
> > 
> >       
> > ______________________________________________________________
> > ______________________
> > Looking for last minute shopping deals?  
> > Find them fast with Yahoo! Search.  
> > http://tools.search.yahoo.com/newsearch/category.php?category=shopping
> > 
> 




      ____________________________________________________________________________________
Looking for last minute shopping deals?  
Find them fast with Yahoo! Search.  http://tools.search.yahoo.com/newsearch/category.php?category=shopping

From ivanhoeabrahams at gmail.com  Thu Feb 21 00:42:09 2008
From: ivanhoeabrahams at gmail.com (Ivanhoe Abrahams)
Date: Thu, 21 Feb 2008 10:42:09 +0200
Subject: [antlr-interest] MismatchedTokenException
Message-ID: <dc0c70840802210042g744126c9hb38241579d57bf49@mail.gmail.com>

Hi

I am new to Antlr and am using  "The Definitive ANTLR Reference" as a
reference,
In that book on page 238 it states that MismatchedTokenException "indicates
that the parser was looking for a particular symbol that it did not find at
the current input position".

Now, reading that, I would assume that when a MismatchedTokenException
occurs, I would be able to retrieve the line and column number of the input
position described in the above definition, but I keep getting -1 for
charPositionInLine field and 0 for the line field of that Exception. Could
anyone please explain to me how I can get the correct line and column number
for the MismatchedTokenException or if there is some othe place where I can
get that info?
BTW when my parser encounters a NoViableAltException I do get the correct
information...

Thank you in advance..

PS. The book has been really helpful.
Ivanhoe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080221/ddd5f98f/attachment.html 

From antlr at mirality.co.nz  Thu Feb 21 01:59:46 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 21 Feb 2008 22:59:46 +1300
Subject: [antlr-interest] RFE: warn if root rule is missing (no EOF)
In-Reply-To: <792259.90598.qm@web55910.mail.re3.yahoo.com>
References: <792259.90598.qm@web55910.mail.re3.yahoo.com>
Message-ID: <20080221100001.288AC11ED89@www.antlr.org>

At 14:42 21/02/2008, Loring Craymer wrote:
 >
 >Usually, it is not the "not adding EOF" that is a beginner's
 >mistake, it is the structuring of a grammar to require an 
explicit
 >EOF.  That is, the top level rule depends on a stop marker, such 
as
 >"}", to terminate, and processing may stop before an EOF is
 >reached.  The only time your grammar needs an  EOF is to consume 

 >tokens from such a stop marker to the end of file; I find that
 >rare.

I think it's more commonly used in the "I want this to throw an 
error if there's unrecognisable junk at the end of the input" 
sense.  Which you could actually do by checking for unconsumed 
input afterwards, but adding the EOF is easier.

EOFs are sometimes useful elsewhere (eg. as a possible terminator 
for a single-line-comment) as well.


From amohombe at yahoo.com  Thu Feb 21 03:55:33 2008
From: amohombe at yahoo.com (Ahmed Mohombe)
Date: Thu, 21 Feb 2008 12:55:33 +0100
Subject: [antlr-interest] The antlrworks-1.1.7.jar seems to be corrupt!
Message-ID: <fpjorn$50l$1@ger.gmane.org>

Hi,

Everytime  I download antlrworks-1.1.7.jar and try to open it, I get:
"Error in packed file ..."

Or trying to run it with java -jar, I get:
"Invalid or corrupt jarfile antlrworks-1.1.7.jar"

I'm not sure what's the problem:
- the download? (I tried several times, from different places with the same result).
- some strange encoding/conversion?
- or the file it's corrupt on your server already?

Could you please pack it in a nice zip?
E.g. antlrworks-1.1.7-bin.zip
ANT generates everything you need, so no additional manual work is required.

Thanks in advance,

Ahmed.


From guntiso at latnet.lv  Thu Feb 21 05:56:35 2008
From: guntiso at latnet.lv (Guntis Ozols)
Date: Thu, 21 Feb 2008 15:56:35 +0200
Subject: [antlr-interest] The antlrworks-1.1.7.jar seems to be corrupt!
In-Reply-To: <fpjorn$50l$1@ger.gmane.org>
References: <fpjorn$50l$1@ger.gmane.org>
Message-ID: <1203602195.47bd831393fb2@clients.latnet.lv>

java -jar antlrworks-1.1.7.jar works for me.
Is your system healthy (no viruses etc)?
Is your java OK (I use 1.6)?

> Everytime  I download antlrworks-1.1.7.jar and try to open it, I get:
> "Error in packed file ..."
>
> Or trying to run it with java -jar, I get:
> "Invalid or corrupt jarfile antlrworks-1.1.7.jar"
>
> I'm not sure what's the problem:
> - the download? (I tried several times, from different places with the same
> result).
> - some strange encoding/conversion?
> - or the file it's corrupt on your server already?
>
> Could you please pack it in a nice zip?
> E.g. antlrworks-1.1.7-bin.zip
> ANT generates everything you need, so no additional manual work is required.
>
> Thanks in advance,
>
> Ahmed.



From ed.sykes at gmail.com  Thu Feb 21 06:16:33 2008
From: ed.sykes at gmail.com (Ed Sykes)
Date: Thu, 21 Feb 2008 14:16:33 +0000
Subject: [antlr-interest] Problem catching exceptions in c# generated code
Message-ID: <d50c5150802210616q30ff98c1m6b8e6a521e04a00b@mail.gmail.com>

Hi everyone,

first post here, so hello everyone :)

I've been using antlr with the c# generator for a month or so and i have a
problem that i now need to solve. The problem is that despite surrounding
the calls to the expression parser in a try catch i don't seem to be able to
catch the exceptions thrown. e.g.:

try
{
    MetricellKPIExpressionParser.expr_return result = parser.expr();
    CommonTree parsedTree = (CommonTree)(result.Tree);
}
catch(Exception ex)
{
    isValid = false;
}

will not catch any of the exceptions thrown by the parser, despite them
appearing to be derived ultimately (via RecognitionException) from
System.Exception:

namespace Antlr.Runtime
{
    [Serializable]
    public class RecognitionException : Exception
    {
        protected int c;
        protected int charPositionInLine;
    ...
}

Catching the derived exceptions or catching RecognitionExceptions doesn't
work either.

Up until now I have worked around this by using my own exception class
through the using declaration:

using NoViableAltException = MyCode.MyNoViableAltException;
using EarlyExitException = MyCode.MyEarlyExitException;

this is obviously less than ideal and I also can't use this trick on
exceptions thrown outside of the lexer and parser, for instance from the
antlr runtime via the Match() function.

I thought that perhaps the problem is originating from the fact that somehow
threading was being used in the antlr runtime but i checked and i can't see
any threads being spawned. I'm also new to c# (although have spent 8 years
with c++) so I am aware that there may be something i don't understand about
the clr and the way that it uses exceptions (although i have done a lot of
reading on that).

I'm at a bit of a loss as to why i can't catch the exceptions and I was
hoping that someone on the mailing list might have some ideas, i'm happy to
post up grammars etc should anyone be interested in trying to help me.

p.s. apart from this problem i'm finding antlr to be a great tool :)

thanks, Ed
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080221/62717f3d/attachment.html 

From jaluber at gmx.de  Thu Feb 21 06:21:48 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Thu, 21 Feb 2008 15:21:48 +0100
Subject: [antlr-interest] Problem catching exceptions in c# generated
 code
In-Reply-To: <d50c5150802210616q30ff98c1m6b8e6a521e04a00b@mail.gmail.com>
References: <d50c5150802210616q30ff98c1m6b8e6a521e04a00b@mail.gmail.com>
Message-ID: <47BD88FC.7040202@gmx.de>

Ed Sykes schrieb:
> Hi everyone,
> 
> first post here, so hello everyone :)
> 
> I've been using antlr with the c# generator for a month or so and i have 
> a problem that i now need to solve. The problem is that despite 
> surrounding the calls to the expression parser in a try catch i don't 
> seem to be able to catch the exceptions thrown. e.g.:

Could it be that exceptions are caught elsewhere in the ANTLR code, so 
the exception never arrives at your catch clause? Or do you mean that 
despite having a catch clause, the exception goes further up in the call 
chain?

Johannes

From ed.sykes at gmail.com  Thu Feb 21 06:23:26 2008
From: ed.sykes at gmail.com (Ed Sykes)
Date: Thu, 21 Feb 2008 14:23:26 +0000
Subject: [antlr-interest] Problem catching exceptions in c# generated
	code
In-Reply-To: <47BD88FC.7040202@gmx.de>
References: <d50c5150802210616q30ff98c1m6b8e6a521e04a00b@mail.gmail.com>
	<47BD88FC.7040202@gmx.de>
Message-ID: <d50c5150802210623v48f1f373i89858f2af4e27bb5@mail.gmail.com>

I mean that the exception is uncaught and ends up in the unhandled user
exception code of the CLR.

On Thu, Feb 21, 2008 at 2:21 PM, Johannes Luber <jaluber at gmx.de> wrote:

> Ed Sykes schrieb:
> > Hi everyone,
> >
> > first post here, so hello everyone :)
> >
> > I've been using antlr with the c# generator for a month or so and i have
> > a problem that i now need to solve. The problem is that despite
> > surrounding the calls to the expression parser in a try catch i don't
> > seem to be able to catch the exceptions thrown. e.g.:
>
> Could it be that exceptions are caught elsewhere in the ANTLR code, so
> the exception never arrives at your catch clause? Or do you mean that
> despite having a catch clause, the exception goes further up in the call
> chain?
>
> Johannes
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080221/6174f381/attachment-0001.html 

From amohombe at yahoo.com  Thu Feb 21 06:24:25 2008
From: amohombe at yahoo.com (Ahmed Mohombe)
Date: Thu, 21 Feb 2008 15:24:25 +0100
Subject: [antlr-interest] The antlrworks-1.1.7.jar seems to be corrupt!
In-Reply-To: <1203602195.47bd831393fb2@clients.latnet.lv>
References: <fpjorn$50l$1@ger.gmane.org>
	<1203602195.47bd831393fb2@clients.latnet.lv>
Message-ID: <fpk1ir$5fk$1@ger.gmane.org>

> java -jar antlrworks-1.1.7.jar works for me.
> Is your system healthy (no viruses etc)?
> Is your java OK (I use 1.6)?
Yes, my system is healthy :) (and all the other systems where I've tried).

I can run any Java application (even previous versions
of antlrworks - just this version seems broken to me)

Besides trying to "unzip" the JAR gives the message I mentioned, so
it's 100% broken.

Maybe it also has to do when someone has downloaded.
Can you download now and the JAR is OK for you?

Thanks in advance,

Ahmed.


From lefevrol at yahoo.com  Thu Feb 21 06:26:49 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Thu, 21 Feb 2008 15:26:49 +0100
Subject: [antlr-interest] Parser.getTokenNames()
Message-ID: <fpk1nj$61i$1@ger.gmane.org>

Are the names guaranteed to be sorted by serial number
(the one given in the tokens file, that is)? It seems
so but then javadocs don't say and they are listed in
random order in the tokens file rather than in the
sorted order you'd expect. If there is such a guarantee,
it would be good it if could be made explicit.

Regards,

-- O.L.




From lefevrol at yahoo.com  Thu Feb 21 06:32:42 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Thu, 21 Feb 2008 15:32:42 +0100
Subject: [antlr-interest] Parser.getTokenNames()
In-Reply-To: <fpk1nj$61i$1@ger.gmane.org>
References: <fpk1nj$61i$1@ger.gmane.org>
Message-ID: <fpk22j$766$1@ger.gmane.org>

> Are the names guaranteed to be sorted by serial number

I think what I called the serial number is more properly
called the token type. The question still holds, though.

-- O.L.


From ed.sykes at gmail.com  Thu Feb 21 06:26:44 2008
From: ed.sykes at gmail.com (Ed Sykes)
Date: Thu, 21 Feb 2008 14:26:44 +0000
Subject: [antlr-interest] Problem catching exceptions in c# generated
	code
In-Reply-To: <d50c5150802210623v48f1f373i89858f2af4e27bb5@mail.gmail.com>
References: <d50c5150802210616q30ff98c1m6b8e6a521e04a00b@mail.gmail.com>
	<47BD88FC.7040202@gmx.de>
	<d50c5150802210623v48f1f373i89858f2af4e27bb5@mail.gmail.com>
Message-ID: <d50c5150802210626l4e3baebeq4fd87307d3214780@mail.gmail.com>

Just to be super clear I should just clarify that the 'using' workaround
that i describe below results in the expections being caught via:

catch(Exception e)
{

}

On Thu, Feb 21, 2008 at 2:23 PM, Ed Sykes <ed.sykes at gmail.com> wrote:

> I mean that the exception is uncaught and ends up in the unhandled user
> exception code of the CLR.
>
>
> On Thu, Feb 21, 2008 at 2:21 PM, Johannes Luber <jaluber at gmx.de> wrote:
>
> > Ed Sykes schrieb:
> > > Hi everyone,
> > >
> > > first post here, so hello everyone :)
> > >
> > > I've been using antlr with the c# generator for a month or so and i
> > have
> > > a problem that i now need to solve. The problem is that despite
> > > surrounding the calls to the expression parser in a try catch i don't
> > > seem to be able to catch the exceptions thrown. e.g.:
> >
> > Could it be that exceptions are caught elsewhere in the ANTLR code, so
> > the exception never arrives at your catch clause? Or do you mean that
> > despite having a catch clause, the exception goes further up in the call
> > chain?
> >
> > Johannes
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080221/5e0ed3b5/attachment.html 

From jaluber at gmx.de  Thu Feb 21 06:42:01 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Thu, 21 Feb 2008 15:42:01 +0100
Subject: [antlr-interest] Problem catching exceptions in c# generated
 code
In-Reply-To: <d50c5150802210626l4e3baebeq4fd87307d3214780@mail.gmail.com>
References: <d50c5150802210616q30ff98c1m6b8e6a521e04a00b@mail.gmail.com>	
	<47BD88FC.7040202@gmx.de>	
	<d50c5150802210623v48f1f373i89858f2af4e27bb5@mail.gmail.com>
	<d50c5150802210626l4e3baebeq4fd87307d3214780@mail.gmail.com>
Message-ID: <47BD8DB9.5090501@gmx.de>

Ed Sykes schrieb:
> Just to be super clear I should just clarify that the 'using' workaround 
> that i describe below results in the expections being caught via:
> 
> catch(Exception e)
> {
> 
> }

Wait a minute - your catch clause has been manually added to the driver
class then? Are you using exceptions in the grammar file itself? I know
that at least in 3.0.1 that syntax didn't work.

Johannes


From lefevrol at yahoo.com  Thu Feb 21 06:40:05 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Thu, 21 Feb 2008 15:40:05 +0100
Subject: [antlr-interest] RFE: warn if root rule is missing (no EOF)
In-Reply-To: <792259.90598.qm@web55910.mail.re3.yahoo.com>
References: <792259.90598.qm@web55910.mail.re3.yahoo.com>
Message-ID: <fpk2ge$766$2@ger.gmane.org>

Loring Craymer wrote:
> Usually, it is not the "not adding EOF" that is a beginner's mistake, it is the structuring of a grammar to require an explicit EOF.  That is, the top level rule depends on a stop marker, such as "}", to terminate, and processing may stop before an EOF is reached.  The only time your grammar needs an  EOF is to consume tokens from such a stop marker to the end of file; I find that rare.

Not so. See the "Evaluator bailing out early?" thread for a counterexample.

-- O.L.


From ed.sykes at gmail.com  Thu Feb 21 06:50:32 2008
From: ed.sykes at gmail.com (Ed Sykes)
Date: Thu, 21 Feb 2008 14:50:32 +0000
Subject: [antlr-interest] Problem catching exceptions in c# generated
	code
In-Reply-To: <d50c5150802210650i7a422b97n50956787212b52f8@mail.gmail.com>
References: <d50c5150802210616q30ff98c1m6b8e6a521e04a00b@mail.gmail.com>
	<47BD88FC.7040202@gmx.de>
	<d50c5150802210623v48f1f373i89858f2af4e27bb5@mail.gmail.com>
	<d50c5150802210626l4e3baebeq4fd87307d3214780@mail.gmail.com>
	<47BD8B75.8060907@gmx.de>
	<d50c5150802210650i7a422b97n50956787212b52f8@mail.gmail.com>
Message-ID: <d50c5150802210650x2ecb3faegb538cdb77e15d051@mail.gmail.com>

On Thu, Feb 21, 2008 at 2:50 PM, Ed Sykes <ed.sykes at gmail.com> wrote:

> I'm not sure what you mean by driver,
>
> but the catch clause is in the code that calls expr() which is outside any
> generated files (i.e. in my calling code).
>
>
> On Thu, Feb 21, 2008 at 2:32 PM, Johannes Luber <jaluber at gmx.de> wrote:
>
> > Ed Sykes schrieb:
> > > Just to be super clear I should just clarify that the 'using'
> > workaround
> > > that i describe below results in the expections being caught via:
> > >
> > > catch(Exception e)
> > > {
> > >
> > > }
> >
> > Wait a minute - your catch clause has been manually added to the driver
> > class then? Are you using exceptions in the grammar file itself? I know
> > that at least in 3.0.1 that syntax didn't work.
> >
> > Johannes
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080221/c133f2af/attachment.html 

From jaluber at gmx.de  Thu Feb 21 06:55:34 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Thu, 21 Feb 2008 15:55:34 +0100
Subject: [antlr-interest] Problem catching exceptions in c# generated
 code
In-Reply-To: <d50c5150802210650x2ecb3faegb538cdb77e15d051@mail.gmail.com>
References: <d50c5150802210616q30ff98c1m6b8e6a521e04a00b@mail.gmail.com>	
	<47BD88FC.7040202@gmx.de>	
	<d50c5150802210623v48f1f373i89858f2af4e27bb5@mail.gmail.com>	
	<d50c5150802210626l4e3baebeq4fd87307d3214780@mail.gmail.com>	
	<47BD8B75.8060907@gmx.de>	
	<d50c5150802210650i7a422b97n50956787212b52f8@mail.gmail.com>
	<d50c5150802210650x2ecb3faegb538cdb77e15d051@mail.gmail.com>
Message-ID: <47BD90E6.9010800@gmx.de>

Ed Sykes schrieb:
> On Thu, Feb 21, 2008 at 2:50 PM, Ed Sykes <ed.sykes at gmail.com 
> <mailto:ed.sykes at gmail.com>> wrote:
> 
>     I'm not sure what you mean by driver,
> 
>     but the catch clause is in the code that calls expr() which is
>     outside any generated files (i.e. in my calling code).

That is the driver program. Just to get your situation: ANTLR generates 
exceptions. Do you have in the generated code some catch clause which 
isn't called? Or do you complain that you had to add a catch clause to 
your driver?

Johannes

From lefevrol at yahoo.com  Thu Feb 21 06:54:29 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Thu, 21 Feb 2008 15:54:29 +0100
Subject: [antlr-interest] RFE: warn if root rule is missing (no EOF)
In-Reply-To: <40CBD611A793EA438464B91E749DD8B003B1A04D@blums0017.bluelnk.net>
References: <121291.63208.qm@web55912.mail.re3.yahoo.com>
	<40CBD611A793EA438464B91E749DD8B003B1A04D@blums0017.bluelnk.net>
Message-ID: <fpk3be$cbb$1@ger.gmane.org>

> 2.  Not adding EOF is a common beginner mistake and generates many,
> similar messages to the email list.  Something should be done so that
> beginners are aware that (almost always) you want to end your base rule
> with EOF.

There is a FAQ entry for this (sort of) but it is (IMO) poorly worded: "Why
the generated parser code tolerates illegal expression?" To begin with it
should read "Why does etc" and then EOF is not just an issue with illegal
input: without it, parsing (also of perfectly valid input) may simply
terminate early.

Speaking of which, it is quite inconvenient that you can't (apparently) get
the whole FAQ on one page: that makes it hard to read it in one go (way too
much licking back and forth), which ideally one should do before starting
to use ANTLR but which I did not do for this reason. That is how I missed
the entry in question: I just scanned the entry names and didn't see
anything that seemed to match my problem.

-- O.L.


From ed.sykes at gmail.com  Thu Feb 21 07:04:42 2008
From: ed.sykes at gmail.com (Ed Sykes)
Date: Thu, 21 Feb 2008 15:04:42 +0000
Subject: [antlr-interest] Problem catching exceptions in c# generated
	code
In-Reply-To: <d50c5150802210659k4f6efba2ve7116968b01a351c@mail.gmail.com>
References: <d50c5150802210616q30ff98c1m6b8e6a521e04a00b@mail.gmail.com>
	<47BD88FC.7040202@gmx.de>
	<d50c5150802210623v48f1f373i89858f2af4e27bb5@mail.gmail.com>
	<d50c5150802210626l4e3baebeq4fd87307d3214780@mail.gmail.com>
	<47BD8B75.8060907@gmx.de>
	<d50c5150802210650i7a422b97n50956787212b52f8@mail.gmail.com>
	<d50c5150802210650x2ecb3faegb538cdb77e15d051@mail.gmail.com>
	<47BD90E6.9010800@gmx.de>
	<d50c5150802210659k4f6efba2ve7116968b01a351c@mail.gmail.com>
Message-ID: <d50c5150802210704j1e937703h4d36de945f74a243@mail.gmail.com>

I've just tried moving the try catch into the lexer around the call to
Antlr.Runtime.Match() and this seems to catch the exception. I'm confused as
to why putting the code in the driver doesn't work, but moving the try catch
to the lexer does.

at least i have a workaround if i can't figure out how to get it working in
the driver.

On Thu, Feb 21, 2008 at 2:59 PM, Ed Sykes <ed.sykes at gmail.com> wrote:

>
> ahh ok then yes, the try catch block is inside the driver. You say that
> this doesn't work in 3.01?
>
>
> On Thu, Feb 21, 2008 at 2:55 PM, Johannes Luber <jaluber at gmx.de> wrote:
>
> > Ed Sykes schrieb:
> > > On Thu, Feb 21, 2008 at 2:50 PM, Ed Sykes <ed.sykes at gmail.com
> > > <mailto:ed.sykes at gmail.com>> wrote:
> > >
> > >     I'm not sure what you mean by driver,
> > >
> > >     but the catch clause is in the code that calls expr() which is
> > >     outside any generated files (i.e. in my calling code).
> >
> > That is the driver program. Just to get your situation: ANTLR generates
> > exceptions. Do you have in the generated code some catch clause which
> > isn't called? Or do you complain that you had to add a catch clause to
> > your driver?
> >
> > Johannes
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080221/16e284a0/attachment-0001.html 

From ed.sykes at gmail.com  Thu Feb 21 06:59:40 2008
From: ed.sykes at gmail.com (Ed Sykes)
Date: Thu, 21 Feb 2008 14:59:40 +0000
Subject: [antlr-interest] Problem catching exceptions in c# generated
	code
In-Reply-To: <47BD90E6.9010800@gmx.de>
References: <d50c5150802210616q30ff98c1m6b8e6a521e04a00b@mail.gmail.com>
	<47BD88FC.7040202@gmx.de>
	<d50c5150802210623v48f1f373i89858f2af4e27bb5@mail.gmail.com>
	<d50c5150802210626l4e3baebeq4fd87307d3214780@mail.gmail.com>
	<47BD8B75.8060907@gmx.de>
	<d50c5150802210650i7a422b97n50956787212b52f8@mail.gmail.com>
	<d50c5150802210650x2ecb3faegb538cdb77e15d051@mail.gmail.com>
	<47BD90E6.9010800@gmx.de>
Message-ID: <d50c5150802210659k4f6efba2ve7116968b01a351c@mail.gmail.com>

ahh ok then yes, the try catch block is inside the driver. You say that this
doesn't work in 3.01?

On Thu, Feb 21, 2008 at 2:55 PM, Johannes Luber <jaluber at gmx.de> wrote:

> Ed Sykes schrieb:
> > On Thu, Feb 21, 2008 at 2:50 PM, Ed Sykes <ed.sykes at gmail.com
> > <mailto:ed.sykes at gmail.com>> wrote:
> >
> >     I'm not sure what you mean by driver,
> >
> >     but the catch clause is in the code that calls expr() which is
> >     outside any generated files (i.e. in my calling code).
>
> That is the driver program. Just to get your situation: ANTLR generates
> exceptions. Do you have in the generated code some catch clause which
> isn't called? Or do you complain that you had to add a catch clause to
> your driver?
>
> Johannes
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080221/a48e23b8/attachment.html 

From jaluber at gmx.de  Thu Feb 21 07:16:59 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Thu, 21 Feb 2008 16:16:59 +0100
Subject: [antlr-interest] Problem catching exceptions in c# generated
 code
In-Reply-To: <d50c5150802210704j1e937703h4d36de945f74a243@mail.gmail.com>
References: <d50c5150802210616q30ff98c1m6b8e6a521e04a00b@mail.gmail.com>	
	<47BD88FC.7040202@gmx.de>	
	<d50c5150802210623v48f1f373i89858f2af4e27bb5@mail.gmail.com>	
	<d50c5150802210626l4e3baebeq4fd87307d3214780@mail.gmail.com>	
	<47BD8B75.8060907@gmx.de>	
	<d50c5150802210650i7a422b97n50956787212b52f8@mail.gmail.com>	
	<d50c5150802210650x2ecb3faegb538cdb77e15d051@mail.gmail.com>	
	<47BD90E6.9010800@gmx.de>	
	<d50c5150802210659k4f6efba2ve7116968b01a351c@mail.gmail.com>
	<d50c5150802210704j1e937703h4d36de945f74a243@mail.gmail.com>
Message-ID: <47BD95EB.5090902@gmx.de>

Ed Sykes schrieb:
> 
> I've just tried moving the try catch into the lexer around the call to 
> Antlr.Runtime.Match() and this seems to catch the exception. I'm 
> confused as to why putting the code in the driver doesn't work, but 
> moving the try catch to the lexer does.
> 
> at least i have a workaround if i can't figure out how to get it working 
> in the driver.

Now I believe I know what's your problem actually is. You are getting 
exceptions in the lexer, but you aren't catching them because the catch 
clause doesn't include the lexer. That would make sense as the lexing is 
done separately from the parsing. There only one problem with the 
theory: FillBuffer() is called by NextToken() is called by the parser. 
So the exception should be on the call chain. Strange. Nonetheless test 
it, because changing the generate code is always a bad idea, if there is 
an other way.

And to your other question in the other email: ANTLR has a special 
syntax for exceptions in its grammar, but that doesn't work yet.

Johannes

From ed.sykes at gmail.com  Thu Feb 21 08:50:18 2008
From: ed.sykes at gmail.com (Ed Sykes)
Date: Thu, 21 Feb 2008 16:50:18 +0000
Subject: [antlr-interest] Problem catching exceptions in c# generated
	code
In-Reply-To: <47BD95EB.5090902@gmx.de>
References: <d50c5150802210616q30ff98c1m6b8e6a521e04a00b@mail.gmail.com>
	<d50c5150802210623v48f1f373i89858f2af4e27bb5@mail.gmail.com>
	<d50c5150802210626l4e3baebeq4fd87307d3214780@mail.gmail.com>
	<47BD8B75.8060907@gmx.de>
	<d50c5150802210650i7a422b97n50956787212b52f8@mail.gmail.com>
	<d50c5150802210650x2ecb3faegb538cdb77e15d051@mail.gmail.com>
	<47BD90E6.9010800@gmx.de>
	<d50c5150802210659k4f6efba2ve7116968b01a351c@mail.gmail.com>
	<d50c5150802210704j1e937703h4d36de945f74a243@mail.gmail.com>
	<47BD95EB.5090902@gmx.de>
Message-ID: <d50c5150802210850i69f9c3adi51577254f3f15df0@mail.gmail.com>

You're right, i should have mentioned that the exception is being thrown
from the lexer, which is being called by the parser.

The try catch was around just the entry point on the parser, i've put the
try catch now around the whole setup / parse and still have the same
problem:

try
{
    MetricellKPIExpressionLexer lex = new MetricellKPIExpressionLexer(new
ANTLRStringStream(_expression));
    CommonTokenStream tokens = new CommonTokenStream(lex);
    MetricellKPIExpressionParser parser = new
MetricellKPIExpressionParser(tokens);

** MetricellKPIExpressionParser.expr_return result = parser.expr();
    CommonTree parsedTree = (CommonTree)(result.Tree);
    isValid = hasValidMeasures(parsedTree);
}
catch (MismatchedTokenException mmt)
{
    isValid = false;
}
catch (Exception ex)
{
    isValid = false;
}

In either case when the exception is thrown it should find the catch block
in the execution path. very puzzling. I've put the call stack below:

MetricellWebApplication.DLL!MetricellKPIExpressionLexer.mAND()
MetricellWebApplication.DLL!MetricellKPIExpressionLexer.mTokens()
[External Code]
MetricellWebApplication.DLL!MetricellKPIExpressionParser.expr()
MetricellWebApplication.DLL!MetriCell.MetricellKPIExpression.isValid()

At least i know that the exception can be caught from
MetricellKPIExpressionLexer.mAND() and that it can't be caught from
MetricellKPIExpression.isValid(). I can move the exception handling around
and see what the highest point in the call stack that works is. I suspect
that it's going to be
MetricellWebApplication.DLL!MetricellKPIExpressionLexer.mTokens(), but let's
see.

Not wanting to edit the generated code is exactly why i'm trying to fix
this!

thanks, ed

On Thu, Feb 21, 2008 at 3:16 PM, Johannes Luber <jaluber at gmx.de> wrote:

> Ed Sykes schrieb:
> >
> > I've just tried moving the try catch into the lexer around the call to
> > Antlr.Runtime.Match() and this seems to catch the exception. I'm
> > confused as to why putting the code in the driver doesn't work, but
> > moving the try catch to the lexer does.
> >
> > at least i have a workaround if i can't figure out how to get it working
> > in the driver.
>
> Now I believe I know what's your problem actually is. You are getting
> exceptions in the lexer, but you aren't catching them because the catch
> clause doesn't include the lexer. That would make sense as the lexing is
> done separately from the parsing. There only one problem with the
> theory: FillBuffer() is called by NextToken() is called by the parser.
> So the exception should be on the call chain. Strange. Nonetheless test
> it, because changing the generate code is always a bad idea, if there is
> an other way.
>
> And to your other question in the other email: ANTLR has a special
> syntax for exceptions in its grammar, but that doesn't work yet.
>
> Johannes
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080221/f85e67e7/attachment.html 

From discontinuum at gmail.com  Thu Feb 21 08:54:22 2008
From: discontinuum at gmail.com (Erik Kratochvil)
Date: Thu, 21 Feb 2008 17:54:22 +0100
Subject: [antlr-interest] Parser.getTokenNames()
In-Reply-To: <fpk22j$766$1@ger.gmane.org>
References: <fpk1nj$61i$1@ger.gmane.org> <fpk22j$766$1@ger.gmane.org>
Message-ID: <f4dc39b90802210854t6da41d7ejf75ad5154a1eb8d6@mail.gmail.com>

Token names are listed according to their respective token types. The
tokenNames[] array is used when an error is reported. Btw. it makes
introducing your own token types quite dangerous (but it is officially
not possible, so..).


On 2/21/08, Olivier Lefevre <lefevrol at yahoo.com> wrote:
> > Are the names guaranteed to be sorted by serial number
>
>
> I think what I called the serial number is more properly
>  called the token type. The question still holds, though.
>
>
>  -- O.L.
>
>


-- 
Erik Kratochv?l

From iwm at doc.ic.ac.uk  Thu Feb 21 09:30:30 2008
From: iwm at doc.ic.ac.uk (Ian Moor)
Date: Thu, 21 Feb 2008 17:30:30 +0000 (GMT)
Subject: [antlr-interest] $ in action  comments
Message-ID: <18292781.711203615030512.JavaMail.ICEMail@snegopad>

I have finally tracked down two errors from generating a tree parser:
error(111): pico/Gen.g:16:9: reference to attribute outside of a rule: zero
error(114): pico/Gen.g:454:11: attribute is not a token, parameter, or return value: v0

 in the first case there is a  // comment in the members  sections containing $zero, and
in the second case there is a comment  in an action containing a $v0. 

- the reported  error positions are not error, and only have removed all other references,
did I realised that the comment were the cause!

Ian W Moor                    Department of Computing,
iwm at doc.ic.ac.uk           Imperial College.
                                    180 Queensgate
                                     London SW7 2AZ UK.


From amohombe at yahoo.com  Thu Feb 21 09:37:38 2008
From: amohombe at yahoo.com (Ahmed Mohombe)
Date: Thu, 21 Feb 2008 18:37:38 +0100
Subject: [antlr-interest] The antlrworks-1.1.7.jar seems to be corrupt!
In-Reply-To: <fpjorn$50l$1@ger.gmane.org>
References: <fpjorn$50l$1@ger.gmane.org>
Message-ID: <fpkct4$j5f$1@ger.gmane.org>

> Everytime  I download antlrworks-1.1.7.jar and try to open it, I get:
> "Error in packed file ..."
> 
> Or trying to run it with java -jar, I get:
> "Invalid or corrupt jarfile antlrworks-1.1.7.jar"
> 
> I'm not sure what's the problem:
> - the download? (I tried several times, from different places with the 
> same result).
> - some strange encoding/conversion?
It looks like this is a "download manager" problem in combination with the ANTR.org server.
Downloading with the browser works, but with GetRight (or other similar download mangers) seems
to produce corrupted archives.


Ahmed.


From ad_cooney at hotmail.com  Thu Feb 21 10:28:08 2008
From: ad_cooney at hotmail.com (Adam Cooney)
Date: Thu, 21 Feb 2008 18:28:08 +0000
Subject: [antlr-interest] Java AST Grammar
In-Reply-To: <CAD63C78-E67C-471C-B78A-9124E3A2CA58@jacelridge.com>
References: <BLU124-W377786AF163CAC13E783AC842B0@phx.gbl>
	<D2866F35-D1BB-4C25-9227-D32EFB4EBEED@jacelridge.com>
	<BLU124-W20E1DA9084AC8AE70D020484220@phx.gbl>
	<CAD63C78-E67C-471C-B78A-9124E3A2CA58@jacelridge.com>
Message-ID: <BLU124-W75710BEA144F50E6399D8841C0@phx.gbl>


Thanks John. I'm having a slight problem running it on a Java file though (problem as in, it seems to take a LONG time compiling, and by along, the source file I've ran (frm the Java examples) hasn't finished compiling yet. heres my console:
C:\antlr-3.0b7\lib\Java\eg\ast>java org.antlr.Tool JavaAST.gANTLR Parser Generator  Version 3.1b1 (??)  1989-2007
C:\antlr-3.0b7\lib\Java\eg\ast>java org.antlr.Tool JavaPrinterTree.gANTLR Parser Generator  Version 3.1b1 (??)  1989-2007
C:\antlr-3.0b7\lib\Java\eg\ast>javac *.javaNote: Some input files use unchecked or unsafe operations.Note: Recompile with -Xlint:unchecked for details.
C:\antlr-3.0b7\lib\Java\eg\ast>java Test input
 
(note: input is of type File). Could you please send me an example one (preferably that doesnt take long to compile:)) or correct me if im trying to do this wrong - i am basing it off how I have ran others via ANTLR.
 
Sorry to be such a novice at this stuff.
Thanks Adam
 



CC: john at jacelridge.com; antlr-interest at antlr.orgFrom: john at jacelridge.comTo: ad_cooney at hotmail.comSubject: Re: [antlr-interest] Java AST GrammarDate: Tue, 19 Feb 2008 19:53:57 -0500Yes, you need 3.0b7 won't work, but, actually, neither will 3.0.1.  There is a bug in 3.0.1 (fixed in current beta releases of 3.1) that causes certain things not to work (they're marked with something like <---- trouble here in the grammar).  Get the latest release of 3.1beta and you'll be much happier.  (With 3.0.1 it will compile, it will just fail at runtime or give you a bad AST.) 


I have to say that I was very impressed; when I pointed the bug out to Terence he got a new version with the fix out in a few (maybe one) days.

Peace
- John



On Feb 19, 2008, at 5:12 PM, Adam Cooney wrote:

Hi John, I've been having some trouble running your grammar. I keep getting the following error: C:\antlr-3.0b7\lib\Java\eg\ast>java org.antlr.Tool JavaAST.gANTLR Parser Generator  Version 3.0b7 (April 12, 2007)  1989-2007error(100): JavaAST.g:709:53: syntax error: antlr: JavaAST.g:709:53: unexpectedtoken: ?error(100): JavaAST.g:710:61: syntax error: antlr: JavaAST.g:710:61: unexpectedtoken: ?error(100): JavaAST.g:711:51: syntax error: antlr: JavaAST.g:711:51: unexpectedtoken: ?error(100): JavaAST.g:712:58: syntax error: antlr: JavaAST.g:712:58: unexpectedtoken: ?error(100): JavaAST.g:0:0: syntax error: assign.types: <AST>:0:0: unexpected end of subtreeerror(10):  internal error: JavaAST.g : java.lang.ClassCastException: antlr.ASTNULLType cannot be cast to org.antlr.tool.GrammarASTorg.antlr.tool.AssignTokenTypesWalker.block(AssignTokenTypesWalker.java:1215)org.antlr.tool.AssignTokenTypesWalker.rule(AssignTokenTypesWalker.java:1030)org.antlr.tool.AssignTokenTypesWalker.rules(AssignTokenTypesWalker.java:610)org.antlr.tool.AssignTokenTypesWalker.grammarSpec(AssignTokenTypesWalker.java:492)org.antlr.tool.AssignTokenTypesWalker.grammar(AssignTokenTypesWalker.java:363)org.antlr.tool.Grammar.setGrammarContent(Grammar.java:539)org.antlr.tool.Grammar.<init>(Grammar.java:448)org.antlr.Tool.getGrammar(Tool.java:331)org.antlr.Tool.process(Tool.java:267)org.antlr.Tool.main(Tool.java:70) Any idea what could be causing it? I'm pretty new to ANTLR, but the stringtemplate and antlr JARs are in the classpath, and I ran the example treeparsers fine. Could it be due to using antlr-3.0b7 rather than antlr-3.0.1? I was using 3.0.1 but after installing it and resetting the classpaths for some reason i got a Java classloader error even after restarting the computer, and so I just reverted back to this one.


CC: john at jacelridge.com; antlr-interest at antlr.orgFrom: john at jacelridge.comTo: ad_cooney at hotmail.comSubject: Re: [antlr-interest] Java AST GrammarDate: Tue, 12 Feb 2008 17:41:05 -0500I have been working on a Java grammar that produces an AST; and a companion tree grammar that produces equivalent Java code from an AST.  This is still a work-in-progress, but you're welcome to what I have. 

Please let me know if you run into any problems with this, as I'm trying to make it work nicely.

Peace
- John




She said what? About who? Shameful celebrity quotes on Search Star!
_________________________________________________________________
Free games, great prizes - get gaming at Gamesbox. 
http://www.searchgamesbox.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080221/e1dce04d/attachment-0001.html 

From ad_cooney at hotmail.com  Thu Feb 21 10:50:02 2008
From: ad_cooney at hotmail.com (Adam Cooney)
Date: Thu, 21 Feb 2008 18:50:02 +0000
Subject: [antlr-interest] Java AST Grammar
In-Reply-To: <BLU124-W75710BEA144F50E6399D8841C0@phx.gbl>
References: <BLU124-W377786AF163CAC13E783AC842B0@phx.gbl>
	<D2866F35-D1BB-4C25-9227-D32EFB4EBEED@jacelridge.com>
	<BLU124-W20E1DA9084AC8AE70D020484220@phx.gbl>
	<CAD63C78-E67C-471C-B78A-9124E3A2CA58@jacelridge.com> 
	<BLU124-W75710BEA144F50E6399D8841C0@phx.gbl>
Message-ID: <BLU124-W3594FC5E2A5585DBBA0D20841C0@phx.gbl>


Sigh, nevermind. I should have paid more attention to the "ANTLRInputStream input = new ANTLRInputStream(System.in);". I did it quickly before I left and didnt have time to notice.
 
Sorry for wasting your time, works fine :) ty


From: ad_cooney at hotmail.comTo: antlr-interest at antlr.orgDate: Thu, 21 Feb 2008 18:28:08 +0000Subject: Re: [antlr-interest] Java AST Grammar


Thanks John. I'm having a slight problem running it on a Java file though (problem as in, it seems to take a LONG time compiling, and by along, the source file I've ran (frm the Java examples) hasn't finished compiling yet. heres my console:C:\antlr-3.0b7\lib\Java\eg\ast>java org.antlr.Tool JavaAST.gANTLR Parser Generator  Version 3.1b1 (??)  1989-2007C:\antlr-3.0b7\lib\Java\eg\ast>java org.antlr.Tool JavaPrinterTree.gANTLR Parser Generator  Version 3.1b1 (??)  1989-2007C:\antlr-3.0b7\lib\Java\eg\ast>javac *.javaNote: Some input files use unchecked or unsafe operations.Note: Recompile with -Xlint:unchecked for details.C:\antlr-3.0b7\lib\Java\eg\ast>java Test input (note: input is of type File). Could you please send me an example one (preferably that doesnt take long to compile:)) or correct me if im trying to do this wrong - i am basing it off how I have ran others via ANTLR. Sorry to be such a novice at this stuff.Thanks Adam 

CC: john at jacelridge.com; antlr-interest at antlr.orgFrom: john at jacelridge.comTo: ad_cooney at hotmail.comSubject: Re: [antlr-interest] Java AST GrammarDate: Tue, 19 Feb 2008 19:53:57 -0500Yes, you need 3.0b7 won't work, but, actually, neither will 3.0.1.  There is a bug in 3.0.1 (fixed in current beta releases of 3.1) that causes certain things not to work (they're marked with something like <---- trouble here in the grammar).  Get the latest release of 3.1beta and you'll be much happier.  (With 3.0.1 it will compile, it will just fail at runtime or give you a bad AST.) 


I have to say that I was very impressed; when I pointed the bug out to Terence he got a new version with the fix out in a few (maybe one) days.

Peace
- John



On Feb 19, 2008, at 5:12 PM, Adam Cooney wrote:

Hi John, I've been having some trouble running your grammar. I keep getting the following error: C:\antlr-3.0b7\lib\Java\eg\ast>java org.antlr.Tool JavaAST.gANTLR Parser Generator  Version 3.0b7 (April 12, 2007)  1989-2007error(100): JavaAST.g:709:53: syntax error: antlr: JavaAST.g:709:53: unexpectedtoken: ?error(100): JavaAST.g:710:61: syntax error: antlr: JavaAST.g:710:61: unexpectedtoken: ?error(100): JavaAST.g:711:51: syntax error: antlr: JavaAST.g:711:51: unexpectedtoken: ?error(100): JavaAST.g:712:58: syntax error: antlr: JavaAST.g:712:58: unexpectedtoken: ?error(100): JavaAST.g:0:0: syntax error: assign.types: <AST>:0:0: unexpected end of subtreeerror(10):  internal error: JavaAST.g : java.lang.ClassCastException: antlr.ASTNULLType cannot be cast to org.antlr.tool.GrammarASTorg.antlr.tool.AssignTokenTypesWalker.block(AssignTokenTypesWalker.java:1215)org.antlr.tool.AssignTokenTypesWalker.rule(AssignTokenTypesWalker.java:1030)org.antlr.tool.AssignTokenTypesWalker.rules(AssignTokenTypesWalker.java:610)org.antlr.tool.AssignTokenTypesWalker.grammarSpec(AssignTokenTypesWalker.java:492)org.antlr.tool.AssignTokenTypesWalker.grammar(AssignTokenTypesWalker.java:363)org.antlr.tool.Grammar.setGrammarContent(Grammar.java:539)org.antlr.tool.Grammar.<init>(Grammar.java:448)org.antlr.Tool.getGrammar(Tool.java:331)org.antlr.Tool.process(Tool.java:267)org.antlr.Tool.main(Tool.java:70) Any idea what could be causing it? I'm pretty new to ANTLR, but the stringtemplate and antlr JARs are in the classpath, and I ran the example treeparsers fine. Could it be due to using antlr-3.0b7 rather than antlr-3.0.1? I was using 3.0.1 but after installing it and resetting the classpaths for some reason i got a Java classloader error even after restarting the computer, and so I just reverted back to this one.


CC: john at jacelridge.com; antlr-interest at antlr.orgFrom: john at jacelridge.comTo: ad_cooney at hotmail.comSubject: Re: [antlr-interest] Java AST GrammarDate: Tue, 12 Feb 2008 17:41:05 -0500I have been working on a Java grammar that produces an AST; and a companion tree grammar that produces equivalent Java code from an AST.  This is still a work-in-progress, but you're welcome to what I have. 

Please let me know if you run into any problems with this, as I'm trying to make it work nicely.

Peace
- John




She said what? About who? Shameful celebrity quotes on Search Star!

She said what? About who? Shameful celebrity quotes on Search Star! 
_________________________________________________________________
Free games, great prizes - get gaming at Gamesbox. 
http://www.searchgamesbox.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080221/c4edd8d1/attachment.html 

From antlr at mirality.co.nz  Thu Feb 21 10:53:12 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 22 Feb 2008 07:53:12 +1300
Subject: [antlr-interest] $ in action  comments
In-Reply-To: <18292781.711203615030512.JavaMail.ICEMail@snegopad>
References: <18292781.711203615030512.JavaMail.ICEMail@snegopad>
Message-ID: <20080221185334.3F40C11EDF3@www.antlr.org>

At 06:30 22/02/2008, Ian Moor wrote:
 >I have finally tracked down two errors from generating a tree
 >parser:
 >error(111): pico/Gen.g:16:9: reference to attribute outside of a 

 >rule: zero
 >error(114): pico/Gen.g:454:11: attribute is not a token, 
parameter,
 >or return value: v0
 >
 > in the first case there is a  // comment in the 
members  sections
 >containing $zero, and in the second case there is a comment  in 
an
 >action containing a $v0.

ANTLR doesn't understand the syntax of the target language, so it 
doesn't know what are comments and what aren't.  The only things 
it looks for are $s (to expand), }s (to terminate the block), and 
{s (to avoid terminating too early).


From pink at odahoda.de  Thu Feb 21 11:48:03 2008
From: pink at odahoda.de (Benjamin Niemann)
Date: Thu, 21 Feb 2008 20:48:03 +0100
Subject: [antlr-interest] $ in action  comments
References: <18292781.711203615030512.JavaMail.ICEMail@snegopad>
	<20080221185334.3F40C11EDF3@www.antlr.org>
Message-ID: <fpkkhj$hv1$1@ger.gmane.org>

Gavin Lambert wrote:

> At 06:30 22/02/2008, Ian Moor wrote:
>  >I have finally tracked down two errors from generating a tree
>  >parser:
>  >error(111): pico/Gen.g:16:9: reference to attribute outside of a
> 
>  >rule: zero
>  >error(114): pico/Gen.g:454:11: attribute is not a token,
> parameter,
>  >or return value: v0
>  >
>  > in the first case there is a  // comment in the
> members  sections
>  >containing $zero, and in the second case there is a comment  in
> an
>  >action containing a $v0.
> 
> ANTLR doesn't understand the syntax of the target language, so it
> doesn't know what are comments and what aren't.  The only things
> it looks for are $s (to expand), }s (to terminate the block), and
> {s (to avoid terminating too early).

And % - which always bites me!

-- 
Benjamin Niemann
Email: pink at odahoda dot de
WWW: http://pink.odahoda.de/


From joe.token at yahoo.fr  Thu Feb 21 14:46:14 2008
From: joe.token at yahoo.fr (Joe Token)
Date: Thu, 21 Feb 2008 22:46:14 +0000 (GMT)
Subject: [antlr-interest]  pseudocode translator to java,c and Ada
Message-ID: <444810.22273.qm@web28213.mail.ukl.yahoo.com>

Hi all,

I am looking for a pseudocode translator to java, c or(and) Ada.

Do i need to make the translator or does it already exist ? (and where can i find it? :-D)

Thank's

Joe





      _____________________________________________________________________________ 
Ne gardez plus qu'une seule adresse mail ! Copiez vos mails vers Yahoo! Mail http://mail.yahoo.fr
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080221/c43def76/attachment.html 

From rschulz at sonic.net  Thu Feb 21 15:02:20 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 21 Feb 2008 15:02:20 -0800
Subject: [antlr-interest] pseudocode translator to java,c and Ada
In-Reply-To: <444810.22273.qm@web28213.mail.ukl.yahoo.com>
References: <444810.22273.qm@web28213.mail.ukl.yahoo.com>
Message-ID: <200802211502.20534.rschulz@sonic.net>

On Thursday 21 February 2008 14:46, Joe Token wrote:
> Hi all,
>
> I am looking for a pseudocode translator to java, c or(and) Ada.

What is this "pseudocode" you speak of? There are a million, since 
they're rarely formalized. And without formalization, they cannot be 
translated, of course.


> Do i need to make the translator or does it already exist ? (and
> where can i find it? :-D)

_The_ translator?  Unless I'm missing something, the use of the definite 
article is unwarranted.


> Thank's
>
> Joe


Randall Schulz

From lilypondtool at organum.hu  Thu Feb 21 15:15:52 2008
From: lilypondtool at organum.hu (Bertalan Fodor)
Date: Fri, 22 Feb 2008 00:15:52 +0100
Subject: [antlr-interest] Custom token set up from lexer rules
Message-ID: <47BE0628.4030607@organum.hu>

Hello,

I would like to set up my custom token object from the lexer rules. 
Until now I only found one solution: set some member field in the lexer 
actions, then use that field in the overridden emit method. Isn't there 
a more elegant way for this?

Thank you,

Bert


From jaluber at gmx.de  Thu Feb 21 15:20:25 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 22 Feb 2008 00:20:25 +0100
Subject: [antlr-interest] Custom token set up from lexer rules
In-Reply-To: <47BE0628.4030607@organum.hu>
References: <47BE0628.4030607@organum.hu>
Message-ID: <47BE0739.4000408@gmx.de>

Bertalan Fodor schrieb:
> Hello,
> 
> I would like to set up my custom token object from the lexer rules. 
> Until now I only found one solution: set some member field in the lexer 
> actions, then use that field in the overridden emit method. Isn't there 
> a more elegant way for this?

Use

options {TokenLabelType=MyToken;}

instead. MyToken is a class probably derived from CommonToken.

Johannes

From joe.token at yahoo.fr  Thu Feb 21 15:30:43 2008
From: joe.token at yahoo.fr (Joe Token)
Date: Thu, 21 Feb 2008 23:30:43 +0000 (GMT)
Subject: [antlr-interest] Re :  pseudocode translator to java,c and Ada
Message-ID: <940101.15417.qm@web28214.mail.ukl.yahoo.com>

You are wright, but precisely, pseudocode(s) are not programming languages, so it (they) do(es) not really have syntax rules.
I'll be happy with any of it ! (close to Pascal)
What 
is 
this 
"pseudocode" 
you 
speak 
of? 
There 
are 
a 
million, 
since 
they're 
rarely 
formalized. 
And 
without 
formalization, 
they 
cannot 
be 
translated, 
of 
course.
 so ...i assume that among the "million" pseudocode, at least, you have one  to propose me ;-)
_The_ 
translator?  
Unless 
I'm 
missing 
something, 
the 
use 
of 
the 
definite 
article 
is 
unwarranted.


ok, one translator !

ok, let's say , I'll be happy to find One pseudocode translator to Ada, for instance.

whatever the pseudocode looks like,

thank's all !

Joe




      _____________________________________________________________________________ 
Ne gardez plus qu'une seule adresse mail ! Copiez vos mails vers Yahoo! Mail http://mail.yahoo.fr
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080221/86312d50/attachment.html 

From lilypondtool at organum.hu  Thu Feb 21 15:54:32 2008
From: lilypondtool at organum.hu (Bertalan Fodor)
Date: Fri, 22 Feb 2008 00:54:32 +0100
Subject: [antlr-interest] Custom token set up from lexer rules
Message-ID: <200802220054320000@1721513202>

Thanks, I'll also do that.

Bert

> ------- Original Message -------
> From: Johannes Luber <jaluber at gmx.de>
> To: Bertalan Fodor <lilypondtool at organum.hu>
> Sent: 08/02/22/, 0:20:25
> Subject: Re: [antlr-interest] Custom token set up from lexer rules
> 
> Bertalan Fodor schrieb:
> > Hello,
> > 
> > I would like to set up my custom token object from the lexer rules. 
> > Until now I only found one solution: set some member field in the lexer 
> > actions, then use that field in the overridden emit method. Isn't there 
> > a more elegant way for this?
> 
> Use
> 
> options {TokenLabelType=MyToken;}
> 
> instead. MyToken is a class probably derived from CommonToken.
> 
> Johannes
> 
> 

From rschulz at sonic.net  Thu Feb 21 15:54:02 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 21 Feb 2008 15:54:02 -0800
Subject: [antlr-interest] pseudocode translator to java,c and Ada
In-Reply-To: <940101.15417.qm@web28214.mail.ukl.yahoo.com>
References: <940101.15417.qm@web28214.mail.ukl.yahoo.com>
Message-ID: <200802211554.02672.rschulz@sonic.net>

On Thursday 21 February 2008 15:30, you wrote:
> You are right, but precisely, pseudocode(s) are not programming
> languages, so it (they) do(es) not really have syntax rules.

Well, then there's no hope of creating a parser, is there?


> I'll be happy with any of it ! (close to Pascal)

I'm afraid there's no way around devising a completely precise grammar 
if you're going to process it with ANTLR. Or yacc / Bison, JavaCC, 
SableCC or any other parser generator. They're all based on some form 
or elaboration of BNF (Backus Nauer Form). That's mostly what it means 
to be a formal grammar.


>> What is this "pseudocode" you speak of? There are a million, since
>> they're rarely formalized. And without formalization, they cannot be
>> translated, of course.

> ?so ...i assume that among the "million" pseudocode, at least, you
> have one? to propose me ;-)

Well, you cannot do better then LISP!


>> _The_ translator?? Unless I'm missing  something,
>> the use of the definite article is unwarranted. 
>
> ok, one translator !
>
> ok, let's say , I'll be happy to find One pseudocode translator to
> Ada, for instance, whatever the pseudocode looks like,

Well, I could be surprised, but I doubt such a thing exists.


> thank's all !
>
> Joe


Randall Schulz

From joe.token at yahoo.fr  Thu Feb 21 16:04:07 2008
From: joe.token at yahoo.fr (Joe Token)
Date: Fri, 22 Feb 2008 01:04:07 +0100 (CET)
Subject: [antlr-interest] Re :  pseudocode translator to java,c and Ada
Message-ID: <628263.57874.qm@web28216.mail.ukl.yahoo.com>

There might be a misunderstanding....
Let's say, i am an average end
user and i want to write requirements in pseudocode that is close to
Pascal (and of course, i have defined a BNF for 'this' pseudocode)
I
doubt that this average end user is familiar to Lisp...(and to follow
you, i shall say that there are a million of Lisp...even i guess you
are talking about smthg like Common Lisp)
Then...
I would like to
know, if someone has the idea of making a Java or Ada translator , from
this "common" pseudocode, just as in the past (some 20 years ago)
people developed CASE tools for the lazy programmers..
Thanks all  !   :-\


----- Message d'origine ----
De : Randall R Schulz <rschulz at sonic.net>
? : antlr-interest at antlr.org
Envoy? le : Vendredi, 22 F?vrier 2008, 0h54mn 02s
Objet : Re: [antlr-interest] pseudocode translator to java,c and Ada

On 
Thursday 
21 
February 
2008 
15:30, 
you 
wrote:
> 
You 
are 
right, 
but 
precisely, 
pseudocode(s) 
are 
not 
programming
> 
languages, 
so 
it 
(they) 
do(es) 
not 
really 
have 
syntax 
rules.

Well, 
then 
there's 
no 
hope 
of 
creating 
a 
parser, 
is 
there?


> 
I'll 
be 
happy 
with 
any 
of 
it 
! 
(close 
to 
Pascal)

I'm 
afraid 
there's 
no 
way 
around 
devising 
a 
completely 
precise 
grammar 
if 
you're 
going 
to 
process 
it 
with 
ANTLR. 
Or 
yacc 
/ 
Bison, 
JavaCC, 
SableCC 
or 
any 
other 
parser 
generator. 
They're 
all 
based 
on 
some 
form 
or 
elaboration 
of 
BNF 
(Backus 
Nauer 
Form). 
That's 
mostly 
what 
it 
means 
to 
be 
a 
formal 
grammar.


>> 
What 
is 
this 
"pseudocode" 
you 
speak 
of? 
There 
are 
a 
million, 
since
>> 
they're 
rarely 
formalized. 
And 
without 
formalization, 
they 
cannot 
be
>> 
translated, 
of 
course.

> 
 so 
...i 
assume 
that 
among 
the 
"million" 
pseudocode, 
at 
least, 
you
> 
have 
one  
to 
propose 
me 
;-)

Well, 
you 
cannot 
do 
better 
then 
LISP!


>> 
_The_ 
translator?  
Unless 
I'm 
missing  
something,
>> 
the 
use 
of 
the 
definite 
article 
is 
unwarranted. 
>
> 
ok, 
one 
translator 
!
>
> 
ok, 
let's 
say 
, 
I'll 
be 
happy 
to 
find 
One 
pseudocode 
translator 
to
> 
Ada, 
for 
instance, 
whatever 
the 
pseudocode 
looks 
like,

Well, 
I 
could 
be 
surprised, 
but 
I 
doubt 
such 
a 
thing 
exists.


> 
thank's 
all 
!
>
> 
Joe


Randall 
Schulz






      _____________________________________________________________________________ 
Ne gardez plus qu'une seule adresse mail ! Copiez vos mails vers Yahoo! Mail http://mail.yahoo.fr
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080222/97d67f30/attachment.html 

From lefevrol at yahoo.com  Thu Feb 21 16:05:03 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Fri, 22 Feb 2008 01:05:03 +0100
Subject: [antlr-interest] Customizing error messages
Message-ID: <fpl3jp$iib$1@ger.gmane.org>

It seems the standard way to customize error messages is to override
some BaseRecognizer method or methods, which can get rather involved.
In the case where you want the recognizer to exit immediately upon
recognition error, you must override two more methods. Wouldn't it
be a lot simpler to just throw your own Exception within an action
or the method body of a predicate? Just a question; it might not be a
good idea for reasons I don't appreciate.

Incidentally the book is confusing on this topic. In ?10.2 (p.246) it
says "To get these rich error messages, override two methods from
BaseRecognizer, displayRecognitionError() and getTokenErrorDisplay()"
but then it goes on to provide an example in which the overridden
methods are actually getErrorMessage() and getTokenErrorDisplay().
Same deal in the ?10.3 example, which again overrides getErrorMessage().
So, when might displayRecognitionError() be a useful one to override?

-- O.L.


From gbr at newtechlaw.com  Thu Feb 21 16:05:02 2008
From: gbr at newtechlaw.com (Gerald B. Rosenberg)
Date: Thu, 21 Feb 2008 16:05:02 -0800
Subject: [antlr-interest] Re :  pseudocode translator to java, c and  Ada
In-Reply-To: <940101.15417.qm@web28214.mail.ukl.yahoo.com>
References: <940101.15417.qm@web28214.mail.ukl.yahoo.com>
Message-ID: <200802220005.m1M05cN8010185@tach.newtechlaw.com>

At 03:30 PM 2/21/2008, you wrote:
>ok, let's say , I'll be happy to find One pseudocode translator to 
>Ada, for instance.


Since no one is using your particular pseudo-code representation, 
other than yourself, and Ada has such a small market share, you are 
bound to be unhappy.

If you wish a commercial solution, then www.jazillian.com is likely 
your best bet for having a translator developed for you.

Otherwise, http://www.antlr.org/grammar/pascal/ is probably the 
closest you are going to get to an existing solution.  "All" you have 
to do then is tweak the grammar to accept your pascal-like 
pseudo-code and add an AST->stringtemplate walker to generate 
Java.  If you really want Ada as output, you will have to port the 
stringtemplate libary to generate Ada.


From joe.token at yahoo.fr  Thu Feb 21 16:39:47 2008
From: joe.token at yahoo.fr (Joe Token)
Date: Fri, 22 Feb 2008 00:39:47 +0000 (GMT)
Subject: [antlr-interest]  Re : pseudocode translator to java, c and Ada
Message-ID: <875898.45526.qm@web28206.mail.ukl.yahoo.com>

--> P2Ada already exists, in addition it is not what i am looking for.
and if i am posting to the list, i do not want a commercial solution.
I am only asking the list if :
does anyone started from any pseudocode to make a translator to java ?

-----------------------------------------------------------------
Since no one is using your particular pseudo-code representation, 
other than yourself, and Ada has such a small market share, you are 
bound to be unhappy.

If you wish a commercial solution, then www.jazillian.com is likely 
your best bet for having a translator developed for you.

Otherwise, http://www.antlr.org/grammar/pascal/ is probably the 
closest you are going to get to an existing solution.  "All" you have 
to do then is tweak the grammar to accept your pascal-like 
pseudo-code and add an AST->stringtemplate walker to generate 
Java.  If you really want Ada as output, you will have to port the 
stringtemplate libary to generate Ada.




      _____________________________________________________________________________ 
Ne gardez plus qu'une seule adresse mail ! Copiez vos mails vers Yahoo! Mail http://mail.yahoo.fr
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080222/ed983c81/attachment.html 

From rschulz at sonic.net  Thu Feb 21 16:45:15 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 21 Feb 2008 16:45:15 -0800
Subject: [antlr-interest] pseudocode translator to java,c and Ada
In-Reply-To: <628263.57874.qm@web28216.mail.ukl.yahoo.com>
References: <628263.57874.qm@web28216.mail.ukl.yahoo.com>
Message-ID: <200802211645.15109.rschulz@sonic.net>

On Thursday 21 February 2008 16:04, Joe Token wrote:
> There might be a misunderstanding....
>
> Let's say, i am an average end user and i want to write requirements
> in pseudocode that is close to Pascal (and of course, i have defined
> a BNF for 'this' pseudocode)

Well, then start with Pascal.

If you haven't figured it out by now, no one has written an ANTLR 
grammar for some nebulous, unspecified, vaguely similar to Pascal 
language. And, dare I ask, "why would they?"

You're really on your own. You have to be 100% precise and specific 
about both the input and the output languages you wish to work with. 
There's simply no way around that, and saying things like "close to 
Pascal" simply won't cut it.


> I doubt that this average end user

Well, your "average" and mine are probably very different.


> is familiar to Lisp...(and to follow you, i shall say that there are a 
> million of Lisp...even i guess you are talking about smthg like
> Common Lisp) Then...
> I would like to know, if someone has the idea of making a Java or Ada
> translator , from this "common" pseudocode,

Oy. There _is no "common" pseudocode_!! None. Never. Anywhere!!!!


> just as in the past (some 20 years ago) people developed CASE tools
> for the lazy programmers..

Excuse me? What CASE tools? For which "lazy" programmers? And, if I dare 
say it, what might be the proper characterization of someone who wants 
to use someone else's grammar? "Lazy," perhaps?


> Thanks all? !?? :-\

Yeah, sure.


RRS

From joe.token at yahoo.fr  Thu Feb 21 17:07:45 2008
From: joe.token at yahoo.fr (Joe Token)
Date: Fri, 22 Feb 2008 02:07:45 +0100 (CET)
Subject: [antlr-interest]  pseudocode translator to java,c and Ada
Message-ID: <59877.61742.qm@web28202.mail.ukl.yahoo.com>

Rendall,

Pascal is not a pseudocode, but a programming language.

If i had already defined a precise pseudocode, then i should continue on with the lexer, and parser...and so on, and certainly not asking anything from you....

You do not need to answer the way you did; i was only asking the list if someone had already worked in the translation from a pseudocode to a programming language.

Commercial CASE tools exist from several years...and i am not looking for them.

A specification language is not written in any programming language. You may use the natural language, any controlled language, or algorithm language, but i have never heard that, at this stage of the software development process, someone would use Pascal or Lisp !  :o)

Maybe some other people have heard about model transformations, ANTLR is pretty used for it. So if any of you started from any pseucode to translate it further in a programming language, i'll be pleased to know it,

Best
Joe ;-)






      _____________________________________________________________________________ 
Ne gardez plus qu'une seule adresse mail ! Copiez vos mails vers Yahoo! Mail http://mail..yahoo.fr
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080222/b1446bb9/attachment.html 

From darien.hager at etelos-inc.com  Thu Feb 21 17:24:48 2008
From: darien.hager at etelos-inc.com (Darien Hager)
Date: Thu, 21 Feb 2008 17:24:48 -0800
Subject: [antlr-interest] pseudocode translator to java,c and Ada
In-Reply-To: <200802211645.15109.rschulz@sonic.net>
References: <628263.57874.qm@web28216.mail.ukl.yahoo.com>
	<200802211645.15109.rschulz@sonic.net>
Message-ID: <c8c997f40802211724w726d3ad2n7d7dba6864065a70@mail.gmail.com>

Mr. Token, if I understand you correctly, you want to create your
own scripting language, and then translate that language into some
other programming
language. Note that a custom scripting language is *not* the same as
pseudocode, since "pseudocode", by definition, is non-standardized and
vague. It's the difference between the mathmatical equation "X=Y+Z" and
someone writing on a sticky-note: "I think X should be Y plus whatever that
thing was from before."

Yes, ANTLR makes it much easier for you to do that than it would be by
hand. If your new language is very similar to an existing one (e.g.
Pascal) you can try to find an
ANTLR grammar file someone else might already have made and modify
that. Otherwise you will need to write your own grammar file.

And after *that* you will need to figure out how blocks of your scripting
language turn into blocks of another language, and program those in.


-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are not
the intended recipient, then this is notice that any use, disclosure,
dissemination, distribution or copying is strictly prohibited. If you have
received this message in error please contact the sender by reply mail and
destroy all copies of the original message.


This e-mail message, including attachments, may contain confidential information for the sole use of the intended recipient(s). If you are not the intended recipient, then this is notice that any use, disclosure, dissemination, distribution or copying is strictly prohibited.  If you have received this message in error please contact the sender by reply mail and destroy all copies of the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080221/c6b57113/attachment.html 

From rschulz at sonic.net  Thu Feb 21 17:38:34 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 21 Feb 2008 17:38:34 -0800
Subject: [antlr-interest] pseudocode translator to java,c and Ada
In-Reply-To: <560788.13339.qm@web28205.mail.ukl.yahoo.com>
References: <560788.13339.qm@web28205.mail.ukl.yahoo.com>
Message-ID: <200802211738.34132.rschulz@sonic.net>

On Thursday 21 February 2008 17:20, Joe Token wrote:
> I do not unserstand why you are so aggresive ??
> the question is very simple :
> is there anyone that has been working on  a pseudocode translation ?
> I do not want to spend time on it, if it has already been done.
> Is there anything wrong with that ??!!

You and I do not share a common definition for "aggressive."


You are asking a nonsense question. The degree of tolerance owed such a 
thing in any engineering field is very limited. If you are a student, 
you should be taking such matters up with a teacher, not a 
practitioners' forum.

It is impossible that "it has already been done," since what you ask has 
no definition. (Or infinitely many. Either way, your request cannot be 
accommodated.)


Lastly, since you began this discussion in a public forum, it is 
inappropriate for you to redirect any of it to my personal mailbox.


RRS

From joe.token at yahoo.fr  Thu Feb 21 17:40:22 2008
From: joe.token at yahoo.fr (Joe Token)
Date: Fri, 22 Feb 2008 01:40:22 +0000 (GMT)
Subject: [antlr-interest] (no subject)
Message-ID: <340681.74948.qm@web28214.mail.ukl.yahoo.com>

Well Darien,

"I think X should be Y plus whatever that
thing was from before." is not pseudocode

i would rather write it

if X = Y + Z 
   then X:= 0;


so you might be able to translate this statement in any programming language...

My question is simply is anyone here has done this exercice ?

(Btw there exist some formal pseucode, and i do not want to spend time
rewriting one more pseudocode when it is not my purpose)










      _____________________________________________________________________________ 
Ne gardez plus qu'une seule adresse mail ! Copiez vos mails vers Yahoo! Mail http://mail.yahoo.fr
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080222/bf43c331/attachment-0002.html 

From joe.token at yahoo.fr  Thu Feb 21 17:40:22 2008
From: joe.token at yahoo.fr (Joe Token)
Date: Fri, 22 Feb 2008 01:40:22 +0000 (GMT)
Subject: [antlr-interest] (no subject)
Message-ID: <340681.74948.qm@web28214.mail.ukl.yahoo.com>

Well Darien,

"I think X should be Y plus whatever that
thing was from before." is not pseudocode

i would rather write it

if X = Y + Z 
   then X:= 0;


so you might be able to translate this statement in any programming language...

My question is simply is anyone here has done this exercice ?

(Btw there exist some formal pseucode, and i do not want to spend time
rewriting one more pseudocode when it is not my purpose)










      _____________________________________________________________________________ 
Ne gardez plus qu'une seule adresse mail ! Copiez vos mails vers Yahoo! Mail http://mail.yahoo.fr
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080222/bf43c331/attachment-0003.html 

From joe.token at yahoo.fr  Thu Feb 21 18:21:54 2008
From: joe.token at yahoo.fr (Joe Token)
Date: Fri, 22 Feb 2008 03:21:54 +0100 (CET)
Subject: [antlr-interest] Re :  pseudocode translator to java,c and Ada
Message-ID: <364189.74128.qm@web28206.mail.ukl.yahoo.com>

Well, Randall,

I cannot really answer you, as you are only talking to yourself.
A list is open to any question like mine , why should i keep it ?
Besides, i do not want to justify if i am a student or a teacher.
From what i understand, you have been none of them, because
when you are a student, you want to learn from the others and
when you are a teacher you want to share with the others.

So i leave the question open for those who are intersted to talk about :

did anyone worked on pseudocode-->java translation ? thanks for any constructive answer !

Joe

----- Message d'origine ----
De : Randall R Schulz <rschulz at sonic.net>
? : antlr-interest at antlr.org
Envoy? le : Vendredi, 22 F?vrier 2008, 2h38mn 34s
Objet : Re: [antlr-interest] pseudocode translator to java,c and Ada

On 
Thursday 
21 
February 
2008 
17:20, 
Joe 
Token 
wrote:
> 
I 
do 
not 
unserstand 
why 
you 
are 
so 
aggresive 
??
> 
the 
question 
is 
very 
simple 
:
> 
is 
there 
anyone 
that 
has 
been 
working 
on  
a 
pseudocode 
translation 
?
> 
I 
do 
not 
want 
to 
spend 
time 
on 
it, 
if 
it 
has 
already 
been 
done..
> 
Is 
there 
anything 
wrong 
with 
that 
??!!

You 
and 
I 
do 
not 
share 
a 
common 
definition 
for 
"aggressive."


You 
are 
asking 
a 
nonsense 
question. 
The 
degree 
of 
tolerance 
owed 
such 
a 
thing 
in 
any 
engineering 
field 
is 
very 
limited. 
If 
you 
are 
a 
student, 
you 
should 
be 
taking 
such 
matters 
up 
with 
a 
teacher, 
not 
a 
practitioners' 
forum.

It 
is 
impossible 
that 
"it 
has 
already 
been 
done," 
since 
what 
you 
ask 
has 
no 
definition. 
(Or 
infinitely 
many. 
Either 
way, 
your 
request 
cannot 
be 
accommodated.)


Lastly, 
since 
you 
began 
this 
discussion 
in 
a 
public 
forum, 
it 
is 
inappropriate 
for 
you 
to 
redirect 
any 
of 
it 
to 
my 
personal 
mailbox.


RRS






      _____________________________________________________________________________ 
Ne gardez plus qu'une seule adresse mail ! Copiez vos mails vers Yahoo! Mail http://mail.yahoo.fr
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080222/b1c1d06d/attachment.html 

From rschulz at sonic.net  Thu Feb 21 18:32:34 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 21 Feb 2008 18:32:34 -0800
Subject: [antlr-interest] pseudocode translator to java,c and Ada
In-Reply-To: <364189.74128.qm@web28206.mail.ukl.yahoo.com>
References: <364189.74128.qm@web28206.mail.ukl.yahoo.com>
Message-ID: <200802211832.34304.rschulz@sonic.net>

On Thursday 21 February 2008 18:21, you wrote:
> Well, Randall,
>
> I cannot really answer you, as you are only talking to yourself.

There is no answer to give. I asked no question.


> A list is open to any question like mine , why should i keep it ?
> Besides, i do not want to justify if i am a student or a teacher.
> From what i understand, you have been none of them, because
> when you are a student, you want to learn from the others and
> when you are a teacher you want to share with the others.

I have long been and continue to be both.


> So i leave the question open for those who are intersted to talk
> about :
>
> did anyone worked on pseudocode-->java translation?

The question continues to be meaningless.

Give a grammar for your pseudocode (virtually certain to be 
idiosyncratic) and you can get an answer (virtually certain to 
be "no").

Pseudocode is, per se, not a thing. It cannot be "implemented." It 
cannot be "translated."

And once you pin down the grammar... well, then, it's no 
longer "pseudo," is it?


I am only trying to get you to think about your question. Otherwise you 
will founder endlessly.

Perhaps you could start by giving some examples? They will elicit 
specific questions about (gasp!) the grammar they exemplify. As you 
answer them and as that process continues, you'll end up with a 
particular grammar. _That_ can be implemented. But I assure you that no 
one has done so before?it will be a novel language.

So it goes.

So you might as well skip the vacuous questions and start conceiving the 
grammar of the "pseudo-" code you wish to implement. When you do, it 
will no longer be pseudo, but it will (potentially) be implementable.


> Joe


Randall Schulz

From darien.hager at etelos-inc.com  Thu Feb 21 18:38:19 2008
From: darien.hager at etelos-inc.com (Darien Hager)
Date: Thu, 21 Feb 2008 18:38:19 -0800
Subject: [antlr-interest] (no subject)
In-Reply-To: <340681.74948.qm@web28214.mail.ukl.yahoo.com>
References: <340681.74948.qm@web28214.mail.ukl.yahoo.com>
Message-ID: <c8c997f40802211838j8ded924p23c5c444cf0ca3c5@mail.gmail.com>

Look, I was giving an analogy. I KNOW it's not pseudocode.

The point that I think others' are getting concerned over is that
"pseudocode" is, by all commonly accepted definition, not a formal way to
write things. Anyone trying to talk about a "formal pseudocode" is distoring
the meaning of the word, and actually means a "scripting language that has
no software and cannot be used".

If your language is truly "pseudocode", then it is by definition not
standardized and cannot be processed any more than the English language can
be. If you CAN process your language with strict rules and syntax, then it
is not truly "pseudocode".

It's a terminology thing. It is as if you were saying: "I want to translate
a portrait painting into a German book."

> My question is simply is anyone here has done this exercice ?

Trust me on this one, try asking:
"Can anyone offer me tips on
creating an automatic translator so that I can turn my custom language
into source code in another language. My custom language is most
similar to [name
of an existing scripting or programming language]."


-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are not
the intended recipient, then this is notice that any use, disclosure,
dissemination, distribution or copying is strictly prohibited. If you have
received this message in error please contact the sender by reply mail and
destroy all copies of the original message.


This e-mail message, including attachments, may contain confidential information for the sole use of the intended recipient(s). If you are not the intended recipient, then this is notice that any use, disclosure, dissemination, distribution or copying is strictly prohibited.  If you have received this message in error please contact the sender by reply mail and destroy all copies of the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080221/98ff3e09/attachment.html 

From gbr at newtechlaw.com  Thu Feb 21 19:33:39 2008
From: gbr at newtechlaw.com (Gerald B. Rosenberg)
Date: Thu, 21 Feb 2008 19:33:39 -0800
Subject: [antlr-interest] Re :  pseudocode translator to java, c and  Ada
In-Reply-To: <364189.74128.qm@web28206.mail.ukl.yahoo.com>
References: <364189.74128.qm@web28206.mail.ukl.yahoo.com>
Message-ID: <200802220333.m1M3XnTD011090@tach.newtechlaw.com>

At 06:21 PM 2/21/2008, Joe Token wrote:
>So i leave the question open for those who are intersted to talk about :
>
>did anyone worked on pseudocode-->java translation ? thanks for any 
>constructive answer !

You have been rather dismissive of all efforts to give you 
constructive answers.  Perhaps it is a language problem.

This is an Antlr specific list, as you know.
As you may not (fully) realize, Antlr is a formal language 
parser/generator.  Although quite flexible, there are limits to its use.
Pseudo-code is not a formal language, by any definition.

If you have a formal specification for your pseudo-code, then it 
really is a formal domain specific language.  All of the 
case/modeling tools that I am aware of are based on DSLs.  Many, if 
not most Antlr projects do DSL transforms and the StringTemplate 
library makes Java output trivial.  If this is your case, then the 
short answer you are seeking is "yes" and "most everyone".

If you don't have a formal specification, then you will need some 
form of natural language parser, or fuzzy logic evaluator to handle 
the pseudo-code input.  If that is your case, then you are really 
asking a question very ill suited for this list.

I work with MaxEntropy-based processors and Bayesian classifiers, as 
well as various neural networks.  None would be well-suited to 
support a soft, ill-defined pseudo-code transform to a hard formal 
language.  Except perhaps in some very specific, very limited circumstances.

Maybe you need to explain more just what your pseudo-code is and what 
the transformed output is supposed to be/do.  And, try to be constructive!


From jimi at temporal-wave.com  Thu Feb 21 19:06:59 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 21 Feb 2008 19:06:59 -0800
Subject: [antlr-interest] Re :  pseudocode translator to java,c and Ada
In-Reply-To: <628263.57874.qm@web28216.mail.ukl.yahoo.com>
Message-ID: <"H000006700045a19.1203649327.scalix.temporal-wave.com*"@MHS>

My feeling is that what you are really saying is one of:

 

1)      I want a natural language processor, but one that is bound by a
certain set of rules, so the input has a definite closed set;

2)      Does anyone know of a formally defined language that is akin in
some ways to how people write pseudo-code, but that isn?t pseudo-code
(which is an open ended problem) and that  is used for specifying
programs, but is a lot easier to learn than the usual set of programming
languages. Try writing the previous sentence in pseudo-code.

 

If 1, then depending on the scope, ANLTR might work for the problem, but
there are other tools that are more specifically aimed at this sort of
thing. You might find a group that deals with natural language
processing and start there. You can make ANTLR be a part of anything
really, but whether you are using the correct tool is always something
you should ask ;-). I ask it of myself, and I would rather use ANTLR
than kiss my mother.

 

If 2, then I don?t know of such a thing beyond the highly ambiguous and
error prone languages born of attempts at ?4GL? by people with no idea
what computer languages are (which is not a benefit to writing a user
friendly language, before anyone pipes up ;-). I think that the issue is
not that people cannot think of reasonable languages, but that by
definition you invent a programming language, albeit at a higher level
than C, Java and so on. Hence you end up asking people to be
programmers. So, even if someone has done something like this, my
feeling is that you would find it of no particular benefit for real
world scenarios.

 

It might be more useful to you to state what the problem is that you are
trying to solve, which might be an interesting discussion. You may be
asking for 4 strong men to push a car up a hill when what you want is a
gallon of gas.

 

Jim

 

 

 

 

From: Joe Token [mailto:joe.token at yahoo.fr] 
Sent: Thursday, February 21, 2008 4:04 PM
To: Randall R Schulz; antlr-interest at antlr.org
Subject: [antlr-interest] Re : pseudocode translator to java,c and Ada

 

There might be a misunderstanding....
Let's say, i am an average end user and i want to write requirements in
pseudocode that is close to Pascal (and of course, i have defined a BNF
for 'this' pseudocode)
I doubt that this average end user is familiar to Lisp...(and to follow
you, i shall say that there are a million of Lisp...even i guess you are
talking about smthg like Common Lisp)
Then...
I would like to know, if someone has the idea of making a Java or Ada
translator , from this "common" pseudocode, just as in the past (some 20
years ago) people developed CASE tools for the lazy programmers..
Thanks all  !   :-\



----- Message d'origine ----
De : Randall R Schulz <rschulz at sonic.net>
? : antlr-interest at antlr.org
Envoy? le : Vendredi, 22 F?vrier 2008, 0h54mn 02s
Objet : Re: [antlr-interest] pseudocode translator to java,c and Ada

On Thursday 21 February 2008 15:30, you wrote:
> You are right, but precisely, pseudocode(s) are not programming
> languages, so it (they) do(es) not really have syntax rules.

Well, then there's no hope of creating a parser, is there?


> I'll be happy with any of it ! (close to Pascal)

I'm afraid there's no way around devising a completely precise grammar 
if you're going to process it with ANTLR. Or yacc / Bison, JavaCC, 
SableCC or any other parser generator. They're all based on some form 
or elaboration of BNF (Backus Nauer Form). That's mostly what it means 
to be a formal grammar.


>> What is this "pseudocode" you speak of? There are a million, since
>> they're rarely formalized. And without formalization, they cannot be
>> translated, of course.

>  so ...i assume that among the "million" pseudocode, at least, you
> have one  to propose me ;-)

Well, you cannot do better then LISP!


>> _The_ translator?  Unless I'm missing  something,
>> the use of the definite article is unwarranted. 
>
> ok, one translator !
>
> ok, let's say , I'll be happy to find One pseudocode translator to
> Ada, for instance, whatever the pseudocode looks like,

Well, I could be surprised, but I doubt such a thing exists.


> thank's all !
>
> Joe


Randall Schulz

 

 

  _____  

Ne gardez plus qu'une seule adresse mail ! Copiez vos mails vers Yahoo!
Mail 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080221/da6be6fa/attachment-0001.html 

From tbrandonau at gmail.com  Thu Feb 21 19:37:08 2008
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Fri, 22 Feb 2008 14:37:08 +1100
Subject: [antlr-interest] $ in action comments
In-Reply-To: <20080221185334.3F40C11EDF3@www.antlr.org>
References: <18292781.711203615030512.JavaMail.ICEMail@snegopad>
	<20080221185334.3F40C11EDF3@www.antlr.org>
Message-ID: <ebc876d70802211937s6b72539dqc64e06168d5cf178@mail.gmail.com>

On Fri, Feb 22, 2008 at 5:53 AM, Gavin Lambert <antlr at mirality.co.nz> wrote:
> At 06:30 22/02/2008, Ian Moor wrote:
>   >I have finally tracked down two errors from generating a tree
>   >parser:
>   >error(111): pico/Gen.g:16:9: reference to attribute outside of a
>
>   >rule: zero
>   >error(114): pico/Gen.g:454:11: attribute is not a token,
>  parameter,
>   >or return value: v0
>   >
>   > in the first case there is a  // comment in the
>  members  sections
>   >containing $zero, and in the second case there is a comment  in
>  an
>   >action containing a $v0.
>
>  ANTLR doesn't understand the syntax of the target language, so it
>  doesn't know what are comments and what aren't.  The only things
>  it looks for are $s (to expand), }s (to terminate the block), and
>  {s (to avoid terminating too early).
>
>
ANTLR first delineates actions in the main lexer, then actions are
analysed by a seperate lexer and converted into chunks.
When delineating actions ANTLR handles strings (" or '), single\multi
line comments (/* and //) and nested blocks delimited by {}. In the
case of argument actions comments and ' delimited strings aren't
handled and the block delimiter is [].
However when analysing the actions it just looks for the various $ and
% sequences.
So in fact ANTLR does make assumptions about the comment syntax of
target languages so perhaps it should be extended to deal with them in
the action analysis phase.

Tom.

From joe.token at yahoo.fr  Thu Feb 21 20:14:13 2008
From: joe.token at yahoo.fr (Joe Token)
Date: Fri, 22 Feb 2008 05:14:13 +0100 (CET)
Subject: [antlr-interest] Re :  Re :  pseudocode translator to java,
	c and Ada
Message-ID: <859744.46696.qm@web28216.mail.ukl.yahoo.com>

Thank you fo trying to understand...
I do not know another way of writing algorithms than using a pseudocode.
So, when i have to write a complex algorithm,
i start to use a pseudo, which might not being standardized, but
that everyone understands.
So, you see it is none of 1/ or 2/ because the question is not that it is easier to write
with a pseudo than a programming language.
The question is you are not at the same abstraction level, when you have to specify smth.

Then...once you have written you specification, you would like 
to implement one way of coomputing the result in your favorite language.

So, if i got a precise grammar for my "pseudo" pseudocode, i should be able to make a translator.

Then..the question was : does anyone here has done this work before ?





----- Message d'origine ----
De : Jim Idle <jimi at temporal-wave.com>
? : antlr-interest <antlr-interest at antlr.org>
Envoy? le : Vendredi, 22 F?vrier 2008, 4h06mn 59s
Objet : Re: [antlr-interest] Re :  pseudocode translator to java,c and Ada





 


<!--
 _filtered {font-family:"Cambria Math";panose-1:2 4 5 3 5 4 6 3 2 4;}
 _filtered {font-family:Calibri;panose-1:2 15 5 2 2 2 4 3 2 4;}
 _filtered {font-family:Tahoma;panose-1:2 11 6 4 3 5 4 4 2 4;}
/* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;margin-bottom:.0001pt;font-size:12.0pt;font-family:"Times New Roman", "serif";}
a:link, span.MsoHyperlink
	{color:blue;text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;text-decoration:underline;}
p
	{margin-right:0in;margin-left:0in;font-size:12.0pt;font-family:"Times New Roman", "serif";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.5in;margin-bottom:.0001pt;font-size:12.0pt;font-family:"Times New Roman", "serif";}
span.EmailStyle18
	{font-family:"Calibri", "sans-serif";color:#1F497D;}
.MsoChpDefault
	{font-size:10.0pt;}
 _filtered {margin:1.0in 1.0in 1.0in 1.0in;}
div.Section1
	{}
 _filtered {}
 _filtered {}
ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->






My feeling is that what you are really saying is one of: 




   




1)     
I want a natural language processor, but one that is bound by a
certain set of rules, so the input has a definite closed set; 




2)     
Does anyone know of a formally defined language that is akin in
some ways to how people write pseudo-code, but that isn?t pseudo-code
(which is an open ended problem) and that  is used for specifying programs, but
is a lot easier to learn than the usual set of programming languages. Try
writing the previous sentence in pseudo-code. 




   




If 1, then depending on the scope, ANLTR might work for the
problem, but there are other tools that are more specifically aimed at this
sort of thing. You might find a group that deals with natural language processing
and start there. You can make ANTLR be a part of anything really, but whether
you are using the correct tool is always something you should ask ;-). I ask it
of myself, and I would rather use ANTLR than kiss my mother. 




   




If 2, then I don?t know of such a thing beyond the highly
ambiguous and error prone languages born of attempts at ?4GL? by
people with no idea what computer languages are (which is not a benefit to
writing a user friendly language, before anyone pipes up ;-). I think that the
issue is not that people cannot think of reasonable languages, but that by definition
you invent a programming language, albeit at a higher level than C, Java and so
on. Hence you end up asking people to be programmers. So, even if someone has
done something like this, my feeling is that you would find it of no particular
benefit for real world scenarios. 




   




It might be more useful to you to state what the problem is that
you are trying to solve, which might be an interesting discussion. You may be
asking for 4 strong men to push a car up a hill when what you want is a gallon
of gas. 




   




Jim 




   




   






   







   










From: Joe Token [mailto:joe.token at yahoo.fr]



Sent: Thursday, February 21, 2008 4:04 PM


To: Randall R Schulz; antlr-interest at antlr.org


Subject: [antlr-interest] Re : pseudocode translator to java,c and Ada 










   








There
might be a misunderstanding....


Let's say, i am an average end user and i want to write requirements in
pseudocode that is close to Pascal (and of course, i have defined a BNF for
'this' pseudocode)


I doubt that this average end user is familiar to Lisp...(and to follow you, i
shall say that there are a million of Lisp...even i guess you are talking about
smthg like Common Lisp)


Then...


I would like to know, if someone has the idea of making a Java or Ada
translator , from this "common" pseudocode, just as in the past (some
20 years ago) people developed CASE tools for the lazy programmers..


Thanks all  !   :-\





 






----- Message d'origine ----


De : Randall R Schulz <rschulz at sonic.net>


? : antlr-interest at antlr.org


Envoy? le : Vendredi, 22 F?vrier 2008, 0h54mn 02s


Objet : Re: [antlr-interest] pseudocode translator to java,c and Ada





On Thursday 21 February 2008 15:30, you wrote:


> You are right, but precisely, pseudocode(s) are not programming


> languages, so it (they) do(es) not really have syntax rules.





Well, then there's no hope of creating a parser, is there?








> I'll be happy with any of it ! (close to Pascal)





I'm afraid there's no way around devising a completely precise grammar 


if you're going to process it with ANTLR. Or yacc / Bison, JavaCC, 


SableCC or any other parser generator. They're all based on some form 


or elaboration of BNF (Backus Nauer Form). That's mostly what it means 


to be a formal grammar.








>> What is this "pseudocode" you speak of? There are a million,
since


>> they're rarely formalized. And without formalization, they cannot be


>> translated, of course.





>  so ...i assume that among the "million" pseudocode, at
least, you


> have one  to propose me ;-)





Well, you cannot do better then LISP!








>> _The_ translator?  Unless I'm missing  something,


>> the use of the definite article is unwarranted. 


>


> ok, one translator !


>


> ok, let's say , I'll be happy to find One pseudocode translator to


> Ada, for instance, whatever the pseudocode looks like,





Well, I could be surprised, but I doubt such a thing exists.








> thank's all !


>


> Joe








Randall Schulz 







   










   






  






Ne gardez plus qu'une seule adresse mail ! Copiez
vos mails vers Yahoo! Mail 
















      _____________________________________________________________________________ 
Ne gardez plus qu'une seule adresse mail ! Copiez vos mails vers Yahoo! Mail http://mail.yahoo.fr
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080222/a27ad441/attachment.html 

From mrphilipmarlowe at gmail.com  Thu Feb 21 21:53:19 2008
From: mrphilipmarlowe at gmail.com (Philip Marlowe)
Date: Fri, 22 Feb 2008 06:53:19 +0100
Subject: [antlr-interest]  pseudocode translator to java, c and Ada
Message-ID: <6eb54a990802212153u220ddde9qbd51991171fc7141@mail.gmail.com>

Hi Mr Schulz,

Joe is only trying to know if someone has ever mechanized the translation
from a pseudocode to any programming language.

If the ANTLR grammar list is complete, then the answer is No,

Philip
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080222/2b556c81/attachment.html 

From joe.token at yahoo.fr  Thu Feb 21 22:33:15 2008
From: joe.token at yahoo.fr (Joe Token)
Date: Fri, 22 Feb 2008 06:33:15 +0000 (GMT)
Subject: [antlr-interest] Re :   pseudocode translator to java, c and Ada
Message-ID: <481828.85636.qm@web28204.mail.ukl.yahoo.com>

Thanks Philip,
at least you understood the issue ;-)
Joe

----- Message d'origine ----
De : Philip Marlowe <mrphilipmarlowe at gmail.com>
? : antlr-interest at antlr.org
Envoy? le : Vendredi, 22 F?vrier 2008, 6h53mn 19s
Objet : [antlr-interest]  pseudocode translator to java, c and Ada

Hi Mr Schulz,

Joe is only trying to know if someone has ever mechanized the translation from a pseudocode to any programming language.

If the ANTLR grammar list is complete, then the answer is No,

Philip







      ______________________________________________________________________________ 
Yahoo! Mail : un mail innovant avec Messenger compatible Windows Live + stockage illimit?. http://mail.yahoo.fr
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080222/3195fa7e/attachment-0001.html 

From gn at fluidon.dyndns.info  Thu Feb 21 22:35:28 2008
From: gn at fluidon.dyndns.info (Christian Gudrian)
Date: Fri, 22 Feb 2008 07:35:28 +0100
Subject: [antlr-interest] OT: Mailing List Configuration (was: pseudocode
	translator to java, c and Ada)
In-Reply-To: <200802211738.34132.rschulz@sonic.net>
References: <560788.13339.qm@web28205.mail.ukl.yahoo.com>
	<200802211738.34132.rschulz@sonic.net>
Message-ID: <CBBC1EE8-F014-4F75-BFB9-6A4459C1A3D4@fluidon.dyndns.info>


Am 22.02.2008 um 02:38 schrieb Randall R Schulz:

> Lastly, since you began this discussion in a public forum, it is
> inappropriate for you to redirect any of it to my personal mailbox.

Perhaps the mail server should attach a Reply-To header to the mails.   
I always need to edit the To field myself to ensure that I send my  
replies to the mailing list rather than the person I am replying to.

Christian

From mrphilipmarlowe at gmail.com  Thu Feb 21 22:38:14 2008
From: mrphilipmarlowe at gmail.com (Philip Marlowe)
Date: Fri, 22 Feb 2008 07:38:14 +0100
Subject: [antlr-interest] Re :  pseudocode translator to java, c and Ada
In-Reply-To: <481828.85636.qm@web28204.mail.ukl.yahoo.com>
References: <481828.85636.qm@web28204.mail.ukl.yahoo.com>
Message-ID: <6eb54a990802212238v182562eaxe02e1ecf66003f12@mail.gmail.com>

You are welcome Joe,
and i am pretty sure that other people will give you some positive answers,
don't give up, man !
Cheers
Philip

2008/2/22, Joe Token <joe.token at yahoo.fr>:
>
> Thanks Philip,
> at least you understood the issue ;-)
> Joe
>
> ----- Message d'origine ----
> De : Philip Marlowe <mrphilipmarlowe at gmail.com>
> ? : antlr-interest at antlr.org
> Envoy? le : Vendredi, 22 F?vrier 2008, 6h53mn 19s
> Objet : [antlr-interest] pseudocode translator to java, c and Ada
>
> Hi Mr Schulz,
>
> Joe is only trying to know if someone has ever mechanized the translation
> from a pseudocode to any programming language.
>
> If the ANTLR grammar list is complete, then the answer is No,
>
> Philip
>
>
> ------------------------------
> Yahoo! Mail<http://fr.rd.yahoo.com/mail/mail_taglines/gmail/*http://fr.docs.yahoo.com/mail/overview/index.html>: un mail innovant avec Messenger compatible Windows Live + stockage
> illimit?.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080222/7195b5f8/attachment.html 

From lgcraymer at yahoo.com  Thu Feb 21 23:56:59 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Thu, 21 Feb 2008 23:56:59 -0800 (PST)
Subject: [antlr-interest] pseudocode translator to java, c and Ada
Message-ID: <941036.97182.qm@web55908.mail.re3.yahoo.com>

Pseudocode notations are by definition not formal languages and so not within the purview of ANTLR.  The ANTLR grammar list is far from complete, but ANTLR has certainly been used for modeling languages (seems to be closest to what Joe is asking for) and for specification languages, including ASN.1.

--Loring

----- Original Message ----
From: Philip Marlowe <mrphilipmarlowe at gmail.com>
To: antlr-interest at antlr.org
Sent: Thursday, February 21, 2008 9:53:19 PM
Subject: [antlr-interest]  pseudocode translator to java, c and Ada

Hi Mr Schulz,

Joe is only trying to know if someone has ever mechanized the translation from a pseudocode to any programming language.

If the ANTLR grammar list is complete, then the answer is No,

Philip






      ____________________________________________________________________________________
Never miss a thing.  Make Yahoo your home page. 
http://www.yahoo.com/r/hs
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080221/218bc0dd/attachment.html 

From brianchina60221 at gmail.com  Fri Feb 22 02:01:44 2008
From: brianchina60221 at gmail.com (brian)
Date: Fri, 22 Feb 2008 18:01:44 +0800
Subject: [antlr-interest] simple but really messy records
Message-ID: <22f6a8f70802220201v77742ab3ne4a8ac8406d9da9b@mail.gmail.com>

I'm trying to decide whether ANTLR is appropriate for something.

I'm trying to clean up several million one-line fixed-length records
from an IBM AS/400. They're entered by humans and are very messy, but
the vast majority do have some structure that can be recognized and
parsed, say, by regular expressions. I just need to decide which part
of the line represents a name, which represents a date, etc. I could
write maybe 100 regular expressions and apply them until I got a match
to recognize most of them. But I think this does a lot of the same
work over and over, making it slow. I might be able to write a truly
horrendous regular expression that doesn't redo as much work, but it'd
be hard to maintain. I think maybe ANTLR's memoize might help a lot.

But the only token I can think to make is CHARACTER. Sometimes a date
looks like 2008-02-22, but something that looks that way isn't
necessarily a date, so I don't want to make a token for it. Usually if
you see 'int' or whatever, you can say without hesitation that means a
certain thing and can generate an appropriate token, but I don't think
I can here. There aren't any keywords. I basically want to use ANTLR
as if it was a way of building a regex that would be way too difficult
to make/maintain by hand.

So people with a lot of experience, please say whether using ANTLR is
probably good or probably bad. If probably bad, are there more
appropriate technologies? Thank you.

From oliver.kowalke at gmx.de  Fri Feb 22 02:18:22 2008
From: oliver.kowalke at gmx.de (Oliver Kowalke)
Date: Fri, 22 Feb 2008 11:18:22 +0100
Subject: [antlr-interest] howto write stringtemplate for optional rule?
Message-ID: <20080222101822.261320@gmx.net>

Hello,
how can I express in the stringtemplate that DEILMETER is optional?

rule_x
	:
	rule_y( DELIMETER )?
	-> template(y={$rule_y.text},delim={$DELIMETER.text}) "<y><delim>"
	;

rule_y : /* ... some EBNF ... */ ;

best regards,
Oliver

-- 
Psst! Geheimtipp: Online Games kostenlos spielen bei den GMX Free Games! 
http://games.entertainment.web.de/de/entertainment/games/free

From andreas.bartho at inf.tu-dresden.de  Fri Feb 22 02:24:30 2008
From: andreas.bartho at inf.tu-dresden.de (Andreas Bartho)
Date: Fri, 22 Feb 2008 11:24:30 +0100
Subject: [antlr-interest] OT: Mailing List Configuration
In-Reply-To: <CBBC1EE8-F014-4F75-BFB9-6A4459C1A3D4@fluidon.dyndns.info>
References: <560788.13339.qm@web28205.mail.ukl.yahoo.com>	<200802211738.34132.rschulz@sonic.net>
	<CBBC1EE8-F014-4F75-BFB9-6A4459C1A3D4@fluidon.dyndns.info>
Message-ID: <47BEA2DE.8090603@inf.tu-dresden.de>

Christian Gudrian wrote:

> Perhaps the mail server should attach a Reply-To header to the mails.  I 
> always need to edit the To field myself to ensure that I send my replies 
> to the mailing list rather than the person I am replying to.

I second that!

Andreas

From jaluber at gmx.de  Fri Feb 22 03:03:51 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 22 Feb 2008 12:03:51 +0100
Subject: [antlr-interest] OT: Mailing List Configuration
In-Reply-To: <47BEA2DE.8090603@inf.tu-dresden.de>
References: <560788.13339.qm@web28205.mail.ukl.yahoo.com>	<200802211738.34132.rschulz@sonic.net>	<CBBC1EE8-F014-4F75-BFB9-6A4459C1A3D4@fluidon.dyndns.info>
	<47BEA2DE.8090603@inf.tu-dresden.de>
Message-ID: <47BEAC17.2030701@gmx.de>

Andreas Bartho schrieb:
> Christian Gudrian wrote:
> 
>> Perhaps the mail server should attach a Reply-To header to the mails.  
>> I always need to edit the To field myself to ensure that I send my 
>> replies to the mailing list rather than the person I am replying to.
> 
> I second that!
> 
> Andreas
> 
That has been discussed before, and while I support your motion, it 
hasn't been realized then and probably will never be. :(

Johannes

From alexander at gaengel.de  Fri Feb 22 03:02:39 2008
From: alexander at gaengel.de (=?ISO-8859-15?Q?Alexander_G=E4ngel?=)
Date: Fri, 22 Feb 2008 12:02:39 +0100
Subject: [antlr-interest] Help Needed with multiple alternatives
Message-ID: <47BEABCF.2060501@gaengel.de>

I just can't get my grammar to work without having a multiple 
alternatives problem.

I have some nested expression rules to get the precedence of the 
different operations.

The problem occures since I added the letexpression  rule to exp_direct

I hope someone can give me a hint how to solve this.

Thanks Alexander
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: exp.g
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20080222/38a81eab/attachment.pl 

From chris77550 at gmail.com  Fri Feb 22 04:40:46 2008
From: chris77550 at gmail.com (Christopher Brown)
Date: Fri, 22 Feb 2008 13:40:46 +0100
Subject: [antlr-interest] ST#, attribute renderers, and format
Message-ID: <85c0f52a0802220440m83cc5bav7de1cc8b0745e857@mail.gmail.com>

Hi,

The StringTemplate format option doesn't seem to be supported in
StringTemplate 3.0.1 for C#.  This is described here:

http://www.antlr.org/wiki/display/ST/Object+rendering

...on the second part of the page, under the "Format Options" header.
As a quick reminder, it should allow me to register a formatter that
lets me use a template variable as follows:

$name;format="html"$
$name;format="javascript"$

...so that I can apply appropriate escaping in the template, instead
of forcing the underlying data to the output format.  In many cases,
I'm rendering business objects, and I can't for example replace the
business object's string properties with some custom wrapper class.

I *can* register a basic attribute renderer, for example:

public class FmtRenderer : IAttributeRenderer {
 public string ToString(object o) {
  return o.ToString();
 }
 public string ToString(object o, string formatName) {
  return formatName;
 }
}

...but only the first ToString(object o) method is ever called.
Suspiciously enough, the Wiki example page I referred to above doesn't
provide a C# example.

I've tried searching on the web, looking through the source code, and
so on, with no success.  How can I get this working?

Thanks,
Christopher

From chris77550 at gmail.com  Fri Feb 22 04:41:29 2008
From: chris77550 at gmail.com (Christopher Brown)
Date: Fri, 22 Feb 2008 13:41:29 +0100
Subject: [antlr-interest] Is StringTemplate for C# a dead project?
Message-ID: <85c0f52a0802220441w68c7f67fm3c678dd566888d6b@mail.gmail.com>

Looking at http://fisheye2.cenqua.com/changelog/stringtemplate/csharp?todate=1188497985000
I get the impression that the C# port has been abandoned (last commit
15 months ago...).

Is ST for C# a safe option, given that it appears to be unmaintained?

Thanks,
Christopher

From ivanhoeabrahams at gmail.com  Fri Feb 22 04:51:46 2008
From: ivanhoeabrahams at gmail.com (Ivanhoe Abrahams)
Date: Fri, 22 Feb 2008 14:51:46 +0200
Subject: [antlr-interest] MismatchedTokenException not supplying line and
	column info???
Message-ID: <dc0c70840802220451s4b21c13br2477a336f929037c@mail.gmail.com>

Hi

I am new to Antlr and am using  "The Definitive ANTLR Reference" as a
reference,
In
that book on page 238 it states that MismatchedTokenException
"indicates that the parser was looking for a particular symbol that it
did not find at the current input position".


Now, reading that, I would assume that when a
MismatchedTokenException occurs, I would be able to retrieve the line
and column number of the input position described in the above
definition, but I keep getting -1 for charPositionInLine field and 0
for the line field of that Exception. Could anyone please explain to me
how I can get the correct line and column number for the
MismatchedTokenException or if there is some othe place where I can get
that info?

BTW when my parser encounters a NoViableAltException I do get the
correct information...

Thank you in advance..

PS. The book has been really helpful.
Ivanhoe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080222/a8cef774/attachment.html 

From r.mark.volkmann at gmail.com  Fri Feb 22 05:06:50 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Fri, 22 Feb 2008 07:06:50 -0600
Subject: [antlr-interest] simple but really messy records
In-Reply-To: <22f6a8f70802220201v77742ab3ne4a8ac8406d9da9b@mail.gmail.com>
References: <22f6a8f70802220201v77742ab3ne4a8ac8406d9da9b@mail.gmail.com>
Message-ID: <f0fcc6820802220506p42514a8fkada5dc386d4554ba@mail.gmail.com>

On Fri, Feb 22, 2008 at 4:01 AM, brian <brianchina60221 at gmail.com> wrote:
> I'm trying to decide whether ANTLR is appropriate for something.
>
>  I'm trying to clean up several million one-line fixed-length records
>  from an IBM AS/400. They're entered by humans and are very messy, but
>  the vast majority do have some structure that can be recognized and
>  parsed, say, by regular expressions. I just need to decide which part
>  of the line represents a name, which represents a date, etc. I could
>  write maybe 100 regular expressions and apply them until I got a match
>  to recognize most of them. But I think this does a lot of the same
>  work over and over, making it slow. I might be able to write a truly
>  horrendous regular expression that doesn't redo as much work, but it'd
>  be hard to maintain. I think maybe ANTLR's memoize might help a lot.
>
>  But the only token I can think to make is CHARACTER. Sometimes a date
>  looks like 2008-02-22, but something that looks that way isn't
>  necessarily a date, so I don't want to make a token for it. Usually if
>  you see 'int' or whatever, you can say without hesitation that means a
>  certain thing and can generate an appropriate token, but I don't think
>  I can here. There aren't any keywords. I basically want to use ANTLR
>  as if it was a way of building a regex that would be way too difficult
>  to make/maintain by hand.
>
>  So people with a lot of experience, please say whether using ANTLR is
>  probably good or probably bad. If probably bad, are there more
>  appropriate technologies? Thank you.

This sounds like a job for AWK.

-- 
R. Mark Volkmann
Object Computing, Inc.

From jaluber at gmx.de  Fri Feb 22 06:18:05 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 22 Feb 2008 15:18:05 +0100
Subject: [antlr-interest] Is StringTemplate for C# a dead project?
In-Reply-To: <85c0f52a0802220441w68c7f67fm3c678dd566888d6b@mail.gmail.com>
References: <85c0f52a0802220441w68c7f67fm3c678dd566888d6b@mail.gmail.com>
Message-ID: <47BED99D.9020404@gmx.de>

Christopher Brown schrieb:
> Looking at http://fisheye2.cenqua.com/changelog/stringtemplate/csharp?todate=1188497985000
> I get the impression that the C# port has been abandoned (last commit
> 15 months ago...).
> 
> Is ST for C# a safe option, given that it appears to be unmaintained?

AFAIK, it is still actively developed. Version 3.1 may be already in 
beta, but I don't know where one can download a copy. The developers 
have a tendency to hide the code and themselves. :(

Johannes

From thkarcher at gmx.de  Fri Feb 22 06:32:21 2008
From: thkarcher at gmx.de (Thomas Karcher)
Date: Fri, 22 Feb 2008 15:32:21 +0100
Subject: [antlr-interest] Lexerproblem with wildcard matching
Message-ID: <1203690741.4462.22.camel@localhost>

Dear ANTLR users and professionals,

I'm currently working on a source-to-source compiler that I'd like to
work with preprocessing directives. My goal is to keep the actual
preprocessing independent of the language that it is embedded in, i. e.
I'm only interested in parsing the preprocessor lines, the rest in
between I need to track but I don't want to parse. I'm using ANTLRv3 and
ANTLRworks v1.1.7.

For example, I'd like to parse a file like this:
==
bla bla
#specialprefix
bla bla
==

My wish is to get a token list from the lexer like SOMELINE PREFIX
SOMELINE, so I wrote a grammar in the following way:

==
grammar Test;
options { output=AST; }

att	: attline* ;

attline	: PREFIX TERMINATOR | SOMELINE ;

PREFIX	: '#specialprefix' { System.out.println("PREFIX"); } ;

WS	: ( ' ' | '\t' | '\f' ) { $channel=HIDDEN; } ;

TERMINATOR : ( '\n' | '\r' | '\r\n' | '\n\r' ) ;

SOMELINE	: .* TERMINATOR ;
==

(This is just the tricky little part of a bigger grammar with more
useful stuff in the #specialprefix line.)

Unfortunately, the SOMELINE rule eats my #specialprefix line as well ...
my System.out.println("PREFIX") is never called.

Do you guys already have an idea what I'm doing wrong?

I did some further investigation with the generated lexer code, and I
found something that looks odd to me: In the mTokens() method, there is
code generated to look ahead the character stream '#specialprefix',
character by character. Now the last character that should match is 'x'
before calling mPREFIX(), right? Well, the lexer continues one
character:
if ( (LA3_18=='t') ) {
  int LA3_19 = input.LA(12);
  if ( ((LA3_19>='\u0000' && LA3_19<='\uFFFE')) ) {
    alt3=4;
  } else {
    alt3=1;
  }
}
(The code is from the real example and not from the grammar above, but
the underlying problem is the same.) When alt3 is 1, then the correct
call to mPREFIX() follows, but alt3 is set to 4 which yields
mSOMELINE(), because the if clause before gets its condition evaluated
to true ... why is the lexer trying to match \uFFFF (obviously)?


Thanks for your help.

Best regards,
Thomas


-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Dies ist ein digital signierter Nachrichtenteil
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080222/dc748370/attachment.bin 

From jimi at temporal-wave.com  Fri Feb 22 08:33:55 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 22 Feb 2008 08:33:55 -0800
Subject: [antlr-interest] OT: Mailing List Configuration (was:
	pseudocode translator to java, c and Ada)
In-Reply-To: <CBBC1EE8-F014-4F75-BFB9-6A4459C1A3D4@fluidon.dyndns.info>
Message-ID: <"L9B745673E484438dB234DCB95C0E0E0D.1203698034.scalix.temporal-wave.com*"@MHS>

> -----Original Message-----
> From: Christian Gudrian [mailto:gn at fluidon.dyndns.info]
> Sent: Thursday, February 21, 2008 10:35 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] OT: Mailing List Configuration (was:
> pseudocode translator to java, c and Ada)
> 
> 
> Am 22.02.2008 um 02:38 schrieb Randall R Schulz:
> 
> > Lastly, since you began this discussion in a public forum, it is
> > inappropriate for you to redirect any of it to my personal mailbox.
> 
> Perhaps the mail server should attach a Reply-To header to the mails.
> I always need to edit the To field myself to ensure that I send my
> replies to the mailing list rather than the person I am replying to.

Please dont start this debate again. It has been done to death here 
many times and it is what it is.

Thanks,

Jim



From jimi at temporal-wave.com  Fri Feb 22 08:44:35 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 22 Feb 2008 08:44:35 -0800
Subject: [antlr-interest] simple but really messy records
In-Reply-To: <22f6a8f70802220201v77742ab3ne4a8ac8406d9da9b@mail.gmail.com>
Message-ID: <"L248750E23A944692B265A08C423BE1BF.1203698669.scalix.temporal-wave.com*"@MHS>

> -----Original Message-----
> From: brian [mailto:brianchina60221 at gmail.com]
> Sent: Friday, February 22, 2008 2:02 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] simple but really messy records
> 
> I'm trying to decide whether ANTLR is appropriate for something.
> 
> I'm trying to clean up several million one-line fixed-length records
> from an IBM AS/400. They're entered by humans and are very messy, but
> the vast majority do have some structure that can be recognized and
> parsed, say, by regular expressions. I just need to decide which part
> of the line represents a name, which represents a date, etc. I could
> write maybe 100 regular expressions and apply them until I got a match
> to recognize most of them. But I think this does a lot of the same
> work over and over, making it slow. I might be able to write a truly
> horrendous regular expression that doesn't redo as much work, but it'd
> be hard to maintain. I think maybe ANTLR's memoize might help a lot.
> 
> But the only token I can think to make is CHARACTER. Sometimes a date
> looks like 2008-02-22, but something that looks that way isn't
> necessarily a date, so I don't want to make a token for it. Usually if
> you see 'int' or whatever, you can say without hesitation that means a
> certain thing and can generate an appropriate token, but I don't think
> I can here. There aren't any keywords. I basically want to use ANTLR
> as if it was a way of building a regex that would be way too difficult
> to make/maintain by hand.
> 
> So people with a lot of experience, please say whether using ANTLR is
> probably good or probably bad. If probably bad, are there more
> appropriate technologies? Thank you.

I think that this really depends on just what is in the input data. It 
isnt necessarily a bad way to go and you could use backtracking and 
memorize and it might not be too bad. I think you are correct that it 
would be more maintainable and the horrors of trying to write the 
grammar in the first place might be worth it. Personally though, I would 
just write a program in high level language and give it lots of 
comments. 

You can probably make more tokens than that, even if you just have DIGIT 
and CHAR, but thing is that if you have keep looking at the char in CHAR 
with predicates and so on, then it probably isn't going to be any more 
readable then a regex. If regex can do it though, then you can probably 
write a lexer that acts more like flex and tries all the combinations 
and rejects them when they don't match along these lines:

TOKEN
	: 'x'
		(
			 ('yyzz')=>'yyzz' { $type = XYYZZ; }
			| ('zzzzzzzz') => ... etc


You might find that more readable than regex, but you may well need a 
stateful lexer. 

Of course, you may not need a parser at all. You could try the filtering 
lexer approach (see the fuzzy java example), with a catch all ANY : . ; 
rule as the last rule in the filter and some lexer state flags. I think 
that a day or so working on a filtering lexer would tell you if you will 
gain anything this way and is probably worth a try.

Jim




From darien.hager at etelos-inc.com  Fri Feb 22 10:11:10 2008
From: darien.hager at etelos-inc.com (Darien Hager)
Date: Fri, 22 Feb 2008 10:11:10 -0800
Subject: [antlr-interest] OT: Mailing List Configuration
In-Reply-To: <47BEAC17.2030701@gmx.de>
References: <560788.13339.qm@web28205.mail.ukl.yahoo.com>
	<200802211738.34132.rschulz@sonic.net>
	<CBBC1EE8-F014-4F75-BFB9-6A4459C1A3D4@fluidon.dyndns.info>
	<47BEA2DE.8090603@inf.tu-dresden.de> <47BEAC17.2030701@gmx.de>
Message-ID: <c8c997f40802221011u3c75233dy5f74aeac25015365@mail.gmail.com>

Thirded. Myself, whenever I make a cross-user discussion list I ensure the
option is set.

The list is using mailman, and unless it's some super-old version, the
actual settings change is trivial. Log in, click a radio button on the main
settings page, submit, done.

-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are not
the intended recipient, then this is notice that any use, disclosure,
dissemination, distribution or copying is strictly prohibited. If you have
received this message in error please contact the sender by reply mail and
destroy all copies of the original message.


This e-mail message, including attachments, may contain confidential information for the sole use of the intended recipient(s). If you are not the intended recipient, then this is notice that any use, disclosure, dissemination, distribution or copying is strictly prohibited.  If you have received this message in error please contact the sender by reply mail and destroy all copies of the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080222/5af10b30/attachment.html 

From carter_cheng at yahoo.com  Fri Feb 22 13:16:45 2008
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Fri, 22 Feb 2008 13:16:45 -0800 (PST)
Subject: [antlr-interest] transforming AST's in place when generated
Message-ID: <895633.73703.qm@web50104.mail.re2.yahoo.com>

Hi everyone,

Thanks for the responses so far from everyone on the
group. It turns out that my last problem was an error
in my AST generation and the code compiles fine now
without messing with the UP constant.

I have a further question about AST's. I have some
rather standard looking variable declarations in my
language which just like C look like this: 

int a,b,*c,*d; 

I am curious from an AST perspective how to generate
an AST for this which would have the equivalent of
each declaration on a separate line since this is
semantically equivalent i.e.

(DECL
(VAR_DECL int a)
(VAR_DECL int b)
(VAR_DECL int * c)
(VAR_DECL int * d)
(FUN_DEF .... )
)

Is this sort of thing possible without typing up code
in the host language?

Thanks in advance,

Carter.


      ____________________________________________________________________________________
Never miss a thing.  Make Yahoo your home page. 
http://www.yahoo.com/r/hs

From markwright at internode.on.net  Fri Feb 22 16:32:26 2008
From: markwright at internode.on.net (Mark Wright)
Date: Sat, 23 Feb 2008 11:32:26 +1100
Subject: [antlr-interest] transforming AST's in place when generated
In-Reply-To: <895633.73703.qm@web50104.mail.re2.yahoo.com>
References: <895633.73703.qm@web50104.mail.re2.yahoo.com>
Message-ID: <20080223113226.000048cf@goanna>

Hello Carter,

The idea is to pass the int type_id AST as a paramater to the
init_declarator_list, and the init_declarator_list passes it as a
parameter to the init_declarator, something like:

declaration
  :    storage_class_specifier? type_id init_declarator_list[$storage_class_specifier.tree, $type_id.tree] ';'
          -> init_declarator_list
  ;

init_declarator_list[CommonTree scs, CommonTree ti]
  :   init_declarator[$scs, $ti] (',' init_declarator[$scs, $ti])*
          -> init_declarator+
  ;

init_declarator[CommonTree scs, CommonTree ti]
  :    function_declarator
          -> {(scs == null)}? ^(FUNCTION_DECLARATION {$ti} function_declarator)
          -> {(scs != null)}? ^(FUNCTION_DECLARATION {$scs} {$ti} function_declarator)
          ->
  |   declarator initializer?
          -> {(scs == null)}? ^(DD {$ti} declarator initializer?)
          -> {(scs != null)}? ^(DD {$scs} {$ti} declarator initializer?)
          ->
  ;

etc.

Regards, Mark

-- 

From antlr at mirality.co.nz  Fri Feb 22 21:26:56 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 23 Feb 2008 18:26:56 +1300
Subject: [antlr-interest] OT: Mailing List Configuration
In-Reply-To: <c8c997f40802221011u3c75233dy5f74aeac25015365@mail.gmail.co
 m>
References: <560788.13339.qm@web28205.mail.ukl.yahoo.com>
	<200802211738.34132.rschulz@sonic.net>
	<CBBC1EE8-F014-4F75-BFB9-6A4459C1A3D4@fluidon.dyndns.info>
	<47BEA2DE.8090603@inf.tu-dresden.de> <47BEAC17.2030701@gmx.de>
	<c8c997f40802221011u3c75233dy5f74aeac25015365@mail.gmail.com>
Message-ID: <20080223052718.907B511EC24@www.antlr.org>

At 07:11 23/02/2008, Darien Hager wrote:
>Thirded. Myself, whenever I make a cross-user discussion list I 
>ensure the option is set.

Uh-huh.  And you can't even seem to quote properly.  So that's a 
good recommendation.  :P

Seriously people, can we just drop this?  This has come up several 
times before and it always has the same result.

With things as they are now, you have a choice.  You can hit the 
Reply button to reply just to the sender, or the Reply All button 
to reply to the group.  There is no need to edit any of the 
addressing in the latter case, since the mail server is smart 
enough to not send out a second copy to an address that's already 
in the envelope.  (Well, you can tell it to send you an extra copy 
if you really want.  But why?)  If your client filters are set up 
correctly, any such response will still go to the same folder as 
any other list discussion as well.  So there is no downside.

If the Reply-To header is forced, however, suddenly you've just 
made it harder for the people who *do* want to send private 
replies.  While I suppose you could argue that private replies are 
bad and that people should be "encouraged" to post publicly, the 
simple fact is that it's easy enough to change a private reply 
into a public one but impossible to go the other way.  And I've 
seen numerous examples of just such mistakes on lists that do 
force Reply-To.


From gn at fluidon.dyndns.info  Sat Feb 23 00:57:23 2008
From: gn at fluidon.dyndns.info (Christian Gudrian)
Date: Sat, 23 Feb 2008 09:57:23 +0100
Subject: [antlr-interest] OT: Mailing List Configuration
In-Reply-To: <20080223052718.907B511EC24@www.antlr.org>
References: <560788.13339.qm@web28205.mail.ukl.yahoo.com>
	<200802211738.34132.rschulz@sonic.net>
	<CBBC1EE8-F014-4F75-BFB9-6A4459C1A3D4@fluidon.dyndns.info>
	<47BEA2DE.8090603@inf.tu-dresden.de> <47BEAC17.2030701@gmx.de>
	<c8c997f40802221011u3c75233dy5f74aeac25015365@mail.gmail.com>
	<20080223052718.907B511EC24@www.antlr.org>
Message-ID: <6758BBF3-2590-4320-A9A8-1D33B920B128@fluidon.dyndns.info>


Am 23.02.2008 um 06:26 schrieb Gavin Lambert:

> or the Reply All button to reply to the group.  There is no need to  
> edit any of the addressing in the latter case, since the mail server  
> is smart enough to not send out a second copy to an address that's  
> already in the envelope.

Didn't know that.  Thanks!

Christian


From peter.bulychev at gmail.com  Sat Feb 23 07:15:02 2008
From: peter.bulychev at gmail.com (Peter Bulychev)
Date: Sat, 23 Feb 2008 18:15:02 +0300
Subject: [antlr-interest] add fields to the AST
Message-ID: <ef5132890802230715t5436c035gf12f2cb303a907d6@mail.gmail.com>

Hello.

I want to add some properties to the nodes of output tree. Therefore I want
to add fields to the nodes of the output AST.

How can I do it?

-- 
Best regards,
   Peter Bulychev.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080223/4def0d9d/attachment.html 

From thkarcher at gmx.de  Sat Feb 23 07:38:02 2008
From: thkarcher at gmx.de (Thomas Karcher)
Date: Sat, 23 Feb 2008 16:38:02 +0100
Subject: [antlr-interest] add fields to the AST
In-Reply-To: <ef5132890802230715t5436c035gf12f2cb303a907d6@mail.gmail.com>
References: <ef5132890802230715t5436c035gf12f2cb303a907d6@mail.gmail.com>
Message-ID: <1203781083.4305.1.camel@localhost>

Hi Peter,

> I want to add some properties to the nodes of output tree. Therefore I
> want to add fields to the nodes of the output AST.

Do you have "The definitive ANTLR reference" near you? :)
On page 157f (in "7.2 Implementing Abstract Syntax Trees") is described
what you want - basically define your own nodes and tell ANTLR to use
them instead of the default.


Thomas

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Dies ist ein digital signierter Nachrichtenteil
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080223/f5515837/attachment.bin 

From carter_cheng at yahoo.com  Sat Feb 23 10:16:56 2008
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Sat, 23 Feb 2008 10:16:56 -0800 (PST)
Subject: [antlr-interest] transforming AST's in place when generated
In-Reply-To: <20080223113226.000048cf@goanna>
Message-ID: <418854.21681.qm@web50111.mail.re2.yahoo.com>

Thanks Mark. Just one followup question is there a way
to explicitly pass back a forest in ANTLR? i.e. when
you do 

-> init_declarator+

it seems like you are not really passing back a rooted
tree.

Thanks again,

Carter.


--- Mark Wright <markwright at internode.on.net> wrote:

> Hello Carter,
> 
> The idea is to pass the int type_id AST as a
> paramater to the
> init_declarator_list, and the init_declarator_list
> passes it as a
> parameter to the init_declarator, something like:
> 
> declaration
>   :    storage_class_specifier? type_id
> init_declarator_list[$storage_class_specifier.tree,
> $type_id.tree] ';'
>           -> init_declarator_list
>   ;
> 
> init_declarator_list[CommonTree scs, CommonTree ti]
>   :   init_declarator[$scs, $ti] (','
> init_declarator[$scs, $ti])*
>           -> init_declarator+
>   ;
> 
> init_declarator[CommonTree scs, CommonTree ti]
>   :    function_declarator
>           -> {(scs == null)}? ^(FUNCTION_DECLARATION
> {$ti} function_declarator)
>           -> {(scs != null)}? ^(FUNCTION_DECLARATION
> {$scs} {$ti} function_declarator)
>           ->
>   |   declarator initializer?
>           -> {(scs == null)}? ^(DD {$ti} declarator
> initializer?)
>           -> {(scs != null)}? ^(DD {$scs} {$ti}
> declarator initializer?)
>           ->
>   ;
> 
> etc.
> 
> Regards, Mark
> 
> -- 
> 



      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ 


From timm.turn at gmail.com  Sat Feb 23 15:44:32 2008
From: timm.turn at gmail.com (Timmy Turner)
Date: Sun, 24 Feb 2008 00:44:32 +0100
Subject: [antlr-interest] Fast Token-Recognition (Possible in ANTLR?)
Message-ID: <d4de96670802231544s1adbe3d2uedbcf5d9a7984303@mail.gmail.com>

Hi,

I want to find occurences of certain strings in a rather large text.
Like finding {"sdf","foo","bar"} in "asdffoosomerandomtextbar".

Of course I could try myLongString.indexOf(myListOfKeywords.get(i))
but I was hoping to find a faster way. Then I found this here:
http://en.wikipedia.org/wiki/Trie were I couldn't help it but think of
ANTLR (and that chapter about the maze in Terence Parr's book).

So I thought of creating a grammar consiting just of tokens, and
letting ANTLR to generate a lexer for it which then I could use to
spot these strings.

The question remaining is just wther ANTLR really uses tries - or
maybe there's an even better approach?

Thanks!

From lgcraymer at yahoo.com  Sat Feb 23 16:13:24 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Sat, 23 Feb 2008 16:13:24 -0800 (PST)
Subject: [antlr-interest] Fast Token-Recognition (Possible in ANTLR?)
Message-ID: <819132.18026.qm@web55904.mail.re3.yahoo.com>

This is not a token recognition problem; it is a string search problem.  See http://en.wikipedia.org/wiki/String_search as a starting point.

--Loring

----- Original Message ----
> From: Timmy Turner <timm.turn at gmail.com>
> To: antlr-interest at antlr.org
> Sent: Saturday, February 23, 2008 3:44:32 PM
> Subject: [antlr-interest] Fast Token-Recognition (Possible in ANTLR?)
> 
> Hi,
> 
> I want to find occurences of certain strings in a rather large text.
> Like finding {"sdf","foo","bar"} in "asdffoosomerandomtextbar".
> 
> Of course I could try myLongString.indexOf(myListOfKeywords.get(i))
> but I was hoping to find a faster way. Then I found this here:
> http://en.wikipedia.org/wiki/Trie were I couldn't help it but think of
> ANTLR (and that chapter about the maze in Terence Parr's book).
> 
> So I thought of creating a grammar consiting just of tokens, and
> letting ANTLR to generate a lexer for it which then I could use to
> spot these strings.
> 
> The question remaining is just wther ANTLR really uses tries - or
> maybe there's an even better approach?
> 
> Thanks!
> 




      ____________________________________________________________________________________
Looking for last minute shopping deals?  
Find them fast with Yahoo! Search.  http://tools.search.yahoo.com/newsearch/category.php?category=shopping

From markwright at internode.on.net  Sat Feb 23 21:36:21 2008
From: markwright at internode.on.net (Mark Wright)
Date: Sun, 24 Feb 2008 16:36:21 +1100
Subject: [antlr-interest] transforming AST's in place when generated
In-Reply-To: <418854.21681.qm@web50111.mail.re2.yahoo.com>
References: <20080223113226.000048cf@goanna>
	<418854.21681.qm@web50111.mail.re2.yahoo.com>
Message-ID: <20080224163621.00006948@goanna>

> Thanks Mark. Just one followup question is there a way
> to explicitly pass back a forest in ANTLR?

Hello Carter,

It sort of looks like it is passing back a forest
of trees (with DD and FUNCTION_DECLARATION roots).

> i.e. when you do 
> 
> -> init_declarator+
> 
> it seems like you are not really passing back a rooted
> tree.
> 
> Thanks again,
> 
> Carter.

This question seems too easy,  I am not sure I really
understand the question.  If you wanted a rooted
tree you could do something like:

-> ^(DECL init_declarator+)

I guess you would want to create the AST in which
ever structure is easiest to handle with the next processing
phase of the compiler or whatever program it is.

Regards, Mark

> 
> --- Mark Wright <markwright at internode.on.net> wrote:
> 
> > Hello Carter,
> > 
> > The idea is to pass the int type_id AST as a
> > paramater to the
> > init_declarator_list, and the init_declarator_list
> > passes it as a
> > parameter to the init_declarator, something like:
> > 
> > declaration
> >   :    storage_class_specifier? type_id
> > init_declarator_list[$storage_class_specifier.tree,
> > $type_id.tree] ';'
> >           -> init_declarator_list
> >   ;
> > 
> > init_declarator_list[CommonTree scs, CommonTree ti]
> >   :   init_declarator[$scs, $ti] (','
> > init_declarator[$scs, $ti])*
> >           -> init_declarator+
> >   ;
> > 
> > init_declarator[CommonTree scs, CommonTree ti]
> >   :    function_declarator
> >           -> {(scs == null)}? ^(FUNCTION_DECLARATION
> > {$ti} function_declarator)
> >           -> {(scs != null)}? ^(FUNCTION_DECLARATION
> > {$scs} {$ti} function_declarator)
> >           ->
> >   |   declarator initializer?
> >           -> {(scs == null)}? ^(DD {$ti} declarator
> > initializer?)
> >           -> {(scs != null)}? ^(DD {$scs} {$ti}
> > declarator initializer?)
> >           ->
> >   ;
> > 
> > etc.
> > 
> > Regards, Mark
> > 
> > -- 

-- 

From lefevrol at yahoo.com  Sun Feb 24 00:32:15 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Sun, 24 Feb 2008 09:32:15 +0100
Subject: [antlr-interest] Question about rule scopes
Message-ID: <fpra2i$d7o$1@ger.gmane.org>

If a rule, say bar, can be invoked by more than one other rule and only one 
these invoking rules, say foo, defines a scoped variable x that we wish to 
access, then bar needs to know that it was invoked (perhaps through several 
intermediates) by foo, otherwise $foo::x within bar would either fail or do 
the wrong thing. Is that information available somehow?

I can think of other solutions to my problem but they are more verbose than 
using a scope.

-- O.L.



From vbar at comp.cz  Sun Feb 24 00:40:15 2008
From: vbar at comp.cz (Vaclav Barta)
Date: Sun, 24 Feb 2008 09:40:15 +0100
Subject: [antlr-interest] Fast Token-Recognition (Possible in ANTLR?)
In-Reply-To: <d4de96670802231544s1adbe3d2uedbcf5d9a7984303@mail.gmail.com>
References: <d4de96670802231544s1adbe3d2uedbcf5d9a7984303@mail.gmail.com>
Message-ID: <200802240940.15781.vbar@comp.cz>

On Sunday 24 February 2008 00:44:32 Timmy Turner wrote:
> I want to find occurences of certain strings in a rather large text.
> Like finding {"sdf","foo","bar"} in "asdffoosomerandomtextbar".
>
> Of course I could try myLongString.indexOf(myListOfKeywords.get(i))
> but I was hoping to find a faster way. Then I found this here:
> http://en.wikipedia.org/wiki/Trie were I couldn't help it but think of
> ANTLR (and that chapter about the maze in Terence Parr's book).
>
> So I thought of creating a grammar consiting just of tokens, and
> letting ANTLR to generate a lexer for it which then I could use to
> spot these strings.
>
> The question remaining is just wther ANTLR really uses tries - or
> maybe there's an even better approach?
AFAIK it does (it's really the standard way), but it might be too heavy for 
the task you describe. Consider the case when you're looking for 
{"ab","abc"} - do you want to find the "ab" in "abc"? ANTLR by default doesn't 
(because programming languages generally don't), and while it might be 
possible to recognize common prefixes with ANTLR, IMHO it's much simpler to 
use a standalone component implementing fast search for multiple strings 
(there's a lot of them available, in various languages) than ANTLR.

	Bye
		Vasek
--
http://www.mangrove.cz/
Open Source integration

From timm.turn at gmail.com  Sun Feb 24 02:08:34 2008
From: timm.turn at gmail.com (Timmy Turner)
Date: Sun, 24 Feb 2008 11:08:34 +0100
Subject: [antlr-interest] Fast Token-Recognition (Possible in ANTLR?)
In-Reply-To: <200802240940.15781.vbar@comp.cz>
References: <d4de96670802231544s1adbe3d2uedbcf5d9a7984303@mail.gmail.com>
	<200802240940.15781.vbar@comp.cz>
Message-ID: <d4de96670802240208l4fc1be2cpcfedc0be959aa656@mail.gmail.com>

Thanks for your replies!

>  IMHO it's much simpler to
>  use a standalone component implementing fast search for multiple strings
>  (there's a lot of them available, in various languages) than ANTLR.

Hm... I couldn't find any trie implementations for Java that would fit
my needs, maybe you could provide me with some links?

2008/2/24, Vaclav Barta <vbar at comp.cz>:
> On Sunday 24 February 2008 00:44:32 Timmy Turner wrote:
>  > I want to find occurences of certain strings in a rather large text.
>  > Like finding {"sdf","foo","bar"} in "asdffoosomerandomtextbar".
>  >
>  > Of course I could try myLongString.indexOf(myListOfKeywords.get(i))
>  > but I was hoping to find a faster way. Then I found this here:
>  > http://en.wikipedia.org/wiki/Trie were I couldn't help it but think of
>  > ANTLR (and that chapter about the maze in Terence Parr's book).
>  >
>  > So I thought of creating a grammar consiting just of tokens, and
>  > letting ANTLR to generate a lexer for it which then I could use to
>  > spot these strings.
>  >
>  > The question remaining is just wther ANTLR really uses tries - or
>  > maybe there's an even better approach?
>
> AFAIK it does (it's really the standard way), but it might be too heavy for
>  the task you describe. Consider the case when you're looking for
>  {"ab","abc"} - do you want to find the "ab" in "abc"? ANTLR by default doesn't
>  (because programming languages generally don't), and while it might be
>  possible to recognize common prefixes with ANTLR, IMHO it's much simpler to
>  use a standalone component implementing fast search for multiple strings
>  (there's a lot of them available, in various languages) than ANTLR.
>
>         Bye
>                 Vasek
>
> --
>  http://www.mangrove.cz/
>  Open Source integration
>

From peter.bulychev at gmail.com  Sun Feb 24 03:35:12 2008
From: peter.bulychev at gmail.com (Peter Bulychev)
Date: Sun, 24 Feb 2008 14:35:12 +0300
Subject: [antlr-interest] add fields to the AST
In-Reply-To: <1203781083.4305.1.camel@localhost>
References: <ef5132890802230715t5436c035gf12f2cb303a907d6@mail.gmail.com>
	<1203781083.4305.1.camel@localhost>
Message-ID: <ef5132890802240335u4522f045sdd8b1b35e407cf04@mail.gmail.com>

No, unfortunately I don't have this book.

2008/2/23, Thomas Karcher <thkarcher at gmx.de>:
>
> Hi Peter,
>
>
> > I want to add some properties to the nodes of output tree. Therefore I
> > want to add fields to the nodes of the output AST.
>
>
> Do you have "The definitive ANTLR reference" near you? :)
> On page 157f (in "7.2 Implementing Abstract Syntax Trees") is described
> what you want - basically define your own nodes and tell ANTLR to use
> them instead of the default.
>
>
>
> Thomas
>
>
>


-- 
Best regards,
   Peter Bulychev.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080224/4a8e1e18/attachment.html 

From jaluber at gmx.de  Sun Feb 24 05:20:34 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Sun, 24 Feb 2008 14:20:34 +0100
Subject: [antlr-interest] Question about rule scopes
In-Reply-To: <fpra2i$d7o$1@ger.gmane.org>
References: <fpra2i$d7o$1@ger.gmane.org>
Message-ID: <47C16F22.2050405@gmx.de>

Olivier Lefevre schrieb:
> If a rule, say bar, can be invoked by more than one other rule and only 
> one these invoking rules, say foo, defines a scoped variable x that we 
> wish to access, then bar needs to know that it was invoked (perhaps 
> through several intermediates) by foo, otherwise $foo::x within bar 
> would either fail or do the wrong thing. Is that information available 
> somehow?
> 
> I can think of other solutions to my problem but they are more verbose 
> than using a scope.
> 
> -- O.L.
> 
> 

You could create a global scope which is initialized to a default value 
or has a boolean set to false at the first parser rule called ever. Only 
foo sets the scope to another value. You have then only check for the 
discriminatory value.

Johannes

From lefevrol at yahoo.com  Sun Feb 24 05:54:12 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Sun, 24 Feb 2008 14:54:12 +0100
Subject: [antlr-interest] Question about rule scopes
In-Reply-To: <47C16F22.2050405@gmx.de>
References: <fpra2i$d7o$1@ger.gmane.org> <47C16F22.2050405@gmx.de>
Message-ID: <fprsu7$u76$1@ger.gmane.org>

Actually I did something similar but that's a bit of a kludge...

-- O.L.


From listbrownie at gmail.com  Sun Feb 24 07:40:01 2008
From: listbrownie at gmail.com (alan brown)
Date: Sun, 24 Feb 2008 07:40:01 -0800
Subject: [antlr-interest] Why won't this match...
Message-ID: <2b5f47650802240740n35ca5edfk2cdffbf16a792500@mail.gmail.com>

It must be something obvious but why won't this language parse the word
'wibble'?  I would expect the lexer to be unable to match the input to
BIG_TOKEN but successfully match to LITTLE_TOKEN followed by SEMI_TOKEN.  If
I change the BIG_TOKEN definition to 'wobble' then all is well but I don't
know why this is failing.

Any help is appreciated

root                       : tokenizer2 | tokenizer1 ;

tokenizer1              : BIG_TOKEN ;
tokenizer2             : LITTLE_TOKEN SEMI_TOKEN ;

BIG_TOKEN           : 'wibbled' ;
LITTLE_TOKEN     : 'wi';
SEMI_TOKEN            : 'bble' ;

Thanks,
alan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080224/57782b20/attachment.html 

From lefevrol at yahoo.com  Sun Feb 24 07:56:53 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Sun, 24 Feb 2008 16:56:53 +0100
Subject: [antlr-interest] Bug in multiple rule parameters
Message-ID: <fps448$l1m$1@ger.gmane.org>

I hit a subtle bug in the syntax of multiple rules parameters. Run ANTLR 
against the following grammar:

    grammar Bug1;
    top : name='?' sub["XX", $name.text];
    sub[String x, String y] : ;

and the sub call in Bug1Parser will read

    sub("XX",  , name.getText());

i.e., there is a spurious comma. This is a fragile bug in the sense that 
other forms of sub call, e.g., sub["XX", "XX"] and sub[$name.text, "XX"] do 
not trigger it.

-- O.L.



From jimi at temporal-wave.com  Sun Feb 24 12:29:52 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 24 Feb 2008 12:29:52 -0800
Subject: [antlr-interest] Fast Token-Recognition (Possible in ANTLR?)
In-Reply-To: <d4de96670802240208l4fc1be2cpcfedc0be959aa656@mail.gmail.com>
Message-ID: <"L87FD85EB08D14321BA3EDEAB0C740C00.1203885030.scalix.temporal-wave.com*"@MHS>

> -----Original Message-----
> From: Timmy Turner [mailto:timm.turn at gmail.com]
> Sent: Sunday, February 24, 2008 2:09 AM
> Thanks for your replies!
> 
> >  IMHO it's much simpler to
> >  use a standalone component implementing fast search for multiple
> strings
> >  (there's a lot of them available, in various languages) than ANTLR.
> 
> Hm... I couldn't find any trie implementations for Java that would fit
> my needs, maybe you could provide me with some links?

If you switch to the C runtime, you get a an implementation for free 
;-)> However, I have only coded a trie with a 64 bit key as yet as that 
is all I needed for memorization. Later, I will add a trie that allows a 
string key, once I need one for my own projects.

Tries are easy to code in C, but probably less efficient to do so in 
Java. However, aren't some of the standard collections (not the Hash 
ones) done this way anyway? You could probably look at the Java source 
and find out if I isn't documented somewhere.

Jim


From alexander at gaengel.de  Sun Feb 24 14:08:00 2008
From: alexander at gaengel.de (=?ISO-8859-15?Q?Alexander_G=E4ngel?=)
Date: Sun, 24 Feb 2008 23:08:00 +0100
Subject: [antlr-interest] Help Needed with multiple alternatives
In-Reply-To: <47BEABCF.2060501@gaengel.de>
References: <47BEABCF.2060501@gaengel.de>
Message-ID: <47C1EAC0.70408@gaengel.de>

I found the problem but still have no working solution.

I tried to get around it by using scoping and Semantic Predicates.

so I set a scope with a boolean man variable and wanted to make a 
decision like {$exp::name}=> ... | so that the rule chooses the first 
alternative when $exp::name is set true and the other solution if it is 
false.

Is this possible, cause right now it's not working, but there may be 
some other error still in the rule.

Alexander

Alexander G?ngel schrieb:
> I just can't get my grammar to work without having a multiple 
> alternatives problem.
>
> I have some nested expression rules to get the precedence of the 
> different operations.
>
> The problem occures since I added the letexpression  rule to exp_direct
>
> I hope someone can give me a hint how to solve this.
>
> Thanks Alexander

From r.mark.volkmann at gmail.com  Sun Feb 24 15:12:40 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Sun, 24 Feb 2008 17:12:40 -0600
Subject: [antlr-interest] Why won't this match...
In-Reply-To: <2b5f47650802240740n35ca5edfk2cdffbf16a792500@mail.gmail.com>
References: <2b5f47650802240740n35ca5edfk2cdffbf16a792500@mail.gmail.com>
Message-ID: <f0fcc6820802241512p7ffc07c8pae3f50ce1f7317de@mail.gmail.com>

On Sun, Feb 24, 2008 at 9:40 AM, alan brown <listbrownie at gmail.com> wrote:
> It must be something obvious but why won't this language parse the word
> 'wibble'?  I would expect the lexer to be unable to match the input to
> BIG_TOKEN but successfully match to LITTLE_TOKEN followed by SEMI_TOKEN.  If
> I change the BIG_TOKEN definition to 'wobble' then all is well but I don't
> know why this is failing.
>
> Any help is appreciated
>
> root                       : tokenizer2 | tokenizer1 ;
>
> tokenizer1              : BIG_TOKEN ;
> tokenizer2             : LITTLE_TOKEN SEMI_TOKEN ;
>
> BIG_TOKEN           : 'wibbled' ;
>  LITTLE_TOKEN     : 'wi';
> SEMI_TOKEN            : 'bble' ;

This is "bang my head on the wall" frustrating!
It looks so simple, but I can't get it to work either!
Just when I thought I was getting the hang of it ...
I hope someone else has an answer.

-- 
R. Mark Volkmann
Object Computing, Inc.

From parrt at cs.usfca.edu  Sun Feb 24 15:19:32 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 24 Feb 2008 15:19:32 -0800
Subject: [antlr-interest] Why won't this match...
In-Reply-To: <f0fcc6820802241512p7ffc07c8pae3f50ce1f7317de@mail.gmail.com>
References: <2b5f47650802240740n35ca5edfk2cdffbf16a792500@mail.gmail.com>
	<f0fcc6820802241512p7ffc07c8pae3f50ce1f7317de@mail.gmail.com>
Message-ID: <E96539DF-0DD7-4EB8-8C4E-0E560AAA5C43@cs.usfca.edu>


On Feb 24, 2008, at 3:12 PM, Mark Volkmann wrote:

> On Sun, Feb 24, 2008 at 9:40 AM, alan brown <listbrownie at gmail.com>  
> wrote:
>> It must be something obvious but why won't this language parse the  
>> word
>> 'wibble'?  I would expect the lexer to be unable to match the input  
>> to
>> BIG_TOKEN but successfully match to LITTLE_TOKEN followed by  
>> SEMI_TOKEN.  If
>> I change the BIG_TOKEN definition to 'wobble' then all is well but  
>> I don't
>> know why this is failing.
>>
>> Any help is appreciated
>>
>> root                       : tokenizer2 | tokenizer1 ;
>>
>> tokenizer1              : BIG_TOKEN ;
>> tokenizer2             : LITTLE_TOKEN SEMI_TOKEN ;
>>
>> BIG_TOKEN           : 'wibbled' ;
>> LITTLE_TOKEN     : 'wi';
>> SEMI_TOKEN            : 'bble' ;
>
> This is "bang my head on the wall" frustrating!
> It looks so simple, but I can't get it to work either!
> Just when I thought I was getting the hang of it ...
> I hope someone else has an answer.

This is because of:

http://www.antlr.org:8888/browse/ANTLR-189

Ter

From r.mark.volkmann at gmail.com  Sun Feb 24 15:23:45 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Sun, 24 Feb 2008 17:23:45 -0600
Subject: [antlr-interest] Why won't this match...
In-Reply-To: <f0fcc6820802241512p7ffc07c8pae3f50ce1f7317de@mail.gmail.com>
References: <2b5f47650802240740n35ca5edfk2cdffbf16a792500@mail.gmail.com>
	<f0fcc6820802241512p7ffc07c8pae3f50ce1f7317de@mail.gmail.com>
Message-ID: <f0fcc6820802241523yc4270b5n87119f9c382c77f3@mail.gmail.com>

On Sun, Feb 24, 2008 at 5:12 PM, Mark Volkmann
<r.mark.volkmann at gmail.com> wrote:
>
> On Sun, Feb 24, 2008 at 9:40 AM, alan brown <listbrownie at gmail.com> wrote:
>  > It must be something obvious but why won't this language parse the word
>  > 'wibble'?  I would expect the lexer to be unable to match the input to
>  > BIG_TOKEN but successfully match to LITTLE_TOKEN followed by SEMI_TOKEN.  If
>  > I change the BIG_TOKEN definition to 'wobble' then all is well but I don't
>  > know why this is failing.
>  >
>  > Any help is appreciated
>  >
>  > root                       : tokenizer2 | tokenizer1 ;
>  >
>  > tokenizer1              : BIG_TOKEN ;
>  > tokenizer2             : LITTLE_TOKEN SEMI_TOKEN ;
>  >
>  > BIG_TOKEN           : 'wibbled' ;
>  >  LITTLE_TOKEN     : 'wi';
>  > SEMI_TOKEN            : 'bble' ;
>
>  This is "bang my head on the wall" frustrating!
>  It looks so simple, but I can't get it to work either!
>  Just when I thought I was getting the hang of it ...
>  I hope someone else has an answer.

Here's the grammar I used to test this.

grammar Wibble;
root: (PREFIX SUFFIX | WHOLE) { System.out.println("got it!"); };
WHOLE: 'wibbled';
PREFIX: 'wi';
SUFFIX: 'bble';
WHITESPACE: '\r' | '\n' { skip(); };

I stepped through the generated lexer code with the input "wibble". It
basically says
- got a 'w'
- got an 'i'
- got a 'b'
- okay, stop looking because the next token must be 'wibbled'

But that's wrong. The next token needs to be 'wi' since it's never
going to find the 'd' at the end.
Doesn't this seem wrong?

-- 
R. Mark Volkmann
Object Computing, Inc.

From r.mark.volkmann at gmail.com  Sun Feb 24 15:27:45 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Sun, 24 Feb 2008 17:27:45 -0600
Subject: [antlr-interest] Why won't this match...
In-Reply-To: <E96539DF-0DD7-4EB8-8C4E-0E560AAA5C43@cs.usfca.edu>
References: <2b5f47650802240740n35ca5edfk2cdffbf16a792500@mail.gmail.com>
	<f0fcc6820802241512p7ffc07c8pae3f50ce1f7317de@mail.gmail.com>
	<E96539DF-0DD7-4EB8-8C4E-0E560AAA5C43@cs.usfca.edu>
Message-ID: <f0fcc6820802241527n1505fc41lf3cfdb7397f940e3@mail.gmail.com>

On Sun, Feb 24, 2008 at 5:19 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
>
>  On Feb 24, 2008, at 3:12 PM, Mark Volkmann wrote:
>
>  > On Sun, Feb 24, 2008 at 9:40 AM, alan brown <listbrownie at gmail.com>
>  > wrote:
>  >> It must be something obvious but why won't this language parse the
>  >> word
>  >> 'wibble'?  I would expect the lexer to be unable to match the input
>  >> to
>  >> BIG_TOKEN but successfully match to LITTLE_TOKEN followed by
>  >> SEMI_TOKEN.  If
>  >> I change the BIG_TOKEN definition to 'wobble' then all is well but
>  >> I don't
>  >> know why this is failing.
>  >>
>  >> Any help is appreciated
>  >>
>  >> root                       : tokenizer2 | tokenizer1 ;
>  >>
>  >> tokenizer1              : BIG_TOKEN ;
>  >> tokenizer2             : LITTLE_TOKEN SEMI_TOKEN ;
>  >>
>  >> BIG_TOKEN           : 'wibbled' ;
>  >> LITTLE_TOKEN     : 'wi';
>  >> SEMI_TOKEN            : 'bble' ;
>  >
>  > This is "bang my head on the wall" frustrating!
>  > It looks so simple, but I can't get it to work either!
>  > Just when I thought I was getting the hang of it ...
>  > I hope someone else has an answer.
>
>  This is because of:
>
>  http://www.antlr.org:8888/browse/ANTLR-189

I didn't see your post until after I sent my last post.
Does that mean it isn't possible to do what Alan wants with the
current lexer implementation or could the grammar be modified to do
what he wants?

-- 
R. Mark Volkmann
Object Computing, Inc.

From parrt at cs.usfca.edu  Sun Feb 24 16:02:44 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 24 Feb 2008 16:02:44 -0800
Subject: [antlr-interest] Why won't this match...
In-Reply-To: <f0fcc6820802241527n1505fc41lf3cfdb7397f940e3@mail.gmail.com>
References: <2b5f47650802240740n35ca5edfk2cdffbf16a792500@mail.gmail.com>
	<f0fcc6820802241512p7ffc07c8pae3f50ce1f7317de@mail.gmail.com>
	<E96539DF-0DD7-4EB8-8C4E-0E560AAA5C43@cs.usfca.edu>
	<f0fcc6820802241527n1505fc41lf3cfdb7397f940e3@mail.gmail.com>
Message-ID: <FF3BBBE5-3DCD-4225-98D0-89858E0083A4@cs.usfca.edu>


On Feb 24, 2008, at 3:27 PM, Mark Volkmann wrote:

try

>>>> LITTLE_TOKEN     : {input.LA(3)!='b'}?=> 'wi';

Ter

> I didn't see your post until after I sent my last post.
> Does that mean it isn't possible to do what Alan wants with the
> current lexer implementation or could the grammar be modified to do
> what he wants?
>
> -- 
> R. Mark Volkmann
> Object Computing, Inc.


From r.mark.volkmann at gmail.com  Sun Feb 24 16:34:57 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Sun, 24 Feb 2008 18:34:57 -0600
Subject: [antlr-interest] Why won't this match...
In-Reply-To: <FF3BBBE5-3DCD-4225-98D0-89858E0083A4@cs.usfca.edu>
References: <2b5f47650802240740n35ca5edfk2cdffbf16a792500@mail.gmail.com>
	<f0fcc6820802241512p7ffc07c8pae3f50ce1f7317de@mail.gmail.com>
	<E96539DF-0DD7-4EB8-8C4E-0E560AAA5C43@cs.usfca.edu>
	<f0fcc6820802241527n1505fc41lf3cfdb7397f940e3@mail.gmail.com>
	<FF3BBBE5-3DCD-4225-98D0-89858E0083A4@cs.usfca.edu>
Message-ID: <f0fcc6820802241634w793dcc4dycbc4eeb140b8f515@mail.gmail.com>

On Sun, Feb 24, 2008 at 6:02 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
>
>  On Feb 24, 2008, at 3:27 PM, Mark Volkmann wrote:
>
>  try
>
>  >>>> LITTLE_TOKEN     : {input.LA(3)!='b'}?=> 'wi';

I don't think that can be right because we want to use LITTLE_TOKEN
even when the third character is 'b'. The criteria for choosing
BIG_TOKEN instead of LITTLE_TOKEN is that the eigth character of
'wibbled' is 'd'. If it doesn't match BIG_TOKEN then we want it to
match LITTLE_TOKEN followed by SEMI_TOKEN.

>  > I didn't see your post until after I sent my last post.
>  > Does that mean it isn't possible to do what Alan wants with the
>  > current lexer implementation or could the grammar be modified to do
>  > what he wants?

-- 
R. Mark Volkmann
Object Computing, Inc.

From parrt at cs.usfca.edu  Sun Feb 24 16:36:47 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 24 Feb 2008 16:36:47 -0800
Subject: [antlr-interest] Why won't this match...
In-Reply-To: <f0fcc6820802241634w793dcc4dycbc4eeb140b8f515@mail.gmail.com>
References: <2b5f47650802240740n35ca5edfk2cdffbf16a792500@mail.gmail.com>
	<f0fcc6820802241512p7ffc07c8pae3f50ce1f7317de@mail.gmail.com>
	<E96539DF-0DD7-4EB8-8C4E-0E560AAA5C43@cs.usfca.edu>
	<f0fcc6820802241527n1505fc41lf3cfdb7397f940e3@mail.gmail.com>
	<FF3BBBE5-3DCD-4225-98D0-89858E0083A4@cs.usfca.edu>
	<f0fcc6820802241634w793dcc4dycbc4eeb140b8f515@mail.gmail.com>
Message-ID: <5F14C691-6F72-45AC-A98A-5F2870304374@cs.usfca.edu>

oh, right.

try just

ID : ... {if ( getText() in hashtable of keywords ) _type = keyword  
type; } ;

Ter
On Feb 24, 2008, at 4:34 PM, Mark Volkmann wrote:

> On Sun, Feb 24, 2008 at 6:02 PM, Terence Parr <parrt at cs.usfca.edu>  
> wrote:
>>
>> On Feb 24, 2008, at 3:27 PM, Mark Volkmann wrote:
>>
>> try
>>
>>>>>> LITTLE_TOKEN     : {input.LA(3)!='b'}?=> 'wi';
>
> I don't think that can be right because we want to use LITTLE_TOKEN
> even when the third character is 'b'. The criteria for choosing
> BIG_TOKEN instead of LITTLE_TOKEN is that the eigth character of
> 'wibbled' is 'd'. If it doesn't match BIG_TOKEN then we want it to
> match LITTLE_TOKEN followed by SEMI_TOKEN.
>
>>> I didn't see your post until after I sent my last post.
>>> Does that mean it isn't possible to do what Alan wants with the
>>> current lexer implementation or could the grammar be modified to do
>>> what he wants?
>
> -- 
> R. Mark Volkmann
> Object Computing, Inc.


From lefevrol at yahoo.com  Sun Feb 24 17:11:17 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Mon, 25 Feb 2008 02:11:17 +0100
Subject: [antlr-interest] Why won't this match...
In-Reply-To: <E96539DF-0DD7-4EB8-8C4E-0E560AAA5C43@cs.usfca.edu>
References: <2b5f47650802240740n35ca5edfk2cdffbf16a792500@mail.gmail.com>	<f0fcc6820802241512p7ffc07c8pae3f50ce1f7317de@mail.gmail.com>
	<E96539DF-0DD7-4EB8-8C4E-0E560AAA5C43@cs.usfca.edu>
Message-ID: <fpt4jp$nds$1@ger.gmane.org>

Terence Parr wrote:
> This is because of: 
> http://www.antlr.org:8888/browse/ANTLR-189

I don't quite follow. From looking at the generated code it is clear that 
once it sees 'wib' it goes straight for BIG_TOKEN (because it is the 
longest match?) and does not consider the alternative when that fails. How 
does that relate to "[the problem is] that any char can follow a token"?

Thanks,

-- O.L.


From lefevrol at yahoo.com  Sun Feb 24 17:25:06 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Mon, 25 Feb 2008 02:25:06 +0100
Subject: [antlr-interest] How is backtracking implemented?
Message-ID: <fpt5dm$p4q$1@ger.gmane.org>

If you add "options {backtrack=true;}" to your grammar the generated code 
will include conditionals like "if (backtracking>0)" (or "=0") but nowhere 
is backtracking set: it still has the value of 0 to which it was 
initialized in BaseRecognizer, so I don't understand how that can work...

Also, in Chapter 5 the backtracking option is spelled "backtrack" but 
elsewhere in the book one also encounters "options {backtracking=true;}", 
so this is confusing: what is the difference?

Thanks,

-- O.L.


From bmeike at speakeasy.net  Sun Feb 24 17:31:14 2008
From: bmeike at speakeasy.net (Blake Meike)
Date: Sun, 24 Feb 2008 17:31:14 -0800
Subject: [antlr-interest] newbie question: throwing an exception from
	parsing behavior
Message-ID: <A5C41EDA-9D51-4CEC-ADC2-3D7052B2A563@speakeasy.net>

I'm working with v3 and a grammar that handles numbers that are  
defined like numeric literals in Java:

0(0..7)+  |  (- |1..9)(0..9)+  |  0x(0..9|A..F|a..f)+

I find it simplified my grammar substantially, if I just accept a  
pretty general symbol, and validate it in the behavior associated with  
the rule, instead of trying to enforce the constraints in the grammar  
itself.

It all works fine, except that I can't figure our how to throw a  
useful exception, when the input is invalid.

I looked at the book, the various subclasses of RecognitionException  
and tried to follow things in the debugger.  It seems like something  
that would be common enough need, so that there ought to be a fairly  
simple way to do it...

Suggestions?

Thanks,
  -blake

From parrt at cs.usfca.edu  Sun Feb 24 17:39:39 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 24 Feb 2008 17:39:39 -0800
Subject: [antlr-interest] How is backtracking implemented?
In-Reply-To: <fpt5dm$p4q$1@ger.gmane.org>
References: <fpt5dm$p4q$1@ger.gmane.org>
Message-ID: <ED5EBC8C-B4B6-4590-AC90-73E93506B9DD@cs.usfca.edu>


On Feb 24, 2008, at 5:25 PM, Olivier Lefevre wrote:

> If you add "options {backtrack=true;}" to your grammar the generated  
> code will include conditionals like "if (backtracking>0)" (or "=0")  
> but nowhere is backtracking set: it still has the value of 0 to  
> which it was initialized in BaseRecognizer, so I don't understand  
> how that can work...
>
> Also, in Chapter 5 the backtracking option is spelled "backtrack"  
> but elsewhere in the book one also encounters "options  
> {backtracking=true;}", so this is confusing: what is the difference?

typo. sorry. backtrack=true is correct.

Ter

From lefevrol at yahoo.com  Sun Feb 24 17:40:33 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Mon, 25 Feb 2008 02:40:33 +0100
Subject: [antlr-interest] newbie question: throwing an exception from
	parsing behavior
In-Reply-To: <A5C41EDA-9D51-4CEC-ADC2-3D7052B2A563@speakeasy.net>
References: <A5C41EDA-9D51-4CEC-ADC2-3D7052B2A563@speakeasy.net>
Message-ID: <fpt6al$rb8$1@ger.gmane.org>

Blake Meike wrote:
> It all works fine, except that I can't figure our how to throw a useful 
> exception, when the input is invalid.

 From within an action. Subclass RecognitionException to add a message 
string or whatever and, in the action, do

     if (bad) throw new MyException(input, myMsg);

All parsers have an input variable (inherited from Parser).

-- O.L.


From lefevrol at yahoo.com  Sun Feb 24 17:43:55 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Mon, 25 Feb 2008 02:43:55 +0100
Subject: [antlr-interest] How is backtracking implemented?
In-Reply-To: <ED5EBC8C-B4B6-4590-AC90-73E93506B9DD@cs.usfca.edu>
References: <fpt5dm$p4q$1@ger.gmane.org>
	<ED5EBC8C-B4B6-4590-AC90-73E93506B9DD@cs.usfca.edu>
Message-ID: <fpt6gv$rob$1@ger.gmane.org>

Terence Parr wrote:
> typo. sorry. backtrack=true is correct.

OK, thanks. I sent a notice using the Errata web form.

What about my first question, though?

-- O.L.


From bmeike at speakeasy.net  Sun Feb 24 19:05:50 2008
From: bmeike at speakeasy.net (Blake Meike)
Date: Sun, 24 Feb 2008 19:05:50 -0800
Subject: [antlr-interest] newbie question: throwing an exception from
	parsing behavior
In-Reply-To: <fpt6al$rb8$1@ger.gmane.org>
References: <A5C41EDA-9D51-4CEC-ADC2-3D7052B2A563@speakeasy.net>
	<fpt6al$rb8$1@ger.gmane.org>
Message-ID: <39A629E6-2748-4C42-975E-B5B1289C04CD@speakeasy.net>

Yeah, I tried something like that...  RecognitionException does not  
take that second argument.

I can, of course, catch my subclass, explicitly, and print out its  
message.  I was hoping there was some way to integrate with antlr's  
error handling mechanism...

-blake


On Feb 24, 2008, at 5:40 PM, Olivier Lefevre wrote:

> Blake Meike wrote:
>> It all works fine, except that I can't figure our how to throw a  
>> useful exception, when the input is invalid.
>
> From within an action. Subclass RecognitionException to add a  
> message string or whatever and, in the action, do
>
>    if (bad) throw new MyException(input, myMsg);
>
> All parsers have an input variable (inherited from Parser).
>
> -- O.L.
>
>


From lefevrol at yahoo.com  Sun Feb 24 19:33:42 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Mon, 25 Feb 2008 04:33:42 +0100
Subject: [antlr-interest] newbie question: throwing an exception from
	parsing behavior
In-Reply-To: <39A629E6-2748-4C42-975E-B5B1289C04CD@speakeasy.net>
References: <A5C41EDA-9D51-4CEC-ADC2-3D7052B2A563@speakeasy.net>	<fpt6al$rb8$1@ger.gmane.org>
	<39A629E6-2748-4C42-975E-B5B1289C04CD@speakeasy.net>
Message-ID: <fptcuq$9k2$1@ger.gmane.org>

> I can, of course, catch my subclass, explicitly, and print out its 
> message.  I was hoping there was some way to integrate with antlr's 
> error handling mechanism...

Have you read $10.2 and $10.3 in the book? I think that's all the 
integration there is.

-- O.L.


From bmeike at speakeasy.net  Sun Feb 24 19:41:36 2008
From: bmeike at speakeasy.net (Blake Meike)
Date: Sun, 24 Feb 2008 19:41:36 -0800
Subject: [antlr-interest] newbie question: throwing an exception from
	parsing behavior
In-Reply-To: <fptcuq$9k2$1@ger.gmane.org>
References: <A5C41EDA-9D51-4CEC-ADC2-3D7052B2A563@speakeasy.net>	<fpt6al$rb8$1@ger.gmane.org>
	<39A629E6-2748-4C42-975E-B5B1289C04CD@speakeasy.net>
	<fptcuq$9k2$1@ger.gmane.org>
Message-ID: <2A3E042B-CA05-49D2-8082-6CC45727DB3D@speakeasy.net>

Yes.  Thanks!

-blake


On Feb 24, 2008, at 7:33 PM, Olivier Lefevre wrote:

>> I can, of course, catch my subclass, explicitly, and print out its  
>> message.  I was hoping there was some way to integrate with antlr's  
>> error handling mechanism...
>
> Have you read $10.2 and $10.3 in the book? I think that's all the  
> integration there is.
>
> -- O.L.
>
>


From parrt at cs.usfca.edu  Sun Feb 24 21:02:49 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 24 Feb 2008 21:02:49 -0800
Subject: [antlr-interest] How is backtracking implemented?
In-Reply-To: <fpt6gv$rob$1@ger.gmane.org>
References: <fpt5dm$p4q$1@ger.gmane.org>
	<ED5EBC8C-B4B6-4590-AC90-73E93506B9DD@cs.usfca.edu>
	<fpt6gv$rob$1@ger.gmane.org>
Message-ID: <7DD63049-FE1D-4750-A870-B854855FCC75@cs.usfca.edu>

an IDE "find usages" on backtracking should show you in the support  
code.
Ter
On Feb 24, 2008, at 5:43 PM, Olivier Lefevre wrote:

> Terence Parr wrote:
>> typo. sorry. backtrack=true is correct.
>
> OK, thanks. I sent a notice using the Errata web form.
>
> What about my first question, though?
>
> -- O.L.
>


From phreed at gmail.com  Sun Feb 24 22:53:38 2008
From: phreed at gmail.com (Fred)
Date: Mon, 25 Feb 2008 00:53:38 -0600
Subject: [antlr-interest] StringTemplate: Functional List Formatting
In-Reply-To: <cb0c557b0802242252o16a137ev940ffd43b9355208@mail.gmail.com>
References: <cb0c557b0802242252o16a137ev940ffd43b9355208@mail.gmail.com>
Message-ID: <cb0c557b0802242253m7063d7ado86a3a7019047346f@mail.gmail.com>

I have doing some things related to lists in string templates that tax
 the current set of functions.
 Specifically, 'first', 'last', 'rest', 'tail' aren't quite do it for me.
 In particular, I need to do things like...
  'front'  : kind of like 'rest' but basically everything but 'last'
  'reverse' : reverse the order of the list (useful for things like
 building java package names)
  'sublist(list,0,-2)+sublist(list,-1)' : all but the second to the last item.

 ok, that last one is garbage but you get the idea.
 I know this is verging on something not unlike a functional language
 and you may have good reasons for not going there.

From antlr at mirality.co.nz  Sun Feb 24 23:51:51 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 25 Feb 2008 20:51:51 +1300
Subject: [antlr-interest] Why won't this match...
In-Reply-To: <f0fcc6820802241527n1505fc41lf3cfdb7397f940e3@mail.gmail.co
 m>
References: <2b5f47650802240740n35ca5edfk2cdffbf16a792500@mail.gmail.com>
	<f0fcc6820802241512p7ffc07c8pae3f50ce1f7317de@mail.gmail.com>
	<E96539DF-0DD7-4EB8-8C4E-0E560AAA5C43@cs.usfca.edu>
	<f0fcc6820802241527n1505fc41lf3cfdb7397f940e3@mail.gmail.com>
Message-ID: <20080225075500.07D5F11EB21@www.antlr.org>

At 12:27 25/02/2008, Mark Volkmann wrote:
 >I didn't see your post until after I sent my last post.
 >Does that mean it isn't possible to do what Alan wants with the
 >current lexer implementation or could the grammar be modified to 

 >do what he wants?

One of the standard workarounds to the "overly optimistic lexer 
problem" (as I call it) is to merge all lexer rules with common 
prefixes:

fragment BIG_TOKEN 'wibbled';   // just a placeholder
LITTLE_TOKEN
   :  'wi'
      ( ('bbled') => 'bbled' { $type = BIG_TOKEN; } )?
   ;
SEMI_TOKEN: 'bble';

This works because the syntactic predicate forces a full lookahead 
before the branch is taken.  BIG_TOKEN is declared as a fragment 
since we need to define a token type id for it, and declaring it 
in the tokens section causes a warning message for some weird 
reason.  Creating a throwaway fragment rule handles both of these.

(The other standard workaround is to have a keyword matching table 
as Ter already suggested.)


From thomas.molthahn at wago.com  Sun Feb 24 23:56:47 2008
From: thomas.molthahn at wago.com (thomas.molthahn at wago.com)
Date: Mon, 25 Feb 2008 08:56:47 +0100
Subject: [antlr-interest] ANTLR under CScarp
Message-ID: <3F76E6AC64D89040BC810CF41345DDE00D529D@SVEX01004.wago.local>

 Hi,

 I'm currently writting my exam about a compiler for a simple script 
 language.
 However, I am programming the compiler surface (like a rich test box 
 with some functions) based on C# (Microsoft Visual Studio 2005) 
 and .NET 2.0 (or .NET x.x).

 Now I was wondering if there is any ANTLR DLL I can refer to,
 making ANTLR work in the C# development inviroment.

 "So that I just can take the text of the rich text box, run ANTLR 
 (parse it through) and get a error output back".

 Tom



_______________________________________________________________________________________
Diese E-Mail einschlie?lich ihrer Anh?nge ist vertraulich und daher allein f?r den Gebrauch durch den vorgesehenen Empf?nger bestimmt. Dritten ist das Lesen, Verteilen oder Weiterleiten dieser E-Mail sowie jedwedes Vertrauen auf deren Inhalt untersagt. Wir bitten, eine fehlgeleitete E-Mail unverz?glich vollst?ndig zu l?schen und uns eine Nachricht zukommen zu lassen.

This email may contain material that is confidential and/or privileged for the sole use of the intended recipient. Any review, reliance or distribution by others or forwarding without express permission is strictly prohibited. If you are not the intended recipient, please contact the sender and delete all copies. 

WAGO Kontakttechnik GmbH (nach Schweizer Recht) & Co. KG; Rechtsform: Kommanditgesellschaft; Sitz: Minden; Registergericht: Bad Oeynhausen, HRA 6218; Pers?nlich haftender Gesellschafter: WAGO Kontakttechnik Beteiligungs GmbH; Sitz: Fribourg (Schweiz); Handelsregisteramt CH-217-3533291-9; Gesch?ftsf?hrung: Dipl.-Wirtsch. Ing. (FH) Sven Michael Hohorst; Dipl. Betriebsw. Axel Christian B?rner.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080225/8378210b/attachment-0001.html 

From felix_do at web.de  Mon Feb 25 02:08:58 2008
From: felix_do at web.de (Felix Dorner)
Date: Mon, 25 Feb 2008 11:08:58 +0100
Subject: [antlr-interest] AntlrWorks tokenVocab support
Message-ID: <47C293BA.2000601@web.de>

Hey,

I do the AST Parser Example from "The Definitive Antlr Reference" in 
Chapter 3:

options {
tokenVocab=Expr;
...
}

As the Grammar Rules include lexical token names from an external 
definition, they are marked as "undefined references". Can I somehow 
make AntlrWorks "import" these token names from the grammar that defines 
them to make the "error" markers disappear?

Thanks,
Felix

From thkarcher at gmx.de  Mon Feb 25 02:19:26 2008
From: thkarcher at gmx.de (Thomas Karcher)
Date: Mon, 25 Feb 2008 11:19:26 +0100
Subject: [antlr-interest] AntlrWorks tokenVocab support
In-Reply-To: <47C293BA.2000601@web.de>
References: <47C293BA.2000601@web.de>
Message-ID: <1203934766.4625.2.camel@localhost>

Hi Felix,

> options {
> tokenVocab=Expr;
> ...
> }
> As the Grammar Rules include lexical token names from an external 
> definition, they are marked as "undefined references". Can I somehow 
> make AntlrWorks "import" these token names from the grammar that defines 
> them to make the "error" markers disappear?

Are you using the current ANTLRWorks 1.1.7?

As long as I keep the Expr.token file up-to-date (by generating the
non-tree grammar) in the same directory as the tree grammar file, it
works for me.

The is a little trick, though, to "motivate" ANTLRWorks to re-read the
token file: Just comment the tokenVocab line and uncomment it
afterwards ... then new tokens from the non-tree grammar become
recognized.

Thomas

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Dies ist ein digital signierter Nachrichtenteil
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080225/3cf84cac/attachment.bin 

From compilers at gmail.com  Mon Feb 25 02:24:01 2008
From: compilers at gmail.com (Dan S.)
Date: Mon, 25 Feb 2008 02:24:01 -0800
Subject: [antlr-interest] Dynamic scopes with C backend
Message-ID: <139944a50802250224t58e6b99awa0a2d55c3dec5e3e@mail.gmail.com>

I have a rule which looks like the following:

rule
scope {
    char *foo;
}
@init {
    $rule::foo = 0;
}
@after {
    if ($rule::foo) free($rule::foo);
}
...

This code segfaults because the scope is popped before the @after
section is executed. The ANTLR Reference books seems to indicate that
it is valid to reference scope variables in an @after section (example
on page 140), so this looks like a bug.

Also, I'm sorry if this issue was addressed already, but I don't know
if there is an easy way to search all the mailing list archives. The
archives page has all the messages grouped by month and I'm not going
to do a search month by month.

Dan.

From jaluber at gmx.de  Mon Feb 25 03:38:11 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Mon, 25 Feb 2008 12:38:11 +0100
Subject: [antlr-interest] ANTLR under CScarp
In-Reply-To: <3F76E6AC64D89040BC810CF41345DDE00D529D@SVEX01004.wago.local>
References: <3F76E6AC64D89040BC810CF41345DDE00D529D@SVEX01004.wago.local>
Message-ID: <47C2A8A3.40507@gmx.de>

thomas.molthahn at wago.com schrieb:
>  Hi,
> 
>  I'm currently writting my exam about a compiler for a simple script
>  language.
>  However, I am programming the compiler surface (like a rich test box
>  with some functions) based on C# (Microsoft Visual Studio 2005)
>  and .NET 2.0 (or .NET x.x).
> 
>  Now I was wondering if there is any ANTLR DLL I can refer to,
>  making ANTLR work in the C# development inviroment.
> 
>  "So that I just can take the text of the rich text box, run ANTLR
>  (parse it through) and get a error output back".

That doesn't work quite that. Compilers use a driver program (in your 
case the rich box program) which takes the input and feeds it into a 
lexer, which in turn feeds the parser, which in turn possibly feeds the 
tree parser. The lexer, parser and possibly tree parser are generated 
from ANTLR grammars. There are a few assemblies included in the ANTLR 
distribution, under the runtime path for CSharp. Reference them as 
necessary.

Johannes

From alexander at gaengel.de  Mon Feb 25 06:50:54 2008
From: alexander at gaengel.de (=?ISO-8859-15?Q?Alexander_G=E4ngel?=)
Date: Mon, 25 Feb 2008 15:50:54 +0100
Subject: [antlr-interest] Help Needed with multiple alternatives
In-Reply-To: <47C1EAC0.70408@gaengel.de>
References: <47BEABCF.2060501@gaengel.de> <47C1EAC0.70408@gaengel.de>
Message-ID: <47C2D5CE.4060803@gaengel.de>

I still have this Problem but I think I search in the wrong spot.

can somebody explain me which rule makes the Problem?




Thanks
Alexander

Alexander G?ngel schrieb:
> I found the problem but still have no working solution.
>
> I tried to get around it by using scoping and Semantic Predicates.
>
> so I set a scope with a boolean man variable and wanted to make a 
> decision like {$exp::name}=> ... | so that the rule chooses the first 
> alternative when $exp::name is set true and the other solution if it 
> is false.
>
> Is this possible, cause right now it's not working, but there may be 
> some other error still in the rule.
>
> Alexander
>
> Alexander G?ngel schrieb:
>> I just can't get my grammar to work without having a multiple 
>> alternatives problem.
>>
>> I have some nested expression rules to get the precedence of the 
>> different operations.
>>
>> The problem occures since I added the letexpression  rule to exp_direct
>>
>> I hope someone can give me a hint how to solve this.
>>
>> Thanks Alexander
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080225/b1ec7a53/attachment-0001.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: firstalternative.png
Type: image/png
Size: 14368 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080225/b1ec7a53/attachment-0002.png 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: secondalternative.png
Type: image/png
Size: 21185 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080225/b1ec7a53/attachment-0003.png 

From mark.edgeworth at scarletcode.co.uk  Mon Feb 25 08:00:11 2008
From: mark.edgeworth at scarletcode.co.uk (Mark Edgeworth)
Date: Mon, 25 Feb 2008 16:00:11 -0000
Subject: [antlr-interest] Using ANTLR with Eclipse
In-Reply-To: <mailman.19068.1203951076.2502.antlr-interest@antlr.org>
Message-ID: <002801c877c7$81225fd0$0300a8c0@chesterford>

Hi again,

I use Eclipse almost exclusively for all my development work, most of which
is in Java.  I have been reasonably successful in using the ANTLR plugin
from Scott Stanchfield, but the version of ANTLR in the plugin is 3.0.1 and
I'd like to move on.  However, looks like he got upset over something and is
not playing ANTLR anymore (the plugin source is not available for a rebuild
either).  There is another plugin from 'Certiv' which again uses ANTLR 3.0.1
in the plugin (as of 0.30.beta).

Any suggestions are most welcome!  

Incidentally, I hardly ever use ANTLRWorks as it does not play well with
Eclipse and the plugin mentioned above.  Are there plans to port ANTLRWorks
to Eclipse?

Many thanks,

Mark Edgeworth


From carter_cheng at yahoo.com  Mon Feb 25 08:23:22 2008
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Mon, 25 Feb 2008 08:23:22 -0800 (PST)
Subject: [antlr-interest] transforming AST's in place when generated
In-Reply-To: <20080224163621.00006948@goanna>
Message-ID: <968003.77434.qm@web50106.mail.re2.yahoo.com>

Well it's probably a bit of a beginner question but I
was wondering if you could in general reach into
already created subtrees and reconstitute them as you
pass them up the tree. Or perhaps return a forest i.e.
do something like this-

RuleA: RuleB RuleC RuleD RuleE;

Rule1:
       RuleA RuleF -> ^(DEF RuleB RuleC RuleD RuleE
RuleF)
     ;

i.e. somehow have RuleA pass back something where one
could reach into it an extract RuleB RuleC RuleD RuleE
and construct a new tree discarding information or
just raw passing of RuleB RuleC RuleD RuleE without
messing with the returns syntax.

I however think what your initial reply suggested is
enough for me to complete the task I have in hand so
thanks again.

Regards,

Carter.

--- Mark Wright <markwright at internode.on.net> wrote:

> > Thanks Mark. Just one followup question is there a
> way
> > to explicitly pass back a forest in ANTLR?
> 
> Hello Carter,
> 
> It sort of looks like it is passing back a forest
> of trees (with DD and FUNCTION_DECLARATION roots).
> 
> > i.e. when you do 
> > 
> > -> init_declarator+
> > 
> > it seems like you are not really passing back a
> rooted
> > tree.
> > 
> > Thanks again,
> > 
> > Carter.
> 
> This question seems too easy,  I am not sure I
> really
> understand the question.  If you wanted a rooted
> tree you could do something like:
> 
> -> ^(DECL init_declarator+)
> 
> I guess you would want to create the AST in which
> ever structure is easiest to handle with the next
> processing
> phase of the compiler or whatever program it is.
> 
> Regards, Mark
> 
> > 
> > --- Mark Wright <markwright at internode.on.net>
> wrote:
> > 
> > > Hello Carter,
> > > 
> > > The idea is to pass the int type_id AST as a
> > > paramater to the
> > > init_declarator_list, and the
> init_declarator_list
> > > passes it as a
> > > parameter to the init_declarator, something
> like:
> > > 
> > > declaration
> > >   :    storage_class_specifier? type_id
> > >
> init_declarator_list[$storage_class_specifier.tree,
> > > $type_id.tree] ';'
> > >           -> init_declarator_list
> > >   ;
> > > 
> > > init_declarator_list[CommonTree scs, CommonTree
> ti]
> > >   :   init_declarator[$scs, $ti] (','
> > > init_declarator[$scs, $ti])*
> > >           -> init_declarator+
> > >   ;
> > > 
> > > init_declarator[CommonTree scs, CommonTree ti]
> > >   :    function_declarator
> > >           -> {(scs == null)}?
> ^(FUNCTION_DECLARATION
> > > {$ti} function_declarator)
> > >           -> {(scs != null)}?
> ^(FUNCTION_DECLARATION
> > > {$scs} {$ti} function_declarator)
> > >           ->
> > >   |   declarator initializer?
> > >           -> {(scs == null)}? ^(DD {$ti}
> declarator
> > > initializer?)
> > >           -> {(scs != null)}? ^(DD {$scs} {$ti}
> > > declarator initializer?)
> > >           ->
> > >   ;
> > > 
> > > etc.
> > > 
> > > Regards, Mark
> > > 
> > > -- 
> 
> -- 
> 



      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ 


From dave at badgers-in-foil.co.uk  Mon Feb 25 08:36:07 2008
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Mon, 25 Feb 2008 16:36:07 +0000
Subject: [antlr-interest] transforming AST's in place when generated
In-Reply-To: <968003.77434.qm@web50106.mail.re2.yahoo.com>
References: <20080224163621.00006948@goanna>
	<968003.77434.qm@web50106.mail.re2.yahoo.com>
Message-ID: <20080225163606.GA31934@badgers-in-foil.co.uk>

On Mon, Feb 25, 2008 at 08:23:22AM -0800, Carter Cheng wrote:
> Well it's probably a bit of a beginner question but I
> was wondering if you could in general reach into
> already created subtrees and reconstitute them as you
> pass them up the tree. Or perhaps return a forest i.e.
> do something like this-
> 
> RuleA: RuleB RuleC RuleD RuleE;
> 
> Rule1:
>        RuleA RuleF -> ^(DEF RuleB RuleC RuleD RuleE
> RuleF)
>      ;
> 
> i.e. somehow have RuleA pass back something where one
> could reach into it an extract RuleB RuleC RuleD RuleE
> and construct a new tree discarding information or
> just raw passing of RuleB RuleC RuleD RuleE without
> messing with the returns syntax.

If you mean, can you have a result 'tree' without a root, then yes
(NB lower-case letters for parser rule names):

  ruleA: B C D E;
  rule1: ruleA F -> ^(DEF ruleA F)
         ;

will result in a result tree being produced from rule1 which has DEF as
its root, and B C D E F as its children.

Actually, ANTLR does this by producing a special ('null') tree node as
the result of ruleA which will be recognised and discarded when added to
the result tree of rule1, if that makes any sense..?


ta,
dave

-- 
http://david.holroyd.me.uk/

From jimi at temporal-wave.com  Mon Feb 25 08:27:57 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 25 Feb 2008 08:27:57 -0800
Subject: [antlr-interest] Dynamic scopes with C backend
In-Reply-To: <139944a50802250224t58e6b99awa0a2d55c3dec5e3e@mail.gmail.com>
Message-ID: <"L91BCAE027E894776B64DFB79EA417447.1203956929.scalix.temporal-wave.com*"@MHS>

Yes - the after section isn't quite working correctly in conjunction 
with scopes. However, you dont really need to use the @after section 
to be honest, it is just a semi-convenience. Just enclose your main alts 
as ( ) and issue an action after it. I have it on my list of 3.1 things 
to fix.

Jim




> -----Original Message-----
> From: Dan S. [mailto:compilers at gmail.com]
> Sent: Monday, February 25, 2008 2:24 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Dynamic scopes with C backend
> 
> I have a rule which looks like the following:
> 
> rule
> scope {
>     char *foo;
> }
> @init {
>     $rule::foo = 0;
> }
> @after {
>     if ($rule::foo) free($rule::foo);
> }
> ...
> 
> This code segfaults because the scope is popped before the @after
> section is executed. The ANTLR Reference books seems to indicate that
> it is valid to reference scope variables in an @after section (example
> on page 140), so this looks like a bug.
> 
> Also, I'm sorry if this issue was addressed already, but I don't know
> if there is an easy way to search all the mailing list archives. The
> archives page has all the messages grouped by month and I'm not going
> to do a search month by month.
> 
> Dan.



From darien.hager at etelos-inc.com  Mon Feb 25 10:22:00 2008
From: darien.hager at etelos-inc.com (Darien Hager)
Date: Mon, 25 Feb 2008 10:22:00 -0800
Subject: [antlr-interest] add fields to the AST
In-Reply-To: <ef5132890802230715t5436c035gf12f2cb303a907d6@mail.gmail.com>
References: <ef5132890802230715t5436c035gf12f2cb303a907d6@mail.gmail.com>
Message-ID: <c8c997f40802251022h81dcfc7k97ce7c493e0b1a74@mail.gmail.com>

On 2/23/08, Peter Bulychev <peter.bulychev at gmail.com> wrote:
>
>
> I want to add some properties to the nodes of output tree. Therefore I
> want to add fields to the nodes of the output AST.
>

Not to put you off getting the book as I did, but AFAIK the "ASTLabelType"
option may come in handy for replacing the class used for nodes with your
own custom subclass. (Which is runtime dependent, in Java it would be a
subclass of CommonTreeNode)

-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are not
the intended recipient, then this is notice that any use, disclosure,
dissemination, distribution or copying is strictly prohibited. If you have
received this message in error please contact the sender by reply mail and
destroy all copies of the original message.


This e-mail message, including attachments, may contain confidential information for the sole use of the intended recipient(s). If you are not the intended recipient, then this is notice that any use, disclosure, dissemination, distribution or copying is strictly prohibited.  If you have received this message in error please contact the sender by reply mail and destroy all copies of the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080225/27f2ab61/attachment.html 

From listbrownie at gmail.com  Mon Feb 25 11:12:34 2008
From: listbrownie at gmail.com (alan brown)
Date: Mon, 25 Feb 2008 11:12:34 -0800
Subject: [antlr-interest] Using ANTLR with Eclipse
In-Reply-To: <002801c877c7$81225fd0$0300a8c0@chesterford>
References: <mailman.19068.1203951076.2502.antlr-interest@antlr.org>
	<002801c877c7$81225fd0$0300a8c0@chesterford>
Message-ID: <2b5f47650802251112u3b9bc8l65db6696a2fa686f@mail.gmail.com>

This doesn't qualify as helpful, but as an Intellij user it's nice (and
almost unique) to have a plug in for my IDE and not Eclipse instead of the
other way around.  I've had to pick up Eclipse just to work with some of the
plugins that aren't available on Intellij.

That's not supposed to be gloating.

alan

On Mon, Feb 25, 2008 at 8:00 AM, Mark Edgeworth <
mark.edgeworth at scarletcode.co.uk> wrote:

> Hi again,
>
> I use Eclipse almost exclusively for all my development work, most of
> which
> is in Java.  I have been reasonably successful in using the ANTLR plugin
> from Scott Stanchfield, but the version of ANTLR in the plugin is 3.0.1and
> I'd like to move on.  However, looks like he got upset over something and
> is
> not playing ANTLR anymore (the plugin source is not available for a
> rebuild
> either).  There is another plugin from 'Certiv' which again uses ANTLR
> 3.0.1
> in the plugin (as of 0.30.beta).
>
> Any suggestions are most welcome!
>
> Incidentally, I hardly ever use ANTLRWorks as it does not play well with
> Eclipse and the plugin mentioned above.  Are there plans to port
> ANTLRWorks
> to Eclipse?
>
> Many thanks,
>
> Mark Edgeworth
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080225/2e7eeff7/attachment.html 

From shro8822 at vandals.uidaho.edu  Mon Feb 25 14:02:22 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Mon, 25 Feb 2008 14:02:22 -0800
Subject: [antlr-interest] what does /** do?
Message-ID: <BAYC1-PASMTP10E2B15329B4C7E5204450F5180@CEZ.ICE>

I just noticed that if I uses a /**** */ comment (more than one *)
things don't work. Is this an artifact of the lexer or are these
comments used for something? I don't recall ever seeing them used
anywhere for anything (and Google won't search for non text :-b )


From lilypondtool at organum.hu  Mon Feb 25 14:24:21 2008
From: lilypondtool at organum.hu (Bertalan Fodor)
Date: Mon, 25 Feb 2008 23:24:21 +0100
Subject: [antlr-interest] NoViableException with semantic predicates
Message-ID: <47C34015.8070000@organum.hu>

Hello, I would need help in the following. I have grammar rules like this:

program: (definition)=>definition | expression;
expression: variable | { isMacro(input.LT(1))}? macro;
macro: keyword body;
definition: 'define' body;

Syntactically 'define' can be a keyword, and anything that can be a 
keyword can be a variable. That's why I'm using the semantic predicate.
I get NoViableAlt exception. If I run the debugger it doesn't go into 
the syntactic predicate checking, and the dfa.predict method of 
program() throws NoViableAltException. The semantic predicate is not 
called at all. It seems I'm misunderstanding something. Could you explain?

Thank you,

Bertalan Fodor


From jimi at temporal-wave.com  Mon Feb 25 14:04:16 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 25 Feb 2008 14:04:16 -0800
Subject: [antlr-interest] what does /** do?
In-Reply-To: <BAYC1-PASMTP10E2B15329B4C7E5204450F5180@CEZ.ICE>
Message-ID: <"L941E638305F34fd28D235E0101005A6A.1203977116.scalix.temporal-wave.com*"@MHS>

> -----Original Message-----
> From: Benjamin Shropshire [mailto:shro8822 at vandals.uidaho.edu]
> Sent: Monday, February 25, 2008 2:02 PM
> To: Antlr Interest
> Subject: [antlr-interest] what does /** do?
> 
> I just noticed that if I uses a /**** */ comment (more than one *)
> things don't work. Is this an artifact of the lexer or are these
> comments used for something? I don't recall ever seeing them used
> anywhere for anything (and Google won't search for non text :-b )

What does it do in what?

/** is the introducer for a Doxygen/Javadoc like comment, but any more 
'*' would just be ignored in an ANTLR source, or should be. Are you 
saying that they are not, or are you talkign about your own lexer?

Jim
 



From shro8822 at vandals.uidaho.edu  Mon Feb 25 14:44:55 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Mon, 25 Feb 2008 14:44:55 -0800
Subject: [antlr-interest] what does /** do?
In-Reply-To: <"L941E638305F34fd28D235E0101005A6A.1203977116.scalix.temporal-wave.com*"@MHS>
References: <"L941E638305F34fd28D235E0101005A6A.1203977116.scalix.temporal-wave.com*"@MHS>
Message-ID: <BAYC1-PASMTP04319434A7BC8034292755F5180@CEZ.ICE>

Jim Idle wrote:
>> -----Original Message-----
>> From: Benjamin Shropshire [mailto:shro8822 at vandals.uidaho.edu]
>> Sent: Monday, February 25, 2008 2:02 PM
>> To: Antlr Interest
>> Subject: [antlr-interest] what does /** do?
>>
>> I just noticed that if I uses a /**** */ comment (more than one *)
>> things don't work. Is this an artifact of the lexer or are these
>> comments used for something? I don't recall ever seeing them used
>> anywhere for anything (and Google won't search for non text :-b )
>>     
>
> What does it do in what?
>
> /** is the introducer for a Doxygen/Javadoc like comment, but any more 
> '*' would just be ignored in an ANTLR source, or should be. Are you 
> saying that they are not, or are you talking about your own lexer?
>
> Jim

In my test.g file I used it as a comment and it thew an error. by
deleting the remaining *'s the error went away.

test case:

---start of file ----
grammar test_g;
options {
    output=AST;
    ASTLabelType=CommonTree; // type of $stat.tree ref etc...
    language=CSharp;
}

tokens {
NewLine        =    '\r\n';
}
        eol  : NewLine
             ;


/**
*/

---- end of file ----

Dang, forgot reply all, and BTW from the above comment; is antlr expecting javadoc stuff in there and failing when it doesn't find it?


From felix_do at web.de  Mon Feb 25 15:08:38 2008
From: felix_do at web.de (Felix Dorner)
Date: Tue, 26 Feb 2008 00:08:38 +0100
Subject: [antlr-interest] Using ANTLR with Eclipse
In-Reply-To: <002801c877c7$81225fd0$0300a8c0@chesterford>
References: <002801c877c7$81225fd0$0300a8c0@chesterford>
Message-ID: <47C34A76.7000209@web.de>

Hey Mark,

I started using Antlr / Antlrworks yesterday, and also use Eclipse for 
my developement. I directly installed the antlr3 ant task, so all I do 
with Antlrworks is edit the grammar files (which are part of a project 
in my workspace). Everything else is managed from within Eclipse within 
Ant tasks, no need for any other antlr plugins. To me this works quite 
fine.

Felix

Mark Edgeworth wrote:
> Hi again,
> 
> I use Eclipse almost exclusively for all my development work, most of which
> is in Java.  I have been reasonably successful in using the ANTLR plugin
> from Scott Stanchfield, but the version of ANTLR in the plugin is 3.0.1 and
> I'd like to move on.  However, looks like he got upset over something and is
> not playing ANTLR anymore (the plugin source is not available for a rebuild
> either).  There is another plugin from 'Certiv' which again uses ANTLR 3.0.1
> in the plugin (as of 0.30.beta).
> 
> Any suggestions are most welcome!  
> 
> Incidentally, I hardly ever use ANTLRWorks as it does not play well with
> Eclipse and the plugin mentioned above.  Are there plans to port ANTLRWorks
> to Eclipse?
> 
> Many thanks,
> 
> Mark Edgeworth
> 


From r.mark.volkmann at gmail.com  Mon Feb 25 15:28:55 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Mon, 25 Feb 2008 17:28:55 -0600
Subject: [antlr-interest] Using ANTLR with Eclipse
In-Reply-To: <47C34A76.7000209@web.de>
References: <002801c877c7$81225fd0$0300a8c0@chesterford>
	<47C34A76.7000209@web.de>
Message-ID: <f0fcc6820802251528p4755a1e8u5ec8e92b540954d3@mail.gmail.com>

On Mon, Feb 25, 2008 at 5:08 PM, Felix Dorner <felix_do at web.de> wrote:
> Hey Mark,
>
>  I started using Antlr / Antlrworks yesterday, and also use Eclipse for
>  my developement. I directly installed the antlr3 ant task, so all I do
>  with Antlrworks is edit the grammar files (which are part of a project
>  in my workspace). Everything else is managed from within Eclipse within
>  Ant tasks, no need for any other antlr plugins. To me this works quite
>  fine.

I must not be googling well today. I can't find documentation on the
ANTLR Ant tasks. Anybody know where that is?

Aren't you giving up features of ANTLRWorks like the graphical
debugger by taking your approach?

>  Felix
>
>  Mark Edgeworth wrote:
>  > Hi again,
>  >
>  > I use Eclipse almost exclusively for all my development work, most of which
>  > is in Java.  I have been reasonably successful in using the ANTLR plugin
>  > from Scott Stanchfield, but the version of ANTLR in the plugin is 3.0.1 and
>  > I'd like to move on.  However, looks like he got upset over something and is
>  > not playing ANTLR anymore (the plugin source is not available for a rebuild
>  > either).  There is another plugin from 'Certiv' which again uses ANTLR 3.0.1
>  > in the plugin (as of 0.30.beta).
>  >
>  > Any suggestions are most welcome!
>  >
>  > Incidentally, I hardly ever use ANTLRWorks as it does not play well with
>  > Eclipse and the plugin mentioned above.  Are there plans to port ANTLRWorks
>  > to Eclipse?
>  >
>  > Many thanks,
>  >
>  > Mark Edgeworth
>  >
>
>



-- 
R. Mark Volkmann
Object Computing, Inc.

From felix_do at web.de  Mon Feb 25 15:49:49 2008
From: felix_do at web.de (Felix Dorner)
Date: Tue, 26 Feb 2008 00:49:49 +0100
Subject: [antlr-interest] Using ANTLR with Eclipse
In-Reply-To: <f0fcc6820802251528p4755a1e8u5ec8e92b540954d3@mail.gmail.com>
References: <002801c877c7$81225fd0$0300a8c0@chesterford>	
	<47C34A76.7000209@web.de>
	<f0fcc6820802251528p4755a1e8u5ec8e92b540954d3@mail.gmail.com>
Message-ID: <47C3541D.8080305@web.de>

Hey Mark,

no need to google for that. Go to antlr.org and search for "ANTLRv3 Task 
for Ant".
As I said. I use AntlrWorks for editing the grammar files and of course 
take advantage of its visual capabilities like the syntax diagram.
When I am ready for generating the parser I switch to eclipse and run 
the appropriate ant task from my buildfile.

Felix
> I must not be googling well today. I can't find documentation on the
> ANTLR Ant tasks. Anybody know where that is?
>
> Aren't you giving up features of ANTLRWorks like the graphical
> debugger by taking your approach?
>   

From lgcraymer at yahoo.com  Mon Feb 25 15:51:20 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Mon, 25 Feb 2008 15:51:20 -0800 (PST)
Subject: [antlr-interest] what does /** do?
Message-ID: <485604.80785.qm@web55905.mail.re3.yahoo.com>

That's actually the expected behavior:  ANTLR accepts javadoc comments just before grammar or rule declarations and nowhere else.  Regular comments (/* .. */ or // ) are accepted anywhere--they are filtered out before they can be seen by the parser.

--Loring

----- Original Message ----
> From: Benjamin Shropshire <shro8822 at vandals.uidaho.edu>
> To: Jim Idle <jimi at temporal-wave.com>; Antlr Interest <antlr-interest at antlr.org>
> Sent: Monday, February 25, 2008 2:44:55 PM
> Subject: Re: [antlr-interest] what does /** do?
> 
> Jim Idle wrote:
> >> -----Original Message-----
> >> From: Benjamin Shropshire [mailto:shro8822 at vandals.uidaho.edu]
> >> Sent: Monday, February 25, 2008 2:02 PM
> >> To: Antlr Interest
> >> Subject: [antlr-interest] what does /** do?
> >>
> >> I just noticed that if I uses a /**** */ comment (more than one *)
> >> things don't work. Is this an artifact of the lexer or are these
> >> comments used for something? I don't recall ever seeing them used
> >> anywhere for anything (and Google won't search for non text :-b )
> >>     
> >
> > What does it do in what?
> >
> > /** is the introducer for a Doxygen/Javadoc like comment, but any more 
> > '*' would just be ignored in an ANTLR source, or should be. Are you 
> > saying that they are not, or are you talking about your own lexer?
> >
> > Jim
> 
> In my test.g file I used it as a comment and it thew an error. by
> deleting the remaining *'s the error went away.
> 
> test case:
> 
> ---start of file ----
> grammar test_g;
> options {
>     output=AST;
>     ASTLabelType=CommonTree; // type of $stat.tree ref etc...
>     language=CSharp;
> }
> 
> tokens {
> NewLine        =    '\r\n';
> }
>         eol  : NewLine
>              ;
> 
> 
> /**
> */
> 
> ---- end of file ----
> 
> Dang, forgot reply all, and BTW from the above comment; is antlr expecting 
> javadoc stuff in there and failing when it doesn't find it?
> 
> 




      ____________________________________________________________________________________
Never miss a thing.  Make Yahoo your home page. 
http://www.yahoo.com/r/hs

From felix_do at web.de  Mon Feb 25 15:52:19 2008
From: felix_do at web.de (Felix Dorner)
Date: Tue, 26 Feb 2008 00:52:19 +0100
Subject: [antlr-interest] AntlrWorks tokenVocab support
In-Reply-To: <1203934766.4625.2.camel@localhost>
References: <47C293BA.2000601@web.de> <1203934766.4625.2.camel@localhost>
Message-ID: <47C354B3.8020200@web.de>

Hey Thomas,

yeah, that works for me too. The problem was that I generated the 
parser/token files to a different output directory, so obviously, how 
should AntlrWorks have known that...

> As long as I keep the Expr.token file up-to-date (by generating the
> non-tree grammar) in the same directory as the tree grammar file, it
> works for me.
>   


From shro8822 at vandals.uidaho.edu  Mon Feb 25 16:00:17 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Mon, 25 Feb 2008 16:00:17 -0800
Subject: [antlr-interest] what does /** do?
In-Reply-To: <485604.80785.qm@web55905.mail.re3.yahoo.com>
References: <485604.80785.qm@web55905.mail.re3.yahoo.com>
Message-ID: <BAYC1-PASMTP06CAE5522C9B5C3FD989BDF5190@CEZ.ICE>

Loring Craymer wrote:
> That's actually the expected behavior:  ANTLR accepts javadoc comments just before grammar or rule declarations and nowhere else.  Regular comments (/* .. */ or // ) are accepted anywhere--they are filtered out before they can be seen by the parser.
>
> --Loring
OK

Is that normal for Javadoc like systems? The only other one I've used* 
won't throw an error no mater where you put a /** */ or what you  put in 
it. It just does it's best and keeps on going if it can't make out what 
you want.

*http://www.digitalmars.com/d/1.0/ddoc.html

From shro8822 at vandals.uidaho.edu  Mon Feb 25 17:00:38 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Mon, 25 Feb 2008 17:00:38 -0800
Subject: [antlr-interest] how to get hold of individual nodes in a tree
	parser
Message-ID: <BAYC1-PASMTP01E66099512DED3C8476A5F5190@CEZ.ICE>

I have a tree grammar  with a rule like this:

name : ^(NAME name_literal+) { ; }

I need to do a foreach over the name_literal nodes but I can't seem to 
find anywhere in the manual that inserts action rules for repeated nodes 
in a tree parser. Anyone known how to do this?

From lgcraymer at yahoo.com  Mon Feb 25 17:04:02 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Mon, 25 Feb 2008 17:04:02 -0800 (PST)
Subject: [antlr-interest] what does /** do?
Message-ID: <39782.54534.qm@web55910.mail.re3.yahoo.com>

No, it is not the norm--most systems just ignore javadoc comments.  Ter, however, decided to transmit the javadoc comments to the generated code, so ANTLR recognizes the javadoc comments in selected places that conform to stylistic conventions.  Comment preservation in language translators is somewhat of an art; the approach taken by ANTLR has the advantage of simplicity and utility, with the slight "drawback" that a javadoc placement style is enforced.

--Loring

----- Original Message ----
> From: Benjamin Shropshire <shro8822 at vandals.uidaho.edu>
> To: Loring Craymer <lgcraymer at yahoo.com>
> Cc: Antlr Interest <antlr-interest at antlr.org>
> Sent: Monday, February 25, 2008 4:00:17 PM
> Subject: Re: [antlr-interest] what does /** do?
> 
> Loring Craymer wrote:
> > That's actually the expected behavior:  ANTLR accepts javadoc comments just 
> before grammar or rule declarations and nowhere else.  Regular comments (/* .. 
> */ or // ) are accepted anywhere--they are filtered out before they can be seen 
> by the parser.
> >
> > --Loring
> OK
> 
> Is that normal for Javadoc like systems? The only other one I've used* 
> won't throw an error no mater where you put a /** */ or what you  put in 
> it. It just does it's best and keeps on going if it can't make out what 
> you want.
> 
> *http://www.digitalmars.com/d/1.0/ddoc.html
> 




      ____________________________________________________________________________________
Never miss a thing.  Make Yahoo your home page. 
http://www.yahoo.com/r/hs

From markwright at internode.on.net  Mon Feb 25 17:15:10 2008
From: markwright at internode.on.net (Mark Wright)
Date: Tue, 26 Feb 2008 12:15:10 +1100
Subject: [antlr-interest] NoViableException with semantic predicates
In-Reply-To: <47C34015.8070000@organum.hu>
References: <47C34015.8070000@organum.hu>
Message-ID: <20080226121510.00001309@goanna>

Hello Bertalan,

Just in case you hadn't noticed, this is discussed in
in chapter 12, section "Keywords as Variables", p 287
of "The Definitive ANTLR Reference" book.

Regards, Mark

-- 

From shro8822 at vandals.uidaho.edu  Mon Feb 25 17:14:27 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Mon, 25 Feb 2008 17:14:27 -0800
Subject: [antlr-interest] what does /** do?
In-Reply-To: <39782.54534.qm@web55910.mail.re3.yahoo.com>
References: <39782.54534.qm@web55910.mail.re3.yahoo.com>
Message-ID: <BAYC1-PASMTP06AC8750A4BFE55A305D4BF5190@CEZ.ICE>

Loring Craymer wrote:
> No, it is not the norm--most systems just ignore javadoc comments.  Ter, however, decided to transmit the javadoc comments to the generated code, so ANTLR recognizes the javadoc comments in selected places that conform to stylistic conventions.  Comment preservation in language translators is somewhat of an art; the approach taken by ANTLR has the advantage of simplicity and utility, with the slight "drawback" that a javadoc placement style is enforced.
>
>   
fun. <joke>Why can't anything be simple. You'd think you should be able 
to put "/** type comments in the source are copied to the output and 
attached to the related function" and that would be that.</joke>

From markwright at internode.on.net  Mon Feb 25 17:35:10 2008
From: markwright at internode.on.net (Mark Wright)
Date: Tue, 26 Feb 2008 12:35:10 +1100
Subject: [antlr-interest] transforming AST's in place when generated
In-Reply-To: <968003.77434.qm@web50106.mail.re2.yahoo.com>
References: <20080224163621.00006948@goanna>
	<968003.77434.qm@web50106.mail.re2.yahoo.com>
Message-ID: <20080226123510.00001062@goanna>

> Well it's probably a bit of a beginner question but I
> was wondering if you could in general reach into
> already created subtrees and reconstitute them as you
> pass them up the tree. Or perhaps return a forest i.e.
> do something like this-
> 
> RuleA: RuleB RuleC RuleD RuleE;
> 
> Rule1:
>        RuleA RuleF -> ^(DEF RuleB RuleC RuleD RuleE
> RuleF)
>      ;
> 
> i.e. somehow have RuleA pass back something where one
> could reach into it an extract RuleB RuleC RuleD RuleE
> and construct a new tree discarding information or
> just raw passing of RuleB RuleC RuleD RuleE without
> messing with the returns syntax.

Hello Carter,

Yes:

RuleA: RuleB RuleC RuleD RuleE;

Rule1:
      RuleA RuleF -> ^(DEF RuleA RuleF)
      ;

Which builds the tree, as output by CommonTree.toStringTree():

(DEF RuleB RuleC RuleD RuleE RuleF)

Where RuleB RuleC RuleD RuleE RuleF are also expanded
into whatever they are.
 
> I however think what your initial reply suggested is
> enough for me to complete the task I have in hand so
> thanks again.
> 
> Regards,
> 
> Carter.

Great, thanks.

Regards, Mark

-- 

From jimi at temporal-wave.com  Mon Feb 25 17:13:43 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 25 Feb 2008 17:13:43 -0800
Subject: [antlr-interest] C runtime beta 1 for ANTLR 3.1 (includes C++
	compatibility)
Message-ID: <"LE74E3C66015245e3B5360F31D17FD812.1203988478.scalix.temporal-wave.com*"@MHS>

For those of you waiting for the C runtime to be updated for 3.1, I have
good news. Also good news for those wanting to use C++ with ANTLR 3.

 

Hopefully soon, but he is busy I know, Ter will make available the
following on the download area. You will need all of these components to
be successful (with ANTLR 3.1 C Runtime, with women, men, money,
whatever, you need something else):

 

?         New API documentation (this is still getting updated with
release change notes and more how-to stuff), which is already on the web
site in the usual place. From the home page see the Documentation
section and take the API Documentation link, then take the C link. I
usally get lots of typo corrections for comment text, and nothing at all
for the docs, so perhaps nobody reads these ;-)

?         New release distribution in: libantlr3c.3.0b1.tar.gz ? you
will need this to build the new runtime, but the new examples are now
self contained if you are a Windows developer.

?         New examples tar, which I hope will be available in the same
place as these beta snapshots.

 

I have begun the ?What?s changed in 3.1? docs, but there is so much that
they are not done yet. However the example projects are pretty well
documented and should show you how to go on. So, please use a
combination for now. If you are not comfortable with this, then please
wait for the official release, where the documentation will be much
improved even over the current improvements.

 

Things I know are not yet working:

 

1)      The debugger templates are not up to date, so debugging remotely
with ANTLRWorks will not work yet. The C library code has been
implemented though, which means the runtime is now dependant on socket
libraries (which configure should pick up)

2)      Tree parsers that rewrite trees leak some memory for the moment,
but this will be fixed of course. For now, do not try to free the tree
node streams (see the example polydiff, which just ignores freeing the
streams, because it will core dump if you do).

3)      Rewrites of imaginary tokens with both token and text may not
work because the Java templates rely on being able to overload method
calls and I can?t do that in C. It just needs a little more
investigation.

 

However, the following things have happened:

 

1)      Performance improvements for backtracking parsers;



2)      Imported grammars now work so large grammars can be split up
into smaller pieces and produce separate translation units. This works
as per the Java version ? see example project composite-java;



3)      Tree rewriting from tree parsers now works a la Java (but the
caveat 3) above;



4)      The runtime headers and generated code are now C++ compatible.
The C parser example (in the C runtime examples), now detects if it is
being compiled as C++ and integrates a dinky little C++ class within the
action code. You still need to use the C stuff for accessing token
values and so on, but I will shortly implement some C++ convenience
wrappers for those things. This is not really a big deal to my mind, as
the main thing is that you can now compiler the generated C code as C++
(need to tell the compiler to do this, as the suffix is still .c), and
can make calls directly to your C++ code, instantiate C++ classes, and
so on and so forth. I have not performed lots of testing on this, so I
appreciate any bug reports with this. Examples works with VS2005 C++ and
g++ with all warnings turned on, so I think it is pretty sound. (NB: Do
not compile the runtime library as C++, there is no reason).

Later I may well produce a complete C++ implementation from scratch,
however, at this point I am not sure that it buys you anything. Please
let me know if there are things you cannot do with the system as it
stands (other than access the tokens and so on using C++ objects, which
will be done later). 



5)      Quite a few bug fixes (will be documented later), but I am sure
that I lost a few bug reports and the change to the runtime for 3.1 were
quite substantial, so may need testing and re-reporting. I had no
feedback from anyone who previously reported C runtime bugs ? without
feedback, I will have to assume there are no bugs ;-)



6)      Integration of the UTF converter functions from Unicode.org.
Allows you to convert between the various encodings (UCS2, UTF-8,
UTF-16, UTF32,). Will be used shortly to create a UTF32 input stream
into which UTF8 and UTF16 input can be converted.



7)      The constructors for everything now just return NULL as the
pointer if they fail and do not try to return a reason. This is because
other than specifying a bad input file name, the only reason for failure
now is being out of memory. This cleans up status checking quite a bit.



8)      All the internal collections stuff, such as Vectors and Lists
are now all rebased to be 0 index based rather than 1 based. There was
originally a reason that I did it like that (Something to do with it
being easier to track the Java stuff), but I have completely forgotten
what it was, so I just recoded everything to be 0 based. If you have
used these structures in your own code, you will need to make similar
trivial adjustments. See the dynamic scope example, which has changed
accordingly to accommodate this.



9)      The overuse of 64 bit data types has been corrected and
rationalized. 64 bit elements are now only used where they make any
sense at all, such as input stream pointers and marks and as input keys
for the Int Trie collection. I later beta will also rationalize the use
of UNIT vs INT, as this got a bit out of hand too, and is now simpler,
but not quite checked out in all places.



10)   MACROS have been updated and added to the generated code (see the
generated code for now, though there is some new MACRO documentation in
the updated API docs). There is also a new macro to reference the token
source in a lexer, which wil make things easier for some. See the
examples again for information.



11)   Many more things I cannot remember at this second and will need to
consult the back of my Marlboro Lights packets and beer napkins for.
More to come before release of course.

 

Please give this a go if you can afford the time. The lexer parser tree
parser stuff is all solid as far as I can see, but the new tre rewriting
stuff could do with some testing and I would like feedback from the C++
guys. Thanks in advance for your effort in helping me to make this
release solid ? the quicker that bugs are found and fixed, the quicker
the release wil be ready as the C# stuff is pretty much there I think.

 

Cheers,

 

Jim

 

PS: Sorry in advance if I have left anything out from this, I probably
have, and so please only try this if you have a bit of spare time and
won?t email me to say how useless I am for making you spend an hour on
something ;-) [yes, people really do do that!]


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080225/c502de51/attachment-0001.html 

From lilypondtool at organum.hu  Mon Feb 25 22:47:36 2008
From: lilypondtool at organum.hu (Bertalan Fodor (LilyPondTool))
Date: Tue, 26 Feb 2008 07:47:36 +0100
Subject: [antlr-interest] Using ANTLR with Eclipse
In-Reply-To: <2b5f47650802251112u3b9bc8l65db6696a2fa686f@mail.gmail.com>
References: <mailman.19068.1203951076.2502.antlr-interest@antlr.org>	<002801c877c7$81225fd0$0300a8c0@chesterford>
	<2b5f47650802251112u3b9bc8l65db6696a2fa686f@mail.gmail.com>
Message-ID: <47C3B608.7010804@organum.hu>

For me for Antlr 2 Placidsystem's antlr studio was the best plugin for 
eclipse.
Now I use AntlrWorks and an ant target with automatic refresh.


alan brown wrote:
> This doesn't qualify as helpful, but as an Intellij user it's nice 
> (and almost unique) to have a plug in for my IDE and not Eclipse 
> instead of the other way around.  I've had to pick up Eclipse just to 
> work with some of the plugins that aren't available on Intellij.
>
> That's not supposed to be gloating.
>
> alan
>
> On Mon, Feb 25, 2008 at 8:00 AM, Mark Edgeworth 
> <mark.edgeworth at scarletcode.co.uk 
> <mailto:mark.edgeworth at scarletcode.co.uk>> wrote:
>
>     Hi again,
>
>     I use Eclipse almost exclusively for all my development work, most
>     of which
>     is in Java.  I have been reasonably successful in using the ANTLR
>     plugin
>     from Scott Stanchfield, but the version of ANTLR in the plugin is
>     3.0.1 and
>     I'd like to move on.  However, looks like he got upset over
>     something and is
>     not playing ANTLR anymore (the plugin source is not available for
>     a rebuild
>     either).  There is another plugin from 'Certiv' which again uses
>     ANTLR 3.0.1
>     in the plugin (as of 0.30.beta).
>
>     Any suggestions are most welcome!
>
>     Incidentally, I hardly ever use ANTLRWorks as it does not play
>     well with
>     Eclipse and the plugin mentioned above.  Are there plans to port
>     ANTLRWorks
>     to Eclipse?
>
>     Many thanks,
>
>     Mark Edgeworth
>
>


-- 
LilyPondTool is the editor for LilyPond files.
See http://lilypondtool.organum.hu

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080226/2c56ad58/attachment.html 

From GICodeWarrior+antlr at gmail.com  Mon Feb 25 23:30:38 2008
From: GICodeWarrior+antlr at gmail.com (Rusty Burchfield)
Date: Tue, 26 Feb 2008 02:30:38 -0500
Subject: [antlr-interest] multiplicity in TreeParser
Message-ID: <47C3C01E.1020304@gmail.com>


If I have a parser rule like the following:
example: TOKEN^ (object1 | object2 | object3)+;

Is there a way to access a list of the objects in the tree parser.  For 
example:
example returns [ComplexObject o]
  : #(TOKEN o1=object1+ o2=object2+ o3=object3+) {
    // Loop over each o1, o2, o3 and add them to o
  };

Basically, in the code block, I would like access to all the immediate 
children of TOKEN.  More specifically the result of the tree parser rule 
for each child.

This is being developed in v2 for the C++ target.  Although, I am not 
sure how much it matters in this case.

Any assistance is greatly appreciated.

Thank you,
Rusty Burchfield


From antlr at shmuelhome.mine.nu  Tue Feb 26 03:42:52 2008
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Tue, 26 Feb 2008 13:42:52 +0200
Subject: [antlr-interest] Help Needed with multiple alternatives
In-Reply-To: <47C2D5CE.4060803@gaengel.de>
References: <47BEABCF.2060501@gaengel.de> <47C1EAC0.70408@gaengel.de>
	<47C2D5CE.4060803@gaengel.de>
Message-ID: <47C3FB3C.7050906@shmuelhome.mine.nu>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080226/ae51ca2c/attachment-0001.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/png
Size: 14368 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080226/ae51ca2c/attachment-0002.png 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/png
Size: 21185 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080226/ae51ca2c/attachment-0003.png 

From alexander at gaengel.de  Tue Feb 26 06:29:01 2008
From: alexander at gaengel.de (=?ISO-8859-15?Q?Alexander_G=E4ngel?=)
Date: Tue, 26 Feb 2008 15:29:01 +0100
Subject: [antlr-interest] Help Needed with multiple alternatives
In-Reply-To: <47C3FB3C.7050906@shmuelhome.mine.nu>
References: <47BEABCF.2060501@gaengel.de> <47C1EAC0.70408@gaengel.de>
	<47C2D5CE.4060803@gaengel.de> <47C3FB3C.7050906@shmuelhome.mine.nu>
Message-ID: <47C4222D.105@gaengel.de>

So it's not an "error" in my Grammar.
If this is so I'm glad, I spend hours to find a Way around this Message.

I was starting to think I just don't understand what Antlr is doing.

So I just discard dis Message.

Alexander

shmuel siegel schrieb:
> I am not 100% sure that I am reading the red diagram correctly but 
> this is my take on the problem. The green diagram says that an ARROW 
> can follow an exp_direct as part of the dotorarrow rule. The red 
> diagram says that the exit condition of dotorarrow (that is, a set of 
> null transitions) can also lead to ARROW. This is caused by 
> letexpression ending in exp which can ultimately be a dotorarrow. I 
> don't know how to avoid the warning but I think both alternatives are 
> equivalent. Alternative 1, the green arrow, is computationally more 
> efficient and is probably what you want.
>
> The bottom line is that there is an annoying irrelevant warning 
> message that is hard to circumvent.
> I would also appreciate any feedback on methods to avoid this kind of 
> ambiguity.
>
> Shmuel
>
> Alexander G?ngel wrote:
>> I still have this Problem but I think I search in the wrong spot.
>>
>> can somebody explain me which rule makes the Problem?
>>
>> Thanks
>> Alexander
>>
>> Alexander G?ngel schrieb:
>>> I found the problem but still have no working solution.
>>>
>>> I tried to get around it by using scoping and Semantic Predicates.
>>>
>>> so I set a scope with a boolean man variable and wanted to make a 
>>> decision like {$exp::name}=> ... | so that the rule chooses the 
>>> first alternative when $exp::name is set true and the other solution 
>>> if it is false.
>>>
>>> Is this possible, cause right now it's not working, but there may be 
>>> some other error still in the rule.
>>>
>>> Alexander
>>>
>>> Alexander G?ngel schrieb:
>>>> I just can't get my grammar to work without having a multiple 
>>>> alternatives problem.
>>>>
>>>> I have some nested expression rules to get the precedence of the 
>>>> different operations.
>>>>
>>>> The problem occures since I added the letexpression  rule to 
>>>> exp_direct
>>>>
>>>> I hope someone can give me a hint how to solve this.
>>>>
>>>> Thanks Alexander
>>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080226/d48f21bc/attachment.html 

From jimi at temporal-wave.com  Tue Feb 26 07:00:37 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 26 Feb 2008 07:00:37 -0800
Subject: [antlr-interest] Help Needed with multiple alternatives
In-Reply-To: <47C4222D.105@gaengel.de>
Message-ID: <"L1848B92E7D8E4fa086DB404D4D9BD681.1204038103.scalix.temporal-wave.com*"@MHS>

Woah there! You are being misguided a bit here I think. Such warnings
are real in that there are two ways that ANTLR could decide your grammar
is structured and it is telling you that it is going to assume the alt
other than the one it tells you is disabled. However, it is usually
telling you this for a good reason. The reason is either that there is
something actually wrong with your grammar, or that there is something
wrong with the structure of your grammar. You should certainly not
ignore such messages as they are far from irrelevant.

 

Here, I think you need to look at the precedence of your operators with
respect to let. Then you probably would still end up with a warning
because at a glance it seems there is a real ambiguity in the language.
You can probably get rid of the warnings (once you rework this  a
little) with small precedents if there is a real ambiguity in your
language. I tend to do this just so I get a clean analysis and don?t
miss any new warning that comes up. If you are the author of your
language then consider that you might change it so that there are no
ambiguities. For instance, is let really a part of the expression tree?

 

There is a (known) need to be able to turn off a particular warning for
a particular decision in ANTLR, but of course you should only do this
when you absolutely understand what it means and realize why you can
turn it off. Don?t train yourself to ignore such warnings, learn how to
turn them off as this will increase your knowledge of what is going on.

 

In your grammar, the operators it is complaining of can associate with
the expr that ends the let expr, which is probably what you are
expecting, or the expr that contains the let as an expr. Your grammar
allows let to be the expr that is part of a let, so you can have let x
in let y in let b in g ->yyyy  etc . SO, which let clause did you mean
it to belong to? That is what ANTLR is telling you.

 

Jim

 

From: Alexander G?ngel [mailto:alexander at gaengel.de] 
Sent: Tuesday, February 26, 2008 6:29 AM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Help Needed with multiple alternatives

 

So it's not an "error" in my Grammar.
If this is so I'm glad, I spend hours to find a Way around this Message.

I was starting to think I just don't understand what Antlr is doing.

So I just discard dis Message.

Alexander

shmuel siegel schrieb: 

I am not 100% sure that I am reading the red diagram correctly but this
is my take on the problem. The green diagram says that an ARROW can
follow an exp_direct as part of the dotorarrow rule. The red diagram
says that the exit condition of dotorarrow (that is, a set of null
transitions) can also lead to ARROW. This is caused by letexpression
ending in exp which can ultimately be a dotorarrow. I don't know how to
avoid the warning but I think both alternatives are equivalent.
Alternative 1, the green arrow, is computationally more efficient and is
probably what you want.

The bottom line is that there is an annoying irrelevant warning message
that is hard to circumvent.
I would also appreciate any feedback on methods to avoid this kind of
ambiguity.

Shmuel

Alexander G?ngel wrote: 

I still have this Problem but I think I search in the wrong spot.

can somebody explain me which rule makes the Problem?

Thanks
Alexander

Alexander G?ngel schrieb: 

I found the problem but still have no working solution. 

I tried to get around it by using scoping and Semantic Predicates. 

so I set a scope with a boolean man variable and wanted to make a
decision like {$exp::name}=> ... | so that the rule chooses the first
alternative when $exp::name is set true and the other solution if it is
false. 

Is this possible, cause right now it's not working, but there may be
some other error still in the rule. 

Alexander 

Alexander G?ngel schrieb: 



I just can't get my grammar to work without having a multiple
alternatives problem. 

I have some nested expression rules to get the precedence of the
different operations. 

The problem occures since I added the letexpression  rule to exp_direct 

I hope someone can give me a hint how to solve this. 

Thanks Alexander 

 

 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080226/2ba116df/attachment.html 

From brian at gameequation.com  Tue Feb 26 08:06:07 2008
From: brian at gameequation.com (Brian Meidell Andersen)
Date: Tue, 26 Feb 2008 17:06:07 +0100
Subject: [antlr-interest] static antlr c++ BitSets
Message-ID: <47C438EF.7010203@gameequation.com>

Hi,

I am using antlr 2.7.3.
The parser I am generating is creating some static class members 
(tokenSet stuff) that are BitSets. BitSets in turn use std::vector.
This causes heap allocations to occur during the pre-main() static 
allocation step, and I'd very much like this to not happen.

Is this something that can be configured away somehow? Is it something 
that has been changed so it doesn't happen in later antlr versions?

Here's an example line from my generated parser that causes the problem:
const ANTLR_USE_NAMESPACE(antlr)BitSet 
ShaderParser::_tokenSet_0(_tokenSet_0_data_,4);

-- 

Brian Meidell Andersen
The Game Equation
http://www.thegameequation.com


From alexander at gaengel.de  Tue Feb 26 08:18:28 2008
From: alexander at gaengel.de (=?UTF-8?B?QWxleGFuZGVyIEfDpG5nZWw=?=)
Date: Tue, 26 Feb 2008 17:18:28 +0100
Subject: [antlr-interest] Help Needed with multiple alternatives
In-Reply-To: <"L1848B92E7D8E4fa086DB404D4D9BD681.1204038103.scalix.temporal-wave.com*"@MHS>
References: <"L1848B92E7D8E4fa086DB404D4D9BD681.1204038103.scalix.temporal-wave.com*"@MHS>
Message-ID: <47C43BD4.9010307@gaengel.de>

Thank you Jim,
I did not Ignore the message, but I wasn't able to see where the real 
Problem was.

I have to check the Grammar again tomorrow but I think I know understand 
what Antlr tried to tell me.

Alexander



Jim Idle schrieb:
>
> Woah there! You are being misguided a bit here I think. Such warnings 
> are real in that there are two ways that ANTLR could decide your 
> grammar is structured and it is telling you that it is going to assume 
> the alt other than the one it tells you is disabled. However, it is 
> usually telling you this for a good reason. The reason is either that 
> there is something actually wrong with your grammar, or that there is 
> something wrong with the structure of your grammar. You should 
> certainly not ignore such messages as they are far from irrelevant.
>
>  
>
> Here, I think you need to look at the precedence of your operators 
> with respect to let. Then you probably would still end up with a 
> warning because at a glance it seems there is a real ambiguity in the 
> language. You can probably get rid of the warnings (once you rework 
> this  a little) with small precedents if there is a real ambiguity in 
> your language. I tend to do this just so I get a clean analysis and 
> don?t miss any new warning that comes up. If you are the author of 
> your language then consider that you might change it so that there are 
> no ambiguities. For instance, is let really a part of the expression 
> tree?
>
>  
>
> There is a (known) need to be able to turn off a particular warning 
> for a particular decision in ANTLR, but of course you should only do 
> this when you absolutely understand what it means and realize why you 
> can turn it off. Don?t train yourself to ignore such warnings, learn 
> how to turn them off as this will increase your knowledge of what is 
> going on.
>
>  
>
> In your grammar, the operators it is complaining of can associate with 
> the expr that ends the let expr, which is probably what you are 
> expecting, or the expr that contains the let as an expr. Your grammar 
> allows let to be the expr that is part of a let, so you can have let x 
> in let y in let b in g ->yyyy  etc . SO, which let clause did you mean 
> it to belong to? That is what ANTLR is telling you.
>
>  
>
> Jim
>
>  
>
> *From:* Alexander G?ngel [mailto:alexander at gaengel.de]
> *Sent:* Tuesday, February 26, 2008 6:29 AM
> *To:* antlr-interest at antlr.org
> *Subject:* Re: [antlr-interest] Help Needed with multiple alternatives
>
>  
>
> So it's not an "error" in my Grammar.
> If this is so I'm glad, I spend hours to find a Way around this Message.
>
> I was starting to think I just don't understand what Antlr is doing.
>
> So I just discard dis Message.
>
> Alexander
>
> shmuel siegel schrieb:
>
> I am not 100% sure that I am reading the red diagram correctly but 
> this is my take on the problem. The green diagram says that an ARROW 
> can follow an exp_direct as part of the dotorarrow rule. The red 
> diagram says that the exit condition of dotorarrow (that is, a set of 
> null transitions) can also lead to ARROW. This is caused by 
> letexpression ending in exp which can ultimately be a dotorarrow. I 
> don't know how to avoid the warning but I think both alternatives are 
> equivalent. Alternative 1, the green arrow, is computationally more 
> efficient and is probably what you want.
>
> The bottom line is that there is an annoying irrelevant warning 
> message that is hard to circumvent.
> I would also appreciate any feedback on methods to avoid this kind of 
> ambiguity.
>
> Shmuel
>
> Alexander G?ngel wrote:
>
> I still have this Problem but I think I search in the wrong spot.
>
> can somebody explain me which rule makes the Problem?
>
> Thanks
> Alexander
>
> Alexander G?ngel schrieb:
>
> I found the problem but still have no working solution.
>
> I tried to get around it by using scoping and Semantic Predicates.
>
> so I set a scope with a boolean man variable and wanted to make a 
> decision like {$exp::name}=> ... | so that the rule chooses the first 
> alternative when $exp::name is set true and the other solution if it 
> is false.
>
> Is this possible, cause right now it's not working, but there may be 
> some other error still in the rule.
>
> Alexander
>
> Alexander G?ngel schrieb:
>
> I just can't get my grammar to work without having a multiple 
> alternatives problem.
>
> I have some nested expression rules to get the precedence of the 
> different operations.
>
> The problem occures since I added the letexpression  rule to exp_direct
>
> I hope someone can give me a hint how to solve this.
>
> Thanks Alexander
>
>  
>
>  
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080226/485a5a6b/attachment-0001.html 

From alexander at gaengel.de  Tue Feb 26 08:58:30 2008
From: alexander at gaengel.de (=?ISO-8859-15?Q?Alexander_G=E4ngel?=)
Date: Tue, 26 Feb 2008 17:58:30 +0100
Subject: [antlr-interest] Problem with Syntactic Predicate
Message-ID: <47C44536.1040004@gaengel.de>

I just don't get this Syntactic Predicate to work

the Problem is variableDeclaration I just don't see what I'm doing wrong 
to get Input like:

test; test:Type;test to work.

Alexander

grammar test;

options  {
    output=AST;
    ASTLabelType=CommonTree;
    }
 
tokens {
    PATH;
    Var;
    Type;
    TupleType;
    }

start    :    variableDeclarationPart EOF;

variableDeclaration   
    :(variableDeclarationPart SEMICOLON )=> variableDeclarationPart 
SEMICOLON variableDeclaration
    |variableDeclarationPart
    ;
   
variableDeclarationPart
    :Identifier (COLON typeCS)?;
   
typeCS    :
    (Identifier DOUBLE_COLON )=> Identifier DOUBLE_COLON typeCS ->^(Type 
^(PATH Identifier typeCS))
    |Identifier -> ^(Type ^(PATH Identifier))
    |tupleTypes -> ^(Type  tupleTypes)
    ;
   
tupleTypes
    :
    'TupleType' '(' variableDeclaration ')' -> ^(TupleType 
variableDeclaration)
    ;
   
DOUBLE_COLON
    :'::';
COMMA    :',';
SEMICOLON    :';';
COLON    :':';
Identifier    :   ('a'..'z'|'A'..'Z'|'_') (Letter)*;
fragment
Letter    :'a'..'z'|'A'..'Z'|'0'..'9'|'_'|'$';
WS    :  (' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;};



From cieslewski at hcs.ufl.edu  Tue Feb 26 09:17:22 2008
From: cieslewski at hcs.ufl.edu (Grzegorz Cieslewski)
Date: Tue, 26 Feb 2008 12:17:22 -0500
Subject: [antlr-interest] AST rewrite problem
Message-ID: <7aa837f80802260917n408023bvb558d2b4ca6691a9@mail.gmail.com>

Hello,

I have been playing with the AST rewriting using the tree grammars.
I have encountered a problem where ANTLR change to AST without being
asked to do so.

My Grammar looks like this:

grammar T;
options {output=AST;}
tokens
{
	EXPR;
}
a	:	type b? INT -> ^(EXPR type b? INT)		
	;
	
b	:	ID
	;	
	
type	:	'int'
	|	'char';
	
ID : 'a'..'z'+ ;
INT : '0'..'9'+;
WS : (' '|'\n') {$channel=HIDDEN;} ;

And Tree Grammar:
tree grammar TP;
options {
	output=AST;
	ASTLabelType=CommonTree;
	tokenVocab=T;
	}
	
	
a	: ^(EXPR type? ID INT)
	;

type	:	'int'
	|	'char'
	;

For the input "int abc 123" parser generates the AST:
(EXPR int abc 123)
but after a pass with the tree parser the AST looks like this:
int (EXPR abc 123)

Does any one know the reason for this behaviour?  It seems like a bug to me.

Greg
-- 
=====================================================
Grzegorz Cieslewski
Research Assistant
High-performance Computing & Simulation (HCS) Research Laboratory
University of Florida, Dept. of Electrical and Computer Engineering
330 Benton Hall, Gainesville, FL, 32611-6200
Phone: (352) 392-9041
Email: cieslewski at hcs.ufl.edu
Web: www.hcs.ufl.edu
=====================================================

From edsweet at swbell.net  Tue Feb 26 09:21:10 2008
From: edsweet at swbell.net (David Sweet)
Date: Tue, 26 Feb 2008 11:21:10 -0600
Subject: [antlr-interest] Problem with Syntactic Predicate
In-Reply-To: <47C44536.1040004@gaengel.de>
References: <47C44536.1040004@gaengel.de>
Message-ID: <47C44A86.9020808@swbell.net>

Hello Alexander,

Should your start line read as follows:

start    :    variableDeclaration EOF;

I found that running your grammar ran emitted some "MismatchedToken" 
errors (SEMICOLONS were not expected I guess), but changing 
variableDeclarationPart to variableDeclaration parsed the input test; 
test:Type  and created the AST I sort of expected.

Regards,

David Sweet

Alexander G?ngel wrote:
> I just don't get this Syntactic Predicate to work
>
> the Problem is variableDeclaration I just don't see what I'm doing 
> wrong to get Input like:
>
> test; test:Type;test to work.
>
> Alexander
>
> grammar test;
>
> options  {
>    output=AST;
>    ASTLabelType=CommonTree;
>    }
>
> tokens {
>    PATH;
>    Var;
>    Type;
>    TupleType;
>    }
>
> start    :    variableDeclarationPart EOF;
>
> variableDeclaration      :(variableDeclarationPart SEMICOLON )=> 
> variableDeclarationPart SEMICOLON variableDeclaration
>    |variableDeclarationPart
>    ;
>   variableDeclarationPart
>    :Identifier (COLON typeCS)?;
>   typeCS    :
>    (Identifier DOUBLE_COLON )=> Identifier DOUBLE_COLON typeCS 
> ->^(Type ^(PATH Identifier typeCS))
>    |Identifier -> ^(Type ^(PATH Identifier))
>    |tupleTypes -> ^(Type  tupleTypes)
>    ;
>   tupleTypes
>    :
>    'TupleType' '(' variableDeclaration ')' -> ^(TupleType 
> variableDeclaration)
>    ;
>   DOUBLE_COLON
>    :'::';
> COMMA    :',';
> SEMICOLON    :';';
> COLON    :':';
> Identifier    :   ('a'..'z'|'A'..'Z'|'_') (Letter)*;
> fragment
> Letter    :'a'..'z'|'A'..'Z'|'0'..'9'|'_'|'$';
> WS    :  (' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;};
>
>
>

From antlr at shmuelhome.mine.nu  Tue Feb 26 09:55:15 2008
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Tue, 26 Feb 2008 19:55:15 +0200
Subject: [antlr-interest] Help Needed with multiple alternatives
In-Reply-To: <"L1848B92E7D8E4fa086DB404D4D9BD681.1204038103.scalix.temporal-wave.com*"@MHS>
References: <"L1848B92E7D8E4fa086DB404D4D9BD681.1204038103.scalix.temporal-wave.com*"@MHS>
Message-ID: <47C45283.4020200@shmuelhome.mine.nu>

Jim Idle wrote:
> ...
>
>  
>
> In your grammar, the operators it is complaining of can associate with 
> the expr that ends the let expr, which is probably what you are 
> expecting, or the expr that contains the let as an expr. Your grammar 
> allows let to be the expr that is part of a let, so you can have let x 
> in let y in let b in g ->yyyy  etc . SO, which let clause did you mean 
> it to belong to? That is what ANTLR is telling you.
>
>  
>
> Jim
>
>  
>
Jim,
I congratulate you on being able to construct a concrete case that 
exhibits the ambiguity. I couldn't do it. Could ANTLR be modified to 
output such concrete examples?


From darien.hager at etelos-inc.com  Tue Feb 26 10:31:03 2008
From: darien.hager at etelos-inc.com (Darien Hager)
Date: Tue, 26 Feb 2008 10:31:03 -0800
Subject: [antlr-interest] static antlr c++ BitSets
In-Reply-To: <47C438EF.7010203@gameequation.com>
References: <47C438EF.7010203@gameequation.com>
Message-ID: <c8c997f40802261031o4e6f7091x8f7e896c6f746685@mail.gmail.com>

Well, there is probably some better way that I don't know about, but...

You could open up the .jar files and change the template file (.stg) so that
it instantiates some customized subclass of BitSet in generated code.

-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are not
the intended recipient, then this is notice that any use, disclosure,
dissemination, distribution or copying is strictly prohibited. If you have
received this message in error please contact the sender by reply mail and
destroy all copies of the original message.


This e-mail message, including attachments, may contain confidential information for the sole use of the intended recipient(s). If you are not the intended recipient, then this is notice that any use, disclosure, dissemination, distribution or copying is strictly prohibited.  If you have received this message in error please contact the sender by reply mail and destroy all copies of the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080226/4fb2bfe9/attachment.html 

From jimi at temporal-wave.com  Tue Feb 26 10:03:14 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 26 Feb 2008 10:03:14 -0800
Subject: [antlr-interest] static antlr c++ BitSets
In-Reply-To: <47C438EF.7010203@gameequation.com>
Message-ID: <"L1AC897A189D54a8fADCA008403E18161.1204049063.scalix.temporal-wave.com*"@MHS>

Brian,

This isn't likely to change in ANTLR 2.x I am afraid as efforts are on 
ANTLR 3 now. Ric, the author of that runtime may have something to say 
about this though as I think he still reads the list.

As of 3.1 the C runtime supports C++ integration, I dont know if this 
is of help to you, as you may be inextricably bound to 2.7.x of course, 
but the bitsets there are static C and perform no runtime allocations.

Jim


> -----Original Message-----
> From: Brian Meidell Andersen [mailto:brian at gameequation.com]
> Sent: Tuesday, February 26, 2008 8:06 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] static antlr c++ BitSets
> 
> Hi,
> 
> I am using antlr 2.7.3.
> The parser I am generating is creating some static class members
> (tokenSet stuff) that are BitSets. BitSets in turn use std::vector.
> This causes heap allocations to occur during the pre-main() static
> allocation step, and I'd very much like this to not happen.
> 
> Is this something that can be configured away somehow? Is it something
> that has been changed so it doesn't happen in later antlr versions?
> 
> Here's an example line from my generated parser that causes the
> problem:
> const ANTLR_USE_NAMESPACE(antlr)BitSet
> ShaderParser::_tokenSet_0(_tokenSet_0_data_,4);
> 
> --
> 
> Brian Meidell Andersen
> The Game Equation
> http://www.thegameequation.com
> 



From jimi at temporal-wave.com  Tue Feb 26 10:11:55 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 26 Feb 2008 10:11:55 -0800
Subject: [antlr-interest] Help Needed with multiple alternatives
In-Reply-To: <47C45283.4020200@shmuelhome.mine.nu>
Message-ID: <"L7A0F2CEE6FDA40d3BC8602957DA33D2F.1204049584.scalix.temporal-wave.com*"@MHS>

Well, as you can see, it is this sort of thing that to be honest you 
only pick up on through experience really. Hopefully, discussion on the 
list helps everyone. 

Hence, I see your point about relating the diagrams to concrete cases, 
but I think that it might already be doing this as well as it might 
because it is telling you about the terminals that kick in at the start 
of expr. To reliably refer to the ambiguity in terms of the following 
rule may be difficult and may well not help you. I admit that I 
personally have not thought about that too much, maybe Ter has. The 
diagram, to me at least, seems to clearly explain which rules the 
terminals are being reached via, but I understand that some time is 
required to start picking up on that. I bet that the OP will know how to 
read it in future though! :-)

It's like the scene in the Matrix where the guy says "I dont even see 
the code anymore, just blond, brunette...". After a while you see past 
the error to the root of the problem without thinking on it too much.

Jim


> -----Original Message-----
> From: shmuel siegel [mailto:antlr at shmuelhome.mine.nu]
> Sent: Tuesday, February 26, 2008 9:55 AM
> To: Jim Idle
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Help Needed with multiple alternatives
> 
> Jim Idle wrote:
> > ...
> >
> >
> >
> > In your grammar, the operators it is complaining of can associate
> with
> > the expr that ends the let expr, which is probably what you are
> > expecting, or the expr that contains the let as an expr. Your 
grammar
> > allows let to be the expr that is part of a let, so you can have let
> x
> > in let y in let b in g ->yyyy  etc . SO, which let clause did you
> mean
> > it to belong to? That is what ANTLR is telling you.
> >
> >
> >
> > Jim
> >
> >
> >
> Jim,
> I congratulate you on being able to construct a concrete case that
> exhibits the ambiguity. I couldn't do it. Could ANTLR be modified to
> output such concrete examples?
> 



From alexander at gaengel.de  Tue Feb 26 10:41:29 2008
From: alexander at gaengel.de (=?ISO-8859-15?Q?Alexander_G=E4ngel?=)
Date: Tue, 26 Feb 2008 19:41:29 +0100
Subject: [antlr-interest] Problem with Syntactic Predicate
In-Reply-To: <47C44A86.9020808@swbell.net>
References: <47C44536.1040004@gaengel.de> <47C44A86.9020808@swbell.net>
Message-ID: <47C45D59.8070409@gaengel.de>

Thank you David, I just did not notice I had the wrong Rule there.

Alexander

David Sweet schrieb:
> Hello Alexander,
>
> Should your start line read as follows:
>
> start    :    variableDeclaration EOF;
>
> I found that running your grammar ran emitted some "MismatchedToken" 
> errors (SEMICOLONS were not expected I guess), but changing 
> variableDeclarationPart to variableDeclaration parsed the input test; 
> test:Type  and created the AST I sort of expected.
>
> Regards,
>
> David Sweet
>
> Alexander G?ngel wrote:
>> I just don't get this Syntactic Predicate to work
>>
>> the Problem is variableDeclaration I just don't see what I'm doing 
>> wrong to get Input like:
>>
>> test; test:Type;test to work.
>>
>> Alexander
>>
>> grammar test;
>>
>> options  {
>>    output=AST;
>>    ASTLabelType=CommonTree;
>>    }
>>
>> tokens {
>>    PATH;
>>    Var;
>>    Type;
>>    TupleType;
>>    }
>>
>> start    :    variableDeclarationPart EOF;
>>
>> variableDeclaration      :(variableDeclarationPart SEMICOLON )=> 
>> variableDeclarationPart SEMICOLON variableDeclaration
>>    |variableDeclarationPart
>>    ;
>>   variableDeclarationPart
>>    :Identifier (COLON typeCS)?;
>>   typeCS    :
>>    (Identifier DOUBLE_COLON )=> Identifier DOUBLE_COLON typeCS 
>> ->^(Type ^(PATH Identifier typeCS))
>>    |Identifier -> ^(Type ^(PATH Identifier))
>>    |tupleTypes -> ^(Type  tupleTypes)
>>    ;
>>   tupleTypes
>>    :
>>    'TupleType' '(' variableDeclaration ')' -> ^(TupleType 
>> variableDeclaration)
>>    ;
>>   DOUBLE_COLON
>>    :'::';
>> COMMA    :',';
>> SEMICOLON    :';';
>> COLON    :':';
>> Identifier    :   ('a'..'z'|'A'..'Z'|'_') (Letter)*;
>> fragment
>> Letter    :'a'..'z'|'A'..'Z'|'0'..'9'|'_'|'$';
>> WS    :  (' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;};
>>
>>
>>
>

From jimi at temporal-wave.com  Tue Feb 26 10:12:44 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 26 Feb 2008 10:12:44 -0800
Subject: [antlr-interest] static antlr c++ BitSets
In-Reply-To: <c8c997f40802261031o4e6f7091x8f7e896c6f746685@mail.gmail.com>
Message-ID: <"L5D57E7C81F574733B469485BACD68DAC.1204049626.scalix.temporal-wave.com*"@MHS>

The original post is, however, about ANTLR 2.7 ;-)

 

Jim

 

 

 

From: Darien Hager [mailto:darien.hager at etelos-inc.com] 
Sent: Tuesday, February 26, 2008 10:31 AM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] static antlr c++ BitSets

 

Well, there is probably some better way that I don't know about, but...

You could open up the .jar files and change the template file (.stg) so
that it instantiates some customized subclass of BitSet in generated
code.

-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com 

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are
not the intended recipient, then this is notice that any use,
disclosure, dissemination, distribution or copying is strictly
prohibited. If you have received this message in error please contact
the sender by reply mail and destroy all copies of the original message.


 
This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are
not the intended recipient, then this is notice that any use,
disclosure, dissemination, distribution or copying is strictly
prohibited.  If you have received this message in error please contact
the sender by reply mail and destroy all copies of the original message.
 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080226/09e70293/attachment-0001.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Jim Idle.vcf
Type: text/x-vcard
Size: 1863 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080226/09e70293/attachment-0001.vcf 

From brian at gameequation.com  Tue Feb 26 11:32:51 2008
From: brian at gameequation.com (Brian Meidell Andersen)
Date: Tue, 26 Feb 2008 20:32:51 +0100
Subject: [antlr-interest] static antlr c++ BitSets
In-Reply-To: <"L5D57E7C81F574733B469485BACD68DAC.1204049626.scalix.temporal-wave.com*"@MHS>
References: <"L5D57E7C81F574733B469485BACD68DAC.1204049626.scalix.temporal-wave.com*"@MHS>
Message-ID: <4C58D973-91EB-465A-B5DB-FEF670FDA3C2@gameequation.com>


On Tue, Feb 26 08, at 19:03 , Jim Idle wrote:

> As of 3.1 the C runtime supports C++ integration, I dont know if this
> is of help to you, as you may be inextricably bound to 2.7.x of  
> course,
> but the bitsets there are static C and perform no runtime allocations.

So changing to 3.1 would likely solve my problem?
I am not sure how "c++ integration" does this, so I'm mostly referring  
to "perform no runtime allocations".

Regards, Brian

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080226/90778bd4/attachment.html 

From brian at gameequation.com  Tue Feb 26 11:38:53 2008
From: brian at gameequation.com (Brian Meidell Andersen)
Date: Tue, 26 Feb 2008 20:38:53 +0100
Subject: [antlr-interest] static antlr c++ BitSets
In-Reply-To: <"L5D57E7C81F574733B469485BACD68DAC.1204049626.scalix.temporal-wave.com*"@MHS>
References: <"L5D57E7C81F574733B469485BACD68DAC.1204049626.scalix.temporal-wave.com*"@MHS>
Message-ID: <191ED41D-9B70-4179-9BC9-8CF74C5E4078@gameequation.com>


Meaning that Darien's advice was only relevant for 3.x?

> The original post is, however, about ANTLR 2.7 ;-)
> You could open up the .jar files and change the template file (.stg)  
> so that it instantiates some customized subclass of BitSet in  
> generated code.
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080226/fa0000ec/attachment.html 

From darien.hager at etelos-inc.com  Tue Feb 26 12:00:02 2008
From: darien.hager at etelos-inc.com (Darien Hager)
Date: Tue, 26 Feb 2008 12:00:02 -0800
Subject: [antlr-interest] Help Needed with multiple alternatives
In-Reply-To: <L7A0F2CEE6FDA40d3BC8602957DA33D2F.1204049584.scalix.temporal-wave.com*@MHS>
References: <47C45283.4020200@shmuelhome.mine.nu>
	<L7A0F2CEE6FDA40d3BC8602957DA33D2F.1204049584.scalix.temporal-wave.com*@MHS>
Message-ID: <c8c997f40802261200q1143871ei28934d7608fac312@mail.gmail.com>

Is there a basic "How to read ANTLRworks multiple-alternative diagrams"
thing on the wiki somewhere?


-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are not
the intended recipient, then this is notice that any use, disclosure,
dissemination, distribution or copying is strictly prohibited. If you have
received this message in error please contact the sender by reply mail and
destroy all copies of the original message.


This e-mail message, including attachments, may contain confidential information for the sole use of the intended recipient(s). If you are not the intended recipient, then this is notice that any use, disclosure, dissemination, distribution or copying is strictly prohibited.  If you have received this message in error please contact the sender by reply mail and destroy all copies of the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080226/4b4da323/attachment.html 

From antlr at mirality.co.nz  Tue Feb 26 12:09:06 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 27 Feb 2008 09:09:06 +1300
Subject: [antlr-interest] Help Needed with multiple alternatives
In-Reply-To: <c8c997f40802261200q1143871ei28934d7608fac312@mail.gmail.co
 m>
References: <47C45283.4020200@shmuelhome.mine.nu>
	<L7A0F2CEE6FDA40d3BC8602957DA33D2F.1204049584.scalix.temporal-wave.com*@MHS>
	<c8c997f40802261200q1143871ei28934d7608fac312@mail.gmail.com>
Message-ID: <20080226200941.B9F2D11EDC9@www.antlr.org>

At 09:00 27/02/2008, Darien Hager wrote:

>Is there a basic "How to read ANTLRworks multiple-alternative 
>diagrams" thing on the wiki somewhere?

That'd be nice.  I must admit I found the red arrows in particular 
*very* hard to follow.


From jimi at temporal-wave.com  Tue Feb 26 12:05:19 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 26 Feb 2008 12:05:19 -0800
Subject: [antlr-interest] static antlr c++ BitSets
In-Reply-To: <4C58D973-91EB-465A-B5DB-FEF670FDA3C2@gameequation.com>
Message-ID: <"L6E1ABE1A0C164f11B127051B5B2BBA9A.1204056392.scalix.temporal-wave.com*"@MHS>

If you don?t mind working with the beta for a week or so, then switching
to 3.1 C runtime allows you to use C++ directly in your grammar/actions.
The generated C can be compiled as C++ and so any embedded code can be
C++, not just C. If you are doing something new then you should really
put your efforts in to this version (I think). As much as is possible,
everything is pre-computed and allocated at compile time. Obviously
memory is allocated for tokens and so on, but this is done with
factories so it does chunks of them and does not thrash memory.

 

The 3.1 C runtime compares well with the Java version memory wise. The
java parser example (see the example downloads on the downloads page),
runs (on my system) through the JDK 1.6 source in about half the time
that the Java version does, and it is mostly waiting for IO that holds
it back. To perform the task, the Java version uses a working set
(Windows Vista 64) of 380,000K, whereas the C version hits a peaks of
11,700K. Of course working with C is commensurably a little more
involved. 

 

The C parser example in the 3.1 example downloads shows using C++
classes in the generated code, which is of course just a matter of
declaring them and newing them. The runtime itself is pure C, which
makes integration as a library, very simple.

 

Jim

 

 

From: Brian Meidell Andersen [mailto:brian at gameequation.com] 
Sent: Tuesday, February 26, 2008 11:33 AM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] static antlr c++ BitSets

 

 

On Tue, Feb 26 08, at 19:03 , Jim Idle wrote:





As of 3.1 the C runtime supports C++ integration, I dont know if this 
is of help to you, as you may be inextricably bound to 2.7.x of course, 
but the bitsets there are static C and perform no runtime allocations.

 

So changing to 3.1 would likely solve my problem? 

I am not sure how "c++ integration" does this, so I'm mostly referring
to "perform no runtime allocations".

 

Regards, Brian

 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080226/7ea2905d/attachment.html 

From jimi at temporal-wave.com  Tue Feb 26 12:06:08 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 26 Feb 2008 12:06:08 -0800
Subject: [antlr-interest] static antlr c++ BitSets
In-Reply-To: <191ED41D-9B70-4179-9BC9-8CF74C5E4078@gameequation.com>
Message-ID: <"L31B9A8621CE44fc3ADA422565142C761.1204056441.scalix.temporal-wave.com*"@MHS>

Yes, and of course it isn?t relevant because that isn?t ho the 3.1
runtime works anyway, and is C not C++ J

 

Jim

 

 

 

From: Brian Meidell Andersen [mailto:brian at gameequation.com] 
Sent: Tuesday, February 26, 2008 11:39 AM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] static antlr c++ BitSets

 

 

Meaning that Darien's advice was only relevant for 3.x?





The original post is, however, about ANTLR 2.7 ;-)

You could open up the .jar files and change the template file (.stg) so
that it instantiates some customized subclass of BitSet in generated
code.

 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080226/bd0e250e/attachment.html 

From GICodeWarrior+antlr at gmail.com  Tue Feb 26 13:27:56 2008
From: GICodeWarrior+antlr at gmail.com (Rusty Burchfield)
Date: Tue, 26 Feb 2008 16:27:56 -0500
Subject: [antlr-interest] multiplicity in TreeParser
In-Reply-To: <47C3C01E.1020304@gmail.com>
References: <47C3C01E.1020304@gmail.com>
Message-ID: <47C4845C.8040607@gmail.com>

Rusty Burchfield wrote:
> If I have a parser rule like the following:
> example: TOKEN^ (object1 | object2 | object3)+;
>
> Is there a way to access a list of the objects in the tree parser.  
> For example:
> example returns [ComplexObject o]
>  : #(TOKEN o1=object1+ o2=object2+ o3=object3+) {
>    // Loop over each o1, o2, o3 and add them to o
>  };
>
> Basically, in the code block, I would like access to all the immediate 
> children of TOKEN.  More specifically the result of the tree parser 
> rule for each child.
>
> This is being developed in v2 for the C++ target.  Although, I am not 
> sure how much it matters in this case.

Is something like the above possible?  Would it be easier with the 
latest 3.1 build and the C target?

If there is any further information I can provide to facilitate a 
response, please let me know.

Thank you,
Rusty Burchfield


From shro8822 at vandals.uidaho.edu  Tue Feb 26 16:13:05 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Tue, 26 Feb 2008 16:13:05 -0800
Subject: [antlr-interest] how to quote things?
Message-ID: <BAYC1-PASMTP0322152AECC8F6CBA1A8C4F51A0@CEZ.ICE>

I have this in a tree grammer:

     document : ^(DOCUMENT concept["\"\""]+)
              ;

what I'm trying to do is, when I parse a document try to parse a string 
of concepts and pass down the string "" (that is in C notation "\"\""). 
This value then gets used further down to generate some stuff. The 
problem is that I can;t find anything to stuff into the [...]'s that 
gets passed through as something that C# things of as "\"\"".

Antlr keeps adding commas and spaces and whatnot.

example outputs
    concept(", \", \", ");
    concept(', \", \", ');

 The manual has references to using \uXXXX for uni-code but that also 
doesn't work.

    concept(\u, 0022+, \u, 0022);
    concept("\u, 0022+, \u, 0022");

Question 1:  How do I pass the needed string literal to the concept rule?
Question 2: (might be irrelevant depending on 1) Is what I'm doing the 
"correct way" to do things?
Question 3: What was antlr doing there?

From shro8822 at vandals.uidaho.edu  Tue Feb 26 16:49:23 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Tue, 26 Feb 2008 16:49:23 -0800
Subject: [antlr-interest] how to get hold of individual nodes in a tree
 parser
In-Reply-To: <BAYC1-PASMTP01E66099512DED3C8476A5F5190@CEZ.ICE>
References: <BAYC1-PASMTP01E66099512DED3C8476A5F5190@CEZ.ICE>
Message-ID: <BAYC1-PASMTP115618E1A5B5CB33C1D25DF51A0@CEZ.ICE>

Benjamin Shropshire wrote:
> I have a tree grammar  with a rule like this:
>
> name : ^(NAME name_literal+) { ; }
>
> I need to do a foreach over the name_literal nodes but I can't seem to 
> find anywhere in the manual that inserts action rules for repeated 
> nodes in a tree parser. Anyone known how to do this?
>
I'm still stumped

Looking at the generated code it looks like the parsed subtrees are 
discarded (or if I refer to name_literal all but the last one is). Is 
this the the planned behavior?

It seems that "look for a list of foo's and then let me at them" is 
common enough that there would be some special way to make it easy. 
Something like "$name_literal.List". Is this not the case?

Am I approaching this wrong? I want to do stuff with the list of 
name_literals. Working with each name_literal by it's self is useless to me.

From lefevrol at yahoo.com  Tue Feb 26 17:07:17 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Wed, 27 Feb 2008 02:07:17 +0100
Subject: [antlr-interest] multiplicity in TreeParser
In-Reply-To: <47C3C01E.1020304@gmail.com>
References: <47C3C01E.1020304@gmail.com>
Message-ID: <fq2d4c$bb$1@ger.gmane.org>

Assuming a Java target, something along these lines should work:

example returns [List list]
@init { list = new ArrayList(); }
     : ^( TOKEN (x1=OBJ1 {list.add(x1);})+ (x2=OBJ2 {list.add(x2);})+ )
     ;

In other words if you want a list I think in a tree grammar context
you have to build it yourself because the x1 etc "collections" are
not held in collections but in trees. This is different from the
expression grammar context. Or did I misunderstand the question?

-- O.L.


From lefevrol at yahoo.com  Tue Feb 26 17:11:38 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Wed, 27 Feb 2008 02:11:38 +0100
Subject: [antlr-interest] how to get hold of individual nodes in a tree
	parser
In-Reply-To: <BAYC1-PASMTP01E66099512DED3C8476A5F5190@CEZ.ICE>
References: <BAYC1-PASMTP01E66099512DED3C8476A5F5190@CEZ.ICE>
Message-ID: <fq2dch$uc$1@ger.gmane.org>

This looks like the same question as "multiplicity in TreeParser"

-- O.L.


From jimi at temporal-wave.com  Tue Feb 26 16:47:56 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 26 Feb 2008 16:47:56 -0800
Subject: [antlr-interest] how to quote things?
In-Reply-To: <BAYC1-PASMTP0322152AECC8F6CBA1A8C4F51A0@CEZ.ICE>
Message-ID: <"L4FEB90BD6D9244fcA0B4C8370B54142D.1204073352.scalix.temporal-wave.com*"@MHS>

C# requires two quotes per embedded quote and you probably need to 
escape them from ANTLR, which gives:

["\"\"\"\""]

Or something like that (in case of typos I can't see for looking),

Jim


> -----Original Message-----
> From: Benjamin Shropshire [mailto:shro8822 at vandals.uidaho.edu]
> Sent: Tuesday, February 26, 2008 4:13 PM
> To: Antlr Interest
> Subject: [antlr-interest] how to quote things?
> 
> I have this in a tree grammer:
> 
>      document : ^(DOCUMENT concept["\"\""]+)
>               ;
> 
> what I'm trying to do is, when I parse a document try to parse a 
string
> of concepts and pass down the string "" (that is in C notation 
"\"\"").
> This value then gets used further down to generate some stuff. The
> problem is that I can;t find anything to stuff into the [...]'s that
> gets passed through as something that C# things of as "\"\"".
> 
> Antlr keeps adding commas and spaces and whatnot.
> 
> example outputs
>     concept(", \", \", ");
>     concept(', \", \", ');
> 
>  The manual has references to using \uXXXX for uni-code but that also
> doesn't work.
> 
>     concept(\u, 0022+, \u, 0022);
>     concept("\u, 0022+, \u, 0022");
> 
> Question 1:  How do I pass the needed string literal to the concept
> rule?
> Question 2: (might be irrelevant depending on 1) Is what I'm doing the
> "correct way" to do things?
> Question 3: What was antlr doing there?



From jimi at temporal-wave.com  Tue Feb 26 16:49:07 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 26 Feb 2008 16:49:07 -0800
Subject: [antlr-interest] how to get hold of individual nodes in a tree
	parser
In-Reply-To: <BAYC1-PASMTP115618E1A5B5CB33C1D25DF51A0@CEZ.ICE>
Message-ID: <"L8A60A52D67454db38EF50314ED12360F.1204073424.scalix.temporal-wave.com*"@MHS>

Can't you just do:

name : ^(NAME (n=name_literal {Console.writeln($n.text);}  )+)

Jim


> -----Original Message-----
> From: Benjamin Shropshire [mailto:shro8822 at vandals.uidaho.edu]
> Sent: Tuesday, February 26, 2008 4:49 PM
> To: Antlr Interest
> Subject: Re: [antlr-interest] how to get hold of individual nodes in a
> tree parser
> 
> Benjamin Shropshire wrote:
> > I have a tree grammar  with a rule like this:
> >
> > name : ^(NAME name_literal+) { ; }
> >
> > I need to do a foreach over the name_literal nodes but I can't seem
> to
> > find anywhere in the manual that inserts action rules for repeated
> > nodes in a tree parser. Anyone known how to do this?
> >
> I'm still stumped
> 
> Looking at the generated code it looks like the parsed subtrees are
> discarded (or if I refer to name_literal all but the last one is). Is
> this the the planned behavior?
> 
> It seems that "look for a list of foo's and then let me at them" is
> common enough that there would be some special way to make it easy.
> Something like "$name_literal.List". Is this not the case?
> 
> Am I approaching this wrong? I want to do stuff with the list of
> name_literals. Working with each name_literal by it's self is useless
> to me.


-------------- next part --------------
A non-text attachment was scrubbed...
Name: Jim Idle.vcf
Type: text/x-vcard
Size: 1863 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080226/0d7c8e1a/attachment.vcf 

From lefevrol at yahoo.com  Tue Feb 26 17:15:23 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Wed, 27 Feb 2008 02:15:23 +0100
Subject: [antlr-interest] ANTLR syntax bug with array return types
Message-ID: <fq2dji$1ml$1@ger.gmane.org>

Consider this tree grammar rule with Java output:

    foo returns [List[] lists] <blah blah>

The Java code emitted by ANTLR will have:

     // $ANTLR start foo
     // Bug3.g:7:1: foo returns [List lists] : ;
     public final List foo() throws RecognitionException {
         List lists = null;
         <blah blah>
	return lists;
     }

which is just wrong: the array-ness of lists (i.e., the [])
was thrown away. Is this is a deliberate limitation, where
is it documented?

Thanks,

-- O.L.


From GICodeWarrior+antlr at gmail.com  Tue Feb 26 18:17:56 2008
From: GICodeWarrior+antlr at gmail.com (Rusty Burchfield)
Date: Tue, 26 Feb 2008 21:17:56 -0500
Subject: [antlr-interest] multiplicity in TreeParser
In-Reply-To: <fq2d4c$bb$1@ger.gmane.org>
References: <47C3C01E.1020304@gmail.com> <fq2d4c$bb$1@ger.gmane.org>
Message-ID: <47C4C854.6020500@gmail.com>

Olivier Lefevre wrote:
> Assuming a Java target, something along these lines should work:
>
> example returns [List list]
> @init { list = new ArrayList(); }
>     : ^( TOKEN (x1=OBJ1 {list.add(x1);})+ (x2=OBJ2 {list.add(x2);})+ )
>     ;
>
> In other words if you want a list I think in a tree grammar context
> you have to build it yourself because the x1 etc "collections" are
> not held in collections but in trees. This is different from the
> expression grammar context. Or did I misunderstand the question?

Looks like exactly what I need. :)

Thank you!
Rusty Burchfield


From shro8822 at vandals.uidaho.edu  Tue Feb 26 22:30:03 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Tue, 26 Feb 2008 22:30:03 -0800
Subject: [antlr-interest] how to get hold of individual nodes in a tree
 parser
In-Reply-To: <"L8A60A52D67454db38EF50314ED12360F.1204073424.scalix.temporal-wave.com*"@MHS>
References: <"L8A60A52D67454db38EF50314ED12360F.1204073424.scalix.temporal-wave.com*"@MHS>
Message-ID: <BAYC1-PASMTP0166F3A75D19CFC5049CC0F51A0@CEZ.ICE>

Jim Idle wrote:
> Can't you just do:
>
> name : ^(NAME (n=name_literal {Console.writeln($n.text);}  )+)
>
> Jim
>
>   
Um. I guess I can. I didn't known you could stuff action inside the tree.

However in general that wouldn't be enough because I might want to use 
break, continue, arbitrary index manipulation, take a second pass 
through, put the loop in another loop or any number of odd things. being 
able to do "foreach(Blob b in name_literal.Iterator)..." would be of 
huge value.

I guess I can make that work. It does however lead to another question, 
how do I put in code that will run only if the tree matches [it wont run 
on say (NAME  name_literal   not_name_literal) ] but will run befor  the 
code attached to the name_literal? This is because I need that code to 
have side effects as part of setting stuff up for the other parts. It 
would be a bit more effort on my part but I might be able to dump the 
"only on real match" part. Either way the code would need to declare 
variable that are in scope later. (I could swear I've seen that last 
part but for the life of me I can't find where.)

Thanks
    Benjamin Shropshire

P.S. Where in the manual is your answerer covered? I'm thinking the same 
section ought to answer some of my other questions.

>> I'm still stumped
>>
>> Looking at the generated code it looks like the parsed subtrees are
>> discarded (or if I refer to name_literal all but the last one is). Is
>> this the the planned behavior?
>>
>> It seems that "look for a list of foo's and then let me at them" is
>> common enough that there would be some special way to make it easy.
>> Something like "$name_literal.List". Is this not the case?
>>
>> Am I approaching this wrong? I want to do stuff with the list of
>> name_literals. Working with each name_literal by it's self is useless
>> to me.
>>     

From shro8822 at vandals.uidaho.edu  Tue Feb 26 22:30:05 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Tue, 26 Feb 2008 22:30:05 -0800
Subject: [antlr-interest] how to quote things?
In-Reply-To: <"L4FEB90BD6D9244fcA0B4C8370B54142D.1204073352.scalix.temporal-wave.com*"@MHS>
References: <"L4FEB90BD6D9244fcA0B4C8370B54142D.1204073352.scalix.temporal-wave.com*"@MHS>
Message-ID: <BAYC1-PASMTP0948A5E664538EC4CF3763F51A0@CEZ.ICE>

Jim Idle wrote:
> C# requires two quotes per embedded quote and you probably need to 
> escape them from ANTLR, which gives:
>
> ["\"\"\"\""]
>
> Or something like that (in case of typos I can't see for looking),
>
> Jim
No joy, antler puts this into the .cs file:

                                concept(", \", \", \", \", ");


that's an exact quote. Thankfully, for the time being the difference 
between "\"\"" and "bob" is not a problem :)

From vbar at comp.cz  Tue Feb 26 22:48:36 2008
From: vbar at comp.cz (Vaclav Barta)
Date: Wed, 27 Feb 2008 07:48:36 +0100
Subject: [antlr-interest] how to quote things?
In-Reply-To: <"L4FEB90BD6D9244fcA0B4C8370B54142D.1204073352.scalix.temporal-wave.com*"@MHS>
References: <"L4FEB90BD6D9244fcA0B4C8370B54142D.1204073352.scalix.temporal-wave.com*"@MHS>
Message-ID: <47C507C4.3050604@comp.cz>

Jim Idle wrote:
> C# requires two quotes per embedded quote and you probably need to 
That's not true - C# uses C escapes (there might be some differences 
I've never seen but "\"\"" is correct for both C and C#). If it doesn't 
work in ANTLR, I suppose it's always possible to define a constant for 2 
double quotes and use the symbolic name in ANTLR grammar - but I didn't 
try that...

	Bye
		Vasek
--
http://www.mangrove.cz/
Open Source integration


From antlr at mirality.co.nz  Wed Feb 27 00:08:06 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 27 Feb 2008 21:08:06 +1300
Subject: [antlr-interest] how to quote things?
In-Reply-To: <"L4FEB90BD6D9244fcA0B4C8370B54142D.1204073352.scalix.tempo
	ral-wave.com*"@MHS>
References: <BAYC1-PASMTP0322152AECC8F6CBA1A8C4F51A0@CEZ.ICE>
	<"L4FEB90BD6D9244fcA0B4C8370B54142D.1204073352.scalix.temporal-wave.com*"@MHS>
Message-ID: <20080227080826.454CF11EDEF@www.antlr.org>

At 13:47 27/02/2008, Jim Idle wrote:
 >C# requires two quotes per embedded quote

That's only the case for literal strings, not ordinary 
strings.  ie. the following two are equivalent (and represent a 
string containing two quote marks):

   "\"\""
   @""""""

Rendered in ANTLR, they should respectively be:

   ["\\"\\""]
   [@""""""]

(It's the backslashes that need escaping, not the quotes.)

If neither of those two work, then it might be a bug.


From antlr at mirality.co.nz  Wed Feb 27 00:09:27 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 27 Feb 2008 21:09:27 +1300
Subject: [antlr-interest] ANTLR syntax bug with array return types
In-Reply-To: <fq2dji$1ml$1@ger.gmane.org>
References: <fq2dji$1ml$1@ger.gmane.org>
Message-ID: <20080227080946.633E211EDFE@www.antlr.org>

At 14:15 27/02/2008, Olivier Lefevre wrote:
 >Consider this tree grammar rule with Java output:
 >
 >    foo returns [List[] lists] <blah blah>
[...]
 >which is just wrong: the array-ness of lists (i.e., the [])
 >was thrown away. Is this is a deliberate limitation, where
 >is it documented?

IIRC, the brackets need escaping:

    foo returns [List\[\] lists] <blah blah>


From antlr at mirality.co.nz  Wed Feb 27 00:14:04 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 27 Feb 2008 21:14:04 +1300
Subject: [antlr-interest] how to get hold of individual nodes in a tree
 parser
In-Reply-To: <BAYC1-PASMTP0166F3A75D19CFC5049CC0F51A0@CEZ.ICE>
References: <"L8A60A52D67454db38EF50314ED12360F.1204073424.scalix.temporal-wave.com*"@MHS>
	<BAYC1-PASMTP0166F3A75D19CFC5049CC0F51A0@CEZ.ICE>
Message-ID: <20080227081437.04E1211EDF9@www.antlr.org>

At 19:30 27/02/2008, Benjamin Shropshire wrote:
 >Jim Idle wrote:
 >> Can't you just do:
 >>
 >> name : ^(NAME (n=name_literal {Console.writeln($n.text);}  )+)
 >>
[...]
 >However in general that wouldn't be enough because I might want 
to
 >use break, continue, arbitrary index manipulation, take a second 
pass
 >through, put the loop in another loop or any number of odd 
things.
 >being able to do "foreach(Blob b in name_literal.Iterator)..." 
would be
 >of huge value.

I could be wrong (I haven't tested it), but doesn't += still work 
in tree parsers?  So:

   name : ^(NAME (x+=name_literal)+) { /* something with $x */ };

I'm not quite sure what the actual type of $x would be (you'd have 
to check the generated code), but I would imagine it should be a 
list of trees.  (Or possibly a tree itself.)


From ivanhoeabrahams at gmail.com  Wed Feb 27 00:37:31 2008
From: ivanhoeabrahams at gmail.com (Ivanhoe Abrahams)
Date: Wed, 27 Feb 2008 10:37:31 +0200
Subject: [antlr-interest] MismatchedTokenException not reporting line and
	column number
Message-ID: <dc0c70840802270037h72cf76eao1a556a67e57adbbd@mail.gmail.com>

Hi

I am new to Antlr and am using  "The Definitive ANTLR Reference" as a
reference,
In
that book on page 238 it states that MismatchedTokenException
"indicates that the parser was looking for a particular symbol that it

did not find at the current input position".


Now, reading that, I would assume that when a
MismatchedTokenException occurs, I would be able to retrieve the line
and column number of the input position described in the above

definition, but I keep getting -1 for charPositionInLine field and 0
for the line field of that Exception. Could anyone please explain to me
how I can get the correct line and column number for the
MismatchedTokenException or if there is some othe place where I can get

that info?

BTW when my parser encounters a NoViableAltException I do get the
correct information...

Thank you in advance..

PS. The book has been really helpful.
Ivanhoe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080227/a1503693/attachment.html 

From ahmedh at horizonssoftware.com  Wed Feb 27 03:40:18 2008
From: ahmedh at horizonssoftware.com (Ahmed Hamouda)
Date: Wed, 27 Feb 2008 13:40:18 +0200
Subject: [antlr-interest] How to the generated code in the "catch" section ?
Message-ID: <2E91F09A8F13BE4BACAA46759CA499154B6967@hs-srv-01.horizonssoftware.com>

Hi all,

I generated C# parser and lexer already but I have a small problem.

That I noticed that the generated parser has "try and catch" for each
method but I can't change in generated code in the "catch" section
except by changing it by hand in the parser generated class.

Is there any way to change it in the Antlr before the generation of code
?

 

Thank you for help

 

Best Regards

 

Ahmed Hamouda (MCTS)

Software Engineer

Horizons Software

Address: 93 Haroun Al Rasheed Street, Heliopolis, Cairo, Egypt. 11351. 

Tel:         +202-2644-3709

Mobile:    +2010-33-55-879

Fax:        +202-2632-0661

Website:   www.horizonssoftware.com <http://www.horizonssoftware.com/> 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080227/e4b89546/attachment.html 

From stevagewp at gmail.com  Wed Feb 27 05:31:25 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Thu, 28 Feb 2008 00:31:25 +1100
Subject: [antlr-interest] Suppressing spurious warnings
Message-ID: <b8ceeef70802270531g44b39274vb7f7d12ad20ca542@mail.gmail.com>

In the current ANTLR 3, there are lots of warnings generated that are
basically meaningless. Is there a way to suppress them?

For example:
#1
[00:15:28] warning(105): C:\antlr\mediawiki12.g:996:12: no lexer rule
corresponding to token: PRE_OPEN

There is no lexer rule but I'm setting it explicitly:
...
    | (PRE_OPEN_ACTUAL) => PRE_OPEN_ACTUAL { $type=PRE_OPEN;
in_pre=true; in_noparse=true;}
...

I don't expect ANTLR to detect that, but it'd be nice if I could
suppress the warning.

#2
"Ambiguous" rules.
[00:27:43] warning(200): mediawiki12.g:346:4: Decision can match input
such as "HYPHEN" using multiple alternatives: 1, 2

It's generally acknowledged that ANTLR does the right thing in these
ambiguous situations, consuming input and matching rules immediately.
Any reason we couldn't explicitly accept that behaviour and scrap the
warnings?

#3
Left-recursive rules
[00:27:45] warning(205): mediawiki12.g:356:4: ANTLR could not analyze
this decision in rule table_multiline_header_cell; often this is
because of recursive rule references visible from the left edge of
alternatives.  ANTLR will re-analyze the decision with a fixed
lookahead of k=1.  Consider using "options {k=1;}" for that decision
and possibly adding a syntactic predicate.

As I've reported earlier, in my situation adding the option *and* a
syntactic predicate didn't even help, so the warning isn't much use.

Thanks,
Steve

From stevagewp at gmail.com  Wed Feb 27 05:51:44 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Thu, 28 Feb 2008 00:51:44 +1100
Subject: [antlr-interest] Backtracking doesn't work with semantic predicates?
Message-ID: <b8ceeef70802270551u5aa61bcm2453c3de47b8fa96@mail.gmail.com>

Hi all,
  I found a rule in my grammar that doesn't work when backtracking is
turned on. Stripping absolutely everything down to the barest
essentials, this is the issue:

grammar bolditalics;
options { output=AST; memoize=true; backtrack=false;}

@members {
  boolean textis(String mw) {
    return input.LT(1).getText().equalsIgnoreCase(mw);
  }
}

bold_and_italics:
     {textis("''") }? => APOSTROPHES
    |{textis("'''") }? => APOSTROPHES
;


APOSTROPHES: '\''+;


This grammar matches the sentence "''" (two apostrophes) ok. Switch
backtracking on and it fails with this exception:

line 1:0 no viable alternative at input ''''

Anyway, I guess the workaround is clear: switch backtracking off
temporarily at that rule. But I thought I would report it.* If this is
a known issue, could someone enlighten me as to the cause?

Steve
* Ok, I only just found the workaround while writing this...:)

From stevagewp at gmail.com  Wed Feb 27 05:58:30 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Thu, 28 Feb 2008 00:58:30 +1100
Subject: [antlr-interest] Help Needed with multiple alternatives
In-Reply-To: <20080226200941.B9F2D11EDC9@www.antlr.org>
References: <47C45283.4020200@shmuelhome.mine.nu>
	<L7A0F2CEE6FDA40d3BC8602957DA33D2F.1204049584.scalix.temporal-wave.com*@MHS>
	<c8c997f40802261200q1143871ei28934d7608fac312@mail.gmail.com>
	<20080226200941.B9F2D11EDC9@www.antlr.org>
Message-ID: <b8ceeef70802270558y22ea8bact990d700fc1c0333b@mail.gmail.com>

On 2/27/08, Gavin Lambert <antlr at mirality.co.nz> wrote:
> At 09:00 27/02/2008, Darien Hager wrote:
>
>  >Is there a basic "How to read ANTLRworks multiple-alternative
>  >diagrams" thing on the wiki somewhere?
>
>
> That'd be nice.  I must admit I found the red arrows in particular
>  *very* hard to follow.

Even harder is when the arrow is invisible. I don't really get why
that occurs, but it sometimes does. Also, it's extremely confusing
when the two paths appear to start at different places. It takes a bit
of lateral thinking to work out what is going on.

Steve

From lefevrol at yahoo.com  Wed Feb 27 06:09:52 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Wed, 27 Feb 2008 15:09:52 +0100
Subject: [antlr-interest] ANTLR syntax bug with array return types
In-Reply-To: <20080227080946.633E211EDFE@www.antlr.org>
References: <fq2dji$1ml$1@ger.gmane.org>
	<20080227080946.633E211EDFE@www.antlr.org>
Message-ID: <fq3qvo$7f0$1@ger.gmane.org>

Gavin Lambert wrote:
> IIRC, the brackets need escaping:
> 
>    foo returns [List\[\] lists] <blah blah>

Thanks. However if I escape them I get "List\\" in the Java file.
In any case it looks to me like in this position ANTLR ought to be
able to figure out that it is a code block and treat everything
literally, hence not need escapes.

Any other idea?

-- O.L.


From iwm at doc.ic.ac.uk  Wed Feb 27 07:57:22 2008
From: iwm at doc.ic.ac.uk (Ian Moor)
Date: Wed, 27 Feb 2008 15:57:22 +0000 (GMT)
Subject: [antlr-interest] Returns name
Message-ID: <10830610.371204127842443.JavaMail.ICEMail@snegopad>

 I have a rule in  tree grammar:
expr returns [ Register result ] :
	result=binary
	| result=unary ;
where binary and unary also return registers.

Antlr says 
  "label result conflicts with rule expr's return value or parameter with same name"

  I am working round this by writing
  expr  returns  [Register result  ] 
   @after{result=res;}
     : res = binaryexpr 
     | res = unaryexpr

which seems to work. Shouldn't the first case work as well ?
     Ian W Moor                    Department of Computing,
iwm at doc.ic.ac.uk           Imperial College.
                                    180 Queensgate
                                     London SW7 2AZ UK.
  


From shro8822 at vandals.uidaho.edu  Wed Feb 27 08:03:35 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Wed, 27 Feb 2008 08:03:35 -0800
Subject: [antlr-interest] how to get hold of individual nodes in a tree
 parser
In-Reply-To: <BAY0-PAMC1-F3YsrEA100020de0@bay0-pamc1-f3.bay0.hotmail.com>
References: <"L8A60A52D67454db38EF50314ED12360F.1204073424.scalix.temporal-wave.com*"@MHS>
	<BAYC1-PASMTP0166F3A75D19CFC5049CC0F51A0@CEZ.ICE>
	<BAY0-PAMC1-F3YsrEA100020de0@bay0-pamc1-f3.bay0.hotmail.com>
Message-ID: <47C589D7.9050403@vandals.uidaho.edu>

Gavin Lambert wrote:

> At 19:30 27/02/2008, Benjamin Shropshire wrote:
> >Jim Idle wrote:
> >> Can't you just do:
> >>
> >> name : ^(NAME (n=name_literal {Console.writeln($n.text);}  )+)
> >>
> [...]
> >However in general that wouldn't be enough because I might want to
> >use break, continue, arbitrary index manipulation, take a second pass
> >through, put the loop in another loop or any number of odd things.
> >being able to do "foreach(Blob b in name_literal.Iterator)..." would be
> >of huge value.
>
> I could be wrong (I haven't tested it), but doesn't += still work in 
> tree parsers?  So:
>
>   name : ^(NAME (x+=name_literal)+) { /* something with $x */ };
>
> I'm not quite sure what the actual type of $x would be (you'd have to 
> check the generated code), but I would imagine it should be a list of 
> trees.  (Or possibly a tree itself.)


I'll check, but IIRC someone said that using += in a tree parser wasn't 
exactly kosher. Maybe I'm miss remembering

From lilypondtool at organum.hu  Wed Feb 27 08:04:29 2008
From: lilypondtool at organum.hu (Bertalan Fodor (LilyPondTool))
Date: Wed, 27 Feb 2008 17:04:29 +0100
Subject: [antlr-interest] Returns name
In-Reply-To: <10830610.371204127842443.JavaMail.ICEMail@snegopad>
References: <10830610.371204127842443.JavaMail.ICEMail@snegopad>
Message-ID: <47C58A0D.9020808@organum.hu>

I think you wanted to write

expr returns [ Register result ] :
	binary { result = $binary.result; }
	| unary { result = $unary.result; }

Return values are always set  in actions.
result=binary
assigns the label 'result' to the result of binary rule, so using that 
you should have written:
res=binary { result = $res.value; }

Bert

Ian Moor wrote:
>  I have a rule in  tree grammar:
> expr returns [ Register result ] :
> 	result=binary
> 	| result=unary ;
> where binary and unary also return registers.
>
> Antlr says 
>   "label result conflicts with rule expr's return value or parameter with same name"
>
>   I am working round this by writing
>   expr  returns  [Register result  ] 
>    @after{result=res;}
>      : res = binaryexpr 
>      | res = unaryexpr
>
> which seems to work. Shouldn't the first case work as well ?
>      Ian W Moor                    Department of Computing,
> iwm at doc.ic.ac.uk           Imperial College.
>                                     180 Queensgate
>                                      London SW7 2AZ UK.
>   
>
>
>   


-- 
LilyPondTool is the editor for LilyPond files.
See http://lilypondtool.organum.hu


From Austin_Hastings at Yahoo.com  Wed Feb 27 08:07:41 2008
From: Austin_Hastings at Yahoo.com (Austin Hastings)
Date: Wed, 27 Feb 2008 11:07:41 -0500
Subject: [antlr-interest] Returns name
In-Reply-To: <10830610.371204127842443.JavaMail.ICEMail@snegopad>
References: <10830610.371204127842443.JavaMail.ICEMail@snegopad>
Message-ID: <47C58ACD.3010001@Yahoo.com>

Ian,

There are two different things going on, and you're conflating them.

You can say things in ANTLR like:

foo : a=bar;

where bar is another rule, and that means "create a temporary name, 'a', 
for this 'bar' thingy, so that I can reference it later in this same 
(foo) rule."

The reason for doing that is when you have more than one 'bar' in the 
same rule, and you want to discriminate a particular one. Your own 
example might be best written as:

expr :
  b_expr=binary { do_something_with($b_expr.value); }
  | u_expr=unary { do_something_with($u_expr.value); }
 ;

On the other hand, you can declare parameters to the rules, using either 
name[param, ...] or name returns [type result]

When you do this, you create named entities that you can use inside your 
code blocks, not in the "grammar" part itself.

expr returns [Register result]
   binary { $result = $binary.register; }
  | unary { $result = $unary.register; }
  ;


Note that because the two clauses use different sub-rules (binary/unary) 
I don't HAVE to put in a name.

=Austin


Ian Moor wrote:
>  I have a rule in  tree grammar:
> expr returns [ Register result ] :
> 	result=binary
> 	| result=unary ;
> where binary and unary also return registers.
>
> Antlr says 
>   "label result conflicts with rule expr's return value or parameter with same name"
>
>   I am working round this by writing
>   expr  returns  [Register result  ] 
>    @after{result=res;}
>      : res = binaryexpr 
>      | res = unaryexpr
>
> which seems to work. Shouldn't the first case work as well ?
>      Ian W Moor                    Department of Computing,
> iwm at doc.ic.ac.uk           Imperial College.
>                                     180 Queensgate
>                                      London SW7 2AZ UK.
>   
>
>
>   



From snyder at t-vec.com  Wed Feb 27 08:44:54 2008
From: snyder at t-vec.com (Chris Snyder)
Date: Wed, 27 Feb 2008 11:44:54 -0500
Subject: [antlr-interest] missing template tokenRefBangTrack.st
Message-ID: <001001c87960$14d0f900$265d080a@Gizmo>

I've made some tweaks to a grammar of mine today and I'm getting the error
below in Antlrworks when I debug or try to generate code. Any ideas as to
what I should be looking for? Grammar is attached.

 

Thanks,

Chris

 

error(10):  internal error: C:\temp\ANTLR\MScript.g :
java.lang.IllegalArgumentException: Can't find template tokenRefBangTrack.st

org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate(StringTemplateGr
oup.java:485)

org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGro
up.java:372)

org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGro
up.java:384)

org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate(StringTemplateGr
oup.java:464)

org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGro
up.java:372)

org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGro
up.java:384)

org.antlr.codegen.CodeGenTreeWalker.getTokenElementST(CodeGenTreeWalker.java
:160)

org.antlr.codegen.CodeGenTreeWalker.atom(CodeGenTreeWalker.java:1965)

org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1641)

org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1490)

org.antlr.codegen.CodeGenTreeWalker.alternative(CodeGenTreeWalker.java:1252)

org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:1037)

org.antlr.codegen.CodeGenTreeWalker.ebnf(CodeGenTreeWalker.java:1791)

org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1637)

org.antlr.codegen.CodeGenTreeWalker.alternative(CodeGenTreeWalker.java:1252)

org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:1037)

org.antlr.codegen.CodeGenTreeWalker.rule(CodeGenTreeWalker.java:753)

org.antlr.codegen.CodeGenTreeWalker.rules(CodeGenTreeWalker.java:544)

org.antlr.codegen.CodeGenTreeWalker.grammarSpec(CodeGenTreeWalker.java:486)

org.antlr.codegen.CodeGenTreeWalker.grammar(CodeGenTreeWalker.java:333)

org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:406)

org.antlr.Tool.processGrammar(Tool.java:347)

org.antlr.Tool.process(Tool.java:268)

org.antlr.works.generate.CodeGenerate.generate(Unknown Source)

org.antlr.works.generate.CodeGenerate.run(Unknown Source)

java.lang.Thread.run(Unknown Source)

 

 

 

 

T-VEC Technologies, Inc.

P.O. Box 8572

Delray Beach, FL 33482

w) (561) 416-0104

f) (561) 620-8569

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080227/232026b0/attachment-0001.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: MScript.g
Type: application/octet-stream
Size: 7686 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080227/232026b0/attachment-0001.obj 

From edsweet at swbell.net  Wed Feb 27 08:54:14 2008
From: edsweet at swbell.net (David Sweet)
Date: Wed, 27 Feb 2008 10:54:14 -0600
Subject: [antlr-interest] missing template tokenRefBangTrack.st
In-Reply-To: <001001c87960$14d0f900$265d080a@Gizmo>
References: <001001c87960$14d0f900$265d080a@Gizmo>
Message-ID: <47C595B6.2030501@swbell.net>

Hi Chris,

In every rule where you have both a tree rewrite ( -> ^(...) ) and use 
!, get rid of the !, as the tree rewrite takes care of that, and you get 
this weirdo error otherwise.

EG: Change this:

ifStatement
: IF expression (SEMI!|COMMA!)? (statement+ (COMMA!)?)? 
(elseIfStatement)* elseStatement? END -> ^(NODE_IF expression statement* 
elseIfStatement* elseStatement)
;

TO this:

ifStatement
: IF expression (SEMI|COMMA)? (statement+ (COMMA)?)? (elseIfStatement)* 
elseStatement? END -> ^(NODE_IF expression statement* elseIfStatement* 
elseStatement)
;


Regards,

David Sweet

Chris Snyder wrote:
>
> I?ve made some tweaks to a grammar of mine today and I?m getting the 
> error below in Antlrworks when I debug or try to generate code. Any 
> ideas as to what I should be looking for? Grammar is attached.
>
> Thanks,
>
> Chris
>
> error(10): internal error: C:\temp\ANTLR\MScript.g : 
> java.lang.IllegalArgumentException: Can't find template 
> tokenRefBangTrack.st
>
> org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate(StringTemplateGroup.java:485)
>
> org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:372)
>
> org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:384)
>
> org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate(StringTemplateGroup.java:464)
>
> org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:372)
>
> org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:384)
>
> org.antlr.codegen.CodeGenTreeWalker.getTokenElementST(CodeGenTreeWalker.java:160)
>
> org.antlr.codegen.CodeGenTreeWalker.atom(CodeGenTreeWalker.java:1965)
>
> org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1641)
>
> org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1490)
>
> org.antlr.codegen.CodeGenTreeWalker.alternative(CodeGenTreeWalker.java:1252)
>
> org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:1037)
>
> org.antlr.codegen.CodeGenTreeWalker.ebnf(CodeGenTreeWalker.java:1791)
>
> org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1637)
>
> org.antlr.codegen.CodeGenTreeWalker.alternative(CodeGenTreeWalker.java:1252)
>
> org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:1037)
>
> org.antlr.codegen.CodeGenTreeWalker.rule(CodeGenTreeWalker.java:753)
>
> org.antlr.codegen.CodeGenTreeWalker.rules(CodeGenTreeWalker.java:544)
>
> org.antlr.codegen.CodeGenTreeWalker.grammarSpec(CodeGenTreeWalker.java:486)
>
> org.antlr.codegen.CodeGenTreeWalker.grammar(CodeGenTreeWalker.java:333)
>
> org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:406)
>
> org.antlr.Tool.processGrammar(Tool.java:347)
>
> org.antlr.Tool.process(Tool.java:268)
>
> org.antlr.works.generate.CodeGenerate.generate(Unknown Source)
>
> org.antlr.works.generate.CodeGenerate.run(Unknown Source)
>
> java.lang.Thread.run(Unknown Source)
>
> T-VEC Technologies, Inc.
>
> P.O. Box 8572
>
> Delray Beach, FL 33482
>
> w) (561) 416-0104
>
> f) (561) 620-8569
>

From antlr at jazillian.com  Wed Feb 27 09:02:59 2008
From: antlr at jazillian.com (Andy Tripp)
Date: Wed, 27 Feb 2008 12:02:59 -0500
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
Message-ID: <47C597C3.30805@jazillian.com>

Hi,

I gave a talk to the NYC Semantic Web Meetup group last week titled
"An Introduction to ANTLR". The slides are available at:
http://www.jazillian.com/antlrTalk/

Sorry about the crappy HTML...Friggin' MS Powerpoint.

Andy

From kroepke at classdump.org  Wed Feb 27 09:01:51 2008
From: kroepke at classdump.org (=?ISO-8859-1?Q?Kay_R=F6pke?=)
Date: Wed, 27 Feb 2008 18:01:51 +0100
Subject: [antlr-interest] ANTLR syntax bug with array return types
In-Reply-To: <fq3qvo$7f0$1@ger.gmane.org>
References: <fq2dji$1ml$1@ger.gmane.org>
	<20080227080946.633E211EDFE@www.antlr.org>
	<fq3qvo$7f0$1@ger.gmane.org>
Message-ID: <C08ABB76-6BD6-4CFE-8090-4A23CA01CA95@classdump.org>

Hi!

On Feb 27, 2008, at 3:09 PM, Olivier Lefevre wrote:

> Thanks. However if I escape them I get "List\\" in the Java file.
> In any case it looks to me like in this position ANTLR ought to be
> able to figure out that it is a code block and treat everything
> literally, hence not need escapes.


I think this came up in the past. I vaguely remember discussing  
something like this.
It should be findable in the archives.

cheers,
-k
-- 
Kay R?pke
http://classdump.org/







From bmeike at speakeasy.net  Wed Feb 27 09:06:33 2008
From: bmeike at speakeasy.net (Blake Meike)
Date: Wed, 27 Feb 2008 09:06:33 -0800
Subject: [antlr-interest] Retaining comments
Message-ID: <601F15D4-F55A-4598-BCF4-5A477FF66BC0@speakeasy.net>

I am writing a fairly simple translator using v3, and having some  
trouble handling comments.

In the first versions of the translator, I completely ignored  
comments, treating them as whitespace.  This works very, very nicely,  
using either skip() or the HIDDEN channel.

I'm adding a new feature that will copy comment from the source to the  
source to the destination language.  The ANTLR book suggests that this  
is not only possible, but, using channels, an ANTRL feature.  I wasn't  
able to discern, though, exactly how to do it.

I changed my grammar so that I could attach an action to the lexer's  
recognition of a comment token.  This has almost the desired effect:  
the action is called for every comment in the source.  Unfortunately,  
every call to the lexer action is called before any call to any parser  
action, as if the entire source file were converted to tokens, before  
any token is fed to the parser.

Is there a way to keep the, very convenient lexical handling of  
comments, and still, to have the action associated with them called in  
context?

Thanks
  Blake Meike

From jimi at temporal-wave.com  Wed Feb 27 08:43:38 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 27 Feb 2008 08:43:38 -0800
Subject: [antlr-interest] how to quote things?
In-Reply-To: <47C507C4.3050604@comp.cz>
Message-ID: <"LE68753040DA247f6943979C461796B07.1204130705.scalix.temporal-wave.com*"@MHS>

> -----Original Message-----
> From: Vaclav Barta [mailto:vbar at comp.cz]
> Sent: Tuesday, February 26, 2008 10:49 PM
> To: Jim Idle
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] how to quote things?
> 
> Jim Idle wrote:
> > C# requires two quotes per embedded quote and you probably need to
> That's not true - C# uses C escapes \

Doh - I was looking at my Vb.Net grammar and not my C# grammar!!!

Looks like that is a bug in C# target codegen.

Jim


From snyder at t-vec.com  Wed Feb 27 09:49:57 2008
From: snyder at t-vec.com (Chris Snyder)
Date: Wed, 27 Feb 2008 12:49:57 -0500
Subject: [antlr-interest] missing template tokenRefBangTrack.st
In-Reply-To: <47C595B6.2030501@swbell.net>
References: <001001c87960$14d0f900$265d080a@Gizmo>
	<47C595B6.2030501@swbell.net>
Message-ID: <002b01c87969$2b285690$265d080a@Gizmo>

That did the trick.

Thank you!

-----Original Message-----
From: David Sweet [mailto:edsweet at swbell.net] 
Sent: Wednesday, February 27, 2008 11:54 AM
To: snyder at t-vec.com
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] missing template tokenRefBangTrack.st

Hi Chris,

In every rule where you have both a tree rewrite ( -> ^(...) ) and use 
!, get rid of the !, as the tree rewrite takes care of that, and you get 
this weirdo error otherwise.

EG: Change this:

ifStatement
: IF expression (SEMI!|COMMA!)? (statement+ (COMMA!)?)? 
(elseIfStatement)* elseStatement? END -> ^(NODE_IF expression statement* 
elseIfStatement* elseStatement)
;

TO this:

ifStatement
: IF expression (SEMI|COMMA)? (statement+ (COMMA)?)? (elseIfStatement)* 
elseStatement? END -> ^(NODE_IF expression statement* elseIfStatement* 
elseStatement)
;


Regards,

David Sweet

Chris Snyder wrote:
>
> I've made some tweaks to a grammar of mine today and I'm getting the 
> error below in Antlrworks when I debug or try to generate code. Any 
> ideas as to what I should be looking for? Grammar is attached.
>
> Thanks,
>
> Chris
>
> error(10): internal error: C:\temp\ANTLR\MScript.g : 
> java.lang.IllegalArgumentException: Can't find template 
> tokenRefBangTrack.st
>
>
org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate(StringTemplateGr
oup.java:485)
>
>
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGro
up.java:372)
>
>
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGro
up.java:384)
>
>
org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate(StringTemplateGr
oup.java:464)
>
>
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGro
up.java:372)
>
>
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGro
up.java:384)
>
>
org.antlr.codegen.CodeGenTreeWalker.getTokenElementST(CodeGenTreeWalker.java
:160)
>
> org.antlr.codegen.CodeGenTreeWalker.atom(CodeGenTreeWalker.java:1965)
>
> org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1641)
>
> org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1490)
>
>
org.antlr.codegen.CodeGenTreeWalker.alternative(CodeGenTreeWalker.java:1252)
>
> org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:1037)
>
> org.antlr.codegen.CodeGenTreeWalker.ebnf(CodeGenTreeWalker.java:1791)
>
> org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1637)
>
>
org.antlr.codegen.CodeGenTreeWalker.alternative(CodeGenTreeWalker.java:1252)
>
> org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:1037)
>
> org.antlr.codegen.CodeGenTreeWalker.rule(CodeGenTreeWalker.java:753)
>
> org.antlr.codegen.CodeGenTreeWalker.rules(CodeGenTreeWalker.java:544)
>
>
org.antlr.codegen.CodeGenTreeWalker.grammarSpec(CodeGenTreeWalker.java:486)
>
> org.antlr.codegen.CodeGenTreeWalker.grammar(CodeGenTreeWalker.java:333)
>
> org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:406)
>
> org.antlr.Tool.processGrammar(Tool.java:347)
>
> org.antlr.Tool.process(Tool.java:268)
>
> org.antlr.works.generate.CodeGenerate.generate(Unknown Source)
>
> org.antlr.works.generate.CodeGenerate.run(Unknown Source)
>
> java.lang.Thread.run(Unknown Source)
>
> T-VEC Technologies, Inc.
>
> P.O. Box 8572
>
> Delray Beach, FL 33482
>
> w) (561) 416-0104
>
> f) (561) 620-8569
>


From gudnabrsam at yahoo.com  Wed Feb 27 10:15:14 2008
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Wed, 27 Feb 2008 10:15:14 -0800 (PST)
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <47C597C3.30805@jazillian.com>
Message-ID: <438878.12507.qm@web55109.mail.re4.yahoo.com>

Hi Andy,
Thanks for making this publicly available.

I specifically wanted to address your statements in
the 'Predicates' section:  I have been trying as of
late to figure out just what the difference is between
semantic predicates and gated semantic predicates, so
I think your explanation has helped me there. 
However, I'm not sure of the veracity of your
statement that:

?Syntactic Predicate" is just some "Symantic
Predicate" that happens to be in a lexer
rule rather than a parser rule.

It was my impression that a syntactic predicate could
be used in a parser or in a lexer to "test the
waters", so to speak.  Does anyone else want to weigh
in here?

Thanks,
Matt

--- Andy Tripp <antlr at jazillian.com> wrote:

> Hi,
> 
> I gave a talk to the NYC Semantic Web Meetup group
> last week titled
> "An Introduction to ANTLR". The slides are available
> at:
> http://www.jazillian.com/antlrTalk/
> 
> Sorry about the crappy HTML...Friggin' MS
> Powerpoint.
> 
> Andy
> 



      ____________________________________________________________________________________
Looking for last minute shopping deals?  
Find them fast with Yahoo! Search.  http://tools.search.yahoo.com/newsearch/category.php?category=shopping

From lefevrol at yahoo.com  Wed Feb 27 10:46:15 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Wed, 27 Feb 2008 19:46:15 +0100
Subject: [antlr-interest] ANTLR syntax bug with array return types
In-Reply-To: <C08ABB76-6BD6-4CFE-8090-4A23CA01CA95@classdump.org>
References: <fq2dji$1ml$1@ger.gmane.org>	<20080227080946.633E211EDFE@www.antlr.org>	<fq3qvo$7f0$1@ger.gmane.org>
	<C08ABB76-6BD6-4CFE-8090-4A23CA01CA95@classdump.org>
Message-ID: <fq4b60$c9q$1@ger.gmane.org>

Kay R?pke wrote:
> I think this came up in the past. I vaguely remember discussing 
> something like this. It should be findable in the archives.

Unfortunately the archive has no search engine. However Google found it:
in "how to use Java arrays in rule argument actions in ANTLR v3" in March
2007 Ter replied to a similar question that "Currently we have no way to 
handle nested []". Apparently this is still true. Are there any plans to
fix that? It is a major restriction: arrays are not an obscure feature of
the target language.

At the very least this should be documented yet AFAICT neither the FAQ nor
the manual mention it and it does not seem to be in the bug tracker either.

Regards,

-- O.L.


From jimi at temporal-wave.com  Wed Feb 27 10:39:24 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 27 Feb 2008 10:39:24 -0800
Subject: [antlr-interest] ANTLR syntax bug with array return types
In-Reply-To: <fq4b60$c9q$1@ger.gmane.org>
Message-ID: <"L80451C39F26F475bB3807189658D0329.1204137638.scalix.temporal-wave.com*"@MHS>

> -----Original Message-----
> From: Olivier Lefevre [mailto:lefevrol at yahoo.com]
> Sent: Wednesday, February 27, 2008 10:46 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] ANTLR syntax bug with array return types
> 
> Kay R?pke wrote:
> > I think this came up in the past. I vaguely remember discussing
> > something like this. It should be findable in the archives.
> 
> Unfortunately the archive has no search engine. However Google found
> it:

In the very middle of the front page, there is a big text input box 
marked 'search'. It uses site specific goggle searches. However 
sometimes I think that perhaps the search box is a black box on a black 
background with a light that lights up black when you press search.

Jim


From jhvdven at xs4all.nl  Wed Feb 27 11:16:48 2008
From: jhvdven at xs4all.nl (Jan van der Ven)
Date: Wed, 27 Feb 2008 20:16:48 +0100
Subject: [antlr-interest] What to expect next
Message-ID: <47C5B720.9020304@xs4all.nl>

Dear list,



I am a contributor to an eclipse plugin 
(http://sourceforge.net/projects/quantum). I am responsible for the SQL 
Editor and want to increase user experience by offering content assist. 
We use antlr 2.7.x to check valid syntax. That works reasonably fine, 
but I would like to have more information on incomplete statements.

Using actions I have divided a SQL statement into several parts and have 
managed to have content assist based on that. But this is not as 
fine-grained as I want it to be. What I would really like is that the 
syntax check would tell us what it expects next: a column definition,  a 
keyword, a table and so on. The content assist would then be able to 
show just those assists. The problem is of course that the syntax that 
the user is entering is wrong, so will cause an error. Somehow I do not 
get as many  "expected <this> found 'null'" errors as I expected (if you 
get my expectation;-)).

I have added exception handling around my entry rule, hoping to achieve 
that if one statement does not compile, the next one might. So I consume 
everything up to and including the next SEMI. I think that my 
implementation somehow hides the errors I want to catch.

sql_script:
     sql_stmt 
(s:SEMICOLON!{currentStatement.setLength(#s.getColumn()-currentStatement.getOffset());} 
(sql_stmt)?)*
    {
        ##=#([SQL_SCRIPT,"script"], #sql_script);
    }
;
exception
catch [MismatchedTokenException mce]
{
     QError e = new QError();
   // .... omitted for brevity
    errors.add(e);
    if(LA(1)==SEMICOLON)
    {
        consume();
        returnAST = sql_script_AST;
        sql_stmt();
        return;
    }
    consume();
    while (LA(1) != Token.EOF_TYPE && (LA(1)!=SEMICOLON)) {
        consume();
    }
    if(LA(1)==SEMICOLON){
        consume();
    }
    returnAST = sql_script_AST;
    sql_stmt();
    return;
}
catch [NoViableAltException nvae]
{
    QError e = new QError();
   // .... omitted for brevity
    errors.add(e);
      if(LA(1)==SEMICOLON)
    {
        consume();
        sql_stmt();
        return;
    }
    consume();
    while (LA(1) != Token.EOF_TYPE && (LA(1)!=SEMICOLON)) {
        consume();
    }
    if(LA(1)==SEMICOLON){
        consume();
    }
    if(LA(1)!=EOF){
        sql_script();
    }
    return;
}
catch [RecognitionException re]
{
    QError e = new QError();
   // .... omitted for brevity
    errors.add(e);
    if(LA(1)==SEMICOLON)
    {
        consume();
        returnAST = sql_script_AST;
        sql_stmt();
        return;
    }
    consume();
    while (LA(1) != Token.EOF_TYPE && (LA(1)!=SEMICOLON)) {
        consume();
    }
    if(LA(1)==SEMICOLON){
        consume();
    }
    returnAST = sql_script_AST;
    sql_stmt();
    return;
}

I have a similar exception handling block around the sql_stmt rule. (The 
stuff I am doing to the returnAST is also sub-optimal.)
sql_stmt
:
      sql_data_stmt 
{statements.put(currentStatement.getStatementNumber(), 
currentStatement);}// this statement had correct syntax.
    | sql_schema_stmt 
{statements.put(currentStatement.getStatementNumber(), currentStatement);}
    | sql_transaction_stmt
    |
    ( options {generateAmbigWarnings=false;}:
         // Keeping this order avoids the clash of the "set" statements
     // due to the linear approximation of the lookahead
        sql_session_stmt     // LA(1) is surely "set"
      | sql_connection_stmt
    )
    | sql_dyn_stmt
    | system_descriptor_stmt
    | get_diag_stmt
    | declare_cursor
    | temporary_table_decl
;
exception
catch [MismatchedTokenException mce]
{
... see above...


So my questions are:
1) Can antlr offer a list of things it expects next? So if the statement 
is: SELECT * FROM, can antlr then tell me it expects a table definition. 
Whether that would be a table, view or subquery depends on the grammar, 
I think. I would like all three alternatives, and the grammar for 
completed statements does support all three.
2) In what order should I catch the exceptions? I want as much info on 
the error as possible. Do I need one catch [Exception e] and then handle 
the subtypes in the catch block? Which rule should I call in the 
exception block: sql_script or sql_stmt?
3) Am I taking the correct approach here?


Any suggestions would be greatly appreciated.

Kind regards,


Jan


From darien.hager at etelos-inc.com  Wed Feb 27 11:55:56 2008
From: darien.hager at etelos-inc.com (Darien Hager)
Date: Wed, 27 Feb 2008 11:55:56 -0800
Subject: [antlr-interest] missing template tokenRefBangTrack.st
In-Reply-To: <002b01c87969$2b285690$265d080a@Gizmo>
References: <001001c87960$14d0f900$265d080a@Gizmo>
	<47C595B6.2030501@swbell.net> <002b01c87969$2b285690$265d080a@Gizmo>
Message-ID: <c8c997f40802271155s1dd8ba6cg2c48b9c4cbce4169@mail.gmail.com>

On 2/27/08, Chris Snyder <snyder at t-vec.com> wrote:
>
> >
> > error(10): internal error: C:\temp\ANTLR\MScript.g :
> > java.lang.IllegalArgumentException: Can't find template
> > tokenRefBangTrack.st
> >
>

I think this error message would be worth a revision with a speculative
comment: "Perhaps mixing tree-rewrite rules with hidings marks?"

...Or whatever the technical name is for when you use exclamation points to
hide nodes.

-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are not
the intended recipient, then this is notice that any use, disclosure,
dissemination, distribution or copying is strictly prohibited. If you have
received this message in error please contact the sender by reply mail and
destroy all copies of the original message.


This e-mail message, including attachments, may contain confidential information for the sole use of the intended recipient(s). If you are not the intended recipient, then this is notice that any use, disclosure, dissemination, distribution or copying is strictly prohibited.  If you have received this message in error please contact the sender by reply mail and destroy all copies of the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080227/f1b63f0a/attachment.html 

From darien.hager at etelos-inc.com  Wed Feb 27 12:14:12 2008
From: darien.hager at etelos-inc.com (Darien Hager)
Date: Wed, 27 Feb 2008 12:14:12 -0800
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <438878.12507.qm@web55109.mail.re4.yahoo.com>
References: <47C597C3.30805@jazillian.com>
	<438878.12507.qm@web55109.mail.re4.yahoo.com>
Message-ID: <c8c997f40802271214q40641199g326d8c7d0b52f755@mail.gmail.com>

Saw this in the slides:

// Slide example
data: (b+=BYTE) {$b.size() <= 4}?;


// This is wrong, but is what is implied from regex experience with +*?
modifiers.
data: BYTE{0,4}; // 0 to 4 BYTE tokens



The slide example is valid v3 code, correct? Is there a clearer way to
match tokens or other rules an arbitrarily-ranged number of times?


-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are not
the intended recipient, then this is notice that any use, disclosure,
dissemination, distribution or copying is strictly prohibited. If you have
received this message in error please contact the sender by reply mail and
destroy all copies of the original message.


This e-mail message, including attachments, may contain confidential information for the sole use of the intended recipient(s). If you are not the intended recipient, then this is notice that any use, disclosure, dissemination, distribution or copying is strictly prohibited.  If you have received this message in error please contact the sender by reply mail and destroy all copies of the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080227/90706d10/attachment.html 

From antlr at mirality.co.nz  Wed Feb 27 12:19:22 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 28 Feb 2008 09:19:22 +1300
Subject: [antlr-interest] Suppressing spurious warnings
In-Reply-To: <b8ceeef70802270531g44b39274vb7f7d12ad20ca542@mail.gmail.co
 m>
References: <b8ceeef70802270531g44b39274vb7f7d12ad20ca542@mail.gmail.com>
Message-ID: <20080227201954.EDA6711EE11@www.antlr.org>

At 02:31 28/02/2008, Steve Bennett wrote:
 >[00:15:28] warning(105): C:\antlr\mediawiki12.g:996:12: no lexer 

 >rule corresponding to token: PRE_OPEN
 >
 >There is no lexer rule but I'm setting it explicitly:
 >...
 >    | (PRE_OPEN_ACTUAL) => PRE_OPEN_ACTUAL { $type=PRE_OPEN;
 >in_pre=true; in_noparse=true;}
 >...

You can suppress the warning by removing PRE_OPEN from the tokens 
block and adding a fragment rule for it instead:

fragment PRE_OPEN: ' ';

The actual contents of the rule are unimportant (since you're 
never actually calling it); they can't be empty, though.  Usually 
you'd either put an obvious placeholder like above or put a simple 
string constant describing how it ought to look in the end (eg. 
'<pre>').

 >[00:27:43] warning(200): mediawiki12.g:346:4: Decision can match 

 >input such as "HYPHEN" using multiple alternatives: 1, 2

At present, the only way to remove these warnings is to rewrite 
your grammar to remove the ambiguity.  Note that while ANTLR often 
does the right thing anyway, you can't just assume that.  You 
should always either rewrite the grammar or test its behaviour 
thoroughly.  Or both.

 >[00:27:45] warning(205): mediawiki12.g:356:4: ANTLR could not
 >analyze this decision in rule table_multiline_header_cell; often 

 >this is because of recursive rule references visible from the
 >left edge of alternatives.  ANTLR will re-analyze the decision
 >with a fixed lookahead of k=1.  Consider using "options {k=1;}"
 >for that decision and possibly adding a syntactic predicate.

True left-recursion is fatal to ANTLR, so must be corrected.

 >As I've reported earlier, in my situation adding the option 
*and*
 >a syntactic predicate didn't even help, so the warning isn't 
much
 >use.

The suggestion in the message is a bit misleading -- since ANTLR 
automatically discards predicates that it thinks are unnecessary 
(because they have no alts), simply adding a predicate isn't good 
enough.  You may need to combine it with some other rules.

I have yet to see a case where ignoring this warning is a good 
idea.


From antlr at mirality.co.nz  Wed Feb 27 12:29:59 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 28 Feb 2008 09:29:59 +1300
Subject: [antlr-interest] Retaining comments
In-Reply-To: <601F15D4-F55A-4598-BCF4-5A477FF66BC0@speakeasy.net>
References: <601F15D4-F55A-4598-BCF4-5A477FF66BC0@speakeasy.net>
Message-ID: <20080227203030.B5AD711EE1A@www.antlr.org>

At 06:06 28/02/2008, Blake Meike wrote:
 >Unfortunately, every call to the lexer action is called
 >before any call to any parser action, as if the entire
 >source file were converted to tokens, before any token
 >is fed to the parser.

Because that's exactly what does happen.

 >Is there a way to keep the, very convenient lexical handling 
of
 >comments, and still, to have the action associated with them 
called
 >in context?

You need to assign the COMMENT tokens to a channel; either the 
default channel (in which case all the parser rules will need to 
specify where comments are permitted) or an alternate channel (eg. 
channel 2).

This will keep the comment tokens in the token stream at the 
appropriate points.  To transfer them you'll have to add some code 
that looks for comment tokens nearby recognised parser constructs 
so you can emit them at the right place in the output.


From antlr at mirality.co.nz  Wed Feb 27 12:33:35 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 28 Feb 2008 09:33:35 +1300
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <c8c997f40802271214q40641199g326d8c7d0b52f755@mail.gmail.co
 m>
References: <47C597C3.30805@jazillian.com>
	<438878.12507.qm@web55109.mail.re4.yahoo.com>
	<c8c997f40802271214q40641199g326d8c7d0b52f755@mail.gmail.com>
Message-ID: <20080227203413.7DC2811EE5C@www.antlr.org>

At 09:14 28/02/2008, Darien Hager wrote:
>// This is wrong, but is what is implied from regex experience 
>with +*? modifiers.
>data: BYTE{0,4}; // 0 to 4 BYTE tokens
>
>The slide example is valid v3 code, correct? Is there a clearer 
>way to match tokens or other rules an arbitrarily-ranged number 
>of times?

Well, you could always use:

data: (BYTE (BYTE (BYTE BYTE?)?)?)?;


From antlr at jazillian.com  Wed Feb 27 12:45:59 2008
From: antlr at jazillian.com (Andy Tripp)
Date: Wed, 27 Feb 2008 15:45:59 -0500
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <438878.12507.qm@web55109.mail.re4.yahoo.com>
References: <438878.12507.qm@web55109.mail.re4.yahoo.com>
Message-ID: <47C5CC07.1050900@jazillian.com>

Hi Matt,

Thanks. Yea, I was very hesitant to put that sentence in, as I wasn't 
sure it was
correct. I'd appreciate it if anyone could clarify this for me.

Andy

Matt Benson wrote:
>
> ?Syntactic Predicate" is just some "Symantic
> Predicate" that happens to be in a lexer
> rule rather than a parser rule.
>
>   
>   


From parrt at cs.usfca.edu  Wed Feb 27 12:49:56 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 27 Feb 2008 12:49:56 -0800
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <47C5CC07.1050900@jazillian.com>
References: <438878.12507.qm@web55109.mail.re4.yahoo.com>
	<47C5CC07.1050900@jazillian.com>
Message-ID: <23C73E81-2FD1-4872-B0EA-1E032D5C7902@cs.usfca.edu>


On Feb 27, 2008, at 12:45 PM, Andy Tripp wrote:

> Hi Matt,
>
> Thanks. Yea, I was very hesitant to put that sentence in, as I  
> wasn't sure it was
> correct. I'd appreciate it if anyone could clarify this for me.

hi gang. A semantic predicate is a boolean expression that must be  
true for the parse to pass over it; any kind of recognizer.  A gated  
sem pred is one that forces alts to be turned on or off at run time.

A syn pred simply specifies the sytnactic context that must be true  
for the parser (or lexer or tree parser) to pass.  I.e., if you see X,  
then Y will match:

a : (X)=> Y
    | ...
    ;

preds order the alts. first one that matches wins.

Ter
>
>
> Andy
>
> Matt Benson wrote:
>>
>> ?Syntactic Predicate" is just some "Symantic
>> Predicate" that happens to be in a lexer
>> rule rather than a parser rule.
>>
>>
>


From r.mark.volkmann at gmail.com  Wed Feb 27 12:57:31 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Wed, 27 Feb 2008 14:57:31 -0600
Subject: [antlr-interest] another ANTLR presentation
Message-ID: <f0fcc6820802271257x122b5117t4dbb22936b398e19@mail.gmail.com>

I'm giving a talk on ANTLR 3 at the Gateway Software Symposium in St.
Louis on March 9. It's part of the No Fluff Just Stuff tour. My slides
and example code are available at
http://www.ociweb.com/mark/programming/ANTLR3.html. Feedback is
welcomed!

-- 
R. Mark Volkmann
Object Computing, Inc.

From lefevrol at yahoo.com  Wed Feb 27 13:02:13 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Wed, 27 Feb 2008 22:02:13 +0100
Subject: [antlr-interest] ANTLR syntax bug with array return types
In-Reply-To: <"L80451C39F26F475bB3807189658D0329.1204137638.scalix.temporal-wave.com*"@MHS>
References: <fq4b60$c9q$1@ger.gmane.org>
	<"L80451C39F26F475bB3807189658D0329.1204137638.scalix.temporal-wave.com*"@MHS>
Message-ID: <fq4j4u$c99$1@ger.gmane.org>

Jim Idle wrote:
> In the very middle of the front page, there is a big text input box 
> marked 'search'. It uses site specific goggle searches.

Indeed I had missed that one: I was looking for a search box on the page 
describing the mailing lists.

Thanks,

-- O.L.


From kenneth.domino at domemtech.com  Wed Feb 27 12:43:35 2008
From: kenneth.domino at domemtech.com (Kenneth Domino)
Date: Wed, 27 Feb 2008 15:43:35 -0500
Subject: [antlr-interest] Conversion of Antlr v2 grammars to v3: tokens
	section for lexers.
Message-ID: <4202CF4B4F3840D38B130DE6FB7A2EF4@pc2008>

I'm trying to convert some Antlr version 2 grammars to work under Antlr 
version 3, using the "v2me" tool, the information in 
http://www.antlr.org/wiki/display/ANTLR3/Migrating+from+ANTLR+2+to+ANTLR+3#MigratingfromANTLR2toANTLR3-NewinANTLR3, 
and the old and new documentations.  But, I'm having some problems.

The following grammar worked under v2:

class test extends Lexer;

tokens {
 FOO = "foo";
 BAR = "bar";
}

VERB : "is";

This is converted by v3me to:

lexer grammar test;

tokens {
 FOO = 'foo';
 BAR = 'bar';
}

VERB : 'is';

Unfortunately, it looks like this is now illegal because I get Antlr v3 
error messages:

error(108): test.g:4:8: literals are illegal in lexer tokens{} section: 
'foo'
error(108): test.g:5:8: literals are illegal in lexer tokens{} section: 
'bar'

I can change the grammar by adding explicit productions for the literals:

lexer grammar test;

tokens {
 FOO;
 BAR;
}

VERB : 'is';
FOO : 'foo';
BAR : 'bar';

But, is this the only work around?  The only other possibility seems that I 
specify a combined lexer and parser as in:

grammar test;

tokens {
 FOO = 'foo';
 BAR = 'bar';
 VERB;
}

VERB : 'is';
f : FOO BAR VERB;


From bmeike at speakeasy.net  Wed Feb 27 13:19:32 2008
From: bmeike at speakeasy.net (bmeike at speakeasy.net)
Date: Wed, 27 Feb 2008 13:19:32 PST
Subject: [antlr-interest] Retaining comments
Message-ID: <1678.1204147172@speakeasy.net>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080227/337a650f/attachment-0001.html 

From gudnabrsam at yahoo.com  Wed Feb 27 13:22:39 2008
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Wed, 27 Feb 2008 13:22:39 -0800 (PST)
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <23C73E81-2FD1-4872-B0EA-1E032D5C7902@cs.usfca.edu>
Message-ID: <104825.41155.qm@web55107.mail.re4.yahoo.com>


--- Terence Parr <parrt at cs.usfca.edu> wrote:

> 
> On Feb 27, 2008, at 12:45 PM, Andy Tripp wrote:
> 
> > Hi Matt,
> >
> > Thanks. Yea, I was very hesitant to put that
> sentence in, as I  
> > wasn't sure it was
> > correct. I'd appreciate it if anyone could clarify
> this for me.
> 
> hi gang. A semantic predicate is a boolean
> expression that must be  
> true for the parse to pass over it; any kind of
> recognizer.  A gated  
> sem pred is one that forces alts to be turned on or
> off at run time.
> 
> A syn pred simply specifies the sytnactic context
> that must be true  
> for the parser (or lexer or tree parser) to pass. 
> I.e., if you see X,  
> then Y will match:
> 
> a : (X)=> Y
>     | ...
>     ;
> 

Wait--is that example literal?  In rule a, how could
next token X predict Y?  I -had- thought I understood
the syntactic predicate.  :(

-Matt

> preds order the alts. first one that matches wins.
> 
> Ter
> >
> >
> > Andy
> >
> > Matt Benson wrote:
> >>
> >> ?Syntactic Predicate" is just some "Symantic
> >> Predicate" that happens to be in a lexer
> >> rule rather than a parser rule.
> >>
> >>
> >
> 
> 



      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ 


From darien.hager at etelos-inc.com  Wed Feb 27 13:27:29 2008
From: darien.hager at etelos-inc.com (Darien Hager)
Date: Wed, 27 Feb 2008 13:27:29 -0800
Subject: [antlr-interest] Retaining comments
In-Reply-To: <20080227203030.B5AD711EE1A@www.antlr.org>
References: <601F15D4-F55A-4598-BCF4-5A477FF66BC0@speakeasy.net>
	<20080227203030.B5AD711EE1A@www.antlr.org>
Message-ID: <c8c997f40802271327j6a48488bp70a62a534824fcef@mail.gmail.com>

On 2/27/08, Gavin Lambert <antlr at mirality.co.nz> wrote:
>
> At 06:06 28/02/2008, Blake Meike wrote:
>   >Unfortunately, every call to the lexer action is called
>   >before any call to any parser action, as if the entire
>   >source file were converted to tokens, before any token
>   >is fed to the parser.
>
>
> Because that's exactly what does happen.
>
>
I originally had this same kind of assumption in my ongoing experience as a
newbie user. The combined grammar originally gave me a sort of mental model
that lexer rules were a special subset of parser rules, special because they
were the leafy tree endpoints that were actually checked against the raw
data as a given rule was invoked.

-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are not
the intended recipient, then this is notice that any use, disclosure,
dissemination, distribution or copying is strictly prohibited. If you have
received this message in error please contact the sender by reply mail and
destroy all copies of the original message.


This e-mail message, including attachments, may contain confidential information for the sole use of the intended recipient(s). If you are not the intended recipient, then this is notice that any use, disclosure, dissemination, distribution or copying is strictly prohibited.  If you have received this message in error please contact the sender by reply mail and destroy all copies of the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080227/737050d8/attachment.html 

From darien.hager at etelos-inc.com  Wed Feb 27 13:31:46 2008
From: darien.hager at etelos-inc.com (Darien Hager)
Date: Wed, 27 Feb 2008 13:31:46 -0800
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <104825.41155.qm@web55107.mail.re4.yahoo.com>
References: <23C73E81-2FD1-4872-B0EA-1E032D5C7902@cs.usfca.edu>
	<104825.41155.qm@web55107.mail.re4.yahoo.com>
Message-ID: <c8c997f40802271331g5292a126ua66206dc7ce3c972@mail.gmail.com>

On 2/27/08, Matt Benson <gudnabrsam at yahoo.com> wrote:
>
>
> --- Terence Parr <parrt at cs.usfca.edu> wrote:
>
> > A syn pred simply specifies the sytnactic context
> > that must be true
> > for the parser (or lexer or tree parser) to pass.
> > I.e., if you see X,
> > then Y will match:
> >
> > a : (X)=> Y
> >     | ...
> >     ;
> >
>
>
> Wait--is that example literal?  In rule a, how could
> next token X predict Y?  I -had- thought I understood
> the syntactic predicate.  :(
>

A shot in the dark: Maybe it's meant to be lowercase "y" as a rule? "X" (or
"x")could be the first token/subrule in rule "y", and X/x doesn't head up
any of the other alternatives?

-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are not
the intended recipient, then this is notice that any use, disclosure,
dissemination, distribution or copying is strictly prohibited. If you have
received this message in error please contact the sender by reply mail and
destroy all copies of the original message.


This e-mail message, including attachments, may contain confidential information for the sole use of the intended recipient(s). If you are not the intended recipient, then this is notice that any use, disclosure, dissemination, distribution or copying is strictly prohibited.  If you have received this message in error please contact the sender by reply mail and destroy all copies of the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080227/e0a586f2/attachment.html 

From monty at codetransform.com  Wed Feb 27 13:46:54 2008
From: monty at codetransform.com (Monty Zukowski)
Date: Wed, 27 Feb 2008 13:46:54 -0800
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <104825.41155.qm@web55107.mail.re4.yahoo.com>
References: <23C73E81-2FD1-4872-B0EA-1E032D5C7902@cs.usfca.edu>
	<104825.41155.qm@web55107.mail.re4.yahoo.com>
Message-ID: <73e8e3430802271346m1135d676ha8169420beb96f76@mail.gmail.com>

>  > A syn pred simply specifies the sytnactic context
>  > that must be true
>  > for the parser (or lexer or tree parser) to pass.
>  > I.e., if you see X,
>  > then Y will match:
>  >
>  > a : (X)=> Y
>  >     | ...
>  >     ;
>  >
>
>
> Wait--is that example literal?  In rule a, how could
>  next token X predict Y?  I -had- thought I understood
>  the syntactic predicate.  :(

You're right, that wouldn't work in a parser with a:(X)=>Y;

X could be a prefix of Y.  So if these are lexer rules, then we would
have something like

A: (X)=>Y
   | ...
  ;

fragment X:...;

Y: X Z;

Where X is enough to disambiguate to choose the rule Y.  Likewise in a
parser it could be

a:(X)=>y
 | ...
;

Monty

Monty

From jaluber at gmx.de  Wed Feb 27 14:09:51 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Wed, 27 Feb 2008 23:09:51 +0100
Subject: [antlr-interest] How to the generated code in the "catch"
 section ?
In-Reply-To: <2E91F09A8F13BE4BACAA46759CA499154B6967@hs-srv-01.horizonssoftware.com>
References: <2E91F09A8F13BE4BACAA46759CA499154B6967@hs-srv-01.horizonssoftware.com>
Message-ID: <47C5DFAF.1010004@gmx.de>

Ahmed Hamouda schrieb:
> Hi all,
> 
> I generated C# parser and lexer already but I have a small problem.
> 
> That I noticed that the generated parser has ?try and catch? for each 
> method but I can?t change in generated code in the ?catch? section 
> except by changing it by hand in the parser generated class.
> 
> Is there any way to change it in the Antlr before the generation of code ?

I don't know if ANTLR provides already an option for this, but if you 
build yourself an ANTLR jar then you can try to modify the file 
CSharp.stg yourself. I don't know what you have to change where. The 
problem with this method is that you to manually update the CSharp.stg 
for every new release, as the development may necessitate further changes.

Johannes

From darien.hager at etelos-inc.com  Wed Feb 27 15:12:51 2008
From: darien.hager at etelos-inc.com (Darien Hager)
Date: Wed, 27 Feb 2008 15:12:51 -0800
Subject: [antlr-interest] How to the generated code in the "catch"
	section ?
In-Reply-To: <47C5DFAF.1010004@gmx.de>
References: <2E91F09A8F13BE4BACAA46759CA499154B6967@hs-srv-01.horizonssoftware.com>
	<47C5DFAF.1010004@gmx.de>
Message-ID: <c8c997f40802271512q180b6d55pe0b9f767c49aeed6@mail.gmail.com>

I thought you could suffix a rule definition with an catch{...} block. I
know there was something like that that at least worked when building for
the Java runtime.

http://www.antlr.org/wiki/display/ANTLR3/Grammars

-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are not
the intended recipient, then this is notice that any use, disclosure,
dissemination, distribution or copying is strictly prohibited. If you have
received this message in error please contact the sender by reply mail and
destroy all copies of the original message.


This e-mail message, including attachments, may contain confidential information for the sole use of the intended recipient(s). If you are not the intended recipient, then this is notice that any use, disclosure, dissemination, distribution or copying is strictly prohibited.  If you have received this message in error please contact the sender by reply mail and destroy all copies of the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080227/10d4fec5/attachment.html 

From darien.hager at etelos-inc.com  Wed Feb 27 15:15:24 2008
From: darien.hager at etelos-inc.com (Darien Hager)
Date: Wed, 27 Feb 2008 15:15:24 -0800
Subject: [antlr-interest] How to the generated code in the "catch"
	section ?
In-Reply-To: <c8c997f40802271512q180b6d55pe0b9f767c49aeed6@mail.gmail.com>
References: <2E91F09A8F13BE4BACAA46759CA499154B6967@hs-srv-01.horizonssoftware.com>
	<47C5DFAF.1010004@gmx.de>
	<c8c997f40802271512q180b6d55pe0b9f767c49aeed6@mail.gmail.com>
Message-ID: <c8c997f40802271515r61240865j505a4b2a41005285@mail.gmail.com>

On 2/27/08, Darien Hager <darien.hager at etelos-inc.com> wrote:
>
> I thought you could suffix a rule definition with an catch{...} block. I
> know there was something like that that at least worked when building for
> the Java runtime.
>

Oops. I think it may have been
@rulecatch{...} right after the parser rule definition.

-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are not
the intended recipient, then this is notice that any use, disclosure,
dissemination, distribution or copying is strictly prohibited. If you have
received this message in error please contact the sender by reply mail and
destroy all copies of the original message.


This e-mail message, including attachments, may contain confidential information for the sole use of the intended recipient(s). If you are not the intended recipient, then this is notice that any use, disclosure, dissemination, distribution or copying is strictly prohibited.  If you have received this message in error please contact the sender by reply mail and destroy all copies of the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080227/96043a91/attachment-0001.html 

From parrt at cs.usfca.edu  Wed Feb 27 15:48:34 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 27 Feb 2008 15:48:34 -0800
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <73e8e3430802271346m1135d676ha8169420beb96f76@mail.gmail.com>
References: <23C73E81-2FD1-4872-B0EA-1E032D5C7902@cs.usfca.edu>
	<104825.41155.qm@web55107.mail.re4.yahoo.com>
	<73e8e3430802271346m1135d676ha8169420beb96f76@mail.gmail.com>
Message-ID: <59EB267D-6F8B-4D18-913C-FF901C1C47FF@cs.usfca.edu>

Sorry guys. I meant X as a standin for "stuff" and Y also.  I've  
written vast quantities on this topic.  I'm sure a simple web search  
(or looking at my book...90 pages of stuff on this) will help.

Ter

From gudnabrsam at yahoo.com  Wed Feb 27 15:54:07 2008
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Wed, 27 Feb 2008 15:54:07 -0800 (PST)
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <59EB267D-6F8B-4D18-913C-FF901C1C47FF@cs.usfca.edu>
Message-ID: <342122.80836.qm@web55114.mail.re4.yahoo.com>

When cheap me cracks open my cobweb-infested wallet
for this book you keep pushing, it'd better be
life-altering, is all I can say... ;P

-Matt

--- Terence Parr <parrt at cs.usfca.edu> wrote:

> Sorry guys. I meant X as a standin for "stuff" and Y
> also.  I've  
> written vast quantities on this topic.  I'm sure a
> simple web search  
> (or looking at my book...90 pages of stuff on this)
> will help.
> 
> Ter
> 



      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ 


From stevagewp at gmail.com  Wed Feb 27 15:57:58 2008
From: stevagewp at gmail.com (Steve Bennett)
Date: Thu, 28 Feb 2008 10:57:58 +1100
Subject: [antlr-interest] Suppressing spurious warnings
In-Reply-To: <47c5c5ec.1287460a.157a.ffffb376SMTPIN_ADDED@mx.google.com>
References: <b8ceeef70802270531g44b39274vb7f7d12ad20ca542@mail.gmail.com>
	<47c5c5ec.1287460a.157a.ffffb376SMTPIN_ADDED@mx.google.com>
Message-ID: <b8ceeef70802271557m1e3e2bf2qbe3f0f6a121f3613@mail.gmail.com>

On 2/28/08, Gavin Lambert <antlr at mirality.co.nz> wrote:
> You can suppress the warning by removing PRE_OPEN from the tokens
>  block and adding a fragment rule for it instead:
>
>  fragment PRE_OPEN: ' ';

Ok, but that's still kind of annoying: I have to add fake code in
order to suppress a warning. Since I want to use this grammar as
documentation for the language, any code that exists just to make
ANTLR shut up while not adding any information about the language is a
Bad Thing.

No chance of an options { suppress_warning_undefined_token; } ?

> At present, the only way to remove these warnings is to rewrite
>  your grammar to remove the ambiguity.  Note that while ANTLR often
>  does the right thing anyway, you can't just assume that.  You
>  should always either rewrite the grammar or test its behaviour
>  thoroughly.  Or both.

Why can't I assume that ANTLR will do the correct thing? Is there an
example of somewhere where it does the unexpected thing? I do plan on
testing thoroughly, btw.

Also, when you say "at present", is there a chance of that warning
suppression being added?

> True left-recursion is fatal to ANTLR, so must be corrected.


>  I have yet to see a case where ignoring this warning is a good
>  idea.

I'm sure you're right, I just can't find the source of it.

I notice also that for my grammar with backtrack=true, I don't get
that warning in ANTL 3.0.1, but in ANTLR 3.1b1 it becomes a fatal
error:

error(10):  internal error:
org.antlr.tool.Grammar.createLookaheadDFA(Grammar.java:1138): could
not even do k=1 for decision 20; reason: timed out (>1000ms)

warning(205): mediawiki12.g:885:44: ANTLR could not analyze this
decision in rule bold_and_italics; often this is because of recursive
rule references visible from the left edge of alternatives.  ANTLR
will re-analyze the decision with a fixed lookahead of k=1.  Consider
using "options {k=1;}" for that decision and possibly adding a
syntactic predicate.


Here's the code:
bold_and_italics options {backtrack=false;}:
     {textis("''") && text_italics}? => APOSTROPHES
{text_italics=false; System.out.print("</i>"); } ->
^(I_OFF)
    |{textis("''") && !text_italics}? => APOSTROPHES
{text_italics=true; System.out.print("<i>"); }   ->            ^(I_ON)
    |{textis("'''") && text_bold}? => APOSTROPHES    {text_bold=false;
System.out.print("</b>"); }    ->            ^(B_OFF)
    |{textis("'''") && !text_bold}? => APOSTROPHES   {text_bold=true;
System.out.print("<b>"); }      ->            ^(B_ON)
    |{textis("''''") && text_bold}? => APOSTROPHES   {text_bold=false;
System.out.print("'</b>"); }   -> APOSTROPHE ^(B_OFF)
    |{textis("''''") && !text_bold}? => APOSTROPHES  {text_bold=true;
System.out.print("'<b>"); }     -> APOSTROPHE ^(B_ON)
    |{textis("'''''") && text_bold && text_italics}? =>  APOSTROPHES
{text_bold=false; text_italics=false; System.out.print("'</b> </i>");}
-> ^(B_OFF) ^(I_OFF)
    |{textis("'''''") && text_bold && !text_italics}? => APOSTROPHES
{text_bold=false; text_italics=true; System.out.print("'</b> <i>");}
-> ^(B_OFF) ^(I_ON)
    |{textis("'''''") && !text_bold && text_italics}? => APOSTROPHES
{text_bold=true; text_italics=false; System.out.print("'<b> </i>"); }
-> ^(B_ON)  ^(I_OFF)
    |{textis("'''''") && !text_bold && !text_italics}? =>APOSTROPHES
{text_bold=true; text_italics=true; System.out.print("'<b> <i>");}
-> ^(B_ON)  ^(I_ON)
    // Hopefully we never get more than 6 or less than 2. The lexer
should take care of that.
    ;

Steve

From parrt at cs.usfca.edu  Wed Feb 27 16:08:20 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 27 Feb 2008 16:08:20 -0800
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <342122.80836.qm@web55114.mail.re4.yahoo.com>
References: <342122.80836.qm@web55114.mail.re4.yahoo.com>
Message-ID: <CB664C56-0FB5-427C-A466-7E14FC461DA4@cs.usfca.edu>


On Feb 27, 2008, at 3:54 PM, Matt Benson wrote:

> When cheap me cracks open my cobweb-infested wallet
> for this book you keep pushing, it'd better be
> life-altering, is all I can say... ;P

Best $24 you'll ever spend legally ;)

Ter

From matthieu.riou at gmail.com  Wed Feb 27 16:09:57 2008
From: matthieu.riou at gmail.com (Matthieu Riou)
Date: Wed, 27 Feb 2008 16:09:57 -0800
Subject: [antlr-interest] Null variable value for tree grammar rule variables
Message-ID: <fbdc6a970802271609h774765bg5e919b20c80c947a@mail.gmail.com>

Hi,

I have a tree grammar with the following rule:

assign  :       ^(ASSIGN lv=(path_expr) rv=(rvalue)) { builder.build(
OAssign.class, $BPELScope::oscope, $Parent::activity, $lv, $rv); };

In the above method call both $lv and $rv are null. When I check the
generated class the two local variables lv and rv are properly defined but
never assigned to. Note that I've only observed this behavior when the
variables are set as being the tree resulting from a subrule, not for a
plain token.

Now if I take the generated class and add myself the variables assignment in
the assign() method corresponding to that rule like so:

lv=(Tree)input.LT(1);
rv=(Tree)input.LT(1);

It just works perfectly.

As a side note if I omit the parentheses around the assigned rule names
(like ASSIGN lv=path_expr rv=rvalue) the generated class doesn't compile at
all as the variables are declared with:

        void lv=null;
        void rv=null;

Bug or known limitation?

Thanks!
Matthieu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080227/a0bae65e/attachment.html 

From gudnabrsam at yahoo.com  Wed Feb 27 16:12:02 2008
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Wed, 27 Feb 2008 16:12:02 -0800 (PST)
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <CB664C56-0FB5-427C-A466-7E14FC461DA4@cs.usfca.edu>
Message-ID: <532201.83021.qm@web55103.mail.re4.yahoo.com>


--- Terence Parr <parrt at cs.usfca.edu> wrote:

> 
> On Feb 27, 2008, at 3:54 PM, Matt Benson wrote:
> 
> > When cheap me cracks open my cobweb-infested
> wallet
> > for this book you keep pushing, it'd better be
> > life-altering, is all I can say... ;P
> 
> Best $24 you'll ever spend legally ;)

Can't think of anything I want to do that's illegal
and that cheap, either.  But quit kidding--like I'm
going to be able to sleep if I don't get the hard copy
AND the PDF...

-Matt

> 
> Ter
> 



      ____________________________________________________________________________________
Looking for last minute shopping deals?  
Find them fast with Yahoo! Search.  http://tools.search.yahoo.com/newsearch/category.php?category=shopping

From lefevrol at yahoo.com  Wed Feb 27 17:03:34 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Thu, 28 Feb 2008 02:03:34 +0100
Subject: [antlr-interest] How to the generated code in the "catch"
	section ?
In-Reply-To: <c8c997f40802271515r61240865j505a4b2a41005285@mail.gmail.com>
References: <2E91F09A8F13BE4BACAA46759CA499154B6967@hs-srv-01.horizonssoftware.com>	<47C5DFAF.1010004@gmx.de>	<c8c997f40802271512q180b6d55pe0b9f767c49aeed6@mail.gmail.com>
	<c8c997f40802271515r61240865j505a4b2a41005285@mail.gmail.com>
Message-ID: <fq519e$t3k$1@ger.gmane.org>

Darien Hager wrote:
> Oops. I think it may have been 
> @rulecatch{...} right after the parser rule definition.

Yes, it's @rulecatch{} but it's very under-documented (only one mention in 
the book and very quick). It can be used as a global, that's for sure, but 
it is totally unclear whether and how it can be used at the method/rule 
level. This is something that could/should be fleshed out somewhere.

-- O.L.


From lefevrol at yahoo.com  Wed Feb 27 17:24:47 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Thu, 28 Feb 2008 02:24:47 +0100
Subject: [antlr-interest] How to the generated code in the "catch"
	section ?
In-Reply-To: <fq519e$t3k$1@ger.gmane.org>
References: <2E91F09A8F13BE4BACAA46759CA499154B6967@hs-srv-01.horizonssoftware.com>	<47C5DFAF.1010004@gmx.de>	<c8c997f40802271512q180b6d55pe0b9f767c49aeed6@mail.gmail.com>	<c8c997f40802271515r61240865j505a4b2a41005285@mail.gmail.com>
	<fq519e$t3k$1@ger.gmane.org>
Message-ID: <fq52h8$jv$1@ger.gmane.org>

Sorry, I was looking for "@rulecatch". Searching for "rulecatch" and 
reading the whole section shows that @rulecatch is used globally but
there is another option: "catch [RecognitionException re]" for doing
it at the rule level.

What confused me is that if you write, e.g.,

    @rulecatch { foo }

    rule
    @rulecatch { bar }
    : ... ;

ANTLR will accept it but ignore the second @rulecatch block. Shouldn't
it be an error?

-- O.L.


From admin at viagra.com  Wed Feb 27 20:18:53 2008
From: admin at viagra.com (admin at viagra.com)
Date: Wed, 27 Feb 2008 20:18:53 -0800 (PST)
Subject: [antlr-interest] February 80% OFF
Message-ID: <20080228082034.14924.qmail@I_>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080227/4accd55e/attachment.html 

From mark.edgeworth at scarletcode.co.uk  Thu Feb 28 01:40:38 2008
From: mark.edgeworth at scarletcode.co.uk (Mark Edgeworth)
Date: Thu, 28 Feb 2008 09:40:38 -0000
Subject: [antlr-interest] antlr-interest Digest, Vol 39, Issue 111
In-Reply-To: <mailman.20055.1204121410.2502.antlr-interest@antlr.org>
Message-ID: <000401c879ed$fa5abdc0$0300a8c0@chesterford>

Hi Olivier,

You could always wrap the List[] in a new class of your own, and use that as
the return type.  Something like:
public class ArrayOfLists {
    public List [] array;
}

You can then pass that around instead (you can accessors and mutators if you
need them).  OR, why not use an ArrayList instead, they are easier to use
than straight arrays in most places (of course this might raise an issue
with ArrayList<List> - is this allowable as a return by ANTLR?!)

Hope this helps,

Mark Edgeworth 
 
Incoras Solutions Ltd.

At 14:15 27/02/2008, Olivier Lefevre wrote:
 >Consider this tree grammar rule with Java output:
 >
 >    foo returns [List[] lists] <blah blah>
[...]
 >which is just wrong: the array-ness of lists (i.e., the [])
 >was thrown away. Is this is a deliberate limitation, where
 >is it documented?


From antlr at mirality.co.nz  Thu Feb 28 02:32:55 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 28 Feb 2008 23:32:55 +1300
Subject: [antlr-interest] Retaining comments
In-Reply-To: <c8c997f40802271327j6a48488bp70a62a534824fcef@mail.gmail.co
 m>
References: <601F15D4-F55A-4598-BCF4-5A477FF66BC0@speakeasy.net>
	<20080227203030.B5AD711EE1A@www.antlr.org>
	<c8c997f40802271327j6a48488bp70a62a534824fcef@mail.gmail.com>
Message-ID: <20080228103311.CD6CB11EAB2@www.antlr.org>

At 10:27 28/02/2008, Darien Hager wrote:
>I originally had this same kind of assumption in my ongoing 
>experience as a newbie user. The combined grammar originally gave 
>me a sort of mental model that lexer rules were a special subset 
>of parser rules, special because they were the leafy tree 
>endpoints that were actually checked against the raw data as a 
>given rule was invoked.

Yes, it does seem to be a common misunderstanding.  And some other 
parser generators do indeed work like that.  But ANTLR does a 
complete lex first before the parse begins.  (In fact you can do 
the lexing step all by itself if you want to, or conversely do the 
lexing manually and only use ANTLR to parse.  It's up to you.)


From antlr at mirality.co.nz  Thu Feb 28 02:35:42 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 28 Feb 2008 23:35:42 +1300
Subject: [antlr-interest] How to the generated code in the "catch"
 section ?
In-Reply-To: <c8c997f40802271512q180b6d55pe0b9f767c49aeed6@mail.gmail.co
 m>
References: <2E91F09A8F13BE4BACAA46759CA499154B6967@hs-srv-01.horizonssoftware.com>
	<47C5DFAF.1010004@gmx.de>
	<c8c997f40802271512q180b6d55pe0b9f767c49aeed6@mail.gmail.com>
Message-ID: <20080228103603.ABD9211EAFD@www.antlr.org>

At 12:12 28/02/2008, Darien Hager wrote:
>I thought you could suffix a rule definition with an catch{...} 
>block. I know there was something like that that at least worked 
>when building for the Java runtime.
>
><http://www.antlr.org/wiki/display/ANTLR3/Grammars>http://www.antlr.org/wiki/display/ANTLR3/Grammars

It's syntactically valid but last time I checked ANTLR3 didn't 
actually do anything with the catch blocks.  (ANTLR2 does support 
it, and ANTLR3 will support it, but I don't think it does yet.)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080228/132caaf1/attachment.html 

From antlr at mirality.co.nz  Thu Feb 28 02:41:35 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 28 Feb 2008 23:41:35 +1300
Subject: [antlr-interest] Null variable value for tree grammar rule
 variables
In-Reply-To: <fbdc6a970802271609h774765bg5e919b20c80c947a@mail.gmail.com
 >
References: <fbdc6a970802271609h774765bg5e919b20c80c947a@mail.gmail.com>
Message-ID: <20080228104152.CCDBB11EB00@www.antlr.org>

At 13:09 28/02/2008, Matthieu Riou wrote:
>assign  :       ^(ASSIGN lv=(path_expr) rv=(rvalue)) { 
>builder.build(OAssign.class, $BPELScope::oscope, 
>$Parent::activity, $lv, $rv); };
>
>In the above method call both $lv and $rv are null. When I check 
>the generated class the two local variables lv and rv are 
>properly defined but never assigned to. Note that I've only 
>observed this behavior when the variables are set as being the 
>tree resulting from a subrule, not for a plain token.

This rings a bell.  I think if you remove the parentheses, the 
problem should go away.  ie. change the rule to this:

assign : ^(ASSIGN lv=path_expr rv=rvalue) { 
builder.build(OAssign.class, $BPELScope::oscope, 
$Parent::activity, $lv, $rv); };

The problem is that anything in parentheses is a block, and you 
can't assign a name to a block, only to a single rule/token.


From antlr at jazillian.com  Thu Feb 28 08:19:20 2008
From: antlr at jazillian.com (Andy Tripp)
Date: Thu, 28 Feb 2008 11:19:20 -0500
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <f0fcc6820802271250s8f0f6fdy3825aeebedbd09e@mail.gmail.com>
References: <47C597C3.30805@jazillian.com>
	<f0fcc6820802271250s8f0f6fdy3825aeebedbd09e@mail.gmail.com>
Message-ID: <47C6DF08.80107@jazillian.com>

Mark Volkmann wrote:
>
> Any chance you could convert the Powerpoint to PDF and make that available?
>   
PDF version now available: 
http://www.jazillian.com/antlrTalk/introToAntlr.pdf
Thanks to Marco Neumann for providing this.

Andy

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080228/7ed01090/attachment.html 

From antlr at jazillian.com  Thu Feb 28 08:23:35 2008
From: antlr at jazillian.com (Andy Tripp)
Date: Thu, 28 Feb 2008 11:23:35 -0500
Subject: [antlr-interest] another ANTLR presentation
In-Reply-To: <f0fcc6820802271257x122b5117t4dbb22936b398e19@mail.gmail.com>
References: <f0fcc6820802271257x122b5117t4dbb22936b398e19@mail.gmail.com>
Message-ID: <47C6E007.7030106@jazillian.com>

Mark Volkmann wrote:
> I'm giving a talk on ANTLR 3 at the Gateway Software Symposium in St.
> Louis on March 9. It's part of the No Fluff Just Stuff tour. My slides
> and example code are available at
> http://www.ociweb.com/mark/programming/ANTLR3.html. Feedback is
> welcomed!
>
>   
Very nice. Makes mine look like crap ;)

Where's the PDF version? :)

Andy

From maulattu at yahoo.it  Thu Feb 28 08:36:29 2008
From: maulattu at yahoo.it (maulattu)
Date: Thu, 28 Feb 2008 17:36:29 +0100 (CET)
Subject: [antlr-interest] How to define a FLOAT number
Message-ID: <459684.12270.qm@web26011.mail.ukl.yahoo.com>

Hello!
I need to define a rule in order to recognize a float number. For example, this rule must recognize as float the following numbers:
1.0
22
i.e., the 2nd number is a float without the dot and the decimal part.
I don't need to recognize float number as "mantix+EXPexponent" or the like, just a simple float number as it can be written in a C/C++ program.
I wrote this simple grammar:
-------------------------------
grammar float_recognizer;
offset
    :
        FLOAT
    ;
DIGIT
    :    '0'..'9'
    ;
INT 
    :    DIGIT+
    ;
FLOAT
    :    INT ('.' INT)?
    ;
-------------------------------

This grammar recognizes "1.0" and "0.0", but it fails when it receives as input "1" or a number without the dot and the decimal part.
How can it be possible since the dot and the decimal part are defined as optional (I used the "?" in the FLOAT rule)?

A lot of thanks in advance guys!

Mau


       
---------------------------------

---------------------------------
L'email della prossima generazione? Puoi averla con la nuova Yahoo! Mail
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080228/522df06b/attachment.html 

From maulattu at yahoo.it  Thu Feb 28 09:08:37 2008
From: maulattu at yahoo.it (maulattu)
Date: Thu, 28 Feb 2008 18:08:37 +0100 (CET)
Subject: [antlr-interest] How to define a FLOAT number
Message-ID: <861677.86159.qm@web26012.mail.ukl.yahoo.com>

Hello, here is a little surprise..
With the following grammar, the input "1" is not recognized as float (note that the rule DIGIT isn't used):
------------------------------
grammar float_recon;
offset
    :
        FLOAT
    ;
DIGIT
    :    '0'..'9'
    ;
FLOAT
    :
        ('0'..'9')+ ('.' (('0'..'9')+))?
    ;
------------------------------


Conversely, with this one the input "1" is recognized as float:
------------------------------
 grammar float_recon;
 offset
     :
         FLOAT
     ;
 FLOAT
      :
          ('0'..'9')+ ('.' (('0'..'9')+))?
      ;
 DIGIT
     :    '0'..'9'
     ;
 ------------------------------

How can it be possible? Is it related to this bug?
http://www.antlr.org:8888/browse/ANTLR-41

I'm using ANTLRWorks 1.1.7 and 1.1.5 some days ago...

Bye!

       
---------------------------------

---------------------------------
L'email della prossima generazione? Puoi averla con la nuova Yahoo! Mail
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080228/47e3f8ca/attachment.html 

From antlr at jazillian.com  Thu Feb 28 09:38:52 2008
From: antlr at jazillian.com (Andy Tripp)
Date: Thu, 28 Feb 2008 12:38:52 -0500
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <23C73E81-2FD1-4872-B0EA-1E032D5C7902@cs.usfca.edu>
References: <438878.12507.qm@web55109.mail.re4.yahoo.com>
	<47C5CC07.1050900@jazillian.com>
	<23C73E81-2FD1-4872-B0EA-1E032D5C7902@cs.usfca.edu>
Message-ID: <47C6F1AC.5030609@jazillian.com>

Terence Parr wrote:
>
> A syn pred simply specifies the sytnactic context that must be true 
> for the parser (or lexer or tree parser) to pass.  
Ah, OK. So my slide is wrong.

I guess I tend to wrongly equate "syntax" with a lexer and "semantics" 
with a parser.

So a syntactic predicate can apply to lexer, parser, or treewalker.
And I guess a syntactic predicate is a specific kind of semantic 
predicate. Whereas a sem pred is
any boolean expression that must be true to match, a syn pred is one 
that simply says
"look ahead and see if we'll match X".




From gudnabrsam at yahoo.com  Thu Feb 28 09:41:02 2008
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Thu, 28 Feb 2008 09:41:02 -0800 (PST)
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <47C6F1AC.5030609@jazillian.com>
Message-ID: <94421.74197.qm@web55114.mail.re4.yahoo.com>


--- Andy Tripp <antlr at jazillian.com> wrote:

> Terence Parr wrote:
> >
> > A syn pred simply specifies the sytnactic context
> that must be true 
> > for the parser (or lexer or tree parser) to pass. 
> 
> Ah, OK. So my slide is wrong.
> 
> I guess I tend to wrongly equate "syntax" with a
> lexer and "semantics" 
> with a parser.
> 
> So a syntactic predicate can apply to lexer, parser,
> or treewalker.
> And I guess a syntactic predicate is a specific kind
> of semantic 
> predicate. Whereas a sem pred is
> any boolean expression that must be true to match, a
> syn pred is one 
> that simply says
> "look ahead and see if we'll match X".

I don't think it's correct to say that a syntactic
predicate is a type of semantic predicate.  I think
the nomenclature here directly reflects the difference
between syntax and semantics:  respectively, the
legality of the communication medium vs. the
sensicality (?) of the content.

Opinions?  Yea/nay?

-Matt

> 
> 
> 
> 



      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ 


From matthieu.riou at gmail.com  Thu Feb 28 10:06:56 2008
From: matthieu.riou at gmail.com (Matthieu Riou)
Date: Thu, 28 Feb 2008 10:06:56 -0800
Subject: [antlr-interest] Null variable value for tree grammar rule
	variables
In-Reply-To: <47c68ff1.24bc720a.6471.ffffadfbSMTPIN_ADDED@mx.google.com>
References: <fbdc6a970802271609h774765bg5e919b20c80c947a@mail.gmail.com>
	<47c68ff1.24bc720a.6471.ffffadfbSMTPIN_ADDED@mx.google.com>
Message-ID: <fbdc6a970802281006r2efe6f3bn7b2942d2ba6bcbb5@mail.gmail.com>

But as I mentioned, when I remove the parentheses, the generated variables
declarations look like:

        void lv=null;
        void rv=null;

And the Java compiler doesn't really like it...

Thanks,
Matthieu

On Thu, Feb 28, 2008 at 2:41 AM, Gavin Lambert <antlr at mirality.co.nz> wrote:

> At 13:09 28/02/2008, Matthieu Riou wrote:
> >assign  :       ^(ASSIGN lv=(path_expr) rv=(rvalue)) {
> >builder.build(OAssign.class, $BPELScope::oscope,
> >$Parent::activity, $lv, $rv); };
> >
> >In the above method call both $lv and $rv are null. When I check
> >the generated class the two local variables lv and rv are
> >properly defined but never assigned to. Note that I've only
> >observed this behavior when the variables are set as being the
> >tree resulting from a subrule, not for a plain token.
>
> This rings a bell.  I think if you remove the parentheses, the
> problem should go away.  ie. change the rule to this:
>
> assign : ^(ASSIGN lv=path_expr rv=rvalue) {
> builder.build(OAssign.class, $BPELScope::oscope,
> $Parent::activity, $lv, $rv); };
>
> The problem is that anything in parentheses is a block, and you
> can't assign a name to a block, only to a single rule/token.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080228/4089d75f/attachment-0001.html 

From parrt at cs.usfca.edu  Thu Feb 28 10:07:03 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 28 Feb 2008 10:07:03 -0800
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <94421.74197.qm@web55114.mail.re4.yahoo.com>
References: <94421.74197.qm@web55114.mail.re4.yahoo.com>
Message-ID: <18B25545-D144-4503-94C9-9F8D76D11A41@cs.usfca.edu>


On Feb 28, 2008, at 9:41 AM, Matt Benson wrote:

>
> --- Andy Tripp <antlr at jazillian.com> wrote:
>
>> Terence Parr wrote:
>>>
>>> A syn pred simply specifies the sytnactic context
>> that must be true
>>> for the parser (or lexer or tree parser) to pass.
>>
>> Ah, OK. So my slide is wrong.
>>
>> I guess I tend to wrongly equate "syntax" with a
>> lexer and "semantics"
>> with a parser.
>>
>> So a syntactic predicate can apply to lexer, parser,
>> or treewalker.
>> And I guess a syntactic predicate is a specific kind
>> of semantic
>> predicate. Whereas a sem pred is
>> any boolean expression that must be true to match, a
>> syn pred is one
>> that simply says
>> "look ahead and see if we'll match X".
>
> I don't think it's correct to say that a syntactic
> predicate is a type of semantic predicate.  I think
> the nomenclature here directly reflects the difference
> between syntax and semantics:  respectively, the
> legality of the communication medium vs. the
> sensicality (?) of the content.
>
> Opinions?  Yea/nay?
>
> -Matt

Syn preds are actually impl. as sem preds as Andy says.  The diff is  
as you say syntax vs semantics (at least by intention)

Ter

From antlr at jazillian.com  Thu Feb 28 10:39:44 2008
From: antlr at jazillian.com (Andy Tripp)
Date: Thu, 28 Feb 2008 13:39:44 -0500
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <94421.74197.qm@web55114.mail.re4.yahoo.com>
References: <94421.74197.qm@web55114.mail.re4.yahoo.com>
Message-ID: <47C6FFF0.10701@jazillian.com>

Matt Benson wrote:
>
> I don't think it's correct to say that a syntactic
> predicate is a type of semantic predicate.  I think
> the nomenclature here directly reflects the difference
> between syntax and semantics:  respectively, the
> legality of the communication medium vs. the
> sensicality (?) of the content.
I don't think that's right. When we have a syntactic predicate:
(X) => Y
...it's not saying anything about the legality of the input nor
whether X is semantically legal.

With the traditional case of just a lexer and a parser, syntax is
"how does the input characters sequence map to a Token stream?"
And semantics is "how does the input Token stream map to an AST"?

Terrence has this general mechanism that he's calling "predicates"
which checks the structure of the input. That input can be a stream
of characters (for lexer), tokens (for parser), or ASTs for treewalker.

Now that I think about it, maybe a better name for "syntactic predicate"
would be "input pattern predicate" or something like that. The term
"syntactic", to me, is a bit misleading because it makes
me think of input characters.

Saying "my treewalker has a
syntactic predicate, which of course checks the shape of the input
AST" seems a bit odd. I may just be stuck in an old way of thinking,
but I just checked dictionary.com and wikipedia, and they're agreeing
with me :)

Andy

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080228/133646a4/attachment.html 

From gudnabrsam at yahoo.com  Thu Feb 28 10:50:31 2008
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Thu, 28 Feb 2008 10:50:31 -0800 (PST)
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <47C6FFF0.10701@jazillian.com>
Message-ID: <826696.902.qm@web55109.mail.re4.yahoo.com>


--- Andy Tripp <antlr at jazillian.com> wrote:

> Matt Benson wrote:
> >
> > I don't think it's correct to say that a syntactic
> > predicate is a type of semantic predicate.  I
> think
> > the nomenclature here directly reflects the
> difference
> > between syntax and semantics:  respectively, the
> > legality of the communication medium vs. the
> > sensicality (?) of the content.
> I don't think that's right. When we have a syntactic
> predicate:
> (X) => Y
> ...it's not saying anything about the legality of
> the input nor
> whether X is semantically legal.
> 
> With the traditional case of just a lexer and a
> parser, syntax is
> "how does the input characters sequence map to a
> Token stream?"
> And semantics is "how does the input Token stream
> map to an AST"?
> 
> Terrence has this general mechanism that he's
> calling "predicates"
> which checks the structure of the input. That input
> can be a stream
> of characters (for lexer), tokens (for parser), or
> ASTs for treewalker.
> 
> Now that I think about it, maybe a better name for
> "syntactic predicate"
> would be "input pattern predicate" or something like
> that. The term
> "syntactic", to me, is a bit misleading because it
> makes
> me think of input characters.
> 
> Saying "my treewalker has a
> syntactic predicate, which of course checks the
> shape of the input
> AST" seems a bit odd. I may just be stuck in an old
> way of thinking,
> but I just checked dictionary.com and wikipedia, and
> they're agreeing
> with me :)

I'm not sure what entries you've checked, so I'm not
sure what in particular on dictionary.com/wikipedia is
in agreement with you.  I think we're ultimately on
the same page, but my (and I think Ter's)
understanding of the syntax issue is that a lexer sees
syntax in terms of characters, while a parser sees
syntax in terms of tokens.  You just have to expand
your definitions a little.  A good example might be in
the case of e.g. a Java parser.  Let's say, at an
arbitrary point in the parse, the following token
sequence is a simple, syntactically valid, option:

DOT IDENTIFIER LPAREN RPAREN

We know this token sequence represents a no-arg method
call, right?  But in the case of a simple interpreter
(for instant gratification wrt semantic predicates)
the semantic check would involve checking whether the
IDENTIFIER specified is actually resolvable to an
existing no-arg method on whatever object is active in
our current context.

That's how I see it, anyway.

-Matt

> 
> Andy
> 
> 



      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ 


From parrt at cs.usfca.edu  Thu Feb 28 11:23:15 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 28 Feb 2008 11:23:15 -0800
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <47C6FFF0.10701@jazillian.com>
References: <94421.74197.qm@web55114.mail.re4.yahoo.com>
	<47C6FFF0.10701@jazillian.com>
Message-ID: <26FD02BA-4E91-4A56-B637-48053590E6ED@cs.usfca.edu>


On Feb 28, 2008, at 10:39 AM, Andy Tripp wrote:

> Matt Benson wrote:
>> I don't think it's correct to say that a syntactic
>> predicate is a type of semantic predicate.  I think
>> the nomenclature here directly reflects the difference
>> between syntax and semantics:  respectively, the
>> legality of the communication medium vs. the
>> sensicality (?) of the content.
> I don't think that's right. When we have a syntactic predicate:
> (X) => Y
> ...it's not saying anything about the legality of the input nor
> whether X is semantically legal.
>
> With the traditional case of just a lexer and a parser, syntax is
> "how does the input characters sequence map to a Token stream?"
> And semantics is "how does the input Token stream map to an AST"?

syntax is the grammatical structure. Semantics deals with the symbols  
(IDs).

int x = "foo";

is syntactically ok but semantically wrong.

> Terrence has this general mechanism that he's calling "predicates"
> which checks the structure of the input. That input can be a stream
> of characters (for lexer), tokens (for parser), or ASTs for  
> treewalker.
>
> Now that I think about it, maybe a better name for "syntactic  
> predicate"
> would be "input pattern predicate" or something like that. The term
> "syntactic", to me, is a bit misleading because it makes
> me think of input characters.

why?  i've never seen nor heard this way of thinking about it.

> Saying "my treewalker has a
> syntactic predicate, which of course checks the shape of the input
> AST" seems a bit odd.

Not sure why.

> I may just be stuck in an old way of thinking,
> but I just checked dictionary.com and wikipedia, and they're agreeing
> with me :)

not possible.  syntax is grammatical structure.  i wrote the sem pred  
wikiped things so they must agree with me ;)

Ter

From alexander at gaengel.de  Thu Feb 28 12:00:44 2008
From: alexander at gaengel.de (=?ISO-8859-1?Q?Alexander_G=E4ngel?=)
Date: Thu, 28 Feb 2008 21:00:44 +0100
Subject: [antlr-interest] How to define a FLOAT number
In-Reply-To: <861677.86159.qm@web26012.mail.ukl.yahoo.com>
References: <861677.86159.qm@web26012.mail.ukl.yahoo.com>
Message-ID: <47C712EC.2090101@gaengel.de>

This should do it

Alexander

start    :    (Float|UINT)+ EOF;

Float    :d=UINT
    (
           (DOT UINT)=>(DOT UINT)
           |{ $type = UINT; }
            )
            ;
           
DOT    :'.';           
fragment
DIGIT_10    :'0'..'9' ;
fragment
UINT    :DIGIT_10+ ;

maulattu schrieb:
> Hello, here is a little surprise..
> With the following grammar, the input "1" is not recognized as float 
> (note that the rule DIGIT isn't used):
> ------------------------------
> grammar float_recon;
> offset
>     :
>         FLOAT
>     ;
> DIGIT
>     :    '0'..'9'
>     ;
> FLOAT
>     :
>         ('0'..'9')+ ('.' (('0'..'9')+))?
>     ;
> ------------------------------
>
>
> Conversely, with this one the input "1" is recognized as float:
> ------------------------------
> grammar float_recon;
> offset
>     :
>         FLOAT
>     ;
> FLOAT
>     :
>         ('0'..'9')+ ('.' (('0'..'9')+))?
>     ;
> DIGIT
>     :    '0'..'9'
>     ;
> ------------------------------
>
> How can it be possible? Is it related to this bug?
> http://www.antlr.org:8888/browse/ANTLR-41
>
> I'm using ANTLRWorks 1.1.7 and 1.1.5 some days ago...
>
> Bye!
>
> ------------------------------------------------------------------------
> ------------------------------------------------------------------------
> L'email della prossima generazione? Puoi averla con la nuova Yahoo! 
> Mail 
> <http://us.rd.yahoo.com/mail/it/taglines/hotmail/nowyoucan/nextgen/*http://it.docs.yahoo.com/nowyoucan.html> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080228/263a7b29/attachment.html 

From antlr at jazillian.com  Thu Feb 28 12:33:45 2008
From: antlr at jazillian.com (Andy Tripp)
Date: Thu, 28 Feb 2008 15:33:45 -0500
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <26FD02BA-4E91-4A56-B637-48053590E6ED@cs.usfca.edu>
References: <94421.74197.qm@web55114.mail.re4.yahoo.com>
	<47C6FFF0.10701@jazillian.com>
	<26FD02BA-4E91-4A56-B637-48053590E6ED@cs.usfca.edu>
Message-ID: <47C71AA9.1090908@jazillian.com>

Terence Parr wrote:
>
> syntax is the grammatical structure. Semantics deals with the symbols 
> (IDs).
>
> int x = "foo";
>
> is syntactically ok but semantically wrong.
That example illustrates the problem well.
You mean that to the *parser*, the input is invalid.
To the *lexer*, it's symantically right.

So I think the "syntactic"/"semantic" distinction is orthogonal to the issue
of whether input (to a lexer, parser, or treewalker) is valid.
Whether the example you gave (or any example) is syntactically or
semantically valid all depends on the lexer, parser, or treewalker.
>
>> Terrence has this general mechanism that he's calling "predicates"
>> which checks the structure of the input. That input can be a stream
>> of characters (for lexer), tokens (for parser), or ASTs for treewalker.
>>
>> Now that I think about it, maybe a better name for "syntactic predicate"
>> would be "input pattern predicate" or something like that. The term
>> "syntactic", to me, is a bit misleading because it makes
>> me think of input characters.
>
> why?  i've never seen nor heard this way of thinking about it.
http://dictionary.reference.com/browse/syntax:
4.Computers. the grammatical rules and structural patterns governing the 
ordered use of appropriate words and symbols for issuing commands, 
writing code, etc., in a particular software application or programming 
language.

http://en.wikipedia.org/wiki/Syntax:
...study of the rules that govern the structure of sentences 
<http://en.wikipedia.org/wiki/Sentence>...

Every time I've ever heard anyone talking about "syntax" they were talking
about the input string itself.
>
>> Saying "my treewalker has a
>> syntactic predicate, which of course checks the shape of the input
>> AST" seems a bit odd.
>
> Not sure why.
Because most people (including ANTLR users, I think) would not say that
a treewalker is doing any syntactic checking. They'd say it's checking 
the structure
of the AST.
>
>> I may just be stuck in an old way of thinking,
>> but I just checked dictionary.com and wikipedia, and they're agreeing
>> with me :)
>
> not possible.  syntax is grammatical structure.  i wrote the sem pred 
> wikiped things so they must agree with me ;)
Looks like you wrote the syntactic predicate wikipedia entry, but the
semantic predicate entry doesn't exist.
I guess you coined the term "syntactic predicate", so you can have it 
mean whatever you want it to.
I just think your definition goes way beyond the dictionary definition 
and common usage of "syntax".

The sentence: "Go!" could cause either valid or invalid input to either 
a lexer, parser, or treewalker.
If you want to consider each one's input to be its "syntax", then we have:

lexer syntax is whether the chars are valid (whether an output 
Tokenstream can be created)
parser syntax is whether the token stream is valid (whether an output 
AST can be created)
treewalker syntax is whether the AST is valid

You know all that of course, and I'm clear on what you mean by "syntax".
The point is that anyone might say that sentence is syntactically valid,
and we'd all know what they mean (as you did above). And that meaning 
corresponds only
to the parser (and perhaps lexer) input. People would consider "Go!" to 
be syntactically correct, regardless of whether
a treewalker can handle the AST produced from it.

On the first page of your Tree Grammars chapter, you refer to checking 
the input as:
...validate tree structure...
...write a tree walker that manually checks the structure...
You don't say "check the syntax", as that would be confusing.

As always, sorry for being a pain.
Can't be too big a problem if it didn't bother me until I made a wrong 
assumption that
a "syntactic predicate" was always related to, well, "syntax".
Andy
>
> Ter
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080228/9933a04c/attachment.html 

From parrt at cs.usfca.edu  Thu Feb 28 13:32:20 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 28 Feb 2008 13:32:20 -0800
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <47C71AA9.1090908@jazillian.com>
References: <94421.74197.qm@web55114.mail.re4.yahoo.com>
	<47C6FFF0.10701@jazillian.com>
	<26FD02BA-4E91-4A56-B637-48053590E6ED@cs.usfca.edu>
	<47C71AA9.1090908@jazillian.com>
Message-ID: <B5F361EF-D691-495B-8111-6063115EAC4B@cs.usfca.edu>


On Feb 28, 2008, at 12:33 PM, Andy Tripp wrote:

> Terence Parr wrote:
>>
>>
>> syntax is the grammatical structure. Semantics deals with the  
>> symbols (IDs).
>>
>> int x = "foo";
>>
>> is syntactically ok but semantically wrong.
> That example illustrates the problem well.
> You mean that to the *parser*, the input is invalid.

Andy, you're killing me. ;) Syntax means the structure the symbols.   
That is what the parser does.  The lexer only creates vocab symbols  
for the parser to apply structure to.

> To the *lexer*, it's symantically right.

Semantics are all about the *meaning*, which is derived from  
grammatical structure.  Forget the lexer, bro!

> So I think the "syntactic"/"semantic" distinction is orthogonal to  
> the issue
> of whether input (to a lexer, parser, or treewalker) is valid.

nope.  If you have no actions, it's all syntax.  It's a 3-level  
recognition (i.e., syntax) problem.  All recognizers are applying  
structure, but syntax shows how to make a valid sentence.  You've  
heard of *syntax* diagrams no doubt...are you really saying those are  
the lexer rules?

> Whether the example you gave (or any example) is syntactically or
> semantically valid all depends on the lexer, parser, or treewalker.

no, the parser will say if it's valid syntaciticly...if you have  
actions you can do the semantics.

>>> Terrence has this general mechanism that he's calling "predicates"
>>> which checks the structure of the input. That input can be a stream
>>> of characters (for lexer), tokens (for parser), or ASTs for  
>>> treewalker.
>>>
>>> Now that I think about it, maybe a better name for "syntactic  
>>> predicate"
>>> would be "input pattern predicate" or something like that. The term
>>> "syntactic", to me, is a bit misleading because it makes
>>> me think of input characters.
>>
>> why?  i've never seen nor heard this way of thinking about it.
> http://dictionary.reference.com/browse/syntax:
> 4.Computers. the grammatical rules and structural patterns  
> governing the ordered use of appropriate words and symbols for  
> issuing commands, writing code, etc., in a particular software  
> application or programming language.

Yes, how did you get syntax == lexer out of that?  syntax defines set  
of valid sentences; i.e., language.

> http://en.wikipedia.org/wiki/Syntax:
> ...study of the rules that govern the structure of sentences...
>
> Every time I've ever heard anyone talking about "syntax" they were  
> talking
> about the input string itself.

Structure == syntax.

>>> Saying "my treewalker has a
>>> syntactic predicate, which of course checks the shape of the input
>>> AST" seems a bit odd.
>>
>> Not sure why.
> Because most people (including ANTLR users, I think) would not say  
> that
> a treewalker is doing any syntactic checking.

sure it is: on the tree structure.

> They'd say it's checking the structure
> of the AST.

structure == syntax

>>> I may just be stuck in an old way of thinking,
>>> but I just checked dictionary.com and wikipedia, and they're  
>>> agreeing
>>> with me :)
>>
>> not possible.  syntax is grammatical structure.  i wrote the sem  
>> pred wikiped things so they must agree with me ;)
> Looks like you wrote the syntactic predicate wikipedia entry, but the
> semantic predicate entry doesn't exist.
> I guess you coined the term "syntactic predicate", so you can have  
> it mean whatever you want it to.
> I just think your definition goes way beyond the dictionary  
> definition and common usage of "syntax".

I'm pretty sure you'll find my usage is the common one; all my papers  
get past the reviewers at least in that area.  Seriously, this is the  
most clear thing in my mind and everybody elses in the formal  
language community.

> The sentence: "Go!" could cause either valid or invalid input to  
> either a lexer, parser, or treewalker.
> If you want to consider each one's input to be its "syntax", then  
> we have:
>
> lexer syntax is whether the chars are valid (whether an output  
> Tokenstream can be created)

it's syntax is whether it's a valid token.

Ter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080228/2c146e42/attachment-0001.html 

From darien.hager at etelos-inc.com  Thu Feb 28 13:48:03 2008
From: darien.hager at etelos-inc.com (Darien Hager)
Date: Thu, 28 Feb 2008 13:48:03 -0800
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <47C71AA9.1090908@jazillian.com>
References: <94421.74197.qm@web55114.mail.re4.yahoo.com>
	<47C6FFF0.10701@jazillian.com>
	<26FD02BA-4E91-4A56-B637-48053590E6ED@cs.usfca.edu>
	<47C71AA9.1090908@jazillian.com>
Message-ID: <c8c997f40802281348i1790f60esb77c8652182fde8b@mail.gmail.com>

Hmm. So...  isnt' it possible to write a "syntactic predicate" which checks
whether the next Identifier token is a previously-defined function versus
a previously-defined variable? In that case, aren't you checking meaning
rather than form, and it is therefore is it a semantic-level predicate?

Now, academically there may be some excellent reason "syntactic predicate"
is an equally accurate term in that
case, but for myself and presumably other mere mortals it can be
confusing and seems to be vaguely out of step with the rest of the
documentation.
I think if I hadn't read this thread, "syntactic predicate" would imply to
me some relationship with the lexer rules.

I don't think it would add any negative ambiguituty to call them "grammar
predicates" or just "predicates" in the context of writing ANTLR grammar
rules.
-- 
Darien Hager
Developer
Etelos, Inc.
darien at etelos.com

http://www.etelos.com
"Revolutionizing the way applications are developed, distributed and
consumed."

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are not
the intended recipient, then this is notice that any use, disclosure,
dissemination, distribution or copying is strictly prohibited. If you have
received this message in error please contact the sender by reply mail and
destroy all copies of the original message.


This e-mail message, including attachments, may contain confidential information for the sole use of the intended recipient(s). If you are not the intended recipient, then this is notice that any use, disclosure, dissemination, distribution or copying is strictly prohibited.  If you have received this message in error please contact the sender by reply mail and destroy all copies of the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080228/01ccbd74/attachment.html 

From monty at codetransform.com  Thu Feb 28 14:07:01 2008
From: monty at codetransform.com (Monty Zukowski)
Date: Thu, 28 Feb 2008 14:07:01 -0800
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <c8c997f40802281348i1790f60esb77c8652182fde8b@mail.gmail.com>
References: <94421.74197.qm@web55114.mail.re4.yahoo.com>
	<47C6FFF0.10701@jazillian.com>
	<26FD02BA-4E91-4A56-B637-48053590E6ED@cs.usfca.edu>
	<47C71AA9.1090908@jazillian.com>
	<c8c997f40802281348i1790f60esb77c8652182fde8b@mail.gmail.com>
Message-ID: <73e8e3430802281407h4b5d7f83l420ac49e1b75fae8@mail.gmail.com>

No, you write a semantic predicate to check your symbol table.  Syntax
== structure == grammar.  Anything that is a syntactic predicate looks
like a grammar fragment.

Monty

On 2/28/08, Darien Hager <darien.hager at etelos-inc.com> wrote:
> Hmm. So...  isnt' it possible to write a "syntactic predicate" which checks
> whether the next Identifier token is a previously-defined function versus a
> previously-defined variable? In that case, aren't you checking meaning
> rather than form, and it is therefore is it a semantic-level predicate?
>
> Now, academically there may be some excellent reason
> "syntactic predicate" is an equally accurate term in that case, but for
> myself and presumably other mere mortals
> it can be confusing and seems to be vaguely out of step
> with the rest of the documentation. I think if I hadn't
> read this thread, "syntactic predicate" would imply to me some relationship
> with the lexer rules.
>
> I don't think it would add any negative ambiguituty to call them "grammar
> predicates" or just "predicates" in the context of writing
> ANTLR grammar rules.
> --
> Darien Hager
>  Developer
> Etelos, Inc.
> darien at etelos.com
>
> http://www.etelos.com
> "Revolutionizing the way applications are developed, distributed and
> consumed."
>
> This e-mail message, including attachments, may contain confidential
> information for the sole use of the intended recipient(s). If you are not
> the intended recipient, then this is notice that any use, disclosure,
> dissemination, distribution or copying is strictly prohibited. If you have
> received this message in error please contact the sender by reply mail and
> destroy all copies of the original message. This e-mail message, including
> attachments, may contain confidential information for the sole use of the
> intended recipient(s). If you are not the intended recipient, then this is
> notice that any use, disclosure, dissemination, distribution or copying is
> strictly prohibited. If you have received this message in error please
> contact the sender by reply mail and destroy all copies of the original
> message.
>
>

From gbr at newtechlaw.com  Thu Feb 28 15:17:04 2008
From: gbr at newtechlaw.com (Gerald B. Rosenberg)
Date: Thu, 28 Feb 2008 15:17:04 -0800
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <c8c997f40802281348i1790f60esb77c8652182fde8b@mail.gmail.co
 m>
References: <94421.74197.qm@web55114.mail.re4.yahoo.com>
	<47C6FFF0.10701@jazillian.com>
	<26FD02BA-4E91-4A56-B637-48053590E6ED@cs.usfca.edu>
	<47C71AA9.1090908@jazillian.com>
	<c8c997f40802281348i1790f60esb77c8652182fde8b@mail.gmail.com>
Message-ID: <200802282319.m1SNJDCJ021905@tach.newtechlaw.com>

At 01:48 PM 2/28/2008, Darien Hager wrote:
>Hmm. So...  isnt' it possible to write a "syntactic predicate" which 
>checks whether the next Identifier token is a previously-defined 
>function versus a previously-defined variable? In that case, aren't 
>you checking meaning rather than form, and it is therefore is it a 
>semantic-level predicate?

Not really.   Consider the statements:

do { X } while (Y);
while (Y) { X } ;

They are syntactically different -- reflecting static structure.
They may be semantically the same, depending on preconditions and a 
logical evaluation of X and Y -- reflecting dynamic context that, at 
least in the abstract, evaluates as a boolean.

In the case of Antlr predicates, if the direct value of the predicate 
is a grammar fragment <X Y>, then it is a syntactic predicate.  If 
the direct value is a boolean <X && Y>, then it is a semantic predicate.

The practical reason for distinguishing between semantic and 
syntactic predicates is to identify the correct punctuation to use 
(perhaps that distinction will disappear in Antlr 4).  Otherwise, 
predicates are just predicates, useful for disambiguation.

>Now, academically there may be some excellent reason "syntactic 
>predicate" is an equally accurate term in that case, but for myself 
>and presumably other mere mortals it can be confusing and seems to 
>be vaguely out of step with the rest of the documentation. I think 
>if I hadn't read this thread, "syntactic predicate" would imply to 
>me some relationship with the lexer rules.

The realization that all of Antlr's predicate forms can be used 
equally in the lexer, parser and tree parser should dispel any such inference.  


From lefevrol at yahoo.com  Thu Feb 28 18:05:36 2008
From: lefevrol at yahoo.com (Olivier Lefevre)
Date: Fri, 29 Feb 2008 03:05:36 +0100
Subject: [antlr-interest] How to the generated code in the "catch"
	section ?
In-Reply-To: <20080228103603.ABD9211EAFD@www.antlr.org>
References: <2E91F09A8F13BE4BACAA46759CA499154B6967@hs-srv-01.horizonssoftware.com>	<47C5DFAF.1010004@gmx.de>	<c8c997f40802271512q180b6d55pe0b9f767c49aeed6@mail.gmail.com>
	<c8c997f40802271512q180b6d55pe0b9f767c49aeed6@mail.gmail.co m>
	<20080228103603.ABD9211EAFD@www.antlr.org>
Message-ID: <fq7p9q$vnn$1@ger.gmane.org>

Gavin Lambert wrote:
> It's syntactically valid but last time I checked ANTLR3 didn't actually 
> do anything with the catch blocks.  (ANTLR2 does support it, and ANTLR3 
> will support it, but I don't think it does yet.)

With regard to parser errors, experimentation shows that in ANTLR 3.0.1
1) a global directive of the form
        @rulecatch { catch (RecognitionException e) { } }
    works
2) a local directive of the form
        catch [RecognitionException e] { } directive
    works and has higher precedence than the global directive if present
3) a local directive of the same form as the global directive is accepted
    but does nothing
The last point is weird. Ter?

-- O.L.

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Test_Frag3.java
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20080229/6d961da5/attachment.pl 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Frag3.g
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20080229/6d961da5/attachment-0001.pl 

From parrt at cs.usfca.edu  Thu Feb 28 18:15:49 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 28 Feb 2008 18:15:49 -0800
Subject: [antlr-interest] How to the generated code in the "catch"
	section ?
In-Reply-To: <fq7p9q$vnn$1@ger.gmane.org>
References: <2E91F09A8F13BE4BACAA46759CA499154B6967@hs-srv-01.horizonssoftware.com>	<47C5DFAF.1010004@gmx.de>	<c8c997f40802271512q180b6d55pe0b9f767c49aeed6@mail.gmail.com>
	<c8c997f40802271512q180b6d55pe0b9f767c49aeed6@mail.gmail.co m>
	<20080228103603.ABD9211EAFD@www.antlr.org>
	<fq7p9q$vnn$1@ger.gmane.org>
Message-ID: <9BE0C4AA-1C5B-4A01-81E7-7BED36CD2F45@cs.usfca.edu>


On Feb 28, 2008, at 6:05 PM, Olivier Lefevre wrote:

> Gavin Lambert wrote:
>> It's syntactically valid but last time I checked ANTLR3 didn't  
>> actually do anything with the catch blocks.  (ANTLR2 does support  
>> it, and ANTLR3 will support it, but I don't think it does yet.)
>
> With regard to parser errors, experimentation shows that in ANTLR  
> 3.0.1
> 1) a global directive of the form
>       @rulecatch { catch (RecognitionException e) { } }
>   works
> 2) a local directive of the form
>       catch [RecognitionException e] { } directive
>   works and has higher precedence than the global directive if present
> 3) a local directive of the same form as the global directive is  
> accepted
>   but does nothing
> The last point is weird. Ter?

I currentlydon't check action names for validity. target dev folks can  
use which ones they want...i'll add in future a check.
Ter

From belayda at gmail.com  Thu Feb 28 23:09:00 2008
From: belayda at gmail.com (Bernardo Elayda)
Date: Thu, 28 Feb 2008 23:09:00 -0800
Subject: [antlr-interest] How to define a FLOAT number
Message-ID: <3e5ed32f0802282309u37c5a586nd48fb439d597387c@mail.gmail.com>

Hi,

My solution for recognizing a float is a little different:

REAL
     :(
     (NATURAL+ PERIOD)=>NATURAL+ PERIOD {++n;} NATURAL* {n==1}?
     |
     (PERIOD NATURAL+)=>PERIOD {++n;} NATURAL+ {n==1}?
      )
     {
            System.out.println("n is: " + n);
     }
     ;

fragment PERIOD : '.' ;
fragment NATURAL: '0'..'9' ;

I found that it was necessary to use syntax predicate and a validating
semantic check.  Without the validating semantic check, a value of
1.2.3would be recognized as a float.

regards,
Bernie Elayda
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080228/8b1b2204/attachment.html 

From belayda at gmail.com  Thu Feb 28 23:10:27 2008
From: belayda at gmail.com (Bernardo Elayda)
Date: Thu, 28 Feb 2008 23:10:27 -0800
Subject: [antlr-interest] How to define a FLOAT number
In-Reply-To: <3e5ed32f0802282309u37c5a586nd48fb439d597387c@mail.gmail.com>
References: <3e5ed32f0802282309u37c5a586nd48fb439d597387c@mail.gmail.com>
Message-ID: <3e5ed32f0802282310x19e6a3a6qf6fb481ff9bc791b@mail.gmail.com>

Whoops!  I forgot one more thing.  Correction is below:



On Thu, Feb 28, 2008 at 11:09 PM, Bernardo Elayda <belayda at gmail.com> wrote:

> Hi,
>
> My solution for recognizing a float is a little different:
>

@lexer::member {
int n=0;
}

>
> REAL
>      :(
>      (NATURAL+ PERIOD)=>NATURAL+ PERIOD {++n;} NATURAL* {n==1}?
>      |
>      (PERIOD NATURAL+)=>PERIOD {++n;} NATURAL+ {n==1}?
>       )
>      {
>             System.out.println("n is: " + n);
>      }
>      ;
>
> fragment PERIOD : '.' ;
> fragment NATURAL: '0'..'9' ;
>
> I found that it was necessary to use syntax predicate and a validating
> semantic check.  Without the validating semantic check, a value of 1.2.3would be recognized as a float.
>
> regards,
> Bernie Elayda
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080228/8ca86f96/attachment.html 

From chris77550 at gmail.com  Fri Feb 29 09:32:27 2008
From: chris77550 at gmail.com (Christopher Brown)
Date: Fri, 29 Feb 2008 18:32:27 +0100
Subject: [antlr-interest] Fwd: ST#, attribute renderers, and format
In-Reply-To: <85c0f52a0802220440m83cc5bav7de1cc8b0745e857@mail.gmail.com>
References: <85c0f52a0802220440m83cc5bav7de1cc8b0745e857@mail.gmail.com>
Message-ID: <85c0f52a0802290932l71ab8974uc7f432b9739193a9@mail.gmail.com>

I guess I'm going to have to conclude that this isn't implemented and
that maybe StringTemplate isn't a safe bet for anything other than
Java.  :-(



---------- Forwarded message ----------
From: Christopher Brown <chris77550 at gmail.com>
Date: 22 Feb 2008 13:40
Subject: ST#, attribute renderers, and format
To: antlr-interest at antlr.org


Hi,

 The StringTemplate format option doesn't seem to be supported in
 StringTemplate 3.0.1 for C#.  This is described here:

 http://www.antlr.org/wiki/display/ST/Object+rendering

 ...on the second part of the page, under the "Format Options" header.
 As a quick reminder, it should allow me to register a formatter that
 lets me use a template variable as follows:

 $name;format="html"$
 $name;format="javascript"$

 ...so that I can apply appropriate escaping in the template, instead
 of forcing the underlying data to the output format.  In many cases,
 I'm rendering business objects, and I can't for example replace the
 business object's string properties with some custom wrapper class.

 I *can* register a basic attribute renderer, for example:

 public class FmtRenderer : IAttributeRenderer {
  public string ToString(object o) {
  return o.ToString();
  }
  public string ToString(object o, string formatName) {
  return formatName;
  }
 }

 ...but only the first ToString(object o) method is ever called.
 Suspiciously enough, the Wiki example page I referred to above doesn't
 provide a C# example.

 I've tried searching on the web, looking through the source code, and
 so on, with no success.  How can I get this working?

 Thanks,

Christopher

From chris77550 at gmail.com  Fri Feb 29 09:39:32 2008
From: chris77550 at gmail.com (Christopher Brown)
Date: Fri, 29 Feb 2008 18:39:32 +0100
Subject: [antlr-interest] Getting foreach working with StringTemplate for C#
Message-ID: <85c0f52a0802290939i6cfc9647v7e15f3545a398644@mail.gmail.com>

Hi,

I'm still struggling with StringTemplate for C#, having looked through
the lists, searched the web, and looked at the source code.

I can't get the following working (much simplified version of what I'm
trying to achieve):

  string tpl = "$foreach f in foo$ $f$ $end$";
  //string tpl = "$foo$";
			
  StringTemplate st = new StringTemplate(tpl);
  st.SetAttribute("foo", new string[] {"a", "b", "c"});
  Console.Out.WriteLine(st.ToString());

If I switch the comment onto the first line, I get the array collapsed
into a string with no separators.

In my "real" scenario, which works with simple values, I just can't
merge in arrays, lists, or anything enumerable.  I hope I'm doing
something wrong -- that someone can explain to me -- because it seems
such a basic task, I have trouble believing that it isn't
implemented...!

In the "real" scenario, I've also tried with group files and varying
"dollar" and "angle bracket syntaxes", with no luck.

Can anyone help?

Thanks in advance,
Christopher

From antlr at jazillian.com  Fri Feb 29 09:42:13 2008
From: antlr at jazillian.com (Andy Tripp)
Date: Fri, 29 Feb 2008 12:42:13 -0500
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <B5F361EF-D691-495B-8111-6063115EAC4B@cs.usfca.edu>
References: <94421.74197.qm@web55114.mail.re4.yahoo.com>
	<47C6FFF0.10701@jazillian.com>
	<26FD02BA-4E91-4A56-B637-48053590E6ED@cs.usfca.edu>
	<47C71AA9.1090908@jazillian.com>
	<B5F361EF-D691-495B-8111-6063115EAC4B@cs.usfca.edu>
Message-ID: <47C843F5.3080603@jazillian.com>

Guess I'm not being clear. Let me start again, logically:

1) lexers, parsers, and treewalkers can all have "syntactic predicates" 
(from ANTLR book)
2) You're applying a derivative of the word "syntax" to lexers, parsers, 
and treewalkers (from 1)
3) "Syntactic predicates" are constructs that match patterns in the 
input (from ANTLR book)
   - for a lexer, they match input chars
   - for a parser, they match input token sequences
   - for a treewalker, they match input AST structures
4) Common use of the term "syntax" only applies to parsers, not to 
lexers and not to treewalkers (I'm making this assertion)
   - when a lexer encounters an invalid input char, people don't say 
"it's bad syntax", we say "invalid character"
   - when a parser encounters an invalid input token sequence, we do 
call it "bad syntax"
   - when a treewalker encounters an invalid input AST, we don't say 
"it's bad syntax" we say "invalid AST"
5) Because the term "syntax" is has a common meaning (roughly "invalid 
sequence of tokens to a parser),
    that term (or any derivative) should not be used to mean something 
different. Item 4 above shows what "syntax"
    means, and item 3 above shows what "syntactic predicates" are used for.

Andy

From sebast.65 at gmail.com  Fri Feb 29 09:48:00 2008
From: sebast.65 at gmail.com (sebast)
Date: Fri, 29 Feb 2008 18:48:00 +0100
Subject: [antlr-interest] Problem of EOS
Message-ID: <47C84550.4070802@gmail.com>

hi,
I use antlr 3.0.1
I have a problem with a simple grammar :
grammar gramm;
options {
    k=2;
    output=AST;
    ASTLabelType=CommonTree;
    }
   
tokens {DECL;}

@header {package com.ast;}
@lexer::header {package com.ast;}

programme
    : (localDeclaration EOS)* -> ^(DECL localDeclaration*)
    ;
   
localDeclaration
    :    'def' 'var' Identifier 'as' ('c' | 'l')
    ;

   

// LEXER
   
DOT    
    :    '.' { if (input.LA(1) == ' ' | input.LA(1) == '\n' | 
input.LA(1)== '\t' | input.LA(1)== EOF)} {$type = EOS;}
    ;

fragment EOS : '.' (EOF|WS|NL);


WS  :      (' '|'\t'|'\f') {$channel=HIDDEN;}
    ;

NL     :    ('\r'|'\n') {$channel=HIDDEN;}
    ;
   
Identifier
    :   Letter (Letter)*
    ;

fragment
Letter
    :  '\u0024' |
       '\u0041'..'\u005a' |
       '\u005f' |
       '\u0061'..'\u007a' |
       '\u00c0'..'\u00d6' |
       '\u00d8'..'\u00f6' |
       '\u00f8'..'\u00ff' |
       '\u0100'..'\u1fff' |
       '\u3040'..'\u318f' |
       '\u3300'..'\u337f' |
       '\u3400'..'\u3d2d' |
       '\u4e00'..'\u9fff' |
              '\uf900'..'\ufaff'
    ;

For the test I use this :
    def   var  varbureausrvhndl       as  c.
    def   var vardebug          as l.
  def    var vardebugfic       as c.
  def     var vardebugcrit      as c.
  def    var vardebugtrace     as c.

The dot at the end of the first line should be recognized as an EOS, but 
it is not !

would you have any idea about the source of the problem ?

Thanks a lot.

From antlr at jazillian.com  Fri Feb 29 10:25:51 2008
From: antlr at jazillian.com (Andy Tripp)
Date: Fri, 29 Feb 2008 13:25:51 -0500
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <B5F361EF-D691-495B-8111-6063115EAC4B@cs.usfca.edu>
References: <94421.74197.qm@web55114.mail.re4.yahoo.com>
	<47C6FFF0.10701@jazillian.com>
	<26FD02BA-4E91-4A56-B637-48053590E6ED@cs.usfca.edu>
	<47C71AA9.1090908@jazillian.com>
	<B5F361EF-D691-495B-8111-6063115EAC4B@cs.usfca.edu>
Message-ID: <47C84E2F.9050105@jazillian.com>

Terence Parr wrote:
>
> On Feb 28, 2008, at 12:33 PM, Andy Tripp wrote:
>
>> Terence Parr wrote:
>>>
>>> syntax is the grammatical structure. Semantics deals with the 
>>> symbols (IDs).
>>>
>>> int x = "foo";
>>>
>>> is syntactically ok but semantically wrong.
>> That example illustrates the problem well.
>> You mean that to the *parser*, the input is invalid.
>
> Andy, you're killing me. ;) Syntax means the structure the symbols. 
>  That is what the parser does.  The lexer only creates vocab symbols 
> for the parser to apply structure to.
Syntax, as defined by dictionary.com, wikipedia, and (my understanding 
of) common usage, means not the structure of
just any symbols, but the structure of written language symbols (i.e. 
"words" or "tokens"). Thus, "syntax checking" is something
a parser does, but not something that a lexer or treewalker does.
>
>> To the *lexer*, it's symantically right.
>
> Semantics are all about the *meaning*, which is derived from 
> grammatical structure.  Forget the lexer, bro!
The "meaning" or "semantics" for a lexer is the sequence of output tokens.
The "meaning" or "semantics" for a parser is the output AST.
The "meaning" or "semantics" for a treewalker is whatever it outputs 
(some modified AST or whatever).

I can't tell from your "forget the lexer" comment if you agree with me 
or not, but I do maintain that
the lexer deals with semantics, just as a parser and treewalker do. For 
the lexer, the "meaning" is how
the input chars are mapped into an output token stream.
>
>> So I think the "syntactic"/"semantic" distinction is orthogonal to 
>> the issue
>> of whether input (to a lexer, parser, or treewalker) is valid.
>
> nope.  If you have no actions, it's all syntax. 
I agree, but I don't see how that relates.
> It's a 3-level recognition (i.e., syntax) problem.  All recognizers 
> are applying structure, but syntax shows how to make a valid sentence. 
>  You've heard of *syntax* diagrams no doubt...are you really saying 
> those are the lexer rules?
No, those are the parser rules: they say what's a valid  input token 
stream and how that input
should be  understood ("meaning"). We NEVER see a list of valid input 
chars as a "syntax diagram"
(or "syntax" anything) - it's
just a "input character set". And yet an ANTLR lexer can have "syntactic 
predicates". We NEVER see
an AST being referred to as a "syntax diagram" (or "syntax" anything) - 
we call it an AST.
It seems like we can talk about "syntax" when talking about lexers only 
because we mean that the
output of a lexer has a "syntax". But an ANTLR "syntactic predicate" in 
a lexer has nothing to do with
the lexer output. Clearer is the case of treewalkers. Treewalkers have 
nothing at all to do with the
common usage of the term "syntax".
>
>> Whether the example you gave (or any example) is syntactically or
>> semantically valid all depends on the lexer, parser, or treewalker.
>
> no, the parser will say if it's valid syntaciticly...if you have 
> actions you can do the semantics.
If only a parser can say whether something's valid syntactically, then 
why can I have a
"syntactic predicate" for a treewalker?
>
>>>> Terrence has this general mechanism that he's calling "predicates"
>>>> which checks the structure of the input. That input can be a stream
>>>> of characters (for lexer), tokens (for parser), or ASTs for 
>>>> treewalker.
>>>>
>>>> Now that I think about it, maybe a better name for "syntactic 
>>>> predicate"
>>>> would be "input pattern predicate" or something like that. The term
>>>> "syntactic", to me, is a bit misleading because it makes
>>>> me think of input characters.
>>>
>>> why?  i've never seen nor heard this way of thinking about it.
>> http://dictionary.reference.com/browse/syntax:
>> 4.Computers. the grammatical rules and structural patterns governing 
>> the ordered use of appropriate words and symbols for issuing 
>> commands, writing code, etc., in a particular software application or 
>> programming language.
>
> Yes, how did you get syntax == lexer out of that?  syntax defines set 
> of valid sentences; i.e., language.
It's probably clearer to just think of me as getting "treewalkers do not 
deal with syntax" out of that.
You can call a treewalker's matching of AST input as "syntactic" if you 
like, but I don't think anyone
else uses the term "syntax" for something like that.
>
>> http://en.wikipedia.org/wiki/Syntax:
>> ...study of the rules that govern the structure of sentences 
>> <http://en.wikipedia.org/wiki/Sentence>...
>>
>> Every time I've ever heard anyone talking about "syntax" they were 
>> talking
>> about the input string itself.
>
> Structure == syntax.
Structure == syntax *of sentences*
>
>>>> Saying "my treewalker has a
>>>> syntactic predicate, which of course checks the shape of the input
>>>> AST" seems a bit odd.
>>>
>>> Not sure why.
>> Because most people (including ANTLR users, I think) would not say that
>> a treewalker is doing any syntactic checking.
>
> sure it is: on the tree structure.
You're not making the distinction between what is actually happening 
(yes, the treewalker
is checking tree structure), vs. what terms people actually use (no, no 
one refers
to the treewalker's check of tree structure as "syntax checking").
>
>> They'd say it's checking the structure
>> of the AST.
>
> structure == syntax
Enum Recognizer {
   LEXER("character set checking"),
   PARSER("syntax checking"),
   TREEWALKER("AST validation");

  private Recognizer(String englishTermForInputChecking) {
     this.englishTermForInputChecking = englishTermForInputChecking;
  }
}
>
>>>> I may just be stuck in an old way of thinking,
>>>> but I just checked dictionary.com and wikipedia, and they're agreeing
>>>> with me :)
>>>
>>> not possible.  syntax is grammatical structure.  i wrote the sem 
>>> pred wikiped things so they must agree with me ;)
>> Looks like you wrote the syntactic predicate wikipedia entry, but the
>> semantic predicate entry doesn't exist.
>> I guess you coined the term "syntactic predicate", so you can have it 
>> mean whatever you want it to.
>> I just think your definition goes way beyond the dictionary 
>> definition and common usage of "syntax".
>
> I'm pretty sure you'll find my usage is the common one; all my papers 
> get past the reviewers at least in that area.  Seriously, this is the 
> most clear thing in my mind and everybody elses in the formal language 
> community.
Perhaps you could refer me to any paper, or email (other than this 
discussion) where
someone (besides you) refers to a treewalker's checking of an AST as 
"syntax checking" or similar.
>
>> The sentence: "Go!" could cause either valid or invalid input to 
>> either a lexer, parser, or treewalker.
>> If you want to consider each one's input to be its "syntax", then we 
>> have:
>>
>> lexer syntax is whether the chars are valid (whether an output 
>> Tokenstream can be created)
>
> it's syntax is whether it's a valid token.
Again, you're saying that "syntax" refers to the lexer output/parser 
input - that's the common usage.
And yet a "syntactic predicate" in a lexer rule does not relate to 
"syntax" - it relates to the lexer
input, not the lexer output.
>
> Ter

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080229/9c53349f/attachment.html 

From antlr at jazillian.com  Fri Feb 29 10:33:45 2008
From: antlr at jazillian.com (Andy Tripp)
Date: Fri, 29 Feb 2008 13:33:45 -0500
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <73e8e3430802281407h4b5d7f83l420ac49e1b75fae8@mail.gmail.com>
References: <94421.74197.qm@web55114.mail.re4.yahoo.com>	
	<47C6FFF0.10701@jazillian.com>	
	<26FD02BA-4E91-4A56-B637-48053590E6ED@cs.usfca.edu>	
	<47C71AA9.1090908@jazillian.com>	
	<c8c997f40802281348i1790f60esb77c8652182fde8b@mail.gmail.com>
	<73e8e3430802281407h4b5d7f83l420ac49e1b75fae8@mail.gmail.com>
Message-ID: <47C85009.2070104@jazillian.com>

I agree.

The issue (for me) is not about "form" vs. "meaning". We all agree that 
each recognizer
(lexer, parser, treewalker) accepts things in a certain "form" and 
produces some sort of
data structure output that contains "meaning".

The issue (for me) is whether the term "syntax" is commonly used to 
refer to "form" for anything
(lexer, parser, or treewalker), or whether "syntax" just really refers 
to the "form" of a parser's
input. The "form" of a lexer's input is commonly referred to as 
something like "valid sequence of
characters". The "form" of a treewalker's input is just called an "AST".

Monty Zukowski wrote:
> No, you write a semantic predicate to check your symbol table.  Syntax
> == structure == grammar.  Anything that is a syntactic predicate looks
> like a grammar fragment.
>
> Monty
>
>   

From antlr at jazillian.com  Fri Feb 29 10:38:08 2008
From: antlr at jazillian.com (Andy Tripp)
Date: Fri, 29 Feb 2008 13:38:08 -0500
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <200802282319.m1SNJDCJ021905@tach.newtechlaw.com>
References: <94421.74197.qm@web55114.mail.re4.yahoo.com>	<47C6FFF0.10701@jazillian.com>	<26FD02BA-4E91-4A56-B637-48053590E6ED@cs.usfca.edu>	<47C71AA9.1090908@jazillian.com>	<c8c997f40802281348i1790f60esb77c8652182fde8b@mail.gmail.com>
	<200802282319.m1SNJDCJ021905@tach.newtechlaw.com>
Message-ID: <47C85110.2050804@jazillian.com>

Gerald B. Rosenberg wrote:
> Not really.   Consider the statements:
>
> do { X } while (Y);
> while (Y) { X } ;
>
> They are syntactically different -- reflecting static structure.
But in both cases, a treewalker would get the same AST.

So this is a good example of the common usage of the term "syntax". We all
agree that these two are "syntactially different", and yet to a treewalker's
"syntactic predicate", they are identical.

That, to me, means that having a treewalker construct with a name containing
the word "syntax" (or derivative) doesn't make sense.

And with that, I'll drop it.


From jaluber at gmx.de  Fri Feb 29 10:44:06 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 29 Feb 2008 19:44:06 +0100
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <47C84E2F.9050105@jazillian.com>
References: <94421.74197.qm@web55114.mail.re4.yahoo.com>	<47C6FFF0.10701@jazillian.com>	<26FD02BA-4E91-4A56-B637-48053590E6ED@cs.usfca.edu>	<47C71AA9.1090908@jazillian.com>	<B5F361EF-D691-495B-8111-6063115EAC4B@cs.usfca.edu>
	<47C84E2F.9050105@jazillian.com>
Message-ID: <47C85276.4020205@gmx.de>

Hi!

Please remove the parts of a quoted email which are not necessary for 
the understanding. This doesn't only blow up the size of the email but 
hinders the easy consumption of what you have written. The last email 
Andy sent had already five levels - too many that I would bother to read 
the text in its entirety. :(

Thanks!
Johannes

From gbr at newtechlaw.com  Fri Feb 29 12:01:23 2008
From: gbr at newtechlaw.com (Gerald B. Rosenberg)
Date: Fri, 29 Feb 2008 12:01:23 -0800
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <47C85110.2050804@jazillian.com>
References: <94421.74197.qm@web55114.mail.re4.yahoo.com>
	<47C6FFF0.10701@jazillian.com>
	<26FD02BA-4E91-4A56-B637-48053590E6ED@cs.usfca.edu>
	<47C71AA9.1090908@jazillian.com>
	<c8c997f40802281348i1790f60esb77c8652182fde8b@mail.gmail.com>
	<200802282319.m1SNJDCJ021905@tach.newtechlaw.com>
	<47C85110.2050804@jazillian.com>
Message-ID: <200802292008.m1TK8C13026790@tach.newtechlaw.com>

At 10:38 AM 2/29/2008, you wrote:
>Gerald B. Rosenberg wrote:
>>Not really.   Consider the statements:
>>
>>do { X } while (Y);
>>while (Y) { X } ;
>>
>>They are syntactically different -- reflecting static structure.
>But in both cases, a treewalker would get the same AST.

Could.

>So this is a good example of the common usage of the term "syntax". We all
>agree that these two are "syntactially different", and yet to a treewalker's
>"syntactic predicate", they are identical.

Even if they were represented as the same sub-tree, whether it could 
be unrolled or further transformed in some other way could be 
dependent on surrounding syntax.  Or, for that matter, dependent on 
the internal syntax of the X sub-tree.

>That, to me, means that having a treewalker construct with a name containing
>the word "syntax" (or derivative) doesn't make sense.

So, it would be entirely valid for a syntactic predicate to consider 
the surrounding or internal syntax of a sub-tree in deciding on a 
"correct" production, even in a treewalker.

>And with that, I'll drop it.

Best,
Gerald 


From shro8822 at vandals.uidaho.edu  Fri Feb 29 12:41:07 2008
From: shro8822 at vandals.uidaho.edu (Benjamin Shropshire)
Date: Fri, 29 Feb 2008 12:41:07 -0800
Subject: [antlr-interest] how hard would this be?
Message-ID: <BAYC1-PASMTP094FADF9B5D6428990D963F5140@CEZ.ICE>

How hard would it be to build a parser that does most of the parsing in 
the tree parser stage. As an example, doing this with C might look like this

file : (a=tk | a=block)* -> (FILE a*);

tk :   !( '{'!  |  '}'! ) // not braces

block  :   '{' (a=block | a=tk)* '}')  ->(BLOCK a*) // matching braces

(I probably has syntax errors but you should be able to get the point)

Then a series of parsers would start rewriting the tree into more 
detailed structures. The idea comes from having some fairly heavy duty 
semantic dependencies in the syntax, possibly even out of order 
dependencies. The the above might make it possible to have each pass 
patch up what it known how to and generate the info needed for the next 
pass to do more.

Benjamin Shropshire



From antlr at jazillian.com  Fri Feb 29 13:08:05 2008
From: antlr at jazillian.com (Andy Tripp)
Date: Fri, 29 Feb 2008 16:08:05 -0500
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <200802292008.m1TK8C13026790@tach.newtechlaw.com>
References: <94421.74197.qm@web55114.mail.re4.yahoo.com>	<47C6FFF0.10701@jazillian.com>	<26FD02BA-4E91-4A56-B637-48053590E6ED@cs.usfca.edu>	<47C71AA9.1090908@jazillian.com>	<c8c997f40802281348i1790f60esb77c8652182fde8b@mail.gmail.com>	<200802282319.m1SNJDCJ021905@tach.newtechlaw.com>	<47C85110.2050804@jazillian.com>
	<200802292008.m1TK8C13026790@tach.newtechlaw.com>
Message-ID: <47C87435.1040605@jazillian.com>

Gerald B. Rosenberg wrote:
>
> Even if they were represented as the same sub-tree, whether it could 
> be unrolled or further transformed in some other way could be 
> dependent on surrounding syntax.  Or, for that matter, dependent on 
> the internal syntax of the X sub-tree.

>
> So, it would be entirely valid for a syntactic predicate to consider 
> the surrounding or internal syntax of a sub-tree in deciding on a 
> "correct" production, even in a treewalker.
Ah... I see...you're casually referring to AST structure as "syntax" to 
give Terrence something convenient to site
and show that he's not the only one who uses the word "syntax" that way ;)

Sorry, that doesn't count ;)
No retroactive immunity allowed.
You're just confusing people by referring to AST structure as 
"surrounding syntax" and "internal syntax".
Better to stick with the tried-and-true "tree structure" nomenclature.

Andy

From antlr at zavalon.com  Fri Feb 29 13:46:59 2008
From: antlr at zavalon.com (Nev)
Date: Sat, 1 Mar 2008 08:46:59 +1100
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <47C87435.1040605@jazillian.com>
Message-ID: <6hhft4$1i16qu@ipmail01.adl6.internode.on.net>

Sorry but I have to agree with Terrence.
He put it very elegantly
structure == syntax,
meaning == semantics

the
result = count * 2;

Is valid syntax in a number of languages. It can be stored in a tree
structure. And would still be valid structure or syntax as from above -
structure == syntax.

But it may NOT be semantically correct. It would depend on the type of the
two variables etc.

Antlr does not check the semantics - that is left to actions eg you need to
maintain a symbol table to check the type of the variables.

nev

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Andy Tripp
> Sent: Saturday, 1 March 2008 8:08 AM
> To: Gerald B. Rosenberg
> Cc: antlr-interest
> Subject: Re: [antlr-interest] "An Introduction to ANTLR" presentation
> slides
> 
> Gerald B. Rosenberg wrote:
> >
> > Even if they were represented as the same sub-tree, whether it could
> > be unrolled or further transformed in some other way could be
> > dependent on surrounding syntax.  Or, for that matter, dependent on
> > the internal syntax of the X sub-tree.
> 
> >
> > So, it would be entirely valid for a syntactic predicate to consider
> > the surrounding or internal syntax of a sub-tree in deciding on a
> > "correct" production, even in a treewalker.
> Ah... I see...you're casually referring to AST structure as "syntax" to
> give Terrence something convenient to site
> and show that he's not the only one who uses the word "syntax" that way ;)
> 
> Sorry, that doesn't count ;)
> No retroactive immunity allowed.
> You're just confusing people by referring to AST structure as
> "surrounding syntax" and "internal syntax".
> Better to stick with the tried-and-true "tree structure" nomenclature.
> 
> Andy

From lgcraymer at yahoo.com  Fri Feb 29 14:10:38 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Fri, 29 Feb 2008 14:10:38 -0800 (PST)
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
Message-ID: <764011.20686.qm@web55902.mail.re3.yahoo.com>

Anything that can be described by a formal grammar is a language; formal grammars specify syntax.  From the Wikipedia definition of Grammar:
"
In formal language theory, a branch of mathematics used in both computer science and linguistics, a grammar is a precise description of a language ? that is, of a set of strings over some alphabet.In other words, a grammar describes which of the possible sequences ofsymbols (strings) in a language actually constitute valid words orstatements in that language, but it does not describe their semantics (i.e. what they mean)."

Lexer grammars specify the (character) syntax through which legal symbols are formed; parser and tree grammars recognize sequences of tokens.

While ANTLR and other recognition packages begin with context free grammars, they can be expanded to support context-dependent syntax; ANTLR does this with "semantic" predicates.  ANTLR's semantic predicates do not by themselves deal with semantics--the most common case, for example, is to ask "was this symbol defined in a 'declaration'" (i. e., was it stored in a symbol table)  somewhere else in the input stream?

Syntactic predicates specify lookahead and can invoke semantic predicates to recognize context-dependencies.

--Loring


----- Original Message ----
> From: Andy Tripp <antlr at jazillian.com>
> To: Gerald B. Rosenberg <gbr at newtechlaw.com>
> Cc: antlr-interest <antlr-interest at antlr.org>
> Sent: Friday, February 29, 2008 1:08:05 PM
> Subject: Re: [antlr-interest] "An Introduction to ANTLR" presentation slides
> 
> Gerald B. Rosenberg wrote:
> >
> > Even if they were represented as the same sub-tree, whether it could 
> > be unrolled or further transformed in some other way could be 
> > dependent on surrounding syntax.  Or, for that matter, dependent on 
> > the internal syntax of the X sub-tree.
> 
> >
> > So, it would be entirely valid for a syntactic predicate to consider 
> > the surrounding or internal syntax of a sub-tree in deciding on a 
> > "correct" production, even in a treewalker.
> Ah... I see...you're casually referring to AST structure as "syntax" to 
> give Terrence something convenient to site
> and show that he's not the only one who uses the word "syntax" that way ;)
> 
> Sorry, that doesn't count ;)
> No retroactive immunity allowed.
> You're just confusing people by referring to AST structure as 
> "surrounding syntax" and "internal syntax".
> Better to stick with the tried-and-true "tree structure" nomenclature.
> 
> Andy
> 




      ____________________________________________________________________________________
Never miss a thing.  Make Yahoo your home page. 
http://www.yahoo.com/r/hs

From antlr at jazillian.com  Fri Feb 29 14:11:41 2008
From: antlr at jazillian.com (Andy Tripp)
Date: Fri, 29 Feb 2008 17:11:41 -0500
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <6hhft4$1i15kc@ipmail01.adl6.internode.on.net>
References: <6hhft4$1i15kc@ipmail01.adl6.internode.on.net>
Message-ID: <47C8831D.4020200@jazillian.com>

Neville Clark wrote:
> Sorry but I have to agree with Terrence.
> He put it very elegantly 
> structure == syntax,
> meaning == semantics
>
> the 
> result = count * 2;
>
> Is valid syntax in a number of languages. 
If you agree that "syntax" means "structure", then which structure are 
you talking about?
The lexical structure (i.e. input character sequence), the parser 
structure (e.g. "syntax"), or
the treewalker structure (i.e. the shape of the tree)?

Of course, I already know which one you mean...you mean the parser 
structure - the
fact that "result = count * 2;" will be valid in some *parser* grammar. 
You're not talking
about the fact that 'r' and the other chars are valid (that's "syntax", 
too, right), or the fact that
the AST produced by a parser is acceptable to some treewalker (that's 
"syntax", too).

How do I know that you're talking about the parser's "syntax" and not 
the lexer's or treewalker's
syntax? Because when people use the word "syntax", that's almost always 
what they mean.
> It can be stored in a tree
> structure. And would still be valid structure or syntax as from above -
> structure == syntax.
>   
Again, that's right for a parser. But do you refer to the input 
structure that a treewalker (or
anything else that accepts a tree-like data structure) as "syntax"? I 
doubt it. You refer to it
as "the structure of the AST" or something like that. Gerald's last 
email notwithstanding.
> But it may NOT be semantically correct. It would depend on the type of the
> two variables etc.
>   
Again, which part are you talking about when you say "semantically 
correct"? If we're talking about
the lexer, can the lexer build an output token stream from this input 
character sequence? If so,
then it's "semantically correct" for the lexer. Then perhaps that token 
stream can't be built into an
AST by the parser. In that case, this single input is "semantically 
correct" for the lexer, but
"semantically incorrect" for the parser. And so on for the tree walker 
or whatever else the
parser hands things off to. The point is that at each phase, the input 
may or may not
be syntactically correct and may or may not be semantically correct. But 
I hate using
the words, expecially "syntactic", because people generally don't use 
them that way, as you've
done here.
> Antlr does not check the semantics - that is left to actions eg you need to
> maintain a symbol table to check the type of the variables.
>   
With the use of semantic predicates, ANTLR certainly does use semantics.
Semantics roughly means "building a meaningful data structure based on 
the input", and if (say) a parser
never builds an AST or symbol tables or anything, then it's not doing 
semantics. And yet
it might certainly be using "semantic predicates" while it's busy "not 
doing semantics".
Hmmmm....I guess I better not question the term "semantic predicate" too...
> nev
>
>   

From antlr at jazillian.com  Fri Feb 29 14:27:28 2008
From: antlr at jazillian.com (Andy Tripp)
Date: Fri, 29 Feb 2008 17:27:28 -0500
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <764011.20686.qm@web55902.mail.re3.yahoo.com>
References: <764011.20686.qm@web55902.mail.re3.yahoo.com>
Message-ID: <47C886D0.70800@jazillian.com>

Loring Craymer wrote:
> Anything that can be described by a formal grammar is a language; 
Hmmm...an AST is something that can be described by a formal grammar. 
That's what a treewalker grammar does.
So I would think Terrence disagrees with that statement.
> formal grammars specify syntax.  From the Wikipedia definition of Grammar:
> "
> In formal language theory, a branch of mathematics used in both computer science and linguistics, a grammar is a precise description of a language ? that is, of a set of strings over some alphabet.
>   
By saying "a set of strings over some alphabet", they're clearly using 
"grammar" here to mean only lexer and parser grammars.

They also say it's a description of "a language", whereas I think 
Terrence defines grammar more generally, so that a treewalker's
input spec can also be called a "grammar", even though it's certainly 
not describing "a language" or "a set of strings" at all. It's
describing an AST.

> Lexer grammars specify the (character) syntax through which legal symbols are formed; parser and tree grammars recognize sequences of tokens.
>   
A treewalker recognize an AST, not a token stream, right?

From lgcraymer at yahoo.com  Fri Feb 29 14:50:09 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Fri, 29 Feb 2008 14:50:09 -0800 (PST)
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
Message-ID: <705251.55228.qm@web55905.mail.re3.yahoo.com>

Nope--tree walkers recognize token streams that represent trees.  This got formalized in ANTLR 3 with the introduction of "UP" and "DOWN" tokens to support LL(*) tree parsing.  Ter came up with this approach after I pointed out that ANTLR 2 tree walkers were restricted to predicated LL(1) processing; I consider it to be one of the significant advances in ANTLR 3.

--Loring

----- Original Message ----
> From: Andy Tripp <antlr at jazillian.com>
> To: Loring Craymer <lgcraymer at yahoo.com>
> Cc: Gerald B. Rosenberg <gbr at newtechlaw.com>; antlr-interest <antlr-interest at antlr.org>
> Sent: Friday, February 29, 2008 2:27:28 PM
> Subject: Re: [antlr-interest] "An Introduction to ANTLR" presentation slides
> 
> Loring Craymer wrote:
> > Anything that can be described by a formal grammar is a language; 
> Hmmm...an AST is something that can be described by a formal grammar. 
> That's what a treewalker grammar does.
> So I would think Terrence disagrees with that statement.
> > formal grammars specify syntax.  From the Wikipedia definition of Grammar:
> > "
> > In formal language theory, a branch of mathematics used in both computer 
> science and linguistics, a grammar is a precise description of a language ? that 
> is, of a set of strings over some alphabet.
> >   
> By saying "a set of strings over some alphabet", they're clearly using 
> "grammar" here to mean only lexer and parser grammars.
> 
> They also say it's a description of "a language", whereas I think 
> Terrence defines grammar more generally, so that a treewalker's
> input spec can also be called a "grammar", even though it's certainly 
> not describing "a language" or "a set of strings" at all. It's
> describing an AST.
> 
> > Lexer grammars specify the (character) syntax through which legal symbols are 
> formed; parser and tree grammars recognize sequences of tokens.
> >   
> A treewalker recognize an AST, not a token stream, right?
> 




      ____________________________________________________________________________________
Never miss a thing.  Make Yahoo your home page. 
http://www.yahoo.com/r/hs

From felix_do at web.de  Fri Feb 29 15:10:44 2008
From: felix_do at web.de (Felix Dorner)
Date: Sat, 01 Mar 2008 00:10:44 +0100
Subject: [antlr-interest] Difference between tokens {...} and ordinary lexer
	rules
Message-ID: <47C890F4.8070304@web.de>

Hey,

I am really new. From just testing these two approaches:

/// start
...
tokens {
  CLINTON='clinton';
  OBAMA='obama';
}

assignment : ID'='INT;

ID : ('a'..'z'|'A'..'Z')+ ;
INT : '0'|('1'..'9')('0'..'9')* ;
//end

and

// start
...
assignment : ID'='INT;

CLINTON: 'clinton';
OBAMA: 'obama';
ID : ('a'..'z'|'A'..'Z')+ ;
INT : '0'|('1'..'9')('0'..'9')* ;
//end

I can't find a difference. What's the 'better' way to go? The only thing 
I see is that accidentally moving the ID rule in the second example 
above the two "canditate" rules, would also allow "clinton=0" or 
"obama=0". This could be avoided when using the tokens{...} approach.

Thanks for any comments,
Felix






From alexander at gaengel.de  Fri Feb 29 15:33:23 2008
From: alexander at gaengel.de (=?ISO-8859-15?Q?Alexander_G=E4ngel?=)
Date: Sat, 01 Mar 2008 00:33:23 +0100
Subject: [antlr-interest] Syntactic Predicate does not work but Backtracking
	does
Message-ID: <47C89643.5020909@gaengel.de>

I have a rule in my grammar like this:

    expression_comma options
        :(
        (expression COMMA)=>expression (COMMA expression_comma)?
    ->expression expression_comma?
        |expression->expression
        )
        ;


my some Input like expression, expression does not work even when both 
parts left and rigth of the comma are expressions.

if I use this rule with backtracking it works.

    oclExpression_comma options {backtrack=true;}
        :
        oclExpression (COMMA oclExpression_comma)? ->oclExpression
    oclExpression_comma?
        ;


Am I wrong or should both work all right?
Alexander
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080301/0759335f/attachment.html 

From gbr at newtechlaw.com  Fri Feb 29 15:38:15 2008
From: gbr at newtechlaw.com (Gerald B. Rosenberg)
Date: Fri, 29 Feb 2008 15:38:15 -0800
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <47C87435.1040605@jazillian.com>
References: <94421.74197.qm@web55114.mail.re4.yahoo.com>
	<47C6FFF0.10701@jazillian.com>
	<26FD02BA-4E91-4A56-B637-48053590E6ED@cs.usfca.edu>
	<47C71AA9.1090908@jazillian.com>
	<c8c997f40802281348i1790f60esb77c8652182fde8b@mail.gmail.com>
	<200802282319.m1SNJDCJ021905@tach.newtechlaw.com>
	<47C85110.2050804@jazillian.com>
	<200802292008.m1TK8C13026790@tach.newtechlaw.com>
	<47C87435.1040605@jazillian.com>
Message-ID: <200802292340.m1TNeIk7027814@tach.newtechlaw.com>

At 01:08 PM 2/29/2008, Andy Tripp wrote:
>Gerald B. Rosenberg wrote:
>>Even if they were represented as the same sub-tree, whether it 
>>could be unrolled or further transformed in some other way could be 
>>dependent on surrounding syntax.  Or, for that matter, dependent on 
>>the internal syntax of the X sub-tree.
>
>>So, it would be entirely valid for a syntactic predicate to 
>>consider the surrounding or internal syntax of a sub-tree in 
>>deciding on a "correct" production, even in a treewalker.
>Ah... I see...you're casually referring to AST structure as "syntax" 
>to give Terrence something convenient to site
>and show that he's not the only one who uses the word "syntax" that way ;)

I wish, but no.  The concept of syntax as structure was initially 
established long ago in the language sciences.  Formal statements of 
what "syntax" is abound, though a useful summary definition is, in 
effect, some structure of well-defined elements, whether they be 
words, hieroglyphics, or even sounds, used to communicate meaning by 
the represented structure.  In the same vein, semantics is, in 
effect, the inferences that can be drawn from syntax fragments, a 
cultural or use context, etc. that serve to refine, even 
disambiguate, the meaning of particular syntax.

The language sciences definition of syntax was merely adopted by 
computer scientists.  I don't think that Ter has or intends to use 
syntax in any different manner.

So, in the context of a formal constructional grammar, the formal 
syntax basis of a lexer is a stream of characters or, more 
accurately, atoms, which may be simple characters, Unicode 
codepoints, bytes or any other discrete unit of data.  For a parser, 
the formal syntax basis is a stream of tokens.  For a tree-walker, an 
ordered collection of nodes.  A constructional grammar merely defines 
a formal transformation from one syntax basis to another.  Of course, 
through each transformation, the full depth of the data structure can 
be carried forward by the implementation.

The concepts of syntax and semantics are orthogonal to any operative 
distinctions between a lexer, parser, and treeparser: all forms of 
semantic and syntactic predicates are equally valid in the lexer, 
parser, and tree grammars.

I do believe that you could peg syntax = literals and develop your 
own set of operative definitions.  But, other than satisfying a 
preconception that syntax = literals, don't see that it improves the 
conceptual view.  While history alone is not a satisfying reason to 
do anything, it is often a really good starting point.   


From open.zone at virgin.net  Fri Feb 29 16:18:26 2008
From: open.zone at virgin.net (Micheal J)
Date: Sat, 1 Mar 2008 00:18:26 -0000
Subject: [antlr-interest] Getting foreach working with StringTemplate
	for C#
In-Reply-To: <85c0f52a0802290939i6cfc9647v7e15f3545a398644@mail.gmail.com>
References: <85c0f52a0802290939i6cfc9647v7e15f3545a398644@mail.gmail.com>
Message-ID: <001201c87b31$cb4e0100$c404a8c0@marion>

> Hi,
> 
> I'm still struggling with StringTemplate for C#, having 
> looked through the lists, searched the web, and looked at the 
> source code.

Did you try the wiki?
http://www.antlr.org/wiki/display/ST/StringTemplate+Wiki+Home

> I can't get the following working (much simplified version of 
> what I'm trying to achieve):
> 
>   string tpl = "$foreach f in foo$ $f$ $end$";
>   //string tpl = "$foo$";
> 			
>   StringTemplate st = new StringTemplate(tpl);
>   st.SetAttribute("foo", new string[] {"a", "b", "c"});
>   Console.Out.WriteLine(st.ToString());
> 
> If I switch the comment onto the first line, I get the array 
> collapsed into a string with no separators.
> 
> In my "real" scenario, which works with simple values, I just 
> can't merge in arrays, lists, or anything enumerable.  I hope 
> I'm doing something wrong -- that someone can explain to me 
> -- because it seems such a basic task, I have trouble 
> believing that it isn't implemented...!
> 
> In the "real" scenario, I've also tried with group files and 
> varying "dollar" and "angle bracket syntaxes", with no luck.
> 
> Can anyone help?
 

Sure. The template text you are supplying is NOT valid ST syntax. See
[http://www.antlr.org/wiki/display/ST/Five+minute+Introduction] for a basic
ST introduction (the basic syntax cheat sheet is useful for beginners)

Rather than:

	$foreach f in foo$ $f$ $end$


Try (either of) these instead:

	$foo:{f| $f$ }$ 

	OR

	<foo:{f| <f> }> 


Micheal


From open.zone at virgin.net  Fri Feb 29 16:18:26 2008
From: open.zone at virgin.net (Micheal J)
Date: Sat, 1 Mar 2008 00:18:26 -0000
Subject: [antlr-interest] Fwd: ST#, attribute renderers, and format
In-Reply-To: <85c0f52a0802290932l71ab8974uc7f432b9739193a9@mail.gmail.com>
References: <85c0f52a0802220440m83cc5bav7de1cc8b0745e857@mail.gmail.com>
	<85c0f52a0802290932l71ab8974uc7f432b9739193a9@mail.gmail.com>
Message-ID: <001301c87b31$cc627e40$c404a8c0@marion>

Hi,

> I guess I'm going to have to conclude that this isn't 
> implemented and that maybe StringTemplate isn't a safe bet 
> for anything other than Java.  :-(

Why?. You would be quite wrong in any case. [*].


Incidentally, StringTemplate has it's own list. Try posting there for
StringTemplate specific discussions.
http://www.antlr.org/mailman/listinfo/stringtemplate-interest


Regarding your 'format' query, download the latest drop of ANTLR v3.1 beta
[http://www.antlr.org/download/build/antlr-2008-02-27.17.tar.gz]. The
included StringTemplate.dll file is ST# v3.1 beta and should have 'format'
implemented. Don't forget the required antlr.runtime.dll file.

Once you get going, you might want to revisit those wiki pages and provide
working C# examples to complement the Java ones.

Micheal


[*] The release of PyStringTemplate v3.1 was announced on the ST list a
little while ago...

> ---------- Forwarded message ----------
> From: Christopher Brown <chris77550 at gmail.com>
> Date: 22 Feb 2008 13:40
> Subject: ST#, attribute renderers, and format
> To: antlr-interest at antlr.org
> 
> 
> Hi,
> 
>  The StringTemplate format option doesn't seem to be 
> supported in  StringTemplate 3.0.1 for C#.  This is described here:
> 
>  http://www.antlr.org/wiki/display/ST/Object+rendering
> 
>  ...on the second part of the page, under the "Format Options" header.
>  As a quick reminder, it should allow me to register a 
> formatter that  lets me use a template variable as follows:
> 
>  $name;format="html"$
>  $name;format="javascript"$
> 
>  ...so that I can apply appropriate escaping in the template, 
> instead  of forcing the underlying data to the output format. 
>  In many cases,  I'm rendering business objects, and I can't 
> for example replace the  business object's string properties 
> with some custom wrapper class.
> 
>  I *can* register a basic attribute renderer, for example:
> 
>  public class FmtRenderer : IAttributeRenderer {
>   public string ToString(object o) {
>   return o.ToString();
>   }
>   public string ToString(object o, string formatName) {
>   return formatName;
>   }
>  }
> 
>  ...but only the first ToString(object o) method is ever called.
>  Suspiciously enough, the Wiki example page I referred to 
> above doesn't  provide a C# example.
> 
>  I've tried searching on the web, looking through the source 
> code, and  so on, with no success.  How can I get this working?
> 
>  Thanks,
> 
> Christopher


From kenneth.domino at domemtech.com  Fri Feb 29 16:25:43 2008
From: kenneth.domino at domemtech.com (Kenneth Domino)
Date: Fri, 29 Feb 2008 19:25:43 -0500
Subject: [antlr-interest] Difference between tokens {...} and ordinary
	lexerrules
In-Reply-To: <47C890F4.8070304@web.de>
References: <47C890F4.8070304@web.de>
Message-ID: <EA466005745E48BE99E6763BF4007BBB@pc2008>

Hi Felix,

Placing the literal definitions for your tokens in the token section has the 
effect of adding productions for those literals to a lexer grammar.  For 
example, ANTLR will generate for the combined lexer and parser grammar 
input:

grammar test;
tokens {
 CLINTON = 'clinton';
 OBAMA = 'obama';
}
stuff: (CLINTON|OBAMA)*;

the file test__.g.  This file is a lexer grammar and it contains the 
translation of the token list in terms of productions:

lexer grammar test;

CLINTON : 'clinton' ;
OBAMA : 'obama' ;

ANTLR can read this file and generate the lexer for your target.  This means 
that they are equivalent.

However, if the grammar is a lexer grammar, then ANTLR does not accept nor 
add equivalent productions.  For example, the grammar

lexer grammar test;
tokens {
 CLINTON = 'clinton';
 OBAMA;
}
OBAMA: 'obama';

is not accepted.  Antlr outputs:

ANTLR Parser Generator  Version 3.0.1 (August 13, 2007)  1989-2007
error(108): test.g:3:12: literals are illegal in lexer tokens{} section: 
'clinton'


If you tried to only use the tokens section to define your lexer 
productions, e.g.,

lexer grammar test;
tokens {
 CLINTON = 'clinton';
 OBAMA = 'obama';
}

ANTLR will produce something different entirely:

ANTLR Parser Generator  Version 3.0.1 (August 13, 2007)  1989-2007
error(100): test.g:6:1: syntax error: antlr: test.g:6:1: unexpected token: 
null
error(10):  internal error: test.g : java.lang.NullPointerException
org.antlr.tool.Grammar.setGrammarContent(Grammar.java:524)
org.antlr.tool.Grammar.<init>(Grammar.java:456)
org.antlr.Tool.getGrammar(Tool.java:331)
org.antlr.Tool.process(Tool.java:267)
org.antlr.Tool.main(Tool.java:70)

It seems to me the safest thing to do is to place the defintions as 
productions in your grammar.  You also have the capability to add predicates 
to the productions in order to fine tune the lexer.  But, you probably don't 
want to add literals to your grammar like this anyways if you have a lot of 
them.  It seems that the lexer generated may become too large to compile 
(e.g., Java and a 64K code size limit).

--Ken Domino



From antlr at mirality.co.nz  Fri Feb 29 19:08:34 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 01 Mar 2008 16:08:34 +1300
Subject: [antlr-interest] "An Introduction to ANTLR" presentation slides
In-Reply-To: <47C84E2F.9050105@jazillian.com>
References: <94421.74197.qm@web55114.mail.re4.yahoo.com>
	<47C6FFF0.10701@jazillian.com>
	<26FD02BA-4E91-4A56-B637-48053590E6ED@cs.usfca.edu>
	<47C71AA9.1090908@jazillian.com>
	<B5F361EF-D691-495B-8111-6063115EAC4B@cs.usfca.edu>
	<47C84E2F.9050105@jazillian.com>
Message-ID: <20080301030855.D4D9611EDE4@www.antlr.org>

At 07:25 1/03/2008, Andy Tripp wrote:
>Syntax, as defined by dictionary.com, wikipedia, and (my 
>understanding of) common usage, means not the structure of just 
>any symbols, but the structure of written language symbols (i.e. 
>"words" or "tokens"). Thus, "syntax checking" is something a 
>parser does, but not something that a lexer or treewalker does.

Syntax is the structure of any kind of distinct symbols.  In this 
case the "word" is the fundamental unit and the "sentence" is the 
grouping of those units:

  - in a lexer, a "word" is a character and a "sentence" is a 
token
  - in a parser, a "word" is a token and a "sentence" is a set of 
tokens or an AST
  - in a tree walker, a "word" is an AST and a "sentence" is a set 
of ASTs

>The "meaning" or "semantics" for a lexer is the sequence of 
>output tokens.
>The "meaning" or "semantics" for a parser is the output AST.
>The "meaning" or "semantics" for a treewalker is whatever it 
>outputs (some modified AST or whatever).

No.  Those are the output syntax forms of each (what I referred to 
as "sentences" above) -- they do *not* represent semantics or 
meaning.

If you take an ANTLR grammar and remove all action code from it, 
then it will still take in input syntax and generate output 
syntax, but no inherent meaning is associated with it.  Thus left 
to itself ANTLR is a pure syntax recogniser/generator.  In 
addition to this is also permits semantic validation and 
constructs to be included, but this is convenience and is not 
essential to operation (except possibly for some syntactically 
ambiguous languages).

>We NEVER see an AST being referred to as a "syntax diagram" (or 
>"syntax" anything) - we call it an AST.

Yes, and what does AST actually stand for?  Abstract Syntax 
Tree.  Oh look, it *is* referred to as "syntax".


Perhaps another more concrete example is in order here.  The input 
is:

   int x = doCalculation(5);

This is a character stream which the lexer might convert into the 
token stream:

   KEYWORD[int] IDENTIFIER[x] ASSIGN[=] IDENTIFIER[doCalculation] 
OPAREN[(] NUMBER[5] CPAREN[)] SEMI[;]

The parser takes that token stream and converts it into the 
following AST:

   ( DECLARATION KEYWORD[int] IDENTIFIER[x] )
   ( ASSIGN[=]
     IDENTIFIER[x]
     ( FUNCTIONCALL IDENTIFIER[doCalculation] ( NUMBER[5] ) )
   )

Everything we have done up to this point is still all just 
syntax.  This is a perfectly valid AST and thus the input is valid 
syntactically.

But what happens when we start to verify the semantics?  What 
happens if it turns out that "doCalculation" isn't actually a 
function, or doesn't take a single numeric parameter, or doesn't 
return a type that can be compatibly assigned to an integer 
variable?  What happens if "x" had already been declared as a 
string variable?  Those are all semantic tests and they are 
independent of the AST itself.  So what was perfectly valid syntax 
may be semantically incorrect.

ANTLR lets you choose whether you want to do the semantic checks 
right at the end (in your own driver code, or in a tree walker), 
or whether you want to do them inline at the lexing or parsing 
stages (either to fail quickly or to resolve syntactical 
ambiguities).  But being able to insert them inline doesn't mean 
that they're directly linked the way you seem to have been 
saying.  They remain separate and distinct things.

I wonder if this is a similar confusion to that caused by having a 
combined grammar with literals in the parser rules -- it's 
permitted for convenience but it doesn't change the fact that 
they're treated separately (by modifying the lexer).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080301/d98a1049/attachment-0001.html 

From jstpierre-antlr at mecheye.net  Fri Feb 29 19:19:41 2008
From: jstpierre-antlr at mecheye.net (ANTLR Mailing List)
Date: Fri, 29 Feb 2008 22:19:41 -0500
Subject: [antlr-interest] Fwd: A couple of questions for lexing strategy.
In-Reply-To: <4ff3ab470802291859i4b42c431s17718adccc82d31d@mail.gmail.com>
References: <4ff3ab470802291859i4b42c431s17718adccc82d31d@mail.gmail.com>
Message-ID: <4ff3ab470802291919s22d08193p78c8d5c0e9a57492@mail.gmail.com>

---------- Forwarded message ----------
From: ANTLR Mailing List <jstpierre-antlr at mecheye.net>
Date: Feb 29, 2008 9:59 PM
Subject: A couple of questions for lexing strategy.
To: ANTLR Mailing List <jstpierre-antlr at mecheye.net>


Wikipedia defines a lexer as something that contains two parts: a
 scanner and a tokenizer. First, what is each seperately, and does
 ANTLR make this differentiation?

 On that same subject, why does ANTLR use seperate methods in the lexer
 (in parser rules) for each token that could be inlined? Here's an
 example:

 grammar InlineTest;

 program:
        ( FunctionCall Newline )*;

 FunctionCall:
        FunctionName ' (' argumentList ')';

 FunctionName
        :       'sin'
        |       'cos'
        |       'tan';

 ArgumentList:
        ArgumentListItem ( ',' ArgumentListItem )*;

 ArgumentListItem
        :       'unsigned'?
                ( 'float' | 'int' | 'double' | 'single' );

 Whitespace
        :       ( ' ' | '\t' )+ { $channel=HIDDEN };

 Newline
        :       ( '\r'? '\n' )*;

 This produces nice clean code when using lexer rules, inlining all the
 strings used by using matchString in the rules. However, when
 converting these to parser rules, the code becomes very messy, making
 each string a token type. Is this expected behavior for a parser? Is
 this bad judgement on my part for what should be a lexer/parser rule?

 Also, can ANTLR extract the token list in the lexer into it's own
 class? When using the parser rule grammar shown above, the list is
 generated twice, once in each class. It seems that putting the tokens
 in its own file would be much cleaner.

 Also, I still have interest in developing the ActionScript port for
 ANTLR, but I'm a student (read: I'm under 18). Would I still be able
 to develop, because my signature is not legal.

 Thanks guys.

