From rob.hill at blueyonder.co.uk  Sat Jul  2 14:25:57 2005
From: rob.hill at blueyonder.co.uk (Robert Hill)
Date: Fri Jun 17 14:26:00 2005
Subject: [antlr-interest] Exceptional question...:)
Message-ID: <ECOWS02MaR6xE2XKc8100023c91@smtp-out2.blueyonder.co.uk>

I have a rule which has a syntactic predicate which allows or disallows junk
chars on the end of a line after all my expected tokens. If this is turned
off, and im just expecting a carriage return, I want to throw an exception
and notify the user that there's junk on the end of a line, so I added an
exception on this alternate.

 

So far the rule looks like this

 

Element

Options { defaultErrorHandler = false; }

:

      ty:type nn:ID (ID! | HYPHEN!) cnt:element_count (INT | HYPHEN)
string_size[#ty.getText()] 

            (INT | HYPHEN)  ({bIgnoreExtraneousEOLChars}? (options
{greedy=false;}:~CR!)* CR! 

| CR! exception

catch [RecognitionException] {

                  throw new ArgumentException(ErrorPrefixLine(nn) + "ERROR :
extraneous character before newline");

}  )

    {

            #element = #([TOK_TYPE,"TOK_TYPE"], #element);

    } //Add a new root element

      ;

exception

catch [RecognitionException] {

                  throw new ArgumentException(ErrorPrefixLine(nn) + "ERROR :
Syntax error found processing element");

}

 

But the exception for the CR alternate never gets thrown, only the rule's
exception gets thrown. Ie, if the Var

bIgnoreExtraneousEOLChars is false, and the CR! Alternater production
doesn't match , I want the exception to throw I've tried allsorts, and
checked some of the other grammars on the site but cant see anything similar
as a starting point. any takers?

 

 

Also whilst I'm asking daft questions ;) 

I've seen these 3 different variations on inserting the tokens into an AST,
and after trying them out , and examining the code it appears they generate
the same instructions.

 

                  ## = #([TOK_COMMENT,t]);

                  #comment = #([TOK_COMMENT,t]);

                  #comment = #(#[TOK_COMMENT,t]);

 

So, if they all generate the same code, why the multiple syntax?

Throwback to pccts perhaps? 

 

Cheers,

/2ob

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050702/09df1be2/attachment.html
From tarunkhanna at gmail.com  Fri Jul  1 06:01:03 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Fri Jul  1 06:01:06 2005
Subject: [antlr-interest] ANTLR v3: enum as identifier and as a keyword
In-Reply-To: <E09667BC-B48C-4C8F-B75D-3098A56441A0@cs.usfca.edu>
References: <20050626184707.41307.qmail@web30806.mail.mud.yahoo.com>
	<42BF0E6E.4000908@gmx.net> <42BF1A78.2080609@gmail.com>
	<C820AFEA-45C9-4514-BB6C-AC548D516111@apple.com>
	<42C2F218.5030404@gmail.com>
	<8B20F7DC-7B8A-43D0-95C4-0E667F68A2C0@apple.com>
	<121061B8-324D-452F-9A16-DEC51BC11CA3@cs.usfca.edu>
	<dbcf4c2c0506301401c0be154@mail.gmail.com>
	<E09667BC-B48C-4C8F-B75D-3098A56441A0@cs.usfca.edu>
Message-ID: <dbcf4c2c05070106015e60c56d@mail.gmail.com>

Great...

Thanks a lot for you help. Although That brings up my second question. Is 
there a general solution for implementing symbol tables in ANTLR, or do I 
have to define some sort of a hash table to achieve that. I guess if I were 
implementing a symbol table in yacc with C I would have a structure or a 
class to do that.

And is there a way to handle scope also provided in ANTLR itself.

I had a gut feeling that since ANTLR provides so much functionality, there 
would be some way of handling the symbol tables also.

I would be highly appreciate if you could provide some help with these 
questions. If there are any books or articles that I can refer to, pleases 
do provide some pointers to those if possible.

thanks again
Tarun Khanna
On 6/30/05, Terence Parr <parrt@cs.usfca.edu> wrote:
> 
> On Jun 30, 2005, at 2:01 PM, Tarun Khanna wrote:
> 
> > Now is there a good way of differentiating between identifiers and
> > type names/keywords in general? For example in a language like C/C++
> >
> > A function definition can begin with a type name (such as int).
> > ------------> int func(int a);
> > But any expression can also begin with an identifier.
> > ---------------------------> sum += var1;
> 
> Well, statements and declarations of functions occur in different
> contexts so this one is easy. In general though you need a symbol
> table and then use semantic predicates that ask if LT(1).getText() is
> in the symbol table as a type. if so, that tells you how to
> distinguish between (T) as an expression and (T) as a typecast for
> example.
> 
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> 
> 


-- 
Tarun Khanna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050701/4a51c96e/attachment-0001.html
From glindholm at yahoo.com  Fri Jul  1 08:22:44 2005
From: glindholm at yahoo.com (Greg Lindholm)
Date: Fri Jul  1 08:22:46 2005
Subject: [antlr-interest] Multiple versions of Antlr playing nice together?
In-Reply-To: <20050701130109.BBD84DCE01@www.antlr.org>
Message-ID: <20050701152244.88150.qmail@web52305.mail.yahoo.com>



> From: Terence Parr <parrt@cs.usfca.edu>
> Date: Thu, 30 Jun 2005 13:30:31 -0700
> 
> > Are you doing anything to ensure that different (incompatable)
> version
> > of antlr can be used side-by-side in a project? I.e. Use different
> > package names?
> 
> I can't really do anything...the more common situation is to get an  
> updated version and expect your code to still compile.   
> antlr275.Token would be annoying, but is the only solution if you  
> must have multiple version :(
> 

Well... It's really only an issue when there is an incompatiblity.
If you know a new release is incompatible with an older one you 
can change the package name or deprecate the old class and put the
changes into a new class.

At this point I'm sure all your attention is on version 3 but going
forward it's a good thing to keep in mind that multiple versions of
antlr may have to run side-by-side in the same app.


> > What about when Antlr 3.x come into widespread use? Will it be able
> to
> > be used in the same application with Antlr 2.x?
> 
> Fortunately here we have org.antlr.* now instead of antlr.* so it  
> works fine.  Indeed 3 is written in 2.7.5 :)
>

This is good to hear, you did use different package names.


> 
> An example I just encountered is Struts 1.2.7 comes with Antlr 2.7.2
> and Hibernate 3.0.5 comes with antlr-2.7.5H3.jar.
> In this project I'm not doing any development with antlr I'm just a
> "user" of Struts and Hibernate. And as a user I don't know if there
> are
> any dependencies on a particular version of antlr or even if these
> two
> are compatible.
> If I use the later release 2.7.5H3 will it break something is Struts?

So does anyone know if there are any gotchas when upgrading from Antlr
2.7.2  to 2.7.5H3 (or the latest 2.7.x) release?



		
____________________________________________________ 
Yahoo! Sports 
Rekindle the Rivalries. Sign up for Fantasy Football 
http://football.fantasysports.yahoo.com
From antlr at klaashofstra.com  Fri Jul  1 08:29:25 2005
From: antlr at klaashofstra.com (Klaas Hofstra)
Date: Fri Jul  1 08:28:23 2005
Subject: [antlr-interest] tree transformation question (if-elif-else ->
	if-else)
Message-ID: <200507011729.25996.antlr@klaashofstra.com>

Hi,

I have a problem with tree transformations that must have been solved before 
because it seems to me that it occurs frequently when converting one language 
to another.

I need to convert the following pseudo-code:

if expression
  statements
elif expression
  statements
elif expression
  statements
else
  statements

into:

if expression
  statements
else
  if expression
    statements
  else
    if expression
      statements
    else
      statements

Translated into trees, I need to transform the tree :

tree1 =
(IFBLOCK  (IF  E1  S1) (ELIF  E2  S2) (ELIF  E3  S3) (ELSE  S4))

into:

tree2 = 
(IFBLOCK  (IF  E1  S1)  (ELSE  (IFBLOCK  (IF E2 S2)  (ELSE  
(IFBLOCK  (IF E3  S3) (ELSE  S4))))))

, where E=EXPRESSION, S=STATEMENTS

My problem is that the rewrite rule for ELIF  is something like:

(ELIF  E  S) -> (ELSE  (IFBLOCK  (IF E S)  subtree_of_next_elif_or_else)

When traversing the tree from left to right with a treeparser,  
'subtree_of_next_elif_or_else' is not available when it is needed.

How can this problem be solved?

Thanks in advance,

Klaas

From ewbank at gmail.com  Fri Jul  1 08:52:18 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Fri Jul  1 08:52:21 2005
Subject: [antlr-interest] tree transformation question (if-elif-else ->
	if-else)
In-Reply-To: <200507011729.25996.antlr@klaashofstra.com>
References: <200507011729.25996.antlr@klaashofstra.com>
Message-ID: <dd3a065f0507010852dd01915@mail.gmail.com>

I solve this by building the tree differently.  I think you are using
a flat grammar to consume these - perhaps something like this:

  if_s   : "if"^ expr statements ( elif_s )* ( else_s )? ;
  elif_s : "elif"^ expr statements ;
  else_s : "else"! statements ;

I use a recursive grammar instead, drilling into the elif_s production
to build the tree.  It produces the tree you want, and recognizes the
same language (if I wrote it correctly):

  if_s   : "if"^ expr statements ( elif_s )? ;
  elif_s : "elif"^ expr statements ( elif_s | else_s )? ;
  else_s : "else"^ statement ;

The resulting tree looks like this (again, if I wrote the above correctly):

   #( "if"
        expr
        statements
        #( "elif"
             expr
             statements
             #( "else"
                  statements
             )
         )
     ) 

On 7/1/05, Klaas Hofstra <antlr@klaashofstra.com> wrote:
> Hi,
> 
> I have a problem with tree transformations that must have been solved before
> because it seems to me that it occurs frequently when converting one language
> to another.
> 
> I need to convert the following pseudo-code:
> 
> if expression
>   statements
> elif expression
>   statements
> elif expression
>   statements
> else
>   statements
> 
> into:
> 
> if expression
>   statements
> else
>   if expression
>     statements
>   else
>     if expression
>       statements
>     else
>       statements
> 
> Translated into trees, I need to transform the tree :
> 
> tree1 =
> (IFBLOCK  (IF  E1  S1) (ELIF  E2  S2) (ELIF  E3  S3) (ELSE  S4))
> 
> into:
> 
> tree2 =
> (IFBLOCK  (IF  E1  S1)  (ELSE  (IFBLOCK  (IF E2 S2)  (ELSE
> (IFBLOCK  (IF E3  S3) (ELSE  S4))))))
> 
> , where E=EXPRESSION, S=STATEMENTS
> 
> My problem is that the rewrite rule for ELIF  is something like:
> 
> (ELIF  E  S) -> (ELSE  (IFBLOCK  (IF E S)  subtree_of_next_elif_or_else)
> 
> When traversing the tree from left to right with a treeparser,
> 'subtree_of_next_elif_or_else' is not available when it is needed.
> 
> How can this problem be solved?
> 
> Thanks in advance,
> 
> Klaas
> 
>
From ewbank at gmail.com  Fri Jul  1 08:56:37 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Fri Jul  1 08:56:41 2005
Subject: [antlr-interest] ANTLR v3: enum as identifier and as a keyword
In-Reply-To: <dbcf4c2c05070106015e60c56d@mail.gmail.com>
References: <20050626184707.41307.qmail@web30806.mail.mud.yahoo.com>
	<42BF0E6E.4000908@gmx.net> <42BF1A78.2080609@gmail.com>
	<C820AFEA-45C9-4514-BB6C-AC548D516111@apple.com>
	<42C2F218.5030404@gmail.com>
	<8B20F7DC-7B8A-43D0-95C4-0E667F68A2C0@apple.com>
	<121061B8-324D-452F-9A16-DEC51BC11CA3@cs.usfca.edu>
	<dbcf4c2c0506301401c0be154@mail.gmail.com>
	<E09667BC-B48C-4C8F-B75D-3098A56441A0@cs.usfca.edu>
	<dbcf4c2c05070106015e60c56d@mail.gmail.com>
Message-ID: <dd3a065f05070108567597e2c3@mail.gmail.com>

Nope; there's nothing provided that does symbol tables or scopes
automatically, though there's been discussions a while back on this
list.

For me, I use (C++ language) a vector<> of map<> structures from the
standard template library.  I'm sure there are similar beasts in java.

On 7/1/05, Tarun Khanna <tarunkhanna@gmail.com> wrote:
> Is there a general solution for implementing symbol tables in ANTLR,
> or do I have to define some sort of a hash table to achieve that.
>
> ...
> And is there a way to handle scope also provided in ANTLR itself.
>  
> I had a gut feeling that since ANTLR provides so much functionality, there
> would be some way of handling the symbol tables also.
From antlr at klaashofstra.com  Fri Jul  1 09:51:48 2005
From: antlr at klaashofstra.com (Klaas Hofstra)
Date: Fri Jul  1 09:50:49 2005
Subject: [antlr-interest] tree transformation question (if-elif-else ->
	if-else)
In-Reply-To: <dd3a065f0507010852dd01915@mail.gmail.com>
References: <200507011729.25996.antlr@klaashofstra.com>
	<dd3a065f0507010852dd01915@mail.gmail.com>
Message-ID: <200507011851.48393.antlr@klaashofstra.com>

On Friday 01 July 2005 17:52, Bryan Ewbank wrote:
> I use a recursive grammar instead, drilling into the elif_s production
> to build the tree.  It produces the tree you want, and recognizes the
> same language (if I wrote it correctly):
>
>   if_s   : "if"^ expr statements ( elif_s )? ;
>   elif_s : "elif"^ expr statements ( elif_s | else_s )? ;
>   else_s : "else"^ statement ;

The recursive grammar did the trick, thanks!

Klaas
From jeremy.rayner at gmail.com  Fri Jul  1 10:20:23 2005
From: jeremy.rayner at gmail.com (Jeremy Rayner)
Date: Fri Jul  1 10:20:26 2005
Subject: [antlr-interest] Multiple versions of Antlr playing nice together?
In-Reply-To: <20050701152244.88150.qmail@web52305.mail.yahoo.com>
References: <20050701130109.BBD84DCE01@www.antlr.org>
	<20050701152244.88150.qmail@web52305.mail.yahoo.com>
Message-ID: <90a60e7605070110204d931342@mail.gmail.com>

Hiya,
  To get round this issue in groovy, 
http://groovy.codehaus.org

we used the jarjar tool
http://tonicsystems.com/products/jarjar/

It can be called from Ant or Maven, and it can rename the
package, so that you don't clash.

For example this is our usage
http://cvs.codehaus.org/viewrep/groovy/groovy/groovy-core/maven.xml?r=1.124#l570

This renames all antlr.* references to groovyjarjarantlr.*
which is unlikely to clash with other versions of antlr in the same
container

cheers

jez.
On 7/1/05, Greg Lindholm <glindholm@yahoo.com> wrote:
> 
> 
> > From: Terence Parr <parrt@cs.usfca.edu>
> > Date: Thu, 30 Jun 2005 13:30:31 -0700
> >
> > > Are you doing anything to ensure that different (incompatable)
> > version
> > > of antlr can be used side-by-side in a project? I.e. Use different
> > > package names?
> >
> > I can't really do anything...the more common situation is to get an
> > updated version and expect your code to still compile.
> > antlr275.Token would be annoying, but is the only solution if you
> > must have multiple version :(
> >
> 
> Well... It's really only an issue when there is an incompatiblity.
> If you know a new release is incompatible with an older one you
> can change the package name or deprecate the old class and put the
> changes into a new class.
> 
> At this point I'm sure all your attention is on version 3 but going
> forward it's a good thing to keep in mind that multiple versions of
> antlr may have to run side-by-side in the same app.
> 
> 
> > > What about when Antlr 3.x come into widespread use? Will it be able
> > to
> > > be used in the same application with Antlr 2.x?
> >
> > Fortunately here we have org.antlr.* now instead of antlr.* so it
> > works fine.  Indeed 3 is written in 2.7.5 :)
> >
> 
> This is good to hear, you did use different package names.
> 
> 
> >
> > An example I just encountered is Struts 1.2.7 comes with Antlr 2.7.2
> > and Hibernate 3.0.5 comes with antlr-2.7.5H3.jar.
> > In this project I'm not doing any development with antlr I'm just a
> > "user" of Struts and Hibernate. And as a user I don't know if there
> > are
> > any dependencies on a particular version of antlr or even if these
> > two
> > are compatible.
> > If I use the later release 2.7.5H3 will it break something is Struts?
> 
> So does anyone know if there are any gotchas when upgrading from Antlr
> 2.7.2  to 2.7.5H3 (or the latest 2.7.x) release?
> 
> 
> 
> 
> ____________________________________________________
> Yahoo! Sports
> Rekindle the Rivalries. Sign up for Fantasy Football
> http://football.fantasysports.yahoo.com
> 


-- 
http://javanicus.com/blog2
From evansgr_99 at hotmail.com  Fri Jul  1 10:38:42 2005
From: evansgr_99 at hotmail.com (Gary Evans)
Date: Fri Jul  1 10:38:45 2005
Subject: [antlr-interest] Newbie Question - does antlr.py work?
In-Reply-To: <000401c57de8$3942c910$6402a8c0@hercules>
Message-ID: <BAY102-F199CD6022A3369997B87DDEAE20@phx.gbl>

Thanks for the response - I think I finally understand.

The antlr.py contains functions and classes that are used by the parser that 
the binaries generate.  I need the binaries to create the parser, lexer, 
etc. and then I still need antlr.py to use them.

That's a bummer... my goal was to translate antlr to Perl6 so it could be 
used to write parsers that will work on Parrot.  I am pretty good at dealing 
with scripting languages, but I haven't learned Java well enough to 
translate it to anything...

Thanks again for taking to time to answer.

Regards,
gevans

>From: "Micheal J" <open.zone@virgin.net>
>To: <antlr-interest@antlr.org>
>Subject: RE: [antlr-interest] Newbie Question  - does antlr.py work?
>Date: Fri, 1 Jul 2005 03:54:37 +0100
>
>Gary,
>
><SNIP>
>
> > I used a .msi file to install a binary on my system.  In the
> > lib directory
> > is a file called antlr.py, which looks like it should be the
> > program.  But I
> > cannot seem to use it.  Can I create my parser files using:
> >
> > >>>python antlr.py test.g
> > ...which should spit out the parser, lexer, etc.?
>
>No. The ANTLR tool that generates lexers/parsers/treeparsers from a grammar
>file is written in Java. AFAICT, it has not been re-implemented in Python
>(nor does it need to be).
>
>You will either need to install java or, obtain and use one of the many
>binary versions of the ANTLR tool that run without java like cantlr 
>(created
>with gcj I believe) or the .NET version created with MS J#.
>
>These should be available on the website somewhere.
>
><SNIP>
>
> > If this is not possible, then what exactly is the purpose of the file
> > antlr.py?
>
>I'm guessing it's part of the runtime support library needed for ANTLR
>lexers/parsers/treeparser written in python.
>
>
>Cheers,
>
>Micheal
>


From chris at lotuscat.com  Fri Jul  1 10:43:35 2005
From: chris at lotuscat.com (Chris Black)
Date: Fri Jul  1 10:44:41 2005
Subject: [antlr-interest] Newbie Question - does antlr.py work?
In-Reply-To: <BAY102-F199CD6022A3369997B87DDEAE20@phx.gbl>
References: <BAY102-F199CD6022A3369997B87DDEAE20@phx.gbl>
Message-ID: <42C580C7.8040705@lotuscat.com>

Gary Evans wrote:

> Thanks for the response - I think I finally understand.
>
> The antlr.py contains functions and classes that are used by the 
> parser that the binaries generate.  I need the binaries to create the 
> parser, lexer, etc. and then I still need antlr.py to use them.
>
> That's a bummer... my goal was to translate antlr to Perl6 so it could 
> be used to write parsers that will work on Parrot.  I am pretty good 
> at dealing with scripting languages, but I haven't learned Java well 
> enough to translate it to anything...
>
> Thanks again for taking to time to answer.
>
> Regards,
> gevans

I think the idea here is that the core language of ANTLR (the part that 
reads .g files and generates code) does not need to be ported to the 
target language. If you wanted to get antlr to create parsers that work 
on parrot, I believe you would just write a new code generator (in Java) 
that output Parrot/Perl6 code. There would also need to be a support 
library written in Parrot/Perl6 to use those generated parsers.

Chris
From evansgr_99 at hotmail.com  Fri Jul  1 13:22:43 2005
From: evansgr_99 at hotmail.com (Gary Evans)
Date: Fri Jul  1 13:22:47 2005
Subject: [antlr-interest] Newbie Question - does antlr.py work?
In-Reply-To: <42C580C7.8040705@lotuscat.com>
Message-ID: <BAY102-F284EB70CEF8155DFD8F505EAE20@phx.gbl>

Chris,

I see what you mean.  There are files in the java source for the "main" 
program called CSharpCodeGenerator.java, PythonCodeGenerator.java, etc.  I 
need to modify one of those to create PerlCodeGenerator and then with a few 
modifications elsewhere in the program, it should spit out a Perl parser.

Then, I would have to translate antlr.py into a Perl module so the runtime 
would be used with the parser.

Hmm... I guess I will have to study up on Java for a while.  But thank you 
very much for your advice - you have given me hope again!

gevans

>From: Chris Black <chris@lotuscat.com>
>To: Gary Evans <evansgr_99@hotmail.com>
>CC: open.zone@virgin.net, antlr-interest@antlr.org
>Subject: Re: [antlr-interest] Newbie Question - does antlr.py work?
>Date: Fri, 01 Jul 2005 12:43:35 -0500
>
>Gary Evans wrote:
>
>>Thanks for the response - I think I finally understand.
>>
>>The antlr.py contains functions and classes that are used by the parser 
>>that the binaries generate.  I need the binaries to create the parser, 
>>lexer, etc. and then I still need antlr.py to use them.
>>
>>That's a bummer... my goal was to translate antlr to Perl6 so it could be 
>>used to write parsers that will work on Parrot.  I am pretty good at 
>>dealing with scripting languages, but I haven't learned Java well enough 
>>to translate it to anything...
>>
>>Thanks again for taking to time to answer.
>>
>>Regards,
>>gevans
>
>I think the idea here is that the core language of ANTLR (the part that 
>reads .g files and generates code) does not need to be ported to the target 
>language. If you wanted to get antlr to create parsers that work on parrot, 
>I believe you would just write a new code generator (in Java) that output 
>Parrot/Perl6 code. There would also need to be a support library written in 
>Parrot/Perl6 to use those generated parsers.
>
>Chris


From joerg.rech at gmail.com  Fri Jul  1 15:11:53 2005
From: joerg.rech at gmail.com (=?ISO-8859-1?Q?J=F6rg_Rech?=)
Date: Fri Jul  1 15:12:19 2005
Subject: [antlr-interest] Problem with special characters in String_Literal
	of java.g
Message-ID: <42C5BFA9.60009@gmail.com>

Hi,
  I encountered the following error when parsing motif_de.java (see 
below) from the java libraries:

motif_de.java:9:64: unexpected char: 'u'

I guess that STRING_LITERAL cannot parse the special character "\u00FC" 
even if it is defined in ESC.

Any ideas?
Joerg
----
motif_de.java:
----

package com.sun.java.swing.plaf.motif.resources;

import java.util.ListResourceBundle;

public final class motif_de extends ListResourceBundle {
    private static final Object[][] contents = {
        { "FileChooser.acceptAllFileFilterText", "*" },
        { "FileChooser.cancelButtonText", "Abbrechen" },
        { "FileChooser.cancelButtonToolTipText", "Dialogfeld f\u00FCr 
Dateiauswahl abbrechen" },
        { "FileChooser.enterFileNameLabelText", "Filternamen eingeben:" },
        { "FileChooser.filesLabelText", "Dateien" },
        { "FileChooser.filterLabelText", "Filter" },
        { "FileChooser.foldersLabelText", "Ordner" },
        { "FileChooser.helpButtonText", "Hilfe" },
        { "FileChooser.helpButtonToolTipText", "Hilfe f\u00FCr 
Dateiauswahl" },
        { "FileChooser.openButtonText", "OK" },
        { "FileChooser.openButtonToolTipText", "Ausgew\u00E4hlte Datei 
\u00F6ffnen" },
        { "FileChooser.openDialogTitleText", "\u00D6ffnen" },
        { "FileChooser.pathLabelText", "Pfad- oder Ordnernamen eingeben:" },
        { "FileChooser.saveButtonText", "Speichern" },
        { "FileChooser.saveButtonToolTipText", "Ausgew\u00E4hlte Datei 
speichern" },
        { "FileChooser.saveDialogTitleText", "Speichern" },
        { "FileChooser.updateButtonText", "Aktualisieren" },
        { "FileChooser.updateButtonToolTipText", "Verzeichnisliste 
aktualisieren" },

    };

    protected final Object[][] getContents() {
         return contents;
    }
}


-- 
Joerg Rech
Computer Scientist        Web:   http://www.joerg-rech.de
Tel.: (+49|0) 631/10653   email: joerg.rech@gmail.com

From open.zone at virgin.net  Fri Jul  1 17:59:07 2005
From: open.zone at virgin.net (Micheal J)
Date: Fri Jul  1 17:45:06 2005
Subject: OT: [antlr-interest] Multiple versions of Antlr playing nice together?
In-Reply-To: <90a60e7605070110204d931342@mail.gmail.com>
Message-ID: <001201c57ea1$40f3c880$6402a8c0@hercules>


> we used the jarjar tool

We's gonna laugh. Mesa tinks yousa funny name!


Micheal

From open.zone at virgin.net  Fri Jul  1 17:59:07 2005
From: open.zone at virgin.net (Micheal J)
Date: Fri Jul  1 17:45:06 2005
Subject: [antlr-interest] Newbie Question - does antlr.py work?
In-Reply-To: <BAY102-F284EB70CEF8155DFD8F505EAE20@phx.gbl>
Message-ID: <001301c57ea1$41b14c20$6402a8c0@hercules>

Gary,

> I see what you mean.  There are files in the java source for 
> the "main" 
> program called CSharpCodeGenerator.java, 
> PythonCodeGenerator.java, etc.

<SNIP>

> Then, I would have to translate antlr.py into a Perl module 
> so the runtime 
> would be used with the parser.
> 
> Hmm... I guess I will have to study up on Java for a while.  
> But thank you 
> very much for your advice - you have given me hope again!

It gets better actually. Ignore the ANTLR 2.7.5 stuff. ANTLR v3 is currently
at the early access stage and has a brand new code generation architecture
that makes it *much* to add a new target language. It's a template-based
system.

Just wait a while...and you can bring your parrot to life. ;-)

Cheers,

Micheal

From Aleksandrs.Sidorovics at dati.lv  Fri Jul  1 02:57:16 2005
From: Aleksandrs.Sidorovics at dati.lv (Aleksandrs Sidorovics)
Date: Sat Jul  2 08:42:35 2005
Subject: [antlr-interest] Help with comments...
Message-ID: <OFDE5A6393.66148553-ONC2257031.003669CA-C2257031.0036AE11@exigengroup.com>

Hello!

Sorry for my bad English (may be, this is a reason in my problems)
I'm beginner in using ANTLR...
First of all I want to convert my JAVA program to identical JAVA program,
but (I think you know that I want to tell you :) ) I receive identical 
source
without comments...
I read your example, find  decisions in Internet (all write to see example 
"Preserving Whitespace..."),
but I don't understand...
Can you send me your modified Java Emitter (with HiddenTokenTypes using), 
which don't ignore comments?

Thanks you very much! I hope that you can help me...

Best regards,
Alexandr Sidorovich
Zilupes 31, Riga LV-1019, Latvia
Phone: +371 6321246
email: aleksi@dati.lv 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050701/6142b3c9/attachment.html
From joerg.rech at gmail.com  Sat Jul  2 11:42:09 2005
From: joerg.rech at gmail.com (=?ISO-8859-1?Q?J=F6rg_Rech?=)
Date: Sat Jul  2 11:42:18 2005
Subject: [antlr-interest] Java1.5 grammar and enum as identifier and not
	as a keyword
In-Reply-To: <8B20F7DC-7B8A-43D0-95C4-0E667F68A2C0@apple.com>
References: <20050626184707.41307.qmail@web30806.mail.mud.yahoo.com>
	<42BF0E6E.4000908@gmx.net> <42BF1A78.2080609@gmail.com>
	<C820AFEA-45C9-4514-BB6C-AC548D516111@apple.com>
	<42C2F218.5030404@gmail.com>
	<8B20F7DC-7B8A-43D0-95C4-0E667F68A2C0@apple.com>
Message-ID: <42C6E001.1030706@gmail.com>

Hi everyone,
  here is an update and short summary regarding the enum problem.

I traced the lexer and parser and found that the following statement in 
the lexer:
        _ttype = testLiteralsTable(_ttype);
sets _ttype to "109" that translates to LITERAL_enum from the TokenTypes 
(my Java15CodeTokenTypes.java file). This token seems to come from the 
"enumDefinition"-rule from the parser.

The "enumDefinition"-rule fires as "enum" is stated as a string. I guess 
that the parser sees the "enum" string, finds no modifiers, and 
interprets the previous IDENT ("Enumeration") as an error for an enum 
definition.

Thus the enableEnum(false) tactic does not work as it only handles the 
enum-identifier in the lexer.


David Ewing schrieb:

> It's called on demand. Another possibility would be to change 'IDENT'  
> to '(IDENT | "enum")' in a few key places elsewhere in the grammar  
> (e.g. variable declarators, expressions). That might be a tad more  
> compatible, but it also might add ambiguities to the grammar. In any  
> case, I haven't tried either, but I'd be interested to hear if they  
> work.


Michael Studman schrieb:

> If you're not in a position to be able to change the source code  
> you're parsing and you can guarantee "enum" is not used as a  keyword  
> then you can call JavaLexer.enableEnum(false) on the  lexer before you 
> pass it into the recogniser.

Strangely, this seems not to work in my system. I use the latest java.g 
with minor changes (e.g., LineNumberAST) and tried to set the 
enumEnabled field after constructing the Lexer:
            Java15CodeLexer javaLexer = new Java15CodeLexer(readerOne);
            javaLexer.setFilename(sourceName);
            
javaLexer.setTokenObjectClass("core.extractor.parser.LineNumberToken");
            javaLexer.enableEnum(false);
Alternatively, I initialized the field with false but that did not work 
either.
    private boolean enumEnabled = false;

Btw: I use antlr-2.7.5.exe on windowsXP to generate the lexer and parser 
and use a filter to hide comments:
            TokenStreamHiddenTokenFilter javaFilter  = new 
TokenStreamHiddenTokenFilter(javaLexer);
            javaFilter.discard(Java15CodeTokenTypes.WS);
            javaFilter.hide(Java15CodeTokenTypes.ML_COMMENT);
            javaFilter.hide(Java15CodeTokenTypes.SL_COMMENT);
            javaFilter.hide(Java15CodeTokenTypes.JAVADOC_COMMENT);
            Java15CodeParser javaParser = new Java15CodeParser(javaFilter);
            javaParser.setFilename(sourceName);
            javaParser.compilationUnit();


Thank you all,
Joerg

-- 
Joerg Rech
Computer Scientist        Web:   http://www.joerg-rech.de
Tel.: (+49|0) 631/10653   email: joerg.rech@gmail.com

From charlie.hubbard at gmail.com  Sat Jul  2 16:20:07 2005
From: charlie.hubbard at gmail.com (Charlie Hubbard)
Date: Sat Jul  2 16:20:11 2005
Subject: [antlr-interest] Help with this grammar?
Message-ID: <b4dfc01b05070216201eb3644b@mail.gmail.com>

I'm having trouble with the following piece of a grammar:

ruleOptions
    : LPAREN
    ( keyword:IDENT (COLON keywordParam)? SEMICOLON )* RPAREN
    ;

keywordParam returns [ String param = "" ] { StringBuffer buf = new
StringBuffer(); }
    : (letter:~SEMICOLON { buf.append( letter ); } )* { param =
buf.toString(); }
    ;

This portion recognizes one or more keyword parameter combinations. 
Each keyword is optionally followed by a section of parameters. 
Really it is only a single parameter, but that parameter could contain
more than one option.  The keyword-parameter sequence is ended by a
semi-colon.  So here is an example:

( message: "Hi, there this is a paramter of message keyword";
classtype: blah; rev: 6;)

The following parser works, but it is failing on some characters I
didn't expect.  I'm currently getting the following error:

exception: filename:17:93: unexpected char: '>'

Here is the line it's having trouble with:

msg:"EXPLOIT delegate proxy overflow"; dsize:>1000; 

the '>' character is not recogized by that grammar.  Why?  I thought
the use of ~SEMICOLON would recognized everything, but ';'.

I'm new to ANTLR, but I'm beginning to get the hang of it.  But I'm
still getting hung up on little things like this.

Thanks
Charlie
From nbsherid at secsme.org.au  Sat Jul  2 16:52:00 2005
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Sat Jul  2 16:52:00 2005
Subject: [antlr-interest] Help with this grammar?
In-Reply-To: <b4dfc01b05070216201eb3644b@mail.gmail.com>
Message-ID: <000201c57f61$0a1c76c0$0500a8c0@nigel>


> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Charlie Hubbard
> Sent: Sunday, 3 July 2005 9:20 AM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] Help with this grammar?
> 
> I'm having trouble with the following piece of a grammar:
> 
> ruleOptions
>     : LPAREN
>     ( keyword:IDENT (COLON keywordParam)? SEMICOLON )* RPAREN
>     ;
> 
> keywordParam returns [ String param = "" ] { StringBuffer buf = new
> StringBuffer(); }
>     : (letter:~SEMICOLON { buf.append( letter ); } )* { param =
> buf.toString(); }
>     ;
> 
> This portion recognizes one or more keyword parameter combinations.
> Each keyword is optionally followed by a section of parameters.
> Really it is only a single parameter, but that parameter could contain
> more than one option.  The keyword-parameter sequence is ended by a
> semi-colon.  So here is an example:
> 
> ( message: "Hi, there this is a paramter of message keyword";
> classtype: blah; rev: 6;)
> 
> The following parser works, but it is failing on some characters I
> didn't expect.  I'm currently getting the following error:
> 
> exception: filename:17:93: unexpected char: '>'
> 


What is your "charVocabulary" setting? If you do not define a character to
watch in the lexer, it is treated as an invalid character, and will not even
be recognised by ~SEMICOLON.

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435


From bastian.schmitz at udo.edu  Sun Jul  3 03:36:37 2005
From: bastian.schmitz at udo.edu (Bastian Schmitz)
Date: Sun Jul  3 03:36:54 2005
Subject: [antlr-interest] nested comments
Message-ID: <42C7BFB5.5010008@udo.edu>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

hi,
i'm trying to figure out a lexer rule for c-style nested comment
regognition. what i got so far looks like this:

ML_COMMENT
  :
  "/*" ML_COMMENT_CONTENT
  ( options {greedy=true;} : ML_COMMENT ML_COMMENT_CONTENT ) *
  "*/"
  {$setType(Token.SKIP);}
;

protected
ML_COMMENT_CONTENT
:
(
     { LA(2)!='/' }? '*'
  |  { LA(2)!='*' }? '/'
  |  '\r' '\n'  {newline();}
  |  '\r'       {newline();}
  |  '\n'       {newline();}
  |  ~('*'|'/'|'\n'|'\r')
)*
;

this matches mutliline nested comments (i havn't found a counterexample)
but i get 3 errors about lexical nondeterminisms. the one about
linefeeds is ok for me; when i change the subrule matching behavior to
greedy/non-greedy the lexer doesn't work correctly anymore.
so what do i have to change to eleminate the warnings or is there an
easier or better way to handle this task.

best regards,
bastian schmitz

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.5 (MingW32)

iD8DBQFCx7+16Jg7o3nQ6wARAup0AJoCs/GAtUWFq+vThHNMpW+EQOdpVQCeK/SC
4KTnwWPNhgepGrJGyh+Mpi4=
=2siZ
-----END PGP SIGNATURE-----
From xiaogao at mails.tsinghua.edu.cn  Sun Jul  3 08:39:53 2005
From: xiaogao at mails.tsinghua.edu.cn (xiaogao@mails.tsinghua.edu.cn)
Date: Sun Jul  3 08:58:30 2005
Subject: [antlr-interest] Using unicode characters in .g files
Message-ID: <320405193.16443@mails.tsinghua.edu.cn>

Hello, everyone!
   I am a newcomer to the mailing list. I have a problem. How can I use unicode
characters in .g files so that I can comment it using my native language? 
   Thank you!				

　　　　　　　　Xia Gao
　　　　　　　　xiaogao@mails.tsinghua.edu.cn
　　　　　　　　　　2005-07-03


From charlie.hubbard at gmail.com  Sun Jul  3 09:12:01 2005
From: charlie.hubbard at gmail.com (Charlie Hubbard)
Date: Sun Jul  3 09:12:04 2005
Subject: [antlr-interest] Help with this grammar?
In-Reply-To: <000201c57f61$0a1c76c0$0500a8c0@nigel>
References: <b4dfc01b05070216201eb3644b@mail.gmail.com>
	<000201c57f61$0a1c76c0$0500a8c0@nigel>
Message-ID: <b4dfc01b05070309126bcaa5f9@mail.gmail.com>

My charVocabulary is set to:

charVocabulary = '\0'..'\377';

I figured that would cover it, but it's not recognizing the '>'.

Thanks
Charlie


On 7/2/05, Nigel Sheridan-Smith <nbsherid@secsme.org.au> wrote:
> 
> > -----Original Message-----
> > From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> > bounces@antlr.org] On Behalf Of Charlie Hubbard
> > Sent: Sunday, 3 July 2005 9:20 AM
> > To: antlr-interest@antlr.org
> > Subject: [antlr-interest] Help with this grammar?
> >
> > I'm having trouble with the following piece of a grammar:
> >
> > ruleOptions
> >     : LPAREN
> >     ( keyword:IDENT (COLON keywordParam)? SEMICOLON )* RPAREN
> >     ;
> >
> > keywordParam returns [ String param = "" ] { StringBuffer buf = new
> > StringBuffer(); }
> >     : (letter:~SEMICOLON { buf.append( letter ); } )* { param =
> > buf.toString(); }
> >     ;
> >
> > This portion recognizes one or more keyword parameter combinations.
> > Each keyword is optionally followed by a section of parameters.
> > Really it is only a single parameter, but that parameter could contain
> > more than one option.  The keyword-parameter sequence is ended by a
> > semi-colon.  So here is an example:
> >
> > ( message: "Hi, there this is a paramter of message keyword";
> > classtype: blah; rev: 6;)
> >
> > The following parser works, but it is failing on some characters I
> > didn't expect.  I'm currently getting the following error:
> >
> > exception: filename:17:93: unexpected char: '>'
> >
> 
> 
> What is your "charVocabulary" setting? If you do not define a character to
> watch in the lexer, it is treated as an invalid character, and will not even
> be recognised by ~SEMICOLON.
> 
> Nigel
> 
> --
> Nigel Sheridan-Smith
> PhD research student
> 
> Faculty of Engineering
> University of Technology, Sydney
> Phone: 02 9514 7946
> Fax: 02 9514 2435
> 
> 
>
From eldencrom at comcast.net  Mon Jul  4 09:45:39 2005
From: eldencrom at comcast.net (Elden Crom)
Date: Mon Jul  4 09:45:53 2005
Subject: [antlr-interest] nested comments
Message-ID: <42C967B3.6070008@comcast.net>



This isn?t the prettiest thing but it seems to work?..
(Nesting is only applied to ML comments ie /* comment /* nested comment 
*/ still a comment */)

{...
int ML_depth=0;
...
}
// nested multiple-line comments
ML_COMMENT
: "/*" {ML_depth=1;}
( /* '\r' '\n' can be matched in one alternative or by matching
'\r' in one iteration and '\n' in another. I am trying to
handle any flavor of newline that comes in, but the language
that allows both "\r\n" and "\r" and "\n" to all be valid
newline is ambiguous. Consequently, the resulting grammar
must be ambiguous. I'm shutting this warning off.
*/
options {
generateAmbigWarnings=false;
}
:
{ LA(2)!='/' }? '*'
| { LA(2)=='/' && ML_depth!=1 }? '*' {ML_depth--;} //remove one nesting 
level
| "/*" {ML_depth++;}
| '\r' '\n' {newline();}
| '\r' {newline();}
| '\n' {newline();}
| ~('*'|'\n'|'\r')
)*
//{ ML_depth==1 && p("exiting ML_depth="+ML_depth);}? "*/"
"*/"
{$setType(Token.SKIP);}
;


From eldencrom at comcast.net  Mon Jul  4 09:46:55 2005
From: eldencrom at comcast.net (Elden Crom)
Date: Mon Jul  4 09:47:06 2005
Subject: [antlr-interest] Lexor Alternative lose (or Newbie question)
Message-ID: <42C967FF.6040207@comcast.net>

In running the lexor definition:

class ExprLexer extends Lexer;
options {
k=3;
charVocabulary='\u0000'..'\u007F'; // allow ascii
}
//STRING_LITERAL :'"' (ESC|~('"'|'\\'|'_'))* '"' ;
STRING_LITERAL :'"' (ESC|~('"'|'\\'))* '"' ;


NUMBER :(DECNUM|RADIXNUM);

protected ESC : '\\' NUMBER '~';
protected ALPHA : ('A'..'F');
protected NUM : ('0'..'9');
protected RADIXNUM: '0' (ALPHA|NUM) '_' (ALPHA|NUM)+ ('.' (ALPHA|NUM))? 
('#' (ALPHA|NUM))?;
protected DECNUM: (NUM)+ ('.' (NUM))? ('#' (NUM))?;

This lexor complains that:
ANTLR Parser Generator Version 2.7.5 (20050201) 1989-2005 jGuru.com
Generating ExprLexer.txt
s_t.g:10:20: warning:lexical nondeterminism between alts 1 and 2 of 
block upon
s_t.g:10:20: k==1:'0'
s_t.g:10:20: k==2:'0'..'9'
s_t.g:10:20: k==3:'_'
Generating ExprLexerTokenTypes.txt
Generating ExprLexerTokenTypes.txt

(line 10 is the ?NUMBER:? rule)
Changing STRING_LITERAL to the commented version removes the warning.
But, I believe that the original should not have created the warning.

In looking at ?ExprLexer.txt? (the result of ?antlr-2.7.5.exe 
-diagnostic s_t.g?), I see that under ?*** Lexer Rule: mNUMBER? k==3 
contains ?_? for both ?Rule Reference: mDECNUM? and ?Rule Reference: 
mRADIXNUM?, causing the nondeterminism.

I believe that mDECNUM?s Alternate(1) should have been split into 2 
different look aheads. One that took k==2 ?~? and stopped and another 
that should have k==2 as ?'#', '.', NUM? and k==3 as ?ALPHA|NUM?.

Am I a newbie, or is this an antlr error?


From ric.klaren at gmail.com  Mon Jul  4 10:45:04 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Jul  4 10:45:04 2005
Subject: [antlr-interest] Using unicode characters in .g files
In-Reply-To: <320405193.16443@mails.tsinghua.edu.cn>
References: <320405193.16443@mails.tsinghua.edu.cn>
Message-ID: <42C975A0.9020504@gmail.com>

Hi,

xiaogao@mails.tsinghua.edu.cn wrote:
> Hello, everyone!
>    I am a newcomer to the mailing list. I have a problem. How can I use unicode
> characters in .g files so that I can comment it using my native language? 

You should be able to change antlr/antlr.g in the distribution find the 
part reading:

class ANTLRLexer extends Lexer;
options {
         k=2;
         exportVocab=ANTLR;
         testLiterals=false;
         interactive=true;
         charVocabulary='\003'..'\377';
}

and change the charVocabulary option to:

charVocabulary='\u0000'..'\uFFFE';

Then build antlr according to the instructions.

Cheers,

Ric
From subhobrotosinha at rediffmail.com  Mon Jul  4 11:00:58 2005
From: subhobrotosinha at rediffmail.com (Subhobroto  Sinha)
Date: Mon Jul  4 10:59:34 2005
Subject: [antlr-interest] How to resolve nondeterminism in treeparser ?
Message-ID: <20050704180058.23404.qmail@webmail26.rediffmail.com>

 ?
Consider the grammar : http://www.geocities.com/subhobrotosinha/dsd.txt
Driver : http://www.geocities.com/subhobrotosinha/dsddriver.txt

Here's dsd.txt for the lazybones out there :
////////////////////////////////////////
/*
	Parser for Input like : lowpass(3, 2.0, 4.56, 1.29, 4.78, 9, 4.99, 5.67, 4.89)
	Produces Output : float a[8] = {2.0, 4.56, 1.29, 4.78, 9, 4.99, 5.67, 4.89 };
*/
header { #include <iostream> }

options { language = Cpp; }

/* Start of tree parser */

class DSDTreeParser extends TreeParser;

{
	unsigned int m_uiCoeffCount;
	bool m_bFirstPass;
}

firstPass
{
	m_uiCoeffCount = 0;
	m_bFirstPass = true;
}
: functionName order (csvCoeffs)+
{
	std::cout<<"\nfloat a["<<m_uiCoeffCount<<"] = {";
}
;

secondPass
{
	m_bFirstPass = false;
}
: functionName order (csvCoeffs)+
;

functionName : ID;

order : INT;

csvCoeffs : (coefficient)+;

coefficient :	(i : INT
			{
				if(m_bFirstPass) ++m_uiCoeffCount;
				else
				{
					--m_uiCoeffCount;
					std::cout<<i->getText()<<((0 == m_uiCoeffCount) ? " };" : ", ");
				}
						
			}
			|
			f : FLOAT
			{
				if(m_bFirstPass) ++m_uiCoeffCount;
				else
				{
					--m_uiCoeffCount;
					std::cout<<f->getText()<<((0 == m_uiCoeffCount) ? " };" : ", ");
				}
			}
			)+;

/** Start of parser */

class DSDParser extends Parser;

options {
	genHashLines = true; // include line number information
	buildAST = true; // uses CommonAST by default
}

startRule : functionName LPAREN! order COMMA! (csvCoeffs)+ RPAREN!;

functionName : ID;

order : INT;

csvCoeffs : coefficient (COMMA! coefficient)*;

coefficient :	(INT | FLOAT);

/** Start of lexer */

class DSDLexer extends Lexer;

FLOAT_OR_INT :
			( INT '.' ) => FLOAT { $setType(FLOAT); }
			|
			INT { $setType(INT); }
			;

protected INT
options {
	testLiterals = true;
	paraphrase = "a constant integer";
}

: ('0' .. '9')+;

protected FLOAT
options {
	testLiterals = true;
	paraphrase = "a floating point value";
}

: INT '.' INT;

ID
options {
	testLiterals = true;
	paraphrase = "a variable";
}
	:	('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
	;

COMMA : ',';

SEMI : ';';

PLUS : '+';

MINUS : '-';

LPAREN : '(';

RPAREN : ')';

WS : (
	options { greedy = true; }

	: '\r' '\n' {newline();}
	| '\n' 	{newline();}
	| '\t'
	| ' '
	)+
	{ $setType(antlr::Token::SKIP); }
;
/* EOF */
////////////////////////////////////////

ANTLR is currently angry :

DSD.g:40: warning:nondeterminism upon
DSD.g:40:     k==1:INT,FLOAT
DSD.g:40:     between alt 1 and exit branch of block
DSD.g:42: warning:nondeterminism upon
DSD.g:42:     k==1:INT
DSD.g:42:     between alt 1 and exit branch of block
DSD.g:42: warning:nondeterminism upon
DSD.g:42:     k==1:FLOAT
DSD.g:42:     between alt 2 and exit branch of block

Altough my test cases are passing allright, I feel bad about ANTLR being so grumpy.

Please clear my misconceptions ?

PS : If anything above makes you feel queasy, let me know ! You can do it better ? Let me know !

Regards

Subhobroto Sinha
http://www.geocities.com/subhobrotosinha
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050704/e96f9265/attachment.html
From subhobrotosinha at rediffmail.com  Mon Jul  4 11:02:22 2005
From: subhobrotosinha at rediffmail.com (Subhobroto  Sinha)
Date: Mon Jul  4 11:00:59 2005
Subject: [antlr-interest] Question on the protected keyword in lexer
Message-ID: <20050704180222.23420.qmail@webmail25.rediffmail.com>

 ?
When I hit a block in parsing ints and floats, a little bit of Googling turned out that I was not the first one ;)

As I have found the ANTLR docs to be lacking for beginners, I have (unofficially) set myself to document the way I am working with ANTLR - perhaps it can help a newbie or two after me.

Currently, I am very interested in gathering as much as possible re/ parsing floats and ints.

Here's my first question :

Consider the grammar :

FLOAT_OR_INT : ( INT '.' ) => FLOAT { $setType(FLOAT); }
		| INT { $setType(INT); } ;

protected INT
options {
	testLiterals = true;
	paraphrase = "a constant integer";
}

: ('0' .. '9')+;

protected FLOAT
options {
	testLiterals = true;
	paraphrase = "a floating point value";
}

: INT '.' INT;

If I remove 'protected' from the tokens, ANTLR hits me with :

ANTLR Parser Generator   Version 2.7.5 (20050201)   1989-2005 jGuru.com
DSD.g: warning:lexical nondeterminism between rules FLOAT_OR_INT and INT upon
DSD.g:     k==1:'0'..'9'
DSD.g: warning:lexical nondeterminism between rules FLOAT_OR_INT and FLOAT upon
DSD.g:     k==1:'0'..'9'
DSD.g: warning:lexical nondeterminism between rules INT and FLOAT upon
DSD.g:     k==1:'0'..'9'

but it issues no warning if INT and FLOAT are made protected.

Can you explain the reasons for the warnings (verbosely if possible) ?

If the responses are assuring, I intend to follow up with more technical questions which are already running wild in me.
Finally, I hope to consolidate all the answers into a verbose FAQ entry.

Regards

Subhobroto Sinha
http://www.geocities.com/subhobrotosinha
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050704/73dacc70/attachment.html
From ewbank at gmail.com  Mon Jul  4 11:40:37 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Mon Jul  4 11:40:41 2005
Subject: [antlr-interest] Question on the protected keyword in lexer
In-Reply-To: <20050704180222.23420.qmail@webmail25.rediffmail.com>
References: <20050704180222.23420.qmail@webmail25.rediffmail.com>
Message-ID: <dd3a065f050704114030da0e76@mail.gmail.com>

INT and FLOAT are "protected", meaning that they are not considered in 
determining what may be returned from the lexer. That's all it means.
 Said another way, if I see the token "0' following by ".", the lexer cannot 
know if it is supposed to use rule INT, or rule FLOAT_OR_INT. Making INT 
protected means that it is not visible outside the lexer, and therefore it's 
not considered when determining ambiguity.
 Hope this helps,
- Bryan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050704/ddf3fc00/attachment.html
From ewbank at gmail.com  Mon Jul  4 11:41:29 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Mon Jul  4 11:41:36 2005
Subject: Fwd: [antlr-interest] How to resolve nondeterminism in treeparser ?
In-Reply-To: <dd3a065f050704113735359bb1@mail.gmail.com>
References: <20050704180058.23404.qmail@webmail26.rediffmail.com>
	<dd3a065f050704113735359bb1@mail.gmail.com>
Message-ID: <dd3a065f05070411416137ad14@mail.gmail.com>

:-( forgot to change the "reply" address - if anyones keeping metrics for 
evalating that particular issue :-(

---------- Forwarded message ----------
From: Bryan Ewbank <ewbank@gmail.com>
Date: Jul 4, 2005 2:37 PM
Subject: Re: [antlr-interest] How to resolve nondeterminism in treeparser ?
To: Subhobroto Sinha <subhobrotosinha@rediffmail.com>

The problem is that you have three levels of nested "(...)+" operators, so 
after the first INT|FLOAT, ANTLR doesn't know if it is supposed to leave the 
innermost loop, or keep spinning.
 The three levels of nesting are here:
  (1) firstPass : functionName order (csvCoeffs)+ ;
(1) secondPass : functionName order (csvCoeffs)+ ;
 (2) csvCoeffs : (coefficient)+; 
 (3) coefficient : (i : INT | f : FLOAT )+;
 You need to decide which of these should be a looping construct, and 
discard the "+" operator around the other two levels of expression. I think, 
from reading the input grammar, the "+" in the (3) rule is wrong - but 
that's just a guess. 
 Another option, perhaps more what you meant to do, is to have the parser 
build a tree preserving the shape of the original input. That would means 
that there would be a tree containing a CSV_COEFF node with COEFFICIENT 
nodes beneath it, and INT|FLOAT nodes beneath that. 
 For example, replace this:
 csvCoeffs : coefficient (COMMA! coefficient)*;
With this:
 csvCoeffs : coefficient (COMMA! coefficient)* { ## = 
#(#[CSV_COEFF,"CSV_COEFF"], ##); } ;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050704/776edf3d/attachment-0001.html
From rkmspence at yahoo.co.uk  Mon Jul  4 13:30:52 2005
From: rkmspence at yahoo.co.uk (Richard Spence)
Date: Mon Jul  4 13:30:59 2005
Subject: [antlr-interest] Re: nested comments
Message-ID: <057081b31c6e6641e6f948ea0e9023de@yahoo.co.uk>

Here is a complete, working, nested C-style comment lexer fragment. The 
NEWLINE rule allows the 3 different EOL combinations of '\n' and '\r'. 
C++ target.

CCOMMENT
	:   "/*"
         (   CCOMMENT
         |   '*'
             (   NEWLINE
             |   ~('/' | '\n' | '\r')
             )
		|	NEWLINE
		|	~('/' | '*' | '\n' | '\r')
         )*
         "*/"
         {$setType(antlr::Token::SKIP);}
	;

protected NEWLINE
{
     unsigned int mask = 0;
}
     :   (   options {greedy=true;}:

             '\n' | '\r'
             {
                 unsigned int bit = 1 << $getText[0];

                 if(mask & bit) {
                     mask = bit;
                     newline();
                 }
                 else {
                     mask |= bit;
                 }
             }
         )+
         {
             if(mask) {
                 newline();
             }
         }
     ;

--
-rkms

From evansgr_99 at hotmail.com  Mon Jul  4 18:08:17 2005
From: evansgr_99 at hotmail.com (Gary Evans)
Date: Mon Jul  4 18:08:21 2005
Subject: [antlr-interest] Newbie Question - does antlr.py work?
In-Reply-To: <001301c57ea1$41b14c20$6402a8c0@hercules>
Message-ID: <BAY102-F7A3E9D588666BF1766AFFEAE60@phx.gbl>

Michael,

Thanks, that is encouraging.  I have taken a preliminary stab at it so far, 
and it will be larger project than I thought!  The templates will help a 
lot.  Just a couple of questions about v3:

1) will the runtime remain substantially the same in version 3, or will 
those be completely changed?  I am already about 15% of the way through 
translating antlr.py to Perl6.

2) where can I learn more about version 3?  I am only finding snippets about 
it on the web, and cannot even find when it is due to be released (probably 
"when it is done", right?).  ;-)

Thanks again, the more I learn about Antlr, the more I like it!

Gary

>From: "Micheal J" <open.zone@virgin.net>
>To: <antlr-interest@antlr.org>
>Subject: RE: [antlr-interest] Newbie Question - does antlr.py work?
>Date: Sat, 2 Jul 2005 01:59:07 +0100
>
>Gary,
>
> > I see what you mean.  There are files in the java source for
> > the "main"
> > program called CSharpCodeGenerator.java,
> > PythonCodeGenerator.java, etc.
>
><SNIP>
>
> > Then, I would have to translate antlr.py into a Perl module
> > so the runtime
> > would be used with the parser.
> >
> > Hmm... I guess I will have to study up on Java for a while.
> > But thank you
> > very much for your advice - you have given me hope again!
>
>It gets better actually. Ignore the ANTLR 2.7.5 stuff. ANTLR v3 is 
>currently
>at the early access stage and has a brand new code generation architecture
>that makes it *much* to add a new target language. It's a template-based
>system.
>
>Just wait a while...and you can bring your parrot to life. ;-)
>
>Cheers,
>
>Micheal
>


From prashant.deva at gmail.com  Mon Jul  4 20:44:18 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Mon Jul  4 20:44:20 2005
Subject: [antlr-interest] joy! (tree parsing)
In-Reply-To: <B20B0FB7-55A5-4296-B45A-F2209F26CCE0@cs.usfca.edu>
References: <FD83A4CF-6458-4AA1-A974-35ECB86E1E2E@cs.usfca.edu>
	<671244385.20050629113113@gmx.net>
	<B20B0FB7-55A5-4296-B45A-F2209F26CCE0@cs.usfca.edu>
Message-ID: <41fed8f80507042044725d8c66@mail.gmail.com>

Actually you can do incremental parsing without using any parser states at all.

Its a little too complex to describe in this email. 
I will write a paper on the algorithm once i am done with Antlr Studio.

PRASHANT

---------- Forwarded message ----------
From: Terence Parr <parrt@cs.usfca.edu>
Date: Jun 29, 2005 10:24 PM
Subject: Re: [antlr-interest] joy! (tree parsing)
To: ANTLR Interest <antlr-interest@antlr.org>



On Jun 29, 2005, at 2:31 AM, Sebastian Mies wrote:

> Hi Terence,
>
> TP> So tree parsing error messages pretty much suck in ANTLR 2.x. I am
> TP> building a simple C tree parser and I got a parse error:
>
> TP> [program, declaration, block, stat, forStat, expr]: line 8:8
> TP> decision=<<57:1: expr : ( ^( EQEQ expr expr ) | ^( LT expr
> expr ) | ^
> TP> ( PLUS expr expr ) | atom );>> state 0 (decision=7) no viable alt;
> TP> token=[@45,76:76='=',<16>,8:8]
> Nice!! :-)
> So, if the stack track is available - next step whould be a
> incremental parsing engine? at least it would be nice to save the
> parser/lexer state at certain positions to restart parsing from
> there until it matches another saved state.
> Thats not incremental parsing in the common sense, but it would be
> enough for most cases.

Hi :)  Well, I sort of cheat by asking the Java runtime for the stack
trace.  I will look at incremental parsing in the future for sure.
Maybe I can convince Dave Ewing at apple to educate me on the subject :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
From doctlo-antlr at yahoo.com  Mon Jul  4 23:46:37 2005
From: doctlo-antlr at yahoo.com (doctlo-antlr@yahoo.com)
Date: Mon Jul  4 23:48:46 2005
Subject: [antlr-interest] Token lookup crashing program.
In-Reply-To: <mailman.14.1120526133.2691.antlr-interest@antlr.org>
References: <mailman.14.1120526133.2691.antlr-interest@antlr.org>
Message-ID: <d52kc1tbdsadadmno453bnnv65c6s2grh2@4ax.com>

I've included here a part of a grammar I am having trouble with.
The problem with is with the actions I've added.
Without the actions, ( well with the only actions being print
statements ), 

( I've also include here a part of the lexer that you need to
understand the parser. )

The problem is that once the parser is run, the 3815th
time palpha is run,. I get an access violation. In particular
( explaining the reason for the commented out statement )
it is LT(0) which causes an access violation ( or a segment
violation).

This error happens on both WIndows and Linux. If it is caused
because some line of code corrupts memory, I have not been
able to find that line. Despite using three different memory
checking systems.

 Tracing matches ( using actions that print, I know that
it does not fail because there is no more to parse. ) I know
that it does not finish reading data. The data at that
line is nearly identical to the data in other lines previously parsed.

Since I can't find any memory corruption happening, and
since this happens consistently on two platforms I have got to assume
there is something wrong with antlr, or I am doing something
incorrectly with antlr. Can someone suggest something?

protected psign returns [string value]
    : SIGN
       {
         value=LT(0)->getText();
       };
protected pnumber returns [string value]
    : NUMBER
        {
            value=LT(0)->getText();
        };
integer returns [int value=0] 
    {
        string ps,ns;
    }
    : (ps=psign)? ns=pnumber
        { 
            string s=ps+ns;
            istringstream ss(s);
            ss>>value;
        };
protected  palpha returns [string value]: ALPHA
        {
//            antlr::RefToken r=LT(0);
            value=LT(0)->getText();
        };

Lexer part.

WS: ( ' '| '\t' |'\f')+ {};
protected
DIGIT: '0'..'9';
NUMBER: ( DIGIT )+;
protected
LETTER: 'a'..'z'|'A'..'Z'|'_'|'#'|'('|')';
ALPHA: ( LETTER ) +;
SIGN: '-';
protected
BEOL: ( "\r\n" | "\n" ) {newline();};
EOL:  BEOL ( WS BEOL | BEOL )*;

--
Thad 
From doctlo-antlr at yahoo.com  Tue Jul  5 01:29:43 2005
From: doctlo-antlr at yahoo.com (doctlo-antlr@yahoo.com)
Date: Tue Jul  5 01:31:54 2005
Subject: [antlr-interest] Token lookup crashing program.
In-Reply-To: <d52kc1tbdsadadmno453bnnv65c6s2grh2@4ax.com>
References: <mailman.14.1120526133.2691.antlr-interest@antlr.org>
	<d52kc1tbdsadadmno453bnnv65c6s2grh2@4ax.com>
Message-ID: <t0gkc1pqookhi6uh4ckk13947ecqhj6pm1@4ax.com>

A couple of things I've observed.
The input is line oriented ( which should be apparent from the
definition of EOL and BEOL ).

After some basic data, a set of lines is sent which is parsed 
exactly the same. Then another set is parsed in the same way.

basic_dt1
basic_dt2
basic_dt3
...
<type1>
type1_1
type1_2
type1_3
...
</type1>
<type2>
type2_1
type2_2
type2_3
...
</type2>
final fatal

Three observations about the error:
1) It happens while parsing type2 data, about 3/4 of the way from the 
     end. When I remove the last line correctly parsed it still fails,
     but when I remove six ( but not five ) lines, that clears things 
     up.
2) If I delete all but one piece of type1 data, the program runs OK.
3) If I delete all the type2 data  after the last correct 
     line parsed, the program runs correctly. But if I keep the next 
     line of type two data, the program fails again.


--
Thad 
From mail at martin-probst.com  Tue Jul  5 02:14:45 2005
From: mail at martin-probst.com (Martin Probst)
Date: Tue Jul  5 02:14:50 2005
Subject: [antlr-interest] Question on the protected keyword in lexer
In-Reply-To: <20050704180222.23420.qmail@webmail25.rediffmail.com>
References: <20050704180222.23420.qmail@webmail25.rediffmail.com>
Message-ID: <1120554885.12957.8.camel@localhost.localdomain>

Hi,

A slightly faster way would probably be:

-- snip --
tokens {
  INT,
  FLOAT
}
-- snip --
NUMBER:
  (DIGIT)+ { $setType(INT); }  ( '.' (DIGIT)+ { $setType(FLOAT); } )?;

protected DIGIT:
  '0'..'9';

... in which case you avoid the backtracking you'd have to do with your
implementation (e.g. with your code each time an integer is parsed an
exception is thrown, caught, and the integer is re-parsed, which is
unnecessary).

You can easily extend the above to also allow doubles (a la 0.4132e-13)
and signed numbers.

Regards,
Martin

From tarunkhanna at gmail.com  Tue Jul  5 08:34:48 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Tue Jul  5 08:34:51 2005
Subject: [antlr-interest] Parsing Incomplete expressions
Message-ID: <dbcf4c2c05070508346bb964d7@mail.gmail.com>

I am trying to write a parser to parse incomplete expressions. This is 
required to provide auto-complete features. For example: 

Class abc
{
int a;
int b;
}obj;

Now if the user types

obj.

The front-end shoud be able to provide completions in the form of class 
members of abc. However for this to happen, it should be able to parse the 
expresssion to the left of the dot (which can be an incomplete expression). 
Is there any past work that has been done similar to this one using ANTLR, 
or if there is any literature on this? Any help would be greatly 
appreciated.

Thanks
Tarun
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050705/40a85615/attachment.html
From bastian.schmitz at udo.edu  Tue Jul  5 08:36:53 2005
From: bastian.schmitz at udo.edu (Bastian Schmitz)
Date: Tue Jul  5 08:37:02 2005
Subject: [antlr-interest] Re: nested comments
In-Reply-To: <057081b31c6e6641e6f948ea0e9023de@yahoo.co.uk>
References: <057081b31c6e6641e6f948ea0e9023de@yahoo.co.uk>
Message-ID: <42CAA915.3060100@udo.edu>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Both of you, thanks for you answers.

bastian
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.5 (MingW32)

iD8DBQFCyqkV6Jg7o3nQ6wARAlZvAJwMEAa4USqnEFekKWJhOoibMFe2CgCghIPw
qcvVi8+h5Gt7st9IEGlvB9Q=
=Ay1g
-----END PGP SIGNATURE-----
From parrt at cs.usfca.edu  Tue Jul  5 11:48:45 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Jul  5 11:47:55 2005
Subject: [antlr-interest] Newbie Question - does antlr.py work?
In-Reply-To: <BAY102-F7A3E9D588666BF1766AFFEAE60@phx.gbl>
References: <BAY102-F7A3E9D588666BF1766AFFEAE60@phx.gbl>
Message-ID: <4E4D6B70-6475-4DC2-811A-9644B56C41C6@cs.usfca.edu>


On Jul 4, 2005, at 6:08 PM, Gary Evans wrote:

> Michael,
>
> Thanks, that is encouraging.  I have taken a preliminary stab at it  
> so far, and it will be larger project than I thought!  The  
> templates will help a lot.  Just a couple of questions about v3:
>
> 1) will the runtime remain substantially the same in version 3, or  
> will those be completely changed?  I am already about 15% of the  
> way through translating antlr.py to Perl6.

The runtimes will change to suit my new model for trees etc...

> 2) where can I learn more about version 3?  I am only finding  
> snippets about it on the web, and cannot even find when it is due  
> to be released (probably "when it is done", right?).  ;-)

Download it and the examples and dig in :)

Look at src/org/antlr/codegen/templates/Java.stg for the templates  
file as it exists for Java.

> Thanks again, the more I learn about Antlr, the more I like it!

Hooray!

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Tue Jul  5 12:07:59 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Jul  5 12:07:11 2005
Subject: [antlr-interest] ANTLR 3.0ea5 released
Message-ID: <16F3537A-022B-445B-A07E-12D8AED69806@cs.usfca.edu>

Howdy.  A few bug fixes and nice reorganization internally yields 3.0ea5

http://www.antlr.org/download/antlr-3.0ea4.tar.gz
http://www.antlr.org/download/examples-v3.tar.gz

Jean will release another version of ANTLRWorks soon.

Here is the change list in the README.txt file:
---------------
3.0ea5 - July 5, 2005

* Using '\n' in a parser grammar resulted in a nonescaped version of  
'\n' in the token names table making compilation fail.  I fixed this  
by reorganizing/cleaning up portion of ANTLR that deals with  
literals.  See comment org.antlr.codegen.Target.

* Target.getMaxCharValue() did not use the appropriate max value  
constant.

* ALLCHAR was a constant when it should use the Target max value  
def.  set complement for wildcard also didn't use the Target def.   
Generally cleaned up the max char value stuff.

* Code gen didn't deal with ASTLabelType properly...I think even the  
3.0ea4 example tree parser was broken! :(

* Added a few more unit tests dealing with escaped literals
-------------

Oh and for fun, here is an SMTP grammar (simplified) that I may use  
for my lectures in India coming up.  It's a nice example using  
literals in the grammar

grammar SMTP;

requests : request* "QUIT" '\n';

request : hello from to data ;

hello : "HELO " host '\n' ;

from : "MAIL FROM: " addr '\n' ;

to : "RCPT TO: " addr '\n' ;

data : DATA ;

host : ID ('.' ID)* ;

addr : ID '@' host ;

ID : 'a'..'z' ('0'..'9'|'a'..'z')* ;

DATA : "DATA" '\n' ( options {greedy=false;}: . )* '\n' '.' '\n' ;

Here is some sample input:

HELO cs.usfca.edu
MAIL FROM: parrt@foo.com
RCPT TO: parrt@bar.com
DATA
hi Ter, I'm in India!
.
QUIT

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From subhobrotosinha at rediffmail.com  Tue Jul  5 12:22:44 2005
From: subhobrotosinha at rediffmail.com (Subhobroto  Sinha)
Date: Tue Jul  5 12:21:20 2005
Subject: [antlr-interest] More on FLOAT and INT
Message-ID: <20050705192244.18654.qmail@webmail35.rediffmail.com>

 ?
While browsing through the examples, I came across this definition in IDL.G :

//////////////
INT
options {
  paraphrase = "an integer value";
}
	: (DIGIT)+                  // base-10
      (  '.' (DIGIT)* 	{$setType(FLOAT);}
	  (('e' | 'E') ('+' | '-')? (DIGIT)+)?
	  | ('e' | 'E') ('+' | '-')? (DIGIT)+ {$setType(FLOAT);}
      )?
	;

FLOAT
options {
  paraphrase = "an floating point value";
}

	:    '.' (DIGIT)+ (('e' | 'E') ('+' | '-')? (DIGIT)+)?
     	;

protected
DIGIT
options {
  paraphrase = "a digit";
}
	:	'0'..'9'
	;
//////////////

As far as I can follow, this exactly parses all C/C++ type floating and integer values.
However, the rules are inadequate in parsing floating point numbers in other languages like Java.

I just wanna know if I am wrong. All my numbers are in base 10 (I will allow other bases, except 2, eventually)

Regards

Subhobroto Sinha
http://www.geocities.com/subhobrotosinha
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050705/4b15cc08/attachment.html
From subhobrotosinha at rediffmail.com  Tue Jul  5 12:23:14 2005
From: subhobrotosinha at rediffmail.com (Subhobroto  Sinha)
Date: Tue Jul  5 12:21:49 2005
Subject: [antlr-interest] RFC re/ Left factoring and Syntactic Predicate
Message-ID: <20050705192314.17877.qmail@webmail25.rediffmail.com>

 ?
The FLOAT vs INT issue is an often repeated topic, and as I am currently in the same trap, I wish to resolve it as much as possible (to benefit me as well as others)

Intutively defn. of an INT is : ('0' .. '9')+;
A FLOAT is : : INT '.' INT;

Let's write that again :

coefficient : INT | INT DOT INT;

Left Factoring :

coefficient : INT leftNumFactor;

leftNumFactor : DOT INT | /* epsilon */;

However, ANTLR barks at me in a rule in my TreeWalker :

csvCoeffs : (coefficient)+;

It says :

DSD.mail.g:40: warning:nondeterminism upon
DSD.mail.g:40:     k==1:INT
DSD.mail.g:40:     between alt 1 and exit branch of block

I am really in the dark here. I am sure I left factored right, so where is the problem ?
I might mention that the program is working just as I wanted, but I feel bad about any warnings ;)

The complete grammar is available at http://www.geocities.com/subhobrotosinha/dsdmail.txt
The version employing syntactic predicate is at http://www.geocities.com/subhobrotosinha/dsd.txt

On the other hand, an alternate version of mine, which employs syntactic predicate on FLOAT and INT seems to work too, but issues similar nondeterminism warnings in the TreeWalker ?

What am I doing wrong in the tree walker ?

Also, what are your views on left factoring vs. syntactic predicates ?

Regards

Subhobroto Sinha
http://www.geocities.com/subhobrotosinha
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050705/1a8f0976/attachment.html
From subhobrotosinha at rediffmail.com  Tue Jul  5 12:24:17 2005
From: subhobrotosinha at rediffmail.com (Subhobroto  Sinha)
Date: Tue Jul  5 12:22:52 2005
Subject: [antlr-interest] Small snippet to print TreeView
Message-ID: <20050705192417.12531.qmail@mailweb33.rediffmail.com>

 ?
Hi mates

I modified Barry Kelly's code to print out an AST to show a clear child-sibling relationship in a view consistent with those given in the official docs.

Be very careful, in that I wrote AND tested the code in about 10 minutes. I do expect bug reports from you - I will be very disappointed to the contrary.

Enjoy, and please share any comments and changes you make to the snippet. It's in C++.

////////
static void RecurseIntoMyAST(const RefAST& root, const string& strSpacing = "")
{
	if(root == NULL) return; /* You may leave this out */
	
	//Print this node
	cout << strSpacing << root->getText();
	
	//Print all children
	
	for(RefAST child = root->getNextSibling(); child != NULL; child = child->getNextSibling())
	{
		cout << " - " << child->getText();
		
		if(child->getFirstChild() != NULL)
		{
			string strTemp = strSpacing + "    ";
			cout << "\n" << strTemp << "|\n";
			RecurseIntoMyAST(child->getFirstChild(), strTemp);
		}
	}

	if(root->getFirstChild() != NULL)
	{
		cout << "\n" << strSpacing << "|\n";
		RecurseIntoMyAST(root->getFirstChild(), strSpacing);
	}
}
////////

Simply call this on 'parser.getAST()' - it's your call..

I would like if somebody fixed the alignment however (it now is aligned well only for single characters)

Regards

Subhobroto Sinha

http://www.geocities.com/subhobrotosinha
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050705/e35274e2/attachment.html
From virtualaspirin at yahoo.com  Tue Jul  5 13:57:19 2005
From: virtualaspirin at yahoo.com (Akhilesh Mritunjai)
Date: Tue Jul  5 13:57:21 2005
Subject: [antlr-interest] ANTLR 3.0ea5 released
In-Reply-To: <16F3537A-022B-445B-A07E-12D8AED69806@cs.usfca.edu>
Message-ID: <20050705205719.34105.qmail@web30802.mail.mud.yahoo.com>



--- Terence Parr <parrt@cs.usfca.edu> wrote:
> Oh and for fun, here is an SMTP grammar (simplified)
> that I may use  
> for my lectures in India coming up.  It's a nice

Wow Terence, you're going to be in India ??? When,
where ? I should mark it in my calendar.

- Akhilesh

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From parrt at cs.usfca.edu  Tue Jul  5 14:05:33 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Jul  5 14:04:45 2005
Subject: [antlr-interest] ANTLR 3.0ea5 released
In-Reply-To: <20050705205719.34105.qmail@web30802.mail.mud.yahoo.com>
References: <20050705205719.34105.qmail@web30802.mail.mud.yahoo.com>
Message-ID: <D9276EBC-A7A0-4017-BAA4-3981321BC294@cs.usfca.edu>

On Jul 5, 2005, at 1:57 PM, Akhilesh Mritunjai wrote:
> --- Terence Parr <parrt@cs.usfca.edu> wrote:
>
>> Oh and for fun, here is an SMTP grammar (simplified)
>> that I may use
>> for my lectures in India coming up.  It's a nice
>>
>
> Wow Terence, you're going to be in India ??? When,
> where ? I should mark it in my calendar.

Hi.  Oh right...i forgot to mention to people.  I'm doing a grad  
student recruiting tour:  I will give two presentations, one in  
Mumbai and one in Bangalore on the evenings of 25 and 28 July  
respectively.  The venues will be the Taj Mahal Hotel in Mumbai and  
in Bangalore, the Taj Residency. Both presentations will start at 7  
PM.  The problem is that the university is limiting it to 100 people  
(due to room size and food requirements--a buffet dinner will be  
served immediately following our program), preferably people that are  
interested in grad school at USF.  That said, I'll be doing another  
talk at IIT in Mumbai, that I'm sure could hold lots of people.  Are  
you near Mumbai?  Or IISc in Bangalore?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From tarunkhanna at gmail.com  Tue Jul  5 14:47:05 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Tue Jul  5 14:47:07 2005
Subject: [antlr-interest] non-determinism warning
Message-ID: <dbcf4c2c050705144725fe2cf2@mail.gmail.com>

Hi All,

I stumbled across this problem once more, so here I am looking for some 
standard solution to such a problem.

Consider the following production ->

F: LP exp RP | (DOT IDENT)* (DOT TAB)?

There is non-determinism because the parser doesn't know, when to stop 
matching the first DOT and start looking for the second DOT.

Syntactic or semantic predicates can not be used as, there are no 
alternates. I don't want to use a look ahead of more than 1.

Please help...........

-- 
Tarun Khanna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050705/fd523ac6/attachment.html
From monty at codetransform.com  Tue Jul  5 12:01:47 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Tue Jul  5 15:02:14 2005
Subject: [antlr-interest] non-determinism warning
In-Reply-To: <dbcf4c2c050705144725fe2cf2@mail.gmail.com>
References: <dbcf4c2c050705144725fe2cf2@mail.gmail.com>
Message-ID: <42CAD91B.5050207@codetransform.com>

Tarun Khanna wrote:
> Hi All,
> 
> I stumbled across this problem once more, so here I am looking for some
> standard solution to such a problem.
> 
> Consider the following production ->
> 
> F: LP exp RP |  (DOT IDENT)* (DOT TAB)?
> 
> There is non-determinism because the parser doesn't know, when to stop
> matching the first DOT and start looking for the second DOT.
> 
> Syntactic or semantic predicates can not be used as, there are no
> alternates. I don't want to use a look ahead of more than 1.
> 

Why not?  ANTLR only uses the extra lookahead when it is necessary.  k=2
is the perfect solution for this.

Otherwise you could keep your own state and do something like

 (DOT
   {!tabMatched}?(IDENT|TAB{tabMatched=true;})
   | (SOME_IMAGINARY_TOKEN_THAT_YOUR_LEXER_NEVER_PRODUCES)
 )*

Monty
From monty at codetransform.com  Tue Jul  5 12:13:36 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Tue Jul  5 15:14:01 2005
Subject: [antlr-interest] non-determinism warning
In-Reply-To: <42CAD91B.5050207@codetransform.com>
References: <dbcf4c2c050705144725fe2cf2@mail.gmail.com>
	<42CAD91B.5050207@codetransform.com>
Message-ID: <42CADBE0.2030808@codetransform.com>

Monty Zukowski wrote:

> Otherwise you could keep your own state and do something like
> 
>  (DOT
>    {!tabMatched}?(IDENT|TAB{tabMatched=true;})
>    | (SOME_IMAGINARY_TOKEN_THAT_YOUR_LEXER_NEVER_PRODUCES)
>  )*
> 

OK, I'm not used to thinking of stuff with k=1.  My example won't work.
  It's a neat trick, but not the right one :)

Convince me of a good reason not to use k=2 and I'll put some more
thought into it.

Monty

From parrt at cs.usfca.edu  Tue Jul  5 15:16:42 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Jul  5 15:15:57 2005
Subject: [antlr-interest] non-determinism warning
In-Reply-To: <42CADBE0.2030808@codetransform.com>
References: <dbcf4c2c050705144725fe2cf2@mail.gmail.com>
	<42CAD91B.5050207@codetransform.com>
	<42CADBE0.2030808@codetransform.com>
Message-ID: <CEA1FCDA-511A-4C31-B60E-BB4DDF1F5DF0@cs.usfca.edu>


On Jul 5, 2005, at 12:13 PM, Monty Zukowski wrote:

> Monty Zukowski wrote:
>
>
>> Otherwise you could keep your own state and do something like
>>
>>  (DOT
>>    {!tabMatched}?(IDENT|TAB{tabMatched=true;})
>>    | (SOME_IMAGINARY_TOKEN_THAT_YOUR_LEXER_NEVER_PRODUCES)
>>  )*
>>
>>
>
> OK, I'm not used to thinking of stuff with k=1.  My example won't  
> work.
>   It's a neat trick, but not the right one :)
>
> Convince me of a good reason not to use k=2 and I'll put some more
> thought into it.

The language is not LL(1)...no way to avoid k>1.  If you see DOT, you  
just don't know what to pick.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From sebastian.mies at gmx.net  Tue Jul  5 16:11:46 2005
From: sebastian.mies at gmx.net (Sebastian Mies)
Date: Tue Jul  5 16:12:19 2005
Subject: [antlr-interest] Re: paperwork
In-Reply-To: <41fed8f80507042044725d8c66@mail.gmail.com>
References: <FD83A4CF-6458-4AA1-A974-35ECB86E1E2E@cs.usfca.edu>
	<671244385.20050629113113@gmx.net>
	<B20B0FB7-55A5-4296-B45A-F2209F26CCE0@cs.usfca.edu>
	<41fed8f80507042044725d8c66@mail.gmail.com>
Message-ID: <871930987.20050706011146@gmx.net>

Hi Prashant,

PD> Actually you can do incremental parsing without using any parser states at all.
Yes, by using batch mode all the time ;-)

PD> Its a little too complex to describe in this email.
Susan L. Graham had some nice papers about that problem.
But you always need a parse tree (which implies certain parser
states). Anyway ... the subject was researched a long time ago
(about 20 years) with some nice solutions and there is still
no real working implementation available.
Maybe the HARMONIA framework will be released soon, maybe not...
Just wondering that no one ever has really done the work in practice
and released it over this long time...

Sebastian.








From wiggjd at lsbu.ac.uk  Wed Jul  6 04:30:49 2005
From: wiggjd at lsbu.ac.uk (David Wigg)
Date: Wed Jul  6 04:24:44 2005
Subject: [antlr-interest] Re: nested comments
Message-ID: <42CBC0E9.4040104@lsbu.ac.uk>

With reference to recent messages about nested C comments, I am 
not aware that any comments can be nested, eg. something like,

/* comment
source code /* nested comment */
source code
*/ .

In my (bitter) experience the first closing (*/) after an 
opening (/*) closes the comment.

Perhaps I misunderstood the meaning of nested here?

If this is legal please could someone quote any reference 
supporting it.

Thanks,

David.


From tkhanna at redhat.com  Wed Jul  6 06:34:21 2005
From: tkhanna at redhat.com (Tarun Khanna)
Date: Wed Jul  6 12:32:45 2005
Subject: [antlr-interest] non-determinism warning
In-Reply-To: <CEA1FCDA-511A-4C31-B60E-BB4DDF1F5DF0@cs.usfca.edu>
References: <dbcf4c2c050705144725fe2cf2@mail.gmail.com>
	<42CAD91B.5050207@codetransform.com>
	<42CADBE0.2030808@codetransform.com>
	<CEA1FCDA-511A-4C31-B60E-BB4DDF1F5DF0@cs.usfca.edu>
Message-ID: <1120656861.17587.4.camel@dhcp83-116.boston.redhat.com>

Hi Terence, Monty

Thanks...for your help.

I am new to ANTLR and I am trying to learn to play with this neat tool.
The only reason I said I wanted k=1 was, because I wanted to know if
there is a standard way of solving this problem by using some sort of
predicate or something similar to left-factoring.

However I guess k>1 is the way to go in such situations, as has been
suggested in the replies.

Thanks again for your time and advice....

I'll throw in some more questions pretty soon...

Tarun
On Tue, 2005-07-05 at 15:16 -0700, Terence Parr wrote:
> On Jul 5, 2005, at 12:13 PM, Monty Zukowski wrote:
> 
> > Monty Zukowski wrote:
> >
> >
> >> Otherwise you could keep your own state and do something like
> >>
> >>  (DOT
> >>    {!tabMatched}?(IDENT|TAB{tabMatched=true;})
> >>    | (SOME_IMAGINARY_TOKEN_THAT_YOUR_LEXER_NEVER_PRODUCES)
> >>  )*
> >>
> >>
> >
> > OK, I'm not used to thinking of stuff with k=1.  My example won't  
> > work.
> >   It's a neat trick, but not the right one :)
> >
> > Convince me of a good reason not to use k=2 and I'll put some more
> > thought into it.
> 
> The language is not LL(1)...no way to avoid k>1.  If you see DOT, you  
> just don't know what to pick.
> 
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> 

From xiaogao at mails.tsinghua.edu.cn  Wed Jul  6 06:23:19 2005
From: xiaogao at mails.tsinghua.edu.cn (Xia Gao)
Date: Wed Jul  6 13:30:27 2005
Subject: [antlr-interest] about ASTFrame
Message-ID: <20050706203025.7D94DDCC42@www.antlr.org>

SSBzdGFydCB0byBwYXJzZSBWZXJpbG9nIEhETC4gV2hlbiBJIHVzZSB0aGUgZm9sbG93aW5nIHJ1
bGVzLCBJIGNhbiBjb3JyZWN0bHkgYnVpbGQgdGhlIEFTVEZyYW1lIG9iamVjdDoNCg0KZGVzY3Jp
cHRpb24NCjogICAgKCBkaXJlY3RpdmUgKSAqDQo7DQogDQpkaXJlY3RpdmUNCjogICAgZGVmaW5l
X2RpcmVjdGl2ZQ0KfCAgICBpbmNsdWRlX2RpcmVjdGl2ZQ0KOw0KDQpkZWZpbmVfZGlyZWN0aXZl
DQo6ICAgICJgZGVmaW5lIl4gSURFTlRJRklFUg0KOw0KDQppbmNsdWRlX2RpcmVjdGl2ZQ0KOiAg
ICAiYGluY2x1ZGUiXiAgU1RSSU5HDQo7DQoNClRoZSBzb3VyY2UgZmlsZSBpczoNCg0KYGRlZmlu
ZSBBDQpgaW5jbHVkZSAiZGVmaW5lcy52Ig0KDQpUaGUgcmVzdWx0IG9mIEFTVEZyYW1lIG9iamVj
dCBzaG93czoNCg0KW0FTVCBST09ULDw8MD4+XQ0KIHwNCiB8X19fX2BkZWZpbmUNCiB8ICAgICAg
IHxfX19fQSw8SURFTlRJRklFUj4NCiB8DQogfF9fX19gaW5jbHVkZQ0KICAgICAgICAgfF9fX18i
ZGVmaW5lcy52Iiw8U1RSSU5HPg0KDQpCdXQgd2hlbiBJIGNoYW5nZSB0aGUgcnVsZXMgdG86DQoN
CnNvdXJjZV90ZXh0DQo6CSggZGVzY3JpcHRpb24gKSogRU9GDQo7DQoNCmRlc2NyaXB0aW9uDQo6
CWRpcmVjdGl2ZQ0KOw0KDQpkaXJlY3RpdmUNCjoJZGVmaW5lX2RpcmVjdGl2ZQ0KfAlpbmNsdWRl
X2RpcmVjdGl2ZQ0KOw0KDQpkZWZpbmVfZGlyZWN0aXZlDQo6ICAgICJgZGVmaW5lIl4gSURFTlRJ
RklFUg0KOw0KDQppbmNsdWRlX2RpcmVjdGl2ZQ0KOiAgICAiYGluY2x1ZGUiXiAgU1RSSU5HDQo7
DQoNCkkgZ2V0IHRoZSBmb2xsb3dpbmcgZXhjZXB0aW9uczoNCg0KRXhjZXB0aW9uIGluIHRocmVh
ZCAibWFpbiIgamF2YS5sYW5nLk51bGxQb2ludGVyRXhjZXB0aW9uDQogICAgICAgIGF0IGFudGxy
LkJhc2VBU1QudG9TdHJpbmcoQmFzZUFTVC5qYXZhOjMyMikNCiAgICAgICAgYXQgamF2YXguc3dp
bmcuSlRyZWUuY29udmVydFZhbHVlVG9UZXh0KEpUcmVlLmphdmE6MTEzOSkNCiAgICAgICAgYXQg
amF2YXguc3dpbmcudHJlZS5EZWZhdWx0VHJlZUNlbGxSZW5kZXJlci5nZXRUcmVlQ2VsbFJlbmRl
cmVyQ29tcG9uZW50KERlZmF1bHRUcmVlQ2VsbFJlbmRlcmVyLmphdmE6MzMxKQ0KICAgICAgICBh
dCBqYXZheC5zd2luZy5wbGFmLmJhc2ljLkJhc2ljVHJlZVVJJE5vZGVEaW1lbnNpb25zSGFuZGxl
ci5nZXROb2RlRGltZW5zaW9ucyhCYXNpY1RyZWVVSS5qYXZhOjI2NDMpDQogICAgICAgIGF0IGph
dmF4LnN3aW5nLnRyZWUuQWJzdHJhY3RMYXlvdXRDYWNoZS5nZXROb2RlRGltZW5zaW9ucyhBYnN0
cmFjdExheW91dENhY2hlLmphdmE6NDc1KQ0KICAgICAgICBhdCBqYXZheC5zd2luZy50cmVlLlZh
cmlhYmxlSGVpZ2h0TGF5b3V0Q2FjaGUkVHJlZVN0YXRlTm9kZS51cGRhdGVQcmVmZXJyZWRTaXpl
KFZhcmlhYmxlSGVpZ2h0TGF5b3V0Q2FjaGUuamF2YToxMzQyKQ0KICAgICAgICBhdCBqYXZheC5z
d2luZy50cmVlLlZhcmlhYmxlSGVpZ2h0TGF5b3V0Q2FjaGUkVHJlZVN0YXRlTm9kZS5leHBhbmQo
VmFyaWFibGVIZWlnaHRMYXlvdXRDYWNoZS5qYXZhOjE0NzgpDQogICAgICAgIGF0IGphdmF4LnN3
aW5nLnRyZWUuVmFyaWFibGVIZWlnaHRMYXlvdXRDYWNoZSRUcmVlU3RhdGVOb2RlLmV4cGFuZChW
YXJpYWJsZUhlaWdodExheW91dENhY2hlLmphdmE6MTI3MCkNCiAgICAgICAgYXQgamF2YXguc3dp
bmcudHJlZS5WYXJpYWJsZUhlaWdodExheW91dENhY2hlLnJlYnVpbGQoVmFyaWFibGVIZWlnaHRM
YXlvdXRDYWNoZS5qYXZhOjcyNSkNCiAgICAgICAgYXQgamF2YXguc3dpbmcudHJlZS5WYXJpYWJs
ZUhlaWdodExheW91dENhY2hlLnNldE1vZGVsKFZhcmlhYmxlSGVpZ2h0TGF5b3V0Q2FjaGUuamF2
YTo5MSkNCiAgICAgICAgYXQgamF2YXguc3dpbmcucGxhZi5iYXNpYy5CYXNpY1RyZWVVSS5zZXRN
b2RlbChCYXNpY1RyZWVVSS5qYXZhOjM5MCkNCiAgICAgICAgYXQgamF2YXguc3dpbmcucGxhZi5i
YXNpYy5CYXNpY1RyZWVVSSRIYW5kbGVyLnByb3BlcnR5Q2hhbmdlKEJhc2ljVHJlZVVJLmphdmE6
MzMxNikNCiAgICAgICAgYXQgamF2YS5iZWFucy5Qcm9wZXJ0eUNoYW5nZVN1cHBvcnQuZmlyZVBy
b3BlcnR5Q2hhbmdlKFByb3BlcnR5Q2hhbmdlU3VwcG9ydC5qYXZhOjMzMykNCiAgICAgICAgYXQg
amF2YS5iZWFucy5Qcm9wZXJ0eUNoYW5nZVN1cHBvcnQuZmlyZVByb3BlcnR5Q2hhbmdlKFByb3Bl
cnR5Q2hhbmdlU3VwcG9ydC5qYXZhOjI3MCkNCiAgICAgICAgYXQgamF2YS5hd3QuQ29tcG9uZW50
LmZpcmVQcm9wZXJ0eUNoYW5nZShDb21wb25lbnQuamF2YTo3MTU5KQ0KICAgICAgICBhdCBqYXZh
eC5zd2luZy5KVHJlZS5zZXRNb2RlbChKVHJlZS5qYXZhOjcxMCkNCiAgICAgICAgYXQgamF2YXgu
c3dpbmcuSlRyZWUuPGluaXQ+KEpUcmVlLmphdmE6NTExKQ0KICAgICAgICBhdCBhbnRsci5kZWJ1
Zy5taXNjLkpUcmVlQVNUUGFuZWwuPGluaXQ+KEpUcmVlQVNUUGFuZWwuamF2YToyMykNCiAgICAg
ICAgYXQgYW50bHIuZGVidWcubWlzYy5BU1RGcmFtZS48aW5pdD4oQVNURnJhbWUuamF2YTo0MykN
CiAgICAgICAgYXQgdnRhZ3MubWFpbih2dGFncy5qYXZhOjMxKSAgIA0KDQpJIGRvbid0IGtub3cg
d2h5LiBDYW4gYW55b25lIEhlbHAgbWU/IFRoYW5rIHlvdSENCg0KQmVzdCByZWdhcmRzISAgIA0K
DQqhoaGhoaGhoaGhoaGhoaGhWGlhIEdhbw0KoaGhoaGhoaGhoaGhoaGhoXhpYW9nYW9AbWFpbHMu
dHNpbmdodWEuZWR1LmNuDQqhoaGhoaGhoaGhoaGhoaGhoaGhoTIwMDUtMDctMDYNCg==

From nbsherid at secsme.org.au  Wed Jul  6 13:59:40 2005
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Wed Jul  6 13:59:30 2005
Subject: [antlr-interest] Re: nested comments
In-Reply-To: <42CBC0E9.4040104@lsbu.ac.uk>
Message-ID: <000001c5826d$a0ec3d10$0500a8c0@nigel>



> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of David Wigg
> Sent: Wednesday, 6 July 2005 9:31 PM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] Re: nested comments
> 
> With reference to recent messages about nested C comments, I am
> not aware that any comments can be nested, eg. something like,
> 
> /* comment
> source code /* nested comment */
> source code
> */ .
> 
> In my (bitter) experience the first closing (*/) after an
> opening (/*) closes the comment.
> 
> Perhaps I misunderstood the meaning of nested here?
> 
> If this is legal please could someone quote any reference
> supporting it.
> 

In C/C++/Java this is true - nesting is not allowed and is ignored, so the
first */ matches. 

In some other formal languages (ASN.1 is an example), there is the concept
of nesting; e.g. that the exact number of /* must match the exact number of
*/ before the comment terminates.

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435


From ric.klaren at gmail.com  Wed Jul  6 14:49:47 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Wed Jul  6 14:49:14 2005
Subject: [antlr-interest] RFC re/ Left factoring and Syntactic Predicate
In-Reply-To: <20050705192314.17877.qmail@webmail25.rediffmail.com>
References: <20050705192314.17877.qmail@webmail25.rediffmail.com>
Message-ID: <42CC51FB.5030105@gmail.com>

Subhobroto Sinha wrote:
> The FLOAT vs INT issue is an often repeated topic, and as I am 
> currently in the same trap, I wish to resolve it as much as possible 
> (to benefit me as well as others)
> 
> Intutively defn. of an INT is : ('0' .. '9')+; 
 > A FLOAT is : : INT '.' INT;
> 
> Let's write that again :
> 
> coefficient : INT | INT DOT INT;
> 
> Left Factoring :
> 
> coefficient : INT leftNumFactor;
> 
> leftNumFactor : DOT INT | /* epsilon */;
> 
> However, ANTLR barks at me in a rule in my TreeWalker :
> 
> csvCoeffs : (coefficient)+;
> 
> It says :
> 
> DSD.mail.g:40: warning:nondeterminism upon DSD.mail.g:40: k==1:INT
> DSD.mail.g:40:     between alt 1 and exit branch of block

Not sure.. it can also be due to other parts of your grammar non 
determinism errors are usually dependent on your whole grammar (the 
links didn't work when I tried). Also you left out which rules in the 
above are protected. I would suspect that leftNumFactor should be 
protected in a lexer (all non protected rules get or-ed together in the 
nextToken rule which usually leads for newcomers to unexpected non 
determinism)

I'd be inclined to write the left factor like:

coefficient : INT {$setType(INT);}( DOT INT {$setType(FLOAT) )?;

> I am really in the dark here. I am sure I left factored right, so 
> where is the problem ? I might mention that the program is working 
> just as I wanted, but I feel bad about any warnings ;)

Some antlr warnings are hard to shut up. (I personally do not bother 
about them since adding/removing/modifying a rule can turn up things 
that you want to be warned about in spots were you previously turned of 
warnings)

> On the other hand, an alternate version of mine, which employs 
> syntactic predicate on FLOAT and INT seems to work too, but issues 
> similar nondeterminism warnings in the TreeWalker ?

Syntactic predicates are performance killers. Only use them during 
prototyping and when you really cannot do something else. Or if you have 
other reasons like readability etc.

> What am I doing wrong in the tree walker ?
> Also, what are your views on left factoring vs. syntactic predicates 

Left factoring is better performance wise. It may kill the readability 
of your grammar though.

Cheers,

Ric
From ric.klaren at gmail.com  Wed Jul  6 15:25:25 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Wed Jul  6 15:24:49 2005
Subject: [antlr-interest] BUG? lookahed and exception handler do not mix
	well
In-Reply-To: <42B2E95F.5070306@mail.com>
References: <42B2E95F.5070306@mail.com>
Message-ID: <42CC5A55.2010504@gmail.com>

pganelin wrote:
> Summary: 
> I was trying to wrap my own exception from semantic action into  
> RecognitionException and I found the following problem. I do not 
> understand how to resolve it properly. An example of
> grammar file showing the issue is attached. For me it looks like a 
> design bug for lookahead exception handling.

What happens if you add custom error handlers? Your example looks too 
fishy to make anything from for me at first glance. Where you talk of 
lookahead you seem to mean guessing mode/syntactic predicates? Or are 
you actually using a semantic predicate?

> Description:
> 
> ANTLT generates the following exception handler for lookahead and the 
> resulting code does not compile.
> 
> 
>        catch ( IOException ex ) {
>            if (inputState.guessing==0) {
>                throw new RecognitionException ("IO exception");
>            } else {
>                throw ex ;
>            }
>        }

Error output would be helpfull. What antlr version is this actually? Is 
this a lexer?

> Without lookahead it would be just
> 
>        catch ( IOException ex ) {
>                throw new RecognitionException ("IO exception");
>        }
> and it is exactly what I need.
> 
> I understand that idea of lookahead it to propagate exception and deal 
> with them later, but it should propagate only ANTLR exception. While 
> ANTLR is doing lookahead it does not call actions and so it cannot 
> generate user defined exception. As a result catch clause is not 
> required to propagate it because the exception can not be raised in the 
> first place.

Init actions are called even during guessing mode. I'm not 100% sure 
from the top of my head but an IOException should not come out of the 
lexer. Anycase.. I have no clue wether you're running into a real bug, 
or that you are running into antlr behaviour that's 'normal' in a 
twisted sense.

Your example does not help at all in clarifying things (at least it only 
confused me more ;) ). Cut things down to a simple .g file that's not 
too contrived and that clearly demonstrates the problem.

Cheers,

Ric
From gt54-antlr at cyconix.com  Wed Jul  6 04:40:58 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Wed Jul  6 16:28:55 2005
Subject: [antlr-interest] Re: nested comments
In-Reply-To: <42CBC0E9.4040104@lsbu.ac.uk>
References: <42CBC0E9.4040104@lsbu.ac.uk>
Message-ID: <42CBC34A.5010905@cyconix.com>

David Wigg wrote:
> With reference to recent messages about nested C comments, I am not 
> aware that any comments can be nested, eg. something like,
> 
> /* comment
> source code /* nested comment */
> source code
> */ .
> 
> In my (bitter) experience the first closing (*/) after an opening (/*) 
> closes the comment.
> 
> Perhaps I misunderstood the meaning of nested here?
> 
> If this is legal please could someone quote any reference supporting it.

It's definitely illegal - see footnote 69 on p66 of the spec. However, I 
think it's occasionally supported - Borland does (used to?), but I don't 
think gcc does.

Paul

From yjargudo at tiscali.es  Wed Jul  6 06:23:36 2005
From: yjargudo at tiscali.es (yjargudo@tiscali.es)
Date: Wed Jul  6 19:01:00 2005
Subject: [antlr-interest] C++ puzzle
Message-ID: <4253B33E0001955D@genova.tiscali.red>

Hello,

I think the problem is that simple_type_specifier rule of the grammar can't
parse the string "typedef typename" , because it has a different option
in the rule for each case. When antlr read "typedef" token it enters to
the typedef option but then It waits for a type and it reads "typename"
token instead.

I think that you must rewrite this rule in case that this instruction was
correct in C++.

Regards,

Yolanda


>-- Mensaje Original --
>Date: Wed, 29 Jun 2005 13:17:09 +0100
>From: David Wigg <wiggjd@lsbu.ac.uk>
>To: antlr-interest@antlr.org
>Subject: [antlr-interest] C++ puzzle
>
>
>Hi,
>
>I'm trying to parse the following extract from a C++
>preprocessed file. I wonder if someone could explain what the
>problem statement indicated might mean.
>
>#line 6 "C:\\Program Files\\Microsoft Visual Studio .NET
>2003\\VC7\\INCLUDE\\xstring"
>
>#pragma pack(push,8)
>#pragma warning(push,3)
>namespace std {
>
>#pragma warning(disable:4251)
>
>class  _String_base
>      {
>public:
>      void _Xlen() const;
>      void _Xran() const;
>      };
>
>template<class _Ty,
>      class _Alloc>
>      class _String_val
>          : public _String_base
>      {
>protected:
>      typedef typename _Alloc::template
>          rebind<_Ty>::other _Alty;    // Problem statement
>
>      _String_val(_Alty _Al = _Alty())
>          : _Alval(_Al)
>          {
>          }
>
>      _Alty _Alval;
>      };
>etc.
>
>
>I can't see how "_Alloc::template" can be a typename
>("template" is a reserved word), but what does it mean?
>
>I presume the syntax is legal but I have not been able to find
>any similar examples either in my include files in ...\Microsoft
>Visual Studio\VC98\include or in Stroustrup, Third Edition,
>Deitel & Deitel, Third Edition, or in "C++ in a Nutshell" First
>Edition.
>
>This preprocessed file was sent to me as a problem. It is
>interesting that I have not received this problem from anyone
>else.
>
>I wonder if anyone can identify the compiler and version?
>
>I also find it confusing that _Alty is a type as well as the
>name of a function and _Alval is a variable as well as the name
>of a function!
>
>Thanks,
>
>David.
>
>
>
>
>
>
>
>
>



?Quieres conocer el futuro inmediato de la radio digital? Reportajes y
noticias del mundo de la Tecnolog?a. ?Ponte al d?a!

http://tecnologia.tiscali.es/



From yjargudo at tiscali.es  Wed Jul  6 06:20:28 2005
From: yjargudo at tiscali.es (yjargudo@tiscali.es)
Date: Wed Jul  6 19:01:01 2005
Subject: [antlr-interest] Re: nested comments
In-Reply-To: <42CBC0E9.4040104@lsbu.ac.uk>
Message-ID: <4253B33E00019558@genova.tiscali.red>

I'm not sure but I think that you can't put nested comments in C++ . Besides,
I can't see the utility of nested comments because you can put all that
you want in only one comment


Regards

Yolanda

?Quieres conocer el futuro inmediato de la radio digital? Reportajes y
noticias del mundo de la Tecnolog?a. ?Ponte al d?a!

http://tecnologia.tiscali.es/



From lloyd at nova-mind.com  Wed Jul  6 19:19:22 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Wed Jul  6 19:19:35 2005
Subject: [antlr-interest] Re: nested comments
References: <4253B33E00019558@genova.tiscali.red>
Message-ID: <021301c5829a$4b0a2e20$9800a8c0@gideone14f6c02>

you can't put nested comment in c++

and the interest is the following:
you are developing some thing, are not sure about it, comment it with /* */
later you are not sure about the method (including the previous commented 
code) and comment it with /* */.
unfortunately the end of your method is not commented! (as the comment is 
closed by the unsure peace of
code in the middle!)


the right things to do is NOT to comment /* */ the code
but remove it with: #if 0 #endif, which can nest!

----- Original Message ----- 
From: <yjargudo@tiscali.es>
To: "David Wigg" <wiggjd@lsbu.ac.uk>; <antlr-interest@antlr.org>
Sent: Wednesday, July 06, 2005 11:20 PM
Subject: RE: [antlr-interest] Re: nested comments


I'm not sure but I think that you can't put nested comments in C++ . 
Besides,
I can't see the utility of nested comments because you can put all that
you want in only one comment


Regards

Yolanda

?Quieres conocer el futuro inmediato de la radio digital? Reportajes y
noticias del mundo de la Tecnolog?a. ?Ponte al d?a!

http://tecnologia.tiscali.es/



From mail at martin-probst.com  Thu Jul  7 00:24:36 2005
From: mail at martin-probst.com (Martin Probst)
Date: Thu Jul  7 00:24:46 2005
Subject: [antlr-interest] Re: nested comments
In-Reply-To: <021301c5829a$4b0a2e20$9800a8c0@gideone14f6c02>
References: <4253B33E00019558@genova.tiscali.red>
	<021301c5829a$4b0a2e20$9800a8c0@gideone14f6c02>
Message-ID: <1120721076.24636.1.camel@localhost.localdomain>

Hi,

> the right things to do is NOT to comment /* */ the code
> but remove it with: #if 0 #endif, which can nest!

I heavily doubt that - the preprocessor is evil anyways, and also it
might get really hard to read (maybe depending on your IDE, I haven't
used one yet that highlighted such sections as comments). For the sake
of readability you should probably use //, as that can nest too
(although it's a pain if you don't have a proper IDE).

Regards,
Martin

From mail at martin-probst.com  Thu Jul  7 00:28:47 2005
From: mail at martin-probst.com (Martin Probst)
Date: Thu Jul  7 00:28:56 2005
Subject: [antlr-interest] RFC re/ Left factoring and Syntactic Predicate
In-Reply-To: <42CC51FB.5030105@gmail.com>
References: <20050705192314.17877.qmail@webmail25.rediffmail.com>
	<42CC51FB.5030105@gmail.com>
Message-ID: <1120721327.24636.5.camel@localhost.localdomain>

Hi,

> Syntactic predicates are performance killers. Only use them during 
> prototyping and when you really cannot do something else. Or if you have 
> other reasons like readability etc.

The question is: are predicates worse than a higher k? There are quite
often situations where you only need a higher k in one or two places of
your grammar - increasing k overall would probably lead to a decreasing
performance overall?

Regards,
Martin

From ric.klaren at gmail.com  Thu Jul  7 03:25:55 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Thu Jul  7 03:25:58 2005
Subject: [antlr-interest] RFC re/ Left factoring and Syntactic Predicate
In-Reply-To: <1120721327.24636.5.camel@localhost.localdomain>
References: <20050705192314.17877.qmail@webmail25.rediffmail.com>
	<42CC51FB.5030105@gmail.com>
	<1120721327.24636.5.camel@localhost.localdomain>
Message-ID: <bc607a4e0507070325377b56c1@mail.gmail.com>

On 7/7/05, Martin Probst <mail@martin-probst.com> wrote:
> > Syntactic predicates are performance killers. Only use them during
> > prototyping and when you really cannot do something else. Or if you have
> > other reasons like readability etc.
> 
> The question is: are predicates worse than a higher k? There are quite
> often situations where you only need a higher k in one or two places of
> your grammar - increasing k overall would probably lead to a decreasing
> performance overall?

ANTLR usually only uses the minimal required k for a local decisions.
High k is only really bad for the time antlr itself needs to process
the grammar. In general you can increase k in your grammar and not see
one thing change in the generated output (there might be a few
degenerative cases not sure).

Note that a syntactic predicate parses your input at least twice to
come to a decision, once to see if it's the right thing and then the
actual parsing of the chosen alternative. Or worse inside the run of
one syn pred another may be triggered and so on.

The performance hit of a predicate depends on
- how often is the predicate needed?
- how deep does the predicate recurse before coming to a conclusion?
The nearer the leaves of your grammar the smaller the hit.
- did you specify a complete rule as predicate or only a prefix of the
rule that is sufficient to make the decision. During prototyping it's
easy to just dump in (rule) => rule but for production you might want
to reduce to (prefix_of_rule) => rule. Note that antlr does not check
if prefix_of_rule is really a prefix of the rule. Thus introducing
'funny' behaviour.
- The input to the parser. By smart ordering of syn preds you may tune
your parser to the most common input.

Cheers,

Ric
From ric.klaren at gmail.com  Thu Jul  7 03:59:01 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Thu Jul  7 03:59:03 2005
Subject: [antlr-interest] Re: nested comments
In-Reply-To: <42CBC34A.5010905@cyconix.com>
References: <42CBC0E9.4040104@lsbu.ac.uk> <42CBC34A.5010905@cyconix.com>
Message-ID: <bc607a4e05070703595874e6db@mail.gmail.com>

On 7/6/05, Paul Johnson <gt54-antlr@cyconix.com> wrote:
> It's definitely illegal - see footnote 69 on p66 of the spec. However, I
> think it's occasionally supported - Borland does (used to?), but I don't
> think gcc does.

Gcc does. But you may have to specify options to get it or to turn of
warnings. Depends on the version.

Cheers,

Ric
From mop56290 at mail.telepac.pt  Thu Jul  7 08:04:10 2005
From: mop56290 at mail.telepac.pt (Telepac)
Date: Thu Jul  7 08:04:16 2005
Subject: [antlr-interest] manage symbols in code transformation using
	several treewalkers
Message-ID: <1120748650.12072.12.camel@pc-rsim1-g.dei.uminho.pt>

Hello,
I'm designing a code transformation using ANTLR 2.7.5 for scanning and
parsing. To transform from a mylittlelanguage (that has several (global,
local, constants, functions, ..) scopes) to c++. 

Where can I get an example of symbol table implementation, to deal with
scopes and static validation, using an antlr treewalkers chain?

What in your opinion is the best solution to manage the scopes in this
kind of applications ?

Regards


JC 

From antlr-list at arizona-software.ch  Thu Jul  7 11:05:54 2005
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Thu Jul  7 11:06:02 2005
Subject: [antlr-interest] ANTLRWorks 1.0ea3 released!
Message-ID: <10900095-74EE-4A97-8024-074245337182@arizona-software.ch>

Hello!

I have updated ANTLRWorks to version 1.0ea3 which now includes ANTLR  
3.0ea5 and fixes many bugs (including the coloring problem on files  
containing \r\n new line characters):

http://www.antlr.org/works/index.html

The ANTLRWorks jar has everything you need including ANTLR 3.0ea5.

Feel free to send comments to the antlr-interest list or if you want  
to send patches:

http://www.antlr.org/misc/feedback


Enjoy this new release!

Jean Bovet


P.S: Per the license in LICENSE.txt, this software is not guaranteed  
to work and might even destroy all life on this planet.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050707/40ccfedf/attachment.html
From mail at martin-probst.com  Fri Jul  8 01:00:53 2005
From: mail at martin-probst.com (Martin Probst)
Date: Fri Jul  8 01:01:05 2005
Subject: [antlr-interest] RFC re/ Left factoring and Syntactic Predicate
In-Reply-To: <bc607a4e0507070325377b56c1@mail.gmail.com>
References: <20050705192314.17877.qmail@webmail25.rediffmail.com>
	<42CC51FB.5030105@gmail.com>
	<1120721327.24636.5.camel@localhost.localdomain>
	<bc607a4e0507070325377b56c1@mail.gmail.com>
Message-ID: <1120809653.24636.25.camel@localhost.localdomain>

Hi Ric,

> ANTLR usually only uses the minimal required k for a local decisions.
> High k is only really bad for the time antlr itself needs to process
> the grammar.

Thanks for that answer. I didn't know that, and it's pretty good to know
it!

Regards,
Martin

From tarunkhanna at gmail.com  Fri Jul  8 08:13:40 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Fri Jul  8 08:14:06 2005
Subject: [antlr-interest] non-determinism warnings again
Message-ID: <dbcf4c2c050708081344af0432@mail.gmail.com>

Hi All,

I am getting a non-determinism warning between alt 1 and the exit branch.

k=1 DOT and k=2 IDENT.
I have a look-ahead of 2.

I can't think of an expression which would be ambiguous for the parser. I 
receive this warning for the secod and the third alternatives. It goes away, 
if I remove either one of them.

I would appreciate if someone could give me an example expression which the 
parser would have trouble parsing. Any help would be highly appreciated.

F
: 
NUM
|
(LPAREN e=exp RPAREN) (DOT IDENT)* (DOT TAB)?
|
IDENT (DOT IDENT)* (DOT TAB)?
|
TAB
;

-- 
Thanks and Regards,
Tarun Khanna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050708/64f9bad3/attachment.html
From jbb at acm.org  Fri Jul  8 08:44:54 2005
From: jbb at acm.org (John B. Brodie)
Date: Fri Jul  8 08:45:00 2005
Subject: [antlr-interest] non-determinism warnings again
In-Reply-To: <dbcf4c2c050708081344af0432@mail.gmail.com> (message from Tarun
	Khanna on Fri, 08 Jul 2005 11:13:40 -0400)
References: <dbcf4c2c050708081344af0432@mail.gmail.com>
Message-ID: <E1Dqv26-0006IO-00@gecko>

Tarun Khanna asked (in part):

>Hi All,

Greetings!

>I am getting a non-determinism warning between alt 1 and the exit branch.
>
>k=3D1 DOT and k=3D2 IDENT.
>I have a look-ahead of 2.

...snip...

...apparently this is the rule causing the problem...

>F
>:=20
>NUM
>|
>(LPAREN e=3Dexp RPAREN) (DOT IDENT)* (DOT TAB)?
>|
>IDENT (DOT IDENT)* (DOT TAB)?
>|
>TAB
>;
...(is this in the Lexer? no, can't be, refers to a parser rule, exp)...

Perhaps I misunderstand your question.  I tried this small grammar:

//begin test.g
class testParser extends Parser;

options { k = 2; }

f :
        NUM
    | (LPAREN exp RPAREN) (DOT IDENT)* (DOT TAB)?
    | IDENT (DOT IDENT)* (DOT TAB)?
    | TAB
;

exp : FOO ;
//end test.g

and received no complaints at all.

is it possible that there is some interaction amongst your rules?

maybe you could post the smallest complete grammar that displays the
ambiguity and then we could try to fix that...

Hope this helps...
   -jbb

From tarunkhanna at gmail.com  Fri Jul  8 09:24:18 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Fri Jul  8 09:24:46 2005
Subject: [antlr-interest] non-determinism warnings again
In-Reply-To: <E1Dqv26-0006IO-00@gecko>
References: <dbcf4c2c050708081344af0432@mail.gmail.com>
	<E1Dqv26-0006IO-00@gecko>
Message-ID: <dbcf4c2c050708092475edecef@mail.gmail.com>

Thanks for your help.
Here is the complete grammar. It is not a lot more than a calculator, but I 
need to handle java/c++ type class variables also. Hence the (DOT IDENT)*.

exp
: 
T ((PLUS | MINUS) T)*
;

T 
: 
F (TIMES | DIV | "mod") F)*
;

F
: 
NUM
|
(LPAREN exp RPAREN) (DOT IDENT)* (DOT TAB)?
|
IDENT (DOT IDENT)* (DOT TAB)?
|
TAB
;

On 7/8/05, John B. Brodie <jbb@acm.org> wrote:
> 
> Tarun Khanna asked (in part):
> 
> >Hi All,
> 
> Greetings!
> 
> >I am getting a non-determinism warning between alt 1 and the exit branch.
> >
> >k=3D1 DOT and k=3D2 IDENT.
> >I have a look-ahead of 2.
> 
> ...snip...
> 
> ...apparently this is the rule causing the problem...
> 
> >F
> >:=20
> >NUM
> >|
> >(LPAREN e=3Dexp RPAREN) (DOT IDENT)* (DOT TAB)?
> >|
> >IDENT (DOT IDENT)* (DOT TAB)?
> >|
> >TAB
> >;
> ...(is this in the Lexer? no, can't be, refers to a parser rule, exp)...
> 
> Perhaps I misunderstand your question. I tried this small grammar:
> 
> //begin test.g
> class testParser extends Parser;
> 
> options { k = 2; }
> 
> f :
> NUM
> | (LPAREN exp RPAREN) (DOT IDENT)* (DOT TAB)?
> | IDENT (DOT IDENT)* (DOT TAB)?
> | TAB
> ;
> 
> exp : FOO ;
> //end test.g
> 
> and received no complaints at all.
> 
> is it possible that there is some interaction amongst your rules?
> 
> maybe you could post the smallest complete grammar that displays the
> ambiguity and then we could try to fix that...
> 
> Hope this helps...
> -jbb
> 
> 


-- 
Tarun Khanna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050708/17f0b951/attachment.html
From tarunkhanna at gmail.com  Fri Jul  8 10:03:30 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Fri Jul  8 10:03:54 2005
Subject: [antlr-interest] non-determinism warnings again
In-Reply-To: <E1Dqw47-0006Dw-00@gecko>
References: <dbcf4c2c050708081344af0432@mail.gmail.com>
	<E1Dqv26-0006IO-00@gecko> <dbcf4c2c050708092475edecef@mail.gmail.com>
	<E1Dqw47-0006Dw-00@gecko>
Message-ID: <dbcf4c2c05070810035f3cf0a8@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.g
Type: application/octet-stream
Size: 865 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050708/cd35e4a7/test.obj
From jbb at acm.org  Fri Jul  8 11:57:55 2005
From: jbb at acm.org (John B. Brodie)
Date: Fri Jul  8 11:58:00 2005
Subject: [antlr-interest] non-determinism warnings again
In-Reply-To: <dbcf4c2c05070810035f3cf0a8@mail.gmail.com> (message from Tarun
	Khanna on Fri, 08 Jul 2005 13:03:30 -0400)
References: <dbcf4c2c050708081344af0432@mail.gmail.com>
	<E1Dqv26-0006IO-00@gecko> <dbcf4c2c050708092475edecef@mail.gmail.com>
	<E1Dqw47-0006Dw-00@gecko> <dbcf4c2c05070810035f3cf0a8@mail.gmail.com>
Message-ID: <E1Dqy2t-0006Oq-00@gecko>

Hello :-

Attached please find an updated grammar which removes your ambiguity (no
longer need to set any k=x option at all).

I can not explain why, but I changed your factor rule to utilize an optional
`qualification` rule (e.g. the DOT (ID | TAB) stuff) and this did the trick.
Note I have not actually tried to execute the generated parser, I have only
run it through the antlr.Tool and got no complaints.

Again do not know why this fixed the problem...

I also made some gratuitous changes to your lexer:
   1) put the "mod" keyword into a tokens {} section; and
   2) removed the need for k=2 in the lexer by updating the NL rule.

Hope this helps...
   -jbb

/*-------------------------begin test.g-------------------------*/

class testParser extends Parser;

//options { k = 2; }

exp : term ( (PLUS | MINUS) term )* ;

term : factor ( (TIMES | DIV | MOD) factor )* ;

factor :
        NUM
    | ( ( LPAREN exp RPAREN ) | IDENT ) ( qualification )?
    | TAB
    ;

qualification :
        DOT 
        ( ( ID ( qualification )? )
        | TAB )
    ;

class testLexer extends Lexer;

options {
    charVocabulary = '\0'..'\377';
    testLiterals = true;
    //k=2;
}

tokens {
    MOD = "mod";
}

LPAREN : '(' ;
RPAREN : ')' ;
PLUS : '+' ;
MINUS : '-' ;
TIMES : '*' ;
DIV : '/' ;
DOT : '.' ;
COMMA : ',' ;
LBRACK : '{' ;
RBRACK : '}' ;
SEMI : ';' ;

NUM : ('0'..'9')+ ;

IDENT : ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')* ;

TAB : '\t' ;

protected NL :
        ( '\r'   // '\r' used on Macintosh
            ( '\n' )? // "\r\n" used on DOS/Windows
        | '\n' ) // '\n' used on Unix
            { newline(); }
;

WS : ( ' ' | '\f' | NL ) { $setType(Token.SKIP); } ;

/*------------------------- end test.g -------------------------*/
From tarunkhanna at gmail.com  Fri Jul  8 13:36:38 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Fri Jul  8 13:37:04 2005
Subject: [antlr-interest] non-determinism warnings again
In-Reply-To: <E1Dqy2t-0006Oq-00@gecko>
References: <dbcf4c2c050708081344af0432@mail.gmail.com>
	<E1Dqv26-0006IO-00@gecko> <dbcf4c2c050708092475edecef@mail.gmail.com>
	<E1Dqw47-0006Dw-00@gecko> <dbcf4c2c05070810035f3cf0a8@mail.gmail.com>
	<E1Dqy2t-0006Oq-00@gecko>
Message-ID: <dbcf4c2c050708133649a232e0@mail.gmail.com>

Hey thanks for changing the code....I'll try to see why antlr does not 
generate warnings now..

I ran the code and it does not parse correctly. I get a "invalid token null" 
error.

try giving this as an input to the parser "a.b + b.g". Theoratically this 
should work.
You can save the following code in a file called Main.java and use it for 
testing.

Thanks and regards,
Tarun


import java.io.*;
public class Main {
public static void main(String[] args) throws Exception {
try {
//testLexer lexer = new testLexer(new FileInputStream(args[0]));
testLexer lexer = new testLexer(new StringReader("a.b + b + x"));

testParser parser = new testParser(lexer);

parser.exp();

}
catch(Exception e) 
{
System.err.println("exception: "+e);
e.printStackTrace(System.err); // so we can get stack trace
}
}

}
On 7/8/05, John B. Brodie <jbb@acm.org> wrote:
> 
> Hello :-
> 
> Attached please find an updated grammar which removes your ambiguity (no
> longer need to set any k=x option at all).
> 
> I can not explain why, but I changed your factor rule to utilize an 
> optional
> `qualification` rule (e.g. the DOT (ID | TAB) stuff) and this did the 
> trick.
> Note I have not actually tried to execute the generated parser, I have 
> only
> run it through the antlr.Tool and got no complaints.
> 
> Again do not know why this fixed the problem...
> 
> I also made some gratuitous changes to your lexer:
> 1) put the "mod" keyword into a tokens {} section; and
> 2) removed the need for k=2 in the lexer by updating the NL rule.
> 
> Hope this helps...
> -jbb
> 
> /*-------------------------begin test.g-------------------------*/
> 
> class testParser extends Parser;
> 
> //options { k = 2; }
> 
> exp : term ( (PLUS | MINUS) term )* ;
> 
> term : factor ( (TIMES | DIV | MOD) factor )* ;
> 
> factor :
> NUM
> | ( ( LPAREN exp RPAREN ) | IDENT ) ( qualification )?
> | TAB
> ;
> 
> qualification :
> DOT
> ( ( ID ( qualification )? )
> | TAB )
> ;
> 
> class testLexer extends Lexer;
> 
> options {
> charVocabulary = '\0'..'\377';
> testLiterals = true;
> //k=2;
> }
> 
> tokens {
> MOD = "mod";
> }
> 
> LPAREN : '(' ;
> RPAREN : ')' ;
> PLUS : '+' ;
> MINUS : '-' ;
> TIMES : '*' ;
> DIV : '/' ;
> DOT : '.' ;
> COMMA : ',' ;
> LBRACK : '{' ;
> RBRACK : '}' ;
> SEMI : ';' ;
> 
> NUM : ('0'..'9')+ ;
> 
> IDENT : ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')* ;
> 
> TAB : '\t' ;
> 
> protected NL :
> ( '\r' // '\r' used on Macintosh
> ( '\n' )? // "\r\n" used on DOS/Windows
> | '\n' ) // '\n' used on Unix
> { newline(); }
> ;
> 
> WS : ( ' ' | '\f' | NL ) { $setType(Token.SKIP); } ;
> 
> /*------------------------- end test.g -------------------------*/
> 



-- 
Tarun Khanna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050708/ddd4d245/attachment.html
From jddahl at micron.com  Fri Jul  8 15:20:43 2005
From: jddahl at micron.com (Jeff Dahl)
Date: Fri Jul  8 15:20:47 2005
Subject: [antlr-interest] Tree walking
In-Reply-To: <42C3202C.6040807@micron.com>
References: <42C3202C.6040807@micron.com>
Message-ID: <42CEFC3B.2000307@micron.com>

Jeff Dahl wrote:

> Why does SAMPLE.TREE.G not walk the entire tree?  Instead of
>
>    ROOT
>    |-- A
>    |   `-- B
>    |       |-- C
>    |       |   |-- attribute1
>    |       |   |   `-- value 1
>    |       |   |-- attribute2
>    |       |   |   `-- value 2
>    |       |   `-- attribute3
>    |       |       `-- value 3
>    |       `-- D
>    |           `-- attribute4
>    |               `-- value 4
>    |-- E
>    |   `-- attribute5
>    |       `-- value 5
>    `-- F
>        `-- attribute6
>            `-- value 6
>
> SAMPLE.TREE.G outputs
>
>    ROOT
>    |-- A
>    |   `-- B
>    |       |-- C
>    |       `-- D
>    |-- E
>    `-- F

I figured out while SAMPLE.TREE.G was not walking the entire tree-- I 
had SAMPLE.TREE.G defined in a different file and did not use the 
exportVocab/importVocab options.  As such, a new ...TokenTypes.java file 
was created that did not correspond to the TokenTypes.java SAMPLE.G 
created.  For example, the TokenTypes created by SAMPLE.G were:

    int EOF = 1;
    int NULL_TREE_LOOKAHEAD = 3;
    int ROOT = 4;
    int O_SECTION = 5;
    int C_SECTION = 6;
    int KEYWORD = 7;
    int VALUE = 8;
    int SECTION = 9;
    int CHARS = 10;
    int WS = 11;
    int NEWLINE = 12;

while the TokenTypes created by SAMPLE.TREE.G were:

    int EOF = 1;
    int NULL_TREE_LOOKAHEAD = 3;
    int ROOT = 4;
    int O_SECTION = 5;
    int KEYWORD = 6;
    int VALUE = 7;

Clearly, when the tree walker was looking for a KEYWORD(6) and the token 
came up as a KEYWORD(7) the tree parser would fail.

The solution is to use the exportVocab/importVocab 
<http://www.antlr.org/doc/options.html#importVocab> options.

From jbb at acm.org  Fri Jul  8 15:29:48 2005
From: jbb at acm.org (John B. Brodie)
Date: Fri Jul  8 15:29:55 2005
Subject: [antlr-interest] non-determinism warnings again
In-Reply-To: <dbcf4c2c050708133649a232e0@mail.gmail.com> (message from Tarun
	Khanna on Fri, 08 Jul 2005 16:36:38 -0400)
References: <dbcf4c2c050708081344af0432@mail.gmail.com>
	<E1Dqv26-0006IO-00@gecko> <dbcf4c2c050708092475edecef@mail.gmail.com>
	<E1Dqw47-0006Dw-00@gecko> <dbcf4c2c05070810035f3cf0a8@mail.gmail.com>
	<E1Dqy2t-0006Oq-00@gecko> <dbcf4c2c050708133649a232e0@mail.gmail.com>
Message-ID: <E1Dr1Lw-0001q7-00@gecko>

The qualification rule I posted was wrong, you probably have already
fixed this:

qualification :
        DOT 
        ( ( ID ( qualification )? )
............^^.....should be IDENT
        | TAB )
    ;

Your problem with `invalid token null` is due, i believe, to exp
looking for more term`s at the end of the expression (well actually
term is looking for more factor`s, but that is same issue). I think
you need to add an outermost rule which handles the EOF token, thus:

top : exp EOF ;

and then call parse.top() from your Main driver.

Hope this helps...
   -jbb
From jimi at temporal-wave.com  Fri Jul  8 16:04:58 2005
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri Jul  8 16:05:00 2005
Subject: [antlr-interest] Re: nested comments
Message-ID: <B36CCC332A32904F8FA3DE134A23533615BB98@wavemachine.temporal-wave.com>


> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Martin Probst
> 
> Hi,
> 
> > the right things to do is NOT to comment /* */ the code
> > but remove it with: #if 0 #endif, which can nest!
> 
> I heavily doubt that - the preprocessor is evil anyways, and also it
> might get really hard to read (maybe depending on your IDE, I haven't
> used one yet that highlighted such sections as comments). For the sake
> of readability you should probably use //, as that can nest too
> (although it's a pain if you don't have a proper IDE).

I highly doubt that! ;-) What you should actually do is use source code
control, delete it altogether and track the change and comment why you
deleted it - and not clutter the code with junk code that is potentially
confusing.

Jim
From ewbank at gmail.com  Fri Jul  8 16:53:29 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Fri Jul  8 16:53:32 2005
Subject: [antlr-interest] Re: nested comments
In-Reply-To: <B36CCC332A32904F8FA3DE134A23533615BB98@wavemachine.temporal-wave.com>
References: <B36CCC332A32904F8FA3DE134A23533615BB98@wavemachine.temporal-wave.com>
Message-ID: <dd3a065f05070816532c84e971@mail.gmail.com>

And all those present said "amen", and studied and learned the wisdom of 
version control...


That said, I do support a language with nested comments - user requirements 
are not always what we want - so I end up doing pretty much what's been 
discussed above in the lexer...

On 7/8/05, Jim Idle <jimi@temporal-wave.com> wrote:
> 
> What you should actually do is use source code control, delete it 
> 
altogether and track the change and comment why you
> 
deleted it - and not clutter the code with junk code that is potentially
> confusing.
> 
> Jim
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050708/a055b3c5/attachment.html
From subhobrotosinha at rediffmail.com  Sat Jul  9 23:47:16 2005
From: subhobrotosinha at rediffmail.com (Subhobroto  Sinha)
Date: Sat Jul  9 23:45:53 2005
Subject: [antlr-interest] How does the two rules differ in a tree parser ?
Message-ID: <20050710064716.27498.qmail@webmail36.rediffmail.com>

 ?
In a treeparser, what does this mean (in english, verbosely if possible):

declarator : #(varName : ID {std::cout<<"\n variable name : " << varName->getText();} (fixedArraySize)*) ;

and why does it behave differently from :

declarator : varName : ID {std::cout<<"\n variable name : " << varName->getText();} (fixedArraySize)* ;

The 'declarator' rule will parse AST like :

intArray 5

or

mulDimArray 3 4 5 6 7 8

So if we add this rule defn. :

fixedArraySize : positiveIntConst : INT {std::cout<<"\n array subscript : " << positiveIntConst->getText();};

then , parsing the first AST will display :

variable name : intArray
array subscript : 5

and parsing the second AST will display :

variable name : mulDimArray
array subscript : 3
array subscript : 4
array subscript : 5
array subscript : 6
array subscript : 7
array subscript : 8
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050710/e3217f0f/attachment.html
From mail at martin-probst.com  Sun Jul 10 10:35:42 2005
From: mail at martin-probst.com (Martin Probst)
Date: Sun Jul 10 10:35:52 2005
Subject: [antlr-interest] Re: nested comments
In-Reply-To: <B36CCC332A32904F8FA3DE134A23533615BB98@wavemachine.temporal-wave.com>
References: <B36CCC332A32904F8FA3DE134A23533615BB98@wavemachine.temporal-wave.com>
Message-ID: <1121016942.14816.1.camel@localhost.localdomain>


> I highly doubt that! ;-) What you should actually do is use source code
> control, delete it altogether and track the change and comment why you
> deleted it - and not clutter the code with junk code that is potentially
> confusing.

You mean local RCS? I often find it useful to just comment the code
while developing on it because you can still look at it easily. Ofcourse
noone leaves commented out code in the files he checks in - at least I
hope so ;-)

Martin

From parrt at cs.usfca.edu  Sun Jul 10 12:27:40 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun Jul 10 12:26:55 2005
Subject: [antlr-interest] How does the two rules differ in a tree parser ?
In-Reply-To: <20050710064716.27498.qmail@webmail36.rediffmail.com>
References: <20050710064716.27498.qmail@webmail36.rediffmail.com>
Message-ID: <14F284FE-FFFE-448B-A69C-DD59C62AFA08@cs.usfca.edu>

On Jul 9, 2005, at 11:47 PM, Subhobroto Sinha wrote:
>
> In a treeparser, what does this mean (in english, verbosely if  
> possible):
>
> declarator : #(varName : ID {std::cout<<"\n variable name : " <<  
> varName->getText();} (fixedArraySize)*) ;

It means match a tree with ID at the root and zero or more children  
whose structure is specified by fixedArraySize.
> and why does it behave differently from :
>
> declarator : varName : ID {std::cout<<"\n variable name : " <<  
> varName->getText();} (fixedArraySize)* ;

Because the first one is a 2D structure with ID at the root.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Sun Jul 10 13:12:13 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun Jul 10 13:11:28 2005
Subject: [antlr-interest] ANTLR lecture and dinner in Mumbai and Bangalore
	India
Message-ID: <2F088AC4-82CD-4924-BD7C-87C3540F7A1E@cs.usfca.edu>

Howdy,

I just got word from my contact in India that is managing my  
itinerary etc... that we have some extra seats left in the lectures  
I'm doing on ANTLR at the Taj Mahal Hotel in Mumbai July 25th and the  
Taj Residency in Bangalore July 28th.  Free buffet dinner apparently. :)

Anyway, they were originally restricting it to people that were  
interested in coming to USF for grad school, but apparently they have  
made more room or something and so they've opened up the lecture to  
anybody with an interest in programming.  I'm attaching the text of  
the "advertisement" on the lecture.

Please feel free to pass this announcement on to your fellow  
programmers. :)

If you wanna come say hi or see the lecture, please contact Dr.  
Richard Johnson, rgjohnson at usfca.edu, at USF's Thailand (Bangkok)  
office.   Dr. Johnson's office phone number is +662-685-3515.

Regards,
Terence
-----------------------
Lecture title

"An introduction to ANTLR and domain-specific languages"

Lecture abstract

Most people think of grammars and parser generators in terms of
building compilers, yet the number of language recognition and
translation tasks dwarfs the number of compilers being built.  In this
lecture, Terence Parr illustrates the wide applicability of parser
generators to domain specific languages and other recognition and
translation tasks.

ANTLR codifies what programmers do naturally by hand, thereby placing
the power of formal languages in the hands of the average programmer.
This lecture is a practical introduction to ANTLR and uses numerous
examples to demonstrate the power of simple grammars and their use in
a variety of common tasks.

Why learn about language tools?

Skill with computer languages is the single most useful programming
weapon you can acquire because it covers just about every application
of computing. As the primary developer of ANTLR, I receive questions
from an amazingly broad group of users: biologists doing DNA pattern
recognition, NASA scientists automatically building communication
libraries from deep space probe specification RTF documents, people
building configuration files for every conceivable kind of program,
and so on. BEA Systems' WebLogic server uses ANTLR for many parsing
and translation tasks such as JSP translation and SQL expression
parsing.  The jGuru.com Java developer's site incorporates many
languages from object-schema specifications to HTML sanitizers.  The
point is that computer language skills enable you to produce extremely
flexible and powerful software, not just compilers for new programming
languages.  Being proficient with languages and grammars identifies
you immediately as a sophisticated developer, on a tier above most
other programmers.

Why come to hear Terence Parr?

Terence has been building and studying languages and language tools
for 20 years.  He is the creator of the popular parser generator,
ANTLR (there are over 5000 downloads a month) that has almost
single-handely diverted attention from LR-based tools such as yacc.
Because of his dual academic background and substantial industrial
experience, Terence brings an unusual perspective to the world of
parsing and translation.  Furthermore, he is an engaging and
entertaining speaker.

Brief Biography

Terence Parr is a professor of computer science and graduate program
director at the University of San Francisco where he continues to work
on his ANTLR parser generator, http://www.antlr.org. Terence recently
returned from years in industry where he co-founded jGuru.com. He
herded programmers and implemented the large jGuru developers web
site, during which time he developed and refined the StringTemplate
engine. Terence has consulted for and held various technical positions
at companies such as IBM, Lockheed Missiles and Space, NeXT, and
Renault Automation.  Terence holds a Ph.D. in Computer Engineering
from Purdue University and was a postdoctoral fellow at the Army
High-Performance Computing Research Center at the University of
Minnesota where he built parallelizing FORTRAN source-to-source
translators.

--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From eldencrom at comcast.net  Sun Jul 10 22:49:49 2005
From: eldencrom at comcast.net (Elden Crom)
Date: Sun Jul 10 22:50:03 2005
Subject: [antlr-interest] ANTLR3ea+ANTLWorks is *really cool*,
	but how do I insert PythonTokenStream.java
Message-ID: <42D2087D.1090702@comcast.net>


Or the like into the token stream to make it Indention Sensitive?
(like python http://www.antlr.org/grammar/1078018002577/python.tar.gz)

Or does (will?) the 3.0 grammar support indention more directly now?

Thanks,
Elden


From tarunkhanna at gmail.com  Mon Jul 11 10:58:01 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Mon Jul 11 10:58:29 2005
Subject: [antlr-interest] non-determinism warnings again
In-Reply-To: <E1Dr1Lw-0001q7-00@gecko>
References: <dbcf4c2c050708081344af0432@mail.gmail.com>
	<E1Dqv26-0006IO-00@gecko> <dbcf4c2c050708092475edecef@mail.gmail.com>
	<E1Dqw47-0006Dw-00@gecko> <dbcf4c2c05070810035f3cf0a8@mail.gmail.com>
	<E1Dqy2t-0006Oq-00@gecko> <dbcf4c2c050708133649a232e0@mail.gmail.com>
	<E1Dr1Lw-0001q7-00@gecko>
Message-ID: <dbcf4c2c05071110583b922a51@mail.gmail.com>

Hi John,

Thanks for your response. The parser seems to be working fine now. Although 
I still don't understand why does it not generate any warnings now, when it 
did generate them earlier. What is the difference in the rule that you 
modified it to and the original one? So I guess I'll post a new topic for 
that...Let's hope someone throws light.

Thanks 
Tarun

On 7/8/05, John B. Brodie <jbb@acm.org> wrote:
> 
> The qualification rule I posted was wrong, you probably have already
> fixed this:
> 
> qualification :
> DOT
> ( ( ID ( qualification )? )
> ............^^.....should be IDENT
> | TAB )
> ;
> 
> Your problem with `invalid token null` is due, i believe, to exp
> looking for more term`s at the end of the expression (well actually
> term is looking for more factor`s, but that is same issue). I think
> you need to add an outermost rule which handles the EOF token, thus:
> 
> top : exp EOF ;
> 
> and then call parse.top() from your Main driver.
> 
> Hope this helps...
> -jbb
> 



-- 
Tarun Khanna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050711/b864415f/attachment.html
From tarunkhanna at gmail.com  Mon Jul 11 11:04:53 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Mon Jul 11 11:05:29 2005
Subject: [antlr-interest] Difference in the following rules
In-Reply-To: <dbcf4c2c05070810035f3cf0a8@mail.gmail.com>
References: <dbcf4c2c050708081344af0432@mail.gmail.com>
	<E1Dqv26-0006IO-00@gecko> <dbcf4c2c050708092475edecef@mail.gmail.com>
	<E1Dqw47-0006Dw-00@gecko> <dbcf4c2c05070810035f3cf0a8@mail.gmail.com>
Message-ID: <dbcf4c2c05071111045eafe1d4@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.g
Type: application/octet-stream
Size: 866 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050711/955e00b1/test.obj
From evansgr_99 at hotmail.com  Mon Jul 11 11:18:38 2005
From: evansgr_99 at hotmail.com (Gary Evans)
Date: Mon Jul 11 11:18:40 2005
Subject: [antlr-interest] Runtime code question - v3 ea4
Message-ID: <BAY102-F150E9D574BEBA027E9D7CBEADC0@phx.gbl>

Folks,

I have been studying the code in the runtime in order to translate it to 
another language,  and I have a question about a couple of the classes:  
ANTLRFileStream and  ANTLRStringStream.  Just a quick note - I am not a real 
programmer, and I am just now  learning about java, so I may have completely 
missed the boat here (so please be kind if  this is the case).

Within these classes is a method called "public int mark()".  It looks like 
a useless  method since all it does is create a CharStreamState object, give 
it the data from .p,  .line, and .charPositionInLine, and then it just 
returns 0!

Shouldn't it do something more, like save that state back into the variable 
markers?

If not, then what method does save data into markers?  All I can see is that 
when the  object is initialized, it saves a blank CharStreamState into 
markers.  After that, I don't  see anything that puts more information into 
markers, so what is its purpose?

Also, rewind() gives us the ability to go to a particular mark within 
markers and set the  local variables to those values - but I cannot figure 
out where we ever set any information  in markers.

FYI - I am looking at the code for antlr v3 ea4 (I think).  I clicked on a 
link to download  version ea5, but the name of the file that was actually 
downloaded was ea4.

Thanks,
gevans


From shunfeng.zhang at zib.de  Mon Jul 11 11:24:08 2005
From: shunfeng.zhang at zib.de (Shunfeng ZHANG)
Date: Mon Jul 11 11:24:12 2005
Subject: [antlr-interest] MathML
In-Reply-To: <BAY102-F150E9D574BEBA027E9D7CBEADC0@phx.gbl>
Message-ID: <200507111824.j6BIO8h23190@softs11.zib.de>

Dear all,

Did anyone ever try the ANTLR to parse the MathML(www.w3c.org/math)??

Thanks
Shunfeng


 

From parrt at cs.usfca.edu  Mon Jul 11 11:45:28 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Jul 11 11:44:44 2005
Subject: [antlr-interest] Runtime code question - v3 ea4
In-Reply-To: <BAY102-F150E9D574BEBA027E9D7CBEADC0@phx.gbl>
References: <BAY102-F150E9D574BEBA027E9D7CBEADC0@phx.gbl>
Message-ID: <2BDFA06B-2FFD-494F-8242-30336A6BF878@cs.usfca.edu>


On Jul 11, 2005, at 11:18 AM, Gary Evans wrote:

> Folks,
>
> I have been studying the code in the runtime in order to translate  
> it to another language,

Hi Gary!  Nice to have you here.  Thanks for the questions.

First thing: within a few weeks I hope to refactor the Java.stg  
template file to be much smaller and easier to maintain, which would  
necessitate a change to your templates (well, if you wanted to say  
"similar").

>   and I have a question about a couple of the classes:   
> ANTLRFileStream and  ANTLRStringStream.  Just a quick note - I am  
> not a real programmer, and I am just now  learning about java, so I  
> may have completely missed the boat here (so please be kind if   
> this is the case).

Yeah, I wanted to revisit those class names and functionality at some  
point, so please critique away!

> Within these classes is a method called "public int mark()".  It  
> looks like a useless  method since all it does is create a  
> CharStreamState object, give it the data from .p,  .line,  
> and .charPositionInLine, and then it just returns 0!

Excellent observation.  It turns out that there can only be one mark  
"location" in the current implementation; hence the marker number is  
always 0.  Later, when I add in syntactic predicates, we will need to  
make this more general.  For now, I opted for a more efficient  
implementation.

> Shouldn't it do something more, like save that state back into the  
> variable markers?

It saves it into a variable (an array of size 1) and then reuses it  
in rewrite(m) where m is always 0.

> If not, then what method does save data into markers?  All I can  
> see is that when the  object is initialized, it saves a blank  
> CharStreamState into markers.  After that, I don't  see anything  
> that puts more information into markers, so what is its purpose?
>
> Also, rewind() gives us the ability to go to a particular mark  
> within markers and set the  local variables to those values - but I  
> cannot figure out where we ever set any information  in markers.

The marker is set in mark() and the instance variables are wacked and  
reset to the marker in rewind() :)

> FYI - I am looking at the code for antlr v3 ea4 (I think).  I  
> clicked on a link to download  version ea5, but the name of the  
> file that was actually downloaded was ea4.

That's pretty odd...sounds like a browser issue.  What does  
Tool.VERSION reveal?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Mon Jul 11 12:06:06 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Jul 11 12:05:23 2005
Subject: [antlr-interest] ANTLR3ea+ANTLWorks is *really cool*,
	but how do I insert PythonTokenStream.java
In-Reply-To: <42D2087D.1090702@comcast.net>
References: <42D2087D.1090702@comcast.net>
Message-ID: <803DF81B-F133-4914-BDFC-2D8377785DBB@cs.usfca.edu>


On Jul 10, 2005, at 10:49 PM, Elden Crom wrote:
> Or the like into the token stream to make it Indention Sensitive?
> (like python http://www.antlr.org/grammar/1078018002577/python.tar.gz)

Damn good question.  I forgot that the Python crew needs indented  
actions...that sucks.  Hmm...I guess I'll have to look at what they  
did for 2.x and add to 3.x :)

> Or does (will?) the 3.0 grammar support indention more directly now?

Perhaps Marq Kole can tell me exactly what he needs and I can add :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From rodrigobamboo at gmail.com  Mon Jul 11 14:40:52 2005
From: rodrigobamboo at gmail.com (Rodrigo B. de Oliveira)
Date: Mon Jul 11 14:40:54 2005
Subject: [antlr-interest] ANTLR3ea+ANTLWorks is *really cool*,
	but how do I insert PythonTokenStream.java
In-Reply-To: <803DF81B-F133-4914-BDFC-2D8377785DBB@cs.usfca.edu>
References: <42D2087D.1090702@comcast.net>
	<803DF81B-F133-4914-BDFC-2D8377785DBB@cs.usfca.edu>
Message-ID: <5917478b05071114407be3e047@mail.gmail.com>

On 7/11/05, Terence Parr <parrt@cs.usfca.edu> wrote:
> 
> On Jul 10, 2005, at 10:49 PM, Elden Crom wrote:
> > Or the like into the token stream to make it Indention Sensitive?
> > (like python http://www.antlr.org/grammar/1078018002577/python.tar.gz)
> 
> Damn good question.  I forgot that the Python crew needs indented
> actions...that sucks.  Hmm...I guess I'll have to look at what they
> did for 2.x and add to 3.x :)
> 

Boo also needs virtual indent/dedent tokens. Our current approach is
to insert a IndentTokenStreamFilter that preprocesses white space
tokens and generates indent/dedent virtual tokens as necessary. Will
this approach still be supported in antlr 3.0?

Rodrigo
From parrt at cs.usfca.edu  Mon Jul 11 14:50:05 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Jul 11 14:49:18 2005
Subject: [antlr-interest] ANTLR3ea+ANTLWorks is *really cool*,
	but how do I insert PythonTokenStream.java
In-Reply-To: <5917478b05071114407be3e047@mail.gmail.com>
References: <42D2087D.1090702@comcast.net>
	<803DF81B-F133-4914-BDFC-2D8377785DBB@cs.usfca.edu>
	<5917478b05071114407be3e047@mail.gmail.com>
Message-ID: <78E7F635-9890-4B3A-8658-6E29A96E2422@cs.usfca.edu>


On Jul 11, 2005, at 2:40 PM, Rodrigo B. de Oliveira wrote:

> On 7/11/05, Terence Parr <parrt@cs.usfca.edu> wrote:
>
> Boo also needs virtual indent/dedent tokens. Our current approach is
> to insert a IndentTokenStreamFilter that preprocesses white space
> tokens and generates indent/dedent virtual tokens as necessary. Will
> this approach still be supported in antlr 3.0?

Yes, as long as ANTLR's lexer sees imaginary indent/dedent tokens,  
it's cool :)  We'll have to find a way to have this automatically  
detected and added to the input stream.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Mon Jul 11 15:01:42 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Jul 11 15:00:59 2005
Subject: [antlr-interest] StringTemplate 2.2b4 release (release candidate)
Message-ID: <8623BCF6-C928-47A9-9427-829E716997B7@cs.usfca.edu>

Howdy,

I have what I think is 2.2 ST release, but it would be great if  
people could test it out:

http://www.antlr.org/download/stringtemplate-2.2b4.tar.gz

You'll note some seriously great new features:

http://www.stringtemplate.org/doc/release-2.2.tml

I've not had time to update the manual yet, just the release notes.

Please let me know about any incompatibilities, though I don't expect  
any.  Should be ok.

I am not sure I can get the doc done before I leave next week for  
Asia, in which case the formal release will be pushed back until  
August sometime.

Terence
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From ric.klaren at gmail.com  Tue Jul 12 00:59:17 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Tue Jul 12 00:59:19 2005
Subject: [antlr-interest] Difference in the following rules
In-Reply-To: <dbcf4c2c05071111045eafe1d4@mail.gmail.com>
References: <dbcf4c2c050708081344af0432@mail.gmail.com>
	<E1Dqv26-0006IO-00@gecko> <dbcf4c2c050708092475edecef@mail.gmail.com>
	<E1Dqw47-0006Dw-00@gecko> <dbcf4c2c05070810035f3cf0a8@mail.gmail.com>
	<dbcf4c2c05071111045eafe1d4@mail.gmail.com>
Message-ID: <bc607a4e05071200593bf589f9@mail.gmail.com>

Hi,

On 7/11/05, Tarun Khanna <tarunkhanna@gmail.com> wrote:
> The attached grammar produces a non-determinism warning in the following
> production
>  factor :
>       ( ( LPAREN exp RPAREN ) | IDENT )  (DOT  IDENT)*  (DOT  TAB)? 
>     | 
>       TAB
>     ;

Notice that the (DOT IDENT)* may match the empty word e.g. nothing.
Add to that that (DOT TAB)? may also match nothing. Add to that that
the start of both may be a DOT. So antlr has a hard time choosing
between the closure (DOT IDENT)* and the optional part (DOT TAB)?. Try
reading the code that gets generated for it, it might help you get a
feel for it.

>  However if I change it to the following (as suggested by John Brodie), the
> warning goes away.
>  factor :
>           ( ( LPAREN exp RPAREN ) | IDENT )       ( qualification)?
>     | 
>           TAB
>     ;

Notice that here you have only one optional thing.

>  qualification :
>         DOT
>      ( ( IDENT ( qualification)? )  | TAB )
>     ;

And this is a left factoring of the first rule. E.g. the start of the
rule is now unambiguous one DOT. and what follows is also easy to
decide the choice can be made by looking at the next token and going
into the IDENT (qualification)? part if it's an IDENT and into TAB if
it's a TAB. E.g. by restructuring the rules you made it real easy for
antlr to make the choice between the two alternatives. (e.g. no
warning)
 
>  The two rules are similar and should behave similarly. However the latter
> does not generate any warnings. Can anyone please tell my, why does the
> first one generate those warnings and what is it that changes in the latter
> one.

I hope the above helps a bit. In recursive descent parsing (that's
what antlr's parsers/lexers/treewalkers do) the parser decides which
alternative to work on based upon one or more tokens lookahead from
the input stream. To make the decision ANTLR uses lookahead sets for
alternatives. If the lookahead sets overlap the choice is ambiguous
and ANTLR gives a warning. Often this warning can be ignored. Also
check out the faq's about this and left factoring at jguru.com. It
really helps to read the generated code for some simple grammars to
get a feel for the beast.

Cheers,

Ric
From gt54-antlr at cyconix.com  Tue Jul 12 01:10:05 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Tue Jul 12 01:10:10 2005
Subject: [antlr-interest] Difference in the following rules
In-Reply-To: <bc607a4e05071200593bf589f9@mail.gmail.com>
References: <dbcf4c2c050708081344af0432@mail.gmail.com>	<E1Dqv26-0006IO-00@gecko>
	<dbcf4c2c050708092475edecef@mail.gmail.com>	<E1Dqw47-0006Dw-00@gecko>
	<dbcf4c2c05070810035f3cf0a8@mail.gmail.com>	<dbcf4c2c05071111045eafe1d4@mail.gmail.com>
	<bc607a4e05071200593bf589f9@mail.gmail.com>
Message-ID: <42D37ADD.9040407@cyconix.com>

Ric Klaren wrote:
> Hi,
> 
> On 7/11/05, Tarun Khanna <tarunkhanna@gmail.com> wrote:
> 
>>The attached grammar produces a non-determinism warning in the following
>>production
>> factor :
>>      ( ( LPAREN exp RPAREN ) | IDENT )  (DOT  IDENT)*  (DOT  TAB)? 
>>    | 
>>      TAB
>>    ;
> 
> 
> Notice that the (DOT IDENT)* may match the empty word e.g. nothing.
> Add to that that (DOT TAB)? may also match nothing. Add to that that
> the start of both may be a DOT. So antlr has a hard time choosing
> between the closure (DOT IDENT)* and the optional part (DOT TAB)?. 

But what if k is 2, as Tarun said in his original post?

Paul

From ric.klaren at gmail.com  Tue Jul 12 02:06:42 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Tue Jul 12 02:06:45 2005
Subject: [antlr-interest] Difference in the following rules
In-Reply-To: <42D37ADD.9040407@cyconix.com>
References: <dbcf4c2c050708081344af0432@mail.gmail.com>
	<E1Dqv26-0006IO-00@gecko> <dbcf4c2c050708092475edecef@mail.gmail.com>
	<E1Dqw47-0006Dw-00@gecko> <dbcf4c2c05070810035f3cf0a8@mail.gmail.com>
	<dbcf4c2c05071111045eafe1d4@mail.gmail.com>
	<bc607a4e05071200593bf589f9@mail.gmail.com>
	<42D37ADD.9040407@cyconix.com>
Message-ID: <bc607a4e05071202065f7a68ae@mail.gmail.com>

On 7/12/05, Paul Johnson <gt54-antlr@cyconix.com> wrote:
> Ric Klaren wrote:
> > On 7/11/05, Tarun Khanna <tarunkhanna@gmail.com> wrote:
> >>The attached grammar produces a non-determinism warning in the following
> >>production
> >> factor :
> >>      ( ( LPAREN exp RPAREN ) | IDENT )  (DOT  IDENT)*  (DOT  TAB)?
> >>    |
> >>      TAB
> >>    ;
> >
> > Notice that the (DOT IDENT)* may match the empty word e.g. nothing.
> > Add to that that (DOT TAB)? may also match nothing. Add to that that
> > the start of both may be a DOT. So antlr has a hard time choosing
> > between the closure (DOT IDENT)* and the optional part (DOT TAB)?.
> 
> But what if k is 2, as Tarun said in his original post?

Not sure didn't follow the first part of the thread, didn't see the
complete grammar. It may come from surrounding rules, maybe in
combination with the alternative that only matches a TAB. Would have
to check all the lookahead sets generated with -diagnostic. When you
have parts that match nothing or complete rules that match nothing you
get really unintuitive behaviour in the lookahead sets, that's why we
have ANTLR to tell us if we might have missed something. Although
antlr is sometimes a bit overzealous. (version 3 will make life quite
a bit better...)

Anycase left factoring is usually a good solution to getting rid of
those warnings. Also
in this case you get better performance thanks to the left factoring
since antlr can decide things by looking ahead one token in stead of
two (or more).

Cheers,

Ric
From tarunkhanna at gmail.com  Tue Jul 12 06:10:05 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Tue Jul 12 06:10:57 2005
Subject: [antlr-interest] Difference in the following rules
In-Reply-To: <bc607a4e05071202065f7a68ae@mail.gmail.com>
References: <dbcf4c2c050708081344af0432@mail.gmail.com>
	<E1Dqv26-0006IO-00@gecko> <dbcf4c2c050708092475edecef@mail.gmail.com>
	<E1Dqw47-0006Dw-00@gecko> <dbcf4c2c05070810035f3cf0a8@mail.gmail.com>
	<dbcf4c2c05071111045eafe1d4@mail.gmail.com>
	<bc607a4e05071200593bf589f9@mail.gmail.com>
	<42D37ADD.9040407@cyconix.com>
	<bc607a4e05071202065f7a68ae@mail.gmail.com>
Message-ID: <dbcf4c2c05071206106a3be0b6@mail.gmail.com>

Thanks Paul and Ric, I appreciate your help. I didn't know of the 
-diagnostic option. It helps greatly as it lists down the FIRST and FOLLOW 
sets, which I used to generate by manually for debugging.

Although it is still not clear that even after a lookahead of 2, the above 
warnings are generated because I thought that the after looking ahead two 
tokens the parser would be able to decide concretely as to which rule to 
follow. I guess the diagnostic files may help...

Thanks again.
Tarun
On 7/12/05, Ric Klaren <ric.klaren@gmail.com> wrote:
> 
> On 7/12/05, Paul Johnson <gt54-antlr@cyconix.com> wrote:
> > Ric Klaren wrote:
> > > On 7/11/05, Tarun Khanna <tarunkhanna@gmail.com> wrote:
> > >>The attached grammar produces a non-determinism warning in the 
> following
> > >>production
> > >> factor :
> > >> ( ( LPAREN exp RPAREN ) | IDENT ) (DOT IDENT)* (DOT TAB)?
> > >> |
> > >> TAB
> > >> ;
> > >
> > > Notice that the (DOT IDENT)* may match the empty word e.g. nothing.
> > > Add to that that (DOT TAB)? may also match nothing. Add to that that
> > > the start of both may be a DOT. So antlr has a hard time choosing
> > > between the closure (DOT IDENT)* and the optional part (DOT TAB)?.
> >
> > But what if k is 2, as Tarun said in his original post?
> 
> Not sure didn't follow the first part of the thread, didn't see the
> complete grammar. It may come from surrounding rules, maybe in
> combination with the alternative that only matches a TAB. Would have
> to check all the lookahead sets generated with -diagnostic. When you
> have parts that match nothing or complete rules that match nothing you
> get really unintuitive behaviour in the lookahead sets, that's why we
> have ANTLR to tell us if we might have missed something. Although
> antlr is sometimes a bit overzealous. (version 3 will make life quite
> a bit better...)
> 
> Anycase left factoring is usually a good solution to getting rid of
> those warnings. Also
> in this case you get better performance thanks to the left factoring
> since antlr can decide things by looking ahead one token in stead of
> two (or more).
> 
> Cheers,
> 
> Ric
> 



-- 
Tarun Khanna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050712/053e6111/attachment.html
From tarunkhanna at gmail.com  Tue Jul 12 08:24:23 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Tue Jul 12 08:25:03 2005
Subject: [antlr-interest] generating root nodes in tree parser
Message-ID: <dbcf4c2c050712082439b463d9@mail.gmail.com>

Is there a way to add a root node that is not part of the parser grammar? 
e.g. I when the parser sees a function call I want to generate a subtree 
with a root such as CALL and two children.

The first child would be the identifier(function name) and second would be 
the list of parameters.

so a function call like... foo(a, b) would be translated to

call
/ \
/ \
foo a, b

Actually, what is the best way to represent function calls in syntax trees? 
This is just what I thought would be right.
-- 
Tarun Khanna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050712/e496dc9e/attachment-0001.html
From mail at martin-probst.com  Tue Jul 12 09:32:57 2005
From: mail at martin-probst.com (Martin Probst)
Date: Tue Jul 12 09:33:08 2005
Subject: [antlr-interest] generating root nodes in tree parser
In-Reply-To: <dbcf4c2c050712082439b463d9@mail.gmail.com>
References: <dbcf4c2c050712082439b463d9@mail.gmail.com>
Message-ID: <1121185977.1664.12.camel@localhost.localdomain>

> Is there a way to add a root node that is not part of the parser
> grammar? e.g. I when the parser sees a function call I want to
> generate a subtree with a root such as CALL and two children.

Yes, for example:

functionCall: id:ident pl:paramlist { ## = #(#[CALL,'function call'],
#id, #pl); };

> Actually, what is the best way to represent function calls in syntax
> trees? This is just what I thought would be right.

That's probably a matter of personal preference and depends also on what
you want to do with it later on. Some people store function identifiers
in the AST nodes themselves as it provides somewhat of a terser access
to them.

Regards,
Martin

From parrt at cs.usfca.edu  Tue Jul 12 09:34:45 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Jul 12 09:34:48 2005
Subject: [antlr-interest] generating root nodes in tree parser
In-Reply-To: <1121185977.1664.12.camel@localhost.localdomain>
References: <dbcf4c2c050712082439b463d9@mail.gmail.com>
	<1121185977.1664.12.camel@localhost.localdomain>
Message-ID: <07B409F5-50A8-4B36-A0B2-7ED571BBDFD0@cs.usfca.edu>


On Jul 12, 2005, at 9:32 AM, Martin Probst wrote:

>> Is there a way to add a root node that is not part of the parser
>> grammar? e.g. I when the parser sees a function call I want to
>> generate a subtree with a root such as CALL and two children.
>>
>
> Yes, for example:
>
> functionCall: id:ident pl:paramlist { ## = #(#[CALL,'function call'],
> #id, #pl); };

And in ANTLR v3, you can say:

functionCall : ident paramlist -> ^(CALL["function call"] ident  
paramlist) ;

:)

Ter

From mail at martin-probst.com  Tue Jul 12 09:50:17 2005
From: mail at martin-probst.com (Martin Probst)
Date: Tue Jul 12 09:50:26 2005
Subject: [antlr-interest] generating root nodes in tree parser
In-Reply-To: <07B409F5-50A8-4B36-A0B2-7ED571BBDFD0@cs.usfca.edu>
References: <dbcf4c2c050712082439b463d9@mail.gmail.com>
	<1121185977.1664.12.camel@localhost.localdomain>
	<07B409F5-50A8-4B36-A0B2-7ED571BBDFD0@cs.usfca.edu>
Message-ID: <1121187017.1664.14.camel@localhost.localdomain>

> And in ANTLR v3, you can say:
> 
> functionCall : ident paramlist -> ^(CALL["function call"] ident  
> paramlist) ;
> 
> :)

But that is of course experimental-alpha-non-stable-don't use for
production as of yet *ducks & runs*

Martin

From tkhanna at redhat.com  Tue Jul 12 09:55:01 2005
From: tkhanna at redhat.com (Tarun Khanna)
Date: Tue Jul 12 09:57:58 2005
Subject: [antlr-interest] generating root nodes in tree parser
In-Reply-To: <1121185977.1664.12.camel@localhost.localdomain>
References: <dbcf4c2c050712082439b463d9@mail.gmail.com>
	<1121185977.1664.12.camel@localhost.localdomain>
Message-ID: <42D3F5E5.2070904@redhat.com>

Thanks for the help.

>functionCall: id:ident pl:paramlist { ## = #(#[CALL,'function call'],
>#id, #pl); };
>  
>
Although I think I understand what the above statement would do, but due 
to my being new to  this stuff and to avoid any assumption related 
errors :-) could you just tell me if what I think is correct? Here it goes.

the ## creates new node
The new node is specified using the #(...) syntax...
#[CALL , 'function call'] creates the root node and gives it a label too.
#id would and #pl then become the children..

Am I right in parsing (pardon the inherent pun) the above statement?
Is there a source where I can find out about such syntax? Something that 
I can check before firing a questin on ANTLR mailing list?

Thanks a lot for your help.
Tarun
From mail at martin-probst.com  Tue Jul 12 10:40:25 2005
From: mail at martin-probst.com (Martin Probst)
Date: Tue Jul 12 10:40:34 2005
Subject: [antlr-interest] generating root nodes in tree parser
In-Reply-To: <42D3F5E5.2070904@redhat.com>
References: <dbcf4c2c050712082439b463d9@mail.gmail.com>
	<1121185977.1664.12.camel@localhost.localdomain>
	<42D3F5E5.2070904@redhat.com>
Message-ID: <1121190025.21108.5.camel@localhost.localdomain>

Hi,

> the ## creates new node

## identifies the current rule, it's a shorthand for writing
#functionCall. By assigning to it you define the "return value" of the
parser rule.

> The new node is specified using the #(...) syntax...

#( ) actually defines a subtree, first element is the rule, following
elements are children.

> #[CALL , 'function call'] creates the root node and gives it a label too.
> #id would and #pl then become the children..

Yes, exactly.

> Is there a source where I can find out about such syntax? Something that 
> I can check before firing a questin on ANTLR mailing list?

Well, there is the ANTLR Manual, both as an HTML version and a much more
accessible PDF (IMHO). But some stuff just isn't mentioned in there.

Keep in mind that wha I've written is only valid for ANTLR 2.x, the
syntax is different for the experimental 3.x version as Terr has pointed
out.

Martin

From antlr at raf.hr  Tue Jul 12 23:04:50 2005
From: antlr at raf.hr (Goran)
Date: Tue Jul 12 14:06:14 2005
Subject: [antlr-interest] 
Message-ID: <42D4AF02.90408@raf.hr>

Hi,

first I must say that I'm beginner in ANTLR (I writte few minor projects 
so far, but nothing complicated), so please forgive me on this question 
but, I just don't get it.
I have old assembler written manualy, and now I want to transfer it to 
ANTLR, so, among other things I have situation like this:

Possible source combination:
    1.    aaa                        ; just mnemonic
    2.    aaa param              ; mnemonic and one param
    3.    aaa param, param   ; mnemonic and two params

when I write down following
/
/

    /statement
        : mnemonic (paramBlock)?
        ;   

    paramBlock
        : expression (COMMA expression)?
        ;
    /

parser does recognize options 2 and 3, but when I write
/
/

    /statement
        : mnemonic (paramBlock)*
        ;   

    paramBlock
        : expression (COMMA expression)*
        ;
    /

parser passes but on second statement (for example if I have 1 following 
2) he does not recognise aaa as mnemonic but as identifier.
So, I'm comfused with (xxx)? thas this means 0 or 1 (because this is not 
functioning that way) or I miss something (what is probably the case :-) )

I'm using ANTLR 2.5.7 and K=2

thx
Goran
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050712/c9625d90/attachment.html
From jddahl at micron.com  Tue Jul 12 14:07:15 2005
From: jddahl at micron.com (Jeff Dahl)
Date: Tue Jul 12 14:07:20 2005
Subject: [antlr-interest] Modifying token type within parser
Message-ID: <42D43103.2060909@micron.com>

Is it possible to modify the token type within the parser?

I tried:

    parser_rule:  t:TOKEN {t.setType(OTHER_TOKEN);}

but, the actual token passed up is still of type TOKEN.

Thanks,
Jeff
From parrt at cs.usfca.edu  Tue Jul 12 14:13:54 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Jul 12 14:13:09 2005
Subject: [antlr-interest] generating root nodes in tree parser
In-Reply-To: <1121187017.1664.14.camel@localhost.localdomain>
References: <dbcf4c2c050712082439b463d9@mail.gmail.com>
	<1121185977.1664.12.camel@localhost.localdomain>
	<07B409F5-50A8-4B36-A0B2-7ED571BBDFD0@cs.usfca.edu>
	<1121187017.1664.14.camel@localhost.localdomain>
Message-ID: <CF27A8E4-86A7-4AAC-B4F0-6E424ACFF23F@cs.usfca.edu>


On Jul 12, 2005, at 9:50 AM, Martin Probst wrote:

>> And in ANTLR v3, you can say:
>>
>> functionCall : ident paramlist -> ^(CALL["function call"] ident
>> paramlist) ;
>>
>> :)
>>
>
> But that is of course experimental-alpha-non-stable-don't use for
> production as of yet *ducks & runs*

I'm just ramping up my marketing campaign ;)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From chris at lotuscat.com  Tue Jul 12 14:16:39 2005
From: chris at lotuscat.com (Chris Black)
Date: Tue Jul 12 14:18:18 2005
Subject: [antlr-interest] delimited param lists
In-Reply-To: <42D4AF02.90408@raf.hr>
References: <42D4AF02.90408@raf.hr>
Message-ID: <42D43337.4020303@lotuscat.com>

Goran wrote:

> Hi,

Hello! I took the liberty of supplying a subject to make the thread 
easier to track for others.

> first I must say that I'm beginner in ANTLR (I writte few minor 
> projects so far, but nothing complicated), so please forgive me on 
> this question but, I just don't get it.
> I have old assembler written manualy, and now I want to transfer it to 
> ANTLR, so, among other things I have situation like this:
>
> Possible source combination:
>     1.    aaa                        ; just mnemonic
>     2.    aaa param              ; mnemonic and one param
>     3.    aaa param, param   ; mnemonic and two params
>
> when I write down following
> /
> /
>
>     /statement
>         : mnemonic (paramBlock)?
>         ;   
>
>     paramBlock
>         : expression (COMMA expression)?
>         ;
>     /
>
> parser does recognize options 2 and 3, but when I write
> /
> /
>
>     /statement
>         : mnemonic (paramBlock)*
>         ;   
>
>     paramBlock
>         : expression (COMMA expression)*
>         ;
>     /
>
> parser passes but on second statement (for example if I have 1 
> following 2) he does not recognise aaa as mnemonic but as identifier.
> So, I'm comfused with (xxx)? thas this means 0 or 1 (because this is 
> not functioning that way) or I miss something (what is probably the 
> case :-) )
>
> I'm using ANTLR 2.5.7 and K=2

I'm guessing you are actually using 2.7.5 and the 2.5.7 was a typo...

Anyway, you are correct on ? and *. ? means 0 or 1 (or "optional"), * is 
0 or more, and + is 1 or more.
As for why your parser isn't working I'm not quite sure. My initial 
suspicion is that the parser does not know when to end the loop that can 
match any number of paramBlocks or (COMMA expression)*. The parser needs 
a way of knowing when to stop matching a rule that has * or +. This can 
be a bit tricky and sometimes requires predicates, but usually it is 
something as easy as matching an end of line or end of statement token:

statement: mnemonic (paramBlock)* NEWLINE;

Another thing I just noticed is that you probably don't need a * on both 
the paramBlock match in statement AND the (COMMA expression) part inside 
the paramBlock rule. The way it is now is you are saying a statement is 
a mnemonic followed by ANY NUMBER of paramBlocks, AND a paramBlock 
itself can contain ANY NUMBER of expressions.

Anyway, just a few tips, hope they help.
Chris
From antlr at raf.hr  Tue Jul 12 23:30:56 2005
From: antlr at raf.hr (Goran)
Date: Tue Jul 12 14:32:19 2005
Subject: [antlr-interest] delimited param lists
In-Reply-To: <42D43337.4020303@lotuscat.com>
References: <42D4AF02.90408@raf.hr> <42D43337.4020303@lotuscat.com>
Message-ID: <42D4B520.9030405@raf.hr>

Hi,

thanks for adding a subject, I plan to do so, but at the beginning I 
didn't know what to put there, and later .... , my fingers was faster 
then me, so sorry for subject, and thanks for suggestions
I'll try that

Goran

Chris Black wrote:

> Goran wrote:
>
>> Hi,
>
>
> Hello! I took the liberty of supplying a subject to make the thread 
> easier to track for others.
>
>> first I must say that I'm beginner in ANTLR (I writte few minor 
>> projects so far, but nothing complicated), so please forgive me on 
>> this question but, I just don't get it.
>> I have old assembler written manualy, and now I want to transfer it 
>> to ANTLR, so, among other things I have situation like this:
>>
>> Possible source combination:
>>     1.    aaa                        ; just mnemonic
>>     2.    aaa param              ; mnemonic and one param
>>     3.    aaa param, param   ; mnemonic and two params
>>
>> when I write down following
>> /
>> /
>>
>>     /statement
>>         : mnemonic (paramBlock)?
>>         ;  
>>     paramBlock
>>         : expression (COMMA expression)?
>>         ;
>>     /
>>
>> parser does recognize options 2 and 3, but when I write
>> /
>> /
>>
>>     /statement
>>         : mnemonic (paramBlock)*
>>         ;  
>>     paramBlock
>>         : expression (COMMA expression)*
>>         ;
>>     /
>>
>> parser passes but on second statement (for example if I have 1 
>> following 2) he does not recognise aaa as mnemonic but as identifier.
>> So, I'm comfused with (xxx)? thas this means 0 or 1 (because this is 
>> not functioning that way) or I miss something (what is probably the 
>> case :-) )
>>
>> I'm using ANTLR 2.5.7 and K=2
>
>
> I'm guessing you are actually using 2.7.5 and the 2.5.7 was a typo...
>
> Anyway, you are correct on ? and *. ? means 0 or 1 (or "optional"), * 
> is 0 or more, and + is 1 or more.
> As for why your parser isn't working I'm not quite sure. My initial 
> suspicion is that the parser does not know when to end the loop that 
> can match any number of paramBlocks or (COMMA expression)*. The parser 
> needs a way of knowing when to stop matching a rule that has * or +. 
> This can be a bit tricky and sometimes requires predicates, but 
> usually it is something as easy as matching an end of line or end of 
> statement token:
>
> statement: mnemonic (paramBlock)* NEWLINE;
>
> Another thing I just noticed is that you probably don't need a * on 
> both the paramBlock match in statement AND the (COMMA expression) part 
> inside the paramBlock rule. The way it is now is you are saying a 
> statement is a mnemonic followed by ANY NUMBER of paramBlocks, AND a 
> paramBlock itself can contain ANY NUMBER of expressions.
>
> Anyway, just a few tips, hope they help.
> Chris
>
>
>


From gt54-antlr at cyconix.com  Wed Jul 13 00:35:24 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Wed Jul 13 00:35:36 2005
Subject: [antlr-interest] AST visualisation?
Message-ID: <42D4C43C.7010903@cyconix.com>

does anyone know of a tool that I can use to visualise trees? Something 
that lets you click on a node to show or hide its subtree, for example. 
It doesn't have to auto-generate from an ANTLR description, but that 
would be nice.

Thanks -

Paul

From canton at indra.es  Wed Jul 13 00:43:37 2005
From: canton at indra.es (=?iso-8859-1?Q?Ant=F3n_Garc=EDa=2C_Carolina?=)
Date: Wed Jul 13 00:43:41 2005
Subject: [antlr-interest] AST visualisation?
Message-ID: <17B525E69E376B4A8B99B25170B4A0B7013B62CE@MADARRMAIL1.indra.es>

I don't know if you have try this from your test parser class:

		CommonAST ast = (CommonAST) parser.getAST();            
            final ASTFrame frame = new ASTFrame(args[0], ast);
            frame.setVisible(true);

This opens a window with the generated tree.

Hope this helps.

Regards

Carol

-----Mensaje original-----
De: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org]En nombre de Paul Johnson
Enviado el: mi?rcoles, 13 de julio de 2005 9:35
Para: ANTLR Interest
Asunto: [antlr-interest] AST visualisation?


does anyone know of a tool that I can use to visualise trees? Something 
that lets you click on a node to show or hide its subtree, for example. 
It doesn't have to auto-generate from an ANTLR description, but that 
would be nice.

Thanks -

Paul

From ric.klaren at gmail.com  Wed Jul 13 01:09:30 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Wed Jul 13 01:09:32 2005
Subject: [antlr-interest] Modifying token type within parser
In-Reply-To: <42D43103.2060909@micron.com>
References: <42D43103.2060909@micron.com>
Message-ID: <bc607a4e0507130109181cd489@mail.gmail.com>

On 7/12/05, Jeff Dahl <jddahl@micron.com> wrote:
> Is it possible to modify the token type within the parser?
> 
> I tried:
> 
>     parser_rule:  t:TOKEN {t.setType(OTHER_TOKEN);}
> 
> but, the actual token passed up is still of type TOKEN.

What are you exactly trying to do? Changing the token in the parser
has very little effect. E.g. here the token is recognized as TOKEN
changing the type afterwards will not change the parse outcome.

If you're trying to build a tree with a different token type just use
the AST construction syntax to add the appropriate token to the AST
(might have to turn automatic construction of for the rule).

Cheers,

Ric
From gt54-antlr at cyconix.com  Wed Jul 13 01:52:13 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Wed Jul 13 01:52:21 2005
Subject: [antlr-interest] AST visualisation?
In-Reply-To: <17B525E69E376B4A8B99B25170B4A0B7013B62CE@MADARRMAIL1.indra.es>
References: <17B525E69E376B4A8B99B25170B4A0B7013B62CE@MADARRMAIL1.indra.es>
Message-ID: <42D4D63D.3010401@cyconix.com>

Ant?n Garc?a wrote:
> I don't know if you have try this from your test parser class:
> 
> 		CommonAST ast = (CommonAST) parser.getAST();            
>             final ASTFrame frame = new ASTFrame(args[0], ast);
>             frame.setVisible(true);
> 
> This opens a window with the generated tree.

Thanks - I didn't know about ASTFrame; I'll give it a go.

Paul

From subhobrotosinha at rediffmail.com  Wed Jul 13 04:51:36 2005
From: subhobrotosinha at rediffmail.com (Subhobroto  Sinha)
Date: Wed Jul 13 04:50:16 2005
Subject: [antlr-interest] Making multiple passes over a tree
Message-ID: <20050713115136.20058.qmail@webmail26.rediffmail.com>

 ?
Hello

I wanted to know how to make multiple passes over the AST, for example, I want to make atleast two passes over the AST :

firstPass : This pass will walk JUST ONLY OVER the variable declaration rules and build up a symbol table
secondPass : This will walk over the assignment statements and detect semantic errors
etc...

Right now, I have each of the passes walking over the full AST again and again, altough each pass has actually a very specific task to do.

So I was thinking if I could somehow make the treeparser such that it will skip over those portions of the AST with which it's not concerned.

For example, in the first pass, I would like to parse JUST THOSE statements which are declaring new variables but not assignent statements...

I HAVE to create the symbol table first because, in my language, the user can reference a variable from a different module (kinda like function) without explicitly declaring it, so I need to write code which will allow the current module to access that external variable.
However, it may also happen that the user has forgotten to declare the variable in any module at all, and hence no storage has been alloc. for that variable, so in that case I need to alert the user of his error (I will also need to tell him where he referenced the undeclared variables).

How do I make this possible in ANTLR - or do I have to keep walking all over the tree at every pass ?

Any suggestions/comments regarding this scenario ?

Regards

Subhobroto Sinha
http://www.geocities.com/subhobrotosinha
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050713/7a5d50d5/attachment-0001.html
From jddahl at micron.com  Wed Jul 13 07:48:31 2005
From: jddahl at micron.com (Jeff Dahl)
Date: Wed Jul 13 07:48:36 2005
Subject: [antlr-interest] Modifying token type within parser
In-Reply-To: <bc607a4e0507130109181cd489@mail.gmail.com>
References: <42D43103.2060909@micron.com>
	<bc607a4e0507130109181cd489@mail.gmail.com>
Message-ID: <42D529BF.10002@micron.com>

Ric Klaren wrote:

>On 7/12/05, Jeff Dahl <jddahl@micron.com> wrote:
>  
>
>>Is it possible to modify the token type within the parser?
>>
>>I tried:
>>
>>    parser_rule:  t:TOKEN {t.setType(OTHER_TOKEN);}
>>
>>but, the actual token passed up is still of type TOKEN.
>>    
>>
>
>If you're trying to build a tree with a different token type just use
>the AST construction syntax to add the appropriate token to the AST
>(might have to turn automatic construction of for the rule).
>  
>
Good point!  Thanks for the help.  Your solution works perfectly.

Jeff
From antlr at shmuelhome.mine.nu  Wed Jul 13 09:26:29 2005
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Wed Jul 13 09:28:16 2005
Subject: [antlr-interest] How to set filename in parser
Message-ID: <42D540B5.6000705@shmuelhome.mine.nu>

My grammar parses the output of a c preprocessor. It interprets the 
#line directives so that syntax errors can be easily tracked back to the 
original file. My lexer sets the filename and linenumber parameters 
appropriately and then treats the directive like a single line comment. 
This works fine for the lexer; when an error occurs, the proper error 
message is printed. But the parser never finds out about this 
resequencing, so syntactical errors at the parser level do not reflect 
the original file information. Short of overriding the various match 
routines, is there any simple way to propagate the #line information 
from the lexer to the parser?


-- 
No virus found in this outgoing message.
Checked by AVG Anti-Virus.
Version: 7.0.323 / Virus Database: 267.8.13/47 - Release Date: 7/12/2005

From tarunkhanna at gmail.com  Wed Jul 13 12:48:34 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Wed Jul 13 12:49:31 2005
Subject: [antlr-interest] parser stuck in some loop in the astFactory.make
	function call
Message-ID: <dbcf4c2c05071312483005380a@mail.gmail.com>

Hi All,

I have a parser that gets stuck in the astFactory.make(ASTArray) function 
call. Any guesses why that would happen.

The ASTArray has 3 elements. Now my understanding is that, the first becomes 
the root and the other become its children.

The make function has a for each loop that loops over all the elements of 
the ASTArray. I can see that the size of ASTArray is 3 so that should not be 
a problem.

Did anyone else ever face such a problem?

Thanks
-- 
Tarun Khanna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050713/18edecfd/attachment.html
From monty at codetransform.com  Wed Jul 13 10:35:22 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Wed Jul 13 13:35:49 2005
Subject: [antlr-interest] parser stuck in some loop in the astFactory.make
	function call
In-Reply-To: <dbcf4c2c05071312483005380a@mail.gmail.com>
References: <dbcf4c2c05071312483005380a@mail.gmail.com>
Message-ID: <42D550DA.3010204@codetransform.com>

Tarun Khanna wrote:
> Hi All,
> 
> I have a parser that gets stuck in the astFactory.make(ASTArray)
> function call. Any guesses why that would happen.
> 
> The ASTArray has 3 elements. Now my understanding is that, the first
> becomes the root and the other become its children.
> 
> The make function has a for each loop that loops over all the elements
> of the ASTArray. I can see that the size of ASTArray is 3 so that should
> not be a problem.
> 
> Did anyone else ever face such a problem?

Make sure you aren't using the same nodes in another tree or twice in
the same tree.  It's easy to create loops.

Monty
From open.zone at virgin.net  Wed Jul 13 15:06:16 2005
From: open.zone at virgin.net (Micheal J)
Date: Wed Jul 13 14:52:07 2005
Subject: [antlr-interest] parser stuck in some loop in the
	astFactory.makefunction call
In-Reply-To: <42D550DA.3010204@codetransform.com>
Message-ID: <000501c587f7$1865e510$6402a8c0@hercules>

> > Did anyone else ever face such a problem?
> 
> Make sure you aren't using the same nodes in another tree or 
> twice in the same tree.  It's easy to create loops.

Yeah. One way this happens if is you use manual tree creation primitives in
a (sub)rule but, forget to turn off automatic creation for that (sub)rule.

Cheers,

Micheal

From nbsherid at secsme.org.au  Wed Jul 13 15:22:23 2005
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Wed Jul 13 15:22:11 2005
Subject: [antlr-interest] 
In-Reply-To: <42D4AF02.90408@raf.hr>
Message-ID: <000901c587f9$57c74210$0500a8c0@nigel>

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Goran
Sent: Wednesday, 13 July 2005 4:05 PM
To: ANTLR Interest
Subject: [antlr-interest] 

 

Hi,

first I must say that I'm beginner in ANTLR (I writte few minor projects so
far, but nothing complicated), so please forgive me on this question but, I
just don't get it.
I have old assembler written manualy, and now I want to transfer it to
ANTLR, so, among other things I have situation like this:

Possible source combination:
    1.    aaa                        ; just mnemonic
    2.    aaa param              ; mnemonic and one param
    3.    aaa param, param   ; mnemonic and two params

when I write down following

statement
    : mnemonic (paramBlock)?
    ;    

paramBlock
    : expression (COMMA expression)?
    ;

parser does recognize options 2 and 3, but when I write

statement
    : mnemonic (paramBlock)*
    ;    

paramBlock
    : expression (COMMA expression)*
    ;

parser passes but on second statement (for example if I have 1 following 2)
he does not recognise aaa as mnemonic but as identifier.
So, I'm comfused with (xxx)? thas this means 0 or 1 (because this is not
functioning that way) or I miss something (what is probably the case :-) )




 

 

What?s the definition of ?mnemonic? and ?expression? rules?

Are mnemonics always keyword literals? There might be some confusion in the
parser between ?aaa? and ?expression?.

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435
  

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050714/897911b3/attachment.html
From jimi at temporal-wave.com  Wed Jul 13 18:46:05 2005
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed Jul 13 18:48:14 2005
Subject: [antlr-interest] generating root nodes in tree parser
Message-ID: <B36CCC332A32904F8FA3DE134A23533608A423@wavemachine.temporal-wave.com>

Ah cowards - as soon as I get past a few lexer errors, I'm sticking it in to production ;-). Hmm, maybe need syntactic predicates first... and a few bug fixes, .. and a bit better tolerance of broken input.. but apart from that, what have the Romans ever done for us?
 
Jim

________________________________

From: antlr-interest-bounces@antlr.org on behalf of Martin Probst
Sent: Tue 7/12/2005 9:50 AM
To: Terence Parr
Cc: ANTLR Interest
Subject: Re: [antlr-interest] generating root nodes in tree parser



> And in ANTLR v3, you can say:
>
> functionCall : ident paramlist -> ^(CALL["function call"] ident 
> paramlist) ;
>
> :)

But that is of course experimental-alpha-non-stable-don't use for
production as of yet *ducks & runs*

Martin



From ric.klaren at gmail.com  Thu Jul 14 00:27:12 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Thu Jul 14 00:27:16 2005
Subject: Fwd: [antlr-interest] How to set filename in parser
In-Reply-To: <bc607a4e05071400267318d285@mail.gmail.com>
References: <42D540B5.6000705@shmuelhome.mine.nu>
	<bc607a4e05071400267318d285@mail.gmail.com>
Message-ID: <bc607a4e0507140027ad194f3@mail.gmail.com>

hmmm more coffee....

---------- Forwarded message ----------
From: Ric Klaren <ric.klaren@gmail.com>
Date: Jul 14, 2005 9:26 AM
Subject: Re: [antlr-interest] How to set filename in parser
To: shmuel siegel <antlr@shmuelhome.mine.nu>


On 7/13/05, shmuel siegel <antlr@shmuelhome.mine.nu> wrote:
> My grammar parses the output of a c preprocessor. It interprets the
> #line directives so that syntax errors can be easily tracked back to the
> original file. My lexer sets the filename and linenumber parameters
> appropriately and then treats the directive like a single line comment.
> This works fine for the lexer; when an error occurs, the proper error
> message is printed. But the parser never finds out about this
> resequencing, so syntactical errors at the parser level do not reflect
> the original file information. Short of overriding the various match
> routines, is there any simple way to propagate the #line information
> from the lexer to the parser?

If I recall right working example code is available in
http://sourceforge.net/projects/antlraux/

If you set the line info correct in the lexer inputstate then tokens
should be created with the right line/column information. I don't
recall of the top of my head if CommonToken had a filename attribute.
You might have to make a custom token class and override makeToken in
the lexer to put the filename in the token as well.

After that you may have to override reportError and friends in the
parser not sure about that though.

Cheers,

Ric
From ric.klaren at gmail.com  Thu Jul 14 01:06:56 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Thu Jul 14 01:06:59 2005
Subject: [antlr-interest] Making multiple passes over a tree
In-Reply-To: <20050713115136.20058.qmail@webmail26.rediffmail.com>
References: <20050713115136.20058.qmail@webmail26.rediffmail.com>
Message-ID: <bc607a4e05071401061e874779@mail.gmail.com>

On 13 Jul 2005 11:51:36 -0000, Subhobroto  Sinha
<subhobrotosinha@rediffmail.com> wrote:
>  firstPass : This pass will walk JUST ONLY OVER the variable declaration
> rules and build up a symbol table
>  secondPass : This will walk over the assignment statements and detect
> semantic errors
>  etc...
>  
>  Right now, I have each of the passes walking over the full AST again and
> again, altough each pass has actually a very specific task to do.
>  
>  So I was thinking if I could somehow make the treeparser such that it will
> skip over those portions of the AST with which it's not concerned.
>  
>  For example, in the first pass, I would like to parse JUST THOSE statements
> which are declaring new variables but not assignent statements...

An antlr treeparser always goes down from the top. So you'd be stuck
with the solution you now have or alternatively you can build parts of
the symbol table during the normal parsing e.g. collect the subtrees
with the variable declarations and run over them separately.

Using the wildcard match symbol '.' you can skip the variable bits
during the normal run of the tree parser.

Cheers,

Ric
From gt54-antlr at cyconix.com  Thu Jul 14 01:26:30 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Thu Jul 14 01:26:38 2005
Subject: Fwd: [antlr-interest] How to set filename in parser
In-Reply-To: <bc607a4e0507140027ad194f3@mail.gmail.com>
References: <42D540B5.6000705@shmuelhome.mine.nu>	<bc607a4e05071400267318d285@mail.gmail.com>
	<bc607a4e0507140027ad194f3@mail.gmail.com>
Message-ID: <42D621B6.4030907@cyconix.com>

Ric Klaren wrote:

> If you set the line info correct in the lexer inputstate then tokens
> should be created with the right line/column information. I don't
> recall of the top of my head if CommonToken had a filename attribute.
> You might have to make a custom token class and override makeToken in
> the lexer to put the filename in the token as well.

CommonToken/Token only have type, line, col, and text fields (for C++, 
anyway). Token.hpp declares:

virtual void setFilename( const std::string& file );
virtual const ANTLR_USE_NAMESPACE(std)string& getFilename() const;

so the OP will need to derive from CommonToken, adding a filename field, 
and defining these routines.

Incidentally, why does 'getFilename' return a string reference? This 
doesn't make sense to me, because:

1) The token is reference-counted, and might be deleted without your 
knowledge, invalidating the string reference

2) The idea was presumably to allow a single common filename to be 
shared among multiple instances of Token, but Token has no way to handle 
destruction of the filename anyway

My solution was to ignore the setFilename/getFilename I/F completely, 
and to use a ptr to the filename in my derived token. Does anything in 
the rest of ANTLR use setFilename/getFilename? If not, wouldn't it 
better to remove the I/F completely?

Paul

From antlr at shmuelhome.mine.nu  Thu Jul 14 01:47:27 2005
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Thu Jul 14 01:48:29 2005
Subject: Fwd: [antlr-interest] How to set filename in parser
In-Reply-To: <bc607a4e0507140027ad194f3@mail.gmail.com>
References: <42D540B5.6000705@shmuelhome.mine.nu>	<bc607a4e05071400267318d285@mail.gmail.com>
	<bc607a4e0507140027ad194f3@mail.gmail.com>
Message-ID: <42D6269F.3030801@shmuelhome.mine.nu>


>On 7/13/05, shmuel siegel <antlr@shmuelhome.mine.nu> wrote:
>  
>
>>My grammar parses the output of a c preprocessor. It interprets the
>>#line directives so that syntax errors can be easily tracked back to the
>>original file. My lexer sets the filename and linenumber parameters
>>appropriately and then treats the directive like a single line comment.
>>This works fine for the lexer; when an error occurs, the proper error
>>message is printed. But the parser never finds out about this
>>resequencing, so syntactical errors at the parser level do not reflect
>>the original file information. Short of overriding the various match
>>routines, is there any simple way to propagate the #line information
>>from the lexer to the parser?
>>    
>>
>
>If I recall right working example code is available in
>http://sourceforge.net/projects/antlraux/
>
>If you set the line info correct in the lexer inputstate then tokens
>should be created with the right line/column information. I don't
>recall of the top of my head if CommonToken had a filename attribute.
>You might have to make a custom token class and override makeToken in
>the lexer to put the filename in the token as well.
>
>After that you may have to override reportError and friends in the
>parser not sure about that though.
>
>Cheers,
>
>Ric
>
>  
>
Unfortunately, at least in my case it is even worse than that. If antlr 
tries to determine the correct path with a switch failure occurs by    
        default:
        {
            throw new NoViableAltException(LT(1), getFilename());
        }
   This means that I have to either manage to set parsers filename, 
(remember the parser never sees the #line directive) or override 
getFilename. The latter sounds easier but then I have to find it. It is 
saved in ParserSharedInputState as a protected member. So given your 
answer, it looks like I will also have to save it locally in the 
generated lexer in a way that the parser can reach it.


-- 
No virus found in this outgoing message.
Checked by AVG Anti-Virus.
Version: 7.0.323 / Virus Database: 267.8.14/48 - Release Date: 7/13/2005

From dragonoe at mcmaster.ca  Thu Jul 14 07:47:09 2005
From: dragonoe at mcmaster.ca (Olivier Dragon)
Date: Thu Jul 14 07:43:22 2005
Subject: [antlr-interest] Fortran grammars
In-Reply-To: <961C2C35-4D15-41BE-868C-89EAC21CE940@cs.usfca.edu>
References: <20050613183425.GA17749@dragon.homelinux.org>
	<961C2C35-4D15-41BE-868C-89EAC21CE940@cs.usfca.edu>
Message-ID: <20050714144709.GA21418@dragon.homelinux.org>

Hi,

So I tried my best to translate the PCCTS grammar to ANTLR. I basically
removed all the action code, sanitized the rulenames, changed the syntax
a little (the {} optional in particular), and wrote a lexer. I removed
all the action code mostly because I didn't know how to translate it to
ANTLR but also because it seemed to me like the grammar should still
work without it.

But now I'm stuck with a broken parsing grammar and no idea where to go
next. The lexer seems to work fine. At least it returns tokens the way I
think it is supposed to.

The parser however is having trouble. With k=2 (k=3 or more doesn't
change anything) I still get quite a few ambiguities. The rule that is
causing me the most problems right now is subprogramBody. I tried
debugging the Parser code (generated) and it looks like it gets stuck on
the first variable declaration (wholeStatement rule) for a few loops and
then exits with an error on the second one (see sample code). I also
tried to debug the grammar with antlreclipse but I couldn't figure out
how it worked :(

Another problematic one is the if-family of rules that are all
alternatives of executableStatement. This means at k=2 there's
ambiguities with "if" '(' expr ')'... It seems to me like this is a big
problem and I'm not sure how the PCCTS grammar managed to work with it.

Finally, I left all the ^ and ! AST directives because I didn't think
they cause trouble for parsing, and didn't want to put them back in if
they proved useful.

I would really appreciate some help with this grammar. I'm attaching the
original PCCTS grammar (f77-pccts), the translated ANTLR grammar
(f77-pccts-antlr.g), my main Java program (Main.java) and my sample
Fortran code file (sspsv.f) which is from LAPACK.

Thank you for your time!

-Olivier


On Mon, Jun 13, 2005 at 11:36:57AM -0700, Terence Parr wrote:
> Hi.  I *know* I have f77.g around...but I think it's PCCTS.  OH, here  
> it is in share area.  Heh, even the antlr.org search found it!  I  
> gotta fix that thing soon to be better...
> 
> http://www.antlr.org/share/1077305245771/fort.g
> 
> Ter

-- 
          __-/|    ? ?     |\-__
     __--/  /  \   (^^)   /  \  \--__
  _-/   /   /  /\ / ( )  /\  \   \   \-_
 /  /   /  /  /  (   ^^ ~  \  \  \   \  \
 / Oli Dragon    ( dragonoe@mcmaster.ca \
/  B.Eng. Sfwr   (     )    \    \  \    \
/  /  /    /__--_ (   ) __--__\    \  \  \
|  /  /  _/        \_ \_       \_  \  \  |
 \/  / _/            \_ \_       \_ \  \/
  \_/ /                -\_\        \ \_/
    \/                    )         \/
                        *~
        ___--<***************>--___
       [http://dragon.homelinux.org]
        ~~~--<***************>--~~~
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050714/a5308c52/attachment.bin
From craig at palantir.co.za  Thu Jul 14 08:07:18 2005
From: craig at palantir.co.za (Craig Main)
Date: Thu Jul 14 08:13:46 2005
Subject: [antlr-interest] Jumping around in (my|a?) tree :-)
Message-ID: <20050714151342.6C830DCD42@www.antlr.org>

Hi,

Given the following declaration for an "if" statement.


statement   

// here is the "other" statements part

            {log.Debug(null); object result = null;}

          : #(ASSIGN id:ID result=expression { log.Info(string.Format("{0} =
{1}", id.getText(), result)); } ) 
          | #(TOK_CONST cid:ID ASSIGN result=term) {log.Info("constant
decl");}

// here is the "if" part.

          | {log.Debug("inside");}
            #(TOK_IF condition (statement)* ({log.Debug("in-else");}
TOK_ELSE (statement)* {log.Debug("out-else");})?)
            {log.Debug("outside");}
          ;

The tree is looking good and all is working nicely - thanks for all the kind
assistance while I tore all my hair out with the tree syntax. The inside,
outside, in-else and out-else logging is working in the correct contexts.

Is there a way of making the tree only match the (statement*) in the
affirmative portion of the tree if the "if" condition is true, and only
match the (statement)* portion in the negative section of the "if" statement
if the condition is false?

Regards
Craig


From jddahl at micron.com  Thu Jul 14 08:55:03 2005
From: jddahl at micron.com (Jeff Dahl)
Date: Thu Jul 14 08:55:08 2005
Subject: [antlr-interest] Tree transformations
Message-ID: <42D68AD7.5030002@micron.com>

When transforming a tree, is it possible to move a subtree to some 
arbitrary node?  For example, given the tree:

    A
    |-- B
    |   |-- C
    |   |   |-- attribute1
    |   |   |   `-- value 1
    |   |   |-- attribute2
    |   |   |   `-- value 2
    |   |   `-- attribute3
    |   |       `-- value 3
    |   `-- D
    |       `-- attribute4
    |           `-- value 4
    |-- E
    |   `-- attribute5
    |       `-- value 5
    `-- F
        `-- attribute6
            `-- value 6

is it possible to move subtree "C" to subtree "E" as illustrated below?

    A
    |-- B
    |   `-- D
    |       `-- attribute4
    |           `-- value 4
    |-- E
    |   |-- C
    |   |   |-- attribute1
    |   |   |   `-- value 1
    |   |   |-- attribute2
    |   |   |   `-- value 2
    |   |   `-- attribute3
    |   |       `-- value 3 
    |   `-- attribute5
    |       `-- value 5
    `-- F
        `-- attribute6
            `-- value 6

Thanks,
Jeff

From tarunkhanna at gmail.com  Thu Jul 14 09:24:58 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Thu Jul 14 09:25:47 2005
Subject: [antlr-interest] Tree transformations
In-Reply-To: <42D68AD7.5030002@micron.com>
References: <42D68AD7.5030002@micron.com>
Message-ID: <dbcf4c2c05071409241cc93935@mail.gmail.com>

I guess yes. You can do something like 

E.addChild(B.getFirstChild());
and then set the child of B to NULL
B.setFirstChild(null) or B.setFirstChild(B.getFirstChild
().getNextSibling());

All you ANTLR experts, please let me know if the above procedure is correct. 
I would appreciate if you can point out the flaw as I spent a couple of days 
in trying to understand the AST stuff in ANTLR and if the above is flawed 
then I need to spend some more time.

Tarun

On 7/14/05, Jeff Dahl <jddahl@micron.com> wrote:
> 
> When transforming a tree, is it possible to move a subtree to some
> arbitrary node? For example, given the tree:
> 
> A
> |-- B
> | |-- C
> | | |-- attribute1
> | | | `-- value 1
> | | |-- attribute2
> | | | `-- value 2
> | | `-- attribute3
> | | `-- value 3
> | `-- D
> | `-- attribute4
> | `-- value 4
> |-- E
> | `-- attribute5
> | `-- value 5
> `-- F
> `-- attribute6
> `-- value 6
> 
> is it possible to move subtree "C" to subtree "E" as illustrated below?
> 
> A
> |-- B
> | `-- D
> | `-- attribute4
> | `-- value 4
> |-- E
> | |-- C
> | | |-- attribute1
> | | | `-- value 1
> | | |-- attribute2
> | | | `-- value 2
> | | `-- attribute3
> | | `-- value 3
> | `-- attribute5
> | `-- value 5
> `-- F
> `-- attribute6
> `-- value 6
> 
> Thanks,
> Jeff
> 
> 


-- 
Tarun Khanna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050714/b7878aed/attachment.html
From tarunkhanna at gmail.com  Thu Jul 14 09:29:22 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Thu Jul 14 09:30:07 2005
Subject: [antlr-interest] parser stuck in some loop in the
	astFactory.makefunction call
In-Reply-To: <001d01c5888c$1092eaf0$6402a8c0@hercules>
References: <dbcf4c2c050714065333348925@mail.gmail.com>
	<001d01c5888c$1092eaf0$6402a8c0@hercules>
Message-ID: <dbcf4c2c050714092912eec249@mail.gmail.com>

And this is how the smart minds on the antlr discussion group once again 
successfully solved a mystery and saved the day................

In short THANKS again... It worked. 

However I am glad I didn' know about the loop due to auto creation. I spent 
a lot of time reading both the auto generated source for my parser and the 
source for AST stuff. I definitely understand AST lot better than I did two 
days back.

Tarun
On 7/14/05, Micheal J <open.zone@virgin.net> wrote:
> 
> > How do you turn the automatic creation on and off?
> 
> http://www.antlr.org/doc/trees.html#_bb7
> 
> Cheers,
> 
> Micheal
> 
> 


-- 
Tarun Khanna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050714/db7aaa65/attachment.html
From ewbank at gmail.com  Thu Jul 14 09:37:37 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Thu Jul 14 09:38:12 2005
Subject: [antlr-interest] Tree transformations
In-Reply-To: <dbcf4c2c05071409241cc93935@mail.gmail.com>
References: <42D68AD7.5030002@micron.com>
	<dbcf4c2c05071409241cc93935@mail.gmail.com>
Message-ID: <dd3a065f05071409375f691cdd@mail.gmail.com>

You can do it with code, but it's perhaps better to use the ANTLR constructs:

  refactor { RefAST ctree; }
  : #( A ctree=brule erule[ctree] F ) ;

  brule returning [ RefAST ctree ]
  : #( b:B c:C d:D ) { ## = #( b d ); ctree = #c; } ;

  crule : C ;

  erule [ RefAST ctree ]
  : #( e:E children ) { ## = #( e, ctree, #children ); } ;

This is not quite right - no access to compiler at the moment - but
it's close.  Beware of dangling links in the intermediate tree (ctree)
that is passed around; the factory has a "dupTree" method that might
come in handy.

Sorry for being sketchy...
- Bryan


On 7/14/05, Tarun Khanna <tarunkhanna@gmail.com> wrote:
> I guess yes. You can do something like 
>  
>  E.addChild(B.getFirstChild());
>  and then set the child of B to NULL
>  B.setFirstChild(null) or
> B.setFirstChild(B.getFirstChild().getNextSibling());
>  
>  All you ANTLR experts, please let me know if the above procedure is
> correct. I would appreciate if you can point out the flaw as I spent a
> couple of days in trying to understand the AST stuff in ANTLR and if the
> above is flawed then I need to spend some more time.
>  
>  Tarun
> 
> 
> On 7/14/05, Jeff Dahl <jddahl@micron.com> wrote:
> > When transforming a tree, is it possible to move a subtree to some
> > arbitrary node?  For example, given the tree:
> > 
> >     A
> >     |-- B
> >     |   |-- C
> >     |   |   |-- attribute1
> >     |   |   |   `-- value 1
> >     |   |   |-- attribute2
> >     |   |   |   `-- value 2
> >     |   |   `-- attribute3
> >     |   |       `-- value 3
> >     |   `-- D
> >     |       `-- attribute4
> >     |           `-- value 4
> >     |-- E
> >     |   `-- attribute5 
> >     |       `-- value 5
> >     `-- F
> >         `-- attribute6
> >             `-- value 6
> > 
> > is it possible to move subtree "C" to subtree "E" as illustrated below?
> > 
> >     A
> >     |-- B
> >     |   `-- D
> >     |       `-- attribute4
> >     |           `-- value 4
> >     |-- E
> >     |   |-- C
> >     |   |   |-- attribute1
> >     |   |   |   `-- value 1
> >     |   |   |-- attribute2
> >     |   |   |   `-- value 2 
> >     |   |   `-- attribute3
> >     |   |       `-- value 3
> >     |   `-- attribute5
> >     |       `-- value 5
> >     `-- F
> >         `-- attribute6
> >             `-- value 6
> > 
> > Thanks,
> > Jeff
> > 
> > 
>  
> 
> 
> -- 
> Tarun Khanna
From ewbank at gmail.com  Thu Jul 14 09:48:31 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Thu Jul 14 09:49:15 2005
Subject: [antlr-interest] Jumping around in (my|a?) tree :-)
In-Reply-To: <20050714151342.6C830DCD42@www.antlr.org>
References: <20050714151342.6C830DCD42@www.antlr.org>
Message-ID: <dd3a065f05071409486065c4f9@mail.gmail.com>

It's difficult with your current tree-shape.  I'd add another level and replace
   #( TOK_IF expr ( statement )* ( TOK_ELSE ( statement )* )? )
With this:
   #( TOK_IF expr #(BLOCK (statement)* ) ( #(BLOCK (statement)* ) ) )? )

The problem is that it's strange/hard to eat until just before
TOK_ELSE; therefore, make the tree regular...

If you assume #( TOK_IF expr block block ), then this works to drill
into the right component of the if-statement:

   #( TOK_IF expr
      ( {expr_true}? block | . )
      ( {expr_true}? . | block )?
   )

The syntactic predicates "{expr_true}?" is used to control which leg
is evaluated (via "block" subrule) versus ignored (via "." wildcard).

There are other ways to write the rule, but the key is using "." to
bypass the code that you don't want to evaluate.

On 7/14/05, Craig Main <craig@palantir.co.za> wrote:
> Is there a way of making the tree only match the (statement*) in the
> affirmative portion of the tree if the "if" condition is true, and only
> match the (statement)* portion in the negative section of the "if" statement
> if the condition is false?
From ewbank at gmail.com  Thu Jul 14 10:04:07 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Thu Jul 14 10:04:54 2005
Subject: [antlr-interest] generating root nodes in tree parser
In-Reply-To: <B36CCC332A32904F8FA3DE134A23533608A423@wavemachine.temporal-wave.com>
References: <B36CCC332A32904F8FA3DE134A23533608A423@wavemachine.temporal-wave.com>
Message-ID: <dd3a065f0507141004633e767a@mail.gmail.com>

Not a coward; pragmatic:

   if i_want_my_job then antlr-v2
   else antlr-v3

however, it looks great!

;-)

On 7/13/05, Jim Idle <jimi@temporal-wave.com> wrote:
> Ah cowards - as soon as I get past a few lexer errors, I'm sticking it in to production ;-). Hmm, maybe need syntactic predicates first... and a few bug fixes, .. and a bit better tolerance of broken input.. but apart from that, what have the Romans ever done for us?
From ewbank at gmail.com  Thu Jul 14 10:44:48 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Thu Jul 14 10:45:38 2005
Subject: [antlr-interest] Making multiple passes over a tree
In-Reply-To: <bc607a4e05071401061e874779@mail.gmail.com>
References: <20050713115136.20058.qmail@webmail26.rediffmail.com>
	<bc607a4e05071401061e874779@mail.gmail.com>
Message-ID: <dd3a065f0507141044169d5f0a@mail.gmail.com>

For example, assuming DECL and ASSIGN tokens for the two statements,
the tree walkers for the first and second pass would be:

    // pass one - build the symbol table
    program_pass1: ( stmt )* ;
    stmt: decl | ASSIGN;
    decl : #( DECL ... ) { take-declaration-action; };

    // pass two - do the assignment operations
    program_pass2: ( stmt )* ;
    stmt: DECL | assign;
    assign : #(ASSIGN ... ) { take-assign-action; };

Note that the ASSIGN node is bypassed in the first pass, and the DECL
node is bypassed in the second pass.

On 7/14/05, Ric Klaren <ric.klaren@gmail.com> wrote:
> On 13 Jul 2005 11:51:36 -0000, Subhobroto  Sinha
> <subhobrotosinha@rediffmail.com> wrote:
> >  firstPass : This pass will walk JUST ONLY OVER the variable declaration
> > rules and build up a symbol table
> >  secondPass : This will walk over the assignment statements and detect
> > semantic errors
> >  etc...
> >
> >  Right now, I have each of the passes walking over the full AST again and
> > again, altough each pass has actually a very specific task to do.
> >
> >  So I was thinking if I could somehow make the treeparser such that it will
> > skip over those portions of the AST with which it's not concerned.
> >
> >  For example, in the first pass, I would like to parse JUST THOSE statements
> > which are declaring new variables but not assignent statements...
> 
> An antlr treeparser always goes down from the top. So you'd be stuck
> with the solution you now have or alternatively you can build parts of
> the symbol table during the normal parsing e.g. collect the subtrees
> with the variable declarations and run over them separately.
> 
> Using the wildcard match symbol '.' you can skip the variable bits
> during the normal run of the tree parser.
> 
> Cheers,
> 
> Ric
>
From micah.schehl at omnicare.com  Thu Jul 14 18:46:53 2005
From: micah.schehl at omnicare.com (Micah Schehl)
Date: Thu Jul 14 18:47:01 2005
Subject: [antlr-interest] Inserting an imaginary token into AST Tree
Message-ID: <42D7158D.9030607@omnicare.com>


I am working on a pretty printer for MS SQL Select Statements, and have 
started from Tomasz Jastrzebski's grammar.

I am adding the tree parsing info to the grammar and can't figure out 
how to insert an imaginary token. 

Given a sql fragment:
       select realname as aliasname,  realname2 aliasname2

I would like to generate the tree:
       SELECT
            AS
                 realname
                 aliasname
            INFERASSIGN
                 realname2
                 aliasname2

The trouble I am having is getting that INFERASSIGN into the tree.  Can 
this be done?

Here is grammar fragments that didn't work:
      class SqlParser extends Parser;
      ...
      someRule
          :  (dbObject (AS^ indentifierLiteral)? COMMA) => column (AS^ 
indentifierLiteral)?
          | (dbObject (indentifierLiteral)? COMMA) => column 
(INFERASSIGN^ indentifierLiteral)?
          ;
      ...

      class SqlLexer extends Lexer;
      ...
      tokens {
          INFERASSIGN;
      }
      ...

From parrt at cs.usfca.edu  Thu Jul 14 19:19:48 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Jul 14 19:19:03 2005
Subject: [antlr-interest] stringtemplate-2.2b5 release
Message-ID: <1E7B9D8C-B7A0-4F52-BBB6-FC2FED371FC0@cs.usfca.edu>

Howdy,

Fixed a bug and cleaned up some issues with the new features.   
[a,b,c] is now the "create list of attributes" operator versus +,  
which goes back to cat'ing strings.

http://www.stringtemplate.org/doc/release-2.2.tml
http://www.antlr.org/download/stringtemplate-2.2b5.tar.gz

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From craig at palantir.co.za  Thu Jul 14 23:49:31 2005
From: craig at palantir.co.za (Craig Main)
Date: Thu Jul 14 23:55:59 2005
Subject: [antlr-interest] Jumping around in (my|a?) tree :-)
In-Reply-To: <dd3a065f05071409486065c4f9@mail.gmail.com>
Message-ID: <20050715065555.18AAFDC75D@www.antlr.org>

Hi,

Thanks for the reply.
What is the best way to get the BLOCK tokens into the tree at this point?
I don't currently have BLOCK statement, and I do find these insertions
tricky.

Regards
Craig

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Bryan Ewbank
Sent: 14 July 2005 06:49 PM
To: ANTLR Interest
Subject: Re: [antlr-interest] Jumping around in (my|a?) tree :-)

It's difficult with your current tree-shape.  I'd add another level and
replace
   #( TOK_IF expr ( statement )* ( TOK_ELSE ( statement )* )? )
With this:
   #( TOK_IF expr #(BLOCK (statement)* ) ( #(BLOCK (statement)* ) ) )? )

The problem is that it's strange/hard to eat until just before
TOK_ELSE; therefore, make the tree regular...

If you assume #( TOK_IF expr block block ), then this works to drill
into the right component of the if-statement:

   #( TOK_IF expr
      ( {expr_true}? block | . )
      ( {expr_true}? . | block )?
   )

The syntactic predicates "{expr_true}?" is used to control which leg
is evaluated (via "block" subrule) versus ignored (via "." wildcard).

There are other ways to write the rule, but the key is using "." to
bypass the code that you don't want to evaluate.

On 7/14/05, Craig Main <craig@palantir.co.za> wrote:
> Is there a way of making the tree only match the (statement*) in the
> affirmative portion of the tree if the "if" condition is true, and only
> match the (statement)* portion in the negative section of the "if"
statement
> if the condition is false?


From wiggjd at lsbu.ac.uk  Fri Jul 15 05:14:05 2005
From: wiggjd at lsbu.ac.uk (David Wigg)
Date: Fri Jul 15 05:10:37 2005
Subject: [antlr-interest] Re: How to set filename in parser
Message-ID: <42D7A88D.5040004@lsbu.ac.uk>

Original message.

Message: 2
Date: Wed, 13 Jul 2005 19:26:29 +0300
From: shmuel siegel <antlr@shmuelhome.mine.nu>
Subject: [antlr-interest] How to set filename in parser
To: 'ANTLR Interest' <antlr-interest@antlr.org>
Message-ID: <42D540B5.6000705@shmuelhome.mine.nu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

My grammar parses the output of a c preprocessor. It interprets 
the #line directives so that syntax errors can be easily tracked 
back to the original file. My lexer sets the filename and 
linenumber parameters appropriately and then treats the 
directive like a single line comment.

This works fine for the lexer; when an error occurs, the proper 
error message is printed. But the parser never finds out about 
this resequencing, so syntactical errors at the parser level do 
not reflect the original file information. Short of overriding 
the various match routines, is there any simple way to propagate 
the #line information from the lexer to the parser?

Reply.

I agree this is a real problem.

At one time I was hoping to be able to pretty print the 
preprocessed input file as well but it turned out to be so 
difficult that I gave up (it would only have been a by-product 
of what we wanted to do).

However, we do need to know when the file of the source code we 
are interested in is being read so when we parse the line 
directives we call a module to extract the data from the line 
and to store it in main.cpp at the highest level where it is 
available for other modules to see when the User file of 
interest is being read.

This is too complex to describe in full here but to give you a 
starting point here is a copy of the relevant productions from 
the lexer,

PREPROC_DIRECTIVE
     options{paraphrase = "a line directive";}
     :    '#' LineDirective
         {_ttype = ANTLR_USE_NAMESPACE(antlr)Token::SKIP; 
newline();}
     ;

protected
LineDirective
     :
         ("line")?  // this would be for if the directive 
started "#line"
         (Space)+
         n:Decimal
         (Space)+
         (sl:StringLiteral)
         ((Space)+ Decimal)*	// To support cpp flags (GNU)
         {
         process_line_directive((sl->getText()).data(), 
(n->getText()).data());  // see main()
         }
         EndOfLine
     ;

Further information can be obtained from our C/C++ parser on the 
  Antlr website.

We were originally interested in including comments in the 
pretty print but since they could turn up inside statements more 
or less at random this was an even greater problem than line 
directives.

I'm wondering now, if we are only interested in line directives, 
whether we could pass them to the parser as a token or tokens. 
Since they cannot split statements perhaps they could be treated 
as just another statement and processed appropriately?

Any comments?

David Wigg

From antlr at shmuelhome.mine.nu  Fri Jul 15 05:27:25 2005
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Fri Jul 15 05:27:36 2005
Subject: [antlr-interest] Re: How to set filename in parser
In-Reply-To: <42D7A88D.5040004@lsbu.ac.uk>
References: <42D7A88D.5040004@lsbu.ac.uk>
Message-ID: <42D7ABAD.9080509@shmuelhome.mine.nu>


> I'm wondering now, if we are only interested in line directives, whether 
> we could pass them to the parser as a token or tokens. Since they cannot 
> split statements perhaps they could be treated as just another statement 
> and processed appropriately?
> 
> Any comments?
> 
> David Wigg
> 
Why can't #line directives split statements? Why couldn't the source be
x= 3+
#include "commonExpression.h"
+4;

Anyway, what I ended up doing was
1) introduce a local variable in the lexer for saving the filename. (the 
one from inputState is inaccessable to the parser.)
2) save a reference to the lexer in the parser
3) overiding the parser's getFilename method to reference the saved 
filename.


-- 
No virus found in this outgoing message.
Checked by AVG Anti-Virus.
Version: 7.0.323 / Virus Database: 267.8.15/49 - Release Date: 7/14/2005



-- 
No virus found in this outgoing message.
Checked by AVG Anti-Virus.
Version: 7.0.323 / Virus Database: 267.8.15/49 - Release Date: 7/14/2005

From craig at palantir.co.za  Fri Jul 15 05:38:50 2005
From: craig at palantir.co.za (Craig Main)
Date: Fri Jul 15 05:45:17 2005
Subject: [antlr-interest] Changing Root Nodes in an AST,
Message-ID: <20050715124514.BD1CFDC75C@www.antlr.org>

Hi all,

 

What do I change in my parser to alter

 

THIS:

 

   #( TOK_IF expr ( statement )* ( TOK_ELSE ( statement )* )? ) With this:

 

TO THIS:

 

   #( TOK_IF expr #(BLOCK (statement)* ) ( #(BLOCK (statement)* ) ) )? )

 

 

GIVEN:

 

ifStatement               {log.Debug(null);}

                        : TOK_IF^ LPAREN! conditional RPAREN!
statementSequence

                          (

                             options {

                                 warnWhenFollowAmbig = false;

                             }

                          : TOK_ELSE statementSequence

                          )?

                        ;

 

statementSequence        {log.Debug(null);}

                        : statementBlock

                        | statement

                        ;

 

statementBlock            {log.Debug(null);}

                        : LCURL! (statement (SEMI! statement)*)? RCURL!

                        ;

 

statement                 {log.Debug(null);}

                        : assignmentStatement

                        | constantStatement

                        | ifStatement

                        ;

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050715/b2f8d4b5/attachment.html
From tarunkhanna at gmail.com  Fri Jul 15 06:55:50 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Fri Jul 15 06:55:53 2005
Subject: [antlr-interest] Inserting an imaginary token into AST Tree
In-Reply-To: <42D7158D.9030607@omnicare.com>
References: <42D7158D.9030607@omnicare.com>
Message-ID: <dbcf4c2c050715065537554b76@mail.gmail.com>

> 
> 
> I am working on a pretty printer for MS SQL Select Statements, and have
> started from Tomasz Jastrzebski's grammar.
> 
> I am adding the tree parsing info to the grammar and can't figure out
> how to insert an imaginary token.
> 
> Given a sql fragment:
> select realname as aliasname, realname2 aliasname2
> 
> I would like to generate the tree:
> SELECT
> AS
> realname
> aliasname
> INFERASSIGN
> realname2
> aliasname2
> 
> The trouble I am having is getting that INFERASSIGN into the tree. Can
> this be done?
> 
> Here is grammar fragments that didn't work:
> class SqlParser extends Parser;
> ...
> someRule
> : (dbObject (AS^ indentifierLiteral)? COMMA) => column (AS^
> indentifierLiteral)?




| (dbObject (indentifierLiteral)? COMMA) => column
> (INFERASSIGN^ indentifierLiteral)?
> ;
> ...



Here is what you need to do

Add an action
{ ## = #([INFERASSIGN, "Implicit Alias"], #column, #identifierLiteral);}

However you'll need to add some if then else clause so because you won't 
need this tree in case an ALIAS is not used

Actually reading the following link would help
file:///home/tkhanna/documents/projects/learn/antlr/antlr-2.7.5/doc/trees.html


-- 
Tarun Khanna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050715/9f038a77/attachment-0001.html
From tarunkhanna at gmail.com  Fri Jul 15 09:07:45 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Fri Jul 15 09:07:49 2005
Subject: [antlr-interest] Inserting an imaginary token into AST Tree
In-Reply-To: <E450DE198EF99C4AAFD536BBB7096D2E0E954BB5@hqmail2>
References: <E450DE198EF99C4AAFD536BBB7096D2E0E954BB5@hqmail2>
Message-ID: <dbcf4c2c05071509075605ae9e@mail.gmail.com>

hell yes...
http://www.antlr.org/doc/trees.html#_bb1

On 7/15/05, Schehl, Micah <Micah.Schehl@omnicare.com> wrote:
> 
> Tarun, 
>  Thank you, I will look into that. The link you posted was 
> file:///home/tkhanna/documents/projects/learn/antlr/antlr-2.7.5/doc/trees.html. 
> I am guessing you meant to send a different one.
>  Thanks,
> Micah
> 
> -----Original Message-----
> *From:* Tarun Khanna [mailto:tarunkhanna@gmail.com]
> *Sent:* Friday, July 15, 2005 9:56 AM
> *To:* Micah Schehl
> *Cc:* antlr-interest@antlr.org
> *Subject:* Re: [antlr-interest] Inserting an imaginary token into AST Tree
> 
>  
> > I am working on a pretty printer for MS SQL Select Statements, and have
> > started from Tomasz Jastrzebski's grammar. 
> > 
> > I am adding the tree parsing info to the grammar and can't figure out
> > how to insert an imaginary token.
> > 
> > Given a sql fragment:
> > select realname as aliasname, realname2 aliasname2
> > 
> > I would like to generate the tree: 
> > SELECT
> > AS
> > realname
> > aliasname
> > INFERASSIGN
> > realname2
> > aliasname2
> > 
> > The trouble I am having is getting that INFERASSIGN into the tree. Can 
> > this be done?
> > 
> > Here is grammar fragments that didn't work:
> > class SqlParser extends Parser;
> > ...
> > someRule
> > : (dbObject (AS^ indentifierLiteral)? COMMA) => column (AS^
> > indentifierLiteral)?
> 
> 
> 
> 
>  | (dbObject (indentifierLiteral)? COMMA) => column
> > (INFERASSIGN^ indentifierLiteral)? 
> > ;
> > ...
> 
> 
> 
> Here is what you need to do
> 
> Add an action
> { ## = #([INFERASSIGN, "Implicit Alias"], #column, #identifierLiteral);}
> 
> However you'll need to add some if then else clause so because you won't 
> need this tree in case an ALIAS is not used
> 
> Actually reading the following link would help
> 
> file:///home/tkhanna/documents/projects/learn/antlr/antlr-2.7.5/doc/trees.html
> 
> 
> -- 
> Tarun Khanna 
> 
> 


-- 
Tarun Khanna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050715/8b36e13a/attachment.html
From ric.klaren at gmail.com  Fri Jul 15 10:21:05 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Fri Jul 15 10:19:44 2005
Subject: Fwd: [antlr-interest] How to set filename in parser
In-Reply-To: <42D621B6.4030907@cyconix.com>
References: <42D540B5.6000705@shmuelhome.mine.nu>	<bc607a4e05071400267318d285@mail.gmail.com>	<bc607a4e0507140027ad194f3@mail.gmail.com>
	<42D621B6.4030907@cyconix.com>
Message-ID: <42D7F081.9030201@gmail.com>

Paul Johnson wrote:
>> If you set the line info correct in the lexer inputstate then tokens
>> should be created with the right line/column information. I don't
>> recall of the top of my head if CommonToken had a filename attribute.
>> You might have to make a custom token class and override makeToken in
>> the lexer to put the filename in the token as well.
> 
> CommonToken/Token only have type, line, col, and text fields (for C++, 
> anyway). Token.hpp declares:
> 
> virtual void setFilename( const std::string& file );
> virtual const ANTLR_USE_NAMESPACE(std)string& getFilename() const;
> 
> so the OP will need to derive from CommonToken, adding a filename field, 
> and defining these routines.
> 
> Incidentally, why does 'getFilename' return a string reference? This 
> doesn't make sense to me, because:
> 
> 1) The token is reference-counted, and might be deleted without your 
> knowledge, invalidating the string reference
> 
> 2) The idea was presumably to allow a single common filename to be 
> shared among multiple instances of Token, but Token has no way to handle 
> destruction of the filename anyway

If you store a reference to the string it won't get destroyed. You can 
implement a static hashtable in the token class and only return 
references without trouble AFAIK. I use the setup in a few projects.

> My solution was to ignore the setFilename/getFilename I/F completely, 
> and to use a ptr to the filename in my derived token. Does anything in 
> the rest of ANTLR use setFilename/getFilename? If not, wouldn't it 
> better to remove the I/F completely?

Not 100% sure if it is only there to provide a hook. Would have to check.

Cheers,

Ric
From ric.klaren at gmail.com  Fri Jul 15 10:47:38 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Fri Jul 15 10:46:10 2005
Subject: Fwd: [antlr-interest] How to set filename in parser
In-Reply-To: <42D6269F.3030801@shmuelhome.mine.nu>
References: <42D540B5.6000705@shmuelhome.mine.nu>	<bc607a4e05071400267318d285@mail.gmail.com>	<bc607a4e0507140027ad194f3@mail.gmail.com>
	<42D6269F.3030801@shmuelhome.mine.nu>
Message-ID: <42D7F6BA.7050207@gmail.com>

shmuel siegel wrote:
RK>> If you set the line info correct in the lexer inputstate then tokens
RK>> should be created with the right line/column information. I don't
RK>> recall of the top of my head if CommonToken had a filename attribute.
RK>> You might have to make a custom token class and override makeToken in
RK>> the lexer to put the filename in the token as well.
RK>>
RK>> After that you may have to override reportError and friends in the
RK>> parser not sure about that though.

> Unfortunately, at least in my case it is even worse than that. If antlr 
> tries to determine the correct path with a switch failure occurs by    
>        default:
>        {
>            throw new NoViableAltException(LT(1), getFilename());
>        }
> This means that I have to either manage to set parsers filename, 
> (remember the parser never sees the #line directive) or override 
> getFilename. The latter sounds easier but then I have to find it. It is 
> saved in ParserSharedInputState as a protected member. So given your 
> answer, it looks like I will also have to save it locally in the 
> generated lexer in a way that the parser can reach it.

Hmmm that's indeed ugly. Does it work to override reportError in the 
parser and only look at the token which should have the right 
file/line/column information? Hmmm nope it won't... I'll look into it 
and look at fixing things, it will probably mean breaking backwards 
compatibility this can't be fixed without some seriuos overhauling.

I am thinking along the lines of stripping getFilename out of the parser 
and make the parser only look at the tokens for position information. 
This will mean that I have to tinker with the exception hierarchy and 
errorreporting as well.

BTW in 2.7.5 the ParserSharedInputstate has a public attribute for the 
filename. Not that it helps since there's no sure way to modify it 
consistent with the input. You can override LT to patch up the filename 
form the value stored in the token but around lookahead calculations the 
filename may be off a number of tokens thus resulting in bad reporting.

Cheers,

Ric

From ric.klaren at gmail.com  Fri Jul 15 10:51:10 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Fri Jul 15 10:49:41 2005
Subject: [antlr-interest] Re: How to set filename in parser
In-Reply-To: <42D7ABAD.9080509@shmuelhome.mine.nu>
References: <42D7A88D.5040004@lsbu.ac.uk> <42D7ABAD.9080509@shmuelhome.mine.nu>
Message-ID: <42D7F78E.1040303@gmail.com>

shmuel siegel wrote:
> Anyway, what I ended up doing was
> 1) introduce a local variable in the lexer for saving the filename. (the 
> one from inputState is inaccessable to the parser.)
> 2) save a reference to the lexer in the parser
> 3) overiding the parser's getFilename method to reference the saved 
> filename.

If your parser uses syntactic predicates then the lexer may be well 
ahead of your parser in the input. Unless you override the mark/rewind 
mechanism used during guessing then you can't be sure that you will get 
the right filename.

Cheers,

Ric
From afilion at copernic.com  Wed Jul 13 12:39:36 2005
From: afilion at copernic.com (Alain Filion)
Date: Fri Jul 15 14:42:14 2005
Subject: Fwd: [antlr-interest] ANTLR, C++ and UNICODE
Message-ID: <3B186BEA677EFF48B6AAA0244A1A524F016FEAAE@svr-exchange.atc.copernic.com>

It seems that the null character (\u0000) causes an error due to an
ambiguous call to overloaded function match

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050713/a60ca605/attachment.html
From afilion at copernic.com  Wed Jul 13 14:02:49 2005
From: afilion at copernic.com (Alain Filion)
Date: Fri Jul 15 14:42:15 2005
Subject: Fwd: [antlr-interest] ANTLR, C++ and UNICODE
Message-ID: <3B186BEA677EFF48B6AAA0244A1A524F016FEACB@svr-exchange.atc.copernic.com>

I have tried your Unicode solution for C++ and I find it weird that you
don't use wistream as an input to your UnicodeCharBuffer. If you use
basic char, how can you support Unicode character which are defined by
wchar_t ?

 

Usually, Unicode strings are defined in wstring. How can I use those
with ANTLR ?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050713/39210119/attachment.html
From alex_apac at yahoo.fr  Thu Jul 14 16:40:01 2005
From: alex_apac at yahoo.fr (Alex)
Date: Fri Jul 15 14:42:25 2005
Subject: [antlr-interest] substitution for a node during parsing
Message-ID: <20050714234001.48341.qmail@web26906.mail.ukl.yahoo.com>

Hello, 
I'm sure I'm missing something that I didn't get while reading the doc.
If someone can give me hint on what I do wrong.

I wanted to substitute the SLASH node for a custom one. (SLASH:'/';)

excerpt from the text I scan text:
area-specifier / service-provider / future-extension 


the rule with a standard AST for SLASH:
alternation    : concatenation ( SLASH^ concatenation )* ;

and the result tree:

"/" 
 |-> "/"
 |   |-> area-specifier
 |   |-> service-provider
 |-> future-extension

now when I try to have a "custom" node instead of SLASH I wanted the type ALTERNATION
I have a slightly different output I hacked something after glancing at the generated code.

alternation    :       concatenation ( !a:SLASH  b:concatenation {
                #a=#([ALTERNATION,"ALT|"],#b);
                astFactory.makeASTRoot(currentAST, #a);
} )*
                    ;

And the swapped result tree:

"ALT/" 
 |-> future-extension
 |-> "ALT/"
     |-> service-provider
     |-> area-specifier

Thanks
/Alex




	

	
		
___________________________________________________________________________ 
Appel audio GRATUIT partout dans le monde avec le nouveau Yahoo! Messenger 
T?l?chargez cette version sur http://fr.messenger.yahoo.com
From AngeAlbertini at free.fr  Wed Jul  6 05:41:25 2005
From: AngeAlbertini at free.fr (Ange Albertini)
Date: Fri Jul 15 14:42:33 2005
Subject: [antlr-interest] can't 'make' (2.7.5) & can't link (2.7.1)
Message-ID: <1684927008.20050706144125@free.fr>

Hello,

I've tried 2 versions of ANTLR just in case.

the 2.7.5 "configure" script just works fine (i decompress antlr-2.7.5
zip in a new dir, under MSYS)

> $ make
> d:\dev\compile\mingw\bin\make.exe: *** No rule to make target `/home/Michiyo/antlr-2.7.5/scripts/../antlr/Makefile.in', needed by `Makefile'.  Stop.
I tried modifiying the paths just in case the ".." is making a
problem. still a similar problem

> $ make
> d:\dev\compile\mingw\bin\make.exe: *** No rule to make target `/home/Michiyo/antlr-2.7.5/./Makefile.in', needed by `Makefile'.  Stop.

before, with 2.7.1 :
 I've  been trying to link my own ANTLR-based project, then any of the
 Cpp examples shipped with the 2.7.1 zip.

 Compiling  filter  under Msys (gcc 3.4.2) . I compiled my own library
 using MSYS, configure, make. I get such results (

> T.o(.text+0x160):T.cpp: undefined reference to `antlr::CharBuffer::CharBuffer(std::istream&)'
> T.o(.text+0x1ac):T.cpp: undefined reference to `antlr::CharScanner::CharScanner(antlr::InputBuffer*, bool)'
> ...
> 
> command line, with manual compilation :
> g++ -o test.exe Test.o T.o -lantlr -LD:\Dev\Tools\antlr\275\lib -LD:\Dev\Compile\Mingw\lib
> 
> D:\Dev\Tools\antlr\275\lib/libantlr.a(MismatchedCharException.o)(.text+0xe7d):MismatchedCharException.cpp: undefined reference to `std::__default_alloc_template<true, 0>::allocate(unsigned int)'
> D:\Dev\Tools\antlr\275\lib/libantlr.a(MismatchedCharException.o)(.text+0xf97):MismatchedCharException.cpp: undefined reference to `std::__default_alloc_template<true, 0>::deallocate(void*, unsigned int)'
> ....

In all cases, I'm stuck.
I'll really appreciate hints or help.

Best regards, Ange

From Yogesh.ThimmaShetty at infineon.com  Mon Jul 11 20:53:36 2005
From: Yogesh.ThimmaShetty at infineon.com (Yogesh.ThimmaShetty@infineon.com)
Date: Fri Jul 15 14:42:57 2005
Subject: [antlr-interest] ANTLR lecture and dinner in Mumbai and Bangalore
	India
Message-ID: <04EE7AD0450F7B498BA216312943A1A1028AEC9D@blrse201.ap.infineon.com>

Hello Everybody,

I just came to know about the antlr lecture which is going to be
conducted in bangalore.
I want to know about the price and the procedure to get registered to
attend this lecture .

If anybody knows about it, feel free to pass the information.

Rgds,
Yogesh...
From dragonoe at mcmaster.ca  Thu Jul 14 08:04:04 2005
From: dragonoe at mcmaster.ca (Olivier Dragon)
Date: Fri Jul 15 14:42:58 2005
Subject: [antlr-interest] Fortran grammars
In-Reply-To: <20050714144709.GA21418@dragon.homelinux.org>
References: <20050613183425.GA17749@dragon.homelinux.org>
	<961C2C35-4D15-41BE-868C-89EAC21CE940@cs.usfca.edu>
	<20050714144709.GA21418@dragon.homelinux.org>
Message-ID: <20050714150404.GA21498@dragon.homelinux.org>

Skipped content of type multipart/mixed-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050714/f9566a26/attachment-0001.bin
From PGremo at thoughtworks.com  Tue Jul 12 07:07:14 2005
From: PGremo at thoughtworks.com (Patrick M Gremo)
Date: Fri Jul 15 14:43:16 2005
Subject: [antlr-interest] Mixed-case vs Upper-case
Message-ID: <OF36D4EC00.CCA13935-ON8625703C.004D9143-8625703C.004D914A@thoughtworks.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050712/c8bc98a0/attachment.html
From parrt at cs.usfca.edu  Fri Jul 15 16:04:21 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Jul 15 16:03:35 2005
Subject: [antlr-interest] ANTLR lecture and dinner in Mumbai and Bangalore
	India
In-Reply-To: <04EE7AD0450F7B498BA216312943A1A1028AEC9D@blrse201.ap.infineon.com>
References: <04EE7AD0450F7B498BA216312943A1A1028AEC9D@blrse201.ap.infineon.com>
Message-ID: <113587C1-D41C-4C02-8061-F52550DE7B4C@cs.usfca.edu>

On Jul 11, 2005, at 8:53 PM, <Yogesh.ThimmaShetty@infineon.com> wrote:

> Hello Everybody,
>
> I just came to know about the antlr lecture which is going to be
> conducted in bangalore.
> I want to know about the price and the procedure to get registered to
> attend this lecture .

It's free including the dinner!!  Please contact Dr.  Richard  
Johnson, rgjohnson at usfca.edu, at USF's Thailand (Bangkok)   
office.   Dr. Johnson's office phone number is +662-685-3515.  Just  
tell them you're an ANTLR fan and they will register you if there is  
still room.

Hope to see you there.  It's gonna be fun. :)

Terence
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From mail at martin-probst.com  Fri Jul 15 18:00:49 2005
From: mail at martin-probst.com (Martin Probst)
Date: Fri Jul 15 18:00:55 2005
Subject: [antlr-interest] substitution for a node during parsing
In-Reply-To: <20050714234001.48341.qmail@web26906.mail.ukl.yahoo.com>
References: <20050714234001.48341.qmail@web26906.mail.ukl.yahoo.com>
Message-ID: <1121475649.8940.3.camel@localhost.localdomain>


> alternation    :       concatenation ( !a:SLASH  b:concatenation {
>                 #a=#([ALTERNATION,"ALT|"],#b);
>                 astFactory.makeASTRoot(currentAST, #a);
> } )*
>                     ;

Try

alternation: c1:concatenation 
             ( SLASH! c2:concatenation! 
               { ## = #( [ALTERNATION,"ALT|"], #c2, ## ); } 
             )*

Regards,
Martin

From scott at javadude.com  Sat Jul 16 20:00:29 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Sat Jul 16 20:00:43 2005
Subject: [antlr-interest] ANTXR 0.9.0 released
Message-ID: <200507170348.j6H3m8qk017513@s2.eroute.net>

I've just released ANTXR 0.9.0 on my website
  http://javadude.com/tools/antxr

ANTXR is a tweaked version of ANTLR to generate XML parsers. I've modified
the ANTLR syntax slightly to make it more natural for XML parsing. You can
use SAX or XMLPull as the scanner (ANTXR has handlers for these that create
tokens).

You can use this as an eclipse plugin or in an ant build.

Let me know if you find this useful, or have any problems with it. I plan to
submit an article about it to xml.com and other sites as soon as I can write
them.

Enjoy!
-- Scott


From richard at exaflop.org  Sun Jul 17 14:10:29 2005
From: richard at exaflop.org (Richard Matthias)
Date: Sun Jul 17 14:10:19 2005
Subject: [antlr-interest] Tricky vector constructor syntax
In-Reply-To: <200507170348.j6H3m8qk017513@s2.eroute.net>
Message-ID: <ECOWS06MPZZ4qMiMe1p000feed5@smtp-out6.blueyonder.co.uk>

Hi all,

I'm trying to write a parser for a scripting language used in an online game.
The language is predictably very C-like with a few twists, most of which are
quite benign, but one is really twisting my melon.

The language supports vectors and quaternions as data types and they have
provided syntax for constructing instances of these types that make it just a
little bit tricky to parse. For example:-

vector v = <4.0 , 1.2, 0>;

Of course that's just an initializer, the same angle bracket syntax can be
used in expressions and each of the three elements of the vector can of
course be expressions also. A quaternion is for the sake of parsing just the
same except it has four components.

The grammar (which I've attached) has an expression section shamelessly
lifted from the java.g sample grammar but altered slightly to match the
original yacc grammar supplied by the makers of the game. For the moment I've
placed a rule for just the vector at the same level as the other constants
(the last alt of the postfixExpression rule) and even with a syntactic
predicate it still causes the same ambiguity warning. Does this look right or
should I try and shoehorn it in at the same level as the < operator?

I commented out some other stuff so at least without the production in
question the grammar compiles without warnings to give a fighting chance! And
the lexer isn't complete yet so it won't produce the right tokens. Oh and
please don't ridicule my choice of token names too much :)

Regards

Richard
-------------- next part --------------
A non-text attachment was scrubbed...
Name: LSLCompilerFrontEnd.g
Type: application/octet-stream
Size: 8498 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050717/1c02f97d/LSLCompilerFrontEnd.obj
From ric.klaren at gmail.com  Sun Jul 17 15:09:00 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Sun Jul 17 15:07:27 2005
Subject: Fwd: [antlr-interest] ANTLR, C++ and UNICODE
In-Reply-To: <3B186BEA677EFF48B6AAA0244A1A524F016FEACB@svr-exchange.atc.copernic.com>
References: <3B186BEA677EFF48B6AAA0244A1A524F016FEACB@svr-exchange.atc.copernic.com>
Message-ID: <42DAD6FC.8090402@gmail.com>

Alain Filion wrote:
> I have tried your Unicode solution for C++ and I find it weird that you
> don't use wistream as an input to your UnicodeCharBuffer. If you use
> basic char, how can you support Unicode character which are defined by
> wchar_t ?

> Usually, Unicode strings are defined in wstring. How can I use those
> with ANTLR ?

Solution is a big word. The example is a proof of concept thing. It's
very much untested and only intended to show how one can hook unicode
decoding and encoding in antlr. The example decodes UTF-8 and during
parsing antlr uses 32 bit values. After the token is recognized it
reencodes it to UTF8 into a normal string. You can plug in any other
string implementation at that point.

Cheers,

Ric
From ric.klaren at gmail.com  Sun Jul 17 15:12:28 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Sun Jul 17 15:10:58 2005
Subject: Fwd: [antlr-interest] ANTLR, C++ and UNICODE
In-Reply-To: <3B186BEA677EFF48B6AAA0244A1A524F016FEAAE@svr-exchange.atc.copernic.com>
References: <3B186BEA677EFF48B6AAA0244A1A524F016FEAAE@svr-exchange.atc.copernic.com>
Message-ID: <42DAD7CC.6060900@gmail.com>

Alain Filion wrote:
> It seems that the null character (\u0000) causes an error due to an
> ambiguous call to overloaded function match

Can you clarify this? Preferably a .g file + input that demonstrates the
problem.

Cheers,

Ric
From nbsherid at secsme.org.au  Sun Jul 17 16:40:32 2005
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Sun Jul 17 16:40:38 2005
Subject: [antlr-interest] Tricky vector constructor syntax
In-Reply-To: <ECOWS06MPZZ4qMiMe1p000feed5@smtp-out6.blueyonder.co.uk>
Message-ID: <000301c58b28$ec606460$9829198a@nigelnote>


> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Richard Matthias
> Sent: Monday, 18 July 2005 7:10 AM
> To: 'ANTLR Interest'
> Subject: [antlr-interest] Tricky vector constructor syntax
> 
> Hi all,
> 
> I'm trying to write a parser for a scripting language used in an online
> game.
> The language is predictably very C-like with a few twists, most of which
> are
> quite benign, but one is really twisting my melon.
> 
> The language supports vectors and quaternions as data types and they have
> provided syntax for constructing instances of these types that make it
> just a
> little bit tricky to parse. For example:-
> 
> vector v = <4.0 , 1.2, 0>;
> 
> Of course that's just an initializer, the same angle bracket syntax can be
> used in expressions and each of the three elements of the vector can of
> course be expressions also. A quaternion is for the sake of parsing just
> the
> same except it has four components.
> 
> The grammar (which I've attached) has an expression section shamelessly
> lifted from the java.g sample grammar but altered slightly to match the
> original yacc grammar supplied by the makers of the game. For the moment
> I've
> placed a rule for just the vector at the same level as the other constants
> (the last alt of the postfixExpression rule) and even with a syntactic
> predicate it still causes the same ambiguity warning. Does this look right
> or
> should I try and shoehorn it in at the same level as the < operator?
> 
> I commented out some other stuff so at least without the production in
> question the grammar compiles without warnings to give a fighting chance!
> And
> the lexer isn't complete yet so it won't produce the right tokens. Oh and
> please don't ridicule my choice of token names too much :)
> 

Okay this is a strange one, so I haven't fully worked it out. However, it
definitely is between your relationalExpression and postfixExpression rules.


relationalExpression
	: shiftExpression ( (LEFT_ANGLE^ | LESSTHAN_EQUALS^ |
GREATER_EQUALS^ | RIGHT_ANGLE^) shiftExpression )*
	;

postfixExpression
	: lvalue ( INCREMENT | DECREMENT )?
	| list_initializer
	| IDENT LEFT_PAREN expressionlist RIGHT_PAREN
	| constant
	| LEFT_ANGLE expression COMMA expression COMMA expression
RIGHT_ANGLE
	;

The reason you are getting the warning, is because in postfixExpression,
"expression" is followed by RIGHT_ANGLE, meaning that in some cases the
recursion will confuse the parser. If you change "expression" to something
like INTEGER_CONSTANT the warning will disappear. The problem is only with
RIGHT_ANGLE, not LEFT_ANGLE.

What this means is that the following bits of code are ambiguous:

x = < 1, 1, 1 > 5 >;

Not sure how to solve this one, as I have trouble getting syntactic
predicates in the optional alternatives right. Maybe someone else can
suggest an appropriate change?

One of your LEFT_SQUARE tokens is also spelt wrong (I think line 139). This
will lead to no error message in ANTLR but some confusion down the track.

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435 


From gillesb68 at hotmail.com  Sun Jul 17 20:34:43 2005
From: gillesb68 at hotmail.com (Gilles BRUNET)
Date: Sun Jul 17 20:34:48 2005
Subject: [antlr-interest] Type cast exception in CSharp
Message-ID: <BAY107-F2752DB9A6670A0FA9664CEBBD50@phx.gbl>

Hi,

The CSharp generator produces the following lines of code:

...
AST tmp1_AST = null;
tmp1_AST = astFactory.create(LT(1));
astFactory.makeASTRoot(currentAST, tmp1_AST);
...

My parser declaration have the following form:

...
class CommonParser extends Parser;
options {
	k = 2;
	importVocab = CommonAgilePLC;
	classHeaderPrefix = "internal";
	buildAST = true;
}
...

The AST factory creator throws the exception "System.InvalidCastException". 
Its factory operation seems to expect a parameter of type IToken while the 
CommonToken object returned by LT(1) does not implement this interface.

Is here any Token subclass that implement IToken available in the ANTLR's 
API or do I miss some option in the parser declaration?

Best regards,

Gilles B.

_________________________________________________________________
Partagez une seule photo ou un diaporama complet dans MSN Messenger. 
http://join.msn.com/?pgmarket=fr-ca&page=features/messenger Commencez d?s 
maintenant ? profiter de tous les avantages de MSN Premium et obtenez les 
deux premiers mois GRATUITS*.

From gt54-antlr at cyconix.com  Sun Jul 17 23:46:03 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Sun Jul 17 23:46:11 2005
Subject: [antlr-interest] Tricky vector constructor syntax
In-Reply-To: <000301c58b28$ec606460$9829198a@nigelnote>
References: <000301c58b28$ec606460$9829198a@nigelnote>
Message-ID: <42DB502B.1050202@cyconix.com>

Nigel Sheridan-Smith wrote:
>>-----Original Message-----
>>From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
>>bounces@antlr.org] On Behalf Of Richard Matthias
>>The grammar (which I've attached) has an expression section shamelessly
>>lifted from the java.g sample grammar but altered slightly to match the
>>original yacc grammar supplied by the makers of the game. For the moment

Does the yacc grammar handle the vector init? If so, it would be 
(very)interesting to see how they do it.

>>I've
>>placed a rule for just the vector at the same level as the other constants
>>(the last alt of the postfixExpression rule) and even with a syntactic
>>predicate it still causes the same ambiguity warning. Does this look right
>>or
>>should I try and shoehorn it in at the same level as the < operator?

At first sight, I'd say it's in the wrong place; an initialiser isn't a 
postfix expression. It should have a very low priority, which might fix 
your immediate problem by itself. Look at a real C grammar; Tom 
Stockfisch's yacc grammar is a good starting point.

> What this means is that the following bits of code are ambiguous:
> 
> x = < 1, 1, 1 > 5 >;
> 
> Not sure how to solve this one, as I have trouble getting syntactic
> predicates in the optional alternatives right. Maybe someone else can
> suggest an appropriate change?

If you have to give your initialiser such a high priority, then your 
answer may be to exclude relationals from the expressions in the list. 
You'll need two expression syntaxes: a normal one, and one which 
excludes relationals; then you might have

postfixExpression
     ...
     < expr_non_relational , expr_non_relational , expr_non_relational >

HTH

Paul

From amohombe at yahoo.com  Mon Jul 18 03:41:29 2005
From: amohombe at yahoo.com (Ahmed Mohombe)
Date: Mon Jul 18 03:42:26 2005
Subject: [antlr-interest] Velocity grammar?
Message-ID: <dbg10p$teo$1@sea.gmane.org>

Hi,

Is there a ANTLR gramar file for Velocity 
(http://jakarta.apache.org/velocity/index.html) ?

I can't find on the grammar section of antlr.org site.

Thanks in advance,

Ahmed.

From Flik04 at gmx.de  Mon Jul 18 04:18:30 2005
From: Flik04 at gmx.de (Flik04@gmx.de)
Date: Mon Jul 18 04:18:35 2005
Subject: [antlr-interest] How to make your own interpreter?
Message-ID: <25971.1121685510@www1.gmx.net>

hello together,

I work on the problem how to create my own programming language.

I have already created the grammar file (.g) for making the parser and the
lexer. Both things work very well.

I also have created the treewalker! now i am able to walk through the AST of
my example file.

The problem I have now is how to go on writing my interpreter:
i have seen the tinybasic example distributed with antlr, but i do not get
any idea of implementing this to my language...

Is there any good documentation to this tinybasic project or a general one
about doing an interpreter?
My problem is that i do not know how to read out variables and store them in
a stack and how to handle for-loops: you know, checking the boolean value,
call an external subrutine and jump back into the loop after executing the
subrutine and so on....

I am a total newbie to the antlr thing....

thanks in advance

Flik

-- 
5 GB Mailbox, 50 FreeSMS http://www.gmx.net/de/go/promail
+++ GMX - die erste Adresse f鐃r Mail, Message, More +++
From open.zone at virgin.net  Mon Jul 18 09:35:11 2005
From: open.zone at virgin.net (Micheal J)
Date: Mon Jul 18 09:21:00 2005
Subject: [antlr-interest] Type cast exception in CSharp
In-Reply-To: <BAY107-F2752DB9A6670A0FA9664CEBBD50@phx.gbl>
Message-ID: <000c01c58bb6$abf05410$6402a8c0@hercules>

> Hi,
> 
> The CSharp generator produces the following lines of code:
> 
> ...
> AST tmp1_AST = null;
> tmp1_AST = astFactory.create(LT(1)); 
> astFactory.makeASTRoot(currentAST, tmp1_AST); ...
> 
> My parser declaration have the following form:
> 
> ...
> class CommonParser extends Parser;
> options {
> 	k = 2;
> 	importVocab = CommonAgilePLC;
> 	classHeaderPrefix = "internal";
> 	buildAST = true;
> }
> ...
> 
> The AST factory creator throws the exception 
> "System.InvalidCastException". 
> Its factory operation seems to expect a parameter of type 
> IToken while the 
> CommonToken object returned by LT(1) does not implement this 
> interface.
> 
> Is here any Token subclass that implement IToken available in 
> the ANTLR's 
> API or do I miss some option in the parser declaration?

CommonToken does implement IToken afaik. What version are you using?. It
should be 2.7.5 and you should ensure that you've generated all the
lexer/parser/treeparser code for your project using it *and* you are using
it's own runtime files.

Cheers,

Micheal

From min_d99 at yahoo.com  Mon Jul 18 13:49:12 2005
From: min_d99 at yahoo.com (Min Deng)
Date: Mon Jul 18 13:49:15 2005
Subject: [antlr-interest] C grammar for ANTLR ?
Message-ID: <20050718204912.99701.qmail@web30807.mail.mud.yahoo.com>

Hello all,

I am new to ANTLR. What I would like to know is: is
there a C grammar for ANTLR to generate a C parser in
Java? If yes, could you point me to that grammar?

Thanks a lot and best regards,
Min


		
____________________________________________________
Start your day with Yahoo! - make it your home page 
http://www.yahoo.com/r/hs 
 
From chris at lotuscat.com  Mon Jul 18 13:53:09 2005
From: chris at lotuscat.com (Chris Black)
Date: Mon Jul 18 13:54:38 2005
Subject: [antlr-interest] C grammar for ANTLR ?
In-Reply-To: <20050718204912.99701.qmail@web30807.mail.mud.yahoo.com>
References: <20050718204912.99701.qmail@web30807.mail.mud.yahoo.com>
Message-ID: <42DC16B5.5@lotuscat.com>

Min Deng wrote:

>Hello all,
>
>I am new to ANTLR. What I would like to know is: is
>there a C grammar for ANTLR to generate a C parser in
>Java? If yes, could you point me to that grammar?
>  
>
If you what you are looking for is a way to parse C code from Java 
(which I think is what you are asking), download the full antlr release 
and look in examples/java/tinyc/. There is probably a more complete one 
online somewhere, but that should get you started.

Chris
From ric.klaren at gmail.com  Mon Jul 18 15:38:51 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Jul 18 15:39:45 2005
Subject: [antlr-interest] C grammar for ANTLR ?
In-Reply-To: <20050718204912.99701.qmail@web30807.mail.mud.yahoo.com>
References: <20050718204912.99701.qmail@web30807.mail.mud.yahoo.com>
Message-ID: <42DC2F7B.1030705@gmail.com>

Min Deng wrote:
> I am new to ANTLR. What I would like to know is: is
> there a C grammar for ANTLR to generate a C parser in
> Java? If yes, could you point me to that grammar?

Check the grammar section on www.antlr.org there's one.

Cheers,

Ric
From jogi1978 at gmx.de  Mon Jul 18 16:38:24 2005
From: jogi1978 at gmx.de (=?us-ascii?B?Sm9yZyBIYWxrZXI=?=)
Date: Mon Jul 18 16:38:29 2005
Subject: [antlr-interest] Stack overflow problem with C++
Message-ID: <20050718233825.EA11EDCC31@www.antlr.org>

Hi!

If i run the following code i get a stack overflow error:

****************************************
#include <antlr/CommonAST.hpp>

using namespace antlr;
using namespace std;

int main(int argc, char * * argv)
{
	RefCommonAST first = RefCommonAST( new CommonAST());
	RefCommonAST current = first;
	for (unsigned int counter = 0; counter < 9000; ++counter)
	{
		current->setNextSibling(RefAST( new CommonAST()));
		current = current->getNextSibling();
	}
}
****************************************

It looks like a problem with the destructor of CommonAST or its base
classes. The error occours if 'first' runs out of the scope. 
If i create a parser that parses an input file into the same AST scheme,
everything works fine. But if i create a copy of the AST from the parser i
run into the same problem.

What's wrong? The code snippet should not produce an stack overflow error,
am i right?

Thank you very much,

Joerg

From richard at exaflop.org  Mon Jul 18 17:28:41 2005
From: richard at exaflop.org (Richard Matthias)
Date: Mon Jul 18 17:28:30 2005
Subject: [antlr-interest] Tricky vector constructor syntax
In-Reply-To: <42DB502B.1050202@cyconix.com>
Message-ID: <ECOWS05Mp9wzb3RSZby001060a8@smtp-out5.blueyonder.co.uk>

Thanks Nigel and Paul for taking a look at my problem. Of course I should
have included the original yacc grammar with my query for comparison so I've
done so here. I don't really understand LALR parsers that well but if you do
maybe you can gain some insight. I don't know if yacc produces any ambiguity
warnings/errors with that grammar as I couldn't get the cygwin copy of bison
I have installed to grok it.

I was considering Paul's suggestion of an expression branch that doesn't
include relational operators since it doesn't really make any sense to use
them inside the vector constructor as far as I'm concerned, but I did log
into the game and test it with this delightfully useless fragment which does
compile and run without error so another solution was required:-

        if (<3, 4, 0> == <3, 4, 4>5 >)
            llOwnerSay("true");
        else
            llOwnerSay("false");

Which yields "true" because the boolean results of relational operators are
rendered as integers (as in C) which are acceptable as components of a vector
(implicitly cast to float even though the language seems to require explicit
casting everywhere else, but anyway..)

Looking at the use of syntactic predicates in the sample grammars I thought
it would be nice in the vector initializer rule to say "if it looks like an
expression it's an expression" but then I realised that only works between
alts of the same rule and not in mutually recursive rule sets like the
expression system here. Thanks to Nigel's indentification of the ambiguity
being between the relationalExpression and postfixExpression (badly named I
know) rules, I tried setting the greedy option on the operator group of
relationalExpression. It suppressed the warning and when I riggged up enough
code to test the grammar in action, it does behave as expected.

relationalExpression
	: shiftExpression 
	  ( options { greedy=true;} 
	    : (LEFT_ANGLE^ | LESSTHAN_EQUALS^ | GREATER_EQUALS^ |
RIGHT_ANGLE^) shiftExpression 
	  )*
	;


I have a nasty feeling that after I've sent this email I'll find some case
under which it breaks down, but even a horrid example like:-

vector v = <1,2, 5>6 > > <1,2,3>;

Seems to parse as expected by examining the AST using AST.ToStringList().

Regards,

richard

>-----Original Message-----
>From: antlr-interest-bounces@antlr.org 
>[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Paul Johnson
>Sent: 18 July 2005 07:46
>To: 'ANTLR Interest'
>Subject: Re: [antlr-interest] Tricky vector constructor syntax
>
>Nigel Sheridan-Smith wrote:
>>>-----Original Message-----
>>>From: antlr-interest-bounces@antlr.org [mailto:antlr-interest- 
>>>bounces@antlr.org] On Behalf Of Richard Matthias The grammar (which 
>>>I've attached) has an expression section shamelessly lifted from the 
>>>java.g sample grammar but altered slightly to match the 
>original yacc 
>>>grammar supplied by the makers of the game. For the moment
>
>Does the yacc grammar handle the vector init? If so, it would 
>be (very)interesting to see how they do it.
>
>>>I've
>>>placed a rule for just the vector at the same level as the other 
>>>constants (the last alt of the postfixExpression rule) and 
>even with a 
>>>syntactic predicate it still causes the same ambiguity warning. Does 
>>>this look right or should I try and shoehorn it in at the same level 
>>>as the < operator?
>
>At first sight, I'd say it's in the wrong place; an 
>initialiser isn't a postfix expression. It should have a very 
>low priority, which might fix your immediate problem by 
>itself. Look at a real C grammar; Tom Stockfisch's yacc 
>grammar is a good starting point.
>
>> What this means is that the following bits of code are ambiguous:
>> 
>> x = < 1, 1, 1 > 5 >;
>> 
>> Not sure how to solve this one, as I have trouble getting syntactic 
>> predicates in the optional alternatives right. Maybe someone 
>else can 
>> suggest an appropriate change?
>
>If you have to give your initialiser such a high priority, 
>then your answer may be to exclude relationals from the 
>expressions in the list. 
>You'll need two expression syntaxes: a normal one, and one 
>which excludes relationals; then you might have
>
>postfixExpression
>     ...
>     < expr_non_relational , expr_non_relational , 
>expr_non_relational >
>
>HTH
>
>Paul
>
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lsl.y
Type: application/octet-stream
Size: 14402 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050719/2f20fceb/lsl-0001.obj
From gillesb68 at hotmail.com  Mon Jul 18 18:59:05 2005
From: gillesb68 at hotmail.com (Gilles BRUNET)
Date: Mon Jul 18 18:59:08 2005
Subject: [antlr-interest] Type cast exception in CSharp
In-Reply-To: <000c01c58bb6$abf05410$6402a8c0@hercules>
Message-ID: <BAY107-F256AC191292A89C0CE18D9BBD40@phx.gbl>

I tried the sample "preserveWhiteSpace" and performed some modification and 
missed to remove the following line:

lexer.setTokenObjectClass("antlr.CommonHiddenStreamToken");

Thanks a lot.

Gilles B.

>From: "Micheal J" <open.zone@virgin.net>
>To: <antlr-interest@antlr.org>
>Subject: RE: [antlr-interest] Type cast exception in CSharp
>Date: Mon, 18 Jul 2005 17:35:11 +0100
>
> > Hi,
> >
> > The CSharp generator produces the following lines of code:
> >
> > ...
> > AST tmp1_AST = null;
> > tmp1_AST = astFactory.create(LT(1));
> > astFactory.makeASTRoot(currentAST, tmp1_AST); ...
> >
> > My parser declaration have the following form:
> >
> > ...
> > class CommonParser extends Parser;
> > options {
> > 	k = 2;
> > 	importVocab = CommonAgilePLC;
> > 	classHeaderPrefix = "internal";
> > 	buildAST = true;
> > }
> > ...
> >
> > The AST factory creator throws the exception
> > "System.InvalidCastException".
> > Its factory operation seems to expect a parameter of type
> > IToken while the
> > CommonToken object returned by LT(1) does not implement this
> > interface.
> >
> > Is here any Token subclass that implement IToken available in
> > the ANTLR's
> > API or do I miss some option in the parser declaration?
>
>CommonToken does implement IToken afaik. What version are you using?. It
>should be 2.7.5 and you should ensure that you've generated all the
>lexer/parser/treeparser code for your project using it *and* you are using
>it's own runtime files.
>
>Cheers,
>
>Micheal
>

_________________________________________________________________
Profitez des puissants filtres de courriels ind?sirables articul?s sur la 
technologie brevet?e MicrosoftMD SmartScreen. 
http://join.msn.com/?pgmarket=fr-ca&page=features/junkmail Commencez d?s 
maintenant ? profiter de tous les avantages de MSN Premium et obtenez les 
deux premiers mois GRATUITS*.

From ric.klaren at gmail.com  Tue Jul 19 00:24:17 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Tue Jul 19 00:24:20 2005
Subject: [antlr-interest] Stack overflow problem with C++
In-Reply-To: <20050718233825.EA11EDCC31@www.antlr.org>
References: <20050718233825.EA11EDCC31@www.antlr.org>
Message-ID: <bc607a4e05071900249b9b5dd@mail.gmail.com>

On 7/19/05, Jorg Halker <jogi1978@gmx.de> wrote:
> If i run the following code i get a stack overflow error:
> 
> ****************************************
> #include <antlr/CommonAST.hpp>
> 
> using namespace antlr;
> using namespace std;
> 
> int main(int argc, char * * argv)
> {
>         RefCommonAST first = RefCommonAST( new CommonAST());
>         RefCommonAST current = first;
>         for (unsigned int counter = 0; counter < 9000; ++counter)
>         {
>                 current->setNextSibling(RefAST( new CommonAST()));
>                 current = current->getNextSibling();
>         }
> }
> ****************************************
> 
> It looks like a problem with the destructor of CommonAST or its base
> classes. The error occours if 'first' runs out of the scope.
> If i create a parser that parses an input file into the same AST scheme,
> everything works fine. But if i create a copy of the AST from the parser i
> run into the same problem.
> 
> What's wrong? The code snippet should not produce an stack overflow error,
> am i right?

Nope it shouldn't (and it doesn't on a number of machines I have acces
to) Which leads to the question:  What antlr version? What OS? What
compiler?

Cheers,

Ric
From gt54-antlr at cyconix.com  Tue Jul 19 01:50:44 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Tue Jul 19 01:50:50 2005
Subject: [antlr-interest] Tricky vector constructor syntax
In-Reply-To: <ECOWS05Mp9wzb3RSZby001060a8@smtp-out5.blueyonder.co.uk>
References: <ECOWS05Mp9wzb3RSZby001060a8@smtp-out5.blueyonder.co.uk>
Message-ID: <42DCBEE4.7090002@cyconix.com>

Richard Matthias wrote:
> Thanks Nigel and Paul for taking a look at my problem. Of course I should
> have included the original yacc grammar with my query for comparison so I've
> done so here. I don't really understand LALR parsers that well but if you do
> maybe you can gain some insight. I don't know if yacc produces any ambiguity
> warnings/errors with that grammar as I couldn't get the cygwin copy of bison
> I have installed to grok it.

At first sight, this grammar seems a bit (a lot?) wacky.  Bison runs 
with 122 warnings and 44 reduce/reduce conflicts. The warnings can be 
fixed with appropriate action code, which has presumably been removed 
from the grammar. The R/R conflicts arise from:

> typecast
> 	: '(' typename ')' lvalue				
> 	| '(' typename ')' constant				
> 	| '(' typename ')' unarypostfixexpression
> 
> unarypostfixexpression
>						
> 	| lvalue											
> 	| constant									
> 	<etc>

In other words, in 'a = (int)b', is 'b' an lvalue/constant or a 
unarypostfixexpression? Bison selects the typecast by default, but this 
is badly designed.

Bison fixes your priority problem by explicitly assigning a high 
priority to vector_initializer:

> vector_initializer
> 	: '<' expression ',' expression ',' expression '>'	%prec INITIALIZER
> 	| ZERO_VECTOR
> 	;

where INITIALIZER has the highest operator priority (see the 
%left/right/nonassoc list). I can't quite get my head around this, but I 
suspect that if you modify your test from

> vector v = <1,2, 5>6 > > <1,2,3>;

to either 'vector v = <1,2, 5<6 > > <1,2,3>;' or 'vector v = <1,2, 5>6 > 
< <1,2,3>;'

then you'll get a syntax error. I can't immediately see how the '<' 
relational works at all - does it?

Can't comment on your ANTLR fix... still trying to learn it myself...

:)

From jogi1978 at gmx.de  Tue Jul 19 02:55:59 2005
From: jogi1978 at gmx.de (=?iso-8859-1?B?SvZyZyBI5GxrZXI=?=)
Date: Tue Jul 19 02:56:03 2005
Subject: [antlr-interest] Stack overflow problem with C++
In-Reply-To: <bc607a4e05071900249b9b5dd@mail.gmail.com>
Message-ID: <20050719095601.E0F40DCC31@www.antlr.org>

 
Hi!

I am working with version 2.7.3 but i even tried 2.7.5 with MS VS .NET 2003
version 7.1.3088 under WinXP. It still produces an stack overflow. Have no
idea why... later the day i'm going to install cygwin to see what happens...

Best regards,
J?rg 

> -----Original Message-----
> From: Ric Klaren [mailto:ric.klaren@gmail.com] 
> Sent: Tuesday, July 19, 2005 9:24 AM
> To: Jorg Halker
> Cc: antlr-interest@antlr.org
> Subject: Re: [antlr-interest] Stack overflow problem with C++
> 
> On 7/19/05, Jorg Halker <jogi1978@gmx.de> wrote:
> > If i run the following code i get a stack overflow error:
> > 
> > ****************************************
> > #include <antlr/CommonAST.hpp>
> > 
> > using namespace antlr;
> > using namespace std;
> > 
> > int main(int argc, char * * argv)
> > {
> >         RefCommonAST first = RefCommonAST( new CommonAST());
> >         RefCommonAST current = first;
> >         for (unsigned int counter = 0; counter < 9000; ++counter)
> >         {
> >                 current->setNextSibling(RefAST( new CommonAST()));
> >                 current = current->getNextSibling();
> >         }
> > }
> > ****************************************
> > 
> > It looks like a problem with the destructor of CommonAST or 
> its base 
> > classes. The error occours if 'first' runs out of the scope.
> > If i create a parser that parses an input file into the same AST 
> > scheme, everything works fine. But if i create a copy of 
> the AST from 
> > the parser i run into the same problem.
> > 
> > What's wrong? The code snippet should not produce an stack overflow 
> > error, am i right?
> 
> Nope it shouldn't (and it doesn't on a number of machines I have acces
> to) Which leads to the question:  What antlr version? What 
> OS? What compiler?
> 
> Cheers,
> 
> Ric
> 

From richard at exaflop.org  Tue Jul 19 05:04:16 2005
From: richard at exaflop.org (Richard Matthias)
Date: Tue Jul 19 05:04:06 2005
Subject: [antlr-interest] Tricky vector constructor syntax
In-Reply-To: <42DCBEE4.7090002@cyconix.com>
Message-ID: <ECOWS04MRhYSvCfpbmm001090f9@smtp-out4.blueyonder.co.uk>

>-----Original Message-----
>From: antlr-interest-bounces@antlr.org 
>[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Paul Johnson
>Sent: 19 July 2005 09:51
>To: antlr-interest@antlr.org
>Subject: Re: [antlr-interest] Tricky vector constructor syntax
>
>At first sight, this grammar seems a bit (a lot?) wacky.  
>Bison runs with 122 warnings and 44 reduce/reduce conflicts. 
>The warnings can be fixed with appropriate action code, which 
>has presumably been removed from the grammar. The R/R 
>conflicts arise from:
>
>> typecast
>> 	: '(' typename ')' lvalue				
>> 	| '(' typename ')' constant				
>> 	| '(' typename ')' unarypostfixexpression
>> 
>> unarypostfixexpression
>>						
>> 	| lvalue

>> 	| constant						
>> 	<etc>
>
>In other words, in 'a = (int)b', is 'b' an lvalue/constant or 
>a unarypostfixexpression? Bison selects the typecast by 
>default, but this is badly designed.

Yes. I'd been trying to stick as closely as possible to the given grammar
rather than relying on my understanding of the language to create my own one
from scratch, but when I came to that part I scratched my head for a bit and
then stripped it out and put something more conventional in it's place. This
language doesn't have user-defined types, so typecasts can be detected with
fixed lookahead even without a symbol table.

>Bison fixes your priority problem by explicitly assigning a 
>high priority to vector_initializer:
>
>> vector_initializer
>> 	: '<' expression ',' expression ',' expression '>'	
>%prec INITIALIZER
>> 	| ZERO_VECTOR
>> 	;
>
>where INITIALIZER has the highest operator priority (see the 
>%left/right/nonassoc list). I can't quite get my head around 
>this, but I suspect that if you modify your test from
>
>> vector v = <1,2, 5>6 > > <1,2,3>;
>
>to either 'vector v = <1,2, 5<6 > > <1,2,3>;' or 'vector v = 
><1,2, 5>6 > < <1,2,3>;'
>
>then you'll get a syntax error. I can't immediately see how the '<' 
>relational works at all - does it?

Your first example works, the second gives a parse error. The relational
operators work fine in most well-formed examples because when you get down to
the postfixExpression rule (which contains the vector initializer), there
isn't a '<' or '>' in the immediate lookahead. In the relationalExpression
rule:

relationalExpression
	: shiftExpression 
	  ( options { greedy=true;} : 
          (LEFT_ANGLE^ | LESSTHAN_EQUALS^ | GREATER_EQUALS^ | RIGHT_ANGLE^)
shiftExpression 
         )*
	;

For input "5 < 6", shiftExpression (and decendents) is in both cases
presented with a constant. And because it parses OK on it's own, it also
parses OK as a component of a vector. The following even parses OK:-

vector v = <1, 2, <3,4,5> >;

Even though it isn't valid within the type system. And it parses the
following OK, even though the game's original parser barfs on it for
unspecified reasons:-

vector v = <1,2, <6,7,8> == <6,7,8> >;

The only problem it does have is where a vector initializer is followed by
'<'. As in:-

vector v = <1,2,3> < 6;

>From the debugger I can see that what's happening is that it gets to the
third sub-expression started by the '3', it then sees the '>' as part of the
sub-expression and the following '<' as the start of another vector
initializer which then throws the exception when the '6' is followed by the
';' instead of a ','. 

What I don't understand is why the '>' following the '3' is swallowed as part
of the sub-expression only when there's a following '<' as if you change the
final '<' for any other operator it parses just fine! It's like I understand
how it gets seen as the start of another vector initializer, but not how the
antlr generated code an see it as such at the relationalExpression level.

Only '==' and '!=' are valid operators for acting on vectors. Other operators
seem to be excluded at the type-checking stage by the game's compiler, but I
could cheat a bit and exclude them from mine at the syntax level by passing a
parameter down from relational expression that stops the vector initializer
sub-rule matching '<' via a semantic action when it follows a '>' matched as
part of a relational expression. I think possibly it would be too late by
that stage as the real problem is that what should be the closing '>' of the
main initializer is treated as part of the sub-expression for some reason,
what happens after that just obscures the error.

richard

From JConner at ssp-uk.com  Tue Jul 19 06:25:50 2005
From: JConner at ssp-uk.com (JConner@ssp-uk.com)
Date: Tue Jul 19 06:22:28 2005
Subject: [antlr-interest] Newbie: rule equivalent of a token reference?
Message-ID: <OF5A5E18BB.4753FD01-ON80257043.00468579-80257043.0049C8B0@rag.eu.csc.com>

Dear all,

Sorry if this isn't the right place to ask this, and I know that I might be
trying to run before I can walk, but...

I'm trying to play around and create a simple translator.  Getting the
"text" of a token seems straight forwards - you label the token reference,
and call xzy.getText() in an action.  However, what do I do if I wrap the
token reference up in another parser rule?  Eg, in:

variable_declaration : constant type ( COMMA constant type )* ;
constant : INDENTIFIER ;
type : .....

Given that COMMA and IDENTIFIER are lexer rules, how would I get the "text"
from the rule constant into an action in the rule variable_declaration?  Am
I missing something obvious, or am I trying to go about this in the wrong
way?

John

From tarunkhanna at gmail.com  Tue Jul 19 07:55:14 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Tue Jul 19 07:55:58 2005
Subject: [antlr-interest] Newbie: rule equivalent of a token reference?
In-Reply-To: <OF5A5E18BB.4753FD01-ON80257043.00468579-80257043.0049C8B0@rag.eu.csc.com>
References: <OF5A5E18BB.4753FD01-ON80257043.00468579-80257043.0049C8B0@rag.eu.csc.com>
Message-ID: <dbcf4c2c05071907552c5c9d67@mail.gmail.com>

You'll have to return the string from the rule constant.

So your two rules would look something like the following. In the variable 
declaration rule the x would then contain whatever string constant returns.

You should look at the manual that describes this stuff. One of the getting 
started tuts has it. Hoewever they talk abt returning integers.

variable_declaration 
{String x;}
: 
x=constant type ( COMMA constant type )* 
;
constant returns [String x=""}
: 
i:INDENTIFIER {x=i.getText();}
;
type : .....


On 7/19/05, JConner@ssp-uk.com <JConner@ssp-uk.com> wrote:
> 
> Dear all,
> 
> Sorry if this isn't the right place to ask this, and I know that I might 
> be
> trying to run before I can walk, but...
> 
> I'm trying to play around and create a simple translator. Getting the
> "text" of a token seems straight forwards - you label the token reference,
> and call xzy.getText() in an action. However, what do I do if I wrap the
> token reference up in another parser rule? Eg, in:
> 
> variable_declaration : constant type ( COMMA constant type )* ;
> constant : INDENTIFIER ;
> type : .....
> 
> Given that COMMA and IDENTIFIER are lexer rules, how would I get the 
> "text"
> from the rule constant into an action in the rule variable_declaration? Am
> I missing something obvious, or am I trying to go about this in the wrong
> way?
> 
> John
> 
> 


-- 
Tarun Khanna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050719/61fc82f8/attachment.html
From jogi1978 at gmx.de  Tue Jul 19 09:14:37 2005
From: jogi1978 at gmx.de (=?us-ascii?B?Sm9yZyBIYWxrZXI=?=)
Date: Tue Jul 19 09:14:44 2005
Subject: [antlr-interest] Stack overflow problem with C++
In-Reply-To: <bc607a4e05071900249b9b5dd@mail.gmail.com>
Message-ID: <20050719161442.4A521DCC31@www.antlr.org>

Hi!

Okay, i tried it with linux (feodora core 2) and gcc (v3.2.2). It looks like
that the stack is larger there. So if i count until 150000 i have the same
problem with linux and gcc: segmentation fault/stack overflow. But if i set
up a parser which parses a file and creates an ast with the same amount of
ast nodes like the loop from the code snippet does, everything is fine and
the program exits well.

Is it intended that the loop creates objects on the stack?? am i wrong if i
think that the stack should not overflow because the objects should be
created on the heap?? 

Thank you!

Joerg

> -----Original Message-----
> From: Ric Klaren [mailto:ric.klaren@gmail.com] 
> Sent: Tuesday, July 19, 2005 9:24 AM
> To: Jorg Halker
> Cc: antlr-interest@antlr.org
> Subject: Re: [antlr-interest] Stack overflow problem with C++
> 
> On 7/19/05, Jorg Halker <jogi1978@gmx.de> wrote:
> > If i run the following code i get a stack overflow error:
> > 
> > ****************************************
> > #include <antlr/CommonAST.hpp>
> > 
> > using namespace antlr;
> > using namespace std;
> > 
> > int main(int argc, char * * argv)
> > {
> >         RefCommonAST first = RefCommonAST( new CommonAST());
> >         RefCommonAST current = first;
> >         for (unsigned int counter = 0; counter < 9000; ++counter)
> >         {
> >                 current->setNextSibling(RefAST( new CommonAST()));
> >                 current = current->getNextSibling();
> >         }
> > }
> > ****************************************
> > 
> > It looks like a problem with the destructor of CommonAST or 
> its base 
> > classes. The error occours if 'first' runs out of the scope.
> > If i create a parser that parses an input file into the same AST 
> > scheme, everything works fine. But if i create a copy of 
> the AST from 
> > the parser i run into the same problem.
> > 
> > What's wrong? The code snippet should not produce an stack overflow 
> > error, am i right?
> 
> Nope it shouldn't (and it doesn't on a number of machines I have acces
> to) Which leads to the question:  What antlr version? What 
> OS? What compiler?
> 
> Cheers,
> 
> Ric
> 

From ric.klaren at gmail.com  Tue Jul 19 10:48:41 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Tue Jul 19 10:49:33 2005
Subject: [antlr-interest] Stack overflow problem with C++
In-Reply-To: <20050719161442.4A521DCC31@www.antlr.org>
References: <20050719161442.4A521DCC31@www.antlr.org>
Message-ID: <42DD3CF9.4000201@gmail.com>

Jorg Halker wrote:
> Okay, i tried it with linux (feodora core 2) and gcc (v3.2.2). It looks like
> that the stack is larger there. So if i count until 150000 i have the same
> problem with linux and gcc: segmentation fault/stack overflow. But if i set
> up a parser which parses a file and creates an ast with the same amount of
> ast nodes like the loop from the code snippet does, everything is fine and
> the program exits well.
> 
> Is it intended that the loop creates objects on the stack?? am i wrong if i
> think that the stack should not overflow because the objects should be
> created on the heap?? 

Hmmm my guess is then that it's the reference counter that recurses too
deep while destroying the tree structure. Note that the structure you
made is very deep probably deeper than any 'real' AST would be.

Destroying the tree 'manually' with a stack you yourself maintain on the
heap might be a solution. Actually I now recall a person running into
this as well but that was a few years ago.

Cheers,

Ric
From gt54-antlr at cyconix.com  Tue Jul 19 13:11:00 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Tue Jul 19 13:11:06 2005
Subject: [antlr-interest] Stack overflow problem with C++
In-Reply-To: <42DD3CF9.4000201@gmail.com>
References: <20050719161442.4A521DCC31@www.antlr.org>
	<42DD3CF9.4000201@gmail.com>
Message-ID: <42DD5E54.1010103@cyconix.com>

Ric Klaren wrote:
> Jorg Halker wrote:
> 
>>Okay, i tried it with linux (feodora core 2) and gcc (v3.2.2). It looks like
>>that the stack is larger there. So if i count until 150000 i have the same
>>problem with linux and gcc: segmentation fault/stack overflow. But if i set
>>up a parser which parses a file and creates an ast with the same amount of
>>ast nodes like the loop from the code snippet does, everything is fine and
>>the program exits well.
>>
>>Is it intended that the loop creates objects on the stack?? am i wrong if i
>>think that the stack should not overflow because the objects should be
>>created on the heap?? 
> 
> 
> Hmmm my guess is then that it's the reference counter that recurses too
> deep while destroying the tree structure. Note that the structure you
> made is very deep probably deeper than any 'real' AST would be.
> 
> Destroying the tree 'manually' with a stack you yourself maintain on the
> heap might be a solution. Actually I now recall a person running into
> this as well but that was a few years ago.

Just to clarify:

you create 'first' on the stack; you then add 150K siblings. When main 
terminates, the destructor for 'first' is called. This deletes the first 
AST node, but it first has to delete the 'right' field (ie. the 
sibling). Before deleting sibling, we have to delete the second sibling, 
and so on; the delete is therefore recursive. This is necessary because 
you have to decrement a reference count before deciding whether or not 
to delete a node; this means that the process has to be top-down, rather 
than bottom-up. The overflow you're seeing is simply the call stack for 
the recursive destruction. I checked this in valgrind, which shows that 
your test has a negligible stack until the end of the program, when it 
suddenly explodes to 20MB.

If you need to fix this, change your 'first' declaration to:

RefCommonAST *first = new RefCommonAST( new CommonAST());

so that the tree isn't deleted on program exit.

HTH

Paul

From min_d99 at yahoo.com  Tue Jul 19 16:49:04 2005
From: min_d99 at yahoo.com (Min Deng)
Date: Tue Jul 19 16:49:07 2005
Subject: [antlr-interest] C grammar for ANTLR ?
In-Reply-To: <42DC16B5.5@lotuscat.com>
Message-ID: <20050719234905.38030.qmail@web30809.mail.mud.yahoo.com>

I like to thank the people who helped me find the C
grammar. I found it at
http://www.antlr.org/grammar/cgram and tried it out
successfully.

Best Regards,
Min

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From sowayaa at isis.vanderbilt.edu  Mon Jul 18 13:23:54 2005
From: sowayaa at isis.vanderbilt.edu (Abdullah Sowayan)
Date: Tue Jul 19 16:59:07 2005
Subject: [antlr-interest] ANTLR + VC6, problem
Message-ID: <7D60AA0613C6634FA23D37D758BD98C7091482@discovery.isis.vanderbilt.edu>

Hi,
I'm new to ANTLR. I'm just trying to get it to work. I'm using ANTLR 2.7.5
 
I included the static library antlr.lib in the project file under VC++6.
 
When I compile, here is what I get: Does anyone know how I can fix this?
 
Thanks
 
 
Deleting intermediate files and output files for project 'Antlr - Win32 Debug'.
--------------------Configuration: Antlr - Win32 Debug--------------------
Compiling...
Main.cpp
SupportTest.cpp
Linking...
libcpd.lib(locale.obj) : error LNK2005: "public: static class std::locale::id std::num_put<char,class std::ostreambuf_iterator<char,struct std::char_traits<char> > >::id" (?id@?$num_put@DV?$ostreambuf_iterator@DU?$char_traits@D@std@@@std@@@std@@2V0l
ocale@2@A) already defined in antlr.lib(LLkParser.obj)
libcpd.lib(locale.obj) : error LNK2005: "public: static class std::locale::id std::numpunct<char>::id" (?id@?$numpunct@D@std@@2V0locale@2@A) already defined in antlr.lib(LLkParser.obj)
LINK : warning LNK4098: defaultlib "LIBC" conflicts with use of other libs; use /NODEFAULTLIB:library
antlr.lib(CommonAST.obj) : error LNK2001: unresolved external symbol "public: void __thiscall std::_String_base::_Xran(void)const " (?_Xran@_String_base@std@@QBEXXZ)
antlr.lib(String.obj) : error LNK2001: unresolved external symbol "public: void __thiscall std::_String_base::_Xran(void)const " (?_Xran@_String_base@std@@QBEXXZ)
antlr.lib(BitSet.obj) : error LNK2001: unresolved external symbol "public: void __thiscall std::_String_base::_Xran(void)const " (?_Xran@_String_base@std@@QBEXXZ)
antlr.lib(MismatchedTokenException.obj) : error LNK2001: unresolved external symbol "public: void __thiscall std::_String_base::_Xran(void)const " (?_Xran@_String_base@std@@QBEXXZ)
antlr.lib(RecognitionException.obj) : error LNK2001: unresolved external symbol "public: void __thiscall std::_String_base::_Xran(void)const " (?_Xran@_String_base@std@@QBEXXZ)
antlr.lib(TokenBuffer.obj) : error LNK2001: unresolved external symbol "public: void __thiscall std::_String_base::_Xran(void)const " (?_Xran@_String_base@std@@QBEXXZ)
antlr.lib(ASTFactory.obj) : error LNK2001: unresolved external symbol "public: void __thiscall std::_String_base::_Xran(void)const " (?_Xran@_String_base@std@@QBEXXZ)
antlr.lib(BaseAST.obj) : error LNK2001: unresolved external symbol "public: void __thiscall std::_String_base::_Xran(void)const " (?_Xran@_String_base@std@@QBEXXZ)
antlr.lib(LLkParser.obj) : error LNK2001: unresolved external symbol "public: void __thiscall std::_String_base::_Xran(void)const " (?_Xran@_String_base@std@@QBEXXZ)
antlr.lib(Parser.obj) : error LNK2001: unresolved external symbol "public: void __thiscall std::_String_base::_Xran(void)const " (?_Xran@_String_base@std@@QBEXXZ)
antlr.lib(String.obj) : error LNK2001: unresolved external symbol "public: void __thiscall std::_String_base::_Xlen(void)const " (?_Xlen@_String_base@std@@QBEXXZ)
antlr.lib(MismatchedTokenException.obj) : error LNK2001: unresolved external symbol "public: void __thiscall std::_String_base::_Xlen(void)const " (?_Xlen@_String_base@std@@QBEXXZ)
antlr.lib(RecognitionException.obj) : error LNK2001: unresolved external symbol "public: void __thiscall std::_String_base::_Xlen(void)const " (?_Xlen@_String_base@std@@QBEXXZ)
antlr.lib(TokenBuffer.obj) : error LNK2001: unresolved external symbol "public: void __thiscall std::_String_base::_Xlen(void)const " (?_Xlen@_String_base@std@@QBEXXZ)
antlr.lib(CommonAST.obj) : error LNK2001: unresolved external symbol "public: void __thiscall std::_String_base::_Xlen(void)const " (?_Xlen@_String_base@std@@QBEXXZ)
antlr.lib(ASTFactory.obj) : error LNK2001: unresolved external symbol "public: void __thiscall std::_String_base::_Xlen(void)const " (?_Xlen@_String_base@std@@QBEXXZ)
antlr.lib(BaseAST.obj) : error LNK2001: unresolved external symbol "public: void __thiscall std::_String_base::_Xlen(void)const " (?_Xlen@_String_base@std@@QBEXXZ)
antlr.lib(LLkParser.obj) : error LNK2001: unresolved external symbol "public: void __thiscall std::_String_base::_Xlen(void)const " (?_Xlen@_String_base@std@@QBEXXZ)
antlr.lib(BitSet.obj) : error LNK2001: unresolved external symbol "public: void __thiscall std::_String_base::_Xlen(void)const " (?_Xlen@_String_base@std@@QBEXXZ)
antlr.lib(LLkParser.obj) : error LNK2001: unresolved external symbol "public: void __thiscall std::locale::facet::_Register(void)" (?_Register@facet@locale@std@@QAEXXZ)
antlr.lib(LLkParser.obj) : error LNK2001: unresolved external symbol "public: __thiscall bad_cast::bad_cast(char const *)" (??0bad_cast@@QAE@PBD@Z)
antlr.lib(LLkParser.obj) : error LNK2001: unresolved external symbol "public: class std::locale::facet const * __thiscall std::locale::_Getfacet(unsigned int)const " (?_Getfacet@locale@std@@QBEPBVfacet@12@I@Z)
antlr.lib(LLkParser.obj) : error LNK2001: unresolved external symbol "void __cdecl operator delete[](void *)" (??_V@YAXPAX@Z)
antlr.lib(LLkParser.obj) : error LNK2001: unresolved external symbol "void * __cdecl operator new[](unsigned int)" (??_U@YAPAXI@Z)
Debug/Antlr.exe : fatal error LNK1120: 7 unresolved externals
Error executing link.exe.
Antlr.exe - 27 error(s), 1 warning(s)
<mailto:antlr-interest@antlr.org> 
From min_d99 at yahoo.com  Tue Jul 19 17:07:46 2005
From: min_d99 at yahoo.com (Min Deng)
Date: Tue Jul 19 17:07:50 2005
Subject: [antlr-interest] Problems with using the C++ grammar provided at
	antlr.org.
Message-ID: <20050720000747.36355.qmail@web30808.mail.mud.yahoo.com>

Hello all,

I am looking at the C++ grammar at
http://www.antlr.org/grammar/cpp. As indicated in the
MyReadMe.txt, this grammar for ANTLR will produce a
lexer and a parser written in C++ for C++ files. I am
wondering if there is a C++ grammar for ANTLR that
produces a lexer and a parser written in Java (instead
of C++) for C++ files.

For the above C++ grammar, the author mentioned the
use of MSVC 6.0 and ANTLR for MSVC. Is MSVC required
for compiling the lexer and parser, that is, is it
possible to compile them successfully on cygwin?

I used the command "java antlr.Tool CPP_parser.g" to
generate a lexer and a parser on cygwin. After using
the command "g++ CPPLexer.cpp", a real long list of
output was produced on screen, and I could not stop or
redirect the output. Is it possible to turn off/down
the output so that I can know what is the wrong with
the compilation process?

Thanks in advance and best regards,
Min

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From dfg778 at yahoo.com.au  Tue Jul 19 17:32:26 2005
From: dfg778 at yahoo.com.au (Matthew Keene)
Date: Tue Jul 19 17:32:31 2005
Subject: [antlr-interest] Newbie questions about lexer
Message-ID: <20050720003226.17798.qmail@web34415.mail.mud.yahoo.com>

I have just started playing with ANTLR and I'm trying
to write a grammar to parse some simple mathematical
expressions for a project that I'm working on.  There
are a number of these around, including ones in the
tutorials so I used one of these as my starting point,
as shown below

lass MattLexer extends Lexer ;

options {
  charVocabulary = '\0'..'\377';
  //tokenVocabulary=XL3;  // call the vocabulary
"Java"
  //testLiterals=false;    // don't automatically test
for literals
  k=3;                   // two characters of
lookahead
}

INT : ('0'..'9')+ ;

WS
  : ( ' '
    | '\t'
    | '\f'
    )
    { $setType(Token.SKIP); } 
  ;

PLUS    : '+' ;
MINUS   : '-' ;
TIMES   : '*' ;
DIV     : '/' ;
OPENBR  : '(' ;
CLOSEBR : ')' ;

IDENT
  options {testLiterals=true;}
  : ('a'..'z'|'A'..'Z')
('a'..'z'|'A'..'Z'|'0'..'9'|'_'|'='|'.'|' ')* 
  ;
  
This worked fine, except I found a problem in that a
number of the already existing expressions use some of
the operator characters (ie '-', '+' etc) in their
names, such as this:

LP_Optimax_FOB_Clyde_T1 + (
SH_Singapore_Sydney_BMAX_Clean_WSesc_Sing-Jap_CS=VS *
Constant_0.55 ) + (
SH_Singapore_Geelong_BMAX_Clean_WSesc_Sing-Jap_CS=VS *
Constant_0.45 ) + Wharfage_Clyde Refinery

The lexer thought (quite rightly) that the identifier
SH_Singapore_Sydney_BMAX_Clean_WSesc_Sing-Jap_CS=VS
was actually an identifier called
SH_Singapore_Sydney_BMAX_Clean_WSesc_Sing, an operator
(-) and an identifier called Jap_CS=VS

The obvious answer to this is to disallow the use of
operator characters in the identifier names, but
before I made this as a rule and forced the users to
change their existing expressions, I thought that we
should be able to disambiguate this situation by
making a rule that the actual operators have to be
surrounded by whitespace.  This should be easy I
thought.  Unfortunately this has proven not to be the
case.  My initial try was to redefine the operators
like so:

PLUS    : " + " ;
MINUS   : " - " ;
TIMES   : " * " ;
DIV     : " / " ;
OPENBR  : " ( " ;
CLOSEBR : " ) " ;

This resulted in the message "line 1:25: unexpected
char: '+'", and by looking at the generated Java code,
I understand why, as the token + no longer has a match
in the case statement which parses the character
stream.

Now I have tried about a million different ways to get
this to work without success, and without boring you
with every combination I've tried I have come to the
conclusion that there's obviously something
fundamental I'm missing here.  I need to allow the
characters +,- etc as valid characters in the
expression, but only to recognise them as operators
when they're surrounded by whitespace.  Can somebody
please give me some pointers as to how I should
approach this, or where I can look for some easy to
follow documentation about why I'm having such
trouble, or if this is not possible explain why ?

Thanks in advance for your help

Matthew

Send instant messages to your online friends http://au.messenger.yahoo.com 
From mail at martin-probst.com  Wed Jul 20 00:27:36 2005
From: mail at martin-probst.com (Martin Probst)
Date: Wed Jul 20 00:27:52 2005
Subject: [antlr-interest] Problems with using the C++ grammar provided
	at antlr.org.
In-Reply-To: <20050720000747.36355.qmail@web30808.mail.mud.yahoo.com>
References: <20050720000747.36355.qmail@web30808.mail.mud.yahoo.com>
Message-ID: <1121844456.9238.14.camel@localhost.localdomain>

Did you try piping stderr to a file/less?

g++ CPPLexer.cpp 2>&1 | less

On Tue, 2005-07-19 at 17:07 -0700, Min Deng wrote:
> Hello all,
> 
> I am looking at the C++ grammar at
> http://www.antlr.org/grammar/cpp. As indicated in the
> MyReadMe.txt, this grammar for ANTLR will produce a
> lexer and a parser written in C++ for C++ files. I am
> wondering if there is a C++ grammar for ANTLR that
> produces a lexer and a parser written in Java (instead
> of C++) for C++ files.
> 
> For the above C++ grammar, the author mentioned the
> use of MSVC 6.0 and ANTLR for MSVC. Is MSVC required
> for compiling the lexer and parser, that is, is it
> possible to compile them successfully on cygwin?
> 
> I used the command "java antlr.Tool CPP_parser.g" to
> generate a lexer and a parser on cygwin. After using
> the command "g++ CPPLexer.cpp", a real long list of
> output was produced on screen, and I could not stop or
> redirect the output. Is it possible to turn off/down
> the output so that I can know what is the wrong with
> the compilation process?
> 
> Thanks in advance and best regards,
> Min
> 
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around 
> http://mail.yahoo.com 
> 

From wiggjd at lsbu.ac.uk  Wed Jul 20 04:05:13 2005
From: wiggjd at lsbu.ac.uk (David Wigg)
Date: Wed Jul 20 04:01:28 2005
Subject: [antlr-interest] Test data for a C++ parser
Message-ID: <42DE2FE9.30508@lsbu.ac.uk>

Does anyone know of a collection of test data designed to test a 
C++ parser?

I know about gcc-1.3.3 but this contains only C code.

Thanks,

David.

From Gordon.Prieur at Sun.COM  Wed Jul 20 07:16:14 2005
From: Gordon.Prieur at Sun.COM (Gordon Prieur)
Date: Wed Jul 20 07:16:23 2005
Subject: [antlr-interest] Problems with using the C++ grammar provided at
	antlr.org.
In-Reply-To: <20050720000747.36355.qmail@web30808.mail.mud.yahoo.com>
References: <20050720000747.36355.qmail@web30808.mail.mud.yahoo.com>
Message-ID: <42DE5CAE.2040809@sun.com>

Min,

    Unless you left out compiler options (below), the line you typed
would generate lots of messages. You need at least several options.
Try "g++ -c -I<path-to-antlr-cpp-header-files> -g CPPLexer.cpp".
You'll have to supply the path, but you need to tell the compiler
where the antlr cpp module's include files are. You might still
get lots of errors, but there should be fewer and more related
to mistakes in CPPLexer.cpp.

Gordon


Min Deng wrote:

>Hello all,
>
>I am looking at the C++ grammar at
>http://www.antlr.org/grammar/cpp. As indicated in the
>MyReadMe.txt, this grammar for ANTLR will produce a
>lexer and a parser written in C++ for C++ files. I am
>wondering if there is a C++ grammar for ANTLR that
>produces a lexer and a parser written in Java (instead
>of C++) for C++ files.
>
>For the above C++ grammar, the author mentioned the
>use of MSVC 6.0 and ANTLR for MSVC. Is MSVC required
>for compiling the lexer and parser, that is, is it
>possible to compile them successfully on cygwin?
>
>I used the command "java antlr.Tool CPP_parser.g" to
>generate a lexer and a parser on cygwin. After using
>the command "g++ CPPLexer.cpp", a real long list of
>output was produced on screen, and I could not stop or
>redirect the output. Is it possible to turn off/down
>the output so that I can know what is the wrong with
>the compilation process?
>
>Thanks in advance and best regards,
>Min
>
>__________________________________________________
>Do You Yahoo!?
>Tired of spam?  Yahoo! Mail has the best spam protection around 
>http://mail.yahoo.com 
>  
>
From Gordon.Prieur at Sun.COM  Wed Jul 20 07:25:24 2005
From: Gordon.Prieur at Sun.COM (Gordon Prieur)
Date: Wed Jul 20 07:25:31 2005
Subject: [antlr-interest] Problems with using the C++ grammar provided at
	antlr.org.
In-Reply-To: <20050720000747.36355.qmail@web30808.mail.mud.yahoo.com>
References: <20050720000747.36355.qmail@web30808.mail.mud.yahoo.com>
Message-ID: <42DE5ED4.3000400@sun.com>


Min Deng wrote:

>Hello all,
>
>I am looking at the C++ grammar at
>http://www.antlr.org/grammar/cpp. As indicated in the
>MyReadMe.txt, this grammar for ANTLR will produce a
>lexer and a parser written in C++ for C++ files. I am
>wondering if there is a C++ grammar for ANTLR that
>produces a lexer and a parser written in Java (instead
>of C++) for C++ files.
>  
>

I researched this and could not find one. I'm about to hook the
C++ output up to a Java program using JNI. If this is sucessfull,
its likely I'll rewrite the current C++ grammar to generate Java.
But if that happens, it wouldn't be until this next winter.

I have a strong requirement for a C/C++ parser for an IDE written
in Java (based on NetBeans). I must have a parser, although it
doesn't have to be antlr based. But so far, I haven't found anything
better to base my parser on so at least for a prototype I'm currently
working on, our parser is based on antlr's C++ parser.

Gordon

>For the above C++ grammar, the author mentioned the
>use of MSVC 6.0 and ANTLR for MSVC. Is MSVC required
>for compiling the lexer and parser, that is, is it
>possible to compile them successfully on cygwin?
>
>I used the command "java antlr.Tool CPP_parser.g" to
>generate a lexer and a parser on cygwin. After using
>the command "g++ CPPLexer.cpp", a real long list of
>output was produced on screen, and I could not stop or
>redirect the output. Is it possible to turn off/down
>the output so that I can know what is the wrong with
>the compilation process?
>
>Thanks in advance and best regards,
>Min
>
>__________________________________________________
>Do You Yahoo!?
>Tired of spam?  Yahoo! Mail has the best spam protection around 
>http://mail.yahoo.com 
>  
>
From ric.klaren at gmail.com  Wed Jul 20 08:31:58 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Wed Jul 20 08:32:00 2005
Subject: [antlr-interest] can't 'make' (2.7.5) & can't link (2.7.1)
In-Reply-To: <1684927008.20050706144125@free.fr>
References: <1684927008.20050706144125@free.fr>
Message-ID: <bc607a4e05072008313b4dd3bc@mail.gmail.com>

On 7/6/05, Ange Albertini <AngeAlbertini@free.fr> wrote:
> I've tried 2 versions of ANTLR just in case.
> 
> the 2.7.5 "configure" script just works fine (i decompress antlr-2.7.5
> zip in a new dir, under MSYS)

In general it should work fine on MSys. I guess you configured from
the directory the distribution was unzipped in (should not be wrong
but I think it was tested less)?

Could you try these steps to build outside of the source directory:

unzip antlr-2.7.5.zip
mkdir BUILD
cd BUILD
../<antlr-2.7.5-dir>/configure 
make

Are there any complaints by configure about stuff not found or errors
in writing files? Did you check config.log?

> before, with 2.7.1 :

2.7.1 is a bit old... There's newer releases with those configure
scripts. 2.7.5 has new configure scripts.

Cheers,

Ric
From min_d99 at yahoo.com  Wed Jul 20 10:01:00 2005
From: min_d99 at yahoo.com (Min Deng)
Date: Wed Jul 20 10:01:05 2005
Subject: [antlr-interest] Problems with using the C++ grammar provided at
	antlr.org.
In-Reply-To: <42DE5ED4.3000400@sun.com>
Message-ID: <20050720170100.48301.qmail@web30808.mail.mud.yahoo.com>

Hello,

By using the command 
"g++ -c -I../include *.cpp 2>&1 | less", 
I compiled the ANTLR generated Lexer and Parser
sucessfully. But when using the command 
"g++ -o CPPParser *.o -L../lib -lantlr 2>&1 | less",
I got a lot of error messages. I copied some of them
in the following. Could somebody give me a hint what
is wrong? 

BTW:
o   I am using g++ 3.2.0 on cygwin. 
o   I used the precompiled ANTLR C++ library that
exists as lib/libantlr.a.

Thanks
Min

-------------------------------------------------------------
../lib/libantlr.a(MismatchedCharException.o)(.rdata$_ZTVN5antlr23MismatchedCharE
xceptionE+0x0):MismatchedCharException.cpp: multiple
definition of `vtable for a
ntlr::MismatchedCharException'
CPPLexer.o(.data$_ZTVN5antlr23MismatchedCharExceptionE+0x0):CPPLexer.cpp:
first
defined here
../lib/libantlr.a(MismatchedCharException.o)(.rdata$_ZTVN5antlr14ANTLRExceptionE
+0x0):MismatchedCharException.cpp: multiple definition
of `vtable for antlr::ANT
LRException'
CPPLexer.o(.data$_ZTVN5antlr14ANTLRExceptionE+0x0):CPPLexer.cpp:
first defined h
ere
../lib/libantlr.a(MismatchedCharException.o)(.rdata$_ZTIN5antlr23MismatchedCharE
xceptionE+0x0):MismatchedCharException.cpp: multiple
definition of `typeinfo for
 antlr::MismatchedCharException'
CPPLexer.o(.data$_ZTIN5antlr23MismatchedCharExceptionE+0x0):CPPLexer.cpp:
first
defined here
../lib/libantlr.a(MismatchedCharException.o)(.rdata$_ZTVN5antlr11CharScannerE+0x
0):MismatchedCharException.cpp: multiple definition of
`vtable for antlr::CharSc
anner'
CPPLexer.o(.data$_ZTVN5antlr11CharScannerE+0x0):CPPLexer.cpp:
first defined here
../lib/libantlr.a(MismatchedCharException.o)(.rdata$_ZTIN5antlr11CharScannerE+0x
0):MismatchedCharException.cpp: multiple definition of
`typeinfo for antlr::Char
Scanner'
CPPLexer.o(.data$_ZTIN5antlr11CharScannerE+0x0):CPPLexer.cpp:
first defined here
../lib/libantlr.a(MismatchedCharException.o)(.rdata$_ZTIN5antlr14ANTLRExceptionE
+0x0):MismatchedCharException.cpp: multiple definition
of `typeinfo for antlr::A
NTLRException'
CPPLexer.o(.data$_ZTIN5antlr14ANTLRExceptionE+0x0):CPPLexer.cpp:
first defined h
ere
../lib/libantlr.a(MismatchedCharException.o)(.rdata$_ZTVN5antlr11TokenStreamE+0x
0):MismatchedCharException.cpp: multiple definition of
`vtable for antlr::TokenS
tream'
CPPLexer.o(.data$_ZTVN5antlr11TokenStreamE+0x0):CPPLexer.cpp:
first defined here
../lib/libantlr.a(MismatchedCharException.o)(.rdata$_ZTSN5antlr14ANTLRExceptionE
+0x0):MismatchedCharException.cpp: multiple definition
of `typeinfo name for ant
// the remaining output is elided


		
____________________________________________________
Start your day with Yahoo! - make it your home page 
http://www.yahoo.com/r/hs 
 
From wiggjd at lsbu.ac.uk  Wed Jul 20 12:41:29 2005
From: wiggjd at lsbu.ac.uk (David Wigg)
Date: Wed Jul 20 12:41:33 2005
Subject: [antlr-interest] Re: Problems with using the C++ grammar provided
	at antlr.org
Message-ID: <60131.81.86.242.223.1121888489.squirrel@webmail.lsbu.ac.uk>

Hello Min,

Our parser, CPP_parser.g, parses preprocessed files (*.i) only.

Please see MyReadMe.txt.

Test correct set up by parsing the quadratic.i preprocessed
file supplied first.

I think this parser should work with most if not all Java (for
ANTLR) and C++ (for CPP_parser) compilers.

If you find any other problems let me know.

David.

Original message:-

Message: 3
Date: Wed, 20 Jul 2005 10:01:00 -0700 (PDT)
From: Min Deng <min_d99@yahoo.com>
Subject: Re: [antlr-interest] Problems with using the C++
grammar
        provided at        antlr.org.
To: antlr-interest@antlr.org
Message-ID:
<20050720170100.48301.qmail@web30808.mail.mud.yahoo.com>
Content-Type: text/plain; charset=iso-8859-1

Hello,

By using the command
"g++ -c -I../include *.cpp 2>&1 | less",
I compiled the ANTLR generated Lexer and Parser
sucessfully. But when using the command
"g++ -o CPPParser *.o -L../lib -lantlr 2>&1 | less",
I got a lot of error messages. I copied some of them
in the following. Could somebody give me a hint what
is wrong?

BTW:
o   I am using g++ 3.2.0 on cygwin.
o   I used the precompiled ANTLR C++ library that
exists as lib/libantlr.a.

Thanks
Min



From min_d99 at yahoo.com  Wed Jul 20 13:39:21 2005
From: min_d99 at yahoo.com (Min Deng)
Date: Wed Jul 20 13:39:25 2005
Subject: [antlr-interest] Any tool that parses C++ and generates a sanitized
	intermediate form (eg, XML) ?
Message-ID: <20050720203921.33766.qmail@web30813.mail.mud.yahoo.com>

Hello all,

Quick question: Do you know of any tool that parses
C++ and generates a sanitized intermediate form,
preferably some XML representation of the C++ ASTs?
Thanks for any pointers.

Best regards,
Min


		
____________________________________________________
Start your day with Yahoo! - make it your home page 
http://www.yahoo.com/r/hs 
 
From prashant.deva at gmail.com  Wed Jul 20 15:21:57 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Wed Jul 20 15:22:19 2005
Subject: [antlr-interest] Bug in ASTFactory class
Message-ID: <41fed8f805072015213598b86d@mail.gmail.com>

There is a bug in the ASTFactory.addASTChild() method.
It is described below--

 public void addASTChild(ASTPair currentAST, AST child) {
        if (child != null) {
            if (currentAST.root == null) {
                // Make new child the current root
                currentAST.root = child;
            }
            else {
                if (currentAST.child == null) {
                    // Add new child to current root
                    currentAST.root.setFirstChild(child); //<--THIS
LINE CANT BE REACHED
                }
                else {
                    currentAST.child.setNextSibling(child);
                }
            }
            // Make new child the current child
            currentAST.child = child;              //  --|    THESE
LINES SHOULD BE IN THE
            currentAST.advanceChildToEnd(); //  --| ABOVE BRACE
        }
    }


The last 2 lines make the child *always* not null, so the root can
never set the first child.
They should be in the scope of the else statement.

Due to this bug, currently if you have a rule, with no tree symbols
(like ^), it will generate only 1 tree element, which is the root.

The correct code i belive should be- 

 public void addASTChild(ASTPair currentAST, AST child) {
        if (child != null) {
            if (currentAST.root == null) {
                // Make new child the current root
                currentAST.root = child;
            }
            else {
                if (currentAST.child == null) {
                    // Add new child to current root
                    currentAST.root.setFirstChild(child); 
                }
                else {
                    currentAST.child.setNextSibling(child);
                }
            
            // Make new child the current child
            currentAST.child = child;              
            currentAST.advanceChildToEnd(); 
          }
        }
    }

Thus by moving the last 2 lines in the 'else' scope , the
setFirstChild line can be reached.

PRASHANT
From prashant.deva at gmail.com  Wed Jul 20 15:57:17 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Wed Jul 20 15:57:33 2005
Subject: [antlr-interest] Re: Bug in ASTFactory class
In-Reply-To: <41fed8f805072015213598b86d@mail.gmail.com>
References: <41fed8f805072015213598b86d@mail.gmail.com>
Message-ID: <41fed8f80507201557783e5057@mail.gmail.com>

I have clarified with Terrence , and he says that the above
functionality is by design.

So this is not a bug.

PRASHANT

On 7/21/05, Prashant Deva <prashant.deva@gmail.com> wrote:
> There is a bug in the ASTFactory.addASTChild() method.
> It is described below--
> 
>  public void addASTChild(ASTPair currentAST, AST child) {
>         if (child != null) {
>             if (currentAST.root == null) {
>                 // Make new child the current root
>                 currentAST.root = child;
>             }
>             else {
>                 if (currentAST.child == null) {
>                     // Add new child to current root
>                     currentAST.root.setFirstChild(child); //<--THIS
> LINE CANT BE REACHED
>                 }
>                 else {
>                     currentAST.child.setNextSibling(child);
>                 }
>             }
>             // Make new child the current child
>             currentAST.child = child;              //  --|    THESE
> LINES SHOULD BE IN THE
>             currentAST.advanceChildToEnd(); //  --| ABOVE BRACE
>         }
>     }
> 
> 
> The last 2 lines make the child *always* not null, so the root can
> never set the first child.
> They should be in the scope of the else statement.
> 
> Due to this bug, currently if you have a rule, with no tree symbols
> (like ^), it will generate only 1 tree element, which is the root.
> 
> The correct code i belive should be-
> 
>  public void addASTChild(ASTPair currentAST, AST child) {
>         if (child != null) {
>             if (currentAST.root == null) {
>                 // Make new child the current root
>                 currentAST.root = child;
>             }
>             else {
>                 if (currentAST.child == null) {
>                     // Add new child to current root
>                     currentAST.root.setFirstChild(child);
>                 }
>                 else {
>                     currentAST.child.setNextSibling(child);
>                 }
> 
>             // Make new child the current child
>             currentAST.child = child;
>             currentAST.advanceChildToEnd();
>           }
>         }
>     }
> 
> Thus by moving the last 2 lines in the 'else' scope , the
> setFirstChild line can be reached.
> 
> PRASHANT
>
From jimi at temporal-wave.com  Wed Jul 20 19:09:21 2005
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed Jul 20 19:09:24 2005
Subject: [antlr-interest] Tricky vector constructor syntax
Message-ID: <B36CCC332A32904F8FA3DE134A23533608A42A@wavemachine.temporal-wave.com>

Ah the sympathy pours out.
 
1) If this is under your control, use something other than <> as your delimiters.
2) The problem is that you are trying to use < as both a binary operator and a specified of components.
 
The only good way to deal with this (IMO, there might be other ways) is to extend your expression rule for '<' something like this:
 
lt_array : OPLT  (  (gtExpr ((COMMA gtExpr (COMMA gtExpr)?)? OPGT)?) 
  | (OPEQUAL ltExpr)
 );
 
So that your first pass is just producing a syntactically valid tree. Your second parse will walk the tree and check the semantics, such that you will look for an expression bounded by < and >. Then it all falls out pretty easily unless your precedence requirements make the tree rewrite a bit more complicated.
 
Actually, I will be interested in comments from others on this one. 
 
Jim
 
PS: I guess you now know what I am doing back on this list Mr. Youngman.
 

________________________________

From: antlr-interest-bounces@antlr.org on behalf of Richard Matthias
Sent: Sun 7/17/2005 2:10 PM
To: 'ANTLR Interest'
Subject: [antlr-interest] Tricky vector constructor syntax



Hi all,

I'm trying to write a parser for a scripting language used in an online game.
The language is predictably very C-like with a few twists, most of which are
quite benign, but one is really twisting my melon.

The language supports vectors and quaternions as data types and they have
provided syntax for constructing instances of these types that make it just a
little bit tricky to parse. For example:-

vector v = <4.0 , 1.2, 0>;

Of course that's just an initializer, the same angle bracket syntax can be
used in expressions and each of the three elements of the vector can of
course be expressions also. A quaternion is for the sake of parsing just the
same except it has four components.

The grammar (which I've attached) has an expression section shamelessly
lifted from the java.g sample grammar but altered slightly to match the
original yacc grammar supplied by the makers of the game. For the moment I've
placed a rule for just the vector at the same level as the other constants
(the last alt of the postfixExpression rule) and even with a syntactic
predicate it still causes the same ambiguity warning. Does this look right or
should I try and shoehorn it in at the same level as the < operator?

I commented out some other stuff so at least without the production in
question the grammar compiles without warnings to give a fighting chance! And
the lexer isn't complete yet so it won't produce the right tokens. Oh and
please don't ridicule my choice of token names too much :)

Regards

Richard


From adrian.mihalcea at gmail.com  Wed Jul 20 23:42:51 2005
From: adrian.mihalcea at gmail.com (Adrian Mihalcea)
Date: Wed Jul 20 23:43:15 2005
Subject: [antlr-interest] comments in translation
Message-ID: <2a556f6005072023425842a48e@mail.gmail.com>

Hi all

I'm trying to build a translator that deals also with original
comments in the input language. Is it possible to pass the comments to
the next or previous token instead of just throwing them away with
SKIP? Is there a special token kind or something?

There is probably an easy well known way to do this and I would
welcome a pointer to the right place in the documentation even though
a straight hint will be very appreciated.

Thank you for the time,
Adrian
From max.andersen at jboss.com  Wed Jul 20 23:48:24 2005
From: max.andersen at jboss.com (Max Rydahl Andersen)
Date: Wed Jul 20 23:48:36 2005
Subject: [antlr-interest] antlr 2.7.x release ?
Message-ID: <op.st83uydrsj49yt@max>

Hi guys,

I sent you some patches regarding context classloading a while back.

Is there any plan to release a 2.7.x with these changes in them so users
can start using an official antlr in J2EE environments ?

Thank you ;)

/max
From adrian.mihalcea at gmail.com  Thu Jul 21 00:27:18 2005
From: adrian.mihalcea at gmail.com (Adrian Mihalcea)
Date: Thu Jul 21 00:27:40 2005
Subject: [antlr-interest] Fwd: comments in translation
In-Reply-To: <2a556f6005072023425842a48e@mail.gmail.com>
References: <2a556f6005072023425842a48e@mail.gmail.com>
Message-ID: <2a556f6005072100277305eca2@mail.gmail.com>

Sorry for being too eager. 

The documentation provides a nice discussion about the very matter. 
http://www.antlr.org/doc/streams.html
Chapter: "ANTLR Specification: Token Streams" paragraph "Token Stream Splitting"


Thank you for the good documentation :)

Adrian
From jogi1978 at gmx.de  Thu Jul 21 00:45:22 2005
From: jogi1978 at gmx.de (=?iso-8859-1?B?SvZyZyBI5GxrZXI=?=)
Date: Thu Jul 21 00:45:28 2005
Subject: [antlr-interest] Stack overflow problem with C++
In-Reply-To: <42DD5E54.1010103@cyconix.com>
Message-ID: <20050721074525.CF249DCC21@www.antlr.org>

Hi,

thank you for clarification... i didnt thought that the reference check
during deallocation is the problem. But sure, if a recursive algorithm walks
all the siblings to check whether the objects can be deallocated... But
there are solutions now as i know the problem!

Thank you!
J?rg

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Paul Johnson
> Sent: Tuesday, July 19, 2005 10:11 PM
> To: antlr-interest@antlr.org
> Subject: Re: [antlr-interest] Stack overflow problem with C++
> 
> Ric Klaren wrote:
> > Jorg Halker wrote:
> > 
> >>Okay, i tried it with linux (feodora core 2) and gcc (v3.2.2). It 
> >>looks like that the stack is larger there. So if i count 
> until 150000 
> >>i have the same problem with linux and gcc: segmentation 
> fault/stack 
> >>overflow. But if i set up a parser which parses a file and 
> creates an 
> >>ast with the same amount of ast nodes like the loop from the code 
> >>snippet does, everything is fine and the program exits well.
> >>
> >>Is it intended that the loop creates objects on the stack?? 
> am i wrong 
> >>if i think that the stack should not overflow because the objects 
> >>should be created on the heap??
> > 
> > 
> > Hmmm my guess is then that it's the reference counter that recurses 
> > too deep while destroying the tree structure. Note that the 
> structure 
> > you made is very deep probably deeper than any 'real' AST would be.
> > 
> > Destroying the tree 'manually' with a stack you yourself 
> maintain on 
> > the heap might be a solution. Actually I now recall a 
> person running 
> > into this as well but that was a few years ago.
> 
> Just to clarify:
> 
> you create 'first' on the stack; you then add 150K siblings. 
> When main terminates, the destructor for 'first' is called. 
> This deletes the first AST node, but it first has to delete 
> the 'right' field (ie. the sibling). Before deleting sibling, 
> we have to delete the second sibling, and so on; the delete 
> is therefore recursive. This is necessary because you have to 
> decrement a reference count before deciding whether or not to 
> delete a node; this means that the process has to be 
> top-down, rather than bottom-up. The overflow you're seeing 
> is simply the call stack for the recursive destruction. I 
> checked this in valgrind, which shows that your test has a 
> negligible stack until the end of the program, when it 
> suddenly explodes to 20MB.
> 
> If you need to fix this, change your 'first' declaration to:
> 
> RefCommonAST *first = new RefCommonAST( new CommonAST());
> 
> so that the tree isn't deleted on program exit.
> 
> HTH
> 
> Paul
> 

From xiaogao at mails.tsinghua.edu.cn  Thu Jul 21 02:44:13 2005
From: xiaogao at mails.tsinghua.edu.cn (Xia Gao)
Date: Thu Jul 21 02:41:50 2005
Subject: [antlr-interest] about unicode handling
Message-ID: <20050721094147.152F3DCC21@www.antlr.org>

SGVsbG8sIGV2ZXJ5b25lIQ0KIAkJCQkNCiAgICBJJ20gQ2hpbmVzZSwgSSB0cnkgdG8gaGFuZGxl
IG15IG5hdGl2ZSBsYW5ndWFnZSBjaGFyYWN0ZXJzIGluIGFudGxyLiBGb3IgZXhhbXBsZSwgd2hl
biBJIGhhbmRsZSBhbmQgcHJpbnQgc3RyaW5ncyBjb250YWluaW5nIENoaW5lc2UgY2hhcmFjdGVy
cyB1c2luZyBqYXZhIG9yIEMjLCBpdCBpcyB3cm9uZzsgYnV0IHVzaW5nIEMrKyBpdCdzIHJpZ2h0
LiBDYW4gYW50bHIncyBqYXZhIGFuZCBDIyBydW50aW1lIHN1cHBvcnQgdW5pY29kZT8gSWYgbm90
LCBob3cgY2FuIEkgbGV0IGl0IHN1cHBvcnQ/IFRoYW5rIHlvdSENCg0KoaGhoaGhoaGhoaGhoaGh
oVhpYSBHYW8NCqGhoaGhoaGhoaGhoaGhoaF4aWFvZ2FvQG1haWxzLnRzaW5naHVhLmVkdS5jbg0K
oaGhoaGhoaGhoaGhoaGhoaGhoaEyMDA1LTA3LTIxDQo=

From ric.klaren at gmail.com  Thu Jul 21 03:22:49 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Thu Jul 21 03:23:12 2005
Subject: [antlr-interest] antlr 2.7.x release ?
In-Reply-To: <op.st83uydrsj49yt@max>
References: <op.st83uydrsj49yt@max>
Message-ID: <bc607a4e050721032263ef3a7@mail.gmail.com>

On 7/21/05, Max Rydahl Andersen <max.andersen@jboss.com> wrote:
> Hi guys,
> 
> I sent you some patches regarding context classloading a while back.
> 
> Is there any plan to release a 2.7.x with these changes in them so users
> can start using an official antlr in J2EE environments ?

For a still non official, but slightly more official than local
patches version, there's repository  snapshots available from:

http://pts14043.pts.nl/antlr/

There were a few remarks bounced around to make a new release nothing
definite yet though.

Cheers,

Ric
From scott at javadude.com  Thu Jul 21 03:34:44 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Thu Jul 21 03:35:29 2005
Subject: [antlr-interest] antlr 2.7.x release ?
In-Reply-To: <op.st83uydrsj49yt@max>
Message-ID: <200507211122.j6LBLxik009557@s2.eroute.net>

I've made the changes for ANTLR 2.7.6 and sent them to Ter. He's been a tad
busy with 3.0, though.

I've got an unofficial 2.7.6 with the latest ANTLR-Eclipse plugin that has
the changes. If you'd like to give that a try and see how it works for you,
feel free.

See http://antlreclipse.sourceforge.net/

Hope this helps!
-- Scott


> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Max 
> Rydahl Andersen
> Sent: Thursday, July 21, 2005 2:48 AM
> To: antlr-interest.antlr.org
> Subject: [antlr-interest] antlr 2.7.x release ?
> 
> Hi guys,
> 
> I sent you some patches regarding context classloading a while back.
> 
> Is there any plan to release a 2.7.x with these changes in 
> them so users can start using an official antlr in J2EE environments ?
> 
> Thank you ;)
> 
> /max
> 


From max.andersen at jboss.com  Thu Jul 21 03:49:28 2005
From: max.andersen at jboss.com (Max Rydahl Andersen)
Date: Thu Jul 21 03:49:56 2005
Subject: [antlr-interest] antlr 2.7.x release ?
In-Reply-To: <200507211122.j6LBLxik009557@s2.eroute.net>
References: <200507211122.j6LBLxik009557@s2.eroute.net>
Message-ID: <op.st9e0qqrsj49yt@max>


well I have a build myself, so that is not the issue ;)

The issue is just that we (Hibernate) get contacted on why
we recommend to use an unofficial build - and I would like that
not to be the case.

The fixes I made is critical for having antlr behave well in J2EE and
other dynamic classloading scenarios, so until then I have to recommend
our unofficial build.

cheers,
/max

> I've made the changes for ANTLR 2.7.6 and sent them to Ter. He's been a  
> tad
> busy with 3.0, though.
>
> I've got an unofficial 2.7.6 with the latest ANTLR-Eclipse plugin that  
> has
> the changes. If you'd like to give that a try and see how it works for  
> you,
> feel free.
>
> See http://antlreclipse.sourceforge.net/
>
> Hope this helps!
> -- Scott
>
>
>> -----Original Message-----
>> From: antlr-interest-bounces@antlr.org
>> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Max
>> Rydahl Andersen
>> Sent: Thursday, July 21, 2005 2:48 AM
>> To: antlr-interest.antlr.org
>> Subject: [antlr-interest] antlr 2.7.x release ?
>>
>> Hi guys,
>>
>> I sent you some patches regarding context classloading a while back.
>>
>> Is there any plan to release a 2.7.x with these changes in
>> them so users can start using an official antlr in J2EE environments ?
>>
>> Thank you ;)
>>
>> /max
>>
>
>


From liigo at hotpop.com  Thu Jul 21 03:50:38 2005
From: liigo at hotpop.com (liigo)
Date: Thu Jul 21 03:50:50 2005
Subject: [antlr-interest] Help me,
	how to create my own programming language using antlr?
Message-ID: <op.st6tpjjeo3wyor@prog6>


Help me, how to create my own programming language using antlr?

Thanks,
liigo

From gt54-antlr at cyconix.com  Thu Jul 21 05:53:09 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Thu Jul 21 05:53:17 2005
Subject: [antlr-interest] ASTFrame usage?
Message-ID: <42DF9AB5.8070308@cyconix.com>

I'd like to use ASTFrame with C++, if possible, but first I'm trying to 
get a Java example to work. However, I know almost exactly nothing about 
Java, and I've spent a couple of hours trying to get the example in the 
manual working:

> public static void main(String args[]) {
>   // Create the tree nodes
>   ASTFactory factory = new ASTFactory();
>   CommonAST r = (CommonAST)factory.create(0, "ROOT");
>   r.addChild((CommonAST)factory.create(0, "C1"));
>   r.addChild((CommonAST)factory.create(0, "C2"));
>   r.addChild((CommonAST)factory.create(0, "C3"));
>   ASTFrame frame = new ASTFrame("AST JTree Example", r);
>   frame.setVisible(true);
> }

Could someone please manage an idiot's guide to making this code do 
something? So far, I've turned it into:

----------------------------------
import antlr.ASTFactory;
import antlr.CommonAST;
import antlr.ASTFrame;

class main {
    public static void main(String args[]) {
// Create the tree nodes
       ASTFactory factory = new ASTFactory();
       CommonAST r = (CommonAST)factory.create(0, "ROOT");
       r.addChild((CommonAST)factory.create(0, "C1"));
       r.addChild((CommonAST)factory.create(0, "C2"));
       r.addChild((CommonAST)factory.create(0, "C3"));
       ASTFrame frame = new ASTFrame("AST JTree Example", r);
       frame.setVisible(true);
    }
}
----------------------------------

If I compile this as

javac main.java -classpath path-to-antlr/lib/antlr.jar

Then java 1.5 tells me that it can't import antlr.ASTFrame ("cannot find 
symbol"). I can't compile with 1.4 at all ("class file has wrong version 
49.0, should be 48.0").

Thanks -

Paul

From kverma at hotmail.com  Thu Jul 21 07:04:19 2005
From: kverma at hotmail.com (Kamal Verma)
Date: Thu Jul 21 07:04:22 2005
Subject: [antlr-interest] newbie help
Message-ID: <BAY12-F208F2688F3783A9F44D611C9D60@phx.gbl>

Hi

I am new to ANTLR. Following is what I am trying to establish. Please help.

C# preprocessor parser. Which can parse,

     * preprocessor directives

What I really what to achive is parse a c# program, evaluate #if IDENT and 
select the pieces of code that are enclosed it. Another key thing I am 
looking at is, the selected code fragments should be able to preserve 
white-space. Any help will be greatly appreciated.

Thanks in advance.

-K

Preprocessor directives like following,

#define IDENT

#undef IDENT

#if IDENT_EXPRESSION

     ..code..

#elif IDENT_EXPRESSION

    ..code..

#else

    ..code..

#endif

IDENT_EXPRESSION contains operators like

!, ==, !=,&& and ||

#error _text_
#warning _text_

_________________________________________________________________
Dont just search. Find. Check out the new MSN Search! 
http://search.msn.click-url.com/go/onm00200636ave/direct/01/

From ric.klaren at gmail.com  Thu Jul 21 07:35:38 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Thu Jul 21 07:35:57 2005
Subject: [antlr-interest] ASTFrame usage?
In-Reply-To: <42DF9AB5.8070308@cyconix.com>
References: <42DF9AB5.8070308@cyconix.com>
Message-ID: <bc607a4e05072107351ee8fd86@mail.gmail.com>

On 7/21/05, Paul Johnson <gt54-antlr@cyconix.com> wrote:
> I'd like to use ASTFrame with C++, if possible, but first I'm trying to
> get a Java example to work. However, I know almost exactly nothing about
> Java, and I've spent a couple of hours trying to get the example in the
> manual working:

Hmmm dunno how easy it is to spawn a piece of java UI from a C++ process.

> > public static void main(String args[]) {
...<snip>
> > }
> 
> Could someone please manage an idiot's guide to making this code do
> something? So far, I've turned it into:
> 
> ----------------------------------
> import antlr.ASTFactory;
> import antlr.CommonAST;
> import antlr.ASTFrame;

You got the wrong namespace:

import antlr.debug.misc.ASTFrame;

If you happen to have eclipse running then using that for java stuff
makes life a bit easier. Although it might stop you from really
getting to know what you're doing.

> javac main.java -classpath path-to-antlr/lib/antlr.jar

That should be ok I think.

> Then java 1.5 tells me that it can't import antlr.ASTFrame ("cannot find
> symbol"). I can't compile with 1.4 at all ("class file has wrong version
> 49.0, should be 48.0").

For the 1.4 stuff you'd probably have to rebuild the antlr.jar with
JDK 1.4 (or add for 1.5 the options to make 1.4 compatible stuff)

Cheers,

Ric
From madcapmaggie at yahoo.com  Thu Jul 21 08:24:45 2005
From: madcapmaggie at yahoo.com (Peggy Fieland)
Date: Thu Jul 21 08:24:46 2005
Subject: Fwd: [antlr-interest] ANTLR, C++ and UNICODE
In-Reply-To: <bc607a4e05072008342818b82d@mail.gmail.com>
Message-ID: <20050721152445.28225.qmail@web30215.mail.mud.yahoo.com>



--- Ric Klaren <ric.klaren@gmail.com> wrote:

> On 7/20/05, Peggy Fieland <madcapmaggie@yahoo.com>
> wrote:
> > I've got your unicode utf 8 stuff working with a
> > parser and lexer that encodes/decodes sql where
> the
> > identifiers can be in another language.  I've
> tweaked
> > a few things (had to add a couple of routines).
> 
> Nice to hear :) Any opinions on this approach?

It's worked pretty well so far.  It's pretty
straightforward, which is a blessing as far as I am
concerned.

> 
> > I'd forward the files to you but I'm laid up this
> week
> > after foot surgery.
> 
> Get well! I'll look forward to the files.
> 

Thanks.

I hope, BTW, that the unicode stuff is part of the
next official release of ANTLR.

> Cheers,
> 
> Ric
> 

Peggy

From gt54-antlr at cyconix.com  Thu Jul 21 08:31:18 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Thu Jul 21 08:31:26 2005
Subject: [antlr-interest] ASTFrame usage?
In-Reply-To: <bc607a4e05072107351ee8fd86@mail.gmail.com>
References: <42DF9AB5.8070308@cyconix.com>
	<bc607a4e05072107351ee8fd86@mail.gmail.com>
Message-ID: <42DFBFC6.8090002@cyconix.com>

Ric Klaren wrote:
> On 7/21/05, Paul Johnson <gt54-antlr@cyconix.com> wrote:
> 
>>I'd like to use ASTFrame with C++, if possible, but first I'm trying to
>>get a Java example to work. However, I know almost exactly nothing about
>>Java, and I've spent a couple of hours trying to get the example in the
>>manual working:
> 
> 
> Hmmm dunno how easy it is to spawn a piece of java UI from a C++ process.

I was going to worry about that if I could get a java example to work. 
Since I can't do the latter, I won't bother with the former. I borrowed 
these imports from tinybasic.java:

> import java.io.*;
> import antlr.collections.AST;
> import antlr.collections.impl.*;
> import antlr.debug.misc.*;
> import antlr.*;

The new code compiles Ok with with javac, but the interpreter always 
comes up with the same error whatever I do ("Exception in thread "main" 
java.lang.NoClassDefFoundError: antlr/collections/AST").

<whine>

Who on earth actually uses Java anyway? ANTLR has one of the steepest 
learning curves of any tool or language I've ever used; learning Flex 
and Bison is trivial by comparison. Forcing users to be Java-literate as 
well really doesn't help.

</whine>

Paul

From karinaval at gmail.com  Thu Jul 21 12:36:28 2005
From: karinaval at gmail.com (karina valdivia)
Date: Thu Jul 21 12:36:49 2005
Subject: [antlr-interest] run error
Message-ID: <77ae335205072112364ccc9c1a@mail.gmail.com>

While trying to run "antlr-2.7.3.jar file" on my computer gave me an error 
message: 
 
java.lang.UnsupportedClassVersionError:
*antlr/TokenStreamException*(Unsupported
major.minor version 49.0)

at java.lang.ClassLoader.defineClass0(*Native Method*)

at java.lang.ClassLoader.defineClass(Unknown Source)

at java.security.SecureClassLoader.defineClass(Unknown Source)

at java.net.URLClassLoader.defineClass(Unknown Source)

at java.net.URLClassLoader.access$100(Unknown Source)

at java.net.URLClassLoader$1.run(Unknown Source)

at java.security.AccessController.doPrivileged(*Native Method*)

at java.net.URLClassLoader.findClass(Unknown Source)

at java.lang.ClassLoader.loadClass(Unknown Source)

at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)

at java.lang.ClassLoader.loadClass(Unknown Source)

at java.lang.ClassLoader.loadClassInternal(Unknown Source)

Exception in thread "main" 
I use j2sdk1.4.2.
What could i do?
 Thanks
 Karina
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050721/ae92aaeb/attachment.html
From gt54-antlr at cyconix.com  Thu Jul 21 13:03:09 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Thu Jul 21 13:03:15 2005
Subject: [antlr-interest] run error
In-Reply-To: <77ae335205072112364ccc9c1a@mail.gmail.com>
References: <77ae335205072112364ccc9c1a@mail.gmail.com>
Message-ID: <42DFFF7D.8040200@cyconix.com>

karina valdivia wrote:
> While trying to run "antlr-2.7.3.jar file" on my computer gave me an 
> error message:
> 
> java.lang.UnsupportedClassVersionError:
> 
> _antlr/TokenStreamException_ (Unsupported major.minor version 49.0)

This was compiled with java 1.5

> I use j2sdk1.4.2.
> What could i do?

You'll have to either install and use 1.5, or rebuild antlr with 1.4.

HTH

Paul

From kkrishnan at ispheres.com  Thu Jul 21 17:23:54 2005
From: kkrishnan at ispheres.com (Kal Krishnan)
Date: Thu Jul 21 17:24:33 2005
Subject: [antlr-interest] ANTLR related job opportunity - SF Bay Area
Message-ID: <FAB00A8DC59FAB42B13C2B3B0F6877010489DEF5@ehost011-3.exch011.intermedia.net>

Pardon me if this is an inappropriate posting, but the job market being
what it is, I thought someone on the list might appreciate it...

 

We are looking for a strong senior server-side Java developer, who is
interested in, and has familiarity with Java-based compiler technology,
including ANTLR. If you are interested, please email your resume to:
jobs@ispheres.com. Principals only, please, no relocation, US employment
eligible candidates only.

 

Thanks,

 

-Kal.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050721/e1243bcb/attachment.html
From xavier.benveniste at free.fr  Fri Jul 22 01:40:24 2005
From: xavier.benveniste at free.fr (Xavier Benveniste)
Date: Fri Jul 22 01:39:57 2005
Subject: [antlr-interest] ANTLR or java
Message-ID: <001201c58e99$0119b690$79f53951@thedude>

Hi,

In a java program that use Hibernate for persistency, I have to parse String expressions and evaluate them.

There are only some remarkable terms like :
- IF, THEN, ELSE, ENDIF
- test operators : EQUALS, GREATER...
- logic operators : AND, OR
- math operators : PLUS, MINUS,..
- SQL statements.

As I'm newbie to ANTLR, I wonder whether I have to write a grammar and use ANTLR,
or simply use java (because I don't want to rewrite code like a function to add integers...).
Can anyone give me a starting point to achieve this ?
If the right choice is to use ANTLR, can anyone give me a brief description of the grammar I should develop ?

Regards,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050722/ac187bef/attachment.html
From darthia at gmail.com  Fri Jul 22 02:29:18 2005
From: darthia at gmail.com (=?ISO-8859-1?Q?Jos=E9_Mar=EDa_Garc=EDa_Rodr=EDguez?=)
Date: Fri Jul 22 02:29:30 2005
Subject: [antlr-interest] about unicode handling
In-Reply-To: <20050721094147.152F3DCC21@www.antlr.org>
References: <20050721094147.152F3DCC21@www.antlr.org>
Message-ID: <87ca585205072202297b6c254c@mail.gmail.com>

I'm not sure, but I think you need to rebuild both libraries (C# and
Java) in order to handle unicode chars. At least, it was necessary in
older versions (2.7.3), AFAIK.

I've got a manual at home that explains the process to enable unicode
in ANTLR, but I'm not going to home until August, sorry ^_^

Someone else may help you. If it's not the case, tell me and I'll look
for that manual back from holidays.

Regards,

Jos? Mar?a Garc?a Rodr?guez

2005/7/21, Xia Gao <xiaogao@mails.tsinghua.edu.cn>:
> Hello, everyone!
> 
>    I'm Chinese, I try to handle my native language characters in antlr. For example, when I handle and print strings containing Chinese characters using java or C#, it is wrong; but using C++ it's right. Can antlr's java and C# runtime support unicode? If not, how can I let it support? Thank you!
> 
> Xia Gao
> xiaogao@mails.tsinghua.edu.cn
> 2005-07-21
>
From loic.lefevre at bnpparibas.com  Fri Jul 22 03:23:01 2005
From: loic.lefevre at bnpparibas.com (loic.lefevre@bnpparibas.com)
Date: Fri Jul 22 03:23:11 2005
Subject: [antlr-interest] Warning/ambiguity suppression
Message-ID: <OFF2BD72FC.7419B1D8-ONC1257046.00381502-C1257046.00390A50@bnpparibas.com>


Hello,
I'm currently working on a grammar to handle expressions.
I've used the Java grammar part dealing with expressions.
Finally, my grammar is finished but I've got warnings:

antlr:prepare-filesystem:
    [mkdir] Created dir: headless\target\generated\antlr
ANTLR Parser Generator   Version 2.7.5 (20050128)   1989-2005 jGuru.com
RosterExpression.g: warning:lexical nondeterminism between rules TRUE and
IDENT upon
RosterExpression.g:     k==1:'t'
RosterExpression.g:     k==2:'r'
RosterExpression.g:     k==3:'u'
RosterExpression.g:     k==4:'e'
RosterExpression.g: warning:lexical nondeterminism between rules FALSE and
IDENT upon
RosterExpression.g:     k==1:'f'
RosterExpression.g:     k==2:'a'
RosterExpression.g:     k==3:'l'
RosterExpression.g:     k==4:'s'

Can someone explain me how to suppress them?
I've tried to change the k option, but it doesn't wok.

See grammar in attachment:

(See attached file: RosterExpression.g)

Lo?c

This message and any attachments (the "message") is
intended solely for the addressees and is confidential. 
If you receive this message in error, please delete it and 
immediately notify the sender. Any use not in accord with 
its purpose, any dissemination or disclosure, either whole 
or partial, is prohibited except formal approval. The internet
can not guarantee the integrity of this message. 
BNP PARIBAS (and its subsidiaries) shall (will) not 
therefore be liable for the message if modified. 

                ---------------------------------------------

Ce message et toutes les pieces jointes (ci-apres le 
"message") sont etablis a l'intention exclusive de ses 
destinataires et sont confidentiels. Si vous recevez ce 
message par erreur, merci de le detruire et d'en avertir 
immediatement l'expediteur. Toute utilisation de ce 
message non conforme a sa destination, toute diffusion 
ou toute publication, totale ou partielle, est interdite, sauf 
autorisation expresse. L'internet ne permettant pas 
d'assurer l'integrite de ce message, BNP PARIBAS (et ses
filiales) decline(nt) toute responsabilite au titre de ce 
message, dans l'hypothese ou il aurait ete modifie.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: =?ISO-8859-1?Q?RosterExpression=2Eg?=
Type: application/octet-stream
Size: 14111 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050722/c72279a7/ISO-8859-1QRosterExpression2Eg-0001.obj
From dragonoe at mcmaster.ca  Fri Jul 22 05:06:21 2005
From: dragonoe at mcmaster.ca (Olivier Dragon)
Date: Fri Jul 22 05:02:49 2005
Subject: [antlr-interest] Warning/ambiguity suppression
In-Reply-To: <OFF2BD72FC.7419B1D8-ONC1257046.00381502-C1257046.00390A50@bnpparibas.com>
References: <OFF2BD72FC.7419B1D8-ONC1257046.00381502-C1257046.00390A50@bnpparibas.com>
Message-ID: <20050722120621.GA9212@dragon.homelinux.org>

You could use predicates and match a non-identifier character after the
word (you could have a variable named trueThat or falseData).

TRUE:
	("true" ~(IDENTCHAR))=> "true" ;
FALSE:
	("false" ~(IDENTCHAR))=> "false" ;

protected IDENTCHAR:
	('a'..'z'|'A'..'Z'|'0'..'9'|'_') ;

On Fri, Jul 22, 2005 at 12:23:01PM +0200, loic.lefevre@bnpparibas.com wrote:
> 
> Hello,
> I'm currently working on a grammar to handle expressions.
> I've used the Java grammar part dealing with expressions.
> Finally, my grammar is finished but I've got warnings:
> 
> antlr:prepare-filesystem:
>     [mkdir] Created dir: headless\target\generated\antlr
> ANTLR Parser Generator   Version 2.7.5 (20050128)   1989-2005 jGuru.com
> RosterExpression.g: warning:lexical nondeterminism between rules TRUE and
> IDENT upon
> RosterExpression.g:     k==1:'t'
> RosterExpression.g:     k==2:'r'
> RosterExpression.g:     k==3:'u'
> RosterExpression.g:     k==4:'e'
> RosterExpression.g: warning:lexical nondeterminism between rules FALSE and
> IDENT upon
> RosterExpression.g:     k==1:'f'
> RosterExpression.g:     k==2:'a'
> RosterExpression.g:     k==3:'l'
> RosterExpression.g:     k==4:'s'
> 
> Can someone explain me how to suppress them?
> I've tried to change the k option, but it doesn't wok.
> 
> See grammar in attachment:
> 
> (See attached file: RosterExpression.g)
> 
> Lo?c
> 
> This message and any attachments (the "message") is
> intended solely for the addressees and is confidential. 
> If you receive this message in error, please delete it and 
> immediately notify the sender. Any use not in accord with 
> its purpose, any dissemination or disclosure, either whole 
> or partial, is prohibited except formal approval. The internet
> can not guarantee the integrity of this message. 
> BNP PARIBAS (and its subsidiaries) shall (will) not 
> therefore be liable for the message if modified. 
> 
>                 ---------------------------------------------
> 
> Ce message et toutes les pieces jointes (ci-apres le 
> "message") sont etablis a l'intention exclusive de ses 
> destinataires et sont confidentiels. Si vous recevez ce 
> message par erreur, merci de le detruire et d'en avertir 
> immediatement l'expediteur. Toute utilisation de ce 
> message non conforme a sa destination, toute diffusion 
> ou toute publication, totale ou partielle, est interdite, sauf 
> autorisation expresse. L'internet ne permettant pas 
> d'assurer l'integrite de ce message, BNP PARIBAS (et ses
> filiales) decline(nt) toute responsabilite au titre de ce 
> message, dans l'hypothese ou il aurait ete modifie.
> 



-- 
          __-/|    ? ?     |\-__
     __--/  /  \   (^^)   /  \  \--__
  _-/   /   /  /\ / ( )  /\  \   \   \-_
 /  /   /  /  /  (   ^^ ~  \  \  \   \  \
 / Oli Dragon    ( dragonoe@mcmaster.ca \
/  B.Eng. Sfwr   (     )    \    \  \    \
/  /  /    /__--_ (   ) __--__\    \  \  \
|  /  /  _/        \_ \_       \_  \  \  |
 \/  / _/            \_ \_       \_ \  \/
  \_/ /                -\_\        \ \_/
    \/                    )         \/
                        *~
        ___--<***************>--___
       [http://dragon.homelinux.org]
        ~~~--<***************>--~~~
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050722/d9a07d9e/attachment.bin
From nbsherid at secsme.org.au  Fri Jul 22 05:21:19 2005
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Fri Jul 22 05:21:23 2005
Subject: [antlr-interest] Warning/ambiguity suppression
In-Reply-To: <20050722120621.GA9212@dragon.homelinux.org>
Message-ID: <000a01c58eb7$ddd377b0$0500a8c0@nigel>



> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Olivier Dragon
> Sent: Friday, 22 July 2005 10:06 PM
> To: antlr-interest@antlr.org
> Subject: Re: [antlr-interest] Warning/ambiguity suppression
> 
> You could use predicates and match a non-identifier character after the
> word (you could have a variable named trueThat or falseData).
> 
> TRUE:
> 	("true" ~(IDENTCHAR))=> "true" ;
> FALSE:
> 	("false" ~(IDENTCHAR))=> "false" ;
> 
> protected IDENTCHAR:
> 	('a'..'z'|'A'..'Z'|'0'..'9'|'_') ;
> 

Alternatively, you could make "true" and "false" literals to be tested, by
moving them out of the lexer and into the parser.

Remove these from lexer:

TRUE:"true";
FALSE:"false";


And modify this in parser:

primaryExpression
	:	"true"
	  | "false"
    | constant
    |	identPrimary
	  |	LPAREN! logicalOrExpression RPAREN!
	;


They will be treated as IDENT tokens until the test for literals, and then
converted to "literal_TRUE" and "literal_FALSE" tokens. Consequently, you
might need to modify the tokens{} section of your parser accordingly, since
you are generating a Heterogeneous AST.

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435


From loic.lefevre at bnpparibas.com  Fri Jul 22 05:23:02 2005
From: loic.lefevre at bnpparibas.com (loic.lefevre@bnpparibas.com)
Date: Fri Jul 22 05:23:10 2005
Subject: =?ISO-8859-1?Q?R=E9f=2E_=3A_Re=3A_[antlr-interest]_Warning=2Fambiguity?=
	=?ISO-8859-1?Q?_suppression?=
In-Reply-To: <20050722120621.GA9212@dragon.homelinux.org>
Message-ID: <OFF3B391DD.74FEB7FF-ONC1257046.0043C5B0-C1257046.0044073B@bnpparibas.com>


Good idea but when I do that, I get:

ANTLR Parser Generator   Version 2.7.5 (20050128)   1989-2005 jGuru.com
RosterExpression.g:360:27: This subrule cannot be inverted
.  Only subrules of the form:
    (T1|T2|T3...) or
    ('c1'|'c2'|'c3'...)
may be inverted (ranges are also allowed).
RosterExpression.g:362:28: This subrule cannot be inverted
.  Only subrules of the form:
    (T1|T2|T3...) or
    ('c1'|'c2'|'c3'...)
may be inverted (ranges are also allowed).
Exiting due to errors.

I also tried

TRUE : ("true" ESC) => "true";

TRUE: ("true" ESC) => "true";
FALSE: ("false" ESC) => "false";

but then I get the same (first) warnings.

Lo?c




Internet
dragonoe@mcmaster.ca@antlr.org - 22/07/2005 14:06


Envoy? par :      antlr-interest-bounces@antlr.org



Pour : antlr-interest

cc :


Objet :     Re: [antlr-interest] Warning/ambiguity suppression

You could use predicates and match a non-identifier character after the
word (you could have a variable named trueThat or falseData).

TRUE:
             ("true" ~(IDENTCHAR))=> "true" ;
FALSE:
             ("false" ~(IDENTCHAR))=> "false" ;

protected IDENTCHAR:
             ('a'..'z'|'A'..'Z'|'0'..'9'|'_') ;

On Fri, Jul 22, 2005 at 12:23:01PM +0200, loic.lefevre@bnpparibas.com
wrote:
>
> Hello,
> I'm currently working on a grammar to handle expressions.
> I've used the Java grammar part dealing with expressions.
> Finally, my grammar is finished but I've got warnings:
>
> antlr:prepare-filesystem:
>     [mkdir] Created dir: headless\target\generated\antlr
> ANTLR Parser Generator   Version 2.7.5 (20050128)   1989-2005 jGuru.com
> RosterExpression.g: warning:lexical nondeterminism between rules TRUE and
> IDENT upon
> RosterExpression.g:     k==1:'t'
> RosterExpression.g:     k==2:'r'
> RosterExpression.g:     k==3:'u'
> RosterExpression.g:     k==4:'e'
> RosterExpression.g: warning:lexical nondeterminism between rules FALSE
and
> IDENT upon
> RosterExpression.g:     k==1:'f'
> RosterExpression.g:     k==2:'a'
> RosterExpression.g:     k==3:'l'
> RosterExpression.g:     k==4:'s'
>
> Can someone explain me how to suppress them?
> I've tried to change the k option, but it doesn't wok.
>
> See grammar in attachment:
>
> (See attached file: RosterExpression.g)
>
> Lo?c
>
> This message and any attachments (the "message") is
> intended solely for the addressees and is confidential.
> If you receive this message in error, please delete it and
> immediately notify the sender. Any use not in accord with
> its purpose, any dissemination or disclosure, either whole
> or partial, is prohibited except formal approval. The internet
> can not guarantee the integrity of this message.
> BNP PARIBAS (and its subsidiaries) shall (will) not
> therefore be liable for the message if modified.
>
>                 ---------------------------------------------
>
> Ce message et toutes les pieces jointes (ci-apres le
> "message") sont etablis a l'intention exclusive de ses
> destinataires et sont confidentiels. Si vous recevez ce
> message par erreur, merci de le detruire et d'en avertir
> immediatement l'expediteur. Toute utilisation de ce
> message non conforme a sa destination, toute diffusion
> ou toute publication, totale ou partielle, est interdite, sauf
> autorisation expresse. L'internet ne permettant pas
> d'assurer l'integrite de ce message, BNP PARIBAS (et ses
> filiales) decline(nt) toute responsabilite au titre de ce
> message, dans l'hypothese ou il aurait ete modifie.
>



--
          __-/|    ? ?     |\-__
     __--/  /  \   (^^)   /  \  \--__
  _-/   /   /  /\ / ( )  /\  \   \   \-_
 /  /   /  /  /  (   ^^ ~  \  \  \   \  \
 / Oli Dragon    ( dragonoe@mcmaster.ca \
/  B.Eng. Sfwr   (     )    \    \  \    \
/  /  /    /__--_ (   ) __--__\    \  \  \
|  /  /  _/        \_ \_       \_  \  \  |
 \/  / _/            \_ \_       \_ \  \/
  \_/ /                -\_\        \ \_/
    \/                    )         \/
                        *~
        ___--<***************>--___
       [http://dragon.homelinux.org]
        ~~~--<***************>--~~~
(See attached file: signature.asc)

This message and any attachments (the "message") is
intended solely for the addressees and is confidential. 
If you receive this message in error, please delete it and 
immediately notify the sender. Any use not in accord with 
its purpose, any dissemination or disclosure, either whole 
or partial, is prohibited except formal approval. The internet
can not guarantee the integrity of this message. 
BNP PARIBAS (and its subsidiaries) shall (will) not 
therefore be liable for the message if modified. 

                ---------------------------------------------

Ce message et toutes les pieces jointes (ci-apres le 
"message") sont etablis a l'intention exclusive de ses 
destinataires et sont confidentiels. Si vous recevez ce 
message par erreur, merci de le detruire et d'en avertir 
immediatement l'expediteur. Toute utilisation de ce 
message non conforme a sa destination, toute diffusion 
ou toute publication, totale ou partielle, est interdite, sauf 
autorisation expresse. L'internet ne permettant pas 
d'assurer l'integrite de ce message, BNP PARIBAS (et ses
filiales) decline(nt) toute responsabilite au titre de ce 
message, dans l'hypothese ou il aurait ete modifie.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: =?ISO-8859-1?Q?signature=2Easc?=
Type: application/octet-stream
Size: 196 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050722/1608e571/ISO-8859-1Qsignature2Easc.obj
From loic.lefevre at bnpparibas.com  Fri Jul 22 05:31:24 2005
From: loic.lefevre at bnpparibas.com (loic.lefevre@bnpparibas.com)
Date: Fri Jul 22 05:31:32 2005
Subject: =?ISO-8859-1?Q?R=E9f=2E_=3A_RE=3A_[antlr-interest]_Warning=2Fambiguity?=
	=?ISO-8859-1?Q?_suppression?=
In-Reply-To: <000a01c58eb7$ddd377b0$0500a8c0@nigel>
Message-ID: <OFCD481822.8A16044E-ONC1257046.004477B4-C1257046.0044CB69@bnpparibas.com>

Indeed, the grammar was like that at the beginning.

After the changes, I had to change the primaryExpression rule to:

// the basic element of an expression
primaryExpression
      :   !"true" { #primaryExpression=#[TRUE,"TRUE"]; }
        | !"false" { #primaryExpression=#[FALSE,"FALSE"]; }
                  | constant
                  | identPrimary
        | LPAREN! logicalOrExpression RPAREN!
      ;

And now everything works perfectly.

Thanks Nigel and Oli.
Lo?c




Internet
nbsherid@secsme.org.au@antlr.org - 22/07/2005 14:21


Envoy? par :      antlr-interest-bounces@antlr.org



Pour : antlr-interest

cc :


Objet :     RE: [antlr-interest] Warning/ambiguity suppression



> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Olivier Dragon
> Sent: Friday, 22 July 2005 10:06 PM
> To: antlr-interest@antlr.org
> Subject: Re: [antlr-interest] Warning/ambiguity suppression
>
> You could use predicates and match a non-identifier character after the
> word (you could have a variable named trueThat or falseData).
>
> TRUE:
>            ("true" ~(IDENTCHAR))=> "true" ;
> FALSE:
>            ("false" ~(IDENTCHAR))=> "false" ;
>
> protected IDENTCHAR:
>            ('a'..'z'|'A'..'Z'|'0'..'9'|'_') ;
>

Alternatively, you could make "true" and "false" literals to be tested, by
moving them out of the lexer and into the parser.

Remove these from lexer:

TRUE:"true";
FALSE:"false";


And modify this in parser:

primaryExpression
             :           "true"
               | "false"
    | constant
    |        identPrimary
               |         LPAREN! logicalOrExpression RPAREN!
             ;


They will be treated as IDENT tokens until the test for literals, and then
converted to "literal_TRUE" and "literal_FALSE" tokens. Consequently, you
might need to modify the tokens{} section of your parser accordingly, since
you are generating a Heterogeneous AST.

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435





This message and any attachments (the "message") is
intended solely for the addressees and is confidential. 
If you receive this message in error, please delete it and 
immediately notify the sender. Any use not in accord with 
its purpose, any dissemination or disclosure, either whole 
or partial, is prohibited except formal approval. The internet
can not guarantee the integrity of this message. 
BNP PARIBAS (and its subsidiaries) shall (will) not 
therefore be liable for the message if modified. 

                ---------------------------------------------

Ce message et toutes les pieces jointes (ci-apres le 
"message") sont etablis a l'intention exclusive de ses 
destinataires et sont confidentiels. Si vous recevez ce 
message par erreur, merci de le detruire et d'en avertir 
immediatement l'expediteur. Toute utilisation de ce 
message non conforme a sa destination, toute diffusion 
ou toute publication, totale ou partielle, est interdite, sauf 
autorisation expresse. L'internet ne permettant pas 
d'assurer l'integrite de ce message, BNP PARIBAS (et ses
filiales) decline(nt) toute responsabilite au titre de ce 
message, dans l'hypothese ou il aurait ete modifie.
From mail at martin-probst.com  Fri Jul 22 06:18:16 2005
From: mail at martin-probst.com (Martin Probst)
Date: Fri Jul 22 06:18:23 2005
Subject: [antlr-interest] ANTLR or java
In-Reply-To: <001201c58e99$0119b690$79f53951@thedude>
References: <001201c58e99$0119b690$79f53951@thedude>
Message-ID: <1122038296.31033.6.camel@localhost.localdomain>

Hi,
> 
> As I'm newbie to ANTLR, I wonder whether I have to write a grammar and
> use ANTLR,
> or simply use java (because I don't want to rewrite code like a
> function to add integers...).

The question is probably which way is simpler. With ANTLR you'll have
the learning curve, but a much easier way to write and maintain grammars
& lexers, especially for complex languages.

Just think about what you would have to do to write the recognition and
handling in Java instead of using a tool. If it's getting awkward and
complex (e.g. more than some regexp hacks and 300 SLOC), then probably
better use ANTLR.

A hint may be that if your language is freely composable (e.g. you can
write "foo AND bar" but also any nesting of "foo AND (bar OR baz AND
whatnot)", then ANTLR will probably safe you from a lot of complexity.

> Can anyone give me a starting point to achieve this ?

Look at the examples, they'll show you how to define your keywords and
compose a grammar.

Martin

From ric.klaren at gmail.com  Fri Jul 22 06:28:12 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Fri Jul 22 08:18:32 2005
Subject: [antlr-interest] ASTFrame usage?
In-Reply-To: <42DFBFC6.8090002@cyconix.com>
References: <42DF9AB5.8070308@cyconix.com>
	<bc607a4e05072107351ee8fd86@mail.gmail.com>
	<42DFBFC6.8090002@cyconix.com>
Message-ID: <bc607a4e050722062819de4da4@mail.gmail.com>

On 7/21/05, Paul Johnson <gt54-antlr@cyconix.com> wrote:
> The new code compiles Ok with with javac, but the interpreter always
> comes up with the same error whatever I do ("Exception in thread "main"
> java.lang.NoClassDefFoundError: antlr/collections/AST").

Did you forget to specify the classpath while running java ?

e.g. java -classpath .:/x/y/z/antlr.jar <mainclass>

Cheers,

Ric
From eldencrom at comcast.net  Sat Jul 23 11:59:43 2005
From: eldencrom at comcast.net (Elden Crom)
Date: Sat Jul 23 12:00:05 2005
Subject: [antlr-interest] ANTLR3ea+ANTLWorks is *really cool*,	but how
	do I insert PythonTokenStream.java
In-Reply-To: <78E7F635-9890-4B3A-8658-6E29A96E2422@cs.usfca.edu>
References: <42D2087D.1090702@comcast.net>	<803DF81B-F133-4914-BDFC-2D8377785DBB@cs.usfca.edu>	<5917478b05071114407be3e047@mail.gmail.com>
	<78E7F635-9890-4B3A-8658-6E29A96E2422@cs.usfca.edu>
Message-ID: <42E2939F.7080506@comcast.net>

Same here for now (putting a class between lexor and parser, works 
fine), but with respect to your (Terence's) quote
"Why program by hand in five days what you can spend five years of your 
life automating."
are we out of time yet?  :-)
perhaps it could be added to ANTLR 3's grammar some how....
======================================
======================================
<example that covers most of my cases...(through it wouldn't pass coding 
standards!) (make sure its in a non-proportional font to read..).>
  ...
  for x (0,2,12 //no DENT
 34,43):
    y +=x*2;if(x>12):p+=y; i++;  //INDENT before 'p' but not before 'i'
                     p/=z;
      /*this too?*/  p/=2;  //all of the p assignments are in the 
if(...) block
                             //comments don't gen dent errors or cause 
indention to be aquired
                       // the  /*..*/ comment has no effect but the 
spacing is preserved
    q*=p;
  while(next()):; //gen INDENT ";" and DEDENT
  func(SomeObnoxiouslyLongIdentifier,   //no DENT here
       AnotherObnoxiouslyLongIdentifier);
   func2();  //error -- alignment wrong
   if(b):
   c=1;   //error -- indent of 'c' must be greater than 'if'

======================================
======================================

The first question is does it belong in the parser or the lexor? (it 
appears to usually sit in between, as a matter of necessity now)
I know that for my grammar I'm designing, I only want to generate an 
error if the beginning of a statement is not aligned with the previous 
and it is not preceded with a ":".  Same for Python.  My tendency is to 
think it (control) belongs in the parser.
Some options (certainly not exhaustive):
1) Have a grammar flag that says always generates a INDENT and DEDENT 
token after 'newline()' has been called.
     CON: every statement that can contains a DENT token (arrays, list, 
between if and "(" etc) must have "(DENT)? {ignoreDent()}" all over it.
     PRO: maybe not so bad just make a rule "ig_dent: (INDENT | DEDENT)? 
{ignoreDent()}" ... still ugly
2) Have a lexor functions that say look for new dent after a certain 
point (":" in my case) look for new indention
     CON: Somewhat restricts how it can be used.
     PRO: Relatively easy to describe in the lexor and does not put 
allot of jiberish in the parser chunk.
3) have the Parser mess with the Lexor's head, by saying where changes 
of indent are allowed
     CON: parser and lexor are no-long stand alone (colorization for 
grammars becomes more difficult, etc.)
     PRO: most flexible

(the grammar for my language.....)
See 1) above -- in the parser
statement: statment ';' {checkNextIndent=true;}
block: ":" {aquireIndent();} compundStatement;
if: "if" ig_dent expersion ig_dent block
while: "while" ig_dent expersion ig_dent block
....

see 2) above -- in the lexor
SEMI: ';' {checkIndent=true;};
COLON: ':' {Indent(),looking_for_indent=true};
ID:  IDENT { 
(looking_for_indent)?aquireIndent():(checkIndent)?verifysameline_or_same_column=true 
}

See 3) above
{lexor.setIndentionMustBeEqual();}
statement: statment ';' {lexor.setCheckNextIndent(true);}
block: ":" {lexor.aquireIndent();} compundStatement;

Of coarse what we have now in 2.7.5 works, ANTLRWorks will need to allow 
for a thing to be inserted between the lexor and parser.
Maybe just allow for this in the grammar
<parser>
{ option: insertPostLexor="IndentionSensitiveLexor"}
<lexor>

Just Musing........................
(sorry for the length....)
Elden



Terence Parr wrote:

>
> On Jul 11, 2005, at 2:40 PM, Rodrigo B. de Oliveira wrote:
>
>> On 7/11/05, Terence Parr <parrt@cs.usfca.edu> wrote:
>>
>> Boo also needs virtual indent/dedent tokens. Our current approach is
>> to insert a IndentTokenStreamFilter that preprocesses white space
>> tokens and generates indent/dedent virtual tokens as necessary. Will
>> this approach still be supported in antlr 3.0?
>
>
> Yes, as long as ANTLR's lexer sees imaginary indent/dedent tokens,  
> it's cool :)  We'll have to find a way to have this automatically  
> detected and added to the input stream.
>
> Ter
> -- 
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
>
>
>


From jbarnette at gmail.com  Sat Jul 23 12:04:38 2005
From: jbarnette at gmail.com (John Barnette)
Date: Sat Jul 23 12:04:42 2005
Subject: [antlr-interest] 
	Expression grammar issues (typecasts, method calls)
Message-ID: <2bce3eb60507231204568e6866@mail.gmail.com>

Hi all,

I'm a brand-new ANTLR user, and I'm still learning the ropes. I've
been working on a grammar for the expression portion of a scripting
language, and I'm having some issues supporting typecasts and method
calls that are driving me slowly insane. I'm certain that they're just
due to my unfamiliarity with ANTLR, and I'd very much appreciate any
help.

I didn't want to include the grammar inline and spam everyone, so if
you're interested in helping bail me out you can find it at
http://hippo.sourceforge.net/hippo.g

It's only the skeletal expression evaluator at this point, with very
little tree work done except for a few minor changes to make the
output of ast.toStringTree() a bit more helpful to me. The expression
parser is based on the Java 1.5 parser available on antlr.org.

Oh, and if it's at all useful, my implementation language is Java.

There are two commented-out lines in the grammar, one in
unaryExpression and one in primaryExpression. Grep down for "typecast"
to find the first, and "func" to find the second. When either or both
of these lines are uncommented, parsing fails with an "unexpected
token: null" exception.

As I said, I'm very new to ANTLR and feeling pretty lost. I assume
that my problems stem from the fact that both the typecast and the
function call specs use parenthesis, as do expressions, but I have no
idea what the real issue is. Any suggestions, whether for these
specific lines or for basic problems with the expression grammar,
would be much appreciated.

Thanks!


~ j.
From prashant.deva at gmail.com  Sat Jul 23 13:30:32 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Sat Jul 23 13:30:37 2005
Subject: [antlr-interest] ANTLR3ea+ANTLWorks is *really cool*,
	but how do I insert PythonTokenStream.java
In-Reply-To: <42E2939F.7080506@comcast.net>
References: <42D2087D.1090702@comcast.net>
	<803DF81B-F133-4914-BDFC-2D8377785DBB@cs.usfca.edu>
	<5917478b05071114407be3e047@mail.gmail.com>
	<78E7F635-9890-4B3A-8658-6E29A96E2422@cs.usfca.edu>
	<42E2939F.7080506@comcast.net>
Message-ID: <41fed8f80507231330269e62e8@mail.gmail.com>

Elden,
 I cant understand your problem. Could you explain it a little more,
so that i can provide a nice solution in Antlr Studio?


 PRASHANT

On 7/24/05, Elden Crom <eldencrom@comcast.net> wrote:
> Same here for now (putting a class between lexor and parser, works
> fine), but with respect to your (Terence's) quote
> "Why program by hand in five days what you can spend five years of your
> life automating."
> are we out of time yet?  :-)
> perhaps it could be added to ANTLR 3's grammar some how....
> ======================================
> ======================================
> <example that covers most of my cases...(through it wouldn't pass coding
> standards!) (make sure its in a non-proportional font to read..).>
>   ...
>   for x (0,2,12 //no DENT
>  34,43):
>     y +=x*2;if(x>12):p+=y; i++;  //INDENT before 'p' but not before 'i'
>                      p/=z;
>       /*this too?*/  p/=2;  //all of the p assignments are in the
> if(...) block
>                              //comments don't gen dent errors or cause
> indention to be aquired
>                        // the  /*..*/ comment has no effect but the
> spacing is preserved
>     q*=p;
>   while(next()):; //gen INDENT ";" and DEDENT
>   func(SomeObnoxiouslyLongIdentifier,   //no DENT here
>        AnotherObnoxiouslyLongIdentifier);
>    func2();  //error -- alignment wrong
>    if(b):
>    c=1;   //error -- indent of 'c' must be greater than 'if'
> 
> ======================================
> ======================================
> 
> The first question is does it belong in the parser or the lexor? (it
> appears to usually sit in between, as a matter of necessity now)
> I know that for my grammar I'm designing, I only want to generate an
> error if the beginning of a statement is not aligned with the previous
> and it is not preceded with a ":".  Same for Python.  My tendency is to
> think it (control) belongs in the parser.
> Some options (certainly not exhaustive):
> 1) Have a grammar flag that says always generates a INDENT and DEDENT
> token after 'newline()' has been called.
>      CON: every statement that can contains a DENT token (arrays, list,
> between if and "(" etc) must have "(DENT)? {ignoreDent()}" all over it.
>      PRO: maybe not so bad just make a rule "ig_dent: (INDENT | DEDENT)?
> {ignoreDent()}" ... still ugly
> 2) Have a lexor functions that say look for new dent after a certain
> point (":" in my case) look for new indention
>      CON: Somewhat restricts how it can be used.
>      PRO: Relatively easy to describe in the lexor and does not put
> allot of jiberish in the parser chunk.
> 3) have the Parser mess with the Lexor's head, by saying where changes
> of indent are allowed
>      CON: parser and lexor are no-long stand alone (colorization for
> grammars becomes more difficult, etc.)
>      PRO: most flexible
> 
> (the grammar for my language.....)
> See 1) above -- in the parser
> statement: statment ';' {checkNextIndent=true;}
> block: ":" {aquireIndent();} compundStatement;
> if: "if" ig_dent expersion ig_dent block
> while: "while" ig_dent expersion ig_dent block
> ....
> 
> see 2) above -- in the lexor
> SEMI: ';' {checkIndent=true;};
> COLON: ':' {Indent(),looking_for_indent=true};
> ID:  IDENT {
> (looking_for_indent)?aquireIndent():(checkIndent)?verifysameline_or_same_column=true
> }
> 
> See 3) above
> {lexor.setIndentionMustBeEqual();}
> statement: statment ';' {lexor.setCheckNextIndent(true);}
> block: ":" {lexor.aquireIndent();} compundStatement;
> 
> Of coarse what we have now in 2.7.5 works, ANTLRWorks will need to allow
> for a thing to be inserted between the lexor and parser.
> Maybe just allow for this in the grammar
> <parser>
> { option: insertPostLexor="IndentionSensitiveLexor"}
> <lexor>
> 
> Just Musing........................
> (sorry for the length....)
> Elden
> 
> 
> 
> Terence Parr wrote:
> 
> >
> > On Jul 11, 2005, at 2:40 PM, Rodrigo B. de Oliveira wrote:
> >
> >> On 7/11/05, Terence Parr <parrt@cs.usfca.edu> wrote:
> >>
> >> Boo also needs virtual indent/dedent tokens. Our current approach is
> >> to insert a IndentTokenStreamFilter that preprocesses white space
> >> tokens and generates indent/dedent virtual tokens as necessary. Will
> >> this approach still be supported in antlr 3.0?
> >
> >
> > Yes, as long as ANTLR's lexer sees imaginary indent/dedent tokens,
> > it's cool :)  We'll have to find a way to have this automatically
> > detected and added to the input stream.
> >
> > Ter
> > --
> > CS Professor & Grad Director, University of San Francisco
> > Creator, ANTLR Parser Generator, http://www.antlr.org
> > Cofounder, http://www.jguru.com
> >
> >
> >
> 
> 
>
From prashant.deva at gmail.com  Sat Jul 23 13:32:24 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Sat Jul 23 13:32:28 2005
Subject: [antlr-interest] ANTLR3ea+ANTLWorks is *really cool*,
	but how do I insert PythonTokenStream.java
In-Reply-To: <41fed8f80507231330269e62e8@mail.gmail.com>
References: <42D2087D.1090702@comcast.net>
	<803DF81B-F133-4914-BDFC-2D8377785DBB@cs.usfca.edu>
	<5917478b05071114407be3e047@mail.gmail.com>
	<78E7F635-9890-4B3A-8658-6E29A96E2422@cs.usfca.edu>
	<42E2939F.7080506@comcast.net>
	<41fed8f80507231330269e62e8@mail.gmail.com>
Message-ID: <41fed8f805072313323aadd139@mail.gmail.com>

Oops, Please ignore my last post. I thought what u said was related to
the ide and not antlr itself.

PRASHANT

On 7/24/05, Prashant Deva <prashant.deva@gmail.com> wrote:
> Elden,
>  I cant understand your problem. Could you explain it a little more,
> so that i can provide a nice solution in Antlr Studio?
> 
> 
>  PRASHANT
> 
> On 7/24/05, Elden Crom <eldencrom@comcast.net> wrote:
> > Same here for now (putting a class between lexor and parser, works
> > fine), but with respect to your (Terence's) quote
> > "Why program by hand in five days what you can spend five years of your
> > life automating."
> > are we out of time yet?  :-)
> > perhaps it could be added to ANTLR 3's grammar some how....
> > ======================================
> > ======================================
> > <example that covers most of my cases...(through it wouldn't pass coding
> > standards!) (make sure its in a non-proportional font to read..).>
> >   ...
> >   for x (0,2,12 //no DENT
> >  34,43):
> >     y +=x*2;if(x>12):p+=y; i++;  //INDENT before 'p' but not before 'i'
> >                      p/=z;
> >       /*this too?*/  p/=2;  //all of the p assignments are in the
> > if(...) block
> >                              //comments don't gen dent errors or cause
> > indention to be aquired
> >                        // the  /*..*/ comment has no effect but the
> > spacing is preserved
> >     q*=p;
> >   while(next()):; //gen INDENT ";" and DEDENT
> >   func(SomeObnoxiouslyLongIdentifier,   //no DENT here
> >        AnotherObnoxiouslyLongIdentifier);
> >    func2();  //error -- alignment wrong
> >    if(b):
> >    c=1;   //error -- indent of 'c' must be greater than 'if'
> >
> > ======================================
> > ======================================
> >
> > The first question is does it belong in the parser or the lexor? (it
> > appears to usually sit in between, as a matter of necessity now)
> > I know that for my grammar I'm designing, I only want to generate an
> > error if the beginning of a statement is not aligned with the previous
> > and it is not preceded with a ":".  Same for Python.  My tendency is to
> > think it (control) belongs in the parser.
> > Some options (certainly not exhaustive):
> > 1) Have a grammar flag that says always generates a INDENT and DEDENT
> > token after 'newline()' has been called.
> >      CON: every statement that can contains a DENT token (arrays, list,
> > between if and "(" etc) must have "(DENT)? {ignoreDent()}" all over it.
> >      PRO: maybe not so bad just make a rule "ig_dent: (INDENT | DEDENT)?
> > {ignoreDent()}" ... still ugly
> > 2) Have a lexor functions that say look for new dent after a certain
> > point (":" in my case) look for new indention
> >      CON: Somewhat restricts how it can be used.
> >      PRO: Relatively easy to describe in the lexor and does not put
> > allot of jiberish in the parser chunk.
> > 3) have the Parser mess with the Lexor's head, by saying where changes
> > of indent are allowed
> >      CON: parser and lexor are no-long stand alone (colorization for
> > grammars becomes more difficult, etc.)
> >      PRO: most flexible
> >
> > (the grammar for my language.....)
> > See 1) above -- in the parser
> > statement: statment ';' {checkNextIndent=true;}
> > block: ":" {aquireIndent();} compundStatement;
> > if: "if" ig_dent expersion ig_dent block
> > while: "while" ig_dent expersion ig_dent block
> > ....
> >
> > see 2) above -- in the lexor
> > SEMI: ';' {checkIndent=true;};
> > COLON: ':' {Indent(),looking_for_indent=true};
> > ID:  IDENT {
> > (looking_for_indent)?aquireIndent():(checkIndent)?verifysameline_or_same_column=true
> > }
> >
> > See 3) above
> > {lexor.setIndentionMustBeEqual();}
> > statement: statment ';' {lexor.setCheckNextIndent(true);}
> > block: ":" {lexor.aquireIndent();} compundStatement;
> >
> > Of coarse what we have now in 2.7.5 works, ANTLRWorks will need to allow
> > for a thing to be inserted between the lexor and parser.
> > Maybe just allow for this in the grammar
> > <parser>
> > { option: insertPostLexor="IndentionSensitiveLexor"}
> > <lexor>
> >
> > Just Musing........................
> > (sorry for the length....)
> > Elden
> >
> >
> >
> > Terence Parr wrote:
> >
> > >
> > > On Jul 11, 2005, at 2:40 PM, Rodrigo B. de Oliveira wrote:
> > >
> > >> On 7/11/05, Terence Parr <parrt@cs.usfca.edu> wrote:
> > >>
> > >> Boo also needs virtual indent/dedent tokens. Our current approach is
> > >> to insert a IndentTokenStreamFilter that preprocesses white space
> > >> tokens and generates indent/dedent virtual tokens as necessary. Will
> > >> this approach still be supported in antlr 3.0?
> > >
> > >
> > > Yes, as long as ANTLR's lexer sees imaginary indent/dedent tokens,
> > > it's cool :)  We'll have to find a way to have this automatically
> > > detected and added to the input stream.
> > >
> > > Ter
> > > --
> > > CS Professor & Grad Director, University of San Francisco
> > > Creator, ANTLR Parser Generator, http://www.antlr.org
> > > Cofounder, http://www.jguru.com
> > >
> > >
> > >
> >
> >
> >
>
From rprememail at yahoo.com  Sun Jul 24 06:57:31 2005
From: rprememail at yahoo.com (Premkumar Rathanavelu)
Date: Sun Jul 24 06:57:42 2005
Subject: [antlr-interest] Error: How to deal with Special characters?
Message-ID: <20050724135731.27121.qmail@web80908.mail.scd.yahoo.com>

Hi Everyone.,
  In source codes often comments comes with some kind of 
  special characters like ? etc., 
Consider a Comment Line:
/*  Computer Software ? Restricted Rights */
 
In the above comment line, hyphen ('-') between "Software" and "Restricted" 
looks normal but when we view that in DOS editor it shows 
'-' as ?.
My comment line token 
Comment
 : "/*"
  ( {LA(2) != '/'}? '*'
  | EndOfLine //{newline();}
  | ~('*'| '\r' | '\n')
  )*
  "*/"  {$setType(Token.SKIP);}// newline();} 
 ;
 
So, I placed a token with that special character in the parser.
But still I'm getting error. The file could not be parsed anymore.
 
I'm a newbie..please help me to overcome the error.
 
Thanks in advance.,
Prem

		
---------------------------------
 Start your day with Yahoo! - make it your home page 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050724/61af0f06/attachment.html
From mail at martin-probst.com  Sun Jul 24 10:58:55 2005
From: mail at martin-probst.com (Martin Probst)
Date: Sun Jul 24 10:59:02 2005
Subject: [antlr-interest] Error: How to deal with Special characters?
In-Reply-To: <20050724135731.27121.qmail@web80908.mail.scd.yahoo.com>
References: <20050724135731.27121.qmail@web80908.mail.scd.yahoo.com>
Message-ID: <1122227935.18808.2.camel@localhost.localdomain>

Hi,

in ANTLR lexers, the "not" rule depends on the charVocabulary of the
lexer. If you want to have the "not" rule match really any character,
you have to make sure it's included in you lexers char vocabulary.

>   | ~('*'| '\r' | '\n')

Martin


From ric.klaren at gmail.com  Sun Jul 24 15:11:45 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Sun Jul 24 15:11:50 2005
Subject: [antlr-interest] Problems with using the C++ grammar provided
	at	antlr.org.
In-Reply-To: <20050720170100.48301.qmail@web30808.mail.mud.yahoo.com>
References: <20050720170100.48301.qmail@web30808.mail.mud.yahoo.com>
Message-ID: <42E41221.8030906@gmail.com>

Min Deng wrote:
> By using the command 
> "g++ -c -I../include *.cpp 2>&1 | less", 
> I compiled the ANTLR generated Lexer and Parser
> sucessfully. But when using the command 
> "g++ -o CPPParser *.o -L../lib -lantlr 2>&1 | less",
> I got a lot of error messages. I copied some of them
> in the following. Could somebody give me a hint what
> is wrong? 
> 
> BTW:
> o   I am using g++ 3.2.0 on cygwin. 
> o   I used the precompiled ANTLR C++ library that
> exists as lib/libantlr.a.

Try rebuilding the antlr library with g++ 3.2.0 as well then link them
both. It might be a problem due to an incompatible ABI (the symbol name
mangling changed a few times in the 3.x track) not sure what the
precompiled lib is built with.

Cheers,

Ric
From nbsherid at secsme.org.au  Sun Jul 24 16:37:07 2005
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Sun Jul 24 16:37:04 2005
Subject: [antlr-interest] Expression grammar issues (typecasts,
	method calls)
In-Reply-To: <2bce3eb60507231204568e6866@mail.gmail.com>
Message-ID: <000201c590a8$9b18dad0$0500a8c0@nigel>


> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of John Barnette
> Sent: Sunday, 24 July 2005 5:05 AM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] Expression grammar issues (typecasts, method
> calls)
> 
> Hi all,
> 
> I'm a brand-new ANTLR user, and I'm still learning the ropes. I've
> been working on a grammar for the expression portion of a scripting
> language, and I'm having some issues supporting typecasts and method
> calls that are driving me slowly insane. I'm certain that they're just
> due to my unfamiliarity with ANTLR, and I'd very much appreciate any
> help.
> 
> I didn't want to include the grammar inline and spam everyone, so if
> you're interested in helping bail me out you can find it at
> http://hippo.sourceforge.net/hippo.g
> 
> It's only the skeletal expression evaluator at this point, with very
> little tree work done except for a few minor changes to make the
> output of ast.toStringTree() a bit more helpful to me. The expression
> parser is based on the Java 1.5 parser available on antlr.org.
> 
> Oh, and if it's at all useful, my implementation language is Java.
> 
> There are two commented-out lines in the grammar, one in
> unaryExpression and one in primaryExpression. Grep down for "typecast"
> to find the first, and "func" to find the second. When either or both
> of these lines are uncommented, parsing fails with an "unexpected
> token: null" exception.
> 
> As I said, I'm very new to ANTLR and feeling pretty lost. I assume
> that my problems stem from the fact that both the typecast and the
> function call specs use parenthesis, as do expressions, but I have no
> idea what the real issue is. Any suggestions, whether for these
> specific lines or for basic problems with the expression grammar,
> would be much appreciated.
> 
> Thanks!
> 


Hi,

It looks to be your actions, although I can't say for sure without further
testing. 

unaryExpression
	: INC^ unaryExpression
	| DEC^ unaryExpression
	| BITWISE_NOT^ unaryExpression
	| LOGICAL_NOT^ unaryExpression
	//| pl:PAREN_LEFT^ builtInType PAREN_RIGHT! unaryExpression
{#pl.setText("typecast");}
	| postfixExpression
	;

These actions are spread around in a few places; I'm guessing you have just
started adding them in.

Firstly, you probably don't need to use '#' in a normal parser, as this sort
of thing is only needed for tree parsers, so you can remove these. Secondly,
I'm not sure if you can do a setText() at this point. Try taking out the
'#', and if that doesn't work, remove the actions temporarily to see if that
makes any difference.

Cheers,

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435
 


From jbarnette at gmail.com  Sun Jul 24 17:42:09 2005
From: jbarnette at gmail.com (John Barnette)
Date: Sun Jul 24 17:42:12 2005
Subject: [antlr-interest] Expression grammar issues (typecasts,
	method calls)
In-Reply-To: <000201c590a8$9b18dad0$0500a8c0@nigel>
References: <2bce3eb60507231204568e6866@mail.gmail.com>
	<000201c590a8$9b18dad0$0500a8c0@nigel>
Message-ID: <2bce3eb605072417424981a2bc@mail.gmail.com>

On 7/24/05, Nigel Sheridan-Smith <nbsherid@secsme.org.au> wrote:
> > There are two commented-out lines in the grammar, one in
> > unaryExpression and one in primaryExpression. Grep down for "typecast"
> > to find the first, and "func" to find the second. When either or both
> > of these lines are uncommented, parsing fails with an "unexpected
> > token: null" exception.

(snip)

> It looks to be your actions, although I can't say for sure without further
> testing.
> 
> Firstly, you probably don't need to use '#' in a normal parser, as this sort
> of thing is only needed for tree parsers, so you can remove these. Secondly,
> I'm not sure if you can do a setText() at this point. Try taking out the
> '#', and if that doesn't work, remove the actions temporarily to see if that
> makes any difference.

Thanks, Nigel. I've removed the actions, which seems to have at least
made the typecast statement work. However, I'm still getting an
unexpected token when I uncomment the line that should match function
calls. Here's a minimal testcase in Java that will reproduce the
error:

HippoParser parser = new HippoParser(new HippoLexer(new StringReader("foo")));
parser.expression();

I've placed a slightly-modified grammar (with the misbehaving line
uncommented) at: http://hippo.sourceforge.net/hippo.g. The issue is in
primaryExpression:

primaryExpression
	:	IDENTIFIER
	    (PAREN_LEFT^ argList PAREN_RIGHT!)?
	|	literal
	|	PAREN_LEFT^ expression PAREN_RIGHT!
	;

Any further advice, abuse, or general nattering is much appreciated. :)


~ j.
From nbsherid at secsme.org.au  Sun Jul 24 20:51:50 2005
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Sun Jul 24 20:51:45 2005
Subject: [antlr-interest] Expression grammar issues (typecasts,
	method calls)
In-Reply-To: <2bce3eb605072417424981a2bc@mail.gmail.com>
Message-ID: <000001c590cc$304789d0$0500a8c0@nigel>



> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of John Barnette
> Sent: Monday, 25 July 2005 10:42 AM
> To: antlr-interest@antlr.org
> Subject: Re: [antlr-interest] Expression grammar issues (typecasts,method
> calls)
> 
> On 7/24/05, Nigel Sheridan-Smith <nbsherid@secsme.org.au> wrote:
> > > There are two commented-out lines in the grammar, one in
> > > unaryExpression and one in primaryExpression. Grep down for "typecast"
> > > to find the first, and "func" to find the second. When either or both
> > > of these lines are uncommented, parsing fails with an "unexpected
> > > token: null" exception.
> 
> (snip)
> 
> > It looks to be your actions, although I can't say for sure without
> further
> > testing.
> >
> > Firstly, you probably don't need to use '#' in a normal parser, as this
> sort
> > of thing is only needed for tree parsers, so you can remove these.
> Secondly,
> > I'm not sure if you can do a setText() at this point. Try taking out the
> > '#', and if that doesn't work, remove the actions temporarily to see if
> that
> > makes any difference.
> 
> Thanks, Nigel. I've removed the actions, which seems to have at least
> made the typecast statement work. However, I'm still getting an
> unexpected token when I uncomment the line that should match function
> calls. Here's a minimal testcase in Java that will reproduce the
> error:
> 
> HippoParser parser = new HippoParser(new HippoLexer(new
> StringReader("foo")));
> parser.expression();
> 
> I've placed a slightly-modified grammar (with the misbehaving line
> uncommented) at: http://hippo.sourceforge.net/hippo.g. The issue is in
> primaryExpression:
> 
> primaryExpression
> 	:	IDENTIFIER
> 	    (PAREN_LEFT^ argList PAREN_RIGHT!)?
> 	|	literal
> 	|	PAREN_LEFT^ expression PAREN_RIGHT!
> 	;
> 
> Any further advice, abuse, or general nattering is much appreciated. :)
> 


It might be a problem that is common with StringReader, in that you need to
force the end-of-file on your top-level rule.

Add the following line:

expressionToParse: primaryExpression EOF!


Then, in your code:

HippoParser parser = new HippoParser(new HippoLexer(new
	StringReader("foo")));
parser.expressionToParse();



Cheers,

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435


From nbsherid at secsme.org.au  Sun Jul 24 21:16:02 2005
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Sun Jul 24 21:15:55 2005
Subject: [antlr-interest] Expression grammar issues (typecasts,
	method calls)
Message-ID: <000101c590cf$91badde0$0500a8c0@nigel>


> -----Original Message-----
> From: Nigel Sheridan-Smith [mailto:nbsherid@secsme.org.au]
> Sent: Monday, 25 July 2005 1:52 PM
> To: 'antlr-interest@antlr.org'
> Subject: RE: [antlr-interest] Expression grammar issues (typecasts,method
> calls)
> 
> It might be a problem that is common with StringReader, in that you need
> to force the end-of-file on your top-level rule.
> 
> Add the following line:
> 
> expressionToParse: primaryExpression EOF!
> 
> 
> Then, in your code:
> 
> HippoParser parser = new HippoParser(new HippoLexer(new
> 	StringReader("foo")));
> parser.expressionToParse();
> 
> 

Yeap, that's definitely it, as 'expression' is not a top-level rule (see
'expressionList' and 'argList'). You don't need EOF, just a new top-level
rule. 

http://www.jguru.com/faq/view.jsp?EID=422381

I modified your grammar, tested it, and it works fine.

Cheers,

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435


From mail at martin-probst.com  Mon Jul 25 00:25:08 2005
From: mail at martin-probst.com (Martin Probst)
Date: Mon Jul 25 00:25:12 2005
Subject: [antlr-interest] Error: How to deal with Special characters?
In-Reply-To: <20050724234947.76085.qmail@web80904.mail.scd.yahoo.com>
References: <20050724234947.76085.qmail@web80904.mail.scd.yahoo.com>
Message-ID: <1122276308.7701.2.camel@localhost.localdomain>

Keeping this onlist ...

> Hi Martin.,
>   Thanks for your reply. The "not" rule already exists in the Lexer
> charVocabulary 
> but error still persists. Even the special char token was also
> included
> in the charVocabulary..

Well, if ANTLR sees a ~( ... ) rule in the lexer, it creates a rule for
all chars in charVocabulary, except the ones within the braces. So if
your charVocabulary includes your special character, it should work. But
it rather looks as if it didn't ... are you really sure about that?

Martin


From wiggjd at lsbu.ac.uk  Mon Jul 25 03:24:49 2005
From: wiggjd at lsbu.ac.uk (David Wigg)
Date: Mon Jul 25 03:20:47 2005
Subject: [antlr-interest] Re: Error: How to deal with Special characters?
Message-ID: <42E4BDF1.6070706@lsbu.ac.uk>

Hello,

What interested me about the message from Prekumar of 24 July 
was how in some source code a hyphen ("-") could become 
displayed as a "u" circumflex ("?")in DOS mode when the ISO 
8859-1 value of the first is 45 and the second 251 (with a 
difference of 206.

What happens when you use the hyphen for the subtraction 
operator in your source code?

What is the significance of it being in a comment?

What coding system is being used in the source code?

Is this a problem with a particular IDE?

Are we talking MS or UNIX?

Yours puzzled,

David.

Original message:

Message: 4
Date: Sun, 24 Jul 2005 06:57:31 -0700 (PDT)
From: Premkumar Rathanavelu <rprememail@yahoo.com>
Subject: [antlr-interest] Error: How to deal with Special 
characters?
To: antlr-interest@antlr.org
Message-ID: <20050724135731.27121.qmail@web80908.mail.scd.yahoo.com>
Content-Type: text/plain; charset="iso-8859-1"

Hi Everyone.,
   In source codes often comments comes with some kind of
   special characters like ? etc.,
Consider a Comment Line:
/*  Computer Software - Restricted Rights */

In the above comment line, hyphen ('-') between "Software" and 
"Restricted"
looks normal but when we view that in DOS editor it shows
'-' as ?.
My comment line token
Comment
  : "/*"
   ( {LA(2) != '/'}? '*'
   | EndOfLine //{newline();}
   | ~('*'| '\r' | '\n')
   )*
   "*/"  {$setType(Token.SKIP);}// newline();}
  ;

So, I placed a token with that special character in the parser.
But still I'm getting error. The file could not be parsed anymore.

I'm a newbie..please help me to overcome the error.

Thanks in advance.,
Prem

From loic.lefevre at bnpparibas.com  Mon Jul 25 03:33:12 2005
From: loic.lefevre at bnpparibas.com (loic.lefevre@bnpparibas.com)
Date: Mon Jul 25 03:33:24 2005
Subject: [antlr-interest] java.lang.OutOfMemoryError
Message-ID: <OFAE33F149.D6AE04B0-ONC1257049.003982FC-C1257049.0039FDBB@bnpparibas.com>


Hello,
My grammar to handle expressions is now finished but now I'm facing a
strange behaviour:
When I try to validate hand typed expressions, I get the terrible
java.lang.OutOfMemoryError when
parsing the expression: //    (two chars)

Here is my grammar:
(See attached file: RosterExpression.g)

It appears that the lexer loops forever:

      public final void mSL_COMMENT(boolean _createToken) throws
RecognitionException, CharStreamException, TokenStreamException {
            int _ttype; Token _token=null; int _begin=text.length();
            _ttype = SL_COMMENT;
            int _saveIndex;

            match("//");
            {
            _loop59:


//--> begin of loop forever
            do {
                  if ((_tokenSet_0.member(LA(1)))) {
                        {
                        match(_tokenSet_0);
                        }
                  }
                  else {
                        break _loop59;
                  }

            } while (true);
//--> end of loop forever


            }
            {
            switch ( LA(1)) {
            case '\n':
            {
                  match('\n');
                  break;
            }
            case '\r':
            {
                  match('\r');
                  {
                  if ((LA(1)=='\n')) {
                        match('\n');
                  }
                  else {
                  }

                  }
                  break;
            }
            default:
                  {
                  }
            }
            }
            if ( inputState.guessing==0 ) {
                  _ttype = Token.SKIP; newline();
            }
            if ( _createToken && _token==null && _ttype!=Token.SKIP ) {
                  _token = makeToken(_ttype);
                  _token.setText(new String(text.getBuffer(), _begin,
text.length()-_begin));
            }
            _returnToken = _token;
      }


Thanks in advance for your help.
Lo?c

This message and any attachments (the "message") is
intended solely for the addressees and is confidential. 
If you receive this message in error, please delete it and 
immediately notify the sender. Any use not in accord with 
its purpose, any dissemination or disclosure, either whole 
or partial, is prohibited except formal approval. The internet
can not guarantee the integrity of this message. 
BNP PARIBAS (and its subsidiaries) shall (will) not 
therefore be liable for the message if modified. 

                ---------------------------------------------

Ce message et toutes les pieces jointes (ci-apres le 
"message") sont etablis a l'intention exclusive de ses 
destinataires et sont confidentiels. Si vous recevez ce 
message par erreur, merci de le detruire et d'en avertir 
immediatement l'expediteur. Toute utilisation de ce 
message non conforme a sa destination, toute diffusion 
ou toute publication, totale ou partielle, est interdite, sauf 
autorisation expresse. L'internet ne permettant pas 
d'assurer l'integrite de ce message, BNP PARIBAS (et ses
filiales) decline(nt) toute responsabilite au titre de ce 
message, dans l'hypothese ou il aurait ete modifie.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: =?ISO-8859-1?Q?RosterExpression=2Eg?=
Type: application/octet-stream
Size: 14597 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050725/4c527649/ISO-8859-1QRosterExpression2Eg-0001.obj
From xavier.benveniste at free.fr  Mon Jul 25 03:52:46 2005
From: xavier.benveniste at free.fr (Xavier Benveniste)
Date: Mon Jul 25 03:52:20 2005
Subject: [antlr-interest] Newbie : help please
Message-ID: <001001c59106$fdfdd7f0$79f53951@thedude>

Hi,

can someone tell me what is wrong with this vers simple grammar  ? ( error is : "Rule 'atom' is not defined") Thanks.

class ExprParser extends Parser;

options {

buildAST = true;

defaultErrorHandler = false;

}

atom: INT

;

class ExprLexer extends Lexer;

options {

k = 2; // two characters of lookahead

testLiterals = false; // don't automatically test for literals

charVocabulary = '\u0003'..'\uFFFF'; // allow UNICODE

}

/* Integers */

INT : ('0'..'9')+ ;

/* Comparison operators */

EQUALS : "==";

NOT_EQUALS : "<>";

GT : ">";

GTE : ">=";

LT : "<";

LTE : "<=";


class ExprTreeParser extends TreeParser;

options {

importVocab=ExprParser;

}

expr returns [boolean r=false]

{ int a,b; }

: #(EQUALS a=atom b=atom) {r = (a == b);}

| #(NOT_EQUALS a=atom b=atom) {r = (a != b);} 

| #(GT a=atom b=atom) {r = (a > b);}

| #(GTE a=atom b=atom) {r = (a >= b);}

| #(LT a=atom b=atom) {r = (a < b);}

| #(LTE a=atom b=atom) {r = (a <= b);}

;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050725/fe4375ca/attachment.html
From demakov at ispras.ru  Mon Jul 25 04:12:18 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Jul 25 04:12:30 2005
Subject: [antlr-interest] Newbie : help please
References: <001001c59106$fdfdd7f0$79f53951@thedude>
Message-ID: <009a01c59109$b8add3a0$8cc79553@marlboro>

Rule 'atom' referenced in ExprTreeParser should be defined in tree parser, not only in ExprParser.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com

  ----- Original Message ----- 
  From: Xavier Benveniste 
  To: antlr-interest@antlr.org 
  Sent: Monday, July 25, 2005 2:52 PM
  Subject: [antlr-interest] Newbie : help please


  Hi,

  can someone tell me what is wrong with this vers simple grammar  ? ( error is : "Rule 'atom' is not defined") Thanks.

  class ExprParser extends Parser;

  options {

  buildAST = true;

  defaultErrorHandler = false;

  }

  atom: INT

  ;

  class ExprLexer extends Lexer;

  options {

  k = 2; // two characters of lookahead

  testLiterals = false; // don't automatically test for literals

  charVocabulary = '\u0003'..'\uFFFF'; // allow UNICODE

  }

  /* Integers */

  INT : ('0'..'9')+ ;

  /* Comparison operators */

  EQUALS : "==";

  NOT_EQUALS : "<>";

  GT : ">";

  GTE : ">=";

  LT : "<";

  LTE : "<=";


  class ExprTreeParser extends TreeParser;

  options {

  importVocab=ExprParser;

  }

  expr returns [boolean r=false]

  { int a,b; }

  : #(EQUALS a=atom b=atom) {r = (a == b);}

  | #(NOT_EQUALS a=atom b=atom) {r = (a != b);} 

  | #(GT a=atom b=atom) {r = (a > b);}

  | #(GTE a=atom b=atom) {r = (a >= b);}

  | #(LT a=atom b=atom) {r = (a < b);}

  | #(LTE a=atom b=atom) {r = (a <= b);}

  ;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050725/16e060bc/attachment.html
From demakov at ispras.ru  Mon Jul 25 04:19:33 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Jul 25 04:19:37 2005
Subject: [antlr-interest] java.lang.OutOfMemoryError
References: <OFAE33F149.D6AE04B0-ONC1257049.003982FC-C1257049.0039FDBB@bnpparibas.com>
Message-ID: <00ae01c5910a$bb7bf250$8cc79553@marlboro>

Here is shortened version of your parser with main() reading System.in
I don't see any problems with it

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


----- Original Message ----- 
From: <loic.lefevre@bnpparibas.com>
To: <antlr-interest@antlr.org>
Sent: Monday, July 25, 2005 2:33 PM
Subject: [antlr-interest] java.lang.OutOfMemoryError



Hello,
My grammar to handle expressions is now finished but now I'm facing a
strange behaviour:
When I try to validate hand typed expressions, I get the terrible
java.lang.OutOfMemoryError when
parsing the expression: //    (two chars)

Here is my grammar:
(See attached file: RosterExpression.g)

It appears that the lexer loops forever:

      public final void mSL_COMMENT(boolean _createToken) throws
RecognitionException, CharStreamException, TokenStreamException {
            int _ttype; Token _token=null; int _begin=text.length();
            _ttype = SL_COMMENT;
            int _saveIndex;

            match("//");
            {
            _loop59:


//--> begin of loop forever
            do {
                  if ((_tokenSet_0.member(LA(1)))) {
                        {
                        match(_tokenSet_0);
                        }
                  }
                  else {
                        break _loop59;
                  }

            } while (true);
//--> end of loop forever


            }
            {
            switch ( LA(1)) {
            case '\n':
            {
                  match('\n');
                  break;
            }
            case '\r':
            {
                  match('\r');
                  {
                  if ((LA(1)=='\n')) {
                        match('\n');
                  }
                  else {
                  }

                  }
                  break;
            }
            default:
                  {
                  }
            }
            }
            if ( inputState.guessing==0 ) {
                  _ttype = Token.SKIP; newline();
            }
            if ( _createToken && _token==null && _ttype!=Token.SKIP ) {
                  _token = makeToken(_ttype);
                  _token.setText(new String(text.getBuffer(), _begin,
text.length()-_begin));
            }
            _returnToken = _token;
      }


Thanks in advance for your help.
Lo?c

This message and any attachments (the "message") is
intended solely for the addressees and is confidential.
If you receive this message in error, please delete it and
immediately notify the sender. Any use not in accord with
its purpose, any dissemination or disclosure, either whole
or partial, is prohibited except formal approval. The internet
can not guarantee the integrity of this message.
BNP PARIBAS (and its subsidiaries) shall (will) not
therefore be liable for the message if modified.

                ---------------------------------------------

Ce message et toutes les pieces jointes (ci-apres le
"message") sont etablis a l'intention exclusive de ses
destinataires et sont confidentiels. Si vous recevez ce
message par erreur, merci de le detruire et d'en avertir
immediatement l'expediteur. Toute utilisation de ce
message non conforme a sa destination, toute diffusion
ou toute publication, totale ou partielle, est interdite, sauf
autorisation expresse. L'internet ne permettant pas
d'assurer l'integrite de ce message, BNP PARIBAS (et ses
filiales) decline(nt) toute responsabilite au titre de ce
message, dans l'hypothese ou il aurait ete modifie.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: RosterExpression.g
Type: application/octet-stream
Size: 5227 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050725/70259556/RosterExpression.obj
From mail at martin-probst.com  Mon Jul 25 04:56:42 2005
From: mail at martin-probst.com (Martin Probst)
Date: Mon Jul 25 04:56:50 2005
Subject: [antlr-interest] Re: Error: How to deal with Special characters?
In-Reply-To: <42E4BDF1.6070706@lsbu.ac.uk>
References: <42E4BDF1.6070706@lsbu.ac.uk>
Message-ID: <1122292602.21617.11.camel@localhost.localdomain>

Hi,

> What interested me about the message from Prekumar of 24 July 
> was how in some source code a hyphen ("-") could become 
> displayed as a "u" circumflex ("?")in DOS mode when the ISO 
> 8859-1 value of the first is 45 and the second 251 (with a 
> difference of 206.

That's because MS Windows uses a different encoding in DOS boxes and
normal GUI apps (I think the first is windows-1252 and the second
something closer to ISO... but I'm not sure).

So the encoding problem on Windows is generally a MS problem. ANTLR can
handle any encoding, it's just a lot more convenient to use the default
because then you can edit your files directly.

> What happens when you use the hyphen for the subtraction 
> operator in your source code?

You'll get an error as these are different characters.

> What is the significance of it being in a comment?

Probably none, except that you would generally like to allow it (he had
a problem with charVocabulary).

> What coding system is being used in the source code?

C++ part uses chars, Java part uses UTF-16. But that doesn't really
matter, als you can of course match any byte value you like in the C++
mode (e.g. you don't have to write 'a' but can rather use 0x61). There
is also a C++ Unicode mode which uses int values.

Martin

From loic.lefevre at bnpparibas.com  Mon Jul 25 05:28:56 2005
From: loic.lefevre at bnpparibas.com (loic.lefevre@bnpparibas.com)
Date: Mon Jul 25 05:29:11 2005
Subject: =?ISO-8859-1?Q?R=E9f=2E_=3A_Re=3A_[antlr-interest]_?=
	=?ISO-8859-1?Q?java=2Elang=2EOutOfMemoryError?=
In-Reply-To: <00ae01c5910a$bb7bf250$8cc79553@marlboro>
Message-ID: <OFFBADDD1A.FDDB3DB6-ONC1257049.0044571D-C1257049.004498A1@bnpparibas.com>


Seems I found the origin of the problem but I can't find how to resolve it
yet:

All comes from the implementation of the Reader I use, if you change your
code with:

---8
<---------------------------------------------------------------------------------------------------------------------------------------------
    public static void main( String[]  args ) throws TokenStreamException
    {
        RosterExpressionLexer lexer = new RosterExpressionLexer( new
java.io.StringReader("//") );
        while( true )
        {
            Token t = lexer.nextToken();
            if( t.getType() == RosterExpressionTokenTypes.EOF ) break;
            System.out.println( "'" + t.getText() + "'" );
        }
    }
---8
<---------------------------------------------------------------------------------------------------------------------------------------------

then you'll get the OutOfMemoryError!

Argh, I'm investigating on the behaviour of this java class!

Lo?c




Internet
demakov@ispras.ru@antlr.org - 25/07/2005 13:19


Envoy? par :      antlr-interest-bounces@antlr.org



Pour : antlr-interest

cc :


Objet :     Re: [antlr-interest] java.lang.OutOfMemoryError

Here is shortened version of your parser with main() reading System.in
I don't see any problems with it

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


----- Original Message -----
From: <loic.lefevre@bnpparibas.com>
To: <antlr-interest@antlr.org>
Sent: Monday, July 25, 2005 2:33 PM
Subject: [antlr-interest] java.lang.OutOfMemoryError



Hello,
My grammar to handle expressions is now finished but now I'm facing a
strange behaviour:
When I try to validate hand typed expressions, I get the terrible
java.lang.OutOfMemoryError when
parsing the expression: //    (two chars)

Here is my grammar:
(See attached file: RosterExpression.g)

It appears that the lexer loops forever:

      public final void mSL_COMMENT(boolean _createToken) throws
RecognitionException, CharStreamException, TokenStreamException {
            int _ttype; Token _token=null; int _begin=text.length();
            _ttype = SL_COMMENT;
            int _saveIndex;

            match("//");
            {
            _loop59:


//--> begin of loop forever
            do {
                  if ((_tokenSet_0.member(LA(1)))) {
                        {
                        match(_tokenSet_0);
                        }
                  }
                  else {
                        break _loop59;
                  }

            } while (true);
//--> end of loop forever


            }
            {
            switch ( LA(1)) {
            case '\n':
            {
                  match('\n');
                  break;
            }
            case '\r':
            {
                  match('\r');
                  {
                  if ((LA(1)=='\n')) {
                        match('\n');
                  }
                  else {
                  }

                  }
                  break;
            }
            default:
                  {
                  }
            }
            }
            if ( inputState.guessing==0 ) {
                  _ttype = Token.SKIP; newline();
            }
            if ( _createToken && _token==null && _ttype!=Token.SKIP ) {
                  _token = makeToken(_ttype);
                  _token.setText(new String(text.getBuffer(), _begin,
text.length()-_begin));
            }
            _returnToken = _token;
      }


Thanks in advance for your help.
Lo?c

This message and any attachments (the "message") is
intended solely for the addressees and is confidential.
If you receive this message in error, please delete it and
immediately notify the sender. Any use not in accord with
its purpose, any dissemination or disclosure, either whole
or partial, is prohibited except formal approval. The internet
can not guarantee the integrity of this message.
BNP PARIBAS (and its subsidiaries) shall (will) not
therefore be liable for the message if modified.

                ---------------------------------------------

Ce message et toutes les pieces jointes (ci-apres le
"message") sont etablis a l'intention exclusive de ses
destinataires et sont confidentiels. Si vous recevez ce
message par erreur, merci de le detruire et d'en avertir
immediatement l'expediteur. Toute utilisation de ce
message non conforme a sa destination, toute diffusion
ou toute publication, totale ou partielle, est interdite, sauf
autorisation expresse. L'internet ne permettant pas
d'assurer l'integrite de ce message, BNP PARIBAS (et ses
filiales) decline(nt) toute responsabilite au titre de ce
message, dans l'hypothese ou il aurait ete modifie.

(See attached file: RosterExpression.g)

This message and any attachments (the "message") is
intended solely for the addressees and is confidential. 
If you receive this message in error, please delete it and 
immediately notify the sender. Any use not in accord with 
its purpose, any dissemination or disclosure, either whole 
or partial, is prohibited except formal approval. The internet
can not guarantee the integrity of this message. 
BNP PARIBAS (and its subsidiaries) shall (will) not 
therefore be liable for the message if modified. 

                ---------------------------------------------

Ce message et toutes les pieces jointes (ci-apres le 
"message") sont etablis a l'intention exclusive de ses 
destinataires et sont confidentiels. Si vous recevez ce 
message par erreur, merci de le detruire et d'en avertir 
immediatement l'expediteur. Toute utilisation de ce 
message non conforme a sa destination, toute diffusion 
ou toute publication, totale ou partielle, est interdite, sauf 
autorisation expresse. L'internet ne permettant pas 
d'assurer l'integrite de ce message, BNP PARIBAS (et ses
filiales) decline(nt) toute responsabilite au titre de ce 
message, dans l'hypothese ou il aurait ete modifie.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: =?ISO-8859-1?Q?RosterExpression=2Eg?=
Type: application/octet-stream
Size: 5464 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050725/f03e5019/ISO-8859-1QRosterExpression2Eg.obj
From rprememail at yahoo.com  Mon Jul 25 05:36:35 2005
From: rprememail at yahoo.com (Premkumar Rathanavelu)
Date: Mon Jul 25 05:36:37 2005
Subject: [antlr-interest] Re: Problem With Special Chars - Detailed
Message-ID: <20050725123635.82425.qmail@web80906.mail.scd.yahoo.com>

Hi., 
  Thanks Martin and David.
 
Let me clear my question in detail.
The follwing are the lines frequently seen inside comments
 in the souce files from Borland C++ Builder 5.5 free command line tool compiler 
(www.borland.com/bcppbuilder/freecompiler/)
check the files vector.h, utility.h, streambu.h in /Borland/BCC55/Include/
 
/*******************************************************************************
 * U.S. Government Restricted Rights.  This computer software is provided
 * with Restricted Rights.  Use, duplication, or disclosure by the
 * Government is subject to restrictions as set forth in subparagraph (c)
 * (1) (ii) of The Rights in Technical Data and Computer Software clause
 * at DFARS 252.227-7013 or subparagraphs (c) (1) and (2) of the
 * Commercial Computer Software ? Restricted Rights at 48 CFR 52.227-19,
 * as applicable.  Manufacturer is Rogue Wave Software, Inc., 5500
 * Flatiron Parkway, Boulder, Colorado 80301 USA.
 *
 **************************************************************************/ 
 
While parsing these lines with the general COMMENT (multiline) rule, 
parser stops by throwing error 

C:/Borland/BCC55/Include/utility.h: expecting '*', found '?' 

Got this message and included a special char token (?) in the LEXER, but of no use... eventhough my charVocabulary was included with that special char token.

Already I tried and tired a lot to skip this error but fruitless. Actually I want to 
analyze the whole package of Borland application in order to evaluate my 
Master Thesis (Theme: Obtaining variants in C/C++ through conditional compilation) and
 due to the above error i could not able to parse all the files completely. 
Its still annoying.
 
I kindly request ANTLRs' to give me some tips to overcome the error.
 
I'm puzzled but not puzz'ling anybody.
 
Thanks.,
Prem
 
 
 
 
 
 
 
*******************************************************************
Replied Message from David on 25 July
 
 
Hello,

What interested me about the message from Prekumar of 24 July 
was how in some source code a hyphen ("-") could become 
displayed as a "u" circumflex ("?")in DOS mode when the ISO 
8859-1 value of the first is 45 and the second 251 (with a 
difference of 206.

What happens when you use the hyphen for the subtraction 
operator in your source code?

What is the significance of it being in a comment?

What coding system is being used in the source code?

Is this a problem with a particular IDE?

Are we talking MS or UNIX?

Yours puzzled,

David.
*************************************************************************************
 
Original Message from Prem on 24 July
 
 
Hi Everyone.,
   In source codes often comments comes with some kind of
   special characters like ? etc.,
Consider a Comment Line:
/*  Computer Software - Restricted Rights */

In the above comment line, hyphen ('-') between "Software" and 
"Restricted"
looks normal but when we view that in DOS editor it shows
'-' as ?.
My comment line token
Comment
  : "/*"
   ( {LA(2) != '/'}? '*'
   | EndOfLine //{newline();}
   | ~('*'| '\r' | '\n')
   )*
   "*/"  {$setType(Token.SKIP);}// newline();}
  ;

So, I placed a token with that special character in the parser.
But still I'm getting error. The file could not be parsed anymore.

I'm a newbie..please help me to overcome the error.

Thanks in advance.,
Prem



		
---------------------------------
 Start your day with Yahoo! - make it your home page 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050725/09bda978/attachment.html
From mail at martin-probst.com  Mon Jul 25 05:47:39 2005
From: mail at martin-probst.com (Martin Probst)
Date: Mon Jul 25 05:48:08 2005
Subject: [antlr-interest] Re: Problem With Special Chars - Detailed
In-Reply-To: <20050725123635.82425.qmail@web80906.mail.scd.yahoo.com>
References: <20050725123635.82425.qmail@web80906.mail.scd.yahoo.com>
Message-ID: <1122295659.21617.13.camel@localhost.localdomain>

Can you tell us what exactly your charVocabulary is?

From demakov at ispras.ru  Mon Jul 25 06:31:24 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Jul 25 06:31:30 2005
Subject: =?ISO-8859-1?Q?Re:_R=E9f._:_Re:_=5Bantlr-interest=5D_java.lang.OutOfMemor?=
	=?ISO-8859-1?Q?yError?=
References: <OFFBADDD1A.FDDB3DB6-ONC1257049.0044571D-C1257049.004498A1@bnpparibas.com>
Message-ID: <00ea01c5911d$278d7bf0$8cc79553@marlboro>

antlr casts -1 read from input reader:
CharBuffer.fill(i): queue.append( (char)input.read() );

to FFFF

When charVocabulary includes '\uFFFF':

charVocabulary='\u0003'..'\uFFFF';

FFFF is included in the set ~('\n'|'\r') and is successfully matched in the loop.

You can remove FFFF from vocabulary:

charVocabulary='\u0003'..'\uFFFE';

But I don't like this solution because it doesn't handle unicode '\uFFFF'.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


----- Original Message ----- 
From: <loic.lefevre@bnpparibas.com>
To: <antlr-interest@antlr.org>
Sent: Monday, July 25, 2005 4:28 PM
Subject: R?f. : Re: [antlr-interest] java.lang.OutOfMemoryError



Seems I found the origin of the problem but I can't find how to resolve it
yet:

All comes from the implementation of the Reader I use, if you change your
code with:

---8
<-----------------------------------------------------------------------------------------------------------------------------------
----------
    public static void main( String[]  args ) throws TokenStreamException
    {
        RosterExpressionLexer lexer = new RosterExpressionLexer( new
java.io.StringReader("//") );
        while( true )
        {
            Token t = lexer.nextToken();
            if( t.getType() == RosterExpressionTokenTypes.EOF ) break;
            System.out.println( "'" + t.getText() + "'" );
        }
    }
---8
<-----------------------------------------------------------------------------------------------------------------------------------
----------

then you'll get the OutOfMemoryError!

Argh, I'm investigating on the behaviour of this java class!

Lo?c




Internet
demakov@ispras.ru@antlr.org - 25/07/2005 13:19


Envoy? par :      antlr-interest-bounces@antlr.org



Pour : antlr-interest

cc :


Objet :     Re: [antlr-interest] java.lang.OutOfMemoryError

Here is shortened version of your parser with main() reading System.in
I don't see any problems with it

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


----- Original Message -----
From: <loic.lefevre@bnpparibas.com>
To: <antlr-interest@antlr.org>
Sent: Monday, July 25, 2005 2:33 PM
Subject: [antlr-interest] java.lang.OutOfMemoryError



Hello,
My grammar to handle expressions is now finished but now I'm facing a
strange behaviour:
When I try to validate hand typed expressions, I get the terrible
java.lang.OutOfMemoryError when
parsing the expression: //    (two chars)

Here is my grammar:
(See attached file: RosterExpression.g)

It appears that the lexer loops forever:

      public final void mSL_COMMENT(boolean _createToken) throws
RecognitionException, CharStreamException, TokenStreamException {
            int _ttype; Token _token=null; int _begin=text.length();
            _ttype = SL_COMMENT;
            int _saveIndex;

            match("//");
            {
            _loop59:


//--> begin of loop forever
            do {
                  if ((_tokenSet_0.member(LA(1)))) {
                        {
                        match(_tokenSet_0);
                        }
                  }
                  else {
                        break _loop59;
                  }

            } while (true);
//--> end of loop forever


            }
            {
            switch ( LA(1)) {
            case '\n':
            {
                  match('\n');
                  break;
            }
            case '\r':
            {
                  match('\r');
                  {
                  if ((LA(1)=='\n')) {
                        match('\n');
                  }
                  else {
                  }

                  }
                  break;
            }
            default:
                  {
                  }
            }
            }
            if ( inputState.guessing==0 ) {
                  _ttype = Token.SKIP; newline();
            }
            if ( _createToken && _token==null && _ttype!=Token.SKIP ) {
                  _token = makeToken(_ttype);
                  _token.setText(new String(text.getBuffer(), _begin,
text.length()-_begin));
            }
            _returnToken = _token;
      }


Thanks in advance for your help.
Lo?c

This message and any attachments (the "message") is
intended solely for the addressees and is confidential.
If you receive this message in error, please delete it and
immediately notify the sender. Any use not in accord with
its purpose, any dissemination or disclosure, either whole
or partial, is prohibited except formal approval. The internet
can not guarantee the integrity of this message.
BNP PARIBAS (and its subsidiaries) shall (will) not
therefore be liable for the message if modified.

                ---------------------------------------------

Ce message et toutes les pieces jointes (ci-apres le
"message") sont etablis a l'intention exclusive de ses
destinataires et sont confidentiels. Si vous recevez ce
message par erreur, merci de le detruire et d'en avertir
immediatement l'expediteur. Toute utilisation de ce
message non conforme a sa destination, toute diffusion
ou toute publication, totale ou partielle, est interdite, sauf
autorisation expresse. L'internet ne permettant pas
d'assurer l'integrite de ce message, BNP PARIBAS (et ses
filiales) decline(nt) toute responsabilite au titre de ce
message, dans l'hypothese ou il aurait ete modifie.

(See attached file: RosterExpression.g)

This message and any attachments (the "message") is
intended solely for the addressees and is confidential.
If you receive this message in error, please delete it and
immediately notify the sender. Any use not in accord with
its purpose, any dissemination or disclosure, either whole
or partial, is prohibited except formal approval. The internet
can not guarantee the integrity of this message.
BNP PARIBAS (and its subsidiaries) shall (will) not
therefore be liable for the message if modified.

                ---------------------------------------------

Ce message et toutes les pieces jointes (ci-apres le
"message") sont etablis a l'intention exclusive de ses
destinataires et sont confidentiels. Si vous recevez ce
message par erreur, merci de le detruire et d'en avertir
immediatement l'expediteur. Toute utilisation de ce
message non conforme a sa destination, toute diffusion
ou toute publication, totale ou partielle, est interdite, sauf
autorisation expresse. L'internet ne permettant pas
d'assurer l'integrite de ce message, BNP PARIBAS (et ses
filiales) decline(nt) toute responsabilite au titre de ce
message, dans l'hypothese ou il aurait ete modifie.


From loic.lefevre at bnpparibas.com  Mon Jul 25 06:56:34 2005
From: loic.lefevre at bnpparibas.com (loic.lefevre@bnpparibas.com)
Date: Mon Jul 25 06:57:20 2005
Subject: =?ISO-8859-1?Q?R=E9f=2E_=3A_Re=3A_R=E9f=2E_=3A_Re=3A_[antlr-interest]_?=
	=?ISO-8859-1?Q?java=2Elang=2EOutOfMemoryError?=
In-Reply-To: <00ea01c5911d$278d7bf0$8cc79553@marlboro>
Message-ID: <OF7E5D83C1.C8404154-ONC1257049.004BB00A-C1257049.004C9784@bnpparibas.com>

Indeed, I was just finishing running all my testcases but I've found a
solution slightly similar than yours:

// Single-line comments
SL_COMMENT
      :     "//"
            (~('\uffff'|'\n'|'\r'))* ('\n'|'\r'('\n')?)?
            {$setType(Token.SKIP); newline();}
      ;

I've just added this and now it works.
I also added it here:

// string literals
STRING_LITERAL
      :     '"'! (REGEXP_ESC|~('\uffff'|'"'|'\\'|'\n'|'\r'))* '"'!
      ;

Thanks a lot!
Lo?c




Internet
demakov@ispras.ru@antlr.org - 25/07/2005 15:31


Envoy? par :      antlr-interest-bounces@antlr.org



Pour : antlr-interest

cc :


Objet :     Re: R?f. : Re: [antlr-interest] java.lang.OutOfMemoryError

antlr casts -1 read from input reader:
CharBuffer.fill(i): queue.append( (char)input.read() );

to FFFF

When charVocabulary includes '\uFFFF':

charVocabulary='\u0003'..'\uFFFF';

FFFF is included in the set ~('\n'|'\r') and is successfully matched in the
loop.

You can remove FFFF from vocabulary:

charVocabulary='\u0003'..'\uFFFE';

But I don't like this solution because it doesn't handle unicode '\uFFFF'.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


----- Original Message -----
From: <loic.lefevre@bnpparibas.com>
To: <antlr-interest@antlr.org>
Sent: Monday, July 25, 2005 4:28 PM
Subject: R?f. : Re: [antlr-interest] java.lang.OutOfMemoryError



Seems I found the origin of the problem but I can't find how to resolve it
yet:

All comes from the implementation of the Reader I use, if you change your
code with:

---8
<-----------------------------------------------------------------------------------------------------------------------------------

----------
    public static void main( String[]  args ) throws TokenStreamException
    {
        RosterExpressionLexer lexer = new RosterExpressionLexer( new
java.io.StringReader("//") );
        while( true )
        {
            Token t = lexer.nextToken();
            if( t.getType() == RosterExpressionTokenTypes.EOF ) break;
            System.out.println( "'" + t.getText() + "'" );
        }
    }
---8
<-----------------------------------------------------------------------------------------------------------------------------------

----------

then you'll get the OutOfMemoryError!

Argh, I'm investigating on the behaviour of this java class!

Lo?c




Internet
demakov@ispras.ru@antlr.org - 25/07/2005 13:19


Envoy? par :      antlr-interest-bounces@antlr.org



Pour : antlr-interest

cc :


Objet :     Re: [antlr-interest] java.lang.OutOfMemoryError

Here is shortened version of your parser with main() reading System.in
I don't see any problems with it

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


----- Original Message -----
From: <loic.lefevre@bnpparibas.com>
To: <antlr-interest@antlr.org>
Sent: Monday, July 25, 2005 2:33 PM
Subject: [antlr-interest] java.lang.OutOfMemoryError



Hello,
My grammar to handle expressions is now finished but now I'm facing a
strange behaviour:
When I try to validate hand typed expressions, I get the terrible
java.lang.OutOfMemoryError when
parsing the expression: //    (two chars)

Here is my grammar:
(See attached file: RosterExpression.g)

It appears that the lexer loops forever:

      public final void mSL_COMMENT(boolean _createToken) throws
RecognitionException, CharStreamException, TokenStreamException {
            int _ttype; Token _token=null; int _begin=text.length();
            _ttype = SL_COMMENT;
            int _saveIndex;

            match("//");
            {
            _loop59:


//--> begin of loop forever
            do {
                  if ((_tokenSet_0.member(LA(1)))) {
                        {
                        match(_tokenSet_0);
                        }
                  }
                  else {
                        break _loop59;
                  }

            } while (true);
//--> end of loop forever


            }
            {
            switch ( LA(1)) {
            case '\n':
            {
                  match('\n');
                  break;
            }
            case '\r':
            {
                  match('\r');
                  {
                  if ((LA(1)=='\n')) {
                        match('\n');
                  }
                  else {
                  }

                  }
                  break;
            }
            default:
                  {
                  }
            }
            }
            if ( inputState.guessing==0 ) {
                  _ttype = Token.SKIP; newline();
            }
            if ( _createToken && _token==null && _ttype!=Token.SKIP ) {
                  _token = makeToken(_ttype);
                  _token.setText(new String(text.getBuffer(), _begin,
text.length()-_begin));
            }
            _returnToken = _token;
      }


Thanks in advance for your help.
Lo?c

This message and any attachments (the "message") is
intended solely for the addressees and is confidential.
If you receive this message in error, please delete it and
immediately notify the sender. Any use not in accord with
its purpose, any dissemination or disclosure, either whole
or partial, is prohibited except formal approval. The internet
can not guarantee the integrity of this message.
BNP PARIBAS (and its subsidiaries) shall (will) not
therefore be liable for the message if modified.

                ---------------------------------------------

Ce message et toutes les pieces jointes (ci-apres le
"message") sont etablis a l'intention exclusive de ses
destinataires et sont confidentiels. Si vous recevez ce
message par erreur, merci de le detruire et d'en avertir
immediatement l'expediteur. Toute utilisation de ce
message non conforme a sa destination, toute diffusion
ou toute publication, totale ou partielle, est interdite, sauf
autorisation expresse. L'internet ne permettant pas
d'assurer l'integrite de ce message, BNP PARIBAS (et ses
filiales) decline(nt) toute responsabilite au titre de ce
message, dans l'hypothese ou il aurait ete modifie.

(See attached file: RosterExpression.g)

This message and any attachments (the "message") is
intended solely for the addressees and is confidential.
If you receive this message in error, please delete it and
immediately notify the sender. Any use not in accord with
its purpose, any dissemination or disclosure, either whole
or partial, is prohibited except formal approval. The internet
can not guarantee the integrity of this message.
BNP PARIBAS (and its subsidiaries) shall (will) not
therefore be liable for the message if modified.

                ---------------------------------------------

Ce message et toutes les pieces jointes (ci-apres le
"message") sont etablis a l'intention exclusive de ses
destinataires et sont confidentiels. Si vous recevez ce
message par erreur, merci de le detruire et d'en avertir
immediatement l'expediteur. Toute utilisation de ce
message non conforme a sa destination, toute diffusion
ou toute publication, totale ou partielle, est interdite, sauf
autorisation expresse. L'internet ne permettant pas
d'assurer l'integrite de ce message, BNP PARIBAS (et ses
filiales) decline(nt) toute responsabilite au titre de ce
message, dans l'hypothese ou il aurait ete modifie.





This message and any attachments (the "message") is
intended solely for the addressees and is confidential. 
If you receive this message in error, please delete it and 
immediately notify the sender. Any use not in accord with 
its purpose, any dissemination or disclosure, either whole 
or partial, is prohibited except formal approval. The internet
can not guarantee the integrity of this message. 
BNP PARIBAS (and its subsidiaries) shall (will) not 
therefore be liable for the message if modified. 

                ---------------------------------------------

Ce message et toutes les pieces jointes (ci-apres le 
"message") sont etablis a l'intention exclusive de ses 
destinataires et sont confidentiels. Si vous recevez ce 
message par erreur, merci de le detruire et d'en avertir 
immediatement l'expediteur. Toute utilisation de ce 
message non conforme a sa destination, toute diffusion 
ou toute publication, totale ou partielle, est interdite, sauf 
autorisation expresse. L'internet ne permettant pas 
d'assurer l'integrite de ce message, BNP PARIBAS (et ses
filiales) decline(nt) toute responsabilite au titre de ce 
message, dans l'hypothese ou il aurait ete modifie.
From demakov at ispras.ru  Mon Jul 25 07:11:12 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Jul 25 07:11:15 2005
Subject: =?ISO-8859-1?Q?Re:_R=E9f._:_Re:_R=E9f._:_Re:_=5Bantlr-interest=5D_java.la?=
	=?ISO-8859-1?Q?ng.OutOfMemoryError?=
References: <OF7E5D83C1.C8404154-ONC1257049.004BB00A-C1257049.004C9784@bnpparibas.com>
Message-ID: <010f01c59122$b6747c10$8cc79553@marlboro>

Of course it works. But what if your input file contains '\uffff'?
For example, 5 files in sun jdk 1.5.0 sources contain it in string literals.
The only solution I see is to make additional check of input
when '\uffff' occurs in lexer - to distinguish between real '\uffff'
and end of stream.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com



----- Original Message ----- 
From: <loic.lefevre@bnpparibas.com>
To: <antlr-interest@antlr.org>
Sent: Monday, July 25, 2005 5:56 PM
Subject: R?f. : Re: R?f. : Re: [antlr-interest] java.lang.OutOfMemoryError


> Indeed, I was just finishing running all my testcases but I've found a
> solution slightly similar than yours:
>
> // Single-line comments
> SL_COMMENT
>       :     "//"
>             (~('\uffff'|'\n'|'\r'))* ('\n'|'\r'('\n')?)?
>             {$setType(Token.SKIP); newline();}
>       ;
>
> I've just added this and now it works.
> I also added it here:
>
> // string literals
> STRING_LITERAL
>       :     '"'! (REGEXP_ESC|~('\uffff'|'"'|'\\'|'\n'|'\r'))* '"'!
>       ;
>
> Thanks a lot!
> Lo?c
>
>
>
>
> Internet
> demakov@ispras.ru@antlr.org - 25/07/2005 15:31
>
>
> Envoy? par :      antlr-interest-bounces@antlr.org
>
>
>
> Pour : antlr-interest
>
> cc :
>
>
> Objet :     Re: R?f. : Re: [antlr-interest] java.lang.OutOfMemoryError
>
> antlr casts -1 read from input reader:
> CharBuffer.fill(i): queue.append( (char)input.read() );
>
> to FFFF
>
> When charVocabulary includes '\uFFFF':
>
> charVocabulary='\u0003'..'\uFFFF';
>
> FFFF is included in the set ~('\n'|'\r') and is successfully matched in the
> loop.
>
> You can remove FFFF from vocabulary:
>
> charVocabulary='\u0003'..'\uFFFE';
>
> But I don't like this solution because it doesn't handle unicode '\uFFFF'.
>
> Regards,
> Alexey
>
> -----
> Alexey Demakov
> TreeDL: Tree Description Language: http://treedl.sourceforge.net
> RedVerst Group: http://www.unitesk.com
>
>
> ----- Original Message -----
> From: <loic.lefevre@bnpparibas.com>
> To: <antlr-interest@antlr.org>
> Sent: Monday, July 25, 2005 4:28 PM
> Subject: R?f. : Re: [antlr-interest] java.lang.OutOfMemoryError
>
>
>
> Seems I found the origin of the problem but I can't find how to resolve it
> yet:
>
> All comes from the implementation of the Reader I use, if you change your
> code with:
>
> ---8
>
<-----------------------------------------------------------------------------------------------------------------------------------
>
> ----------
>     public static void main( String[]  args ) throws TokenStreamException
>     {
>         RosterExpressionLexer lexer = new RosterExpressionLexer( new
> java.io.StringReader("//") );
>         while( true )
>         {
>             Token t = lexer.nextToken();
>             if( t.getType() == RosterExpressionTokenTypes.EOF ) break;
>             System.out.println( "'" + t.getText() + "'" );
>         }
>     }
> ---8
>
<-----------------------------------------------------------------------------------------------------------------------------------
>
> ----------
>
> then you'll get the OutOfMemoryError!
>
> Argh, I'm investigating on the behaviour of this java class!
>
> Lo?c
>
>
>
>
> Internet
> demakov@ispras.ru@antlr.org - 25/07/2005 13:19
>
>
> Envoy? par :      antlr-interest-bounces@antlr.org
>
>
>
> Pour : antlr-interest
>
> cc :
>
>
> Objet :     Re: [antlr-interest] java.lang.OutOfMemoryError
>
> Here is shortened version of your parser with main() reading System.in
> I don't see any problems with it
>
> Regards,
> Alexey
>
> -----
> Alexey Demakov
> TreeDL: Tree Description Language: http://treedl.sourceforge.net
> RedVerst Group: http://www.unitesk.com
>
>
> ----- Original Message -----
> From: <loic.lefevre@bnpparibas.com>
> To: <antlr-interest@antlr.org>
> Sent: Monday, July 25, 2005 2:33 PM
> Subject: [antlr-interest] java.lang.OutOfMemoryError
>
>
>
> Hello,
> My grammar to handle expressions is now finished but now I'm facing a
> strange behaviour:
> When I try to validate hand typed expressions, I get the terrible
> java.lang.OutOfMemoryError when
> parsing the expression: //    (two chars)
>
> Here is my grammar:
> (See attached file: RosterExpression.g)
>
> It appears that the lexer loops forever:
>
>       public final void mSL_COMMENT(boolean _createToken) throws
> RecognitionException, CharStreamException, TokenStreamException {
>             int _ttype; Token _token=null; int _begin=text.length();
>             _ttype = SL_COMMENT;
>             int _saveIndex;
>
>             match("//");
>             {
>             _loop59:
>
>
> //--> begin of loop forever
>             do {
>                   if ((_tokenSet_0.member(LA(1)))) {
>                         {
>                         match(_tokenSet_0);
>                         }
>                   }
>                   else {
>                         break _loop59;
>                   }
>
>             } while (true);
> //--> end of loop forever
>
>
>             }
>             {
>             switch ( LA(1)) {
>             case '\n':
>             {
>                   match('\n');
>                   break;
>             }
>             case '\r':
>             {
>                   match('\r');
>                   {
>                   if ((LA(1)=='\n')) {
>                         match('\n');
>                   }
>                   else {
>                   }
>
>                   }
>                   break;
>             }
>             default:
>                   {
>                   }
>             }
>             }
>             if ( inputState.guessing==0 ) {
>                   _ttype = Token.SKIP; newline();
>             }
>             if ( _createToken && _token==null && _ttype!=Token.SKIP ) {
>                   _token = makeToken(_ttype);
>                   _token.setText(new String(text.getBuffer(), _begin,
> text.length()-_begin));
>             }
>             _returnToken = _token;
>       }
>
>
> Thanks in advance for your help.
> Lo?c
>
> This message and any attachments (the "message") is
> intended solely for the addressees and is confidential.
> If you receive this message in error, please delete it and
> immediately notify the sender. Any use not in accord with
> its purpose, any dissemination or disclosure, either whole
> or partial, is prohibited except formal approval. The internet
> can not guarantee the integrity of this message.
> BNP PARIBAS (and its subsidiaries) shall (will) not
> therefore be liable for the message if modified.
>
>                 ---------------------------------------------
>
> Ce message et toutes les pieces jointes (ci-apres le
> "message") sont etablis a l'intention exclusive de ses
> destinataires et sont confidentiels. Si vous recevez ce
> message par erreur, merci de le detruire et d'en avertir
> immediatement l'expediteur. Toute utilisation de ce
> message non conforme a sa destination, toute diffusion
> ou toute publication, totale ou partielle, est interdite, sauf
> autorisation expresse. L'internet ne permettant pas
> d'assurer l'integrite de ce message, BNP PARIBAS (et ses
> filiales) decline(nt) toute responsabilite au titre de ce
> message, dans l'hypothese ou il aurait ete modifie.
>
> (See attached file: RosterExpression.g)
>
> This message and any attachments (the "message") is
> intended solely for the addressees and is confidential.
> If you receive this message in error, please delete it and
> immediately notify the sender. Any use not in accord with
> its purpose, any dissemination or disclosure, either whole
> or partial, is prohibited except formal approval. The internet
> can not guarantee the integrity of this message.
> BNP PARIBAS (and its subsidiaries) shall (will) not
> therefore be liable for the message if modified.
>
>                 ---------------------------------------------
>
> Ce message et toutes les pieces jointes (ci-apres le
> "message") sont etablis a l'intention exclusive de ses
> destinataires et sont confidentiels. Si vous recevez ce
> message par erreur, merci de le detruire et d'en avertir
> immediatement l'expediteur. Toute utilisation de ce
> message non conforme a sa destination, toute diffusion
> ou toute publication, totale ou partielle, est interdite, sauf
> autorisation expresse. L'internet ne permettant pas
> d'assurer l'integrite de ce message, BNP PARIBAS (et ses
> filiales) decline(nt) toute responsabilite au titre de ce
> message, dans l'hypothese ou il aurait ete modifie.
>
>
>
>
>
> This message and any attachments (the "message") is
> intended solely for the addressees and is confidential.
> If you receive this message in error, please delete it and
> immediately notify the sender. Any use not in accord with
> its purpose, any dissemination or disclosure, either whole
> or partial, is prohibited except formal approval. The internet
> can not guarantee the integrity of this message.
> BNP PARIBAS (and its subsidiaries) shall (will) not
> therefore be liable for the message if modified.
>
>                 ---------------------------------------------
>
> Ce message et toutes les pieces jointes (ci-apres le
> "message") sont etablis a l'intention exclusive de ses
> destinataires et sont confidentiels. Si vous recevez ce
> message par erreur, merci de le detruire et d'en avertir
> immediatement l'expediteur. Toute utilisation de ce
> message non conforme a sa destination, toute diffusion
> ou toute publication, totale ou partielle, est interdite, sauf
> autorisation expresse. L'internet ne permettant pas
> d'assurer l'integrite de ce message, BNP PARIBAS (et ses
> filiales) decline(nt) toute responsabilite au titre de ce
> message, dans l'hypothese ou il aurait ete modifie.
>


From tarunkhanna at gmail.com  Mon Jul 25 10:00:14 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Mon Jul 25 10:00:20 2005
Subject: [antlr-interest] constructor in a Parser Class
Message-ID: <dbcf4c2c050725100019354dd7@mail.gmail.com>

If have some private variables to initialize, how do we specify these 
initializations in a constructor. If I try to write a constructor, the 
compiler complains..

I noticed the generated code contains constructors that do some stuff. I 
would want these constructors to additionally initialize some of my 
variables. How can that be done.


Thanks
-- 
Tarun Khanna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050725/bd2beef7/attachment.html
From mail at martin-probst.com  Mon Jul 25 14:48:56 2005
From: mail at martin-probst.com (Martin Probst)
Date: Mon Jul 25 14:49:02 2005
Subject: [antlr-interest] Re: Problem With Special Chars - Detailed
In-Reply-To: <20050725135554.10902.qmail@web80905.mail.scd.yahoo.com>
References: <20050725135554.10902.qmail@web80905.mail.scd.yahoo.com>
Message-ID: <1122328136.32048.2.camel@localhost.localdomain>

Hi,

>   These are the lines from my Vocab file. Is this the one you meant or
> someother? 

I see, you don't know about the charVocabulary option I was referring
to. Quote from a webpage which exactly explains your problem and the
solution:

> charVocabulary: Setting the lexer character vocabulary 
> ANTLR processes Unicode. Because of this this, ANTLR cannot make any
> assumptions about the character set in use, else it would wind up
> generating huge lexers. Instead ANTLR assumes that the character
> literals, string literals, and character ranges used in the lexer
> constitute the entire character set of interest. For example, in this
> lexer:  
> 
> class L extends Lexer;
> A : 'a';
> B : 'b';
> DIGIT : '0' .. '9';   
>   
>     
>     The implied character set is { 'a', 
>       'b', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9' }. This can produce 
>       unexpected results if you assume that the normal ASCII character set is 
>       always used. For example, in: 
> class L extends Lexer;
> A : 'a';
> B : 'b';
> DIGIT : '0' .. '9';
> STRING: '"' (~'"")* '"';   
>   
>   
> The lexer rule STRING will only match strings containing 'a', 'b' and
> the digits, which is usually not what you want. To control the
> character set used by the lexer, use the charVocbaulary option. This
> example will use a general eight-bit character set. 
> 
> class L extends Lexer;
> options { charVocabulary =  
> '\3'..'\377';   
>   }   
>    
>   ...    
>    
>      
> 
> This example uses the ASCII character set in conjunction with some
> values from the extended Unicode character set:  
> 
> 
> class L extends Lexer;
> options {
> 	charVocabulary =   '\3'..'\377'
> |
> '\u1000'..'\u1fff';
>    
>  
> 	}

From sapna.mirje at xecomit.com  Tue Jul 26 00:14:14 2005
From: sapna.mirje at xecomit.com (Sapna Mirje)
Date: Tue Jul 26 00:15:08 2005
Subject: [antlr-interest] Customized Error Messages
Message-ID: <OHENKPIPIKGEBMADPEHKAEKACBAA.sapna.mirje@xecomit.com>

Hello,

    I am writing a grammar to parse a given expression. However I want to
display appropriate error messages to the user instead of antlrs default
error messages like "expected 'a' found '['" . I have tried with setting
option of parser defaulthandler= false and setting paraphrases for each
rule. Have also tried with customized exception handling for each rule. Just
wanted to know if there are any more ways in which i can create my own error
messages?????
Also can we define paraphrases for lexer. It allowed me to set it in lexer
but did not show the the same in erro message.

Regard's
Sapna



This message was checked by MailScan for WorkgroupMail.
www.workgroupmail.com 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050726/b41cd8b5/attachment.html
From gt54-antlr at cyconix.com  Tue Jul 26 01:06:20 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Tue Jul 26 01:06:29 2005
Subject: [antlr-interest] 3.0 C++ wishlist
Message-ID: <42E5EEFC.2040904@cyconix.com>

Can we please have virtual getParent and addSibling routines in 3.0? 
This will save lots of typecasting:

virtual RefAST getParent() const;
virtual void addSibling(RefAST);

'setParent' might be nice as well, but may be unnecessary, since you can 
implement it by over-riding 'addChild'/etc.

Some AST iterator functionality would be nice, but may take some 
thinking about.

are there any preprocessor macros that'll let us know what ANTLR version 
we've got?

Paul

From mnemo at minimum.se  Tue Jul 26 02:07:54 2005
From: mnemo at minimum.se (Martin Olsson)
Date: Tue Jul 26 02:08:00 2005
Subject: [antlr-interest] Proper way to catch parse errors
Message-ID: <44580.194.237.142.5.1122368874.squirrel@www.scorpiondata.com>

Hi,

I'm developing an Eclipse plugin and I'm using ANTLR for refactoring etc.
Currently parse errors are correctly propagated into the Eclipse problems
view, but I would like to clean up the code a little bit.

In particular I don't understand why start() throws RecognitionException
but at the same time my method override reportError() is also called? Why
is there two different ways to catch the same error? Currently, I ignore
all exceptions thrown by start() which I feel is a little bit ugly.


Sincerly,
Martin

(below is the first part of my parser .g code)
------------------------------------------------------------------


class DUPParser extends Parser;
options {
	k = 4;		// The lookahead depth
}
{
	protected MyEditor editor = null;

	public MyParser(TokenStream lexer, MyEditor editor) {
	  this(lexer, 4);
	  this.editor = editor;
	}

	public void reportError(RecognitionException e) {
		editor.reportError(e.getMessage(),
                                   e.getLine(),
                                   e.getColumn());
	}

	public final void parseIntoModule(MyModule module) {
		try {
			start(module);
		} catch (Exception e) {
                     /* not used?! */
                }
	}
}

From mnemo at minimum.se  Tue Jul 26 03:20:17 2005
From: mnemo at minimum.se (Martin Olsson)
Date: Tue Jul 26 03:20:22 2005
Subject: [antlr-interest] Cust error recovery
Message-ID: <3763.194.237.142.5.1122373217.squirrel@www.scorpiondata.com>

Hi (again :o),

When ANTLR runs into a parse error I would like it to skip chars/tokens
until a specific char/token is seen. After digging a while in the ANTLR
source I noticed that there is a method called consumeUntil() which seems
to do what I what.

The problem is, when should I call it? How can I hook my own stuff into
the lexer's bad-token-found code?

And if I do this must I set the defaultErrorHandler=false option? Because
it's not everywhere in the lexer I want to change the recovery procedure.


sincerly,
martin


From rprememail at yahoo.com  Tue Jul 26 04:13:48 2005
From: rprememail at yahoo.com (Premkumar Rathanavelu)
Date: Tue Jul 26 04:13:50 2005
Subject: [antlr-interest] Problem with Special Char 
Message-ID: <20050726111348.39196.qmail@web80910.mail.scd.yahoo.com>

Hi.,
  Thanks Martin.
After reading your reply i came to know about the charVocabulary
option and now when i added the following lines to my LEXER
 
options{
charVocabulary = '\u0000'..'\uFFFE';
}
its working pretty fine.
 
HATS OFF Martin.
 
I have another question..consider the following rule
 
in PARSER
 
testPragmaRule:
 MacroPragma testLine ;
 
testLine:
(~(EndOfLine)*);
 
in LEXER
 
MacroPragma : "#pragma";
EndOfLine:
 ( options{generateAmbigWarnings = false;}:
   "\r\n"  // WIN
  | '\r'    // Mac
  | '\n'    // Unix
  )  {newline();} 
 ;
 
Line to be Parsed:
#pragma Computer Software ? Restricted
 
now i'm getting the error 

unexpected char: 0x2013 (this is the hyphen)
 
Could you please tell me why this happens?
 
Eager to get your reply.
 
Thanks.,
Prem


		
---------------------------------
Yahoo! Mail for Mobile
 Take Yahoo! Mail with you! Check email on your mobile phone.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050726/c46ecac4/attachment.html
From xavier.benveniste at free.fr  Tue Jul 26 06:13:07 2005
From: xavier.benveniste at free.fr (Xavier Benveniste)
Date: Tue Jul 26 06:12:40 2005
Subject: [antlr-interest] Evaluation boolean expressions
Message-ID: <001201c591e3$c3e844f0$79f53951@thedude>

Hi,

I (hardly) succeeded in building a very simple int calculator.
Then, I succeeded in building an int 'equality' evaluator :
for instance, if I enter :
5+(4*3) > 10 + 9
I have the following result :

( > ( + 5 ( * 4 3 ) ) ( + 10 9 ) )

false

So far, so good.

Now, what I'm trying to do is to evaluate expression like :
(4 + (5*2) > 15) OR (4>1).
But, here I'm stuck.

You 'll find below the grammar I wrote.
I'm sure it's pretty straightforward but I can't manage to achieve it.
If any ANTLR's guru could help me.
Thanks.
class ExprParser extends Parser;

options {

buildAST = true;

defaultErrorHandler = false;

}

//logicalOrExpression: logicalAndExpression (OR^ logicalAndExpression)*

// ;

//logicalAndExpression: bexpr (AND^ bexpr)*

// ;

bexpr: expr ((EQUALS^|NOT_EQUALS^|GT^|GTE^|LT^|LTE^) expr)*

;

expr: mexpr ((PLUS^|MINUS^) mexpr)*

;


mexpr

: atom ((MULT^|DIV^) atom)*

;

atom: INT

| LPAREN! expr RPAREN!

// | LPAREN! logicalOrExpression RPAREN!

;

class ExprLexer extends Lexer;

options {

k = 2; // two characters of lookahead

}

/* Integers */

INT : ('0'..'9')+ ;

/* Ignored characters */

WS : ( ' '

| '\r' '\n'

| '\n'

| '\t'

)

{$setType(Token.SKIP);}

;

/* Logical operators */

OR : "OR";

AND : "AND";

/* Comparison operators */

EQUALS : "==";

NOT_EQUALS : "<>";

GT : '>';

GTE : ">=";

LT : '<';

LTE : "<=";

/* Arithmetic operators */

PLUS : '+';

MINUS : '-';

MULT : '*';

DIV : '/';

/* Parentheses */

LPAREN : '(';

RPAREN : ')';

class ExprTreeParser extends TreeParser;

options {

importVocab=ExprParser;

}

expr returns [int r=0] { int a,b;}

: #(PLUS a=expr b=expr) { r = a + b;}

| #(MINUS a=expr b=expr) { r = a - b; }

| #(MULT a=expr b=expr) { r = a * b; }

| #(DIV a=expr b=expr) { r = a / b; }

| i:INT {r = (int)Integer.parseInt(i.getText());}

;

bexpr returns [boolean r=false] { int a,b; }

: #(EQUALS a=expr b=expr) {r = (a == b);}

| #(NOT_EQUALS a=expr b=expr) {r = (a != b);} 

| #(GT a=expr b=expr) {r = (a > b);}

| #(GTE a=expr b=expr) {r = (a >= b);}

| #(LT a=expr b=expr) {r = (a < b);}

| #(LTE a=expr b=expr) {r = (a <= b);}

;

//logicalAndExpression returns [boolean r=false] { boolean a,b; }

// : #(AND a=bexpr b=bexpr) {r = (a && b); }

// ;


//logicalOrExpression returns [boolean r=false] {boolean a,b; }

// : #(OR a=logicalAndExpression b=logicalAndExpression) {r = (a || b);}

// ;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050726/c0dfe465/attachment-0001.html
From open.zone at virgin.net  Tue Jul 26 07:40:33 2005
From: open.zone at virgin.net (Micheal J)
Date: Tue Jul 26 07:26:23 2005
Subject: [antlr-interest] Problem with Special Char 
In-Reply-To: <20050726111348.39196.qmail@web80910.mail.scd.yahoo.com>
Message-ID: <006501c591ef$ff138dd0$6402a8c0@hercules>

PS: Please don't post in HTML format.
 
 
(~EndOfLine) isn't valid ANTLR usage IIRC. You need to specify the
indivisual chars thus:
 
(~('\n'|'\r'))

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Premkumar Rathanavelu
Sent: 26 July 2005 12:14
To: antlr-interest@antlr.org
Subject: [antlr-interest] Problem with Special Char 


Hi.,
  Thanks Martin.
After reading your reply i came to know about the charVocabulary
option and now when i added the following lines to my LEXER
 
options{
charVocabulary = '\u0000'..'\uFFFE';
}
its working pretty fine.
 
HATS OFF Martin.
 
I have another question..consider the following rule
 
in PARSER
 
testPragmaRule:
 MacroPragma testLine ;
 
testLine:
(~(EndOfLine)*);
 
in LEXER
 
MacroPragma : "#pragma";
EndOfLine:
 ( options{generateAmbigWarnings = false;}:
   "\r\n"  // WIN
  | '\r'    // Mac
  | '\n'    // Unix
  )  {newline();} 
 ;
 
Line to be Parsed:
#pragma Computer Software - Restricted
 
now i'm getting the error 

unexpected char: 0x2013 (this is the hyphen)
 
Could you please tell me why this happens?
 
Eager to get your reply.
 
Thanks.,
Prem




  _____  

Yahoo! Mail for Mobile
Take  <http://us.rd.yahoo.com/evt=31132/*http://mobile.yahoo.com/learn/mail>
Yahoo! Mail with you! Check email on your mobile phone.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050726/44e3bd55/attachment.html
From rprememail at yahoo.com  Tue Jul 26 08:04:40 2005
From: rprememail at yahoo.com (Premkumar Rathanavelu)
Date: Tue Jul 26 08:04:41 2005
Subject: [antlr-interest] Problem with Special Chars: solved
Message-ID: <20050726150440.4718.qmail@web80909.mail.scd.yahoo.com>

Hi.,
 
But char literals not allowed in PARSER. 
 
Anyway I fixed the error by including a special token with charVocabulary in LEXER.
 
Now I could able to parse without any error.
 
Thanks for all who helped me to sought out the problem.
 
Keep Going.,
Prem
 
******************
 
Message from Micheal J on 26 July
 
>(~EndOfLine) isn't valid ANTLR usage IIRC. You need to specify the
>indivisual chars thus:
 
>(~('\n'|'\r'))


		
---------------------------------
 Start your day with Yahoo! - make it your home page 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050726/0d9963d7/attachment.html
From tarunkhanna at gmail.com  Tue Jul 26 08:35:21 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Tue Jul 26 08:35:24 2005
Subject: [antlr-interest] Evaluation boolean expressions
In-Reply-To: <001201c591e3$c3e844f0$79f53951@thedude>
References: <001201c591e3$c3e844f0$79f53951@thedude>
Message-ID: <dbcf4c2c0507260835174cfcb3@mail.gmail.com>

Hi,

Here is the changed grammar. Seems to work fine. I hope you'll notice the 
changes...

The first one is in atom, atom: LPAREN logicalOrExpression RPAREN

Then in the TreeParser, I have added a new rule lexpr.

Parse the tree using logicalOrExpression as the starting point. Then use the 
lexpr to walk the tree.

-----------------------------
class ExprParser extends Parser;

options {

buildAST = true;

defaultErrorHandler = false;

}

logicalOrExpression: logicalAndExpression (OR^ logicalAndExpression)*

;

logicalAndExpression: bexpr (AND^ bexpr)*

;

bexpr: expr ((EQUALS^|NOT_EQUALS^|GT^|GTE^|LT^|LTE^) expr)*

;

expr: mexpr ((PLUS^|MINUS^) mexpr)*

;

mexpr

: atom ((MULT^|DIV^) atom)*

;

atom: INT

| LPAREN! logicalOrExpression RPAREN!

// | LPAREN! logicalOrExpression RPAREN!

;

class ExprLexer extends Lexer;

options {

k = 2; // two characters of lookahead

}

/* Integers */

INT : ('0'..'9')+ ;

/* Ignored characters */

WS : ( ' '

| '\r' '\n'

| '\n'

| '\t'

)

{$setType(Token.SKIP);}

;

/* Logical operators */

OR : "OR";

AND : "AND";

/* Comparison operators */

EQUALS : "==";

NOT_EQUALS : "<>";

GT : '>';

GTE : ">=";

LT : '<';

LTE : "<=";

/* Arithmetic operators */

PLUS : '+';

MINUS : '-';

MULT : '*';

DIV : '/';

/* Parentheses */

LPAREN : '(';

RPAREN : ')';

class ExprTreeParser extends TreeParser;

options {

importVocab=ExprParser;

}

expr returns [int r=0] { int a,b;}

: #(PLUS a=expr b=expr) { r = a + b;}

| #(MINUS a=expr b=expr) { r = a - b; }

| #(MULT a=expr b=expr) { r = a * b; }

| #(DIV a=expr b=expr) { r = a / b; }


| i:INT {r = (int)Integer.parseInt(i.getText());}

;

bexpr returns [boolean r=false] { int a,b; }

: #(EQUALS a=expr b=expr) {r = (a == b);}

| #(NOT_EQUALS a=expr b=expr) {r = (a != b);}

| #(GT a=expr b=expr) {r = (a > b);}

| #(GTE a=expr b=expr) {r = (a >= b);}

| #(LT a=expr b=expr) {r = (a < b);}

| #(LTE a=expr b=expr) {r = (a <= b);}

;

lexpr returns [boolean r= false] {boolean a, b;}
: #(OR a=bexpr b=bexpr) { r = a || b; }

| #(AND a=bexpr b=bexpr) { r = a && b; }

;




On 7/26/05, Xavier Benveniste <xavier.benveniste@free.fr> wrote:
> 
> Hi,
>  I (hardly) succeeded in building a very simple int calculator.
> Then, I succeeded in building an int 'equality' evaluator :
> for instance, if I enter :
> 5+(4*3) > 10 + 9
> 
> I have the following result :
> 
> ( > ( + 5 ( * 4 3 ) ) ( + 10 9 ) )
> 
> false
> 
> So far, so good.
> Now, what I'm trying to do is to evaluate expression like :
> (4 + (5*2) > 15) OR (4>1).
> But, here I'm stuck.
>  You 'll find below the grammar I wrote.
> I'm sure it's pretty straightforward but I can't manage to achieve it.
> If any ANTLR's guru could help me.
> Thanks.
> * 
> 
> class
> * ExprParser *extends* Parser;* 
> 
> options
> * { 
> 
> buildAST = 
> *true*; 
> 
> defaultErrorHandler = 
> *false*; 
> 
> }
> 
> //logicalOrExpression: logicalAndExpression (OR^ logicalAndExpression)*
> 
> // ;
> 
> //logicalAndExpression: bexpr (AND^ bexpr)*
> 
> // ;
> 
> bexpr: expr ((EQUALS^|NOT_EQUALS^|GT^|GTE^|LT^|LTE^) expr)*
> 
> ;
> 
> expr: mexpr ((PLUS^|MINUS^) mexpr)*
> 
> ;
> 
> mexpr
> 
> : atom ((MULT^|DIV^) atom)*
> 
> ;
> 
> atom: INT
> 
> | LPAREN! expr RPAREN!
> 
> // | LPAREN! logicalOrExpression RPAREN!
> 
> ;
> * 
> 
> class
> * ExprLexer *extends* Lexer;* 
> 
> options
> * { 
> 
> k = 2; 
> // two characters of lookahead 
> 
> }
> 
> /* Integers */
> 
> INT : (
> '0'..'9')+ ; 
> 
> /* Ignored characters */
> 
> WS : ( 
> ' ' 
> 
> | 
> '\r' '\n' 
> 
> | 
> '\n' 
> 
> | 
> '\t' 
> 
> )
> 
> {$setType(Token.SKIP);}
> 
> ;
> 
> /* Logical operators */
> 
> OR : 
> "OR"; 
> 
> AND : 
> "AND"; 
> 
> /* Comparison operators */
> 
> EQUALS : 
> "=="; 
> 
> NOT_EQUALS : 
> "<>"; 
> 
> GT : 
> '>'; 
> 
> GTE : 
> ">="; 
> 
> LT : 
> '<'; 
> 
> LTE : 
> "<="; 
> 
> /* Arithmetic operators */
> 
> PLUS : 
> '+'; 
> 
> MINUS : 
> '-'; 
> 
> MULT : 
> '*'; 
> 
> DIV : 
> '/'; 
> 
> /* Parentheses */
> 
> LPAREN : 
> '('; 
> 
> RPAREN : 
> ')';* 
> 
> class
> * ExprTreeParser *extends* TreeParser;* 
> 
> options
> * { 
> 
> importVocab=ExprParser;
> 
> }
> 
> expr 
> *returns* [*int* r=0] { *int* a,b;} 
> 
> : #(PLUS a=expr b=expr) { r = a + b;}
> 
> | #(MINUS a=expr b=expr) { r = a - b; }
> 
> | #(MULT a=expr b=expr) { r = a * b; }
> 
> | #(DIV a=expr b=expr) { r = a / b; }
> 
> | i:INT {r = (
> *int*)Integer.parseInt(i.getText());} 
> 
> ;
> 
> bexpr 
> *returns* [*boolean* r=*false*] { *int* a,b; } 
> 
> : #(EQUALS a=expr b=expr) {r = (a == b);}
> 
> | #(NOT_EQUALS a=expr b=expr) {r = (a != b);} 
> 
> | #(GT a=expr b=expr) {r = (a > b);}
> 
> | #(GTE a=expr b=expr) {r = (a >= b);}
> 
> | #(LT a=expr b=expr) {r = (a < b);}
> 
> | #(LTE a=expr b=expr) {r = (a <= b);}
> 
> ;
> 
> //logicalAndExpression returns [boolean r=false] { boolean a,b; }
> 
> // : #(AND a=bexpr b=bexpr) {r = (a && b); }
> 
> // ;
> 
> //logicalOrExpression returns [boolean r=false] {boolean a,b; }
> 
> // : #(OR a=logicalAndExpression b=logicalAndExpression) {r = (a || b);}
> 
> // ;
> 



-- 
Tarun Khanna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050726/dac6e57f/attachment.html
From mail at martin-probst.com  Tue Jul 26 08:45:45 2005
From: mail at martin-probst.com (Martin Probst)
Date: Tue Jul 26 08:45:53 2005
Subject: [antlr-interest] Evaluation boolean expressions
In-Reply-To: <dbcf4c2c0507260835174cfcb3@mail.gmail.com>
References: <001201c591e3$c3e844f0$79f53951@thedude>
	<dbcf4c2c0507260835174cfcb3@mail.gmail.com>
Message-ID: <1122392745.3857.35.camel@localhost.localdomain>

If you want to achieve composability (OR (> 2 5) (OR (= 3 3) (< 1 4)))
you might want to add "lexpr" as an option to bexpr.

On Tue, 2005-07-26 at 11:35 -0400, Tarun Khanna wrote:
> Hi,
> 
> Here is the changed grammar. Seems to work fine. I hope you'll notice
> the changes...
> 
> The first one is in atom, atom: LPAREN logicalOrExpression RPAREN
> 
> Then in the TreeParser, I have added a new rule lexpr.
> 
> Parse the tree using logicalOrExpression as the starting point. Then
> use the lexpr to walk the tree.
> 
> -----------------------------
> class ExprParser extends Parser;
> 
> options {
> 
> buildAST = true;
> 
> defaultErrorHandler = false;
> 
> }
> 
> logicalOrExpression: logicalAndExpression (OR^ logicalAndExpression)*
> 
>  ;
> 
> logicalAndExpression: bexpr (AND^ bexpr)*
> 
>  ;
> 
> bexpr: expr ((EQUALS^|NOT_EQUALS^|GT^|GTE^|LT^|LTE^) expr)*
> 
> ;
> 
> expr: mexpr ((PLUS^|MINUS^) mexpr)*
> 
> ;
> 
> mexpr
> 
> : atom ((MULT^|DIV^) atom)*
> 
> ;
> 
> atom: INT
> 
> | LPAREN! logicalOrExpression RPAREN!
> 
> // | LPAREN! logicalOrExpression RPAREN!
> 
> ;
> 
> class ExprLexer extends Lexer;
> 
> options {
> 
> k = 2; // two characters of lookahead
> 
> }
> 
> /* Integers */
> 
> INT : ('0'..'9')+ ;
> 
> /* Ignored characters */
> 
> WS : ( ' '
> 
> | '\r' '\n'
> 
> | '\n'
> 
> | '\t'
> 
> )
> 
> {$setType(Token.SKIP);}
> 
> ;
> 
> /* Logical operators */
> 
> OR : "OR";
> 
> AND : "AND";
> 
> /* Comparison operators */
> 
> EQUALS : "==";
> 
> NOT_EQUALS : "<>";
> 
> GT : '>';
> 
> GTE : ">=";
> 
> LT : '<';
> 
> LTE : "<=";
> 
> /* Arithmetic operators */
> 
> PLUS : '+';
> 
> MINUS : '-';
> 
> MULT : '*';
> 
> DIV : '/';
> 
> /* Parentheses */
> 
> LPAREN : '(';
> 
> RPAREN : ')';
> 
> class ExprTreeParser extends TreeParser;
> 
> options {
> 
> importVocab=ExprParser;
> 
> }
> 
> expr returns [int r=0] { int a,b;}
> 
> : #(PLUS a=expr b=expr) { r = a + b;}
> 
> | #(MINUS a=expr b=expr) { r = a - b; }
> 
> | #(MULT a=expr b=expr) { r = a * b; }
> 
> | #(DIV a=expr b=expr) { r = a / b; }
> 
> 
> | i:INT {r = (int)Integer.parseInt(i.getText());}
> 
> ;
> 
> bexpr returns [boolean r=false] { int a,b; }
> 
> : #(EQUALS a=expr b=expr) {r = (a == b);}
> 
> | #(NOT_EQUALS a=expr b=expr) {r = (a != b);}
> 
> | #(GT a=expr b=expr) {r = (a > b);}
> 
> | #(GTE a=expr b=expr) {r = (a >= b);}
> 
> | #(LT a=expr b=expr) {r = (a < b);}
> 
> | #(LTE a=expr b=expr) {r = (a <= b);}
> 
> ;
> 
> lexpr returns [boolean r= false] {boolean a, b;}
> : #(OR a=bexpr b=bexpr) { r = a || b; }
> 
> | #(AND a=bexpr b=bexpr) { r = a && b; }
> 
> ;
> 
> 
> 
> 
> On 7/26/05, Xavier Benveniste <xavier.benveniste@free.fr> wrote:
>         Hi,
>          
>         I (hardly) succeeded in building a very simple int calculator.
>         Then, I succeeded in building an int 'equality' evaluator :
>         for instance, if I enter :
>         5+(4*3) > 10 + 9
>         I have the following result :
>         
>         ( > ( + 5 ( * 4 3 ) ) ( + 10 9 ) )
>         
>         false
>         
>         So far, so good.
>         
>         Now, what I'm trying to do is to evaluate expression like :
>         (4 + (5*2) > 15) OR (4>1).
>         But, here I'm stuck.
>          
>         You 'll find below the grammar I wrote.
>         I'm sure it's pretty straightforward but I can't manage
>         to achieve it.
>         If any ANTLR's guru could help me.
>         Thanks.
>         class
>         
>         ExprParser extends Parser;
>         
>         options
>         
>         { 
>         
>         buildAST = 
>         
>         true; 
>         
>         defaultErrorHandler = 
>         
>         false; 
>         
>         }
>         
>         //logicalOrExpression: logicalAndExpression (OR^
>         logicalAndExpression)*
>         
>         // ;
>         
>         //logicalAndExpression: bexpr (AND^ bexpr)*
>         
>         // ;
>         
>         bexpr: expr ((EQUALS^|NOT_EQUALS^|GT^|GTE^|LT^|LTE^) expr)*
>         
>         ;
>         
>         expr: mexpr ((PLUS^|MINUS^) mexpr)*
>         
>         ;
>         
>         mexpr
>         
>         : atom ((MULT^|DIV^) atom)*
>         
>         ;
>         
>         atom: INT
>         
>         | LPAREN! expr RPAREN!
>         
>         // | LPAREN! logicalOrExpression RPAREN!
>         
>         ;
>         
>         class
>         
>         ExprLexer extends Lexer;
>         
>         options
>         
>         { 
>         
>         k = 2; 
>         
>         // two characters of lookahead
>         
>         }
>         
>         /* Integers */
>         
>         INT : (
>         
>         '0'..'9')+ ;
>         
>         /* Ignored characters */
>         
>         WS : ( 
>         
>         ' '
>         
>         | 
>         
>         '\r' '\n'
>         
>         | 
>         
>         '\n'
>         
>         | 
>         
>         '\t'
>         
>         )
>         
>         {$setType(Token.SKIP);}
>         
>         ;
>         
>         /* Logical operators */
>         
>         OR : 
>         
>         "OR"; 
>         
>         AND : 
>         
>         "AND";
>         
>         /* Comparison operators */
>         
>         EQUALS : 
>         
>         "=="; 
>         
>         NOT_EQUALS : 
>         
>         "<>"; 
>         
>         GT : 
>         
>         '>'; 
>         
>         GTE : 
>         
>         ">="; 
>         
>         LT : 
>         
>         '<'; 
>         
>         LTE : 
>         
>         "<=";
>         
>         /* Arithmetic operators */
>         
>         PLUS : 
>         
>         '+'; 
>         
>         MINUS : 
>         
>         '-'; 
>         
>         MULT : 
>         
>         '*'; 
>         
>         DIV : 
>         
>         '/';
>         
>         /* Parentheses */
>         
>         LPAREN : 
>         
>         '('; 
>         
>         RPAREN : 
>         
>         ')';
>         
>         class
>         
>         ExprTreeParser extends TreeParser;
>         
>         options
>         
>         { 
>         
>         importVocab=ExprParser;
>         
>         }
>         
>         expr 
>         
>         returns [int r=0] { int a,b;} 
>         
>         : #(PLUS a=expr b=expr) { r = a + b;}
>         
>         | #(MINUS a=expr b=expr) { r = a - b; }
>         
>         | #(MULT a=expr b=expr) { r = a * b; }
>         
>         | #(DIV a=expr b=expr) { r = a / b; }
>         
>         | i:INT {r = (
>         
>         int)Integer.parseInt(i.getText());} 
>         
>         ;
>         
>         bexpr 
>         
>         returns [boolean r=false] { int a,b; } 
>         
>         : #(EQUALS a=expr b=expr) {r = (a == b);}
>         
>         | #(NOT_EQUALS a=expr b=expr) {r = (a != b);} 
>         
>         | #(GT a=expr b=expr) {r = (a > b);}
>         
>         | #(GTE a=expr b=expr) {r = (a >= b);}
>         
>         | #(LT a=expr b=expr) {r = (a < b);}
>         
>         | #(LTE a=expr b=expr) {r = (a <= b);}
>         
>         ;
>         
>         //logicalAndExpression returns [boolean r=false] { boolean
>         a,b; }
>         
>         // : #(AND a=bexpr b=bexpr) {r = (a && b); }
>         
>         // ;
>         
>         //logicalOrExpression returns [boolean r=false] {boolean
>         a,b; }
>         
>         // : #(OR a=logicalAndExpression b=logicalAndExpression) {r =
>         (a || b);}
>         
>         // ;
>         
>         
> 
> 
> 
> -- 
> Tarun Khanna

From tarunkhanna at gmail.com  Tue Jul 26 08:49:25 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Tue Jul 26 08:49:28 2005
Subject: [antlr-interest] function call and expressions in C++ grammar
Message-ID: <dbcf4c2c05072608496117ed29@mail.gmail.com>

I am trying to parse C++ expressions. From the grammar on the ANTLR website 
I can see this rule (simplified here, I removed the other alternatives)

postfix_expression
{TypeSpecifier ts;
DeclSpecifier ds = dsInvalid; // Purpose ?
}
:
primary_expression
(options {warnWhenFollowAmbig = false;}:
LSQUARE expression RSQUARE
| LPAREN (expression_list)? RPAREN 
| DOT id_expression
| POINTERTO id_expression
| PLUSPLUS 
| MINUSMINUS
)*
) ;

Although it would parse a C++ expression just fine, I don't know how would 
it differentiate between the following. I want to create different root 
nodes in the following two situations. However with the above grammar I 
can't find a way to do so.

a(a, b) and
(a, b)

-- 
Tarun Khanna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050726/a5565657/attachment.html
From xavier.benveniste at free.fr  Tue Jul 26 09:35:44 2005
From: xavier.benveniste at free.fr (Xavier Benveniste)
Date: Tue Jul 26 09:35:20 2005
Subject: [antlr-interest] Evaluation boolean expressions
References: <001201c591e3$c3e844f0$79f53951@thedude>
	<dbcf4c2c0507260835174cfcb3@mail.gmail.com>
	<1122392745.3857.35.camel@localhost.localdomain>
Message-ID: <005501c59200$123adcf0$79f53951@thedude>

Hi,

Thanks both of you for your answers.
I tried the changes suggested by Tarun Khanna but I 've still errors when I
run it with my IDE (eclipse) :
(4 + (5*2) > 15) OR (4>1)

Exception in thread "main" line 1:2: expecting LPAREN, found '4'



So, please could you could find attached the grammar file and main java
class I use.
Maybe I did a mistake (again).

Concerning your notice (Martin Probst) <<If you want to achieve
composability (OR (> 2 5) (OR (= 3 3) (< 1 4))) you might want to add
"lexpr" as an option to bexpr.>>,
can you more explicit ? I'm sorry, but I've started ANTLR since a few days.
----- Original Message ----- 
From: "Martin Probst" <mail@martin-probst.com>
To: "Tarun Khanna" <tarunkhanna@gmail.com>
Cc: "Xavier Benveniste" <xavier.benveniste@free.fr>;
<antlr-interest@antlr.org>
Sent: Tuesday, July 26, 2005 5:45 PM
Subject: Re: [antlr-interest] Evaluation boolean expressions


> If you want to achieve composability (OR (> 2 5) (OR (= 3 3) (< 1 4)))
> you might want to add "lexpr" as an option to bexpr.
>
> On Tue, 2005-07-26 at 11:35 -0400, Tarun Khanna wrote:
> > Hi,
> >
> > Here is the changed grammar. Seems to work fine. I hope you'll notice
> > the changes...
> >
> > The first one is in atom, atom: LPAREN logicalOrExpression RPAREN
> >
> > Then in the TreeParser, I have added a new rule lexpr.
> >
> > Parse the tree using logicalOrExpression as the starting point. Then
> > use the lexpr to walk the tree.
> >
> > -----------------------------
> > class ExprParser extends Parser;
> >
> > options {
> >
> > buildAST = true;
> >
> > defaultErrorHandler = false;
> >
> > }
> >
> > logicalOrExpression: logicalAndExpression (OR^ logicalAndExpression)*
> >
> >  ;
> >
> > logicalAndExpression: bexpr (AND^ bexpr)*
> >
> >  ;
> >
> > bexpr: expr ((EQUALS^|NOT_EQUALS^|GT^|GTE^|LT^|LTE^) expr)*
> >
> > ;
> >
> > expr: mexpr ((PLUS^|MINUS^) mexpr)*
> >
> > ;
> >
> > mexpr
> >
> > : atom ((MULT^|DIV^) atom)*
> >
> > ;
> >
> > atom: INT
> >
> > | LPAREN! logicalOrExpression RPAREN!
> >
> > // | LPAREN! logicalOrExpression RPAREN!
> >
> > ;
> >
> > class ExprLexer extends Lexer;
> >
> > options {
> >
> > k = 2; // two characters of lookahead
> >
> > }
> >
> > /* Integers */
> >
> > INT : ('0'..'9')+ ;
> >
> > /* Ignored characters */
> >
> > WS : ( ' '
> >
> > | '\r' '\n'
> >
> > | '\n'
> >
> > | '\t'
> >
> > )
> >
> > {$setType(Token.SKIP);}
> >
> > ;
> >
> > /* Logical operators */
> >
> > OR : "OR";
> >
> > AND : "AND";
> >
> > /* Comparison operators */
> >
> > EQUALS : "==";
> >
> > NOT_EQUALS : "<>";
> >
> > GT : '>';
> >
> > GTE : ">=";
> >
> > LT : '<';
> >
> > LTE : "<=";
> >
> > /* Arithmetic operators */
> >
> > PLUS : '+';
> >
> > MINUS : '-';
> >
> > MULT : '*';
> >
> > DIV : '/';
> >
> > /* Parentheses */
> >
> > LPAREN : '(';
> >
> > RPAREN : ')';
> >
> > class ExprTreeParser extends TreeParser;
> >
> > options {
> >
> > importVocab=ExprParser;
> >
> > }
> >
> > expr returns [int r=0] { int a,b;}
> >
> > : #(PLUS a=expr b=expr) { r = a + b;}
> >
> > | #(MINUS a=expr b=expr) { r = a - b; }
> >
> > | #(MULT a=expr b=expr) { r = a * b; }
> >
> > | #(DIV a=expr b=expr) { r = a / b; }
> >
> >
> > | i:INT {r = (int)Integer.parseInt(i.getText());}
> >
> > ;
> >
> > bexpr returns [boolean r=false] { int a,b; }
> >
> > : #(EQUALS a=expr b=expr) {r = (a == b);}
> >
> > | #(NOT_EQUALS a=expr b=expr) {r = (a != b);}
> >
> > | #(GT a=expr b=expr) {r = (a > b);}
> >
> > | #(GTE a=expr b=expr) {r = (a >= b);}
> >
> > | #(LT a=expr b=expr) {r = (a < b);}
> >
> > | #(LTE a=expr b=expr) {r = (a <= b);}
> >
> > ;
> >
> > lexpr returns [boolean r= false] {boolean a, b;}
> > : #(OR a=bexpr b=bexpr) { r = a || b; }
> >
> > | #(AND a=bexpr b=bexpr) { r = a && b; }
> >
> > ;
> >
> >
> >
> >
> > On 7/26/05, Xavier Benveniste <xavier.benveniste@free.fr> wrote:
> >         Hi,
> >
> >         I (hardly) succeeded in building a very simple int calculator.
> >         Then, I succeeded in building an int 'equality' evaluator :
> >         for instance, if I enter :
> >         5+(4*3) > 10 + 9
> >         I have the following result :
> >
> >         ( > ( + 5 ( * 4 3 ) ) ( + 10 9 ) )
> >
> >         false
> >
> >         So far, so good.
> >
> >         Now, what I'm trying to do is to evaluate expression like :
> >         (4 + (5*2) > 15) OR (4>1).
> >         But, here I'm stuck.
> >
> >         You 'll find below the grammar I wrote.
> >         I'm sure it's pretty straightforward but I can't manage
> >         to achieve it.
> >         If any ANTLR's guru could help me.
> >         Thanks.
> >         class
> >
> >         ExprParser extends Parser;
> >
> >         options
> >
> >         {
> >
> >         buildAST =
> >
> >         true;
> >
> >         defaultErrorHandler =
> >
> >         false;
> >
> >         }
> >
> >         //logicalOrExpression: logicalAndExpression (OR^
> >         logicalAndExpression)*
> >
> >         // ;
> >
> >         //logicalAndExpression: bexpr (AND^ bexpr)*
> >
> >         // ;
> >
> >         bexpr: expr ((EQUALS^|NOT_EQUALS^|GT^|GTE^|LT^|LTE^) expr)*
> >
> >         ;
> >
> >         expr: mexpr ((PLUS^|MINUS^) mexpr)*
> >
> >         ;
> >
> >         mexpr
> >
> >         : atom ((MULT^|DIV^) atom)*
> >
> >         ;
> >
> >         atom: INT
> >
> >         | LPAREN! expr RPAREN!
> >
> >         // | LPAREN! logicalOrExpression RPAREN!
> >
> >         ;
> >
> >         class
> >
> >         ExprLexer extends Lexer;
> >
> >         options
> >
> >         {
> >
> >         k = 2;
> >
> >         // two characters of lookahead
> >
> >         }
> >
> >         /* Integers */
> >
> >         INT : (
> >
> >         '0'..'9')+ ;
> >
> >         /* Ignored characters */
> >
> >         WS : (
> >
> >         ' '
> >
> >         |
> >
> >         '\r' '\n'
> >
> >         |
> >
> >         '\n'
> >
> >         |
> >
> >         '\t'
> >
> >         )
> >
> >         {$setType(Token.SKIP);}
> >
> >         ;
> >
> >         /* Logical operators */
> >
> >         OR :
> >
> >         "OR";
> >
> >         AND :
> >
> >         "AND";
> >
> >         /* Comparison operators */
> >
> >         EQUALS :
> >
> >         "==";
> >
> >         NOT_EQUALS :
> >
> >         "<>";
> >
> >         GT :
> >
> >         '>';
> >
> >         GTE :
> >
> >         ">=";
> >
> >         LT :
> >
> >         '<';
> >
> >         LTE :
> >
> >         "<=";
> >
> >         /* Arithmetic operators */
> >
> >         PLUS :
> >
> >         '+';
> >
> >         MINUS :
> >
> >         '-';
> >
> >         MULT :
> >
> >         '*';
> >
> >         DIV :
> >
> >         '/';
> >
> >         /* Parentheses */
> >
> >         LPAREN :
> >
> >         '(';
> >
> >         RPAREN :
> >
> >         ')';
> >
> >         class
> >
> >         ExprTreeParser extends TreeParser;
> >
> >         options
> >
> >         {
> >
> >         importVocab=ExprParser;
> >
> >         }
> >
> >         expr
> >
> >         returns [int r=0] { int a,b;}
> >
> >         : #(PLUS a=expr b=expr) { r = a + b;}
> >
> >         | #(MINUS a=expr b=expr) { r = a - b; }
> >
> >         | #(MULT a=expr b=expr) { r = a * b; }
> >
> >         | #(DIV a=expr b=expr) { r = a / b; }
> >
> >         | i:INT {r = (
> >
> >         int)Integer.parseInt(i.getText());}
> >
> >         ;
> >
> >         bexpr
> >
> >         returns [boolean r=false] { int a,b; }
> >
> >         : #(EQUALS a=expr b=expr) {r = (a == b);}
> >
> >         | #(NOT_EQUALS a=expr b=expr) {r = (a != b);}
> >
> >         | #(GT a=expr b=expr) {r = (a > b);}
> >
> >         | #(GTE a=expr b=expr) {r = (a >= b);}
> >
> >         | #(LT a=expr b=expr) {r = (a < b);}
> >
> >         | #(LTE a=expr b=expr) {r = (a <= b);}
> >
> >         ;
> >
> >         //logicalAndExpression returns [boolean r=false] { boolean
> >         a,b; }
> >
> >         // : #(AND a=bexpr b=bexpr) {r = (a && b); }
> >
> >         // ;
> >
> >         //logicalOrExpression returns [boolean r=false] {boolean
> >         a,b; }
> >
> >         // : #(OR a=logicalAndExpression b=logicalAndExpression) {r =
> >         (a || b);}
> >
> >         // ;
> >
> >
> >
> >
> >
> > -- 
> > Tarun Khanna
>
>
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Main.java
Type: application/octet-stream
Size: 437 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050726/40f33671/Main.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: expr.g
Type: application/octet-stream
Size: 1783 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050726/40f33671/expr.obj
From tarunkhanna at gmail.com  Tue Jul 26 12:40:52 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Tue Jul 26 12:40:55 2005
Subject: [antlr-interest] constructor in a Parser Class
In-Reply-To: <41fed8f8050726052576806c2c@mail.gmail.com>
References: <dbcf4c2c050725100019354dd7@mail.gmail.com>
	<41fed8f80507251508787ee5b5@mail.gmail.com>
	<dbcf4c2c050725205552f28e59@mail.gmail.com>
	<41fed8f8050726052576806c2c@mail.gmail.com>
Message-ID: <dbcf4c2c0507261240262b3673@mail.gmail.com>

hey thanks,

well I did something similar. I created my constructor and from within it 
called the default constructor using "this" and then did my own 
initialization after that.

Thanks again
Tarun

On 7/26/05, Prashant Deva <prashant.deva@gmail.com> wrote:
> 
> Tarun,
> dont use the noConstructor=true option. Do as i told you in my last mail.
> Inheirt a class and from the parser class and override the constructors.
> 
> PRASHANT
> 
> On 7/26/05, Tarun Khanna <tarunkhanna@gmail.com> wrote:
> > Thanks a lot for your help.
> >
> > If we use the noConstructor=true option won't we have to do all the
> > initialization ourselves? Aren't there any initializations that are done
> > generated by the automatically generated code, that I may ignore (or I 
> am
> > not even supposed to know as it is automatically generated). For eg. the
> > _tokenNames array of token names. This is something that is initialized 
> in
> > the automatically generated constructor. I guess a user is not even 
> supposed
> > to know of the existence of such an array.
> >
> > Thanks
> > Tarun
> >
> >
> > On 7/25/05, Prashant Deva <prashant.deva@gmail.com> wrote:
> > > You can use the anonymous no-static initialization.
> > > Eg-
> > > class MyClass(){
> > >
> > >
> > > {
> > > // do initialization
> > > }
> > >
> > > public MyClass() {}
> > >
> > > }
> > >
> > >
> > > Or you can even make a class inherit from the generated parser class
> > > and do the initialization in its constructor.
> > >
> > > PRASHANT
> > >
> > > On 7/25/05, Tarun Khanna <tarunkhanna@gmail.com> wrote:
> > > > If have some private variables to initialize, how do we specify 
> these
> > > > initializations in a constructor. If I try to write a constructor, 
> the
> > > > compiler complains..
> > > >
> > > > I noticed the generated code contains constructors that do some 
> stuff.
> > I
> > > > would want these constructors to additionally initialize some of my
> > > > variables. How can that be done.
> > > >
> > > >
> > > > Thanks
> > > > --
> > > > Tarun Khanna
> > >
> >
> >
> >
> > --
> > Tarun Khanna
> 



-- 
Tarun Khanna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050726/79190439/attachment.html
From tarunkhanna at gmail.com  Tue Jul 26 12:46:17 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Tue Jul 26 12:46:21 2005
Subject: [antlr-interest] creating root nodes in rules
Message-ID: <dbcf4c2c05072612464dffe49b@mail.gmail.com>

consider the following grammar

some_expr:
id 
(
DOT^ id
|!
LPAREN expr RPAREN
{
#[APPLY, "FuncCall"];
}
)*


you see how the first option creates DOT as the root node for the tree 
constructed so far. I need to do something similar for the second option 
however I need to create a new node and then make it the root exactly like 
DOT is made root in the previous alternative. Any idead how this can be 
done?

Thanks
-- 
Tarun Khanna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050726/375dd424/attachment.html
From kverma at hotmail.com  Tue Jul 26 15:56:56 2005
From: kverma at hotmail.com (Kamal Verma)
Date: Tue Jul 26 15:56:58 2005
Subject: [antlr-interest] C/C# pre-processor
Message-ID: <BAY110-F235271FF5BE4760D39AFECC9CD0@phx.gbl>

Hi

Does anybody have any experience with C/C++/C# preprocessor.
I am new to antlr, any help in this direction will be of great help.

Any pointers, pieces of text will be of great help.

Thanks in advance.
-K

_________________________________________________________________
Dont just search. Find. Check out the new MSN Search! 
http://search.msn.click-url.com/go/onm00200636ave/direct/01/

From rodrigobamboo at gmail.com  Tue Jul 26 16:01:52 2005
From: rodrigobamboo at gmail.com (Rodrigo B. de Oliveira)
Date: Tue Jul 26 16:01:56 2005
Subject: [antlr-interest] C/C# pre-processor
In-Reply-To: <BAY110-F235271FF5BE4760D39AFECC9CD0@phx.gbl>
References: <BAY110-F235271FF5BE4760D39AFECC9CD0@phx.gbl>
Message-ID: <5917478b05072616014c0abb78@mail.gmail.com>

On 7/26/05, Kamal Verma <kverma@hotmail.com> wrote:
> Hi
> 
> Does anybody have any experience with C/C++/C# preprocessor.
> I am new to antlr, any help in this direction will be of great help.
> 
> Any pointers, pieces of text will be of great help.
> 

There's a C# style preprocessor implemented in boo here:

http://svn.boo.codehaus.org/trunk/src/Boo.Lang.Useful/IO/

antlr is used to evaluate the #if expressions.

-- 
bamboo
http://blogs.codehaus.org/people/bamboo/
Got objects? http://www.db4o.com/
From jbb at acm.org  Tue Jul 26 19:07:12 2005
From: jbb at acm.org (John B. Brodie)
Date: Tue Jul 26 19:09:05 2005
Subject: [antlr-interest] Evaluation boolean expressions
In-Reply-To: <005501c59200$123adcf0$79f53951@thedude> (message from Xavier
	Benveniste on Tue, 26 Jul 2005 18:35:44 +0200)
References: <001201c591e3$c3e844f0$79f53951@thedude>
	<dbcf4c2c0507260835174cfcb3@mail.gmail.com>
	<1122392745.3857.35.camel@localhost.localdomain>
	<005501c59200$123adcf0$79f53951@thedude>
Message-ID: <E1DxbKC-00085P-00@gecko>

Hello :-

I am not sure that this will be of any help...

Xavier Benveniste asked:
>Thanks both of you for your answers.
>I tried the changes suggested by Tarun Khanna but I 've still errors when I
>run it with my IDE (eclipse) :
>(4 + (5*2) > 15) OR (4>1)
>
>Exception in thread "main" line 1:2: expecting LPAREN, found '4'
>
>
>
>So, please could you could find attached the grammar file and main java
>class I use.
>Maybe I did a mistake (again).
...attachment sniped...

Lets look at your ExprParser grammar:

logicalOrExpression must begin with a logicalAndExpression
logicalAndExpression must begin with a bexpr
bexpr must begin with an expr
expr must begin with a mexpr
mexpr must begin with an atom
atom must begin with a LPAREN
  which must then be followed by a logicalOrExpression and terminated with RPAREN
  but
    logicalOrExpression must begin with a logicalAndExpression
    logicalAndExpression must begin with a bexpr
    bexpr must begin with an expr
    expr must begin with a mexpr
    mexpr must begin with an atom
    atom must begin with a LPAREN
      which must then be followed by a logicalOrExpression terminated with RPAREN
      but
        logicalOrExpression must begin with a logicalAndExpression
        logicalAndExpression must begin with a bexpr
        bexpr must begin with an expr
        expr must begin with a mexpr
        mexpr must begin with an atom
        atom must begin with a LPAREN
          which must then be followed by a logicalOrExpression terminated with RPAREN

...and on to infinity!

your grammar never really recognizes anything because it insists on an infinite
series of leading LPARENs

LPAREN is required to start an atom; the only leaf of the grammar is atom

you might try replacing your parser rule

atom:   LPAREN logicalOrExpression RPAREN
    ;

with

atom:   INT
    | LPAREN! logicalOrExpression RPAREN!
    ;


however this will cause many problems which you may or may not find acceptable.

this new grammar will accept these expressions:

   1 OR 1

   1 > 1

   1 + 1

   1

which might not be what you wanted. certainly your TreeParser is not prepared
to deal with them...

Hope this helps.
   -jbb

From xavier.benveniste at free.fr  Wed Jul 27 00:36:14 2005
From: xavier.benveniste at free.fr (Xavier Benveniste)
Date: Wed Jul 27 00:35:54 2005
Subject: [antlr-interest] Evaluation boolean expressions
References: <001201c591e3$c3e844f0$79f53951@thedude>
	<dbcf4c2c0507260835174cfcb3@mail.gmail.com>
	<1122392745.3857.35.camel@localhost.localdomain>
	<005501c59200$123adcf0$79f53951@thedude> <E1DxbKC-00085P-00@gecko>
Message-ID: <000f01c5927d$e188e6a0$79f53951@thedude>

Hi,

thanks anyway (your answer explains me why it doesn't work).

But I'm a little bit confused : does it worth using ANTL if such a simple
algorithm is so hard to develop?
Or can't ANTLR evaluates such simple expression as (4 + (5*2) > 15) OR (4>1)
?

----- Original Message ----- 
From: "John B. Brodie" <jbb@acm.org>
To: <xavier.benveniste@free.fr>
Cc: <antlr-interest@antlr.org>
Sent: Wednesday, July 27, 2005 4:07 AM
Subject: Re: [antlr-interest] Evaluation boolean expressions


> Hello :-
>
> I am not sure that this will be of any help...
>
> Xavier Benveniste asked:
> >Thanks both of you for your answers.
> >I tried the changes suggested by Tarun Khanna but I 've still errors when
I
> >run it with my IDE (eclipse) :
> >(4 + (5*2) > 15) OR (4>1)
> >
> >Exception in thread "main" line 1:2: expecting LPAREN, found '4'
> >
> >
> >
> >So, please could you could find attached the grammar file and main java
> >class I use.
> >Maybe I did a mistake (again).
> ...attachment sniped...
>
> Lets look at your ExprParser grammar:
>
> logicalOrExpression must begin with a logicalAndExpression
> logicalAndExpression must begin with a bexpr
> bexpr must begin with an expr
> expr must begin with a mexpr
> mexpr must begin with an atom
> atom must begin with a LPAREN
>   which must then be followed by a logicalOrExpression and terminated with
RPAREN
>   but
>     logicalOrExpression must begin with a logicalAndExpression
>     logicalAndExpression must begin with a bexpr
>     bexpr must begin with an expr
>     expr must begin with a mexpr
>     mexpr must begin with an atom
>     atom must begin with a LPAREN
>       which must then be followed by a logicalOrExpression terminated with
RPAREN
>       but
>         logicalOrExpression must begin with a logicalAndExpression
>         logicalAndExpression must begin with a bexpr
>         bexpr must begin with an expr
>         expr must begin with a mexpr
>         mexpr must begin with an atom
>         atom must begin with a LPAREN
>           which must then be followed by a logicalOrExpression terminated
with RPAREN
>
> ...and on to infinity!
>
> your grammar never really recognizes anything because it insists on an
infinite
> series of leading LPARENs
>
> LPAREN is required to start an atom; the only leaf of the grammar is atom
>
> you might try replacing your parser rule
>
> atom:   LPAREN logicalOrExpression RPAREN
>     ;
>
> with
>
> atom:   INT
>     | LPAREN! logicalOrExpression RPAREN!
>     ;
>
>
> however this will cause many problems which you may or may not find
acceptable.
>
> this new grammar will accept these expressions:
>
>    1 OR 1
>
>    1 > 1
>
>    1 + 1
>
>    1
>
> which might not be what you wanted. certainly your TreeParser is not
prepared
> to deal with them...
>
> Hope this helps.
>    -jbb
>
>


From mail at martin-probst.com  Wed Jul 27 01:14:04 2005
From: mail at martin-probst.com (Martin Probst)
Date: Wed Jul 27 01:14:10 2005
Subject: [antlr-interest] creating root nodes in rules
In-Reply-To: <dbcf4c2c05072612464dffe49b@mail.gmail.com>
References: <dbcf4c2c05072612464dffe49b@mail.gmail.com>
Message-ID: <1122452044.8208.6.camel@localhost.localdomain>

Hi,

> I need to create a new node and then make it the root exactly like DOT
> is made root in the previous alternative. Any idead how this can be
> done?

You can use ## or #rule_name to refer to the current AST root (of this
subrule) and assign to it: ## = #[FOO,'bar'];

Martin

From demakov at ispras.ru  Wed Jul 27 01:24:19 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Wed Jul 27 01:24:26 2005
Subject: [antlr-interest] Cust error recovery
References: <3763.194.237.142.5.1122373217.squirrel@www.scorpiondata.com>
Message-ID: <00a701c59284$95d9bb60$8cc79553@marlboro>

Please read sections "Parser Exception Handling" 
and "Specifying Parser Exception-Handlers"
in ANTLR documentation: 
http://www.antlr.org/doc/err.html#ParserExceptionHandling

"The default exception handler will report an error, 
sync to the follow set of the rule, and return from that rule."

Example from generated code:

  catch (RecognitionException ex) {
   if (inputState.guessing==0) {
    reportError(ex);
    recover(ex,_tokenSet_5);
   } else {
     throw ex;
   }
  }

where recover() calls consumeUntil():

 public void recover(RecognitionException ex,
      BitSet tokenSet) throws TokenStreamException {
  consume();
  consumeUntil(tokenSet);
 }

And you can override recover()...

"Second, you may specify your own exception handlers 
in a variety of ways, as described later."

And you can specify your own code that will be executed instead of
    reportError(ex);
    recover(ex,_tokenSet_5);

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


----- Original Message ----- 
From: "Martin Olsson" <mnemo@minimum.se>
To: <antlr-interest@antlr.org>
Sent: Tuesday, July 26, 2005 2:20 PM
Subject: [antlr-interest] Cust error recovery


> Hi (again :o),
> 
> When ANTLR runs into a parse error I would like it to skip chars/tokens
> until a specific char/token is seen. After digging a while in the ANTLR
> source I noticed that there is a method called consumeUntil() which seems
> to do what I what.
> 
> The problem is, when should I call it? How can I hook my own stuff into
> the lexer's bad-token-found code?
> 
> And if I do this must I set the defaultErrorHandler=false option? Because
> it's not everywhere in the lexer I want to change the recovery procedure.
> 
> 
> sincerly,
> martin
> 
> 

From ewbank at gmail.com  Wed Jul 27 03:41:11 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Wed Jul 27 03:41:14 2005
Subject: [antlr-interest] C/C# pre-processor
In-Reply-To: <BAY110-F235271FF5BE4760D39AFECC9CD0@phx.gbl>
References: <BAY110-F235271FF5BE4760D39AFECC9CD0@phx.gbl>
Message-ID: <dd3a065f050727034177bed47f@mail.gmail.com>

Do you mean parsing it with antlr, or using it in the context of
antlr, or something else?

On 7/26/05, Kamal Verma <kverma@hotmail.com> wrote:
> Does anybody have any experience with C/C++/C# preprocessor.
> I am new to antlr, any help in this direction will be of great help.

If you are wanting information on using it, most any C manual will
have a chapter or two...
From ewbank at gmail.com  Wed Jul 27 03:45:35 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Wed Jul 27 03:45:38 2005
Subject: [antlr-interest] Cust error recovery
In-Reply-To: <3763.194.237.142.5.1122373217.squirrel@www.scorpiondata.com>
References: <3763.194.237.142.5.1122373217.squirrel@www.scorpiondata.com>
Message-ID: <dd3a065f05072703457454265f@mail.gmail.com>

On 7/26/05, Martin Olsson <mnemo@minimum.se> wrote:
> Hi (again :o),
> 
> When ANTLR runs into a parse error I would like it to skip chars/tokens
> until a specific char/token is seen. After digging a while in the ANTLR
> source I noticed that there is a method called consumeUntil() which seems
> to do what I what.

Do you really want to do this, or do you want to have only certain
productions be the "stopping point" for error recovery?

For example, do you want to "skip to semicolon", or "recover at
<statement>"?  The first is somewhat complex in ANTLR, the second is
very straightforward using options in the parser section to disable
default error recovery, and in particular rules to enable default
error recovery.

What I've done is disable everything, then recover at <statement> and
a few others - don't have the grammar in front of me - because that
way I don't have to worry about follow sets, and so on.  I just let
ANTLR to it's thing.

- B
From kverma at hotmail.com  Wed Jul 27 04:54:08 2005
From: kverma at hotmail.com (Kamal Verma)
Date: Wed Jul 27 04:54:11 2005
Subject: [antlr-interest] C/C# pre-processor
In-Reply-To: <dd3a065f050727034177bed47f@mail.gmail.com>
Message-ID: <BAY110-F296A9120C8554104416C85C9CC0@phx.gbl>

I mean both.

A pre-processor using ANTLR which is part of ANTLR factory or utilities 
classes. Or some other set of pre-processor techniques that can be used 
along with ANTLR.

In general, preprocessing is 1st step that a language developer (one who 
works with language) needs before lexing. As I learnt from the antlr 
discussions and other on the web I found various strategies folks has 
implemented. There is no one set way to do it.

I think for ANTLR to be more useful tool it is needed that we have a nice 
way to pre-process a langauge. Also, since everyone says it is not that 
complex, we can code these preprocessor utilites as factory classes once and 
make it part of standard ANTLR runtimes.

Wouldn't it be nice if we are able to do following,

----8<----
Stream s = File.OpenText("somefile.code");
CSPreprocessor pp = new CSPreprocessor(s, "DEBUG;CPP;SOMECONST");
MyLexer lexer = new MyLexer(pp);
MyParser parser = new MyParser(lexer);
parser.main();
----8<----

_K

>From: Bryan Ewbank <ewbank@gmail.com>
>Reply-To: Bryan Ewbank <ewbank@gmail.com>
>To: antlr-interest@antlr.org
>Subject: Re: [antlr-interest] C/C# pre-processor
>Date: Wed, 27 Jul 2005 06:41:11 -0400
>
>Do you mean parsing it with antlr, or using it in the context of
>antlr, or something else?
>
>On 7/26/05, Kamal Verma <kverma@hotmail.com> wrote:
> > Does anybody have any experience with C/C++/C# preprocessor.
> > I am new to antlr, any help in this direction will be of great help.
>
>If you are wanting information on using it, most any C manual will
>have a chapter or two...

_________________________________________________________________
Dont just search. Find. Check out the new MSN Search! 
http://search.msn.click-url.com/go/onm00200636ave/direct/01/

From dragonoe at mcmaster.ca  Wed Jul 27 05:32:14 2005
From: dragonoe at mcmaster.ca (Olivier Dragon)
Date: Wed Jul 27 05:28:43 2005
Subject: [antlr-interest] Strange code generation for Fortran
Message-ID: <20050727123214.GA16671@dragon.homelinux.org>

Skipped content of type multipart/mixed-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050727/7b0c56a3/attachment-0001.bin
From demakov at ispras.ru  Wed Jul 27 05:56:52 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Wed Jul 27 05:56:57 2005
Subject: [antlr-interest] Strange code generation for Fortran
References: <20050727123214.GA16671@dragon.homelinux.org>
Message-ID: <035701c592aa$a8d23050$8cc79553@marlboro>

Hi

In optlabel rule when the type of the next token LA(1) is LABEL 
we build AST node and match LABEL token. optrule execution done.
If LA(1) is not in follow set of optlabel rule (EOS, LITERAL_* etc)
we already have syntax error and can throw exception.
If LA(1) is in follow set of optlabel we don't match next token!
But simply return from optlabel.

About token buffer. I suppose you miss that tokens in array can start not from 0
but from index specified in some other field (don't remember exactly its name).
In debugger it looks like LT(1) is not equal to array[0] element. :)

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


----- Original Message ----- 
From: "Olivier Dragon" <dragonoe@mcmaster.ca>
To: "ANTLR Interest" <antlr-interest@antlr.org>
Sent: Wednesday, July 27, 2005 4:32 PM
Subject: [antlr-interest] Strange code generation for Fortran


Hi,

I'm in the process of translating a PCCTS Fortran grammar to ANTLR that
was given to me by Terrence.

I'm attempting to fix the few non-determisms issues left. However it
appears as though the code generated from the new grammar is wrong (at
least very weird).

I used a main program and tried to debug through the generated Java
code. Doing so I ran into the following problems: in the subprogramBody
method, the optlabel call bunks on the first assignment statement after
the data declarations (which are all recognized properly).

At the same time, taking a look through the TokenQueue data structure of
the input field I found that at the moment the parser hits this same
assignment statement, the TokenBuffer's token queue become completely
screwed up. Prior to that the queue contains the expected tokens but on
that statement the order of the tokens changes into something wrong. I
don't understand this one at all because when I run the lexer alone and
print the outputs to l.nextToken() everything is fine.

Here is the optlabel rule (where LABEL is a lexer rule to match integers
in columns <= 6) (whole grammar can be found attached below):

optlabel: (LABEL)?

And this is generated as the following code:
------------------------------------
public final void optlabel() throws RecognitionException, TokenStreamException {

returnAST = null;
ASTPair currentAST = new ASTPair();
AST optlabel_AST = null;

{
switch ( LA(1)) {
case LABEL:
{
AST tmp126_AST = null;
tmp126_AST = astFactory.create(LT(1));
astFactory.addASTChild(currentAST, tmp126_AST);
match(LABEL);
break;
}
case EOS:
case LITERAL_entry:
case LITERAL_end:
case LITERAL_dir:
... (bunch of LITERAL_ cases) ...
{
break;
}
default:
{
throw new NoViableAltException(LT(1), getFilename());
}
}
}
optlabel_AST = (AST)currentAST.root;
returnAST = optlabel_AST;
}
----------------------------------------------

This is very strange. LABEL is *optional*. I don't want an exception to
get thrown when there's no viable alternative to LABEL. I especially
don't want any LITERAL_* matching. I tried to modify the code basically
removing all the cases including the default, and the code would exit
the subprogramBody loop prematurely (again, on the first assignment
statement).

If you can please enlighten me on this I would be forever owing!

-Olivier

-- 
          __-/|    ? ?     |\-__
     __--/  /  \   (^^)   /  \  \--__
  _-/   /   /  /\ / ( )  /\  \   \   \-_
 /  /   /  /  /  (   ^^ ~  \  \  \   \  \
 / Oli Dragon    ( dragonoe@mcmaster.ca \
/  B.Eng. Sfwr   (     )    \    \  \    \
/  /  /    /__--_ (   ) __--__\    \  \  \
|  /  /  _/        \_ \_       \_  \  \  |
 \/  / _/            \_ \_       \_ \  \/
  \_/ /                -\_\        \ \_/
    \/                    )         \/
                        *~
        ___--<***************>--___
       [http://dragon.homelinux.org]
        ~~~--<***************>--~~~


From mail at martin-probst.com  Wed Jul 27 06:23:23 2005
From: mail at martin-probst.com (Martin Probst)
Date: Wed Jul 27 06:23:31 2005
Subject: [antlr-interest] Strange code generation for Fortran
In-Reply-To: <20050727123214.GA16671@dragon.homelinux.org>
References: <20050727123214.GA16671@dragon.homelinux.org>
Message-ID: <1122470603.7779.18.camel@localhost.localdomain>

When I read the topic of this thread I thought for a second some really
perverted mind had written a FORTRAN code generator for ANTLR ;-)

From jbb at acm.org  Wed Jul 27 06:37:39 2005
From: jbb at acm.org (John B. Brodie)
Date: Wed Jul 27 06:38:42 2005
Subject: [antlr-interest] Evaluation boolean expressions
In-Reply-To: <000f01c5927d$e188e6a0$79f53951@thedude> (message from Xavier
	Benveniste on Wed, 27 Jul 2005 09:36:14 +0200)
References: <001201c591e3$c3e844f0$79f53951@thedude>
	<dbcf4c2c0507260835174cfcb3@mail.gmail.com>
	<1122392745.3857.35.camel@localhost.localdomain>
	<005501c59200$123adcf0$79f53951@thedude> <E1DxbKC-00085P-00@gecko>
	<000f01c5927d$e188e6a0$79f53951@thedude>
Message-ID: <E1Dxm6N-0002wl-00@gecko>

Hello :-

>thanks anyway (your answer explains me why it doesn't work).

you are welcome.

>But I'm a little bit confused : does it worth using ANTL if such a simple
>algorithm is so hard to develop?

where is it written that (correct, complete) expression evaulation is easy?

>Or can't ANTLR evaluates such simple expression as (4 + (5*2) > 15) OR (4>1)

erm, did you try my suggested atom rule?



I guess I wasn't really much help to you after all, sorry.
   -jbb
From mail at martin-probst.com  Wed Jul 27 06:52:36 2005
From: mail at martin-probst.com (Martin Probst)
Date: Wed Jul 27 06:52:40 2005
Subject: [antlr-interest] Evaluation boolean expressions
In-Reply-To: <000f01c5927d$e188e6a0$79f53951@thedude>
References: <001201c591e3$c3e844f0$79f53951@thedude>
	<dbcf4c2c0507260835174cfcb3@mail.gmail.com>
	<1122392745.3857.35.camel@localhost.localdomain>
	<005501c59200$123adcf0$79f53951@thedude> <E1DxbKC-00085P-00@gecko>
	<000f01c5927d$e188e6a0$79f53951@thedude>
Message-ID: <1122472356.7779.25.camel@localhost.localdomain>

Hi,

> But I'm a little bit confused : does it worth using ANTL if such a simple
> algorithm is so hard to develop?
> Or can't ANTLR evaluates such simple expression as (4 + (5*2) > 15) OR (4>1)

ANTLR is being used to implement turing complete languages by many
different projects and many people. It's a great help for parser
generation, but not necessarily for evaluation. That's of course because
all languages are quite different in their execution model.

The actual execution is usually what you implement yourself. Treeparsers
are used by most people to translate ASTs into their own execution model
(e.g. some kind of expression objects), or for translation (e.g. into
C).

Martin

From xavier.benveniste at free.fr  Wed Jul 27 07:21:27 2005
From: xavier.benveniste at free.fr (Xavier Benveniste)
Date: Wed Jul 27 07:21:03 2005
Subject: [antlr-interest] Evaluation boolean expressions
References: <001201c591e3$c3e844f0$79f53951@thedude>
	<dbcf4c2c0507260835174cfcb3@mail.gmail.com>
	<1122392745.3857.35.camel@localhost.localdomain>
	<005501c59200$123adcf0$79f53951@thedude> <E1DxbKC-00085P-00@gecko>
	<000f01c5927d$e188e6a0$79f53951@thedude>
	<1122472356.7779.25.camel@localhost.localdomain>
Message-ID: <004e01c592b6$7a95fbc0$79f53951@thedude>

Hi,

First, thanks both of you for your follow-up.

In fact, the atom rule suggested by John B. Brodie was one of some I had
already tried.
And, indeed, this new grammar doesn't suit my expectations.
But I'm not going to give up for all that.
Currently, I'm (re)reading some tutorials from the site and I hope I'll be
able to build it some day.
But I guess this is one huge concern about ANTLR :
- the grammar examples are either very straightforward or quite
incomprehensible for newbies (as I am), and the learning curve seems
endless.

Another point is that the mailing list isn't very helpful : too few people
try to help new ANTLR users (so, I'm very grateful to both of you and some
others).

Actually, I'm pretty sure that what I'm trying is do is a five minutes
working time for an experienced ANTLR and java developer.
Anyway, thanks again.
----- Original Message ----- 
From: "Martin Probst" <mail@martin-probst.com>
To: "Xavier Benveniste" <xavier.benveniste@free.fr>
Cc: "John B. Brodie" <jbb@acm.org>; <antlr-interest@antlr.org>
Sent: Wednesday, July 27, 2005 3:52 PM
Subject: Re: [antlr-interest] Evaluation boolean expressions


> Hi,
>
> > But I'm a little bit confused : does it worth using ANTL if such a
simple
> > algorithm is so hard to develop?
> > Or can't ANTLR evaluates such simple expression as (4 + (5*2) > 15) OR
(4>1)
>
> ANTLR is being used to implement turing complete languages by many
> different projects and many people. It's a great help for parser
> generation, but not necessarily for evaluation. That's of course because
> all languages are quite different in their execution model.
>
> The actual execution is usually what you implement yourself. Treeparsers
> are used by most people to translate ASTs into their own execution model
> (e.g. some kind of expression objects), or for translation (e.g. into
> C).
>
> Martin
>
>
>


From dragonoe at mcmaster.ca  Wed Jul 27 07:53:02 2005
From: dragonoe at mcmaster.ca (Olivier Dragon)
Date: Wed Jul 27 07:49:25 2005
Subject: [antlr-interest] Strange code generation for Fortran
In-Reply-To: <035701c592aa$a8d23050$8cc79553@marlboro>
References: <20050727123214.GA16671@dragon.homelinux.org>
	<035701c592aa$a8d23050$8cc79553@marlboro>
Message-ID: <20050727145302.GA16900@dragon.homelinux.org>

On Wed, Jul 27, 2005 at 04:56:52PM +0400, Alexey Demakov wrote:
> In optlabel rule when the type of the next token LA(1) is LABEL 
> we build AST node and match LABEL token. optrule execution done.
> If LA(1) is not in follow set of optlabel rule (EOS, LITERAL_* etc)
> we already have syntax error and can throw exception.
> If LA(1) is in follow set of optlabel we don't match next token!
> But simply return from optlabel.

So you are saying that if LA(1) is not a LABEL, then the parser tries to
match the possible tokens that may follow an optlabel? Shouldn't that be
left to the next rule (wholeStatement | endStatement) to decide if
there's a syntax error? I guess that was a design decision...

I found where the problem was. The rule assignmentStatement didn't
contain the form `NAME = expression'.

> About token buffer. I suppose you miss that tokens in array can start not from 0
> but from index specified in some other field (don't remember exactly its name).
> In debugger it looks like LT(1) is not equal to array[0] element. :)

Right. Thanks for pointing it out :o) Forgot my basic algorithms there
for a second.

Thank you very much for your help.

-Olivier

-- 
          __-/|    ? ?     |\-__
     __--/  /  \   (^^)   /  \  \--__
  _-/   /   /  /\ / ( )  /\  \   \   \-_
 /  /   /  /  /  (   ^^ ~  \  \  \   \  \
 / Oli Dragon    ( dragonoe@mcmaster.ca \
/  B.Eng. Sfwr   (     )    \    \  \    \
/  /  /    /__--_ (   ) __--__\    \  \  \
|  /  /  _/        \_ \_       \_  \  \  |
 \/  / _/            \_ \_       \_ \  \/
  \_/ /                -\_\        \ \_/
    \/                    )         \/
                        *~
        ___--<***************>--___
       [http://dragon.homelinux.org]
        ~~~--<***************>--~~~
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050727/4b542121/attachment.bin
From mail at martin-probst.com  Wed Jul 27 07:54:02 2005
From: mail at martin-probst.com (Martin Probst)
Date: Wed Jul 27 07:54:06 2005
Subject: [antlr-interest] Evaluation boolean expressions
In-Reply-To: <004e01c592b6$7a95fbc0$79f53951@thedude>
References: <001201c591e3$c3e844f0$79f53951@thedude>
	<dbcf4c2c0507260835174cfcb3@mail.gmail.com>
	<1122392745.3857.35.camel@localhost.localdomain>
	<005501c59200$123adcf0$79f53951@thedude> <E1DxbKC-00085P-00@gecko>
	<000f01c5927d$e188e6a0$79f53951@thedude>
	<1122472356.7779.25.camel@localhost.localdomain>
	<004e01c592b6$7a95fbc0$79f53951@thedude>
Message-ID: <1122476042.7779.31.camel@localhost.localdomain>

Hi,

> - the grammar examples are either very straightforward or quite
> incomprehensible for newbies (as I am), and the learning curve seems
> endless.

There is a considerable learning curve, but that is mainly the learning
curve of compiler construction / language recognition etc. I found the
actual learning curve for ANTLR to be quite easy.

> Actually, I'm pretty sure that what I'm trying is do is a five minutes
> working time for an experienced ANTLR and java developer.

Well, it's probably possible to get this working somehow quite quick.
But the question is if that is actually helpful for you. I'd bet that
you're not trying to build a "calculator that supports booleans" but
something more complex. And in that case you will probably not succeed
with something hacked together quickly.

Martin

From xavier.benveniste at free.fr  Wed Jul 27 08:43:42 2005
From: xavier.benveniste at free.fr (Xavier Benveniste)
Date: Wed Jul 27 08:43:17 2005
Subject: [antlr-interest] Evaluation boolean expressions
References: <001201c591e3$c3e844f0$79f53951@thedude>
	<dbcf4c2c0507260835174cfcb3@mail.gmail.com>
	<1122392745.3857.35.camel@localhost.localdomain>
	<005501c59200$123adcf0$79f53951@thedude> <E1DxbKC-00085P-00@gecko>
	<000f01c5927d$e188e6a0$79f53951@thedude>
	<1122472356.7779.25.camel@localhost.localdomain>
	<004e01c592b6$7a95fbc0$79f53951@thedude>
	<1122476042.7779.31.camel@localhost.localdomain>
Message-ID: <006c01c592c1$f762adf0$79f53951@thedude>

What can I say  ?
You're probably right on every point.

----- Original Message ----- 
From: "Martin Probst" <mail@martin-probst.com>
To: "Xavier Benveniste" <xavier.benveniste@free.fr>
Cc: "John B. Brodie" <jbb@acm.org>; <antlr-interest@antlr.org>
Sent: Wednesday, July 27, 2005 4:54 PM
Subject: Re: [antlr-interest] Evaluation boolean expressions


> Hi,
> 
> > - the grammar examples are either very straightforward or quite
> > incomprehensible for newbies (as I am), and the learning curve seems
> > endless.
> 
> There is a considerable learning curve, but that is mainly the learning
> curve of compiler construction / language recognition etc. I found the
> actual learning curve for ANTLR to be quite easy.
> 
> > Actually, I'm pretty sure that what I'm trying is do is a five minutes
> > working time for an experienced ANTLR and java developer.
> 
> Well, it's probably possible to get this working somehow quite quick.
> But the question is if that is actually helpful for you. I'd bet that
> you're not trying to build a "calculator that supports booleans" but
> something more complex. And in that case you will probably not succeed
> with something hacked together quickly.
> 
> Martin
> 
> 

From mnemo at minimum.se  Wed Jul 27 18:14:42 2005
From: mnemo at minimum.se (Martin Olsson)
Date: Wed Jul 27 09:14:52 2005
Subject: [antlr-interest] Re: Custom error recovery
In-Reply-To: <dd3a065f05072703457454265f@mail.gmail.com>
References: <3763.194.237.142.5.1122373217.squirrel@www.scorpiondata.com>
	<dd3a065f05072703457454265f@mail.gmail.com>
Message-ID: <42E83182.6000906@minimum.se>

First off, thank you Bryan and Alexey for your replies -- I'm slowing
working this stuff out now.

 > Do you really want to do this, or do you want to have only certain
 > productions be the "stopping point" for error recovery?
 >
 > For example, do you want to "skip to semicolon", or "recover at
 > <statement>"?  The first is somewhat complex in ANTLR, the second is
 > very straightforward using options in the parser section to disable
 > default error recovery, and in particular rules to enable default
 > error recovery.

I'm not sure I understand the difference between the two alternatives
above. What I would like it to do is something like the following..
Suppose my source contains this:

int a;
print "hello";
int var1, var2, var3;
int x = 1+1;
nondatatype whatever not valid tokens;
int c;
int more, vars;

So when the parser runs into line 4 in the source snippet it will 
generate some sort of syntax error and I would like it to "just ignore 
the rest of the line, ie skip until it finds the SEMICOLON token/char". 
Of course, this is only within functions but the language I parse doesnt 
have anything but include directives outside of functions so this is a 
very small problem.

Earlier this morning I looked at the parser source generated by ANTLR 
but to be honest, I don't really understand that much of it. I 
understand all the small parts, but I have difficulties understanding 
the wider perspective -- how all the pieces work together etc.

In particular I'm not really sure I understand the default syntax error
recovery strategy used by ANTLR. Maybe someone could explain it in plain
english, that would be great.

---

Also, while thinking about this recovery stuff I came up with another
fancy feature that I would like to implement if possible. I'm building 
an Eclipse plugin and in Eclipse syntax errors are typically underlined 
by a red squiggly line. For instance if I type this in Java:

int var blah;

Then Eclipse would recognize that "blah" isn't really expected, and it
would underline the "blah" part with an error saying something like 
"this was an unexpected token".

So, is it possible to have ANTLR provide the information required to
implement this? I tried earlier today to do this (this was a little bit 
of a longshot I guess):

public void reportError(RecognitionException e) {
   try {
     Token errorToken = LT(0);
   } catch (TokenStreamException e) { /* ignored for now */ }
   editor.displayError(e.getMessage(), e.getLine(),
                       e.getColumn(), errorToken.getLength());
}

The problem with this approach was that the Token class apparently does
not have a getLength() method -- thus I didn't get this experiment very
far.

I'm not really sure what token LT(0) returns so I don't know if it even
could have worked had there been a getLength() method. The idea was of
course to have Eclipse place its red underlining starting at the column
(on the specified line) and extending for length-chars ahead.

Have anyone else does something like this before? i.e. investigating the
length of the token or word of whatever that appeared instead of the
expected token?



Regards,
martin
From rdclark at nextquestion.net  Wed Jul 27 09:43:02 2005
From: rdclark at nextquestion.net (Richard Clark)
Date: Wed Jul 27 09:43:11 2005
Subject: [antlr-interest] OOM error from lexer (ANTLR 2.7.5)
Message-ID: <E76B99B7-F394-4B56-97D5-24B6B6B88ACE@nextquestion.net>

Here's a puzzler: I'm getting Out of Memory errors from the lexer  
when my input files don't end in a newline. The offending rule seems  
to be:

LINE
     :    ':'! (~('{'|'\\'|'\n'|'\r') | ESC)*
     ;

(starts with a colon, ends at a \\ comment, { to denote a metadata  
block, or newline. All other characters gleefully accepted.)

Is there something special I should be doing to catch an EOF,  
possibly splicing in one final newline?

...Richard

From tarunkhanna at gmail.com  Wed Jul 27 13:52:25 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Wed Jul 27 13:52:28 2005
Subject: [antlr-interest] Re: function call and expressions in C++
In-Reply-To: <42E77499.6040306@lsbu.ac.uk>
References: <42E77499.6040306@lsbu.ac.uk>
Message-ID: <dbcf4c2c050727135259875067@mail.gmail.com>

Hi David,

Thanks for your response. Actually, I misunderstood the grammar, so it was 
my mistake.

I was talking about the function_call subrule in the rule 
postfix_expression. Since I saw the LPAREN expression? RPAREN, I thought it 
could also be used for simple grouping of expressions using parenthesis to 
enforce a precedence order. However I realized later that within the 
postfix_expression rule it can only be a function call as it would be 
prefixed with some expression/identifier.

And yes the grammar is pretty good and it has been of great help to me. It 
is very close to the C++ draft that I have refering to so far. I only need 
to parse C++ expressions. ( no need for anything else like statements, 
declarations, comments).
Thanks again.
Tarun

On 7/27/05, David Wigg <wiggjd@lsbu.ac.uk> wrote:
> 
> Hello Tarun,
> 
> I think you must be looking at our CPP_parser.g grammar so I
> think I should take an interest in your problem.
> 
> Forgive me, but I am not clear what (a,b) represents on its own.
> 
> I can see that a(a,b) represents a function (though I would
> prefer to say a(x,y) so we don't duplicate symbols).
> 
> I believe that the version you have is quite good and should
> parse most C++ statements quite well. However, I should just
> mention that I am working on an updated version which has been
> updated in various ways, some following comments and problems
> submitted by different users, and I hope to publish it next
> month (but as with all IT deadlines treat this with caution!).
> 
> I look forward to hearing from you.
> 
> David.
> 
> Original message in Digest, Vol 8, Issue 45.
> 
> Message: 1
> Date: Tue, 26 Jul 2005 11:49:25 -0400
> From: Tarun Khanna <tarunkhanna@gmail.com>
> Subject: [antlr-interest] function call and expressions in C++
> grammar
> To: ANTLR Interest <antlr-interest@antlr.org>
> Message-ID: <dbcf4c2c05072608496117ed29@mail.gmail.com>
> Content-Type: text/plain; charset="iso-8859-1"
> 
> I am trying to parse C++ expressions. From the grammar on the
> ANTLR website
> I can see this rule (simplified here, I removed the other
> alternatives)
> 
> postfix_expression
> {TypeSpecifier ts;
> DeclSpecifier ds = dsInvalid; // Purpose ?
> }
> :
> primary_expression
> (options {warnWhenFollowAmbig = false;}:
> LSQUARE expression RSQUARE
> | LPAREN (expression_list)? RPAREN
> | DOT id_expression
> | POINTERTO id_expression
> | PLUSPLUS
> | MINUSMINUS
> )*
> ) ;
> 
> Although it would parse a C++ expression just fine, I don't know
> how would
> it differentiate between the following. I want to create
> different root
> nodes in the following two situations. However with the above
> grammar I
> can't find a way to do so.
> 
> a(a, b) and
> (a, b)
> 
> -- Tarun Khanna -------------- next part --------------
> 
> 


-- 
Tarun Khanna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050727/5ec10868/attachment.html
From tarunkhanna at gmail.com  Wed Jul 27 13:59:36 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Wed Jul 27 13:59:37 2005
Subject: [antlr-interest] changing the input while parsing
Message-ID: <dbcf4c2c05072713596731fca0@mail.gmail.com>

Is there a way in ANTLR to change the input while still parsing it?

I am trying to implement auto-completion in expressions. eg

a.b.

now after this if the user hits a <TAB> the whole expression including the 
<TAB> are sent to the parser for evaluation. Currently this is achieved 
using exception to bail out of the parser.

However is there a way to get back to the same state where we left off, 
while parsing and send the new replaced token to the parser instead of the 
<TAB>.


Is there a way to at-least rewind the token stream to a previous position 
and then start a rule from there on-wards?

-- 
Tarun Khanna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050727/5b579806/attachment.html
From dudewithattitude at hotmail.com  Wed Jul 27 14:01:57 2005
From: dudewithattitude at hotmail.com (BoneCrusher Pouliot)
Date: Wed Jul 27 14:01:59 2005
Subject: [antlr-interest] Getting all the info from a n-ary tree
Message-ID: <BAY102-F160E0548594BA9CEE07DD2D5CC0@phx.gbl>

I used to get info from a binary tree like this :

    #(OR_ DocIDsLeft  = expr[p_pSearchedKeywords, p_pNotSearchedKeywords]
            DocIDsRight = expr[p_pSearchedKeywords, p_pNotSearchedKeywords] 
)
            {
                DocIDs = DocIDsLeft;

                DocIDs |= DocIDsRight;
            }

I now use a n-ary tree and I want to be able to do the same for all the 
subtrees. How can I do this ?


From randerson110 at gmail.com  Wed Jul 27 18:54:25 2005
From: randerson110 at gmail.com (Robert Anderson)
Date: Wed Jul 27 18:54:28 2005
Subject: [antlr-interest] lexing multiple literals to one token
Message-ID: <20f0f74105072718547e0282c0@mail.gmail.com>

I can't quite figure out the syntax for this:

I want to lex two different (interchangeable) keywords into the same
token.  I want to use the tokens {..} mechanism because I want both of
these to be considered by a testLiterals=true identifier rule option. 
How do I do this?  The following don't seem to work:

tokens {
   MYTOK="form1";
   MYTOK="form2";
}

generates a "redefinition" warning.

tokens {
  MYTOK = "form1","form2";
}

generates an "unexpected token: ," error.

tokens {
  MYTOK = ("form1"|"form2");
}

generates a "expecting STRING_LITERAL, found '('" error.

I cannot seem to find any real documentation on what is allowable in a
tokens {...} block.

I would create a rule, but this ends up causing problems with
ambiguity with my identifier rule.  I would use the "literals option"
described in the documentation to get around this, but that appears to
have been removed and replaced with the token {..} mechanism.

Any hints?

Thanks,
Bob
From demakov at ispras.ru  Wed Jul 27 22:33:12 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Wed Jul 27 22:33:17 2005
Subject: [antlr-interest] Re: Custom error recovery
References: <3763.194.237.142.5.1122373217.squirrel@www.scorpiondata.com><dd3a065f05072703457454265f@mail.gmail.com>
	<42E83182.6000906@minimum.se>
Message-ID: <005f01c59335$d8f14f10$8cc79553@marlboro>

----- Original Message ----- 
From: "Martin Olsson" <mnemo@minimum.se>
To: <antlr-interest@antlr.org>
Sent: Thursday, July 28, 2005 5:14 AM
Subject: [antlr-interest] Re: Custom error recovery


> In particular I'm not really sure I understand the default syntax error
> recovery strategy used by ANTLR. Maybe someone could explain it in plain
> english, that would be great.

http://www.antlr.org/doc/err.html#ParserExceptionHandling

"The default exception handler will report an error, 
sync to the follow set of the rule, and return from that rule."

It means, when syntax error occurs, ANTLR will skip all tokens
until one from the follow set of the current rule. For your example:

> int a;
> print "hello";
> int var1, var2, var3;
> int x = 1+1;
> nondatatype whatever not valid tokens;
> int c;
> int more, vars;

in line 5 parser expects statement. After error message it will skip
all tokens until 'int', 'print' or something else that can start
next statement. Not until ';' because it is part of statement rule.
May be it is not bad - what if ';' is missed? Whole next statement will be skipped.

> public void reportError(RecognitionException e) {
>    try {
>      Token errorToken = LT(0);
>    } catch (TokenStreamException e) { /* ignored for now */ }
>    editor.displayError(e.getMessage(), e.getLine(),
>                        e.getColumn(), errorToken.getLength());
> }
> 
> The problem with this approach was that the Token class apparently does
> not have a getLength() method -- thus I didn't get this experiment very
> far.

Please read ANTLR generate? and library code - it is the main source
of information.

LT is antlr.Parser method:

public Token LT(int i) throws TokenStreamException

antlr.Token has method 

public String getText()

so you can use getText().length()

> I'm not really sure what token LT(0) returns so I don't know if it even
> could have worked had there been a getLength() method. The idea was of
> course to have Eclipse place its red underlining starting at the column
> (on the specified line) and extending for length-chars ahead.
> 
> Have anyone else does something like this before? i.e. investigating the
> length of the token or word of whatever that appeared instead of the
> expected token?

Use 'token' field of caught exception instead of LT(0).
It is defined in inheritors of RecognitionException that are
assotioated with some token. For example, in NoViableAltException.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


From dskolovos at gmail.com  Thu Jul 28 06:16:05 2005
From: dskolovos at gmail.com (Dimitrios Kolovos)
Date: Thu Jul 28 06:18:47 2005
Subject: [antlr-interest] LITERAL_match not found
Message-ID: <42E8DA95.3090902@gmail.com>

Hi,

I have come against a problem which I cannot resolve so any help would 
be appreciated.

The following part of a rule

"match"! NAME expression END! "match"!

produces a "LITERAL_match cannot be resolved" error message. Any ideas?

(I use the Eclipse-ANTLR and the version of ANTLR that comes with it)

Cheers,
Dimitrios
From tarunkhanna at gmail.com  Thu Jul 28 07:46:35 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Thu Jul 28 07:46:38 2005
Subject: [antlr-interest] antlr book
Message-ID: <dbcf4c2c050728074628e211a2@mail.gmail.com>

Hi Guys,

Are there any more chapters from the antlr book available for reading? I 
read the "building translators by hand" chapter and it helped me understand 
ANTLR a lot better. If you guys have access to more chapters please if 
possible email them to me.

-- 
Tarun Khanna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050728/20093597/attachment.html
From tarunkhanna at gmail.com  Thu Jul 28 08:37:05 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Thu Jul 28 08:37:08 2005
Subject: [antlr-interest] way to rewind the token stream
Message-ID: <dbcf4c2c05072808372d327de2@mail.gmail.com>

I noticed a rewind method in the Parer Class. Can it be used to rewind the 
token stream to a previous location for resync purposes? Will it also rewind 
the character sream for the lexer. I am trying to find a way to resync the 
parser to a previous location after an error occurs. 

-- 
Tarun Khanna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050728/ccbf7e26/attachment.html
From cflowers at mindspring.com  Thu Jul 28 10:46:24 2005
From: cflowers at mindspring.com (cflowers@mindspring.com)
Date: Thu Jul 28 10:46:30 2005
Subject: [antlr-interest] Please help me with homogeneous versus
	heterogeneous trees!
Message-ID: <29704250.1122572787059.JavaMail.root@wamui-thinleaf.atl.sa.earthlink.net>

Really good Antlr people,

I am struggling with the design decision of whether to use a heterogeneous vs homogeneous AST. I would love some advice from people who've been there and done that.

First, let me make this clear ... I agree 100% with what Terrance says about not putting *actions* into strongly typed node objects (see http://www.antlr.org/blog/antlr3/trees.tml and search for "Heterogeneous Nodes"). If you do that, and if you need more than one pass, then you've got code for 5 different passes all sliced up and scattered around each of your node classes. Yuck. So I am not asking about that aspect of the decision.

But I am struggling with the concept of *naming the relationships* between nodes. After all, the AST is supposed to be the "canonical representation" of what the source code says, right? It is meant to be simplified, robust against grammar changes, and convenient to understand (right?). So, if I think about how I'd design a tree with all that in mind, I start to picture nodes with named relationships between them. But that starts taking me in the direction of heterogeneous trees. 

Here's an example. Say I parse a SQL SELECT statement (which I happen to be doing). I use Antlr's great tree operators, and a tree grammar to do one pass, and here's part of the tree that I wind up with:

     SELECT
       |
       |
     FIELD ("sls_dt")
     |       |
     |       |
    ID("a")  ID("Sales_History")

As you can see, a FIELD node has an alias (that's what the first child is) and a table name (that's what the second child is). Now, here's the question. I can look at the tree, and using my own knowledge of SQL, I can see that the first child is the alias and the second child is the table name. But the tree doesn't *say* that.

But shouldn't a "canonical representation" of the meaning of the input code go ahead and spell such things out? In other words, can we say that the next tree is objectively better for most purposes?

     SELECT
       |
       |
     FIELD ("sls_dt")
     |       |
     |       |
   ALIAS   TABLENAME
     |       |
     |       |
    ID("a")  ID("Sales_History")

And, if that is an improvement, then the next question is, why don't I introduce a specific node class, called FieldNode, which has a method called getAlias() and another method called getTableName()? Then, my node class takes care of naming the relationships for me. Then, I don't need the 2 imaginary nodes.

I've seen this approach discussed in detail in books by John Gough and Pat Terry, both of whom have taught me a lot through their writings. But I haven't been able to find a detailed discussion of the *other* (all homogeneous) approach.

How have you long-time antlr users come to approach this, and why? And any pointers to materials that discuss this topic would be greatly appreciated.

Thanks!
Charlie Flowers 
Atlanta, GA



From dudewithattitude at hotmail.com  Thu Jul 28 11:35:25 2005
From: dudewithattitude at hotmail.com (BoneCrusher Pouliot)
Date: Thu Jul 28 11:35:29 2005
Subject: [antlr-interest] Problems with n-ary trees
Message-ID: <BAY102-F278AFD8687D32FC34F18ADD5CF0@phx.gbl>

I want to compute the result of a n-ary tree, something like :

#(PLUS A B C)

instead of the good ol' :

#(PLUS A #(PLUS B C))

from the calculator exemple. Here the rule would be :

#(PLUS (expr)*)

but I want to keep the result of each children in a vector cell and the add 
all the elements in the vector. Anyone can help ? Any info would be greatly 
appreciated !


From tarunkhanna at gmail.com  Thu Jul 28 12:47:30 2005
From: tarunkhanna at gmail.com (Tarun Khanna)
Date: Thu Jul 28 12:47:32 2005
Subject: [antlr-interest] way to rewind the token stream
In-Reply-To: <41fed8f80507280904620fcdca@mail.gmail.com>
References: <dbcf4c2c05072808372d327de2@mail.gmail.com>
	<41fed8f80507280904620fcdca@mail.gmail.com>
Message-ID: <dbcf4c2c0507281247696fa2da@mail.gmail.com>

Consider this rule
Class MyParser extends parser;
{
boolean d;
MyParser(Lexer lexer)
{
this(lexer);
d = false;
}
}

A: B

B: C | (D {d = true;})

Now what I want to do is to check if the token D appears in the rule. If it 
does appear, then I want to replace it with C and then resume parsing from 
the beginning of rule A again.

Please advice if it is possible to do and how if it is?

Thanks 
Tarun

On 7/28/05, Prashant Deva <prashant.deva@gmail.com> wrote:
> 
> The rewind method is used for syntactic predicates inside the
> generated parser/lexer/treeparser.
> 
> PRASHANT
> 
> On 7/28/05, Tarun Khanna <tarunkhanna@gmail.com> wrote:
> > I noticed a rewind method in the Parer Class. Can it be used to rewind 
> the
> > token stream to a previous location for resync purposes? Will it also 
> rewind
> > the character sream for the lexer. I am trying to find a way to resync 
> the
> > parser to a previous location after an error occurs.
> >
> > --
> > Tarun Khanna
> 



-- 
Tarun Khanna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050728/6e39f700/attachment.html
From demakov at ispras.ru  Thu Jul 28 22:15:10 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Thu Jul 28 22:15:17 2005
Subject: [antlr-interest] LITERAL_match not found
References: <42E8DA95.3090902@gmail.com>
Message-ID: <00ba01c593fc$7e73b100$8cc79553@marlboro>

Try to move "match" from parser to lexer tokens section
and use MATCH instead.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com



----- Original Message ----- 
From: "Dimitrios Kolovos" <dskolovos@gmail.com>
To: <antlr-interest@antlr.org>
Sent: Thursday, July 28, 2005 5:16 PM
Subject: [antlr-interest] LITERAL_match not found


> Hi,
> 
> I have come against a problem which I cannot resolve so any help would 
> be appreciated.
> 
> The following part of a rule
> 
> "match"! NAME expression END! "match"!
> 
> produces a "LITERAL_match cannot be resolved" error message. Any ideas?
> 
> (I use the Eclipse-ANTLR and the version of ANTLR that comes with it)
> 
> Cheers,
> Dimitrios

From demakov at ispras.ru  Thu Jul 28 23:08:43 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Thu Jul 28 23:08:48 2005
Subject: [antlr-interest] Please help me with homogeneous
	versusheterogeneous trees!
References: <29704250.1122572787059.JavaMail.root@wamui-thinleaf.atl.sa.earthlink.net>
Message-ID: <00d501c59403$f9239a80$8cc79553@marlboro>

----- Original Message ----- 
From: <cflowers@mindspring.com>
To: <antlr-interest@antlr.org>
Sent: Thursday, July 28, 2005 9:46 PM
Subject: [antlr-interest] Please help me with homogeneous versusheterogeneous trees!


> Really good Antlr people,
>
> I am struggling with the design decision of whether to use a heterogeneous vs homogeneous AST. I would love some advice from
people who've been there and done that.
>
> First, let me make this clear ... I agree 100% with what Terrance says about not putting *actions* into strongly typed node
objects (see http://www.antlr.org/blog/antlr3/trees.tml and search for "Heterogeneous Nodes"). If you do that, and if you need more
than one pass, then you've got code for 5 different passes all sliced up and scattered around each of your node classes. Yuck. So I
am not asking about that aspect of the decision.

There are design patterns that allow to have actions separate from tree structure.

> But I am struggling with the concept of *naming the relationships* between nodes. After all, the AST is supposed to be the
"canonical representation" of what the source code says, right? It is meant to be simplified, robust against grammar changes, and
convenient to understand (right?). So, if I think about how I'd design a tree with all that in mind, I start to picture nodes with
named relationships between them. But that starts taking me in the direction of heterogeneous trees.

Exactly. AST description is a contract between all subsystems of tool. It allows to work with ANTLR only those developers who
implement parser. While other subsystems know only about AST structure. And AST can be created not only from input text, but from
other sources.

> Here's an example. Say I parse a SQL SELECT statement (which I happen to be doing). I use Antlr's great tree operators, and a tree
grammar to do one pass, and here's part of the tree that I wind up with:
>
>      SELECT
>        |
>        |
>      FIELD ("sls_dt")
>      |       |
>      |       |
>     ID("a")  ID("Sales_History")
>
> As you can see, a FIELD node has an alias (that's what the first child is) and a table name (that's what the second child is).
Now, here's the question. I can look at the tree, and using my own knowledge of SQL, I can see that the first child is the alias and
the second child is the table name. But the tree doesn't *say* that.
>
> But shouldn't a "canonical representation" of the meaning of the input code go ahead and spell such things out? In other words,
can we say that the next tree is objectively better for most purposes?
>
>      SELECT
>        |
>        |
>      FIELD ("sls_dt")
>      |       |
>      |       |
>    ALIAS   TABLENAME
>      |       |
>      |       |
>     ID("a")  ID("Sales_History")
>
> And, if that is an improvement, then the next question is, why don't I introduce a specific node class, called FieldNode, which
has a method called getAlias() and another method called getTableName()? Then, my node class takes care of naming the relationships
for me. Then, I don't need the 2 imaginary nodes.
>
> I've seen this approach discussed in detail in books by John Gough and Pat Terry, both of whom have taught me a lot through their
writings. But I haven't been able to find a detailed discussion of the *other* (all homogeneous) approach.
>
> How have you long-time antlr users come to approach this, and why? And any pointers to materials that discuss this topic would be
greatly appreciated.
>
> Thanks!
> Charlie Flowers
> Atlanta, GA

Several monthes ago in this list there was the discussion about hetero vs home trees between Terrence, me and others.
You can find it in the archive of the list.

My main objection against homo trees and tree grammars was that homo trees force developers to use tree grammars.
But ANTLR require to learn its language, and it is not easy.
Terrence asked that Visitor pattern usually used to separate actions from AST description
has some drawbacks and I agreed. Visitors don't use any tool support and this is no surprise they lose to ANTLR.
But hetero tree approach with good tool support can overcome ANTLR homo trees.
There is Terrence's article written after this discussion:
http://www.antlr.org/article/1100569809276/use.tree.grammars.tml

Some time ago I've developed TreeDL - it is language and tool for heterogenous AST description.
After discussing hetero vs homo tree approach and this article:
http://www.southern-storm.com.au/treecc_essay.html
I've desided to add in TreeDL operations on trees similar to described in this article
and implemented in treecc tool http://www.southern-storm.com.au/treecc.html

I plan to release TreeDL with full documentation in August.
But if you interested, you can download beta version of TreeDL 2 from
http://sf.net/projects/treedl
with Java5 parser and AST description as example.
Of course TreeDL tool is implemented using TreeDL description of AST. :)

TreeDL homepage http://treedl.sf.net now contains outdated documentation for TreeDL 1 - without operations.
TreeDL 2 language description docbook source can be found in CVS repository:
http://cvs.sourceforge.net/viewcvs.py/treedl/TreeDL/treedl/src/docbook/
Write me if you need html or pdf version.

Small example: your SQL SELECT statement structure in TreeDL:

module SQL;

node SELECT
{
    child FIELD field;
}

node FIELD
{
    child ID alias;
    child ID tableName;
}

child ID
{
    attribute string text;
}

Generated code (in Java):

public class SQL
{
    public static class SELECT
    {
        // accessors. exactly as you wish
        public FIELD getField() ...
        public void setField( FIELD field ) ...
        // visitor pattern support if you need
        public void accept( Visitor visitor ) ...
    }
    public static class FIELD
    {
        public ID getAlias() ...
        public void setAlias( ID alias ) ...
        public ID getTableName() ...
        public void setTableName( ID tableName ) ...
        public void accept( Visitor visitor ) ...
    }
    public static class ID
    {
        public String getText() ...
        public void setText() ...
        public void accept( Visitor visitor ) ...
    }
    // visitor pattern support if you need
    public interface SQL_Visitor extends Visitor
    {
        public void visitSELECT( SELECT node ) ...
        public void visitFIELD( FIELD node ) ...
        public void visitID( ID node ) ...
    }
}

Also can be generated:
1. Empty and copy visitors.
2. Depth-first tree walker with action calls before and after subtree walking.
3. Tree node factory.

And you can write rather simple plugin to generate what you want. :)

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


From dskolovos at gmail.com  Fri Jul 29 02:51:45 2005
From: dskolovos at gmail.com (Dimitrios Kolovos)
Date: Fri Jul 29 02:58:52 2005
Subject: [antlr-interest] LITERAL_match not found
In-Reply-To: <00ba01c593fc$7e73b100$8cc79553@marlboro>
References: <42E8DA95.3090902@gmail.com>
	<00ba01c593fc$7e73b100$8cc79553@marlboro>
Message-ID: <42E9FC31.30902@gmail.com>

Thanks. Can anyone answer though why this message is produced anyway?

Cheers,
Dimitrios

Alexey Demakov wrote:

>Try to move "match" from parser to lexer tokens section
>and use MATCH instead.
>
>Regards,
>Alexey
>
>-----
>Alexey Demakov
>TreeDL: Tree Description Language: http://treedl.sourceforge.net
>RedVerst Group: http://www.unitesk.com
>
>
>
>----- Original Message ----- 
>From: "Dimitrios Kolovos" <dskolovos@gmail.com>
>To: <antlr-interest@antlr.org>
>Sent: Thursday, July 28, 2005 5:16 PM
>Subject: [antlr-interest] LITERAL_match not found
>
>
>  
>
>>Hi,
>>
>>I have come against a problem which I cannot resolve so any help would 
>>be appreciated.
>>
>>The following part of a rule
>>
>>"match"! NAME expression END! "match"!
>>
>>produces a "LITERAL_match cannot be resolved" error message. Any ideas?
>>
>>(I use the Eclipse-ANTLR and the version of ANTLR that comes with it)
>>
>>Cheers,
>>Dimitrios
>>    
>>
>
>
>  
>

From demakov at ispras.ru  Fri Jul 29 03:18:41 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Fri Jul 29 03:18:49 2005
Subject: [antlr-interest] 2.7.5 bug report: catch for never-thrown exception
	in empty rule
Message-ID: <018401c59426$e4fab1b0$8cc79553@marlboro>

When empty rule is translated:

class MyParser extends Parser;

expression : ;

The following code is produced:

 public final void expression() throws RecognitionException, TokenStreamException {
  
  
  try {      // for error handling
  }
  catch (RecognitionException ex) {
   reportError(ex);
   recover(ex,_tokenSet_0);
  }
 }

That causes error reported by java 1.5 compiler:

MyParser.java:48: exception antlr.RecognitionException is never thrown in body o
f corresponding try statement
                catch (RecognitionException ex) {
                ^
1 error

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


From demakov at ispras.ru  Fri Jul 29 03:56:59 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Fri Jul 29 03:57:04 2005
Subject: Fw: [antlr-interest] LITERAL_match not found
Message-ID: <01bd01c5942c$3ea352d0$8cc79553@marlboro>

And again: I've tried 2.7.5, 2.7.6b2 and even antlr-2.7.2 but always there was

MMLParser.java:
public class MMLParser extends antlr.LLkParser       implements MMLParserTokenTypes

and MMLParserTokenTypes.java always has LITERAL_match definition.

So, I suspect that something concerning Eclipse wrong, it is not ANTLR bug.
Do you have any other compilation errors? May be you didn't refresh workspace
and Eclipse can't find MMLParserTokenTypes or something?

And again - is MATCH_literal defined in generated MMLParserTokenTypes interface?

This error message is not from ANTLR, but mapped by ANTLR plugin from generated
java file to g file. Try to rebuild ANTLR files manually one more time.
ANTLR Eclipse plugin doesn't work well when there are grammar inheritance.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com



----- Original Message ----- 
From: "Dimitrios Kolovos" <dskolovos@gmail.com>
To: "Alexey Demakov" <demakov@ispras.ru>
Sent: Friday, July 29, 2005 2:19 PM
Subject: Re: [antlr-interest] LITERAL_match not found


> The header of my grammar:
> 
> class MMLParser extends OLParser;
> 
> options {
>     k = 2;
>     exportVocab = MMLParser;
>     buildAST = true;
> }
> 
> The header of OLParser
> 
> class OLParser extends Parser;
> 
> options {
>     k = 2;
>     exportVocab = OLParser;
>     buildAST = true;
> }
> 
> Thanks for your help.
> 
> Dimitrios
> 
> Alexey Demakov wrote:
> 
> >Is MATCH_literal defined in *TokenTypes interface implemented by parser?
> >Can you post header of your grammar(s) with options sections?
> >I can't reproduce this error.
> >
> >Regards,
> >Alexey
> >
> >-----
> >Alexey Demakov
> >TreeDL: Tree Description Language: http://treedl.sourceforge.net
> >RedVerst Group: http://www.unitesk.com
> >
> >----- Original Message ----- 
> >From: "Dimitrios Kolovos" <dskolovos@gmail.com>
> >To: "Alexey Demakov" <demakov@ispras.ru>
> >Cc: <antlr-interest@antlr.org>
> >Sent: Friday, July 29, 2005 1:51 PM
> >Subject: Re: [antlr-interest] LITERAL_match not found
> >
> >
> >  
> >
> >>Thanks. Can anyone answer though why this message is produced anyway?
> >>
> >>Cheers,
> >>Dimitrios
> >>
> >>Alexey Demakov wrote:
> >>
> >>    
> >>
> >>>Try to move "match" from parser to lexer tokens section
> >>>and use MATCH instead.
> >>>
> >>>Regards,
> >>>Alexey
> >>>
> >>>-----
> >>>Alexey Demakov
> >>>TreeDL: Tree Description Language: http://treedl.sourceforge.net
> >>>RedVerst Group: http://www.unitesk.com
> >>>
> >>>
> >>>
> >>>----- Original Message ----- 
> >>>From: "Dimitrios Kolovos" <dskolovos@gmail.com>
> >>>To: <antlr-interest@antlr.org>
> >>>Sent: Thursday, July 28, 2005 5:16 PM
> >>>Subject: [antlr-interest] LITERAL_match not found
> >>>
> >>>
> >>> 
> >>>
> >>>      
> >>>
> >>>>Hi,
> >>>>
> >>>>I have come against a problem which I cannot resolve so any help would 
> >>>>be appreciated.
> >>>>
> >>>>The following part of a rule
> >>>>
> >>>>"match"! NAME expression END! "match"!
> >>>>
> >>>>produces a "LITERAL_match cannot be resolved" error message. Any ideas?
> >>>>
> >>>>(I use the Eclipse-ANTLR and the version of ANTLR that comes with it)
> >>>>
> >>>>Cheers,
> >>>>Dimitrios
> >>>>   
> >>>>
> >>>>        
> >>>>
> >>> 
> >>>
> >>>      
> >>>
> >
> >
> >  
> >

From girishlal at gmail.com  Fri Jul 29 08:19:27 2005
From: girishlal at gmail.com (Girish Lal)
Date: Fri Jul 29 08:19:32 2005
Subject: [antlr-interest] java.lang.NoSuchFieldError: tokenTypeToASTClassMap
Message-ID: <2cf12da05072908195ef76a04@mail.gmail.com>

I have Jboss based application that works fine in my Windows OS.

I copied the complete Jboss folder from my Windows to RedHat Linux
box. While starting the Jboss in Linux, I get the following error. Can
you please help?

*** From Console **

07:20:48,787 ERROR [ContextLoader] Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error
creating bean with name 'sessionFactory' defined in ServletContext
resource [/WEB-INF/applicationContext-hibernate.xml]: Initialization
of bean failed; nested exception is java.lang.NoSuchFieldError:
tokenTypeToASTClassMap
java.lang.NoSuchFieldError: tokenTypeToASTClassMap
        at org.hibernate.hql.antlr.HqlBaseParser.buildTokenTypeASTClassMap(HqlBaseParser.java:4224)
        at org.hibernate.hql.antlr.HqlBaseParser.<init>(HqlBaseParser.java:107)
        at org.hibernate.hql.antlr.HqlBaseParser.<init>(HqlBaseParser.java:112)
        at org.hibernate.hql.ast.HqlParser.<init>(HqlParser.java:47)
        at org.hibernate.hql.ast.HqlParser.getInstance(HqlParser.java:42)
        at org.hibernate.hql.ast.QueryTranslatorImpl.parse(QueryTranslatorImpl.java:203)
        at org.hibernate.hql.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:127)
        at org.hibernate.hql.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:83)
        at org.hibernate.impl.SessionFactoryImpl.getQuery(SessionFactoryImpl.java:422)
        at org.hibernate.impl.SessionFactoryImpl.checkNamedQueries(SessionFactoryImpl.java:383)
        at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:286)

-- 
Regards,
Girish
From dragonoe at mcmaster.ca  Fri Jul 29 08:54:37 2005
From: dragonoe at mcmaster.ca (Olivier Dragon)
Date: Fri Jul 29 08:50:59 2005
Subject: [antlr-interest] Syntactic predicate not being generated
Message-ID: <20050729155437.GA20352@dragon.homelinux.org>

Hi.

I have this problem where I put a syntactic predicate inside the lexer
and no code is being generated for it. I get no warnings or errors (it's
inside an alternative block with more than one). Here is the lexer rule:

// numeral literal
ICON {int counter=0;} :
	// plain integer
	counter=INTVAL
	
	(
	// code label
		{getColumn()<=6}? {_ttype=LABEL;}
		|
	// hollerith
		'h' ({counter>0}? . {counter--;})* {counter==0}?
		{_ttype=HOLLERITH;}
		|
	// real
		 // avoid tokenizing the . from an operator (eg. "1.eq.2")
		('.' (NUM | EXPON | ~('n'|'a'|'o'|'e'|'x'|'l'|'g'|'t'|'f')))=>
		'.' (NUM)* (EXPON)?   // 123. or 123.456
		{_ttype=RCON;}
		|
	// X format descriptor
		'x'
		{_ttype=XCON;}
		|
	// P format descriptor
		'p'
		{_ttype=PCON;}
	)?
	;

The problem is with the real (RCON) identification. I need to make sure
that the '.' really belongs to the real number and not to an operator.
And here is the code generated:

	switch(LA(1)) {
	...
		case '.':
		{
			match('.');
			{
			_loop437:
			do {
				if (((LA(1) >= '0' && LA(1) <= '9'))) {
					mNUM(false);
				}
				else {
					break _loop437;
				}
				
			} while (true);
			}
			{
			if ((LA(1)=='d'||LA(1)=='e')) {
				mEXPON(false);
			}
			else {
			}
			
			}
			if ( inputState.guessing==0 ) {
				_ttype=RCON;
			}
			break;
		}
	...

I've tried rebuilding the files from the grammar multiple times. I have
a syntactic predicate in another rule which works right so it is
possible to have them inside the lexer... Could it be because the part
after the integer (INTVAL) is optional (?)?

I really appreciate your help.

-Olivier

-- 
          __-/|    ? ?     |\-__
     __--/  /  \   (^^)   /  \  \--__
  _-/   /   /  /\ / ( )  /\  \   \   \-_
 /  /   /  /  /  (   ^^ ~  \  \  \   \  \
 / Oli Dragon    ( dragonoe@mcmaster.ca \
/  B.Eng. Sfwr   (     )    \    \  \    \
/  /  /    /__--_ (   ) __--__\    \  \  \
|  /  /  _/        \_ \_       \_  \  \  |
 \/  / _/            \_ \_       \_ \  \/
  \_/ /                -\_\        \ \_/
    \/                    )         \/
                        *~
        ___--<***************>--___
       [http://dragon.homelinux.org]
        ~~~--<***************>--~~~
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050729/7c2f29ac/attachment.bin
From ric.klaren at gmail.com  Fri Jul 29 14:32:58 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Fri Jul 29 14:33:05 2005
Subject: [antlr-interest] lexing multiple literals to one token
In-Reply-To: <20f0f74105072718547e0282c0@mail.gmail.com>
References: <20f0f74105072718547e0282c0@mail.gmail.com>
Message-ID: <42EAA08A.1070004@gmail.com>

Robert Anderson wrote:
> I want to lex two different (interchangeable) keywords into the same
> token.  I want to use the tokens {..} mechanism because I want both of
> these to be considered by a testLiterals=true identifier rule option. 
> How do I do this?  The following don't seem to work:

You can't with the tokens section, that one is moved to a hashtable/map.
So the following are all invalid syntax:

> tokens {
>    MYTOK="form1";
>    MYTOK="form2";
> }
> 
> generates a "redefinition" warning.
> 
> tokens {
>   MYTOK = "form1","form2";
> }
> 
> generates an "unexpected token: ," error.
> 
> tokens {
>   MYTOK = ("form1"|"form2");
> }
> 
> generates a "expecting STRING_LITERAL, found '('" error.
> 
> I cannot seem to find any real documentation on what is allowable in a
> tokens {...} block.
> 
> I would create a rule, but this ends up causing problems with
> ambiguity with my identifier rule.  I would use the "literals option"
> described in the documentation to get around this, but that appears to
> have been removed and replaced with the token {..} mechanism.

You can a move it in the id rule and do a manual check in action code
then do a $setType (in the tokens section use tokens { MYTOK; } or you
can override the method that does the literal check in the lexer (name
evades me but it should be obvious from the name.

Cheers,

Ric
From cflowers at mindspring.com  Fri Jul 29 15:20:16 2005
From: cflowers at mindspring.com (cflowers@mindspring.com)
Date: Fri Jul 29 15:20:19 2005
Subject: [antlr-interest] Re: Please help me with homogeneous versus
	heterogeneous trees!
Message-ID: <6584858.1122675617267.JavaMail.root@wamui-swiss.atl.sa.earthlink.net>

Alexey,

Thanks a ton for your response. I read with great interest the links you sent me. I can see how maintaining a compiler over a long term would be much easier with TreeDL. 

It is also clear that you vote strongly in favor of heterogeneous trees that name relationships. Can anyone who holds the opposite view share some thoughts? (I will search the archives later too, but right now the corporate firewall won't let me hit web pages that aren't from port 80).

I am not building a compiler. Rather, I envision a number of C# utilities, all of which might be based off of the same AST. So I am thinking of designing a general purpose AST that will become the contract all these other tools adhere to. And it is still a tough question ... homogeneous trees seem to not be "precise" enough (or self-documenting enough") to truly express what the input source says, because they don't name relationships. I guess one could name the relationships by using a lot of imaginary nodes, but that doesn't seem to be what a lot of the antlr community does (from examples and tutorials I've seen). 

So, what have you homogeneous folks learned through your experience that mitigates this itch for explicitly named relationships? Or compensates for the lack of named relationships?

THANKS.

-----------------------------------------------------------------
ALEXEY WROTE ...

Several monthes ago in this list there was the discussion about hetero vs home trees between Terrence, me and others.
You can find it in the archive of the list.

My main objection against homo trees and tree grammars was that homo trees force developers to use tree grammars.
But ANTLR require to learn its language, and it is not easy.
Terrence asked that Visitor pattern usually used to separate actions from AST description
has some drawbacks and I agreed. Visitors don't use any tool support and this is no surprise they lose to ANTLR.
But hetero tree approach with good tool support can overcome ANTLR homo trees.
There is Terrence's article written after this discussion:
http://www.antlr.org/article/1100569809276/use.tree.grammars.tml

Some time ago I've developed TreeDL - it is language and tool for heterogenous AST description.
After discussing hetero vs homo tree approach and this article:
http://www.southern-storm.com.au/treecc_essay.html
I've desided to add in TreeDL operations on trees similar to described in this article
and implemented in treecc tool http://www.southern-storm.com.au/treecc.html

I plan to release TreeDL with full documentation in August.
But if you interested, you can download beta version of TreeDL 2 from
http://sf.net/projects/treedl
with Java5 parser and AST description as example.
Of course TreeDL tool is implemented using TreeDL description of AST. :)

TreeDL homepage http://treedl.sf.net now contains outdated documentation for TreeDL 1 - without operations.
TreeDL 2 language description docbook source can be found in CVS repository:
http://cvs.sourceforge.net/viewcvs.py/treedl/TreeDL/treedl/src/docbook/
Write me if you need html or pdf version.


From randerson110 at gmail.com  Fri Jul 29 15:42:21 2005
From: randerson110 at gmail.com (Robert Anderson)
Date: Fri Jul 29 15:42:26 2005
Subject: [antlr-interest] lexing multiple literals to one token
In-Reply-To: <42EAA08A.1070004@gmail.com>
References: <20f0f74105072718547e0282c0@mail.gmail.com>
	<42EAA08A.1070004@gmail.com>
Message-ID: <20f0f741050729154233f542e9@mail.gmail.com>

On 7/29/05, Ric Klaren <ric.klaren@gmail.com> wrote:
> Robert Anderson wrote:
> > I want to lex two different (interchangeable) keywords into the same
> > token.  I want to use the tokens {..} mechanism because I want both of
> > these to be considered by a testLiterals=true identifier rule option.
> > How do I do this?  The following don't seem to work:
> 
> You can't with the tokens section, that one is moved to a hashtable/map.
> So the following are all invalid syntax:
...
> > tokens {
> >   MYTOK = ("form1"|"form2");
> > }

> You can a move it in the id rule and do a manual check in action code

Thank you.  (Another list reader also pointed me to this solution.) 
However, this strikes me as an awkward solution to a simple,
straightforward task.

In the spirit of "simple things should be simple" I suggest the form I
left above as a supported feature of the tokens {...} block.

Thanks,
Bob
From christopher.d.schultz at comcast.net  Fri Jul 29 16:03:39 2005
From: christopher.d.schultz at comcast.net (Christopher Schultz)
Date: Fri Jul 29 16:03:43 2005
Subject: [antlr-interest] Evaluation boolean expressions
In-Reply-To: <004e01c592b6$7a95fbc0$79f53951@thedude>
References: <001201c591e3$c3e844f0$79f53951@thedude>	<dbcf4c2c0507260835174cfcb3@mail.gmail.com>	<1122392745.3857.35.camel@localhost.localdomain>	<005501c59200$123adcf0$79f53951@thedude>
	<E1DxbKC-00085P-00@gecko>	<000f01c5927d$e188e6a0$79f53951@thedude>	<1122472356.7779.25.camel@localhost.localdomain>
	<004e01c592b6$7a95fbc0$79f53951@thedude>
Message-ID: <42EAB5CB.8070907@comcast.net>

Xavier,

I have written an expression evaluator that supports the expression you
asked about, but in a slightly different form.

Yours: (4 + (5*2) > 15) OR (4>1)
Mine:  (4 + (5*2) > 15) || (4>1)

The evaluator I wrote supports all kinds of mathematical expressions, as
well as user-defined functions, etc.

It was developed as part of a home-brewed rules engine for my employer,
and I'm trying to wrestle it out of their hands and get it out to the
Open Source community. I'll post something on this mailing list when I
get that accomplished.

At any rate, this is what I get when I run that expression through my
evaluator (in debugging mode, so you can see the objects created by the
parser):

(4 + (5*2) > 15) || (4>1)      [entered via the keyboard]

Parsed: ( ( ( Constant <java.lang.Integer>4 + ( Constant
<java.lang.Integer>5 * Constant <java.lang.Integer>2 ) ) > Constant
<java.lang.Integer>15 ) || ( Constant <java.lang.Integer>4 > Constant
<java.lang.Integer>1 ) )

Result: true (java.lang.Boolean)

There's a lot of output up there, but that's because it's a pretty
complicated expression, even though it's only 25 characters long.

The parser was written using Antlr and an 8.5KB grammar file (including
comments and whitespace, etc.). The evaluator was written completely by
hand and does not use a Treeparser or anything related to Antlr. It took
quite a while to write... it was not a trivial task at all.

So, don't be discouraged by Antlr. Now that you've been tripped-up by a
few mistakes, you can continue to build your evaluator, little by
little. Or, you can wait for my announcement and download my code. ;)

-chris
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 254 bytes
Desc: OpenPGP digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050729/75e91aa9/signature.bin
From dragonoe at mcmaster.ca  Sat Jul 30 05:44:45 2005
From: dragonoe at mcmaster.ca (Olivier Dragon)
Date: Sat Jul 30 05:41:04 2005
Subject: [antlr-interest] Syntactic predicate not being generated
In-Reply-To: <20050729155437.GA20352@dragon.homelinux.org>
References: <20050729155437.GA20352@dragon.homelinux.org>
Message-ID: <20050730124444.GA22250@dragon.homelinux.org>

On Fri, Jul 29, 2005 at 11:54:37AM -0400, Olivier Dragon wrote:
> I have this problem where I put a syntactic predicate inside the lexer
> and no code is being generated for it. I get no warnings or errors (it's
> inside an alternative block with more than one). Here is the lexer rule:

I found that by increasing codeGenMakeSwitchThreshold to something
higher than the number of alternatives I had would generate proper code
with the syntactic predicate check. Before that I was using the default
value, that is not specifying one.

Is this a known bug with ANTLR?

Sincerely,
-Olivier

-- 
          __-/|    ? ?     |\-__
     __--/  /  \   (^^)   /  \  \--__
  _-/   /   /  /\ / ( )  /\  \   \   \-_
 /  /   /  /  /  (   ^^ ~  \  \  \   \  \
 / Oli Dragon    ( dragonoe@mcmaster.ca \
/  B.Eng. Sfwr   (     )    \    \  \    \
/  /  /    /__--_ (   ) __--__\    \  \  \
|  /  /  _/        \_ \_       \_  \  \  |
 \/  / _/            \_ \_       \_ \  \/
  \_/ /                -\_\        \ \_/
    \/                    )         \/
                        *~
        ___--<***************>--___
       [http://dragon.homelinux.org]
        ~~~--<***************>--~~~
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050730/c377e232/attachment.bin
From dcaton at shorelinesoftware.com  Sat Jul 30 06:19:52 2005
From: dcaton at shorelinesoftware.com (Don Caton)
Date: Sat Jul 30 06:19:56 2005
Subject: [antlr-interest] lexing multiple literals to one token
In-Reply-To: <20f0f74105072718547e0282c0@mail.gmail.com>
Message-ID: <1122729986.4596@mx9.mysite4now.com>

 

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Robert Anderson
> Sent: Wednesday, July 27, 2005 9:54 PM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] lexing multiple literals to one token
> 
> I can't quite figure out the syntax for this:
> 
> I want to lex two different (interchangeable) keywords into 
> the same token.  I want to use the tokens {..} mechanism 
> because I want both of these to be considered by a 
> testLiterals=true identifier rule option. 
> How do I do this?  The following don't seem to work:
> 
> tokens {
>    MYTOK="form1";
>    MYTOK="form2";
> }

Easy, just override testLiteralsTable() in the parser.  At least, it's easy
if you're using C++, I don't know if you can do it in Java. Put this at the
top of your lexer.g, after the tokens block, and it will be copied into the
generated lexer code:

{
   int testLiteralsTable( int ttype ) const
   {
      if ( _tcsicmp( text.c_str(), _T( "form2" ) == 0 )
      {
          ttype = MYTOK;
      }
      else
      {
         ttype = __super:testLiteralsTable( ttype );
      }
  
      return type;
   }
}

If you need a case sensitive comparison, use _tcscmp() instead, or just use
the '==' operator on the std::string class.  'text' is a class var in the
lexer that contains the text of the current token being processed.

Don


From parrt at cs.usfca.edu  Sun Jul 31 01:36:41 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun Jul 31 01:35:47 2005
Subject: [antlr-interest] Re: Please help me with homogeneous versus
	heterogeneous trees!
In-Reply-To: <6584858.1122675617267.JavaMail.root@wamui-swiss.atl.sa.earthlink.net>
References: <6584858.1122675617267.JavaMail.root@wamui-swiss.atl.sa.earthlink.net>
Message-ID: <509D47C3-AD3B-4985-99E0-E9328EDDFEA8@cs.usfca.edu>


On Jul 30, 2005, at 5:20 AM, cflowers@mindspring.com wrote:


> Alexey,
>
> Thanks a ton for your response. I read with great interest the  
> links you sent me. I can see how maintaining a compiler over a long  
> term would be much easier with TreeDL.
>
> It is also clear that you vote strongly in favor of heterogeneous  
> trees that name relationships. Can anyone who holds the opposite  
> view share some thoughts? (I will search the archives later too,  
> but right now the corporate firewall won't let me hit web pages  
> that aren't from port 80).
>

Hi.   This article pretty much summarizes my experience and  
intuition, which is not perfect but I think I've learned a trick or  
two over the past 20 years building these suckers:

http://www.antlr.org/article/1100569809276/use.tree.grammars.tml


> I am not building a compiler. Rather, I envision a number of C#  
> utilities, all of which might be based off of the same AST.
>

This will be a problem I'd say.  You'll need to build a new method in  
each tree node object for each new utility, possibly screwing up the  
other utilities.  Very poor separation in my opinion.  I like  
encapsulating all functionality for a tree walk in place rather than  
over many many files and entangled with the walks for other utilities  
or phases.  With a tree grammar, you'll never touch the tree  
descriptions  and can't possibly mess up the other utilities.


> So I am thinking of designing a general purpose AST that will  
> become the contract all these other tools adhere to. And it is  
> still a tough question ... homogeneous trees seem to not be  
> "precise" enough (or self-documenting enough") to truly express  
> what the input source says, because they don't name relationships.
>

Structure *is* the relationship.  And the grammatical structure  
exists whether you think of it that way or not.  Further, the  
structure *can* be named with a grammar rule, which is target  
language independent.  For example, 3+4 represented as

   +
  /  \
3  4

is clear to anybody regardless of the implementation language,  
right?  "+" over two operands is a structure.  Usually we keep the  
operation at the root so the generalized structure is op over  
operands.  Don't need no stinkin' OO for that. ;)


> So, what have you homogeneous folks learned through your experience  
> that mitigates this itch for explicitly named relationships? Or  
> compensates for the lack of named relationships?
>

The grammar

add : #(PLUS INT INT) ;

or

expr : #(PLUS expr expr)
      | INT
      ;

makes this relationship explicit and also gives it a name.

Remember any non random sequence of stuff conforms to a language.  I  
don't need to convince anybody on this list that grammars are useful  
for describing languages I hope. ;)

Hetero trees are fine for one phase translations.  I think co-opting  
the type system to enforce and describe structure is a nice trick but  
it doesn't scale well per my arguments in the article.  For example,  
the same tree structure can be walked by a tree parser in any target  
language (for which you have a target) whereas using a type system  
locks you into that language.  For example, C just doesn't have the  
type system to handle what an OO language can do.

For the next 5 years (after finishing v3), I have committed myself to  
educating programmers by writing articles, academic papers, and books  
on recognition and translation.  part of the problem with tree  
grammars has been the lousy ANTLR 2.x implementation and my lack of  
'marketing' and examples etc...

In summary, Alexey is clearly a very smart guy and has a nice tool.   
SableCC also uses this approach, written by another smart guy. :)   
Using the type system is nice for many applications.  They are  
obvious to the casual observer and work great for many simple  
translation, though you have to write the tree recognizer by hand  
(<shudder>).  For larger problems, I hope over the next n years to  
convince you that tree grammars are the way to recognize  
structure. :)  Give me a chance to finish v3 and then watch the  
torrent of doc/articles/papers.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com


From parrt at cs.usfca.edu  Sun Jul 31 01:41:14 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun Jul 31 01:40:17 2005
Subject: [antlr-interest] Syntactic predicate not being generated
In-Reply-To: <20050730124444.GA22250@dragon.homelinux.org>
References: <20050729155437.GA20352@dragon.homelinux.org>
	<20050730124444.GA22250@dragon.homelinux.org>
Message-ID: <23C1D236-CEBA-4FC5-BC93-FDCD986068B7@cs.usfca.edu>


On Jul 30, 2005, at 7:44 PM, Olivier Dragon wrote:

> On Fri, Jul 29, 2005 at 11:54:37AM -0400, Olivier Dragon wrote:
>
>> I have this problem where I put a syntactic predicate inside the  
>> lexer
>> and no code is being generated for it. I get no warnings or errors  
>> (it's
>> inside an alternative block with more than one). Here is the lexer  
>> rule:
>>
>
> I found that by increasing codeGenMakeSwitchThreshold to something
> higher than the number of alternatives I had would generate proper  
> code
> with the syntactic predicate check. Before that I was using the  
> default
> value, that is not specifying one.
>
> Is this a known bug with ANTLR?

Yikes!  That sounds like a problem.  I was going to suggest that  
perhaps ANTLR decided you didn't need the pred, but this second email  
makes it sounds just wrong; that switch shouldn't change  
functionality. :(

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From dragonoe at mcmaster.ca  Sun Jul 31 08:18:37 2005
From: dragonoe at mcmaster.ca (Olivier Dragon)
Date: Sun Jul 31 08:14:56 2005
Subject: [antlr-interest] Syntactic predicate not being generated
In-Reply-To: <23C1D236-CEBA-4FC5-BC93-FDCD986068B7@cs.usfca.edu>
References: <20050729155437.GA20352@dragon.homelinux.org>
	<20050730124444.GA22250@dragon.homelinux.org>
	<23C1D236-CEBA-4FC5-BC93-FDCD986068B7@cs.usfca.edu>
Message-ID: <20050731151837.GA24431@dragon.homelinux.org>

On Sun, Jul 31, 2005 at 03:41:14PM +0700, Terence Parr wrote:
> On Jul 30, 2005, at 7:44 PM, Olivier Dragon wrote:
> >On Fri, Jul 29, 2005 at 11:54:37AM -0400, Olivier Dragon wrote:
> >
> >>I have this problem where I put a syntactic predicate inside the  
> >>lexer
> >>and no code is being generated for it. I get no warnings or errors  
> >>(it's
> >>inside an alternative block with more than one). Here is the lexer  
> >>rule:
> >>
> >
> >I found that by increasing codeGenMakeSwitchThreshold to something
> >higher than the number of alternatives I had would generate proper  
> >code
> >with the syntactic predicate check. Before that I was using the  
> >default
> >value, that is not specifying one.
> >
> >Is this a known bug with ANTLR?
> 
> Yikes!  That sounds like a problem.  I was going to suggest that  
> perhaps ANTLR decided you didn't need the pred, but this second email  
> makes it sounds just wrong; that switch shouldn't change  
> functionality. :(

What happens is that you can't have a switch because of the predicate.
ANTLR should detect that and revert back to if-statements. The switch
causes problems because once LA(1) matches, the code is stuck in that
case (unless there's no break but that defeats the switch purpose and
complicates the logic). That makes predicates useless. ANTLR seems to
decide that using the switch is more important than using the predicate.

I can reproduce with 2.7.5 and 2.7.6 (which comes with antlr eclipse).

If there's anything I can do to help identify it better let me know. Try
building a lexer with that rule I put in my previous email.

-Olivier

-- 
          __-/|    ? ?     |\-__
     __--/  /  \   (^^)   /  \  \--__
  _-/   /   /  /\ / ( )  /\  \   \   \-_
 /  /   /  /  /  (   ^^ ~  \  \  \   \  \
 / Oli Dragon    ( dragonoe@mcmaster.ca \
/  B.Eng. Sfwr   (     )    \    \  \    \
/  /  /    /__--_ (   ) __--__\    \  \  \
|  /  /  _/        \_ \_       \_  \  \  |
 \/  / _/            \_ \_       \_ \  \/
  \_/ /                -\_\        \ \_/
    \/                    )         \/
                        *~
        ___--<***************>--___
       [http://dragon.homelinux.org]
        ~~~--<***************>--~~~
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050731/3c549749/attachment.bin
From jimi at temporal-wave.com  Sun Jul 31 11:23:49 2005
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun Jul 31 11:23:52 2005
Subject: [antlr-interest] Re: Please help me with homogeneous
	versusheterogeneous trees!
Message-ID: <B36CCC332A32904F8FA3DE134A23533608A439@wavemachine.temporal-wave.com>

Terrence,
 
Do you have any thoughts on when you will next release an update? I could really use some fixes for the lexer generator going wrong when there are a ton of "abc" tokens in the parser, and syntactic predicates. I know you are busy though. When do you think it will be worthwhile reworking the templates for generating C as a target? 
 
Jim

________________________________

From: antlr-interest-bounces@antlr.org on behalf of Terence Parr


 Give me a chance to finish v3 and then watch the 
torrent of doc/articles/papers.

Ter



From parrt at cs.usfca.edu  Sun Jul 31 20:36:27 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun Jul 31 20:35:42 2005
Subject: [antlr-interest] Re: Please help me with homogeneous
	versusheterogeneous trees!
In-Reply-To: <B36CCC332A32904F8FA3DE134A23533608A439@wavemachine.temporal-wave.com>
References: <B36CCC332A32904F8FA3DE134A23533608A439@wavemachine.temporal-wave.com>
Message-ID: <8324FC20-4682-4445-BE2B-ACE35DF843EC@cs.usfca.edu>


On Aug 1, 2005, at 1:23 AM, Jim Idle wrote:

> Terrence,
>
> Do you have any thoughts on when you will next release an update? I  
> could really use some fixes for the lexer generator going wrong  
> when there are a ton of "abc" tokens in the parser, and syntactic

2.7.5?  Did you run into the problem Oliver did?

> predicates. I know you are busy though. When do you think it will  
> be worthwhile reworking the templates for generating C as a target?

Targets for 2.x?  We won't bother doing any more targets for 2.x I  
imagine.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Sun Jul 31 20:37:42 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun Jul 31 20:36:52 2005
Subject: [antlr-interest] Syntactic predicate not being generated
In-Reply-To: <20050731151837.GA24431@dragon.homelinux.org>
References: <20050729155437.GA20352@dragon.homelinux.org>
	<20050730124444.GA22250@dragon.homelinux.org>
	<23C1D236-CEBA-4FC5-BC93-FDCD986068B7@cs.usfca.edu>
	<20050731151837.GA24431@dragon.homelinux.org>
Message-ID: <0E5008E0-7289-4731-AD94-08EFC2F65FF7@cs.usfca.edu>


On Jul 31, 2005, at 10:18 PM, Olivier Dragon wrote:
> What happens is that you can't have a switch because of the predicate.
> ANTLR should detect that and revert back to if-statements. The switch
> causes problems because once LA(1) matches, the code is stuck in that
> case (unless there's no break but that defeats the switch purpose and
> complicates the logic). That makes predicates useless. ANTLR seems to
> decide that using the switch is more important than using the  
> predicate.
>
> I can reproduce with 2.7.5 and 2.7.6 (which comes with antlr eclipse).

Do you have a simple 2-liner that does this?

I'm terrified of changing the 2.x analyzer without unit tests, but  
perhaps it will be obvious when I look.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Sun Jul 31 20:38:42 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun Jul 31 20:37:46 2005
Subject: [antlr-interest] Re: Please help me with homogeneous
	versusheterogeneous trees!
In-Reply-To: <8324FC20-4682-4445-BE2B-ACE35DF843EC@cs.usfca.edu>
References: <B36CCC332A32904F8FA3DE134A23533608A439@wavemachine.temporal-wave.com>
	<8324FC20-4682-4445-BE2B-ACE35DF843EC@cs.usfca.edu>
Message-ID: <455A098C-B00C-4A9C-AD8B-705BCD9C4636@cs.usfca.edu>


On Aug 1, 2005, at 10:36 AM, Terence Parr wrote:

>
> On Aug 1, 2005, at 1:23 AM, Jim Idle wrote:
>
>
>> Terrence,
>>
>> Do you have any thoughts on when you will next release an update?  
>> I could really use some fixes for the lexer generator going wrong  
>> when there are a ton of "abc" tokens in the parser, and syntactic
>>
>
> 2.7.5?  Did you run into the problem Oliver did?

Ooops...make that Olivier.
Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From demakov at ispras.ru  Sun Jul 31 23:07:42 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Sun Jul 31 23:07:53 2005
Subject: [antlr-interest] Re: Please help me with homogeneous
	versusheterogeneous trees!
References: <6584858.1122675617267.JavaMail.root@wamui-swiss.atl.sa.earthlink.net>
	<509D47C3-AD3B-4985-99E0-E9328EDDFEA8@cs.usfca.edu>
Message-ID: <009e01c5965f$56304270$8cc79553@marlboro>

Terence,

I have to say again that heterogenous trees approach also allows to separate
tree structure descriptions and operations. Moreover, visitors approach is not unique
- there are other techniques of "external dispatching". Of course, they are more easy to use
if there is special notation and tool support, but tree grammars also are unusable without ANTLR :)
And heterogenous tree can expose homogenous interface, so heterogenous trees can be used in tree grammars :)

----- Original Message ----- 
From: "Terence Parr" <parrt@cs.usfca.edu>
To: "ANTLR Interest" <antlr-interest@antlr.org>
Sent: Sunday, July 31, 2005 12:36 PM
Subject: Re: [antlr-interest] Re: Please help me with homogeneous versusheterogeneous trees!
> 
> On Jul 30, 2005, at 5:20 AM, cflowers@mindspring.com wrote:
>
> > Thanks a ton for your response. I read with great interest the  
> > links you sent me. I can see how maintaining a compiler over a long  
> > term would be much easier with TreeDL.
> >
> > It is also clear that you vote strongly in favor of heterogeneous  
> > trees that name relationships. Can anyone who holds the opposite  
> > view share some thoughts? (I will search the archives later too,  
> > but right now the corporate firewall won't let me hit web pages  
> > that aren't from port 80).
> 
> Hi.   This article pretty much summarizes my experience and  
> intuition, which is not perfect but I think I've learned a trick or  
> two over the past 20 years building these suckers:
> 
> http://www.antlr.org/article/1100569809276/use.tree.grammars.tml
> 
> > I am not building a compiler. Rather, I envision a number of C#  
> > utilities, all of which might be based off of the same AST.
> 
> This will be a problem I'd say.  You'll need to build a new method in  
> each tree node object for each new utility, possibly screwing up the  

...or you can define separate visitor or visitor-like operation...

> other utilities.  Very poor separation in my opinion.  I like  

...and it will be separated from tree description...

> encapsulating all functionality for a tree walk in place rather than  
> over many many files and entangled with the walks for other utilities  

...operation description also will be in single file independent on
other operation definitions...

> or phases.  With a tree grammar, you'll never touch the tree  
> descriptions  and can't possibly mess up the other utilities.

...the same is true for heterogenous trees -
definition of new operation doesn't require to change tree description...

> Hetero trees are fine for one phase translations.  I think co-opting  
> the type system to enforce and describe structure is a nice trick but  
> it doesn't scale well per my arguments in the article.  For example,  
> the same tree structure can be walked by a tree parser in any target  
> language (for which you have a target) whereas using a type system  
> locks you into that language.  For example, C just doesn't have the  
> type system to handle what an OO language can do.

I see no problems with modelling of required OO features in C
and translation of heterogenous tree description to C.
There are the example - TreeCC tree description can be translated to C:
http://www.southern-storm.com.au/treecc_doc/treecc_toc.html

> In summary, Alexey is clearly a very smart guy and has a nice tool.   
> SableCC also uses this approach, written by another smart guy. :)   
> Using the type system is nice for many applications.  They are  
> obvious to the casual observer and work great for many simple  
> translation, 

I think, the extentions of Java and C# programming languages
with complicated translation to language itself are not simple examples :)

These tools are implemented using heterogenous trees described in TreeDL:
http://www.unitesk.com/products/jat/
http://www.unitesk.com/products/chase/
And Portable.NET C# translator implemented using heterogenous tree described in TreeCC:
http://www.southern-storm.com.au/portable_net.html

> though you have to write the tree recognizer by hand  (<shudder>).  

Tree walker can be generated from tree description.
It is needed to write only actions for affected node types.

> For larger problems, I hope over the next n years to  
> convince you that tree grammars are the way to recognize  
> structure. :)  Give me a chance to finish v3 and then watch the  
> torrent of doc/articles/papers.
> 
> Ter

But there are other ways :)

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


From peter.story at kongsberg.com  Wed Jul 20 07:14:56 2005
From: peter.story at kongsberg.com (peter.story@kongsberg.com)
Date: Sun Aug  7 08:10:15 2005
Subject: [antlr-interest] Is there a LOGO(a programing language) grammar file?
Message-ID: <44534EC75D63B647B0A47C81D0F0B1304CFC66@kda-beexc-02.kda.kongsberg.com>

Hi
 
Did you find a LOGO grammar? I'd like one as well, I'm thinking about a
LOGO like language for drawing over a map background.
 
Pete Story
KDA, mailto:peter.story@kongsberg.com, tlf:32286944
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050720/246f89f7/attachment-0001.html
From subhobrotosinha at rediffmail.com  Wed Jul 20 18:01:35 2005
From: subhobrotosinha at rediffmail.com (Subhobroto  Sinha)
Date: Sun Aug  7 08:10:18 2005
Subject: [antlr-interest] ANTLR + VC6, problem
Message-ID: <20050721010222.21922.qmail@mailweb34.rediffmail.com>

 ?
 ?
I found all the things out by myself and wrote a few notes.
Please do give me a few days time to spice it up and then I will publish it as a FAQ . OK ?

The default .lib is OK for VS.NET 7.0/7.1, and you need to build from source for VC6..

Cheers

Subhobroto Sinha
http://www.geocities.com/subhobrotosinha

>I'm new to ANTLR. I'm just trying to get it to work. I'm using ANTLR 2.7.5
>
>I included the static library antlr.lib in the project file under VC++6.
>
>When I compile, here is what I get: Does anyone know how I can fix this?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050721/c9b6d688/attachment-0001.html
From rprememail at yahoo.com  Sun Jul 24 16:49:47 2005
From: rprememail at yahoo.com (Premkumar Rathanavelu)
Date: Sun Aug  7 08:10:33 2005
Subject: [antlr-interest] Error: How to deal with Special characters?
In-Reply-To: <1122227935.18808.2.camel@localhost.localdomain>
Message-ID: <20050724234947.76085.qmail@web80904.mail.scd.yahoo.com>

Hi Martin.,
  Thanks for your reply. The "not" rule already exists in the Lexer charVocabulary 
but error still persists. Even the special char token was also included
in the charVocabulary..
 
What should I do now?
 
Thanks.,
Prem


Martin Probst <mail@martin-probst.com> wrote:
Hi,

in ANTLR lexers, the "not" rule depends on the charVocabulary of the
lexer. If you want to have the "not" rule match really any character,
you have to make sure it's included in you lexers char vocabulary.

> | ~('*'| '\r' | '\n')

Martin



		
---------------------------------
 Start your day with Yahoo! - make it your home page 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050724/e352484a/attachment-0001.html
From rprememail at yahoo.com  Mon Jul 25 17:27:53 2005
From: rprememail at yahoo.com (Premkumar Rathanavelu)
Date: Sun Aug  7 08:10:37 2005
Subject: [antlr-interest] Re: Problem With Special Chars - Detailed
In-Reply-To: <1122328136.32048.2.camel@localhost.localdomain>
Message-ID: <20050726002753.6627.qmail@web80910.mail.scd.yahoo.com>

Hi.,
  Thanks Martin.
After reading your reply i came to know about the charVocabulary
option and now when i added the following lines to my LEXER
 
options{
charVocabulary = '\u0000'..'\uFFFE';
}

its working pretty fine.
 
HATS OFF Martin.
 
I have another question..consider the following rule
 
in PARSER
 
testPragmaRule:
 MacroPragma testLine ;
 
testLine:
(~(EndOfLine)*);
 
in LEXER
 
MacroPragma : "#pragma";
EndOfLine:
 ( options{generateAmbigWarnings = false;}:
   "\r\n"  // WIN
  | '\r'    // Mac
  | '\n'    // Unix
  )  {newline();} 
 ;
 
Line to be Parsed:
#pragma Computer Software ? Restricted
 
now i'm getting the error 

unexpected char: 0x2013 (this is the hyphen)

Could you please tell me why this happens?
 
Eager to get your reply.
 
Thanks.,
Prem
 
 
 

Martin Probst <mail@martin-probst.com> wrote: 
Hi,

> These are the lines from my Vocab file. Is this the one you meant or
> someother? 

I see, you don't know about the charVocabulary option I was referring
to. Quote from a webpage which exactly explains your problem and the
solution:

> 
> This example uses the ASCII character set in conjunction with some
> values from the extended Unicode character set: 
> 
> 
> class L extends Lexer;
> options {
> charVocabulary = '\3'..'\377'
> |
> '\u1000'..'\u1fff';
> 
> 
> }



		
---------------------------------
 Start your day with Yahoo! - make it your home page 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050725/dc608a95/attachment-0001.html
From xu at cs.uml.edu  Tue Jul 26 12:10:53 2005
From: xu at cs.uml.edu (Li Xu)
Date: Sun Aug  7 08:10:41 2005
Subject: [antlr-interest] how to define post rule code
Message-ID: <200507261910.j6QJArC05437@mercury.cs.uml.edu>

Hi,

I am using the ANTLR Java. My question is how does one define the java code
to be executed after all the generated rule code. For example, I have code block
{...//foo } and rule:
bar {any java initialization code}: ...rule_body ...;

The generated code I need is like:
public void bar() {
  ...//the generated ANTLR parsing code

  {the foo block should be here, after all generated code}
}

I have looked thru the manual, and one can add preamble code after the rule name
(as shown above); however, I don't see anything about postamble--ie, the code
one can attach to the very end --after all the generated parsing code.

So, my question is can this be done and how?

PS. I need this to manipulate the AST tree, so I can set returnAST to the
tree I created in Java. Rightnow, the last line of code is returnAST=some_ast and is
generated by antlr.

Thanks and greetings!
Li Xu

From rdclark at nextquestion.net  Tue Jul 26 14:27:06 2005
From: rdclark at nextquestion.net (Richard Clark)
Date: Sun Aug  7 08:10:45 2005
Subject: [antlr-interest] OOM error from lexer; ANTLR 2.7.4
Message-ID: <F3F95064-0CB5-4729-949E-E5865C624277@nextquestion.net>

Here's a puzzler: I'm getting Out of Memory errors from the lexer  
when my input files don't end in a newline. The offending rule seems  
to be:

LINE
     :    ':'! (~('{'|'\\'|'\n'|'\r') | ESC)*
     ;

(starts with a colon, ends at a \\ comment, { to denote a metadata  
block, or newline. All other characters gleefully accepted.)

Is there something special I should be doing to catch an EOF,  
possibly splicing in one final newline?

...Richard

