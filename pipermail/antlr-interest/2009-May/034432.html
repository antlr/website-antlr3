<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] How to pass the current node to the action?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20How%20to%20pass%20the%20current%20node%20to%20the%20action%3F&In-Reply-To=%3C79118B9FE8CE8E49B0D71964A79CB64702498563%40dekomplm002.net.plm.eds.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034431.html">
   <LINK REL="Next"  HREF="034436.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] How to pass the current node to the action?</H1>
    <B>Xie, Linlin</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20How%20to%20pass%20the%20current%20node%20to%20the%20action%3F&In-Reply-To=%3C79118B9FE8CE8E49B0D71964A79CB64702498563%40dekomplm002.net.plm.eds.com%3E"
       TITLE="[antlr-interest] How to pass the current node to the action?">linlin.xie at siemens.com
       </A><BR>
    <I>Mon May 11 02:41:03 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="034431.html">[antlr-interest] How to pass the current node to the action?
</A></li>
        <LI>Next message: <A HREF="034436.html">[antlr-interest] How to pass the current node to the action?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34432">[ date ]</a>
              <a href="thread.html#34432">[ thread ]</a>
              <a href="subject.html#34432">[ subject ]</a>
              <a href="author.html#34432">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Jim,

 

The weird thing is if I use the $rule1.tree directly, the generated code
would try to convert the rule1_return structure to common token type
first, but if I assign the rule to a variable, say P: r1=Rule1 Rule2;
then using $r1.tree would be completely fine, as the generated  code
would just keep the rule1_return structure, not trying to convert it at
all.

 

Can you see why it works this way? Thanks a lot.

Linlin

 

From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>
[mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>] On Behalf Of Xie, Linlin
Sent: 11 May 2009 10:19
To: Jim Idle
Cc: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>; Fitt, Andrew; Hamid, Nusrat
Subject: Re: [antlr-interest] How to pass the current node to the
action?

 

Hi Jim,

 

Thank you very much for your reply. I tried with the .tree solution you
suggested, but got errors like &quot;error C2440: 'type cast' :  cannot
convert from 'p_return' to 'pANTLR3_COMMON_TOKEN'.&quot; I can see that you
are trying to use the common token structure, but the way to get the
common token of current node doesn't seem to work. 

 

Is there anything I did wrong? Do you have any idea why it's not
working? Thanks again.

Linlin

 

From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>
[mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>] On Behalf Of Jim Idle
Sent: 09 May 2009 17:49
Cc: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
Subject: Re: [antlr-interest] How to pass the current node to the
action?

 

Xie, Linlin wrote: 

Sorry, I didn't give a subject to my last question. Below is the
details, can anybody help me out?

 

I presume that you mean:

p: r1 r2

In which case you need to use one of:
$tree
$p.tree
$p
$r1.tree
$r2.tree

But I can't tell you which from the code you show, but you should be
able to work that out. Also, don't forget the search on the ANTLR home
page, or the Wiki

Jim

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20090511/3c7082a1/attachment.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20090511/3c7082a1/attachment.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034431.html">[antlr-interest] How to pass the current node to the action?
</A></li>
	<LI>Next message: <A HREF="034436.html">[antlr-interest] How to pass the current node to the action?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34432">[ date ]</a>
              <a href="thread.html#34432">[ thread ]</a>
              <a href="subject.html#34432">[ subject ]</a>
              <a href="author.html#34432">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
