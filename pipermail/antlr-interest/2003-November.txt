From dpawson at nildram.co.uk  Sat Nov  1 01:24:01 2003
From: dpawson at nildram.co.uk (Dave Pawson)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Bad link in documentation. 272
Message-ID: <6.0.0.22.2.20031101092139.025f5d10@pop3.Nildram.co.uk>

In the 'getting started document', part of the 272 delivered documentation,

Near the top, 3rd item, the second link is broken.

    * To learn a bit more, read 
<http://www.jguru.com/faq/view.jsp?EID=78>All I know is that I need to 
build a parser or translator. Give me an overview of what ANTLR does and 
how I need to approach building things with ANTLR. Here is another 
description about 
<http://www.antlr.org/fieldguide/firstgr/index.html>parsing simple data.
The link http://www.antlr.org/fieldguide/firstgr/index.html is 404.

regards DaveP 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From dpawson at nildram.co.uk  Sat Nov  1 01:25:47 2003
From: dpawson at nildram.co.uk (Dave Pawson)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Bad link in documentation. 272
In-Reply-To: <6.0.0.22.2.20031101092139.025f5d10@pop3.Nildram.co.uk>
References: <6.0.0.22.2.20031101092139.025f5d10@pop3.Nildram.co.uk>
Message-ID: <6.0.0.22.2.20031101092513.025e7650@pop3.Nildram.co.uk>

At 09:24 01/11/2003, you wrote:
>In the 'getting started document', part of the 272 delivered documentation,
>
>Near the top, 3rd item, the second link is broken.
>
>     * To learn a bit more, read
><http://www.jguru.com/faq/view.jsp?EID=78>All I know is that I need to
>build a parser or translator. Give me an overview of what ANTLR does and
>how I need to approach building things with ANTLR. Here is another
>description about
><http://www.antlr.org/fieldguide/firstgr/index.html>parsing simple data.
>The link http://www.antlr.org/fieldguide/firstgr/index.html is 404.
>
>regards DaveP


http://www.antlr.org/article/firstgr/index.html would seem to be
the correct link.

DaveP



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From aaanwar at yahoo.com  Sun Nov  2 22:35:33 2003
From: aaanwar at yahoo.com (aaanwar)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] HELP!!!: with left recursion
Message-ID: <bo4svl+5ghp@eGroups.com>

Greetings,

Any advise on this:

exp	--> 	let  decs in exp end
	| 	if exp then exp end
	| 	if exp then exp else exp end
	| 	for ID :=  exp to exp do exp end
	| 	while exp do exp end
	| 	lvalue
	| 	lvalue :=exp
	| 	builtin
	| 	ID ( arg_seq  )
	| 	ID ( )
	| 	exp &  exp 
	| 	exp |  exp 
	| 	exp *  exp 
	| 	exp /  exp  
	| 	exp +  exp  
	| 	exp -  exp  
	| 	exp =  exp 
	| 	exp > exp 
	| 	exp >= exp 
	| 	exp < exp 
	| 	exp <= exp 
	| 	exp <> exp 
	| 	INTEGER_LITERAL
	| 	STRING_LIT	
	| 	( exp_seq )
	| 	( )

I tried this but no luck:

exp				: expr (binaryOp expr)*;
expr			: 	LET decs "in" exp END 
				| 	IF exp THEN exp (ELSE exp)? 
END 
				| 	FOR ID ASSIGN  exp TO exp DO 
exp END 
				| 	WHILE exp DO exp END 
				| 	lvalue (ASSIGN exp)? 
				| 	builtin 
				| 	ID LBRACKET (arg_seq )? 
RBRACKET 
				| 	INTEGER_LITERAL 
				| 	STRING_LIT 
				| 	LBRACKET exp_seq RBRACKET 
				| 	LBRACKET RBRACKET ;
				
binaryOp		:  AMPERSAND
				| OR
				| STAR
				| DIV
				| PLUS
				| MINUS
				| EQUAL
				| GT
				| GTEQ
				| LT
				| LTEQ
				| NOTEQ;





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Sun Nov  2 23:19:02 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Re: HELP!!!: with left recursion
In-Reply-To: <bo4svl+5ghp@eGroups.com>
Message-ID: <bo4vh6+pbd1@eGroups.com>

Look at any of the language grammars--java.g may be the easiest--and 
borrow the expression grammar from there as a first step.  Also, it 
helps to sort the "if" and "for" statements out of the expression 
grammar.  The big problem is usually preserving operator precedence.

--Loring

--- In antlr-interest@yahoogroups.com, "aaanwar" <aaanwar@y...> 
wrote:
> Greetings,
> 
> Any advise on this:
> 
> exp	--> 	let  decs in exp end
> 	| 	if exp then exp end
> 	| 	if exp then exp else exp end
> 	| 	for ID :=  exp to exp do exp end
> 	| 	while exp do exp end
> 	| 	lvalue
> 	| 	lvalue :=exp
> 	| 	builtin
> 	| 	ID ( arg_seq  )
> 	| 	ID ( )
> 	| 	exp &  exp 
> 	| 	exp |  exp 
> 	| 	exp *  exp 
> 	| 	exp /  exp  
> 	| 	exp +  exp  
> 	| 	exp -  exp  
> 	| 	exp =  exp 
> 	| 	exp > exp 
> 	| 	exp >= exp 
> 	| 	exp < exp 
> 	| 	exp <= exp 
> 	| 	exp <> exp 
> 	| 	INTEGER_LITERAL
> 	| 	STRING_LIT	
> 	| 	( exp_seq )
> 	| 	( )
> 
> I tried this but no luck:
> 
> exp				: expr (binaryOp expr)*;
> expr			: 	LET decs "in" exp END 
> 				| 	IF exp THEN exp (ELSE exp)? 
> END 
> 				| 	FOR ID ASSIGN  exp TO exp DO 
> exp END 
> 				| 	WHILE exp DO exp END 
> 				| 	lvalue (ASSIGN exp)? 
> 				| 	builtin 
> 				| 	ID LBRACKET (arg_seq )? 
> RBRACKET 
> 				| 	INTEGER_LITERAL 
> 				| 	STRING_LIT 
> 				| 	LBRACKET exp_seq RBRACKET 
> 				| 	LBRACKET RBRACKET ;
> 				
> binaryOp		:  AMPERSAND
> 				| OR
> 				| STAR
> 				| DIV
> 				| PLUS
> 				| MINUS
> 				| EQUAL
> 				| GT
> 				| GTEQ
> 				| LT
> 				| LTEQ
> 				| NOTEQ;


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From aaanwar at yahoo.com  Mon Nov  3 03:06:59 2003
From: aaanwar at yahoo.com (aaanwar)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Re: HELP!!!: with left recursion
In-Reply-To: <bo4vh6+pbd1@eGroups.com>
Message-ID: <bo5csj+ptar@eGroups.com>

ok this is what I have done:

still some problem ... ? anything you can spot.

/*
exp	--> 	let  decs in exp end
	| 	if exp then exp end
	| 	if exp then exp else exp end
	| 	for ID :=  exp to exp do exp end
	| 	while exp do exp end
	| 	lvalue
	| 	lvalue :=exp
	| 	builtin
	| 	ID ( arg_seq  )
	| 	ID ( )
	| 	exp &  exp 
	| 	exp |  exp 
	| 	exp *  exp 
	| 	exp /  exp  
	| 	exp +  exp  
	| 	exp -  exp  
	| 	exp =  exp 
	| 	exp > exp 
	| 	exp >= exp 
	| 	exp < exp 
	| 	exp <= exp 
	| 	exp <> exp 
	| 	INTEGER_LITERAL
	| 	STRING_LIT	
	| 	( exp_seq )
	| 	( )
*/

expr 			: assignExpr;
assignExpr		: booleanExpr ( ":=" booleanExpr )*;
booleanExpr		: compExpr ( ("&" | "|" ) compExpr ) *;
compExpr		: addExpr ( ("=" | "<" | "<=" | ">" | ">=" 
| "<>" ) addExpr ) *;
addExpr			:  multExpr (  "+"  multExpr  ) *;
multExpr		: uniaryExpr( ( "*" | "/" ) uniaryExpr) *;
uniaryExpr		: ("-")* exp ;

exp			: 	LET decs "in" exp END 
				| 	IF exp THEN exp (ELSE exp)? 
END 
				| 	FOR ID ASSIGN  exp TO exp DO 
exp END 
				| 	WHILE exp DO exp END 
				| 	lvalue (ASSIGN exp)? 
				| 	builtin 
				| 	ID LBRACKET (arg_seq )? 
RBRACKET 
				| 	INTEGER_LITERAL 
				| 	STRING_LIT 
				| 	LBRACKET exp_seq RBRACKET 
				| 	LBRACKET RBRACKET ;



--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> Look at any of the language grammars--java.g may be the easiest--
and 
> borrow the expression grammar from there as a first step.  Also, it 
> helps to sort the "if" and "for" statements out of the expression 
> grammar.  The big problem is usually preserving operator precedence.
> 
> --Loring
> 
> --- In antlr-interest@yahoogroups.com, "aaanwar" <aaanwar@y...> 
> wrote:
> > Greetings,
> > 
> > Any advise on this:
> > 
> > exp	--> 	let  decs in exp end
> > 	| 	if exp then exp end
> > 	| 	if exp then exp else exp end
> > 	| 	for ID :=  exp to exp do exp end
> > 	| 	while exp do exp end
> > 	| 	lvalue
> > 	| 	lvalue :=exp
> > 	| 	builtin
> > 	| 	ID ( arg_seq  )
> > 	| 	ID ( )
> > 	| 	exp &  exp 
> > 	| 	exp |  exp 
> > 	| 	exp *  exp 
> > 	| 	exp /  exp  
> > 	| 	exp +  exp  
> > 	| 	exp -  exp  
> > 	| 	exp =  exp 
> > 	| 	exp > exp 
> > 	| 	exp >= exp 
> > 	| 	exp < exp 
> > 	| 	exp <= exp 
> > 	| 	exp <> exp 
> > 	| 	INTEGER_LITERAL
> > 	| 	STRING_LIT	
> > 	| 	( exp_seq )
> > 	| 	( )
> > 
> > I tried this but no luck:
> > 
> > exp				: expr (binaryOp expr)*;
> > expr			: 	LET decs "in" exp END 
> > 				| 	IF exp THEN exp (ELSE exp)? 
> > END 
> > 				| 	FOR ID ASSIGN  exp TO exp DO 
> > exp END 
> > 				| 	WHILE exp DO exp END 
> > 				| 	lvalue (ASSIGN exp)? 
> > 				| 	builtin 
> > 				| 	ID LBRACKET (arg_seq )? 
> > RBRACKET 
> > 				| 	INTEGER_LITERAL 
> > 				| 	STRING_LIT 
> > 				| 	LBRACKET exp_seq RBRACKET 
> > 				| 	LBRACKET RBRACKET ;
> > 				
> > binaryOp		:  AMPERSAND
> > 				| OR
> > 				| STAR
> > 				| DIV
> > 				| PLUS
> > 				| MINUS
> > 				| EQUAL
> > 				| GT
> > 				| GTEQ
> > 				| LT
> > 				| LTEQ
> > 				| NOTEQ;


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From JVincent at Novell.Com  Mon Nov  3 08:53:07 2003
From: JVincent at Novell.Com (Jeff Vincent)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] exception handling for tree parser rules...
Message-ID: <sfa6258d.061@prv-mail20.provo.novell.com>

Hey,
 
I have a 'block' rule in my tree grammar that defines a code block and
a new nested variable scope for a run-time scripting language.  When
this rule first executes, I create a child scope in the symbol table,
then process the rule normally.  When the parser exits this rule, I
delete the nested scope and return back to the parent.  However, if an
exception occurs, I need to detect this and remove the child scope
before propogating the exception back up the stack.  I would like to do
this in a 'finally' clause as part of a try-catch.  However, I am unable
to do this in the tree parser using the antlr grammar.
 
Am I doing it wrong or can I not specify a finally clause?
 
Thanks,
 
Jeff
 
//What I WANT my subrule to look like for reference.
 
  #( BLOCK
   {   stci = thr.pushLevel();
   }
   ( comboList 
    exception
     catch [AbortException aex] {
      throw aex;
     }
     catch [ContinueException cex] {
      throw cex;
     }
     catch [ReturnException rex] {
      throw rex;
     }
     catch [BreakException bex] {
      throw bex;
     }
     catch [ExitException eex] {
      throw eex;
     }
     finally {  //<------ANTLR doesn't like this.
      stci = thr.popLevel();
     }
   )?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031103/634c86d8/attachment.html
From open.zone at virgin.net  Mon Nov  3 18:40:17 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Anyone tried this ANTLR-inspired CC?
Message-ID: <bo73ih+oin0@eGroups.com>

Just found this lexer/parser/treeparser generator based on ANTLR but
with a few JavaCC-inspired twists (such as the input grammar syntax).

   http://llk.sourceforge.net/

The performance enhancements sound interesting - particularly the
custom lookahead routines that apparently remove/reduce the reliance
on exceptions. I also like the idea of JJTree-style AST generation and
visitor generation.

Downside, it only supports Java code generation.

Cheers,

Micheal
ANTLR/C#


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Mon Nov  3 19:32:03 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Anyone tried this ANTLR-inspired CC?
In-Reply-To: <bo73ih+oin0@eGroups.com>
Message-ID: <74CF7B3C-0E77-11D8-8875-000393BB647E@cs.usfca.edu>

Interesting...I wonder if they just copied ANTLR wholesale and 
tweeked...

Sounds like I better get moving on ANTLR 3.0 ;)

Ter
On Monday, November 3, 2003, at 06:40  PM, micheal_jor wrote:

> Just found this lexer/parser/treeparser generator based on ANTLR but
> with a few JavaCC-inspired twists (such as the input grammar syntax).
>
>    http://llk.sourceforge.net/
>
> The performance enhancements sound interesting - particularly the
> custom lookahead routines that apparently remove/reduce the reliance
> on exceptions. I also like the idea of JJTree-style AST generation and
> visitor generation.
>
> Downside, it only supports Java code generation.
>
> Cheers,
>
> Micheal
> ANTLR/C#
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com link sharing, pure-n-simple




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jbb at acm.org  Mon Nov  3 20:52:37 2003
From: jbb at acm.org (jbb@acm.org)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] HELP!!!: with left recursion
In-Reply-To: <bo4svl+5ghp@eGroups.com> (message from aaanwar on Mon, 03 Nov
	2003 06:35:33 +0000)
References: <bo4svl+5ghp@eGroups.com>
Message-ID: <E1AGtBF-0005iw-00@gecko.home.org>

Aaanwar :-

You may have already worked this out for yourself. Anyway FYI here is my 2
cents...

You asked about ambiguity in 
>exp	--> 	let  decs in exp end
>	| 	if exp then exp end
>	| 	if exp then exp else exp end
>	| 	for ID :=  exp to exp do exp end
>	| 	while exp do exp end
>	| 	lvalue
>	| 	lvalue :=exp
>	| 	builtin
>	| 	ID ( arg_seq  )
>	| 	ID ( )
>	| 	exp &  exp 
>	| 	exp |  exp 
>	| 	exp *  exp 
>	| 	exp /  exp  
>	| 	exp +  exp  
>	| 	exp -  exp  
>	| 	exp =  exp 
>	| 	exp > exp 
>	| 	exp >= exp 
>	| 	exp < exp 
>	| 	exp <= exp 
>	| 	exp <> exp 
>	| 	INTEGER_LITERAL
>	| 	STRING_LIT	
>	| 	( exp_seq )
>	| 	( )

...your trial grammar snipped, but is essentially the same as my attached...

You may have already discovered that the above has a problem with the
assignment expression. Consider this expression:

	while i:=j+1<100 do foo() end

in the (sub)expression immediately after the WHILE keyword which operator
should be performed first? which is last? should it be

  ((i:=j)+1)<100   or   (i:=(j+1))<100   or   i:=((j+1)<100)   or ???

all of these interpretations are possible under your original grammar.

Splitting up the expression rules to achieve operator precedence as Loring
suggested - and you posted a message with your attempt to do so - which I
promply deleted and can not comment on - is probably a Good Thing. Altho I do
not agree that you should split the if, for, and while into a set of separate
statement rules - as long as you have well defined sematics for the value each
of these produces. In my experience, functional languages (Scheme, ML, Haskell,
etc.) all have expression syntax similiar to yours and are therefore, I
believe, very much more powerful than current imperative languages.

Anyway here is a grammar, based on your first try, which removes the ambiguity
on the assignment (note I have not actually executed this, but antlr.Tool does
not complain about it in anyway):

-----Begin-----Begin-----Begin-----Cut Here-----Cut Here-----Cut Here-----
class aaanwar_parser extends Parser;

outermost_expression : exp EOF ; 

exp : lvalue ( ASSIGN ( lvalue ASSIGN )* rvalue )? ;

rvalue : expr ( binaryOp expr )* ;

expr :
      LET decs IN exp END 
    | IF exp THEN exp ( ELSE exp )? END 
    | FOR ID ASSIGN exp TO exp DO exp END 
    | WHILE exp DO exp END 
    | builtin 
    | ID LBRACKET ( arg_seq )? RBRACKET 
    | INTEGER_LITERAL 
    | STRING_LIT 
    | LBRACKET ( exp_seq )? RBRACKET 
    ;

binaryOp :
      AMPERSAND
    | OR
    | STAR
    | DIV
    | PLUS
    | MINUS
    | EQUAL
    | GT
    | GTEQ
    | LT
    | LTEQ
    | NOTEQ
    ;

decs    : DUMMY_DECS_TOKEN ;
lvalue  : DUMMY_LVALUE_TOKEN ;
builtin : DUMMY_BUILTIN_TOKEN ;
arg_seq : DUMMY_ARGS_TOKEN ;
exp_seq : DUMMY_EXPRESSIONS_TOKEN ;
-----End-----End-----End-----Cut Here-----Cut Here-----Cut Here-----

observe that I have added dummy tokens as place holders for those rules which
you did not supply. Usually an lvalue begins with an ID so you may have some
more left factoring to do if you choose to use the above in a real language.

Hope this helps...
-- 
	-jbb

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From bjsp123 at yahoo.com  Tue Nov  4 05:26:24 2003
From: bjsp123 at yahoo.com (bjsp123)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] How to set text in a tree node?
Message-ID: <bo89e0+mfc8@eGroups.com>

Hi,

  When I'm parsing a C-like struct declaration, I'd like to use a 
rule like this:

strct
  :   "struct"!
      j:identifier!
      LCURLY! member_list RCURLY!
      { #strct = #([STRCT, #j->getText()], #strct); }
  ;

This should produce a node whose type is STRCT and whose text is the 
text found in the identifier, ie the structure name.  But, it doesn't 
work because the #j is not handled correctly -- when generating C++, 
it emits a simple 'j', whereas the variable is actually 
called 'j_AST'.  The following works for C++:

strct
  :   "struct"!
      j:identifier!
      LCURLY! member_list RCURLY!
      { #strct = #([STRCT, j_AST->getText()], #strct); }
  ;

This is a horrible solution which I can't imagine actually putting in 
production!  Surely there must be some workaround?  I just want my 
artificial node to somehow take the text of the identifier, so that I 
can build a reasonably efficient tree.

  Benjamin






 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Tue Nov  4 05:44:09 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] How to set text in a tree node?
In-Reply-To: <bo89e0+mfc8@eGroups.com>; from bjsp123@yahoo.com on Tue, Nov 04, 2003 at 01:26:24PM -0000
References: <bo89e0+mfc8@eGroups.com>
Message-ID: <20031104144409.G26225@cs.utwente.nl>

Hi,

On Tue, Nov 04, 2003 at 01:26:24PM -0000, bjsp123 wrote:
>   When I'm parsing a C-like struct declaration, I'd like to use a 
> rule like this:
> 
> strct
>   :   "struct"!
>       j:identifier!
>       LCURLY! member_list RCURLY!
>       { #strct = #([STRCT, #j->getText()], #strct); }
>   ;
> 
> This should produce a node whose type is STRCT and whose text is the 
> text found in the identifier, ie the structure name.  But, it doesn't 
> work because the #j is not handled correctly -- when generating C++, 
> it emits a simple 'j', whereas the variable is actually 
> called 'j_AST'.  The following works for C++:

Which antlr version is this ? Could you try a development snapshot from
http://wwwhome.cs.utwente.nl/~klaren/antlr/ and see if the problem
persists?

Longshot: try turning off AST generation for the complete rule and remove
the ! from the tokens/references in the rule. Something like this:

> strct !
>   :   "struct"
>       j:identifier
>       LCURLY m:member_list RCURLY
>       { #strct = #([STRCT, #j->getText()], #m); }
>   ;

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Wit is cultured insolence. --- Aristotle


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From bjsp123 at yahoo.com  Tue Nov  4 06:09:10 2003
From: bjsp123 at yahoo.com (bjsp123)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Re: How to set text in a tree node?
In-Reply-To: <20031104144409.G26225@cs.utwente.nl>
Message-ID: <bo8bu6+re7v@eGroups.com>

--- In antlr-interest@yahoogroups.com, Ric Klaren <klaren@c...> wrote:
> > work because the #j is not handled correctly -- when generating 
C++, 
> > it emits a simple 'j', whereas the variable is actually 
> > called 'j_AST'.  The following works for C++:
> 
> Which antlr version is this ? Could you try a development snapshot 
from
> http://wwwhome.cs.utwente.nl/~klaren/antlr/ and see if the problem
> persists?
> 

Thanks for your reply.

I downloaded this version, but it doesn't work with my MSVC6 project 
(at least, not within the time I have).  Of course it's not 
impossible that this is an MSVC6-specific issue... 


> Longshot: try turning off AST generation for the complete rule and 
remove
> the ! from the tokens/references in the rule. Something like this:
> 
> > strct !
> >   :   "struct"
> >       j:identifier
> >       LCURLY m:member_list RCURLY
> >       { #strct = #([STRCT, #j->getText()], #m); }
> >   ;


No go... it just doesn't expand #labels correctly when they're in the 
second parameter of a [] node-creation block.  I can work around that 
by just manually writing out the node-creation code in an action, but 
then my grammar would be C++ specific.


Benjamin




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Tue Nov  4 06:32:14 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Re: How to set text in a tree node?
In-Reply-To: <bo8bu6+re7v@eGroups.com>; from bjsp123@yahoo.com on Tue, Nov 04, 2003 at 02:09:10PM -0000
References: <20031104144409.G26225@cs.utwente.nl> <bo8bu6+re7v@eGroups.com>
Message-ID: <20031104153213.H26225@cs.utwente.nl>

On Tue, Nov 04, 2003 at 02:09:10PM -0000, bjsp123 wrote:
> I downloaded this version, but it doesn't work with my MSVC6 project 
> (at least, not within the time I have).  Of course it's not 
> impossible that this is an MSVC6-specific issue...

Ah ok VC6. Did not get to making a release with vc cleanups. If I recall
right it was a matter of removing all template class stuff guarded with

#if defined(_MSC_VER) && !defined(__ICL) // Microsoft Visual C++
...
#endif

After that it should work with a static build.

You still did not mention which version of antlr you are using.

> No go... it just doesn't expand #labels correctly when they're in the 
> second parameter of a [] node-creation block.  I can work around that 
> by just manually writing out the node-creation code in an action, but
> then my grammar would be C++ specific.

It already is ;) Everywhere where you use a x->getText() and the likes
you're being C++ specific. So its a bit of a moot point.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I think we better split up."
  "Good idea. We can do more damage that way."
  --- Ghostbusters


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From bjsp123 at yahoo.com  Tue Nov  4 07:47:04 2003
From: bjsp123 at yahoo.com (bjsp123)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Re: How to set text in a tree node?
In-Reply-To: <20031104153213.H26225@cs.utwente.nl>
Message-ID: <bo8hlo+saie@eGroups.com>

--- In antlr-interest@yahoogroups.com, Ric Klaren <klaren@c...> wrote:
> On Tue, Nov 04, 2003 at 02:09:10PM -0000, bjsp123 wrote:
> You still did not mention which version of antlr you are using.

Sorry... it's 2.7.2.

>> I can work around that 
> > by just manually writing out the node-creation code in an action, 
but
> > then my grammar would be C++ specific.
> 
> It already is ;) Everywhere where you use a x->getText() and the 
likes
> you're being C++ specific. So its a bit of a moot point.
> 

Hmm... you're right... there really should be a way to refer to the 
text (and type) of a node without having to inject bits of the output 
language -- just like the #() shorthands refer to the nodes 
themselves.


Benjamin



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From antlr-interest at yahoogroups.com  Tue Nov  4 08:29:48 2003
From: antlr-interest at yahoogroups.com (antlr-interest@yahoogroups.com)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] New file uploaded to antlr-interest
Message-ID: <1067963388.140202.35390.w74@yahoogroups.com>


Hello,

This email message is a notification to let you know that
a file has been uploaded to the Files area of the antlr-interest 
group.

  File        : /foreignLanguageExtension.tar.gz 
  Uploaded by : ruzicd <ruzicd@yahoo.com> 
  Description : Generic action language support 

You can access this file at the URL

http://groups.yahoo.com/group/antlr-interest/files/foreignLanguageExtension.tar.gz 

To learn more about file sharing for your group, please visit

http://help.yahoo.com/help/us/groups/files

Regards,

ruzicd <ruzicd@yahoo.com>
 





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From i93gusbo at hotmail.com  Tue Nov  4 09:28:06 2003
From: i93gusbo at hotmail.com (=?iso-8859-1?q?Gustav_Bostr=F6m?=)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] SQL grammar tree construction problem
Message-ID: <bo8nj6+k0va@eGroups.com>

Hello!

I'm trying to use Lubos Vnuk's (Thanks for doing all the work!) SQL-
grammar in order to do some 
processing on SQL-statments. I would for example like to find out 
which columns are affected by a DML-statement and which parameters 
correspond to which columns.

I'm doing this is in Java , so I've changed the grammar slightly.
I've removed the C++ actions or replaced them with Java versions.

My thought was to add AST-construction and then navigate the tree to 
find out the stuff I need. This is where I run into problems.
I tried to annotate the rules with ^ to construct my tree, but it 
keeps giving me "unexpected token:^" when I try to dothis for example:
sql_stmt : 
	  sql_data_stmt^ 
;

I've set the options to buildAST=true;
I'm using version 2.7.2.

Any ideas on what can be wrong?

Cheers,

Gustav Bostr?m







 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Tue Nov  4 11:27:59 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Re: SQL grammar tree construction problem
In-Reply-To: <bo8nj6+k0va@eGroups.com>
Message-ID: <bo8ujv+r5qt@eGroups.com>

Gustav--

You cannot make a rule a root--that's what ANTLR is complaining about. 
 Rules may represent subtrees, so only nodes with token ids (TEXT or 
STRING, for example) can be followed with ^.

--Loring


--- In antlr-interest@yahoogroups.com, Gustav Bostr?m <i93gusbo@h...> 
wrote:
> Hello!
> 
> I'm trying to use Lubos Vnuk's (Thanks for doing all the work!) SQL-
> grammar in order to do some 
> processing on SQL-statments. I would for example like to find out 
> which columns are affected by a DML-statement and which parameters 
> correspond to which columns.
> 
> I'm doing this is in Java , so I've changed the grammar slightly.
> I've removed the C++ actions or replaced them with Java versions.
> 
> My thought was to add AST-construction and then navigate the tree to 
> find out the stuff I need. This is where I run into problems.
> I tried to annotate the rules with ^ to construct my tree, but it 
> keeps giving me "unexpected token:^" when I try to dothis for 
example:
> sql_stmt : 
> 	  sql_data_stmt^ 
> ;
> 
> I've set the options to buildAST=true;
> I'm using version 2.7.2.
> 
> Any ideas on what can be wrong?
> 
> Cheers,
> 
> Gustav Bostr?m


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Tue Nov  4 13:26:51 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Anyone tried this ANTLR-inspired CC?
In-Reply-To: <74CF7B3C-0E77-11D8-8875-000393BB647E@cs.usfca.edu>
References: <74CF7B3C-0E77-11D8-8875-000393BB647E@cs.usfca.edu>
Message-ID: <3FA8199B.2030500@zeigermann.de>

Had a quick look at it and found it interesting too. It takes up the 
idea that certain semantic actions should be executed while guessing.

The code does not seem to be copied at all, but at most inspired by 
ANTLR. Terence, has this guy never contacted you? Maybe it could be 
interesting to share ideas or experience. I invited him to present his 
ideas here on the mailing list. Let's see if he does...

Oliver

Terence Parr wrote:
> Interesting...I wonder if they just copied ANTLR wholesale and 
> tweeked...
> 
> Sounds like I better get moving on ANTLR 3.0 ;)
> 
> Ter
> On Monday, November 3, 2003, at 06:40  PM, micheal_jor wrote:
> 
> 
>>Just found this lexer/parser/treeparser generator based on ANTLR but
>>with a few JavaCC-inspired twists (such as the input grammar syntax).
>>
>>   http://llk.sourceforge.net/
>>
>>The performance enhancements sound interesting - particularly the
>>custom lookahead routines that apparently remove/reduce the reliance
>>on exceptions. I also like the idea of JJTree-style AST generation and
>>visitor generation.
>>
>>Downside, it only supports Java code generation.
>>
>>Cheers,
>>
>>Micheal
>>ANTLR/C#
>>
>>
>>
>>
>>Your use of Yahoo! Groups is subject to 
>>http://docs.yahoo.com/info/terms/
>>
>>
>>
> 
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com link sharing, pure-n-simple
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Tue Nov  4 14:03:22 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Anyone tried this ANTLR-inspired CC?
In-Reply-To: <3FA8199B.2030500@zeigermann.de>
Message-ID: <B4A5C6F0-0F12-11D8-AE6D-000A95891192@cs.usfca.edu>


On Tuesday, November 4, 2003, at 01:26 PM, Oliver Zeigermann wrote:

> Had a quick look at it and found it interesting too. It takes up the
> idea that certain semantic actions should be executed while guessing.
>
> The code does not seem to be copied at all, but at most inspired by
> ANTLR. Terence, has this guy never contacted you?

Nope....it took me a while, but I found what I think is an email 
address; no name.  I emailed him last night and quickly looked at the 
source code.  I too verified that he had not just copied the source 
except for some smaller files.

>  Maybe it could be
> interesting to share ideas or experience. I invited him to present his
> ideas here on the mailing list. Let's see if he does...

Great! :)  Let's see if he likes the LL-regular.  I wonder who he is.  
The code showed a nontrivial understanding of the area.

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Tue Nov  4 17:09:35 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Anyone tried this ANTLR-inspired CC?
In-Reply-To: <B4A5C6F0-0F12-11D8-AE6D-000A95891192@cs.usfca.edu>
Message-ID: <bo9ikf+f54s@eGroups.com>

While you're at it, check out port80.org--very cool, very spartan 
animation.  Judging from what SourceForge reports, Chris Leung seems 
to be fairly prolific.

I can't say that I like the LLK syntax (way too verbose for my 
tastes among other things).  As Oliver comments, he seems to have 
resurrected--or reinvented, more likely--the guarded predicates from 
PCCTS.

After poking around, I have to say that the code looks more 
ANTLR-influenced than ANTLR-derived--there is nothing that looks like 
ANTLR 2 internals (except in concept), and he has avoided reproducing 
the more eccentric design features of ANTLR 2 internals.  He's done 
the traditional lex/flex substring stuff in the lexer (match, but 
leave characters in place; store string start and end 
pointers/offsets) in token objects; he also has the DFA in NextToken() 
implemented for fixed character sequences, but not for keywords.

--Loring

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
wrote:
> 
> On Tuesday, November 4, 2003, at 01:26 PM, Oliver Zeigermann wrote:
> 
> > Had a quick look at it and found it interesting too. It takes up 
the
> > idea that certain semantic actions should be executed while 
guessing.
> >
> > The code does not seem to be copied at all, but at most inspired 
by
> > ANTLR. Terence, has this guy never contacted you?
> 
> Nope....it took me a while, but I found what I think is an email 
> address; no name.  I emailed him last night and quickly looked at 
the 
> source code.  I too verified that he had not just copied the source 
> except for some smaller files.
> 
> >  Maybe it could be
> > interesting to share ideas or experience. I invited him to present 
his
> > ideas here on the mailing list. Let's see if he does...
> 
> Great! :)  Let's see if he likes the LL-regular.  I wonder who he 
is.  
> The code showed a nontrivial understanding of the area.
> 
> Ter
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ilkerpasa135 at yahoo.com  Thu Nov  6 03:03:55 2003
From: ilkerpasa135 at yahoo.com (sanane lan)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Need help for grammar of TL1 (a language  use d in North America in Telecom)
In-Reply-To: <72C9789739C4214096AE945753B11EA36B1F0E@mypxmail04.bco-home.com>
Message-ID: <20031106110355.8338.qmail@web20414.mail.yahoo.com>

Hello Monty,
 
First of all I apoligize for getting back so late (got side tracked with multiple releases).
 
Secondly, I have no doubt that your 10 hours will save me 2 weeks.
 
Third, what I'm trying to do is; come up with an alternative architecture prototype in our problem domain and then show this to management. If I can get a kick-start on TL1 (described at http://www.tl1.com/static/pdfs/gen/5556.pdf  or  http://www.tl1.com/library/TL1/TL1_Protocol/ ) parsing with antlr + java , then chances of getting management's (my direct management or another group that I know) interest is there. And when we proceed with antlr, I will definitely remember favors :)
 
Regards,
-- ilker


mzukowski@yci.com wrote:By the way, I'm available for small contracts like getting this to work. 10
of my hours will save you a week or two of your own if you are new to antlr,
plus I'll be teaching you exactly what you need to know. I mentor,
troubleshoot, design and educate.

Actually it's what I do on the mailing list except I go deeper and dedicate
more than 10 minutes per question :)

Anyhow, contact me via my website if you need my services. 

Monty

http://www.codetransform.com



-----Original Message-----
From: ilkerpasa135 [mailto:ilkerpasa135@yahoo.com] 
Sent: Friday, October 03, 2003 9:01 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Need help for grammar of TL1 (a language use d
in North America in Telecom)


Hello Monty,

I had missed your filter example, which I'm starting to read now.

I thought I read Ter's Lexer class notes, but I'll read it again too.

And will get back after that.

-- ilker


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> You've got some serious ambiguities there. I would recommend maybe 
using
> lexer states or a parser filter as I've outlined at
> http://www.codetransform.com/filterexample.html
> 
> Also read Ter's lecture on lexers. Actually read them all, it's 
worth it.
> Should be prominently available from the antlr.org home page.
> 
> Monty
> 
> -----Original Message-----
> From: ilkerpasa135 [mailto:ilkerpasa135@y...] 
> Sent: Thursday, October 02, 2003 4:17 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Need help for grammar of TL1 (a language 
used in
> North America in Telecom)
> 
> I'm new to antlr. And trying to learn antlr and prepare the grammar 
> for TL1, a language used in North America for all Telecom 
equipment. 
> Hence when I get it, it could be an interesting addition to antlr 
> grammars.
> 
> Of course since I'm a newbei, when I run the following grammar I 
get 
> many nondeterminism warnings, basically all over the place.
> 
> Past couple of days (not full time tough), I went through antlr 
> tutorials, documents, etc , but obviously I haven't gotten it and 
> need help. Hence any help is appreciated.
> 
> Here is what the TL1 command structure is like;
> VERB-modifier1-modifier2 : TID:AID:CTAG: : NAME=VALUE,NAME=VALUE ;
> VERB-modifier1-modifier2 : TID:AID:CTAG: : VALUE,VALUE ;
> Following are some TL1 command examples;
> ENT-EQPT-OC3:TID1:1-1-#-#-3:ctag123::attrib1=123,attrib2=456;
> ENT-EQPT-OC1:TID1:1-1-#-#-3:ctag123::123,456;
> 
> 
> Here is the grammar that I have;
> 
> class TL1Parser extends Parser;
> options { buildAST=true; }
> 
> // first just get TL1command grammar working
> //tl1Message : tl1Command | tl1Acknow | tl1Response | tl1Auto;
> tl1Message : tl1Command;
> 
> tl1Command : (command_code DOUBL^ staging_blocks (DOUBL^ 
> payload_blocks)?) SEMI!;
> 
> command_code : VERB (DASH^ modifier1 (DASH^ modifier2)?)?;
> modifier1 : NAME;
> modifier2 : NAME;
> 
> staging_blocks : TID DOUBL^ AID DOUBL^ CTAG (DOUBL^ 
general_block)?;
> // general_block could be improved
> general_block : NAME;
> 
> payload_blocks : data_block_list (DOUBL^ data_block_list)*;
> data_block_list : data_block (COMMA^ data_block)*;
> data_block : data_block_positional | data_block_named;
> data_block_positional : VALUE (COMMA^ VALUE)*;
> data_block_named : (NAME EQUAL^ VALUE) (COMMA^ (NAME EQUAL^ VALUE))
*;
> 
> 
> 
> class TL1Lexer extends Lexer;
> 
> AID : ('a'..'z'|'A'..'Z'|'0'..'9'|'.'|'-'|'_'|'/'|'#')+;
> CTAG : ('a'..'z'|'A'..'Z'|'0'..'9')+;
> NAME : ('a'..'z'|'A'..'Z'|'0'..'9')+;
> TID : ('a'..'z'|'A'..'Z'|'0'..'9'|'.'|'-'|'_'|'/')+;
> VALUE : ('a'..'z'|'A'..'Z'|'0'..'9')+;
> VERB : ('a'..'z'|'A'..'Z')+;
> 
> COMMA : ',';
> DASH : '-';
> DOUBL : ':';
> EQUAL : '=';
> SEMI : ';';
> 
> WS : (' ' | '\t'
> | '\r' '\n' { newline(); }
> | '\n' { newline(); }
> ) 
> { $setType(Token.SKIP); };
> 
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/




Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 




Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 




---------------------------------
Do you Yahoo!?
Protect your identity with Yahoo! Mail AddressGuard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031106/fcd0f34c/attachment.html
From epovazan at telus.net  Thu Nov  6 14:16:44 2003
From: epovazan at telus.net (Edward Povazan)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Manually creating tree - infinite loop
Message-ID: <000701c3a4b3$a98b5d50$6601a8c0@Epsilon>

Hello,

I am not too familiar with manipulating trees, and I had an infinite loop. I
'solved' it using ! to exclude the nodes from automatic tree construction,
but I still and not sure of things.

One rule in my grammar is:
rel_op:
add_op (GT^ add_op)*
;

I allow things like:
1 > 2 > 3
and I would like to convert the above to
1 > 2 and 2 > 3
so that it is easier to use in my tree parser for code generation.

The first case creates a tree like
#(> #(> 1 2) 3)
and I want
#(AND #(> 1 2) #(> 2 3))

I broke things down like this so I could build my own tree:
// add_op (GT add_op (GT add_op)*)?

a1:add_op
(
gt1:GT! a2:add_op!
{ ## = #(#gt1, #a1, #a2); }
(
gt2:GT! a3:add_op!
{ ## = #([AND, "and"], ##, #(#gt2, a2, a3)); #a2 = #a3; }
)*
)?
;

If I don't include the ! above, things loop forever in line 340 of
ASTFactory.java:
// Chase tail to last sibling
while (tail.getNextSibling() != null) {
tail = tail.getNextSibling();
}
Is this correct behaviour? I know not including ! adds redundant tree nodes
which are discarded in my own tree building, but just wondering if this
should cause infinite loops.

Also, I end up with a tree like
#(#(AND #(> 1 2 3) #(> 2 3))
and I don't see why. When is 3 being added to ## before I add it as a child
to AND.

And lastly, is there a better way to do this? Are there docs to tree stuff
like this - I found info on ## by searching the lists/internet, but not in
the official docs. Did I miss them?

Thanks for any info,
-Ed


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Nov  6 14:25:53 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Manually creating tree - infinite loop
Message-ID: <72C9789739C4214096AE945753B11EA3FAB9F6@mypxmail04.bco-home.com>

I can't really follow what rule was getting you into trouble, but infinite
loops are usually caused because people forget that trees and nodes are the
same object.  A node contains the down and right pointers.  So if you were
to do something like #(a1, a2, a1) you would create an infinite loop.  Often
people forget to copy a node if they want something like the above.

Monty

-----Original Message-----
From: Edward Povazan [mailto:epovazan@telus.net] 
Sent: Thursday, November 06, 2003 2:17 PM
To: antlr-interest
Subject: [antlr-interest] Manually creating tree - infinite loop

Hello,

I am not too familiar with manipulating trees, and I had an infinite loop. I
'solved' it using ! to exclude the nodes from automatic tree construction,
but I still and not sure of things.

One rule in my grammar is:
rel_op:
add_op (GT^ add_op)*
;

I allow things like:
1 > 2 > 3
and I would like to convert the above to
1 > 2 and 2 > 3
so that it is easier to use in my tree parser for code generation.

The first case creates a tree like
#(> #(> 1 2) 3)
and I want
#(AND #(> 1 2) #(> 2 3))

I broke things down like this so I could build my own tree:
// add_op (GT add_op (GT add_op)*)?

a1:add_op
(
gt1:GT! a2:add_op!
{ ## = #(#gt1, #a1, #a2); }
(
gt2:GT! a3:add_op!
{ ## = #([AND, "and"], ##, #(#gt2, a2, a3)); #a2 = #a3; }
)*
)?
;

If I don't include the ! above, things loop forever in line 340 of
ASTFactory.java:
// Chase tail to last sibling
while (tail.getNextSibling() != null) {
tail = tail.getNextSibling();
}
Is this correct behaviour? I know not including ! adds redundant tree nodes
which are discarded in my own tree building, but just wondering if this
should cause infinite loops.

Also, I end up with a tree like
#(#(AND #(> 1 2 3) #(> 2 3))
and I don't see why. When is 3 being added to ## before I add it as a child
to AND.

And lastly, is there a better way to do this? Are there docs to tree stuff
like this - I found info on ## by searching the lists/internet, but not in
the official docs. Did I miss them?

Thanks for any info,
-Ed


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Thu Nov  6 15:33:29 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Manually creating tree - infinite loop
In-Reply-To: <72C9789739C4214096AE945753B11EA3FAB9F6@mypxmail04.bco-home.com>
Message-ID: <boelo9+a3mc@eGroups.com>

Adding to Monty's comment:  What you encountered is a "feature" of 
ANTLR 2.x.  ! on a node says "don't incorporate into a tree"; without 
that, ANTLR goes ahead and inserts the node into the tree being built. 
 When you then use it for construction in an action, the child and 
sibling pointers have been set and that can cause problems as in your 
example--ANTLR chases pointers until it can find a place to insert 
the node, and you can get the infinite loop behavior that you saw.

This may get fixed in ANTLR 3.

--Loring


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> I can't really follow what rule was getting you into trouble, but 
infinite
> loops are usually caused because people forget that trees and nodes 
are the
> same object.  A node contains the down and right pointers.  So if 
you were
> to do something like #(a1, a2, a1) you would create an infinite 
loop.  Often
> people forget to copy a node if they want something like the above.
> 
> Monty
> 
> -----Original Message-----
> From: Edward Povazan [mailto:epovazan@t...] 
> Sent: Thursday, November 06, 2003 2:17 PM
> To: antlr-interest
> Subject: [antlr-interest] Manually creating tree - infinite loop
> 
> Hello,
> 
> I am not too familiar with manipulating trees, and I had an infinite 
loop. I
> 'solved' it using ! to exclude the nodes from automatic tree 
construction,
> but I still and not sure of things.
> 
> One rule in my grammar is:
> rel_op:
> add_op (GT^ add_op)*
> ;
> 
> I allow things like:
> 1 > 2 > 3
> and I would like to convert the above to
> 1 > 2 and 2 > 3
> so that it is easier to use in my tree parser for code generation.
> 
> The first case creates a tree like
> #(> #(> 1 2) 3)
> and I want
> #(AND #(> 1 2) #(> 2 3))
> 
> I broke things down like this so I could build my own tree:
> // add_op (GT add_op (GT add_op)*)?
> 
> a1:add_op
> (
> gt1:GT! a2:add_op!
> { ## = #(#gt1, #a1, #a2); }
> (
> gt2:GT! a3:add_op!
> { ## = #([AND, "and"], ##, #(#gt2, a2, a3)); #a2 = #a3; }
> )*
> )?
> ;
> 
> If I don't include the ! above, things loop forever in line 340 of
> ASTFactory.java:
> // Chase tail to last sibling
> while (tail.getNextSibling() != null) {
> tail = tail.getNextSibling();
> }
> Is this correct behaviour? I know not including ! adds redundant 
tree nodes
> which are discarded in my own tree building, but just wondering if 
this
> should cause infinite loops.
> 
> Also, I end up with a tree like
> #(#(AND #(> 1 2 3) #(> 2 3))
> and I don't see why. When is 3 being added to ## before I add it as 
a child
> to AND.
> 
> And lastly, is there a better way to do this? Are there docs to tree 
stuff
> like this - I found info on ## by searching the lists/internet, but 
not in
> the official docs. Did I miss them?
> 
> Thanks for any info,
> -Ed
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From epovazan at telus.net  Thu Nov  6 15:59:39 2003
From: epovazan at telus.net (Edward Povazan)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Manually creating tree - infinite loop
References: <72C9789739C4214096AE945753B11EA3FAB9F6@mypxmail04.bco-home.com>
Message-ID: <001701c3a4c2$0a789070$6601a8c0@Epsilon>

> I can't really follow what rule was getting you into trouble, but infinite
> loops are usually caused because people forget that trees and nodes are
the
> same object.  A node contains the down and right pointers.  So if you were
> to do something like #(a1, a2, a1) you would create an infinite loop.
Often
> people forget to copy a node if they want something like the above.
>
> Monty

Thanks for the input,
The loop is gone now by excluding nodes from the auto tree contruction. They
were as indicated below.
You mention copying nodes? Is there a shortcut for this?
a1:add_op
(
gt1:GT! a2:add_op!
{ ## = #(#gt1, #a1, #a2); }    <----loop
(
gt2:GT! a3:add_op!
{ ## = #([AND, "and"], ##, #(#gt2, #a2, #a3)); #a2 = #a3; }  <----loop
)*
)?
;

The tree is now correct with this code, I still don't see how adding child
## results in a bad tree.
{
AST childroot = astFactory.dupTree(##);
## = #([AND, "and"], childroot, #(#gt2, #a2, #a3));
#a2 = #a3;
}

vs

{
## = #([AND, "and"], ##, #(#gt2, #a2, #a3));
#a2 = #a3;
}

Thanks - it works now, but I don't like when I don't know why something
works.
-Ed


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From epovazan at telus.net  Thu Nov  6 17:20:19 2003
From: epovazan at telus.net (Edward Povazan)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Manually creating tree - infinite loop
References: <boelo9+a3mc@eGroups.com>
Message-ID: <001d01c3a4cd$4f2fa7c0$6601a8c0@Epsilon>

Thanks Loring,
I'm still new to antlr (in terms of more interesting uses) so sometimes I am
not sure if I am doing things wrong, or interacting with interesting
'features' :)
-Ed

----- Original Message -----
From: "lgcraymer" <lgc@mail1.jpl.nasa.gov>
To: <antlr-interest@yahoogroups.com>
Sent: Thursday, November 06, 2003 3:33 PM
Subject: [antlr-interest] Re: Manually creating tree - infinite loop


> Adding to Monty's comment:  What you encountered is a "feature" of
> ANTLR 2.x.  ! on a node says "don't incorporate into a tree"; without
> that, ANTLR goes ahead and inserts the node into the tree being built.
>  When you then use it for construction in an action, the child and
> sibling pointers have been set and that can cause problems as in your
> example--ANTLR chases pointers until it can find a place to insert
> the node, and you can get the infinite loop behavior that you saw.
>
> This may get fixed in ANTLR 3.
>
> --Loring


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Fri Nov  7 00:59:56 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Semantic action execution while in guessing mode
Message-ID: <3FAB5F0C.7070001@zeigermann.de>

Hi,

there is a nice feature in LLK

http://llk.sourceforge.net

that allows certain semantic actions to be executed even when guessing 
in syntactic predicates. This allows for a wider range of parseable 
languages as you can query results of these actions in semantic predicates.

I have a modification of ANTLR that does this as well running fine and 
would like to discuss if this would be a nice feature for future ANTLR 
version.

Cheers,

Oliver



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Fri Nov  7 01:16:35 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Local lookahead depth
In-Reply-To: <3FAB5F0C.7070001@zeigermann.de>
References: <3FAB5F0C.7070001@zeigermann.de>
Message-ID: <3FAB62F3.2040302@zeigermann.de>

Another nice feature of LLK

http://llk.sourceforge.net

is that it allows to specify lookahead depth locally per block. This 
allows for more efficient parsing as only for the rules that need deep 
lookahead this code is generated.

Also nice!

Oliver

Oliver Zeigermann wrote:
> Hi,
> 
> there is a nice feature in LLK
> 
> http://llk.sourceforge.net
> 
> that allows certain semantic actions to be executed even when guessing 
> in syntactic predicates. This allows for a wider range of parseable 
> languages as you can query results of these actions in semantic predicates.
> 
> I have a modification of ANTLR that does this as well running fine and 
> would like to discuss if this would be a nice feature for future ANTLR 
> version.
> 
> Cheers,
> 
> Oliver



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From joshua.davis at kiodex.com  Fri Nov  7 05:01:17 2003
From: joshua.davis at kiodex.com (Joshua Davis)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: SQL grammar tree construction problem
In-Reply-To: <bo8ujv+r5qt@eGroups.com>
Message-ID: <bog52t+oj6e@eGroups.com>

ANTLR newbie question:

I've been having a similar problem I think.  I made a very simple 
grammar based on L. V.'s grammar.   It seems to be always producing 
only one root node, with no children.  What steps should I take to 
debug this?  I have tried adding actions to the rules, and it looks 
like the rules are being triggered correctly, but no AST is produced.

--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> Gustav--
> 
> You cannot make a rule a root--that's what ANTLR is complaining 
about. 
>  Rules may represent subtrees, so only nodes with token ids (TEXT 
or 
> STRING, for example) can be followed with ^.
> 
> --Loring
> 
> 
> --- In antlr-interest@yahoogroups.com, Gustav Bostr?m 
<i93gusbo@h...> 
> wrote:
> > Hello!
> > 
> > I'm trying to use Lubos Vnuk's (Thanks for doing all the work!) 
SQL-
> > grammar in order to do some 
> > processing on SQL-statments. I would for example like to find out 
> > which columns are affected by a DML-statement and which 
parameters 
> > correspond to which columns.
> > 
> > I'm doing this is in Java , so I've changed the grammar slightly.
> > I've removed the C++ actions or replaced them with Java versions.
> > 
> > My thought was to add AST-construction and then navigate the tree 
to 
> > find out the stuff I need. This is where I run into problems.
> > I tried to annotate the rules with ^ to construct my tree, but it 
> > keeps giving me "unexpected token:^" when I try to dothis for 
> example:
> > sql_stmt : 
> > 	  sql_data_stmt^ 
> > ;
> > 
> > I've set the options to buildAST=true;
> > I'm using version 2.7.2.
> > 
> > Any ideas on what can be wrong?
> > 
> > Cheers,
> > 
> > Gustav Bostr?m


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From i93gusbo at hotmail.com  Fri Nov  7 09:12:36 2003
From: i93gusbo at hotmail.com (=?iso-8859-1?q?Gustav_Bostr=F6m?=)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: SQL grammar tree construction problem
In-Reply-To: <bog52t+oj6e@eGroups.com>
Message-ID: <bogjq4+upit@eGroups.com>

Hi!

Thanks for the help!

I think I'm trying the same thing as you, but also without luck.
I try to do:
sql_stmt : 
	  sql_data_stmt  { #sql_stmt = #([SQL_STMT,"sql_stmt"], 
#sql_stmt); }

, but I never find this node in the tree. The code seems to be 
generated, but has no effect. Could it be that no root node is ever 
created?

I also tried this:
sql_script : 
	 (sql_stmt)? { #sql_script = #
([Token.MIN_USER_TYPE,"sql_script"], #sql_script); } ( SEMICOLON 
(sql_stmt)? )*

"sql_script" is the first rule and now a node is in fact created, but 
it has no children. I thought that all the subsequent nodes would be 
added as children automatically.

Qoute from doc:
"Setting the return tree is very useful in combination with normal 
tree construction because you can have ANTLR do all the work of 
building a tree and then add an imaginary root node such as: 
  
decl : ( TYPE ID )+
       { #decl = #([DECL,"decl"], #decl); }
     ;
ANTLR allows you to assign to #rule anywhere within an alternative of 
the rule. ANTLR ensures that references of and assignments to #rule 
within an action force the parser's internal AST construction 
variables into a stable state. After you assign to #rule, the state 
of the parser's automatic AST construction variables will be set as 
if ANTLR had generated the tree rooted at #rule. For example, any 
children nodes added after the action will be added to the children 
of #rule." 
 
This is exactly what I want, but I must be doing something wrong.



/Gustav



--- In antlr-interest@yahoogroups.com, "Joshua Davis" 
<joshua.davis@k...> wrote:
> ANTLR newbie question:
> 
> I've been having a similar problem I think.  I made a very simple 
> grammar based on L. V.'s grammar.   It seems to be always producing 
> only one root node, with no children.  What steps should I take to 
> debug this?  I have tried adding actions to the rules, and it looks 
> like the rules are being triggered correctly, but no AST is 
produced.
> 
> --- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> > Gustav--
> > 
> > You cannot make a rule a root--that's what ANTLR is complaining 
> about. 
> >  Rules may represent subtrees, so only nodes with token ids (TEXT 
> or 
> > STRING, for example) can be followed with ^.
> > 
> > --Loring
> > 
> > 
> > --- In antlr-interest@yahoogroups.com, Gustav Bostr?m 
> <i93gusbo@h...> 
> > wrote:
> > > Hello!
> > > 
> > > I'm trying to use Lubos Vnuk's (Thanks for doing all the work!) 
> SQL-
> > > grammar in order to do some 
> > > processing on SQL-statments. I would for example like to find 
out 
> > > which columns are affected by a DML-statement and which 
> parameters 
> > > correspond to which columns.
> > > 
> > > I'm doing this is in Java , so I've changed the grammar 
slightly.
> > > I've removed the C++ actions or replaced them with Java 
versions.
> > > 
> > > My thought was to add AST-construction and then navigate the 
tree 
> to 
> > > find out the stuff I need. This is where I run into problems.
> > > I tried to annotate the rules with ^ to construct my tree, but 
it 
> > > keeps giving me "unexpected token:^" when I try to dothis for 
> > example:
> > > sql_stmt : 
> > > 	  sql_data_stmt^ 
> > > ;
> > > 
> > > I've set the options to buildAST=true;
> > > I'm using version 2.7.2.
> > > 
> > > Any ideas on what can be wrong?
> > > 
> > > Cheers,
> > > 
> > > Gustav Bostr?m


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Fri Nov  7 11:00:43 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <3FAB62F3.2040302@zeigermann.de>
Message-ID: <bogq4r+2q8f@eGroups.com>

Oliver--

ANTLR is actually quite a bit smarter about lookahead--k is maximum lookahead, and ANTLR generates minimum lookahead.  If you 
set k=20 but don't need more than k=2, then 2 is the maximum lookahead in the generated code.  I think that Sriram put local 
lookahead into JavaCC as a workaround--it does add a step to grammar debugging that is not necessary for ANTLR.

Also, as to actions in lookahead code:  this is something that Ter supported in PCCTS under the name "guarded predicates" or some 
such.  I don't know that it saw much use, and I suspect that usage indicates a too early incorporation of semantic information into the 
translator--tree transformation helps avoid that.

LLK is interesting, but it is a synthesis of implementation approaches from a number of sources (ANTLR, JavaCC, flex) and not an 
extension to the state of the art.  I think that's why Leung describes it as an ANTLR 2.7.2 derivative despite what seems to be the 
complete absence of any ANTLR 2.7.2 source code in the distribution.  It is also a work in progress.

--Loring

--- In antlr-interest@yahoogroups.com, Oliver Zeigermann <oliver@z...> wrote:
> Another nice feature of LLK
> 
> http://llk.sourceforge.net
> 
> is that it allows to specify lookahead depth locally per block. This 
> allows for more efficient parsing as only for the rules that need deep 
> lookahead this code is generated.
> 
> Also nice!
> 
> Oliver
> 
> Oliver Zeigermann wrote:
> > Hi,
> > 
> > there is a nice feature in LLK
> > 
> > http://llk.sourceforge.net
> > 
> > that allows certain semantic actions to be executed even when guessing 
> > in syntactic predicates. This allows for a wider range of parseable 
> > languages as you can query results of these actions in semantic predicates.
> > 
> > I have a modification of ANTLR that does this as well running fine and 
> > would like to discuss if this would be a nice feature for future ANTLR 
> > version.
> > 
> > Cheers,
> > 
> > Oliver


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From hawkwall at yahoo.com  Fri Nov  7 12:09:09 2003
From: hawkwall at yahoo.com (hawkwall)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Newbie Question about Syntactic Predicates
Message-ID: <bogu55+tr1m@eGroups.com>

Hello,

I need to match the following data

NUMBER.OF.SURFACE: 3
NUMBER.OF.STANDALONE: 5

Where all I am really concered about is that the surface has a number
3, and the standalone has a number 5.  I put the following in my Lexer

DIGITS : (0..9)+ ;

DOT : '.' ;

COLON : ':' ;

SURFACE : "NUMBER" DOT "OF" DOT "SURFACE" COLON ;

STANDALONE : "NUMBER" DOT "OF" DOT "STANDALONE" COLON;

WS	:	(	' '
		|	'\t'
		|	'\f' 
		|	(	options {generateAmbigWarnings=false;}
			:	"\r\n"  // DOS
			|	'\r'    // Macintosh
			|	'\n'	// Unix
			)
			{newline();}
		)+

    // now the overall whitespace action -- skip it!
    { $setType(Token.SKIP); }
    ;

And my Parser looks like:

start :  rule1 rule2;

rule1 : SURFACE DIGITS ; 

rule2 : STANDALONE DIGITS ;

with some actions to print out the number it finds.  If k<12 in the
lexer, I get a nondeterminism error, and can see the problem in the
generated Lexer.  But k=12 takes awhile to generate the .java files. 
I can break this up into smaller tokens that are put together in the
parser like:

Lexer:
NUMBER : "NUMBER" ;
OF : "OF" ; 
DOT : '.' ;
STANDALONE : "STANDALONE" ;
SURFACE : "SURFACE" ;
etc.

and then in Parser:
start : rule1
        rule2

rule1 : NUMBER DOT OF DOT STANDALONE COLON DIGITS ; 
rule2 : NUMBER DOT OF DOT SURFACE COLON DIGITS ;

and it works with a smaller k value in the lexer, but it doesn't seem
like the best option and makes the parser harder to construct.  I have
read everything I can find about syntatic predicates, and they seem to
be what I need, but I can't get it work.  I added the following to the
Lexer from above

SURFACE_OR_STANDOFF
	: 	("NUMBER" DOT "OF" DOT "SURFACE"  ) => 
		"NUMBER" DOT "OF" DOT "SURFACE" DOT "TO" DOT "AIR" DOT "THREAT" DOT
"CLASSES" COLON 
		{$setType(SURFACE); }
	|	("NUMBER" DOT "OF" DOT "STANDOFF" DOT "RANGE" DOT "AIRCRAFT" DOT
"CLASSES" COLON ) => 
		"NUMBER" DOT "OF" DOT "STANDOFF"  
		{$setType(STANDOFF);}
	;

What am I missing?  Is there a better way to match large tokens?  I
can tell that the Parser is backtracking at all.  The error message I
get is:

parser exception: line 2:12: expecting 'U', found 'T'
line 2:12: expecting 'U', found 'T'

Which says to me the parser is still trying to match the SURFACE
token.  I tried to define the parser to match SURFACE once and then
STANDALONE, but my head hurts from all the banging.  Thanks for the
help.

Mike Wall


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From hawkwall at yahoo.com  Fri Nov  7 12:34:40 2003
From: hawkwall at yahoo.com (hawkwall)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Newbie Question about Syntactic Predicates
Message-ID: <bogvl0+a8ip@eGroups.com>

Why is it I can't figure something out until I post to the newsgroup?

I think I have a solution.  My predicate was wrong on the type
STANDOFF.  Changing it too:

SURFACE_OR_STANDOFF
: ("NUMBER" DOT "OF" DOT "SURFACE" ) =>
"NUMBER" DOT "OF" DOT "SURFACE" DOT "TO" DOT "AIR" DOT "THREAT" DOT
"CLASSES" COLON
{$setType(SURFACE); }
| ("NUMBER" DOT "OF" DOT "STANDOFF" ) =>
"NUMBER" DOT "OF" DOT "STANDOFF" DOT "RANGE" DOT "AIRCRAFT" DOT
"CLASSES" COLON
{$setType(STANDOFF);}
;

and then making the original SURFACE and STANDOFF protected seems have
 fixed my problem.  I read that the protected keeps the tokens from
being sent to the parser, but I still don't quite understand it.  Is
this the correct way to handle large tokens without a large k value?

Thanks for your time.

Mike 


> Hello,
> 
> I need to match the following data
> 
> NUMBER.OF.SURFACE: 3
> NUMBER.OF.STANDALONE: 5
> 
> Where all I am really concered about is that the surface has a number
> 3, and the standalone has a number 5. I put the following in my Lexer
> 
> DIGITS : (0..9)+ ;
> 
> DOT : '.' ;
> 
> COLON : ':' ;
> 
> SURFACE : "NUMBER" DOT "OF" DOT "SURFACE" COLON ;
> 
> STANDALONE : "NUMBER" DOT "OF" DOT "STANDALONE" COLON;
> 
> WS : ( ' '
> | '\t'
> | '\f'
> | ( options {generateAmbigWarnings=false;}
> : "\r\n" // DOS
> | '\r' // Macintosh
> | '\n' // Unix
> )
> {newline();}
> )+
> 
> // now the overall whitespace action -- skip it!
> { $setType(Token.SKIP); }
> ;
> 
> And my Parser looks like:
> 
> start : rule1 rule2;
> 
> rule1 : SURFACE DIGITS ;
> 
> rule2 : STANDALONE DIGITS ;
> 
> with some actions to print out the number it finds. If k<12 in the
> lexer, I get a nondeterminism error, and can see the problem in the

> [snip]

> SURFACE_OR_STANDOFF
> : ("NUMBER" DOT "OF" DOT "SURFACE" ) =>
> "NUMBER" DOT "OF" DOT "SURFACE" DOT "TO" DOT "AIR" DOT "THREAT" DOT
> "CLASSES" COLON
> {$setType(SURFACE); }
> | ("NUMBER" DOT "OF" DOT "STANDOFF" DOT "RANGE" DOT "AIRCRAFT" DOT
> "CLASSES" COLON ) =>
> "NUMBER" DOT "OF" DOT "STANDOFF"
> {$setType(STANDOFF);}
> ;
> 
> [snip] 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Jim.OConnor at microfocus.com  Fri Nov  7 12:37:38 2003
From: Jim.OConnor at microfocus.com (Jim O'Connor)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Newbie Question about Syntactic Predicates
Message-ID: <3AC103F1B7EEEC48A855ACB1D2819E9102218284@rock-corpmail.microfocus.com>

Hi Mike,
  First, to point out an oversite. 

rule1 : "Standalone";
rule2 : "Surface";

Grammar : rule1 rule2; // translates to "Standalone Surface"

Input: "Surface Standalone" 

Grammar doesn't match Input.

Comments: 
1. If you are not familiar with the "testLiterals" option, see the
documentation.  I say this because you seem to want to do a lot of work
instead of making your life simple.

See it this makes sense, 

(I'm not paying attention to syntax!!!!!)

Lexer - for this small ap consider making '.' part of IDENTIFIER

Tokens
{
SURFACE="NUMBER.OF.SURFACE"; 
STANDALONE="NUMBER.OF.STANDALONE";
... others
}

{testliterals = true}
IDENTIFIER:  (LETTER | '.')*;
NUMBER : (DIGIT)*;

COLON : ':';
Private DIGIT : (0..9)



PARSER

Start : (rule)*; // do as many generic rules as possible

rule : stand
     | surf
   ... others
      ;


stand : STAND COLON NUMBER;


surf  : SURF COLON NUMBER;
 


Benefits _- predicates should not be an issue;
		Large tokens handled.

Another mechanism is to use filters. (see examples that come with the
antlr.jar)  You only recognize pieces of the file you are interested in.

Jim





> -----Original Message-----
> From: hawkwall [mailto:hawkwall@yahoo.com]
> Sent: Friday, November 07, 2003 3:09 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Newbie Question about Syntactic Predicates
> 
> Hello,
> 
> I need to match the following data
> 
> NUMBER.OF.SURFACE: 3
> NUMBER.OF.STANDALONE: 5
> 
> Where all I am really concered about is that the surface has a number
> 3, and the standalone has a number 5.  I put the following in my Lexer
> 
> DIGITS : (0..9)+ ;
> 
> DOT : '.' ;
> 
> COLON : ':' ;
> 
> SURFACE : "NUMBER" DOT "OF" DOT "SURFACE" COLON ;
> 
> STANDALONE : "NUMBER" DOT "OF" DOT "STANDALONE" COLON;
> 
> WS	:	(	' '
> 		|	'\t'
> 		|	'\f'
> 		|	(	options {generateAmbigWarnings=false;}
> 			:	"\r\n"  // DOS
> 			|	'\r'    // Macintosh
> 			|	'\n'	// Unix
> 			)
> 			{newline();}
> 		)+
> 
>     // now the overall whitespace action -- skip it!
>     { $setType(Token.SKIP); }
>     ;
> 
> And my Parser looks like:
> 
> start :  rule1 rule2;
> 
> rule1 : SURFACE DIGITS ;
> 
> rule2 : STANDALONE DIGITS ;
> 
> with some actions to print out the number it finds.  If k<12 in the
> lexer, I get a nondeterminism error, and can see the problem in the
> generated Lexer.  But k=12 takes awhile to generate the .java files.
> I can break this up into smaller tokens that are put together in the
> parser like:
> 
> Lexer:
> NUMBER : "NUMBER" ;
> OF : "OF" ;
> DOT : '.' ;
> STANDALONE : "STANDALONE" ;
> SURFACE : "SURFACE" ;
> etc.
> 
> and then in Parser:
> start : rule1
>         rule2
> 
> rule1 : NUMBER DOT OF DOT STANDALONE COLON DIGITS ;
> rule2 : NUMBER DOT OF DOT SURFACE COLON DIGITS ;
> 
> and it works with a smaller k value in the lexer, but it doesn't seem
> like the best option and makes the parser harder to construct.  I have
> read everything I can find about syntatic predicates, and they seem to
> be what I need, but I can't get it work.  I added the following to the
> Lexer from above
> 
> SURFACE_OR_STANDOFF
> 	: 	("NUMBER" DOT "OF" DOT "SURFACE"  ) =>
> 		"NUMBER" DOT "OF" DOT "SURFACE" DOT "TO" DOT "AIR" DOT
> "THREAT" DOT
> "CLASSES" COLON
> 		{$setType(SURFACE); }
> 	|	("NUMBER" DOT "OF" DOT "STANDOFF" DOT "RANGE" DOT "AIRCRAFT"
> DOT
> "CLASSES" COLON ) =>
> 		"NUMBER" DOT "OF" DOT "STANDOFF"
> 		{$setType(STANDOFF);}
> 	;
> 
> What am I missing?  Is there a better way to match large tokens?  I
> can tell that the Parser is backtracking at all.  The error message I
> get is:
> 
> parser exception: line 2:12: expecting 'U', found 'T'
> line 2:12: expecting 'U', found 'T'
> 
> Which says to me the parser is still trying to match the SURFACE
> token.  I tried to define the parser to match SURFACE once and then
> STANDALONE, but my head hurts from all the banging.  Thanks for the
> help.
> 
> Mike Wall
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
> 
> 
> 
> ________________________________________________________________________
> This e-mail has been scanned for viruses by MCI's Internet Managed
> Scanning Services - powered by MessageLabs. For further information visit
> http://www.mci.com
> ________________________________________________________________________

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Fri Nov  7 14:35:05 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Newbie Question about Syntactic Predicates
In-Reply-To: <bogvl0+a8ip@eGroups.com>
Message-ID: <boh6mp+hgbk@eGroups.com>

Mike--

It looks like you are doing a lot in the lexer.  That's okay if your problem is fairly static, but you may trip over that if you end up doing 
more complicated parsing.  What you are still missing in your second solution is left factoring:  "NUMBER.OF." is the common prefix, 
so you can rewrite

SURFACE_OR_STANDOFF
     :
     "NUMBER" DOT "OF" DOT
     (   "SURFACE" other stuff { $setType(SURFACE); }
     |    "STANDOFF" more stuff { $setType(STANDOFF); }
     )
    ;

Do that and you may be able to avoid the large lexer lookahead.  You may be better off using literals, though, and plan to do more in 
the parser.

--Loring

--- In antlr-interest@yahoogroups.com, "hawkwall" <hawkwall@y...> wrote:
> Why is it I can't figure something out until I post to the newsgroup?
> 
> I think I have a solution.  My predicate was wrong on the type
> STANDOFF.  Changing it too:
> 
> SURFACE_OR_STANDOFF
> : ("NUMBER" DOT "OF" DOT "SURFACE" ) =>
> "NUMBER" DOT "OF" DOT "SURFACE" DOT "TO" DOT "AIR" DOT "THREAT" DOT
> "CLASSES" COLON
> {$setType(SURFACE); }
> | ("NUMBER" DOT "OF" DOT "STANDOFF" ) =>
> "NUMBER" DOT "OF" DOT "STANDOFF" DOT "RANGE" DOT "AIRCRAFT" DOT
> "CLASSES" COLON
> {$setType(STANDOFF);}
> ;
> 
> and then making the original SURFACE and STANDOFF protected seems have
>  fixed my problem.  I read that the protected keeps the tokens from
> being sent to the parser, but I still don't quite understand it.  Is
> this the correct way to handle large tokens without a large k value?
> 
> Thanks for your time.
> 
> Mike 
> 
> 
> > Hello,
> > 
> > I need to match the following data
> > 
> > NUMBER.OF.SURFACE: 3
> > NUMBER.OF.STANDALONE: 5
> > 
> > Where all I am really concered about is that the surface has a number
> > 3, and the standalone has a number 5. I put the following in my Lexer
> > 
> > DIGITS : (0..9)+ ;
> > 
> > DOT : '.' ;
> > 
> > COLON : ':' ;
> > 
> > SURFACE : "NUMBER" DOT "OF" DOT "SURFACE" COLON ;
> > 
> > STANDALONE : "NUMBER" DOT "OF" DOT "STANDALONE" COLON;
> > 
> > WS : ( ' '
> > | '\t'
> > | '\f'
> > | ( options {generateAmbigWarnings=false;}
> > : "\r\n" // DOS
> > | '\r' // Macintosh
> > | '\n' // Unix
> > )
> > {newline();}
> > )+
> > 
> > // now the overall whitespace action -- skip it!
> > { $setType(Token.SKIP); }
> > ;
> > 
> > And my Parser looks like:
> > 
> > start : rule1 rule2;
> > 
> > rule1 : SURFACE DIGITS ;
> > 
> > rule2 : STANDALONE DIGITS ;
> > 
> > with some actions to print out the number it finds. If k<12 in the
> > lexer, I get a nondeterminism error, and can see the problem in the
> 
> > [snip]
> 
> > SURFACE_OR_STANDOFF
> > : ("NUMBER" DOT "OF" DOT "SURFACE" ) =>
> > "NUMBER" DOT "OF" DOT "SURFACE" DOT "TO" DOT "AIR" DOT "THREAT" DOT
> > "CLASSES" COLON
> > {$setType(SURFACE); }
> > | ("NUMBER" DOT "OF" DOT "STANDOFF" DOT "RANGE" DOT "AIRCRAFT" DOT
> > "CLASSES" COLON ) =>
> > "NUMBER" DOT "OF" DOT "STANDOFF"
> > {$setType(STANDOFF);}
> > ;
> > 
> > [snip]


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From hawkwall at yahoo.com  Fri Nov  7 19:36:38 2003
From: hawkwall at yahoo.com (hawkwall)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Newbie Question about Syntactic Predicates
Message-ID: <bohoc6+37eh@eGroups.com>

Jim,

You are right about the oversight, I missed that when I copied in the
post.  I will look at the testLiterals option and play with it. 
Thanks for taking the time to make the example, it seems much easier.
I don't want to do more work than I have to.  


Loring,

Thanks for the hint about left factoring the NUMBER.OF.  There are
lots of places I can do that, and it will help.  You also mentioned
testLiterals, so I will dig more.  From you comment about doing more 
work in the parser, I appreciate your advice.


Thank you both for your answers.  At some point, I plan to add actions
and use Hibernate to populate a database from the parse. I was
thinking it would be cleaner if more of the parsing work was done in
the lexer, because I assume the actions will be fairly complex.  I
have used the perl module Parse::RecDescent in the past to parse files
and build comma seperated text files that were then loaded into the
database.  I spent way to much time debugging the column names and
making sure things were in the right order.  I wish I could say I
understood the internals of P:RD, but in actuality, I just tinkered
until I got an acceptable result.  Already, I have better
understanding of what antlr is doing, the generated code is much
easier to read.  I hope this approach with antlr and hibernate will
work better.  I was kinda shocked to not see regular expressions in
antlr, but I don't think I will miss them. Would an AST serve me
better to populate the database?  I will need to get a better
understanding of AST's if so.  Again, I am grateful for the help.

Mike




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From joshua.davis at kiodex.com  Fri Nov  7 23:10:44 2003
From: joshua.davis at kiodex.com (Joshua Davis)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: SQL grammar tree construction problem
In-Reply-To: <bogjq4+upit@eGroups.com>
Message-ID: <boi4tk+cg2h@eGroups.com>

My example is even simpler.  It's *supposed* to generate a node for 
every rule if the buildAST is set to true isn't it?  I was under the 
impression that explicitly creating nodes is not necessary if 
buildAST is enabled.

--- In antlr-interest@yahoogroups.com, Gustav Bostr?m <i93gusbo@h...> 
wrote:
> Hi!
> 
> Thanks for the help!
> 
> I think I'm trying the same thing as you, but also without luck.
> I try to do:
> sql_stmt : 
> 	  sql_data_stmt  { #sql_stmt = #([SQL_STMT,"sql_stmt"], 
> #sql_stmt); }
> 
> , but I never find this node in the tree. The code seems to be 
> generated, but has no effect. Could it be that no root node is ever 
> created?
> 
> I also tried this:
> sql_script : 
> 	 (sql_stmt)? { #sql_script = #
> ([Token.MIN_USER_TYPE,"sql_script"], #sql_script); } ( SEMICOLON 
> (sql_stmt)? )*
> 
> "sql_script" is the first rule and now a node is in fact created, 
but 
> it has no children. I thought that all the subsequent nodes would 
be 
> added as children automatically.
> 
> Qoute from doc:
> "Setting the return tree is very useful in combination with normal 
> tree construction because you can have ANTLR do all the work of 
> building a tree and then add an imaginary root node such as: 
>   
> decl : ( TYPE ID )+
>        { #decl = #([DECL,"decl"], #decl); }
>      ;
> ANTLR allows you to assign to #rule anywhere within an alternative 
of 
> the rule. ANTLR ensures that references of and assignments to #rule 
> within an action force the parser's internal AST construction 
> variables into a stable state. After you assign to #rule, the state 
> of the parser's automatic AST construction variables will be set as 
> if ANTLR had generated the tree rooted at #rule. For example, any 
> children nodes added after the action will be added to the children 
> of #rule." 
>  
> This is exactly what I want, but I must be doing something wrong.
> 
> 
> 
> /Gustav
> 
> 
> 
> --- In antlr-interest@yahoogroups.com, "Joshua Davis" 
> <joshua.davis@k...> wrote:
> > ANTLR newbie question:
> > 
> > I've been having a similar problem I think.  I made a very simple 
> > grammar based on L. V.'s grammar.   It seems to be always 
producing 
> > only one root node, with no children.  What steps should I take 
to 
> > debug this?  I have tried adding actions to the rules, and it 
looks 
> > like the rules are being triggered correctly, but no AST is 
> produced.
> > 
> > --- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> 
wrote:
> > > Gustav--
> > > 
> > > You cannot make a rule a root--that's what ANTLR is complaining 
> > about. 
> > >  Rules may represent subtrees, so only nodes with token ids 
(TEXT 
> > or 
> > > STRING, for example) can be followed with ^.
> > > 
> > > --Loring
> > > 
> > > 
> > > --- In antlr-interest@yahoogroups.com, Gustav Bostr?m 
> > <i93gusbo@h...> 
> > > wrote:
> > > > Hello!
> > > > 
> > > > I'm trying to use Lubos Vnuk's (Thanks for doing all the 
work!) 
> > SQL-
> > > > grammar in order to do some 
> > > > processing on SQL-statments. I would for example like to find 
> out 
> > > > which columns are affected by a DML-statement and which 
> > parameters 
> > > > correspond to which columns.
> > > > 
> > > > I'm doing this is in Java , so I've changed the grammar 
> slightly.
> > > > I've removed the C++ actions or replaced them with Java 
> versions.
> > > > 
> > > > My thought was to add AST-construction and then navigate the 
> tree 
> > to 
> > > > find out the stuff I need. This is where I run into problems.
> > > > I tried to annotate the rules with ^ to construct my tree, 
but 
> it 
> > > > keeps giving me "unexpected token:^" when I try to dothis for 
> > > example:
> > > > sql_stmt : 
> > > > 	  sql_data_stmt^ 
> > > > ;
> > > > 
> > > > I've set the options to buildAST=true;
> > > > I'm using version 2.7.2.
> > > > 
> > > > Any ideas on what can be wrong?
> > > > 
> > > > Cheers,
> > > > 
> > > > Gustav Bostr?m


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Sat Nov  8 00:32:03 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Newbie Question about Syntactic Predicates
In-Reply-To: <bohoc6+37eh@eGroups.com>
Message-ID: <boi9m3+hv2u@eGroups.com>

Mike--

Ah--perl is a useful tool, but it can warp the mind.  Good ANTLR 
development practice is that

Lexers are for separating input into tokens; while parsing can be 
done in the lexer, it is usually not good practice.

Parsers are for recognizing token sequences and tree construction.

Tree rewrites are for reorganizing token sequences into a regular 
form suitable for output.  The final treewalk passes are for output.

For a "simple" translation of the sort you describe (no complex 
optimization passes), you should be able to avoid complex action 
code.  It's all a matter of restructuring ...

--Loring


--- In antlr-interest@yahoogroups.com, "hawkwall" <hawkwall@y...> 
wrote:
> Jim,
> 
> You are right about the oversight, I missed that when I copied in 
the
> post.  I will look at the testLiterals option and play with it. 
> Thanks for taking the time to make the example, it seems much 
easier.
> I don't want to do more work than I have to.  
> 
> 
> Loring,
> 
> Thanks for the hint about left factoring the NUMBER.OF.  There are
> lots of places I can do that, and it will help.  You also mentioned
> testLiterals, so I will dig more.  From you comment about doing 
more 
> work in the parser, I appreciate your advice.
> 
> 
> Thank you both for your answers.  At some point, I plan to add 
actions
> and use Hibernate to populate a database from the parse. I was
> thinking it would be cleaner if more of the parsing work was done 
in
> the lexer, because I assume the actions will be fairly complex.  I
> have used the perl module Parse::RecDescent in the past to parse 
files
> and build comma seperated text files that were then loaded into the
> database.  I spent way to much time debugging the column names and
> making sure things were in the right order.  I wish I could say I
> understood the internals of P:RD, but in actuality, I just tinkered
> until I got an acceptable result.  Already, I have better
> understanding of what antlr is doing, the generated code is much
> easier to read.  I hope this approach with antlr and hibernate will
> work better.  I was kinda shocked to not see regular expressions in
> antlr, but I don't think I will miss them. Would an AST serve me
> better to populate the database?  I will need to get a better
> understanding of AST's if so.  Again, I am grateful for the help.
> 
> Mike


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From johnm-antlr at non.net  Sat Nov  8 09:36:28 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <bogq4r+2q8f@eGroups.com>
References: <3FAB62F3.2040302@zeigermann.de>
	<bogq4r+2q8f@eGroups.com>
Message-ID: <16301.10652.510905.815691@despot.non.net>

>>>>> "lgcraymer" == lgcraymer  <lgc@mail1.jpl.nasa.gov> writes:
[...Analysis lookahead vs. programmer lookahead vs. runtime lookahead...]

IMU, the biggest reason that the specification knob exists for setting k
equal to some number in Antlr is to help the Antlr analysis phase run
faster.  I.e., if you know that you only need k=2 then you can specify that
and antlr will run faster during it's analysis of the grammar.  Antlr,
modulo bugs, will generate exactly the same code for that grammar even if
you specify k=20 -- but antlr itself will take a lot longer to run.

I'm on the fence as to whether or not allowing the grammar developer to
explicitly specify the lookahead depth for e.g., a single rule is worth the
risks.  My gut says that it's just like the attempts to be able to
programmatically specify optimization rules -- all to often the programmer
is Just Plain Wrong(tm) (especially when you take into account code
modification by multiple developers over time).


> Also, as to actions in lookahead code: this is something that Ter
> supported in PCCTS under the name "guarded predicates" or some such.  I
> don't know that it saw much use, and I suspect that usage indicates a too
> early incorporation of semantic information into the translator--tree
> transformation helps avoid that.

Indeed.

The metaphor that I'm using is that of "successive refinement".  That is,
each phase refines the understanding of the input to greater levels of
precision.  As with any form of optimization, premature optimization is, as
the man says, the root of all evil in computer science.

Take care,
	John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Sat Nov  8 13:35:49 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <bogq4r+2q8f@eGroups.com>
References: <bogq4r+2q8f@eGroups.com>
Message-ID: <3FAD61B5.10203@zeigermann.de>

Hi Loring!

lgcraymer wrote:
> ANTLR is actually quite a bit smarter about lookahead--k is maximum lookahead, and ANTLR generates minimum lookahead.  If you 
> set k=20 but don't need more than k=2, then 2 is the maximum lookahead in the generated code.  I think that Sriram put local 
> lookahead into JavaCC as a workaround--it does add a step to grammar debugging that is not necessary for ANTLR.

Hmmm. Is this true? Definitly not when using greedy blocks... Have a 
look at this simple grammar

top : TOKEN0 (sub | top )* TOKEN3 ;

sub : TOKEN1
         ( options {greedy=false;} : . )*
         TOKEN2
     ;

k=1 is needed and works ok. Try using k=10 and: Ooops!

> Also, as to actions in lookahead code:  this is something that Ter supported in PCCTS under the name "guarded predicates" or some 
> such.  I don't know that it saw much use, and I suspect that usage indicates a too early incorporation of semantic information into the 
> translator--tree transformation helps avoid that.

1.) You might really increase the set of parseable languages using this 
technique
2.) Sometimes using tree transformation is too expensive

> LLK is interesting, but it is a synthesis of implementation approaches from a number of sources (ANTLR, JavaCC, flex) and not an 
> extension to the state of the art.  I think that's why Leung describes it as an ANTLR 2.7.2 derivative despite what seems to be the 
> complete absence of any ANTLR 2.7.2 source code in the distribution.  It is also a work in progress.

Who knows ;) In any case it brings a bit life into discussion :)

Oliver



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From hawkwall at yahoo.com  Sat Nov  8 19:01:33 2003
From: hawkwall at yahoo.com (hawkwall)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] how to force unexpected token error
Message-ID: <bokamd+ij10@eGroups.com>

I am still missing something.  The following runs as I expect, and the
action is executed.

Input:
THREAT.CLASSES.110
NUMBER.OF.SURFACE.TO.AIR.THREAT.CLASSES:  3
end of Input:

Parser:
startSACLASS : (rules)+ ;

rules : threatclass 
        | sathreatclass
        ;
	
threatclass: THREAT_CLASSES ONETEN;
			
sathreatclass: SURFACE_TO_AIR COLON  NUMBER
	{System.out.println("Got Here");}
	;
end of Parser:


Lexer:
options {
	k=5; // character lookahead
	testLiterals=false;
}


tokens
{
	THREAT_CLASSES="THREAT.CLASSES.";
	SURFACE_TO_AIR="NUMBER.OF.SURFACE.TO.AIR.THREAT.CLASSES";
}



IDENTIFIER options { testLiterals=true;} : (LETTER | '.')+;
NUMBER : (DIGIT)+;

DOT : '.' ;
COLON : ':';
ONETEN : ("110") => "110" ; //predicate is an attempt to remove
nondetermism with NUMBER, but didn't work
private DIGIT : ('0'..'9') ;
private LETTER : ('A'..'Z');


WS	:	(	' '
		|	'\t'
		|	'\f' 
		|	(	options {generateAmbigWarnings=false;}
			:	"\r\n"  // DOS
			|	'\r'    // Macintosh
			|	'\n'	// Unix
			)
			{newline();}
		)+

    // now the overall whitespace action -- skip it!
    { $setType(Token.SKIP); }
    ;

end of Lexer:

I need the parser to catch it if the input is mispelled.  
The parser complains if I change the first line to 
THREAT.CASSES.110 or THREAT.CLASSES.112

It doesn't fail when I correct the first line and change the second
line to something like
NUMBER.OF.USRFACE.TO.AIR.THREAT.CLASSES: 3

I turned on the trace, and with the incorrect input on the second
line, it matches IDENTIFIER and 
then finished normally.  The action is never executed.  What is the
difference?  Why is unexpected token given 
in the first case but not the other.  I tried setting
defaultErrorHandler=false, but it didn't fix my problem.  I tried
putting EOF at the end of my start rule, but to no avail.  I tried to
factor
out the THREAT.CLASSES from the end of SURFACE_TO_AIR, also removing
the final dot from the THREAT_CLASSES token.
I changed the threatclass rule to :
THREAT_CLASSES DOT ONETEN
and then got a
line 1:1: unexpected token: THREAT.CLASSES.
error.  

I see why it is happening in the parser.  Here is the relevent java:
public final void startSACLASS() throws RecognitionException,
TokenStreamException {
		
		try {      // for error handling
			{
			int _cnt1421=0;
			_loop1421:
			do {
				if ((LA(1)==THREAT_CLASSES||LA(1)==SURFACE_TO_AIR)) {
					rules();
				}
				else {
					if ( _cnt1421>=1 ) { break _loop1421; } else {throw new
NoViableAltException(LT(1), getFilename());}
				}
				
				_cnt1421++;
			} while (true);
			}
		}
		catch (RecognitionException ex) {
			reportError(ex);
			consume();
			consumeUntil(_tokenSet_0);
		}
	}

	
The problem is the if ( _cnt1421>=1).  If I remove that and make the
code look like this:
				if ((LA(1)==THREAT_CLASSES||LA(1)==SURFACE_TO_AIR)) {
					rules();
				}
				else {
					throw new NoViableAltException(LT(1), getFilename());
				}

I get the expected result.  Is this correct, and if so, how do I do
this in the grammar file.
I took a look at the antlr source, and I think this is done in
JavaCodeGenerator.java, but I 
got lost pretty quick.

Thanks for your time, sorry for such a long post.

Mike Wall
   


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From leung13512c at yahoo.com  Sat Nov  8 22:36:15 2003
From: leung13512c at yahoo.com (leung13512c)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Anyone tried this ANTLR-inspired CC?
In-Reply-To: <B4A5C6F0-0F12-11D8-AE6D-000A95891192@cs.usfca.edu>
Message-ID: <bokn8v+fati@eGroups.com>

Hi, this is Chris Leung, author of LLK. I am just one of
many to write open source software to kill time (somebody may
mistaken that as xxx ms).

Thanks for all the interest in LLK.  LLK is started as I explore
several design alternatives while I study ANTLR. It turns out
to have some worthwhile features and improvements.  So I released
the code and hope that would be useful for others.  I would be
most glad if anything in LLK would be useful for ANTLR.

To be honest, I am no expert in this field. LLK is started as a hack
of ANTLR. The basic algorithm is same as ANTLR.  But as more and more
feature and implementation differences comes in, it is almost
a complete rewrite. Most of the differences from ANTLR are explained
in the LLK documentation at llk.sourceforge.net.

I ran some preliminary test (with GnuCParser) and found that it (LLK
v0.1) is about 4-5 times faster than ANTLR 2.7.2 (in Java). But I 
have not dig too deep into it yet. I would certainly be glad to 
discuss any specific issues about LLK.

Thanks,
Chris.

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> 
> On Tuesday, November 4, 2003, at 01:26 PM, Oliver Zeigermann wrote:
> 
> > Had a quick look at it and found it interesting too. It takes up the
> > idea that certain semantic actions should be executed while guessing.
> >
> > The code does not seem to be copied at all, but at most inspired by
> > ANTLR. Terence, has this guy never contacted you?
> 
> Nope....it took me a while, but I found what I think is an email 
> address; no name.  I emailed him last night and quickly looked at the 
> source code.  I too verified that he had not just copied the source 
> except for some smaller files.
> 
> >  Maybe it could be
> > interesting to share ideas or experience. I invited him to present his
> > ideas here on the mailing list. Let's see if he does...
> 
> Great! :)  Let's see if he likes the LL-regular.  I wonder who he is.  
> The code showed a nontrivial understanding of the area.
> 
> Ter
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Sat Nov  8 22:44:29 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <3FAD61B5.10203@zeigermann.de>
Message-ID: <boknod+cjne@eGroups.com>

--- In antlr-interest@yahoogroups.com, Oliver Zeigermann 
<oliver@z...> wrote:
> Hi Loring!
> 
> lgcraymer wrote:
> > ANTLR is actually quite a bit smarter about lookahead--k is 
maximum lookahead, and ANTLR generates minimum lookahead.  If you 
> > set k=20 but don't need more than k=2, then 2 is the maximum 
lookahead in the generated code.  I think that Sriram put local 
> > lookahead into JavaCC as a workaround--it does add a step to 
grammar debugging that is not necessary for ANTLR.
> 
> Hmmm. Is this true? Definitly not when using greedy blocks... Have 
a 
> look at this simple grammar
> 
> top : TOKEN0 (sub | top )* TOKEN3 ;
> 
> sub : TOKEN1
>          ( options {greedy=false;} : . )*
>          TOKEN2
>      ;
> 
> k=1 is needed and works ok. Try using k=10 and: Ooops!

Oliver--

I have to say that the greedy option is a hack, originally intended 
for use in the lexer.  Also, loop analysis is flawed in the current 
ANTLR--exit predicates don't work on * loops. I'm not surprised that 
this example fails.

> > Also, as to actions in lookahead code:  this is something that 
Ter supported in PCCTS under the name "guarded predicates" or some 
> > such.  I don't know that it saw much use, and I suspect that 
usage indicates a too early incorporation of semantic information 
into the 
> > translator--tree transformation helps avoid that.
> 
> 1.) You might really increase the set of parseable languages using 
this 
> technique

Possible, but I don't really see how.  You would have to have 
extreme interdependency between semantics and syntax at the very 
least.

> 2.) Sometimes using tree transformation is too expensive

Sometimes it is overkill (unnecessary development), but too 
expensive?  I doubt it, especially for languages where lexing and 
parsing are complex.  [BTW, my experience is that unsubstantiated 
performance arguments are usually bogus and made in an attempt to 
subjectively win an argument that cannot be won on the basis of 
objective evidence.]

> > LLK is interesting, but it is a synthesis of implementation 
approaches from a number of sources (ANTLR, JavaCC, flex) and not an 
> > extension to the state of the art.  I think that's why Leung 
describes it as an ANTLR 2.7.2 derivative despite what seems to be 
the 
> > complete absence of any ANTLR 2.7.2 source code in the 
distribution.  It is also a work in progress.
> 
> Who knows ;) In any case it brings a bit life into discussion :)

It would be nice if Leung showed up on this list.  I disagee with 
his choice of syntax, but it would be interesting why he felt 
strongly enough about it to do the implementation.

--Loring

> Oliver


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From leung13512c at yahoo.com  Sat Nov  8 22:46:23 2003
From: leung13512c at yahoo.com (leung13512c)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <3FAD61B5.10203@zeigermann.de>
Message-ID: <boknrv+v3jn@eGroups.com>

My view about the local lookahead depth is that it is safer to
use than fixed/syntax lookahead which given the alternative priority
over other alternatives while warning would be issued if the 
local lookahead depth is not sufficient.  Anything that
can be done by changing the local lookahead depth can be done
by adding simple fixed lookahead like %LOOKAHEAD(2) to some of
the alternatives.

Chris.
--- In antlr-interest@yahoogroups.com, Oliver Zeigermann <oliver@z...>
wrote:
> Hi Loring!
> 
> lgcraymer wrote:
> > ANTLR is actually quite a bit smarter about lookahead--k is
maximum lookahead, and ANTLR generates minimum lookahead.  If you 
> > set k=20 but don't need more than k=2, then 2 is the maximum
lookahead in the generated code.  I think that Sriram put local 
> > lookahead into JavaCC as a workaround--it does add a step to
grammar debugging that is not necessary for ANTLR.
> 
> Hmmm. Is this true? Definitly not when using greedy blocks... Have a 
> look at this simple grammar
> 
> top : TOKEN0 (sub | top )* TOKEN3 ;
> 
> sub : TOKEN1
>          ( options {greedy=false;} : . )*
>          TOKEN2
>      ;
> 
> k=1 is needed and works ok. Try using k=10 and: Ooops!
> 
> > Also, as to actions in lookahead code:  this is something that Ter
supported in PCCTS under the name "guarded predicates" or some 
> > such.  I don't know that it saw much use, and I suspect that usage
indicates a too early incorporation of semantic information into the 
> > translator--tree transformation helps avoid that.
> 
> 1.) You might really increase the set of parseable languages using this 
> technique
> 2.) Sometimes using tree transformation is too expensive
> 
> > LLK is interesting, but it is a synthesis of implementation
approaches from a number of sources (ANTLR, JavaCC, flex) and not an 
> > extension to the state of the art.  I think that's why Leung
describes it as an ANTLR 2.7.2 derivative despite what seems to be the 
> > complete absence of any ANTLR 2.7.2 source code in the
distribution.  It is also a work in progress.
> 
> Who knows ;) In any case it brings a bit life into discussion :)
> 
> Oliver


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Sun Nov  9 02:17:41 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Anyone tried this ANTLR-inspired CC?
In-Reply-To: <bokn8v+fati@eGroups.com>
Message-ID: <bol485+tn0n@eGroups.com>

Chris--

Welcome!  The performance differential is not a surprise--that's 
sort of an artifact of ANTLR 2's history.  Ter was too busy with 
jGuru to do much polishing.  That should change with ANTLR 3, which 
will be a major upgrade, both in terms of features and 
implementation.

I've looked over the LLK source, and can see that you have 
incorporated design features from several other language translation 
tools.  I'm curious:  why did you choose the LLK syntax?  It is not 
what I would have chosen.

--Loring


--- In antlr-interest@yahoogroups.com, "leung13512c" 
<leung13512c@y...> wrote:
> Hi, this is Chris Leung, author of LLK. I am just one of
> many to write open source software to kill time (somebody may
> mistaken that as xxx ms).
> 
> Thanks for all the interest in LLK.  LLK is started as I explore
> several design alternatives while I study ANTLR. It turns out
> to have some worthwhile features and improvements.  So I released
> the code and hope that would be useful for others.  I would be
> most glad if anything in LLK would be useful for ANTLR.
> 
> To be honest, I am no expert in this field. LLK is started as a 
hack
> of ANTLR. The basic algorithm is same as ANTLR.  But as more and 
more
> feature and implementation differences comes in, it is almost
> a complete rewrite. Most of the differences from ANTLR are 
explained
> in the LLK documentation at llk.sourceforge.net.
> 
> I ran some preliminary test (with GnuCParser) and found that it 
(LLK
> v0.1) is about 4-5 times faster than ANTLR 2.7.2 (in Java). But I 
> have not dig too deep into it yet. I would certainly be glad to 
> discuss any specific issues about LLK.
> 
> Thanks,
> Chris.
> 
> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
wrote:
> > 
> > On Tuesday, November 4, 2003, at 01:26 PM, Oliver Zeigermann 
wrote:
> > 
> > > Had a quick look at it and found it interesting too. It takes 
up the
> > > idea that certain semantic actions should be executed while 
guessing.
> > >
> > > The code does not seem to be copied at all, but at most 
inspired by
> > > ANTLR. Terence, has this guy never contacted you?
> > 
> > Nope....it took me a while, but I found what I think is an email 
> > address; no name.  I emailed him last night and quickly looked 
at the 
> > source code.  I too verified that he had not just copied the 
source 
> > except for some smaller files.
> > 
> > >  Maybe it could be
> > > interesting to share ideas or experience. I invited him to 
present his
> > > ideas here on the mailing list. Let's see if he does...
> > 
> > Great! :)  Let's see if he likes the LL-regular.  I wonder who 
he is.  
> > The code showed a nontrivial understanding of the area.
> > 
> > Ter
> > --
> > Professor Comp. Sci., University of San Francisco
> > Creator, ANTLR Parser Generator, http://www.antlr.org
> > Co-founder, http://www.jguru.com
> > Co-founder, http://www.knowspam.net enjoy email again!
> > Co-founder, http://www.peerscope.com pure link sharing


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From johnm-antlr at non.net  Sun Nov  9 09:30:43 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <3FAD61B5.10203@zeigermann.de>
References: <bogq4r+2q8f@eGroups.com>
	<3FAD61B5.10203@zeigermann.de>
Message-ID: <16302.31171.311248.552572@despot.non.net>

>>>>> "Oliver" == Oliver Zeigermann <oliver@zeigermann.de> writes:
>>>>>> lgcraymer wrote:
[...]

>> Also, as to actions in lookahead code: this is something that Ter
>> supported in PCCTS under the name "guarded predicates" or some such.  I
>> don't know that it saw much use, and I suspect that usage indicates a
>> too early incorporation of semantic information into the
>> translator--tree transformation helps avoid that.

> 1.) You might really increase the set of parseable languages using this
> technique

>>From a theoretical standpoint? Nope, I can't see how you've increased the
power at all.

>>From a "what's easiest/most-efficient to do with tool/framework/etc. XYZ"?
Okay.


> 2.) Sometimes using tree transformation is too expensive

No personal offense intended but... Many people keep saying things like
that and I really don't believe that they understand the problem that they
are nominally trying to solve (let alone understanding the actual problem
that may need to be solved).

For example, if very high speed is so important then what the hell are you
doing using any "language" that needs such complexity to lex, parse,
understand, and act upon to solve the problem?  I.e., why aren't you using
a purpose specific, fixed, highly normalized language that's extremely easy
to robustly deal with rapidly?

[And before y'all jump in and just start walloping me with specific
experiences showing my insanity, please do keep in mind that I've worked on
language projects from 8-bit, hard-real-time systems upto wacky natural
language processing systems.]

Have fun,
	John "Lingua Idiota" Mitchell


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From leung13512c at yahoo.com  Sun Nov  9 17:37:54 2003
From: leung13512c at yahoo.com (leung13512c)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Anyone tried this ANTLR-inspired CC?
In-Reply-To: <bol485+tn0n@eGroups.com>
Message-ID: <bomq5i+sr3q@eGroups.com>

The thing that caused me to switch away from ANTLR syntax
is because I prefer the tree building syntax of JJTree that always
create imaginary nodes instead of a mix of both.  And it mostly
avoid having to create nodes within actions.

Most other things are just a matter of personal taste.

Chris.

--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> Chris--
> 
> Welcome!  The performance differential is not a surprise--that's 
> sort of an artifact of ANTLR 2's history.  Ter was too busy with 
> jGuru to do much polishing.  That should change with ANTLR 3, which 
> will be a major upgrade, both in terms of features and 
> implementation.
> 
> I've looked over the LLK source, and can see that you have 
> incorporated design features from several other language translation 
> tools.  I'm curious:  why did you choose the LLK syntax?  It is not 
> what I would have chosen.
> 
> --Loring
> 
> 
> --- In antlr-interest@yahoogroups.com, "leung13512c" 
> <leung13512c@y...> wrote:
> > Hi, this is Chris Leung, author of LLK. I am just one of
> > many to write open source software to kill time (somebody may
> > mistaken that as xxx ms).
> > 
> > Thanks for all the interest in LLK.  LLK is started as I explore
> > several design alternatives while I study ANTLR. It turns out
> > to have some worthwhile features and improvements.  So I released
> > the code and hope that would be useful for others.  I would be
> > most glad if anything in LLK would be useful for ANTLR.
> > 
> > To be honest, I am no expert in this field. LLK is started as a 
> hack
> > of ANTLR. The basic algorithm is same as ANTLR.  But as more and 
> more
> > feature and implementation differences comes in, it is almost
> > a complete rewrite. Most of the differences from ANTLR are 
> explained
> > in the LLK documentation at llk.sourceforge.net.
> > 
> > I ran some preliminary test (with GnuCParser) and found that it 
> (LLK
> > v0.1) is about 4-5 times faster than ANTLR 2.7.2 (in Java). But I 
> > have not dig too deep into it yet. I would certainly be glad to 
> > discuss any specific issues about LLK.
> > 
> > Thanks,
> > Chris.
> > 
> > --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
> wrote:
> > > 
> > > On Tuesday, November 4, 2003, at 01:26 PM, Oliver Zeigermann 
> wrote:
> > > 
> > > > Had a quick look at it and found it interesting too. It takes 
> up the
> > > > idea that certain semantic actions should be executed while 
> guessing.
> > > >
> > > > The code does not seem to be copied at all, but at most 
> inspired by
> > > > ANTLR. Terence, has this guy never contacted you?
> > > 
> > > Nope....it took me a while, but I found what I think is an email 
> > > address; no name.  I emailed him last night and quickly looked 
> at the 
> > > source code.  I too verified that he had not just copied the 
> source 
> > > except for some smaller files.
> > > 
> > > >  Maybe it could be
> > > > interesting to share ideas or experience. I invited him to 
> present his
> > > > ideas here on the mailing list. Let's see if he does...
> > > 
> > > Great! :)  Let's see if he likes the LL-regular.  I wonder who 
> he is.  
> > > The code showed a nontrivial understanding of the area.
> > > 
> > > Ter
> > > --
> > > Professor Comp. Sci., University of San Francisco
> > > Creator, ANTLR Parser Generator, http://www.antlr.org
> > > Co-founder, http://www.jguru.com
> > > Co-founder, http://www.knowspam.net enjoy email again!
> > > Co-founder, http://www.peerscope.com pure link sharing


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Sun Nov  9 21:40:21 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <boknod+cjne@eGroups.com>
References: <boknod+cjne@eGroups.com>
Message-ID: <3FAF24C5.6000603@zeigermann.de>

lgcraymer wrote:
>>>Also, as to actions in lookahead code:  this is something that 
> 
> Ter supported in PCCTS under the name "guarded predicates" or some 
> 
>>>such.  I don't know that it saw much use, and I suspect that 
> 
> usage indicates a too early incorporation of semantic information 
> into the 
> 
>>>translator--tree transformation helps avoid that.
>>
>>1.) You might really increase the set of parseable languages using 
> 
> this 
> 
>>technique
> 
> 
> Possible, but I don't really see how.  You would have to have 
> extreme interdependency between semantics and syntax at the very 
> least.

I had an example that was much more of theoretical interest (I do not 
recall right now, but could look it up). On the more practical side same 
grammars might look nicer if you had such a feature.

Admitted, this is not a really practical example, but consider the 
following grammar:

{
     int cnt = 0;
}

LANGUAGE
     : ( SHORTWORD ) => SHORTWORD { System.out.println("SHORT"); }
     | LONGWORD { System.out.println("LONG"); }
     ;

protected SHORTWORD : { cnt = 0; } ( {cnt < 1000}? '*' { cnt++; } )+ '#' ;
protected LONGWORD : { cnt = 0; } ( {cnt < 10000}? '*' { cnt++; } )+ '#' ;

It describes a language with two words:
1.) SHORTWORD: exactly 1000 '*' followed by a single '#'
2.) LONGWORD: exactly 10000 '*' followed by a single '#'

While the are certainly other grammars that describe this language, this 
one seems to be the most natural, but does not work, because semantic 
predicates (like {cnt < 1000}?) rely on semantic actions ({ cnt++; }, { 
cnt = 0; }).

> 
>>2.) Sometimes using tree transformation is too expensive
> 
> 
> Sometimes it is overkill (unnecessary development), but too 
> expensive?  I doubt it, especially for languages where lexing and 
> parsing are complex.  [BTW, my experience is that unsubstantiated 
> performance arguments are usually bogus and made in an attempt to 
> subjectively win an argument that cannot be won on the basis of 
> objective evidence.]

I have the same experience. But consider extremely large amounts of 
input to be parsed. In this case it is prohibitve to generate an AST 
because of the memory issue. As a very practical exmaple I have parsing 
of the AMM (Aircraft Maintenance Manual) which is available in SGML 
(very hard to parse, really). I parsed this a few years using ANTLR, but 
its size normally is around 100MB. A few years ago my machine had 128MB 
of RAM! You see what I mean?

Oliver



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Sun Nov  9 21:48:44 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <16302.31171.311248.552572@despot.non.net>
References: <bogq4r+2q8f@eGroups.com>	<3FAD61B5.10203@zeigermann.de> <16302.31171.311248.552572@despot.non.net>
Message-ID: <3FAF26BC.5000700@zeigermann.de>

John D. Mitchell wrote:

>>>>>>"Oliver" == Oliver Zeigermann <oliver@zeigermann.de> writes:
>>>>>>
>>>>>>>lgcraymer wrote:
> 
> [...]
> 
> 
>>>Also, as to actions in lookahead code: this is something that Ter
>>>supported in PCCTS under the name "guarded predicates" or some such.  I
>>>don't know that it saw much use, and I suspect that usage indicates a
>>>too early incorporation of semantic information into the
>>>translator--tree transformation helps avoid that.
> 
> 
>>1.) You might really increase the set of parseable languages using this
>>technique
> 
> 
>>>From a theoretical standpoint? Nope, I can't see how you've increased the
> power at all.
> 
>>>From a "what's easiest/most-efficient to do with tool/framework/etc. XYZ"?
> Okay.

I have to admit I really do not recall my example of a language that can 
not be parsed without it, but can with it. Maybe I am mistaken, but have 
to think about it and will deliver it as soon as I have got it :)

But have a look at what I posted in reply to Loring.

> 
> 
>>2.) Sometimes using tree transformation is too expensive
> 
> 
> No personal offense intended but... Many people keep saying things like
> that and I really don't believe that they understand the problem that they
> are nominally trying to solve (let alone understanding the actual problem
> that may need to be solved).

Not offending in any way :)

> For example, if very high speed is so important then what the hell are you
> doing using any "language" that needs such complexity to lex, parse,
> understand, and act upon to solve the problem?  I.e., why aren't you using
> a purpose specific, fixed, highly normalized language that's extremely easy
> to robustly deal with rapidly?

Again, have a look at the example I posted to Loring.

Oliver



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Sun Nov  9 22:13:34 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <3FAF24C5.6000603@zeigermann.de>
Message-ID: <bonaae+1fd6@eGroups.com>

--- In antlr-interest@yahoogroups.com, Oliver Zeigermann 
<oliver@z...> wrote:
> Admitted, this is not a really practical example, but consider the 
> following grammar:
> 
> {
>      int cnt = 0;
> }
> 
> LANGUAGE
>      : ( SHORTWORD ) => SHORTWORD { System.out.println("SHORT"); }
>      | LONGWORD { System.out.println("LONG"); }
>      ;
> 
> protected SHORTWORD : { cnt = 0; } ( {cnt < 1000}? '*' { cnt++; } )
+ '#' ;
> protected LONGWORD : { cnt = 0; } ( {cnt < 10000}? '*' { cnt++; } )
+ '#' ;
> 
> It describes a language with two words:
> 1.) SHORTWORD: exactly 1000 '*' followed by a single '#'
> 2.) LONGWORD: exactly 10000 '*' followed by a single '#'

Personally, I prefer:

STAR_WORD
{ int count = 0; }
    :
    ( '*' { count++; } )+ '#'
    { if (count == 1000)
          $setType(SHORTWORD);
      else if (count == 10000)
          $setType(LONGWORD);
    }
}
    ;

and I'd be happier if the setType were not in an action but directly 
supported by ANTLR syntax.


> While the are certainly other grammars that describe this 
language, this 
> one seems to be the most natural, but does not work, because 
semantic 
> predicates (like {cnt < 1000}?) rely on semantic actions ({ 
cnt++; }, { 
> cnt = 0; }).
> 
> > 
> >>2.) Sometimes using tree transformation is too expensive
> > 
> > 
> > Sometimes it is overkill (unnecessary development), but too 
> > expensive?  I doubt it, especially for languages where lexing 
and 
> > parsing are complex.  [BTW, my experience is that 
unsubstantiated 
> > performance arguments are usually bogus and made in an attempt 
to 
> > subjectively win an argument that cannot be won on the basis of 
> > objective evidence.]
> 
> I have the same experience. But consider extremely large amounts 
of 
> input to be parsed. In this case it is prohibitve to generate an 
AST 
> because of the memory issue. As a very practical exmaple I have 
parsing 
> of the AMM (Aircraft Maintenance Manual) which is available in 
SGML 
> (very hard to parse, really). I parsed this a few years using 
ANTLR, but 
> its size normally is around 100MB. A few years ago my machine had 
128MB 
> of RAM! You see what I mean?

And how much disk space did you have?  On a UNIX box, mmap() is a 
good way of automating file I/O, but even on systems without virtual 
memory, you can fake it. Performance is not an issue--with a problem 
of this size, nothing stays in the processor cache, and the overhead 
of the disk writes will be only a few percent.

--Loring


> Oliver


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Sun Nov  9 23:22:53 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <bonaae+1fd6@eGroups.com>
Message-ID: <bonecd+le32@eGroups.com>

--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> > >>2.) Sometimes using tree transformation is too expensive
> > > 
> > > 
> > > Sometimes it is overkill (unnecessary development), but too 
> > > expensive?  I doubt it, especially for languages where lexing 
> and 
> > > parsing are complex.  [BTW, my experience is that 
> unsubstantiated 
> > > performance arguments are usually bogus and made in an attempt 
> to 
> > > subjectively win an argument that cannot be won on the basis of 
> > > objective evidence.]
> > 
> > I have the same experience. But consider extremely large amounts 
> of 
> > input to be parsed. In this case it is prohibitve to generate an 
> AST 
> > because of the memory issue. As a very practical exmaple I have 
> parsing 
> > of the AMM (Aircraft Maintenance Manual) which is available in 
> SGML 
> > (very hard to parse, really). I parsed this a few years using 
> ANTLR, but 
> > its size normally is around 100MB. A few years ago my machine had 
> 128MB 
> > of RAM! You see what I mean?
> 
> And how much disk space did you have?  On a UNIX box, mmap() is a 
> good way of automating file I/O, but even on systems without virtual 
> memory, you can fake it. Performance is not an issue--with a problem 
> of this size, nothing stays in the processor cache, and the overhead 
> of the disk writes will be only a few percent.
> 
> --Loring


Loring,

are you really serious about this? Have a look at the DOM vs. SAX
discussion in the XML area...

Oliver


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Sun Nov  9 23:38:10 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <3FAF26BC.5000700@zeigermann.de>
Message-ID: <bonf92+gksp@eGroups.com>

--- In antlr-interest@yahoogroups.com, Oliver Zeigermann <oliver@z...>
wrote:
> John D. Mitchell wrote:
> 
> >>>>>>"Oliver" == Oliver Zeigermann <oliver@z...> writes:
> >>>>>>
> >>>>>>>lgcraymer wrote:
> > 
> > [...]
> > 
> > 
> >>>Also, as to actions in lookahead code: this is something that Ter
> >>>supported in PCCTS under the name "guarded predicates" or some
such.  I
> >>>don't know that it saw much use, and I suspect that usage
indicates a
> >>>too early incorporation of semantic information into the
> >>>translator--tree transformation helps avoid that.
> > 
> > 
> >>1.) You might really increase the set of parseable languages using
this
> >>technique
> > 
> > 
> >>From a theoretical standpoint? Nope, I can't see how you've
increased the
> > power at all.
> > 
> >>From a "what's easiest/most-efficient to do with
tool/framework/etc. XYZ"?
> > Okay.
> 
> I have to admit I really do not recall my example of a language that
can 
> not be parsed without it, but can with it. Maybe I am mistaken, but
have 
> to think about it and will deliver it as soon as I have got it :)

Still can not remember my example, but here is some illustration that
there really are languages that can not be parsed without that
extension:

1.) Using semantic predicates you can increase the set of parseable
languages. This is easy to see when you think of the symbol table
stuff: in some programming languages undeclared variables are invalid
and thus the programm you have written is. This way you have a
stronger device to tell the words in your languages from those that
are not.
2.) A bit less obvious: As I had to admit, persuaded by Terence, for
every lookahead k > 0 there are languages that can be parsed with
LL(k), but not with LL(k-1). This means no matter how big a fixed k is
there still is an infinite number of languages that can not be parsed
with LL(k), but still can with syntactic predicates.

Now, imagine a language that is so weird it needs full syntactic
predicated lookahead and additionally has context-sensitive features.
This means the symbol table must be *set* and checked inside syntactic
predicates.

If you can not set the symbol table, you can not parse a language, you
otherwise could. Thus this stuff augments the set of parseable
languages with ANTLR.

As a sidenote: I really can not imagine any *practical* application of
this, but my other example might be worth considering.

Oliver


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Sun Nov  9 23:41:03 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <bonaae+1fd6@eGroups.com>
Message-ID: <bonfef+prj5@eGroups.com>

--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> --- In antlr-interest@yahoogroups.com, Oliver Zeigermann 
> <oliver@z...> wrote:
> > Admitted, this is not a really practical example, but consider
the 
> > following grammar:
> > 
> > {
> >      int cnt = 0;
> > }
> > 
> > LANGUAGE
> >      : ( SHORTWORD ) => SHORTWORD { System.out.println("SHORT"); }
> >      | LONGWORD { System.out.println("LONG"); }
> >      ;
> > 
> > protected SHORTWORD : { cnt = 0; } ( {cnt < 1000}? '*' { cnt++; }
)
> + '#' ;
> > protected LONGWORD : { cnt = 0; } ( {cnt < 10000}? '*' { cnt++; }
)
> + '#' ;
> > 
> > It describes a language with two words:
> > 1.) SHORTWORD: exactly 1000 '*' followed by a single '#'
> > 2.) LONGWORD: exactly 10000 '*' followed by a single '#'
> 
> Personally, I prefer:
> 
> STAR_WORD
> { int count = 0; }
>     :
>     ( '*' { count++; } )+ '#'
>     { if (count == 1000)
>           $setType(SHORTWORD);
>       else if (count == 10000)
>           $setType(LONGWORD);
>     }
> }
>     ;

It does not work. This grammar would accept 1001 (etc.) stars followed
by a single '#' as well.

Oliver


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Mon Nov 10 00:30:47 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <bonfef+prj5@eGroups.com>
Message-ID: <bonibn+6bi3@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Oliver Zeigermann" 
<oliver@z...> wrote:

> > STAR_WORD
> > { int count = 0; }
> >     :
> >     ( '*' { count++; } )+ '#'
> >     { if (count == 1000)
> >           $setType(SHORTWORD);
> >       else if (count == 10000)
> >           $setType(LONGWORD);
> >     }
> > }
> >     ;
> 
> It does not work. This grammar would accept 1001 (etc.) stars 
followed
> by a single '#' as well.

Yes, but those would be labeled as "STAR_WORD" instead of your two 
choices--that's enough to ensure that an exception is thrown in the 
parser.

--Loring

> Oliver


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Mon Nov 10 01:21:16 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <bonecd+le32@eGroups.com>
Message-ID: <bonlac+ag11@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Oliver Zeigermann" 
<oliver@z...> wrote:

> > > because of the memory issue. As a very practical exmaple I 
have 
> > parsing 
> > > of the AMM (Aircraft Maintenance Manual) which is available in 
> > SGML 
> > > (very hard to parse, really). I parsed this a few years using 
> > ANTLR, but 
> > > its size normally is around 100MB. A few years ago my machine 
had 
> > 128MB 
> > > of RAM! You see what I mean?
> > 
> > And how much disk space did you have?  On a UNIX box, mmap() is 
a 
> > good way of automating file I/O, but even on systems without 
virtual 
> > memory, you can fake it. Performance is not an issue--with a 
problem 
> > of this size, nothing stays in the processor cache, and the 
overhead 
> > of the disk writes will be only a few percent.
> > 
> > --Loring
> 
> 
> Loring,
> 
> are you really serious about this? Have a look at the DOM vs. SAX
> discussion in the XML area...

Of course.  Large memory machines are a recent luxury, and it is not 
hard to use disks efficiently.

--Loring

> Oliver


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tmoog at polhode.com  Mon Nov 10 06:11:39 2003
From: tmoog at polhode.com (Tom Moog)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <bonlac+ag11@eGroups.com>
References: <bonlac+ag11@eGroups.com>
Message-ID: <Pine.NEB.4.58.0311100901520.7607@panix5.panix.com>


I remember that John Lilley required the use of actions inside
guess blocks to parse C++.  I believe that parsing some C++
declarations which make use of nested classes might require
symbol table additions that must be undone if the guess fails.
Reasonable people may disagree about whether C++ is a real
programming language or not (laugh).  He created a special
version of pccts for this purpose.

In pccts, one can execute actions in guess mode by exploiting
the way in which code is generated.  Since init-actions are
executed even in guess mode, one can put semantic actions
there - even though they are only to supposed to have
declarations.

The important thing to remember is that init-actions may be
executed multiple times as back-tracking takes place.  Even if
the first guess is correct, the init-action will be executed
twice: once in guess mode and once in non-guess mode after
the guess succeeds.  In the case where there is a guess
within a guess, its quite possible that an init-action
would be executed 4 times, etc.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From johnm-antlr at non.net  Mon Nov 10 10:37:00 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <bonf92+gksp@eGroups.com>
References: <3FAF26BC.5000700@zeigermann.de>
	<bonf92+gksp@eGroups.com>
Message-ID: <16303.56012.435618.808432@despot.non.net>

>>>>> "Oliver" == Oliver Zeigermann <oliver@zeigermann.de> writes:

[...necessity of guarded predicates...]

> Still can not remember my example, but here is some illustration that
> there really are languages that can not be parsed without that extension:

> 1.) Using semantic predicates you can increase the set of parseable
> languages. This is easy to see when you think of the symbol table stuff:
> in some programming languages undeclared variables are invalid and thus
> the programm you have written is. This way you have a stronger device to
> tell the words in your languages from those that are not.  2.) A bit less
> obvious: As I had to admit, persuaded by Terence, for every lookahead k >
> 0 there are languages that can be parsed with LL(k), but not with
> LL(k-1). This means no matter how big a fixed k is there still is an
> infinite number of languages that can not be parsed with LL(k), but still
> can with syntactic predicates.

> Now, imagine a language that is so weird it needs full syntactic
> predicated lookahead and additionally has context-sensitive features.
> This means the symbol table must be *set* and checked inside syntactic
> predicates.

> If you can not set the symbol table, you can not parse a language, you
> otherwise could. Thus this stuff augments the set of parseable languages
> with ANTLR.

You still haven't shown how the "guarded predicates" are *necessary* to
understanding that type of language.  Now, you may be getting at an example
where you need them iff you need to do all of this in the parser (i.e.,
without using any later stages).

Again, I can see how that approach *may* be easier and/or more efficient,
etc.  but I don't see any evidence that the actual power of the system has
increased at all.

Take care,
	John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From johnm-antlr at non.net  Mon Nov 10 10:47:44 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <3FAF24C5.6000603@zeigermann.de>
References: <boknod+cjne@eGroups.com>
	<3FAF24C5.6000603@zeigermann.de>
Message-ID: <16303.56656.40090.70883@despot.non.net>

>>>>> "Oliver" == Oliver Zeigermann <oliver@zeigermann.de> writes:
[...]

> It describes a language with two words: 1.) SHORTWORD: exactly 1000 '*'
> followed by a single '#' 2.) LONGWORD: exactly 10000 '*' followed by a
> single '#'

> While the are certainly other grammars that describe this language, this
> one seems to be the most natural, but does not work, because semantic
> predicates (like {cnt < 1000}?) rely on semantic actions ({ cnt++; }, {
> cnt = 0; }).

Do you really *need* to do that strictly in the parser?  Why not just suck
down a simpler language in the parser -- which recognizes any number of
stars followed by a # -- and then do a more refined semantic check in a
later stage.  That would make for a much cleaner solution.

Take care,
	John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Mon Nov 10 13:14:33 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Anyone tried this ANTLR-inspired CC?
In-Reply-To: <bomq5i+sr3q@eGroups.com>
Message-ID: <E15D2970-13C2-11D8-AE6D-000A95891192@cs.usfca.edu>


On Sunday, November 9, 2003, at 05:37 PM, leung13512c wrote:

> The thing that caused me to switch away from ANTLR syntax
> is because I prefer the tree building syntax of JJTree that always
> create imaginary nodes instead of a mix of both.  And it mostly
> avoid having to create nodes within actions.

Howdy.  This is the old AST versus parse tree argument...Parse trees 
are easy to generate (i.e., no cost to developer) but have way too much 
noise for tree transformation and also are sensitive to grammar 
construction whereas ASTs are the canonical repr for a particular 
language.

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon Nov 10 12:16:09 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
Message-ID: <72C9789739C4214096AE945753B11EA3FABA15@mypxmail04.bco-home.com>

I'm kinda lost catching up in this discussion but I would like to clarify a
few things:

"Guarded predicates" are simply semantic predicates "guarded" or "gated" by
a syntactic predicate.  These are in ANTLR 2 as well as PCCTS.  They are not
for allowing semantic actions during predicates.  They have the form
()=>{}?.  Unguarded predicates are much more common.

Orthogonal to the above, a prediate may be disambiguating or validating.

"Disambiguating predicates," the most common use for predicates, are
predicates used to choose between alternatives.  If the predicate fails then
try the next alternative.

"Validating predicates" are predicates that aren't in an alternative block.
Therefore if they fail you can't choose anything else.  So they throw an
exception.

The trick for having semantic actions during a predicate is to make a method
call (with side effects) as part of your test.  This is dangerous because
the predicate may still fail and you will have to undo whatever you did but
you have no easy hooks for that.  You must override mark() and rewind() to
accomplish that.

Predicates, by design, are supposed to be side effect free and execute no
actions because their reason for being is to choose the correct path to
execute.

Monty

-----Original Message-----
From: Oliver Zeigermann [mailto:oliver@zeigermann.de] 
Sent: Sunday, November 09, 2003 11:38 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Local lookahead depth

--- In antlr-interest@yahoogroups.com, Oliver Zeigermann <oliver@z...>
wrote:
> John D. Mitchell wrote:
> 
> >>>>>>"Oliver" == Oliver Zeigermann <oliver@z...> writes:
> >>>>>>
> >>>>>>>lgcraymer wrote:
> > 
> > [...]
> > 
> > 
> >>>Also, as to actions in lookahead code: this is something that Ter
> >>>supported in PCCTS under the name "guarded predicates" or some
such.  I
> >>>don't know that it saw much use, and I suspect that usage
indicates a
> >>>too early incorporation of semantic information into the
> >>>translator--tree transformation helps avoid that.
> > 
> > 
> >>1.) You might really increase the set of parseable languages using
this
> >>technique
> > 
> > 
> >>From a theoretical standpoint? Nope, I can't see how you've
increased the
> > power at all.
> > 
> >>From a "what's easiest/most-efficient to do with
tool/framework/etc. XYZ"?
> > Okay.
> 
> I have to admit I really do not recall my example of a language that
can 
> not be parsed without it, but can with it. Maybe I am mistaken, but
have 
> to think about it and will deliver it as soon as I have got it :)

Still can not remember my example, but here is some illustration that
there really are languages that can not be parsed without that
extension:

1.) Using semantic predicates you can increase the set of parseable
languages. This is easy to see when you think of the symbol table
stuff: in some programming languages undeclared variables are invalid
and thus the programm you have written is. This way you have a
stronger device to tell the words in your languages from those that
are not.
2.) A bit less obvious: As I had to admit, persuaded by Terence, for
every lookahead k > 0 there are languages that can be parsed with
LL(k), but not with LL(k-1). This means no matter how big a fixed k is
there still is an infinite number of languages that can not be parsed
with LL(k), but still can with syntactic predicates.

Now, imagine a language that is so weird it needs full syntactic
predicated lookahead and additionally has context-sensitive features.
This means the symbol table must be *set* and checked inside syntactic
predicates.

If you can not set the symbol table, you can not parse a language, you
otherwise could. Thus this stuff augments the set of parseable
languages with ANTLR.

As a sidenote: I really can not imagine any *practical* application of
this, but my other example might be worth considering.

Oliver


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jcomuzzi at novell.com  Mon Nov 10 12:18:05 2003
From: jcomuzzi at novell.com (Joe Comuzzi)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
Message-ID: <sfaf901d.006@prv-mail20.provo.novell.com>

At the risk of jumping into an on-going conversation. I'd like to join
the argument FOR some sematic predicates in the presence of
backtracking. 

It's certainly the case that you can solve any case which seems to need
this by using a tree-walk. I claim you do give something up by solving
it this way. One of the great advantages of LL parsing (and ANTLR) is
that it's easy to write good error messages. Now, maybe I'm not doing it
right - but I find when I have to check semantics in a tree-walk pass,
the quality of the errors revert to the kind of contextless non-sense
one typically sees in YACC and LR parsers. So, for me, the justification
of doing semantic checks in the parser is the quality of error messages
- and this has been an important enough consideration to occasionally
use code in init actions to control the parse...

My 2 cents - YMMV

Joe C. 

>>> oliver@zeigermann.de 11/10/2003 2:54:07 PM >>>
John D. Mitchell wrote:
>>>>>>"Oliver" == Oliver Zeigermann <oliver@zeigermann.de> writes:
> 
> [...]
> 
> 
>>It describes a language with two words: 1.) SHORTWORD: exactly 1000
'*'
>>followed by a single '#' 2.) LONGWORD: exactly 10000 '*' followed by
a
>>single '#'
> 
> 
>>While the are certainly other grammars that describe this language,
this
>>one seems to be the most natural, but does not work, because
semantic
>>predicates (like {cnt < 1000}?) rely on semantic actions ({ cnt++; },
{
>>cnt = 0; }).
> 
> 
> Do you really *need* to do that strictly in the parser?  Why not just
suck
> down a simpler language in the parser -- which recognizes any number
of
> stars followed by a # -- and then do a more refined semantic check in
a
> later stage.  That would make for a much cleaner solution.

John, it seems we again have a communication problem. It is just an 
example to illustrate something. I do not have a practical problem like

this. This is a *theoretical* discussion. I am talking *theory* all the

time :)

Oliver



 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Mon Nov 10 11:44:53 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <bonlac+ag11@eGroups.com>
References: <bonlac+ag11@eGroups.com>
Message-ID: <3FAFEAB5.70807@zeigermann.de>

lgcraymer wrote:
> --- In antlr-interest@yahoogroups.com, "Oliver Zeigermann" 
> <oliver@z...> wrote:
> 
> 
>>>>because of the memory issue. As a very practical exmaple I 
> 
> have 
> 
>>>parsing 
>>>
>>>>of the AMM (Aircraft Maintenance Manual) which is available in 
>>>
>>>SGML 
>>>
>>>>(very hard to parse, really). I parsed this a few years using 
>>>
>>>ANTLR, but 
>>>
>>>>its size normally is around 100MB. A few years ago my machine 
> 
> had 
> 
>>>128MB 
>>>
>>>>of RAM! You see what I mean?
>>>
>>>And how much disk space did you have?  On a UNIX box, mmap() is 
> 
> a 
> 
>>>good way of automating file I/O, but even on systems without 
> 
> virtual 
> 
>>>memory, you can fake it. Performance is not an issue--with a 
> 
> problem 
> 
>>>of this size, nothing stays in the processor cache, and the 
> 
> overhead 
> 
>>>of the disk writes will be only a few percent.
>>>
>>>--Loring
>>
>>
>>Loring,
>>
>>are you really serious about this? Have a look at the DOM vs. SAX
>>discussion in the XML area...
> 
> 
> Of course.  Large memory machines are a recent luxury, and it is not 
> hard to use disks efficiently.

You know, when you have large amounts of data parsed, it *does* make a 
difference if it takes one or ten hours per run.

Oliver



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From johnm-antlr at non.net  Mon Nov 10 10:58:08 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <bonecd+le32@eGroups.com>
References: <bonaae+1fd6@eGroups.com>
	<bonecd+le32@eGroups.com>
Message-ID: <16303.57280.758378.712794@despot.non.net>

>>>>> "Oliver" == Oliver Zeigermann <oliver@zeigermann.de> writes:
[...]

> are you really serious about this? Have a look at the DOM vs. SAX
> discussion in the XML area...

The fundamental question there is simply "do you need all of the complexity
of a full 'DOM' approach or is a syntax-directed translation all that you
need?"  I'll give them the benefit of the doubt and say that all of the
rest of those whacked out discussions boil down to "premature
optimization".

It cracks me up how many people learn "XML" and think themselves language
and/or parsing experts.

Take care,
	John "The crying-on-the-inside kind of clown" Mitchell

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Mon Nov 10 11:54:07 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <16303.56656.40090.70883@despot.non.net>
References: <boknod+cjne@eGroups.com>	<3FAF24C5.6000603@zeigermann.de> <16303.56656.40090.70883@despot.non.net>
Message-ID: <3FAFECDF.1080006@zeigermann.de>

John D. Mitchell wrote:
>>>>>>"Oliver" == Oliver Zeigermann <oliver@zeigermann.de> writes:
> 
> [...]
> 
> 
>>It describes a language with two words: 1.) SHORTWORD: exactly 1000 '*'
>>followed by a single '#' 2.) LONGWORD: exactly 10000 '*' followed by a
>>single '#'
> 
> 
>>While the are certainly other grammars that describe this language, this
>>one seems to be the most natural, but does not work, because semantic
>>predicates (like {cnt < 1000}?) rely on semantic actions ({ cnt++; }, {
>>cnt = 0; }).
> 
> 
> Do you really *need* to do that strictly in the parser?  Why not just suck
> down a simpler language in the parser -- which recognizes any number of
> stars followed by a # -- and then do a more refined semantic check in a
> later stage.  That would make for a much cleaner solution.

John, it seems we again have a communication problem. It is just an 
example to illustrate something. I do not have a practical problem like 
this. This is a *theoretical* discussion. I am talking *theory* all the 
time :)

Oliver



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Mon Nov 10 12:00:10 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <16303.56012.435618.808432@despot.non.net>
References: <3FAF26BC.5000700@zeigermann.de>	<bonf92+gksp@eGroups.com> <16303.56012.435618.808432@despot.non.net>
Message-ID: <3FAFEE4A.9000606@zeigermann.de>

John D. Mitchell wrote:
>>>>>>"Oliver" == Oliver Zeigermann <oliver@zeigermann.de> writes:
> 
> 
> [...necessity of guarded predicates...]
> 
> 
>>Still can not remember my example, but here is some illustration that
>>there really are languages that can not be parsed without that extension:
> 
> 
>>1.) Using semantic predicates you can increase the set of parseable
>>languages. This is easy to see when you think of the symbol table stuff:
>>in some programming languages undeclared variables are invalid and thus
>>the programm you have written is. This way you have a stronger device to
>>tell the words in your languages from those that are not.  2.) A bit less
>>obvious: As I had to admit, persuaded by Terence, for every lookahead k >
>>0 there are languages that can be parsed with LL(k), but not with
>>LL(k-1). This means no matter how big a fixed k is there still is an
>>infinite number of languages that can not be parsed with LL(k), but still
>>can with syntactic predicates.
> 
> 
>>Now, imagine a language that is so weird it needs full syntactic
>>predicated lookahead and additionally has context-sensitive features.
>>This means the symbol table must be *set* and checked inside syntactic
>>predicates.
> 
> 
>>If you can not set the symbol table, you can not parse a language, you
>>otherwise could. Thus this stuff augments the set of parseable languages
>>with ANTLR.
> 
> 
> You still haven't shown how the "guarded predicates" are *necessary* to
> understanding that type of language.  

Ooops, I though I had shown necessity?! Where is the missing piece?

 > Now, you may be getting at an example
 > where you need them iff you need to do all of this in the parser (i.e.,
 > without using any later stages).

What do you mean with later stages? ASTs? A turing machine? Of course 
when you augment your system with a turing machine it can parse any 
phrase structure language with - say - a DFA ;) See what I mean?

Oliver



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Mon Nov 10 13:55:22 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <3FAFEAB5.70807@zeigermann.de>
Message-ID: <bop1ga+7brv@eGroups.com>

Oliver--

Do the math.  A modern disk drive will sustain a bandwidth of 10-15 MB/s.  You have described a problem in which disk usage would 
be predominantly sequential (one read and one write per pass), and a large fraction of the disk I/O can be overlapped with 
computation.  It is decidedly not a "one hour or ten" issue--the performance differential is unlikely to be more than a few percent, 
provided that you treat the disk as a block-access device.  Besides, between stuff discarded during lexing and stuff discarded during 
parsing, that 100 MB is likely to shrink into 1-2 MB of tokens and 10-20 MB of syntax tree.

--Loring


--- In antlr-interest@yahoogroups.com, Oliver Zeigermann <oliver@z...> wrote:
> lgcraymer wrote:
> > --- In antlr-interest@yahoogroups.com, "Oliver Zeigermann" 
> > <oliver@z...> wrote:
> > 
> > 
> >>>>because of the memory issue. As a very practical exmaple I 
> > 
> > have 
> > 
> >>>parsing 
> >>>
> >>>>of the AMM (Aircraft Maintenance Manual) which is available in 
> >>>
> >>>SGML 
> >>>
> >>>>(very hard to parse, really). I parsed this a few years using 
> >>>
> >>>ANTLR, but 
> >>>
> >>>>its size normally is around 100MB. A few years ago my machine 
> > 
> > had 
> > 
> >>>128MB 
> >>>
> >>>>of RAM! You see what I mean?
> >>>
> >>>And how much disk space did you have?  On a UNIX box, mmap() is 
> > 
> > a 
> > 
> >>>good way of automating file I/O, but even on systems without 
> > 
> > virtual 
> > 
> >>>memory, you can fake it. Performance is not an issue--with a 
> > 
> > problem 
> > 
> >>>of this size, nothing stays in the processor cache, and the 
> > 
> > overhead 
> > 
> >>>of the disk writes will be only a few percent.
> >>>
> >>>--Loring
> >>
> >>
> >>Loring,
> >>
> >>are you really serious about this? Have a look at the DOM vs. SAX
> >>discussion in the XML area...
> > 
> > 
> > Of course.  Large memory machines are a recent luxury, and it is not 
> > hard to use disks efficiently.
> 
> You know, when you have large amounts of data parsed, it *does* make a 
> difference if it takes one or ten hours per run.
> 
> Oliver


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Mon Nov 10 12:07:12 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <16303.57280.758378.712794@despot.non.net>
References: <bonaae+1fd6@eGroups.com>	<bonecd+le32@eGroups.com> <16303.57280.758378.712794@despot.non.net>
Message-ID: <3FAFEFF0.4040105@zeigermann.de>

John D. Mitchell wrote:

>>>>>>"Oliver" == Oliver Zeigermann <oliver@zeigermann.de> writes:
> 
> [...]
> 
> 
>>are you really serious about this? Have a look at the DOM vs. SAX
>>discussion in the XML area...
> 
> 
> The fundamental question there is simply "do you need all of the complexity
> of a full 'DOM' approach or is a syntax-directed translation all that you
> need?"  I'll give them the benefit of the doubt and say that all of the
> rest of those whacked out discussions boil down to "premature
> optimization".

What's your point here?

> It cracks me up how many people learn "XML" and think themselves language
> and/or parsing experts.

This is certainly off topic...

Oliver



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pandeyrajiv at yahoo.com  Mon Nov 10 14:08:22 2003
From: pandeyrajiv at yahoo.com (pandeyrajiv)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Does anyone have a CPP grammer that has AST built into it?
Message-ID: <bop28m+rjso@eGroups.com>

Hi All,

I am very new to ANTLR and am trying to use it for a project where we
wish to parse Java and C++ files and do some decision making based on
the result of the parsing.

I started out with the Java grammer and everything was peachy as I
could persist the AST as an XML file and do some scanning on that file
to do post processing.

HOWEVER, when I tried the C++ grammer, it does NOT seem to have any
AST related pieces in the grammer and so when I try to do the
following call to serialize the output:
FileWriter writer = new FileWriter("c:/temp/antlr.xml");
((BaseAST)parser.getAST()).xmlSerialize(writer);

I get a Null pointer exception since there *is* no AST tree that got
built...

Can anyone help!!!

I am very new to this and do not have the expertise to be able to
modify the grammer to build the AST...I am sure someone out there has
done this before...

Thanks so much

Rajiv Pandey
pandeyrajiv@yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tzagotta1 at sienasystems.com  Mon Nov 10 14:16:29 2003
From: tzagotta1 at sienasystems.com (Tom Zagotta)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <bop1ga+7brv@eGroups.com>
Message-ID: <200311102213.QAA18663@coral.propagation.net>

> Do the math.  A modern disk drive will sustain a bandwidth of 
> 10-15 MB/s.  You have described a problem in which disk usage 
> would be predominantly sequential (one read and one write per 
> pass), and a large fraction of the disk I/O can be overlapped 
> with computation.  It is decidedly not a "one hour or ten" 
> issue--the performance differential is unlikely to be more 
> than a few percent, provided that you treat the disk as a 
> block-access device.  Besides, between stuff discarded during 
> lexing and stuff discarded during parsing, that 100 MB is 
> likely to shrink into 1-2 MB of tokens and 10-20 MB of syntax tree.

Sorry to interject here -- in my view, performance is always important.  If
I build a parser with ANTLR that takes 10 seconds to parse a file, but my
competitor's parser takes 3 seconds, then I am in trouble.

ANTLR should have best-in-class runtime performance, in my opinion.  We
shouldn't settle for less, especially for academic reasons.

Best regards,

- Tom


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Mon Nov 10 16:23:46 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <200311102213.QAA18663@coral.propagation.net>
Message-ID: <bopa6i+t37c@eGroups.com>

Tom--

This isn't an argument about ANTLR internals:  Oliver put forth an example for which he thought that tree transformation would be 
prohibitive due to lack of memory.  It was not a viable example, although he has yet to admit that.

As to performance:  there are always tradeoffs between performance and functionality.  Sometimes performance wins, sometimes 
functionality wins.  Chris Leung's LLK (which reminds me, I need to recreate a post--yahoo has Alzheimer's) errs on the side of 
performance, while ANTLR 2 errs on the functionality side (copying strings for tokens can be expensive, for example, but it also 
allows indefinite length input and editing of token text).  There is a reason that Chris sees a factor of five performance difference; at 
the same time, I don't think that he is (yet) headed in a direction that will support complex source-to-source transformation.  My 
experience with large software systems is that local optimization for performance (non-algorithmic) often makes global optimization 
difficult, as the code rapidly becomes "unmaintainable", and can limit the potential for extending the system or using it as a building 
block in a larger system.  The trick is to properly assess the tradeoffs when making design decisions.

--Loring


--- In antlr-interest@yahoogroups.com, "Tom Zagotta" <tzagotta1@s...> wrote:
> > Do the math.  A modern disk drive will sustain a bandwidth of 
> > 10-15 MB/s.  You have described a problem in which disk usage 
> > would be predominantly sequential (one read and one write per 
> > pass), and a large fraction of the disk I/O can be overlapped 
> > with computation.  It is decidedly not a "one hour or ten" 
> > issue--the performance differential is unlikely to be more 
> > than a few percent, provided that you treat the disk as a 
> > block-access device.  Besides, between stuff discarded during 
> > lexing and stuff discarded during parsing, that 100 MB is 
> > likely to shrink into 1-2 MB of tokens and 10-20 MB of syntax tree.
> 
> Sorry to interject here -- in my view, performance is always important.  If
> I build a parser with ANTLR that takes 10 seconds to parse a file, but my
> competitor's parser takes 3 seconds, then I am in trouble.
> 
> ANTLR should have best-in-class runtime performance, in my opinion.  We
> shouldn't settle for less, especially for academic reasons.
> 
> Best regards,
> 
> - Tom


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Mon Nov 10 18:10:55 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Anyone tried this ANTLR-inspired CC?
In-Reply-To: <E15D2970-13C2-11D8-AE6D-000A95891192@cs.usfca.edu>
Message-ID: <bopgff+imah@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> 
> On Sunday, November 9, 2003, at 05:37 PM, leung13512c wrote:
> 
> > The thing that caused me to switch away from ANTLR syntax
> > is because I prefer the tree building syntax of JJTree that always
> > create imaginary nodes instead of a mix of both.  And it mostly
> > avoid having to create nodes within actions.
> 
> Howdy.  This is the old AST versus parse tree argument...Parse trees 
> are easy to generate (i.e., no cost to developer) but have way too much 
> noise for tree transformation and also are sensitive to grammar 
> construction whereas ASTs are the canonical repr for a particular 
> language.

Hmmm. If you are saying ANTLR generates a CST (aka. parse tree or
concrete syntax tree) by default and the JJTree way is to generate an
AST, you may be right Ter.

Now, generating an AST rather than a CST is easily done in ANTLR with
custom tree-building actions. This should be doable with
implementation language-agnostic syntax in ANTLR 3. That leaves
visitors...

Despite the elegance and utility of the treeparser-from-grammar
feature, it may be prudent to provide support for auto-visitor
generation *also* with ANTLR 3. One big issue is that, ANTLR's AST
interface isn't particularly custom, hetero-AST friendly and, getting
to play nice with the visitor model seems to need custom hetero-ASTs.
So we get into, attributed ANTLR grammars and {ANTLR-driven}
attributed grammar processors that read the grammar and generates AST
nodes classes and visitors in addition to the Lexer/Parser/TreeParsers.

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Mon Nov 10 18:16:17 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Anyone tried this ANTLR-inspired CC?
In-Reply-To: <bopgff+imah@eGroups.com>
Message-ID: <086C69DC-13ED-11D8-AE6D-000A95891192@cs.usfca.edu>


On Monday, November 10, 2003, at 06:10 PM, micheal_jor wrote:

> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
>>
>> On Sunday, November 9, 2003, at 05:37 PM, leung13512c wrote:
>>
>>> The thing that caused me to switch away from ANTLR syntax
>>> is because I prefer the tree building syntax of JJTree that always
>>> create imaginary nodes instead of a mix of both.  And it mostly
>>> avoid having to create nodes within actions.
>>
>> Howdy.  This is the old AST versus parse tree argument...Parse trees
>> are easy to generate (i.e., no cost to developer) but have way too 
>> much
>> noise for tree transformation and also are sensitive to grammar
>> construction whereas ASTs are the canonical repr for a particular
>> language.
>
> Hmmm. If you are saying ANTLR generates a CST (aka. parse tree or
> concrete syntax tree) by default and the JJTree way is to generate an
> AST, you may be right Ter.

Actually, antlr likes ASTs not parse trees though you could of course 
build one.  In essence, I'm saying that ANTLR likes

   +
  /  \
3  4

for "3+4" without any rule nodes in there like a parse tree has.

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Mon Nov 10 18:29:39 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] Re: Anyone tried this ANTLR-inspired CC?
In-Reply-To: <086C69DC-13ED-11D8-AE6D-000A95891192@cs.usfca.edu>
Message-ID: <bophij+nel8@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:

> >> Howdy.  This is the old AST versus parse tree argument...Parse trees
> >> are easy to generate (i.e., no cost to developer) but have way too 
> >> much
> >> noise for tree transformation and also are sensitive to grammar
> >> construction whereas ASTs are the canonical repr for a particular
> >> language.
> >
> > Hmmm. If you are saying ANTLR generates a CST (aka. parse tree or
> > concrete syntax tree) by default and the JJTree way is to generate an
> > AST, you may be right Ter.
> 
> Actually, antlr likes ASTs not parse trees though you could of course 
> build one.  In essence, I'm saying that ANTLR likes
> 
>    +
>   /  \
> 3  4
> 
> for "3+4" without any rule nodes in there like a parse tree has.

Hmmm. That had the old grey matter twitching for a while ;-)

OK. I needed to be clearer. In practical terms, ANTLR neither
generates a CST nor an AST by default. It generates something in
between. Sure the internal rule nodes are missing but, lots of other
noise like semicolons and closing braces are present. Now, they have
their uses (~100% lossless tranformations being one example) but they
still represent noise in an optimized AST.

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Mon Nov 10 18:34:03 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:05 2004
Subject: [antlr-interest] AST vs parse trees
In-Reply-To: <bophij+nel8@eGroups.com>
Message-ID: <83BC4577-13EF-11D8-AE6D-000A95891192@cs.usfca.edu>


On Monday, November 10, 2003, at 06:29 PM, micheal_jor wrote:

> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
>
>>>> Howdy.  This is the old AST versus parse tree argument...Parse trees
>>>> are easy to generate (i.e., no cost to developer) but have way too
>>>> much
>>>> noise for tree transformation and also are sensitive to grammar
>>>> construction whereas ASTs are the canonical repr for a particular
>>>> language.
>>>
>>> Hmmm. If you are saying ANTLR generates a CST (aka. parse tree or
>>> concrete syntax tree) by default and the JJTree way is to generate an
>>> AST, you may be right Ter.
>>
>> Actually, antlr likes ASTs not parse trees though you could of course
>> build one.  In essence, I'm saying that ANTLR likes
>>
>>    +
>>   /  \
>> 3  4
>>
>> for "3+4" without any rule nodes in there like a parse tree has.
>
> Hmmm. That had the old grey matter twitching for a while ;-)
>
> OK. I needed to be clearer. In practical terms, ANTLR neither
> generates a CST nor an AST by default. It generates something in
> between. Sure the internal rule nodes are missing but, lots of other
> noise like semicolons and closing braces are present. Now, they have
> their uses (~100% lossless tranformations being one example) but they
> still represent noise in an optimized AST.

Actually I specifically remove ; and } etc... if you look at the java.g 
file.  An AST should have the minimum necessary information in there. :)

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Mon Nov 10 18:46:51 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: AST vs parse trees
In-Reply-To: <83BC4577-13EF-11D8-AE6D-000A95891192@cs.usfca.edu>
Message-ID: <bopiir+an02@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:

> > OK. I needed to be clearer. In practical terms, ANTLR neither
> > generates a CST nor an AST by default. It generates something in
> > between. Sure the internal rule nodes are missing but, lots of other
> > noise like semicolons and closing braces are present. Now, they have
> > their uses (~100% lossless tranformations being one example) but they
> > still represent noise in an optimized AST.
> 
> Actually I specifically remove ; and } etc... if you look at the java.g 
> file.  An AST should have the minimum necessary information in there. :)

That the point I was making Ter. By default, ANTLR generates trees
that need "pruning" to get an optimized AST with only the minimum
neccesary information. Not necessarily a bad thing, as long as the
pruning can be specified in a action-language-agnostic manner.

Any opinion on the visitor-generation idea/suggestion?

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From johnm-antlr at non.net  Mon Nov 10 20:53:46 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: AST vs parse trees
In-Reply-To: <bopiir+an02@eGroups.com>
References: <83BC4577-13EF-11D8-AE6D-000A95891192@cs.usfca.edu>
	<bopiir+an02@eGroups.com>
Message-ID: <16304.27483.54015.698154@despot.non.net>

>>>>> "micheal" == micheal jor <open.zone@virgin.net> writes:
[...]

> Any opinion on the visitor-generation idea/suggestion?

Grammars are a Very Good Thing(tm).

:-)
	John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From johnm-antlr at non.net  Mon Nov 10 21:04:06 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <3FAFEE4A.9000606@zeigermann.de>
References: <3FAF26BC.5000700@zeigermann.de>
	<bonf92+gksp@eGroups.com>
	<16303.56012.435618.808432@despot.non.net>
	<3FAFEE4A.9000606@zeigermann.de>
Message-ID: <16304.28102.554707.148368@despot.non.net>

>>>>> "Oliver" == Oliver Zeigermann <oliver@zeigermann.de> writes:
>>>>>> John D. Mitchell wrote:
>>>>>>> "Oliver" == Oliver Zeigermann <oliver@zeigermann.de> writes:

>> [...necessity of guarded predicates...]

[...]

>>> If you can not set the symbol table, you can not parse a language, you
>>> otherwise could. Thus this stuff augments the set of parseable
>>> languages with ANTLR.

>> You still haven't shown how the "guarded predicates" are *necessary* to
>> understanding that type of language.

> Ooops, I though I had shown necessity?! Where is the missing piece?

That's my question. :-) All that you've shown is that using "guarded
predicates" helps you parse that language *only* using a lexer and a
parser.  You haven't shown how that increases the recognition power of a
complete translator has been increased.

As I've noted, you can use additional stages (e.g., antlr-based tree
transformers) to more cleanly solve your example language problem.

Take care,
	John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From johnm-antlr at non.net  Mon Nov 10 21:09:05 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <3FAFECDF.1080006@zeigermann.de>
References: <boknod+cjne@eGroups.com>
	<3FAF24C5.6000603@zeigermann.de>
	<16303.56656.40090.70883@despot.non.net>
	<3FAFECDF.1080006@zeigermann.de>
Message-ID: <16304.28401.689197.900925@despot.non.net>

>>>>> "Oliver" == Oliver Zeigermann <oliver@zeigermann.de> writes:
>>>>>> John D. Mitchell wrote:
[...]

>> Do you really *need* to do that strictly in the parser?  Why not just
>> suck down a simpler language in the parser -- which recognizes any
>> number of stars followed by a # -- and then do a more refined semantic
>> check in a later stage.  That would make for a much cleaner solution.

> John, it seems we again have a communication problem. It is just an
> example to illustrate something. I do not have a practical problem like
> this. This is a *theoretical* discussion. I am talking *theory* all the
> time :)

That's exactly my point...  There's NO increase in the *theoretical* power
of the translation system based upon the use of guarded predicates in the
parser.

Take care,
	John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From johnm-antlr at non.net  Mon Nov 10 21:27:33 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <3FAFEFF0.4040105@zeigermann.de>
References: <bonaae+1fd6@eGroups.com>
	<bonecd+le32@eGroups.com>
	<16303.57280.758378.712794@despot.non.net>
	<3FAFEFF0.4040105@zeigermann.de>
Message-ID: <16304.29509.486226.299425@despot.non.net>

>>>>> "Oliver" == Oliver Zeigermann <oliver@zeigermann.de> writes:
>>>>>> John D. Mitchell writes:
>>>>>>> "Oliver" == Oliver Zeigermann <oliver@zeigermann.de> writes:
[...]

>>> are you really serious about this? Have a look at the DOM vs. SAX
>>> discussion in the XML area...

>> The fundamental question there is simply "do you need all of the
>> complexity of a full 'DOM' approach or is a syntax-directed translation
>> all that you need?"  I'll give them the benefit of the doubt and say
>> that all of the rest of those whacked out discussions boil down to
>> "premature optimization".

> What's your point here?

You made a side comment about the whole war of the tree-based
vs. syntax-directed translation approaches (as exhibited by the war in the
XML community about DOM vs. SAX) having to do with performance (in reply to
a comment from Loring).

I'm saying that people involved in that XML DOM vs. SAX war are missing the
only truly *necessary* language question: Do they need the extra power that
is available via a DOM approach?  If no then they can take the SAX approach
and get various benefits in terms of e.g., speed.  If yes then they need to
use a DOM (or use/create one of the myriad hacks on top of a SAX approach
which simulates various parts of a DOM approach, etc.).

It goes without saying that this war of the tree-based vs. syntax-direct
approaches have absolutely no bearing in the world of translator generators
that you and I live in. :-? :-)


>> It cracks me up how many people learn "XML" and think themselves
>> language and/or parsing experts.

> This is certainly off topic...

Ah, sorry for the lack of explicit context.  To be clear, my comment is
strictly about those XML folks involved in that DOM vs. SAX war.  I
apologize for any confusion caused thereby.

Take care,
	John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Mon Nov 10 21:31:24 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <Pine.NEB.4.58.0311100901520.7607@panix5.panix.com>
Message-ID: <bops7c+umg2@eGroups.com>

Tom, 

thanks for that substantial post!

--- In antlr-interest@yahoogroups.com, Tom Moog <tmoog@p...> wrote:
> 
> I remember that John Lilley required the use of actions inside
> guess blocks to parse C++.  I believe that parsing some C++
> declarations which make use of nested classes might require
> symbol table additions that must be undone if the guess fails.
> Reasonable people may disagree about whether C++ is a real
> programming language or not (laugh).  He created a special
> version of pccts for this purpose.

I thought if a *formal* language is hard to parse than it might be
hard to read and understand by humans like us ;)

> The important thing to remember is that init-actions may be
> executed multiple times as back-tracking takes place.  Even if
> the first guess is correct, the init-action will be executed
> twice: once in guess mode and once in non-guess mode after
> the guess succeeds.  In the case where there is a guess
> within a guess, its quite possible that an init-action
> would be executed 4 times, etc.

This really is something to consider carefully. Maybe just as you
initialize everything at the beginning of a rule, there should be a
policy to undo everything at the end of a rule? Hmmm, which does not
work, as values must be present across multiple rules sometimes. What
if I said logical block instead of rule. Would that make sense?

Oliver


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tmoog at polhode.com  Mon Nov 10 22:23:45 2003
From: tmoog at polhode.com (Tom Moog)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <bops7c+umg2@eGroups.com>
References: <bops7c+umg2@eGroups.com>
Message-ID: <Pine.NEB.4.58.0311110119230.15736@panix5.panix.com>


For C++ you could use an object with a dtor.

I seem to remember that pccts allows one to associate
user-defined routines with the guess-success and
guess-fail so that one can undo or commit depending
on the guess outcome.



On Tue, 11 Nov 2003, Oliver Zeigermann wrote:

> Tom,
>
> thanks for that substantial post!
>
> --- In antlr-interest@yahoogroups.com, Tom Moog <tmoog@p...> wrote:
> >
> > I remember that John Lilley required the use of actions inside
> > guess blocks to parse C++.  I believe that parsing some C++
> > declarations which make use of nested classes might require
> > symbol table additions that must be undone if the guess fails.
> > Reasonable people may disagree about whether C++ is a real
> > programming language or not (laugh).  He created a special
> > version of pccts for this purpose.
>
> I thought if a *formal* language is hard to parse than it might be
> hard to read and understand by humans like us ;)
>
> > The important thing to remember is that init-actions may be
> > executed multiple times as back-tracking takes place.  Even if
> > the first guess is correct, the init-action will be executed
> > twice: once in guess mode and once in non-guess mode after
> > the guess succeeds.  In the case where there is a guess
> > within a guess, its quite possible that an init-action
> > would be executed 4 times, etc.
>
> This really is something to consider carefully. Maybe just as you
> initialize everything at the beginning of a rule, there should be a
> policy to undo everything at the end of a rule? Hmmm, which does not
> work, as values must be present across multiple rules sometimes. What
> if I said logical block instead of rule. Would that make sense?
>
> Oliver
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Mon Nov 10 23:44:13 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <Pine.NEB.4.58.0311110119230.15736@panix5.panix.com>
Message-ID: <boq40d+3ale@eGroups.com>

--- In antlr-interest@yahoogroups.com, Tom Moog <tmoog@p...> wrote:
> 
> For C++ you could use an object with a dtor.

Sure, but when to delete the object. Same problem as with Java, it
seems :(
 
> I seem to remember that pccts allows one to associate
> user-defined routines with the guess-success and
> guess-fail so that one can undo or commit depending
> on the guess outcome.

Sounds good, but probably would be the source for lots of bugs. My
dream would be some sort of transaction that simply gets rolled back
when guessing failes. Although, this will remain a dream for some
time ;)

Oliver

> 
> 
> On Tue, 11 Nov 2003, Oliver Zeigermann wrote:
> 
> > Tom,
> >
> > thanks for that substantial post!
> >
> > --- In antlr-interest@yahoogroups.com, Tom Moog <tmoog@p...>
wrote:
> > >
> > > I remember that John Lilley required the use of actions inside
> > > guess blocks to parse C++.  I believe that parsing some C++
> > > declarations which make use of nested classes might require
> > > symbol table additions that must be undone if the guess fails.
> > > Reasonable people may disagree about whether C++ is a real
> > > programming language or not (laugh).  He created a special
> > > version of pccts for this purpose.
> >
> > I thought if a *formal* language is hard to parse than it might be
> > hard to read and understand by humans like us ;)
> >
> > > The important thing to remember is that init-actions may be
> > > executed multiple times as back-tracking takes place.  Even if
> > > the first guess is correct, the init-action will be executed
> > > twice: once in guess mode and once in non-guess mode after
> > > the guess succeeds.  In the case where there is a guess
> > > within a guess, its quite possible that an init-action
> > > would be executed 4 times, etc.
> >
> > This really is something to consider carefully. Maybe just as you
> > initialize everything at the beginning of a rule, there should be
a
> > policy to undo everything at the end of a rule? Hmmm, which does
not
> > work, as values must be present across multiple rules sometimes.
What
> > if I said logical block instead of rule. Would that make sense?
> >
> > Oliver


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From wiggjd at lsbu.ac.uk  Tue Nov 11 07:15:13 2003
From: wiggjd at lsbu.ac.uk (wiggjd@lsbu.ac.uk)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Does anyone have a CPP grammar that has AST built into it?
Message-ID: <60372.81.86.241.154.1068563713.squirrel@webmail.lsbu.ac.uk>

With reference to Pandeyrajiv@yahoo.com question of Monday 10
November (in antlr-interest Digest Number 1486),

I assume you were referring to the C++ grammar supplied by me
from London South Bank University.

As far as I know there is no other C++ grammar available and I
regret that this grammar does not yet provide an AST. (Please
note that as it stands this particular version uses ANTLR
(Java) to generate C++ parsers written in C++ only).

I am still working on this grammar and do not have time (or
the need) to generate an AST. However, I don't think this too
difficult and if you decide to try to do this I would be
pleased to hear about it so I could update my version
appropriately.

On the other hand Dmitry Poplavsky (dima@thekompany.com) has
expressed an interest in the grammar and asked about an AST.
Perhaps he may be persuaded to do this for us.

I believe there are examples of grammars with ASTs in the
examples directory.

David.







 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mtiller at ford.com  Tue Nov 11 07:36:56 2003
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: Anyone tried this ANTLR-inspired CC?
Message-ID: <6F7AD2AD5765D3118A7A0090278730212A4F6E23@na1fcm06.dearborn.ford.com>


> From: Terence Parr [mailto:parrt@cs.usfca.edu]
> Sent: Monday, November 10, 2003 4:15 PM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] Re: Anyone tried this ANTLR-inspired CC?
> 
> 
> 
> On Sunday, November 9, 2003, at 05:37 PM, leung13512c wrote:
> 
> > The thing that caused me to switch away from ANTLR syntax
> > is because I prefer the tree building syntax of JJTree that always
> > create imaginary nodes instead of a mix of both.  And it mostly
> > avoid having to create nodes within actions.
> 
> Howdy.  This is the old AST versus parse tree argument...Parse trees 
> are easy to generate (i.e., no cost to developer) but have 
> way too much 
> noise for tree transformation and also are sensitive to grammar 
> construction whereas ASTs are the canonical repr for a particular 
> language.
> 
> Ter

I'm not sure this is an argument for parse trees or against ASTs.  Let me explain...

Personally, there are two extremes I would like to avoid.  One is using terminals as roots in ASTs.  I don't really care for this approach because I find it rather strange (just my personal preference).  The other case I wouldn't like is having every production rule in my grammar generate a node in my AST.  As far as I'm concerned, these are both sub-optimal.

In practice, ANTLR tends to fall into the former category and I guess JJTree probably falls into the latter.  Now ANLTR is obviously capable of avoiding this use of terminals for roots by creating imaginary nodes.  It seems to me that the issue here is how tedious it can be to do this (and the fact that it really becomes a problem with the current C++ framework).  I think it would be nice if ANTLR was capable of automatically handling this case of synthetic or imaginary nodes and I suspect that is what is at issue here.

--
Mike

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From antlr-interest at yahoogroups.com  Tue Nov 11 07:37:53 2003
From: antlr-interest at yahoogroups.com (antlr-interest@yahoogroups.com)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] New file uploaded to antlr-interest
Message-ID: <1068565073.1531.63964.w86@yahoogroups.com>


Hello,

This email message is a notification to let you know that
a file has been uploaded to the Files area of the antlr-interest 
group.

  File        : /ASN1_grammar.zip 
  Uploaded by : v_vivekg <v_vivekg@yahoo.com> 
  Description : Find the Updated ASN.1 Grammar and associated Java Class files. Using these files an ASN.1 grammar can be stored in java objects which can then be used as an input for other applications 

You can access this file at the URL

http://groups.yahoo.com/group/antlr-interest/files/ASN1_grammar.zip 

To learn more about file sharing for your group, please visit

http://help.yahoo.com/help/us/groups/files

Regards,

v_vivekg <v_vivekg@yahoo.com>
 





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue Nov 11 08:07:41 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: Local lookahead depth
Message-ID: <72C9789739C4214096AE945753B11EA3FABA20@mypxmail04.bco-home.com>

> > I seem to remember that pccts allows one to associate
> > user-defined routines with the guess-success and
> > guess-fail so that one can undo or commit depending
> > on the guess outcome.

> Sounds good, but probably would be the source for lots of bugs. My
> dream would be some sort of transaction that simply gets rolled back
> when guessing failes. Although, this will remain a dream for some
> time ;)

The only languages I know of that can roll back are functional languages.
In the world of Java and C++ you'll be stuck doing it yourself.  mark() and
rewind() give you the hooks, almost like guess-success & guess-fail above.
I'm scratching my head about why it isn't just guess-finished (rewind()).
If the guess succeeds the whole thing will be executed again (right Tom?).
ANTLR 3 could be augmented to allow before & after actions for a synpred but
the concern there is that people will use them without understanding what
they are doing.  

Monty

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tmoog at polhode.com  Tue Nov 11 08:24:28 2003
From: tmoog at polhode.com (Tom Moog)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <72C9789739C4214096AE945753B11EA3FABA20@mypxmail04.bco-home.com>
References: <72C9789739C4214096AE945753B11EA3FABA20@mypxmail04.bco-home.com>
Message-ID: <Pine.NEB.4.58.0311111122290.7248@panix5.panix.com>


The out-of-the-box behavior in pccts is just as you
described.  However, in some (very) special cases users
want to undo some side-effect on guess-fail.  This is
a hook which is available to those users.



On Tue, 11 Nov 2003 mzukowski@yci.com wrote:

> > > I seem to remember that pccts allows one to associate
> > > user-defined routines with the guess-success and
> > > guess-fail so that one can undo or commit depending
> > > on the guess outcome.
>
> > Sounds good, but probably would be the source for lots of bugs. My
> > dream would be some sort of transaction that simply gets rolled back
> > when guessing failes. Although, this will remain a dream for some
> > time ;)
>
> The only languages I know of that can roll back are functional languages.
> In the world of Java and C++ you'll be stuck doing it yourself.  mark() and
> rewind() give you the hooks, almost like guess-success & guess-fail above.
> I'm scratching my head about why it isn't just guess-finished (rewind()).
> If the guess succeeds the whole thing will be executed again (right Tom?).
> ANTLR 3 could be augmented to allow before & after actions for a synpred but
> the concern there is that people will use them without understanding what
> they are doing.
>
> Monty
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Tue Nov 11 08:47:57 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <72C9789739C4214096AE945753B11EA3FABA20@mypxmail04.bco-home.com>
References: <72C9789739C4214096AE945753B11EA3FABA20@mypxmail04.bco-home.com>
Message-ID: <3FB112BD.6080807@zeigermann.de>

mzukowski@yci.com wrote:

>>>I seem to remember that pccts allows one to associate
>>>user-defined routines with the guess-success and
>>>guess-fail so that one can undo or commit depending
>>>on the guess outcome.
> 
> 
>>Sounds good, but probably would be the source for lots of bugs. My
>>dream would be some sort of transaction that simply gets rolled back
>>when guessing failes. Although, this will remain a dream for some
>>time ;)
> 
> 
> The only languages I know of that can roll back are functional languages.
> In the world of Java and C++ you'll be stuck doing it yourself.  mark() and
> rewind() give you the hooks, almost like guess-success & guess-fail above.
> I'm scratching my head about why it isn't just guess-finished (rewind()).
> If the guess succeeds the whole thing will be executed again (right Tom?).
> ANTLR 3 could be augmented to allow before & after actions for a synpred but
> the concern there is that people will use them without understanding what
> they are doing.  

I am just wondering. If we had a custom language with ANTLR as Terence 
proposed to be independent of the destination language (Java, C#, C++) I 
really think this sort of transaction behavior could be implemented. I 
am into transactional caching in the moment and the mechanisms seem to 
be quite similar minus concurrent stuff (which is the complex part). 
This means it would be fairly easy if you could controll the way objects 
in your meta-language are accessed. Although, while saying this it 
sounds much more fun to build than actually useful to me.

Comments?

Oliver



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Tue Nov 11 10:05:25 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: AST vs parse trees
In-Reply-To: <bopiir+an02@eGroups.com>
Message-ID: <9FEB024A-1471-11D8-AE6D-000A95891192@cs.usfca.edu>


On Monday, November 10, 2003, at 06:46 PM, micheal_jor wrote:

> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
>
>>> OK. I needed to be clearer. In practical terms, ANTLR neither
>>> generates a CST nor an AST by default. It generates something in
>>> between. Sure the internal rule nodes are missing but, lots of other
>>> noise like semicolons and closing braces are present. Now, they have
>>> their uses (~100% lossless tranformations being one example) but they
>>> still represent noise in an optimized AST.
>>
>> Actually I specifically remove ; and } etc... if you look at the 
>> java.g
>> file.  An AST should have the minimum necessary information in there. 
>> :)
>
> That the point I was making Ter. By default, ANTLR generates trees
> that need "pruning" to get an optimized AST with only the minimum
> neccesary information. Not necessarily a bad thing, as long as the
> pruning can be specified in a action-language-agnostic manner.

Oh. Sorry.  Yeah, you must manually prune.

> Any opinion on the visitor-generation idea/suggestion?

Well, visitor stuff is fine if you don't need a lot of context.  Being 
at node "PLUS" doesn't always tell you enough.  E.g., am I a PLUS node 
in an IF expression or WHILE?

Ter

>
> Cheers,
>
> Micheal
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Tue Nov 11 10:05:50 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] New file uploaded to antlr-interest
In-Reply-To: <1068565073.1531.63964.w86@yahoogroups.com>
Message-ID: <AF00405D-1471-11D8-AE6D-000A95891192@cs.usfca.edu>

This ASN.1 grammar is also at antlr.org.

Ter
On Tuesday, November 11, 2003, at 07:37 AM, 
antlr-interest@yahoogroups.com wrote:

>
> Hello,
>
> This email message is a notification to let you know that
> a file has been uploaded to the Files area of the antlr-interest
> group.
>
>   File        : /ASN1_grammar.zip
>   Uploaded by : v_vivekg <v_vivekg@yahoo.com>
>   Description : Find the Updated ASN.1 Grammar and associated Java 
> Class files. Using these files an ASN.1 grammar can be stored in java 
> objects which can then be used as an input for other applications
>
> You can access this file at the URL
>
> http://groups.yahoo.com/group/antlr-interest/files/ASN1_grammar.zip
>
> To learn more about file sharing for your group, please visit
>
> http://help.yahoo.com/help/us/groups/files
>
> Regards,
>
> v_vivekg <v_vivekg@yahoo.com>
>
>
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Tue Nov 11 10:04:34 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <72C9789739C4214096AE945753B11EA3FABA20@mypxmail04.bco-home.com>; from mzukowski@yci.com on Tue, Nov 11, 2003 at 08:07:41AM -0800
References: <72C9789739C4214096AE945753B11EA3FABA20@mypxmail04.bco-home.com>
Message-ID: <20031111190433.A6272@cs.utwente.nl>

Hi,

On Tue, Nov 11, 2003 at 08:07:41AM -0800, mzukowski@yci.com wrote:
> The only languages I know of that can roll back are functional languages.
> In the world of Java and C++ you'll be stuck doing it yourself.  mark() and
> rewind() give you the hooks, almost like guess-success & guess-fail above.
> I'm scratching my head about why it isn't just guess-finished (rewind()).

You could do some tricks with destructors and local objects in C++, but it
would depend largely on the datastructures used etc. Then again something
like this will always be dependant on the structures you're checking
against because usually these things will be domain specific, so doing
something generic will be somewhat hard i guess.

> If the guess succeeds the whole thing will be executed again (right Tom?).
> ANTLR 3 could be augmented to allow before & after actions for a synpred but
> the concern there is that people will use them without understanding what
> they are doing.  

We could move into the footbandage business ;)

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Quidquid latine dictum sit, altum viditur.
                 (Whatever is said in Latin sounds profound.)


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From brian-l-smith at uiowa.edu  Tue Nov 11 11:04:12 2003
From: brian-l-smith at uiowa.edu (brian-l-smith@uiowa.edu)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: Anyone tried this ANTLR-inspired CC?
In-Reply-To: <6F7AD2AD5765D3118A7A0090278730212A4F6E23@na1fcm06.dearborn.ford.com>
References: <6F7AD2AD5765D3118A7A0090278730212A4F6E23@na1fcm06.dearborn.ford.com>
Message-ID: <1068577452.3fb132ac50cd6@webmail1.its.uiowa.edu>

Quoting "Tiller, Michael (M.M.)" <mtiller@ford.com>:
> > From: Terence Parr [mailto:parrt@cs.usfca.edu]
> > On Sunday, November 9, 2003, at 05:37 PM, leung13512c wrote:
> > 
> > > The thing that caused me to switch away from ANTLR syntax
> > > is because I prefer the tree building syntax of JJTree that always
> > > create imaginary nodes instead of a mix of both.  And it mostly
> > > avoid having to create nodes within actions.
> > 
> > Howdy.  This is the old AST versus parse tree argument...Parse trees 
> > are easy to generate (i.e., no cost to developer) but have 
> > way too much noise for tree transformation and also are sensitive
> > to grammar construction whereas ASTs are the canonical repr for
> > a particular language.
> > 
> > Ter
> 
> Personally, there are two extremes I would like to avoid.  One is using
> terminals as roots in ASTs.  I don't really care for this approach because I
> find it rather strange (just my personal preference).  The other case I
> wouldn't like is having every production rule in my grammar generate a node
> in my AST.  As far as I'm concerned, these are both sub-optimal.

I agree with Mike. I never use ANTLR's AST features because they aren't really
for *abstract* syntax trees--they are really a kind of *concrete* syntax tree
(similarly, parse trees ala JJTree are *concrete* syntax trees). This is easy to
see because the resultant tree is built using elements of the concrete syntax
grammar. An *abstract* syntax tree is independent of the concrete syntax of the
language. In fact, usually I create a syntax-independent domain model of the
language (e.g. with classes representing all the major concepts of the
language), and then create an ANTLR grammar that can parse a syntax that allows
one to express these abstract concepts textually. If you develop a language this
way then the ANTLR "AST" mechanism is basically useless. But, IMO, this is the
most sensible way to develop a language tool, because once you have the domain
model built you can have one team work on the concrete syntax (text -> AST) part
of the project while concurrently another team is working on the semantics (e.g.
AST evaluation, translation). 

Terence made the point that ANTLR's "AST's" are better than JJTree-style parse
trees because the resultant trees are less sensitive to changes in the grammar
used for parsing. But, changes in the concrete syntax of the language, and/or
changes in the grammar used to parse it, still can easily reshape the resultant
"AST" unless one is very careful. But, the AST-first approach completely
isolates all grammar/syntax changes from other parts of the project.

So, I guess what I would like to see is a mechanism for specifying a
syntax-independent ("abstract") domain model of a language, a mechanism for
specifying how to parse concrete textual representations of the language
(grammars), and a mechanism for translating between textual representations and
the abstract domain models (either one-way text -> AST, or bidirectional text
<--> AST).

Regards,
Brian









 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From dm at cs.yorku.ca  Tue Nov 11 11:15:54 2003
From: dm at cs.yorku.ca (Dave Makalsky)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: Anyone tried this ANTLR-inspired CC?
In-Reply-To: <1068577452.3fb132ac50cd6@webmail1.its.uiowa.edu>
References: <6F7AD2AD5765D3118A7A0090278730212A4F6E23@na1fcm06.dearborn.ford.com> <1068577452.3fb132ac50cd6@webmail1.its.uiowa.edu>
Message-ID: <3FB1356A.10908@cs.yorku.ca>

One interesting approach (done by SableCC) is to automatically generate 
a CST and allow for easy CST -> AST transformation.

brian-l-smith@uiowa.edu wrote:

>Quoting "Tiller, Michael (M.M.)" <mtiller@ford.com>:
>  
>
>>>From: Terence Parr [mailto:parrt@cs.usfca.edu]
>>>On Sunday, November 9, 2003, at 05:37 PM, leung13512c wrote:
>>>
>>>      
>>>
>>>>The thing that caused me to switch away from ANTLR syntax
>>>>is because I prefer the tree building syntax of JJTree that always
>>>>create imaginary nodes instead of a mix of both.  And it mostly
>>>>avoid having to create nodes within actions.
>>>>        
>>>>
>>>Howdy.  This is the old AST versus parse tree argument...Parse trees 
>>>are easy to generate (i.e., no cost to developer) but have 
>>>way too much noise for tree transformation and also are sensitive
>>>to grammar construction whereas ASTs are the canonical repr for
>>>a particular language.
>>>
>>>Ter
>>>      
>>>
>>Personally, there are two extremes I would like to avoid.  One is using
>>terminals as roots in ASTs.  I don't really care for this approach because I
>>find it rather strange (just my personal preference).  The other case I
>>wouldn't like is having every production rule in my grammar generate a node
>>in my AST.  As far as I'm concerned, these are both sub-optimal.
>>    
>>
>
>I agree with Mike. I never use ANTLR's AST features because they aren't really
>for *abstract* syntax trees--they are really a kind of *concrete* syntax tree
>(similarly, parse trees ala JJTree are *concrete* syntax trees). This is easy to
>see because the resultant tree is built using elements of the concrete syntax
>grammar. An *abstract* syntax tree is independent of the concrete syntax of the
>language. In fact, usually I create a syntax-independent domain model of the
>language (e.g. with classes representing all the major concepts of the
>language), and then create an ANTLR grammar that can parse a syntax that allows
>one to express these abstract concepts textually. If you develop a language this
>way then the ANTLR "AST" mechanism is basically useless. But, IMO, this is the
>most sensible way to develop a language tool, because once you have the domain
>model built you can have one team work on the concrete syntax (text -> AST) part
>of the project while concurrently another team is working on the semantics (e.g.
>AST evaluation, translation). 
>
>Terence made the point that ANTLR's "AST's" are better than JJTree-style parse
>trees because the resultant trees are less sensitive to changes in the grammar
>used for parsing. But, changes in the concrete syntax of the language, and/or
>changes in the grammar used to parse it, still can easily reshape the resultant
>"AST" unless one is very careful. But, the AST-first approach completely
>isolates all grammar/syntax changes from other parts of the project.
>
>So, I guess what I would like to see is a mechanism for specifying a
>syntax-independent ("abstract") domain model of a language, a mechanism for
>specifying how to parse concrete textual representations of the language
>(grammars), and a mechanism for translating between textual representations and
>the abstract domain models (either one-way text -> AST, or bidirectional text
><--> AST).
>
>Regards,
>Brian
>
>
>
>
>
>
>
>
>
> 
>
>Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
>
>  
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Tue Nov 11 11:39:35 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: Anyone tried this ANTLR-inspired CC?
In-Reply-To: <1068577452.3fb132ac50cd6@webmail1.its.uiowa.edu>
References: <6F7AD2AD5765D3118A7A0090278730212A4F6E23@na1fcm06.dearborn.ford.com> <1068577452.3fb132ac50cd6@webmail1.its.uiowa.edu>
Message-ID: <3FB13AF7.2010802@zeigermann.de>

I think what Brian says is very reasonable given his type of 
application. His view concentrates on the semantics expressed by the 
design of his AST which is also implied in text disguised by synatx. Now 
, this syntax can change, semantics and thus AST remain the same.

However, your application could also be translaton from one language to 
another with a different syntax, but identical or only slightly 
different semantics. If this translation is complex it is very 
convenient to do this in more than one step using ANTLR tree 
transformation. In this scenario ANTLR-ASTs are the best you get. You 
have full control over what nodes are copied, deleted or moved. 
Remember, you can also do successive ANTLR-AST to ANTLR-AST 
transformations by which you can refine what you want in a convenient 
way. Finally, you can dump the whole ANTLR-AST to your destination 
syntax. I have done this very successfully with XML data that fits 
perfectly in ANTLR-ASTs.

Oliver

brian-l-smith@uiowa.edu wrote:
> Quoting "Tiller, Michael (M.M.)" <mtiller@ford.com>:
> 
>>>From: Terence Parr [mailto:parrt@cs.usfca.edu]
>>>On Sunday, November 9, 2003, at 05:37 PM, leung13512c wrote:
>>>
>>>
>>>>The thing that caused me to switch away from ANTLR syntax
>>>>is because I prefer the tree building syntax of JJTree that always
>>>>create imaginary nodes instead of a mix of both.  And it mostly
>>>>avoid having to create nodes within actions.
>>>
>>>Howdy.  This is the old AST versus parse tree argument...Parse trees 
>>>are easy to generate (i.e., no cost to developer) but have 
>>>way too much noise for tree transformation and also are sensitive
>>>to grammar construction whereas ASTs are the canonical repr for
>>>a particular language.
>>>
>>>Ter
>>
>>Personally, there are two extremes I would like to avoid.  One is using
>>terminals as roots in ASTs.  I don't really care for this approach because I
>>find it rather strange (just my personal preference).  The other case I
>>wouldn't like is having every production rule in my grammar generate a node
>>in my AST.  As far as I'm concerned, these are both sub-optimal.
> 
> 
> I agree with Mike. I never use ANTLR's AST features because they aren't really
> for *abstract* syntax trees--they are really a kind of *concrete* syntax tree
> (similarly, parse trees ala JJTree are *concrete* syntax trees). This is easy to
> see because the resultant tree is built using elements of the concrete syntax
> grammar. An *abstract* syntax tree is independent of the concrete syntax of the
> language. In fact, usually I create a syntax-independent domain model of the
> language (e.g. with classes representing all the major concepts of the
> language), and then create an ANTLR grammar that can parse a syntax that allows
> one to express these abstract concepts textually. If you develop a language this
> way then the ANTLR "AST" mechanism is basically useless. But, IMO, this is the
> most sensible way to develop a language tool, because once you have the domain
> model built you can have one team work on the concrete syntax (text -> AST) part
> of the project while concurrently another team is working on the semantics (e.g.
> AST evaluation, translation). 
> 
> Terence made the point that ANTLR's "AST's" are better than JJTree-style parse
> trees because the resultant trees are less sensitive to changes in the grammar
> used for parsing. But, changes in the concrete syntax of the language, and/or
> changes in the grammar used to parse it, still can easily reshape the resultant
> "AST" unless one is very careful. But, the AST-first approach completely
> isolates all grammar/syntax changes from other parts of the project.
> 
> So, I guess what I would like to see is a mechanism for specifying a
> syntax-independent ("abstract") domain model of a language, a mechanism for
> specifying how to parse concrete textual representations of the language
> (grammars), and a mechanism for translating between textual representations and
> the abstract domain models (either one-way text -> AST, or bidirectional text
> <--> AST).
> 
> Regards,
> Brian
> 
> 
> 
> 
> 
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Tue Nov 11 11:46:50 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: Anyone tried this ANTLR-inspired CC?
In-Reply-To: <6F7AD2AD5765D3118A7A0090278730212A4F6E23@na1fcm06.dearborn.ford.com>
Message-ID: <boreba+kl5s@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Tiller, Michael (M.M.)" <mtiller@f...> wrote:
...
> Personally, there are two extremes I would like to avoid.  One is using terminals as roots in ASTs.  I don't really care for this 
approach because I find it rather strange (just my personal preference).  The other case I wouldn't like is having every production rule 
in my grammar generate a node in my AST.  As far as I'm concerned, these are both sub-optimal.
> 
> In practice, ANTLR tends to fall into the former category and I guess JJTree probably falls into the latter.  Now ANLTR is obviously 
capable of avoiding this use of terminals for roots by creating imaginary nodes.  It seems to me that the issue here is how tedious it 
can be to do this (and the fact that it really becomes a problem with the current C++ framework).  I think it would be nice if ANTLR 
was capable of automatically handling this case of synthetic or imaginary nodes and I suspect that is what is at issue here.

Mike--

If you are doing little or no transformation, then parse trees are convenient because the parser grammar specifies how the input is to 
be interpreted.  If you are doing transformation, then the non-terminals in a parse tree serve to "remember" the input (parser) grammar 
and quite often impede the transformation process.  Imaginary nodes are fine, if they make sense in the output grammar, but should 
not be inserted will he/nill he and are best avoided unless they make either make sense in the output grammar or simplify 
recognition (avoid syntactic predicates in the tree walker grammar).  Another way of saying this is that imaginary nodes should reflect 
output semantics, not input semantics.

Ter's primary innovations with SORCERER (tree walkers) were 1.) the idea of specifying tree construction from annotation of the 
parser grammar, and 2.)  tree walker grammars to recognize transformation stages.  Prior to that, parse trees were the rule; if you 
look through the literature, you can see that the thinking was "generate output from the parse tree" directly and most of the machinery 
is awkward to use and limited in capability because it attempts to do things in one pass.

Where parse trees have value is as an output form.  You can print directly from a parse tree, and you can feed parse trees to compute 
engines that expect one.  At the moment, for example, I'm using ANTLR to take an input expression language and convert it into a 
parse tree for use with the Python compiler routines.

As to the "imaginary" versus parser-terminal roots:  my experience is that there is usually enough syntactic sugar in 
languages--parentheses on function calls, for example--to use an existing token as a root, possibly changing its text and token type.  
An important design criterion for tree construction during transformation is to remove extraneous elements ("noise"), not to add new 
ones, so caution is necessary in inserting imaginary nodes..

I am inclined to support parse tree construction in 2.8 because of their value as an output form.  That way, I can automatically 
generate the parse tree grammar for an output language and use that as a target for transformation of an input language grammar.

--Loring

> --
> Mike


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mtiller at ford.com  Tue Nov 11 11:54:22 2003
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: Anyone tried this ANTLR-inspired CC?
Message-ID: <6F7AD2AD5765D3118A7A0090278730212A4F6E29@na1fcm06.dearborn.ford.com>



> -----Original Message-----
> From: Oliver Zeigermann [mailto:oliver@zeigermann.de]
> Sent: Tuesday, November 11, 2003 2:40 PM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] Re: Anyone tried this ANTLR-inspired CC?
> 
> 
> I think what Brian says is very reasonable given his type of 
> application. His view concentrates on the semantics expressed by the 
> design of his AST which is also implied in text disguised by 
> synatx. Now 
> , this syntax can change, semantics and thus AST remain the same.
> 
> However, your application could also be translaton from one 
> language to 
> another with a different syntax, but identical or only slightly 
> different semantics. If this translation is complex it is very 
> convenient to do this in more than one step using ANTLR tree 
> transformation. In this scenario ANTLR-ASTs are the best you get. You 
> have full control over what nodes are copied, deleted or moved. 
> Remember, you can also do successive ANTLR-AST to ANTLR-AST 
> transformations by which you can refine what you want in a convenient 
> way. Finally, you can dump the whole ANTLR-AST to your destination 
> syntax. I have done this very successfully with XML data that fits 
> perfectly in ANTLR-ASTs.
> 
> Oliver

Just to be clear, I was not proposing that we get rid of anything ANTLR
currently does.  It seems clear from the responses that some people want
abstract syntax trees while others (doing transformation work) want to keep
trees that are much closer to the specific syntax.

All I mentioned was better support for automatic handling of imaginary nodes
so that I could define my AST node types a priori and still have ANTLR build
things up the right way.

--
Mike

> 
> brian-l-smith@uiowa.edu wrote:
> > Quoting "Tiller, Michael (M.M.)" <mtiller@ford.com>:
> > 
> >>>From: Terence Parr [mailto:parrt@cs.usfca.edu]
> >>>On Sunday, November 9, 2003, at 05:37 PM, leung13512c wrote:
> >>>
> >>>
> >>>>The thing that caused me to switch away from ANTLR syntax
> >>>>is because I prefer the tree building syntax of JJTree that always
> >>>>create imaginary nodes instead of a mix of both.  And it mostly
> >>>>avoid having to create nodes within actions.
> >>>
> >>>Howdy.  This is the old AST versus parse tree 
> argument...Parse trees 
> >>>are easy to generate (i.e., no cost to developer) but have 
> >>>way too much noise for tree transformation and also are sensitive
> >>>to grammar construction whereas ASTs are the canonical repr for
> >>>a particular language.
> >>>
> >>>Ter
> >>
> >>Personally, there are two extremes I would like to avoid.  
> One is using
> >>terminals as roots in ASTs.  I don't really care for this 
> approach because I
> >>find it rather strange (just my personal preference).  The 
> other case I
> >>wouldn't like is having every production rule in my grammar 
> generate a node
> >>in my AST.  As far as I'm concerned, these are both sub-optimal.
> > 
> > 
> > I agree with Mike. I never use ANTLR's AST features because 
> they aren't really
> > for *abstract* syntax trees--they are really a kind of 
> *concrete* syntax tree
> > (similarly, parse trees ala JJTree are *concrete* syntax 
> trees). This is easy to
> > see because the resultant tree is built using elements of 
> the concrete syntax
> > grammar. An *abstract* syntax tree is independent of the 
> concrete syntax of the
> > language. In fact, usually I create a syntax-independent 
> domain model of the
> > language (e.g. with classes representing all the major 
> concepts of the
> > language), and then create an ANTLR grammar that can parse 
> a syntax that allows
> > one to express these abstract concepts textually. If you 
> develop a language this
> > way then the ANTLR "AST" mechanism is basically useless. 
> But, IMO, this is the
> > most sensible way to develop a language tool, because once 
> you have the domain
> > model built you can have one team work on the concrete 
> syntax (text -> AST) part
> > of the project while concurrently another team is working 
> on the semantics (e.g.
> > AST evaluation, translation). 
> > 
> > Terence made the point that ANTLR's "AST's" are better than 
> JJTree-style parse
> > trees because the resultant trees are less sensitive to 
> changes in the grammar
> > used for parsing. But, changes in the concrete syntax of 
> the language, and/or
> > changes in the grammar used to parse it, still can easily 
> reshape the resultant
> > "AST" unless one is very careful. But, the AST-first 
> approach completely
> > isolates all grammar/syntax changes from other parts of the project.
> > 
> > So, I guess what I would like to see is a mechanism for specifying a
> > syntax-independent ("abstract") domain model of a language, 
> a mechanism for
> > specifying how to parse concrete textual representations of 
> the language
> > (grammars), and a mechanism for translating between textual 
> representations and
> > the abstract domain models (either one-way text -> AST, or 
> bidirectional text
> > <--> AST).
> > 
> > Regards,
> > Brian
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 
> 
> 
> 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Tue Nov 11 11:58:08 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: Anyone tried this ANTLR-inspired CC?
In-Reply-To: <6F7AD2AD5765D3118A7A0090278730212A4F6E29@na1fcm06.dearborn.ford.com>
References: <6F7AD2AD5765D3118A7A0090278730212A4F6E29@na1fcm06.dearborn.ford.com>
Message-ID: <3FB13F50.3060806@zeigermann.de>

Tiller, Michael (M.M.) wrote:
> Just to be clear, I was not proposing that we get rid of anything ANTLR
> currently does.  It seems clear from the responses that some people want
> abstract syntax trees while others (doing transformation work) want to keep
> trees that are much closer to the specific syntax.
> 
> All I mentioned was better support for automatic handling of imaginary nodes
> so that I could define my AST node types a priori and still have ANTLR build
> things up the right way.

I agree absolutely, this would be a very nice feature! I just wanted to 
show another field of application where ANTLR-ASTs work fine :)

Oliver



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From joshua.davis at kiodex.com  Tue Nov 11 16:23:12 2003
From: joshua.davis at kiodex.com (Joshua Davis)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: SQL grammar tree construction problem
In-Reply-To: <boi4tk+cg2h@eGroups.com>
Message-ID: <boruhg+tn3l@eGroups.com>

Just a quick follow up.  The Parser did not build an AST because the 
rule that had fired did not specify which token should be the root of 
the sub-tree.  For example:

fromClause : FROM identifier (AS identifier)?

The AST builder seems to require that one of the tokens be designated 
as the root.  I changed it to:

fromClause : FROM^ identifier (AS identifier)?

and it worked.

--- In antlr-interest@yahoogroups.com, "Joshua Davis" 
<joshua.davis@k...> wrote:
> My example is even simpler.  It's *supposed* to generate a node for 
> every rule if the buildAST is set to true isn't it?  I was under 
the 
> impression that explicitly creating nodes is not necessary if 
> buildAST is enabled.
> 
> --- In antlr-interest@yahoogroups.com, Gustav Bostr?m 
<i93gusbo@h...> 
> wrote:
> > Hi!
> > 
> > Thanks for the help!
> > 
> > I think I'm trying the same thing as you, but also without luck.
> > I try to do:
> > sql_stmt : 
> > 	  sql_data_stmt  { #sql_stmt = #([SQL_STMT,"sql_stmt"], 
> > #sql_stmt); }
> > 
> > , but I never find this node in the tree. The code seems to be 
> > generated, but has no effect. Could it be that no root node is 
ever 
> > created?
> > 
> > I also tried this:
> > sql_script : 
> > 	 (sql_stmt)? { #sql_script = #
> > ([Token.MIN_USER_TYPE,"sql_script"], #sql_script); } ( SEMICOLON 
> > (sql_stmt)? )*
> > 
> > "sql_script" is the first rule and now a node is in fact created, 
> but 
> > it has no children. I thought that all the subsequent nodes would 
> be 
> > added as children automatically.
> > 
> > Qoute from doc:
> > "Setting the return tree is very useful in combination with 
normal 
> > tree construction because you can have ANTLR do all the work of 
> > building a tree and then add an imaginary root node such as: 
> >   
> > decl : ( TYPE ID )+
> >        { #decl = #([DECL,"decl"], #decl); }
> >      ;
> > ANTLR allows you to assign to #rule anywhere within an 
alternative 
> of 
> > the rule. ANTLR ensures that references of and assignments to 
#rule 
> > within an action force the parser's internal AST construction 
> > variables into a stable state. After you assign to #rule, the 
state 
> > of the parser's automatic AST construction variables will be set 
as 
> > if ANTLR had generated the tree rooted at #rule. For example, any 
> > children nodes added after the action will be added to the 
children 
> > of #rule." 
> >  
> > This is exactly what I want, but I must be doing something wrong.
> > 
> > 
> > 
> > /Gustav
> > 
> > 
> > 
> > --- In antlr-interest@yahoogroups.com, "Joshua Davis" 
> > <joshua.davis@k...> wrote:
> > > ANTLR newbie question:
> > > 
> > > I've been having a similar problem I think.  I made a very 
simple 
> > > grammar based on L. V.'s grammar.   It seems to be always 
> producing 
> > > only one root node, with no children.  What steps should I take 
> to 
> > > debug this?  I have tried adding actions to the rules, and it 
> looks 
> > > like the rules are being triggered correctly, but no AST is 
> > produced.
> > > 
> > > --- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> 
> wrote:
> > > > Gustav--
> > > > 
> > > > You cannot make a rule a root--that's what ANTLR is 
complaining 
> > > about. 
> > > >  Rules may represent subtrees, so only nodes with token ids 
> (TEXT 
> > > or 
> > > > STRING, for example) can be followed with ^.
> > > > 
> > > > --Loring
> > > > 
> > > > 
> > > > --- In antlr-interest@yahoogroups.com, Gustav Bostr?m 
> > > <i93gusbo@h...> 
> > > > wrote:
> > > > > Hello!
> > > > > 
> > > > > I'm trying to use Lubos Vnuk's (Thanks for doing all the 
> work!) 
> > > SQL-
> > > > > grammar in order to do some 
> > > > > processing on SQL-statments. I would for example like to 
find 
> > out 
> > > > > which columns are affected by a DML-statement and which 
> > > parameters 
> > > > > correspond to which columns.
> > > > > 
> > > > > I'm doing this is in Java , so I've changed the grammar 
> > slightly.
> > > > > I've removed the C++ actions or replaced them with Java 
> > versions.
> > > > > 
> > > > > My thought was to add AST-construction and then navigate 
the 
> > tree 
> > > to 
> > > > > find out the stuff I need. This is where I run into 
problems.
> > > > > I tried to annotate the rules with ^ to construct my tree, 
> but 
> > it 
> > > > > keeps giving me "unexpected token:^" when I try to dothis 
for 
> > > > example:
> > > > > sql_stmt : 
> > > > > 	  sql_data_stmt^ 
> > > > > ;
> > > > > 
> > > > > I've set the options to buildAST=true;
> > > > > I'm using version 2.7.2.
> > > > > 
> > > > > Any ideas on what can be wrong?
> > > > > 
> > > > > Cheers,
> > > > > 
> > > > > Gustav Bostr?m


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tzagotta1 at sienasystems.com  Tue Nov 11 19:49:56 2003
From: tzagotta1 at sienasystems.com (Tom Zagotta)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Anal Masterbation Demonstrated by 18 year olds
In-Reply-To: <bosa7v+bra7@eGroups.com>
Message-ID: <200311120346.VAA13783@coral.propagation.net>

Dear Group,

Please take a few minutes and write an e-mail to Yahoo, asking them to
install software that would automatically block content like this posting.

Here is a good place to start:

http://add.yahoo.com/fast/help/us/groups/cgi_abuse

Thanks,

- Tom


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Wed Nov 12 10:43:02 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] spam
In-Reply-To: <200311120346.VAA13783@coral.propagation.net>
Message-ID: <0BB2908D-1540-11D8-99AD-000A95891192@cs.usfca.edu>

I try to delete these people, but they reappear as another email 
address...perhaps I should make it so I have to verify all new users?  
Not sure that would even help... :(

Ter
On Tuesday, November 11, 2003, at 07:49 PM, Tom Zagotta wrote:

> Dear Group,
>
> Please take a few minutes and write an e-mail to Yahoo, asking them to
> install software that would automatically block content like this 
> posting.
>
> Here is a good place to start:
>
> http://add.yahoo.com/fast/help/us/groups/cgi_abuse
>
> Thanks,
>
> - Tom
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From kevthefree at yahoo.com.hk  Wed Nov 12 15:34:33 2003
From: kevthefree at yahoo.com.hk (kevthefree)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Parser question
Message-ID: <boug29+g31i@eGroups.com>

Hi all,

I am completely new to ANTLR, I am trying to write a parser with lexer
in ANTLR to parse a basic C function.

What do I need to do to check whether a parse has been succeed? (I
pipe a test text file which contains a c function and it seems to
return to the prompt without any exception, is that a success parse?)
I don't know much about ANTLR.

Any help would be appreciated




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From kevthefree at yahoo.com.hk  Wed Nov 12 15:28:10 2003
From: kevthefree at yahoo.com.hk (kevthefree)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Newbie question
Message-ID: <boufma+io1h@eGroups.com>

Hi all,

Can anyone tell me where can I find a good tutorial of ANTLR please...

Thx




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From JVincent at Novell.Com  Wed Nov 12 15:22:51 2003
From: JVincent at Novell.Com (Jeff Vincent)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] spam
Message-ID: <sfb25e66.034@prv-mail20.provo.novell.com>

I believe it would help...you'd just be busy trying to determine if the
new users are legit or not ;).

>>> parrt@cs.usfca.edu 11/12/2003 11:43:02 AM >>>
I try to delete these people, but they reappear as another email 
address...perhaps I should make it so I have to verify all new users? 

Not sure that would even help... :(

Ter
On Tuesday, November 11, 2003, at 07:49 PM, Tom Zagotta wrote:

> Dear Group,
>
> Please take a few minutes and write an e-mail to Yahoo, asking them
to
> install software that would automatically block content like this 
> posting.
>
> Here is a good place to start:
>
> http://add.yahoo.com/fast/help/us/groups/cgi_abuse
>
> Thanks,
>
> - Tom
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing






Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031112/d8f2f200/attachment.html
From parrt at cs.usfca.edu  Wed Nov 12 16:02:59 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] just added a template engine paper to antlr.org
Message-ID: <BDD953DF-156C-11D8-99AD-000A95891192@cs.usfca.edu>

Folks,

I just submitted a paper to the WWW 2004 conference entitled, 
"Enforcing Model-View Separation in Template Engines".  It's on the 
article list page:

http://www.antlr.org/article/list

Enclosed is the abstract that says it all.  Soon, I'll be applying this 
stuff to ANTLR work.  I already have seen StringTemplate do cool stuff 
for building ANTLR 3 code generators :)

Terence

ABSTRACT
The mantra of every experienced web application developer is the same: 
"thou shalt separate business logic from display."  Ironically, almost 
all template engines allow violation of this separation principle, 
which is the very impetus for HTML template engine development. This 
situation is due mostly to a lack of formal definition of separation 
and fear that enforcing separation emasculates a template's power.  I 
show that not only is strict separation a worthy design principle, but 
that you can enforce separation while providing a potent template 
engine.  I demonstrate my StringTemplate engine, used to build 
jGuru.com and other commercial sites, at work solving some nontrivial 
generational tasks

My goal is to formalize the study of template engines, thus, providing 
a common nomenclature, a means of classifying template generational 
power, and a way to leverage interesting results from formal language 
theory.  I classify three types of restricted templates analogous to 
Chomsky's type 1..3 grammar classes and formally define separation 
including the rules that embody separation.

Because this paper provides a clear definition of model-view 
separation, template engine designers may no longer blindly claim 
enforcement of separation.  Moreover, given theoretical arguments and 
empirical evidence, programmers no longer have an excuse to entangle 
model-view.
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From kevthefree at yahoo.com.hk  Wed Nov 12 16:07:25 2003
From: kevthefree at yahoo.com.hk (kevthefree)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: Newbie question
In-Reply-To: <bough6+38c0@eGroups.com>
Message-ID: <bouhvt+ih53@eGroups.com>

--- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...>
wrote:
> --- In antlr-interest@yahoogroups.com, "kevthefree" <kevthefree@y...>
> wrote:
> > Hi all,
> > 
> > Can anyone tell me where can I find a good tutorial of ANTLR please...
> > 
> 
> The ANTLR homepage is a goos place to start - www.antlr.org
> 
> Try the "Getting Started" link in the documentation section:
>    http://www.antlr.org/doc/getting-started.html
> 
> Cheers,
> 
> Micheal

I have looked at it, but it really doesn't help me at all...
I don't quite get how to verify a parse is success or not... 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From kevthefree at yahoo.com.hk  Wed Nov 12 16:10:41 2003
From: kevthefree at yahoo.com.hk (kevthefree)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: Parser question
In-Reply-To: <bouhsk+lp5p@eGroups.com>
Message-ID: <boui61+k21l@eGroups.com>

--- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...>
wrote:
> --- In antlr-interest@yahoogroups.com, "kevthefree" <kevthefree@y...>
> wrote:
> > Hi all,
> > 
> > I am completely new to ANTLR, I am trying to write a parser with lexer
> > in ANTLR to parse a basic C function.
> > 
> > What do I need to do to check whether a parse has been succeed? (I
> > pipe a test text file which contains a c function and it seems to
> > return to the prompt without any exception, is that a success parse?)
> > I don't know much about ANTLR.
> > 
> > Any help would be appreciated
> 
> Kevin,
> 

Oh, sorry, I didn't read this message when I sent the other one, thank
you very much for your help, really appreciated it ^_^
Could you send me your e-mail address just in case I have further
questions??


> Your message suggests that you know enough about ANTLR to have built a
> candidate grammar for your project. So, you could:
> a) ensure that the grammar builds a tree
>    http://www.antlr.org/doc/options.html#_bb12
> b) use the getAST() method of the parser to get the tree after parsing
> c) use one of the toStringList()/toStringTree() methods to print the
tree.
> d) compare the tree to what you expected your grammar to generate for
> the given input
> 
> See the comments in the test.g of the ASTSupport example for more info
> on ANTLR trees, visualization and tree notation.
> 
> This article might help too: 
>    http://www.cs.usfca.edu/~parrt/course/652/lectures/antlr.html
> 
> You can find more tutorials here:
>    http://www.antlr.org/doc/getting-started.html
> 
> Cheers,
> 
> Micheal
> ANTLR/C#
> 
> PS   For more advanced visualization, have a look at the ASTFrame
> class (only available for C# and Java output). The java grammar sample
> uses this class to display the AST.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Wed Nov 12 15:42:30 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: Newbie question
In-Reply-To: <boufma+io1h@eGroups.com>
Message-ID: <bough6+38c0@eGroups.com>

--- In antlr-interest@yahoogroups.com, "kevthefree" <kevthefree@y...>
wrote:
> Hi all,
> 
> Can anyone tell me where can I find a good tutorial of ANTLR please...
> 

The ANTLR homepage is a goos place to start - www.antlr.org

Try the "Getting Started" link in the documentation section:
   http://www.antlr.org/doc/getting-started.html

Cheers,

Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Wed Nov 12 16:05:40 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: Parser question
In-Reply-To: <boug29+g31i@eGroups.com>
Message-ID: <bouhsk+lp5p@eGroups.com>

--- In antlr-interest@yahoogroups.com, "kevthefree" <kevthefree@y...>
wrote:
> Hi all,
> 
> I am completely new to ANTLR, I am trying to write a parser with lexer
> in ANTLR to parse a basic C function.
> 
> What do I need to do to check whether a parse has been succeed? (I
> pipe a test text file which contains a c function and it seems to
> return to the prompt without any exception, is that a success parse?)
> I don't know much about ANTLR.
> 
> Any help would be appreciated

Kevin,

Your message suggests that you know enough about ANTLR to have built a
candidate grammar for your project. So, you could:
a) ensure that the grammar builds a tree
   http://www.antlr.org/doc/options.html#_bb12
b) use the getAST() method of the parser to get the tree after parsing
c) use one of the toStringList()/toStringTree() methods to print the tree.
d) compare the tree to what you expected your grammar to generate for
the given input

See the comments in the test.g of the ASTSupport example for more info
on ANTLR trees, visualization and tree notation.

This article might help too: 
   http://www.cs.usfca.edu/~parrt/course/652/lectures/antlr.html

You can find more tutorials here:
   http://www.antlr.org/doc/getting-started.html

Cheers,

Micheal
ANTLR/C#

PS   For more advanced visualization, have a look at the ASTFrame
class (only available for C# and Java output). The java grammar sample
uses this class to display the AST.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tom at psy.unsw.edu.au  Wed Nov 12 16:38:07 2003
From: tom at psy.unsw.edu.au (Thomas Brandon)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: SQL grammar tree construction problem
In-Reply-To: <boruhg+tn3l@eGroups.com>
Message-ID: <boujpf+g2ut@eGroups.com>

Not sure that this is the problem but...
I don't think Antlr requires rooted trees. Without a root it should 
just generate a sequence of tokens. However, the ASTFrame does 
require a single root, if you have multiple roots it only displays 
the first one. So, if the problem is with ASTFrame you might try one 
of the AST print functions and see if that gives the same output.
If that is the problem then ASTFrame can be patched to add a hidden 
root node or you can add a root node to your grammar.

Tom.
--- In antlr-interest@yahoogroups.com, "Joshua Davis" 
<joshua.davis@k...> wrote:
> Just a quick follow up.  The Parser did not build an AST because 
the 
> rule that had fired did not specify which token should be the root 
of 
> the sub-tree.  For example:
> 
> fromClause : FROM identifier (AS identifier)?
> 
> The AST builder seems to require that one of the tokens be 
designated 
> as the root.  I changed it to:
> 
> fromClause : FROM^ identifier (AS identifier)?
> 
> and it worked.
> 
> --- In antlr-interest@yahoogroups.com, "Joshua Davis" 
> <joshua.davis@k...> wrote:
> > My example is even simpler.  It's *supposed* to generate a node 
for 
> > every rule if the buildAST is set to true isn't it?  I was under 
> the 
> > impression that explicitly creating nodes is not necessary if 
> > buildAST is enabled.
> > 
> > --- In antlr-interest@yahoogroups.com, Gustav Bostr?m 
> <i93gusbo@h...> 
> > wrote:
> > > Hi!
> > > 
> > > Thanks for the help!
> > > 
> > > I think I'm trying the same thing as you, but also without 
luck.
> > > I try to do:
> > > sql_stmt : 
> > > 	  sql_data_stmt  { #sql_stmt = #([SQL_STMT,"sql_stmt"], 
> > > #sql_stmt); }
> > > 
> > > , but I never find this node in the tree. The code seems to be 
> > > generated, but has no effect. Could it be that no root node is 
> ever 
> > > created?
> > > 
> > > I also tried this:
> > > sql_script : 
> > > 	 (sql_stmt)? { #sql_script = #
> > > ([Token.MIN_USER_TYPE,"sql_script"], #sql_script); } ( 
SEMICOLON 
> > > (sql_stmt)? )*
> > > 
> > > "sql_script" is the first rule and now a node is in fact 
created, 
> > but 
> > > it has no children. I thought that all the subsequent nodes 
would 
> > be 
> > > added as children automatically.
> > > 
> > > Qoute from doc:
> > > "Setting the return tree is very useful in combination with 
> normal 
> > > tree construction because you can have ANTLR do all the work 
of 
> > > building a tree and then add an imaginary root node such as: 
> > >   
> > > decl : ( TYPE ID )+
> > >        { #decl = #([DECL,"decl"], #decl); }
> > >      ;
> > > ANTLR allows you to assign to #rule anywhere within an 
> alternative 
> > of 
> > > the rule. ANTLR ensures that references of and assignments to 
> #rule 
> > > within an action force the parser's internal AST construction 
> > > variables into a stable state. After you assign to #rule, the 
> state 
> > > of the parser's automatic AST construction variables will be 
set 
> as 
> > > if ANTLR had generated the tree rooted at #rule. For example, 
any 
> > > children nodes added after the action will be added to the 
> children 
> > > of #rule." 
> > >  
> > > This is exactly what I want, but I must be doing something 
wrong.
> > > 
> > > 
> > > 
> > > /Gustav
> > > 
> > > 
> > > 
> > > --- In antlr-interest@yahoogroups.com, "Joshua Davis" 
> > > <joshua.davis@k...> wrote:
> > > > ANTLR newbie question:
> > > > 
> > > > I've been having a similar problem I think.  I made a very 
> simple 
> > > > grammar based on L. V.'s grammar.   It seems to be always 
> > producing 
> > > > only one root node, with no children.  What steps should I 
take 
> > to 
> > > > debug this?  I have tried adding actions to the rules, and 
it 
> > looks 
> > > > like the rules are being triggered correctly, but no AST is 
> > > produced.
> > > > 
> > > > --- In antlr-interest@yahoogroups.com, "lgcraymer" 
<lgc@m...> 
> > wrote:
> > > > > Gustav--
> > > > > 
> > > > > You cannot make a rule a root--that's what ANTLR is 
> complaining 
> > > > about. 
> > > > >  Rules may represent subtrees, so only nodes with token 
ids 
> > (TEXT 
> > > > or 
> > > > > STRING, for example) can be followed with ^.
> > > > > 
> > > > > --Loring
> > > > > 
> > > > > 
> > > > > --- In antlr-interest@yahoogroups.com, Gustav Bostr?m 
> > > > <i93gusbo@h...> 
> > > > > wrote:
> > > > > > Hello!
> > > > > > 
> > > > > > I'm trying to use Lubos Vnuk's (Thanks for doing all the 
> > work!) 
> > > > SQL-
> > > > > > grammar in order to do some 
> > > > > > processing on SQL-statments. I would for example like to 
> find 
> > > out 
> > > > > > which columns are affected by a DML-statement and which 
> > > > parameters 
> > > > > > correspond to which columns.
> > > > > > 
> > > > > > I'm doing this is in Java , so I've changed the grammar 
> > > slightly.
> > > > > > I've removed the C++ actions or replaced them with Java 
> > > versions.
> > > > > > 
> > > > > > My thought was to add AST-construction and then navigate 
> the 
> > > tree 
> > > > to 
> > > > > > find out the stuff I need. This is where I run into 
> problems.
> > > > > > I tried to annotate the rules with ^ to construct my 
tree, 
> > but 
> > > it 
> > > > > > keeps giving me "unexpected token:^" when I try to 
dothis 
> for 
> > > > > example:
> > > > > > sql_stmt : 
> > > > > > 	  sql_data_stmt^ 
> > > > > > ;
> > > > > > 
> > > > > > I've set the options to buildAST=true;
> > > > > > I'm using version 2.7.2.
> > > > > > 
> > > > > > Any ideas on what can be wrong?
> > > > > > 
> > > > > > Cheers,
> > > > > > 
> > > > > > Gustav Bostr?m


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Wed Nov 12 16:11:08 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: spam
In-Reply-To: <0BB2908D-1540-11D8-99AD-000A95891192@cs.usfca.edu>
Message-ID: <boui6s+rm6g@eGroups.com>

Ter--

Actually, I think that the "moderate new users" setting might help--I can't see these idiots having enough technical savvy to post an 
inocuous message that doesn't raise red flags.  Besides, they are in gross violation of yahoo policy to begin with:  all of  the porn 
spam that I have bothered to check refers to the eroticy site, and I'm surprised that yahoo has not taken legal action by now--we can't 
be the only group affected by this noise.

--Loring


--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> I try to delete these people, but they reappear as another email 
> address...perhaps I should make it so I have to verify all new users?  
> Not sure that would even help... :(
> 
> Ter
> On Tuesday, November 11, 2003, at 07:49 PM, Tom Zagotta wrote:
> 
> > Dear Group,
> >
> > Please take a few minutes and write an e-mail to Yahoo, asking them to
> > install software that would automatically block content like this 
> > posting.
> >
> > Here is a good place to start:
> >
> > http://add.yahoo.com/fast/help/us/groups/cgi_abuse
> >
> > Thanks,
> >
> > - Tom
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/
> >
> >
> >
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sjbeskur at sbcglobal.net  Wed Nov 12 18:28:29 2003
From: sjbeskur at sbcglobal.net (Sam Beskur)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] C# and antlr
References: <boujpf+g2ut@eGroups.com>
Message-ID: <004e01c3a98d$d43bfd50$967ba8c0@batsws01>

Please Help.
To build the the antlr.jar with support for csharp actions, I had to
edit the file antlr/build/ANTLR.java and add the string
"antlr/actions/csharp" to the srcdir array variable.  I found no
documentation on this anywhere and only after going line by line
through the antlr code did I figure this out (and it took hours for this 
slow programmer).

Once I did this, I was able to rebuild the antlr.jar using 
the commands:

java antlr.build.Tool build 
then
java antlr.build.Tool jar

as stated in the Antlr Documentation, and all seems to be fine.

I am wondering if I just completely missed something.  Or is this as
difficult as it seems.  Why are the C# actions not supported by
default?  Why do I have to build them? 

Did I even approach this correctly??  As I say all seems to be working
fine now, but, something just doesn't feel right.  

Please explain.

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tzagotta1 at sienasystems.com  Wed Nov 12 18:47:49 2003
From: tzagotta1 at sienasystems.com (Tom Zagotta)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: spam
In-Reply-To: <boui6s+rm6g@eGroups.com>
Message-ID: <200311130243.UAA07412@coral.propagation.net>


> Actually, I think that the "moderate new users" setting might 
> help--I can't see these idiots having enough technical savvy 
> to post an inocuous message that doesn't raise red flags.  
> Besides, they are in gross violation of yahoo policy to begin 
> with:  all of  the porn spam that I have bothered to check 
> refers to the eroticy site, and I'm surprised that yahoo has 
> not taken legal action by now--we can't be the only group 
> affected by this noise.

I don't want to spend too much bandwidth on this issue, but my point really
is that Yahoo should install software that filters out this junk.  Most
every company has such software installed as a part of their firewall, and
there are lots of programs that can be run on the desktop that do the same.
There is no (technical) reason that Yahoo couldn't do the same.  I think if
lots of users ask for it, that would help motivate them.

Regards,

- Tom


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Wed Nov 12 19:14:34 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: SQL grammar tree construction problem
In-Reply-To: <boujpf+g2ut@eGroups.com>
Message-ID: <bousuq+9vlk@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Thomas Brandon" <tom@p...> wrote:
> Not sure that this is the problem but...
> I don't think Antlr requires rooted trees.

As Ter pointed out in a different thread a coupla days ago, ANTLR
doesn't generate concrete syntax tree (CSTs) by default.

AFAICT, this ensures ANTLR doesn't generate a rooted subtree for each
rule by default. It is up to the grammar developer to specify the
exact structure of the generated AST. Of course a tree has to have a root.

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From manju_a_27 at yahoo.com  Wed Nov 12 19:26:21 2003
From: manju_a_27 at yahoo.com (Manju Anand)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] help with OutOfMemoryError
Message-ID: <boutkt+31nm@eGroups.com>

Hi,

I am trying to parse around 6000 java files placed under around 80 
directories. I used the standard java parser that comes with the 
ANTLR tool. It throws out of memory error after parsing around 1850 
files. The input to the parser is one top level directory.

Can you suggest as to where I can clean up some code to avoid this? 
Or any other solution. 

I tried increasing the heap and stack sizes but din't work.

thanks,
Manju


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From paultaney at yahoo.com  Wed Nov 12 20:09:58 2003
From: paultaney at yahoo.com (paul taney)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: Newbie question
In-Reply-To: <bouhvt+ih53@eGroups.com>
Message-ID: <20031113040958.26644.qmail@web80605.mail.yahoo.com>



> > > Can anyone tell me where can I find a good
> tutorial of ANTLR please...

Ter's out-of-print book is occasionally available
at Amazon and such:

    Language Translation Using PCCTS & C++ 

At the moment there are five copies.  Yes it's
dated; some syntax has changed but I still find
it useful.

paul


__________________________________
Do you Yahoo!?
Protect your identity with Yahoo! Mail AddressGuard
http://antispam.yahoo.com/whatsnewfree

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gunay_arslan at yahoo.co.uk  Thu Nov 13 03:57:55 2003
From: gunay_arslan at yahoo.co.uk (gunay_arslan)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Defining AST for the literals ( keywords)
Message-ID: <bovrk3+jfrl@eGroups.com>

Hi ,

Is it possible to automatically define a concrete AST type for all
tokens defined in the lexer grammar ? 

Thank you in advance.




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Thu Nov 13 05:04:18 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] how to force unexpected token error
In-Reply-To: <bokamd+ij10@eGroups.com>; from hawkwall@yahoo.com on Sun, Nov 09, 2003 at 03:01:33AM -0000
References: <bokamd+ij10@eGroups.com>
Message-ID: <20031113140418.G8537@cs.utwente.nl>

Hi,

On Sun, Nov 09, 2003 at 03:01:33AM -0000, hawkwall wrote:
> Input:
> THREAT.CLASSES.110
> NUMBER.OF.SURFACE.TO.AIR.THREAT.CLASSES:  3
> end of Input:
>
> Parser:
> startSACLASS : (rules)+ ;
>
> rules : threatclass
>         | sathreatclass
>         ;
>
> threatclass: THREAT_CLASSES ONETEN;

Better use NUMBER in stead of ONETEN and then check here if it's "110". If
not so throw a SemanticException or whatever Exception you deem more
apropriate (RecognitionException?).

> sathreatclass: SURFACE_TO_AIR COLON  NUMBER
> 	{System.out.println("Got Here");}
> 	;
> end of Parser:
>
> Lexer:
> options {
> 	k=5; // character lookahead

Not really necessary to have this much lookahead. (Ok antlr optimizes
excess checks away but with bigger stuff it makes running antlr slower)

> 	testLiterals=false;
> }
>
> tokens
> {
> 	THREAT_CLASSES="THREAT.CLASSES.";
> 	SURFACE_TO_AIR="NUMBER.OF.SURFACE.TO.AIR.THREAT.CLASSES";
> }
>
> IDENTIFIER options { testLiterals=true;} : (LETTER | '.')+;
> NUMBER : (DIGIT)+;
> DOT : '.' ;
> COLON : ':';
> ONETEN : ("110") => "110" ; //predicate is an attempt to remove
> nondetermism with NUMBER, but didn't work

I'd remove the ONETEN rule better deal with it in the parser... At least
it's kinda ugly like this ;) Also the rule might interfere with other valid
uses of 110 as a number. E.g. like this you have to deal in the parser in
all spots where you have a NUMBER token with an extra alternative ONETEN.

e.g. the choice between one NUMBER rule (and no ONETEN) and in the parser
in a few spots a check on 110. Or a NUMBER and a ONETEN rule and in the
parser for all NUMBER occurences (NUMBER|ONETEN) if NUMBER is common in the
rest of the grammar the choice is obvious.

> private DIGIT : ('0'..'9') ;
> private LETTER : ('A'..'Z');
>
...
> end of Lexer:
>
> I need the parser to catch it if the input is mispelled.
> The parser complains if I change the first line to
> THREAT.CASSES.110 or THREAT.CLASSES.112
>
> It doesn't fail when I correct the first line and change the second
> line to something like
> NUMBER.OF.USRFACE.TO.AIR.THREAT.CLASSES: 3
>
> I turned on the trace, and with the incorrect input on the second
> line, it matches IDENTIFIER and
> then finished normally.  The action is never executed.  What is the
> difference?

Because there's no EOF check it just came to the conclusion that the input
upto now was valid and it could exit (at least that's my guess). IDENTIFIER
is a valid token in your lexer but your parser does not process it as a
result it matches any misspelled keyword and the parser does not require
any more tokens so it just stops if it received some valid input. Having
EOF at the end of the start rule is very good practice in general (although
in some rarer cases you don't want it)

> Why is unexpected token given
> in the first case but not the other.  I tried setting
> defaultErrorHandler=false, but it didn't fix my problem.

defaultErrorhandler only controls wether a exception falls through to the
caller of the parser or if it gets caught in the rule throwing it. Just
look at the differences in generated code.

> I tried
> putting EOF at the end of my start rule, but to no avail.  I tried to
> factor
> out the THREAT.CLASSES from the end of SURFACE_TO_AIR, also removing
> the final dot from the THREAT_CLASSES token.
> I changed the threatclass rule to :
> THREAT_CLASSES DOT ONETEN
> and then got a
> line 1:1: unexpected token: THREAT.CLASSES.
> error.
>
> I see why it is happening in the parser.  Here is the relevent java:
> public final void startSACLASS() throws RecognitionException,
> TokenStreamException {
>
> 		try {      // for error handling
....
> The problem is the if ( _cnt1421>=1).  If I remove that and make the
> code look like this:

The >= 1 is from the ()+ in the rule.

> 				if ((LA(1)==THREAT_CLASSES||LA(1)==SURFACE_TO_AIR)) {
> 					rules();
> 				}
> 				else {
> 					throw new NoViableAltException(LT(1), getFilename());
> 				}

What happens if you change the start rule to:

startSACLASS : (rules)* EOF ;

Or maybe even better remove these from the tokens section:

> 	THREAT_CLASSES="THREAT.CLASSES.";
> 	SURFACE_TO_AIR="NUMBER.OF.SURFACE.TO.AIR.THREAT.CLASSES";

And delete the IDENTIFIER rule. This is the one that makes all tokens with
letters and dots in them valid. Unless you catch invalid identifiers in the
parser (depends on the rest of your grammar looking at the _cnt1421 I
suspect your grammar is bigger in reality than this snippet)

and add rules:

THREAT_CLASSES : "THREAT.CLASSES.";
SURFACE_TO_AIR : "NUMBER.OF.SURFACE.TO.AIR.THREAT.CLASSES";

Then anything not matching these and the other lexer rules will bomb out.
Another option is to have the IDENTIFIER rule and use some extra checks on
invalid IDENTIFIER checks in the parser or maybe overload the literals
testing method of the lexer and have it bomb out (throw an exception) if no
literal is matched. Again this depends on your complete grammar either
solution has its advantages and its drawbacks.

Just for kicks make little executable around the lexer that calls nextToken
on it and dumps it to stdout. Then look at the tokens returned by the lexer
it should give you more of a feel what your parser sees and which errors
are generated by the parser and which ones by the lexer.

Hope this helps,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Quidquid latine dictum sit, altum viditur.
                 (Whatever is said in Latin sounds profound.)

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From johnm-antlr at non.net  Thu Nov 13 08:07:20 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] help with OutOfMemoryError
In-Reply-To: <boutkt+31nm@eGroups.com>
References: <boutkt+31nm@eGroups.com>
Message-ID: <16307.44088.755134.539478@despot.non.net>

>>>>> "Manju" == Manju Anand <manju_a_27@yahoo.com> writes:
[...]

> I am trying to parse around 6000 java files placed under around 80
> directories. I used the standard java parser that comes with the ANTLR
> tool. It throws out of memory error after parsing around 1850 files. The
> input to the parser is one top level directory.

> Can you suggest as to where I can clean up some code to avoid this?  Or
> any other solution.

Are you sure that you're releasing resources after parsing each file or is
there some reason that you need to try to parse them all at once and keep
all of that stuff around?

Take care,
	John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Nov 13 08:15:29 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Defining AST for the literals ( keywords)
Message-ID: <72C9789739C4214096AE945753B11EA3FABA4B@mypxmail04.bco-home.com>

Yeah, that's done by default.

Monty

-----Original Message-----
From: gunay_arslan [mailto:gunay_arslan@yahoo.co.uk] 
Sent: Thursday, November 13, 2003 3:58 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Defining AST for the literals ( keywords)

Hi ,

Is it possible to automatically define a concrete AST type for all
tokens defined in the lexer grammar ? 

Thank you in advance.




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From hawkwall at yahoo.com  Thu Nov 13 08:29:12 2003
From: hawkwall at yahoo.com (hawkwall)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: how to force unexpected token error
In-Reply-To: <20031113140418.G8537@cs.utwente.nl>
Message-ID: <bp0bgo+lvoa@eGroups.com>

Hi Ric,

Thanks alot for your answer.  Your insight into ONETEN is right, in
could appear again as a value.  I will check it in the parser and
raise an exception.  I also hadn't thought of overriding the
testLiterals method.  I tried removing the IDENTIFER rule and adding
rules for 
THREAT_CLASSES : "THREAT.CLASSES.";
SURFACE_TO_AIR : "NUMBER.OF.SURFACE.TO.AIR.THREAT.CLASSES";
but I get a unrecognized character error line 1 column 1.

I appreciate the help and now understand antlr a little better.  Why
doesn't antlr come with the api documentation?  I probably should have
run javadoc along time ago.

Thanks again

Mike

--- In antlr-interest@yahoogroups.com, Ric Klaren <klaren@c...> wrote:
> Hi,
> 
> On Sun, Nov 09, 2003 at 03:01:33AM -0000, hawkwall wrote:
> > Input:
> > THREAT.CLASSES.110
> > NUMBER.OF.SURFACE.TO.AIR.THREAT.CLASSES:  3
> > end of Input:
> >
> > Parser:
> > startSACLASS : (rules)+ ;
> >
> > rules : threatclass
> >         | sathreatclass
> >         ;
> >
> > threatclass: THREAT_CLASSES ONETEN;
> 
> Better use NUMBER in stead of ONETEN and then check here if it's
"110". If
> not so throw a SemanticException or whatever Exception you deem more
> apropriate (RecognitionException?).
> 
> > sathreatclass: SURFACE_TO_AIR COLON  NUMBER
> > 	{System.out.println("Got Here");}
> > 	;
> > end of Parser:
> >
> > Lexer:
> > options {
> > 	k=5; // character lookahead
> 
> Not really necessary to have this much lookahead. (Ok antlr optimizes
> excess checks away but with bigger stuff it makes running antlr slower)
> 
> > 	testLiterals=false;
> > }
> >
> > tokens
> > {
> > 	THREAT_CLASSES="THREAT.CLASSES.";
> > 	SURFACE_TO_AIR="NUMBER.OF.SURFACE.TO.AIR.THREAT.CLASSES";
> > }
> >
> > IDENTIFIER options { testLiterals=true;} : (LETTER | '.')+;
> > NUMBER : (DIGIT)+;
> > DOT : '.' ;
> > COLON : ':';
> > ONETEN : ("110") => "110" ; //predicate is an attempt to remove
> > nondetermism with NUMBER, but didn't work
> 
> I'd remove the ONETEN rule better deal with it in the parser... At least
> it's kinda ugly like this ;) Also the rule might interfere with
other valid
> uses of 110 as a number. E.g. like this you have to deal in the
parser in
> all spots where you have a NUMBER token with an extra alternative
ONETEN.
> 
> e.g. the choice between one NUMBER rule (and no ONETEN) and in the
parser
> in a few spots a check on 110. Or a NUMBER and a ONETEN rule and in the
> parser for all NUMBER occurences (NUMBER|ONETEN) if NUMBER is common
in the
> rest of the grammar the choice is obvious.
> 
> > private DIGIT : ('0'..'9') ;
> > private LETTER : ('A'..'Z');
> >
> ...
> > end of Lexer:
> >
> > I need the parser to catch it if the input is mispelled.
> > The parser complains if I change the first line to
> > THREAT.CASSES.110 or THREAT.CLASSES.112
> >
> > It doesn't fail when I correct the first line and change the second
> > line to something like
> > NUMBER.OF.USRFACE.TO.AIR.THREAT.CLASSES: 3
> >
> > I turned on the trace, and with the incorrect input on the second
> > line, it matches IDENTIFIER and
> > then finished normally.  The action is never executed.  What is the
> > difference?
> 
> Because there's no EOF check it just came to the conclusion that the
input
> upto now was valid and it could exit (at least that's my guess).
IDENTIFIER
> is a valid token in your lexer but your parser does not process it as a
> result it matches any misspelled keyword and the parser does not require
> any more tokens so it just stops if it received some valid input. Having
> EOF at the end of the start rule is very good practice in general
(although
> in some rarer cases you don't want it)
> 
> > Why is unexpected token given
> > in the first case but not the other.  I tried setting
> > defaultErrorHandler=false, but it didn't fix my problem.
> 
> defaultErrorhandler only controls wether a exception falls through
to the
> caller of the parser or if it gets caught in the rule throwing it. Just
> look at the differences in generated code.
> 
> > I tried
> > putting EOF at the end of my start rule, but to no avail.  I tried to
> > factor
> > out the THREAT.CLASSES from the end of SURFACE_TO_AIR, also removing
> > the final dot from the THREAT_CLASSES token.
> > I changed the threatclass rule to :
> > THREAT_CLASSES DOT ONETEN
> > and then got a
> > line 1:1: unexpected token: THREAT.CLASSES.
> > error.
> >
> > I see why it is happening in the parser.  Here is the relevent java:
> > public final void startSACLASS() throws RecognitionException,
> > TokenStreamException {
> >
> > 		try {      // for error handling
> ....
> > The problem is the if ( _cnt1421>=1).  If I remove that and make the
> > code look like this:
> 
> The >= 1 is from the ()+ in the rule.
> 
> > 				if ((LA(1)==THREAT_CLASSES||LA(1)==SURFACE_TO_AIR)) {
> > 					rules();
> > 				}
> > 				else {
> > 					throw new NoViableAltException(LT(1), getFilename());
> > 				}
> 
> What happens if you change the start rule to:
> 
> startSACLASS : (rules)* EOF ;
> 
> Or maybe even better remove these from the tokens section:
> 
> > 	THREAT_CLASSES="THREAT.CLASSES.";
> > 	SURFACE_TO_AIR="NUMBER.OF.SURFACE.TO.AIR.THREAT.CLASSES";
> 
> And delete the IDENTIFIER rule. This is the one that makes all
tokens with
> letters and dots in them valid. Unless you catch invalid identifiers
in the
> parser (depends on the rest of your grammar looking at the _cnt1421 I
> suspect your grammar is bigger in reality than this snippet)
> 
> and add rules:
> 
> THREAT_CLASSES : "THREAT.CLASSES.";
> SURFACE_TO_AIR : "NUMBER.OF.SURFACE.TO.AIR.THREAT.CLASSES";
> 
> Then anything not matching these and the other lexer rules will bomb
out.
> Another option is to have the IDENTIFIER rule and use some extra
checks on
> invalid IDENTIFIER checks in the parser or maybe overload the literals
> testing method of the lexer and have it bomb out (throw an
exception) if no
> literal is matched. Again this depends on your complete grammar either
> solution has its advantages and its drawbacks.
> 
> Just for kicks make little executable around the lexer that calls
nextToken
> on it and dumps it to stdout. Then look at the tokens returned by
the lexer
> it should give you more of a feel what your parser sees and which errors
> are generated by the parser and which ones by the lexer.
> 
> Hope this helps,
> 
> Ric
> --
>
-----+++++*****************************************************+++++++++-------
>     ---- Ric Klaren ----- j.klaren@u... ----- +31 53 4893722  ----
>
-----+++++*****************************************************+++++++++-------
>   Quidquid latine dictum sit, altum viditur.
>                  (Whatever is said in Latin sounds profound.)


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Thu Nov 13 09:42:44 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: help with OutOfMemoryError
In-Reply-To: <16307.44088.755134.539478@despot.non.net>
Message-ID: <bp0fqk+409r@eGroups.com>

--- In antlr-interest@yahoogroups.com, "John D. Mitchell" 
> > I am trying to parse around 6000 java files placed under around 80
> > directories. I used the standard java parser that comes with the ANTLR
> > tool. It throws out of memory error after parsing around 1850
files. The
> > input to the parser is one top level directory.
> 
> > Can you suggest as to where I can clean up some code to avoid
this?  Or
> > any other solution.
> 
> Are you sure that you're releasing resources after parsing each file
or is
> there some reason that you need to try to parse them all at once and
keep
> all of that stuff around?

Slightly OT but, I wonder if there are any figures for the "typical"
size of ANTLR ASTs as a ratio of the input source files. I am aware
that the figure would probably vary [wildy?] between grammars but it
will be useful nonetheless ;-)

Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From bob at werken.com  Thu Nov 13 10:48:34 2003
From: bob at werken.com (bob mcwhirter)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: Newbie question
In-Reply-To: <20031113040958.26644.qmail@web80605.mail.yahoo.com>
Message-ID: <Pine.LNX.3.96.1031113134759.25477A-100000@exeter.exeter.org>


I thought Ter had been given the rights to it back from
his publisher and was making the PDF freely available.

Ter, am I confused as normal?

	-bob


On Wed, 12 Nov 2003, paul taney wrote:

> > > > Can anyone tell me where can I find a good
> > tutorial of ANTLR please...
> 
> Ter's out-of-print book is occasionally available
> at Amazon and such:
> 
>     Language Translation Using PCCTS & C++ 
> 
> At the moment there are five copies.  Yes it's
> dated; some syntax has changed but I still find
> it useful.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Thu Nov 13 10:53:31 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: Newbie question
In-Reply-To: <Pine.LNX.3.96.1031113134759.25477A-100000@exeter.exeter.org>
Message-ID: <ACC5DE08-160A-11D8-99AD-000A95891192@cs.usfca.edu>


On Thursday, November 13, 2003, at 10:48 AM, bob mcwhirter wrote:

>
> I thought Ter had been given the rights to it back from
> his publisher and was making the PDF freely available.
>
> Ter, am I confused as normal?

Nope...book is available in PDF on the website for free, but there are 
not many actual hard copies laying around...

Ter

>
> 	-bob
>
>
> On Wed, 12 Nov 2003, paul taney wrote:
>
>>>>> Can anyone tell me where can I find a good
>>> tutorial of ANTLR please...
>>
>> Ter's out-of-print book is occasionally available
>> at Amazon and such:
>>
>>     Language Translation Using PCCTS & C++
>>
>> At the moment there are five copies.  Yes it's
>> dated; some syntax has changed but I still find
>> it useful.
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Vladimir.Konstantinov at rogers.com  Thu Nov 13 11:03:03 2003
From: Vladimir.Konstantinov at rogers.com (VLADIMIR KONSTANTINOV)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] help with literals
Message-ID: <001501c3aa18$c4016a70$b1966b8e@moh.gov.on.ca>


I want to specify literals ("min", "max", "sum" etc) in my grammar.
 
I am getting :
 line 1:1: unexpected char: 'm'
 line 1:2: unexpected char: 'i'
 line 1:3: unexpected char: 'n'
when testing with the following expression: "min;" 
 
This a stripped down version of my grammar:
 
///
class ExpressionParser extends Parser;
options { importVocab=Expression; }
calc: fun END;
fun: "min";
 
class ExpressionLexer extends Lexer ;
options{ exportVocab=Expression;}
END: ';'
///
 
I am missing something very basic, but can't figure it out myself.
 
Thanks in advance.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Nov 13 11:05:48 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] help with literals
Message-ID: <72C9789739C4214096AE945753B11EA3FABA51@mypxmail04.bco-home.com>

Yes, you need a rule that will test it's result against the defined
literals.  See docs on literals and any example grammar with an ID rule.

Monty

-----Original Message-----
From: VLADIMIR KONSTANTINOV [mailto:Vladimir.Konstantinov@rogers.com] 
Sent: Thursday, November 13, 2003 11:03 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] help with literals


I want to specify literals ("min", "max", "sum" etc) in my grammar.
 
I am getting :
 line 1:1: unexpected char: 'm'
 line 1:2: unexpected char: 'i'
 line 1:3: unexpected char: 'n'
when testing with the following expression: "min;" 
 
This a stripped down version of my grammar:
 
///
class ExpressionParser extends Parser;
options { importVocab=Expression; }
calc: fun END;
fun: "min";
 
class ExpressionLexer extends Lexer ;
options{ exportVocab=Expression;}
END: ';'
///
 
I am missing something very basic, but can't figure it out myself.
 
Thanks in advance.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jean-louis.boulanger at hds.utc.fr  Thu Nov 13 11:17:12 2003
From: jean-louis.boulanger at hds.utc.fr (Boulanger Jean-Louis)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] (unknown)
Message-ID: <1068751032.3fb3d8b8afdea@mail.hds.utc.fr>

Hello

Just for information next link are dead :
 http://antlr.org/papers/parr.phd.thesis.ps.gz
 http://antlr.org/papers/parr.phd.thesis.ps.zip




-------------------------------------------------
Laboratoire Heudiasyc. UMR CNRS 6599
http://www.hds.utc.fr

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Vladimir.Konstantinov at rogers.com  Thu Nov 13 11:15:57 2003
From: Vladimir.Konstantinov at rogers.com (yahamkon)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: help with literals
In-Reply-To: <72C9789739C4214096AE945753B11EA3FABA51@mypxmail04.bco-home.com>
Message-ID: <bp0l9d+igaa@eGroups.com>

Thanks for the fast response!

>> See docs on literals and any example grammar with an ID rule.

I've looked in the docs, the "java.g" grammar, also searched the 
archives but things aren't getting clearer.

> Yes, you need a rule that will test it's result against the defined
> literals. 

Isn't "calc" such a rule? To put it defferently, if I had a grammar 
that specifies a single rule recognising a single literal how would 
that look like (that's what I had in mind sending the example anyway)?





> 
> Monty
> 
> -----Original Message-----
> From: VLADIMIR KONSTANTINOV [mailto:Vladimir.Konstantinov@r...] 
> Sent: Thursday, November 13, 2003 11:03 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] help with literals
> 
> 
> I want to specify literals ("min", "max", "sum" etc) in my grammar.
>  
> I am getting :
>  line 1:1: unexpected char: 'm'
>  line 1:2: unexpected char: 'i'
>  line 1:3: unexpected char: 'n'
> when testing with the following expression: "min;" 
>  
> This a stripped down version of my grammar:
>  
> ///
> class ExpressionParser extends Parser;
> options { importVocab=Expression; }
> calc: fun END;
> fun: "min";
>  
> class ExpressionLexer extends Lexer ;
> options{ exportVocab=Expression;}
> END: ';'
> ///
>  
> I am missing something very basic, but can't figure it out myself.
>  
> Thanks in advance.
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Vladimir.Konstantinov at rogers.com  Thu Nov 13 11:15:34 2003
From: Vladimir.Konstantinov at rogers.com (yahamkon)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: help with literals
In-Reply-To: <72C9789739C4214096AE945753B11EA3FABA51@mypxmail04.bco-home.com>
Message-ID: <bp0l8m+mj1b@eGroups.com>

Thanks for the fast response!

>> See docs on literals and any example grammar with an ID rule.

I've looked in the docs, the "java.g" grammar, also searched the 
archives but things aren't getting clearer.

> Yes, you need a rule that will test it's result against the defined
> literals. 

Isn't "calc" such a rule? To put it defferently, if I had a grammar 
that specifies a single rule recognising a single literal how would 
that look like (that's what I had in mind sending the example anyway)?





> 
> Monty
> 
> -----Original Message-----
> From: VLADIMIR KONSTANTINOV [mailto:Vladimir.Konstantinov@r...] 
> Sent: Thursday, November 13, 2003 11:03 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] help with literals
> 
> 
> I want to specify literals ("min", "max", "sum" etc) in my grammar.
>  
> I am getting :
>  line 1:1: unexpected char: 'm'
>  line 1:2: unexpected char: 'i'
>  line 1:3: unexpected char: 'n'
> when testing with the following expression: "min;" 
>  
> This a stripped down version of my grammar:
>  
> ///
> class ExpressionParser extends Parser;
> options { importVocab=Expression; }
> calc: fun END;
> fun: "min";
>  
> class ExpressionLexer extends Lexer ;
> options{ exportVocab=Expression;}
> END: ';'
> ///
>  
> I am missing something very basic, but can't figure it out myself.
>  
> Thanks in advance.
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Nov 13 11:19:16 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: help with literals
Message-ID: <72C9789739C4214096AE945753B11EA3FABA52@mypxmail04.bco-home.com>

No, you need a lexer rule something like 
ID:
options {testLiterals=true;}
('a'..'z' | 'A'..'Z')+
;

Monty

-----Original Message-----
From: yahamkon [mailto:Vladimir.Konstantinov@rogers.com] 
Sent: Thursday, November 13, 2003 11:16 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: help with literals

Thanks for the fast response!

>> See docs on literals and any example grammar with an ID rule.

I've looked in the docs, the "java.g" grammar, also searched the 
archives but things aren't getting clearer.

> Yes, you need a rule that will test it's result against the defined
> literals. 

Isn't "calc" such a rule? To put it defferently, if I had a grammar 
that specifies a single rule recognising a single literal how would 
that look like (that's what I had in mind sending the example anyway)?





> 
> Monty
> 
> -----Original Message-----
> From: VLADIMIR KONSTANTINOV [mailto:Vladimir.Konstantinov@r...] 
> Sent: Thursday, November 13, 2003 11:03 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] help with literals
> 
> 
> I want to specify literals ("min", "max", "sum" etc) in my grammar.
>  
> I am getting :
>  line 1:1: unexpected char: 'm'
>  line 1:2: unexpected char: 'i'
>  line 1:3: unexpected char: 'n'
> when testing with the following expression: "min;" 
>  
> This a stripped down version of my grammar:
>  
> ///
> class ExpressionParser extends Parser;
> options { importVocab=Expression; }
> calc: fun END;
> fun: "min";
>  
> class ExpressionLexer extends Lexer ;
> options{ exportVocab=Expression;}
> END: ';'
> ///
>  
> I am missing something very basic, but can't figure it out myself.
>  
> Thanks in advance.
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From richard.ney at aspect.com  Thu Nov 13 11:32:11 2003
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Warning while compiling C++ library in VC 7.1
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE001AA7972@sac1exch3.aspect.com>

I getting a bunch of 4251 warnings and was wondering if others are
seeing these warnings and are the affecting the resulting library.

 

c:\Program Files\Microsoft Visual Studio .NET
2003\Vc7\include\vector(1673) : warning C4251:
'std::vector<_Ty,_Ax>::_Myvec' : class 'std::vector<_Ty,_Ax>' needs to
have dll-interface to be used by clients of class 'std::vector<_Ty,_Ax>'

 

------------------------------------------------------------------------
----------------------------

Richard Ney                                                    Aspect
Communications

Principal Software Engineer

<http://www.aspect.com <http://www.aspect.com/> >
Main:  408.325.2200

<mailto:richard.ney@aspect.com <mailto:richard.ney@aspect.com> >
SJ Office: 408.325.2464

 
Home Office: 916.797.9602

------------------------------------------------------------------------
----------------------------

 

The Three Laws of Infernal Dynamics:
1. An object in motion will always be headed in the wrong direction.
2. An object at rest will always be in the wrong place.
3. The energy required to change either of these states will always be
more than you wish to expend, but never so much as to make the task
appear prospectively impossible.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031113/9c0d94ad/attachment.html
From mtiller at ford.com  Thu Nov 13 12:50:55 2003
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: Newbie question [OT]
Message-ID: <FD35CB8B26F9534E86D1AC31F401AB3459C44D@na1fcm52.dearborn.ford.com>


> From: bob mcwhirter [mailto:bob@werken.com]
> Subject: Re: [antlr-interest] Re: Newbie question
> 
> I thought Ter had been given the rights to it back from
> his publisher and was making the PDF freely available.
> 
> Ter, am I confused as normal?
> 
> 	-bob

I was actually hoping to pull a similar stunt with a book I wrote.  I asked
my publisher about it and they insisted that with current publishing
technologies the book would never go out of print and that they could make
new printings on demand.  Bummer.  I wonder why this worked for Terence.

--
Mike

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Thu Nov 13 12:58:41 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:06 2004
Subject: [antlr-interest] Re: Newbie question [OT]
In-Reply-To: <FD35CB8B26F9534E86D1AC31F401AB3459C44D@na1fcm52.dearborn.ford.com>
Message-ID: <293A548E-161C-11D8-99AD-000A95891192@cs.usfca.edu>


On Thursday, November 13, 2003, at 12:50 PM, Tiller, Michael (M.M.) 
wrote:

>
>> From: bob mcwhirter [mailto:bob@werken.com]
>> Subject: Re: [antlr-interest] Re: Newbie question
>>
>> I thought Ter had been given the rights to it back from
>> his publisher and was making the PDF freely available.
>>
>> Ter, am I confused as normal?
>>
>> 	-bob
>
> I was actually hoping to pull a similar stunt with a book I wrote.  I 
> asked
> my publisher about it and they insisted that with current publishing
> technologies the book would never go out of print and that they could 
> make
> new printings on demand.  Bummer.  I wonder why this worked for 
> Terence.

Because I kick and I bite ;)

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mtiller at ford.com  Thu Nov 13 13:51:23 2003
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Static cast problem with hetero trees with gcc
Message-ID: <FD35CB8B26F9534E86D1AC31F401AB345A235B@na1fcm52.dearborn.ford.com>

I just installed cygwin (1.5.5-1) and now when I try to compile my parser
(generated with antlr-2.7.2) I get lots of errors regarding static casts.
The static casts are in the generated code and typically look something
like:
 
   RefDeclNode tmp195_AST =
static_cast<RefDeclNode>(ANTLR_USE_NAMESPACE(antlr)nullAST);
 
The version of gcc (3.3.1) that comes with this version of cygwin gives me
an error message saying:
 
ModelicaParser.cpp:6781: error: invalid static_cast from type
`antlr::RefAST' 
   to type `ModParse::RefDeclNode'
 
Note that RefDeclNode (in the ModParse namespace) is defined as:
 
typedef antlr::ASTRefCount<DeclNode> RefDeclNode;
 
and DeclNode is defined as:
 
class BaseNode : public antlr::CommonAST { ... };
class DeclNode : public BaseNode { ... };
 
This worked with a previous version of gcc and is essentially what is
included in the ANTLR documentation as the appropriate approach for doing
heterogenous AST nodes in C++.  Is anyone familiar with this problem?  I
noticed it in some other code but managed to work around it.  But since this
is generated, I'm kinda stuck.
 
--
Mike
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031113/3cfd672a/attachment.html
From tom at psy.unsw.edu.au  Thu Nov 13 16:37:26 2003
From: tom at psy.unsw.edu.au (Thomas Brandon)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Re: SQL grammar tree construction problem
In-Reply-To: <bousuq+9vlk@eGroups.com>
Message-ID: <bp1846+8bec@eGroups.com>

Sorry, that was poorly stated, yes a tree must have a root, but it 
need not have a unique root, it can have a root with siblings not 
just children, but JTree doesn't like this.
So ROOT SIB1 SIB2 is a valid tree (i.e. ROOT with siblings SIB1 and 
SIB2. You don't need to have #(ROOT SIB1 SIB2) (i.e. a unique root 
with 2 children). But JTree only renders the first top-level node, 
i.e. for #(ROOT CHILD1 CHILD2) SIB1 SIB2 (i.e. root with two 
children and two siblings) it will only show #(ROOT CHILD1 CHILD2), 
SIB1 and SIB2 are not shown.

Tom.
--- In antlr-interest@yahoogroups.com, "micheal_jor" 
<open.zone@v...> wrote:
> --- In antlr-interest@yahoogroups.com, "Thomas Brandon" <tom@p...> 
wrote:
> > Not sure that this is the problem but...
> > I don't think Antlr requires rooted trees.
> 
> As Ter pointed out in a different thread a coupla days ago, ANTLR
> doesn't generate concrete syntax tree (CSTs) by default.
> 
> AFAICT, this ensures ANTLR doesn't generate a rooted subtree for 
each
> rule by default. It is up to the grammar developer to specify the
> exact structure of the generated AST. Of course a tree has to have 
a root.
> 
> Cheers,
> 
> Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From leung13512c at yahoo.com  Thu Nov 13 18:47:26 2003
From: leung13512c at yahoo.com (leung13512c)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <16304.28102.554707.148368@despot.non.net>
Message-ID: <bp1fnu+33hg@eGroups.com>

If the decision change the interpretation of what follows, you may
not be able to delay that decision to the next pass.

Well thought out language probably would have avoid such scenerio
but may be there are some bad guys.

--- In antlr-interest@yahoogroups.com, "John D. Mitchell"
<johnm-antlr@n...> wrote:
> >>>>> "Oliver" == Oliver Zeigermann <oliver@z...> writes:
> >>>>>> John D. Mitchell wrote:
> >>>>>>> "Oliver" == Oliver Zeigermann <oliver@z...> writes:
> 
> >> [...necessity of guarded predicates...]
> 
> [...]
> 
> >>> If you can not set the symbol table, you can not parse a
language, you
> >>> otherwise could. Thus this stuff augments the set of parseable
> >>> languages with ANTLR.
> 
> >> You still haven't shown how the "guarded predicates" are
*necessary* to
> >> understanding that type of language.
> 
> > Ooops, I though I had shown necessity?! Where is the missing piece?
> 
> That's my question. :-) All that you've shown is that using "guarded
> predicates" helps you parse that language *only* using a lexer and a
> parser.  You haven't shown how that increases the recognition power of a
> complete translator has been increased.
> 
> As I've noted, you can use additional stages (e.g., antlr-based tree
> transformers) to more cleanly solve your example language problem.
> 
> Take care,
> 	John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From richard.ney at aspect.com  Thu Nov 13 19:13:52 2003
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] returnAST and _retTree commented out in C++ header files
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE001AA7976@sac1exch3.aspect.com>

Is there a reason that the member fields returnAST and _retTree have
been commented out in TreeParser.hpp and Parser.hpp in the October 29th
source bundle off of Ric's site? I'm getting compiling errors from both
the parser and tree parser due to these being undefined.

 

-Richard

 

------------------------------------------------------------------------
----------------------------

Richard Ney                                                    Aspect
Communications

Principal Software Engineer

<http://www.aspect.com <http://www.aspect.com/> >
Main:  408.325.2200

<mailto:richard.ney@aspect.com <mailto:richard.ney@aspect.com> >
SJ Office: 408.325.2464

 
Home Office: 916.797.9602

------------------------------------------------------------------------
----------------------------

 

The Three Laws of Infernal Dynamics:
1. An object in motion will always be headed in the wrong direction.
2. An object at rest will always be in the wrong place.
3. The energy required to change either of these states will always be
more than you wish to expend, but never so much as to make the task
appear prospectively impossible.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031113/25609688/attachment.html
From easjolly at ix.netcom.com  Thu Nov 13 20:14:02 2003
From: easjolly at ix.netcom.com (dotlessbraille)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Re: spam/IRONIC
In-Reply-To: <200311130243.UAA07412@coral.propagation.net>
Message-ID: <bp1kqa+74fr@eGroups.com>

I do find it ironic that the gurus of a list devoted to parsing 
can't figure out how to "moderate new users" efficiently :)  All of 
the other Yahoo! Groups I belong to do this and none have spam 
problems.  

(This comment is not to be interpreted as indicating an opinion with 
regard to Yahoo!'s policies on such matters.)

Cheers,
S.J.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Thu Nov 13 21:40:36 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Re: spam/IRONIC
In-Reply-To: <bp1kqa+74fr@eGroups.com>
Message-ID: <bp1psk+kspv@eGroups.com>

--- In antlr-interest@yahoogroups.com, "dotlessbraille"
<easjolly@i...> wrote:
> I do find it ironic that the gurus of a list devoted to parsing 
> can't figure out how to "moderate new users" efficiently :)  All of 
> the other Yahoo! Groups I belong to do this and none have spam 
> problems.  

What groups are these?. It might help to compare them to our list.

Cheers,

Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Thu Nov 13 22:45:09 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Re: spam/IRONIC
In-Reply-To: <bp1kqa+74fr@eGroups.com>
Message-ID: <16AC04B8-166E-11D8-8875-000393BB647E@cs.usfca.edu>

I found that all recent spam was by one person; i have deleted them...i 
am loath to turn on the feature that requires me to approve new 
subscriptions...this is rare so I'll leave for now. :)

On Thursday, November 13, 2003, at 08:14  PM, dotlessbraille wrote:

> I do find it ironic that the gurus of a list devoted to parsing
> can't figure out how to "moderate new users" efficiently :)

Well, not with somebody else's software, right?  If they let me modify 
their code, I could add a filter for "ANAL" and stuff ;)


Ter

>   All of
> the other Yahoo! Groups I belong to do this and none have spam
> problems.
>
> (This comment is not to be interpreted as indicating an opinion with
> regard to Yahoo!'s policies on such matters.)
>
> Cheers,
> S.J.
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com link sharing, pure-n-simple




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From c.nebel at apple.com  Fri Nov 14 00:50:24 2003
From: c.nebel at apple.com (Christopher Nebel)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Yacc to antlr guide?
Message-ID: <962174A2-167F-11D8-9701-0003937618D8@apple.com>

Is there documentation somewhere on how to translate yacc grammars into 
antlr?  I've got a non-trivial yacc-based grammar I'd like to port.  
Most of the basic grammar parts are straightforward, if tedious, but 
I'm having two specific problems:

1. How do I deal with operator precedence?  The yacc grammar uses 
precedence declarations, and I don't see any equivalent.  Obviously, I 
could break the big rules apart into smaller ones that reflect the 
precedence, but I'm hoping for something more direct.

2. The actions in the original make heavy use of $[$12...], and it's 
not clear to me how to deal with that.  Well, it kind of is.  I can see 
the "rule returns [T v]" bit, but I'm not looking forward to adding 
that to every single rule -- is there some way to say that all rules 
return a T without decorating each of them individually?  The custom 
AST stuff is also sort of applicable, but I've got a bunch of weird 
constraints (notably the fact that the type is *not* a C++ object) that 
make using it somewhat impractical.

Thanks,

--Chris Nebel


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Fri Nov 14 01:52:35 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Static cast problem with hetero trees with gcc
In-Reply-To: <FD35CB8B26F9534E86D1AC31F401AB345A235B@na1fcm52.dearborn.ford.com>; from mtiller@ford.com on Thu, Nov 13, 2003 at 04:51:23PM -0500
References: <FD35CB8B26F9534E86D1AC31F401AB345A235B@na1fcm52.dearborn.ford.com>
Message-ID: <20031114105234.A24924@cs.utwente.nl>

Hi,

On Thu, Nov 13, 2003 at 04:51:23PM -0500, Tiller, Michael (M.M.) wrote:
> I just installed cygwin (1.5.5-1) and now when I try to compile my parser
> (generated with antlr-2.7.2) I get lots of errors regarding static casts.
> The static casts are in the generated code and typically look something
> like:

Get a snapshot from http://wwwhome.cs.utwente.nl/~klaren/antlr it's fixed
inthere. The static_casts where grey area but recent gcc's deemed them
black area ;)

I did not get to updating docs yet.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  There are 10 kinds of people - those that understand binary and
  those that don't. --- Unknown


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Fri Nov 14 02:02:51 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] returnAST and _retTree commented out in C++ header files
In-Reply-To: <0F9CBE7F81945C4BB7A32BE6E7656EE001AA7976@sac1exch3.aspect.com>; from richard.ney@aspect.com on Thu, Nov 13, 2003 at 07:13:52PM -0800
References: <0F9CBE7F81945C4BB7A32BE6E7656EE001AA7976@sac1exch3.aspect.com>
Message-ID: <20031114110251.C24924@cs.utwente.nl>

On Thu, Nov 13, 2003 at 07:13:52PM -0800, Ney, Richard wrote:
> Is there a reason that the member fields returnAST and _retTree have
> been commented out in TreeParser.hpp and Parser.hpp in the October 29th
> source bundle off of Ric's site? I'm getting compiling errors from both
> the parser and tree parser due to these being undefined.

You are certain you are using the right codegenerator ? What combination of
customAST / heterogeneous AST's are you using ?

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Chaos is found in greatest abundance wherever order is being sought.
  --- Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Fri Nov 14 02:13:38 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Yacc to antlr guide?
In-Reply-To: <962174A2-167F-11D8-9701-0003937618D8@apple.com>; from c.nebel@apple.com on Fri, Nov 14, 2003 at 12:50:24AM -0800
References: <962174A2-167F-11D8-9701-0003937618D8@apple.com>
Message-ID: <20031114111337.D24924@cs.utwente.nl>

Hoi,

On Fri, Nov 14, 2003 at 12:50:24AM -0800, Christopher Nebel wrote:
> Is there documentation somewhere on how to translate yacc grammars into 
> antlr?  I've got a non-trivial yacc-based grammar I'd like to port.  

No guides available I think...

> 1. How do I deal with operator precedence?  The yacc grammar uses 
> precedence declarations, and I don't see any equivalent.  Obviously, I 
> could break the big rules apart into smaller ones that reflect the 
> precedence, but I'm hoping for something more direct.

Have to disappoint you there :( You could probably borrow the basic layout
from the java grammars.

> 2. The actions in the original make heavy use of $[$12...], and it's 
> not clear to me how to deal with that.  Well, it kind of is.  I can see 
> the "rule returns [T v]" bit, but I'm not looking forward to adding 
> that to every single rule -- is there some way to say that all rules 
> return a T without decorating each of them individually? 

No easy way other than using sed/perl/tcl/ and editor with regexp replace
to fix things up easily. All the $1 stuff you'd have to change to labels
though :/ then again labels are way less error prone than the yacc stuff ;)

> The custom AST stuff is also sort of applicable, but I've got a bunch of
> weird constraints (notably the fact that the type is *not* a C++ object)
> that make using it somewhat impractical.

If you have a yacc grammar with custom tree building in it then you migth
be quicker of using the treebuilding from the yacc grammar. Unless you want
to rewrite the backend stuff as well. The last bit is not clear to me....

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  There are 10 kinds of people - those that understand binary and
  those that don't. --- Unknown


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Fri Nov 14 02:21:00 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Warning while compiling C++ library in VC 7.1
In-Reply-To: <0F9CBE7F81945C4BB7A32BE6E7656EE001AA7972@sac1exch3.aspect.com>; from richard.ney@aspect.com on Thu, Nov 13, 2003 at 11:32:11AM -0800
References: <0F9CBE7F81945C4BB7A32BE6E7656EE001AA7972@sac1exch3.aspect.com>
Message-ID: <20031114112100.E24924@cs.utwente.nl>

On Thu, Nov 13, 2003 at 11:32:11AM -0800, Ney, Richard wrote:
> I getting a bunch of 4251 warnings and was wondering if others are
> seeing these warnings and are the affecting the resulting library.
> 
> c:\Program Files\Microsoft Visual Studio .NET
> 2003\Vc7\include\vector(1673) : warning C4251:
> 'std::vector<_Ty,_Ax>::_Myvec' : class 'std::vector<_Ty,_Ax>' needs to
> have dll-interface to be used by clients of class 'std::vector<_Ty,_Ax>'

You are using a development snapshot ? You followed the instructions from
the lib/cpp/README ? You are trying a static library or a dll ? 

There are probably still some small things with vc7.1 but maybe i've broken
something since the last report I had. Coming weeks I'll probably try to
fix up the mess that is VC6-7.1 in the code atm so we can start on
prereleases for the next version.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Chaos often breeds life, when order breeds habit.
  --- Henry B. Adams, The Education of Henry Adams


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pete.forman at westerngeco.com  Fri Nov 14 01:57:52 2003
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Re: spam/IRONIC
In-Reply-To: <16AC04B8-166E-11D8-8875-000393BB647E@cs.usfca.edu>
References: <bp1kqa+74fr@eGroups.com>
Message-ID: <5.1.1.1.2.20031114093705.04ba7fd8@wgmail2.gatwick.eur.slb.com>

At 2003-11-13 22:45 -0800, Terence Parr wrote:
>I found that all recent spam was by one person; i have deleted them...

Yes but the messages from that one Yahoo!ID! were very similar to
those posted by 11 others in the recent past.

>If they let me modify their code, I could add a filter for "ANAL" and
>stuff ;)

In the group of developers that I work with, one is called Randy and
another's surname is Dykes.  I've long since turned off my mailer's
feature which pops up warnings for those.

-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Anthony.Youngman at ECA-International.com  Fri Nov 14 06:50:43 2003
From: Anthony.Youngman at ECA-International.com (Anthony W Youngman)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] spam
Message-ID: <C7FE35004D40FD45AA342991B88CE40409A993@lnml1.eca-international.local>

Maybe you should take the mailing list "in house". Then you could
indulge in a variety of tricks, like running spamassassin on the host
server, or asking people to move text from the body to the subject of
the subscribe-accept email or whatever.

But you probably don't want the hassle - maybe you could get one of your
students to do it as an assignment for another lecturer?

Cheers,
Wol

-----Original Message-----
From: Terence Parr [mailto:parrt@cs.usfca.edu] 
Sent: 12 November 2003 18:43
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] spam


I try to delete these people, but they reappear as another email 
address...perhaps I should make it so I have to verify all new users?  
Not sure that would even help... :(

Ter
On Tuesday, November 11, 2003, at 07:49 PM, Tom Zagotta wrote:

> Dear Group,
>
> Please take a few minutes and write an e-mail to Yahoo, asking them to
> install software that would automatically block content like this 
> posting.
>
> Here is a good place to start:
>
> http://add.yahoo.com/fast/help/us/groups/cgi_abuse
>
> Thanks,
>
> - Tom
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 





***********************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

***********************************************************************************


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Anthony.Youngman at ECA-International.com  Fri Nov 14 06:58:30 2003
From: Anthony.Youngman at ECA-International.com (Anthony W Youngman)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Re: spam
Message-ID: <C7FE35004D40FD45AA342991B88CE40409A994@lnml1.eca-international.local>

THERE ARE LEGAL PROBLEMS.

My ISP has exactly this problem. They can intercept and throw away
outbound mail without a problem, because they have a contract with the
sender. They can intercept and throw away mail sent to themselves
because (in the guise of employer) they are the recipient.

All hell would break lose if they threw away a message sent from an
outsider that was being forwarded through their systems to someone else
!!!

That said, as it's a Yahoo mailing list I would have thought Yahoo t's
and c's would apply. And why Yahoo can't do what another mailing list I
know of does, I don't know. That runs SpamAssassin with the "flag but
don't delete" setting. Should I so choose (I should) I could set my mail
client to autodelete anything to which the "SPAM" flag has been added.

Cheers,
Wol

-----Original Message-----
From: Tom Zagotta [mailto:tzagotta1@sienasystems.com] 
Sent: 13 November 2003 02:48
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Re: spam



> Actually, I think that the "moderate new users" setting might 
> help--I can't see these idiots having enough technical savvy 
> to post an inocuous message that doesn't raise red flags.  
> Besides, they are in gross violation of yahoo policy to begin 
> with:  all of  the porn spam that I have bothered to check 
> refers to the eroticy site, and I'm surprised that yahoo has 
> not taken legal action by now--we can't be the only group 
> affected by this noise.

I don't want to spend too much bandwidth on this issue, but my point
really
is that Yahoo should install software that filters out this junk.  Most
every company has such software installed as a part of their firewall,
and
there are lots of programs that can be run on the desktop that do the
same.
There is no (technical) reason that Yahoo couldn't do the same.  I think
if
lots of users ask for it, that would help motivate them.

Regards,

- Tom


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 





***********************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

***********************************************************************************


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Anthony.Youngman at ECA-International.com  Fri Nov 14 07:19:56 2003
From: Anthony.Youngman at ECA-International.com (Anthony W Youngman)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Re: Local lookahead depth
Message-ID: <C7FE35004D40FD45AA342991B88CE40409A996@lnml1.eca-international.local>

I agree with Oliver !!!

Have you EVER hit this sort of problem in real life? I reduced an
estimated run time of about a week, to an actual run time of under an
hour, by eliminating disk access from a program. (The estimate was
achieved by extrapolating from partial runs.)

And as Oliver may remember :-) I was in a spat on the relational theory
newsgroup (which has died down now) about how Pick will smoke SQL for
speed. While performance may be similar while all the data is cached in
RAM, as soon as there is any hint of disk thrashing SQL will be hammered
while Pick is hardly affected - because you can prove mathematically
that Pick disk i/o is almost optimally perfect :-) Would YOU try running
a 32-user interactive db on a 386 with 16Mb ram? We did the equivalent,
and it was plenty fast (actually, it was a MIPS R3000).

Cheers,
Wol

-----Original Message-----
From: Oliver Zeigermann [mailto:oliver@zeigermann.de] 
Sent: 10 November 2003 07:23
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Local lookahead depth

> > 
> > I have the same experience. But consider extremely large amounts 
> of 
> > input to be parsed. In this case it is prohibitve to generate an 
> AST 
> > because of the memory issue. As a very practical exmaple I have 
> parsing 
> > of the AMM (Aircraft Maintenance Manual) which is available in 
> SGML 
> > (very hard to parse, really). I parsed this a few years using 
> ANTLR, but 
> > its size normally is around 100MB. A few years ago my machine had 
> 128MB 
> > of RAM! You see what I mean?
> 
> And how much disk space did you have?  On a UNIX box, mmap() is a 
> good way of automating file I/O, but even on systems without virtual 
> memory, you can fake it. Performance is not an issue--with a problem 
> of this size, nothing stays in the processor cache, and the overhead 
> of the disk writes will be only a few percent.
> 
> --Loring


Loring,

are you really serious about this? Have a look at the DOM vs. SAX
discussion in the XML area...

Oliver


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 





***********************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

***********************************************************************************


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Fri Nov 14 07:23:34 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Tree transformation
Message-ID: <072d01c3aac3$44dcc6d0$00cf090a@oddi.is>

Hello..

I'm having some trouble I can't figure out, possibly because I'm doing
something stupid.

I have this rule in a tree parser for transforming loops:

loop_stmt
	: #(L_LOOP stmt_list)
	| #(L_WHILE expr stmt_list)
	|! #(L_FOR init:stmt_list test:expr incr:stmt_list
body:stmt_list)
		{
			/* this changes "for" loops to "while" loops */
			antlr::RefAST newbody;
			antlr::RefAST lastBodyStmt =
body->getFirstChild();
			if (antlr::nullAST == lastBodyStmt) {
				newbody = incr;
			} else {
				while (antlr::nullAST !=
lastBodyStmt->getNextSibling())
					lastBodyStmt =
lastBodyStmt->getNextSibling();
	
lastBodyStmt->setNextSibling(incr->getFirstChild());
				newbody = body;
			}
			antlr::RefAST l = #([L_WHILE,"while"], test,
newbody);
			antlr::RefAST lastInitStmt =
init->getFirstChild();
			if (antlr::nullAST == lastInitStmt) {
				## = l;
			} else {
				while (antlr::nullAST !=
lastInitStmt->getNextSibling())
					lastInitStmt =
lastInitStmt->getNextSibling();
				lastInitStmt->setNextSibling(l);
				## = init->getFirstChild();
			}
		}
	;

Now, stmt_list is a simple rule

stmt_list
	: #(STMT_LIST (stmt)*)
	;

and the stmt rule is a big rule, with one alternative being this
(note that in my language there is no difference between statements and
expressions):

	|! #(OPERATOR s1:expr s2:expr)
		{
			/* this changes "x <op> b" to the function call
"<op>(x,y)"
			#OPERATOR->setType(ID);
			## = #([OPEN_PAR,"("], ADGERD,
#([stmt_list,"params"], s1, s2));
		}

Now, this alternative successfully transforms operator statements to
function alls when they are top level statements in functions (accessed
throught stmt_list), but when they're in a for-loop body (named "body")
in the above rule, no transformation takes place, i.e. #(OPERATOR expr
expr) is left as is.

I've tried removing the ! in the for-loop rule but that doesn't help..
the transformation doesn't take place.

Any ideas?

Arnar


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gunay_arslan at yahoo.co.uk  Fri Nov 14 07:22:49 2003
From: gunay_arslan at yahoo.co.uk (gunay_arslan)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Re: Defining AST for the literals ( keywords)
In-Reply-To: <72C9789739C4214096AE945753B11EA3FABA4B@mypxmail04.bco-home.com>
Message-ID: <bp2s09+g5dv@eGroups.com>

What I mean is to have ( at least ) two seperate AST types. 
 1) defined for Keywords ( literals ) 
 2) default one ( defined via   parser setASTNodeClass(String cl) 
method. 

If I set the AST type  using setASTNodeClass(String cl) , how I can
set the AST type for the literal ? ( different AST type ) 

Tks. 

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Yeah, that's done by default.
> 
> Monty
> 
> -----Original Message-----
> From: gunay_arslan [mailto:gunay_arslan@y...] 
> Sent: Thursday, November 13, 2003 3:58 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Defining AST for the literals ( keywords)
> 
> Hi ,
> 
> Is it possible to automatically define a concrete AST type for all
> tokens defined in the lexer grammar ? 
> 
> Thank you in advance.
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Anthony.Youngman at ECA-International.com  Fri Nov 14 07:30:16 2003
From: Anthony.Youngman at ECA-International.com (Anthony W Youngman)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Re: Local lookahead depth
Message-ID: <C7FE35004D40FD45AA342991B88CE40409A997@lnml1.eca-international.local>

Then why were you discussing one as opposed to ten hours :-)

That program I eliminated i/os from was a classic practical example. By
the time I'd made my guesstimate, we only had two weeks left to finish
the project and get the results in the customer's hands. In other words,
if I hadn't optimised then we'd have been sunk if either the first run
failed, or I'd underguesstimated.

(Sunk quite literally - this app was predicting weather at sea :-)

Cheers,
Wol

-----Original Message-----
From: Oliver Zeigermann [mailto:oliver@zeigermann.de] 
Sent: 10 November 2003 19:54
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] Re: Local lookahead depth

> 
> Do you really *need* to do that strictly in the parser?  Why not just
suck
> down a simpler language in the parser -- which recognizes any number
of
> stars followed by a # -- and then do a more refined semantic check in
a
> later stage.  That would make for a much cleaner solution.

John, it seems we again have a communication problem. It is just an 
example to illustrate something. I do not have a practical problem like 
this. This is a *theoretical* discussion. I am talking *theory* all the 
time :)

Oliver



 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 





***********************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

***********************************************************************************


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From johnm-antlr at non.net  Fri Nov 14 09:47:53 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <bp1fnu+33hg@eGroups.com>
References: <16304.28102.554707.148368@despot.non.net>
	<bp1fnu+33hg@eGroups.com>
Message-ID: <16309.5449.40925.296165@despot.non.net>

>>>>> "leung13512c" == leung13512c  <leung13512c@yahoo.com> writes:
[...]

> If the decision change the interpretation of what follows, you may not be
> able to delay that decision to the next pass.

Ah, yes, the possibility that you need to change what's expected at the
same level (i.e., in the parser) makes sense.

> Well thought out language probably would have avoid such scenerio but may
> be there are some bad guys.

Indeed!

Thanks,
	John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jcomuzzi at novell.com  Fri Nov 14 10:08:04 2003
From: jcomuzzi at novell.com (Joe Comuzzi)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Re: Local lookahead depth
Message-ID: <sfb4b79e.062@prv-mail20.provo.novell.com>

This is what I tried to argue before - I think you can always deal with
this problem by adding another tree-walk pass, but you may not get as
good diagnostics doing that...

Joe C.

>>> johnm-antlr@non.net 11/14/2003 12:47:53 PM >>>
>>>>> "leung13512c" == leung13512c  <leung13512c@yahoo.com> writes:
[...]

> If the decision change the interpretation of what follows, you may
not be
> able to delay that decision to the next pass.

Ah, yes, the possibility that you need to change what's expected at
the
same level (i.e., in the parser) makes sense.

> Well thought out language probably would have avoid such scenerio but
may
> be there are some bad guys.

Indeed!

Thanks,
	John


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From richard.ney at aspect.com  Fri Nov 14 10:13:50 2003
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] returnAST and _retTree commented out in C++ header files
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE001AA7977@sac1exch3.aspect.com>

Thanks Ric,

It looks like I was calling one of my older distributions of ANTLR for
codegen but then compiling with the headers from the new one. 

On a side note, does the distribution from your web site include the
latest fix pack for C# since I use both languages? 

-Richard

-----Original Message-----
From: Ric Klaren [mailto:klaren@cs.utwente.nl] 
Sent: Friday, November 14, 2003 2:03 AM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] returnAST and _retTree commented out in
C++ header files

On Thu, Nov 13, 2003 at 07:13:52PM -0800, Ney, Richard wrote:
> Is there a reason that the member fields returnAST and _retTree have
> been commented out in TreeParser.hpp and Parser.hpp in the October
29th
> source bundle off of Ric's site? I'm getting compiling errors from
both
> the parser and tree parser due to these being undefined.

You are certain you are using the right codegenerator ? What combination
of
customAST / heterogeneous AST's are you using ?

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++
-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++
-------
  Chaos is found in greatest abundance wherever order is being sought.
  --- Terry Pratchet


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri Nov 14 10:39:05 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Tree transformation
Message-ID: <72C9789739C4214096AE945753B11EA3FABA5C@mypxmail04.bco-home.com>

Hard to tell.  I recommend using -traceParser and following through the code
to see what's happening.

Monty

-----Original Message-----
From: Arnar Birgisson [mailto:arnarb@oddi.is] 
Sent: Friday, November 14, 2003 7:24 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Tree transformation

Hello..

I'm having some trouble I can't figure out, possibly because I'm doing
something stupid.

I have this rule in a tree parser for transforming loops:

loop_stmt
	: #(L_LOOP stmt_list)
	| #(L_WHILE expr stmt_list)
	|! #(L_FOR init:stmt_list test:expr incr:stmt_list
body:stmt_list)
		{
			/* this changes "for" loops to "while" loops */
			antlr::RefAST newbody;
			antlr::RefAST lastBodyStmt =
body->getFirstChild();
			if (antlr::nullAST == lastBodyStmt) {
				newbody = incr;
			} else {
				while (antlr::nullAST !=
lastBodyStmt->getNextSibling())
					lastBodyStmt =
lastBodyStmt->getNextSibling();
	
lastBodyStmt->setNextSibling(incr->getFirstChild());
				newbody = body;
			}
			antlr::RefAST l = #([L_WHILE,"while"], test,
newbody);
			antlr::RefAST lastInitStmt =
init->getFirstChild();
			if (antlr::nullAST == lastInitStmt) {
				## = l;
			} else {
				while (antlr::nullAST !=
lastInitStmt->getNextSibling())
					lastInitStmt =
lastInitStmt->getNextSibling();
				lastInitStmt->setNextSibling(l);
				## = init->getFirstChild();
			}
		}
	;

Now, stmt_list is a simple rule

stmt_list
	: #(STMT_LIST (stmt)*)
	;

and the stmt rule is a big rule, with one alternative being this
(note that in my language there is no difference between statements and
expressions):

	|! #(OPERATOR s1:expr s2:expr)
		{
			/* this changes "x <op> b" to the function call
"<op>(x,y)"
			#OPERATOR->setType(ID);
			## = #([OPEN_PAR,"("], ADGERD,
#([stmt_list,"params"], s1, s2));
		}

Now, this alternative successfully transforms operator statements to
function alls when they are top level statements in functions (accessed
throught stmt_list), but when they're in a for-loop body (named "body")
in the above rule, no transformation takes place, i.e. #(OPERATOR expr
expr) is left as is.

I've tried removing the ! in the for-loop rule but that doesn't help..
the transformation doesn't take place.

Any ideas?

Arnar


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri Nov 14 10:40:39 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Re: Defining AST for the literals ( keywords
	)
Message-ID: <72C9789739C4214096AE945753B11EA3FABA5D@mypxmail04.bco-home.com>

Oh, you're using heterogenous trees.  I haven't tried those yet, so I can't
help much there.

Monty

-----Original Message-----
From: gunay_arslan [mailto:gunay_arslan@yahoo.co.uk] 
Sent: Friday, November 14, 2003 7:23 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Defining AST for the literals ( keywords)

What I mean is to have ( at least ) two seperate AST types. 
 1) defined for Keywords ( literals ) 
 2) default one ( defined via   parser setASTNodeClass(String cl) 
method. 

If I set the AST type  using setASTNodeClass(String cl) , how I can
set the AST type for the literal ? ( different AST type ) 

Tks. 

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Yeah, that's done by default.
> 
> Monty
> 
> -----Original Message-----
> From: gunay_arslan [mailto:gunay_arslan@y...] 
> Sent: Thursday, November 13, 2003 3:58 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Defining AST for the literals ( keywords)
> 
> Hi ,
> 
> Is it possible to automatically define a concrete AST type for all
> tokens defined in the lexer grammar ? 
> 
> Thank you in advance.
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Fri Nov 14 11:30:28 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <C7FE35004D40FD45AA342991B88CE40409A997@lnml1.eca-international.local>
Message-ID: <bp3agk+r56c@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Anthony W Youngman"
<Anthony.Youngman@E...> wrote:
> Then why were you discussing one as opposed to ten hours :-)

Ten to one was on the other branch discussing with Loring if semantic
actions inside guessing make sense, which is rather practical.

This branch is about having a larger set of parseable languages, which
 - admittedly - is purely theoretical.

Sorry, if these mixed up...

Oliver


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Fri Nov 14 11:34:56 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Re: Defining AST for the literals ( keywords )
In-Reply-To: <72C9789739C4214096AE945753B11EA3FABA5D@mypxmail04.bco-home.com>
Message-ID: <bp3ap0+2enf@eGroups.com>

If you take a look at the xxxTokenTypes files, you will find that each literal has an associated token type.  "return", for example, 
translates to LITERAL_return (or something like).  Just set an AST type for that literal in the "tokens" section and you should get the 
expected behavior.  Just watch out for the new ASTFactory initialization stuff--if you start getting weird crashes, check the 2.7.2 
release notes.

--Loring


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Oh, you're using heterogenous trees.  I haven't tried those yet, so I can't
> help much there.
> 
> Monty
> 
> -----Original Message-----
> From: gunay_arslan [mailto:gunay_arslan@y...] 
> Sent: Friday, November 14, 2003 7:23 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: Defining AST for the literals ( keywords)
> 
> What I mean is to have ( at least ) two seperate AST types. 
>  1) defined for Keywords ( literals ) 
>  2) default one ( defined via   parser setASTNodeClass(String cl) 
> method. 
> 
> If I set the AST type  using setASTNodeClass(String cl) , how I can
> set the AST type for the literal ? ( different AST type ) 
> 
> Tks. 
> 
> --- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> > Yeah, that's done by default.
> > 
> > Monty
> > 
> > -----Original Message-----
> > From: gunay_arslan [mailto:gunay_arslan@y...] 
> > Sent: Thursday, November 13, 2003 3:58 AM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Defining AST for the literals ( keywords)
> > 
> > Hi ,
> > 
> > Is it possible to automatically define a concrete AST type for all
> > tokens defined in the lexer grammar ? 
> > 
> > Thank you in advance.
> > 
> > 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Fri Nov 14 11:55:30 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Re: Local lookahead depth
In-Reply-To: <C7FE35004D40FD45AA342991B88CE40409A996@lnml1.eca-international.local>
Message-ID: <bp3bvi+ohjm@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Anthony W Youngman" <Anthony.Youngman@E...> wrote:
> I agree with Oliver !!!
> 
> Have you EVER hit this sort of problem in real life? I reduced an
> estimated run time of about a week, to an actual run time of under an
> hour, by eliminating disk access from a program. (The estimate was
> achieved by extrapolating from partial runs.)

Certainly.  This isn't rocket science, although you'd think that disk use optimization was a black art from this discussion.  The 
example Oliver used is fundamentally serial--disk thrashing is not an issue unless you buffer data very poorly.  Even when you have to 
do LRU buffering in application software (as opposed to being able to use mmap() or the equivalent for hardware/OS support), you 
should get excellent performance.  The problem is that most developers learn to think of disks as stream devices and not block 
devices and structure their code to have abysmal I/O as a consequence.

> And as Oliver may remember :-) I was in a spat on the relational theory
> newsgroup (which has died down now) about how Pick will smoke SQL for
> speed. While performance may be similar while all the data is cached in
> RAM, as soon as there is any hint of disk thrashing SQL will be hammered
> while Pick is hardly affected - because you can prove mathematically
> that Pick disk i/o is almost optimally perfect :-) Would YOU try running
> a 32-user interactive db on a 386 with 16Mb ram? We did the equivalent,
> and it was plenty fast (actually, it was a MIPS R3000).

The example I'm more familiar with is a system that Forth, Inc. did for a Canadian telecom company back in the '70s.  They supported 
256 users on a 64K VAX with very acceptable interactive performance, some of which is from the lightweight cooperative 
multithreading, and the rest to the disk buffering.

--Loring

> Cheers,
> Wol
> 
> -----Original Message-----
> From: Oliver Zeigermann [mailto:oliver@z...] 
> Sent: 10 November 2003 07:23
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: Local lookahead depth
> 
> > > 
> > > I have the same experience. But consider extremely large amounts 
> > of 
> > > input to be parsed. In this case it is prohibitve to generate an 
> > AST 
> > > because of the memory issue. As a very practical exmaple I have 
> > parsing 
> > > of the AMM (Aircraft Maintenance Manual) which is available in 
> > SGML 
> > > (very hard to parse, really). I parsed this a few years using 
> > ANTLR, but 
> > > its size normally is around 100MB. A few years ago my machine had 
> > 128MB 
> > > of RAM! You see what I mean?
> > 
> > And how much disk space did you have?  On a UNIX box, mmap() is a 
> > good way of automating file I/O, but even on systems without virtual 
> > memory, you can fake it. Performance is not an issue--with a problem 
> > of this size, nothing stays in the processor cache, and the overhead 
> > of the disk writes will be only a few percent.
> > 
> > --Loring
> 
> 
> Loring,
> 
> are you really serious about this? Have a look at the DOM vs. SAX
> discussion in the XML area...
> 
> Oliver
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 
> 
> 
> ***********************************************************************************
> 
> This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to 
you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to 
anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the 
e-mail from your information system.
> 
> Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 
7351 5000 and New York +1 212 582 2333.
> 
> ***********************************************************************************


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri Nov 14 12:10:19 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Yacc to antlr guide?
Message-ID: <72C9789739C4214096AE945753B11EA3FABA65@mypxmail04.bco-home.com>

See http://www.javadude.com/articles/lalrtoll.html for general LALR to LL
hints, but doesn't talk about precedence.

Precedence you will have to work out the LL way with lots of little rules.
Ter's tutorials cover this, I'm sure.

> is there some way to say that all rules 
> return a T without decorating each of them individually?

Only by modifying the code generator or by writing an ANTLR to ANTLR source
to source transformation that adds that to every rule.

Monty

-----Original Message-----
From: Christopher Nebel [mailto:c.nebel@apple.com] 
Sent: Friday, November 14, 2003 12:50 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Yacc to antlr guide?

Is there documentation somewhere on how to translate yacc grammars into 
antlr?  I've got a non-trivial yacc-based grammar I'd like to port.  
Most of the basic grammar parts are straightforward, if tedious, but 
I'm having two specific problems:

1. How do I deal with operator precedence?  The yacc grammar uses 
precedence declarations, and I don't see any equivalent.  Obviously, I 
could break the big rules apart into smaller ones that reflect the 
precedence, but I'm hoping for something more direct.

2. The actions in the original make heavy use of $[$12...], and it's 
not clear to me how to deal with that.  Well, it kind of is.  I can see 
the "rule returns [T v]" bit, but I'm not looking forward to adding 
that to every single rule -- is there some way to say that all rules 
return a T without decorating each of them individually?  The custom 
AST stuff is also sort of applicable, but I've got a bunch of weird 
constraints (notably the fact that the type is *not* a C++ object) that 
make using it somewhat impractical.

Thanks,

--Chris Nebel


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From brian-l-smith at uiowa.edu  Fri Nov 14 12:55:28 2003
From: brian-l-smith at uiowa.edu (brian-l-smith@uiowa.edu)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Re: spam/IRONIC
In-Reply-To: <16AC04B8-166E-11D8-8875-000393BB647E@cs.usfca.edu>
References: <16AC04B8-166E-11D8-8875-000393BB647E@cs.usfca.edu>
Message-ID: <1068843328.3fb54140550a5@webmail3.its.uiowa.edu>

Quoting Terence Parr <parrt@cs.usfca.edu>:

> I found that all recent spam was by one person; i have deleted them...i 
> am loath to turn on the feature that requires me to approve new 
> subscriptions...this is rare so I'll leave for now. :)
> 
> On Thursday, November 13, 2003, at 08:14  PM, dotlessbraille wrote:
> 
> > I do find it ironic that the gurus of a list devoted to parsing
> > can't figure out how to "moderate new users" efficiently :)
> 
> Well, not with somebody else's software, right?  If they let me modify 
> their code, I could add a filter for "ANAL" and stuff ;)

Personally, I thought that all the spam on this list was exceptionally funny
(although, not so much the last one). The [antlr-interest] in front of the
subject only amplifies the comedic value. I actually look forward to them.
Remember "Candy Girl"? That was just hilarious.

Thanks,
Brian


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Matthew.Ford at forward.com.au  Fri Nov 14 12:59:30 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Re: spam
References: <C7FE35004D40FD45AA342991B88CE40409A994@lnml1.eca-international.local>
Message-ID: <004201c3aaf2$32ca6b80$0400a8c0@NOTEBOOK>

I get about 2000 (yes two thousand) spam emails a week, 99% of which I stop
with SpamSleuth.
The odd one that gets through on this list is not a problem.

I suggest Terr just keeps knocking them off.

matthew


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Vladimir.Konstantinov at rogers.com  Fri Nov 14 13:10:08 2003
From: Vladimir.Konstantinov at rogers.com (yahamkon)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Literals table empty
In-Reply-To: <72C9789739C4214096AE945753B11EA3FABA52@mypxmail04.bco-home.com>
Message-ID: <bp3gbg+j3pg@eGroups.com>

Thanks again, but the grammar doesn't recognize the Literal as such, 
it matches an returns an Identifier instead:

/////
class ExpressionParser extends Parser;

options {
	importVocab=Expression;             
	buildAST=true;
}

calc: (ID|fun) END ;
fun: "min"|"max" ;

class ExpressionLexer extends Lexer ;

options{exportVocab=Expression;}

END: ';';

ID options {testLiterals=true;}: 
	('a'..'z'|'A'..'Z'|'_'|'$') 
('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'$')*
;
/////

I looked up the generated code - the Lexer class doesn't populate the 
literals table at all (although "min" and "max" are defined as 
LITERAL_xxx tokens in the respective zzzTokenTypes.java file).

What am I missing now, I compared the options from the java.g file 
and my example (regarding literals), the java geherated lexer has its 
literals table populated, mine is not being populated in the 
generated Lexer class ?

Any ideas? TIA



--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> No, you need a lexer rule something like 
> ID:
> options {testLiterals=true;}
> ('a'..'z' | 'A'..'Z')+
> ;
> 
> Monty
> 
> -----Original Message-----
> From: yahamkon [mailto:Vladimir.Konstantinov@r...] 
> Sent: Thursday, November 13, 2003 11:16 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: help with literals
> 
> Thanks for the fast response!
> 
> >> See docs on literals and any example grammar with an ID rule.
> 
> I've looked in the docs, the "java.g" grammar, also searched the 
> archives but things aren't getting clearer.
> 
> > Yes, you need a rule that will test it's result against the 
defined
> > literals. 
> 
> Isn't "calc" such a rule? To put it defferently, if I had a grammar 
> that specifies a single rule recognising a single literal how would 
> that look like (that's what I had in mind sending the example 
anyway)?
> 
> 
> 
> 
> 
> > 
> > Monty
> > 
> > -----Original Message-----
> > From: VLADIMIR KONSTANTINOV [mailto:Vladimir.Konstantinov@r...] 
> > Sent: Thursday, November 13, 2003 11:03 AM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] help with literals
> > 
> > 
> > I want to specify literals ("min", "max", "sum" etc) in my 
grammar.
> >  
> > I am getting :
> >  line 1:1: unexpected char: 'm'
> >  line 1:2: unexpected char: 'i'
> >  line 1:3: unexpected char: 'n'
> > when testing with the following expression: "min;" 
> >  
> > This a stripped down version of my grammar:
> >  
> > ///
> > class ExpressionParser extends Parser;
> > options { importVocab=Expression; }
> > calc: fun END;
> > fun: "min";
> >  
> > class ExpressionLexer extends Lexer ;
> > options{ exportVocab=Expression;}
> > END: ';'
> > ///
> >  
> > I am missing something very basic, but can't figure it out myself.
> >  
> > Thanks in advance.
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri Nov 14 13:40:00 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Literals table empty
Message-ID: <72C9789739C4214096AE945753B11EA3FABA68@mypxmail04.bco-home.com>

When I copy and paste this into one .g file it works.  The problem probably
has to do with the fact that your are exporting the vocab from the lexer and
importing into the parser.  Look at the docs on import/export vocab stuff,
but I think if you want them in separate files you will have to do some
extra work to keep the vocabularies in sync.  

Has anyone else done this and have some advice?

If you don't have other constraints then keeping the lexer and parser in the
same .g file will certainly make it work.

Monty

-----Original Message-----
From: yahamkon [mailto:Vladimir.Konstantinov@rogers.com] 
Sent: Friday, November 14, 2003 1:10 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Literals table empty

Thanks again, but the grammar doesn't recognize the Literal as such, 
it matches an returns an Identifier instead:

/////
class ExpressionParser extends Parser;

options {
	importVocab=Expression;             
	buildAST=true;
}

calc: (ID|fun) END ;
fun: "min"|"max" ;

class ExpressionLexer extends Lexer ;

options{exportVocab=Expression;}

END: ';';

ID options {testLiterals=true;}: 
	('a'..'z'|'A'..'Z'|'_'|'$') 
('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'$')*
;
/////

I looked up the generated code - the Lexer class doesn't populate the 
literals table at all (although "min" and "max" are defined as 
LITERAL_xxx tokens in the respective zzzTokenTypes.java file).

What am I missing now, I compared the options from the java.g file 
and my example (regarding literals), the java geherated lexer has its 
literals table populated, mine is not being populated in the 
generated Lexer class ?

Any ideas? TIA



--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> No, you need a lexer rule something like 
> ID:
> options {testLiterals=true;}
> ('a'..'z' | 'A'..'Z')+
> ;
> 
> Monty
> 
> -----Original Message-----
> From: yahamkon [mailto:Vladimir.Konstantinov@r...] 
> Sent: Thursday, November 13, 2003 11:16 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: help with literals
> 
> Thanks for the fast response!
> 
> >> See docs on literals and any example grammar with an ID rule.
> 
> I've looked in the docs, the "java.g" grammar, also searched the 
> archives but things aren't getting clearer.
> 
> > Yes, you need a rule that will test it's result against the 
defined
> > literals. 
> 
> Isn't "calc" such a rule? To put it defferently, if I had a grammar 
> that specifies a single rule recognising a single literal how would 
> that look like (that's what I had in mind sending the example 
anyway)?
> 
> 
> 
> 
> 
> > 
> > Monty
> > 
> > -----Original Message-----
> > From: VLADIMIR KONSTANTINOV [mailto:Vladimir.Konstantinov@r...] 
> > Sent: Thursday, November 13, 2003 11:03 AM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] help with literals
> > 
> > 
> > I want to specify literals ("min", "max", "sum" etc) in my 
grammar.
> >  
> > I am getting :
> >  line 1:1: unexpected char: 'm'
> >  line 1:2: unexpected char: 'i'
> >  line 1:3: unexpected char: 'n'
> > when testing with the following expression: "min;" 
> >  
> > This a stripped down version of my grammar:
> >  
> > ///
> > class ExpressionParser extends Parser;
> > options { importVocab=Expression; }
> > calc: fun END;
> > fun: "min";
> >  
> > class ExpressionLexer extends Lexer ;
> > options{ exportVocab=Expression;}
> > END: ';'
> > ///
> >  
> > I am missing something very basic, but can't figure it out myself.
> >  
> > Thanks in advance.
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ewbankb at yahoo.com  Fri Nov 14 14:03:05 2003
From: ewbankb at yahoo.com (Bryan Ewbank)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Yacc to antlr guide?
Message-ID: <20031114220305.25745.qmail@web11509.mail.yahoo.com>

> 1. How do I deal with operator precedence?  The yacc grammar uses
> precedence declarations, and I don't see any equivalent.

You could defer construction of the "correct" tree until the entire
expression is built - construct a stack of operands and operators,
left-to-right, then process it once the entire equation is scanned
and generate the tree at that point.

That means ANTRL will treat all operators as the same level and left
to right, but it does centralizes your precedence table.

=====
- Bryan Ewbank <><

__________________________________
Do you Yahoo!?
Protect your identity with Yahoo! Mail AddressGuard
http://antispam.yahoo.com/whatsnewfree

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Fri Nov 14 16:18:13 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Re: Yacc to antlr guide?
In-Reply-To: <72C9789739C4214096AE945753B11EA3FABA65@mypxmail04.bco-home.com>
Message-ID: <bp3rc5+jjj2@eGroups.com>

Actually, there are a couple of tricks that can be used.

For operator precedence, you can write a pretty simple precedence language processor (in ANTLR, of course) that takes a 
precedence description and outputs an expression grammar.  Including actions, that should take only about two pages of ANTLR 
code.  That may be overkill, if your expression syntax is simple;  you can bypass that by cannibalizing parts of the java or C 
or other available grammar, as mentioned by Ric, provided your expression syntax conforms.

For returning special types, you can include a pointer to any data structure within custom AST classes.  You will have to set those 
fields within rules, but they will be automatically returned (provided buildAST=true).

--Loring


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> See http://www.javadude.com/articles/lalrtoll.html for general LALR to LL
> hints, but doesn't talk about precedence.
> 
> Precedence you will have to work out the LL way with lots of little rules.
> Ter's tutorials cover this, I'm sure.
> 
> > is there some way to say that all rules 
> > return a T without decorating each of them individually?
> 
> Only by modifying the code generator or by writing an ANTLR to ANTLR source
> to source transformation that adds that to every rule.
> 
> Monty
> 
> -----Original Message-----
> From: Christopher Nebel [mailto:c.nebel@a...] 
> Sent: Friday, November 14, 2003 12:50 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Yacc to antlr guide?
> 
> Is there documentation somewhere on how to translate yacc grammars into 
> antlr?  I've got a non-trivial yacc-based grammar I'd like to port.  
> Most of the basic grammar parts are straightforward, if tedious, but 
> I'm having two specific problems:
> 
> 1. How do I deal with operator precedence?  The yacc grammar uses 
> precedence declarations, and I don't see any equivalent.  Obviously, I 
> could break the big rules apart into smaller ones that reflect the 
> precedence, but I'm hoping for something more direct.
> 
> 2. The actions in the original make heavy use of $[$12...], and it's 
> not clear to me how to deal with that.  Well, it kind of is.  I can see 
> the "rule returns [T v]" bit, but I'm not looking forward to adding 
> that to every single rule -- is there some way to say that all rules 
> return a T without decorating each of them individually?  The custom 
> AST stuff is also sort of applicable, but I've got a bunch of weird 
> constraints (notably the fact that the type is *not* a C++ object) that 
> make using it somewhat impractical.
> 
> Thanks,
> 
> --Chris Nebel
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From nastykunt_69x3 at yahoo.com  Fri Nov 14 20:23:44 2003
From: nastykunt_69x3 at yahoo.com (nastykunt_69x3)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Get your carrot wet here!
Message-ID: <bp49og+pkuv@eGroups.com>

If it's been a while since you got your carrot wet then you should defiantly check out this new dating spot where all then sluts are wett like water. Take a look!
http://www.hotpersonalad.com/landing.asp?afl=NYHO


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jean-louis.boulanger at hds.utc.fr  Sat Nov 15 02:00:56 2003
From: jean-louis.boulanger at hds.utc.fr (Boulanger Jean-Louis)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Literals table empty
In-Reply-To: <72C9789739C4214096AE945753B11EA3FABA68@mypxmail04.bco-home.com>
References: <72C9789739C4214096AE945753B11EA3FABA68@mypxmail04.bco-home.com>
Message-ID: <1068890456.3fb5f9581d57b@mail.hds.utc.fr>

Hello,

 I have the same pb in a big grammar where parser and lexer are in the same
file. I use import and export clause and I don't find a solution. I supposes
that is a little bug. This pb appear also when you consruct a new grammar by
inheritance.

BJL 

Selon mzukowski@yci.com:

> When I copy and paste this into one .g file it works.  The problem probably
> has to do with the fact that your are exporting the vocab from the lexer and
> importing into the parser.  Look at the docs on import/export vocab stuff,
> but I think if you want them in separate files you will have to do some
> extra work to keep the vocabularies in sync.  
> 
> Has anyone else done this and have some advice?
> 
> If you don't have other constraints then keeping the lexer and parser in the
> same .g file will certainly make it work.
> 
> Monty
> 
> -----Original Message-----
> From: yahamkon [mailto:Vladimir.Konstantinov@rogers.com] 
> Sent: Friday, November 14, 2003 1:10 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Literals table empty
> 
> Thanks again, but the grammar doesn't recognize the Literal as such, 
> it matches an returns an Identifier instead:
> 
> /////
> class ExpressionParser extends Parser;
> 
> options {
> 	importVocab=Expression;             
> 	buildAST=true;
> }
> 
> calc: (ID|fun) END ;
> fun: "min"|"max" ;
> 
> class ExpressionLexer extends Lexer ;
> 
> options{exportVocab=Expression;}
> 
> END: ';';
> 
> ID options {testLiterals=true;}: 
> 	('a'..'z'|'A'..'Z'|'_'|'$') 
> ('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'$')*
> ;
> /////
> 
> I looked up the generated code - the Lexer class doesn't populate the 
> literals table at all (although "min" and "max" are defined as 
> LITERAL_xxx tokens in the respective zzzTokenTypes.java file).
> 
> What am I missing now, I compared the options from the java.g file 
> and my example (regarding literals), the java geherated lexer has its 
> literals table populated, mine is not being populated in the 
> generated Lexer class ?
> 
> Any ideas? TIA
> 
> 
> 
> --- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> > No, you need a lexer rule something like 
> > ID:
> > options {testLiterals=true;}
> > ('a'..'z' | 'A'..'Z')+
> > ;
> > 
> > Monty
> > 
> > -----Original Message-----
> > From: yahamkon [mailto:Vladimir.Konstantinov@r...] 
> > Sent: Thursday, November 13, 2003 11:16 AM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Re: help with literals
> > 
> > Thanks for the fast response!
> > 
> > >> See docs on literals and any example grammar with an ID rule.
> > 
> > I've looked in the docs, the "java.g" grammar, also searched the 
> > archives but things aren't getting clearer.
> > 
> > > Yes, you need a rule that will test it's result against the 
> defined
> > > literals. 
> > 
> > Isn't "calc" such a rule? To put it defferently, if I had a grammar 
> > that specifies a single rule recognising a single literal how would 
> > that look like (that's what I had in mind sending the example 
> anyway)?
> > 
> > 
> > 
> > 
> > 
> > > 
> > > Monty
> > > 
> > > -----Original Message-----
> > > From: VLADIMIR KONSTANTINOV [mailto:Vladimir.Konstantinov@r...] 
> > > Sent: Thursday, November 13, 2003 11:03 AM
> > > To: antlr-interest@yahoogroups.com
> > > Subject: [antlr-interest] help with literals
> > > 
> > > 
> > > I want to specify literals ("min", "max", "sum" etc) in my 
> grammar.
> > >  
> > > I am getting :
> > >  line 1:1: unexpected char: 'm'
> > >  line 1:2: unexpected char: 'i'
> > >  line 1:3: unexpected char: 'n'
> > > when testing with the following expression: "min;" 
> > >  
> > > This a stripped down version of my grammar:
> > >  
> > > ///
> > > class ExpressionParser extends Parser;
> > > options { importVocab=Expression; }
> > > calc: fun END;
> > > fun: "min";
> > >  
> > > class ExpressionLexer extends Lexer ;
> > > options{ exportVocab=Expression;}
> > > END: ';'
> > > ///
> > >  
> > > I am missing something very basic, but can't figure it out myself.
> > >  
> > > Thanks in advance.
> > > 
> > > 
> > >  
> > > 
> > > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 




-------------------------------------------------
Laboratoire Heudiasyc. UMR CNRS 6599
http://www.hds.utc.fr

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Sat Nov 15 06:54:43 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] returnAST and _retTree commented out in C++ header files
In-Reply-To: <0F9CBE7F81945C4BB7A32BE6E7656EE001AA7977@sac1exch3.aspect.com>; from richard.ney@aspect.com on Fri, Nov 14, 2003 at 10:13:50AM -0800
References: <0F9CBE7F81945C4BB7A32BE6E7656EE001AA7977@sac1exch3.aspect.com>
Message-ID: <20031115155443.B548@cs.utwente.nl>

On Fri, Nov 14, 2003 at 10:13:50AM -0800, Ney, Richard wrote:
> It looks like I was calling one of my older distributions of ANTLR for
> codegen but then compiling with the headers from the new one. 
> 
> On a side note, does the distribution from your web site include the
> latest fix pack for C# since I use both languages? 

If Michael checked those in into the repository before the timestamp than
it should be in there. My snapshots are usually only things that are in the
repository adn sometimes a few test things which are not checked in yet.

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Why don't we just invite them to dinner and massacre them all when they're
  drunk? You heard the man. There's seven hundred thousand of them. Ah? ..
           So it'd have to be something simple with pasta, then.
                 From: Interesting Times by Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Sat Nov 15 12:06:08 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] (unknown)
In-Reply-To: <1068751032.3fb3d8b8afdea@mail.hds.utc.fr>
Message-ID: <26F934E5-17A7-11D8-99AD-000A95891192@cs.usfca.edu>

Ooops...fixed.  Thanks,
Ter

On Thursday, November 13, 2003, at 11:17 AM, Boulanger Jean-Louis wrote:

> Hello
>
> Just for information next link are dead :
>  http://antlr.org/papers/parr.phd.thesis.ps.gz
>  http://antlr.org/papers/parr.phd.thesis.ps.zip
>
>
>
>
> -------------------------------------------------
> Laboratoire Heudiasyc. UMR CNRS 6599
> http://www.hds.utc.fr
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tzagotta1 at sienasystems.com  Sat Nov 15 14:55:06 2003
From: tzagotta1 at sienasystems.com (Tom Zagotta)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] C Grammar Status
In-Reply-To: <20031115155443.B548@cs.utwente.nl>
Message-ID: <200311152252.QAA10990@coral.propagation.net>

Dear Group,

Can anyone let me know the status of the GNU C grammar on antlr.org?

I know the C++ grammar on antlr.org is pretty out of date.  I see dates like
1997 on the C grammar, but is it reasonably correct relative to Standard C,
and usable with the current release of ANTLR?

Does anybody have any experience to offer with this grammar?

Thanks in advance,

- Tom


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From johnm-antlr at non.net  Sat Nov 15 17:24:50 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] C Grammar Status
In-Reply-To: <200311152252.QAA10990@coral.propagation.net>
References: <20031115155443.B548@cs.utwente.nl>
	<200311152252.QAA10990@coral.propagation.net>
Message-ID: <16310.53730.290608.89534@despot.non.net>

>>>>> "Tom" == Tom Zagotta <tzagotta1@sienasystems.com> writes:
[...]

> Can anyone let me know the status of the GNU C grammar on antlr.org?

It's there and it's free? :-)

> I know the C++ grammar on antlr.org is pretty out of date.  I see dates
> like 1997 on the C grammar, but is it reasonably correct relative to
> Standard C, and usable with the current release of ANTLR?

> Does anybody have any experience to offer with this grammar?

Well, I'm clearly biased so I'll restrain myself. :-)

Unless somebody's hacked on it that I don't know about, it's still Standard
C ('89 (not 9X, etc.)) with the GNU C extensions (as of when it was
written).

I haven't tried it recently so I don't know if there's anything that needs
to be updated w.r.t. recent Antlr updates.

Obviously, if you run into any problems with it, please do let us know.

Take care,
	John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Sun Nov 16 10:30:32 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Literals in lexer
Message-ID: <002201c3ac6f$b84dce40$01cf090a@oddi.is>

Hello..

I have those rules in my lexer:

L_THIS : "this" ;
L_NAME : NameChar ( NameChar | '0'..'9' )* ;
protected NameChar : ( 'a'..'z' | etc. ) ;

Now, the input "thisfile" is taken as two tokens, (L_THIS,"this") and
(L_NAME,"file"). How do I correct this. The obvious way is to put
predicates in all the L_* rules I have.. but there must be a simpler
way.

I have read the documentation on literals in lexical anlyzers.. but I
can't figure out how to do this.

thanks..

Arnar


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Sun Nov 16 11:51:55 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Tree transformation
In-Reply-To: <72C9789739C4214096AE945753B11EA3FABA5C@mypxmail04.bco-home.com>
Message-ID: <002301c3ac7b$17a59bb0$01cf090a@oddi.is>

Hello again..

I solved this problem by rewriting the transformation so that it worked
without the !. However, I keep hitting this wall in other places, and
now I'm completely stuck. Consider those (simplified) constructs in my
language

f -> procedure()
var x
body
  expression1,
  block
    x := \incr x,
    \print [1,2,3]
  endblock,
  x := \incr ,
  \print [1,2,3]
endbody

Now.. the expressions "\incr x" and "[1,2,3]" have such trees:

#([OPERATOR,"incr"] x)
#([LIST,"["] #([EXPR_LIST] 1 2 3) )

and I have rules in my tree transformer that changes them to the
equivalent of the expressions "incr(x)" (function call) and
"mk_pair(1,mk_pair(2,mk_pair(3,[])))". This transformation works very
well for the second pair of those expressions.

Now I want to make a transformation for turning

BLOCK
 | 
EXPR_LIST
 |
expr1 - expr2 - ... - exprN

to

expr1 - expr2 - ... - exprN.

For this I have the rule alternative

|! #(BLOCK list:expr_list)
	{
		## = list->getFirstChild();
	}

This seems to work except that the transformations inside this instance
of expr_list don't get executed. Therefore, the transformation of the
code above is applied only to the second pair of afformentioned
expressions.

I'm using exactly the same rule (expr_list) to traverse the list of
expressions whether they are inside the procedure body, or inside a
block. I'm stumped!

If I remove the ! I get two copies of the subtree, one where
transformations have been applied, and one where they havent...

Am I doing something terribly wrong or is this unexpected behaviour?

Arnar


> -----Original Message-----
> From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
> Sent: 14. n?vember 2003 18:39
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Tree transformation
> 
> 
> Hard to tell.  I recommend using -traceParser and following 
> through the code
> to see what's happening.
> 
> Monty
> 
> -----Original Message-----
> From: Arnar Birgisson [mailto:arnarb@oddi.is] 
> Sent: Friday, November 14, 2003 7:24 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Tree transformation
> 
> Hello..
> 
> I'm having some trouble I can't figure out, possibly because I'm doing
> something stupid.
> 
> I have this rule in a tree parser for transforming loops:
> 
> loop_stmt
> 	: #(L_LOOP stmt_list)
> 	| #(L_WHILE expr stmt_list)
> 	|! #(L_FOR init:stmt_list test:expr incr:stmt_list
> body:stmt_list)
> 		{
> 			/* this changes "for" loops to "while" loops */
> 			antlr::RefAST newbody;
> 			antlr::RefAST lastBodyStmt =
> body->getFirstChild();
> 			if (antlr::nullAST == lastBodyStmt) {
> 				newbody = incr;
> 			} else {
> 				while (antlr::nullAST !=
> lastBodyStmt->getNextSibling())
> 					lastBodyStmt =
> lastBodyStmt->getNextSibling();
> 	
> lastBodyStmt->setNextSibling(incr->getFirstChild());
> 				newbody = body;
> 			}
> 			antlr::RefAST l = #([L_WHILE,"while"], test,
> newbody);
> 			antlr::RefAST lastInitStmt =
> init->getFirstChild();
> 			if (antlr::nullAST == lastInitStmt) {
> 				## = l;
> 			} else {
> 				while (antlr::nullAST !=
> lastInitStmt->getNextSibling())
> 					lastInitStmt =
> lastInitStmt->getNextSibling();
> 				lastInitStmt->setNextSibling(l);
> 				## = init->getFirstChild();
> 			}
> 		}
> 	;
> 
> Now, stmt_list is a simple rule
> 
> stmt_list
> 	: #(STMT_LIST (stmt)*)
> 	;
> 
> and the stmt rule is a big rule, with one alternative being this
> (note that in my language there is no difference between 
> statements and
> expressions):
> 
> 	|! #(OPERATOR s1:expr s2:expr)
> 		{
> 			/* this changes "x <op> b" to the function call
> "<op>(x,y)"
> 			#OPERATOR->setType(ID);
> 			## = #([OPEN_PAR,"("], ADGERD,
> #([stmt_list,"params"], s1, s2));
> 		}
> 
> Now, this alternative successfully transforms operator statements to
> function alls when they are top level statements in functions 
> (accessed
> throught stmt_list), but when they're in a for-loop body 
> (named "body")
> in the above rule, no transformation takes place, i.e. #(OPERATOR expr
> expr) is left as is.
> 
> I've tried removing the ! in the for-loop rule but that doesn't help..
> the transformation doesn't take place.
> 
> Any ideas?
> 
> Arnar
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! 
> Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Sun Nov 16 11:54:44 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Tree transformation
In-Reply-To: <002301c3ac7b$17a59bb0$01cf090a@oddi.is>
Message-ID: <002401c3ac7b$7ce7d970$01cf090a@oddi.is>

I forgot to mention:
The output of traceTreeParser looks exactly the same for the pair inside
block..endblock and the one outside of it.

Arnar

> -----Original Message-----
> From: Arnar Birgisson [mailto:arnarb@oddi.is] 
> Sent: 16. n?vember 2003 19:52
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Tree transformation
> 
> 
> Hello again..
> 
> I solved this problem by rewriting the transformation so that 
> it worked
> without the !. However, I keep hitting this wall in other places, and
> now I'm completely stuck. Consider those (simplified) constructs in my
> language
> 
> f -> procedure()
> var x
> body
>   expression1,
>   block
>     x := \incr x,
>     \print [1,2,3]
>   endblock,
>   x := \incr ,
>   \print [1,2,3]
> endbody
> 
> Now.. the expressions "\incr x" and "[1,2,3]" have such trees:
> 
> #([OPERATOR,"incr"] x)
> #([LIST,"["] #([EXPR_LIST] 1 2 3) )
> 
> and I have rules in my tree transformer that changes them to the
> equivalent of the expressions "incr(x)" (function call) and
> "mk_pair(1,mk_pair(2,mk_pair(3,[])))". This transformation works very
> well for the second pair of those expressions.
> 
> Now I want to make a transformation for turning
> 
> BLOCK
>  | 
> EXPR_LIST
>  |
> expr1 - expr2 - ... - exprN
> 
> to
> 
> expr1 - expr2 - ... - exprN.
> 
> For this I have the rule alternative
> 
> |! #(BLOCK list:expr_list)
> 	{
> 		## = list->getFirstChild();
> 	}
> 
> This seems to work except that the transformations inside 
> this instance
> of expr_list don't get executed. Therefore, the transformation of the
> code above is applied only to the second pair of afformentioned
> expressions.
> 
> I'm using exactly the same rule (expr_list) to traverse the list of
> expressions whether they are inside the procedure body, or inside a
> block. I'm stumped!
> 
> If I remove the ! I get two copies of the subtree, one where
> transformations have been applied, and one where they havent...
> 
> Am I doing something terribly wrong or is this unexpected behaviour?
> 
> Arnar
> 
> 
> > -----Original Message-----
> > From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
> > Sent: 14. n?vember 2003 18:39
> > To: antlr-interest@yahoogroups.com
> > Subject: RE: [antlr-interest] Tree transformation
> > 
> > 
> > Hard to tell.  I recommend using -traceParser and following 
> > through the code
> > to see what's happening.
> > 
> > Monty
> > 
> > -----Original Message-----
> > From: Arnar Birgisson [mailto:arnarb@oddi.is] 
> > Sent: Friday, November 14, 2003 7:24 AM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Tree transformation
> > 
> > Hello..
> > 
> > I'm having some trouble I can't figure out, possibly 
> because I'm doing
> > something stupid.
> > 
> > I have this rule in a tree parser for transforming loops:
> > 
> > loop_stmt
> > 	: #(L_LOOP stmt_list)
> > 	| #(L_WHILE expr stmt_list)
> > 	|! #(L_FOR init:stmt_list test:expr incr:stmt_list
> > body:stmt_list)
> > 		{
> > 			/* this changes "for" loops to "while" loops */
> > 			antlr::RefAST newbody;
> > 			antlr::RefAST lastBodyStmt =
> > body->getFirstChild();
> > 			if (antlr::nullAST == lastBodyStmt) {
> > 				newbody = incr;
> > 			} else {
> > 				while (antlr::nullAST !=
> > lastBodyStmt->getNextSibling())
> > 					lastBodyStmt =
> > lastBodyStmt->getNextSibling();
> > 	
> > lastBodyStmt->setNextSibling(incr->getFirstChild());
> > 				newbody = body;
> > 			}
> > 			antlr::RefAST l = #([L_WHILE,"while"], test,
> > newbody);
> > 			antlr::RefAST lastInitStmt =
> > init->getFirstChild();
> > 			if (antlr::nullAST == lastInitStmt) {
> > 				## = l;
> > 			} else {
> > 				while (antlr::nullAST !=
> > lastInitStmt->getNextSibling())
> > 					lastInitStmt =
> > lastInitStmt->getNextSibling();
> > 				lastInitStmt->setNextSibling(l);
> > 				## = init->getFirstChild();
> > 			}
> > 		}
> > 	;
> > 
> > Now, stmt_list is a simple rule
> > 
> > stmt_list
> > 	: #(STMT_LIST (stmt)*)
> > 	;
> > 
> > and the stmt rule is a big rule, with one alternative being this
> > (note that in my language there is no difference between 
> > statements and
> > expressions):
> > 
> > 	|! #(OPERATOR s1:expr s2:expr)
> > 		{
> > 			/* this changes "x <op> b" to the function call
> > "<op>(x,y)"
> > 			#OPERATOR->setType(ID);
> > 			## = #([OPEN_PAR,"("], ADGERD,
> > #([stmt_list,"params"], s1, s2));
> > 		}
> > 
> > Now, this alternative successfully transforms operator statements to
> > function alls when they are top level statements in functions 
> > (accessed
> > throught stmt_list), but when they're in a for-loop body 
> > (named "body")
> > in the above rule, no transformation takes place, i.e. 
> #(OPERATOR expr
> > expr) is left as is.
> > 
> > I've tried removing the ! in the for-loop rule but that 
> doesn't help..
> > the transformation doesn't take place.
> > 
> > Any ideas?
> > 
> > Arnar
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! 
> > Groups is subject to http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Sun Nov 16 12:26:52 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Re: Tree transformation
In-Reply-To: <002301c3ac7b$17a59bb0$01cf090a@oddi.is>
Message-ID: <bp8mic+dm89@eGroups.com>

Arnar--

Take a look at <http://www.antlr.org/doc/trees.html#Action%
20Translation>.  ANTLR labels get transformed during translation; if 
I remember correctly, #label translates to labelAST and #label_in to 
label.  You are probably reusing the input tree by accident here.  
Try replacing list with #list in the action.

--Loring

--- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
<arnarb@o...> wrote:
> Hello again..
> 
> I solved this problem by rewriting the transformation so that it 
worked
> without the !. However, I keep hitting this wall in other places, 
and
> now I'm completely stuck. Consider those (simplified) constructs 
in my
> language
> 
> f -> procedure()
> var x
> body
>   expression1,
>   block
>     x := \incr x,
>     \print [1,2,3]
>   endblock,
>   x := \incr ,
>   \print [1,2,3]
> endbody
> 
> Now.. the expressions "\incr x" and "[1,2,3]" have such trees:
> 
> #([OPERATOR,"incr"] x)
> #([LIST,"["] #([EXPR_LIST] 1 2 3) )
> 
> and I have rules in my tree transformer that changes them to the
> equivalent of the expressions "incr(x)" (function call) and
> "mk_pair(1,mk_pair(2,mk_pair(3,[])))". This transformation works 
very
> well for the second pair of those expressions.
> 
> Now I want to make a transformation for turning
> 
> BLOCK
>  | 
> EXPR_LIST
>  |
> expr1 - expr2 - ... - exprN
> 
> to
> 
> expr1 - expr2 - ... - exprN.
> 
> For this I have the rule alternative
> 
> |! #(BLOCK list:expr_list)
> 	{
> 		## = list->getFirstChild();
> 	}
> 
> This seems to work except that the transformations inside this 
instance
> of expr_list don't get executed. Therefore, the transformation of 
the
> code above is applied only to the second pair of afformentioned
> expressions.
> 
> I'm using exactly the same rule (expr_list) to traverse the list of
> expressions whether they are inside the procedure body, or inside a
> block. I'm stumped!
> 
> If I remove the ! I get two copies of the subtree, one where
> transformations have been applied, and one where they havent...
> 
> Am I doing something terribly wrong or is this unexpected 
behaviour?
> 
> Arnar
> 
> 
> > -----Original Message-----
> > From: mzukowski@y... [mailto:mzukowski@y...] 
> > Sent: 14. n?vember 2003 18:39
> > To: antlr-interest@yahoogroups.com
> > Subject: RE: [antlr-interest] Tree transformation
> > 
> > 
> > Hard to tell.  I recommend using -traceParser and following 
> > through the code
> > to see what's happening.
> > 
> > Monty
> > 
> > -----Original Message-----
> > From: Arnar Birgisson [mailto:arnarb@o...] 
> > Sent: Friday, November 14, 2003 7:24 AM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Tree transformation
> > 
> > Hello..
> > 
> > I'm having some trouble I can't figure out, possibly because I'm 
doing
> > something stupid.
> > 
> > I have this rule in a tree parser for transforming loops:
> > 
> > loop_stmt
> > 	: #(L_LOOP stmt_list)
> > 	| #(L_WHILE expr stmt_list)
> > 	|! #(L_FOR init:stmt_list test:expr incr:stmt_list
> > body:stmt_list)
> > 		{
> > 			/* this changes "for" loops to "while" loops 
*/
> > 			antlr::RefAST newbody;
> > 			antlr::RefAST lastBodyStmt =
> > body->getFirstChild();
> > 			if (antlr::nullAST == lastBodyStmt) {
> > 				newbody = incr;
> > 			} else {
> > 				while (antlr::nullAST !=
> > lastBodyStmt->getNextSibling())
> > 					lastBodyStmt =
> > lastBodyStmt->getNextSibling();
> > 	
> > lastBodyStmt->setNextSibling(incr->getFirstChild());
> > 				newbody = body;
> > 			}
> > 			antlr::RefAST l = #([L_WHILE,"while"], test,
> > newbody);
> > 			antlr::RefAST lastInitStmt =
> > init->getFirstChild();
> > 			if (antlr::nullAST == lastInitStmt) {
> > 				## = l;
> > 			} else {
> > 				while (antlr::nullAST !=
> > lastInitStmt->getNextSibling())
> > 					lastInitStmt =
> > lastInitStmt->getNextSibling();
> > 				lastInitStmt->setNextSibling(l);
> > 				## = init->getFirstChild();
> > 			}
> > 		}
> > 	;
> > 
> > Now, stmt_list is a simple rule
> > 
> > stmt_list
> > 	: #(STMT_LIST (stmt)*)
> > 	;
> > 
> > and the stmt rule is a big rule, with one alternative being this
> > (note that in my language there is no difference between 
> > statements and
> > expressions):
> > 
> > 	|! #(OPERATOR s1:expr s2:expr)
> > 		{
> > 			/* this changes "x <op> b" to the function 
call
> > "<op>(x,y)"
> > 			#OPERATOR->setType(ID);
> > 			## = #([OPEN_PAR,"("], ADGERD,
> > #([stmt_list,"params"], s1, s2));
> > 		}
> > 
> > Now, this alternative successfully transforms operator 
statements to
> > function alls when they are top level statements in functions 
> > (accessed
> > throught stmt_list), but when they're in a for-loop body 
> > (named "body")
> > in the above rule, no transformation takes place, i.e. #
(OPERATOR expr
> > expr) is left as is.
> > 
> > I've tried removing the ! in the for-loop rule but that doesn't 
help..
> > the transformation doesn't take place.
> > 
> > Any ideas?
> > 
> > Arnar
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! 
> > Groups is subject to http://docs.yahoo.com/info/terms/ 
> > 
> >


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Sun Nov 16 14:24:27 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Re: Tree transformation
In-Reply-To: <bp8mic+dm89@eGroups.com>
Message-ID: <002801c3ac90$657ced60$01cf090a@oddi.is>

Hi there,

I tried putting # in front of list, which made it worse. Before, only
the first level of the subtree wasn't being processed, after putting #
in front of the label name, it seems that the whole subtree is not
transformed. The result is just as if I copied the input-tree as-is.

Arnar

> -----Original Message-----
> From: lgcraymer [mailto:lgc@mail1.jpl.nasa.gov] 
> Sent: 16. n?vember 2003 20:27
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: Tree transformation
> 
> 
> Arnar--
> 
> Take a look at <http://www.antlr.org/doc/trees.html#Action%
> 20Translation>.  ANTLR labels get transformed during translation; if 
> I remember correctly, #label translates to labelAST and #label_in to 
> label.  You are probably reusing the input tree by accident here.  
> Try replacing list with #list in the action.
> 
> --Loring
> 
> --- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
> <arnarb@o...> wrote:
> > Hello again..
> > 
> > I solved this problem by rewriting the transformation so that it 
> worked
> > without the !. However, I keep hitting this wall in other places, 
> and
> > now I'm completely stuck. Consider those (simplified) constructs 
> in my
> > language
> > 
> > f -> procedure()
> > var x
> > body
> >   expression1,
> >   block
> >     x := \incr x,
> >     \print [1,2,3]
> >   endblock,
> >   x := \incr ,
> >   \print [1,2,3]
> > endbody
> > 
> > Now.. the expressions "\incr x" and "[1,2,3]" have such trees:
> > 
> > #([OPERATOR,"incr"] x)
> > #([LIST,"["] #([EXPR_LIST] 1 2 3) )
> > 
> > and I have rules in my tree transformer that changes them to the
> > equivalent of the expressions "incr(x)" (function call) and
> > "mk_pair(1,mk_pair(2,mk_pair(3,[])))". This transformation works 
> very
> > well for the second pair of those expressions.
> > 
> > Now I want to make a transformation for turning
> > 
> > BLOCK
> >  | 
> > EXPR_LIST
> >  |
> > expr1 - expr2 - ... - exprN
> > 
> > to
> > 
> > expr1 - expr2 - ... - exprN.
> > 
> > For this I have the rule alternative
> > 
> > |! #(BLOCK list:expr_list)
> > 	{
> > 		## = list->getFirstChild();
> > 	}
> > 
> > This seems to work except that the transformations inside this 
> instance
> > of expr_list don't get executed. Therefore, the transformation of 
> the
> > code above is applied only to the second pair of afformentioned
> > expressions.
> > 
> > I'm using exactly the same rule (expr_list) to traverse the list of
> > expressions whether they are inside the procedure body, or inside a
> > block. I'm stumped!
> > 
> > If I remove the ! I get two copies of the subtree, one where
> > transformations have been applied, and one where they havent...
> > 
> > Am I doing something terribly wrong or is this unexpected 
> behaviour?
> > 
> > Arnar
> > 
> > 
> > > -----Original Message-----
> > > From: mzukowski@y... [mailto:mzukowski@y...] 
> > > Sent: 14. n?vember 2003 18:39
> > > To: antlr-interest@yahoogroups.com
> > > Subject: RE: [antlr-interest] Tree transformation
> > > 
> > > 
> > > Hard to tell.  I recommend using -traceParser and following 
> > > through the code
> > > to see what's happening.
> > > 
> > > Monty
> > > 
> > > -----Original Message-----
> > > From: Arnar Birgisson [mailto:arnarb@o...] 
> > > Sent: Friday, November 14, 2003 7:24 AM
> > > To: antlr-interest@yahoogroups.com
> > > Subject: [antlr-interest] Tree transformation
> > > 
> > > Hello..
> > > 
> > > I'm having some trouble I can't figure out, possibly because I'm 
> doing
> > > something stupid.
> > > 
> > > I have this rule in a tree parser for transforming loops:
> > > 
> > > loop_stmt
> > > 	: #(L_LOOP stmt_list)
> > > 	| #(L_WHILE expr stmt_list)
> > > 	|! #(L_FOR init:stmt_list test:expr incr:stmt_list
> > > body:stmt_list)
> > > 		{
> > > 			/* this changes "for" loops to "while" loops 
> */
> > > 			antlr::RefAST newbody;
> > > 			antlr::RefAST lastBodyStmt =
> > > body->getFirstChild();
> > > 			if (antlr::nullAST == lastBodyStmt) {
> > > 				newbody = incr;
> > > 			} else {
> > > 				while (antlr::nullAST !=
> > > lastBodyStmt->getNextSibling())
> > > 					lastBodyStmt =
> > > lastBodyStmt->getNextSibling();
> > > 	
> > > lastBodyStmt->setNextSibling(incr->getFirstChild());
> > > 				newbody = body;
> > > 			}
> > > 			antlr::RefAST l = #([L_WHILE,"while"], test,
> > > newbody);
> > > 			antlr::RefAST lastInitStmt =
> > > init->getFirstChild();
> > > 			if (antlr::nullAST == lastInitStmt) {
> > > 				## = l;
> > > 			} else {
> > > 				while (antlr::nullAST !=
> > > lastInitStmt->getNextSibling())
> > > 					lastInitStmt =
> > > lastInitStmt->getNextSibling();
> > > 				lastInitStmt->setNextSibling(l);
> > > 				## = init->getFirstChild();
> > > 			}
> > > 		}
> > > 	;
> > > 
> > > Now, stmt_list is a simple rule
> > > 
> > > stmt_list
> > > 	: #(STMT_LIST (stmt)*)
> > > 	;
> > > 
> > > and the stmt rule is a big rule, with one alternative being this
> > > (note that in my language there is no difference between 
> > > statements and
> > > expressions):
> > > 
> > > 	|! #(OPERATOR s1:expr s2:expr)
> > > 		{
> > > 			/* this changes "x <op> b" to the function 
> call
> > > "<op>(x,y)"
> > > 			#OPERATOR->setType(ID);
> > > 			## = #([OPEN_PAR,"("], ADGERD,
> > > #([stmt_list,"params"], s1, s2));
> > > 		}
> > > 
> > > Now, this alternative successfully transforms operator 
> statements to
> > > function alls when they are top level statements in functions 
> > > (accessed
> > > throught stmt_list), but when they're in a for-loop body 
> > > (named "body")
> > > in the above rule, no transformation takes place, i.e. #
> (OPERATOR expr
> > > expr) is left as is.
> > > 
> > > I've tried removing the ! in the for-loop rule but that doesn't 
> help..
> > > the transformation doesn't take place.
> > > 
> > > Any ideas?
> > > 
> > > Arnar
> > > 
> > > 
> > >  
> > > 
> > > Your use of Yahoo! Groups is subject to 
> > > http://docs.yahoo.com/info/terms/ 
> > > 
> > > 
> > >  
> > > 
> > > Your use of Yahoo! 
> > > Groups is subject to http://docs.yahoo.com/info/terms/ 
> > > 
> > >
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Sun Nov 16 18:47:48 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Re: Tree transformation
In-Reply-To: <002801c3ac90$657ced60$01cf090a@oddi.is>
Message-ID: <bp9csk+b6bj@eGroups.com>

Arnar--

That sounds like something may have been broken in 2.7.2.  It sounds 
very much like you are referencing the input tree, and that 
shouldn't be happening.

Ric--Any thoughts?

--Loring


--- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
<arnarb@o...> wrote:
> Hi there,
> 
> I tried putting # in front of list, which made it worse. Before, 
only
> the first level of the subtree wasn't being processed, after 
putting #
> in front of the label name, it seems that the whole subtree is not
> transformed. The result is just as if I copied the input-tree as-
is.
> 
> Arnar
> 
> > -----Original Message-----
> > From: lgcraymer [mailto:lgc@m...] 
> > Sent: 16. n?vember 2003 20:27
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Re: Tree transformation
> > 
> > 
> > Arnar--
> > 
> > Take a look at <http://www.antlr.org/doc/trees.html#Action%
> > 20Translation>.  ANTLR labels get transformed during 
translation; if 
> > I remember correctly, #label translates to labelAST and 
#label_in to 
> > label.  You are probably reusing the input tree by accident 
here.  
> > Try replacing list with #list in the action.
> > 
> > --Loring
> > 
> > --- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
> > <arnarb@o...> wrote:
> > > Hello again..
> > > 
> > > I solved this problem by rewriting the transformation so that 
it 
> > worked
> > > without the !. However, I keep hitting this wall in other 
places, 
> > and
> > > now I'm completely stuck. Consider those (simplified) 
constructs 
> > in my
> > > language
> > > 
> > > f -> procedure()
> > > var x
> > > body
> > >   expression1,
> > >   block
> > >     x := \incr x,
> > >     \print [1,2,3]
> > >   endblock,
> > >   x := \incr ,
> > >   \print [1,2,3]
> > > endbody
> > > 
> > > Now.. the expressions "\incr x" and "[1,2,3]" have such trees:
> > > 
> > > #([OPERATOR,"incr"] x)
> > > #([LIST,"["] #([EXPR_LIST] 1 2 3) )
> > > 
> > > and I have rules in my tree transformer that changes them to 
the
> > > equivalent of the expressions "incr(x)" (function call) and
> > > "mk_pair(1,mk_pair(2,mk_pair(3,[])))". This transformation 
works 
> > very
> > > well for the second pair of those expressions.
> > > 
> > > Now I want to make a transformation for turning
> > > 
> > > BLOCK
> > >  | 
> > > EXPR_LIST
> > >  |
> > > expr1 - expr2 - ... - exprN
> > > 
> > > to
> > > 
> > > expr1 - expr2 - ... - exprN.
> > > 
> > > For this I have the rule alternative
> > > 
> > > |! #(BLOCK list:expr_list)
> > > 	{
> > > 		## = list->getFirstChild();
> > > 	}
> > > 
> > > This seems to work except that the transformations inside this 
> > instance
> > > of expr_list don't get executed. Therefore, the transformation 
of 
> > the
> > > code above is applied only to the second pair of afformentioned
> > > expressions.
> > > 
> > > I'm using exactly the same rule (expr_list) to traverse the 
list of
> > > expressions whether they are inside the procedure body, or 
inside a
> > > block. I'm stumped!
> > > 
> > > If I remove the ! I get two copies of the subtree, one where
> > > transformations have been applied, and one where they havent...
> > > 
> > > Am I doing something terribly wrong or is this unexpected 
> > behaviour?
> > > 
> > > Arnar
> > > 
> > > 
> > > > -----Original Message-----
> > > > From: mzukowski@y... [mailto:mzukowski@y...] 
> > > > Sent: 14. n?vember 2003 18:39
> > > > To: antlr-interest@yahoogroups.com
> > > > Subject: RE: [antlr-interest] Tree transformation
> > > > 
> > > > 
> > > > Hard to tell.  I recommend using -traceParser and following 
> > > > through the code
> > > > to see what's happening.
> > > > 
> > > > Monty
> > > > 
> > > > -----Original Message-----
> > > > From: Arnar Birgisson [mailto:arnarb@o...] 
> > > > Sent: Friday, November 14, 2003 7:24 AM
> > > > To: antlr-interest@yahoogroups.com
> > > > Subject: [antlr-interest] Tree transformation
> > > > 
> > > > Hello..
> > > > 
> > > > I'm having some trouble I can't figure out, possibly because 
I'm 
> > doing
> > > > something stupid.
> > > > 
> > > > I have this rule in a tree parser for transforming loops:
> > > > 
> > > > loop_stmt
> > > > 	: #(L_LOOP stmt_list)
> > > > 	| #(L_WHILE expr stmt_list)
> > > > 	|! #(L_FOR init:stmt_list test:expr incr:stmt_list
> > > > body:stmt_list)
> > > > 		{
> > > > 			/* this changes "for" loops 
to "while" loops 
> > */
> > > > 			antlr::RefAST newbody;
> > > > 			antlr::RefAST lastBodyStmt =
> > > > body->getFirstChild();
> > > > 			if (antlr::nullAST == lastBodyStmt) {
> > > > 				newbody = incr;
> > > > 			} else {
> > > > 				while (antlr::nullAST !=
> > > > lastBodyStmt->getNextSibling())
> > > > 					lastBodyStmt =
> > > > lastBodyStmt->getNextSibling();
> > > > 	
> > > > lastBodyStmt->setNextSibling(incr->getFirstChild());
> > > > 				newbody = body;
> > > > 			}
> > > > 			antlr::RefAST l = #
([L_WHILE,"while"], test,
> > > > newbody);
> > > > 			antlr::RefAST lastInitStmt =
> > > > init->getFirstChild();
> > > > 			if (antlr::nullAST == lastInitStmt) {
> > > > 				## = l;
> > > > 			} else {
> > > > 				while (antlr::nullAST !=
> > > > lastInitStmt->getNextSibling())
> > > > 					lastInitStmt =
> > > > lastInitStmt->getNextSibling();
> > > > 				lastInitStmt->setNextSibling
(l);
> > > > 				## = init->getFirstChild();
> > > > 			}
> > > > 		}
> > > > 	;
> > > > 
> > > > Now, stmt_list is a simple rule
> > > > 
> > > > stmt_list
> > > > 	: #(STMT_LIST (stmt)*)
> > > > 	;
> > > > 
> > > > and the stmt rule is a big rule, with one alternative being 
this
> > > > (note that in my language there is no difference between 
> > > > statements and
> > > > expressions):
> > > > 
> > > > 	|! #(OPERATOR s1:expr s2:expr)
> > > > 		{
> > > > 			/* this changes "x <op> b" to the 
function 
> > call
> > > > "<op>(x,y)"
> > > > 			#OPERATOR->setType(ID);
> > > > 			## = #([OPEN_PAR,"("], ADGERD,
> > > > #([stmt_list,"params"], s1, s2));
> > > > 		}
> > > > 
> > > > Now, this alternative successfully transforms operator 
> > statements to
> > > > function alls when they are top level statements in 
functions 
> > > > (accessed
> > > > throught stmt_list), but when they're in a for-loop body 
> > > > (named "body")
> > > > in the above rule, no transformation takes place, i.e. #
> > (OPERATOR expr
> > > > expr) is left as is.
> > > > 
> > > > I've tried removing the ! in the for-loop rule but that 
doesn't 
> > help..
> > > > the transformation doesn't take place.
> > > > 
> > > > Any ideas?
> > > > 
> > > > Arnar
> > > > 
> > > > 
> > > >  
> > > > 
> > > > Your use of Yahoo! Groups is subject to 
> > > > http://docs.yahoo.com/info/terms/ 
> > > > 
> > > > 
> > > >  
> > > > 
> > > > Your use of Yahoo! 
> > > > Groups is subject to http://docs.yahoo.com/info/terms/ 
> > > > 
> > > >
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> >


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Mon Nov 17 02:49:27 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Re: Tree transformation
In-Reply-To: <bp9csk+b6bj@eGroups.com>
Message-ID: <000e01c3acf8$78fe1450$00cf090a@oddi.is>

Hello there..

I think I have this fixed now. After putting # in front of (some) label
references, I ran the resulting tree through a prettyprinter, which
apparently produced the wrong output. I tried another prettyprinter and
that revealed that the output tree is now correct. Sorry for the
hassle..

Btw. the second pretty printer outputs the three in a format understood
by the program dot from the graphviz package. When this output is given
to dot, it produces a graphical representation of the tree in
postscript. If you are interested, I'm posting the snippet below.

(hint: the ps file is quite large (on paper, not on disk) and I use the
program "poster" by Jos van Eijndhoven to scale it down)

Arnar

/** put this in main, or somewhere :
output << "digraph G {" << endl;
output << "edge
[fontname=\"Helvetica\",fontsize=10,labelfontname=\"Helvetica\",labelfon
tsize=10];" << endl;
output << "node [fontname=\"Helvetica\",fontsize=10,shape=box];" <<
endl;
printDotTree(tree, output, parser);
output << "}" << endl;
*/

static int _dot_node = 0;
int printDotTree(antlr::RefAST tree, std::ostream& out, antlr::Parser&
p) {
	int me = ++_dot_node;
	out << me << " [label=\"" << p.getTokenName(tree->getType())
		<< "\\n" << tree->getText() << "\"];" << std::endl;
	antlr::RefAST c = tree->getFirstChild();
	while (antlr::nullAST != c) {
		int child = printDotTree(c, out, p);
		out << me << " -> " << child << ";" << std::endl;
		c = c->getNextSibling();
	}
	return me;
}


> -----Original Message-----
> From: lgcraymer [mailto:lgc@mail1.jpl.nasa.gov] 
> Sent: 17. n?vember 2003 02:48
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: Tree transformation
> 
> 
> Arnar--
> 
> That sounds like something may have been broken in 2.7.2.  It sounds 
> very much like you are referencing the input tree, and that 
> shouldn't be happening.
> 
> Ric--Any thoughts?
> 
> --Loring
> 
> 
> --- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
> <arnarb@o...> wrote:
> > Hi there,
> > 
> > I tried putting # in front of list, which made it worse. Before, 
> only
> > the first level of the subtree wasn't being processed, after 
> putting #
> > in front of the label name, it seems that the whole subtree is not
> > transformed. The result is just as if I copied the input-tree as-
> is.
> > 
> > Arnar
> > 
> > > -----Original Message-----
> > > From: lgcraymer [mailto:lgc@m...] 
> > > Sent: 16. n?vember 2003 20:27
> > > To: antlr-interest@yahoogroups.com
> > > Subject: [antlr-interest] Re: Tree transformation
> > > 
> > > 
> > > Arnar--
> > > 
> > > Take a look at <http://www.antlr.org/doc/trees.html#Action%
> > > 20Translation>.  ANTLR labels get transformed during 
> translation; if 
> > > I remember correctly, #label translates to labelAST and 
> #label_in to 
> > > label.  You are probably reusing the input tree by accident 
> here.  
> > > Try replacing list with #list in the action.
> > > 
> > > --Loring
> > > 
> > > --- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
> > > <arnarb@o...> wrote:
> > > > Hello again..
> > > > 
> > > > I solved this problem by rewriting the transformation so that 
> it 
> > > worked
> > > > without the !. However, I keep hitting this wall in other 
> places, 
> > > and
> > > > now I'm completely stuck. Consider those (simplified) 
> constructs 
> > > in my
> > > > language
> > > > 
> > > > f -> procedure()
> > > > var x
> > > > body
> > > >   expression1,
> > > >   block
> > > >     x := \incr x,
> > > >     \print [1,2,3]
> > > >   endblock,
> > > >   x := \incr ,
> > > >   \print [1,2,3]
> > > > endbody
> > > > 
> > > > Now.. the expressions "\incr x" and "[1,2,3]" have such trees:
> > > > 
> > > > #([OPERATOR,"incr"] x)
> > > > #([LIST,"["] #([EXPR_LIST] 1 2 3) )
> > > > 
> > > > and I have rules in my tree transformer that changes them to 
> the
> > > > equivalent of the expressions "incr(x)" (function call) and
> > > > "mk_pair(1,mk_pair(2,mk_pair(3,[])))". This transformation 
> works 
> > > very
> > > > well for the second pair of those expressions.
> > > > 
> > > > Now I want to make a transformation for turning
> > > > 
> > > > BLOCK
> > > >  | 
> > > > EXPR_LIST
> > > >  |
> > > > expr1 - expr2 - ... - exprN
> > > > 
> > > > to
> > > > 
> > > > expr1 - expr2 - ... - exprN.
> > > > 
> > > > For this I have the rule alternative
> > > > 
> > > > |! #(BLOCK list:expr_list)
> > > > 	{
> > > > 		## = list->getFirstChild();
> > > > 	}
> > > > 
> > > > This seems to work except that the transformations inside this 
> > > instance
> > > > of expr_list don't get executed. Therefore, the transformation 
> of 
> > > the
> > > > code above is applied only to the second pair of afformentioned
> > > > expressions.
> > > > 
> > > > I'm using exactly the same rule (expr_list) to traverse the 
> list of
> > > > expressions whether they are inside the procedure body, or 
> inside a
> > > > block. I'm stumped!
> > > > 
> > > > If I remove the ! I get two copies of the subtree, one where
> > > > transformations have been applied, and one where they havent...
> > > > 
> > > > Am I doing something terribly wrong or is this unexpected 
> > > behaviour?
> > > > 
> > > > Arnar
> > > > 
> > > > 
> > > > > -----Original Message-----
> > > > > From: mzukowski@y... [mailto:mzukowski@y...] 
> > > > > Sent: 14. n?vember 2003 18:39
> > > > > To: antlr-interest@yahoogroups.com
> > > > > Subject: RE: [antlr-interest] Tree transformation
> > > > > 
> > > > > 
> > > > > Hard to tell.  I recommend using -traceParser and following 
> > > > > through the code
> > > > > to see what's happening.
> > > > > 
> > > > > Monty
> > > > > 
> > > > > -----Original Message-----
> > > > > From: Arnar Birgisson [mailto:arnarb@o...] 
> > > > > Sent: Friday, November 14, 2003 7:24 AM
> > > > > To: antlr-interest@yahoogroups.com
> > > > > Subject: [antlr-interest] Tree transformation
> > > > > 
> > > > > Hello..
> > > > > 
> > > > > I'm having some trouble I can't figure out, possibly because 
> I'm 
> > > doing
> > > > > something stupid.
> > > > > 
> > > > > I have this rule in a tree parser for transforming loops:
> > > > > 
> > > > > loop_stmt
> > > > > 	: #(L_LOOP stmt_list)
> > > > > 	| #(L_WHILE expr stmt_list)
> > > > > 	|! #(L_FOR init:stmt_list test:expr incr:stmt_list
> > > > > body:stmt_list)
> > > > > 		{
> > > > > 			/* this changes "for" loops 
> to "while" loops 
> > > */
> > > > > 			antlr::RefAST newbody;
> > > > > 			antlr::RefAST lastBodyStmt =
> > > > > body->getFirstChild();
> > > > > 			if (antlr::nullAST == lastBodyStmt) {
> > > > > 				newbody = incr;
> > > > > 			} else {
> > > > > 				while (antlr::nullAST !=
> > > > > lastBodyStmt->getNextSibling())
> > > > > 					lastBodyStmt =
> > > > > lastBodyStmt->getNextSibling();
> > > > > 	
> > > > > lastBodyStmt->setNextSibling(incr->getFirstChild());
> > > > > 				newbody = body;
> > > > > 			}
> > > > > 			antlr::RefAST l = #
> ([L_WHILE,"while"], test,
> > > > > newbody);
> > > > > 			antlr::RefAST lastInitStmt =
> > > > > init->getFirstChild();
> > > > > 			if (antlr::nullAST == lastInitStmt) {
> > > > > 				## = l;
> > > > > 			} else {
> > > > > 				while (antlr::nullAST !=
> > > > > lastInitStmt->getNextSibling())
> > > > > 					lastInitStmt =
> > > > > lastInitStmt->getNextSibling();
> > > > > 				lastInitStmt->setNextSibling
> (l);
> > > > > 				## = init->getFirstChild();
> > > > > 			}
> > > > > 		}
> > > > > 	;
> > > > > 
> > > > > Now, stmt_list is a simple rule
> > > > > 
> > > > > stmt_list
> > > > > 	: #(STMT_LIST (stmt)*)
> > > > > 	;
> > > > > 
> > > > > and the stmt rule is a big rule, with one alternative being 
> this
> > > > > (note that in my language there is no difference between 
> > > > > statements and
> > > > > expressions):
> > > > > 
> > > > > 	|! #(OPERATOR s1:expr s2:expr)
> > > > > 		{
> > > > > 			/* this changes "x <op> b" to the 
> function 
> > > call
> > > > > "<op>(x,y)"
> > > > > 			#OPERATOR->setType(ID);
> > > > > 			## = #([OPEN_PAR,"("], ADGERD,
> > > > > #([stmt_list,"params"], s1, s2));
> > > > > 		}
> > > > > 
> > > > > Now, this alternative successfully transforms operator 
> > > statements to
> > > > > function alls when they are top level statements in 
> functions 
> > > > > (accessed
> > > > > throught stmt_list), but when they're in a for-loop body 
> > > > > (named "body")
> > > > > in the above rule, no transformation takes place, i.e. #
> > > (OPERATOR expr
> > > > > expr) is left as is.
> > > > > 
> > > > > I've tried removing the ! in the for-loop rule but that 
> doesn't 
> > > help..
> > > > > the transformation doesn't take place.
> > > > > 
> > > > > Any ideas?
> > > > > 
> > > > > Arnar
> > > > > 
> > > > > 
> > > > >  
> > > > > 
> > > > > Your use of Yahoo! Groups is subject to 
> > > > > http://docs.yahoo.com/info/terms/ 
> > > > > 
> > > > > 
> > > > >  
> > > > > 
> > > > > Your use of Yahoo! 
> > > > > Groups is subject to http://docs.yahoo.com/info/terms/ 
> > > > > 
> > > > >
> > > 
> > > 
> > >  
> > > 
> > > Your use of Yahoo! Groups is subject to 
> > > http://docs.yahoo.com/info/terms/ 
> > > 
> > >
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From wiggjd at lsbu.ac.uk  Mon Nov 17 03:41:13 2003
From: wiggjd at lsbu.ac.uk (David Wigg)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Re: C Grammar Status
Message-ID: <3FB8B3D9.80708@lsbu.ac.uk>

IF you have problems with the C grammar in the examples you 
could try my latest version of the C/C++ grammar file, CPP_parser.g.

This version, developed from an earlier version by Terence and 
others back in 1994, uses ANTLR 2.7.1. It does run with ANTLR 
2.7.2, but I had a lot of hassle getting to work.

At present it generates a parser in C++ only (If anyone is 
interested in developing a Java version, perhaps they could let 
me know).

In September I supplied a much improved version which I called V 
2.0. This version was picked up by some users and just a few 
problems were raised which have now been solved.

I assume "no news" is good news!

David Wigg
Centre for Systems and Software Engineering
London South Bank University




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From richard.ney at aspect.com  Mon Nov 17 12:18:45 2003
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Unresolved tokens while linking in VC++
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE00ECE57@sac1exch3.nawest.aspect.com>

Normally I'm pretty good and finding the solution to these type of issues but this one has me stumped. 

 

Has anyone using VC++ seen these linking errors while using that latest ANTLR C++ snapshot. I see them defined in Token.cpp and BaseAST.cpp but I keep on getting the unresolved errors.

 

------ Build started: Project: managedSandbox, Configuration: Debug Win32 ------

 

Linking...

LINK : error LNK2020: unresolved token (0A00003A) nullToken

LINK : error LNK2020: unresolved token (0A00004A) nullAST

LINK : error LNK2020: unresolved token (0A00004C) ?ASTNULL@TreeParser@antlr@@2V?$ASTRefCount@VAST@antlr@@@2@A

LINK : fatal error LNK1120: 3 unresolved externals

 

----------------------------------------------------------------------------------------------------

Richard Ney                                                    Aspect Communications

Principal Software Engineer

< <http://www.aspect.com/> http://www.aspect.com>                               Main:  408.325.2200

< <mailto:richard.ney@aspect.com> mailto:richard.ney@aspect.com>            SJ Office: 408.325.2464

                                                                          Home Office: 916.797.9602

----------------------------------------------------------------------------------------------------

 

The Three Laws of Infernal Dynamics:
1. An object in motion will always be headed in the wrong direction.
2. An object at rest will always be in the wrong place.
3. The energy required to change either of these states will always be more than you wish to expend, but never so much as to make the task appear prospectively impossible.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031117/e60b5fc1/attachment.html
From richard.ney at aspect.com  Mon Nov 17 14:24:52 2003
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Warning while compiling C++ library in VC 7.1
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE00ECE58@sac1exch3.nawest.aspect.com>

Ric,

You can place this pragma into the headers. Might have to surround it
with a #ifdef block for VC++ but it will silence the warnings.

////////////////////////////////////////////////////////////////////////
////
// STL is an inline library, so its OK for the class to not have a DLL 
// interface.
#pragma warning(disable : 4251)

We use this in our other libraries that use STL.

-Richard

-----Original Message-----
From: Ric Klaren [mailto:klaren@cs.utwente.nl] 
Sent: Friday, November 14, 2003 2:21 AM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] Warning while compiling C++ library in VC
7.1

On Thu, Nov 13, 2003 at 11:32:11AM -0800, Ney, Richard wrote:
> I getting a bunch of 4251 warnings and was wondering if others are
> seeing these warnings and are the affecting the resulting library.
> 
> c:\Program Files\Microsoft Visual Studio .NET
> 2003\Vc7\include\vector(1673) : warning C4251:
> 'std::vector<_Ty,_Ax>::_Myvec' : class 'std::vector<_Ty,_Ax>' needs to
> have dll-interface to be used by clients of class
'std::vector<_Ty,_Ax>'

You are using a development snapshot ? You followed the instructions
from
the lib/cpp/README ? You are trying a static library or a dll ? 

There are probably still some small things with vc7.1 but maybe i've
broken
something since the last report I had. Coming weeks I'll probably try to
fix up the mess that is VC6-7.1 in the code atm so we can start on
prereleases for the next version.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++
-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++
-------
  Chaos often breeds life, when order breeds habit.
  --- Henry B. Adams, The Education of Henry Adams


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Anthony.Youngman at ECA-International.com  Tue Nov 18 01:28:25 2003
From: Anthony.Youngman at ECA-International.com (Anthony W Youngman)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Re: Newbie question [OT]
Message-ID: <C7FE35004D40FD45AA342991B88CE40409A9CF@lnml1.eca-international.local>

The other lot to try are O'Reilly :-)

I don't know how easy it is to swing it with them, but they publish
several books where the pdfs are freely available on the web. Probably
the deal is they pay not much in royalties, but the pdfs advertise the
hard copy from O'R.

However, you might need to be a well-known author or have a book they
reckon a lot of people will want to buy anyway in order to swing a deal
like that.

Cheers,
Wol

-----Original Message-----
From: Tiller, Michael (M.M.) [mailto:mtiller@ford.com] 
Sent: 13 November 2003 20:51
To: 'antlr-interest@yahoogroups.com'
Subject: RE: [antlr-interest] Re: Newbie question [OT]


> From: bob mcwhirter [mailto:bob@werken.com]
> Subject: Re: [antlr-interest] Re: Newbie question
> 
> I thought Ter had been given the rights to it back from
> his publisher and was making the PDF freely available.
> 
> Ter, am I confused as normal?
> 
> 	-bob

I was actually hoping to pull a similar stunt with a book I wrote.  I
asked
my publisher about it and they insisted that with current publishing
technologies the book would never go out of print and that they could
make
new printings on demand.  Bummer.  I wonder why this worked for Terence.

--
Mike

 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 






***********************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

***********************************************************************************


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Tue Nov 18 02:49:45 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:07 2004
Subject: [antlr-interest] Re: Tree transformation
In-Reply-To: <bp9csk+b6bj@eGroups.com>; from lgc@mail1.jpl.nasa.gov on Mon, Nov 17, 2003 at 02:47:48AM -0000
References: <002801c3ac90$657ced60$01cf090a@oddi.is> <bp9csk+b6bj@eGroups.com>
Message-ID: <20031118114945.B580@cs.utwente.nl>

Hi,

On Mon, Nov 17, 2003 at 02:47:48AM -0000, lgcraymer wrote:
> That sounds like something may have been broken in 2.7.2.  It sounds 
> very much like you are referencing the input tree, and that 
> shouldn't be happening.
> 
> Ric--Any thoughts?

Nope ;) but there didn't seem to be a problem anymore. Anycase it doesn't
sound like anything I encountered or have floating around in my not working
snippets directory (actually got one related to treebuilding but thats more
due to a limitation in the stuff action.g accepts in it's treebuilding
constructs)

I'm unsure atm wether Arnar's problems were all related to the 'lying'
prettyprinter or that there's still some strange stuff.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Chaos always defeats order because it is better organized.
  --- Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From j.klaren at utwente.nl  Tue Nov 18 02:57:28 2003
From: j.klaren at utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Re: how to force unexpected token error
In-Reply-To: <bp0bgo+lvoa@eGroups.com>; from hawkwall@yahoo.com on Thu, Nov 13, 2003 at 04:29:12PM -0000
References: <20031113140418.G8537@cs.utwente.nl> <bp0bgo+lvoa@eGroups.com>
Message-ID: <20031118115728.C580@cs.utwente.nl>

Hi,

On Thu, Nov 13, 2003 at 04:29:12PM -0000, hawkwall wrote:
> I appreciate the help and now understand antlr a little better.  Why
> doesn't antlr come with the api documentation?  I probably should have
> run javadoc along time ago.

No idea actually. I guess it's pretty easy to generate with javadoc for the
java part (or with doxygen for both java and C++) Although doctype comments
may be lacking in some areas. And for the java part you'd also get the docs
from the tool because there's no clean separation between support lib and
the tool itself.

Maybe Terence can be persuaded to put these on the antlr.org site...

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Chaos always defeats order because it is better organized.
  --- Terry Pratchet

From klaren at cs.utwente.nl  Tue Nov 18 02:57:28 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Re: how to force unexpected token error
In-Reply-To: <bp0bgo+lvoa@eGroups.com>; from hawkwall@yahoo.com on Thu, Nov 13, 2003 at 04:29:12PM -0000
References: <20031113140418.G8537@cs.utwente.nl> <bp0bgo+lvoa@eGroups.com>
Message-ID: <20031118115728.C580@cs.utwente.nl>

Hi,

On Thu, Nov 13, 2003 at 04:29:12PM -0000, hawkwall wrote:
> I appreciate the help and now understand antlr a little better.  Why
> doesn't antlr come with the api documentation?  I probably should have
> run javadoc along time ago.

No idea actually. I guess it's pretty easy to generate with javadoc for the
java part (or with doxygen for both java and C++) Although doctype comments
may be lacking in some areas. And for the java part you'd also get the docs
from the tool because there's no clean separation between support lib and
the tool itself.

Maybe Terence can be persuaded to put these on the antlr.org site...

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Chaos always defeats order because it is better organized.
  --- Terry Pratchet

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From cristian at amiq.ro  Tue Nov 18 05:10:26 2003
From: cristian at amiq.ro (Cristian Amitroaie)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Re: Defining AST for the literals ( keywords )
In-Reply-To: <bp3ap0+2enf@eGroups.com>
References: <bp3ap0+2enf@eGroups.com>
Message-ID: <200311181510.26767.cristian@amiq.ro>

It seems antlr issues a warning if you redefine a literal token in the parser: 
"warning:Redefinition of token in tokens {...}: LITERAL_xxx".

Yet the token types txt files seem to be ok (same value from Lexer to Parser 
to Walker -btw, which stay in separate g files). 

Is this the specified behaviour: warn, but things work OK if only attributes 
changed?

Thank you,
Cristian

On Friday 14 November 2003 21:34, lgcraymer wrote:
> If you take a look at the xxxTokenTypes files, you will find that each
> literal has an associated token type.  "return", for example, translates to
> LITERAL_return (or something like).  Just set an AST type for that literal
> in the "tokens" section and you should get the expected behavior.  Just
> watch out for the new ASTFactory initialization stuff--if you start getting
> weird crashes, check the 2.7.2 release notes.
>
> --Loring
>
> --- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> > Oh, you're using heterogenous trees.  I haven't tried those yet, so I
> > can't help much there.
> >
> > Monty
> >
> > -----Original Message-----
> > From: gunay_arslan [mailto:gunay_arslan@y...]
> > Sent: Friday, November 14, 2003 7:23 AM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Re: Defining AST for the literals ( keywords)
> >
> > What I mean is to have ( at least ) two seperate AST types.
> >  1) defined for Keywords ( literals )
> >  2) default one ( defined via   parser setASTNodeClass(String cl)
> > method.
> >
> > If I set the AST type  using setASTNodeClass(String cl) , how I can
> > set the AST type for the literal ? ( different AST type )
> >
> > Tks.
> >
> > --- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> > > Yeah, that's done by default.
> > >
> > > Monty
> > >
> > > -----Original Message-----
> > > From: gunay_arslan [mailto:gunay_arslan@y...]
> > > Sent: Thursday, November 13, 2003 3:58 AM
> > > To: antlr-interest@yahoogroups.com
> > > Subject: [antlr-interest] Defining AST for the literals ( keywords)
> > >
> > > Hi ,
> > >
> > > Is it possible to automatically define a concrete AST type for all
> > > tokens defined in the lexer grammar ?
> > >
> > > Thank you in advance.
> > >
> > >
> > >
> > >
> > >
> > >
> > > Your use of Yahoo! Groups is subject to
> >
> > http://docs.yahoo.com/info/terms/
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From cristian at amiq.ro  Tue Nov 18 05:10:51 2003
From: cristian at amiq.ro (Cristian Amitroaie)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Literals in lexer
In-Reply-To: <002201c3ac6f$b84dce40$01cf090a@oddi.is>
References: <002201c3ac6f$b84dce40$01cf090a@oddi.is>
Message-ID: <200311181510.51220.cristian@amiq.ro>

How about treating "this" as a literal and adding
{testLiterals=true;} to L_NAME?


On Sunday 16 November 2003 20:30, Arnar Birgisson wrote:
> Hello..
>
> I have those rules in my lexer:
>
> L_THIS : "this" ;
> L_NAME : NameChar ( NameChar | '0'..'9' )* ;
> protected NameChar : ( 'a'..'z' | etc. ) ;
>
> Now, the input "thisfile" is taken as two tokens, (L_THIS,"this") and
> (L_NAME,"file"). How do I correct this. The obvious way is to put
> predicates in all the L_* rules I have.. but there must be a simpler
> way.
>
> I have read the documentation on literals in lexical anlyzers.. but I
> can't figure out how to do this.
>
> thanks..
>
> Arnar
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From cristian at amiq.ro  Tue Nov 18 05:12:10 2003
From: cristian at amiq.ro (Cristian Amitroaie)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Literals table empty
In-Reply-To: <1068890456.3fb5f9581d57b@mail.hds.utc.fr>
References: <72C9789739C4214096AE945753B11EA3FABA68@mypxmail04.bco-home.com> <1068890456.3fb5f9581d57b@mail.hds.utc.fr>
Message-ID: <200311181512.10969.cristian@amiq.ro>

Does it work when adding a tokens {...} section in the Lexer, as if isolated 
from the Parser? 

tokens {
    "max";
    "min";
};

Although it's not elegant,
Cristian

On Saturday 15 November 2003 12:00, Boulanger Jean-Louis wrote:
> Hello,
>
>  I have the same pb in a big grammar where parser and lexer are in the same
> file. I use import and export clause and I don't find a solution. I
> supposes that is a little bug. This pb appear also when you consruct a new
> grammar by inheritance.
>
> BJL
>
> Selon mzukowski@yci.com:
> > When I copy and paste this into one .g file it works.  The problem
> > probably has to do with the fact that your are exporting the vocab from
> > the lexer and importing into the parser.  Look at the docs on
> > import/export vocab stuff, but I think if you want them in separate files
> > you will have to do some extra work to keep the vocabularies in sync.
> >
> > Has anyone else done this and have some advice?
> >
> > If you don't have other constraints then keeping the lexer and parser in
> > the same .g file will certainly make it work.
> >
> > Monty
> >
> > -----Original Message-----
> > From: yahamkon [mailto:Vladimir.Konstantinov@rogers.com]
> > Sent: Friday, November 14, 2003 1:10 PM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Literals table empty
> >
> > Thanks again, but the grammar doesn't recognize the Literal as such,
> > it matches an returns an Identifier instead:
> >
> > /////
> > class ExpressionParser extends Parser;
> >
> > options {
> > 	importVocab=Expression;
> > 	buildAST=true;
> > }
> >
> > calc: (ID|fun) END ;
> > fun: "min"|"max" ;
> >
> > class ExpressionLexer extends Lexer ;
> >
> > options{exportVocab=Expression;}
> >
> > END: ';';
> >
> > ID options {testLiterals=true;}:
> > 	('a'..'z'|'A'..'Z'|'_'|'$')
> > ('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'$')*
> > ;
> > /////
> >
> > I looked up the generated code - the Lexer class doesn't populate the
> > literals table at all (although "min" and "max" are defined as
> > LITERAL_xxx tokens in the respective zzzTokenTypes.java file).
> >
> > What am I missing now, I compared the options from the java.g file
> > and my example (regarding literals), the java geherated lexer has its
> > literals table populated, mine is not being populated in the
> > generated Lexer class ?
> >
> > Any ideas? TIA
> >
> > --- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> > > No, you need a lexer rule something like
> > > ID:
> > > options {testLiterals=true;}
> > > ('a'..'z' | 'A'..'Z')+
> > > ;
> > >
> > > Monty
> > >
> > > -----Original Message-----
> > > From: yahamkon [mailto:Vladimir.Konstantinov@r...]
> > > Sent: Thursday, November 13, 2003 11:16 AM
> > > To: antlr-interest@yahoogroups.com
> > > Subject: [antlr-interest] Re: help with literals
> > >
> > > Thanks for the fast response!
> > >
> > > >> See docs on literals and any example grammar with an ID rule.
> > >
> > > I've looked in the docs, the "java.g" grammar, also searched the
> > > archives but things aren't getting clearer.
> > >
> > > > Yes, you need a rule that will test it's result against the
> >
> > defined
> >
> > > > literals.
> > >
> > > Isn't "calc" such a rule? To put it defferently, if I had a grammar
> > > that specifies a single rule recognising a single literal how would
> > > that look like (that's what I had in mind sending the example
> >
> > anyway)?
> >
> > > > Monty
> > > >
> > > > -----Original Message-----
> > > > From: VLADIMIR KONSTANTINOV [mailto:Vladimir.Konstantinov@r...]
> > > > Sent: Thursday, November 13, 2003 11:03 AM
> > > > To: antlr-interest@yahoogroups.com
> > > > Subject: [antlr-interest] help with literals
> > > >
> > > >
> > > > I want to specify literals ("min", "max", "sum" etc) in my
> >
> > grammar.
> >
> > > > I am getting :
> > > >  line 1:1: unexpected char: 'm'
> > > >  line 1:2: unexpected char: 'i'
> > > >  line 1:3: unexpected char: 'n'
> > > > when testing with the following expression: "min;"
> > > >
> > > > This a stripped down version of my grammar:
> > > >
> > > > ///
> > > > class ExpressionParser extends Parser;
> > > > options { importVocab=Expression; }
> > > > calc: fun END;
> > > > fun: "min";
> > > >
> > > > class ExpressionLexer extends Lexer ;
> > > > options{ exportVocab=Expression;}
> > > > END: ';'
> > > > ///
> > > >
> > > > I am missing something very basic, but can't figure it out myself.
> > > >
> > > > Thanks in advance.
> > > >
> > > >
> > > >
> > > >
> > > > Your use of Yahoo! Groups is subject to
> > >
> > > http://docs.yahoo.com/info/terms/
> > >
> > >
> > >
> > >
> > > Your use of Yahoo! Groups is subject to
> >
> > http://docs.yahoo.com/info/terms/
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
> -------------------------------------------------
> Laboratoire Heudiasyc. UMR CNRS 6599
> http://www.hds.utc.fr
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From urag0n at yahoo.com  Tue Nov 18 07:14:00 2003
From: urag0n at yahoo.com (urag0n)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] program to translate c++ to pascal
Message-ID: <bpdcvo+cqda@eGroups.com>

hi,

    can anyone help me how to make a program to translate c++ to 
pascal? what algorithm or data structure should I use? hoping for 
your respone. tnx


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Tue Nov 18 09:41:58 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Re: Tree transformation
In-Reply-To: <20031118114945.B580@cs.utwente.nl>
Message-ID: <001401c3adfb$43fe6d50$01cf090a@oddi.is>

Hullo..

> -----Original Message-----
> From: Ric Klaren [mailto:klaren@cs.utwente.nl] 
>
> Nope ;) but there didn't seem to be a problem anymore. 

Not on my behalf no.. sorry for stirring you all up :o)

> I'm unsure atm wether Arnar's problems were all related to the 'lying'
> prettyprinter or that there's still some strange stuff.

Inside actions, I used just "label" to refer to subtrees. In that case,
the resulting tree was quite strange, as reported by the "truthful"
pretty-printer as well. After changing it to "#label", as Loring
suggested, it worked fine.

I understand the difference between #label and #label_in, but what does
label by it self mean? I haven't looked a the generated output yet so
maybe my question is stupid.

To clarify "quite strange" above, this is a simpilifaction of what
happened:

I have rules that transform

LIST
 |
expr1 - expr2 - ... - exprN

to

FUNC_CALL
 |
"mkPair" - parameters
             |
            expr1  - FUNC_CALL
                      |
                     "mkPair" - parameters
                                 |
                                expr2 - FUNC_CALL
                                         |
                                        etc...

But when the #(LIST (expr)*) subrule was labeled with some label, and
then referred to without any #-marks in front, the resulting tree was
like this

LIST
 |
expr1 - FUNC_CALL
         |
        "mkPair" - parameters
                    |
                   expr2 - ...

So obviously "some" transformation took place, but not on the top-level.

Again, I have this solved, so don't lose any sleep over this.

Arnar

ps. I could provide you with a grammar that exhibits this problem, but
all variable- and rulenames are in icelandic so you'd probably have a
hard time following it.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Tue Nov 18 09:46:54 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Literals in lexer
In-Reply-To: <200311181510.51220.cristian@amiq.ro>
Message-ID: <001601c3adfb$f4b205d0$01cf090a@oddi.is>

Hello

> How about treating "this" as a literal and adding
> {testLiterals=true;} to L_NAME?

What do you mean about threathing "this" as a literal? "this" is
actually "?essi" in my programming language, so the auto-generated token
name chokes the C++ compiler. Besides, my lexing is made up of two
lexers, and neither of them are in the same file as the parser
definition (so there's no parser-lexer association).

The document says to use the "literals" option and there's a link to the
options page, but there is no "literals" option documented there.

testLiterals is set to true for the whole grammar.

Arnar


> On Sunday 16 November 2003 20:30, Arnar Birgisson wrote:
> > Hello..
> >
> > I have those rules in my lexer:
> >
> > L_THIS : "this" ;
> > L_NAME : NameChar ( NameChar | '0'..'9' )* ;
> > protected NameChar : ( 'a'..'z' | etc. ) ;
> >
> > Now, the input "thisfile" is taken as two tokens, 
> (L_THIS,"this") and
> > (L_NAME,"file"). How do I correct this. The obvious way is to put
> > predicates in all the L_* rules I have.. but there must be a simpler
> > way.
> >
> > I have read the documentation on literals in lexical 
> anlyzers.. but I
> > can't figure out how to do this.
> >
> > thanks..
> >
> > Arnar
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
> 
> 
>  
> 
> Your use of Yahoo! 
> Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Tue Nov 18 11:21:04 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] #( root children ) syntax change proposal?
Message-ID: <5A745B98-19FC-11D8-99AD-000A95891192@cs.usfca.edu>

Howdy folks,

The #(...) notation derives from wanting to use parens like LISP but 
not wanting the ambiguity with (... | ...) alternative subrules. The # 
was the only character left in ASCII for me to use ;)  I have always 
not liked it, but now it's ingrained.  That said, I've been thinking of 
changing it for ANTLR 3 into

^(root c1 ... cn)

in tree parsers and tree construction actions.  There MAY be some 
ambiguity with the ^ suffix operator, but I think we might wanna try it 
out.

Anybody have any thoughts?  I like it as it's more intuitive that that 
is a tree ;)  # is random.

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Tue Nov 18 11:30:45 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] a new paper on ANTLR style grammars
Message-ID: <B46B2178-19FD-11D8-99AD-000A95891192@cs.usfca.edu>

Folks,

Here is an upcoming paper to a conference that formally defines 
grammars that operate like antlr: where alternatives have an implied 
order.  Nicely formalizes the strategy of predicated parsing etc...

http://www.brynosaurus.com//pub/lang/peg.pdf

Just as we have the syntactic predicate that says what the lookahead 
context must be, he has a "not predicate" that says what the lookahead 
cannot be.  This is very useful for such things as saying "match this 
rule, but only if not following in context by this next thing."  Really 
powerful.  moreover, he has a parser that demonstrates linear 
backtracking parsing by use of dynamic programming.  I will be studying 
his technique very closely before code gen for ANTLR. :)

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Tue Nov 18 11:33:18 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] added to code gen blog
Message-ID: <0FC13EF1-19FE-11D8-99AD-000A95891192@cs.usfca.edu>

Added some junk on a neutral imperative languages (NIL) for antlr 
actions and also for ANTLR code gen...

http://www.antlr.org/blog/antlr3/codegen.tml

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Tue Nov 18 11:45:52 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] #( root children ) syntax change proposal?
In-Reply-To: <5A745B98-19FC-11D8-99AD-000A95891192@cs.usfca.edu>
Message-ID: <001d01c3ae0c$93193850$01cf090a@oddi.is>

I agree, ^ is (to me) more appropriate as "root" than #.

vote +1

Arnar

> -----Original Message-----
> From: Terence Parr [mailto:parrt@cs.usfca.edu] 
> Sent: 18. n?vember 2003 19:21
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] #( root children ) syntax change proposal?
> 
> 
> Howdy folks,
> 
> The #(...) notation derives from wanting to use parens like LISP but 
> not wanting the ambiguity with (... | ...) alternative 
> subrules. The # 
> was the only character left in ASCII for me to use ;)  I have always 
> not liked it, but now it's ingrained.  That said, I've been 
> thinking of 
> changing it for ANTLR 3 into
> 
> ^(root c1 ... cn)
> 
> in tree parsers and tree construction actions.  There MAY be some 
> ambiguity with the ^ suffix operator, but I think we might 
> wanna try it 
> out.
> 
> Anybody have any thoughts?  I like it as it's more intuitive 
> that that 
> is a tree ;)  # is random.
> 
> Ter
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Tue Nov 18 13:40:02 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Re: #( root children ) syntax change proposal?
In-Reply-To: <5A745B98-19FC-11D8-99AD-000A95891192@cs.usfca.edu>
Message-ID: <bpe3ji+8j98@eGroups.com>

Ter--

There would not be any ambiguity between ^ as a suffix and ^( as a tree notation--"^(" can be interpreted as a token by the lexer.  
However, the current semantics of ^ is "root", not tree or AST node--that's #.  I can see the ^( as a construction syntax, but would 
prefer to keep # as a tree matching prefix.  In fact, I'd be willing to change my tree construction syntax from "#{" to "^{" and "#(" to "^(" 
to emphasize the construct versus match differential.

--Loring

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> Howdy folks,
> 
> The #(...) notation derives from wanting to use parens like LISP but 
> not wanting the ambiguity with (... | ...) alternative subrules. The # 
> was the only character left in ASCII for me to use ;)  I have always 
> not liked it, but now it's ingrained.  That said, I've been thinking of 
> changing it for ANTLR 3 into
> 
> ^(root c1 ... cn)
> 
> in tree parsers and tree construction actions.  There MAY be some 
> ambiguity with the ^ suffix operator, but I think we might wanna try it 
> out.
> 
> Anybody have any thoughts?  I like it as it's more intuitive that that 
> is a tree ;)  # is random.
> 
> Ter
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Tue Nov 18 13:56:08 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Re: #( root children ) syntax change proposal?
In-Reply-To: <bpe3ji+8j98@eGroups.com>
Message-ID: <0428F8E5-1A12-11D8-99AD-000A95891192@cs.usfca.edu>


On Tuesday, November 18, 2003, at 01:40 PM, lgcraymer wrote:

> Ter--
>
> There would not be any ambiguity between ^ as a suffix and ^( as a 
> tree notation--"^(" can be interpreted as a token by the lexer.
> However, the current semantics of ^ is "root", not tree or AST 
> node--that's #.  I can see the ^( as a construction syntax, but would
> prefer to keep # as a tree matching prefix.  In fact, I'd be willing 
> to change my tree construction syntax from "#{" to "^{" and "#(" to 
> "^("
> to emphasize the construct versus match differential.

Interesting.  Verrrrry interesting.  So to add an imaginary node you'd 
say:

a : A^ ^{IMAG} B ;

To make a tree like this

   A
   |
IMAG -- B

??  Looks a bit weird, the ^{...} constructor.  Is this what you were 
thinking?

I do like this for the matching:

expr : ^(PLUS expr expr) | INT ;

rather than

expr : #(PLUS expr expr) | INT ;

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Tue Nov 18 14:27:33 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Re: #( root children ) syntax change proposal?
In-Reply-To: <0428F8E5-1A12-11D8-99AD-000A95891192@cs.usfca.edu>
Message-ID: <bpe6cl+tj4l@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> 
> On Tuesday, November 18, 2003, at 01:40 PM, lgcraymer wrote:
> 
> > Ter--
> >
> > There would not be any ambiguity between ^ as a suffix and ^( as a 
> > tree notation--"^(" can be interpreted as a token by the lexer.
> > However, the current semantics of ^ is "root", not tree or AST 
> > node--that's #.  I can see the ^( as a construction syntax, but would
> > prefer to keep # as a tree matching prefix.  In fact, I'd be willing 
> > to change my tree construction syntax from "#{" to "^{" and "#(" to 
> > "^("
> > to emphasize the construct versus match differential.
> 
> Interesting.  Verrrrry interesting.  So to add an imaginary node you'd 
> say:
> 
> a : A^ ^{IMAG} B ;

Not quite--you'd do an ^[ IMAG, ... ] to add an imaginary node.  A more complete example would be

a :  A^ b:B!  ^[ IMAG, "imag" ] C ^{ b } ;

to be matched by

a : #( A IMAG C B )

in a tree walker.

> To make a tree like this
> 
>    A
>    |
> IMAG -- B
> 
> ??  Looks a bit weird, the ^{...} constructor.  Is this what you were 
> thinking?

That may just be unfamiliarity.  Think of ^[ or ^{ as "insert a tree element here"--with the left binding suggesting construct downward 
("root here") and the terminating ] or } as "return to the original construction depth".  Right now, I use #[ .. ] within tree actions #{ ... }, 
but there is an advantage to promoting ^[ ... ].  Also consider ^[ IMAG, "imag"]^ as "insert an IMAG node here and make it the root of 
the current tree".  It does look a little weird, but would be a useful shorthand.

> I do like this for the matching:
> 
> expr : ^(PLUS expr expr) | INT ;
> 
> rather than
> 
> expr : #(PLUS expr expr) | INT ;

I don't, but that's because I tend to view construction and matching as distinct "phases".  Matching is passive (follow the tree), while 
construction is active.  With my tree grammar generation to automatically generate the #( .. )'s, I think that it makes even more sense 
to differentiate the machine generated matching structure from the construction syntax since the construction annotation will be edited 
in by the developer.

> Ter
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tlilley at perspex.com  Tue Nov 18 15:24:38 2003
From: tlilley at perspex.com (Tripp Lilley)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] open-ended speed question: order of magnitude comparison?
Message-ID: <Pine.LNX.4.44.0311181824210.4638-100000@charmin.eheart.sg505.net>


In another thread, John "Lingua Idiota" Mitchell wrote:

> For example, if very high speed is so important then what the hell are
> you doing using any "language" that needs such complexity to lex, parse,
> understand, and act upon to solve the problem? I.e., why aren't you
> using a purpose specific, fixed, highly normalized language that's 
> extremely easy to robustly deal with rapidly?


I was searching for some really open-ended information on ANTLR
performance (and, generally, performance of automatically-generated
recognizers/parsers) when I stumbled on this. I was planning on posting
this question anyway, but John's comment is of particular relevance to it.

The question, and then some qualifiers:

	Does anyone have a rough, order of magnitude, back of the 
	envelope, rule of thumb, etc. idea about the (runtime, lexing and 
	parsing and what-not) speed difference between a parser 
	generated with ANTLR, with one of the LALR(1) tools, or by hand
	(by someone competent but not necessarily wizardly)?

Now, to qualify that question:

	- I realize it's entirely open-ended and very much dependant on 
	  unique characteristics of the grammar being recognized that 
	  would either make it a "good" fit for automated recognition or a 
	  "good" fit for hand coding.

	- As John's post suggests, some languages optimized for easy 
	  parsing would be... parsed easily :-) which also implies that 
	  writing a "more" efficient parser would be eas{y,ier}.

However, in my particular application (or, at least, the application I'm 
considering), I don't really have control over the "languages" that would 
be recognized, and therefore their "parsability" characteristics.

Furthermore, the entire point of my wanting to use generators is to not 
have to hand-code the parsers for each new language I encounter in the 
application (and there would be plenty). Moreover, I want the people 
extending my application to not have to hand-code new parsers as they 
expand the system (and writing new parsers is definitely an integral part 
of expanding the system).

Finally, I'm hoping to be able to use the generated parsers to do 
'realtime' (for some values of "realtime") recognition of instances of the 
languages.

So, I realize that's entirely broad and open-ended. I'm not looking for 
any definitive statements, just general wisdom along the lines of "well, 
no, you're screwed" or "you could probably do it" or "yeah, no problem, 
performance is comparable for all but the tightest languages hand-coded by 
the most wizardly of parser mages".

Thanks!

- t.




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Wed Nov 19 10:11:26 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] open-ended speed question: order of magnitude comparison?
In-Reply-To: <Pine.LNX.4.44.0311181824210.4638-100000@charmin.eheart.sg505.net>
Message-ID: <CA6A0D4C-1ABB-11D8-99AD-000A95891192@cs.usfca.edu>

Hi Tripp,

My only general comment about

>> Does anyone have a rough, order of magnitude, back of the
>> 	envelope, rule of thumb, etc. idea about the (runtime, lexing and
>> 	parsing and what-not) speed difference between a parser
>> 	generated with ANTLR, with one of the LALR(1) tools, or by hand
>> 	(by someone competent but not necessarily wizardly)?

is this: the theoretical complexity is linear for ANTLR's basic LL and 
yacc-n-friends LR-based stuff.  So, the thing you're fighting is the 
constant on the front.  That is, how fast can you spin in a for-loop or 
walk thru a state-machine.  Back in the 80's, tom pennello who works 
with deremer (inventor of LALR) did an LALR to x86 machine code 
generator.  That damn thing was FAST!

Also note that people use syntactic predicates with ANTLR to overcome 
limitations in LL or to handle nasty filth like C++.  This pushes you 
past linear and into potentially exponential complexity.  LALR parsers 
with actions reduce to LL in the worst case; they ain't much stronger 
than LL and sans predicates are much weaker, but they will always be 
linear.

Your constant may vary ;)

Terence


On Tuesday, November 18, 2003, at 03:24 PM, Tripp Lilley wrote:

>
> In another thread, John "Lingua Idiota" Mitchell wrote:
>
>> For example, if very high speed is so important then what the hell are
>> you doing using any "language" that needs such complexity to lex, 
>> parse,
>> understand, and act upon to solve the problem? I.e., why aren't you
>> using a purpose specific, fixed, highly normalized language that's
>> extremely easy to robustly deal with rapidly?
>
>
> I was searching for some really open-ended information on ANTLR
> performance (and, generally, performance of automatically-generated
> recognizers/parsers) when I stumbled on this. I was planning on posting
> this question anyway, but John's comment is of particular relevance to 
> it.
>
> The question, and then some qualifiers:
>
> 	Does anyone have a rough, order of magnitude, back of the
> 	envelope, rule of thumb, etc. idea about the (runtime, lexing and
> 	parsing and what-not) speed difference between a parser
> 	generated with ANTLR, with one of the LALR(1) tools, or by hand
> 	(by someone competent but not necessarily wizardly)?
>
> Now, to qualify that question:
>
> 	- I realize it's entirely open-ended and very much dependant on
> 	  unique characteristics of the grammar being recognized that
> 	  would either make it a "good" fit for automated recognition or a
> 	  "good" fit for hand coding.
>
> 	- As John's post suggests, some languages optimized for easy
> 	  parsing would be... parsed easily :-) which also implies that
> 	  writing a "more" efficient parser would be eas{y,ier}.
>
> However, in my particular application (or, at least, the application 
> I'm
> considering), I don't really have control over the "languages" that 
> would
> be recognized, and therefore their "parsability" characteristics.
>
> Furthermore, the entire point of my wanting to use generators is to not
> have to hand-code the parsers for each new language I encounter in the
> application (and there would be plenty). Moreover, I want the people
> extending my application to not have to hand-code new parsers as they
> expand the system (and writing new parsers is definitely an integral 
> part
> of expanding the system).
>
> Finally, I'm hoping to be able to use the generated parsers to do
> 'realtime' (for some values of "realtime") recognition of instances of 
> the
> languages.
>
> So, I realize that's entirely broad and open-ended. I'm not looking for
> any definitive statements, just general wisdom along the lines of 
> "well,
> no, you're screwed" or "you could probably do it" or "yeah, no problem,
> performance is comparable for all but the tightest languages 
> hand-coded by
> the most wizardly of parser mages".
>
> Thanks!
>
> - t.
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From cristian at amiq.ro  Wed Nov 19 14:05:18 2003
From: cristian at amiq.ro (Cristian Amitroaie)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Literals in lexer
In-Reply-To: <001601c3adfb$f4b205d0$01cf090a@oddi.is>
References: <001601c3adfb$f4b205d0$01cf090a@oddi.is>
Message-ID: <200311200005.18388.cristian@amiq.ro>

I was thinking about adding a tokens section in the lexer:

tokens {
   "this"
};

or whatever you have, eventually giving it a name to avoid any compiler 
complaints, ... shortly see the attached example, you'll figure it out...

Some log (# where "?essi" is your "this"):
---
[cristian@lapc antlr_interest]$ java Main this_lexer.test
6 : is
4 : ?essi // note the different token id
6 : lexer
6 : good
6 : enough
6 : ?essilexer
6 : is
6 : good
6 : enough
6 : indeed
---

Let me know it works ,
Cristian

On Tuesday 18 November 2003 19:46, Arnar Birgisson wrote:
> Hello
>
> > How about treating "this" as a literal and adding
> > {testLiterals=true;} to L_NAME?
>
> What do you mean about threathing "this" as a literal? "this" is
> actually "?essi" in my programming language, so the auto-generated token
> name chokes the C++ compiler. Besides, my lexing is made up of two
> lexers, and neither of them are in the same file as the parser
> definition (so there's no parser-lexer association).
>
> The document says to use the "literals" option and there's a link to the
> options page, but there is no "literals" option documented there.
>
> testLiterals is set to true for the whole grammar.
>
> Arnar
>
> > On Sunday 16 November 2003 20:30, Arnar Birgisson wrote:
> > > Hello..
> > >
> > > I have those rules in my lexer:
> > >
> > > L_THIS : "this" ;
> > > L_NAME : NameChar ( NameChar | '0'..'9' )* ;
> > > protected NameChar : ( 'a'..'z' | etc. ) ;
> > >
> > > Now, the input "thisfile" is taken as two tokens,
> >
> > (L_THIS,"this") and
> >
> > > (L_NAME,"file"). How do I correct this. The obvious way is to put
> > > predicates in all the L_* rules I have.. but there must be a simpler
> > > way.
> > >
> > > I have read the documentation on literals in lexical
> >
> > anlyzers.. but I
> >
> > > can't figure out how to do this.
> > >
> > > thanks..
> > >
> > > Arnar
> > >
> > >
> > >
> > >
> > > Your use of Yahoo! Groups is subject to
> >
> > http://docs.yahoo.com/info/terms/
> >
> >
> >
> >
> > Your use of Yahoo!
> > Groups is subject to http://docs.yahoo.com/info/terms/
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Main.java
Type: text/x-java
Size: 619 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20031120/1c3caff5/Main.bin
-------------- next part --------------
is ?essi lexer good enough
?essilexer is good enough indeed
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ThisLexer.g
Type: text/x-java
Size: 604 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20031120/1c3caff5/ThisLexer.bin
From oliver at zeigermann.de  Wed Nov 19 15:12:56 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Re: a new paper on ANTLR style grammars
In-Reply-To: <B46B2178-19FD-11D8-99AD-000A95891192@cs.usfca.edu>
Message-ID: <bpgtdo+ht3s@eGroups.com>

Actually made it through the paper while getting nervous with the
proofs ;)

While he has linear time "backtracking" performance, ANTLR is worst
case exponential. I was wondering why: ANTLR does not combine its
depth first search (aka backtracking in this context) into a table
while Bryan's approach does (at least I understand it this way). The
problem Bryan will come across (given my understanding is halfway
correct) is ACTIONS. As with LR and combined states, the problem is
when to execute associated semantic actions. The drawback is well
known and and leads to reduction in parsing power. 

Might sound weird, but I thought if we still combined states even
though they are associated with different actions and simple execute
all actions, there would be no loss of power :) Silly? Not if you have
a transactional language that allows you to roll back actions that
turn out to be invalid later and roll forward the valid ones.

Technically this is possible. Does it make sense as well? Am I slowly
going crazy? ;)

Oliver

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> Folks,
> 
> Here is an upcoming paper to a conference that formally defines 
> grammars that operate like antlr: where alternatives have an implied 
> order.  Nicely formalizes the strategy of predicated parsing etc...
> 
> http://www.brynosaurus.com//pub/lang/peg.pdf
> 
> Just as we have the syntactic predicate that says what the lookahead 
> context must be, he has a "not predicate" that says what the lookahead 
> cannot be.  This is very useful for such things as saying "match this 
> rule, but only if not following in context by this next thing."  Really 
> powerful.  moreover, he has a parser that demonstrates linear 
> backtracking parsing by use of dynamic programming.  I will be studying 
> his technique very closely before code gen for ANTLR. :)
> 
> Ter
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Wed Nov 19 15:26:35 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Re: a new paper on ANTLR style grammars
In-Reply-To: <bpgtdo+ht3s@eGroups.com>
Message-ID: <D0E4BC18-1AE7-11D8-99AD-000A95891192@cs.usfca.edu>


On Wednesday, November 19, 2003, at 03:12 PM, Oliver Zeigermann wrote:

> Actually made it through the paper while getting nervous with the
> proofs ;)
>
> While he has linear time "backtracking" performance, ANTLR is worst
> case exponential. I was wondering why: ANTLR does not combine its
> depth first search (aka backtracking in this context) into a table
> while Bryan's approach does (at least I understand it this way). The
> problem Bryan will come across (given my understanding is halfway
> correct) is ACTIONS. As with LR and combined states, the problem is
> when to execute associated semantic actions. The drawback is well
> known and and leads to reduction in parsing power.
>
> Might sound weird, but I thought if we still combined states even
> though they are associated with different actions and simple execute
> all actions, there would be no loss of power :) Silly? Not if you have
> a transactional language that allows you to roll back actions that
> turn out to be invalid later and roll forward the valid ones.
>
> Technically this is possible. Does it make sense as well? Am I slowly
> going crazy? ;)

You are already crazy like me ;) <snicker, snort>.  Just got mail from 
him. :)  Hope it's ok to repeat part here:

> - Packrat parsing guarantees linear-time parsing on all the types of 
> grammars
> it supports, which amounts to everything that fits the formalism or
> "conceptual model" of parsing expression grammars.  But the "pure" PEG 
> model
> doesn't directly support "stateful" grammars like those of C and C++, 
> in
> which you have to build up symbol tables and such that effectively 
> modify the
> grammar mid-stream as the parser scans the input from left to right.  
> From
> what I've seen so far, it appears fundamentally difficult or 
> impossible to
> make a packrat parser support stateful grammars efficiently without
> effectively turning it into a deterministic (e.g., LR) parser.

So, the actions are the problem for everyone :)

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Wed Nov 19 17:30:16 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Re: a new paper on ANTLR style grammars
In-Reply-To: <D0E4BC18-1AE7-11D8-99AD-000A95891192@cs.usfca.edu>
Message-ID: <bph5f8+7s8f@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
...
> So, the actions are the problem for everyone :)

Trees!  Trees! Ya gotta have trees.  Then actions aren't a problem.  One real strength of a multi-pass recognizer is that you separate 
syntactic analysis (parsing) from semantic interpretation (actions).  Once you have gotten to a canonical tree, the recognizer has only 
one token of lookahead so that actions always follow a (possibly semantically predicated) syntactic decision rather than being a part 
of it.

Cheers!

--Loring

> 
> Ter
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Wed Nov 19 20:11:00 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Re: a new paper on ANTLR style grammars
In-Reply-To: <bph5f8+7s8f@eGroups.com>
Message-ID: <8C88D2E3-1B0F-11D8-99AD-000A95891192@cs.usfca.edu>


On Wednesday, November 19, 2003, at 05:30 PM, lgcraymer wrote:

> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> ...
>> So, the actions are the problem for everyone :)
>
> Trees!  Trees! Ya gotta have trees.  Then actions aren't a problem.  
> One real strength of a multi-pass recognizer is that you separate
> syntactic analysis (parsing) from semantic interpretation (actions).  
> Once you have gotten to a canonical tree, the recognizer has only
> one token of lookahead so that actions always follow a (possibly 
> semantically predicated) syntactic decision rather than being a part
> of it.

Yeah, but his point is that you need semantics sometimes to parse 
properly...even if you separate into multiple phases, *might* be 
trouble.
Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ashish at noida.atrenta.com  Wed Nov 19 21:40:13 2003
From: ashish at noida.atrenta.com (ashish80_agg)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Re: Unresolved tokens while linking in VC++
In-Reply-To: <0F9CBE7F81945C4BB7A32BE6E7656EE00ECE57@sac1exch3.nawest.aspect.com>
Message-ID: <bphk3t+r97t@eGroups.com>

Hi,
  I am a pretty new user of antlr. We, at our company, have been
trying to build antlr for C++. But, as reported by Mr. Richard, we
have been finding 4 linking errors, while building the same. Can
anyone on this group tell us the reason of the same.

As far as we see, the latest downloadable version of antlr, is missing
some file (ANTLRException.cpp). Kindly help us in resolving the issue
asap.

Thanks in advance.

Regards
Ashish

--- In antlr-interest@yahoogroups.com, "Ney, Richard"
<richard.ney@a...> wrote:
> Normally I'm pretty good and finding the solution to these type of
issues but this one has me stumped. 
> 
>  
> 
> Has anyone using VC++ seen these linking errors while using that
latest ANTLR C++ snapshot. I see them defined in Token.cpp and
BaseAST.cpp but I keep on getting the unresolved errors.
> 
>  
> 
> ------ Build started: Project: managedSandbox, Configuration: Debug
Win32 ------
> 
>  
> 
> Linking...
> 
> LINK : error LNK2020: unresolved token (0A00003A) nullToken
> 
> LINK : error LNK2020: unresolved token (0A00004A) nullAST
> 
> LINK : error LNK2020: unresolved token (0A00004C)
?ASTNULL@TreeParser@antlr@@2V?$ASTRefCount@VAST@antlr@@@2@A
> 
> LINK : fatal error LNK1120: 3 unresolved externals
> 
>  
> 
>
----------------------------------------------------------------------------------------------------
> 
> Richard Ney                                                   
Aspect Communications
> 
> Principal Software Engineer
> 
> < <http://www.aspect.com/> http://www.aspect.com>                  
            Main:  408.325.2200
> 
> < <mailto:richard.ney@a...> mailto:richard.ney@a...>            SJ
Office: 408.325.2464
> 
>                                                                    
      Home Office: 916.797.9602
> 
>
----------------------------------------------------------------------------------------------------
> 
>  
> 
> The Three Laws of Infernal Dynamics:
> 1. An object in motion will always be headed in the wrong direction.
> 2. An object at rest will always be in the wrong place.
> 3. The energy required to change either of these states will always
be more than you wish to expend, but never so much as to make the task
appear prospectively impossible.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Wed Nov 19 22:32:41 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Re: a new paper on ANTLR style grammars
In-Reply-To: <8C88D2E3-1B0F-11D8-99AD-000A95891192@cs.usfca.edu>
Message-ID: <bphn69+g38t@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
wrote:
> 
> On Wednesday, November 19, 2003, at 05:30 PM, lgcraymer wrote:
> 
> > --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
wrote:
> > ...
> >> So, the actions are the problem for everyone :)
> >
> > Trees!  Trees! Ya gotta have trees.  Then actions aren't a 
problem.  
> > One real strength of a multi-pass recognizer is that you separate
> > syntactic analysis (parsing) from semantic interpretation 
(actions).  
> > Once you have gotten to a canonical tree, the recognizer has only
> > one token of lookahead so that actions always follow a (possibly 
> > semantically predicated) syntactic decision rather than being a 
part
> > of it.
> 
> Yeah, but his point is that you need semantics sometimes to parse 
> properly...even if you separate into multiple phases, *might* be 
> trouble.

If you mean "recognize" instead of "parse", I agree--that's 
consistent with what I wrote.  Or almost agree--mostly semantic 
information is maintained to prevent a grammar "explosion" (for 
example, if FOO is encountered as a local variable, it can be 
followed with a syntactic description that encapsulates that--it 
isn't theoretically necessary to maintain a symbol table, although 
it might be in practice).  It is, however, easier to build a tree 
whose structure makes it easy to extract the semantics.

--Loring

> Ter
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From escher-solutions at shaw.ca  Wed Nov 19 23:17:30 2003
From: escher-solutions at shaw.ca (escher_solutions2003)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] C Grammar Build - Warning Java Newbie
Message-ID: <bphpqa+lke4@eGroups.com>

Hi All,

I am new to antlr after working with bison/flex. I have limmited 
exposure to Java but have an OOP/C++ bankground.

I am trying to build the Gnu C grammars and I am getting the 
following compile error during the build.

> javac -classpath .;c:\antlr-2.7.2\antlr.jar TNode.java
TNode.java:9: '.' expected
import CToken;
             ^
1 error

Why is the "import CToken;" statement causing an error? Note my 
classpath commandline settings contains the current directory.

Any suggestions?

Thanks

Stu Harker


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Wed Nov 19 23:40:23 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Re: a new paper on ANTLR style grammars
In-Reply-To: <D0E4BC18-1AE7-11D8-99AD-000A95891192@cs.usfca.edu>
Message-ID: <bphr57+j3ld@eGroups.com>

What I wanted to say was: If you have sematic actions associated to
your grammar that can be inserted (and of course executed) at any
point and you have a table driven approach you are in trouble. This is
because what I understand as the precomputation of a search tree into
a table combining certain *search* states. Extrapolating from what I
know about LR you have a problem when youe have a grammar like this:

a : A A { do something here } A A B ;
b : A A { do something different here } A A C ;

upon input

AAAAC

This is because the parser has no idea which action to execute here.
Now, my idea was to execute both and roll back the action of rule a as
soon as it is clear that rule b actually matches.

A bit clearer now?

Oliver

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> 
> On Wednesday, November 19, 2003, at 03:12 PM, Oliver Zeigermann wrote:
> 
> > Actually made it through the paper while getting nervous with the
> > proofs ;)
> >
> > While he has linear time "backtracking" performance, ANTLR is worst
> > case exponential. I was wondering why: ANTLR does not combine its
> > depth first search (aka backtracking in this context) into a table
> > while Bryan's approach does (at least I understand it this way). The
> > problem Bryan will come across (given my understanding is halfway
> > correct) is ACTIONS. As with LR and combined states, the problem is
> > when to execute associated semantic actions. The drawback is well
> > known and and leads to reduction in parsing power.
> >
> > Might sound weird, but I thought if we still combined states even
> > though they are associated with different actions and simple execute
> > all actions, there would be no loss of power :) Silly? Not if you have
> > a transactional language that allows you to roll back actions that
> > turn out to be invalid later and roll forward the valid ones.
> >
> > Technically this is possible. Does it make sense as well? Am I slowly
> > going crazy? ;)
> 
> You are already crazy like me ;) <snicker, snort>.  Just got mail from 
> him. :)  Hope it's ok to repeat part here:
> 
> > - Packrat parsing guarantees linear-time parsing on all the types of 
> > grammars
> > it supports, which amounts to everything that fits the formalism or
> > "conceptual model" of parsing expression grammars.  But the "pure"
PEG 
> > model
> > doesn't directly support "stateful" grammars like those of C and C++, 
> > in
> > which you have to build up symbol tables and such that effectively 
> > modify the
> > grammar mid-stream as the parser scans the input from left to right.  
> > From
> > what I've seen so far, it appears fundamentally difficult or 
> > impossible to
> > make a packrat parser support stateful grammars efficiently without
> > effectively turning it into a deterministic (e.g., LR) parser.
> 
> So, the actions are the problem for everyone :)
> 
> Ter
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From m_schellens at hotmail.com  Thu Nov 20 00:29:39 2003
From: m_schellens at hotmail.com (marcschellens)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Lexical states
Message-ID: <bphu1j+dfsq@eGroups.com>

I read the manual about lexical states, but:

I have a parser for a format string. Parts of that format
string are simple strings. ("...")
But if a simple string starts with '%' (%"...") its content is
a c-style format string (CSStr) which has to be processed differently
ie. then the string contains further format information.
But both formats could be handled in the same parser.
I could break this CSStr into parts and parse them in the parser,
but the lexer complaints that the lexical rules are ambiguous then.
(eg. a CSStr ends with '"', that's how a normal string starts...)

As I understood the lexical states, I could embed the parsing rules
for the CSStr into protected rules, but then the parser can't see them.
Or is there a way to send a token stream to the parser
form within protected rules?

Any other suggestion?

Thanks,
marc



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Thu Nov 20 00:48:12 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Re: a new paper on ANTLR style grammars
In-Reply-To: <bphr57+j3ld@eGroups.com>
Message-ID: <bphv4c+mo5v@eGroups.com>

Oliver--

You can do better by deferring the actions--basically, build a 
monster case statement including all of the possible actions in a 
grammar--and execute them after matching a rule.  Then you can 
trigger a set of actions at "commit" points.  Functional languages 
make this sort of lazy evaluation easier.  Rolling back actions is 
trickier--you have to have some sort of mechanism to record state, 
or the cost for checkpoint/rollback is very high.

For that matter, you can defer all actions until the entire grammar 
is recognized as long as the actions do not affect the parse.  
Editing of a generated tree might be trickier, but not that 
difficult--you just insert code for that in the list of deferred 
actions.

--Loring


--- In antlr-interest@yahoogroups.com, "Oliver Zeigermann" 
<oliver@z...> wrote:
> What I wanted to say was: If you have sematic actions associated to
> your grammar that can be inserted (and of course executed) at any
> point and you have a table driven approach you are in trouble. 
This is
> because what I understand as the precomputation of a search tree 
into
> a table combining certain *search* states. Extrapolating from what 
I
> know about LR you have a problem when youe have a grammar like 
this:
> 
> a : A A { do something here } A A B ;
> b : A A { do something different here } A A C ;
> 
> upon input
> 
> AAAAC
> 
> This is because the parser has no idea which action to execute 
here.
> Now, my idea was to execute both and roll back the action of rule 
a as
> soon as it is clear that rule b actually matches.
> 
> A bit clearer now?
> 
> Oliver
> 
> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
wrote:
> > 
> > On Wednesday, November 19, 2003, at 03:12 PM, Oliver Zeigermann 
wrote:
> > 
> > > Actually made it through the paper while getting nervous with 
the
> > > proofs ;)
> > >
> > > While he has linear time "backtracking" performance, ANTLR is 
worst
> > > case exponential. I was wondering why: ANTLR does not combine 
its
> > > depth first search (aka backtracking in this context) into a 
table
> > > while Bryan's approach does (at least I understand it this 
way). The
> > > problem Bryan will come across (given my understanding is 
halfway
> > > correct) is ACTIONS. As with LR and combined states, the 
problem is
> > > when to execute associated semantic actions. The drawback is 
well
> > > known and and leads to reduction in parsing power.
> > >
> > > Might sound weird, but I thought if we still combined states 
even
> > > though they are associated with different actions and simple 
execute
> > > all actions, there would be no loss of power :) Silly? Not if 
you have
> > > a transactional language that allows you to roll back actions 
that
> > > turn out to be invalid later and roll forward the valid ones.
> > >
> > > Technically this is possible. Does it make sense as well? Am I 
slowly
> > > going crazy? ;)
> > 
> > You are already crazy like me ;) <snicker, snort>.  Just got 
mail from 
> > him. :)  Hope it's ok to repeat part here:
> > 
> > > - Packrat parsing guarantees linear-time parsing on all the 
types of 
> > > grammars
> > > it supports, which amounts to everything that fits the 
formalism or
> > > "conceptual model" of parsing expression grammars.  But 
the "pure"
> PEG 
> > > model
> > > doesn't directly support "stateful" grammars like those of C 
and C++, 
> > > in
> > > which you have to build up symbol tables and such that 
effectively 
> > > modify the
> > > grammar mid-stream as the parser scans the input from left to 
right.  
> > > From
> > > what I've seen so far, it appears fundamentally difficult or 
> > > impossible to
> > > make a packrat parser support stateful grammars efficiently 
without
> > > effectively turning it into a deterministic (e.g., LR) parser.
> > 
> > So, the actions are the problem for everyone :)
> > 
> > Ter
> > --
> > Professor Comp. Sci., University of San Francisco
> > Creator, ANTLR Parser Generator, http://www.antlr.org
> > Co-founder, http://www.jguru.com
> > Co-founder, http://www.knowspam.net enjoy email again!
> > Co-founder, http://www.peerscope.com pure link sharing


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Thu Nov 20 03:54:01 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Literals in lexer
In-Reply-To: <200311200005.18388.cristian@amiq.ro>
Message-ID: <001a01c3af5c$fd645950$01cf090a@oddi.is>

Excellent, this was exactly what I was looking for.

Cristian, thank you so much for spending all this time on my problem.

Arnar

> -----Original Message-----
> From: Cristian Amitroaie [mailto:cristian@amiq.ro] 
> Sent: 19. n?vember 2003 22:05
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] Literals in lexer
> 
> 
> I was thinking about adding a tokens section in the lexer:
> 
> tokens {
>    "this"
> };
> 
> or whatever you have, eventually giving it a name to avoid 
> any compiler 
> complaints, ... shortly see the attached example, you'll 
> figure it out...
> 
> Some log (# where "?essi" is your "this"):
> ---
> [cristian@lapc antlr_interest]$ java Main this_lexer.test
> 6 : is
> 4 : ?essi // note the different token id
> 6 : lexer
> 6 : good
> 6 : enough
> 6 : ?essilexer
> 6 : is
> 6 : good
> 6 : enough
> 6 : indeed
> ---
> 
> Let me know it works ,
> Cristian
> 
> On Tuesday 18 November 2003 19:46, Arnar Birgisson wrote:
> > Hello
> >
> > > How about treating "this" as a literal and adding
> > > {testLiterals=true;} to L_NAME?
> >
> > What do you mean about threathing "this" as a literal? "this" is
> > actually "?essi" in my programming language, so the 
> auto-generated token
> > name chokes the C++ compiler. Besides, my lexing is made up of two
> > lexers, and neither of them are in the same file as the parser
> > definition (so there's no parser-lexer association).
> >
> > The document says to use the "literals" option and there's 
> a link to the
> > options page, but there is no "literals" option documented there.
> >
> > testLiterals is set to true for the whole grammar.
> >
> > Arnar
> >
> > > On Sunday 16 November 2003 20:30, Arnar Birgisson wrote:
> > > > Hello..
> > > >
> > > > I have those rules in my lexer:
> > > >
> > > > L_THIS : "this" ;
> > > > L_NAME : NameChar ( NameChar | '0'..'9' )* ;
> > > > protected NameChar : ( 'a'..'z' | etc. ) ;
> > > >
> > > > Now, the input "thisfile" is taken as two tokens,
> > >
> > > (L_THIS,"this") and
> > >
> > > > (L_NAME,"file"). How do I correct this. The obvious way 
> is to put
> > > > predicates in all the L_* rules I have.. but there must 
> be a simpler
> > > > way.
> > > >
> > > > I have read the documentation on literals in lexical
> > >
> > > anlyzers.. but I
> > >
> > > > can't figure out how to do this.
> > > >
> > > > thanks..
> > > >
> > > > Arnar
> > > >
> > > >
> > > >
> > > >
> > > > Your use of Yahoo! Groups is subject to
> > >
> > > http://docs.yahoo.com/info/terms/
> > >
> > >
> > >
> > >
> > > Your use of Yahoo!
> > > Groups is subject to http://docs.yahoo.com/info/terms/
> >
> > Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
> 
>  
> 
> Your use of Yahoo! 
> Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Thu Nov 20 04:08:38 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] C Grammar Build - Warning Java Newbie
In-Reply-To: <bphpqa+lke4@eGroups.com>
Message-ID: <001b01c3af5f$082f5720$01cf090a@oddi.is>

Hello Stu,

I don't know if the Java-specs have changed, but importing a class
that's already in the same package as the importing file is not
neccessary. The import statement thus only makes sense if it's argument
contains a dot, ".".

Maybe this was legal in older java-compilers, but you should be able
just to comment out this line, the class CToken is in the same directory
as TNode so it should be visible without any import.

Arnar

> -----Original Message-----
> From: escher_solutions2003 [mailto:escher-solutions@shaw.ca] 
> Sent: 20. n?vember 2003 07:18
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] C Grammar Build - Warning Java Newbie
> 
> 
> Hi All,
> 
> I am new to antlr after working with bison/flex. I have limmited 
> exposure to Java but have an OOP/C++ bankground.
> 
> I am trying to build the Gnu C grammars and I am getting the 
> following compile error during the build.
> 
> > javac -classpath .;c:\antlr-2.7.2\antlr.jar TNode.java
> TNode.java:9: '.' expected
> import CToken;
>              ^
> 1 error
> 
> Why is the "import CToken;" statement causing an error? Note my 
> classpath commandline settings contains the current directory.
> 
> Any suggestions?
> 
> Thanks
> 
> Stu Harker
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Thu Nov 20 04:56:21 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Re: Unresolved tokens while linking in VC++
In-Reply-To: <bphk3t+r97t@eGroups.com>; from ashish@noida.atrenta.com on Thu, Nov 20, 2003 at 05:40:13AM -0000
References: <0F9CBE7F81945C4BB7A32BE6E7656EE00ECE57@sac1exch3.nawest.aspect.com> <bphk3t+r97t@eGroups.com>
Message-ID: <20031120135620.A6055@cs.utwente.nl>

On Thu, Nov 20, 2003 at 05:40:13AM -0000, ashish80_agg wrote:
>   I am a pretty new user of antlr. We, at our company, have been
> trying to build antlr for C++. But, as reported by Mr. Richard, we
> have been finding 4 linking errors, while building the same. Can
> anyone on this group tell us the reason of the same.
> 
> As far as we see, the latest downloadable version of antlr, is missing
> some file (ANTLRException.cpp). Kindly help us in resolving the issue
> asap.

ANTLRException.cpp does not exist. (it may have existed once though) are
you by any chance using an old workspace ?

The other errors (presuming you have the same as Richard) basically look like
MS weirdness. Try changing linkage/constness of these variables at their
definitions. I'm no VC7 user and don't have access to it so I have no clue.
It is kindoff strange since I had reports that it worked with VC7.1 :(

One note about the symbols those are all objects of which there should be
only *one* for every lexer/parser/treeparser combination (that works on the
same ast) 

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     "Never argue with an idiot, for they will bring you down to their
              level and beat you with experience." --- Unknown


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From m_schellens at hotmail.com  Thu Nov 20 06:26:55 2003
From: m_schellens at hotmail.com (marcschellens)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] How to handle the tokens from two lexers?
Message-ID: <bpiivf+vnf0@eGroups.com>

How Can I handle the different token sets from two
different lexers within one parser?
thanks,
marc


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From m_schellens at hotmail.com  Thu Nov 20 07:08:23 2003
From: m_schellens at hotmail.com (marcschellens)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Multiple lexers (c++ code gen.)
Message-ID: <bpild7+mjgg@eGroups.com>

Somehow the switch between two lexers seems not to work:

setup is like this:

    TokenStreamSelector selector;
    
    FMTLexer   lexer( istr);
    lexer.SetSelector( selector);
    
    CFMTLexer  cLexer( lexer.getInputState());
    cLexer.SetSelector( selector);

    lexer.SetCLexer( cLexer);

    selector.select( &lexer);

    FMTParser  parser( selector);

    parser.initializeASTFactory( FMTNodeFactory);
    parser.setASTFactory( &FMTNodeFactory );
   
    parser.format( 1);

And usage:

in FMTLexer (switch to CFMTLexer):

CSTRING!
	: 'c' '\"' { cLexer->DoubleQuotes( true); selector->push(cLexer);}
    | 'c' '\'' { cLexer->DoubleQuotes( false); selector->push( cLexer);}
	;	

cLexer is CFMTLexer* (private member in lexer).

Do I make an obvious mistake?
thanks,
marc

in CFMTLexer (switch back)

protected
ENDSTR1
    : ('\"') => '\"' 
    | { selector->pop();}
    ;






 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Thu Nov 20 07:14:35 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] How to handle the tokens from two lexers?
In-Reply-To: <bpiivf+vnf0@eGroups.com>
Message-ID: <003401c3af79$02e43640$01cf090a@oddi.is>

I do this by importing the vocabulary from lexer A into lexer B, and
then importing the vocabulary from lexer B into the parser.

This makes sure that lexer B doesn't generate token id's that are
already defined in lexer A.

Like this:

class LexerA extends Lexer;
options {
	k = 2;
	charVocabulary = '\3'..'\377';
	exportVocab = LexerATokens;
}

class LexerB extends Lexer;
ptions {
	k = 2;
	charVocabulary = '\3'..'\377';
	importVocab = LexerATokens;
	exportVocab = LexerABTokens;
}

class MyParser extends Parser;
ptions {
	k = 3;
	importVocab = LexerABTokens;
	buildAST = true;
}

Arnar

> -----Original Message-----
> From: marcschellens [mailto:m_schellens@hotmail.com] 
> Sent: 20. n?vember 2003 14:27
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] How to handle the tokens from two lexers?
> 
> 
> How Can I handle the different token sets from two
> different lexers within one parser?
> thanks,
> marc
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Thu Nov 20 07:19:51 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Multiple lexers (c++ code gen.)
In-Reply-To: <bpild7+mjgg@eGroups.com>
Message-ID: <003501c3af79$c0363ef0$01cf090a@oddi.is>

You have to associate each lexer in the selector with a identifying
string, and then use that string as an argument to selctor->push.

Here's how I do it:

 istream& input = cin;

 TokenStreamSelector selector;

 LexerA aLexer(input);
 aLexer.initialize(&selector);

 LexerB bLexer(forritLexer.getInputState());
 bLexer.initialize(&selector);

 selector.addInputStream(&aLexer, "LexerA");
 selector.addInputStream(&bLexer, "LexerB");
 selector.select("LexerA");

 ASTFactory my_factory;
 MyParser parser(selector);

 parser.initializeASTFactory(my_factory);
 parser.setASTFactory(&my_factory);

 parser.start();

and then use it like this in LexerA:

 UNIT_LBRACE
   : '{' { selector->push("eininglexer"); }
   ;

Hope this helps.

Arnar

> -----Original Message-----
> From: marcschellens [mailto:m_schellens@hotmail.com] 
> Sent: 20. n?vember 2003 15:08
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Multiple lexers (c++ code gen.)
> 
> 
> Somehow the switch between two lexers seems not to work:
> 
> setup is like this:
> 
>     TokenStreamSelector selector;
>     
>     FMTLexer   lexer( istr);
>     lexer.SetSelector( selector);
>     
>     CFMTLexer  cLexer( lexer.getInputState());
>     cLexer.SetSelector( selector);
> 
>     lexer.SetCLexer( cLexer);
> 
>     selector.select( &lexer);
> 
>     FMTParser  parser( selector);
> 
>     parser.initializeASTFactory( FMTNodeFactory);
>     parser.setASTFactory( &FMTNodeFactory );
>    
>     parser.format( 1);
> 
> And usage:
> 
> in FMTLexer (switch to CFMTLexer):
> 
> CSTRING!
> 	: 'c' '\"' { cLexer->DoubleQuotes( true); 
> selector->push(cLexer);}
>     | 'c' '\'' { cLexer->DoubleQuotes( false); 
> selector->push( cLexer);}
> 	;	
> 
> cLexer is CFMTLexer* (private member in lexer).
> 
> Do I make an obvious mistake?
> thanks,
> marc
> 
> in CFMTLexer (switch back)
> 
> protected
> ENDSTR1
>     : ('\"') => '\"' 
>     | { selector->pop();}
>     ;
> 
> 
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Thu Nov 20 08:35:06 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Re: a new paper on ANTLR style grammars
In-Reply-To: <bphv4c+mo5v@eGroups.com>
Message-ID: <bpiqfq+4u5v@eGroups.com>

Loring, thanks for the substantial input and taking this seriously :)

--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> You can do better by deferring the actions--basically, build a 
> monster case statement including all of the possible actions in a 
> grammar--and execute them after matching a rule. 

*After* exactly is the problem. It is pretty easy to execute actions
after a derivation / reduce, but not while shifting. This may be
desirable though...

> Then you can 
> trigger a set of actions at "commit" points.  Functional languages 
> make this sort of lazy evaluation easier.  

Where should those commit points be?

> Rolling back actions is 
> trickier--you have to have some sort of mechanism to record state, 
> or the cost for checkpoint/rollback is very high.

Rolling back / forward does not come for free, agreed! But, if
implemented reasonably expenses may at most be doubled. Compared to
worst case exponential costs of backtracking this is not so bad.

> For that matter, you can defer all actions until the entire grammar 
> is recognized as long as the actions do not affect the parse.  
> Editing of a generated tree might be trickier, but not that 
> difficult--you just insert code for that in the list of deferred 
> actions.

We discussed this before - but still - writing to and afterwards
reading from a symbol table is quite a usual thing. This can not be
expressed merely by means of CFGs (or less), you need actions and
semantic checks (i.e. predicates) here.

Other than that, to show my colors: I am a big fan of ASTs in genereal
and ANTLR tree transformation in particular :)

Oliver

> --Loring
> 
> 
> --- In antlr-interest@yahoogroups.com, "Oliver Zeigermann" 
> <oliver@z...> wrote:
> > What I wanted to say was: If you have sematic actions associated
to
> > your grammar that can be inserted (and of course executed) at any
> > point and you have a table driven approach you are in trouble. 
> This is
> > because what I understand as the precomputation of a search tree 
> into
> > a table combining certain *search* states. Extrapolating from
what 
> I
> > know about LR you have a problem when youe have a grammar like 
> this:
> > 
> > a : A A { do something here } A A B ;
> > b : A A { do something different here } A A C ;
> > 
> > upon input
> > 
> > AAAAC
> > 
> > This is because the parser has no idea which action to execute 
> here.
> > Now, my idea was to execute both and roll back the action of rule 
> a as
> > soon as it is clear that rule b actually matches.
> > 
> > A bit clearer now?
> > 
> > Oliver
> > 
> > --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
> wrote:
> > > 
> > > On Wednesday, November 19, 2003, at 03:12 PM, Oliver Zeigermann 
> wrote:
> > > 
> > > > Actually made it through the paper while getting nervous with 
> the
> > > > proofs ;)
> > > >
> > > > While he has linear time "backtracking" performance, ANTLR is 
> worst
> > > > case exponential. I was wondering why: ANTLR does not combine 
> its
> > > > depth first search (aka backtracking in this context) into a 
> table
> > > > while Bryan's approach does (at least I understand it this 
> way). The
> > > > problem Bryan will come across (given my understanding is 
> halfway
> > > > correct) is ACTIONS. As with LR and combined states, the 
> problem is
> > > > when to execute associated semantic actions. The drawback is 
> well
> > > > known and and leads to reduction in parsing power.
> > > >
> > > > Might sound weird, but I thought if we still combined states 
> even
> > > > though they are associated with different actions and simple 
> execute
> > > > all actions, there would be no loss of power :) Silly? Not if 
> you have
> > > > a transactional language that allows you to roll back actions 
> that
> > > > turn out to be invalid later and roll forward the valid ones.
> > > >
> > > > Technically this is possible. Does it make sense as well? Am
I 
> slowly
> > > > going crazy? ;)
> > > 
> > > You are already crazy like me ;) <snicker, snort>.  Just got 
> mail from 
> > > him. :)  Hope it's ok to repeat part here:
> > > 
> > > > - Packrat parsing guarantees linear-time parsing on all the 
> types of 
> > > > grammars
> > > > it supports, which amounts to everything that fits the 
> formalism or
> > > > "conceptual model" of parsing expression grammars.  But 
> the "pure"
> > PEG 
> > > > model
> > > > doesn't directly support "stateful" grammars like those of C 
> and C++, 
> > > > in
> > > > which you have to build up symbol tables and such that 
> effectively 
> > > > modify the
> > > > grammar mid-stream as the parser scans the input from left to 
> right.  
> > > > From
> > > > what I've seen so far, it appears fundamentally difficult or 
> > > > impossible to
> > > > make a packrat parser support stateful grammars efficiently 
> without
> > > > effectively turning it into a deterministic (e.g., LR) parser.
> > > 
> > > So, the actions are the problem for everyone :)
> > > 
> > > Ter
> > > --
> > > Professor Comp. Sci., University of San Francisco
> > > Creator, ANTLR Parser Generator, http://www.antlr.org
> > > Co-founder, http://www.jguru.com
> > > Co-founder, http://www.knowspam.net enjoy email again!
> > > Co-founder, http://www.peerscope.com pure link sharing


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Thu Nov 20 10:05:41 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] a new paper on ANTLR style grammars
In-Reply-To: <B46B2178-19FD-11D8-99AD-000A95891192@cs.usfca.edu>
Message-ID: <003d01c3af90$eab18600$01cf090a@oddi.is>

Hello there..

Am I correct in the assumption that the "|" operator in ANTLR is not
ordered, i.e. it has the same meaning as in BNF? If so, wouldn't the "/"
operator as defined in the paper be useful? I don't have much
perspective on this as I am yet a beginner, but wouldn't it at least
save us from inserting "options {greedy=true}:" and syntactic predicates
here and there?

Arnar

> -----Original Message-----
> From: Terence Parr [mailto:parrt@cs.usfca.edu] 
> Sent: 18. n?vember 2003 19:31
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] a new paper on ANTLR style grammars
> 
> 
> Folks,
> 
> Here is an upcoming paper to a conference that formally defines 
> grammars that operate like antlr: where alternatives have an implied 
> order.  Nicely formalizes the strategy of predicated parsing etc...
> 
http://www.brynosaurus.com//pub/lang/peg.pdf

Just as we have the syntactic predicate that says what the lookahead 
context must be, he has a "not predicate" that says what the lookahead 
cannot be.  This is very useful for such things as saying "match this 
rule, but only if not following in context by this next thing."  Really 
powerful.  moreover, he has a parser that demonstrates linear 
backtracking parsing by use of dynamic programming.  I will be studying 
his technique very closely before code gen for ANTLR. :)

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Thu Nov 20 11:38:18 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] woohoo! new site doubles downloads
Message-ID: <1750D184-1B91-11D8-99AD-000A95891192@cs.usfca.edu>

Howdy folks,

I built the new ANTLR site this summer partly because the old one 
sucked, but partly because for marketing reasons.  I was curious to 
know what affect the new good-looking site would have on downloads.  
Well, it more than doubled them!

In July we had almost 5000 downloads of any version and after the new 
site came up, it went to 19k in August then popped down in September.  
Back to 11k in October and already over 11k downloads in November.  
Sweeeet!

Interesting study in programmer marketing.  Well worth the $1k I spent 
out of pocket for the design, eh?

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Thu Nov 20 11:53:21 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Re: a new paper on ANTLR style grammars
In-Reply-To: <bpiqfq+4u5v@eGroups.com>
Message-ID: <bpj63h+gcfc@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Oliver Zeigermann" <oliver@z...> wrote:
> Loring, thanks for the substantial input and taking this seriously :)
> 
> --- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> > You can do better by deferring the actions--basically, build a 
> > monster case statement including all of the possible actions in a 
> > grammar--and execute them after matching a rule. 
> 
> *After* exactly is the problem. It is pretty easy to execute actions
> after a derivation / reduce, but not while shifting. This may be
> desirable though...

Sorry if I was unclear.  Actions need to execute during a parse only if they affect the parse--you need semantic predicates for that.  
What you can do is build a list of operations to be executed later.

> > Then you can 
> > trigger a set of actions at "commit" points.  Functional languages 
> > make this sort of lazy evaluation easier.  
> 
> Where should those commit points be?

The simple answer is "reduce" operations in an LR parser, but I don't think that that is a complete answer.

> > Rolling back actions is 
> > trickier--you have to have some sort of mechanism to record state, 
> > or the cost for checkpoint/rollback is very high.
> 
> Rolling back / forward does not come for free, agreed! But, if
> implemented reasonably expenses may at most be doubled. Compared to
> worst case exponential costs of backtracking this is not so bad.

Checkpoint/rollback only affects action state maintenance, not the parsing path.  Backtracking still happens.  Besides, the worst 
case scenario is a worst case scenario and would occur in practice only for truly horrendous languages which are probably not 
manageable in any other way.  BTW, exponential overhead occurs only if there is a syntactic predicate on almost every alternative 
(with ANTLR)--in practice, it is hard to get more than about 10% overhead from a reasonable problem.  Building a state machine with 
deferred actions will incur little overhead and achieve the same effect.

> > For that matter, you can defer all actions until the entire grammar 
> > is recognized as long as the actions do not affect the parse.  
> > Editing of a generated tree might be trickier, but not that 
> > difficult--you just insert code for that in the list of deferred 
> > actions.
> 
> We discussed this before - but still - writing to and afterwards
> reading from a symbol table is quite a usual thing. This can not be
> expressed merely by means of CFGs (or less), you need actions and
> semantic checks (i.e. predicates) here.

Not quite--I'm afraid that my explanation was a bit terse.  The point is to do tree construction via deferred actions and achieve 
edit-during-construction through inserting helper actions into the list.  You can do all of the normal symbol table stuff through deferred 
actions--what you cannot do is mix them with semantic predicates.

--Loring

> Other than that, to show my colors: I am a big fan of ASTs in genereal
> and ANTLR tree transformation in particular :)
> 
> Oliver
> 
> > --Loring
> > 
> > 
> > --- In antlr-interest@yahoogroups.com, "Oliver Zeigermann" 
> > <oliver@z...> wrote:
> > > What I wanted to say was: If you have sematic actions associated
> to
> > > your grammar that can be inserted (and of course executed) at any
> > > point and you have a table driven approach you are in trouble. 
> > This is
> > > because what I understand as the precomputation of a search tree 
> > into
> > > a table combining certain *search* states. Extrapolating from
> what 
> > I
> > > know about LR you have a problem when youe have a grammar like 
> > this:
> > > 
> > > a : A A { do something here } A A B ;
> > > b : A A { do something different here } A A C ;
> > > 
> > > upon input
> > > 
> > > AAAAC
> > > 
> > > This is because the parser has no idea which action to execute 
> > here.
> > > Now, my idea was to execute both and roll back the action of rule 
> > a as
> > > soon as it is clear that rule b actually matches.
> > > 
> > > A bit clearer now?
> > > 
> > > Oliver
> > > 
> > > --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
> > wrote:
> > > > 
> > > > On Wednesday, November 19, 2003, at 03:12 PM, Oliver Zeigermann 
> > wrote:
> > > > 
> > > > > Actually made it through the paper while getting nervous with 
> > the
> > > > > proofs ;)
> > > > >
> > > > > While he has linear time "backtracking" performance, ANTLR is 
> > worst
> > > > > case exponential. I was wondering why: ANTLR does not combine 
> > its
> > > > > depth first search (aka backtracking in this context) into a 
> > table
> > > > > while Bryan's approach does (at least I understand it this 
> > way). The
> > > > > problem Bryan will come across (given my understanding is 
> > halfway
> > > > > correct) is ACTIONS. As with LR and combined states, the 
> > problem is
> > > > > when to execute associated semantic actions. The drawback is 
> > well
> > > > > known and and leads to reduction in parsing power.
> > > > >
> > > > > Might sound weird, but I thought if we still combined states 
> > even
> > > > > though they are associated with different actions and simple 
> > execute
> > > > > all actions, there would be no loss of power :) Silly? Not if 
> > you have
> > > > > a transactional language that allows you to roll back actions 
> > that
> > > > > turn out to be invalid later and roll forward the valid ones.
> > > > >
> > > > > Technically this is possible. Does it make sense as well? Am
> I 
> > slowly
> > > > > going crazy? ;)
> > > > 
> > > > You are already crazy like me ;) <snicker, snort>.  Just got 
> > mail from 
> > > > him. :)  Hope it's ok to repeat part here:
> > > > 
> > > > > - Packrat parsing guarantees linear-time parsing on all the 
> > types of 
> > > > > grammars
> > > > > it supports, which amounts to everything that fits the 
> > formalism or
> > > > > "conceptual model" of parsing expression grammars.  But 
> > the "pure"
> > > PEG 
> > > > > model
> > > > > doesn't directly support "stateful" grammars like those of C 
> > and C++, 
> > > > > in
> > > > > which you have to build up symbol tables and such that 
> > effectively 
> > > > > modify the
> > > > > grammar mid-stream as the parser scans the input from left to 
> > right.  
> > > > > From
> > > > > what I've seen so far, it appears fundamentally difficult or 
> > > > > impossible to
> > > > > make a packrat parser support stateful grammars efficiently 
> > without
> > > > > effectively turning it into a deterministic (e.g., LR) parser.
> > > > 
> > > > So, the actions are the problem for everyone :)
> > > > 
> > > > Ter
> > > > --
> > > > Professor Comp. Sci., University of San Francisco
> > > > Creator, ANTLR Parser Generator, http://www.antlr.org
> > > > Co-founder, http://www.jguru.com
> > > > Co-founder, http://www.knowspam.net enjoy email again!
> > > > Co-founder, http://www.peerscope.com pure link sharing


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Thu Nov 20 12:06:27 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] a new paper on ANTLR style grammars
In-Reply-To: <003d01c3af90$eab18600$01cf090a@oddi.is>
Message-ID: <066EBCD4-1B95-11D8-99AD-000A95891192@cs.usfca.edu>


On Thursday, November 20, 2003, at 10:05 AM, Arnar Birgisson wrote:

> Hello there..
>
> Am I correct in the assumption that the "|" operator in ANTLR is not
> ordered, i.e. it has the same meaning as in BNF? If so, wouldn't the 
> "/"
> operator as defined in the paper be useful? I don't have much
> perspective on this as I am yet a beginner, but wouldn't it at least
> save us from inserting "options {greedy=true}:" and syntactic 
> predicates
> here and there?

Given a nondeterminism like that derived from the if-then-else 
ambiguity, ANTLR chooses the first alternative that matches; order is 
implied.  For syntactic predicates, if a predicate fails, it tries the 
next alt that could match it; again an implied order.

The difference is that either a nondeterminism or syntactic predicate 
are required to get this functionality.  The PEG stuff from Bryan Ford 
(the paper) is explicitly ordered from the start.  I've not dug enough 
to know much more.

Terence

>
> Arnar
>
>> -----Original Message-----
>> From: Terence Parr [mailto:parrt@cs.usfca.edu]
>> Sent: 18. n?vember 2003 19:31
>> To: antlr-interest@yahoogroups.com
>> Subject: [antlr-interest] a new paper on ANTLR style grammars
>>
>>
>> Folks,
>>
>> Here is an upcoming paper to a conference that formally defines
>> grammars that operate like antlr: where alternatives have an implied
>> order.  Nicely formalizes the strategy of predicated parsing etc...
>>
> http://www.brynosaurus.com//pub/lang/peg.pdf
>
> Just as we have the syntactic predicate that says what the lookahead
> context must be, he has a "not predicate" that says what the lookahead
> cannot be.  This is very useful for such things as saying "match this
> rule, but only if not following in context by this next thing."  Really
> powerful.  moreover, he has a parser that demonstrates linear
> backtracking parsing by use of dynamic programming.  I will be studying
> his technique very closely before code gen for ANTLR. :)
>
> Ter
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sunshine at public.kherson.ua  Thu Nov 20 12:06:22 2003
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] http://www.antlr.org/blog/antlr3/whitepaper.tml
Message-ID: <BBE2EB5E.296A8%sunshine@public.kherson.ua>

Hi Terr,

I wonder, here just thrown points, no links, yes?

1) will ANTLR 3.0 support Unicode?
If yes, then it should be added here


2) what is planned for license changes ?


-- 
Best regards,
Ruslan Zasukhin               [ I feel the need...the need for speed ]
----------------------------------------------------------------------
Paradigma Software                        http://www.paradigmasoft.com

Valentina is cross-platform, fantastic fast database engine, supports
C/C++,Java,JDBC,SQL,Director,REALbasic,PHP,XCMD,COM,Visual BASIC......
----------------------------------------------------------------------



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Thu Nov 20 14:12:13 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] http://www.antlr.org/blog/antlr3/whitepaper.tml
In-Reply-To: <BBE2EB5E.296A8%sunshine@public.kherson.ua>
Message-ID: <97AC03B4-1BA6-11D8-99AD-000A95891192@cs.usfca.edu>


On Thursday, November 20, 2003, at 12:06 PM, Ruslan Zasukhin wrote:

> Hi Terr,
>
> I wonder, here just thrown points, no links, yes?
>
> 1) will ANTLR 3.0 support Unicode?
> If yes, then it should be added here

It will have better support. :)  What is the part you like least about 
what ANTLR does currently in terms of UNICODE?

> 2) what is planned for license changes ?

BSD license.

Thanks,
Ter

>
>
> -- 
> Best regards,
> Ruslan Zasukhin               [ I feel the need...the need for speed ]
> ----------------------------------------------------------------------
> Paradigma Software                        http://www.paradigmasoft.com
>
> Valentina is cross-platform, fantastic fast database engine, supports
> C/C++,Java,JDBC,SQL,Director,REALbasic,PHP,XCMD,COM,Visual BASIC......
> ----------------------------------------------------------------------
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sunshine at public.kherson.ua  Thu Nov 20 15:11:26 2003
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest]
	http://www.antlr.org/blog/antlr3/whitepaper.tml
In-Reply-To: <97AC03B4-1BA6-11D8-99AD-000A95891192@cs.usfca.edu>
Message-ID: <BBE316BE.296F6%sunshine@public.kherson.ua>

on 11/21/03 12:12 AM, Terence Parr at parrt@cs.usfca.edu wrote:

>> Hi Terr,
>> 
>> I wonder, here just thrown points, no links, yes?
>> 
>> 1) will ANTLR 3.0 support Unicode?
>> If yes, then it should be added here
> 
> It will have better support. :)  What is the part you like least about
> what ANTLR does currently in terms of UNICODE?

I use C++, and Rick have told that current C++ runtime do not support
Unicode well.

I get from user UTF16 string, and need parse it.

Inside of our Valentina database engine we also use IBM ICU Unicode library


>> 2) what is planned for license changes ?
> 
> BSD license.

I am sorry, can you explain what this means?

We can't use it commercial projects?
Or only in open source projects?

It is better to here your explanation by normal words :-)

-- 
Best regards,
Ruslan Zasukhin               [ I feel the need...the need for speed ]
----------------------------------------------------------------------
Paradigma Software                        http://www.paradigmasoft.com

Valentina is cross-platform, fantastic fast database engine, supports
C/C++,Java,JDBC,SQL,Director,REALbasic,PHP,XCMD,COM,Visual BASIC......
----------------------------------------------------------------------



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Thu Nov 20 15:33:57 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Re: http://www.antlr.org/blog/antlr3/whitepaper.tml
In-Reply-To: <BBE316BE.296F6%sunshine@public.kherson.ua>
Message-ID: <bpjj15+uo0j@eGroups.com>

--- In antlr-interest@yahoogroups.com, Ruslan Zasukhin <sunshine@p...> wrote:
> on 11/21/03 12:12 AM, Terence Parr at parrt@c... wrote:
> 
> >> Hi Terr,
> >> 
> >> I wonder, here just thrown points, no links, yes?
> >> 
> >> 1) will ANTLR 3.0 support Unicode?
> >> If yes, then it should be added here
> > 
> > It will have better support. :)  What is the part you like least about
> > what ANTLR does currently in terms of UNICODE?
> 
> I use C++, and Rick have told that current C++ runtime do not support
> Unicode well.
> 
> I get from user UTF16 string, and need parse it.
> 
> Inside of our Valentina database engine we also use IBM ICU Unicode library

One of the goals of ANTLR 3 is to be easily retargeted.  That means replacing the XXXCodeGenerator.java files with something much 
smaller and more easily modified.  The current CppCodeGenerator.java is over 4000 LOC; Ric does an amazing job just to keep it 
working.  Community C++ support for Unicode is much better than it was when ANTLR 2.0 was released; I expect that the 3.0 
Unicode support in C++ will be comparable to the Java support just because of that.

> 
> >> 2) what is planned for license changes ?
> > 
> > BSD license.
> 
> I am sorry, can you explain what this means?

See <http://www.opensource.org/licenses/bsd-license.php>

> We can't use it commercial projects?
> Or only in open source projects?

Commercial or open source--restrictions are minimal, and mostly to give credit.  Ter's allergic to licenses that prohibit commercial 
use.

--Loring

> It is better to here your explanation by normal words :-)
> 
> -- 
> Best regards,
> Ruslan Zasukhin               [ I feel the need...the need for speed ]
> ----------------------------------------------------------------------
> Paradigma Software                        http://www.paradigmasoft.com
> 
> Valentina is cross-platform, fantastic fast database engine, supports
> C/C++,Java,JDBC,SQL,Director,REALbasic,PHP,XCMD,COM,Visual BASIC......
> ----------------------------------------------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From escher-solutions at shaw.ca  Thu Nov 20 21:29:57 2003
From: escher-solutions at shaw.ca (Stuart Harker)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Re: C Grammar Build
In-Reply-To: <001b01c3af5f$082f5720$01cf090a@oddi.is>
Message-ID: <bpk7sl+avca@eGroups.com>

Thanks Arnar,

The fix seems to work. Since the changes are in the *.g files, 
wouldn't others have this problem with their builds also? Comments?

I noticed that the C grammar files are dated 1997.  Is this grammar 
still compatible with antlr 2.7.2 ?

Stu Harker




--- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
<arnarb@o...> wrote:
> Hello Stu,
> 
> I don't know if the Java-specs have changed, but importing a class
> that's already in the same package as the importing file is not
> neccessary. The import statement thus only makes sense if it's 
argument
> contains a dot, ".".
> 
> Maybe this was legal in older java-compilers, but you should be 
able
> just to comment out this line, the class CToken is in the same 
directory
> as TNode so it should be visible without any import.
> 
> Arnar
> 
> > -----Original Message-----
> > From: escher_solutions2003 [mailto:escher-solutions@s...] 
> > Sent: 20. n?vember 2003 07:18
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] C Grammar Build - Warning Java Newbie
> > 
> > 
> > Hi All,
> > 
> > I am new to antlr after working with bison/flex. I have limmited 
> > exposure to Java but have an OOP/C++ bankground.
> > 
> > I am trying to build the Gnu C grammars and I am getting the 
> > following compile error during the build.
> > 
> > > javac -classpath .;c:\antlr-2.7.2\antlr.jar TNode.java
> > TNode.java:9: '.' expected
> > import CToken;
> >              ^
> > 1 error
> > 
> > Why is the "import CToken;" statement causing an error? Note my 
> > classpath commandline settings contains the current directory.
> > 
> > Any suggestions?
> > 
> > Thanks
> > 
> > Stu Harker
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> >


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tmoog at polhode.com  Thu Nov 20 22:06:14 2003
From: tmoog at polhode.com (Tom Moog)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] antlr 3 unicode support
In-Reply-To: <BBE2EB5E.296A8%sunshine@public.kherson.ua>
References: <BBE2EB5E.296A8%sunshine@public.kherson.ua>
Message-ID: <Pine.NEB.4.58.0311210100110.17334@panix5.panix.com>



Just to remind you java guys thinking about lexing unicode:
unicode doesn't stop at 2**16.  It extends up to 0x10ffff if you
want to include music symbols, Babylonian, math style letters,
and so on.  For java xml parsers this means using the low order
ten bits from two adjacent 16 bit words (surrogate pairs) to
reach things above 2**16.

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From m_schellens at hotmail.com  Thu Nov 20 22:22:02 2003
From: m_schellens at hotmail.com (marcschellens)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Re: Multiple lexers (c++ code gen.)
In-Reply-To: <003501c3af79$c0363ef0$01cf090a@oddi.is>
Message-ID: <bpkaua+qelo@eGroups.com>

Thanks Arnar,

but looking at the TokenStreamSelector Code,
it works the same way like I did.
Ie. if you define the lexers by labels, the push method
does the same as a direct push of the Lexer*.
I found out now, that the trick here was to kick the
selector via retry().
Thanks anyway,
marc

--- In antlr-interest@yahoogroups.com, "Arnar Birgisson" <arnarb@o...>
wrote:
> You have to associate each lexer in the selector with a identifying
> string, and then use that string as an argument to selctor->push.
> 
> Here's how I do it:
> 
>  istream& input = cin;
> 
>  TokenStreamSelector selector;
> 
>  LexerA aLexer(input);
>  aLexer.initialize(&selector);
> 
>  LexerB bLexer(forritLexer.getInputState());
>  bLexer.initialize(&selector);
> 
>  selector.addInputStream(&aLexer, "LexerA");
>  selector.addInputStream(&bLexer, "LexerB");
>  selector.select("LexerA");
> 
>  ASTFactory my_factory;
>  MyParser parser(selector);
> 
>  parser.initializeASTFactory(my_factory);
>  parser.setASTFactory(&my_factory);
> 
>  parser.start();
> 
> and then use it like this in LexerA:
> 
>  UNIT_LBRACE
>    : '{' { selector->push("eininglexer"); }
>    ;
> 
> Hope this helps.
> 
> Arnar
> 
> > -----Original Message-----
> > From: marcschellens [mailto:m_schellens@h...] 
> > Sent: 20. n?vember 2003 15:08
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Multiple lexers (c++ code gen.)
> > 
> > 
> > Somehow the switch between two lexers seems not to work:
> > 
> > setup is like this:
> > 
> >     TokenStreamSelector selector;
> >     
> >     FMTLexer   lexer( istr);
> >     lexer.SetSelector( selector);
> >     
> >     CFMTLexer  cLexer( lexer.getInputState());
> >     cLexer.SetSelector( selector);
> > 
> >     lexer.SetCLexer( cLexer);
> > 
> >     selector.select( &lexer);
> > 
> >     FMTParser  parser( selector);
> > 
> >     parser.initializeASTFactory( FMTNodeFactory);
> >     parser.setASTFactory( &FMTNodeFactory );
> >    
> >     parser.format( 1);
> > 
> > And usage:
> > 
> > in FMTLexer (switch to CFMTLexer):
> > 
> > CSTRING!
> > 	: 'c' '\"' { cLexer->DoubleQuotes( true); 
> > selector->push(cLexer);}
> >     | 'c' '\'' { cLexer->DoubleQuotes( false); 
> > selector->push( cLexer);}
> > 	;	
> > 
> > cLexer is CFMTLexer* (private member in lexer).
> > 
> > Do I make an obvious mistake?
> > thanks,
> > marc
> > 
> > in CFMTLexer (switch back)
> > 
> > protected
> > ENDSTR1
> >     : ('\"') => '\"' 
> >     | { selector->pop();}
> >     ;
> > 
> > 
> > 
> > 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> >


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tom at psy.unsw.edu.au  Thu Nov 20 22:50:45 2003
From: tom at psy.unsw.edu.au (Thomas Brandon)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Re: a new paper on ANTLR style grammars
In-Reply-To: <bphr57+j3ld@eGroups.com>
Message-ID: <bpkck5+6iei@eGroups.com>

Oliver,
I don't think doing all actions and then rolling back is going to be 
enough. Remember that by itself the example you present is no 
problem for LR, just use:
ab: A A A A (B { Action1(); } | C { Action2(); });
of course I assume you intended something like:
a: A A { bSomething == true; } A { if(bSomething) ...; } A B;
b: A A { bSomething == false; } A { if(bSomething) ...; } A C;
i.e. we must decide before we see the B|C, as actions are not edge-
aligned. (Though presumably we are doing more than simply setting 
flags).

But in this case how are transactions going to work? We execute both 
bSomething = true and bSomething = false? No, I think we're going to 
need to branch the entire state, in one we do bSomething = true; in 
the other bSomething = false;. Now were either gonna need to do two 
complete parses of the rest of the input or parse once but for every 
subsequent action execute it against all valid states. Of course 
once the path we take branches then were going to need to branch our 
states for each path too.

If instead our grammar was:
a: A A { bSomething == true; } A { if(bSomething) ...; else if 
bSomethingElse) ...;} A B;
b: A A { bSomethingElse == true; } A { if(bSomething) ...; else if
(bSomethingElse) ...;} A C;
where there is no overlap between the two actions, then we wouldn't 
need to. But I don't think the semantic analysis necessary to 
distinguish those cases is trivial (given ithings like the 
possibility that bSomething == bSomethingElse). Similarly 
transforming to the benign form may be possible but would require 
such analysis. And even if you do manage the analysis it means you 
need to redo the entire analysis when anything changes. i.e. if my 
action is myClass.MyAction() then we need to redo the entire 
analysis if myClass.MyAction changes, hence no inheritance without 
possibly breaking things.

And what about when actions overlap, i.e. we have a choice between 
an action { a = 3; b++; } and { a = 4; b++; c++; }, we can't just 
store the inital state and later restore it because if we restore 
that we undo both actions. Somehow we need to figure out for our 
actions A and B, A union B (those changes common to both) and A - B 
and B - A, those changes peculiar to B and those peculiar to A. 
Then, if we want A to go through we only rollback B - A (those 
changes peculiar to B). Again requiring (probably quite 
sophisticated) static analysis.

Tom.
--- In antlr-interest@yahoogroups.com, "Oliver Zeigermann" 
<oliver@z...> wrote:
> What I wanted to say was: If you have sematic actions associated to
> your grammar that can be inserted (and of course executed) at any
> point and you have a table driven approach you are in trouble. 
This is
> because what I understand as the precomputation of a search tree 
into
> a table combining certain *search* states. Extrapolating from what 
I
> know about LR you have a problem when youe have a grammar like 
this:
> 
> a : A A { do something here } A A B ;
> b : A A { do something different here } A A C ;
> 
> upon input
> 
> AAAAC
> 
> This is because the parser has no idea which action to execute 
here.
> Now, my idea was to execute both and roll back the action of rule 
a as
> soon as it is clear that rule b actually matches.
> 
> A bit clearer now?
> 
> Oliver
> 
> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
wrote:
> > 
> > On Wednesday, November 19, 2003, at 03:12 PM, Oliver Zeigermann 
wrote:
> > 
> > > Actually made it through the paper while getting nervous with 
the
> > > proofs ;)
> > >
> > > While he has linear time "backtracking" performance, ANTLR is 
worst
> > > case exponential. I was wondering why: ANTLR does not combine 
its
> > > depth first search (aka backtracking in this context) into a 
table
> > > while Bryan's approach does (at least I understand it this 
way). The
> > > problem Bryan will come across (given my understanding is 
halfway
> > > correct) is ACTIONS. As with LR and combined states, the 
problem is
> > > when to execute associated semantic actions. The drawback is 
well
> > > known and and leads to reduction in parsing power.
> > >
> > > Might sound weird, but I thought if we still combined states 
even
> > > though they are associated with different actions and simple 
execute
> > > all actions, there would be no loss of power :) Silly? Not if 
you have
> > > a transactional language that allows you to roll back actions 
that
> > > turn out to be invalid later and roll forward the valid ones.
> > >
> > > Technically this is possible. Does it make sense as well? Am I 
slowly
> > > going crazy? ;)
> > 
> > You are already crazy like me ;) <snicker, snort>.  Just got 
mail from 
> > him. :)  Hope it's ok to repeat part here:
> > 
> > > - Packrat parsing guarantees linear-time parsing on all the 
types of 
> > > grammars
> > > it supports, which amounts to everything that fits the 
formalism or
> > > "conceptual model" of parsing expression grammars.  But 
the "pure"
> PEG 
> > > model
> > > doesn't directly support "stateful" grammars like those of C 
and C++, 
> > > in
> > > which you have to build up symbol tables and such that 
effectively 
> > > modify the
> > > grammar mid-stream as the parser scans the input from left to 
right.  
> > > From
> > > what I've seen so far, it appears fundamentally difficult or 
> > > impossible to
> > > make a packrat parser support stateful grammars efficiently 
without
> > > effectively turning it into a deterministic (e.g., LR) parser.
> > 
> > So, the actions are the problem for everyone :)
> > 
> > Ter
> > --
> > Professor Comp. Sci., University of San Francisco
> > Creator, ANTLR Parser Generator, http://www.antlr.org
> > Co-founder, http://www.jguru.com
> > Co-founder, http://www.knowspam.net enjoy email again!
> > Co-founder, http://www.peerscope.com pure link sharing


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Fri Nov 21 00:46:25 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Re: a new paper on ANTLR style grammars
In-Reply-To: <bpkck5+6iei@eGroups.com>
Message-ID: <002101c3b00b$f2c80730$00cf090a@oddi.is>

Hi there,

Mabey this is obvious, but if the parser-generator could identify such
cases, i.e. 

a: A A { bSomething == true; } A { if(bSomething) ...; } A B;
b: A A { bSomething == false; } A { if(bSomething) ...; } A C;

and it can hadle syntactic predicates, it would automatically change
this to

a: (A A A A B)=> A A { bSomething == true; } A { if(bSomething) ..; } A
B;
b: (A A A A C)=> A A { bSomething == false; } A { if(bSomething) ..; }
A C;

do the job? It would obviously hurt performance though, but such cases
should be rare.

Arnar

> -----Original Message-----
> From: Thomas Brandon [mailto:tom@psy.unsw.edu.au] 
> Sent: 21. n?vember 2003 06:51
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: a new paper on ANTLR style grammars
> 
> 
> Oliver,
> I don't think doing all actions and then rolling back is going to be 
> enough. Remember that by itself the example you present is no 
> problem for LR, just use:
> ab: A A A A (B { Action1(); } | C { Action2(); });
> of course I assume you intended something like:
> a: A A { bSomething == true; } A { if(bSomething) ...; } A B;
> b: A A { bSomething == false; } A { if(bSomething) ...; } A C;
> i.e. we must decide before we see the B|C, as actions are not edge-
> aligned. (Though presumably we are doing more than simply setting 
> flags).
> 
> But in this case how are transactions going to work? We execute both 
> bSomething = true and bSomething = false? No, I think we're going to 
> need to branch the entire state, in one we do bSomething = true; in 
> the other bSomething = false;. Now were either gonna need to do two 
> complete parses of the rest of the input or parse once but for every 
> subsequent action execute it against all valid states. Of course 
> once the path we take branches then were going to need to branch our 
> states for each path too.
> 
> If instead our grammar was:
> a: A A { bSomething == true; } A { if(bSomething) ...; else if 
> bSomethingElse) ...;} A B;
> b: A A { bSomethingElse == true; } A { if(bSomething) ...; else if
> (bSomethingElse) ...;} A C;
> where there is no overlap between the two actions, then we wouldn't 
> need to. But I don't think the semantic analysis necessary to 
> distinguish those cases is trivial (given ithings like the 
> possibility that bSomething == bSomethingElse). Similarly 
> transforming to the benign form may be possible but would require 
> such analysis. And even if you do manage the analysis it means you 
> need to redo the entire analysis when anything changes. i.e. if my 
> action is myClass.MyAction() then we need to redo the entire 
> analysis if myClass.MyAction changes, hence no inheritance without 
> possibly breaking things.
> 
> And what about when actions overlap, i.e. we have a choice between 
> an action { a = 3; b++; } and { a = 4; b++; c++; }, we can't just 
> store the inital state and later restore it because if we restore 
> that we undo both actions. Somehow we need to figure out for our 
> actions A and B, A union B (those changes common to both) and A - B 
> and B - A, those changes peculiar to B and those peculiar to A. 
> Then, if we want A to go through we only rollback B - A (those 
> changes peculiar to B). Again requiring (probably quite 
> sophisticated) static analysis.
> 
> Tom.
> --- In antlr-interest@yahoogroups.com, "Oliver Zeigermann" 
> <oliver@z...> wrote:
> > What I wanted to say was: If you have sematic actions associated to
> > your grammar that can be inserted (and of course executed) at any
> > point and you have a table driven approach you are in trouble. 
> This is
> > because what I understand as the precomputation of a search tree 
> into
> > a table combining certain *search* states. Extrapolating from what 
> I
> > know about LR you have a problem when youe have a grammar like 
> this:
> > 
> > a : A A { do something here } A A B ;
> > b : A A { do something different here } A A C ;
> > 
> > upon input
> > 
> > AAAAC
> > 
> > This is because the parser has no idea which action to execute 
> here.
> > Now, my idea was to execute both and roll back the action of rule 
> a as
> > soon as it is clear that rule b actually matches.
> > 
> > A bit clearer now?
> > 
> > Oliver
> > 
> > --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
> wrote:
> > > 
> > > On Wednesday, November 19, 2003, at 03:12 PM, Oliver Zeigermann 
> wrote:
> > > 
> > > > Actually made it through the paper while getting nervous with 
> the
> > > > proofs ;)
> > > >
> > > > While he has linear time "backtracking" performance, ANTLR is 
> worst
> > > > case exponential. I was wondering why: ANTLR does not combine 
> its
> > > > depth first search (aka backtracking in this context) into a 
> table
> > > > while Bryan's approach does (at least I understand it this 
> way). The
> > > > problem Bryan will come across (given my understanding is 
> halfway
> > > > correct) is ACTIONS. As with LR and combined states, the 
> problem is
> > > > when to execute associated semantic actions. The drawback is 
> well
> > > > known and and leads to reduction in parsing power.
> > > >
> > > > Might sound weird, but I thought if we still combined states 
> even
> > > > though they are associated with different actions and simple 
> execute
> > > > all actions, there would be no loss of power :) Silly? Not if 
> you have
> > > > a transactional language that allows you to roll back actions 
> that
> > > > turn out to be invalid later and roll forward the valid ones.
> > > >
> > > > Technically this is possible. Does it make sense as well? Am I 
> slowly
> > > > going crazy? ;)
> > > 
> > > You are already crazy like me ;) <snicker, snort>.  Just got 
> mail from 
> > > him. :)  Hope it's ok to repeat part here:
> > > 
> > > > - Packrat parsing guarantees linear-time parsing on all the 
> types of 
> > > > grammars
> > > > it supports, which amounts to everything that fits the 
> formalism or
> > > > "conceptual model" of parsing expression grammars.  But 
> the "pure"
> > PEG 
> > > > model
> > > > doesn't directly support "stateful" grammars like those of C 
> and C++, 
> > > > in
> > > > which you have to build up symbol tables and such that 
> effectively 
> > > > modify the
> > > > grammar mid-stream as the parser scans the input from left to 
> right.  
> > > > From
> > > > what I've seen so far, it appears fundamentally difficult or 
> > > > impossible to
> > > > make a packrat parser support stateful grammars efficiently 
> without
> > > > effectively turning it into a deterministic (e.g., LR) parser.
> > > 
> > > So, the actions are the problem for everyone :)
> > > 
> > > Ter
> > > --
> > > Professor Comp. Sci., University of San Francisco
> > > Creator, ANTLR Parser Generator, http://www.antlr.org
> > > Co-founder, http://www.jguru.com
> > > Co-founder, http://www.knowspam.net enjoy email again!
> > > Co-founder, http://www.peerscope.com pure link sharing
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tom at psy.unsw.edu.au  Fri Nov 21 01:01:53 2003
From: tom at psy.unsw.edu.au (Thomas Brandon)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] Re: a new paper on ANTLR style grammars
In-Reply-To: <002101c3b00b$f2c80730$00cf090a@oddi.is>
Message-ID: <bpkka1+3gv9@eGroups.com>

Yeah, that's the Antlr solution. And I think that some of Ter's new 
stuff is looking at doing stuff kinda like that automatically. It 
just figures out the k it will need (or that it can't find a k that 
will work) so you don't explicitly need to tell it through a 
syntactic predicate.

If I understand it correctly, the real problem with actions is in LR 
parsers where matching is down on the right-edge of rules, and they 
don't support such predicates as they are table-based. They wait 
until the right edge of a rule to match, so it's a bit like the 
parser is in guessing mode for the entire rule, thus any actions are 
ignored. And, unlike Antlr, they don't allow you to figure out 
through predicated guessing whether the rule should run and then run 
it properly with actions.

Tom.
--- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
<arnarb@o...> wrote:
> Hi there,
> 
> Mabey this is obvious, but if the parser-generator could identify 
such
> cases, i.e. 
> 
> a: A A { bSomething == true; } A { if(bSomething) ...; } A B;
> b: A A { bSomething == false; } A { if(bSomething) ...; } A C;
> 
> and it can hadle syntactic predicates, it would automatically 
change
> this to
> 
> a: (A A A A B)=> A A { bSomething == true; } A { if
(bSomething) ..; } A
> B;
> b: (A A A A C)=> A A { bSomething == false; } A { if
(bSomething) ..; }
> A C;
> 
> do the job? It would obviously hurt performance though, but such 
cases
> should be rare.
> 
> Arnar
> 
> > -----Original Message-----
> > From: Thomas Brandon [mailto:tom@p...] 
> > Sent: 21. n?vember 2003 06:51
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Re: a new paper on ANTLR style grammars
> > 
> > 
> > Oliver,
> > I don't think doing all actions and then rolling back is going 
to be 
> > enough. Remember that by itself the example you present is no 
> > problem for LR, just use:
> > ab: A A A A (B { Action1(); } | C { Action2(); });
> > of course I assume you intended something like:
> > a: A A { bSomething == true; } A { if(bSomething) ...; } A B;
> > b: A A { bSomething == false; } A { if(bSomething) ...; } A C;
> > i.e. we must decide before we see the B|C, as actions are not 
edge-
> > aligned. (Though presumably we are doing more than simply 
setting 
> > flags).
> > 
> > But in this case how are transactions going to work? We execute 
both 
> > bSomething = true and bSomething = false? No, I think we're 
going to 
> > need to branch the entire state, in one we do bSomething = true; 
in 
> > the other bSomething = false;. Now were either gonna need to do 
two 
> > complete parses of the rest of the input or parse once but for 
every 
> > subsequent action execute it against all valid states. Of course 
> > once the path we take branches then were going to need to branch 
our 
> > states for each path too.
> > 
> > If instead our grammar was:
> > a: A A { bSomething == true; } A { if(bSomething) ...; else if 
> > bSomethingElse) ...;} A B;
> > b: A A { bSomethingElse == true; } A { if(bSomething) ...; else 
if
> > (bSomethingElse) ...;} A C;
> > where there is no overlap between the two actions, then we 
wouldn't 
> > need to. But I don't think the semantic analysis necessary to 
> > distinguish those cases is trivial (given ithings like the 
> > possibility that bSomething == bSomethingElse). Similarly 
> > transforming to the benign form may be possible but would 
require 
> > such analysis. And even if you do manage the analysis it means 
you 
> > need to redo the entire analysis when anything changes. i.e. if 
my 
> > action is myClass.MyAction() then we need to redo the entire 
> > analysis if myClass.MyAction changes, hence no inheritance 
without 
> > possibly breaking things.
> > 
> > And what about when actions overlap, i.e. we have a choice 
between 
> > an action { a = 3; b++; } and { a = 4; b++; c++; }, we can't 
just 
> > store the inital state and later restore it because if we 
restore 
> > that we undo both actions. Somehow we need to figure out for our 
> > actions A and B, A union B (those changes common to both) and A -
 B 
> > and B - A, those changes peculiar to B and those peculiar to A. 
> > Then, if we want A to go through we only rollback B - A (those 
> > changes peculiar to B). Again requiring (probably quite 
> > sophisticated) static analysis.
> > 
> > Tom.
> > --- In antlr-interest@yahoogroups.com, "Oliver Zeigermann" 
> > <oliver@z...> wrote:
> > > What I wanted to say was: If you have sematic actions 
associated to
> > > your grammar that can be inserted (and of course executed) at 
any
> > > point and you have a table driven approach you are in trouble. 
> > This is
> > > because what I understand as the precomputation of a search 
tree 
> > into
> > > a table combining certain *search* states. Extrapolating from 
what 
> > I
> > > know about LR you have a problem when youe have a grammar like 
> > this:
> > > 
> > > a : A A { do something here } A A B ;
> > > b : A A { do something different here } A A C ;
> > > 
> > > upon input
> > > 
> > > AAAAC
> > > 
> > > This is because the parser has no idea which action to execute 
> > here.
> > > Now, my idea was to execute both and roll back the action of 
rule 
> > a as
> > > soon as it is clear that rule b actually matches.
> > > 
> > > A bit clearer now?
> > > 
> > > Oliver
> > > 
> > > --- In antlr-interest@yahoogroups.com, Terence Parr 
<parrt@c...> 
> > wrote:
> > > > 
> > > > On Wednesday, November 19, 2003, at 03:12 PM, Oliver 
Zeigermann 
> > wrote:
> > > > 
> > > > > Actually made it through the paper while getting nervous 
with 
> > the
> > > > > proofs ;)
> > > > >
> > > > > While he has linear time "backtracking" performance, ANTLR 
is 
> > worst
> > > > > case exponential. I was wondering why: ANTLR does not 
combine 
> > its
> > > > > depth first search (aka backtracking in this context) into 
a 
> > table
> > > > > while Bryan's approach does (at least I understand it this 
> > way). The
> > > > > problem Bryan will come across (given my understanding is 
> > halfway
> > > > > correct) is ACTIONS. As with LR and combined states, the 
> > problem is
> > > > > when to execute associated semantic actions. The drawback 
is 
> > well
> > > > > known and and leads to reduction in parsing power.
> > > > >
> > > > > Might sound weird, but I thought if we still combined 
states 
> > even
> > > > > though they are associated with different actions and 
simple 
> > execute
> > > > > all actions, there would be no loss of power :) Silly? Not 
if 
> > you have
> > > > > a transactional language that allows you to roll back 
actions 
> > that
> > > > > turn out to be invalid later and roll forward the valid 
ones.
> > > > >
> > > > > Technically this is possible. Does it make sense as well? 
Am I 
> > slowly
> > > > > going crazy? ;)
> > > > 
> > > > You are already crazy like me ;) <snicker, snort>.  Just got 
> > mail from 
> > > > him. :)  Hope it's ok to repeat part here:
> > > > 
> > > > > - Packrat parsing guarantees linear-time parsing on all 
the 
> > types of 
> > > > > grammars
> > > > > it supports, which amounts to everything that fits the 
> > formalism or
> > > > > "conceptual model" of parsing expression grammars.  But 
> > the "pure"
> > > PEG 
> > > > > model
> > > > > doesn't directly support "stateful" grammars like those of 
C 
> > and C++, 
> > > > > in
> > > > > which you have to build up symbol tables and such that 
> > effectively 
> > > > > modify the
> > > > > grammar mid-stream as the parser scans the input from left 
to 
> > right.  
> > > > > From
> > > > > what I've seen so far, it appears fundamentally difficult 
or 
> > > > > impossible to
> > > > > make a packrat parser support stateful grammars 
efficiently 
> > without
> > > > > effectively turning it into a deterministic (e.g., LR) 
parser.
> > > > 
> > > > So, the actions are the problem for everyone :)
> > > > 
> > > > Ter
> > > > --
> > > > Professor Comp. Sci., University of San Francisco
> > > > Creator, ANTLR Parser Generator, http://www.antlr.org
> > > > Co-founder, http://www.jguru.com
> > > > Co-founder, http://www.knowspam.net enjoy email again!
> > > > Co-founder, http://www.peerscope.com pure link sharing
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> >


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jean-louis.boulanger at hds.utc.fr  Fri Nov 21 01:18:41 2003
From: jean-louis.boulanger at hds.utc.fr (Boulanger Jean-Louis)
Date: Mon Dec 20 16:16:08 2004
Subject: [antlr-interest] #( root children ) syntax change proposal?
Message-ID: <1069406321.3fbdd8714bb98@mail.hds.utc.fr>



Hello

# is actually used if you change I change all my development.

I think it's preferable to preserve the past and perhaps offer two solutions
 # and ^ for compatibilities.


Selon Arnar Birgisson <arnarb@oddi.is>:

> I agree, ^ is (to me) more appropriate as "root" than #.
>
> vote +1
>
> Arnar
>
> > -----Original Message-----
> > From: Terence Parr [mailto:parrt@cs.usfca.edu]
> > Sent: 18. n?vember 2003 19:21
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] #( root children ) syntax change proposal?
> >
> >
> > Howdy folks,
> >
> > The #(...) notation derives from wanting to use parens like LISP but
> > not wanting the ambiguity with (... | ...) alternative
> > subrules. The #
> > was the only character left in ASCII for me to use ;)  I have always
> > not liked it, but now it's ingrained.  That said, I've been
> > thinking of
> > changing it for ANTLR 3 into
> >
> > ^(root c1 ... cn)
> >
> > in tree parsers and tree construction actions.  There MAY be some
> > ambiguity with the ^ suffix operator, but I think we might
> > wanna try it
> > out.
> >
> > Anybody have any thoughts?  I like it as it's more intuitive
> > that that
> > is a tree ;)  # is random.
> >
> > Ter
> > --
> > Professor Comp. Sci., University of San Francisco
> > Creator, ANTLR Parser Generator, http://www.antlr.org
> > Co-founder, http://www.jguru.com
> > Co-founder, http://www.knowspam.net enjoy email again!
> > Co-founder, http://www.peerscope.com pure link sharing
> >
> >
> >
> >
> >  
> >
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/
> >
> >
>
>
>  
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>




-------------------------------------------------
Laboratoire Heudiasyc. UMR CNRS 6599
http://www.hds.utc.fr

-------------------------------------------------
Laboratoire Heudiasyc. UMR CNRS 6599
http://www.hds.utc.fr

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Fri Nov 21 01:35:50 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] Re: a new paper on ANTLR style grammars
In-Reply-To: <bpkka1+3gv9@eGroups.com>
Message-ID: <002a01c3b012$d9b3e050$00cf090a@oddi.is>

Again, I'm just a beginner in all this, but I'm interested and want to
learn. Please ignore me if you don't have the time or interest.

Since actions in LR parsers can only appear at the end of a rule (i.e.
at the reduce point), this

a: A A { bSomething == true; } A { if(bSomething) ...; } A B;
b: A A { bSomething == false; } A { if(bSomething) ...; } A C;

would be rewritten to this

a:    A A a' A a'' A B;
a':   <epsilon> { bSomething = true; };
a'':  <epsilon> { if(bStomehting) ...; };
b:    A A b' A b'' A C;
b':   <epsilon> {bSomething = false; };
b'':  <epsilon> {if (bSomething) ...; };

Now, am I correct here:
Deferring actions would then mean that we would need to change the stack
in an un-stack-like manner, adding another operation to the set
{shift,reduce}

The stack would then progress like this:
operation    stack
shift        A
shift        A A
shift        A A A
shift        A A A A
shift        A A A A B
something    A A a' A A B   (effectively reducing <epsilon> -> a')
something    A A a' A a'' A B
reduce       a

Is there any other way? Wouldn't this simplistic method mess up the LR
state-machine?

Again, please ignore me if I'm off course. Consider me an annoying
student asking silly questions if you like :o)

Arnar

> -----Original Message-----
> From: Thomas Brandon [mailto:tom@psy.unsw.edu.au] 
> Sent: 21. n?vember 2003 09:02
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: a new paper on ANTLR style grammars
> 
> 
> Yeah, that's the Antlr solution. And I think that some of Ter's new 
> stuff is looking at doing stuff kinda like that automatically. It 
> just figures out the k it will need (or that it can't find a k that 
> will work) so you don't explicitly need to tell it through a 
> syntactic predicate.
> 
> If I understand it correctly, the real problem with actions is in LR 
> parsers where matching is down on the right-edge of rules, and they 
> don't support such predicates as they are table-based. They wait 
> until the right edge of a rule to match, so it's a bit like the 
> parser is in guessing mode for the entire rule, thus any actions are 
> ignored. And, unlike Antlr, they don't allow you to figure out 
> through predicated guessing whether the rule should run and then run 
> it properly with actions.
> 
> Tom.
> --- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
> <arnarb@o...> wrote:
> > Hi there,
> > 
> > Mabey this is obvious, but if the parser-generator could identify 
> such
> > cases, i.e. 
> > 
> > a: A A { bSomething == true; } A { if(bSomething) ...; } A B;
> > b: A A { bSomething == false; } A { if(bSomething) ...; } A C;
> > 
> > and it can hadle syntactic predicates, it would automatically 
> change
> > this to
> > 
> > a: (A A A A B)=> A A { bSomething == true; } A { if
> (bSomething) ..; } A
> > B;
> > b: (A A A A C)=> A A { bSomething == false; } A { if
> (bSomething) ..; }
> > A C;
> > 
> > do the job? It would obviously hurt performance though, but such 
> cases
> > should be rare.
> > 
> > Arnar
> > 
> > > -----Original Message-----
> > > From: Thomas Brandon [mailto:tom@p...] 
> > > Sent: 21. n?vember 2003 06:51
> > > To: antlr-interest@yahoogroups.com
> > > Subject: [antlr-interest] Re: a new paper on ANTLR style grammars
> > > 
> > > 
> > > Oliver,
> > > I don't think doing all actions and then rolling back is going 
> to be 
> > > enough. Remember that by itself the example you present is no 
> > > problem for LR, just use:
> > > ab: A A A A (B { Action1(); } | C { Action2(); });
> > > of course I assume you intended something like:
> > > a: A A { bSomething == true; } A { if(bSomething) ...; } A B;
> > > b: A A { bSomething == false; } A { if(bSomething) ...; } A C;
> > > i.e. we must decide before we see the B|C, as actions are not 
> edge-
> > > aligned. (Though presumably we are doing more than simply 
> setting 
> > > flags).
> > > 
> > > But in this case how are transactions going to work? We execute 
> both 
> > > bSomething = true and bSomething = false? No, I think we're 
> going to 
> > > need to branch the entire state, in one we do bSomething = true; 
> in 
> > > the other bSomething = false;. Now were either gonna need to do 
> two 
> > > complete parses of the rest of the input or parse once but for 
> every 
> > > subsequent action execute it against all valid states. Of course 
> > > once the path we take branches then were going to need to branch 
> our 
> > > states for each path too.
> > > 
> > > If instead our grammar was:
> > > a: A A { bSomething == true; } A { if(bSomething) ...; else if 
> > > bSomethingElse) ...;} A B;
> > > b: A A { bSomethingElse == true; } A { if(bSomething) ...; else 
> if
> > > (bSomethingElse) ...;} A C;
> > > where there is no overlap between the two actions, then we 
> wouldn't 
> > > need to. But I don't think the semantic analysis necessary to 
> > > distinguish those cases is trivial (given ithings like the 
> > > possibility that bSomething == bSomethingElse). Similarly 
> > > transforming to the benign form may be possible but would 
> require 
> > > such analysis. And even if you do manage the analysis it means 
> you 
> > > need to redo the entire analysis when anything changes. i.e. if 
> my 
> > > action is myClass.MyAction() then we need to redo the entire 
> > > analysis if myClass.MyAction changes, hence no inheritance 
> without 
> > > possibly breaking things.
> > > 
> > > And what about when actions overlap, i.e. we have a choice 
> between 
> > > an action { a = 3; b++; } and { a = 4; b++; c++; }, we can't 
> just 
> > > store the inital state and later restore it because if we 
> restore 
> > > that we undo both actions. Somehow we need to figure out for our 
> > > actions A and B, A union B (those changes common to both) and A -
>  B 
> > > and B - A, those changes peculiar to B and those peculiar to A. 
> > > Then, if we want A to go through we only rollback B - A (those 
> > > changes peculiar to B). Again requiring (probably quite 
> > > sophisticated) static analysis.
> > > 
> > > Tom.
> > > --- In antlr-interest@yahoogroups.com, "Oliver Zeigermann" 
> > > <oliver@z...> wrote:
> > > > What I wanted to say was: If you have sematic actions 
> associated to
> > > > your grammar that can be inserted (and of course executed) at 
> any
> > > > point and you have a table driven approach you are in trouble. 
> > > This is
> > > > because what I understand as the precomputation of a search 
> tree 
> > > into
> > > > a table combining certain *search* states. Extrapolating from 
> what 
> > > I
> > > > know about LR you have a problem when youe have a grammar like 
> > > this:
> > > > 
> > > > a : A A { do something here } A A B ;
> > > > b : A A { do something different here } A A C ;
> > > > 
> > > > upon input
> > > > 
> > > > AAAAC
> > > > 
> > > > This is because the parser has no idea which action to execute 
> > > here.
> > > > Now, my idea was to execute both and roll back the action of 
> rule 
> > > a as
> > > > soon as it is clear that rule b actually matches.
> > > > 
> > > > A bit clearer now?
> > > > 
> > > > Oliver
> > > > 
> > > > --- In antlr-interest@yahoogroups.com, Terence Parr 
> <parrt@c...> 
> > > wrote:
> > > > > 
> > > > > On Wednesday, November 19, 2003, at 03:12 PM, Oliver 
> Zeigermann 
> > > wrote:
> > > > > 
> > > > > > Actually made it through the paper while getting nervous 
> with 
> > > the
> > > > > > proofs ;)
> > > > > >
> > > > > > While he has linear time "backtracking" performance, ANTLR 
> is 
> > > worst
> > > > > > case exponential. I was wondering why: ANTLR does not 
> combine 
> > > its
> > > > > > depth first search (aka backtracking in this context) into 
> a 
> > > table
> > > > > > while Bryan's approach does (at least I understand it this 
> > > way). The
> > > > > > problem Bryan will come across (given my understanding is 
> > > halfway
> > > > > > correct) is ACTIONS. As with LR and combined states, the 
> > > problem is
> > > > > > when to execute associated semantic actions. The drawback 
> is 
> > > well
> > > > > > known and and leads to reduction in parsing power.
> > > > > >
> > > > > > Might sound weird, but I thought if we still combined 
> states 
> > > even
> > > > > > though they are associated with different actions and 
> simple 
> > > execute
> > > > > > all actions, there would be no loss of power :) Silly? Not 
> if 
> > > you have
> > > > > > a transactional language that allows you to roll back 
> actions 
> > > that
> > > > > > turn out to be invalid later and roll forward the valid 
> ones.
> > > > > >
> > > > > > Technically this is possible. Does it make sense as well? 
> Am I 
> > > slowly
> > > > > > going crazy? ;)
> > > > > 
> > > > > You are already crazy like me ;) <snicker, snort>.  Just got 
> > > mail from 
> > > > > him. :)  Hope it's ok to repeat part here:
> > > > > 
> > > > > > - Packrat parsing guarantees linear-time parsing on all 
> the 
> > > types of 
> > > > > > grammars
> > > > > > it supports, which amounts to everything that fits the 
> > > formalism or
> > > > > > "conceptual model" of parsing expression grammars.  But 
> > > the "pure"
> > > > PEG 
> > > > > > model
> > > > > > doesn't directly support "stateful" grammars like those of 
> C 
> > > and C++, 
> > > > > > in
> > > > > > which you have to build up symbol tables and such that 
> > > effectively 
> > > > > > modify the
> > > > > > grammar mid-stream as the parser scans the input from left 
> to 
> > > right.  
> > > > > > From
> > > > > > what I've seen so far, it appears fundamentally difficult 
> or 
> > > > > > impossible to
> > > > > > make a packrat parser support stateful grammars 
> efficiently 
> > > without
> > > > > > effectively turning it into a deterministic (e.g., LR) 
> parser.
> > > > > 
> > > > > So, the actions are the problem for everyone :)
> > > > > 
> > > > > Ter
> > > > > --
> > > > > Professor Comp. Sci., University of San Francisco
> > > > > Creator, ANTLR Parser Generator, http://www.antlr.org
> > > > > Co-founder, http://www.jguru.com
> > > > > Co-founder, http://www.knowspam.net enjoy email again!
> > > > > Co-founder, http://www.peerscope.com pure link sharing
> > > 
> > > 
> > >  
> > > 
> > > Your use of Yahoo! Groups is subject to 
> > > http://docs.yahoo.com/info/terms/ 
> > > 
> > >
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pete.forman at westerngeco.com  Fri Nov 21 01:30:18 2003
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] Re: a new paper on ANTLR style grammars
In-Reply-To: <bpj63h+gcfc@eGroups.com>
References: <bpiqfq+4u5v@eGroups.com>
Message-ID: <5.1.1.1.2.20031121092147.048352d0@wgmail2.gatwick.eur.slb.com>

At 2003-11-20 19:53 +0000, lgcraymer wrote:
>Sorry if I was unclear.  Actions need to execute during a parse only
>if they affect the parse--you need semantic predicates for that.
>What you can do is build a list of operations to be executed later.

How about putting an optional second clause into an action that
unwinds it?

That is less automated than the approaches proposed so far but would
be simpler to implement and for the user to understand.

-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From wiggjd at lsbu.ac.uk  Fri Nov 21 03:23:45 2003
From: wiggjd at lsbu.ac.uk (David Wigg)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] Re: program to translate c++ to pascal
Message-ID: <3FBDF5C1.1000106@lsbu.ac.uk>

Hello,

You should be able to use our C/C++ grammar file on the ANTLR 
website, either directly by enclosing your own conversion code 
in the grammar or indirectly by using the grammar file to create 
a suitable tree structure and converting from that.

It would be great if you could do the latter as the tree 
structure would then useful for other people.

Either method would be challenging, but at least you would have 
a C++ parser to start from by using CPP_parser.g with ANTLR.

I use MSVC 6.0 with either ANTLR-2.7.1 or ANTLR-2.7.2. However, 
the latter gave me a lot of hassle to install. I think you would 
have less trouble with ANTLR-2.7.1.

I recommend you get the version from Ric Klaren's website at 
http://wwwhome.cs.utwente.nl/~klaren/antlr .

I would be interested to hear how you get on.

Best of luck!

David Wigg
Research Fellow
London South Bank University

Message: 1
    Date: Tue, 18 Nov 2003 15:14:00 -0000
    From: "urag0n" <urag0n@yahoo.com>
Subject: program to translate c++ to pascal

hi,

     can anyone help me how to make a program to translate c++ to
pascal? what algorithm or data structure should I use? hoping 
for your respone. tnx


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tom at psy.unsw.edu.au  Fri Nov 21 04:19:21 2003
From: tom at psy.unsw.edu.au (Thomas Brandon)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] Re: a new paper on ANTLR style grammars
In-Reply-To: <bpiqfq+4u5v@eGroups.com>
Message-ID: <bpkvs9+8s6v@eGroups.com>

One way you might do it is with a versioned data structure. The 
Harmonia project developed a versioned tree for incremental language 
analysis. A versioned tree with properties is obviously a powerful 
data structure (that's basically XML). So, if you had actions as 
transformations on a versioned tree then you could be doing updates 
to multiple versions, so you could branch your parser where needed 
simply by carrying out the actions against different versions. All 
your parse data like your symbol table would just be nodes attached 
to your tree or on a seperate branch for things like your symbol 
table. So, a lexer would take a character stream a produce a tree 
with a branch conatining data, e.g. a symbol table, and a branch 
containing the flat sequence of tokens output, so AST creation would 
take place in the lexer rather than in the parser, though the 
language would stay the same, it would just spit out a stream of AST 
nodes rather than tokens. For parsers and tree-parsers the branch 
containing data would be copied while the other data would be 
transformed as usual.
The main problem would be making it easy to work with a tree, 
obviously you *can* store a symbol table in a tree but you need to 
make accessing it easy. You would need some way to do XPath like 
expressions to address nodes and properties. Perhaps that could just 
be tacked onto the action-transformation stuff with expressions done 
in target-language. So you'd have some construct within actions to 
execute an XPath expression against the data portion of the output 
tree or the properties of the parse portion of the input, returning 
an AST node\s. So nodes at arbitrary places can be modified and new 
nodes can be added. With that you should be able to track a fair 
amount of dependency information for optimisation too.

Tom.
--- In antlr-interest@yahoogroups.com, "Oliver Zeigermann" 
<oliver@z...> wrote:
> Loring, thanks for the substantial input and taking this 
seriously :)
> 
> --- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> 
wrote:
> > You can do better by deferring the actions--basically, build a 
> > monster case statement including all of the possible actions in 
a 
> > grammar--and execute them after matching a rule. 
> 
> *After* exactly is the problem. It is pretty easy to execute 
actions
> after a derivation / reduce, but not while shifting. This may be
> desirable though...
> 
> > Then you can 
> > trigger a set of actions at "commit" points.  Functional 
languages 
> > make this sort of lazy evaluation easier.  
> 
> Where should those commit points be?
> 
> > Rolling back actions is 
> > trickier--you have to have some sort of mechanism to record 
state, 
> > or the cost for checkpoint/rollback is very high.
> 
> Rolling back / forward does not come for free, agreed! But, if
> implemented reasonably expenses may at most be doubled. Compared to
> worst case exponential costs of backtracking this is not so bad.
> 
> > For that matter, you can defer all actions until the entire 
grammar 
> > is recognized as long as the actions do not affect the parse.  
> > Editing of a generated tree might be trickier, but not that 
> > difficult--you just insert code for that in the list of deferred 
> > actions.
> 
> We discussed this before - but still - writing to and afterwards
> reading from a symbol table is quite a usual thing. This can not be
> expressed merely by means of CFGs (or less), you need actions and
> semantic checks (i.e. predicates) here.
> 
> Other than that, to show my colors: I am a big fan of ASTs in 
genereal
> and ANTLR tree transformation in particular :)
> 
> Oliver
> 
> > --Loring
> > 
> > 
> > --- In antlr-interest@yahoogroups.com, "Oliver Zeigermann" 
> > <oliver@z...> wrote:
> > > What I wanted to say was: If you have sematic actions 
associated
> to
> > > your grammar that can be inserted (and of course executed) at 
any
> > > point and you have a table driven approach you are in trouble. 
> > This is
> > > because what I understand as the precomputation of a search 
tree 
> > into
> > > a table combining certain *search* states. Extrapolating from
> what 
> > I
> > > know about LR you have a problem when youe have a grammar like 
> > this:
> > > 
> > > a : A A { do something here } A A B ;
> > > b : A A { do something different here } A A C ;
> > > 
> > > upon input
> > > 
> > > AAAAC
> > > 
> > > This is because the parser has no idea which action to execute 
> > here.
> > > Now, my idea was to execute both and roll back the action of 
rule 
> > a as
> > > soon as it is clear that rule b actually matches.
> > > 
> > > A bit clearer now?
> > > 
> > > Oliver
> > > 
> > > --- In antlr-interest@yahoogroups.com, Terence Parr 
<parrt@c...> 
> > wrote:
> > > > 
> > > > On Wednesday, November 19, 2003, at 03:12 PM, Oliver 
Zeigermann 
> > wrote:
> > > > 
> > > > > Actually made it through the paper while getting nervous 
with 
> > the
> > > > > proofs ;)
> > > > >
> > > > > While he has linear time "backtracking" performance, ANTLR 
is 
> > worst
> > > > > case exponential. I was wondering why: ANTLR does not 
combine 
> > its
> > > > > depth first search (aka backtracking in this context) into 
a 
> > table
> > > > > while Bryan's approach does (at least I understand it this 
> > way). The
> > > > > problem Bryan will come across (given my understanding is 
> > halfway
> > > > > correct) is ACTIONS. As with LR and combined states, the 
> > problem is
> > > > > when to execute associated semantic actions. The drawback 
is 
> > well
> > > > > known and and leads to reduction in parsing power.
> > > > >
> > > > > Might sound weird, but I thought if we still combined 
states 
> > even
> > > > > though they are associated with different actions and 
simple 
> > execute
> > > > > all actions, there would be no loss of power :) Silly? Not 
if 
> > you have
> > > > > a transactional language that allows you to roll back 
actions 
> > that
> > > > > turn out to be invalid later and roll forward the valid 
ones.
> > > > >
> > > > > Technically this is possible. Does it make sense as well? 
Am
> I 
> > slowly
> > > > > going crazy? ;)
> > > > 
> > > > You are already crazy like me ;) <snicker, snort>.  Just got 
> > mail from 
> > > > him. :)  Hope it's ok to repeat part here:
> > > > 
> > > > > - Packrat parsing guarantees linear-time parsing on all 
the 
> > types of 
> > > > > grammars
> > > > > it supports, which amounts to everything that fits the 
> > formalism or
> > > > > "conceptual model" of parsing expression grammars.  But 
> > the "pure"
> > > PEG 
> > > > > model
> > > > > doesn't directly support "stateful" grammars like those of 
C 
> > and C++, 
> > > > > in
> > > > > which you have to build up symbol tables and such that 
> > effectively 
> > > > > modify the
> > > > > grammar mid-stream as the parser scans the input from left 
to 
> > right.  
> > > > > From
> > > > > what I've seen so far, it appears fundamentally difficult 
or 
> > > > > impossible to
> > > > > make a packrat parser support stateful grammars 
efficiently 
> > without
> > > > > effectively turning it into a deterministic (e.g., LR) 
parser.
> > > > 
> > > > So, the actions are the problem for everyone :)
> > > > 
> > > > Ter
> > > > --
> > > > Professor Comp. Sci., University of San Francisco
> > > > Creator, ANTLR Parser Generator, http://www.antlr.org
> > > > Co-founder, http://www.jguru.com
> > > > Co-founder, http://www.knowspam.net enjoy email again!
> > > > Co-founder, http://www.peerscope.com pure link sharing


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Fri Nov 21 09:20:23 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] #( root children ) syntax change proposal?
In-Reply-To: <1069406321.3fbdd8714bb98@mail.hds.utc.fr>
Message-ID: <FD611AF3-1C46-11D8-8875-000393BB647E@cs.usfca.edu>

Howdy.  Well, naturally I'd build an ANTLR 2 to ANTLR 3 translator :)

Terence
On Friday, November 21, 2003, at 01:18  AM, Boulanger Jean-Louis wrote:

>
>
> Hello
>
> # is actually used if you change I change all my development.
>
> I think it's preferable to preserve the past and perhaps offer two 
> solutions
>  # and ^ for compatibilities.
>
>
> Selon Arnar Birgisson <arnarb@oddi.is>:
>
>> I agree, ^ is (to me) more appropriate as "root" than #.
>>
>> vote +1
>>
>> Arnar
>>
>>> -----Original Message-----
>>> From: Terence Parr [mailto:parrt@cs.usfca.edu]
>>> Sent: 18. n?vember 2003 19:21
>>> To: antlr-interest@yahoogroups.com
>>> Subject: [antlr-interest] #( root children ) syntax change proposal?
>>>
>>>
>>> Howdy folks,
>>>
>>> The #(...) notation derives from wanting to use parens like LISP but
>>> not wanting the ambiguity with (... | ...) alternative
>>> subrules. The #
>>> was the only character left in ASCII for me to use ;)  I have always
>>> not liked it, but now it's ingrained.  That said, I've been
>>> thinking of
>>> changing it for ANTLR 3 into
>>>
>>> ^(root c1 ... cn)
>>>
>>> in tree parsers and tree construction actions.  There MAY be some
>>> ambiguity with the ^ suffix operator, but I think we might
>>> wanna try it
>>> out.
>>>
>>> Anybody have any thoughts?  I like it as it's more intuitive
>>> that that
>>> is a tree ;)  # is random.
>>>
>>> Ter
>>> --
>>> Professor Comp. Sci., University of San Francisco
>>> Creator, ANTLR Parser Generator, http://www.antlr.org
>>> Co-founder, http://www.jguru.com
>>> Co-founder, http://www.knowspam.net enjoy email again!
>>> Co-founder, http://www.peerscope.com pure link sharing
>>>
>>>
>>>
>>>
>>>
>>>
>>> Your use of Yahoo! Groups is subject to
>>> http://docs.yahoo.com/info/terms/
>>>
>>>
>>
>>
>>
>>
>> Your use of Yahoo! Groups is subject to 
>> http://docs.yahoo.com/info/terms/
>>
>
>
>
>
> -------------------------------------------------
> Laboratoire Heudiasyc. UMR CNRS 6599
> http://www.hds.utc.fr
>
> -------------------------------------------------
> Laboratoire Heudiasyc. UMR CNRS 6599
> http://www.hds.utc.fr
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com link sharing, pure-n-simple




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Fri Nov 21 09:22:00 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] Re: a new paper on ANTLR style grammars
In-Reply-To: <5.1.1.1.2.20031121092147.048352d0@wgmail2.gatwick.eur.slb.com>
Message-ID: <377A12DE-1C47-11D8-8875-000393BB647E@cs.usfca.edu>


On Friday, November 21, 2003, at 01:30  AM, Pete Forman wrote:

> At 2003-11-20 19:53 +0000, lgcraymer wrote:
>> Sorry if I was unclear.  Actions need to execute during a parse only
>> if they affect the parse--you need semantic predicates for that.
>> What you can do is build a list of operations to be executed later.
>
> How about putting an optional second clause into an action that
> unwinds it?
>
> That is less automated than the approaches proposed so far but would
> be simpler to implement and for the user to understand.

Been thinking about this programmer-controlled method...very much in 
antlr's philosophy.

Regardless, I'm hoping that backtracking will be much less required as 
LL-regular will allow infinite lookahead (albeit regular not LL) 
languages.  It will auto-left factor stuff too except in the presence 
of actions. :)

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com link sharing, pure-n-simple




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Fri Nov 21 09:27:19 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] #( root children ) syntax change proposal?
In-Reply-To: <FD611AF3-1C46-11D8-8875-000393BB647E@cs.usfca.edu>
Message-ID: <20031121172719.57248.qmail@web20415.mail.yahoo.com>

That was cool.

--- Terence Parr <parrt@cs.usfca.edu> wrote:
> Howdy.  Well, naturally I'd build an ANTLR 2 to
> ANTLR 3 translator :)
> 
> Terence
> On Friday, November 21, 2003, at 01:18  AM,
> Boulanger Jean-Louis wrote:
> 
> >
> >
> > Hello
> >
> > # is actually used if you change I change all my
> development.
> >
> > I think it's preferable to preserve the past and
> perhaps offer two 
> > solutions
> >  # and ^ for compatibilities.
> >
> >
> > Selon Arnar Birgisson <arnarb@oddi.is>:
> >
> >> I agree, ^ is (to me) more appropriate as "root"
> than #.
> >>
> >> vote +1
> >>
> >> Arnar
> >>
> >>> -----Original Message-----
> >>> From: Terence Parr [mailto:parrt@cs.usfca.edu]
> >>> Sent: 18. nvember 2003 19:21
> >>> To: antlr-interest@yahoogroups.com
> >>> Subject: [antlr-interest] #( root children )
> syntax change proposal?
> >>>
> >>>
> >>> Howdy folks,
> >>>
> >>> The #(...) notation derives from wanting to use
> parens like LISP but
> >>> not wanting the ambiguity with (... | ...)
> alternative
> >>> subrules. The #
> >>> was the only character left in ASCII for me to
> use ;)  I have always
> >>> not liked it, but now it's ingrained.  That
> said, I've been
> >>> thinking of
> >>> changing it for ANTLR 3 into
> >>>
> >>> ^(root c1 ... cn)
> >>>
> >>> in tree parsers and tree construction actions. 
> There MAY be some
> >>> ambiguity with the ^ suffix operator, but I
> think we might
> >>> wanna try it
> >>> out.
> >>>
> >>> Anybody have any thoughts?  I like it as it's
> more intuitive
> >>> that that
> >>> is a tree ;)  # is random.
> >>>
> >>> Ter
> >>> --
> >>> Professor Comp. Sci., University of San
> Francisco
> >>> Creator, ANTLR Parser Generator,
> http://www.antlr.org
> >>> Co-founder, http://www.jguru.com
> >>> Co-founder, http://www.knowspam.net enjoy email
> again!
> >>> Co-founder, http://www.peerscope.com pure link
> sharing
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>> Your use of Yahoo! Groups is subject to
> >>> http://docs.yahoo.com/info/terms/
> >>>
> >>>
> >>
> >>
> >>
> >>
> >> Your use of Yahoo! Groups is subject to 
> >> http://docs.yahoo.com/info/terms/
> >>
> >
> >
> >
> >
> > -------------------------------------------------
> > Laboratoire Heudiasyc. UMR CNRS 6599
> > http://www.hds.utc.fr
> >
> > -------------------------------------------------
> > Laboratoire Heudiasyc. UMR CNRS 6599
> > http://www.hds.utc.fr
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/
> >
> >
> >
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator,
> http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email
> again!
> Co-founder, http://www.peerscope.com link sharing,
> pure-n-simple
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
Free Pop-Up Blocker - Get it now
http://companion.yahoo.com/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Fri Nov 21 15:35:59 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] Re: a new paper on ANTLR style grammars
In-Reply-To: <5.1.1.1.2.20031121092147.048352d0@wgmail2.gatwick.eur.slb.com>
Message-ID: <bpm7gv+oh5c@eGroups.com>

--- In antlr-interest@yahoogroups.com, Pete Forman <pete.forman@w...>
wrote:
> At 2003-11-20 19:53 +0000, lgcraymer wrote:
> >Sorry if I was unclear.  Actions need to execute during a parse only
> >if they affect the parse--you need semantic predicates for that.
> >What you can do is build a list of operations to be executed later.
> 
> How about putting an optional second clause into an action that
> unwinds it?
> 
> That is less automated than the approaches proposed so far but would
> be simpler to implement and for the user to understand.

Sounds very reasonable, but is less fun ;)

Oliver


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Fri Nov 21 15:52:34 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] Re: a new paper on ANTLR style grammars
In-Reply-To: <bpkck5+6iei@eGroups.com>
Message-ID: <bpm8g2+dj4i@eGroups.com>

Tom!

I have read your other posts as well and now see, you are right. My 
transactions do not seem to work at all when you do not have
backtracking. As it was my primary goal to avoid it, they really are
useless. Besides, can't backtracking be seen as some sort of nested
transactions?

Oliver

--- In antlr-interest@yahoogroups.com, "Thomas Brandon" <tom@p...> wrote:
> Oliver,
> I don't think doing all actions and then rolling back is going to be 
> enough. Remember that by itself the example you present is no 
> problem for LR, just use:
> ab: A A A A (B { Action1(); } | C { Action2(); });
> of course I assume you intended something like:
> a: A A { bSomething == true; } A { if(bSomething) ...; } A B;
> b: A A { bSomething == false; } A { if(bSomething) ...; } A C;
> i.e. we must decide before we see the B|C, as actions are not edge-
> aligned. (Though presumably we are doing more than simply setting 
> flags).
> 
> But in this case how are transactions going to work? We execute both 
> bSomething = true and bSomething = false? No, I think we're going to 
> need to branch the entire state, in one we do bSomething = true; in 
> the other bSomething = false;. Now were either gonna need to do two 
> complete parses of the rest of the input or parse once but for every 
> subsequent action execute it against all valid states. Of course 
> once the path we take branches then were going to need to branch our 
> states for each path too.
> 
> If instead our grammar was:
> a: A A { bSomething == true; } A { if(bSomething) ...; else if 
> bSomethingElse) ...;} A B;
> b: A A { bSomethingElse == true; } A { if(bSomething) ...; else if
> (bSomethingElse) ...;} A C;
> where there is no overlap between the two actions, then we wouldn't 
> need to. But I don't think the semantic analysis necessary to 
> distinguish those cases is trivial (given ithings like the 
> possibility that bSomething == bSomethingElse). Similarly 
> transforming to the benign form may be possible but would require 
> such analysis. And even if you do manage the analysis it means you 
> need to redo the entire analysis when anything changes. i.e. if my 
> action is myClass.MyAction() then we need to redo the entire 
> analysis if myClass.MyAction changes, hence no inheritance without 
> possibly breaking things.
> 
> And what about when actions overlap, i.e. we have a choice between 
> an action { a = 3; b++; } and { a = 4; b++; c++; }, we can't just 
> store the inital state and later restore it because if we restore 
> that we undo both actions. Somehow we need to figure out for our 
> actions A and B, A union B (those changes common to both) and A - B 
> and B - A, those changes peculiar to B and those peculiar to A. 
> Then, if we want A to go through we only rollback B - A (those 
> changes peculiar to B). Again requiring (probably quite 
> sophisticated) static analysis.
> 
> Tom.
> --- In antlr-interest@yahoogroups.com, "Oliver Zeigermann" 
> <oliver@z...> wrote:
> > What I wanted to say was: If you have sematic actions associated to
> > your grammar that can be inserted (and of course executed) at any
> > point and you have a table driven approach you are in trouble. 
> This is
> > because what I understand as the precomputation of a search tree 
> into
> > a table combining certain *search* states. Extrapolating from what 
> I
> > know about LR you have a problem when youe have a grammar like 
> this:
> > 
> > a : A A { do something here } A A B ;
> > b : A A { do something different here } A A C ;
> > 
> > upon input
> > 
> > AAAAC
> > 
> > This is because the parser has no idea which action to execute 
> here.
> > Now, my idea was to execute both and roll back the action of rule 
> a as
> > soon as it is clear that rule b actually matches.
> > 
> > A bit clearer now?
> > 
> > Oliver
> > 
> > --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
> wrote:
> > > 
> > > On Wednesday, November 19, 2003, at 03:12 PM, Oliver Zeigermann 
> wrote:
> > > 
> > > > Actually made it through the paper while getting nervous with 
> the
> > > > proofs ;)
> > > >
> > > > While he has linear time "backtracking" performance, ANTLR is 
> worst
> > > > case exponential. I was wondering why: ANTLR does not combine 
> its
> > > > depth first search (aka backtracking in this context) into a 
> table
> > > > while Bryan's approach does (at least I understand it this 
> way). The
> > > > problem Bryan will come across (given my understanding is 
> halfway
> > > > correct) is ACTIONS. As with LR and combined states, the 
> problem is
> > > > when to execute associated semantic actions. The drawback is 
> well
> > > > known and and leads to reduction in parsing power.
> > > >
> > > > Might sound weird, but I thought if we still combined states 
> even
> > > > though they are associated with different actions and simple 
> execute
> > > > all actions, there would be no loss of power :) Silly? Not if 
> you have
> > > > a transactional language that allows you to roll back actions 
> that
> > > > turn out to be invalid later and roll forward the valid ones.
> > > >
> > > > Technically this is possible. Does it make sense as well? Am I 
> slowly
> > > > going crazy? ;)
> > > 
> > > You are already crazy like me ;) <snicker, snort>.  Just got 
> mail from 
> > > him. :)  Hope it's ok to repeat part here:
> > > 
> > > > - Packrat parsing guarantees linear-time parsing on all the 
> types of 
> > > > grammars
> > > > it supports, which amounts to everything that fits the 
> formalism or
> > > > "conceptual model" of parsing expression grammars.  But 
> the "pure"
> > PEG 
> > > > model
> > > > doesn't directly support "stateful" grammars like those of C 
> and C++, 
> > > > in
> > > > which you have to build up symbol tables and such that 
> effectively 
> > > > modify the
> > > > grammar mid-stream as the parser scans the input from left to 
> right.  
> > > > From
> > > > what I've seen so far, it appears fundamentally difficult or 
> > > > impossible to
> > > > make a packrat parser support stateful grammars efficiently 
> without
> > > > effectively turning it into a deterministic (e.g., LR) parser.
> > > 
> > > So, the actions are the problem for everyone :)
> > > 
> > > Ter
> > > --
> > > Professor Comp. Sci., University of San Francisco
> > > Creator, ANTLR Parser Generator, http://www.antlr.org
> > > Co-founder, http://www.jguru.com
> > > Co-founder, http://www.knowspam.net enjoy email again!
> > > Co-founder, http://www.peerscope.com pure link sharing


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Fri Nov 21 15:57:14 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] Re: a new paper on ANTLR style grammars
In-Reply-To: <bpj63h+gcfc@eGroups.com>
Message-ID: <bpm8oq+2sfq@eGroups.com>

You are right. The worst case scenario hardly applies at all...
Remember, you once pointed me to GLR parsing as done in recent bison
versions?! It has to deal with actions as well. Quite funny way it
does it:

http://www.delorie.com/gnu/docs/bison/bison_90.html

have a look at the lower part...

Oliver

--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> --- In antlr-interest@yahoogroups.com, "Oliver Zeigermann"
<oliver@z...> wrote:
> > Loring, thanks for the substantial input and taking this seriously :)
> > 
> > --- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> > > You can do better by deferring the actions--basically, build a 
> > > monster case statement including all of the possible actions in a 
> > > grammar--and execute them after matching a rule. 
> > 
> > *After* exactly is the problem. It is pretty easy to execute actions
> > after a derivation / reduce, but not while shifting. This may be
> > desirable though...
> 
> Sorry if I was unclear.  Actions need to execute during a parse only
if they affect the parse--you need semantic predicates for that.  
> What you can do is build a list of operations to be executed later.
> 
> > > Then you can 
> > > trigger a set of actions at "commit" points.  Functional languages 
> > > make this sort of lazy evaluation easier.  
> > 
> > Where should those commit points be?
> 
> The simple answer is "reduce" operations in an LR parser, but I
don't think that that is a complete answer.
> 
> > > Rolling back actions is 
> > > trickier--you have to have some sort of mechanism to record state, 
> > > or the cost for checkpoint/rollback is very high.
> > 
> > Rolling back / forward does not come for free, agreed! But, if
> > implemented reasonably expenses may at most be doubled. Compared to
> > worst case exponential costs of backtracking this is not so bad.
> 
> Checkpoint/rollback only affects action state maintenance, not the
parsing path.  Backtracking still happens.  Besides, the worst 
> case scenario is a worst case scenario and would occur in practice
only for truly horrendous languages which are probably not 
> manageable in any other way.  BTW, exponential overhead occurs only
if there is a syntactic predicate on almost every alternative 
> (with ANTLR)--in practice, it is hard to get more than about 10%
overhead from a reasonable problem.  Building a state machine with 
> deferred actions will incur little overhead and achieve the same effect.
> 
> > > For that matter, you can defer all actions until the entire grammar 
> > > is recognized as long as the actions do not affect the parse.  
> > > Editing of a generated tree might be trickier, but not that 
> > > difficult--you just insert code for that in the list of deferred 
> > > actions.
> > 
> > We discussed this before - but still - writing to and afterwards
> > reading from a symbol table is quite a usual thing. This can not be
> > expressed merely by means of CFGs (or less), you need actions and
> > semantic checks (i.e. predicates) here.
> 
> Not quite--I'm afraid that my explanation was a bit terse.  The
point is to do tree construction via deferred actions and achieve 
> edit-during-construction through inserting helper actions into the
list.  You can do all of the normal symbol table stuff through deferred 
> actions--what you cannot do is mix them with semantic predicates.
> 
> --Loring
> 
> > Other than that, to show my colors: I am a big fan of ASTs in genereal
> > and ANTLR tree transformation in particular :)
> > 
> > Oliver
> > 
> > > --Loring
> > > 
> > > 
> > > --- In antlr-interest@yahoogroups.com, "Oliver Zeigermann" 
> > > <oliver@z...> wrote:
> > > > What I wanted to say was: If you have sematic actions associated
> > to
> > > > your grammar that can be inserted (and of course executed) at any
> > > > point and you have a table driven approach you are in trouble. 
> > > This is
> > > > because what I understand as the precomputation of a search tree 
> > > into
> > > > a table combining certain *search* states. Extrapolating from
> > what 
> > > I
> > > > know about LR you have a problem when youe have a grammar like 
> > > this:
> > > > 
> > > > a : A A { do something here } A A B ;
> > > > b : A A { do something different here } A A C ;
> > > > 
> > > > upon input
> > > > 
> > > > AAAAC
> > > > 
> > > > This is because the parser has no idea which action to execute 
> > > here.
> > > > Now, my idea was to execute both and roll back the action of rule 
> > > a as
> > > > soon as it is clear that rule b actually matches.
> > > > 
> > > > A bit clearer now?
> > > > 
> > > > Oliver
> > > > 
> > > > --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
> > > wrote:
> > > > > 
> > > > > On Wednesday, November 19, 2003, at 03:12 PM, Oliver Zeigermann 
> > > wrote:
> > > > > 
> > > > > > Actually made it through the paper while getting nervous with 
> > > the
> > > > > > proofs ;)
> > > > > >
> > > > > > While he has linear time "backtracking" performance, ANTLR is 
> > > worst
> > > > > > case exponential. I was wondering why: ANTLR does not combine 
> > > its
> > > > > > depth first search (aka backtracking in this context) into a 
> > > table
> > > > > > while Bryan's approach does (at least I understand it this 
> > > way). The
> > > > > > problem Bryan will come across (given my understanding is 
> > > halfway
> > > > > > correct) is ACTIONS. As with LR and combined states, the 
> > > problem is
> > > > > > when to execute associated semantic actions. The drawback is 
> > > well
> > > > > > known and and leads to reduction in parsing power.
> > > > > >
> > > > > > Might sound weird, but I thought if we still combined states 
> > > even
> > > > > > though they are associated with different actions and simple 
> > > execute
> > > > > > all actions, there would be no loss of power :) Silly? Not if 
> > > you have
> > > > > > a transactional language that allows you to roll back actions 
> > > that
> > > > > > turn out to be invalid later and roll forward the valid ones.
> > > > > >
> > > > > > Technically this is possible. Does it make sense as well? Am
> > I 
> > > slowly
> > > > > > going crazy? ;)
> > > > > 
> > > > > You are already crazy like me ;) <snicker, snort>.  Just got 
> > > mail from 
> > > > > him. :)  Hope it's ok to repeat part here:
> > > > > 
> > > > > > - Packrat parsing guarantees linear-time parsing on all the 
> > > types of 
> > > > > > grammars
> > > > > > it supports, which amounts to everything that fits the 
> > > formalism or
> > > > > > "conceptual model" of parsing expression grammars.  But 
> > > the "pure"
> > > > PEG 
> > > > > > model
> > > > > > doesn't directly support "stateful" grammars like those of C 
> > > and C++, 
> > > > > > in
> > > > > > which you have to build up symbol tables and such that 
> > > effectively 
> > > > > > modify the
> > > > > > grammar mid-stream as the parser scans the input from left to 
> > > right.  
> > > > > > From
> > > > > > what I've seen so far, it appears fundamentally difficult or 
> > > > > > impossible to
> > > > > > make a packrat parser support stateful grammars efficiently 
> > > without
> > > > > > effectively turning it into a deterministic (e.g., LR) parser.
> > > > > 
> > > > > So, the actions are the problem for everyone :)
> > > > > 
> > > > > Ter
> > > > > --
> > > > > Professor Comp. Sci., University of San Francisco
> > > > > Creator, ANTLR Parser Generator, http://www.antlr.org
> > > > > Co-founder, http://www.jguru.com
> > > > > Co-founder, http://www.knowspam.net enjoy email again!
> > > > > Co-founder, http://www.peerscope.com pure link sharing


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Fri Nov 21 16:24:57 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] Re: a new paper on ANTLR style grammars
In-Reply-To: <002a01c3b012$d9b3e050$00cf090a@oddi.is>
Message-ID: <bpmacp+hhms@eGroups.com>

I am afraid I can't quite follow... Executing actions on reduce is
something quite normal for an LR or LALR parser. 

Besides, something like this 
a: A A { bSomething = true; } A
b: A A { bSomething = false; } B 

much more turns into something like this
a: a' A
a': A A { bSomething == true; } 

b: b' B
b': A A { bSomething = false; }

Which makes the above grammar ambiguous (reduce/reduce on a' / b')...

Oliver

--- In antlr-interest@yahoogroups.com, "Arnar Birgisson" <arnarb@o...>
wrote:
> Again, I'm just a beginner in all this, but I'm interested and want to
> learn. Please ignore me if you don't have the time or interest.
> 
> Since actions in LR parsers can only appear at the end of a rule (i.e.
> at the reduce point), this
> 
> a: A A { bSomething == true; } A { if(bSomething) ...; } A B;
> b: A A { bSomething == false; } A { if(bSomething) ...; } A C;
> 
> would be rewritten to this
> 
> a:    A A a' A a'' A B;
> a':   <epsilon> { bSomething = true; };
> a'':  <epsilon> { if(bStomehting) ...; };
> b:    A A b' A b'' A C;
> b':   <epsilon> {bSomething = false; };
> b'':  <epsilon> {if (bSomething) ...; };
> 
> Now, am I correct here:
> Deferring actions would then mean that we would need to change the stack
> in an un-stack-like manner, adding another operation to the set
> {shift,reduce}
> 
> The stack would then progress like this:
> operation    stack
> shift        A
> shift        A A
> shift        A A A
> shift        A A A A
> shift        A A A A B
> something    A A a' A A B   (effectively reducing <epsilon> -> a')
> something    A A a' A a'' A B
> reduce       a
> 
> Is there any other way? Wouldn't this simplistic method mess up the LR
> state-machine?
> 
> Again, please ignore me if I'm off course. Consider me an annoying
> student asking silly questions if you like :o)
> 
> Arnar
> 
> > -----Original Message-----
> > From: Thomas Brandon [mailto:tom@p...] 
> > Sent: 21. n?vember 2003 09:02
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Re: a new paper on ANTLR style grammars
> > 
> > 
> > Yeah, that's the Antlr solution. And I think that some of Ter's new 
> > stuff is looking at doing stuff kinda like that automatically. It 
> > just figures out the k it will need (or that it can't find a k that 
> > will work) so you don't explicitly need to tell it through a 
> > syntactic predicate.
> > 
> > If I understand it correctly, the real problem with actions is in LR 
> > parsers where matching is down on the right-edge of rules, and they 
> > don't support such predicates as they are table-based. They wait 
> > until the right edge of a rule to match, so it's a bit like the 
> > parser is in guessing mode for the entire rule, thus any actions are 
> > ignored. And, unlike Antlr, they don't allow you to figure out 
> > through predicated guessing whether the rule should run and then run 
> > it properly with actions.
> > 
> > Tom.
> > --- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
> > <arnarb@o...> wrote:
> > > Hi there,
> > > 
> > > Mabey this is obvious, but if the parser-generator could identify 
> > such
> > > cases, i.e. 
> > > 
> > > a: A A { bSomething == true; } A { if(bSomething) ...; } A B;
> > > b: A A { bSomething == false; } A { if(bSomething) ...; } A C;
> > > 
> > > and it can hadle syntactic predicates, it would automatically 
> > change
> > > this to
> > > 
> > > a: (A A A A B)=> A A { bSomething == true; } A { if
> > (bSomething) ..; } A
> > > B;
> > > b: (A A A A C)=> A A { bSomething == false; } A { if
> > (bSomething) ..; }
> > > A C;
> > > 
> > > do the job? It would obviously hurt performance though, but such 
> > cases
> > > should be rare.
> > > 
> > > Arnar
> > > 
> > > > -----Original Message-----
> > > > From: Thomas Brandon [mailto:tom@p...] 
> > > > Sent: 21. n?vember 2003 06:51
> > > > To: antlr-interest@yahoogroups.com
> > > > Subject: [antlr-interest] Re: a new paper on ANTLR style grammars
> > > > 
> > > > 
> > > > Oliver,
> > > > I don't think doing all actions and then rolling back is going 
> > to be 
> > > > enough. Remember that by itself the example you present is no 
> > > > problem for LR, just use:
> > > > ab: A A A A (B { Action1(); } | C { Action2(); });
> > > > of course I assume you intended something like:
> > > > a: A A { bSomething == true; } A { if(bSomething) ...; } A B;
> > > > b: A A { bSomething == false; } A { if(bSomething) ...; } A C;
> > > > i.e. we must decide before we see the B|C, as actions are not 
> > edge-
> > > > aligned. (Though presumably we are doing more than simply 
> > setting 
> > > > flags).
> > > > 
> > > > But in this case how are transactions going to work? We execute 
> > both 
> > > > bSomething = true and bSomething = false? No, I think we're 
> > going to 
> > > > need to branch the entire state, in one we do bSomething = true; 
> > in 
> > > > the other bSomething = false;. Now were either gonna need to do 
> > two 
> > > > complete parses of the rest of the input or parse once but for 
> > every 
> > > > subsequent action execute it against all valid states. Of course 
> > > > once the path we take branches then were going to need to branch 
> > our 
> > > > states for each path too.
> > > > 
> > > > If instead our grammar was:
> > > > a: A A { bSomething == true; } A { if(bSomething) ...; else if 
> > > > bSomethingElse) ...;} A B;
> > > > b: A A { bSomethingElse == true; } A { if(bSomething) ...; else 
> > if
> > > > (bSomethingElse) ...;} A C;
> > > > where there is no overlap between the two actions, then we 
> > wouldn't 
> > > > need to. But I don't think the semantic analysis necessary to 
> > > > distinguish those cases is trivial (given ithings like the 
> > > > possibility that bSomething == bSomethingElse). Similarly 
> > > > transforming to the benign form may be possible but would 
> > require 
> > > > such analysis. And even if you do manage the analysis it means 
> > you 
> > > > need to redo the entire analysis when anything changes. i.e. if 
> > my 
> > > > action is myClass.MyAction() then we need to redo the entire 
> > > > analysis if myClass.MyAction changes, hence no inheritance 
> > without 
> > > > possibly breaking things.
> > > > 
> > > > And what about when actions overlap, i.e. we have a choice 
> > between 
> > > > an action { a = 3; b++; } and { a = 4; b++; c++; }, we can't 
> > just 
> > > > store the inital state and later restore it because if we 
> > restore 
> > > > that we undo both actions. Somehow we need to figure out for our 
> > > > actions A and B, A union B (those changes common to both) and A -
> >  B 
> > > > and B - A, those changes peculiar to B and those peculiar to A. 
> > > > Then, if we want A to go through we only rollback B - A (those 
> > > > changes peculiar to B). Again requiring (probably quite 
> > > > sophisticated) static analysis.
> > > > 
> > > > Tom.
> > > > --- In antlr-interest@yahoogroups.com, "Oliver Zeigermann" 
> > > > <oliver@z...> wrote:
> > > > > What I wanted to say was: If you have sematic actions 
> > associated to
> > > > > your grammar that can be inserted (and of course executed) at 
> > any
> > > > > point and you have a table driven approach you are in trouble. 
> > > > This is
> > > > > because what I understand as the precomputation of a search 
> > tree 
> > > > into
> > > > > a table combining certain *search* states. Extrapolating from 
> > what 
> > > > I
> > > > > know about LR you have a problem when youe have a grammar like 
> > > > this:
> > > > > 
> > > > > a : A A { do something here } A A B ;
> > > > > b : A A { do something different here } A A C ;
> > > > > 
> > > > > upon input
> > > > > 
> > > > > AAAAC
> > > > > 
> > > > > This is because the parser has no idea which action to execute 
> > > > here.
> > > > > Now, my idea was to execute both and roll back the action of 
> > rule 
> > > > a as
> > > > > soon as it is clear that rule b actually matches.
> > > > > 
> > > > > A bit clearer now?
> > > > > 
> > > > > Oliver
> > > > > 
> > > > > --- In antlr-interest@yahoogroups.com, Terence Parr 
> > <parrt@c...> 
> > > > wrote:
> > > > > > 
> > > > > > On Wednesday, November 19, 2003, at 03:12 PM, Oliver 
> > Zeigermann 
> > > > wrote:
> > > > > > 
> > > > > > > Actually made it through the paper while getting nervous 
> > with 
> > > > the
> > > > > > > proofs ;)
> > > > > > >
> > > > > > > While he has linear time "backtracking" performance, ANTLR 
> > is 
> > > > worst
> > > > > > > case exponential. I was wondering why: ANTLR does not 
> > combine 
> > > > its
> > > > > > > depth first search (aka backtracking in this context) into 
> > a 
> > > > table
> > > > > > > while Bryan's approach does (at least I understand it this 
> > > > way). The
> > > > > > > problem Bryan will come across (given my understanding is 
> > > > halfway
> > > > > > > correct) is ACTIONS. As with LR and combined states, the 
> > > > problem is
> > > > > > > when to execute associated semantic actions. The drawback 
> > is 
> > > > well
> > > > > > > known and and leads to reduction in parsing power.
> > > > > > >
> > > > > > > Might sound weird, but I thought if we still combined 
> > states 
> > > > even
> > > > > > > though they are associated with different actions and 
> > simple 
> > > > execute
> > > > > > > all actions, there would be no loss of power :) Silly? Not 
> > if 
> > > > you have
> > > > > > > a transactional language that allows you to roll back 
> > actions 
> > > > that
> > > > > > > turn out to be invalid later and roll forward the valid 
> > ones.
> > > > > > >
> > > > > > > Technically this is possible. Does it make sense as well? 
> > Am I 
> > > > slowly
> > > > > > > going crazy? ;)
> > > > > > 
> > > > > > You are already crazy like me ;) <snicker, snort>.  Just got 
> > > > mail from 
> > > > > > him. :)  Hope it's ok to repeat part here:
> > > > > > 
> > > > > > > - Packrat parsing guarantees linear-time parsing on all 
> > the 
> > > > types of 
> > > > > > > grammars
> > > > > > > it supports, which amounts to everything that fits the 
> > > > formalism or
> > > > > > > "conceptual model" of parsing expression grammars.  But 
> > > > the "pure"
> > > > > PEG 
> > > > > > > model
> > > > > > > doesn't directly support "stateful" grammars like those of 
> > C 
> > > > and C++, 
> > > > > > > in
> > > > > > > which you have to build up symbol tables and such that 
> > > > effectively 
> > > > > > > modify the
> > > > > > > grammar mid-stream as the parser scans the input from left 
> > to 
> > > > right.  
> > > > > > > From
> > > > > > > what I've seen so far, it appears fundamentally difficult 
> > or 
> > > > > > > impossible to
> > > > > > > make a packrat parser support stateful grammars 
> > efficiently 
> > > > without
> > > > > > > effectively turning it into a deterministic (e.g., LR) 
> > parser.
> > > > > > 
> > > > > > So, the actions are the problem for everyone :)
> > > > > > 
> > > > > > Ter
> > > > > > --
> > > > > > Professor Comp. Sci., University of San Francisco
> > > > > > Creator, ANTLR Parser Generator, http://www.antlr.org
> > > > > > Co-founder, http://www.jguru.com
> > > > > > Co-founder, http://www.knowspam.net enjoy email again!
> > > > > > Co-founder, http://www.peerscope.com pure link sharing
> > > > 
> > > > 
> > > >  
> > > > 
> > > > Your use of Yahoo! Groups is subject to 
> > > > http://docs.yahoo.com/info/terms/ 
> > > > 
> > > >
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> >


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Sat Nov 22 06:56:57 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] antlr 3 unicode support
In-Reply-To: <Pine.NEB.4.58.0311210100110.17334@panix5.panix.com>; from tmoog@polhode.com on Fri, Nov 21, 2003 at 01:06:14AM -0500
References: <BBE2EB5E.296A8%sunshine@public.kherson.ua> <Pine.NEB.4.58.0311210100110.17334@panix5.panix.com>
Message-ID: <20031122155656.A20601@cs.utwente.nl>

Hi,

On Fri, Nov 21, 2003 at 01:06:14AM -0500, Tom Moog wrote:
> Just to remind you java guys thinking about lexing unicode:
> unicode doesn't stop at 2**16.  It extends up to 0x10ffff if you
> want to include music symbols, Babylonian, math style letters,
> and so on.  For java xml parsers this means using the low order
> ten bits from two adjacent 16 bit words (surrogate pairs) to
> reach things above 2**16.

Hmmm this would mean that we would have to deal with unicode decoding
ourselves in the lexer? And use 32 bit values for the tokens/strings.

So far for C++ I was only looking at making the backend wchar/wstring
aware, although extending up from there would not be hard with templates.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Why don't we just invite them to dinner and massacre them all when they're
  drunk? You heard the man. There's seven hundred thousand of them. Ah? ..
           So it'd have to be something simple with pasta, then.
                 From: Interesting Times by Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Sat Nov 22 07:09:43 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] #( root children ) syntax change proposal?
In-Reply-To: <5A745B98-19FC-11D8-99AD-000A95891192@cs.usfca.edu>; from parrt@cs.usfca.edu on Tue, Nov 18, 2003 at 11:21:04AM -0800
References: <5A745B98-19FC-11D8-99AD-000A95891192@cs.usfca.edu>
Message-ID: <20031122160943.B20601@cs.utwente.nl>

Hi,

On Tue, Nov 18, 2003 at 11:21:04AM -0800, Terence Parr wrote:
> The #(...) notation derives from wanting to use parens like LISP but 
> not wanting the ambiguity with (... | ...) alternative subrules. The # 
> was the only character left in ASCII for me to use ;)  I have always 
> not liked it, but now it's ingrained.  That said, I've been thinking of 
> changing it for ANTLR 3 into
> 
> ^(root c1 ... cn)
> 
> in tree parsers and tree construction actions.  There MAY be some 
> ambiguity with the ^ suffix operator, but I think we might wanna try it 
> out.
> 
> Anybody have any thoughts?  I like it as it's more intuitive that that 
> is a tree ;)  # is random.

I would be inclined to make the thing target language dependant. For C++
I've very often contemplated to replace the # with something different in
order to have no trouble with preprocessor directives. ^ gives conflicts
with xor operators in the action parser parts. This would mean the action
parsers would even become bigger messes than they are now. Unless the tree
operator parts are easy to separate from the target language.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Quidquid latine dictum sit, altum viditur.
                 (Whatever is said in Latin sounds profound.)


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From dvleonid at land.ru  Fri Nov 21 17:25:24 2003
From: dvleonid at land.ru (DVLeonid)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] question
In-Reply-To: <000701c38c58$daadcda0$6601a8c0@Epsilon>
References: <000701c38c58$daadcda0$6601a8c0@Epsilon>
Message-ID: <26214578.20031122042524@land.ru>

Hello guys,
   Could you help me find good fundamental materials about
   mathematical basis of different classes of grammars used in
   non natural languages parsing.
   Right now I need to know computational complexity of building and
   using lexical and syntax recognizer. But also I'd like to know more
   about all this stuff...
   I'll be very appreciated, if you could help me.

-- 
Best regards,
 DVLeonid                            mailto:dvleonid@land.ru


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From dvleonid at land.ru  Sat Nov 22 10:19:14 2003
From: dvleonid at land.ru (DVLeonid)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] #( root children ) syntax change proposal?
In-Reply-To: <20031122160943.B20601@cs.utwente.nl>
References: <5A745B98-19FC-11D8-99AD-000A95891192@cs.usfca.edu>
 <20031122160943.B20601@cs.utwente.nl>
Message-ID: <1055481859.20031122211914@land.ru>

Hello Ric,

How about to use somethink like ## or ^^. It has no sense in C++ and I
think in another languages too. (Yes I borrowed this idea from Bjarn).

RK> Hi,

RK> On Tue, Nov 18, 2003 at 11:21:04AM -0800, Terence Parr wrote:
>> The #(...) notation derives from wanting to use parens like LISP but
>> not wanting the ambiguity with (... | ...) alternative subrules. The #
>> was the only character left in ASCII for me to use ;)  I have always
>> not liked it, but now it's ingrained.  That said, I've been thinking of
>> changing it for ANTLR 3 into
>> 
>> ^(root c1 ... cn)
>> 
>> in tree parsers and tree construction actions.  There MAY be some 
>> ambiguity with the ^ suffix operator, but I think we might wanna try it
>> out.
>> 
>> Anybody have any thoughts?  I like it as it's more intuitive that that
>> is a tree ;)  # is random.

RK> I would be inclined to make the thing target language dependant. For C++
RK> I've very often contemplated to replace the # with something different in
RK> order to have no trouble with preprocessor directives. ^ gives conflicts
RK> with xor operators in the action parser parts. This would mean the action
RK> parsers would even become bigger messes than they are now. Unless the tree
RK> operator parts are easy to separate from the target language.

RK> Cheers,

RK> Ric



-- 
Best regards,
 DVLeonid                            mailto:dvleonid@land.ru


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From dvleonid at land.ru  Fri Nov 21 18:58:57 2003
From: dvleonid at land.ru (DVLeonid)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] Tree transformation
In-Reply-To: <72C9789739C4214096AE945753B11EA36B1F59@mypxmail04.bco-home.com>
References: <72C9789739C4214096AE945753B11EA36B1F59@mypxmail04.bco-home.com>
Message-ID: <211827281.20031122055857@land.ru>

Dear Terr,
   Could you tell me if there any modern research in compilers area?

-- 
Best regards,
 DVLeonid                            mailto:dvleonid@land.ru


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Sat Nov 22 12:47:40 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] #( root children ) syntax change proposal?
In-Reply-To: <20031122160943.B20601@cs.utwente.nl>
Message-ID: <1D412144-1D2D-11D8-A328-000A95891192@cs.usfca.edu>


On Saturday, November 22, 2003, at 07:09 AM, Ric Klaren wrote:

> Hi,
>
> On Tue, Nov 18, 2003 at 11:21:04AM -0800, Terence Parr wrote:
>> The #(...) notation derives from wanting to use parens like LISP but
>> not wanting the ambiguity with (... | ...) alternative subrules. The #
>> was the only character left in ASCII for me to use ;)  I have always
>> not liked it, but now it's ingrained.  That said, I've been thinking 
>> of
>> changing it for ANTLR 3 into
>>
>> ^(root c1 ... cn)
>>
>> in tree parsers and tree construction actions.  There MAY be some
>> ambiguity with the ^ suffix operator, but I think we might wanna try 
>> it
>> out.
>>
>> Anybody have any thoughts?  I like it as it's more intuitive that that
>> is a tree ;)  # is random.
>
> I would be inclined to make the thing target language dependant. For 
> C++
> I've very often contemplated to replace the # with something different 
> in
> order to have no trouble with preprocessor directives. ^ gives 
> conflicts
> with xor operators in the action parser parts. This would mean the 
> action
> parsers would even become bigger messes than they are now. Unless the 
> tree
> operator parts are easy to separate from the target language.

I'm thinking of having a generic imperative language for actions as the 
default so grammars with sym tab actions etc... could be portable.  I 
can handle this properly.  I'm not sure XOR is really that necessary 
directly within the action of a grammar so I'm not really worried.  # 
could be a hassle for C++ though ;)

I'd rather have a standard instead of language dependent stuff also.

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Sat Nov 22 12:48:36 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] Tree transformation
In-Reply-To: <211827281.20031122055857@land.ru>
Message-ID: <3E3A5665-1D2D-11D8-A328-000A95891192@cs.usfca.edu>


On Friday, November 21, 2003, at 06:58 PM, DVLeonid wrote:

> Dear Terr,
>    Could you tell me if there any modern research in compilers area?

Hi.  I'm not sure I'm the right guy to answer that question as I only 
follow parsing/translation stuff.  I'd have to do a google search so 
I'll leave that to you...sorry. ;)

Terence
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From dvleonid at land.ru  Sat Nov 22 13:16:45 2003
From: dvleonid at land.ru (DVLeonid)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] Tree transformation
In-Reply-To: <3E3A5665-1D2D-11D8-A328-000A95891192@cs.usfca.edu>
References: <211827281.20031122055857@land.ru>
 <3E3A5665-1D2D-11D8-A328-000A95891192@cs.usfca.edu>
Message-ID: <19016132859.20031123001645@land.ru>

Hello Terence,

I've already tried, but it seems that all researchs in this area
run out :/ Some specific research in natural languages, but I don't
like it. The mankind didn't yet understand what can be in human
brains, but already try to recognize it :///
Thanks, however.


TP> On Friday, November 21, 2003, at 06:58 PM, DVLeonid wrote:

>> Dear Terr,
>>    Could you tell me if there any modern research in compilers area?

TP> Hi.  I'm not sure I'm the right guy to answer that question as I only
TP> follow parsing/translation stuff.  I'd have to do a google search so
TP> I'll leave that to you...sorry. ;)

TP> Terence
TP> --
TP> Professor Comp. Sci., University of San Francisco
TP> Creator, ANTLR Parser Generator, http://www.antlr.org
TP> Co-founder, http://www.jguru.com
TP> Co-founder, http://www.knowspam.net enjoy email again!
TP> Co-founder, http://www.peerscope.com pure link sharing




 

TP> Your use of Yahoo! Groups is subject to
TP> http://docs.yahoo.com/info/terms/ 




-- 
Best regards,
 DVLeonid                            mailto:dvleonid@land.ru


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From heartstalks at yahoo.com  Sun Nov 23 14:07:26 2003
From: heartstalks at yahoo.com (heartstalks)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] bnf grammar
Message-ID: <bprb2u+e9v2@eGroups.com>

hello 

any one can help me to understand bnf grammar?

what is the meaning of 

f::= f|-f|f=>f

m[f1=>f2]=m[f1] v M[f2]


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pete.forman at westerngeco.com  Mon Nov 24 03:20:54 2003
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] antlr 3 unicode support
In-Reply-To: <20031122155656.A20601@cs.utwente.nl>
References: <"from tmoog"@polhode.com>
 <BBE2EB5E.296A8%sunshine@public.kherson.ua>
 <Pine.NEB.4.58.0311210100110.17334@panix5.panix.com>
Message-ID: <5.1.1.1.2.20031124095714.02356a78@wgmail2.gatwick.eur.slb.com>

At 2003-11-22 15:56 +0100, Ric Klaren wrote:
>Hi,
>
>On Fri, Nov 21, 2003 at 01:06:14AM -0500, Tom Moog wrote:
> > Just to remind you java guys thinking about lexing unicode:
> > unicode doesn't stop at 2**16.  It extends up to 0x10ffff if you
> > want to include music symbols, Babylonian, math style letters,
> > and so on.  For java xml parsers this means using the low order
> > ten bits from two adjacent 16 bit words (surrogate pairs) to
> > reach things above 2**16.
>
>Hmmm this would mean that we would have to deal with unicode decoding
>ourselves in the lexer? And use 32 bit values for the tokens/strings.
>
>So far for C++ I was only looking at making the backend wchar/wstring
>aware, although extending up from there would not be hard with
>templates.

In Java you still need to handle Unicode yourself.  JDK 1.4 is aligned
with Unicode 3.0 which was the last 16 bit (BMP only) version.  You
can get some extra mileage by treating the chars as UTF-16.  That
works if you skip over decoding surrogates and assume that they are
paired correctly.  A bit more effort is needed to discriminate
syntactically within plane 1+.

In C++ wchar_t/wstring may be 8, 16 or 32 bits depending on the
implementation.  To guarantee the width you'd need to roll your own
basic_string<int32_t> or use a library like ICU.  ICU4C has similar
constraints to Java: UnicodeStrings have two elements for each code
point outside plane 0.  It is up to the programmer to maintain
correctness of UTF-16.

-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com          -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon Nov 24 14:42:17 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] C Grammar Status
Message-ID: <72C9789739C4214096AE945753B11EA3FABAAA@mypxmail04.bco-home.com>

You can find more info at http://www.codetransform.com/gcc.html

Intel used it to translate GCC extensions to ANSI C to test their 64 bit
compiler on the linux kernel four years ago.  The AspectC aspect oriented
compiler was at least prototyped on this grammar too.  I have never heard of
a release of the AspectC compiler, though.
http://www.cs.ubc.ca/labs/spl/projects/aspectc.html

I wrote a transformer for Cisco, who the grammar was originally developed
for, to help them profile code by inserting stubs for function entrances and
exits.

Somebody even tried to build a C->Java translator out of it.

I'm not aware of any open source programs based on the grammar, if you find
any let me know.  Hey look what Google found:

http://sarpresults.ivv.nasa.gov/sarpdir/ViewResearch/public/305/244

This doc shows they use my GNUCParser:
http://sarpresults.ivv.nasa.gov/sarp/files/305/Handbook_Tutorial_Porting_Pro
cedure_&_User_Manual_Draft.doc

Cheers,

Monty

-----Original Message-----
From: Zukowski, Monty 
Sent: Monday, November 17, 2003 1:23 PM
To: 'antlr-interest@yahoogroups.com' 
Subject: RE: [antlr-interest] C Grammar Status

I haven't touched it in a while but it's complete to version 2.95 of GCC and
ANSI C89.  I actually wrote a bid for upgrading this grammar to GCC 3.2 and
C99 and have notes on specific features and what it would take to implement
them.

I'm also open to any patches/improvements, and of course I'm available for
consulting on it.

Monty
www.codetransform.com


-----Original Message-----
From: Tom Zagotta [mailto:tzagotta1@sienasystems.com] 
Sent: Saturday, November 15, 2003 2:55 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] C Grammar Status

Dear Group,

Can anyone let me know the status of the GNU C grammar on antlr.org?

I know the C++ grammar on antlr.org is pretty out of date.  I see dates like
1997 on the C grammar, but is it reasonably correct relative to Standard C,
and usable with the current release of ANTLR?

Does anybody have any experience to offer with this grammar?

Thanks in advance,

- Tom


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon Nov 24 14:47:35 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] C Grammar Status
Message-ID: <72C9789739C4214096AE945753B11EA3FABAAB@mypxmail04.bco-home.com>

Hey folks,
	Anybody interested in co-sponsoring an update to the C grammar to
bring it up to C99?  If so drop me a line through my website
www.codetransform.com

Monty

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rene at c3ismc.com  Mon Nov 24 16:15:29 2003
From: rene at c3ismc.com (c3i_smc)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] eclipse plugin and end-of-line detection
Message-ID: <bpu6v1+i477@eGroups.com>

Hi All,

I have a silly problem where I am trying to follow Terrence's 
Introduction... but from within the Eclipse plugin. It seems that 
the "return" is not recognized by ... well ... something. 

I found a reference on JGuru about exactly this problem but it 
doesn't describe the solution. (http://www.jguru.com/forums/view.jsp?
EID=1058094)

Can anybody tell me what I should do to make reading input from the 
Eclipse console work?

Many thanks for any input.

Regards,

     Raynier (Seattle,WA)


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ashish at noida.atrenta.com  Mon Nov 24 19:44:06 2003
From: ashish at noida.atrenta.com (Ashish Aggarwal)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] Working recipe to build antlr in Cygwin environment
References: <bpu6v1+i477@eGroups.com>
Message-ID: <3FC2D005.1020905@noida.atrenta.com>

Hi frends,
   As every new user do face problems in building antlr on windows, 
using cygwin/java/gcc, I (on behalf of our company, atrenta) , would 
like to share with you all this working recipe on "How To Build Antlr On 
Cygwin".

If any one of you have any suggestion for modifications in it, do let me 
know.
Else, I would like the owner of this group , Terence, to kindly put the 
same on the website www.antlr.org

Cheers
Ashish

############################################################################
Here is the working recipe, repeated until it works exactly from a clean 
install every time with no redo
Environment:
Windows 2000:

cygwin:
1.5.5.1
 which has problems with gcc and cpp (and configure fails with)
mingw :
MinGW-3.1.0-1.exe
(do not forget to rename make.exe to mingw32-make.exe, as it cannot cope 
with the ANTLR Makefile!, but the cygwin one can)

path in cygwin to use mingw first
PATH="/mingw/bin:/usr/local/bin:/usr/bin:/bin:$PATH"

java SDK:
j2sdk-1_4_2-nb-3_5_1-bin-windows.exe

antlr:
antlr-2.7.2.tar.gz

1.Untar anltr into a new directory under cygwin <basedir>
{mine is C:\cygwin\redo\antlr-2.7.2, under cycgwin its /redo/antlr-2.7.2}
Do NOT add antlr.jar  to your $CLASSPATH environment, as it is not a 
valid file yet.

2. Note that <basedir>/configure contains an error at
# Java

CLASSPATH=$CLASSPATH:.
 just comment it out, as we set the . in the external CLASSPATH
#CLASSPATH=$CLASSPATH:.

3. set up class path for configure
 note the . in the path
        the ; path seperator
        the windows file format.
      These are because Java j2sdk is a windows application, not a 
cygwin application
export CLASSPATH=".;c:\cygwin\j2sdk1.4.2\lib"

$ echo $CLASSPATH
.;c:\cygwin\j2sdk1.4.2\lib

3. cd <basedir>
   run configure as
./configure --prefix=<basedir>
with base dir in windows format

$ ./configure --prefix=/redo/antlr-2.7.2
...
configure: creating ./config.stat
cconfigure: creating ./config.status
config.status: creating scripts/Config.make
config.status: creating scripts/antlr-config
config.status: creating scripts/run-antlr
$


4. cd scripts & edit the Config.make just created to put the correct 
class path in
# Programs we might use and their options...
# next line commented
#ANTLR    = $(JAVA) -cp $(TOPDIR)/antlrall.jar antlr.Tool
ANTLR    = $(JAVA) -cp "C:\cygwin\redo\antlr-2.7.2" antlr.Tool


5. clear $CLASSPATH (not set it to blank, that does NOT work)
unset CLASSPATH

6. build with NO Classpath
make

$ make
=============================
Making dependencies...
=============================
make[1]: Entering directory `/redo/antlr-2.7.2/antlr'
...
===========================================
Making antlr.jar...
===========================================
===========================================
Making antlr.debug.jar...
===========================================
Building antlr/ANTLRTokdefLexer.java
Building antlr/ANTLRTokdefParser.java
Note: antlr/ANTLRTokdefParser.java uses or overrides a deprecated API.
Note: Recompile with -deprecation for details.
Building antlr/actions/cpp/ActionLexer.java
Building antlr/actions/java/ActionLexer.java
Building antlr/preprocessor/Preprocessor.java
Note: antlr/preprocessor/Preprocessor.java uses or overrides a 
deprecated API.
Note: Recompile with -deprecation for details.
Building antlr/preprocessor/PreprocessorLexer.java
===========================================
Making antlrall.jar...
===========================================

7. Make install with NO Classpath
make install

$ make install
Installing jar files into /redo/antlr-2.7.2/share/antlr-2.7.2
...
Installing config.hpp into /redo/antlr-2.7.2/include/antlr
make[3]: Leaving directory `/redo/antlr-2.7.2/lib/cpp/antlr'
make[2]: Leaving directory `/redo/antlr-2.7.2/lib/cpp'
make[1]: Leaving directory `/redo/antlr-2.7.2/lib'

8. check in antlr-2.7.2/lib for libantlr.a

9. set up class path to run
$ export 
CLASSPATH=".;c\cygwin\j2sdk1.4.2\lib;C:\cygwin\redo\antlr-2.7.2\antlrall.jar" 


10. create test directory
$ mkdir grammars
$ cp examples/cpp/*/*.g grammars
$ cd grammars

11. test
$antlr calc.g

Check for the hpp & cpp files in grammars


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031125/93c261d0/attachment.html
From johnm-antlr at non.net  Mon Nov 24 19:49:49 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] Tree transformation
In-Reply-To: <19016132859.20031123001645@land.ru>
References: <211827281.20031122055857@land.ru>
	<3E3A5665-1D2D-11D8-A328-000A95891192@cs.usfca.edu>
	<19016132859.20031123001645@land.ru>
Message-ID: <16322.53597.294316.69051@despot.non.net>

>>>>> "DVLeonid" == DVLeonid  <dvleonid@land.ru> writes:
[...]

> I've already tried, but it seems that all researchs in this area run out
> :/ Some specific research in natural languages, but I don't like it. The
> mankind didn't yet understand what can be in human brains, but already
> try to recognize it :/// Thanks, however.

Check out the comp.compilers and comp.lang.misc newsgroups.

Go wild,
	John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From johnm-antlr at non.net  Mon Nov 24 20:04:26 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] open-ended speed question: order of magnitude comparison?
In-Reply-To: <Pine.LNX.4.44.0311181824210.4638-100000@charmin.eheart.sg505.net>
References: <Pine.LNX.4.44.0311181824210.4638-100000@charmin.eheart.sg505.net>
Message-ID: <16322.54474.458697.896653@despot.non.net>

>>>>> "Tripp" == Tripp Lilley <tlilley@perspex.com> writes:
[...]

> 	Does anyone have a rough, order of magnitude, back of the envelope,
> rule of thumb, etc. idea about the (runtime, lexing and parsing and
> what-not) speed difference between a parser generated with ANTLR, with
> one of the LALR(1) tools, or by hand (by someone competent but not
> necessarily wizardly)?

Nope.  The language, algorithmic, and then engineering particulars
dominate.  That's the whole point of my mini-rant -- transform the
ugly/ambiguous/etc. cruft into something that you can rock and roll on.

[...]
> 	- As John's post suggests, some languages optimized for easy
> parsing would be... parsed easily :-) which also implies that writing a
> "more" efficient parser would be eas{y,ier}.

Note that the density improvements can be synergistic (down to a base which
is related to the data compressibility limit on the true information that
needs to be communicated) and, IME, there are some large step functions in
there (see my next message :-).

[...]
> Finally, I'm hoping to be able to use the generated parsers to do
> 'realtime' (for some values of "realtime") recognition of instances of
> the languages.

Without control of the language and context, I can't see how you can ever,
a priori, do better than "best effort" (aka "soft-RT").

Hope this helps,
		John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From johnm-antlr at non.net  Mon Nov 24 20:14:43 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] open-ended speed question: order of magnitude comparison?
In-Reply-To: <CA6A0D4C-1ABB-11D8-99AD-000A95891192@cs.usfca.edu>
References: <Pine.LNX.4.44.0311181824210.4638-100000@charmin.eheart.sg505.net>
	<CA6A0D4C-1ABB-11D8-99AD-000A95891192@cs.usfca.edu>
Message-ID: <16322.55091.684436.764856@despot.non.net>

'netiquette nanny says: Top posting is Evil(tm)!

>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
[...]

> is this: the theoretical complexity is linear for ANTLR's basic LL and
> yacc-n-friends LR-based stuff.  So, the thing you're fighting is the
> constant on the front.  That is, how fast can you spin in a for-loop or
> walk thru a state-machine.  Back in the 80's, tom pennello who works with
> deremer (inventor of LALR) did an LALR to x86 machine code generator.
> That damn thing was FAST!

I was tangentially involved with an assembler a long time ago.  It was a
multi-pass macro-assembler for x86 assembly language written in yacc/bison.
It wasn't as fast as we liked (since we had millions of lines of x86
assembly language code -- an entire OS and application suite :-)) so it was
profiled.  Putting in a special case in the read I/O routine so that it
understood and discarded comments all by itself (which, of course, is a
major hack).  Modifying that "constant factor" made the entire translation
on the order of 50% faster (and that was after tuning the base I/O routines
:-).

Take care,
	John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From fernandosalg at hotmail.com  Tue Nov 25 03:47:22 2003
From: fernandosalg at hotmail.com (Fernando Salgueiro)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] some doubs
Message-ID: <Law11-F97hOZ2MGmdNY0000b032@hotmail.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031125/ed41cf55/attachment.html
From mzukowski at yci.com  Tue Nov 25 09:21:49 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] some doubs
Message-ID: <72C9789739C4214096AE945753B11EA3FABAB2@mypxmail04.bco-home.com>

Please read some documentation, such as the lectures available on antlr.org.
These are tree building operators you are talking about.

 

Monty

 

-----Original Message-----
From: Fernando Salgueiro [mailto:fernandosalg@hotmail.com] 
Sent: Tuesday, November 25, 2003 3:47 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] some doubs

 

Someone can explain this ? 

I have some doubts about this piece of code,  for instance 

classDefinition! [AST modifiers]

 what means ! and  [AST modifiers] ? 

{#classDefinition = #(#[CLASS_DEF,"CLASS_DEF"],

 this line i don?t understand !!!!

(piece of code)

 {     classDefinition! [AST modifiers]

        : "class" IDENT

        sc:superClass

        ic:implementsClass

       cb:classBlock

      {#classDefinition = #(#[CLASS_DEF,"CLASS_DEF"],

       modifiers,IDENT,sc,ic,cb);}; 

best regards, 

FERNANDO SALGUEIRO ( UNIVERSITY OF MINHO)




  _____  

MSN Messenger: converse com os seus amigos online. Instale gr?tis. Clique
aqui. <http://g.msn.com/8HMABR/2746??PS=>  
Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service
<http://docs.yahoo.com/info/terms/> . 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031125/2638e9fc/attachment.html
From epovazan at telus.net  Tue Nov 25 15:27:31 2003
From: epovazan at telus.net (Edward Povazan)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] line numbers in errors
Message-ID: <00e301c3b3ab$b2e66910$6601a8c0@Epsilon>

Hello,

Ok, I know that I need a custom AST node if I want to report errors with
line numbers/source file in my tree parser.
The fact that this isn't supported automatically makes me wonder if I am
doing things in the wrong place.
I have my parser parsing my language nicely now.
I want my type checking and other semantic checks in the tree parser.
And then another tree parser generates my code.
I haven't dealt with parsers for a decade - where do you guys put most of
your error checking? Or do you create a custom AST for decent error
messages. If I use the tree parser I will need 2 passes before code
generation. I just don't see it as easy with the parser.

Thanks
-Ed


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Tue Nov 25 17:58:54 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] Working recipe to build antlr in Cygwin environment
In-Reply-To: <3FC2D005.1020905@noida.atrenta.com>
Message-ID: <16CBF9E2-1FB4-11D8-A328-000A95891192@cs.usfca.edu>

Hi Ashish, looks great!  Do you want to upload to antlr.org under  
articles?  Just hit the "add article" button. :)

Also, I can upload a PC binary of ANTLR if you want to the download  
page. :)  Just email it to me.

Terence

On Monday, November 24, 2003, at 07:44 PM, Ashish Aggarwal wrote:

> Hi frends,
> ? ?As every new user do face problems in building antlr on windows,  
> using cygwin/java/gcc, I (on behalf of our company, atrenta) , would  
> like to share with you all this working recipe on "How To Build Antlr  
> On Cygwin".
>
> If any one of you have any suggestion for modifications in it, do let  
> me know.
> Else, I would like the owner of this group , Terence, to kindly put  
> the same on the website www.antlr.org
>
> Cheers
> Ashish
>
> ####################################################################### 
> #####
> Here is the working recipe, repeated until it works exactly from a  
> clean install every time with no redo
> Environment:
> Windows 2000:
>
> cygwin:
> 1.5.5.1
> ?which has problems with gcc and cpp (and configure fails with)
> mingw :
> MinGW-3.1.0-1.exe
> (do not forget to rename make.exe to mingw32-make.exe, as it cannot  
> cope with the ANTLR Makefile!, but the cygwin one can)
>
> path in cygwin to use mingw first
> PATH="/mingw/bin:/usr/local/bin:/usr/bin:/bin:$PATH"
>
> java SDK:
> j2sdk-1_4_2-nb-3_5_1-bin-windows.exe
>
> antlr:
> antlr-2.7.2.tar.gz
>
> 1.Untar anltr into a new directory under cygwin <basedir>
> {mine is C:\cygwin\redo\antlr-2.7.2, under cycgwin its  
> /redo/antlr-2.7.2}
> Do NOT add antlr.jar? to your $CLASSPATH environment, as it is not a  
> valid file yet.
>
> 2. Note that <basedir>/configure contains an error at
> # Java
>
> CLASSPATH=$CLASSPATH:.
> ?just comment it out, as we set the . in the external CLASSPATH
> #CLASSPATH=$CLASSPATH:.
>
> 3. set up class path for configure
> ?note the . in the path
> ??????? the ; path seperator
> ??????? the windows file format.
> ????? These are because Java j2sdk is a windows application, not a  
> cygwin application
> export CLASSPATH=".;c:\cygwin\j2sdk1.4.2\lib"
>
> $ echo $CLASSPATH
> .;c:\cygwin\j2sdk1.4.2\lib
>
> 3. cd <basedir>
> ?? run configure as
> ./configure --prefix=<basedir>
> with base dir in windows format
>
> $ ./configure --prefix=/redo/antlr-2.7.2
> ...
> configure: creating ./config.stat
> cconfigure: creating ./config.status
> config.status: creating scripts/Config.make
> config.status: creating scripts/antlr-config
> config.status: creating scripts/run-antlr
> $
>
>
> 4. cd scripts & edit the Config.make just created to put the correct  
> class path in
> # Programs we might use and their options...
> # next line commented
> #ANTLR??? = $(JAVA) -cp $(TOPDIR)/antlrall.jar antlr.Tool
> ANTLR??? = $(JAVA) -cp "C:\cygwin\redo\antlr-2.7.2" antlr.Tool
>
>
> 5. clear $CLASSPATH (not set it to blank, that does NOT work)
> unset CLASSPATH
>
> 6. build with NO Classpath
> make
>
> $ make
> =============================
> Making dependencies...
> =============================
> make[1]: Entering directory `/redo/antlr-2.7.2/antlr'
> ...
> ===========================================
> Making antlr.jar...
> ===========================================
> ===========================================
> Making antlr.debug.jar...
> ===========================================
> Building antlr/ANTLRTokdefLexer.java
> Building antlr/ANTLRTokdefParser.java
> Note: antlr/ANTLRTokdefParser.java uses or overrides a deprecated API.
> Note: Recompile with -deprecation for details.
> Building antlr/actions/cpp/ActionLexer.java
> Building antlr/actions/java/ActionLexer.java
> Building antlr/preprocessor/Preprocessor.java
> Note: antlr/preprocessor/Preprocessor.java uses or overrides a  
> deprecated API.
> Note: Recompile with -deprecation for details.
> Building antlr/preprocessor/PreprocessorLexer.java
> ===========================================
> Making antlrall.jar...
> ===========================================
>
> 7. Make install with NO Classpath
> make install
>
> $ make install
> Installing jar files into /redo/antlr-2.7.2/share/antlr-2.7.2
> ...
> Installing config.hpp into /redo/antlr-2.7.2/include/antlr
> make[3]: Leaving directory `/redo/antlr-2.7.2/lib/cpp/antlr'
> make[2]: Leaving directory `/redo/antlr-2.7.2/lib/cpp'
> make[1]: Leaving directory `/redo/antlr-2.7.2/lib'
>
> 8. check in antlr-2.7.2/lib for libantlr.a
>
> 9. set up class path to run
> $ export  
> CLASSPATH=".;c\cygwin\j2sdk1.4.2\lib;C:\cygwin\redo\antlr- 
> 2.7.2\antlrall.jar"
>
> 10. create test directory
> $ mkdir grammars
> $ cp examples/cpp/*/*.g grammars
> $ cd grammars
>
> 11. test
> $antlr calc.g
>
> Check for the hpp & cpp files in grammars
>
>
>
> Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service.
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From epovazan at telus.net  Tue Nov 25 23:59:51 2003
From: epovazan at telus.net (Edward Povazan)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] line numbers in errors
References: <00e301c3b3ab$b2e66910$6601a8c0@Epsilon>
Message-ID: <00e801c3b3f3$456aae30$6601a8c0@Epsilon>

Nevermind - I worry about things that always resolve themselves after I post
a message.

----- Original Message -----
From: "Edward Povazan" <epovazan@telus.net>
To: "antlr-interest" <antlr-interest@yahoogroups.com>
Sent: Tuesday, November 25, 2003 3:27 PM
Subject: [antlr-interest] line numbers in errors

--- snip


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From cristian at amiq.ro  Wed Nov 26 00:42:14 2003
From: cristian at amiq.ro (Cristian Amitroaie)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] on parsers look and feel
Message-ID: <200311261042.14501.cristian@amiq.ro>

Hello guys,

Case:
   o sometimes I kind of foreget what name I gave to the "=" token from the 
Lexer (EQ/EQUAL/EQUALS/ASSIGN) when I want to add a new rule to a parser.
   o sometimes I get bored to write LCURLEY instead of "{" or '{'
   o sometimes it's hard for me to follow rules full of SEMI, LCURL(E)?Y, 
LBRACK, LPARENS and so on

For example, I would like to see my parser rules look like:

assign:
        ID "="^ ID ";"!
    ;

I browsed throw the documentation/big examples, yet I couldn't find any 
similar approach as a guideline or something.

Yet, it doesn't seem impossible (see the attached files).

Although the parsers token table won't have a token type attached to "=" (I 
asssume LITERAL_= is not a valid id in almost any language), it reserves a 
number for it. Now importing the parsers vocabulary in the lexer, and leaving 
testLiterals true (default value) it seems that the lexer's token table keeps 
the number from the parser for "=" and adds to it a token type 
(EQUAL/EQ/ASSIGN, oops I don't remember).

Are there any disadvantages/risks related to this approach?

Of course, in the parser, if somebody likes to build new AST nodes using "=", 
it may attach it a token type in the tokens section and use it...

Either I am a maniac, or the parser gramar looks much clearer to me...

And the walkers import the lexers vocabulary (see the attached files).

Or it's just a matter of taste?
Cristian




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: LookLexer.g
Type: text/x-java
Size: 550 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20031126/bd6dc24d/LookLexer.bin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: LookWalker.g
Type: text/x-java
Size: 210 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20031126/bd6dc24d/LookWalker.bin
-------------- next part --------------
ana = mihai;
mihai = maria;
ana = maria;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: LookParser.g
Type: text/x-java
Size: 231 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20031126/bd6dc24d/LookParser.bin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Main.java
Type: text/x-java
Size: 984 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20031126/bd6dc24d/Main.bin
From tom at psy.unsw.edu.au  Wed Nov 26 17:02:53 2003
From: tom at psy.unsw.edu.au (Thomas Brandon)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] Re: on parsers look and feel
In-Reply-To: <200311261042.14501.cristian@amiq.ro>
Message-ID: <bq3ift+h4a6@eGroups.com>

Is that going to work? I think you'll need to have a rule that 
matches those particular characters. Literal matching only happens 
to the match of rules, not to every character on the input stream. 
Having a rule which matched the characters used as literalswould 
mean you'd have to maintain it. So you probably want to add a rule 
that matches all characters that aren't matched in other rules, 
probably just all non alpha-numeric, less maintenance, though you'd 
have to have to have your own literal matching that threw an 
exception if there was no match, or you'd have weird invalid tokens 
coming through. Then there's the issue of making that informative. 
And when something breaks in your parser with handling those it 
could be wierdness related to the literals handling.

As to whether it's better, even without the implementation problems, 
I don't know. True you don't have to remember the token name, but 
only in the parser, so you've got this weird stuff going on in the 
parser, somehow these tokens don't really have labels, you can't do 
this your tree parsers... But I guess it's partly a matter of taste, 
but I'd be worried about how maintainable any code like that is, for 
you and then more so for others.

Tom.
--- In antlr-interest@yahoogroups.com, Cristian Amitroaie 
<cristian@a...> wrote:
> Hello guys,
> 
> Case:
>    o sometimes I kind of foreget what name I gave to the "=" token 
from the 
> Lexer (EQ/EQUAL/EQUALS/ASSIGN) when I want to add a new rule to a 
parser.
>    o sometimes I get bored to write LCURLEY instead of "{" or '{'
>    o sometimes it's hard for me to follow rules full of SEMI, LCURL
(E)?Y, 
> LBRACK, LPARENS and so on
> 
> For example, I would like to see my parser rules look like:
> 
> assign:
>         ID "="^ ID ";"!
>     ;
> 
> I browsed throw the documentation/big examples, yet I couldn't 
find any 
> similar approach as a guideline or something.
> 
> Yet, it doesn't seem impossible (see the attached files).
> 
> Although the parsers token table won't have a token type attached 
to "=" (I 
> asssume LITERAL_= is not a valid id in almost any language), it 
reserves a 
> number for it. Now importing the parsers vocabulary in the lexer, 
and leaving 
> testLiterals true (default value) it seems that the lexer's token 
table keeps 
> the number from the parser for "=" and adds to it a token type 
> (EQUAL/EQ/ASSIGN, oops I don't remember).
> 
> Are there any disadvantages/risks related to this approach?
> 
> Of course, in the parser, if somebody likes to build new AST nodes 
using "=", 
> it may attach it a token type in the tokens section and use it...
> 
> Either I am a maniac, or the parser gramar looks much clearer to 
me...
> 
> And the walkers import the lexers vocabulary (see the attached 
files).
> 
> Or it's just a matter of taste?
> Cristian
> 
> 
> 
> 
> ana = mihai;
> mihai = maria;
> ana = maria;


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ashish at noida.atrenta.com  Wed Nov 26 23:24:02 2003
From: ashish at noida.atrenta.com (Ashish Aggarwal)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] Working recipe to build antlr in Cygwin environment
References: <16CBF9E2-1FB4-11D8-A328-000A95891192@cs.usfca.edu>
Message-ID: <3FC5A692.5080905@noida.atrenta.com>

Skipped content of type multipart/alternative-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031127/1002be76/WorkingRecipeToBuildAntlrOnCygwin.html.htm
From cristian at amiq.ro  Thu Nov 27 04:16:39 2003
From: cristian at amiq.ro (Cristian Amitroaie)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] Re: on parsers look and feel
In-Reply-To: <bq3ift+h4a6@eGroups.com>
References: <bq3ift+h4a6@eGroups.com>
Message-ID: <200311271416.39688.cristian@amiq.ro>

Hi Tom,

> Is that going to work? I think you'll need to have a rule that
> matches those particular characters. Literal matching only happens
> to the match of rules, not to every character on the input stream.

Nothing changes in the way lexer looks. Of course the lexer will have a rule
---
EQUALS: '=';
---

and since it imports parser's vocabulary and tests the literals on this rule 
it will return the right token for "=".

Unfortunatelly you'll have in the tokens table something like:

---
"="=6
";"=7
EQ=8
SEMI=9
---

If you assign a token in the parser to "="

---
tokens {
   ASSIGN="=";
};

than the token table (by Lexer which imports parsers vocabulary) will look 
like:
---
ASSIGN="="=6
";"=7
EQ=8
SEMI=9
---

It's kind of strange indeed...

> Having a rule which matched the characters used as literalswould
> mean you'd have to maintain it. So you probably want to add a rule
> that matches all characters that aren't matched in other rules,
> probably just all non alpha-numeric, less maintenance, though you'd
> have to have to have your own literal matching that threw an
> exception if there was no match, or you'd have weird invalid tokens
> coming through. Then there's the issue of making that informative.

I was thinking about leaving the lexer as it is. Nothing changes there. If 
there is no rule ASSIGN, than the "=" token in the parser vocabulary will 
never show up.

> And when something breaks in your parser with handling those it
> could be wierdness related to the literals handling.

This is what I am interested in. What if something breaks in the parser?
Missing tokens are the only thing that comes to my mind, and missing "=" is 
clearly reported.... Unless I am missing something here...

> True you don't have to remember the token name, but
> only in the parser, so you've got this weird stuff going on in the
> parser, somehow these tokens don't really have labels, you can't do
> this your tree parsers

1) in your tree parsers you may carry on "=" same way as you would carry on 
any literal ("try", "class"...)
2) if you want to create new nodes using the "=" token in the parser, 
apparently you can specify the token for it in the tokens section:

---
tokens {
    ASSIGN="=";
}
---

And it works, even if you get an warning at compile time:

---
ANTLR Parser Generator   Version 2.7.2   1989-2003 jGuru.com
LookWalker.g:14:12: warning:Redefinition of token in tokens {...}: ASSIGN
---

3) anyway, creating nodes like 'a new for loop' in your AST means using 
'LITERAL_for' which is not a very short name to type. 

Ideally one could build a node specifying the string (at least in case of 
literals). Something like #["class"], not limited to #[LITERAL_class] or 
#[LITERAL_class, "class"].

>  But I guess it's partly a matter of taste,
> but I'd be worried about how maintainable any code like that is, for
> you and then more so for others.

This is my concern as well and I guess I'll have to look deeper into this 
before starting (if I'll start) to use this approach.

Thanks,
Cristian

On Thursday 27 November 2003 03:02, Thomas Brandon wrote:
> Is that going to work? I think you'll need to have a rule that
> matches those particular characters. Literal matching only happens
> to the match of rules, not to every character on the input stream.
> Having a rule which matched the characters used as literalswould
> mean you'd have to maintain it. So you probably want to add a rule
> that matches all characters that aren't matched in other rules,
> probably just all non alpha-numeric, less maintenance, though you'd
> have to have to have your own literal matching that threw an
> exception if there was no match, or you'd have weird invalid tokens
> coming through. Then there's the issue of making that informative.
> And when something breaks in your parser with handling those it
> could be wierdness related to the literals handling.
>
> As to whether it's better, even without the implementation problems,
> I don't know. True you don't have to remember the token name, but
> only in the parser, so you've got this weird stuff going on in the
> parser, somehow these tokens don't really have labels, you can't do
> this your tree parsers... But I guess it's partly a matter of taste,
> but I'd be worried about how maintainable any code like that is, for
> you and then more so for others.
>
> Tom.
> --- In antlr-interest@yahoogroups.com, Cristian Amitroaie
>
> <cristian@a...> wrote:
> > Hello guys,
> >
> > Case:
> >    o sometimes I kind of foreget what name I gave to the "=" token
>
> from the
>
> > Lexer (EQ/EQUAL/EQUALS/ASSIGN) when I want to add a new rule to a
>
> parser.
>
> >    o sometimes I get bored to write LCURLEY instead of "{" or '{'
> >    o sometimes it's hard for me to follow rules full of SEMI, LCURL
>
> (E)?Y,
>
> > LBRACK, LPARENS and so on
> >
> > For example, I would like to see my parser rules look like:
> >
> > assign:
> >         ID "="^ ID ";"!
> >     ;
> >
> > I browsed throw the documentation/big examples, yet I couldn't
>
> find any
>
> > similar approach as a guideline or something.
> >
> > Yet, it doesn't seem impossible (see the attached files).
> >
> > Although the parsers token table won't have a token type attached
>
> to "=" (I
>
> > asssume LITERAL_= is not a valid id in almost any language), it
>
> reserves a
>
> > number for it. Now importing the parsers vocabulary in the lexer,
>
> and leaving
>
> > testLiterals true (default value) it seems that the lexer's token
>
> table keeps
>
> > the number from the parser for "=" and adds to it a token type
> > (EQUAL/EQ/ASSIGN, oops I don't remember).
> >
> > Are there any disadvantages/risks related to this approach?
> >
> > Of course, in the parser, if somebody likes to build new AST nodes
>
> using "=",
>
> > it may attach it a token type in the tokens section and use it...
> >
> > Either I am a maniac, or the parser gramar looks much clearer to
>
> me...
>
> > And the walkers import the lexers vocabulary (see the attached
>
> files).
>
> > Or it's just a matter of taste?
> > Cristian
> >
> >
> >
> >
> > ana = mihai;
> > mihai = maria;
> > ana = maria;
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From happy_bootie69x12 at yahoo.com  Thu Nov 27 04:43:19 2003
From: happy_bootie69x12 at yahoo.com (happy_bootie69x12)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] Hump Me and Dump Me
Message-ID: <bq4rh7+odtd@eGroups.com>

I'm not looking for love all I want is a man to hump me and dump me! If you're interested meet me in chat at this link.
http://www.tosexme.com/landing.asp?afl=NYHO


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sidier at enst.fr  Thu Nov 27 08:21:14 2003
From: sidier at enst.fr (gsidier)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] Bug in the C# runtime with case- insensitive literals
Message-ID: <bq589q+qg68@eGroups.com>

Hi,

There appears to be a bug in ANLTR/C# when asking the lexer for case-
insensitive literals -- one never gets them !

The source of the error seems to be this line :

CSharpCodeGenerator.java : line # 1253
println("literals = new Hashtable(new 
System.Collections.CaseInsensitiveHashCodeProvider(), null);");


which should be changed to:
println("literals = new Hashtable(new 
System.Collections.CaseInsensitiveHashCodeProvider(), new 
System.Collections.CaseInsensitiveComparer());");

That is to say, the C# code generated for the literals hashtable is 

literals = new Hashtable(new 
System.Collections.CaseInsensitiveHashCodeProvider(), null);

when it should be

literals = new Hashtable(new 
System.Collections.CaseInsensitiveHashCodeProvider(), new 
System.Collections.CaseInsensitiveComparer());

as explained on the Microsoft help page for 
CaseInsensitiveHashCodeProvider (you can look it up on MSDN).

Doing this works for me -- has anyone else stumbled across this 
problem ?


Thanks,
Gregory Sidier.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tigress_ontheprowl2 at yahoo.com  Thu Nov 27 10:22:12 2003
From: tigress_ontheprowl2 at yahoo.com (tigress_ontheprowl2)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] Make these women prrrr
Message-ID: <bq5fck+1ku3@eGroups.com>

http://www.allthepersonals.com/landing.asp?afl=TYHO


A top notch dating site with more than just boring profiles like those other little dating sites.  This is a massive undertaking and a company that takes Adult Dating seriously.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Thu Nov 27 12:10:03 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] Re: Bug in the C# runtime with case- insensitive literals
In-Reply-To: <bq589q+qg68@eGroups.com>
Message-ID: <bq5lmr+rn7m@eGroups.com>

--- In antlr-interest@yahoogroups.com, "gsidier" <sidier@e...> wrote:
> Hi,
> 
> There appears to be a bug in ANLTR/C# when asking the lexer for case-
> insensitive literals -- one never gets them !

Oh dear!  ;-)

> The source of the error seems to be this line :
> 
> CSharpCodeGenerator.java : line # 1253
> println("literals = new Hashtable(new 
> System.Collections.CaseInsensitiveHashCodeProvider(), null);");

<SNIP>

> Doing this works for me -- has anyone else stumbled across this 
> problem ?

Yes and thanks for the report.

This issue has already been fixed. An update to the C# codegen and
runtime for ANTLR 2.7.2 can be found on the ANTLR website:

http://www.antlr.org/share/1057353989224/antlr-2.7.2-CSharp-SP1.zip

Cheers,

Micheal
ANTLR/C#



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From nijesh at noida.hcltech.com  Thu Nov 27 23:07:27 2003
From: nijesh at noida.hcltech.com (Nijesh Panchratna, Noida)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] Re: Bug in the C# runtime with case- insensi
	tive literals
Message-ID: <1B3885BC15C7024C845AAC78314766C5012E9C55@EXCH-01>

Hi!!!! am new to antlr.
what is the difference in ()* and ()+ ??
thanks in advance.
-----Original Message-----
From: micheal_jor [mailto:open.zone@virgin.net]
Sent: Friday, November 28, 2003 1:40 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Bug in the C# runtime with case-
insensitive literals


--- In antlr-interest@yahoogroups.com, "gsidier" <sidier@e...> wrote:
> Hi,
> 
> There appears to be a bug in ANLTR/C# when asking the lexer for case-
> insensitive literals -- one never gets them !

Oh dear!  ;-)

> The source of the error seems to be this line :
> 
> CSharpCodeGenerator.java : line # 1253
> println("literals = new Hashtable(new 
> System.Collections.CaseInsensitiveHashCodeProvider(), null);");

<SNIP>

> Doing this works for me -- has anyone else stumbled across this 
> problem ?

Yes and thanks for the report.

This issue has already been fixed. An update to the C# codegen and
runtime for ANTLR 2.7.2 can be found on the ANTLR website:

http://www.antlr.org/share/1057353989224/antlr-2.7.2-CSharp-SP1.zip

Cheers,

Micheal
ANTLR/C#



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Fri Nov 28 01:10:28 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] Re: Bug in the C# runtime with case- insensitive literals
In-Reply-To: <1B3885BC15C7024C845AAC78314766C5012E9C55@EXCH-01>
Message-ID: <001d01c3b58f$776f9ce0$00cf090a@oddi.is>

Hello Nijesh.

It's the same as for regular expressions, ()* matches zero or more of
whatever is inside the (), and ()+ matches one or more (i.e. with + at
least one item is required).

You should really read the fine manual at
http://www.antlr.org/doc/index.html, I have recently begun using ANTLR
as well and I found the manual to be very helpful and easy to read.

Arnar

> -----Original Message-----
> From: Nijesh Panchratna, Noida [mailto:nijesh@noida.hcltech.com] 
> Sent: 28. n?vember 2003 07:07
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Re: Bug in the C# runtime with 
> case- insensitive literals
> 
> 
> Hi!!!! am new to antlr.
> what is the difference in ()* and ()+ ??
> thanks in advance.
> -----Original Message-----
> From: micheal_jor [mailto:open.zone@virgin.net]
> Sent: Friday, November 28, 2003 1:40 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: Bug in the C# runtime with case-
> insensitive literals
> 
> 
> --- In antlr-interest@yahoogroups.com, "gsidier" <sidier@e...> wrote:
> > Hi,
> > 
> > There appears to be a bug in ANLTR/C# when asking the lexer 
> for case-
> > insensitive literals -- one never gets them !
> 
> Oh dear!  ;-)
> 
> > The source of the error seems to be this line :
> > 
> > CSharpCodeGenerator.java : line # 1253
> > println("literals = new Hashtable(new 
> > System.Collections.CaseInsensitiveHashCodeProvider(), null);");
> 
> <SNIP>
> 
> > Doing this works for me -- has anyone else stumbled across this 
> > problem ?
> 
> Yes and thanks for the report.
> 
> This issue has already been fixed. An update to the C# codegen and
> runtime for ANTLR 2.7.2 can be found on the ANTLR website:
> 
http://www.antlr.org/share/1057353989224/antlr-2.7.2-CSharp-SP1.zip

Cheers,

Micheal
ANTLR/C#



 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Fri Nov 28 06:18:30 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] on parsers look and feel
In-Reply-To: <200311261042.14501.cristian@amiq.ro>; from cristian@amiq.ro on Wed, Nov 26, 2003 at 10:42:14AM +0200
References: <200311261042.14501.cristian@amiq.ro>
Message-ID: <20031128151830.E20938@cs.utwente.nl>

On Wed, Nov 26, 2003 at 10:42:14AM +0200, Cristian Amitroaie wrote:
>    o sometimes I kind of foreget what name I gave to the "=" token from the 
> Lexer (EQ/EQUAL/EQUALS/ASSIGN) when I want to add a new rule to a parser.
>    o sometimes I get bored to write LCURLEY instead of "{" or '{'
>    o sometimes it's hard for me to follow rules full of SEMI, LCURL(E)?Y, 
> LBRACK, LPARENS and so on
> 
> For example, I would like to see my parser rules look like:
> 
> assign:
>         ID "="^ ID ";"!
>     ;
> I browsed throw the documentation/big examples, yet I couldn't find any 
> similar approach as a guideline or something.
>
> Are there any disadvantages/risks related to this approach?

As long as you keep things well synchronized you'll be ok. Easiest (in my
experience) is to 'incrementally' build your tokens with
export/importvocabs. I personally already start doing this 'trick' in the
lexer so after that I can use in parser and treewalkers the real token in
stead of some enumerated value (e.g."=" in stead of ASSIGN).

Basically I repeat in the tokens section of the lexer the strings used when
matching in the rules.

class Example_Lexer extends Lexer;
options {
	k = 2;
	charVocabulary= '\u0000' .. '\u00FF';
	// Settings for literal matching
	caseSensitiveLiterals = false;	// case matters!
	testLiterals = false;
	defaultErrorHandler = true;
	exportVocab = Lexer_;
}
tokens { /*{{{*/
	MCONST="const";   // matched via IDENTIFIER rule
	MEXTERN="extern"; // use M<id> here to prevent clashes with some
<.snip.>             // and often used defines (Tcl/Tk to name one)
   BOR="|";          // duplicated from rules so I can use "|" in parser
	NOT_OP="!";
<.snip.>
   GE_OP=">=";
<.snip.>
	AT="@";
	HASH="#";
	INT;
	FLOAT;
	STRING;
	IDENTIFIER;
	/*}}}*/
}

protected EXPONENT_PART:	( 'e' | 'E' ) ( '+' | '-' )? ('0'..'9')+ ;
protected FLOAT_SUFFIX: ('F'|'f'|'L'|'l') ;

DOT_OR_DOTDOT:
	".."	{ $setType(DOTDOT); }
|	'.'	{ $setType(DOT); }
;

NUMERIC:
	('0'..'9')+	{ $setType(INT); }
	(
	|	{ LA(2) >= '0' && LA(2) <= '9' }? '.' ('0'..'9')+ (EXPONENT_PART)? (FLOAT_SUFFIX)? { $setType(FLOAT); }
	|	EXPONENT_PART (FLOAT_SUFFIX)?  { $setType(FLOAT); }
	|	FLOAT_SUFFIX  { $setType(FLOAT); }
	)
;

IDENTIFIER options { testLiterals = true; }:
	( 'a' .. 'z' | 'A' .. 'Z' | '_' )
	( 'a' .. 'z' | 'A' .. 'Z' | '0'..'9' | '_' | '#' )*
;

NOT_OP:		"!";
QUESTION:	"?";
AND_OP:		"&&";
OR_OP:		"||";
EQ_OP:		"==";
NE_OP:		"!=";
LT_OP:		"<";
GT_OP:		">";
LE_OP:		"<=";
GE_OP:		">=";
PLUS:			"+";
MINUS:		"-";
MULT:			"*";
AMPERSAND:	"&";
BOR:			"|";
EOR:			"^";
MOD:			"%";

SHIFTR_OR_ASGN:	">>" { $setType(SHIFTR); } ( "=" { $setType(SR_ASSIGN); } )?;
SHIFTL_OR_ASGN:	"<<" { $setType(SHIFTL); } ( "=" { $setType(SL_ASSIGN); } )?;

COMMA:			",";
ASSIGN:			"=";
PLUS_ASSIGN:	"+=";
MINUS_ASSIGN:	"-=";
MULT_ASSIGN:	"*=";
DIV_ASSIGN:		"/=";
MOD_ASSIGN:		"%=";
BAND_ASSIGN:	"&=";
BXOR_ASSIGN:	"^=";
BOR_ASSIGN:		"|=";
ASSIGN_START:	"{=";
ASSIGN_END:		"=}";
LBRACE:			"(";
RBRACE:			")";
LCURL:			"{";
RCURL:			"}";
LBRACKET:		"[";
RBRACKET:		"]";
DCOLON:			"::";
COLON:			":";
SEMICOLON:		";";
AT:				"@";
HASH:				"#";
------snip----

Another approach is to make you xxxTokenTypes.txt and .hpp/.java yourself
and import that one into all lexer/parser/treeparsers.

> And the walkers import the lexers vocabulary (see the attached files).

I always import from the lexer/parser/treewalker one stage below in the
hierarchy. So: lexer exports to parser exports to treewalker exports to
treewalker exports to treewalker etc. That way you'll always be sure to
import tokens that were introduced in the stage below.

> Or it's just a matter of taste?

It might well be :)

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Chaos often breeds life, when order breeds habit.
  --- Henry B. Adams, The Education of Henry Adams


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From cristian at amiq.ro  Fri Nov 28 07:57:39 2003
From: cristian at amiq.ro (Cristian Amitroaie)
Date: Mon Dec 20 16:16:09 2004
Subject: [antlr-interest] on parsers look and feel + #["="]
In-Reply-To: <20031128151830.E20938@cs.utwente.nl>
References: <200311261042.14501.cristian@amiq.ro> <20031128151830.E20938@cs.utwente.nl>
Message-ID: <200311281757.39464.cristian@amiq.ro>

Hi Ric,

On Friday 28 November 2003 16:18, Ric Klaren wrote:
> On Wed, Nov 26, 2003 at 10:42:14AM +0200, Cristian Amitroaie wrote:
> >    o sometimes I kind of foreget what name I gave to the "=" token from
> > the Lexer (EQ/EQUAL/EQUALS/ASSIGN) when I want to add a new rule to a
> > parser. o sometimes I get bored to write LCURLEY instead of "{" or '{' o
> > sometimes it's hard for me to follow rules full of SEMI, LCURL(E)?Y,
> > LBRACK, LPARENS and so on
> >
> > For example, I would like to see my parser rules look like:
> >
> > assign:
> >         ID "="^ ID ";"!
> >     ;
> > I browsed throw the documentation/big examples, yet I couldn't find any
> > similar approach as a guideline or something.
> >
> > Are there any disadvantages/risks related to this approach?
>
> As long as you keep things well synchronized you'll be ok. Easiest (in my
> experience) is to 'incrementally' build your tokens with
> export/importvocabs. I personally already start doing this 'trick' in the
> lexer so after that I can use in parser and treewalkers the real token in
> stead of some enumerated value (e.g."=" in stead of ASSIGN).
>
> Basically I repeat in the tokens section of the lexer the strings used when
> matching in the rules.

Yes it works fine, thanks for the suggestion. 

I am also a fan of importing vocabs lexer -> parser -> walker way, yet I had a 
lot of trouble with a language containing many keywords and I almost always 
foregot to add the new literal to lexer's token table, hence now I am 
considering importing the parser's vocab into the lexer. 

Even doing so, your sollution still applies, thanks.

We still have an issue, that is #[] constructs when building ASTs. It's not 
straightforward. You need to write #[EQ, "="]. Why not #["="]? Afterall antlr 
computes a token table with enum_type/string/numbers associations...

Maybe we should ask Terr for an enhancement?

>
> class Example_Lexer extends Lexer;
> options {
> 	k = 2;
> 	charVocabulary= '\u0000' .. '\u00FF';
> 	// Settings for literal matching
> 	caseSensitiveLiterals = false;	// case matters!
> 	testLiterals = false;
> 	defaultErrorHandler = true;
> 	exportVocab = Lexer_;
> }
> tokens { /*{{{*/
> 	MCONST="const";   // matched via IDENTIFIER rule
> 	MEXTERN="extern"; // use M<id> here to prevent clashes with some
> <.snip.>             // and often used defines (Tcl/Tk to name one)
>    BOR="|";          // duplicated from rules so I can use "|" in parser
> 	NOT_OP="!";
> <.snip.>
>    GE_OP=">=";
> <.snip.>
> 	AT="@";
> 	HASH="#";
> 	INT;
> 	FLOAT;
> 	STRING;
> 	IDENTIFIER;
> 	/*}}}*/
> }
>
> protected EXPONENT_PART:	( 'e' | 'E' ) ( '+' | '-' )? ('0'..'9')+ ;
> protected FLOAT_SUFFIX: ('F'|'f'|'L'|'l') ;
>
> DOT_OR_DOTDOT:
> 	".."	{ $setType(DOTDOT); }
>
> |	'.'	{ $setType(DOT); }
>
> ;
>
> NUMERIC:
> 	('0'..'9')+	{ $setType(INT); }
> 	(
>
> 	|	{ LA(2) >= '0' && LA(2) <= '9' }? '.' ('0'..'9')+ (EXPONENT_PART)?
> 	| (FLOAT_SUFFIX)? { $setType(FLOAT); } EXPONENT_PART (FLOAT_SUFFIX)?  {
> 	| $setType(FLOAT); }
> 	|	FLOAT_SUFFIX  { $setType(FLOAT); }
>
> 	)
> ;
>
> IDENTIFIER options { testLiterals = true; }:
> 	( 'a' .. 'z' | 'A' .. 'Z' | '_' )
> 	( 'a' .. 'z' | 'A' .. 'Z' | '0'..'9' | '_' | '#' )*
> ;
>
> NOT_OP:		"!";
> QUESTION:	"?";
> AND_OP:		"&&";
> OR_OP:		"||";
> EQ_OP:		"==";
> NE_OP:		"!=";
> LT_OP:		"<";
> GT_OP:		">";
> LE_OP:		"<=";
> GE_OP:		">=";
> PLUS:			"+";
> MINUS:		"-";
> MULT:			"*";
> AMPERSAND:	"&";
> BOR:			"|";
> EOR:			"^";
> MOD:			"%";
>
> SHIFTR_OR_ASGN:	">>" { $setType(SHIFTR); } ( "=" { $setType(SR_ASSIGN); }
> )?; SHIFTL_OR_ASGN:	"<<" { $setType(SHIFTL); } ( "=" { $setType(SL_ASSIGN);
> } )?;
>
> COMMA:			",";
> ASSIGN:			"=";
> PLUS_ASSIGN:	"+=";
> MINUS_ASSIGN:	"-=";
> MULT_ASSIGN:	"*=";
> DIV_ASSIGN:		"/=";
> MOD_ASSIGN:		"%=";
> BAND_ASSIGN:	"&=";
> BXOR_ASSIGN:	"^=";
> BOR_ASSIGN:		"|=";
> ASSIGN_START:	"{=";
> ASSIGN_END:		"=}";
> LBRACE:			"(";
> RBRACE:			")";
> LCURL:			"{";
> RCURL:			"}";
> LBRACKET:		"[";
> RBRACKET:		"]";
> DCOLON:			"::";
> COLON:			":";
> SEMICOLON:		";";
> AT:				"@";
> HASH:				"#";
> ------snip----
>
> Another approach is to make you xxxTokenTypes.txt and .hpp/.java yourself
> and import that one into all lexer/parser/treeparsers.
>
> > And the walkers import the lexers vocabulary (see the attached files).
>
> I always import from the lexer/parser/treewalker one stage below in the
> hierarchy. So: lexer exports to parser exports to treewalker exports to
> treewalker exports to treewalker etc. That way you'll always be sure to
> import tokens that were introduced in the stage below.
>
> > Or it's just a matter of taste?
>
> It might well be :)
>
> Cheers,
>
> Ric


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From cristian at amiq.ro  Fri Nov 28 08:22:14 2003
From: cristian at amiq.ro (Cristian Amitroaie)
Date: Mon Dec 20 16:16:10 2004
Subject: [antlr-interest] on parsers look and feel + #["="]
In-Reply-To: <200311281757.39464.cristian@amiq.ro>
References: <200311261042.14501.cristian@amiq.ro> <20031128151830.E20938@cs.utwente.nl> <200311281757.39464.cristian@amiq.ro>
Message-ID: <200311281822.14481.cristian@amiq.ro>

Oops,

On Friday 28 November 2003 17:57, Cristian Amitroaie wrote:
> Hi Ric,
>
> On Friday 28 November 2003 16:18, Ric Klaren wrote:
> > On Wed, Nov 26, 2003 at 10:42:14AM +0200, Cristian Amitroaie wrote:
> > >    o sometimes I kind of foreget what name I gave to the "=" token from
> > > the Lexer (EQ/EQUAL/EQUALS/ASSIGN) when I want to add a new rule to a
> > > parser. o sometimes I get bored to write LCURLEY instead of "{" or '{'
> > > o sometimes it's hard for me to follow rules full of SEMI, LCURL(E)?Y,
> > > LBRACK, LPARENS and so on
> > >
> > > For example, I would like to see my parser rules look like:
> > >
> > > assign:
> > >         ID "="^ ID ";"!
> > >     ;
> > > I browsed throw the documentation/big examples, yet I couldn't find any
> > > similar approach as a guideline or something.
> > >
> > > Are there any disadvantages/risks related to this approach?
> >
> > As long as you keep things well synchronized you'll be ok. Easiest (in my
> > experience) is to 'incrementally' build your tokens with
> > export/importvocabs. I personally already start doing this 'trick' in the
> > lexer so after that I can use in parser and treewalkers the real token in
> > stead of some enumerated value (e.g."=" in stead of ASSIGN).
> >
> > Basically I repeat in the tokens section of the lexer the strings used
> > when matching in the rules.
>
> Yes it works fine, thanks for the suggestion.
>
> I am also a fan of importing vocabs lexer -> parser -> walker way, yet I
> had a lot of trouble with a language containing many keywords and I almost
> always foregot to add the new literal to lexer's token table, hence now I
> am considering importing the parser's vocab into the lexer.
>
> Even doing so, your sollution still applies, thanks.

With these (already mentioned somewhre in this thread) warnings:

LookLexer.g:14:8: warning:Redefinition of token in tokens {...}: EQ
LookLexer.g:15:10: warning:Redefinition of token in tokens {...}: SEMI

>
> We still have an issue, that is #[] constructs when building ASTs. It's not
> straightforward. You need to write #[EQ, "="]. Why not #["="]? Afterall
> antlr computes a token table with enum_type/string/numbers associations...
>
> Maybe we should ask Terr for an enhancement?
>
> > class Example_Lexer extends Lexer;
> > options {
> > 	k = 2;
> > 	charVocabulary= '\u0000' .. '\u00FF';
> > 	// Settings for literal matching
> > 	caseSensitiveLiterals = false;	// case matters!
> > 	testLiterals = false;
> > 	defaultErrorHandler = true;
> > 	exportVocab = Lexer_;
> > }
> > tokens { /*{{{*/
> > 	MCONST="const";   // matched via IDENTIFIER rule
> > 	MEXTERN="extern"; // use M<id> here to prevent clashes with some
> > <.snip.>             // and often used defines (Tcl/Tk to name one)
> >    BOR="|";          // duplicated from rules so I can use "|" in parser
> > 	NOT_OP="!";
> > <.snip.>
> >    GE_OP=">=";
> > <.snip.>
> > 	AT="@";
> > 	HASH="#";
> > 	INT;
> > 	FLOAT;
> > 	STRING;
> > 	IDENTIFIER;
> > 	/*}}}*/
> > }
> >
> > protected EXPONENT_PART:	( 'e' | 'E' ) ( '+' | '-' )? ('0'..'9')+ ;
> > protected FLOAT_SUFFIX: ('F'|'f'|'L'|'l') ;
> >
> > DOT_OR_DOTDOT:
> > 	".."	{ $setType(DOTDOT); }
> >
> > |	'.'	{ $setType(DOT); }
> >
> > ;
> >
> > NUMERIC:
> > 	('0'..'9')+	{ $setType(INT); }
> > 	(
> >
> > 	|	{ LA(2) >= '0' && LA(2) <= '9' }? '.' ('0'..'9')+ (EXPONENT_PART)?
> > 	| (FLOAT_SUFFIX)? { $setType(FLOAT); } EXPONENT_PART (FLOAT_SUFFIX)?  {
> > 	| $setType(FLOAT); }
> > 	|	FLOAT_SUFFIX  { $setType(FLOAT); }
> >
> > 	)
> > ;
> >
> > IDENTIFIER options { testLiterals = true; }:
> > 	( 'a' .. 'z' | 'A' .. 'Z' | '_' )
> > 	( 'a' .. 'z' | 'A' .. 'Z' | '0'..'9' | '_' | '#' )*
> > ;
> >
> > NOT_OP:		"!";
> > QUESTION:	"?";
> > AND_OP:		"&&";
> > OR_OP:		"||";
> > EQ_OP:		"==";
> > NE_OP:		"!=";
> > LT_OP:		"<";
> > GT_OP:		">";
> > LE_OP:		"<=";
> > GE_OP:		">=";
> > PLUS:			"+";
> > MINUS:		"-";
> > MULT:			"*";
> > AMPERSAND:	"&";
> > BOR:			"|";
> > EOR:			"^";
> > MOD:			"%";
> >
> > SHIFTR_OR_ASGN:	">>" { $setType(SHIFTR); } ( "=" { $setType(SR_ASSIGN); }
> > )?; SHIFTL_OR_ASGN:	"<<" { $setType(SHIFTL); } ( "=" {
> > $setType(SL_ASSIGN); } )?;
> >
> > COMMA:			",";
> > ASSIGN:			"=";
> > PLUS_ASSIGN:	"+=";
> > MINUS_ASSIGN:	"-=";
> > MULT_ASSIGN:	"*=";
> > DIV_ASSIGN:		"/=";
> > MOD_ASSIGN:		"%=";
> > BAND_ASSIGN:	"&=";
> > BXOR_ASSIGN:	"^=";
> > BOR_ASSIGN:		"|=";
> > ASSIGN_START:	"{=";
> > ASSIGN_END:		"=}";
> > LBRACE:			"(";
> > RBRACE:			")";
> > LCURL:			"{";
> > RCURL:			"}";
> > LBRACKET:		"[";
> > RBRACKET:		"]";
> > DCOLON:			"::";
> > COLON:			":";
> > SEMICOLON:		";";
> > AT:				"@";
> > HASH:				"#";
> > ------snip----
> >
> > Another approach is to make you xxxTokenTypes.txt and .hpp/.java yourself
> > and import that one into all lexer/parser/treeparsers.
> >
> > > And the walkers import the lexers vocabulary (see the attached files).
> >
> > I always import from the lexer/parser/treewalker one stage below in the
> > hierarchy. So: lexer exports to parser exports to treewalker exports to
> > treewalker exports to treewalker etc. That way you'll always be sure to
> > import tokens that were introduced in the stage below.
> >
> > > Or it's just a matter of taste?
> >
> > It might well be :)
> >
> > Cheers,
> >
> > Ric
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From easjolly at ix.netcom.com  Fri Nov 28 10:44:51 2003
From: easjolly at ix.netcom.com (dotlessbraille)
Date: Mon Dec 20 16:16:10 2004
Subject: [antlr-interest] Re: on parsers look and feel + #["="]
In-Reply-To: <200311281822.14481.cristian@amiq.ro>
Message-ID: <bq8533+3rcm@eGroups.com>

You can use a custom filter between a lexer and a parser to map the 
token types output by the lexer to anything you want.
Susan J.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Fri Nov 28 13:40:27 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:10 2004
Subject: [antlr-interest] Re: on parsers look and feel
In-Reply-To: <200311261042.14501.cristian@amiq.ro>
Message-ID: <bq8fcb+79kv@eGroups.com>

--- In antlr-interest@yahoogroups.com, Cristian Amitroaie
<cristian@a...> wrote:
> Hello guys,
> 
> Case:
>    o sometimes I kind of foreget what name I gave to the "=" token
from the 
> Lexer (EQ/EQUAL/EQUALS/ASSIGN) when I want to add a new rule to a
parser.
>    o sometimes I get bored to write LCURLEY instead of "{" or '{'
>    o sometimes it's hard for me to follow rules full of SEMI,
LCURL(E)?Y, 
> LBRACK, LPARENS and so on
> 
> For example, I would like to see my parser rules look like:
> 
> assign:
>         ID "="^ ID ";"!
>     ;

<SNIP>

> Are there any disadvantages/risks related to this approach?

<SNIP>

> Or it's just a matter of taste?

Christian,

It might be a taste thing but, there is a difference between a
character (or indeed sequence of characters i.e. string) literal and a
token. The same character/string literal can result in a different
token depending on where/when it appears in the lexers input stream.

Using character/string literals directly in parser/treeparser grammars
can result in a loss of clarity since it is possible that the same
literal repeated in a grammar actually means different things. Quite
apart from the technical issue of how well ANTLR supports the use of
character/string literals is the issue of how well our grammars convey
their intent. They should be designed to be easy to comprehend and
maintain after all.

Ric's idea of adopting a standard "template" and growing from there is
right on the ball IMO.

Cheers,

Micheal
ANTLR/C#



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Sat Nov 29 16:23:32 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:10 2004
Subject: [antlr-interest] woohoo! ParseTrees for free, Debugging for me!
Message-ID: <6DF10ACA-22CB-11D8-A328-000A95891192@cs.usfca.edu>

Howdy,

I just made ANTLR generate parse trees w/o modifying the tool itself.  
I just overrode match(), traceIn(), traceOut() in the parser and turned 
on -traceParser. :)  Not only will it build a parse tree for you to 
look at, it knows how to dump the derivation tree!  This is super great 
thing for debugging big grammars.  The question is always "how is xxx 
being matched? I know it's not right!"  This derivation tool will 
pretty much tell you.  For example, here is the output when I run "int 
i;" into a tinyc example with parse tree construction overrides:

$ java Test < decl.c
parse tree:  ( <program> ( <declaration> ( <variable> ( <type> int ) ( 
<declarator> i ) ; ) ) EOF )
derivation:
     <program>
  => <declaration> EOF
  => <variable> EOF
  => <type> <declarator> ; EOF
  => int <declarator> ; EOF
  => int i ; EOF

pretty cool, n'est-ce pas?  You can see precisely how your input is 
matched by the grammar.

Note: this is what a parse tree is for...not translation.  For that you 
use an AST or token stream rewriting (got something comin on that too). 
:)

I'm going to go to the gym and if I have the energy I'll write up the 
mechanism later and post to ANTLR.org.

Anybody wanna port to C#? ;)  I know somebody that could use it about 
now ;)  Should I roll this into 2.7.3?  Perhaps not as we want to 
quickly get out a bug fix release w/o having to wait for C++ and C# 
implementations...

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Sat Nov 29 22:16:56 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:10 2004
Subject: [antlr-interest] Re: woohoo! ParseTrees for free, Debugging for me!
In-Reply-To: <6DF10ACA-22CB-11D8-A328-000A95891192@cs.usfca.edu>
Message-ID: <bqc20o+6h29@eGroups.com>

Ter--

If I interpret this right, you're actually visualizing parse trees 
without generating them.

Modifying ANTLR to build parse trees is even easier--add the root 
node creation code in genRule (XXXCodeGenerator) and modify refRule 
in DefineGrammarSymbols.java, then adding an option recognizer to 
ParserGrammar.java.  About 10-15 lines total, unless I've missed 
something.  


--Loring


--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
wrote:
> Howdy,
> 
> I just made ANTLR generate parse trees w/o modifying the tool 
itself.  
> I just overrode match(), traceIn(), traceOut() in the parser and 
turned 
> on -traceParser. :)  Not only will it build a parse tree for you 
to 
> look at, it knows how to dump the derivation tree!  This is super 
great 
> thing for debugging big grammars.  The question is always "how is 
xxx 
> being matched? I know it's not right!"  This derivation tool will 
> pretty much tell you.  For example, here is the output when I 
run "int 
> i;" into a tinyc example with parse tree construction overrides:
> 
> $ java Test < decl.c
> parse tree:  ( <program> ( <declaration> ( <variable> ( <type> 
int ) ( 
> <declarator> i ) ; ) ) EOF )
> derivation:
>      <program>
>   => <declaration> EOF
>   => <variable> EOF
>   => <type> <declarator> ; EOF
>   => int <declarator> ; EOF
>   => int i ; EOF
> 
> pretty cool, n'est-ce pas?  You can see precisely how your input 
is 
> matched by the grammar.
> 
> Note: this is what a parse tree is for...not translation.  For 
that you 
> use an AST or token stream rewriting (got something comin on that 
too). 
> :)
> 
> I'm going to go to the gym and if I have the energy I'll write up 
the 
> mechanism later and post to ANTLR.org.
> 
> Anybody wanna port to C#? ;)  I know somebody that could use it 
about 
> now ;)  Should I roll this into 2.7.3?  Perhaps not as we want to 
> quickly get out a bug fix release w/o having to wait for C++ and 
C# 
> implementations...
> 
> Ter
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Sat Nov 29 23:08:38 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:10 2004
Subject: [antlr-interest] Re: woohoo! ParseTrees for free, Debugging for me!
In-Reply-To: <bqc20o+6h29@eGroups.com>
Message-ID: <0521D152-2304-11D8-8875-000393BB647E@cs.usfca.edu>


On Saturday, November 29, 2003, at 10:16  PM, lgcraymer wrote:

> Ter--
>
> If I interpret this right, you're actually visualizing parse trees
> without generating them.

Nope, i build parse trees and then rewalk them to get step i of 
derivation.  You can ask for any intermediate step or all of 'em :)

> Modifying ANTLR to build parse trees is even easier--add the root
> node creation code in genRule (XXXCodeGenerator) and modify refRule
> in DefineGrammarSymbols.java, then adding an option recognizer to
> ParserGrammar.java.  About 10-15 lines total, unless I've missed
> something.

Sounds great!  I just wanted something quickly that didn't require 
modifications to ANTLR.  Figured I'd break something ;) and we will 
have a bug release first before features. :)

Ter
>
>
> --Loring
>
>
> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...>
> wrote:
>> Howdy,
>>
>> I just made ANTLR generate parse trees w/o modifying the tool
> itself.
>> I just overrode match(), traceIn(), traceOut() in the parser and
> turned
>> on -traceParser. :)  Not only will it build a parse tree for you
> to
>> look at, it knows how to dump the derivation tree!  This is super
> great
>> thing for debugging big grammars.  The question is always "how is
> xxx
>> being matched? I know it's not right!"  This derivation tool will
>> pretty much tell you.  For example, here is the output when I
> run "int
>> i;" into a tinyc example with parse tree construction overrides:
>>
>> $ java Test < decl.c
>> parse tree:  ( <program> ( <declaration> ( <variable> ( <type>
> int ) (
>> <declarator> i ) ; ) ) EOF )
>> derivation:
>>      <program>
>>   => <declaration> EOF
>>   => <variable> EOF
>>   => <type> <declarator> ; EOF
>>   => int <declarator> ; EOF
>>   => int i ; EOF
>>
>> pretty cool, n'est-ce pas?  You can see precisely how your input
> is
>> matched by the grammar.
>>
>> Note: this is what a parse tree is for...not translation.  For
> that you
>> use an AST or token stream rewriting (got something comin on that
> too).
>> :)
>>
>> I'm going to go to the gym and if I have the energy I'll write up
> the
>> mechanism later and post to ANTLR.org.
>>
>> Anybody wanna port to C#? ;)  I know somebody that could use it
> about
>> now ;)  Should I roll this into 2.7.3?  Perhaps not as we want to
>> quickly get out a bug fix release w/o having to wait for C++ and
> C#
>> implementations...
>>
>> Ter
>> --
>> Professor Comp. Sci., University of San Francisco
>> Creator, ANTLR Parser Generator, http://www.antlr.org
>> Co-founder, http://www.jguru.com
>> Co-founder, http://www.knowspam.net enjoy email again!
>> Co-founder, http://www.peerscope.com pure link sharing
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com link sharing, pure-n-simple




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Sun Nov 30 00:16:35 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:10 2004
Subject: [antlr-interest] Re: woohoo! ParseTrees for free, Debugging for me!
In-Reply-To: <0521D152-2304-11D8-8875-000393BB647E@cs.usfca.edu>
Message-ID: <bqc913+10aq7@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
wrote:
> 
> On Saturday, November 29, 2003, at 10:16  PM, lgcraymer wrote:
> 
> > Ter--
> >
> > If I interpret this right, you're actually visualizing parse 
trees
> > without generating them.
> 
> Nope, i build parse trees and then rewalk them to get step i of 
> derivation.  You can ask for any intermediate step or all of 'em :)

That is impressive, then--you've discovered a whole new approach to 
instrumenting ANTLR.  I assume that you've made the overrides user 
programmable?  It sounds like an approach that might support an 
ANTLR test harness for grammars.

> 
> > Modifying ANTLR to build parse trees is even easier--add the root
> > node creation code in genRule (XXXCodeGenerator) and modify 
refRule
> > in DefineGrammarSymbols.java, then adding an option recognizer to
> > ParserGrammar.java.  About 10-15 lines total, unless I've missed
> > something.
> 
> Sounds great!  I just wanted something quickly that didn't require 
> modifications to ANTLR.  Figured I'd break something ;) and we 
will 
> have a bug release first before features. :)

It's not quite that easy to break ANTLR internals--you have to look 
at them cross-eyed ... :).

--Loring

> Ter
> >
> >
> > --Loring
> >
> >
> > --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...>
> > wrote:
> >> Howdy,
> >>
> >> I just made ANTLR generate parse trees w/o modifying the tool
> > itself.
> >> I just overrode match(), traceIn(), traceOut() in the parser and
> > turned
> >> on -traceParser. :)  Not only will it build a parse tree for you
> > to
> >> look at, it knows how to dump the derivation tree!  This is 
super
> > great
> >> thing for debugging big grammars.  The question is always "how 
is
> > xxx
> >> being matched? I know it's not right!"  This derivation tool 
will
> >> pretty much tell you.  For example, here is the output when I
> > run "int
> >> i;" into a tinyc example with parse tree construction overrides:
> >>
> >> $ java Test < decl.c
> >> parse tree:  ( <program> ( <declaration> ( <variable> ( <type>
> > int ) (
> >> <declarator> i ) ; ) ) EOF )
> >> derivation:
> >>      <program>
> >>   => <declaration> EOF
> >>   => <variable> EOF
> >>   => <type> <declarator> ; EOF
> >>   => int <declarator> ; EOF
> >>   => int i ; EOF
> >>
> >> pretty cool, n'est-ce pas?  You can see precisely how your input
> > is
> >> matched by the grammar.
> >>
> >> Note: this is what a parse tree is for...not translation.  For
> > that you
> >> use an AST or token stream rewriting (got something comin on 
that
> > too).
> >> :)
> >>
> >> I'm going to go to the gym and if I have the energy I'll write 
up
> > the
> >> mechanism later and post to ANTLR.org.
> >>
> >> Anybody wanna port to C#? ;)  I know somebody that could use it
> > about
> >> now ;)  Should I roll this into 2.7.3?  Perhaps not as we want 
to
> >> quickly get out a bug fix release w/o having to wait for C++ and
> > C#
> >> implementations...
> >>
> >> Ter
> >> --
> >> Professor Comp. Sci., University of San Francisco
> >> Creator, ANTLR Parser Generator, http://www.antlr.org
> >> Co-founder, http://www.jguru.com
> >> Co-founder, http://www.knowspam.net enjoy email again!
> >> Co-founder, http://www.peerscope.com pure link sharing
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/
> >
> >
> >
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com link sharing, pure-n-simple


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sunshine at public.kherson.ua  Sun Nov 30 00:24:43 2003
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:16:10 2004
Subject: [antlr-interest] Re: woohoo! ParseTrees for free, Debugging
	for me!
In-Reply-To: <bqc913+10aq7@eGroups.com>
Message-ID: <BBEF75EB.2A139%sunshine@public.kherson.ua>

on 11/30/03 10:16 AM, lgcraymer at lgc@mail1.jpl.nasa.gov wrote:

> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...>
> wrote:
>> 
>> On Saturday, November 29, 2003, at 10:16  PM, lgcraymer wrote:
>> 
>>> Ter--
>>> 
>>> If I interpret this right, you're actually visualizing parse
> trees
>>> without generating them.
>> 
>> Nope, i build parse trees and then rewalk them to get step i of
>> derivation.  You can ask for any intermediate step or all of 'em :)
> 
> That is impressive, then--you've discovered a whole new approach to
> instrumenting ANTLR.  I assume that you've made the overrides user
> programmable?  It sounds like an approach that might support an
> ANTLR test harness for grammars.

I wonder, if this way can help with auto-completion task ?

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Sun Nov 30 10:07:59 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:10 2004
Subject: [antlr-interest] Re: woohoo! ParseTrees for free, Debugging for me!
In-Reply-To: <BBEF75EB.2A139%sunshine@public.kherson.ua>
Message-ID: <21D47AEE-2360-11D8-8875-000393BB647E@cs.usfca.edu>


On Sunday, November 30, 2003, at 12:24  AM, Ruslan Zasukhin wrote:

> on 11/30/03 10:16 AM, lgcraymer at lgc@mail1.jpl.nasa.gov wrote:
>
>> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...>
>> wrote:
>>>
>>> On Saturday, November 29, 2003, at 10:16  PM, lgcraymer wrote:
>>>
>>>> Ter--
>>>>
>>>> If I interpret this right, you're actually visualizing parse
>> trees
>>>> without generating them.
>>>
>>> Nope, i build parse trees and then rewalk them to get step i of
>>> derivation.  You can ask for any intermediate step or all of 'em :)
>>
>> That is impressive, then--you've discovered a whole new approach to
>> instrumenting ANTLR.  I assume that you've made the overrides user
>> programmable?  It sounds like an approach that might support an
>> ANTLR test harness for grammars.
>
> I wonder, if this way can help with auto-completion task ?

Interesting idea, though I suspect that since derivations are specific 
to an input stream using $FIRST and $FOLLOW are more useful.

Terence
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com link sharing, pure-n-simple




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Sun Nov 30 10:07:04 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:10 2004
Subject: [antlr-interest] Re: woohoo! ParseTrees for free, Debugging for me!
In-Reply-To: <bqc913+10aq7@eGroups.com>
Message-ID: <00929BA6-2360-11D8-8875-000393BB647E@cs.usfca.edu>


On Sunday, November 30, 2003, at 12:16  AM, lgcraymer wrote:

> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...>
> wrote:
>>
>> On Saturday, November 29, 2003, at 10:16  PM, lgcraymer wrote:
>>
>>> Ter--
>>>
>>> If I interpret this right, you're actually visualizing parse
> trees
>>> without generating them.
>>
>> Nope, i build parse trees and then rewalk them to get step i of
>> derivation.  You can ask for any intermediate step or all of 'em :)
>
> That is impressive, then--you've discovered a whole new approach to
> instrumenting ANTLR.  I assume that you've made the overrides user
> programmable?

Well, for now it's just an "article" on the website with some sample 
code...later we'd have to allow people to specify their own parse tree 
nodes instead of my simple ones...  As for user programmable, for now, 
you can turn on or off by adding the overrides and turning on/off 
-traceParser.

>   It sounds like an approach that might support an
> ANTLR test harness for grammars.

Heh yeah!  That's a great idea, dude!  Sweet!  This way we can check to 
see if all derivation steps are identical.  Previously, testing parsers 
was really hard as it says yes or no depending on errors; that's all.   
  Answering "yes" is not much of a test as an empty main program gives 
the same answer. ;)  Yeah!  This is the testing harness I've been 
afraid would be extremely difficult!  We've got it, by jove!

The other beauty of my debugging parse tree / derivations is that it 
does not affect code gen in any way, meaning that normal tree 
construction occurs as before.  You can create both parse tree and 
regular AST :)  I'm going to verify that today.

All you have to do is say

class T extends Parser(ParseTreeDebugParser);

rules...

and then turn on -traceParser.  Your parser will answer getParseTree() 
and getLeftmostDerivation(step-number) and getLeftmostDerivation.

The derivation thing is really cool...had to use my brain for about an 
hour to realize that I'm essentially counting the number of subtree 
roots as I do a depth-first to simulate replacements in the derivation 
steps.

The code is very simple and will be posted this morning :)

Man, looking at the derivation tree makes me wonder why I didn't do 
this before.  It makes it completely obvious how input is matched...wow!

Also, the derivation steps begs the question: can we make a simple XSLT 
equivalent that uses a normal human syntax like

replace "if ( <expr> )" with "if ( (int)<expr> )";

or whatever?  Hmm....hell even a global string replace would work on 
each derivation step and then let derivation proceed as normal.  
Interesting...

>>> Modifying ANTLR to build parse trees is even easier--add the root
>>> node creation code in genRule (XXXCodeGenerator) and modify
> refRule
>>> in DefineGrammarSymbols.java, then adding an option recognizer to
>>> ParserGrammar.java.  About 10-15 lines total, unless I've missed
>>> something.
>>
>> Sounds great!  I just wanted something quickly that didn't require
>> modifications to ANTLR.  Figured I'd break something ;) and we
> will
>> have a bug release first before features. :)
>
> It's not quite that easy to break ANTLR internals--you have to look
> at them cross-eyed ... :).

Well, w/o regression tests, I don't trust myself ;)  The ANTLR 3 stuff, 
as you know since you've looked at it, has plenty-o-tests. :)  I'm a 
testing fool nowadays instead of the old academic prototype guy I was. 
:)

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com link sharing, pure-n-simple




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sunshine at public.kherson.ua  Sun Nov 30 10:24:52 2003
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:16:10 2004
Subject: [antlr-interest] Re: woohoo! ParseTrees for free, Debugging
	for me!
In-Reply-To: <21D47AEE-2360-11D8-8875-000393BB647E@cs.usfca.edu>
Message-ID: <BBF00294.2A178%sunshine@public.kherson.ua>

on 11/30/03 8:07 PM, Terence Parr at parrt@cs.usfca.edu wrote:

>> I wonder, if this way can help with auto-completion task ?
> 
> Interesting idea, though I suspect that since derivations are specific
> to an input stream using $FIRST and $FOLLOW are more useful.

:-)

It will be great to have at least ANY simply example,
How to use ANTLR on this task.

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Sun Nov 30 11:16:05 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:10 2004
Subject: [antlr-interest] Re: woohoo! ParseTrees for free, Debugging for me!
In-Reply-To: <BBF00294.2A178%sunshine@public.kherson.ua>
Message-ID: <A4D1B6D8-2369-11D8-8875-000393BB647E@cs.usfca.edu>


On Sunday, November 30, 2003, at 10:24  AM, Ruslan Zasukhin wrote:

> on 11/30/03 8:07 PM, Terence Parr at parrt@cs.usfca.edu wrote:
>
>>> I wonder, if this way can help with auto-completion task ?
>>
>> Interesting idea, though I suspect that since derivations are specific
>> to an input stream using $FIRST and $FOLLOW are more useful.
>
> :-)
>
> It will be great to have at least ANY simply example,
> How to use ANTLR on this task.

Well, there is nothing automatic I'm afraid.  What one needs is a way 
to trace precisely where in a grammar the parse is at any moment.  Then 
one can ask "what can come next".  This could be auto-generated pretty 
easily I'd say by having ANTLR build a Map from grammar position to 
"next symbols" for every token reference in the grammar.  Then, in 
match() or whatever you'd set a variable called position.  Then you can 
query the Map to figure out what is next.

In the new ANTLR 3 stuff, you could keep around a copy of the grammar 
lookahead automaton so that you could just ask directly "what can come 
next".  Doesn't help you now, but in the future this kind of thing 
should be easy.

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com link sharing, pure-n-simple




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sunshine at public.kherson.ua  Sun Nov 30 13:14:53 2003
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:16:10 2004
Subject: [antlr-interest] Re: woohoo! ParseTrees for free, Debugging
	for me!
In-Reply-To: <A4D1B6D8-2369-11D8-8875-000393BB647E@cs.usfca.edu>
Message-ID: <BBF02A6D.2A186%sunshine@public.kherson.ua>

on 11/30/03 9:16 PM, Terence Parr at parrt@cs.usfca.edu wrote:

>>> 
>>> Interesting idea, though I suspect that since derivations are specific
>>> to an input stream using $FIRST and $FOLLOW are more useful.
>> 
>> :-)
>> 
>> It will be great to have at least ANY simply example,
>> How to use ANTLR on this task.
> 
> Well, there is nothing automatic I'm afraid.  What one needs is a way
> to trace precisely where in a grammar the parse is at any moment.  Then
> one can ask "what can come next".  This could be auto-generated pretty
> easily I'd say by having ANTLR build a Map from grammar position to
> "next symbols" for every token reference in the grammar.  Then, in
> match() or whatever you'd set a variable called position.  Then you can
> query the Map to figure out what is next.
> 
> In the new ANTLR 3 stuff, you could keep around a copy of the grammar
> lookahead automaton so that you could just ask directly "what can come
> next".  Doesn't help you now, but in the future this kind of thing
> should be easy.

Then we will wait for 3.0  :-)

Thank you, Terrence.

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Sun Nov 30 14:14:31 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:10 2004
Subject: [antlr-interest] added article / code for parse trees / derivations
Message-ID: <925821D4-2382-11D8-A328-000A95891192@cs.usfca.edu>

Have fun...

http://www.antlr.org/article/parse.trees/index.tml

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Sun Nov 30 14:17:59 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:10 2004
Subject: [antlr-interest] Working recipe to build antlr in Cygwin environment
In-Reply-To: <3FC5A692.5080905@noida.atrenta.com>
Message-ID: <0E76DAF5-2383-11D8-A328-000A95891192@cs.usfca.edu>

I have fixed the website so your recipe is hosted properly :)

Terence

On Wednesday, November 26, 2003, at 11:24 PM, Ashish Aggarwal wrote:

> Hi terence,
> ? I tried to "add article" titled "Working recipe to build Antlr on 
> Cygwin". But, i failed to upload the corresponding html page corres. 
> to it.
> Please let me know how to do it. Else, if possible, you upload the 
> attached HTML page there.
>
> I hope this will really help a lot of antlr-users to get rid of 
> installation problems.
>
> Best Regards
> Ashish
>
> Terence Parr wrote:
>
> Hi Ashish, looks great!  Do you want to upload to antlr.org under
> articles?  Just hit the "add article" button. :)
>
> Also, I can upload a PC binary of ANTLR if you want to the download
> page. :)  Just email it to me.
>
> Terence
>
> On Monday, November 24, 2003, at 07:44 PM, Ashish Aggarwal wrote:
>
>
>
> Hi frends,
> ? ?As every new user do face problems in building antlr on windows,
> using cygwin/java/gcc, I (on behalf of our company, atrenta) , would
> like to share with you all this working recipe on "How To Build Antlr
> On Cygwin".
>
> If any one of you have any suggestion for modifications in it, do let
> me know.
> Else, I would like the owner of this group , Terence, to kindly put
> the same on the website www.antlr.org
>
> Cheers
> Ashish
>
> #######################################################################
> #####
> Here is the working recipe, repeated until it works exactly from a
> clean install every time with no redo
> Environment:
> Windows 2000:
>
> cygwin:
> 1.5.5.1
> ?which has problems with gcc and cpp (and configure fails with)
> mingw :
> MinGW-3.1.0-1.exe
> (do not forget to rename make.exe to mingw32-make.exe, as it cannot
> cope with the ANTLR Makefile!, but the cygwin one can)
>
> path in cygwin to use mingw first
> PATH="/mingw/bin:/usr/local/bin:/usr/bin:/bin:$PATH"
>
> java SDK:
> j2sdk-1_4_2-nb-3_5_1-bin-windows.exe
>
> antlr:
> antlr-2.7.2.tar.gz
>
> 1.Untar anltr into a new directory under cygwin <basedir>
> {mine is C:\cygwin\redo\antlr-2.7.2, under cycgwin its
> /redo/antlr-2.7.2}
> Do NOT add antlr.jar? to your $CLASSPATH environment, as it is not a
> valid file yet.
>
> 2. Note that <basedir>/configure contains an error at
> # Java
>
> CLASSPATH=$CLASSPATH:.
> ?just comment it out, as we set the . in the external CLASSPATH
> #CLASSPATH=$CLASSPATH:.
>
> 3. set up class path for configure
> ?note the . in the path
> ??????? the ; path seperator
> ??????? the windows file format.
> ????? These are because Java j2sdk is a windows application, not a
> cygwin application
> export CLASSPATH=".;c:\cygwin\j2sdk1.4.2\lib"
>
> $ echo $CLASSPATH
> .;c:\cygwin\j2sdk1.4.2\lib
>
> 3. cd <basedir>
> ?? run configure as
> ./configure --prefix=<basedir>
> with base dir in windows format
>
> $ ./configure --prefix=/redo/antlr-2.7.2
> ...
> configure: creating ./config.stat
> cconfigure: creating ./config.status
> config.status: creating scripts/Config.make
> config.status: creating scripts/antlr-config
> config.status: creating scripts/run-antlr
> $
>
>
> 4. cd scripts & edit the Config.make just created to put the correct
> class path in
> # Programs we might use and their options...
> # next line commented
> #ANTLR??? = $(JAVA) -cp $(TOPDIR)/antlrall.jar antlr.Tool
> ANTLR??? = $(JAVA) -cp "C:\cygwin\redo\antlr-2.7.2" antlr.Tool
>
>
> 5. clear $CLASSPATH (not set it to blank, that does NOT work)
> unset CLASSPATH
>
> 6. build with NO Classpath
> make
>
> $ make
> =============================
> Making dependencies...
> =============================
> make[1]: Entering directory `/redo/antlr-2.7.2/antlr'
> ...
> ===========================================
> Making antlr.jar...
> ===========================================
> ===========================================
> Making antlr.debug.jar...
> ===========================================
> Building antlr/ANTLRTokdefLexer.java
> Building antlr/ANTLRTokdefParser.java
> Note: antlr/ANTLRTokdefParser.java uses or overrides a deprecated API.
> Note: Recompile with -deprecation for details.
> Building antlr/actions/cpp/ActionLexer.java
> Building antlr/actions/java/ActionLexer.java
> Building antlr/preprocessor/Preprocessor.java
> Note: antlr/preprocessor/Preprocessor.java uses or overrides a
> deprecated API.
> Note: Recompile with -deprecation for details.
> Building antlr/preprocessor/PreprocessorLexer.java
> ===========================================
> Making antlrall.jar...
> ===========================================
>
> 7. Make install with NO Classpath
> make install
>
> $ make install
> Installing jar files into /redo/antlr-2.7.2/share/antlr-2.7.2
> ...
> Installing config.hpp into /redo/antlr-2.7.2/include/antlr
> make[3]: Leaving directory `/redo/antlr-2.7.2/lib/cpp/antlr'
> make[2]: Leaving directory `/redo/antlr-2.7.2/lib/cpp'
> make[1]: Leaving directory `/redo/antlr-2.7.2/lib'
>
> 8. check in antlr-2.7.2/lib for libantlr.a
>
> 9. set up class path to run
> $ export
> CLASSPATH=".;c\cygwin\j2sdk1.4.2\lib;C:\cygwin\redo\antlr-
> 2.7.2\antlrall.jar"
>
> 10. create test directory
> $ mkdir grammars
> $ cp examples/cpp/*/*.g grammars
> $ cd grammars
>
> 11. test
> $antlr calc.g
>
> Check for the hpp & cpp files in grammars
>
>
>
> Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service.
>
>
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service.?
>
>
>
> Here is the working recipe, repeated until it works exactly from a 
> clean install every time with no redo.
>
> ?
>
> Environment:
>
>
>
> Windows 2000:
>
>
>
> cygwin:1.5.5.1,?which has problems with gcc and cpp (and configure 
> fails with)
>
> ?
>
> Mingw:MinGW-3.1.0-1.exe
>
> (do not forget to rename make.exe to mingw32-make.exe, as it cannot
>
> cope with the ANTLR Makefile!, but the cygwin one can)
>
>
>
> path in cygwin to use mingw first
>
> PATH="/mingw/bin:/usr/local/bin:/usr/bin:/bin:$PATH"
>
>
>
> java SDK:
>
> j2sdk-1_4_2-nb-3_5_1-bin-windows.exe
>
>
>
> antlr:
>
> antlr-2.7.2.tar.gz
>
>
>
> STEPS TO BUILD:
>
>
>
> 1.Untar anltr into a new directory under cygwin <basedir>
>
> {mine is C:\cygwin\redo\antlr-2.7.2, under cycgwin its?
>
> /redo/antlr-2.7.2}
>
> Do NOT add antlr.jar? to your $CLASSPATH environment, as it is not a?
>
> valid file yet.
>
>
>
> 2. Note that <basedir>/configure contains an error at
>
> # Java
>
>
>
> CLASSPATH=$CLASSPATH:.
>
> ?just comment it out, as we set the. in the external CLASSPATH
>
> #CLASSPATH=$CLASSPATH:.
>
>
>
> 3. set up class path for configure
>
> ?note the. in the path
>
> ??????? the ; path seperator
>
> ??????? the windows file format.
>
> ????? These are because Java j2sdk is a windows application, not a
>
> cygwin application
>
> export CLASSPATH=".;c:\cygwin\j2sdk1.4.2\lib"
>
>
>
> $ echo $CLASSPATH
>
> .;c:\cygwin\j2sdk1.4.2\lib
>
>
>
> 3. cd <basedir>
>
> ?? run configure as
>
> ./configure --prefix=<basedir>
>
> with base dir in windows format
>
>
>
> $ ./configure --prefix=/redo/antlr-2.7.2
>
> ...
>
> configure: creating ./config.stat
>
> cconfigure: creating ./config.status
>
> config.status: creating scripts/Config.make
>
> config.status: creating scripts/antlr-config
>
> config.status: creating scripts/run-antlr
>
> $
>
>
>
>
>
> 4. cd scripts & edit the Config.make just created to put the correct
>
> class path in
>
> # Programs we might use and their options...
>
> # next line commented
>
> #ANTLR??? = $(JAVA) -cp $(TOPDIR)/antlrall.jar antlr.Tool
>
> ANTLR??? = $(JAVA) -cp "C:\cygwin\redo\antlr-2.7.2" antlr.Tool
>
>
>
>
>
> 5. clear $CLASSPATH (not set it to blank, that does NOT work)
>
> unset CLASSPATH
>
>
>
> 6. build with NO Classpath
>
> make
>
>
>
> $ make
>
> =============================
>
> Making dependencies...
>
> =============================
>
> make[1]: Entering directory `/redo/antlr-2.7.2/antlr'
>
> ...
>
> ===========================================
>
> Making antlr.jar...
>
> ===========================================
>
> ===========================================
>
> Making antlr.debug.jar...
>
> ===========================================
>
> Building antlr/ANTLRTokdefLexer.java
>
> Building antlr/ANTLRTokdefParser.java
>
> Note: antlr/ANTLRTokdefParser.java uses or overrides a deprecated API.
>
> Note: Recompile with -deprecation for details.
>
> Building antlr/actions/cpp/ActionLexer.java
>
> Building antlr/actions/java/ActionLexer.java
>
> Building antlr/preprocessor/Preprocessor.java
>
> Note: antlr/preprocessor/Preprocessor.java uses or overrides a
>
> deprecated API.
>
> Note: Recompile with -deprecation for details.
>
> Building antlr/preprocessor/PreprocessorLexer.java
>
> ===========================================
>
> Making antlrall.jar...
>
> ===========================================
>
>
>
> 7. Make install with NO Classpath
>
> make install
>
>
>
> $ make install
>
> Installing jar files into /redo/antlr-2.7.2/share/antlr-2.7.2
>
> ...
>
> Installing config.hpp into /redo/antlr-2.7.2/include/antlr
>
> make[3]: Leaving directory `/redo/antlr-2.7.2/lib/cpp/antlr'
>
> make[2]: Leaving directory `/redo/antlr-2.7.2/lib/cpp'
>
> make[1]: Leaving directory `/redo/antlr-2.7.2/lib'
>
>
>
> 8. check in antlr-2.7.2/lib for libantlr.a
>
>
>
> 9. set up class path to run
>
> $ export?
>
> CLASSPATH=".;c\cygwin\j2sdk1.4.2\lib;C:\cygwin\redo\antlr-
>
> 2.7.2\antlrall.jar"
>
>
>
> 10. create test directory
>
> $ mkdir grammars
>
> $ cp examples/cpp/*/*.g grammars
>
> $ cd grammars
>
>
>
> 11. test
>
> $antlr calc.g
>
>
>
> Check for the hpp & cpp files in grammars
>
> ?
>
> ?
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


