From jsamort at rogers.com  Sat Apr  1 12:06:24 2006
From: jsamort at rogers.com (Scott Amort)
Date: Sat Apr  1 12:06:27 2006
Subject: [antlr-interest] ANTLR and Unit Testing
Message-ID: <1143921984.24502.3.camel@localhost>

Hi All,

I've been working on a C++ compiler project that uses ANTLR generated
code.  I have a working lexer, parser and treewalker and am now
evaluating the best way to integrate some unit testing into my code.  My
current plan is to use the Boost Unit Test Framework, but I'm not yet
100% committed to that.  What I was hoping to discover is what approach
others have gone with in similar situations.  Do many ANTLR users here
use unit testing?  If so, what is your general strategy on approaching
writing your test cases?  And finally, if any does have some specific C
++ examples that I could look at, I would greatly appreciate it.

Thanks very much,
Scott

From sohail at taggedtype.net  Sat Apr  1 12:32:58 2006
From: sohail at taggedtype.net (sohail@taggedtype.net)
Date: Sat Apr  1 12:32:32 2006
Subject: [antlr-interest] ANTLR and Unit Testing
In-Reply-To: <1143921984.24502.3.camel@localhost>
References: <1143921984.24502.3.camel@localhost>
Message-ID: <37715.127.0.0.1.1143923578.squirrel@taggedtype.net>

> Do many ANTLR users here
> use unit testing?  If so, what is your general strategy on approaching
> writing your test cases?  And finally, if any does have some specific C
> ++ examples that I could look at, I would greatly appreciate it.

Yes! Lots of unit testing. Although people's opinions on unit testing
differ quite a bit. Personally, I break my tests down into two types:
parser and code generation tests.

The parser tests have atleast one test for every language feature. For
example if your language allows statements of the form:

int i = j = 1;

I'd make sure that your parser can parse that. I would not advise using a
parse tree and making sure that the parse tree never changes because you
will always change the parse tree (ime).

Then you'd generally take the same test and translate it to C++, compile
and run the results:

int i = j = 1;
assert(j==1);
assert(i==j);

Of course, this test itself assumes that you have asserts and equality
comparisons already working. Thats a tough one. I generally manually made
sure the fundamental components work before I wrote tests like the above.
If you can at a very minimum verify that asserts and equality comparisons
work, you can test loops and stuff in your source language.

I look forward to hearing others responses.

HTH!

Sohail
From rodrigobamboo at gmail.com  Sat Apr  1 14:11:40 2006
From: rodrigobamboo at gmail.com (Rodrigo B. de Oliveira)
Date: Sat Apr  1 14:11:45 2006
Subject: [antlr-interest] ANTLR and Unit Testing
In-Reply-To: <1143921984.24502.3.camel@localhost>
References: <1143921984.24502.3.camel@localhost>
Message-ID: <5917478b0604011411s7942cc2fv4ccd511408c22f16@mail.gmail.com>

On 4/1/06, Scott Amort <jsamort@rogers.com> wrote:
> Hi All,
>

Hi there,

> ...  Do many ANTLR users here
> use unit testing?  If so, what is your general strategy on approaching
> writing your test cases?
> ...

http://boo.codehaus.org/Writing+Tests

Best wishes,
Rodrigo
From Yassin.Chkouri at imag.fr  Mon Apr  3 01:32:51 2006
From: Yassin.Chkouri at imag.fr (Yassin.Chkouri@imag.fr)
Date: Mon Apr  3 01:32:56 2006
Subject: [antlr-interest] ANTLR
Message-ID: <1144053171.4430ddb33c153@webmail.imag.fr>



Hello,
I wrote a code in antlr in a file (g), I have create another file and I wrote a
small program.  and when I execute my program by using the class Main.java, the
console posts these error message (lower part ), but I am sure that there are no
errors neither in the program nor in the code written in antlr. I said can be I
have a problem in the instalation of antlr.
Can you could help me in this point???

here the mmessage of error posted in the console:

parser exception: line 2:10: expecting ':', found ' '
 line 2:10: expecting ':', found ' '
         at BipLexer.nextToken(BipLexer.java:286)
         at antlr.TokenBuffer.fill(TokenBuffer.java:69)
         at antlr.TokenBuffer.LA(TokenBuffer.java:80)
         at antlr.LLkParser.LA(LLkParser.java:52)
         at BipParser.top(BipParser.java:51)
         at Main.parseFile(Main.java:68)
         at Main.doFile(Main.java:53)
         at Main.main(Main.java:20)


Cordially
M.Y.CHKOURI

-------------------------------------------------
envoy? via Webmail/IMAG !

From kalle at snigel.net  Mon Apr  3 02:11:54 2006
From: kalle at snigel.net (karl wettin)
Date: Mon Apr  3 02:09:53 2006
Subject: [antlr-interest] ANTLR
In-Reply-To: <1144053171.4430ddb33c153@webmail.imag.fr>
References: <1144053171.4430ddb33c153@webmail.imag.fr>
Message-ID: <E991F00B-915B-4478-BBFB-4CA6406CEF75@snigel.net>


3 apr 2006 kl. 10.32 skrev Yassin.Chkouri@imag.fr:
>
> Can you could help me in this point???

Please also post the grammar and the text you are parsing.
From Yassin.Chkouri at imag.fr  Mon Apr  3 05:43:28 2006
From: Yassin.Chkouri at imag.fr (Yassin.Chkouri@imag.fr)
Date: Mon Apr  3 05:43:40 2006
Subject: [antlr-interest] ANTLR
Message-ID: <1144068208.443118706eca9@webmail.imag.fr>




Hello,
I wrote a code in antlr in a file (g), I have create another file and I wrote a
small program.  and when I execute my program by using the class Main.java, the
console posts these error message (lower part ), but I am sure that there are no
errors neither in the program nor in the code written in antlr. I said can be I
have a problem in the instalation of antlr.
Can you could help me in this point???

here the mmessage of error posted in the console:

parser exception: line 2:10: expecting ':', found ' '
 line 2:10: expecting ':', found ' '
         at BipLexer.nextToken(BipLexer.java:286)
         at antlr.TokenBuffer.fill(TokenBuffer.java:69)
         at antlr.TokenBuffer.LA(TokenBuffer.java:80)
         at antlr.LLkParser.LA(LLkParser.java:52)
         at BipParser.top(BipParser.java:51)
         at Main.parseFile(Main.java:68)
         at Main.doFile(Main.java:53)
         at Main.main(Main.java:20)
**********************************************************************
The Grammar: 

class BipParser extends Parser;

options {
   k=4; // needed for newline junk
//   buildAST=false;
//   defaultErrorHandler=false;
 }


top :  (compDef)+
   
;


compDef 
  : COMPONENT IDENTIFIER opt_arg CODE END
;

opt_arg   : ( LPAREN (arg_decl_list) RPAREN )? 
		  
;

arg_decl_list : arg_decl (COMMA arg_decl)*
			  
;

arg_decl : type_id IDENTIFIER
;

type_id : IDENTIFIER
		| CPPIDENTIFIER
;

c_code : CODE
;
////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////


class BipLexer extends Lexer;

options {
   k=3; // needed for newline junk
   charVocabulary='\u0000'..'\uFFFF'; // allow UNICODE
//    caseSensitive = false;
//    caseSensitiveLiterals = false;
//	defaultErrorHandler=true;
 }


tokens {
	
	COMPONENT="component";
	END="end";
	BEHAVIOR="behavior";
	STATE="state";
	WITH="with";
	ON="on";
	PROVIDED="provided";
	WHEN="when";
	DO="do";
	TO="to";
	PORT="port";
	DATA="data";
	CONNECTOR="connector";
	EAGER="eager";
	DELAYABLE="delayable";
	LAZY="lazy";
	CONTAINS="contains";
	CLASS="class";
	PRIORITY="priority";
	IF="if";
	ELSE="else";
	INIT="init";
	RENAME="rename";
	COMPLETE="complete";
	INCOMPLETE="incomplete";
	
	
}


LPAREN: '(' ;
RPAREN: ')' ;
CO  : "{#";
CC  : "#}";
LCURLY: '{' ;
RCURLY: '}' ;
COLON:  ':' ;
PLUS  : '+' ;
MINUS : '-' ;
STAR  : '*' ;
SEMI  : ';' ;
COMMA : ',' ;
DOT	  : '.' ;
EQUALS: '=' ;
LT: '<' ;
GT: '>' ;
DIV: '/' ;
POURCENT: '%' ;
CHAPEAU : '^' ;
INTERO  : '!' ;
LBRACKET : '[' ;
RBRACKET : ']' ;
XX : '#' ;

EQ : "==" ;
NE : "!=";
GE : ">=";
LE : "<=";
AND : "&&";
OR : "||";
DPT : "::";

IDENTIFIER :	('a'..'z'|'A'..'Z') ( ('_')? ('a'..'z'|'A'..'Z'|'0'..'9'))*
			exception
          catch [RecognitionException ex] {
            reportError(ex);
			consume();
          }
	;


CODE
	:		
	"{#" (	
			options {
				generateAmbigWarnings=false;
			}
		:
			{ LA(2)!='#' || LA(3) != '}' }? '#'
		|	'\r' '\n'		{newline();}
		|	'\r'			{newline();}
		|	'\n'			{newline();}
		|	~('#'|'\n'|'\r')
		)*  
	"#}"

;
    


CPPIDENTIFIER
  :  IDENTIFIER DPT IDENTIFIER
;
  
LETTER  : ('a'..'z')|('A'..'Z') ;

DIGIT   :  ( '0'..'9' ) ;

ALPHA
  : LETTER IDENTIFIER
;
  
INTEGER 
  :  (DIGIT)+
;
  
REAL
  : INTEGER DOT INTEGER
;



WS
  : ( ' '
    | '\t'
    | '\f'

    // handle newlines
    | ( "\r\n"  // DOS/Windows
      | '\r'    // Macintosh
      | '\n'    // Unix
      )
      // increment the line count in the scanner
      { newline(); }
    )
    { $setType(Token.SKIP); }
  ;




SL_COMMENT
	:	"//"
		(~('\n'|'\r'))* ('\n'|'\r'('\n')?)
		{$setType(Token.SKIP); newline();}
; 

 *************************************************************************
The text are parsing :

component worker 
	
{# printf("xxxxx"); #}
   
end


component Team 
	
end
***************************************************************************

Cordially
M.Y.CHKOURI


-------------------------------------------------
envoy? via Webmail/IMAG !

From mail at martin-probst.com  Mon Apr  3 05:45:24 2006
From: mail at martin-probst.com (Martin Probst)
Date: Mon Apr  3 05:45:28 2006
Subject: [antlr-interest] How get the parsing progress from parser?
In-Reply-To: <20060331122031.741CADCC66@www.antlr.org>
References: <20060331122031.741CADCC66@www.antlr.org>
Message-ID: <443118E4.4050609@martin-probst.com>

> I?ve a C# Parser and I?m runing this as a thread.
> 
> My problem is, I need some feedback from parser (e.g. if parsing process 
> complete)

The easiest way is probably to build a custom InputStream (or whatever 
it is in C#) and have that report progress on InputStream.get() (resp. 
whatever it is in C#). So you get the progress on the input 
file/text/whatever, which should be pretty precise.

Martin
From kalle at snigel.net  Mon Apr  3 07:25:58 2006
From: kalle at snigel.net (karl wettin)
Date: Mon Apr  3 07:23:43 2006
Subject: [antlr-interest] ANTLR
In-Reply-To: <1144068208.443118706eca9@webmail.imag.fr>
References: <1144068208.443118706eca9@webmail.imag.fr>
Message-ID: <B225C6BF-45ED-4A9F-B0DE-29AC866C8375@snigel.net>

3 apr 2006 kl. 14.43 skrev Yassin.Chkouri@imag.fr:


> Can you could help me in this point???
>

I'm still at RTFM-level my self, so I might just make it worse. But  
here we go:


> parser exception: line 2:10: expecting ':', found ' '
>  line 2:10: expecting ':', found ' '
>

"component worker" seems to be row two.

COLON does not seem to be used at all? What happens if you make it  
protected?

Can you try to make a small test grammar that parses nothing but  
COMPONENT IDENTIFIER and see if that isolate the problem?


> here the mmessage of error posted in the console:
>
> parser exception: line 2:10: expecting ':', found ' '
>  line 2:10: expecting ':', found ' '
>          at BipLexer.nextToken(BipLexer.java:286)
>          at antlr.TokenBuffer.fill(TokenBuffer.java:69)
>          at antlr.TokenBuffer.LA(TokenBuffer.java:80)
>          at antlr.LLkParser.LA(LLkParser.java:52)
>          at BipParser.top(BipParser.java:51)
>          at Main.parseFile(Main.java:68)
>          at Main.doFile(Main.java:53)
>          at Main.main(Main.java:20)
> **********************************************************************
> The Grammar:
>
> class BipParser extends Parser;
>
> options {
>    k=4; // needed for newline junk
> //   buildAST=false;
> //   defaultErrorHandler=false;
>  }
>
>
> top :  (compDef)+
>
> ;
>
>
> compDef
>   : COMPONENT IDENTIFIER opt_arg CODE END
> ;
>
> opt_arg   : ( LPAREN (arg_decl_list) RPAREN )?
> 		
> ;
>
> arg_decl_list : arg_decl (COMMA arg_decl)*
> 			
> ;
>
> arg_decl : type_id IDENTIFIER
> ;
>
> type_id : IDENTIFIER
> 		| CPPIDENTIFIER
> ;
>
> c_code : CODE
> ;
> ////////////////////////////////////////////////////////////////////// 
> //
> ////////////////////////////////////////////////////////////////////// 
> /
>
>
> class BipLexer extends Lexer;
>
> options {
>    k=3; // needed for newline junk
>    charVocabulary='\u0000'..'\uFFFF'; // allow UNICODE
> //    caseSensitive = false;
> //    caseSensitiveLiterals = false;
> //	defaultErrorHandler=true;
>  }
>
>
> tokens {
> 	
> 	COMPONENT="component";
> 	END="end";
> 	BEHAVIOR="behavior";
> 	STATE="state";
> 	WITH="with";
> 	ON="on";
> 	PROVIDED="provided";
> 	WHEN="when";
> 	DO="do";
> 	TO="to";
> 	PORT="port";
> 	DATA="data";
> 	CONNECTOR="connector";
> 	EAGER="eager";
> 	DELAYABLE="delayable";
> 	LAZY="lazy";
> 	CONTAINS="contains";
> 	CLASS="class";
> 	PRIORITY="priority";
> 	IF="if";
> 	ELSE="else";
> 	INIT="init";
> 	RENAME="rename";
> 	COMPLETE="complete";
> 	INCOMPLETE="incomplete";
> 	
> 	
> }
>
>
> LPAREN: '(' ;
> RPAREN: ')' ;
> CO  : "{#";
> CC  : "#}";
> LCURLY: '{' ;
> RCURLY: '}' ;
> COLON:  ':' ;
> PLUS  : '+' ;
> MINUS : '-' ;
> STAR  : '*' ;
> SEMI  : ';' ;
> COMMA : ',' ;
> DOT	  : '.' ;
> EQUALS: '=' ;
> LT: '<' ;
> GT: '>' ;
> DIV: '/' ;
> POURCENT: '%' ;
> CHAPEAU : '^' ;
> INTERO  : '!' ;
> LBRACKET : '[' ;
> RBRACKET : ']' ;
> XX : '#' ;
>
> EQ : "==" ;
> NE : "!=";
> GE : ">=";
> LE : "<=";
> AND : "&&";
> OR : "||";
> DPT : "::";
>
> IDENTIFIER :	('a'..'z'|'A'..'Z') ( ('_')?  
> ('a'..'z'|'A'..'Z'|'0'..'9'))*
> 			exception
>           catch [RecognitionException ex] {
>             reportError(ex);
> 			consume();
>           }
> 	;
>
>
> CODE
> 	:		
> 	"{#" (	
> 			options {
> 				generateAmbigWarnings=false;
> 			}
> 		:
> 			{ LA(2)!='#' || LA(3) != '}' }? '#'
> 		|	'\r' '\n'		{newline();}
> 		|	'\r'			{newline();}
> 		|	'\n'			{newline();}
> 		|	~('#'|'\n'|'\r')
> 		)*
> 	"#}"
>
> ;
>
>
>
> CPPIDENTIFIER
>   :  IDENTIFIER DPT IDENTIFIER
> ;
>
> LETTER  : ('a'..'z')|('A'..'Z') ;
>
> DIGIT   :  ( '0'..'9' ) ;
>
> ALPHA
>   : LETTER IDENTIFIER
> ;
>
> INTEGER
>   :  (DIGIT)+
> ;
>
> REAL
>   : INTEGER DOT INTEGER
> ;
>
>
>
> WS
>   : ( ' '
>     | '\t'
>     | '\f'
>
>     // handle newlines
>     | ( "\r\n"  // DOS/Windows
>       | '\r'    // Macintosh
>       | '\n'    // Unix
>       )
>       // increment the line count in the scanner
>       { newline(); }
>     )
>     { $setType(Token.SKIP); }
>   ;
>
>
>
>
> SL_COMMENT
> 	:	"//"
> 		(~('\n'|'\r'))* ('\n'|'\r'('\n')?)
> 		{$setType(Token.SKIP); newline();}
> ;
>
>   
> ********************************************************************** 
> ***
> The text are parsing :
>
> component worker
> 	
> {# printf("xxxxx"); #}
>
> end
>
>
> component Team
> 	
> end
> ********************************************************************** 
> *****
>
> Cordially
> M.Y.CHKOURI
>
>
> -------------------------------------------------
> envoy? via Webmail/IMAG !
>
>
>


From gevik at xs4all.nl  Mon Apr  3 14:09:29 2006
From: gevik at xs4all.nl (Gevik babakhani)
Date: Mon Apr  3 14:09:28 2006
Subject: [antlr-interest] Yacc & Lex to ANTLR
Message-ID: <000001c65762$e634f680$0a01a8c0@gevbook>

Folks,

 

Does anyone any tool that can convert Yacc/Lex to ANTLR?

 

Regards,

Gevik.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060403/679a9e5e/attachment.html
From parrt at cs.usfca.edu  Mon Apr  3 14:18:04 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Apr  3 14:18:07 2006
Subject: [antlr-interest] Yacc & Lex to ANTLR
In-Reply-To: <000001c65762$e634f680$0a01a8c0@gevbook>
References: <000001c65762$e634f680$0a01a8c0@gevbook>
Message-ID: <E2275FCA-097D-4F61-BDB1-913F787098A8@cs.usfca.edu>


On Apr 3, 2006, at 2:09 PM, Gevik babakhani wrote:

> Folks,
>
>
>
> Does anyone any tool that can convert Yacc/Lex to ANTLR?

ANTLRWorks does a good job of refactoring; removing left-recursion  
for example :)
Ter
From owong at castortech.com  Mon Apr  3 14:37:54 2006
From: owong at castortech.com (Oliver Wong)
Date: Mon Apr  3 14:38:02 2006
Subject: [antlr-interest] ANTLR v3 Tree Interface request
Message-ID: <D5F291ABFAB3454D85DB58B747B63982139955@castor-srvr1.castortech.com>

	Not sure if this is the right place to discuss this, but I'd
like to request a change to the org.antlr.runtime.tree.Tree interface
before ANTLR v3 is officially released.

	One of the methods defined in the Tree interface is dupNode().
I'm guessing that the intended behaviour of this method is to duplicate
"this" node only, and not to recursively duplicate the children.
However, this is very inconvenient for me, because my Tree
implementation uses parent-pointers, and if I dupe a node, without
duping its children, then the child would either need to support
pointing to multiple parents, or have its parent-reference be
inconsistent.

	I've looked around at all the usages of dupNode(), and it seems
its always used as part of a recursive descent to duplicate the whole
tree. Is it possible to remove this method from the Tree interface? You
can just have it as an abstract method on
org.antlr.runtime.tree.BaseTree, which looks like the only place that
method is used.

	- Oliver
From andrew.bell.ia at gmail.com  Mon Apr  3 14:48:53 2006
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon Apr  3 14:48:57 2006
Subject: [antlr-interest] Sync lexer/parser state?
Message-ID: <e80abd30604031448i716b0e81g368bbb17679e801d@mail.gmail.com>

Hi,

I am trying to extract the input text that matched an parser rule. 
For instance:

rule : subrule
  {
  // I want the text that matched subrule here.
  }
  ;

I know that I can return a string from subrule, but if subrule has
lots of other complicated subrules, this method is a real pain -- you
have to build up the text at each step.

What I'm trying to do is something like:

rule :
  {
  lexer.mark();
  }
  subrule
  {
  stringIWant = lexer.getMarkedChars();
  lexer.commit();
  }

You can do this with the lexer, but the lexer state is not necessarily
synced with the parser state -- sometimes there are characters in the
lexer input buffer that haven't been "consumed" by the parser at the
time that mark() is called, so the "wrong" position is marked.  Is
there any way that I can force the parser to sync the lexer to its
current state so that something like the above will work?

Thanks for any thoughts,

--
Andrew Bell
andrew.bell.ia@gmail.com
From parrt at cs.usfca.edu  Mon Apr  3 15:09:50 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Apr  3 15:09:53 2006
Subject: [antlr-interest] ANTLR v3 Tree Interface request
In-Reply-To: <D5F291ABFAB3454D85DB58B747B63982139955@castor-srvr1.castortech.com>
References: <D5F291ABFAB3454D85DB58B747B63982139955@castor-srvr1.castortech.com>
Message-ID: <452E27C4-4FA3-41BC-BC48-8EB391A19FA5@cs.usfca.edu>


On Apr 3, 2006, at 2:37 PM, Oliver Wong wrote:

> 	Not sure if this is the right place to discuss this, but I'd
> like to request a change to the org.antlr.runtime.tree.Tree interface
> before ANTLR v3 is officially released.

They are very open to discussion. :)

I see is implemented in BaseTree and CommonTreeAdaptor.

> 	One of the methods defined in the Tree interface is dupNode().
> I'm guessing that the intended behaviour of this method is to  
> duplicate
> "this" node only, and not to recursively duplicate the children.
> However, this is very inconvenient for me, because my Tree
> implementation uses parent-pointers, and if I dupe a node, without
> duping its children, then the child would either need to support
> pointing to multiple parents, or have its parent-reference be
> inconsistent.

Interesting problem...

> 	I've looked around at all the usages of dupNode(), and it seems
> its always used as part of a recursive descent to duplicate the whole
> tree. Is it possible to remove this method from the Tree interface?  
> You
> can just have it as an abstract method on
> org.antlr.runtime.tree.BaseTree,

you're right...

> which looks like the only place that
> method is used.

Seems like we should open up the whole interface to discussion...

Ter
From craymer at warpiv.com  Mon Apr  3 15:14:01 2006
From: craymer at warpiv.com (Loring Craymer)
Date: Mon Apr  3 15:14:09 2006
Subject: [antlr-interest] Yacc & Lex to ANTLR
In-Reply-To: <000001c65762$e634f680$0a01a8c0@gevbook>
Message-ID: <000c01c6576b$ec6be910$8302a8c0@Fafnir>

The sensible approach is probably to use the lex code directly via flex or
JLex (or any other of the lex "clones" that generates code for your desired
target language and can be interfaced with an ANTLR parser), write a
converter for yacc BNF (BNF is a _very_ simple language; translating yacc
BNF to ANTLR EBNF should be easy) that handles everything but operator
precedence (precedence could be handled, but it would take more work to
support precedence translation than it would to modify the code by hand),
and go from there.

 

The BNF translator should take one or two days to implement, precedence
translation might take a few days (although you can probably "steal" an
expression grammar instead of doing the translation), and glueing the
application together another day or two.  You may have to do some
refactoring to get the translator to work (see Ter's comment on ANTLRWorks),
but the actual translation should not be a major effort.

 

--Loring

 

  _____  

From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Gevik babakhani
Sent: Monday, April 03, 2006 2:09 PM
To: 'ANTLR Interest'
Subject: [antlr-interest] Yacc & Lex to ANTLR

 

Folks,

 

Does anyone any tool that can convert Yacc/Lex to ANTLR?

 

Regards,

Gevik.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060403/e7740c13/attachment.html
From seweryn.dynerowicz at student.fundp.ac.be  Mon Apr  3 16:19:13 2006
From: seweryn.dynerowicz at student.fundp.ac.be (seweryn.dynerowicz@student.fundp.ac.be)
Date: Mon Apr  3 16:19:23 2006
Subject: [antlr-interest] "Multiple definition of" error messages at
	compilation
Message-ID: <1144106352.4431ad7103628@webmail.fundp.ac.be>

Hello,

I discovered ANTLR about two days ago, but I have a small problem with it.

I need to write a small parser in C++. The grammar is correct, files are
recognized by it, but unfortunately I'm stuck at the most important point.
What I want is to parse a file into an avl binary tree and then give the
possibility for another part of my program to access this tree. The tree
structure is defined in a file named "avlTree.hh" along with all methods to
manipulate it.

The way I'm trying to do that is by adding an attribute :

public : AvlTree* root;

in my parser. It is modified whenever an element which has to be added to the
tree is found in the file.

Since the definition of the parser class is found in a .hpp file and the
implementation in the .cpp, I needed to define the following :

header "pre_include_cpp" {
#include <iostream>
#ifndef AVLTREE
#define AVLTREE
#include "avlTree.hh"
#endif
}

header "pre_include_hpp" {
#include <iostream>
#ifndef AVLTREE
#define AVLTREE
#include "avlTree.hh"
#endif
}

at the beginning of my "parser.g" file. But I get "multiple definition of ..."
for all methods appearing in "avlTree.hh" when I try to compile the files
generated by antlr from "parser.g" (I added the #ifndef AVLTREE ... #endif after
the first time I got this problem but it didn't solve it)

does anyone have an idea where the problem comes from ?

P.S. I tried to post this on jGuru.com forum but couldn't due to some technical
problem, sorry if this is a very simple question.

thank you.

------------------------
   Dynerowicz S?weryn
2? Maitrise Informatique
------------------------
From jsamort at rogers.com  Mon Apr  3 16:49:25 2006
From: jsamort at rogers.com (Scott Amort)
Date: Mon Apr  3 16:49:28 2006
Subject: [antlr-interest] ANTLR and Unit Testing
In-Reply-To: <5917478b0604011411s7942cc2fv4ccd511408c22f16@mail.gmail.com>
References: <1143921984.24502.3.camel@localhost>
	<5917478b0604011411s7942cc2fv4ccd511408c22f16@mail.gmail.com>
Message-ID: <4431B485.1050503@rogers.com>

Rodrigo B. de Oliveira wrote:
> On 4/1/06, Scott Amort <jsamort@rogers.com> wrote:
> http://boo.codehaus.org/Writing+Tests

Thanks for the link, and thanks to Sohail as well for his response.

Is it correct to generalize then that most tests are conducted with the 
lexer/parser/treewalker as a whole (i.e. compile an input and compare 
the output with what you expect to get), instead of more focused tests 
at the individual class or function level?  Please forgive the possible 
naievity of the question, I'm quite new to the notion of unit testing.

Thanks again,
Scott

From jimi at temporal-wave.com  Mon Apr  3 17:08:44 2006
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon Apr  3 17:08:39 2006
Subject: [antlr-interest] ANTLR v3 Tree Interface request
Message-ID: <B36CCC332A32904F8FA3DE134A23533625204B@wavemachine.temporal-wave.com>



-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Terence Parr
Sent: Monday, April 03, 2006 3:10 PM
To: ANTLR Interest
Subject: Re: [antlr-interest] ANTLR v3 Tree Interface request


On Apr 3, 2006, at 2:37 PM, Oliver Wong wrote:
> tree. Is it possible to remove this method from the Tree interface?  
> You
> can just have it as an abstract method on
> org.antlr.runtime.tree.BaseTree,

you're right...

> which looks like the only place that
> method is used.

Seems like we should open up the whole interface to discussion...


What, just when I have finished coding it for the C output!!! ;-)

Jim
From parrt at cs.usfca.edu  Mon Apr  3 17:15:06 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Apr  3 17:15:11 2006
Subject: [antlr-interest] ANTLR v3 Tree Interface request
In-Reply-To: <B36CCC332A32904F8FA3DE134A23533625204B@wavemachine.temporal-wave.com>
References: <B36CCC332A32904F8FA3DE134A23533625204B@wavemachine.temporal-wave.com>
Message-ID: <D8DBECA0-F92B-47AB-AB13-3AE6322CC303@cs.usfca.edu>


On Apr 3, 2006, at 5:08 PM, Jim Idle wrote:
> Seems like we should open up the whole interface to discussion...
>
>
> What, just when I have finished coding it for the C output!!! ;-)

Well, it's open to discuss, but what we have is not bad ;)
Ter

From sohail at taggedtype.net  Mon Apr  3 19:21:51 2006
From: sohail at taggedtype.net (Sohail Somani)
Date: Mon Apr  3 19:22:00 2006
Subject: [antlr-interest] ANTLR and Unit Testing
In-Reply-To: <4431B485.1050503@rogers.com>
References: <1143921984.24502.3.camel@localhost>
	<5917478b0604011411s7942cc2fv4ccd511408c22f16@mail.gmail.com>
	<4431B485.1050503@rogers.com>
Message-ID: <1144117311.8136.3.camel@localhost.localdomain>

On Mon, 2006-04-03 at 19:49 -0400, Scott Amort wrote:
> Rodrigo B. de Oliveira wrote:
> > On 4/1/06, Scott Amort <jsamort@rogers.com> wrote:
> > http://boo.codehaus.org/Writing+Tests
> 
> Thanks for the link, and thanks to Sohail as well for his response.
> 
> Is it correct to generalize then that most tests are conducted with the 
> lexer/parser/treewalker as a whole (i.e. compile an input and compare 
> the output with what you expect to get), instead of more focused tests 
> at the individual class or function level?  Please forgive the possible 
> naievity of the question, I'm quite new to the notion of unit testing.

No, I'm sorry if I gave you that impression.

Maybe you can test the lexer and the parser together, but I would
suggest that you consider testing one on top of the other. I.e, test the
lexer and parser, then the treewalker(s), then the code generation.

IMHO, there should be a set of tests for each phase. Granted, it might
be a bit tedious but you will thank yourself in the long run.

Sohail

From mail at martin-probst.com  Tue Apr  4 03:03:01 2006
From: mail at martin-probst.com (Martin Probst)
Date: Tue Apr  4 03:03:07 2006
Subject: [antlr-interest] ANTLR and Unit Testing
In-Reply-To: <1144117311.8136.3.camel@localhost.localdomain>
References: <1143921984.24502.3.camel@localhost>	<5917478b0604011411s7942cc2fv4ccd511408c22f16@mail.gmail.com>	<4431B485.1050503@rogers.com>
	<1144117311.8136.3.camel@localhost.localdomain>
Message-ID: <44324455.1000807@martin-probst.com>

> Maybe you can test the lexer and the parser together, but I would
> suggest that you consider testing one on top of the other. I.e, test the
> lexer and parser, then the treewalker(s), then the code generation.
> 
> IMHO, there should be a set of tests for each phase. Granted, it might
> be a bit tedious but you will thank yourself in the long run.

It's actually most likely that testing the whole thing at once will turn 
out to be more tedious in the long run. If a change introduces a bug in 
the lexical/parser/treewalker stage, you'd want to see those tests 
failing, but if the bug is actually in the translation or interpretation 
stage, you'll know quickly because the lexing & parsing tests are not 
failing. Also, it can be very difficult to test for certain 
functionality if you conduct end-to-end tests (instead of unit tests).

This said, you still need end-to-end tests anyways.

Martin
From Yassin.Chkouri at imag.fr  Tue Apr  4 03:08:48 2006
From: Yassin.Chkouri at imag.fr (Yassin.Chkouri@imag.fr)
Date: Tue Apr  4 03:09:00 2006
Subject: [antlr-interest] ANTLR
Message-ID: <1144145328.443245b0bfc50@webmail.imag.fr>

Hello,

How i can to write in antlr this expression recursive writes in Yacc : 

c_expr : primary
	| c_constval
        | c_expr PLUS c_expr
	| c_expr MINUS c_expr
;


yassin

-------------------------------------------------
envoy? via Webmail/IMAG !

From mail at martin-probst.com  Tue Apr  4 03:10:08 2006
From: mail at martin-probst.com (Martin Probst)
Date: Tue Apr  4 03:10:11 2006
Subject: [antlr-interest] "Multiple definition of" error messages
	at	compilation
In-Reply-To: <1144106352.4431ad7103628@webmail.fundp.ac.be>
References: <1144106352.4431ad7103628@webmail.fundp.ac.be>
Message-ID: <44324600.8030505@martin-probst.com>

Isn't the normal solution to this problem that you define a symbol 
*within* the header? E.g. in avlTree.hh

---->8----
#ifndef _AVL_TREE_HH
#define _AVL_TREE_HH

... declarations ...

#endif // _AVL_TREE_HH
----8<----

So a duplicate inclusion of avlTree.hh will have no effect at all?

This whole macro thing is one of the top reasons why C++ is evil and bad ...

Martin
From ewbank at gmail.com  Tue Apr  4 03:51:44 2006
From: ewbank at gmail.com (Bryan Ewbank)
Date: Tue Apr  4 03:51:46 2006
Subject: [antlr-interest] ANTLR
In-Reply-To: <1144145328.443245b0bfc50@webmail.imag.fr>
References: <1144145328.443245b0bfc50@webmail.imag.fr>
Message-ID: <dd3a065f0604040351u1d4fa050r90e3635088232bd@mail.gmail.com>

There is not enough information in this yacc production; please look
in the file and see if there are any precedence entries towards that
top.  They will start with one of
   %left
   %right
   %nonassoc
and they define the order of evaluation and precedence of the various operators.

On 4/4/06, Yassin.Chkouri@imag.fr <Yassin.Chkouri@imag.fr> wrote:
> How i can to write in antlr this expression recursive writes in Yacc :
>
> c_expr : primary
>         | c_constval
>         | c_expr PLUS c_expr
>         | c_expr MINUS c_expr
> ;

Assuming PLUS and MINUS evalute left to right, the ANTLR to recognize it is:
c_expr : atom ( ( PLUS | MINUS ) atom )* ;
atom:      c_constval | primary ;
From Jim.O'Connor at microfocus.com  Tue Apr  4 06:32:39 2006
From: Jim.O'Connor at microfocus.com (Jim O'Connor)
Date: Tue Apr  4 06:33:33 2006
Subject: [antlr-interest] Yacc & Lex to ANTLR
Message-ID: <8818ADCA969F2F4DA513CEE078066DCA0104868B@rock-exchange.microfocus.com>

http://www.antlr.org/workshop/ANTLR2005/notes2.jpg

Third paragraph, end of second line.  Any progress??


> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Terence Parr
> Sent: Monday, April 03, 2006 5:18 PM
> To: ANTLR Interest
> Subject: Re: [antlr-interest] Yacc & Lex to ANTLR
> 
> 
> On Apr 3, 2006, at 2:09 PM, Gevik babakhani wrote:
> 
> > Folks,
> >
> >
> >
> > Does anyone any tool that can convert Yacc/Lex to ANTLR?
> 
> ANTLRWorks does a good job of refactoring; removing left-recursion
> for example :)
> Ter
> 
> 
> This message has been scanned for viruses by MailController -
> www.MailController.altohiway.com
From jimi at temporal-wave.com  Tue Apr  4 08:23:21 2006
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue Apr  4 08:23:37 2006
Subject: [antlr-interest] ANTLR v3 Tree Interface request
Message-ID: <B36CCC332A32904F8FA3DE134A23533625204C@wavemachine.temporal-wave.com>

Joking of course - I suspect that the request to move that method to the
adaptor makes sense and anyway, I have written the C stuff such that it
is easy to reflect any change you/we wish to make to the interfaces,
including the moving of methods :-)

To the interfaces, I added a tiny method to set the assumed "end of
line" character to some other single character to 0x0A (maybe we should
allow more than one character, though of course anyone can override
anything with their own implementation.

Also, the python grammar points out that it is difficult to produce
semantic predicates in the lexer based on the character offset. Your
solution of overriding the next token method is neat enough but in
languages such as C it is a bit (not enormous efforts but still some)
more of a pain to do this. I also have a language to lex/parse where I
need to interpret something at the start of the code line differently to
when it is not. Perhaps there is some variable that that we can/should
automatically keep in sync with the offset where a rule is starting the
scan?  Tracking one more offset would not be much of an overhead I
should think.

Jim

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Terence Parr
Sent: Monday, April 03, 2006 5:15 PM
To: ANTLR Interest
Subject: Re: [antlr-interest] ANTLR v3 Tree Interface request


On Apr 3, 2006, at 5:08 PM, Jim Idle wrote:
> Seems like we should open up the whole interface to discussion...
>
>
> What, just when I have finished coding it for the C output!!! ;-)

Well, it's open to discuss, but what we have is not bad ;)
Ter

From parrt at cs.usfca.edu  Tue Apr  4 08:39:53 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Apr  4 08:39:56 2006
Subject: [antlr-interest] Yacc & Lex to ANTLR
In-Reply-To: <8818ADCA969F2F4DA513CEE078066DCA0104868B@rock-exchange.microfocus.com>
References: <8818ADCA969F2F4DA513CEE078066DCA0104868B@rock-exchange.microfocus.com>
Message-ID: <F6C9972E-4E98-46ED-8EBA-F2B9322BC03E@cs.usfca.edu>

debug AST protocol?  Not yet...soon.
Ter
On Apr 4, 2006, at 6:32 AM, Jim O'Connor wrote:

> http://www.antlr.org/workshop/ANTLR2005/notes2.jpg
>
> Third paragraph, end of second line.  Any progress??
>
>
>> -----Original Message-----
>> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
>> bounces@antlr.org] On Behalf Of Terence Parr
>> Sent: Monday, April 03, 2006 5:18 PM
>> To: ANTLR Interest
>> Subject: Re: [antlr-interest] Yacc & Lex to ANTLR
>>
>>
>> On Apr 3, 2006, at 2:09 PM, Gevik babakhani wrote:
>>
>>> Folks,
>>>
>>>
>>>
>>> Does anyone any tool that can convert Yacc/Lex to ANTLR?
>>
>> ANTLRWorks does a good job of refactoring; removing left-recursion
>> for example :)
>> Ter
>>
>>
>> This message has been scanned for viruses by MailController -
>> www.MailController.altohiway.com

From gudnabrsam at yahoo.com  Tue Apr  4 08:43:15 2006
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Tue Apr  4 08:43:17 2006
Subject: [antlr-interest] Yacc & Lex to ANTLR
In-Reply-To: <F6C9972E-4E98-46ED-8EBA-F2B9322BC03E@cs.usfca.edu>
Message-ID: <20060404154315.47786.qmail@web30908.mail.mud.yahoo.com>

I think he meant translating yacc grammars. ;)

-Matt

--- Terence Parr <parrt@cs.usfca.edu> wrote:

> debug AST protocol?  Not yet...soon.
> Ter
> On Apr 4, 2006, at 6:32 AM, Jim O'Connor wrote:
> 
> > http://www.antlr.org/workshop/ANTLR2005/notes2.jpg
> >
> > Third paragraph, end of second line.  Any
> progress??
> >
> >
> >> -----Original Message-----
> >> From: antlr-interest-bounces@antlr.org
> [mailto:antlr-interest-
> >> bounces@antlr.org] On Behalf Of Terence Parr
> >> Sent: Monday, April 03, 2006 5:18 PM
> >> To: ANTLR Interest
> >> Subject: Re: [antlr-interest] Yacc & Lex to ANTLR
> >>
> >>
> >> On Apr 3, 2006, at 2:09 PM, Gevik babakhani
> wrote:
> >>
> >>> Folks,
> >>>
> >>>
> >>>
> >>> Does anyone any tool that can convert Yacc/Lex
> to ANTLR?
> >>
> >> ANTLRWorks does a good job of refactoring;
> removing left-recursion
> >> for example :)
> >> Ter
> >>
> >>
> >> This message has been scanned for viruses by
> MailController -
> >> www.MailController.altohiway.com
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From Yassin.Chkouri at imag.fr  Tue Apr  4 08:44:31 2006
From: Yassin.Chkouri at imag.fr (Yassin.Chkouri@imag.fr)
Date: Tue Apr  4 08:44:37 2006
Subject: [antlr-interest] AST
Message-ID: <1144165471.4432945fd6005@webmail.imag.fr>

Hello,

Now I will begin the construction of arbe AST . but I cannot the m?those be
followed yet?  but I think that it is necessary activated buildAST = true;  in
is the option after it necessary to add them?  and #. 

yassin

-------------------------------------------------
envoy? via Webmail/IMAG !

From Jim.O'Connor at microfocus.com  Tue Apr  4 11:15:07 2006
From: Jim.O'Connor at microfocus.com (Jim O'Connor)
Date: Tue Apr  4 11:15:52 2006
Subject: [antlr-interest] Yacc & Lex to ANTLR
Message-ID: <8818ADCA969F2F4DA513CEE078066DCA0104884E@rock-exchange.microfocus.com>

Yes

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Matt Benson
> Sent: Tuesday, April 04, 2006 11:43 AM
> To: Terence Parr; Antlr List
> Subject: Re: [antlr-interest] Yacc & Lex to ANTLR
> 
> I think he meant translating yacc grammars. ;)
> 
> -Matt
> 
> --- Terence Parr <parrt@cs.usfca.edu> wrote:
> 
> > debug AST protocol?  Not yet...soon.
> > Ter
> > On Apr 4, 2006, at 6:32 AM, Jim O'Connor wrote:
> >
> > > http://www.antlr.org/workshop/ANTLR2005/notes2.jpg
> > >
> > > Third paragraph, end of second line.  Any
> > progress??
> > >
> > >
> > >> -----Original Message-----
> > >> From: antlr-interest-bounces@antlr.org
> > [mailto:antlr-interest-
> > >> bounces@antlr.org] On Behalf Of Terence Parr
> > >> Sent: Monday, April 03, 2006 5:18 PM
> > >> To: ANTLR Interest
> > >> Subject: Re: [antlr-interest] Yacc & Lex to ANTLR
> > >>
> > >>
> > >> On Apr 3, 2006, at 2:09 PM, Gevik babakhani
> > wrote:
> > >>
> > >>> Folks,
> > >>>
> > >>>
> > >>>
> > >>> Does anyone any tool that can convert Yacc/Lex
> > to ANTLR?
> > >>
> > >> ANTLRWorks does a good job of refactoring;
> > removing left-recursion
> > >> for example :)
> > >> Ter
> > >>
> > >>
> > >> This message has been scanned for viruses by
> > MailController -
> > >> www.MailController.altohiway.com
> >
> >
> 
> 
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
From parrt at cs.usfca.edu  Tue Apr  4 11:16:40 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Apr  4 11:16:47 2006
Subject: [antlr-interest] Yacc & Lex to ANTLR
In-Reply-To: <20060404154315.47786.qmail@web30908.mail.mud.yahoo.com>
References: <20060404154315.47786.qmail@web30908.mail.mud.yahoo.com>
Message-ID: <7B8C7628-C743-4A61-A34E-3F7DEAE1E114@cs.usfca.edu>

Oh, see ANTLRWorks; works great for left-recursion removal.
Ter
On Apr 4, 2006, at 8:43 AM, Matt Benson wrote:

> I think he meant translating yacc grammars. ;)
>
> -Matt
>
> --- Terence Parr <parrt@cs.usfca.edu> wrote:
>
>> debug AST protocol?  Not yet...soon.
>> Ter
>> On Apr 4, 2006, at 6:32 AM, Jim O'Connor wrote:
>>
>>> http://www.antlr.org/workshop/ANTLR2005/notes2.jpg
>>>
>>> Third paragraph, end of second line.  Any
>> progress??
>>>
>>>
>>>> -----Original Message-----
>>>> From: antlr-interest-bounces@antlr.org
>> [mailto:antlr-interest-
>>>> bounces@antlr.org] On Behalf Of Terence Parr
>>>> Sent: Monday, April 03, 2006 5:18 PM
>>>> To: ANTLR Interest
>>>> Subject: Re: [antlr-interest] Yacc & Lex to ANTLR
>>>>
>>>>
>>>> On Apr 3, 2006, at 2:09 PM, Gevik babakhani
>> wrote:
>>>>
>>>>> Folks,
>>>>>
>>>>>
>>>>>
>>>>> Does anyone any tool that can convert Yacc/Lex
>> to ANTLR?
>>>>
>>>> ANTLRWorks does a good job of refactoring;
>> removing left-recursion
>>>> for example :)
>>>> Ter
>>>>
>>>>
>>>> This message has been scanned for viruses by
>> MailController -
>>>> www.MailController.altohiway.com
>>
>>
>
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com

From gudnabrsam at yahoo.com  Tue Apr  4 11:46:58 2006
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Tue Apr  4 11:47:03 2006
Subject: [antlr-interest] Yacc & Lex to ANTLR
In-Reply-To: <7B8C7628-C743-4A61-A34E-3F7DEAE1E114@cs.usfca.edu>
Message-ID: <20060404184658.64819.qmail@web30910.mail.mud.yahoo.com>

Which I take to mean implicitly that left-recursion is
the primary (only?) difference between the two?

-Matt

--- Terence Parr <parrt@cs.usfca.edu> wrote:

> Oh, see ANTLRWorks; works great for left-recursion
> removal.
> Ter
> On Apr 4, 2006, at 8:43 AM, Matt Benson wrote:
> 
> > I think he meant translating yacc grammars. ;)
> >
> > -Matt
> >
> > --- Terence Parr <parrt@cs.usfca.edu> wrote:
> >
> >> debug AST protocol?  Not yet...soon.
> >> Ter
> >> On Apr 4, 2006, at 6:32 AM, Jim O'Connor wrote:
> >>
> >>>
> http://www.antlr.org/workshop/ANTLR2005/notes2.jpg
> >>>
> >>> Third paragraph, end of second line.  Any
> >> progress??
> >>>
> >>>
> >>>> -----Original Message-----
> >>>> From: antlr-interest-bounces@antlr.org
> >> [mailto:antlr-interest-
> >>>> bounces@antlr.org] On Behalf Of Terence Parr
> >>>> Sent: Monday, April 03, 2006 5:18 PM
> >>>> To: ANTLR Interest
> >>>> Subject: Re: [antlr-interest] Yacc & Lex to
> ANTLR
> >>>>
> >>>>
> >>>> On Apr 3, 2006, at 2:09 PM, Gevik babakhani
> >> wrote:
> >>>>
> >>>>> Folks,
> >>>>>
> >>>>>
> >>>>>
> >>>>> Does anyone any tool that can convert Yacc/Lex
> >> to ANTLR?
> >>>>
> >>>> ANTLRWorks does a good job of refactoring;
> >> removing left-recursion
> >>>> for example :)
> >>>> Ter
> >>>>
> >>>>
> >>>> This message has been scanned for viruses by
> >> MailController -
> >>>> www.MailController.altohiway.com
> >>
> >>
> >
> >
> > __________________________________________________
> > Do You Yahoo!?
> > Tired of spam?  Yahoo! Mail has the best spam
> protection around
> > http://mail.yahoo.com
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From parrt at cs.usfca.edu  Tue Apr  4 11:58:17 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Apr  4 11:58:19 2006
Subject: [antlr-interest] Yacc & Lex to ANTLR
In-Reply-To: <20060404184658.64819.qmail@web30910.mail.mud.yahoo.com>
References: <20060404184658.64819.qmail@web30910.mail.mud.yahoo.com>
Message-ID: <638B62C5-0929-40B5-8CFE-0D02DBE71CBA@cs.usfca.edu>


On Apr 4, 2006, at 11:46 AM, Matt Benson wrote:

> Which I take to mean implicitly that left-recursion is
> the primary (only?) difference between the two?

Some left-factoring is also needed or sometimes the introduction of  
syntactic predicates.
Ter
From sohail at taggedtype.net  Tue Apr  4 18:33:58 2006
From: sohail at taggedtype.net (Sohail Somani)
Date: Tue Apr  4 18:34:13 2006
Subject: [antlr-interest] "Multiple definition of" error messages
	at	compilation
In-Reply-To: <44324600.8030505@martin-probst.com>
References: <1144106352.4431ad7103628@webmail.fundp.ac.be>
	<44324600.8030505@martin-probst.com>
Message-ID: <1144200839.8121.4.camel@localhost.localdomain>

On Tue, 2006-04-04 at 12:10 +0200, Martin Probst wrote:
> This whole macro thing is one of the top reasons why C++ is evil and bad ...

Hey hey now. I use C++ daily and I've used Java daily. I can't imagine
how anyone can program in Java. That being said, my antlr work has java
code generation.

The amount of paradigms C++ allows you (functional, generic, OO - and I
use all three), is awesome and unparallelled.

Why do you think C++ is evil besides C-compatibility?

Sohail

From schmidtitc at gmail.com  Tue Apr  4 18:38:01 2006
From: schmidtitc at gmail.com (Stefan Schmidt)
Date: Tue Apr  4 18:38:04 2006
Subject: [antlr-interest] newbie question about nondeterminism warning
Message-ID: <5f1bc3c50604041838p25f16e21m8dae63bf575042f3@mail.gmail.com>

Hi folks,

I have posted this message to the jGuru forum last week but noone answered
so I'll try it here :-)

I am VERY new to antlr. Part of my current work is to extend an existing
antlr file by some additional functionality.

Ok, here is what I would like to do:

integrate a function like this: (a*x) + (b*y) - z

where x,y,z are REAL numbers (could be negative) and a,b are variables.
Basically a linear function. The (a*x) or (b*y) or z can be repeated *
times.

Here is the code (extract) I am trying:

line 193: ts_function : ts_function_items | (PLUS^|MINUS^)
(PLUS^|MINUS^)?REAL SEMICOLON!;
line 194: ts_function_items : ts_function_item ((PLUS^|MINUS^)
ts_function_item)* ;
line 195: ts_function_item : LEFT_PARENTHESIS! ID (MUL^|DIV^)
(PLUS|MINUS)?REAL RIGHT_PARENTHESIS!;

When I compile this I get the following warning:

ANTLR Parser Generator   Version 2.7.5 (20050128)   1989-2005 jGuru.com
fcl/fcl.g:194: warning:nondeterminism upon
fcl/fcl.g:194:     k==1:MINUS,PLUS
fcl/fcl.g:194:     between alt 1 and exit branch of block

When I replace the 'offending' (PLUS^|MINUS^) with (MUL^|DIV^) it compiles,
but that's obviously not what I want.

I have taken this example from the Expression Evaluation Example at
http://supportweb.cs.bham.ac.uk/documentation/tutorials/docsystem/build/tutorials/antlr/antlr.html

Can anyone help me out here?

Thanks!

Regards,

Stefan Schmidt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060405/1c6a8da5/attachment.html
From xiao.yongqin at zte.com.cn  Tue Apr  4 20:05:27 2006
From: xiao.yongqin at zte.com.cn (xiao.yongqin@zte.com.cn)
Date: Tue Apr  4 20:05:38 2006
Subject: [antlr-interest] What is the difference between the TreeParser and
	Parser
Message-ID: <OF0F43EDCD.F468F036-ON48257147.000F6D50-48257147.001107A0@zte.com.cn>

As I know till now:
1)Parser create a AST and then a TreeParser can travel through it
2)from the result class of "GnuCEmitter.g" and "StdCParser.g" I can see 
each reduce function of TreeParser will contain a AST parameter and Parser 
none.

who can tell me more about the function desin about them? 


Thanks,

Xiao Yongqin

--------------------------------------------------------
ZTE Information Security Notice: The information contained in this mail is solely property of the sender's organization. This mail communication is confidential. Recipients named above are obligated to maintain secrecy and are not permitted to disclose the contents of this communication to others.
This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please notify the originator of the message. Any views expressed in this message are those of the individual sender.
This message has been scanned for viruses and Spam by ZTE Anti-Spam system..
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060405/b628cfac/attachment.html
From p.vandervelde at raketnet.nl  Tue Apr  4 22:23:17 2006
From: p.vandervelde at raketnet.nl (P. van der Velde)
Date: Tue Apr  4 22:19:01 2006
Subject: [antlr-interest] Has anybody ever tried to integrate with VS?
Message-ID: <44335445.5090705@raketnet.nl>

Hi All

I want to build a new language integration tool for VS2005. I want to 
integrate Latex into VS (I'm lazy, I'm spoiled and I need my code 
complete thingies ;-). However to do that I need a parser and a lexer. 
The documents assume you use Flex and Bison, however I was thinking 
about Antlr. So now my questions are:

1) Has anybody ever build a language package for VS with antlr
2) Has anybody ever created a LaTex grammar?
3) Has anybody ever tried to create those two things.

Also if anybody has any hints or tips I would love to hear those

Regards

Patrick
From mail at martin-probst.com  Wed Apr  5 02:17:12 2006
From: mail at martin-probst.com (Martin Probst)
Date: Wed Apr  5 02:17:15 2006
Subject: [antlr-interest] AST
In-Reply-To: <1144165471.4432945fd6005@webmail.imag.fr>
References: <1144165471.4432945fd6005@webmail.imag.fr>
Message-ID: <1144228632.8689.3.camel@localhost.localdomain>

Hi Yassin,

I'm sorry but I cannot understand your question. In order to have the
parser build an AST you have to write "buildAST = true" in the header of
you grammar, yes. After that, you can control tree construction with the
syntax described in the ANTLR manual (e.g. ^, #, ##, etc.).

What was your exact question?

Martin

Am Dienstag, den 04.04.2006, 17:44 +0200 schrieb Yassin.Chkouri@imag.fr:
> Hello,
> 
> Now I will begin the construction of arbe AST . but I cannot the m?those be
> followed yet?  but I think that it is necessary activated buildAST = true;  in
> is the option after it necessary to add them?  and #. 
> 
> yassin
> 
> -------------------------------------------------
> envoy? via Webmail/IMAG !
> 
> 

From anakreonmejdi at yahoo.gr  Wed Apr  5 02:42:42 2006
From: anakreonmejdi at yahoo.gr (Anakreon Mendis)
Date: Wed Apr  5 02:43:10 2006
Subject: [antlr-interest] distinguishing between DIV and regular expression
Message-ID: <87y7ykpdd9.fsf@mathind.csd.auth.gr>

I have a little problem with a lexer and I hope you could help.

The problem is the two tokens start with the same simbol.
I have
DIV : '/';
and regex:
REG_EXP :
'/' COMMON_REG   (COMMON_REG | INNER_REG)* '/' ('g' | 'm' | 'i')*
;

When the code:
a = b/c;
the lexer thinks that '/' starts a regular expression.
This is wrong ofcourse and the parsing fails.

Any suggestions how to resolve this problem?

This is a failed attemt I've done:
DIV_OR_REG:
        '/' (
            (' ' | '\t') { _ttype = DIV; $setText("/");}
            | COMMON_REG   (COMMON_REG | INNER_REG)*
            '/'
            ('g' | 'm' | 'i')* { _ttype = REG_EXP;}
            | { _ttype = DIV; }
        );


protected DIV:;
protected REG_EXP:;

One thought I had is to create a lexer for regex
and control would be delivered to it whenever a '/'
character is found. If that lexer failed to parse
the input, then the '/' would be set to type DIV.

I hope there is a easier solution.

Anakreon
-- 
Three words describe our society:homo homini lupus

From rodrigobamboo at gmail.com  Wed Apr  5 04:06:25 2006
From: rodrigobamboo at gmail.com (Rodrigo B. de Oliveira)
Date: Wed Apr  5 04:06:31 2006
Subject: [antlr-interest] distinguishing between DIV and regular expression
In-Reply-To: <87y7ykpdd9.fsf@mathind.csd.auth.gr>
References: <87y7ykpdd9.fsf@mathind.csd.auth.gr>
Message-ID: <5917478b0604050406h5932d605i3ef1938775b48fb5@mail.gmail.com>

On 05 Apr 2006 12:42:42 +0300, Anakreon Mendis <anakreonmejdi@yahoo.gr> wrote:
> I have a little problem with a lexer and I hope you could help.
>
> The problem is the two tokens start with the same simbol.
> I have
> DIV : '/';
> and regex:
> REG_EXP :
> '/' COMMON_REG   (COMMON_REG | INNER_REG)* '/' ('g' | 'm' | 'i')*
> ;
>

I use predicates for boo:

DIVISION:
	("/*")=> ML_COMMENT { $setType(Token.SKIP); } |
	(RE_LITERAL)=> RE_LITERAL { $setType(RE_LITERAL); } |	
	'/' (
		('/' (~('\r'|'\n'))* { $setType(Token.SKIP); }) |			
			('=' { $setType(ASSIGN); }) |
		)
	;

The '/' can start any of multiline comment, regex literal and single
line comment.
--
bamboo
http://blogs.codehaus.org/people/bamboo/
Got objects? http://www.db4o.com/
From dragonoe at mcmaster.ca  Wed Apr  5 05:43:11 2006
From: dragonoe at mcmaster.ca (O.E. Dragon)
Date: Wed Apr  5 05:43:13 2006
Subject: [antlr-interest] distinguishing between DIV and regular expression
In-Reply-To: <87y7ykpdd9.fsf@mathind.csd.auth.gr>
Message-ID: <web-122549883@cgpsrv2.cis.mcmaster.ca>

In this case, just increasing k to k=2 would probably do the trick.

You could also try a semantic predicate like this:

REG_EXP : { LA(2) == COMMON_REG }? '/' COMMON_REG etc.

The trick you used should work, but should probably look like this:

> DIV_OR_REG:
>         '/' (
>               { $setType(DIV); }
>               |
>               COMMON_REG   (COMMON_REG | INNER_REG)*
>               '/'
>               ('g' | 'm' | 'i')* { $setType(REG_EXP); }
>         );

And instead of declaring DIV and REG_EXP as protected rules you should
simply add them to you parser's tokens{} section.

-Olivier

On 05 Apr 2006 12:42:42 +0300
 Anakreon Mendis <anakreonmejdi@yahoo.gr> wrote:
> I have a little problem with a lexer and I hope you could help.
> 
> The problem is the two tokens start with the same simbol.
> I have
> DIV : '/';
> and regex:
> REG_EXP :
> '/' COMMON_REG   (COMMON_REG | INNER_REG)* '/' ('g' | 'm' | 'i')*
> ;
> 
> When the code:
> a = b/c;
> the lexer thinks that '/' starts a regular expression.
> This is wrong ofcourse and the parsing fails.
> 
> Any suggestions how to resolve this problem?
> 
> This is a failed attemt I've done:
> DIV_OR_REG:
>         '/' (
>             (' ' | '\t') { _ttype = DIV; $setText("/");}
>             | COMMON_REG   (COMMON_REG | INNER_REG)*
>             '/'
>             ('g' | 'm' | 'i')* { _ttype = REG_EXP;}
>             | { _ttype = DIV; }
>         );
> 
> 
> protected DIV:;
> protected REG_EXP:;
> 
> One thought I had is to create a lexer for regex
> and control would be delivered to it whenever a '/'
> character is found. If that lexer failed to parse
> the input, then the '/' would be set to type DIV.
> 
> I hope there is a easier solution.
> 
> Anakreon
> -- 
> Three words describe our society:homo homini lupus
> 

From jimi at temporal-wave.com  Wed Apr  5 08:12:37 2006
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed Apr  5 08:12:43 2006
Subject: [antlr-interest] Has anybody ever tried to integrate with VS?
Message-ID: <B36CCC332A32904F8FA3DE134A235336252055@wavemachine.temporal-wave.com>

I have been looking at doing this for VS2005 and ANTLR3 itself -
basically creating the excellent ANTLRWorks environment within VS2005. 

As far as I have looked in to this, it seems that integrating a parser
built with ANTLR (2 or 3) would be the least of the work - at most you
might need a wrapper C++ class to make the calls into the parser conform
to the VS studio requirements. Incidentally, the VS2005 integration
seems a lot easier to work with than VS 2003 .Net.

I thought it might be useful, and relatively easy, to generate a C++
wrapper for integration of any parser into VS2005 with the C codegen of
ANTLR3, and I would presume that should he feel inclined to do the same,
that Ric would have an easier time with the C++ codegen than I will from
C codegen.

Sorry that I can't be more specific but I have thus far only looked into
how feasible this is and decided that it is eminently so, but yet a fair
amount of work. It is on my list of cool things to do with ANTLR though
;-)

Jim

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of P. van der Velde
Sent: Tuesday, April 04, 2006 10:23 PM
To: antlr-interest@antlr.org
Subject: [antlr-interest] Has anybody ever tried to integrate with VS?

Hi All

I want to build a new language integration tool for VS2005. I want to 
integrate Latex into VS (I'm lazy, I'm spoiled and I need my code 
complete thingies ;-). However to do that I need a parser and a lexer. 
The documents assume you use Flex and Bison, however I was thinking 
about Antlr. So now my questions are:

1) Has anybody ever build a language package for VS with antlr
2) Has anybody ever created a LaTex grammar?
3) Has anybody ever tried to create those two things.

Also if anybody has any hints or tips I would love to hear those

Regards

Patrick
From dcaton at shorelinesoftware.com  Wed Apr  5 06:29:20 2006
From: dcaton at shorelinesoftware.com (Don Caton)
Date: Wed Apr  5 08:15:05 2006
Subject: [antlr-interest] Has anybody ever tried to integrate with VS?
In-Reply-To: <44335445.5090705@raketnet.nl>
Message-ID: <004901c658b4$f2556c80$030fa8c0@ssdev1>

Patrick:

I've built a language package for VS that uses Antlr.  It is a commercial
product so I can't share the code, but I can give you a few tips.

You'll need a lexer for syntax highlighting.  There's no need for a parser,
the language service just needs a sequence of tokens with certain
information such as the starting column and length, the text type (i.e.
text, comment, etc.), and some other things.

The lexer is called once for each line of source code, so it should be as
simple and efficient as possible (e.g. don't use semantic predicates), and
you should reuse the same lexer instance for the entire time your package is
loaded.   You don't want to create a new instance of the lexer each time it
is needed, the initialization costs are very high (especially the init of
the tokens table) and it will slow down typing and scrolling in the editor
if it isn't very efficient.

I use a static stringstream object to feed the lexer and just reinitialize
it each time the lexer is called.  In addition, you need to call
lex->setColumn(0) and lex->getInputBuffer().reset() to "reset" the lexer
each time you need to parse a new line.  You don't need to worry about the
line counter, since you will never be parsing more than one line at a time.

You also do not want to ignore comments in this lexer (since they must be
colorized too) and you must maintain state for multiline comments and you
cannot assume that when you encounter the beginning of a ML-comment you will
find the end.  The end might be on a different line and you only get to lex
one line at a time, so you must return a state code to the language service,
which it will then return to you when it asks you to tokenize the next line.
You must structure your lexer to be able to be entered in a state where you
are within a multiline comment.

If your language has any other constructs that can span multiple lines (like
literal strings in C/C++) then you must maintain state for that as well.
You cannot assume that you will be lexing each line in sequence, or if you
will be lexing any particular line at all.  The language service maintains
your returned state code for each line that has been colorized, and you will
always be given the state code for the preceding line when you are asked to
lex another line.

To get tokens without using a parser, do something like this:

   RefToken tok = lex->nextToken();
   while ( tok->getType() != Token::EOF_TYPE )
   {
      // ...
      tok = lex->nextToken();
   }


Next, you will need another lexer and a parser to support code collapsing,
intellisense and various other things that the VS editor supports.  This is
more like a traditional parser, where you want to ignore comments and
whitespace.  You will be asked to parse all, or part of the source file.
Rules in your parser will have to return the proper information to the
language service, depending on the reason for the parse.  There are numerous
reasons for invoking a full or partial parse (code collapsing, intellisense,
etc.).  

If your parser is efficient enough, it is easier to parse the entire source
file each time, but the language service will also give you the coordinates
of only the text that's changed.  You can maintain state information and
only parse the changed source or parse the entire source file each time.
Although colorizing and intellisense operations are generally called on
background threads, you want them to be as efficient as possible so there is
no noticeable delay to the end user.

This lexer and parser generally does not need to be as thorough as those
used in a compiler.  You only need to parse things to a point that you can
supply the needed information back to the language service.  So, you don't
really need to be concerned with things like operator precedence and things
of that nature that are only significant if you are actually going to
generate code.  Again, you want to make this as efficient as possible so
there is no noticeable delay to the end user.

Some language services like C# actually attempt to do a background compile
(minus codegen) while you type, so that syntax and semantic errors can be
displayed in real time in the error list pane.  That requires a more through
parser that does semantic analysis, type resolution and so forth, and you
may want to generate and persist an AST if you attempt this.  Some of C#'s
advanced intellisense features also require this level of parsing.  

Writing a Visual Studio language (or project) package is not a trivial thing
to undertake, especially given the quality of the sample code and
documentation that's provided, so be prepared for a bit of work.

Don
 

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of P. van 
> der Velde
> Sent: Wednesday, April 05, 2006 1:23 AM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] Has anybody ever tried to integrate with VS?
> 
> Hi All
> 
> I want to build a new language integration tool for VS2005. I 
> want to integrate Latex into VS (I'm lazy, I'm spoiled and I 
> need my code complete thingies ;-). However to do that I need 
> a parser and a lexer. 
> The documents assume you use Flex and Bison, however I was 
> thinking about Antlr. So now my questions are:
> 
> 1) Has anybody ever build a language package for VS with antlr
> 2) Has anybody ever created a LaTex grammar?
> 3) Has anybody ever tried to create those two things.
> 
> Also if anybody has any hints or tips I would love to hear those
> 
> Regards
> 
> Patrick


From jg at pcCFD.com  Wed Apr  5 08:59:33 2006
From: jg at pcCFD.com (Joseph Goettgens)
Date: Wed Apr  5 08:59:41 2006
Subject: [antlr-interest] Has anybody ever tried to integrate with VS?
Message-ID: <000901c658c9$f071d2e0$1863a8c0@lynx>

Patrick:

have a look at TeXlipse (http://texlipse.sourceforge.net/). This might give 
you many clues on how complicated it is to parse TeX/LaTeX sources.

So far I found it quite comfortable to have a "makefile project" for antlr 
related stuff and a separate Win32 project for the bulk of a project. Not 
really an integrated thing, but it works and I never had problems compiling 
the C++ support libs (refers to Vs 2003 and Antlr 2.5.[5|6]).

jg

From gevik at xs4all.nl  Wed Apr  5 09:03:13 2006
From: gevik at xs4all.nl (Gevik Babakhani)
Date: Wed Apr  5 09:03:17 2006
Subject: [antlr-interest] Advice needed 
Message-ID: <22292.195.169.118.236.1144252993.squirrel@webmail.xs4all.nl>

Folks,

I would like some advice of the following. Advice needed

I have been playing with ANTLR for sometime now and for learning reasons I
would like to create my own language interpreter. I looked at the
tinybasic and pascal (java) examples. I have no problem reading the
sources but I see that I just lack the knowledge of why and how things are
done.

I was wondering if anyone could recommend a book or any good writing about
creating a language interpreter or a compiler. Well, the lexer, the parser
and the tree walker part I understand but what happens next if one would
like to build a simple language interpreter.

(Function Scope?, Stack?!)

PS.
I know taking Ters classes at the uni would be the best option but I live
too far for that :(


Thank you.


From prashant.deva at gmail.com  Wed Apr  5 16:31:59 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Wed Apr  5 16:32:02 2006
Subject: [antlr-interest] Advice needed
In-Reply-To: <22292.195.169.118.236.1144252993.squirrel@webmail.xs4all.nl>
References: <22292.195.169.118.236.1144252993.squirrel@webmail.xs4all.nl>
Message-ID: <41fed8f80604051631w33e80cc7r828ad1e583b6542a@mail.gmail.com>

See 'Advanced Compiler Design & Implementation' by Steven Muchnick


--
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060406/447c07bd/attachment.html
From Erik.Putrycz at nrc-cnrc.gc.ca  Wed Apr  5 16:48:05 2006
From: Erik.Putrycz at nrc-cnrc.gc.ca (Putrycz, Erik)
Date: Wed Apr  5 16:48:15 2006
Subject: [antlr-interest] Cobol number question
Message-ID: <E4D07AB09F5F044299333C8D0FEB45E901F831C9@nrccenexb1.nrc.ca>

I'm currently working on a COBOL grammar and I'm stuck with the
following case:

COMPUTE M-INTEREST = INTEREST / 12. 

The DOT at the end is the end of the instruction not a decimal dot.

I based my grammar on the python one (that has nice indentation
handling) and my numbers rule is the following:

NUMBER

            :           

            (           NonZeroDigit (Int)?

                        (           FloatTrailer {$setType(FLOAT);}

                                    |           {$setType(INT);}

                        )

            )                                   

    |   '.' {$setType(DOT);} // DOT (non number; e.g., field access)

            ;

 

protected

FloatTrailer

            :           '.' Int

            ;

 

The FloatTrailer fails with unexpected char: 0xA at the end of the
line... Obviously the second alternative of the NUMBER is not
considered... I'm not sure how to handle this properly. I would like to
keep in the parser that the instruction ends with a DOT.

 

Anyone would have an idea?

 

Thanks,

 

Erik Putrycz, Ph.D - Research Associate /
<mailto:erik.putrycz@nrc-cnrc.gc.ca> erik.putrycz@nrc-cnrc.gc.ca / (613)
990 0681

Institute for Information Technology - Software Engineering Group

National Research Council, Canada - Building M-50, 1200 Montreal Road

Ottawa, Ontario, CANADA K1A 0R6

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060405/e8c29a75/attachment.html
From jose.ventura.roda at gmail.com  Thu Apr  6 00:30:07 2006
From: jose.ventura.roda at gmail.com (Jose Ventura)
Date: Thu Apr  6 00:30:11 2006
Subject: Fwd: [antlr-interest] Cobol number question
In-Reply-To: <E4D07AB09F5F044299333C8D0FEB45E901F831C9@nrccenexb1.nrc.ca>
References: <E4D07AB09F5F044299333C8D0FEB45E901F831C9@nrccenexb1.nrc.ca>
Message-ID: <e39abda10604060030o33730e55sa3a9a1f31ce8618e@mail.gmail.com>

I'm working in a parser for cobol grammar too. I don't have the better
solutions for the problem what I was found, but ...


PUNTO
 : {!ultPic }?
   '.' {_ttype = FIN_TODO;}
   (
    (DIGITO)+ {_ttype=NUM;}
    )?
  ;

This rule have the definition of number, ident, lit_pic (literal after PIC
word)


IDENT_NUM  options {testLiterals=true;}
 :{ ultPic }?
('+'|'-'|'$'|'b'|','|'e'|('0'..'9')|'x'|'s'|'v'|'z'|'*'|'('|')'|
                {LA(2)!=' '&&LA(2)!='\n'&&LA(2)!='\r'}? '.')+
  {$setType (LIT_PIC);}
 |('x' '\'') => 'x' '\''( ~('\''|'\n'|'\r'|'\t') )* '\''
  {$setType (LIT_HEXADECIMAL);}
 | LETRA (LETRA|DIGITO|'-'|'_')*
  {String s = $getText;
   if (s.equals("IS"))
    $setType(Token.SKIP);
   else
    $setType(IDENT);
  }
 |((DIGITO)+ (LETRA|'-'|'_')) =>(DIGITO)+ (LETRA|'-'|'_')
(LETRA|DIGITO|'-'|'_')*
  {$setType (IDENT);}
 |((DIGITO)+ '/' )=> (DIGITO)+ '/' (DIGITO|'/')+
  {$setType (FECHA);}
 | (DIGITO)+  ({LA(2)!=' '&&LA(2)!='\n'&&LA(2)!='\r'}? ',' (DIGITO)+)?
  {$setType (NUM);}
 | '_' (LETRA|DIGITO|'_')*
  {$setType (IDENT);}
 ;
I believe you must to use predicates also  {LA(2)!='
'&&LA(2)!='\n'&&LA(2)!='\r'}? '.' for know the element after the point.

I hope this could help you.
Regards,
Jos? Ventura.

---------- Forwarded message ----------
From: Putrycz, Erik <Erik.Putrycz@nrc-cnrc.gc.ca>
Date: 06-abr-2006 1:48
Subject: [antlr-interest] Cobol number question
To: antlr-interest@antlr.org

 I'm currently working on a COBOL grammar and I'm stuck with the following
case:

COMPUTE M-INTEREST = INTEREST / 12.

The DOT at the end is the end of the instruction not a decimal dot.

I based my grammar on the python one (that has nice indentation handling)
and my numbers rule is the following:

NUMBER

            :

            (           NonZeroDigit (Int)?

                        (           FloatTrailer {$setType(FLOAT);}

                                    |           {$setType(INT);}

                        )

            )

    |   '.' {$setType(DOT);} // DOT (non number; e.g., field access)

            ;



protected

FloatTrailer

            :           '.' Int

            ;



The FloatTrailer fails with unexpected char: 0xA at the end of the line?
Obviously the second alternative of the NUMBER is not considered? I'm not
sure how to handle this properly. I would like to keep in the parser that
the instruction ends with a DOT.



Anyone would have an idea?



Thanks,



*Erik** **Putrycz**, **Ph.D** - Research Associate / **
erik.putrycz@nrc-cnrc.gc.ca* <erik.putrycz@nrc-cnrc.gc.ca>* / **(613) 990
0681*

Institute for Information Technology - Software Engineering Group

National Research Council, Canada - Building M-50, 1200 Montreal Road

Ottawa, Ontario, CANADA K1A 0R6
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060406/6973f7c5/attachment-0001.html
From fermin.reig at gmail.com  Thu Apr  6 17:09:15 2006
From: fermin.reig at gmail.com (F Reig)
Date: Thu Apr  6 17:09:18 2006
Subject: [antlr-interest] ANTLR 2.7.6: are existing bugs being fixed?
Message-ID: <4f1b77310604061709p5e0ee4cu33146fcbe65b5279@mail.gmail.com>

Hi,

Are bugs in ANTLR 2.7.6 being fixed? I recently reported a bug in the
mailing list (copied below), but there has been no reply. I understand
that most resources are now being used for v3, but I'd like to know
whether someone will look into this problem in the near future.

Note that I'm not reporting a problem with my own grammar, but with
one of the examples distributed with ANTLR 2.7.6. The output differs
if C# or Java are generated.

I'd like  to use the same idiom as in the example in my grammar, so
that's why I'm interested in a fix. Alternatively, if someone can
suggest an alternative way to
implement #include directives in the lexer, that would be very useful too.

Thanks!
Fermin

---------- Forwarded message ----------
From: F Reig <fermin.reig@gmail.com>
Date: Mar 31, 2006 3:59 PM
Subject: antlr 2.7.6 C# bug confirmed. Re: 2.7.6/examples/csharp/cpp broken (C#)
To: antlr-interest@antlr.org


On 3/30/06, F Reig <fermin.reig@gmail.com> wrote:
> Hi,
>
> I need a nested lexer to handle included files, and I was looking at
> the examples in the distribution for inspiration. I've generated C#
> from  cpp.g and tested the resulting lexer with the sample input. I
> get this output:
>
> ./cppLexer.exe < cpp.in
> int a,b;
>
> int x;
> int z;
>
> which is incorrect.
>
> Can anyone else please verify this?  (I don't have access to Java in
> this computer right now, so I cannot verify whether the same example
> works OK when antlr generates Java. That would help diagnose the
> problem as a bug in cpp.g or a bug in antlr generating C#)

 I've checked this with antlr generating Java, and it works as expected:

 java -classpath .:$CLASSPATH cpp < cpp.in
 int a,b;
 int x;
 int z;
 int y;
 int c;

 This suggests that there is a bug in antlr itself (2.7.6), either in
the C# library, or (less likely) in the C# code generator.

 Fermin
From p.vandervelde at raketnet.nl  Thu Apr  6 17:26:33 2006
From: p.vandervelde at raketnet.nl (P. van der Velde)
Date: Thu Apr  6 17:22:26 2006
Subject: [antlr-interest] Has anybody ever tried to integrate with VS?
In-Reply-To: <004901c658b4$f2556c80$030fa8c0@ssdev1>
References: <004901c658b4$f2556c80$030fa8c0@ssdev1>
Message-ID: <4435B1B9.4050707@raketnet.nl>

Hi Don

Thanks for this great overview. It seems that the whole process is a lot 
harder than I would have thought :-(. I'll see if I can find any simpler 
ways of achieving my goal and if not I'll use your hints and tips.

Again, thanks heaps.

Patrick

Don Caton wrote:
> Patrick:
>
> I've built a language package for VS that uses Antlr.  It is a commercial
> product so I can't share the code, but I can give you a few tips.
>
> You'll need a lexer for syntax highlighting.  There's no need for a parser,
> the language service just needs a sequence of tokens with certain
> information such as the starting column and length, the text type (i.e.
> text, comment, etc.), and some other things.
>
> The lexer is called once for each line of source code, so it should be as
> simple and efficient as possible (e.g. don't use semantic predicates), and
> you should reuse the same lexer instance for the entire time your package is
> loaded.   You don't want to create a new instance of the lexer each time it
> is needed, the initialization costs are very high (especially the init of
> the tokens table) and it will slow down typing and scrolling in the editor
> if it isn't very efficient.
>
> I use a static stringstream object to feed the lexer and just reinitialize
> it each time the lexer is called.  In addition, you need to call
> lex->setColumn(0) and lex->getInputBuffer().reset() to "reset" the lexer
> each time you need to parse a new line.  You don't need to worry about the
> line counter, since you will never be parsing more than one line at a time.
>
> You also do not want to ignore comments in this lexer (since they must be
> colorized too) and you must maintain state for multiline comments and you
> cannot assume that when you encounter the beginning of a ML-comment you will
> find the end.  The end might be on a different line and you only get to lex
> one line at a time, so you must return a state code to the language service,
> which it will then return to you when it asks you to tokenize the next line.
> You must structure your lexer to be able to be entered in a state where you
> are within a multiline comment.
>
> If your language has any other constructs that can span multiple lines (like
> literal strings in C/C++) then you must maintain state for that as well.
> You cannot assume that you will be lexing each line in sequence, or if you
> will be lexing any particular line at all.  The language service maintains
> your returned state code for each line that has been colorized, and you will
> always be given the state code for the preceding line when you are asked to
> lex another line.
>
> To get tokens without using a parser, do something like this:
>
>    RefToken tok = lex->nextToken();
>    while ( tok->getType() != Token::EOF_TYPE )
>    {
>       // ...
>       tok = lex->nextToken();
>    }
>
>
> Next, you will need another lexer and a parser to support code collapsing,
> intellisense and various other things that the VS editor supports.  This is
> more like a traditional parser, where you want to ignore comments and
> whitespace.  You will be asked to parse all, or part of the source file.
> Rules in your parser will have to return the proper information to the
> language service, depending on the reason for the parse.  There are numerous
> reasons for invoking a full or partial parse (code collapsing, intellisense,
> etc.).  
>
> If your parser is efficient enough, it is easier to parse the entire source
> file each time, but the language service will also give you the coordinates
> of only the text that's changed.  You can maintain state information and
> only parse the changed source or parse the entire source file each time.
> Although colorizing and intellisense operations are generally called on
> background threads, you want them to be as efficient as possible so there is
> no noticeable delay to the end user.
>
> This lexer and parser generally does not need to be as thorough as those
> used in a compiler.  You only need to parse things to a point that you can
> supply the needed information back to the language service.  So, you don't
> really need to be concerned with things like operator precedence and things
> of that nature that are only significant if you are actually going to
> generate code.  Again, you want to make this as efficient as possible so
> there is no noticeable delay to the end user.
>
> Some language services like C# actually attempt to do a background compile
> (minus codegen) while you type, so that syntax and semantic errors can be
> displayed in real time in the error list pane.  That requires a more through
> parser that does semantic analysis, type resolution and so forth, and you
> may want to generate and persist an AST if you attempt this.  Some of C#'s
> advanced intellisense features also require this level of parsing.  
>
> Writing a Visual Studio language (or project) package is not a trivial thing
> to undertake, especially given the quality of the sample code and
> documentation that's provided, so be prepared for a bit of work.
>
> Don
>  
>
>   
>> -----Original Message-----
>> From: antlr-interest-bounces@antlr.org 
>> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of P. van 
>> der Velde
>> Sent: Wednesday, April 05, 2006 1:23 AM
>> To: antlr-interest@antlr.org
>> Subject: [antlr-interest] Has anybody ever tried to integrate with VS?
>>
>> Hi All
>>
>> I want to build a new language integration tool for VS2005. I 
>> want to integrate Latex into VS (I'm lazy, I'm spoiled and I 
>> need my code complete thingies ;-). However to do that I need 
>> a parser and a lexer. 
>> The documents assume you use Flex and Bison, however I was 
>> thinking about Antlr. So now my questions are:
>>
>> 1) Has anybody ever build a language package for VS with antlr
>> 2) Has anybody ever created a LaTex grammar?
>> 3) Has anybody ever tried to create those two things.
>>
>> Also if anybody has any hints or tips I would love to hear those
>>
>> Regards
>>
>> Patrick
>>     
>
>
>
>
>
>   
From p.vandervelde at raketnet.nl  Thu Apr  6 17:28:11 2006
From: p.vandervelde at raketnet.nl (P. van der Velde)
Date: Thu Apr  6 17:24:04 2006
Subject: [antlr-interest] Has anybody ever tried to integrate with VS?
In-Reply-To: <000901c658c9$f071d2e0$1863a8c0@lynx>
References: <000901c658c9$f071d2e0$1863a8c0@lynx>
Message-ID: <4435B21B.9000900@raketnet.nl>

Hi Joseph

Thanks for the link. I didn't know about that one. Don's post already 
indicated to me that the whole thing is going to be a lot harder than I 
though. Oh well better to find out now than later on. :-)

Thanks

Patrick

Joseph Goettgens wrote:
> Patrick:
>
> have a look at TeXlipse (http://texlipse.sourceforge.net/). This might 
> give you many clues on how complicated it is to parse TeX/LaTeX sources.
>
> So far I found it quite comfortable to have a "makefile project" for 
> antlr related stuff and a separate Win32 project for the bulk of a 
> project. Not really an integrated thing, but it works and I never had 
> problems compiling the C++ support libs (refers to Vs 2003 and Antlr 
> 2.5.[5|6]).
>
> jg
>
>
>
>
From prashant.deva at gmail.com  Fri Apr  7 15:21:42 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Fri Apr  7 15:21:44 2006
Subject: [antlr-interest] ANTLR Studio giveaway offer extended till april
	20th
Message-ID: <41fed8f80604071521k49b0170cmb0529c58a16dcc55@mail.gmail.com>

With the giveaway offer doing really great, I have decided to extend it for
some more time :)

Meanwhile I am working on my next cool project (not antlr related) which
will be released soon.

--
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060408/f7add627/attachment.html
From harsh at archpro-da.com  Sat Apr  8 09:41:17 2006
From: harsh at archpro-da.com (Harsh Chilwal)
Date: Sat Apr  8 09:41:21 2006
Subject: [antlr-interest] Multiple versions of the same grammer
Message-ID: <2324.66.166.16.235.1144514477.squirrel@66.166.16.235>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060408/7feeae1d/attachment.html
From jsgough at gmail.com  Sat Apr  8 10:11:16 2006
From: jsgough at gmail.com (Joshua Gough)
Date: Sat Apr  8 10:11:25 2006
Subject: [antlr-interest] Using ANTLR to help translate C++ to C#
Message-ID: <21c992360604081011y3bf475a5t898cd5390203c2e5@mail.gmail.com>

Hello,

I have some files that have a large amount of business logic implemented in
C++ / COM. For performance reasons, I may need to convert these to C# to
avoid COM interop performance issues. Manually doing this would involve
removing some macros, removing some com-specific try/catch statements, and
transitioning some pointers to first-class return values. The business logic
will stay almost 100% the same though.

I was wondering if using ANTLR might be a way to help automate this task.
Does anyone have any suggestions on the feasisbility of that?

Thanks,
Josh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060408/72517bf5/attachment.html
From jdfrens at calvin.edu  Sat Apr  8 10:33:46 2006
From: jdfrens at calvin.edu (Jeremy D. Frens)
Date: Sat Apr  8 10:33:55 2006
Subject: [antlr-interest] Advice needed
In-Reply-To: <22292.195.169.118.236.1144252993.squirrel@webmail.xs4all.nl>
References: <22292.195.169.118.236.1144252993.squirrel@webmail.xs4all.nl>
Message-ID: <4437F3FA.7070507@calvin.edu>

Gevik Babakhani wrote:
> I was wondering if anyone could recommend a book or any good writing about
> creating a language interpreter or a compiler. Well, the lexer, the parser
> and the tree walker part I understand but what happens next if one would
> like to build a simple language interpreter.
> 
> (Function Scope?, Stack?!)

I'd recommend _Essentials of Programming Languages_ by Friedman, Wand,
and Haynes.  I took a PL course from Friedman, and we (obviously) used
this book.  In my mind, it's a clear winner for implementing an
interpreter and learning about the options you have when implementing it.

It was definitely the motivating basis for my own interpreter No Latte
(http://nolatte.sf.net).

jdf

-- 
* Jeremy D. Frens * Professor, Computer Science * jdfrens@calvin.edu *
                     ``Are you like me?''  -- David Letterman

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 258 bytes
Desc: OpenPGP digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20060408/88094148/signature.bin
From sohail at taggedtype.net  Sat Apr  8 12:41:04 2006
From: sohail at taggedtype.net (Sohail Somani)
Date: Sat Apr  8 12:41:14 2006
Subject: [antlr-interest] Using ANTLR to help translate C++ to C#
In-Reply-To: <21c992360604081011y3bf475a5t898cd5390203c2e5@mail.gmail.com>
References: <21c992360604081011y3bf475a5t898cd5390203c2e5@mail.gmail.com>
Message-ID: <1144525264.8032.0.camel@localhost.localdomain>

On Sat, 2006-04-08 at 13:11 -0400, Joshua Gough wrote:
> Hello,
> 
> I have some files that have a large amount of business logic
> implemented in C++ / COM. For performance reasons, I may need to
> convert these to C# to avoid COM interop performance issues. Manually
> doing this would involve removing some macros, removing some
> com-specific try/catch statements, and transitioning some pointers to
> first-class return values. The business logic will stay almost 100%
> the same though. 

Why not use C++.NET? You shouldn't need COM then.

From jsamort at rogers.com  Sat Apr  8 14:48:54 2006
From: jsamort at rogers.com (Scott Amort)
Date: Sat Apr  8 14:48:59 2006
Subject: [antlr-interest] importVocab question
Message-ID: <1144532934.20825.11.camel@localhost>

Hi All,

I have my ANTLR lexer and parser grammars separated into two files.
Now, my lexer scans identifiers and tests them against the literals
table.  The problem here is that there is not a literals table yet, as
they are all defined in the parser.  To solve this, I import my parser
vocabulary into the lexer (with importVocab), which also necessitates
running antlr on the parser first.  This seems to work and everything
runs fine, except one thing.  Within the lexer, I have numerous
paraphrase="x" statements to make any error output a bit more
understandable.  These statements do not make it to the parser, as the
parser is not inputting the vocabulary from the lexer, but it is instead
operating the other way around.  If I do try to input the lexer
vocabulary, I end up with a circular dependency - the parser must
generate its vocab first, but in order to do so it needs the lexer
vocab, but the lexer needs the parser's vocab to work, and so on.  Is
there a way to fix this?  I can't see where I can add this sort of
option to the parser.  Thanks for any assistance!

Best,
Scott

PS Also, thanks again to those who participated in my earlier discussion
about unit testing - after implementing a pretty basic test suite, I
have already come across and fixed several bugs.

From akiskal at hol.gr  Sat Apr  8 18:30:51 2006
From: akiskal at hol.gr (Vaios Kalpias)
Date: Sat Apr  8 18:30:57 2006
Subject: [antlr-interest] JavaEmitter update questions
Message-ID: <443863CB.9080602@hol.gr>

I have made some progress updating the JavaEmitter class for Java 1.5, 
but I'd like to ask a few questions. First, I'd like to let you all know 
that I'm using the grammar that can be found at the ANTLR files. The 
first major difficulty I faced was implementing the 
classOrInterfaceType. This rule is as follows:

classOrInterfaceType
   :    IDENT (typeArguments)?
   |    #( DOT classOrInterfaceType )
   ;

typeArguments
   :    #(TYPE_ARGUMENTS (typeArgument)+)
   ;

typeArgument
   :    #(    TYPE_ARGUMENT
           (    typeSpec
           |    wildcardType
           )
       )
   ;

The problem is that I don't understand how am I going to put 
classOrInterfaceType in the big switch statement since antlr does not 
"setType" a #CLASSORINTERFACETYPE. I figured that in this case we follow 
the rule until we find a # symbol, which is then inserted in the switch 
statement. But in this case classOrInterfaceType ends up using IDENT 
(typeArguments)? and IDENT is never a root node in the AST. I hope I 
made u understand my question!! There are more things I'm trying to 
figure out, but if I understand this I believe I'll solve my other 
problems too.

Regards,
Vaios.
From wiggjd at lsbu.ac.uk  Sun Apr  9 00:54:58 2006
From: wiggjd at lsbu.ac.uk (Wigg, J D)
Date: Sun Apr  9 00:54:51 2006
Subject: [antlr-interest] Using ANTLR to help translate C++ to C#
Message-ID: <10A786EB5741DE4DB252F7B9B9423D3A01085A12@CSD-EXBE-VS2.lsbu.ac.uk>

There is a C++ parser available on the antlr.org website,
http://ww.antlr.org/grammar/list which you could instrument to detect
where changes needed to be made.
 
However, it doesn't automatically write all the input to another file
(so that you could include your changes automatically) though I
suppose this could be done.
 
It rather depends on how extensive the alterations are going to be to
see if it is worth going down this route.
 
David Wigg
London South Bank University
UK
 
>From antlr-interest Digest Vol 17, Issue 11
Message: 3
Date: Sat, 8 Apr 2006 13:11:16 -0400
From: "Joshua Gough" <jsgough@gmail.com>
Subject: [antlr-interest] Using ANTLR to help translate C++ to C#
To: antlr-interest@antlr.org
Message-ID:
        <21c992360604081011y3bf475a5t898cd5390203c2e5@mail.gmail.com>
Content-Type: text/plain; charset="iso-8859-1"

Hello,

I have some files that have a large amount of business logic
implemented in
C++ / COM. For performance reasons, I may need to convert these to C#
to
avoid COM interop performance issues. Manually doing this would
involve
removing some macros, removing some com-specific try/catch statements,
and
transitioning some pointers to first-class return values. The business
logic
will stay almost 100% the same though.

I was wondering if using ANTLR might be a way to help automate this
task.
Does anyone have any suggestions on the feasisbility of that?

Thanks,
Josh

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060409/66b1113e/attachment.html
From sdb at geekworld.co.uk  Sun Apr  9 08:20:54 2006
From: sdb at geekworld.co.uk (Sam Barnett-Cormack)
Date: Sun Apr  9 08:21:34 2006
Subject: [antlr-interest] Puzzling Problem
Message-ID: <44392656.1050308@geekworld.co.uk>

Hi all,

I have an odd problem with a parser I'm using. The relevant grammar and 
data files are at http://shed.geekworld.co.uk/~sdb/jguru/antlr/ - the 
lexer and base grammar are in super.g, the parser/grammar in question is 
in buildings.g, and the data file is buildings.txt.

The error I get on running it is the slightly odd

line 1:10: unexpected token: 0

This is especially odd, as the grammar specifies that the first token it 
should get *is* "0".

I was just wondering if anyone could shed any light on this. You won't 
be able to generate actual bytecode from the files I've given, as they 
are part of a much bigger project. If anyone wants to see it all and 
perhaps be able to compile it, it's in an svn repository that I can give 
  people the address of. It's an eclipse project, so ANTLREclipse will 
be useful to look at it in Eclipse.

Sam

From vidar at hawkis.com  Sun Apr  9 08:35:00 2006
From: vidar at hawkis.com (Vidar =?iso-8859-1?q?H=E5kestad?=)
Date: Sun Apr  9 08:35:07 2006
Subject: [antlr-interest] Puzzling Problem
In-Reply-To: <44392656.1050308@geekworld.co.uk>
References: <44392656.1050308@geekworld.co.uk>
Message-ID: <200604091735.01028.vidar@hawkis.com>

Could it be that it actually is the lexer that complain? No lexer rules are 
provided...

Regards
Vidar

On Sunday 09 April 2006 17:20, Sam Barnett-Cormack wrote:
> Hi all,
>
> I have an odd problem with a parser I'm using. The relevant grammar and
> data files are at http://shed.geekworld.co.uk/~sdb/jguru/antlr/ - the
> lexer and base grammar are in super.g, the parser/grammar in question is
> in buildings.g, and the data file is buildings.txt.
>
> The error I get on running it is the slightly odd
>
> line 1:10: unexpected token: 0
>
> This is especially odd, as the grammar specifies that the first token it
> should get *is* "0".
>
> I was just wondering if anyone could shed any light on this. You won't
> be able to generate actual bytecode from the files I've given, as they
> are part of a much bigger project. If anyone wants to see it all and
> perhaps be able to compile it, it's in an svn repository that I can give
>   people the address of. It's an eclipse project, so ANTLREclipse will
> be useful to look at it in Eclipse.
>
> Sam
From vidar at hawkis.com  Sun Apr  9 08:46:26 2006
From: vidar at hawkis.com (Vidar =?iso-8859-1?q?H=E5kestad?=)
Date: Sun Apr  9 08:46:28 2006
Subject: [antlr-interest] Puzzling Problem
In-Reply-To: <200604091735.01028.vidar@hawkis.com>
References: <44392656.1050308@geekworld.co.uk>
	<200604091735.01028.vidar@hawkis.com>
Message-ID: <200604091746.26444.vidar@hawkis.com>

I'll correct myself: The only lexer rule I see that could catch the initial 
"0" is the protected DIGIT (in the super.g), and protected methods in the 
lexer never reaches the parser?

Vidar

On Sunday 09 April 2006 17:35, Vidar H?kestad wrote:
> Could it be that it actually is the lexer that complain? No lexer rules are
> provided...
>
> Regards
> Vidar
>
> On Sunday 09 April 2006 17:20, Sam Barnett-Cormack wrote:
> > Hi all,
> >
> > I have an odd problem with a parser I'm using. The relevant grammar and
> > data files are at http://shed.geekworld.co.uk/~sdb/jguru/antlr/ - the
> > lexer and base grammar are in super.g, the parser/grammar in question is
> > in buildings.g, and the data file is buildings.txt.
> >
> > The error I get on running it is the slightly odd
> >
> > line 1:10: unexpected token: 0
> >
> > This is especially odd, as the grammar specifies that the first token it
> > should get *is* "0".
> >
> > I was just wondering if anyone could shed any light on this. You won't
> > be able to generate actual bytecode from the files I've given, as they
> > are part of a much bigger project. If anyone wants to see it all and
> > perhaps be able to compile it, it's in an svn repository that I can give
> >   people the address of. It's an eclipse project, so ANTLREclipse will
> > be useful to look at it in Eclipse.
> >
> > Sam
From jsamort at rogers.com  Sun Apr  9 08:58:42 2006
From: jsamort at rogers.com (Scott Amort)
Date: Sun Apr  9 08:58:45 2006
Subject: [antlr-interest] Puzzling Problem
In-Reply-To: <44392656.1050308@geekworld.co.uk>
References: <44392656.1050308@geekworld.co.uk>
Message-ID: <1144598323.8669.12.camel@localhost>

On Sun, 2006-04-09 at 16:20 +0100, Sam Barnett-Cormack wrote:
> The error I get on running it is the slightly odd
> 
> line 1:10: unexpected token: 0
> 
> This is especially odd, as the grammar specifies that the first token it 
> should get *is* "0".

Hi Sam,

I can offer a guess at this, but I am still pretty new to ANTLR.

I believe your lexer is returning a type of INT for the 0, while your
parser is checking for a literal "0".  Although you have turned on
testLiterals in your INT rule in the lexer, the problem is that you have
separate files for the parser and lexer.  So, the lexer has no
definition of the "0" literal.  You need to import the parser vocabulary
into your lexer to make this connection, and of course, this entails
running antlr on the parser first to generate that vocab, then on the
lexer.  It will also mess up your paraphrase= statements (see my email
of a day or so ago), but I don't see that you are using that feature.

HTH,
Scott

From sdb at geekworld.co.uk  Sun Apr  9 09:09:59 2006
From: sdb at geekworld.co.uk (Sam Barnett-Cormack)
Date: Sun Apr  9 09:10:35 2006
Subject: [antlr-interest] Puzzling Problem
In-Reply-To: <1144598323.8669.12.camel@localhost>
References: <44392656.1050308@geekworld.co.uk>
	<1144598323.8669.12.camel@localhost>
Message-ID: <443931D7.1010909@geekworld.co.uk>

Scott Amort wrote:
> On Sun, 2006-04-09 at 16:20 +0100, Sam Barnett-Cormack wrote:
> 
>>The error I get on running it is the slightly odd
>>
>>line 1:10: unexpected token: 0
>>
>>This is especially odd, as the grammar specifies that the first token it 
>>should get *is* "0".
> 
> 
> Hi Sam,
> 
> I can offer a guess at this, but I am still pretty new to ANTLR.
> 
> I believe your lexer is returning a type of INT for the 0, while your
> parser is checking for a literal "0".  Although you have turned on
> testLiterals in your INT rule in the lexer, the problem is that you have
> separate files for the parser and lexer.  So, the lexer has no
> definition of the "0" literal.  You need to import the parser vocabulary
> into your lexer to make this connection, and of course, this entails
> running antlr on the parser first to generate that vocab, then on the
> lexer.

And that would be a little odd... but I could instead statically define
the "0" literal in the lexer, I think... I just didn't think of the
effect of literals in the subgrammar. In fact, to be simpler, I could define

zero
   : "0"
   ;

In the supergrammar (which I'm sure is technically a subgrammar, but
meh), and use zero where I used "0" in the subgrammar (which is
technically a supergrammar, I think, but I'm just confusing the issue).

Sam


From sdb at geekworld.co.uk  Sun Apr  9 09:11:20 2006
From: sdb at geekworld.co.uk (Sam Barnett-Cormack)
Date: Sun Apr  9 09:12:02 2006
Subject: [antlr-interest] Puzzling Problem
In-Reply-To: <200604091746.26444.vidar@hawkis.com>
References: <44392656.1050308@geekworld.co.uk>	<200604091735.01028.vidar@hawkis.com>
	<200604091746.26444.vidar@hawkis.com>
Message-ID: <44393228.4050102@geekworld.co.uk>

Vidar H?kestad wrote:
> I'll correct myself: The only lexer rule I see that could catch the initial 
> "0" is the protected DIGIT (in the super.g), and protected methods in the 
> lexer never reaches the parser?

Actually, it can end up as an INT, which is what I think it's doing, but 
with the literals not being handled, as Scott has pointed out.

Sam

> On Sunday 09 April 2006 17:35, Vidar H?kestad wrote:
> 
>>Could it be that it actually is the lexer that complain? No lexer rules are
>>provided...
>>
>>Regards
>>Vidar
>>
>>On Sunday 09 April 2006 17:20, Sam Barnett-Cormack wrote:
>>
>>>Hi all,
>>>
>>>I have an odd problem with a parser I'm using. The relevant grammar and
>>>data files are at http://shed.geekworld.co.uk/~sdb/jguru/antlr/ - the
>>>lexer and base grammar are in super.g, the parser/grammar in question is
>>>in buildings.g, and the data file is buildings.txt.
>>>
>>>The error I get on running it is the slightly odd
>>>
>>>line 1:10: unexpected token: 0
>>>
>>>This is especially odd, as the grammar specifies that the first token it
>>>should get *is* "0".
>>>
>>>I was just wondering if anyone could shed any light on this. You won't
>>>be able to generate actual bytecode from the files I've given, as they
>>>are part of a much bigger project. If anyone wants to see it all and
>>>perhaps be able to compile it, it's in an svn repository that I can give
>>>  people the address of. It's an eclipse project, so ANTLREclipse will
>>>be useful to look at it in Eclipse.
>>>
>>>Sam


From jsamort at rogers.com  Sun Apr  9 09:30:43 2006
From: jsamort at rogers.com (Scott Amort)
Date: Sun Apr  9 09:30:46 2006
Subject: [antlr-interest] Puzzling Problem
In-Reply-To: <44393125.4090907@geekworld.co.uk>
References: <44392656.1050308@geekworld.co.uk>
	<1144598323.8669.12.camel@localhost> <44393125.4090907@geekworld.co.uk>
Message-ID: <1144600243.8669.21.camel@localhost>

On Sun, 2006-04-09 at 17:07 +0100, Sam Barnett-Cormack wrote:
> And that would be a little odd... but I could instead statically define 
> the "0" literal in the lexer, I think... I just didn't think of the 
> effect of literals in the subgrammar. In fact, to be simpler, I could define
> 
> zero
>    : "0"
>    ;

I don't think that will work - you will just end up with a ZERO token
type, and then a non-determinism error between ZERO and FLOAT_OR_INT.  I
think you could instead try adding:

tokens {
  "0";
}

After the options in your lexer.

Best,
Scott

From andrew at adersoftware.com  Sun Apr  9 10:58:32 2006
From: andrew at adersoftware.com (Andrew Deren)
Date: Sun Apr  9 09:58:47 2006
Subject: [antlr-interest] Advice needed 
In-Reply-To: <22292.195.169.118.236.1144252993.squirrel@webmail.xs4all.nl>
Message-ID: <000601c65bff$3745b0a0$6401a8c0@andrewx2>

See my examples at:
http://www.adersoftware.com/index.cfm?page=compilers
Includes small interpreter using Antlr (no treewalker, just custom AST
structure). Written in C# and Java.
Andrew

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Gevik Babakhani
Sent: Wednesday, April 05, 2006 10:03 AM
To: antlr-interest@antlr.org
Subject: [antlr-interest] Advice needed 

Folks,

I would like some advice of the following. Advice needed

I have been playing with ANTLR for sometime now and for learning reasons I
would like to create my own language interpreter. I looked at the
tinybasic and pascal (java) examples. I have no problem reading the
sources but I see that I just lack the knowledge of why and how things are
done.

I was wondering if anyone could recommend a book or any good writing about
creating a language interpreter or a compiler. Well, the lexer, the parser
and the tree walker part I understand but what happens next if one would
like to build a simple language interpreter.

(Function Scope?, Stack?!)

PS.
I know taking Ters classes at the uni would be the best option but I live
too far for that :(


Thank you.



From sdb at geekworld.co.uk  Sun Apr  9 09:59:56 2006
From: sdb at geekworld.co.uk (Sam Barnett-Cormack)
Date: Sun Apr  9 10:00:35 2006
Subject: [antlr-interest] Puzzling Problem
In-Reply-To: <1144600243.8669.21.camel@localhost>
References: <44392656.1050308@geekworld.co.uk>	<1144598323.8669.12.camel@localhost>
	<44393125.4090907@geekworld.co.uk>
	<1144600243.8669.21.camel@localhost>
Message-ID: <44393D8C.7050703@geekworld.co.uk>

Scott Amort wrote:
> On Sun, 2006-04-09 at 17:07 +0100, Sam Barnett-Cormack wrote:
> 
>>And that would be a little odd... but I could instead statically define 
>>the "0" literal in the lexer, I think... I just didn't think of the 
>>effect of literals in the subgrammar. In fact, to be simpler, I could define
>>
>>zero
>>   : "0"
>>   ;
> 
> 
> I don't think that will work - you will just end up with a ZERO token
> type, and then a non-determinism error between ZERO and FLOAT_OR_INT.

I was actually suggesting zero being a parser rule in the supergrammar. 
However, I think your other suggestion may be simpler, and also of 
course do it with "-99999" as well.

Sam

> I think you could instead try adding:
> 
> tokens {
>   "0";
> }
> 
> After the options in your lexer.
> 
> Best,
> Scott
> 


From sdb at geekworld.co.uk  Sun Apr  9 11:21:44 2006
From: sdb at geekworld.co.uk (Sam Barnett-Cormack)
Date: Sun Apr  9 10:21:50 2006
Subject: [antlr-interest] Puzzling Problem
In-Reply-To: <44393D8C.7050703@geekworld.co.uk>
References: <44392656.1050308@geekworld.co.uk>	<1144598323.8669.12.camel@localhost>	<44393125.4090907@geekworld.co.uk>	<1144600243.8669.21.camel@localhost>
	<44393D8C.7050703@geekworld.co.uk>
Message-ID: <443950B8.1080002@geekworld.co.uk>

Sam Barnett-Cormack wrote:
> Scott Amort wrote:
> 
>> On Sun, 2006-04-09 at 17:07 +0100, Sam Barnett-Cormack wrote:
>>
>>> And that would be a little odd... but I could instead statically
>>> define the "0" literal in the lexer, I think... I just didn't think
>>> of the effect of literals in the subgrammar. In fact, to be simpler,
>>> I could define
>>>
>>> zero
>>>   : "0"
>>>   ;
>>
>>
>>
>> I don't think that will work - you will just end up with a ZERO token
>> type, and then a non-determinism error between ZERO and FLOAT_OR_INT.
> 
> 
> I was actually suggesting zero being a parser rule in the supergrammar.
> However, I think your other suggestion may be simpler, and also of
> course do it with "-99999" as well.
> 
> Sam
> 


>> I think you could instead try adding:
>>
>> tokens {
>>   "0";
>> }
>>
>> After the options in your lexer.

Adding this caused all of the grammars that used that lexer to
completely die. Which was annoying.

I tried adding the rule

zero
  : "0"
  ;

to the super grammar (that is, a parser rule) and it made no difference
to the result whatsoever, even though that should have made the "0" a
literal known to the lexer.

Anyone got any more ideas? I'm going to look at the lexer-generator docs
some more anyway...

Sam
From parrt at cs.usfca.edu  Sun Apr  9 11:43:40 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun Apr  9 11:43:44 2006
Subject: [antlr-interest] StringTemplate name
Message-ID: <C45FFE8D-2B36-4087-A07F-27E353898789@cs.usfca.edu>

Hi,

So, StringTemplate is a pretty weak name for such a powerful little  
engine.  We all abbreviate it as ST anyway, should I just start  
migrating towards that?  I'm doing the academic paper on it right now  
and think I have a marketing problem with a tool that sounds like I'm  
playing with strings. ;)  The negative is that ST is not unique  
enough to find it with a search.  The site would stay the same as  
stringtemplate.org but I'd start using the shorthand all the time in  
doc etc...

ST?  +1

Ter
From scott at javadude.com  Sun Apr  9 12:08:49 2006
From: scott at javadude.com (Scott Stanchfield)
Date: Sun Apr  9 12:09:02 2006
Subject: [antlr-interest] StringTemplate name
In-Reply-To: <C45FFE8D-2B36-4087-A07F-27E353898789@cs.usfca.edu>
Message-ID: <200604091955.k39Jt1bY011670@s2.eroute.net>

Stifler  ;)

-- Scott

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Terence Parr
> Sent: Sunday, April 09, 2006 2:44 PM
> To: StringTemplate; Antlr List
> Subject: [antlr-interest] StringTemplate name
> 
> Hi,
> 
> So, StringTemplate is a pretty weak name for such a powerful 
> little engine.  We all abbreviate it as ST anyway, should I 
> just start migrating towards that?  I'm doing the academic 
> paper on it right now and think I have a marketing problem 
> with a tool that sounds like I'm playing with strings. ;)  
> The negative is that ST is not unique enough to find it with 
> a search.  The site would stay the same as stringtemplate.org 
> but I'd start using the shorthand all the time in doc etc...
> 
> ST?  +1
> 
> Ter
> 


From gevik at xs4all.nl  Sun Apr  9 13:17:49 2006
From: gevik at xs4all.nl (Gevik babakhani)
Date: Sun Apr  9 13:17:48 2006
Subject: [antlr-interest] Rule question.
Message-ID: <000701c65c12$ac60ce70$0a01a8c0@gevbook>

Folks, 

 

I have a question regarding Parser rules.

Let's say, I have the following rules in my lexer.

 

A : 'a';

B : 'b';

C ; 'c';

 

These three rules are all mandatory and must be present in the source file.
BUT the order of appearance in the source file is of no importance. One
could enter abc or cba or bca, cab in the source file.

How do I describe that in my parser rules?

 

Thank you.

 

 

   

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060409/159080df/attachment.html
From jbb at acm.org  Sun Apr  9 15:51:34 2006
From: jbb at acm.org (John B. Brodie)
Date: Sun Apr  9 15:51:41 2006
Subject: [antlr-interest] Rule question.
In-Reply-To: <000701c65c12$ac60ce70$0a01a8c0@gevbook> (message from Gevik
	babakhani on Sun, 09 Apr 2006 22:17:49 +0200)
References: <000701c65c12$ac60ce70$0a01a8c0@gevbook>
Message-ID: <E1FSiko-0000Ea-00@gecko>

Greetings!

>I have a question regarding Parser rules.
>Let's say, I have the following rules in my lexer.
>
>A : 'a';
>B : 'b';
>C ; 'c';
>
>These three rules are all mandatory and must be present in the source file.
>BUT the order of appearance in the source file is of no importance. One
>could enter abc or cba or bca, cab in the source file.
>
>How do I describe that in my parser rules?

Two ways that seem fairly common...

1) enumerate all six of the possibilities in a single (left-factored)
   rule, something similar to:

   the_abcs:
        ( A ( ( B C ) | ( C B ) ) )
      | ( B ( ( A C ) | ( C A ) ) )
      | ( C ( ( A B ) | ( B A ) ) )
      ;

or

2) allow any combination and use action code to enforce the single
   appearance rule, for example:

   the_abcs: { int a = 0; int b = 0; int c = 0; }
         ( A { ++a; } | B { ++b; } | C { ++c; } )+
         { if ((a!=1) || (b!=1) || (c!=1)) { ...generate error here... } }
         ;

hope this helps...
    -jbb
From sohail at taggedtype.net  Sun Apr  9 15:51:40 2006
From: sohail at taggedtype.net (Sohail Somani)
Date: Sun Apr  9 15:51:46 2006
Subject: [antlr-interest] Rule question.
In-Reply-To: <000701c65c12$ac60ce70$0a01a8c0@gevbook>
References: <000701c65c12$ac60ce70$0a01a8c0@gevbook>
Message-ID: <1144623100.8127.2.camel@localhost.localdomain>

On Sun, 2006-04-09 at 22:17 +0200, Gevik babakhani wrote:
> A : ?a?;
> B : ?b?;
> C ; ?c?;

aOrBOrC : A|B|C;
abc : aOrBOrC (aOrBOrC (aOrBOrC)?)? ; 

this will match bca acb, etc (unless I'm totally high, but I don't think
I had enough orange juice to have that happen)

From dholenstein at gmail.com  Mon Apr 10 00:31:43 2006
From: dholenstein at gmail.com (Dominik Holenstein)
Date: Mon Apr 10 00:31:47 2006
Subject: [antlr-interest] ANTLR for Business Rules based on SBVR
Message-ID: <8ab6a9f00604100031w5ce2bbadh298b59876df5c148@mail.gmail.com>

Hello Group,

Has anybody experiences in developing a Business Rules parser based on
the 'Semantics of Business Vocabulary and Business Rules (SBVR)'?

My goal is to develop a Business Rule engine which allows the user to
enter the Busienss Rules in plain English grammer (and later in German
grammar) and to translate the Business Rules into Java.

This is a project in a very early stage so all tips are welcome.

Thanks!

Dominik
From ric.klaren at gmail.com  Mon Apr 10 03:57:54 2006
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Apr 10 03:57:59 2006
Subject: [antlr-interest] importVocab question
In-Reply-To: <1144532934.20825.11.camel@localhost>
References: <1144532934.20825.11.camel@localhost>
Message-ID: <bc607a4e0604100357l5282423ao2f908d08493e7a86@mail.gmail.com>

Hi,

On 4/8/06, Scott Amort <jsamort@rogers.com> wrote:
> I have my ANTLR lexer and parser grammars separated into two files.
> Now, my lexer scans identifiers and tests them against the literals
> table.  The problem here is that there is not a literals table yet, as
> they are all defined in the parser.  To solve this, I import my parser
> vocabulary into the lexer (with importVocab), which also necessitates
> running antlr on the parser first.  This seems to work and everything
> runs fine, except one thing.  Within the lexer, I have numerous
> paraphrase="x" statements to make any error output a bit more
> understandable.  These statements do not make it to the parser, as the
> parser is not inputting the vocabulary from the lexer, but it is instead
> operating the other way around. If I do try to input the lexer
> vocabulary, I end up with a circular dependency - the parser must
> generate its vocab first, but in order to do so it needs the lexer
> vocab, but the lexer needs the parser's vocab to work, and so on.  Is
> there a way to fix this?

Define all tokens in the lexer or define all tokens in the parser.
Export/ImportVocab 'chains' are best built linearly: lexer -> parser
-> treerewriter -> treeparser. Also make sure to get the build order
right, it gives very strange behaviour if you don't (double check the
tokenTypes.txt files when in doubt and see if tokens appear twice or
with different numbers assigned to them).

Cheers,

Ric
From sdb at geekworld.co.uk  Mon Apr 10 05:00:07 2006
From: sdb at geekworld.co.uk (Sam Barnett-Cormack)
Date: Mon Apr 10 04:00:12 2006
Subject: [antlr-interest] Puzzling Problem - The Sequel
Message-ID: <443A48C7.5060008@geekworld.co.uk>

So, that problem went away, and silly errors in the rest of my code got
fixed, and then I discovered a change in the spec for that data file,
requiring me to accept and discard a line starting with a hash before
any polygon (before a 0 or -99999 line).

So, as can be seen in the new versions of the files at
http://shed.geekworld.co.uk/~sdb/jguru/antlr/, the building rule has become

building returns [Vector<Vector<Floatpair>> data = new
Vector<Vector<Floatpair>>()]
  { Vector<Floatpair> pairs = null; }
  : (hashline)?
    pairs=build_polygon { data.add(pairs); }
    ((hashline)? pairs=cavity_polygon { data.add(pairs); })*
  ;

Unfortunately, this suddenly causes a bizarre nondeterminism error in
cavity_polygon, on the ()+ rule, of a nondeterminism upon k==1:HASH,
k==2:just-about-anything. This doesn't make much sense, as the exit
branch of the subrule should only be END. So, I'm confused.

Anyone able to shed any light on this? I'm particularly confused as to
how the nondeterminism appeared in a rule that hadn't changed, due to a
change in another rule...

Sam
From Jeff.Barnes at codesic.com  Mon Apr 10 08:43:42 2006
From: Jeff.Barnes at codesic.com (Jeff Barnes)
Date: Mon Apr 10 08:42:27 2006
Subject: [antlr-interest] StringTemplate name
References: <C45FFE8D-2B36-4087-A07F-27E353898789@cs.usfca.edu>
Message-ID: <FC6B2BF8B2FE854EAE0C380E55CA5734119DB0@hq-app2.CODESIC.COM>

String Template Pages (STP) ?

________________________________

From: antlr-interest-bounces@antlr.org on behalf of Terence Parr
Sent: Sun 4/9/2006 11:43 AM
To: StringTemplate; Antlr List
Subject: [antlr-interest] StringTemplate name



Hi,

So, StringTemplate is a pretty weak name for such a powerful little 
engine.  We all abbreviate it as ST anyway, should I just start 
migrating towards that?  I'm doing the academic paper on it right now 
and think I have a marketing problem with a tool that sounds like I'm 
playing with strings. ;)  The negative is that ST is not unique 
enough to find it with a search.  The site would stay the same as 
stringtemplate.org but I'd start using the shorthand all the time in 
doc etc...

ST?  +1

Ter




From antlr at jazillian.com  Mon Apr 10 13:29:30 2006
From: antlr at jazillian.com (Andy Tripp)
Date: Mon Apr 10 13:29:12 2006
Subject: [antlr-interest] JavaEmitter update questions
In-Reply-To: <443863CB.9080602@hol.gr>
References: <443863CB.9080602@hol.gr>
Message-ID: <443AC02A.6060300@jazillian.com>

Vaios,
I sent you an email response to this a while back, I guess you didn't 
get it.
The answer is just to look at the AST. Don't get caught up in trying to 
understand
the ANTLR grammar (unless you want to). Just use the ASTFrame class that
came with ANTLR or use some other simple way to print out the AST and go 
from there.

IIRC, there is no classOrInterfaceType in the ANTLR-generated 
JavaTokenTypes.java,
only LITERAL_class and LITERAL_interface.

Andy


Vaios Kalpias wrote:

> I have made some progress updating the JavaEmitter class for Java 1.5, 
> but I'd like to ask a few questions. First, I'd like to let you all 
> know that I'm using the grammar that can be found at the ANTLR files. 
> The first major difficulty I faced was implementing the 
> classOrInterfaceType. This rule is as follows:
>
> classOrInterfaceType
>   :    IDENT (typeArguments)?
>   |    #( DOT classOrInterfaceType )
>   ;
>
> typeArguments
>   :    #(TYPE_ARGUMENTS (typeArgument)+)
>   ;
>
> typeArgument
>   :    #(    TYPE_ARGUMENT
>           (    typeSpec
>           |    wildcardType
>           )
>       )
>   ;
>
> The problem is that I don't understand how am I going to put 
> classOrInterfaceType in the big switch statement since antlr does not 
> "setType" a #CLASSORINTERFACETYPE. I figured that in this case we 
> follow the rule until we find a # symbol, which is then inserted in 
> the switch statement. But in this case classOrInterfaceType ends up 
> using IDENT (typeArguments)? and IDENT is never a root node in the 
> AST. I hope I made u understand my question!! There are more things 
> I'm trying to figure out, but if I understand this I believe I'll 
> solve my other problems too.
>
> Regards,
> Vaios.
>

From antlr at jazillian.com  Mon Apr 10 13:32:17 2006
From: antlr at jazillian.com (Andy Tripp)
Date: Mon Apr 10 13:31:59 2006
Subject: [antlr-interest] Using ANTLR to help translate C++ to C#
In-Reply-To: <21c992360604081011y3bf475a5t898cd5390203c2e5@mail.gmail.com>
References: <21c992360604081011y3bf475a5t898cd5390203c2e5@mail.gmail.com>
Message-ID: <443AC0D1.5040009@jazillian.com>

Joshua Gough wrote:

> Hello,
>
> I have some files that have a large amount of business logic 
> implemented in C++ / COM. For performance reasons, I may need to 
> convert these to C# to avoid COM interop performance issues. Manually 
> doing this would involve removing some macros, removing some 
> com-specific try/catch statements, and transitioning some pointers to 
> first-class return values. The business logic will stay almost 100% 
> the same though.
>
> I was wondering if using ANTLR might be a way to help automate this 
> task. Does anyone have any suggestions on the feasisbility of that?
>
> Thanks,
> Josh

It's a lot more work than you'd think.
I make a C-to-Java product called Jazillian.
See http://www.jazillian.com/how.html for a partial list of  what it does.
For C++, you'll need to do all that and more.
The good news is that I'm working on a C++ to Java product.
The bad news is that it won't be ready for a couple of months.

Andy
From parrt at cs.usfca.edu  Mon Apr 10 14:32:14 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Apr 10 14:32:18 2006
Subject: [antlr-interest] StringTemplate name
In-Reply-To: <FC6B2BF8B2FE854EAE0C380E55CA5734119DB0@hq-app2.CODESIC.COM>
References: <C45FFE8D-2B36-4087-A07F-27E353898789@cs.usfca.edu>
	<FC6B2BF8B2FE854EAE0C380E55CA5734119DB0@hq-app2.CODESIC.COM>
Message-ID: <38DA476D-DE1A-4D55-B5D4-94242B512C41@cs.usfca.edu>


On Apr 10, 2006, at 8:43 AM, Jeff Barnes wrote:

> String Template Pages (STP) ?

That limits it to web pages though ;)
Ter
From dragonoe at mcmaster.ca  Mon Apr 10 14:42:43 2006
From: dragonoe at mcmaster.ca (O.E. Dragon)
Date: Mon Apr 10 14:42:46 2006
Subject: [antlr-interest] StringTemplate name
In-Reply-To: <38DA476D-DE1A-4D55-B5D4-94242B512C41@cs.usfca.edu>
Message-ID: <web-123049126@cgpsrv2.cis.mcmaster.ca>

On Mon, 10 Apr 2006 14:32:14 -0700
 Terence Parr <parrt@cs.usfca.edu> wrote:
> 
> On Apr 10, 2006, at 8:43 AM, Jeff Barnes wrote:
> 
> > String Template Pages (STP) ?
> 
> That limits it to web pages though ;)
> Ter

Seeing STP I couldn't help but think of the band Stone Temple Pilots.
How about Stone Template Pilots :)

I'm terrible at coming up with names so I'll refrain from contributing
to this thread in the future.

-Olivier
From vidar at hawkis.com  Mon Apr 10 15:52:23 2006
From: vidar at hawkis.com (Vidar =?iso-8859-1?q?H=E5kestad?=)
Date: Mon Apr 10 15:52:27 2006
Subject: [antlr-interest] StringTemplate name
In-Reply-To: <38DA476D-DE1A-4D55-B5D4-94242B512C41@cs.usfca.edu>
References: <C45FFE8D-2B36-4087-A07F-27E353898789@cs.usfca.edu>
	<FC6B2BF8B2FE854EAE0C380E55CA5734119DB0@hq-app2.CODESIC.COM>
	<38DA476D-DE1A-4D55-B5D4-94242B512C41@cs.usfca.edu>
Message-ID: <200604110052.23860.vidar@hawkis.com>

Tell me in 4 words what it is!

Taht should get you going...

Vidar


On Monday 10 April 2006 23:32, Terence Parr wrote:
> On Apr 10, 2006, at 8:43 AM, Jeff Barnes wrote:
> > String Template Pages (STP) ?
>
> That limits it to web pages though ;)
> Ter
From parrt at cs.usfca.edu  Mon Apr 10 15:56:35 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Apr 10 15:56:39 2006
Subject: [antlr-interest] Re: [stringtemplate-interest] StringTemplate name
In-Reply-To: <29a6ca010604101540p12b50f7pba4fecf1b7af714f@mail.gmail.com>
References: <C45FFE8D-2B36-4087-A07F-27E353898789@cs.usfca.edu>
	<29a6ca010604101540p12b50f7pba4fecf1b7af714f@mail.gmail.com>
Message-ID: <C4E20906-BA30-4BFD-AF6D-88E7B18782BC@cs.usfca.edu>


On Apr 10, 2006, at 3:40 PM, Colin Bean wrote:

> What happened to "He-man's Velociraptor Toolkit for Positive Text
> Generation Experience"?  I liked that one...

Yep I should put that back in ;)

Ter
From fermin.reig at gmail.com  Mon Apr 10 16:00:45 2006
From: fermin.reig at gmail.com (F Reig)
Date: Mon Apr 10 16:00:47 2006
Subject: [antlr-interest] Re: ANTLR 2.7.6: are existing bugs being fixed?
In-Reply-To: <4f1b77310604061709p5e0ee4cu33146fcbe65b5279@mail.gmail.com>
References: <4f1b77310604061709p5e0ee4cu33146fcbe65b5279@mail.gmail.com>
Message-ID: <4f1b77310604101600m25f0ef82le2a79be8cad01ba@mail.gmail.com>

On 4/7/06, F Reig <fermin.reig@gmail.com> wrote:
>
> Note that I'm not reporting a problem with my own grammar, but with
> one of the examples distributed with ANTLR 2.7.6. The output differs
> if C# or Java are generated.

After all, it's not a bug in ANTLR itself, but in the example. In cpp.g, replace

        } catch (/*NoSuchElement*/Exception /*e*/) {

by

        } catch (InvalidOperationException) {

in function uponEOF

Fermin
From craymer at warpiv.com  Mon Apr 10 16:28:28 2006
From: craymer at warpiv.com (Loring Craymer)
Date: Mon Apr 10 16:28:41 2006
Subject: [antlr-interest] Re: [stringtemplate-interest] StringTemplate name
In-Reply-To: <C4E20906-BA30-4BFD-AF6D-88E7B18782BC@cs.usfca.edu>
Message-ID: <000f01c65cf6$7f55afb0$8502a8c0@Fafnir>

How about OM for Output Macros?  It seems to be one of the few very short
acronyms that hasn't already been appropriated by some software package or
another.  Besides, About.com defines Om as

" The word Om (aum) derives from the Sanskrit. The Om is the primordial
sound by which the earth was created- a similar concept to the Greek Logos."

which seems more than appropriate ...

--Loring

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Terence Parr
> Sent: Monday, April 10, 2006 3:57 PM
> To: StringTemplate; Antlr List
> Subject: [antlr-interest] Re: [stringtemplate-interest] StringTemplate
> name
> 
> 
> On Apr 10, 2006, at 3:40 PM, Colin Bean wrote:
> 
> > What happened to "He-man's Velociraptor Toolkit for Positive Text
> > Generation Experience"?  I liked that one...
> 
> Yep I should put that back in ;)
> 
> Ter

From Bernhard.Schmalhofer at gmx.de  Tue Apr 11 10:57:52 2006
From: Bernhard.Schmalhofer at gmx.de (Bernhard Schmalhofer)
Date: Tue Apr 11 10:57:57 2006
Subject: [antlr-interest] Re: [stringtemplate-interest] StringTemplate name
In-Reply-To: <29a6ca010604101540p12b50f7pba4fecf1b7af714f@mail.gmail.com>
References: <C45FFE8D-2B36-4087-A07F-27E353898789@cs.usfca.edu>
	<29a6ca010604101540p12b50f7pba4fecf1b7af714f@mail.gmail.com>
Message-ID: <443BEE20.2030202@gmx.de>

Hi,

>But really, +1 on ST
>  
>
I think that ST by itself is too non-descriptive.
How about SimpleTemplate? ST is a templating engine and is simple, in a 
good way.

Another 2c,
  Bernhard

From Thomas.Jackson at microfocus.com  Tue Apr 11 11:03:32 2006
From: Thomas.Jackson at microfocus.com (Thomas Jackson III)
Date: Tue Apr 11 11:04:27 2006
Subject: [antlr-interest] Re: [stringtemplate-interest] StringTemplate name
Message-ID: <8818ADCA969F2F4DA513CEE078066DCA010DB35A@rock-exchange.microfocus.com>


STOMP

STring Output GraMmar Package



-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Bernhard
Schmalhofer
Sent: Tuesday, April 11, 2006 1:58 PM
To: antlr-interest@antlr.org
Subject: [antlr-interest] Re: [stringtemplate-interest] StringTemplate
name

Hi,

>But really, +1 on ST
>  
>
I think that ST by itself is too non-descriptive.
How about SimpleTemplate? ST is a templating engine and is simple, in a
good way.

Another 2c,
  Bernhard



This message has been scanned for viruses by MailController -
www.MailController.altohiway.com
From sdb at geekworld.co.uk  Tue Apr 11 12:32:16 2006
From: sdb at geekworld.co.uk (Sam Barnett-Cormack)
Date: Tue Apr 11 11:32:23 2006
Subject: [antlr-interest] Re: [stringtemplate-interest] StringTemplate name
In-Reply-To: <443BEE20.2030202@gmx.de>
References: <C45FFE8D-2B36-4087-A07F-27E353898789@cs.usfca.edu>	<29a6ca010604101540p12b50f7pba4fecf1b7af714f@mail.gmail.com>
	<443BEE20.2030202@gmx.de>
Message-ID: <443C0440.8060106@geekworld.co.uk>

Bernhard Schmalhofer wrote:
> Hi,
> 
>> But really, +1 on ST
>>  
>>
> I think that ST by itself is too non-descriptive.
> How about SimpleTemplate? ST is a templating engine and is simple, in a
> good way.

I think, perhaps, a more descriptive acronym like ANTLR might be worth
it. I know there is an investment in the current domain name, but hey,
if you really want a good name, you have to ignore the sunk-cost fallacy.

So, how about something like Powerful Flexible Textual Templating
Engine, abbreviated to... ummm... PoFTeT? Reminds me a little of MOSFET...

Okay, that one specifically is lame, but you get the idea I'm aiming at

Sam, with many more tuppences available...
From parrt at cs.usfca.edu  Tue Apr 11 11:58:24 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Apr 11 11:58:26 2006
Subject: [antlr-interest] Re: [stringtemplate-interest] StringTemplate name
In-Reply-To: <000f01c65cf6$7f55afb0$8502a8c0@Fafnir>
References: <000f01c65cf6$7f55afb0$8502a8c0@Fafnir>
Message-ID: <E3D5B992-9CE5-489A-BBDB-C998E7C979F9@cs.usfca.edu>


On Apr 10, 2006, at 4:28 PM, Loring Craymer wrote:

> How about OM for Output Macros?  It seems to be one of the few very  
> short
> acronyms that hasn't already been appropriated by some software  
> package or
> another.  Besides, About.com defines Om as
>
> " The word Om (aum) derives from the Sanskrit. The Om is the  
> primordial
> sound by which the earth was created- a similar concept to the  
> Greek Logos."
>
> which seems more than appropriate ...


Sweet.  Only problem is that ".om" is the file extension for the  
Mantra language Jean and I are building! ;)

Ter
From dragonoe at mcmaster.ca  Tue Apr 11 12:21:58 2006
From: dragonoe at mcmaster.ca (O.E. Dragon)
Date: Tue Apr 11 12:15:35 2006
Subject: [antlr-interest] StringTemplate name
In-Reply-To: <web-123049126@cgpsrv2.cis.mcmaster.ca>
References: <38DA476D-DE1A-4D55-B5D4-94242B512C41@cs.usfca.edu>
	<web-123049126@cgpsrv2.cis.mcmaster.ca>
Message-ID: <20060411192158.GA14194@dragon.homelinux.org>

On Mon, Apr 10, 2006 at 05:42:43PM -0400, O.E. Dragon wrote:
> I'm terrible at coming up with names so I'll refrain from contributing
> to this thread in the future.

Looking at all the conversation on the list for a better ST name I
couldn't stop myself from thinking about it :) Why do I feel 

So I looked at current templating engines names. Those that come up
first in google include:
 - Smarty (PHP)
 - Velocity
 - Cheetah (Python)
 - StringTemplate

In honour of Terence I though about "Parence." But I felt the idea of
templates was somewhat lost.

After that I thought maybe play on velocity: in physics velocity times
mass is momentum. But I felt that was cheating and kind of boring too.

Then I thought, why not something a little more artistic. Being
french-canadian, I figured french usually adds style and distinction to
normally boring english names.

I looked at roots of the word template. There was templet which bores me
to death, and temple which is really misleading. The idea of stencil
then popped in my head. So what do you think of "Estenceler" (.est file
extension: Estenceler String Template, to keep some of the original name
:) ?

-Olivier

-- 
          __-/|    ? ?     |\-__
     __--/  /  \   (^^)   /  \  \--__
  _-/   /   /  /\ / ( )  /\  \   \   \-_
 /  /   /  /  /  (   ^^ ~  \  \  \   \  \
 / Oli Dragon    ( dragonoe@mcmaster.ca \
/  B.Eng. Sfwr   ( dragon.homelinux.org  \
/  /  /    /__--_ (   ) __--__\    \  \  \
|  /  /  _/        \_ \_       \_  \  \  |
 \/  / _/            \_ \_       \_ \  \/
  \_/ /                -\_\        \ \_/
    \/                    )         \/
                        *~
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20060411/0891224a/attachment.bin
From ewbank at gmail.com  Tue Apr 11 12:59:16 2006
From: ewbank at gmail.com (Bryan Ewbank)
Date: Tue Apr 11 12:59:19 2006
Subject: [antlr-interest] C++ code, help with custom AST initialize() method
Message-ID: <dd3a065f0604111259g712a34baha9bccd6f125797e4@mail.gmail.com>

I've run into a problem that I can't seem to get my mind around...

    - ANTLR 2.7.5
    - C++ codegen
    - Custom AST class

I've defined a custom AST class, TreeNode, derived from
antlr::CommonAST, and am using the associated smart-pointer class in
all my grammars.

The problem comes when ANTLR generates code to initialize RefTreeNode objects:
     RefTreeNode id = RefTreeNode(antlr::nullAST);
Since antlr::nullAST is /not/ a TreeNode, this is effectively an
incorrect cast from a base class to a derived class.

Later on, when "id" is used in the TreeNode::initialize() function, it
dies because the object pointed to be antlr::nullAST does not have the
correct information from which to completely initialize a TreeNode. 
It only has the stuff for a CommonAST.

So, how am I supposed to handle the fact that something which is an
antlr::nullAST may be used where an object of type RefTreeNode is
expected?

If this sounds at all familiar, please let me know what you did to get
around this problem.

Thank you,
- Bryan Ewbank
From parrt at cs.usfca.edu  Tue Apr 11 13:43:47 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Apr 11 13:43:51 2006
Subject: [antlr-interest] StringTemplate name
In-Reply-To: <20060411192158.GA14194@dragon.homelinux.org>
References: <38DA476D-DE1A-4D55-B5D4-94242B512C41@cs.usfca.edu>
	<web-123049126@cgpsrv2.cis.mcmaster.ca>
	<20060411192158.GA14194@dragon.homelinux.org>
Message-ID: <5206A733-362E-46F4-BAB4-5EFFBE84A829@cs.usfca.edu>


On Apr 11, 2006, at 12:21 PM, O.E. Dragon wrote:
> I looked at roots of the word template. There was templet which  
> bores me
> to death, and temple which is really misleading. The idea of stencil
> then popped in my head. So what do you think of "Estenceler" (.est  
> file
> extension: Estenceler String Template, to keep some of the original  
> name
> :) ?

Nice :)  I'll probably just say StringTemplate the first time in the  
paper and then use ST the rest...

Ter
From prashant.deva at gmail.com  Tue Apr 11 13:44:09 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Tue Apr 11 13:44:12 2006
Subject: [antlr-interest] ANTLR Studio website- Very Serious Crash :(
Message-ID: <41fed8f80604111344r36c6f802ibe030b99e60c72c7@mail.gmail.com>

The ANTLR Studio website (placidsystems.com) is down.
My host seems to have experienced a very bad crash from which all the data
could not be recovered properly.
My fault partly that I did not change the host last time.
The current website is their backup of it of 3 months ago.

I am trying to restore all the stuff. It should be done in a few hours.

My latest backup is only tilll 25/3/06. This applies for evaluation licenses
only.

All purchased licenses will be recovered though, since that information is
stored with my payment processor.
If you have changed your password since then, it will be reset to the one
that was mailed to you initially when you purchased your license.

The rest of the accounts containing only evaluation, well they are gone
forever :(

I am immediately transferring to a new host as soon as possible.

For the record and so that search engines can index this information
correctly -
Brainpulse.com web hosting & their support sucks! Dont buy it even unless
you are crazy!!

--
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060412/c61bb55b/attachment.html
From prashant.deva at gmail.com  Tue Apr 11 15:37:59 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Tue Apr 11 15:38:02 2006
Subject: [antlr-interest] Very badly need another host
Message-ID: <41fed8f80604111537i2fdff65bm28c13f1d3a3ddabd@mail.gmail.com>

I am really badly looking for a new hosting provider. I have the following
requirements-
asp.net 1.1
java 1.4
mysql db
4gb transfer
24/7 tech supprt

Last time I asked, I got 2 replies pointing to the following-
ixwebhosting.com - Doesnt support java
metawerx.com.au- Their email support hasnt replied in over 20 hours and
their free trial doesnt work in india.


Could somebody please suggest a good hosting provider?

Thanks,
--
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060412/b6de5920/attachment.html
From prashant.deva at gmail.com  Tue Apr 11 17:46:52 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Tue Apr 11 17:46:58 2006
Subject: [antlr-interest] Re: ANTLR Studio website- Very Serious Crash :(
In-Reply-To: <41fed8f80604111344r36c6f802ibe030b99e60c72c7@mail.gmail.com>
References: <41fed8f80604111344r36c6f802ibe030b99e60c72c7@mail.gmail.com>
Message-ID: <41fed8f80604111746k22a29217xae397f0b5f66504c@mail.gmail.com>

Ok, everything should be working just as normal now.

The only thing that has been affected is that all accounts since 25/03/06
which contain only an evaluation license have been erased.
This shouldnt pose a problem for most people as you already have a copy of
the eval license and if you purchase the full version a new account will be
automatically created.
In worst case, you gotta re register at the site.

No changes for accounts containing full version licenses. As this
information resides with my payment process SWReg, I have been able to
restore it fully.

The Antlr Studio forum (antlrstudio.com/forum) has got a few messages
deleted as i didnt keep a backup of that.

If you do encounter any more problems with the website, do let me know.


--
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com

On 4/12/06, Prashant Deva <prashant.deva@gmail.com> wrote:
>
> The ANTLR Studio website (placidsystems.com) is down.
> My host seems to have experienced a very bad crash from which all the data
> could not be recovered properly.
> My fault partly that I did not change the host last time.
> The current website is their backup of it of 3 months ago.
>
> I am trying to restore all the stuff. It should be done in a few hours.
>
> My latest backup is only tilll 25/3/06. This applies for evaluation
> licenses only.
>
> All purchased licenses will be recovered though, since that information is
> stored with my payment processor.
> If you have changed your password since then, it will be reset to the one
> that was mailed to you initially when you purchased your license.
>
> The rest of the accounts containing only evaluation, well they are gone
> forever :(
>
> I am immediately transferring to a new host as soon as possible.
>
> For the record and so that search engines can index this information
> correctly -
> Brainpulse.com web hosting & their support sucks! Dont buy it even unless
> you are crazy!!
>
> --
> Prashant Deva
> Creator, ANTLR Studio
> Founder, Placid Systems, www.placidsystems.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060412/64ae7912/attachment.html
From amohombe at yahoo.com  Wed Apr 12 02:05:21 2006
From: amohombe at yahoo.com (Ahmed Mohombe)
Date: Wed Apr 12 02:05:41 2006
Subject: [antlr-interest] Re: Very badly need another host
In-Reply-To: <41fed8f80604111537i2fdff65bm28c13f1d3a3ddabd@mail.gmail.com>
References: <41fed8f80604111537i2fdff65bm28c13f1d3a3ddabd@mail.gmail.com>
Message-ID: <e1ifsg$vns$1@sea.gmane.org>

> I am really badly looking for a new hosting provider. I have the 
> following requirements-
> asp.net <http://asp.net> 1.1
> java 1.4
> mysql db
> 4gb transfer
> 24/7 tech supprt
> 
> Last time I asked, I got 2 replies pointing to the following-
> ixwebhosting.com <http://ixwebhosting.com> - Doesnt support java
> metawerx.com.au- Their email support hasnt replied in over 20 hours and 
> their free trial doesnt work in india.
Why don't you try with a "root server". There you can install everything
you want and how you want. For such cases you also need mostly no tech support
as with root access you can do with SSH everything you want.
The costs are also not much higher and depending on the Service Provider, one
can host many sites and applications on the same server, thus reducing the costs per site
even more than one could do with a simple hosting.
I'm not sure what about India, but there are many international providers that accept payments
with credit cards so it is not important for them where the customer lives.


Ahmed.

From Yassin.Chkouri at imag.fr  Wed Apr 12 02:38:06 2006
From: Yassin.Chkouri at imag.fr (Yassin Chkouri)
Date: Wed Apr 12 02:38:20 2006
Subject: [antlr-interest] ANTR
Message-ID: <443CCA7E.10705@verimag>

Hello,
I want to generate EMF (Eclipse Modeling Framework)*, *starting from a 
gramaire writes in ANTLR. it is possible ?    what is the best method 
than I must used ?

Yassin
From antlr at jazillian.com  Wed Apr 12 06:34:33 2006
From: antlr at jazillian.com (Andy Tripp)
Date: Wed Apr 12 06:34:15 2006
Subject: [antlr-interest] Very badly need another host
In-Reply-To: <41fed8f80604111537i2fdff65bm28c13f1d3a3ddabd@mail.gmail.com>
References: <41fed8f80604111537i2fdff65bm28c13f1d3a3ddabd@mail.gmail.com>
Message-ID: <443D01E9.80107@jazillian.com>

Prashant Deva wrote:

> I am really badly looking for a new hosting provider. I have the 
> following requirements-
> asp.net <http://asp.net> 1.1
> java 1.4
> mysql db
> 4gb transfer
> 24/7 tech supprt
>
> Last time I asked, I got 2 replies pointing to the following-
> ixwebhosting.com <http://ixwebhosting.com> - Doesnt support java
> metawerx.com.au- Their email support hasnt replied in over 20 hours 
> and their free trial doesnt work in india.
>
>
> Could somebody please suggest a good hosting provider?
>
> Thanks,
> -- 
> Prashant Deva
> Creator, ANTLR Studio
> Founder, Placid Systems, www.placidsystems.com 
> <http://www.placidsystems.com>

I've been using eapps.com for a few years now and I'm very happy with them.
Great uptime and support, lots of supported software packages to choose 
from,
a nice "control panel", SSH access with "root". I've been very happy 
with them.
I don't know if they support asp.net though.

Andy
From Michiel_Vermandel at axi.be  Wed Apr 12 08:22:43 2006
From: Michiel_Vermandel at axi.be (Michiel Vermandel)
Date: Wed Apr 12 08:22:49 2006
Subject: [antlr-interest] recovering from incomplete syntax
Message-ID: <OFA27552B7.CFB1239C-ONC125714E.005467A3-C125714E.00547A49@Axi.be>

Hi, 

I am using Antlr 2.7.4. 
I am writing a syntax parser/checker that needs to provide code 
completion. The supported languages are Oracle Forms and a custom langauge 
of my company. I am wondering what the best approche is to recover from an 
incomplete statement and at the same time being able to offer code 
completion. Example: let's say I'm writing a forms trigger: 
This is for example what the user types in a text area: 

<pre> 
declare 
   lName varchar2(64); 
begin 
   lName := :MYBLOCK.| 

   lName := UPPER(lName); 
end; 
</pre> 

The | after :MYBLOCK. is the current position of the carret. 
So at this point he wants to be able to get a list of block fields for 
this block. (I do have a framework to get the fields for this block, once 
the code is parsed and I know :MYBLOCK is a block). 
<BR> 
However, at this point the statement is incomplete. (At the end, the user 
wants to wite lName := :MYBLOCK.MYFIELD;) 
<BR>Now I don't know how to handle this situation. The syntax is 
incomplete, thus the parser does not get to the point of building an AST, 
so I can not figure out that :MYBLOCK. is an - incomplete - reference to a 
block field. I guess I need some kind of recovering of the exception that 
occured during the parsing. 
But here I get to a second problem. I have a definition of bindVariable in 
my grammar like this: 
<pre>COLON! IDENTIFIER (DOT IDENTIFIER)? </pre> 
Since The lexer skips any space, tab or CRLF characters (usual WS 
implementation), The parser sees the following line of code: 
<tt>lName := :MYBLOCK.lName := UPPER(lName);</tt> 
So, in order to detect the real problem, I need to take the 
enter-character into account. This means that I can not set the WS lexer 
rule to type Token.SKIP. But that again will require a lot of changes into 
my parser grammer (to accept the WS characters) and probably will cause a 
lot of overhead.<br> 
So, how can I solve this issue?<br> 
=> how to make clear that the code is 
<tt>lName := :MYBLOCK.|</tt> and not 
<tt>lName := :MYBLOCK.lName := UPPER(lName);</tt><br> 
=> how to recover and complete the syntax parsing so I know I have an 
incomplete block field reference? 
(I wanted to extend my bindVariable definition with a second rule: 
<BR>incomplete_bindVariable: IDENTIFIER DOT WS 
) 

Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060412/68c9810a/attachment.html
From prashant.deva at gmail.com  Wed Apr 12 11:09:13 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Wed Apr 12 11:09:16 2006
Subject: [antlr-interest] Antlr studio website- fully recovered
Message-ID: <41fed8f80604121109y258318bufd3a8ecc118ed438@mail.gmail.com>

ANTLR Studio website (placidsystems.com) has fully recovered now.

Thankfully the hosting provider kept the latest snapshot of the database, so
we have got back all the user accounts!

I am now looking for a good dedicated server to reduce downtime to absolute
0.

--
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060412/9efc4d26/attachment.html
From jasonriz at yahoo.com  Wed Apr 12 12:00:29 2006
From: jasonriz at yahoo.com (Jason)
Date: Wed Apr 12 12:00:31 2006
Subject: [antlr-interest] Using ANTLR parser with JFlex lexer
In-Reply-To: <41fed8f80604121109y258318bufd3a8ecc118ed438@mail.gmail.com>
Message-ID: <20060412190029.73193.qmail@web30309.mail.mud.yahoo.com>

Hello,

I'm interested in the possibility of using the antlr
parser in conjunction with the Flex lexer.  I'm pretty
sure that this is possible.  Has anyone ever done it? 
Is there some sample code anywhere?  I spent some time
poking around the antlr site and found a lot of
helpful information but nothing about this use case
specifically.  Thanks in advance for any replies.

-jason


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From sdb at geekworld.co.uk  Wed Apr 12 16:28:47 2006
From: sdb at geekworld.co.uk (Sam Barnett-Cormack)
Date: Wed Apr 12 15:28:58 2006
Subject: [antlr-interest] Lexer problem with multiple syntactic predicates
 passing down to other rules
Message-ID: <443D8D2F.4050406@geekworld.co.uk>

As the amazingly verbose subject suggests, I have a lexer problem. The
file is at http://shed.geekworld.co.uk/~sdb/jguru/antlr/csv.g

Basically, it's reading a file with the first line:

Dept,X,Y

The parser is expecting a token of type MIXEDTEXT, QUOTEDSTRING, INT or
FLOAT. Of course, the lexer is matching to type FIELD, but the actions
and syntactic predicates send it down to match a MIXEDTEXT, and I
thought it would be setting the token type. However, it seems only the
first one or two $setType()s are acting, as it actually ends up as a
FLOAT_OR_INT_OR_STRING (or that might be a FLOAT_OR_STRING). I'm
confused. Can anyone shed any light on this?

Sam
From erikforbes at gmail.com  Wed Apr 12 17:16:37 2006
From: erikforbes at gmail.com (Erik Forbes)
Date: Wed Apr 12 17:16:42 2006
Subject: [antlr-interest] Looking for a very simple example
Message-ID: <adc59ce70604121716l64913687n1beb307d75da65b5@mail.gmail.com>

Greetings all,

I've been messing with ANTLR for two weeks now, and I'm just not getting it.
I don't know why, but I can't wrap my head around the concept behind ANTLR.
I'm starting to think I'm deficient in some way! :(

What I'm trying to do is create for myself a very, VERY simple example for
parsing something like wiki markup. Say, something that can handle
horizontal rule markup, bold and/or italic text, headings, and multiline
centered blocks.

I've seen TML, and I've seen JustWiki's grammar, but they're both extremely
complex and I don't understand them at all. Very intimidating. I've read the
ANTLR manual cover to cover (printed it out...) at least 3 times, and while
I am intensely interested in this sort of thing, I just can't seem to
understand it.

In case anyone is thinking of helping me out, here's the specs I'm looking
for for the simple example.

Horizontal rules should be a line with nothing but this: ----
Bold text should be surrounded with **
Italic text should be surrounded with //
Bold or Italic cannot span multiple lines, but they can nest inside
eachother.
Headings should be a line that starts with 1 or more !, then a space, then
any unformatted text (no bold or italic here)
Centered blocks can be multiline, and are surrounded with triple-colons :::

I've tried to approach this problem from at least 5 angles, and I keep
running into trouble. I just don't understand what I'm trying to do.

Can anyone help?

Thanks,
Erik

--
Support your local gravity testers -- Skydive!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060412/ee8d6321/attachment.html
From jsamort at rogers.com  Wed Apr 12 17:52:14 2006
From: jsamort at rogers.com (Scott Amort)
Date: Wed Apr 12 17:52:17 2006
Subject: [antlr-interest] Looking for a very simple example
In-Reply-To: <adc59ce70604121716l64913687n1beb307d75da65b5@mail.gmail.com>
References: <adc59ce70604121716l64913687n1beb307d75da65b5@mail.gmail.com>
Message-ID: <1144889534.8759.5.camel@localhost>

On Wed, 2006-04-12 at 20:16 -0400, Erik Forbes wrote:
> What I'm trying to do is create for myself a very, VERY simple example
> for parsing something like wiki markup. Say, something that can handle
> horizontal rule markup, bold and/or italic text, headings, and
> multiline centered blocks.

Hi Erik,

Have a look at the HTML grammar example included with ANTLR, it could be
easily modified to follow your wiki markup requirements.  If you are
running into problems, post a specific question and I'm sure several
people on this list will try to help. 

Best,
Scott

From mail at martin-probst.com  Wed Apr 12 23:27:58 2006
From: mail at martin-probst.com (Martin Probst)
Date: Wed Apr 12 23:28:04 2006
Subject: [antlr-interest] Using ANTLR parser with JFlex lexer
In-Reply-To: <20060412190029.73193.qmail@web30309.mail.mud.yahoo.com>
References: <20060412190029.73193.qmail@web30309.mail.mud.yahoo.com>
Message-ID: <8BDC11CC-320B-405B-A5C0-D36363F48F81@martin-probst.com>

Hi,

there are examples in the source distribution for ANTLR, somewhere in  
the cpp subdirectory. So, yes it's possible :-)

Martin

Am 12.04.2006 um 21:00 schrieb Jason:

> Hello,
>
> I'm interested in the possibility of using the antlr
> parser in conjunction with the Flex lexer.  I'm pretty
> sure that this is possible.  Has anyone ever done it?
> Is there some sample code anywhere?  I spent some time
> poking around the antlr site and found a lot of
> helpful information but nothing about this use case
> specifically.  Thanks in advance for any replies.
>
> -jason
>
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>

From Michiel_Vermandel at axi.be  Wed Apr 12 23:50:20 2006
From: Michiel_Vermandel at axi.be (Michiel Vermandel)
Date: Wed Apr 12 23:50:29 2006
Subject: [antlr-interest] recovering from incomplete syntax
In-Reply-To: <443D46E0.5070100@geekworld.co.uk>
Message-ID: <OF95D7836C.1312B23C-ONC125714F.0024FFEA-C125714F.0025918D@Axi.be>

I guess your WS rule then does not include the \r and \n tokens anymore.
Else you've got two lexer rules for the same tokens, right.

But if the \r \n tokens are only read by the EOL lexer rule, and since in 
(forms) plsql you can continue a statement over multiple lines, I should 
have to add an optional EOL token after every token of almost every 
statement...

That is what I mentioned in my original mail.

Thanks, Michiel






Sam Barnett-Cormack <sdb@geekworld.co.uk> 
12/04/2006 20:28

To
Michiel Vermandel <Michiel_Vermandel@axi.be>
cc

Subject
Re: [antlr-interest] recovering from incomplete syntax






Michiel Vermandel wrote:
> But here I get to a second problem. I have a definition of bindVariable
> in my grammar like this:
> <pre>COLON! IDENTIFIER (DOT IDENTIFIER)? </pre>
> Since The lexer skips any space, tab or CRLF characters (usual WS
> implementation), The parser sees the following line of code:
> <tt>lName := :MYBLOCK.lName := UPPER(lName);</tt>
> So, in order to detect the real problem, I need to take the
> enter-character into account. This means that I can not set the WS lexer
> rule to type Token.SKIP. But that again will require a lot of changes
> into my parser grammer (to accept the WS characters) and probably will
> cause a lot of overhead.

This part is simple; I recently did my first ANTLR grammars, and needed
to be aware of line break, but not of other whitespace. So, I made one
WS rule that does TOKEN.SKIP, and then an EOL rule that matches \r, \n,
and \r\n (with k>1) which increments the line number, but doesn't set
TOKEN.SKIP. I then use EOL as a 'statement terminator' in the grammar.

Sam

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060413/9b053dda/attachment.html
From prashant.deva at gmail.com  Thu Apr 13 05:11:06 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Thu Apr 13 05:11:08 2006
Subject: [antlr-interest] Using ANTLR parser with JFlex lexer
In-Reply-To: <20060412190029.73193.qmail@web30309.mail.mud.yahoo.com>
References: <41fed8f80604121109y258318bufd3a8ecc118ed438@mail.gmail.com>
	<20060412190029.73193.qmail@web30309.mail.mud.yahoo.com>
Message-ID: <41fed8f80604130511w62ec1738rc616d2b362d4bee@mail.gmail.com>

The parser just wants something which implements the IToken interface and a
class which inherits from Token.
If you can provide this, then you can use any lexer at all.

--
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com

On 4/13/06, Jason <jasonriz@yahoo.com> wrote:
>
> Hello,
>
> I'm interested in the possibility of using the antlr
> parser in conjunction with the Flex lexer.  I'm pretty
> sure that this is possible.  Has anyone ever done it?
> Is there some sample code anywhere?  I spent some time
> poking around the antlr site and found a lot of
> helpful information but nothing about this use case
> specifically.  Thanks in advance for any replies.
>
> -jason
>
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060413/eed4f3e6/attachment.html
From Michiel_Vermandel at axi.be  Thu Apr 13 08:34:24 2006
From: Michiel_Vermandel at axi.be (Michiel Vermandel)
Date: Thu Apr 13 08:34:31 2006
Subject: [antlr-interest] controlling tree sequence in a parser
In-Reply-To: <OFA27552B7.CFB1239C-ONC125714E.005467A3-C125714E.00547A49@Axi.be>
Message-ID: <OF3C34FC3C.CBBC4194-ONC125714F.00552957-C125714F.00558C46@Axi.be>

Hi,

I want to move up a complete subrule in my AST tree.
I try to use the '^' character, but seems to be illegal to use on anything 
else but a single token.
Thus this is rejected:

select_expression
            :
         "select"  select_list
         "into"       variable_list
         "from"     table_reference_list^   //  <-- not  accepted
            ;
 

Any Idea how I can get the result of the subrule " table_reference_list" 
to the top of the AST tree?

Thanks!

Michiel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060413/8d01bade/attachment.html
From ewbank at gmail.com  Thu Apr 13 11:37:36 2006
From: ewbank at gmail.com (Bryan Ewbank)
Date: Thu Apr 13 11:37:41 2006
Subject: [antlr-interest] controlling tree sequence in a parser
In-Reply-To: <OF3C34FC3C.CBBC4194-ONC125714F.00552957-C125714F.00558C46@Axi.be>
References: <OFA27552B7.CFB1239C-ONC125714E.005467A3-C125714E.00547A49@Axi.be>
	<OF3C34FC3C.CBBC4194-ONC125714F.00552957-C125714F.00558C46@Axi.be>
Message-ID: <dd3a065f0604131137l1507137cme41b4cf96aac47c5@mail.gmail.com>

Since you cannot have a list of nodes as a root, the question you ask
has the answer "you can't do that".

What, exactly, are you trying to do?  Simply discard the "from" and
preserve the tree constructed below?  If so, the syntax to discard the
"from" and keep the rest is this:

select_expression
            :
         "select"  select_list
         "into"       variable_list
         "from"!     table_reference_list

Again, this is a guess based on what I think you might be asking. To
give a better answer requires a better understanding of what you
need...


On 4/13/06, Michiel Vermandel <Michiel_Vermandel@axi.be> wrote:
>
> Hi,
>
> I want to move up a complete subrule in my AST tree.
> I try to use the '^' character, but seems to be illegal to use on anything
> else but a single token.
> Thus this is rejected:
>
> select_expression
>             :
>          "select"  select_list
>          "into"       variable_list
>          "from"     table_reference_list^   //  <-- not  accepted
>             ;
>
>
> Any Idea how I can get the result of the subrule " table_reference_list" to
> the top of the AST tree?
>
> Thanks!
>
> Michiel
From ewbank at gmail.com  Thu Apr 13 11:39:23 2006
From: ewbank at gmail.com (Bryan Ewbank)
Date: Thu Apr 13 11:39:27 2006
Subject: [antlr-interest] Using ANTLR parser with JFlex lexer
In-Reply-To: <8BDC11CC-320B-405B-A5C0-D36363F48F81@martin-probst.com>
References: <20060412190029.73193.qmail@web30309.mail.mud.yahoo.com>
	<8BDC11CC-320B-405B-A5C0-D36363F48F81@martin-probst.com>
Message-ID: <dd3a065f0604131139u2f0a2bdwd123fe026165a196@mail.gmail.com>

I am using flex; I started with the example in the cpp subdir, and it was
pretty straightforward.

> Hello,
> >
> > I'm interested in the possibility of using the antlr
> > parser in conjunction with the Flex lexer.  I'm pretty
> > sure that this is possible.  Has anyone ever done it?
> > Is there some sample code anywhere?  I spent some time
> > poking around the antlr site and found a lot of
> > helpful information but nothing about this use case
> > specifically.  Thanks in advance for any replies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060413/fa015e1b/attachment.html
From jasonriz at yahoo.com  Thu Apr 13 11:47:50 2006
From: jasonriz at yahoo.com (Jason)
Date: Thu Apr 13 11:47:52 2006
Subject: [antlr-interest] Using ANTLR parser with JFlex lexer
In-Reply-To: <dd3a065f0604131139u2f0a2bdwd123fe026165a196@mail.gmail.com>
Message-ID: <20060413184750.73030.qmail@web30309.mail.mud.yahoo.com>

Thanks Bryan (and everyone else who responded).  It
actually turned out to be pretty easy to get things
working.  I just created a dummy Lexer which
implemented TokenStream and held a reference to the
jflex lexer. From within nextToken( ), the 'dummy'
lexer calls yylex( ) and turns the result into an
antlr.Token.  I just realized that my original email
indicated I was using flex and not jflex which implied
that my target language was c++ when it's actually
java.  The cpp stuff is probably still worth looking
at though and I'll check it out as I start to clean
the code up.

-jason 

--- Bryan Ewbank <ewbank@gmail.com> wrote:

> I am using flex; I started with the example in the
> cpp subdir, and it was
> pretty straightforward.
> 
> > Hello,
> > >
> > > I'm interested in the possibility of using the
> antlr
> > > parser in conjunction with the Flex lexer.  I'm
> pretty
> > > sure that this is possible.  Has anyone ever
> done it?
> > > Is there some sample code anywhere?  I spent
> some time
> > > poking around the antlr site and found a lot of
> > > helpful information but nothing about this use
> case
> > > specifically.  Thanks in advance for any replies
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From robgreene at gmail.com  Thu Apr 13 21:13:16 2006
From: robgreene at gmail.com (Rob Greene)
Date: Thu Apr 13 21:13:19 2006
Subject: [antlr-interest] ANTLR Works and compiler settings...
Message-ID: <738584f80604132113o5f97db90n45fcb7fa21c3f201@mail.gmail.com>

Is there a trick to getting ANTLR Works to compile a grammer and working in
the debugger?

When I have com.sun.tools.javac selected, I get the following error:
"Compiler exception: com.sun.tools.javac.Main"

When I have javac (but not path) selected, I get: "Compiler exception:
CreateProcess javac -classpath ... error=2"

When I have javac with path to Java 5.0, I get: "Cannot launch the
debugger.  Time-out waiting to connect to the remote user." and the console
shows:
    [23:10:34] Note: C:\Temp\ANTLR\BasicBasic.java uses unchecked or unsafe
operations.
    [23:10:34] Note: Recompile with -Xlint:unchecked for details.
    [23:10:41] Launch with path
=C:\Temp\ANTLR\classes;C:\Temp\ANTLR\antlrworks-1.0ea8.jar
;C:\Temp\ANTLR\antlrworks-1.0ea8.jar;.

Does the Java code generated work with Java 5.0?  (Yes, I do get java files
created.)  Do I need to downgrade to Java 1.4 while developing in ANTLR
Works?

Besides that, this has a lot of promise.  I'm hoping that once the debugger
is functional, I will be able to actually run the grammar against a file and
see whatever output I need to produce?  Is ANTLR v3 considered stable enough
that I should use that, still as a beginner, over v2?

Thanks!
-Rob
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060413/49295d9c/attachment.html
From mail at martin-probst.com  Fri Apr 14 01:51:09 2006
From: mail at martin-probst.com (Martin Probst)
Date: Fri Apr 14 01:51:13 2006
Subject: [antlr-interest] ANTLR Works and compiler settings...
In-Reply-To: <738584f80604132113o5f97db90n45fcb7fa21c3f201@mail.gmail.com>
References: <738584f80604132113o5f97db90n45fcb7fa21c3f201@mail.gmail.com>
Message-ID: <69735AE9-8B90-409E-9CCD-5864BAE025FA@martin-probst.com>

I think I got this timeout error once because of the great built-in  
Windows XP firewall before I migrated to a real operating system...

Am 14.04.2006 um 06:13 schrieb Rob Greene:

> Is there a trick to getting ANTLR Works to compile a grammer and  
> working in the debugger?
>
> When I have com.sun.tools.javac selected, I get the following  
> error: "Compiler exception: com.sun.tools.javac.Main"
>
> When I have javac (but not path) selected, I get: "Compiler  
> exception: CreateProcess javac -classpath ... error=2"
>
> When I have javac with path to Java 5.0, I get: "Cannot launch the  
> debugger.  Time-out waiting to connect to the remote user." and the  
> console shows:
>     [23:10:34] Note: C:\Temp\ANTLR\BasicBasic.java uses unchecked  
> or unsafe operations.
>     [23:10:34] Note: Recompile with -Xlint:unchecked for details.
>     [23:10:41] Launch with path =C:\Temp\ANTLR\classes;C:\Temp\ANTLR 
> \antlrworks- 1.0ea8.jar;C:\Temp\ANTLR\antlrworks-1.0ea8.jar;.
>
> Does the Java code generated work with Java 5.0?  (Yes, I do get  
> java files created.)  Do I need to downgrade to Java 1.4 while  
> developing in ANTLR Works?
>
> Besides that, this has a lot of promise.  I'm hoping that once the  
> debugger is functional, I will be able to actually run the grammar  
> against a file and see whatever output I need to produce?  Is ANTLR  
> v3 considered stable enough that I should use that, still as a  
> beginner, over v2?
>
> Thanks!
> -Rob

From robgreene at gmail.com  Fri Apr 14 04:58:29 2006
From: robgreene at gmail.com (Rob Greene)
Date: Fri Apr 14 04:58:31 2006
Subject: [antlr-interest] Re: ANTLR Works and compiler settings...
In-Reply-To: <738584f80604132113o5f97db90n45fcb7fa21c3f201@mail.gmail.com>
References: <738584f80604132113o5f97db90n45fcb7fa21c3f201@mail.gmail.com>
Message-ID: <738584f80604140458q3bc64a86t30f20a10e552702@mail.gmail.com>

Update:

After sending my email, I realized that I did have a 1.4 JDK installed, and
that does work.

So, maybe this is a report that the Java code generation does not compile
without tweaking under Java 5.0.  :-)

Thanks!
-Rob

On 4/13/06, Rob Greene <robgreene@gmail.com> wrote:
>
> Is there a trick to getting ANTLR Works to compile a grammer and working
> in the debugger?
>
> When I have com.sun.tools.javac selected, I get the following error:
> "Compiler exception: com.sun.tools.javac.Main"
>
> When I have javac (but not path) selected, I get: "Compiler exception:
> CreateProcess javac -classpath ... error=2"
>
> When I have javac with path to Java 5.0, I get: "Cannot launch the
> debugger.  Time-out waiting to connect to the remote user." and the console
> shows:
>     [23:10:34] Note: C:\Temp\ANTLR\BasicBasic.java uses unchecked or
> unsafe operations.
>     [23:10:34] Note: Recompile with -Xlint:unchecked for details.
>     [23:10:41] Launch with path
> =C:\Temp\ANTLR\classes;C:\Temp\ANTLR\antlrworks- 1.0ea8.jar
> ;C:\Temp\ANTLR\antlrworks-1.0ea8.jar;.
>
> Does the Java code generated work with Java 5.0?  (Yes, I do get java
> files created.)  Do I need to downgrade to Java 1.4 while developing in
> ANTLR Works?
>
> Besides that, this has a lot of promise.  I'm hoping that once the
> debugger is functional, I will be able to actually run the grammar against a
> file and see whatever output I need to produce?  Is ANTLR v3 considered
> stable enough that I should use that, still as a beginner, over v2?
>
> Thanks!
> -Rob
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060414/c9fd5593/attachment.html
From ewbank at gmail.com  Fri Apr 14 11:05:37 2006
From: ewbank at gmail.com (Bryan Ewbank)
Date: Fri Apr 14 11:05:40 2006
Subject: [antlr-interest] controlling tree sequence in a parser
In-Reply-To: <OF6CD77E54.FEAFB179-ONC1257150.0024AE92-C1257150.0026BDA3@Axi.be>
References: <dd3a065f0604131137l1507137cme41b4cf96aac47c5@mail.gmail.com>
	<OF6CD77E54.FEAFB179-ONC1257150.0024AE92-C1257150.0026BDA3@Axi.be>
Message-ID: <dd3a065f0604141105l1214a4d9u97a9db5895f2ac09@mail.gmail.com>

Oh, that's what you're asking; thanks for the clarification...

To rearrange the children of a node, you must build the node directly
- ANTLR's default is that everything is linked as siblings from
left-to-right, unless you use the "^" marker.  Right now, you must be
building the tree for the <select_statement>... something like this, I
hope:

    // use the "select" as the root node for the tree; discard "into"
and "from" keywords
    select_expression :
        "select"^ select_list
        "into"!   variable_list
        "from"!   table_reference_list
        ;

Or, perhaps, this (I tend toward this style):

    // use an artificial node for the root node, discard all keywords
    select_expression :
        "select"! select_list
        "into"!   variable_list
        "from"!   table_reference_list
        {
            ## = #( #[SELECT_EXPR,"SELECT_EXPR"], ##);
        }
        ;

To build the tree as you want it (with the table_reference_list item
first, you have to be more explicit:

    // create an artificial node for the expression, discard the unnecessary
    // keywords the items are placed in the generated tree in the order
    // directed by the ## statement, so change it as necessary.
    select_expression :
        "select"! slist:select_list
        "into"!   vlist:variable_list
        "from"!   tlist:table_reference_list
        {
            ## = #( #[SELECT_EXPR,"SELECT_EXPR"],
                    #tlist,
                    #slist,
                    #vlist);
        }
        ;

Caveat/Disclaimer:  The above discussion assumes that select_list,
variable_list, and table_reference_list all produce a single tree
rather than a list of trees.  I assumed this from the diagrams that
you drew, and it's really the only way to produce a regular tree from
the description of the language I assumed based on what's here.

Hope this helps!
- Bryan Ewbank

On 4/14/06, Michiel Vermandel <Michiel_Vermandel@axi.be> wrote:
> Consider this statement:
>
>   SELECT dummy
>   FROM     dual
>
> With my current grammar I get an AST tree like this:
>
>    start_rule [4]
>        select_statement [14]
>            select_list [15]
>                column_reference [50]
>                    dummy[299]
>            table_list [16]
>                table_reference [46]
>                    dual [299]

> ... I wanted to change the AST tree to the following and in this way have the
> table reference registered before the column:
>
>   start_rule [4]
>       select_statement [14]
>           table_list [16]
>               table_reference [46]
>                   dual [299]
>           select_list [15]
>               column_reference [50]
>                   dummy[299]
>
> So, how can I move up the result of the table_list subrule?

>  > select_expression
>  >             :
>  >          "select"  select_list
>  >          "into"       variable_list
>  >          "from"     table_reference_list^   //  <-- not  accepted
>  >             ;
From robgreene at gmail.com  Sat Apr 15 07:10:28 2006
From: robgreene at gmail.com (Rob Greene)
Date: Sat Apr 15 07:10:31 2006
Subject: [antlr-interest] Trying to learn ANTLR v3 and String Template...
Message-ID: <738584f80604150710w17e8c1fdxab9b75d963719285@mail.gmail.com>

I've done some work with ANTLR v2 to build an expression parser, so the
world is a dark gray instead of black, but...

(Q1) Is there the beginnings of a tutorial for the v3 syntax? I see musings
regarding design decisions, but frankly that's way beyond me.

I've seen that string template has it's own docs, so I suspect that once I
get that far, I can use that for reference (and from what I've seen as
examples so far, it looks pretty straight forward).

I'm far enough along with the v3 workings to have some specific questions.
For starters, I'm putting together just a basic expression parser (addition,
subtraction, assignment). What I've pasted below should be tracking the
variables. My ultimate output will be assembly - and I'd like to segment the
code and the variables. Right now, I'm just collecting names and will assume
they're all integers - for simplicity's sake.

(Q2) Once I've produced all the code (future task), how would I dump out my
variable declarations? In the scope is there an "@done" production where I
can drop in some code to generate that output? (Or, quite possibly, a string
template reference?)

(Q3) Also, when I'm in ANTLR Works, is there some way to work with a
template (group) file? I see the example for "cminus" uses multiple group
templates, but there is a separate Java program setting that up. When I've
started monkeying with templates, it starts looking for template files named
after each individual template - but I couldn't figure out either where they
need to be or what they should be named. I'm just trying to figure out where
ANTLR Works stops and Eclipse begins...

(Q4) I think I just need verification on this: Those productions that aren't
in caps (invokes other productions maybe) return an object that has a String
Template in the ".st" portion and the productions that are in CAPS (somewhat
more in the constant realm) do not have String Templates, but they do have a
".text" node that contains the value. What is returned and what is available
on these nodes?

(Q5) Oh yeah, on a purely not getting it scale, can I declare a global scope
(this is assembly after all) and keep the initialization of the variables
outside of the program declaration itself? I think it may be a tad bit
cleaner. I tried something like the snippet below, but the global_scope
itself (a Stack) never got initialized.  This was placed before the program
production but after the options declaration.
    scope global {
        List variables;
    }
    @init {
        $global::variables = new ArrayList();
    }

(Q6) What the heck is channel 99? Are there others?

Shoot, as usual, this grew. Sorry and thanks in advance for your advice!
-Rob


grammar BasicExpression ;
options {
    output=template;
}

program
scope {
    List variables;
}
@init {
    $program::variables = new ArrayList();
}
    :    statement*
    ;
statement
    :    ID '=' expression
        { $program::variables.add($ID.text); }
    ;
expression
    :    atom ( ('+' | '-') expression)?
    ;
atom    :    ID
        { $program::variables.add($ID.text); }
    |    INT
    ;
ID    :    'a'..'z' ('a'..'z' | '0'..'9' | '_')*
    ;
INT    :    '0'..'9'+
    ;
WS    :    (' ' | '\t' | '\r' | '\n')+
        { channel=99; }
    ;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060415/a3a55839/attachment.html
From sdb at geekworld.co.uk  Sat Apr 15 08:29:39 2006
From: sdb at geekworld.co.uk (Sam Barnett-Cormack)
Date: Sat Apr 15 08:29:51 2006
Subject: [antlr-interest] Java doc-comments
Message-ID: <44411163.9020909@geekworld.co.uk>

I'd like to end up with nice javadoc out of my parser/lexer classes, but
it seems that doc-comments before rules don't get passed through to the
generated methods in the .java files. Ones in a {...} block just before
the class definition go through, but not before rules. Does anyone know
of a way to get doc-comments on rules to pass through?

Sam
From prashant.deva at gmail.com  Sat Apr 15 08:35:02 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Sat Apr 15 08:35:05 2006
Subject: [antlr-interest] Looking for a very simple example
In-Reply-To: <adc59ce70604121716l64913687n1beb307d75da65b5@mail.gmail.com>
References: <adc59ce70604121716l64913687n1beb307d75da65b5@mail.gmail.com>
Message-ID: <41fed8f80604150835g6ad64d62o624cf113dc91043c@mail.gmail.com>

Take a look at this tutorial to see how similar antlr grammar files are to
java files-
http://www.placidsystems.com/articles/article-grammarlayout/grammarLayout.htm



--
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com

On 4/13/06, Erik Forbes <erikforbes@gmail.com> wrote:
>
> Greetings all,
>
> I've been messing with ANTLR for two weeks now, and I'm just not getting
> it. I don't know why, but I can't wrap my head around the concept behind
> ANTLR. I'm starting to think I'm deficient in some way! :(
>
> What I'm trying to do is create for myself a very, VERY simple example for
> parsing something like wiki markup. Say, something that can handle
> horizontal rule markup, bold and/or italic text, headings, and multiline
> centered blocks.
>
> I've seen TML, and I've seen JustWiki's grammar, but they're both
> extremely complex and I don't understand them at all. Very intimidating.
> I've read the ANTLR manual cover to cover (printed it out...) at least 3
> times, and while I am intensely interested in this sort of thing, I just
> can't seem to understand it.
>
> In case anyone is thinking of helping me out, here's the specs I'm looking
> for for the simple example.
>
> Horizontal rules should be a line with nothing but this: ----
> Bold text should be surrounded with **
> Italic text should be surrounded with //
> Bold or Italic cannot span multiple lines, but they can nest inside
> eachother.
> Headings should be a line that starts with 1 or more !, then a space, then
> any unformatted text (no bold or italic here)
> Centered blocks can be multiline, and are surrounded with triple-colons
> :::
>
> I've tried to approach this problem from at least 5 angles, and I keep
> running into trouble. I just don't understand what I'm trying to do.
>
> Can anyone help?
>
> Thanks,
> Erik
>
> --
> Support your local gravity testers -- Skydive!
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060415/d47b225a/attachment.html
From pwatson at knightsbridge.com  Sat Apr 15 14:58:12 2006
From: pwatson at knightsbridge.com (Paul D Watson)
Date: Sat Apr 15 14:58:16 2006
Subject: [antlr-interest] Creating a main() for C++ code,
	passing params on command line
Message-ID: <OFD93B0819.EED23EFC-ON86257151.0077F3EC-86257151.0078AF4D@knightsbridge.com>

It is clearly evident that I am new to antlr.  I have searched quite a bit 
through the ANTLR Reference Manual and with Google to find out about how a 
main() is created for antlr generated programs.  There are main.cpp and 
Main*.cpp files around in the examples directory.  But I am hoping to find 
some reference documentation that will tell what must, or must not, go 
into a main() for antlr generated programs.

Ultimately, I would like to pass parameters on the command line for the 
parser and lexer to use.  Things such as debug_level to indicate the 
amount of debug output desired or language_dialect which would allow the 
same processor to handle multiple dialects of a language.  The only way I 
see to do this now is to embed them into the grammar .g file.

Please point me in the right direction.  Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060415/4232cd6e/attachment.html
From sdb at geekworld.co.uk  Sat Apr 15 15:31:12 2006
From: sdb at geekworld.co.uk (Sam Barnett-Cormack)
Date: Sat Apr 15 15:31:27 2006
Subject: [antlr-interest] Creating a main() for C++ code,	passing params
	on command line
In-Reply-To: <OFD93B0819.EED23EFC-ON86257151.0077F3EC-86257151.0078AF4D@knightsbridge.com>
References: <OFD93B0819.EED23EFC-ON86257151.0077F3EC-86257151.0078AF4D@knightsbridge.com>
Message-ID: <44417430.2040004@geekworld.co.uk>

Paul D Watson wrote:
> 
> It is clearly evident that I am new to antlr.  I have searched quite a
> bit through the ANTLR Reference Manual and with Google to find out about
> how a main() is created for antlr generated programs.  There are
> main.cpp and Main*.cpp files around in the examples directory.  But I am
> hoping to find some reference documentation that will tell what must, or
> must not, go into a main() for antlr generated programs.

ANTLR doesn't generate main() methods. This is because it doesn't
generate programs, it generates code in your chosen language to do
parsing, that is then compiled to object code (or class file or
whatever, as appropriate) to be used by *your* program. That is, you
have to wrap the lexer/parser in your own code to make use of it. After
all, there's only so much the parser can do in terms of semantics, your
code would do more of that.

> Ultimately, I would like to pass parameters on the command line for the
> parser and lexer to use.  Things such as debug_level to indicate the
> amount of debug output desired or language_dialect which would allow the
> same processor to handle multiple dialects of a language.  The only way
> I see to do this now is to embed them into the grammar .g file.

Well, if you want the lexer/parser to use command line params, you would
have to embed that into a .g file. However, all the rest of that would
be in your other code.

That aside, you could have antlr .g files creating a runnable program by
putting an embedded main() method into one of them...

Sam
From ewbank at gmail.com  Sat Apr 15 16:02:29 2006
From: ewbank at gmail.com (Bryan Ewbank)
Date: Sat Apr 15 16:02:31 2006
Subject: [antlr-interest] Creating a main() for C++ code,
	passing params on command line
In-Reply-To: <44417430.2040004@geekworld.co.uk>
References: <OFD93B0819.EED23EFC-ON86257151.0077F3EC-86257151.0078AF4D@knightsbridge.com>
	<44417430.2040004@geekworld.co.uk>
Message-ID: <dd3a065f0604151602o4069980bp7db6df75b703eb50@mail.gmail.com>

Paul D Watson wrote:
>
> It is clearly evident that I am new to antlr.  I have searched quite a bit
> through the ANTLR Reference Manual and with Google to find out about how a
> main() is created for antlr generated programs.  There are main.cpp and
> Main*.cpp files around in the examples directory.  But I am hoping to find
> some reference documentation that will tell what must, or must not, go into a
> main() for antlr generated programs.

Welcome to ANTLR :)

For C++, the main thing you need is to define the necessary factory; the
reference manual, in the section on C++ code, should describe it.  Without this
step, your program will crash the first time it tries to create an AST node.

There are several ways to pass information to the ANTLR-generated class
objects; think of it as a normal C++ class, and you should see what I mean.

	- class-global (i.e., static) items, to control the behavior of all
	  instances created.
	- as constructor argument, to bind a specific instance of the class
	  with specific information.  for example, you must pass a lexer to the
	  default constructor for a parser.  this requires the most "hacking"
	  because you need must suppress the normal constructors if they do not
	  make sense.  the end of the reference manual talks about
	  noDefaultConstructor, I think.
	- as arguments to specific productions or member functions that are
	  defined in the header of the class definition.

Hope this helps; no specific information, but general ideas.  Take a look at
the (default) generated code for C++, and you should see that the interface
(the generated *.hpp) is actually not that unusual.

- Bryan Ewbank
From antlr-list at arizona-software.ch  Sat Apr 15 22:41:32 2006
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Sat Apr 15 22:41:42 2006
Subject: [antlr-interest] Re: ANTLR Works and compiler settings...
In-Reply-To: <738584f80604140458q3bc64a86t30f20a10e552702@mail.gmail.com>
References: <738584f80604132113o5f97db90n45fcb7fa21c3f201@mail.gmail.com>
	<738584f80604140458q3bc64a86t30f20a10e552702@mail.gmail.com>
Message-ID: <BFD0A8B5-57F6-465C-9A24-A04EB1905C1F@arizona-software.ch>

Interesting... so with 1.5 is does not work but with 1.4 it works?

Jean

On Apr 14, 2006, at 4:58 AM, Rob Greene wrote:

> Update:
>
> After sending my email, I realized that I did have a 1.4 JDK  
> installed, and that does work.
>
> So, maybe this is a report that the Java code generation does not  
> compile without tweaking under Java 5.0.  :-)
>
> Thanks!
> -Rob
>
> On 4/13/06, Rob Greene <robgreene@gmail.com> wrote:
> Is there a trick to getting ANTLR Works to compile a grammer and  
> working in the debugger?
>
> When I have com.sun.tools.javac selected, I get the following  
> error: "Compiler exception: com.sun.tools.javac.Main"
>
> When I have javac (but not path) selected, I get: "Compiler  
> exception: CreateProcess javac -classpath ... error=2"
>
> When I have javac with path to Java 5.0, I get: "Cannot launch the  
> debugger.  Time-out waiting to connect to the remote user." and the  
> console shows:
>     [23:10:34] Note: C:\Temp\ANTLR\BasicBasic.java uses unchecked  
> or unsafe operations.
>     [23:10:34] Note: Recompile with -Xlint:unchecked for details.
>     [23:10:41] Launch with path =C:\Temp\ANTLR\classes;C:\Temp\ANTLR 
> \antlrworks- 1.0ea8.jar;C:\Temp\ANTLR\antlrworks-1.0ea8.jar;.
>
> Does the Java code generated work with Java 5.0?  (Yes, I do get  
> java files created.)  Do I need to downgrade to Java 1.4 while  
> developing in ANTLR Works?
>
> Besides that, this has a lot of promise.  I'm hoping that once the  
> debugger is functional, I will be able to actually run the grammar  
> against a file and see whatever output I need to produce?  Is ANTLR  
> v3 considered stable enough that I should use that, still as a  
> beginner, over v2?
>
> Thanks!
> -Rob
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060415/ab8752d0/attachment.html
From robgreene at gmail.com  Sun Apr 16 06:17:18 2006
From: robgreene at gmail.com (Rob Greene)
Date: Sun Apr 16 06:17:22 2006
Subject: [antlr-interest] Re: ANTLR Works and compiler settings...
In-Reply-To: <BFD0A8B5-57F6-465C-9A24-A04EB1905C1F@arizona-software.ch>
References: <738584f80604132113o5f97db90n45fcb7fa21c3f201@mail.gmail.com>
	<738584f80604140458q3bc64a86t30f20a10e552702@mail.gmail.com>
	<BFD0A8B5-57F6-465C-9A24-A04EB1905C1F@arizona-software.ch>
Message-ID: <738584f80604160617i64590e4cl7fe79e32677f19b8@mail.gmail.com>

Hmm... I decided to get you the compile message, but on second glance (and I
did verify from the class files), it does compile. When I switch over to my
1.5 JDK, it appears to compile but then times out waiting for the debugger
to start. I see the following messages in the console:

[08:09:10] Note: C:\Temp\ANTLR\BasicExpression.java uses unchecked or unsafe
operations.
[08:09:10] Note: Recompile with -Xlint:unchecked for details.

But I'm now guessing that they are merely warnings.

After a little bit of thought, I realized that when I double-click the JAR
file, I must be launching the 1.4 JDK. So, of course using the 1.5 compiler
would cause problems.

I manually launched from the 1.5 JDK and I can compile and debug just fine.

Sorry about the confusion - newbie mistake!! (Maybe the version of the JVM
can be displayed in the about box? Not sure if I would have caught that but
it could be useful...)
-Rob

On 4/16/06, Jean Bovet <antlr-list@arizona-software.ch> wrote:
>
> Interesting... so with 1.5 is does not work but with 1.4 it works?
> Jean
>
> On Apr 14, 2006, at 4:58 AM, Rob Greene wrote:
>
> Update:
>
> After sending my email, I realized that I did have a 1.4 JDK installed,
> and that does work.
>
> So, maybe this is a report that the Java code generation does not compile
> without tweaking under Java 5.0.  :-)
>
> Thanks!
> -Rob
>
> On 4/13/06, Rob Greene <robgreene@gmail.com> wrote:
> >
> > Is there a trick to getting ANTLR Works to compile a grammer and working
> > in the debugger?
> >
> > When I have com.sun.tools.javac selected, I get the following error:
> > "Compiler exception: com.sun.tools.javac.Main"
> >
> > When I have javac (but not path) selected, I get: "Compiler exception:
> > CreateProcess javac -classpath ... error=2"
> >
> > When I have javac with path to Java 5.0, I get: "Cannot launch the
> > debugger.  Time-out waiting to connect to the remote user." and the console
> > shows:
> >     [23:10:34] Note: C:\Temp\ANTLR\BasicBasic.java uses unchecked or
> > unsafe operations.
> >     [23:10:34] Note: Recompile with -Xlint:unchecked for details.
> >     [23:10:41] Launch with path
> > =C:\Temp\ANTLR\classes;C:\Temp\ANTLR\antlrworks- 1.0ea8.jar
> > ;C:\Temp\ANTLR\antlrworks-1.0ea8.jar;.
> >
> > Does the Java code generated work with Java 5.0?  (Yes, I do get java
> > files created.)  Do I need to downgrade to Java 1.4 while developing in
> > ANTLR Works?
> >
> > Besides that, this has a lot of promise.  I'm hoping that once the
> > debugger is functional, I will be able to actually run the grammar against a
> > file and see whatever output I need to produce?  Is ANTLR v3 considered
> > stable enough that I should use that, still as a beginner, over v2?
> >
> > Thanks!
> > -Rob
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060416/32172dce/attachment.html
From sunjigang1965 at yahoo.com.cn  Sun Apr 16 08:12:49 2006
From: sunjigang1965 at yahoo.com.cn (=?gb2312?q?=CB=EF=BC=CD=B8=D5=20Jigang=20(Robert)=20Sun?=)
Date: Sun Apr 16 08:12:56 2006
Subject: [antlr-interest] object creation by copying in C#
Message-ID: <20060416151249.71186.qmail@web15707.mail.cnb.yahoo.com>

Could anyone tell me how to create a class object from another object? ie., an independent object
that is same as an existing one.

Cheers.

Jigang



	

	
		
___________________________________________________________ 
1G 
http://cn.mail.yahoo.com/
From antlr-list at arizona-software.ch  Sun Apr 16 13:22:14 2006
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Sun Apr 16 13:22:21 2006
Subject: [antlr-interest] Re: ANTLR Works and compiler settings...
In-Reply-To: <738584f80604160617i64590e4cl7fe79e32677f19b8@mail.gmail.com>
References: <738584f80604132113o5f97db90n45fcb7fa21c3f201@mail.gmail.com>
	<738584f80604140458q3bc64a86t30f20a10e552702@mail.gmail.com>
	<BFD0A8B5-57F6-465C-9A24-A04EB1905C1F@arizona-software.ch>
	<738584f80604160617i64590e4cl7fe79e32677f19b8@mail.gmail.com>
Message-ID: <99E23B5D-295C-4350-BF82-B0DE378F0571@arizona-software.ch>

> Hmm... I decided to get you the compile message, but on second  
> glance (and I did verify from the class files), it does compile.  
> When I switch over to my 1.5 JDK, it appears to compile but then  
> times out waiting for the debugger to start. I see the following  
> messages in the console:
>
> [08:09:10] Note: C:\Temp\ANTLR\BasicExpression.java uses unchecked  
> or unsafe operations.
> [08:09:10] Note: Recompile with -Xlint:unchecked for details.
>
> But I'm now guessing that they are merely warnings.
>

Yes, that's right.

> After a little bit of thought, I realized that when I double-click  
> the JAR file, I must be launching the 1.4 JDK. So, of course using  
> the 1.5 compiler would cause problems.
>
> I manually launched from the 1.5 JDK and I can compile and debug  
> just fine.
>
> Sorry about the confusion - newbie mistake!! (Maybe the version of  
> the JVM can be displayed in the about box? Not sure if I would have  
> caught that but it could be useful...)


No problem ;-) It's always helpful to know what's happening so I can  
do something in AW in the next release....

Jean

From exitsfunnel at yahoo.com  Sun Apr 16 15:32:29 2006
From: exitsfunnel at yahoo.com (exits funnel)
Date: Sun Apr 16 15:32:32 2006
Subject: [antlr-interest] Syntactic predicates sanity check
Message-ID: <20060416223229.80383.qmail@web33906.mail.mud.yahoo.com>

Hello,

I'm pretty new to LL parsing and I just want a quick
sanity check.  Imagine that I have these rules:

a: (T2)* T3 | b T4;

b: (T2)* T5 | (T6);

Am I right to assume that withtout refactoring the
rules, I would need to use a syntactic prediate to
disambiguate the two alternatives to (a)?  Something
like this:

a: ((T2)* T3)=> (T2)* T3 | b T4;

It seems so because there can be an arbitrary number
of T2s on the input stream.  I just want to verify
that I'm not missing something because I know that
there is a performance cost associated with syntactic
predicates, so I'd like to avoid them when possible. 
Thanks!

-exits

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From lstals at swin.edu.au  Sun Apr 16 21:30:02 2006
From: lstals at swin.edu.au (Lucien Stals)
Date: Sun Apr 16 21:30:08 2006
Subject: [antlr-interest] newbie lookahead question
Message-ID: <444319CA.4020503@swin.edu.au>

Hi,

I've been learning ANTLR for about two weeks and want to be able to 
parse (then transform into XML) an input file in a specific markup 
language (ASAP2). I have not worked with parsers before and I feel like 
I'm in a little over my head. It's sink or swim time for me.

I have some basic stuff working, but I'm getting lots of warnings about 
ambiguity.

Part of a sample input file might look like:

...
/begin CALIBRATION_METHOD
	"Slewing"
	1
	/begin CALIBRATION_HANDLE
		0x1ffbf8
		0x400
		0
		AllSlews
	/end CALIBRATION_HANDLE
/end CALIBRATION_METHOD
...


My question is about look ahead.
In my parser, I have rules like:


calibrationMethod:BEGIN CAL_METH
			(calibrationHandle)*
			END CAL_METH;
			
calibrationHandle:BEGIN CAL_HAND
			END CAL_HAND;

Where my lexer rules are:

protected
SLASH		:'/';

BEGIN		:SLASH "begin";

END		:SLASH "end";

CAL_METH	:"CALIBRATION_METHOD";

CAL_HAND	:"CALIBRATION_HANDLE";


(I'm just dealing with the tag structure first. Parsing the actual data 
is my next step. I have filter=true for now so I can ignore what I can't 
parse yet)

And I'm getting ambiguity warnings. Should I set my lookahead to 
something silly like 13 just to look past "CALIBRATION_"? (I read that 
bigger lookaheads are performance killers) Or is there a smarter way to 
do this? Should I use predicates like:

calibrationMethod:BEGIN CAL_METH {this.inCalMeth=true;}
			(calibrationHandle)*
			END CAL_METH {this.inCalMeth=false;};
			
calibrationHandle:{this.inCalMeth}?
		BEGIN CAL_HAND
		END CAL_HAND;

Perhaps I'm completely off base. If it looks like I'm really missing 
something, you might be right. Feel free to let me know.

This is only one of the problems I'm having, but I'll just keep it to 
one question per post ;)

BTW, if anyone is aware of a grammar that is similar which I can get 
inspiration from, can you let me know?

Thanks,

Lucien.
From Stritzel.Nils at infineon.com  Sun Apr 16 23:18:26 2006
From: Stritzel.Nils at infineon.com (Stritzel.Nils@infineon.com)
Date: Sun Apr 16 23:19:11 2006
Subject: [antlr-interest] Formula parser and optional brackets
Message-ID: <0563741883A49249B93A75DF219F8C22013EA9BA@SZVSE201>


Hi,

I am trying to implemend a formula parser with antlr. The formulas are
from an already existant database. The fact that brackets are optinal
gives me some headaches. So far I created this grammar which works for
some cases, but it does not work for formulas like "(1)" and furthermore
it does work for formulas "0+1)" which it should not do. If somebody can
give me a hint what's wrong with this, I would greatful.

Regards,

Nils


The grammar: 


class ExpressionParser extends Parser;
options {
	buildAST = true;	
}


expr     :  (sumBaseExpr) => (LPAREN^ sumBaseExpr RPAREN! (PLUS^ |
MINUS^ |MULT^ |DIV^) sumBaseExpr)  
				|(complexExpr) => (LPAREN^ sumBaseExpr
RPAREN!) | sumBaseExpr ;
complexExpr : LPAREN^ sumBaseExpr RPAREN!; 
sumBaseExpr  : prodBaseExpr ((PLUS^|MINUS^) prodBaseExpr)* ; 
prodBaseExpr : powBaseExpr ((MUL^|DIV^|MOD^) powBaseExpr)* ; 
powBaseExpr  : atomBase (POW^ atomBase)? ;
atomBase     : INT |  complexExpr;


 


class ExpressionLexer extends Lexer;

PLUS  : '+' ;
MINUS : '-' ;
MUL   : '*' ;
DIV   : '/' ;
MOD   : '%' ;
POW   : '^' ;
SEMI  : ';' ; 
LPAREN : '(' ;
RPAREN : ')' ;
protected DIGIT : '0'..'9' ;
INT   : (DIGIT)+ ;
WS :
	(' '
	| '\t'
	| '\r' '\n' {newline(); }
	| '\n'	{newline(); }
	)
	{ $setType(Token.SKIP); };


class ExpressionTreeWalker extends TreeParser;

expr returns [double r]
  { double a, b; r=0 ;}
  : #(PLUS  a=expr b=expr) { r = a + b;}
  | #(MINUS a=expr b=expr) { r = a - b;}
  | #(MUL   a=expr b=expr) { r = a * b;}
  | #(DIV   a=expr b=expr) { r = a / b;}
  | #(MOD   a=expr b=expr) { r = a % b;}
  | #(POW   a=expr b=expr) { r = Math.Pow(a, b);}
  | #(LPAREN a=expr) { r=a;}
  |i :INT  { r=(double) Int32.Parse(i.getText());}
  ;
  
  

 



From mail at martin-probst.com  Mon Apr 17 01:23:06 2006
From: mail at martin-probst.com (Martin Probst)
Date: Mon Apr 17 01:23:10 2006
Subject: [antlr-interest] Syntactic predicates sanity check
In-Reply-To: <20060416223229.80383.qmail@web33906.mail.mud.yahoo.com>
References: <20060416223229.80383.qmail@web33906.mail.mud.yahoo.com>
Message-ID: <7774C754-FC04-4633-A65D-B1D7CB465C9B@martin-probst.com>

> a: ((T2)* T3)=> (T2)* T3 | b T4;

Did you try without the predicate? I don't think you need one. You'll  
only need predicates to aid the parser in the decision which branch  
of the alternative to take. In your gramar, there is no alternative -  
all that is T2* T3 gets parsed in the same flow - or did you misplace  
the parens? If the rule is supposed to be

a:  ( T2 * T3  ) | ( b T4 );

b: ( T2* T5 ) | T6;

... then you'll need to disambiguate with predicates. Though in many  
cases it's easier to refactor such rules to

aBegin: T2+;

a: aBegin? ( T3 | ( T5 | T6 ) T4 );

Looks a bit scary now, but if you've got real rule names it's  
actually very natural most of the time (e.g. aBegin gets  
"methodDeclStart" or something).

HTH,
Martin

>
> It seems so because there can be an arbitrary number
> of T2s on the input stream.  I just want to verify
> that I'm not missing something because I know that
> there is a performance cost associated with syntactic
> predicates, so I'd like to avoid them when possible.
> Thanks!
>
> -exits
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>

From mail at martin-probst.com  Mon Apr 17 01:28:07 2006
From: mail at martin-probst.com (Martin Probst)
Date: Mon Apr 17 01:28:11 2006
Subject: [antlr-interest] newbie lookahead question
In-Reply-To: <444319CA.4020503@swin.edu.au>
References: <444319CA.4020503@swin.edu.au>
Message-ID: <3C751BDA-BE14-4215-860C-D8ED82953E67@martin-probst.com>

Hi,

you can either increase your lookahead (which is not advisable in  
this case), or rather do it manually:

CALIBRATION_THINGY:
   "CALIBRATION_" ( "METHOD" { $setType(CAL_METHOD);} |  
"HANDLE" { $setType(CAL_HANDLE);} );

This parses the CALIBRATION_ part and then decides what kind of token  
type this is later. You'll may want to add "CAL_METHOD" and  
"CAL_HANDLE" to the tokens section of your grammar because they  
aren't declared automatically if used like this - you can use that to  
give them a proper help message later on.

Martin


Am 17.04.2006 um 06:30 schrieb Lucien Stals:

> Hi,
>
> I've been learning ANTLR for about two weeks and want to be able to  
> parse (then transform into XML) an input file in a specific markup  
> language (ASAP2). I have not worked with parsers before and I feel  
> like I'm in a little over my head. It's sink or swim time for me.
>
> I have some basic stuff working, but I'm getting lots of warnings  
> about ambiguity.
>
> Part of a sample input file might look like:
>
> ...
> /begin CALIBRATION_METHOD
> 	"Slewing"
> 	1
> 	/begin CALIBRATION_HANDLE
> 		0x1ffbf8
> 		0x400
> 		0
> 		AllSlews
> 	/end CALIBRATION_HANDLE
> /end CALIBRATION_METHOD
> ...
>
>
> My question is about look ahead.
> In my parser, I have rules like:
>
>
> calibrationMethod:BEGIN CAL_METH
> 			(calibrationHandle)*
> 			END CAL_METH;
> 			
> calibrationHandle:BEGIN CAL_HAND
> 			END CAL_HAND;
>
> Where my lexer rules are:
>
> protected
> SLASH		:'/';
>
> BEGIN		:SLASH "begin";
>
> END		:SLASH "end";
>
> CAL_METH	:"CALIBRATION_METHOD";
>
> CAL_HAND	:"CALIBRATION_HANDLE";
>
>
> (I'm just dealing with the tag structure first. Parsing the actual  
> data is my next step. I have filter=true for now so I can ignore  
> what I can't parse yet)
>
> And I'm getting ambiguity warnings. Should I set my lookahead to  
> something silly like 13 just to look past "CALIBRATION_"? (I read  
> that bigger lookaheads are performance killers) Or is there a  
> smarter way to do this? Should I use predicates like:
>
> calibrationMethod:BEGIN CAL_METH {this.inCalMeth=true;}
> 			(calibrationHandle)*
> 			END CAL_METH {this.inCalMeth=false;};
> 			
> calibrationHandle:{this.inCalMeth}?
> 		BEGIN CAL_HAND
> 		END CAL_HAND;
>
> Perhaps I'm completely off base. If it looks like I'm really  
> missing something, you might be right. Feel free to let me know.
>
> This is only one of the problems I'm having, but I'll just keep it  
> to one question per post ;)
>
> BTW, if anyone is aware of a grammar that is similar which I can  
> get inspiration from, can you let me know?
>
> Thanks,
>
> Lucien.
>

From mail at martin-probst.com  Mon Apr 17 01:38:06 2006
From: mail at martin-probst.com (Martin Probst)
Date: Mon Apr 17 01:38:11 2006
Subject: [antlr-interest] Formula parser and optional brackets
In-Reply-To: <0563741883A49249B93A75DF219F8C22013EA9BA@SZVSE201>
References: <0563741883A49249B93A75DF219F8C22013EA9BA@SZVSE201>
Message-ID: <A862CE82-C5DC-44D6-86E1-A045ED7D0AFF@martin-probst.com>

Hi,

I take your grammar starts with the "expr" rule. First off: "1 + 2 )"  
works because ANTLR does not implicitly check for the end of the  
file. I.e. a syntactically correct expression that is followed by  
garbage is fine with ANTLR by default, you've got to explicitly check  
for the magic EOF token in your start rule, e.g.

expr	: sumBaseExpr EOF;

Why did you add all that stuff to expr anyways? I think it shouldn't  
be there - the PLUS MINUS etc are parsed within the lower rules, no  
need to have them within "expr". Also, if your grammar starts with  
"expr", you require every expression to be encapsulated in  
parenthesis, is that really what you want?

> expr     :  (sumBaseExpr) => (LPAREN^ sumBaseExpr RPAREN! (PLUS^ |
> MINUS^ |MULT^ |DIV^) sumBaseExpr)
> 				|(complexExpr) => (LPAREN^ sumBaseExpr
> RPAREN!) | sumBaseExpr ;

I'd guess you rather need something like this:

expr: sumBaseExpr EOF;

This should work correctly for arithmetic expressions and for  
parenthesis.

Martin
From parrt at cs.usfca.edu  Mon Apr 17 19:59:46 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Apr 17 19:59:50 2006
Subject: [antlr-interest] wiki is back up
Message-ID: <B7B55B98-77A5-4EA9-A033-E7B6EDB4479A@cs.usfca.edu>

http://www.antlr.org/wiki

restored from backup so it should look the same.

Consider this a TEST.  If it hoses my server again I'll take it down.  
I've disabled the mail archive feature and am using a new version of  
confluence.

Ter
From sohail at taggedtype.net  Mon Apr 17 21:33:11 2006
From: sohail at taggedtype.net (Sohail Somani)
Date: Mon Apr 17 21:33:19 2006
Subject: [antlr-interest] wiki is back up
In-Reply-To: <B7B55B98-77A5-4EA9-A033-E7B6EDB4479A@cs.usfca.edu>
References: <B7B55B98-77A5-4EA9-A033-E7B6EDB4479A@cs.usfca.edu>
Message-ID: <1145334792.8171.0.camel@localhost.localdomain>

On Mon, 2006-04-17 at 19:59 -0700, Terence Parr wrote:
> http://www.antlr.org/wiki
> 
> restored from backup so it should look the same.
> 
> Consider this a TEST.  If it hoses my server again I'll take it down.  
> I've disabled the mail archive feature and am using a new version of  
> confluence.

I dont know if you've been through this before, but why not use moinmoin
if confluence hurts you bad? Its new gui editor is awesome.


From Michiel_Vermandel at axi.be  Tue Apr 18 02:01:48 2006
From: Michiel_Vermandel at axi.be (Michiel Vermandel)
Date: Tue Apr 18 02:01:55 2006
Subject: [antlr-interest] controlling tree sequence in a parser
In-Reply-To: <dd3a065f0604141105l1214a4d9u97a9db5895f2ac09@mail.gmail.com>
Message-ID: <OFFD37ACC1.BAD52A0A-ONC1257154.00318EF7-C1257154.00319A76@Axi.be>

Thanks a lot! 
This does the trick :-)

Michiel




"Bryan Ewbank" <ewbank@gmail.com> 
Sent by: antlr-interest-bounces@antlr.org
14/04/2006 20:05

To
"ANTLR Interest" <antlr-interest@antlr.org>
cc

Subject
Re: [antlr-interest] controlling tree sequence in a parser






Oh, that's what you're asking; thanks for the clarification...

To rearrange the children of a node, you must build the node directly
- ANTLR's default is that everything is linked as siblings from
left-to-right, unless you use the "^" marker.  Right now, you must be
building the tree for the <select_statement>... something like this, I
hope:

    // use the "select" as the root node for the tree; discard "into"
and "from" keywords
    select_expression :
        "select"^ select_list
        "into"!   variable_list
        "from"!   table_reference_list
        ;

Or, perhaps, this (I tend toward this style):

    // use an artificial node for the root node, discard all keywords
    select_expression :
        "select"! select_list
        "into"!   variable_list
        "from"!   table_reference_list
        {
            ## = #( #[SELECT_EXPR,"SELECT_EXPR"], ##);
        }
        ;

To build the tree as you want it (with the table_reference_list item
first, you have to be more explicit:

    // create an artificial node for the expression, discard the 
unnecessary
    // keywords the items are placed in the generated tree in the order
    // directed by the ## statement, so change it as necessary.
    select_expression :
        "select"! slist:select_list
        "into"!   vlist:variable_list
        "from"!   tlist:table_reference_list
        {
            ## = #( #[SELECT_EXPR,"SELECT_EXPR"],
                    #tlist,
                    #slist,
                    #vlist);
        }
        ;

Caveat/Disclaimer:  The above discussion assumes that select_list,
variable_list, and table_reference_list all produce a single tree
rather than a list of trees.  I assumed this from the diagrams that
you drew, and it's really the only way to produce a regular tree from
the description of the language I assumed based on what's here.

Hope this helps!
- Bryan Ewbank

On 4/14/06, Michiel Vermandel <Michiel_Vermandel@axi.be> wrote:
> Consider this statement:
>
>   SELECT dummy
>   FROM     dual
>
> With my current grammar I get an AST tree like this:
>
>    start_rule [4]
>        select_statement [14]
>            select_list [15]
>                column_reference [50]
>                    dummy[299]
>            table_list [16]
>                table_reference [46]
>                    dual [299]

> ... I wanted to change the AST tree to the following and in this way 
have the
> table reference registered before the column:
>
>   start_rule [4]
>       select_statement [14]
>           table_list [16]
>               table_reference [46]
>                   dual [299]
>           select_list [15]
>               column_reference [50]
>                   dummy[299]
>
> So, how can I move up the result of the table_list subrule?

>  > select_expression
>  >             :
>  >          "select"  select_list
>  >          "into"       variable_list
>  >          "from"     table_reference_list^   //  <-- not  accepted
>  >             ;

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060418/2039fab4/attachment.html
From henryb at ntlworld.com  Tue Apr 18 05:36:09 2006
From: henryb at ntlworld.com (Henry Butowsky)
Date: Tue Apr 18 05:32:27 2006
Subject: [antlr-interest] Lexer
Message-ID: <4444DD39.7010602@ntlworld.com>

Hi Guys,
   Im using Antlr 2.7.5 in C++.
   How do I get the lexer to read from a string rather than a file ?
   I've been looking at CharScanner class but nothing immediatly springs 
to mind. Im a bit of a newbie when it comes to C++ things

  I use the following code to initialize the lexer & parser.

char *filename;
ifstream *in;

ncoLexer lexer(*in);
lexer.setFilename(filename);
 
        ncoParser parser(lexer);
parser.setFilename(filename);

From ewbank at gmail.com  Tue Apr 18 05:42:42 2006
From: ewbank at gmail.com (Bryan Ewbank)
Date: Tue Apr 18 05:42:44 2006
Subject: [antlr-interest] Lexer
In-Reply-To: <4444DD39.7010602@ntlworld.com>
References: <4444DD39.7010602@ntlworld.com>
Message-ID: <dd3a065f0604180542x596b8ba8o16c685720617939@mail.gmail.com>

Take a look at the C++ string stream stuff; it allows a string to
masquerade as a stream.  It's not an ANTLR-specific change, but a
general technique in C++.

Hope this helps,
- Bryan

On 4/18/06, Henry Butowsky <henryb@ntlworld.com> wrote:
> Hi Guys,
>    Im using Antlr 2.7.5 in C++.
>    How do I get the lexer to read from a string rather than a file ?
> I've been looking at CharScanner class but nothing immediatly springs
> to mind. Im a bit of a newbie when it comes to C++ things
From 12345alex at gmx.net  Tue Apr 18 06:24:53 2006
From: 12345alex at gmx.net (ak)
Date: Tue Apr 18 06:24:59 2006
Subject: [antlr-interest] antlr python-grammar
Message-ID: <1145366694.24140.10.camel@localhost.local>

hi.

i've started to play around with antlr using the python-grammar from
antlr.org. i've noticed that there is no treeparser-grammar.

will this be the case sometime? on whose nerves can i get until? ;)

mfg

alexander  
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20060418/f05adf67/attachment.bin
From parrt at cs.usfca.edu  Tue Apr 18 10:18:49 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Apr 18 10:18:52 2006
Subject: [antlr-interest] wiki is back up
In-Reply-To: <1145334792.8171.0.camel@localhost.localdomain>
References: <B7B55B98-77A5-4EA9-A033-E7B6EDB4479A@cs.usfca.edu>
	<1145334792.8171.0.camel@localhost.localdomain>
Message-ID: <1C14F3F7-7B1C-46E7-94C5-B0069EBFACC4@cs.usfca.edu>


On Apr 17, 2006, at 9:33 PM, Sohail Somani wrote:

> On Mon, 2006-04-17 at 19:59 -0700, Terence Parr wrote:
>> http://www.antlr.org/wiki
>>
>> restored from backup so it should look the same.
>>
>> Consider this a TEST.  If it hoses my server again I'll take it down.
>> I've disabled the mail archive feature and am using a new version of
>> confluence.
>
> I dont know if you've been through this before, but why not use  
> moinmoin
> if confluence hurts you bad? Its new gui editor is awesome.

I want a java solution so it integrates into antlr.org's resin server.

Ter
From mail at martin-probst.com  Tue Apr 18 10:36:15 2006
From: mail at martin-probst.com (Martin Probst)
Date: Tue Apr 18 10:36:21 2006
Subject: [antlr-interest] Lexer
In-Reply-To: <dd3a065f0604180542x596b8ba8o16c685720617939@mail.gmail.com>
References: <4444DD39.7010602@ntlworld.com>
	<dd3a065f0604180542x596b8ba8o16c685720617939@mail.gmail.com>
Message-ID: <31ECCD1A-2065-4BB1-B546-BD7B4899A0BC@martin-probst.com>

I think it's called istringstream.

Am 18.04.2006 um 14:42 schrieb Bryan Ewbank:

> Take a look at the C++ string stream stuff; it allows a string to
> masquerade as a stream.  It's not an ANTLR-specific change, but a
> general technique in C++.
>
> Hope this helps,
> - Bryan
>
> On 4/18/06, Henry Butowsky <henryb@ntlworld.com> wrote:
>> Hi Guys,
>>    Im using Antlr 2.7.5 in C++.
>>    How do I get the lexer to read from a string rather than a file ?
>> I've been looking at CharScanner class but nothing immediatly springs
>> to mind. Im a bit of a newbie when it comes to C++ things
>

From parrt at cs.usfca.edu  Tue Apr 18 10:48:59 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Apr 18 10:49:04 2006
Subject: [antlr-interest] Trying to learn ANTLR v3 and String Template...
In-Reply-To: <738584f80604150710w17e8c1fdxab9b75d963719285@mail.gmail.com>
References: <738584f80604150710w17e8c1fdxab9b75d963719285@mail.gmail.com>
Message-ID: <B14E9D3E-F027-4C20-88CE-C85B08592436@cs.usfca.edu>


On Apr 15, 2006, at 7:10 AM, Rob Greene wrote:

> I've done some work with ANTLR v2 to build an expression parser, so  
> the world is a dark gray instead of black, but...
>
> (Q1) Is there the beginnings of a tutorial for the v3 syntax? I see  
> musings regarding design decisions, but frankly that's way beyond me.

Hi Rob!  Ok, got the wiki started and added a v2 versus v3 page:

http://www.antlr.org/wiki/display/ANTLR3/The+difference+between+ANTLR 
+v2+and+v3

We need a migration page too.  I know lots of people have made some  
notes, let's start collecting them!

> I've seen that string template has it's own docs, so I suspect that  
> once I get that far, I can use that for reference (and from what  
> I've seen as examples so far, it looks pretty straight forward).

i should also have a paper out in draft form very shortly.

> (Q2) Once I've produced all the code (future task), how would I  
> dump out my variable declarations? In the scope is there an "@done"  
> production where I can drop in some code to generate that output?  
> (Or, quite possibly, a string template reference?)

You eventually call .toString on the outer most template. Just put an  
action somewhere to create that string and send it to a file.  There  
is an @finally {...}Action for rules that is executed when the rule  
exits if you want.

> (Q3) Also, when I'm in ANTLR Works, is there some way to work with  
> a template (group) file?

Not yet. Jean Bovet and I are talking about this.

> I see the example for "cminus" uses multiple group templates, but  
> there is a separate Java program setting that up. When I've started  
> monkeying with templates, it starts looking for template files  
> named after each individual template - but I couldn't figure out  
> either where they need to be or what they should be named. I'm just  
> trying to figure out where ANTLR Works stops and Eclipse begins...

you are specifically loading a template group files with a reader so  
you or specifying the location. Do not use the StringTempalteGroup   
constructors that do not tak a group file format.

> (Q4) I think I just need verification on this: Those productions  
> that aren't in caps (invokes other productions maybe) return an  
> object that has a String Template in the ".st" portion

the return  argument is called $st not ".st".

> and the productions that are in CAPS (somewhat more in the constant  
> realm) do not have String Templates, but they do have a ".text"  
> node that contains the value. What is returned and what is  
> available on these nodes?

CAPS implies token. lowercase implies rule reference.

> (Q5) Oh yeah, on a purely not getting it scale, can I declare a  
> global scope (this is assembly after all) and keep the  
> initialization of the variables outside of the program declaration  
> itself? I think it may be a tad bit cleaner. I tried something like  
> the snippet below, but the global_scope itself (a Stack) never got  
> initialized.  This was placed before the program production but  
> after the options declaration.
>     scope global {
>         List variables;
>     }
>     @init {
>         $global::variables = new ArrayList();
>     }

  my recommendation is that you do not play with "scopes" until you  
really know what to doing. Using instance variables.

> (Q6) What the heck is channel 99? Are there others?

  all white spacecharacters are sent to the parser on a hidden  
channel so that the parser has them but does not parse them. It is  
like listening to a different radio channel.

> Shoot, as usual, this grew. Sorry and thanks in advance for your  
> advice!

My pleasure.
Ter
From craymer at warpiv.com  Tue Apr 18 16:59:05 2006
From: craymer at warpiv.com (Loring Craymer)
Date: Tue Apr 18 16:59:26 2006
Subject: [antlr-interest] antlr python-grammar
In-Reply-To: <1145366694.24140.10.camel@localhost.local>
Message-ID: <001601c66344$16652090$8902a8c0@Fafnir>

I can do something about that.  However, I have to ask what you intend to
use it for--just for pretty printing (minimal tree structure requirements)
or for custom analysis (probably with specific structure requirements).  How
I annotate the parser grammar depends on the answer--there are multiple
possible tree structures.

I did the original version of the parser grammar as a machine translation of
the grammar that comes with the Python distro; Ter modified it a bit and
added the lexer for use in the classroom.  Neither of us took it far enough
to need a tree grammar:  at the time, I just wanted to do a BNF translator
as a matter of sheer elegance; Ter needed something simple for classroom
use.

--Loring

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of ak
> Sent: Tuesday, April 18, 2006 6:25 AM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] antlr python-grammar
> 
> hi.
> 
> i've started to play around with antlr using the python-grammar from
> antlr.org. i've noticed that there is no treeparser-grammar.
> 
> will this be the case sometime? on whose nerves can i get until? ;)
> 
> mfg
> 
> alexander

From parrt at cs.usfca.edu  Tue Apr 18 17:12:28 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Apr 18 17:12:33 2006
Subject: [antlr-interest] antlr python-grammar
In-Reply-To: <001601c66344$16652090$8902a8c0@Fafnir>
References: <001601c66344$16652090$8902a8c0@Fafnir>
Message-ID: <F1A2BACA-D04E-4A8B-9166-6DD3B6C52BC7@cs.usfca.edu>

On Apr 18, 2006, at 4:59 PM, Loring Craymer wrote:
> I can do something about that.  However, I have to ask what you  
> intend to
> use it for--just for pretty printing (minimal tree structure  
> requirements)
> or for custom analysis (probably with specific structure  
> requirements).  How
> I annotate the parser grammar depends on the answer--there are  
> multiple
> possible tree structures.
>
> I did the original version of the parser grammar as a machine  
> translation of
> the grammar that comes with the Python distro; Ter modified it a  
> bit and
> added the lexer for use in the classroom.  Neither of us took it  
> far enough
> to need a tree grammar:  at the time, I just wanted to do a BNF  
> translator
> as a matter of sheer elegance; Ter needed something simple for  
> classroom
> use.

Yep, my students did the translation as part of a lab:

http://www.cs.usfca.edu/~parrt/course/652/labs/python.html

Wasn't too bad.  Fun!  Note that I have translated the stuff to  
v3...it may be in the examples-v3 tarball.  No tree stuff as Loring  
says.

Ter
From anm_thunder at yahoo.com.br  Tue Apr 18 19:40:46 2006
From: anm_thunder at yahoo.com.br (Thun)
Date: Tue Apr 18 19:41:12 2006
Subject: [antlr-interest] Manual tree construction problem with VC 7.1
Message-ID: <000801c6635a$ab5a8300$2101a8c0@bedeschi>

a: b EOF {#shader = #([ITK_A], b);} ;


b: "B";

I get the following error when compilng the generated code from the parser above:

error C2664: 'antlr::ASTArray::add' : cannot convert parameter 1 from 'void (void)' to 'antlr::RefAST'
a_AST = antlr::RefAST(astFactory->make((new antlr::ASTArray(2))->add(astFactory->create(ITK_A))->add(b)));

The problem is with the '->add(b)'.

b is the matching method for the b rule, it returns void.

It cant compile in VS 2003 C++ 7.1, is there a way to fix it?



Thanks

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060418/d8bf7dee/attachment.html
From mail at martin-probst.com  Tue Apr 18 22:56:23 2006
From: mail at martin-probst.com (Martin Probst)
Date: Tue Apr 18 22:56:28 2006
Subject: [antlr-interest] Manual tree construction problem with VC 7.1
In-Reply-To: <000801c6635a$ab5a8300$2101a8c0@bedeschi>
References: <000801c6635a$ab5a8300$2101a8c0@bedeschi>
Message-ID: <4D46AA64-D14C-44B3-AB45-2A176F625959@martin-probst.com>

You have to give the tree returned by the subrule a label to  
reference it, simply it's name doesn't work:

a: mylabel:b EOF { ## = #(#[...], #mylabel); };

will do the trick.

Martin

Am 19.04.2006 um 04:40 schrieb Thun:

> a: b EOF {#shader = #([ITK_A], b);} ;
>
>
> b: "B";
>
> I get the following error when compilng the generated code from the  
> parser above:
>
> error C2664: 'antlr::ASTArray::add' : cannot convert parameter 1  
> from 'void (void)' to 'antlr::RefAST'
> a_AST = antlr::RefAST(astFactory->make((new antlr::ASTArray(2))->add 
> (astFactory->create(ITK_A))->add(b)));
>
> The problem is with the '->add(b)'.
>
> b is the matching method for the b rule, it returns void.
>
> It cant compile in VS 2003 C++ 7.1, is there a way to fix it?
>
>
> Thanks
>
>
>

From ric.klaren at gmail.com  Wed Apr 19 00:23:52 2006
From: ric.klaren at gmail.com (Ric Klaren)
Date: Wed Apr 19 00:23:54 2006
Subject: [antlr-interest] Lexer
In-Reply-To: <4444DD39.7010602@ntlworld.com>
References: <4444DD39.7010602@ntlworld.com>
Message-ID: <bc607a4e0604190023r4c7bfe79of3f868ea1447fb4@mail.gmail.com>

Hi,

Have a look at examples/cpp/calc should be several examples for making
antlr read from different stuff.

Cheers,

Ric
From jimi at temporal-wave.com  Wed Apr 19 03:23:44 2006
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed Apr 19 03:25:10 2006
Subject: [antlr-interest] Re: ANTLR Works and compiler settings...
References: <738584f80604132113o5f97db90n45fcb7fa21c3f201@mail.gmail.com><738584f80604140458q3bc64a86t30f20a10e552702@mail.gmail.com>
	<BFD0A8B5-57F6-465C-9A24-A04EB1905C1F@arizona-software.ch>
Message-ID: <B36CCC332A32904F8FA3DE134A23533608A5A3@wavemachine.temporal-wave.com>

It works fine with 1.5 but the generated code incurs warnings that should be removed at some point. JDK 1.5 works fine on MAC now so perhaps ANTLR 3 could be updated to accommodate it at some point.
 
Jim

________________________________

From: antlr-interest-bounces@antlr.org on behalf of Jean Bovet
Sent: Sun 4/16/2006 7:41 AM
To: Rob Greene
Cc: ANTLR Interest
Subject: Re: [antlr-interest] Re: ANTLR Works and compiler settings...


Interesting... so with 1.5 is does not work but with 1.4 it works? 

Jean

On Apr 14, 2006, at 4:58 AM, Rob Greene wrote:


	Update:
	
	After sending my email, I realized that I did have a 1.4 JDK installed, and that does work.
	
	So, maybe this is a report that the Java code generation does not compile without tweaking under Java 5.0.  :-)
	
	Thanks!
	-Rob
	
	
	On 4/13/06, Rob Greene <robgreene@gmail.com> wrote: 

		Is there a trick to getting ANTLR Works to compile a grammer and working in the debugger?
		
		When I have com.sun.tools.javac selected, I get the following error: "Compiler exception: com.sun.tools.javac.Main" 
		
		When I have javac (but not path) selected, I get: "Compiler exception: CreateProcess javac -classpath ... error=2"
		
		When I have javac with path to Java 5.0, I get: "Cannot launch the debugger.  Time-out waiting to connect to the remote user." and the console shows: 
		    [23:10:34] Note: C:\Temp\ANTLR\BasicBasic.java uses unchecked or unsafe operations.
		    [23:10:34] Note: Recompile with -Xlint:unchecked for details.
		    [23:10:41] Launch with path =C:\Temp\ANTLR\classes;C:\Temp\ANTLR\antlrworks- 1.0ea8.jar;C:\Temp\ANTLR\antlrworks-1.0ea8.jar;.
		
		Does the Java code generated work with Java 5.0?  (Yes, I do get java files created.)  Do I need to downgrade to Java 1.4 while developing in ANTLR Works?
		
		Besides that, this has a lot of promise.  I'm hoping that once the debugger is functional, I will be able to actually run the grammar against a file and see whatever output I need to produce?  Is ANTLR v3 considered stable enough that I should use that, still as a beginner, over v2? 
		
		Thanks!
		
		-Rob
		



From jimi at temporal-wave.com  Wed Apr 19 03:27:13 2006
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed Apr 19 03:28:57 2006
Subject: [antlr-interest] wiki is back up
References: <B7B55B98-77A5-4EA9-A033-E7B6EDB4479A@cs.usfca.edu>
	<1145334792.8171.0.camel@localhost.localdomain>
Message-ID: <B36CCC332A32904F8FA3DE134A23533608A5A4@wavemachine.temporal-wave.com>

I have found that twiki is easiest to set up (about 20 minutes and then it just works), but Ter decided on this one, so my thirst for a twiki is fulfilled and if it all works I don't really care.
 
Jim

________________________________

From: antlr-interest-bounces@antlr.org on behalf of Sohail Somani
Sent: Tue 4/18/2006 6:33 AM
To: Terence Parr
Cc: Antlr List
Subject: Re: [antlr-interest] wiki is back up



On Mon, 2006-04-17 at 19:59 -0700, Terence Parr wrote:
> http://www.antlr.org/wiki
>
> restored from backup so it should look the same.
>
> Consider this a TEST.  If it hoses my server again I'll take it down. 
> I've disabled the mail archive feature and am using a new version of 
> confluence.

I dont know if you've been through this before, but why not use moinmoin
if confluence hurts you bad? Its new gui editor is awesome.




From Stritzel.Nils at infineon.com  Wed Apr 19 04:08:17 2006
From: Stritzel.Nils at infineon.com (Stritzel.Nils@infineon.com)
Date: Wed Apr 19 04:09:23 2006
Subject: [antlr-interest] Formula Parser once again
Message-ID: <0563741883A49249B93A75DF219F8C2201435CFA@SZVSE201>

Hi,

I am currently implementing kind of a formula parser, after some start
problems I thought that I got the thing going. Now I am stuck again, all
the basic stuff multiplication and addition etc. was working fine, but
now want to call a function to calculate the the absolute value of
value. 
Actually this kind of thing should be rather easy, but my solution is
not working. I stepped through the code and there is a
RecognitionException after it found the functionCall token. I have spend
some hours on this problem, but still have no idea, maybe some can give
me a hint. 

Thank you,

Nils

options {
	language = "CSharp";
	namespace  =  "FormulaParsing";
}

class ExpressionParser extends Parser;
options {
	buildAST = true;	// uses CommonAST by default
	k = 3;
}

imaginaryTokenDefinitions :
	SIGN_MINUS
	SIGN_PLUS
;

expr : formula ;
formula : 
	BATCHCSID ASSIGN^ batchExpr EOF
	;
	

batchExpr :sumExpr ;
sumExpr  : prodExpr ((PLUS^|MINUS^) prodExpr)* ; 
prodExpr : baseExpr ((MULT^|DIV^|MOD^) baseExpr)* ;

baseExpr : primaryExpr | signedExpr;
signedExpr: 
         (m:
         MINUS^ {#m.setType(SIGN_MINUS);}
         |p:
         PLUS^  {#p.setType(SIGN_PLUS);})         
	baseExpr;
	

	
primaryExpr
  : DOUBLE
  | (LPAREN^ batchExpr RPAREN! )
  | functionCall
  ;
  
  
functionCall : CSIGN^ LPARENT^ batchExpr RPARENT!      
  	     ;
  	


class ExpressionLexer extends Lexer;

options {
	k = 4;
}

PLUS  : '+' ;
MINUS : '-' ;
MULT   : '*' ;
DIV   : '/' ;
MOD   : '%' ;
POW   : '^' ;
SEMI  : ';' ; 
LPAREN : '(' ;
RPAREN : ')' ;
protected DIGIT : '0'..'9' ;
protected LETTER: ('a'..'z') ;
protected IDENT : LETTER (('_')* (LETTER|DIGIT))? ;
WS :
	(' '
	| '\t'
	| '\r' '\n' {newline(); }
	| '\n'	{newline(); }
	)
	{ $setType(Token.SKIP); };
	
DOUBLE 		:	(DIGIT)+ ('.' (DIGIT)+)? ('e' (MINUS|PLUS)?
(DIGIT)+ )? ;	

ASSIGN		:       '=' ;

BATCHCSID	:	"bsc." IDENT ;


CABS	:  "c_abs";




class ExpressionTreeWalker extends TreeParser;

expr returns [EvalResult result]
  { string a; double b; result = null; }
  : #(ASSIGN batchId :BATCHCSID b=batchExpr) {result = new
BatchEvalResult(batchId.getText(),b); } ;


bracketExpr returns [double r]
{double a; r=0; }
: #(LPAREN a=batchExpr) {r=a; }
;
batchExpr returns [double r]
  { double a, b; r=0 ; string c;}
  : #(PLUS  a=batchExpr b=batchExpr) { r = a + b;}
  | #(MINUS a=batchExpr b=batchExpr) { r = a - b;}
  | #(MULT   a=batchExpr b=batchExpr) { r = a * b;}
  | #(DIV   a=batchExpr b=batchExpr) { r = a / b; }
  | #(LPAREN a=batchExpr) { r=a;}
  | #(SIGN_MINUS a=batchExpr)   { r=-1*a; } 
  | #(SIGN_PLUS  a=batchExpr)   { r=a; }
  | #(CABS a=batchExpr) { r= Math.Abs(a); }
  |i :DOUBLE  { r=(double) Double.Parse(i.getText());}
  ;
  
From 12345alex at gmx.net  Wed Apr 19 05:01:50 2006
From: 12345alex at gmx.net (ak)
Date: Wed Apr 19 05:01:57 2006
Subject: [antlr-interest] antlr python-grammar
In-Reply-To: <001601c66344$16652090$8902a8c0@Fafnir>
References: <001601c66344$16652090$8902a8c0@Fafnir>
Message-ID: <1145448110.25635.25.camel@localhost.local>

hi, loring.

thanks for your answer.

Am Dienstag, den 18.04.2006, 16:59 -0700 schrieb Loring Craymer:
> I can do something about that.  However, I have to ask what you intend to
> use it for--just for pretty printing (minimal tree structure requirements)
> or for custom analysis (probably with specific structure requirements).  How
> I annotate the parser grammar depends on the answer--there are multiple
> possible tree structures.
i agree that the tree structure depends on custom needs. my needs will
evolve, so i can't tell exactly what the tree should look like.

to be honest, i'm still not sure whether i need a tree or not.

what i want to do is build up a structure of java-instances that
represents entities of the parsed python-file(s). something like
PythonModule, PythonClass, PythonFunction(bound or not). anything i
can't handle yet(expressions, loops, etc.) should be available as a
string which i can put somewhere.

perhaps you can give me some hints. should i write a treeparser-grammar
from scratch? should i add the tree-related stuff to a copy of your
python.g? should i just put in some actions?

i think a tree would make life easier, any thoughts and comments are
welcome.

thanks in advance.

alexander
> 
> I did the original version of the parser grammar as a machine translation of
> the grammar that comes with the Python distro; Ter modified it a bit and
> added the lexer for use in the classroom.  Neither of us took it far enough
> to need a tree grammar:  at the time, I just wanted to do a BNF translator
> as a matter of sheer elegance; Ter needed something simple for classroom
> use.
> 
> --Loring
> 
> > -----Original Message-----
> > From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> > bounces@antlr.org] On Behalf Of ak
> > Sent: Tuesday, April 18, 2006 6:25 AM
> > To: antlr-interest@antlr.org
> > Subject: [antlr-interest] antlr python-grammar
> > 
> > hi.
> > 
> > i've started to play around with antlr using the python-grammar from
> > antlr.org. i've noticed that there is no treeparser-grammar.
> > 
> > will this be the case sometime? on whose nerves can i get until? ;)
> > 
> > mfg
> > 
> > alexander
> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20060419/1bfb88a6/attachment-0001.bin
From 12345alex at gmx.net  Wed Apr 19 05:30:58 2006
From: 12345alex at gmx.net (ak)
Date: Wed Apr 19 05:31:03 2006
Subject: [antlr-interest] antlr python-grammar
In-Reply-To: <1145448110.25635.25.camel@localhost.local>
References: <001601c66344$16652090$8902a8c0@Fafnir>
	<1145448110.25635.25.camel@localhost.local>
Message-ID: <1145449858.25635.35.camel@localhost.local>

hi, again.

sorry, i have to update myself.

Am Mittwoch, den 19.04.2006, 14:01 +0200 schrieb ak:
> hi, loring.
> 
> thanks for your answer.
> 
> Am Dienstag, den 18.04.2006, 16:59 -0700 schrieb Loring Craymer:
> > I can do something about that.  However, I have to ask what you intend to
> > use it for--just for pretty printing (minimal tree structure requirements)
> > or for custom analysis (probably with specific structure requirements).  How
> > I annotate the parser grammar depends on the answer--there are multiple
> > possible tree structures.
> i agree that the tree structure depends on custom needs. my needs will
> evolve, so i can't tell exactly what the tree should look like.
> 
> to be honest, i'm still not sure whether i need a tree or not.
> 
> what i want to do is build up a structure of java-instances that
> represents entities of the parsed python-file(s). something like
> PythonModule, PythonClass, PythonFunction(bound or not). anything i
> can't handle yet(expressions, loops, etc.) should be available as a
> string which i can put somewhere.
the strings should of course be syntactically correct, which means i
definitly want to use your python.g ;)

mfg

alexander
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20060419/4c84749c/attachment.bin
From parrt at cs.usfca.edu  Wed Apr 19 07:58:03 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Apr 19 07:58:06 2006
Subject: [antlr-interest] wiki is back up
In-Reply-To: <B36CCC332A32904F8FA3DE134A23533608A5A4@wavemachine.temporal-wave.com>
References: <B7B55B98-77A5-4EA9-A033-E7B6EDB4479A@cs.usfca.edu>
	<1145334792.8171.0.camel@localhost.localdomain>
	<B36CCC332A32904F8FA3DE134A23533608A5A4@wavemachine.temporal-wave.com>
Message-ID: <55AFBB67-06ED-43BB-9485-C4E986F47A0B@cs.usfca.edu>


On Apr 19, 2006, at 3:27 AM, Jim Idle wrote:

> I have found that twiki is easiest to set up (about 20 minutes and  
> then it just works), but Ter decided on this one, so my thirst for  
> a twiki is fulfilled and if it all works I don't really care.

Confluence is faster than that ;)  Just download, put a link in resin  
server dir, set a dir in a property file and restart resin.  Then set  
admin password.  Done.

Ter

From robgreene at gmail.com  Wed Apr 19 10:56:44 2006
From: robgreene at gmail.com (Rob Greene)
Date: Wed Apr 19 10:56:50 2006
Subject: [antlr-interest] Trying to learn ANTLR v3 and String Template...
In-Reply-To: <B14E9D3E-F027-4C20-88CE-C85B08592436@cs.usfca.edu>
References: <738584f80604150710w17e8c1fdxab9b75d963719285@mail.gmail.com>
	<B14E9D3E-F027-4C20-88CE-C85B08592436@cs.usfca.edu>
Message-ID: <738584f80604191056j22466f8djbcae39a1cd8f65ec@mail.gmail.com>

Thanks, Terry. That helps me along.

I keep poking along and keep ending up with more questions. I'm at least
generating output with a simple simple template now!

(1) I see that you mention tree construction is far superior. (I've got a
hunch that this leads into my next quesion, but I'll ask anyway.) If we're
able to generate output with StringTemplate, why do I want to shape the AST?
(Truly clueless on my end.)

(2) Will I be able to generate code from StringTemplate for most "compiler"
type projects? (I'm putzing with a BASIC-ish language.)  I think the part
I'm concerned about is that I'll have byte, int, string types, etc.
Operations such as "plus" vary based on data types. Can StringTemplate
handle that - or should I be working on a tree walker and embeded Java code
to track data types? Once I've identified what is being added to what, then
I could use the template to generate code.

(3) With BASIC, the colon is optional; a new line typically ends a
statement; and (maybe) there is a line continuation character? How is that
handled appropriately? I'm going to try "SEPARATOR = ':' | NL" and then use
"SEPARATOR+" at the end of a statement. I have no clue on the line
continuation... do I even want to try at this point in time?

Thanks as always - I'm hoping someday I actually "get" it.  :-)
-Rob

On 4/18/06, Terence Parr <parrt@cs.usfca.edu> wrote:
>
>
> On Apr 15, 2006, at 7:10 AM, Rob Greene wrote:
>
> > I've done some work with ANTLR v2 to build an expression parser, so
> > the world is a dark gray instead of black, but...
> >
> > (Q1) Is there the beginnings of a tutorial for the v3 syntax? I see
> > musings regarding design decisions, but frankly that's way beyond me.
>
> Hi Rob!  Ok, got the wiki started and added a v2 versus v3 page:
>
> http://www.antlr.org/wiki/display/ANTLR3/The+difference+between+ANTLR
> +v2+and+v3
>
> We need a migration page too.  I know lots of people have made some
> notes, let's start collecting them!
>
> > I've seen that string template has it's own docs, so I suspect that
> > once I get that far, I can use that for reference (and from what
> > I've seen as examples so far, it looks pretty straight forward).
>
> i should also have a paper out in draft form very shortly.
>
> > (Q2) Once I've produced all the code (future task), how would I
> > dump out my variable declarations? In the scope is there an "@done"
> > production where I can drop in some code to generate that output?
> > (Or, quite possibly, a string template reference?)
>
> You eventually call .toString on the outer most template. Just put an
> action somewhere to create that string and send it to a file.  There
> is an @finally {...}Action for rules that is executed when the rule
> exits if you want.
>
> > (Q3) Also, when I'm in ANTLR Works, is there some way to work with
> > a template (group) file?
>
> Not yet. Jean Bovet and I are talking about this.
>
> > I see the example for "cminus" uses multiple group templates, but
> > there is a separate Java program setting that up. When I've started
> > monkeying with templates, it starts looking for template files
> > named after each individual template - but I couldn't figure out
> > either where they need to be or what they should be named. I'm just
> > trying to figure out where ANTLR Works stops and Eclipse begins...
>
> you are specifically loading a template group files with a reader so
> you or specifying the location. Do not use the StringTempalteGroup
> constructors that do not tak a group file format.
>
> > (Q4) I think I just need verification on this: Those productions
> > that aren't in caps (invokes other productions maybe) return an
> > object that has a String Template in the ".st" portion
>
> the return  argument is called $st not ".st".
>
> > and the productions that are in CAPS (somewhat more in the constant
> > realm) do not have String Templates, but they do have a ".text"
> > node that contains the value. What is returned and what is
> > available on these nodes?
>
> CAPS implies token. lowercase implies rule reference.
>
> > (Q5) Oh yeah, on a purely not getting it scale, can I declare a
> > global scope (this is assembly after all) and keep the
> > initialization of the variables outside of the program declaration
> > itself? I think it may be a tad bit cleaner. I tried something like
> > the snippet below, but the global_scope itself (a Stack) never got
> > initialized.  This was placed before the program production but
> > after the options declaration.
> >     scope global {
> >         List variables;
> >     }
> >     @init {
> >         $global::variables = new ArrayList();
> >     }
>
>   my recommendation is that you do not play with "scopes" until you
> really know what to doing. Using instance variables.
>
> > (Q6) What the heck is channel 99? Are there others?
>
>   all white spacecharacters are sent to the parser on a hidden
> channel so that the parser has them but does not parse them. It is
> like listening to a different radio channel.
>
> > Shoot, as usual, this grew. Sorry and thanks in advance for your
> > advice!
>
> My pleasure.
> Ter
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060419/df43a704/attachment.html
From anm_thunder at yahoo.com.br  Wed Apr 19 12:09:14 2006
From: anm_thunder at yahoo.com.br (Thun)
Date: Wed Apr 19 12:09:25 2006
Subject: [antlr-interest] Manual tree construction problem with VC 7.1
References: <000801c6635a$ab5a8300$2101a8c0@bedeschi>
	<4D46AA64-D14C-44B3-AB45-2A176F625959@martin-probst.com>
Message-ID: <003d01c663e4$c20a3520$2101a8c0@bedeschi>

This is only necessary because i am using it with VC 7.1 right? If i recall 
correctly, the doc states i can use a unlabeled token.

Thanks

----- Original Message ----- 
From: "Martin Probst" <mail@martin-probst.com>
To: "Thun" <anm_thunder@yahoo.com.br>
Cc: <antlr-interest@antlr.org>
Sent: Wednesday, April 19, 2006 2:56 AM
Subject: Re: [antlr-interest] Manual tree construction problem with VC 7.1


> You have to give the tree returned by the subrule a label to  reference 
> it, simply it's name doesn't work:
>
> a: mylabel:b EOF { ## = #(#[...], #mylabel); };
>
> will do the trick.
>
> Martin
>
> Am 19.04.2006 um 04:40 schrieb Thun:
>
>> a: b EOF {#shader = #([ITK_A], b);} ;
>>
>>
>> b: "B";
>>
>> I get the following error when compilng the generated code from the 
>> parser above:
>>
>> error C2664: 'antlr::ASTArray::add' : cannot convert parameter 1  from 
>> 'void (void)' to 'antlr::RefAST'
>> a_AST = antlr::RefAST(astFactory->make((new antlr::ASTArray(2))->add 
>> (astFactory->create(ITK_A))->add(b)));
>>
>> The problem is with the '->add(b)'.
>>
>> b is the matching method for the b rule, it returns void.
>>
>> It cant compile in VS 2003 C++ 7.1, is there a way to fix it?
>>
>>
>> Thanks
>>
>>
>>
> 


	

	
		
_______________________________________________________ 
Yahoo! doce lar. Fa?a do Yahoo! sua homepage. 
http://br.yahoo.com/homepageset.html 

From Stritzel.Nils at infineon.com  Wed Apr 19 18:35:27 2006
From: Stritzel.Nils at infineon.com (Stritzel.Nils@infineon.com)
Date: Wed Apr 19 18:36:06 2006
Subject: [antlr-interest] Formula Parser once again
Message-ID: <0563741883A49249B93A75DF219F8C2201435E06@SZVSE201>

 
Thanks this helped:
functionCall : CABS^ LPAREN! batchExpr RPAREN!

Actually there was another error, a spelling mistake (had LPARENT
instead of LPAREN)

Thanks,

Nils   

-----Original Message-----
From: John B. Brodie [mailto:jbb@acm.org] 
Sent: Wednesday, April 19, 2006 8:56 PM
To: Nils Stritzel (IFIS DC)
Subject: Re: [antlr-interest] Formula Parser once again

You asked about parsing a function call.

You have:

functionCall : CSIGN^ LPARENT^ batchExpr RPARENT!      
  	     ;

in your parser, but CSIGN isn't defined anywhere. Your lexer produces a
CABS token and your treewalker is expecting a CABS batchExpr node. Maybe
CSIGN should be CABS?

Also (but I am not very familiar with trees) you have two consecutive ^
operators in your functionCall rule - doesn't that mean that the root of
the tree will be the *last* ^ seen (e.g. the LPARENT and not the CSIGN,
er CABS)?

So maybe:

functionCall : CABS^ LPARENT! batchExpr RPARENT!      
  	     ;


Hope this helps...
   -jbb
From vidar at hawkis.com  Thu Apr 20 07:55:00 2006
From: vidar at hawkis.com (Vidar =?iso-8859-1?q?H=E5kestad?=)
Date: Thu Apr 20 07:55:05 2006
Subject: [antlr-interest] Java grammar v3.0, missing references.
Message-ID: <200604201655.00422.vidar@hawkis.com>

Downloaded antlrWorks, and the grammar examples 'examples-v3.tar.gz'.
Works stated 'missing references':
NUM_LONG and
NUM_DOUBLE

I added two lexer rules as follows:

NUM_LONG
	: NUM_INT
	;

NUM_DOUBLE
	: NUM_FLOAT
	;

and antlrWorks stopped complaining. I don't know if this is a full workaround, 
but the rules for NUM_INT and NUM_FLOAT does not seem to have any 
restrictions on how many digits they are allowed to gobble.
Another way to do this is to remove them from the constant production (because 
they are not referenced anywhere else). 

If the intent is to differenciate between long and short values, I suppose a 
more laborate solution must be created?

Regards,
Hawkis
From marcelito20 at gmail.com  Thu Apr 20 10:12:27 2006
From: marcelito20 at gmail.com (Marcelo Carrillo)
Date: Thu Apr 20 10:12:30 2006
Subject: [antlr-interest] PL/SQL Parser
Message-ID: <7b632da70604201012l571a8dcg47c7d1221e67d504@mail.gmail.com>

Hi folks,

I'm a Systems college student, and I'm developing a PL/SQL Code Generator as
my College's Thesis Graduation Project.
So my tutor ask me to add a module that validate the generated code after
any modification from the user.
I started to search for parser generators and I find the ANTLR Project, and
the PL/SQL Grammar from Qazi Firdous Ahmed.

I' ve generated the parser for C# but it implements a Tree Parser, so as I
understand I have to Implement a Class called SELECTEXPRESSIONNode, but I
don't know wich interface or class I have to implement or to extend.
And I'm having cast problems with my implementation.

I would appreciate any help or guidance to solve this problem.

Thanks in advance.

Best Regards,

Marcelo Carrillo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060420/8f363583/attachment.html
From parrt at cs.usfca.edu  Thu Apr 20 10:15:22 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Apr 20 10:15:24 2006
Subject: [antlr-interest] Java grammar v3.0, missing references.
In-Reply-To: <200604201655.00422.vidar@hawkis.com>
References: <200604201655.00422.vidar@hawkis.com>
Message-ID: <D93A30AB-3B8A-4B35-B238-9CA433996280@cs.usfca.edu>

Hi.  Yep,  that is a problem that existed in the previous version  
also. I did a direct translation. Later I will build a real grammar  
probably.

Ter
From mark.felzer at gmail.com  Thu Apr 20 13:42:39 2006
From: mark.felzer at gmail.com (Mark Felzer)
Date: Thu Apr 20 13:42:35 2006
Subject: [antlr-interest] understanding the intuition behind LL(k) parsers
	and LR(k) parsers
Message-ID: <4447F23F.60205@gmail.com>

Hey guys,

Maybe you can help me visualize the basic idea behind the two approaches 
to AST tree generation.
As I understand it a top-down parser..will start with the first input 
symbol of the program file,check if its a terminal/nonterminal, then it 
expands it..looking for the next predicted symbol. A bottom up parser 
has to start with some kind of "last terminal" then build the tree in 
upward direction. Intuitively where would the bottom-up parser start if 
presented an input file. How does it find this starting point, of the 
parse.It ha to be the deepest part of the tree. But how do you detect 
this, without expending the tree first from top-bottom? Is my thinking 
faulted?


Thank You.
Mark F.
From rob.hill at blueyonder.co.uk  Wed Apr 19 16:38:18 2006
From: rob.hill at blueyonder.co.uk (Robert Hill)
Date: Thu Apr 20 16:38:13 2006
Subject: [antlr-interest] antlr & antlr studio...
Message-ID: <20060420233811.430C3DCC21@www.antlr.org>

Couldn't contain myself any longer.

 

*Phrashant, Antlr Studio is awesome*

As if Antlr 2.7.6 wasn't good enough, we get real time syntax diagramming
and shed loads of other cool stuff.

 

Ok, I admit, I don't really like the java environments, and being brought up
on M$ ware, VS2005 kind of eclipses eclipse ;) but holy sh*t, if antlr
studio doesn't make me want to write my parsers inside eclipse just to see
those diagrams ;)

 

In short, if you don't already have a copy of Antlr Studio, BUY ONE. If
you're writing Antlr grammars, you must be a muppet if you don't already
have a copy. (just like I *was* - lol!)

 

Now all I want is it to do voice recognition for the immortal phrase
"..right, I want this compiler to .." 

 

I wait with baited breath for the Antlr V3 & Antlr studio combo, in fact ,
the credit card's already out. If it was all hosted in VS2005, damn, you
could have my first born too. ;)

 

</sycophant>

/2ob

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060420/1d26356f/attachment.html
From parrt at cs.usfca.edu  Thu Apr 20 17:27:42 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Apr 20 17:27:44 2006
Subject: [antlr-interest] antlr & antlr studio...
In-Reply-To: <20060420233811.430C3DCC21@www.antlr.org>
References: <20060420233811.430C3DCC21@www.antlr.org>
Message-ID: <E76C7BA0-69C0-4CD2-A1AA-21CBC5A82D57@cs.usfca.edu>

> I wait with baited breath for the Antlr V3 & Antlr studio combo, in  
> fact , the credit card?s already out. If it was all hosted in  
> VS2005, damn, you could have my first born too. ;)

Hi :)  Yep, ANTLRStudio is great!  For v3, you can also try out  
ANTLRWorks:

http://www.antlr.org/works

It has some interesting features.

Ter

From belayda at usfca.edu  Thu Apr 20 17:35:31 2006
From: belayda at usfca.edu (Bernardo Elayda)
Date: Thu Apr 20 17:35:35 2006
Subject: [antlr-interest] php grammar?
Message-ID: <243773d2438db8.2438db8243773d@usfca.edu>

Hello,

I was wondering if anyone had a php grammar that they would like to share?

I've started on a php translation project and I'm trying to avoid
re-inventing the wheel.

thx in advance!
-Bernardo

From prashant.deva at gmail.com  Fri Apr 21 01:51:10 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Fri Apr 21 01:51:15 2006
Subject: [antlr-interest] antlr & antlr studio...
In-Reply-To: <20060420233811.430C3DCC21@www.antlr.org>
References: <20060420233811.430C3DCC21@www.antlr.org>
Message-ID: <41fed8f80604210151u2fae1a01m94d0ce64b004872d@mail.gmail.com>

Thanks Robert,

Btw, my name is Prashant (not Phrashant) ;-)


--
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com


On 4/20/06, Robert Hill <rob.hill@blueyonder.co.uk> wrote:
>
>  Couldn't contain myself any longer?
>
>
>
> **Phrashant, Antlr Studio is awesome**
>
> As if Antlr 2.7.6 wasn't good enough, we get real time syntax diagramming
> and shed loads of other cool stuff.
>
>
>
> Ok, I admit, I don't really like the java environments, and being brought
> up on M$ ware, VS2005 kind of eclipses eclipse ;) but holy sh*t, if antlr
> studio doesn't make me want to write my parsers inside eclipse just to see
> those diagrams ;)
>
>
>
> In short, if you don't already have a copy of Antlr Studio, BUY ONE. If
> you're writing Antlr grammars, you must be a muppet if you don't already
> have a copy. (just like I **was** - lol!)
>
>
>
> Now all I want is it to do voice recognition for the immortal phrase
> "..right, I want this compiler to ?."
>
>
>
> I wait with baited breath for the Antlr V3 & Antlr studio combo, in fact ,
> the credit card's already out. If it was all hosted in VS2005, damn, you
> could have my first born too. ;)
>
>
>
> </sycophant>
>
> /2ob
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060421/3b879f57/attachment.html
From jimi at temporal-wave.com  Fri Apr 21 02:20:12 2006
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri Apr 21 02:24:33 2006
Subject: [antlr-interest] antlr & antlr studio...
References: <20060420233811.430C3DCC21@www.antlr.org>
Message-ID: <B36CCC332A32904F8FA3DE134A23533608A5A9@wavemachine.temporal-wave.com>

 

________________________________

From: antlr-interest-bounces@antlr.org on behalf of Robert Hill
Sent: Thu 4/20/2006 1:38 AM
To: antlr-interest@antlr.org
Subject: [antlr-interest] antlr & antlr studio...



> Now all I want is it to do voice recognition for the immortal phrase "..right, I want this compiler to ...." 

 

Well, what you do is get out your check book and ask someone to do the work for you ;-)

 

> I wait with baited breath for the Antlr V3 & Antlr studio combo, 

 

Have you looked at ANTLR Works yet? This combines the whole ANTLR3 and IDE package. It has a lot of the same things and is free. There may well be 

 

in fact , the credit card's already out. If it was all hosted in VS2005, damn, you could have my first born too. ;)

 

Once the C code gen for ATNLR3 is done (if ite ever is truley 'done') I intend to do this very thing for VS2005 and make it free as given that Ter made all the analysis code free, it does not seem right (to me) to chrage for a bit of GUI on the front of it. However I have more than enough kids of my own to feed!

 

Jim

From rhill03 at eds.com  Fri Apr 21 02:44:55 2006
From: rhill03 at eds.com (Hill, Robert)
Date: Fri Apr 21 02:44:10 2006
Subject: [antlr-interest] antlr & antlr studio...
Message-ID: <2E909902FD3A03419E3A905908AE3DD401D1F4F4@UKNSM201.emea.corp.eds.com>

Here's another quote for you Ter,

AntlrWorks - "OMG, I've just stained my trousers" 

LOL,
On a more serious note, I'd love to use AntlrWorks/AntlrV3, but I can't
really risk running into any problems , and at the moment I have to do
something pretty quickly (and in C#) so its antlr 2.7.6 & ST2.x for the
C# and the fact im reasonably confident with writing the whole thing in
2.7.6's syntax.
I do love the idea of V3's tree building, and in built string template
but TBH, I like the C# output, and I *am* biting at the bit to give it a
whirl.

Out of interest , how stable is V3?  Does it do everything it says on
the tin yet? :)

However when it hits VS2005, I'll almost certainly use your C codegen
since at least theres a modicum of interop between that and C#..hmm I
wonder if turning on the managed C++ for it would be an option in that
case?

Anyhow, I can't wait. There's at least a small donation of a few beers
in it for you mate.

Cheers,

Rob



--
Rob Hill
EDS - Hallamshire Business Park
F1E/087
Sheffield	
T:	+44 (0) 114 291 1928
M:	+44 (0) 791 732 1227
E:	rhill03@eds.com

 

>-----Original Message-----
>From: antlr-interest-bounces@antlr.org 
>[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Jim Idle
>Sent: 21 April 2006 10:20
>To: Robert Hill; antlr-interest@antlr.org
>Subject: RE: [antlr-interest] antlr & antlr studio...
>
> 
>
>________________________________
>
>From: antlr-interest-bounces@antlr.org on behalf of Robert Hill
>Sent: Thu 4/20/2006 1:38 AM
>To: antlr-interest@antlr.org
>Subject: [antlr-interest] antlr & antlr studio...
>
>
>
>> Now all I want is it to do voice recognition for the 
>immortal phrase "..right, I want this compiler to ...." 
>
> 
>
>Well, what you do is get out your check book and ask someone 
>to do the work for you ;-)
>
> 
>
>> I wait with baited breath for the Antlr V3 & Antlr studio combo,
>
> 
>
>Have you looked at ANTLR Works yet? This combines the whole 
>ANTLR3 and IDE package. It has a lot of the same things and is 
>free. There may well be 
>
> 
>
>in fact , the credit card's already out. If it was all hosted 
>in VS2005, damn, you could have my first born too. ;)
>
> 
>
>Once the C code gen for ATNLR3 is done (if ite ever is truley 
>'done') I intend to do this very thing for VS2005 and make it 
>free as given that Ter made all the analysis code free, it 
>does not seem right (to me) to chrage for a bit of GUI on the 
>front of it. However I have more than enough kids of my own to feed!
>
> 
>
>Jim
>
>
From Yassin.Chkouri at imag.fr  Fri Apr 21 09:17:32 2006
From: Yassin.Chkouri at imag.fr (Yassin.Chkouri@imag.fr)
Date: Fri Apr 21 09:17:38 2006
Subject: [antlr-interest] (no subject)
Message-ID: <1145636252.4449059cb2da7@webmail.imag.fr>



Hi,
 I am using ANTLR for parsing a language and build
 the corresponding EMF. Is it possible to directly generate
 the EMF from the semantic actions in ANTLR or is it necessary
 to use the intermediate AST generated by ANTLR ?
 
 Thanks,   

-------------------------------------------------
envoy? via Webmail/IMAG !

From prashant.deva at gmail.com  Fri Apr 21 10:57:50 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Fri Apr 21 10:57:53 2006
Subject: [antlr-interest] Tough non determinism problem
Message-ID: <41fed8f80604211057y6b75234w5d42d07d268a14d1@mail.gmail.com>

I have a non determinism problem in the following rule.

Increasing k does not seem to work.

Can anyone tell me how to solve this.





STR

: '\'' (~'\'')* '\''

| "\'O\'\'Hagan\'"



;





As you can see I am trying to lex a list of strings.

Its just that one string contains single quotes inside it which are not
escaped.

Since its just 1 string, I have hardcoded it into my program.



But I don't seem to figure out how to bypass the non determinism.



Could anyone help me with this?


--
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060421/365a7f4d/attachment.html
From parrt at cs.usfca.edu  Fri Apr 21 12:01:23 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Apr 21 12:01:28 2006
Subject: [antlr-interest] Draft of "A Functional Language for Generating
	Structured Text"
Message-ID: <55D93818-B4D2-4BC3-857E-343CC8CCDA23@cs.usfca.edu>

Howdy,

Finally finished a draft of ST paper, "A Functional Language for  
Generating Structured Text", for GPCE2006 conference in Portland this  
autumn.

http://www.cs.usfca.edu/~parrt/papers/ST.pdf

I have about a week to submit so, if you have comments, please send  
'em on in! :)

Ter
From lance at thinkingworks.com  Fri Apr 21 12:41:08 2006
From: lance at thinkingworks.com (Lance Gutteridge)
Date: Fri Apr 21 12:40:49 2006
Subject: [antlr-interest] newbie lookahead question
In-Reply-To: <3C751BDA-BE14-4215-860C-D8ED82953E67@martin-probst.com>
References: <444319CA.4020503@swin.edu.au>
	<3C751BDA-BE14-4215-860C-D8ED82953E67@martin-probst.com>
Message-ID: <44493554.2060102@thinkingworks.com>

Hi,
I'm a user of ANTLR but I'm nowhere close to being a real pro with it. 
I've just learnt what I had to implement my script language. So please 
excuse me if this is a dumb question.

I saw the question regarding lookahead and it is something I have been 
wrestling with as well.

I have a large number of keywords in my language.

For purpose of example here are five:

ON:         "on";
OF:          "of";
OFF:        "off";
OFFICE:  "office";
ACTIVATE:         "activate";
ACTIVATED:      "activated";

To disambiguate between ACTIVATE and ACTIVATED requires k = 9.

That seems inefficient although it works.

On the other hand Martin's solution of matching the leading part of the 
word and then using $setType seems difficult. If I want k=1, I would 
need to have a rule for any words that share a leading letter (e.g. ON 
and OF  and OFF and OFFICE).

To  handle the ON, OF, OFF, and OFFICE case in the manner Martin 
suggests would be a fairly complicated rule, because it has to say that 
the token is OF is it matches "OF" and then a whitespace, to disambiuate 
it from OFF and OFFICE. Then the same has to be done to decide between 
OFF and OFFICE. (BTW I would be grateful for an example of such a rule 
as I have had trouble constructing one that works for this kind of 
situation).

Is there no way to handle this in general, other than setting k to be as 
long as the longest prefix that two keywords have in common?  I would 
really like a technique that every time I add a new keyword I don't have 
to figure out all the ones it could conflct with and write some kind of 
long statement that descends through the letters and peels off ambiguities.


Thanks,
Lance



Martin Probst wrote:

> Hi,
>
> you can either increase your lookahead (which is not advisable in  
> this case), or rather do it manually:
>
> CALIBRATION_THINGY:
>   "CALIBRATION_" ( "METHOD" { $setType(CAL_METHOD);} |  "HANDLE" { 
> $setType(CAL_HANDLE);} );
>
> This parses the CALIBRATION_ part and then decides what kind of token  
> type this is later. You'll may want to add "CAL_METHOD" and  
> "CAL_HANDLE" to the tokens section of your grammar because they  
> aren't declared automatically if used like this - you can use that to  
> give them a proper help message later on.
>
> Martin
>
>
> Am 17.04.2006 um 06:30 schrieb Lucien Stals:
>
>> Hi,
>>
>> I've been learning ANTLR for about two weeks and want to be able to  
>> parse (then transform into XML) an input file in a specific markup  
>> language (ASAP2). I have not worked with parsers before and I feel  
>> like I'm in a little over my head. It's sink or swim time for me.
>>
>> I have some basic stuff working, but I'm getting lots of warnings  
>> about ambiguity.
>>
>> Part of a sample input file might look like:
>>
>> ...
>> /begin CALIBRATION_METHOD
>>     "Slewing"
>>     1
>>     /begin CALIBRATION_HANDLE
>>         0x1ffbf8
>>         0x400
>>         0
>>         AllSlews
>>     /end CALIBRATION_HANDLE
>> /end CALIBRATION_METHOD
>> ...
>>
>>
>> My question is about look ahead.
>> In my parser, I have rules like:
>>
>>
>> calibrationMethod:BEGIN CAL_METH
>>             (calibrationHandle)*
>>             END CAL_METH;
>>            
>> calibrationHandle:BEGIN CAL_HAND
>>             END CAL_HAND;
>>
>> Where my lexer rules are:
>>
>> protected
>> SLASH        :'/';
>>
>> BEGIN        :SLASH "begin";
>>
>> END        :SLASH "end";
>>
>> CAL_METH    :"CALIBRATION_METHOD";
>>
>> CAL_HAND    :"CALIBRATION_HANDLE";
>>
>>
>> (I'm just dealing with the tag structure first. Parsing the actual  
>> data is my next step. I have filter=true for now so I can ignore  
>> what I can't parse yet)
>>
>> And I'm getting ambiguity warnings. Should I set my lookahead to  
>> something silly like 13 just to look past "CALIBRATION_"? (I read  
>> that bigger lookaheads are performance killers) Or is there a  
>> smarter way to do this? Should I use predicates like:
>>
>> calibrationMethod:BEGIN CAL_METH {this.inCalMeth=true;}
>>             (calibrationHandle)*
>>             END CAL_METH {this.inCalMeth=false;};
>>            
>> calibrationHandle:{this.inCalMeth}?
>>         BEGIN CAL_HAND
>>         END CAL_HAND;
>>
>> Perhaps I'm completely off base. If it looks like I'm really  missing 
>> something, you might be right. Feel free to let me know.
>>
>> This is only one of the problems I'm having, but I'll just keep it  
>> to one question per post ;)
>>
>> BTW, if anyone is aware of a grammar that is similar which I can  get 
>> inspiration from, can you let me know?
>>
>> Thanks,
>>
>> Lucien.
>>
>
>
From mike.quilleash at azuresolutions.com  Fri Apr 21 13:07:41 2006
From: mike.quilleash at azuresolutions.com (Mike Quilleash)
Date: Fri Apr 21 13:07:49 2006
Subject: [antlr-interest] newbie lookahead question
Message-ID: <F1689FB09456E347A6E38343B99E680D018815E4@THHS2EXBE2X.hostedservice2.net>

Usually the way I handle keywords is to define them in the parser rather
than the lexer.

For example, a snippet from a lexer I'm building right now

ID: (LETTER | '_') (LETTER | DIGIT | '_')*;

// internal tokens only
protected
LETTER: 'a'..'z';

protected
DIGIT: '0'..'9';

Which recognises basic identifiers that may start with a letter or a _
followed by zero or more letters/digits/_

I also have the following options defined in my lexer..

Options
{
	caseSensitive = false;
	caseSensitiveLiterals = false;
	testLiterals = true;
}


Then in the parser use literal keywords

MyParseRule:
   "on"
 | "off"
 | "office"
 ;

And so on. The lexer will recognise full word tokens and pass them to
the parser which will then do the keyword matching for you.  No need for
elaborate look ahead rules. I believe that with the testLiterals set to
true literal strings in the parser are automatically added as token
types to the lexer and a literal lookup map is built.  The lexer will
then test each token it reads from the input stream against this literal
map and if it finds a matching entry return that token type instead of
ID.

HTH.

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Lance Gutteridge
Sent: 21 April 2006 20:41
Cc: antlr-interest@antlr.org
Subject: Re: [antlr-interest] newbie lookahead question

Hi,
I'm a user of ANTLR but I'm nowhere close to being a real pro with it. 
I've just learnt what I had to implement my script language. So please
excuse me if this is a dumb question.

I saw the question regarding lookahead and it is something I have been
wrestling with as well.

I have a large number of keywords in my language.

For purpose of example here are five:

ON:         "on";
OF:          "of";
OFF:        "off";
OFFICE:  "office";
ACTIVATE:         "activate";
ACTIVATED:      "activated";

To disambiguate between ACTIVATE and ACTIVATED requires k = 9.

That seems inefficient although it works.

On the other hand Martin's solution of matching the leading part of the
word and then using $setType seems difficult. If I want k=1, I would
need to have a rule for any words that share a leading letter (e.g. ON
and OF  and OFF and OFFICE).

To  handle the ON, OF, OFF, and OFFICE case in the manner Martin
suggests would be a fairly complicated rule, because it has to say that
the token is OF is it matches "OF" and then a whitespace, to disambiuate
it from OFF and OFFICE. Then the same has to be done to decide between
OFF and OFFICE. (BTW I would be grateful for an example of such a rule
as I have had trouble constructing one that works for this kind of
situation).

Is there no way to handle this in general, other than setting k to be as
long as the longest prefix that two keywords have in common?  I would
really like a technique that every time I add a new keyword I don't have
to figure out all the ones it could conflct with and write some kind of
long statement that descends through the letters and peels off
ambiguities.


Thanks,
Lance



Martin Probst wrote:

> Hi,
>
> you can either increase your lookahead (which is not advisable in this

> case), or rather do it manually:
>
> CALIBRATION_THINGY:
>   "CALIBRATION_" ( "METHOD" { $setType(CAL_METHOD);} |  "HANDLE" { 
> $setType(CAL_HANDLE);} );
>
> This parses the CALIBRATION_ part and then decides what kind of token 
> type this is later. You'll may want to add "CAL_METHOD" and 
> "CAL_HANDLE" to the tokens section of your grammar because they aren't

> declared automatically if used like this - you can use that to give 
> them a proper help message later on.
>
> Martin
>
>
> Am 17.04.2006 um 06:30 schrieb Lucien Stals:
>
>> Hi,
>>
>> I've been learning ANTLR for about two weeks and want to be able to 
>> parse (then transform into XML) an input file in a specific markup 
>> language (ASAP2). I have not worked with parsers before and I feel 
>> like I'm in a little over my head. It's sink or swim time for me.
>>
>> I have some basic stuff working, but I'm getting lots of warnings 
>> about ambiguity.
>>
>> Part of a sample input file might look like:
>>
>> ...
>> /begin CALIBRATION_METHOD
>>     "Slewing"
>>     1
>>     /begin CALIBRATION_HANDLE
>>         0x1ffbf8
>>         0x400
>>         0
>>         AllSlews
>>     /end CALIBRATION_HANDLE
>> /end CALIBRATION_METHOD
>> ...
>>
>>
>> My question is about look ahead.
>> In my parser, I have rules like:
>>
>>
>> calibrationMethod:BEGIN CAL_METH
>>             (calibrationHandle)*
>>             END CAL_METH;
>>            
>> calibrationHandle:BEGIN CAL_HAND
>>             END CAL_HAND;
>>
>> Where my lexer rules are:
>>
>> protected
>> SLASH        :'/';
>>
>> BEGIN        :SLASH "begin";
>>
>> END        :SLASH "end";
>>
>> CAL_METH    :"CALIBRATION_METHOD";
>>
>> CAL_HAND    :"CALIBRATION_HANDLE";
>>
>>
>> (I'm just dealing with the tag structure first. Parsing the actual 
>> data is my next step. I have filter=true for now so I can ignore what

>> I can't parse yet)
>>
>> And I'm getting ambiguity warnings. Should I set my lookahead to 
>> something silly like 13 just to look past "CALIBRATION_"? (I read 
>> that bigger lookaheads are performance killers) Or is there a smarter

>> way to do this? Should I use predicates like:
>>
>> calibrationMethod:BEGIN CAL_METH {this.inCalMeth=true;}
>>             (calibrationHandle)*
>>             END CAL_METH {this.inCalMeth=false;};
>>            
>> calibrationHandle:{this.inCalMeth}?
>>         BEGIN CAL_HAND
>>         END CAL_HAND;
>>
>> Perhaps I'm completely off base. If it looks like I'm really  missing

>> something, you might be right. Feel free to let me know.
>>
>> This is only one of the problems I'm having, but I'll just keep it to

>> one question per post ;)
>>
>> BTW, if anyone is aware of a grammar that is similar which I can  get

>> inspiration from, can you let me know?
>>
>> Thanks,
>>
>> Lucien.
>>
>
>
From Kurt at AlphaSoftware.com  Fri Apr 21 13:07:36 2006
From: Kurt at AlphaSoftware.com (Kurt Rayner)
Date: Fri Apr 21 13:08:57 2006
Subject: [antlr-interest] Generating XML from the parse tree in C++
In-Reply-To: <41fed8f80604211057y6b75234w5d42d07d268a14d1@mail.gmail.com>
Message-ID: <!&!AAAAAAAAAAAYAAAAAAAAAAFrvD8k4y1BvmbeLFcYHNLCgAAAEAAAAPMOTU1ZGH5GhiEJmSwsa3kBAAAAAA==@AlphaSoftware.com>

In generating and reconstructing XML from the parse tree using the C++
runtime, I ran into problems and made the following changes to my local copy
(see bolded source below).
 
Seems like this could be simplified, but it works.  Very handy feature!
 
The following is the section of BaseAST.cpp that I changed.  Specific
changes are in bold.
 
#ifdef ANTLR_SUPPORT_XML
/* This whole XML output stuff needs a little bit more thought
 * I'd like to store extra XML data in the node. e.g. for custom ast's
 * with for instance symboltable references. This
 * should be more pluggable..
 * @returns boolean value indicating wether a closetag should be produced.
 */
bool BaseAST::attributesToStream( ANTLR_USE_NAMESPACE(std)ostream& out )
const
{
       out << "text=\"" << this->getText()
              << "\" type=\"" << this->getType() << "\"";
 
       return true;
}
 
void BaseAST::toStream( ANTLR_USE_NAMESPACE(std)ostream& out ) const
{
       for( RefAST node = this; node != 0; node = node->getNextSibling() )
       {
              out << "<" << this->typeName() << " ";
 
              // Write out attributes and if there is extra data...
              bool need_close_tag = node->attributesToStream( out );
              out <<  ">" << endl;
 
              // got children so write them...
              if( node->getFirstChild() != 0 )
                     node->getFirstChild()->toStream( out );
              if( need_close_tag ) // This condition seems like it should
always be true
              {
 
                     // and a closing tag..
                     out << "</" << node->typeName() << ">" << endl;
              }
       }
}
#endif
 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060421/fda3d8b8/attachment-0001.html
From hbuch06 at hotmail.com  Fri Apr 21 13:13:24 2006
From: hbuch06 at hotmail.com (Hitakshi Buch)
Date: Fri Apr 21 13:13:29 2006
Subject: [antlr-interest] How to read input from a file?
Message-ID: <BAY101-W350FEF4EEA8A607990044BDBB0@phx.gbl>

I want to read a series for strings from a file and parse them.  My program only parses the first line in the input file though.  How can I have it parse the whole file?
 
My input file contents:
 
'Hello''ORACLE.dbs''Jackie''s raincoat''09-MAR-98'
 
I'm trying to read all strings that begin and end with a quote (').  So, my output should consist of the following:
Hello
ORACLE.dbs
Jackie's raincoat
09-MAR-98
 
INSTEAD, I only get the following:
Hello
 
My Main file looks like the following:
 
import java.io.*;
class Main {    public static void main(String[] args) {        try {            L lexer = new L(new FileInputStream("input2.inp"));            P parser = new P(lexer);            parser.setFilename("input2.inp");            parser.startRule();        } catch(Exception e) {            System.err.println("exception: "+e);        }    }
 
My .g file looks like:
 
class P extends Parser;
startRule
 : n:DEFAULT_QUOTE        {System.out.println("Matched default quote with: "+n.getText());}    ;
class L extends Lexer;
options { k=2;}
// one-or-more letters followed by a newlineDEFAULT_QUOTE:   ( '\''!                    (~('\'') )+                    '\''! )    ;
protectedLINETERMINATOR    :   '\r' '\n'   // DOS    |   '\n'        // UNIX    ;    WHITESPACE : LINETERMINATOR  |  ' ' | '\t' | '\f' ;}
 
Any help will be greatly appreciated.  Thank you.
_________________________________________________________________
It?s the future of Hotmail: Try Windows Live Mail beta
http://www2.imagine-msn.com/minisites/mail/Default.aspx?locale=en-us
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060421/ab5ae0a3/attachment.html
From mike.quilleash at azuresolutions.com  Fri Apr 21 13:18:35 2006
From: mike.quilleash at azuresolutions.com (Mike Quilleash)
Date: Fri Apr 21 13:18:41 2006
Subject: [antlr-interest] How to read input from a file?
Message-ID: <F1689FB09456E347A6E38343B99E680D018815EF@THHS2EXBE2X.hostedservice2.net>

Your startRule doesn't define any sort of one-or-more or zero-or-more
construct so it will only parse the first line in the file then stop.
You need a (...)* or (...)+ wrapper in your startRule.

________________________________

From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Hitakshi Buch
Sent: 21 April 2006 21:13
To: antlr-interest@antlr.org
Subject: [antlr-interest] How to read input from a file?



I want to read a series for strings from a file and parse them.  My
program only parses the first line in the input file though.  How can I
have it parse the whole file?

 

My input file contents:

 

'Hello'
'ORACLE.dbs'
'Jackie''s raincoat'
'09-MAR-98'

 

I'm trying to read all strings that begin and end with a quote (').  So,
my output should consist of the following:

Hello

ORACLE.dbs

Jackie's raincoat

09-MAR-98

 

INSTEAD, I only get the following:

Hello

 

My Main file looks like the following:

 

import java.io.*;

class Main {
    public static void main(String[] args) {
        try {
            L lexer = new L(new FileInputStream("input2.inp"));
            P parser = new P(lexer);
            parser.setFilename("input2.inp");
            parser.startRule();
        } catch(Exception e) {
            System.err.println("exception: "+e);
        }
    }

 

My .g file looks like:

 

class P extends Parser;

startRule

 : n:DEFAULT_QUOTE
        {System.out.println("Matched default quote with:
"+n.getText());}
    ;

class L extends Lexer;

options {
 k=2;
}

// one-or-more letters followed by a newline
DEFAULT_QUOTE:   ( '\''! 
                   (~('\'') )+ 
                   '\''! )
    ;

protected
LINETERMINATOR
    :   '\r' '\n'   // DOS
    |   '\n'        // UNIX
    ;
    
WHITESPACE
 : LINETERMINATOR 
 |  ' '
 | '\t'
 | '\f'
 ;
}

 

Any help will be greatly appreciated.  Thank you.


________________________________

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060421/959abc41/attachment.html
From hbuch06 at hotmail.com  Fri Apr 21 13:45:20 2006
From: hbuch06 at hotmail.com (Hitakshi Buch)
Date: Fri Apr 21 13:45:22 2006
Subject: [antlr-interest] How to read input from a file?
Message-ID: <BAY101-W15E7F9A5E545DD79914ADBDBB0@phx.gbl>

I tried the following start rule, but it still does not work:
 
startRule
 : (n:DEFAULT_QUOTE        {System.out.println("Matched default quote with " + n.getText());})+    ;I tried both + and *.  Am I doing it in the wrong place?
 
Thanks again for your help.


Subject: RE: [antlr-interest] How to read input from a file?Date: Fri, 21 Apr 2006 21:18:35 +0100From: mike.quilleash@azuresolutions.comTo: hbuch06@hotmail.com; antlr-interest@antlr.org



Your startRule doesn't define any sort of one-or-more or zero-or-more construct so it will only parse the first line in the file then stop.  You need a (...)* or (...)+ wrapper in your startRule.


From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Hitakshi BuchSent: 21 April 2006 21:13To: antlr-interest@antlr.orgSubject: [antlr-interest] How to read input from a file?

I want to read a series for strings from a file and parse them.  My program only parses the first line in the input file though.  How can I have it parse the whole file?
 
My input file contents:
 
'Hello''ORACLE.dbs''Jackie''s raincoat''09-MAR-98'
 
I'm trying to read all strings that begin and end with a quote (').  So, my output should consist of the following:
Hello
ORACLE.dbs
Jackie's raincoat
09-MAR-98
 
INSTEAD, I only get the following:
Hello
 
My Main file looks like the following:
 
import java.io.*;
class Main {    public static void main(String[] args) {        try {            L lexer = new L(new FileInputStream("input2.inp"));            P parser = new P(lexer);            parser.setFilename("input2.inp");            parser.startRule();        } catch(Exception e) {            System.err.println("exception: "+e);        }    }
 
My .g file looks like:
 
class P extends Parser;
startRule
 : n:DEFAULT_QUOTE        {System.out.println("Matched default quote with: "+n.getText());}    ;
class L extends Lexer;
options { k=2;}
// one-or-more letters followed by a newlineDEFAULT_QUOTE:   ( '\''!                    (~('\'') )+                    '\''! )    ;
protectedLINETERMINATOR    :   '\r' '\n'   // DOS    |   '\n'        // UNIX    ;    WHITESPACE : LINETERMINATOR  |  ' ' | '\t' | '\f' ;}
 
Any help will be greatly appreciated.  Thank you.


_________________________________________________________________
Search on the go: Try Windows Live(tm) Search for Mobile beta
http://www1.imagine-msn.com/minisites/mobile/Default.aspx?locale=en-us
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060421/a6d2da1a/attachment.html
From mike.quilleash at azuresolutions.com  Fri Apr 21 14:35:05 2006
From: mike.quilleash at azuresolutions.com (Mike Quilleash)
Date: Fri Apr 21 14:35:10 2006
Subject: [antlr-interest] How to read input from a file?
Message-ID: <F1689FB09456E347A6E38343B99E680D01881622@THHS2EXBE2X.hostedservice2.net>

I think the lexer you have configured is considering whitespace to be a
"real" token to be parsed.  I'm guessing you just want to skip these,
but at the moment because they are not included in the parser it reads
one DEFAULT_QUOTE rule and then finds a whitespace token and gives up.
 
First thing is put EOF token at the end of your start rule.  This will
assert that there is nothing between the end of file and what was
correctly parsed.  By default ANTLR will complete parsing and then just
discard anything up to the end of file so you have to explicitly define
the EOF token at the end of your start rule to make sure nothing has
been missed.
 
Here's a typical whitespace lexer rule..
 
WS: ( ' '
    | '\t'
    | '\r' ( '\n' )? { newline(); }
    | '\n' { newline(); }
    ) { $setType( Token.SKIP ); }
  ;

The most important type is 
 
$setType( Token.SKIP );
 
which says, "When this rule matches I want the token to be discarded".
As in it won't get passed to the parser at all, just thrown away.  If
you want the LINETERMINATOR token to be parsed correctly rather than
just thrown away then include it in your parser rules after the
DEFAULT_QUOTE but inside the (...)+

________________________________

From: Hitakshi Buch [mailto:hbuch06@hotmail.com] 
Sent: 21 April 2006 21:45
To: Mike Quilleash; antlr-interest@antlr.org
Subject: RE: [antlr-interest] How to read input from a file?



I tried the following start rule, but it still does not work:

 

startRule

 : (n:DEFAULT_QUOTE
        {System.out.println("Matched default quote with " +
n.getText());})+
    ;

I tried both + and *.  Am I doing it in the wrong place?

 

Thanks again for your help.

________________________________

	Subject: RE: [antlr-interest] How to read input from a file?
	Date: Fri, 21 Apr 2006 21:18:35 +0100
	From: mike.quilleash@azuresolutions.com
	To: hbuch06@hotmail.com; antlr-interest@antlr.org
	
	
	Your startRule doesn't define any sort of one-or-more or
zero-or-more construct so it will only parse the first line in the file
then stop.  You need a (...)* or (...)+ wrapper in your startRule.

________________________________

	From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Hitakshi Buch
	Sent: 21 April 2006 21:13
	To: antlr-interest@antlr.org
	Subject: [antlr-interest] How to read input from a file?
	
	

	I want to read a series for strings from a file and parse them.
My program only parses the first line in the input file though.  How can
I have it parse the whole file?

	 

	My input file contents:

	 

	'Hello'
	'ORACLE.dbs'
	'Jackie''s raincoat'
	'09-MAR-98'

	 

	I'm trying to read all strings that begin and end with a quote
(').  So, my output should consist of the following:

	Hello

	ORACLE.dbs

	Jackie's raincoat

	09-MAR-98

	 

	INSTEAD, I only get the following:

	Hello

	 

	My Main file looks like the following:

	 

	import java.io.*;

	class Main {
	    public static void main(String[] args) {
	        try {
	            L lexer = new L(new FileInputStream("input2.inp"));
	            P parser = new P(lexer);
	            parser.setFilename("input2.inp");
	            parser.startRule();
	        } catch(Exception e) {
	            System.err.println("exception: "+e);
	        }
	    }

	 

	My .g file looks like:

	 

	class P extends Parser;

	startRule

	 : n:DEFAULT_QUOTE
	        {System.out.println("Matched default quote with:
"+n.getText());}
	    ;

	class L extends Lexer;

	options {
	 k=2;
	}

	// one-or-more letters followed by a newline
	DEFAULT_QUOTE:   ( '\''! 
	                   (~('\'') )+ 
	                   '\''! )
	    ;

	protected
	LINETERMINATOR
	    :   '\r' '\n'   // DOS
	    |   '\n'        // UNIX
	    ;
	    
	WHITESPACE
	 : LINETERMINATOR 
	 |  ' '
	 | '\t'
	 | '\f'
	 ;
	}

	 

	Any help will be greatly appreciated.  Thank you.


________________________________

	<http:///> 


________________________________

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060421/e03bf5a6/attachment-0001.html
From swapnil.kashikar at gmail.com  Fri Apr 21 15:18:28 2006
From: swapnil.kashikar at gmail.com (Swapnil Kashikar)
Date: Fri Apr 21 15:18:31 2006
Subject: [antlr-interest] StringTemplate: Infinite Recursion in anonymous
	conditional template.
Message-ID: <b38f063f0604211518r4236b2c2qd4ef5a554385cb10@mail.gmail.com>

Hi,

I am parsing PL/SQL code using antlr and transforming it using
 StringTemplate 2.3b6 .
 Could someone please help me with fixing the error below (Obtained with the
*setLintMode* output from stringtemplate):
------------
exception: java.lang.IllegalStateException: infinite recursion to
<anonymous([s])@9> referenced in <plsql_block([type_declaration, functions,
procedures, code, exception_handlers, into_clause, pb])@104>; stack trace:
<anonymous([s])@9>, references=[s, s, LPAREN]>
<plsql_block([type_declaration, functions, procedures, code,
exception_handlers, into_clause, pb])@104>,
attributes=[code=<statement()@105>, pb], references=[LPAREN,
type_declaration, functions, procedures, code]>
<else_subtemplate([])@138>, references=[s, LPAREN]>
<anonymous([s])@9> (start of recursive cycle)
...
------------

 The problem occurs while generating code using toString() when the input
code has nested plsql blocks like these:
---------
declare
v1 integer;
begin
   declare
      v2 char;
    begin
       select * from names;
    end;
end;
---------

Note : Without nested plsql blocks, it works fine. For ex this is OK:
 ---------
declare
v1 integer;
begin
       select * from names;
end;
---------


The *statement* production rule I am using is:
statement [StringTemplate parentST] returns [StringTemplate
code=template("statement")]
{
    StringTemplate s=null;


}


:
( ("SELECT") =>s=select_statement[code]
  | s=expression [code]
  |("DECLARE" || "BEGIN") => s=*plsql_block*[code]
  | SEMI
  | DIVIDE
  ) (SEMI)?
{
    code.setAttribute("code",s);
}


;

The templates  I use for output generation are *start, statement* and *
'plsql_block'* :
start(statements) ::= <<
 *<statements:{s|<if (s.sql)> This is a SQL statement: <s.code> <else>
This is a PLSQLBlock: <s.code>
<endif> }; separator="\n\n">*
>>
statement(code,sql) ::= <<
<code>
>>

plsql_block(type_declaration, functions, procedures, code,
exception_handlers) ::=
<<
{
<type_declaration;separator="\n">
<functions>
<procedures>

*<code:{s|<if (s.sql)> This is a SQL statement: <s.code> <else>
This is a PLSQLBlock: <s.code>
<endif> }; separator="\n\n">*

<exception_handlers>


}
>>

Thanks,
Swapnil
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060421/5b055dcf/attachment.html
From lance at thinkingworks.com  Fri Apr 21 17:29:10 2006
From: lance at thinkingworks.com (Lance Gutteridge)
Date: Fri Apr 21 17:29:04 2006
Subject: [antlr-interest] newbie lookahead question
In-Reply-To: <F1689FB09456E347A6E38343B99E680D018815E4@THHS2EXBE2X.hostedservice2.net>
References: <F1689FB09456E347A6E38343B99E680D018815E4@THHS2EXBE2X.hostedservice2.net>
Message-ID: <444978D6.9090606@thinkingworks.com>

Thanks for the help. It got me going.

The issue with defining the literals in the parser is that ANTLR then 
sets up the token type constants as prefixed by LITERAL_
e.g.LITERAL_office
Nothing wrong with this but I wanted the token to be OFFICE.


I found the solution to my problem by putting a tokens section in the lexer.

tokens {
     OF = "of";
     OFF= "off";
     OFFICE= "office";
}

This allows you to set k=1 with no problem.

This seems to solve my problem. Would this work for the orignal question 
regarding CALIBRATION_METHOD etc.?


Lance

Mike Quilleash wrote:

>Usually the way I handle keywords is to define them in the parser rather
>than the lexer.
>
>For example, a snippet from a lexer I'm building right now
>
>ID: (LETTER | '_') (LETTER | DIGIT | '_')*;
>
>// internal tokens only
>protected
>LETTER: 'a'..'z';
>
>protected
>DIGIT: '0'..'9';
>
>Which recognises basic identifiers that may start with a letter or a _
>followed by zero or more letters/digits/_
>
>I also have the following options defined in my lexer..
>
>Options
>{
>	caseSensitive = false;
>	caseSensitiveLiterals = false;
>	testLiterals = true;
>}
>
>
>Then in the parser use literal keywords
>
>MyParseRule:
>   "on"
> | "off"
> | "office"
> ;
>
>And so on. The lexer will recognise full word tokens and pass them to
>the parser which will then do the keyword matching for you.  No need for
>elaborate look ahead rules. I believe that with the testLiterals set to
>true literal strings in the parser are automatically added as token
>types to the lexer and a literal lookup map is built.  The lexer will
>then test each token it reads from the input stream against this literal
>map and if it finds a matching entry return that token type instead of
>ID.
>
>HTH.
>
>-----Original Message-----
>From: antlr-interest-bounces@antlr.org
>[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Lance Gutteridge
>Sent: 21 April 2006 20:41
>Cc: antlr-interest@antlr.org
>Subject: Re: [antlr-interest] newbie lookahead question
>
>Hi,
>I'm a user of ANTLR but I'm nowhere close to being a real pro with it. 
>I've just learnt what I had to implement my script language. So please
>excuse me if this is a dumb question.
>
>I saw the question regarding lookahead and it is something I have been
>wrestling with as well.
>
>I have a large number of keywords in my language.
>
>For purpose of example here are five:
>
>ON:         "on";
>OF:          "of";
>OFF:        "off";
>OFFICE:  "office";
>ACTIVATE:         "activate";
>ACTIVATED:      "activated";
>
>To disambiguate between ACTIVATE and ACTIVATED requires k = 9.
>
>That seems inefficient although it works.
>
>On the other hand Martin's solution of matching the leading part of the
>word and then using $setType seems difficult. If I want k=1, I would
>need to have a rule for any words that share a leading letter (e.g. ON
>and OF  and OFF and OFFICE).
>
>To  handle the ON, OF, OFF, and OFFICE case in the manner Martin
>suggests would be a fairly complicated rule, because it has to say that
>the token is OF is it matches "OF" and then a whitespace, to disambiuate
>it from OFF and OFFICE. Then the same has to be done to decide between
>OFF and OFFICE. (BTW I would be grateful for an example of such a rule
>as I have had trouble constructing one that works for this kind of
>situation).
>
>Is there no way to handle this in general, other than setting k to be as
>long as the longest prefix that two keywords have in common?  I would
>really like a technique that every time I add a new keyword I don't have
>to figure out all the ones it could conflct with and write some kind of
>long statement that descends through the letters and peels off
>ambiguities.
>
>
>Thanks,
>Lance
>
>
>
>Martin Probst wrote:
>
>  
>
>>Hi,
>>
>>you can either increase your lookahead (which is not advisable in this
>>    
>>
>
>  
>
>>case), or rather do it manually:
>>
>>CALIBRATION_THINGY:
>>  "CALIBRATION_" ( "METHOD" { $setType(CAL_METHOD);} |  "HANDLE" { 
>>$setType(CAL_HANDLE);} );
>>
>>This parses the CALIBRATION_ part and then decides what kind of token 
>>type this is later. You'll may want to add "CAL_METHOD" and 
>>"CAL_HANDLE" to the tokens section of your grammar because they aren't
>>    
>>
>
>  
>
>>declared automatically if used like this - you can use that to give 
>>them a proper help message later on.
>>
>>Martin
>>
>>
>>Am 17.04.2006 um 06:30 schrieb Lucien Stals:
>>
>>    
>>
>>>Hi,
>>>
>>>I've been learning ANTLR for about two weeks and want to be able to 
>>>parse (then transform into XML) an input file in a specific markup 
>>>language (ASAP2). I have not worked with parsers before and I feel 
>>>like I'm in a little over my head. It's sink or swim time for me.
>>>
>>>I have some basic stuff working, but I'm getting lots of warnings 
>>>about ambiguity.
>>>
>>>Part of a sample input file might look like:
>>>
>>>...
>>>/begin CALIBRATION_METHOD
>>>    "Slewing"
>>>    1
>>>    /begin CALIBRATION_HANDLE
>>>        0x1ffbf8
>>>        0x400
>>>        0
>>>        AllSlews
>>>    /end CALIBRATION_HANDLE
>>>/end CALIBRATION_METHOD
>>>...
>>>
>>>
>>>My question is about look ahead.
>>>In my parser, I have rules like:
>>>
>>>
>>>calibrationMethod:BEGIN CAL_METH
>>>            (calibrationHandle)*
>>>            END CAL_METH;
>>>           
>>>calibrationHandle:BEGIN CAL_HAND
>>>            END CAL_HAND;
>>>
>>>Where my lexer rules are:
>>>
>>>protected
>>>SLASH        :'/';
>>>
>>>BEGIN        :SLASH "begin";
>>>
>>>END        :SLASH "end";
>>>
>>>CAL_METH    :"CALIBRATION_METHOD";
>>>
>>>CAL_HAND    :"CALIBRATION_HANDLE";
>>>
>>>
>>>(I'm just dealing with the tag structure first. Parsing the actual 
>>>data is my next step. I have filter=true for now so I can ignore what
>>>      
>>>
>
>  
>
>>>I can't parse yet)
>>>
>>>And I'm getting ambiguity warnings. Should I set my lookahead to 
>>>something silly like 13 just to look past "CALIBRATION_"? (I read 
>>>that bigger lookaheads are performance killers) Or is there a smarter
>>>      
>>>
>
>  
>
>>>way to do this? Should I use predicates like:
>>>
>>>calibrationMethod:BEGIN CAL_METH {this.inCalMeth=true;}
>>>            (calibrationHandle)*
>>>            END CAL_METH {this.inCalMeth=false;};
>>>           
>>>calibrationHandle:{this.inCalMeth}?
>>>        BEGIN CAL_HAND
>>>        END CAL_HAND;
>>>
>>>Perhaps I'm completely off base. If it looks like I'm really  missing
>>>      
>>>
>
>  
>
>>>something, you might be right. Feel free to let me know.
>>>
>>>This is only one of the problems I'm having, but I'll just keep it to
>>>      
>>>
>
>  
>
>>>one question per post ;)
>>>
>>>BTW, if anyone is aware of a grammar that is similar which I can  get
>>>      
>>>
>
>  
>
>>>inspiration from, can you let me know?
>>>
>>>Thanks,
>>>
>>>Lucien.
>>>
>>>      
>>>
>>    
>>
>
>  
>
From lance at thinkingworks.com  Fri Apr 21 18:04:39 2006
From: lance at thinkingworks.com (Lance Gutteridge)
Date: Fri Apr 21 18:04:35 2006
Subject: [antlr-interest] newbie lookahead question
In-Reply-To: <444978D6.9090606@thinkingworks.com>
References: <F1689FB09456E347A6E38343B99E680D018815E4@THHS2EXBE2X.hostedservice2.net>
	<444978D6.9090606@thinkingworks.com>
Message-ID: <44498127.50109@thinkingworks.com>

Well maybe not. It seems I was wrong about the tokens section. It 
doesn't specify lexer rules so the tokens aren't detected and put into 
the token stream for the parser. Ah well. It seemed like a good idea at 
the time.

Lance

Lance Gutteridge wrote:

> Thanks for the help. It got me going.
>
> The issue with defining the literals in the parser is that ANTLR then 
> sets up the token type constants as prefixed by LITERAL_
> e.g.LITERAL_office
> Nothing wrong with this but I wanted the token to be OFFICE.
>
>
> I found the solution to my problem by putting a tokens section in the 
> lexer.
>
> tokens {
>     OF = "of";
>     OFF= "off";
>     OFFICE= "office";
> }
>
> This allows you to set k=1 with no problem.
>
> This seems to solve my problem. Would this work for the orignal 
> question regarding CALIBRATION_METHOD etc.?
>
>
> Lance
>
> Mike Quilleash wrote:
>
>> Usually the way I handle keywords is to define them in the parser rather
>> than the lexer.
>>
>> For example, a snippet from a lexer I'm building right now
>>
>> ID: (LETTER | '_') (LETTER | DIGIT | '_')*;
>>
>> // internal tokens only
>> protected
>> LETTER: 'a'..'z';
>>
>> protected
>> DIGIT: '0'..'9';
>>
>> Which recognises basic identifiers that may start with a letter or a _
>> followed by zero or more letters/digits/_
>>
>> I also have the following options defined in my lexer..
>>
>> Options
>> {
>>     caseSensitive = false;
>>     caseSensitiveLiterals = false;
>>     testLiterals = true;
>> }
>>
>>
>> Then in the parser use literal keywords
>>
>> MyParseRule:
>>   "on"
>> | "off"
>> | "office"
>> ;
>>
>> And so on. The lexer will recognise full word tokens and pass them to
>> the parser which will then do the keyword matching for you.  No need for
>> elaborate look ahead rules. I believe that with the testLiterals set to
>> true literal strings in the parser are automatically added as token
>> types to the lexer and a literal lookup map is built.  The lexer will
>> then test each token it reads from the input stream against this literal
>> map and if it finds a matching entry return that token type instead of
>> ID.
>>
>> HTH.
>>
>> -----Original Message-----
>> From: antlr-interest-bounces@antlr.org
>> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Lance Gutteridge
>> Sent: 21 April 2006 20:41
>> Cc: antlr-interest@antlr.org
>> Subject: Re: [antlr-interest] newbie lookahead question
>>
>> Hi,
>> I'm a user of ANTLR but I'm nowhere close to being a real pro with 
>> it. I've just learnt what I had to implement my script language. So 
>> please
>> excuse me if this is a dumb question.
>>
>> I saw the question regarding lookahead and it is something I have been
>> wrestling with as well.
>>
>> I have a large number of keywords in my language.
>>
>> For purpose of example here are five:
>>
>> ON:         "on";
>> OF:          "of";
>> OFF:        "off";
>> OFFICE:  "office";
>> ACTIVATE:         "activate";
>> ACTIVATED:      "activated";
>>
>> To disambiguate between ACTIVATE and ACTIVATED requires k = 9.
>>
>> That seems inefficient although it works.
>>
>> On the other hand Martin's solution of matching the leading part of the
>> word and then using $setType seems difficult. If I want k=1, I would
>> need to have a rule for any words that share a leading letter (e.g. ON
>> and OF  and OFF and OFFICE).
>>
>> To  handle the ON, OF, OFF, and OFFICE case in the manner Martin
>> suggests would be a fairly complicated rule, because it has to say that
>> the token is OF is it matches "OF" and then a whitespace, to disambiuate
>> it from OFF and OFFICE. Then the same has to be done to decide between
>> OFF and OFFICE. (BTW I would be grateful for an example of such a rule
>> as I have had trouble constructing one that works for this kind of
>> situation).
>>
>> Is there no way to handle this in general, other than setting k to be as
>> long as the longest prefix that two keywords have in common?  I would
>> really like a technique that every time I add a new keyword I don't have
>> to figure out all the ones it could conflct with and write some kind of
>> long statement that descends through the letters and peels off
>> ambiguities.
>>
>>
>> Thanks,
>> Lance
>>
>>
>>
>> Martin Probst wrote:
>>
>>  
>>
>>> Hi,
>>>
>>> you can either increase your lookahead (which is not advisable in this
>>>   
>>
>>
>>  
>>
>>> case), or rather do it manually:
>>>
>>> CALIBRATION_THINGY:
>>>  "CALIBRATION_" ( "METHOD" { $setType(CAL_METHOD);} |  "HANDLE" { 
>>> $setType(CAL_HANDLE);} );
>>>
>>> This parses the CALIBRATION_ part and then decides what kind of 
>>> token type this is later. You'll may want to add "CAL_METHOD" and 
>>> "CAL_HANDLE" to the tokens section of your grammar because they aren't
>>>   
>>
>>
>>  
>>
>>> declared automatically if used like this - you can use that to give 
>>> them a proper help message later on.
>>>
>>> Martin
>>>
>>>
>>> Am 17.04.2006 um 06:30 schrieb Lucien Stals:
>>>
>>>   
>>>
>>>> Hi,
>>>>
>>>> I've been learning ANTLR for about two weeks and want to be able to 
>>>> parse (then transform into XML) an input file in a specific markup 
>>>> language (ASAP2). I have not worked with parsers before and I feel 
>>>> like I'm in a little over my head. It's sink or swim time for me.
>>>>
>>>> I have some basic stuff working, but I'm getting lots of warnings 
>>>> about ambiguity.
>>>>
>>>> Part of a sample input file might look like:
>>>>
>>>> ...
>>>> /begin CALIBRATION_METHOD
>>>>    "Slewing"
>>>>    1
>>>>    /begin CALIBRATION_HANDLE
>>>>        0x1ffbf8
>>>>        0x400
>>>>        0
>>>>        AllSlews
>>>>    /end CALIBRATION_HANDLE
>>>> /end CALIBRATION_METHOD
>>>> ...
>>>>
>>>>
>>>> My question is about look ahead.
>>>> In my parser, I have rules like:
>>>>
>>>>
>>>> calibrationMethod:BEGIN CAL_METH
>>>>            (calibrationHandle)*
>>>>            END CAL_METH;
>>>>           calibrationHandle:BEGIN CAL_HAND
>>>>            END CAL_HAND;
>>>>
>>>> Where my lexer rules are:
>>>>
>>>> protected
>>>> SLASH        :'/';
>>>>
>>>> BEGIN        :SLASH "begin";
>>>>
>>>> END        :SLASH "end";
>>>>
>>>> CAL_METH    :"CALIBRATION_METHOD";
>>>>
>>>> CAL_HAND    :"CALIBRATION_HANDLE";
>>>>
>>>>
>>>> (I'm just dealing with the tag structure first. Parsing the actual 
>>>> data is my next step. I have filter=true for now so I can ignore what
>>>>     
>>>
>>
>>  
>>
>>>> I can't parse yet)
>>>>
>>>> And I'm getting ambiguity warnings. Should I set my lookahead to 
>>>> something silly like 13 just to look past "CALIBRATION_"? (I read 
>>>> that bigger lookaheads are performance killers) Or is there a smarter
>>>>     
>>>
>>
>>  
>>
>>>> way to do this? Should I use predicates like:
>>>>
>>>> calibrationMethod:BEGIN CAL_METH {this.inCalMeth=true;}
>>>>            (calibrationHandle)*
>>>>            END CAL_METH {this.inCalMeth=false;};
>>>>           calibrationHandle:{this.inCalMeth}?
>>>>        BEGIN CAL_HAND
>>>>        END CAL_HAND;
>>>>
>>>> Perhaps I'm completely off base. If it looks like I'm really  missing
>>>>     
>>>
>>
>>  
>>
>>>> something, you might be right. Feel free to let me know.
>>>>
>>>> This is only one of the problems I'm having, but I'll just keep it to
>>>>     
>>>
>>
>>  
>>
>>>> one question per post ;)
>>>>
>>>> BTW, if anyone is aware of a grammar that is similar which I can  get
>>>>     
>>>
>>
>>  
>>
>>>> inspiration from, can you let me know?
>>>>
>>>> Thanks,
>>>>
>>>> Lucien.
>>>>
>>>>     
>>>
>>>   
>>
>>
>>  
>>
>
From jbb at acm.org  Fri Apr 21 18:43:08 2006
From: jbb at acm.org (John B. Brodie)
Date: Fri Apr 21 18:43:16 2006
Subject: [antlr-interest] newbie lookahead question
In-Reply-To: <44498127.50109@thinkingworks.com> (message from Lance Gutteridge
	on Fri, 21 Apr 2006 18:04:39 -0700)
References: <F1689FB09456E347A6E38343B99E680D018815E4@THHS2EXBE2X.hostedservice2.net>
	<444978D6.9090606@thinkingworks.com> <44498127.50109@thinkingworks.com>
Message-ID: <E1FX79Q-0001oJ-00@gecko>

Sir :-

>Well maybe not. It seems I was wrong about the tokens section. It 
>doesn't specify lexer rules so the tokens aren't detected and put into 
>the token stream for the parser. Ah well. It seemed like a good idea at 
>the time.
>
>Lance
 
You are not wrong about the tokens{...} lexer section.

The tokens{...} section operates in concert with the testLiterals=true
option. Please review the antlr documentation for testLiterals.

You are able to set the options{ testLiterals=true; } either at the global
level so that all rules in your lexical inspect the tokens{...} generated map
or you can set the options{ testLiterals=true; } on only those specific lexer
rules that are pertinent (i prefer the latter).

And, oh by the way, that stuff between the "s in the tokens{...} section *IS*
a lexer rule --- it means:

         'match this explicit string literal when testLiterals is true'


(now if we only had a way to specify synonyms in the tokens{...} section,
e.g. tokens{ TRUE="true","YES"; FALSE="false","NO"; } then life really would
be easy ;-)

Hope this helps...
   -jbb
From lance at thinkingworks.com  Fri Apr 21 22:05:59 2006
From: lance at thinkingworks.com (Lance Gutteridge)
Date: Fri Apr 21 22:06:19 2006
Subject: [antlr-interest] newbie lookahead question
In-Reply-To: <E1FX79Q-0001oJ-00@gecko>
References: <F1689FB09456E347A6E38343B99E680D018815E4@THHS2EXBE2X.hostedservice2.net>
	<444978D6.9090606@thinkingworks.com> <44498127.50109@thinkingworks.com>
	<E1FX79Q-0001oJ-00@gecko>
Message-ID: <4449B9B7.3090006@thinkingworks.com>

John,
Thanks for the help. What you say sounds clear and I read the 
documentation on TestLiterals=true. I thought, aha, that is the key, 
just turn the TestLiterals to true and all will be fine.

However when I try it in a grammar it doesn't seem to work. Following is 
a test grammar I made up. When I give the parser the string
"activate on" it comes up with the message Parse error: line 1:1: 
unexpected char: 'a'.

When I uncomment the three rules (ACTIVATE,ON and OFF) it parses fine 
and gives me a tree with the ACTIVATE token as the main node and one 
child of the token ON. Which is exactly what I wanted.
(In this case I am surprised that the tokens section does not create an 
ambiguity with those lexer rules.)

I checked the code of the lexer and the hash table is being generated to 
look up the three literals. However the lexer stubbornly refues to 
output the token ACTIVATE when I just have them defined in the tokens 
section.

I'm probably doing something really stupid here, but I'm quite puzzled.

Thanks for your help,
Lance

class TestLexer extends Lexer;
options
{
    testLiterals = true;
    k=2;
}

tokens{ ACTIVATE="activate"; ON="on";OFF="off";}
//ACTIVATE: "activate";
//ON: "on";
//OFF: "off";
//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// Whitespace -- ignored
//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
WS    :    (    ' '
        |    '\t'
        |    '\f'
            // handle newlines
        |    (    options {generateAmbigWarnings=false;}
            :    "\r\n"  // Windows
            |    '\r'    // Macintosh
            |    '\n'    // Unix
            )
            { newline(); }
        )+
        { _ttype = Token.SKIP; }
    ;

class TestParser extends Parser;
options
{
        buildAST=true;
        k = 1;
        defaultErrorHandler=false;
}

statement: ACTIVATE^ (ON | OFF);




John B. Brodie wrote:

>Sir :-
>
>  
>
>>Well maybe not. It seems I was wrong about the tokens section. It 
>>doesn't specify lexer rules so the tokens aren't detected and put into 
>>the token stream for the parser. Ah well. It seemed like a good idea at 
>>the time.
>>
>>Lance
>>    
>>
> 
>You are not wrong about the tokens{...} lexer section.
>
>The tokens{...} section operates in concert with the testLiterals=true
>option. Please review the antlr documentation for testLiterals.
>
>You are able to set the options{ testLiterals=true; } either at the global
>level so that all rules in your lexical inspect the tokens{...} generated map
>or you can set the options{ testLiterals=true; } on only those specific lexer
>rules that are pertinent (i prefer the latter).
>
>And, oh by the way, that stuff between the "s in the tokens{...} section *IS*
>a lexer rule --- it means:
>
>         'match this explicit string literal when testLiterals is true'
>
>
>(now if we only had a way to specify synonyms in the tokens{...} section,
>e.g. tokens{ TRUE="true","YES"; FALSE="false","NO"; } then life really would
>be easy ;-)
>
>Hope this helps...
>   -jbb
>
>  
>
From pepone.onrez at gmail.com  Fri Apr 21 22:20:42 2006
From: pepone.onrez at gmail.com (pepone pepone)
Date: Fri Apr 21 22:20:46 2006
Subject: [antlr-interest] Beginer Parsing wiki markup
Message-ID: <198501d60604212220v76fa053r7b832f516af06684@mail.gmail.com>

I trying to build a lexer and parser for a wiki like language

i'm trying to parse links like [[http://www.google.com || google]]

the problem is that i don't know how to match www.google.com

i try
domain_name:
 (name(DOT)+ name
;


but when compile i get a warning like


ANTLR Parser Generator   Version 2.7.5 (20060420)   1989-2005 jGuru.com
wikigramar.g:28: warning:nondeterminism upon
wikigramar.g:28:     k==1:DIGIT,LETTER
wikigramar.g:28:     k==2:DIGIT,LETTER
wikigramar.g:28:     k==3:DIGIT,LETTER
wikigramar.g:28:     k==4:WS,OPTION_SEPARATOR,DIGIT,LETTER
wikigramar.g:28:     k==5:WS,OPTION_SEPARATOR,NEWLINE,DIGIT,LETTER
wikigramar.g:28:     k==6:WS,OPTION_SEPARATOR,NEWLINE,WIKI_TAG_END,DIGIT,LETTER
wikigramar.g:28:    
k==7:EOF,WS,OPTION_SEPARATOR,NEWLINE,WIKI_TAG_END,DIGIT,LETTER
wikigramar.g:28:    
k==8:EOF,WS,OPTION_SEPARATOR,NEWLINE,WIKI_TAG_END,DIGIT,LETTER
wikigramar.g:28:    
k==9:EOF,WS,OPTION_SEPARATOR,NEWLINE,WIKI_TAG_END,DIGIT,LETTER
wikigramar.g:28:    
k==10:EOF,WS,OPTION_SEPARATOR,NEWLINE,WIKI_TAG_END,DIGIT,LETTER
wikigramar.g:28:     between alt 1 and exit branch of block


/*===grammar begin====*/

header {
	#include <sstream>
	#include <iostream>
	#include <qdom.h>
}

options {
	language="Cpp";
}

class WikiParser extends Parser;

options {
	buildAST = true;
	exportVocab=WIKI;
	k = 10;
}
	
protocol:
	(HTTP_PROTOCOL)|(FTP_PROTOCOL)
	;

name:
	(word)+
	;
domain_name:
	(name(DOT))+(name)
	;
	
url:
	protocol(URL_SEPARATOR) (domain_name) (WS)? (OPTION_SEPARATOR)
	;

link:
	(WIKI_TAG_BEGIN^
	(url)?(word|NEWLINE|WS)+
	WIKI_TAG_END)
	;
	
word:
	((DIGIT)|(LETTER))
	;

/**
 * Lexer
 */
class WikiLexer extends Lexer;
options {	
	k = 7;
	exportVocab=WIKI;
}


DIGIT: ('0'..'9');

LETTER: ('a'..'z')|('A'..'Z');

NEWLINE
	options {
		generateAmbigWarnings=false;
	}
	:	'\r' | '\n';

WS: ' '|'\t';

WIKI_TAG_BEGIN:
	"[["
	;
	
WIKI_TAG_END:
	"]]"
	;

FTP_PROTOCOL:
	"ftp"
	;
	
HTTP_PROTOCOL:
	"http"
	;

URL_SEPARATOR:
	"://"
	;
DOT:
	'.'
	;
	
SLASH:
	'/'
	;
	
OPTION_SEPARATOR:
	"||"
	;

/*=======gramar end=================*/

--
play tetris http://pepone.on-rez.com/tetris
run gentoo http://gentoo-notes.blogspot.com/
From lance at thinkingworks.com  Fri Apr 21 23:54:01 2006
From: lance at thinkingworks.com (Lance Gutteridge)
Date: Fri Apr 21 23:53:42 2006
Subject: [antlr-interest] newbie lookahead question
In-Reply-To: <4449B9B7.3090006@thinkingworks.com>
References: <F1689FB09456E347A6E38343B99E680D018815E4@THHS2EXBE2X.hostedservice2.net>
	<444978D6.9090606@thinkingworks.com> <44498127.50109@thinkingworks.com>
	<E1FX79Q-0001oJ-00@gecko> <4449B9B7.3090006@thinkingworks.com>
Message-ID: <4449D309.3000101@thinkingworks.com>

John,

Maybe I figured it out. It seems that there must be a rule that outputs 
tokens for the testLiterals to take effect. So I added an ID rule which 
matches a word that begins with a letter and is followed by an arbitrary 
number of letters or digits.

I think that what happens is that it tries to match ID, when it does it 
checks the literals and if it finds a match it outputs the literal token 
rather than ID.

John: I'm not sure if your previous remark that the members of the 
tokens sections are rules is correct.

> And, oh by the way, that stuff between the "s in the tokens{...} 
> section *IS*
> a lexer rule --- it means:
>
>         'match this explicit string literal when testLiterals is true' 

I think more precisely it says 'when you match a token with a lexer rule 
and if testLiterals is true, then check the token section to see if it 
matches a string and output that token if it does.'

So I think it is more of modifier of  the output of the lexer rules 
(those that have the testLiteral option turned on)  than a lexer rule in 
its own right.

Do you agree with that?

>
> (now if we only had a way to specify synonyms in the tokens{...} section,
> e.g. tokens{ TRUE="true","YES"; FALSE="false","NO"; } then life really 
> would
> be easy ;-) 

Yes that would be a nice feature.


Lance


Lance Gutteridge wrote:

> John,
> Thanks for the help. What you say sounds clear and I read the 
> documentation on TestLiterals=true. I thought, aha, that is the key, 
> just turn the TestLiterals to true and all will be fine.
>
> However when I try it in a grammar it doesn't seem to work. Following 
> is a test grammar I made up. When I give the parser the string
> "activate on" it comes up with the message Parse error: line 1:1: 
> unexpected char: 'a'.
>
> When I uncomment the three rules (ACTIVATE,ON and OFF) it parses fine 
> and gives me a tree with the ACTIVATE token as the main node and one 
> child of the token ON. Which is exactly what I wanted.
> (In this case I am surprised that the tokens section does not create 
> an ambiguity with those lexer rules.)
>
> I checked the code of the lexer and the hash table is being generated 
> to look up the three literals. However the lexer stubbornly refues to 
> output the token ACTIVATE when I just have them defined in the tokens 
> section.
>
> I'm probably doing something really stupid here, but I'm quite puzzled.
>
> Thanks for your help,
> Lance
>
> class TestLexer extends Lexer;
> options
> {
>    testLiterals = true;
>    k=2;
> }
>
> tokens{ ACTIVATE="activate"; ON="on";OFF="off";}
> //ACTIVATE: "activate";
> //ON: "on";
> //OFF: "off";
> //++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ 
>
> // Whitespace -- ignored
> //++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ 
>
> WS    :    (    ' '
>        |    '\t'
>        |    '\f'
>            // handle newlines
>        |    (    options {generateAmbigWarnings=false;}
>            :    "\r\n"  // Windows
>            |    '\r'    // Macintosh
>            |    '\n'    // Unix
>            )
>            { newline(); }
>        )+
>        { _ttype = Token.SKIP; }
>    ;
>
> class TestParser extends Parser;
> options
> {
>        buildAST=true;
>        k = 1;
>        defaultErrorHandler=false;
> }
>
> statement: ACTIVATE^ (ON | OFF);
>
>
>
>
> John B. Brodie wrote:
>
>> Sir :-
>>
>>  
>>
>>> Well maybe not. It seems I was wrong about the tokens section. It 
>>> doesn't specify lexer rules so the tokens aren't detected and put 
>>> into the token stream for the parser. Ah well. It seemed like a good 
>>> idea at the time.
>>>
>>> Lance
>>>   
>>
>>
>> You are not wrong about the tokens{...} lexer section.
>>
>> The tokens{...} section operates in concert with the testLiterals=true
>> option. Please review the antlr documentation for testLiterals.
>>
>> You are able to set the options{ testLiterals=true; } either at the 
>> global
>> level so that all rules in your lexical inspect the tokens{...} 
>> generated map
>> or you can set the options{ testLiterals=true; } on only those 
>> specific lexer
>> rules that are pertinent (i prefer the latter).
>>
>> And, oh by the way, that stuff between the "s in the tokens{...} 
>> section *IS*
>> a lexer rule --- it means:
>>
>>         'match this explicit string literal when testLiterals is true'
>>
>>
>> (now if we only had a way to specify synonyms in the tokens{...} 
>> section,
>> e.g. tokens{ TRUE="true","YES"; FALSE="false","NO"; } then life 
>> really would
>> be easy ;-)
>>
>> Hope this helps...
>>   -jbb
>>
>>  
>>
>
From prashant.deva at gmail.com  Sat Apr 22 02:19:24 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Sat Apr 22 02:19:28 2006
Subject: [antlr-interest] Beginer Parsing wiki markup
In-Reply-To: <198501d60604212220v76fa053r7b832f516af06684@mail.gmail.com>
References: <198501d60604212220v76fa053r7b832f516af06684@mail.gmail.com>
Message-ID: <41fed8f80604220219g192dc129he00098ec0f7a5641@mail.gmail.com>

>From a quick look, it seems you have not coded your lexer properly.
You are not ignoring whitespace.
also the 'Word' rule in your parser, i would put it inside the lexer.

I would suggest download an evaluation of antlr studio (placidsystems.com)
and use its lexer wizard to rapidly create the lexer without any errors.


--
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com

On 4/22/06, pepone pepone <pepone.onrez@gmail.com> wrote:
>
> I trying to build a lexer and parser for a wiki like language
>
> i'm trying to parse links like [[http://www.google.com || google]]
>
> the problem is that i don't know how to match www.google.com
>
> i try
> domain_name:
> (name(DOT)+ name
> ;
>
>
> but when compile i get a warning like
>
>
> ANTLR Parser Generator   Version 2.7.5 (20060420)   1989-2005 jGuru.com
> wikigramar.g:28: warning:nondeterminism upon
> wikigramar.g:28:     k==1:DIGIT,LETTER
> wikigramar.g:28:     k==2:DIGIT,LETTER
> wikigramar.g:28:     k==3:DIGIT,LETTER
> wikigramar.g:28:     k==4:WS,OPTION_SEPARATOR,DIGIT,LETTER
> wikigramar.g:28:     k==5:WS,OPTION_SEPARATOR,NEWLINE,DIGIT,LETTER
> wikigramar.g:28:
> k==6:WS,OPTION_SEPARATOR,NEWLINE,WIKI_TAG_END,DIGIT,LETTER
> wikigramar.g:28:
> k==7:EOF,WS,OPTION_SEPARATOR,NEWLINE,WIKI_TAG_END,DIGIT,LETTER
> wikigramar.g:28:
> k==8:EOF,WS,OPTION_SEPARATOR,NEWLINE,WIKI_TAG_END,DIGIT,LETTER
> wikigramar.g:28:
> k==9:EOF,WS,OPTION_SEPARATOR,NEWLINE,WIKI_TAG_END,DIGIT,LETTER
> wikigramar.g:28:
> k==10:EOF,WS,OPTION_SEPARATOR,NEWLINE,WIKI_TAG_END,DIGIT,LETTER
> wikigramar.g:28:     between alt 1 and exit branch of block
>
>
> /*===grammar begin====*/
>
> header {
>         #include <sstream>
>         #include <iostream>
>         #include <qdom.h>
> }
>
> options {
>         language="Cpp";
> }
>
> class WikiParser extends Parser;
>
> options {
>         buildAST = true;
>         exportVocab=WIKI;
>         k = 10;
> }
>
> protocol:
>         (HTTP_PROTOCOL)|(FTP_PROTOCOL)
>         ;
>
> name:
>         (word)+
>         ;
> domain_name:
>         (name(DOT))+(name)
>         ;
>
> url:
>         protocol(URL_SEPARATOR) (domain_name) (WS)? (OPTION_SEPARATOR)
>         ;
>
> link:
>         (WIKI_TAG_BEGIN^
>         (url)?(word|NEWLINE|WS)+
>         WIKI_TAG_END)
>         ;
>
> word:
>         ((DIGIT)|(LETTER))
>         ;
>
> /**
> * Lexer
> */
> class WikiLexer extends Lexer;
> options {
>         k = 7;
>         exportVocab=WIKI;
> }
>
>
> DIGIT: ('0'..'9');
>
> LETTER: ('a'..'z')|('A'..'Z');
>
> NEWLINE
>         options {
>                 generateAmbigWarnings=false;
>         }
>         :       '\r' | '\n';
>
> WS: ' '|'\t';
>
> WIKI_TAG_BEGIN:
>         "[["
>         ;
>
> WIKI_TAG_END:
>         "]]"
>         ;
>
> FTP_PROTOCOL:
>         "ftp"
>         ;
>
> HTTP_PROTOCOL:
>         "http"
>         ;
>
> URL_SEPARATOR:
>         "://"
>         ;
> DOT:
>         '.'
>         ;
>
> SLASH:
>         '/'
>         ;
>
> OPTION_SEPARATOR:
>         "||"
>         ;
>
> /*=======gramar end=================*/
>
> --
> play tetris http://pepone.on-rez.com/tetris
> run gentoo http://gentoo-notes.blogspot.com/
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060422/a4cc6284/attachment.html
From 12345alex at gmx.net  Sat Apr 22 04:19:06 2006
From: 12345alex at gmx.net (ak)
Date: Sat Apr 22 04:19:17 2006
Subject: [antlr-interest] parser constructor actions
Message-ID: <1145704746.13207.47.camel@localhost.local>

hi.

i'm using a header-section to import something and a unnamed section for
declaring a member-variable.

i can't find a way to put the initialization of the member-variable(new
Vector()) into the constructor(s) within a grammar-file.

is there something i've missed?

mfg

alexander
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20060422/3a20e10b/attachment.bin
From vidar at hawkis.com  Sat Apr 22 04:41:44 2006
From: vidar at hawkis.com (Vidar =?iso-8859-1?q?H=E5kestad?=)
Date: Sat Apr 22 04:41:49 2006
Subject: [antlr-interest] parser constructor actions
In-Reply-To: <1145704746.13207.47.camel@localhost.local>
References: <1145704746.13207.47.camel@localhost.local>
Message-ID: <200604221341.44860.vidar@hawkis.com>

Put initialization code after the parser class definition within curly braces:

class SomeParser extends Parser;
{
  // init code here
}

firstProduction
	: 
	;


On Saturday 22 April 2006 13:19, ak wrote:
> hi.
>
> i'm using a header-section to import something and a unnamed section for
> declaring a member-variable.
>
> i can't find a way to put the initialization of the member-variable(new
> Vector()) into the constructor(s) within a grammar-file.
>
> is there something i've missed?
>
> mfg
>
> alexander
From prashant.deva at gmail.com  Sat Apr 22 04:59:14 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Sat Apr 22 04:59:17 2006
Subject: [antlr-interest] parser constructor actions
In-Reply-To: <1145704746.13207.47.camel@localhost.local>
References: <1145704746.13207.47.camel@localhost.local>
Message-ID: <41fed8f80604220459s63b406c1gfa4ec14fd8202f5b@mail.gmail.com>

Try reading this article to get a feel for antlr grammar files-
http://www.placidsystems.com/articles/article-grammarlayout/grammarLayout.htm

--
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060422/0ee7eae7/attachment.html
From sdb at geekworld.co.uk  Sat Apr 22 05:27:16 2006
From: sdb at geekworld.co.uk (Sam Barnett-Cormack)
Date: Sat Apr 22 05:27:42 2006
Subject: [antlr-interest] newbie lookahead question
In-Reply-To: <4449D309.3000101@thinkingworks.com>
References: <F1689FB09456E347A6E38343B99E680D018815E4@THHS2EXBE2X.hostedservice2.net>	<444978D6.9090606@thinkingworks.com>
	<44498127.50109@thinkingworks.com>	<E1FX79Q-0001oJ-00@gecko>
	<4449B9B7.3090006@thinkingworks.com>
	<4449D309.3000101@thinkingworks.com>
Message-ID: <444A2124.5000409@geekworld.co.uk>

Lance Gutteridge wrote:

>> (now if we only had a way to specify synonyms in the tokens{...} section,
>> e.g. tokens{ TRUE="true","YES"; FALSE="false","NO"; } then life really
>> would
>> be easy ;-) 
> 
> 
> Yes that would be a nice feature.

While that would be good, it kinda misses part of the joy of literals.
That is to say, AIUI the reason they are called 'literals' is that the
parser can then match them with the grammar only specifying the same
literal. Thus, rather than the parser checking for TRUE, it can check
for "true".

In the above case, I'd use a subordinate parser rule, personally, like

true
  : "true"
  | "YES"
  ;

Sam
From jbb at acm.org  Sat Apr 22 06:26:56 2006
From: jbb at acm.org (John B. Brodie)
Date: Sat Apr 22 06:27:02 2006
Subject: [antlr-interest] newbie lookahead question
In-Reply-To: <4449D309.3000101@thinkingworks.com> (message from Lance
	Gutteridge on Fri, 21 Apr 2006 23:54:01 -0700)
References: <F1689FB09456E347A6E38343B99E680D018815E4@THHS2EXBE2X.hostedservice2.net>
	<444978D6.9090606@thinkingworks.com> <44498127.50109@thinkingworks.com>
	<E1FX79Q-0001oJ-00@gecko> <4449B9B7.3090006@thinkingworks.com>
	<4449D309.3000101@thinkingworks.com>
Message-ID: <E1FXI8W-0000YE-00@gecko>

>John: I'm not sure if your previous remark that the members of the 
>tokens sections are rules is correct.
>
>> And, oh by the way, that stuff between the "s in the tokens{...} 
>> section *IS*
>> a lexer rule --- it means:
>>
>>         'match this explicit string literal when testLiterals is true' 
>
>I think more precisely it says 'when you match a token with a lexer rule 
>and if testLiterals is true, then check the token section to see if it 
>matches a string and output that token if it does.'
>
>So I think it is more of modifier of  the output of the lexer rules 
>(those that have the testLiteral option turned on)  than a lexer rule in 
>its own right.
>
>Do you agree with that?

Yes.
From pepone.onrez at gmail.com  Sat Apr 22 08:12:58 2006
From: pepone.onrez at gmail.com (pepone pepone)
Date: Sat Apr 22 08:13:02 2006
Subject: [antlr-interest] beginer question
Message-ID: <198501d60604220812v6cdb2346xe0e5a194124af49f@mail.gmail.com>

Hello all

I'm begining work with antlr, and i a bit confused. I'm not sure when
to put a rule in lexer or in the parser. There is a general rule to
decide when a rule must be in lexer or in parser?

and i confused with protected rules, what is the diference in a lexer
between this tow rules

protected
LETTER
	:
	'a'..'z'|'A'..'Z'
	;

LETTER
	:
	'a'..'z'|'A'..'Z'
	;

if i don't use protected i get warning when use (LETTER)+ in other
rule, "warning:lexical nondeterminism upon"


Thanks in advance
--
play tetris http://pepone.on-rez.com/tetris
run gentoo http://gentoo-notes.blogspot.com/
From mike.quilleash at azuresolutions.com  Sat Apr 22 08:51:46 2006
From: mike.quilleash at azuresolutions.com (Mike Quilleash)
Date: Sat Apr 22 08:51:55 2006
Subject: [antlr-interest] beginer question
Message-ID: <F1689FB09456E347A6E38343B99E680D018816D9@THHS2EXBE2X.hostedservice2.net>

The lexer is trying to match characters to produce tokens.  If you
define two lexer rules that have the same start, LETTER in this case,
then the lexer can't figure out which token it should be producing.

If I define these rules

LETTER
	:
	'a'..'z'|'A'..'Z'
	;

WORD: (LETTER)+

When the lexer sees a letter it can't tell whether to produce the LETTER
token or the WORD token, the WORD token is allowed to be a single
LETTER.  Usually you would make the LETTER rule protected which means it
is only used to build other lexer rules and will never be sent to the
parser as a token in it's own right.

A general rule is hard to define  as each grammar is different but
generally I use the lexer to break down the input into basic tokens,
word, integer, different sorts of punctuation, whitespace etc.  And then
have the parser define the syntax of when and how often these basic
blocks will appear.

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of pepone pepone
Sent: 22 April 2006 16:13
To: antlr-interest@antlr.org
Subject: [antlr-interest] beginer question

Hello all

I'm begining work with antlr, and i a bit confused. I'm not sure when to
put a rule in lexer or in the parser. There is a general rule to decide
when a rule must be in lexer or in parser?

and i confused with protected rules, what is the diference in a lexer
between this tow rules

protected
LETTER
	:
	'a'..'z'|'A'..'Z'
	;

LETTER
	:
	'a'..'z'|'A'..'Z'
	;

if i don't use protected i get warning when use (LETTER)+ in other rule,
"warning:lexical nondeterminism upon"


Thanks in advance
--
play tetris http://pepone.on-rez.com/tetris run gentoo
http://gentoo-notes.blogspot.com/
From pepone.onrez at gmail.com  Sat Apr 22 20:33:54 2006
From: pepone.onrez at gmail.com (pepone pepone)
Date: Sat Apr 22 20:33:57 2006
Subject: [antlr-interest] c++ Unicode
Message-ID: <198501d60604222033q53644074wcf0a82f3bb72eca4@mail.gmail.com>

 I trying to add Unicode suport to my lexer based on example/cpp/unicode,

when add the unicode char vocabulary 	charVocabulary='\u0000'..'\uFFFE';


When try to compile the Lexer i get the next error:


WikiLexer.cpp: In member function `void WikiLexer::mDOCUMENT(bool)':
WikiLexer.cpp:192: error: invalid conversion from `const wchar_t*' to `unsigned
   int'
WikiLexer.cpp:192: error:   initializing argument 1 of `
   antlr::BitSet::BitSet(unsigned int)'
WikiLexer.cpp: In member function `void WikiLexer::mSECTION_1_TAG(bool)':
WikiLexer.cpp:206: error: invalid conversion from `const wchar_t*' to `unsigned


Any ideas
Thanks
--
play tetris http://pepone.on-rez.com/tetris
run gentoo http://gentoo-notes.blogspot.com/
From Erik.Putrycz at nrc-cnrc.gc.ca  Sun Apr 23 00:23:39 2006
From: Erik.Putrycz at nrc-cnrc.gc.ca (Putrycz, Erik)
Date: Sun Apr 23 00:23:43 2006
Subject: [antlr-interest] Variables names with number
Message-ID: <E4D07AB09F5F044299333C8D0FEB45E91A128A@nrccenexb1.nrc.ca>

I'm working on a cobol grammar and I'm stuck with a strange problem:
In Cobol some "variable" (records) names not only can contain number but can start with numbers:
For instance a COBOL line with:
005574         88  2ND-PREVIOUS-YEAR-DED             VALUE
I have no problem scanning the record structure but "2ND-PREVIOUS-YEAR-DED" fails the "NAME" rule (my grammar is based on the python grammar). I get the error expecting NAME, found '2'.

I tried to add (Int Letter) => Name { $setType(NAME);} to the main NAME rule but it doesn't do anything.
Here are my main NAME rules:

STRING_OR_NAME
options {
    testLiterals=true; // check to see if we are a keyword
}   :  
 	String {$setType(STRING);}
    | (Int Letter) => Name { $setType(NAME);}	
    |   SimpleName {$setType(NAME);}   

protected
Name
    :
    	(Digit)* (Letter) (Letter|Digit|'-')*
    ;

Are there any other grammars that implement such naming rules?

Thanks,

Erik Putrycz, Ph.D?- Research Associate / erik.putrycz@nrc-cnrc.gc.ca?/ (613) 990 0681
Institute for Information Technology - Software Engineering Group
National Research Council, Canada - Building M-50, 1200 Montreal Road
Ottawa, Ontario, CANADA K1A 0R6


From jimi at temporal-wave.com  Sun Apr 23 01:19:33 2006
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun Apr 23 01:19:37 2006
Subject: [antlr-interest] antlr & antlr studio...
References: <2E909902FD3A03419E3A905908AE3DD401D1F4F4@UKNSM201.emea.corp.eds.com>
Message-ID: <B36CCC332A32904F8FA3DE134A23533608A5AB@wavemachine.temporal-wave.com>

> Out of interest , how stable is V3?  Does it do everything it says on
> the tin yet? :)
 
I find that you need the occasional work around but that because of the nature of it, if you have produced somethign that works once, it will always work. The lack of documenation at the moment is probably the most difficult thing to surmount but you can piece it all together from teh examples if you are willing.

> However when it hits VS2005, I'll almost certainly use your C codegen
> since at least theres a modicum of interop between that and C#..hmm I
> wonder if turning on the managed C++ for it would be an option in that
> case?

I shall look into this as well as generating a COM interface for the generated code too as plenty of people still need to use this. It might make more sense to use the C++ output for such things but in theory it should all be the same under the hood. Further of course, there is a C# output in in progress (not sure how far along it is), which obviously make the most sense if you are accessing the generated code from C# unless there were some performance penalty. However the generated code is logically efficent so it is only the choices made with the runtime implementation that would have dramatic effects on performance - it seems like everyone involved in code generation knows what they are doing though.
 
If it is a possiblity I woudl use ANTLR3 now as other than the start up time, while there are potentially bugs in there, they do not matter if you configure your grammar to avoid them and the code you generate works for the task at hand. Future modifications to ANTLR3 don't have to be adoopted until you are ready. Of course, the general patina of Early Access may put many people off but ANTLR3 is close to being 'there' if you ask me.
 
Jim
From madcapmaggie at yahoo.com  Sun Apr 23 10:50:25 2006
From: madcapmaggie at yahoo.com (Peggy Fieland)
Date: Sun Apr 23 10:50:31 2006
Subject: [antlr-interest] c++ Unicode
In-Reply-To: <198501d60604222033q53644074wcf0a82f3bb72eca4@mail.gmail.com>
Message-ID: <20060423175025.37749.qmail@web37911.mail.mud.yahoo.com>

Yes, if you have something like:

GE: ">="

you'll have to change it to:

GE:  'G''E'

There may be another way, but that one worked for me.



--- pepone pepone <pepone.onrez@gmail.com> wrote:

>  I trying to add Unicode suport to my lexer based on
> example/cpp/unicode,
> 
> when add the unicode char vocabulary 
> charVocabulary='\u0000'..'\uFFFE';
> 
> 
> When try to compile the Lexer i get the next error:
> 
> 
> WikiLexer.cpp: In member function `void
> WikiLexer::mDOCUMENT(bool)':
> WikiLexer.cpp:192: error: invalid conversion from
> `const wchar_t*' to `unsigned
>    int'
> WikiLexer.cpp:192: error:   initializing argument 1
> of `
>    antlr::BitSet::BitSet(unsigned int)'
> WikiLexer.cpp: In member function `void
> WikiLexer::mSECTION_1_TAG(bool)':
> WikiLexer.cpp:206: error: invalid conversion from
> `const wchar_t*' to `unsigned
> 
> 
> Any ideas
> Thanks
> --
> play tetris http://pepone.on-rez.com/tetris
> run gentoo http://gentoo-notes.blogspot.com/
> 

From chandu.dondeti at gmail.com  Sun Apr 23 14:49:00 2006
From: chandu.dondeti at gmail.com (Chandu Dondeti)
Date: Sun Apr 23 13:48:50 2006
Subject: [antlr-interest] Lexical nondeterminism
Message-ID: <444BF64C.8090300@gmail.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060423/fae30841/attachment.html
From chandu.dondeti at gmail.com  Sun Apr 23 16:05:57 2006
From: chandu.dondeti at gmail.com (Chandu Dondeti)
Date: Sun Apr 23 15:05:46 2006
Subject: [antlr-interest] Error
Message-ID: <444C0855.8010105@gmail.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060423/147e7c6b/attachment.html
From Erik.Putrycz at nrc-cnrc.gc.ca  Sun Apr 23 19:46:47 2006
From: Erik.Putrycz at nrc-cnrc.gc.ca (Putrycz, Erik)
Date: Sun Apr 23 19:46:50 2006
Subject: [antlr-interest] Lexical nondeterminism
Message-ID: <E4D07AB09F5F044299333C8D0FEB45E91A128B@nrccenexb1.nrc.ca>

Hi Chandu,

I'm not an expert but I think I understand your problem:
APPEAR: "APPEAR";
PG_IDENT  options { testLiterals = true;}
     :('A'..'Z')('A'..'Z'|'0'..'9'|'_')*;

If something starts with "A", with a lookahead factor of 1, ANTLR won't
know which rule to use.
Why don't you remove the "APPEAR" from the parser and move it to the
Lexer?
Your PG_IDENT rule should find it.


Erik Putrycz, Ph.D - Research Associate / erik.putrycz@nrc-cnrc.gc.ca /
(613) 990 0681
Institute for Information Technology - Software Engineering Group
National Research Council, Canada - Building M-50, 1200 Montreal Road
Ottawa, Ontario, CANADA K1A 0R6
-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Chandu Dondeti
Sent: Sunday, April 23, 2006 5:49 PM
To: antlr-interest@antlr.org
Subject: [antlr-interest] Lexical nondeterminism


Hello every one, 

I am new to this mailing list. I am posting a problem regarding an error
and It would be a great help if you could tell me what wrong with it.\\

This is the grammar which i wrote . When i compiled it its giving me an
error saying
"LEXICAL NON DETERMINISM BETWEEN RULES APPEAR AND PF_IDENT UP ON K==1"

PSQL.g
class PsqParser extends Parser;

options
{
    buildAST = true;
    k =4;
}
//tokens
//{
//SET
//PROGRAM
//EQUAL
//SEMICOLON
//}

start: question ;
question: set_context pose_query ;

set_context: SET PROGRAM EQUAL prog_name SEMICOLON ;

pose_query: POSE COLON alternate_query QUESTION_MARK;

alternate_query: what_queries
                 | where_queries
                 | which_queries
                 | does_queries
                 | can_queries
                 | are_queries;

what_queries: WHAT are_is what_optins OF shared_targets;

are_is: ARE | IS;

what_optins:     PARAMETERS | RETURN_TYPE | LOCAL_VARS | DATA_TYPE;

shared_targets: pf_name | symbol;

where_queries: WHERE are_does where_rest;

are_does: ARE | DOES;

where_rest: DECLARATIONS OF symbol
          | DOUBLE_QUOTE search_option DOUBLE_QUOTE APPEAR;

search_option: assignment
             | parameter_list
             | boolean_expr;

assignment: symbol ASSIGN_OP expr;

parameter_list: symbol (COMMA symbol)*; 
//parameter_list COMMA symbol;

boolean_expr: expr REL_OP expr;

which_queries: WHICH proc_func which_optins which_rest;

proc_func: PROC | FUNC;

which_optins: CAN | USE | MODIFY | READ;

which_rest: CALL pf_name
          | pf_name CALL
          | symbol;

does_queries: DOES pf_name call_use shared_targets;

call_use: CALL | USE;

can_queries: CAN pf_name call_use shared_targets;

are_queries: ARE symbol COMMA symbol are_optins;

are_optins: COMPATIBLE | EQUIVALENT;


expr: term ((PLUS | MINUS ) term)*;

 term : factor ( ( MULT | DIV | MOD ) factor )*
    ;
 
factor: LPAREN expr RPAREN
      | symbol
      | number;

prog_name: PG_IDENT;

pf_name: PF_IDENT;

symbol: SYM_IDENT;

number: NUMBER;

class PsqLexer extends Lexer;

   SET:"SET";
   PROGRAM: "PROGRAM";
   EQUAL: '=';
   SEMICOLON:';';
   POSE: "POSE";
   COLON: ':';
   QUESTION_MARK: '?';
   WHAT: "WHAT";
   OF: "OF";
   ARE: "ARE";
   IS: "IS";
   PARAMETERS: "PARAMETERS";
   RETURN_TYPE: "RETURN_TYPE";
   LOCAL_VARS: "LOCAL_VARS";
   DATA_TYPE: "DATA_TYPE";
   WHERE: "WHERE";
   DOES: "DOES";
   DECLARATIONS: "DECLARATIONS";
   DOUBLE_QUOTE: '"';
   APPEAR: "APPEAR";
   ASSIGN_OP: ":=";
   COMMA: ',';
   REL_OP: "AND" '|' "OR";
   WHICH: "WHICH";
   PROC: "PROC";
   FUNC: "FUNC";   
   CAN: "CAN";
   USE: "USE";
   MODIFY: "MODIFY";
   READ: "READ";
   CALL: "CALL";
   COMPATIBLE: "COMPATIBLE";
   EQUIVALENT: "EQUIVALENT";
   PLUS: '+';
   MINUS: '-';
   MULT: '*';
   DIV: '/';
   MOD: '%';
   LPAREN: '(';
   RPAREN: ')';
   PF_IDENT  options{ testLiterals = true;}
   :('A'..'Z')('a'..'z'|'A'..'Z'|'0'..'9'|'_')*;   
   PG_IDENT  options { testLiterals = true;}
     :('A'..'Z')('A'..'Z'|'0'..'9'|'_')*;
   SYM_IDENT  options { testLiterals = true;}
            :('a'..'z')('a'..'z'|'0'..'9'|'_')*;       
   NUMBER 
    :
        ('0'..'9')+
    ;
   WS  :   (   ' '
        |   '\t'
        |   '\n'  { newline(); }
        |   '\r' ('\n')?   { newline(); }
        )
        {$setType(Token.SKIP);} //ignore this token
    ;
  
From Yassin.Chkouri at imag.fr  Mon Apr 24 02:20:35 2006
From: Yassin.Chkouri at imag.fr (Yassin.Chkouri@imag.fr)
Date: Mon Apr 24 02:20:46 2006
Subject: [antlr-interest] Generate EMF
Message-ID: <1145870435.444c9863e4b12@webmail.imag.fr>




Hi,
 I am using ANTLR for parsing a language and build
 the corresponding EMF. Is it possible to directly generate
 the EMF from the semantic actions in ANTLR or is it necessary
 to use the intermediate AST generated by ANTLR ?

 Thanks,


-------------------------------------------------
envoy? via Webmail/IMAG !

From mail at martin-probst.com  Mon Apr 24 05:13:05 2006
From: mail at martin-probst.com (Martin Probst)
Date: Mon Apr 24 05:13:12 2006
Subject: [antlr-interest] Generate EMF
In-Reply-To: <1145870435.444c9863e4b12@webmail.imag.fr>
References: <1145870435.444c9863e4b12@webmail.imag.fr>
Message-ID: <686184B7-FFFC-4E12-B704-2BB725F5A194@martin-probst.com>

Hi,

I notice that this is the second time you ask your question and no  
one answered the first time. This might be because no one understands  
what you're asking about. Maybe you could give a hint what a EMF is  
and in what way it might correspond to a parsed piece of code?

ANTLR does not include any support for anything called "EMF" as far  
as I know, so it's definitely not supported out of the box. It might  
be easy to hack in yourself, though.

Martin

Am 24.04.2006 um 11:20 schrieb Yassin.Chkouri@imag.fr:

>
>
>
> Hi,
>  I am using ANTLR for parsing a language and build
>  the corresponding EMF. Is it possible to directly generate
>  the EMF from the semantic actions in ANTLR or is it necessary
>  to use the intermediate AST generated by ANTLR ?
>
>  Thanks,
>
>
> -------------------------------------------------
> envoy? via Webmail/IMAG !
>
>

From dskolovos at gmail.com  Mon Apr 24 05:23:51 2006
From: dskolovos at gmail.com (Dimitrios Kolovos)
Date: Mon Apr 24 05:24:01 2006
Subject: [antlr-interest] Generate EMF
In-Reply-To: <1145870435.444c9863e4b12@webmail.imag.fr>
References: <1145870435.444c9863e4b12@webmail.imag.fr>
Message-ID: <444CC357.50709@gmail.com>

Hi,

Actually you can do either but I think it is more tidy to produce an AST 
first and then use it to populate your EMF model.

Cheers,
Dimitrios

P.S. EMF stands for Eclipse Modeling Framework

Yassin.Chkouri@imag.fr wrote:
>
> Hi,
>  I am using ANTLR for parsing a language and build
>  the corresponding EMF. Is it possible to directly generate
>  the EMF from the semantic actions in ANTLR or is it necessary
>  to use the intermediate AST generated by ANTLR ?
>
>  Thanks,
>
>
> -------------------------------------------------
> envoy? via Webmail/IMAG !
>
>
>   
From rhill03 at EDS.COM  Mon Apr 24 03:58:29 2006
From: rhill03 at EDS.COM (Hill, Robert)
Date: Mon Apr 24 05:27:13 2006
Subject: [antlr-interest] antlr & antlr studio...
Message-ID: <2E909902FD3A03419E3A905908AE3DD401D1F60F@UKNSM201.emea.corp.eds.com>

That's fantastic jim, - just what I wanted to hear :)
I think I'll dip my toes in the water, and use the java code until the
c# codegen is done, they're not that different anyway I suppose, its
just to enviroment I was after ;)
Im not bothered by the early access, I've been used to worse hehe! And
the lack of docs is a bit of a pain, but I've been following the
blog's/Ter's mail's so I've got a reasonable idea what the differences
are, so along with the examples I think I'll be ok :)

Thanks!

Rob



--
Rob Hill
EDS - Hallamshire Business Park
F1E/087
Sheffield	
T:	+44 (0) 114 291 1928
M:	+44 (0) 791 732 1227
E:	rhill03@eds.com

 

>-----Original Message-----
>From: Jim Idle [mailto:jimi@temporal-wave.com] 
>Sent: 23 April 2006 09:20
>To: Hill, Robert; antlr-interest@antlr.org
>Subject: RE: [antlr-interest] antlr & antlr studio...
>
>> Out of interest , how stable is V3?  Does it do everything 
>it says on 
>> the tin yet? :)
> 
>I find that you need the occasional work around but that 
>because of the nature of it, if you have produced somethign 
>that works once, it will always work. The lack of documenation 
>at the moment is probably the most difficult thing to surmount 
>but you can piece it all together from teh examples if you are willing.
>
>> However when it hits VS2005, I'll almost certainly use your 
>C codegen 
>> since at least theres a modicum of interop between that and 
>C#..hmm I 
>> wonder if turning on the managed C++ for it would be an 
>option in that 
>> case?
>
>I shall look into this as well as generating a COM interface 
>for the generated code too as plenty of people still need to 
>use this. It might make more sense to use the C++ output for 
>such things but in theory it should all be the same under the 
>hood. Further of course, there is a C# output in in progress 
>(not sure how far along it is), which obviously make the most 
>sense if you are accessing the generated code from C# unless 
>there were some performance penalty. However the generated 
>code is logically efficent so it is only the choices made with 
>the runtime implementation that would have dramatic effects on 
>performance - it seems like everyone involved in code 
>generation knows what they are doing though.
> 
>If it is a possiblity I woudl use ANTLR3 now as other than the 
>start up time, while there are potentially bugs in there, they 
>do not matter if you configure your grammar to avoid them and 
>the code you generate works for the task at hand. Future 
>modifications to ANTLR3 don't have to be adoopted until you 
>are ready. Of course, the general patina of Early Access may 
>put many people off but ANTLR3 is close to being 'there' if you ask me.
> 
>Jim
>
From meghan.c.pike at gmail.com  Mon Apr 24 07:02:50 2006
From: meghan.c.pike at gmail.com (Meghan Pike)
Date: Mon Apr 24 07:02:53 2006
Subject: [antlr-interest] bidirectional grammars using antlr
Message-ID: <6c3beeb70604240702ybc87c0er99ebdba74c83ede2@mail.gmail.com>

Hi,

I was wondering if there were any way / tools to make a bidirectional
grammar in antlr?

I have a grammar written in antlr and not only do I want to parse sentences
with it, I also want it to generate example sentences. (well actually I want
it to generate all possible sentences.) Much like Definate Clause Grammars
in Prolog. (I'd prefer not to have to use prolog in java or somesuch.)

I was wondering if there were any tools / addon / projects that do this
using antlr, or if anybody knew of any written in / for other parser
generators?

I don't really want to have to duplicate work if somebody has already made
one.

thanks

Meghan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060424/11834389/attachment.html
From lance at thinkingworks.com  Mon Apr 24 09:05:04 2006
From: lance at thinkingworks.com (Lance Gutteridge)
Date: Mon Apr 24 09:04:58 2006
Subject: [antlr-interest] newbie lookahead question
In-Reply-To: <444A2124.5000409@geekworld.co.uk>
References: <F1689FB09456E347A6E38343B99E680D018815E4@THHS2EXBE2X.hostedservice2.net>
	<444978D6.9090606@thinkingworks.com> <44498127.50109@thinkingworks.com>
	<E1FX79Q-0001oJ-00@gecko> <4449B9B7.3090006@thinkingworks.com>
	<4449D309.3000101@thinkingworks.com> <444A2124.5000409@geekworld.co.uk>
Message-ID: <444CF730.90605@thinkingworks.com>

Ah the joy of literals.  I guess what John Brodie was saying orignally 
was that it would be nice to be able to specify a token that represented 
a group of synomyns in a simple way in the token section, so that one 
didn't have to produce a bunch of extra rules. I like that idea as it 
seems to me to be easier to read and easier to change when new synomyns 
present themselves.

Still you are right it can easily be done the way you suggest.

I'm finally getting on top of all my literals (maybe not joy, but 
satisfaction). Thanks to all of you who helped with my questions.

Lance

Sam Barnett-Cormack wrote:

>While that would be good, it kinda misses part of the joy of literals.
>That is to say, AIUI the reason they are called 'literals' is that the
>parser can then match them with the grammar only specifying the same
>literal. Thus, rather than the parser checking for TRUE, it can check
>for "true".
>
>In the above case, I'd use a subordinate parser rule, personally, like
>
>true
>  : "true"
>  | "YES"
>  ;
>
>Sam
>
>  
>
From pepone.onrez at gmail.com  Mon Apr 24 11:42:38 2006
From: pepone.onrez at gmail.com (pepone pepone)
Date: Mon Apr 24 11:42:42 2006
Subject: [antlr-interest] c++ Unicode
In-Reply-To: <20060423175025.37749.qmail@web37911.mail.mud.yahoo.com>
References: <198501d60604222033q53644074wcf0a82f3bb72eca4@mail.gmail.com>
	<20060423175025.37749.qmail@web37911.mail.mud.yahoo.com>
Message-ID: <198501d60604241142o446f7394tb60966d5f608c102@mail.gmail.com>

Hi all

I have same problems to get UNICODE working with c++

I change my lexer rules as Peggy say and now my lexer and parser
compile OK, but it don't work as expected.

in cpp/examples/unicode test.in is encoding as ISO-8859-1 and not as
utf-8, is not posible to have input encoding as UTF-8 or UTF-16?

if i encoding my input as ISO-8859-1 i don't see the same characters
in input that in ouput

for example if i input '?'  this give me '? '  this happen with my
lexer as well with unicode example.

what is the way to get this working, i want to input '?' a view '?' in
the ouput.

Any ideas to solve this.

On 4/23/06, Peggy Fieland <madcapmaggie@yahoo.com> wrote:
> Yes, if you have something like:
>
> GE: ">="
>
> you'll have to change it to:
>
> GE:  'G''E'
>
> There may be another way, but that one worked for me.
>
>
>
> --- pepone pepone <pepone.onrez@gmail.com> wrote:
>
> >  I trying to add Unicode suport to my lexer based on
> > example/cpp/unicode,
> >
> > when add the unicode char vocabulary
> > charVocabulary='\u0000'..'\uFFFE';
> >
> >
> > When try to compile the Lexer i get the next error:
> >
> >
> > WikiLexer.cpp: In member function `void
> > WikiLexer::mDOCUMENT(bool)':
> > WikiLexer.cpp:192: error: invalid conversion from
> > `const wchar_t*' to `unsigned
> >    int'
> > WikiLexer.cpp:192: error:   initializing argument 1
> > of `
> >    antlr::BitSet::BitSet(unsigned int)'
> > WikiLexer.cpp: In member function `void
> > WikiLexer::mSECTION_1_TAG(bool)':
> > WikiLexer.cpp:206: error: invalid conversion from
> > `const wchar_t*' to `unsigned
> >
> >
> > Any ideas
> > Thanks
> > --
> > play tetris http://pepone.on-rez.com/tetris
> > run gentoo http://gentoo-notes.blogspot.com/
> >
>
>


--
play tetris http://pepone.on-rez.com/tetris
run gentoo http://gentoo-notes.blogspot.com/
From madcapmaggie at yahoo.com  Mon Apr 24 12:41:50 2006
From: madcapmaggie at yahoo.com (Peggy Fieland)
Date: Mon Apr 24 12:41:53 2006
Subject: [antlr-interest] c++ Unicode
In-Reply-To: <198501d60604241142o446f7394tb60966d5f608c102@mail.gmail.com>
Message-ID: <20060424194150.57665.qmail@web37905.mail.mud.yahoo.com>

I get my input in UTF-8. I am using ANTLR 2.7.5 and
have modified it to handle utf-8 using the example in
the examples directory as a model.  

I don't know what the state of C++ unicode suport is
in antlr-2.7.6

Peggy

--- pepone pepone <pepone.onrez@gmail.com> wrote:

> Hi all
> 
> I have same problems to get UNICODE working with c++
> 
> I change my lexer rules as Peggy say and now my
> lexer and parser
> compile OK, but it don't work as expected.
> 
> in cpp/examples/unicode test.in is encoding as
> ISO-8859-1 and not as
> utf-8, is not posible to have input encoding as
> UTF-8 or UTF-16?
> 
> if i encoding my input as ISO-8859-1 i don't see the
> same characters
> in input that in ouput
> 
> for example if i input '???'  this give me '??? ' 
this
> happen with my
> lexer as well with unicode example.
> 
> what is the way to get this working, i want to input
> '???' a view '???' in
> the ouput.
> 
> Any ideas to solve this.
> 
> On 4/23/06, Peggy Fieland <madcapmaggie@yahoo.com>
> wrote:
> > Yes, if you have something like:
> >
> > GE: ">="
> >
> > you'll have to change it to:
> >
> > GE:  'G''E'
> >
> > There may be another way, but that one worked for
> me.
> >
> >
> >
> > --- pepone pepone <pepone.onrez@gmail.com> wrote:
> >
> > >  I trying to add Unicode suport to my lexer
> based on
> > > example/cpp/unicode,
> > >
> > > when add the unicode char vocabulary
> > > charVocabulary='\u0000'..'\uFFFE';
> > >
> > >
> > > When try to compile the Lexer i get the next
> error:
> > >
> > >
> > > WikiLexer.cpp: In member function `void
> > > WikiLexer::mDOCUMENT(bool)':
> > > WikiLexer.cpp:192: error: invalid conversion
> from
> > > `const wchar_t*' to `unsigned
> > >    int'
> > > WikiLexer.cpp:192: error:   initializing
> argument 1
> > > of `
> > >    antlr::BitSet::BitSet(unsigned int)'
> > > WikiLexer.cpp: In member function `void
> > > WikiLexer::mSECTION_1_TAG(bool)':
> > > WikiLexer.cpp:206: error: invalid conversion
> from
> > > `const wchar_t*' to `unsigned
> > >
> > >
> > > Any ideas
> > > Thanks
> > > --
> > > play tetris http://pepone.on-rez.com/tetris
> > > run gentoo http://gentoo-notes.blogspot.com/
> > >
> >
> >
> 
> 
> --
> play tetris http://pepone.on-rez.com/tetris
> run gentoo http://gentoo-notes.blogspot.com/
> 

From pepone.onrez at gmail.com  Mon Apr 24 14:44:07 2006
From: pepone.onrez at gmail.com (pepone pepone)
Date: Mon Apr 24 14:44:11 2006
Subject: [antlr-interest] c++ Unicode
In-Reply-To: <20060424194150.57665.qmail@web37905.mail.mud.yahoo.com>
References: <198501d60604241142o446f7394tb60966d5f608c102@mail.gmail.com>
	<20060424194150.57665.qmail@web37905.mail.mud.yahoo.com>
Message-ID: <198501d60604241444w79135061j741b39680bd45b4d@mail.gmail.com>

Thanks for your help Peggy, UTF-8 it's working now, i forget to create
UnicodeCharBuffer input(*in); in the main program

Thanks again

On 4/24/06, Peggy Fieland <madcapmaggie@yahoo.com> wrote:
> I get my input in UTF-8. I am using ANTLR 2.7.5 and
> have modified it to handle utf-8 using the example in
> the examples directory as a model.
>
> I don't know what the state of C++ unicode suport is
> in antlr-2.7.6
>
> Peggy
>
> --- pepone pepone <pepone.onrez@gmail.com> wrote:
>
> > Hi all
> >
> > I have same problems to get UNICODE working with c++
> >
> > I change my lexer rules as Peggy say and now my
> > lexer and parser
> > compile OK, but it don't work as expected.
> >
> > in cpp/examples/unicode test.in is encoding as
> > ISO-8859-1 and not as
> > utf-8, is not posible to have input encoding as
> > UTF-8 or UTF-16?
> >
> > if i encoding my input as ISO-8859-1 i don't see the
> > same characters
> > in input that in ouput
> >
> > for example if i input '?'  this give me '? '
> this
> > happen with my
> > lexer as well with unicode example.
> >
> > what is the way to get this working, i want to input
> > '?' a view '?' in
> > the ouput.
> >
> > Any ideas to solve this.
> >
> > On 4/23/06, Peggy Fieland <madcapmaggie@yahoo.com>
> > wrote:
> > > Yes, if you have something like:
> > >
> > > GE: ">="
> > >
> > > you'll have to change it to:
> > >
> > > GE:  'G''E'
> > >
> > > There may be another way, but that one worked for
> > me.
> > >
> > >
> > >
> > > --- pepone pepone <pepone.onrez@gmail.com> wrote:
> > >
> > > >  I trying to add Unicode suport to my lexer
> > based on
> > > > example/cpp/unicode,
> > > >
> > > > when add the unicode char vocabulary
> > > > charVocabulary='\u0000'..'\uFFFE';
> > > >
> > > >
> > > > When try to compile the Lexer i get the next
> > error:
> > > >
> > > >
> > > > WikiLexer.cpp: In member function `void
> > > > WikiLexer::mDOCUMENT(bool)':
> > > > WikiLexer.cpp:192: error: invalid conversion
> > from
> > > > `const wchar_t*' to `unsigned
> > > >    int'
> > > > WikiLexer.cpp:192: error:   initializing
> > argument 1
> > > > of `
> > > >    antlr::BitSet::BitSet(unsigned int)'
> > > > WikiLexer.cpp: In member function `void
> > > > WikiLexer::mSECTION_1_TAG(bool)':
> > > > WikiLexer.cpp:206: error: invalid conversion
> > from
> > > > `const wchar_t*' to `unsigned
> > > >
> > > >
> > > > Any ideas
> > > > Thanks
> > > > --
> > > > play tetris http://pepone.on-rez.com/tetris
> > > > run gentoo http://gentoo-notes.blogspot.com/
> > > >
> > >
> > >
> >
> >
> > --
> > play tetris http://pepone.on-rez.com/tetris
> > run gentoo http://gentoo-notes.blogspot.com/
> >
>
>


--
play tetris http://pepone.on-rez.com/tetris
run gentoo http://gentoo-notes.blogspot.com/
From pepone.onrez at gmail.com  Mon Apr 24 15:37:02 2006
From: pepone.onrez at gmail.com (pepone pepone)
Date: Mon Apr 24 15:37:05 2006
Subject: [antlr-interest] How a rule can containt characters that match
	other rule
Message-ID: <198501d60604241537v1c8bf44fs1992c1d18c38cc2f@mail.gmail.com>

Hi all

I trying to build a Wiki Lexer parser and i don't know how to solve
this situation

Here is a sample document

---
<p>Hello world UTF-8</p>
---

---  Match document begin and document end

<p> parraf begin
</p> parraf end


I have this rules in my parser:

document
	:DOCUMENT^(parraf)+DOCUMENT
	;

parraf
	:
	(PARRAF_TAG_BEGIN^
		(~(OTAG|CTAG))+
	PARRAF_TAG_END)
	;

Lexer rules:

DOCUMENT:
	'-''-''-'
	;

PARRAF_TAG_BEGIN:
	OTAG P CTAG
	;
	
PARRAF_TAG_END:
	OTAG SLASH P CTAG
	;

protected OTAG:'<';
protected CTAG:'>';

The problem is that when parser found '8' it expect '-'

how make the parser work in this scenario?

Thanks
--
play tetris http://pepone.on-rez.com/tetris
run gentoo http://gentoo-notes.blogspot.com/
From parrt at cs.usfca.edu  Mon Apr 24 15:47:38 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Apr 24 15:47:44 2006
Subject: [antlr-interest] calling all ANTLR v3 aficiandos
Message-ID: <735AB18E-4B0A-47B0-9B56-B7D30872E72B@cs.usfca.edu>

Howdy,

If you have played with v3 and know something, can we start a how-to  
guide or at least a "how to convert to v3" guide in the wiki?  If you  
wait for me to get the doc moving, it'll be a while.  I'll coding for  
about 1.5 - 2 more months before beta.

http://www.antlr.org/wiki

Thanks
Ter
From prashant.deva at gmail.com  Mon Apr 24 16:03:13 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Mon Apr 24 16:03:19 2006
Subject: [antlr-interest] calling all ANTLR v3 aficiandos
In-Reply-To: <735AB18E-4B0A-47B0-9B56-B7D30872E72B@cs.usfca.edu>
References: <735AB18E-4B0A-47B0-9B56-B7D30872E72B@cs.usfca.edu>
Message-ID: <41fed8f80604241603x266a01b5m73ac73302a38d50a@mail.gmail.com>

In how many months can we expect a final release?

On 4/25/06, Terence Parr <parrt@cs.usfca.edu> wrote:
>
> Howdy,
>
> If you have played with v3 and know something, can we start a how-to
> guide or at least a "how to convert to v3" guide in the wiki?  If you
> wait for me to get the doc moving, it'll be a while.  I'll coding for
> about 1.5 - 2 more months before beta.
>
> http://www.antlr.org/wiki
>
> Thanks
> Ter
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060425/c4e4ebcc/attachment.html
From erikforbes at gmail.com  Mon Apr 24 16:23:30 2006
From: erikforbes at gmail.com (Erik Forbes)
Date: Mon Apr 24 16:23:33 2006
Subject: [antlr-interest] Stupid question...
Message-ID: <adc59ce70604241623k2bbddb98x1f0475d163dca19e@mail.gmail.com>

Okay, this may seem like a stupid question, but...

Now that I have a lexer/parser that correctly parses my input... What do I
do with it? How do I use the fact that all the tokens in the parser are
correctly matched to actually do something with the input? I'm dreadfully
lost on this.

In case anyone's curious, it's a wiki parser.

--
Support your local gravity testers -- Skydive!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060424/7b14335e/attachment.html
From prashant.deva at gmail.com  Mon Apr 24 16:27:58 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Mon Apr 24 16:28:02 2006
Subject: [antlr-interest] Stupid question...
In-Reply-To: <adc59ce70604241623k2bbddb98x1f0475d163dca19e@mail.gmail.com>
References: <adc59ce70604241623k2bbddb98x1f0475d163dca19e@mail.gmail.com>
Message-ID: <41fed8f80604241627v60dfc40ek231d9b60cd875e14@mail.gmail.com>

You need to put actions inside your grammar which will map the recognized
text into data structures inside your program. Once you have all the info
inside your data structures, you can manipulate it whichever way you want.



--
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com

On 4/25/06, Erik Forbes <erikforbes@gmail.com> wrote:
>
> Okay, this may seem like a stupid question, but...
>
> Now that I have a lexer/parser that correctly parses my input... What do I
> do with it? How do I use the fact that all the tokens in the parser are
> correctly matched to actually do something with the input? I'm dreadfully
> lost on this.
>
> In case anyone's curious, it's a wiki parser.
>
> --
> Support your local gravity testers -- Skydive!
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060425/0c0c73a6/attachment.html
From lstals at swin.edu.au  Mon Apr 24 16:43:21 2006
From: lstals at swin.edu.au (Lucien Stals)
Date: Mon Apr 24 16:43:25 2006
Subject: [antlr-interest] How a rule can containt characters that match
	other rule
In-Reply-To: <198501d60604241537v1c8bf44fs1992c1d18c38cc2f@mail.gmail.com>
References: <198501d60604241537v1c8bf44fs1992c1d18c38cc2f@mail.gmail.com>
Message-ID: <444D6299.2000602@swin.edu.au>

Have you looked at the HTML grammar on the ANTLR site?

http://www.antlr.org/grammar/list

Since wiki markup is similar to HTML, and especially since the example 
you give here *is* HTML, I expect you can find some inspiration from 
looking at an already developed grammar.

Lucien.

pepone pepone wrote:
> Hi all
> 
> I trying to build a Wiki Lexer parser and i don't know how to solve
> this situation
> 
> Here is a sample document
> 
> ---
> <p>Hello world UTF-8</p>
> ---
> 
> ---  Match document begin and document end
> 
> <p> parraf begin
> </p> parraf end
> 
> 
> I have this rules in my parser:
> 
> document
> 	:DOCUMENT^(parraf)+DOCUMENT
> 	;
> 
> parraf
> 	:
> 	(PARRAF_TAG_BEGIN^
> 		(~(OTAG|CTAG))+
> 	PARRAF_TAG_END)
> 	;
> 
> Lexer rules:
> 
> DOCUMENT:
> 	'-''-''-'
> 	;
> 
> PARRAF_TAG_BEGIN:
> 	OTAG P CTAG
> 	;
> 	
> PARRAF_TAG_END:
> 	OTAG SLASH P CTAG
> 	;
> 
> protected OTAG:'<';
> protected CTAG:'>';
> 
> The problem is that when parser found '8' it expect '-'
> 
> how make the parser work in this scenario?
> 
> Thanks
> --
> play tetris http://pepone.on-rez.com/tetris
> run gentoo http://gentoo-notes.blogspot.com/
> 
> 
> 
> 
From parrt at cs.usfca.edu  Mon Apr 24 16:53:06 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Apr 24 16:53:09 2006
Subject: [antlr-interest] calling all ANTLR v3 aficiandos
In-Reply-To: <41fed8f80604241603x266a01b5m73ac73302a38d50a@mail.gmail.com>
References: <735AB18E-4B0A-47B0-9B56-B7D30872E72B@cs.usfca.edu>
	<41fed8f80604241603x266a01b5m73ac73302a38d50a@mail.gmail.com>
Message-ID: <D3A3316C-5F28-4C8A-95E8-5B902B5FFE86@cs.usfca.edu>


On Apr 24, 2006, at 4:03 PM, Prashant Deva wrote:

> In how many months can we expect a final release?
>

I can't see that far ahead ;)  I'm thinking beta will be pretty  
freakin stable though.

Ter
From prashant.deva at gmail.com  Mon Apr 24 17:06:22 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Mon Apr 24 17:06:25 2006
Subject: [antlr-interest] calling all ANTLR v3 aficiandos
In-Reply-To: <D3A3316C-5F28-4C8A-95E8-5B902B5FFE86@cs.usfca.edu>
References: <735AB18E-4B0A-47B0-9B56-B7D30872E72B@cs.usfca.edu>
	<41fed8f80604241603x266a01b5m73ac73302a38d50a@mail.gmail.com>
	<D3A3316C-5F28-4C8A-95E8-5B902B5FFE86@cs.usfca.edu>
Message-ID: <41fed8f80604241706u12cba973x1eb8a0774a199ad1@mail.gmail.com>

Are we going to include the incremental parser in the beta or will that be
done later?

On 4/25/06, Terence Parr <parrt@cs.usfca.edu> wrote:
>
>
> On Apr 24, 2006, at 4:03 PM, Prashant Deva wrote:
>
> > In how many months can we expect a final release?
> >
>
> I can't see that far ahead ;)  I'm thinking beta will be pretty
> freakin stable though.
>
> Ter
>



--
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060425/2eefa3cd/attachment.html
From lstals at swin.edu.au  Mon Apr 24 17:07:24 2006
From: lstals at swin.edu.au (Lucien Stals)
Date: Mon Apr 24 17:07:32 2006
Subject: [antlr-interest] Stupid question...
In-Reply-To: <adc59ce70604241623k2bbddb98x1f0475d163dca19e@mail.gmail.com>
References: <adc59ce70604241623k2bbddb98x1f0475d163dca19e@mail.gmail.com>
Message-ID: <444D683C.2080107@swin.edu.au>

Why did you write it? Doesn't that kind of answer your question?

If you wrote it just for the practice, then you can pat yourself on the 
back for a job well done and move onto the next project.

Or did you write it for a specific purpose? If so, what?

Lucien.

Erik Forbes wrote:
> Okay, this may seem like a stupid question, but...
>  
> Now that I have a lexer/parser that correctly parses my input... What do 
> I do with it? How do I use the fact that all the tokens in the parser 
> are correctly matched to actually do something with the input? I'm 
> dreadfully lost on this.
>  
> In case anyone's curious, it's a wiki parser.
> 
> -- 
> Support your local gravity testers -- Skydive!
> 
> 
> ------------------------------------------------------------------------
> 
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.1.385 / Virus Database: 268.4.5/322 - Release Date: 22/04/2006
From parrt at cs.usfca.edu  Mon Apr 24 17:24:37 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Apr 24 17:24:42 2006
Subject: [antlr-interest] calling all ANTLR v3 aficiandos
In-Reply-To: <41fed8f80604241706u12cba973x1eb8a0774a199ad1@mail.gmail.com>
References: <735AB18E-4B0A-47B0-9B56-B7D30872E72B@cs.usfca.edu>
	<41fed8f80604241603x266a01b5m73ac73302a38d50a@mail.gmail.com>
	<D3A3316C-5F28-4C8A-95E8-5B902B5FFE86@cs.usfca.edu>
	<41fed8f80604241706u12cba973x1eb8a0774a199ad1@mail.gmail.com>
Message-ID: <A5C90918-6134-4A55-9AB9-015AD5CAD89D@cs.usfca.edu>


On Apr 24, 2006, at 5:06 PM, Prashant Deva wrote:

> Are we going to include the incremental parser in the beta or will  
> that be done later?

We should be able to get that in :)  You and I should be able to  
finish off the algorithm soon.

Ter
From pepone.onrez at gmail.com  Mon Apr 24 17:27:59 2006
From: pepone.onrez at gmail.com (pepone pepone)
Date: Mon Apr 24 17:28:04 2006
Subject: [antlr-interest] How a rule can containt characters that match
	other rule
In-Reply-To: <444D6299.2000602@swin.edu.au>
References: <198501d60604241537v1c8bf44fs1992c1d18c38cc2f@mail.gmail.com>
	<444D6299.2000602@swin.edu.au>
Message-ID: <198501d60604241727t2cf09161o43ae148db872f678@mail.gmail.com>

Hi Lucien

I read html.g but i can found the answer to my troubel

Expecialy i don't understand how the PCDATA rule works, and what means
the : before '\r''\n'

PCDATA
       :       (
                       options {
                               generateAmbigWarnings=false;
                       }
               :       '\r' '\n'               {newline();}
               |       '\r'                    {newline();}
               |       '\n'                    {newline();}
               |       ~('<'|'\n'|'\r'|'"'|'>')
               )+
       ;

if i build a rule as PCDATA for my gramar, must i negate all
characters that are th

On 4/25/06, Lucien Stals <lstals@swin.edu.au> wrote:
> Have you looked at the HTML grammar on the ANTLR site?
>
> http://www.antlr.org/grammar/list
>
> Since wiki markup is similar to HTML, and especially since the example
> you give here *is* HTML, I expect you can find some inspiration from
> looking at an already developed grammar.
>
> Lucien.
>
> pepone pepone wrote:
> > Hi all
> >
> > I trying to build a Wiki Lexer parser and i don't know how to solve
> > this situation
> >
> > Here is a sample document
> >
> > ---
> > <p>Hello world UTF-8</p>
> > ---
> >
> > ---  Match document begin and document end
> >
> > <p> parraf begin
> > </p> parraf end
> >
> >
> > I have this rules in my parser:
> >
> > document
> >       :DOCUMENT^(parraf)+DOCUMENT
> >       ;
> >
> > parraf
> >       :
> >       (PARRAF_TAG_BEGIN^
> >               (~(OTAG|CTAG))+
> >       PARRAF_TAG_END)
> >       ;
> >
> > Lexer rules:
> >
> > DOCUMENT:
> >       '-''-''-'
> >       ;
> >
> > PARRAF_TAG_BEGIN:
> >       OTAG P CTAG
> >       ;
> >
> > PARRAF_TAG_END:
> >       OTAG SLASH P CTAG
> >       ;
> >
> > protected OTAG:'<';
> > protected CTAG:'>';
> >
> > The problem is that when parser found '8' it expect '-'
> >
> > how make the parser work in this scenario?
> >
> > Thanks
> > --
> > play tetris http://pepone.on-rez.com/tetris
> > run gentoo http://gentoo-notes.blogspot.com/
> >
> >
> >
> >
>


--
play tetris http://pepone.on-rez.com/tetris
run gentoo http://gentoo-notes.blogspot.com/
From prashant.deva at gmail.com  Mon Apr 24 17:35:30 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Mon Apr 24 17:35:35 2006
Subject: [antlr-interest] calling all ANTLR v3 aficiandos
In-Reply-To: <A5C90918-6134-4A55-9AB9-015AD5CAD89D@cs.usfca.edu>
References: <735AB18E-4B0A-47B0-9B56-B7D30872E72B@cs.usfca.edu>
	<41fed8f80604241603x266a01b5m73ac73302a38d50a@mail.gmail.com>
	<D3A3316C-5F28-4C8A-95E8-5B902B5FFE86@cs.usfca.edu>
	<41fed8f80604241706u12cba973x1eb8a0774a199ad1@mail.gmail.com>
	<A5C90918-6134-4A55-9AB9-015AD5CAD89D@cs.usfca.edu>
Message-ID: <41fed8f80604241735v563d33fn5072d8b4d731776a@mail.gmail.com>

> We should be able to get that in :)  You and I should be able to
> finish off the algorithm soon.


Yup. Shouldnt take too long, since I have already implemented it once in AS
;)

PRASHANT
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060425/b57c1d3f/attachment.html
From pepone.onrez at gmail.com  Mon Apr 24 17:41:20 2006
From: pepone.onrez at gmail.com (pepone pepone)
Date: Mon Apr 24 17:41:23 2006
Subject: [antlr-interest] How a rule can containt characters that match
	other rule
In-Reply-To: <198501d60604241727t2cf09161o43ae148db872f678@mail.gmail.com>
References: <198501d60604241537v1c8bf44fs1992c1d18c38cc2f@mail.gmail.com>
	<444D6299.2000602@swin.edu.au>
	<198501d60604241727t2cf09161o43ae148db872f678@mail.gmail.com>
Message-ID: <198501d60604241741i18c4ca49re1ec1d5ab1f0f4b1@mail.gmail.com>

//the mail isn't complete i append here the end of the phrase

if i build a rule as PCDATA for my gramar, must i negate all
characters that are the begin of other token, is this the trick or i'm
missing samething?

On 4/25/06, pepone pepone <pepone.onrez@gmail.com> wrote:
> Hi Lucien
>
> I read html.g but i can found the answer to my troubel
>
> Expecialy i don't understand how the PCDATA rule works, and what means
> the : before '\r''\n'
>
> PCDATA
>        :       (
>                        options {
>                                generateAmbigWarnings=false;
>                        }
>                :       '\r' '\n'               {newline();}
>                |       '\r'                    {newline();}
>                |       '\n'                    {newline();}
>                |       ~('<'|'\n'|'\r'|'"'|'>')
>                )+
>        ;
>
> if i build a rule as PCDATA for my gramar, must i negate all
> characters that are th
>
> On 4/25/06, Lucien Stals <lstals@swin.edu.au> wrote:
> > Have you looked at the HTML grammar on the ANTLR site?
> >
> > http://www.antlr.org/grammar/list
> >
> > Since wiki markup is similar to HTML, and especially since the example
> > you give here *is* HTML, I expect you can find some inspiration from
> > looking at an already developed grammar.
> >
> > Lucien.
> >
> > pepone pepone wrote:
> > > Hi all
> > >
> > > I trying to build a Wiki Lexer parser and i don't know how to solve
> > > this situation
> > >
> > > Here is a sample document
> > >
> > > ---
> > > <p>Hello world UTF-8</p>
> > > ---
> > >
> > > ---  Match document begin and document end
> > >
> > > <p> parraf begin
> > > </p> parraf end
> > >
> > >
> > > I have this rules in my parser:
> > >
> > > document
> > >       :DOCUMENT^(parraf)+DOCUMENT
> > >       ;
> > >
> > > parraf
> > >       :
> > >       (PARRAF_TAG_BEGIN^
> > >               (~(OTAG|CTAG))+
> > >       PARRAF_TAG_END)
> > >       ;
> > >
> > > Lexer rules:
> > >
> > > DOCUMENT:
> > >       '-''-''-'
> > >       ;
> > >
> > > PARRAF_TAG_BEGIN:
> > >       OTAG P CTAG
> > >       ;
> > >
> > > PARRAF_TAG_END:
> > >       OTAG SLASH P CTAG
> > >       ;
> > >
> > > protected OTAG:'<';
> > > protected CTAG:'>';
> > >
> > > The problem is that when parser found '8' it expect '-'
> > >
> > > how make the parser work in this scenario?
> > >
> > > Thanks
> > > --
> > > play tetris http://pepone.on-rez.com/tetris
> > > run gentoo http://gentoo-notes.blogspot.com/
> > >
> > >
> > >
> > >
> >
>
>
> --
> play tetris http://pepone.on-rez.com/tetris
> run gentoo http://gentoo-notes.blogspot.com/
>


--
play tetris http://pepone.on-rez.com/tetris
run gentoo http://gentoo-notes.blogspot.com/
From parrt at cs.usfca.edu  Mon Apr 24 19:21:40 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Apr 24 19:21:43 2006
Subject: [antlr-interest] calling all ANTLR v3 aficiandos
In-Reply-To: <41fed8f80604241735v563d33fn5072d8b4d731776a@mail.gmail.com>
References: <735AB18E-4B0A-47B0-9B56-B7D30872E72B@cs.usfca.edu>
	<41fed8f80604241603x266a01b5m73ac73302a38d50a@mail.gmail.com>
	<D3A3316C-5F28-4C8A-95E8-5B902B5FFE86@cs.usfca.edu>
	<41fed8f80604241706u12cba973x1eb8a0774a199ad1@mail.gmail.com>
	<A5C90918-6134-4A55-9AB9-015AD5CAD89D@cs.usfca.edu>
	<41fed8f80604241735v563d33fn5072d8b4d731776a@mail.gmail.com>
Message-ID: <BB3DBA82-9A12-4A20-8F17-2A4E6D5933A7@cs.usfca.edu>


On Apr 24, 2006, at 5:35 PM, Prashant Deva wrote:

>
> We should be able to get that in :)  You and I should be able to
> finish off the algorithm soon.
>
> Yup. Shouldnt take too long, since I have already implemented it  
> once in AS ;)
>

Yep.  We're using same idea but going to reuse the memoization  
facility :)
Ter
From pepone.onrez at gmail.com  Mon Apr 24 20:20:36 2006
From: pepone.onrez at gmail.com (pepone pepone)
Date: Mon Apr 24 20:20:40 2006
Subject: [antlr-interest] to antlr experts, is this posible
Message-ID: <198501d60604242020o6c7070a0rfaf4592557631be7@mail.gmail.com>

can i have all this sentences as valid

sentence_1
---
<p>this is a paragraph [[ --- </p>
---

sentence_2
---
<p>[[www.google.com|this ---> is a link inside a paragrph</p>



//Parser rules

document: DOC_TAG (paragraph)* DOC_TAG;

paragraph: OPARA PCDATA|wiki CPARA;

wiki: OWIKI WORD (SEPARATOR WORD)? CWIKI

//Lexer rules

DOC_TAG:"---";

OPARA:<p>;
CPARA:</p>;

OWIKI:"[[";

CWIKI:"]]";

SEPARATOR:'|';

WORD: ('a'...'z')+


how define PCDATA to match both senteces, if found "[[" but not "]]"
don't call wiki and, ignore "---" inside paragraph or wiki


Thanks

--
play tetris http://pepone.on-rez.com/tetris
run gentoo http://gentoo-notes.blogspot.com/
From mail at martin-probst.com  Tue Apr 25 06:32:30 2006
From: mail at martin-probst.com (Martin Probst)
Date: Tue Apr 25 06:32:35 2006
Subject: [antlr-interest] Stupid question...
In-Reply-To: <adc59ce70604241623k2bbddb98x1f0475d163dca19e@mail.gmail.com>
References: <adc59ce70604241623k2bbddb98x1f0475d163dca19e@mail.gmail.com>
Message-ID: <D3A183C5-FB0E-4BF4-9A1C-888F04E6600C@martin-probst.com>

There are generally two approaches, one is to have the Grammar create  
an AST - abstract syntax tree - while parsing the source and walk  
that tree afterwards. The other one is called syntax directed  
translation if I'm not mistaken and means that you write actions into  
the grammar ( the {} blocks) that handle the input.

Martin

Am 25.04.2006 um 01:23 schrieb Erik Forbes:

> Okay, this may seem like a stupid question, but...
>
> Now that I have a lexer/parser that correctly parses my input...  
> What do I do with it? How do I use the fact that all the tokens in  
> the parser are correctly matched to actually do something with the  
> input? I'm dreadfully lost on this.
>
> In case anyone's curious, it's a wiki parser.
>
> -- 
> Support your local gravity testers -- Skydive!

From kroepke at dolphin-services.de  Tue Apr 25 06:34:11 2006
From: kroepke at dolphin-services.de (Kay Roepke)
Date: Tue Apr 25 06:34:21 2006
Subject: [antlr-interest] calling all ANTLR v3 aficiandos
In-Reply-To: <BB3DBA82-9A12-4A20-8F17-2A4E6D5933A7@cs.usfca.edu>
References: <735AB18E-4B0A-47B0-9B56-B7D30872E72B@cs.usfca.edu>
	<41fed8f80604241603x266a01b5m73ac73302a38d50a@mail.gmail.com>
	<D3A3316C-5F28-4C8A-95E8-5B902B5FFE86@cs.usfca.edu>
	<41fed8f80604241706u12cba973x1eb8a0774a199ad1@mail.gmail.com>
	<A5C90918-6134-4A55-9AB9-015AD5CAD89D@cs.usfca.edu>
	<41fed8f80604241735v563d33fn5072d8b4d731776a@mail.gmail.com>
	<BB3DBA82-9A12-4A20-8F17-2A4E6D5933A7@cs.usfca.edu>
Message-ID: <B1A5C493-F889-4827-983D-7C8D3B5D6A16@dolphin-services.de>


On 25. Apr 2006, at 4:21 Uhr, Terence Parr wrote:

> Yep.  We're using same idea but going to reuse the memoization  
> facility :)
> Ter

Guys,

this is teasing...didn't your respective mothers tell you that this  
isn't nice?  ;)

-k
From erikforbes at gmail.com  Tue Apr 25 07:52:20 2006
From: erikforbes at gmail.com (Erik Forbes)
Date: Tue Apr 25 07:52:23 2006
Subject: [antlr-interest] Stupid question...
In-Reply-To: <D3A183C5-FB0E-4BF4-9A1C-888F04E6600C@martin-probst.com>
References: <adc59ce70604241623k2bbddb98x1f0475d163dca19e@mail.gmail.com>
	<D3A183C5-FB0E-4BF4-9A1C-888F04E6600C@martin-probst.com>
Message-ID: <adc59ce70604250752p51dfe07yd8e234fe7e80f15c@mail.gmail.com>

Gotcha. :)

I'm probably going to go with the latter approach - syntax directed, that
is. I already have a backend system that I'm going to use, I just wanted an
ANTLR-driven parser to parse the input.

Thanks for the help, everyone. I appreciate it. :)


On 4/25/06, Martin Probst <mail@martin-probst.com> wrote:
>
> There are generally two approaches, one is to have the Grammar create
> an AST - abstract syntax tree - while parsing the source and walk
> that tree afterwards. The other one is called syntax directed
> translation if I'm not mistaken and means that you write actions into
> the grammar ( the {} blocks) that handle the input.
>
> Martin
>
> Am 25.04.2006 um 01:23 schrieb Erik Forbes:
>
> > Okay, this may seem like a stupid question, but...
> >
> > Now that I have a lexer/parser that correctly parses my input...
> > What do I do with it? How do I use the fact that all the tokens in
> > the parser are correctly matched to actually do something with the
> > input? I'm dreadfully lost on this.
> >
> > In case anyone's curious, it's a wiki parser.
> >
> > --
> > Support your local gravity testers -- Skydive!
>
>


--
Support your local gravity testers -- Skydive!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060425/f4bc26e6/attachment.html
From parrt at cs.usfca.edu  Tue Apr 25 10:08:10 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Apr 25 10:08:14 2006
Subject: [antlr-interest] calling all ANTLR v3 aficiandos
In-Reply-To: <B1A5C493-F889-4827-983D-7C8D3B5D6A16@dolphin-services.de>
References: <735AB18E-4B0A-47B0-9B56-B7D30872E72B@cs.usfca.edu>
	<41fed8f80604241603x266a01b5m73ac73302a38d50a@mail.gmail.com>
	<D3A3316C-5F28-4C8A-95E8-5B902B5FFE86@cs.usfca.edu>
	<41fed8f80604241706u12cba973x1eb8a0774a199ad1@mail.gmail.com>
	<A5C90918-6134-4A55-9AB9-015AD5CAD89D@cs.usfca.edu>
	<41fed8f80604241735v563d33fn5072d8b4d731776a@mail.gmail.com>
	<BB3DBA82-9A12-4A20-8F17-2A4E6D5933A7@cs.usfca.edu>
	<B1A5C493-F889-4827-983D-7C8D3B5D6A16@dolphin-services.de>
Message-ID: <3D454007-1458-4AFE-886C-11118A725262@cs.usfca.edu>


On Apr 25, 2006, at 6:34 AM, Kay Roepke wrote:

>
> On 25. Apr 2006, at 4:21 Uhr, Terence Parr wrote:
>
>> Yep.  We're using same idea but going to reuse the memoization  
>> facility :)
>> Ter
>
> Guys,
>
> this is teasing...didn't your respective mothers tell you that this  
> isn't nice?  ;)

Ha!!! ;)  Just answer the question: "how can you return a recursive- 
descent parser to an arbitrary state in a language w/o  
continuations"?  Prashant's answer was simple and beautiful...he  
wouldn't tell me more than a hint, but it was the key insight and two  
days later I had a similar answer to his.  Damn that dude is smart!   
Anyhoo, the cool thing about v3 is that we'll reuse the existing  
facilities. :)

Ter ;)
From parrt at cs.usfca.edu  Tue Apr 25 19:21:56 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Apr 25 19:21:59 2006
Subject: [antlr-interest] Aho (of dragon book) discusses ANTLR in class
Message-ID: <97EF2CD1-517C-4026-A8EE-E0DE547F0FBD@cs.usfca.edu>

Hi,

Alfred Aho of dragon book fame has some nice slides on ANTLR for his  
course on programming languages and translators, though it looks like  
one of the TAs does the teaching of that lecture.  Oh well, I sent  
him a nice note anyhoo. ;)

Course:

	http://www1.cs.columbia.edu/~aho/cs4115/

Slides:

	http://www1.cs.columbia.edu/~aho/cs4115/lectures/06-02-13_ANTLR.ppt

Ter
From hbuch06 at hotmail.com  Tue Apr 25 19:37:19 2006
From: hbuch06 at hotmail.com (Hitakshi Buch)
Date: Tue Apr 25 19:37:23 2006
Subject: [antlr-interest] How to read input from a file?
Message-ID: <BAY101-W5C2301EEE8C17211208F6BDBC0@phx.gbl>

Ignoring whitespace was it.  
 
Mike, Thanks so much for your help and prompt responses!


Subject: RE: [antlr-interest] How to read input from a file?Date: Fri, 21 Apr 2006 22:35:05 +0100From: mike.quilleash@azuresolutions.comTo: hbuch06@hotmail.com; antlr-interest@antlr.org



I think the lexer you have configured is considering whitespace to be a "real" token to be parsed.  I'm guessing you just want to skip these, but at the moment because they are not included in the parser it reads one DEFAULT_QUOTE rule and then finds a whitespace token and gives up.
 
First thing is put EOF token at the end of your start rule.  This will assert that there is nothing between the end of file and what was correctly parsed.  By default ANTLR will complete parsing and then just discard anything up to the end of file so you have to explicitly define the EOF token at the end of your start rule to make sure nothing has been missed.
 
Here's a typical whitespace lexer rule..
 
WS: ( ' '    | '\t'    | '\r' ( '\n' )? { newline(); }    | '\n' { newline(); }    ) { $setType( Token.SKIP ); }  ;
The most important type is 
 
$setType( Token.SKIP );
 
which says, "When this rule matches I want the token to be discarded".  As in it won't get passed to the parser at all, just thrown away.  If you want the LINETERMINATOR token to be parsed correctly rather than just thrown away then include it in your parser rules after the DEFAULT_QUOTE but inside the (...)+


From: Hitakshi Buch [mailto:hbuch06@hotmail.com] Sent: 21 April 2006 21:45To: Mike Quilleash; antlr-interest@antlr.orgSubject: RE: [antlr-interest] How to read input from a file?

I tried the following start rule, but it still does not work:
 
startRule
 : (n:DEFAULT_QUOTE        {System.out.println("Matched default quote with " + n.getText());})+    ;I tried both + and *.  Am I doing it in the wrong place?
 
Thanks again for your help.


Subject: RE: [antlr-interest] How to read input from a file?Date: Fri, 21 Apr 2006 21:18:35 +0100From: mike.quilleash@azuresolutions.comTo: hbuch06@hotmail.com; antlr-interest@antlr.org


Your startRule doesn't define any sort of one-or-more or zero-or-more construct so it will only parse the first line in the file then stop.  You need a (...)* or (...)+ wrapper in your startRule.


From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Hitakshi BuchSent: 21 April 2006 21:13To: antlr-interest@antlr.orgSubject: [antlr-interest] How to read input from a file?

I want to read a series for strings from a file and parse them.  My program only parses the first line in the input file though.  How can I have it parse the whole file?
 
My input file contents:
 
'Hello''ORACLE.dbs''Jackie''s raincoat''09-MAR-98'
 
I'm trying to read all strings that begin and end with a quote (').  So, my output should consist of the following:
Hello
ORACLE.dbs
Jackie's raincoat
09-MAR-98
 
INSTEAD, I only get the following:
Hello
 
My Main file looks like the following:
 
import java.io.*;
class Main {    public static void main(String[] args) {        try {            L lexer = new L(new FileInputStream("input2.inp"));            P parser = new P(lexer);            parser.setFilename("input2.inp");            parser.startRule();        } catch(Exception e) {            System.err.println("exception: "+e);        }    }
 
My .g file looks like:
 
class P extends Parser;
startRule
 : n:DEFAULT_QUOTE        {System.out.println("Matched default quote with: "+n.getText());}    ;
class L extends Lexer;
options { k=2;}
// one-or-more letters followed by a newlineDEFAULT_QUOTE:   ( '\''!                    (~('\'') )+                    '\''! )    ;
protectedLINETERMINATOR    :   '\r' '\n'   // DOS    |   '\n'        // UNIX    ;    WHITESPACE : LINETERMINATOR  |  ' ' | '\t' | '\f' ;}
 
Any help will be greatly appreciated.  Thank you.




_________________________________________________________________
Join the next generation of Hotmail and you could win the adventure of a lifetime
http://www.imagine-msn.com/minisites/sweepstakes/mail/register.aspx
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060425/8bbaa1a4/attachment.html
From Stritzel.Nils at infineon.com  Wed Apr 26 02:54:45 2006
From: Stritzel.Nils at infineon.com (Stritzel.Nils@infineon.com)
Date: Wed Apr 26 02:55:10 2006
Subject: [antlr-interest] Question concerning writing a TreeParser rule
Message-ID: <0563741883A49249B93A75DF219F8C220149ACCA@SZVSE201>

Hi,

In my parser I have the following rule:

batchExprList 
	: 
	batchExpr (SEP^ batchExpr)*	
	;

Which describes a list of expressions separated by "\".


I could need some advice or pointer to the right place in the
documentation to figure out, how to implement a TreeParser rule that
returns an Array or a ArrayList containing the evaluated batchExpr (i.e.
batchExprList returns [ArrayList r] ).
Thanks,

Nils
From Yassin.Chkouri at imag.fr  Wed Apr 26 03:03:46 2006
From: Yassin.Chkouri at imag.fr (Yassin.Chkouri@imag.fr)
Date: Wed Apr 26 03:03:51 2006
Subject: [antlr-interest] Generate EMF
In-Reply-To: <1145982612.5566.11.camel@localhost.localdomain>
References: <1145870435.444c9863e4b12@webmail.imag.fr>
	<686184B7-FFFC-4E12-B704-2BB725F5A194@martin-probst.com>
	<1145982612.5566.11.camel@localhost.localdomain>
Message-ID: <1146045826.444f458231ec6@webmail.imag.fr>

Hi,
This is my program in ANTLR and i want te generate my EMF model. 

I have already create a model EMF for that I use the FACTORY to called the
components.

when I compile my grammar I don't find errors but  it gen?re nothing, it is
necessary that I add a function in Main or ..??? 

Grammar in ANTLR
*************************************************************************
header 
{
package ujf.verimag.bip.parser;
	

}

{	
import ujf.verimag.bip.component.*;
import ujf.verimag.bip.behavior.*;
import ujf.verimag.bipmodel.bip.*;
	
import ujf.verimag.bip.connector.*;
import ujf.verimag.bip.component.ComponentFactory;

import org.eclipse.emf.common.util.EList;
import java.util.Vector;
import java.util.Iterator;
import java.util.Set;
import java.util.HashSet;
import org.eclipse.emf.ecore.util.EcoreUtil;
import org.eclipse.emf.ecore.resource.Resource;
import org.eclipse.core.resources.IResource; 

import antlr.TokenStreamRecognitionException;
	
}
 
 class BipTree extends TreeParser;

options {
    buildAST=true;
	
	defaultErrorHandler=false;
}
{
protected BipFactory BipF = BipFactory.eINSTANCE;
protected ComponentFactory ComponentF = ComponentFactory.eINSTANCE;
protected BehaviorFactory BehaviorF = BehaviorFactory.eINSTANCE;


}
model returns [Model bipModel = BipF.createModel()]
    {
    	Component compDef;
    }
	:	(compDef[bipModel])+
	;
    


compDef [Model bipModel]
    :  #(COMPONENT   id:IDENTIFIER body  END)
	{
		Component cf = ComponentF.createComponent();
		cf.setName(id.getText());
		bipModel.getCompList().add(cf);
	}
	
	
	
    ;
    
body :  IDENTIFIER;


class BipParser extends Parser;
options {
    buildAST=true;
	k=4;
	codeGenBitsetTestThreshold=999;
	defaultErrorHandler=false;
}

model  
:	
	(fileItem )+
	EOF
	
;

fileItem 
    :  compDef
      | globalDef
       
;


compDef : 	COMPONENT^ 	IDENTIFIER 	 body  END  
;
		
globalDef : IDENTIFIER;

body :  IDENTIFIER ; //behavior;


class BipLexer extends Lexer;
tokens 
{
COMPONENT="component";
END="end";
BEHAVIOR="behavior";
STATE="state";
WITH="with";
BIPSPEC;
}

WS	:	(' '
	|	'\t'
	|	'\n'
	|	'\r')
		{ _ttype = Token.SKIP; }
	;

LPAREN:	'('
	;

RPAREN:	')'
	;

STAR:	'*'
	;

PLUS:	'+'
	;

SEMI:	';'
	;

INT	:	('0'..'9')+
	;
	
IDENTIFIER
  options {testLiterals=true;}
  : ('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
; 



Quoting Marc Pantel <Marc.Pantel@enseeiht.fr>:

> Hi,
> 
> 2 answers were given on the TOPCASED mailing-list (before the question
> was issued a second time), they were not forwarded to the antlr mailing
> list as it is not really ANTLR related. I will summarise for the ANTLR
> community :
> 
> EMF = Eclipse Modelling Framework, an MDE toolkit in Eclipse. EMF takes
> as input a meta-model expressed either in the ECORE meta-modelling
> language, in the UML2 class diagram (ECORE is a subset of UML2 class
> diagram), in JMI (Java Metadata Interface) with specific tags or in SXD
> (XML Schema) and produces Java classes (in an 3 separate Eclipse plugin)
> for : 
> 
> - Model creation, XMI and XML reader and writer, model visitor and
> listener,
> - Hierarchical (? la XML) model editor.
> 
> It allows to manipulate models (that is abstract syntax graph).
> 
> If you want to add a concrete syntax, you must use additional tools to
> manage the relation between the concrete and abstract syntaxes :
> 
> - graphical syntax : GMF, TOPCASED, TIGER, ... which allows to
> description the graphical syntax and its relation to the abstract syntax
> and generates a graphical editor for the EMF generated Java classes ;
> 
> - textual syntax : currently some tools are being written in the AMMA
> platform, the KERMETA project and the TOPCASED project but currently, to
> my knowledge, nothing is available for external use. Therefore, you need
> to write your own concrete grammar and attributed semantics in order to
> parse a concrete textual model and produce an abstract model using the
> EMF generated classes in the ANTLR attributed grammar.
> 
> I hope my comments are precise enough. Ask for more if needed.
> 
> Marc Pantel,
> TOPCASED project
> 
>   Le lundi 24 avril 2006 ? 14:13 +0200, Martin Probst a ?crit :
> > Hi,
> > 
> > I notice that this is the second time you ask your question and no  
> > one answered the first time. This might be because no one understands  
> > what you're asking about. Maybe you could give a hint what a EMF is  
> > and in what way it might correspond to a parsed piece of code?
> > 
> > ANTLR does not include any support for anything called "EMF" as far  
> > as I know, so it's definitely not supported out of the box. It might  
> > be easy to hack in yourself, though.
> > 
> > Martin
> > 
> > Am 24.04.2006 um 11:20 schrieb Yassin.Chkouri@imag.fr:
> > 
> > >
> > >
> > >
> > > Hi,
> > >  I am using ANTLR for parsing a language and build
> > >  the corresponding EMF. Is it possible to directly generate
> > >  the EMF from the semantic actions in ANTLR or is it necessary
> > >  to use the intermediate AST generated by ANTLR ?
> > >
> > >  Thanks,
> > >
> > >
> > > -------------------------------------------------
> > > envoy? via Webmail/IMAG !
> > >
> > >
> > 
> > 
> > _______________________________________________
> > Topcased-mm-users mailing list
> > Topcased-mm-users@lists.gforge.enseeiht.fr
> > http://lists.gforge.enseeiht.fr/mailman/listinfo/topcased-mm-users
> 
> 
> 
> 




-------------------------------------------------
envoy? via Webmail/IMAG !

From mail at martin-probst.com  Wed Apr 26 05:41:39 2006
From: mail at martin-probst.com (Martin Probst)
Date: Wed Apr 26 05:41:46 2006
Subject: [antlr-interest] Question concerning writing a TreeParser rule
In-Reply-To: <0563741883A49249B93A75DF219F8C220149ACCA@SZVSE201>
References: <0563741883A49249B93A75DF219F8C220149ACCA@SZVSE201>
Message-ID: <8032D33B-30C4-4024-889B-B3004B74B971@martin-probst.com>

Hi,

it's probably going to be easier if you modify your rule like this:

batchExprList {
   boolean multi = false;
}	:
	batchExpr (SEP! batchExpr { multi = true; })*	
	{ if (multi) ## = #(#[SEP], ##); }
	;

This gives you the follwing tree:
                     SEP
	/		|		\
       ...              ...		...

instead of
		SEP
          /              \
       SEP        ....
   /       \
...     ....

This way you can have this tree parser rule:

list: #( SEP ( x=expr  { myarraylist.add(x); } )* )

Otherwise you'd have to have a member variable for the tree parser  
(current list root or something), check for it's existence, delete it  
if necessary etc. - this will make it a lot easier.

Martin
From vidar at hawkis.com  Wed Apr 26 07:40:26 2006
From: vidar at hawkis.com (Vidar =?iso-8859-1?q?H=E5kestad?=)
Date: Wed Apr 26 07:40:34 2006
Subject: [antlr-interest] Generate EMF
In-Reply-To: <1146045826.444f458231ec6@webmail.imag.fr>
References: <1145870435.444c9863e4b12@webmail.imag.fr>
	<1145982612.5566.11.camel@localhost.localdomain>
	<1146045826.444f458231ec6@webmail.imag.fr>
Message-ID: <200604261640.26842.vidar@hawkis.com>

In an action for the compDef production try 

compDef [Model bipModel]
    :  #(COMPONENT   id:IDENTIFIER body  END)
	{
		Component cf = ComponentF.createComponent();
		cf.setName(id.getText());
		bipModel.getCompList().add(cf);

		// Show a string representation of your AST:
		//
		System.out.println(#compDef.toStringTree());
	}

There are other tools (visitor patterns) that can be used for traversing the 
syntax tree, too. See documentation.

In the code where you instanciate the lexer and parser (and hand over some 
text to be parsed), you typically have code like:

BipTree bipTree = new BipTree(
                              new BipLexer(
                                  new FileReader("/file/to/be/parsed.EMF")));
Then you can do:
  AST ast = bipTree.getAST(); // To retrieve the syntax tree.


Regards
Hawkis

On Wednesday 26 April 2006 12:03, Yassin.Chkouri@imag.fr wrote:
> Hi,
> This is my program in ANTLR and i want te generate my EMF model.
>
> I have already create a model EMF for that I use the FACTORY to called the
> components.
>
> when I compile my grammar I don't find errors but  it gen?re nothing, it is
> necessary that I add a function in Main or ..???
>
> Grammar in ANTLR
> *************************************************************************
> header
> {
> package ujf.verimag.bip.parser;
>
>
> }
>
> {
> import ujf.verimag.bip.component.*;
> import ujf.verimag.bip.behavior.*;
> import ujf.verimag.bipmodel.bip.*;
>
> import ujf.verimag.bip.connector.*;
> import ujf.verimag.bip.component.ComponentFactory;
>
> import org.eclipse.emf.common.util.EList;
> import java.util.Vector;
> import java.util.Iterator;
> import java.util.Set;
> import java.util.HashSet;
> import org.eclipse.emf.ecore.util.EcoreUtil;
> import org.eclipse.emf.ecore.resource.Resource;
> import org.eclipse.core.resources.IResource;
>
> import antlr.TokenStreamRecognitionException;
>
> }
>
>  class BipTree extends TreeParser;
>
> options {
>     buildAST=true;
>
> 	defaultErrorHandler=false;
> }
> {
> protected BipFactory BipF = BipFactory.eINSTANCE;
> protected ComponentFactory ComponentF = ComponentFactory.eINSTANCE;
> protected BehaviorFactory BehaviorF = BehaviorFactory.eINSTANCE;
>
>
> }
> model returns [Model bipModel = BipF.createModel()]
>     {
>     	Component compDef;
>     }
>
> 	:	(compDef[bipModel])+
>
> 	;
>
>
>
> compDef [Model bipModel]
>
>     :  #(COMPONENT   id:IDENTIFIER body  END)
>
> 	{
> 		Component cf = ComponentF.createComponent();
> 		cf.setName(id.getText());
> 		bipModel.getCompList().add(cf);
> 	}
>
>
>
>     ;
>
> body :  IDENTIFIER;
>
>
> class BipParser extends Parser;
> options {
>     buildAST=true;
> 	k=4;
> 	codeGenBitsetTestThreshold=999;
> 	defaultErrorHandler=false;
> }
>
> model
>
> 	(fileItem )+
> 	EOF
>
> ;
>
> fileItem
>
>     :  compDef
>     :
>       | globalDef
>
> ;
>
>
> compDef : 	COMPONENT^ 	IDENTIFIER 	 body  END
> ;
>
> globalDef : IDENTIFIER;
>
> body :  IDENTIFIER ; //behavior;
>
>
> class BipLexer extends Lexer;
> tokens
> {
> COMPONENT="component";
> END="end";
> BEHAVIOR="behavior";
> STATE="state";
> WITH="with";
> BIPSPEC;
> }
>
> WS	:	(' '
>
> 	|	'\t'
> 	|	'\n'
> 	|	'\r')
>
> 		{ _ttype = Token.SKIP; }
> 	;
>
> LPAREN:	'('
> 	;
>
> RPAREN:	')'
> 	;
>
> STAR:	'*'
> 	;
>
> PLUS:	'+'
> 	;
>
> SEMI:	';'
> 	;
>
> INT	:	('0'..'9')+
> 	;
>
> IDENTIFIER
>   options {testLiterals=true;}
>
>   : ('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
>
> ;
>
> Quoting Marc Pantel <Marc.Pantel@enseeiht.fr>:
> > Hi,
> >
> > 2 answers were given on the TOPCASED mailing-list (before the question
> > was issued a second time), they were not forwarded to the antlr mailing
> > list as it is not really ANTLR related. I will summarise for the ANTLR
> > community :
> >
> > EMF = Eclipse Modelling Framework, an MDE toolkit in Eclipse. EMF takes
> > as input a meta-model expressed either in the ECORE meta-modelling
> > language, in the UML2 class diagram (ECORE is a subset of UML2 class
> > diagram), in JMI (Java Metadata Interface) with specific tags or in SXD
> > (XML Schema) and produces Java classes (in an 3 separate Eclipse plugin)
> > for :
> >
> > - Model creation, XMI and XML reader and writer, model visitor and
> > listener,
> > - Hierarchical (? la XML) model editor.
> >
> > It allows to manipulate models (that is abstract syntax graph).
> >
> > If you want to add a concrete syntax, you must use additional tools to
> > manage the relation between the concrete and abstract syntaxes :
> >
> > - graphical syntax : GMF, TOPCASED, TIGER, ... which allows to
> > description the graphical syntax and its relation to the abstract syntax
> > and generates a graphical editor for the EMF generated Java classes ;
> >
> > - textual syntax : currently some tools are being written in the AMMA
> > platform, the KERMETA project and the TOPCASED project but currently, to
> > my knowledge, nothing is available for external use. Therefore, you need
> > to write your own concrete grammar and attributed semantics in order to
> > parse a concrete textual model and produce an abstract model using the
> > EMF generated classes in the ANTLR attributed grammar.
> >
> > I hope my comments are precise enough. Ask for more if needed.
> >
> > Marc Pantel,
> > TOPCASED project
> >
> >   Le lundi 24 avril 2006 ? 14:13 +0200, Martin Probst a ?crit :
> > > Hi,
> > >
> > > I notice that this is the second time you ask your question and no
> > > one answered the first time. This might be because no one understands
> > > what you're asking about. Maybe you could give a hint what a EMF is
> > > and in what way it might correspond to a parsed piece of code?
> > >
> > > ANTLR does not include any support for anything called "EMF" as far
> > > as I know, so it's definitely not supported out of the box. It might
> > > be easy to hack in yourself, though.
> > >
> > > Martin
> > >
> > > Am 24.04.2006 um 11:20 schrieb Yassin.Chkouri@imag.fr:
> > > > Hi,
> > > >  I am using ANTLR for parsing a language and build
> > > >  the corresponding EMF. Is it possible to directly generate
> > > >  the EMF from the semantic actions in ANTLR or is it necessary
> > > >  to use the intermediate AST generated by ANTLR ?
> > > >
> > > >  Thanks,
> > > >
> > > >
> > > > -------------------------------------------------
> > > > envoy? via Webmail/IMAG !
> > >
> > > _______________________________________________
> > > Topcased-mm-users mailing list
> > > Topcased-mm-users@lists.gforge.enseeiht.fr
> > > http://lists.gforge.enseeiht.fr/mailman/listinfo/topcased-mm-users
>
> -------------------------------------------------
> envoy? via Webmail/IMAG !
From Marc.Pantel at enseeiht.fr  Wed Apr 26 08:04:45 2006
From: Marc.Pantel at enseeiht.fr (Marc Pantel)
Date: Wed Apr 26 08:09:08 2006
Subject: [antlr-interest] Generate EMF
In-Reply-To: <1146045826.444f458231ec6@webmail.imag.fr>
References: <1145870435.444c9863e4b12@webmail.imag.fr>
	<686184B7-FFFC-4E12-B704-2BB725F5A194@martin-probst.com>
	<1145982612.5566.11.camel@localhost.localdomain>
	<1146045826.444f458231ec6@webmail.imag.fr>
Message-ID: <1146063885.10300.14.camel@localhost.localdomain>

Hi,

At a first look, you're on the right way. But you currently only create
a model in memory which must then be written to a file.

I strongly suggest to you to have a look at OSATE AADL plugin that Peter
Feiler told you about in his answer on TOPCASED mailing list. You will
find there an ANTLR grammar which read an AADL text model and build an
AADL EMF model.

Regards,
Marc

Le mercredi 26 avril 2006 ? 12:03 +0200, Yassin.Chkouri@imag.fr a
?crit :
> Hi,
> This is my program in ANTLR and i want te generate my EMF model. 
> 
> I have already create a model EMF for that I use the FACTORY to called the
> components.
> 
> when I compile my grammar I don't find errors but  it gen?re nothing, it is
> necessary that I add a function in Main or ..??? 
> 
> Grammar in ANTLR
> *************************************************************************
> header 
> {
> package ujf.verimag.bip.parser;
> 	
> 
> }
> 
> {	
> import ujf.verimag.bip.component.*;
> import ujf.verimag.bip.behavior.*;
> import ujf.verimag.bipmodel.bip.*;
> 	
> import ujf.verimag.bip.connector.*;
> import ujf.verimag.bip.component.ComponentFactory;
> 
> import org.eclipse.emf.common.util.EList;
> import java.util.Vector;
> import java.util.Iterator;
> import java.util.Set;
> import java.util.HashSet;
> import org.eclipse.emf.ecore.util.EcoreUtil;
> import org.eclipse.emf.ecore.resource.Resource;
> import org.eclipse.core.resources.IResource; 
> 
> import antlr.TokenStreamRecognitionException;
> 	
> }
>  
>  class BipTree extends TreeParser;
> 
> options {
>     buildAST=true;
> 	
> 	defaultErrorHandler=false;
> }
> {
> protected BipFactory BipF = BipFactory.eINSTANCE;
> protected ComponentFactory ComponentF = ComponentFactory.eINSTANCE;
> protected BehaviorFactory BehaviorF = BehaviorFactory.eINSTANCE;
> 
> 
> }
> model returns [Model bipModel = BipF.createModel()]
>     {
>     	Component compDef;
>     }
> 	:	(compDef[bipModel])+
> 	;
>     
> 
> 
> compDef [Model bipModel]
>     :  #(COMPONENT   id:IDENTIFIER body  END)
> 	{
> 		Component cf = ComponentF.createComponent();
> 		cf.setName(id.getText());
> 		bipModel.getCompList().add(cf);
> 	}
> 	
> 	
> 	
>     ;
>     
> body :  IDENTIFIER;
> 
> 
> class BipParser extends Parser;
> options {
>     buildAST=true;
> 	k=4;
> 	codeGenBitsetTestThreshold=999;
> 	defaultErrorHandler=false;
> }
> 
> model  
> :	
> 	(fileItem )+
> 	EOF
> 	
> ;
> 
> fileItem 
>     :  compDef
>       | globalDef
>        
> ;
> 
> 
> compDef : 	COMPONENT^ 	IDENTIFIER 	 body  END  
> ;
> 		
> globalDef : IDENTIFIER;
> 
> body :  IDENTIFIER ; //behavior;
> 
> 
> class BipLexer extends Lexer;
> tokens 
> {
> COMPONENT="component";
> END="end";
> BEHAVIOR="behavior";
> STATE="state";
> WITH="with";
> BIPSPEC;
> }
> 
> WS	:	(' '
> 	|	'\t'
> 	|	'\n'
> 	|	'\r')
> 		{ _ttype = Token.SKIP; }
> 	;
> 
> LPAREN:	'('
> 	;
> 
> RPAREN:	')'
> 	;
> 
> STAR:	'*'
> 	;
> 
> PLUS:	'+'
> 	;
> 
> SEMI:	';'
> 	;
> 
> INT	:	('0'..'9')+
> 	;
> 	
> IDENTIFIER
>   options {testLiterals=true;}
>   : ('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
> ; 
> 
> 
> 
> Quoting Marc Pantel <Marc.Pantel@enseeiht.fr>:
> 
> > Hi,
> > 
> > 2 answers were given on the TOPCASED mailing-list (before the question
> > was issued a second time), they were not forwarded to the antlr mailing
> > list as it is not really ANTLR related. I will summarise for the ANTLR
> > community :
> > 
> > EMF = Eclipse Modelling Framework, an MDE toolkit in Eclipse. EMF takes
> > as input a meta-model expressed either in the ECORE meta-modelling
> > language, in the UML2 class diagram (ECORE is a subset of UML2 class
> > diagram), in JMI (Java Metadata Interface) with specific tags or in SXD
> > (XML Schema) and produces Java classes (in an 3 separate Eclipse plugin)
> > for : 
> > 
> > - Model creation, XMI and XML reader and writer, model visitor and
> > listener,
> > - Hierarchical (? la XML) model editor.
> > 
> > It allows to manipulate models (that is abstract syntax graph).
> > 
> > If you want to add a concrete syntax, you must use additional tools to
> > manage the relation between the concrete and abstract syntaxes :
> > 
> > - graphical syntax : GMF, TOPCASED, TIGER, ... which allows to
> > description the graphical syntax and its relation to the abstract syntax
> > and generates a graphical editor for the EMF generated Java classes ;
> > 
> > - textual syntax : currently some tools are being written in the AMMA
> > platform, the KERMETA project and the TOPCASED project but currently, to
> > my knowledge, nothing is available for external use. Therefore, you need
> > to write your own concrete grammar and attributed semantics in order to
> > parse a concrete textual model and produce an abstract model using the
> > EMF generated classes in the ANTLR attributed grammar.
> > 
> > I hope my comments are precise enough. Ask for more if needed.
> > 
> > Marc Pantel,
> > TOPCASED project
> > 
> >   Le lundi 24 avril 2006 ? 14:13 +0200, Martin Probst a ?crit :
> > > Hi,
> > > 
> > > I notice that this is the second time you ask your question and no  
> > > one answered the first time. This might be because no one understands  
> > > what you're asking about. Maybe you could give a hint what a EMF is  
> > > and in what way it might correspond to a parsed piece of code?
> > > 
> > > ANTLR does not include any support for anything called "EMF" as far  
> > > as I know, so it's definitely not supported out of the box. It might  
> > > be easy to hack in yourself, though.
> > > 
> > > Martin
> > > 
> > > Am 24.04.2006 um 11:20 schrieb Yassin.Chkouri@imag.fr:
> > > 
> > > >
> > > >
> > > >
> > > > Hi,
> > > >  I am using ANTLR for parsing a language and build
> > > >  the corresponding EMF. Is it possible to directly generate
> > > >  the EMF from the semantic actions in ANTLR or is it necessary
> > > >  to use the intermediate AST generated by ANTLR ?
> > > >
> > > >  Thanks,
> > > >
> > > >
> > > > -------------------------------------------------
> > > > envoy? via Webmail/IMAG !
> > > >
> > > >
> > > 
> > > 
> > > _______________________________________________
> > > Topcased-mm-users mailing list
> > > Topcased-mm-users@lists.gforge.enseeiht.fr
> > > http://lists.gforge.enseeiht.fr/mailman/listinfo/topcased-mm-users
> > 
> > 
> > 
> > 
> 
> 
> 
> 
> -------------------------------------------------
> envoy? via Webmail/IMAG !
> 

From parrt at cs.usfca.edu  Wed Apr 26 12:20:03 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Apr 26 12:20:08 2006
Subject: [antlr-interest] AST debug protocol
Message-ID: <325F7771-A268-4AA3-B3DA-ADCFBA46A44A@cs.usfca.edu>

Howdy, updated blog to show ideas for debugging trees.

http://www.antlr.org/blog/antlr3/trees.tml

Ter

From antlr at shmuelhome.mine.nu  Wed Apr 26 15:00:48 2006
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Wed Apr 26 15:01:18 2006
Subject: [antlr-interest] Antlr 3 syntax question
Message-ID: <444FED90.1040107@shmuelhome.mine.nu>

In Antlr2 I was able to change the text of the token stream with code 
like this

ESCAPE
     :    '\\'
          ( '\\' { $setText("\\"); }
          | '"' { $setText("\""); }
          )
     ;

What is the equivalent in Antlr 3?


-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.385 / Virus Database: 268.4.6/324 - Release Date: 4/25/2006



-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.385 / Virus Database: 268.4.6/324 - Release Date: 4/25/2006

From parrt at cs.usfca.edu  Wed Apr 26 15:07:24 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Apr 26 15:07:26 2006
Subject: [antlr-interest] Antlr 3 syntax question
In-Reply-To: <444FED90.1040107@shmuelhome.mine.nu>
References: <444FED90.1040107@shmuelhome.mine.nu>
Message-ID: <00E0999B-DA3C-41F2-98C2-9CA1A78DF55F@cs.usfca.edu>


On Apr 26, 2006, at 3:00 PM, shmuel siegel wrote:

> In Antlr2 I was able to change the text of the token stream with  
> code like this
>
> ESCAPE
>     :    '\\'
>          ( '\\' { $setText("\\"); }
>          | '"' { $setText("\""); }
>          )
>     ;
>
> What is the equivalent in Antlr 3?

Kay or Jim submitted a fix for me but I've not included yet. :(  A  
big hole...sorry.

I'm about 3 weeks away from being to code again!  Hooray!
Ter

From craymer at warpiv.com  Wed Apr 26 15:47:32 2006
From: craymer at warpiv.com (Loring Craymer)
Date: Wed Apr 26 15:47:31 2006
Subject: [antlr-interest] Question concerning writing a TreeParser rule
In-Reply-To: <0563741883A49249B93A75DF219F8C220149ACCA@SZVSE201>
Message-ID: <002e01c66983$68177d80$8902a8c0@Fafnir>

The corresponding tree rule is

batchExprTree
	:
	#( SEP batchExprTree batchExpr )
	|	batchExpr
	;

Note that the tree annotation essentially inverts the batchExprs (the first
batchExpr encountered when parsing is at the lowest level of the tree)--if
you want to maintain the original order when processing, put actions to the
right of batchExpr in the above rule.

--Loring

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Stritzel.Nils@infineon.com
> Sent: Wednesday, April 26, 2006 2:55 AM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] Question concerning writing a TreeParser rule
> 
> Hi,
> 
> In my parser I have the following rule:
> 
> batchExprList
> 	:
> 	batchExpr (SEP^ batchExpr)*
> 	;
> 
> Which describes a list of expressions separated by "\".
> 
> 
> I could need some advice or pointer to the right place in the
> documentation to figure out, how to implement a TreeParser rule that
> returns an Array or a ArrayList containing the evaluated batchExpr (i.e.
> batchExprList returns [ArrayList r] ).
> Thanks,
> 
> Nils

From antlr-interest at schraverus.com  Wed Apr 26 23:21:01 2006
From: antlr-interest at schraverus.com (Corno)
Date: Wed Apr 26 23:21:16 2006
Subject: [antlr-interest] Templates in rules
Message-ID: <20060427062110.7A97B32C041@smtpauth01.csee.siteprotect.com>

Hi all,

The software I'm currently writing (in C++) uses a lot of template classes.
I'm also writing a frontend in ANTLR that has to interact with those
template classes. 
What I found myself doing was writing wrappers for those template classes so
that I could pass the as a variable from one rule to another but this is a
very inconvenient way.

So let's say I have;
std::vector<A>
std::vector<B>

I have written the following wrapper classes; class AnyVector {
	...
	std::vector<A> imp;
};
class Avector : public AnyVector
{
	...
	std::vector<A> imp;
};

class Bvector : public AnyVector
{
	...
	std::vector<B> imp;
};

So that I can have the following rule

Foo [AnyVector& theVector]
:
	( X | Y )
;

What I would like to have is something like this;

Foo <Element>[std::vector<Element>& theVector]
:
	( X | Y )
;

Is there any way that I can parametrize an antlr rule to achieve that
effect?

TIA,

Corno


From costa_basil at yahoo.ca  Wed Apr 26 23:54:49 2006
From: costa_basil at yahoo.ca (Costa Basil)
Date: Wed Apr 26 23:54:50 2006
Subject: [antlr-interest] how can I handle special identifiers that are not
	reserved words?
Message-ID: <20060427065449.17468.qmail@web50608.mail.yahoo.com>

Hi,

I have to write a parser (in c++) for a language containing commands with options, however, the options are not reserved words and they can be used as identifiers in some other commands. The lexer is handwritten in c++. 

For instance, I have:

command:
 option1 = expression
| option2 = expression
| option3 = expression

option1, option2, option3 are identifiers (i.e. they begin with letter and they continue with letters or digits) and they are not reserved words.

How can I do this in antlr? The workarounds that I was thinking of are:

1. Use semantic predicates:

option1 = expression1 becomes

{LT(1)->getText() == "option1"}? identifier "=" expression

downside: if the semantic predicate is not used as the first condition in an alternative then antlr sets the semanticexception message that gets thrown in case the predicate is false to the text between the curly brackets which I find unacceptable (is there a way to control the message?).

Example of code generated:
        match(TK_IDENTIFIER);
        if (!(LT(1)->getText() == "OPTION1"))
            throw antlr::SemanticException("LT(1)->getText() == \"OPTION1\"");

2. Treat option1, option2,, etc. as reserved words. Create a production:

id:
 identifier 
| option1
| option2
| ...
and use this wherever an identifier is supposed to be used.

Downside: every time I have to add another option that is not a reserved word I have to remember to add it here as well.

My question to you guys: is there another way to do this? 

I was almost thinking it would have been nice if antlr supported token subtypes. For instance I could have specified option1 with the form: identifier::option1 where identifier is the main token and option1 is the subtype and then have the match function support this kind of syntactic construction by matching the main token and its subtype. 

Thanks,
Costa

PS. Is there a way to search the mailing list archives? I couldn't find a search feature...






		
---------------------------------
Enrich your life at Yahoo! Canada Finance
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060427/ae715957/attachment.html
From ajr at mekkanis.com  Thu Apr 27 01:07:59 2006
From: ajr at mekkanis.com (Arni J. Reginsson)
Date: Thu Apr 27 01:10:40 2006
Subject: [antlr-interest] Combination of TokenStreamHiddenTokenFilter and
	TokenStreamSelector
Message-ID: <948735BE031C884B86B98B27AAE81067049755@mars.mekkanis.local>

Hello,

 

First the context that we are working in: 

        We are using antlr-2.7.6

        The C# version of the library

 

Then the solution we are building using ANTLR:

We have successfully implemented a Microsoft Pascal ==> C# translator
that uses multiple lexers and the TokenStreamSelector to translate
complicated Pascal programs (that use interfaces and include statements)
to C#. We have already translated more than 200K of pascal lines to c#.

 

So far we have not found a sound solution to extend the translator to
preserve pascal comments. But we have been extending the translator
using the whitepaper "Preserving Whitespace During Translation
<http://antlr.org/article/whitespace/index.html>" as a guideline, and
here we step into a problem.

 

The problem:

On a change of lexers (forced by our PascalLexer uponEOF()) the
TokenStreamHiddenTokenFilter method IToken nextToken() 

skips the last token of the file currently being parsed/lexed and
returns as the next token the first token of next $include (pascal
interface) statement.

 

The pascal file that we are translating begins with several $include
statements liken:

(*$INCLUDE:'MIS_INTF.PAS'*)

(*$INCLUDE:'CIO_INTF.PAS'*)

...

 

The first $include (MIS_INTF.PAS) is lexed/parsed correctly upon the
point where it reaches the end of the file:

...

        BEGIN

        END;

 

At this point the parser expects SEMI token as the last token in the
stream, but the TokenStreamHiddenTokenFilter nextToken returns the first
statement of CIO_INTF.PAS (i.e, the token INTERFACE) instead of SEMI.

 

The code that is giving us problems is (from the PascalParser.cs file):

 

public void interfacePart() //throws RecognitionException,
TokenStreamException

{

            

            returnAST = null;

            ASTPair currentAST = new ASTPair();

            OpusAllt.MekkanisAST interfacePart_AST = null;

            

            interfaceHeading();

            astFactory.addASTChild(ref currentAST, (AST)returnAST);

            match(BEGIN);

            match(END);

            match(SEMI);

            interfacePart_AST = (OpusAllt.MekkanisAST)currentAST.root;

            returnAST = interfacePart_AST;

}

 

The match(SEMI) calls ends in (TokenStreamHiddenTokenFilter.cs file):

 

            override public IToken nextToken()

            {

< -- clip -- >

                  IHiddenStreamToken monitored = LA(1);

                  // point to hidden tokens found during last invocation

                  monitored.setHiddenBefore(lastHiddenToken);

                  lastHiddenToken = null;

                  

                  // Look for hidden tokens, hook them into list
emanating

                  // from the monitored tokens.

                  consume();

                  IHiddenStreamToken p = monitored;

                  // while hidden or discarded scarf tokens

                  while (hideMask.member(LA(1).Type) ||
discardMask.member(LA(1).Type))

                  {

                        if (hideMask.member(LA(1).Type))

                        {

                              // attach the hidden token to the
monitored in a chain

                              // link forwards

                              p.setHiddenAfter(LA(1));

                              // link backwards

                              if (p != monitored)

                              {

                                    //hidden cannot point to monitored
tokens

                                    LA(1).setHiddenBefore(p);

                              }

                              p = (lastHiddenToken = LA(1));

                        }

                        consume();

                  }

                  return monitored;

            }

 

When we reach the point after the < -- clip -- > statement the
"monitored" variable and "nextMonitoredToken" contains
{[";",<30>,line=51,col=4]} which is correct.

 

BUT after the first "consume ()" (before the while loop) method has been
called "nextMonitoredToken" (LA(1)) is still {[";",<30>,line=51,col=4]}
(again still correct) but the "monitored" token now contains
{["INTERFACE",<31>,line=24,col=1]} (incorrect) which is returned as the
next token.

 

I therefore think that the implementation of
TokenStreamHiddenTokenFilter nextToken might not been correct with
regards to the multilexer implementations like we are using. 

 

The code for uponEOF, which we have been successfully using for a while
now is also shown below - in case there is some better way to switch
back the lexers after we hit an EOF in an include file:

 

    public override void uponEOF() {

            PascalMain.currentInstance.currentFileName =
PascalMain.currentInstance.oldtranslateFileName;

            if ( PascalMain.currentInstance.selector.getCurrentStream()
!= PascalMain.currentInstance.mainLexer ) {

                  // don't allow EOF until main lexer.  Force the

                  // selector to retry for another token.

                  PascalMain.currentInstance.selector.pop(); // return
to old lexer/stream

                  PascalMain.currentInstance.selector.retry();

            }

            else {

                  Console.WriteLine ("Hit EOF of main file");

            }

      }

 

Is this a known problem? Do you have a workaround?

 

Best regards,

Arni Jon Reginsson

www.mekkanis.is

 

 

  

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060427/d5397aa9/attachment-0001.html
From rob.hill at blueyonder.co.uk  Wed Apr 26 03:07:06 2006
From: rob.hill at blueyonder.co.uk (Robert Hill)
Date: Thu Apr 27 03:06:59 2006
Subject: [antlr-interest] runtimes...
Message-ID: <20060427100657.440C9DCC4B@www.antlr.org>

Are there any .NET runtimes for 2.7.6 anywhere?

 

Cheers!

 

/2ob

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060426/930c2ec5/attachment.html
From antlr at shmuelhome.mine.nu  Thu Apr 27 04:01:32 2006
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Thu Apr 27 04:01:53 2006
Subject: [antlr-interest] Antlr 3 syntax question
In-Reply-To: <444FED90.1040107@shmuelhome.mine.nu>
References: <444FED90.1040107@shmuelhome.mine.nu>
Message-ID: <4450A48C.6050100@shmuelhome.mine.nu>

I would also like to understand the usage of alternatives and 
parenthesis. According to AntlrWorks, the following rule has 4 
alternatives consistent with the visual layout of this rule. The second 
and third alternatives are identical. My question is "Why is there an 
implied parenthesis around the second alternative?". In other words, 
does sequencing of tokens always take precedence to alternatives?

levelExpr     :
        INT
    |
         '@level' '(' 'offset' '=' INT ')'
    |
         ('@level' '(' 'offset' '=' INT ')' )
    |
    ;



-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.385 / Virus Database: 268.5.0/325 - Release Date: 4/26/2006

From prashant.deva at gmail.com  Thu Apr 27 06:37:13 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Thu Apr 27 06:37:18 2006
Subject: [antlr-interest] runtimes...
In-Reply-To: <20060427100657.440C9DCC4B@www.antlr.org>
References: <20060427100657.440C9DCC4B@www.antlr.org>
Message-ID: <41fed8f80604270637t694244c1y58c103edff6751bc@mail.gmail.com>

Download the antlr distrib from antlr.org, it contains the runtime for .net
--
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060427/2e67d17a/attachment.html
From madcapmaggie at yahoo.com  Thu Apr 27 07:36:54 2006
From: madcapmaggie at yahoo.com (Peggy Fieland)
Date: Thu Apr 27 07:36:56 2006
Subject: [antlr-interest] how can I handle special identifiers that are
	not reserved words?
In-Reply-To: <20060427065449.17468.qmail@web50608.mail.yahoo.com>
Message-ID: <20060427143654.69030.qmail@web37913.mail.mud.yahoo.com>


I used:

   identifier 
     | non_keywords;

but I wrote a program to generate the non_keywords,
using the (sorted)  ...TokenTypes.txt
file as input.  

I wrote it in c++.

Peggy
--- Costa Basil <costa_basil@yahoo.ca> wrote:

> Hi,
> 
> I have to write a parser (in c++) for a language
> containing commands with options, however, the
> options are not reserved words and they can be used
> as identifiers in some other commands. The lexer is
> handwritten in c++. 
> 
> For instance, I have:
> 
> command:
>  option1 = expression
> | option2 = expression
> | option3 = expression
> 
> option1, option2, option3 are identifiers (i.e. they
> begin with letter and they continue with letters or
> digits) and they are not reserved words.
> 
> How can I do this in antlr? The workarounds that I
> was thinking of are:
> 
> 1. Use semantic predicates:
> 
> option1 = expression1 becomes
> 
> {LT(1)->getText() == "option1"}? identifier "="
> expression
> 
> downside: if the semantic predicate is not used as
> the first condition in an alternative then antlr
> sets the semanticexception message that gets thrown
> in case the predicate is false to the text between
> the curly brackets which I find unacceptable (is
> there a way to control the message?).
> 
> Example of code generated:
>         match(TK_IDENTIFIER);
>         if (!(LT(1)->getText() == "OPTION1"))
>             throw
> antlr::SemanticException("LT(1)->getText() ==
> \"OPTION1\"");
> 
> 2. Treat option1, option2,, etc. as reserved words.
> Create a production:
> 
> id:
>  identifier 
> | option1
> | option2
> | ...
> and use this wherever an identifier is supposed to
> be used.
> 
> Downside: every time I have to add another option
> that is not a reserved word I have to remember to
> add it here as well.
> 
> My question to you guys: is there another way to do
> this? 
> 
> I was almost thinking it would have been nice if
> antlr supported token subtypes. For instance I could
> have specified option1 with the form:
> identifier::option1 where identifier is the main
> token and option1 is the subtype and then have the
> match function support this kind of syntactic
> construction by matching the main token and its
> subtype. 
> 
> Thanks,
> Costa
> 
> PS. Is there a way to search the mailing list
> archives? I couldn't find a search feature...
> 
> 
> 
> 
> 
> 
> 		
> ---------------------------------
> Enrich your life at Yahoo! Canada Finance

From prashant.deva at gmail.com  Thu Apr 27 08:26:39 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Thu Apr 27 08:27:07 2006
Subject: [antlr-interest] how can I handle special identifiers that are
	not reserved words?
In-Reply-To: <20060427065449.17468.qmail@web50608.mail.yahoo.com>
References: <20060427065449.17468.qmail@web50608.mail.yahoo.com>
Message-ID: <41fed8f80604270826l28be2a74p6aea2ee652cf4907@mail.gmail.com>

> PS. Is there a way to search the mailing list archives? I couldn't find a
> search feature...
>

You could use Google groups (groups.google.com) ;-)

--
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060427/cf259fb1/attachment.html
From parrt at cs.usfca.edu  Thu Apr 27 09:52:47 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Apr 27 09:52:51 2006
Subject: [antlr-interest] how can I handle special identifiers that are
	not reserved words?
In-Reply-To: <41fed8f80604270826l28be2a74p6aea2ee652cf4907@mail.gmail.com>
References: <20060427065449.17468.qmail@web50608.mail.yahoo.com>
	<41fed8f80604270826l28be2a74p6aea2ee652cf4907@mail.gmail.com>
Message-ID: <66D26EEF-7021-47E0-843A-4F5916511192@cs.usfca.edu>


On Apr 27, 2006, at 8:26 AM, Prashant Deva wrote:

>
> PS. Is there a way to search the mailing list archives? I couldn't  
> find a search feature...
>
> You could use Google groups (groups.google.com) ;-)
>

Doesn't antlr's searchbox work?  Looks in archives for me.
Ter
From parrt at cs.usfca.edu  Thu Apr 27 09:55:45 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Apr 27 09:55:47 2006
Subject: [antlr-interest] Antlr 3 syntax question
In-Reply-To: <4450A48C.6050100@shmuelhome.mine.nu>
References: <444FED90.1040107@shmuelhome.mine.nu>
	<4450A48C.6050100@shmuelhome.mine.nu>
Message-ID: <EF7D02C3-D47D-4102-9919-9E51BD8119AD@cs.usfca.edu>


On Apr 27, 2006, at 4:01 AM, shmuel siegel wrote:

> I would also like to understand the usage of alternatives and  
> parenthesis. According to AntlrWorks, the following rule has 4  
> alternatives consistent with the visual layout of this rule. The  
> second and third alternatives are identical. My question is "Why is  
> there an implied parenthesis around the second alternative?". In  
> other words, does sequencing of tokens always take precedence to  
> alternatives?
>
> levelExpr     :  # one
>        INT
>    | # two
>         '@level' '(' 'offset' '=' INT ')'
>    | # three
>         ('@level' '(' 'offset' '=' INT ')' )
>    | # four
>    ;

See annotations.  4 alts.  #alts = #pipes + 1.

The '|' binds most loosely.  Every grammar tool I've seen does this I  
think...does it seem weird or different from v2?

Ter
From parrt at cs.usfca.edu  Thu Apr 27 09:58:02 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Apr 27 09:58:06 2006
Subject: [antlr-interest] StringTemplate: Infinite Recursion in anonymous
	conditional template.
In-Reply-To: <b38f063f0604211518r4236b2c2qd4ef5a554385cb10@mail.gmail.com>
References: <b38f063f0604211518r4236b2c2qd4ef5a554385cb10@mail.gmail.com>
Message-ID: <A200F79D-D84A-4FA3-AC35-FA303AD26195@cs.usfca.edu>


On Apr 21, 2006, at 3:18 PM, Swapnil Kashikar wrote:

> Hi,
>
> I am parsing PL/SQL code using antlr and transforming it using   
> StringTemplate 2.3b6 .
> Could someone please help me with fixing the error below (Obtained  
> with the setLintMode output from stringtemplate):
> ------------
> exception: java.lang.IllegalStateException: infinite recursion to  
> <anonymous([s])@9> referenced in <plsql_block([type_declaration,  
> functions, procedures, code, exception_handlers, into_clause, pb]) 
> @104>; stack trace:
> <anonymous([s])@9>, references=[s, s, LPAREN]>
> <plsql_block([type_declaration, functions, procedures, code,  
> exception_handlers, into_clause, pb])@104>, attributes= 
> [code=<statement()@105>, pb], references=[LPAREN, type_declaration,  
> functions, procedures, code]>
> <else_subtemplate([])@138>, references=[s, LPAREN]>
> <anonymous([s])@9> (start of recursive cycle)
> ...
> ------------

This means that somehow an inner block contains itself.  Mostly  
likely a cycle in your data structure injected into the tempaltes.   
Can u print them not using ST correctly (using a recursive routine)?

Ter

From parrt at cs.usfca.edu  Thu Apr 27 10:00:00 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Apr 27 10:00:07 2006
Subject: [antlr-interest] antlr & antlr studio...
In-Reply-To: <2E909902FD3A03419E3A905908AE3DD401D1F4F4@UKNSM201.emea.corp.eds.com>
References: <2E909902FD3A03419E3A905908AE3DD401D1F4F4@UKNSM201.emea.corp.eds.com>
Message-ID: <A3DE2CEE-2009-403F-B356-901B116311FD@cs.usfca.edu>


On Apr 21, 2006, at 2:44 AM, Hill, Robert wrote:

> Here's another quote for you Ter,
>
> AntlrWorks - "OMG, I've just stained my trousers"

Nice!  Just the one I was looking for ;)

> Out of interest , how stable is V3?  Does it do everything it says on
> the tin yet? :)

Yep. :)  A few missing routines but essentially it's there minus bugs.

> Anyhow, I can't wait. There's at least a small donation of a few beers
> in it for you mate.

Hooray!  Donation logged in my IOU book ;)

Ter
From prashant.deva at gmail.com  Thu Apr 27 10:12:51 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Thu Apr 27 10:12:54 2006
Subject: [antlr-interest] how can I handle special identifiers that are
	not reserved words?
In-Reply-To: <66D26EEF-7021-47E0-843A-4F5916511192@cs.usfca.edu>
References: <20060427065449.17468.qmail@web50608.mail.yahoo.com>
	<41fed8f80604270826l28be2a74p6aea2ee652cf4907@mail.gmail.com>
	<66D26EEF-7021-47E0-843A-4F5916511192@cs.usfca.edu>
Message-ID: <41fed8f80604271012u4dfe31bay53f7d8051782682a@mail.gmail.com>

>
> Doesn't antlr's searchbox work?  Looks in archives for me.


Oh yeah, almost forgot about that.

Actually your search box is so big  that it  becomes invisible.
Its so long, that the white box looks more like a separator.

I would make it smaller, around the size of google's bar.

Prashant
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060427/d03e1a7b/attachment-0001.html
From Erik.Putrycz at nrc-cnrc.gc.ca  Thu Apr 27 13:58:59 2006
From: Erik.Putrycz at nrc-cnrc.gc.ca (Putrycz, Erik)
Date: Thu Apr 27 13:59:10 2006
Subject: [antlr-interest] order tree nodes
Message-ID: <E4D07AB09F5F044299333C8D0FEB45E9021200D1@nrccenexb1.nrc.ca>

I'm currently parsing a cobol file and I'd like to create a proper AST
for the records.

A record list looks like 

003634*01  RAREA.

003635     05  R00-999FIXED-AREA.

003636         10  RKEY-AREA                             PIC X(62).

003637         10  R906REC-TYPE                          PIC XX.

003638         10  R907BLKS                              PIC 9(4) COMP.

003639         10  CRTN-DT-TS-GRP.

003640           15  CRTN-CN                             PIC 9(2).

003641           15  CRTN-DT-TS.

 

What I'd like to do is have the node with 01 as root for the 05 and have
the 05 be the root of all the "10" nodes.

I tried to write something like

 

recordList

            : (recordCouple)+ { #recordList =
#([RECORD_LIST],#recordList);}

            ;

 

recordCouple

            :! (record record) => r1:record r2:record

                         {

                                    if (#r1 != null && #r2!= null &&
#r1.getText() != null && #r2.getText() != null) {

                                    int r1Val =
Integer.parseInt(#r1.getText());

                                    int r2Val =
Integer.parseInt(#r2.getText());

                                    if (r2Val > r1Val) {

                                                #recordCouple =
#(r1,r2);

                                    } 

                                    }

                        }

                        |record

            ;

 

unfortunately this is not working. 

If I put the "!" to ignore the default tree construction, how can I
return a list instead of a tree? In my code I miss an else alternative
to return (r1,r2) and not #(r1,r2).

Also, I don't believe that this rule will do the recursivity I need... I
rather need something like (r1:record r2:record) => record  but that
doesn't work.

Any suggestions or clues???

 

Thanks,

 

 

Erik Putrycz, Ph.D - Research Associate /
<mailto:erik.putrycz@nrc-cnrc.gc.ca> erik.putrycz@nrc-cnrc.gc.ca / (613)
990 0681

Institute for Information Technology - Software Engineering Group

National Research Council, Canada - Building M-50, 1200 Montreal Road

Ottawa, Ontario, CANADA K1A 0R6

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060427/94ed3e9b/attachment.html
From dragonoe at mcmaster.ca  Thu Apr 27 14:58:25 2006
From: dragonoe at mcmaster.ca (Olivier Dragon)
Date: Thu Apr 27 14:51:41 2006
Subject: [antlr-interest] order tree nodes
In-Reply-To: <E4D07AB09F5F044299333C8D0FEB45E9021200D1@nrccenexb1.nrc.ca>
References: <E4D07AB09F5F044299333C8D0FEB45E9021200D1@nrccenexb1.nrc.ca>
Message-ID: <20060427215825.GA17813@dragon.homelinux.org>

Hi Erik,

I think it would be better not to use "couples" because your tree won't
be right.

I don't know COBOL very much but from your example I assume that those
numbers just keep on increasing. In that case you could keep track of
the current parent and have your rule look at each record individually
comparing it to the parent. If it's larger, do parent.addChild(record),
if it's the same do parent.setNextSibling(record); parent = record;

Does that help?

-Olivier

On Thu, Apr 27, 2006 at 04:58:59PM -0400, Putrycz, Erik wrote:
> I'm currently parsing a cobol file and I'd like to create a proper AST
> for the records.
> 
> A record list looks like 
> 
> 003634*01  RAREA.
> 
> 003635     05  R00-999FIXED-AREA.
> 
> 003636         10  RKEY-AREA                             PIC X(62).
> 
> 003637         10  R906REC-TYPE                          PIC XX.
> 
> 003638         10  R907BLKS                              PIC 9(4) COMP.
> 
> 003639         10  CRTN-DT-TS-GRP.
> 
> 003640           15  CRTN-CN                             PIC 9(2).
> 
> 003641           15  CRTN-DT-TS.
> 
>  
> 
> What I'd like to do is have the node with 01 as root for the 05 and have
> the 05 be the root of all the "10" nodes.
> 
> I tried to write something like
> 
>  
> 
> recordList
> 
>             : (recordCouple)+ { #recordList =
> #([RECORD_LIST],#recordList);}
> 
>             ;
> 
>  
> 
> recordCouple
> 
>             :! (record record) => r1:record r2:record
> 
>                          {
> 
>                                     if (#r1 != null && #r2!= null &&
> #r1.getText() != null && #r2.getText() != null) {
> 
>                                     int r1Val =
> Integer.parseInt(#r1.getText());
> 
>                                     int r2Val =
> Integer.parseInt(#r2.getText());
> 
>                                     if (r2Val > r1Val) {
> 
>                                                 #recordCouple =
> #(r1,r2);
> 
>                                     } 
> 
>                                     }
> 
>                         }
> 
>                         |record
> 
>             ;
> 
>  
> 
> unfortunately this is not working. 
> 
> If I put the "!" to ignore the default tree construction, how can I
> return a list instead of a tree? In my code I miss an else alternative
> to return (r1,r2) and not #(r1,r2).
> 
> Also, I don't believe that this rule will do the recursivity I need... I
> rather need something like (r1:record r2:record) => record  but that
> doesn't work.
> 
> Any suggestions or clues???
> 
>  
> 
> Thanks,
> 
>  
> 
>  
> 
> Erik Putrycz, Ph.D - Research Associate /
> <mailto:erik.putrycz@nrc-cnrc.gc.ca> erik.putrycz@nrc-cnrc.gc.ca / (613)
> 990 0681
> 
> Institute for Information Technology - Software Engineering Group
> 
> National Research Council, Canada - Building M-50, 1200 Montreal Road
> 
> Ottawa, Ontario, CANADA K1A 0R6
> 
>  
> 

-- 
          __-/|    ? ?     |\-__
     __--/  /  \   (^^)   /  \  \--__
  _-/   /   /  /\ / ( )  /\  \   \   \-_
 /  /   /  /  /  (   ^^ ~  \  \  \   \  \
 / Oli Dragon    ( dragonoe@mcmaster.ca \
/  B.Eng. Sfwr   ( dragon.homelinux.org  \
/  /  /    /__--_ (   ) __--__\    \  \  \
|  /  /  _/        \_ \_       \_  \  \  |
 \/  / _/            \_ \_       \_ \  \/
  \_/ /                -\_\        \ \_/
    \/                    )         \/
                        *~
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20060427/e752c459/attachment.bin
From swapnil.kashikar at gmail.com  Thu Apr 27 19:07:20 2006
From: swapnil.kashikar at gmail.com (Swapnil Kashikar)
Date: Thu Apr 27 19:05:43 2006
Subject: [antlr-interest] StringTemplate: Infinite Recursion in
	anonymousconditional template.
Message-ID: <44517874.6b18d1f1.5b89.ffff9391@mx.gmail.com>

Thanks Terence,
I had to try out a few rearrangements of the conditional and anonymous  templates but finally I could make it work without infinite recursion.

I have been able to learn, start using and be productive with stringtemplate in a matter of weeks. Its a superb little tool.

I look forward to using antlr v3 with integrated ST and antlrworks.

Regards,
Swapnil

    > Hi,
    >
    > I am parsing PL/SQL code using antlr and transforming it using   
    > StringTemplate 2.3b6 .
    > Could someone please help me with fixing the error below (Obtained  
    > with the setLintMode output from stringtemplate):
    > ------------
    > exception: java.lang.IllegalStateException: infinite recursion to  
    > <anonymous([s])@9> referenced in <plsql_block([type_declaration,  
    > functions, procedures, code, exception_handlers, into_clause, pb]) 
    > @104>; stack trace:
    > <anonymous([s])@9>, references=[s, s, LPAREN]>
    > <plsql_block([type_declaration, functions, procedures, code,  
    > exception_handlers, into_clause, pb])@104>, attributes= 
    > [code=<statement()@105>, pb], references=[LPAREN, type_declaration,  
    > functions, procedures, code]>
    > <else_subtemplate([])@138>, references=[s, LPAREN]>
    > <anonymous([s])@9> (start of recursive cycle)
    > ...
    > ------------
    
    This means that somehow an inner block contains itself.  Mostly  
    likely a cycle in your data structure injected into the tempaltes.   
    Can u print them not using ST correctly (using a recursive routine)?
    
    Ter
    

From jose.ventura.roda at gmail.com  Fri Apr 28 00:29:17 2006
From: jose.ventura.roda at gmail.com (Jose Ventura)
Date: Fri Apr 28 00:29:20 2006
Subject: [antlr-interest] order tree nodes
In-Reply-To: <20060427215825.GA17813@dragon.homelinux.org>
References: <E4D07AB09F5F044299333C8D0FEB45E9021200D1@nrccenexb1.nrc.ca>
	<20060427215825.GA17813@dragon.homelinux.org>
Message-ID: <e39abda10604280029t71a44893w9b5c37d977f4c7ba@mail.gmail.com>

Hi Erik,

I'm very interesting in parsing cobol program. I can exchange information
about this goal.

I've solved this problem so:

- I have a vector with the pointer to last declaration of each cobol level
- When parse a new declaration this is link with the previous level
declaration

I hope this help you. Do you interest to exchange the grammars?

I paste my grammar code to nest level

Regards,
Jos? Ventura


AST levelsVector [];

//To nest level
int lastLevel=0;
int lastActualLevel=0;

private void inicLevelsVector(AST t)
{
levelsVector = new AST[50];
levelsVector[0]=t;
for (int i=1;i<50;i++)
levelsVector[i]=null;
}

[...] more code



working_sec
: w:WORKING^ {inicLevelsVector(#w);} SECTION! dot (data_declaration)*
;
data_declaration
{String d="FILLER";}
: n:NUM (d=dato)? (clausulas)* dot
{
int level = Integer.valueOf(#n.getText());
int actualLevel = level;
switch (level)
{
case 77:
level=1;
break;
case 88:
if (lastActualLevel<50)
level = lastLevel + 1;
else
level = lastLevel;
break;
case 66:
level = lastLevel;
break;
}

while (lastLevel >= level || levelsVector[lastLevel]==null)
{
levelsVector[lastLevel]=null;
lastLevel--;
}
AST aux=#( #[DECLARACION, d] ,#data_declaration);
levelsVector[lastLevel].addChild(aux);
lastLevel=level;
lastActualLevel=actualLevel;
levelsVector[lastLevel]=aux;
#data_declaration=null;
}
;

dato returns [String n]
{n="";}
:i:IDENT {n=#i.getText();}
;
2006/4/27, Olivier Dragon <dragonoe@mcmaster.ca>:
>
> Hi Erik,
>
> I think it would be better not to use "couples" because your tree won't
> be right.
>
> I don't know COBOL very much but from your example I assume that those
> numbers just keep on increasing. In that case you could keep track of
> the current parent and have your rule look at each record individually
> comparing it to the parent. If it's larger, do parent.addChild(record),
> if it's the same do parent.setNextSibling(record); parent = record;
>
> Does that help?
>
> -Olivier
>
> On Thu, Apr 27, 2006 at 04:58:59PM -0400, Putrycz, Erik wrote:
> > I'm currently parsing a cobol file and I'd like to create a proper AST
> > for the records.
> >
> > A record list looks like
> >
> > 003634*01  RAREA.
> >
> > 003635     05  R00-999FIXED-AREA.
> >
> > 003636         10  RKEY-AREA                             PIC X(62).
> >
> > 003637         10  R906REC-TYPE                          PIC XX.
> >
> > 003638         10  R907BLKS                              PIC 9(4) COMP.
> >
> > 003639         10  CRTN-DT-TS-GRP.
> >
> > 003640           15  CRTN-CN                             PIC 9(2).
> >
> > 003641           15  CRTN-DT-TS.
> >
> >
> >
> > What I'd like to do is have the node with 01 as root for the 05 and have
> > the 05 be the root of all the "10" nodes.
> >
> > I tried to write something like
> >
> >
> >
> > recordList
> >
> >             : (recordCouple)+ { #recordList =
> > #([RECORD_LIST],#recordList);}
> >
> >             ;
> >
> >
> >
> > recordCouple
> >
> >             :! (record record) => r1:record r2:record
> >
> >                          {
> >
> >                                     if (#r1 != null && #r2!= null &&
> > #r1.getText() != null && #r2.getText() != null) {
> >
> >                                     int r1Val =
> > Integer.parseInt(#r1.getText());
> >
> >                                     int r2Val =
> > Integer.parseInt(#r2.getText());
> >
> >                                     if (r2Val > r1Val) {
> >
> >                                                 #recordCouple =
> > #(r1,r2);
> >
> >                                     }
> >
> >                                     }
> >
> >                         }
> >
> >                         |record
> >
> >             ;
> >
> >
> >
> > unfortunately this is not working.
> >
> > If I put the "!" to ignore the default tree construction, how can I
> > return a list instead of a tree? In my code I miss an else alternative
> > to return (r1,r2) and not #(r1,r2).
> >
> > Also, I don't believe that this rule will do the recursivity I need... I
> > rather need something like (r1:record r2:record) => record  but that
> > doesn't work.
> >
> > Any suggestions or clues???
> >
> >
> >
> > Thanks,
> >
> >
> >
> >
> >
> > Erik Putrycz, Ph.D - Research Associate /
> > <mailto:erik.putrycz@nrc-cnrc.gc.ca> erik.putrycz@nrc-cnrc.gc.ca / (613)
> > 990 0681
> >
> > Institute for Information Technology - Software Engineering Group
> >
> > National Research Council, Canada - Building M-50, 1200 Montreal Road
> >
> > Ottawa, Ontario, CANADA K1A 0R6
> >
> >
> >
>
> --
>          __-/|    ? ?     |\-__
>     __--/  /  \   (^^)   /  \  \--__
> _-/   /   /  /\ / ( )  /\  \   \   \-_
> /  /   /  /  /  (   ^^ ~  \  \  \   \  \
> / Oli Dragon    ( dragonoe@mcmaster.ca \
> /  B.Eng. Sfwr   ( dragon.homelinux.org  \
> /  /  /    /__--_ (   ) __--__\    \  \  \
> |  /  /  _/        \_ \_       \_  \  \  |
> \/  / _/            \_ \_       \_ \  \/
> \_/ /                -\_\        \ \_/
>    \/                    )         \/
>                        *~
>
>
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.1 (GNU/Linux)
>
> iD8DBQFEUT6BgKW2i4QOkbARAkk4AJ4tDpDUCCZXgZXNNL3Fb+AE/J5ovgCgrSwy
> pqwzZ4pfPGJaaRhc4ujT5H4=
> =+az3
> -----END PGP SIGNATURE-----
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060428/9e5d1e19/attachment-0001.html
From Stritzel.Nils at infineon.com  Fri Apr 28 00:37:42 2006
From: Stritzel.Nils at infineon.com (Stritzel.Nils@infineon.com)
Date: Fri Apr 28 00:38:32 2006
Subject: [antlr-interest] Grammar nondeterminism on recursion beginner's
	question
Message-ID: <0563741883A49249B93A75DF219F8C22014C1A1D@SZVSE201>

Hi all,

I am still working my fomrula parser and after solving an earlier issue
(thanks to Martin Probst).
But now I have got a new problem.

My grammar includes a list that contains to different types of elements
runExpr and batchExpr. This is supposed to contains and list one runExpr
and one batchExpr.

runBatchExprList
	:
	(runExpr SEP!) =>
			runExpr SEP! runBatchExprList 
			| 
			runExpr SEP! batchExpr
	|
	(batchExpr SEP!) =>
		batchExpr SEP! runBatchExprList
		|
		batchExpr SEP! runExpr
	;

But the matter is that runExpr and batchExpr can start with the same
Tokens so this seemingly causes some problem.
Is there a way to make the parser know which is the right alternative?
Can I get this to work without rewriting everything?
Below is my (for this posting somewhat simplified) grammar.
Maybe the question boils down to the question, how to choose correctly
from a a rule like this:
Rule1 : batchExpr | runExpr ;


Thanks,

Nils




class ExpressionParser extends Parser;
options {
	buildAST = true;	// uses CommonAST by default
	k = 1;
}

imaginaryTokenDefinitions
	:
	SIGN_MINUS
	SIGN_PLUS
	;

expr	:
	(formula)* EOF!
	;
	
formula
	:
	BATCHCSID ASSIGN^ batchExpr
	| 
	RUNCSID ASSIGN^ runExpr
	;

batchExpr 
	:
	sumExpr 
	;

sumExpr : 
	baseExpr ((PLUS^|MINUS^) baseExpr)* 
	; 

baseExpr 
	: 
	primaryExpr 
	| 
	signedExpr
	;
	
signedExpr
	:
	(m: MINUS^ {#m.setType(SIGN_MINUS);} | p: PLUS^
{#p.setType(SIGN_PLUS);})         
	baseExpr
	;
	
primaryExpr
  	: 
  	DOUBLE
  	| 
  	BATCHVARIABLE
  	| 
  	(LPAREN^ batchExpr RPAREN! )
  	| 
  	functionCall
  	;
  
  
functionCall 
	: 
	(CABS^ | CSIGN^) LPAREN! batchExpr RPAREN!      
  	| 
  	((CAVG LPAREN^) => CAVG LPAREN! batchExprList RPAREN!
  			| CAVG LPAREN! batchExpr RPAREN!) 
	| 
	(CMAX^ | CMIN^) LPAREN! batchExprList RPAREN!
  	;
  

batchExprList 
  	:
	batchExpr (SEP! batchExpr)+ {## = #(#[SEP], ##); }
	;

runExpr : 
	runSumExpr
	;

runSumExpr 
	: 
	runBaseExpr ((PLUS^|MINUS^) runBaseExpr)*
	;
	
	
runBaseExpr 
	: 
	runPrimaryExpr 
	| 
	runSignedExpr
	;


runSignedExpr
	: 
        (m: MINUS^ {#m.setType(SIGN_MINUS);} | p: PLUS^
{#p.setType(SIGN_PLUS);})         
	runBaseExpr
	;
	
runPrimaryExpr	
	: 
  	RUNVARIABLE
  	| 
  	(LPAREN^ runExpr RPAREN! )
  	| 
  	runFunctionCall
  	;
  

runFunctionCall 
	:
       	(CABS^ | CSIGN^) LPAREN! runExprList RPAREN! 
       	|
       	(CMAX^) => (CMAX^  LPAREN! runBatchExprList RPAREN!)
       		| 
       		(CMAX^  LPAREN! runExprList RPAREN!) 	
       		|
       	(CMIN^) => (CMIN^  LPAREN! runBatchExprList RPAREN!)
       		| (CMIN^  LPAREN! runExprList RPAREN!) 
       	|
       	(CAVG^) => (CAVG^  LPAREN! runExprList RPAREN!)
       		| 
       		(CAVG^  LPAREN! runExpr RPAREN!) 
	;
	
runExprList 
  	:
	runExpr (SEP! runExpr)+ {## = #(#[SEP], ##); }
	;
	


runBatchExprList
	:
	(runExpr SEP!) =>
			runExpr SEP! runBatchExprList 
			| 
			runExpr SEP! batchExpr
	|
	(batchExpr SEP!) =>
		batchExpr SEP! runBatchExprList
		|
		batchExpr SEP! runExpr
	;




class ExpressionLexer extends Lexer;

options {
	caseSensitive = false;
	k = 8;
}

PLUS	: 
	'+' 
	;

MINUS	: 
	'-' 
	;

MULT	: 
	'*' 
	;

DIV	: 
	'/'  
	; 

LPAREN	: 
	'(' 
	;

RPAREN	: 
	')' 
	;

protected DIGIT 
	: 
	'0'..'9' 
	;

WS 	:
	(' '
	| 
	'\t'
	|
	'\r' '\n' {newline(); }
	| 
	'\n'	{newline(); }
	)
	{ $setType(Token.SKIP); }
	;	
	
DOUBLE 	:	
	(DIGIT)+ ('.' (DIGIT)+)? ('e' (MINUS|PLUS)? (DIGIT)+ )? 
	;	

ASSIGN	:       
	'=' 
	;

SEP	:
	'\\' 
	;


RUNCSID		
	:	
	"rsc."
	; 

RUNVARIABLE 	
	:
	"r."
	;
	
BATCHCSID	
	:	
	"bsc."
	;
	
BATCHVARIABLE      
	:	
	"b."
	;
	
CMAX	: 
	"c_max"
	;
	
CMIN	:
	"c_min"
	;
	
CABS	:
	"c_abs"
	;
	
CAVG	:			
	"c_avg"
	;

CSIGN	: 
	"c_sign" 
	;
From craymer at warpiv.com  Fri Apr 28 02:04:24 2006
From: craymer at warpiv.com (Loring Craymer)
Date: Fri Apr 28 02:04:31 2006
Subject: [antlr-interest] Grammar nondeterminism on recursion
	beginner'squestion
In-Reply-To: <0563741883A49249B93A75DF219F8C22014C1A1D@SZVSE201>
Message-ID: <003c01c66aa2$c1919e70$8a02a8c0@Fafnir>

The most reasonable way is to combine the rules called by runExpr and
batchExpr, and return a three-valued integer as to whether a RUNVARIABLE or
BATCHVARIABLE (or DOUBLE) has been encountered or not:

primaryExpr 
returns [int flag = 0]
:
   	DOUBLE { flag = -1; }
   	|
   	BATCHVARIABLE { flag = -1; }
	|
	RUNVARIABLE { flag = 1; }
   	|
   	(LPAREN^ flag = batchExpr RPAREN! )
   	|
   	flag = functionCall
   	;

signedExpr
returns [int flag]
	:
	(m: MINUS^ {#m.setType(SIGN_MINUS);} | p: PLUS^
{#p.setType(SIGN_PLUS);})         
	flag = baseExpr
	;	

and so forth.  (sumExpr will require two flags; an error condition exists if
flag1 * flag2 == -1.)  I won't ask why DOUBLEs can occur in batchExprs and
not runExprs--or even why there is a difference, since the RUNCSID and
BATCHCSID distinguish the result--although that seems very odd.

Basically, the idea is to distinguish runExprs from batchExprs semantically,
not syntactically.  Build trees according to recognized semantics (e. g.,
have a BATCH_SEP and a RUN_SEP for lists) so that they are differentiated
syntactically during tree walks.

--Loring

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Stritzel.Nils@infineon.com
> Sent: Friday, April 28, 2006 12:38 AM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] Grammar nondeterminism on recursion
> beginner'squestion
> 
> Hi all,
> 
> I am still working my fomrula parser and after solving an earlier issue
> (thanks to Martin Probst).
> But now I have got a new problem.
> 
> My grammar includes a list that contains to different types of elements
> runExpr and batchExpr. This is supposed to contains and list one runExpr
> and one batchExpr.
> 
> runBatchExprList
> 	:
> 	(runExpr SEP!) =>
> 			runExpr SEP! runBatchExprList
> 			|
> 			runExpr SEP! batchExpr
> 	|
> 	(batchExpr SEP!) =>
> 		batchExpr SEP! runBatchExprList
> 		|
> 		batchExpr SEP! runExpr
> 	;
> 
> But the matter is that runExpr and batchExpr can start with the same
> Tokens so this seemingly causes some problem.
> Is there a way to make the parser know which is the right alternative?
> Can I get this to work without rewriting everything?
> Below is my (for this posting somewhat simplified) grammar.
> Maybe the question boils down to the question, how to choose correctly
> from a a rule like this:
> Rule1 : batchExpr | runExpr ;
> 
> 
> Thanks,
> 
> Nils
> 
> 
> 
> 
> class ExpressionParser extends Parser;
> options {
> 	buildAST = true;	// uses CommonAST by default
> 	k = 1;
> }
> 
> imaginaryTokenDefinitions
> 	:
> 	SIGN_MINUS
> 	SIGN_PLUS
> 	;
> 
> expr	:
> 	(formula)* EOF!
> 	;
> 
> formula
> 	:
> 	BATCHCSID ASSIGN^ batchExpr
> 	|
> 	RUNCSID ASSIGN^ runExpr
> 	;
> 
> batchExpr
> 	:
> 	sumExpr
> 	;
> 
> sumExpr :
> 	baseExpr ((PLUS^|MINUS^) baseExpr)*
> 	;
> 
> baseExpr
> 	:
> 	primaryExpr
> 	|
> 	signedExpr
> 	;
> 
> signedExpr
> 	:
> 	(m: MINUS^ {#m.setType(SIGN_MINUS);} | p: PLUS^
> {#p.setType(SIGN_PLUS);})
> 	baseExpr
> 	;
> 
> primaryExpr
>   	:
>   	DOUBLE
>   	|
>   	BATCHVARIABLE
>   	|
>   	(LPAREN^ batchExpr RPAREN! )
>   	|
>   	functionCall
>   	;
> 
> 
> functionCall
> 	:
> 	(CABS^ | CSIGN^) LPAREN! batchExpr RPAREN!
>   	|
>   	((CAVG LPAREN^) => CAVG LPAREN! batchExprList RPAREN!
>   			| CAVG LPAREN! batchExpr RPAREN!)
> 	|
> 	(CMAX^ | CMIN^) LPAREN! batchExprList RPAREN!
>   	;
> 
> 
> batchExprList
>   	:
> 	batchExpr (SEP! batchExpr)+ {## = #(#[SEP], ##); }
> 	;
> 
> runExpr :
> 	runSumExpr
> 	;
> 
> runSumExpr
> 	:
> 	runBaseExpr ((PLUS^|MINUS^) runBaseExpr)*
> 	;
> 
> 
> runBaseExpr
> 	:
> 	runPrimaryExpr
> 	|
> 	runSignedExpr
> 	;
> 
> 
> runSignedExpr
> 	:
>         (m: MINUS^ {#m.setType(SIGN_MINUS);} | p: PLUS^
> {#p.setType(SIGN_PLUS);})
> 	runBaseExpr
> 	;
> 
> runPrimaryExpr
> 	:
>   	RUNVARIABLE
>   	|
>   	(LPAREN^ runExpr RPAREN! )
>   	|
>   	runFunctionCall
>   	;
> 
> 
> runFunctionCall
> 	:
>        	(CABS^ | CSIGN^) LPAREN! runExprList RPAREN!
>        	|
>        	(CMAX^) => (CMAX^  LPAREN! runBatchExprList RPAREN!)
>        		|
>        		(CMAX^  LPAREN! runExprList RPAREN!)
>        		|
>        	(CMIN^) => (CMIN^  LPAREN! runBatchExprList RPAREN!)
>        		| (CMIN^  LPAREN! runExprList RPAREN!)
>        	|
>        	(CAVG^) => (CAVG^  LPAREN! runExprList RPAREN!)
>        		|
>        		(CAVG^  LPAREN! runExpr RPAREN!)
> 	;
> 
> runExprList
>   	:
> 	runExpr (SEP! runExpr)+ {## = #(#[SEP], ##); }
> 	;
> 
> 
> 
> runBatchExprList
> 	:
> 	(runExpr SEP!) =>
> 			runExpr SEP! runBatchExprList
> 			|
> 			runExpr SEP! batchExpr
> 	|
> 	(batchExpr SEP!) =>
> 		batchExpr SEP! runBatchExprList
> 		|
> 		batchExpr SEP! runExpr
> 	;
> 
> 
> 
> 
> class ExpressionLexer extends Lexer;
> 
> options {
> 	caseSensitive = false;
> 	k = 8;
> }
> 
> PLUS	:
> 	'+'
> 	;
> 
> MINUS	:
> 	'-'
> 	;
> 
> MULT	:
> 	'*'
> 	;
> 
> DIV	:
> 	'/'
> 	;
> 
> LPAREN	:
> 	'('
> 	;
> 
> RPAREN	:
> 	')'
> 	;
> 
> protected DIGIT
> 	:
> 	'0'..'9'
> 	;
> 
> WS 	:
> 	(' '
> 	|
> 	'\t'
> 	|
> 	'\r' '\n' {newline(); }
> 	|
> 	'\n'	{newline(); }
> 	)
> 	{ $setType(Token.SKIP); }
> 	;
> 
> DOUBLE 	:
> 	(DIGIT)+ ('.' (DIGIT)+)? ('e' (MINUS|PLUS)? (DIGIT)+ )?
> 	;
> 
> ASSIGN	:
> 	'='
> 	;
> 
> SEP	:
> 	'\\'
> 	;
> 
> 
> RUNCSID
> 	:
> 	"rsc."
> 	;
> 
> RUNVARIABLE
> 	:
> 	"r."
> 	;
> 
> BATCHCSID
> 	:
> 	"bsc."
> 	;
> 
> BATCHVARIABLE
> 	:
> 	"b."
> 	;
> 
> CMAX	:
> 	"c_max"
> 	;
> 
> CMIN	:
> 	"c_min"
> 	;
> 
> CABS	:
> 	"c_abs"
> 	;
> 
> CAVG	:
> 	"c_avg"
> 	;
> 
> CSIGN	:
> 	"c_sign"
> 	;

From Stritzel.Nils at infineon.com  Fri Apr 28 02:16:01 2006
From: Stritzel.Nils at infineon.com (Stritzel.Nils@infineon.com)
Date: Fri Apr 28 02:16:06 2006
Subject: [antlr-interest] Grammar nondeterminism on recursion
	beginner'squestion
Message-ID: <0563741883A49249B93A75DF219F8C22014C1B13@SZVSE201>

 Thanks, I got your idea. Since you asked (or rather explicitly did not
ask) why DOUBLEs can occur in batchExprs and not runExprs, the answer is
rather simple, because runExpr is a variable standing for a value or
array (to be read from a Database or wherever), but don't ask me why
it's legacy.

Nils

-----Original Message-----
From: Loring Craymer [mailto:craymer@warpiv.com] 
Sent: Friday, April 28, 2006 5:04 PM
To: Nils Stritzel (IFIS DC); antlr-interest@antlr.org
Subject: RE: [antlr-interest] Grammar nondeterminism on recursion
beginner'squestion

The most reasonable way is to combine the rules called by runExpr and
batchExpr, and return a three-valued integer as to whether a RUNVARIABLE
or BATCHVARIABLE (or DOUBLE) has been encountered or not:

primaryExpr
returns [int flag = 0]
:
   	DOUBLE { flag = -1; }
   	|
   	BATCHVARIABLE { flag = -1; }
	|
	RUNVARIABLE { flag = 1; }
   	|
   	(LPAREN^ flag = batchExpr RPAREN! )
   	|
   	flag = functionCall
   	;

signedExpr
returns [int flag]
	:
	(m: MINUS^ {#m.setType(SIGN_MINUS);} | p: PLUS^
{#p.setType(SIGN_PLUS);})         
	flag = baseExpr
	;	

and so forth.  (sumExpr will require two flags; an error condition
exists if
flag1 * flag2 == -1.)  I won't ask why DOUBLEs can occur in batchExprs
and not runExprs--or even why there is a difference, since the RUNCSID
and BATCHCSID distinguish the result--although that seems very odd.

Basically, the idea is to distinguish runExprs from batchExprs
semantically, not syntactically.  Build trees according to recognized
semantics (e. g., have a BATCH_SEP and a RUN_SEP for lists) so that they
are differentiated syntactically during tree walks.

--Loring

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest- 
> bounces@antlr.org] On Behalf Of Stritzel.Nils@infineon.com
> Sent: Friday, April 28, 2006 12:38 AM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] Grammar nondeterminism on recursion 
> beginner'squestion
> 
> Hi all,
> 
> I am still working my fomrula parser and after solving an earlier 
> issue (thanks to Martin Probst).
> But now I have got a new problem.
> 
> My grammar includes a list that contains to different types of 
> elements runExpr and batchExpr. This is supposed to contains and list 
> one runExpr and one batchExpr.
> 
> runBatchExprList
> 	:
> 	(runExpr SEP!) =>
> 			runExpr SEP! runBatchExprList
> 			|
> 			runExpr SEP! batchExpr
> 	|
> 	(batchExpr SEP!) =>
> 		batchExpr SEP! runBatchExprList
> 		|
> 		batchExpr SEP! runExpr
> 	;
> 
> But the matter is that runExpr and batchExpr can start with the same 
> Tokens so this seemingly causes some problem.
> Is there a way to make the parser know which is the right alternative?
> Can I get this to work without rewriting everything?
> Below is my (for this posting somewhat simplified) grammar.
> Maybe the question boils down to the question, how to choose correctly

> from a a rule like this:
> Rule1 : batchExpr | runExpr ;
> 
> 
> Thanks,
> 
> Nils
> 
> 
> 
> 
> class ExpressionParser extends Parser; options {
> 	buildAST = true;	// uses CommonAST by default
> 	k = 1;
> }
> 
> imaginaryTokenDefinitions
> 	:
> 	SIGN_MINUS
> 	SIGN_PLUS
> 	;
> 
> expr	:
> 	(formula)* EOF!
> 	;
> 
> formula
> 	:
> 	BATCHCSID ASSIGN^ batchExpr
> 	|
> 	RUNCSID ASSIGN^ runExpr
> 	;
> 
> batchExpr
> 	:
> 	sumExpr
> 	;
> 
> sumExpr :
> 	baseExpr ((PLUS^|MINUS^) baseExpr)*
> 	;
> 
> baseExpr
> 	:
> 	primaryExpr
> 	|
> 	signedExpr
> 	;
> 
> signedExpr
> 	:
> 	(m: MINUS^ {#m.setType(SIGN_MINUS);} | p: PLUS^
> {#p.setType(SIGN_PLUS);})
> 	baseExpr
> 	;
> 
> primaryExpr
>   	:
>   	DOUBLE
>   	|
>   	BATCHVARIABLE
>   	|
>   	(LPAREN^ batchExpr RPAREN! )
>   	|
>   	functionCall
>   	;
> 
> 
> functionCall
> 	:
> 	(CABS^ | CSIGN^) LPAREN! batchExpr RPAREN!
>   	|
>   	((CAVG LPAREN^) => CAVG LPAREN! batchExprList RPAREN!
>   			| CAVG LPAREN! batchExpr RPAREN!)
> 	|
> 	(CMAX^ | CMIN^) LPAREN! batchExprList RPAREN!
>   	;
> 
> 
> batchExprList
>   	:
> 	batchExpr (SEP! batchExpr)+ {## = #(#[SEP], ##); }
> 	;
> 
> runExpr :
> 	runSumExpr
> 	;
> 
> runSumExpr
> 	:
> 	runBaseExpr ((PLUS^|MINUS^) runBaseExpr)*
> 	;
> 
> 
> runBaseExpr
> 	:
> 	runPrimaryExpr
> 	|
> 	runSignedExpr
> 	;
> 
> 
> runSignedExpr
> 	:
>         (m: MINUS^ {#m.setType(SIGN_MINUS);} | p: PLUS^
> {#p.setType(SIGN_PLUS);})
> 	runBaseExpr
> 	;
> 
> runPrimaryExpr
> 	:
>   	RUNVARIABLE
>   	|
>   	(LPAREN^ runExpr RPAREN! )
>   	|
>   	runFunctionCall
>   	;
> 
> 
> runFunctionCall
> 	:
>        	(CABS^ | CSIGN^) LPAREN! runExprList RPAREN!
>        	|
>        	(CMAX^) => (CMAX^  LPAREN! runBatchExprList RPAREN!)
>        		|
>        		(CMAX^  LPAREN! runExprList RPAREN!)
>        		|
>        	(CMIN^) => (CMIN^  LPAREN! runBatchExprList RPAREN!)
>        		| (CMIN^  LPAREN! runExprList RPAREN!)
>        	|
>        	(CAVG^) => (CAVG^  LPAREN! runExprList RPAREN!)
>        		|
>        		(CAVG^  LPAREN! runExpr RPAREN!)
> 	;
> 
> runExprList
>   	:
> 	runExpr (SEP! runExpr)+ {## = #(#[SEP], ##); }
> 	;
> 
> 
> 
> runBatchExprList
> 	:
> 	(runExpr SEP!) =>
> 			runExpr SEP! runBatchExprList
> 			|
> 			runExpr SEP! batchExpr
> 	|
> 	(batchExpr SEP!) =>
> 		batchExpr SEP! runBatchExprList
> 		|
> 		batchExpr SEP! runExpr
> 	;
> 
> 
> 
> 
> class ExpressionLexer extends Lexer;
> 
> options {
> 	caseSensitive = false;
> 	k = 8;
> }
> 
> PLUS	:
> 	'+'
> 	;
> 
> MINUS	:
> 	'-'
> 	;
> 
> MULT	:
> 	'*'
> 	;
> 
> DIV	:
> 	'/'
> 	;
> 
> LPAREN	:
> 	'('
> 	;
> 
> RPAREN	:
> 	')'
> 	;
> 
> protected DIGIT
> 	:
> 	'0'..'9'
> 	;
> 
> WS 	:
> 	(' '
> 	|
> 	'\t'
> 	|
> 	'\r' '\n' {newline(); }
> 	|
> 	'\n'	{newline(); }
> 	)
> 	{ $setType(Token.SKIP); }
> 	;
> 
> DOUBLE 	:
> 	(DIGIT)+ ('.' (DIGIT)+)? ('e' (MINUS|PLUS)? (DIGIT)+ )?
> 	;
> 
> ASSIGN	:
> 	'='
> 	;
> 
> SEP	:
> 	'\\'
> 	;
> 
> 
> RUNCSID
> 	:
> 	"rsc."
> 	;
> 
> RUNVARIABLE
> 	:
> 	"r."
> 	;
> 
> BATCHCSID
> 	:
> 	"bsc."
> 	;
> 
> BATCHVARIABLE
> 	:
> 	"b."
> 	;
> 
> CMAX	:
> 	"c_max"
> 	;
> 
> CMIN	:
> 	"c_min"
> 	;
> 
> CABS	:
> 	"c_abs"
> 	;
> 
> CAVG	:
> 	"c_avg"
> 	;
> 
> CSIGN	:
> 	"c_sign"
> 	;
From jimi at temporal-wave.com  Fri Apr 28 07:17:14 2006
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri Apr 28 07:18:05 2006
Subject: [antlr-interest] calling all ANTLR v3 aficiandos
References: <735AB18E-4B0A-47B0-9B56-B7D30872E72B@cs.usfca.edu>
Message-ID: <B36CCC332A32904F8FA3DE134A23533608A5B8@wavemachine.temporal-wave.com>

I'll start it this weekend, starting with some basic structure and then anyone can go in and correct mistakes or add additional information.
 
Jim

________________________________

From: antlr-interest-bounces@antlr.org on behalf of Terence Parr
Sent: Tue 4/25/2006 12:47 AM
To: ANTLR Interest
Subject: [antlr-interest] calling all ANTLR v3 aficiandos



Howdy,

If you have played with v3 and know something, can we start a how-to 
guide or at least a "how to convert to v3" guide in the wiki?  If you 
wait for me to get the doc moving, it'll be a while.  I'll coding for 
about 1.5 - 2 more months before beta.

http://www.antlr.org/wiki

Thanks
Ter


From david.crosson at wanadoo.fr  Fri Apr 28 08:08:36 2006
From: david.crosson at wanadoo.fr (David CROSSON)
Date: Fri Apr 28 08:08:41 2006
Subject: [antlr-interest] Antlr v3.0ea8 :
 java.lang.IllegalArgumentException: Can't find
 template tokenRefBang.st
Message-ID: <6296399.1146236916386.JavaMail.www@wwinf1623>

Hi,

  I'm trying to use antlr v3 on a converted grammar which was working
fine on v2 and I got an understandable error :

"internal error: C:\cygwin\home\Administrateur\dev\StackDumpParser/etc/basic.g : java.lang.IllegalArgumentException: Can't find template tokenRefBang.st"


the full error message is :


ANTLR Parser Generator   Early Access Version 3.0ea8 (Mar 11, 2006)  1989-2006
C:\cygwin\home\Administrateur\dev\StackDumpParser/etc/basic.g:72:20: Decision can match input such as "WS" using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
C:\cygwin\home\Administrateur\dev\StackDumpParser/etc/basic.g:98:43: Decision can match input such as "WS" using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
C:\cygwin\home\Administrateur\dev\StackDumpParser/etc/basic.g:99:43: Decision can match input such as "WS" using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
internal error: C:\cygwin\home\Administrateur\dev\StackDumpParser/etc/basic.g : java.lang.IllegalArgumentException: Can't find template tokenRefBang.st
org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate(StringTemplateGroup.java:477)
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:364)
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:376)
org.antlr.codegen.CodeGenTreeWalker.getTokenElementST(CodeGenTreeWalker.java:149)
org.antlr.codegen.CodeGenTreeWalker.atom(CodeGenTreeWalker.java:1814)
org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1294)
org.antlr.codegen.CodeGenTreeWalker.alternative(CodeGenTreeWalker.java:1052)
org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:936)
org.antlr.codegen.CodeGenTreeWalker.rule(CodeGenTreeWalker.java:681)
org.antlr.codegen.CodeGenTreeWalker.rules(CodeGenTreeWalker.java:490)
org.antlr.codegen.CodeGenTreeWalker.grammarSpec(CodeGenTreeWalker.java:439)
org.antlr.codegen.CodeGenTreeWalker.grammar(CodeGenTreeWalker.java:291)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:339)
org.antlr.Tool.processGrammar(Tool.java:285)
org.antlr.Tool.process(Tool.java:222)
org.antlr.Tool.main(Tool.java:72)


may be something is missing in the ea8 packaging ?

Best regards,
David Crosson.


From parrt at cs.usfca.edu  Fri Apr 28 08:22:15 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Apr 28 08:22:17 2006
Subject: [antlr-interest] calling all ANTLR v3 aficiandos
In-Reply-To: <B36CCC332A32904F8FA3DE134A23533608A5B8@wavemachine.temporal-wave.com>
References: <735AB18E-4B0A-47B0-9B56-B7D30872E72B@cs.usfca.edu>
	<B36CCC332A32904F8FA3DE134A23533608A5B8@wavemachine.temporal-wave.com>
Message-ID: <D26B9106-4C21-4820-BD58-BFE9CE97D900@cs.usfca.edu>


On Apr 28, 2006, at 7:17 AM, Jim Idle wrote:

> I'll start it this weekend, starting with some basic structure and  
> then anyone can go in and correct mistakes or add additional  
> information.

Awesome...i'll help :)
Ter

From parrt at cs.usfca.edu  Fri Apr 28 08:23:14 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Apr 28 08:23:18 2006
Subject: [antlr-interest] Antlr v3.0ea8 :
	java.lang.IllegalArgumentException: Can't find template
	tokenRefBang.st
In-Reply-To: <6296399.1146236916386.JavaMail.www@wwinf1623>
References: <6296399.1146236916386.JavaMail.www@wwinf1623>
Message-ID: <F8DCE599-39DE-4083-8CD3-BC6DE8CA8D64@cs.usfca.edu>


On Apr 28, 2006, at 8:08 AM, David CROSSON wrote:

> Hi,
>
>   I'm trying to use antlr v3 on a converted grammar which was working
> fine on v2 and I got an understandable error :
>
> "internal error: C:\cygwin\home\Administrateur\dev\StackDumpParser/ 
> etc/basic.g : java.lang.IllegalArgumentException: Can't find  
> template tokenRefBang.st"

That is most likely using ! when output=AST is not on.  I have not  
cleaned up error handling yet.

Ter
From aheller at gmx.at  Fri Apr 28 10:37:16 2006
From: aheller at gmx.at (Arnulf Heller)
Date: Fri Apr 28 10:37:53 2006
Subject: [antlr-interest] Templates in rules
Message-ID: <7.0.1.0.0.20060428193538.01e93600@gmx.at>

Hi,

depending on the direction of flow of information (top-down, 
bottom-up), you can do the following:

class A : public base;
class B : public base;

Foo [vector<base*>& v]
:
         ( X {v.push_back(new A);} | Y {v.push_back(new B);} )
;

alternatively, you can return different vectors

class AnyVector { /* empty */ };
class Avector : public AnyVector { std::vector<A> imp; };
class Bvector : public AnyVector { std::vector<B> imp; };

Foo returns [AnyVector* v]
:
         ( X {v = new AVector;} | Y {v = new BVector;} )
;

or

X returns [AVector* v]
Y returns [BVector* v]
Foo returns [AnyVector* v] : (X|Y);

don't take the code above literally, I don't know the exact ANTLR 
syntax by heart.

hope that helps,
arnulf

At 08:21 27.04.2006, you wrote:
>Hi all,
>
>The software I'm currently writing (in C++) uses a lot of template classes.
>I'm also writing a frontend in ANTLR that has to interact with those
>template classes.
>What I found myself doing was writing wrappers for those template classes so
>that I could pass the as a variable from one rule to another but this is a
>very inconvenient way.
>
>So let's say I have;
>std::vector<A>
>std::vector<B>
>
>I have written the following wrapper classes; class AnyVector {
>         ...
>         std::vector<A> imp;
>};
>class Avector : public AnyVector
>{
>         ...
>         std::vector<A> imp;
>};
>
>class Bvector : public AnyVector
>{
>         ...
>         std::vector<B> imp;
>};
>
>So that I can have the following rule
>
>Foo [AnyVector& theVector]
>:
>         ( X | Y )
>;
>
>What I would like to have is something like this;
>
>Foo <Element>[std::vector<Element>& theVector]
>:
>         ( X | Y )
>;
>
>Is there any way that I can parametrize an antlr rule to achieve that
>effect?
>
>TIA,
>
>Corno

From robgreene at gmail.com  Sat Apr 29 11:02:35 2006
From: robgreene at gmail.com (Rob Greene)
Date: Sat Apr 29 11:02:41 2006
Subject: [antlr-interest] Question concerning writing a TreeParser rule
In-Reply-To: <8032D33B-30C4-4024-889B-B3004B74B971@martin-probst.com>
References: <0563741883A49249B93A75DF219F8C220149ACCA@SZVSE201>
	<8032D33B-30C4-4024-889B-B3004B74B971@martin-probst.com>
Message-ID: <738584f80604291102t4e776cb2o40d88c32f785193c@mail.gmail.com>

Talk about timely! I had just gotten a single statement to start generating
pseudo-code but I couldn't figure out how to take a step back and work
through a series of program statements. This post clued me in...

I ended up using something slightly different, and I don't see the need for
the multi switch. I'm wondering if anyone can comment on that? (I always
assume I'm missing something...)

The core of my grammar looks like this:
program
    :    statement (SEP! statement)* { ## = #(#[SEP,"program"], ##); } EOF!
    ;
statement
    :    ID EQUALS^ expression
    |    PRINT^ expression (COMMA! expression)*
    ;
expression
    :    atom ( (PLUS^ | MINUS^) expression )?
    ;
atom
    :    ID
    |    INT
    |    LPAREN expression RPAREN
    ;

My tree parser is like this:
program
    : #(SEP (statement)* ) { dump(); }
    ;
statement
{
    String a,b;
}
    : #(EQUALS a=expression b=expression)
        { addCode("MOV " + a + "," + b); }
    | #(PRINT a=expression)
        { addCode("PRINT " + a); }
    ;
expression returns [String var]
{
    String a,b;
    var = null;
}
    : #(PLUS a=expression b=expression)
        { var=getTempVar(); addCode("ADD " + var + "," + a + "," + b); }
    | #(MINUS a=expression b=expression)
        { var=getTempVar(); addCode("SUB " + var + "," + a + "," + b); }
    | id:ID
        { var= getVariable(id.getText()); }
    | n:INT
        { var= getConstant(n.getText()); }
    ;

I'm taking baby steps - and I think I jumped too early the last try!

Question (again): Is the multi switch needed? I don't think so, but thought
I should ask. This grammar handles multiple statements just fine... (ok,
I've tested two)

The program rule was what stumped me. It's not like it gets anything
returned to it (ie, expression returns a variable name in this grammar), so
I couldn't figure out the tree parser rule until I saw this sample. I needed
the program rule because I want to dump out psuedo code declaring variables,
constants, and code once I've gathered all the information.

Thanks!  The whole concept of language design is too cool.  :-)
-Rob

On 4/26/06, Martin Probst <mail@martin-probst.com> wrote:
>
> Hi,
>
> it's probably going to be easier if you modify your rule like this:
>
> batchExprList {
>    boolean multi = false;
> }       :
>         batchExpr (SEP! batchExpr { multi = true; })*
>         { if (multi) ## = #(#[SEP], ##); }
>         ;
>
> This gives you the follwing tree:
>                      SEP
>         /               |               \
>        ...              ...             ...
>
> instead of
>                 SEP
>           /              \
>        SEP        ....
>    /       \
> ...     ....
>
> This way you can have this tree parser rule:
>
> list: #( SEP ( x=expr  { myarraylist.add(x); } )* )
>
> Otherwise you'd have to have a member variable for the tree parser
> (current list root or something), check for it's existence, delete it
> if necessary etc. - this will make it a lot easier.
>
> Martin
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060429/795fba0c/attachment.html
From parrt at cs.usfca.edu  Sat Apr 29 13:07:25 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Apr 29 13:07:30 2006
Subject: [antlr-interest] lecture mp3
Message-ID: <AC8F1487-A18E-4F7E-A992-A365D82FF8C2@cs.usfca.edu>

Hi, added v3 overview mp3 (cut off a bit):

http://www.antlr.org/v3/index.html

down near bottom of page:

http://www.antlr.org/workshop/ANTLR2005/audio/ANTLR-v3-overview.mp3

Ter
From ewbank at gmail.com  Sat Apr 29 16:26:09 2006
From: ewbank at gmail.com (Bryan Ewbank)
Date: Sat Apr 29 16:26:16 2006
Subject: [antlr-interest] Question concerning writing a TreeParser rule
In-Reply-To: <738584f80604291102t4e776cb2o40d88c32f785193c@mail.gmail.com>
References: <0563741883A49249B93A75DF219F8C220149ACCA@SZVSE201>
	<8032D33B-30C4-4024-889B-B3004B74B971@martin-probst.com>
	<738584f80604291102t4e776cb2o40d88c32f785193c@mail.gmail.com>
Message-ID: <dd3a065f0604291626n79a43bc4l502114b5f792d764@mail.gmail.com>

No, it's not really needed.  The tree is more regular if you always add the
"SEP" parent, which reduces user (i.e., your) errors in later passes.

Sometimes you need to know if it's a single- or a multi-statement block, but
you can always use getNumberOfChildren() to figure that out.

- Bryan

On 4/29/06, Rob Greene <robgreene@gmail.com> wrote:
>
> Talk about timely! I had just gotten a single statement to start
> generating pseudo-code but I couldn't figure out how to take a step back and
> work through a series of program statements. This post clued me in...
>
> I ended up using something slightly different, and I don't see the need
> for the multi switch. I'm wondering if anyone can comment on that? (I always
> assume I'm missing something...)
>
> The core of my grammar looks like this:
> program
>     :    statement (SEP! statement)* { ## = #(#[SEP,"program"], ##); }
> EOF!
>     ;
> statement
>     :    ID EQUALS^ expression
>     |    PRINT^ expression (COMMA! expression)*
>     ;
> expression
>     :    atom ( (PLUS^ | MINUS^) expression )?
>     ;
> atom
>     :    ID
>     |    INT
>     |    LPAREN expression RPAREN
>     ;
>
> My tree parser is like this:
> program
>     : #(SEP (statement)* ) { dump(); }
>     ;
> statement
> {
>     String a,b;
> }
>     : #(EQUALS a=expression b=expression)
>         { addCode("MOV " + a + "," + b); }
>     | #(PRINT a=expression)
>         { addCode("PRINT " + a); }
>     ;
> expression returns [String var]
> {
>     String a,b;
>     var = null;
> }
>     : #(PLUS a=expression b=expression)
>         { var=getTempVar(); addCode("ADD " + var + "," + a + "," + b); }
>     | #(MINUS a=expression b=expression)
>         { var=getTempVar(); addCode("SUB " + var + "," + a + "," + b); }
>     | id:ID
>         { var= getVariable(id.getText()); }
>     | n:INT
>         { var= getConstant(n.getText()); }
>     ;
>
> I'm taking baby steps - and I think I jumped too early the last try!
>
> Question (again): Is the multi switch needed? I don't think so, but
> thought I should ask. This grammar handles multiple statements just fine...
> (ok, I've tested two)
>
> The program rule was what stumped me. It's not like it gets anything
> returned to it (ie, expression returns a variable name in this grammar), so
> I couldn't figure out the tree parser rule until I saw this sample. I needed
> the program rule because I want to dump out psuedo code declaring variables,
> constants, and code once I've gathered all the information.
>
> Thanks!  The whole concept of language design is too cool.  :-)
> -Rob
>
>
> On 4/26/06, Martin Probst <mail@martin-probst.com > wrote:
> >
> > Hi,
> >
> > it's probably going to be easier if you modify your rule like this:
> >
> > batchExprList {
> >    boolean multi = false;
> > }       :
> >         batchExpr (SEP! batchExpr { multi = true; })*
> >         { if (multi) ## = #(#[SEP], ##); }
> >         ;
> >
> > This gives you the follwing tree:
> >                      SEP
> >         /               |               \
> >        ...              ...             ...
> >
> > instead of
> >                 SEP
> >           /              \
> >        SEP        ....
> >    /       \
> > ...     ....
> >
> > This way you can have this tree parser rule:
> >
> > list: #( SEP ( x=expr  { myarraylist.add(x); } )* )
> >
> > Otherwise you'd have to have a member variable for the tree parser
> > (current list root or something), check for it's existence, delete it
> > if necessary etc. - this will make it a lot easier.
> >
> > Martin
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060429/b3e6bcba/attachment.html
From rohit_lodha at yahoo.com  Sun Apr 30 14:33:42 2006
From: rohit_lodha at yahoo.com (Rohit Lodha)
Date: Sun Apr 30 14:33:46 2006
Subject: [antlr-interest] How to execute antlr programatically
Message-ID: <20060430213342.92858.qmail@web36206.mail.mud.yahoo.com>

I am building a custom tool for VS.

I have a string containing the grammer and want to get output as a byte array.

Tool.doEverything needs commandline arguments.

Is there anyway I can achive?

Rohit

		
---------------------------------
Talk is cheap. Use Yahoo! Messenger to make PC-to-Phone calls.  Great rates starting at 1&cent;/min.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060430/d1157753/attachment.html
