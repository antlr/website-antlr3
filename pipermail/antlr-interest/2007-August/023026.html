<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] comments, newlines, and emit()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20comments%2C%20newlines%2C%20and%20emit%28%29&In-Reply-To=%3C051466DAA0D608439E196797955018D702359D%40wavemachine.temporal-wave.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023024.html">
   <LINK REL="Next"  HREF="023020.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] comments, newlines, and emit()</H1>
    <B>Jim Idle</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20comments%2C%20newlines%2C%20and%20emit%28%29&In-Reply-To=%3C051466DAA0D608439E196797955018D702359D%40wavemachine.temporal-wave.com%3E"
       TITLE="[antlr-interest] comments, newlines, and emit()">jimi at temporal-wave.com
       </A><BR>
    <I>Fri Aug  3 14:17:07 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023024.html">[antlr-interest] comments, newlines, and emit()
</A></li>
        <LI>Next message: <A HREF="023020.html">[antlr-interest] different behavior java vs c?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23026">[ date ]</a>
              <a href="thread.html#23026">[ thread ]</a>
              <a href="subject.html#23026">[ subject ]</a>
              <a href="author.html#23026">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I should mention for the C wallas, that this is built in to the input
stream. If you spec your tokens all in upper case, then you can do this:

 

 

input = antlr3NewAsciiStringInPlaceStream(charptr, len, &quot;name&quot;);

input-&gt;setUcaseLA(input, ANTLR3_TRUE);

 

and it all happens magically for you. The LA function can also be
overridden of course in case your upper case conversion is not defined
by the C library toupper() function.

 

Jim

 

From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>
[mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>] On Behalf Of Andy Tripp
Sent: Friday, August 03, 2007 2:03 PM
Cc: antlr-interest
Subject: Re: [antlr-interest] comments, newlines, and emit()

 

Yes, that does it.
Thanks, Jim. Thanks for the other answer on case sensitivity, too!

Andy

Jim Idle wrote: 

Andy,
 
If you need the new line, then why not remove it from the match?
 
LINE_COMMENT
    : '\'' ~('\n'|'\r')* {$channel=HIDDEN;}
    ;
 
The normal rule for newline should then pick it up.
 
Jim
 
  

	-----Original Message-----
	From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A> [mailto:antlr-interest-
	<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">bounces at antlr.org</A>] On Behalf Of Andy Tripp
	Sent: Friday, August 03, 2007 1:06 PM
	To: antlr-interest; Andy Tripp
	Subject: [antlr-interest] comments, newlines, and emit()
	 
	I'm parsing a language (visual basic), in which newlines are
	significant,
	and it also allows single line comments. My comment rule is the
	standard
	one that matches a single quote up to and including the next
newline:
	 
	LINE_COMMENT
	    : '\'' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
	    ;
	 
	The problem is that need to keep the '\n' on the DEFAULT
channel, and
	put the rest on the HIDDEN channel.
	 
	According to the &quot;Emitting More Than One Token per Lexer Rule&quot;
section
	of the book,
	it seems like I should be able to emit the newline on the
DEFAULT
	channel like this:
	 
	LINE_COMMENT
	    : '\'' ~('\n'|'\r')* '\r'? newline='\n' {emit(newline);
	$channel=HIDDEN;}
	    ;
	 
	Yet that generates an emit() call that takes an int, which
doesn't
	compile.
	 
	There must be an easy way to either emit an extra newline token
here.
	Anyone?
	 
	Andy
	    

 
 
  

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20070803/c577cfb6/attachment-0001.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20070803/c577cfb6/attachment-0001.html</A> 
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023024.html">[antlr-interest] comments, newlines, and emit()
</A></li>
	<LI>Next message: <A HREF="023020.html">[antlr-interest] different behavior java vs c?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23026">[ date ]</a>
              <a href="thread.html#23026">[ thread ]</a>
              <a href="subject.html#23026">[ subject ]</a>
              <a href="author.html#23026">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
