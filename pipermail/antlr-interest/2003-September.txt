From boy_wonder48 at hotmail.com  Mon Sep  1 10:56:17 2003
From: boy_wonder48 at hotmail.com (solmalik)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] Re: Help with grammar file
In-Reply-To: <72C9789739C4214096AE945753B11EA36B1DD2@mypxmail04.bco-home.com>
Message-ID: <bj0181+f7ng@eGroups.com>

hi the exact error msg I am getting is "line 1:1: unexpected token: 
null".  Any ideas? and what exactly do you mean placing EOF in the 
start rule? I am totally new to this, so don't really have a clue, 
any help much aprreciated thanks.
--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Try putting EOF in your start rule.  What exactly is the error 
message?
> Does it say what rule it was in.
> 
> Monty
> 
> -----Original Message-----
> From: solmalik [mailto:boy_wonder48@h...] 
> Sent: Saturday, August 23, 2003 6:10 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Help with grammar file
> 
> 
> Hi have greated a grammar file, which is to be used to parse any 
> expressions entered bya user.  The expressions are of process 
> algebra and a typical expression looks like:
> a[0,2];b[0,1], meaning that (a) is to be executed befroe (b) and 
(a) 
> can be executed by no later than of time 2 units.  Below is the 
file 
> I haved used to try and accept an eqxpression of this form, but 
When 
> I come to running it, I get the error message unexpected 
token:null  
> any help is much appreciated. Thanks.
> 
> class P extends Parser;
> 
> //rule one or more equations forllowed by newline
> startRule
> : ( equation NEWLINE )+
> ;
> 
> //a mineqn followed by zero or more operations and mineqns
> equation: mineqn (operation mineqn)*
> ;
> 
> //mineqn is eith ID or an eqn in brackets
> mineqn : ID TIME
> | OPEN equation CLOSE
> ;
> 
> //operations
> operation
> : SEMICOLN
> | BAR_BAR
> | CARET
> | ASTERISK
> | SY_OP
> | RS_OP
> ;
> 
> class L extends Lexer;
> 
> options {
> testLiterals = true;
> }
> 
> // tokens required for synchronisation and restriction
> tokens {
> SY_OP = "sy";
> RS_OP = "rs";
> }
> 
> TIME: '[' ('0' .. '9') ',' ('0' .. '9') ']';
> 
> OPEN: '(' ;
> 
> CLOSE: ')' ;
> 
> SEMICOLN: ';' ;
> BAR_BAR : "|";
> CARET : '^' ;
> ASTERISK: '*' ;
> 
> 
> //ID any letter from a to z
> ID : ('a' .. 'z' | 'A' .. 'Z');
> 
> NEWLINE : ('\r''\n')=> '\r''\n' //DOS
> | '\r' //MAC
> | '\n' //UNIX
> { newline(); }
> ;
> 
> WS : (' '|'\t') { $setType(Token.SKIP); } ;
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sunshine at public.kherson.ua  Mon Sep  1 12:41:09 2003
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] [C++] How to init variables of MyParser ?
Message-ID: <BB797B85.23CD1%sunshine@public.kherson.ua>

Hi guys,

Assume I do such parser

-------------------------------------------------
class VSQL_Parser extends Parser;

{
    public:
        std::ostream*   mstream;
static  bool            print_error_to_console;

void reportError(const antlr::RecognitionException& ex)
{
    if( mstream ) 
        *mstream << ex.toString().c_str() << '\n';

    if( print_error_to_console )
        std::cout << ex.toString().c_str() << '\n';
}

}
-------------------------------------------------


Question is, how I can make ANTLR to generate C++ sources that will init
mstream on construction of parser instance ???

PROBLEM IS:

1) I cannot define own version of constructor in the above { } section.

2) because ANTLR produce the next constructors for parser:

-------------------------------------------------
VSQL_Parser::VSQL_Parser(antlr::TokenBuffer& tokenBuf, int k)
: antlr::LLkParser(tokenBuf,k)
{
}

VSQL_Parser::VSQL_Parser(antlr::TokenBuffer& tokenBuf)
: antlr::LLkParser(tokenBuf,2)
{
}

-------------------------------------------------

3) I think only way to resolve this problem is that ANTLR need generate
constructors that call some InitSelf() method. I can then define such
method.

Yes, this method cannot be virtual.

4) or anybody knows other trick?


-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Tue Sep  2 08:23:47 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] Re: Help with grammar file
In-Reply-To: <bj0181+f7ng@eGroups.com>
Message-ID: <20030902152347.27261.qmail@web20420.mail.yahoo.com>

What Monty means is that whenever your grammar
describes an entire file, your start rule would be
something like:

startRule
  : ( equation NEWLINE )+ EOF
  ;


-Matt


--- solmalik <boy_wonder48@hotmail.com> wrote:
> hi the exact error msg I am getting is "line 1:1:
> unexpected token: 
> null".  Any ideas? and what exactly do you mean
> placing EOF in the 
> start rule? I am totally new to this, so don't
> really have a clue, 
> any help much aprreciated thanks.
> --- In antlr-interest@yahoogroups.com,
> mzukowski@y... wrote:
> > Try putting EOF in your start rule.  What exactly
> is the error 
> message?
> > Does it say what rule it was in.
> > 
> > Monty
> > 
> > -----Original Message-----
> > From: solmalik [mailto:boy_wonder48@h...] 
> > Sent: Saturday, August 23, 2003 6:10 AM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Help with grammar file
> > 
> > 
> > Hi have greated a grammar file, which is to be
> used to parse any 
> > expressions entered bya user.  The expressions are
> of process 
> > algebra and a typical expression looks like:
> > a[0,2];b[0,1], meaning that (a) is to be executed
> befroe (b) and 
> (a) 
> > can be executed by no later than of time 2 units. 
> Below is the 
> file 
> > I haved used to try and accept an eqxpression of
> this form, but 
> When 
> > I come to running it, I get the error message
> unexpected 
> token:null  
> > any help is much appreciated. Thanks.
> > 
> > class P extends Parser;
> > 
> > //rule one or more equations forllowed by newline
> > startRule
> > : ( equation NEWLINE )+
> > ;
> > 
> > //a mineqn followed by zero or more operations and
> mineqns
> > equation: mineqn (operation mineqn)*
> > ;
> > 
> > //mineqn is eith ID or an eqn in brackets
> > mineqn : ID TIME
> > | OPEN equation CLOSE
> > ;
> > 
> > //operations
> > operation
> > : SEMICOLN
> > | BAR_BAR
> > | CARET
> > | ASTERISK
> > | SY_OP
> > | RS_OP
> > ;
> > 
> > class L extends Lexer;
> > 
> > options {
> > testLiterals = true;
> > }
> > 
> > // tokens required for synchronisation and
> restriction
> > tokens {
> > SY_OP = "sy";
> > RS_OP = "rs";
> > }
> > 
> > TIME: '[' ('0' .. '9') ',' ('0' .. '9') ']';
> > 
> > OPEN: '(' ;
> > 
> > CLOSE: ')' ;
> > 
> > SEMICOLN: ';' ;
> > BAR_BAR : "|";
> > CARET : '^' ;
> > ASTERISK: '*' ;
> > 
> > 
> > //ID any letter from a to z
> > ID : ('a' .. 'z' | 'A' .. 'Z');
> > 
> > NEWLINE : ('\r''\n')=> '\r''\n' //DOS
> > | '\r' //MAC
> > | '\n' //UNIX
> > { newline(); }
> > ;
> > 
> > WS : (' '|'\t') { $setType(Token.SKIP); } ;
> > 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
Yahoo! SiteBuilder - Free, easy-to-use web site design software
http://sitebuilder.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue Sep  2 08:37:48 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] Re: Help with grammar file
Message-ID: <72C9789739C4214096AE945753B11EA36B1DE7@mypxmail04.bco-home.com>

startRule
 : ( equation NEWLINE )+ EOF
 ;

Also try stepping through with a debugger or using the -trace option to
antlr.Tool to get a trace of your lexer and parser printed out when you run
it.

Monty

-----Original Message-----
From: solmalik [mailto:boy_wonder48@hotmail.com] 
Sent: Monday, September 01, 2003 10:56 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Help with grammar file


hi the exact error msg I am getting is "line 1:1: unexpected token: 
null".  Any ideas? and what exactly do you mean placing EOF in the 
start rule? I am totally new to this, so don't really have a clue, 
any help much aprreciated thanks.
--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Try putting EOF in your start rule.  What exactly is the error
message?
> Does it say what rule it was in.
> 
> Monty
> 
> -----Original Message-----
> From: solmalik [mailto:boy_wonder48@h...]
> Sent: Saturday, August 23, 2003 6:10 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Help with grammar file
> 
> 
> Hi have greated a grammar file, which is to be used to parse any
> expressions entered bya user.  The expressions are of process 
> algebra and a typical expression looks like:
> a[0,2];b[0,1], meaning that (a) is to be executed befroe (b) and 
(a) 
> can be executed by no later than of time 2 units.  Below is the
file 
> I haved used to try and accept an eqxpression of this form, but
When 
> I come to running it, I get the error message unexpected
token:null  
> any help is much appreciated. Thanks.
> 
> class P extends Parser;
> 
> //rule one or more equations forllowed by newline
> startRule
> : ( equation NEWLINE )+
> ;
> 
> //a mineqn followed by zero or more operations and mineqns
> equation: mineqn (operation mineqn)*
> ;
> 
> //mineqn is eith ID or an eqn in brackets
> mineqn : ID TIME
> | OPEN equation CLOSE
> ;
> 
> //operations
> operation
> : SEMICOLN
> | BAR_BAR
> | CARET
> | ASTERISK
> | SY_OP
> | RS_OP
> ;
> 
> class L extends Lexer;
> 
> options {
> testLiterals = true;
> }
> 
> // tokens required for synchronisation and restriction
> tokens {
> SY_OP = "sy";
> RS_OP = "rs";
> }
> 
> TIME: '[' ('0' .. '9') ',' ('0' .. '9') ']';
> 
> OPEN: '(' ;
> 
> CLOSE: ')' ;
> 
> SEMICOLN: ';' ;
> BAR_BAR : "|";
> CARET : '^' ;
> ASTERISK: '*' ;
> 
> 
> //ID any letter from a to z
> ID : ('a' .. 'z' | 'A' .. 'Z');
> 
> NEWLINE : ('\r''\n')=> '\r''\n' //DOS
> | '\r' //MAC
> | '\n' //UNIX
> { newline(); }
> ;
> 
> WS : (' '|'\t') { $setType(Token.SKIP); } ;
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From netminka at netscape.net  Tue Sep  2 10:59:57 2003
From: netminka at netscape.net (netminka@netscape.net)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] frustrated with lexer
Message-ID: <0700C2DA.3498AFF3.00A2087F@netscape.net>

I like the expression parsers and the tree parsers a lot, but this lexer
implementation is bogus, in my opinion. Maybe the wizards out there can
direct me to the simple solution for what I believe should be a simple problem. If not, next time I will using another lexer with antlr, or 
if none is available, use another parser generator totally. That would
be unfortunate, because there is a lot to like here.

BUT THE LEXER!!!

I have spend more hours spinning, trying to find ways around this lexer
to solve what would be simple cases in flex. It's just not worth it!

The latest example:
I sometimes need to scan ahead through the input and once I've
determined the context or whatever, push back what I've scanned onto the input stream. I DON'T NEED to push back everything but the first character!
Which seems to be the consume() default. 

How is this consume default changed? Example please!

Here is the specific situation:
END
    : ("End" LINE_TERMINATOR) => ENDEXIT
    | ("End" (' ' | '\t')+) => ENDCHECK
    ;

In the case that "End" followed by the above stuff is not recognized
(e.g. the string 'EndTest') the lexer consumes the 'E' and I'm left with
'ndTest'. Note my ENDCHECK and ENDEXIT are protected. 

I also don't like
the hoisting of rules in nextToken based on left hand side semantic predicates; the effects are unpredictable and overly complex. The ordering
of matching rules is overly complex and thus unpredictable as well. 

thanks for any help you can give.
megan adams 


__________________________________________________________________
McAfee VirusScan Online from the Netscape Network.
Comprehensive protection for your entire computer. Get your free trial today!
http://channels.netscape.com/ns/computing/mcafee/index.jsp?promo=393397

Get AOL Instant Messenger 5.1 free of charge.  Download Now!
http://aim.aol.com/aimnew/Aim/register.adp?promo=380455

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Wed Sep  3 12:17:07 2003
From: klaren at cs.utwente.nl (izniegoed)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] Re: [C++] How to init variables of MyParser ?
In-Reply-To: <BB797B85.23CD1%sunshine@public.kherson.ua>
Message-ID: <bj5enj+fh0t@eGroups.com>

Hi,

--- In antlr-interest@yahoogroups.com, Ruslan Zasukhin <sunshine@p...>
wrote:
> Question is, how I can make ANTLR to generate C++ sources that will init
> mstream on construction of parser instance ???

I see two options:

1. Use constructors with different signatures as the default ones
provided by antlr.

2. Turn of generation of default constructors. (development versions
contain a option for it) if you use it you have to provide all
constructors yourself.

Cheers,

Ric



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sunshine at public.kherson.ua  Wed Sep  3 12:27:07 2003
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] Re: [C++] How to init variables of MyParser ?
In-Reply-To: <bj5enj+fh0t@eGroups.com>
Message-ID: <BB7C1B3B.23F55%sunshine@public.kherson.ua>

on 9/3/03 10:17 PM, izniegoed at klaren@cs.utwente.nl wrote:

> Hi,
> 
> --- In antlr-interest@yahoogroups.com, Ruslan Zasukhin <sunshine@p...>
> wrote:
>> Question is, how I can make ANTLR to generate C++ sources that will init
>> mstream on construction of parser instance ???
> 
> I see two options:
> 
> 1. Use constructors with different signatures as the default ones
> provided by antlr.
> 
> 2. Turn of generation of default constructors. (development versions
> contain a option for it) if you use it you have to provide all
> constructors yourself.

But I suggest other way:

Each constructor generated by ANTLR should call some empty function.
And we can implement this function in grammar. Or this can be as option in
Parser class.

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From zhangcharles at yahoo.com  Wed Sep  3 12:39:01 2003
From: zhangcharles at yahoo.com (zhangcharles)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] Problem with inner interface
Message-ID: <bj5g0l+5pea@eGroups.com>

Hi, the current java.tree.g grammar doesn't seem to take inner 
interface definition into consideration. Any advices of how to add 
it since I'm not a grammar expert. Thanks a lot.

Charles


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From atripp at comcast.net  Wed Sep  3 12:46:18 2003
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] How do I specify literals in lexer?
Message-ID: <bj5gea+1kr7@eGroups.com>

Hi,

I have a grammar file that contains a lexer but no parser and
I want to specify literals in it. The ANTLR documentation says:

"Second, literals may be specified in the lexer grammar by means of
the literal option".

But there is no "literal" option shown in the documentation.
Is there an easy way to specify literals in the lexer?
Thanks,
Andy


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Mike.Jones at woofumdust.com  Wed Sep  3 21:20:38 2003
From: Mike.Jones at woofumdust.com (Mike Jones)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] Passing values in tree walker
Message-ID: <000001c3729b$e7dfb140$fe01a8c0@woofumdust.com>

There is an example tree walker in the documentation that shows how to
return a value:

class CalcTreeWalker extends TreeParser;

expr returns [int r]
{
	int a,b;
	r=0;
}
	:	#(PLUS a=expr b=expr) {r = a+b;}
	|	#(STAR a=expr b=expr) {r = a*b;}
	|	i:INT		      {r =
Integer.parseInt(i.getText());}
	;

If I wanted to pass a value to expr, how would I do it?

I tried:

Expr (int i) returns [int r]

but this does not appear to be valid syntax. Nothing in the
documentation says you can do this. Is it possible?

The reason I would like to do it is so I can easily create a list of
things while recursively processing nodes. Otherwise I have to create
some kind of global and manage it carefully.

Mike


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Wed Sep  3 22:05:39 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] Passing values in tree walker
In-Reply-To: <000001c3729b$e7dfb140$fe01a8c0@woofumdust.com>
Message-ID: <6CFEB1FE-DE95-11D7-B282-000393BB647E@cs.usfca.edu>

Hi Mike, try

expr[int i] returns [int r] : ... ;

:)

Terence

On Wednesday, September 3, 2003, at 09:20  PM, Mike Jones wrote:

> There is an example tree walker in the documentation that shows how to
> return a value:
>
> class CalcTreeWalker extends TreeParser;
>
> expr returns [int r]
> {
> 	int a,b;
> 	r=0;
> }
> 	:	#(PLUS a=expr b=expr) {r = a+b;}
> 	|	#(STAR a=expr b=expr) {r = a*b;}
> 	|	i:INT		      {r =
> Integer.parseInt(i.getText());}
> 	;
>
> If I wanted to pass a value to expr, how would I do it?
>
> I tried:
>
> Expr (int i) returns [int r]
>
> but this does not appear to be valid syntax. Nothing in the
> documentation says you can do this. Is it possible?
>
> The reason I would like to do it is so I can easily create a list of
> things while recursively processing nodes. Otherwise I have to create
> some kind of global and manage it carefully.
>
> Mike
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com link sharing, pure-n-simple




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Mike.Jones at woofumdust.com  Wed Sep  3 22:32:50 2003
From: Mike.Jones at woofumdust.com (Mike Jones)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] Passing values in tree walker
In-Reply-To: <6CFEB1FE-DE95-11D7-B282-000393BB647E@cs.usfca.edu>
Message-ID: <000001c372a5$fcbe0df0$fe01a8c0@woofumdust.com>

Terence,

I feel stupid!

Ok, so to reference it:

Expr2
{
	int i2;
}
: expr[i2]
;

I tried that and the resulting code fails because it only calls with the
AST parameter.

Any suggestion?

Mike

-----Original Message-----
From: Terence Parr [mailto:parrt@cs.usfca.edu] 
Sent: Wednesday, September 03, 2003 11:06 PM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] Passing values in tree walker

Hi Mike, try

expr[int i] returns [int r] : ... ;

:)

Terence

On Wednesday, September 3, 2003, at 09:20  PM, Mike Jones wrote:

> There is an example tree walker in the documentation that shows how to
> return a value:
>
> class CalcTreeWalker extends TreeParser;
>
> expr returns [int r]
> {
> 	int a,b;
> 	r=0;
> }
> 	:	#(PLUS a=expr b=expr) {r = a+b;}
> 	|	#(STAR a=expr b=expr) {r = a*b;}
> 	|	i:INT		      {r =
> Integer.parseInt(i.getText());}
> 	;
>
> If I wanted to pass a value to expr, how would I do it?
>
> I tried:
>
> Expr (int i) returns [int r]
>
> but this does not appear to be valid syntax. Nothing in the
> documentation says you can do this. Is it possible?
>
> The reason I would like to do it is so I can easily create a list of
> things while recursively processing nodes. Otherwise I have to create
> some kind of global and manage it carefully.
>
> Mike
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com link sharing, pure-n-simple




 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Wed Sep  3 22:34:09 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] Passing values in tree walker
In-Reply-To: <000001c372a5$fcbe0df0$fe01a8c0@woofumdust.com>
Message-ID: <685AA452-DE99-11D7-B282-000393BB647E@cs.usfca.edu>


On Wednesday, September 3, 2003, at 10:32  PM, Mike Jones wrote:

> Terence,
>
> I feel stupid!
>
> Ok, so to reference it:
>
> Expr2
> {
> 	int i2;
> }
> : expr[i2]
> ;
>
> I tried that and the resulting code fails because it only calls with 
> the
> AST parameter.
>
> Any suggestion?

Hmm...must be a rule name issue...that is the way I pass arguments all 
the time. :)  I'll bet you can check the java.g grammar from the site 
and you'll see me building trees by passing info down into other rules. 
  Could be a weird syntax gotcha too.

Terence
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com link sharing, pure-n-simple




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Mike.Jones at woofumdust.com  Thu Sep  4 06:47:01 2003
From: Mike.Jones at woofumdust.com (Mike Jones)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] Passing values in tree walker
In-Reply-To: <685AA452-DE99-11D7-B282-000393BB647E@cs.usfca.edu>
Message-ID: <000501c372eb$06a9acd0$fe01a8c0@woofumdust.com>

Terence,

I found the problem. There was a second reference to expr without the
[i2] farther down in the grammar. I had not noticed that the java error
was related to this other expression.

Thanks, I'm flying!

Mike

-----Original Message-----
From: Terence Parr [mailto:parrt@cs.usfca.edu] 
Sent: Wednesday, September 03, 2003 11:34 PM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] Passing values in tree walker


On Wednesday, September 3, 2003, at 10:32  PM, Mike Jones wrote:

> Terence,
>
> I feel stupid!
>
> Ok, so to reference it:
>
> Expr2
> {
> 	int i2;
> }
> : expr[i2]
> ;
>
> I tried that and the resulting code fails because it only calls with 
> the
> AST parameter.
>
> Any suggestion?

Hmm...must be a rule name issue...that is the way I pass arguments all 
the time. :)  I'll bet you can check the java.g grammar from the site 
and you'll see me building trees by passing info down into other rules. 
  Could be a weird syntax gotcha too.

Terence
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com link sharing, pure-n-simple




 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From boy_wonder48 at hotmail.com  Thu Sep  4 08:09:49 2003
From: boy_wonder48 at hotmail.com (solmalik)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] Re: Help with grammar file
In-Reply-To: <72C9789739C4214096AE945753B11EA36B1DE7@mypxmail04.bco-home.com>
Message-ID: <bj7kjt+3r1b@eGroups.com>

Hi i think the problem i am having is that the grammar file does not 
seem to recieve any input, I think the problem is i am trying to read 
data from a command line, whereas I want to psss the contents of s 
tring to the grammar file, what would be the best way of doing 
this?.  The code used in the class is:

 try //parse eqn entered to see if it conforms to grammar
		{
            		L lexer = new L(new DataInputStream
(System.in));
           		P parser = new P(lexer);
            		parser.startRule();
        	} 
        	catch(Exception e) 
        	{
            		System.err.println("exception: "+e);
        	}
--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> startRule
>  : ( equation NEWLINE )+ EOF
>  ;
> 
> Also try stepping through with a debugger or using the -trace 
option to
> antlr.Tool to get a trace of your lexer and parser printed out when 
you run
> it.
> 
> Monty
> 
> -----Original Message-----
> From: solmalik [mailto:boy_wonder48@h...] 
> Sent: Monday, September 01, 2003 10:56 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: Help with grammar file
> 
> 
> hi the exact error msg I am getting is "line 1:1: unexpected token: 
> null".  Any ideas? and what exactly do you mean placing EOF in the 
> start rule? I am totally new to this, so don't really have a clue, 
> any help much aprreciated thanks.
> --- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> > Try putting EOF in your start rule.  What exactly is the error
> message?
> > Does it say what rule it was in.
> > 
> > Monty
> > 
> > -----Original Message-----
> > From: solmalik [mailto:boy_wonder48@h...]
> > Sent: Saturday, August 23, 2003 6:10 AM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Help with grammar file
> > 
> > 
> > Hi have greated a grammar file, which is to be used to parse any
> > expressions entered bya user.  The expressions are of process 
> > algebra and a typical expression looks like:
> > a[0,2];b[0,1], meaning that (a) is to be executed befroe (b) and 
> (a) 
> > can be executed by no later than of time 2 units.  Below is the
> file 
> > I haved used to try and accept an eqxpression of this form, but
> When 
> > I come to running it, I get the error message unexpected
> token:null  
> > any help is much appreciated. Thanks.
> > 
> > class P extends Parser;
> > 
> > //rule one or more equations forllowed by newline
> > startRule
> > : ( equation NEWLINE )+
> > ;
> > 
> > //a mineqn followed by zero or more operations and mineqns
> > equation: mineqn (operation mineqn)*
> > ;
> > 
> > //mineqn is eith ID or an eqn in brackets
> > mineqn : ID TIME
> > | OPEN equation CLOSE
> > ;
> > 
> > //operations
> > operation
> > : SEMICOLN
> > | BAR_BAR
> > | CARET
> > | ASTERISK
> > | SY_OP
> > | RS_OP
> > ;
> > 
> > class L extends Lexer;
> > 
> > options {
> > testLiterals = true;
> > }
> > 
> > // tokens required for synchronisation and restriction
> > tokens {
> > SY_OP = "sy";
> > RS_OP = "rs";
> > }
> > 
> > TIME: '[' ('0' .. '9') ',' ('0' .. '9') ']';
> > 
> > OPEN: '(' ;
> > 
> > CLOSE: ')' ;
> > 
> > SEMICOLN: ';' ;
> > BAR_BAR : "|";
> > CARET : '^' ;
> > ASTERISK: '*' ;
> > 
> > 
> > //ID any letter from a to z
> > ID : ('a' .. 'z' | 'A' .. 'Z');
> > 
> > NEWLINE : ('\r''\n')=> '\r''\n' //DOS
> > | '\r' //MAC
> > | '\n' //UNIX
> > { newline(); }
> > ;
> > 
> > WS : (' '|'\t') { $setType(Token.SKIP); } ;
> > 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From eland_at_jleuner at yahoo.com  Thu Sep  4 09:09:21 2003
From: eland_at_jleuner at yahoo.com (John Leuner)
Date: Mon Dec 20 16:15:55 2004
Subject: Bug#206489: antlr: AST nodes improperly initialized (2.7.2)
In-Reply-To: <bij337+a8u5@eGroups.com>
Message-ID: <20030904160921.40213.qmail@web21009.mail.yahoo.com>

Thanks for the confirmation. I will apply this patch
to the Debian package (until a new upstream release is
packaged).

John Leuner

--- parrt2000 <parrt@cs.usfca.edu> wrote:
> Yes, this patch is correct.  I have updated the main
> line code.
> 
> Terence
> PS   I've missed that last weeks email due to mail
> problems caused by damn 
> overflowed mailbox from virus.  I get hit with about
> 50M each day or so. :(
> 
> --- In antlr-interest@yahoogroups.com, John Leuner
> <eland_at_jleuner@y...> wrote:
> > Hello,
> > 
> > I received this bug report via the Debian Bug
> Tracking
> > System. It
> > describes an undesirable change in behaviour from
> > antlr 2.7.1 to 2.7.2.
> > 
> > I would like to know whether this is a "correct"
> fix
> > and whether this
> > change will be included in future releases of
> antlr.
> > 
> > Thanks
> > John Leuner
> > 
> > > > On Thu, 2003-08-21 at 02:00, Kristian G.
> Kvilekval
> > wrote:
> > > > > Package: antlr
> > > > > Version: 2.7.2-1
> > > > > Severity: important
> > > > > Tags: patch
> > > > > 
> > > > > 
> > > > > 
> > > > > 
> > > > > 
> > > > > After upgrading 2.7.1 -> 2.7.2 , I noticed
> that
> > my grammar
> > > > > trees had changed.  I tracked this down to a
> new
> > style of
> > > > > AST node creation.   In the past the parser
> > would call
> > > > > "new MyASTNode(token)" if the user had
> specified
> > a token.   
> > > > > The  current parser uses a factory method
> for
> > node construction 
> > > > > and  though it calls the constructor it also
> > re-initializes
> > > > > the newly created node.   The patch below
> only
> > initializes
> > > > > the AST node if the old style constructor
> was
> > not found.
> > > > > 
> > > > > --- antlr-2.7.2/antlr/ASTFactory.java  
> > 2003-01-19 16:37:58.000000000 
> > > > > -0800
> > > > > +++ antlr-2.7.2.mod/antlr/ASTFactory.java   
>   
> > 2003-08-12 
> > > > > 18:53:37.000000000 -0700
> > > > > @@ -208,9 +208,6 @@
> > > > >          */
> > > > >         public AST create(Token tok, String
> > className) {
> > > > >          AST t =
> createUsingCtor(tok,className);
> > > > > -        if ( t!=null ) {
> > > > > -                       t.initialize(tok);
> > > > > -               }
> > > > >          return t;
> > > > >      }
> > > > >   
> > > > > @@ -245,6 +242,9 @@
> > > > >                                 // just do
> the
> > regular thing if you 
> > > > > can't find the ctor
> > > > >                                 // Your AST
> must
> > have default ctor to 
> > > > > use this.                                t =
> > create(c);
> > > > > +                if ( t!=null ) {
> > > > > +                    t.initialize(token);
> > > > > +                }
> > > > >                         }
> > > > >                 }
> > > > >                 catch (Exception e) {
> > > > > 
> > > > > 
> > > > > 
> > > > > 
> > > > > 
> > > > > 
> > > > > 
> > > > > 
> > > > > -- System Information:
> > > > > Debian Release: testing/unstable
> > > > > Architecture: i386
> > > > > Kernel: Linux shawsheen 2.4.20k7-smp #1 SMP
> Thu
> > Apr 3 15:38:22 PST 2003 i686
> > > > > Locale: LANG=C, LC_CTYPE=C
> > > > > 
> > > > > Versions of packages antlr depends on:
> > > > > ii  gij-3.2 [java-virtual-mac 1:3.2.3-2     
> The
> > GNU Java bytecode interpreter
> > > > > ii  gij-3.3 [java-virtual-mac 1:3.3.2-0pre1 
> The
> > GNU Java bytecode interpreter
> > > > > ii  j2re1.3 [java-virtual-mac 1.3.1.02b-2   
> > Blackdown Java(TM) 2 Runtime Envir
> > > > > ii  j2re1.4 [java-virtual-mac 1.4.0.99beta-1
> > Blackdown Java(TM) 2 Runtime Envir
> > > > > ii  kaffe [java-virtual-machi 1:1.0.7-3     
> A
> > JVM to run Java bytecode
> > > > > ii  sablevm [java-virtual-mac 1.0.8-4       
> > Free implementation of Java Virtua
> > > > > 
> > > > > -- no debconf information
> > -- 
> > John Leuner <jewel@p...>
> > 
> > __________________________________
> > Do you Yahoo!?
> > Yahoo! SiteBuilder - Free, easy-to-use web site
> design software
> > http://sitebuilder.yahoo.com
> 


__________________________________
Do you Yahoo!?
Yahoo! SiteBuilder - Free, easy-to-use web site design software
http://sitebuilder.yahoo.com

From eland_at_jleuner at yahoo.com  Thu Sep  4 09:09:21 2003
From: eland_at_jleuner at yahoo.com (John Leuner)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] Re: Bug#206489: antlr: AST nodes improperly initialized (2.7.2)
In-Reply-To: <bij337+a8u5@eGroups.com>
Message-ID: <20030904160921.40213.qmail@web21009.mail.yahoo.com>

Thanks for the confirmation. I will apply this patch
to the Debian package (until a new upstream release is
packaged).

John Leuner

--- parrt2000 <parrt@cs.usfca.edu> wrote:
> Yes, this patch is correct.  I have updated the main
> line code.
> 
> Terence
> PS   I've missed that last weeks email due to mail
> problems caused by damn 
> overflowed mailbox from virus.  I get hit with about
> 50M each day or so. :(
> 
> --- In antlr-interest@yahoogroups.com, John Leuner
> <eland_at_jleuner@y...> wrote:
> > Hello,
> > 
> > I received this bug report via the Debian Bug
> Tracking
> > System. It
> > describes an undesirable change in behaviour from
> > antlr 2.7.1 to 2.7.2.
> > 
> > I would like to know whether this is a "correct"
> fix
> > and whether this
> > change will be included in future releases of
> antlr.
> > 
> > Thanks
> > John Leuner
> > 
> > > > On Thu, 2003-08-21 at 02:00, Kristian G.
> Kvilekval
> > wrote:
> > > > > Package: antlr
> > > > > Version: 2.7.2-1
> > > > > Severity: important
> > > > > Tags: patch
> > > > > 
> > > > > 
> > > > > 
> > > > > 
> > > > > 
> > > > > After upgrading 2.7.1 -> 2.7.2 , I noticed
> that
> > my grammar
> > > > > trees had changed.  I tracked this down to a
> new
> > style of
> > > > > AST node creation.   In the past the parser
> > would call
> > > > > "new MyASTNode(token)" if the user had
> specified
> > a token.   
> > > > > The  current parser uses a factory method
> for
> > node construction 
> > > > > and  though it calls the constructor it also
> > re-initializes
> > > > > the newly created node.   The patch below
> only
> > initializes
> > > > > the AST node if the old style constructor
> was
> > not found.
> > > > > 
> > > > > --- antlr-2.7.2/antlr/ASTFactory.java  
> > 2003-01-19 16:37:58.000000000 
> > > > > -0800
> > > > > +++ antlr-2.7.2.mod/antlr/ASTFactory.java   
>   
> > 2003-08-12 
> > > > > 18:53:37.000000000 -0700
> > > > > @@ -208,9 +208,6 @@
> > > > >          */
> > > > >         public AST create(Token tok, String
> > className) {
> > > > >          AST t =
> createUsingCtor(tok,className);
> > > > > -        if ( t!=null ) {
> > > > > -                       t.initialize(tok);
> > > > > -               }
> > > > >          return t;
> > > > >      }
> > > > >   
> > > > > @@ -245,6 +242,9 @@
> > > > >                                 // just do
> the
> > regular thing if you 
> > > > > can't find the ctor
> > > > >                                 // Your AST
> must
> > have default ctor to 
> > > > > use this.                                t =
> > create(c);
> > > > > +                if ( t!=null ) {
> > > > > +                    t.initialize(token);
> > > > > +                }
> > > > >                         }
> > > > >                 }
> > > > >                 catch (Exception e) {
> > > > > 
> > > > > 
> > > > > 
> > > > > 
> > > > > 
> > > > > 
> > > > > 
> > > > > 
> > > > > -- System Information:
> > > > > Debian Release: testing/unstable
> > > > > Architecture: i386
> > > > > Kernel: Linux shawsheen 2.4.20k7-smp #1 SMP
> Thu
> > Apr 3 15:38:22 PST 2003 i686
> > > > > Locale: LANG=C, LC_CTYPE=C
> > > > > 
> > > > > Versions of packages antlr depends on:
> > > > > ii  gij-3.2 [java-virtual-mac 1:3.2.3-2     
> The
> > GNU Java bytecode interpreter
> > > > > ii  gij-3.3 [java-virtual-mac 1:3.3.2-0pre1 
> The
> > GNU Java bytecode interpreter
> > > > > ii  j2re1.3 [java-virtual-mac 1.3.1.02b-2   
> > Blackdown Java(TM) 2 Runtime Envir
> > > > > ii  j2re1.4 [java-virtual-mac 1.4.0.99beta-1
> > Blackdown Java(TM) 2 Runtime Envir
> > > > > ii  kaffe [java-virtual-machi 1:1.0.7-3     
> A
> > JVM to run Java bytecode
> > > > > ii  sablevm [java-virtual-mac 1.0.8-4       
> > Free implementation of Java Virtua
> > > > > 
> > > > > -- no debconf information
> > -- 
> > John Leuner <jewel@p...>
> > 
> > __________________________________
> > Do you Yahoo!?
> > Yahoo! SiteBuilder - Free, easy-to-use web site
> design software
> > http://sitebuilder.yahoo.com
> 


__________________________________
Do you Yahoo!?
Yahoo! SiteBuilder - Free, easy-to-use web site design software
http://sitebuilder.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sramam at yahoo.com  Fri Sep  5 06:35:38 2003
From: sramam at yahoo.com (sramam)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] C++ grammer and AST.
Message-ID: <bja3fa+4tea@eGroups.com>

Folks,
I am a little confused as to how an AST is generated. 
Once the parser/lexer grammer is available, what do I have to 
do to get the AST? Specifically, I am trying to get ASTs using 
the C++ grammer on the ANTLR site. 

Also, was wondering if anybody has gotten the C++ grammer working 
out of the box. Comments/impressions/experiences with the C++ 
grammer are much appreciated.

thanks,
-shishir



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From wiggjd at lsbu.ac.uk  Fri Sep  5 08:53:02 2003
From: wiggjd at lsbu.ac.uk (David Wigg)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] ANTLR-2.7.2 src library for C++
Message-ID: <3F58B15E.6020404@sbu.ac.uk>

I have been using ANTLR-2.7.1. successfully using a static 
library for antlr-2.7.1\lib\cpp\src, using MSVC 6.0.

I now want to use ANTLR-2.7.2 but seem to be getting a lot of 
unexpected warning messages when trying to compile the src 
library using the same settings as I used for ANTLR-2.7.1.

Most of them seem to relate to DLLs such as,

C4273 'ASTFactory::ASTFactory' : inconsistent dll linkage. 
dllexport assumed.

Has something been changed? If not, please could someone suggest 
what I might be doing wrong?

Is there some guidance I have missed on the website?

I have looked at Morling's site but this refers to ANTLR-2.7.1.

I have tried the FAQs but search revealed no entries for 2.7.2.

Thanks.

David.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Fri Sep  5 10:31:39 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] Re: ANTLR-2.7.2 src library for C++
In-Reply-To: <3F58B15E.6020404@sbu.ac.uk>
Message-ID: <bjah9r+4in9@eGroups.com>

--- In antlr-interest@yahoogroups.com, David Wigg <wiggjd@l...> wrote:
> I have been using ANTLR-2.7.1. successfully using a static 
> library for antlr-2.7.1\lib\cpp\src, using MSVC 6.0.
> 
> I now want to use ANTLR-2.7.2 but seem to be getting a lot of 
> unexpected warning messages when trying to compile the src 
> library using the same settings as I used for ANTLR-2.7.1.
> 
> Most of them seem to relate to DLLs such as,
> 
> C4273 'ASTFactory::ASTFactory' : inconsistent dll linkage. 
> dllexport assumed.
> 
> Has something been changed? If not, please could someone suggest 
> what I might be doing wrong?

Are you using Ric's latest 2.7.2 snapshot David?. There were a number
of issues with the original release of ANTLR 2.7.2 and the various
versions of MSVC++ (and it's various build configurations). A number
of these have been resolved in Ric's latest releases.

http://wwwhome.cs.utwente.nl/~klaren/antlr/

> Is there some guidance I have missed on the website?
> 
> I have looked at Morling's site but this refers to ANTLR-2.7.1.
> 
> I have tried the FAQs but search revealed no entries for 2.7.2.

You may want to search the archives of this mailing list. There have
been a few discussions about ANTLR 2.7.2 and MSVC++.

Cheers,

Micheal

PS    If C# code generation is important to you, be sure to apply this
too: http://www.antlr.org/share/1057353989224/antlr-2.7.2-CSharp-SP1.zip


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From abreneliere at telys.com  Fri Sep  5 11:02:38 2003
From: abreneliere at telys.com (=?ISO-8859-1?Q?Anthony_Breneli=E8re?=)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] Error when my C++ project since updating antlr
Message-ID: <3F58CFBE.40703@telys.com>

I updated my project with the last version of antlr ( 2.7.2 23/08/03 ) i 
had an older 2.7.2 version before.,

I regenerated c++ grammars,

And when compiling under VS .NET i've got the following error:

error C2555: 'CIAOParser::getAST': overriding virtual function return 
type differs and is not covariant from 'antlr::Parser::getAST'
        antlr\antlr\Parser.hpp(103) : see declaration of 
'antlr::Parser::getAST'

i didnt have that error before, and methods getAST are the same in the 
last version

I've set "CommonAST" as the AST node of the grammar.

What's behind this error message ?
Anyone has an idea about how to solve this problem ?

Cordially,
Anthony


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Fri Sep  5 18:14:01 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] Preserving Original Token Sequence In ASTs
Message-ID: <66005D6E-E007-11D7-8E11-000A95891192@cs.usfca.edu>

Guys,

Had a chat with Greg Benson (an OS maniac and fellow professor here at  
USF) yesterday and he described some transformations he had done in  
JavaCC to build efficient parallel processing libraries (special  
encodings for various types etc...).  He had a nice translator solution  
where it was easy to get the original token order from his trees so he  
could do easy Java->Java transformations.  We talked about the  
difference between parse trees and ANTLR's ASTs and how ASTs are what  
you want for translation, but it's hard to get the original token  
sequence back out.  I decided to tackle the issue today and have posted  
an article describing my results.  Thanks for the motivation, Greg!  We  
may have the best of both worlds now. :)

Here is what I conjured up and just posted to antlr.org:

http://www.antlr.org/article/preserving.token.order/ 
preserving.token.order.tml

"You want ASTs instead of parse trees for translation, but ASTs have  
the token order shuffled from the one-dimensional input sequence into a  
two-dimensional tree structure.  Consequently, it is often hard to spit  
the original token sequence back out.  You are required to build a tree  
walker that spits text back out.  This article describes an  
experimental means of supporting easy x to x translation without  
modifying ANTLR itself.  I provide modified token, token stream, tree  
node, and AST factory objects along with a simple grammar to  
demonstrate their use.  This is damn cool stuff and will be standard  
equipment on ANTLR 3."

Let me know what you think. :)  The solution is cute if ya ask me. ;)

L8R G8Rs,
Terence
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Fri Sep  5 18:17:35 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] Preserving Original Token Sequence In ASTs
In-Reply-To: <66005D6E-E007-11D7-8E11-000A95891192@cs.usfca.edu>
Message-ID: <E5F91E8C-E007-11D7-8E11-000A95891192@cs.usfca.edu>

Damn!  The stupid URL wrapped...careful when you click on it ;)

Ter

On Friday, September 5, 2003, at 06:14 PM, Terence Parr wrote:

> Guys,
>
> Had a chat with Greg Benson (an OS maniac and fellow professor here at
> USF) yesterday and he described some transformations he had done in
> JavaCC to build efficient parallel processing libraries (special
> encodings for various types etc...).  He had a nice translator solution
> where it was easy to get the original token order from his trees so he
> could do easy Java->Java transformations.  We talked about the
> difference between parse trees and ANTLR's ASTs and how ASTs are what
> you want for translation, but it's hard to get the original token
> sequence back out.  I decided to tackle the issue today and have posted
> an article describing my results.  Thanks for the motivation, Greg!  We
> may have the best of both worlds now. :)
>
> Here is what I conjured up and just posted to antlr.org:
>
> http://www.antlr.org/article/preserving.token.order/
> preserving.token.order.tml
>
> "You want ASTs instead of parse trees for translation, but ASTs have
> the token order shuffled from the one-dimensional input sequence into a
> two-dimensional tree structure.  Consequently, it is often hard to spit
> the original token sequence back out.  You are required to build a tree
> walker that spits text back out.  This article describes an
> experimental means of supporting easy x to x translation without
> modifying ANTLR itself.  I provide modified token, token stream, tree
> node, and AST factory objects along with a simple grammar to
> demonstrate their use.  This is damn cool stuff and will be standard
> equipment on ANTLR 3."
>
> Let me know what you think. :)  The solution is cute if ya ask me. ;)
>
> L8R G8Rs,
> Terence
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Sat Sep  6 12:09:39 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] frustrated with lexer
In-Reply-To: <0700C2DA.3498AFF3.00A2087F@netscape.net>
Message-ID: <A9EC0084-E09D-11D7-8E11-000A95891192@cs.usfca.edu>

On Tuesday, September 2, 2003, at 10:59 AM, netminka@netscape.net wrote:
> The latest example:
> I sometimes need to scan ahead through the input and once I've
> determined the context or whatever, push back what I've scanned onto 
> the input stream. I DON'T NEED to push back everything but the first 
> character!
> Which seems to be the consume() default.
>
> How is this consume default changed? Example please!

override consume() ?

> Here is the specific situation:
> END
>     : ("End" LINE_TERMINATOR) => ENDEXIT
>     | ("End" (' ' | '\t')+) => ENDCHECK
>     ;
>
> In the case that "End" followed by the above stuff is not recognized
> (e.g. the string 'EndTest') the lexer consumes the 'E' and I'm left 
> with
> 'ndTest'. Note my ENDCHECK and ENDEXIT are protected.

I am having trouble parsing your English sentences, but I'll take a 
stab at this.  Please try without the second syn pred; it is redundant. 
  If the first fails, it will go to the second.

You can also try good old left-factoring:

END : "End" ( ENDEXIT | ENDCHECK ) ;

no fuss no muss.

> I also don't like
> the hoisting of rules in nextToken based on left hand side semantic 
> predicates; the effects are unpredictable and overly complex.

Really?  The rule is: "if there is a predicate on the left edge of a 
rule w/o an alternative, it uses that boolean test to turn the rule 
on/off."  You'll have to tell me what you don't understand so I can 
explain it better.

> The ordering
> of matching rules is overly complex and thus unpredictable as well.

Well, technically there is no ordering that matters if I can remember 
correctly.  I do any sorting by lookahead depth that is required.

Anyway, all that said, I agree that ANTLR's lexers are wacky.  I've got 
the solution (or the engine to the solution) built for ANTLR 3.  :)

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Matthew.Ford at forward.com.au  Sat Sep  6 15:21:53 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] frustrated with lexer
References: <A9EC0084-E09D-11D7-8E11-000A95891192@cs.usfca.edu>
Message-ID: <000601c374c5$46858280$0400a8c0@NOTEBOOK>

Hi Ter,
I think Antlr is great as is (although I would not object to the AST tree
parser syntax being cleaned up as per my suggestions).

If netminka finds the Antlr lexer frustrating he should try writing one by
hand using a state machine or recursive decent.

Writing one by hand puts things in perspective and makes the mountains in
Antlr look like the mole hills they really are.

I really like Antlr because it gives me fine control over the error messages
generated and how they are handled.  I like the ease with which I can add
dead ends just to give a more precise error message.

matthew

----- Original Message ----- 
From: "Terence Parr" <parrt@cs.usfca.edu>
To: <antlr-interest@yahoogroups.com>
Cc: <netminka@netscape.net>
Sent: Sunday, September 07, 2003 5:09 AM
Subject: Re: [antlr-interest] frustrated with lexer


> On Tuesday, September 2, 2003, at 10:59 AM, netminka@netscape.net wrote:
> > The latest example:
> > I sometimes need to scan ahead through the input and once I've
> > determined the context or whatever, push back what I've scanned onto
> > the input stream. I DON'T NEED to push back everything but the first
> > character!
> > Which seems to be the consume() default.
> >
> > How is this consume default changed? Example please!
>
> override consume() ?
>
> > Here is the specific situation:
> > END
> >     : ("End" LINE_TERMINATOR) => ENDEXIT
> >     | ("End" (' ' | '\t')+) => ENDCHECK
> >     ;
> >
> > In the case that "End" followed by the above stuff is not recognized
> > (e.g. the string 'EndTest') the lexer consumes the 'E' and I'm left
> > with
> > 'ndTest'. Note my ENDCHECK and ENDEXIT are protected.
>
> I am having trouble parsing your English sentences, but I'll take a
> stab at this.  Please try without the second syn pred; it is redundant.
>   If the first fails, it will go to the second.
>
> You can also try good old left-factoring:
>
> END : "End" ( ENDEXIT | ENDCHECK ) ;
>
> no fuss no muss.
>
> > I also don't like
> > the hoisting of rules in nextToken based on left hand side semantic
> > predicates; the effects are unpredictable and overly complex.
>
> Really?  The rule is: "if there is a predicate on the left edge of a
> rule w/o an alternative, it uses that boolean test to turn the rule
> on/off."  You'll have to tell me what you don't understand so I can
> explain it better.
>
> > The ordering
> > of matching rules is overly complex and thus unpredictable as well.
>
> Well, technically there is no ordering that matters if I can remember
> correctly.  I do any sorting by lookahead depth that is required.
>
> Anyway, all that said, I agree that ANTLR's lexers are wacky.  I've got
> the solution (or the engine to the solution) built for ANTLR 3.  :)
>
> Ter
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Sat Sep  6 15:28:28 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] frustrated with lexer
In-Reply-To: <000601c374c5$46858280$0400a8c0@NOTEBOOK>
Message-ID: <704CE4E6-E0B9-11D7-8E11-000A95891192@cs.usfca.edu>

Thanks Matt.  Power to the people! ;)

Terence
PS  Loring/Monty/I have been discussing AST stuff quite a bit and 
Loring's great ideas/implementation should appear in a 2.8 release so 
we can experiment with it before ANTLR 3 design locks in.

On Saturday, September 6, 2003, at 03:21 PM, Matthew Ford wrote:

> Hi Ter,
> I think Antlr is great as is (although I would not object to the AST 
> tree
> parser syntax being cleaned up as per my suggestions).
>
> If netminka finds the Antlr lexer frustrating he should try writing 
> one by
> hand using a state machine or recursive decent.
>
> Writing one by hand puts things in perspective and makes the mountains 
> in
> Antlr look like the mole hills they really are.
>
> I really like Antlr because it gives me fine control over the error 
> messages
> generated and how they are handled.  I like the ease with which I can 
> add
> dead ends just to give a more precise error message.
>
> matthew
>
> ----- Original Message -----
> From: "Terence Parr" <parrt@cs.usfca.edu>
> To: <antlr-interest@yahoogroups.com>
> Cc: <netminka@netscape.net>
> Sent: Sunday, September 07, 2003 5:09 AM
> Subject: Re: [antlr-interest] frustrated with lexer
>
>
>> On Tuesday, September 2, 2003, at 10:59 AM, netminka@netscape.net 
>> wrote:
>>> The latest example:
>>> I sometimes need to scan ahead through the input and once I've
>>> determined the context or whatever, push back what I've scanned onto
>>> the input stream. I DON'T NEED to push back everything but the first
>>> character!
>>> Which seems to be the consume() default.
>>>
>>> How is this consume default changed? Example please!
>>
>> override consume() ?
>>
>>> Here is the specific situation:
>>> END
>>>     : ("End" LINE_TERMINATOR) => ENDEXIT
>>>     | ("End" (' ' | '\t')+) => ENDCHECK
>>>     ;
>>>
>>> In the case that "End" followed by the above stuff is not recognized
>>> (e.g. the string 'EndTest') the lexer consumes the 'E' and I'm left
>>> with
>>> 'ndTest'. Note my ENDCHECK and ENDEXIT are protected.
>>
>> I am having trouble parsing your English sentences, but I'll take a
>> stab at this.  Please try without the second syn pred; it is 
>> redundant.
>>   If the first fails, it will go to the second.
>>
>> You can also try good old left-factoring:
>>
>> END : "End" ( ENDEXIT | ENDCHECK ) ;
>>
>> no fuss no muss.
>>
>>> I also don't like
>>> the hoisting of rules in nextToken based on left hand side semantic
>>> predicates; the effects are unpredictable and overly complex.
>>
>> Really?  The rule is: "if there is a predicate on the left edge of a
>> rule w/o an alternative, it uses that boolean test to turn the rule
>> on/off."  You'll have to tell me what you don't understand so I can
>> explain it better.
>>
>>> The ordering
>>> of matching rules is overly complex and thus unpredictable as well.
>>
>> Well, technically there is no ordering that matters if I can remember
>> correctly.  I do any sorting by lookahead depth that is required.
>>
>> Anyway, all that said, I agree that ANTLR's lexers are wacky.  I've 
>> got
>> the solution (or the engine to the solution) built for ANTLR 3.  :)
>>
>> Ter
>> --
>> Professor Comp. Sci., University of San Francisco
>> Creator, ANTLR Parser Generator, http://www.antlr.org
>> Co-founder, http://www.jguru.com
>> Co-founder, http://www.knowspam.net enjoy email again!
>> Co-founder, http://www.peerscope.com pure link sharing
>>
>>
>>
>>
>>
>>
>> Your use of Yahoo! Groups is subject to 
>> http://docs.yahoo.com/info/terms/
>>
>>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Sun Sep  7 05:37:49 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] Error when my C++ project since updating antlr
In-Reply-To: <3F58CFBE.40703@telys.com>; from abreneliere@telys.com on Fri, Sep 05, 2003 at 08:02:38PM +0200
References: <3F58CFBE.40703@telys.com>
Message-ID: <20030907143749.A20689@cs.utwente.nl>

On Fri, Sep 05, 2003 at 08:02:38PM +0200, Anthony Brenelire wrote:
> I updated my project with the last version of antlr ( 2.7.2 23/08/03 ) i 
> And when compiling under VS .NET i've got the following error:
> 
> error C2555: 'CIAOParser::getAST': overriding virtual function return 
> type differs and is not covariant from 'antlr::Parser::getAST'
>         antlr\antlr\Parser.hpp(103) : see declaration of 
> 'antlr::Parser::getAST'

Had to fix this too for newer gcc's. I'll probably release a new snapshot
next week. (If the salvage from the now somewhat dead laptop I was working
on was succesfull).

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Innovation makes enemies of all those who prospered under the old
   regime, and only lukewarm support is forthcoming from those who would
               prosper under the new. --- Niccol Machiavelli


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Sun Sep  7 05:44:25 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] How do I specify literals in lexer?
In-Reply-To: <bj5gea+1kr7@eGroups.com>; from atripp@comcast.net on Wed, Sep 03, 2003 at 07:46:18PM -0000
References: <bj5gea+1kr7@eGroups.com>
Message-ID: <20030907144425.B20689@cs.utwente.nl>

On Wed, Sep 03, 2003 at 07:46:18PM -0000, atripp54321 wrote:
> I have a grammar file that contains a lexer but no parser and
> I want to specify literals in it. The ANTLR documentation says:
>
> "Second, literals may be specified in the lexer grammar by means of
> the literal option".

That should read: 'in the tokens sections' in stead of by means etc...
although you can just do it in the parser as well. Check the manual for
syntax (or one of the examples the flexlex example form c++ should give you
an idea probably)

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Chaos always defeats order because it is better organized.
  --- Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Sun Sep  7 10:15:47 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] translations wanted?
Message-ID: <EC34C763-E156-11D7-8F97-000393BB647E@cs.usfca.edu>

Howdy folks...looks like I have at least one student interested in 
building a grammar and/or translator for their masters project class 
(one semester, 4 credits).  So the question is, what grammars do we 
really need right now?  Is there a translator we need?  Perhaps a 
JavaCC->ANTLR translator <snicker>

Please suggest your favorite needed grammar / translator between now 
and 1:15 California time tomorrow, which is class time. ;)

Thanks,
Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com link sharing, pure-n-simple




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sramam at yahoo.com  Sun Sep  7 10:38:14 2003
From: sramam at yahoo.com (Shishir Ramam)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] translations wanted?
In-Reply-To: <EC34C763-E156-11D7-8F97-000393BB647E@cs.usfca.edu>
Message-ID: <20030907173814.27718.qmail@web41114.mail.yahoo.com>

Terence,

C++!! I know one exists, and I am attempting to work 
my way through problems with it. But an alternative 
or even making the existing one work completely out 
of the box would be great.

Btw, from what I have seen of antlr, looks like a 
great tool. Just need to climb this learning curve! 
:)

thanks,
-shishir


--- Terence Parr <parrt@cs.usfca.edu> wrote:
> Howdy folks...looks like I have at least one student
> interested in 
> building a grammar and/or translator for their
> masters project class 
> (one semester, 4 credits).  So the question is, what
> grammars do we 
> really need right now?  Is there a translator we
> need?  Perhaps a 
> JavaCC->ANTLR translator <snicker>
> 
> Please suggest your favorite needed grammar /
> translator between now 
> and 1:15 California time tomorrow, which is class
> time. ;)
> 
> Thanks,
> Ter
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator,
> http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email
> again!
> Co-founder, http://www.peerscope.com link sharing,
> pure-n-simple
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
Yahoo! SiteBuilder - Free, easy-to-use web site design software
http://sitebuilder.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Sun Sep  7 10:47:08 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] translations wanted?
In-Reply-To: <20030907173814.27718.qmail@web41114.mail.yahoo.com>
Message-ID: <4D693206-E15B-11D7-8E11-000A95891192@cs.usfca.edu>


On Sunday, September 7, 2003, at 10:38 AM, Shishir Ramam wrote:

> Terence,
>
> C++!! I know one exists, and I am attempting to work
> my way through problems with it. But an alternative
> or even making the existing one work completely out
> of the box would be great.

Well, I'm assuming David Wigg will continue making progress...it's not 
an easy task. ;)

> Btw, from what I have seen of antlr, looks like a
> great tool. Just need to climb this learning curve!
> :)

Thanks.  Hopefully the getting started notes will help and the lecture 
audio/notes from my class last semester will help.

Terence
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From johnm-antlr at non.net  Sun Sep  7 10:51:04 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] translations wanted?
In-Reply-To: <EC34C763-E156-11D7-8F97-000393BB647E@cs.usfca.edu>
References: <EC34C763-E156-11D7-8F97-000393BB647E@cs.usfca.edu>
Message-ID: <16219.28680.842798.239931@despot.non.net>

>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
[...]

> Howdy folks...looks like I have at least one student interested in
> building a grammar and/or translator for their masters project class (one
> semester, 4 credits).  So the question is, what grammars do we really
> need right now?  Is there a translator we need?  Perhaps a JavaCC-> ANTLR
> translator <snicker>

How about a RelaxNG (compact) compiler which generated ANTLR code to parse,
validate, and AST-ize the defined language?  Hmm... Is that hard enough?


At a slightly more abstract level, I'd like to see support for lexing,
parsing, and translating fixed-length formats.

Take care,
	John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Sun Sep  7 11:40:32 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] translations wanted?
In-Reply-To: <16219.28680.842798.239931@despot.non.net>
Message-ID: <C3244934-E162-11D7-8E11-000A95891192@cs.usfca.edu>


On Sunday, September 7, 2003, at 10:51 AM, John D. Mitchell wrote:

>>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
> [...]
>
>> Howdy folks...looks like I have at least one student interested in
>> building a grammar and/or translator for their masters project class 
>> (one
>> semester, 4 credits).  So the question is, what grammars do we really
>> need right now?  Is there a translator we need?  Perhaps a JavaCC-> 
>> ANTLR
>> translator <snicker>
>
> How about a RelaxNG (compact) compiler which generated ANTLR code to 
> parse,
> validate, and AST-ize the defined language?  Hmm... Is that hard 
> enough?

Ah...finally somebody recognized that DTDs for XML should look like a 
real grammar not the filth in DTDs or that stupid "use XML to describe 
the DTD" thing whatever it's called.  Cool.

That sounds like a groovy idea.  Thanks, John.

> At a slightly more abstract level, I'd like to see support for lexing,
> parsing, and translating fixed-length formats.

Useful for sure.  Can you give me an example app?

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rodrigor at in-fusio.com  Mon Sep  8 04:29:38 2003
From: rodrigor at in-fusio.com (rodrigo reyes)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] Preserving Original Token Sequence In ASTs
Message-ID: <C5140F3D620F9F44AA9F84239D1564C901B24025@email.int.in-fusio.com>

Hi Terence,

> "You want ASTs instead of parse trees for translation, but ASTs have  
> the token order shuffled from the one-dimensional input 
> Let me know what you think. :)  The solution is cute if ya ask me. ;)

Very interesting. Just a few comments:

1/ I didn't understand the part which describes the differences between
parse trees and AST. Specially: "Regardless of how you express a grammar,
the AST could always remain the same". From what I've seen, this is more a
feature of the antlr parser, which allows the grammar developer to change
the AST topology at will (using ^ and #[]). Did I miss a point ?

2/ The main point of translation is that the original tree is modified. A
standard L-to-L translator is going to parse the tree, and modify the nodes:
remove this and this, add a new one, reorder this and this, etc. It is not
clear in your article what is the mechanism one should use to keep the token
stream and the AST synchronized, and it seems to be a major issue.

Bests,
Rodrigo

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon Sep  8 08:31:23 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] translations wanted?
Message-ID: <72C9789739C4214096AE945753B11EA36B1E1C@mypxmail04.bco-home.com>

I've had a few requests for a C preprocessor to work with the GCC toolkit.  

I think it would be more fun to do a Python grammar though :)

Monty

-----Original Message-----
From: Terence Parr [mailto:parrt@cs.usfca.edu] 
Sent: Sunday, September 07, 2003 10:16 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] translations wanted?


Howdy folks...looks like I have at least one student interested in 
building a grammar and/or translator for their masters project class 
(one semester, 4 credits).  So the question is, what grammars do we 
really need right now?  Is there a translator we need?  Perhaps a 
JavaCC->ANTLR translator <snicker>

Please suggest your favorite needed grammar / translator between now 
and 1:15 California time tomorrow, which is class time. ;)

Thanks,
Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org Co-founder,
http://www.jguru.com Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com link sharing, pure-n-simple




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From paultaney at yahoo.com  Mon Sep  8 10:42:05 2003
From: paultaney at yahoo.com (paul taney)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] translations wanted?
In-Reply-To: <72C9789739C4214096AE945753B11EA36B1E1C@mypxmail04.bco-home.com>
Message-ID: <20030908174205.51713.qmail@web80604.mail.yahoo.com>


--- mzukowski@yci.com wrote:
> I've had a few requests for a C preprocessor to work
> with the GCC toolkit.  
> 
> I think it would be more fun to do a Python grammar
> though :)
> 

Monty,

Wouldn't this translate rather easily to an antlr
grammar?

   
http://www.python.org/dev/doc/devel/ref/grammar.txt



__________________________________
Do you Yahoo!?
Yahoo! SiteBuilder - Free, easy-to-use web site design software
http://sitebuilder.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Mon Sep  8 11:59:54 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] Re: translations wanted?
In-Reply-To: <20030908174205.51713.qmail@web80604.mail.yahoo.com>
Message-ID: <bjijja+9ajh@eGroups.com>

Ter--

Paul's post reminds me--it would be nice to have a generic EBNF->ANTLR 
translator, including separating lexer rules from parser rules.  
That's a relatively simple project, but it could be enhanced by 
automatic generation of synpreds where there is ambiguity.  EBNF 
notations all have the same syntax, just with different keyword 
symbols (= or := or ::= for the lefthand/righthand separator, for 
example).  If you provide a translator for one EBNF dialect, then it 
can probably be used for any other one after a few changes to the 
lexer.

Come to think of it, your new analysis code might take the synpred 
generation down to a small enough problem that this can easily be done 
as a one-student term project.

--Loring

--- In antlr-interest@yahoogroups.com, paul taney <paultaney@y...> 
wrote:
> 
> --- mzukowski@y... wrote:
> > I've had a few requests for a C preprocessor to work
> > with the GCC toolkit.  
> > 
> > I think it would be more fun to do a Python grammar
> > though :)
> > 
> 
> Monty,
> 
> Wouldn't this translate rather easily to an antlr
> grammar?
> 
>    
> http://www.python.org/dev/doc/devel/ref/grammar.txt
> 
> 
> 
> __________________________________
> Do you Yahoo!?
> Yahoo! SiteBuilder - Free, easy-to-use web site design software
> http://sitebuilder.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon Sep  8 12:05:04 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] translations wanted?
Message-ID: <72C9789739C4214096AE945753B11EA36B1E23@mypxmail04.bco-home.com>

Absolutely!  

-----Original Message-----
From: paul taney [mailto:paultaney@yahoo.com] 
Sent: Monday, September 08, 2003 10:42 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] translations wanted?



--- mzukowski@yci.com wrote:
> I've had a few requests for a C preprocessor to work
> with the GCC toolkit.
> 
> I think it would be more fun to do a Python grammar
> though :)
> 

Monty,

Wouldn't this translate rather easily to an antlr
grammar?

   
http://www.python.org/dev/doc/devel/ref/grammar.txt



__________________________________
Do you Yahoo!?
Yahoo! SiteBuilder - Free, easy-to-use web site design software
http://sitebuilder.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From netminka at netscape.net  Mon Sep  8 12:54:45 2003
From: netminka at netscape.net (megan camille)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] Re: lexer frustrations
In-Reply-To: <1062881043.242.87039.m12@yahoogroups.com>
References: <1062881043.242.87039.m12@yahoogroups.com>
Message-ID: <3F5CDE85.8030700@netscape.net>

thanks everyone for your responses. I am sorry my problem wasn't clear 
in the first email!
I will try again, but this time as a request for the next version of the 
lexer.
This concerns syntactic predicates in the lexer. When the lexer has the 
input 'EndTest' and it TRIES but FAILS to match a rule of the following 
form:

END : ("End" LINE_TERMINATOR) => ENDEXIT
    ;

I would like it to exit the failing match with input equal to 'EndTest'. 
Currently this will exit
with 'ndTest'.

It seems more intutive to me that failing syntactic predicates should 
not consume input.

thanks!
megan adams

>  
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gackle at shaw.ca  Mon Sep  8 21:10:29 2003
From: gackle at shaw.ca (Daniel Gackle)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] C# grammar
Message-ID: <NEBBKKODFMOCLEEIOELFKENMCMAA.gackle@shaw.ca>

I've written an ANTLR grammar for the C# language. Would anyone be
interested in testing it and sending feedback?

The grammar is 95% complete. What I need is a catalyst, something to
kickstart me into finishing it up and releasing it to the public domain.
Some feedback would help with this, so if anyone in the ANTLR community
would find a C# grammar useful and would like to try it out, please e-mail
me privately.

Daniel Gackle


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mclowry at cs.adelaide.edu.au  Mon Sep  8 22:50:40 2003
From: mclowry at cs.adelaide.edu.au (Matt Lowry)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] My parser hangs in an infinite loop on certain inputs
Message-ID: <3F5D6A30.1000806@cs.adelaide.edu.au>

Hi folks. I'm having some trouble with my grammer concering "multiset 
formation" constructs.
The language I'm doing a parser for supports expressions like:

{* foo , 3:bar *} 

and

{* foo ,.. bar *}


These denote a multiset formed from foo and 3 instances of bar, and a 
multiset formed from all sets in the range from foo to bar respectively.
My spec for these constructs is as follows:

multiset_formation
   :   D_MS_OPEN!
       content: multiset_formation_content
       D_MS_CLOSE!
       { #multiset_formation = #( [MULTISET_FORMATION, "multiset_form"], #content ); };

multiset_formation_content
   :   (expression D_RANGE)=> multiset_range_content
   |   optional_multiset_expr_list;

multiset_range_content
   : expression D_RANGE expression;

optional_multiset_expr_list
   : ( multiset_expr ( D_COMMA! multiset_expr )* )?;

multiset_expr
   : (expression D_COLON)=> quantified_multiset_expr
   | expression;

quantified_multiset_expr
   :   occur:expression D_COLON! val:expression
       { #quantified_multiset_expr = #([QUANT_MSET_EXPR, "quant_mset_expr"],#occur,#val); }; // ACK! BLECH!


Where D_MS_OPEN="{*",  D_MS_CLOSE="*}",. D_RANGE=",..", D_COMMA=',', and 
D_COLON=':'.

The problem is that the parser generated from this enters an infinite 
loop and fails to terminate if I feed it a simple input like:
{* foo , 3:bar *}

However other valid inputs such as
{* foo ,.. bar *}
or
{* *}
are accepted as they should be.

The infinite loop seems to be occuring as a result of the translated AST 
action in the "quantified_multiset_expr" rule. If I remove this line; i.e.

quantified_multiset_expr
   :  occur:expression D_COLON! val:expression;


Now suddenly everything works fine. The rules aren't producing an AST of 
the form I want though :(.

So, my question to the list:
Is this behaviour because me do bad in the grammer and haven't realised 
it, or because ANTLR has a bug?
Or because my installation of ANTLR is bodged?
(I've attached to full grammer and test input so people can try to 
replicate this.)

Also, perhaps someone could suggest an alternative to achieve what I want.
If the parser sees:
{* foo , 3:bar *}
then I want the parser to generate a tree something like:

multiset_contents -> expression_list -> expression -> foo
                                     -> quantified_expression -> 3
                                                              -> bar


If I can achieve this without an AST action, and at the same time avoid 
tickling an ANTLR bug, then could someone please tell me.

Cheers muchly!

-- 
---------------------------------------------------------------
"He never sat down to program without a crowbar close at hand."
  -- Stanislaw Lem
---------------------------------------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------


class Muck7Par extends Parser;
options {
    buildAST = true;
    k = 1;
}


tokens {

    EXPRESSION;
    PARENTHESIZED_EXPRESSION;
    SET_FORMATION;
    MULTISET_FORMATION;
    QUANT_MSET_EXPR;

    UNARY_PLUS;
    UNARY_MINUS;
    UNARY_HASH;

}



design_file:
        ( design_unit )* EOF!;

design_unit:
        expression D_SEMICOLON!;



expression
    : expr:precedence_0_expression { #expression = #( [EXPRESSION,"expr"] , #expr ); }
    ;

precedence_0_expression
    : precedence_1_expression
        (   ( D_REFLECT^ | D_EQUAL_GR_GR^ )
            right_operand:precedence_1_expression 
        )*
    ;

precedence_1_expression
    : left_operand:precedence_2_expression 
        (   D_EQUIV^
            right_operand:precedence_2_expression 
        )*
    ;


precedence_2_expression
    : left_operand:precedence_3_expression 
        (   ( D_IMPLIES^ | D_IMPLIED_BY^ | K_IMPLIES^ )
            right_operand:precedence_3_expression 
        )*
    ;


precedence_3_expression
    : left_operand:precedence_4_expression 
        (   ( K_OR^ | K_NOR^ | K_XOR^ | K_XNOR^ | K_MAX^ )
            right_operand:precedence_4_expression
        )*
    ;


precedence_4_expression
    : left_operand:precedence_5_expression 
        (   ( K_AND^ | K_NAND^ | K_MIN^ )
            right_operand:precedence_5_expression 
        )*
    ;


precedence_5_expression
    : left_operand:precedence_6_expression 
        (   ( D_EQUAL^ | D_NOT_EQUAL^ | D_LESS^ | D_GREATER^ | D_GRE_EQUAL^ | D_EQUAL_LESS^ | K_IN^ )
            right_operand:precedence_6_expression 
        )*
    ;


precedence_6_expression
    : left_operand:precedence_7_expression 
        (   K_SUB^
            right_operand:precedence_7_expression 
        )*
    ;


precedence_7_expression
    : left_operand:precedence_8_expression 
        (   ( D_PLUS^ | D_MINUS^ | D_AMPERSAND^ | D_AMPER_AMPER^ | D_VBAR_VBAR^ )
            right_operand:precedence_8_expression 
        )*
    ;


precedence_8_expression
    : left_operand:precedence_9_expression 
        (   ( D_ASTERISK^ | D_SOLIDUS^ | K_DIV^ | K_MOD^ | K_REM^ )
            right_operand:precedence_9_expression 
        )*
    ;


precedence_9_expression
    : left_operand:precedence_10_expression 
        (   ( D_CIRCUMFLEX^ | D_HASH^ )
            right_operand:precedence_10_expression 
        )?
    ;


precedence_10_expression
    : ( K_NOT^
       | D_PLUS^     { #D_PLUS.setType( UNARY_PLUS ); }
       | D_MINUS^    {#D_MINUS.setType( UNARY_MINUS );}
       | D_PERCENT^ 
       | D_HASH^     { #D_HASH.setType( UNARY_HASH ); }
       | D_TILDE^ 
      )
      unary_operand:precedence_10_expression 
    | pre_11_expr:precedence_11_expression
    ;



precedence_11_expression
    : (name D_AT)=> at_operation
    | (name D_APOSTROPHE)=> tick_operation
    | precedence_12_expression
    ;

at_operation
    : left_operand:name D_AT! right_operand:precedence_12_expression
    ;

tick_operation
    : operand:name D_APOSTROPHE!
    ;


precedence_12_expression
    : expression_primary
    ;
        

expression_primary
    : parenthesized_expression
    | literal
    | name
    | set_formation
    | multiset_formation
    ;


parenthesized_expression
    :   D_L_PAREN!
        expr: expression
        D_R_PAREN!
        { #parenthesized_expression = #( [PARENTHESIZED_EXPRESSION, "(expr)"] , #expr ); }
    ;


literal
    : ( STRING_LITERAL
       | CHARACTER_LITERAL
       | UNDEF_LITERAL_CHAR
       | UNDEF_LITERAL_STRING
       | INFINITY_LITERAL
       | DECIMAL_LITERAL
       | BASED_LITERAL
       | BINARY_BITVECTOR
       | OCTAL_BITVECTOR
       | HEXADECIMAL_BITVECTOR
      )
    ;


name
    : label ( D_PERIOD! label )*
    ;

label
    : SIMPLE_LABEL
    | operator_interp_label
    ;

operator_interp_label
    : OL_PERCENT  | OL_AMPERSAND  | OL_CIRCUMFLEX
    | OL_AT       | OL_APOSTROPHE | OL_BIN_HASH    | OL_UNA_HASH    | OL_TILDE
    | OL_ASTERISK | OL_SOLIDUS    | OL_BIN_PLUS    | OL_UNA_PLUS    | OL_BIN_MINUS | OL_UNA_MINUS
    | OL_LESS     | OL_EQUAL      | OL_GREATER     | OL_EQUIV       | OL_GRE_EQUAL | OL_EQUAL_LESS | OL_NOT_EQUAL
    | OL_IMPLIES  | OL_IMPLIED_BY | OL_AMPER_AMPER | OL_COLON_COLON | OL_VBAR_VBAR | OL_REFLECT    | OL_EQUAL_GR_GR
    | OLK_IMPLIES | OLK_OR        | OLK_NOR        | OLK_XOR        | OLK_XNOR     | OLK_MAX
    | OLK_AND     | OLK_NAND      | OLK_MIN        | OLK_IN         | OLK_SUB      | OLK_DIV
    | OLK_MOD     | OLK_REM       | OLK_NOT
    ;


set_formation
    :   D_L_BRACE!
        content: set_formation_content
        D_R_BRACE!
        { #set_formation = #( [SET_FORMATION, "set_form"] , #content ); }
    ;
        
set_formation_content
    :   (expression D_RANGE)=> (expression D_RANGE expression )
    |   optional_expr_list
    ;

optional_expr_list
    : ( expression ( D_COMMA! expression )* )?
    ;




multiset_formation
    :   D_MS_OPEN!
        content: multiset_formation_content
        D_MS_CLOSE!
        { #multiset_formation = #( [MULTISET_FORMATION, "multiset_form"], #content ); }
    ;
        
multiset_formation_content
    :   (expression D_RANGE)=> multiset_range_content
    |   optional_multiset_expr_list
    ;

multiset_range_content
    : expression D_RANGE expression
    ;

optional_multiset_expr_list
    : ( multiset_expr ( D_COMMA! multiset_expr )* )?
    ;

multiset_expr
    : (expression D_COLON)=> quantified_multiset_expr
    | expression
    ;

quantified_multiset_expr
    : occur:expression D_COLON! val:expression
        { #quantified_multiset_expr = #([QUANT_MSET_EXPR, "quant_mset_expr"],#occur,#val); } // ACK! BLECH!
        // would seem I need to eliminate the above AST action to avoid tickling ANTLR bug (???)
    ;






class Muck7Lex extends Lexer;
options {
    charVocabulary = '\u0003'..'\uFFFE';  // disallow -1,0,1,2 as character values ...
    // charVocabulary = '\u0003'..'\u00FF';  // disallow -1,0,1,2 as character values ...
    k = 6; // need at least 6-char lookahead to distinguish between long and short unicode literals.
    // caseSensitive=true;
    // caseSensitiveLiterals=false;
}


tokens {
    K_IMPLIES = "implies";
    K_OR      = "or";
    K_NOR     = "nor";
    K_XOR     = "xor";
    K_XNOR    = "xnor";
    K_MAX     = "max";
    K_AND     = "and";
    K_NAND    = "nand";
    K_MIN     = "min";
    K_IN      = "in";
    K_SUB     = "sub";
    K_DIV     = "div";
    K_MOD     = "mod";
    K_REM     = "rem";
    K_NOT     = "not";

    OL_PERCENT     = "%__";
    OL_AMPERSAND   = "__&__";
    OL_CIRCUMFLEX  = "__^__";

    OL_AT          = "__@__";
    OL_APOSTROPHE  = "__'__";
    OL_BIN_HASH    = "__#__";
    OL_UNA_HASH    = "#__";
    OL_TILDE       = "~__";

    OL_ASTERISK    = "__*__";
    OL_SOLIDUS     = "__/__";
    OL_BIN_PLUS    = "__+__";
    OL_UNA_PLUS    = "+__";
    OL_BIN_MINUS   = "__-__";
    OL_UNA_MINUS   = "-__";

    OL_LESS        = "__<__";
    OL_EQUAL       = "__=__";
    OL_GREATER     = "__>__";
    OL_EQUIV       = "__==__";
    OL_GRE_EQUAL   = "__>=__";
    OL_EQUAL_LESS  = "__=<__";
    OL_NOT_EQUAL   = "__/=__";

    OL_IMPLIES     = "__=>__";
    OL_IMPLIED_BY  = "__<=__";

    OL_AMPER_AMPER = "__&&__";
    OL_COLON_COLON = "__::__";
    OL_VBAR_VBAR   = "__||__";

    OL_REFLECT     = "__>>>__";
    OL_EQUAL_GR_GR = "__=>>__";

    OLK_IMPLIES    = "__implies__";
    OLK_OR         = "__or__";
    OLK_NOR        = "__nor__";
    OLK_XOR        = "__xor__";
    OLK_XNOR       = "__xnor__";
    OLK_MAX        = "__max__";
    OLK_AND        = "__and__";
    OLK_NAND       = "__nand__";
    OLK_MIN        = "__min__";
    OLK_IN         = "__in__";
    OLK_SUB        = "__sub__";
    OLK_DIV        = "__div__";
    OLK_MOD        = "__mod__";
    OLK_REM        = "__rem__";
    OLK_NOT        = "not__";

}


protected GRAPHIC_CHARACTER: '\u0003'..'\u00FF';
// protected GRAPHIC_CHARACTER: '\u0003'..'\uFFFE';


protected SHORT_UNICODE_SPECIFIER
    : ('u'! | 'U'!) '+'! ( (BASED_DIGIT)? BASED_DIGIT )? BASED_DIGIT BASED_DIGIT BASED_DIGIT BASED_DIGIT;

protected LONG_UNICODE_SPECIFIER
    : ('u'! | 'U'!) '-'! BASED_DIGIT BASED_DIGIT BASED_DIGIT BASED_DIGIT 
                         BASED_DIGIT BASED_DIGIT BASED_DIGIT BASED_DIGIT;

CHARACTER_LITERAL
    : '\''! ( GRAPHIC_CHARACTER | SHORT_UNICODE_SPECIFIER | LONG_UNICODE_SPECIFIER ) '\''!;

STRING_LITERAL
    : '"'! ( {LA(2)=='"'}? "\"\"" | ~'"' )* '"'! ;



protected BINARY_DIGIT
    : '0'..'1';

protected OCTAL_DIGIT
    : '0'..'7';

protected DECIMAL_DIGIT
    : '0'..'9';

protected BASED_DIGIT 
    : '0'..'9' | 'A'..'F' | 'a'..'f';


BINARY_BITVECTOR
    : ( 'b' | 'B' ) '"' (BINARY_DIGIT)+ '"';

OCTAL_BITVECTOR
    : ( 'o' | 'O' ) '"' (OCTAL_DIGIT)+ '"';

HEXADECIMAL_BITVECTOR
    : ( 'x' | 'X' ) '"' (BASED_DIGIT)+ '"';


protected DECIMAL_DIGITS
    : ( DECIMAL_DIGIT )+;

protected BASED_DIGITS
    : ( BASED_DIGIT )+;

protected EXPONENT
    : ( 'e' | 'E' ) ( '+' | '-' )? DECIMAL_DIGITS;


DECIMAL_LITERAL
    : DECIMAL_DIGITS ( '.' DECIMAL_DIGITS )? ( EXPONENT )?;

BASED_LITERAL
    : DECIMAL_DIGIT '\\' BASED_DIGITS ( '.' BASED_DIGITS )? ( '\\' EXPONENT )?;



SIMPLE_LABEL
    : LABEL_START_CHAR ( LABEL_CONNECT_CHAR | LABEL_EXTEND_CHAR )* ;

protected LABEL_START_CHAR
    : 'a'..'z' | 'A'..'Z' ;

protected LABEL_CONNECT_CHAR
    : '_';

protected LABEL_EXTEND_CHAR
    : LABEL_START_CHAR | DECIMAL_DIGIT;




// NB inclusion of # and ~, exclusion of and "
/*
protected DELIMITER
    : D_PERCENT     | D_AMPERSAND   | D_CIRCUMFLEX | D_VERT_BAR
    | D_AT          | D_APOSTROPHE  | D_HASH       | D_TILDE
    | D_ASTERISK    | D_SOLIDUS     | D_PLUS       | D_MINUS
    | D_COMMA       | D_LOW_LINE    | D_PERIOD     | D_COLON      | D_SEMICOLON
    | D_L_PAREN     | D_R_PAREN     | D_L_SBRACKET | D_R_SBRACKET | D_L_BRACE   | D_R_BRACE
    | D_LESS        | D_EQUAL       | D_GREATER    | D_EQUIV      | D_GRE_EQUAL | D_EQUAL_LESS | D_NOT_EQUAL
    | D_IMPLIES     | D_IMPLIED_BY  | D_MS_OPEN    | D_MS_CLOSE
    | D_AMPER_AMPER | D_COLON_COLON | D_VBAR_VBAR  | D_GOES_TO
    | D_FN_START    | D_FN_END      | D_RANGE      | D_REFLECT    | D_EQUAL_GR_GR
    ;
*/

D_PERCENT:     '%';
D_AMPERSAND:   '&';
D_CIRCUMFLEX:  '^';
D_VERT_BAR:    '|';

D_AT:          '@';
D_APOSTROPHE:  '\'';
D_HASH:        '#';
D_TILDE:       '~';

D_ASTERISK:    '*';
D_SOLIDUS:     '/';
D_PLUS:        '+';
D_MINUS:       '-';

D_COMMA:       ',';
D_LOW_LINE:    '_';
D_PERIOD:      '.';
D_COLON:       ':';
D_SEMICOLON:   ';';

D_L_PAREN:     '(';
D_R_PAREN:     ')';
D_L_SBRACKET:  '[';
D_R_SBRACKET:  ']';
D_L_BRACE:     '{';
D_R_BRACE:     '}';

D_LESS:        '<';
D_EQUAL:       '=';
D_GREATER:     '>';
D_EQUIV:       "==";
D_GRE_EQUAL:   ">=";
D_EQUAL_LESS:  "=<";
D_NOT_EQUAL:   "/=";

D_IMPLIES:     "=>";
D_IMPLIED_BY:  "<=";

D_MS_OPEN:     "{*";
D_MS_CLOSE:    "*}";

D_AMPER_AMPER: "&&";
D_COLON_COLON: "::";
D_VBAR_VBAR:   "||";
D_GOES_TO:     "->";

D_FN_START:    "<*";
D_FN_END:      "*>";
D_RANGE:       ",..";
D_REFLECT:     ">>>";
D_EQUAL_GR_GR: "=>>";



OL_PERCENT:     "%__";
OL_AMPERSAND:   "__&__";
OL_CIRCUMFLEX:  "__^__";

OL_AT:          "__@__";
OL_APOSTROPHE:  "__'__";
OL_BIN_HASH:    "__#__";
OL_UNA_HASH:    "#__";
OL_TILDE:       "~__";

OL_ASTERISK:    "__*__";
OL_SOLIDUS:     "__/__";
OL_BIN_PLUS:    "__+__";
OL_UNA_PLUS:    "+__";
OL_BIN_MINUS:   "__-__";
OL_UNA_MINUS:   "-__";

OL_LESS:        "__<__";
OL_EQUAL:       "__=__";
OL_GREATER:     "__>__";
OL_EQUIV:       "__==__";
OL_GRE_EQUAL:   "__>=__";
OL_EQUAL_LESS:  "__=<__";
OL_NOT_EQUAL:   "__/=__";

OL_IMPLIES:     "__=>__";
OL_IMPLIED_BY:  "__<=__";

OL_AMPER_AMPER: "__&&__";
OL_COLON_COLON: "__::__";
OL_VBAR_VBAR:   "__||__";

OL_REFLECT:     "__>>>__";
OL_EQUAL_GR_GR: "__=>>__";

OLK_IMPLIES:    "__implies__";
OLK_OR:         "__or__";
OLK_NOR:        "__nor__";
OLK_XOR:        "__xor__";
OLK_XNOR:       "__xnor__";
OLK_MAX:        "__max__";
OLK_AND:        "__and__";
OLK_NAND:       "__nand__";
OLK_MIN:        "__min__";
OLK_IN:         "__in__";
OLK_SUB:        "__sub__";
OLK_DIV:        "__div__";
OLK_MOD:        "__mod__";
OLK_REM:        "__rem__";



UNDEF_LITERAL_STRING: "_|_";
UNDEF_LITERAL_CHAR: '\u22A5';

protected UNDEFINED_LITERAL: UNDEF_LITERAL_STRING | UNDEF_LITERAL_CHAR;

INFINITY_LITERAL: '\u221E';




COMMENT
    : ( COMMENT_LINE | COMMENT_BLOCK ) { $setType(Token.SKIP); }
    ;

protected COMMENT_LINE
    : "//" (~'\n')* LOCAL_NEWLINE;
// NOTE really this should be "//" (~LOCAL_NEWLINE)* LOCAL_NEWLINE; but ANTLR won't support that.

protected COMMENT_BLOCK
    : "/*" 
        ( options {greedy=false;}: ( ~'\n' | LOCAL_NEWLINE )
        )*
        "*/"
    ;




SEPERATOR
    : ( UNICODE_SEPERATOR
        | LOCAL_NEWLINE
        | '\u0009' | '\u000B' | '\u000C' | '\r' // HozTab, VerTab, FF, CR
        )
        { $setType(Token.SKIP); }
    ;

protected UNICODE_SEPERATOR
    : '\u0020' | '\u00A0' | '\u1680' | '\u180E' | '\u2000'..'\u200A' 
    | '\u200B' | '\u202F' | '\u205F' | '\u3000' // Zs
    | '\u2028' // Zl
    | '\u2029' // Zp
    ;

// The draft sez cause of a new line is implementation-defined; I'm defining it as the "LINE FEED" character
//  (note that CR characters are still "seperators", so DOS-style line breaking appears as
//  <SEPERATOR><NEWLINE> and MAC-style as <NEWLINE><SEPERATOR>
protected LOCAL_NEWLINE
    : '\n'  { newline();};


-------------- next part --------------
{**};
{* foo ,.. bar *};
{* foo , 3:bar *};

//foo # { a ,.. b };
//foo * { bar, b, bing };
//{};
//10 + 20 * 30;
//10 + 50 * (-100);
//10 + 50 * -100;
//foo1 - foo2 + foo3;
//"foo" # #"bar" and "ning";
//#2 # #3 and (10 + 20 + 30);
//"*****" + 'U+0000';
//2 / ( 10 + 50 ) >>> "*****" + 'U+0000';
//"foo" # # "bar" + "ning";
From mclowry at cs.adelaide.edu.au  Tue Sep  9 00:17:37 2003
From: mclowry at cs.adelaide.edu.au (Matt Lowry)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] My parser hangs in an infinite loop on certain
 inputs
In-Reply-To: <3F5D6A30.1000806@cs.adelaide.edu.au>
References: <3F5D6A30.1000806@cs.adelaide.edu.au>
Message-ID: <3F5D7E91.90409@cs.adelaide.edu.au>

Matt Lowry wrote:

>Hi folks. I'm having some trouble with my grammer concering "multiset 
>formation" constructs.
>The language I'm doing a parser for supports expressions like:
>
[bork bork bork]

>If I can achieve this without an AST action, and at the same time avoid 
>tickling an ANTLR bug, then could someone please tell me.
>  
>

OK, I've found a new way to do things that achieves more-or-less what I 
want, but the AST generated is more verbose and ornate then what I would 
like. Anyhoo,  my question remains:
Why did my initial grammer (attached to first email) result in a parser 
that entered an infinite loop on some input and not others?
As far as I can tell from the doco, what I did was perfectly kosher ...

Enjoy!

---------------------------------------------------------------
"He never sat down to program without a crowbar close at hand."
  -- Stanislaw Lem
---------------------------------------------------------------



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From paultaney at yahoo.com  Tue Sep  9 09:43:31 2003
From: paultaney at yahoo.com (paul taney)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] translations wanted?
In-Reply-To: <5.1.1.1.2.20030909164049.021b8380@wgmail2.gatwick.eur.slb.com>
Message-ID: <20030909164331.8234.qmail@web80601.mail.yahoo.com>


--- Pete Forman <pete.forman@westerngeco.com> wrote:
> At 2003-09-08 08:31 -0700, mzukowski@yci.com wrote:
> >I think it would be more fun to do a Python grammar
> though :)
> 
> So that we could write an emitter that puts in
> braces?  ;-)

Now Pete,

You know that's nothing that ten or eleven chars
of perl can't fix.  You just need a preprocessor,
here it is:

    perl -pe 'y/{}/: /' 

as in:

$ cat >tmp
i = 2
while i {
    print "Redundancy is good."
    i -= 1
}

$ perl -pe 'y/{}/: /' tmp | python
Redundancy is good.
Redundancy is good.

To brace or indent, that is the question.
No.  You can have both.

paul



__________________________________
Do you Yahoo!?
Yahoo! SiteBuilder - Free, easy-to-use web site design software
http://sitebuilder.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pete.forman at westerngeco.com  Tue Sep  9 08:43:45 2003
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] translations wanted?
In-Reply-To: <72C9789739C4214096AE945753B11EA36B1E1C@mypxmail04.bco-home.com>
Message-ID: <5.1.1.1.2.20030909164049.021b8380@wgmail2.gatwick.eur.slb.com>

At 2003-09-08 08:31 -0700, mzukowski@yci.com wrote:
>I think it would be more fun to do a Python grammar though :)

So that we could write an emitter that puts in braces?  ;-)

-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue Sep  9 08:26:43 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] My parser hangs in an infinite loop on certa
	in inputs
Message-ID: <72C9789739C4214096AE945753B11EA36B1E31@mypxmail04.bco-home.com>

Don't mix automatic tree building with manual tree building.  Your node
#occur has been automatically built with #val as the sibling already.
Remember, it is a tree, not just a node, unless you turn tree building off
for the whole rule.  So adding #val as the sibling of the tree #occur is
really adding #val to #val causing an infinite loop.  

Possible solutions, I recommend the first as the most common and clearest
code:

Common idiom using "##" shorthand for "current root":

quantified_multiset_expr
   :   expression D_COLON! expression
       { #quantified_multiset_expr = #([QUANT_MSET_EXPR,
"quant_mset_expr"],##); };


Identical but explicitly naming root for the rule:
quantified_multiset_expr
   :   expression D_COLON! expression
       { #quantified_multiset_expr = #([QUANT_MSET_EXPR,
"quant_mset_expr"],#quantified_multiset_expr); };

Turning off tree building for the rule:

quantified_multiset_expr!
   :   occur:expression D_COLON val:expression
       { #quantified_multiset_expr = #([QUANT_MSET_EXPR,
"quant_mset_expr"],#occur,#val); };

Monty

-----Original Message-----
From: Matt Lowry [mailto:mclowry@cs.adelaide.edu.au] 
Sent: Monday, September 08, 2003 10:51 PM
To: ANTLR
Subject: [antlr-interest] My parser hangs in an infinite loop on certain
inputs
...

quantified_multiset_expr
   :   occur:expression D_COLON! val:expression
       { #quantified_multiset_expr = #([QUANT_MSET_EXPR,
"quant_mset_expr"],#occur,#val); }; // ACK! BLECH!

....

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue Sep  9 14:07:27 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] inversion problems: unreachable statements &
	 lex failures
Message-ID: <72C9789739C4214096AE945753B11EA36B1E39@mypxmail04.bco-home.com>

You really should match something in a non-protected lexer rule

TEXT : (~',')* ;

Should be 

TEXT : (~',')+ ;

Give that a try.  It may still fail, if so let us know.

Also check that you have the charVocabulary option set (no, I guess you
don't looking below.)  If it is not set then your entire lexical alphabet is
whatever is referenced from lexer and parser.  In these examples that is
just ',' and nothing else.  ANTLR does not match all ASCII characters by
default.  

Monty

-----Original Message-----
From: girard_chandler [mailto:girard_chandler@yahoo.com] 
Sent: Tuesday, September 09, 2003 1:43 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] inversion problems: unreachable statements & lex
failures


I've tried to scan the archives and web for similar problems but I haven't
found any solutions.  Apologies if these are known problems.

1st, the following produces code which can't compile:

        class P extends Parser;
        startRule :  TEXT ( COMMA TEXT )* ;

        class L extends Lexer;
        TEXT : (~',')* ;
        COMMA : ",";

Gives:

+ java antlr.Tool -trace t.g
ANTLR Parser Generator   Version 2.7.2   1989-2003 jGuru.com
warning: public lexical rule TEXT is optional (can match "nothing")
+ javac L.java Main.java P.java PTokenTypes.java
L.java:100: unreachable statement
                        if ( _createToken && _token==null &&
_ttype!=Token.SKIP ) {
                        ^
1 error


This error can be eliminated by lexing a bogus keyword which overlaps the
TEXT token.  However, the result fails to run:

        class P extends Parser;
        options { buildAST=true; }
        startRule :  a:TEXT
                { System.out.println("a:" + a.getText()); }
                ( COMMA b:TEXT
                { System.out.println("b:" + b.getText()); }
                )*
                ;

        class L extends Lexer;
        options { k=2; }
        TEXT : (~',')+ ;
        COMMA : ",";
        HACK: ",==";

When run, with input "a,b,c", I get:

java Main
 > startRule; a,b,c
exception: line 1:1: unexpected char: 'a'
line 1:1: unexpected char: 'a'
        at L.nextToken(L.java:78)
        at antlr.TokenBuffer.fill(TokenBuffer.java:69)
        at antlr.TokenBuffer.LT(TokenBuffer.java:86)
        at antlr.LLkParser.LT(LLkParser.java:56)
        at antlr.LLkParser.trace(LLkParser.java:66)
        at antlr.LLkParser.traceIn(LLkParser.java:78)
        at P.startRule(P.java:56)
        at Main.main(Main.java:8)

This can be partially fixed by not using an inverse rule, and substituting
the following for TEXT:

TEXT : ('a'..'z'|'A'..'Z')+;

Then the above example works fine.  However, I want to read all possible
characters, except for ','.

Can this be done with Antlr?

Thanks,

Girard

p.s.
Partial java output for the 1st example:
L.java:
        public final void mTEXT(boolean _createToken) throws
RecognitionException, CharStreamException, TokenStreamException {
                int _ttype; Token _token=null; int _begin=text.length();
                traceIn("mTEXT");
                _ttype = TEXT;
                int _saveIndex;
                try { // debugging

                        {
                        _loop6:
                        do {
                                {
                                        matchNot(',');
                                }

                        } while (true);
                        }
                        if ( _createToken && _token==null &&
_ttype!=Token.SKIP ) {
                                _token = makeToken(_ttype);
                                _token.setText(new String(text.getBuffer(),
_begin, text.length()-_begin));
                        }
                        _returnToken = _token;
                } finally { // debugging
                        traceOut("mTEXT");
                }
        }

p.p.s:
My Main.java:
import java.io.*;
class Main {
    public static void main(String[] args) {
        try {
            L lexer = new L(new DataInputStream(System.in));
            P parser = new P(lexer);
            parser.startRule();
        } catch(Exception e) {
            System.err.println("exception: "+e);
            e.printStackTrace();
        }
    }
}


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From girard_chandler at yahoo.com  Tue Sep  9 13:42:36 2003
From: girard_chandler at yahoo.com (girard_chandler)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] inversion problems: unreachable statements & lex failures
Message-ID: <bjldvs+9d4a@eGroups.com>

I've tried to scan the archives and web for similar problems but
I haven't found any solutions.  Apologies if these are known problems.

1st, the following produces code which can't compile:

        class P extends Parser;
        startRule :  TEXT ( COMMA TEXT )* ;

        class L extends Lexer;
        TEXT : (~',')* ;
        COMMA : ",";

Gives:

+ java antlr.Tool -trace t.g
ANTLR Parser Generator   Version 2.7.2   1989-2003 jGuru.com
warning: public lexical rule TEXT is optional (can match "nothing")
+ javac L.java Main.java P.java PTokenTypes.java
L.java:100: unreachable statement
                        if ( _createToken && _token==null &&
_ttype!=Token.SKIP ) {
                        ^
1 error


This error can be eliminated by lexing a bogus keyword which overlaps
the TEXT token.  However, the result fails to run:

        class P extends Parser;
        options { buildAST=true; }
        startRule :  a:TEXT
                { System.out.println("a:" + a.getText()); }
                ( COMMA b:TEXT
                { System.out.println("b:" + b.getText()); }
                )*
                ;

        class L extends Lexer;
        options { k=2; }
        TEXT : (~',')+ ;
        COMMA : ",";
        HACK: ",==";

When run, with input "a,b,c", I get:

java Main
 > startRule; a,b,c
exception: line 1:1: unexpected char: 'a'
line 1:1: unexpected char: 'a'
        at L.nextToken(L.java:78)
        at antlr.TokenBuffer.fill(TokenBuffer.java:69)
        at antlr.TokenBuffer.LT(TokenBuffer.java:86)
        at antlr.LLkParser.LT(LLkParser.java:56)
        at antlr.LLkParser.trace(LLkParser.java:66)
        at antlr.LLkParser.traceIn(LLkParser.java:78)
        at P.startRule(P.java:56)
        at Main.main(Main.java:8)

This can be partially fixed by not using an inverse rule, and
substituting the following for TEXT:

TEXT : ('a'..'z'|'A'..'Z')+;

Then the above example works fine.  However, I want to read all
possible
characters, except for ','.

Can this be done with Antlr?

Thanks,

Girard

p.s.
Partial java output for the 1st example:
L.java:
        public final void mTEXT(boolean _createToken) throws
RecognitionException, CharStreamException, TokenStreamException {
                int _ttype; Token _token=null; int
_begin=text.length();
                traceIn("mTEXT");
                _ttype = TEXT;
                int _saveIndex;
                try { // debugging

                        {
                        _loop6:
                        do {
                                {
                                        matchNot(',');
                                }

                        } while (true);
                        }
                        if ( _createToken && _token==null &&
_ttype!=Token.SKIP ) {
                                _token = makeToken(_ttype);
                                _token.setText(new
String(text.getBuffer(), _begin, text.length()-_begin));
                        }
                        _returnToken = _token;
                } finally { // debugging
                        traceOut("mTEXT");
                }
        }

p.p.s:
My Main.java:
import java.io.*;
class Main {
    public static void main(String[] args) {
        try {
            L lexer = new L(new DataInputStream(System.in));
            P parser = new P(lexer);
            parser.startRule();
        } catch(Exception e) {
            System.err.println("exception: "+e);
            e.printStackTrace();
        }
    }
}


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From girard_chandler at yahoo.com  Tue Sep  9 16:11:17 2003
From: girard_chandler at yahoo.com (girard_chandler)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] Re: inversion problems: unreachable statements & lex failures
In-Reply-To: <72C9789739C4214096AE945753B11EA36B1E39@mypxmail04.bco-home.com>
Message-ID: <bjlmml+63v4@eGroups.com>

Thanks!  The fix was to set charVocabulary - as I can assume ASCII
input.  The * -> + didn't change anything.

-Girard


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mclowry at cs.adelaide.edu.au  Tue Sep  9 18:47:41 2003
From: mclowry at cs.adelaide.edu.au (Matt Lowry)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] My parser hangs in an infinite loop on certa
 in inputs
In-Reply-To: <72C9789739C4214096AE945753B11EA36B1E31@mypxmail04.bco-home.com>
References: <72C9789739C4214096AE945753B11EA36B1E31@mypxmail04.bco-home.com>
Message-ID: <3F5E82BD.8080802@cs.adelaide.edu.au>

mzukowski@yci.com wrote:

>Don't mix automatic tree building with manual tree building.  Your node
>#occur has been automatically built with #val as the sibling already.
>Remember, it is a tree, not just a node, unless you turn tree building off
>for the whole rule.  So adding #val as the sibling of the tree #occur is
>really adding #val to #val causing an infinite loop.  
>
>Possible solutions, I recommend the first as the most common and clearest
>code:
>
>Common idiom using "##" shorthand for "current root":
>  
>
Ah, ... this makes a lot of sense. Getting a bit more jiggy with the 
tree building stuff now.
Thanks muchly for your help.
PS! I haven't seen this ## notation anywhere in the documentaion ... :o

-- 
---------------------------------------------------------------
"He never sat down to program without a crowbar close at hand."
  -- Stanislaw Lem
---------------------------------------------------------------



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From heller at cnsystems.at  Wed Sep 10 01:28:22 2003
From: heller at cnsystems.at (heller@cnsystems.at)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] header section - include files in lexers and parsers generated by the c++ code
 gen
Message-ID: <OFD52B6627.9536DDE5-ONC1256D9D.002E3EF1-C1256D9D.002E8BD0@intern.cnsystems.at>

Hello,

is there a way to supress the #includes for "antlr/..." in generated lexers
and parsers? I would like to put a #include "stdafx.h" there instead and
put the antlr includes in a precompiled headers file.

thx,
ah


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Wed Sep 10 02:12:33 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] header section - include files in lexers and parsers generated by the c++ code gen
In-Reply-To: <OFD52B6627.9536DDE5-ONC1256D9D.002E3EF1-C1256D9D.002E8BD0@intern.cnsystems.at>; from heller@cnsystems.at on Wed, Sep 10, 2003 at 10:28:22AM +0200
References: <OFD52B6627.9536DDE5-ONC1256D9D.002E3EF1-C1256D9D.002E8BD0@intern.cnsystems.at>
Message-ID: <20030910111233.E27584@cs.utwente.nl>

Hi,

On Wed, Sep 10, 2003 at 10:28:22AM +0200, heller@cnsystems.at wrote:
> is there a way to supress the #includes for "antlr/..." in generated lexers
> and parsers? I would like to put a #include "stdafx.h" there instead and
> put the antlr includes in a precompiled headers file.

Check the example input for a C++ target in doc/cpp-runtime.html, that's
what all is possible with respect to inserting stuff around the default
includes.

If you insist on doing something like this you'll have to script around it
to modify the generated files after generation.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
              of UCSD Pascal ever released..." --- Larry Smith


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From bighead007us at yahoo.com  Wed Sep 10 09:26:58 2003
From: bighead007us at yahoo.com (Mr. J)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] Convert C++ Grammar to Java Grammar
Message-ID: <bjnjci+fed5@eGroups.com>

Hi,

I am trying to use Ada Grammar for one of my project.  I found 
someone already wrote it for C++ on antlr site.  But I need it for 
Java.  My knowledge about C++ is very little and I want to integrate 
antlr to my other java code.  Is there anyway I can convert that C++ 
Grammar to Java Grammar easily ?? Or any pointer would be 
appreciated.  In C++ grammar, it use a lot of C++ dependency code 
like using it owns method from the include file and like that.

Looking forward to hear something.

Thx in advance,
Myo


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Wed Sep 10 10:19:06 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:55 2004
Subject: [antlr-interest] Re: inversion problems: unreachable statemen
	ts & lex failures
Message-ID: <72C9789739C4214096AE945753B11EA36B1E43@mypxmail04.bco-home.com>

You still shouldn't have a lexer rule that is allowed to match nothing!
Potential for an infinite loop there....Please do use ()+

Monty

-----Original Message-----
From: girard_chandler [mailto:girard_chandler@yahoo.com] 
Sent: Tuesday, September 09, 2003 4:11 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: inversion problems: unreachable statements &
lex failures


Thanks!  The fix was to set charVocabulary - as I can assume ASCII input.
The * -> + didn't change anything.

-Girard


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From abreneliere at telys.com  Thu Sep 11 06:53:40 2003
From: abreneliere at telys.com (=?ISO-8859-1?Q?Anthony_Breneli=E8re?=)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] Error when my C++ project since updating antlr
In-Reply-To: <20030911151357.K27584@cs.utwente.nl>
References: <3F58CFBE.40703@telys.com> <20030911151357.K27584@cs.utwente.nl>
Message-ID: <3F607E64.1010900@telys.com>

Ok,

I just downloaded the file
http://wwwhome.cs.utwente.nl/~klaren/antlr/antlr-20030911.tar.gz

I re-generated all the grammar files, i compiled the project.
..but the problem is still there:

CIAOParser.hpp(330) : error C2555: 'CIAOParser::getAST': overriding 
virtual function return type differs and is not covariant from 
'antlr::Parser::getAST'
        antlr\antlr\Parser.hpp(103) : see declaration of 
'antlr::Parser::getAST'

The problem in not the 2.7.2 01/03 version, it dos just appear when i 
upgrade to the new version.

I send to you my iCAIOGrammar.g file, and the 'Main' function that call 
the parser.

Cordially,
Anthony

Ric Klaren wrote:

>Hi,
>
>On Fri, Sep 05, 2003 at 08:02:38PM +0200, Anthony Breneli?re wrote:
>  
>
>>error C2555: 'CIAOParser::getAST': overriding virtual function return 
>>type differs and is not covariant from 'antlr::Parser::getAST'
>>        antlr\antlr\Parser.hpp(103) : see declaration of 
>>'antlr::Parser::getAST'
>>
>>i didnt have that error before, and methods getAST are the same in the 
>>last version
>>
>>I've set "CommonAST" as the AST node of the grammar.
>>
>>What's behind this error message ?
>>Anyone has an idea about how to solve this problem ?
>>
>>    
>>
>
>New snapshot is up, I think it should fix this. 
>
>Note: RPM's are not updated yet (they are the previous snapshot version).
>
>Cheers,
>
>Ric
>  
>

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
//*********************************************************************************
//                          THE CIAO GRAMMAR FILE
//                        author : Anthony Breneli?re
//
// Description : this files is composed of two parts,
//
//    1. The grammar, the grammar validates the syntax of the
// file, the grammar part gets tokens from the lexer and products a tree node for
// the tree walker
//
//    2. The Lexer, the lexer reads caracters from the input stream and creates a 
// a stream of tokens, that are sent to the parser (to the functions of the grammar).
//

// These lines are added to the lexer/parser header files
//
header {
	#include "antlr.extended/ASTFactoryExt.hpp"
	#include "antlr.extended/ASTPNode.hpp"
	#include "world/WWorld.hpp"
	#include "debugger/CIAODebugReport.hpp"
	
	using namespace std;
	using namespace ciao;
	using namespace world;
	using namespace antlr;
}

// These lines are added to the lexer/parser cpp files
//
header "post_include_cpp" {

	#include <iostream>
	#include "world/WPropertiesTypes.hpp"

	void CIAOParser::reportError(const RecognitionException& ex)
	{
		CObjectList * objs;
		CObjectList * objs2;
		CObject * _templ;
		CObject * _text;
		int nLine = 0, nTLine = 0;
		char buffer[30];
		
		_templ = new CObject();
		_templ->aP(p_CATEGORY, "CIAOText");
		
		objs = new CObjectList();
		world->findObjectsWProp( objs, world->content, _templ );
		// objs.sort( "BufferLine" );
		for ( CObjectList::iterator ir = objs->begin();
			ir != objs->end();
			ir++ )
		{
			nTLine = atoi( (*ir)->getValue(p_BUFFERLINE).c_str() );
			if ( nTLine <= ex.getLine() && nTLine > nLine ) nLine = nTLine;
		}
		_templ->clear();
		_templ->aP( p_BUFFERLINE, itoa( nLine, buffer, 10) );
		objs2 = new CObjectList();
		world->findObjectsWProp( objs2, objs, _templ );
		
		if (objs2->size() == 1)
		{
			
			_text = objs2->front();
		    
			cout << endl << endl << "fichier " << _text->getValue( p_FILENAME )
				<< " page " << _text->getValue( p_PAGENUMBER )
				<< " ligne " << _text->getValue( p_LINENUMBER )
				<< endl << "------------------------------"
				<< endl << "ID : " << _text->getValue(p_IDENTIFIER)
				<< endl << _text->getValue(p_CONTENT)
				<< endl << "------------------------------"
				<< endl << "Erreur : " << ex.toString() << endl;
		} 
		else
			cout << endl << "Unknown error : the corresponding Text has not been found"
				<< " by the debugger" << endl;
			
		delete objs;
		delete objs2;
		delete _templ;
	}
	
}

options {
	language="Cpp";
}

//***************************************************
//                 THE CIAO PARSER
//
class CIAOParser extends Parser;

options {
	k = 3;		// k tokens are used to determine the choice between the different
				// alternatives of a rule
	buildAST = true;
	importVocab = CIAOLex;
	exportVocab = CIAOPar;
	ASTLabelType = "RefPNode";
	defaultErrorHandler = true;
}

tokens {	// those tokens are declared because they are used as root nodes
			// for the tree node creation

	// used by the grammar and the walkers:
	
	R_DAT="[data types]";		// [data types]
	R_ENS="[entity stat]";		// [entity stat]
	R_ENI="[id]";				// [id]
	R_ATS="[attributes]";		// [attributes]
	R_MES="[methods]";			// [methods]
	R_INH="[inherits]";			// [inherits]
	R_ASS="[association]";		// [association]
	R_CAR="[cardinality]";		// [cardinality]
	R_ACS="[action]";			// [action]
	R_USS="[use]";				// [use]
	R_FUS="[function]";			// [function]
	R_FRS="[free]";				// [free]
	R_INV="[invariant]";		// [invariant]
	R_COS="[condition]";		// [condition]
	R_DAL="[decl aliases]";		// [decl aliases]
	R_ALI="[aliases]";			// [aliases]
	R_IHM="[ihm]";				// [ihm]
	R_ATL="[attributeList]";	// [attributeList]
	R_ENT="[entity]";			// [entity]
	R_ENC="[entityComponent]";	// [entityComponent]
	R_SET="[set]";				// [set]
	R_SEC="[setComponent]";		// [setComponent]
	R_CLA="[clause]";			// [clause]
	R_CAT="[clause attribute]";	// [clause attribute]
	R_ATT="[attribute]";		// [attribute]
	R_STA="[statement]";		// [statement]
	R_PRP="[properties]";		// [properties]
	R_IDE="[identifier]";		// [identifier]
	R_MOP="[mod properties]";	// [mod properties]
	R_MVE="[mod version]";		// [mod version]
	R_MNA="[mod name]";			// [mod name]
	R_MDA="[mod date]";			// [mod date]
	R_SST="[state]";			// [state]
	R_REQ="[requirement]";		// [requirement]
	R_EQU="[equivalence]";      // [equivalence]
	R_PRO="[protection]";		// [protection]
	R_SIL="[protectors]";		// [protectors]
	R_FNC="[function_call]";    // [function_call]
}

{
private:
	CWorld * world;
	CDebugReport * debugR;
	string sCurrentStat;
	
public:
	ASTFactoryExt * astFactoryExt;

	CIAOParser(TokenStream& lexer, CWorld * _world )
	: LLkParser(lexer,3), world( _world )
	{
		debugR = new CDebugReport( &cerr );
	}
	
	~CIAOParser() 
	{
		delete debugR;
	}
	
	void reportError(const RecognitionException& ex);
}

// Root rule for the grammar:

ciaoDocument 
	:	( DELIMITER! statementA DELIMITER! )*
;
exception
catch [ RecognitionException & ex ]
{
		reportError( ex );
		consume();
		consumeUntil(_tokenSet_0);
}

statementA!
	{ sCurrentStat = ""; }
	:	( b:staStateA )? a:statId c:statement
	{ #statementA = #( #[R_STA, "[statement]"], #a, #b, #c ); }
;

statement
	:	{ sCurrentStat == "EXIG" }? requirement
	|	{ sCurrentStat == "FREE" }? statFree
	|	{ sCurrentStat == "ENTITY" }? statEntity
	|	{ sCurrentStat == "ACTION" }? action
	|	{ sCurrentStat == "ASSOCIATION" }? statAssociation
	|	{ sCurrentStat == "CONDITION" }? statCondition
	|	{ sCurrentStat == "USE" }? use
	|	{ sCurrentStat == "AFFECTATION" }? statAssignment
	|	{ sCurrentStat == "DATATYPES" }? statDataTypes
	|	{ sCurrentStat == "IHM" }? ihm
	|	{ sCurrentStat == "FUNCTION" }? function
	|	{ sCurrentStat == "DOC_PROPERTIES" }? moduleProperties
	|	{ sCurrentStat == "INVARIANT" }? invariant
	|	{ sCurrentStat == "PROTECTION" }? protection
	|	REQU! equivalence
;

staStateA!
	:	a:staState
	{ #staStateA = #( #[R_SST, "[state]"], #a ); }
;

staState
	:	"NEW" 
	|	"CANCELED"
	|	"CHANGED"
	|	"VALID"
	|	staStateSymbol
;

staStateSymbol
	:	PLUS
	|	MINUS
	|	LNOT
	|	CROSS
;
	
statId!
	:	a:ID_EXIG
		{ sCurrentStat = "EXIG"; 
		  #statId = #( #[R_IDE, "[identifier]"], #a );
		}
	|	b:ID_FREE
		{ sCurrentStat = "FREE";
		  #statId = #( #[R_IDE, "[identifier]"], #b );
		}
	|	c:ID_ENTITY
		{ sCurrentStat = "ENTITY";
		  #statId = #( #[R_IDE, "[identifier]"], #c );
		}
	|	d:ID_ACTION
		{ sCurrentStat = "ACTION";
		  #statId = #( #[R_IDE, "[identifier]"], #d );
		}
	|	e:ID_ASSOCIATION 
		{ sCurrentStat = "ASSOCIATION";
		  #statId = #( #[R_IDE, "[identifier]"], #e );
		}
	|	f:ID_CONDITION
		{ sCurrentStat = "CONDITION";
		  #statId = #( #[R_IDE, "[identifier]"], #f );
		}
	|	g:ID_USE
		{ sCurrentStat = "USE";
		  #statId = #( #[R_IDE, "[identifier]"], #g );
		}
	|	h:ID_AFFECTATION 
		{ sCurrentStat = "AFFECTATION";
		  #statId = #( #[R_IDE, "[identifier]"], #h );
		}
	|	i:ID_DATATYPES
		{ sCurrentStat = "DATATYPES";
		  #statId = #( #[R_IDE, "[identifier]"], #i );
		}
	|	j:ID_IHM
		{ sCurrentStat = "IHM";
		  #statId = #( #[R_IDE, "[identifier]"], #j );
		}
	|	k:ID_FUNCTION
		{ sCurrentStat = "FUNCTION";
		  #statId = #( #[R_IDE, "[identifier]"], #k );
		}
	|	l:ID_DOC_PROPERTIES
		{ sCurrentStat = "DOC_PROPERTIES";
		  #statId = #( #[R_IDE, "[identifier]"], #l );
		}
	|	m:ID_INVARIANT
		{ sCurrentStat = "INVARIANT";
		  #statId = #( #[R_IDE, "[identifier]"], #m );
		}
	|	n:ID_PROTECTION
		{ sCurrentStat = "PROTECTION";
		  #statId = #( #[R_IDE, "[identifier]"], #n );
		}
;

// protection rules {

	protection!
		:   COLON a:statIdProtectorList BSR b:ID_INVARIANT
		{
		#protection = 
			#( #[R_PRO, "[protection]"],
			#( #[R_SIL, "[protectors]"], #a ), #b );
		}
	;

	statIdProtectorList
		:	statIdProtector (COMMA! statIdProtector)*
	;

	statIdProtector
		: ( ID_FREE | ID_EXIG | ID_CONDITION | ID_INVARIANT )
	;

// }

equivalence
	:	a:statId
	{ #equivalence = #( #[R_EQU, "[equivalence]"], #a ); }
;

// protection rules {

	moduleProperties!
		:	a:modulePropertyList
		{ #moduleProperties = #( #[R_MOP, "[mod properties]"], #a ); }
	;

	modulePropertyList
		:	( moduleProperty )*
	;

	moduleProperty!
		:	"NAME" EQUAL a:STRING
		{ #moduleProperty = #( #[R_MNA, "[module name]"], #a ); }
		|	"VERSION" EQUAL b:STRING
		{ #moduleProperty = #( #[R_MVE, "[module version]"], #b ); }
		|	"DATE" EQUAL c:STRING
		{ #moduleProperty = #( #[R_MDA, "[module date]"], #c ); }
	;
	
// }

// END Root

// I - Declaration of entities

statDataTypes!
	:	a:statDataTypeList
		{ #statDataTypes = #( #[R_DAT, "[data types]"], #a ); }
;

statDataTypeList
	:	(CODE_ID (DOT CODE_ID)*)+
;

statEntity!
	:	CODE_ID (a:inheritance)? (b:attMetList)?
		{
			#statEntity = #( #[R_ENS, "[entity stat]"], 
				( #[R_ENI, "[id]"], #CODE_ID ), #a, #b );
		}
;

attMetList
	:	( attMet )+
;

attMet!
	:	"ATTRIBUTES"! a:statAttributeList
		{
			#attMet = #( #[R_ATS, "[attributes]"], #a );
		}
	|	"METHODS"! b:statMethodList
		{
			#attMet = #( #[R_MES, "[methods]"], #b );
		}
;

inheritance!
	:	"INHERITS" a:identifierList
		{
			#inheritance = #( #[R_INH, "[inherits]"], #a );
		}
;

statAttributeList
	:	( statAttribute )+
;

statMethodList
	:	( statMethod )+
;

statAttribute!
	:	a:CODE_ID b:CODE_ID (DOT CODE_ID)*
		{
			#statAttribute = #( #a, #b );
		}
;

statMethod
	:	a:CODE_ID b:CODE_ID
		{
			#statMethod = #( #a, #b );
		}
;

// END I

// II - Declaration of associations

statAssociation
	:	association 
;

association!
	:	a:entity b:STRING c:cardinality d:entityOrSet	//! use of 'entity', 'entityOrSet' !
	{
		#association = #( #[R_ASS, "[association]"], #a, #b, #c, #d );
	}
;

cardinality!
	:	a:INTEGER COMMA b:INTEGER 
	{	#cardinality = #( #[R_CAR, "[cardinality]"], #a, #b );	}
	
	|	c:INTEGER COMMA d:"n" 
	{	#cardinality = #( #[R_CAR, "[cardinality]"], #c, #d );	}

	|	e:"n" COMMA f:INTEGER
	{	#cardinality = #( #[R_CAR, "[cardinality]"], #e, #f );	}
;

// END II

// III - Declaration of actions

action!
	:	a:actionCommand b:entSetAttList //! use of 'entSetAttList' !
	{
		#action = #( #[R_ACS, "[action]"], #a, #b );
	}
;

actionCommand
	:	"CREATE"
	|	"READ"
	|	"UPDATE" 
	|	"DELETE" 
	|	"FIND" 
	|	"PRINT" 
	|	"LIST" 
;

// actionState
// 	:	"POSSIBLE"! 
// 	|	"NOT"! "POSSIBLE"! 
// 	|	"POSSIBLE"! "ONLY"! "WHEN"! conditionalExpression  //! use of 'conditionalExpression' !
// ;

// END of III 

// IV - Declaration of assignments
statAssignment
	:	ifAssignment
	|	assignmentExpression
;

ifAssignment
	:	"IF"! conditionalExpression	//! use of 'conditionalExpression' !
		"THEN"! assignmentExpression	//! use of 'conditionalExpression' !
		("ELSE"! assignmentExpression)?	//! use of 'assignmentExpression' !
;
// END of IV 

// V - Declaration of uses
use
	:	a:entSetAttList	// use of 'entSetAttList'
	{
		#use = #( #[R_USS, "[use]"], #a );
	}
;

// END of V 

// VI - Declaration of functions 
function!
	:	STRING functionOperator a:conditionalExpression		// use of 'conditionalExpression'
	{	#function = #( #[R_FUS, "[function]"], #a ); }
	
	|	STRING functionActionCommand b:assignmentExpression	// use of 'assignmentExpression'
	{	#function = #( #[R_FUS, "[function]"], #b );	}
;

functionActionCommand
	:	"PRE" 
	|	"POST"
;

functionOperator
	:	"POSSIBLE" "ONLY" "WHEN"
;

// END of VI

// VII - Declaration of types

// END of VII

// VIII - Declaration of free constraints

statFree! // FREE "This is a free constraint !"
	:	a:INFORMAL_TEXT ( optionalError )?
		{ #statFree = #( #[R_FRS, "[free]"], #a); }
;

// END of VIII

// VIII - Declaration of requirements

requirement! // EXIG "This is an exigeance !"
	:	a:INFORMAL_TEXT ( optionalError )?
		{ #requirement = #( #[R_REQ, "[requirement]"], #a); }
;

// END of VIII

// VI - Declaration of condition

invariant
	:	( association )=> a:association ( optionalError )? // use of '(II) association'
	{	#invariant = #( #[R_INV, "[invariant]"], #a );	}
	
	|	( b:statAliasList )? c:conditionalExpression ( optionalError )? // use of 'conditionalExpression'
	{	#invariant = #( #[R_INV, "[invariant]"], #b, #c );	}
;

statCondition
	:	statConditionA
;

statConditionA!
	:	( association )=> a:association ( optionalError )? // use of '(II) association'
	{	#statConditionA = #( #[R_COS, "[condition]"], #a );	}
	
	|	( b:statAliasList )? c:conditionalExpression ( optionalError )? // use of 'conditionalExpression'
	{	#statConditionA = #( #[R_COS, "[condition]"], #b, #c );	}
;

statAliasList
	:	(statAlias)+
;

statAlias!
	:	a:identifierList "AS" ("DISTINCT")? b:component
			// --TODO: restrict 'entity', there should be only one entity
	{	#statAlias = #( #[R_DAL, "[decl_aliases]"], #b, ( #[R_ALI, "[aliases]"], #a ) ); }
;

// END of VI

// VII - Declaration of ihm 

ihm!
	:	(target)+
	|	a:conditionalExpression ( optionalError )?
	{	#ihm = #( #[R_IHM, "[ihm]"], #a ); }
;

target!
	:	"LINK" STRING "TARGET" STRING 
;

// END of VII

// VIII - Error handling syntax 

optionalError!
	:	"OTHERWISE" "ERROR" INTEGER 
	|	"OTHERWISE" "ERROR" STRING 
;

// END of VIII

// IX - Entities & Attributes

attributeSetList	// ::customer(.firstname, .lastname)
	:	set simpleAttRowInp 
;

attributeEntList	// customer(.firstname, .lastname)
	:	entity simpleAttRowInp 
;

attributeList!	// customer(.firstname, .lastname)
	:	( setPredicate )=> c:set d:simpleAttRowInp
		{ #attributeList = #( #[R_ATL, "[attributeList]"], #c, #d ); }
		
	|	a:entity b:simpleAttRowInp 
		{ #attributeList = #( #[R_ATL, "[attributeList]"], #a, #b ); }
;

simpleAttRowInp	// (.firstname, .lastname)
	:	LPAREN! simpleAttRow RPAREN!
;

simpleAttRow	// .firstname, .lastname
	:	simpleAttribute (COMMA! simpleAttribute)*
;

attributeRow	// ::customer(.firstname, .lastname), supplier.name
	:	
	(	( attribute )=> attribute
	|	( attributeList )=> attributeList	)
	( COMMA! (
			( attribute )=> attribute
		|	( attributeList )=> attributeList
	) )*
;

entityOrSet
	:	( setPredicate )=> set
	|	entity
;

entity! // (supplier WHERE name="Telys"):client
	:	a:entityComponentList
		{ #entity = #( #[R_ENT, "[entity]"], #a ); }
;

entityComponentList
	:	firstEntityComponent ( entityComponent )*
	|	( entityComponent )+
;

firstEntityComponent! // (supplier WHERE name="Telys")
	:	a:component
		{ #firstEntityComponent = #( #[R_ENC, "[entityComponent]"], #a ); }
;

entityComponent! // ( :(supplier WHERE name="Telys") )
	:	COLON a:component
		{ #entityComponent = #( #[R_ENC, "[entityComponent]"], #a ); }
;

component
	:	LPAREN! CODE_ID clause RPAREN!
	|	CODE_ID
;

set! // ( supplier WHERE name="Telys" ):client
	:	a:setComponentList
		{ #set = #( #[R_SET, "[set]"], #a ); }
;

setComponentList
	:	( firstEntityComponent )? ( setComponent | entityComponent )+
;

setPredicate
	:	( firstEntityComponent )? ( entityComponent )* setComponent 
;

setComponent! // (supplier WHERE name="Telys")
	:	DB_COLON a:component
		{ #setComponent = #( #[R_SEC, "[setComponent]"], #a ); }
;

clause!
	:	a:"WHERE" b:conditionalExpression
	{	#clause	= #( #[R_CLA, "[clause]"], #a, #b ); }
;

entityRow	// (supplier WHERE name="Telys"):client, service
	:	entity (COMMA! entity)*
;

entSetAttList	// (supplier WHERE name="Telys"):client, service
	:	entSetAtt ( COMMA! entSetAtt )*
;

entSetAtt
	:
	(	( attributeList )=> attributeList
	|	( attribute )=> attribute
	|	( setPredicate )=> set
	|	entity
	)
;

attributeEnt	// (supplier WHERE name="Telys"):client.address
	:	entity simpleAttribute 
;

attributeSet	// (supplier WHERE name="Telys")::client.address
	:	set simpleAttribute 
;

attribute!	// ::supplier:client.address
	:	( setPredicate )=> c:set d:simpleAttribute
		{ #attribute = #( #[R_ATT, "[attribute]"], #c, #d ); }
	|	( entity )=> a:entity b:simpleAttribute
		{ #attribute = #( #[R_ATT, "[attribute]"], #a, #b ); }
	|	e:simpleAttribute 
		{ #attribute = #( #[R_CAT, "[clause attribute]"], #e ); }
;

simpleAttribute	// .name
	:	DOT! CODE_ID 
;

setOperation
	:	( set "INTERSECT" )=> a:set "INTERSECT"! b:set
	|	( set "UNION" )=> set "UNION"! set 
	|	( set "MINUS" )=> set "MINUS"! set 
;

// END of IX

// X - Expressions

expression
	:	assignmentExpression
;

assignmentExpression
	:	conditionalExpression
		ASSIGN! conditionalExpression
;

conditionalExpression
	:	inferenceExpression
;

inferenceExpression
	:	logicalOrExpression ( (LIN! | RIN! | REQU!) logicalOrExpression)*
;

logicalOrExpression
	:	logicalAndExpression ("OR"! logicalAndExpression)*
;

logicalAndExpression
	:	equalityExpressionOrBoolean
	("AND"! equalityExpressionOrBoolean)*
;

equalityExpressionOrBoolean
	:	(attribute expBoolAttClause)=> attribute expBoolAttClause 
	|	(attributeRow expBoolAttListClause)=> attributeRow expBoolAttListClause 
	|	(equalityExpression setBooleanOperator)=>
			value setBooleanOperator (attributeSet | valueListInb | interval)
	|	(interval)=> interval setBooleanOperator interval 
	|	(set setBooleanOperator)=> set setBooleanOperator set 
	|	(attributeEntList setBooleanOperator)=> attributeEntList setBooleanOperator attributeSetList 
	|	( "TRUE"! | "VRAI"! )
	|	( "FALSE"! | "FAUX"! )
	
	|	equalityExpression
;
	
equalityExpression
	:	relationalExpression ((NOT_EQUAL! | EQUAL!) relationalExpression)*
;

relationalExpression
	:	additiveExpression
		( ( LT_! | GT! | LE! | GE! ) additiveExpression )*
;

additiveExpression
	:	multiplicativeExpression ((PLUS! | MINUS! ) multiplicativeExpression)*
;

multiplicativeExpression
	:	unaryExpression ((STAR! | DIV! | MOD! ) unaryExpression)*
;

unaryExpression
	:	MINUS! unaryExpression
	|	PLUS!  unaryExpression
	|	unaryExpressionNotPlusMinus
;

unaryExpressionNotPlusMinus
	:	BNOT! unaryExpression
	|	LNOT! unaryExpression
	|	primaryExpression
;

primaryExpression
    :   ( value )=> value
	|	LPAREN! conditionalExpression RPAREN!
;

// END of X

// X - Expressions

setBooleanOperator!
	:	"IN" 
	|	"NOT" "IN"
;

expBoolAttClause!
	:	"IS" "MAX"
	|	"IS" "MIN" 
	|	"IS" "NULL" 
	|	"IS" "NOT" "NULL" 
	|	"IS" "NUMERIC"
	|	"IS" "DATE" 
	|	"IS" "PASSWORD" 
	|	"IS" "TRUE" 
	|	"IS" "FALSE" 
	|	"EXIST" 
	|	"EXIST" cardinality 
;

expBoolAttListClause!
	:	"UNIQUE"
;

numberFunction!
	:	a:numberFunctionA { #numberFunction = #( #[R_FNC, "[function_call]"], #a ); }
	|	b:numberFunctionB { #numberFunction = #b; }
	
;

numberFunctionB
	:	"DATE"! LPAREN! ( value )? RPAREN!
	|	"SECOND"! LPAREN! ( value )? RPAREN!
	|	"MINUTE"! LPAREN! ( value )? RPAREN!
	|	"HOUR"! LPAREN! ( value )? RPAREN!
	|	"DAY"! LPAREN! ( value )? RPAREN!
	|	"MONTH"! LPAREN! ( value )? RPAREN!
	|	"YEAR"! LPAREN! ( value )? RPAREN!
;

numberFunctionA
	:	"SUM" LPAREN! ( attributeSet )? RPAREN!
	|	"AVERAGE" LPAREN! ( attributeSet )? RPAREN!
	|	"COUNT" LPAREN! set RPAREN!
	|	"MAX" LPAREN! attribute RPAREN!
	|	"MIN" LPAREN! attribute RPAREN!
;

number!
	:	INTEGER
	|	FLOAT
;

interval
	:	LBRACK! value COMMA! value RBRACK!
;

valueListInb
	:	LCURLY! value (COMMA! value )* RCURLY! 
;

value // i replaced 'attribute' by 'simpleAttribute'
	:	numberFunction
	|	attribute
	|	number!
	|	STRING!
;

identifierListWOCA
	:	( CODE_ID )+
;

identifierList
	:	CODE_ID ( COMMA! CODE_ID )*
;
-------------- next part --------------
//*********************************************************************************
//                          THE CIAO LEXER FILE
//                        author : Anthony Breneli?re
//
//    The Lexer, the lexer reads caracters from the input stream and creates a 
// a stream of tokens, that are sent to the parser (to the functions of the grammar).
//

// These lines are added to the lexer header files
//
header {
	#include <iostream>
	
	#include "antlr.extended/ASTFactoryExt.hpp"
	#include "antlr.extended/ASTPNode.hpp"
	#include "world/WPropertiesTypes.hpp"
	#include "world/WWorld.hpp"
	#include "debugger/CIAODebugReport.hpp"

	using namespace std;
	using namespace ciao;
	using namespace world;
	using namespace antlr;
}

// These lines are added to the lexer/parser cpp files
//
header "post_include_cpp" {

	void CIAOLexer::reportError(const RecognitionException& ex)
	{
		CObjectList * objs;
		CObjectList * objs2;
		CObject * _templ;
		CObject * _text;
		int nLine = 0, nTLine = 0;
		char buffer[30];
		
		_templ = new CObject();
		_templ->aP(p_CATEGORY, "CIAOText");
		
		objs = new CObjectList();
		world->findObjectsWProp( objs, world->content, _templ );
		// objs.sort( "BufferLine" );
		for ( CObjectList::iterator ir = objs->begin();
			ir != objs->end();
			ir++ )
		{
			nTLine = atoi( (*ir)->getValue(p_BUFFERLINE).c_str() );
			if ( nTLine <= ex.getLine() && nTLine > nLine ) nLine = nTLine;
		}
		_templ->clear();
		_templ->aP( p_BUFFERLINE, itoa( nLine, buffer, 10) );
		objs2 = new CObjectList();
		world->findObjectsWProp( objs2, objs, _templ );
		
		if ( objs2->size() == 1 )
		{
			
			_text = objs2->front();
		    
			cout << endl << endl << "fichier " << _text->getValue( p_FILENAME )
				<< " page " << _text->getValue( p_PAGENUMBER )
				<< " ligne " << _text->getValue( p_LINENUMBER )
				<< endl << "------------------------------"
				<< endl << "ID : " << _text->getValue(p_IDENTIFIER)
				<< endl << _text->getValue(p_CONTENT)
				<< endl << "------------------------------"
				<< endl << "Erreur : " << ex.toString() << endl;
		} 
		else
			cout << endl << "Unknown error : the corresponding Text has not been found"
				<< " by the debugger" << endl;
			
		delete objs;
		delete objs2;
		delete _templ;
	}
	
}

options {
	language="Cpp";
}

//***************************************************
//                 THE CIAO LEXER
//
{
#include <string>
#include "antlr/SemanticException.hpp"
}
class CIAOLexer extends Lexer;

options {
	// testLiterals=false;
	exportVocab = CIAOLex;
	importVocab = CIAOLitterals;
	k=4;
	// charVocabulary='\u0003'..'\u00FF';
	charVocabulary='\3'..'\377';
	testLiterals=false;
	defaultErrorHandler = true;
	
	// without inlining some bitset tests, couldn't do unicode;
	// I need to make ANTLR generate smaller bitsets; see
	// bottom of JavaLexer.java
	// codeGenBitsetTestThreshold=20;
}

tokens {
	ID_ENTITY;
	ID_AFFECTATION;
	ID_ASSOCIATION;
	ID_DATATYPES;
	ID_IHM;
	ID_DOC_PROPERTIES;
	ID_EXIG;
	ID_FREE;
	ID_ACTION;
	ID_CONDITION;
	ID_USE;
	ID_FUNCTION;
	ID_INVARIANT;
	ID_PROTECTION;
}

{
private:
	CWorld * world;
	CDebugReport * debugR;
	
	bool bOutOfCIAOContext;
	bool bInformalLanguageContext;
	bool bWaitForStatementNature;
	bool bStatIsIdentified;
	
public:
	CIAOLexer(ANTLR_USE_NAMESPACE(std)istream& in, CWorld * _world )
		: CharScanner(new CharBuffer(in),true), world( _world ), 
		bOutOfCIAOContext( true ), bInformalLanguageContext( false ),
		bWaitForStatementNature( false ), bStatIsIdentified( false )
	{
		initLiterals();
		debugR = new CDebugReport( &cerr );
	}
	
	~CIAOLexer()
	{
		delete debugR;
	}
	
	void reportError( const RecognitionException& ex );
	
}

// CIAO DELIMITER
DELIMITER
	:	'\244' 
	{ 
		if ( bOutOfCIAOContext ) 
			bOutOfCIAOContext = false;
		else
			bOutOfCIAOContext = true;
			bInformalLanguageContext = false;
			bStatIsIdentified = false;
	}
;

IGNORE_TEXT
	:	{ bOutOfCIAOContext }? ( options { generateAmbigWarnings=false; } : ENDOFLINE | ~( '\244' ) )+
	{ 
		$setType(Token::SKIP);
	}
;

INFORMAL_TEXT
	:	{ bInformalLanguageContext }? (  options { generateAmbigWarnings=false; } : ENDOFLINE | ~( '\244' ) )+ 
;

// Operators
//
QUESTION		:	'?'		;
LPAREN			:	'('		;
RPAREN			:	')'		;
LBRACK			:	'['		;
RBRACK			:	']'		;
LCURLY			:	'{'		;
RCURLY			:	'}'		;
COLON			:	':'		;
DB_COLON		:	"::"	;
COMMA			:	','		;
DOT				:	'.'		;
ASSIGN			:	":="	;
EQUAL			:	"="		;
LNOT			:	'!'		;
BNOT			:	'~'		;
NOT_EQUAL		:	"<>"	;
DIV				:	'/'		;
DIV_ASSIGN		:	"/="	;
PLUS			:	'+'		;
PLUS_ASSIGN		:	"+="	;
INC				:	"++"	;
MINUS			:	'-'		;
MINUS_ASSIGN	:	"-="	;
DEC				:	"--"	;
STAR			:	'*'		;
STAR_ASSIGN		:	"*="	;
MOD				:	'%'		;
MOD_ASSIGN		:	"%="	;
SR				:	">>"	;
SR_ASSIGN		:	">>="	;
BSR				:	">>>"	;
BSR_ASSIGN		:	">>>="	;
GE				:	">="	;
GT				:	">"		;
SL				:	"<<"	;
SL_ASSIGN		:	"<<="	;
LE				:	"<="	;
LT_				:	'<'		;
BXOR			:	'^'		;
BXOR_ASSIGN		:	"^="	;
BOR				:	'|'		;
BOR_ASSIGN		:	"|="	;
LOR				:	"||"	;
BAND			:	'&'		;
BAND_ASSIGN		:	"&="	;
LAND			:	"&&"	;
SEMI			:	';'		;
LIN				:	"==>"	;
RIN				:	"<=="	;
AT				:	'@'		;
// UNDERSCORE		:	'_'		;
AP				:	'`'		;
RAP				:	('\221' | '\222'); // '
CROSS			:	('\327');
REQU			:	"<==>"	;

// Whitespace and new lines characters are ignored
// only in CIAO Formal context language
WS
	:	( ' ' | '\t' | '\f' | ENDOFLINE )+
	{	$setType(Token::SKIP); }
;

STRING
	:	'"' ( options { generateAmbigWarnings = false; } : ENDOFLINE | ~('"' | '\244'))* '"'
	|	'\'' ( options { generateAmbigWarnings = false; } : ENDOFLINE | ~('\'' | '\244'))* '\''
;

FLOAT_OR_INTEGER
	:	( FLOAT ) => FLOAT { $setType(FLOAT); }
	|	( INTEGER ) => INTEGER { $setType(INTEGER); }
;

IDENTIFIER
	options { testLiterals=true; }
	:	( 
		( CODE_WDOT '/' "ENTITY" )=>
		 CODE_WDOT '/' "ENTITY" { $setType( ID_ENTITY ); }
	|	( CODE_WDOT '/' "AFFECTATION" )=>
		CODE_WDOT '/' "AFFECTATION" { $setType( ID_AFFECTATION ); }
	|	( CODE_WDOT '/' "ASSOCIATION" )=>
		CODE_WDOT '/' "ASSOCIATION" { $setType( ID_ASSOCIATION ); }
	|	( CODE_WDOT '/' "DATATYPES" )=>
		CODE_WDOT '/' "DATATYPES" { $setType( ID_DATATYPES ); }
	|	( CODE_WDOT '/' "IHM" )=>
		CODE_WDOT '/' "IHM" { $setType( ID_IHM ); }
	|	( CODE_WDOT '/' "DOC_PROPERTIES" )=>
		CODE_WDOT '/' "DOC_PROPERTIES" { $setType( ID_DOC_PROPERTIES ); }
	|	( CODE_WDOT '/' 'E' )=>
		CODE_WDOT '/' 'E' { $setType( ID_EXIG ); if ( ! bStatIsIdentified ) bInformalLanguageContext = true; }
	|	( CODE_WDOT '/' 'F' )=>
		CODE_WDOT '/' 'F' { $setType( ID_FREE ); if ( ! bStatIsIdentified ) bInformalLanguageContext = true; }
	|	( CODE_WDOT '/' 'A' )=>
		CODE_WDOT '/' 'A' { $setType( ID_ACTION ); }
	|	( CODE_WDOT '/' 'R' )=>
		CODE_WDOT '/' 'R' { $setType( ID_CONDITION ); }
	|	( CODE_WDOT '/' 'U' )=>
		CODE_WDOT '/' 'U' { $setType( ID_USE ); }
	|	( CODE_WDOT '/' 'F' )=>
		CODE_WDOT '/' 'F' { $setType( ID_FUNCTION ); }
	|	( CODE_WDOT '/' 'I' )=>
		CODE_WDOT '/' 'I' { $setType( ID_INVARIANT ); }
	|	( CODE_WDOT '/' 'P' )=>
		CODE_WDOT '/' 'P' { $setType( ID_PROTECTION ); }
	|	( CODE_ID ) => CODE_ID { $setType(CODE_ID); }
		) 
	{
		bStatIsIdentified = true;
	}
;

UNKNOWN_CHAR
	:	( ( '\241'..'\243' ) | ('\245'..'\326') | ('\330'..'\377') )
;

protected
CODE_ID
	:	LETTER (LETTER | NUMBER)*
;

protected
CODE_WDOT
	:	LETTER (LETTER | NUMBER | '.')* 
;

protected
FLOAT
	:	(NUMBER)+ '.' (NUMBER)+
;

protected
INTEGER
	:	(NUMBER)+
;

protected
NUMBER
	: ('0'..'9')
;

protected
LETTER
	: ('a'..'z'|'A'..'Z' |'_')
;

protected
ENDOFLINE
	:	( options { generateAmbigWarnings=false; } : "\r\n" | '\r' | '\n' ) { newline(); }
;
-------------- next part --------------
//***************************************************************
// File		: CIAOMain.cpp
// Projet	: iCIAO
// Auteur	: Anthony Breneli?re
// Version	: 1.0

// include the antlr-generated files
// CIAO grammar
#include <antlr.generated/CIAOLexer.hpp>
#include <antlr.generated/CIAOParser.hpp>
#include <antlr.generated/CIAOWalker.hpp>
#include <antlr.generated/CIAOAdvWalker.hpp>

// CIAO debugger
#include <debugger/CIAODebugLexer.hpp>
#include <debugger/CIAODebugParser.hpp>

// CIAO commandline
#include "CmdLine/cmdLineLexer.hpp"
#include "CmdLine/cmdLineParser.hpp"

// include the needed antlr source files
#include <antlr/BaseAST.hpp>
#include <antlr/TokenBuffer.hpp>
#include <antlr/CharStreamException.hpp>
#include <antlr/TokenStreamIOException.hpp>
#include <antlr/TokenStreamRecognitionException.hpp>
#include <antlr/TokenStreamRetryException.hpp>
#include <antlr/RecognitionException.hpp>
#include "antlr.extended/ASTFactoryExt.hpp"

// include the models used to store datas
#include "ciao.elements/CIAOWorkTable.hpp"
#include "ciao.elements/CIAOProject.hpp"
#include "world/WWorld.hpp"

#include "CIAOMain.hpp"
#include "CIAOReport.hpp"
#include "debugger/CIAODebugReport.hpp"
#include <conio.h>

#ifdef _WINDOWS
#include "win32/_Win_Start.hpp"
#endif

	
	#include "managed.code/ConverterDoc.hpp"
#ifdef USE_MANAGED_EXTENSIONS
	#define NONET
	#include "managed.code/ConverterXmi.hpp"
#endif

using namespace std;
using namespace world;
using namespace Win32System;

namespace ciao
{

CMainApp::CMainApp()
{
	// # change the version number here ! #
	sVersion = "v0.920 build 034";
}

CMainApp::~CMainApp()
{
	char buf;

	if ( this->Options.DestinationFile == "" )
	{
		cout << endl << "Press a key to exit..." << endl;
		buf = getch();
	}
}

int CMainApp::Main(string &sCmdLine)
{
	ifstream fileIn, fileIn_;
	string sCIAOfn;
	strstream clinebuf;

	//
	// I - parse the command line and assign the application properties
	//
	try
	{
		clinebuf << sCmdLine;
	
		cmdLineLexer lexer( clinebuf );
		cmdLineParser parser( lexer );

		// read the program parameters and sets the corresponding application attributes
		parser.parameter_list( this->Options );

	}
	catch(ANTLR_USE_NAMESPACE(antlr)ANTLRException & e)
	{
		DisplayHelp();
		return -1;
	}

	/*if(this->Options.iniFile == "")
	{
		this->Options.iniFile = _getCurrentDir();
		this->Options.iniFile.append("\\iCIAO.ini");
	}*/

	//
	// Read the INI File
	//
	/*if(this->Options.iniFile != "")
	{

		string source = _getINIValue(	this->Options.iniFile,
										"Parameters",
										"Source");

		if(source == "1")
		{
			this->Options.source = true;
		}
		else
		{
			this->Options.source = false;
		}

	}*/

	// redirect the results to a file if an output file is specified
	if ( this->Options.DestinationFile != "" )
		if ( -1 == RedirectCout2File( cout, true, this->Options.DestinationFile ) ) return -1;

	// redirect the errors to a file if an output file is specified
	Win32System::_getCurrentDir( Options.DebugFile );
	Options.DebugFile += "\\debug.log";
	if ( -1 == RedirectCout2File( cerr, true, Options.DebugFile ) ) return -1;

	//
	// II - display and checking the chosen attributes to standard output stream
	//
	{
		// check the source filed existance, and replace the 
		string sFNtoCheck;
		bool allFilesFound = true;

		for ( vector<string>::iterator ir = Options.SourceFiles.begin();
			ir != this->Options.SourceFiles.end();
			ir++ )
		{
			_searchPath( sFNtoCheck, *ir );
			if ( sFNtoCheck == "" ) 
			{
				cerr << endl << "The file " << *ir << " has not been found.";
				allFilesFound = false;
			}
			else
				*ir = sFNtoCheck;
		}
		if ( ! allFilesFound ) return (-1);

		cerr << "-=================( Command Parameters )=================-" << endl;
		cerr << endl;

		for ( vector<string>::iterator ir = Options.SourceFiles.begin();
			ir != this->Options.SourceFiles.end();
			ir++ )
		{
			cerr << "* Source file : " + *ir << endl;
		}
			cerr << "* Destination file : " + this->Options.DestinationFile << endl;
			cerr << "* " << endl;
	}

	if ( this->Options.SourceFiles.size() == 0 ) 
	{
		DisplayHelp();
		return -1;
	}

	if ( this->Options.displayHelp )
	{
		DisplayHelp();
		return 0;
	}

		#ifdef _WINDOWS
	//
	// III - generate the text documents from XMI or Word documents
	//
	ConvertDocuments();
		#endif

	//
	// IV - concatenates source file to consolidate all ciao text files into one
	//      the result text file is sCIAOfn
	//
	ConcatenateSourceFiles( sCIAOfn );

	fileIn.open( sCIAOfn.c_str() );
	fileIn_.open( sCIAOfn.c_str() );

	// The antlr extended factory is used to create a tree of CIAO elements
	// that are exploited, it is used in the parser, and created here :
	ANTLR_USE_NAMESPACE(antlr)ASTFactoryExt ast_factory( "PNode", antlr::PNode::factory );

	// The world for storing all the datas is created there :
	CWorld * world = new CWorld();

	// The ciao data object that check document consistency is created here:
	CProject * project = new CProject();
	CWorkTable * workTable = new CWorkTable( project );

	if ( fileIn.fail() || fileIn_.fail() )
	{
		cerr << endl << "The file '" << sCIAOfn << "' could not be opened." << endl;
		return -1;
	}

	else
	{
		// the main text document to analyse has been successfully opened

	//
	// V - pre-parsing the document,
	//			for debugging purpose

	CIAODebugLexer debuglexer( fileIn, false );
	CIAODebugParser debugparser( debuglexer, world );

	try
	{
 		debugparser.document();
	}
	catch(ANTLR_USE_NAMESPACE(antlr)ANTLRException& e)
	{
		cerr << "Debugger Exception: " << e.toString() << endl;
		return -1;
	}

	fileIn.close();
	fileIn.open( sCIAOfn.c_str() );

	//
	// VI - parsing the document,
	//			the parser's ciaoDocument function is called, and the file is read

	CIAOLexer lexer( fileIn_, world );
	CIAOParser parser( lexer, world  );

	try
	{
		parser.initializeASTFactory( ast_factory );
		parser.setASTFactory( &ast_factory );
		parser.ciaoDocument();
	}
	catch(ANTLR_USE_NAMESPACE(antlr)CharStreamException& e)
	{
		cerr << "CIAOMain: CharStreamException: " << e.toString() << endl;
		return -1;
	}
	catch(ANTLR_USE_NAMESPACE(antlr)RecognitionException& e)
	{
		cerr << "CIAOMain: RecognitionException: " << e.toString() << endl;
		return -1;
	}
	catch(ANTLR_USE_NAMESPACE(antlr)TokenStreamIOException& e)
	{
		cerr << "CIAOMain: TokenStreamIOException: " << e.toString() << endl;
		return -1;
	}
	catch(ANTLR_USE_NAMESPACE(antlr)TokenStreamRecognitionException& e)
	{
		cerr << "CIAOMain: TokenStreamRecognitionException: " << e.toString() << endl;
		return -1;
	}
	catch(ANTLR_USE_NAMESPACE(antlr)TokenStreamRetryException& e)
	{
		cerr << "CIAOMain: TokenStreamRetryException: " << e.toString() << endl;
		return -1;
	}
	catch(ANTLR_USE_NAMESPACE(antlr)TokenStreamException& e)
	{
		cerr << "CIAOMain: TokenStreamException: " << e.toString() << endl;
		return -1;
	}

	//
	// VIb - display the resulting tree 
	//			

	if ( this->Options.displayTree )
		cout << GetTreeString ( static_cast<antlr::RefAST>( parser.getAST() ), 0 ) << endl;

	if ( this->Options.checkSyntaxOnly ) {
		cout << "Syntax is OK";
		return 0;
	}
			
	//
	// VII - walking the parser's resulting tree,
	//			the consistency's functions are called
			
		CIAOWalker walker ( workTable );
		CIAOAdvWalker advWalker ( world );
		
		// walker.initializeASTFactory(ast_factory);
		// walker.setASTFactory(&ast_factory);
		
		// walk tree
		walker.ciaoTreeDocument( static_cast<antlr::RefAST> (parser.getAST()) );
		// walk advanced tree : pass 1
		advWalker.ciaoTreeDocument( static_cast<antlr::RefAST> (parser.getAST()), 1 );

		// creating the world->statementList and world->ciaoTextList lists
		world->statementList = new CObjectList();
		CObject * oTemplate = new CObject();
		oTemplate->aP( p_CATEGORY, "Statement" );
		world->findObjectsWProp( world->statementList, world->content, oTemplate);
		delete oTemplate;
				
		world->ciaoTextList = new CObjectList();
		oTemplate = new CObject();
		oTemplate->aP( p_CATEGORY, "CIAOText" );
		world->findObjectsWProp( world->ciaoTextList, world->content, oTemplate);
		delete oTemplate;

		// walk advanced tree : pass 2
		advWalker.ciaoTreeDocument( static_cast<antlr::RefAST> (parser.getAST()), 2 );	
		
		fileIn.close();
		fileIn_.close();
	}

	//
	// VIIb - display the world's content 
	//	

	// create the report objects to configure it according to the options
	CDebugReport * debugR = new CDebugReport( &cerr );

	if ( this->Options.displayTree )
		debugR->displayObjectList( world->content );

	delete debugR;

	// delete the source file if it's a temp file
	if ( ! Options.doNotDeleteTempFiles ) 
	{
		bool bFileFound = false;
		vector<string>::iterator ir = this->Options.SourceFiles.begin();
		while ( ir != this->Options.SourceFiles.end() )
		{
			if ( sCIAOfn == *ir ) bFileFound = true;
			ir++;
		}
		if ( ! bFileFound )
		{
			if ( ! _deleteFile( sCIAOfn ) )
				{ cerr << "Warning, the file " << sCIAOfn << " could not be deleted"; }
		}
	}

	//
	// VIII - here are performed the post-reading consistency checks on the project
	//
	workTable->performDataAnalysis();

	//
	// IX - display the results,
	//				to a file, a graphic interface or the console
	DisplayResults( world, workTable );

	delete world;
	delete project;
	delete workTable;

	// reinitialize the standard output stream, that has been kept as static value
	//
	if ( this->Options.DestinationFile != "" ) RedirectCout2File( cout, false, "" );

	return (0);
}


int CMainApp::RedirectCout2File( ostream & _ostr, bool _toFile, const string & _sFileN )
{
	static streambuf * ostr_sbuf; // remember the cout buffer to reinitialize
	static ofstream * FOutput;

	if ( _toFile ) // redirect to file or reinitialize
	{
		FOutput = new ofstream;

		(*FOutput).open( _sFileN.c_str(), ios_base::out);

		if ( ! (*FOutput).fail() )
		{
			ostr_sbuf = _ostr.rdbuf();
			_ostr.rdbuf( (*FOutput).rdbuf() );
		}
		else
		{
			// exit !
			cout << "The specified file " << _sFileN
				<< " could not be opened for writing.";
			// delete FOutput;
			return -1;
		}
	}
	else
	{
		if ( this->Options.DestinationFile != "" )
		{
			_ostr.rdbuf( ostr_sbuf );
			(*FOutput).close();
		}
	}
	return 0;
}


void CMainApp::ConcatenateSourceFiles(string & sCIAOfn)
{
	ifstream fileIn;
	ofstream fileOut;
	char * fbuffer;
	long size;

	if ( this->Options.SourceCIAOFiles.size() > 1 )
	{
		// concatenate source files into one unique file
		{

			sCIAOfn = "___temp.ciao";

			fileOut.open( sCIAOfn.c_str(), ofstream::binary | ofstream::trunc );

			if ( ! (fileIn.fail()) )
			{
				for ( vector<string>::iterator ir = Options.SourceCIAOFiles.begin();
					ir != this->Options.SourceCIAOFiles.end();
					ir++ )
				{
					if ( ! (fileIn.fail()) )
					{
						fileIn.open( (*ir).c_str(), ifstream::binary);

						// get size of file
						fileIn.seekg(0, ifstream::end);
						size = fileIn.tellg();
						fileIn.seekg(0);

						// allocate memory for file content
						fbuffer = new char [size];

						// read content of infile
						fileIn.read (fbuffer, size);

						// write to outfile
						fileOut.write (fbuffer, size);

						// release dynamically-allocated memory
						delete[] fbuffer;

						fileIn.close();
						fileIn.clear();

						// delete the source file if it's a temp file
						if ( ! Options.doNotDeleteTempFiles ) 
						{
							bool bFileFound = false;
							vector<string>::iterator ir2 = this->Options.SourceFiles.begin();
							while ( ir2 != this->Options.SourceFiles.end() )
							{
								if ( *ir == *ir2 ) bFileFound = true;
								ir2++;
							}
							if ( ! bFileFound )
							{
								if ( ! _deleteFile( *ir ) )
									{ cerr << "Warning, the file " << *ir << " could not be deleted"; }
							}
						}
					}
					else
					{
						cout << "The source file '" + (*ir) + "' could not be opened." << endl;
						return;
					}
				}
			}
			else
			{
				cout << "The destination file '" + sCIAOfn + "' could not be opened." << endl;
			}

			fileOut.close();
		}
	}
	else
	{
		sCIAOfn = this->Options.SourceCIAOFiles[0];
	}

}


void CMainApp::DisplayHelp(void)
{
	cout << endl << "----------------------------------------------------------------------"
		 << endl << "iCIAO.exe ";
	if ( Options.dispVersion ) cout << sVersion;
	cout <<         "    :   CIAO (c) Telys"
	     << endl << "----------------------------------------------------------------------" << endl
		 << endl << "To use iCIAO you have to type the following command :" << endl
		 << endl << "     Simple usage : iCIAO.exe (source 1)..(source n) /ouput:(destination) [options]" << endl
		 << endl << "           source : the path of one or more sources files,"
		 << endl << "                    may be \"\\specifications\\survey application.ciao\""
		 << endl << "      destination : the path of a destination file,"
		 << endl << "                    may be \"\\temp\\spec results.txt\"" << endl
		 << endl << "            /help : display that help message"
		 << endl << "            /tree : display the resulting AST data tree" << endl
	     << endl << " /checksyntaxonly : just check the syntax, do not check the document consistency" << endl;
}


string CMainApp::GetTreeString(antlr::RefAST T, int level)
{
	string ts="";
	int i;

	if ( T == NULL ) return ts;

	if ( T->getFirstChild() )
	{
		ts += "\n";
		for ( i=1; i<=level; i++ ) ts += ". ";
		ts += T->toString();
		ts += GetTreeString( T->getFirstChild(), level + 1 );
	}
	else
	{
		ts += "\n";
		for ( i=1; i<=level; i++ ) ts += ". ";
		ts += T->toString();
	}


	if ( T->getNextSibling() )
		ts += GetTreeString( T->getNextSibling(), level );

	return ts;
}


void CMainApp::DisplayResults( CWorld * _world, CWorkTable * _workTable )
{
	string sCounterFile;

	CReportCreator * Report = new CReportCreator();

	Report->setLanguage ( this->Options.language );
	Report->setLinesOn ( false );
	Report->setDetailsOn ( true );
	Report->setWorld( _world );
	Report->setWorkTable( _workTable );

	if (this->Options.language == "french")
		cout << endl << "          -= Rapport d'analyse iCIAO =-" << endl;
	if (this->Options.language == "english")
		cout << endl << "          -= Analysis CIAO report =-" << endl;

	cout << "________________________________________________________________________________" << endl << endl;

	if (this->Options.language == "french")
		cout << endl << "Document(s) source(s) : " << endl;
	if (this->Options.language == "english")
		cout << endl << "Source(s) document(s) : " << endl;

	for ( vector<string>::iterator ir = Options.SourceFiles.begin();
		ir != this->Options.SourceFiles.end();
		ir++ )
	{
		cout << " - " + *ir << endl;
	}

	if (this->Options.language == "french")
		cout << endl << endl << "      [ [ Coh?rence des r?gles ] ]" << endl << endl;
	if (this->Options.language == "english")
		cout << endl << endl << "      [ [ Rules's consistency ] ]" << endl << endl;

	cout << "Anomalies de niveau 1 : ";

	Report->displayNoErrorNotification();
	Report->displayEntitiesToUser( (elementState) (tused | tnotdeclared) );
	Report->displayEntitiesToUser( (elementState) (tdeclared | tnotused) );
	Report->displayAttributesToUser( (elementState) (tused | tnotdeclared) );
	Report->displayAttributesToUser( (elementState) (tdeclared | tnotused) );
	Report->displayAssociationsToUser( (elementState) (tused | tnotdeclared) );
	Report->displayAssociationsToUser( (elementState) (tdeclared | tnotused) );
	Report->displayEntitiesWithoutAttribute();
	Report->displayAssociationsWithoutCardinality();
	// Report->displayEntitiesWMissingAction();
	Report->displayEntitiesWMissingActionDetailed();

	cout << "Anomalies de niveau 2 : ";

	Report->displayInvariantIncoherence();

	if (this->Options.DestinationFile != "")
	{
		cout << "\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"
			 << "\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n";
	}

	cout << "_____________________________________________________" << endl << endl;

	if (this->Options.language == "french")
		cout << endl << "      [ [ Informations sur les entit?s/associations ] ]" << endl << endl;
	if (this->Options.language == "english")
		cout << endl << "      [ [ Entity/Associations informations ] ]" << endl << endl;

	Report->displayEntitiesToUser( tused );
	Report->displayEntitiesToUser( tdeclared );
	Report->displayAttributesToUser( tused );
	Report->displayAttributesToUser( tdeclared );
	Report->displayAssociationsToUser( tused );
	Report->displayAssociationsToUser( tdeclared );
	
	if (this->Options.language == "french")
		cout << endl << "      [ [ Compteurs ] ]" << endl << endl;
	if (this->Options.language == "english")
		cout << endl << "      [ [ Counters ] ]" << endl << endl;

	Report->displayCounters();

	if ( this->Options.DestinationFile != "" )
	{
		int sSlashPos = Options.DestinationFile.rfind('\\');

		if ( sSlashPos != -1 ) 
			sCounterFile = Options.DestinationFile.substr( 0, sSlashPos + 1 );

		sCounterFile = sCounterFile + ( (Options.language == "english") ? "counter.txt" : "" );
		sCounterFile = sCounterFile	+ ( (Options.language == "french") ? "compteur.txt" : "" );

		RedirectCout2File( cout, true, sCounterFile );

	}
	
	Report->displayStatementStatusCounters();
	
	delete Report;
}

	#ifdef _WINDOWS


void CMainApp::ConvertDocuments()
{
	string sExt; // used to store the extension of source files for anslysis
	string sCIAOfn; // used to store the name of the generated text ciao file
	string sDOCInitfn; // used to store the name of the .doc/.xmi file as entered by the user
	string sDOCfn; // used to store the name of the .doc/.xmi file with the full path 

	for ( vector<string>::iterator ir = Options.SourceFiles.begin();
		ir != this->Options.SourceFiles.end();
		ir++ )
	{
		sDOCInitfn = *ir;
		if ( sDOCInitfn.length() >= 4 ) sExt.assign(sDOCInitfn.substr(sDOCInitfn.length() - 4, 4));

		sDOCfn = _getAbsolutePathName( sDOCfn, sDOCInitfn );
		sCIAOfn.assign(sDOCfn, 0, sDOCfn.length() - 3);
		sCIAOfn.append("ciao", 4);

		if ( ( sExt == ".doc" )	|| ( sExt == ".rtf" ) )
		{
			// strings sCIAOfn et sDOCfn are defined

			if ( ( sExt == ".doc" )
				|| ( sExt == ".rtf" ) )
			{
				CConverterDoc * convDoc = new CConverterDoc();
				convDoc->ConvertFromDOC( sCIAOfn.c_str(), sDOCfn.c_str(), this->Options.debugDocLines );
			}
		}

#ifdef USE_MANAGED_EXTENSIONS

		// that functionality is only available using managed extensions
		else
			if ( ( sExt == ".xmi" )	|| ( sExt == ".xml" ) )
			{
				if ( ( sExt == ".xmi" )
					|| ( sExt == ".xml" ) )
				{
					CConverterXmi * convXmi = new CConverterXmi();
					convXmi->ConvertFromXMI( sCIAOfn.c_str(), sDOCfn.c_str() );
				}
			}

#endif // USE_MANAGED_EXTENSIONS

			else sCIAOfn = sDOCInitfn;
		
		// add the converted (or not) source file to the CIAO source file list
		Options.SourceCIAOFiles.push_back( sCIAOfn );
	}
}

} // end of namespace ciao

	#endif // _WINDOWS
-------------- next part --------------
//***************************************************************
// File		: CIAOMain.hpp
// Project	: iCIAO
// Author	: Anthony Breneliere
// Version	: 1.0

#ifndef _CIAOMain_hpp_
#define _CIAOMain_hpp_

#include <string>
#include <iostream>
#include <strstream>
#include <fstream>
#include <vector>
#include <antlr/ASTRefCount.hpp>

#include "CIAOConfig.hpp"
#include "world/WWorld.hpp"
#include "ciao.elements/CIAOWorkTable.hpp"

namespace ciao {

// options of the source file
class CAppOptions
{
	public:

		CAppOptions()
		{
			displayHelp = false;
			displayTree = false;
			checkSyntaxOnly = false;
			language = "french";
			dispVersion = false;
			debugDocLines = false;
			doNotDeleteTempFiles = false;
			source = false;
			iniFile = "";
		}

		// List of source files to analyze
		std::vector<std::string> SourceFiles;

		// List of CIAO source files to analyze
		std::vector<std::string> SourceCIAOFiles;

		// the name of the destination file
		std::string DestinationFile;

		// this is the name of the debug file
		std::string DebugFile;

		// language to use with the program
		std::string language;

		// user asked to display the help message if true
		bool displayHelp;

		// display also the tree resulting from the parsing
		bool displayTree;

		// just check the syntax
		bool checkSyntaxOnly;

		// just check the syntax
		bool dispVersion;
	
		// option to detch the lines & pages from the original document
		bool debugDocLines;

		// option used to preserve intermediary files when the analys id done
		// from an xml file or a word document
		bool doNotDeleteTempFiles;

		// option used to display the source file of a ciao error
		bool source;

		// the INI file name
		std::string iniFile;
};

class CMainApp
{

	std::string sVersion;

public: 

	CAppOptions Options;

	CMainApp();

	~CMainApp();

	/*
	 * the platform generic main function, called by the program run-time or another
	 * main's function (specific to the platform)
	 */
	int Main (std::string &sCmdLine);

	/*
	 * display the parser's resulting tree
	 */
	std::string GetTreeString(antlr::RefAST T, int level);

	/*
	 * Display the resulting data after the ciao document's consistency
	 * has been performed
	 */
	void DisplayResults( world::CWorld * _world, CWorkTable * _workTable );

	/*
	 * Display the command-line help
	 */
	void DisplayHelp(void);

	/*
	 * Windows Specific function.
	 * Converts all XMI and Word documents to ciao text files
	 */
	void ConvertDocuments();

	/*
	 * read the source files names from the app's options, concatenate all these files
	 * into one, which name is sent has parameter
	 */
	void ConcatenateSourceFiles(std::string & sCIAOfn);

	/*
	 * Redirect the standard ouput to a file
	 *	- use a static variable to store the cout's buffer
	 */
		// int RedirectCout2File( bool toFile, const string & _sFileN );
	int RedirectCout2File( ostream & _ostr, bool _toFile, const string & _sFileN );
};

} // end of ciao namespace

#endif
From parrt at antlr.org  Thu Sep 11 11:14:02 2003
From: parrt at antlr.org (Terence Parr)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] updated ANTLR tutorial added to getting started doc
Message-ID: <B9059A6A-E483-11D7-894B-000A95891192@antlr.org>

Howdy folks,

Added a link to a tutorial I wrote for my CS652 class last Spring to 
the getting started page in the doc.  I have just updated this tutorial 
based upon the results of walking through it with students yesterday. ;)

It's on the getting started doc page or you can jump directly:

http://www.cs.usfca.edu/~parrt/course/652/lectures/antlr.html

Terence
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Jim.OConnor at microfocus.com  Thu Sep 11 13:50:07 2003
From: Jim.OConnor at microfocus.com (Jim O'Connor)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] Antlr meta grammar difficulty
Message-ID: <3AC103F1B7EEEC48A855ACB1D2819E9101FABA1D@rock-corpmail.microfocus.com>

Hi All,
  I'm having some problem with the ANTLR Meta Grammar in the file sharing
section of antlr.org.  
 
 I create an eclipse project or Tool and javac the *.g files manually.

  Everybody compiles and is happy except for ANTLRParser.java.  The Edge
class (can fix with sun.awt.geom.Edge?) and the GrammarAST class are not
found.

  I'm using antlr.jar 2.7.2

  Any clues?  Thanks


Jim

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ben at spectrum.uni-bielefeld.de  Fri Sep 12 03:47:41 2003
From: ben at spectrum.uni-bielefeld.de (Ben)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] manual AST creation
Message-ID: <bjs88d+eeil@eGroups.com>

Hi,

I am totaly new to ANTLR, so forgive me, if I ask something stupid
or obvious...

Here is a part of a very simple grammar I use for testing

start!: b:(B)* NEWLINE;
	{#start = #([B,"start"],b);};

I would like to construct a tree that looks like that
(start B B B B...). The action above does not work. I also
tried to substitute (B)* with another rule, but that does not
work, too. I believe that I am missing some basic understanding
here. Can someone enlightmen me??

Thank you very much,

Ben


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From edcjones at yahoo.com  Sat Sep 13 06:30:38 2003
From: edcjones at yahoo.com (edcjones)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] Antlr CLASSPATH in Gentoo Linux?
Message-ID: <bjv65u+8m7b@eGroups.com>

Does anyone use Antlr as installed in Gentoo Linux? Any useful pointers?

"antlr.jar" is in "/usr/share/antlr/lib" so I set the CLASSPATH as

CLASSPATH=/usr/share/antlr/lib
CLASSPATH=$CLASSPATH:/home/edcjones/cvlib/antlr/cgram/grammars
CLASSPATH=$CLASSPATH:.
export CLASSPATH

in my ".bash_profile". I get the well-known message
"NoClassDefFoundError: antlr/Tool". Any suggestions?



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jagad at enciety.com  Sat Sep 13 07:50:15 2003
From: jagad at enciety.com (jagad)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] [C++] API doc
Message-ID: <1063464615.13308.5.camel@training04>

Hi All,

Where I can find the ANTLR API doc for C++ ?

Best Regards

jagad


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From edcjones at yahoo.com  Sat Sep 13 13:21:29 2003
From: edcjones at yahoo.com (edcjones)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] Re: Antlr CLASSPATH in Gentoo Linux?
In-Reply-To: <bjv65u+8m7b@eGroups.com>
Message-ID: <bjvu89+c6c6@eGroups.com>

--- In antlr-interest@yahoogroups.com, "edcjones" <edcjones@y...> wrote:
> Does anyone use Antlr as installed in Gentoo Linux? Any useful pointers?
> 
> "antlr.jar" is in "/usr/share/antlr/lib" so I set the CLASSPATH as
> 
> CLASSPATH=/usr/share/antlr/lib
> CLASSPATH=$CLASSPATH:/home/edcjones/cvlib/antlr/cgram/grammars
> CLASSPATH=$CLASSPATH:.
> export CLASSPATH
> 
> in my ".bash_profile". I get the well-known message
> "NoClassDefFoundError: antlr/Tool". Any suggestions?

I set CLASSPATH in ".bashrc" (not ".bash_profile") as

CLASSPATH=.:/usr/share/antlr/lib/antlr.jar
CLASSPATH=$CLASSPATH:/home/edcjones/cvlib/antlr/cgram/grammars
export CLASSPATH

Does the following completely define the process of setting the
CLASSPATH?

     In your ".bashrc" file include the lines:

     CLASSPATH=.:/path-to-antlr.jar-file/antlr.jar
     export CLASSPATH

     Add to the CLASSPATH any directories containing java programs 
     that need to be visible.

     Logout and logon again.

I have noted two things about Gentoo's version of antlr. First, Gentoo
creates a directory /usr/share/antlr/lib containing the three files
     antlr.debug.jar  antlr.jar  antlrall.jar
Second, Gentoo includes a patch named :antlr-2.7.2-gcc3-gentoo.patch":

diff -ur antlr-2.7.2a2~/lib/cpp/antlr/CharScanner.hpp
antlr-2.7.2a2/lib/cpp/antlr/CharScanner.hpp
--- antlr-2.7.2a2~/lib/cpp/antlr/CharScanner.hpp        2002-01-03
20:03:43.000000000 -0600
+++ antlr-2.7.2a2/lib/cpp/antlr/CharScanner.hpp 2003-01-12
11:41:51.000000000 -0600
@@ -44,6 +44,8 @@
 #include <antlr/LexerSharedInputState.hpp>
 #include <map>

+#include <ctype.h>
+
 #ifdef ANTLR_CXX_SUPPORTS_NAMESPACE
 namespace antlr {
 #endif


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From paultaney at yahoo.com  Sat Sep 13 15:18:39 2003
From: paultaney at yahoo.com (paul taney)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] Re: Antlr CLASSPATH in Gentoo Linux?
In-Reply-To: <bjvu89+c6c6@eGroups.com>
Message-ID: <20030913221839.49295.qmail@web80605.mail.yahoo.com>


Ed,

> Does anyone use Antlr as installed in Gentoo
> Linux? Any useful pointers?

I don't know about Gentoo per se, but here's how the 
launcher hunts:

http://java.sun.com/j2se/1.4.2/docs/tooldocs/findingclasses.html

paul


__________________________________
Do you Yahoo!?
Yahoo! SiteBuilder - Free, easy-to-use web site design software
http://sitebuilder.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at antlr.org  Sat Sep 13 16:32:23 2003
From: parrt at antlr.org (Terence Parr)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] Got GCJ to compile antlr and java parser/tree parser :)
Message-ID: <86E6BA65-E642-11D7-894B-000A95891192@antlr.org>

Ok, it was a pain in the ass, but with the knowledge that Ric Klaren 
had gotten antlr to compile, I spent a few hours today trying things 
out myself.

First, get ANTLR to compile.  Got it to compile out of the box:

for each package dir in antlr:

$ gcj --CLASSPATH=/home/parrt/org.antlr -c -g -O *.java

then link:

gcj -o /usr/local/bin/antlr --main=antlr.Tool -g *.o */*.o */*/*.o

After running strip on executable, it's like 1.3M. :)  Nice.

Getting antlr to run over a .g file is now easy:

$ antlr file.g

Hooray!  Now, to compile the resulting parser took me a while to get 
working.

I tried to make a library and all that, but couldn't make it work so I 
resorted to telling it to compile antlr each time along with the parser 
from file.g.  No biggie.

GCJ does not have swing so I had to yank out anything related to that 
like debug/misc/ASTFrame.* etc...  Then I jar'd it up (put in 
/tmp/antlr.jar) and then did this:

$ antlr java.g
$ antlr java.tree.g
$ gcj -c -g -O --classpath=/tmp/antlr.jar:. *.java
$ gcj -o jparse --main=Main -g *.o /tmp/antlr.jar

Lots of things like this come out:

warning: exception handler inside code that is being protected

but I ignored it and gave it the old smoke test.

ENVIRONMENT

My test box is a dual 1Ghz linux 9.x (can't remember which) with 1G RAM.

$ cat /proc/version
Linux version 2.4.20-6smp (bhcompile@porky.devel.redhat.com) (gcc 
version 3.2.2 20030222 (Red Hat Linux 3.2.2-5)) #1 SMP Thu Feb 27 
09:59:40 EST 2003

$ gcj --version
gcj (GCC) 3.2.2 20030222 (Red Hat Linux 3.2.2-5)

TIMING

Java VM parsing jdk 1.4 source using time program:

$ java Main /usr/local/java/java
real    0m28.868s
user    0m24.990s
sys     0m0.420s

GCJ compiled parser doing same thing:

$ ./jparse /usr/local/java/java
real    0m40.004s
user    0m38.870s
sys     0m0.470s

[Note there are some problems parsing the source, but I haven't checked 
what the error in my grammar is]

Yes, the GCJ version is SLOWER!  Could this be the garbage collector or 
slow IO library or something?

Ok, let's try on something smaller.  How about the antlr source.

$ time java Main /home/parrt/org.antlr/antlr
real    0m7.226s
user    0m4.750s
sys     0m0.090s

$ time ./jparse /home/parrt/org.antlr/antlr
real    0m5.794s
user    0m5.700s
sys     0m0.080s

In this case, GCJ wins.

When parsing 1.4 source, GCJ version needs 10M resident and java VM 
version needs 25M.

Well, that's all I have to report at the moment.  Can anybody comment, 
speculate?

Terence
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Sun Sep 14 08:56:32 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] Re: Got GCJ to compile antlr and java parser/tree parser :)
In-Reply-To: <86E6BA65-E642-11D7-894B-000A95891192@antlr.org>
Message-ID: <bk233g+b3qf@eGroups.com>

Great! Congratulations!

I have heard JDK 1.4 still needs quite some time and resources for
startup (even though improved over 1.3). This may be the reason for
the small example to be faster with GCJ. I have also head, Sun will
further improve startup time in 1.5.

:)

Oliver

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@a...> wrote:
> Ok, it was a pain in the ass, but with the knowledge that Ric Klaren 
> had gotten antlr to compile, I spent a few hours today trying things 
> out myself.
> 
> First, get ANTLR to compile.  Got it to compile out of the box:
> 
> for each package dir in antlr:
> 
> $ gcj --CLASSPATH=/home/parrt/org.antlr -c -g -O *.java
> 
> then link:
> 
> gcj -o /usr/local/bin/antlr --main=antlr.Tool -g *.o */*.o */*/*.o
> 
> After running strip on executable, it's like 1.3M. :)  Nice.
> 
> Getting antlr to run over a .g file is now easy:
> 
> $ antlr file.g
> 
> Hooray!  Now, to compile the resulting parser took me a while to get 
> working.
> 
> I tried to make a library and all that, but couldn't make it work so I 
> resorted to telling it to compile antlr each time along with the parser 
> from file.g.  No biggie.
> 
> GCJ does not have swing so I had to yank out anything related to that 
> like debug/misc/ASTFrame.* etc...  Then I jar'd it up (put in 
> /tmp/antlr.jar) and then did this:
> 
> $ antlr java.g
> $ antlr java.tree.g
> $ gcj -c -g -O --classpath=/tmp/antlr.jar:. *.java
> $ gcj -o jparse --main=Main -g *.o /tmp/antlr.jar
> 
> Lots of things like this come out:
> 
> warning: exception handler inside code that is being protected
> 
> but I ignored it and gave it the old smoke test.
> 
> ENVIRONMENT
> 
> My test box is a dual 1Ghz linux 9.x (can't remember which) with 1G RAM.
> 
> $ cat /proc/version
> Linux version 2.4.20-6smp (bhcompile@p...) (gcc 
> version 3.2.2 20030222 (Red Hat Linux 3.2.2-5)) #1 SMP Thu Feb 27 
> 09:59:40 EST 2003
> 
> $ gcj --version
> gcj (GCC) 3.2.2 20030222 (Red Hat Linux 3.2.2-5)
> 
> TIMING
> 
> Java VM parsing jdk 1.4 source using time program:
> 
> $ java Main /usr/local/java/java
> real    0m28.868s
> user    0m24.990s
> sys     0m0.420s
> 
> GCJ compiled parser doing same thing:
> 
> $ ./jparse /usr/local/java/java
> real    0m40.004s
> user    0m38.870s
> sys     0m0.470s
> 
> [Note there are some problems parsing the source, but I haven't checked 
> what the error in my grammar is]
> 
> Yes, the GCJ version is SLOWER!  Could this be the garbage collector or 
> slow IO library or something?
> 
> Ok, let's try on something smaller.  How about the antlr source.
> 
> $ time java Main /home/parrt/org.antlr/antlr
> real    0m7.226s
> user    0m4.750s
> sys     0m0.090s
> 
> $ time ./jparse /home/parrt/org.antlr/antlr
> real    0m5.794s
> user    0m5.700s
> sys     0m0.080s
> 
> In this case, GCJ wins.
> 
> When parsing 1.4 source, GCJ version needs 10M resident and java VM 
> version needs 25M.
> 
> Well, that's all I have to report at the moment.  Can anybody comment, 
> speculate?
> 
> Terence
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Sun Sep 14 09:20:44 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] new XPA release
Message-ID: <bk24gs+ghj1@eGroups.com>

Hi all,

I hope this is no misuse of this group, but I'd like to announce a new
release of my XPA (Xml Processing for Antlr) tool:

http://www.zeigermann.de/xpa/index.html
http://www.zeigermann.de/xpa/download.html

After Terence Parr and Matt Benson embarrassingly revealed that XPA
can actually do without a patched version of ANTLR, this new version
now works with the clean, standard 2.7.2 release. 

XPA enables ANTLR to process XML in form of 
- token streams, and/or
- ASTs
generated from adapters provided by XPA.

This allows for transformations on ASTs representing XML and also
writing these special (but no normal AST) XMLASTs back to plain, flat
XML. You can also process XML token streams when you do not want to
build up ASTs.

So, give it a try :)

Oliver

P.S.: I plan to give XPA a new development platform (maybe
sourceforge?!). 

Is there anyone out there who would like to participate in the
development of XPA. I can gurantee it is fun! 

Terence, as XPA seems to be nearly mature now, would you like to
integrated XPA into the standard ANTLR release?! I am willing to
donate any rights I may have and might need to do so :)


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Mon Sep 15 02:06:54 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] Got GCJ to compile antlr and java parser/tree parser :)
In-Reply-To: <86E6BA65-E642-11D7-894B-000A95891192@antlr.org>; from parrt@antlr.org on Sat, Sep 13, 2003 at 04:32:23PM -0700
References: <86E6BA65-E642-11D7-894B-000A95891192@antlr.org>
Message-ID: <20030915110654.P27584@cs.utwente.nl>

Hey Terence,

On Sat, Sep 13, 2003 at 04:32:23PM -0700, Terence Parr wrote:
> Ok, it was a pain in the ass, but with the knowledge that Ric Klaren
> had gotten antlr to compile, I spent a few hours today trying things
> out myself.
>
> First, get ANTLR to compile.  Got it to compile out of the box:
>
> for each package dir in antlr:
>
> $ gcj --CLASSPATH=/home/parrt/org.antlr -c -g -O *.java
>
> then link:
>
> gcj -o /usr/local/bin/antlr --main=antlr.Tool -g *.o */*.o */*/*.o
>
> After running strip on executable, it's like 1.3M. :)  Nice.

Not to be annoying and stuff but why not ./configure --enable-gcj ; make
and move the binary from the basedir to where you want it ? ;)

> I tried to make a library and all that, but couldn't make it work so I
> resorted to telling it to compile antlr each time along with the parser
> from file.g.  No biggie.

I didn't try it yet on any java projects so did not encounter this. This is
probably due to the lack of a antlr-runtime.jar which probably should be
compiled in everytime. E.g. as we had it pre 2.7.2 with a antlrall.jar and
antlr.jar.

> Lots of things like this come out:
>
> warning: exception handler inside code that is being protected

Yup there's a lot of those no clue what it should mean, did not research
into it either.

What I did notice on redhat 9 was that the blackdown java did not work. The
Sun one was ok though.

> TIMING
>
> Java VM parsing jdk 1.4 source using time program:
>
> $ java Main /usr/local/java/java
> real    0m28.868s
> user    0m24.990s
> sys     0m0.420s
>
> GCJ compiled parser doing same thing:
>
> $ ./jparse /usr/local/java/java
> real    0m40.004s
> user    0m38.870s
> sys     0m0.470s
>
> [Note there are some problems parsing the source, but I haven't checked
> what the error in my grammar is]
>
> Yes, the GCJ version is SLOWER!  Could this be the garbage collector or
> slow IO library or something?

Very hard to say without profile.

Running antlr as a native binary is a bit faster than using the java
version btw (at least in my project).

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Xander: "Buffy, we need to do something *now*"
  Angel: "We need a distraction."
  Buffy: "Right."
  Angel: "What are you going to do?"
  Buffy: "I'm going to kill them all. That oughtta distract 'em..."


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Mon Sep 15 02:57:42 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] [C++] API doc
In-Reply-To: <1063464615.13308.5.camel@training04>; from jagad@enciety.com on Sat, Sep 13, 2003 at 09:50:15PM +0700
References: <1063464615.13308.5.camel@training04>
Message-ID: <20030915115742.Q27584@cs.utwente.nl>

Hi,

On Sat, Sep 13, 2003 at 09:50:15PM +0700, jagad wrote:
> Where I can find the ANTLR API doc for C++ ?

If you have doxygen installed on your system then you can easily regenerate
the docs by cd'ing to the lib/cpp subdir from the distribution and running
doxygen doxygen.cfg. (check out www.doxygen.org for binaries etc.)

I got some online at http://wwwhome.cs.utwente.nl/~klaren/antlr/ but these
can be out of sync with the current distribution.

Although there's more comments in the code than there used to be it is
still far from ideal.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Why don't we just invite them to dinner and massacre them all when they're
  drunk? You heard the man. There's seven hundred thousand of them. Ah? ..
           So it'd have to be something simple with pasta, then.
                 From: Interesting Times by Terry Pratchet

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Mon Sep 15 03:02:54 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] Antlr CLASSPATH in Gentoo Linux?
In-Reply-To: <bjv65u+8m7b@eGroups.com>; from edcjones@yahoo.com on Sat, Sep 13, 2003 at 01:30:38PM -0000
References: <bjv65u+8m7b@eGroups.com> <bjvu89+c6c6@eGroups.com> <bjv65u+8m7b@eGroups.com>
Message-ID: <20030915120254.R27584@cs.utwente.nl>

Hi,

On Sat, Sep 13, 2003 at 08:21:29PM -0000, edcjones wrote:
> I set CLASSPATH in ".bashrc" (not ".bash_profile") as

The rc is a good point to put these things.

> CLASSPATH=.:/usr/share/antlr/lib/antlr.jar
> CLASSPATH=$CLASSPATH:/home/edcjones/cvlib/antlr/cgram/grammars
> export CLASSPATH
> 
> Does the following completely define the process of setting the
> CLASSPATH?
> 
>      In your ".bashrc" file include the lines:
> 
>      CLASSPATH=.:/path-to-antlr.jar-file/antlr.jar
>      export CLASSPATH
...snip....
> I have noted two things about Gentoo's version of antlr. First, Gentoo
> creates a directory /usr/share/antlr/lib containing the three files
>      antlr.debug.jar  antlr.jar  antlrall.jar

Hmmm strange for running the antlr tool you should probably put
antlrall.jar in your classpath. Looks like an early 2.7.2 prerelease.
antlr.jar is usually only the runtime parts (needed to run antlr generated
code) (unless that already changed in that prerelease)

> Second, Gentoo includes a patch named :antlr-2.7.2-gcc3-gentoo.patch":

This is already included in our repository (in a slightly different form)

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Human beings, who are almost unique in having the ability to learn
   from the experience of others, are also remarkable for their apparent
         disinclination to do so. --- Douglas Adams, Last Chance to See


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Mon Sep 15 09:56:35 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] Re: new XPA release
In-Reply-To: <bk24gs+ghj1@eGroups.com>
Message-ID: <bk4r03+go56@eGroups.com>

XPA has been moved (CVS import still needs to be done) to sourceforge

http://xpa.sourceforge.net/

If there is anyone who would like to participate, just tell me :)

Oliver

--- In antlr-interest@yahoogroups.com, "Oliver Zeigermann"
<oliver@z...> wrote:
> Hi all,
> 
> I hope this is no misuse of this group, but I'd like to announce a
new
> release of my XPA (Xml Processing for Antlr) tool:
> 
> http://www.zeigermann.de/xpa/index.html
> http://www.zeigermann.de/xpa/download.html
> 
> After Terence Parr and Matt Benson embarrassingly revealed that XPA
> can actually do without a patched version of ANTLR, this new version
> now works with the clean, standard 2.7.2 release. 
> 
> XPA enables ANTLR to process XML in form of 
> - token streams, and/or
> - ASTs
> generated from adapters provided by XPA.
> 
> This allows for transformations on ASTs representing XML and also
> writing these special (but no normal AST) XMLASTs back to plain,
flat
> XML. You can also process XML token streams when you do not want to
> build up ASTs.
> 
> So, give it a try :)
> 
> Oliver
> 
> P.S.: I plan to give XPA a new development platform (maybe
> sourceforge?!). 
> 
> Is there anyone out there who would like to participate in the
> development of XPA. I can gurantee it is fun! 
> 
> Terence, as XPA seems to be nearly mature now, would you like to
> integrated XPA into the standard ANTLR release?! I am willing to
> donate any rights I may have and might need to do so :)


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jagad at enciety.com  Mon Sep 15 18:20:33 2003
From: jagad at enciety.com (jagad)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] [C++] API doc
In-Reply-To: <20030915115742.Q27584@cs.utwente.nl>
References: <1063464615.13308.5.camel@training04>
	 <20030915115742.Q27584@cs.utwente.nl>
Message-ID: <1063675233.2493.13.camel@training04>

Hi,

On Mon, 2003-09-15 at 16:57, Ric Klaren wrote:

> On Sat, Sep 13, 2003 at 09:50:15PM +0700, jagad wrote:
> > Where I can find the ANTLR API doc for C++ ?
> 
> If you have doxygen installed on your system then you can easily regenerate
> the docs by cd'ing to the lib/cpp subdir from the distribution and running
> doxygen doxygen.cfg. (check out www.doxygen.org for binaries etc.)
> 

I'm trying to use this tools :) I'll put the result on my server when
it's done.

> I got some online at http://wwwhome.cs.utwente.nl/~klaren/antlr/ but these
> can be out of sync with the current distribution.
> 
> Although there's more comments in the code than there used to be it is
> still far from ideal.
> 

Nice Page :) and Great Thanks, it's really help me.

Kindest Regards

jagad


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Tue Sep 16 02:36:27 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] manual AST creation
In-Reply-To: <bjs88d+eeil@eGroups.com>; from ben@spectrum.uni-bielefeld.de on Fri, Sep 12, 2003 at 10:47:41AM -0000
References: <bjs88d+eeil@eGroups.com>
Message-ID: <20030916113627.V27584@cs.utwente.nl>

Hi,

On Fri, Sep 12, 2003 at 10:47:41AM -0000, Ben wrote:
> I am totaly new to ANTLR, so forgive me, if I ask something stupid
> or obvious...
> 
> Here is a part of a very simple grammar I use for testing
> 
> start!: b:(B)* NEWLINE;
> 	{#start = #([B,"start"],b);};
> 
> I would like to construct a tree that looks like that
> (start B B B B...). The action above does not work. I also
> tried to substitute (B)* with another rule, but that does not
> work, too. I believe that I am missing some basic understanding
> here. Can someone enlightmen me??

You probably want something like:

{ ## = #([B,"start"],##); }

This adds a topnode of 'type' B with text "start" hooked to it. The b:(B)*
notation would be a labeled subrule which is not implemented at the moment
(newer versions of antlr give a warning of it)

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Xander: "Buffy, we need to do something *now*"
  Angel: "We need a distraction."
  Buffy: "Right."
  Angel: "What are you going to do?"
  Buffy: "I'm going to kill them all. That oughtta distract 'em..."


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue Sep 16 08:36:34 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] Antlr meta grammar difficulty
Message-ID: <72C9789739C4214096AE945753B11EA36B1E5D@mypxmail04.bco-home.com>

Were you able to figure this out?  It sounds like maybe Ter forgot to
include some classes.

Monty

-----Original Message-----
From: Jim O'Connor [mailto:Jim.OConnor@microfocus.com] 
Sent: Thursday, September 11, 2003 1:50 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Antlr meta grammar difficulty


Hi All,
  I'm having some problem with the ANTLR Meta Grammar in the file sharing
section of antlr.org.  
 
 I create an eclipse project or Tool and javac the *.g files manually.

  Everybody compiles and is happy except for ANTLRParser.java.  The Edge
class (can fix with sun.awt.geom.Edge?) and the GrammarAST class are not
found.

  I'm using antlr.jar 2.7.2

  Any clues?  Thanks


Jim

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Jim.OConnor at microfocus.com  Tue Sep 16 08:45:31 2003
From: Jim.OConnor at microfocus.com (Jim O'Connor)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] Antlr meta grammar difficulty
Message-ID: <3AC103F1B7EEEC48A855ACB1D2819E9101FFC884@rock-corpmail.microfocus.com>

The Meta Grammar would have been helpful to "see" the
java.g grammar and java.tree.g grammar more clearly.  
I've been over each of them many, many times since then.
I "see" them in my sleep.

I haven't gotten back to analyzing the missing pieces
of the Meta Grammar.  It would be useful to have them,
if available.

Jim

-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com]
Sent: Tuesday, September 16, 2003 11:37 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Antlr meta grammar difficulty


Were you able to figure this out?  It sounds like maybe Ter forgot to
include some classes.

Monty

-----Original Message-----
From: Jim O'Connor [mailto:Jim.OConnor@microfocus.com] 
Sent: Thursday, September 11, 2003 1:50 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Antlr meta grammar difficulty


Hi All,
  I'm having some problem with the ANTLR Meta Grammar in the file sharing
section of antlr.org.  
 
 I create an eclipse project or Tool and javac the *.g files manually.

  Everybody compiles and is happy except for ANTLRParser.java.  The Edge
class (can fix with sun.awt.geom.Edge?) and the GrammarAST class are not
found.

  I'm using antlr.jar 2.7.2

  Any clues?  Thanks


Jim

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 



________________________________________________________________________
This e-mail has been scanned for viruses by MCI's Internet Managed Scanning
Services - powered by MessageLabs. For further information visit
http://www.mci.com
________________________________________________________________________

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue Sep 16 08:55:44 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] manual AST creation
Message-ID: <72C9789739C4214096AE945753B11EA36B1E5F@mypxmail04.bco-home.com>

Actually, don't turn off tree construction for the whole rule and you will
get what you want.  Just turn off tree constrcution for NEWLINE which I
assume you don't want.

start: b:(B)* NEWLINE!;
	{#start = #([B,"start"],b);};

Monty

-----Original Message-----
From: Ben [mailto:ben@spectrum.uni-bielefeld.de] 
Sent: Friday, September 12, 2003 3:48 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] manual AST creation


Hi,

I am totaly new to ANTLR, so forgive me, if I ask something stupid or
obvious...

Here is a part of a very simple grammar I use for testing

start!: b:(B)* NEWLINE;
	{#start = #([B,"start"],b);};

I would like to construct a tree that looks like that
(start B B B B...). The action above does not work. I also tried to
substitute (B)* with another rule, but that does not work, too. I believe
that I am missing some basic understanding here. Can someone enlightmen me??

Thank you very much,

Ben


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at antlr.org  Tue Sep 16 13:47:27 2003
From: parrt at antlr.org (Terence Parr)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] fixed antlr metagrammar
Message-ID: <FB924B93-E886-11D7-894B-000A95891192@antlr.org>

Folks,

I have made a slight tweak to the meta grammar (removed the EOB 
end-of-block node) and made  a new tar with the .class files and the 
missing Edge and GrammarAST classes. :)

Terence
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at antlr.org  Tue Sep 16 13:54:09 2003
From: parrt at antlr.org (Terence Parr)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] added XPA XML processing to download page
Message-ID: <EB384460-E887-11D7-894B-000A95891192@antlr.org>

Howdy folks,

Added the XPA as an "extra" to the downloads page under "Useful or 
common extras":

http://www.antlr.org/download.html

What else belongs there?

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mattias.rundgren at combitechsystems.com  Wed Sep 17 06:55:00 2003
From: mattias.rundgren at combitechsystems.com (mprundgren)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] Missing files in the Pascal grammar?
Message-ID: <bk9p3k+9sgh@eGroups.com>

Hi!
First, I'd like to inform you that I'm new to antlr.

I have tried out the Pascal grammar and wanted to add some new 
features to the language. When I did this I noticed I had to 
regenerate the file SymtabPhase.java.

The problem is that it is generated from the file expandedsymtab.g 
which I can not find in the "distribution". Does anyone know anything 
about this file?

Are there any other files that the "distribution" lacks?

Looking forward for answers.
/Mattias Rundgren
 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Wed Sep 17 08:15:49 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] Missing files in the Pascal grammar?
Message-ID: <72C9789739C4214096AE945753B11EA36B1E6E@mypxmail04.bco-home.com>

expandedsymtab.g will be generated when you run antlr.Tool on your .g files.
Is there no readme or install instructions?

Monty

-----Original Message-----
From: mprundgren [mailto:mattias.rundgren@combitechsystems.com] 
Sent: Wednesday, September 17, 2003 6:55 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Missing files in the Pascal grammar?


Hi!
First, I'd like to inform you that I'm new to antlr.

I have tried out the Pascal grammar and wanted to add some new 
features to the language. When I did this I noticed I had to 
regenerate the file SymtabPhase.java.

The problem is that it is generated from the file expandedsymtab.g 
which I can not find in the "distribution". Does anyone know anything 
about this file?

Are there any other files that the "distribution" lacks?

Looking forward for answers.
/Mattias Rundgren
 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at antlr.org  Wed Sep 17 11:42:52 2003
From: parrt at antlr.org (Terence Parr)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] added antlr binary for linux x86
Message-ID: <BE87F09D-E93E-11D7-894B-000A95891192@antlr.org>

Howdy,

Let's start adding stand-alone binaries for ANTLR.  I have added a 
linux one:

http://www.antlr.org/download.html

"The binary files are native executables for the ANTLR tool itself (not 
  the run-time support etc...). You do not have to have Java on your 
system now to use ANTLR for C++ or C# output.  Even for Java users, it 
is still more convenient to run this binary as it loads faster and you 
don't have CLASSPATH issues."

Please send me binaries you get working on your system. :)  OS X would 
be appreciated ;) and of course on the PC.

Terence
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at antlr.org  Wed Sep 17 11:52:38 2003
From: parrt at antlr.org (Terence Parr)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] python generator for ANTLR progressing again
Message-ID: <1BABC25E-E940-11D7-894B-000A95891192@antlr.org>

Howdy,

Amol Dharmadhikari, a superhuman student at USF, has been working on a 
Python generator for ANTLR, but has gotten stuck working at his job and 
cannot finish it.  He says, "The current version is just the jython 
code generator i.e. to access it you will need some java classes and so 
you need jython.  I also have also attached the jar of the entire 
project imported into eclipse that has the python code generator files."

I'm posting this stuff in the file sharing section of antlr.org.

Hans Vangheluwe has interest in moving this project forward so if you 
want to work on this also, please coordinate with Hans.

I'm pretty sure Amol got a jython version working.  Can anybody confirm?

Terence
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From john-yahoo at pybus.org  Wed Sep 17 12:08:15 2003
From: john-yahoo at pybus.org (John P N Pybus)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] python generator for ANTLR progressing again
In-Reply-To: <1BABC25E-E940-11D7-894B-000A95891192@antlr.org>
References: <1BABC25E-E940-11D7-894B-000A95891192@antlr.org>
Message-ID: <3F68B11F.2080403@zoo.ox.ac.uk>

Terence Parr wrote:
> Howdy,
> 
> Amol Dharmadhikari, a superhuman student at USF, has been working on a 
> Python generator for ANTLR, but has gotten stuck working at his job and 
> cannot finish it.  He says, "The current version is just the jython 
> code generator i.e. to access it you will need some java classes and so 
> you need jython.  I also have also attached the jar of the entire 
> project imported into eclipse that has the python code generator files."
> 
> I'm posting this stuff in the file sharing section of antlr.org.

How's that!

I was only wishing to myself for a python back-end last night.  Looks 
like the Gods are smiling.

> Hans Vangheluwe has interest in moving this project forward so if you 
> want to work on this also, please coordinate with Hans.

I have too many other projects on at the moment to put time into this 
myself, but if anyone gets anywhere with this: do let me know. ;-)

John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From skintali at sarvega.com  Wed Sep 17 12:12:26 2003
From: skintali at sarvega.com (Kintali Shiva Prasad)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] added antlr binary for linux x86
In-Reply-To: <BE87F09D-E93E-11D7-894B-000A95891192@antlr.org>
References: <BE87F09D-E93E-11D7-894B-000A95891192@antlr.org>
Message-ID: <3F68B21A.3000702@sarvega.com>

Hi Terence,

Thanks a lot for this.
Couple of days back, I was struggling to build antlr-2.7.2.
(CLASSPATH and javax swing class issues)
Also, antlrall.jar was missing in the bundle.

Regards,
-Shiva

Terence Parr wrote:

>Howdy,
>
>Let's start adding stand-alone binaries for ANTLR.  I have added a 
>linux one:
>
>http://www.antlr.org/download.html
>
>"The binary files are native executables for the ANTLR tool itself (not 
>  the run-time support etc...). You do not have to have Java on your 
>system now to use ANTLR for C++ or C# output.  Even for Java users, it 
>is still more convenient to run this binary as it loads faster and you 
>don't have CLASSPATH issues."
>
>Please send me binaries you get working on your system. :)  OS X would 
>be appreciated ;) and of course on the PC.
>
>Terence
>--
>Professor Comp. Sci., University of San Francisco
>Creator, ANTLR Parser Generator, http://www.antlr.org
>Co-founder, http://www.jguru.com
>Co-founder, http://www.knowspam.net enjoy email again!
>Co-founder, http://www.peerscope.com pure link sharing
>
>
>
>
> 
>
>Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
>
>
>
>  
>



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at antlr.org  Wed Sep 17 12:21:42 2003
From: parrt at antlr.org (Terence Parr)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] added antlr binary for linux x86
In-Reply-To: <3F68B21A.3000702@sarvega.com>
Message-ID: <2B3B1863-E944-11D7-894B-000A95891192@antlr.org>


On Wednesday, September 17, 2003, at 12:12 PM, Kintali Shiva Prasad 
wrote:

> Hi Terence,
>
> Thanks a lot for this.

You're welcome. :)

> Couple of days back, I was struggling to build antlr-2.7.2.
> (CLASSPATH and javax swing class issues)
> Also, antlrall.jar was missing in the bundle.

Yeah, I had to remove the ASTFrame stuff and so on to make it compile.  
Note that (in my hurry) I actually built a slightly "fixed" version of 
2.7.2 rather than stock 2.7.2.   Oh well.  The version comes up when 
you run it.

Best regards,
Terence

>
> Regards,
> -Shiva
>
> Terence Parr wrote:
>
>> Howdy,
>>
>> Let's start adding stand-alone binaries for ANTLR.  I have added a
>> linux one:
>>
>> http://www.antlr.org/download.html
>>
>> "The binary files are native executables for the ANTLR tool itself 
>> (not
>>  the run-time support etc...). You do not have to have Java on your
>> system now to use ANTLR for C++ or C# output.  Even for Java users, it
>> is still more convenient to run this binary as it loads faster and you
>> don't have CLASSPATH issues."
>>
>> Please send me binaries you get working on your system. :)  OS X would
>> be appreciated ;) and of course on the PC.
>>
>> Terence
>> --
>> Professor Comp. Sci., University of San Francisco
>> Creator, ANTLR Parser Generator, http://www.antlr.org
>> Co-founder, http://www.jguru.com
>> Co-founder, http://www.knowspam.net enjoy email again!
>> Co-founder, http://www.peerscope.com pure link sharing
>>
>>
>>
>>
>>
>>
>> Your use of Yahoo! Groups is subject to 
>> http://docs.yahoo.com/info/terms/
>>
>>
>>
>>
>>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From vijay at mindspring.com  Wed Sep 17 22:51:27 2003
From: vijay at mindspring.com (dharbari2)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] Unexpected token; parsing java files
Message-ID: <bkbh4v+3lqr@eGroups.com>


This question might be elementary but... I'm trying to use antlr to 
check the syntax correctness of Java files.
I have the following code:

try {       
    FileReader rdr = new FileReader(myFile);
    JavaLexer lexer = new JavaLexer(rdr);
    JavaRecognizer parser = new JavaRecognizer(lexer);
    parser.compilationUnit();
}
catch(Exception e) {
    e.printStackTrace();
}

Works fine except when there are syntax errors like - "Unexpected 
token" or "expecting RCURLY, found '/'" in which cases no exception 
is thrown. How do I catch these? I'm looking for a very simple 
solution. I just need to know if the file has syntax errors or not. I 
don't care what the error is.
Thanks

Vijay


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Thu Sep 18 02:32:29 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] added antlr binary for linux x86
In-Reply-To: <BE87F09D-E93E-11D7-894B-000A95891192@antlr.org>; from parrt@antlr.org on Wed, Sep 17, 2003 at 11:42:52AM -0700
References: <BE87F09D-E93E-11D7-894B-000A95891192@antlr.org>
Message-ID: <20030918113229.A25590@cs.utwente.nl>

On Wed, Sep 17, 2003 at 11:42:52AM -0700, Terence Parr wrote:
> Let's start adding stand-alone binaries for ANTLR.  I have added a 
> linux one:
> 
> http://www.antlr.org/download.html

There's also a redhat 9.0 RPM with the binary version available at (this of
the development snapshots):

http://wwwhome.cs.utwente.nl/~klaren/antlr/

> "The binary files are native executables for the ANTLR tool itself (not
>   the run-time support etc...). You do not have to have Java on your 
> system now to use ANTLR for C++ or C# output.  Even for Java users, it 
> is still more convenient to run this binary as it loads faster and you 
> don't have CLASSPATH issues."

Sounds like we can port it over to C or C++ then <takes cover> ;) ;)

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     "Evil will always triumph, because Good is dumb." ---  Spaceballs


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mattias.rundgren at combitechsystems.com  Thu Sep 18 03:18:54 2003
From: mattias.rundgren at combitechsystems.com (mprundgren)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] Re: Missing files in the Pascal grammar?
In-Reply-To: <72C9789739C4214096AE945753B11EA36B1E6E@mypxmail04.bco-home.com>
Message-ID: <bkc0qe+8o7c@eGroups.com>

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> expandedsymtab.g will be generated when you run antlr.Tool on 
your .g files.
> Is there no readme or install instructions?
> 
> Monty
> 

No there is no README or install instruction. 
A Makefile would have been nice too, so that the dependencies could 
be more easily detected.

My first "mission" is to replace or expand the grammar so that a 
pascal-file do not need to start with PROGRAM or UNIT and end with a 
DOT. The reason is that I work with a Pascal dialect that looks 
something like this:
MODULE ID
block of modules/procedures/function etc.
ENDMODULE
 
I hope this would be an easy enough excersice to get a feeling on how 
it is to work with a parser generator like antlr.

Tanks for your answer.
/Mattias


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sasecp at wnt.sas.com  Thu Sep 18 07:16:19 2003
From: sasecp at wnt.sas.com (Ernest Pasour)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] grammar for jdk1.5 parameterized types
Message-ID: <8D966D6B75EB7F47AA300241BF2E1D0C08CCDE@merc17.na.sas.com>

I'm trying to expand an existing java grammar to handle the parameterized types supported in jdk1.5.  The problem is that a parameterized type like the following:
	"class Seq<Pair<String>>"
introduces an ambiguity in the grammar.  The natural way to write the parser uses ">" to match the closing angle brackets.  However, in this case, SR (">>") is matched by the lexer instead of two GT (">").  What I would like to be able to do is to detect *from the parser* that I need to change to a special parameter lexer when I see the first '<' (LT) symbol.  The examples I've found all seem to switch lexers in the lexer, based on lexer information.  If I use the parser, then I have to push lookahead tokens back onto the token stream so that the parameter lexer can process them (I assume).

	Is token stream multiplexing an appropriate solution to my problem?  There appears to be a way I can rewrite the grammar to avoid this issue, but it's pretty disgusting.

Thanks for any suggestions,
Ernest

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Sep 18 07:59:12 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] Unexpected token; parsing java files
Message-ID: <72C9789739C4214096AE945753B11EA36B1E7C@mypxmail04.bco-home.com>

You just have to set the option defaultErrorHandler=false in java.g and the
exceptions will be thrown all the way up to you.

Monty6

-----Original Message-----
From: dharbari2 [mailto:vijay@mindspring.com] 
Sent: Wednesday, September 17, 2003 10:51 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Unexpected token; parsing java files



This question might be elementary but... I'm trying to use antlr to 
check the syntax correctness of Java files.
I have the following code:

try {       
    FileReader rdr = new FileReader(myFile);
    JavaLexer lexer = new JavaLexer(rdr);
    JavaRecognizer parser = new JavaRecognizer(lexer);
    parser.compilationUnit();
}
catch(Exception e) {
    e.printStackTrace();
}

Works fine except when there are syntax errors like - "Unexpected 
token" or "expecting RCURLY, found '/'" in which cases no exception 
is thrown. How do I catch these? I'm looking for a very simple 
solution. I just need to know if the file has syntax errors or not. I 
don't care what the error is.
Thanks

Vijay


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Sep 18 11:22:15 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] grammar for jdk1.5 parameterized types
Message-ID: <72C9789739C4214096AE945753B11EA36B1E81@mypxmail04.bco-home.com>

You can't switch your lexer from the parser safely.  ANTLR doesn't work that
way (infinite lookahead and all that).  I suggest getting rid of ">>" as a
token and making the parser look for '>' '>' as GT.

Monty

-----Original Message-----
From: Ernest Pasour [mailto:sasecp@wnt.sas.com] 
Sent: Thursday, September 18, 2003 7:16 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] grammar for jdk1.5 parameterized types


I'm trying to expand an existing java grammar to handle the parameterized
types supported in jdk1.5.  The problem is that a parameterized type like
the following:
	"class Seq<Pair<String>>"
introduces an ambiguity in the grammar.  The natural way to write the parser
uses ">" to match the closing angle brackets.  However, in this case, SR
(">>") is matched by the lexer instead of two GT (">").  What I would like
to be able to do is to detect *from the parser* that I need to change to a
special parameter lexer when I see the first '<' (LT) symbol.  The examples
I've found all seem to switch lexers in the lexer, based on lexer
information.  If I use the parser, then I have to push lookahead tokens back
onto the token stream so that the parameter lexer can process them (I
assume).

	Is token stream multiplexing an appropriate solution to my problem?
There appears to be a way I can rewrite the grammar to avoid this issue, but
it's pretty disgusting.

Thanks for any suggestions,
Ernest

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Sep 18 11:30:43 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] grammar for jdk1.5 parameterized types
Message-ID: <72C9789739C4214096AE945753B11EA36B1E82@mypxmail04.bco-home.com>

> If I use the parser, then I have to push lookahead tokens back onto the
token stream so that the parameter lexer can process them (I assume).

You would also have to unwind the stack so you could re-execute all the
lookahead decisions that led you to that alternative, because those
decisions were based on token types which you may be changing.

Monty

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Sep 18 11:35:11 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] grammar for jdk1.5 parameterized types
Message-ID: <72C9789739C4214096AE945753B11EA36B1E83@mypxmail04.bco-home.com>

You could use a token stream with a grammar processor on it to recognize the
"class" ID LT as the start of a parameterized type and then change the shift
back into two GTs, etc.  See http://www.codetransform.com/filterexample.html
for an in depth explanation.

Let us know how you solve this, I'm sure we'll need it sooner than later.

Monty

-----Original Message-----
From: Ernest Pasour [mailto:sasecp@wnt.sas.com] 
Sent: Thursday, September 18, 2003 7:16 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] grammar for jdk1.5 parameterized types


I'm trying to expand an existing java grammar to handle the parameterized
types supported in jdk1.5.  The problem is that a parameterized type like
the following:
	"class Seq<Pair<String>>"
introduces an ambiguity in the grammar.  The natural way to write the parser
uses ">" to match the closing angle brackets.  However, in this case, SR
(">>") is matched by the lexer instead of two GT (">").  What I would like
to be able to do is to detect *from the parser* that I need to change to a
special parameter lexer when I see the first '<' (LT) symbol.  The examples
I've found all seem to switch lexers in the lexer, based on lexer
information.  If I use the parser, then I have to push lookahead tokens back
onto the token stream so that the parameter lexer can process them (I
assume).

	Is token stream multiplexing an appropriate solution to my problem?
There appears to be a way I can rewrite the grammar to avoid this issue, but
it's pretty disgusting.

Thanks for any suggestions,
Ernest

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From john-yahoo at pybus.org  Thu Sep 18 11:55:35 2003
From: john-yahoo at pybus.org (John P N Pybus)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] grammar for jdk1.5 parameterized types
In-Reply-To: <72C9789739C4214096AE945753B11EA36B1E81@mypxmail04.bco-home.com>
References: <72C9789739C4214096AE945753B11EA36B1E81@mypxmail04.bco-home.com>
Message-ID: <3F69FFA7.3050801@zoo.ox.ac.uk>

mzukowski@yci.com wrote:
> You can't switch your lexer from the parser safely.  ANTLR doesn't work that
> way (infinite lookahead and all that).  I suggest getting rid of ">>" as a
> token and making the parser look for '>' '>' as GT.
> 
> Monty

Hmm, with the lexer ignoring Whitespace wouldn't the parser then allow 
"n > > 3" as well as "n >> 3"?

I'd suggest using lookahead in the lexer to define 3 tokens GT_GT, 
GT_EQ, and GT corresponding to a '>' directly followed by another '>'; 
'>' followed by '=' and all other '>' chars, respectively.

You can use ( GT | GT_GT ) in your parser rules for generics, and can 
define the various shift operators as GT_GT GT; GT_GT GT_EQ EQ etc...

I haven't done this with the antlr java grammar myself, but I believe 
I've seen this approach used in other java1.5 recognisers (sorry no 
reference handy).

Hope this makes some sense.

Yours,

John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Sep 18 11:57:13 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] grammar for jdk1.5 parameterized types
Message-ID: <72C9789739C4214096AE945753B11EA36B1E84@mypxmail04.bco-home.com>

Yep, you're right!

Monty

-----Original Message-----
From: John P N Pybus [mailto:john-yahoo@pybus.org] 
Sent: Thursday, September 18, 2003 11:56 AM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] grammar for jdk1.5 parameterized types


mzukowski@yci.com wrote:
> You can't switch your lexer from the parser safely.  ANTLR doesn't 
> work that way (infinite lookahead and all that).  I suggest getting 
> rid of ">>" as a token and making the parser look for '>' '>' as GT.
> 
> Monty

Hmm, with the lexer ignoring Whitespace wouldn't the parser then allow 
"n > > 3" as well as "n >> 3"?

I'd suggest using lookahead in the lexer to define 3 tokens GT_GT, 
GT_EQ, and GT corresponding to a '>' directly followed by another '>'; 
'>' followed by '=' and all other '>' chars, respectively.

You can use ( GT | GT_GT ) in your parser rules for generics, and can 
define the various shift operators as GT_GT GT; GT_GT GT_EQ EQ etc...

I haven't done this with the antlr java grammar myself, but I believe 
I've seen this approach used in other java1.5 recognisers (sorry no 
reference handy).

Hope this makes some sense.

Yours,

John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at antlr.org  Thu Sep 18 12:01:44 2003
From: parrt at antlr.org (Terence Parr)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] grammar for jdk1.5 parameterized types
In-Reply-To: <3F69FFA7.3050801@zoo.ox.ac.uk>
Message-ID: <8BDF4A0A-EA0A-11D7-894B-000A95891192@antlr.org>

For some reason my last post didn't appear.

See the C++ templates added to Java solution by Jamie Herre on the 
antlr site.  Not sure what he did any more.  However, it's a simple 
matter in the lexer to track a tiny bit of context I think (i.e., did I 
see "class" or a class name)?  It means the lexer needs access to the 
symbol table.  I think Jamie did something clever, but can't remember.  
Perhaps my audio lectures have the answer ;)

Ter

On Thursday, September 18, 2003, at 11:55 AM, John P N Pybus wrote:

> mzukowski@yci.com wrote:
>> You can't switch your lexer from the parser safely.  ANTLR doesn't 
>> work that
>> way (infinite lookahead and all that).  I suggest getting rid of ">>" 
>> as a
>> token and making the parser look for '>' '>' as GT.
>>
>> Monty
>
> Hmm, with the lexer ignoring Whitespace wouldn't the parser then allow
> "n > > 3" as well as "n >> 3"?
>
> I'd suggest using lookahead in the lexer to define 3 tokens GT_GT,
> GT_EQ, and GT corresponding to a '>' directly followed by another '>';
> '>' followed by '=' and all other '>' chars, respectively.
>
> You can use ( GT | GT_GT ) in your parser rules for generics, and can
> define the various shift operators as GT_GT GT; GT_GT GT_EQ EQ etc...
>
> I haven't done this with the antlr java grammar myself, but I believe
> I've seen this approach used in other java1.5 recognisers (sorry no
> reference handy).
>
> Hope this makes some sense.
>
> Yours,
>
> John
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Matthew.Ford at forward.com.au  Thu Sep 18 12:04:00 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:56 2004
Subject: Parser for Re: [antlr-interest] grammar for jdk1.5 parameterized types
References: <72C9789739C4214096AE945753B11EA36B1E81@mypxmail04.bco-home.com>
 <3F69FFA7.3050801@zoo.ox.ac.uk>
Message-ID: <002c01c37e17$a1addee0$0400a8c0@NOTEBOOK>

http://www.thecortex.net/clover/generics.html

Advertises An ANTLR Java grammar supporting Generics

matthew

----- Original Message ----- 
From: "John P N Pybus" <john-yahoo@pybus.org>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, September 19, 2003 4:55 AM
Subject: Re: [antlr-interest] grammar for jdk1.5 parameterized types


> mzukowski@yci.com wrote:
> > You can't switch your lexer from the parser safely.  ANTLR doesn't work
that
> > way (infinite lookahead and all that).  I suggest getting rid of ">>" as
a
> > token and making the parser look for '>' '>' as GT.
> >
> > Monty
>
> Hmm, with the lexer ignoring Whitespace wouldn't the parser then allow
> "n > > 3" as well as "n >> 3"?
>
> I'd suggest using lookahead in the lexer to define 3 tokens GT_GT,
> GT_EQ, and GT corresponding to a '>' directly followed by another '>';
> '>' followed by '=' and all other '>' chars, respectively.
>
> You can use ( GT | GT_GT ) in your parser rules for generics, and can
> define the various shift operators as GT_GT GT; GT_GT GT_EQ EQ etc...
>
> I haven't done this with the antlr java grammar myself, but I believe
> I've seen this approach used in other java1.5 recognisers (sorry no
> reference handy).
>
> Hope this makes some sense.
>
> Yours,
>
> John
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Matthew.Ford at forward.com.au  Thu Sep 18 12:05:18 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] grammar for jdk1.5 parameterized types
References: <72C9789739C4214096AE945753B11EA36B1E81@mypxmail04.bco-home.com>
 <3F69FFA7.3050801@zoo.ox.ac.uk>
Message-ID: <003101c37e17$cd0cedb0$0400a8c0@NOTEBOOK>

http://www.thecortex.net/clover/generics.html#grammar
An ANTLR Java grammar supporting Generics
The Clover team uses the ANTLR tool in order to parse your Java code. ANTLR
comes with an example grammar for parsing Java code, and we have spent some
time updating it so that it can parse JSR14 code.

This grammar is a work-in-progress, but you can download our most recent
efforts here: javaG.g.

If you are interested, Matt has written a blog entry that further explains
these changes.

matthew

----- Original Message ----- 
From: "John P N Pybus" <john-yahoo@pybus.org>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, September 19, 2003 4:55 AM
Subject: Re: [antlr-interest] grammar for jdk1.5 parameterized types


> mzukowski@yci.com wrote:
> > You can't switch your lexer from the parser safely.  ANTLR doesn't work
that
> > way (infinite lookahead and all that).  I suggest getting rid of ">>" as
a
> > token and making the parser look for '>' '>' as GT.
> >
> > Monty
>
> Hmm, with the lexer ignoring Whitespace wouldn't the parser then allow
> "n > > 3" as well as "n >> 3"?
>
> I'd suggest using lookahead in the lexer to define 3 tokens GT_GT,
> GT_EQ, and GT corresponding to a '>' directly followed by another '>';
> '>' followed by '=' and all other '>' chars, respectively.
>
> You can use ( GT | GT_GT ) in your parser rules for generics, and can
> define the various shift operators as GT_GT GT; GT_GT GT_EQ EQ etc...
>
> I haven't done this with the antlr java grammar myself, but I believe
> I've seen this approach used in other java1.5 recognisers (sorry no
> reference handy).
>
> Hope this makes some sense.
>
> Yours,
>
> John
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Matthew.Ford at forward.com.au  Thu Sep 18 12:09:03 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] grammar for jdk1.5 parameterized types
References: <72C9789739C4214096AE945753B11EA36B1E81@mypxmail04.bco-home.com>
 <3F69FFA7.3050801@zoo.ox.ac.uk>
Message-ID: <003601c37e18$57991170$0400a8c0@NOTEBOOK>

Sorry on reading http://www.thecortex.net/clover/generics.html#grammar
I seem to be circular referencing this list.
matthew

I need to read faster and type slower next time.  Actually I seem to
remember a Sun document discussing this >> problem and that was what I was
searching for.

----- Original Message ----- 
From: "John P N Pybus" <john-yahoo@pybus.org>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, September 19, 2003 4:55 AM
Subject: Re: [antlr-interest] grammar for jdk1.5 parameterized types


> mzukowski@yci.com wrote:
> > You can't switch your lexer from the parser safely.  ANTLR doesn't work
that
> > way (infinite lookahead and all that).  I suggest getting rid of ">>" as
a
> > token and making the parser look for '>' '>' as GT.
> >
> > Monty
>
> Hmm, with the lexer ignoring Whitespace wouldn't the parser then allow
> "n > > 3" as well as "n >> 3"?
>
> I'd suggest using lookahead in the lexer to define 3 tokens GT_GT,
> GT_EQ, and GT corresponding to a '>' directly followed by another '>';
> '>' followed by '=' and all other '>' chars, respectively.
>
> You can use ( GT | GT_GT ) in your parser rules for generics, and can
> define the various shift operators as GT_GT GT; GT_GT GT_EQ EQ etc...
>
> I haven't done this with the antlr java grammar myself, but I believe
> I've seen this approach used in other java1.5 recognisers (sorry no
> reference handy).
>
> Hope this makes some sense.
>
> Yours,
>
> John
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From devel at hunsicker.de  Thu Sep 18 12:16:53 2003
From: devel at hunsicker.de (Marco Hunsicker)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] grammar for jdk1.5 parameterized types
In-Reply-To: <3F69FFA7.3050801@zoo.ox.ac.uk>
References: <72C9789739C4214096AE945753B11EA36B1E81@mypxmail04.bco-home.com>
 <3F69FFA7.3050801@zoo.ox.ac.uk>
Message-ID: <977749574.20030918211653@hunsicker.de>

JPNP> I haven't done this with the antlr java grammar myself, but I
JPNP> believe I've seen this approach used in other java1.5
JPNP> recognisers (sorry no reference handy).

The JavaCC based JRefactory ships with a grammar that claims to
support JDK 1.5 (Public Draft Specification 2.0, if I remember right)

See

http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/jrefactory/JRefactory/javacc/java1_5.jjt?rev=1.6&content-type=text/vnd.viewcvs-markup


Cheers,


--
Marco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From john-yahoo at pybus.org  Thu Sep 18 13:04:23 2003
From: john-yahoo at pybus.org (John P N Pybus)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] grammar for jdk1.5 parameterized types
In-Reply-To: <8BDF4A0A-EA0A-11D7-894B-000A95891192@antlr.org>
References: <8BDF4A0A-EA0A-11D7-894B-000A95891192@antlr.org>
Message-ID: <3F6A0FC7.30001@zoo.ox.ac.uk>

I've had a quick look.  Jamie's solution uses a bracket counter in the 
lexer.  This is a global counter for the file and I'm not quite sure how 
it deals with odd comparison operations though:

if (n < 3) {
   new List<Map<String>>();
}

The clover grammer Matthew referenced at:

http://www.thecortex.net/clover/generics.html#grammar

also uses a counter, but in the parser.  It gets rather complicated though.

What I remember is the Sun document Matthew mentions, which I also can't 
find.  It uses the aformentioned GT_GT and GT_EQ approach which does 
seem the simplest.

Yours,

John

Terence Parr wrote:
> For some reason my last post didn't appear.
> 
> See the C++ templates added to Java solution by Jamie Herre on the 
> antlr site.  Not sure what he did any more.  However, it's a simple 
> matter in the lexer to track a tiny bit of context I think (i.e., did I 
> see "class" or a class name)?  It means the lexer needs access to the 
> symbol table.  I think Jamie did something clever, but can't remember.  
> Perhaps my audio lectures have the answer ;)
> 
> Ter
> 
> On Thursday, September 18, 2003, at 11:55 AM, John P N Pybus wrote:
> 
> 
>>mzukowski@yci.com wrote:
>>
>>>You can't switch your lexer from the parser safely.  ANTLR doesn't 
>>>work that
>>>way (infinite lookahead and all that).  I suggest getting rid of ">>" 
>>>as a
>>>token and making the parser look for '>' '>' as GT.
>>>
>>>Monty
>>
>>Hmm, with the lexer ignoring Whitespace wouldn't the parser then allow
>>"n > > 3" as well as "n >> 3"?
>>
>>I'd suggest using lookahead in the lexer to define 3 tokens GT_GT,
>>GT_EQ, and GT corresponding to a '>' directly followed by another '>';
>>'>' followed by '=' and all other '>' chars, respectively.
>>
>>You can use ( GT | GT_GT ) in your parser rules for generics, and can
>>define the various shift operators as GT_GT GT; GT_GT GT_EQ EQ etc...
>>
>>I haven't done this with the antlr java grammar myself, but I believe
>>I've seen this approach used in other java1.5 recognisers (sorry no
>>reference handy).
>>
>>Hope this makes some sense.
>>
>>Yours,
>>
>>John
>>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lzy7886 at yahoo.com  Thu Sep 18 19:20:25 2003
From: lzy7886 at yahoo.com (lzy7886)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] link error with antlr(Klaren edition)
Message-ID: <bkdp59+3aom@eGroups.com>

Hi:

I have used antlr on java platform for some days,thanks for the smart 
work of those clever guys.It's wonderful.

However,I try to shift ANTLR to MSVC70 for the work which must be 
done on Windows,the problems arise.

I first built the antlr 2.7.2(Klaren 20030911) under MSVC70 to static 
lib.It completed successfully.But when I wrote a small program and 
try to build it,the problems came into being,it couldn't be linked 
correctly.

The compiler said some construct had already defined in some default 
lib.
such as:
msvcprtd.lib(MSVCP60D.dll) : error LNK2005: "class 
std::basic_ostream<char,struct std::char_traits<char> > & __cdecl 
std::operator<<(class std::basic_ostream<char,struct 
std::char_traits<char> > &,char const *)" (??6std@@YAAAV?
$basic_ostream@DU?$cha
r_traits@D@std@@@0@AAV10@PBD@Z) already defined in antlrlibd.lib
(LLkParser.obj)
msvcprtd.lib(MSVCP60D.dll) : error LNK2005: "public: __thiscall 
std::basic_string<char,struct std::char_traits<char>,class 
std::allocator<char> >::~basic_string<char,struct 
std::char_traits<char>,class std::allocator<char> >(void)" (??1?
$basic_strin
g@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@XZ) already 
defined in antlrlibd.lib(LLkParser.obj)
msvcprtd.lib(MSVCP60D.dll) : error LNK2005: "public: class 
std::basic_ostream<char,struct std::char_traits<char> > & __thiscall 
std::basic_ostream<char,struct std::char_traits<char> >::operator<<
(class std::basic_ostream<char,struct std::char_traits
<char> > & (__cdecl*)(class std::basic_ostream<char,struct 
std::char_traits<char> > &))" (??6?$basic_ostream@DU?
$char_traits@D@std@@@std@@QAEAAV01@P6AAAV01@AAV01@@Z@Z) already 
defined in antlrlibd.lib(LLkParser.obj)
msvcprtd.lib(MSVCP60D.dll) : error LNK2005: "class 
std::basic_ostream<char,struct std::char_traits<char> > & __cdecl 
std::endl(class std::basic_ostream<char,struct std::char_traits<char> 
> &)" (?endl@std@@YAAAV?$basic_ostream@DU?$char_traits@D@std@@
@1@AAV21@@Z) already defined in antlrlibd.lib(LLkParser.obj)

I cannot figure out the solution to it.
Can anybody help me out?
Thanks very much in advance.

                                         Yours, 
                                         Rockson

Following is the my .g file,quite simple.


header "pre_include_hpp" {
    // gets inserted before antlr generated includes in the header 
file
    #include <iostream>
    #include <string>
}

options {
	language="Cpp";
}
{
ANTLR_USING_NAMESPACE(std)
}
class StclParser extends Parser;
options {
	importVocab=Stcl;  // call the vocabulary "Stcl"
	//buildAST = true;	// uses CommonAST by default
	genHashLines=false;
}
stats
	:(stat)*
	  EOF
	;	
stat
	: wait_stat
	 |waitto_stat
	 |pause_stat
	 |send_stat
	 |check_stat
	 |call_stat
	;
wait_stat
	:wait:WAIT n:NUM_INT
	{cout<<wait->getText()<<" "<<n->getText()<<endl;}
	;
waitto_stat 
	:w:WAITTO t:TIME
	{std::cout<<w->getText()<<" "<<t->getText()<<endl;}
	;
pause_stat
	:p:PAUSE
	{std::cout<<p->getText()<<endl;}
	;
send_stat
	:s:SEND i:IDENT {std::cout<<s->getText()<<" "<<i->getText()
<<" ";}
	(c:COMMA n:NUM_INT{std::cout<<c->getText()<<" "<<n->getText
();})?
	{std::cout<<endl;}
	 
	;
check_stat
{string c,n;}
	:check:CHECK ident:IDENT c=check_op n=num str:STRING_LITERAL
	{std::cout<<check->getText()<<" "<<ident->getText()
<<" "<<c<<" "<<n<<" "<<str->getText()<<endl;}	
	;
check_op
returns[std::string op]
	: opE:EQUAL	{op=opE->getText();}
	 |opN:NOT_EQUAL {op=opN->getText();}
	 |opGE:GE	{op=opGE->getText();}
	 |opGT:GT	{op=opGT->getText();}
	 |opLE:LE	{op=opLE->getText();}
	 |opLT:LTHAN	{op=opLT->getText();}
	 ;	
call_stat
	:call:CALL ident:IDENT
	{std::cout<<call->getText()<<" "<<ident->getText()<<endl;}
	;
num
returns[std::string number]
{
std::string sign="";
}
	:
	 (p:PLUS{sign=p->getText();}|m:MINUS{sign=m->getText();})?
	 (
	   nI:NUM_INT	{number=sign+nI->getText();}
	  |nF:NUM_FLOAT	{number=sign+nF->getText()+sign;}
	  )	 	 
	;						
//--------------------------------------------------------------------
--------
// The Stcl scanner
//--------------------------------------------------------------------
--------
class StclLexer extends Lexer;

options {
	exportVocab=Stcl;  // call the vocabulary "Stcl"
	testLiterals=false;    // don't automatically test for 
literals
	k=2;                   // four characters of lookahead
	codeGenBitsetTestThreshold=5;
	//charVocabulary='\x00\x03'..'\xFF\xFE';//note:here exclude 
the \uFFFF(16bit -1:EOF)
	charVocabulary = '\3'..'\377';
	
}
tokens
{
CHECK	="CHECK"	;
SEND	="SEND"		;
WAIT	="WAIT"		;
WAITTO	="WAITTO"	;
PAUSE	="PAUSE"	;
CALL	="CALL"		;
NUM_FLOAT		;
TIME			;
DOT			;
}


// OPERATORS

LPAREN			:	'('		;
RPAREN			:	')'		;
COMMA			:	','		;
EQUAL			:	"=="		;
NOT_EQUAL		:	"!="		;
GE			:	">="		;
GT			:	">"		;
LE			:	"<="		;
LTHAN			:	'<'		;
PLUS			:	'+'		;
MINUS			:	'-'		;

	

// Whitespace -- ignored
WS	:	(	' '
		|	'\t'
		|	'\f'
		// handle newlines
		|	(	"\r\n"  // Evil DOS
			|	'\r'    // Macintosh
			|	'\n'    // Unix (the right way)
			)
			{ newline(); }
		)
		{ _ttype = ANTLR_USE_NAMESPACE(antlr)Token::SKIP; }
	;

// Single-line comments
SL_COMMENT
	:	"--"
		(~('\n'|'\r'))* ('\n'|'\r'('\n')?)
		{$setType(ANTLR_USE_NAMESPACE(antlr)Token::SKIP); 
newline();}
	;
// character literals
CHAR_LITERAL
	:	'\'' ( ESC | ~'\'' ) '\''
	;

// std::string literals
STRING_LITERAL
	:	'"' (ESC|~('"'|'\\'))* '"'
	;


// escape sequence -- note that this is protected; it can only be 
called
//   from another lexer rule -- it will not ever directly return a 
token to
//   the parser
// There are various ambiguities hushed in this rule.  The optional
// '0'...'9' digit matches should be matched here rather than letting
// them go back to STRING_LITERAL to be matched.  ANTLR does the
// right thing by matching immediately; hence, it's ok to shut off
// the FOLLOW ambig warnings.
protected
ESC
	:	'\\'
		(	'n'
		|	'r'
		|	't'
		|	'b'
		|	'f'
		|	'"'
		|	'\''
		|	'\\'
		|	('u')+ HEX_DIGIT HEX_DIGIT HEX_DIGIT 
HEX_DIGIT 
		|	('0'..'3')
			(
				options {
					warnWhenFollowAmbig = 
false;
				}
			:	('0'..'7')
				(	
					options {
					
	warnWhenFollowAmbig = false;
					}
				:	'0'..'7'
				)?
			)?
		|	('4'..'7')
			(
				options {
					warnWhenFollowAmbig = 
false;
				}
			:	('0'..'9')
			)?
		)
	;
protected
DIGIT
	:'0'..'9'
	;

// hexadecimal digit (again, note it's protected!)
protected
HEX_DIGIT
	:	('0'..'9'|'A'..'F'|'a'..'f')
	;

// an identifier.  Note that testLiterals is set to true!  This means
// that after we match the rule, we look in the literals table to see
// if it's a literal or really an identifer
IDENT
	options {testLiterals=true;}
	:	('a'..'z'|'A'..'Z'|'_'|'$') 
('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'$')*
	;


// a numeric literal
NUM_INT
	{bool isDecimal=false;}
	:
	  
	  '.' {_ttype = DOT;}
		(('0'..'9')+ (EXPONENT)? (FLOAT_SUFFIX)? { _ttype 
= NUM_FLOAT; })?	
	  |((DIGIT)+ 'd' DIGIT (DIGIT)? 'h')=>
			(DIGIT)+ 'd' DIGIT (DIGIT)? 'h' DIGIT 
(DIGIT)? 'm' DIGIT (DIGIT)? 's'
		{$setType(TIME);}	  	
	  |	(	'0' {isDecimal = true;} // special case 
for just '0'
			(	('x'|'X')
				(			
				// hex
					// the 'e'|'E' and 
float suffix stuff look
					// like hex digits, 
hence the (...)+ doesn't
					// know when to stop: 
ambig.  ANTLR resolves
					// it correctly by 
matching immediately.  It
					// is therefor ok to 
hush warning.
					options {
					
	warnWhenFollowAmbig=false;
					}
				:	HEX_DIGIT
				)+
			//|	('0'..'7')+		
				// NO octal
			)?
		|	('1'..'9') ('0'..'9')*  {isDecimal=true;}
		// non-zero decimal
		)
		(	('l'|'L')
		
		// only check to see if it's a float if looks like 
decimal so far
		|	{isDecimal}?
			(	'.' ('0'..'9')* (EXPONENT)? 
(FLOAT_SUFFIX)?
			|	EXPONENT (FLOAT_SUFFIX)?
			|	FLOAT_SUFFIX
			)
			{ _ttype = NUM_FLOAT; }
		)?	   	   		
	;


// a couple protected methods to assist in matching floating point 
numbers
protected
EXPONENT
	:	('e'|'E') ('+'|'-')? ('0'..'9')+
	;


protected
FLOAT_SUFFIX
	:	'f'|'F'|'d'|'D'
	;

	
	








 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From nico123 at adinet.com.uy  Thu Sep 18 20:38:01 2003
From: nico123 at adinet.com.uy (Nico)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] Walking TreeParser question
Message-ID: <00a601c37e5f$6da245d0$0200a8c0@viper2000>

Hi all:

I will use the Antlr to parse a source code and to get some metrics.
I will read source, to create the AST with parser and walk it with the TreeParser.
(as seen in the java.g and java.g.tree example)
TreeParser has the same structure to the one that were used to create the AST.

My question is:

How do I iterate recursively in the tree (or call it several times) ?
(The java tree parser example walks it once)

For example, If I want to count the number of classes, one pass is enough.
But if want to get the number of overridden methods in a sub class, I need to walk the 
tree more than once.

Is my question clear?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030919/9c76bf93/attachment.html
From pete.forman at westerngeco.com  Fri Sep 19 01:39:53 2003
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] grammar for jdk1.5 parameterized types
In-Reply-To: <3F6A0FC7.30001@zoo.ox.ac.uk>
References: <8BDF4A0A-EA0A-11D7-894B-000A95891192@antlr.org>
 <8BDF4A0A-EA0A-11D7-894B-000A95891192@antlr.org>
Message-ID: <5.1.1.1.2.20030919093903.04a22cb0@wgmail2.gatwick.eur.slb.com>

The issue of >> was discussed back in March on this list.

http://groups.yahoo.com/group/antlr-interest/message/7718

-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Fri Sep 19 02:07:01 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] grammar for jdk1.5 parameterized types
In-Reply-To: <8BDF4A0A-EA0A-11D7-894B-000A95891192@antlr.org>; from parrt@antlr.org on Thu, Sep 18, 2003 at 12:01:44PM -0700
References: <3F69FFA7.3050801@zoo.ox.ac.uk> <8BDF4A0A-EA0A-11D7-894B-000A95891192@antlr.org>
Message-ID: <20030919110701.C25590@cs.utwente.nl>

On Thu, Sep 18, 2003 at 12:01:44PM -0700, Terence Parr wrote:
> It means the lexer needs access to the 
> symbol table.  I think Jamie did something clever, but can't remember.

If he does that than it could go wrong (in some pathetic cases) since this
is again feedback from parser to lexer. Also when the parser is in guessing
mode the lexer might make wrong decisions based upon the symboltable.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 "Don't call me stupid." "Oh, right. To call you stupid would be an insult
    to stupid people. I've known sheep that could outwit you! I've worn
              dresses with higher IQs!" --- A Fish Called Wanda

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Anthony.Youngman at ECA-International.com  Fri Sep 19 02:38:45 2003
From: Anthony.Youngman at ECA-International.com (Anthony W Youngman)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] grammar for jdk1.5 parameterized types
Message-ID: <C7FE35004D40FD45AA342991B88CE40409A6F2@lnml1.eca-international.local>

I'm going to hit this problem ...

But can't you get the lexer to create eg

">>" will return tokens GT NWGT while
"> >" will return GT GT

So the parser, where it wants >, will accept either GT or NWGT, but if
you actually want >>, then it looks for GT NWGT or possibly NWGT NWGT

Cheers,
Wol

-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
Sent: 18 September 2003 19:57
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] grammar for jdk1.5 parameterized types


Yep, you're right!

Monty

-----Original Message-----
From: John P N Pybus [mailto:john-yahoo@pybus.org] 
Sent: Thursday, September 18, 2003 11:56 AM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] grammar for jdk1.5 parameterized types


mzukowski@yci.com wrote:
> You can't switch your lexer from the parser safely.  ANTLR doesn't 
> work that way (infinite lookahead and all that).  I suggest getting 
> rid of ">>" as a token and making the parser look for '>' '>' as GT.
> 
> Monty

Hmm, with the lexer ignoring Whitespace wouldn't the parser then allow 
"n > > 3" as well as "n >> 3"?

I'd suggest using lookahead in the lexer to define 3 tokens GT_GT, 
GT_EQ, and GT corresponding to a '>' directly followed by another '>'; 
'>' followed by '=' and all other '>' chars, respectively.

You can use ( GT | GT_GT ) in your parser rules for generics, and can 
define the various shift operators as GT_GT GT; GT_GT GT_EQ EQ etc...

I haven't done this with the antlr java grammar myself, but I believe 
I've seen this approach used in other java1.5 recognisers (sorry no 
reference handy).

Hope this makes some sense.

Yours,

John


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 





***********************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

***********************************************************************************


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sasecp at wnt.sas.com  Fri Sep 19 06:09:19 2003
From: sasecp at wnt.sas.com (Ernest Pasour)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] grammar for jdk1.5 parameterized types
Message-ID: <8D966D6B75EB7F47AA300241BF2E1D0C02A00686@merc17.na.sas.com>

I looked at Jamie's solution, but I don't believe it works correctly (I may be wrong, I am no parsing expert).  It appears that he has kept a counter that he increments when he sees LT and decrements on GT.  Then he uses a syntactic predicate (I think that's what it's called) to prevent lexical recognition of ">>" if the counter is at 2.  This forces the '>' to be recognized, which allows the parameterized types to be parsed.  However, I believe a piece of code like the following will cause problems:

{
	if (a<b) a++;
	if (a<b) a++;
	a>>2;
}

In this case, the ">>" will be recognized as two separate '>' symbols since it was preceded by 2 '<' without any intervening operation that zeroes out the counter.

-----Original Message-----
From: Terence Parr [mailto:parrt@antlr.org] 
Sent: Thursday, September 18, 2003 3:02 PM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] grammar for jdk1.5 parameterized types


For some reason my last post didn't appear.

See the C++ templates added to Java solution by Jamie Herre on the 
antlr site.  Not sure what he did any more.  However, it's a simple 
matter in the lexer to track a tiny bit of context I think (i.e., did I 
see "class" or a class name)?  It means the lexer needs access to the 
symbol table.  I think Jamie did something clever, but can't remember.  
Perhaps my audio lectures have the answer ;)

Ter

On Thursday, September 18, 2003, at 11:55 AM, John P N Pybus wrote:

> mzukowski@yci.com wrote:
>> You can't switch your lexer from the parser safely.  ANTLR doesn't 
>> work that way (infinite lookahead and all that).  I suggest getting 
>> rid of ">>" as a
>> token and making the parser look for '>' '>' as GT.
>>
>> Monty
>
> Hmm, with the lexer ignoring Whitespace wouldn't the parser then allow
> "n > > 3" as well as "n >> 3"?
>
> I'd suggest using lookahead in the lexer to define 3 tokens GT_GT,
> GT_EQ, and GT corresponding to a '>' directly followed by another '>'; 
> '>' followed by '=' and all other '>' chars, respectively.
>
> You can use ( GT | GT_GT ) in your parser rules for generics, and can
> define the various shift operators as GT_GT GT; GT_GT GT_EQ EQ etc...
>
> I haven't done this with the antlr java grammar myself, but I believe
> I've seen this approach used in other java1.5 recognisers (sorry no 
> reference handy).
>
> Hope this makes some sense.
>
> Yours,
>
> John
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org Co-founder, http://www.jguru.com Co-founder, http://www.knowspam.net enjoy email again! Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sasecp at wnt.sas.com  Fri Sep 19 07:30:50 2003
From: sasecp at wnt.sas.com (Ernest Pasour)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] grammar for jdk1.5 parameterized types
Message-ID: <8D966D6B75EB7F47AA300241BF2E1D0C08CCE1@merc17.na.sas.com>

I found the Sun suggested grammar in the public draft for jsr014.  That was the "disgusting" grammar I referred to.  It looks to me like that might be the appropriate solution though.

I'm also going to take a look at the clover grammar, but it may be too much black magic for me.

Thanks to everyone for their suggestions.

-----Original Message-----
From: John P N Pybus [mailto:john-yahoo@pybus.org] 
Sent: Thursday, September 18, 2003 4:04 PM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] grammar for jdk1.5 parameterized types


I've had a quick look.  Jamie's solution uses a bracket counter in the 
lexer.  This is a global counter for the file and I'm not quite sure how 
it deals with odd comparison operations though:

if (n < 3) {
   new List<Map<String>>();
}

The clover grammer Matthew referenced at:

http://www.thecortex.net/clover/generics.html#grammar

also uses a counter, but in the parser.  It gets rather complicated though.

What I remember is the Sun document Matthew mentions, which I also can't 
find.  It uses the aformentioned GT_GT and GT_EQ approach which does 
seem the simplest.

Yours,

John

Terence Parr wrote:
> For some reason my last post didn't appear.
> 
> See the C++ templates added to Java solution by Jamie Herre on the
> antlr site.  Not sure what he did any more.  However, it's a simple 
> matter in the lexer to track a tiny bit of context I think (i.e., did I 
> see "class" or a class name)?  It means the lexer needs access to the 
> symbol table.  I think Jamie did something clever, but can't remember.  
> Perhaps my audio lectures have the answer ;)
> 
> Ter
> 
> On Thursday, September 18, 2003, at 11:55 AM, John P N Pybus wrote:
> 
> 
>>mzukowski@yci.com wrote:
>>
>>>You can't switch your lexer from the parser safely.  ANTLR doesn't
>>>work that
>>>way (infinite lookahead and all that).  I suggest getting rid of ">>" 
>>>as a
>>>token and making the parser look for '>' '>' as GT.
>>>
>>>Monty
>>
>>Hmm, with the lexer ignoring Whitespace wouldn't the parser then allow 
>>"n > > 3" as well as "n >> 3"?
>>
>>I'd suggest using lookahead in the lexer to define 3 tokens GT_GT, 
>>GT_EQ, and GT corresponding to a '>' directly followed by another '>'; 
>>'>' followed by '=' and all other '>' chars, respectively.
>>
>>You can use ( GT | GT_GT ) in your parser rules for generics, and can 
>>define the various shift operators as GT_GT GT; GT_GT GT_EQ EQ etc...
>>
>>I haven't done this with the antlr java grammar myself, but I believe 
>>I've seen this approach used in other java1.5 recognisers (sorry no 
>>reference handy).
>>
>>Hope this makes some sense.
>>
>>Yours,
>>
>>John
>>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri Sep 19 10:28:53 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] Walking TreeParser question
Message-ID: <72C9789739C4214096AE945753B11EA36B1E8E@mypxmail04.bco-home.com>

Look at the source code.  Your main program calls the tree parser, you can
call it as many times as you want.

Monty

-----Original Message-----
From: Nico [mailto:nico123@adinet.com.uy] 
Sent: Thursday, September 18, 2003 8:38 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Walking TreeParser question


Hi all:

I will use the Antlr to parse a source code and to get some metrics.
I will read source, to create the AST with parser and walk it with the
TreeParser.
(as seen in the java.g and java.g.tree example)
TreeParser has the same structure to the one that were used to create the
AST.

My question is:

How do I iterate recursively in the tree (or call it several times) ?
(The java tree parser example walks it once)

For example, If I want to count the number of classes, one pass is enough.
But if want to get the number of overridden methods in a sub class, I need
to walk the 
tree more than once.

Is my question clear?



Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From nico123 at adinet.com.uy  Fri Sep 19 16:37:55 2003
From: nico123 at adinet.com.uy (Nico)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] Walking TreeParser question
References: <72C9789739C4214096AE945753B11EA36B1E8E@mypxmail04.bco-home.com>
Message-ID: <002c01c37f07$0d920d80$0200a8c0@viper2000>

What source code? the one generated for the treeparser?
Can you paste an example of this? Thanks.
----- Original Message ----- 
From: <mzukowski@yci.com>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, September 19, 2003 2:28 PM
Subject: RE: [antlr-interest] Walking TreeParser question


> Look at the source code.  Your main program calls the tree parser, you can
> call it as many times as you want.
>
> Monty
>
> -----Original Message-----
> From: Nico [mailto:nico123@adinet.com.uy]
> Sent: Thursday, September 18, 2003 8:38 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Walking TreeParser question
>
>
> Hi all:
>
> I will use the Antlr to parse a source code and to get some metrics.
> I will read source, to create the AST with parser and walk it with the
> TreeParser.
> (as seen in the java.g and java.g.tree example)
> TreeParser has the same structure to the one that were used to create the
> AST.
>
> My question is:
>
> How do I iterate recursively in the tree (or call it several times) ?
> (The java tree parser example walks it once)
>
> For example, If I want to count the number of classes, one pass is enough.
> But if want to get the number of overridden methods in a sub class, I need
> to walk the
> tree more than once.
>
> Is my question clear?
>
>
>
> Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service.
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From zhangcharles at yahoo.com  Sun Sep 21 15:33:34 2003
From: zhangcharles at yahoo.com (zhangcharles)
Date: Mon Dec 20 16:15:56 2004
Subject: [antlr-interest] java grammar problems
Message-ID: <bkl8vu+a5dq@eGroups.com>

I posted this a month ago. I think it got lost in the message pond.

------------------------------------- 
Hi, the current java.tree.g grammar doesn't seem to take inner 
interface definition into consideration. Any advices of how to add 
it since I'm not a grammar expert. Thanks a lot.

Charles



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon Sep 22 08:27:30 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Walking TreeParser question
Message-ID: <72C9789739C4214096AE945753B11EA36B1E94@mypxmail04.bco-home.com>

The source code that has the main() method in it.  Should be easy to find in
the example.

Monty

-----Original Message-----
From: Nico [mailto:nico123@adinet.com.uy] 
Sent: Friday, September 19, 2003 4:38 PM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] Walking TreeParser question


What source code? the one generated for the treeparser?
Can you paste an example of this? Thanks.
----- Original Message ----- 
From: <mzukowski@yci.com>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, September 19, 2003 2:28 PM
Subject: RE: [antlr-interest] Walking TreeParser question


> Look at the source code.  Your main program calls the tree parser, you 
> can call it as many times as you want.
>
> Monty
>
> -----Original Message-----
> From: Nico [mailto:nico123@adinet.com.uy]
> Sent: Thursday, September 18, 2003 8:38 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Walking TreeParser question
>
>
> Hi all:
>
> I will use the Antlr to parse a source code and to get some metrics. I 
> will read source, to create the AST with parser and walk it with the 
> TreeParser. (as seen in the java.g and java.g.tree example)
> TreeParser has the same structure to the one that were used to create the
> AST.
>
> My question is:
>
> How do I iterate recursively in the tree (or call it several times) ? 
> (The java tree parser example walks it once)
>
> For example, If I want to count the number of classes, one pass is 
> enough. But if want to get the number of overridden methods in a sub 
> class, I need to walk the tree more than once.
>
> Is my question clear?
>
>
>
> Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service.
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Mon Sep 22 11:30:02 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Skipping AST nodes in tree-parsing
Message-ID: <003401c38137$899bf670$1ac8090a@oddi.is>

Hello there.. 

Is there a way in a treeparser to skip the walking/parsing of a tree
node? I want to store a reference to the AST instead. Two examples: 

This is in my parser: 

funcdef
  : "function"^ ID LPAREN! arg_list RPAREN! block_stmt
  ;

and in the tree parser: 
funcdef
  : #("function" ID arg_list block_stmt)
  ;

Now, instead of parsing ID, arg_list and then block_stmt nodes, I only
want to parse the ID and arg_list and skip over block_stmt, instead I
will store a reference to the node in a hashtable indexed on the given
ID. 

Later, when the function is called in the user-program, the tree-parser
rule for a function call will look up the AST for the function
definition by its name and manually call appropriate rule for walkin the
AST, after installing the given paremeters into the symbol table. 

Another example of this is rewriting for loops to while loops: 

for (stmt1; expr; stmt2) stmt3; 

becomes 

stmt1; while (expr) { stmt3; stmt2; } 

This involves the reordering of the atoms, i.e. this translation scheme
is not simple by the definiton of the Dragonbook. 

How does one do this kind of translation in a tree walker? Perhaps
someone could point out a simpler solution, but if one could skip over
nodes as described above and manually call the parsing method for them
at a later time, this becomes trivial. 

Arnar


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon Sep 22 11:34:50 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Skipping AST nodes in tree-parsing
Message-ID: <72C9789739C4214096AE945753B11EA36B1E9A@mypxmail04.bco-home.com>

funcdef
  : #("function" ID arg_list .)
  ;

'.' is a wild card and just matches one node but does not decend into the
tree, just like ID above does not descend into a tree and just matches one
node of type ID.

Monty

-----Original Message-----
From: Arnar Birgisson [mailto:arnarb@oddi.is] 
Sent: Monday, September 22, 2003 11:30 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Skipping AST nodes in tree-parsing


Hello there.. 

Is there a way in a treeparser to skip the walking/parsing of a tree node? I
want to store a reference to the AST instead. Two examples: 

This is in my parser: 

funcdef
  : "function"^ ID LPAREN! arg_list RPAREN! block_stmt
  ;

and in the tree parser: 
funcdef
  : #("function" ID arg_list block_stmt)
  ;

Now, instead of parsing ID, arg_list and then block_stmt nodes, I only want
to parse the ID and arg_list and skip over block_stmt, instead I will store
a reference to the node in a hashtable indexed on the given ID. 

Later, when the function is called in the user-program, the tree-parser rule
for a function call will look up the AST for the function definition by its
name and manually call appropriate rule for walkin the AST, after installing
the given paremeters into the symbol table. 

Another example of this is rewriting for loops to while loops: 

for (stmt1; expr; stmt2) stmt3; 

becomes 

stmt1; while (expr) { stmt3; stmt2; } 

This involves the reordering of the atoms, i.e. this translation scheme is
not simple by the definiton of the Dragonbook. 

How does one do this kind of translation in a tree walker? Perhaps someone
could point out a simpler solution, but if one could skip over nodes as
described above and manually call the parsing method for them at a later
time, this becomes trivial. 

Arnar


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Mon Sep 22 11:51:44 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Skipping AST nodes in tree-parsing
In-Reply-To: <72C9789739C4214096AE945753B11EA36B1E9A@mypxmail04.bco-home.com>
Message-ID: <003501c3813a$917becd0$1ac8090a@oddi.is>

Hello..

Thanks for the lightning fast response :o)

This works, I have:

funcdef
  : #("function" ID arg_list (block_stmt)=> block:.)
  ;

This ensures that the atom is of the correct token.

One thought this leads to: what meaning does ! have in tree parsers?
Excpecting to match a token and create the AST for it but skip
descending
into it, I first tried

funcdef
  : #("function" ID arg_list block_stmt!)
  ;

which was accepted by ANTLR but generated the exact same code as it did
without the !.

Arnar

> -----Original Message-----
> From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
> Sent: 22. september 2003 18:35
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Skipping AST nodes in tree-parsing
> 
> 
> funcdef
>   : #("function" ID arg_list .)
>   ;
> 
> '.' is a wild card and just matches one node but does not 
> decend into the
> tree, just like ID above does not descend into a tree and 
> just matches one
> node of type ID.
> 
> Monty
> 
> -----Original Message-----
> From: Arnar Birgisson [mailto:arnarb@oddi.is] 
> Sent: Monday, September 22, 2003 11:30 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Skipping AST nodes in tree-parsing
> 
> 
> Hello there.. 
> 
> Is there a way in a treeparser to skip the walking/parsing of 
> a tree node? I
> want to store a reference to the AST instead. Two examples: 
> 
> This is in my parser: 
> 
> funcdef
>   : "function"^ ID LPAREN! arg_list RPAREN! block_stmt
>   ;
> 
> and in the tree parser: 
> funcdef
>   : #("function" ID arg_list block_stmt)
>   ;
> 
> Now, instead of parsing ID, arg_list and then block_stmt 
> nodes, I only want
> to parse the ID and arg_list and skip over block_stmt, 
> instead I will store
> a reference to the node in a hashtable indexed on the given ID. 
> 
> Later, when the function is called in the user-program, the 
> tree-parser rule
> for a function call will look up the AST for the function 
> definition by its
> name and manually call appropriate rule for walkin the AST, 
> after installing
> the given paremeters into the symbol table. 
> 
> Another example of this is rewriting for loops to while loops: 
> 
> for (stmt1; expr; stmt2) stmt3; 
> 
> becomes 
> 
> stmt1; while (expr) { stmt3; stmt2; } 
> 
> This involves the reordering of the atoms, i.e. this 
> translation scheme is
> not simple by the definiton of the Dragonbook. 
> 
> How does one do this kind of translation in a tree walker? 
> Perhaps someone
> could point out a simpler solution, but if one could skip 
> over nodes as
> described above and manually call the parsing method for them 
> at a later
> time, this becomes trivial. 
> 
> Arnar
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! 
> Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon Sep 22 13:03:53 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Skipping AST nodes in tree-parsing
Message-ID: <72C9789739C4214096AE945753B11EA36B1E9C@mypxmail04.bco-home.com>

! is to turn off tree generation.  If you tree parser is not building a tree
(buildAST=false) then ! won't do a thing.

Also, if it so happens that you have an imaginary root for block_stmt, say
BLOCK_STMT, then you could write your rule like this without bothering with
the syntactic predicate (unless you really want to validate the syntax for
the whole block_stmt subtree)

funcdef
  : #("function" ID arg_list BLOCK_STMT)
  ;

Monty

-----Original Message-----
From: Arnar Birgisson [mailto:arnarb@oddi.is] 
Sent: Monday, September 22, 2003 11:52 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Skipping AST nodes in tree-parsing


Hello..

Thanks for the lightning fast response :o)

This works, I have:

funcdef
  : #("function" ID arg_list (block_stmt)=> block:.)
  ;

This ensures that the atom is of the correct token.

One thought this leads to: what meaning does ! have in tree parsers?
Excpecting to match a token and create the AST for it but skip descending
into it, I first tried

funcdef
  : #("function" ID arg_list block_stmt!)
  ;

which was accepted by ANTLR but generated the exact same code as it did
without the !.

Arnar

> -----Original Message-----
> From: mzukowski@yci.com [mailto:mzukowski@yci.com]
> Sent: 22. september 2003 18:35
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Skipping AST nodes in tree-parsing
> 
> 
> funcdef
>   : #("function" ID arg_list .)
>   ;
> 
> '.' is a wild card and just matches one node but does not
> decend into the
> tree, just like ID above does not descend into a tree and 
> just matches one
> node of type ID.
> 
> Monty
> 
> -----Original Message-----
> From: Arnar Birgisson [mailto:arnarb@oddi.is]
> Sent: Monday, September 22, 2003 11:30 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Skipping AST nodes in tree-parsing
> 
> 
> Hello there..
> 
> Is there a way in a treeparser to skip the walking/parsing of
> a tree node? I
> want to store a reference to the AST instead. Two examples: 
> 
> This is in my parser:
> 
> funcdef
>   : "function"^ ID LPAREN! arg_list RPAREN! block_stmt
>   ;
> 
> and in the tree parser:
> funcdef
>   : #("function" ID arg_list block_stmt)
>   ;
> 
> Now, instead of parsing ID, arg_list and then block_stmt
> nodes, I only want
> to parse the ID and arg_list and skip over block_stmt, 
> instead I will store
> a reference to the node in a hashtable indexed on the given ID. 
> 
> Later, when the function is called in the user-program, the
> tree-parser rule
> for a function call will look up the AST for the function 
> definition by its
> name and manually call appropriate rule for walkin the AST, 
> after installing
> the given paremeters into the symbol table. 
> 
> Another example of this is rewriting for loops to while loops:
> 
> for (stmt1; expr; stmt2) stmt3;
> 
> becomes
> 
> stmt1; while (expr) { stmt3; stmt2; }
> 
> This involves the reordering of the atoms, i.e. this
> translation scheme is
> not simple by the definiton of the Dragonbook. 
> 
> How does one do this kind of translation in a tree walker?
> Perhaps someone
> could point out a simpler solution, but if one could skip 
> over nodes as
> described above and manually call the parsing method for them 
> at a later
> time, this becomes trivial. 
> 
> Arnar
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo!
> Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Mon Sep 22 13:50:18 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Re: Skipping AST nodes in tree-parsing
In-Reply-To: <003501c3813a$917becd0$1ac8090a@oddi.is>
Message-ID: <bknnaa+3jj6@eGroups.com>

Arnar--

Annotation in tree parsers is a bit broken, but I think that the 
reason that ! had no effect on your code was that you probably had 
tree construction turned off and so exactly the same code would be 
generated.  With tree construction turned on, this tree pass would 
have produced a syntax tree without the block_stmt subtrees.  ! 
affects construction only, not recognition. In fact, ! in ANTLR 2 
means "construct, but do not add to the tree being built".

--Loring


--- In antlr-interest@yahoogroups.com, "Arnar Birgisson" <arnarb@o...> 
wrote:
> Hello..
> 
> Thanks for the lightning fast response :o)
> 
> This works, I have:
> 
> funcdef
>   : #("function" ID arg_list (block_stmt)=> block:.)
>   ;
> 
> This ensures that the atom is of the correct token.
> 
> One thought this leads to: what meaning does ! have in tree parsers?
> Excpecting to match a token and create the AST for it but skip
> descending
> into it, I first tried
> 
> funcdef
>   : #("function" ID arg_list block_stmt!)
>   ;
> 
> which was accepted by ANTLR but generated the exact same code as it 
did
> without the !.
> 
> Arnar
> 
> > -----Original Message-----
> > From: mzukowski@y... [mailto:mzukowski@y...] 
> > Sent: 22. september 2003 18:35
> > To: antlr-interest@yahoogroups.com
> > Subject: RE: [antlr-interest] Skipping AST nodes in tree-parsing
> > 
> > 
> > funcdef
> >   : #("function" ID arg_list .)
> >   ;
> > 
> > '.' is a wild card and just matches one node but does not 
> > decend into the
> > tree, just like ID above does not descend into a tree and 
> > just matches one
> > node of type ID.
> > 
> > Monty
> > 
> > -----Original Message-----
> > From: Arnar Birgisson [mailto:arnarb@o...] 
> > Sent: Monday, September 22, 2003 11:30 AM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Skipping AST nodes in tree-parsing
> > 
> > 
> > Hello there.. 
> > 
> > Is there a way in a treeparser to skip the walking/parsing of 
> > a tree node? I
> > want to store a reference to the AST instead. Two examples: 
> > 
> > This is in my parser: 
> > 
> > funcdef
> >   : "function"^ ID LPAREN! arg_list RPAREN! block_stmt
> >   ;
> > 
> > and in the tree parser: 
> > funcdef
> >   : #("function" ID arg_list block_stmt)
> >   ;
> > 
> > Now, instead of parsing ID, arg_list and then block_stmt 
> > nodes, I only want
> > to parse the ID and arg_list and skip over block_stmt, 
> > instead I will store
> > a reference to the node in a hashtable indexed on the given ID. 
> > 
> > Later, when the function is called in the user-program, the 
> > tree-parser rule
> > for a function call will look up the AST for the function 
> > definition by its
> > name and manually call appropriate rule for walkin the AST, 
> > after installing
> > the given paremeters into the symbol table. 
> > 
> > Another example of this is rewriting for loops to while loops: 
> > 
> > for (stmt1; expr; stmt2) stmt3; 
> > 
> > becomes 
> > 
> > stmt1; while (expr) { stmt3; stmt2; } 
> > 
> > This involves the reordering of the atoms, i.e. this 
> > translation scheme is
> > not simple by the definiton of the Dragonbook. 
> > 
> > How does one do this kind of translation in a tree walker? 
> > Perhaps someone
> > could point out a simpler solution, but if one could skip 
> > over nodes as
> > described above and manually call the parsing method for them 
> > at a later
> > time, this becomes trivial. 
> > 
> > Arnar
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! 
> > Groups is subject to http://docs.yahoo.com/info/terms/ 
> > 
> >


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From nico123 at adinet.com.uy  Mon Sep 22 16:10:08 2003
From: nico123 at adinet.com.uy (Nico)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Urgent help tree building
Message-ID: <00ca01c3815e$aafb4a10$0200a8c0@viper2000>

Hi:

I have a question in building a tree with buildAST = true;
I am building a custom tree, from a partial Smalltalk-80 grammar.

When I have this Lexer rule:

name_def: 
 a:IDENT "subclass"! COLON! SHARP! c:IDENT

I want to create this tree:

- c:IDENT
- EXTENDS
   - a:IDENT

c:IDENT and EXTENDS are in same level. - a:IDENT is EXTEND'S child
and "subclass"! COLON! SHARP! don't want to be in the tree.

The source is:

Object subclass: #AClasesPOS2

How do i do that?I apreciate the help!

regards

Nico
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030922/30cef4a5/attachment.html
From arnarb at oddi.is  Tue Sep 23 03:04:57 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Skipping AST nodes in tree-parsing
In-Reply-To: <72C9789739C4214096AE945753B11EA36B1E9C@mypxmail04.bco-home.com>
Message-ID: <000f01c381ba$24a13270$1ac8090a@oddi.is>

Thank you for a very clear answer, it is much appreciated (this goes to
Loring as well).

I will probably want to validate the syntax for the subtree in some
places, depending on context, but it is nice to have the option.

Thanks again.

Arnar

> -----Original Message-----
> From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
> Sent: 22. september 2003 20:04
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Skipping AST nodes in tree-parsing
> 
> 
> ! is to turn off tree generation.  If you tree parser is not 
> building a tree
> (buildAST=false) then ! won't do a thing.
> 
> Also, if it so happens that you have an imaginary root for 
> block_stmt, say
> BLOCK_STMT, then you could write your rule like this without 
> bothering with
> the syntactic predicate (unless you really want to validate 
> the syntax for
> the whole block_stmt subtree)
> 
> funcdef
>   : #("function" ID arg_list BLOCK_STMT)
>   ;
> 
> Monty
> 
> -----Original Message-----
> From: Arnar Birgisson [mailto:arnarb@oddi.is] 
> Sent: Monday, September 22, 2003 11:52 AM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Skipping AST nodes in tree-parsing
> 
> 
> Hello..
> 
> Thanks for the lightning fast response :o)
> 
> This works, I have:
> 
> funcdef
>   : #("function" ID arg_list (block_stmt)=> block:.)
>   ;
> 
> This ensures that the atom is of the correct token.
> 
> One thought this leads to: what meaning does ! have in tree parsers?
> Excpecting to match a token and create the AST for it but 
> skip descending
> into it, I first tried
> 
> funcdef
>   : #("function" ID arg_list block_stmt!)
>   ;
> 
> which was accepted by ANTLR but generated the exact same code 
> as it did
> without the !.
> 
> Arnar
> 
> > -----Original Message-----
> > From: mzukowski@yci.com [mailto:mzukowski@yci.com]
> > Sent: 22. september 2003 18:35
> > To: antlr-interest@yahoogroups.com
> > Subject: RE: [antlr-interest] Skipping AST nodes in tree-parsing
> > 
> > 
> > funcdef
> >   : #("function" ID arg_list .)
> >   ;
> > 
> > '.' is a wild card and just matches one node but does not
> > decend into the
> > tree, just like ID above does not descend into a tree and 
> > just matches one
> > node of type ID.
> > 
> > Monty
> > 
> > -----Original Message-----
> > From: Arnar Birgisson [mailto:arnarb@oddi.is]
> > Sent: Monday, September 22, 2003 11:30 AM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Skipping AST nodes in tree-parsing
> > 
> > 
> > Hello there..
> > 
> > Is there a way in a treeparser to skip the walking/parsing of
> > a tree node? I
> > want to store a reference to the AST instead. Two examples: 
> > 
> > This is in my parser:
> > 
> > funcdef
> >   : "function"^ ID LPAREN! arg_list RPAREN! block_stmt
> >   ;
> > 
> > and in the tree parser:
> > funcdef
> >   : #("function" ID arg_list block_stmt)
> >   ;
> > 
> > Now, instead of parsing ID, arg_list and then block_stmt
> > nodes, I only want
> > to parse the ID and arg_list and skip over block_stmt, 
> > instead I will store
> > a reference to the node in a hashtable indexed on the given ID. 
> > 
> > Later, when the function is called in the user-program, the
> > tree-parser rule
> > for a function call will look up the AST for the function 
> > definition by its
> > name and manually call appropriate rule for walkin the AST, 
> > after installing
> > the given paremeters into the symbol table. 
> > 
> > Another example of this is rewriting for loops to while loops:
> > 
> > for (stmt1; expr; stmt2) stmt3;
> > 
> > becomes
> > 
> > stmt1; while (expr) { stmt3; stmt2; }
> > 
> > This involves the reordering of the atoms, i.e. this
> > translation scheme is
> > not simple by the definiton of the Dragonbook. 
> > 
> > How does one do this kind of translation in a tree walker?
> > Perhaps someone
> > could point out a simpler solution, but if one could skip 
> > over nodes as
> > described above and manually call the parsing method for them 
> > at a later
> > time, this becomes trivial. 
> > 
> > Arnar
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> >  
> > 
> > Your use of Yahoo!
> > Groups is subject to http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! 
> Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tzagotta1 at sienasystems.com  Tue Sep 23 08:13:42 2003
From: tzagotta1 at sienasystems.com (Tom Zagotta)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Floats and Integers
Message-ID: <200309231513.KAA18505@coral.propagation.net>

Hello everyone,
 
I have a grammar that needs to accept both floating-point numbers and
integers. A simplified form of the grammar (whitespace skipping not shown)
is like this:

class TestParser extends Parser;
abc:"ABC" FLOAT INT;
 
class TestLexer extends Lexer;
INT: ('0'..'9')+;
FLOAT: INT '.' INT;

The problem I have is with input like this:

ABC 3 5

In this case, I need the "3" to match the FLOAT token for the abc rule. It
seems that the only way to do this is to change the rule to the following:

abc: "ABC" (FLOAT|INT) INT;

But the problem with that is that there are a really large number of such
rules in my grammar.
 
Is there a better/alternative way to handle this? Ideally I'd like to define
a token that can match both int and float, but I still need a separate token
for int. It seems this is not possible.
 
Thanks in advance,
 
- Tom
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030923/c0a174df/attachment.html
From lubos.vnuk at rts.at  Tue Sep 23 08:20:20 2003
From: lubos.vnuk at rts.at (Lubos Vnuk)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Re: Floats and Integers
In-Reply-To: <200309231513.KAA18505@coral.propagation.net>
Message-ID: <bkpobk+v7io@eGroups.com>

How about this?

class TestParser extends Parser;
abc:"ABC" float INT;
float: INT | DEC;

class TestLexer extends Lexer;
INT: ('0'..'9')+;
DEC: INT '.' INT;

Regards,
Lubos.

--- In antlr-interest@yahoogroups.com, "Tom Zagotta" <tzagotta1@s...> 
wrote:
> Hello everyone,
>  
> I have a grammar that needs to accept both floating-point numbers 
and
> integers. A simplified form of the grammar (whitespace skipping not 
shown)
> is like this:
> 
> class TestParser extends Parser;
> abc:"ABC" FLOAT INT;
>  
> class TestLexer extends Lexer;
> INT: ('0'..'9')+;
> FLOAT: INT '.' INT;
> 
> The problem I have is with input like this:
> 
> ABC 3 5
> 
> In this case, I need the "3" to match the FLOAT token for the abc 
rule. It
> seems that the only way to do this is to change the rule to the 
following:
> 
> abc: "ABC" (FLOAT|INT) INT;
> 
> But the problem with that is that there are a really large number 
of such
> rules in my grammar.
>  
> Is there a better/alternative way to handle this? Ideally I'd like 
to define
> a token that can match both int and float, but I still need a 
separate token
> for int. It seems this is not possible.
>  
> Thanks in advance,
>  
> - Tom


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue Sep 23 08:33:18 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Re: Floats and Integers
Message-ID: <72C9789739C4214096AE945753B11EA36B1EA1@mypxmail04.bco-home.com>

First take a look at the java.g grammar at the rule for numbers, you need to
match both INTs and FLOATs in one lexer rule.

Then, as Lubos points out, make a "float" rule for the parser that accepts
either an INT or a FLOAT.

Monty

-----Original Message-----
From: Lubos Vnuk [mailto:lubos.vnuk@rts.at] 
Sent: Tuesday, September 23, 2003 8:20 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Floats and Integers

How about this?

class TestParser extends Parser;
abc:"ABC" float INT;
float: INT | DEC;

class TestLexer extends Lexer;
INT: ('0'..'9')+;
DEC: INT '.' INT;

Regards,
Lubos.

--- In antlr-interest@yahoogroups.com, "Tom Zagotta" <tzagotta1@s...> 
wrote:
> Hello everyone,
>  
> I have a grammar that needs to accept both floating-point numbers 
and
> integers. A simplified form of the grammar (whitespace skipping not 
shown)
> is like this:
> 
> class TestParser extends Parser;
> abc:"ABC" FLOAT INT;
>  
> class TestLexer extends Lexer;
> INT: ('0'..'9')+;
> FLOAT: INT '.' INT;
> 
> The problem I have is with input like this:
> 
> ABC 3 5
> 
> In this case, I need the "3" to match the FLOAT token for the abc 
rule. It
> seems that the only way to do this is to change the rule to the 
following:
> 
> abc: "ABC" (FLOAT|INT) INT;
> 
> But the problem with that is that there are a really large number 
of such
> rules in my grammar.
>  
> Is there a better/alternative way to handle this? Ideally I'd like 
to define
> a token that can match both int and float, but I still need a 
separate token
> for int. It seems this is not possible.
>  
> Thanks in advance,
>  
> - Tom


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue Sep 23 08:44:53 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Urgent help tree building
Message-ID: <72C9789739C4214096AE945753B11EA36B1EA2@mypxmail04.bco-home.com>

Use manual tree building, so I turned off tree building for the rule.
Having null as the root below just means that the resulting tree will be all
siblings with no children.  In this case the second sibling is a tree with
EXTENDS as the root and a as the child.

name_def!:
	a:IDENT "subclass" COLON SHARP c:IDENT
	{##=#(null,c,#(#[EXTENDS,"EXTENDS"],a));}

Monty

-----Original Message-----
From: Nico [mailto:nico123@adinet.com.uy] 
Sent: Monday, September 22, 2003 4:10 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Urgent help tree building

Hi:
?
I have a question in building a tree with buildAST = true;
I am building a custom tree, from a partial Smalltalk-80 grammar.
?
When I have this Lexer rule:
?
name_def: 
?a:IDENT "subclass"! COLON! SHARP! c:IDENT
?
I want to create this tree:
?
- c:IDENT
- EXTENDS
?? - a:IDENT
?
c:IDENT and EXTENDS are in same level. - a:IDENT is EXTEND'S child
and "subclass"! COLON! SHARP! don't want to be in the tree.
?
The source is:
?
Object subclass: #AClasesPOS2
?
How do i do that?I apreciate the help!
?
regards
?
Nico
?

Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From nico123 at adinet.com.uy  Tue Sep 23 14:42:23 2003
From: nico123 at adinet.com.uy (Nico)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Urgent help tree building
References: <72C9789739C4214096AE945753B11EA36B1EA2@mypxmail04.bco-home.com>
Message-ID: <004e01c3821b$93ab70c0$0200a8c0@viper2000>

Great! It worked. But now Antlr gives me:
Warning   did you forget to terminate previous rule?
Can we avoid it?

----- Original Message ----- 
From: <mzukowski@yci.com>
To: <antlr-interest@yahoogroups.com>
Sent: Tuesday, September 23, 2003 12:44 PM
Subject: RE: [antlr-interest] Urgent help tree building


Use manual tree building, so I turned off tree building for the rule.
Having null as the root below just means that the resulting tree will be all
siblings with no children.  In this case the second sibling is a tree with
EXTENDS as the root and a as the child.

name_def!:
a:IDENT "subclass" COLON SHARP c:IDENT
{##=#(null,c,#(#[EXTENDS,"EXTENDS"],a));}

Monty

-----Original Message-----
From: Nico [mailto:nico123@adinet.com.uy]
Sent: Monday, September 22, 2003 4:10 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Urgent help tree building

Hi:

I have a question in building a tree with buildAST = true;
I am building a custom tree, from a partial Smalltalk-80 grammar.

When I have this Lexer rule:

name_def:
a:IDENT "subclass"! COLON! SHARP! c:IDENT

I want to create this tree:

- c:IDENT
- EXTENDS
- a:IDENT

c:IDENT and EXTENDS are in same level. - a:IDENT is EXTEND'S child
and "subclass"! COLON! SHARP! don't want to be in the tree.

The source is:

Object subclass: #AClasesPOS2

How do i do that?I apreciate the help!

regards

Nico


Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service.



Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue Sep 23 16:29:11 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Urgent help tree building
Message-ID: <72C9789739C4214096AE945753B11EA36B1EAA@mypxmail04.bco-home.com>

You must have forgotten a semicolon at the end of the rule

-----Original Message-----
From: Nico [mailto:nico123@adinet.com.uy] 
Sent: Tuesday, September 23, 2003 2:42 PM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] Urgent help tree building

Great! It worked. But now Antlr gives me:
Warning   did you forget to terminate previous rule?
Can we avoid it?

----- Original Message ----- 
From: <mzukowski@yci.com>
To: <antlr-interest@yahoogroups.com>
Sent: Tuesday, September 23, 2003 12:44 PM
Subject: RE: [antlr-interest] Urgent help tree building


Use manual tree building, so I turned off tree building for the rule.
Having null as the root below just means that the resulting tree will be all
siblings with no children.  In this case the second sibling is a tree with
EXTENDS as the root and a as the child.

name_def!:
a:IDENT "subclass" COLON SHARP c:IDENT
{##=#(null,c,#(#[EXTENDS,"EXTENDS"],a));}

Monty

-----Original Message-----
From: Nico [mailto:nico123@adinet.com.uy]
Sent: Monday, September 22, 2003 4:10 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Urgent help tree building

Hi:

I have a question in building a tree with buildAST = true;
I am building a custom tree, from a partial Smalltalk-80 grammar.

When I have this Lexer rule:

name_def:
a:IDENT "subclass"! COLON! SHARP! c:IDENT

I want to create this tree:

- c:IDENT
- EXTENDS
- a:IDENT

c:IDENT and EXTENDS are in same level. - a:IDENT is EXTEND'S child
and "subclass"! COLON! SHARP! don't want to be in the tree.

The source is:

Object subclass: #AClasesPOS2

How do i do that?I apreciate the help!

regards

Nico


Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service.



Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ray at waldin.net  Tue Sep 23 16:46:35 2003
From: ray at waldin.net (Ray Waldin)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Re: java grammar problems
In-Reply-To: <bkl8vu+a5dq@eGroups.com>
Message-ID: <bkqm0r+1tu5@eGroups.com>

Hi,

I think what you mean is that java.tree.g doesn't allow type
definitions within an interface block.  This can be fixed by adding
typeDefinition as a third option to the interfaceBlock rule.

Hope that helps.

-Ray

--- old/java.tree.g     2003-09-23 16:27:37.000000000 -0700
+++ java.tree.g 2003-09-23 16:27:52.000000000 -0700
@@ -86,8 +86,9 @@
 interfaceBlock
        :       #(      OBJBLOCK
                        (       methodDecl
                        |       variableDef
+                       |       typeDefinition
                        )*
                )
        ;



--- In antlr-interest@yahoogroups.com, "zhangcharles"
<zhangcharles@y...> wrote:
> I posted this a month ago. I think it got lost in the message pond.
> 
> ------------------------------------- 
> Hi, the current java.tree.g grammar doesn't seem to take inner 
> interface definition into consideration. Any advices of how to add 
> it since I'm not a grammar expert. Thanks a lot.
> 
> Charles


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ray at waldin.net  Tue Sep 23 15:44:58 2003
From: ray at waldin.net (Ray Waldin)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] java.g NUM_INT
Message-ID: <3F70CCEA.7080804@waldin.net>

Hi everyone,

I'm new to this group, so apologies if this issue has been raised 
before.  I wasn't able to find any reference to it.  In java.g (Version 
1.20) it seems that the NUM_INT rule is broken for cases of floats and 
doubles which have leading zeros and contain the digits 8 or 9 in the 
decimal integer or mantissa part.

While the following cases work (by sheer luck, I believe):

> 07.0f
> 06d
> 07e0

these do not:

> 08.0f
> 09d
> 08e0

A quick fix can be found below.

-Ray


--- old/java.g  2003-09-23 15:20:05.000000000 -0700
+++ java.g      2003-09-23 15:21:28.000000000 -0700
@@ -1234,6 +1234,7 @@
                                        }
                                :       HEX_DIGIT
                                )+
+                       |       (('0'..'9')+ 
('.'|EXPONENT|FLOAT_SUFFIX|)) => ('0'..'9')+   // float or double with 
leading zero
                        |       
('0'..'7')+                                                                     
// octal
                        )?
                |       ('1'..'9') ('0'..'9')*  
{isDecimal=true;}               // non-zero decimal

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030923/eb958f9f/attachment.html
From sasecp at wnt.sas.com  Wed Sep 24 13:26:43 2003
From: sasecp at wnt.sas.com (Ernest Pasour)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] java.g NUM_INT
Message-ID: <8D966D6B75EB7F47AA300241BF2E1D0C08CCE7@merc17.na.sas.com>

When I tried sticking this fix in, it allowed a number like 083 to pass through as an Integer.  I'm not sure exactly why no error is thrown though.  Do you see that behavior?

-----Original Message-----
From: Ray Waldin [mailto:ray@waldin.net] 
Sent: Tuesday, September 23, 2003 7:38 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] java.g NUM_INT


I sent this earlier and it never showed up on the list, so here it is 
again...


Hi everyone,

I'm new to this group, so apologies if this issue has been raised 
before.  I wasn't able to find any reference to it in the archives.  In 
java.g (Version 1.20) it seems that the NUM_INT rule is broken for cases 
of floats and doubles which have leading zeros and contain the digits 8 
or 9 in the decimal integer or mantissa part.

While the following cases work (by sheer luck, I believe):

> 07.0f
> 06d
> 07e0

these do not:

> 08.0f
> 09d
> 08e0

A quick fix can be found below.

-Ray


--- old/java.g  2003-09-23 15:20:05.000000000 -0700
+++ java.g      2003-09-23 15:21:28.000000000 -0700
@@ -1234,6 +1234,7 @@
                                        }
                                :       HEX_DIGIT
                                )+
+                       |       (('0'..'9')+ 
('.'|EXPONENT|FLOAT_SUFFIX|)) => ('0'..'9')+   // float or double with 
leading zero
                        |       
('0'..'7')+                                                                     
// octal
                        )?
                |       ('1'..'9') ('0'..'9')*  
{isDecimal=true;}               // non-zero decimal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ray at waldin.net  Wed Sep 24 14:17:06 2003
From: ray at waldin.net (Ray Waldin)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] java.g NUM_INT
In-Reply-To: <8D966D6B75EB7F47AA300241BF2E1D0C08CCE7@merc17.na.sas.com>
References: <8D966D6B75EB7F47AA300241BF2E1D0C08CCE7@merc17.na.sas.com>
Message-ID: <3F7209D2.9050700@waldin.net>

Yes.  There appears to be an extraneous '|' following 'FLOAT_SUFFIX' in 
the predicate causing it to return true in all cases.  The corrected 
patch is:

--- old/java.g  2003-09-23 15:20:05.000000000 -0700
+++ java.g      2003-09-24 14:10:18.000000000 -0700
@@ -1234,6 +1234,7 @@
                                        }
                                :       HEX_DIGIT
                                )+
+                       |       (('0'..'9')+ 
('.'|EXPONENT|FLOAT_SUFFIX)) => ('0'..'9')+   //float or double with 
leading zero
                        |       
('0'..'7')+                                    // octal
                        )?
                |       ('1'..'9') ('0'..'9')*  
{isDecimal=true;}              // non-zero decimal

Sorry for any confusion this may have caused.

-Ray

Ernest Pasour wrote:

>When I tried sticking this fix in, it allowed a number like 083 to pass through as an Integer.  I'm not sure exactly why no error is thrown though.  Do you see that behavior?
>
>-----Original Message-----
>From: Ray Waldin [mailto:ray@waldin.net] 
>Sent: Tuesday, September 23, 2003 7:38 PM
>To: antlr-interest@yahoogroups.com
>Subject: [antlr-interest] java.g NUM_INT
>
>
>I sent this earlier and it never showed up on the list, so here it is 
>again...
>
>
>Hi everyone,
>
>I'm new to this group, so apologies if this issue has been raised 
>before.  I wasn't able to find any reference to it in the archives.  In 
>java.g (Version 1.20) it seems that the NUM_INT rule is broken for cases 
>of floats and doubles which have leading zeros and contain the digits 8 
>or 9 in the decimal integer or mantissa part.
>
>While the following cases work (by sheer luck, I believe):
>
>  
>
>>07.0f
>>06d
>>07e0
>>    
>>
>
>these do not:
>
>  
>
>>08.0f
>>09d
>>08e0
>>    
>>
>
>A quick fix can be found below.
>
>-Ray
>
>
>--- old/java.g  2003-09-23 15:20:05.000000000 -0700
>+++ java.g      2003-09-23 15:21:28.000000000 -0700
>@@ -1234,6 +1234,7 @@
>                                        }
>                                :       HEX_DIGIT
>                                )+
>+                       |       (('0'..'9')+ 
>('.'|EXPONENT|FLOAT_SUFFIX|)) => ('0'..'9')+   // float or double with 
>leading zero
>                        |       
>('0'..'7')+                                                                     
>// octal
>                        )?
>                |       ('1'..'9') ('0'..'9')*  
>{isDecimal=true;}               // non-zero decimal
>
>
>
> 
>
>Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
>
>
>
> 
>
>Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
>
>
>  
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030924/29c9249e/attachment.html
From open.zone at virgin.net  Wed Sep 24 22:14:17 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Problems while reusing Lexer/Parser/TreeParser instances
Message-ID: <bkttj9+l6vn@eGroups.com>

Hi,

I'm tinkering with the code below[1*] to support reuse of
Lexer/Parser/Treeparser instances with ANTLR/C#:

Issues:
1. I haven't tried this in a basic Lexer->Parser situation ;-)

2. Given a situation (a.k.a. pipeline) where Lexer1 and Lexer2 are
multiplexed using a TokenStreamSelector that then feeds a Parser, only
the first use of an instance of the pipeline is error-free. When
parsing the same file repeatedly, the pipeline reports unexpected
token errors on pass two and dies catastrophically on pass 3.

Any ideas?

I reset the state in (2) above as follows:
1. lexer1.resetState(<new-buffer-to-use>)
2. lexer2.resetText()
3. parser.resetState()

The TokenStreamSelector doesn't seem to need any tweaking.

***
Does (and how) the use of exotic Token classes like HiddenStreamToken
(sp?) affect reuse of L/P/T instances?

Cheers,

Micheal

------------------

[1*] Code excerpts below:


-----------------------------------------------------------
CharScanner.cs
-----------------------------------------------------------
520a523,529
> 		public virtual void resetState(InputBuffer ib)
> 		{
> 			text.Length = 0;
> 			traceDepth = 0;
> 			inputState.resetInput(ib);
> 		}
>

-----------------------------------------------------------
Parser.cs
-----------------------------------------------------------
283a284,289
> 		public virtual void resetState()
> 		{
> 			traceDepth = 0;
> 			inputState.reset();
> 		}
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sasecp at wnt.sas.com  Thu Sep 25 04:28:13 2003
From: sasecp at wnt.sas.com (Ernest Pasour)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] java.g NUM_INT
Message-ID: <8D966D6B75EB7F47AA300241BF2E1D0C02A006A5@merc17.na.sas.com>

Ah, I didn't notice the extra "|".  Thanks for posting this fix.

	-----Original Message-----
	From: Ray Waldin [mailto:ray@waldin.net] 
	Sent: Wednesday, September 24, 2003 5:17 PM
	To: antlr-interest@yahoogroups.com
	Subject: Re: [antlr-interest] java.g NUM_INT
	
	
	Yes.  There appears to be an extraneous '|' following 'FLOAT_SUFFIX' in the predicate causing it to return true in all cases.  The corrected patch is:
	
	--- old/java.g  2003-09-23 15:20:05.000000000 -0700
	+++ java.g      2003-09-24 14:10:18.000000000 -0700
	@@ -1234,6 +1234,7 @@
	                                        }
	                                :       HEX_DIGIT
	                                )+
	+                       |       (('0'..'9')+ ('.'|EXPONENT|FLOAT_SUFFIX)) => ('0'..'9')+   //float or double with leading zero
	                        |       ('0'..'7')+                                    // octal
	                        )?
	                |       ('1'..'9') ('0'..'9')*  {isDecimal=true;}              // non-zero decimal
	
	Sorry for any confusion this may have caused.
	
	-Ray 
	
	Ernest Pasour wrote:
	

		When I tried sticking this fix in, it allowed a number like 083 to pass through as an Integer.  I'm not sure exactly why no error is thrown though.  Do you see that behavior?
		
		-----Original Message-----
		From: Ray Waldin [mailto:ray@waldin.net] 
		Sent: Tuesday, September 23, 2003 7:38 PM
		To: antlr-interest@yahoogroups.com
		Subject: [antlr-interest] java.g NUM_INT
		
		
		I sent this earlier and it never showed up on the list, so here it is 
		again...
		
		
		Hi everyone,
		
		I'm new to this group, so apologies if this issue has been raised 
		before.  I wasn't able to find any reference to it in the archives.  In 
		java.g (Version 1.20) it seems that the NUM_INT rule is broken for cases 
		of floats and doubles which have leading zeros and contain the digits 8 
		or 9 in the decimal integer or mantissa part.
		
		While the following cases work (by sheer luck, I believe):
		
		  

			07.0f
			06d
			07e0
			    

		
		these do not:
		
		  

			08.0f
			09d
			08e0
			    

		
		A quick fix can be found below.
		
		-Ray
		
		
		--- old/java.g  2003-09-23 15:20:05.000000000 -0700
		+++ java.g      2003-09-23 15:21:28.000000000 -0700
		@@ -1234,6 +1234,7 @@
		                                        }
		                                :       HEX_DIGIT
		                                )+
		+                       |       (('0'..'9')+ 
		('.'|EXPONENT|FLOAT_SUFFIX|)) => ('0'..'9')+   // float or double with 
		leading zero
		                        |       
		('0'..'7')+                                                                     
		// octal
		                        )?
		                |       ('1'..'9') ('0'..'9')*  
		{isDecimal=true;}               // non-zero decimal
		
		
		
		 
		
		Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
		
		
		
		 
		
		Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
		
		
		  



	Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service <http://docs.yahoo.com/info/terms/> . 
	

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030925/4ed8932f/attachment.html
From parrt at antlr.org  Thu Sep 25 09:41:23 2003
From: parrt at antlr.org (Terence Parr)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] C# grammar
In-Reply-To: <NEBBKKODFMOCLEEIOELFKENMCMAA.gackle@shaw.ca>
Message-ID: <1958FD38-EF77-11D7-8646-000A95891192@antlr.org>

Hi Daniel,

Any luck finishing this up? :)  Need any help?

Ter

On Monday, September 8, 2003, at 09:10 PM, Daniel Gackle wrote:

> I've written an ANTLR grammar for the C# language. Would anyone be
> interested in testing it and sending feedback?
>
> The grammar is 95% complete. What I need is a catalyst, something to
> kickstart me into finishing it up and releasing it to the public 
> domain.
> Some feedback would help with this, so if anyone in the ANTLR community
> would find a C# grammar useful and would like to try it out, please 
> e-mail
> me privately.
>
> Daniel Gackle
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gackle at shaw.ca  Thu Sep 25 18:51:39 2003
From: gackle at shaw.ca (Daniel Gackle)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Re: C# grammar
In-Reply-To: <1064517689.261.62492.m12@yahoogroups.com>
Message-ID: <NEBBKKODFMOCLEEIOELFCEBECNAA.gackle@shaw.ca>

Ter,

I got a half dozen or so replies from people interested in trying it out.
Getting it to them is just a matter of me finding some time... perhaps this
weekend.

Thanks for pinging me about this. The reason I posted about it was to shame
myself into getting it done. :)

Daniel

_______________________________________________________________________
________________________________________________________________________

Message: 5
   Date: Thu, 25 Sep 2003 09:41:23 -0700
   From: Terence Parr <parrt@antlr.org>
Subject: Re: C# grammar

Hi Daniel,

Any luck finishing this up? :)  Need any help?

Ter

On Monday, September 8, 2003, at 09:10 PM, Daniel Gackle wrote:

> I've written an ANTLR grammar for the C# language. Would anyone be
> interested in testing it and sending feedback?
>
> The grammar is 95% complete. What I need is a catalyst, something to
> kickstart me into finishing it up and releasing it to the public
> domain.
> Some feedback would help with this, so if anyone in the ANTLR community
> would find a C# grammar useful and would like to try it out, please
> e-mail
> me privately.
>
> Daniel Gackle
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From andrew at adersoftware.com  Thu Sep 25 19:06:37 2003
From: andrew at adersoftware.com (Andrew Deren)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Re: C# grammar
In-Reply-To: <NEBBKKODFMOCLEEIOELFCEBECNAA.gackle@shaw.ca>
Message-ID: <200309252003226.SM00484@andrew>

Count me in too. Email andrew@adersoftware.com
 

-----Original Message-----
From: Daniel Gackle [mailto:gackle@shaw.ca] 
Sent: Thursday, September 25, 2003 8:52 PM
To: antlr-interest@yahoogroups.com

Ter,

I got a half dozen or so replies from people interested in trying it out.
Getting it to them is just a matter of me finding some time... perhaps this
weekend.

Thanks for pinging me about this. The reason I posted about it was to shame
myself into getting it done. :)

Daniel

_______________________________________________________________________
________________________________________________________________________

Message: 5
   Date: Thu, 25 Sep 2003 09:41:23 -0700
   From: Terence Parr <parrt@antlr.org>
Subject: Re: C# grammar

Hi Daniel,

Any luck finishing this up? :)  Need any help?

Ter

On Monday, September 8, 2003, at 09:10 PM, Daniel Gackle wrote:

> I've written an ANTLR grammar for the C# language. Would anyone be
> interested in testing it and sending feedback?
>
> The grammar is 95% complete. What I need is a catalyst, something to
> kickstart me into finishing it up and releasing it to the public
> domain.
> Some feedback would help with this, so if anyone in the ANTLR community
> would find a C# grammar useful and would like to try it out, please
> e-mail
> me privately.
>
> Daniel Gackle
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 






 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Anthony.Youngman at ECA-International.com  Fri Sep 26 03:47:00 2003
From: Anthony.Youngman at ECA-International.com (Anthony W Youngman)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Floats and Integers
Message-ID: <C7FE35004D40FD45AA342991B88CE40409A740@lnml1.eca-international.local>

In my grammar, I've got this:
 
NUMBER_LITERAL : ( INT (DECIMAL (INT)?)? | DECIMAL INT ) ;

Presumably you need something like
 
NUMBER : ( INT | FLOAT ) ;
 
maybe protected. Dunno what you're trying to do, but that should work.
 
Cheers,
Wol

-----Original Message-----
From: Tom Zagotta [mailto:tzagotta1@sienasystems.com] 
Sent: 23 September 2003 16:14
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Floats and Integers


Hello everyone,
 
I have a grammar that needs to accept both floating-point numbers and
integers. A simplified form of the grammar (whitespace skipping not
shown) is like this:

class TestParser extends Parser;
abc:"ABC" FLOAT INT;
 
class TestLexer extends Lexer;
INT: ('0'..'9')+;
FLOAT: INT '.' INT;

The problem I have is with input like this:

ABC 3 5

In this case, I need the "3" to match the FLOAT token for the abc rule.
It seems that the only way to do this is to change the rule to the
following:

abc: "ABC" (FLOAT|INT) INT;

But the problem with that is that there are a really large number of
such rules in my grammar.
 
Is there a better/alternative way to handle this? Ideally I'd like to
define a token that can match both int and float, but I still need a
separate token for int. It seems this is not possible.
 
Thanks in advance,
 
- Tom
 

Your use of Yahoo! Groups is subject to the Yahoo!
<http://docs.yahoo.com/info/terms/> Terms of Service. 





***********************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

***********************************************************************************

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030926/5a8a3aa8/attachment.html
From zhangcharles at yahoo.com  Fri Sep 26 10:27:40 2003
From: zhangcharles at yahoo.com (Charles Zhang)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] java grammar problems
In-Reply-To: <3AC103F1B7EEEC48A855ACB1D2819E9106AA3E@rock-corpmail.microfocus.com>
Message-ID: <20030926172740.94413.qmail@web14207.mail.yahoo.com>

Hi, Jim, thanks for the response. My tree walker fails
for the following code:
interface I{
   interface InnerI 
   {
   }
}
The interfaceBlock rule of the java.tree.g does not
contain a typedefinition. It shouldn't anyways. It
should just contain a interfaceDefinition. But I'm not
a grammar expert and scared of making changes. Could
you show me how to solve this problem? 
Thanks.

Charles
--- Jim O'Connor <Jim.O'Connor@microfocus.com> wrote:
>  Can you give a short example of what doesn't work?
>   Have you tried putting a printf in the tree
> grammar?
> 
> 
> typeDefinition
> : #(CLASS_DEF modifiers IDENT extendsClause
> implementsClause objBlock )
>   #(INTERFACE_DEF modifiers IDENT extendsClause
> interfaceBlock )
>      System.out.println("Interface Definition " +
> #IDENT.getText());}
> 	;
>   
> typeDefinition is called recursively by a few
> different rules.  Unless you
> have an example of an inner function that sidesteps
> this grammar, the
> interface definition should come through here.  
> 
> Let me know.
> Jim
> 
> 
> -----Original Message-----
> From: zhangcharles
> To: antlr-interest@yahoogroups.com
> Sent: 9/21/03 6:33 PM
> Subject: [antlr-interest] java grammar problems
> 
> I posted this a month ago. I think it got lost in
> the message pond.
> 
> ------------------------------------- 
> Hi, the current java.tree.g grammar doesn't seem to
> take inner 
> interface definition into consideration. Any advices
> of how to add 
> it since I'm not a grammar expert. Thanks a lot.
> 
> Charles
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 
>
________________________________________________________________________
> This e-mail has been scanned for viruses by MCI's
> Internet Managed
> Scanning Services - powered by MessageLabs. For
> further information
> visit http://www.mci.com
>
________________________________________________________________________


=====
Yawn !!

__________________________________
Do you Yahoo!?
The New Yahoo! Shopping - with improved product search
http://shopping.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ray at waldin.net  Fri Sep 26 16:36:11 2003
From: ray at waldin.net (Ray Waldin)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] java grammar problems
In-Reply-To: <20030926172740.94413.qmail@web14207.mail.yahoo.com>
References: <20030926172740.94413.qmail@web14207.mail.yahoo.com>
Message-ID: <3F74CD6B.60306@waldin.net>

Charles Zhang wrote:

>The interfaceBlock rule of the java.tree.g does not
>contain a typedefinition. It shouldn't anyways. It
>should just contain a interfaceDefinition.
>

Hi Charles,

According to 
http://java.sun.com/docs/books/jls/second_edition/html/interfaces.doc.html#236431 
an interface can contain both interface and class declarations, as in:

interface foo {
    class bar { }
    interface baz { }
}

>But I'm not
>a grammar expert and scared of making changes. Could
>you show me how to solve this problem? 
>  
>

To fix the java.tree.g grammar, just add typeDefinition to the 
interfaceBlock production so it looks like this:

interfaceBlock
    :    #(    OBJBLOCK
            (    methodDecl
            |    variableDef
            |    typeDefinition
            )*
        )
    ;

Hope that helps.

- Ray
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030926/8d0cceea/attachment.html
From open.zone at virgin.net  Sat Sep 27 09:11:28 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Re: Problems while reusing Lexer/Parser/TreeParser instances
In-Reply-To: <bkttj9+l6vn@eGroups.com>
Message-ID: <bl4crg+3b6b@eGroups.com>

Would someone please post working code for reusing
Lexer/Parser/TreeParser instances please?. It can be in any of C++,
Java and C#. 

Cheers

Micheal

> Hi,
> 
> I'm tinkering with the code below[1*] to support reuse of
> Lexer/Parser/Treeparser instances with ANTLR/C#:
> 
> Issues:
> 1. I haven't tried this in a basic Lexer->Parser situation ;-)
> 
> 2. Given a situation (a.k.a. pipeline) where Lexer1 and Lexer2 are
> multiplexed using a TokenStreamSelector that then feeds a Parser, only
> the first use of an instance of the pipeline is error-free. When
> parsing the same file repeatedly, the pipeline reports unexpected
> token errors on pass two and dies catastrophically on pass 3.
> 
> Any ideas?
> 
> I reset the state in (2) above as follows:
> 1. lexer1.resetState(<new-buffer-to-use>)
> 2. lexer2.resetText()
> 3. parser.resetState()
> 
> The TokenStreamSelector doesn't seem to need any tweaking.
> 
> ***
> Does (and how) the use of exotic Token classes like HiddenStreamToken
> (sp?) affect reuse of L/P/T instances?
> 
> Cheers,
> 
> Micheal
> 
> ------------------
> 
> [1*] Code excerpts below:
> 
> 
> -----------------------------------------------------------
> CharScanner.cs
> -----------------------------------------------------------
> 520a523,529
> > 		public virtual void resetState(InputBuffer ib)
> > 		{
> > 			text.Length = 0;
> > 			traceDepth = 0;
> > 			inputState.resetInput(ib);
> > 		}
> >
> 
> -----------------------------------------------------------
> Parser.cs
> -----------------------------------------------------------
> 283a284,289
> > 		public virtual void resetState()
> > 		{
> > 			traceDepth = 0;
> > 			inputState.reset();
> > 		}
> >


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at antlr.org  Sat Sep 27 10:25:48 2003
From: parrt at antlr.org (Terence Parr)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Re: Problems while reusing Lexer/Parser/TreeParser instances
In-Reply-To: <bl4crg+3b6b@eGroups.com>
Message-ID: <A2C11BE0-F10F-11D7-B56F-000A95891192@antlr.org>

Seems like there will be a file closing/rewinding issue now that you 
mention it ;)  Somehow the actual file must be reset not just the 
internal state.

Ter


On Saturday, September 27, 2003, at 09:11 AM, micheal_jor wrote:

> Would someone please post working code for reusing
> Lexer/Parser/TreeParser instances please?. It can be in any of C++,
> Java and C#.
>
> Cheers
>
> Micheal
>
>> Hi,
>>
>> I'm tinkering with the code below[1*] to support reuse of
>> Lexer/Parser/Treeparser instances with ANTLR/C#:
>>
>> Issues:
>> 1. I haven't tried this in a basic Lexer->Parser situation ;-)
>>
>> 2. Given a situation (a.k.a. pipeline) where Lexer1 and Lexer2 are
>> multiplexed using a TokenStreamSelector that then feeds a Parser, only
>> the first use of an instance of the pipeline is error-free. When
>> parsing the same file repeatedly, the pipeline reports unexpected
>> token errors on pass two and dies catastrophically on pass 3.
>>
>> Any ideas?
>>
>> I reset the state in (2) above as follows:
>> 1. lexer1.resetState(<new-buffer-to-use>)
>> 2. lexer2.resetText()
>> 3. parser.resetState()
>>
>> The TokenStreamSelector doesn't seem to need any tweaking.
>>
>> ***
>> Does (and how) the use of exotic Token classes like HiddenStreamToken
>> (sp?) affect reuse of L/P/T instances?
>>
>> Cheers,
>>
>> Micheal
>>
>> ------------------
>>
>> [1*] Code excerpts below:
>>
>>
>> -----------------------------------------------------------
>> CharScanner.cs
>> -----------------------------------------------------------
>> 520a523,529
>>> 		public virtual void resetState(InputBuffer ib)
>>> 		{
>>> 			text.Length = 0;
>>> 			traceDepth = 0;
>>> 			inputState.resetInput(ib);
>>> 		}
>>>
>>
>> -----------------------------------------------------------
>> Parser.cs
>> -----------------------------------------------------------
>> 283a284,289
>>> 		public virtual void resetState()
>>> 		{
>>> 			traceDepth = 0;
>>> 			inputState.reset();
>>> 		}
>>>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Sat Sep 27 12:58:00 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Re: Problems while reusing Lexer/Parser/TreeParser instances
In-Reply-To: <A2C11BE0-F10F-11D7-B56F-000A95891192@antlr.org>
Message-ID: <bl4q48+u3u3@eGroups.com>

In my scheme, the resetState() method for Lexers takes a new
Stream/InputBuffer. The actual input file/stream/buffer doesn't have
to be reset-able, just the internal state of the Lexer. Of course the
"new" stream/InputBuffer may have been opened on the same file as the
current one.

Do you have code that successfully supports Lexer/Parser/TreeParser reuse?

Cheers,

Micheal

> Seems like there will be a file closing/rewinding issue now that you 
> mention it ;)  Somehow the actual file must be reset not just the 
> internal state.
> 
> Ter
> 
> 
> On Saturday, September 27, 2003, at 09:11 AM, micheal_jor wrote:
> 
> > Would someone please post working code for reusing
> > Lexer/Parser/TreeParser instances please?. It can be in any of C++,
> > Java and C#.
> >
> > Cheers
> >
> > Micheal
> >
> >> Hi,
> >>
> >> I'm tinkering with the code below[1*] to support reuse of
> >> Lexer/Parser/Treeparser instances with ANTLR/C#:
> >>
> >> Issues:
> >> 1. I haven't tried this in a basic Lexer->Parser situation ;-)
> >>
> >> 2. Given a situation (a.k.a. pipeline) where Lexer1 and Lexer2 are
> >> multiplexed using a TokenStreamSelector that then feeds a Parser,
only
> >> the first use of an instance of the pipeline is error-free. When
> >> parsing the same file repeatedly, the pipeline reports unexpected
> >> token errors on pass two and dies catastrophically on pass 3.
> >>
> >> Any ideas?
> >>
> >> I reset the state in (2) above as follows:
> >> 1. lexer1.resetState(<new-buffer-to-use>)
> >> 2. lexer2.resetText()
> >> 3. parser.resetState()
> >>
> >> The TokenStreamSelector doesn't seem to need any tweaking.
> >>
> >> ***
> >> Does (and how) the use of exotic Token classes like HiddenStreamToken
> >> (sp?) affect reuse of L/P/T instances?
> >>
> >> Cheers,
> >>
> >> Micheal
> >>
> >> ------------------
> >>
> >> [1*] Code excerpts below:
> >>
> >>
> >> -----------------------------------------------------------
> >> CharScanner.cs
> >> -----------------------------------------------------------
> >> 520a523,529
> >>> 		public virtual void resetState(InputBuffer ib)
> >>> 		{
> >>> 			text.Length = 0;
> >>> 			traceDepth = 0;
> >>> 			inputState.resetInput(ib);
> >>> 		}
> >>>
> >>
> >> -----------------------------------------------------------
> >> Parser.cs
> >> -----------------------------------------------------------
> >> 283a284,289
> >>> 		public virtual void resetState()
> >>> 		{
> >>> 			traceDepth = 0;
> >>> 			inputState.reset();
> >>> 		}
> >>>
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/
> >
> >
> >
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at antlr.org  Sat Sep 27 13:32:31 2003
From: parrt at antlr.org (Terence Parr)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Re: Problems while reusing Lexer/Parser/TreeParser instances
In-Reply-To: <bl4q48+u3u3@eGroups.com>
Message-ID: <B7F0CED2-F129-11D7-B56F-000A95891192@antlr.org>


On Saturday, September 27, 2003, at 12:58 PM, micheal_jor wrote:

> In my scheme, the resetState() method for Lexers takes a new
> Stream/InputBuffer. The actual input file/stream/buffer doesn't have
> to be reset-able, just the internal state of the Lexer. Of course the
> "new" stream/InputBuffer may have been opened on the same file as the
> current one.
>
> Do you have code that successfully supports Lexer/Parser/TreeParser 
> reuse?

Can't think of any off-hand...I'd have to generate an example.  
Unfortunately, I'm hip-deep building slides for my StringTemplate 
lecture on Tuesday. :(

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at antlr.org  Sat Sep 27 13:38:18 2003
From: parrt at antlr.org (Terence Parr)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] giving lecture at USF on StringTemplate Tue 30 Sept at noon
Message-ID: <87179D72-F12A-11D7-B56F-000A95891192@antlr.org>

Howdy,

In the future, I'll be releasing some highly groovy output template 
code-generation stuff based upon my work generating dynamic webpages 
for jguru, peerscope, antlr etc...  The template engine, 
StringTemplate, is a small library that enforces strict separation of 
model and view (contrary to just about every other engine).  Release of 
the library under BSD license is imminent.

If you're in the San Francisco area and would like to come to the talk 
(part of our special lecture series) or just to say howdy...let me 
know.  It's at noon for an hour this coming Tuesday the 30th of 
September in our fancy $2.5M lecture room, Harney 235, at University of 
San Francisco.

Hope to see you there,
Terence
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Sun Sep 28 14:22:32 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Re: Problems while reusing Lexer/Parser/TreeParser instances
In-Reply-To: <bl4q48+u3u3@eGroups.com>; from open.zone@virgin.net on Sat, Sep 27, 2003 at 07:58:00PM -0000
References: <A2C11BE0-F10F-11D7-B56F-000A95891192@antlr.org> <bl4q48+u3u3@eGroups.com>
Message-ID: <20030928232232.A19049@cs.utwente.nl>

Hi,

On Sat, Sep 27, 2003 at 07:58:00PM -0000, micheal_jor wrote:
> In my scheme, the resetState() method for Lexers takes a new
> Stream/InputBuffer. The actual input file/stream/buffer doesn't have
> to be reset-able, just the internal state of the Lexer. Of course the
> "new" stream/InputBuffer may have been opened on the same file as the
> current one.
> 
> Do you have code that successfully supports Lexer/Parser/TreeParser reuse?

There should be C++ versions in the archive if I do not forget I'll post
tomorrow.

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  There are 10 kinds of people - those that understand binary and
  those that don't. --- Unknown


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Sun Sep 28 15:48:03 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Re: Problems while reusing Lexer/Parser/TreeParser instances
In-Reply-To: <20030928232232.A19049@cs.utwente.nl>
Message-ID: <bl7of3+orlr@eGroups.com>

> > Do you have code that successfully supports
Lexer/Parser/TreeParser reuse?
> 
> There should be C++ versions in the archive if I do not forget I'll post
> tomorrow.
> 
> Ric
> -- 

Hi Ric,

Thanks for the offer but I've fixed this now. It was just that some of
the other TokenStream implementations had state that needed resetting
too...

I remember seeing a few posts that covered the reuse of
Lexers/Parsers/TreeParsers in basic Lexer->Parser->TreeParser
configurations.

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From nico123 at adinet.com.uy  Mon Sep 29 17:17:01 2003
From: nico123 at adinet.com.uy (Nico)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Smalltalk-80 Grammar
Message-ID: <004b01c386e8$2ca5bda0$0200a8c0@viper2000>

Hi, is anybody working or has a smalltalk-80 grammar for antlr?
I need it for the university. 

Thanks in advance.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030929/03ab758a/attachment.html
From sunshine at public.kherson.ua  Tue Sep 30 04:12:40 2003
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:15:57 2004
Subject: [PROBLEM] Grammar is too big for Visual C++ 7 ?
Message-ID: <BB9F3FD8.25DAB%sunshine@public.kherson.ua>

Hi Guys,

We have stick into problem that our file of our Valentina SQL grammar
        VSQL_TreeParser.cpp

Generated by ANTLR, is probably so big, that Visual 7
Do not include some symbols into .obj file and later generate link error
        "unresolved external symbols"

CodeWarrior still compile this file with no problems.

This bring us to 2 questions/issues/ideas:

1) anybody know options to say Visual use bigger symbol tables?

2) Terr, may be there is sense add to ANTLR option split generated functions
in few files somehow ?

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------

From sunshine at public.kherson.ua  Tue Sep 30 04:12:40 2003
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] [PROBLEM] Grammar is too big for Visual C++ 7 ?
Message-ID: <BB9F3FD8.25DAB%sunshine@public.kherson.ua>

Hi Guys,

We have stick into problem that our file of our Valentina SQL grammar
        VSQL_TreeParser.cpp

Generated by ANTLR, is probably so big, that Visual 7
Do not include some symbols into .obj file and later generate link error
        "unresolved external symbols"

CodeWarrior still compile this file with no problems.

This bring us to 2 questions/issues/ideas:

1) anybody know options to say Visual use bigger symbol tables?

2) Terr, may be there is sense add to ANTLR option split generated functions
in few files somehow ?

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From heller at cnsystems.at  Tue Sep 30 04:19:49 2003
From: heller at cnsystems.at (arnulfheller)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Re: header section - include files in lexers and parsers generated by the c++ code gen
In-Reply-To: <20030910111233.E27584@cs.utwente.nl>
Message-ID: <blbosl+p1kb@eGroups.com>

Hi Ric,




I found a more convenient way to achieve this: simply put 




header "pre_include_hpp" {


	#ifndef PRECOMPILEDHEADERS


}




header "post_include_hpp" {


	#endif // PRECOMPILEDHEADERS


}




header "pre_include_cpp" {


	#include "StdAfx.h"


}




in your grammar file and include the appropriate headers in stdafx.h




cheers,


arnulf



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sunshine at public.kherson.ua  Tue Sep 30 05:37:25 2003
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] [PROBLEM] Grammar is too big for Visual C++
	7 ?
In-Reply-To: <BB9F3FD8.25DAB%sunshine@public.kherson.ua>
Message-ID: <BB9F53B5.25DC3%sunshine@public.kherson.ua>

on 9/30/03 2:12 PM, Ruslan Zasukhin at sunshine@public.kherson.ua wrote:

Forget it.

Stupid visual do not understand files with Mac line ending.

I just wonder how we did get that file :-)


> Hi Guys,
> 
> We have stick into problem that our file of our Valentina SQL grammar
>       VSQL_TreeParser.cpp
> 
> Generated by ANTLR, is probably so big, that Visual 7
> Do not include some symbols into .obj file and later generate link error
>       "unresolved external symbols"
> 
> CodeWarrior still compile this file with no problems.
> 
> This bring us to 2 questions/issues/ideas:
> 
> 1) anybody know options to say Visual use bigger symbol tables?
> 
> 2) Terr, may be there is sense add to ANTLR option split generated functions
> in few files somehow ?

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Tue Sep 30 05:53:48 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Re: [PROBLEM] Grammar is too big for Visual C++ 7 ?
In-Reply-To: <BB9F3FD8.25DAB%sunshine@public.kherson.ua>
Message-ID: <blbucs+fsm0@eGroups.com>

Hi Ruslan,

> Hi Guys,
> 
> We have stick into problem that our file of our Valentina SQL grammar
>         VSQL_TreeParser.cpp
> 
> Generated by ANTLR, is probably so big, that Visual 7.....

<SNIP>

You may want to investigate the grammar-level code generation options:
a. codeGenBitsetTestThreshold and,
b. codeGenMakeSwitchThreshold

Option (a) in particular can shrink the size of generated code as it
controls the threshold for replacing those long if-else-if comparisons
with compact BitSet tests.

> This bring us to 2 questions/issues/ideas:
> 
> 1) anybody know options to say Visual use bigger symbol tables?
> 
> 2) Terr, may be there is sense add to ANTLR option split generated
functions
> in few files somehow ?

I will be probably be adding feature (2) into C# code-generation in
the distant near future using partial types. Of course C++ (with a
little help from the out-of-favour preprocessor) already "supports"
partial types with code like:

class GeneratedClass
{
...
#include "partial_decls_1.h"
#include "partial_decls_2.h"
#include "partial_decls_3.h"
...
}; 


Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From cesar at ciencias.unam.mx  Tue Sep 30 12:18:06 2003
From: cesar at ciencias.unam.mx (Cesar Octavio =?iso-8859-1?Q?L=F3pez?= Nataren)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] EcmaScript 262 3.Edition/Jscript .Net
Message-ID: <courier.3F79D6EE.000026C8@galadriel.fciencias.unam.mx>

Hello: 

I write to the list because I have a incomplete grammar, that I would really 
like to finish, I've looked for some time to fixed with no success, I
'm sure the gurus can help on this :-) 

Anyone interested? 

c?sar 

IM: cesarln@jabber.org

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From virantha at yahoo.com  Tue Sep 30 14:03:41 2003
From: virantha at yahoo.com (veekook)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Line number information for Tree Parser exceptions
Message-ID: <blcr3d+mvh1@eGroups.com>

Is there any way to augment exceptions thrown by the tree parser (eg 
MismatchedTokenException) to maintain line numbers?  I've subclassed 
CommonAST to include line numbers in my AST, but is there a method 
for getting at the line numbers for an offending rule from a catch 
block embedded in a tree grammar rule?  The following doesn't work 
because tree exceptions don't track line numbers.

rule: #(A B C) { ... }
exception
catch [antlr::MismatchedTokenException& ex] {
		cout << "Expecting blah on line" << ex.getLine();
}
}	



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


