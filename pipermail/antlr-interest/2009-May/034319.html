<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Skip subtree in tree grammar
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Skip%20subtree%20in%20tree%20grammar&In-Reply-To=%3C86403CA0939415448BCCB83855EFE09AA68009%40Bloodymary.ironwillgames.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034317.html">
   <LINK REL="Next"  HREF="034321.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Skip subtree in tree grammar</H1>
    <B>Sam Harwell</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Skip%20subtree%20in%20tree%20grammar&In-Reply-To=%3C86403CA0939415448BCCB83855EFE09AA68009%40Bloodymary.ironwillgames.com%3E"
       TITLE="[antlr-interest] Skip subtree in tree grammar">sharwell at pixelminegames.com
       </A><BR>
    <I>Tue May  5 10:08:23 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="034317.html">[antlr-interest] Skip subtree in tree grammar
</A></li>
        <LI>Next message: <A HREF="034321.html">[antlr-interest] Skip subtree in tree grammar
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34319">[ date ]</a>
              <a href="thread.html#34319">[ thread ]</a>
              <a href="subject.html#34319">[ subject ]</a>
              <a href="author.html#34319">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Martijn,

The state stack is unreliable in combination with semantic predicates and &quot;cannot&quot; be used in that manner. Instead you should use a construct like . or ^(IF .*) to skip the subtree in your walker.

Sam

-----Original Message-----
From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A> [mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>] On Behalf Of Martijn Reuvers
Sent: Tuesday, May 05, 2009 11:56 AM
To: Micha; <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
Subject: Re: [antlr-interest] Skip subtree in tree grammar

Hello Micheal,

Somehow we've managed to forget to include the antlr-list in our
conversation, so here the update and solution for the others.

I've used the stack solution (which I can probably use for other
conditionals too). It seems to work fine, I wrote the following
method:

 public boolean isContentEvaluable() {
    return phase &gt; 0 &amp;&amp; (isConditionalStackEmpty() || peekConditionalResult());
  }	

The method is used in function_content's rules and determines if each
rule should evaluate or not. As said the solution is backed by a stack
which is pushed/popped in @init and @after with boolean results.
Ignore the phase, which is not relevant for this solution.

Finally: I am still curious if you can skip a tree grammar subtree
altogether (the if statement in this mail conversation), so if someone
knows,  I'd love to hear that too!

Thanks for thinking along!

Martijn



On Tue, May 5, 2009 at 6:00 PM, Micha &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">micha-1 at fantasymail.de</A>&gt; wrote:
&gt;<i> On Tuesday 05 May 2009 17:39:55 you wrote:
</I>&gt;&gt;<i> Hi Michael,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks for your reply. Preferably I would just like to move the
</I>&gt;&gt;<i> treestream up to after the if-statement (if the value is false). But I
</I>&gt;&gt;<i> don't know how to calculate the proper index from here and to properly
</I>&gt;&gt;<i> pop/push it.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> With your solution you mean overread_function_content* contains the
</I>&gt;&gt;<i> same rules as function_content, except without any logic?
</I>&gt;<i>
</I>&gt;<i> yes
</I>&gt;<i>
</I>&gt;&gt;<i> Another thing I was thinking of but haven't tried yet, is to push the
</I>&gt;&gt;<i> conditional result on a stack and in function_content (its subrules),
</I>&gt;&gt;<i> peek the stack and if the stack is either empty (we're not in a
</I>&gt;&gt;<i> conditional check) or the top returns true - evaluate, else do
</I>&gt;&gt;<i> nothing. This might work, but I haven't tried it yet.
</I>&gt;<i>
</I>&gt;<i> that was another solution I thought about. I think this depends on the
</I>&gt;<i> grammar...
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> cheers
</I>&gt;<i> &#160;Michael
</I>&gt;<i>
</I>&gt;<i>
</I>
List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
Unsubscribe: <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034317.html">[antlr-interest] Skip subtree in tree grammar
</A></li>
	<LI>Next message: <A HREF="034321.html">[antlr-interest] Skip subtree in tree grammar
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34319">[ date ]</a>
              <a href="thread.html#34319">[ thread ]</a>
              <a href="subject.html#34319">[ subject ]</a>
              <a href="author.html#34319">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
