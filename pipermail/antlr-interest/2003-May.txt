From pete.forman at westerngeco.com  Thu May  1 01:55:50 2003
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] dfa-based lexers versus top-down antlr  lexers
In-Reply-To: <6B8CCE2D-7A62-11D7-BA37-000393BB647E@jguru.com>
References: <09a601c30b96$9fd85260$0200010a@walgelijk>
Message-ID: <5.1.1.1.2.20030501084428.022846b8@wgmail2.gatwick.eur.slb.com>

At 2003-04-29 09:48 -0700, Terence Parr wrote:
>Concerning the interface between parser / lexer, yes: it's simple:
>
>interface TokenStream {
>         public Token nextToken();
>}

Would it be worth developing a lexer with a second method?

     public void unget(int numTokens);

This would allow lexer switching from within the parser.  The first
lexer could push back the input it has consumed allowing the second
lexer to make a clean start.

The semantics of the method are closest to unget() in C++ istream.
There is little point in doing putback(Token) as in C++ istream or
unread(Token) as in Java PushbackReader as the Token will not in
itself contain enough information to reconstruct the input to the
lexer.

Implementation would probably require extra buffering at the input
to the lexer to support backtracking.  Most of the lexers that I've
deployed are working on string inputs which would suit this proposal.
Rather more work would be needed for non random access file inputs.
The amount of buffering probably ought to be limited explicitly with
unget() throwing an exception if too much backtracking is attempted.

Another approach to implementation would be to make Token a bit
heavier.  It might carry the array of characters that formed it,
including those of adjacent skipped tokens.  Then unread(Token) would
contain enough info to back up the input to the lexer using putback()
or unread().  An intermediate approach would have a buffer in the
lexer or its input and store a pair of indexes in the token.

One benefit mentioned is allowing lexer switching in the parser.
Another might be to allow switching to a different lexer when a parse
error is detected to allow more powerful recovery from that error.

-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu May  1 08:03:18 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Re: A way to access individual expressions s
	tore d in ELIST?
Message-ID: <170826586F3BD511910D0200C110AAA805402356@memail03.bco-home.com>

Keep a counter, or put them in your own list if you want to access them from
a list.

Monty

-----Original Message-----
From: rustydstone [mailto:rustydstone@yahoo.com]
Sent: Wednesday, April 30, 2003 6:35 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: A way to access individual expressions
store d in ELIST?


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> put a label on them:
> 
> elist
>        : #( ELIST (e:expression {/*do something with expression in this
> action*/})* )
>        ;

Thanks, but how do I refer to the 1st, 2nd, etc expressions in the elist?







 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From glindholm at yahoo.com  Thu May  1 08:06:25 2003
From: glindholm at yahoo.com (Greg Lindholm)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] dfa-based lexers versus top-down antlr lexers
In-Reply-To: <200304300949854.SM01108@CS>
Message-ID: <20030501150625.94245.qmail@web12401.mail.yahoo.com>

Sorry, these lexers are commercial (or plan to be) so I 
can't distribute them.  I took a look but couldn't 
find a simple example I could send you.  

But they are easy to create, all you have to do is implement 
the TokenStream interface which is one method nextToken().

For details of how you write a lexer you should read 
http://antlr.org/book/byhand.pdf

Then I would suggest take a look at the java code that gets
generated by some of the lexers in the antlr examples files.

Greg

--- Andrew Deren <andrew@adersoftware.com> wrote:
> I was going to build a hand coded lexer for my project, but couldn't
> fine
> much info on it. Can you please send me one of your lexers to look at
> so
> that I can figure how to do. If they are available of course and not
> commercial.
> Thanks a lot.
> Andrew
> 
> -----Original Message-----
> From: Greg Lindholm [mailto:glindholm@yahoo.com] 
> Sent: Wednesday, April 30, 2003 8:05 AM
> To: antlr-interest@yahoogroups.com
> 
> I've done a couple projects using ANTLR and have not yet 
> been able to use the lexer.  I've had to hand-craft my own 
> lexer's because of column positional token's issues.
> 
> I think it's a strength of ANTLR that you have multiple 
> choices on how to build a lexer. 
> 
> Adding a dfa-based lexer option is a great idea.
> (I wouldn't change the current lexer, I would add second 
> style.)
> 
> 
> --- Terence Parr <parrt@jguru.com> wrote:
> > Does anyone have an opinion concerning ANTLR's construction of
> > top-down 
> > lexers versus more traditional dfa-based state machine solutions?
> > 
> > I just got really irritated this week building the PostScript 
> > interpreter due to lexer lookahead issues.
> > 
> > PROS
> > 
> > Very readable lexers.  ('0'..'9')+ turns into a while look you can 
> > debug/read.
> > 
> > Very powerful...can literally parse (because you can call other
> > rules) 
> > in the lexer.
> > 
> > Consistent with all other antlr-generated recognizers.  Lexers, 
> > parsers, tree parsers all use the same analyzer and code generator.
> > 
> > Can execute an action anywhere during the recognition of a
> > token...with 
> > DFA based systems you have to wait until you know the complete
> token 
> > has been match.
> > 
> > CONS
> > 
> > Some lexer rules are a huge pain to specify in ANTLR because of the
> 
> > limitations of lookahead.
> > 
> > Lexer rules really confuse people since there are lots of special
> > cases 
> > in the lookahead and stuff.
> > 
> > I wonder if a compromise is possible.  Use a DFA-based decision to 
> > determine which rule will match; can do arbitrary lookahead and all
> > of 
> > that automatically to make a correct decision.  The problem is
> speed:
> > 
> > you'd parse twice each token.  Perhaps I can simply combine all
> rules
> > 
> > with common left edges automatically to avoid weirdness.  For
> > example:
> > 
> > INT : ('0'..'9')+ ;
> > 
> > FLOAT : ('0'..'9')+ ('.' ('0'..'9')*)? | '.' ('0'..'9')+ ;
> > 
> > could be turned into a combine rule by the system:
> > 
> > INT_FLOAT
> > 	:	('0'..'9')+ ('.' ('0'..'9')*)?
> > 	|	'.' ('0'..'9')+
> > 	;
> > 
> > or whatever.
> > 
> > Still, my lookahead computations are really twisted for lexical
> rules
> > 
> > when you can see past end of a rule--literally any character can
> > follow 
> > a token (if you consider erroneous input).
> > 
> > ANYWAY, who has thoughts on this?  I'd like thoughts also from
> people
> > 
> > with *no* experience using DFA-based tools like lex/flex.  Do ANTLR
> 
> > lexers seem "natural"?
> > 
> > Thanks!
> > Ter
> > --
> > Co-founder, http://www.jguru.com
> > Creator, ANTLR Parser Generator: http://www.antlr.org
> > Co-founder, http://www.peerscope.com link sharing, pure-n-simple
> > Lecturer in Comp. Sci., University of San Francisco
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
> 
> __________________________________
> Do you Yahoo!?
> The New Yahoo! Search - Faster. Easier. Bingo.
> http://search.yahoo.com
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo.
http://search.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mtiller at ford.com  Thu May  1 08:10:39 2003
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Re: A way to access individual expressions s
	 tore d in ELIST?
Message-ID: <AF02884D0976D311A014009027A8F1FB1FD54D3E@na1fcm10.dearborn.ford.com>

I see some potential confusion developing here.  Perhaps Mr. Stone understands the full implications of the solution provided but just in case he hasn't, I'll provide a bit of elaboration.

The original suggestion was as follows:

elist
  : #( ELIST (e:expression
                 {
                   /*do something with expression in this action*/
                 }
      )* )
  ;

There are two important features in this solution.  The first, and most obvious, is that the expression now has a label "e" that it can be referenced by.  The second is that there is now an action associated with the parsing of *EACH* expression.  In other words, the actions contained between the {}'s will be executed as each "e" is parsed (same name, new expression).

This is what Monty was getting at, i.e. if you want to operate on the list of all expressions that are matched you need to put them in your own list and then process them at the end of the rule (after all the "e"'s have been parsed).  If you just want to know which one you are operating on at any given time, you would use a counter and increment each time through the {}'s.

I apologize if this is being pedantic, but I just wanted to make sure Mr. Stone understood the issue completely.

--
Mike

> -----Original Message-----
> From: mzukowski@yci.com [mailto:mzukowski@yci.com]
> Sent: Thursday, May 01, 2003 11:03 AM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Re: A way to access individual 
> expressions
> s tore d in ELIST?
> 
> 
> Keep a counter, or put them in your own list if you want to 
> access them from
> a list.
> 
> Monty
> 
> -----Original Message-----
> From: rustydstone [mailto:rustydstone@yahoo.com]
> Sent: Wednesday, April 30, 2003 6:35 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: A way to access individual expressions
> store d in ELIST?
> 
> 
> --- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> > put a label on them:
> > 
> > elist
> >        : #( ELIST (e:expression {/*do something with 
> expression in this
> > action*/})* )
> >        ;
> 
> Thanks, but how do I refer to the 1st, 2nd, etc expressions 
> in the elist?
> 
> 
> 
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From glindholm at yahoo.com  Thu May  1 08:20:43 2003
From: glindholm at yahoo.com (Greg Lindholm)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] dfa-based lexers versus top-down antlr lexers
In-Reply-To: <597D426E-7B27-11D7-BA37-000393BB647E@jguru.com>
Message-ID: <20030501152043.28558.qmail@web12407.mail.yahoo.com>

Cool, this wasn't available when I needed it but I'll check it out next
time.

Does this mean that this predicate gets "hoisted" for testing before
entering the rule?

The related issue with positional tokens is often the rule is "anything
in columns x thru y",  the "anything" part causes ambiguous-ness
errors.  Will this {getColumn()==1}? predidate help with this?


--- Terence Parr <parrt@jguru.com> wrote:
> 
> On Wednesday, April 30, 2003, at 07:05  AM, Greg Lindholm wrote:
> 
> > I've done a couple projects using ANTLR and have not yet
> > been able to use the lexer.  I've had to hand-craft my own
> > lexer's because of column positional token's issues.
> 
> Hi :)
> 
> 2.7.2 allows predicates on the left edge of lexer rules so you can
> say:
> 
> {getColumn()==1}?
> 
> and have it work :)


__________________________________
Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo.
http://search.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu May  1 08:37:47 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] dfa-based lexers versus top-down antlr lexer
	s
Message-ID: <170826586F3BD511910D0200C110AAA805402358@memail03.bco-home.com>

Yes, it is hoisted up to the nextToken() rule.  

This is a start:

anythingBetween: {getColumn()>x && getColumn()<y}? .;

It'll be a bit more complicated if you want every character in those colums
at once (my rule gives you one character only).  You'll need another
predicate inside your ()+ rule.

Anyhow, look at the generated code and it should be easy to figure out how
it works.

Monty

-----Original Message-----
From: Greg Lindholm [mailto:glindholm@yahoo.com]
Sent: Thursday, May 01, 2003 8:21 AM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] dfa-based lexers versus top-down antlr
lexers


Cool, this wasn't available when I needed it but I'll check it out next
time.

Does this mean that this predicate gets "hoisted" for testing before
entering the rule?

The related issue with positional tokens is often the rule is "anything
in columns x thru y",  the "anything" part causes ambiguous-ness
errors.  Will this {getColumn()==1}? predidate help with this?


--- Terence Parr <parrt@jguru.com> wrote:
> 
> On Wednesday, April 30, 2003, at 07:05  AM, Greg Lindholm wrote:
> 
> > I've done a couple projects using ANTLR and have not yet
> > been able to use the lexer.  I've had to hand-craft my own
> > lexer's because of column positional token's issues.
> 
> Hi :)
> 
> 2.7.2 allows predicates on the left edge of lexer rules so you can
> say:
> 
> {getColumn()==1}?
> 
> and have it work :)


__________________________________
Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo.
http://search.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu May  1 08:44:40 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Parsing dynamically defined templates ?
Message-ID: <170826586F3BD511910D0200C110AAA805402359@memail03.bco-home.com>

This is very similar to structs in C.  Best bet is to parse them generically
and then use a tree parser to check the semantics that the use of a template
matches its definition.  The GCC grammar has rules for structs.  It does not
check semantics though.  http://www.codetransform.com/gcc.html

You're not going to be able to generate a specific parser for a particular
template.  ANTLR isn't that dynamic.

Monty

-----Original Message-----
From: blade_x123 [mailto:blade_x123@yahoo.com]
Sent: Wednesday, April 30, 2003 6:44 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Parsing dynamically defined templates ?


Hi,
 This may be a slightly long mail so please bear with me. In the file
format that I am trying to parse with antlr I have something called
Data Templates. These are defined at the beginning of each file, or
can also be a pre defined set. Here is an example

Template myTemplate {
DWORD myVar;
}
an instance of this template will look like this
myTemplate mT {
1.245;
}
also there can be array's which are comma seperated objects, as in
Template myArrayTemp {
array DWORD myArr[3];
}
which would be like
myArrayTemp {
1.0, 2.0, 3.0;
}
It gets more complicated :-(
a template can have an array of templates, for example
Template myTempArrTemp {
DWORD myVar;
array myArrayTemp bleh[3];
}
which would look like this
myTempArrTemp {
2.0;
1.0,2.0,3.0;,2.0,3.0,4.0;,5.0,6.0,7.0;;
}
the 2 semicolons at the end are needed to signify the end of a
template.

There are roughly 30-40 templates that are in common use. Also these
templates can be defined on the fly. How would I parse these ? A
general idea or tips would be helpful. I am assuming I have to do this
in my C++ code once I read in the template contents. Any ideas to
simplify my life ?

Thanks in advance,
Manju


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Trey.Spiva at embarcadero.com  Thu May  1 09:35:00 2003
From: Trey.Spiva at embarcadero.com (Trey Spiva)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] 
Message-ID: <5DEEF5A894731F4B92D58E2FC37EB28A22D334@etdema1.embarcadero.com>

Does any one know what the following message means?

warning: found optional path in nextToken()

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu May  1 09:58:41 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest]
Message-ID: <170826586F3BD511910D0200C110AAA80540235B@memail03.bco-home.com>

Maybe you have a non-protected lexer rule that can validly match nothing:

something: ('a')* ;

This could get you into an infinite loop.  You would need ()+ instead.
Every non-protected rule should match at least on character.

Monty

-----Original Message-----
From: Trey Spiva [mailto:Trey.Spiva@embarcadero.com]
Sent: Thursday, May 01, 2003 9:35 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] 


Does any one know what the following message means?

warning: found optional path in nextToken()

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Trey.Spiva at embarcadero.com  Thu May  1 10:00:18 2003
From: Trey.Spiva at embarcadero.com (Trey Spiva)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest]
Message-ID: <5DEEF5A894731F4B92D58E2FC37EB28A22D335@etdema1.embarcadero.com>

Thanks.

> -----Original Message-----
> From: mzukowski@yci.com [mailto:mzukowski@yci.com]
> Sent: Thursday, May 01, 2003 10:59 AM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest]
> 
> Maybe you have a non-protected lexer rule that can validly match
nothing:
> 
> something: ('a')* ;
> 
> This could get you into an infinite loop.  You would need ()+ instead.
> Every non-protected rule should match at least on character.
> 
> Monty
> 
> -----Original Message-----
> From: Trey Spiva [mailto:Trey.Spiva@embarcadero.com]
> Sent: Thursday, May 01, 2003 9:35 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest]
> 
> 
> Does any one know what the following message means?
> 
> warning: found optional path in nextToken()
> 
> 
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rustydstone at yahoo.com  Thu May  1 10:14:33 2003
From: rustydstone at yahoo.com (rustydstone)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Re: A way to access individual expressions stored in ELIST?
In-Reply-To: <AF02884D0976D311A014009027A8F1FB1FD54D3E@na1fcm10.dearborn.ford.com>
Message-ID: <b8rklp+73df@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Tiller, Michael (M.M.)"
<mtiller@f...> wrote:
[...]

Thanks to Michael, Monty. That was very helpful.




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Fri May  2 04:05:17 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] ISSUE: ANTLR only looks in output directory for XXXTokenTypes.txt file
Message-ID: <b8tjdd+gvjp@eGroups.com>

Hi,

Just came across this issue in ANTLR 2.7.2.

Scenario: 
a) All ANTLR source files (i.e. *.g and *TokenTypes.txt) are in a dir 
named "source". 
b) All output should be directed to a directory named "output".
c) MyParser.g importVocab's "MyLexer".
d) MyLexerTokenTypes.txt *IS* in the "source" directory.

Command:
    java -cp antlr.jar antlr.Tool -o output source/MyParser.g 

Result:
    panic: Cannot find importVocab file 'MyLexerTokenTypes.txt'

Comments:
1) I feel it's reasonable to expect that ANTLR would search the 
directory where it's main source file - the MyParser.g - file is 
located for any dependencies.
2) If it is different from the source directory, the output directory 
should then be searched as well.
3) Is there a need for a specific command-line option that suggests 
*additional* directories to include in the search?


Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Fri May  2 05:22:10 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] ISSUE: ANTLR only looks in output directory for XXXTokenTypes.txt file
In-Reply-To: <b8tjdd+gvjp@eGroups.com>; from open.zone@virgin.net on Fri, May 02, 2003 at 11:05:17AM -0000
References: <b8tjdd+gvjp@eGroups.com>
Message-ID: <20030502142210.J27102@cs.utwente.nl>

Hi,

On Fri, May 02, 2003 at 11:05:17AM -0000, micheal_jor wrote:
> Just came across this issue in ANTLR 2.7.2.

Think that's been present since ever ;)

> Scenario: 
> a) All ANTLR source files (i.e. *.g and *TokenTypes.txt) are in a dir 
> named "source". 
> b) All output should be directed to a directory named "output".
> c) MyParser.g importVocab's "MyLexer".
> d) MyLexerTokenTypes.txt *IS* in the "source" directory.
> 
> Command:
>     java -cp antlr.jar antlr.Tool -o output source/MyParser.g 
> 
> Result:
>     panic: Cannot find importVocab file 'MyLexerTokenTypes.txt'
> 
> Comments:
> 1) I feel it's reasonable to expect that ANTLR would search the 
> directory where it's main source file - the MyParser.g - file is 
> located for any dependencies.
> 2) If it is different from the source directory, the output directory 
> should then be searched as well.

I had a look at this stuff when I ran into it with my project well slightly
different problem but anyway... It is fixable but not completely trivial
needs some restructuring here and there. At the time it was a lot easier to
just solve it by copying TokenTypes.txt files around in my makefiles.

> 3) Is there a need for a specific command-line option that suggests 
> *additional* directories to include in the search?

Ouch the C-word *ducks for cover because Terence will come stampeding down
any moment now* ;)

Seriously though this is IMHO a good idea. Would make my life somewhat
easier as well.

Don't have really time to look at it atm. Will be at least 2 weeks before I
can spend some time on antlr. Hopefully I can get a snapshot with configure
build and MSVC fixes out then.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Why don't we just invite them to dinner and massacre them all when they're
  drunk? You heard the man. There's seven hundred thousand of them. Ah? ..
           So it'd have to be something simple with pasta, then.
                 From: Interesting Times by Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From antlrlist at yahoo.com  Fri May  2 08:17:35 2003
From: antlrlist at yahoo.com (antlrlist)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Re: Problem with existence of the same literal in two rules
In-Reply-To: <b8od8p+hbuu@eGroups.com>
Message-ID: <b8u26f+cto2@eGroups.com>


Your STRING rule is indeed being called.

What amazes me the most is that ANTLR actually lets you use this
grammar. Didn't it report a conflict between STRING and WFCS?

There's no easy way you can change the behaviour. The first solution
you could use would be avoiding the use of L,H,Z and/or X in STRING:

STRING : ( 'a'..'g' | 'i'..'k' | 'm'..'w' | 'y' |
           'A'..'G' | 'I'..'K' | 'M'..'W' | 'Z' )+
         INT
       ;

If you need those letters in your STRING, there's no easy solution:
your grammar is non-LL(k) for any k, so you'll have to manually code
the recognition rules. What I advice you is start with a very generic
STRING, an then use an action to see if its a STRING, WTFS or
erroneous. You'll have to use some an imaginary token, $setType() and
some native (java/C++/C#) code. I'll assume that you're using java.

The complete grammar would look as this:

class myScanner extends Scanner;
options {
   // don't know, probably k=2;
}

tokens {
   WFCS; // Imaginary token
}

{ // native code

   public boolean isWFCS(String text)
   {
      // Returns true if text is made of L,H,Z and/or X,
      // false otherwise - I'll let you implement this one :)
   }

   public boolean isInvalidString(String text)
   {
      // Returns true if text is NOT a combination of alphabetic chars
      // followed by a single digit - false otherwise
      // You'll also have to implement this one
   }
}

// Usual STRING implementation- a letter followed by zero or more 
// letters or digits
STRING : ('a'..'z' | 'A'..'Z')  ('a'..'z' | 'A'..'Z'|INT)*
         {
           // If it's a WFCS, change the type
           if( isWFCS( $getText() ) ) $setType(WFCS);
           // Else check correctness
           else if ( isInvalidString($getText() ) )
               // error here (throw new MismatchedCharException(...;
         }

       ;

INT :('0'..'9')+ ;

I hope this could help you...


--- In antlr-interest@yahoogroups.com, "ramyasivadas"
<ramyasivadas@y...> wrote:
> Hi,
> 
> Let me quote an example to help me explain the problem.
> 
> I have a rule as follows
> STRING
> :('a'..'z' | 'A'..'Z')+ (INT)
> ;
> 
> I also have a rule
> WFCS
> :'L'|'H'|'Z'|'X'
> ;
> 
> INT
> :('0'..'9')+
> ;
> 
> The issue is, if I have a set of literals constituting a rule and if 
> one or more of the same literals form a part of another independent 
> rule, the parser generates an exception. How can I avoid this.
> 
> For example, the rule STRING is defined to be made up of a 
> combination of any alphabets followed by a numeral. Another rule WFCS 
> which has nothing to do with STRING can be made up of a combination 
> of L,H,Z and/or X.
> 
> When the parsing for WFCS block is done, the parser expects an INT 
> after the alphabet. I assume it is applying the STRING rule on the 
> WFCS block since it has encountered an alphabet. Can we override this 
> behaviour.
> 
> 
> Thanks in advance.
> 
> Regards,
> Ramya


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From madison_stjames at yahoo.com  Fri May  2 11:05:46 2003
From: madison_stjames at yahoo.com (madison_stjames)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Odd Question Regarding Unexpected Character
Message-ID: <b8uc1q+8irs@eGroups.com>

While parsing a text file, I encountered the following in one of my 
lines:

?


Any idea how to deal with this? I tried creating a token for it, but 
I'm obviously missing something.

Thanks!


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri May  2 11:53:05 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Odd Question Regarding Unexpected Character
Message-ID: <170826586F3BD511910D0200C110AAA805402363@memail03.bco-home.com>

What do you want to do with it?  If you want to ignore it like whitespace is
ignored then put that character in your whitespace rule.

Monty

-----Original Message-----
From: madison_stjames [mailto:madison_stjames@yahoo.com]
Sent: Friday, May 02, 2003 11:06 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Odd Question Regarding Unexpected Character


While parsing a text file, I encountered the following in one of my 
lines:

?


Any idea how to deal with this? I tried creating a token for it, but 
I'm obviously missing something.

Thanks!


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri May  2 12:04:55 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] dfa-based lexers versus top-down antlr  lexe
	rs
Message-ID: <170826586F3BD511910D0200C110AAA805402365@memail03.bco-home.com>

Lexers also keep state internally and/or through selectors.  Line number,
column number at the very least.  

Also if you unget through to the lexer you must unget k tokens previous in
the parser, because the rule you are in now may not be the one that would
have been predicted k tokens ago.  And the only sane way to accomplish that
would be to use syntactic predicates.  But of course there are no actions in
syn preds, so how to know what to unget?

So I'm leaning toward saying that it would not be worth doing it.

Can you think of any examples of how you would use such a feature?  

Monty

-----Original Message-----
From: Pete Forman [mailto:pete.forman@westerngeco.com]
Sent: Thursday, May 01, 2003 1:56 AM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] dfa-based lexers versus top-down antlr
lexers


At 2003-04-29 09:48 -0700, Terence Parr wrote:
>Concerning the interface between parser / lexer, yes: it's simple:
>
>interface TokenStream {
>         public Token nextToken();
>}

Would it be worth developing a lexer with a second method?

     public void unget(int numTokens);

This would allow lexer switching from within the parser.  The first
lexer could push back the input it has consumed allowing the second
lexer to make a clean start.

The semantics of the method are closest to unget() in C++ istream.
There is little point in doing putback(Token) as in C++ istream or
unread(Token) as in Java PushbackReader as the Token will not in
itself contain enough information to reconstruct the input to the
lexer.

Implementation would probably require extra buffering at the input
to the lexer to support backtracking.  Most of the lexers that I've
deployed are working on string inputs which would suit this proposal.
Rather more work would be needed for non random access file inputs.
The amount of buffering probably ought to be limited explicitly with
unget() throwing an exception if too much backtracking is attempted.

Another approach to implementation would be to make Token a bit
heavier.  It might carry the array of characters that formed it,
including those of adjacent skipped tokens.  Then unread(Token) would
contain enough info to back up the input to the lexer using putback()
or unread().  An intermediate approach would have a buffer in the
lexer or its input and store a pair of indexes in the token.

One benefit mentioned is allowing lexer switching in the parser.
Another might be to allow switching to a different lexer when a parse
error is detected to allow more powerful recovery from that error.

-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rustydstone at yahoo.com  Fri May  2 12:40:42 2003
From: rustydstone at yahoo.com (rustydstone)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Referencing upper tree node from lower level
Message-ID: <b8uhjq+fm9o@eGroups.com>

Hi,

Please see example below.

Thanks

-----------------------------------------------------

[...]
| #(METHOD_CALL primaryExpression elist)
...
;
elist
: #( ELIST (expression
              {
              // is it possible to determine what 
              // prrimaryExpression this expression
              // belongs to from here?
              }
           )*
   )
;


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From madison_stjames at yahoo.com  Fri May  2 13:34:59 2003
From: madison_stjames at yahoo.com (madison_stjames)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Re: Odd Question Regarding Unexpected Character
In-Reply-To: <170826586F3BD511910D0200C110AAA805402363@memail03.bco-home.com>
Message-ID: <b8ukpj+ocg3@eGroups.com>

I want to process it as part of one of my productions in the 
grammar. I tried simply creating a token, composed of those two 
characters, then added that token to my production. (I'm not even 
sure what those characters are, they don't appear to be ASCII or 
Unicode.) I thought that this should have worked, but it didn't.


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> What do you want to do with it?  If you want to ignore it like 
whitespace is
> ignored then put that character in your whitespace rule.
> 
> Monty
> 
> -----Original Message-----
> From: madison_stjames [mailto:madison_stjames@y...]
> Sent: Friday, May 02, 2003 11:06 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Odd Question Regarding Unexpected 
Character
> 
> 
> While parsing a text file, I encountered the following in one of 
my 
> lines:
> 
> ?

> 
> Any idea how to deal with this? I tried creating a token for it, 
but 
> I'm obviously missing something.
> 
> Thanks!
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri May  2 13:44:36 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Re: Odd Question Regarding Unexpected Charac
	ter
Message-ID: <170826586F3BD511910D0200C110AAA805402366@memail03.bco-home.com>

Try running antlr.Tool with -traceLexer to see what the lexer is doing when
it lexes those characters.

Monty

-----Original Message-----
From: madison_stjames [mailto:madison_stjames@yahoo.com]
Sent: Friday, May 02, 2003 1:35 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Odd Question Regarding Unexpected
Character


I want to process it as part of one of my productions in the 
grammar. I tried simply creating a token, composed of those two 
characters, then added that token to my production. (I'm not even 
sure what those characters are, they don't appear to be ASCII or 
Unicode.) I thought that this should have worked, but it didn't.


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> What do you want to do with it?  If you want to ignore it like 
whitespace is
> ignored then put that character in your whitespace rule.
> 
> Monty
> 
> -----Original Message-----
> From: madison_stjames [mailto:madison_stjames@y...]
> Sent: Friday, May 02, 2003 11:06 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Odd Question Regarding Unexpected 
Character
> 
> 
> While parsing a text file, I encountered the following in one of 
my 
> lines:
> 
> ?

> 
> Any idea how to deal with this? I tried creating a token for it, 
but 
> I'm obviously missing something.
> 
> Thanks!
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri May  2 13:47:02 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Referencing upper tree node from lower level
Message-ID: <170826586F3BD511910D0200C110AAA805402367@memail03.bco-home.com>

You can pass the primaryExpression as an argument to elist:

[...]
| #(METHOD_CALL p:primaryExpression elist[p])
...
;
elist[AST p] 
: #( ELIST (expression
              {
              //do something with p here
              }
           )*
   )
;

Monty

-----Original Message-----
From: rustydstone [mailto:rustydstone@yahoo.com]
Sent: Friday, May 02, 2003 12:41 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Referencing upper tree node from lower level


Hi,

Please see example below.

Thanks

-----------------------------------------------------

[...]
| #(METHOD_CALL primaryExpression elist)
...
;
elist
: #( ELIST (expression
              {
              // is it possible to determine what 
              // prrimaryExpression this expression
              // belongs to from here?
              }
           )*
   )
;


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Fri May  2 13:53:23 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] lexer help
Message-ID: <20030502205323.72019.qmail@web20419.mail.yahoo.com>

I want to build a Lexer with configurable token text;
that is, I won't know until runtime what character(s)
indicate X token (This is for working with EDI). 
Would I be better off building this by hand, or can it
be easily done with ANTLR?  I would like to be able to
match numerals with signs and decimals (I must assume
that the configurable tokens won't be these).

Or, should I build the lexer with ANTLR--once, and
then modify it?

-Matt

__________________________________
Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo.
http://search.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mikhail at augustmail.com  Fri May  2 13:54:41 2003
From: mikhail at augustmail.com (thesamim)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] C++ parser.
Message-ID: <b8uluh+m14b@eGroups.com>

Before I spend a lot of time on this, I want to make sure that I'm not
misunderstanding something.

I need to generate a C++ parser from a grammer I already have. The way
to do this is to get hold of the ANTLR C++ distribution files; build
the ANTLR executable; feed it my grammer; C++ parser comes out the
other end.

Is this correct?




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri May  2 13:56:17 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] lexer help
Message-ID: <170826586F3BD511910D0200C110AAA805402368@memail03.bco-home.com>

If you can reduce your problem to just adding new literals to the literals
table, then you could build the lexer with antlr easily and just modify that
hash table.  If you need something more than that you will probably be
better off building it by hand or using a regular expression library.

Monty

-----Original Message-----
From: Matt Benson [mailto:gudnabrsam@yahoo.com]
Sent: Friday, May 02, 2003 1:53 PM
To: Antlr List
Subject: [antlr-interest] lexer help


I want to build a Lexer with configurable token text;
that is, I won't know until runtime what character(s)
indicate X token (This is for working with EDI). 
Would I be better off building this by hand, or can it
be easily done with ANTLR?  I would like to be able to
match numerals with signs and decimals (I must assume
that the configurable tokens won't be these).

Or, should I build the lexer with ANTLR--once, and
then modify it?

-Matt

__________________________________
Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo.
http://search.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Fri May  2 14:13:28 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] lexer help
In-Reply-To: <170826586F3BD511910D0200C110AAA805402368@memail03.bco-home.com>
Message-ID: <20030502211328.43618.qmail@web20418.mail.yahoo.com>

I guess I'll generate a prototype and see if I can
figure out what would go into the literals table,
otherwise I can generate the prototype to handle
numerics and just copy over that code.

Thanks,
Matt

--- mzukowski@yci.com wrote:
> If you can reduce your problem to just adding new
> literals to the literals
> table, then you could build the lexer with antlr
> easily and just modify that
> hash table.  If you need something more than that
> you will probably be
> better off building it by hand or using a regular
> expression library.
> 
> Monty
> 
> -----Original Message-----
> From: Matt Benson [mailto:gudnabrsam@yahoo.com]
> Sent: Friday, May 02, 2003 1:53 PM
> To: Antlr List
> Subject: [antlr-interest] lexer help
> 
> 
> I want to build a Lexer with configurable token
> text;
> that is, I won't know until runtime what
> character(s)
> indicate X token (This is for working with EDI). 
> Would I be better off building this by hand, or can
> it
> be easily done with ANTLR?  I would like to be able
> to
> match numerals with signs and decimals (I must
> assume
> that the configurable tokens won't be these).
> 
> Or, should I build the lexer with ANTLR--once, and
> then modify it?
> 
> -Matt
> 
> __________________________________
> Do you Yahoo!?
> The New Yahoo! Search - Faster. Easier. Bingo.
> http://search.yahoo.com
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo.
http://search.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri May  2 14:35:07 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] C++ parser.
Message-ID: <170826586F3BD511910D0200C110AAA80540236A@memail03.bco-home.com>

Not quite.  ANTLR is a java tool.  To run antlr you will need to download
the antlr distribution and then run it as detailed in the directions.  Then
feed it your grammar and the C++ parser gets generated.

You don't need to generate an antlr executable.

Monty

-----Original Message-----
From: thesamim [mailto:mikhail@augustmail.com]
Sent: Friday, May 02, 2003 1:55 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] C++ parser.


Before I spend a lot of time on this, I want to make sure that I'm not
misunderstanding something.

I need to generate a C++ parser from a grammer I already have. The way
to do this is to get hold of the ANTLR C++ distribution files; build
the ANTLR executable; feed it my grammer; C++ parser comes out the
other end.

Is this correct?




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jw9315 at bris.ac.uk  Sat May  3 07:54:10 2003
From: jw9315 at bris.ac.uk (jw9315)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] getFirstChild vs getNextSibling ?
Message-ID: <b90l6i+bli2@eGroups.com>

Hi,
I writing a very simple interpreter using an AST tree. I know this is 
probably a trivial question, but what is the difference between the 
calls astTree.getFirstChild() vs astTree.getNextSibling()? Could 
anyone give me a short example, it would be much appreciated!
Thanks,
Jon


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oneway_111 at yahoo.com  Sat May  3 08:02:19 2003
From: oneway_111 at yahoo.com (ow)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] getFirstChild vs getNextSibling ?
In-Reply-To: <b90l6i+bli2@eGroups.com>
Message-ID: <20030503150219.79608.qmail@web21410.mail.yahoo.com>

--- jw9315 <jw9315@bris.ac.uk> wrote:
> Hi,
> I writing a very simple interpreter using an AST tree. I know this is
> 
> probably a trivial question, but what is the difference between the 
> calls astTree.getFirstChild() vs astTree.getNextSibling()? Could 
> anyone give me a short example, it would be much appreciated!
> Thanks,
> Jon

The way I see it:

AST parent
        +
        |
        |--- firstChild = parent.getFirstChild()
        |
        |--- nextSibling = firstChild.getNextSibling()

     


__________________________________
Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo.
http://search.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jw9315 at bris.ac.uk  Sat May  3 08:38:35 2003
From: jw9315 at bris.ac.uk (jw9315)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Re: getFirstChild vs getNextSibling ?
In-Reply-To: <20030503150219.79608.qmail@web21410.mail.yahoo.com>
Message-ID: <b90npr+bld5@eGroups.com>

Hi,
so what type of tree structures have a nextSibling()of null, because 
I can always get the firstChild, but calls to getNextSibling always 
return null?
Thanks,
Jon

of null

--- In antlr-interest@yahoogroups.com, ow <oneway_111@y...> wrote:
> --- jw9315 <jw9315@b...> wrote:
> > Hi,
> > I writing a very simple interpreter using an AST tree. I know 
this is
> > 
> > probably a trivial question, but what is the difference between 
the 
> > calls astTree.getFirstChild() vs astTree.getNextSibling()? Could 
> > anyone give me a short example, it would be much appreciated!
> > Thanks,
> > Jon
> 
> The way I see it:
> 
> AST parent
>         +
>         |
>         |--- firstChild = parent.getFirstChild()
>         |
>         |--- nextSibling = firstChild.getNextSibling()
> 
>      
> 
> 
> __________________________________
> Do you Yahoo!?
> The New Yahoo! Search - Faster. Easier. Bingo.
> http://search.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Sat May  3 08:47:38 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Re: getFirstChild vs getNextSibling ?
In-Reply-To: <b90npr+bld5@eGroups.com>
Message-ID: <90F8294A-7D7E-11D7-81B9-000393BB647E@jguru.com>

Hi gang,

Imagine tree

A
|
|
B -- C

getFirstChild of A is B, of B is null, of C is null.
getNextSibling of A is null, of B is C, of C is null.

Terence

On Saturday, May 3, 2003, at 08:38  AM, jw9315 wrote:

> Hi,
> so what type of tree structures have a nextSibling()of null, because
> I can always get the firstChild, but calls to getNextSibling always
> return null?
> Thanks,
> Jon
>
> of null
>
> --- In antlr-interest@yahoogroups.com, ow <oneway_111@y...> wrote:
>> --- jw9315 <jw9315@b...> wrote:
>>> Hi,
>>> I writing a very simple interpreter using an AST tree. I know
> this is
>>>
>>> probably a trivial question, but what is the difference between
> the
>>> calls astTree.getFirstChild() vs astTree.getNextSibling()? Could
>>> anyone give me a short example, it would be much appreciated!
>>> Thanks,
>>> Jon
>>
>> The way I see it:
>>
>> AST parent
>>         +
>>         |
>>         |--- firstChild = parent.getFirstChild()
>>         |
>>         |--- nextSibling = firstChild.getNextSibling()
>>
>>
>>
>>
>> __________________________________
>> Do you Yahoo!?
>> The New Yahoo! Search - Faster. Easier. Bingo.
>> http://search.yahoo.com
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jw9315 at bris.ac.uk  Sat May  3 16:08:45 2003
From: jw9315 at bris.ac.uk (jw9315)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] code that takes in a Java file and outputs the names of the classes and methods?
Message-ID: <b91i5t+i7ad@eGroups.com>

hi,
I was wondering if anyone out there had code which takes in a .java 
file, and outputs the class names within that file, and the method 
names and their arguments?

If not, can anybody give me advice on how to approach this problem?
Thanks,
Jon


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From iank at bearcave.com  Sat May  3 16:51:32 2003
From: iank at bearcave.com (iank@bearcave.com)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] code that takes in a Java file and outputs the names of the classes and methods?
References: <b91i5t+i7ad@eGroups.com>
Message-ID: <200305032351.h43NpWFF056469@idiom.com>


  I've written a .class file disassembler which will output class and
  method information.  This can be found at
  http://www.bearcave.com/software/java/javad/index.html.  If you want
  to go from source, you might start with the ANTLR Java parser.  You
  can build abstract syntax trees for the Java class information and
  then output this.

  Ian

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jw9315 at bris.ac.uk  Sat May  3 17:05:29 2003
From: jw9315 at bris.ac.uk (jw9315)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Re: code that takes in a Java file and outputs the names of the classes and methods?
In-Reply-To: <200305032351.h43NpWFF056469@idiom.com>
Message-ID: <b91lg9+o12o@eGroups.com>

--- In antlr-interest@yahoogroups.com, iank@b... wrote:
> 
>   I've written a .class file disassembler which will output class 
and
>   method information.  This can be found at
>   http://www.bearcave.com/software/java/javad/index.html.  If you 
want
>   to go from source, you might start with the ANTLR Java parser.  
You
>   can build abstract syntax trees for the Java class information and
>   then output this.
> 
>   Ian
Hi,
Thanks for that info. I have the Abstract Syntax Tree in memory and 
was wondering what the easiest way to extract the class and method 
information from this? Would it just be a case of calling getChild() 
and getNextSibling() recursively, and looking for class and method 
names? Alternatively, could I look though the string representation 
of the tree for all the class and method types?

Is there a set algorithm for going through all the nodes in an AST, 
as I'm having trouble getting my head round it! I don't think I have 
time to implement a tree parser, so I have to use getFirstChild() and 
getNextSibling() when walking the tree...
Any help would be greatly appreciated, (dissertation handin is very 
near!)
Jon


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rustydstone at yahoo.com  Sat May  3 17:53:16 2003
From: rustydstone at yahoo.com (rustydstone)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Re: Referencing upper tree node from lower level
In-Reply-To: <170826586F3BD511910D0200C110AAA805402367@memail03.bco-home.com>
Message-ID: <b91o9s+pmgp@eGroups.com>

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> You can pass the primaryExpression as an argument to elist:
> [...]
> Monty
>

Thanks


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From iank at bearcave.com  Sat May  3 19:42:20 2003
From: iank at bearcave.com (iank@bearcave.com)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Re: code that takes in a Java file and outputs the names of the classes and methods?
Message-ID: <200305040242.h442gKtk050967@idiom.com>


  It should be possible to only build abstract syntax tree productions
  for the syntax you are interested in.  For example, the class name
  and methods.  When the production for the class finishes, you can
  then output output the class skeleton.

  In building the syntax tree, I'd just build my own, rather than
  spending the time to learn the ANTLR tree construction rules.  But I
  have some known biases here.

  Ian

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rbencina at iprimus.com.au  Sat May  3 22:08:39 2003
From: rbencina at iprimus.com.au (Ross Bencina)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] DIY AST error recovery problem
Message-ID: <028701c311fb$54d7acf0$542d32d2@athlon900>

I'm constructing my own AST (not using ANTLR's built in tree building) and
have come accross a problem with my code when a parse error happens...

---
ident           returns [ std::auto_ptr<IdentifierNode> result ]
                : a:IDENT
                {
                    result.reset( new IdentifierNode(
                        SRCLOC(a),
                        Identifier( a->getText().c_str() );
                }
                ;

name            returns [ std::auto_ptr<NameDeclaration> result ]
                {
                    std::auto_ptr<IdentifierNode> a;
                    SaolConstants::Width b = SaolConstants::SINGLE_VALUE;
                }
                : a=ident ( LBRACK b=arrayLength RBRACK )?
                    {
                        SourceLocation srcLoc = a->sourceLocation; //
***crash
                        result.reset( new NameDeclaration( srcLoc, a, b ) );
                    }
                ;

The above code is for parsing declarations like the following:

ivar x, illegal, y[10];

The caller of name() looks like:

namelist        returns [ std::auto_ptr<NameList> result ]
                {
                    result.reset( new NameList() );
                    std::auto_ptr<NameDeclaration> a, b;
                }
                : a=name { result->push_back( a.release() ); }
                    ( COMMA b=name { result->push_back( b.release() ); }
                    )*
                {
                    result->sourceLocationBegin =
result->front()->sourceLocation;
                }
    ;

Ideally, if ident() or name() fails, then the illegal NameDeclaration simply
wouldn't be added to the NameList.
---

At the moment, if the ident rule fails, then ident() returns an empty (null)
auto_ptr and the a-> expression in name() crashes. I could explicitly check
return values for null before using them, but right now I don't understand
the problem enough to know which return values to check - I would prefer not
to have to check every rule's return value for NULL, although I have a
sinking feeling that's what I will have to do.

What would be better is if ANTLR's error recovery wound back further up the
stack - could anyone advise of the best way to do this, or any other
possible approaches?

Is there an explanation of what an ANTLR parser does if it encounters

Thanks in advance

Ross.





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jw9315 at bris.ac.uk  Sun May  4 14:59:57 2003
From: jw9315 at bris.ac.uk (jw9315)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Algorithm for walking an AST tree??
Message-ID: <b942gt+7k0l@eGroups.com>

Hi,
Could someone help me out with the algorithm for walking an AST tree?
Here's what I have so far...

void visit(AST tree)
{
  tree = tree.getFirstChild();
  if(treeHasChildren)
  {
    visit(tree);
  }
  else if treeHasSiblings // No Children
  {
    tree = tree.getNextSibling;
    visit(tree);
  }
}

does anyone have the algorithm or the code for doing this correctly? 
I feel I should be iterating through the children of each node?
Thanks,
Jon


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rbencina at iprimus.com.au  Sun May  4 15:11:20 2003
From: rbencina at iprimus.com.au (Ross Bencina)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Algorithm for walking an AST tree??
References: <b942gt+7k0l@eGroups.com>
Message-ID: <002b01c3128a$1926dcf0$20c832d2@athlon900>

Jon wrote:
> Hi,
> Could someone help me out with the algorithm for walking an AST tree?

Off the top of my head:

void visit( AST tree )
{
    AST child = tree.getFirstChild();
    if( child )
        visit( child )

    AST sibling = tree.getNextSibling();
    while( sibling ){
        visit( sibling );
        sibling = sibling .getNextSibling();
    }
}

> I feel I should be iterating through the children of each node?

The above will do a depth-first traversal - depending on what you want to
do, depth-first might not be what you want. The recursiveness of visit()
handles iterating through children, the explicit while-loop iterates through
siblings.

Ross.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jw9315 at bris.ac.uk  Sun May  4 16:21:47 2003
From: jw9315 at bris.ac.uk (jw9315)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Re: Algorithm for walking an AST tree??
In-Reply-To: <002b01c3128a$1926dcf0$20c832d2@athlon900>
Message-ID: <b947ab+nog0@eGroups.com>

Hi,
Is the algorithm mentioned below, 

Preorder Traversal or
Postorder Traversal or
Inorder Traversal?

Thanks,
Jon
> Off the top of my head:
> 
> void visit( AST tree )
> {
>     AST child = tree.getFirstChild();
>     if( child )
>         visit( child )
> 
>     AST sibling = tree.getNextSibling();
>     while( sibling ){
>         visit( sibling );
>         sibling = sibling .getNextSibling();
>     }
> }
> 
> > I feel I should be iterating through the children of each node?
> 
> The above will do a depth-first traversal - depending on what you 
want to
> do, depth-first might not be what you want. The recursiveness of 
visit()
> handles iterating through children, the explicit while-loop 
iterates through
> siblings.
> 
> Ross.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jw9315 at bris.ac.uk  Sun May  4 16:26:31 2003
From: jw9315 at bris.ac.uk (jw9315)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Re: Algorithm for walking an AST tree??
In-Reply-To: <b947ab+nog0@eGroups.com>
Message-ID: <b947j7+l30j@eGroups.com>

Sorry that was a stupid question, its preorder isn't it?


--- In antlr-interest@yahoogroups.com, "jw9315" <jw9315@b...> wrote:
> Hi,
> Is the algorithm mentioned below, 
> 
> Preorder Traversal or
> Postorder Traversal or
> Inorder Traversal?
> 
> Thanks,
> Jon
> > Off the top of my head:
> > 
> > void visit( AST tree )
> > {
> >     AST child = tree.getFirstChild();
> >     if( child )
> >         visit( child )
> > 
> >     AST sibling = tree.getNextSibling();
> >     while( sibling ){
> >         visit( sibling );
> >         sibling = sibling .getNextSibling();
> >     }
> > }
> > 
> > > I feel I should be iterating through the children of each node?
> > 
> > The above will do a depth-first traversal - depending on what you 
> want to
> > do, depth-first might not be what you want. The recursiveness of 
> visit()
> > handles iterating through children, the explicit while-loop 
> iterates through
> > siblings.
> > 
> > Ross.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From grendel at swcp.com  Sun May  4 16:26:52 2003
From: grendel at swcp.com (wnreynolds)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Can't Use Subclass LLkParser?
Message-ID: <b947js+75s9@eGroups.com>

<html>
<body>
<p>
(cross posted to jGuru forum).
I'm using the latest version (2.7.2) of antlr. I want to specify
something like

<font size=2>
<pre>
class SubGrammar extends Parser (Foo) ;
</pre>
</font>

<p>
so that my gramamr inherits off my custom subclass Foo of LLkParser.

<p>
Looking at antlr.g, this seems to be allowed (code from antlr.g
attached at end of this post).

<p>
Trying to compile the following simple grammar:

<font size=2>
<pre>
header
{
}


{
    import antlr.*;
}

class SubGrammar extends Parser (Foo) ;

rule: "rule";
</pre>
</font>

<p>
fails:

<font size=2><pre>
ANTLR Parser Generator   Version 2.7.2   1989-2003 jGuru.com
SubGrammar.g:10:33: expecting SEMI, found '(Foo)'
</pre></font>

<p>
I tried debugging antlr, and the '(Foo)' token was correctly consumed
by the superClass rule in antlr.g, as was the terminal SEMI (see
below), but antlr still gives the error.


<p>
Any thoughts?

<p>
Bill Reynolds

<p>
(relevant excerpts fron antlr.g follow)

<font size=2>
<pre>
parserSpec[String doc]
{
	Token idTok;
	String sup=null;
}
	:	"class"
		idTok = id
		(	"extends" "Parser"
			(sup=superClass)?
		|	{
			antlrTool.warning("use 'class X extends Parser'", getFilename(),
idTok.getLine(), idTok.getColumn());
//			System.out.println("warning: line " +
//				idTok.getLine() + ": use 'class X extends Parser'");
			}
		)
		{behavior.startParser(getFilename(), idTok, sup, doc);}
		SEMI
		(parserOptionsSpec)?
		{ behavior.endOptions(); }
		(tokensSpec)?
		( a:ACTION {behavior.refMemberAction(a);} )?
	;

superClass returns [String sup]
{sup=null;}
	:	LPAREN
			{sup = LT(1).getText();}
			(TOKEN_REF|RULE_REF)
		RPAREN
	;
</pre>
</font>
</body>
</html>



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From cgodfrey at epnet.com  Mon May  5 05:48:39 2003
From: cgodfrey at epnet.com (cgodfrey86)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Advantage of where Token is defined?
Message-ID: <b95mj7+j7m5@eGroups.com>

Are there any advantages/disadvantages to defining a token in the 
tokens section of the lexer definition verses as a separate item? I 
found myself doing this to try and avoid "lexical nondeterminism" 
messages, but I am not sure of the implications in doing this.

Thanks.

options
{
	language = "CSharp";
}

class ASPULexer extends Lexer;
options {
  k=3;
  caseSensitive=false;
}

tokens {
AND = "and";
....
}


instead of 


AND : "and";





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jw9315 at bris.ac.uk  Mon May  5 06:29:22 2003
From: jw9315 at bris.ac.uk (jw9315)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] AST algorithm stuck in infinite loop?
Message-ID: <b95ovi+3cmp@eGroups.com>

Hi,
I implemented the following algorithm to walk an AST as suggested by 
a member of this group:

// Start
void visit( AST tree )
 {
         AST child = tree.getFirstChild();
         System.out.println("_" + child);
         // Test to see if node has a child
         if( child != null) 
	 {
		 System.out.println(child);
                 // Call method recursively
		 visit( child ); 
	 }
         // Else there were no children
         AST sibling = tree.getNextSibling();
         while( sibling != null)
	 {
	 	System.out.println(sibling);
		visit( sibling );
		sibling = sibling .getNextSibling();
 }
// End

However, I find that this enters an infinite loop and prints the tree 
out over and over again. Have I implemented the algorithm correctly, 
and if so, could someone tell me how to test for the fact that I have 
walked the whole tree? Is there a special command for this?
Thanks in advance,
Jon


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jw9315 at bris.ac.uk  Mon May  5 06:56:59 2003
From: jw9315 at bris.ac.uk (jw9315)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Re: AST algorithm stuck in infinite loop?
In-Reply-To: <b95ovi+3cmp@eGroups.com>
Message-ID: <b95qjb+c6is@eGroups.com>

Apologies, the algorithm was not stuck in a loop, it was just taking 
so long to complete that I did not notice! It still seems to go 
through the same branch many times though, I was wondering if it was 
meant to do this, or it was an error in the implementation of the 
algorithm?
Thanks,
Jon

--- In antlr-interest@yahoogroups.com, "jw9315" <jw9315@b...> wrote:
> Hi,
> I implemented the following algorithm to walk an AST as suggested 
by 
> a member of this group:
> 
> // Start
> void visit( AST tree )
>  {
>          AST child = tree.getFirstChild();
>          System.out.println("_" + child);
>          // Test to see if node has a child
>          if( child != null) 
> 	 {
> 		 System.out.println(child);
>                  // Call method recursively
> 		 visit( child ); 
> 	 }
>          // Else there were no children
>          AST sibling = tree.getNextSibling();
>          while( sibling != null)
> 	 {
> 	 	System.out.println(sibling);
> 		visit( sibling );
> 		sibling = sibling .getNextSibling();
>  }
> // End
> 
> However, I find that this enters an infinite loop and prints the 
tree 
> out over and over again. Have I implemented the algorithm 
correctly, 
> and if so, could someone tell me how to test for the fact that I 
have 
> walked the whole tree? Is there a special command for this?
> Thanks in advance,
> Jon


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Mon May  5 10:10:44 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Re: AST algorithm stuck in infinite loop?
In-Reply-To: <b95qjb+c6is@eGroups.com>
Message-ID: <81C67A0E-7F1C-11D7-81B9-000393BB647E@jguru.com>

Hi.  Most likely, your tree is not a tree, but a DAG ;)  It was perhaps 
improperly built and has a child or sibling "back" link. :)

Ter

On Monday, May 5, 2003, at 06:56  AM, jw9315 wrote:

> Apologies, the algorithm was not stuck in a loop, it was just taking
> so long to complete that I did not notice! It still seems to go
> through the same branch many times though, I was wondering if it was
> meant to do this, or it was an error in the implementation of the
> algorithm?
> Thanks,
> Jon
>
> --- In antlr-interest@yahoogroups.com, "jw9315" <jw9315@b...> wrote:
>> Hi,
>> I implemented the following algorithm to walk an AST as suggested
> by
>> a member of this group:
>>
>> // Start
>> void visit( AST tree )
>>  {
>>          AST child = tree.getFirstChild();
>>          System.out.println("_" + child);
>>          // Test to see if node has a child
>>          if( child != null)
>> 	 {
>> 		 System.out.println(child);
>>                  // Call method recursively
>> 		 visit( child );
>> 	 }
>>          // Else there were no children
>>          AST sibling = tree.getNextSibling();
>>          while( sibling != null)
>> 	 {
>> 	 	System.out.println(sibling);
>> 		visit( sibling );
>> 		sibling = sibling .getNextSibling();
>>  }
>> // End
>>
>> However, I find that this enters an infinite loop and prints the
> tree
>> out over and over again. Have I implemented the algorithm
> correctly,
>> and if so, could someone tell me how to test for the fact that I
> have
>> walked the whole tree? Is there a special command for this?
>> Thanks in advance,
>> Jon
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Mon May  5 10:59:41 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Re: Advantage of where Token is defined?
In-Reply-To: <b95mj7+j7m5@eGroups.com>
Message-ID: <b968qd+pr3q@eGroups.com>

Defining literals as tokens should not affect lexical 
nondeterminism.  The cure is to do at least one of the following:
   1.)  Increase k
   2.)  Refactor--you have at least two definitions with overlapping 
character sequences.  (Basic cause of lexical nondeterminism).
   3.)  Use predicates to disambiguate alternatives.

--Loring

--- In antlr-interest@yahoogroups.com, "cgodfrey86" <cgodfrey@e...> 
wrote:
> Are there any advantages/disadvantages to defining a token in the 
> tokens section of the lexer definition verses as a separate item? I 
> found myself doing this to try and avoid "lexical nondeterminism" 
> messages, but I am not sure of the implications in doing this.
> 
> Thanks.
> 
> options
> {
> 	language = "CSharp";
> }
> 
> class ASPULexer extends Lexer;
> options {
>   k=3;
>   caseSensitive=false;
> }
> 
> tokens {
> AND = "and";
> ....
> }
> 
> 
> instead of 
> 
> 
> AND : "and";


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From imolanet at yahoo.it  Mon May  5 13:06:16 2003
From: imolanet at yahoo.it (imolanet)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] c# code generation with Visual Studio .NET
Message-ID: <b96g7o+582e@eGroups.com>

Hi!

I'm Patrik, from Imola. I study in Bologna.
First, excuse me because my english is very poor.

Briefly
Starting from a C++ source I want write C# code able to transform 
the AST and, with CodeDOM, rewrite the source in C# language.

Now I use Visual Stuio .NET (but I didn't love MS), and I'm not able 
to generate C# code under this IDE

The link about, in ANTLR homepage, is broken.

Can someone Help me giving some useful links ?

Thanks for your time spending :

Patrik


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From richard.ney at aspect.com  Mon May  5 13:14:00 2003
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] c# code generation with Visual Studio .NET
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE00ECDEA@sac1exch3.aspect.com>

Patrik,

Unless something has changed that I'm unaware of. The C++ instructions for
setting up a custom build step will not work with the .NET languages. This
is due to the fact that the .NET languages don't have custom build steps.

The work around I did was to setup a menu item in the Tools menu of the IDE.
This at least allows me to select a .g file and compile it. Until someone
has the time to write the add-in for .NET languages this is the best we have
at this time.

The command is the Java VM and the arguments are 

-classpath c:\antlr-2.7.2 antlr.Tool -o $(ProjectDir).
$(ProjectDir)$(ItemFileName)$(ItemExt)

Hope this helps.

-Richard

-----Original Message-----
From: imolanet [mailto:imolanet@yahoo.it] 
Sent: Monday, May 05, 2003 1:06 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] c# code generation with Visual Studio .NET

Hi!

I'm Patrik, from Imola. I study in Bologna.
First, excuse me because my english is very poor.

Briefly
Starting from a C++ source I want write C# code able to transform 
the AST and, with CodeDOM, rewrite the source in C# language.

Now I use Visual Stuio .NET (but I didn't love MS), and I'm not able 
to generate C# code under this IDE

The link about, in ANTLR homepage, is broken.

Can someone Help me giving some useful links ?

Thanks for your time spending :

Patrik


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Mon May  5 14:51:44 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Re: c# code generation with Visual Studio .NET
In-Reply-To: <0F9CBE7F81945C4BB7A32BE6E7656EE00ECDEA@sac1exch3.aspect.com>
Message-ID: <b96mdg+99r1@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Ney, Richard" 
<richard.ney@a...> wrote:
> Patrik,

> The work around I did was to setup a menu item in the Tools menu of 
the IDE.
> This at least allows me to select a .g file and compile it. Until 
someone
> has the time to write the add-in for .NET languages this is the 
best we have
> at this time.

VS.NET's CustomTool model (for code-generators) is limited because it 
only allows the generation of a single source file for each input 
file. It does not support a code generator - like ANTLR - that can 
generate *multiple* outputSourceCode files from a single 
codegenSource file.

Given that *most* ANTLR grammar files are indeed multi-ouput, we 
decided against developing a VS.NET CustomTool interface for ANTLR/C# 
for the moment. Any such interface would be limited to a outputting a 
single source file per *.g file and we didn't fancy having our 
Lexers, Parsers and TreeParsers all pop out in the same *huge* source 
file.

I haven't look at VS.NET 2003 yet in any great detail as far as this 
issue in considered so, there may be hope yet.

Cheers,

Micheal
ANTLR/C# codegen 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jw9315 at bris.ac.uk  Mon May  5 15:45:14 2003
From: jw9315 at bris.ac.uk (jw9315)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Re: AST algorithm stuck in infinite loop?
In-Reply-To: <81C67A0E-7F1C-11D7-81B9-000393BB647E@jguru.com>
Message-ID: <b96phq+89ng@eGroups.com>

Hi All,
I'm pretty sure that my tree is a tree and not a Directed Acyclic 
Graph, because I am using the tree grammars from the example 
directory in ANTLR, so I have not coded it myself, I am just running 
the algorithm below on the AST in memory from the example program, 
but I can't figure out why it goes over itself so many times before 
stopping? Should it not do each branch of the tree just once? This is 
messing up the interpretation that I am trying to do in the tree...
Thanks in advance,
Jon

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> 
wrote:
> Hi.  Most likely, your tree is not a tree, but a DAG ;)  It was 
perhaps 
> improperly built and has a child or sibling "back" link. :)
> 
> Ter
> 
> On Monday, May 5, 2003, at 06:56  AM, jw9315 wrote:
> 
> > Apologies, the algorithm was not stuck in a loop, it was just 
taking
> > so long to complete that I did not notice! It still seems to go
> > through the same branch many times though, I was wondering if it 
was
> > meant to do this, or it was an error in the implementation of the
> > algorithm?
> > Thanks,
> > Jon
> >
> > --- In antlr-interest@yahoogroups.com, "jw9315" <jw9315@b...> 
wrote:
> >> Hi,
> >> I implemented the following algorithm to walk an AST as suggested
> > by
> >> a member of this group:
> >>
> >> // Start
> >> void visit( AST tree )
> >>  {
> >>          AST child = tree.getFirstChild();
> >>          System.out.println("_" + child);
> >>          // Test to see if node has a child
> >>          if( child != null)
> >> 	 {
> >> 		 System.out.println(child);
> >>                  // Call method recursively
> >> 		 visit( child );
> >> 	 }
> >>          // Else there were no children
> >>          AST sibling = tree.getNextSibling();
> >>          while( sibling != null)
> >> 	 {
> >> 	 	System.out.println(sibling);
> >> 		visit( sibling );
> >> 		sibling = sibling .getNextSibling();
> >>  }
> >> // End
> >>
> >> However, I find that this enters an infinite loop and prints the
> > tree
> >> out over and over again. Have I implemented the algorithm
> > correctly,
> >> and if so, could someone tell me how to test for the fact that I
> > have
> >> walked the whole tree? Is there a special command for this?
> >> Thanks in advance,
> >> Jon
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/
> >
> >
> >
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Co-founder, http://www.peerscope.com link sharing, pure-n-simple
> Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Mon May  5 15:53:53 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Re: AST algorithm stuck in infinite loop?
In-Reply-To: <b96phq+89ng@eGroups.com>
Message-ID: <71B2F9FE-7F4C-11D7-86C5-000393A95A4A@jguru.com>

Ok, i see the problem now.  You are asking it to walk the sibling list 
and then each visit walks the same sibling list.

See the antlr tree classes for things like toStringList and 
toStringTree; they should be doing the tree walk properly. :)

Ter

On Monday, May 5, 2003, at 03:45 PM, jw9315 wrote:

> Hi All,
> I'm pretty sure that my tree is a tree and not a Directed Acyclic
> Graph, because I am using the tree grammars from the example
> directory in ANTLR, so I have not coded it myself, I am just running
> the algorithm below on the AST in memory from the example program,
> but I can't figure out why it goes over itself so many times before
> stopping? Should it not do each branch of the tree just once? This is
> messing up the interpretation that I am trying to do in the tree...
> Thanks in advance,
> Jon
>
> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...>
> wrote:
>> Hi.  Most likely, your tree is not a tree, but a DAG ;)  It was
> perhaps
>> improperly built and has a child or sibling "back" link. :)
>>
>> Ter
>>
>> On Monday, May 5, 2003, at 06:56  AM, jw9315 wrote:
>>
>>> Apologies, the algorithm was not stuck in a loop, it was just
> taking
>>> so long to complete that I did not notice! It still seems to go
>>> through the same branch many times though, I was wondering if it
> was
>>> meant to do this, or it was an error in the implementation of the
>>> algorithm?
>>> Thanks,
>>> Jon
>>>
>>> --- In antlr-interest@yahoogroups.com, "jw9315" <jw9315@b...>
> wrote:
>>>> Hi,
>>>> I implemented the following algorithm to walk an AST as suggested
>>> by
>>>> a member of this group:
>>>>
>>>> // Start
>>>> void visit( AST tree )
>>>>  {
>>>>          AST child = tree.getFirstChild();
>>>>          System.out.println("_" + child);
>>>>          // Test to see if node has a child
>>>>          if( child != null)
>>>> 	 {
>>>> 		 System.out.println(child);
>>>>                  // Call method recursively
>>>> 		 visit( child );
>>>> 	 }
>>>>          // Else there were no children
>>>>          AST sibling = tree.getNextSibling();
>>>>          while( sibling != null)
>>>> 	 {
>>>> 	 	System.out.println(sibling);
>>>> 		visit( sibling );
>>>> 		sibling = sibling .getNextSibling();
>>>>  }
>>>> // End
>>>>
>>>> However, I find that this enters an infinite loop and prints the
>>> tree
>>>> out over and over again. Have I implemented the algorithm
>>> correctly,
>>>> and if so, could someone tell me how to test for the fact that I
>>> have
>>>> walked the whole tree? Is there a special command for this?
>>>> Thanks in advance,
>>>> Jon
>>>
>>>
>>>
>>>
>>> Your use of Yahoo! Groups is subject to
>>> http://docs.yahoo.com/info/terms/
>>>
>>>
>>>
>> --
>> Co-founder, http://www.jguru.com
>> Creator, ANTLR Parser Generator: http://www.antlr.org
>> Co-founder, http://www.peerscope.com link sharing, pure-n-simple
>> Lecturer in Comp. Sci., University of San Francisco
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From zai-qiang.leng at sybase.com  Mon May  5 20:08:58 2003
From: zai-qiang.leng at sybase.com (zai-qiang.leng@sybase.com)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Is there any way to split a huge grammar file(.g) into several piece?
Message-ID: <OFA420AF5A.3C6CAF48-ON48256D1E.00112C69@sybase.com>

Hi, all

Is there any way to split a huge grammar file (.g) into several pieces?
Just like YACC's include command.

Thanks
Zaiqiang



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ramyasivadas at yahoo.co.in  Mon May  5 21:31:42 2003
From: ramyasivadas at yahoo.co.in (ramyasivadas)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Re: Problem with existence of the same literal in two rules
In-Reply-To: <b8u26f+cto2@eGroups.com>
Message-ID: <b97dre+6487@eGroups.com>

Hi,
Thank you so much for your reply.
Thank you for the efforts you have taken to explain the solution in 
detail.
I'm trying out the solution.

But when i define the STRING as follows,
STRING : ('a'..'z' | 'A'..'Z') ('a'..'z' | 'A'..'Z'|INT)*
the grammar doesn't compile at all.I think it gets caught in an 
infinite loop somewhere. My lookahead is 20. Do i have to change that?

I also tried defining STRING as 
STRING : ('a'..'z' | 'A'..'Z') ('a'..'z' | 'A'..'Z'|INT)+
Even this gets into an infinite loop.

Can you please suggest me a solution for defining the string.

Thanks in advance.

Regards,
Ramya



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From vivek_bhaskar at hotmail.com  Mon May  5 21:36:34 2003
From: vivek_bhaskar at hotmail.com (vivek bhaskar)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Re: Problem with existence of the same literal in two rules
Message-ID: <Law14-F662kjnzzmZ4p00016a48@hotmail.com>

Hey ramya,
for default k(=1), in my lexer i have used following and its working fine.
STRING:	('+'|'-')? (DIGIT)+
	|  ('a'..'z' | 'A'..'Z' | '_') ( 'a'..'z' | 'A'..'Z' | '_' | DIGIT |'#' | 
'\\')*
	| '"' (~'"'|'%'|'=')* '"'
	| '\'' (~'\'')* '\''
	;

protected
DIGIT:	'0'..'9'
	;
vivek






>From: "ramyasivadas" <ramyasivadas@yahoo.co.in>
>Reply-To: antlr-interest@yahoogroups.com
>To: antlr-interest@yahoogroups.com
>Subject: [antlr-interest] Re: Problem with existence of the same literal in 
>two rules
>Date: Tue, 06 May 2003 04:31:42 -0000
>
>Hi,
>Thank you so much for your reply.
>Thank you for the efforts you have taken to explain the solution in
>detail.
>I'm trying out the solution.
>
>But when i define the STRING as follows,
>STRING : ('a'..'z' | 'A'..'Z') ('a'..'z' | 'A'..'Z'|INT)*
>the grammar doesn't compile at all.I think it gets caught in an
>infinite loop somewhere. My lookahead is 20. Do i have to change that?
>
>I also tried defining STRING as
>STRING : ('a'..'z' | 'A'..'Z') ('a'..'z' | 'A'..'Z'|INT)+
>Even this gets into an infinite loop.
>
>Can you please suggest me a solution for defining the string.
>
>Thanks in advance.
>
>Regards,
>Ramya
>
>
>
>
>
>Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


_________________________________________________________________
Find lost friends. Revive old flames. http://www.batchmates.com/msn.asp Only 
on Batchmates.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Mon May  5 22:26:48 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Is there any way to split a huge grammar file(.g) into several piece?
In-Reply-To: <OFA420AF5A.3C6CAF48-ON48256D1E.00112C69@sybase.com>
Message-ID: <55E28ADA-7F83-11D7-8C8E-000393BB647E@jguru.com>

You can subclass a grammar. :)

Terence
On Monday, May 5, 2003, at 08:08  PM, zai-qiang.leng@sybase.com wrote:

> Hi, all
>
> Is there any way to split a huge grammar file (.g) into several pieces?
> Just like YACC's include command.
>
> Thanks
> Zaiqiang
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ramyasivadas at yahoo.co.in  Mon May  5 22:48:42 2003
From: ramyasivadas at yahoo.co.in (ramyasivadas)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Re: Problem with existence of the same literal in two rules
In-Reply-To: <Law14-F662kjnzzmZ4p00016a48@hotmail.com>
Message-ID: <b97ibq+ic7u@eGroups.com>

Hi Vivek,
Thanks for your reply.
But if i change my lookahead from 20 to 1, i'll definitely have other 
problems.
Let me try changing the lookahead.
If anyone else has faced the same problem and have found a solution, 
please do mail me the same.
Thanks in advance.
Regards,
Ramya



--- In antlr-interest@yahoogroups.com, "vivek bhaskar" 
<vivek_bhaskar@h...> wrote:
> Hey ramya,
> for default k(=1), in my lexer i have used following and its 
working fine.
> STRING:	('+'|'-')? (DIGIT)+
> 	|  ('a'..'z' | 'A'..'Z' | '_') ( 'a'..'z' | 'A'..'Z' | '_' | 
DIGIT |'#' | 
> '\\')*
> 	| '"' (~'"'|'%'|'=')* '"'
> 	| '\'' (~'\'')* '\''
> 	;
> 
> protected
> DIGIT:	'0'..'9'
> 	;
> vivek
> 
> 
> 
> 
> 
> 
> >From: "ramyasivadas" <ramyasivadas@y...>
> >Reply-To: antlr-interest@yahoogroups.com
> >To: antlr-interest@yahoogroups.com
> >Subject: [antlr-interest] Re: Problem with existence of the same 
literal in 
> >two rules
> >Date: Tue, 06 May 2003 04:31:42 -0000
> >
> >Hi,
> >Thank you so much for your reply.
> >Thank you for the efforts you have taken to explain the solution in
> >detail.
> >I'm trying out the solution.
> >
> >But when i define the STRING as follows,
> >STRING : ('a'..'z' | 'A'..'Z') ('a'..'z' | 'A'..'Z'|INT)*
> >the grammar doesn't compile at all.I think it gets caught in an
> >infinite loop somewhere. My lookahead is 20. Do i have to change 
that?
> >
> >I also tried defining STRING as
> >STRING : ('a'..'z' | 'A'..'Z') ('a'..'z' | 'A'..'Z'|INT)+
> >Even this gets into an infinite loop.
> >
> >Can you please suggest me a solution for defining the string.
> >
> >Thanks in advance.
> >
> >Regards,
> >Ramya
> >
> >
> >
> >
> >
> >Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/
> >
> >
> 
> 
> _________________________________________________________________
> Find lost friends. Revive old flames. 
http://www.batchmates.com/msn.asp Only 
> on Batchmates.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From m_kabacinski at poczta.onet.pl  Tue May  6 01:28:28 2003
From: m_kabacinski at poczta.onet.pl (maciej1205)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] problem with ast
Message-ID: <b97rnc+4fu5@eGroups.com>

Hi,

I'm trying to build aa compiler for small language ( int type, bool 
type, for , while, ..)
ex.
 program 
var a : int;
var b : int;
var c : bool ;
begin
 if c then b=a+b;
end ;
endprog;

I've already build parser but without rules.

problem is, I can't build ast tree for defined variables.
my idea is to build tree :
int_type                 bool_type
   |                         |
   a----value                c-----value
   | 
   b----value
   
Can anybody help me with this ?




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Tue May  6 01:37:06 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] DIY AST error recovery problem
In-Reply-To: <028701c311fb$54d7acf0$542d32d2@athlon900>; from rbencina@iprimus.com.au on Sun, May 04, 2003 at 03:08:39PM +1000
References: <028701c311fb$54d7acf0$542d32d2@athlon900>
Message-ID: <20030506103705.A7990@cs.utwente.nl>

On Sun, May 04, 2003 at 03:08:39PM +1000, Ross Bencina wrote:
> I'm constructing my own AST (not using ANTLR's built in tree building) and
> have come accross a problem with my code when a parse error happens...
>
> ---
> ident           returns [ std::auto_ptr<IdentifierNode> result ]
>                 : a:IDENT
>                 {
>                     result.reset( new IdentifierNode(
>                         SRCLOC(a),
>                         Identifier( a->getText().c_str() );
>                 }
>                 ;
>
> name            returns [ std::auto_ptr<NameDeclaration> result ]
>                 {
>                     std::auto_ptr<IdentifierNode> a;
>                     SaolConstants::Width b = SaolConstants::SINGLE_VALUE;
>                 }
>                 : a=ident ( LBRACK b=arrayLength RBRACK )?
>                     {
>                         SourceLocation srcLoc = a->sourceLocation; //
> ***crash
>                         result.reset( new NameDeclaration( srcLoc, a, b ) );
>                     }
>                 ;
>
> The above code is for parsing declarations like the following:
>
> ivar x, illegal, y[10];
>
> The caller of name() looks like:
>
> namelist        returns [ std::auto_ptr<NameList> result ]
>                 {
>                     result.reset( new NameList() );
>                     std::auto_ptr<NameDeclaration> a, b;
>                 }
>                 : a=name { result->push_back( a.release() ); }
>                     ( COMMA b=name { result->push_back( b.release() ); }
>                     )*
>                 {
>                     result->sourceLocationBegin =
> result->front()->sourceLocation;
>                 }
>     ;
>
> Ideally, if ident() or name() fails, then the illegal NameDeclaration simply
> wouldn't be added to the NameList.
> ---
>
> At the moment, if the ident rule fails, then ident() returns an empty (null)
> auto_ptr and the a-> expression in name() crashes. I could explicitly check
> return values for null before using them, but right now I don't understand
> the problem enough to know which return values to check - I would prefer not
> to have to check every rule's return value for NULL, although I have a
> sinking feeling that's what I will have to do.

I'm assuming you are using the default error handling mechanism? If the
error over a IDENT is handled at the end of the ident rule by the default
error handler it will return a null pointer.

You might get away with turning of the default (or the complete)
errorhandlers for the ident rule. That way the parse error is escalated to
the name rule and the action for with the list will not be performed. Since
ident's error is handled at the end of the name rule.

ident returns [ std::auto_ptr<IdentifierNode> result ]
        options { defaultErrorHandler = false; }
: .......		  

Depends a bit on other rules if this works 100%. Look at the generated code
for ident to get a feel for the effect of this.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Wo das Chaos auf die Ordnung trifft, gewinnt meist das Chaos, weil es
  besser organisiert ist. --- Friedrich Nietzsche


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rbencina at iprimus.com.au  Tue May  6 01:49:08 2003
From: rbencina at iprimus.com.au (Ross Bencina)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] DIY AST error recovery problem
References: <028701c311fb$54d7acf0$542d32d2@athlon900> <20030506103705.A7990@cs.utwente.nl>
Message-ID: <023f01c313ac$5c2fe050$11c932d2@athlon900>

Ric Klaren wrote:
> > At the moment, if the ident rule fails, then ident() returns an empty
(null)
> > auto_ptr and the a-> expression in name() crashes. I could explicitly
check
> > return values for null before using them, but right now I don't
understand
> > the problem enough to know which return values to check - I would prefer
not
> > to have to check every rule's return value for NULL, although I have a
> > sinking feeling that's what I will have to do.
>
> I'm assuming you are using the default error handling mechanism?

Yes, although until Monty's RTFM response I didn't even know that there was
anything other than the default error handling.

> If the
> error over a IDENT is handled at the end of the ident rule by the default
> error handler it will return a null pointer.

That's right.

> You might get away with turning of the default (or the complete)
> errorhandlers for the ident rule. That way the parse error is escalated to
> the name rule and the action for with the list will not be performed.
Since
> ident's error is handled at the end of the name rule.
>
> ident returns [ std::auto_ptr<IdentifierNode> result ]
>         options { defaultErrorHandler = false; }
> : .......
>
> Depends a bit on other rules if this works 100%. Look at the generated
code
> for ident to get a feel for the effect of this.

Ok, will do. Right now this error handling stuff is a mysterious and
orthogonal dimension which I had entirely failed to consider - which is
disturbing me to say the least. I have a 1000 line .g file with C++ actions
like the above, and absolutely no handling for these kinds of errors -
working out a strategy to make the whole file error-safe seems like a
daunting task at this stage. Presumably every rule in the entire grammar
could throw a parsing exception and crash various parts of my AST generation
code - perhaps the best strategy is to turn off all error handlers, that way
the worst thing that can happen is the parser will barf, then I can slowly
re-introduce my own (or the default) exception handling at places where I
know it is safe to do so - at the statement level is one place that comes to
mind. I still don't understand how to invoke ANTLR's error recovery code if
I insert my own catch blocks.

Best wishes

Ross.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From imolanet at yahoo.it  Tue May  6 01:51:53 2003
From: imolanet at yahoo.it (Patrik Suzzi)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Generating C# code from C++
Message-ID: <b97t39+iiuh@eGroups.com>

Hi, thanks for reply to message 8189.

I've spent lot of time visiting webpages that talk about code 
translation and generation, but still unexperienced about it.

I've seen on mailgate a discussion (comp.compilers.pcct) about 
translation form C++ to C# using two different tecniques:

Given a Cpp grammar .. A OR B .

Tecnique A
1) using Antlr to generate lexer & parser. 
2) using parser to generate AST
3) using visitor to scan and transfor the tree
4) using the transformed AST with  CodeDOM (C#)

(in this case I must pay attention to some limitation of CodeDOM. For 
example it can't build a switch .. )

Tecnique B
1) I suppose must give the Cpp source to ANTLR
2) Antlr build an XML ast from the given source
3) With C# I can scan XML to 
4.1)generate code passing through AST build and with CodeDOM
  or
4.2)generate code passing trough XSLT transformation

(I think there were some errors in this case explaination)

 *** Can someone tell me what think about these Tecniques ?

(can someone excuse me for my terrible english language ?) 

I'm still searching for better strategies to project, and if anyone 
wants a free worker for anything similar 'm here. (imolanet@ .. )

Think working about free project is the better way to Learn and Help 
others.

Excuse me for stealing your time
 Thanks : Patrik





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Matthew.Ford at forward.com.au  Tue May  6 01:59:10 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] problem with ast
References: <b97rnc+4fu5@eGroups.com>
Message-ID: <000c01c313ad$c2675e10$0200a8c0@NOTEBOOK>

My suggestion is

var -- a -- type

and then put this in a symbol table on the first pass with a tree walker.
Or even better put it in the symbol table stright from the parser.
I note that var a : int;  does not set a value for a or if it does it is a
default value so you do not need to
generate any output code for this variable until it is first used.  At which
point you look up the symbol
table and if it has not been allocated memory and intialized you do it then.

matthew
----- Original Message -----
From: "maciej1205" <m_kabacinski@poczta.onet.pl>
To: <antlr-interest@yahoogroups.com>
Sent: Tuesday, May 06, 2003 6:28 PM
Subject: [antlr-interest] problem with ast


> Hi,
>
> I'm trying to build aa compiler for small language ( int type, bool
> type, for , while, ..)
> ex.
>  program
> var a : int;
> var b : int;
> var c : bool ;
> begin
>  if c then b=a+b;
> end ;
> endprog;
>
> I've already build parser but without rules.
>
> problem is, I can't build ast tree for defined variables.
> my idea is to build tree :
> int_type                 bool_type
>    |                         |
>    a----value                c-----value
>    |
>    b----value
>
> Can anybody help me with this ?
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From m_kabacinski at poczta.onet.pl  Tue May  6 06:51:57 2003
From: m_kabacinski at poczta.onet.pl (maciej1205)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] symbol table
Message-ID: <b98elt+f59i@eGroups.com>

When I try to add something to symbol table i get the "undefined
reference to
zzs_new(char*) " message.
I have sym.h included.
What am i doiing wrong ?. I can define for example Sym *p , but i
can't use any of
sym functions. 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jw9315 at bris.ac.uk  Tue May  6 07:19:57 2003
From: jw9315 at bris.ac.uk (jw9315)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Difference between toStringList() and toStringTree()?
Message-ID: <b98gad+h1oi@eGroups.com>

Hi,
I found the following methods in BaseAST.java that walk AST's; I was 
wondering what the difference between them is, as they seem to print 
the same thing? In addition does anyone know why the BaseAST cast is 
needed in the methods? Lastly, is there a name for the method used to 
walk the trees; are they depth-first or breadth-first etc..?
Thanks in advance,
Jon

Methods - toStringList() and toStringTree():
'
    /** Print out a child-sibling tree in LISP notation */
    public String toStringList() {
        AST t = this;
        String ts = "";
        if (t.getFirstChild() != null) ts += " (";
        ts += " " + this.toString();
        if (t.getFirstChild() != null) {
            ts += ((BaseAST)t.getFirstChild()).toStringList();
        }
        if (t.getFirstChild() != null) ts += " )";
        if (t.getNextSibling() != null) {
            ts += ((BaseAST)t.getNextSibling()).toStringList();
        }
        return ts;
    }

    public String toStringTree() {
        AST t = this;
        String ts = "";
        if (t.getFirstChild() != null) ts += " (";
        ts += " " + this.toString();
        if (t.getFirstChild() != null) {
            ts += ((BaseAST)t.getFirstChild()).toStringList();
        }
        if (t.getFirstChild() != null) ts += " )";
        return ts;
    }

'


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Tue May  6 07:20:25 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Re: AST algorithm stuck in infinite loop?
In-Reply-To: <b95qjb+c6is@eGroups.com>
Message-ID: <20030506142025.95208.qmail@web20420.mail.yahoo.com>

Everybody, if the original goal was to read a Java
source file and output the names of the classes in it,
and their arguments, wouldn't it be just as easy to
modify java.tree.g to store or print the desired
information as it walks the tree?  If this weren't for
educational purposes, of course, it would be much
easier to just run javadoc...

-Matt

--- jw9315 <jw9315@bris.ac.uk> wrote:
> Apologies, the algorithm was not stuck in a loop, it
> was just taking 
> so long to complete that I did not notice! It still
> seems to go 
> through the same branch many times though, I was
> wondering if it was 
> meant to do this, or it was an error in the
> implementation of the 
> algorithm?
> Thanks,
> Jon
> 
> --- In antlr-interest@yahoogroups.com, "jw9315"
> <jw9315@b...> wrote:
> > Hi,
> > I implemented the following algorithm to walk an
> AST as suggested 
> by 
> > a member of this group:
> > 
> > // Start
> > void visit( AST tree )
> >  {
> >          AST child = tree.getFirstChild();
> >          System.out.println("_" + child);
> >          // Test to see if node has a child
> >          if( child != null) 
> > 	 {
> > 		 System.out.println(child);
> >                  // Call method recursively
> > 		 visit( child ); 
> > 	 }
> >          // Else there were no children
> >          AST sibling = tree.getNextSibling();
> >          while( sibling != null)
> > 	 {
> > 	 	System.out.println(sibling);
> > 		visit( sibling );
> > 		sibling = sibling .getNextSibling();
> >  }
> > // End
> > 
> > However, I find that this enters an infinite loop
> and prints the 
> tree 
> > out over and over again. Have I implemented the
> algorithm 
> correctly, 
> > and if so, could someone tell me how to test for
> the fact that I 
> have 
> > walked the whole tree? Is there a special command
> for this?
> > Thanks in advance,
> > Jon
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo.
http://search.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jw9315 at bris.ac.uk  Tue May  6 07:28:50 2003
From: jw9315 at bris.ac.uk (jw9315)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Re: AST algorithm stuck in infinite loop?
In-Reply-To: <20030506142025.95208.qmail@web20420.mail.yahoo.com>
Message-ID: <b98gr2+rmro@eGroups.com>

Hi, 
yes I can see that would be easier, but unfortunately I am have very 
little to implement the solution, and I was using this method to get 
a feel for the structure of AST's..
Cheers,
Jon

--- In antlr-interest@yahoogroups.com, Matt Benson <gudnabrsam@y...> 
wrote:
> Everybody, if the original goal was to read a Java
> source file and output the names of the classes in it,
> and their arguments, wouldn't it be just as easy to
> modify java.tree.g to store or print the desired
> information as it walks the tree?  If this weren't for
> educational purposes, of course, it would be much
> easier to just run javadoc...
> 
> -Matt
> 
> --- jw9315 <jw9315@b...> wrote:
> > Apologies, the algorithm was not stuck in a loop, it
> > was just taking 
> > so long to complete that I did not notice! It still
> > seems to go 
> > through the same branch many times though, I was
> > wondering if it was 
> > meant to do this, or it was an error in the
> > implementation of the 
> > algorithm?
> > Thanks,
> > Jon
> > 
> > --- In antlr-interest@yahoogroups.com, "jw9315"
> > <jw9315@b...> wrote:
> > > Hi,
> > > I implemented the following algorithm to walk an
> > AST as suggested 
> > by 
> > > a member of this group:
> > > 
> > > // Start
> > > void visit( AST tree )
> > >  {
> > >          AST child = tree.getFirstChild();
> > >          System.out.println("_" + child);
> > >          // Test to see if node has a child
> > >          if( child != null) 
> > > 	 {
> > > 		 System.out.println(child);
> > >                  // Call method recursively
> > > 		 visit( child ); 
> > > 	 }
> > >          // Else there were no children
> > >          AST sibling = tree.getNextSibling();
> > >          while( sibling != null)
> > > 	 {
> > > 	 	System.out.println(sibling);
> > > 		visit( sibling );
> > > 		sibling = sibling .getNextSibling();
> > >  }
> > > // End
> > > 
> > > However, I find that this enters an infinite loop
> > and prints the 
> > tree 
> > > out over and over again. Have I implemented the
> > algorithm 
> > correctly, 
> > > and if so, could someone tell me how to test for
> > the fact that I 
> > have 
> > > walked the whole tree? Is there a special command
> > for this?
> > > Thanks in advance,
> > > Jon
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
> 
> __________________________________
> Do you Yahoo!?
> The New Yahoo! Search - Faster. Easier. Bingo.
> http://search.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Wed May  7 02:44:45 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] [comp.compilers.tools.pccts] Re: Is there a run-time parsing facility
Message-ID: <b9akid+95ki@eGroups.com>

The exchange below from the pccts newsgroup properly belongs here...

I'd just like to add that the technique Kunle describes applies to 
Java as well. 

Not sure about how it can be done with C++ in the general case, Ric?. 
Monty?

Cheers,

Micheal

<=========== from comp.compilers.tools.pccts =============>

Soumen Sarkar wrote:
> All,
> 
> Currently the parsing technology allows grammar to automation
> translation in compile time only. For example if I have to validate 
a
> text stream that I am receiving, I can not load a grammar file
> dynamically and validate the text stream.

<SNIP>

> Java/C# offer reflection features which allows equivalent programs
> to be authored both at compile time or runtime.

For C#, you could investigate dymamic assemblies - assemblies that 
you create at run time. Then you could:
1. Load your grammar file (note your grammar files must obviously be 
error free)
2. Execute ANTLR to generate C# source
3. Create an assembly dynamically that contains your Lexer/Parser (or 
better still architect your system to use a single pre-generated 
Lexer)
4. Load the assembly into your AppDomain and use the parser as usual

Some issues:
1. To be able to access the functionality in dynamic assemblies, your 
types should (must?) implement interfaces that your system is already 
aware of. For Lexers, ANTLR already has TokenStream etc. You will 
need to provide similar for Parsers and TreeParsers and use 
the "classHeaderSuffix"  option in your grammar files to ensure your 
Parsers/TreeParsers implements them.
2. Your interface above must define a common entry point for 
validation (and your grammars must implement the entry point) or you 
will need to use reflection to invoke arbitary entry points.

Anyways, I guess you've got the idea...

Good luck,

Kunle
ANTLR/C# codegen team

> Therefore, my question is if there is any thought/effort to make the
> grammar to automation (a computational service) make available at 
run
> time? 
> 
> Does this proposal/wish make sense at all?
> 
> If this would be possible, I just have to supply a grammar file at
> run time to validate an ASCII stream -- I do not have to make a
> commitment at compile time. Only commitment I make that I will 
supply
> a valid grammar file to which the ASCII stream is validated (no nore
> grammar to Java/C# codegen/compile/write code on top of generated
> code). 
> 
> Thanks,
> Soumen Sarkar.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Wed May  7 03:08:11 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] [comp.compilers.tools.pccts] Re: Is there a run-time parsing facility
In-Reply-To: <b9akid+95ki@eGroups.com>; from open.zone@virgin.net on Wed, May 07, 2003 at 09:44:45AM -0000
References: <b9akid+95ki@eGroups.com>
Message-ID: <20030507120811.F7990@cs.utwente.nl>

Hi,

On Wed, May 07, 2003 at 09:44:45AM -0000, micheal_jor wrote:
> The exchange below from the pccts newsgroup properly belongs here...
>
> I'd just like to add that the technique Kunle describes applies to
> Java as well.
>
> Not sure about how it can be done with C++ in the general case, Ric?.
> Monty?

You could hack something together that does this I guess. Dynamic loading
works pretty ok on unix, yet you need a working compiler set, some way to
specify the right libraries and stuff for the loaded parts.

Best would probably be to rewrite a bit and convert the switch statements
and contents to tables with char ranges and function pointers to the
actions (bit of a simplified description this). These then could be loaded
on runtime. Parser would then degenerate to a driver for these tables.

I guess it's doable but not with the time I have to spent on antlr atm (and
then I'm not even mentioning d*mn MSVC)

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Chaos is found in greatest abundance wherever order is being sought.
  --- Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Wed May  7 11:27:06 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] TreeParser fails to find matched node in input tree
Message-ID: <b9bj5r+77c6@eGroups.com>

Given the rules below (assume memberDecl is properly defined), my 
TreeParser always complains about the RCURLY not being found (it 
finds ASTNULL instead) even though the RCURLY is definitely in the 
input tree.

classDecl
: #( CLASS IDENT
     #( BASE (typeName)* )
     #( BODY memberDecls RCURLY )
  )

memberDecls
: ( memberDecl )*

I am using ANTLR/C# and I just wanted to check this isn't a known 
issue.

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sarkar_soumen at yahoo.com  Wed May  7 11:44:37 2003
From: sarkar_soumen at yahoo.com (sarkar_soumen)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] [comp.compilers.tools.pccts] Re: Is there a run-time parsing facility
In-Reply-To: <20030507120811.F7990@cs.utwente.nl>
Message-ID: <b9bk6l+c85d@eGroups.com>

>>From a dynamic grammar/automation end-user point of view I
have the following "use cases":

   1. I am receiving a text string. I just supply a correct
      grammar file. The text string passes or fails. If the
      text string fails, I get pointer to text string which
      fails showing corresponding parser/lexer rule.

   2. If I supply a wrong grammar file, I get an exception
      showing where in grammar file the error occurs.

   3. Validation of text string does not cause unbound loop.
      Probably max-loop is configurable.

   4. If I provide grammar rule, I get text fragment for a valid
      text string. In other words I retrive text fragments by
      parser/lexer rules. For example I say give me the substrings
      corresponding to SQL DELETE statements.

Implementation details should be hidden. As I understand a parser
generator provides computational service by which a program
understands text by systematically breaking it by parser/lexer
rules. I just would like to avail this service without any
compile time/typing commitment. If I require I am willing to
do type commitment in the sense of dynamically using ANTLR types
but NO compile time commitment. I do not wish to use any generated
types (only type commitment is in terms of predefined ANTLR
types).

This may be difficult to do. I just wanted to clarify end user
requirements on dynamic grammar/automation computational service.

Regarding performance, this kind implementation may be horribly slow
today but may not be in future.

Thanks,
Soumen Sarkar.

--- In antlr-interest@yahoogroups.com, Ric Klaren <klaren@c...> 
wrote:
> Hi,
> 
> On Wed, May 07, 2003 at 09:44:45AM -0000, micheal_jor wrote:
> > The exchange below from the pccts newsgroup properly belongs 
here...
> >
> > I'd just like to add that the technique Kunle describes applies 
to
> > Java as well.
> >
> > Not sure about how it can be done with C++ in the general case, 
Ric?.
> > Monty?
> 
> You could hack something together that does this I guess. Dynamic 
loading
> works pretty ok on unix, yet you need a working compiler set, some 
way to
> specify the right libraries and stuff for the loaded parts.
> 
> Best would probably be to rewrite a bit and convert the switch 
statements
> and contents to tables with char ranges and function pointers to 
the
> actions (bit of a simplified description this). These then could 
be loaded
> on runtime. Parser would then degenerate to a driver for these 
tables.
> 
> I guess it's doable but not with the time I have to spent on antlr 
atm (and
> then I'm not even mentioning d*mn MSVC)
> 
> Cheers,
> 
> Ric



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jean-louis.boulanger at hds.utc.fr  Wed May  7 11:59:19 2003
From: jean-louis.boulanger at hds.utc.fr (Boulanger Jean-Louis)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] (unknown)
Message-ID: <1052333959.3eb957875f46b@mail.hds.utc.fr>


Hello,

 I worked on an IDE (www.chez.com/abtools) for the B Language with (a parser, a
typer, a decompilator, a GOP, ...). In another project, we want parse some VHDL
program and generate B code.

 My first idea, is from the AST produce by VHDL parsing I generate an AST for
the B langage and I use all my B tools.

 For do this, I can construct a treewalker with two importVocab clause, one for
VHDL and one for B. And I think that I can use B AST constructor for generate my
new B AST.

 When I ask the JAVA code generation from antlr, we have no probleme but when I
want compile this generated code we have many problem.

  Do you understand my problem ?
  Do you have a solution ?

  We can encasuplate my B language in a lib that provide some method for AST
generation but it is a big work. Do you have another solution ?




-------------------------------------------------
Laboratoire Heudiasyc. UMR CNRS 6599
http://www.hds.utc.fr


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Wed May  7 12:09:38 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Difference between toStringList() and toStringTree()?
In-Reply-To: <b98gad+h1oi@eGroups.com>
Message-ID: <72A209F2-80BF-11D7-AC60-000393BB647E@jguru.com>

toStringList considers t.getNextSibling() where t is the root tree node 
passed in whereas toStringTree() does not: it goes straight down and 
then does a toStringList() ;)

There should be some "find" type methods in there you can use for depth 
first walking etc...

Ter
On Tuesday, May 6, 2003, at 07:19  AM, jw9315 wrote:

> Hi,
> I found the following methods in BaseAST.java that walk AST's; I was
> wondering what the difference between them is, as they seem to print
> the same thing? In addition does anyone know why the BaseAST cast is
> needed in the methods? Lastly, is there a name for the method used to
> walk the trees; are they depth-first or breadth-first etc..?
> Thanks in advance,
> Jon
>
> Methods - toStringList() and toStringTree():
> '
>     /** Print out a child-sibling tree in LISP notation */
>     public String toStringList() {
>         AST t = this;
>         String ts = "";
>         if (t.getFirstChild() != null) ts += " (";
>         ts += " " + this.toString();
>         if (t.getFirstChild() != null) {
>             ts += ((BaseAST)t.getFirstChild()).toStringList();
>         }
>         if (t.getFirstChild() != null) ts += " )";
>         if (t.getNextSibling() != null) {
>             ts += ((BaseAST)t.getNextSibling()).toStringList();
>         }
>         return ts;
>     }
>
>     public String toStringTree() {
>         AST t = this;
>         String ts = "";
>         if (t.getFirstChild() != null) ts += " (";
>         ts += " " + this.toString();
>         if (t.getFirstChild() != null) {
>             ts += ((BaseAST)t.getFirstChild()).toStringList();
>         }
>         if (t.getFirstChild() != null) ts += " )";
>         return ts;
>     }
>
> '
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Wed May  7 13:13:10 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Re: TreeParser fails to find matched node in input tree
In-Reply-To: <b9bj5r+77c6@eGroups.com>
Message-ID: <b9bpcm+oalf@eGroups.com>

Update:

As a kind of sanity check, I have modified the grammar to generate 
Java and C++ instead and the relevant section of the output is the 
same. This issue would be present in a Java and C++ version of the 
TreeParser too.

Is this related to the complexity of the pattern the TreeParser is 
matching in the classDecl rule?. Should I split the rule into a 
number of less complex rules? e.g.

classDecl
: #( CLASS IDENT
     baseSpec
     body
  )

Cheers,

Micheal


> Given the rules below (assume memberDecl is properly defined), my 
> TreeParser always complains about the RCURLY not being found (it 
> finds ASTNULL instead) even though the RCURLY is definitely in the 
> input tree.
> 
> classDecl
> : #( CLASS IDENT
>      #( BASE (typeName)* )
>      #( BODY memberDecls RCURLY )
>   )
> 
> memberDecls
> : ( memberDecl )*
> 
> I am using ANTLR/C# and I just wanted to check this isn't a known 
> issue.
> 
> Cheers,
> 
> Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Wed May  7 14:50:46 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] WORKAROUND: Re: TreeParser fails to find matched node in input tree
In-Reply-To: <b9bpcm+oalf@eGroups.com>
Message-ID: <b9bv3m+4em2@eGroups.com>

OK, I got this working. I consider this a workaround for this issue 
unless someone can show me that I've missed some fundamental point 
about the capability of the TreeParser's tree-pattern matching 
ability. This is what I did:

classDecl
: #( CLASS IDENT
     #( BASE (typeName)* )
     #( BODY memberDecls RCURLY )
  )

memberDecls
: #( MEMBERS
     ( memberDecl )*
   )

I changed the Parser and TreeParser to collect all memberDecl nodes 
into a subtree that has a MEMBER node as it's root (see the changed 
memberDecls rule). I was actually planning to do this but I didn't 
expect that it would be required.

Cheers,

Micheal


> Update:
> 
> As a kind of sanity check, I have modified the grammar to generate 
> Java and C++ instead and the relevant section of the output is the 
> same. This issue would be present in a Java and C++ version of the 
> TreeParser too.
> 
> Is this related to the complexity of the pattern the TreeParser is 
> matching in the classDecl rule?. Should I split the rule into a 
> number of less complex rules? e.g.
> 
> classDecl
> : #( CLASS IDENT
>      baseSpec
>      body
>   )
> 
> Cheers,
> 
> Micheal
> 
> 
> > Given the rules below (assume memberDecl is properly defined), my 
> > TreeParser always complains about the RCURLY not being found (it 
> > finds ASTNULL instead) even though the RCURLY is definitely in 
the 
> > input tree.
> > 
> > classDecl
> > : #( CLASS IDENT
> >      #( BASE (typeName)* )
> >      #( BODY memberDecls RCURLY )
> >   )
> > 
> > memberDecls
> > : ( memberDecl )*
> > 
> > I am using ANTLR/C# and I just wanted to check this isn't a known 
> > issue.
> > 
> > Cheers,
> > 
> > Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Wed May  7 15:11:45 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] [comp.compilers.tools.pccts] Re: Is there a run-time parsing facility
In-Reply-To: <20030507120811.F7990@cs.utwente.nl>
Message-ID: <b9c0b1+l8cl@eGroups.com>

> Hi,

Hi Ric,

> > Not sure about how it can be done with C++ in the general case, 
Ric?.
> > Monty?
> 
> You could hack something together that does this I guess. Dynamic 
loading
> works pretty ok on unix, yet you need a working compiler set, some 
way to
> specify the right libraries and stuff for the loaded parts.

Dynamic loading (DLL) is at the core of Windows too.

> Best would probably be to rewrite a bit and convert the switch 
statements
> and contents to tables with char ranges and function pointers to the
> actions (bit of a simplified description this). These then could be 
loaded
> on runtime. Parser would then degenerate to a driver for these 
tables.

My first thought was defining COM-like binary interfaces for the 
Lexer/Parser/TreeParser that generated components will be required to 
implement. All interaction is then through those binary interfaces. 
Of course this is much easier for Windows - since COM is present - 
than other platforms (although Mozilla's XPCOM fills the gap nicely).
 
In the end, it similar to the C#/Java solution actually but the devil 
is in the details as you mentioned.

> I guess it's doable but not with the time I have to spent on antlr 
atm (and
> then I'm not even mentioning d*mn MSVC)

With MS's recent-ish "acquisitions" of quite a few good C++ guys like 
Herb Sutter and Stan Lippman, it can only get better right?

Cheers!,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Wed May  7 15:19:43 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] [comp.compilers.tools.pccts] Re: Is there a run-time parsing facility
In-Reply-To: <b9bk6l+c85d@eGroups.com>
Message-ID: <b9c0pv+iedo@eGroups.com>

Hi Soumen,

> From a dynamic grammar/automation end-user point of view I
> have the following "use cases":
> 
>    1. I am receiving a text string. I just supply a correct
>       grammar file. The text string passes or fails. If the
>       text string fails, I get pointer to text string which
>       fails showing corresponding parser/lexer rule.

What additional benefit does this provide beyond the generally 
avaible behavior of raising exceptions?

>    2. If I supply a wrong grammar file, I get an exception
>       showing where in grammar file the error occurs.

Given that run-time systems also have a compile-time capability, I'd 
have thought it was sufficient to simply alert you to the fact that 
there is an error. Grammar file debugging can and should be done 
interactively *before* the grammar is actually used dynamically.

>    3. Validation of text string does not cause unbound loop.
>       Probably max-loop is configurable.

Depends on (2) above.

>    4. If I provide grammar rule, I get text fragment for a valid
>       text string. In other words I retrive text fragments by
>       parser/lexer rules. For example I say give me the substrings
>       corresponding to SQL DELETE statements.

Is that just a special use of a pretty-printing TreeParser?

> Implementation details should be hidden. As I understand a parser
> generator provides computational service by which a program
> understands text by systematically breaking it by parser/lexer
> rules. I just would like to avail this service without any
> compile time/typing commitment. If I require I am willing to
> do type commitment in the sense of dynamically using ANTLR types
> but NO compile time commitment. I do not wish to use any generated
> types (only type commitment is in terms of predefined ANTLR
> types).
> 
> This may be difficult to do. I just wanted to clarify end user
> requirements on dynamic grammar/automation computational service.
> 
> Regarding performance, this kind implementation may be horribly slow
> today but may not be in future.

Are you planning to build such a dynamic generation framework atop 
ANTLR Soumen?

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mikhail at augustmail.com  Wed May  7 15:46:46 2003
From: mikhail at augustmail.com (thesamim)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Re: C++ parser.
In-Reply-To: <170826586F3BD511910D0200C110AAA80540236A@memail03.bco-home.com>
Message-ID: <b9c2cm+4tfo@eGroups.com>

Glad I asked first.

Thanks for the tip!

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Not quite.  ANTLR is a java tool.  To run antlr you will need to
download
> the antlr distribution and then run it as detailed in the
directions.  Then
> feed it your grammar and the C++ parser gets generated.
> 
> You don't need to generate an antlr executable.
> 
> Monty
> 
> -----Original Message-----
> From: thesamim [mailto:mikhail@a...]
> Sent: Friday, May 02, 2003 1:55 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] C++ parser.
> 
> 
> Before I spend a lot of time on this, I want to make sure that I'm not
> misunderstanding something.
> 
> I need to generate a C++ parser from a grammer I already have. The way
> to do this is to get hold of the ANTLR C++ distribution files; build
> the ANTLR executable; feed it my grammer; C++ parser comes out the
> other end.
> 
> Is this correct?
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sarkar_soumen at yahoo.com  Wed May  7 17:00:01 2003
From: sarkar_soumen at yahoo.com (sarkar_soumen)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] [comp.compilers.tools.pccts] Re: Is there a run-time parsing facility
In-Reply-To: <b9c0pv+iedo@eGroups.com>
Message-ID: <b9c6m1+p8hl@eGroups.com>

Hi Michael,

I have interest in dynamic validation of ascii string which
is not XML. I already do this to some extent using bottom most
layer of syntactic hiearchy, namely, Java/C# support of
regular expression at runtime. Exploring to extend
the possibility of validation by loading grammar file at runtime.

There are other interesting applications possible in the
line of "scripting over AST or modified AST". Basically,
I wanted to get past the current idea of language processing
by "compile time/typing commitment". The field where I wanted
apply these ideas are "Model Driven Achitecture/Programming". I
have authored papers on "Model Driven Programming" (in other
words source code generation from models) using XML/XSLT
from the experience of generating 62% code in a J2EE project.
 
Exploring the idea of a generalized parsing/scripting
service along the lines I outlined earlier.

Hope this helps.

Soumen Sarkar. 

--- In antlr-interest@yahoogroups.com, "micheal_jor" 
<open.zone@v...> wrote:
> Hi Soumen,
> 
> > From a dynamic grammar/automation end-user point of view I
> > have the following "use cases":
> > 
> >    1. I am receiving a text string. I just supply a correct
> >       grammar file. The text string passes or fails. If the
> >       text string fails, I get pointer to text string which
> >       fails showing corresponding parser/lexer rule.
> 
> What additional benefit does this provide beyond the generally 
> avaible behavior of raising exceptions?
> 
> >    2. If I supply a wrong grammar file, I get an exception
> >       showing where in grammar file the error occurs.
> 
> Given that run-time systems also have a compile-time capability, 
I'd 
> have thought it was sufficient to simply alert you to the fact 
that 
> there is an error. Grammar file debugging can and should be done 
> interactively *before* the grammar is actually used dynamically.
> 
> >    3. Validation of text string does not cause unbound loop.
> >       Probably max-loop is configurable.
> 
> Depends on (2) above.
> 
> >    4. If I provide grammar rule, I get text fragment for a valid
> >       text string. In other words I retrive text fragments by
> >       parser/lexer rules. For example I say give me the 
substrings
> >       corresponding to SQL DELETE statements.
> 
> Is that just a special use of a pretty-printing TreeParser?
> 
> > Implementation details should be hidden. As I understand a parser
> > generator provides computational service by which a program
> > understands text by systematically breaking it by parser/lexer
> > rules. I just would like to avail this service without any
> > compile time/typing commitment. If I require I am willing to
> > do type commitment in the sense of dynamically using ANTLR types
> > but NO compile time commitment. I do not wish to use any 
generated
> > types (only type commitment is in terms of predefined ANTLR
> > types).
> > 
> > This may be difficult to do. I just wanted to clarify end user
> > requirements on dynamic grammar/automation computational service.
> > 
> > Regarding performance, this kind implementation may be horribly 
slow
> > today but may not be in future.
> 
> Are you planning to build such a dynamic generation framework atop 
> ANTLR Soumen?
> 
> Cheers,
> 
> Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Thu May  8 02:37:12 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] [comp.compilers.tools.pccts] Re: Is there a run-time parsing facility
In-Reply-To: <b9c0b1+l8cl@eGroups.com>; from open.zone@virgin.net on Wed, May 07, 2003 at 10:11:45PM -0000
References: <20030507120811.F7990@cs.utwente.nl> <b9c0b1+l8cl@eGroups.com>
Message-ID: <20030508113711.A709@cs.utwente.nl>

Hi,

On Wed, May 07, 2003 at 10:11:45PM -0000, micheal_jor wrote:
> My first thought was defining COM-like binary interfaces for the
> Lexer/Parser/TreeParser that generated components will be required to
> implement. All interaction is then through those binary interfaces.
> Of course this is much easier for Windows - since COM is present -
> than other platforms (although Mozilla's XPCOM fills the gap nicely).

Not very familiar with that windows mumbo jumbo stuff ;) I presume it's
something corba-ish ? Only stuff I've seen of it is while trying to get
Mozilla to go on the local Solaris setup. Of course this probably
introduces quite some overhead in the lexer-parser path ? Don't know if you
really want to do something like that in the general case.

> In the end, it similar to the C#/Java solution actually but the devil
> is in the details as you mentioned.
>
> > I guess it's doable but not with the time I have to spent on antlr atm (and
> > then I'm not even mentioning d*mn MSVC)
>
> With MS's recent-ish "acquisitions" of quite a few good C++ guys like
> Herb Sutter and Stan Lippman, it can only get better right?

<keeps fingers crossed> I'd be glad if the windows compile stuff would work
out of the box for once, without hacking around MSVC's oddities.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "You know how to use that thing?" [pointing to the sword]
  "Sure.. The pointy end goes into the other guy."
  --- The Mask of Zorro


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Thu May  8 02:44:49 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Re: TreeParser fails to find matched node in input tree
In-Reply-To: <b9bpcm+oalf@eGroups.com>; from open.zone@virgin.net on Wed, May 07, 2003 at 08:13:10PM -0000
References: <b9bj5r+77c6@eGroups.com> <b9bpcm+oalf@eGroups.com>
Message-ID: <20030508114448.B709@cs.utwente.nl>

On Wed, May 07, 2003 at 08:13:10PM -0000, micheal_jor wrote:
> As a kind of sanity check, I have modified the grammar to generate
> Java and C++ instead and the relevant section of the output is the
> same. This issue would be present in a Java and C++ version of the
> TreeParser too.

Could you sent me the code generated for the rules ? I'm not 100% sure if
it's a bug or not. Also do you have a dump of the real structure of the AST
that went wrong?

I know that for myself working with antlr treeparsers generated quite a lot
of 'oh duh!' moments, when something turned out to be slightly different as
expected, but quite logical in retrospective.

Not sure if this is such a case. My first impression is at least that it
should work. Did you check with -traceTreeparser that the right alternative
was chosen?

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Before they invented drawing boards, what did they go back to?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From M.Wirth at seeburger.de  Thu May  8 03:21:40 2003
From: M.Wirth at seeburger.de (Wirth. Michael)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] problem with nondeterminism
Message-ID: <164986BA012AA2468F7F6AA0562D7BDC06C520@seedebrexch.seeburger.de>

Hello,

here is the code.

-----------------------------------------
start: (unit)* ;

unit : program
     | procedure
     | globaljavastart		
     ;

program : PROGRAM (statement)* ;

statement : 
          javaconstruct
//        | "if" ...
//        | "while" ... 
//        ...
          ;

javaconstruct :
        javastart
      | globaljavastart ;

globaljavastart :
        GLOBALJAVASTART GLOBALJAVAEND ;

javastart :
        JAVASTART JAVAEND ;
	
procedure : 
        PROCEDURE (statement)* ;
-----------------------------------------

antlr generates the folloing warnings 
(for the rule "program" and "procedure")
 warning:nondeterminism upon
     k==1:GLOBALJAVASTART
     between alt 1 and exit branch of block
 warning:nondeterminism upon
     k==1:GLOBALJAVASTART
     between alt 1 and exit branch of block

I think the problem is that the rule "globaljavastart"
can be used in a statement and in a unit. 
Can I define the grammar in an other way?
Or can I ignore these warnings?

I hope someone can help me, because I need this 
in my diploma thesis.

Greetings,
	Michael

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From cgodfrey at epnet.com  Thu May  8 05:22:25 2003
From: cgodfrey at epnet.com (cgodfrey86)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] nondeterminism for general word defintion
Message-ID: <b9di61+e6a3@eGroups.com>

I have a grammar defined in lex and yacc that I am trying to define 
with ANTLR. There is one aspect of the definition that I am having 
difficulty with because of nondeterminism issues. Was hoping people 
may have suggestions on how to deal with this or maybe a sanity check 
that this grammar is not a good candidiate to be defined with ANTLR.


>>From Lex, I have the following 2 definitions for a TERM
W   [*?]?[0-9]+([.,]?[*?0-9]+)*|[*?A-Za-z]+([.']?[*?A-Za-z]+)*
L   [^ "()\n]+

When in one state, a Term is defined as a W, when in another state, a 
Term is defined as an L.   If I try and define a TERM as either W or 
L type data in ANTLR I encounter nondeterminism with either of the 2 
cases as well as with all other tokens I have defined in my grammar.

Suggestions appreciated.

Thanks 










 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From subscribeshit at gmx.net  Thu May  8 06:14:55 2003
From: subscribeshit at gmx.net (lignucius)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] unexpected token: null
Message-ID: <b9dl8f+pvu9@eGroups.com>

hi all 
 
i always get the error specified in the subject. 
 
but i don't see the mistake i made apparently! maybe you do? 
 
the code: 
  
remark: the string i passed to the lexer was "sin(4)". no CR or LF or
EOF 
after that. a couple lines in code are for testing purpose only. 
 
 
class TestCalcParser extends Parser; 
options { buildAST=true; } 
 
imaginaryTokenDefinitions : 
	SIGN_MINUS 
	SIGN_PLUS 
; 
 
expr :		sumExpr ; 
sumExpr :	prodExpr ((PLUS^|MINUS^) prodExpr)* ; 
prodExpr :	powExpr ((MUL^|DIV^|MOD^) powExpr)* ; 
powExpr :	funcExpr (POW^ funcExpr)? ; 
funcExpr :	(SIN^ | COS^ | TAN^ | SQRT^ | LN^ | LG^ | LD^)? signExpr ; 
signExpr :	( m:MINUS^ {#m.setType(SIGN_MINUS);} | p:PLUS^ 
{#p.setType(SIGN_PLUS);} )? atom ; 
atom :		DBL | LPAREN^ expr RPAREN! | VAR ; 
 
 
 
class TestCalcLexer extends Lexer; 
 
options { k=5; } 
 
NEWLINE   :  ( "\r\n" // DOS 
               '\r'   // MAC 
               '\n'   // Unix 
             ) 
             { newline(); 
               $setType(Token.SKIP); 
             } 
          ; 
PLUS  : '+' ; 
MINUS : '-' ; 
MUL   : '*' ; 
DIV   : '/' ; 
MOD   : '%' ; 
POW   : '^' ; 
LPAREN : '(' { System.out.println("found ("); } ; 
RPAREN : ')' { System.out.println("found )"); } ; 
protected SIN   : "sin" ; 
protected COS   : "cos" ; 
protected TAN   : "tan" ; 
protected SQRT  : "sqrt" ; 
protected LN    : "ln" ; 
protected LG    : "lg" ; 
protected LD    : "ld" ; 
protected E     : "e" ; 
protected PI    : "pi" ; 
 
protected UCGLYPH : 'A'..'Z' ; 
protected LCGLYPH : 'a'..'z' ; 
protected VAR : (UCGLYPH | LCGLYPH)+; 
TXT	: (SIN) => SIN { $setType(SIN); System.out.println("found SIN");
} 
	| (COS) => COS { $setType(COS); } 
	| (TAN) => TAN { $setType(TAN); } 
	| (SQRT) => SQRT { $setType(SQRT); } 
	| (LN) => LN { $setType(LN); } 
	| (LG) => LG { $setType(LG); } 
	| (LD) => LD { $setType(LD); } 
	| (E) => E { $setType(E); } 
	| (PI) => PI { $setType(PI); } 
	| (VAR) => VAR { $setType(VAR); System.out.println("found VAR"); } 
	; 
 
protected DIGIT : '0'..'9' ; 
protected POINT : '.' ; 
DBL   : (DIGIT)+(POINT (DIGIT)+)? { System.out.println("found DBL");
} ; 
 
 
{import java.lang.Math;} 
class TestCalcTreeWalker extends TreeParser; 
 
expr returns [double r] 
  { double a,b; r=0; } 
 
  : #(PLUS a=expr b=expr)	{ r=a+b; } 
  | #(MINUS a=expr b=expr)	{ r=a-b; } 
  | #(MUL a=expr b=expr)	{ r=a*b; } 
  | #(DIV a=expr b=expr)	{ r=a/b; } 
  | #(MOD a=expr b=expr)	{ r=a%b; } 
  | #(POW a=expr b=expr)	{ r=Math.pow(a,b); } 
  | #(LPAREN a=expr)		{ r=a; } 
  | #(SIGN_MINUS a=expr)	{ r=-1*a; } 
  | #(SIGN_PLUS a=expr)		{ if(a<0) r=0-a; else r=a; } 
  | #(SIN a=expr)		{ r=Math.sin(a); } 
  | #(COS a=expr)		{ r=Math.cos(a); } 
  | #(TAN a=expr)		{ r=Math.tan(a); } 
  | #(SQRT a=expr)		{ r=Math.sqrt(a); } 
  | #(LN a=expr)		{ r=Math.log(a); } 
  | #(LG a=expr)		{ r=Math.log(a)/Math.log(10); } 
  | #(LD a=expr)		{ r=Math.log(a)/Math.log(2); } 
  | E				{ r=Math.E; } 
  | PI				{ r=Math.PI; } 
  | v:VAR			{ System.out.println(v.getText()); } 
  | i:DBL			{ r=Double.parseDouble(i.getText()); } 
  ; 
 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rbencina at iprimus.com.au  Thu May  8 17:21:27 2003
From: rbencina at iprimus.com.au (Ross Bencina)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] [comp.compilers.tools.pccts] Re: Is there a run-time parsing facility
References: <20030507120811.F7990@cs.utwente.nl> <b9c0b1+l8cl@eGroups.com> <20030508113711.A709@cs.utwente.nl>
Message-ID: <005e01c315c0$efaa85e0$1bdd32d2@athlon900>

Ric Klaren wrote:
> Not very familiar with that windows mumbo jumbo stuff ;) I presume it's
> something corba-ish ?

It's an object component model, a bit like corba but a lot simpler as far as
i understand it. A bit more like a light-weight ABI for objects/components.

> Only stuff I've seen of it is while trying to get
> Mozilla to go on the local Solaris setup. Of course this probably
> introduces quite some overhead in the lexer-parser path ?

For in-process same-thread COM calls (which is I think all that XP-COM does)
the calling overhead is the same as a virtual function call (in C++ it _is_
a virtual function call). So there would be little or no additional time
overhead compared to the current TokenStream situation. Space-wise COM is
going to be a bit more expensive than plain C++ but I can't see it being an
issue in the proposed case.

Best wishes

Ross.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mitram_8 at yahoo.com  Fri May  9 04:44:10 2003
From: mitram_8 at yahoo.com (raj b)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] :Could you pls  remove my ID from the mailing list(mitram_8@yahoo.com)
In-Reply-To: <005e01c315c0$efaa85e0$1bdd32d2@athlon900>
Message-ID: <20030509114410.73472.qmail@web12707.mail.yahoo.com>


--- Ross Bencina <rbencina@iprimus.com.au> wrote:
> Ric Klaren wrote:
> > Not very familiar with that windows mumbo jumbo
> stuff ;) I presume it's
> > something corba-ish ?
> 
> It's an object component model, a bit like corba but
> a lot simpler as far as
> i understand it. A bit more like a light-weight ABI
> for objects/components.
> 
> > Only stuff I've seen of it is while trying to get
> > Mozilla to go on the local Solaris setup. Of
> course this probably
> > introduces quite some overhead in the lexer-parser
> path ?
> 
> For in-process same-thread COM calls (which is I
> think all that XP-COM does)
> the calling overhead is the same as a virtual
> function call (in C++ it _is_
> a virtual function call). So there would be little
> or no additional time
> overhead compared to the current TokenStream
> situation. Space-wise COM is
> going to be a bit more expensive than plain C++ but
> I can't see it being an
> issue in the proposed case.
> 
> Best wishes
> 
> Ross.
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo.
http://search.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From imolanet at yahoo.it  Sat May 10 11:46:05 2003
From: imolanet at yahoo.it (Patrik Suzzi)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] problem using javac out of antlr directory
Message-ID: <b9jhdd+j3c4@eGroups.com>

Hello World!

I've a win OS and ANTLR directory is 
C:\antlr272\

In autoexec.bat i've added the line
path = C:\antlr272\;%path%

I've tested the cut'n paste example reported on JGuru resource page. 
I do compiling, but it work only if I'm in the ANTLR directory with 
the command prompt. 
For example the line below line produces the right output:

C:\antlr272> java antlr.Tool t.g
ANTLR Parser Generator   Version 2.7.2  1989-2003 jGuru.com

But if I move to other directory I've the following problem:
for example if I move to dir antlr272\MyTests\ the line below 
produces Exception

C:\antlr272\MyTests> java antlr.Tool t.g
Exception in thread "main" java.lang.NoClassDefFoundError antlr/Tool

Can anyone help me to write the correct line to add to my  
autoexec.bat ?

Thanks 4 wasting time: Patrik


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From M.Wirth at seeburger.de  Sat May 10 12:02:01 2003
From: M.Wirth at seeburger.de (Michael Wirth)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] problem with nondeterminism
In-Reply-To: <170826586F3BD511910D0200C110AAA80540238C@memail03.bco-home.com>
References: <170826586F3BD511910D0200C110AAA80540238C@memail03.bco-home.com>
Message-ID: <200305102102.01767.m.wirth@seeburger.de>

Thanks, now I can see the problem too.

Am Samstag, 10. Mai 2003 00:10 schrieben Sie:
> When antlr analyzes (unit)*, it sees that PROGRAM javaconstruct could be
> parsed two ways.  It's a lot like the if/else ambiguity.  You can turn off
> the warning with the warnWhenFollowAmbig=false option.  See the docs about
> it.
>
> Monty
>
> -----Original Message-----
> From: Wirth. Michael
> To: antlr-interest@yahoogroups.com
> Sent: 5/8/2003 3:21 AM
> Subject: [antlr-interest] problem with nondeterminism
>
> Hello,
>
> here is the code.
>
> -----------------------------------------
> start: (unit)* ;
>
> unit : program
>
>      | procedure
>      | globaljavastart
>
>      ;
>
> program : PROGRAM (statement)* ;
>
> statement :
>           javaconstruct
> //        | "if" ...
> //        | "while" ...
> //        ...
>           ;
>
> javaconstruct :
>         javastart
>
>       | globaljavastart ;
>
> globaljavastart :
>         GLOBALJAVASTART GLOBALJAVAEND ;
>
> javastart :
>         JAVASTART JAVAEND ;
>
> procedure :
>         PROCEDURE (statement)* ;
> -----------------------------------------
>
> antlr generates the folloing warnings
> (for the rule "program" and "procedure")
>  warning:nondeterminism upon
>      k==1:GLOBALJAVASTART
>      between alt 1 and exit branch of block
>  warning:nondeterminism upon
>      k==1:GLOBALJAVASTART
>      between alt 1 and exit branch of block
>
> I think the problem is that the rule "globaljavastart"
> can be used in a statement and in a unit.
> Can I define the grammar in an other way?
> Or can I ignore these warnings?
>
> I hope someone can help me, because I need this
> in my diploma thesis.
>
> Greetings,
> 	Michael
>
>
>
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jbb at acm.org  Sat May 10 12:12:16 2003
From: jbb at acm.org (jbb@acm.org)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] problem using javac out of antlr directory
In-Reply-To: <b9jhdd+j3c4@eGroups.com> (message from Patrik Suzzi on Sat, 10
	May 2003 18:46:05 +0000)
References: <b9jhdd+j3c4@eGroups.com>
Message-ID: <E19EZlY-0004En-00@gecko.home.org>

Patrik :-

Try setting the CLASSPATH environment variable and not the PATH.

Hope this helps...
	-jbb

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From biz_morland at yahoo.com  Sat May 10 15:18:11 2003
From: biz_morland at yahoo.com (biz_morland)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] ASTs and node types: Java
Message-ID: <b9jtr3+najd@eGroups.com>

Hi,

I'm writing a java program that uses an Antlr grammar file to build 
and traverse an AST. Beforehand my Main.java and expression.g had 
worked well with an AST of nodes each of which consisted of a number 
of type double.

In Main.java I had used the following command to create an AST and 
traverse it, printing the result:

CommonAST parseTree = (CommonAST)parser.getAST();
System.out.println(parseTree.toStringList());
ExpressionTreeWalker walker = new ExpressionTreeWalker();
Double result = walker.expr(parseTree);
System.out.println("Value: "+result);

OK, now I need an AST whose nodes are of type java.lang.Object 
instead of double. However I keep getting the following error message 
from the walker.expr(parseTree) statement.

For an example tree: +( 1 1)
Error message:

<snip>
<AST>: unexpected AST node: 1
<AST>: unexpected AST node: 1
Exception: java.lang.NullPointerException
</snip>

The most obvious solution to me would be to somehow typecast the 
walker.expr() statement to java.lang.Object, but I've tried this in 
many different ways resulting in the same error msg above.

Is there anyone who has had similar error messages or problems with 
building ASTs, where the nodes have had to be changed or cast to 
different types?

Thanks,
Greg


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ghassempoory at ntlworld.com  Sun May 11 05:50:19 2003
From: ghassempoory at ntlworld.com (ghassempoory)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] HELP NEWBIE: How can I simplify Tree Parser grammar.
Message-ID: <b9lgub+lmut@eGroups.com>

I have a simple expression parser that generates an expression
tree. I have written a tree parser to walk this tree for further
processing. The tree parser looks a bit like :

expression:
       #(MUL expression expression)
    |  #(DIV expression expression)
    |  #(ADD expression expression)
    |  #(SUB expression expression)
    |  IDENTIFIER
    |  NUMBER
    ;

Well, this works fine.However I would like to simplify this by
doing soemthing like:

expression:
       #(opnode expression expression)
    |  IDENTIFIER
    |  NUMBER
    ;

opnode:
        MUL | DIV | ADD | SUB
    ;

ANTLR does not like this, it insists that the tree roots
should be specified directly.

Is there anyway that I could factor out the root nodes? 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Sun May 11 20:48:10 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Re: HELP NEWBIE: How can I simplify Tree Parser grammar.
In-Reply-To: <b9lgub+lmut@eGroups.com>
Message-ID: <b9n5hq+tsub@eGroups.com>

Unfortunately, the only way to do this with the current 
implementation is to change the type on the root nodes (previous 
tree walking or parsing phase).  Not recommended--I'd suggest living 
with what you have.

--Loring


--- In antlr-interest@yahoogroups.com, "ghassempoory" 
<ghassempoory@n...> wrote:
> I have a simple expression parser that generates an expression
> tree. I have written a tree parser to walk this tree for further
> processing. The tree parser looks a bit like :
> 
> expression:
>        #(MUL expression expression)
>     |  #(DIV expression expression)
>     |  #(ADD expression expression)
>     |  #(SUB expression expression)
>     |  IDENTIFIER
>     |  NUMBER
>     ;
> 
> Well, this works fine.However I would like to simplify this by
> doing soemthing like:
> 
> expression:
>        #(opnode expression expression)
>     |  IDENTIFIER
>     |  NUMBER
>     ;
> 
> opnode:
>         MUL | DIV | ADD | SUB
>     ;
> 
> ANTLR does not like this, it insists that the tree roots
> should be specified directly.
> 
> Is there anyway that I could factor out the root nodes?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ramyasivadas at yahoo.co.in  Mon May 12 03:59:51 2003
From: ramyasivadas at yahoo.co.in (ramyasivadas)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Problem with Single Line Comments
Message-ID: <b9nur7+qpum@eGroups.com>

Hi,
I have defined single line comment and multiline comment as follows:

SL_COMMENT
: "//"
(~('\n'|'\r'))* ('\n'|'\r'('\n')?)?
		{ _ttype = 

ANTLR_USE_NAMESPACE(antlr)Token::SKIP; }
;

ML_COMMENT
    :    "/*"
         (  { LA(2)!='/' }? '*'
         | '\n' { newline(); }
         | ~('*'|'\n')
         )*
         "*/"
		{ _ttype = 

ANTLR_USE_NAMESPACE(antlr)Token::SKIP; }
    ;

When a file with the comments are parsed, an exception is thrown 
depending on the string that appears following the "//" and the "/*" 
characters.
I just want the parser to ignore the string that follows immediately 
after the "//" or "/*" till the newline is encountered.
Can anyone please suggest me a solution for the problem.

Thanks in advance.
Regards,
Ramya



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ramyasivadas at yahoo.co.in  Mon May 12 04:00:04 2003
From: ramyasivadas at yahoo.co.in (ramyasivadas)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Problem with Single Line Comments
Message-ID: <b9nurk+p5ci@eGroups.com>

Hi,
I have defined single line comment and multiline comment as follows:

SL_COMMENT
: "//"
(~('\n'|'\r'))* ('\n'|'\r'('\n')?)?
		{ _ttype = 

ANTLR_USE_NAMESPACE(antlr)Token::SKIP; }
;

ML_COMMENT
    :    "/*"
         (  { LA(2)!='/' }? '*'
         | '\n' { newline(); }
         | ~('*'|'\n')
         )*
         "*/"
		{ _ttype = 

ANTLR_USE_NAMESPACE(antlr)Token::SKIP; }
    ;

When a file with the comments are parsed, an exception is thrown 
depending on the string that appears following the "//" and the "/*" 
characters.
I just want the parser to ignore the string that follows immediately 
after the "//" or "/*" till the newline is encountered.
Can anyone please suggest me a solution for the problem.

Thanks in advance.
Regards,
Ramya



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon May 12 07:40:09 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Problem with Single Line Comments
Message-ID: <170826586F3BD511910D0200C110AAA80540238D@memail03.bco-home.com>

What is the input and what is the exception thrown?

Monty

-----Original Message-----
From: ramyasivadas [mailto:ramyasivadas@yahoo.co.in]
Sent: Monday, May 12, 2003 4:00 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Problem with Single Line Comments


Hi,
I have defined single line comment and multiline comment as follows:

SL_COMMENT
: "//"
(~('\n'|'\r'))* ('\n'|'\r'('\n')?)?
		{ _ttype = 

ANTLR_USE_NAMESPACE(antlr)Token::SKIP; }
;

ML_COMMENT
    :    "/*"
         (  { LA(2)!='/' }? '*'
         | '\n' { newline(); }
         | ~('*'|'\n')
         )*
         "*/"
		{ _ttype = 

ANTLR_USE_NAMESPACE(antlr)Token::SKIP; }
    ;

When a file with the comments are parsed, an exception is thrown 
depending on the string that appears following the "//" and the "/*" 
characters.
I just want the parser to ignore the string that follows immediately 
after the "//" or "/*" till the newline is encountered.
Can anyone please suggest me a solution for the problem.

Thanks in advance.
Regards,
Ramya



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon May 12 07:45:15 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] ASTs and node types: Java
Message-ID: <170826586F3BD511910D0200C110AAA80540238E@memail03.bco-home.com>

Try generating your code with -traceTreeParser and then figure out what it
is doing.  This doesn't appear to be a type casting problem, rather it looks
like a mis-built tree, from what little information is there about it.

Monty

-----Original Message-----
From: biz_morland [mailto:biz_morland@yahoo.com]
Sent: Saturday, May 10, 2003 3:18 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] ASTs and node types: Java


Hi,

I'm writing a java program that uses an Antlr grammar file to build 
and traverse an AST. Beforehand my Main.java and expression.g had 
worked well with an AST of nodes each of which consisted of a number 
of type double.

In Main.java I had used the following command to create an AST and 
traverse it, printing the result:

CommonAST parseTree = (CommonAST)parser.getAST();
System.out.println(parseTree.toStringList());
ExpressionTreeWalker walker = new ExpressionTreeWalker();
Double result = walker.expr(parseTree);
System.out.println("Value: "+result);

OK, now I need an AST whose nodes are of type java.lang.Object 
instead of double. However I keep getting the following error message 
from the walker.expr(parseTree) statement.

For an example tree: +( 1 1)
Error message:

<snip>
<AST>: unexpected AST node: 1
<AST>: unexpected AST node: 1
Exception: java.lang.NullPointerException
</snip>

The most obvious solution to me would be to somehow typecast the 
walker.expr() statement to java.lang.Object, but I've tried this in 
many different ways resulting in the same error msg above.

Is there anyone who has had similar error messages or problems with 
building ASTs, where the nodes have had to be changed or cast to 
different types?

Thanks,
Greg


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Jim.OConnor at microfocus.com  Mon May 12 08:32:38 2003
From: Jim.OConnor at microfocus.com (Jim O'Connor)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Having the "include" file as part the AST
Message-ID: <3AC103F1B7EEEC48A855ACB1D2819E9101974741@rock-corpmail.microfocus.com>

Hi All,
	I am working with the Job Control Language (JCL).  It has statements
that "describe" INCLUDE-type files.

//**** Main File ****/
//LABEL1   EXEC PROC=MYPROC,SYMB1=VALUE1


/*********  Proc file: MYPROC.PRC *********/
//D1      DD       DSN=DATAFILE,DISP=&SYMB1
//D2      DD      DUMMY



What would result for processing is

//LABEL1   EXEC PROC=MYPROC,SYMB1=VALUE1
//D1      DD       DSN=DATAFILE,DISP=VALUE1
//D2      DD      DUMMY



	I am struggling with the INCLUDE file mechanism.  It hides the
INCLUDE file statement from the main parser.  An INCLUDE statement is not
part of the C language.  It is part of pre-processing.

	With my JCL parser, I am trying to create an AST that contains the
EXEC PROC statement.  Is there a mechanism that passes the "//" "LABEL1"
"EXEC" "PROC" "=" "MYPROC" tokens to the parser while starting the new lexer
at the correct time?  Is this description clear?
Jim


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon May 12 08:59:24 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Having the "include" file as part the AST
Message-ID: <170826586F3BD511910D0200C110AAA80540238F@memail03.bco-home.com>

Although the lexer will be switching the lexers to actually include those
files (to avoid feedback from the parser), you can still pass the tokens on
to the parser and from there invoke the parser top-level rule.  When it
finishes you can put the resulting tree under an INCLUDE root.  

Monty

-----Original Message-----
From: Jim O'Connor [mailto:Jim.OConnor@microfocus.com]
Sent: Monday, May 12, 2003 8:33 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Having the "include" file as part the AST


Hi All,
	I am working with the Job Control Language (JCL).  It has statements
that "describe" INCLUDE-type files.

//**** Main File ****/
//LABEL1   EXEC PROC=MYPROC,SYMB1=VALUE1


/*********  Proc file: MYPROC.PRC *********/
//D1      DD       DSN=DATAFILE,DISP=&SYMB1
//D2      DD      DUMMY



What would result for processing is

//LABEL1   EXEC PROC=MYPROC,SYMB1=VALUE1
//D1      DD       DSN=DATAFILE,DISP=VALUE1
//D2      DD      DUMMY



	I am struggling with the INCLUDE file mechanism.  It hides the
INCLUDE file statement from the main parser.  An INCLUDE statement is not
part of the C language.  It is part of pre-processing.

	With my JCL parser, I am trying to create an AST that contains the
EXEC PROC statement.  Is there a mechanism that passes the "//" "LABEL1"
"EXEC" "PROC" "=" "MYPROC" tokens to the parser while starting the new lexer
at the correct time?  Is this description clear?
Jim


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon May 12 09:01:40 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Having the "include" file as part the AST
Message-ID: <170826586F3BD511910D0200C110AAA805402390@memail03.bco-home.com>

Also consider using an approach like the one I did here:

http://www.codetransform.com/filterexample.html

Alternatively you may need to buffer tokens in your lexer.  It's not hard to
do but you have to subclass the generated lexer to override nextToken() to
check your buffer first.  Actually it's very similar to the filterexample
code.

Monty

-----Original Message-----
From: Jim O'Connor [mailto:Jim.OConnor@microfocus.com]
Sent: Monday, May 12, 2003 8:33 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Having the "include" file as part the AST


Hi All,
	I am working with the Job Control Language (JCL).  It has statements
that "describe" INCLUDE-type files.

//**** Main File ****/
//LABEL1   EXEC PROC=MYPROC,SYMB1=VALUE1


/*********  Proc file: MYPROC.PRC *********/
//D1      DD       DSN=DATAFILE,DISP=&SYMB1
//D2      DD      DUMMY



What would result for processing is

//LABEL1   EXEC PROC=MYPROC,SYMB1=VALUE1
//D1      DD       DSN=DATAFILE,DISP=VALUE1
//D2      DD      DUMMY



	I am struggling with the INCLUDE file mechanism.  It hides the
INCLUDE file statement from the main parser.  An INCLUDE statement is not
part of the C language.  It is part of pre-processing.

	With my JCL parser, I am trying to create an AST that contains the
EXEC PROC statement.  Is there a mechanism that passes the "//" "LABEL1"
"EXEC" "PROC" "=" "MYPROC" tokens to the parser while starting the new lexer
at the correct time?  Is this description clear?
Jim


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From s.piree at enneya.com  Mon May 12 09:09:12 2003
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Having the "include" file as part the AST
References: <3AC103F1B7EEEC48A855ACB1D2819E9101974741@rock-corpmail.microfocus.com>
Message-ID: <092601c318a1$2213cc70$3400a8c0@Daemon>

> I am struggling with the INCLUDE file mechanism.  It hides 
> the INCLUDE file statement from the main parser. 
> An INCLUDE statement is not part of the C language.  

There are several constructs in JCL that need to be handled 
before actual parsing can be performed, e.g.

- symbol substitution (EXEC PROC, SET, PROC, etc.)
- file include (EXEC PROC, INCLUDE)
- inline data (DD *, DD DLM=...)
- etc.

I would advise you to take the preprocessor route. It would be 
VERY difficult to build a one-pass parser that does both
preprocessing and parsing.

In fact, even the preprocessing of JCL is pretty complex.

Hope this helps, kind greetings,

Silvain Piree
Refactive (www.refactive.com)


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Jim.OConnor at microfocus.com  Mon May 12 12:48:08 2003
From: Jim.OConnor at microfocus.com (Jim O'Connor)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Having the "include" file as part the AST
Message-ID: <3AC103F1B7EEEC48A855ACB1D2819E9101974825@rock-corpmail.microfocus.com>

Thanks.  The link and the "buffered tokens" comment hit the spot.  Haven't
finished yet, but it looks good.


-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com]
Sent: Monday, May 12, 2003 12:02 PM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Having the "include" file as part the AST


Also consider using an approach like the one I did here:

http://www.codetransform.com/filterexample.html

Alternatively you may need to buffer tokens in your lexer.  It's not hard to
do but you have to subclass the generated lexer to override nextToken() to
check your buffer first.  Actually it's very similar to the filterexample
code.

Monty

-----Original Message-----
From: Jim O'Connor [mailto:Jim.OConnor@microfocus.com]
Sent: Monday, May 12, 2003 8:33 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Having the "include" file as part the AST


Hi All,
	I am working with the Job Control Language (JCL).  It has statements
that "describe" INCLUDE-type files.

//**** Main File ****/
//LABEL1   EXEC PROC=MYPROC,SYMB1=VALUE1


/*********  Proc file: MYPROC.PRC *********/
//D1      DD       DSN=DATAFILE,DISP=&SYMB1
//D2      DD      DUMMY



What would result for processing is

//LABEL1   EXEC PROC=MYPROC,SYMB1=VALUE1
//D1      DD       DSN=DATAFILE,DISP=VALUE1
//D2      DD      DUMMY



	I am struggling with the INCLUDE file mechanism.  It hides the
INCLUDE file statement from the main parser.  An INCLUDE statement is not
part of the C language.  It is part of pre-processing.

	With my JCL parser, I am trying to create an AST that contains the
EXEC PROC statement.  Is there a mechanism that passes the "//" "LABEL1"
"EXEC" "PROC" "=" "MYPROC" tokens to the parser while starting the new lexer
at the correct time?  Is this description clear?
Jim


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sarkar_soumen at yahoo.com  Mon May 12 15:51:56 2003
From: sarkar_soumen at yahoo.com (sarkar_soumen)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] [comp.compilers.tools.pccts] Re: Is there a run-time parsing facility
In-Reply-To: <b9c0pv+iedo@eGroups.com>
Message-ID: <b9p8ic+o9rc@eGroups.com>

I wanted to provide a practical example of "software development
productivity improvement" to those who are questioning "why do
we need grammar to automation translation at runtime".

Suppose I would like to be able single line or multi-line comments
to some temlates that is being processed by legacy software which
can not ignore these comments.

Single Line Example
---------------------
## This is a comment. 
 
Multi Line Example
----------------------------
#*
This is a multiline comment.
This is the second line
*#

Now to add this in the "current way" I need to make a compile time
investment of generating a parser and ignore single/multi-line
comments (i.e gets ALL other TEXT in memory). Had the grammar to
automation translation been possible at runtime I could have
provided a correct grammar file which defines a lexical filter/
channel which passes ALL TEXT except single/multi-line comments.

Once again, it is my view that the absence of dynamic
parsing services is an implementation limitation (i.e one needs
to necessarily go through grammar --> generated parser route). The
purpose of this post is to bring out the defficiency in software
development productivity this approach entails. Please note that
validation of dynamic text via dynamic grammar has been achieved
in XML world (i.e., XML schema vs XML) but the comparsion could be
debated in terms of syntactic theory.

Soumen Sarkar.

--- In antlr-interest@yahoogroups.com, "micheal_jor" 
<open.zone@v...> wrote:
> Hi Soumen,
> 
> > From a dynamic grammar/automation end-user point of view I
> > have the following "use cases":
> > 
> >    1. I am receiving a text string. I just supply a correct
> >       grammar file. The text string passes or fails. If the
> >       text string fails, I get pointer to text string which
> >       fails showing corresponding parser/lexer rule.
> 
> What additional benefit does this provide beyond the generally 
> avaible behavior of raising exceptions?
> 
> >    2. If I supply a wrong grammar file, I get an exception
> >       showing where in grammar file the error occurs.
> 
> Given that run-time systems also have a compile-time capability, 
I'd 
> have thought it was sufficient to simply alert you to the fact 
that 
> there is an error. Grammar file debugging can and should be done 
> interactively *before* the grammar is actually used dynamically.
> 
> >    3. Validation of text string does not cause unbound loop.
> >       Probably max-loop is configurable.
> 
> Depends on (2) above.
> 
> >    4. If I provide grammar rule, I get text fragment for a valid
> >       text string. In other words I retrive text fragments by
> >       parser/lexer rules. For example I say give me the 
substrings
> >       corresponding to SQL DELETE statements.
> 
> Is that just a special use of a pretty-printing TreeParser?
> 
> > Implementation details should be hidden. As I understand a parser
> > generator provides computational service by which a program
> > understands text by systematically breaking it by parser/lexer
> > rules. I just would like to avail this service without any
> > compile time/typing commitment. If I require I am willing to
> > do type commitment in the sense of dynamically using ANTLR types
> > but NO compile time commitment. I do not wish to use any 
generated
> > types (only type commitment is in terms of predefined ANTLR
> > types).
> > 
> > This may be difficult to do. I just wanted to clarify end user
> > requirements on dynamic grammar/automation computational service.
> > 
> > Regarding performance, this kind implementation may be horribly 
slow
> > today but may not be in future.
> 
> Are you planning to build such a dynamic generation framework atop 
> ANTLR Soumen?
> 
> Cheers,
> 
> Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From zhangcharles at yahoo.com  Tue May 13 00:10:09 2003
From: zhangcharles at yahoo.com (zhangcharles)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Does there exist a Java parser for C++
Message-ID: <b9q5oh+qq0h@eGroups.com>

Hi, my research group is building a cross language analysis tool and 
we want to use ANTLR for it. However, there doesn't seem to exist a 
Java parser for C++. Or does it? Unfortunately our tool is java 
based. Can anyone give me some information on that? Can experts tell 
me how complicated it is to convert the C++ based grammar on the 
antlr website to Java? Thanks a lot.

Charles

Middleware Systems Research Group
U. Toronto


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gaogw at neusoft.com  Tue May 13 03:50:33 2003
From: gaogw at neusoft.com (gaogw2002)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] help !
Message-ID: <b9qilp+pusj@eGroups.com>

i want to build a sql parser,it can recognize SELECT(include subquery)
 UPDATE,INSERT,DELETE,and it can recognize which table the sql 
statement select ,which column the sql statement operate ,and the 
relation between the columns,what should I do ?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From brett at crawley.uk.com  Tue May 13 04:16:19 2003
From: brett at crawley.uk.com (Brett Crawley)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Help with "unexpected AST node: 1"
Message-ID: <b9qk63+e7cd@eGroups.com>

I have been trying to get the code below to work, basically I want to 
populate a vector or list with a series of numbers passed in the form:

1,3,8-12,14,20-

where 20- is from 20 to the last available number. 

However I am having problems walking the AST, I believe the problem 
to be related to the fact I have not defined in the tree walker the 
list construct with a # element. However when I try to define it in 
this way I get an error because it appears that the first element of 
the construct must be a lexer token and not a parser construct. Any 
help much appreciated.


header{
/**
 * A Java Lexer for Printing Ranges.<br>
 * Creation date: (08/05/2002 09:45:53)
 * @author: Jonathan Brett Crawley
 */
}
class PrintRangeLexer extends Lexer;

options{
    k=2;
}

NUMBER :
		    (DIGIT)+ ;
MINUS : 
		    '-' ;
COMMA : 
                    ',' ;
WS! : 
		    (' '|'\r'|'\n'|'\t')+ {$setType(Token.SKIP);} ;
protected
DIGIT : 
		    '0'..'9' ;



header {
/**
 * A Java Parser for Printing Ranges.<br>
 * Creation date: (21/03/2002 17.43.58)
 * @author: Jonathan Brett Crawley
 */
}
class PrintRangeParser extends Parser;

options {
    k=3;
    buildAST=true;
    importVocab=PrintRangeLexer;
}

list  :
                    range | NUMBER^ (COMMA (range | NUMBER))* ;
range : 
		    NUMBER^ MINUS NUMBER ;
                    



header {
/**
 * A tree walking class for lr tree structures 
 * representing Printing Ranges.<br>
 * Creation date: (21/03/2002 17.43.58)
 * @author: Brett Crawley
 */

//imports follow
import java.util.Vector;
import java.util.Hashtable;
import antlr.LLkParser;
}
class PrintRangeWalker extends TreeParser;

options{
    k=2;
    importVocab=PrintRangeParser;
}

{
        protected int lastPage = 0;
        
        public void setMaxPage(int lastPage) {
		this.lastPage = lastPage;
	}

}

list returns [Vector listPages] { listPages = new Vector(); Vector 
rangePages = null; } :
                    ((NUMBER MINUS) => rangePages=range { 
listPages.addAll(rangePages); } | 
                        (NUMBER) => num1:NUMBER { listPages.add(new 
Integer(Integer.parseInt(num1.getText()))); }) 
                    (COMMA ((NUMBER MINUS) => rangePages=range { 
listPages.addAll(rangePages); } | 
                        (NUMBER) => num2:NUMBER { listPages.add(new 
Integer(Integer.parseInt(num2.getText()))); }))* ;
                    
range returns [Vector rangePages] { rangePages = new Vector(); } :
                    #( startRange:NUMBER^ MINUS endRange:NUMBER ) { 
                        if (endRange != null) {
                                for (int i = Integer.parseInt
(startRange.getText()); i <= Integer.parseInt(endRange.getText()); 
++i) {
                                        rangePages.add(new Integer
(i));
                                }
                        } else {
                                for (int i = Integer.parseInt
(startRange.getText()); i <= this.lastPage; ++i) {
                                        rangePages.add(new Integer
(i));
                                }
                        } 
                    } ;
                    

The call to the tree walker list method from the main method of the 
program.
Vector test = walker.list(parser.getAST());

example call to a very simple main class, taking the input 1,2,3
java -classpath "%CLASSPATH%;x:/repository/" PrintRangeMain 1,2,3

error returned
unexpected AST node: 1



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Tue May 13 05:11:13 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] TreeParser efficiency: Can TreeParsers ignore arbitary subtrees?
Message-ID: <b9qnd1+n6ko@eGroups.com>

Hi,

I just wondered if it is possible to generate TreeParsers that ignore 
(i.e. do not "visit") the nodes in arbitary subtrees. 

I have an AST in which only a few nodes have attributes I am 
interested in processing with a TreeParser. Because every TreeParser 
grammar describes the whole tree(?), all nodes are still visited even 
if no action code exists to be executed.

Is it possible to effectively say in the TreeParser grammar "I won't 
be doing anything in this node/subtree so don't even generate code to 
visit it?

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mikhail at augustmail.com  Tue May 13 06:20:56 2003
From: mikhail at augustmail.com (thesamim)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Re: help !
In-Reply-To: <b9qilp+pusj@eGroups.com>
Message-ID: <b9qrfo+l3p7@eGroups.com>

You should go to www.antlr.org, look at the contributions page...

There are two SQL grammers there.

--- In antlr-interest@yahoogroups.com, "gaogw2002" <gaogw@n...> wrote:
> i want to build a sql parser,it can recognize SELECT(include 
subquery)
>  UPDATE,INSERT,DELETE,and it can recognize which table the sql 
> statement select ,which column the sql statement operate ,and the 
> relation between the columns,what should I do ?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Tue May 13 09:13:44 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] TreeParser efficiency: Can TreeParsers ignore arbitary subtrees?
In-Reply-To: <b9qnd1+n6ko@eGroups.com>
Message-ID: <DEC6693E-855D-11D7-AF4C-000393BB647E@jguru.com>


On Tuesday, May 13, 2003, at 05:11  AM, micheal_jor wrote:

> Hi,
>
> I just wondered if it is possible to generate TreeParsers that ignore
> (i.e. do not "visit") the nodes in arbitary subtrees.

Sure. :)  Use wildcard:

expr : #(MULTIPLY . .) ;

will match just the multiply and ensure there are two children.  I use 
this all the time for efficiency when doing simple phases.  For 
example, if you don't care about what's inside a method body, just use 
dot for the body and it won't be parsed. :)

Terence
>
> I have an AST in which only a few nodes have attributes I am
> interested in processing with a TreeParser. Because every TreeParser
> grammar describes the whole tree(?), all nodes are still visited even
> if no action code exists to be executed.
>
> Is it possible to effectively say in the TreeParser grammar "I won't
> be doing anything in this node/subtree so don't even generate code to
> visit it?
>
> Cheers,
>
> Micheal
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mwi2k01 at yahoo.com  Tue May 13 10:00:16 2003
From: mwi2k01 at yahoo.com (mwi2k01)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Tree builder tools for ANTLR
Message-ID: <b9r8b0+ndvm@eGroups.com>

Hi,
Is there any tree builder tools for ANTLR like JTB is for JavaCC ?
Thanks in advance


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From xeenman at yahoo.com  Tue May 13 10:53:28 2003
From: xeenman at yahoo.com (William Lam)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] creating editor to do syntax highlighting
Message-ID: <b9rbeo+o32n@eGroups.com>

I am implementing an editor for my custom language that highlights 
keywords in my language.

I am wondering if ANTLR would be the proper tool in this case.  How 
do java editors such as Eclipse determine syntax errors so quickly?

Any pointers would be greatly appreciated


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From dm at cs.yorku.ca  Tue May 13 11:05:42 2003
From: dm at cs.yorku.ca (dm@cs.yorku.ca)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] creating editor to do syntax highlighting
In-Reply-To: <b9rbeo+o32n@eGroups.com>
References: <b9rbeo+o32n@eGroups.com>
Message-ID: <1052849142.3ec133f653513@www.cs.yorku.ca>

Hi:

See classes ending with the word Detector and Rule in org.eclipse.jface.text and
org.eclipse.jface.text.rules

Cheers,

DM

Quoting William Lam <xeenman@yahoo.com>:

> I am implementing an editor for my custom language that highlights 
> keywords in my language.
> 
> I am wondering if ANTLR would be the proper tool in this case.  How 
> do java editors such as Eclipse determine syntax errors so quickly?
> 
> Any pointers would be greatly appreciated
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 




-------------------------------------------------
This mail sent through IMP: http://horde.org/imp/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From dude at darkfigure.org  Tue May 13 11:22:10 2003
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Trouble with a string literal
Message-ID: <Pine.LNX.4.44.0305131118590.16411-100000@g4.pauljlucas.org>

	I have a lexer rule like:

		STRING_LITERAL : "'" ( ~'\'' )* "'" | '"' ( ~'"' )* '"' ;

	That, when lexing text like:

		"hello"

	stops on the 'h' and complains that it's an unexpected
	character.

	The thing is that I have another lexer with the same
	STRING_LITERAL rule that works fine.  I don't understand what
	the difference could be.  I looked at the generated Java code
	and it looks the same to me.

	Any ide of what to check?

	- Paul


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Tue May 13 11:22:12 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Re: TreeParser efficiency: Can TreeParsers ignore arbitary subtrees?
In-Reply-To: <b9qnd1+n6ko@eGroups.com>
Message-ID: <b9rd4k+j6d3@eGroups.com>

Micheal--

The trick here is that "." matches any AST and does not attempt to 
search the subtree.  So you can do something like
     (FOO) => .
to match FOO and not search the subtree under FOO.

--Loring


--- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...> 
wrote:
> Hi,
> 
> I just wondered if it is possible to generate TreeParsers that 
ignore 
> (i.e. do not "visit") the nodes in arbitary subtrees. 
> 
> I have an AST in which only a few nodes have attributes I am 
> interested in processing with a TreeParser. Because every TreeParser 
> grammar describes the whole tree(?), all nodes are still visited 
even 
> if no action code exists to be executed.
> 
> Is it possible to effectively say in the TreeParser grammar "I won't 
> be doing anything in this node/subtree so don't even generate code 
to 
> visit it?
> 
> Cheers,
> 
> Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Tue May 13 11:27:59 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Re: Tree builder tools for ANTLR
In-Reply-To: <b9r8b0+ndvm@eGroups.com>
Message-ID: <b9rdff+cd4r@eGroups.com>

ANTLR uses an annotation syntax ( ! to ignore, ^ to make a root) for 
syntax tree construction instead of building parse trees.  This has 
advantages for syntax transformation.  ANTLR also provides the 
capability to define tree grammars for building tree walkers.  
RTFM--this is one of Ter's better innovations.

--Loring


--- In antlr-interest@yahoogroups.com, "mwi2k01" <mwi2k01@y...> wrote:
> Hi,
> Is there any tree builder tools for ANTLR like JTB is for JavaCC ?
> Thanks in advance


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue May 13 12:03:32 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Trouble with a string literal
Message-ID: <170826586F3BD511910D0200C110AAA8054023A5@memail03.bco-home.com>

You need to set the charVocabulary option.  

Monty

-----Original Message-----
From: Paul J. Lucas [mailto:dude@darkfigure.org]
Sent: Tuesday, May 13, 2003 11:22 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Trouble with a string literal


	I have a lexer rule like:

		STRING_LITERAL : "'" ( ~'\'' )* "'" | '"' ( ~'"' )* '"' ;

	That, when lexing text like:

		"hello"

	stops on the 'h' and complains that it's an unexpected
	character.

	The thing is that I have another lexer with the same
	STRING_LITERAL rule that works fine.  I don't understand what
	the difference could be.  I looked at the generated Java code
	and it looks the same to me.

	Any ide of what to check?

	- Paul


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue May 13 12:09:56 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Re: TreeParser efficiency: Can TreeParsers i
	gnore arbitary subtrees?
Message-ID: <170826586F3BD511910D0200C110AAA8054023A6@memail03.bco-home.com>

To be more clear here, when tree parsing you are not obligated to traverse
subtrees.  You only do that by using #() constructs.  

rule: DECL;
v.
rule: #(DECL etc) ;
 
rule: .

. is still the wild card.

Note that because you are not obligated to traverse subtrees you may leave
out entire subtrees when your tree pass is constructing a new tree.  My
strategy is to have a supergrammar tree grammar through which I run the tree
and then compare the two trees (input and output) to make sure that I am
traversing the entire tree.  I combine this test with my unit tests for each
rule to try to excersize every rule in the grammar and make sure that things
pass through all the way.

Monty

-----Original Message-----
From: lgcraymer [mailto:lgc@mail1.jpl.nasa.gov]
Sent: Tuesday, May 13, 2003 11:22 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: TreeParser efficiency: Can TreeParsers
ignore arbitary subtrees?


Micheal--

The trick here is that "." matches any AST and does not attempt to 
search the subtree.  So you can do something like
     (FOO) => .
to match FOO and not search the subtree under FOO.

--Loring


--- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...> 
wrote:
> Hi,
> 
> I just wondered if it is possible to generate TreeParsers that 
ignore 
> (i.e. do not "visit") the nodes in arbitary subtrees. 
> 
> I have an AST in which only a few nodes have attributes I am 
> interested in processing with a TreeParser. Because every TreeParser 
> grammar describes the whole tree(?), all nodes are still visited 
even 
> if no action code exists to be executed.
> 
> Is it possible to effectively say in the TreeParser grammar "I won't 
> be doing anything in this node/subtree so don't even generate code 
to 
> visit it?
> 
> Cheers,
> 
> Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue May 13 12:13:07 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Does there exist a Java parser for C++
Message-ID: <170826586F3BD511910D0200C110AAA8054023A7@memail03.bco-home.com>

This should be a straightforward conversion.  Tedious maybe, but certainly
possible.

Monty

-----Original Message-----
From: zhangcharles [mailto:zhangcharles@yahoo.com]
Sent: Tuesday, May 13, 2003 12:10 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Does there exist a Java parser for C++


Hi, my research group is building a cross language analysis tool and 
we want to use ANTLR for it. However, there doesn't seem to exist a 
Java parser for C++. Or does it? Unfortunately our tool is java 
based. Can anyone give me some information on that? Can experts tell 
me how complicated it is to convert the C++ based grammar on the 
antlr website to Java? Thanks a lot.

Charles

Middleware Systems Research Group
U. Toronto


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue May 13 12:17:43 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] TreeParser efficiency: Can TreeParsers ignor
	e arbitary subtrees?
Message-ID: <170826586F3BD511910D0200C110AAA8054023A8@memail03.bco-home.com>

Folks, here's another example of ignoring a subtree:

You can do this by just not specifying rules to follow.  For instance if
declarations are something like this one from the gcc grammar:

declaration
        :       #( NDeclaration
                    declSpecifiers
                    (                   
                        initDeclList
                    )?
		    ( SEMI )+
                )
        ;

You can prevent traversal of that subtree by writing this instead:

declaration
        :       NDeclaration
        ;

You can also use the wildcard "." to match any node but not go down into the
subtree.

A tree parser will only match what you ask it to.  Since trees are two
dimensional--nextSibling() and firstChild()--or down v. right--you can
easily skip subtrees by just choosing not to match them.  You could also
ignore siblings if you want, that's just another way of only matching what
you've asked for, but doing that is much less useful because if you do it at
the top level then you've ended your parse.

Monty

-----Original Message-----
From: micheal_jor [mailto:open.zone@virgin.net]
Sent: Tuesday, May 13, 2003 5:11 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] TreeParser efficiency: Can TreeParsers ignore
arbitary subtrees?


Hi,

I just wondered if it is possible to generate TreeParsers that ignore 
(i.e. do not "visit") the nodes in arbitary subtrees. 

I have an AST in which only a few nodes have attributes I am 
interested in processing with a TreeParser. Because every TreeParser 
grammar describes the whole tree(?), all nodes are still visited even 
if no action code exists to be executed.

Is it possible to effectively say in the TreeParser grammar "I won't 
be doing anything in this node/subtree so don't even generate code to 
visit it?

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From devel at hunsicker.de  Tue May 13 14:21:41 2003
From: devel at hunsicker.de (Marco Hunsicker)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] creating editor to do syntax highlighting
In-Reply-To: <b9rbeo+o32n@eGroups.com>
References: <b9rbeo+o32n@eGroups.com>
Message-ID: <63850763.20030513232141@hunsicker.de>

Hello William,

WL> I am implementing an editor for my custom language that highlights
WL> keywords in my language.

WL> I am wondering if ANTLR would be the proper tool in this case.

Sure it is :)

If there is no real need to create an editor on your own, you may
check out the editor/lexer of the NetBeans platform. Very powerful.
And the lexer module includes ANTLR support! See
http://lexer.netbeans.org and http://editor.netbeans.org. Needs JDK
1.4, if I remember right.
 

Cheers,

--
Marco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue May 13 15:04:26 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Help with "unexpected AST node: 1"
Message-ID: <170826586F3BD511910D0200C110AAA8054023AB@memail03.bco-home.com>

You don't seem to have a grasp of how tree parsers work.  I recommend
reading through Ter's recent lecture notes.

http://www.cs.usfca.edu/~parrt/course/652/index.html
http://www.cs.usfca.edu/~parrt/course/652/lectures/java.ast.html

Monty

-----Original Message-----
From: Brett Crawley [mailto:brett@crawley.uk.com]
Sent: Tuesday, May 13, 2003 4:16 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Help with "unexpected AST node: 1"


I have been trying to get the code below to work, basically I want to 
populate a vector or list with a series of numbers passed in the form:

1,3,8-12,14,20-

where 20- is from 20 to the last available number. 

However I am having problems walking the AST, I believe the problem 
to be related to the fact I have not defined in the tree walker the 
list construct with a # element. However when I try to define it in 
this way I get an error because it appears that the first element of 
the construct must be a lexer token and not a parser construct. Any 
help much appreciated.


header{
/**
 * A Java Lexer for Printing Ranges.<br>
 * Creation date: (08/05/2002 09:45:53)
 * @author: Jonathan Brett Crawley
 */
}
class PrintRangeLexer extends Lexer;

options{
    k=2;
}

NUMBER :
		    (DIGIT)+ ;
MINUS : 
		    '-' ;
COMMA : 
                    ',' ;
WS! : 
		    (' '|'\r'|'\n'|'\t')+ {$setType(Token.SKIP);} ;
protected
DIGIT : 
		    '0'..'9' ;



header {
/**
 * A Java Parser for Printing Ranges.<br>
 * Creation date: (21/03/2002 17.43.58)
 * @author: Jonathan Brett Crawley
 */
}
class PrintRangeParser extends Parser;

options {
    k=3;
    buildAST=true;
    importVocab=PrintRangeLexer;
}

list  :
                    range | NUMBER^ (COMMA (range | NUMBER))* ;
range : 
		    NUMBER^ MINUS NUMBER ;
                    



header {
/**
 * A tree walking class for lr tree structures 
 * representing Printing Ranges.<br>
 * Creation date: (21/03/2002 17.43.58)
 * @author: Brett Crawley
 */

//imports follow
import java.util.Vector;
import java.util.Hashtable;
import antlr.LLkParser;
}
class PrintRangeWalker extends TreeParser;

options{
    k=2;
    importVocab=PrintRangeParser;
}

{
        protected int lastPage = 0;
        
        public void setMaxPage(int lastPage) {
		this.lastPage = lastPage;
	}

}

list returns [Vector listPages] { listPages = new Vector(); Vector 
rangePages = null; } :
                    ((NUMBER MINUS) => rangePages=range { 
listPages.addAll(rangePages); } | 
                        (NUMBER) => num1:NUMBER { listPages.add(new 
Integer(Integer.parseInt(num1.getText()))); }) 
                    (COMMA ((NUMBER MINUS) => rangePages=range { 
listPages.addAll(rangePages); } | 
                        (NUMBER) => num2:NUMBER { listPages.add(new 
Integer(Integer.parseInt(num2.getText()))); }))* ;
                    
range returns [Vector rangePages] { rangePages = new Vector(); } :
                    #( startRange:NUMBER^ MINUS endRange:NUMBER ) { 
                        if (endRange != null) {
                                for (int i = Integer.parseInt
(startRange.getText()); i <= Integer.parseInt(endRange.getText()); 
++i) {
                                        rangePages.add(new Integer
(i));
                                }
                        } else {
                                for (int i = Integer.parseInt
(startRange.getText()); i <= this.lastPage; ++i) {
                                        rangePages.add(new Integer
(i));
                                }
                        } 
                    } ;
                    

The call to the tree walker list method from the main method of the 
program.
Vector test = walker.list(parser.getAST());

example call to a very simple main class, taking the input 1,2,3
java -classpath "%CLASSPATH%;x:/repository/" PrintRangeMain 1,2,3

error returned
unexpected AST node: 1



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Tue May 13 17:56:20 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Re: TreeParser efficiency: Can TreeParsers ignor e arbitary subtrees?
In-Reply-To: <170826586F3BD511910D0200C110AAA8054023A8@memail03.bco-home.com>
Message-ID: <b9s47k+kfp1@eGroups.com>

Monty--

This is true in the current implementation, but is probably not a good 
thing since there is no way to check if skipping the subtree is 
intentional or not.  The "not" case would be a bug in the developer's 
tree walker grammar which cannot be tested for except by inserting 
action code.  We should probably add a couple of options to ANTLR 
3--one at the grammar level to turn on/off checking for subtrees 
(there is a time penalty for checking) and one at the rule level to 
override the "checking" option.  ANTLR should not support untestable 
grammar "features"!

--Loring


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Folks, here's another example of ignoring a subtree:
> 
> You can do this by just not specifying rules to follow.  For 
instance if
> declarations are something like this one from the gcc grammar:
> 
> declaration
>         :       #( NDeclaration
>                     declSpecifiers
>                     (                   
>                         initDeclList
>                     )?
> 		    ( SEMI )+
>                 )
>         ;
> 
> You can prevent traversal of that subtree by writing this instead:
> 
> declaration
>         :       NDeclaration
>         ;
> 
> You can also use the wildcard "." to match any node but not go down 
into the
> subtree.
> 
> A tree parser will only match what you ask it to.  Since trees are 
two
> dimensional--nextSibling() and firstChild()--or down v. right--you 
can
> easily skip subtrees by just choosing not to match them.  You could 
also
> ignore siblings if you want, that's just another way of only 
matching what
> you've asked for, but doing that is much less useful because if you 
do it at
> the top level then you've ended your parse.
> 
> Monty
> 
> -----Original Message-----
> From: micheal_jor [mailto:open.zone@v...]
> Sent: Tuesday, May 13, 2003 5:11 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] TreeParser efficiency: Can TreeParsers 
ignore
> arbitary subtrees?
> 
> 
> Hi,
> 
> I just wondered if it is possible to generate TreeParsers that 
ignore 
> (i.e. do not "visit") the nodes in arbitary subtrees. 
> 
> I have an AST in which only a few nodes have attributes I am 
> interested in processing with a TreeParser. Because every TreeParser 
> grammar describes the whole tree(?), all nodes are still visited 
even 
> if no action code exists to be executed.
> 
> Is it possible to effectively say in the TreeParser grammar "I won't 
> be doing anything in this node/subtree so don't even generate code 
to 
> visit it?
> 
> Cheers,
> 
> Micheal
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ramyasivadas at yahoo.co.in  Wed May 14 01:56:36 2003
From: ramyasivadas at yahoo.co.in (ramyasivadas)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Re: Problem with Single Line Comments--solved
In-Reply-To: <170826586F3BD511910D0200C110AAA80540238D@memail03.bco-home.com>
Message-ID: <b9t0c4+me74@eGroups.com>

Hi,
Thank you for your response.
For eg, if the input is
 //file created in may for xyz -re.ist (comment)

 On encountering the - or ( or ), an exception was thrown.
But, i have now solved that by defining the SL_COMMENT and ML_COMMENT 
as follows:
SL_COMMENT
: "//"
(~('\n'|'\r'))* ('\n'|'\r'|'.'|'-'|'('|')'('\n')?)?
		{ _ttype = 

ANTLR_USE_NAMESPACE(antlr)Token::SKIP;}
;

ML_COMMENT
    :    "/*"
         (  { LA(2)!='/' }? '*'
		 | '.'|'-'|'('|')'
         | '\n' { newline(); }
         | ~('*'|'\n')
         )*
         "*/"
		{ _ttype = 

ANTLR_USE_NAMESPACE(antlr)Token::SKIP;}
    ;

Will post if i encounter some other problem.

Thanks and Regards,
Ramya


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> What is the input and what is the exception thrown?
> 
> Monty
> 
> -----Original Message-----
> From: ramyasivadas [mailto:ramyasivadas@y...]
> Sent: Monday, May 12, 2003 4:00 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Problem with Single Line Comments
> 
> 
> Hi,
> I have defined single line comment and multiline comment as follows:
> 
> SL_COMMENT
> : "//"
> (~('\n'|'\r'))* ('\n'|'\r'('\n')?)?
> 		{ _ttype = 
> 
> ANTLR_USE_NAMESPACE(antlr)Token::SKIP; }
> ;
> 
> ML_COMMENT
>     :    "/*"
>          (  { LA(2)!='/' }? '*'
>          | '\n' { newline(); }
>          | ~('*'|'\n')
>          )*
>          "*/"
> 		{ _ttype = 
> 
> ANTLR_USE_NAMESPACE(antlr)Token::SKIP; }
>     ;
> 
> When a file with the comments are parsed, an exception is thrown 
> depending on the string that appears following the "//" and 
the "/*" 
> characters.
> I just want the parser to ignore the string that follows 
immediately 
> after the "//" or "/*" till the newline is encountered.
> Can anyone please suggest me a solution for the problem.
> 
> Thanks in advance.
> Regards,
> Ramya
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From joabo552 at student.liu.se  Wed May 14 02:04:43 2003
From: joabo552 at student.liu.se (Joakim Bodin)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] special c/c++ parsing
Message-ID: <b9t0rb+mq4n@eGroups.com>

Hi, my name is Joakim Bodin and at the moment I'm writing a tool for
my thesis that involves taking C/C++ real-time components as an input.
>>From these components I need to parse out for each function which
other function that function calls and how many times. So for example:

void foo::bar1(int param) {
    fie1();
    for(int i=0;i < param; i++) {
        for(int j=0;j < param; j++) {
            fie2();
        }
    }
    bar2();
    fie1();
}

void foo::bar2() {
    bar1();
    int i=0;
    while(i < 5) {
        fie2();
    }
}

Should produce the output of:
void foo::bar1(param):
    fie1() 2;
    fie2() param*param;
    bar2() 1;

void foo::bar2():
    bar1() 1;
    fie2() 5;

Right now I'm thinking a C++ grammar subset would suffice to produce a
AST that I could use to obtain the information I want. But as I've
never used a parser before I'd like some input to this before I start.
Is this sufficient or would it be better to use the full C++ grammar
and then prune everything I'm not interested in?

Some help to construct the needed C++ grammar subset would also be
appreciated. Conditional statements could also enlarge the problem but
I've ignored that for the time being.

/Joakim Bodin


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Anthony.Youngman at ECA-International.com  Wed May 14 03:03:09 2003
From: Anthony.Youngman at ECA-International.com (Anthony W Youngman)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] creating editor to do syntax highlighting
Message-ID: <C7FE35004D40FD45AA342991B88CE40409A298@lnml1.eca-international.local>

If you want to do this the hard way, get a copy of emacs and study their
language-specific modules :-)

Cheers,
Wol

-----Original Message-----
From: William Lam [mailto:xeenman@yahoo.com] 
Sent: 13 May 2003 18:53
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] creating editor to do syntax highlighting


I am implementing an editor for my custom language that highlights 
keywords in my language.

I am wondering if ANTLR would be the proper tool in this case.  How 
do java editors such as Eclipse determine syntax errors so quickly?

Any pointers would be greatly appreciated


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.
From brett at crawley.uk.com  Wed May 14 05:35:15 2003
From: brett at crawley.uk.com (Brett Crawley)
Date: Mon Dec 20 16:15:36 2004
Subject: [antlr-interest] Re: Does there exist a Java parser for C++
In-Reply-To: <b9q5oh+qq0h@eGroups.com>
Message-ID: <b9td63+dgi0@eGroups.com>

Charles

ANTLR has a grammer for parsing Java and can generate C++ code for 
you, may I refer you to:

http://www.antlr.org/doc/cpp-runtime.html#_generatingcpp

and you need the grammar files from:

http://www.antlr.org/grammars/java

if however you are trying to parse a C++ file from a java app you 
need the grammar files from:

http://www.antlr.org/grammars/cpp

I hope this is a little bit more helpful.

Regards

Brett Crawley


--- In antlr-interest@yahoogroups.com, "zhangcharles" 
<zhangcharles@y...> wrote:
> Hi, my research group is building a cross language analysis tool 
and 
> we want to use ANTLR for it. However, there doesn't seem to exist a 
> Java parser for C++. Or does it? Unfortunately our tool is java 
> based. Can anyone give me some information on that? Can experts 
tell 
> me how complicated it is to convert the C++ based grammar on the 
> antlr website to Java? Thanks a lot.
> 
> Charles
> 
> Middleware Systems Research Group
> U. Toronto


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From cgodfrey at epnet.com  Wed May 14 06:37:06 2003
From: cgodfrey at epnet.com (cgodfrey86)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Representing state in lexer
Message-ID: <b9tgq2+10epk@eGroups.com>

Hello,

I am trying to write a grammar file which recognizes a subset of 
tokens only if in a specific state.

For example AND is recognized as token AND_OP if NOT appearing within 
quotes. If appearing within quotes, AND is recognized as a PATTERN 
token. I've included the grammar file which I have defined. Any 
suggestions as to what I am doing wrong would be appreciated.

When I run a test program using the generated lexer, tokens are 
recognized properly when appearing in quotes:

"WAR AND PEACE";
*************************************************
 > lexer mQUOTE; c=="
 < lexer mQUOTE; c==w
Token: [""",<17>,line=1,col=1]
Token Type: 17
Token Text: "
 > lexer mTERM; c==w
  > lexer mALLOWCHARS; c==w
  < lexer mALLOWCHARS; c==a
  > lexer mALLOWCHARS; c==a
  < lexer mALLOWCHARS; c==r
  > lexer mALLOWCHARS; c==r
  < lexer mALLOWCHARS; c==
 < lexer mTERM; c==
Token: ["WAR",<16>,line=1,col=2]
Token Type: 16
Token Text: WAR
 > lexer mWS; c==
 < lexer mWS; c==a
 > lexer mTERM; c==a
  > lexer mALLOWCHARS; c==a
  < lexer mALLOWCHARS; c==n
  > lexer mALLOWCHARS; c==n
  < lexer mALLOWCHARS; c==d
  > lexer mALLOWCHARS; c==d
  < lexer mALLOWCHARS; c==
 < lexer mTERM; c==
Token: ["AND",<16>,line=1,col=6]
Token Type: 16
Token Text: AND
 > lexer mWS; c==
 < lexer mWS; c==p
 > lexer mTERM; c==p
  > lexer mALLOWCHARS; c==p
  < lexer mALLOWCHARS; c==e
  > lexer mALLOWCHARS; c==e
  < lexer mALLOWCHARS; c==a
  > lexer mALLOWCHARS; c==a
  < lexer mALLOWCHARS; c==c
  > lexer mALLOWCHARS; c==c
  < lexer mALLOWCHARS; c==e
  > lexer mALLOWCHARS; c==e
  < lexer mALLOWCHARS; c=="
 < lexer mTERM; c=="
Token: ["PEACE",<16>,line=1,col=10]
Token Type: 16
Token Text: PEACE
 > lexer mQUOTE; c=="
 < lexer mQUOTE; c==;
Token: [""",<17>,line=1,col=15]
Token Type: 17
Token Text: "
 > lexer mSEMI; c==;
 < lexer mSEMI; c==
Token: [";",<26>,line=1,col=16]
Token Type: 26
Token Text: ;
done lexing...
*************************************************

When appearing without quotes, tokens are not recognized as expected:
WAR AND PEACE;
*************************************************
 > lexer mTERM; c==w
  > lexer mWS; c==r
  < lexer mWS; c==r
 < lexer mTERM; c==w
exception: line 1:1: unexpected char: 'w'
*************************************************
AND PEACE;
*************************************************
 > lexer mTERM; c==a
 < lexer mTERM; c==
Token: ["AND",<6>,line=1,col=1]
Token Type: 6
Token Text: AND
 > lexer mWS; c==
 < lexer mWS; c==p
 > lexer mTERM; c==p
  > lexer mWS; c==a
  < lexer mWS; c==a
 < lexer mTERM; c==p
exception: line 1:5: unexpected char: 'p'
*************************************************

options
{
	language = "CSharp";
}

class UserLexer extends Lexer;
options {
  k=3;
  caseSensitive=false;
  caseSensitiveLiterals=false;
}

tokens {
S_TAG;
OR_OP;
AND_OP;
NOT_OP;
GT_OP;
GE_OP;
LT_OP;
LE_OP;
EQ_OP;
DASH;
W_OP;
N_OP;
PATTERN;
}


{
	

	public bool isQuoted = false;

}


QUOTE : '"' {if (this.isQuoted) {this.isQuoted = false;} else 
{this.isQuoted = true;} };

OPEN_PAREN : '(';

CLOSE_PAREN : ')';


TERM 	:
	{!this.isQuoted}?
	(
	("gt")=> "gt"
	{$setType(GT_OP);}
 	| (">")=> ">"
	{$setType(GT_OP);}
	|("ge")=> "ge" 
	{$setType(GE_OP);}
	|(">=")=> ">="
	{$setType(GE_OP);}
	|("lt")=>"lt" 
	{$setType(LT_OP);}
	|("<")=>"<"
	{$setType(LT_OP);}
	|("le")=>"le"
	{$setType(LE_OP);}
	|("<=")=>"<="
	{$setType(LE_OP);}
	|("eq")=>"eq" 
	{$setType(EQ_OP);}
	|("=")=>"="
	{$setType(EQ_OP);}
	|("-")=>"-"
	{$setType(DASH);}
	| ("or") => "or"
	{$setType(OR_OP);}
	| ("and") => "and"
	{$setType(AND_OP);}
	| ("not") => "not"
	{$setType(NOT_OP);}
	|(('a'..'z')('a'..'z') WS) => ('a'..'z')('a'..'z')
      	{
		$setType(S_TAG);
        }
        | ('w'INT)=>'w'INT
	{$setType(W_OP);}
        | ('n'INT)=>'n'INT
	{$setType(N_OP);}
	)
	|
	(ALLOWCHARS)+
	{$setType(PATTERN);}
     	;


protected
REAL   : INT'.'INT;

protected 
DIGIT	: ('0'..'9');

protected
INT     : (DIGIT)+;
 

protected
ALLOWCHARS : ~('"'|'('|')'|'\n'|' '|'\r'|'\t'|';');

WS	:	(
			options {
			generateAmbigWarnings=false;
			}
		:	' '
		|	'\t'
		|	'\n'	{ newline(); }
		|	"\r\n"	{ newline(); }
		|	'\r'	{ newline(); }
		)+
	{ $setType(Token.SKIP); }
	;

// semi is made special for test here only
SEMI   : ';';





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mitram_8 at yahoo.com  Wed May 14 06:43:43 2003
From: mitram_8 at yahoo.com (raj b)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Pls remove my id(mitram_8@yahoo.com), I don't want to be in this list.
In-Reply-To: <b9tgq2+10epk@eGroups.com>
Message-ID: <20030514134343.92805.qmail@web12707.mail.yahoo.com>


--- cgodfrey86 <cgodfrey@epnet.com> wrote:
> Hello,
> 
> I am trying to write a grammar file which recognizes
> a subset of 
> tokens only if in a specific state.
> 
> For example AND is recognized as token AND_OP if NOT
> appearing within 
> quotes. If appearing within quotes, AND is
> recognized as a PATTERN 
> token. I've included the grammar file which I have
> defined. Any 
> suggestions as to what I am doing wrong would be
> appreciated.
> 
> When I run a test program using the generated lexer,
> tokens are 
> recognized properly when appearing in quotes:
> 
> "WAR AND PEACE";
> *************************************************
>  > lexer mQUOTE; c=="
>  < lexer mQUOTE; c==w
> Token: [""",<17>,line=1,col=1]
> Token Type: 17
> Token Text: "
>  > lexer mTERM; c==w
>   > lexer mALLOWCHARS; c==w
>   < lexer mALLOWCHARS; c==a
>   > lexer mALLOWCHARS; c==a
>   < lexer mALLOWCHARS; c==r
>   > lexer mALLOWCHARS; c==r
>   < lexer mALLOWCHARS; c==
>  < lexer mTERM; c==
> Token: ["WAR",<16>,line=1,col=2]
> Token Type: 16
> Token Text: WAR
>  > lexer mWS; c==
>  < lexer mWS; c==a
>  > lexer mTERM; c==a
>   > lexer mALLOWCHARS; c==a
>   < lexer mALLOWCHARS; c==n
>   > lexer mALLOWCHARS; c==n
>   < lexer mALLOWCHARS; c==d
>   > lexer mALLOWCHARS; c==d
>   < lexer mALLOWCHARS; c==
>  < lexer mTERM; c==
> Token: ["AND",<16>,line=1,col=6]
> Token Type: 16
> Token Text: AND
>  > lexer mWS; c==
>  < lexer mWS; c==p
>  > lexer mTERM; c==p
>   > lexer mALLOWCHARS; c==p
>   < lexer mALLOWCHARS; c==e
>   > lexer mALLOWCHARS; c==e
>   < lexer mALLOWCHARS; c==a
>   > lexer mALLOWCHARS; c==a
>   < lexer mALLOWCHARS; c==c
>   > lexer mALLOWCHARS; c==c
>   < lexer mALLOWCHARS; c==e
>   > lexer mALLOWCHARS; c==e
>   < lexer mALLOWCHARS; c=="
>  < lexer mTERM; c=="
> Token: ["PEACE",<16>,line=1,col=10]
> Token Type: 16
> Token Text: PEACE
>  > lexer mQUOTE; c=="
>  < lexer mQUOTE; c==;
> Token: [""",<17>,line=1,col=15]
> Token Type: 17
> Token Text: "
>  > lexer mSEMI; c==;
>  < lexer mSEMI; c==
> Token: [";",<26>,line=1,col=16]
> Token Type: 26
> Token Text: ;
> done lexing...
> *************************************************
> 
> When appearing without quotes, tokens are not
> recognized as expected:
> WAR AND PEACE;
> *************************************************
>  > lexer mTERM; c==w
>   > lexer mWS; c==r
>   < lexer mWS; c==r
>  < lexer mTERM; c==w
> exception: line 1:1: unexpected char: 'w'
> *************************************************
> AND PEACE;
> *************************************************
>  > lexer mTERM; c==a
>  < lexer mTERM; c==
> Token: ["AND",<6>,line=1,col=1]
> Token Type: 6
> Token Text: AND
>  > lexer mWS; c==
>  < lexer mWS; c==p
>  > lexer mTERM; c==p
>   > lexer mWS; c==a
>   < lexer mWS; c==a
>  < lexer mTERM; c==p
> exception: line 1:5: unexpected char: 'p'
> *************************************************
> 
> options
> {
> 	language = "CSharp";
> }
> 
> class UserLexer extends Lexer;
> options {
>   k=3;
>   caseSensitive=false;
>   caseSensitiveLiterals=false;
> }
> 
> tokens {
> S_TAG;
> OR_OP;
> AND_OP;
> NOT_OP;
> GT_OP;
> GE_OP;
> LT_OP;
> LE_OP;
> EQ_OP;
> DASH;
> W_OP;
> N_OP;
> PATTERN;
> }
> 
> 
> {
> 	
> 
> 	public bool isQuoted = false;
> 
> }
> 
> 
> QUOTE : '"' {if (this.isQuoted) {this.isQuoted =
> false;} else 
> {this.isQuoted = true;} };
> 
> OPEN_PAREN : '(';
> 
> CLOSE_PAREN : ')';
> 
> 
> TERM 	:
> 	{!this.isQuoted}?
> 	(
> 	("gt")=> "gt"
> 	{$setType(GT_OP);}
>  	| (">")=> ">"
> 	{$setType(GT_OP);}
> 	|("ge")=> "ge" 
> 	{$setType(GE_OP);}
> 	|(">=")=> ">="
> 	{$setType(GE_OP);}
> 	|("lt")=>"lt" 
> 	{$setType(LT_OP);}
> 	|("<")=>"<"
> 	{$setType(LT_OP);}
> 	|("le")=>"le"
> 	{$setType(LE_OP);}
> 	|("<=")=>"<="
> 	{$setType(LE_OP);}
> 	|("eq")=>"eq" 
> 	{$setType(EQ_OP);}
> 	|("=")=>"="
> 	{$setType(EQ_OP);}
> 	|("-")=>"-"
> 	{$setType(DASH);}
> 	| ("or") => "or"
> 	{$setType(OR_OP);}
> 	| ("and") => "and"
> 	{$setType(AND_OP);}
> 	| ("not") => "not"
> 	{$setType(NOT_OP);}
> 	|(('a'..'z')('a'..'z') WS) => ('a'..'z')('a'..'z')
>       	{
> 		$setType(S_TAG);
>         }
>         | ('w'INT)=>'w'INT
> 	{$setType(W_OP);}
>         | ('n'INT)=>'n'INT
> 	{$setType(N_OP);}
> 	)
> 	|
> 	(ALLOWCHARS)+
> 	{$setType(PATTERN);}
>      	;
> 
> 
> protected
> REAL   : INT'.'INT;
> 
> 
=== message truncated ===


__________________________________
Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo.
http://search.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From brett at crawley.uk.com  Wed May 14 07:02:22 2003
From: brett at crawley.uk.com (Brett Crawley)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Re: Representing state in lexer
In-Reply-To: <b9tgq2+10epk@eGroups.com>
Message-ID: <b9ti9e+fq58@eGroups.com>

I would define quote without the action, remove " from the allowed 
characters and define pattern to be:

PATTERN : QUOTE (ALLOWCHARS)+ QUOTE ;

then define TERM to be:

TERM : PATTERN | 
        ("gt")=> "gt"
 	{$setType(GT_OP);}
  	| (">")=> ">"
 	{$setType(GT_OP);}
 	|("ge")=> "ge" 
 	{$setType(GE_OP);}
 	|(">=")=> ">="
 	{$setType(GE_OP);}
 	|("lt")=>"lt" 
 	{$setType(LT_OP);}
 	|("<")=>"<"
 	{$setType(LT_OP);}
 	|("le")=>"le"
 	{$setType(LE_OP);}
 	|("<=")=>"<="
 	{$setType(LE_OP);}
 	|("eq")=>"eq" 
 	{$setType(EQ_OP);}
 	|("=")=>"="
 	{$setType(EQ_OP);}
 	|("-")=>"-"
 	{$setType(DASH);}
 	| ("or") => "or"
 	{$setType(OR_OP);}
 	| ("and") => "and"
 	{$setType(AND_OP);}
 	| ("not") => "not"
 	{$setType(NOT_OP);}
 	|(('a'..'z')('a'..'z') WS) => ('a'..'z')('a'..'z')
       	{
 		$setType(S_TAG);
         }
         | ('w'INT)=>'w'INT
 	{$setType(W_OP);}
         | ('n'INT)=>'n'INT
 	{$setType(N_OP);} ;

Hope this is of help.

Regards

---- In antlr-interest@yahoogroups.com, "cgodfrey86" <cgodfrey@e...> 
wrote:
> Hello,
> 
> I am trying to write a grammar file which recognizes a subset of 
> tokens only if in a specific state.
> 
> For example AND is recognized as token AND_OP if NOT appearing 
within 
> quotes. If appearing within quotes, AND is recognized as a PATTERN 
> token. I've included the grammar file which I have defined. Any 
> suggestions as to what I am doing wrong would be appreciated.
> 
> When I run a test program using the generated lexer, tokens are 
> recognized properly when appearing in quotes:
> 
> "WAR AND PEACE";
> *************************************************
>  > lexer mQUOTE; c=="
>  < lexer mQUOTE; c==w
> Token: [""",<17>,line=1,col=1]
> Token Type: 17
> Token Text: "
>  > lexer mTERM; c==w
>   > lexer mALLOWCHARS; c==w
>   < lexer mALLOWCHARS; c==a
>   > lexer mALLOWCHARS; c==a
>   < lexer mALLOWCHARS; c==r
>   > lexer mALLOWCHARS; c==r
>   < lexer mALLOWCHARS; c==
>  < lexer mTERM; c==
> Token: ["WAR",<16>,line=1,col=2]
> Token Type: 16
> Token Text: WAR
>  > lexer mWS; c==
>  < lexer mWS; c==a
>  > lexer mTERM; c==a
>   > lexer mALLOWCHARS; c==a
>   < lexer mALLOWCHARS; c==n
>   > lexer mALLOWCHARS; c==n
>   < lexer mALLOWCHARS; c==d
>   > lexer mALLOWCHARS; c==d
>   < lexer mALLOWCHARS; c==
>  < lexer mTERM; c==
> Token: ["AND",<16>,line=1,col=6]
> Token Type: 16
> Token Text: AND
>  > lexer mWS; c==
>  < lexer mWS; c==p
>  > lexer mTERM; c==p
>   > lexer mALLOWCHARS; c==p
>   < lexer mALLOWCHARS; c==e
>   > lexer mALLOWCHARS; c==e
>   < lexer mALLOWCHARS; c==a
>   > lexer mALLOWCHARS; c==a
>   < lexer mALLOWCHARS; c==c
>   > lexer mALLOWCHARS; c==c
>   < lexer mALLOWCHARS; c==e
>   > lexer mALLOWCHARS; c==e
>   < lexer mALLOWCHARS; c=="
>  < lexer mTERM; c=="
> Token: ["PEACE",<16>,line=1,col=10]
> Token Type: 16
> Token Text: PEACE
>  > lexer mQUOTE; c=="
>  < lexer mQUOTE; c==;
> Token: [""",<17>,line=1,col=15]
> Token Type: 17
> Token Text: "
>  > lexer mSEMI; c==;
>  < lexer mSEMI; c==
> Token: [";",<26>,line=1,col=16]
> Token Type: 26
> Token Text: ;
> done lexing...
> *************************************************
> 
> When appearing without quotes, tokens are not recognized as 
expected:
> WAR AND PEACE;
> *************************************************
>  > lexer mTERM; c==w
>   > lexer mWS; c==r
>   < lexer mWS; c==r
>  < lexer mTERM; c==w
> exception: line 1:1: unexpected char: 'w'
> *************************************************
> AND PEACE;
> *************************************************
>  > lexer mTERM; c==a
>  < lexer mTERM; c==
> Token: ["AND",<6>,line=1,col=1]
> Token Type: 6
> Token Text: AND
>  > lexer mWS; c==
>  < lexer mWS; c==p
>  > lexer mTERM; c==p
>   > lexer mWS; c==a
>   < lexer mWS; c==a
>  < lexer mTERM; c==p
> exception: line 1:5: unexpected char: 'p'
> *************************************************
> 
> options
> {
> 	language = "CSharp";
> }
> 
> class UserLexer extends Lexer;
> options {
>   k=3;
>   caseSensitive=false;
>   caseSensitiveLiterals=false;
> }
> 
> tokens {
> S_TAG;
> OR_OP;
> AND_OP;
> NOT_OP;
> GT_OP;
> GE_OP;
> LT_OP;
> LE_OP;
> EQ_OP;
> DASH;
> W_OP;
> N_OP;
> PATTERN;
> }
> 
> 
> {
> 	
> 
> 	public bool isQuoted = false;
> 
> }
> 
> 
> QUOTE : '"' {if (this.isQuoted) {this.isQuoted = false;} else 
> {this.isQuoted = true;} };
> 
> OPEN_PAREN : '(';
> 
> CLOSE_PAREN : ')';
> 
> 
> TERM 	:
> 	{!this.isQuoted}?
> 	(
> 	("gt")=> "gt"
> 	{$setType(GT_OP);}
>  	| (">")=> ">"
> 	{$setType(GT_OP);}
> 	|("ge")=> "ge" 
> 	{$setType(GE_OP);}
> 	|(">=")=> ">="
> 	{$setType(GE_OP);}
> 	|("lt")=>"lt" 
> 	{$setType(LT_OP);}
> 	|("<")=>"<"
> 	{$setType(LT_OP);}
> 	|("le")=>"le"
> 	{$setType(LE_OP);}
> 	|("<=")=>"<="
> 	{$setType(LE_OP);}
> 	|("eq")=>"eq" 
> 	{$setType(EQ_OP);}
> 	|("=")=>"="
> 	{$setType(EQ_OP);}
> 	|("-")=>"-"
> 	{$setType(DASH);}
> 	| ("or") => "or"
> 	{$setType(OR_OP);}
> 	| ("and") => "and"
> 	{$setType(AND_OP);}
> 	| ("not") => "not"
> 	{$setType(NOT_OP);}
> 	|(('a'..'z')('a'..'z') WS) => ('a'..'z')('a'..'z')
>       	{
> 		$setType(S_TAG);
>         }
>         | ('w'INT)=>'w'INT
> 	{$setType(W_OP);}
>         | ('n'INT)=>'n'INT
> 	{$setType(N_OP);}
> 	)
> 	|
> 	(ALLOWCHARS)+
> 	{$setType(PATTERN);}
>      	;
> 
> 
> protected
> REAL   : INT'.'INT;
> 
> protected 
> DIGIT	: ('0'..'9');
> 
> protected
> INT     : (DIGIT)+;
>  
> 
> protected
> ALLOWCHARS : ~('"'|'('|')'|'\n'|' '|'\r'|'\t'|';');
> 
> WS	:	(
> 			options {
> 			generateAmbigWarnings=false;
> 			}
> 		:	' '
> 		|	'\t'
> 		|	'\n'	{ newline(); }
> 		|	"\r\n"	{ newline(); }
> 		|	'\r'	{ newline(); }
> 		)+
> 	{ $setType(Token.SKIP); }
> 	;
> 
> // semi is made special for test here only
> SEMI   : ';';


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From bulk at exaflop.org  Wed May 14 07:32:24 2003
From: bulk at exaflop.org (bulk@exaflop.org)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Re: c# code generation with Visual Studio .NET
In-Reply-To: <b96mdg+99r1@eGroups.com>
Message-ID: <004d01c31a25$a2f6eef0$c3351f3e@Bob>

Annoyingly the CustomTool thing is part of the VS Customisation Kit
which is only available under contract to Microsoft for people like
ActiveState and the ActiveReports people to produce commercial products
that tightly integrate with VS.NET. It has been publicly documented
though (as MS left it as a public class by accident) and so in VS.NET
2003 it has made it part of the public object model for user-level
customisation in the same way as menu items can be added.

I haven't got VS.NET 2003 yet, but as far as I can tell the build system
is exactly the same as the 2002 version which is disappointingly
inflexible for C# projects. Thinking about it though, there should be a
way around this problem: Create a CustomTool for .g files and in the
processing logic, use the VSProject and VSProjectItem interfaces to add
the resultant files to the project if they weren't already there and
reload them if they are. I'm not sure if the dependency logic in VS.NET
is smart enough to deal with that though, but its worth a try :)

In the meantime I made a horrible but fairly effective workaround:
Create a dummy C++ project in your solution, make it a Win32 command
line app or dll or whatever. Ignore the files the Create Project Wizard
creates but add your parser.g file in that project as a source file and
set up a custom build operation for it. You'll have to spend a bit of
time passing all the necessary parameters so it copies the resultant .cs
files to your C# project but you only have to do it once (unless you are
creating ANTLR projects frequently in which case you could write your
own custom wizard to sort it out). Now just make the building of your C#
project dependant on the C++ project and your files will always be up to
date.

Actually I don't know if I did this right or if theres a bug in VS.NET,
but the way I set mine up, ANTLR always gets rerun when I go to compile
the C# project whether or not the .g file has changed. Still, my machine
is fast enough to run even java at a decent speed so it doesn't bother
me too much.

Regards,

Richard

-----Original Message-----
From: micheal_jor [mailto:open.zone@virgin.net] 
Sent: 05 May 2003 22:52
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: c# code generation with Visual Studio .NET


--- In antlr-interest@yahoogroups.com, "Ney, Richard" 
<richard.ney@a...> wrote:
> Patrik,

> The work around I did was to setup a menu item in the Tools menu of
the IDE.
> This at least allows me to select a .g file and compile it. Until
someone
> has the time to write the add-in for .NET languages this is the
best we have
> at this time.

VS.NET's CustomTool model (for code-generators) is limited because it 
only allows the generation of a single source file for each input 
file. It does not support a code generator - like ANTLR - that can 
generate *multiple* outputSourceCode files from a single 
codegenSource file.

Given that *most* ANTLR grammar files are indeed multi-ouput, we 
decided against developing a VS.NET CustomTool interface for ANTLR/C# 
for the moment. Any such interface would be limited to a outputting a 
single source file per *.g file and we didn't fancy having our 
Lexers, Parsers and TreeParsers all pop out in the same *huge* source 
file.

I haven't look at VS.NET 2003 yet in any great detail as far as this 
issue in considered so, there may be hope yet.

Cheers,

Micheal
ANTLR/C# codegen 



 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From cgodfrey at epnet.com  Wed May 14 07:55:59 2003
From: cgodfrey at epnet.com (cgodfrey86)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Re: Representing state in lexer
In-Reply-To: <b9ti9e+fq58@eGroups.com>
Message-ID: <b9tldv+5etf@eGroups.com>

Thank you for the suggestion.

The main issue that I am running into with this is that a PATTERN 
token can appear either inside or outside of quotes - so I won't 
recognize a PATTERN outside of quotes. When I try and define it 
without quotes, I have lexical nondeterminism

PATTERN : QUOTE (ALLOWCHARS)+ QUOTE ;





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Anthony.Youngman at ECA-International.com  Wed May 14 08:02:06 2003
From: Anthony.Youngman at ECA-International.com (Anthony W Youngman)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Re: Representing state in lexer
Message-ID: <C7FE35004D40FD45AA342991B88CE40409A29E@lnml1.eca-international.local>

What is it non-deterministic with? In other words, what other construct
recognised by the lexer could a PATTERN be confused with?

You will have to define an unquoted pattern as a subset of that other
construct, and then use $settype to change the type to PATTERN if that's
what you've got.

Cheers,
Wol

-----Original Message-----
From: cgodfrey86 [mailto:cgodfrey@epnet.com] 
Sent: 14 May 2003 15:56
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Representing state in lexer


Thank you for the suggestion.

The main issue that I am running into with this is that a PATTERN 
token can appear either inside or outside of quotes - so I won't 
recognize a PATTERN outside of quotes. When I try and define it 
without quotes, I have lexical nondeterminism

PATTERN : QUOTE (ALLOWCHARS)+ QUOTE ;





 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.
From mikhail at augustmail.com  Wed May 14 08:11:53 2003
From: mikhail at augustmail.com (TheSamiM)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] C++: Exception on loading literals.
Message-ID: <b9tmbp+5fs7@eGroups.com>

Help!

Using ANTLR 2.7.2.
Using Visual C++ 6.0 (no service packs as far as I can tell)

I built antlrd.dll; truck loads of warnings but no errors.

I generated the classes from my grammar. (Tried this with some of the 
example grammers and am having the same issue...)

I run. I crash. The exception is a "memory at xxxxxx cannot be read".

This is happening on initLiterals(), on the first literal.
When CharScannerLiteralsLess::operator() is called, the second 
parameter is an invalid pointer. (Which kinda makes sense because 
there shouldn't be any other elements in the map, but why is 
CharScanner (or is it the map?) bothering with a comparison for an 
empty map?

Am I missing something?
Am I missing a service pack?
Should the map be initialized somehow? (How?)
Where does one get the service packs for VC anymore, all I can find 
on MSDN is .net foo wich won't help much...

Any pointers (no pun intended) would be greatly appreciated.




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From cgodfrey at epnet.com  Wed May 14 07:28:09 2003
From: cgodfrey at epnet.com (cgodfrey86)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Re: Representing state in lexer
In-Reply-To: <b9ti9e+fq58@eGroups.com>
Message-ID: <b9tjpp+ulek@eGroups.com>

Thank you for the suggestion.
The only problem I have with this is that I need a pattern to be 
defined as a PATTERN token with or without quotes. If I try and 
specify without quotes, I am getting nondeterminism errors.

--- In antlr-interest@yahoogroups.com, "Brett Crawley" <brett@c...> 
wrote:
> I would define quote without the action, remove " from the allowed 
> characters and define pattern to be:
> 
> PATTERN : QUOTE (ALLOWCHARS)+ QUOTE ;
> 
> then define TERM to be:
> 
> TERM : PATTERN | 
>         ("gt")=> "gt"
>  	{$setType(GT_OP);}
>   	| (">")=> ">"
>  	{$setType(GT_OP);}
>  	|("ge")=> "ge" 
>  	{$setType(GE_OP);}
>  	|(">=")=> ">="
>  	{$setType(GE_OP);}
>  	|("lt")=>"lt" 
>  	{$setType(LT_OP);}
>  	|("<")=>"<"
>  	{$setType(LT_OP);}
>  	|("le")=>"le"
>  	{$setType(LE_OP);}
>  	|("<=")=>"<="
>  	{$setType(LE_OP);}
>  	|("eq")=>"eq" 
>  	{$setType(EQ_OP);}
>  	|("=")=>"="
>  	{$setType(EQ_OP);}
>  	|("-")=>"-"
>  	{$setType(DASH);}
>  	| ("or") => "or"
>  	{$setType(OR_OP);}
>  	| ("and") => "and"
>  	{$setType(AND_OP);}
>  	| ("not") => "not"
>  	{$setType(NOT_OP);}
>  	|(('a'..'z')('a'..'z') WS) => ('a'..'z')('a'..'z')
>        	{
>  		$setType(S_TAG);
>          }
>          | ('w'INT)=>'w'INT
>  	{$setType(W_OP);}
>          | ('n'INT)=>'n'INT
>  	{$setType(N_OP);} ;
> 
> Hope this is of help.
> 
> Regards
> 
> ---- In antlr-interest@yahoogroups.com, "cgodfrey86" 
<cgodfrey@e...> 
> wrote:
> > Hello,
> > 
> > I am trying to write a grammar file which recognizes a subset of 
> > tokens only if in a specific state.
> > 
> > For example AND is recognized as token AND_OP if NOT appearing 
> within 
> > quotes. If appearing within quotes, AND is recognized as a 
PATTERN 
> > token. I've included the grammar file which I have defined. Any 
> > suggestions as to what I am doing wrong would be appreciated.
> > 
> > When I run a test program using the generated lexer, tokens are 
> > recognized properly when appearing in quotes:
> > 
> > "WAR AND PEACE";
> > *************************************************
> >  > lexer mQUOTE; c=="
> >  < lexer mQUOTE; c==w
> > Token: [""",<17>,line=1,col=1]
> > Token Type: 17
> > Token Text: "
> >  > lexer mTERM; c==w
> >   > lexer mALLOWCHARS; c==w
> >   < lexer mALLOWCHARS; c==a
> >   > lexer mALLOWCHARS; c==a
> >   < lexer mALLOWCHARS; c==r
> >   > lexer mALLOWCHARS; c==r
> >   < lexer mALLOWCHARS; c==
> >  < lexer mTERM; c==
> > Token: ["WAR",<16>,line=1,col=2]
> > Token Type: 16
> > Token Text: WAR
> >  > lexer mWS; c==
> >  < lexer mWS; c==a
> >  > lexer mTERM; c==a
> >   > lexer mALLOWCHARS; c==a
> >   < lexer mALLOWCHARS; c==n
> >   > lexer mALLOWCHARS; c==n
> >   < lexer mALLOWCHARS; c==d
> >   > lexer mALLOWCHARS; c==d
> >   < lexer mALLOWCHARS; c==
> >  < lexer mTERM; c==
> > Token: ["AND",<16>,line=1,col=6]
> > Token Type: 16
> > Token Text: AND
> >  > lexer mWS; c==
> >  < lexer mWS; c==p
> >  > lexer mTERM; c==p
> >   > lexer mALLOWCHARS; c==p
> >   < lexer mALLOWCHARS; c==e
> >   > lexer mALLOWCHARS; c==e
> >   < lexer mALLOWCHARS; c==a
> >   > lexer mALLOWCHARS; c==a
> >   < lexer mALLOWCHARS; c==c
> >   > lexer mALLOWCHARS; c==c
> >   < lexer mALLOWCHARS; c==e
> >   > lexer mALLOWCHARS; c==e
> >   < lexer mALLOWCHARS; c=="
> >  < lexer mTERM; c=="
> > Token: ["PEACE",<16>,line=1,col=10]
> > Token Type: 16
> > Token Text: PEACE
> >  > lexer mQUOTE; c=="
> >  < lexer mQUOTE; c==;
> > Token: [""",<17>,line=1,col=15]
> > Token Type: 17
> > Token Text: "
> >  > lexer mSEMI; c==;
> >  < lexer mSEMI; c==
> > Token: [";",<26>,line=1,col=16]
> > Token Type: 26
> > Token Text: ;
> > done lexing...
> > *************************************************
> > 
> > When appearing without quotes, tokens are not recognized as 
> expected:
> > WAR AND PEACE;
> > *************************************************
> >  > lexer mTERM; c==w
> >   > lexer mWS; c==r
> >   < lexer mWS; c==r
> >  < lexer mTERM; c==w
> > exception: line 1:1: unexpected char: 'w'
> > *************************************************
> > AND PEACE;
> > *************************************************
> >  > lexer mTERM; c==a
> >  < lexer mTERM; c==
> > Token: ["AND",<6>,line=1,col=1]
> > Token Type: 6
> > Token Text: AND
> >  > lexer mWS; c==
> >  < lexer mWS; c==p
> >  > lexer mTERM; c==p
> >   > lexer mWS; c==a
> >   < lexer mWS; c==a
> >  < lexer mTERM; c==p
> > exception: line 1:5: unexpected char: 'p'
> > *************************************************
> > 
> > options
> > {
> > 	language = "CSharp";
> > }
> > 
> > class UserLexer extends Lexer;
> > options {
> >   k=3;
> >   caseSensitive=false;
> >   caseSensitiveLiterals=false;
> > }
> > 
> > tokens {
> > S_TAG;
> > OR_OP;
> > AND_OP;
> > NOT_OP;
> > GT_OP;
> > GE_OP;
> > LT_OP;
> > LE_OP;
> > EQ_OP;
> > DASH;
> > W_OP;
> > N_OP;
> > PATTERN;
> > }
> > 
> > 
> > {
> > 	
> > 
> > 	public bool isQuoted = false;
> > 
> > }
> > 
> > 
> > QUOTE : '"' {if (this.isQuoted) {this.isQuoted = false;} else 
> > {this.isQuoted = true;} };
> > 
> > OPEN_PAREN : '(';
> > 
> > CLOSE_PAREN : ')';
> > 
> > 
> > TERM 	:
> > 	{!this.isQuoted}?
> > 	(
> > 	("gt")=> "gt"
> > 	{$setType(GT_OP);}
> >  	| (">")=> ">"
> > 	{$setType(GT_OP);}
> > 	|("ge")=> "ge" 
> > 	{$setType(GE_OP);}
> > 	|(">=")=> ">="
> > 	{$setType(GE_OP);}
> > 	|("lt")=>"lt" 
> > 	{$setType(LT_OP);}
> > 	|("<")=>"<"
> > 	{$setType(LT_OP);}
> > 	|("le")=>"le"
> > 	{$setType(LE_OP);}
> > 	|("<=")=>"<="
> > 	{$setType(LE_OP);}
> > 	|("eq")=>"eq" 
> > 	{$setType(EQ_OP);}
> > 	|("=")=>"="
> > 	{$setType(EQ_OP);}
> > 	|("-")=>"-"
> > 	{$setType(DASH);}
> > 	| ("or") => "or"
> > 	{$setType(OR_OP);}
> > 	| ("and") => "and"
> > 	{$setType(AND_OP);}
> > 	| ("not") => "not"
> > 	{$setType(NOT_OP);}
> > 	|(('a'..'z')('a'..'z') WS) => ('a'..'z')('a'..'z')
> >       	{
> > 		$setType(S_TAG);
> >         }
> >         | ('w'INT)=>'w'INT
> > 	{$setType(W_OP);}
> >         | ('n'INT)=>'n'INT
> > 	{$setType(N_OP);}
> > 	)
> > 	|
> > 	(ALLOWCHARS)+
> > 	{$setType(PATTERN);}
> >      	;
> > 
> > 
> > protected
> > REAL   : INT'.'INT;
> > 
> > protected 
> > DIGIT	: ('0'..'9');
> > 
> > protected
> > INT     : (DIGIT)+;
> >  
> > 
> > protected
> > ALLOWCHARS : ~('"'|'('|')'|'\n'|' '|'\r'|'\t'|';');
> > 
> > WS	:	(
> > 			options {
> > 			generateAmbigWarnings=false;
> > 			}
> > 		:	' '
> > 		|	'\t'
> > 		|	'\n'	{ newline(); }
> > 		|	"\r\n"	{ newline(); }
> > 		|	'\r'	{ newline(); }
> > 		)+
> > 	{ $setType(Token.SKIP); }
> > 	;
> > 
> > // semi is made special for test here only
> > SEMI   : ';';


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Wed May 14 08:34:32 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Re: Problem with Single Line Comments--solve
	d
Message-ID: <170826586F3BD511910D0200C110AAA8054023AF@memail03.bco-home.com>

Good try, but the problem is probably completely different.  Try setting the
charVocabulary option for the lexer.  For example:

options{
charVocabulary = '\3'..'\377'
}

Antlr didn't know to include - ( or ).  By default it only includes
characters you specifically name in the lexer or parser.  Setting this
option as above tells it to include all ASCII chars except \0 \1 and \2
which antlr reserves for its own use though I can't remember exactly why
right now...

Monty


-----Original Message-----
From: ramyasivadas [mailto:ramyasivadas@yahoo.co.in]
Sent: Wednesday, May 14, 2003 1:57 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Problem with Single Line Comments--solved


Hi,
Thank you for your response.
For eg, if the input is
 //file created in may for xyz -re.ist (comment)

 On encountering the - or ( or ), an exception was thrown.
But, i have now solved that by defining the SL_COMMENT and ML_COMMENT 
as follows:
SL_COMMENT
: "//"
(~('\n'|'\r'))* ('\n'|'\r'|'.'|'-'|'('|')'('\n')?)?
		{ _ttype = 

ANTLR_USE_NAMESPACE(antlr)Token::SKIP;}
;

ML_COMMENT
    :    "/*"
         (  { LA(2)!='/' }? '*'
		 | '.'|'-'|'('|')'
         | '\n' { newline(); }
         | ~('*'|'\n')
         )*
         "*/"
		{ _ttype = 

ANTLR_USE_NAMESPACE(antlr)Token::SKIP;}
    ;

Will post if i encounter some other problem.

Thanks and Regards,
Ramya


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> What is the input and what is the exception thrown?
> 
> Monty
> 
> -----Original Message-----
> From: ramyasivadas [mailto:ramyasivadas@y...]
> Sent: Monday, May 12, 2003 4:00 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Problem with Single Line Comments
> 
> 
> Hi,
> I have defined single line comment and multiline comment as follows:
> 
> SL_COMMENT
> : "//"
> (~('\n'|'\r'))* ('\n'|'\r'('\n')?)?
> 		{ _ttype = 
> 
> ANTLR_USE_NAMESPACE(antlr)Token::SKIP; }
> ;
> 
> ML_COMMENT
>     :    "/*"
>          (  { LA(2)!='/' }? '*'
>          | '\n' { newline(); }
>          | ~('*'|'\n')
>          )*
>          "*/"
> 		{ _ttype = 
> 
> ANTLR_USE_NAMESPACE(antlr)Token::SKIP; }
>     ;
> 
> When a file with the comments are parsed, an exception is thrown 
> depending on the string that appears following the "//" and 
the "/*" 
> characters.
> I just want the parser to ignore the string that follows 
immediately 
> after the "//" or "/*" till the newline is encountered.
> Can anyone please suggest me a solution for the problem.
> 
> Thanks in advance.
> Regards,
> Ramya
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Wed May 14 08:42:18 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Representing state in lexer
Message-ID: <170826586F3BD511910D0200C110AAA8054023B0@memail03.bco-home.com>

Try a completely different approach.  Use lexer states.
http://www.antlr.org/doc/lexer.html#Lexical_States

Monty

-----Original Message-----
From: cgodfrey86 [mailto:cgodfrey@epnet.com]
Sent: Wednesday, May 14, 2003 6:37 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Representing state in lexer


Hello,

I am trying to write a grammar file which recognizes a subset of 
tokens only if in a specific state.

For example AND is recognized as token AND_OP if NOT appearing within 
quotes. If appearing within quotes, AND is recognized as a PATTERN 
token. I've included the grammar file which I have defined. Any 
suggestions as to what I am doing wrong would be appreciated.

When I run a test program using the generated lexer, tokens are 
recognized properly when appearing in quotes:

"WAR AND PEACE";
*************************************************
 > lexer mQUOTE; c=="
 < lexer mQUOTE; c==w
Token: [""",<17>,line=1,col=1]
Token Type: 17
Token Text: "
 > lexer mTERM; c==w
  > lexer mALLOWCHARS; c==w
  < lexer mALLOWCHARS; c==a
  > lexer mALLOWCHARS; c==a
  < lexer mALLOWCHARS; c==r
  > lexer mALLOWCHARS; c==r
  < lexer mALLOWCHARS; c==
 < lexer mTERM; c==
Token: ["WAR",<16>,line=1,col=2]
Token Type: 16
Token Text: WAR
 > lexer mWS; c==
 < lexer mWS; c==a
 > lexer mTERM; c==a
  > lexer mALLOWCHARS; c==a
  < lexer mALLOWCHARS; c==n
  > lexer mALLOWCHARS; c==n
  < lexer mALLOWCHARS; c==d
  > lexer mALLOWCHARS; c==d
  < lexer mALLOWCHARS; c==
 < lexer mTERM; c==
Token: ["AND",<16>,line=1,col=6]
Token Type: 16
Token Text: AND
 > lexer mWS; c==
 < lexer mWS; c==p
 > lexer mTERM; c==p
  > lexer mALLOWCHARS; c==p
  < lexer mALLOWCHARS; c==e
  > lexer mALLOWCHARS; c==e
  < lexer mALLOWCHARS; c==a
  > lexer mALLOWCHARS; c==a
  < lexer mALLOWCHARS; c==c
  > lexer mALLOWCHARS; c==c
  < lexer mALLOWCHARS; c==e
  > lexer mALLOWCHARS; c==e
  < lexer mALLOWCHARS; c=="
 < lexer mTERM; c=="
Token: ["PEACE",<16>,line=1,col=10]
Token Type: 16
Token Text: PEACE
 > lexer mQUOTE; c=="
 < lexer mQUOTE; c==;
Token: [""",<17>,line=1,col=15]
Token Type: 17
Token Text: "
 > lexer mSEMI; c==;
 < lexer mSEMI; c==
Token: [";",<26>,line=1,col=16]
Token Type: 26
Token Text: ;
done lexing...
*************************************************

When appearing without quotes, tokens are not recognized as expected:
WAR AND PEACE;
*************************************************
 > lexer mTERM; c==w
  > lexer mWS; c==r
  < lexer mWS; c==r
 < lexer mTERM; c==w
exception: line 1:1: unexpected char: 'w'
*************************************************
AND PEACE;
*************************************************
 > lexer mTERM; c==a
 < lexer mTERM; c==
Token: ["AND",<6>,line=1,col=1]
Token Type: 6
Token Text: AND
 > lexer mWS; c==
 < lexer mWS; c==p
 > lexer mTERM; c==p
  > lexer mWS; c==a
  < lexer mWS; c==a
 < lexer mTERM; c==p
exception: line 1:5: unexpected char: 'p'
*************************************************

options
{
	language = "CSharp";
}

class UserLexer extends Lexer;
options {
  k=3;
  caseSensitive=false;
  caseSensitiveLiterals=false;
}

tokens {
S_TAG;
OR_OP;
AND_OP;
NOT_OP;
GT_OP;
GE_OP;
LT_OP;
LE_OP;
EQ_OP;
DASH;
W_OP;
N_OP;
PATTERN;
}


{
	

	public bool isQuoted = false;

}


QUOTE : '"' {if (this.isQuoted) {this.isQuoted = false;} else 
{this.isQuoted = true;} };

OPEN_PAREN : '(';

CLOSE_PAREN : ')';


TERM 	:
	{!this.isQuoted}?
	(
	("gt")=> "gt"
	{$setType(GT_OP);}
 	| (">")=> ">"
	{$setType(GT_OP);}
	|("ge")=> "ge" 
	{$setType(GE_OP);}
	|(">=")=> ">="
	{$setType(GE_OP);}
	|("lt")=>"lt" 
	{$setType(LT_OP);}
	|("<")=>"<"
	{$setType(LT_OP);}
	|("le")=>"le"
	{$setType(LE_OP);}
	|("<=")=>"<="
	{$setType(LE_OP);}
	|("eq")=>"eq" 
	{$setType(EQ_OP);}
	|("=")=>"="
	{$setType(EQ_OP);}
	|("-")=>"-"
	{$setType(DASH);}
	| ("or") => "or"
	{$setType(OR_OP);}
	| ("and") => "and"
	{$setType(AND_OP);}
	| ("not") => "not"
	{$setType(NOT_OP);}
	|(('a'..'z')('a'..'z') WS) => ('a'..'z')('a'..'z')
      	{
		$setType(S_TAG);
        }
        | ('w'INT)=>'w'INT
	{$setType(W_OP);}
        | ('n'INT)=>'n'INT
	{$setType(N_OP);}
	)
	|
	(ALLOWCHARS)+
	{$setType(PATTERN);}
     	;


protected
REAL   : INT'.'INT;

protected 
DIGIT	: ('0'..'9');

protected
INT     : (DIGIT)+;
 

protected
ALLOWCHARS : ~('"'|'('|')'|'\n'|' '|'\r'|'\t'|';');

WS	:	(
			options {
			generateAmbigWarnings=false;
			}
		:	' '
		|	'\t'
		|	'\n'	{ newline(); }
		|	"\r\n"	{ newline(); }
		|	'\r'	{ newline(); }
		)+
	{ $setType(Token.SKIP); }
	;

// semi is made special for test here only
SEMI   : ';';





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From boy_wonder48 at hotmail.com  Wed May 14 09:59:53 2003
From: boy_wonder48 at hotmail.com (solmalik)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] New to antlr pls help
Message-ID: <b9tsm9+fo44@eGroups.com>

Hi there I am trying to write a formal grammar using antlr but am 
having some problems in getting the right syntax.  The grammr is to 
be used in order to parse process expression, some examples of the 
expressions are:

(a || b) ^ (a || c)

or 
(a;b)

or e sy b sy a

I have tried to capture the three different above forms in the 
grammar but am having trouble getting it right, is there anyone who 
has an idea on how to do it? Below is the code i have so far:

class P extends Parser;

startRule
	:   e:EQUATION
        {System.out.println("The eqn entered is, "+e.getText());}
    	;

class L extends Lexer;

EQUATION: OPEN (MINEQN)+ CLOSE
	;

OPEN:	'(' ;

CLOSE:	')' ;

MINEQN	: OPEN LETTER KEYWORD LETTER CLOSE (KEYWORD)?
	| OPEN LETTER KEYWORD LETTER CLOSE (KEYWORD LETTER)?
	| LETTER KEYWORD LETTER
	;

KEYWORD	:	';'
	|	'||'
	|	'sy'
	|	'rs'
	|	'^'
	|	'*'
	;	
	
LETTER	:  ('a' .. 'z' | 'A' .. 'Z'); 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Wed May 14 08:47:40 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] special c/c++ parsing
Message-ID: <170826586F3BD511910D0200C110AAA8054023B1@memail03.bco-home.com>

It's actually kind of hard to write a parser that parses just a subset of a
language.  The question becomes how to recognize what you want to ignore....
It would be better to use the full C++ grammar and then prune your tree to
just what you need.

Monty

-----Original Message-----
From: Joakim Bodin [mailto:joabo552@student.liu.se]
Sent: Wednesday, May 14, 2003 2:05 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] special c/c++ parsing


Hi, my name is Joakim Bodin and at the moment I'm writing a tool for
my thesis that involves taking C/C++ real-time components as an input.
>>From these components I need to parse out for each function which
other function that function calls and how many times. So for example:

void foo::bar1(int param) {
    fie1();
    for(int i=0;i < param; i++) {
        for(int j=0;j < param; j++) {
            fie2();
        }
    }
    bar2();
    fie1();
}

void foo::bar2() {
    bar1();
    int i=0;
    while(i < 5) {
        fie2();
    }
}

Should produce the output of:
void foo::bar1(param):
    fie1() 2;
    fie2() param*param;
    bar2() 1;

void foo::bar2():
    bar1() 1;
    fie2() 5;

Right now I'm thinking a C++ grammar subset would suffice to produce a
AST that I could use to obtain the information I want. But as I've
never used a parser before I'd like some input to this before I start.
Is this sufficient or would it be better to use the full C++ grammar
and then prune everything I'm not interested in?

Some help to construct the needed C++ grammar subset would also be
appreciated. Conditional statements could also enlarge the problem but
I've ignored that for the time being.

/Joakim Bodin


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Wed May 14 11:41:35 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Re: special c/c++ parsing
In-Reply-To: <170826586F3BD511910D0200C110AAA8054023B1@memail03.bco-home.com>
Message-ID: <b9u2kv+orbt@eGroups.com>

I'll echo Monty's comment.  Function calls can appear in enough places 
(including complex expressions and argument lists to functions) that 
it would be difficult to identify a subset grammar.  It is much easier 
to prune, even when you are dealing with a language as cumbersome as 
C++.

--Loring

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> It's actually kind of hard to write a parser that parses just a 
subset of a
> language.  The question becomes how to recognize what you want to 
ignore....
> It would be better to use the full C++ grammar and then prune your 
tree to
> just what you need.
> 
> Monty
> 
> -----Original Message-----
> From: Joakim Bodin [mailto:joabo552@s...]
> Sent: Wednesday, May 14, 2003 2:05 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] special c/c++ parsing
> 
> 
> Hi, my name is Joakim Bodin and at the moment I'm writing a tool for
> my thesis that involves taking C/C++ real-time components as an 
input.
> From these components I need to parse out for each function which
> other function that function calls and how many times. So for 
example:
> 
> void foo::bar1(int param) {
>     fie1();
>     for(int i=0;i < param; i++) {
>         for(int j=0;j < param; j++) {
>             fie2();
>         }
>     }
>     bar2();
>     fie1();
> }
> 
> void foo::bar2() {
>     bar1();
>     int i=0;
>     while(i < 5) {
>         fie2();
>     }
> }
> 
> Should produce the output of:
> void foo::bar1(param):
>     fie1() 2;
>     fie2() param*param;
>     bar2() 1;
> 
> void foo::bar2():
>     bar1() 1;
>     fie2() 5;
> 
> Right now I'm thinking a C++ grammar subset would suffice to produce 
a
> AST that I could use to obtain the information I want. But as I've
> never used a parser before I'd like some input to this before I 
start.
> Is this sufficient or would it be better to use the full C++ grammar
> and then prune everything I'm not interested in?
> 
> Some help to construct the needed C++ grammar subset would also be
> appreciated. Conditional statements could also enlarge the problem 
but
> I've ignored that for the time being.
> 
> /Joakim Bodin
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Wed May 14 11:50:30 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Re: special c/c++ parsing
In-Reply-To: <b9u2kv+orbt@eGroups.com>
Message-ID: <EFB2105E-863C-11D7-AF4C-000393BB647E@jguru.com>


On Wednesday, May 14, 2003, at 11:41  AM, lgcraymer wrote:

> I'll echo Monty's comment.  Function calls can appear in enough places
> (including complex expressions and argument lists to functions) that
> it would be difficult to identify a subset grammar.  It is much easier
> to prune, even when you are dealing with a language as cumbersome as
> C++.

I've often wondered if something like the following (insanely slow) 
approach would work:

1. You provide a set of possible top-level match rules you are 
interested in matching like expr and method.

2. You provide a lexer that knows how to ignore comments and how to 
identify all tokens that could be seen (not just ones you are 
interested in).

3. Start walking the input token-by-token, attempting to match one of 
the top-level rules starting at token i.  If an attempt fails, try 
another top-level rule.  Failing that, move to next token and try again.

This mirrors the naive string search algorithm done by freshman CS 
students, but might actually work.  If you didn't care about speed, 
just ease of building the translator, I wonder if this would work.  It 
sounds actually like a very simple TokenStream object :)

Anybody wanna comment on the cases where this would fail?

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jbb at acm.org  Wed May 14 11:11:56 2003
From: jbb at acm.org (jbb@acm.org)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] New to antlr pls help
In-Reply-To: <b9tsm9+fo44@eGroups.com> (message from solmalik on Wed, 14 May
	2003 16:59:53 +0000)
References: <b9tsm9+fo44@eGroups.com>
Message-ID: <E19G0jM-00042I-00@gecko.home.org>


solmalik <boy_wonder48@hotmail.com> queried as follows:
>Hi there I am trying to write a formal grammar using antlr but am 
>having some problems in getting the right syntax.  The grammr is to 
>be used in order to parse process expression, some examples of the 
>expressions are:
>
>(a || b) ^ (a || c)
>
>or 
>(a;b)
>
>or e sy b sy a
>
>I have tried to capture the three different above forms in the 
>grammar but am having trouble getting it right, is there anyone who 
>has an idea on how to do it?

Hope this helps...
//BEGIN-----------------------cut here cut here-----------------------
class P extends Parser;

startRule
	: (  equation NEWLINE )+ EOF
    	;

equation: mineqn (operation mineqn)*
	;

mineqn	: ID
	| OPEN equation CLOSE
	;

operation
	: SEMICOLN
	| BAR_BAR
	| CARET
	| ASTERISK
	| SY_OP
	| RS_OP
	;

class L extends Lexer;

options {
    testLiterals = true;
}

tokens {
    SY_OP = "sy";
    RS_OP = "rs";
}

OPEN:	'(' ;

CLOSE:	')' ;

SEMICOLN:	';' ;
BAR_BAR	:	"||";
CARET	:	'^' ;
ASTERISK:	'*' ;
	
ID	:  ('a' .. 'z' | 'A' .. 'Z')
	   ('a' .. 'z' | 'A' .. 'Z' | '0' .. '9' | '_')*; 

NEWLINE : ('\r''\n')=> '\r''\n' //DOS
        | '\r'                  //MAC
        | '\n'                  //UNIX
        { newline(); }
        ;
   
WS      : (' '|'\t') { $setType(Token.SKIP); } ;
//END------------------------cut here cut here------------------------

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From cgodfrey at epnet.com  Wed May 14 08:50:32 2003
From: cgodfrey at epnet.com (cgodfrey86)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Re: Representing state in lexer
In-Reply-To: <C7FE35004D40FD45AA342991B88CE40409A29E@lnml1.eca-international.local>
Message-ID: <b9tok8+9u93@eGroups.com>

I can do a definition like the following, where a PATTERN token is 
returned as either quoted or not, but I still have issues  when 
scanning gt. If gt appears after a quote (not necessarily immediately 
after the quote), I want to return gt as type PATTERN.

PATTERN : QUOTE (ALLOWCHARS)+ QUOTE ;

TERM 	:
	("gt")=> "gt"
	{$setType(GT_OP);}
 	| (">")=> ">"
	{$setType(GT_OP);}
	|("ge")=> "ge" 
	{$setType(GE_OP);}
	|(">=")=> ">="
	{$setType(GE_OP);}
	|("lt")=>"lt" 
	{$setType(LT_OP);}
	|("<")=>"<"
	{$setType(LT_OP);}
	|("le")=>"le"
	{$setType(LE_OP);}
	|("<=")=>"<="
	{$setType(LE_OP);}
	|("eq")=>"eq" 
	{$setType(EQ_OP);}
	|("=")=>"="
	{$setType(EQ_OP);}
	|("-")=>"-"
	{$setType(DASH);}
	| ("or") => "or"
	{$setType(OR_OP);}
	| ("and") => "and"
	{$setType(AND_OP);}
	| ("not") => "not"
	{$setType(NOT_OP);}
	|(('a'..'z')('a'..'z') WS) => ('a'..'z')('a'..'z')
      	{
		$setType(S_TAG);
        }
        | ('w'INT)=>'w'INT
	{$setType(W_OP);}
        | ('n'INT)=>'n'INT
	{$setType(N_OP);}
	|
	(ALLOWCHARS)+
	{$setType(PATTERN);}
     	;




--- In antlr-interest@yahoogroups.com, "Anthony W Youngman" 
<Anthony.Youngman@E...> wrote:
> What is it non-deterministic with? In other words, what other 
construct
> recognised by the lexer could a PATTERN be confused with?
> 
> You will have to define an unquoted pattern as a subset of that 
other
> construct, and then use $settype to change the type to PATTERN if 
that's
> what you've got.
> 
> Cheers,
> Wol
> 
> -----Original Message-----
> From: cgodfrey86 [mailto:cgodfrey@e...] 
> Sent: 14 May 2003 15:56
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: Representing state in lexer
> 
> 
> Thank you for the suggestion.
> 
> The main issue that I am running into with this is that a PATTERN 
> token can appear either inside or outside of quotes - so I won't 
> recognize a PATTERN outside of quotes. When I try and define it 
> without quotes, I have lexical nondeterminism
> 
> PATTERN : QUOTE (ALLOWCHARS)+ QUOTE ;
> 
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 
> This transmission is intended for the named recipient only. It may 
contain private and confidential information. If this has come to you 
in error you must not act on anything disclosed in it, nor must you 
copy it, modify it, disseminate it in any way, or show it to anyone. 
Please e-mail the sender to inform us of the transmission error or 
telephone ECA International immediately and delete the e-mail from 
your information system.
> 
> Telephone numbers for ECA International offices are: Sydney +61 (0)
2 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 
and New York +1 212 582 2333.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Wed May 14 13:25:12 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Re: special c/c++ parsing
In-Reply-To: <EFB2105E-863C-11D7-AF4C-000393BB647E@jguru.com>
Message-ID: <b9u8n8+q24v@eGroups.com>

Ter--

Your algorithm (with improvements) is directly expressible in ANTLR.  
Let's say that you want to match rule1 or rule2 or skip a token:

filter :
        (       (rule1) => rule1
        |       (rule2) => rule2
        |        .!
        )+
        ;

This wouldn't fit the case at hand, but might be a good 
quick-and-dirty approach to extracting interesting data fragments 
from text.

For the case at hand,Joakim needs to recognize many of the C++ 
language features:
     Loops
     Other Conditionals
     Expressions--  3 * foo()
     nested function calls--  foo(1, foo(2, 0))

I hope that he can ignore indirect function calls-- (*foo)() would 
make counting messy, especially if foo could be reassigned.  Come to 
think of it, though, he may have exactly that problem--virtual methods 
are called through pointers.

--Loring

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> 
wrote:
> 
> On Wednesday, May 14, 2003, at 11:41  AM, lgcraymer wrote:
> 
> > I'll echo Monty's comment.  Function calls can appear in enough 
places
> > (including complex expressions and argument lists to functions) 
that
> > it would be difficult to identify a subset grammar.  It is much 
easier
> > to prune, even when you are dealing with a language as cumbersome 
as
> > C++.
> 
> I've often wondered if something like the following (insanely slow) 
> approach would work:
> 
> 1. You provide a set of possible top-level match rules you are 
> interested in matching like expr and method.
> 
> 2. You provide a lexer that knows how to ignore comments and how to 
> identify all tokens that could be seen (not just ones you are 
> interested in).
> 
> 3. Start walking the input token-by-token, attempting to match one 
of 
> the top-level rules starting at token i.  If an attempt fails, try 
> another top-level rule.  Failing that, move to next token and try 
again.
> 
> This mirrors the naive string search algorithm done by freshman CS 
> students, but might actually work.  If you didn't care about speed, 
> just ease of building the translator, I wonder if this would work.  
It 
> sounds actually like a very simple TokenStream object :)
> 
> Anybody wanna comment on the cases where this would fail?
> 
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Co-founder, http://www.peerscope.com link sharing, pure-n-simple
> Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From andrei at metalanguage.com  Wed May 14 13:27:42 2003
From: andrei at metalanguage.com (uprightness_of_character)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Unified grammar and # directives for a C-like language
Message-ID: <b9u8ru+5gog@eGroups.com>

Hi,


(First message here! Hello antlr community!) 

I am using antlr to build a parser for a C-like language. The output 
of the parser is fed to a C compiler, so in that regard the parser is 
a sort of preprocessor (a fairly intricate one at that).

I want to take care of parsing the # directives (include, define
etc.) 
within one unified grammar, as opposed to writing multiple
translation 
stages. 

So I need to detect # at the beginning of line, barring whitespace, 
and make it a HASH_DIRECTIVE_START token. Also, # must be recognized 
at the very beginning of a file.

So I came up with:

// Newlines -- ignored, but bump the line number 
NEWLINE 
    :
    (
        options { generateAmbigWarnings=false; }
        : "\r\n"  // Evil DOS
        | '\r'    // Macintosh
        | '\n'    // Unix (the right way)
    )
    { $setType(antlr::Token::SKIP); newline(); }
    (  
        options { generateAmbigWarnings=false; } : ( WS )? '#' 
        { 
            $setType(HASH_DIRECTIVE_BEGIN); 
        }
    )?
    ;

HASH_DIRECTIVE_BEGIN : ;
        
As you see, this takes care of any # that comes after some newline, 
and also lets you insert some whitespace before the '#' sign. 

However, damn! The rule above is unable to recognize a '#' appearing 
right at the beginning of file!

I tried a number of approaches, and I can make things work, but I 
couldn't find the "obviously elegant" solution. I am sure there is 
one. Could anyone enlighten me? Thank you!


Andrei


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From kyin20 at yahoo.com  Wed May 14 13:15:47 2003
From: kyin20 at yahoo.com (kyin20)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] astFactory is NULL
Message-ID: <b9u85j+ams5@eGroups.com>

Hi,

I'm using antlr 2.7.2_03 and Eclipse antlr plug-in.
I'm encountering a strange problem. 

I compiled the antlr source codes and use the generated .class files 
rather than the jar file "antlrall.jar"
that has been built when running my program.

In my sql parser options, I've specified  "buildAST = true",
the generated code does have codes to generate AST.

But when I run the parser, astFactory is null, and caused a null 
pointer exception.

I have no idea where astFactory should be initialized. Can someone 
shed light on this?

Adding to the mystery is that if I add the "antlrall.jar" to my 
classpath and not use the antlr .class files I generated, then I can 
run my program successfully. 

Thanks for any help.

Keppel









 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From richard.ney at aspect.com  Wed May 14 14:03:42 2003
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] astFactory is NULL
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE07229A1@sac1exch3.aspect.com>

Keppel,

I'll ask you the obvious, are you sure there wasn't an error parsing the
grammar? Since a parser/lexer error will cause a null AST.

-Richard

-----Original Message-----
From: kyin20 [mailto:kyin20@yahoo.com] 
Sent: Wednesday, May 14, 2003 1:16 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] astFactory is NULL

Hi,

I'm using antlr 2.7.2_03 and Eclipse antlr plug-in.
I'm encountering a strange problem. 

I compiled the antlr source codes and use the generated .class files 
rather than the jar file "antlrall.jar"
that has been built when running my program.

In my sql parser options, I've specified  "buildAST = true",
the generated code does have codes to generate AST.

But when I run the parser, astFactory is null, and caused a null 
pointer exception.

I have no idea where astFactory should be initialized. Can someone 
shed light on this?

Adding to the mystery is that if I add the "antlrall.jar" to my 
classpath and not use the antlr .class files I generated, then I can 
run my program successfully. 

Thanks for any help.

Keppel









 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From richard.ney at aspect.com  Wed May 14 14:05:12 2003
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] astFactory is NULL
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE07229A2@sac1exch3.aspect.com>

Sorry, I should have read better. I only saw AST. The AST factory is
normally from what I have seen in the C# code initialized when the parser is
constructed. The C# version then pre-loads it with the token list.

-Richard

-----Original Message-----
From: Ney, Richard [mailto:richard.ney@aspect.com] 
Sent: Wednesday, May 14, 2003 2:04 PM
To: 'antlr-interest@yahoogroups.com'
Subject: RE: [antlr-interest] astFactory is NULL

Keppel,

I'll ask you the obvious, are you sure there wasn't an error parsing the
grammar? Since a parser/lexer error will cause a null AST.

-Richard

-----Original Message-----
From: kyin20 [mailto:kyin20@yahoo.com] 
Sent: Wednesday, May 14, 2003 1:16 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] astFactory is NULL

Hi,

I'm using antlr 2.7.2_03 and Eclipse antlr plug-in.
I'm encountering a strange problem. 

I compiled the antlr source codes and use the generated .class files 
rather than the jar file "antlrall.jar"
that has been built when running my program.

In my sql parser options, I've specified  "buildAST = true",
the generated code does have codes to generate AST.

But when I run the parser, astFactory is null, and caused a null 
pointer exception.

I have no idea where astFactory should be initialized. Can someone 
shed light on this?

Adding to the mystery is that if I add the "antlrall.jar" to my 
classpath and not use the antlr .class files I generated, then I can 
run my program successfully. 

Thanks for any help.

Keppel









 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Wed May 14 13:29:14 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Re: special c/c++ parsing
Message-ID: <170826586F3BD511910D0200C110AAA8054023B5@memail03.bco-home.com>

What to do if it succeeds?  Call all those tokens consumed and start at the
following?

method might have expressions in it that don't parse--causing method to
fail, however it's pretty easy to recognize a method by the signature and
curlies ignoring what's inside.  So do you make your algorithm recursive
noting the top level entry points--so when method looks for statements you
apply this algorithm to see if you have a statement but it's ok if not?

I like the LAPIS http://graphics.lcs.mit.edu/lapis/ approach better of
tokenizing and then searching with "structured (nested) regular
expressions."  Parsing seems precise to me, searching is not.  If you only
write half a parser you're left searching for where to apply the rules and
where not to....

Monty

-----Original Message-----
From: Terence Parr [mailto:parrt@jguru.com]
Sent: Wednesday, May 14, 2003 11:51 AM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] Re: special c/c++ parsing



On Wednesday, May 14, 2003, at 11:41  AM, lgcraymer wrote:

> I'll echo Monty's comment.  Function calls can appear in enough places
> (including complex expressions and argument lists to functions) that
> it would be difficult to identify a subset grammar.  It is much easier
> to prune, even when you are dealing with a language as cumbersome as
> C++.

I've often wondered if something like the following (insanely slow) 
approach would work:

1. You provide a set of possible top-level match rules you are 
interested in matching like expr and method.

2. You provide a lexer that knows how to ignore comments and how to 
identify all tokens that could be seen (not just ones you are 
interested in).

3. Start walking the input token-by-token, attempting to match one of 
the top-level rules starting at token i.  If an attempt fails, try 
another top-level rule.  Failing that, move to next token and try again.

This mirrors the naive string search algorithm done by freshman CS 
students, but might actually work.  If you didn't care about speed, 
just ease of building the translator, I wonder if this would work.  It 
sounds actually like a very simple TokenStream object :)

Anybody wanna comment on the cases where this would fail?

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Jim.OConnor at microfocus.com  Wed May 14 14:18:00 2003
From: Jim.OConnor at microfocus.com (Jim O'Connor)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Unified grammar and # directives for a C-lik
	e language
Message-ID: <3AC103F1B7EEEC48A855ACB1D2819E9106AA28@rock-corpmail.microfocus.com>

Try a syntacic predicate?

HASH_DIRECTIVE_BEGIN : {getColumn()==1}? ( WS )? '#' ;


Take this out of your NEWLINE rule
************
    (  
        options { generateAmbigWarnings=false; } : ( WS )? '#' 
        { 
            $setType(HASH_DIRECTIVE_BEGIN); 
        }
    )?
************

The newline() function resets the column.  I assume it would work at the
begining of a file.  

-----Original Message-----
From: uprightness_of_character
To: antlr-interest@yahoogroups.com
Sent: 5/14/03 4:27 PM
Subject: [antlr-interest] Unified grammar and # directives for a C-like
language

Hi,


(First message here! Hello antlr community!) 

I am using antlr to build a parser for a C-like language. The output 
of the parser is fed to a C compiler, so in that regard the parser is 
a sort of preprocessor (a fairly intricate one at that).

I want to take care of parsing the # directives (include, define
etc.) 
within one unified grammar, as opposed to writing multiple
translation 
stages. 

So I need to detect # at the beginning of line, barring whitespace, 
and make it a HASH_DIRECTIVE_START token. Also, # must be recognized 
at the very beginning of a file.

So I came up with:

// Newlines -- ignored, but bump the line number 
NEWLINE 
    :
    (
        options { generateAmbigWarnings=false; }
        : "\r\n"  // Evil DOS
        | '\r'    // Macintosh
        | '\n'    // Unix (the right way)
    )
    { $setType(antlr::Token::SKIP); newline(); }
    (  
        options { generateAmbigWarnings=false; } : ( WS )? '#' 
        { 
            $setType(HASH_DIRECTIVE_BEGIN); 
        }
    )?
    ;

HASH_DIRECTIVE_BEGIN : ;
        
As you see, this takes care of any # that comes after some newline, 
and also lets you insert some whitespace before the '#' sign. 

However, damn! The rule above is unable to recognize a '#' appearing 
right at the beginning of file!

I tried a number of approaches, and I can make things work, but I 
couldn't find the "obviously elegant" solution. I am sure there is 
one. Could anyone enlighten me? Thank you!


Andrei


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Wed May 14 13:37:17 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Unified grammar and # directives for a C-lik
	e language
Message-ID: <170826586F3BD511910D0200C110AAA8054023B6@memail03.bco-home.com>

You can now have predicates hoisted into nextToken for non-protected lexer
rules.  This means you can write something like this:

HASH_DIRECTIVE_BEGIN: {getColumn()==1}? '#' ;

See the docs at http://www.antlr.org/doc/lexer.html#Predicated-LL(k)_Lexing

Then you can get that test for it out of the NEWLINE method.  Look at the
generated code, especially the nextToken() method, to see what antlr is
doing for you.

Monty

-----Original Message-----
From: uprightness_of_character [mailto:andrei@metalanguage.com]
Sent: Wednesday, May 14, 2003 1:28 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Unified grammar and # directives for a C-like
language


Hi,


(First message here! Hello antlr community!) 

I am using antlr to build a parser for a C-like language. The output 
of the parser is fed to a C compiler, so in that regard the parser is 
a sort of preprocessor (a fairly intricate one at that).

I want to take care of parsing the # directives (include, define
etc.) 
within one unified grammar, as opposed to writing multiple
translation 
stages. 

So I need to detect # at the beginning of line, barring whitespace, 
and make it a HASH_DIRECTIVE_START token. Also, # must be recognized 
at the very beginning of a file.

So I came up with:

// Newlines -- ignored, but bump the line number 
NEWLINE 
    :
    (
        options { generateAmbigWarnings=false; }
        : "\r\n"  // Evil DOS
        | '\r'    // Macintosh
        | '\n'    // Unix (the right way)
    )
    { $setType(antlr::Token::SKIP); newline(); }
    (  
        options { generateAmbigWarnings=false; } : ( WS )? '#' 
        { 
            $setType(HASH_DIRECTIVE_BEGIN); 
        }
    )?
    ;

HASH_DIRECTIVE_BEGIN : ;
        
As you see, this takes care of any # that comes after some newline, 
and also lets you insert some whitespace before the '#' sign. 

However, damn! The rule above is unable to recognize a '#' appearing 
right at the beginning of file!

I tried a number of approaches, and I can make things work, but I 
couldn't find the "obviously elegant" solution. I am sure there is 
one. Could anyone enlighten me? Thank you!


Andrei


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From andrei at metalanguage.com  Wed May 14 17:01:42 2003
From: andrei at metalanguage.com (uprightness_of_character)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Continuing problem with # directives
Message-ID: <b9uld6+3dii@eGroups.com>

Ok, so now I have a solution for detecting '#' as the start of a 
directive in C. Now I wrote the following grammar rule for the parser:

hash_directive 
    : 
    HASH_DIRECTIVE_BEGIN
    "include"  
    (
        STRING
        | LESS ( ~GREATER )+ GREATER
    )
    ;

This will nicely match #include "a" or #include <iostream>. Cool. But 
now I need to enforce that the directive ends with some trailing 
spaces and a newline. Otherwise, my parser will consider the following 
construct legal:

#include "a" void foo() {}

But the problem is, my NEWLINE rule sets the token type to SKIP, so I 
can't detect it in the parser. Any good solution for that? Thanks!


Andrei


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From andrei at metalanguage.com  Wed May 14 15:58:48 2003
From: andrei at metalanguage.com (uprightness_of_character)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Re: Unified grammar and # directives for a C-lik e language
In-Reply-To: <170826586F3BD511910D0200C110AAA8054023B6@memail03.bco-home.com>
Message-ID: <b9uhn8+jvf1@eGroups.com>

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> You can now have predicates hoisted into nextToken for non-protected 
lexer
> rules.  This means you can write something like this:
> 
> HASH_DIRECTIVE_BEGIN: {getColumn()==1}? '#' ;

Thanks all for the answers. I was aware of this feature, however I 
can't (nicely) express what I want. 

The rule above does recognize a '#' directive starting in the first 
column. However, it fails to recognize a '#' directive that follows a 
space character. E.g., the directive in the second line below won't be 
recognized (and it should):

#include "a"
 #include "b"
#include "c"

Jim O'Connor suggested:

HASH_DIRECTIVE_BEGIN : {getColumn()==1}? ( WS )? '#' ;

(BTW, in my grammar WS is:

// Whitespace (no newlines) -- ignored
WS    :
    (
        ' '
        | '\t'
        | '\f'
    )+
    { $setType(antlr::Token::SKIP); }
    ;

)

So now I get the following ambiguity:

warning:lexical nondeterminism between rules WS and 
HASH_DIRECTIVE_BEGIN upon
ril.g:     k==1:' '
ril.g:     k==2:<end-of-token>,' '
ril.g:     k==3:<end-of-token>,' '

This grammar will still recognize '#' only if it appears in column 1. 
What solution would allow spaces before '#'?


Andrei


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From andrei at metalanguage.com  Wed May 14 16:40:54 2003
From: andrei at metalanguage.com (uprightness_of_character)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Re: Unified grammar and # directives for a C-like language
In-Reply-To: <b9u8ru+5gog@eGroups.com>
Message-ID: <b9uk66+u3qs@eGroups.com>

I posted another message (I'm not sure whether it's lost or on its 
way) explaining the problems with the two proposed solutions to the 
'#'-directive problem. In short:

* Jim O'Connor's suggestion engenders an ambiguity that antlr resolves 
in the undesired direction;
* Monty's suggestion recognizes '#'-directives that start in column 1, 
but without leading spaces.

I've had a lot to learn from your answers - thanks a lot - and I 
synthesized something that works. I wonder if this is elegant enough, 
or if there's an easier and clearer solution. 

I defined my whitespaces like this:

// Whitespace (no newlines) -- ignored
WS 
    { const bool firstCol = getColumn() == 1; }
    :
    (
        ' '
        | '\t'
        | '\f'
    )+
    { 
        $setType(antlr::Token::SKIP);
    }
    ( { firstCol }? '#' { $setType(HASH_DIRECTIVE_BEGIN); } )? 
    ;

And I also defined:

HASH_DIRECTIVE_BEGIN : { getColumn()==1}? '#' ;

These two rules match the '#' directives correctly. I am a bit unhappy 
that the concept is spread in two rules, so if there's a better 
solution, please let me know!


Andrei



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Anthony.Youngman at ECA-International.com  Thu May 15 04:04:05 2003
From: Anthony.Youngman at ECA-International.com (Anthony W Youngman)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Continuing problem with # directives
Message-ID: <C7FE35004D40FD45AA342991B88CE40409A2A4@lnml1.eca-international.local>

I create a newline token called EOL, and then when my parser constructs
its tree it doesn't bother putting it in the tree. Would that work?

Or maybe a parser rule that recognises and dumps EOL.

Cheers,
Wol

-----Original Message-----
From: uprightness_of_character [mailto:andrei@metalanguage.com] 
Sent: 15 May 2003 01:02
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Continuing problem with # directives


Ok, so now I have a solution for detecting '#' as the start of a 
directive in C. Now I wrote the following grammar rule for the parser:

hash_directive 
    : 
    HASH_DIRECTIVE_BEGIN
    "include"  
    (
        STRING
        | LESS ( ~GREATER )+ GREATER
    )
    ;

This will nicely match #include "a" or #include <iostream>. Cool. But 
now I need to enforce that the directive ends with some trailing 
spaces and a newline. Otherwise, my parser will consider the following 
construct legal:

#include "a" void foo() {}

But the problem is, my NEWLINE rule sets the token type to SKIP, so I 
can't detect it in the parser. Any good solution for that? Thanks!


Andrei


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.
From cgodfrey at epnet.com  Thu May 15 06:32:04 2003
From: cgodfrey at epnet.com (cgodfrey86)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Understanding of testLiterals=true
Message-ID: <ba04sk+lgl3@eGroups.com>

Hello,

I just wanted to make validate my understanding of test literals=true 
option.

This grammar file is fine when Token GT_OP is defined in the tokens 
section. If instead, I defined a rule for the GT_OP token as 

GT_OP : "gt";

I get lexical nondeterminism error.

So, am I correct in the understanding that testLiterals will test 
only what is defined in the tokens section?

userquery.g: warning:lexical nondeterminism between rules GT_OP and 
TAG upon
userquery.g:     k==1:'g'
userquery.g:     k==2:'t'
userquery.g:     k==3:<end-of-token>
userquery.g:     k==4:<end-of-token>

options
{
	language = "CSharp";
}

class UserLexer extends Lexer;
options {
  k=4;
  testLiterals=true;

}

tokens {
GT_OP = "gt";
}


TAG
options { testLiterals=true; }
 	:
	('a'..'z')('a'..'z')
	;


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From stoerzer at fmi.uni-passau.de  Thu May 15 06:49:44 2003
From: stoerzer at fmi.uni-passau.de (mstrzer)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Parsing AspectJ pointcuts
Message-ID: <ba05to+3p3a@eGroups.com>

Hi everybody!

I'm just trying to write a parser for AspectJ based on ANTLR. Now
AspectJ has some weired syntax, at least from parsing point of view,
so I ran into a bunch of problems.

AspectJ extends Java by allowing pointcuts which look like this

pointcut myPointcut(<arglist>): 
    call(!public SomeQualifiedReturnType*with..patterns*
         someMethodName*withPatterns(..));

All those patterns interfere with (qualified) identifiers, arithmetic
expressions (*) and so on, a real mess. So I thought it would be a
good idea to use a different lexer here. 

Now, as I learned from studying the documentation and some earlier
posts, it is not possible (or recommendable) to try to switch the
lexer from the parser.

On the other hand, I have no single token where I can switch the lexer
in the lexer grammar, besides some keywords ("pointcut").

However, I couldn't figure out, how to associate a action (like
switching the lexer) with a keyword.


Can anyone help me with this problem?

Thanks in advance, best regards,

    Max 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From cgodfrey at epnet.com  Thu May 15 07:19:13 2003
From: cgodfrey at epnet.com (cgodfrey86)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Re: Understanding of testLiterals=true
In-Reply-To: <ba04sk+lgl3@eGroups.com>
Message-ID: <ba07l1+s9lk@eGroups.com>

One issue I have in defining my grammar in this manner is that I am 
unable to detect this example token (GT_OP as "gt") regardless of 
case.

When I add the following options

class UserLexer extends Lexer;
options {
  k=4;
  caseSensitive=false;
  caseSensitiveLiterals=false;
}

I don't recognize GT as a token. Is this as expected?

Thanks In Advance.

--- In antlr-interest@yahoogroups.com, "cgodfrey86" <cgodfrey@e...> 
wrote:
> Hello,
> 
> I just wanted to make validate my understanding of test 
literals=true 
> option.
> 
> This grammar file is fine when Token GT_OP is defined in the tokens 
> section. If instead, I defined a rule for the GT_OP token as 
> 
> GT_OP : "gt";
> 
> I get lexical nondeterminism error.
> 
> So, am I correct in the understanding that testLiterals will test 
> only what is defined in the tokens section?
> 
> userquery.g: warning:lexical nondeterminism between rules GT_OP and 
> TAG upon
> userquery.g:     k==1:'g'
> userquery.g:     k==2:'t'
> userquery.g:     k==3:<end-of-token>
> userquery.g:     k==4:<end-of-token>
> 
> options
> {
> 	language = "CSharp";
> }
> 
> class UserLexer extends Lexer;
> options {
>   k=4;
>   testLiterals=true;
> 
> }
> 
> tokens {
> GT_OP = "gt";
> }
> 
> 
> TAG
> options { testLiterals=true; }
>  	:
> 	('a'..'z')('a'..'z')
> 	;


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From boy_wonder48 at hotmail.com  Thu May 15 07:48:59 2003
From: boy_wonder48 at hotmail.com (solmalik)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Re: New to antlr pls help
In-Reply-To: <E19G0jM-00042I-00@gecko.home.org>
Message-ID: <ba09cr+ffmt@eGroups.com>

hi thanks for the reply, it seems to be workinf fine, except for one 
thing which is that the gramar seems to be accepting any sequece of 
letters e.g "aaa" when it should only accept the one letter "a", how 
would it be possible to reflect this in the grammar? Thanks.
--- In antlr-interest@yahoogroups.com, jbb@a... wrote:
> 
> solmalik <boy_wonder48@h...> queried as follows:
> >Hi there I am trying to write a formal grammar using antlr but am 
> >having some problems in getting the right syntax.  The grammr is 
to 
> >be used in order to parse process expression, some examples of the 
> >expressions are:
> >
> >(a || b) ^ (a || c)
> >
> >or 
> >(a;b)
> >
> >or e sy b sy a
> >
> >I have tried to capture the three different above forms in the 
> >grammar but am having trouble getting it right, is there anyone 
who 
> >has an idea on how to do it?
> 
> Hope this helps...
> //BEGIN-----------------------cut here cut here---------------------
--
> class P extends Parser;
> 
> startRule
> 	: (  equation NEWLINE )+ EOF
>     	;
> 
> equation: mineqn (operation mineqn)*
> 	;
> 
> mineqn	: ID
> 	| OPEN equation CLOSE
> 	;
> 
> operation
> 	: SEMICOLN
> 	| BAR_BAR
> 	| CARET
> 	| ASTERISK
> 	| SY_OP
> 	| RS_OP
> 	;
> 
> class L extends Lexer;
> 
> options {
>     testLiterals = true;
> }
> 
> tokens {
>     SY_OP = "sy";
>     RS_OP = "rs";
> }
> 
> OPEN:	'(' ;
> 
> CLOSE:	')' ;
> 
> SEMICOLN:	';' ;
> BAR_BAR	:	"||";
> CARET	:	'^' ;
> ASTERISK:	'*' ;
> 	
> ID	:  ('a' .. 'z' | 'A' .. 'Z')
> 	   ('a' .. 'z' | 'A' .. 'Z' | '0' .. '9' | '_')*; 
> 
> NEWLINE : ('\r''\n')=> '\r''\n' //DOS
>         | '\r'                  //MAC
>         | '\n'                  //UNIX
>         { newline(); }
>         ;
>    
> WS      : (' '|'\t') { $setType(Token.SKIP); } ;
> //END------------------------cut here cut here----------------------
--


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From caronfranck at yahoo.fr  Thu May 15 07:59:14 2003
From: caronfranck at yahoo.fr (franck_antibes_fr)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] (unknown)
Message-ID: <ba0a02+33c7@eGroups.com>

Hi,




I am writing a verilog parser based on the grammar found on antlr.org.


but I have to handle in my parser `define macros and `ifdef `else 
`endif compiler directive. ( I do not want to preprocess the file).




for the people that know nothing about verilog, the problem is the 
same as #define and #ifdef #else #endif preprocessor directive in 
C/C++ so I will transpose the problem in C++ instead of verilog.






a litle example








#ifdef CAN_DERIVE


#include "base.h"




class toto : public base {


public: 


   toto(int a):base(a){}


#else 


class toto {


protected:


   int a_;


public: 


   toto(int a):a_(a){}


#endif


   virtual get_a() {return a_;}


};






because #ifdef ... can be everywhere in the code, it is not feasable 


to put everywhere in the grammar rules to handle this. I thought to 
use a king of tokenstream filter or multiplexer with several parsers.




Do any one have an idea to solve this ?




thanks 




Franck









 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu May 15 08:10:29 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Parsing AspectJ pointcuts
Message-ID: <170826586F3BD511910D0200C110AAA8054023BB@memail03.bco-home.com>

Literals get tested at the very end of a rule.  So in my gcc grammar I have
a couple of rules as follows.  I'm calling ID from IDMEAT so that the
literals table gets tested and if it was a keyword then the type has been
set appropriately.  So in IDMEAT I test that type and if it was
"__extension__" I decide to skip it (here you could switch lexers),
otherwise I reassign the type so it is preserved.  Otherwise the type will
get assigned as the rule name IDMEAT.

IDMEAT
        :
                i:ID                {
                                        
                                        if ( i.getType() ==
LITERAL___extension__ ) {
                                                $setType(Token.SKIP);
                                        }
                                        else {
                                                $setType(i.getType());
                                        }
                                        
                                    }
        ;

protected ID
        options 
                {
                testLiterals = true; 
                }
        :       ( 'a'..'z' | 'A'..'Z' | '_' | '$')
                ( 'a'..'z' | 'A'..'Z' | '_' | '$' | '0'..'9' )*
        ;

Monty

-----Original Message-----
From: mstrzer [mailto:stoerzer@fmi.uni-passau.de]
Sent: Thursday, May 15, 2003 6:50 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Parsing AspectJ pointcuts


Hi everybody!

I'm just trying to write a parser for AspectJ based on ANTLR. Now
AspectJ has some weired syntax, at least from parsing point of view,
so I ran into a bunch of problems.

AspectJ extends Java by allowing pointcuts which look like this

pointcut myPointcut(<arglist>): 
    call(!public SomeQualifiedReturnType*with..patterns*
         someMethodName*withPatterns(..));

All those patterns interfere with (qualified) identifiers, arithmetic
expressions (*) and so on, a real mess. So I thought it would be a
good idea to use a different lexer here. 

Now, as I learned from studying the documentation and some earlier
posts, it is not possible (or recommendable) to try to switch the
lexer from the parser.

On the other hand, I have no single token where I can switch the lexer
in the lexer grammar, besides some keywords ("pointcut").

However, I couldn't figure out, how to associate a action (like
switching the lexer) with a keyword.


Can anyone help me with this problem?

Thanks in advance, best regards,

    Max 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu May 15 08:17:13 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] (unknown)
Message-ID: <170826586F3BD511910D0200C110AAA8054023BC@memail03.bco-home.com>

Yes, a token stream should work.  You can see my filtering example for some
ideas.  http://www.codetransform.com/filterexample.html.  This problem will
be a great deal harder if you have to preserve all the source code.  In
other words if you have to keep both the #ifdef and #else parts in the same
tree then you've made things pretty interesting.

Monty
ANTLR consultant
www.codetransform.com

-----Original Message-----
From: franck_antibes_fr [mailto:caronfranck@yahoo.fr]
Sent: Thursday, May 15, 2003 7:59 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] (unknown)


Hi,




I am writing a verilog parser based on the grammar found on antlr.org.


but I have to handle in my parser `define macros and `ifdef `else 
`endif compiler directive. ( I do not want to preprocess the file).




for the people that know nothing about verilog, the problem is the 
same as #define and #ifdef #else #endif preprocessor directive in 
C/C++ so I will transpose the problem in C++ instead of verilog.






a litle example








#ifdef CAN_DERIVE


#include "base.h"




class toto : public base {


public: 


   toto(int a):base(a){}


#else 


class toto {


protected:


   int a_;


public: 


   toto(int a):a_(a){}


#endif


   virtual get_a() {return a_;}


};






because #ifdef ... can be everywhere in the code, it is not feasable 


to put everywhere in the grammar rules to handle this. I thought to 
use a king of tokenstream filter or multiplexer with several parsers.




Do any one have an idea to solve this ?




thanks 




Franck









 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu May 15 08:33:47 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Re: Unified grammar and # directives for a C
	-lik e language
Message-ID: <170826586F3BD511910D0200C110AAA8054023BF@memail03.bco-home.com>

Set a flag indicating whether the character is the first on a line.
Something like this in your lexer:

  boolean lineStart=true;

  protected Token makeToken(int t)
  {
    if ( t != Token.SKIP) {
        lineStart=false;
    }
   super.makeToken();
  }

  public void newline() { 
        super.newline();
	  lineStart=true;
    }

Now your predicate will be {lineStart}?

Monty

-----Original Message-----
From: uprightness_of_character [mailto:andrei@metalanguage.com]
Sent: Wednesday, May 14, 2003 3:59 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Unified grammar and # directives for a
C-lik e language


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> You can now have predicates hoisted into nextToken for non-protected 
lexer
> rules.  This means you can write something like this:
> 
> HASH_DIRECTIVE_BEGIN: {getColumn()==1}? '#' ;

Thanks all for the answers. I was aware of this feature, however I 
can't (nicely) express what I want. 

The rule above does recognize a '#' directive starting in the first 
column. However, it fails to recognize a '#' directive that follows a 
space character. E.g., the directive in the second line below won't be 
recognized (and it should):

#include "a"
 #include "b"
#include "c"

Jim O'Connor suggested:

HASH_DIRECTIVE_BEGIN : {getColumn()==1}? ( WS )? '#' ;

(BTW, in my grammar WS is:

// Whitespace (no newlines) -- ignored
WS    :
    (
        ' '
        | '\t'
        | '\f'
    )+
    { $setType(antlr::Token::SKIP); }
    ;

)

So now I get the following ambiguity:

warning:lexical nondeterminism between rules WS and 
HASH_DIRECTIVE_BEGIN upon
ril.g:     k==1:' '
ril.g:     k==2:<end-of-token>,' '
ril.g:     k==3:<end-of-token>,' '

This grammar will still recognize '#' only if it appears in column 1. 
What solution would allow spaces before '#'?


Andrei


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu May 15 08:36:09 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Continuing problem with # directives
Message-ID: <170826586F3BD511910D0200C110AAA8054023C0@memail03.bco-home.com>

You might also consider handling the preprocessor directives in the lexer
via lexer states.  That would let you enforce that it is followed by an
end-of-line.

Monty

-----Original Message-----
From: uprightness_of_character [mailto:andrei@metalanguage.com]
Sent: Wednesday, May 14, 2003 5:02 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Continuing problem with # directives


Ok, so now I have a solution for detecting '#' as the start of a 
directive in C. Now I wrote the following grammar rule for the parser:

hash_directive 
    : 
    HASH_DIRECTIVE_BEGIN
    "include"  
    (
        STRING
        | LESS ( ~GREATER )+ GREATER
    )
    ;

This will nicely match #include "a" or #include <iostream>. Cool. But 
now I need to enforce that the directive ends with some trailing 
spaces and a newline. Otherwise, my parser will consider the following 
construct legal:

#include "a" void foo() {}

But the problem is, my NEWLINE rule sets the token type to SKIP, so I 
can't detect it in the parser. Any good solution for that? Thanks!


Andrei


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From caronfranck at yahoo.fr  Thu May 15 08:58:25 2003
From: caronfranck at yahoo.fr (franck_antibes_fr)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Re: (unknown)
In-Reply-To: <170826586F3BD511910D0200C110AAA8054023BC@memail03.bco-home.com>
Message-ID: <ba0df1+vqb3@eGroups.com>

my goal is to keep both the #ifdef and #else parts in the same tree 
(not an AST but a Data Object Model). an other hard stuff is dealing 
with macro without expanding them. 




I will have a look to your example. 


thanks 




Franck 




--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:


> Yes, a token stream should work.  You can see my filtering example 
for some


> ideas.  http://www.codetransform.com/filterexample.html.  This 
problem will


> be a great deal harder if you have to preserve all the source code.  
In


> other words if you have to keep both the #ifdef and #else parts in 
the same


> tree then you've made things pretty interesting.


> 


> Monty


> ANTLR consultant


> www.codetransform.com


> 


> -----Original Message-----


> From: franck_antibes_fr [mailto:caronfranck@y...]


> Sent: Thursday, May 15, 2003 7:59 AM


> To: antlr-interest@yahoogroups.com


> Subject: [antlr-interest] (unknown)


> 


> 


> Hi,


> 


> 


> 


> 


> I am writing a verilog parser based on the grammar found on antlr.
org.


> 


> 


> but I have to handle in my parser `define macros and `ifdef `else 


> `endif compiler directive. ( I do not want to preprocess the file).


> 


> 


> 


> 


> for the people that know nothing about verilog, the problem is the 


> same as #define and #ifdef #else #endif preprocessor directive in 


> C/C++ so I will transpose the problem in C++ instead of verilog.


> 


> 


> 


> 


> 


> 


> a litle example


> 


> 


> 


> 


> 


> 


> 


> 


> #ifdef CAN_DERIVE


> 


> 


> #include "base.h"


> 


> 


> 


> 


> class toto : public base {


> 


> 


> public: 


> 


> 


>    toto(int a):base(a){}


> 


> 


> #else 


> 


> 


> class toto {


> 


> 


> protected:


> 


> 


>    int a_;


> 


> 


> public: 


> 


> 


>    toto(int a):a_(a){}


> 


> 


> #endif


> 


> 


>    virtual get_a() {return a_;}


> 


> 


> };


> 


> 


> 


> 


> 


> 


> because #ifdef ... can be everywhere in the code, it is not feasable 


> 


> 


> to put everywhere in the grammar rules to handle this. I thought to 


> use a king of tokenstream filter or multiplexer with several 
parsers.


> 


> 


> 


> 


> Do any one have an idea to solve this ?


> 


> 


> 


> 


> thanks 


> 


> 


> 


> 


> Franck


> 


> 


> 


> 


> 


> 


> 


> 


> 


>  


> 


> Your use of Yahoo! Groups is subject to http://docs.yahoo.
com/info/terms/



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu May 15 08:26:23 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Continuing problem with # directives
Message-ID: <170826586F3BD511910D0200C110AAA8054023BE@memail03.bco-home.com>

See http://www.antlr.org/fieldguide/whitespace/index.html for how to use
hidden token streams.  Hopefully that will work.

-----Original Message-----
From: uprightness_of_character [mailto:andrei@metalanguage.com]
Sent: Wednesday, May 14, 2003 5:02 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Continuing problem with # directives


Ok, so now I have a solution for detecting '#' as the start of a 
directive in C. Now I wrote the following grammar rule for the parser:

hash_directive 
    : 
    HASH_DIRECTIVE_BEGIN
    "include"  
    (
        STRING
        | LESS ( ~GREATER )+ GREATER
    )
    ;

This will nicely match #include "a" or #include <iostream>. Cool. But 
now I need to enforce that the directive ends with some trailing 
spaces and a newline. Otherwise, my parser will consider the following 
construct legal:

#include "a" void foo() {}

But the problem is, my NEWLINE rule sets the token type to SKIP, so I 
can't detect it in the parser. Any good solution for that? Thanks!


Andrei


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu May 15 10:08:46 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Re: (unknown)
Message-ID: <170826586F3BD511910D0200C110AAA8054023C2@memail03.bco-home.com>

What kind of tool are you writing?

Monty

-----Original Message-----
From: franck_antibes_fr [mailto:caronfranck@yahoo.fr]
Sent: Thursday, May 15, 2003 8:58 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: (unknown)


my goal is to keep both the #ifdef and #else parts in the same tree 
(not an AST but a Data Object Model). an other hard stuff is dealing 
with macro without expanding them. 




I will have a look to your example. 


thanks 




Franck 




--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:


> Yes, a token stream should work.  You can see my filtering example 
for some


> ideas.  http://www.codetransform.com/filterexample.html.  This 
problem will


> be a great deal harder if you have to preserve all the source code.  
In


> other words if you have to keep both the #ifdef and #else parts in 
the same


> tree then you've made things pretty interesting.


> 


> Monty


> ANTLR consultant


> www.codetransform.com


> 


> -----Original Message-----


> From: franck_antibes_fr [mailto:caronfranck@y...]


> Sent: Thursday, May 15, 2003 7:59 AM


> To: antlr-interest@yahoogroups.com


> Subject: [antlr-interest] (unknown)


> 


> 


> Hi,


> 


> 


> 


> 


> I am writing a verilog parser based on the grammar found on antlr.
org.


> 


> 


> but I have to handle in my parser `define macros and `ifdef `else 


> `endif compiler directive. ( I do not want to preprocess the file).


> 


> 


> 


> 


> for the people that know nothing about verilog, the problem is the 


> same as #define and #ifdef #else #endif preprocessor directive in 


> C/C++ so I will transpose the problem in C++ instead of verilog.


> 


> 


> 


> 


> 


> 


> a litle example


> 


> 


> 


> 


> 


> 


> 


> 


> #ifdef CAN_DERIVE


> 


> 


> #include "base.h"


> 


> 


> 


> 


> class toto : public base {


> 


> 


> public: 


> 


> 


>    toto(int a):base(a){}


> 


> 


> #else 


> 


> 


> class toto {


> 


> 


> protected:


> 


> 


>    int a_;


> 


> 


> public: 


> 


> 


>    toto(int a):a_(a){}


> 


> 


> #endif


> 


> 


>    virtual get_a() {return a_;}


> 


> 


> };


> 


> 


> 


> 


> 


> 


> because #ifdef ... can be everywhere in the code, it is not feasable 


> 


> 


> to put everywhere in the grammar rules to handle this. I thought to 


> use a king of tokenstream filter or multiplexer with several 
parsers.


> 


> 


> 


> 


> Do any one have an idea to solve this ?


> 


> 


> 


> 


> thanks 


> 


> 


> 


> 


> Franck


> 


> 


> 


> 


> 


> 


> 


> 


> 


>  


> 


> Your use of Yahoo! Groups is subject to http://docs.yahoo.
com/info/terms/



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Thu May 15 10:12:16 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] astFactory is NULL
In-Reply-To: <b9u85j+ams5@eGroups.com>
Message-ID: <6097B0EC-86F8-11D7-AF4C-000393BB647E@jguru.com>

Hi Keppel,

I noted the same problem myself when I tried to run 2.7.1 antlr 
generated code with 2.7.2 libraries.  The ast factory is created 
/initialized differently.  When I used 2.7.2 to generate the files and 
then compile/rule, it seemed to work :)

Terence

On Wednesday, May 14, 2003, at 01:15  PM, kyin20 wrote:

> Hi,
>
> I'm using antlr 2.7.2_03 and Eclipse antlr plug-in.
> I'm encountering a strange problem.
>
> I compiled the antlr source codes and use the generated .class files
> rather than the jar file "antlrall.jar"
> that has been built when running my program.
>
> In my sql parser options, I've specified  "buildAST = true",
> the generated code does have codes to generate AST.
>
> But when I run the parser, astFactory is null, and caused a null
> pointer exception.
>
> I have no idea where astFactory should be initialized. Can someone
> shed light on this?
>
> Adding to the mystery is that if I add the "antlrall.jar" to my
> classpath and not use the antlr .class files I generated, then I can
> run my program successfully.
>
> Thanks for any help.
>
> Keppel
>
>
>
>
>
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mikhail at augustmail.com  Thu May 15 12:46:27 2003
From: mikhail at augustmail.com (TheSamiM)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Re: C++: Exception on loading literals.
In-Reply-To: <b9tmbp+5fs7@eGroups.com>
Message-ID: <ba0qqj+11100@eGroups.com>

Update:
It's not a STL or map bug. I can reproduce the same constructs in a 
different program and it works like a champ. (IE: I put the same map 
in a different non-ANTLR program, and I can populate it and search it 
all day long.)

I'm tending to think it's an initialization problem.

The only reason I'm thinking it's not a problem with my grammar per 
se is I'm seeing the same issue with the example grammars.

Am I the only one who's run into this issue?



--- In antlr-interest@yahoogroups.com, "TheSamiM" <mikhail@a...> 
wrote:
> Help!
> 
> Using ANTLR 2.7.2.
> Using Visual C++ 6.0 (no service packs as far as I can tell)
> 
> I built antlrd.dll; truck loads of warnings but no errors.
> 
> I generated the classes from my grammar. (Tried this with some of 
the 
> example grammers and am having the same issue...)
> 
> I run. I crash. The exception is a "memory at xxxxxx cannot be 
read".
> 
> This is happening on initLiterals(), on the first literal.
> When CharScannerLiteralsLess::operator() is called, the second 
> parameter is an invalid pointer. (Which kinda makes sense because 
> there shouldn't be any other elements in the map, but why is 
> CharScanner (or is it the map?) bothering with a comparison for an 
> empty map?
> 
> Am I missing something?
> Am I missing a service pack?
> Should the map be initialized somehow? (How?)
> Where does one get the service packs for VC anymore, all I can find 
> on MSDN is .net foo wich won't help much...
> 
> Any pointers (no pun intended) would be greatly appreciated.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From andrei at metalanguage.com  Thu May 15 11:04:20 2003
From: andrei at metalanguage.com (uprightness_of_character)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Re: Continuing problem with # directives
In-Reply-To: <C7FE35004D40FD45AA342991B88CE40409A2A4@lnml1.eca-international.local>
Message-ID: <ba0kr4+3ggb@eGroups.com>

> I create a newline token called EOL, and then when my parser 
constructs
> its tree it doesn't bother putting it in the tree. Would that work?
> 
> Or maybe a parser rule that recognises and dumps EOL.

That would complicate the parser a lot, given that EOL in C can appear 
pretty much anywhere. So I'd have to write:

while_stmt : "while" (EOL)? LPAR (EOL)? expression (EOL)? RPAR (EOL)? 
statement ;

Is this what you're referring to?


Andrei


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From andrew at adersoftware.com  Thu May 15 18:53:45 2003
From: andrew at adersoftware.com (Andrew Deren)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Re: Understanding of testLiterals=true
In-Reply-To: <ba07l1+s9lk@eGroups.com>
Message-ID: <20030515211090.SM01108@andrew>

I know there is a bug in the C# version (might be in other too). It was
happening to me too. What I ended up doing is overwriting testLiteralsTable
method in the lexer:

	public override int testLiteralsTable(int ttype)
	{
		try
		{
			int literalsIndex =
(int)literals[text.ToString().ToLower()];
			ttype = literalsIndex;
			return ttype;
		}
		catch
		{
			return ttype;
		}		
	}


-----Original Message-----
From: cgodfrey86 [mailto:cgodfrey@epnet.com] 
Sent: Thursday, May 15, 2003 9:19 AM
To: antlr-interest@yahoogroups.com

One issue I have in defining my grammar in this manner is that I am 
unable to detect this example token (GT_OP as "gt") regardless of 
case.

When I add the following options

class UserLexer extends Lexer;
options {
  k=4;
  caseSensitive=false;
  caseSensitiveLiterals=false;
}

I don't recognize GT as a token. Is this as expected?

Thanks In Advance.

--- In antlr-interest@yahoogroups.com, "cgodfrey86" <cgodfrey@e...> 
wrote:
> Hello,
> 
> I just wanted to make validate my understanding of test 
literals=true 
> option.
> 
> This grammar file is fine when Token GT_OP is defined in the tokens 
> section. If instead, I defined a rule for the GT_OP token as 
> 
> GT_OP : "gt";
> 
> I get lexical nondeterminism error.
> 
> So, am I correct in the understanding that testLiterals will test 
> only what is defined in the tokens section?
> 
> userquery.g: warning:lexical nondeterminism between rules GT_OP and 
> TAG upon
> userquery.g:     k==1:'g'
> userquery.g:     k==2:'t'
> userquery.g:     k==3:<end-of-token>
> userquery.g:     k==4:<end-of-token>
> 
> options
> {
> 	language = "CSharp";
> }
> 
> class UserLexer extends Lexer;
> options {
>   k=4;
>   testLiterals=true;
> 
> }
> 
> tokens {
> GT_OP = "gt";
> }
> 
> 
> TAG
> options { testLiterals=true; }
>  	:
> 	('a'..'z')('a'..'z')
> 	;


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 






 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Fri May 16 01:04:53 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] C++: Exception on loading literals.
In-Reply-To: <b9tmbp+5fs7@eGroups.com>; from mikhail@augustmail.com on Wed, May 14, 2003 at 03:11:53PM -0000
References: <b9tmbp+5fs7@eGroups.com> <ba0qqj+11100@eGroups.com> <b9tmbp+5fs7@eGroups.com>
Message-ID: <20030516100453.R15744@cs.utwente.nl>

Hi,

On Wed, May 14, 2003 at 03:11:53PM -0000, TheSamiM wrote:
> Using ANTLR 2.7.2.
> Using Visual C++ 6.0 (no service packs as far as I can tell)
> 
> I built antlrd.dll; truck loads of warnings but no errors.

The DLL built with 2.7.2 is not really one of the most stable things (it
might vary a bit on whose DLL build instructions you are using) Search the
archive is the only advice I can give with respect to it.

You might try a static library.

Maybe it's something in parser/lexer intialization, but if the example
programs have the same problem that's probably not the case.

> Am I missing a service pack?
> Should the map be initialized somehow? (How?)
> Where does one get the service packs for VC anymore, all I can find 
> on MSDN is .net foo wich won't help much...

No idea here. Don't use msvc6.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 "Don't call me stupid." "Oh, right. To call you stupid would be an insult
    to stupid people. I've known sheep that could outwit you! I've worn
              dresses with higher IQs!" --- A Fish Called Wanda


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From caronfranck at yahoo.fr  Fri May 16 02:33:14 2003
From: caronfranck at yahoo.fr (franck_antibes_fr)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Re: (unknown)
In-Reply-To: <170826586F3BD511910D0200C110AAA8054023C2@memail03.bco-home.com>
Message-ID: <ba2b8q+4d7p@eGroups.com>

I am writing a parser to be reusable for any kind of applications(


prefixing modules names or port reordering, dependency checking ...)


without having to preprocess or independently of the proprocess 
context (tool dependent macros, include files...). 




maybe it will be impossible to handle everything but I have to cover


the maximum.




franck


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:


> What kind of tool are you writing?


> 


> Monty


> 


> -----Original Message-----


> From: franck_antibes_fr [mailto:caronfranck@y...]


> Sent: Thursday, May 15, 2003 8:58 AM


> To: antlr-interest@yahoogroups.com


> Subject: [antlr-interest] Re: (unknown)


> 


> 


> my goal is to keep both the #ifdef and #else parts in the same tree 


> (not an AST but a Data Object Model). an other hard stuff is dealing 


> with macro without expanding them. 


> 


> 


> 


> 


> I will have a look to your example. 


> 


> 


> thanks 


> 


> 


> 


> 


> Franck 


> 


> 


> 


> 


> --- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:


> 


> 


> > Yes, a token stream should work.  You can see my filtering example 


> for some


> 


> 


> > ideas.  http://www.codetransform.com/filterexample.html.  This 


> problem will


> 


> 


> > be a great deal harder if you have to preserve all the source 
code.  


> In


> 


> 


> > other words if you have to keep both the #ifdef and #else parts in 


> the same


> 


> 


> > tree then you've made things pretty interesting.


> 


> 


> > 


> 


> 


> > Monty


> 


> 


> > ANTLR consultant


> 


> 


> > www.codetransform.com


> 


> 


> > 


> 


> 


> > -----Original Message-----


> 


> 


> > From: franck_antibes_fr [mailto:caronfranck@y...]


> 


> 


> > Sent: Thursday, May 15, 2003 7:59 AM


> 


> 


> > To: antlr-interest@yahoogroups.com


> 


> 


> > Subject: [antlr-interest] (unknown)


> 


> 


> > 


> 


> 


> > 


> 


> 


> > Hi,


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > I am writing a verilog parser based on the grammar found on antlr.


> org.


> 


> 


> > 


> 


> 


> > 


> 


> 


> > but I have to handle in my parser `define macros and `ifdef `else 


> 


> 


> > `endif compiler directive. ( I do not want to preprocess the file)
.


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > for the people that know nothing about verilog, the problem is the 


> 


> 


> > same as #define and #ifdef #else #endif preprocessor directive in 


> 


> 


> > C/C++ so I will transpose the problem in C++ instead of verilog.


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > a litle example


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > #ifdef CAN_DERIVE


> 


> 


> > 


> 


> 


> > 


> 


> 


> > #include "base.h"


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > class toto : public base {


> 


> 


> > 


> 


> 


> > 


> 


> 


> > public: 


> 


> 


> > 


> 


> 


> > 


> 


> 


> >    toto(int a):base(a){}


> 


> 


> > 


> 


> 


> > 


> 


> 


> > #else 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > class toto {


> 


> 


> > 


> 


> 


> > 


> 


> 


> > protected:


> 


> 


> > 


> 


> 


> > 


> 


> 


> >    int a_;


> 


> 


> > 


> 


> 


> > 


> 


> 


> > public: 


> 


> 


> > 


> 


> 


> > 


> 


> 


> >    toto(int a):a_(a){}


> 


> 


> > 


> 


> 


> > 


> 


> 


> > #endif


> 


> 


> > 


> 


> 


> > 


> 


> 


> >    virtual get_a() {return a_;}


> 


> 


> > 


> 


> 


> > 


> 


> 


> > };


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > because #ifdef ... can be everywhere in the code, it is not 
feasable 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > to put everywhere in the grammar rules to handle this. I thought 
to 


> 


> 


> > use a king of tokenstream filter or multiplexer with several 


> parsers.


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > Do any one have an idea to solve this ?


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > thanks 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > Franck


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> > 


> 


> 


> >  


> 


> 


> > 


> 


> 


> > Your use of Yahoo! Groups is subject to http://docs.yahoo.


> com/info/terms/


> 


> 


> 


>  


> 


> Your use of Yahoo! Groups is subject to http://docs.yahoo.
com/info/terms/



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lf25 at kent.ac.uk  Fri May 16 02:44:56 2003
From: lf25 at kent.ac.uk (Leonardo Freitas)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] 
Message-ID: <025c01c31b8f$cf3bc560$c0290c81@ad.kent.ac.uk>

I am new at ANTLR but from I've found it the most appropriate for me from the ones availble (JavaCC, GOLD, byacc, etc) for Java.

I am implementing a language where the grammar is a bit different.
It is supposed to recognise LaTeX code and parse it appropriately.
In fact, it must consider only some LaTeX environments and treat the sections of the environment as part of the possible grammar, leaving all other LaTeX input as comments.

Does anyone know something interesting in this field of a grammar for parts of LaTeX using ANTLR?


thanks
leo
============================
Leonardo Freitas
PhD - Circus Model Checking
Formal Methods - Soft. Eng.
www.cs.ukc.ac.uk/~lf25
============================


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From M.Wirth at seeburger.de  Fri May 16 03:39:52 2003
From: M.Wirth at seeburger.de (Wirth. Michael)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Bug in the java example?
Message-ID: <164986BA012AA2468F7F6AA0562D7BDC06C528@seedebrexch.seeburger.de>

Hello,

perhaps I found a bug in the java example.
With the following code the lexer runs into a never ending loop.
See the missing quotation marks in the methodcall.

public class E {
    public static void main(String[] args)
    {
        methcall(10, "aString);
    }
}


Greetings,
	Michael

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From cgodfrey at epnet.com  Fri May 16 05:22:18 2003
From: cgodfrey at epnet.com (cgodfrey86)
Date: Mon Dec 20 16:15:37 2004
Subject: [antlr-interest] Re: Understanding of testLiterals=true
In-Reply-To: <20030515211090.SM01108@andrew>
Message-ID: <ba2l5q+md3e@eGroups.com>

Thank You Very Much.

That worked great.

--- In antlr-interest@yahoogroups.com, "Andrew Deren" <andrew@a...> 
wrote:
> I know there is a bug in the C# version (might be in other too). It 
was
> happening to me too. What I ended up doing is overwriting 
testLiteralsTable
> method in the lexer:
> 
> 	public override int testLiteralsTable(int ttype)
> 	{
> 		try
> 		{
> 			int literalsIndex =
> (int)literals[text.ToString().ToLower()];
> 			ttype = literalsIndex;
> 			return ttype;
> 		}
> 		catch
> 		{
> 			return ttype;
> 		}		
> 	}
> 
> 
> -----Original Message-----
> From: cgodfrey86 [mailto:cgodfrey@e...] 
> Sent: Thursday, May 15, 2003 9:19 AM
> To: antlr-interest@yahoogroups.com
> 
> One issue I have in defining my grammar in this manner is that I am 
> unable to detect this example token (GT_OP as "gt") regardless of 
> case.
> 
> When I add the following options
> 
> class UserLexer extends Lexer;
> options {
>   k=4;
>   caseSensitive=false;
>   caseSensitiveLiterals=false;
> }
> 
> I don't recognize GT as a token. Is this as expected?
> 
> Thanks In Advance.
> 
> --- In antlr-interest@yahoogroups.com, "cgodfrey86" <cgodfrey@e...> 
> wrote:
> > Hello,
> > 
> > I just wanted to make validate my understanding of test 
> literals=true 
> > option.
> > 
> > This grammar file is fine when Token GT_OP is defined in the 
tokens 
> > section. If instead, I defined a rule for the GT_OP token as 
> > 
> > GT_OP : "gt";
> > 
> > I get lexical nondeterminism error.
> > 
> > So, am I correct in the understanding that testLiterals will test 
> > only what is defined in the tokens section?
> > 
> > userquery.g: warning:lexical nondeterminism between rules GT_OP 
and 
> > TAG upon
> > userquery.g:     k==1:'g'
> > userquery.g:     k==2:'t'
> > userquery.g:     k==3:<end-of-token>
> > userquery.g:     k==4:<end-of-token>
> > 
> > options
> > {
> > 	language = "CSharp";
> > }
> > 
> > class UserLexer extends Lexer;
> > options {
> >   k=4;
> >   testLiterals=true;
> > 
> > }
> > 
> > tokens {
> > GT_OP = "gt";
> > }
> > 
> > 
> > TAG
> > options { testLiterals=true; }
> >  	:
> > 	('a'..'z')('a'..'z')
> > 	;
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Fri May 16 10:17:42 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] lecture audio versus video
Message-ID: <4D708BF6-87C2-11D7-AF4C-000393BB647E@jguru.com>

Folks,

Some of you have been listening to the lecture audios from my language 
course this Spring and I'm wondering if that is satisfactory or would 
streaming video be much better.

Apparently, I can get a realnetworks.com server for linux that will 
push out video for free since it would be such low user/bandwidth 
volume.  I can probably get the university to send a human to each 
class to video and then I can edit the DV tape on my Mac and push to a 
linux server.  Anybody know anything about this or have opinions about 
real's codecs?

Heck, I might just do some random lectures about various antlr topics 
and post them.

Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Fri May 16 11:57:00 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] lecture audio versus video
In-Reply-To: <4D708BF6-87C2-11D7-AF4C-000393BB647E@jguru.com>
Message-ID: <20030516185700.78792.qmail@web20416.mail.yahoo.com>

Oooh, that'd be good...


--- Terence Parr <parrt@jguru.com> wrote:
> Folks,
> 
> Some of you have been listening to the lecture
> audios from my language 
> course this Spring and I'm wondering if that is
> satisfactory or would 
> streaming video be much better.
> 
> Apparently, I can get a realnetworks.com server for
> linux that will 
> push out video for free since it would be such low
> user/bandwidth 
> volume.  I can probably get the university to send a
> human to each 
> class to video and then I can edit the DV tape on my
> Mac and push to a 
> linux server.  Anybody know anything about this or
> have opinions about 
> real's codecs?
> 
> Heck, I might just do some random lectures about
> various antlr topics 
> and post them.
> 
> Terence
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator:
> http://www.antlr.org
> Co-founder, http://www.peerscope.com link sharing,
> pure-n-simple
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo.
http://search.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From yiuwing.yip at virgin.net  Fri May 16 14:25:52 2003
From: yiuwing.yip at virgin.net (Yiu Wing)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] lecture audio versus video
References: <4D708BF6-87C2-11D7-AF4C-000393BB647E@jguru.com>
Message-ID: <004d01c31bf1$bb2bbd20$23c3193e@fox>

> Folks,
>
> Some of you have been listening to the lecture audios from my language
> course this Spring and I'm wondering if that is satisfactory or would
> streaming video be much better.
>
> Apparently, I can get a realnetworks.com server for linux that will
> push out video for free since it would be such low user/bandwidth
> volume.  I can probably get the university to send a human to each
> class to video and then I can edit the DV tape on my Mac and push to a
> linux server.  Anybody know anything about this or have opinions about
> real's codecs?
>
> Heck, I might just do some random lectures about various antlr topics
> and post them.
>
> Terence

That would be great! I can see it's going to benefit a lot of people and
make antlr even more popular. ;-)

Yiu Wing

> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Co-founder, http://www.peerscope.com link sharing, pure-n-simple
> Lecturer in Comp. Sci., University of San Francisco
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Fri May 16 10:14:31 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest]
In-Reply-To: <025c01c31b8f$cf3bc560$c0290c81@ad.kent.ac.uk>
Message-ID: <DB7AAA60-87C1-11D7-AF4C-000393BB647E@jguru.com>


On Friday, May 16, 2003, at 02:44  AM, Leonardo Freitas wrote:

> I am new at ANTLR but from I've found it the most appropriate for me 
> from the ones availble (JavaCC, GOLD, byacc, etc) for Java.
>
> I am implementing a language where the grammar is a bit different.
> It is supposed to recognise LaTeX code and parse it appropriately.
> In fact, it must consider only some LaTeX environments and treat the 
> sections of the environment as part of the possible grammar, leaving 
> all other LaTeX input as comments.
>
> Does anyone know something interesting in this field of a grammar for 
> parts of LaTeX using ANTLR?

Hi Leonardo,

ANTLR has some nice "filtering" abilities such as TokenStream's and 
lexical "filter" option.  Should handle partial recognition issues for 
you.  As for a LaTeX grammar, I am unaware of one, but I'd be happy to 
answer your questions in return for the LaTeX grammar as public domain!

Best regards,
Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Fri May 16 21:31:53 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Re: TreeParser efficiency: Can TreeParsers ignor e arbitary subtrees?
In-Reply-To: <b9s47k+kfp1@eGroups.com>
Message-ID: <ba4dvp+cujl@eGroups.com>

Loring, Monty & Ter,

Thank you all for your replies. I'm yet to finish the actual 
treeparsers but once I'm done, I'll be trying your suggestions.

Cheers,

Micheal




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Fri May 16 21:38:16 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Re: Understanding of testLiterals=true
In-Reply-To: <20030515211090.SM01108@andrew>
Message-ID: <ba4ebo+3663@eGroups.com>

Hi Andrew,

You can submit a full bug report for this issue that you mention. All 
I'd need is enough information and perhaps a sample grammar that 
demonstrates it.

Cheers,

Micheal

> I know there is a bug in the C# version (might be in other too). It 
was
> happening to me too. What I ended up doing is overwriting 
testLiteralsTable
> method in the lexer:
> 
> 	public override int testLiteralsTable(int ttype)
> 	{
> 		try
> 		{
> 			int literalsIndex =
> (int)literals[text.ToString().ToLower()];
> 			ttype = literalsIndex;
> 			return ttype;
> 		}
> 		catch
> 		{
> 			return ttype;
> 		}		
> 	}
> 
> 
> -----Original Message-----
> From: cgodfrey86 [mailto:cgodfrey@e...] 
> Sent: Thursday, May 15, 2003 9:19 AM
> To: antlr-interest@yahoogroups.com
> 
> One issue I have in defining my grammar in this manner is that I am 
> unable to detect this example token (GT_OP as "gt") regardless of 
> case.
> 
> When I add the following options
> 
> class UserLexer extends Lexer;
> options {
>   k=4;
>   caseSensitive=false;
>   caseSensitiveLiterals=false;
> }
> 
> I don't recognize GT as a token. Is this as expected?
> 
> Thanks In Advance.
> 
> --- In antlr-interest@yahoogroups.com, "cgodfrey86" <cgodfrey@e...> 
> wrote:
> > Hello,
> > 
> > I just wanted to make validate my understanding of test 
> literals=true 
> > option.
> > 
> > This grammar file is fine when Token GT_OP is defined in the 
tokens 
> > section. If instead, I defined a rule for the GT_OP token as 
> > 
> > GT_OP : "gt";
> > 
> > I get lexical nondeterminism error.
> > 
> > So, am I correct in the understanding that testLiterals will test 
> > only what is defined in the tokens section?
> > 
> > userquery.g: warning:lexical nondeterminism between rules GT_OP 
and 
> > TAG upon
> > userquery.g:     k==1:'g'
> > userquery.g:     k==2:'t'
> > userquery.g:     k==3:<end-of-token>
> > userquery.g:     k==4:<end-of-token>
> > 
> > options
> > {
> > 	language = "CSharp";
> > }
> > 
> > class UserLexer extends Lexer;
> > options {
> >   k=4;
> >   testLiterals=true;
> > 
> > }
> > 
> > tokens {
> > GT_OP = "gt";
> > }
> > 
> > 
> > TAG
> > options { testLiterals=true; }
> >  	:
> > 	('a'..'z')('a'..'z')
> > 	;
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rustydstone at yahoo.com  Sat May 17 04:08:14 2003
From: rustydstone at yahoo.com (rustydstone)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] java.tree.g: A way to get parent of primaryExpression?
Message-ID: <ba556u+ejkn@eGroups.com>

When calculating primary expression, I need somehow to determine the
immediate parent of primary expression. In other words, primary
expression will be calculated differently if the parent is, e.g.,
unary minus or regular minus.

Any ideas? Thanks

--------------------------------------------------

expr:	#(QUESTION expr expr expr)
[...]
  |     #(MINUS expr expr)
[...]
  |     #(UNARY_MINUS expr)
  |     #(UNARY_PLUS expr)
  |     primaryExpression
;




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From spamjunk at stny.rr.com  Sat May 17 05:55:14 2003
From: spamjunk at stny.rr.com (DrXenos)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] segmentation fault with AST
Message-ID: <ba5bfi+if8k@eGroups.com>

Hi.  I hope someone can tell me what I am doing wrong.  My antlr
parser works fine unless I set the "buildAST=true" option.  With this
option on, it will segmentation fault on a call to
astFactory->create(LT(1)).

I am building for C++ with the latest version of antlr (2.7.2).

I have built and tried it using mingw (gcc 3.2) and djgpp (gcc 3.2.2).
 I don't know if I just built it wrong, or am not including something
in the grammer file that I need to.  I'm using Windows so I can't run
the configure script, so I don't know if I am building antlr wrong
(everything but this seems to work fine).

Unless someone can tell me what I am doning, I will try using Linux or
Cygwin so I can build the "normal" way.

I hope I've provided enough information.

Thanks a bunch.

Rich


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Sat May 17 06:43:10 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Re: java.tree.g: A way to get parent of primaryExpression?
In-Reply-To: <ba556u+ejkn@eGroups.com>
Message-ID: <ba5e9e+q5je@eGroups.com>

--- In antlr-interest@yahoogroups.com, "rustydstone" 
<rustydstone@y...> wrote:
> When calculating primary expression, I need somehow to determine the
> immediate parent of primary expression. In other words, primary
> expression will be calculated differently if the parent is, e.g.,
> unary minus or regular minus.

My immediate reaction is to ask "Why?". Why does the calculation of 
the sub-expression of a UNARY_MINUS have to be different from the 
calculation of the sub-expressions of a MINUS?

They shouldn't be different AFAICT, you should add action code to the 
sub-rules for MINUS and UNARY_MINUS to perform the relevant operation 
on the results of their subexpression(s).


However...

If you want to pass parameters to (and return values from) ANTLR's 
rules, you could do something like this:

expr [IParent parent] returns [IResult result]
{
   IResult expr1 = null;
   IResult expr2 = null;
}
[...]
  |    #(MINUS expr1=expr[parent] expr2=expr[parent]
       { result = expr1.binaryMinus(expr2);  }
[...]
  |    #(UNARY_MINUS expr1=expr[parent])
       { result = expr1.unaryMinus();  }
[...]
  |    result=primaryExpression[parent]
  ;

Cheers,

Micheal


> Any ideas? Thanks
> 
> --------------------------------------------------
> 
> expr:	#(QUESTION expr expr expr)
> [...]
>   |     #(MINUS expr expr)
> [...]
>   |     #(UNARY_MINUS expr)
>   |     #(UNARY_PLUS expr)
>   |     primaryExpression
> ;


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rustydstone at yahoo.com  Sat May 17 07:24:04 2003
From: rustydstone at yahoo.com (rustydstone)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] TreeParser: Qs about generated code
Message-ID: <ba5gm4+es5p@eGroups.com>

Simple grammar:

expr returns [Object o] {
[...]

    | #(UNARY_MINUS e:expr) {o = il.unaryMinus(e);}
[...]
    ;

The respective generated TreeParser code looks like the following:

1  case UNARY_MINUS:
2   {
3        AST __t25 = _t;
4        AST tmp20_AST_in = (AST)_t;
5        match(_t,UNARY_MINUS);
6        _t = _t.getFirstChild();
7        e = _t==ASTNULL ? null : (AST)_t;
   // I'd like to avoid the call on line 8 since I'm calculating the
   // result myself on line 12
8        expr(_t); 
9        _t = _retTree;
10       _t = __t25;
11       _t = _t.getNextSibling();
12       o = il.unaryMinus(e);
13       break;
14  }

Questions:
1) I thought when I say "#(UNARY_MINUS e:expr)" instead of
"#(UNARY_MINUS e=expr)", ANTL would not bother calculating expr (since
the AST itself is requested, not the value of the expr). Is there a
way to tell ANTL that I will walk this part of the tree and calculate
the result myself?

2) Lines 9, 10, 11 seem a bit strange. Not sure I understand the
meaning of this.

Any ideas? Thanks




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rustydstone at yahoo.com  Sat May 17 07:38:46 2003
From: rustydstone at yahoo.com (rustydstone)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Re: java.tree.g: A way to get parent of primaryExpression?
In-Reply-To: <ba5e9e+q5je@eGroups.com>
Message-ID: <ba5hhm+oq4c@eGroups.com>

--- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...>
wrote:
> My immediate reaction is to ask "Why?". Why does the calculation of 
> the sub-expression of a UNARY_MINUS have to be different from the 
> calculation of the sub-expressions of a MINUS?

Generally speaking, you're absolutely right. In my particular case, I
may need this for date math (e.g. -2days = now - 2days, whatever).

Somewhat related question is here:
http://groups.yahoo.com/group/antlr-interest/message/8324

Thanks for the advice.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Sat May 17 09:41:50 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] TreeParser: Qs about generated code
In-Reply-To: <ba5gm4+es5p@eGroups.com>
Message-ID: <755FF5B0-8886-11D7-AF4C-000393BB647E@jguru.com>


On Saturday, May 17, 2003, at 07:24  AM, rustydstone wrote:

> Simple grammar:
>
> expr returns [Object o] {
> [...]
>
>     | #(UNARY_MINUS e:expr) {o = il.unaryMinus(e);}
> [...]
>     ;
>
> The respective generated TreeParser code looks like the following:
>
> 1  case UNARY_MINUS:
> 2   {
> 3        AST __t25 = _t;
> 4        AST tmp20_AST_in = (AST)_t;
> 5        match(_t,UNARY_MINUS);
> 6        _t = _t.getFirstChild();
> 7        e = _t==ASTNULL ? null : (AST)_t;
>    // I'd like to avoid the call on line 8 since I'm calculating the
>    // result myself on line 12
> 8        expr(_t);
> 9        _t = _retTree;
> 10       _t = __t25;
> 11       _t = _t.getNextSibling();
> 12       o = il.unaryMinus(e);
> 13       break;
> 14  }
>
> Questions:
> 1) I thought when I say "#(UNARY_MINUS e:expr)" instead of
> "#(UNARY_MINUS e=expr)", ANTL would not bother calculating expr (since
> the AST itself is requested, not the value of the expr).

If you say expr, ANTLR will parse it.  Say '.' and it will acknowledge 
that there is a child.

> Is there a
> way to tell ANTL that I will walk this part of the tree and calculate
> the result myself?
>
> 2) Lines 9, 10, 11 seem a bit strange. Not sure I understand the
> meaning of this.

Just parsing bookkeeping.

Ter

> Any ideas? Thanks
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tfga at terra.com.br  Sun May 18 09:31:52 2003
From: tfga at terra.com.br (Thiago F.G. Albuquerque)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Nondeterminism between alts 1 and 2 of block...
Message-ID: <5.1.0.14.1.20030518131421.00a8ab00@pop.bsb.terra.com.br>

Hi, everybody,

I am facing a problem with a grammar. I was wondering if you could help me.

Here it is:

class MyParser extends Parser;

options
{
    k = 2;
}

// ---------------------------------------------------------------------------

exp : func_call         // <-- this is line 185 (the line of the error)
     | atom
     ;

func_call : ID "(" (exp ("," exp)*)? ")"
           ;

atom : variable
      | "(" exp ")"
      ;

// ---------------------------------------------------------------------------

variable : ID                  // atomic variable
          | ID ("[" exp "]")+   // array
          | ID "." variable     // struct
          ;

// ----------------------------------------------------------------------------

Error:

ANTLR Parser Generator   Version 2.7.2   1989-2003 jGuru.com
test.g:185: warning:nondeterminism between alts 1 and 2 of block upon
test.g:185:     k==1:ID
test.g:185:     k==2:"("

I don't understand how can there be nondeterminism here. func_call really 
begins with

ID "("

but it is not possible to generate this sequence of tokens from atom.

Also, I noticed that if I colapse the rules exp and atom into one rule, 
like this:

exp : func_call         // <-- this is line 185 (the line of the error)
       | variable
       | "(" exp ")"
       ;

the problem disapears.

I am puzzled.

Can anybody please explain this to me?

TIA,
Thiago


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Sun May 18 13:14:28 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Nondeterminism between alts 1 and 2 of block...
In-Reply-To: <5.1.0.14.1.20030518131421.00a8ab00@pop.bsb.terra.com.br>
Message-ID: <5421E3A4-896D-11D7-AF4C-000393BB647E@jguru.com>

Hi.  You've correctly analyzed this as a Human. :)  Unfortunately, for  
the moment, ANTLR generates linear approximate k=2 lookahead not the  
real thing (which has sequence information).  This is a weakness of the  
parsing strategy not your understanding of LL(k).  Sorry.

I'm actually working on the analysis stuff at the moment (full LL(k)  
and semantic predicate hoisting). :)

Ter

On Sunday, May 18, 2003, at 09:31  AM, Thiago F.G. Albuquerque wrote:

> Hi, everybody,
>
> I am facing a problem with a grammar. I was wondering if you could  
> help me.
>
> Here it is:
>
> class MyParser extends Parser;
>
> options
> {
>     k = 2;
> }
>
> //  
> ----------------------------------------------------------------------- 
> ----
>
> exp : func_call         // <-- this is line 185 (the line of the error)
>      | atom
>      ;
>
> func_call : ID "(" (exp ("," exp)*)? ")"
>            ;
>
> atom : variable
>       | "(" exp ")"
>       ;
>
> //  
> ----------------------------------------------------------------------- 
> ----
>
> variable : ID                  // atomic variable
>           | ID ("[" exp "]")+   // array
>           | ID "." variable     // struct
>           ;
>
> //  
> ----------------------------------------------------------------------- 
> -----
>
> Error:
>
> ANTLR Parser Generator   Version 2.7.2   1989-2003 jGuru.com
> test.g:185: warning:nondeterminism between alts 1 and 2 of block upon
> test.g:185:     k==1:ID
> test.g:185:     k==2:"("
>
> I don't understand how can there be nondeterminism here. func_call  
> really
> begins with
>
> ID "("
>
> but it is not possible to generate this sequence of tokens from atom.
>
> Also, I noticed that if I colapse the rules exp and atom into one rule,
> like this:
>
> exp : func_call         // <-- this is line 185 (the line of the error)
>        | variable
>        | "(" exp ")"
>        ;
>
> the problem disapears.
>
> I am puzzled.
>
> Can anybody please explain this to me?
>
> TIA,
> Thiago
>
>
>
>
> Your use of Yahoo! Groups is subject to  
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From alper_celik at yahoo.com  Sun May 18 14:17:07 2003
From: alper_celik at yahoo.com (Alper Celik)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Re: Is there a C# grammar for ANTLR ??
In-Reply-To: <C74A5B40-4F37-11D7-ABA9-000393BB647E@jguru.com>
Message-ID: <ba8t8j+andc@eGroups.com>

Does anyone have c#/vb.net grammar?

Thanks,

Alper

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> 
wrote:
> Hi.  I'm unaware of a C# grammar, but there the "mono" project may 
have 
> a yacc grammar or something that you could port to ANTLR easily :)  
> (especially if you use the Java grammar as a guide).
> 
> Terence
> 
> On Wednesday, March 5, 2003, at 01:47  AM, Kim Tiedemann wrote:
> 
> > Hi there,
> > ?
> > We are a group studying computer science at the university of 
Aalborg, 
> > Denmark and we are considering doing a project where it would be 
> > possible to?reverse engineer C# files?and show them as?an UML-
diagram 
> > in ArgoUML.
> > ?
> > So we were wondering if there already exists a C# grammar for 
ANTLR ??
> > ?
> > Best regards
> > ?
> > Kim Tiedemann
> > ?
> > "The road to wisdom? - Well, it's plain and simple to express: 
Err and 
> > err and err again - but less and less and less."
> > Piet Hein
> >
> > Your use of Yahoo! Groups is subject to the Yahoo! Terms of 
Service.
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tfga at terra.com.br  Sun May 18 14:42:02 2003
From: tfga at terra.com.br (Thiago F.G. Albuquerque)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Nondeterminism between alts 1 and 2 of
  block...
In-Reply-To: <5421E3A4-896D-11D7-AF4C-000393BB647E@jguru.com>
References: <5.1.0.14.1.20030518131421.00a8ab00@pop.bsb.terra.com.br>
Message-ID: <5.1.0.14.1.20030518182948.00a8a450@pop.bsb.terra.com.br>

At 13:14 18/05/03 -0700, you wrote:
>Hi.  You've correctly analyzed this as a Human. :)  Unfortunately, for
>the moment, ANTLR generates linear approximate k=2 lookahead not the
>real thing (which has sequence information).  This is a weakness of the
>parsing strategy not your understanding of LL(k).  Sorry.
>
>I'm actually working on the analysis stuff at the moment (full LL(k)
>and semantic predicate hoisting). :)
>
>Ter

Ok, thank you for your answer. But how can I fix this? Is there a 
workaround? I need to write my parser. This example I sent is a 
simplification of a larger grammar I am working on (a project for school). 
Here's an excerpt of the original grammar:

exp : func_call
       | (variable "=") => assignment
       | logical_exp
       ;

logical_exp : rel_exp (("||" | "&&" | "!") rel_exp)*
             ;

rel_exp : add_exp (rel_op add_exp)*
         ;

rel_op : "<" | "<=" | ">" | ">=" | "==" | "!="
        ;

add_exp : mul_exp (( "+" | "-") mul_exp)*
         ;

mul_exp : atom (( "*" | "/" | "%" ) atom)*
         ;

atom : const
      | variable
      | "(" exp ")"
      ;

In this grammar I cannot colapse 'exp' and 'atom' into one rule.

What should I do?

TIA,
Thiago

>On Sunday, May 18, 2003, at 09:31  AM, Thiago F.G. Albuquerque wrote:
>
> > Hi, everybody,
> >
> > I am facing a problem with a grammar. I was wondering if you could
> > help me.
> >
> > Here it is:
> >
> > class MyParser extends Parser;
> >
> > options
> > {
> >     k = 2;
> > }
> >
> > //
> > -----------------------------------------------------------------------
> > ----
> >
> > exp : func_call         // <-- this is line 185 (the line of the error)
> >      | atom
> >      ;
> >
> > func_call : ID "(" (exp ("," exp)*)? ")"
> >            ;
> >
> > atom : variable
> >       | "(" exp ")"
> >       ;
> >
> > //
> > -----------------------------------------------------------------------
> > ----
> >
> > variable : ID                  // atomic variable
> >           | ID ("[" exp "]")+   // array
> >           | ID "." variable     // struct
> >           ;
> >
> > //
> > -----------------------------------------------------------------------
> > -----
> >
> > Error:
> >
> > ANTLR Parser Generator   Version 2.7.2   1989-2003 jGuru.com
> > test.g:185: warning:nondeterminism between alts 1 and 2 of block upon
> > test.g:185:     k==1:ID
> > test.g:185:     k==2:"("
> >
> > I don't understand how can there be nondeterminism here. func_call
> > really
> > begins with
> >
> > ID "("
> >
> > but it is not possible to generate this sequence of tokens from atom.
> >
> > Also, I noticed that if I colapse the rules exp and atom into one rule,
> > like this:
> >
> > exp : func_call         // <-- this is line 185 (the line of the error)
> >        | variable
> >        | "(" exp ")"
> >        ;
> >
> > the problem disapears.
> >
> > I am puzzled.
> >
> > Can anybody please explain this to me?
> >
> > TIA,
> > Thiago


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From glindholm at yahoo.com  Sun May 18 17:01:52 2003
From: glindholm at yahoo.com (Greg Lindholm)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] full LL(k) -- (Was: Nondeterminism between alts 1 and 2 of block...)
In-Reply-To: <5421E3A4-896D-11D7-AF4C-000393BB647E@jguru.com>
Message-ID: <20030519000152.55375.qmail@web12402.mail.yahoo.com>

Sweet...

But please tell us more....

How's it going? What will it be able to do? When will we see something?


--- Terence Parr <parrt@jguru.com> wrote:
> 
> I'm actually working on the analysis stuff at the moment (full LL(k) 
> 
> and semantic predicate hoisting). :)
> 
> Ter
> 


__________________________________
Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo.
http://search.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Sun May 18 22:22:30 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Nondeterminism between alts 1 and 2 of block...
In-Reply-To: <5.1.0.14.1.20030518182948.00a8a450@pop.bsb.terra.com.br>
Message-ID: <E31F39A8-89B9-11D7-8705-000393BB647E@jguru.com>

For now, I'd use syntactic predicates...

Terence

On Sunday, May 18, 2003, at 02:42  PM, Thiago F.G. Albuquerque wrote:

> At 13:14 18/05/03 -0700, you wrote:
>> Hi.  You've correctly analyzed this as a Human. :)  Unfortunately, for
>> the moment, ANTLR generates linear approximate k=2 lookahead not the
>> real thing (which has sequence information).  This is a weakness of  
>> the
>> parsing strategy not your understanding of LL(k).  Sorry.
>>
>> I'm actually working on the analysis stuff at the moment (full LL(k)
>> and semantic predicate hoisting). :)
>>
>> Ter
>
> Ok, thank you for your answer. But how can I fix this? Is there a
> workaround? I need to write my parser. This example I sent is a
> simplification of a larger grammar I am working on (a project for  
> school).
> Here's an excerpt of the original grammar:
>
> exp : func_call
>        | (variable "=") => assignment
>        | logical_exp
>        ;
>
> logical_exp : rel_exp (("||" | "&&" | "!") rel_exp)*
>              ;
>
> rel_exp : add_exp (rel_op add_exp)*
>          ;
>
> rel_op : "<" | "<=" | ">" | ">=" | "==" | "!="
>         ;
>
> add_exp : mul_exp (( "+" | "-") mul_exp)*
>          ;
>
> mul_exp : atom (( "*" | "/" | "%" ) atom)*
>          ;
>
> atom : const
>       | variable
>       | "(" exp ")"
>       ;
>
> In this grammar I cannot colapse 'exp' and 'atom' into one rule.
>
> What should I do?
>
> TIA,
> Thiago
>
>> On Sunday, May 18, 2003, at 09:31  AM, Thiago F.G. Albuquerque wrote:
>>
>>> Hi, everybody,
>>>
>>> I am facing a problem with a grammar. I was wondering if you could
>>> help me.
>>>
>>> Here it is:
>>>
>>> class MyParser extends Parser;
>>>
>>> options
>>> {
>>>     k = 2;
>>> }
>>>
>>> //
>>> --------------------------------------------------------------------- 
>>> --
>>> ----
>>>
>>> exp : func_call         // <-- this is line 185 (the line of the  
>>> error)
>>>      | atom
>>>      ;
>>>
>>> func_call : ID "(" (exp ("," exp)*)? ")"
>>>            ;
>>>
>>> atom : variable
>>>       | "(" exp ")"
>>>       ;
>>>
>>> //
>>> --------------------------------------------------------------------- 
>>> --
>>> ----
>>>
>>> variable : ID                  // atomic variable
>>>           | ID ("[" exp "]")+   // array
>>>           | ID "." variable     // struct
>>>           ;
>>>
>>> //
>>> --------------------------------------------------------------------- 
>>> --
>>> -----
>>>
>>> Error:
>>>
>>> ANTLR Parser Generator   Version 2.7.2   1989-2003 jGuru.com
>>> test.g:185: warning:nondeterminism between alts 1 and 2 of block upon
>>> test.g:185:     k==1:ID
>>> test.g:185:     k==2:"("
>>>
>>> I don't understand how can there be nondeterminism here. func_call
>>> really
>>> begins with
>>>
>>> ID "("
>>>
>>> but it is not possible to generate this sequence of tokens from atom.
>>>
>>> Also, I noticed that if I colapse the rules exp and atom into one  
>>> rule,
>>> like this:
>>>
>>> exp : func_call         // <-- this is line 185 (the line of the  
>>> error)
>>>        | variable
>>>        | "(" exp ")"
>>>        ;
>>>
>>> the problem disapears.
>>>
>>> I am puzzled.
>>>
>>> Can anybody please explain this to me?
>>>
>>> TIA,
>>> Thiago
>
>
>
>
> Your use of Yahoo! Groups is subject to  
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Sun May 18 22:23:19 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] full LL(k) -- (Was: Nondeterminism between alts 1 and 2 of block...)
In-Reply-To: <20030519000152.55375.qmail@web12402.mail.yahoo.com>
Message-ID: <00948DCE-89BA-11D7-8705-000393BB647E@jguru.com>


On Sunday, May 18, 2003, at 05:01  PM, Greg Lindholm wrote:

> Sweet...
>
> But please tell us more....
>
> How's it going? What will it be able to do? When will we see something?

I'm looking at my old PCCTS code, reading my thesis again, and doing 
research...not sure where it will lead.  One is certain: I used to be 
smarter ;)

Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Mon May 19 00:51:23 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] segmentation fault with AST
In-Reply-To: <ba5bfi+if8k@eGroups.com>; from spamjunk@stny.rr.com on Sat, May 17, 2003 at 12:55:14PM -0000
References: <ba5bfi+if8k@eGroups.com>
Message-ID: <20030519095121.A26201@cs.utwente.nl>

Hi,

On Sat, May 17, 2003 at 12:55:14PM -0000, DrXenos wrote:
> I hope someone can tell me what I am doing wrong.  My antlr
> parser works fine unless I set the "buildAST=true" option.  With this
> option on, it will segmentation fault on a call to
> astFactory->create(LT(1)).

Did you set the astFactory ?

E.g. as in the exprAST example in examples/cpp/exprAST:

ASTFactory my_factory;
ExprLexer lexer(cin);
ExprParser parser(lexer);

parser.initializeASTFactory(my_factory);
parser.setASTFactory(&my_factory);

parser.expr();

> I have built and tried it using mingw (gcc 3.2) and djgpp (gcc 3.2.2).
>  I don't know if I just built it wrong, or am not including something
> in the grammer file that I need to.  I'm using Windows so I can't run
> the configure script, so I don't know if I am building antlr wrong
> (everything but this seems to work fine).

Building the lib should not be a problem manually. There's nothing fancy
needed actually. Gcc 3.2.2 I have not tried myself but with 3.2.3 it works
(and with 3.2.1).

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
              of UCSD Pascal ever released..." --- Larry Smith


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From valce at libero.it  Mon May 19 01:34:40 2003
From: valce at libero.it (valce2003)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] building the C++ static library
Message-ID: <baa4v0+eqk@eGroups.com>

I'am a old user of PCCTS 1.33, and recently i have downloaded the 
last version in Java (antlr-2.7.2). With the antlr 2.7.1 the 
antlr.jar was incomplete, but regenerating it with all class files, 
all works, and the C++ static library is compilable. The last release 
have the correct jar file, but the library is impossible to compile 
with 4 errors and 460 warning.
Someone know if will be possible to have a release that work without 
problems? i don't ask very much. Only a jar file complete, and the 
hpp, cpp files aligned with Java version and compilable.

i hope that someone can help me.
many thanks.

PS
this errors are reported from VC++ 6.0:

c:\antlr-2.7.2\lib\cpp\src\baseast.cpp(312) : error 
C2201: 'nullASTptr' : must have external linkage

c:\antlr-2.7.2\lib\cpp\src\token.cpp(18) : error 
C2720: 'badToken' : '__declspec(dllimport ) ' storage-class specifier 
illegal on members

c:\antlr-2.7.2\lib\cpp\src\token.cpp(18) : error 
C2491: 'Token::badToken' : definition of dllimport static data member 
not allowed

c:\antlr-2.7.2\lib\cpp\src\treeparser.cpp(39) : error 
C2491: 'TreeParser::ASTNULL' : definition of dllimport static data 
member not allowed


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Mon May 19 03:39:37 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] building the C++ static library
In-Reply-To: <baa4v0+eqk@eGroups.com>; from valce@libero.it on Mon, May 19, 2003 at 08:34:40AM -0000
References: <baa4v0+eqk@eGroups.com>
Message-ID: <20030519123937.B26201@cs.utwente.nl>

Hi,

On Mon, May 19, 2003 at 08:34:40AM -0000, valce2003 wrote:
> I'am a old user of PCCTS 1.33, and recently i have downloaded the 
> last version in Java (antlr-2.7.2). With the antlr 2.7.1 the 
> antlr.jar was incomplete, but regenerating it with all class files, 
> all works, and the C++ static library is compilable. The last release 
> have the correct jar file, but the library is impossible to compile 
> with 4 errors and 460 warning.

See archive.

> Someone know if will be possible to have a release that work without 
> problems? i don't ask very much. Only a jar file complete, and the 
> hpp, cpp files aligned with Java version and compilable.

God knows :P

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Time what is time - I wish I knew how to tell You why - It hurts to know -
          Aren't we machines - Time what is time - Unlock the door
               - And see the truth - Then time is time again
                From: 'Time what is Time' by Blind Guardian


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mtiller at ford.com  Mon May 19 05:27:58 2003
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] High level semantic analysis
Message-ID: <AF02884D0976D311A014009027A8F1FB1FD54DD4@na1fcm10.dearborn.ford.com>

I'm not much of an expert on building compilers, but I came across something that I thought was quite interesting and I was wondering if anyone here would care to comment on the applicability of these ideas to ANTLR.  Specifically, I recognize the the treewalker functionality in the ANTLR is very nice way to explore and translate ASTs.  I was wondering if anybody is interested in adding some higher-level functionality like what is described in this report:
 
http://www.modelica.org/papers/scs98sem.pdf <http://www.modelica.org/papers/scs98sem.pdf> 
 
--
Mike
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030519/6f0a216c/attachment.html
From cgodfrey at epnet.com  Mon May 19 09:13:38 2003
From: cgodfrey at epnet.com (cgodfrey86)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Grammar Inheritance - can this apply to lexers?
Message-ID: <baavri+3a5b@eGroups.com>

Hello,

Can grammar inheritance apply to lexers?

class UserLexer extends Lexer;

....
class LiteralLexer extends UserLexer;

....

If have definitions such as this in the same file, I get error
panic: You may only have one lexer per grammar file: class 
LiteralLexer

If I separate into 2 files, the second file does not recognize the 
first lexer class- is there a way to reference the class in the 
grammar file?

error: grammar UserLexer not defined

Thanks In Advance


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon May 19 09:17:56 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Grammar Inheritance - can this apply to lexe
	rs?
Message-ID: <170826586F3BD511910D0200C110AAA8054023D7@memail03.bco-home.com>

Inheritence is implemented by merging files together, so you may only use
inheritence from separate .g files.

To see a working example check out the gcc translation kit
www.codetransform.com/gcc.html

Monty

-----Original Message-----
From: cgodfrey86 [mailto:cgodfrey@epnet.com] 
Sent: Monday, May 19, 2003 9:14 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Grammar Inheritance - can this apply to lexers?


Hello,

Can grammar inheritance apply to lexers?

class UserLexer extends Lexer;

....
class LiteralLexer extends UserLexer;

....

If have definitions such as this in the same file, I get error
panic: You may only have one lexer per grammar file: class 
LiteralLexer

If I separate into 2 files, the second file does not recognize the 
first lexer class- is there a way to reference the class in the 
grammar file?

error: grammar UserLexer not defined

Thanks In Advance


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From cgodfrey at epnet.com  Mon May 19 09:38:09 2003
From: cgodfrey at epnet.com (cgodfrey86)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Re: Grammar Inheritance - can this apply to lexe rs?
In-Reply-To: <170826586F3BD511910D0200C110AAA8054023D7@memail03.bco-home.com>
Message-ID: <bab19i+b2d3@eGroups.com>

Thanks for your help.

I downloaded the grammar file from here as an example. When I try to 
generate class files from the grammar file  gnucparser.g, I see the 
following errors:

Can these errors then be ignored, or is there something I need to 
resolve in the make?

ANTLR Parser Generator   Version 2.7.2   1989-2003 jGuru.com
error: grammar StdCLexer not defined
error: grammar StdCParser not defined

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Inheritence is implemented by merging files together, so you may 
only use
> inheritence from separate .g files.
> 
> To see a working example check out the gcc translation kit
> www.codetransform.com/gcc.html
> 
> Monty
> 
> -----Original Message-----
> From: cgodfrey86 [mailto:cgodfrey@e...] 
> Sent: Monday, May 19, 2003 9:14 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Grammar Inheritance - can this apply to 
lexers?
> 
> 
> Hello,
> 
> Can grammar inheritance apply to lexers?
> 
> class UserLexer extends Lexer;
> 
> ....
> class LiteralLexer extends UserLexer;
> 
> ....
> 
> If have definitions such as this in the same file, I get error
> panic: You may only have one lexer per grammar file: class 
> LiteralLexer
> 
> If I separate into 2 files, the second file does not recognize the 
> first lexer class- is there a way to reference the class in the 
> grammar file?
> 
> error: grammar UserLexer not defined
> 
> Thanks In Advance
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon May 19 10:15:32 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] High level semantic analysis
Message-ID: <170826586F3BD511910D0200C110AAA8054023DA@memail03.bco-home.com>

You can use JBurg to do the matching & optimization type stuff.  See Ter's
lecture http://www.cs.usfca.edu/~parrt/course/652/labs/jburg.html.

Not sure about how to link in the theorem proving aspect of that stuff
though.  RML as described seems like a somewhat incomplete beast judging
from the thesis on the open source modelica implementation.  I couldn't find
too much written about it, maybe I was looking in the wrong places.  I guess
I need an example a bit more compelling than addition to see what the
advantages of RML are.

Monty

-----Original Message-----
From: Tiller, Michael (M.M.) [mailto:mtiller@ford.com] 
Sent: Monday, May 19, 2003 5:28 AM
To: 'antlr-interest@yahoogroups.com'
Subject: [antlr-interest] High level semantic analysis


I'm not much of an expert on building compilers, but I came across something
that I thought was quite interesting and I was wondering if anyone here
would care to comment on the applicability of these ideas to ANTLR.
Specifically, I recognize the the treewalker functionality in the ANTLR is
very nice way to explore and translate ASTs.  I was wondering if anybody is
interested in adding some higher-level functionality like what is described
in this report:

http://www.modelica.org/papers/scs98sem.pdf

--
Mike


Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mtiller at ford.com  Mon May 19 10:51:05 2003
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] High level semantic analysis
Message-ID: <AF02884D0976D311A014009027A8F1FB1FD54DE4@na1fcm10.dearborn.ford.com>

Hmmm...The JBurg stuff doesn't really appear to address what I was getting
at.  I wasn't talking about code generation (in fact, I have no interest at
all in code generation).

Let me explain my interest in this.  I'm working with this language,
Modelica, and I want to develop tools for analyzing the code.  There isn't
so much a code generation phase as an "instantiation" phase where the
complex AST is "flattened" into a much simpler (and less general) version by
resolving lots of "modifications".  Let me give you a simple example:

model RLC_Circuit
  Resistor R1(R=15);
  Resistor R2(R=5000);
  Capacitor C(C=100e-6);
  Inductor L(L=100e-3);
  VoltageSource Vs;
  Ground g;
equation
  connect(vs.n,g.ground);
  connect(vs.p,L.p);
  connect(L.n,R1.p);
  connect(L.n,R2.p);
  connect(R1.n,C.p);
  connect(C.n,g.ground);
  connect(R2.n,g.ground);
end RLC_Circuit;

Such a model, combined with component models written in a similar way, e.g.

model Resistor
  import Modelica.SIunits;
  parameter SIunits.Resistance R=300;
  ElectricalPin p, n;
equation
  R*p.i = p.v-n.v;
  pi+n.i = 0;
end Resistor;

Should ultimately get me to a flattened model (as output) that simplifies
all this structure down to:

model RLC2
  import Modelica.SIunits;

  parameter SIunits.Resistance R1=15;
  parameter SIunits.Resistance R2=5000;
  parameter SIunits.Capacitance C=100e-6;
  parameter SIunits.Inductance L=100e-3;

  SIunits.Voltage V_a, V_b, V_c;
  SIunits.Current i_V, i_R1, i_R2, i_C, i_L;
equation
  V_a = if time>=1 then 1.0 else 0; // From the VoltageSource model
  L*der(i_L) = V_a - V_b; // From the inductor model
  R1*i_R1 = V_b - V_c; // From the resistor model
  i_C = C*der(V_c); // From the capacitor model
  R2*i_R2 = V_b; // From the other resistor model
  i_V - i_L = 0; // Kirchoff's current law
  i_L - i_R1 - i_R2 = 0; // Kirchoff's current law
  i_R1 - i_C = 0; // Kirchoff's current law
end RLC2;

So this last model would be the output after what is formally called the
"instantiation" process (i.e. to create an instance of the RLC_Circuit
model).  On the surface, this might seem like a pretty simple elaboration or
expansion process, but there are lots of features I haven't shown here
(think C++ templates) and lots of different types of classes and objects
with detailed semantics.  The result is that you have to program lots of
rules that govern this instantiation process.

I'm currently trying to leverage some work that another group is doing
(called Open Source Modelica) since I am neither an expert in building
compilers nor paid to do this kind of thing anyway.  They are the ones using
RML.  RML looks pretty cool and powerful because it seems more declarative.
I think of it, perhaps incorrectly, as being more PROLOG like.  It appears
that you simply state semantic rules (in a way that is very similar to what
is in the Modelica specification) and it can not only use those rules for
the transformation process, but it could even identify dubious sets of rules
(I suppose, I don't know for sure).  It seems like it would fit naturally
into the whole ANTLR philosophy of developing high-level capabilities for
the compiler development process.  It seems to me that it is something of a
META-tree walker.

Like I said, this seems really cool and useful (and the declarative aspect
is very much in the spirit of the language I'm applying it to, i.e.
Modelica).  It struck me that perhaps people know of other similar tools
that integrate better with ANTLR or that perhaps this would stimulate some
thinking about how to incorporate similar features.

As it stands now, I don't really have a problem with the way I'm dealing
with this now.  I was just hoping that this kind of discussion might lead to
better integration of the ANTLR system with similar ideas in the future.

--
Mike

> -----Original Message-----
> From: mzukowski@yci.com [mailto:mzukowski@yci.com]
> Sent: Monday, May 19, 2003 1:16 PM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] High level semantic analysis
> 
> 
> You can use JBurg to do the matching & optimization type 
> stuff.  See Ter's
> lecture http://www.cs.usfca.edu/~parrt/course/652/labs/jburg.html.
> 
> Not sure about how to link in the theorem proving aspect of that stuff
> though.  RML as described seems like a somewhat incomplete 
> beast judging
> from the thesis on the open source modelica implementation.  
> I couldn't find
> too much written about it, maybe I was looking in the wrong 
> places.  I guess
> I need an example a bit more compelling than addition to see what the
> advantages of RML are.
> 
> Monty
> 
> -----Original Message-----
> From: Tiller, Michael (M.M.) [mailto:mtiller@ford.com] 
> Sent: Monday, May 19, 2003 5:28 AM
> To: 'antlr-interest@yahoogroups.com'
> Subject: [antlr-interest] High level semantic analysis
> 
> 
> I'm not much of an expert on building compilers, but I came 
> across something
> that I thought was quite interesting and I was wondering if 
> anyone here
> would care to comment on the applicability of these ideas to ANTLR.
> Specifically, I recognize the the treewalker functionality in 
> the ANTLR is
> very nice way to explore and translate ASTs.  I was wondering 
> if anybody is
> interested in adding some higher-level functionality like 
> what is described
> in this report:
> 
> http://www.modelica.org/papers/scs98sem.pdf
> 
> --
> Mike
> 
> 
> Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Mon May 19 11:18:09 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Re: High level semantic analysis
In-Reply-To: <170826586F3BD511910D0200C110AAA8054023DA@memail03.bco-home.com>
Message-ID: <bab751+d8iu@eGroups.com>

My take on this paper is that they are basically translating a 
domain-specific logic language to a procedural one, and that there is 
nothing special here.  At least they used ANTLR (in its PCCTS 
incarnation) for the implementation even if they mention lex and yacc 
in figure 2.

As far as the theorem-proving part of this goes, most of these use the 
"resolution" approach found in any good computer logic text (an intro 
to Prolog would probably discuss this).

As far as better tree rewrite support goes, that is planned for ANTLR 
3.  I haven't yet figured out whether JBURG is useful for this or not: 
 the BURG algorithm works on binary trees, and I have not had the time 
to see if ANTLR syntax trees (abstract syntax trees describe the 
grammar specification; ANTLR syntax trees replace parse trees and 
should probably be labeled "concrete syntax trees" or just "syntax 
trees") can be easily mapped to the binary formalism.  If it can, it 
should be possible to use a set of BURG rules to generate a tree 
rewrite grammar instead of specifying the rewrite manually.

--Loring


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> You can use JBurg to do the matching & optimization type stuff.  See 
Ter's
> lecture http://www.cs.usfca.edu/~parrt/course/652/labs/jburg.html.
> 
> Not sure about how to link in the theorem proving aspect of that 
stuff
> though.  RML as described seems like a somewhat incomplete beast 
judging
> from the thesis on the open source modelica implementation.  I 
couldn't find
> too much written about it, maybe I was looking in the wrong places.  
I guess
> I need an example a bit more compelling than addition to see what 
the
> advantages of RML are.
> 
> Monty
> 
> -----Original Message-----
> From: Tiller, Michael (M.M.) [mailto:mtiller@f...] 
> Sent: Monday, May 19, 2003 5:28 AM
> To: 'antlr-interest@yahoogroups.com'
> Subject: [antlr-interest] High level semantic analysis
> 
> 
> I'm not much of an expert on building compilers, but I came across 
something
> that I thought was quite interesting and I was wondering if anyone 
here
> would care to comment on the applicability of these ideas to ANTLR.
> Specifically, I recognize the the treewalker functionality in the 
ANTLR is
> very nice way to explore and translate ASTs.  I was wondering if 
anybody is
> interested in adding some higher-level functionality like what is 
described
> in this report:
> 
> http://www.modelica.org/papers/scs98sem.pdf
> 
> --
> Mike
> 
> 
> Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mtiller at ford.com  Mon May 19 11:57:49 2003
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Re: High level semantic analysis
Message-ID: <AF02884D0976D311A014009027A8F1FB1FD54DE6@na1fcm10.dearborn.ford.com>

> -----Original Message-----
> From: lgcraymer [mailto:lgc@mail1.jpl.nasa.gov]
> Subject: [antlr-interest] Re: High level semantic analysis
> 
> 
> My take on this paper is that they are basically translating a 
> domain-specific logic language to a procedural one, and that there is 
> nothing special here.  At least they used ANTLR (in its PCCTS 
> incarnation) for the implementation even if they mention lex and yacc 
> in figure 2.

I was confused by this assessment for a moment.  When I first read this, I thought you were talking about RML.  I'm assuming that here you are talking about Modelica (i.e. the language that is being parsed in that paper).  As an aside, I would point out that Modelica is not a "logic language" really.  It is a declarative language (like PROLOG) but it doesn't describe logical relationships (at least exclusively).  It is primarily used to describe differential-algebraic equations...but that is somewhat off the topic.

Modelica wasn't the reason I pointed out the paper.  I was more interested in highlighting the rule based semantic analysis facilitated by the RML language discussed in the later parts of the paper.

(BTW, the group that wrote that paper is now using ANTLR 2.7.x)

> As far as the theorem-proving part of this goes, most of 
> these use the "resolution" approach found in any good computer logic text (an intro 
> to Prolog would probably discuss this).

Maybe I'm not very enlightened about all this, but this seems like a pretty useful feature to incorporate into a compiler tool.  I agree that this is just applying rules and this is not novel.  But, just because it isn't novel doesn't mean it isn't useful.  It strikes me a bit like saying "ANTLR...that's just a recursive descent parser like you'd find described in any intro text on parsing".  Sure, the concept isn't "new" but that doesn't mean the implementation is trivial.

> As far as better tree rewrite support goes, that is planned for ANTLR 3.

My point was not to bring up the topic of tree rewriting (useful as it is), but to bring up this topic of being able to incorporate semantic details with the same high-level approach that we handle lexing, parsing and tree walking.

> --Loring

--
Mike


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon May 19 09:45:23 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Re: Grammar Inheritance - can this apply to 
	lexe rs?
Message-ID: <170826586F3BD511910D0200C110AAA8054023D9@memail03.bco-home.com>

Did you use the makefile?  If not at least look into it to see how to run
antlr with it:

java antlr.Tool -glib "StdCParser.g" GnuCParser.g

It sounds like you didn't have the -glib option specified.

Monty

-----Original Message-----
From: cgodfrey86 [mailto:cgodfrey@epnet.com] 
Sent: Monday, May 19, 2003 9:38 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Grammar Inheritance - can this apply to lexe
rs?


Thanks for your help.

I downloaded the grammar file from here as an example. When I try to 
generate class files from the grammar file  gnucparser.g, I see the 
following errors:

Can these errors then be ignored, or is there something I need to 
resolve in the make?

ANTLR Parser Generator   Version 2.7.2   1989-2003 jGuru.com
error: grammar StdCLexer not defined
error: grammar StdCParser not defined

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Inheritence is implemented by merging files together, so you may
only use
> inheritence from separate .g files.
> 
> To see a working example check out the gcc translation kit 
> www.codetransform.com/gcc.html
> 
> Monty
> 
> -----Original Message-----
> From: cgodfrey86 [mailto:cgodfrey@e...]
> Sent: Monday, May 19, 2003 9:14 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Grammar Inheritance - can this apply to 
lexers?
> 
> 
> Hello,
> 
> Can grammar inheritance apply to lexers?
> 
> class UserLexer extends Lexer;
> 
> ....
> class LiteralLexer extends UserLexer;
> 
> ....
> 
> If have definitions such as this in the same file, I get error
> panic: You may only have one lexer per grammar file: class
> LiteralLexer
> 
> If I separate into 2 files, the second file does not recognize the
> first lexer class- is there a way to reference the class in the 
> grammar file?
> 
> error: grammar UserLexer not defined
> 
> Thanks In Advance
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tfga at terra.com.br  Mon May 19 14:54:46 2003
From: tfga at terra.com.br (Thiago F.G. Albuquerque)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Nondeterminism between alts 1 and 2 of
  block...
In-Reply-To: <E31F39A8-89B9-11D7-8705-000393BB647E@jguru.com>
References: <5.1.0.14.1.20030518182948.00a8a450@pop.bsb.terra.com.br>
Message-ID: <5.1.0.14.1.20030519062556.00a8d150@pop.bsb.terra.com.br>

At 22:22 18/05/03 -0700, you wrote:
>For now, I'd use syntactic predicates...

I fixed it like this:

I set k=1 in the parser and modified the grammar:

exp : ID ("(") => func_call
       | (variable "=") => assignment
       | logical_exp
       ;

Nondeterminism errors appeared in lots of other places in the grammar, but 
all of them could be corrected in the same way.

Thank you, for your help, Terrence. I am sorry if I seemed a bit rude in my 
previous message.

Thiago

>Terence
>
>On Sunday, May 18, 2003, at 02:42  PM, Thiago F.G. Albuquerque wrote:
>
> > At 13:14 18/05/03 -0700, you wrote:
> >> Hi.  You've correctly analyzed this as a Human. :)  Unfortunately, for
> >> the moment, ANTLR generates linear approximate k=2 lookahead not the
> >> real thing (which has sequence information).  This is a weakness of
> >> the
> >> parsing strategy not your understanding of LL(k).  Sorry.
> >>
> >> I'm actually working on the analysis stuff at the moment (full LL(k)
> >> and semantic predicate hoisting). :)
> >>
> >> Ter
> >
> > Ok, thank you for your answer. But how can I fix this? Is there a
> > workaround? I need to write my parser. This example I sent is a
> > simplification of a larger grammar I am working on (a project for
> > school).
> > Here's an excerpt of the original grammar:
> >
> > exp : func_call
> >        | (variable "=") => assignment
> >        | logical_exp
> >        ;
> >
> > logical_exp : rel_exp (("||" | "&&" | "!") rel_exp)*
> >              ;
> >
> > rel_exp : add_exp (rel_op add_exp)*
> >          ;
> >
> > rel_op : "<" | "<=" | ">" | ">=" | "==" | "!="
> >         ;
> >
> > add_exp : mul_exp (( "+" | "-") mul_exp)*
> >          ;
> >
> > mul_exp : atom (( "*" | "/" | "%" ) atom)*
> >          ;
> >
> > atom : const
> >       | variable
> >       | "(" exp ")"
> >       ;
> >
> > In this grammar I cannot colapse 'exp' and 'atom' into one rule.
> >
> > What should I do?
> >
> > TIA,
> > Thiago


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Mon May 19 16:56:07 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Nondeterminism between alts 1 and 2 of block...
In-Reply-To: <5.1.0.14.1.20030519062556.00a8d150@pop.bsb.terra.com.br>
Message-ID: <754B1DCE-8A55-11D7-AA73-000393BB647E@jguru.com>


On Monday, May 19, 2003, at 02:54  PM, Thiago F.G. Albuquerque wrote:

> At 22:22 18/05/03 -0700, you wrote:
>> For now, I'd use syntactic predicates...
>
> I fixed it like this:
>
> I set k=1 in the parser and modified the grammar:
>
> exp : ID ("(") => func_call

Hmm...that doesn't quite make sense.  I'd do

(ID "(")=> func_call

instead

:)

>        | (variable "=") => assignment
>        | logical_exp
>        ;
>
> Nondeterminism errors appeared in lots of other places in the grammar, 
> but
> all of them could be corrected in the same way.
>
> Thank you, for your help, Terrence. I am sorry if I seemed a bit rude 
> in my
> previous message.

Not at all :)  Very polite as is everyone on this list :)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Mon May 19 21:48:40 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Re: High level semantic analysis
In-Reply-To: <AF02884D0976D311A014009027A8F1FB1FD54DE6@na1fcm10.dearborn.ford.com>
Message-ID: <bacc38+d4n0@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Tiller, Michael (M.M.)" 
<mtiller@f...> wrote:
 
> Modelica wasn't the reason I pointed out the paper.  I was more 
interested in highlighting the rule based semantic analysis 
facilitated by the RML language discussed in the later parts of the 
paper.
> 

The "rule based semantic analysis" (as far as I understand from the 
paper) appears to be fairly specific to this application domain.  
Interesting, but not obviously general.

ANTLR's approach to the general problem is syntax tree 
transformation (possibly multiple passes) followed by an "output" 
pass which might generate an internal form that might not be tree 
structured or might produce code.  Ter is working towards an "output 
template" approach for this final pass--details are still being 
worked out.  I think that their "rule based semantic analysis" could 
be effected through one or more transformation passes, one or more 
linking passes (tree walks which build links connecting AST nodes), 
and a resolution pass to "decorate the tree" (attribute grammar 
terminology).

> (BTW, the group that wrote that paper is now using ANTLR 2.7.x)
> 
> > As far as the theorem-proving part of this goes, most of 
> > these use the "resolution" approach found in any good computer 
logic text (an intro 
> > to Prolog would probably discuss this).
> 
> Maybe I'm not very enlightened about all this, but this seems like 
a pretty useful feature to incorporate into a compiler tool.  I 
agree that this is just applying rules and this is not novel.  But, 
just because it isn't novel doesn't mean it isn't useful.  It 
strikes me a bit like saying "ANTLR...that's just a recursive 
descent parser like you'd find described in any intro text on 
parsing".  Sure, the concept isn't "new" but that doesn't mean the 
implementation is trivial.

Resolution theorem proving is useful, and it would be nice to figure 
out how to use it as a generic capability.  I have no clue as to how 
to do that.

> > As far as better tree rewrite support goes, that is planned for 
ANTLR 3.
> 
> My point was not to bring up the topic of tree rewriting (useful 
as it is), but to bring up this topic of being able to incorporate 
semantic details with the same high-level approach that we handle 
lexing, parsing and tree walking.

Semantic analysis is spread across the parser grammar (which usually 
organized according to high-level semantics--declarations versus 
functions, etc.), tree transformation (which translates one high-
level semantics paradigm to another), tree walks to link related 
elements (builds a graph), and output (which instantiates low-level 
semantics).  We're still solving the output problem--I think that 
Ter is close with his output templates, but he still has a few 
details to work out.

--Loring

> > --Loring
> 
> --
> Mike


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From a_j_key at yahoo.com  Tue May 20 01:33:23 2003
From: a_j_key at yahoo.com (a_j_key)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] How to differentiate between ML_COMMENT and JAVADOC?
Message-ID: <bacp8j+uclo@eGroups.com>

Hi!

I've tried the examples from antlr/doc and I'm stuck with following:
I got the rules:
JAVADOC_OPEN: "/**" {selector.push("doclexer");}ML_COMMENT
	:	"/*"
		(options {generateAmbigWarnings=false;}
		:{ LA(2)!='/' }? '*'
		|	'\r' '\n'		{newline();}
		|	'\r'			{newline();}
		|	'\n'			{newline();}
		|	~('*'|'\n'|'\r')
		)*
		"*/"
		{$setType(Token.SKIP);}
	;
(both taken from the java.g/javadoc.g).

Now, the lexer doesn't recognize Javadoc and runs into ml_comment...

Could someone give me a hint?

Second question: In my main method, how can I use filter and selector 
in one parser? Do I need two parsers?

Thank you in advance,

A.J.Key



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mtiller at ford.com  Tue May 20 05:51:42 2003
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Re: High level semantic analysis
Message-ID: <AF02884D0976D311A014009027A8F1FB1FD54DED@na1fcm10.dearborn.ford.com>

> From: lgcraymer [mailto:lgc@mail1.jpl.nasa.gov]
> Subject: [antlr-interest] Re: High level semantic analysis
>
> ANTLR's approach to the general problem is syntax tree 
> transformation (possibly multiple passes) followed by an "output" 
> pass which might generate an internal form that might not be tree 
> structured or might produce code.  Ter is working towards an "output 
> template" approach for this final pass--details are still being 
> worked out.  I think that their "rule based semantic analysis" could 
> be effected through one or more transformation passes, one or more 
> linking passes (tree walks which build links connecting AST nodes), 
> and a resolution pass to "decorate the tree" (attribute grammar 
> terminology).

Is there any built-in support for the "linking" and "decorating" you talk about.  Being relatively inexperienced in this aspect, I found this to be one of the more confusing parts.  It was easy for me to see how the lexer, the parser and even the tree walker worked (and why they existed).

ANTLR was great for getting to the point where all the information was nicely arranged in a tree.  What I struggle with is "Now what?".  For example, one of the first passes I could imagine doing on my AST would be type/name lookup.  Once I've done that, I'd like to keep that information around.  I'm assuming that is what you mean by linking.

Let me give you a quick example.  A simple Modelica package might look like this:

package Ford
  package Types
    type Torque = Real(quantity="Torque", units="N.m");
    type Pressure = Real(quantity="Pressure", units="N/m^2");
  end Types;

  model Test1
    Ford.Types.Torque tau;
    Types.Pressure P;
  end Test1;
end Ford;


In order to elaborate the model Test1, I need to find the information associated with the variables "tau" and "P".  Note that while the definition of "Torque" and "Pressure" are in the same place (Ford.Types.*), I can reference them in different ways (Ford.Types.Torque vs. Types.Torque) but the semantics are the same in either case.

So, I have an AST node for my declaration that probably looks something like this:

#(DECL #(TYPENAME "Ford" "Types" "Torque") #(COMPONENT "tau"))

Somewhere else in my AST I have something like:

#(PACKAGE "Ford" ... #(PACKAGE "Types" #(TYPE "Torque" ...) #(TYPE "Pressure")))

What I'd like to be able to do is walk the tree and find every TYPENAME and then somehow link, as you say, that #(TYPENAME ...) node back to the #(TYPE "Torque") node.

BUT, what I don't want is this:

#(DECL #(TYPENAME "Ford" "Types" "Torque" #(TYPE "Torque" ...)) #(COMPONENT "tau"))

right?  This would change my tree grammar.  I want links, but I don't want ANTLR to pay attention to those links for the purposes of tree walking.

Does this sound right or is my mental model of all this wrong?

Assuming I am right (which is a big assumption), I didn't see anything in ANTLR that supports these kinds of associations.  Am I missing something?  I know I can define my own AST node types and I could add some data structures to support linking but there were two reasons I didn't do this:

1) I figured if this is what I'm supposed to do then everybody would have to do it and ANTLR would support it somehow.  The fact that I didn't see this functionality in ANTLR led me to think perhaps I wasn't going about this the correct way.

2) I was quite concerned about how all this linking and associating would impact the garbage collection system for AST nodes.  To be honest, I find the whole process of defining a new AST type pretty complicated.  There seem to be so many different AST types and I never know when to use one or the other (e.g when do I use my AST type and when do I use RefAST, etc).

Now I'm not really blaming ANTLR for either of these issues.  I'm just saying that for me this was somewhat intimidating and so I was hesitant to get all tangled up in implementing these details.

These are just some things to consider in the development of ANTLR 3 that might make the tool easier and more approachable to people like me.

--
Mike

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue May 20 11:32:15 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Re: High level semantic analysis
Message-ID: <170826586F3BD511910D0200C110AAA8054023F4@memail03.bco-home.com>

See the GCC grammar www.codetransform.com/gcc.html for some ideas which
aren't completely hooked up:

CSymbolTable.java--Parser add entries and pushes/pops scope.  It currently
only looks up entries to resolve whether something is a typedef name or not.
But the symbol table is complete and could be used to do other things.

TNode.java--has support for double linking (so a node can find its parent)
which is currently unused.  To use it you would first build the complete
tree and then call doubleLink().  TNode Also has a slot for the defNode, the
idea being to have a tree pass which annotates every use of a variable with
the definition to make it easy to find the definition without having to keep
track of the current scope.  It also has a Hashtable of attributes so you
could put anything you want in for the node.  That is how you decorate trees
in ANTLR.

Note that the above stuff is best for analysis but for transformation you
might have extra bookkeeping to do, particularly if you are deleting or
changing definitions.  

In answer to question 1) ANTLR isn't in the business of bookkeeping, it just
does lexing/parsing/tree parsing/tree building.  Everything else is up to
you.  Want more information in your Tokens or ASTs?  Just subclass and put
it there.  Need a symbol table?  Make one.  

2) AST is just an interface, right?  In java that's easy, I subclass
CommonToken.java because that has most of the functionality I need.  For C++
I'll defer to other experts such as Ric or
http://www.imada.sdu.dk/%7Emorling/.

It seems ANTLR needs more examples/articles/tutorials of proper use of
symbol tables and use/def information.  I'll put on my list to write up some
like this for the GCC grammar.

More on symbol tables http://www.bearcave.com/software/java/java_symtab.html
and articles from
http://developer.java.sun.com/developer/technicalArticles/Parser/ --
specifically
http://developer.java.sun.com/developer/technicalArticles/Parser/SeriesPt4/

Monty


-----Original Message-----
From: Tiller, Michael (M.M.) [mailto:mtiller@ford.com] 
Sent: Tuesday, May 20, 2003 5:52 AM
To: 'antlr-interest@yahoogroups.com'
Subject: RE: [antlr-interest] Re: High level semantic analysis


> From: lgcraymer [mailto:lgc@mail1.jpl.nasa.gov]
> Subject: [antlr-interest] Re: High level semantic analysis
>
> ANTLR's approach to the general problem is syntax tree
> transformation (possibly multiple passes) followed by an "output" 
> pass which might generate an internal form that might not be tree 
> structured or might produce code.  Ter is working towards an "output 
> template" approach for this final pass--details are still being 
> worked out.  I think that their "rule based semantic analysis" could 
> be effected through one or more transformation passes, one or more 
> linking passes (tree walks which build links connecting AST nodes), 
> and a resolution pass to "decorate the tree" (attribute grammar 
> terminology).

Is there any built-in support for the "linking" and "decorating" you talk
about.  Being relatively inexperienced in this aspect, I found this to be
one of the more confusing parts.  It was easy for me to see how the lexer,
the parser and even the tree walker worked (and why they existed).

ANTLR was great for getting to the point where all the information was
nicely arranged in a tree.  What I struggle with is "Now what?".  For
example, one of the first passes I could imagine doing on my AST would be
type/name lookup.  Once I've done that, I'd like to keep that information
around.  I'm assuming that is what you mean by linking.

Let me give you a quick example.  A simple Modelica package might look like
this:

package Ford
  package Types
    type Torque = Real(quantity="Torque", units="N.m");
    type Pressure = Real(quantity="Pressure", units="N/m^2");
  end Types;

  model Test1
    Ford.Types.Torque tau;
    Types.Pressure P;
  end Test1;
end Ford;


In order to elaborate the model Test1, I need to find the information
associated with the variables "tau" and "P".  Note that while the definition
of "Torque" and "Pressure" are in the same place (Ford.Types.*), I can
reference them in different ways (Ford.Types.Torque vs. Types.Torque) but
the semantics are the same in either case.

So, I have an AST node for my declaration that probably looks something like
this:

#(DECL #(TYPENAME "Ford" "Types" "Torque") #(COMPONENT "tau"))

Somewhere else in my AST I have something like:

#(PACKAGE "Ford" ... #(PACKAGE "Types" #(TYPE "Torque" ...) #(TYPE
"Pressure")))

What I'd like to be able to do is walk the tree and find every TYPENAME and
then somehow link, as you say, that #(TYPENAME ...) node back to the #(TYPE
"Torque") node.

BUT, what I don't want is this:

#(DECL #(TYPENAME "Ford" "Types" "Torque" #(TYPE "Torque" ...)) #(COMPONENT
"tau"))

right?  This would change my tree grammar.  I want links, but I don't want
ANTLR to pay attention to those links for the purposes of tree walking.

Does this sound right or is my mental model of all this wrong?

Assuming I am right (which is a big assumption), I didn't see anything in
ANTLR that supports these kinds of associations.  Am I missing something?  I
know I can define my own AST node types and I could add some data structures
to support linking but there were two reasons I didn't do this:

1) I figured if this is what I'm supposed to do then everybody would have to
do it and ANTLR would support it somehow.  The fact that I didn't see this
functionality in ANTLR led me to think perhaps I wasn't going about this the
correct way.

2) I was quite concerned about how all this linking and associating would
impact the garbage collection system for AST nodes.  To be honest, I find
the whole process of defining a new AST type pretty complicated.  There seem
to be so many different AST types and I never know when to use one or the
other (e.g when do I use my AST type and when do I use RefAST, etc).

Now I'm not really blaming ANTLR for either of these issues.  I'm just
saying that for me this was somewhat intimidating and so I was hesitant to
get all tangled up in implementing these details.

These are just some things to consider in the development of ANTLR 3 that
might make the tool easier and more approachable to people like me.

--
Mike

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Tue May 20 11:47:46 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Re: High level semantic analysis
In-Reply-To: <AF02884D0976D311A014009027A8F1FB1FD54DED@na1fcm10.dearborn.ford.com>
Message-ID: <badt8i+goj0@eGroups.com>

Yahoo did weird things with my first attempted response.  Assuming 
that went into the bit bucket, I'll try again.


--- In antlr-interest@yahoogroups.com, "Tiller, Michael (M.M.)" 
<mtiller@f...> wrote:
> > From: lgcraymer [mailto:lgc@m...]
> > Subject: [antlr-interest] Re: High level semantic analysis
> >
> > ANTLR's approach to the general problem is syntax tree 
> > transformation (possibly multiple passes) followed by an "output" 
> > pass which might generate an internal form that might not be tree 
> > structured or might produce code.  Ter is working towards an 
"output 
> > template" approach for this final pass--details are still being 
> > worked out.  I think that their "rule based semantic analysis" 
could 
> > be effected through one or more transformation passes, one or more 
> > linking passes (tree walks which build links connecting AST 
nodes), 
> > and a resolution pass to "decorate the tree" (attribute grammar 
> > terminology).
> 
> Is there any built-in support for the "linking" and "decorating" you 
talk about.  Being relatively inexperienced in this aspect, I found 
this to be one of the more confusing parts.  It was easy for me to see 
how the lexer, the parser and even the tree walker worked (and why 
they existed).

Yes and no.  The support is through user-developed AST classes; 
"decorating" is simply the assignment of attributes, and linking is 
the setting of reference pointers.  Ter and I have talked about adding 
some target-language-independent attribute syntax to ANTLR so that AST 
classes would be automatically defined.  Right now, all of this has to 
be done in action code.

> 
> ANTLR was great for getting to the point where all the information 
was nicely arranged in a tree.  What I struggle with is "Now what?".  
For example, one of the first passes I could imagine doing on my AST 
would be type/name lookup.  Once I've done that, I'd like to keep that 
information around.  I'm assuming that is what you mean by linking.

... (example deleted)
Type/name information is usually kept in a symbol table as a routine 
optimization.  For Java, look at java.util.Hashtable; for C++, check 
out the "map" template in the standard library.

By linking, I mean setting pointers to link one AST node to another in 
a separate part of the tree.  The idea is to generate a graph which 
can be navigated efficiently for the analysis and output generation 
desired.

> Assuming I am right (which is a big assumption), I didn't see 
anything in ANTLR that supports these kinds of associations.  Am I 
missing something?  I know I can define my own AST node types and I 
could add some data structures to support linking but there were two 
reasons I didn't do this:
>
> 1) I figured if this is what I'm supposed to do then everybody would 
have to do it and ANTLR would support it somehow.  The fact that I 
didn't see this functionality in ANTLR led me to think perhaps I 
wasn't going about this the correct way.

ANTLR started out with the lex/yacc view that access to target 
language actions was essential to the specification process.  ANTLR is 
 still evolving from there.  For many things, ANTLR does provide 
support, but that support is through target language action code.  
ANTLR 3 will get a little further away from that than ANTLR2.

> 2) I was quite concerned about how all this linking and associating 
would impact the garbage collection system for AST nodes.  To be 
honest, I find the whole process of defining a new AST type pretty 
complicated.  There seem to be so many different AST types and I never 
know when to use one or the other (e.g when do I use my AST type and 
when do I use RefAST, etc).

Performance cost is not high; you can either choose to use 
reference-counted pointers for the linking or bypass this if dangling 
pointers are not going to be a problem.

> 
> Now I'm not really blaming ANTLR for either of these issues.  I'm 
just saying that for me this was somewhat intimidating and so I was 
hesitant to get all tangled up in implementing these details.
> 
> These are just some things to consider in the development of ANTLR 3 
that might make the tool easier and more approachable to people like 
me.

Part of this is that ANTLR documentation, while excellent for a public 
domain package, is not quite what one would get with a mature 
commercial product.  The documentation will improve:  Ter is actively 
teaching, and students are very useful for debugging documentation.  
We are envisioning a "language translator's workbench" for ANTLR 
3--that may help as well.  Mostly, I think that your difficulties are 
just learning curve-related--problems look different from a language 
processing perspective, and it takes a while to adjust to the new 
perspective.  That said, I still wish that I could figure out 
some generic insight from the paper you referenced and how it could be 
applied to ANTLR.

--Loring

> --
> Mike


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From imolanet at yahoo.it  Tue May 20 12:07:58 2003
From: imolanet at yahoo.it (Patrik Suzzi)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] help building c++ 2 c# translator
Message-ID: <baduee+br5j@eGroups.com>

Hi ! i'm Patrik, from Italy.

I've a big problem: I dont know how to build a c++ to c# translator.

I ougth to build translator in order to write thesis. I know that 
with ANTLR is not a problem. But I never see computational languages 
course. 

I've some questions: 

(1) How i can build c++ to c# simple translator using ANTLR ?
(2) Can I obtain some UML diagrams for understand ANTLR ?

Can anyone help me ?

Thanks: Patrik Suzzi


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Tue May 20 16:05:39 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Re: help building c++ 2 c# translator
In-Reply-To: <baduee+br5j@eGroups.com>
Message-ID: <baecc3+ddla@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Patrik Suzzi" <imolanet@y...> 
wrote:
> Hi ! i'm Patrik, from Italy.
> 
> I've a big problem: I dont know how to build a c++ to c# translator.

That is a big problem.

> I ougth to build translator in order to write thesis. I know that 
> with ANTLR is not a problem. But I never see computational languages 
> course. 
> 
> I've some questions: 
> 
> (1) How i can build c++ to c# simple translator using ANTLR ?

Start with the C++ grammar at www.antlr.org.  It will need work to 
bring it up to the C++ standard.  That may be a significant 
undertaking.

> (2) Can I obtain some UML diagrams for understand ANTLR ?

Not as far as I know.  Take a look at the documentation on the ANTLR 
web site.  Also look at some of the papers (under "Articles").  Also 
read a good intro to compilers book to get a good feel for EBNF 
grammars and read a book on building a recursive descent compiling to 
get a feel for what compilers are about.

> Can anyone help me ?

This is a pretty friendly group.  If you do decide to tackle 
translation of C++, then keep in touch on this group.  There would be 
considerable interest in tracking the project--there are a lot of 
people who would like a complete C++ front end for analysis tools.

Good luck!

--Loring

> Thanks: Patrik Suzzi


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From zhangcharles at yahoo.com  Tue May 20 18:50:32 2003
From: zhangcharles at yahoo.com (zhangcharles)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Re: Does there exist a Java parser for C++
In-Reply-To: <b9td63+dgi0@eGroups.com>
Message-ID: <baem18+7ghn@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Brett Crawley" <brett@c...> 
wrote:
> if however you are trying to parse a C++ file from a java app you 
> need the grammar files from:
> 
> http://www.antlr.org/grammars/cpp
> 

Thanks for replying my message. My question was about how to let 
ANTLR spit out a java parser for parsing C++ code. The grammar on 
Antlr website seems to spit out C++ parser parsing C++ code. Does 
anyone know if there is effort for writing a Java version? 

Charles

Middleware research group
U. Toronto


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From zhangcharles at yahoo.com  Tue May 20 18:58:55 2003
From: zhangcharles at yahoo.com (zhangcharles)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Line information and AST
Message-ID: <baemgv+juqs@eGroups.com>

Hi, ANLTR experts, how do I get the line information when walking a 
syntax tree, taking Java grammar as an exmaple? Thanks.

Charles


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From greenj at ix.netcom.com  Tue May 20 19:40:04 2003
From: greenj at ix.netcom.com (John Allen Green)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] lecture audio versus video
In-Reply-To: <4D708BF6-87C2-11D7-AF4C-000393BB647E@jguru.com>
References: <4D708BF6-87C2-11D7-AF4C-000393BB647E@jguru.com>
Message-ID: <79363448.1053459604@localhost>

I have an opinion, not about Real's codecs I'm afraid, but about Real
Player in general. Many people I know refuse to install Real because of the
"spyware" junk it installs on your system. It's somewhat of a nightmare to
get around it, too.

I wouldn't suggest that you *don't* provide Real streaming video, but I
would ask that you keep in mind that there may be plenty of people who
don't/won't have Real on their computers... please leave us with an
alternative. I imagine that as long as the audios are available, the unReal
among us will be happy.

Cheers,
John


--On 5/16/2003 10:17 AM -0700 Terence Parr wrote:

> Folks,
> 
> Some of you have been listening to the lecture audios from my language 
> course this Spring and I'm wondering if that is satisfactory or would 
> streaming video be much better.
> 
> Apparently, I can get a realnetworks.com server for linux that will 
> push out video for free since it would be such low user/bandwidth 
> volume.  I can probably get the university to send a human to each 
> class to video and then I can edit the DV tape on my Mac and push to a 
> linux server.  Anybody know anything about this or have opinions about 
> real's codecs?
> 
> Heck, I might just do some random lectures about various antlr topics 
> and post them.
> 
> Terence
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Co-founder, http://www.peerscope.com link sharing, pure-n-simple
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
>  





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Tue May 20 19:41:56 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] lecture audio versus video
In-Reply-To: <79363448.1053459604@localhost>
Message-ID: <C9D0A23C-8B35-11D7-AA73-000393BB647E@jguru.com>

That's good info.  Yeah, i'm thinking Apple's open source streaming 
server software would be good for .mpgs :)

Terence

On Tuesday, May 20, 2003, at 07:40  PM, John Allen Green wrote:

> I have an opinion, not about Real's codecs I'm afraid, but about Real
> Player in general. Many people I know refuse to install Real because 
> of the
> "spyware" junk it installs on your system. It's somewhat of a 
> nightmare to
> get around it, too.
>
> I wouldn't suggest that you *don't* provide Real streaming video, but I
> would ask that you keep in mind that there may be plenty of people who
> don't/won't have Real on their computers... please leave us with an
> alternative. I imagine that as long as the audios are available, the 
> unReal
> among us will be happy.
>
> Cheers,
> John
>
>
> --On 5/16/2003 10:17 AM -0700 Terence Parr wrote:
>
>> Folks,
>>
>> Some of you have been listening to the lecture audios from my language
>> course this Spring and I'm wondering if that is satisfactory or would
>> streaming video be much better.
>>
>> Apparently, I can get a realnetworks.com server for linux that will
>> push out video for free since it would be such low user/bandwidth
>> volume.  I can probably get the university to send a human to each
>> class to video and then I can edit the DV tape on my Mac and push to a
>> linux server.  Anybody know anything about this or have opinions about
>> real's codecs?
>>
>> Heck, I might just do some random lectures about various antlr topics
>> and post them.
>>
>> Terence
>> --
>> Co-founder, http://www.jguru.com
>> Creator, ANTLR Parser Generator: http://www.antlr.org
>> Co-founder, http://www.peerscope.com link sharing, pure-n-simple
>> Lecturer in Comp. Sci., University of San Francisco
>>
>>
>>
>>
>> Your use of Yahoo! Groups is subject to 
>> http://docs.yahoo.com/info/terms/
>>
>>
>>
>
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mtiller at ford.com  Wed May 21 05:35:13 2003
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Re: High level semantic analysis
Message-ID: <AF02884D0976D311A014009027A8F1FB1FD54DFD@na1fcm10.dearborn.ford.com>

> From: mzukowski@yci.com [mailto:mzukowski@yci.com]
> Subject: RE: [antlr-interest] Re: High level semantic analysis
> 
> TNode.java--has support for double linking (so a node can 
> find its parent)
> which is currently unused.  To use it you would first build 
> the complete
> tree and then call doubleLink().  TNode Also has a slot for 
> the defNode, the
> idea being to have a tree pass which annotates every use of a 
> variable with
> the definition to make it easy to find the definition without 
> having to keep
> track of the current scope.  It also has a Hashtable of 
> attributes so you
> could put anything you want in for the node.  That is how you 
> decorate trees
> in ANTLR.

For ANTLR 3, it would be nice (for people like me) if a "rich" AST node type was included that implemented references to parent nodes and some kind of hash or map structure for annotating the AST with additional information.  I'm sure I can figure out how to write my own, but it seems like this would be a really common need and having a built-in type would just spare everyone the exercise of implementing such a node.

--
Mike

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From andrew at adersoftware.com  Wed May 21 05:47:04 2003
From: andrew at adersoftware.com (Andrew Deren)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] lecture audio versus video
In-Reply-To: <79363448.1053459604@localhost>
Message-ID: <20030521080468.SM01088@andrew>

I would say the same thing. I don't have real player installed and don't
plan on installing one because of problems mentioned below. I don't have
problems using quicktime.
Andrew

-----Original Message-----
From: John Allen Green [mailto:greenj@ix.netcom.com] 
Sent: Tuesday, May 20, 2003 9:40 PM
To: antlr-interest@yahoogroups.com

I have an opinion, not about Real's codecs I'm afraid, but about Real
Player in general. Many people I know refuse to install Real because of the
"spyware" junk it installs on your system. It's somewhat of a nightmare to
get around it, too.

I wouldn't suggest that you *don't* provide Real streaming video, but I
would ask that you keep in mind that there may be plenty of people who
don't/won't have Real on their computers... please leave us with an
alternative. I imagine that as long as the audios are available, the unReal
among us will be happy.

Cheers,
John


--On 5/16/2003 10:17 AM -0700 Terence Parr wrote:

> Folks,
> 
> Some of you have been listening to the lecture audios from my language 
> course this Spring and I'm wondering if that is satisfactory or would 
> streaming video be much better.
> 
> Apparently, I can get a realnetworks.com server for linux that will 
> push out video for free since it would be such low user/bandwidth 
> volume.  I can probably get the university to send a human to each 
> class to video and then I can edit the DV tape on my Mac and push to a 
> linux server.  Anybody know anything about this or have opinions about 
> real's codecs?
> 
> Heck, I might just do some random lectures about various antlr topics 
> and post them.
> 
> Terence
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Co-founder, http://www.peerscope.com link sharing, pure-n-simple
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
>  





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 






 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Wed May 21 07:24:55 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Re: High level semantic analysis
In-Reply-To: <AF02884D0976D311A014009027A8F1FB1FD54DFD@na1fcm10.dearborn.ford.com>
Message-ID: <20030521142455.41690.qmail@web20419.mail.yahoo.com>

Or one person could just write such an AST and make it
publicly available as an extension to Antlr...


--- "Tiller, Michael (M.M.)" <mtiller@ford.com> wrote:
> > From: mzukowski@yci.com [mailto:mzukowski@yci.com]
> > Subject: RE: [antlr-interest] Re: High level
> semantic analysis
> > 
> > TNode.java--has support for double linking (so a
> node can 
> > find its parent)
> > which is currently unused.  To use it you would
> first build 
> > the complete
> > tree and then call doubleLink().  TNode Also has a
> slot for 
> > the defNode, the
> > idea being to have a tree pass which annotates
> every use of a 
> > variable with
> > the definition to make it easy to find the
> definition without 
> > having to keep
> > track of the current scope.  It also has a
> Hashtable of 
> > attributes so you
> > could put anything you want in for the node.  That
> is how you 
> > decorate trees
> > in ANTLR.
> 
> For ANTLR 3, it would be nice (for people like me)
> if a "rich" AST node type was included that
> implemented references to parent nodes and some kind
> of hash or map structure for annotating the AST with
> additional information.  I'm sure I can figure out
> how to write my own, but it seems like this would be
> a really common need and having a built-in type
> would just spare everyone the exercise of
> implementing such a node.
> 
> --
> Mike
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo.
http://search.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Wed May 21 07:44:02 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Line information and AST
Message-ID: <170826586F3BD511910D0200C110AAA8054023FE@memail03.bco-home.com>

You will have to preserve line info, which doesn't happen by default.  Look
at the gcc grammar www.codetransform.com/gcc.html for an example of how to
do that.  Specifically at the TNode.java and its initialize() methods which
take the line number out of the Token or AST it is being initialized from.

Monty

-----Original Message-----
From: zhangcharles [mailto:zhangcharles@yahoo.com] 
Sent: Tuesday, May 20, 2003 6:59 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Line information and AST


Hi, ANLTR experts, how do I get the line information when walking a 
syntax tree, taking Java grammar as an exmaple? Thanks.

Charles


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rustydstone at yahoo.com  Wed May 21 08:50:14 2003
From: rustydstone at yahoo.com (rustydstone)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] A way to find all subtrees of a particular type?
Message-ID: <bag77m+etjl@eGroups.com>

Hi,

Is there a way to find all subtrees of a particular type? For example,
let's say I'd like to find all subtrees related to multiplication
operation (*) regardless of what is being multiplied.

I was looking at findAllPartial() but it appears that it will not do that.

Any ideas? Thanks





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Wed May 21 10:22:04 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] A way to find all subtrees of a particular type?
In-Reply-To: <bag77m+etjl@eGroups.com>
Message-ID: <BDAA003A-8BB0-11D7-AA73-000393BB647E@jguru.com>


On Wednesday, May 21, 2003, at 08:50  AM, rustydstone wrote:

> Hi,
>
> Is there a way to find all subtrees of a particular type? For example,
> let's say I'd like to find all subtrees related to multiplication
> operation (*) regardless of what is being multiplied.
>
> I was looking at findAllPartial() but it appears that it will not do 
> that.

Won't that find all single nodes?

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rustydstone at yahoo.com  Wed May 21 10:55:57 2003
From: rustydstone at yahoo.com (rustydstone)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Re: A way to find all subtrees of a particular type?
In-Reply-To: <BDAA003A-8BB0-11D7-AA73-000393BB647E@jguru.com>
Message-ID: <bagejd+41tp@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> wrote:
> Won't that find all single nodes?

Not sure I understand.

Let me rephrase the question: I have a somewhat complex tree, some
nodes of that tree are multiplication nodes (e.g. 4 * 5). I'd like to
be able to find ALL multiplication nodes of the tree. I can obviously
manually walk the tree and look for the nodes of certain type but I
was hoping there would be a simpler way.

Thanks



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Wed May 21 11:10:31 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Re: A way to find all subtrees of a particular type?
In-Reply-To: <bagejd+41tp@eGroups.com>
Message-ID: <824C4D3E-8BB7-11D7-AA73-000393BB647E@jguru.com>

If you find all single MULT nodes have you not found precisely what 
you're looking for?

Ter

On Wednesday, May 21, 2003, at 10:55  AM, rustydstone wrote:

> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> wrote:
>> Won't that find all single nodes?
>
> Not sure I understand.
>
> Let me rephrase the question: I have a somewhat complex tree, some
> nodes of that tree are multiplication nodes (e.g. 4 * 5). I'd like to
> be able to find ALL multiplication nodes of the tree. I can obviously
> manually walk the tree and look for the nodes of certain type but I
> was hoping there would be a simpler way.
>
> Thanks
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mrosgood at yahoo.com  Wed May 21 11:26:16 2003
From: mrosgood at yahoo.com (Jason Osgood)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Re: dfa-based lexers versus top-down antlr lexers
In-Reply-To: <66544CD5-775B-11D7-BA37-000393BB647E@jguru.com>
Message-ID: <baggc8+n9hk@eGroups.com>

Hi Terence Parr-


Sorry for the delayed reply.

> I'd like thoughts also from people with *no* experience 
> using DFA-based tools like lex/flex.  Do ANTLR 
> lexers seem "natural"?

I started with ANTLR, so don't know any better.  And the expression of
a BNF in an ANTLR grammar seems straightforward.  

The only reason I'm learning about DFA and LALR now is because the
interactive parsing algorithms are mostly built on top of lex/yacc. 
(I still don't know enough to apply the ideas to LL.)


My needs are simple.  In designing a language from scratch, I have the
luxury making it easy for both humans and tools.  In other words, when
my ANTLR grammar got weird, I changed the language to make things
simple again.  Hopefully I got the balance right.

But your language translation stuff is a whole other world.  I don't
envy you.  And while I consider "embedded" languages (e.g. SQL within
JavaScript within HTML) to be a sign of failure, it's apparently
unavoidable.  

So I encourage you to make the tools you need to make your own work
easier.  The rest of us will draft off your lead. <grin>


Cheers, Jason Osgood / Seattle WA


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rustydstone at yahoo.com  Wed May 21 12:28:52 2003
From: rustydstone at yahoo.com (rustydstone)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Re: A way to find all subtrees of a particular type?
In-Reply-To: <824C4D3E-8BB7-11D7-AA73-000393BB647E@jguru.com>
Message-ID: <bagk1k+eut6@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> wrote:

> If you find all single MULT nodes have you not found precisely what 
> you're looking for?
> 
> Ter

You are absolutely right. Thanks


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rustydstone at yahoo.com  Wed May 21 14:26:00 2003
From: rustydstone at yahoo.com (rustydstone)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Re: A way to find all subtrees of a particular type?
In-Reply-To: <bagk1k+eut6@eGroups.com>
Message-ID: <bagqt8+4rrb@eGroups.com>

> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> wrote:
> 
> > If you find all single MULT nodes have you not found precisely what 
> > you're looking for?
> > 
> > Ter
> 
> You are absolutely right. Thanks

There's one small problem though. When creating a target AST, one must
know both target's type and text, otherwise findAllPartial() won't
work. In case of MULT I know both. In other cases, I do know the
target's type but not text.

Any ideas? Thanks



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Wed May 21 15:18:26 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Re: A way to find all subtrees of a particular type?
In-Reply-To: <bagqt8+4rrb@eGroups.com>
Message-ID: <bagtvi+c2vp@eGroups.com>

There is a quick fix.  Redefine "equals" in your base AST class so 
that some text string--say ""--matches anything.  That way, "equals" 
has the default behavior in all but the one special case and you get 
the match behavior that you want by using the special string when 
building an AST for the findAllPartial().

--Loring



--- In antlr-interest@yahoogroups.com, "rustydstone" 
<rustydstone@y...> wrote:
> > --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> 
wrote:
> > 
> > > If you find all single MULT nodes have you not found precisely 
what 
> > > you're looking for?
> > > 
> > > Ter
> > 
> > You are absolutely right. Thanks
> 
> There's one small problem though. When creating a target AST, one 
must
> know both target's type and text, otherwise findAllPartial() won't
> work. In case of MULT I know both. In other cases, I do know the
> target's type but not text.
> 
> Any ideas? Thanks


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Wed May 21 16:18:53 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] ANTLR & equals()/Equals() [Re: A way to find all subtrees of a particular type?]
In-Reply-To: <bagtvi+c2vp@eGroups.com>
Message-ID: <bah1gt+gb7j@eGroups.com>

> There is a quick fix.  Redefine "equals" in your base AST class so 
> that some text string--say ""--matches anything.

<SNIP>

Sorry for hijacking this thread but this reminded of one of the items 
on my ANTLR to-do list (no, seriously):

"Moan about ANTLR's use of equals() in Java/C++ (and Equals() in C#)."

We recently had a situation where we wished to consider Tokens/AST-
Nodes equal only if they had the same type, text and came from the 
same file. Simply re-defining equals/Equals for our Token/AST 
subclass would have been the natural approach however, that broke 
many other little bits since ANTLR generated code sometimes depends 
on it's (re-)definition of equality.

Can we move ANTLR's notion of equality to some other method - perhaps 
hasSameTypeAndText()/HasSameTypeAndText()- so that equals()/Equals() 
can once again assume their intended meanings please?

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From xdji at mail.ustc.edu.cn  Wed May 21 21:58:41 2003
From: xdji at mail.ustc.edu.cn (xdjicn)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] problem of using default parameters in parser rules
Message-ID: <bahle1+j5ga@eGroups.com>

Hi,
   I want to use default parameters in parser rules,for example:

parseRule1 [int iPos = 0]
:
.....

but the codes generated by ANTLR redefined the default parameter:

//in .hpp
void Parser::parserRule1 (int iPos = 0);      //valid

//in .cpp
void Parser::parserRule1 (int iPos = 0)    
{
  ...
}
//which is invalid
Does anybody know how to solve the problem?
Thanks a lot!


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Wed May 21 22:05:56 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] ANTLR & equals()/Equals() [Re: A way to find all subtrees of a particular type?]
In-Reply-To: <bah1gt+gb7j@eGroups.com>
Message-ID: <bahlrk+tvjc@eGroups.com>

In other words, you wanted a context-dependent equality for ASTs.  
That strikes me as a really bad idea--AST nodes represent elements 
in context-free grammars and ANTLR manipulates these as context-free 
entities unless the programmer specifies the context dependency via 
semantic predicates.  The "text and type" approach is much more 
natural for the problem domain.

--Loring


--- In antlr-interest@yahoogroups.com, "micheal_jor" 
<open.zone@v...> wrote:
> > There is a quick fix.  Redefine "equals" in your base AST class 
so 
> > that some text string--say ""--matches anything.
> 
> <SNIP>
> 
> Sorry for hijacking this thread but this reminded of one of the 
items 
> on my ANTLR to-do list (no, seriously):
> 
> "Moan about ANTLR's use of equals() in Java/C++ (and Equals() in 
C#)."
> 
> We recently had a situation where we wished to consider Tokens/AST-
> Nodes equal only if they had the same type, text and came from the 
> same file. Simply re-defining equals/Equals for our Token/AST 
> subclass would have been the natural approach however, that broke 
> many other little bits since ANTLR generated code sometimes 
depends 
> on it's (re-)definition of equality.
> 
> Can we move ANTLR's notion of equality to some other method - 
perhaps 
> hasSameTypeAndText()/HasSameTypeAndText()- so that equals()/Equals
() 
> can once again assume their intended meanings please?
> 
> Cheers,
> 
> Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From vergaraanto at yahoo.it  Thu May 22 01:02:54 2003
From: vergaraanto at yahoo.it (vergaraanto)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Help me to build a Intepreter
Message-ID: <bai07e+jdct@eGroups.com>

The only think that I know is how build a parser and Lexer with ANTLR.
Can you help me to try a tutorial on AST?
I want to build a Intepreter Pascal-like (I Know that Pascal is a 
Compiler... but i wanto do an Interpreter)
Tanks


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Thu May 22 10:43:42 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Re: dfa-based lexers versus top-down antlr lexers
In-Reply-To: <baggc8+n9hk@eGroups.com>
Message-ID: <EDD58731-8C7C-11D7-AA73-000393BB647E@jguru.com>

Hi Jason,

Thanks for the thoughts. :)  I'll keep everyone up to date as I poke 
around. :)

Ter

On Wednesday, May 21, 2003, at 11:26  AM, Jason Osgood wrote:

> Hi Terence Parr-
>
>
> Sorry for the delayed reply.
>
>> I'd like thoughts also from people with *no* experience
>> using DFA-based tools like lex/flex.  Do ANTLR
>> lexers seem "natural"?
>
> I started with ANTLR, so don't know any better.  And the expression of
> a BNF in an ANTLR grammar seems straightforward.
>
> The only reason I'm learning about DFA and LALR now is because the
> interactive parsing algorithms are mostly built on top of lex/yacc.
> (I still don't know enough to apply the ideas to LL.)
>
>
> My needs are simple.  In designing a language from scratch, I have the
> luxury making it easy for both humans and tools.  In other words, when
> my ANTLR grammar got weird, I changed the language to make things
> simple again.  Hopefully I got the balance right.
>
> But your language translation stuff is a whole other world.  I don't
> envy you.  And while I consider "embedded" languages (e.g. SQL within
> JavaScript within HTML) to be a sign of failure, it's apparently
> unavoidable.
>
> So I encourage you to make the tools you need to make your own work
> easier.  The rest of us will draft off your lead. <grin>
>
>
> Cheers, Jason Osgood / Seattle WA
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Thu May 22 10:42:42 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:38 2004
Subject: [antlr-interest] Help me to build a Intepreter
In-Reply-To: <bai07e+jdct@eGroups.com>
Message-ID: <CA4A4F4E-8C7C-11D7-AA73-000393BB647E@jguru.com>

http://www.cs.usfca.edu/~parrt/course/652/lectures/interp.html

and

http://www.cs.usfca.edu/~parrt/course/652/labs/interp.html

will be of interest.

Terence

On Thursday, May 22, 2003, at 01:02  AM, vergaraanto wrote:

> The only think that I know is how build a parser and Lexer with ANTLR.
> Can you help me to try a tutorial on AST?
> I want to build a Intepreter Pascal-like (I Know that Pascal is a
> Compiler... but i wanto do an Interpreter)
> Tanks
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From andrew at adersoftware.com  Thu May 22 12:48:02 2003
From: andrew at adersoftware.com (Andrew Deren)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Help me to build a Intepreter
In-Reply-To: <bai07e+jdct@eGroups.com>
Message-ID: <200305221505910.SM01104@andrew>

I have also build a small interpreter with antlr using C# and java. You can
download the source code from http://www.adersoftware.com/?page=compilers
Andrew

-----Original Message-----
From: vergaraanto [mailto:vergaraanto@yahoo.it] 
Sent: Thursday, May 22, 2003 3:03 AM
To: antlr-interest@yahoogroups.com

The only think that I know is how build a parser and Lexer with ANTLR.
Can you help me to try a tutorial on AST?
I want to build a Intepreter Pascal-like (I Know that Pascal is a 
Compiler... but i wanto do an Interpreter)
Tanks


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 






 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rustydstone at yahoo.com  Thu May 22 12:51:17 2003
From: rustydstone at yahoo.com (rustydstone)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Replacing a tree node with a new custom class node
Message-ID: <baj9nl+245p@eGroups.com>

Hi,

How can I replace a a tree node with a new custom class node? I tried 
  astBeingReplaced.initialize(customClassAst)
but that does not change the CLASS of the node being replaced?

Any ideas? Thanks




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rustydstone at yahoo.com  Thu May 22 18:18:28 2003
From: rustydstone at yahoo.com (rustydstone)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Re: Replacing a tree node with a new custom class node
In-Reply-To: <baj9nl+245p@eGroups.com>
Message-ID: <bajst4+q7s3@eGroups.com>

--- In antlr-interest@yahoogroups.com, "rustydstone"
<rustydstone@y...> wrote:
[...]

Never mind. I think I resolved it with setTokenTypeASTNodeType()

Thanks



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From antlrlist at yahoo.com  Fri May 23 05:40:44 2003
From: antlrlist at yahoo.com (antlrlist)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Re: High level semantic analysis
In-Reply-To: <170826586F3BD511910D0200C110AAA8054023F4@memail03.bco-home.com>
Message-ID: <bal4sc+p52e@eGroups.com>


I had a problem similar to lgcraymer's while implementing my 
languaje, but I did not found any already-made AST class suitable for 
my needs: I needed a lookup table most of the time, but I'm modeling 
simple inheritance and polymorphism, so I could not use it for 
managing methods. This is, hashtables are not enought for modelling 
something like this:

class A {...}

class B
{
   method m(A a) // what to insert in the hashTable? "m(A)"?
   { ... }
}

class C extends A {...}

main()
{
    create B b;
    create C c;
    b.m(c); // could not find "m(C)"
}

So what I have done is abstract a little more and have a "Scope" 
class. A Scope can deal correctly with simple names and method calls, 
once the inheritance structure is present.

This classes, and many others (like an AST with lexical information, 
or utilities for parsing the command line) are structured in a 
package that I called antlraux. I'll release it when it is ready.

Cya,

Enrique


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> See the GCC grammar www.codetransform.com/gcc.html for some ideas 
which
> aren't completely hooked up:
> 
> CSymbolTable.java--Parser add entries and pushes/pops scope.  It 
currently
> only looks up entries to resolve whether something is a typedef 
name or not.
> But the symbol table is complete and could be used to do other 
things.
> 
> TNode.java--has support for double linking (so a node can find its 
parent)
> which is currently unused.  To use it you would first build the 
complete
> tree and then call doubleLink().  TNode Also has a slot for the 
defNode, the
> idea being to have a tree pass which annotates every use of a 
variable with
> the definition to make it easy to find the definition without 
having to keep
> track of the current scope.  It also has a Hashtable of attributes 
so you
> could put anything you want in for the node.  That is how you 
decorate trees
> in ANTLR.
> 
> Note that the above stuff is best for analysis but for 
transformation you
> might have extra bookkeeping to do, particularly if you are 
deleting or
> changing definitions.  
> 
> In answer to question 1) ANTLR isn't in the business of 
bookkeeping, it just
> does lexing/parsing/tree parsing/tree building.  Everything else is 
up to
> you.  Want more information in your Tokens or ASTs?  Just subclass 
and put
> it there.  Need a symbol table?  Make one.  
> 
> 2) AST is just an interface, right?  In java that's easy, I subclass
> CommonToken.java because that has most of the functionality I 
need.  For C++
> I'll defer to other experts such as Ric or
> http://www.imada.sdu.dk/%7Emorling/.
> 
> It seems ANTLR needs more examples/articles/tutorials of proper use 
of
> symbol tables and use/def information.  I'll put on my list to 
write up some
> like this for the GCC grammar.
> 
> More on symbol tables 
http://www.bearcave.com/software/java/java_symtab.html
> and articles from
> http://developer.java.sun.com/developer/technicalArticles/Parser/ --
> specifically
> 
http://developer.java.sun.com/developer/technicalArticles/Parser/Serie
sPt4/
> 
> Monty
> 
> 
> -----Original Message-----
> From: Tiller, Michael (M.M.) [mailto:mtiller@f...] 
> Sent: Tuesday, May 20, 2003 5:52 AM
> To: 'antlr-interest@yahoogroups.com'
> Subject: RE: [antlr-interest] Re: High level semantic analysis
> 
> 
> > From: lgcraymer [mailto:lgc@m...]
> > Subject: [antlr-interest] Re: High level semantic analysis
> >
> > ANTLR's approach to the general problem is syntax tree
> > transformation (possibly multiple passes) followed by an "output" 
> > pass which might generate an internal form that might not be tree 
> > structured or might produce code.  Ter is working towards 
an "output 
> > template" approach for this final pass--details are still being 
> > worked out.  I think that their "rule based semantic analysis" 
could 
> > be effected through one or more transformation passes, one or 
more 
> > linking passes (tree walks which build links connecting AST 
nodes), 
> > and a resolution pass to "decorate the tree" (attribute grammar 
> > terminology).
> 
> Is there any built-in support for the "linking" and "decorating" 
you talk
> about.  Being relatively inexperienced in this aspect, I found this 
to be
> one of the more confusing parts.  It was easy for me to see how the 
lexer,
> the parser and even the tree walker worked (and why they existed).
> 
> ANTLR was great for getting to the point where all the information 
was
> nicely arranged in a tree.  What I struggle with is "Now what?".  
For
> example, one of the first passes I could imagine doing on my AST 
would be
> type/name lookup.  Once I've done that, I'd like to keep that 
information
> around.  I'm assuming that is what you mean by linking.
> 
> Let me give you a quick example.  A simple Modelica package might 
look like
> this:
> 
> package Ford
>   package Types
>     type Torque = Real(quantity="Torque", units="N.m");
>     type Pressure = Real(quantity="Pressure", units="N/m^2");
>   end Types;
> 
>   model Test1
>     Ford.Types.Torque tau;
>     Types.Pressure P;
>   end Test1;
> end Ford;
> 
> 
> In order to elaborate the model Test1, I need to find the 
information
> associated with the variables "tau" and "P".  Note that while the 
definition
> of "Torque" and "Pressure" are in the same place (Ford.Types.*), I 
can
> reference them in different ways (Ford.Types.Torque vs. 
Types.Torque) but
> the semantics are the same in either case.
> 
> So, I have an AST node for my declaration that probably looks 
something like
> this:
> 
> #(DECL #(TYPENAME "Ford" "Types" "Torque") #(COMPONENT "tau"))
> 
> Somewhere else in my AST I have something like:
> 
> #(PACKAGE "Ford" ... #(PACKAGE "Types" #(TYPE "Torque" ...) #(TYPE
> "Pressure")))
> 
> What I'd like to be able to do is walk the tree and find every 
TYPENAME and
> then somehow link, as you say, that #(TYPENAME ...) node back to 
the #(TYPE
> "Torque") node.
> 
> BUT, what I don't want is this:
> 
> #(DECL #(TYPENAME "Ford" "Types" "Torque" #(TYPE "Torque" ...)) #
(COMPONENT
> "tau"))
> 
> right?  This would change my tree grammar.  I want links, but I 
don't want
> ANTLR to pay attention to those links for the purposes of tree 
walking.
> 
> Does this sound right or is my mental model of all this wrong?
> 
> Assuming I am right (which is a big assumption), I didn't see 
anything in
> ANTLR that supports these kinds of associations.  Am I missing 
something?  I
> know I can define my own AST node types and I could add some data 
structures
> to support linking but there were two reasons I didn't do this:
> 
> 1) I figured if this is what I'm supposed to do then everybody 
would have to
> do it and ANTLR would support it somehow.  The fact that I didn't 
see this
> functionality in ANTLR led me to think perhaps I wasn't going about 
this the
> correct way.
> 
> 2) I was quite concerned about how all this linking and associating 
would
> impact the garbage collection system for AST nodes.  To be honest, 
I find
> the whole process of defining a new AST type pretty complicated.  
There seem
> to be so many different AST types and I never know when to use one 
or the
> other (e.g when do I use my AST type and when do I use RefAST, etc).
> 
> Now I'm not really blaming ANTLR for either of these issues.  I'm 
just
> saying that for me this was somewhat intimidating and so I was 
hesitant to
> get all tangled up in implementing these details.
> 
> These are just some things to consider in the development of ANTLR 
3 that
> might make the tool easier and more approachable to people like me.
> 
> --
> Mike
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From abreneliere at telys.com  Fri May 23 06:02:04 2003
From: abreneliere at telys.com (=?iso-8859-1?Q?Anthony_Breneli=E8re?=)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Lexer documentation, problem with context-sensitive lexers in C++
Message-ID: <000601c3212b$823b4aa0$c5646464@lavaserver>

In the documentioion, there is the following exemple, to show how the
context-sentsitive lexer can be implemented :
 
BEGIN_TABLE
    :   '[' {this.inTable=true;} // enter table context
    ;
 
ROW_SEP
    :   {this.inTable}? "----"
    ;
 
END_TABLE
    :   ']' {this.inTable=false;} // exit table context
    ;
 
.. but in C++ how can the ?inTable? boolean be initialized ? I should
have to change the lexer constructor, but it?s part of the generated
code.
 
Anyone has an idea ?
 
Cordially,
Anthony

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030523/2475bda3/attachment.html
From klaren at cs.utwente.nl  Fri May 23 06:33:50 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Lexer documentation, problem with context-sensitive lexers in C++
In-Reply-To: <000601c3212b$823b4aa0$c5646464@lavaserver>; from abreneliere@telys.com on Fri, May 23, 2003 at 03:02:04PM +0200
References: <000601c3212b$823b4aa0$c5646464@lavaserver>
Message-ID: <20030523153350.A7661@cs.utwente.nl>

On Fri, May 23, 2003 at 03:02:04PM +0200, Anthony Brenelire wrote:
> .. but in C++ how can the inTable boolean be initialized ? I should
> have to change the lexer constructor, but its part of the generated
> code.

You can add a custom constructor with overloading (see the C++ template
grammar in the docs). Or you can add a initialization method to the lexer
which you call before parser.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Wo das Chaos auf die Ordnung trifft, gewinnt meist das Chaos, weil es
  besser organisiert ist. --- Friedrich Nietzsche


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rustydstone at yahoo.com  Fri May 23 08:08:56 2003
From: rustydstone at yahoo.com (rustydstone)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] findAllPartial() - Why is that?
Message-ID: <baldi8+3p0d@eGroups.com>

Hi,

Consider the following expression: (a_1=true) || (a_2=true) || (a_3=false)

I'm using findAllPartial() to find all nodes in the expression above
that match empty "=" node.

The following is the result of the search:

i = 0 ( = a_1 true ) ( = a_2 true )
i = 1 ( = a_2 true )
i = 2 ( = a_3 false )


Why is the result for i = 0 is "( = a_1 true ) ( = a_2 true )" and not
just "( = a_1 true )"?

Thanks




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mikhail at augustmail.com  Fri May 23 07:02:51 2003
From: mikhail at augustmail.com (TheSamiM)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Re: C++: Exception on loading literals.
In-Reply-To: <20030516100453.R15744@cs.utwente.nl>
Message-ID: <bal9mb+ga5d@eGroups.com>

On the off chance that this will help someone:

The problem is indeed with the DLL build, going to a static library 
took care  of the issue. I suspect it has to do with the allocators 
for the templates being in a different memory space than the 
templates themsevles, but that's a theory I don't have time to test.

Going the static library route works, so long as the code generation 
for the lib is the same as the code generation for the application 
using it. (IE: both single threaded, or both multi threaded etc.)

Also SP5 for  VS 6 is at:
http://msdn.microsoft.com/vstudio/downloads/updates/sp/vs6/sp5/default
.aspx

HTH.




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Fri May 23 09:11:11 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] findAllPartial() - Why is that?
In-Reply-To: <baldi8+3p0d@eGroups.com>
Message-ID: <2B79B0C3-8D39-11D7-AA73-000393BB647E@jguru.com>


On Friday, May 23, 2003, at 08:08  AM, rustydstone wrote:

> Hi,
>
> Consider the following expression: (a_1=true) || (a_2=true) || 
> (a_3=false)
>
> I'm using findAllPartial() to find all nodes in the expression above
> that match empty "=" node.
>
> The following is the result of the search:
>
> i = 0 ( = a_1 true ) ( = a_2 true )
> i = 1 ( = a_2 true )
> i = 2 ( = a_3 false )
>
>
> Why is the result for i = 0 is "( = a_1 true ) ( = a_2 true )" and not
> just "( = a_1 true )"?

That's a print out issue.  The node is (= a_1 true) but the sibling is 
also shown when you print with say toStringList().

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Fri May 23 09:29:08 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Re: C++: Exception on loading literals.
In-Reply-To: <bal9mb+ga5d@eGroups.com>; from mikhail@augustmail.com on Fri, May 23, 2003 at 02:02:51PM -0000
References: <20030516100453.R15744@cs.utwente.nl> <bal9mb+ga5d@eGroups.com>
Message-ID: <20030523182908.B7661@cs.utwente.nl>

On Fri, May 23, 2003 at 02:02:51PM -0000, TheSamiM wrote:
> The problem is indeed with the DLL build, going to a static library 
> took care  of the issue. I suspect it has to do with the allocators 
> for the templates being in a different memory space than the 
> templates themsevles, but that's a theory I don't have time to test.

I already have fixes for this stuff send in by some people (check archive).
I only need to find time to add it. Yet I have a new deadline in my project
so don't get hopes up for a swift snapshot release. :(

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I think we better split up."
  "Good idea. We can do more damage that way."
  --- Ghostbusters


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rustydstone at yahoo.com  Fri May 23 09:58:07 2003
From: rustydstone at yahoo.com (rustydstone)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Re: findAllPartial() - Why is that?
In-Reply-To: <2B79B0C3-8D39-11D7-AA73-000393BB647E@jguru.com>
Message-ID: <baljuv+rnch@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> wrote:
> That's a print out issue.  The node is (= a_1 true) but the sibling is 
> also shown when you print with say toStringList().
> 
> Ter

FWIW, I looked in the debugger and, by browsing the tree manually, I
see that there are TWO "=" nodes in the first element of the
enumeration (something like =((a_1 true) =(a_2 true)).

Thanks





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From andrei at metalanguage.com  Fri May 23 11:57:28 2003
From: andrei at metalanguage.com (uprightness_of_character)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] antlr vs. sableCC comparison
Message-ID: <balquo+d1gb@eGroups.com>

Perhaps this has been hashed to death in this group, but Yahoo Groups' 
search capabilities are not that good. 

So anyway, what are the pros and cons of the two parser generators? I 
worked with antlr some now, but I don't have much experience with 
sableCC.


Thanks!

Andrei


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Fri May 23 22:47:42 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Re: antlr vs. sableCC comparison
In-Reply-To: <balquo+d1gb@eGroups.com>
Message-ID: <ban11u+csmu@eGroups.com>

Andrei--

My reaction to SableCC has always been, "Why?", and the answer 
always seems to be "it was a good excuse for Gagnon to have fun 
writing a master's thesis".  It has less functionality than either 
ANTLR or JavaCC and was introduced after both were available.  The 
basic features of SableCC are
1.)  DFA lexing
2.)  LALR(1) parsing
3.)  Visitor-based tree walkers.
and the package made no real additions to the state-of-the-art, as 
far as I can tell.

ANTLR can do more powerful lexing than a DFA, but the DFA will win 
on performance against the current ANTLR 2--that's mainly due to the 
fact that there has never been a concentrated effort to generate 
more speed-efficient lexer code.

Predicated LL(k) (ANTLR) parsing can handle any context-free 
grammar, but LALR does not and modern versions of yacc support GLR 
parsing to get past the LALR limitation.  More to the point, actions 
execute where they are placed in ANTLR; that's not quite true in an 
LR parser.

ANTLR's tree grammar approach is more powerful than the visitor 
approach.  In fact, a visitor can be expressed as a special ANTLR 
tree (I've not tested this code, but it should work):

visitor
    :
    ( visit )+
    ;

visit
    :
    (      .
    |      #( .  ( visit )+ )
    )
    ;

--Loring

--- In antlr-interest@yahoogroups.com, "uprightness_of_character" 
<andrei@m...> wrote:
> Perhaps this has been hashed to death in this group, but Yahoo 
Groups' 
> search capabilities are not that good. 
> 
> So anyway, what are the pros and cons of the two parser 
generators? I 
> worked with antlr some now, but I don't have much experience with 
> sableCC.
> 
> 
> Thanks!
> 
> Andrei


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Sat May 24 04:19:13 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Re: antlr vs. sableCC comparison
In-Reply-To: <ban11u+csmu@eGroups.com>
Message-ID: <bankfh+36fc@eGroups.com>

--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> My reaction to SableCC has always been, "Why?", and the answer 
> always seems to be "it was a good excuse for Gagnon to have fun 
> writing a master's thesis". It has less functionality than either 
> ANTLR or JavaCC and was introduced after both were available. 

At the time he wrote SableCC, only few *LALR* generators for Java 
were around and it was yet undecided which would be the best, so he 
just tried to do something good. As you said, both ANTLR or JavaCC 
are *LL*.

> Predicated LL(k) (ANTLR) parsing can handle any context-free 
> grammar, but LALR does not and modern versions of yacc support GLR 
> parsing to get past the LALR limitation.

I think you mix something up here (or do I?). Surely neither YACC 
nor SableCC nor ANTLR can handle all context free grammars! What you 
wanted to say is any context free language, i.e. a language that can 
be described by a context free grammar, can also be described by an 
ANTLR grammar, right?

Anyway, please tell more about GLR. How does it work?

Personally, I am fan of ANTLR and LL, but still, there are some good 
reasons to choose bottom up methods. Some purists like the idea of 
describing a language completely by the means of a most human 
readable and thus natural (hopefully context free) grammar. To use 
such grammars with LL or LR methods you will have to modify them. It 
turns out that LR methods need less modification of the grammar than 
LL, which is considered valuable by some pepole. 

> ANTLR's tree grammar approach is more powerful than the visitor 
> approach.  In fact, a visitor can be expressed as a special ANTLR 
> tree (I've not tested this code, but it should work):
> 
> visitor
>     :
>     ( visit )+
>     ;
> 
> visit
>     :
>     (      .
>     |      #( .  ( visit )+ )
>     )
>     ;

I do not think that will work (maybe it does). How to decide between 
first and second alternative of rule visit?

This will do, I think (visitor rule unchanged):

visit
    :
    #( .  ( visit )* )
    ;

Oliver


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From roberto at saccon.ch  Sat May 24 04:53:24 2003
From: roberto at saccon.ch (robifofo)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Actionscript (or at least javascript) Support ??
Message-ID: <banmfk+uc3j@eGroups.com>

Hi all

I want to create a compiler for Actionscript (a javascript-like
language which is used inside the Macromedia flash player).

Has anybody done something in this direction ?
Or does at least exist somewhere a grammar file for javascript, which
is similar to actioscript ?? (I haven't found one in the distribution,
but I am new to antlr and thisis my first post to this list, so maybe
I have missed something...)

any help highly appreciated

Roberto Saccon


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From amejdi at ertonline.gr  Sat May 24 05:26:56 2003
From: amejdi at ertonline.gr (Anakreon Mejdi)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Actionscript (or at least javascript) Support
 ??
In-Reply-To: <banmfk+uc3j@eGroups.com>
References: <banmfk+uc3j@eGroups.com>
Message-ID: <3ECF6510.2070401@ertonline.gr>

robifofo wrote:
> Hi all
> 
> I want to create a compiler for Actionscript (a javascript-like
> language which is used inside the Macromedia flash player).
> 
> Has anybody done something in this direction ?
> Or does at least exist somewhere a grammar file for javascript, which
> is similar to actioscript ?? (I haven't found one in the distribution,
> but I am new to antlr and thisis my first post to this list, so maybe
> I have missed something...)
> 
> any help highly appreciated
> 
> Roberto Saccon
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
I have written one which is actually a modified version of java grammar.
The reason for writing it is parsing asp files (html, vb script, js 
script) so some modifications will be needed in order to use it.

This is not the latest version of the grammar.
On tusday I can sent the latest version.

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
header {
  package gr.omadak.leviathan.asp;
}


class JsParser extends Parser;
options {
  k = 2;
  exportVocab=Js;
  codeGenMakeSwitchThreshold = 2;
  codeGenBitsetTestThreshold = 3;
  defaultErrorHandler = false;
  buildAST = true;
}

tokens {
    ARRAY;BOOLEAN; DATE; NAN; NUMBER; OBJECT; STRING; BREAK;
    CASE; CATCH; CONTINUE; DEFAULT; DELETE; ELSE; FALSE;
    FINALLY; FOR; FUNCTION; IF; IN; INSTANCEOF; NEW; NULL;
    RETURN; SWITCH; THIS; THROW; TRUE; TRY; TYPEOF;
    UNDEFINED; VAR; VOID; WHILE; WITH;


    SLIST; ARRAY_DECLARATOR; INDEX_OP; POST_INC; POST_DEC; METHOD_CALL;
    EXPR; UNARY_MINUS; UNARY_PLUS; CASE_GROUP; ELIST; FOR_INIT;
    FOR_CONDITION;FOR_ITERATOR; EMPTY_STAT;LABELED_STAT;
  
    HTML;JS_END;EQ_HTML;
}



start_rule
  :
  (
    statement
  )*
  EOF!
  ;


identifier
  : 
  IDENTIFIER  ( DOT^ IDENTIFIER )*
  ;


compoundStatement
  : lc:LCURLY^ {#lc.setType(SLIST);}
      // include the (possibly-empty) list of statements
      (statement)*
    RCURLY!
  ;


declaration
  :
  VAR IDENTIFIER (ASSIGN expression)?
  (COMMA! IDENTIFIER (ASSIGN expression)?)*
  ;


statement
  :
  compoundStatement
  | FUNCTION^ IDENTIFIER LPAREN! argList RPAREN! statement
  | declaration SEMI!
  | expression SEMI!
  | IDENTIFIER c:COLON^ {#c.setType(LABELED_STAT);} statement
  | if_rule
  | WITH LPAREN! expression RPAREN statement
  | FOR^
      LPAREN!
      (
      (expression IN)=>
          in_statement
          |
          forInit SEMI!   // initializer
          forCond SEMI!   // condition test
          forIter         // updater
      )
      RPAREN!
      statement
  | WHILE^ LPAREN! expression RPAREN! statement
  | DO^ statement WHILE! LPAREN! expression RPAREN! SEMI!
  | BREAK^ (IDENTIFIER)? SEMI!
  | CONTINUE^ (IDENTIFIER)? SEMI!
  | RETURN^ (expression)? SEMI!
  | SWITCH^ LPAREN! expression RPAREN! LCURLY!
      ( casesGroup )*
    RCURLY!
  | tryBlock
  | THROW^ expression SEMI!
  | s:SEMI {#s.setType(EMPTY_STAT);}
  | HTML
  | EQ_HTML^ expression SEMI!
  ;


if_rule
  :
  IF^ LPAREN! expression RPAREN! statement
  (
      (ELSE)=> ELSE! statement
      |
  )
  ;


in_statement
  :
  expression IN^ expression
  ;


casesGroup
  : ( // CONFLICT: to which case group do the statements bind?
      //           ANTLR generates proper code: it groups the
      //           many "case"/"default" labels together then
      //           follows them with the statements
      options {
        warnWhenFollowAmbig = false;
      }
      :
      aCase
    )+
    caseSList
    {#casesGroup = #([CASE_GROUP, "CASE_GROUP"], #casesGroup);}
  ;


aCase
  : (CASE^ expression | DEFAULT) COLON!
  ;


caseSList
  : (statement)*
    {#caseSList = #(#[SLIST,"SLIST"],#caseSList);}
  ;


// The initializer for a for loop
forInit
    // if it looks like a declaration, it is
  : ( declaration
    // otherwise it could be an expression list...
    | expressionList
    )?
    {#forInit = #(#[FOR_INIT,"FOR_INIT"],#forInit);}
  ;


forCond
  : (expression)?
    {#forCond = #(#[FOR_CONDITION,"FOR_CONDITION"],#forCond);}
  ;


forIter
  : (expressionList)?
    {#forIter = #(#[FOR_ITERATOR,"FOR_ITERATOR"],#forIter);}
  ;


// an exception handler try/catch block
tryBlock
  : TRY^ compoundStatement
    (handler)*
    ( FINALLY^ compoundStatement )?
  ;


// an exception handler
handler
  : CATCH^ LPAREN! IDENTIFIER RPAREN! compoundStatement
  ;


expression
  : assignmentExpression
    {#expression = #(#[EXPR,"EXPR"],#expression);}
  ;


// This is a list of expressions.
expressionList
  : expression (COMMA! expression)*
    {#expressionList = #(#[ELIST,"ELIST"], expressionList);}
  ;


// assignment expression (level 13)
assignmentExpression
  : conditionalExpression
    ( ( ASSIGN^
            |   PLUS_ASSIGN^
            |   MINUS_ASSIGN^
            |   STAR_ASSIGN^
            |   DIV_ASSIGN^
            |   MOD_ASSIGN^
            |   SR_ASSIGN^
            |   BSR_ASSIGN^
            |   SL_ASSIGN^
            |   BAND_ASSIGN^
            |   BXOR_ASSIGN^
            |   BOR_ASSIGN^
            )
      assignmentExpression
    )?
  ;


// conditional test (level 12)
conditionalExpression
  : logicalOrExpression
    ( QUESTION^ assignmentExpression COLON! conditionalExpression )?
  ;


// logical or (||)  (level 11)
logicalOrExpression
  : logicalAndExpression (LOR^ logicalAndExpression)*
  ;


// logical and (&&)  (level 10)
logicalAndExpression
  : inclusiveOrExpression (LAND^ inclusiveOrExpression)*
  ;


// bitwise or non-short-circuiting or (|)  (level 9)
inclusiveOrExpression
  : exclusiveOrExpression (BOR^ exclusiveOrExpression)*
  ;


// exclusive or (^)  (level 8)
exclusiveOrExpression
  : andExpression (BXOR^ andExpression)*
  ;


// bitwise or non-short-circuiting and (&)  (level 7)
andExpression
  : equalityExpression (BAND^ equalityExpression)*
  ;


// equality/inequality (==/!=) (level 6)
equalityExpression
  : relationalExpression ((NOT_EQUAL^ | EQUAL^) relationalExpression)*
  ;


// boolean relational expressions (level 5)
relationalExpression
  : shiftExpression
    ( ( ( LT^
        | GT^
        | LE^
        | GE^
        )
        shiftExpression
      )*
    | INSTANCEOF^ type
    )
  ;


// bit shift expressions (level 4)
shiftExpression
  : additiveExpression ((SL^ | SR^ | BSR^) additiveExpression)*
  ;


// binary addition/subtraction (level 3)
additiveExpression
  : multiplicativeExpression ((PLUS^ | MINUS^) multiplicativeExpression)*
  ;


// multiplication/division/modulo (level 2)
multiplicativeExpression
  : unaryExpression ((STAR^ | DIV^ | MOD^ ) unaryExpression)*
  ;


unaryExpression
  : INC^ unaryExpression
  | DEC^ unaryExpression
  | MINUS^ {#MINUS.setType(UNARY_MINUS);} unaryExpression
  | PLUS^  {#PLUS.setType(UNARY_PLUS);} unaryExpression
  | unaryExpressionNotPlusMinus
  ;


unaryExpressionNotPlusMinus
  : BNOT^ unaryExpression
  | LNOT^ unaryExpression
  | postfixExpression
  ;


// qualified names, array expressions, method invocation, post inc/dec
postfixExpression
  :
  arrayInitilizer
  | (
  primaryExpression // start with a primary

    (
    // qualified id (id.id.id.id...) -- build the name
      DOT^ (
          IDENTIFIER
        | newExpression
        )
      // the above line needs a semantic check to make sure "class"
      //   is the _last_ qualifier.

      // an array indexing operation
    | lb:LBRACK^ {#lb.setType(INDEX_OP);} expression RBRACK!
    | lp:LPAREN^ {#lp.setType(METHOD_CALL);}
        argList
      RPAREN!
    )*

    // possibly add on a post-increment or post-decrement.
    // allows INC/DEC on too much, but semantics can check
    ( in:INC^ {#in.setType(POST_INC);}
    | de:DEC^ {#de.setType(POST_DEC);}
    | // nothing
    )
   )
  ;


arrayInitilizer
  :
  LBRACK (expression (COMMA expression)*)? RBRACK
  ;


// the basic element of an expression
primaryExpression
  : IDENTIFIER
  | newExpression
  | constant
  | TRUE
  | FALSE
  | NULL
  | UNDEFINED
  | LPAREN! assignmentExpression RPAREN!
  ;


type
  :
  ARRAY | DATE | OBJECT | STRING | NUMBER | BOOLEAN
  ;


newExpression
  : NEW^ type LPAREN! argList RPAREN!
  ;


argList
  : ( expressionList
    | /*nothing*/
      {#argList = #[ELIST,"ELIST"];}
    )
  ;


newArrayDeclarator
  : (
      // CONFLICT:
      // newExpression is a primaryExpression which can be
      // followed by an array index reference.  This is ok,
      // as the generated code will stay in this loop as
      // long as it sees an LBRACK (proper behavior)
      options {
        warnWhenFollowAmbig = false;
      }
    :
      lb:LBRACK^ {#lb.setType(ARRAY_DECLARATOR);}
        (expression)?
      RBRACK!
    )+
  ;


constant
  : NUM_INT
  | STRING_LITERAL
  | NUM_FLOAT
  ;


//----------------------------------------------------------------------------
// The JavaScript scanner
//----------------------------------------------------------------------------
class JsLexer extends Lexer;

options {
  exportVocab=Js;      // call the vocabulary "Java"
  testLiterals=false;    // don't automatically test for literals
  k=4;                   // four characters of lookahead
  filter=false;
}

{
    private int lastToken = -1;
}

// OPERATORS
QUESTION    : '?'   ;
LPAREN      : '('   ;
RPAREN      : ')'   ;
LBRACK      : '['   ;
RBRACK      : ']'   ;
LCURLY      : '{'   ;
RCURLY      : '}'   ;
COLON     : ':'   ;
COMMA     : ','   ;
//DOT     : '.'   ;
ASSIGN      : '='   ;
EQUAL     : "=="  ;
LNOT      : '!'   ;
BNOT      : '~'   ;
NOT_EQUAL   : "!="  ;
DIV       : '/'   ;
DIV_ASSIGN    : "/="  ;
PLUS      : '+'   ;
PLUS_ASSIGN   : "+="  ;
INC       : "++"  ;
MINUS     : '-'   ;
MINUS_ASSIGN  : "-="  ;
DEC       : "--"  ;
STAR      : '*'   ;
STAR_ASSIGN   : "*="  ;
MOD       : '%'   ;
MOD_ASSIGN    : "%="  ;
SR        : ">>"  ;
SR_ASSIGN   : ">>=" ;
BSR       : ">>>" ;
BSR_ASSIGN    : ">>>="  ;
GE        : ">="  ;
GT        : ">"   ;
SL        : "<<"  ;
SL_ASSIGN   : "<<=" ;
LE        : "<="  ;
LT        : '<'   ;
BXOR      : '^'   ;
BXOR_ASSIGN   : "^="  ;
BOR       : '|'   ;
BOR_ASSIGN    : "|="  ;
LOR       : "||"  ;
BAND      : '&'   ;
BAND_ASSIGN   : "&="  ;
LAND      : "&&"  ;
SEMI      : ';'   ;



IDENTIFIER_TYPES
  :
  id:IDENTIFIER {
      /*
        Since ASP uses ActiveX components
        and an ActiveX can have a method or attribute with
        name equal to some keyword, be sure that the last token
        wasn't DOT
      */
      if (lastToken != DOT) {
          //System.out.println(getLine() + ":" + getColumn() + " Wasn't DOT");
          String idValue = id.getText();
          Object intVal = JsConstants.KEYWORDS.get(idValue);
          if (intVal != null) {
              _ttype = ((Integer) intVal).intValue();
          } else {
              _ttype = IDENTIFIER;
          }
      } else {
              _ttype = IDENTIFIER;
      }
      lastToken = _ttype;
  }
  ;


// Whitespace -- ignored
WS  : ( ' '
    | '\t'
    | '\f'
    // handle newlines
    | ( "\r\n"  // Evil DOS
      | '\r'    // Macintosh
      | '\n'    // Unix (the right way)
      )
      { newline(); }
    )
    { _ttype = Token.SKIP; }
  ;

// Single-line comments
SL_COMMENT
  : "//"
    (~('\n'|'\r'))* ('\n'|'\r'('\n')?)
    {$setType(Token.SKIP); newline();}
  ;

// multiple-line comments
ML_COMMENT
  : "/*"
    ( /*  '\r' '\n' can be matched in one alternative or by matching
        '\r' in one iteration and '\n' in another.  I am trying to
        handle any flavor of newline that comes in, but the language
        that allows both "\r\n" and "\r" and "\n" to all be valid
        newline is ambiguous.  Consequently, the resulting grammar
        must be ambiguous.  I'm shutting this warning off.
       */
      options {
        generateAmbigWarnings=false;
      }
    :
      { LA(2)!='/' }? '*'
    | '\r' '\n'   {newline();}
    | '\r'      {newline();}
    | '\n'      {newline();}
    | ~('*'|'\n'|'\r')
    )*
    "*/"
    {$setType(Token.SKIP);}
  ;


// string literals
STRING_LITERAL
  : '"' (ESC|~('"'|'\\'))* '"'
  | '\'' ( ESC | ~'\'' )* '\''
  ;


// escape sequence -- note that this is protected; it can only be called
//   from another lexer rule -- it will not ever directly return a token to
//   the parser
// There are various ambiguities hushed in this rule.  The optional
// '0'...'9' digit matches should be matched here rather than letting
// them go back to STRING_LITERAL to be matched.  ANTLR does the
// right thing by matching immediately; hence, it's ok to shut off
// the FOLLOW ambig warnings.
protected
ESC
  : '\\'
    ( 'n'
    | 'r'
    | 't'
    | 'b'
    | 'f'
    | '"'
    | '\''
    | '\\'
    | ('u')+ HEX_DIGIT HEX_DIGIT HEX_DIGIT HEX_DIGIT
    | ('0'..'3')
      (
        options {
          warnWhenFollowAmbig = false;
        }
      : ('0'..'7')
        (
          options {
            warnWhenFollowAmbig = false;
          }
        : '0'..'7'
        )?
      )?
    | ('4'..'7')
      (
        options {
          warnWhenFollowAmbig = false;
        }
      : ('0'..'9')
      )?
    )
  ;


// hexadecimal digit (again, note it's protected!)
protected
HEX_DIGIT
  : ('0'..'9'|'A'..'F'|'a'..'f')
  ;


ASPEND
  :
  "%>" { _ttype = HtmlLexerUtil.ASP_END;}
  ;


DUMMY
  :
  "</" s:WORD
  {
      if (!"script".equalsIgnoreCase(s.getText())) {
          throw new RecognitionException("Expected \"script\" at line:"
          + getLine() + " at column:" + getColumn());
      }
   }
  '>'
  { _ttype = HtmlLexerUtil.JS_END;}
  ;


LANGUAGE
  {String lang = null;}
  :
  '@' w:WORD (' ')*
  {
      if (!"language".equalsIgnoreCase(w.getText())) {
          throw new RecognitionException("Expected \"language\" at line:"
          + getLine() + " at column:" + getColumn());
      }
   }
   '=' (' ')*
   (
      l:STRING_LITERAL {lang = l.getText();}
      | i:IDENTIFIER   {lang = i.getText();}
   ) (' ')*   
   {
      $setType(HtmlLexerUtil.LANGUAGE);
      $setText(lang);
   }
   ;


protected WORD
  :
  ('a'..'z' | 'A'..'Z')+
  ;


// a dummy rule to force vocabulary to be all characters (except special
//   ones that ANTLR uses internally (0 to 2)
protected
VOCAB
  : '\3'..'\377'
  ;


// an identifier.  Note that testLiterals is set to true!  This means
// that after we match the rule, we look in the literals table to see
// if it's a literal or really an identifer
protected IDENTIFIER
  : ('a'..'z'|'A'..'Z'|'_'|'$') ('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'$')*
  ;


// a numeric literal
NUM_INT
  {boolean isDecimal=false;}
  :
  (
  '.' {_ttype = DOT;}
      (('0'..'9')+ (EXPONENT)? (FLOAT_SUFFIX)? { _ttype = NUM_FLOAT; })?
  | ( '0' {isDecimal = true;} // special case for just '0'
      ( ('x'|'X')
        (                     // hex
          // the 'e'|'E' and float suffix stuff look
          // like hex digits, hence the (...)+ doesn't
          // know when to stop: ambig.  ANTLR resolves
          // it correctly by matching immediately.  It
          // is therefor ok to hush warning.
          options {
            warnWhenFollowAmbig=false;
          }
        : HEX_DIGIT
        )+
      | ('0'..'7')+                 // octal
      )?
    | ('1'..'9') ('0'..'9')*  {isDecimal=true;}   // non-zero decimal
    )
    ( ('l'|'L')

    // only check to see if it's a float if looks like decimal so far
    | {isDecimal}?
      ( '.' ('0'..'9')* (EXPONENT)? (FLOAT_SUFFIX)?
      | EXPONENT (FLOAT_SUFFIX)?
      | FLOAT_SUFFIX
      )
      { _ttype = NUM_FLOAT; }
    )?
  )
  {
      lastToken = _ttype;
  }

  ;


// a couple protected methods to assist in matching floating point numbers
protected
EXPONENT
  : ('e'|'E') ('+'|'-')? ('0'..'9')+
  ;


protected
FLOAT_SUFFIX
  : 'f'|'F'|'d'|'D'
  ;

-------------- next part --------------
A non-text attachment was scrubbed...
Name: JsConstants.java
Type: java/*
Size: 2186 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20030524/1dd98f81/JsConstants.bin
From rustydstone at yahoo.com  Sat May 24 06:24:37 2003
From: rustydstone at yahoo.com (rustydstone)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] java.tree.g #(QUESTION expr expr expr)
Message-ID: <banrql+hqm4@eGroups.com>

Hi,

The following is slightly modified grammar from java.g and java.tree.g

conditionalExpression
	: logicalOrExpression 
        ( QUESTION^ conditionalExpression COLON! conditionalExpression )?
	;

#(QUESTION q1:. q2:. q3:.)

When expression "(true || false)? 1 + 1 : 0 + 0" is processed the
following q1, q2 and q3 ASTs are received (printed using toStringList()):

q1 ( || true false ) ( + 1 1 ) ( + 0 0 )
q2 ( + 1 1 ) ( + 0 0 )
q3 ( + 0 0 )

Why does q1 contain q2 and q3? Why does q2 contain q3? I somehow
expected that the output would be like the following:
q1 ( || true false )
q2 ( + 1 1 )
q3 ( + 0 0 )

Any ideas? Thanks



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Sat May 24 07:04:05 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Re: java.tree.g #(QUESTION expr expr expr)
In-Reply-To: <banrql+hqm4@eGroups.com>
Message-ID: <banu4l+1tof@eGroups.com>

"rustydstone" wrote:
> Hi,
> 
> The following is slightly modified grammar from java.g and 
java.tree.g
> 
> conditionalExpression
> 	: logicalOrExpression 
>         ( QUESTION^ conditionalExpression COLON! 
conditionalExpression )?
> 	;
> 
> #(QUESTION q1:. q2:. q3:.)
> 
> When expression "(true || false)? 1 + 1 : 0 + 0" is processed the
> following q1, q2 and q3 ASTs are received (printed using 
toStringList()):
> 
> q1 ( || true false ) ( + 1 1 ) ( + 0 0 )
> q2 ( + 1 1 ) ( + 0 0 )
> q3 ( + 0 0 )
> 
> Why does q1 contain q2 and q3? Why does q2 contain q3? I somehow
> expected that the output would be like the following:
> q1 ( || true false )
> q2 ( + 1 1 )
> q3 ( + 0 0 )

toStringList() does just that - it prints the list of nodes starting 
from the specified node. The "list" being the node and it's following 
siblings.

In the same vein toStringTree() should do what you wanted - it should 
print the tree rooted at the specified node but not it's siblings[1*].

Cheers, 

Micheal

[1*] I have botched up this behaviour in ANTLR/C# by overriding 
ToStringTree() to print a nice tree-like representation and not a 
lisp-like representation of the specified tree only. This will be 
fixed and the nice tree-structured printing would be moved to new 
methods - do I hear any better monikers than ToNiceList()/ToNiceTree
() or even ToTreeList()/ToTreeTree()?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rustydstone at yahoo.com  Sat May 24 08:07:55 2003
From: rustydstone at yahoo.com (rustydstone)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Re: java.tree.g #(QUESTION expr expr expr)
In-Reply-To: <banu4l+1tof@eGroups.com>
Message-ID: <bao1sb+2qam@eGroups.com>

--- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...> 
> toStringList() does just that - it prints the list of nodes starting 
> from the specified node. The "list" being the node and it's following 
> siblings.
> 
> In the same vein toStringTree() should do what you wanted - it should 
> print the tree rooted at the specified node but not it's siblings[1*].

It's not really a question about printing. I'm curious why those
siblings are there in the first place. Based on the #QUESTION
definition one might expect that it'd be different.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Sat May 24 11:45:38 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Re: antlr vs. sableCC comparison
In-Reply-To: <bankfh+36fc@eGroups.com>
Message-ID: <E96752C0-8E17-11D7-AA73-000393BB647E@jguru.com>


On Saturday, May 24, 2003, at 04:19  AM, Oliver Zeigermann wrote:
>> Predicated LL(k) (ANTLR) parsing can handle any context-free
>> grammar, but LALR does not and modern versions of yacc support GLR
>> parsing to get past the LALR limitation.
>
> I think you mix something up here (or do I?). Surely neither YACC
> nor SableCC nor ANTLR can handle all context free grammars! What you
> wanted to say is any context free language, i.e. a language that can
> be described by a context free grammar, can also be described by an
> ANTLR grammar, right?

ANTLR's predicated LL(k) parsers can handle a class of languages that 
might be hard to nail down.  Because it has backtracking, it could in 
theory (backtracking every single decision) handle all context-free 
grammars.  Because it has semantic predicates it can handle some 
context-SENSITIVE languages.

>
> Anyway, please tell more about GLR. How does it work?
>
> Personally, I am fan of ANTLR and LL, but still, there are some good
> reasons to choose bottom up methods. Some purists like the idea of
> describing a language completely by the means of a most human
> readable and thus natural (hopefully context free) grammar. To use
> such grammars with LL or LR methods you will have to modify them. It
> turns out that LR methods need less modification of the grammar than
> LL, which is considered valuable by some pepole.

Correct.  I hate having to modify my grammar to satisfy a weak parsing 
method. :(  A tradeoff.

>> visitor
>>     :
>>     ( visit )+
>>     ;
>>
>> visit
>>     :
>>     (      .
>>     |      #( .  ( visit )+ )
>>     )
>>     ;
>
> I do not think that will work (maybe it does). How to decide between
> first and second alternative of rule visit?
>
> This will do, I think (visitor rule unchanged):
>
> visit
>     :
>     #( .  ( visit )* )
>     ;

Yeah, that looks right :)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From dm at cs.yorku.ca  Sat May 24 16:46:36 2003
From: dm at cs.yorku.ca (dm@cs.yorku.ca)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] FW: Re: antlr vs. sableCC comparison
Message-ID: <1053819996.3ed0045cdd761@www.cs.yorku.ca>

 
>>>
>>>My reaction to SableCC has always been, "Why?", and the answer 
>>>always seems to be "it was a good excuse for Gagnon to have fun 
>>>writing a master's thesis".  It has less functionality than either 
>>>ANTLR or JavaCC and was introduced after both were available.  The 
>>>basic features of SableCC are
>>>1.)  DFA lexing
>>>2.)  LALR(1) parsing
>>>3.)  Visitor-based tree walkers.
>>>and the package made no real additions to the state-of-the-art, as 
>>>far as I can tell.


>>
>>There are four important missing features above (for SableCC 2.x):
>>4) Strictly-typed heterogeneous AST
>>5) Name-based access to children node (intead of error-prone
>>    index-based access)
>>6) Complete separation of users written code and generated code,
>>    allowing direct debugging of user written code, and a shorter
>>    development cycle for compilers and interpreters.
>>7) Overall very intuitive syntax and overall framework.
>>
>>These four last point were at the heart of my M.Sc. thesis.  DFA, LALR(1)
>>and visitors were only the base tools I used to illustrate these concepts.
>>
>>Of course, upcoming SableCC versions will add many additional features.
>>For example, SableCC 3.0.0 brings a innovative mechanism to intuitively
>>specify concrete syntax tree (CST) to abstract syntax tree (AST)
>>parse-time transformations in the grammar.  This mechanism goes well
>>beyond "getting rid of unneeded tokens", and is subject to full semantic
>>verifications (so, there's no way to specify invalid transformations).
>>The mechanism is deterministic; it does not depend on "pattern matching"
>>(whose result could vary depending on the pattern search order).


>>>Predicated LL(k) (ANTLR) parsing can handle any context-free 
>>>grammar,


>>This is a misleading statement.  I will not enter this debate.  Either
>>the poster is clueless, either he simply wants to provoke a flamewar.
>>
>>Please note my use of the word "misleading", and not "false".  The
>>problem has to do with the meaning of "can handle".


>>>ANTLR's tree grammar approach is more powerful than the visitor 
>>>approach.  In fact, a visitor can be expressed as a special ANTLR 
>>>tree (I've not tested this code, but it should work):


>>I have great admiration for Terrence Parr's Ph.D. research and his
>>ANTLR software.  I will not get into arguments about which software
>>is better.  SableCC and ANTLR have both some advantages over the
>>other.  You simply need to pick the right tool for a given task.
>>
>>Etienne
>>
>>-- 
>>Etienne M. Gagnon, Ph.D.             http://www.info.uqam.ca/~egagnon/
>>SableVM:                                       http://www.sablevm.org/
>>SableCC:                                       http://www.sablecc.org/
>>
> 
> 
> 
> 
> 
> -------------------------------------------------
> This mail sent through IMP: http://horde.org/imp/
> 
> 


-- 
Etienne M. Gagnon, Ph.D.             http://www.info.uqam.ca/~egagnon/
SableVM:                                       http://www.sablevm.org/
SableCC:                                       http://www.sablecc.org/

----- End forwarded message -----




-------------------------------------------------
This mail sent through IMP: http://horde.org/imp/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Sat May 24 21:44:24 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Re: antlr vs. sableCC comparison
In-Reply-To: <bankfh+36fc@eGroups.com>
Message-ID: <baphn8+hec1@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Oliver Zeigermann" 
<oliver@z...> wrote:
> --- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> 
wrote:
> > My reaction to SableCC has always been, "Why?", and the answer 
> > always seems to be "it was a good excuse for Gagnon to have fun 
> > writing a master's thesis". It has less functionality than 
either 
> > ANTLR or JavaCC and was introduced after both were available. 
> 
> At the time he wrote SableCC, only few *LALR* generators for Java 
> were around and it was yet undecided which would be the best, so 
he 
> just tried to do something good. As you said, both ANTLR or JavaCC 
> are *LL*.

I don't see the issue as being LL versus LR here--more one of 
reinventing the wheel, and then not inventing a better wheel.  For 
that matter, there are much more egregious examples than SableCC, 
which was at least an attempt to be the first kid on the Java block 
and not just a "me too" yacc clone.

> > Predicated LL(k) (ANTLR) parsing can handle any context-free 
> > grammar, but LALR does not and modern versions of yacc support 
GLR 
> > parsing to get past the LALR limitation.
> 
> I think you mix something up here (or do I?). Surely neither YACC 
> nor SableCC nor ANTLR can handle all context free grammars! What 
you 
> wanted to say is any context free language, i.e. a language that 
can 
> be described by a context free grammar, can also be described by 
an 
> ANTLR grammar, right?

Yes, that's a bit more precise.  And there is also a constraint on 
the grammars being finite.

> 
> Anyway, please tell more about GLR. How does it work?

I'd suggest looking at a few papers on citeseer 
(http://citeseer.nec.jp)--just do a search on GLR parsing, or Earley 
parsers, or Tomita parsers.  Any short description (generate all 
possible parses to build a parse forest and then match a tree in the 
forest) tends to be incoherent.  Or check into one of the recent 
versions of yacc which incorporate an Earley parser.

> Personally, I am fan of ANTLR and LL, but still, there are some 
good 
> reasons to choose bottom up methods. Some purists like the idea of 
> describing a language completely by the means of a most human 
> readable and thus natural (hopefully context free) grammar. To use 
> such grammars with LL or LR methods you will have to modify them. 
It 
> turns out that LR methods need less modification of the grammar 
than 
> LL, which is considered valuable by some pepole.

But a little more care on placing actions to avoid surprises--that's 
a practical tradeoff.  Also, the "less modification" is open to 
question--the issues tend to be left factoring and placement of 
syntactic predicates, both of which could be automated during 
grammar analysis instead of requiring programmer intervention.  This 
is a performance versus ergonomics issue, and I think that Ter made 
the right decision in this case--the rewrites are usually pretty 
minor.  For ANTLR 3, we have talked about IDE support for automatic 
placement of syntactic predicates.  (The big advantage of this would 
be to determine minimum-length semantic predicates automatically.)

For me, the two things that make LL preferable to LR for development 
are 1.) freeform action placement, and 2.) generation of humanly 
understandable recursive-descent code which can be debugged.  These 
aren't strictly LL versus LR items:  LR parsers could be implemented 
to avoid the action placement surprises, and they could be 
implemented to generate human-understandable code (probably at a 
cost in parser performance).  For that matter, there have been table-
driven LL(1) parser generators.

> 
> > ANTLR's tree grammar approach is more powerful than the visitor 
> > approach.  In fact, a visitor can be expressed as a special 
ANTLR 
> > tree (I've not tested this code, but it should work):
> > 
> > visitor
> >     :
> >     ( visit )+
> >     ;
> > 
> > visit
> >     :
> >     (      .
> >     |      #( .  ( visit )+ )
> >     )
> >     ;
> 
> I do not think that will work (maybe it does). How to decide 
between 
> first and second alternative of rule visit?
>
> This will do, I think (visitor rule unchanged):
> 
> visit
>     :
>     #( .  ( visit )* )
>     ;

That should work.

> Oliver


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Sun May 25 03:18:41 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Re: antlr vs. sableCC comparison
In-Reply-To: <E96752C0-8E17-11D7-AA73-000393BB647E@jguru.com>
Message-ID: <baq5a1+u581@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> 
wrote:
> ANTLR's predicated LL(k) parsers can handle a class of languages 
that 
> might be hard to nail down.  Because it has backtracking, it could 
in 
> theory (backtracking every single decision) handle all context-
free 
> grammars.  Because it has semantic predicates it can handle some 
> context-SENSITIVE languages.

It seems you forgot about left recursion in grammars which can not 
be handled with ANTLR or any other top down approach. Also, what 
about ambigous grammars? ANTLR hardly generates more than a single 
parse tree ;)

Of course, as I also admitted, ANTLR can handle all context free 
*languages* (not *grammars*).

I think the question is not the class of languages you can parse - 
as with ANTLR I am pretty sure (even though I can not proove it) it 
is phrase structure languages - but the way you can express it. 
Using no tool at all, but a turing machine, you can just as well 
parse phrase-structure languages. So what is the use of a tool like 
ANTLR? It is the elegant way to describe the language using a 
grammar. So, the question is what kind of grammar can you use to 
describe the language. If this question was not important why using 
LL(k>1) grammars? You can always left factor, so LL(k) can never 
describe a language you can not describe by LL(k-1). The answer is 
convenience. A LL(k) grammar might be much more readble than a LL(k-
1) one.

Oliver


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Sun May 25 04:19:47 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Re: antlr vs. sableCC comparison
In-Reply-To: <baphn8+hec1@eGroups.com>
Message-ID: <baq8sj+glcv@eGroups.com>

--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> > Anyway, please tell more about GLR. How does it work?
> 
> I'd suggest looking at a few papers on citeseer 
> (http://citeseer.nec.jp)--just do a search on GLR parsing, or 
Earley 
> parsers, or Tomita parsers.  Any short description (generate all 
> possible parses to build a parse forest and then match a tree in 
the 
> forest) tends to be incoherent.  Or check into one of the recent 
> versions of yacc which incorporate an Earley parser.

Well, for anybody else caring about GLR, it seems to be just another 
name for "Tomita" parsing (just found that out). As a sidenote, 
Tomita parsing is quite different from Earley parsing... 

For details have a look at

http://www.cs.vu.nl/~dick/PTAPG.html

and download this very useful book at

ftp://ftp.cs.vu.nl/pub/dick/PTAPG/BookBody.pdf

Oliver


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Sun May 25 11:09:11 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Re: antlr vs. sableCC comparison
In-Reply-To: <baq5a1+u581@eGroups.com>
Message-ID: <FCB86F35-8EDB-11D7-AA73-000393BB647E@jguru.com>


On Sunday, May 25, 2003, at 03:18  AM, Oliver Zeigermann wrote:

> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...>
> wrote:
>> ANTLR's predicated LL(k) parsers can handle a class of languages
> that
>> might be hard to nail down.  Because it has backtracking, it could
> in
>> theory (backtracking every single decision) handle all context-
> free
>> grammars.  Because it has semantic predicates it can handle some
>> context-SENSITIVE languages.
>
> It seems you forgot about left recursion in grammars which can not
> be handled with ANTLR or any other top down approach.

Ooops..you're right.  Minus 5 points. ;)  Of course, you can actually 
do some left recursive grammars by adding semantic predicates.  I 
parsed the usual yacc expression grammar once with predicates on the 
left edge to know how many times to recurse to get the right 
precedence.  Recall that left recursion is only bad if it is 
*infinite*. ;)

>  Also, what
> about ambigous grammars? ANTLR hardly generates more than a single
> parse tree ;)

Too true.  Ambiguous grammars will always result in a nondeterministic 
LL or LR parser unless you add some form of tracking multiple paths 
like tomita.

> Of course, as I also admitted, ANTLR can handle all context free
> *languages* (not *grammars*).
>
> I think the question is not the class of languages you can parse -
> as with ANTLR I am pretty sure (even though I can not proove it) it
> is phrase structure languages - but the way you can express it.
> Using no tool at all, but a turing machine, you can just as well
> parse phrase-structure languages. So what is the use of a tool like
> ANTLR? It is the elegant way to describe the language using a
> grammar. So, the question is what kind of grammar can you use to
> describe the language. If this question was not important why using
> LL(k>1) grammars? You can always left factor, so LL(k) can never
> describe a language you can not describe by LL(k-1).

Actually I believe there are *languages* that are LL(k) but not 
LL(k-1).  The same is not true for LR.  LR(k) is same as LR(k-1) 
languages and grammars.  Just saw that lemma in a book I think ;)

> The answer is
> convenience. A LL(k) grammar might be much more readble than a LL(k-
> 1) one.

That is certainly true ;)  Again, though for grammars it is certain 
that LL(k) is stronger and I believe even for languages LL(k) is 
stronger than LL(k-1).

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Sun May 25 15:18:27 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Re: antlr vs. sableCC comparison
In-Reply-To: <FCB86F35-8EDB-11D7-AA73-000393BB647E@jguru.com>
Message-ID: <barffj+o0cj@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> 
> > You can always left factor, so LL(k) can never
> > describe a language you can not describe by LL(k-1).
> 
> Actually I believe there are *languages* that are LL(k) but not 
> LL(k-1).  The same is not true for LR.  LR(k) is same as LR(k-1) 
> languages and grammars.  Just saw that lemma in a book I think ;)
> 

This makes me curious. Can you give an example for a language that 
is LL(k), but not LL(k-1). Also, what about my theoretical argument 
above? If it is not convincing, where lies my mistake?

Oliver


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Sun May 25 15:34:26 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Re: antlr vs. sableCC comparison
In-Reply-To: <barffj+o0cj@eGroups.com>
Message-ID: <0AC75827-8F01-11D7-AA73-000393BB647E@jguru.com>


On Sunday, May 25, 2003, at 03:18  PM, Oliver Zeigermann wrote:

> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...>
>>> You can always left factor, so LL(k) can never
>>> describe a language you can not describe by LL(k-1).
>>
>> Actually I believe there are *languages* that are LL(k) but not
>> LL(k-1).  The same is not true for LR.  LR(k) is same as LR(k-1)
>> languages and grammars.  Just saw that lemma in a book I think ;)
>>
>
> This makes me curious. Can you give an example for a language that
> is LL(k), but not LL(k-1).

Not without my theory book at the office ;)

>  Also, what about my theoretical argument
> above? If it is not convincing, where lies my mistake?

I think that the above statement is probably false, hence, the truth of 
the lemma in that book ;)  I'll look it up...I'm frankly ashamed I 
don't know this by heart!  Well, I used to know stuff, but now I'm 
dumberer ;)

Ter
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From andrei at metalanguage.com  Sun May 25 15:50:07 2003
From: andrei at metalanguage.com (uprightness_of_character)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Matching & transforming two trees at the same time
Message-ID: <barhav+leh7@eGroups.com>

Hi folks,


Consider the following problem: transform C++-like "variable 
definitions with initializers" into C-style definitions (no 
initializers) followed by expressions that perfom initialization. IOW, 
the problem is to transform:

int i = 0, j(5), k = 6;

into:

int i, j, k;
...
i = 0, j = 5, k = 6;

The parsing is done, so we're talking about a tree transformation. 

The way I'm doing things now is, I match and transform the tree into 
the assignments, and at the same time I "collect" the bare definitions 
(without assignments) by hand, and hook it into the AST later. 

Now the code is quite ugly, so what I would really like would be to 
match the same tree twice, and perform a different transformation each 
time.

Any idea on how I can do that? Thanks!


Andrei



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Sun May 25 23:53:48 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Re: antlr vs. sableCC comparison
In-Reply-To: <0AC75827-8F01-11D7-AA73-000393BB647E@jguru.com>
Message-ID: <basdls+pqqp@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> > >
This makes me curious. Can you give an example for a language that
> > is LL(k), but not LL(k-1).
> 
> Not without my theory book at the office ;)

Now it is me who is ashamed :( You are right, actually. Just found an
exmaple (taken from Aho & Ullman's "The Theory of Parsing,
Translation, and Compiling, Volume 1: Parsing"):

>>
 5.1.22 Given a fixed integer k, the following language is LL(k+1),
but not LL(k):

a^n (b | c | c^k d)^n for n>0
<<

Oliver


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From neuroboy at optonline.net  Mon May 26 09:04:30 2003
From: neuroboy at optonline.net (John Clayton)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] problems building antlr using antlr.build.Tool
Message-ID: <BBD5B620-8F93-11D7-B48A-000393641890@optonline.net>

Hi Everyone,

I am new to ANTLR, and foolishly making changes ;-)  So, I want to  
build the java version and following the instructions in install.html,  
I build the antlr/build/ dir, no problems there.  Then, from  
antlr-2.7.2 I run through the following:

% java antlr.build.Tool build
Exception in thread "main" java.lang.NoClassDefFoundError:  
antlr/build/Tool

Ok, set the classpath to here:

% java -cp . antlr.build.Tool build
antlr.build.Tool: no such action for application antlr.build.ANTLR
java.lang.reflect.InvocationTargetException
         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
         at  
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.jav 
a:39)
         at  
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessor 
Impl.java:25)
         at java.lang.reflect.Method.invoke(Method.java:324)
         at antlr.build.Tool.perform(Tool.java:98)
         at antlr.build.Tool.main(Tool.java:62)
Caused by: java.lang.NoClassDefFoundError: antlr/Tool
         at antlr.build.Tool.antlr(Tool.java:150)
         at antlr.build.ANTLR.build(ANTLR.java:35)
         ... 6 more


Hmmm, found the Tool now, but seems to have a problem reflecting a  
method in ANTLR because antlr.Tool isn't compiled.  Let's try giving it  
the jar to bootstrap:

% java -cp antlr.jar:. antlr.build.Tool build
executing: java antlr.Tool -o  
/Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr  
./antlr/antlr.g
cannot write to  
'/Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr/ 
ANTLRParser.java'
executing: java antlr.Tool -o  
/Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr  
./antlr/tokdef.g
cannot write to  
'/Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr/ 
ANTLRTokdefLexer.java'
executing: java antlr.Tool -o  
/Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr/preprocessor  
./antlr/preprocessor/preproc.g
cannot write to  
'/Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr/ 
preprocessor/PreprocessorLexer.java'
executing: java antlr.Tool -o  
/Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr/actions/java  
./antlr/actions/java/action.g
cannot write to  
'/Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr/actions/ 
java/ActionLexer.java'
executing: java antlr.Tool -o  
/Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr/actions/cpp  
./antlr/actions/cpp/action.g
cannot write to  
'/Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr/actions/ 
cpp/ActionLexer.java'
executing: java antlr.Tool -o  
/Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr/actions/ 
csharp ./antlr/actions/csharp/action.g
cannot write to  
'/Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr/actions/ 
csharp/ActionLexer.java'
executing: javac -d . ./antlr/*.java
./antlr/ANTLRGrammarParseBehavior.java:10: package  
antlr.collections.impl does not exist
import antlr.collections.impl.BitSet;
                               ^


Ok, so it has permissions problems and some compiler errors.  Let's  
deal with permissions:

% sudo java -cp antlr.jar:. antlr.build.Tool build
executing: java antlr.Tool -o  
/Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr  
./antlr/antlr.g
executing: java antlr.Tool -o  
/Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr  
./antlr/tokdef.g
./antlr/tokdef.g:175:36: warning:lexical nondeterminism between alts 1  
and 2 of block upon
./antlr/tokdef.g:175:36:     k==1:'0'..'9'
./antlr/tokdef.g:175:36:     k==2:'\u0003'..'\u00ff'
./antlr/tokdef.g:175:44: warning:lexical nondeterminism between alts 1  
and 2 of block upon


... processing lots of g files with lots of nondeterminism errors ...

executing: javac -d . ./antlr/*.java
./antlr/ANTLRGrammarParseBehavior.java:10: package  
antlr.collections.impl does not exist
import antlr.collections.impl.BitSet;
                               ^

... ad infinitum ...


All right, we have fixed everything except that now as soon as the  
build tool starts compiling it wigs out and can't find anything.  I  
tried sending in:
-Dantlr.build.root=/Users/me/antlr-2.7.2 (on OS X) but got:
antlr.build.Tool: Property antlr.build.root==/Users/me/antlr-2.7.2 does  
not exist

Can anyone point me in the right direction?  Thanks a whole big bunch.   
I'll keep horsing with the classpath.


Regards,

John Clayton

----------------------------------
neuroboy@optonline.net
----------------------------------
How glorius it is to be an Exception, and how painful.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From neuroboy at optonline.net  Mon May 26 09:31:15 2003
From: neuroboy at optonline.net (John Clayton)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] problems building antlr using antlr.build.Tool
In-Reply-To: <BBD5B620-8F93-11D7-B48A-000393641890@optonline.net>
Message-ID: <78B85B23-8F97-11D7-B48A-000393641890@optonline.net>

I think I may have solved my own problem (it's reaching my code where  
it's encountering errors ;-) here by setting CLASSPATH in the environ  
rather than on the command line.  I guess the tool might look for that  
when it invokes the compiler?  Could be.  Still, any feedback is  
appreciated.


On Monday, May 26, 2003, at 12:04  PM, John Clayton wrote:

> Hi Everyone,
>
> I am new to ANTLR, and foolishly making changes ;-)  So, I want to
> build the java version and following the instructions in install.html,
> I build the antlr/build/ dir, no problems there.  Then, from
> antlr-2.7.2 I run through the following:
>
> % java antlr.build.Tool build
> Exception in thread "main" java.lang.NoClassDefFoundError:
> antlr/build/Tool
>
> Ok, set the classpath to here:
>
> % java -cp . antlr.build.Tool build
> antlr.build.Tool: no such action for application antlr.build.ANTLR
> java.lang.reflect.InvocationTargetException
>          at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>          at
> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.ja 
> v
> a:39)
>          at
> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccesso 
> r
> Impl.java:25)
>          at java.lang.reflect.Method.invoke(Method.java:324)
>          at antlr.build.Tool.perform(Tool.java:98)
>          at antlr.build.Tool.main(Tool.java:62)
> Caused by: java.lang.NoClassDefFoundError: antlr/Tool
>          at antlr.build.Tool.antlr(Tool.java:150)
>          at antlr.build.ANTLR.build(ANTLR.java:35)
>          ... 6 more
>
>
> Hmmm, found the Tool now, but seems to have a problem reflecting a
> method in ANTLR because antlr.Tool isn't compiled.  Let's try giving it
> the jar to bootstrap:
>
> % java -cp antlr.jar:. antlr.build.Tool build
> executing: java antlr.Tool -o
> /Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr
> ./antlr/antlr.g
> cannot write to
> '/Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr/
> ANTLRParser.java'
> executing: java antlr.Tool -o
> /Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr
> ./antlr/tokdef.g
> cannot write to
> '/Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr/
> ANTLRTokdefLexer.java'
> executing: java antlr.Tool -o
> /Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr/preprocessor
> ./antlr/preprocessor/preproc.g
> cannot write to
> '/Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr/
> preprocessor/PreprocessorLexer.java'
> executing: java antlr.Tool -o
> /Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr/actions/java
> ./antlr/actions/java/action.g
> cannot write to
> '/Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr/actions/
> java/ActionLexer.java'
> executing: java antlr.Tool -o
> /Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr/actions/cpp
> ./antlr/actions/cpp/action.g
> cannot write to
> '/Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr/actions/
> cpp/ActionLexer.java'
> executing: java antlr.Tool -o
> /Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr/actions/
> csharp ./antlr/actions/csharp/action.g
> cannot write to
> '/Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr/actions/
> csharp/ActionLexer.java'
> executing: javac -d . ./antlr/*.java
> ./antlr/ANTLRGrammarParseBehavior.java:10: package
> antlr.collections.impl does not exist
> import antlr.collections.impl.BitSet;
>                                ^
>
>
> Ok, so it has permissions problems and some compiler errors.  Let's
> deal with permissions:
>
> % sudo java -cp antlr.jar:. antlr.build.Tool build
> executing: java antlr.Tool -o
> /Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr
> ./antlr/antlr.g
> executing: java antlr.Tool -o
> /Users/johnclay/Cocoa/Parsers/ANTLR/antlr-2.7.2-objc/antlr
> ./antlr/tokdef.g
> ./antlr/tokdef.g:175:36: warning:lexical nondeterminism between alts 1
> and 2 of block upon
> ./antlr/tokdef.g:175:36:     k==1:'0'..'9'
> ./antlr/tokdef.g:175:36:     k==2:'\u0003'..'\u00ff'
> ./antlr/tokdef.g:175:44: warning:lexical nondeterminism between alts 1
> and 2 of block upon
>
>
> ... processing lots of g files with lots of nondeterminism errors ...
>
> executing: javac -d . ./antlr/*.java
> ./antlr/ANTLRGrammarParseBehavior.java:10: package
> antlr.collections.impl does not exist
> import antlr.collections.impl.BitSet;
>                                ^
>
> ... ad infinitum ...
>
>
> All right, we have fixed everything except that now as soon as the
> build tool starts compiling it wigs out and can't find anything.  I
> tried sending in:
> -Dantlr.build.root=/Users/me/antlr-2.7.2 (on OS X) but got:
> antlr.build.Tool: Property antlr.build.root==/Users/me/antlr-2.7.2 does
> not exist
>
> Can anyone point me in the right direction?  Thanks a whole big bunch.
> I'll keep horsing with the classpath.
>
>
> Regards,
>
> John Clayton
>
> ----------------------------------
> neuroboy@optonline.net
> ----------------------------------
> How glorius it is to be an Exception, and how painful.
>
>
>
>
> Your use of Yahoo! Groups is subject to  
> http://docs.yahoo.com/info/terms/
>
>
>
Regards,

John Clayton

----------------------------------
neuroboy@optonline.net
----------------------------------
Ask a question, remain a fool for five minutes
Don't ask a question, remain a fool forever


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From imolanet at yahoo.it  Mon May 26 15:32:28 2003
From: imolanet at yahoo.it (Patrik Suzzi)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] problem executing antlr under win XP
Message-ID: <bau4ls+lnev@eGroups.com>

Hi, I'm patrik.
I've got a problem using antlr under windows XP:

I've extracted antlr then moved to directory C:\antlr-2.7.2

Using "properties" on MyComputer I've added an environment variable 
CLASSPATH = C:\antlr-2.7.2/antlr.jar

Following the first sample in documentation I get scanner & parser 
from antlr, But once written and compiled Main.java it does not work.
>java Main
Exception in thread "main" java.lang.NoClassDefFoundError: Main

After that there's another curious thing: all other java classes on 
my computer doesn't work cause the same error over reported

NOTE: after deleting CLASSPATH variable from properties of 
MyComputer, and restarting the machine, All java classes return to 
work.

Con anyone help a desperate student, in order to set classpath under 
windows XP ?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rjc at trump.net.au  Mon May 26 16:22:48 2003
From: rjc at trump.net.au (Robert Colquhoun)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] problem executing antlr under win XP
In-Reply-To: <bau4ls+lnev@eGroups.com>
Message-ID: <4.2.0.58.20030527091236.01200de8@postoffice.trump.net.au>

At 10:32 PM 26/05/2003 +0000, Patrik Suzzi wrote:
>Hi, I'm patrik.
>I've got a problem using antlr under windows XP:
>
>I've extracted antlr then moved to directory C:\antlr-2.7.2
>
>Using "properties" on MyComputer I've added an environment variable
>CLASSPATH = C:\antlr-2.7.2/antlr.jar
>
>Following the first sample in documentation I get scanner & parser
>from antlr, But once written and compiled Main.java it does not work.
> >java Main
>Exception in thread "main" java.lang.NoClassDefFoundError: Main

That's because the current directory  "." is not in your classpath.

Basically for 1.2 or later versions of java do *not* set the CLASSPATH 
enviornment variable.  It is much better to just set up the classpath for 
your program only on the command line when invoking it.

ie java -classpath c:\antlr-2.7.2\antlr.jar;. Main

By default with "-classpath" the standard system libraries are included, 
and do not need to be included manually.

Once you have the above working put it in a batchfile, shellscript or 
makefile to make invocation easy.

   - Robert


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rjc at trump.net.au  Mon May 26 16:59:55 2003
From: rjc at trump.net.au (Robert Colquhoun)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] problems building antlr using
  antlr.build.Tool
In-Reply-To: <78B85B23-8F97-11D7-B48A-000393641890@optonline.net>
References: <BBD5B620-8F93-11D7-B48A-000393641890@optonline.net>
Message-ID: <4.2.0.58.20030527095555.01491bd8@postoffice.trump.net.au>

Hello John,

At 12:31 PM 26/05/2003 -0400, John Clayton wrote:
>I think I may have solved my own problem (it's reaching my code where
>it's encountering errors ;-) here by setting CLASSPATH in the environ
>rather than on the command line.  I guess the tool might look for that
>when it invokes the compiler?  Could be.  Still, any feedback is
>appreciated.

I have had trouble building antlr from scratch, i created this small build 
script to do it:

$ cat build
find antlr -name '*.class' -exec rm {} \;
javac -classpath . antlr/build/*.java
javac -classpath . antlr/J*.java
java -classpath . antlr.build.Tool build
java -classpath . antlr.build.Tool jar

(Run from root directory of distribution)

First time you run this you might need to chmod to 660 all .class files 
with the distribution as they are set read only.

  - Robert


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From andrei at metalanguage.com  Mon May 26 21:43:40 2003
From: andrei at metalanguage.com (uprightness_of_character)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Macro definitions: most elegant solution?
Message-ID: <bauqds+p0pu@eGroups.com>

One thing about my using antlr is that it's so cool and it eases 
things so much, it makes me feel dumb whenever I am doing something 
tedious: there must be an easier way if I knew the tool better.

I solved my previous problem (separating declarators from initializers 
in a C++-like grammar) by nicely matching the same AST fragment 
against multiple tree parsing rules: one filters out initializers, one 
transforms initializers into expressions, and so on. Sweet!

On to my current problem. I am trying to implement a macro definition 
facility with antlr. The macros are similar to C #defines, except that 
they don't suck :o). They're scoped and obey the language grammar much 
more.

So the syntax for the simplest case would be:

$define name { body }

Later, when seeing "name", the compiler will replace it with "body", 
also stripping the "{" and "}". If you want to define a macro that 
actually contains a "}", you can do that by saying:

$define name ( body )

If you want a macro that contains a "}" and a ")", you can say:

$define name [ body ]

Finally, if you want a macro that contains a "}", a ")", and a "]", 
you can say:

$define name sep body sep

where sep is any user-defined identifier. In all cases, the macro 
processor will eliminate the separators when expanding. I guess this 
looks a little baroque, but I believe it is coherent and useful.

So, the question is now - where to implement this facility? I tried to 
implement it in the lexer, but I hit this problem: upon reading one 
token, the lexer must return /multiple/ tokens to the caller, and it 
looks like the lexer wasn't designed to facilitate that. (Let me add 
in passing that it would be a great feature. Note that the lexer 
design allows to return /less/ tokens than read, through the SKIP 
mechanism.)

Then I said I'd implement the feature straight in the parser, but I 
couldn't make that work because I couldn't figure out how to tell the 
parser "stitch in these new tokens and reparse them". 

So now I am making good progress with using the TokenStream concept. I 
have a MacroProcessor class that sits in between the lexer and the 
parser and reacts upon seeing the '$' token. It then does some 
rudimentary matching algorithm and maintains the macro definition 
tables.

This works ok; however, what I felt the need for was a kind of a 
parser functionality. I mean, I want to define a little grammar such 
as:

macroDefinition
    : DOLLAR "define" name body
    ;

that has tokens as input alphabet, and ouputs tokens as well (instead 
of ASTs). I saw there was a hint at that in the end of http://www.
antlr.org/doc/streams.html. 

So if you have any opinions on how I can improve this design, please 
let me know. Thanks!


Andrei



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From imolanet at yahoo.it  Tue May 27 02:10:56 2003
From: imolanet at yahoo.it (Patrik Suzzi)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Re: problem executing antlr under win XP
In-Reply-To: <4.2.0.58.20030527091236.01200de8@postoffice.trump.net.au>
Message-ID: <bava30+kheb@eGroups.com>

it Works : thanks A lot Robert


--- In antlr-interest@yahoogroups.com, Robert Colquhoun <rjc@t...> 
wrote:
>It is much better to just set up the classpath for 
> your program only on the command line when invoking it.
> 
> ie java -classpath c:\antlr-2.7.2\antlr.jar;. Main
> 
> By default with "-classpath" the standard system libraries are 
included, 
> and do not need to be included manually.
> 
> Once you have the above working put it in a batchfile, shellscript 
or 
> makefile to make invocation easy.
> 
>    - Robert


>Patrik Suzzi (Computer Science Engeenering, Bologna [Italy])


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Thomas_Krebs at gmx.de  Tue May 27 02:22:27 2003
From: Thomas_Krebs at gmx.de (thomaskrebs)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] assign a derived token to the lexer
Message-ID: <bavaoj+5c08@eGroups.com>

I want to assign a different Token than CommonToken to the lexer. In 
lexer.html at lexer.html#Token_Attributes it is documented how to do 
that. But this seems to be wrong:

ImageToken t = new ImageToken(IMAGE,$getText);

t.setAttributes(attrs);

$setToken(t);

I assume t should be a pointer to ImageToken and the parameter to 
setToken can not be a Token or a pointer to a Token but a RefToken. 
But I cannot assign a RefCount<ADerivedToken> to the _token inside 
the parser rule. How to deal with that?




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Tue May 27 02:57:48 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] assign a derived token to the lexer
In-Reply-To: <bavaoj+5c08@eGroups.com>; from Thomas_Krebs@gmx.de on Tue, May 27, 2003 at 09:22:27AM -0000
References: <bavaoj+5c08@eGroups.com>
Message-ID: <20030527115747.A24059@cs.utwente.nl>

On Tue, May 27, 2003 at 09:22:27AM -0000, thomaskrebs wrote:
> I want to assign a different Token than CommonToken to the lexer. In 
> lexer.html at lexer.html#Token_Attributes it is documented how to do 
> that. But this seems to be wrong:
> 
> ImageToken t = new ImageToken(IMAGE,$getText);
> 
> t.setAttributes(attrs);
>
> $setToken(t);

That's the java syntax.

> I assume t should be a pointer to ImageToken and the parameter to 
> setToken can not be a Token or a pointer to a Token but a RefToken. 
> But I cannot assign a RefCount<ADerivedToken> to the _token inside 
> the parser rule. How to deal with that?

Make sure your token is derived of CommonToken, then make a RefToken of
your new token (not a RefCount<ADerived> or you have to cast static_cast
them :( ). When trying to access your own token you would then have to use
the get() method to access the underlying pointer to the refcounter then
dynamic_cast or if the situation permits static_cast (but be sure not to
cheat too much with this pointer).

HTH,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 "Don't call me stupid." "Oh, right. To call you stupid would be an insult
    to stupid people. I've known sheep that could outwit you! I've worn
              dresses with higher IQs!" --- A Fish Called Wanda


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Thomas_Krebs at gmx.de  Tue May 27 04:13:32 2003
From: Thomas_Krebs at gmx.de (Thomas Krebs)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] assign a derived token to the lexer
In-Reply-To: <20030527115747.A24059@cs.utwente.nl>
References: <bavaoj+5c08@eGroups.com> <20030527115747.A24059@cs.utwente.nl>
Message-ID: <3ED3485C.7040101@gmx.de>

Ric Klaren wrote:
> 
> Make sure your token is derived of CommonToken, then make a RefToken of
> your new token (not a RefCount<ADerived> or you have to cast static_cast

Ah, I actually did that and that was my problem.

> them :( ). When trying to access your own token you would then have to use
> the get() method to access the underlying pointer to the refcounter then
> dynamic_cast or if the situation permits static_cast (but be sure not to
> cheat too much with this pointer).

That works fine now.
Thanks a lot for your help, Ric!

Thomas
-- 
Dr. Thomas Krebs
Merianstr. 18
90409 N?rnberg
Germany
Tel.: +49 911 563321
Mobil: +49 172 8916010


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue May 27 08:16:55 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Matching & transforming two trees at the sam
	e time
Message-ID: <170826586F3BD511910D0200C110AAA805402416@memail03.bco-home.com>

I like to write a tree grammar without actions to use as an antlr
"superclass."  Then I subclass and specialize the rules I need to do my
transformations.  In the gcc translation framework there is an example of
subclassing: 

class GnuCEmitter extends GnuCTreeParser;

www.codetransform.com/gcc.html

Then in your main code you just run the tree through the tree parsers in the
right order.

Monty

-----Original Message-----
From: uprightness_of_character [mailto:andrei@metalanguage.com] 
Sent: Sunday, May 25, 2003 3:50 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Matching & transforming two trees at the same time


Hi folks,


Consider the following problem: transform C++-like "variable 
definitions with initializers" into C-style definitions (no 
initializers) followed by expressions that perfom initialization. IOW, 
the problem is to transform:

int i = 0, j(5), k = 6;

into:

int i, j, k;
...
i = 0, j = 5, k = 6;

The parsing is done, so we're talking about a tree transformation. 

The way I'm doing things now is, I match and transform the tree into 
the assignments, and at the same time I "collect" the bare definitions 
(without assignments) by hand, and hook it into the AST later. 

Now the code is quite ugly, so what I would really like would be to 
match the same tree twice, and perform a different transformation each 
time.

Any idea on how I can do that? Thanks!


Andrei



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue May 27 10:27:09 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Macro definitions: most elegant solution?
Message-ID: <170826586F3BD511910D0200C110AAA805402419@memail03.bco-home.com>

Take a look at http://www.codetransform.com/filterexample.html.  Using a
parser as a token filter currently has some tricky issues, hopefully
explained well in this article.

Monty

-----Original Message-----
From: uprightness_of_character [mailto:andrei@metalanguage.com] 
Sent: Monday, May 26, 2003 9:44 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Macro definitions: most elegant solution?


One thing about my using antlr is that it's so cool and it eases 
things so much, it makes me feel dumb whenever I am doing something 
tedious: there must be an easier way if I knew the tool better.

I solved my previous problem (separating declarators from initializers 
in a C++-like grammar) by nicely matching the same AST fragment 
against multiple tree parsing rules: one filters out initializers, one 
transforms initializers into expressions, and so on. Sweet!

On to my current problem. I am trying to implement a macro definition 
facility with antlr. The macros are similar to C #defines, except that 
they don't suck :o). They're scoped and obey the language grammar much 
more.

So the syntax for the simplest case would be:

$define name { body }

Later, when seeing "name", the compiler will replace it with "body", 
also stripping the "{" and "}". If you want to define a macro that 
actually contains a "}", you can do that by saying:

$define name ( body )

If you want a macro that contains a "}" and a ")", you can say:

$define name [ body ]

Finally, if you want a macro that contains a "}", a ")", and a "]", 
you can say:

$define name sep body sep

where sep is any user-defined identifier. In all cases, the macro 
processor will eliminate the separators when expanding. I guess this 
looks a little baroque, but I believe it is coherent and useful.

So, the question is now - where to implement this facility? I tried to 
implement it in the lexer, but I hit this problem: upon reading one 
token, the lexer must return /multiple/ tokens to the caller, and it 
looks like the lexer wasn't designed to facilitate that. (Let me add 
in passing that it would be a great feature. Note that the lexer 
design allows to return /less/ tokens than read, through the SKIP 
mechanism.)

Then I said I'd implement the feature straight in the parser, but I 
couldn't make that work because I couldn't figure out how to tell the 
parser "stitch in these new tokens and reparse them". 

So now I am making good progress with using the TokenStream concept. I 
have a MacroProcessor class that sits in between the lexer and the 
parser and reacts upon seeing the '$' token. It then does some 
rudimentary matching algorithm and maintains the macro definition 
tables.

This works ok; however, what I felt the need for was a kind of a 
parser functionality. I mean, I want to define a little grammar such 
as:

macroDefinition
    : DOLLAR "define" name body
    ;

that has tokens as input alphabet, and ouputs tokens as well (instead 
of ASTs). I saw there was a hint at that in the end of http://www.
antlr.org/doc/streams.html. 

So if you have any opinions on how I can improve this design, please 
let me know. Thanks!


Andrei



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From neuroboy at optonline.net  Tue May 27 15:50:12 2003
From: neuroboy at optonline.net (John Clayton)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] problems building antlr using  antlr.build.Tool
In-Reply-To: <4.2.0.58.20030527095555.01491bd8@postoffice.trump.net.au>
Message-ID: <933DDDE9-9095-11D7-A312-000393641890@optonline.net>

Thanks Robert,

Actually, I horsed around with the packaging a bit and created an ant 
build file to build it.  I partitioned the class files away from the 
source (build/classes) -much nicer in an IDE-so you can just clean that 
dir between builds, and squirreled the source away in another dir (src, 
apropos)  off the root so I could work on just the ANTLR source without 
a lot of clutter.  I also looked into the build tool a bit and set it 
up mimic that process as closely as I could (running the jar on the g 
files) and then created a dir for the distribution (dist).  Maybe 
someone more familiar with ANTLR would be interested in having a look 
to see if all is good? Well, if anyone wants it, let me know.

Cheers, John.


On Monday, May 26, 2003, at 07:59  PM, Robert Colquhoun wrote:

> Hello John,
>
> At 12:31 PM 26/05/2003 -0400, John Clayton wrote:
>> I think I may have solved my own problem (it's reaching my code where
>> it's encountering errors ;-) here by setting CLASSPATH in the environ
>> rather than on the command line.  I guess the tool might look for that
>> when it invokes the compiler?  Could be.  Still, any feedback is
>> appreciated.
>
> I have had trouble building antlr from scratch, i created this small 
> build
> script to do it:
>
> $ cat build
> find antlr -name '*.class' -exec rm {} \;
> javac -classpath . antlr/build/*.java
> javac -classpath . antlr/J*.java
> java -classpath . antlr.build.Tool build
> java -classpath . antlr.build.Tool jar
>
> (Run from root directory of distribution)
>
> First time you run this you might need to chmod to 660 all .class files
> with the distribution as they are set read only.
>
>   - Robert
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
Regards,

John Clayton

----------------------------------
neuroboy@optonline.net
----------------------------------
How glorius it is to be an Exception, and how painful.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From olivier_randria at yahoo.com  Wed May 28 02:17:39 2003
From: olivier_randria at yahoo.com (Olivier Randriamanana)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] MSVC 6 ANTLR build related question
In-Reply-To: <933DDDE9-9095-11D7-A312-000393641890@optonline.net>
Message-ID: <20030528091739.35526.qmail@web20008.mail.yahoo.com>

Hello,

I'm a poor ANTLR 1st timer, and was a long way from
building an ANTLR 2.7.2 static lib with MSVC 6.0. I
have a couple of questions related to this. 

I've paid much attention to read the documentation and
used the workspace and project files in lib\cpp\MSVC,
and copied them in "lib\cpp\". However nothing went
well as the project file was not recognized by MSVC.
My first question: is it me/my distribution or did
everything work well for you out-of-the-tarball ?

I eventually used the files lib\cpp\MSVC-Dll. MSVC was
happy with the project file this time but I had to
recreate the hpp and cpp entries in the file groups.
Yet it did not compile because there were some
problems "external linkage needed for symbol to be
imported/exported". So I #define-ed ANTLR_EXPORTS in
the project settings, which fixed all error messages
but one, concerning the AST pointer declared at the
end of baseAST.cpp (I simply removed ANTLR_API in
front of it). 
My second question: are these the right things to do,
or do you have better modifications to suggest to get
things up and running ??

Thanks for your time and (hopefully) lights!

Olivier


I'm an ANTLR 1st timer. I've had troubles building
ANTLR as a static lib. Perusing the documentation, I
read I had to use the project/workspace files in
lib\cpp\MSVC, but MSVC did not recognize it as a
project file (why is still a mystery to me, any
idea??).

So I relied back on files in lib\cpp\MSVC-Dll. I had
to relocate the hpp & cpp files in the project, update
the include path, #define ANTLR_EXPORT, remove the
ANTLR_API qualifier in front of the pointer declared
at the end of baseAST.cpp to have the lib built (why
is still a mystery...

Does any of you had to do the same or did your
distribution built jsut fine right out of the tarball



I've tried to build ANTLR as a static lib using the
cpp\contrib\MSVC-Dll workspace & projects. Right out
of the tarball it did not build: the compiler
complained about variables and stuff not having
external linkage to be exported/imported. After
#defining ANTLR_EXPORT, the compiler only complained
about the pointer defined at the bottom of baseAST.cpp
which was prefixed with ANTLR_API. I fixed this by
removing ANTLR_API.

So here I my questions:
- did some of you had problems building ANTLR as I
did? ("MSVC is the problem" is not a valid answer :) )
- if so, did you do the same modifications to the
projects to have it up and running, or did you do
other more adequate ones ??
- the lib\cpp\ directory features a MSVC project file
that seems to be corrupted, my MSVC does not recognize
it, do you have the same problem ??

Thanks for your time and (hopefully) your responses.

, I had to #define  and
I've ran into compilation problems

__________________________________
Do you Yahoo!?
Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
http://calendar.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Wed May 28 02:53:56 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] MSVC 6 ANTLR build related question
In-Reply-To: <20030528091739.35526.qmail@web20008.mail.yahoo.com>; from olivier_randria@yahoo.com on Wed, May 28, 2003 at 02:17:39AM -0700
References: <933DDDE9-9095-11D7-A312-000393641890@optonline.net> <20030528091739.35526.qmail@web20008.mail.yahoo.com>
Message-ID: <20030528115356.F24059@cs.utwente.nl>

Hi,

On Wed, May 28, 2003 at 02:17:39AM -0700, Olivier Randriamanana wrote:
> I've paid much attention to read the documentation and
> used the workspace and project files in lib\cpp\MSVC,
> and copied them in "lib\cpp\". However nothing went
> well as the project file was not recognized by MSVC.
> My first question: is it me/my distribution or did
> everything work well for you out-of-the-tarball ?

MSVC builds suck at the moment. (per distribution anyways) Check the
archives of yahoogroups for a number of things people sent in. I hope to
provide a snapshot with fixes in due time. Yet no promises when it will be.

> My second question: are these the right things to do,
> or do you have better modifications to suggest to get
> things up and running ??

DLL build is very shady in the distribution. There are a number of posts
describing what to do to get it to work in the archives of the mailing
list.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "You can't expect to wield supreme executive power just because some
   watery tot throws a sword at you!"
  --- Monty Python and the Holy Grail


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From olivier_randria at yahoo.com  Wed May 28 05:41:59 2003
From: olivier_randria at yahoo.com (Olivier Randriamanana)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] MSVC 6 ANTLR build related question
In-Reply-To: <20030528115356.F24059@cs.utwente.nl>
Message-ID: <20030528124159.62362.qmail@web20001.mail.yahoo.com>

Sounds like I forgot the archive...
Thank you Ric!

Olivier




--- Ric Klaren <klaren@cs.utwente.nl> wrote:
> Hi,
> 
> On Wed, May 28, 2003 at 02:17:39AM -0700, Olivier
> Randriamanana wrote:
> > I've paid much attention to read the documentation
> and
> > used the workspace and project files in
> lib\cpp\MSVC,
> > and copied them in "lib\cpp\". However nothing
> went
> > well as the project file was not recognized by
> MSVC.
> > My first question: is it me/my distribution or did
> > everything work well for you out-of-the-tarball ?
> 
> MSVC builds suck at the moment. (per distribution
> anyways) Check the
> archives of yahoogroups for a number of things
> people sent in. I hope to
> provide a snapshot with fixes in due time. Yet no
> promises when it will be.
> 
> > My second question: are these the right things to
> do,
> > or do you have better modifications to suggest to
> get
> > things up and running ??
> 
> DLL build is very shady in the distribution. There
> are a number of posts
> describing what to do to get it to work in the
> archives of the mailing
> list.
> 
> Cheers,
> 
> Ric
> --
>
-----+++++*****************************************************+++++++++-------
>     ---- Ric Klaren ----- j.klaren@utwente.nl -----
> +31 53 4893722  ----
>
-----+++++*****************************************************+++++++++-------
>   "You can't expect to wield supreme executive power
> just because some
>    watery tot throws a sword at you!"
>   --- Monty Python and the Holy Grail
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
http://calendar.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From monaabs at yahoo.com  Wed May 28 09:00:19 2003
From: monaabs at yahoo.com (monaabs)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] support for Japanese characters
Message-ID: <bb2mej+kls3@eGroups.com>

Hi,
I am using ANTLR version 2.6. Actually somebody in my group used it 
to support parsing and he is laid off and i am stuck with providing 
NLS support for japanese characters .
How do i go about it ? 
Any input will be highly appreciated .



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From monaabs at yahoo.com  Wed May 28 09:09:06 2003
From: monaabs at yahoo.com (monaabs)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] japanese support
Message-ID: <bb2mv2+rf6s@eGroups.com>

Hi,
I am using ANTLR version 2.6.0 Actually somebody in my group used it 
to support parsing and he is laid off and i am stuck with providing 
NLS support for japanese characters .
How do i go about it ? 
Any input will be highly appreciated .



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From cgodfrey at epnet.com  Wed May 28 09:28:54 2003
From: cgodfrey at epnet.com (cgodfrey86)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Nested Matching Parenthesis
Message-ID: <bb2o46+j3te@eGroups.com>

Hello,

I'm trying to write a parser grammar that will check for matching 
parenthesis. There can be any number of parenthesis, but they must 
match

So, 
(test) or 
((test)) or 
(((test))) are all valid expressions

(test or 
((test 
etc are all invalid

So, I have a rule like this

expr : PATTERN
      | OPEN_PAREN PATTERN CLOSE_PAREN
      ;

Would it make sense to write rules which count the number of 
consecutive open parens and close parens and check for matches? or is 
there an easier way to approach this that I am missing?

start_parens : (OPEN_PAREN)+;
end_parens : (CLOSE_PARENS)+;

Thanks In Advance


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Wed May 28 09:31:57 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] japanese support
In-Reply-To: <bb2mv2+rf6s@eGroups.com>
Message-ID: <E674D06F-9129-11D7-AA73-000393BB647E@jguru.com>

Hi there.  Ouch.  I'd recommend moving to 2.7.2 as it is lightyears 
ahead in it's stability and unicode support.

Ter

On Wednesday, May 28, 2003, at 09:09  AM, monaabs wrote:

> Hi,
> I am using ANTLR version 2.6.0 Actually somebody in my group used it
> to support parsing and he is laid off and i am stuck with providing
> NLS support for japanese characters .
> How do i go about it ?
> Any input will be highly appreciated .
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Wed May 28 09:35:55 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Nested Matching Parenthesis
In-Reply-To: <bb2o46+j3te@eGroups.com>
Message-ID: <20030528163555.73156.qmail@web20420.mail.yahoo.com>

Not that I know anything but I think the approach you
were taking is the "ANTLR way to do it."  I think your
expr rule would be recursive, though:

> expr : PATTERN
>       | OPEN_PAREN expr CLOSE_PAREN
>       ;

But again, what do I know?

-Matt

--- cgodfrey86 <cgodfrey@epnet.com> wrote:
> Hello,
> 
> I'm trying to write a parser grammar that will check
> for matching 
> parenthesis. There can be any number of parenthesis,
> but they must 
> match
> 
> So, 
> (test) or 
> ((test)) or 
> (((test))) are all valid expressions
> 
> (test or 
> ((test 
> etc are all invalid
> 
> So, I have a rule like this
> 
> expr : PATTERN
>       | OPEN_PAREN PATTERN CLOSE_PAREN
>       ;
> 
> Would it make sense to write rules which count the
> number of 
> consecutive open parens and close parens and check
> for matches? or is 
> there an easier way to approach this that I am
> missing?
> 
> start_parens : (OPEN_PAREN)+;
> end_parens : (CLOSE_PARENS)+;
> 
> Thanks In Advance
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
http://calendar.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From cgodfrey at epnet.com  Wed May 28 09:47:03 2003
From: cgodfrey at epnet.com (cgodfrey86)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Re: Nested Matching Parenthesis
In-Reply-To: <20030528163555.73156.qmail@web20420.mail.yahoo.com>
Message-ID: <bb2p67+oc27@eGroups.com>

Thanks for the 2nd set of eyes. I had it like that at one point and 
changed it.

--- In antlr-interest@yahoogroups.com, Matt Benson <gudnabrsam@y...> 
wrote:
> Not that I know anything but I think the approach you
> were taking is the "ANTLR way to do it."  I think your
> expr rule would be recursive, though:
> 
> > expr : PATTERN
> >       | OPEN_PAREN expr CLOSE_PAREN
> >       ;
> 
> But again, what do I know?
> 
> -Matt
> 
> --- cgodfrey86 <cgodfrey@e...> wrote:
> > Hello,
> > 
> > I'm trying to write a parser grammar that will check
> > for matching 
> > parenthesis. There can be any number of parenthesis,
> > but they must 
> > match
> > 
> > So, 
> > (test) or 
> > ((test)) or 
> > (((test))) are all valid expressions
> > 
> > (test or 
> > ((test 
> > etc are all invalid
> > 
> > So, I have a rule like this
> > 
> > expr : PATTERN
> >       | OPEN_PAREN PATTERN CLOSE_PAREN
> >       ;
> > 
> > Would it make sense to write rules which count the
> > number of 
> > consecutive open parens and close parens and check
> > for matches? or is 
> > there an easier way to approach this that I am
> > missing?
> > 
> > start_parens : (OPEN_PAREN)+;
> > end_parens : (CLOSE_PARENS)+;
> > 
> > Thanks In Advance
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
> 
> __________________________________
> Do you Yahoo!?
> Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
> http://calendar.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From monaabs at yahoo.com  Wed May 28 10:06:57 2003
From: monaabs at yahoo.com (monaabs)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] upgrading from 2.6.0 to 2.7.2
Message-ID: <bb2qbh+j5of@eGroups.com>

Hi,
Thanks for the prompt response .

Since i need to upgrade from 2.6.0 to 2.7.2 .. is there an easy way 
to do that? Will it be allright if i just replace the files used with 
the newer ones ?
Mona

Hi there. Ouch. I'd recommend moving to 2.7.2 as it is lightyears 
ahead in it's stability and unicode support.

Ter

On Wednesday, May 28, 2003, at 09:09 AM, monaabs wrote:

> Hi,
> I am using ANTLR version 2.6.0 Actually somebody in my group used it
> to support parsing and he is laid off and i am stuck with providing
> NLS support for japanese characters .
> How do i go about it ?
> Any input will be highly appreciated .
>
>



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Wed May 28 10:26:07 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] upgrading from 2.6.0 to 2.7.2
In-Reply-To: <bb2qbh+j5of@eGroups.com>
Message-ID: <773B187A-9131-11D7-AA73-000393BB647E@jguru.com>

Hi.  At minimum you must replace the jar and rerun antlr on your 
grammar(s).  From there, try to compile and let us know what happens ;)

Ter

On Wednesday, May 28, 2003, at 10:06  AM, monaabs wrote:

> Hi,
> Thanks for the prompt response .
>
> Since i need to upgrade from 2.6.0 to 2.7.2 .. is there an easy way
> to do that? Will it be allright if i just replace the files used with
> the newer ones ?
> Mona
>
> Hi there. Ouch. I'd recommend moving to 2.7.2 as it is lightyears
> ahead in it's stability and unicode support.
>
> Ter
>
> On Wednesday, May 28, 2003, at 09:09 AM, monaabs wrote:
>
>> Hi,
>> I am using ANTLR version 2.6.0 Actually somebody in my group used it
>> to support parsing and he is laid off and i am stuck with providing
>> NLS support for japanese characters .
>> How do i go about it ?
>> Any input will be highly appreciated .
>>
>>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From brb0522 at yahoo.com  Wed May 28 10:27:47 2003
From: brb0522 at yahoo.com (brb0522)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Fixed Length Tokens
Message-ID: <bb2rij+u1j4@eGroups.com>

Any suggestions on how to handle a file of fixed length fields.
Something like:
IDfirstname   lastname    address    city   <EOL>

I'm trying to get that into a tree structure
ID
|--firstname
|--lastname
|--address
etc...

I found an example out here that will parse CHAR by CHAR for some 
number of characters, but it seems that each character becomes a leaf.

test[int N]
   {int n=N;}
   :
   { n > 1 }? CHAR test[n-1]
   |
   { n == 0 }?
   ;
CHAR is defined as 'a'..'z' | 'A'..'Z' | '0'..'9'

Any help or examples on how to handle fixed length fields will be 
greatly appreciated.

Thanks
-Brian



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From JVincent at Novell.Com  Wed May 28 15:58:34 2003
From: JVincent at Novell.Com (Jeff Vincent)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] Creating a token that spans multiple lines . . .
Message-ID: <sed4eac3.033@prv-mail20.provo.novell.com>

I dredged through the FAQ and didn't notice anything specific (I could have missed it) to this problem.  Hopefully this isn't obvious, I am just returning to ANTLR after a long absence * ack!

The basic question I am trying to answer is:  "How do I create a rule to grab everything between two delimiting tokens?"   I am trying to create a construct in my grammar that parses the following :

group (
   id : x.y.z;
   description : This is a free-form blob of text
     that ends with a semicolon
     ;
   enabled : true;
   )
{
   //block
}

The values associated with the "description" and "id"  literals I want to be free form.  In other words, everything between the ":" and the ";" should be returned as they are just strings.  I created the following literals/rules in my lexer (I've simplified most of it):

tokens {
	GROUP="group";
	ID="id";
	DESC="description";
	ENABLED="enabled";
}
LPAREN : '(';
RPAREN : ')';
COLON : ':';
SEMICOLON : ';';

protected ESCAPE_CHAR :
	'\\' ';'  { $setText(";");  }
	;

TEXT_BLOB :
	':'! ( ESCAPE_CHAR | ~( ';' | '\\') )* ';'!
	{	String temp = $getText;
		temp = temp.toString().trim();
		$setText(temp);
	}
	;

in my parser then has (simplified to help reduce clutter):

	statement :
		(	. . .  //Some other statement rules
		|	GROUP^ LPAREN! groupInfo RPAREN! statement
 		)
		;
	
	groupInfo :
		(	ID^ id:TEXT_BLOB
		|	ENABLED^ COLON! bool SEMICOLON!
		|	DESC^ desc:TEXT_BLOB
		)+ 
		;

This works fine for the "description" and the "id", but when I hit the ENABLED case, the leading COLON is matched as part of the TEXT_BLOB token (as expected).  What I really want (in pseudo grammar code) is :

	groupInfo :
		(	ID^ COLON! <allTheStuffInTheMiddle>  SEMICOLON!
		|	ENABLED^ COLON! bool SEMICOLON!
		|	DESC^  COLON! <allTheStuffInTheMiddle>  SEMICOLON!
		)+ 
		;

Can anyone point me to a FAQ entry (that I may have missed) or offer any hints as to how to grab all the stuff between COLON and SEMICOLON, but only if preceeded by ID or DESC ?

Much thanks,

Jeff



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From monaabs at yahoo.com  Thu May 29 10:40:18 2003
From: monaabs at yahoo.com (Mona Abhichandani)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] upgrading from 2.6.0 to 2.7.2
In-Reply-To: <773B187A-9131-11D7-AA73-000393BB647E@jguru.com>
Message-ID: <20030529174018.32739.qmail@web11804.mail.yahoo.com>

Greetings!!!
 
I am in the process of updating from 2.6.0 to 2.7.2 .. i am running a c++ version so i replaced the ANTLR files with the newer versions . Hope i am going in the right direction .
 
There are three issues which i came across 
 
1)There are new functions added getNumtokens() , gettokenNames() .. what should be the code for the above functions?
 
2)What is the function which replaced SetTokenNames()
 
3)The errors which i encountered are 
  D:\DMATBuilds\Source\DM_Tools\bin\sxl\include\exception(40) : see declaration of 'exception'
COMPUTE_Lexer.cpp(16) : error C2664: '__thiscall antlr::CharScanner::antlr::CharScanner(const class antlr::CharScanner &)' : cannot convert parameter 1 from 'class antlr::CharBuffer *' to 'const class antlr::CharScanner &'
        Reason: cannot convert from 'class antlr::CharBuffer *' to 'const class antlr::CharScanner'
        No constructor could take the source type, or constructor overload resolution was ambiguous
COMPUTE_Lexer.cpp(23) : error C2664: '__thiscall antlr::CharScanner::antlr::CharScanner(const class antlr::CharScanner &)' : cannot convert parameter 1 from 'class antlr::InputBuffer' to 'const class antlr::CharScanner &'
        Reason: cannot convert from 'class antlr::InputBuffer' to 'const class antlr::CharScanner'
        No constructor could take the source type, or constructor overload resolution was ambiguous
COMPUTE_Lexer.cpp(30) : error C2664: '__thiscall antlr::CharScanner::antlr::CharScanner(const class antlr::CharScanner &)' : cannot convert parameter 1 from 'const class antlr::RefCount<class antlr::LexerInputState>' to 'const class antlr::CharScann
er &'
        Reason: cannot convert from 'const class antlr::RefCount<class antlr::LexerInputState>' to 'const class antlr::CharScanner'
        No constructor could take the source type, or constructor overload resolution was ambiguous
 
My source is 
COMPUTE_Lexer::COMPUTE_Lexer(ANTLR_USE_NAMESPACE(std)istream& in)
 : ANTLR_USE_NAMESPACE(antlr)CharScanner(new ANTLR_USE_NAMESPACE(antlr)CharBuffer(in))
{
 setCaseSensitive(true);
 initLiterals();
}
COMPUTE_Lexer::COMPUTE_Lexer(ANTLR_USE_NAMESPACE(antlr)InputBuffer& ib)
 : ANTLR_USE_NAMESPACE(antlr)CharScanner(ib)
{
 setCaseSensitive(true);
 initLiterals();
}
COMPUTE_Lexer::COMPUTE_Lexer(const ANTLR_USE_NAMESPACE(antlr)LexerSharedInputState& state)
 : ANTLR_USE_NAMESPACE(antlr)CharScanner(state)
{
 setCaseSensitive(true);
 initLiterals();
}
 
Looking forward to your response .
 
Best Regards
Mona


Terence Parr <parrt@jguru.com> wrote:
Hi. At minimum you must replace the jar and rerun antlr on your 
grammar(s). From there, try to compile and let us know what happens ;)

Ter

On Wednesday, May 28, 2003, at 10:06 AM, monaabs wrote:

> Hi,
> Thanks for the prompt response .
>
> Since i need to upgrade from 2.6.0 to 2.7.2 .. is there an easy way
> to do that? Will it be allright if i just replace the files used with
> the newer ones ?
> Mona
>
> Hi there. Ouch. I'd recommend moving to 2.7.2 as it is lightyears
> ahead in it's stability and unicode support.
>
> Ter
>
> On Wednesday, May 28, 2003, at 09:09 AM, monaabs wrote:
>
>> Hi,
>> I am using ANTLR version 2.6.0 Actually somebody in my group used it
>> to support parsing and he is laid off and i am stuck with providing
>> NLS support for japanese characters .
>> How do i go about it ?
>> Any input will be highly appreciated .
>>
>>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco




Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 



---------------------------------
Do you Yahoo!?
Free online calendar with sync to Outlook(TM).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030529/42aabff3/attachment.html
From yhhf_dy at yahoo.com  Thu May 29 12:04:24 2003
From: yhhf_dy at yahoo.com (Fan Yang)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] symbol table in C++
Message-ID: <bb5ljo+hqdo@eGroups.com>

Hi,

I want to reimplement the symbol table by using C++ and STL, which is 
described on 
http://developer.java.sun.com/developer/technicalArticles/Parser/Serie
sPt4.

I'm stuck at compiling this implementation. The problem seems forward 
reference or compile order. For example JavaHashtable, Definition and 
SymbolTable, they use each other in the declarations of their class 
members. it compiles correctly in java. but c++ is not the case.

Is there a way to compile it without major modification of the 
design. Or how to modify the symbol table design in order to comform 
with c++ compier?

thank you at advance. 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From monaabs at yahoo.com  Thu May 29 15:24:54 2003
From: monaabs at yahoo.com (monaabs)
Date: Mon Dec 20 16:15:39 2004
Subject: [antlr-interest] C++ has linking errors
Message-ID: <bb61bm+nr2j@eGroups.com>

I invoked Antlr.dsw which is in ..\antlr\antlr-2.7.2\lib\cpp.

I need to generate Antrl.lib to include in my folder .

I am getting linking errors as follows

Linking...
   Creating library Release/antlr.lib and object Release/antlr.exp
TreeParser.obj : error LNK2001: unresolved external symbol "public: 
virtual class std::basic_string<char,struct 
std::char_traits<char>,class std::allocator<char> >  __thiscall 
antlr::ASTNULLType::toStringTree(void)const " (?
toStringTree@ASTNULLType@
antlr@@UBE?AV?$basic_string@DU?$char_traits@D@std@@V?
$allocator@D@2@@std@@XZ)
TreeParser.obj : error LNK2001: unresolved external symbol "public: 
virtual class std::basic_string<char,struct 
std::char_traits<char>,class std::allocator<char> >  __thiscall 
antlr::ASTNULLType::toStringList(void)const " (?
toStringList@ASTNULLType@
antlr@@UBE?AV?$basic_string@DU?$char_traits@D@std@@V?
$allocator@D@2@@std@@XZ)
TreeParser.obj : error LNK2001: unresolved external symbol "public: 
virtual class std::basic_string<char,struct 
std::char_traits<char>,class std::allocator<char> >  __thiscall 
antlr::ASTNULLType::toString(void)const " (?
toString@ASTNULLType@antlr@@U
BE?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@XZ)
TreeParser.obj : error LNK2001: unresolved external symbol "public: 
virtual void __thiscall antlr::ASTNULLType::setType(int)" (?
setType@ASTNULLType@antlr@@UAEXH@Z)
TreeParser.obj : error LNK2001: unresolved external symbol "public: 
virtual void __thiscall antlr::ASTNULLType::setText(class 
std::basic_string<char,struct std::char_traits<char>,class 
std::allocator<char> > const &)" (?setText@ASTNULLType@antlr@@UA
EXABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z)
TreeParser.obj : error LNK2001: unresolved external symbol "public: 
virtual void __thiscall antlr::ASTNULLType::setNextSibling(class 
antlr::ASTRefCount<class antlr::AST>)" (?
setNextSibling@ASTNULLType@antlr@@UAEXV?
$ASTRefCount@VAST@antlr@@@2@@Z)
TreeParser.obj : error LNK2001: unresolved external symbol "public: 
virtual void __thiscall antlr::ASTNULLType::setFirstChild(class 
antlr::ASTRefCount<class antlr::AST>)" (?
setFirstChild@ASTNULLType@antlr@@UAEXV?$ASTRefCount@VAST@antlr@@@2@@Z)
TreeParser.obj : error LNK2001: unresolved external symbol "public: 
virtual void __thiscall antlr::ASTNULLType::initialize(int,class 
std::basic_string<char,struct std::char_traits<char>,class 
std::allocator<char> > const &)" (?initialize@ASTNULLType
@antlr@@UAEXHABV?$basic_string@DU?$char_traits@D@std@@V?
$allocator@D@2@@std@@@Z)
TreeParser.obj : error LNK2001: unresolved external symbol "public: 
virtual void __thiscall antlr::ASTNULLType::initialize(class 
antlr::ASTRefCount<class antlr::AST>)" (?
initialize@ASTNULLType@antlr@@UAEXV?$ASTRefCount@VAST@antlr@@@2@@Z)
TreeParser.obj : error LNK2001: unresolved external symbol "public: 
virtual void __thiscall antlr::ASTNULLType::initialize(class 
antlr::RefCount<class antlr::Token>)" (?
initialize@ASTNULLType@antlr@@UAEXV?$RefCount@VToken@antlr@@@2@@Z)
TreeParser.obj : error LNK2001: unresolved external symbol "public: 
virtual int __thiscall antlr::ASTNULLType::getType(void)const " (?
getType@ASTNULLType@antlr@@UBEHXZ)
TreeParser.obj : error LNK2001: unresolved external symbol "public: 
virtual class std::basic_string<char,struct 
std::char_traits<char>,class std::allocator<char> >  __thiscall 
antlr::ASTNULLType::getText(void)const " (?
getText@ASTNULLType@antlr@@UBE
?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@XZ)
TreeParser.obj : error LNK2001: unresolved external symbol "public: 
virtual class antlr::ASTRefCount<class antlr::AST>  __thiscall 
antlr::ASTNULLType::getNextSibling(void)const " (?
getNextSibling@ASTNULLType@antlr@@UBE?AV?$ASTRefCount@VAST@antlr@@@2
@XZ)
TreeParser.obj : error LNK2001: unresolved external symbol "public: 
virtual class antlr::ASTRefCount<class antlr::AST>  __thiscall 
antlr::ASTNULLType::getFirstChild(void)const " (?
getFirstChild@ASTNULLType@antlr@@UBE?AV?$ASTRefCount@VAST@antlr@@@2@X
Z)
TreeParser.obj : error LNK2001: unresolved external symbol "public: 
virtual void __thiscall antlr::ASTNULLType::addChild(class 
antlr::ASTRefCount<class antlr::AST>)" (?
addChild@ASTNULLType@antlr@@UAEXV?$ASTRefCount@VAST@antlr@@@2@@Z)
TreeParser.obj : error LNK2001: unresolved external symbol "public: 
virtual class std::vector<class antlr::ASTRefCount<class 
antlr::AST>,class std::allocator<class antlr::ASTRefCount<class 
antlr::AST> > >  __thiscall antlr::ASTNULLType::findAllParti
al(class antlr::ASTRefCount<class antlr::AST>)" (?
findAllPartial@ASTNULLType@antlr@@UAE?AV?$vector@V?
$ASTRefCount@VAST@antlr@@@antlr@@V?$allocator@V?
$ASTRefCount@VAST@antlr@@@antlr@@@std@@@std@@V?
$ASTRefCount@VAST@antlr@@@2@@Z)
TreeParser.obj : error LNK2001: unresolved external symbol "public: 
virtual class std::vector<class antlr::ASTRefCount<class 
antlr::AST>,class std::allocator<class antlr::ASTRefCount<class 
antlr::AST> > >  __thiscall antlr::ASTNULLType::findAll(clas
s antlr::ASTRefCount<class antlr::AST>)" (?
findAll@ASTNULLType@antlr@@UAE?AV?$vector@V?
$ASTRefCount@VAST@antlr@@@antlr@@V?$allocator@V?
$ASTRefCount@VAST@antlr@@@antlr@@@std@@@std@@V?
$ASTRefCount@VAST@antlr@@@2@@Z)
TreeParser.obj : error LNK2001: unresolved external symbol "public: 
virtual bool __thiscall antlr::ASTNULLType::equalsTreePartial(class 
antlr::ASTRefCount<class antlr::AST>)const " (?
equalsTreePartial@ASTNULLType@antlr@@UBE_NV?$ASTRefCount@VAST@antl
r@@@2@@Z)
TreeParser.obj : error LNK2001: unresolved external symbol "public: 
virtual bool __thiscall antlr::ASTNULLType::equalsTree(class 
antlr::ASTRefCount<class antlr::AST>)const " (?
equalsTree@ASTNULLType@antlr@@UBE_NV?$ASTRefCount@VAST@antlr@@@2@@Z)
TreeParser.obj : error LNK2001: unresolved external symbol "public: 
virtual bool __thiscall antlr::ASTNULLType::equalsListPartial(class 
antlr::ASTRefCount<class antlr::AST>)const " (?
equalsListPartial@ASTNULLType@antlr@@UBE_NV?$ASTRefCount@VAST@antl
r@@@2@@Z)
TreeParser.obj : error LNK2001: unresolved external symbol "public: 
virtual bool __thiscall antlr::ASTNULLType::equalsList(class 
antlr::ASTRefCount<class antlr::AST>)const " (?
equalsList@ASTNULLType@antlr@@UBE_NV?$ASTRefCount@VAST@antlr@@@2@@Z)
TreeParser.obj : error LNK2001: unresolved external symbol "public: 
virtual bool __thiscall antlr::ASTNULLType::equals(class 
antlr::ASTRefCount<class antlr::AST>)const " (?
equals@ASTNULLType@antlr@@UBE_NV?$ASTRefCount@VAST@antlr@@@2@@Z)
TreeParser.obj : error LNK2001: unresolved external symbol "public: 
virtual class antlr::ASTRefCount<class antlr::AST>  __thiscall 
antlr::ASTNULLType::clone(void)const " (?clone@ASTNULLType@antlr@@UBE?
AV?$ASTRefCount@VAST@antlr@@@2@XZ)
TreeParser.obj : error LNK2001: unresolved external symbol "public: 
virtual char const * __thiscall antlr::ASTNULLType::typeName(void)
const " (?typeName@ASTNULLType@antlr@@UBEPBDXZ)
c:/winnt/system32/antlr.dll : fatal error LNK1120: 24 unresolved 
externals
Error executing link.exe.

antlr.dll - 25 error(s), 273 warning(s)

Any inputs are highl appreciated


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Matthew.Ford at forward.com.au  Thu May 29 16:59:14 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Problem with caseSensitivity
Message-ID: <000701c3263e$4ea7bf30$0200a8c0@NOTEBOOK>

Hi all,
below is a simple grammar which adds one to the height and width of all
images in a html file (to fix a editor bug)
However with
    caseSensitive=false;
when the input is
<link rel="StyleSheet" ...
the output looks like

<link rel="stylesheet" ..

Note: the text inside " " is converted to lowercase.

removing the option caseSensitive=false; fixes this problem but then  the
grammar will only match "img" not "IMG"

What am I missing here?

regards
matthew


{
import java.util.Vector;
import java.io.PrintStream;
}

/** Parse an entire html file, firing events to a single listener
 *  for each image and href link encountered.  All tokens are
 *  defined to skip so the lexer will continue scarfing until EOF.
 was filter=SCARF;
 */
class LinkExtractor extends Lexer;
options {
 //caseSensitive=false;
 k=2;
 filter=SCARF;
 charVocabulary='\3'..'\177';
}

{
 PrintStream output = null;

 public void setOutput(PrintStream out) {
   output = out;
 }


 /** strip quotes from "..." or '...' strings */
 public static String stripQuotes(String src) {
  int h = src.indexOf('"');
  if ( h==-1 ) h = src.indexOf('\'');
  int t = src.lastIndexOf('"');
  if ( t==-1 ) t = src.lastIndexOf('\'');
  if ( h==-1 || t==-1 ) return src;
  return src.substring(h+1,t);
 }

}


IMG : ("<img" {output.print("<img");}
       WS (ATTR)+
    '>' {output.print(">");})
    {$setType(Token.SKIP);}
 ;


protected
ATTR
options {
 ignore=WS;
}
 : w:WORD '=' {output.print(" "+w.getText()+"=");}
  ( s:STRING // output handled below
  | v:WORD {output.print(v.getText());}
  )
  {
    if (s!=null) {
    String heightOrWidth = stripQuotes(s.getText());
    if (( w.getText().equalsIgnoreCase("height") )
      || ( w.getText().equalsIgnoreCase("width") ) ) {
      int size = Integer.parseInt(heightOrWidth);
      size++;
      output.print("\""+size+"\" ");
    } else {
      // some other attribute like src just output
     output.print(s.getText()+" ");
    }
   } else {
     // s==null have output v above
   }
  }
 ;

/** Match until next whitespace; can be file, int, etc... */
protected
WORD: (
   options {
    generateAmbigWarnings=false;
   }
  : 'a'..'z' | '0'..'9' | '/' | '.' | '#' | '_'
  )+
 ;

protected
DIGIT
  : '0'..'9'
  ;

protected
STRING
 : '"' (~'"')* '"'
 | '\'' (~'\'')* '\''
 ;

protected
WS : ( ' ' {output.print(" ");}
  | '\t' {output.print("\t");}
  | '\f'  {output.print("\f");}
  | ( "\r\n"  {output.print("\r\n");} // DOS
   | '\r'   {output.print("\r");} // Macintosh
   | '\n'   {output.print("\r");} // Unix (the right way)
   )
   { newline(); }
  )
  { //$setType(Token.SKIP);
  }
 ;

protected
SCARF
 : WS // track line numbers while you scarf
 | a:. {output.print(a);}
 ;

----------------------------------------------------
Dr. Matthew.Ford
Forward Computing & Control Pty. Ltd.
www.forward.com.au


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Thu May 29 22:40:22 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Re: symbol table in C++
In-Reply-To: <bb5ljo+hqdo@eGroups.com>
Message-ID: <bb6qs6+f1ce@eGroups.com>

The trick is that Java uses references--each of the cross-referenced 
items is actually a pointer, but the compiler hides this--and all 
pointers are of fixed size which makes memory allocation easy.  To 
do the same thing in C++, you will have to make the references 
explicit--"HashTable& foo" for example instead of "Hashtable foo".  
You may also need to declare a forward reference to the class--that 
should just be a line of the form
class Hashtable;

--Loring

--- In antlr-interest@yahoogroups.com, "Fan Yang" <yhhf_dy@y...> 
wrote:
> Hi,
> 
> I want to reimplement the symbol table by using C++ and STL, which 
is 
> described on 
> 
http://developer.java.sun.com/developer/technicalArticles/Parser/Seri
e
> sPt4.
> 
> I'm stuck at compiling this implementation. The problem seems 
forward 
> reference or compile order. For example JavaHashtable, Definition 
and 
> SymbolTable, they use each other in the declarations of their 
class 
> members. it compiles correctly in java. but c++ is not the case.
> 
> Is there a way to compile it without major modification of the 
> design. Or how to modify the symbol table design in order to 
comform 
> with c++ compier?
> 
> thank you at advance.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Matthew.Ford at forward.com.au  Fri May 30 05:33:25 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Error in 2.7.1 translator
Message-ID: <000501c326a7$aa5cfac0$0200a8c0@NOTEBOOK>

Hi
When I add one action I get the error message.  I think this is an error as
the grammar has not changed.

   [antlr] ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
    [antlr] C:\temp\antlrTest\links.g:107: warning: lexical nondeterminism
upon
    [antlr] C:\temp\antlrTest\links.g:107:  k==1:'\t','\n','\u000c','\r',' '
    [antlr] C:\temp\antlrTest\links.g:107:  k==2:<end-of-token>
    [antlr] C:\temp\antlrTest\links.g:107:  between alts 1 and 2 of block

The .g file is shown below
The only difference needed to generate the above error is to change

protected
SCARF
 : WS // track line numbers while you scarf
 | .  ;  // no action here and no errors

TO

protected
SCARF
 : WS // track line numbers while you scarf
 | . {output.print("");}  // added this action to get errors
 ;


regards
Matthew
P.S. I will try this on 2.7.2 tomorrow.


//link.g file
{
import java.util.Vector;
import java.io.PrintStream;
}


/** Parse an entire html file, firing events to a single listener
 *  for each image and href link encountered.  All tokens are
 *  defined to skip so the lexer will continue scarfing until EOF.
 */
class ImageLinkExtractor extends Lexer;
options {
 caseSensitive=false;
 k=2;
 filter=SCARF;
 charVocabulary='\3'..'\u0FFE';
}

{
 PrintStream output = null;

  String tableWidth="65";

 public void setOutput(PrintStream out) {
   output = out;
 }

 /** strip quotes from "..." or '...' strings */
 public static String stripQuotes(String src) {
  int h = src.indexOf('"');
  if ( h==-1 ) h = src.indexOf('\'');
  int t = src.lastIndexOf('"');
  if ( t==-1 ) t = src.lastIndexOf('\'');
  if ( h==-1 || t==-1 ) return src;
  return src.substring(h+1,t);
 }
}


IMG : ("<img" {output.print("<img");}
       WS (ATTR)+
    '>' {output.print(">");})
    {$setType(Token.SKIP);}
 ;

protected
ATTR
options {
 ignore=WS;
}
 : w:WORD '='
  ( s:STRING // output handled below
  | v:WORD {output.print(v.getText());}
  )
  { output.print(" "+w.getText()+"=");
    if (v!=null) {
     output.print(v.getText());
   } else if (s!=null) {
    String heightOrWidth = stripQuotes(s.getText());
    if (( w.getText().equalsIgnoreCase("height") )
      || ( w.getText().equalsIgnoreCase("width") ) ) {
      int size = Integer.parseInt(heightOrWidth);
      size++;
      output.print("\""+size+"\"");
    } else {
      // some other attribute like src just output
     output.print(s.getText()+"");
    }
   } else {
     // s==null have output v above
   }
  }
  ;

/** Match until next whitespace; can be file, int, etc... */
protected
WORD: (
   options {
    generateAmbigWarnings=false;
   }
  : 'a'..'z' | '0'..'9' | '/' | '.' | '#' | '_'
  )+
 ;

protected
STRING
 : '"' (~'"')* '"'
 | '\'' (~'\'')* '\''
 ;


protected
WS : ( ' ' {output.print(" ");}
  | '\t' {output.print("\t");}
  | '\f'  {output.print("\f");}
  | ( "\r\n"  {output.print("\r\n");} // DOS
   | '\r'   {output.print("\r");} // Macintosh
   | '\n'   {output.print("\r");} // Unix (the right way)
   )
   { newline(); }
  )
  { //$setType(Token.SKIP);
  }
 ;

protected
SCARF
 : WS // track line numbers while you scarf
 | . {output.print("");}
 ;
----------------------------------------------------
Dr. Matthew.Ford
Forward Computing & Control Pty. Ltd.
www.forward.com.au


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From j_scandaliaris at yahoo.es  Fri May 30 06:00:48 2003
From: j_scandaliaris at yahoo.es (j_scandaliaris@yahoo.es)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Integration of antlr generated lexer-parser into a GUI app.
Message-ID: <001201c326ab$7e92aa30$e5315393@GAUDI>

Hi,
	I am in the process of integrating a lexer-parser (c++ output) into
an MFC GUI application (visual c++ 6). I am still struggling with some other
problems which I think I will be able to solve on my own, but I realize now
that all my testing was done by creating console applications. 
	Anybody has integrated antlr parsers into gui apps before? My c++
expertise is almost non-existent (not to mention visual c++, which I just
use as a compiler to generate console apps), but I recall reading somewhere
that some problems might arise due to use of stderr, stdout, etc. I searched
the message archive but with no luck. I would appreciate if someone (not
necessarily one :) ) could share with me the problems / solutions (not
necessarily limited to the points mentioned above).
	Thanks in advance,

Jorge 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Anthony.Youngman at ECA-International.com  Fri May 30 06:49:20 2003
From: Anthony.Youngman at ECA-International.com (Anthony W Youngman)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Error in 2.7.1 translator
Message-ID: <C7FE35004D40FD45AA342991B88CE40409A312@lnml1.eca-international.local>

Have you got your curly braces muddled?

The first example (simplified) is:
. ;

The second is:
. { ; }

It should probably be
. { ; } ;

Cheers,
Wol

-----Original Message-----
From: Matthew Ford [mailto:Matthew.Ford@forward.com.au] 
Sent: 30 May 2003 13:33
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Error in 2.7.1 translator


Hi
When I add one action I get the error message.  I think this is an error
as
the grammar has not changed.

   [antlr] ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
    [antlr] C:\temp\antlrTest\links.g:107: warning: lexical
nondeterminism
upon
    [antlr] C:\temp\antlrTest\links.g:107:
k==1:'\t','\n','\u000c','\r',' '
    [antlr] C:\temp\antlrTest\links.g:107:  k==2:<end-of-token>
    [antlr] C:\temp\antlrTest\links.g:107:  between alts 1 and 2 of
block

The .g file is shown below
The only difference needed to generate the above error is to change

protected
SCARF
 : WS // track line numbers while you scarf
 | .  ;  // no action here and no errors

TO

protected
SCARF
 : WS // track line numbers while you scarf
 | . {output.print("");}  // added this action to get errors
 ;


regards
Matthew
P.S. I will try this on 2.7.2 tomorrow.


//link.g file
{
import java.util.Vector;
import java.io.PrintStream;
}


/** Parse an entire html file, firing events to a single listener
 *  for each image and href link encountered.  All tokens are
 *  defined to skip so the lexer will continue scarfing until EOF.
 */
class ImageLinkExtractor extends Lexer;
options {
 caseSensitive=false;
 k=2;
 filter=SCARF;
 charVocabulary='\3'..'\u0FFE';
}

{
 PrintStream output = null;

  String tableWidth="65";

 public void setOutput(PrintStream out) {
   output = out;
 }

 /** strip quotes from "..." or '...' strings */
 public static String stripQuotes(String src) {
  int h = src.indexOf('"');
  if ( h==-1 ) h = src.indexOf('\'');
  int t = src.lastIndexOf('"');
  if ( t==-1 ) t = src.lastIndexOf('\'');
  if ( h==-1 || t==-1 ) return src;
  return src.substring(h+1,t);
 }
}


IMG : ("<img" {output.print("<img");}
       WS (ATTR)+
    '>' {output.print(">");})
    {$setType(Token.SKIP);}
 ;

protected
ATTR
options {
 ignore=WS;
}
 : w:WORD '='
  ( s:STRING // output handled below
  | v:WORD {output.print(v.getText());}
  )
  { output.print(" "+w.getText()+"=");
    if (v!=null) {
     output.print(v.getText());
   } else if (s!=null) {
    String heightOrWidth = stripQuotes(s.getText());
    if (( w.getText().equalsIgnoreCase("height") )
      || ( w.getText().equalsIgnoreCase("width") ) ) {
      int size = Integer.parseInt(heightOrWidth);
      size++;
      output.print("\""+size+"\"");
    } else {
      // some other attribute like src just output
     output.print(s.getText()+"");
    }
   } else {
     // s==null have output v above
   }
  }
  ;

/** Match until next whitespace; can be file, int, etc... */
protected
WORD: (
   options {
    generateAmbigWarnings=false;
   }
  : 'a'..'z' | '0'..'9' | '/' | '.' | '#' | '_'
  )+
 ;

protected
STRING
 : '"' (~'"')* '"'
 | '\'' (~'\'')* '\''
 ;


protected
WS : ( ' ' {output.print(" ");}
  | '\t' {output.print("\t");}
  | '\f'  {output.print("\f");}
  | ( "\r\n"  {output.print("\r\n");} // DOS
   | '\r'   {output.print("\r");} // Macintosh
   | '\n'   {output.print("\r");} // Unix (the right way)
   )
   { newline(); }
  )
  { //$setType(Token.SKIP);
  }
 ;

protected
SCARF
 : WS // track line numbers while you scarf
 | . {output.print("");}
 ;
----------------------------------------------------
Dr. Matthew.Ford
Forward Computing & Control Pty. Ltd.
www.forward.com.au


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.
From yhhf_dy at yahoo.com  Fri May 30 13:16:05 2003
From: yhhf_dy at yahoo.com (Fan Yang)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Re: symbol table in C++
In-Reply-To: <bb6qs6+f1ce@eGroups.com>
Message-ID: <bb8e65+jaqb@eGroups.com>

Thank you for your help.

> The trick is that Java uses references--each of the cross-
referenced 
> items is actually a pointer, but the compiler hides this--and all 
> pointers are of fixed size which makes memory allocation easy.  To 
> do the same thing in C++, you will have to make the references 
> explicit--"HashTable& foo" for example instead of "Hashtable foo".  

That's exactly what I did. I have used pointer/reference throughout 
the new implementation. 

> You may also need to declare a forward reference to the class--that 
> should just be a line of the form class Hashtable;

I have used forward references in the new implementation. But the 
problem is that you can't reference members of the type which is 
defined by forward reference. For example, there are compile errors 
if you use forward referennce for hashtable or symboltable. The 
reason is that JavaHashtable calls SymbolTable.LookupDummy(), and 
SymbolTable calls JavaHashtable.get(). 

The following code snip simplifies the former problem. 
class B;
class A{
private:
 B*pb;
public:
 A(B*b):pb(b){}
 void hello(){
   pb->hello(); // complie error 
 }
};

class B{
private:
 A*pa;
public:
 ...
 void hello(){
 }  
}

I know Template can overcome this simple problem. but the symbol 
table program is much more complex than above example. I'm not sure 
it's a right way to do it. Does there exist some kind of patterns to 
deal with conversion from java to c++ code. thanks.

Fan


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From yhhf_dy at yahoo.com  Fri May 30 13:33:02 2003
From: yhhf_dy at yahoo.com (Fan Yang)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Re: C++ map and symbol table.
In-Reply-To: <b6jls7+76pr@eGroups.com>
Message-ID: <bb8f5u+juhm@eGroups.com>

Ther is a perfect explanation and example about symbol table on 
http://developer.java.sun.com/developer/technicalArticles/Parser/Serie
sPt4. but it's coded in java. 

hope it will be helpful.


--- In antlr-interest@yahoogroups.com, "queengiraffe" 
<cow_jumped_moon@h...> wrote:
> I've written the lexer and parser for my compiler and now want to 
add 
> a symbol table.
> 
> The only problem is I've been instructed to do it using maps from 
the 
> STL. My knowledge of both ANTLR and C++ are limited, and I also 
have 
> never written a symbol table before.
> 
> I was wondering if anyone had an basic example of this being 
achieved 
> in C++ or if they could point be to some reading material that may 
> help.
> 
> Cheers in advance
> 
> Gem x


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From monaabs at yahoo.com  Fri May 30 14:31:35 2003
From: monaabs at yahoo.com (monaabs)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Application crashing on upgrading from 2.6.0 to 2.7.2
Message-ID: <bb8ijn+ap38@eGroups.com>

I have switched to 2.7.2 . In function initLiterals() the application 
is crashing 

SQL_Lexer::SQL_Lexer(ANTLR_USE_NAMESPACE(std)istream& in )
	: ANTLR_USE_NAMESPACE(antlr)CharScanner(new 
ANTLR_USE_NAMESPACE(antlr)CharBuffer(in), true)
{
	setCaseSensitive(true);
	initLiterals();
}

The initLiterals looks like
void SQL_Lexer::initLiterals()
{
	literals["raw"]= 89; -- unhandled exception in parser
	literals["nullif"] = 76;
	literals["indicator"] = 56;
        .....
}

Where am i going wrong with this?

Any inputs will be highly appreciated

Mona


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Matthew.Ford at forward.com.au  Fri May 30 14:45:57 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Error in 2.7.1 translator
References: 
 <C7FE35004D40FD45AA342991B88CE40409A312@lnml1.eca-international.local>
Message-ID: <000b01c326f4$da544f60$0200a8c0@NOTEBOOK>

No I don't think I have
The first example is
>  | .  ;  // no action here and no errors
ie
| .
;  // end of rule

The second example is
>  | . {output.print("");}  // added this action to get errors
>  ;
ie
| .   {   ; }
;  // end of rule

thanks anyway
matthew
----- Original Message -----
From: "Anthony W Youngman" <Anthony.Youngman@ECA-International.com>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, May 30, 2003 11:49 PM
Subject: RE: [antlr-interest] Error in 2.7.1 translator


> Have you got your curly braces muddled?
>
> The first example (simplified) is:
> . ;
>
> The second is:
> . { ; }
>
> It should probably be
> . { ; } ;
>
> Cheers,
> Wol
>
> -----Original Message-----
> From: Matthew Ford [mailto:Matthew.Ford@forward.com.au]
> Sent: 30 May 2003 13:33
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Error in 2.7.1 translator
>
>
> Hi
> When I add one action I get the error message.  I think this is an error
> as
> the grammar has not changed.
>
>    [antlr] ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
>     [antlr] C:\temp\antlrTest\links.g:107: warning: lexical
> nondeterminism
> upon
>     [antlr] C:\temp\antlrTest\links.g:107:
> k==1:'\t','\n','\u000c','\r',' '
>     [antlr] C:\temp\antlrTest\links.g:107:  k==2:<end-of-token>
>     [antlr] C:\temp\antlrTest\links.g:107:  between alts 1 and 2 of
> block
>
> The .g file is shown below
> The only difference needed to generate the above error is to change
>
> protected
> SCARF
>  : WS // track line numbers while you scarf
>  | .  ;  // no action here and no errors
>
> TO
>
> protected
> SCARF
>  : WS // track line numbers while you scarf
>  | . {output.print("");}  // added this action to get errors
>  ;
>
>
> regards
> Matthew
> P.S. I will try this on 2.7.2 tomorrow.
>
>
> //link.g file
> {
> import java.util.Vector;
> import java.io.PrintStream;
> }
>
>
> /** Parse an entire html file, firing events to a single listener
>  *  for each image and href link encountered.  All tokens are
>  *  defined to skip so the lexer will continue scarfing until EOF.
>  */
> class ImageLinkExtractor extends Lexer;
> options {
>  caseSensitive=false;
>  k=2;
>  filter=SCARF;
>  charVocabulary='\3'..'\u0FFE';
> }
>
> {
>  PrintStream output = null;
>
>   String tableWidth="65";
>
>  public void setOutput(PrintStream out) {
>    output = out;
>  }
>
>  /** strip quotes from "..." or '...' strings */
>  public static String stripQuotes(String src) {
>   int h = src.indexOf('"');
>   if ( h==-1 ) h = src.indexOf('\'');
>   int t = src.lastIndexOf('"');
>   if ( t==-1 ) t = src.lastIndexOf('\'');
>   if ( h==-1 || t==-1 ) return src;
>   return src.substring(h+1,t);
>  }
> }
>
>
> IMG : ("<img" {output.print("<img");}
>        WS (ATTR)+
>     '>' {output.print(">");})
>     {$setType(Token.SKIP);}
>  ;
>
> protected
> ATTR
> options {
>  ignore=WS;
> }
>  : w:WORD '='
>   ( s:STRING // output handled below
>   | v:WORD {output.print(v.getText());}
>   )
>   { output.print(" "+w.getText()+"=");
>     if (v!=null) {
>      output.print(v.getText());
>    } else if (s!=null) {
>     String heightOrWidth = stripQuotes(s.getText());
>     if (( w.getText().equalsIgnoreCase("height") )
>       || ( w.getText().equalsIgnoreCase("width") ) ) {
>       int size = Integer.parseInt(heightOrWidth);
>       size++;
>       output.print("\""+size+"\"");
>     } else {
>       // some other attribute like src just output
>      output.print(s.getText()+"");
>     }
>    } else {
>      // s==null have output v above
>    }
>   }
>   ;
>
> /** Match until next whitespace; can be file, int, etc... */
> protected
> WORD: (
>    options {
>     generateAmbigWarnings=false;
>    }
>   : 'a'..'z' | '0'..'9' | '/' | '.' | '#' | '_'
>   )+
>  ;
>
> protected
> STRING
>  : '"' (~'"')* '"'
>  | '\'' (~'\'')* '\''
>  ;
>
>
> protected
> WS : ( ' ' {output.print(" ");}
>   | '\t' {output.print("\t");}
>   | '\f'  {output.print("\f");}
>   | ( "\r\n"  {output.print("\r\n");} // DOS
>    | '\r'   {output.print("\r");} // Macintosh
>    | '\n'   {output.print("\r");} // Unix (the right way)
>    )
>    { newline(); }
>   )
>   { //$setType(Token.SKIP);
>   }
>  ;
>
> protected
> SCARF
>  : WS // track line numbers while you scarf
>  | . {output.print("");}
>  ;
> ----------------------------------------------------
> Dr. Matthew.Ford
> Forward Computing & Control Pty. Ltd.
> www.forward.com.au
>
>
>
>
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Matthew.Ford at forward.com.au  Fri May 30 18:06:48 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Error in 2.7.2
Message-ID: <001301c32710$e95508d0$0200a8c0@NOTEBOOK>

I downloaded 2.7.2 final.  There is an error in the ANTLR Parser

I am getting the following error
    [antlr] ANTLR Parser Generator   Version 2.7.2   1989-2003 jGuru.com
    [antlr] C:\temp\antlrTest\links.g:107: warning:lexical nondeterminism
between alts 1 and 2 of block upon
    [antlr] C:\temp\antlrTest\links.g:107:
k==1:'\t','\n','\u000c','\r',' '
    [antlr] C:\temp\antlrTest\links.g:107:     k==2:<end-of-token>

with (full code below)

protected
SCARF
 : WS // track line numbers while you scarf
 | . {}
 ;

while
protected
SCARF
 : WS // track line numbers while you scarf
 | .
 ;

gives no errors

matthew
----- Original Message -----
From: "Matthew Ford" <Matthew.Ford@forward.com.au>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, May 30, 2003 10:33 PM
Subject: Error in 2.7.1 translator


> Hi
> When I add one action I get the error message.  I think this is an error
as
> the grammar has not changed.
>
>    [antlr] ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
>     [antlr] C:\temp\antlrTest\links.g:107: warning: lexical nondeterminism
> upon
>     [antlr] C:\temp\antlrTest\links.g:107:  k==1:'\t','\n','\u000c','\r','
'
>     [antlr] C:\temp\antlrTest\links.g:107:  k==2:<end-of-token>
>     [antlr] C:\temp\antlrTest\links.g:107:  between alts 1 and 2 of block
>
> The .g file is shown below
> The only difference needed to generate the above error is to change
>
> protected
> SCARF
>  : WS // track line numbers while you scarf
>  | .  ;  // no action here and no errors
>
> TO
>
> protected
> SCARF
>  : WS // track line numbers while you scarf
>  | . {output.print("");}  // added this action to get errors
>  ;
>
>
> regards
> Matthew
> P.S. I will try this on 2.7.2 tomorrow.
>
>
> //link.g file
> {
> import java.util.Vector;
> import java.io.PrintStream;
> }
>
>
> /** Parse an entire html file, firing events to a single listener
>  *  for each image and href link encountered.  All tokens are
>  *  defined to skip so the lexer will continue scarfing until EOF.
>  */
> class ImageLinkExtractor extends Lexer;
> options {
>  caseSensitive=false;
>  k=2;
>  filter=SCARF;
>  charVocabulary='\3'..'\u0FFE';
> }
>
> {
>  PrintStream output = null;
>
>   String tableWidth="65";
>
>  public void setOutput(PrintStream out) {
>    output = out;
>  }
>
>  /** strip quotes from "..." or '...' strings */
>  public static String stripQuotes(String src) {
>   int h = src.indexOf('"');
>   if ( h==-1 ) h = src.indexOf('\'');
>   int t = src.lastIndexOf('"');
>   if ( t==-1 ) t = src.lastIndexOf('\'');
>   if ( h==-1 || t==-1 ) return src;
>   return src.substring(h+1,t);
>  }
> }
>
>
> IMG : ("<img" {output.print("<img");}
>        WS (ATTR)+
>     '>' {output.print(">");})
>     {$setType(Token.SKIP);}
>  ;
>
> protected
> ATTR
> options {
>  ignore=WS;
> }
>  : w:WORD '='
>   ( s:STRING // output handled below
>   | v:WORD {output.print(v.getText());}
>   )
>   { output.print(" "+w.getText()+"=");
>     if (v!=null) {
>      output.print(v.getText());
>    } else if (s!=null) {
>     String heightOrWidth = stripQuotes(s.getText());
>     if (( w.getText().equalsIgnoreCase("height") )
>       || ( w.getText().equalsIgnoreCase("width") ) ) {
>       int size = Integer.parseInt(heightOrWidth);
>       size++;
>       output.print("\""+size+"\"");
>     } else {
>       // some other attribute like src just output
>      output.print(s.getText()+"");
>     }
>    } else {
>      // s==null have output v above
>    }
>   }
>   ;
>
> /** Match until next whitespace; can be file, int, etc... */
> protected
> WORD: (
>    options {
>     generateAmbigWarnings=false;
>    }
>   : 'a'..'z' | '0'..'9' | '/' | '.' | '#' | '_'
>   )+
>  ;
>
> protected
> STRING
>  : '"' (~'"')* '"'
>  | '\'' (~'\'')* '\''
>  ;
>
>
> protected
> WS : ( ' ' {output.print(" ");}
>   | '\t' {output.print("\t");}
>   | '\f'  {output.print("\f");}
>   | ( "\r\n"  {output.print("\r\n");} // DOS
>    | '\r'   {output.print("\r");} // Macintosh
>    | '\n'   {output.print("\r");} // Unix (the right way)
>    )
>    { newline(); }
>   )
>   { //$setType(Token.SKIP);
>   }
>  ;
>
> protected
> SCARF
>  : WS // track line numbers while you scarf
>  | . {output.print("");}
>  ;
> ----------------------------------------------------
> Dr. Matthew.Ford
> Forward Computing & Control Pty. Ltd.
> www.forward.com.au
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From c1test at yahoo.com  Sat May 31 01:46:01 2003
From: c1test at yahoo.com (Howard Lin)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] antlr without JVM?
Message-ID: <bb9q49+1ktg@eGroups.com>

Hello there, I have a need to build a parser/interpreter on a 
platform without JVM (well, at least not without jumping some 
hoops).  Is there anyway to build antlr C++ library and develope on 
this platform?  If necessary, I could run antlr on my PC and generate 
C++ source and build on the target machine.  Any clues/info on what I 
have to do?  Don't really want to go the bison/flex route.  Thanks in 
advance.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Sat May 31 08:59:24 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Re: antlr without JVM?
In-Reply-To: <bb9q49+1ktg@eGroups.com>
Message-ID: <bbajgs+2e1d@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Howard Lin" <c1test@y...> 
wrote:
> Hello there, I have a need to build a parser/interpreter on a 
> platform without JVM (well, at least not without jumping some 
> hoops).  Is there anyway to build antlr C++ library and develope on 
> this platform?  If necessary, I could run antlr on my PC and 
generate 
> C++ source and build on the target machine.  Any clues/info on what 
I 
> have to do?  Don't really want to go the bison/flex route.  Thanks 
in 
> advance.

You have the answer already Howard. Run ANTLR to generate C++ source 
files on your PC and transfer the generated files to your target 
platform.

The generated lexers/parsers/treeparsers do not need a JVM to run 
(unless the generated code is Java).

If the platform can run Mono or dotGNU, C# might be an option too.
 
Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Sat May 31 09:02:53 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Re: High level semantic analysis
In-Reply-To: <bal4sc+p52e@eGroups.com>
Message-ID: <bbajnd+a4hu@eGroups.com>

--- In antlr-interest@yahoogroups.com, "antlrlist" <antlrlist@y...> 
wrote:
> This classes, and many others (like an AST with lexical 
information, 
> or utilities for parsing the command line) are structured in a 
> package that I called antlraux. I'll release it when it is ready.
> 
> Cya,
> 
> Enrique

Enrique,

Care to release antlraux now, even in it's unready state?.

Cheers,

Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Sat May 31 11:26:42 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Re: symbol table in C++
In-Reply-To: <bb8e65+jaqb@eGroups.com>
Message-ID: <bbas52+o1ul@eGroups.com>

If you follow the canonical C++ paradigm, non-inlined method code 
should be defined in .cpp files, with class definitions, including 
method prototypes, in a .h file.  For your example, A::hello() might 
be defined in an A.cpp file that looks like

#include "A.h"     // defines class A
#include "B.h"     // defines calss B

void A::hello() {
    pb->hello();
}

with A.h something like

class B;
class A {
private:
     B *pb;
public:
     A(B *);

    void hello();
};

--Loring


--- In antlr-interest@yahoogroups.com, "Fan Yang" <yhhf_dy@y...> 
wrote:
> Thank you for your help.
> 
> > The trick is that Java uses references--each of the cross-
> referenced 
> > items is actually a pointer, but the compiler hides this--and 
all 
> > pointers are of fixed size which makes memory allocation easy.  
To 
> > do the same thing in C++, you will have to make the references 
> > explicit--"HashTable& foo" for example instead of "Hashtable 
foo".  
> 
> That's exactly what I did. I have used pointer/reference 
throughout 
> the new implementation. 
> 
> > You may also need to declare a forward reference to the class--
that 
> > should just be a line of the form class Hashtable;
> 
> I have used forward references in the new implementation. But the 
> problem is that you can't reference members of the type which is 
> defined by forward reference. For example, there are compile 
errors 
> if you use forward referennce for hashtable or symboltable. The 
> reason is that JavaHashtable calls SymbolTable.LookupDummy(), and 
> SymbolTable calls JavaHashtable.get(). 
> 
> The following code snip simplifies the former problem. 
> class B;
> class A{
> private:
>  B*pb;
> public:
>  A(B*b):pb(b){}
>  void hello(){
>    pb->hello(); // complie error 
>  }
> };
> 
> class B{
> private:
>  A*pa;
> public:
>  ...
>  void hello(){
>  }  
> }
> 
> I know Template can overcome this simple problem. but the symbol 
> table program is much more complex than above example. I'm not 
sure 
> it's a right way to do it. Does there exist some kind of patterns 
to 
> deal with conversion from java to c++ code. thanks.
> 
> Fan


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


