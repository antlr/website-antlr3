From mr_nur2000 at yahoo.com  Thu Apr  1 12:49:41 2004
From: mr_nur2000 at yahoo.com (Mohad Nur)
Date: Mon Dec 20 16:16:35 2004
Subject: [antlr-interest] ANTLR and .NET
In-Reply-To: <c4hfhv+oua8@eGroups.com>
Message-ID: <20040401204941.55904.qmail@web20913.mail.yahoo.com>


Hi,

A newbie in both...........sorry. I want to use antlr with J# from .net. I have a solution that has all the antlr files and i have built that. What next please?

Thank You.


---------------------------------
Do you Yahoo!?
Yahoo! Small Business $15K Web Design Giveaway - Enter today
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040401/4a4c2083/attachment.html
From p98043 at rainbow.cs.unipi.gr  Thu Apr  1 12:48:34 2004
From: p98043 at rainbow.cs.unipi.gr (Anakreon)
Date: Mon Dec 20 16:16:35 2004
Subject: [antlr-interest] visual basic 6 grammar
In-Reply-To: <OFD521085F.C538611D-ON86256E69.0068CE5A-86256E69.00695956@milliman.com>
References: <OFD521085F.C538611D-ON86256E69.0068CE5A-86256E69.00695956@milliman.com>
Message-ID: <406C8022.2090900@rainbow.cs.unipi.gr>

ronald.petty@milliman.com wrote:
> Hi,
> I was wondering if there is anyone with a start of visual basic grammar? 
> To be more specific I really am shotting for VBA.  I noticed some issues 
> with trying to do Visual Basic, but I figured someone has something.
> 
> Thanks
> Ron
> 
I have developed one, used to parse Vb script in an ASP page.
However, since the project is my diplomatic assignment, I can not give it before 
either the assignment is delivered(likely to happen next month) or before I have 
asked permission from the teacher.
If you are interested, I will ask the teacher tomorrow, and if it is OK with 
him, you can have the grammar.
The grammar and all related work will be published under the GPL license.

Anakreon



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ronald.petty at milliman.com  Thu Apr  1 14:06:43 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:35 2004
Subject: [antlr-interest] visual basic 6 grammar
Message-ID: <OFC300788F.DA52954C-ON86256E69.00796261-86256E69.0079CE10@milliman.com>

That is vey nice of you.  I am not a VB guy (learning), how much of a 
subset (I doubt superset) of VBScript is to VB? or VBA?  Either way, I 
would appreciate it.

Thanks
Ron

**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ronald.petty at milliman.com  Thu Apr  1 14:42:35 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:35 2004
Subject: [antlr-interest] output of antlr
Message-ID: <OF9DF72D4C.BC7E6F67-ON86256E69.007C9E65-86256E69.007D167F@milliman.com>

Hi,
When I run Antler (both binary for windows, and java antlr.Tool) the 
output is .cs.  I assume this is C#.  I don't have a C# compiler.  However 
I thought the output was supposed to be Java files.  I don't see a config 
option for this.  Am I doing something wrong?

Thanks
Ron

**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Thu Apr  1 15:17:03 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:35 2004
Subject: [antlr-interest] output of antlr
In-Reply-To: <OF9DF72D4C.BC7E6F67-ON86256E69.007C9E65-86256E69.007D167F@milliman.com>
References: <OF9DF72D4C.BC7E6F67-ON86256E69.007C9E65-86256E69.007D167F@milliman.com>
Message-ID: <AF6BA1C9-8432-11D8-B9D2-000A95891192@cs.usfca.edu>


On Apr 1, 2004, at 2:42 PM, ronald.petty@milliman.com wrote:

> Hi,
> When I run Antler (both binary for windows, and java antlr.Tool) the
> output is .cs.  I assume this is C#.  I don't have a C# compiler.  
> However
> I thought the output was supposed to be Java files.  I don't see a 
> config
> option for this.  Am I doing something wrong?

Hi.  There must be the option language="CSharp" in the grammar file.

Terence
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Thu Apr  1 15:52:38 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:35 2004
Subject: New antlr-interest member
Message-ID: <1080863558.169.79977.w30@yahoogroups.com>


Hello,

This is an automated email message to let you know that
siriusrtx <finish_evil@bigfoot.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From open.zone at virgin.net  Thu Apr  1 21:15:45 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:35 2004
Subject: [antlr-interest] Re: visual basic 6 grammar
In-Reply-To: <406C8022.2090900@rainbow.cs.unipi.gr>
Message-ID: <c4isu1+si3j@eGroups.com>

--- In antlr-interest@yahoogroups.com, Anakreon <p98043@r...> wrote:

> I have developed one, used to parse Vb script in an ASP page.
> However, since the project is my diplomatic assignment, I can not
give it before 
> either the assignment is delivered(likely to happen next month) or
before I have 
> asked permission from the teacher.
> If you are interested, I will ask the teacher tomorrow, and if it is
OK with 
> him, you can have the grammar.

+1

> The grammar and all related work will be published under the GPL
license.

Anakreon,

Please consider releasing your VBScript grammar on a less restrictive
license. The LGPL or BSD/MIT/X11/etc licenses would be more useful for
a grammar. Many of the grammars on www.antlr.org are actually released
as PD contributions.

Cheers,

Micheal
ANTLR/C#




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From open.zone at virgin.net  Thu Apr  1 21:34:02 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:35 2004
Subject: [antlr-interest] Re: ANTLR and .NET
In-Reply-To: <20040401204941.55904.qmail@web20913.mail.yahoo.com>
Message-ID: <c4iu0a+fbnv@eGroups.com>

--- In antlr-interest@yahoogroups.com, Mohad Nur <mr_nur2000@y...> wrote:
> 
> Hi,
> 
> A newbie in both...........sorry. I want to use antlr with J# from .net.

1. Do you mean you want to build the ANTLR tool using J#?

OR

2. Do you mean that you want to use J# as the implementation language
for a project that uses ANTLR to build Lexer(s)/Parser(s)/TreeParser(s)?


For option 1, you obviously need to know something about Java and how
to use J#. 
a) Grab the ANTLR distribution, create a project in J# that includes
the files in the 'antlr' sub directory
b) OPTIONAL but, you might need to bootstrap the process by using the
Java version of ANTLR to generate java source files from the various
ANTLR grammar files (*.g) under the 'antlr' directory tree.
c) Try to build the J# project. If you get any build errors, it should
be straight-forward to fix them. Of course, there might not be any
errors...
d) You should now have a native .NET binary of ANTLR. 

For option 2, all you need to do is use ANTLR in it's default mode
whereby it generates Java. Build the generated files and any other
files you add with J#. I haven't tried this but, it might work. I
guess it's one way to target the Java and .NET platforms
simultaneously. Using IKVM (www.ikvm.net) is another one.

> I have a solution that has all the antlr files and i have built
that. What next please?

This sounds like option 1 to me. In that case, your next step might be
to read these:

1. Ashley's very nice tutorial. The main site seems to be down so try
this PDF version -
http://www.idi.ntnu.no/emner/tdt4205/offentlig/2003/exercise1/antlr%20introduction.pdf

2. http://www.antlr.org/doc/getting-started.html

Cheers,

Micheal
ANTLR/C#




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Thu Apr  1 21:42:20 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:35 2004
Subject: New antlr-interest member
Message-ID: <1080884540.279.18911.w69@yahoogroups.com>


Hello,

This is an automated email message to let you know that
brucequig <bruce@acm.org> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From open.zone at virgin.net  Thu Apr  1 21:43:19 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:35 2004
Subject: [antlr-interest] Re: output of antlr
In-Reply-To: <OF9DF72D4C.BC7E6F67-ON86256E69.007C9E65-86256E69.007D167F@milliman.com>
Message-ID: <c4iuhn+ngpl@eGroups.com>

--- In antlr-interest@yahoogroups.com, ronald.petty@m... wrote:
> Hi,
> When I run Antler (both binary for windows, and java antlr.Tool) the 
> output is .cs.  I assume this is C#.

If you are using the stock ANTLR distribution from the antlr.org
website then, yes, it is C#  ;-)

> I don't have a C# compiler.

A few sources of free (as in beer) C# compilers (watch for line-wrap)
a.
http://www.microsoft.com/downloads/details.aspx?FamilyId=9B3A2CA6-3647-4070-9F41-A333C6B9181D&displaylang=en
b. www.go-mono.net
c. www.dotgnu.org

> However I thought the output was supposed to be Java files.  I don't
see a config 
> option for this.  Am I doing something wrong?

Check the grammar files you are using. They have a language="CSharp"
setting somewhere in them (not sure the quotes are needed/present).
Remove that line or replace it with language="Java" (still not sure
about the quotes).

Look under examples/java/* for ANTLR projects using java...

Cheers,

Micheal
ANTLR/C#





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Thu Apr  1 23:24:32 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:35 2004
Subject: New antlr-interest member
Message-ID: <1080890672.110.51488.w37@yahoogroups.com>


Hello,

This is an automated email message to let you know that
HiKrishnan <hikrishnan@yahoo.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From tineo at ac.uma.es  Thu Apr  1 23:55:05 2004
From: tineo at ac.uma.es (Adrian Tineo Cabello)
Date: Mon Dec 20 16:16:35 2004
Subject: [antlr-interest] Token vs Rule
In-Reply-To: <c4ht8f+7a91@eGroups.com>
References: <c4ht8f+7a91@eGroups.com>
Message-ID: <200404020955.05231.tineo@ac.uma.es>

Hi there, this is my first post (of possibly many as I am going to do heavy 
use of ANTLR in the months ahead).

> What is the difference between putting the token in the tokens
> section vs declaring it as a rule outside of the tokens section.
> They seem to produce different result which I am not quite sure I
> understand:
>
> class ExprLexer extends Lexer;
> options
> {
> 	k = 2;
> }
>
> tokens
> {
> 	STAR		=	"*";
> }
>
> STAR : '*';

"srandm", from what I have read in the docs (ANTLR metalanguage) I think it 
makes no difference, you create the token in both ways. You would normally 
create it in the lexer with the STAR:'*'; syntax. The use of the tokens 
section is appropiate in the tree-parser to define imaginary tokens to 
construct AST nodes, which could be handy to walk the tree.

Hope that helps

Adrian T.




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Fri Apr  2 01:24:14 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:35 2004
Subject: [antlr-interest] initializing a variable within the lexer
In-Reply-To: <c4hn0j+u7op@eGroups.com>
References: <c4hn0j+u7op@eGroups.com>
Message-ID: <20040402092414.GA4494@cs.utwente.nl>

On Thu, Apr 01, 2004 at 06:28:35PM -0000, Jerry Dy wrote:
> My question is, how do I initialize the inTag attribute? I'd like to 
> insert an inTag = false in the lexer's construction. Thanks!

Three approaches, if you're already using a custom constructor add it to that
one (and make sure not to call the default ones). Or use some initialize
method. Or use the noConstructors option to turn off the default
constructors and write your own (do not forget to copy the stuff from the
default constructors though)

Where to add constructors you can find in the cpp-runtime.html doc.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I think we better split up."
  "Good idea. We can do more damage that way."
  --- Ghostbusters



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Fri Apr  2 01:36:45 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:35 2004
Subject: [antlr-interest] Token vs Rule
In-Reply-To: <c4ht8f+7a91@eGroups.com>
References: <c4ht8f+7a91@eGroups.com>
Message-ID: <20040402093645.GB4494@cs.utwente.nl>

On Thu, Apr 01, 2004 at 08:15:11PM -0000, srandm wrote:
> What is the difference between putting the token in the tokens 
> section vs declaring it as a rule outside of the tokens section.  
> They seem to produce different result which I am not quite sure I 
> understand:

Stuff in the tokens section gets tested in rules that have the option
testLiterals turned on. A token defined in a rule will always be matched
and passed on the the parser (unless it's a protected rule)

Usually you turn of testLiterals globally in your lexer grammar then enable
it for a number of rules that match keywords or the likes (check for
instance the tincy example) here the ID rule from it:

ID
options {
        testLiterals = true;
        paraphrase = "an identifier";
}
        :       ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
        ;

ID matches all stuff resembling an identifier, but before the ID token is
returned to the parser a hash table is checked that's generated from the
tokens section and if a match is found that token is returned.	 

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Time what is time - I wish I knew how to tell You why - It hurts to know -
          Aren't we machines - Time what is time - Unlock the door
               - And see the truth - Then time is time again
                From: 'Time what is Time' by Blind Guardian



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From mark.buckle at intechsolutions.co.uk  Fri Apr  2 02:13:44 2004
From: mark.buckle at intechsolutions.co.uk (Mark Buckle)
Date: Mon Dec 20 16:16:35 2004
Subject: [antlr-interest] Token vs Rule
Message-ID: <3088879CDDA4D7118C1E00508B44A7A708BAAF@WALDORF>


Erm, Is there anyway for the parser to communicate with the lexer to pass
calling context down to this rule which will enable
run-time setting of the testLiterals=true option ?
Mark

-----Original Message-----
From: Ric Klaren [mailto:klaren@cs.utwente.nl] 
Sent: 02 April 2004 10:37
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] Token vs Rule


On Thu, Apr 01, 2004 at 08:15:11PM -0000, srandm wrote:
> What is the difference between putting the token in the tokens
> section vs declaring it as a rule outside of the tokens section.  
> They seem to produce different result which I am not quite sure I 
> understand:

Stuff in the tokens section gets tested in rules that have the option
testLiterals turned on. A token defined in a rule will always be matched and
passed on the the parser (unless it's a protected rule)

Usually you turn of testLiterals globally in your lexer grammar then enable
it for a number of rules that match keywords or the likes (check for
instance the tincy example) here the ID rule from it:

ID
options {
        testLiterals = true;
        paraphrase = "an identifier";
}
        :       ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
        ;

ID matches all stuff resembling an identifier, but before the ID token is
returned to the parser a hash table is checked that's generated from the
tokens section and if a match is found that token is returned.	 

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++
-----+++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++
-----+++++-------
 Time what is time - I wish I knew how to tell You why - It hurts to know -
          Aren't we machines - Time what is time - Unlock the door
               - And see the truth - Then time is time again
                From: 'Time what is Time' by Blind Guardian



 
Yahoo! Groups Links



 

_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

This e-mail may contain information that is privileged, confidential or
otherwise protected from disclosure. It must not be used by, or its 
contents copied or disclosed to, persons other than the intended 
recipient. However, the contents of this e-mail may be intercepted, 
monitored or recorded by Insurance Technology Solutions Limited for 
the purposes of ensuring compliance with its policies and procedures. 
Any liability (in negligence or otherwise) arising from any third party
acting, or refraining from acting, on any information contained in this
e-mail is excluded.

Any views expressed in this message are those of the individual
sender and do not necessarily represent the views of
Insurance Technology Solutions Limited.

If you have received this e-mail in error please notify the
originator of the message.

Scanning of this message and addition of this footer is performed
by SurfControl E-mail Filter software in conjunction with 
virus detection software.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Fri Apr  2 02:28:21 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:35 2004
Subject: [antlr-interest] Token vs Rule
In-Reply-To: <3088879CDDA4D7118C1E00508B44A7A708BAAF@WALDORF>
References: <3088879CDDA4D7118C1E00508B44A7A708BAAF@WALDORF>
Message-ID: <20040402102821.GD4494@cs.utwente.nl>

On Fri, Apr 02, 2004 at 11:13:44AM +0100, Mark Buckle wrote:
> Erm, Is there anyway for the parser to communicate with the lexer to pass
> calling context down to this rule which will enable
> run-time setting of the testLiterals=true option ?

Nope, feedback from the parser to the lexer is in general not a good idea.
Due to syntactic predicates in the parser the lexer may be way ahead of the
parser in the input file. The tokens stuff is more for static stuff.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Wit is cultured insolence. --- Aristotle



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ken at imachines.com  Fri Apr  2 03:23:49 2004
From: ken at imachines.com (ksplem)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] line #'s into tree
Message-ID: <c4jig5+tpdb@eGroups.com>

Hi,

A ANTLR newbie here. I've been working with the tool for 2 weeks now 
and I'm very impressed at how well it works and how easy it is to 
use. Kudos to the development team! I already have the basics of my 
compiler working already .NET executables that actually run ;>). I'm 
targetting .net using .Emit calls with the implementation in C#. 

What I'm looking for is a hint on the best way to get a token's or 
parser sentence's line number into the tree (e.g. anAST.getLine() 
perhaps?). From my limited understanding, it seems that I might have 
to override one or more classes perhaps ASTFactory and ASTNode 
(sp?). 

Any help for a rookie?

Thanks in advance,
Kenny




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Fri Apr  2 03:57:39 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:36 2004
Subject: New antlr-interest member
Message-ID: <1080907059.70.41263.w12@yahoogroups.com>


Hello,

This is an automated email message to let you know that
theseoman <fbouvot@cubicsoft.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From notify at yahoogroups.com  Fri Apr  2 03:57:39 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:36 2004
Subject: New antlr-interest member
Message-ID: <1080907059.70.41263.w12@yahoogroups.com>


Hello,

This is an automated email message to let you know that
theseoman <fbouvot@cubicsoft.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From p98043 at rainbow.cs.unipi.gr  Fri Apr  2 04:49:29 2004
From: p98043 at rainbow.cs.unipi.gr (Anakreon)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] visual basic 6 grammar
In-Reply-To: <OFC300788F.DA52954C-ON86256E69.00796261-86256E69.0079CE10@milliman.com>
References: <OFC300788F.DA52954C-ON86256E69.00796261-86256E69.0079CE10@milliman.com>
Message-ID: <406D6159.9040008@rainbow.cs.unipi.gr>

ronald.petty@milliman.com wrote:
> That is vey nice of you.  I am not a VB guy (learning), how much of a 
I am not either.I used vbscript in ASP only, and the main reference I had for 
writing the Lexer, Parser was documentation obtained from Microsoft site on 
scripting technologies.It should be almost everything Visual Basic is except 
that vbscript is loosely typed.
> subset (I doubt superset) of VBScript is to VB? or VBA?  Either way, I 
> would appreciate it.

I hope at Monday or Tuesday the teacher will have answered.
However have in mind that the license is GPL.
Would that license be OK with you?


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From p98043 at rainbow.cs.unipi.gr  Fri Apr  2 04:51:52 2004
From: p98043 at rainbow.cs.unipi.gr (Anakreon)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Re: visual basic 6 grammar
In-Reply-To: <c4isu1+si3j@eGroups.com>
References: <c4isu1+si3j@eGroups.com>
Message-ID: <406D61E8.5060806@rainbow.cs.unipi.gr>

> Please consider releasing your VBScript grammar on a less restrictive
> license. The LGPL or BSD/MIT/X11/etc licenses would be more useful for
> a grammar. Many of the grammars on www.antlr.org are actually released
> as PD contributions.
> 
> Cheers,
> 
> Micheal
> ANTLR/C#
I have ideological reasons which prevent me from releasing any work I do in a 
license other than GPL.


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From Anthony.Youngman at ECA-International.com  Fri Apr  2 04:57:22 2004
From: Anthony.Youngman at ECA-International.com (Anthony Youngman)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Re: visual basic 6 grammar
Message-ID: <C7FE35004D40FD45AA342991B88CE40409AE49@lnml1.eca-international.local>

Does the grammar contain source code? Or is it just bnf notation (or
whatever it's called)?

Because if it's the latter, then the GPL will not infect any generated
lexer/parser, because it will not contain any GPL code.

The problem, of course, is that if it's the former, any generated
lexer/parser will be GPL too, and that then infects any product built
using it.

Cheers,
Wol 

-----Original Message-----
From: Anakreon [mailto:p98043@rainbow.cs.unipi.gr] 
Sent: 02 April 2004 13:52
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] Re: visual basic 6 grammar

> Please consider releasing your VBScript grammar on a less restrictive
> license. The LGPL or BSD/MIT/X11/etc licenses would be more useful for
> a grammar. Many of the grammars on www.antlr.org are actually released
> as PD contributions.
> 
> Cheers,
> 
> Micheal
> ANTLR/C#
I have ideological reasons which prevent me from releasing any work I do
in a 
license other than GPL.


 
Yahoo! Groups Links



 





****************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

****************************************************************************



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From open.zone at virgin.net  Fri Apr  2 06:13:28 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Re: line #'s into tree
In-Reply-To: <c4jig5+tpdb@eGroups.com>
Message-ID: <c4jse8+jm4s@eGroups.com>

--- In antlr-interest@yahoogroups.com, "ksplem" <ken@i...> wrote:
> Hi,
> 
> A ANTLR newbie here. I've been working with the tool for 2 weeks now 
> and I'm very impressed at how well it works and how easy it is to 
> use. Kudos to the development team! I already have the basics of my 
> compiler working already .NET executables that actually run ;>). I'm 
> targetting .net using .Emit calls with the implementation in C#.

What does your compiler do?. What language is it for?

> What I'm looking for is a hint on the best way to get a token's or 
> parser sentence's line number into the tree (e.g. anAST.getLine() 
> perhaps?). From my limited understanding, it seems that I might have 
> to override one or more classes perhaps ASTFactory and ASTNode 
> (sp?). 

You may want to search the archives before posting (even if Yahoo
Groups' search feature *sucks* big time). Anyway, here's a post you
may have found that is relevant to your query:
    http://groups.yahoo.com/group/antlr-interest/message/7078

Before you do anything though, have a look at the 2.7.3 release notes
for C# in:
    http://www.antlr.org/blog/CHANGES-2.7.3.txt

This bit from the release notes is relevant. It basically means that
you do not need to override makeToken()/nextToken() anymore in your lexer:
    "c) CharScanner.cs: makeToken(int) now calls setFilename(string)
on newly created tokens"

Cheers,

Micheal
ANTLR/C#




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From open.zone at virgin.net  Fri Apr  2 06:26:04 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Re: visual basic 6 grammar
In-Reply-To: <406D61E8.5060806@rainbow.cs.unipi.gr>
Message-ID: <c4jt5s+v7tn@eGroups.com>

--- In antlr-interest@yahoogroups.com, Anakreon <p98043@r...> wrote:
> > Please consider releasing your VBScript grammar on a less restrictive
> > license. The LGPL or BSD/MIT/X11/etc licenses would be more useful for
> > a grammar. Many of the grammars on www.antlr.org are actually released
> > as PD contributions.
> > 
> > Cheers,
> > 
> > Micheal
> > ANTLR/C#
> I have ideological reasons which prevent me from releasing any work
I do in a 
> license other than GPL.

Understood. 

Just to be clear, the grammar itself would be GPL but any sources
files created by running ANTLR on the grammar wouldn't be right?.
Perhaps you can specify that explicitly in your license headers.

Cheers,

Micheal




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Fri Apr  2 06:59:28 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:36 2004
Subject: Unsubscription by antlr-interest member
Message-ID: <1080917968.13432.52566.m16@yahoogroups.com>


Hello,

This is an automated email message to let you know that
gbreeds <gbreeds@yahoo.com> unsubscribed from your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a member unsubscribes.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 



From mr_nur2000 at yahoo.com  Fri Apr  2 08:00:49 2004
From: mr_nur2000 at yahoo.com (Mohad Nur)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Re: ANTLR and .NET
In-Reply-To: <c4iu0a+fbnv@eGroups.com>
Message-ID: <20040402160049.89751.qmail@web20910.mail.yahoo.com>



--- In antlr-interest@yahoogroups.com, micheal_jor wrote:


--- In antlr-interest@yahoogroups.com, Mohad Nur wrote:
> 
> Hi,
> 
> A newbie in both...........sorry. I want to use antlr with J# from .net.

1. Do you mean you want to build the ANTLR tool using J#?

OR

2. Do you mean that you want to use J# as the implementation language
for a project that uses ANTLR to build Lexer(s)/Parser(s)/TreeParser(s)?


Micheal
ANTLR/C#

Hi,

Thanks for the help. What i actually wanted to do was just have the opportunity to put a break point in my ANTLR generated parser and follow it as it goes and thats why i am using the .net IDE. I have been able to do that but i am sure there is an easier way of doing it. I created a folder in the project and copied all the antlr 2.7.2 files even those that are not needed and then built it and it worked. Of course i cant filter only the classes that are needed. So what i want to do is to add a reference or something to where ANTLR resides so that .net will know where to find the files.

Cheers.


---------------------------------
Do you Yahoo!?
Yahoo! Small Business $15K Web Design Giveaway - Enter today
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040402/8f659c6d/attachment.html
From ronald.petty at milliman.com  Fri Apr  2 08:16:41 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Re: output of antlr
Message-ID: <OF46607487.D0E2E1EA-ON86256E6A.005958CF-86256E6A.0059C315@milliman.com>

Great, I figured out how to change it.  I have been reading lots of 
articles on Antlr, is that documented?  I might have just missed it. Still 
learning.

Thanks
Ron



"micheal_jor" <open.zone@virgin.net> 
04/01/2004 11:43 PM
Please respond to
antlr-interest@yahoogroups.com


To

antlr-interest@yahoogroups.com
cc





Subject
[antlr-interest] Re: output of antlr 






--- In antlr-interest@yahoogroups.com, ronald.petty@m... wrote:
> Hi,
> When I run Antler (both binary for windows, and java antlr.Tool) the 
> output is .cs.  I assume this is C#.

If you are using the stock ANTLR distribution from the antlr.org
website then, yes, it is C#  ;-)

> I don't have a C# compiler.

A few sources of free (as in beer) C# compilers (watch for line-wrap)
a.
http://www.microsoft.com/downloads/details.aspx?FamilyId=9B3A2CA6-3647-4070-9F41-A333C6B9181D&displaylang=en
b. www.go-mono.net
c. www.dotgnu.org

> However I thought the output was supposed to be Java files.  I don't
see a config 
> option for this.  Am I doing something wrong?

Check the grammar files you are using. They have a language="CSharp"
setting somewhere in them (not sure the quotes are needed/present).
Remove that line or replace it with language="Java" (still not sure
about the quotes).

Look under examples/java/* for ANTLR projects using java...

Cheers,

Micheal
ANTLR/C#





 
Yahoo! Groups Links



 





**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ronald.petty at milliman.com  Fri Apr  2 08:18:42 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] visual basic 6 grammar
Message-ID: <OFABDAF676.779D7851-ON86256E6A.00599388-86256E6A.0059F234@milliman.com>

GPL would be great for everyone, not just me.  Great job.
Ron



Anakreon <p98043@rainbow.cs.unipi.gr> 
04/02/2004 06:49 AM
Please respond to
antlr-interest@yahoogroups.com


To

antlr-interest@yahoogroups.com
cc





Subject
Re: [antlr-interest] visual basic 6 grammar 






ronald.petty@milliman.com wrote:
> That is vey nice of you.  I am not a VB guy (learning), how much of a 
I am not either.I used vbscript in ASP only, and the main reference I had 
for 
writing the Lexer, Parser was documentation obtained from Microsoft site 
on 
scripting technologies.It should be almost everything Visual Basic is 
except 
that vbscript is loosely typed.
> subset (I doubt superset) of VBScript is to VB? or VBA?  Either way, I 
> would appreciate it.

I hope at Monday or Tuesday the teacher will have answered.
However have in mind that the license is GPL.
Would that license be OK with you?


 
Yahoo! Groups Links



 





**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From payasam79 at yahoo.com  Fri Apr  2 08:44:59 2004
From: payasam79 at yahoo.com (Bharath S)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Multiple nondeterminism between lexer rules.
In-Reply-To: <7999C968-7F5E-11D8-B9D2-000A95891192@cs.usfca.edu>
Message-ID: <20040402164459.63555.qmail@web41015.mail.yahoo.com>

Hi Grp,

If I have lexer rules of this form:
-----------------
R1: A|B; 
R2: C|D;

A: INT 'a'; 
B: REAL 'a'; 

C: INT 'c';
D: REAL 'd';
-----------------

Here, I have to resolve nondeterminism betwee A and C
and also between B and D. I tried to have two separate
rules to handle both but it doesnt work. I can only
handle one of them at a time but not both. Any ideas
on how ANTLR handles this?

My determinism resolving rules:
--------------------------------
R1: (INT 'c') => R2 {$setType(R2);}

--- Terence Parr <parrt@cs.usfca.edu> wrote:
> 
> On Mar 26, 2004, at 8:16 AM, Bharath S wrote:
> 
> > Hi Ter,
> >
> > I am not running my antlr project on CVS yet. So
> its
> 
> Well, something (not ANTLR and not Java) is telling
> you something about 
> it being out of sync.  This would explain how two
> grammar files could 
> be out of date.  The token types need to be the same
> across lexer and 
> parser so that 32 means the same token in each, for
> example.
> 
> Ter
> 
> > not a revision control issue. Does token
> disconnect
> > mean that I am referring to the token wrongly in
> my
> > parser? (For eg, defining a token called INT and
> > trying to parse INTEGER, which has not been
> defined?)
> >
> > Please let me know. Another funny observation is
> that,
> > when I have my lex rule as
> >
> ---------------------------------------------------
> > IDENTIFIER options{testLiterals=true;}:
> > ('_'(LETTER|INT))|(LETTER'_'LETTER);
> >
> ---------------------------------------------------
> > it works. But if i change the (LETTER'_'LETTER) in
> the
> > above rule to just (LETTER)+, it says "expecting
> > identifier, found "abcd"; LETTER: ('0'..'9'); by
> the
> > way.
> >
> > Thanks.
> >
> > --- Terence Parr <parrt@cs.usfca.edu> wrote:
> >>
> >> On Mar 25, 2004, at 12:23 PM, Bharath S wrote:
> >>> This happened earlier but the mistake
> disappeared
> >> by
> >>> itself. Also, when i try delete the lexer so
> that
> >> i
> >>> would recreate the lexer instead of overwriting
> >> it, it
> >>> often says "OUT OF SYNC WITH THE SYSTEM".
> >>
> >> Hi. :)  To start with it sounds like you have a
> >> revision control issue.
> >>
> >> Then for your grammar, you probably have a token
> >> type disconnect
> >> between lexer and parser.
> >>
> >> Ter
> >> --
> >> Professor Comp. Sci., University of San Francisco
> >> Creator, ANTLR Parser Generator,
> >> http://www.antlr.org
> >> Cofounder, http://www.jguru.com
> >> Cofounder, http://www.knowspam.net enjoy email
> >> again!
> >> Cofounder, http://www.peerscope.com pure link
> >> sharing
> >>
> >>
> >>
> >>
> >>
> >>
> >> Yahoo! Groups Links
> >>
> >>
> >>      antlr-interest-unsubscribe@yahoogroups.com
> >>
> >>
> >>
> >
> >
> > __________________________________
> > Do you Yahoo!?
> > Yahoo! Finance Tax Center - File online. File on
> time.
> > http://taxes.yahoo.com/filing.html
> >
> >
> >
> > Yahoo! Groups Links
> >
> >
> >
> >
> >
> >
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator,
> http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email
> again!
> Cofounder, http://www.peerscope.com pure link
> sharing
> 
> 
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
>      antlr-interest-unsubscribe@yahoogroups.com
> 
>  
> 


=====
Bharath Sundararaman
Graduate Assistant, CAHS.
(312)-5606532 (M)
http://www.cs.uic.edu/~bsundara

__________________________________
Do you Yahoo!?
Yahoo! Small Business $15K Web Design Giveaway 
http://promotions.yahoo.com/design_giveaway/


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From payasam79 at yahoo.com  Fri Apr  2 08:47:28 2004
From: payasam79 at yahoo.com (Bharath S)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Multiple nondeterminism between lexer rules. (Ignore previous mail)
In-Reply-To: <7999C968-7F5E-11D8-B9D2-000A95891192@cs.usfca.edu>
Message-ID: <20040402164728.10559.qmail@web41002.mail.yahoo.com>

Hi Grp,

If I have lexer rules of this form:
-----------------
R1: A|B; 
R2: C|D;

A: INT 'a'; 
B: REAL 'a'; 

C: INT 'c';
D: REAL 'd';
-----------------

Here, I have to resolve nondeterminism betwee A and C
and also between B and D. I tried to have two separate
rules to handle both but it doesnt work. I can only
handle one of them at a time but not both. Any ideas
on how ANTLR handles this?

My determinism resolving rules:
--------------------------------
R1: (INT 'c') => R2 {$setType(R2);}
    | (INT 'a') => R1 {$setType(R1);}

R2: (REAL 'a') => R1 {$setType(R1);}
    | (REAL 'd') => R2 {$setType(R2);}

---------------------------------------------

--- Terence Parr <parrt@cs.usfca.edu> wrote:
> 
> On Mar 26, 2004, at 8:16 AM, Bharath S wrote:
> 
> > Hi Ter,
> >
> > I am not running my antlr project on CVS yet. So
> its
> 
> Well, something (not ANTLR and not Java) is telling
> you something about 
> it being out of sync.  This would explain how two
> grammar files could 
> be out of date.  The token types need to be the same
> across lexer and 
> parser so that 32 means the same token in each, for
> example.
> 
> Ter
> 
> > not a revision control issue. Does token
> disconnect
> > mean that I am referring to the token wrongly in
> my
> > parser? (For eg, defining a token called INT and
> > trying to parse INTEGER, which has not been
> defined?)
> >
> > Please let me know. Another funny observation is
> that,
> > when I have my lex rule as
> >
> ---------------------------------------------------
> > IDENTIFIER options{testLiterals=true;}:
> > ('_'(LETTER|INT))|(LETTER'_'LETTER);
> >
> ---------------------------------------------------
> > it works. But if i change the (LETTER'_'LETTER) in
> the
> > above rule to just (LETTER)+, it says "expecting
> > identifier, found "abcd"; LETTER: ('0'..'9'); by
> the
> > way.
> >
> > Thanks.
> >
> > --- Terence Parr <parrt@cs.usfca.edu> wrote:
> >>
> >> On Mar 25, 2004, at 12:23 PM, Bharath S wrote:
> >>> This happened earlier but the mistake
> disappeared
> >> by
> >>> itself. Also, when i try delete the lexer so
> that
> >> i
> >>> would recreate the lexer instead of overwriting
> >> it, it
> >>> often says "OUT OF SYNC WITH THE SYSTEM".
> >>
> >> Hi. :)  To start with it sounds like you have a
> >> revision control issue.
> >>
> >> Then for your grammar, you probably have a token
> >> type disconnect
> >> between lexer and parser.
> >>
> >> Ter
> >> --
> >> Professor Comp. Sci., University of San Francisco
> >> Creator, ANTLR Parser Generator,
> >> http://www.antlr.org
> >> Cofounder, http://www.jguru.com
> >> Cofounder, http://www.knowspam.net enjoy email
> >> again!
> >> Cofounder, http://www.peerscope.com pure link
> >> sharing
> >>
> >>
> >>
> >>
> >>
> >>
> >> Yahoo! Groups Links
> >>
> >>
> >>      antlr-interest-unsubscribe@yahoogroups.com
> >>
> >>
> >>
> >
> >
> > __________________________________
> > Do you Yahoo!?
> > Yahoo! Finance Tax Center - File online. File on
> time.
> > http://taxes.yahoo.com/filing.html
> >
> >
> >
> > Yahoo! Groups Links
> >
> >
> >
> >
> >
> >
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator,
> http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email
> again!
> Cofounder, http://www.peerscope.com pure link
> sharing
> 
> 
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
>      antlr-interest-unsubscribe@yahoogroups.com
> 
>  
> 


__________________________________
Do you Yahoo!?
Yahoo! Small Business $15K Web Design Giveaway 
http://promotions.yahoo.com/design_giveaway/


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ronald.petty at milliman.com  Fri Apr  2 08:35:14 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] compiling output
Message-ID: <OFAE0385A3.D39F2EF7-ON86256E6A.0059B677-86256E6A.005B75CB@milliman.com>

If Antlr produces a lexer/parser, is it ok to expect it will compile 
without errors?  I am probably doing something wrong, so here is a 
description.

Download Antrl (tar) for cygwin (v 2.7.2)
extract to c:\antlr-2.7.2
open cygwin bash
cd /cygdrive/c/antlr-2.7.2
export CLASSPATH=.
find | grep java.g
./examples/cpp/java/java.g
cp ./examples/cpp/java/java.g .
java antlr.Tool java.g
gcc *.cpp
... 
millions of lines fly by (errors)
try
gcc *.cpp >& errors
head errors
$ head errors
In file included from JavaLexer.cpp:2:
JavaLexer.hpp:4:28: antlr/config.hpp: No such file or directory
JavaLexer.hpp:6:33: antlr/CommonToken.hpp: No such file or directory
JavaLexer.hpp:7:33: antlr/InputBuffer.hpp: No such file or directory
JavaLexer.hpp:8:28: antlr/BitSet.hpp: No such file or directory
JavaLexer.hpp:10:33: antlr/CharScanner.hpp: No such file or directory
In file included from JavaLexer.cpp:2:
JavaLexer.hpp:11: parse error before `antlr'
JavaLexer.hpp:24: `antlr' was not declared in this scope
JavaLexer.hpp:24: parse error before `&' token
.....
I assume I am not using gcc correctly (assuming I didn't incorrectly use 
Antlr).

Does that sound correct?  I have never had a working lexer, so I don't 
know?

Thanks
Ron


**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ken at imachines.com  Fri Apr  2 09:06:52 2004
From: ken at imachines.com (Kenny Lindberg)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Re: line #'s into tree
In-Reply-To: <c4jse8+jm4s@eGroups.com>
Message-ID: <c4k6jc+vn5s@eGroups.com>

Micheal,

Thanks for the hints, I'll take a look at the links and at 2.7.3 
which I just downloaded.

> What does your compiler do?. What language is it for?

It's not really 'general purpose'. My customer builds electronic 
test equipment and they are going to emulate/execute some older 
PASCAL-like test languages on their hardware which already hosts or 
runs under .NET. So far so good with ANTLR.

Kenny

--- In antlr-interest@yahoogroups.com, "micheal_jor" 
<open.zone@v...> wrote:
> --- In antlr-interest@yahoogroups.com, "ksplem" <ken@i...> wrote:
> > Hi,
> > 
> > A ANTLR newbie here. I've been working with the tool for 2 weeks 
now 
> > and I'm very impressed at how well it works and how easy it is 
to 
> > use. Kudos to the development team! I already have the basics of 
my 
> > compiler working already .NET executables that actually run ;>). 
I'm 
> > targetting .net using .Emit calls with the implementation in C#.
> 
> What does your compiler do?. What language is it for?
> 
> > What I'm looking for is a hint on the best way to get a token's 
or 
> > parser sentence's line number into the tree (e.g. anAST.getLine
() 
> > perhaps?). From my limited understanding, it seems that I might 
have 
> > to override one or more classes perhaps ASTFactory and ASTNode 
> > (sp?). 
> 
> You may want to search the archives before posting (even if Yahoo
> Groups' search feature *sucks* big time). Anyway, here's a post you
> may have found that is relevant to your query:
>     http://groups.yahoo.com/group/antlr-interest/message/7078
> 
> Before you do anything though, have a look at the 2.7.3 release 
notes
> for C# in:
>     http://www.antlr.org/blog/CHANGES-2.7.3.txt
> 
> This bit from the release notes is relevant. It basically means 
that
> you do not need to override makeToken()/nextToken() anymore in 
your lexer:
>     "c) CharScanner.cs: makeToken(int) now calls setFilename
(string)
> on newly created tokens"
> 
> Cheers,
> 
> Micheal
> ANTLR/C#



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Fri Apr  2 11:16:05 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:36 2004
Subject: Unsubscription by antlr-interest member
Message-ID: <1080933365.253.97066.w46@yahoogroups.com>


Hello,

This is an automated email message to let you know that
meissnersd <meissnersd@yahoo.com> unsubscribed from your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a member unsubscribes.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From open.zone at virgin.net  Fri Apr  2 12:07:22 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Re: ANTLR and .NET
In-Reply-To: <20040402160049.89751.qmail@web20910.mail.yahoo.com>
Message-ID: <c4kh5q+h2j4@eGroups.com>

> Hi,
> 
> Thanks for the help. What i actually wanted to do was just have the
opportunity to put a break point in my ANTLR generated parser and
follow it as it goes and thats why i am using the .net IDE. I have
been able to do that but i am sure there is an easier way of doing it.
I created a folder in the project and copied all the antlr 2.7.2 files
even those that are not needed and then built it and it worked. Of
course i cant filter only the classes that are needed. So what i want
to do is to add a reference or something to where ANTLR resides so
that .net will know where to find the files.
> 
> Cheers.

Hmm, HTML post....not cool.

Since you are using J#, find what the steps are for adding a reference
to the ANTLR C#/.NET runtime assembly in your project. You will need
to build the runtime assembly first though:
    http://www.antlr.org/doc/csharp-runtime.html#t1

Your projects won't normally contain the source files for the ANTLR
runtime library directly. The library's binary(ies) just need to be
available/linked to your project. If using Java this usually means it
should be in the CLASSPATH. For .NET, you need to have your project
(or the command-line compiler) reference the binary.

Cheers,

Micheal
ANTLR/C#



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From open.zone at virgin.net  Fri Apr  2 12:21:00 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Re: Multiple nondeterminism between lexer rules. (Ignore previous mail)
In-Reply-To: <20040402164728.10559.qmail@web41002.mail.yahoo.com>
Message-ID: <c4khvc+np4r@eGroups.com>

--- In antlr-interest@yahoogroups.com, Bharath S <payasam79@y...> wrote:
> Hi Grp,
> 
> If I have lexer rules of this form:
> -----------------
> R1: A|B; 
> R2: C|D;
> 
> A: INT 'a'; 
> B: REAL 'a'; 
> 
> C: INT 'c';
> D: REAL 'd';
> -----------------
> 
> Here, I have to resolve nondeterminism betwee A and C
> and also between B and D. I tried to have two separate
> rules to handle both but it doesnt work. I can only
> handle one of them at a time but not both. Any ideas
> on how ANTLR handles this?
> 
> My determinism resolving rules:
> --------------------------------
> R1: (INT 'c') => R2 {$setType(R2);}
>     | (INT 'a') => R1 {$setType(R1);}
> 
> R2: (REAL 'a') => R1 {$setType(R1);}
>     | (REAL 'd') => R2 {$setType(R2);}
> 
> ---------------------------------------------

You should merge those rules into a single one like this:

R1 : INT 
    ( 'c'   { $setType(R2); }
    | 'a'
    )
  | REAL
    ( 'a'
    | 'd'  { $setType(R2); }
    )
  ;

Cheers,

Micheal
ANTLR/C#



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From markl at glyphic.com  Fri Apr  2 12:54:21 2004
From: markl at glyphic.com (Mark)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Re: compiling output
In-Reply-To: <OFAE0385A3.D39F2EF7-ON86256E6A.0059B677-86256E6A.005B75CB@milliman.com>
Message-ID: <c4kjtt+73lq@eGroups.com>

--- In antlr-interest@yahoogroups.com, ronald.petty@m... wrote:
> If Antlr produces a lexer/parser, is it ok to expect it will compile 
> without errors? 
Yes, but only after you build and install the antlr C++ support library!  

In order to compile antlr generated C++ you'll need to have access to the C++ antlr 
include files, and to link you'll need access to the antlr support lib.  If you install antlr, 
these are put in /usr/local/linclude/antlr/*.hpp and /usr/local/lib/libantlr.a.  The C++ 
compiler should find them there.

If you don't want to install antlr on your system, you'll still need to build the lib, and set up 
your compile environment to search for includes in lib/cpp in the antlr distribution (or 
wherever you copied it to.), and you'll probably have to mention libantlr.a (wherever you 
put it) by hand.

- Mark




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From open.zone at virgin.net  Fri Apr  2 12:14:10 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Re: output of antlr
In-Reply-To: <OF46607487.D0E2E1EA-ON86256E6A.005958CF-86256E6A.0059C315@milliman.com>
Message-ID: <c4khii+fl68@eGroups.com>

--- In antlr-interest@yahoogroups.com, ronald.petty@m... wrote:
> Great, I figured out how to change it.  I have been reading lots of 
> articles on Antlr, is that documented?  I might have just missed it.
Still 
> learning.

Yes. Here's a link.
   http://www.antlr.org/doc/options.html#_bb3

Hmm, just noticed it doesn't specify CSharp as an option. Note to
self/Ter...."Pls remember to fix doc."

Cheers,

Micheal
ANTLR/C#



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From serge.bakkal at wanadoo.fr  Fri Apr  2 20:15:40 2004
From: serge.bakkal at wanadoo.fr (Serge Bakkal)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Specifying the Parser/Lexer parent classes
References: <c4khii+fl68@eGroups.com>
Message-ID: <000d01c41932$53148750$0100a8c0@pbasoftserv02>

Hi ,
I'd like to have generated grammar lexer and parser classes derived
from custom classes (these deriving from antlr ones ),
but the grammar itself wont be inheriting a super grammar

Should antlr genreration code be modified to achieve this , or can this be
specified from
command line arguments ?

Regards
Serge Bakkal



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From lgc at mail1.jpl.nasa.gov  Fri Apr  2 20:57:26 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Re: Specifying the Parser/Lexer parent classes
In-Reply-To: <000d01c41932$53148750$0100a8c0@pbasoftserv02>
Message-ID: <c4lg7m+hk6b@eGroups.com>

Serge--

This is already supported via the superClass feature (documented under
the various  xxx Class Definitions sections in the ANTLR manual.

--Loring

--- In antlr-interest@yahoogroups.com, "Serge Bakkal"
<serge.bakkal@w...> wrote:
> Hi ,
> I'd like to have generated grammar lexer and parser classes derived
> from custom classes (these deriving from antlr ones ),
> but the grammar itself wont be inheriting a super grammar
> 
> Should antlr genreration code be modified to achieve this , or can
this be
> specified from
> command line arguments ?
> 
> Regards
> Serge Bakkal



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From serge.bakkal at wanadoo.fr  Fri Apr  2 21:59:02 2004
From: serge.bakkal at wanadoo.fr (Serge Bakkal)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Re: Specifying the Parser/Lexer parent classes
References: <c4lg7m+hk6b@eGroups.com>
Message-ID: <001f01c41940$c3de65b0$0100a8c0@pbasoftserv02>


> This is already supported via the superClass feature (documented under
> the various  xxx Class Definitions sections in the ANTLR manual.
> 
> --Loring
Great , and nice to find somebody right now :)
Serge Bakkal



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From p98043 at rainbow.cs.unipi.gr  Sat Apr  3 02:42:06 2004
From: p98043 at rainbow.cs.unipi.gr (Anakreon)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] visual basic 6 grammar
In-Reply-To: <OFABDAF676.779D7851-ON86256E6A.00599388-86256E6A.0059F234@milliman.com>
References: <OFABDAF676.779D7851-ON86256E6A.00599388-86256E6A.0059F234@milliman.com>
Message-ID: <406E94FE.3010704@rainbow.cs.unipi.gr>

This is the grammar.
The act files contain the code.
To merge code and grammar use annotation tool which can be obtained from the 
files section of the antlr user group at yahoo.
The archive containes the Lexer, Parser and TreeParser.
I expect that the code found at  tree_vbs_php.act should not be usefull for you
since it is responsible for translation of vb code into php.

The code generated from antlr based on this grammar files are also covered from 
GPL IMHO.
If this is not the case, than if a C file is under GPL then the assembly files 
generated from gcc would not be restriked from GPL.


Anyway, in a month I will release all the project, which aims to help 
translating sites written in ASP into PHP.


Anakreon.


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: vb.tgz
Type: application/x-vnd.mozilla.guess-from-ext
Size: 20812 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20040403/befe65c2/vb.bin
From open.zone at virgin.net  Sat Apr  3 11:28:03 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Re: !, for non contributing elements of the rule's text.
In-Reply-To: <1080074684.2851.18.camel@rats>
Message-ID: <c4n383+gk9v@eGroups.com>

--- In antlr-interest@yahoogroups.com, C?sar L?pez Natar?n
<cesar@c...> wrote:
> On Sun, 2004-03-14 at 19:58, micheal_jor wrote:
> 
> > Hiya C??sar,
> > 
> 
> Hello!

Yep. Hi. Sorry about the delay in replying.

> > PPS  If you have tested build scripts for ANTLR/C# on Mono, I'd be
> > happy to incorporate them in the standard distro.
> 
> Here it's a makefile for building the C# code generation and runtime
> support.

Cool!. Thanks.

> It must go at: antlr-2.7.3/lib/csharp/src
> 
> antlr.runtime.dll and antlr.runtime.dll.so are the good ones which have
> to be copied to the class lib path for .net assemblies.
> 
> Hope it helps.

Yep. Added. Would be part of next refresh of the 2.7.3 distro.

Cheers,

Micheal

PS  Just grabbed the msc and mono 0.31 distros. Once I've got my
virtual machine fully installed, I'll give it a whirl. I'm currently
deciding *which* Linux to use now.... ;-)

PPS  Do you have any comments about using Mono with FreeBSD rather
than Linux?




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Sat Apr  3 13:12:59 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:36 2004
Subject: New antlr-interest member
Message-ID: <1081026779.106.1126.w71@yahoogroups.com>


Hello,

This is an automated email message to let you know that
ronietang <ronietang@yahoo.ca> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From ronietang at yahoo.ca  Sat Apr  3 13:19:17 2004
From: ronietang at yahoo.ca (ronietang)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Help!!!
In-Reply-To: <c4isu1+si3j@eGroups.com>
Message-ID: <c4n9ol+i6ad@eGroups.com>

Hello, 

I am a newbie in antlr. 

I believe I have configed the CLASSPATH correctly, because
I can use antlr.Tool expr.g to generate:

ExprLexer.java
ExprParser.java
ExprParserTokenTypes.java
ExprParserTokenTypes.txt

It seems work well.

Then I type javac *.java, nothing wrong.
But when I want to run the Main class: java Main,
I always got NoClassDefException :(

I 've tried many times and the results are same.
By the way, when I compiled the *.java files, if I compile
them individulely, I will got errors. Just like it cannot find
the antlr.* package.

If you can help me with this, it would be very nice.

Thank you!

Tonie




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Sat Apr  3 23:06:59 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:36 2004
Subject: New antlr-interest member
Message-ID: <1081062419.121.89443.w75@yahoogroups.com>


Hello,

This is an automated email message to let you know that
tim_c_programmer <tim@monster-works.co.nz> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From ronald.petty at milliman.com  Sun Apr  4 13:48:16 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Help!!!
In-Reply-To: <c4n9ol+i6ad@eGroups.com>
Message-ID: <OFBA31AE7F.94B4CD29-ON86256E6C.0071DAAD-86256E6C.007287BD@milliman.com>

Hi Tonie,
Not sure this will help, but I am attempting the same thing and haven't 
finished it yet either.  To compile I did

// cd to the antlr dir, I haven't figured out the right way in cygwin to 
set my classpath
javac -cp ./antlr.jar *.java

That should fix the second issue.

Now what you can't find Main, I am not sure.

I do not have a Main.class, you have to create it I think (there may be 
one).  You list the generated files (ExprLexer.java, ExprParser.java, 
ExprParserTokenTypes.java, ExprParserTokenTypes.txt), but nothing about 
Main.java.  Was there a Main.java generated?  If not, create one and 
inside main() do

ExprLexer el = new ExprLexer(...input stream...);
ExprParser ep = new ExprParser(el);
ep.startsymbol // not sure about after this...

Hope I didn't say something incorrect (as I am learning also).

Good luck.

Ron





"ronietang" <ronietang@yahoo.ca> 
04/03/2004 03:19 PM
Please respond to
antlr-interest@yahoogroups.com


To
antlr-interest@yahoogroups.com
cc

Subject
[antlr-interest] Help!!! 






Hello, 

I am a newbie in antlr. 

I believe I have configed the CLASSPATH correctly, because
I can use antlr.Tool expr.g to generate:

ExprLexer.java
ExprParser.java
ExprParserTokenTypes.java
ExprParserTokenTypes.txt

It seems work well.

Then I type javac *.java, nothing wrong.
But when I want to run the Main class: java Main,
I always got NoClassDefException :(

I 've tried many times and the results are same.
By the way, when I compiled the *.java files, if I compile
them individulely, I will got errors. Just like it cannot find
the antlr.* package.

If you can help me with this, it would be very nice.

Thank you!

Tonie




 
Yahoo! Groups Links



 




**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040404/1aa96bc7/attachment.html
From mr_nur2000 at yahoo.com  Sun Apr  4 14:54:13 2004
From: mr_nur2000 at yahoo.com (Mohad Nur)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Help!!!
In-Reply-To: <c4n9ol+i6ad@eGroups.com>
Message-ID: <20040404215413.90128.qmail@web20914.mail.yahoo.com>


>Hello, 
>
>I am a newbie in antlr. 
>
>I believe I have configed the CLASSPATH correctly, because
>I can use antlr.Tool expr.g to generate:

>ExprLexer.java
>ExprParser.java
>ExprParserTokenTypes.java
>ExprParserTokenTypes.txt
>
>It seems work well.

>Then I type javac *.java, nothing wrong.
>But when I want to run the Main class: java Main,
>I always got NoClassDefException :(

>I 've tried many times and the results are same.
>By the way, when I compiled the *.java files, if I compile
>them individulely, I will got errors. Just like it cannot find
>the antlr.* package.

>If you can help me with this, it would be very nice.

>Thank you!

>Tonie


Hi Tonie,

A newbie like u here i had the same problems when i started........i found out that it is beacause of the directory structure and the package statement.If you have the statement:

package antlr;

There has to be a corresponding directory 'antlr' which the classes will be placed when they are being compiled. so to compile you should give the command 'javac *.java -d antlr' and it should work.

Hope That helps,

Nur




---------------------------------
Do you Yahoo!?
Yahoo! Small Business $15K Web Design Giveaway - Enter today
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040404/e1064b48/attachment.html
From serge.bakkal at wanadoo.fr  Sun Apr  4 22:09:29 2004
From: serge.bakkal at wanadoo.fr (Serge Bakkal)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Per Block Parsing Errors Handling
References: <20040404215413.90128.qmail@web20914.mail.yahoo.com>
Message-ID: <004801c41acc$2c82b2b0$0100a8c0@pbasoftserv02>

Hi ,
I would like the parser the be "fault tolerant" , that is ,
say : while parsing java , report errors in a function scope ,
and keep going processing parent scopes :
what is the best strategy to achieve this ?

Regards
Serge Bakkal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040405/abb43e58/attachment.html
From klaren at cs.utwente.nl  Mon Apr  5 01:56:11 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Help!!!
In-Reply-To: <c4n9ol+i6ad@eGroups.com>
References: <c4isu1+si3j@eGroups.com> <c4n9ol+i6ad@eGroups.com>
Message-ID: <20040405085610.GA18079@cs.utwente.nl>

On Sat, Apr 03, 2004 at 09:19:17PM -0000, ronietang wrote:
> I believe I have configed the CLASSPATH correctly, because
> I can use antlr.Tool expr.g to generate:

Do you have the directory with the example in your classpath (this can be
the full path to your example or the . directory signifying the current
directory ?

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  There are 10 kinds of people - those that understand binary and
  those that don't. --- Unknown



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From Anthony.Youngman at ECA-International.com  Mon Apr  5 02:18:54 2004
From: Anthony.Youngman at ECA-International.com (Anthony Youngman)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] visual basic 6 grammar
Message-ID: <C7FE35004D40FD45AA342991B88CE40409AE4E@lnml1.eca-international.local>

Sounds to me like we have both a language problem (English is not your
first language? :-) and also a copyright-understanding problem.

Does your grammar (I haven't looked) contain any code? Because if it
doesn't, then the output file is not GPL. BECAUSE IT DOESN'T CONTAIN ANY
OF YOUR CODE!

The point to note is that when gcc compiles a c file, it *translates*
from c to object. The purpose of the object code is the same as the
purpose of the source code. Translation is a right restricted by
copyright.

But when you feed a grammar into Antlr, the stuff that comes out (the
lexer/parser) is NOT a translation. Most or all of it is *other*
*people's* code, and is licenced the way THEY say, not you. If your
grammar contains code that makes its way into the lexer/parser, then the
lexer/parser has multiple licences and it is YOUR responsibility to
avoid a licence clash. Antlr is NOT a compiler, like gcc. It is an
interpreter/code-generator, like lex/yacc/bison (and they have funny
licences, for *precisely* this reason!).

I know it's not a good analogy - but it's close - if you write a
sendmail m4 configuration file, you don't expect that to turn sendmail
into gpl code, do you?

Cheers,
Wol

-----Original Message-----
From: Anakreon [mailto:p98043@rainbow.cs.unipi.gr] 
Sent: 03 April 2004 11:42
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] visual basic 6 grammar

This is the grammar.
The act files contain the code.
To merge code and grammar use annotation tool which can be obtained from
the 
files section of the antlr user group at yahoo.
The archive containes the Lexer, Parser and TreeParser.
I expect that the code found at  tree_vbs_php.act should not be usefull
for you
since it is responsible for translation of vb code into php.

The code generated from antlr based on this grammar files are also
covered from 
GPL IMHO.
If this is not the case, than if a C file is under GPL then the assembly
files 
generated from gcc would not be restriked from GPL.


Anyway, in a month I will release all the project, which aims to help 
translating sites written in ASP into PHP.


Anakreon.


 
Yahoo! Groups Links



 




****************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

****************************************************************************



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Mon Apr  5 04:29:13 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:36 2004
Subject: New antlr-interest member
Message-ID: <1081164553.136.97215.w41@yahoogroups.com>


Hello,

This is an automated email message to let you know that
schumacher_rolf <rolf@august.de> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From sk at z.pl  Mon Apr  5 05:56:30 2004
From: sk at z.pl (Sebastian Kaliszewski)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] visual basic 6 grammar
In-Reply-To: <C7FE35004D40FD45AA342991B88CE40409AE4E@lnml1.eca-international.local>
References: <C7FE35004D40FD45AA342991B88CE40409AE4E@lnml1.eca-international.local>
Message-ID: <4071577E.5070309@softax.pl>

Anthony Youngman wrote:
 > Sounds to me like we have both a language problem (English is not your
 > first language? and also a copyright-understanding problem.
 >
 > Does your grammar (I haven't looked) contain any code? Because if it
 > doesn't, then the output file is not GPL. BECAUSE IT DOESN'T CONTAIN ANY
 > OF YOUR CODE!


In case of GPL it's in fact true. But if grammar contains code, then output 
*is* GPL, by the very definition of GPL.

 > The point to note is that when gcc compiles a c file, it *translates*
 > from c to object. The purpose of the object code is the same as the
 > purpose of the source code. Translation is a right restricted by
 > copyright.
 >
 > But when you feed a grammar into Antlr, the stuff that comes out (the
 > lexer/parser) is NOT a translation. Most or all of it is *other*
 > *people's* code, and is licenced the way THEY say, not you.


Not necesarily. You have the freedome to licence your code as you wish, and 
for example to allow using only for making free software. This is not GPL of 
course

 > If your
 > grammar contains code that makes its way into the lexer/parser, then the
 > lexer/parser has multiple licences


Nope. In case of GPL, lexer/parser must be GPL too. Period.

 > and it is YOUR responsibility to
 > avoid a licence clash.


Not.

 > Antlr is NOT a compiler, like gcc. It is an
 > interpreter/code-generator, like lex/yacc/bison (and they have funny
 > licences, for *precisely* this reason!).


You got that bacwards. GCC has *explicitly* stated licences for runtime 
library that allows making commercial (Not-GPL) code with it. If for example 
libstdc++ was GPL'ed then GCC would be only good for GPL'ed code.

-- 
Sebastian Kaliszewski


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From Anthony.Youngman at ECA-International.com  Mon Apr  5 06:09:55 2004
From: Anthony.Youngman at ECA-International.com (Anthony Youngman)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] visual basic 6 grammar
Message-ID: <C7FE35004D40FD45AA342991B88CE40409AE55@lnml1.eca-international.local>

So what you're saying is, if the output of Antlr consists of a mixture
of Antlr code and your GPL code, then the licence on your code (GPL)
trumps that of Antlr? I don't think so!

Okay, so Antlr's licence is GPL-compatible so in practice there is no
problem here, but as I read what you are saying, you are assuming that
you can ignore the licence on the Antlr code just because Antlr has
mixed your code in with it.

Let's give an example. I write a load of code-generator code that goes
into Antlr, and it's NOT GPL compatible (yes, I know, Ter would reject
it ... but let's assume he doesn't). You then run your grammar through
Antlr, and the result is a mixture of your code, my code, and other
peoples' code. Are you saying that your GPL licence trumps my licence? I
think you'll find the courts disagree very strongly.

Cheers,
Wol

-----Original Message-----
From: Sebastian Kaliszewski [mailto:sk@z.pl] 
Sent: 05 April 2004 13:57
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] visual basic 6 grammar

 >
 > But when you feed a grammar into Antlr, the stuff that comes out (the
 > lexer/parser) is NOT a translation. Most or all of it is *other*
 > *people's* code, and is licenced the way THEY say, not you.


Not necesarily. You have the freedome to licence your code as you wish,
and 
for example to allow using only for making free software. This is not
GPL of 
course

 > If your
 > grammar contains code that makes its way into the lexer/parser, then
the
 > lexer/parser has multiple licences


Nope. In case of GPL, lexer/parser must be GPL too. Period.

 > and it is YOUR responsibility to
 > avoid a licence clash.


Not.




****************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

****************************************************************************



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Mon Apr  5 08:21:13 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:36 2004
Subject: New antlr-interest member
Message-ID: <1081178473.67.51661.w74@yahoogroups.com>


Hello,

This is an automated email message to let you know that
jjalto <jjalto@yahoo.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From payasam79 at yahoo.com  Mon Apr  5 09:51:46 2004
From: payasam79 at yahoo.com (Bharath S)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Re: Multiple nondeterminism between lexer rules.
In-Reply-To: <c4khvc+np4r@eGroups.com>
Message-ID: <20040405165146.52487.qmail@web41002.mail.yahoo.com>

Hi Michael,

I combined the rules as you had suggested and it
worked! However, I still get a non-determinism warning
upon INT and REAL. Is this OK because non-determinism
gets resolved only when the character after INT/REAL
gets scanned? I am including my rules and your
suggestion to resolve multiple non-determinism, just
to refresh your memory :).

-----------------
R1: A|B; 
R2: C|D;
 
A: INT 'a'; 
B: REAL 'a'; 
 
C: INT 'c';
D: REAL 'd';
-----------------
-----------------
R1 : INT 
    ( 'c'   { $setType(R2); }
    | 'a'
    )
    | REAL
    ( 'a'
    | 'd'  { $setType(R2); }
    )
   ;
----------------- 

Thanks much!

Bharath.


> Cheers,
> 
> Micheal
> ANTLR/C#
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
>      antlr-interest-unsubscribe@yahoogroups.com
> 
>  
> 


=====
Bharath Sundararaman
Graduate Assistant, CAHS.
(312)-5606532 (M)
http://www.cs.uic.edu/~bsundara

__________________________________
Do you Yahoo!?
Yahoo! Small Business $15K Web Design Giveaway 
http://promotions.yahoo.com/design_giveaway/


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From sk at z.pl  Mon Apr  5 10:06:22 2004
From: sk at z.pl (Sebastian Kaliszewski)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] visual basic 6 grammar
In-Reply-To: <C7FE35004D40FD45AA342991B88CE40409AE55@lnml1.eca-international.local>
References: <C7FE35004D40FD45AA342991B88CE40409AE55@lnml1.eca-international.local>
Message-ID: <4071920E.8030602@softax.pl>

Anthony Youngman wrote:

> So what you're saying is, if the output of Antlr consists of a mixture
> of Antlr code and your GPL code, then the licence on your code (GPL)
> trumps that of Antlr?

Yes, thats true.

> I don't think so!

But that's the reality. As Antlr licence is compatible with GPL, there is no 
conflict -- the stronger one (i.e. GPL) applies.

> Okay, so Antlr's licence is GPL-compatible so in practice there is no
> problem here, but as I read what you are saying, you are assuming that
> you can ignore the licence on the Antlr code just because Antlr has
> mixed your code in with it.

I can ignore Antlr's licence since it has none (it's in PD). But if Antlr 
had some (stupid) licence disallowing GPLin the resulting

> 
> Let's give an example. I write a load of code-generator code that goes
> into Antlr, and it's NOT GPL compatible (yes, I know, Ter would reject
> it ... but let's assume he doesn't). You then run your grammar through
> Antlr, and the result is a mixture of your code, my code, and other
> peoples' code.

It depends on your licence. If it disallows GPL redistribution then 
hypothetical Antlr with your addon is unuseable for GPL code.

> Are you saying that your GPL licence trumps my licence?

The effect is then unlicenceable at all until some party loosens the constrains.

But it's academic discussion. Even closed source commercial tools usually 
have apropriate non-constrainig licences for the pieces of code getting into 
the generated results of their tools (with exceptions of some restricted 
editions, like educational, evaluation or similar)

rgds
-- 
Sebastian Kaliszewski



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Mon Apr  5 11:53:24 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:36 2004
Subject: New antlr-interest member
Message-ID: <1081191204.381.90027.w85@yahoogroups.com>


Hello,

This is an automated email message to let you know that
andrevieira_mind <andre.vieira@mind.pt> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From notify at yahoogroups.com  Mon Apr  5 12:22:54 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:36 2004
Subject: New antlr-interest member
Message-ID: <1081192974.112.18140.w18@yahoogroups.com>


Hello,

This is an automated email message to let you know that
nriggs27 <nick@nexteffect.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From payasam79 at yahoo.com  Mon Apr  5 16:17:50 2004
From: payasam79 at yahoo.com (Bharath S)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Automated testing of lexer/parser rules
In-Reply-To: <c4khvc+np4r@eGroups.com>
Message-ID: <20040405231750.58016.qmail@web41004.mail.yahoo.com>

Hi Grp,

Can somebody provide information on how to automate
the testing of lexer/parser rules? I usually put my
test cases in a text file and feed it to my main
program using the direction operator. I am using Antlr
in Eclipse IDE and would like to automate testing
using JUnit. Can someone shed some light on this?

Thanks!

B.
--- micheal_jor <open.zone@virgin.net> wrote:
> --- In antlr-interest@yahoogroups.com, Bharath S
> <payasam79@y...> wrote:
> > Hi Grp,
> > 
> > If I have lexer rules of this form:
> > -----------------
> > R1: A|B; 
> > R2: C|D;
> > 
> > A: INT 'a'; 
> > B: REAL 'a'; 
> > 
> > C: INT 'c';
> > D: REAL 'd';
> > -----------------
> > 
> > Here, I have to resolve nondeterminism betwee A
> and C
> > and also between B and D. I tried to have two
> separate
> > rules to handle both but it doesnt work. I can
> only
> > handle one of them at a time but not both. Any
> ideas
> > on how ANTLR handles this?
> > 
> > My determinism resolving rules:
> > --------------------------------
> > R1: (INT 'c') => R2 {$setType(R2);}
> >     | (INT 'a') => R1 {$setType(R1);}
> > 
> > R2: (REAL 'a') => R1 {$setType(R1);}
> >     | (REAL 'd') => R2 {$setType(R2);}
> > 
> > ---------------------------------------------
> 
> You should merge those rules into a single one like
> this:
> 
> R1 : INT 
>     ( 'c'   { $setType(R2); }
>     | 'a'
>     )
>   | REAL
>     ( 'a'
>     | 'd'  { $setType(R2); }
>     )
>   ;
> 
> Cheers,
> 
> Micheal
> ANTLR/C#
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
>      antlr-interest-unsubscribe@yahoogroups.com
> 
>  
> 


__________________________________
Do you Yahoo!?
Yahoo! Small Business $15K Web Design Giveaway 
http://promotions.yahoo.com/design_giveaway/


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Mon Apr  5 11:25:21 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Per Block Parsing Errors Handling
In-Reply-To: <004801c41acc$2c82b2b0$0100a8c0@pbasoftserv02>
References: <20040404215413.90128.qmail@web20914.mail.yahoo.com> <004801c41acc$2c82b2b0$0100a8c0@pbasoftserv02>
Message-ID: <99040F06-872E-11D8-A8EE-000A95891192@cs.usfca.edu>

Hi Serge,

You need to turn off exception handling at the grammar level and add 
exceptions in the function rule etc...  It will trap all exceptions in 
that/those rules. :)

Terence

On Apr 4, 2004, at 10:09 PM, Serge Bakkal wrote:

> Hi ,
> I would like the parser the be "fault tolerant" , that is ,
> say : while parsing java , report errors in a function scope ,
> and keep going processing parent scopes :
> what is the best strategy to achieve this ?
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ronald.petty at milliman.com  Mon Apr  5 15:13:01 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] header/footer
In-Reply-To: <4071920E.8030602@softax.pl>
Message-ID: <OF06ECA30B.55952EE6-ON86256E6D.00798191-86256E6D.007A49CF@milliman.com>

I  was wondering is there a way to do the following

header
{
        //stuff
}

that adds code to the top of the class file(s) that is different, is there 
a way to

1)  Add code that is different to a parser/lexer
        header { //stuff for parser}
        parser class
        header { //stuff to lexer }
        lexer class

 
As far as I know, this wont work because Antrl uses the "lexer class" to 
show when to stop for the "parser class".

In case you want to know what I am trying,  I want to be able to add the 
public static void main().... for each class, that way I can test them 
seperatly.  I know I can make a seperate test class, but just wondering if 
this can be done.  I did it for one of them, but the other issue is header 
places it at the header, and personally I like to stick main at the 
bottom.  So that also leads me to think "is there a footer"?

Thanks for the onlist and offlist help everyone.  Antlr is a cool tool.

Ron

**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040405/12fe7578/attachment.html
From notify at yahoogroups.com  Mon Apr  5 12:22:54 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:36 2004
Subject: New antlr-interest member
Message-ID: <1081192974.112.18140.w18@yahoogroups.com>


Hello,

This is an automated email message to let you know that
nriggs27 <nick@nexteffect.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From serge.bakkal at wanadoo.fr  Mon Apr  5 19:10:55 2004
From: serge.bakkal at wanadoo.fr (Serge Bakkal)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Per Block Parsing Errors Handling
References: <20040404215413.90128.qmail@web20914.mail.yahoo.com> <004801c41acc$2c82b2b0$0100a8c0@pbasoftserv02> <99040F06-872E-11D8-A8EE-000A95891192@cs.usfca.edu>
Message-ID: <001201c41b7c$656a5aa0$0100a8c0@pbasoftserv02>


----- Original Message ----- 
From: "Terence Parr" <parrt@cs.usfca.edu>
To: <antlr-interest@yahoogroups.com>
Sent: Monday, April 05, 2004 8:25 PM
Subject: Re: [antlr-interest] Per Block Parsing Errors Handling


> Hi Serge,

> .... :)

Dunno yet if I'll " :)" : this is the worst scenario but the only one
available right now ...

Serge



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From don.bradshaw at quipoz.com  Mon Apr  5 19:33:14 2004
From: don.bradshaw at quipoz.com (don_bradshaw60)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Manully controlling the tree.
Message-ID: <c4t4ta+b6pk@eGroups.com>

I hope someone can help..

I would like to build a tree walker that can walk a tree but not 
specify the entire tree structure. For example;

parmList:
  #(pl:PARM_LIST
     (
       #(p:PARM x:. ) 
     )+
  )
  ;

I don't care what x:. represents but I do what it to be included in 
the output tree. Infact, that seems to be what happens by default. 
However, I want the entire original subtree (the x_AST_in or a copy 
of it) to be inclued in the output tree. 

Can this be done? 

Cheers from Down Under,
Don.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Mon Apr  5 17:38:22 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Automated testing of lexer/parser rules
In-Reply-To: <20040405231750.58016.qmail@web41004.mail.yahoo.com>
References: <20040405231750.58016.qmail@web41004.mail.yahoo.com>
Message-ID: <B510A102-8762-11D8-A8EE-000A95891192@cs.usfca.edu>

On Apr 5, 2004, at 4:17 PM, Bharath S wrote:

> Hi Grp,
>
> Can somebody provide information on how to automate
> the testing of lexer/parser rules? I usually put my
> test cases in a text file and feed it to my main
> program using the direction operator. I am using Antlr
> in Eclipse IDE and would like to automate testing
> using JUnit. Can someone shed some light on this?

Howdy.  I will be putting some thought into this myself to test antlr 3 
functionality.  Definitely you want to use the parse-tree/derivation 
stuff I put into 2.7.3 so you can see precisely how the tool parses 
your input.

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Tue Apr  6 02:40:27 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:36 2004
Subject: New antlr-interest member
Message-ID: <1081244427.58.25576.w80@yahoogroups.com>


Hello,

This is an automated email message to let you know that
sinha_ashim <sinha_ashim@yahoo.co.uk> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From sinha_ashim at yahoo.co.uk  Tue Apr  6 02:42:58 2004
From: sinha_ashim at yahoo.co.uk (Ashim Sinha)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Subclassing the TreeNodes in ANTLR tree structure
Message-ID: <c4tu32+qsc7@eGroups.com>

Hi,
I've developed a software for security analysis in java. It uses the
antlr parser. I wanted to subclass the TreeNodes so that I would know
which characters in the input file the TreeNode represents.
Is there any way to do this?
Thanks
Asim





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Tue Apr  6 03:07:37 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:36 2004
Subject: Unsubscription by antlr-interest member
Message-ID: <1081246057.543.77306.m11@yahoogroups.com>


Hello,

This is an automated email message to let you know that
g.khin@ids-scheer.de unsubscribed from your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a member unsubscribes.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 



From notify at yahoogroups.com  Tue Apr  6 03:45:13 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:36 2004
Subject: New antlr-interest member
Message-ID: <1081248313.81.76710.w84@yahoogroups.com>


Hello,

This is an automated email message to let you know that
queenjoys <joys@chollian.net> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From computa_mike at hotmail.com  Tue Apr  6 04:37:26 2004
From: computa_mike at hotmail.com (Mike Hingley)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Intellisense
Message-ID: <c4u4pm+ih22@eGroups.com>

Hi - I'm currently thinking about developing a scripting language 
for my employer - so I started initially with LEX / YACC.  However I 
have found the progress too difficult. I've never really done much 
work with this type of technology before, and I'm eager to learn 
it's ins and outs - I can think of loads of great uses for ANTLR, 
and can't wait to get cracking!!! 

As a c# developer I liked the idea of being able to generate the 
lexer code through ANTLR.

So anyway - Here's my plan

1. create all of the definitions for the language
2. Create a parser for it (running the scripting language isn;t 
required at this stage - it's for an embedded device that already 
exists)
3. use the samples I've found for DIY intellisense to provide a nice 
IDE by which users can type up their scripts(with predictive 
intellisense provided by the parser (or some other mechanism).

Here's what I was wandering : 
1. Is if feasable - can I generate the code to parse the text 
(either as typed in, or through reading a text file?)

2. Can I look ahead and see what could be typed (to generate the 
predictive text required) - or would I have to use the other files 
generated?

3. Can i just develop a parser independant of  a compiler?

I've just downloaded the latest version - I'm having problems 
running the first cut 'n' paste example.  I'm getting : 

ANTLR Parser Generator   Version 2.7.3   1989-2004 jGuru.com
error: Token stream error reading grammar(s):
t.g:17:1: unexpected char: 0x?F
t.g:16:9: rule classDef trapped:
t.g:16:9: unexpected token: '\n'
error: aborting grammar 'L' due to errors
Exiting due to errors.

any help / ideas would be appreciated - 

thanks

Mike Hingley





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Tue Apr  6 04:24:51 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:36 2004
Subject: New antlr-interest member
Message-ID: <1081250691.74.32993.w52@yahoogroups.com>


Hello,

This is an automated email message to let you know that
computa_mike <computa_mike@hotmail.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From pete.forman at westerngeco.com  Tue Apr  6 00:09:43 2004
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] header/footer
In-Reply-To: 
 <OF06ECA30B.55952EE6-ON86256E6D.00798191-86256E6D.007A49CF@milliman.com>
References: <4071920E.8030602@softax.pl>
Message-ID: <5.1.1.1.2.20040406080643.00affb40@wgmail2.gatwick.eur.slb.com>

At 2004-04-05 17:13 -0500, ronald.petty@milliman.com wrote:
>I  was wondering is there a way to do the following [...]
>
>1)  Add code that is different to a parser/lexer
>         header { //stuff for parser}
>         parser class
>         header { //stuff to lexer }
>         lexer class

You can put your lexer and parser in separate .g files.

-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From johnm-antlr at non.net  Tue Apr  6 07:42:09 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] visual basic 6 grammar
In-Reply-To: <4071920E.8030602@softax.pl>
References: <C7FE35004D40FD45AA342991B88CE40409AE55@lnml1.eca-international.local>
	<4071920E.8030602@softax.pl>
Message-ID: <16498.49601.73762.317848@despot.non.net>

>>>>> "Sebastian" == Sebastian Kaliszewski <sk@z.pl> writes:
>>>>>> Anthony Youngman writes:
[...]

>> So what you're saying is, if the output of Antlr consists of a mixture
>> of Antlr code and your GPL code, then the licence on your code (GPL)
>> trumps that of Antlr?

> Yes, thats true.

Utter BS.

This gets into the simple (but most certainly NOT simplistic :-) issue of
the licensing of co-mingled code which mostly devolves to an issue of how
the various licenses deal with derivative works.

The GPL's viral nature would infect the co-mingled, derivative work but
would have absolutely no effect upon the licensing of the individual parts.
If, as the example was asking, the licensing of the ANTLR code (runtime and
generated) had restrictions on co-mingled, derivative works then you could
NOT actually apply the GPL without violating such a license.  In the case
of reality, ANTLR's license is extremely permissive (i.e., currently public
domain which means that anybody can "steal" it and otherwise treat it as
their own) but eventually it will be a BSD-alike which would continue to
apply even if you created a co-mingled, derivative work.

IANAL, GCPLA.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From johnm-antlr at non.net  Tue Apr  6 07:27:59 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] Multipass parsing
In-Reply-To: <16487.32459.217710.846905@SWAN.PSY.cmu.edu>
References: <16487.1310.676816.306558@SWAN.PSY.cmu.edu>
	<16487.23816.552066.215487@despot.non.net>
	<16487.27080.307786.290434@SWAN.PSY.cmu.edu>
	<16487.31407.71043.292362@despot.non.net>
	<16487.32459.217710.846905@SWAN.PSY.cmu.edu>
Message-ID: <16498.48751.330403.378302@despot.non.net>

>>>>> "FranklinChen" == FranklinChen  <FranklinChen@cmu.edu> writes:
[...]

>> FWIW, that's a *really* bad idea in a language.

> It's also not under my control.  I am given a language, I need to parse
> it, so I'm interested in ideas on how to do it with ANTLR, if possible.
> I didn't design this language.

My condolences.


[...]
>> As I noted, you can write a very permissive lexer and a permissive
>> parser and then do whatever specific checks via multiple tree grammars.

> Context-sensitivity, including the whitespace issue, makes this
> difficult.  For example: grape[fruit] should be differently parsed from
> grape [C { int i; }] and differently parsed from grape [Perl { my $i = 3;
> }]

> I need multiple lexers, not just one permissive lexer.

Given your example, I still don't see why you might actually need it.

Thanks,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From sk at z.pl  Tue Apr  6 08:28:28 2004
From: sk at z.pl (Sebastian Kaliszewski)
Date: Mon Dec 20 16:16:36 2004
Subject: [antlr-interest] visual basic 6 grammar
In-Reply-To: <16498.49601.73762.317848@despot.non.net>
References: <C7FE35004D40FD45AA342991B88CE40409AE55@lnml1.eca-international.local>	<4071920E.8030602@softax.pl> <16498.49601.73762.317848@despot.non.net>
Message-ID: <4072CC9C.5030005@softax.pl>

John D. Mitchell wrote:
>>>So what you're saying is, if the output of Antlr consists of a mixture
>>>of Antlr code and your GPL code, then the licence on your code (GPL)
>>>trumps that of Antlr?
> 
>>Yes, thats true.
> 
> 
> Utter BS.

Nope. As Antlr's licence is 'weaker' (i.e. less restrictive) but GPL 
compatible, GPL trumps it in the resulting work. If it was stronger and GPL 
incompatible, then there would be no way to licence resulting code (i.e GPL 
would be unapplicable).
In such conflict situations many experts say it's possible to just release 
source code (as a case of free speech), and allow end users to build an 
applicaytion by themselves, but everyone agrees that any form of binary 
distributution (or even partly preprocessed code, like source files 
generated by Antlr) is then legally impossible.

> This gets into the simple (but most certainly NOT simplistic :-) issue of
> the licensing of co-mingled code which mostly devolves to an issue of how
> the various licenses deal with derivative works.

Exactly.

> The GPL's viral nature would infect the co-mingled, derivative work but
> would have absolutely no effect upon the licensing of the individual parts.

It has no effect on the licencing on the Antlr code of course, but that's by 
itself pretty useless.

> If, as the example was asking, the licensing of the ANTLR code (runtime and
> generated) had restrictions on co-mingled, derivative works then you could
> NOT actually apply the GPL without violating such a license. 

Exactly.

> In the case
> of reality, ANTLR's license is extremely permissive (i.e., currently public
> domain which means that anybody can "steal" it and otherwise treat it as
> their own) but eventually it will be a BSD-alike which would continue to
> apply even if you created a co-mingled, derivative work.

rgds
-- 
Sebastian Kaliszewski



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ronald.petty at milliman.com  Tue Apr  6 07:10:38 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] language conversion
In-Reply-To: <5.1.1.1.2.20040406080643.00affb40@wgmail2.gatwick.eur.slb.com>
Message-ID: <OFB96BED42.E9553779-ON86256E6E.004D9F03-86256E6E.004E2064@milliman.com>

Hi,
If you couldn't tell I am trying to convert VB code to C.  However I am 
having trouble deciding the best way to go about this using Antlr.  I 
understand you make the lexer/parser.  However I am not sure what point to 
do the translation to another language.  I realize that there are things 
like varible scoping that will effect my translation, and I am not sure 
where this kind of logic would go in the Antlr process.  It seems there 
are several choices (parser, ast, tokenstream stuff, etc).  I am still in 
the newbie/overwhelmed stage of all the Antlr features. 

Any advice?  (Besides don't use VB :) )

Thanks
Ron

**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040406/a7d85e3c/attachment.html
From monty at codetransform.com  Tue Apr  6 09:43:06 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] language conversion
In-Reply-To: <OFB96BED42.E9553779-ON86256E6E.004D9F03-86256E6E.004E2064@milliman.com>
References: <OFB96BED42.E9553779-ON86256E6E.004D9F03-86256E6E.004E2064@milliman.com>
Message-ID: <7ABFFCB1-87E9-11D8-8786-000393B5606C@codetransform.com>

I wrote an AREV to VB translator.  Have a look at my article on it   
http://www.codetransform.com/fun_with_antlr.html.  Also see my notes on  
planning a translation project  
http://www.codetransform.com/planning.html.  Then be impressed and hire  
me to help :)

The basic strategy is to have two tree grammars, on for the input  
language and one for the output language.  Your parser builds the input  
tree.  Then you have however many tree rewrite passes it takes to morph  
the tree into the output format.  Typically analysis comes first, then  
a series of actual translations.  Finally you unparse the tree to a  
text file with your output source code.

Monty

www.codetransform.com
ANTLR translation services

On Apr 6, 2004, at 7:10 AM, ronald.petty@milliman.com wrote:

>
> Hi,
> If you couldn't tell I am trying to convert VB code to C. ?However I  
> am having trouble deciding the best way to go about this using Antlr.  
> ?I understand you make the lexer/parser. ?However I am not sure what  
> point to do the translation to another language. ?I realize that there  
> are things like varible scoping that will effect my translation, and I  
> am not sure where this kind of logic would go in the Antlr process.  
> ?It seems there are several choices (parser, ast, tokenstream stuff,  
> etc). ?I am still in the newbie/overwhelmed stage of all the Antlr  
> features. ?
>
> Any advice? ?(Besides don't use VB :) )
>
> Thanks
> Ron
> *********************************************************************** 
> ***************
> This communication is intended solely for the addressee and is
> confidential. If you are not the intended recipient, any disclosure,
> copying, distribution or any action taken or omitted to be taken in
> reliance on it, is prohibited and may be unlawful. Unless indicated
> to the contrary: it does not constitute professional advice or
> opinions upon which reliance may be made by the addressee or any
> other party, and it should be considered to be a work in progress.
> *********************************************************************** 
> ***************
>
>
> Yahoo! Groups Links
>
> 	? 	To visit your group on the web, go to:
> http://groups.yahoo.com/group/antlr-interest/
> ?
> 	? 	 To unsubscribe from this group, send an email to:
> antlr-interest-unsubscribe@yahoogroups.com
> ?
> 	? 	 Your use of Yahoo! Groups is subject to the Yahoo! Terms of  
> Service.
>
>  


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From jpdv at medialog.pt  Tue Apr  6 10:37:25 2004
From: jpdv at medialog.pt (jduquevieira)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] Re: Use of "(" and ")"
In-Reply-To: <c4fcve+4703@eGroups.com>
Message-ID: <c4upsl+b8hq@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Mark" <markl@g...> wrote:
> > Now, I want to add "(" and ")" to change the priority.
> > Can anyone help me or point out a place where I can see an 
exemple?
> 
> A tiny example:
> 
> class ExpressionParser extends Parser;
>     options { buildAST = true; }
> 
> expression: level1expr ;
> level1expr: level2expr ( OP_1^ level2expr )* ;
> level2expr: level3expr ( OP_2^ level3expr )* ;
> level3expr: level4expr ( OP_3^ level4expr )* ;
> level4expr: value ;
> value:
>       NUMBER
>     | LPAREN! expression RPAREN!
>     ;
> 
> class ExpressionLexer extends Lexer;
> 
> OP_1: '+' | '-' ;
> OP_2: '*' | '/' ;
> OP_3: '^' ;
> NUMBER: ( DIGIT )+ ;
> protected DIGIT: '0'..'9' ;
> LPAREN: '(' ;
> RPAREN: ')' ;
> 
> WS: ( ' ' | '\t' | '\f' )+
>     { $setType(Token::SKIP); }
>     ;
> 
> NL: ( '\r' ( '\n' )? | '\n' )
>     { newline(); $setType(Token::SKIP); }
>     ;
> 
> This is a complete example that builds a correct AST.  The only 
tricks with the 
> parenthesized expression are the exclamation points at the ends of 
LPAREN and RPAREN 
> in the value rule.  These keep the parenthesis tokens out of the 
tree.
> 
> Always amazes me how easy Antlr makes this kind of thing.
> 
> - Mark



Thanks a lot Mark.
This does the trick.

Best regards.




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Tue Apr  6 12:37:15 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:37 2004
Subject: New antlr-interest member
Message-ID: <1081280235.62.91305.w85@yahoogroups.com>


Hello,

This is an automated email message to let you know that
apz28 <junkz28@hotmail.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From payasam79 at yahoo.com  Tue Apr  6 13:57:17 2004
From: payasam79 at yahoo.com (Bharath S)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] Clarifications on grammar rules.
In-Reply-To: <B510A102-8762-11D8-A8EE-000A95891192@cs.usfca.edu>
Message-ID: <20040406205717.95877.qmail@web41013.mail.yahoo.com>

Hi,

Thanks to Ter for the reply; I looked at ParseTree
testing tutorial on antlr.org and it pretty much
answers my question. 

I also have a small grammar related question:

I have a rule of the form:
----------------------------------------
Time: ('0'..'9')+
      ('d'{$setType(Days);} | 's'{$setType(Secs);} 
      | {$setType(INT);}) ;

and 
-------------------------
protected Days: INT('d'); 
protected Secs: INT('s');
protected INT: ('0'..'9')+;
---------------------------
When I try "Test: Secs|Days", I get a non-determinism
warning and it makes sense because both rules have
common left prefixes. However, I have no clue to how I
can fix it. If I write a separate rule to remove
common prefixes in "Secs" and "Days", it conflicts
with the above rule, "Time". Am I missing something
obvious?

--- Terence Parr <parrt@cs.usfca.edu> wrote:
> On Apr 5, 2004, at 4:17 PM, Bharath S wrote:
> 
> > Hi Grp,
> >
> > Can somebody provide information on how to
> automate
> > the testing of lexer/parser rules? I usually put
> my
> > test cases in a text file and feed it to my main
> > program using the direction operator. I am using
> Antlr
> > in Eclipse IDE and would like to automate testing
> > using JUnit. Can someone shed some light on this?
> 
> Howdy.  I will be putting some thought into this
> myself to test antlr 3 
> functionality.  Definitely you want to use the
> parse-tree/derivation 
> stuff I put into 2.7.3 so you can see precisely how
> the tool parses 
> your input.
> 
> Ter
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator,
> http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email
> again!
> Cofounder, http://www.peerscope.com pure link
> sharing
> 
> 
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
>      antlr-interest-unsubscribe@yahoogroups.com
> 
>  
> 


__________________________________
Do you Yahoo!?
Yahoo! Small Business $15K Web Design Giveaway 
http://promotions.yahoo.com/design_giveaway/


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From payasam79 at yahoo.com  Tue Apr  6 14:08:13 2004
From: payasam79 at yahoo.com (Bharath S)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] Clarifications on grammar rules.
In-Reply-To: <B510A102-8762-11D8-A8EE-000A95891192@cs.usfca.edu>
Message-ID: <20040406210813.99828.qmail@web41011.mail.yahoo.com>

Hi,

Thanks to Ter for the reply; I looked at ParseTree
testing tutorial on antlr.org and it pretty much
answers my question. 

I also have a small grammar related question:

I have a rule of the form:
----------------------------------------
Time: ('0'..'9')+
      ('d'{$setType(Days);} | 's'{$setType(Secs);} 
      | {$setType(INT);}) ;

and 
-------------------------
protected Days: INT('d'); 
protected Secs: INT('s');
protected INT: ('0'..'9')+;
---------------------------
When I try "Test: Secs|Days", I get a non-determinism
warning and it makes sense because both rules have
common left prefixes. However, I have no clue to how I
can fix it. If I write a separate rule to remove
common prefixes in "Secs" and "Days", it conflicts
with the above rule, "Time". Am I missing something
obvious?

--- Terence Parr <parrt@cs.usfca.edu> wrote:
> On Apr 5, 2004, at 4:17 PM, Bharath S wrote:
> 
> > Hi Grp,
> >
> > Can somebody provide information on how to
> automate
> > the testing of lexer/parser rules? I usually put
> my
> > test cases in a text file and feed it to my main
> > program using the direction operator. I am using
> Antlr
> > in Eclipse IDE and would like to automate testing
> > using JUnit. Can someone shed some light on this?
> 
> Howdy.  I will be putting some thought into this
> myself to test antlr 3 
> functionality.  Definitely you want to use the
> parse-tree/derivation 
> stuff I put into 2.7.3 so you can see precisely how
> the tool parses 
> your input.
> 
> Ter
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator,
> http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email
> again!
> Cofounder, http://www.peerscope.com pure link
> sharing
> 
> 
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
>      antlr-interest-unsubscribe@yahoogroups.com
> 
>  
> 


__________________________________
Do you Yahoo!?
Yahoo! Small Business $15K Web Design Giveaway 
http://promotions.yahoo.com/design_giveaway/


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ronald.petty at milliman.com  Tue Apr  6 14:23:06 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] antlr deprecated errors
In-Reply-To: <20040406210813.99828.qmail@web41011.mail.yahoo.com>
Message-ID: <OFE936E8AB.25EC27EA-ON86256E6E.00755A28-86256E6E.0075B82C@milliman.com>

I am using the latest antlr (well maybe not the bleeding edge release, 
2.7.3) and I am getting this. 

$ javac -d ./build -Xlint:deprecation ./build/*.java
C:\antlr-2.7.3\antlr\Parser.java:324: warning: [deprecation] 
setASTNodeType(java
.lang.String) in antlr.ASTFactory has been deprecated
        astFactory.setASTNodeType(cl);
                  ^
C:\antlr-2.7.3\antlr\TreeParser.java:134: warning: [deprecation] 
setASTNodeType(
java.lang.String) in antlr.ASTFactory has been deprecated
        astFactory.setASTNodeType(nodeType);
                  ^
2 warnings


Any ideas?

Thanks
Ron

**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040406/fee38b8f/attachment.html
From anakreonmejdi at yahoo.gr  Tue Apr  6 15:52:19 2004
From: anakreonmejdi at yahoo.gr (anakreonmejdi)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] Re: Automated testing of lexer/parser rules
In-Reply-To: <20040405231750.58016.qmail@web41004.mail.yahoo.com>
Message-ID: <c4vcb3+omrb@eGroups.com>

--- In antlr-interest@yahoogroups.com, Bharath S <payasam79@y...>
wrote:
> Hi Grp,
> 
> Can somebody provide information on how to automate
> the testing of lexer/parser rules? I usually put my
> test cases in a text file and feed it to my main
> program using the direction operator. I am using Antlr
> in Eclipse IDE and would like to automate testing
> using JUnit. Can someone shed some light on this?
> 
> Thanks!
I have developed a method for my project.
The concept is to store the AST in a XML format, and test if the AST
generated in an other time when the gramma definition has changed is
the 
same as that stored in the XML format.
The XML format looks like this:
<ast name="METHOD_CALL" text="abs">
  <ast name="ARGLIST_VALUES">
    <ast name="IDENTIFIER" text="some_var" />
  </ast>
</ast>
There is one class which extends TestCase from JUnit which performes
the comparasion between the AST defined in the XML format, and the AST
 the gramma produced from an input file.

With this methodology I can test the Parsers and TreeParsers I've
writen, but Lexers however are not tested directly.  



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Tue Apr  6 18:18:32 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] Clarifications on grammar rules.
In-Reply-To: <20040406210813.99828.qmail@web41011.mail.yahoo.com>
References: <20040406210813.99828.qmail@web41011.mail.yahoo.com>
Message-ID: <7C674722-8831-11D8-B313-000A95891192@cs.usfca.edu>


On Apr 6, 2004, at 2:08 PM, Bharath S wrote:
> I have a rule of the form:
> ----------------------------------------
> Time: ('0'..'9')+
>       ('d'{$setType(Days);} | 's'{$setType(Secs);}
>       | {$setType(INT);}) ;
>
> and
> -------------------------
> protected Days: INT('d');
> protected Secs: INT('s');
> protected INT: ('0'..'9')+;
> ---------------------------
> When I try "Test: Secs|Days", I get a non-determinism
> warning and it makes sense because both rules have
> common left prefixes. However, I have no clue to how I
> can fix it. If I write a separate rule to remove
> common prefixes in "Secs" and "Days", it conflicts
> with the above rule, "Time". Am I missing something
> obvious?

Hi.

I'm not sure what you are trying to match here.  What do you mean here:

> When I try "Test: Secs|Days", I get a non-determinism

Thanks,
Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From johnm-antlr at non.net  Tue Apr  6 19:47:46 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] visual basic 6 grammar
In-Reply-To: <4072CC9C.5030005@softax.pl>
References: <C7FE35004D40FD45AA342991B88CE40409AE55@lnml1.eca-international.local>
	<4071920E.8030602@softax.pl>
	<16498.49601.73762.317848@despot.non.net>
	<4072CC9C.5030005@softax.pl>
Message-ID: <16499.27602.846146.42104@despot.non.net>

>>>>> "Sebastian" == Sebastian Kaliszewski <sk@z.pl> writes:
>>>>>> John D. Mitchell wrote:
[...]

>>>> So what you're saying is, if the output of Antlr consists of a mixture
>>>> of Antlr code and your GPL code, then the licence on your code (GPL)
>>>> trumps that of Antlr?

>>> Yes, thats true.

>> Utter BS.

> Nope. As Antlr's licence is 'weaker' (i.e. less restrictive) but GPL
> compatible, GPL trumps it in the resulting work. If it was stronger and
> GPL incompatible, then there would be no way to licence resulting code
> (i.e GPL would be unapplicable).  In such conflict situations many
> experts say it's possible to just release source code (as a case of free
> speech), and allow end users to build an applicaytion by themselves, but
> everyone agrees that any form of binary distributution (or even partly
> preprocessed code, like source files generated by Antlr) is then legally
> impossible.

No.  You are conflating the restriction upon the directly comingled
derivative with the parts required to be make that comingled derivative
workable.  They are separate issues. It can be a nasty gray area because it
fundamentally comes down to where/how do you draw the line.  In fact,
during one of those rounds, I tried out a version of PCCTS.  :-)

There was a lot of PITA back and forth over all of this comingling
derivation crap in the early years of GNU's Bison.  That whole situation
sucked and wasted all to much money on lawyer time.


Given the rest of your response, my guess is that you basically understand
the issues but aren't being very crisp in your wording and so that's
causing some of us to get persnickety.

Take care,
	John



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Wed Apr  7 00:35:23 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:37 2004
Subject: New antlr-interest member
Message-ID: <1081323323.69.58492.w30@yahoogroups.com>


Hello,

This is an automated email message to let you know that
v_mallet <vmallet@jfouffa.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From sk at z.pl  Wed Apr  7 02:53:55 2004
From: sk at z.pl (Sebastian Kaliszewski)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] visual basic 6 grammar
In-Reply-To: <16499.27602.846146.42104@despot.non.net>
References: <C7FE35004D40FD45AA342991B88CE40409AE55@lnml1.eca-international.local>	<4071920E.8030602@softax.pl>	<16498.49601.73762.317848@despot.non.net>	<4072CC9C.5030005@softax.pl> <16499.27602.846146.42104@despot.non.net>
Message-ID: <4073CFB3.2070703@softax.pl>

John D. Mitchell wrote:
> Given the rest of your response, my guess is that you basically understand
> the issues but aren't being very crisp in your wording and so that's
> causing some of us to get persnickety.

Very possible. I'm not a native English speaker and my English is ho-hum...

rgds
-- 
Sebastian Kaliszewski



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From jpdv at medialog.pt  Tue Apr  6 13:49:23 2004
From: jpdv at medialog.pt (jduquevieira)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] Error recovery
Message-ID: <c4v54j+d51i@eGroups.com>

Hello.

I have a math editor that uses ANTLR as the parser.
Now I have problems recovering from errors.

For instance, if the user writes:
    "2+"

The parser can't handle it, because it expects another number after 
the sum operator:
    "2+<number>"

I've tried to handle it with exceptions and got no good results.
Besides, by using exceptions the parser gets too slow.

I've also tried to write every possibility in every rule, but I get 
a lot of ambiguities.

Does anyone know how to do this?
Any ideas?

Thanks in advance.
Best regards.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From jdfrens at calvin.edu  Tue Apr  6 07:13:36 2004
From: jdfrens at calvin.edu (Jeremy D. Frens)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] Automated testing of lexer/parser rules
In-Reply-To: <B510A102-8762-11D8-A8EE-000A95891192@cs.usfca.edu>
References: <20040405231750.58016.qmail@web41004.mail.yahoo.com> <B510A102-8762-11D8-A8EE-000A95891192@cs.usfca.edu>
Message-ID: <4072BB10.9040402@calvin.edu>

Terence Parr wrote:
> On Apr 5, 2004, at 4:17 PM, Bharath S wrote:
> 
> 
>>Hi Grp,
>>
>>Can somebody provide information on how to automate
>>the testing of lexer/parser rules? I usually put my
>>test cases in a text file and feed it to my main
>>program using the direction operator. I am using Antlr
>>in Eclipse IDE and would like to automate testing
>>using JUnit. Can someone shed some light on this?
> 
> 
> Howdy.  I will be putting some thought into this myself to test antlr 3 
> functionality.  Definitely you want to use the parse-tree/derivation 
> stuff I put into 2.7.3 so you can see precisely how the tool parses 
> your input.

I've created some test-case classes for my ANTLR stuff in two different 
projects.  Both projects are almost to a stage where I think I might be 
able to extract a common test-case superclass for testing 
ANTLR-generated code.

FWIW, I use Java reflection to make invoking ANTLR rules a bit easier.

Would this be of interest to anyone else?

jdf

-----
*** Jeremy D. Frens - Professor - Computer Science - Calvin College ***



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From payasam79 at yahoo.com  Wed Apr  7 06:24:56 2004
From: payasam79 at yahoo.com (Bharath S)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] Clarifications on grammar rules.
In-Reply-To: <7C674722-8831-11D8-B313-000A95891192@cs.usfca.edu>
Message-ID: <20040407132456.65680.qmail@web41015.mail.yahoo.com>

Hi Ter,

I need to have a rule called time units, lets say,
that can be any unit (seconds or days or minutes..).
----------------------------
Test: "Time:"(Secs|Days|mins|hours);
----------------------------
is required for the same purpose. If I have "Test" as
my lexer rule, I want the user to enter any time unit
and I should be able to parse it and print out a
result that looks like:
___________________________
Time: 25s 
(or)
Time: 12d
---------------------------

and so on. Also each of the time units work perfectly
when I test them alone.

Thanks Ter.

--- Terence Parr <parrt@cs.usfca.edu> wrote:
> 
> On Apr 6, 2004, at 2:08 PM, Bharath S wrote:
> > I have a rule of the form:
> > ----------------------------------------
> > Time: ('0'..'9')+
> >       ('d'{$setType(Days);} | 's'{$setType(Secs);}
> >       | {$setType(INT);}) ;
> >
> > and
> > -------------------------
> > protected Days: INT('d');
> > protected Secs: INT('s');
> > protected INT: ('0'..'9')+;
> > ---------------------------
> > When I try "Test: Secs|Days", I get a
> non-determinism
> > warning and it makes sense because both rules have
> > common left prefixes. However, I have no clue to
> how I
> > can fix it. If I write a separate rule to remove
> > common prefixes in "Secs" and "Days", it conflicts
> > with the above rule, "Time". Am I missing
> something
> > obvious?
> 
> Hi.
> 
> I'm not sure what you are trying to match here. 
> What do you mean here:
> 
> > When I try "Test: Secs|Days", I get a
> non-determinism
> 
> Thanks,
> Ter
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator,
> http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email
> again!
> Cofounder, http://www.peerscope.com pure link
> sharing
> 
> 
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
>      antlr-interest-unsubscribe@yahoogroups.com
> 
>  
> 


=====
Bharath Sundararaman
Graduate Assistant, CAHS.
(312)-5606532 (M)
http://www.cs.uic.edu/~bsundara

__________________________________
Do you Yahoo!?
Yahoo! Small Business $15K Web Design Giveaway 
http://promotions.yahoo.com/design_giveaway/


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From payasam79 at yahoo.com  Wed Apr  7 06:27:30 2004
From: payasam79 at yahoo.com (Bharath S)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] Re: Automated testing of lexer/parser rules
In-Reply-To: <c4vcb3+omrb@eGroups.com>
Message-ID: <20040407132730.34648.qmail@web41014.mail.yahoo.com>

Hi Anar,

Thanks much for your reply. I am not generating ASTs
yet, just toying with grammar but your solution will
be valuable to me few weeks from now, for sure.

Thanks.

B.
--- anakreonmejdi <anakreonmejdi@yahoo.gr> wrote:
> --- In antlr-interest@yahoogroups.com, Bharath S
> <payasam79@y...>
> wrote:
> > Hi Grp,
> > 
> > Can somebody provide information on how to
> automate
> > the testing of lexer/parser rules? I usually put
> my
> > test cases in a text file and feed it to my main
> > program using the direction operator. I am using
> Antlr
> > in Eclipse IDE and would like to automate testing
> > using JUnit. Can someone shed some light on this?
> > 
> > Thanks!
> I have developed a method for my project.
> The concept is to store the AST in a XML format, and
> test if the AST
> generated in an other time when the gramma
> definition has changed is
> the 
> same as that stored in the XML format.
> The XML format looks like this:
> <ast name="METHOD_CALL" text="abs">
>   <ast name="ARGLIST_VALUES">
>     <ast name="IDENTIFIER" text="some_var" />
>   </ast>
> </ast>
> There is one class which extends TestCase from JUnit
> which performes
> the comparasion between the AST defined in the XML
> format, and the AST
>  the gramma produced from an input file.
> 
> With this methodology I can test the Parsers and
> TreeParsers I've
> writen, but Lexers however are not tested directly. 
> 
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
>      antlr-interest-unsubscribe@yahoogroups.com
> 
>  
> 


__________________________________
Do you Yahoo!?
Yahoo! Small Business $15K Web Design Giveaway 
http://promotions.yahoo.com/design_giveaway/


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From vmallet at jfouffa.com  Wed Apr  7 01:10:45 2004
From: vmallet at jfouffa.com (Vincent Mallet)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] Java.g grammar issues & potential fix
Message-ID: <c50d25+fimp@eGroups.com>

Terence & All,

A problem in Clover (code coverage for Java which uses antlr)
prompted me to look at the java.g "1.4 update" grammar and I found
a few problems with the lexer:
 1. the grammar won't accept octal-looking floats or doubles 
    (09d for example) 
 2. the grammar will accept hexadecimal numbers with a fractional
    part (0x12.34 for example)

I have seen a fix for problem #1 in java.g version 1.21-october-2003
but #2 is definitely broken.

In an attempt to clarify that part of the grammar I came up with a
version of the NUM_INT lexer rule which seems to be more correct and
potentially easier to read (indentation might need some work).

If you have an opinion on the new rule I would love to hear it.

Here it goes:
take java.g, truncate evertyhing after "NUM_INT", replace with:


 ---cut-cut---
// a numeric literal
NUM_INT
    :   // all floating point literals with a whole-number part
        ( (DIGIT)+ ('.' | 'e' | 'E' | 'f' | 'F' | 'd' | 'D' ) )=> 
(DIGIT)+
        (  (('.' (DIGIT)* (EXPONENT)? | EXPONENT )
            (('f'|'F') { _ttype = NUM_FLOAT; } | ('d' | 'D')? { 
_ttype = NUM_DOUBLE; } )
           )
         | ( ('f'|'F') { _ttype = NUM_FLOAT; } ) 
         | ( ('d'|'D') { _ttype = NUM_DOUBLE; } )
        )

    |   // all floating point literals with no whole-number part 
(possibly just '.')
        '.' { _ttype = DOT; }
        (DIGIT)+ (EXPONENT)?        
        ( ('f'|'F') { _ttype = NUM_FLOAT; } | ('d' | 'D')? { _ttype 
= NUM_DOUBLE; } )
        
    |   // all decimal literals
        (   '0' ('0'..'7')+              // octal
          | ('1'..'9') (DIGIT)+          // decimal
          | '0' ('x' | 'X') (HEX_DIGIT)+ // hexa
          | '0'                          // decimal
        )
        (('l' | 'L') { _ttype = NUM_LONG; })? 
    ;


// a couple protected methods to assist in matching floating point 
numbers
protected
DIGIT
	:	'0'..'9'
	;

protected
EXPONENT
	:	('e'|'E') ('+'|'-')? ('0'..'9')+
	;

 ---cut-cut---

Thanks,

    Vince.








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Wed Apr  7 11:07:47 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] Clarifications on grammar rules.
In-Reply-To: <20040407132456.65680.qmail@web41015.mail.yahoo.com>
References: <20040407132456.65680.qmail@web41015.mail.yahoo.com>
Message-ID: <79B0BD35-88BE-11D8-A12A-000A95891192@cs.usfca.edu>


On Apr 7, 2004, at 6:24 AM, Bharath S wrote:

> Hi Ter,
>
> I need to have a rule called time units, lets say,
> that can be any unit (seconds or days or minutes..).
> ----------------------------
> Test: "Time:"(Secs|Days|mins|hours);
> ----------------------------
> is required for the same purpose. If I have "Test" as
> my lexer rule, I want the user to enter any time unit
> and I should be able to parse it and print out a
> result that looks like:
> ___________________________
> Time: 25s
> (or)
> Time: 12d
> ---------------------------
>
> and so on. Also each of the time units work perfectly
> when I test them alone.

Ok, now I understand.  Left factor Days and Secs etc...  pull INT into 
a common rule.  That is, pull INT out of Days and Secs and into Test; 
should work.

Test: INT (Secs|Days) ;

protected
Secs : 's' ;

Terence

>
> Thanks Ter.
>
> --- Terence Parr <parrt@cs.usfca.edu> wrote:
>>
>> On Apr 6, 2004, at 2:08 PM, Bharath S wrote:
>>> I have a rule of the form:
>>> ----------------------------------------
>>> Time: ('0'..'9')+
>>>       ('d'{$setType(Days);} | 's'{$setType(Secs);}
>>>       | {$setType(INT);}) ;
>>>
>>> and
>>> -------------------------
>>> protected Days: INT('d');
>>> protected Secs: INT('s');
>>> protected INT: ('0'..'9')+;
>>> ---------------------------
>>> When I try "Test: Secs|Days", I get a
>> non-determinism
>>> warning and it makes sense because both rules have
>>> common left prefixes. However, I have no clue to
>> how I
>>> can fix it. If I write a separate rule to remove
>>> common prefixes in "Secs" and "Days", it conflicts
>>> with the above rule, "Time". Am I missing
>> something
>>> obvious?
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ronald.petty at milliman.com  Wed Apr  7 12:31:49 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] lexer troubles in grammar
In-Reply-To: <20040407132730.34648.qmail@web41014.mail.yahoo.com>
Message-ID: <OFAD94F870.AA56D04D-ON86256E6F.0069DA96-86256E6F.006B888D@milliman.com>

When I run this grammar I get the following

$ javac *.java
Note: * uses or overrides a deprecated API.
Note: Recompile with -Xlint:deprecation for details.

ron@asdf~
$ java t
sub function
line 1:5: expecting LETTER, found 'function'

I was wondering how this is happening.  It appears to me that Antlr's 
parser (well mine since I specified it :( ) should do the following.  My 
driver does parser.start(); 

1) The parser choices the first alternative to the rule start
2) The parser sees there is another parser rule called (sub) so it goes 
there (has to pick one and try it to failure I assume, before it tries 
function)
3) When you get there, the parser says to the lexer I need a token that 
matches your rule for "SUB"
4) The lexer tries the next token on that rule and see if any alternatives 
match the lexer rule for SUB and the token "sub"
5) it does, and returns ok to the parser
6) the parser does the next rule which is check for WS (whitespace) and 
repeats 3-5
7) Now since we are on the parser rule sub, it goes on and checks for a 
parser rule called id
8) the parser rule id should just return assuming the word function is the 
ID found in the lexer, but for some reason it is going to function.

I must be missing some fundimental point here.  Doesn't Antlr parsers just 
go down the rules?  I probably have the rules wrong.  I assume since the 
start rule doesn't have (start)+ around it, that once it matches
either a sub | function it will end the program (well assuming you don't 
make an infinitely long ID).  How come I can do

sub asdf
sub asdf

and then it exits?

Does my question make sense?  I think this is my fault but not sure!

Thanks for the Help (drowning in compilers :) )

Ron


class TParser extends Parser;

options
{
        exportVocab=TVocab;
        k = 1;
}

start   :
        (sub) | (function)
        ;

sub     :
        SUB WS id
        ;

function        :
                FUNCTION WS id
                ;

id      :
        LETTER ( NUMBER | LETTER | UNDERSCORE )*
        ;

class TLexer extends Lexer;

options
{
        k = 2;
        exportVocab=TVocab;
        caseSensitive=false;
        charVocabulary = '\3'..'\377';
}

LETTER  :
        'a'..'z'
        ;

SUB     :
        "sub"
        ;

FUNCTION        :
                "function"
                ;

NUMBER  :
        '0'..'9'
        ;

UNDERSCORE      :
                '_'
                ;

WS      :
        (
        options { generateAmbigWarnings=false; }
        :       ' '
        |       '\t'
        |       '\n'
        |       "\r\n"
        |       '\r'
        )+
        ;

**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040407/eadc47b6/attachment.html
From parrt at cs.usfca.edu  Wed Apr  7 12:30:37 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] would anybody object to a 2.7.4 version?
Message-ID: <0C59A894-88CA-11D8-A12A-000A95891192@cs.usfca.edu>

Howdy,

Ric has made some useful changes (for example, in the build process for 
C++) that really should be fixed.  I feel that the changes (some in the 
string unquoting) in functionality warrant a new version.  Would 
anybody object to a quick antlr-2.7.4rc1 release candidate 1 and then a 
full 2.7.4 version that fixed these problems?

Terence
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Wed Apr  7 11:05:03 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] antlr deprecated errors
In-Reply-To: <OFE936E8AB.25EC27EA-ON86256E6E.00755A28-86256E6E.0075B82C@milliman.com>
References: <OFE936E8AB.25EC27EA-ON86256E6E.00755A28-86256E6E.0075B82C@milliman.com>
Message-ID: <17E09806-88BE-11D8-A12A-000A95891192@cs.usfca.edu>


On Apr 6, 2004, at 2:23 PM, ronald.petty@milliman.com wrote:
> I am using the latest antlr (well maybe not the bleeding edge release, 
> 2.7.3) and I am getting this. ?
>
> $ javac -d ./build -Xlint:deprecation ./build/*.java
> C:\antlr-2.7.3\antlr\Parser.java:324: warning: [deprecation] 
> setASTNodeType(java
> .lang.String) in antlr.ASTFactory has been deprecated
> ? ? ? ? astFactory.setASTNodeType(cl);
> ? ? ? ? ? ? ? ? ? ^
> C:\antlr-2.7.3\antlr\TreeParser.java:134: warning: [deprecation] 
> setASTNodeType(
> java.lang.String) in antlr.ASTFactory has been deprecated
> ? ? ? ? astFactory.setASTNodeType(nodeType);
> ? ? ? ? ? ? ? ? ? ^
> 2 warnings
>
>
> Any ideas?
>
> Thanks
> Ron

Hi Ron.  I think you just need to change the method name. :) Check out 
the source for the factory.

Terence
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Wed Apr  7 12:26:06 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:37 2004
Subject: New antlr-interest member
Message-ID: <1081365966.75.33830.w72@yahoogroups.com>


Hello,

This is an automated email message to let you know that
eric_2074 <gluon@earthlink.net> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From monty at codetransform.com  Wed Apr  7 21:43:05 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] lexer troubles in grammar
In-Reply-To: <OFAD94F870.AA56D04D-ON86256E6F.0069DA96-86256E6F.006B888D@milliman.com>
References: <OFAD94F870.AA56D04D-ON86256E6F.0069DA96-86256E6F.006B888D@milliman.com>
Message-ID: <39E8DE2E-8917-11D8-969E-000393B5606C@codetransform.com>

Try invoking antlr.Tool with the -trace option to see what is really  
going on, or step through it with a debugger.

Monty
ANTLR consulting
www.codetransform.com

On Apr 7, 2004, at 12:31 PM, ronald.petty@milliman.com wrote:

>
> When I run this grammar I get the following
>
> $ javac *.java
> Note: * uses or overrides a deprecated API.
> Note: Recompile with -Xlint:deprecation for details.
>
> ron@asdf~
> $ java t
> sub function
> line 1:5: expecting LETTER, found 'function'
>
> I was wondering how this is happening. ?It appears to me that Antlr's  
> parser (well mine since I specified it :( ) should do the following.  
> ?My driver does parser.start(); ?
>
> 1) The parser choices the first alternative to the rule start
> 2) The parser sees there is another parser rule called (sub) so it  
> goes there (has to pick one and try it to failure I assume, before it  
> tries function)
> 3) When you get there, the parser says to the lexer I need a token  
> that matches your rule for "SUB"
> 4) The lexer tries the next token on that rule and see if any  
> alternatives match the lexer rule for SUB and the token "sub"
> 5) it does, and returns ok to the parser
> 6) the parser does the next rule which is check for WS (whitespace)  
> and repeats 3-5
> 7) Now since we are on the parser rule sub, it goes on and checks for  
> a parser rule called id
> 8) the parser rule id should just return assuming the word function is  
> the ID found in the lexer, but for some reason it is going to  
> function.
>
> I must be missing some fundimental point here. ?Doesn't Antlr parsers  
> just go down the rules? ?I probably have the rules wrong. ?I assume  
> since the start rule doesn't have (start)+ around it, that once it  
> matches
> either a sub | function it will end the program (well assuming you  
> don't make an infinitely long ID). ?How come I can do
>
> sub asdf
> sub asdf
>
> and then it exits?
>
> Does my question make sense? ?I think this is my fault but not sure!
>
> Thanks for the Help (drowning in compilers :) )
>
> Ron
>
>
> class TParser extends Parser;
>
> options
> {
> ? ? ? ? exportVocab=TVocab;
> ? ? ? ? k = 1;
> }
>
> start ? :
> ? ? ? ? (sub) | (function)
> ? ? ? ? ;
>
> sub ? ? :
> ? ? ? ? SUB WS id
> ? ? ? ? ;
>
> function ? ? ? ?:
> ? ? ? ? ? ? ? ? FUNCTION WS id
> ? ? ? ? ? ? ? ? ;
>
> id ? ? ?:
> ? ? ? ? LETTER ( NUMBER | LETTER | UNDERSCORE )*
> ? ? ? ? ;
>
> class TLexer extends Lexer;
>
> options
> {
> ? ? ? ? k = 2;
> ? ? ? ? exportVocab=TVocab;
> ? ? ? ? caseSensitive=false;
> ? ? ? ? charVocabulary = '\3'..'\377';
> }
>
> LETTER ?:
> ? ? ? ? 'a'..'z'
> ? ? ? ? ;
>
> SUB ? ? :
> ? ? ? ? "sub"
> ? ? ? ? ;
>
> FUNCTION ? ? ? ?:
> ? ? ? ? ? ? ? ? "function"
> ? ? ? ? ? ? ? ? ;
>
> NUMBER ?:
> ? ? ? ? '0'..'9'
> ? ? ? ? ;
>
> UNDERSCORE ? ? ?:
> ? ? ? ? ? ? ? ? '_'
> ? ? ? ? ? ? ? ? ;
>
> WS ? ? ?:
> ? ? ? ? (
> ? ? ? ? options { generateAmbigWarnings=false; }
> ? ? ? ? : ? ? ? ' '
> ? ? ? ? | ? ? ? '\t'
> ? ? ? ? | ? ? ? '\n'
> ? ? ? ? | ? ? ? "\r\n"
> ? ? ? ? | ? ? ? '\r'
> ? ? ? ? )+
> ? ? ? ? ;
> *********************************************************************** 
> ***************
> This communication is intended solely for the addressee and is
> confidential. If you are not the intended recipient, any disclosure,
> copying, distribution or any action taken or omitted to be taken in
> reliance on it, is prohibited and may be unlawful. Unless indicated
> to the contrary: it does not constitute professional advice or
> opinions upon which reliance may be made by the addressee or any
> other party, and it should be considered to be a work in progress.
> *********************************************************************** 
> ***************
>
>
> Yahoo! Groups Links
>
> 	? 	To visit your group on the web, go to:
> http://groups.yahoo.com/group/antlr-interest/
> ?
> 	? 	 To unsubscribe from this group, send an email to:
> antlr-interest-unsubscribe@yahoogroups.com
> ?
> 	? 	 Your use of Yahoo! Groups is subject to the Yahoo! Terms of  
> Service.
>
>  


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From markl at glyphic.com  Wed Apr  7 19:44:48 2004
From: markl at glyphic.com (Mark)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] Re: would anybody object to a 2.7.4 version?
In-Reply-To: <0C59A894-88CA-11D8-A12A-000A95891192@cs.usfca.edu>
Message-ID: <c52eb0+q1me@eGroups.com>

> Ric has made some useful changes (for example, in the build process for C++)

Well, now that you mention it....  Our project makes use of Antlr, but we want people to be 
able to build it without Java installed.  So we include the files generated from the grammar 
(.g) files, and the Antlr C++ support lib sources in our distribution.

The problem is that people can't build the Antlr C++ support lib via Antlr's build process: 
Antlr's configure script requires that Java be installed.  So, rather than build it as a lib, we 
compile the sources along with the rest of the sources to our project.

This works, but we're not using "blessed" way to build Antlr.  At present, none of the C++ 
files need anything generated by configure that we can't duplicate in our make files.  But, 
should Antlr ever start using a configure generated config.h file, we'll be hosed.

What we'd like is there to be a way to invoke configure with an option that says "we're only 
building the C++ support lib, and only need the C++ checks".  Is this possible?

- Mark
markl@wheatfarm.org
http://www.wheatfarm.org/



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From joerg+computer.antlr at bodensee.pi5.physik.uni-stuttgart.de  Thu Apr  8 00:43:11 2004
From: joerg+computer.antlr at bodensee.pi5.physik.uni-stuttgart.de (=?iso-8859-1?q?J=F6rg_Werner?=)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] Re: would anybody object to a 2.7.4 version?
In-Reply-To: <c52eb0+q1me@eGroups.com>
References: <c52eb0+q1me@eGroups.com>
Message-ID: <200404080943.15041.joerg+computer.antlr@bodensee.pi5.physik.uni-stuttgart.de>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi!

On Thursday 08 April 2004 04:44, Mark wrote:
> > Ric has made some useful changes (for example, in the build process for
> > C++)
I don't know about the changes Ric did, but how about support for building 
with libtool (allows to easily build shared libraries under most OSes...).

Cheers,

J?rg

- -- 
Dipl-Phys. J?rg Werner			j.werner@physik.uni-stuttgart.de
Universit?t Stuttgart
5. physikalisches Institut		Telefon: 0711/685-4951
Pfaffenwaldring 57			Telefax: 0711/685-3810
D-70550 Stuttgart
Visit our Homepage: 
http://www.physik.uni-stuttgart.de/institute/pi/5/index.html
My private Homepage: http://schreibubi.pi5.physik.uni-stuttgart.de/
GPG-Key fingerprint: 6630 6A73 7725 483C 1594  1D64 3F92 5251 8710 EDF6

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (GNU/Linux)

iD8DBQFAdQKQP5JSUYcQ7fYRApJiAJ93BTkOGrV8NM7JU2lnVJT0OPBU/wCeOtrj
YGkk8vhpkl3TLW6I/zd4tNY=
=lnKT
-----END PGP SIGNATURE-----


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From idontwantanidwith2000init at yahoo.com  Thu Apr  8 05:12:23 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] lexical nondeterminism Or rule contain rule
Message-ID: <c53fj7+nq3n@eGroups.com>

Sorry,
I had a misteke in the message I've post.
The problem is:
I have two defenitions:
one of a name consisting with '"' ('a'..'z'|'A'..'Z')+ '"'
and a comment that is enclosed with '"'s but can accept any 
character in it.

What can I do to avoid nondeterminism?




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Thu Apr  8 00:24:12 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:37 2004
Subject: Unsubscription by antlr-interest member
Message-ID: <1081409052.1061.98828.m7@yahoogroups.com>


Hello,

This is an automated email message to let you know that
epovazan <epovazan@telus.net> unsubscribed from your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a member unsubscribes.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 



From idontwantanidwith2000init at yahoo.com  Thu Apr  8 06:25:52 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] overriding antlr error messages
Message-ID: <c53jt0+86oq@eGroups.com>

Hi,
I'd like to override antlr error messages.
I have a "poor" language that is composed of commands and parameters
I'd like to print commandName + possible parameters whenever there 
was an error in the parsing of a command. That is: a command was 
entered but it's parameters don't answer to the rule.

Tal.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Thu Apr  8 02:06:21 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] Re: would anybody object to a 2.7.4 version?
In-Reply-To: <200404080943.15041.joerg+computer.antlr@bodensee.pi5.physik.uni-stuttgart.de>
References: <c52eb0+q1me@eGroups.com> <200404080943.15041.joerg+computer.antlr@bodensee.pi5.physik.uni-stuttgart.de>
Message-ID: <20040408090621.GG26357@cs.utwente.nl>

On Thu, Apr 08, 2004 at 09:43:11AM +0200, Jrg Werner wrote:
> > > Ric has made some useful changes (for example, in the build process for
> > > C++)
> I don't know about the changes Ric did, but how about support for building 
> with libtool (allows to easily build shared libraries under most OSes...).

Hmm don't even have a shared target in the makefiles so I see no point in
libtool? (Also hate the sucker since it's a lot too easy in stripping out
necessary linker options)

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Time what is time - I wish I knew how to tell You why - It hurts to know -
          Aren't we machines - Time what is time - Unlock the door
               - And see the truth - Then time is time again
                From: 'Time what is Time' by Blind Guardian


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Thu Apr  8 02:43:27 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:37 2004
Subject: New antlr-interest member
Message-ID: <1081417407.137.95784.w5@yahoogroups.com>


Hello,

This is an automated email message to let you know that
francofraaalesi <fmarot@esil.univ-mrs.fr> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From notify at yahoogroups.com  Thu Apr  8 08:52:26 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:37 2004
Subject: New antlr-interest member
Message-ID: <1081439546.191.11780.w13@yahoogroups.com>


Hello,

This is an automated email message to let you know that
bellecave_laurence <bellecave_laurence@yahoo.fr> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From idontwantanidwith2000init at yahoo.com  Thu Apr  8 04:30:33 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] lexical nondeterminism Or rule contain rule
Message-ID: <c53d4p+ld39@eGroups.com>

Hi,
I have one lexical rule that contains another.
STRING: ( 'a'..'z'|'A'..'Z' )+
	;

STRING_LITERAL
  : '"'!
    ( '\\' .
    | ~('"'|'\n'|'\r')
    )*
    ( '"'!
    | // nothing -- write error message
    )
	;

I'm using eclipse.
It's warning me that I have nondeterminism but I'm not using 
STRING_LITERAL and STRING in the same parser rule.
What can I do to avoid this nondeterminism?

Tal.




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Thu Apr  8 04:07:50 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:37 2004
Subject: New antlr-interest member
Message-ID: <1081422470.80.60310.w54@yahoogroups.com>


Hello,

This is an automated email message to let you know that
idontwantanidwith2000init <idontwantanidwith2000init@yahoo.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From fmarot at esil.univ-mrs.fr  Thu Apr  8 02:50:12 2004
From: fmarot at esil.univ-mrs.fr (francofraaalesi)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] Tree including comments as tokens
Message-ID: <c5378k+qotg@eGroups.com>

Hi !

I'm new to the group & to ANTLR, & I got a question which I couldn't 
find any solution.
I'd like to parse java code & to build a tree from it but including 
the comments of the java code.
The java grammar & tree builder/parser I found on the ANTLR website 
don't build such trees & seem to exclude comments from the trees...
(by comments I mean "/* a_comment */" and "// a_comment")

If anyone has a solution i would be glad.

Thanks



Francois




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From johnm-antlr at non.net  Thu Apr  8 09:39:34 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] visual basic 6 grammar
In-Reply-To: <4073CFB3.2070703@softax.pl>
References: <C7FE35004D40FD45AA342991B88CE40409AE55@lnml1.eca-international.local>
	<4071920E.8030602@softax.pl>
	<16498.49601.73762.317848@despot.non.net>
	<4072CC9C.5030005@softax.pl>
	<16499.27602.846146.42104@despot.non.net>
	<4073CFB3.2070703@softax.pl>
Message-ID: <16501.32838.21795.61471@despot.non.net>

>>>>> "Sebastian" == Sebastian Kaliszewski <sk@z.pl> writes:
[...]

> Very possible. I'm not a native English speaker and my English is
> ho-hum...

Well, your command of English is infinitely better than my command of your
native language.  :-)

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Thu Apr  8 10:22:11 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:37 2004
Subject: New antlr-interest member
Message-ID: <1081444931.71.88772.w63@yahoogroups.com>


Hello,

This is an automated email message to let you know that
amaresh_bikki <amaresh_bikki@yahoo.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From notify at yahoogroups.com  Thu Apr  8 11:28:07 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:37 2004
Subject: New antlr-interest member
Message-ID: <1081448887.93.83332.w36@yahoogroups.com>


Hello,

This is an automated email message to let you know that
jbfraleigh <jbfraleigh@hotmail.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From sk at z.pl  Thu Apr  8 05:42:05 2004
From: sk at z.pl (Sebastian Kaliszewski)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] would anybody object to a 2.7.4 version?
In-Reply-To: <0C59A894-88CA-11D8-A12A-000A95891192@cs.usfca.edu>
References: <0C59A894-88CA-11D8-A12A-000A95891192@cs.usfca.edu>
Message-ID: <4075489D.90502@softax.pl>

Terence Parr wrote:
> Ric has made some useful changes (for example, in the build process for 
> C++) that really should be fixed.  I feel that the changes (some in the 
> string unquoting) in functionality warrant a new version.  Would 
> anybody object to a quick antlr-2.7.4rc1 release candidate 1 and then a 
> full 2.7.4 version that fixed these problems?

As just ANTLR enduser I don't see anything against that. Changes are good 
and I'd welcome them in full release (I prefer using full releases than 
development snapshots).

BTW. Will there be binmary only (precompiled ising GCJ) version shortly 
after release?

BTW2. I'd also wecome (as usefull add-on) the possibility of building just 
C++ libraries out of official release (as it was suggested in one of the 
recent posts).

rgds
-- 
Sebastian Kaliszewski



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From jbfraleigh at hotmail.com  Thu Apr  8 11:36:00 2004
From: jbfraleigh at hotmail.com (jbfraleigh)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] Help with parser and non-determinism...
Message-ID: <c5462g+6a5n@eGroups.com>

I've just recently started working with Antlr.  I'm trying to  
generate a "simple" grammar utilizing the parser and have run into a  
problem. 

The idea is to be able to parse something along the lines of the  
following:

Example 1: x in table y

Example 2: (x in table y and q in table z)

Example 3: ((x in table y and q in table z) and b in table p)

The code in the .g file for the parser looks something like this:

logic_1	: (LPAREN! if_br RPAREN!) | if_br ;
logic_2	: (LPAREN!)=> (LPAREN! logic_1 ((AND|OR) logic_2)* RPAREN!) 
                    | (logic_1 ((AND^|OR^) logic_2)*) ;

For reference, if_br is an expression that looks something like
"x in table y."  logic_1 will evaluate this as either: 
("x in table y") or "x in table y."  

Now, logic_2 is essentially two conditions.  If the first token is 
LPAREN, the following expression should be evaluated:

(a) LPAREN! logic_1 ((AND|OR) logic_2)* RPAREN!

Otherwise, the following expression should be evaluated:

(b) logic_1 ((AND^|OR^) logic_2)*

Note that this is recursive logic ? in either evaluation of
logic_2, we're potentially looking at the expression logic_1
AND/OR logic_2

You've probably figured out by now that there are a few problems
here.

1) Because there are two expressions that evaluate to the same 
expression with multiple tokens, the following error is generated:

a.g:25: warning:nondeterminism upon
a.g:25:     k==1:"and","or"

2) Because of the recursive nature of this expression, the following 
error is also generated:

a.g:25: warning:nondeterminism upon
a.g:25:     between alt 1 and exit branch of block


Hopefully you've figured out the intent of this code: (I'm
using regular expression logic to simplify)

1) if LPAREN logic_1 (AND/OR logic_1)* RPAREN then don't mark the 
AND/OR token as a parent in the AST

2) if logic_1 (AND/OR logic_1)* then mark the AND/OR token as a 
parent in the AST

The rest is kind of fluff to allow for nesting.

I've played with this for quite some time and can't seem to
write it to produce the desired results.  I do understand why I'm
receiving the warning messages, but can't see any way around
them.  

The way I see it, I believe that I need both of the expressions in  
logic_2.  I can't use something like (LPAREN)? .. (RPAREN)?
because I need to balance the parentheses.  I also need two different 
action evaluations for the AND/OR token ?- under one set of 
circumstances, it's a parent in the AST.  Under another set of 
circumstances, it isn't a parent in the AST.

Hopefully someone can enlighten me.

Thanks in advance.





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From dewing at apple.com  Thu Apr  8 10:22:03 2004
From: dewing at apple.com (David Ewing)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] Java.g grammar issues & potential fix
In-Reply-To: <c50d25+fimp@eGroups.com>
References: <c50d25+fimp@eGroups.com>
Message-ID: <40A31E04-8981-11D8-AE4E-000A95E134CC@apple.com>

Now that you remind me. The 1.4 Java grammar also includes generics, so 
shouldn't we call it 1.5? Of course, it is missing a number of other 
Java 1.5 language features, metadata being one of the more interesting 
ones. Is anybody working on adding this support?

Dave

On Apr 7, 2004, at 2:10 AM, Vincent Mallet wrote:

> Terence & All,
>
> A problem in Clover (code coverage for Java which uses antlr)
> prompted me to look at the java.g "1.4 update" grammar and I found
> a few problems with the lexer:
>  1. the grammar won't accept octal-looking floats or doubles
>     (09d for example)
>  2. the grammar will accept hexadecimal numbers with a fractional
>     part (0x12.34 for example)
>
> I have seen a fix for problem #1 in java.g version 1.21-october-2003
> but #2 is definitely broken.
>
> In an attempt to clarify that part of the grammar I came up with a
> version of the NUM_INT lexer rule which seems to be more correct and
> potentially easier to read (indentation might need some work).
>
> If you have an opinion on the new rule I would love to hear it.
>
> Here it goes:
> take java.g, truncate evertyhing after "NUM_INT", replace with:
>
>
>  ---cut-cut---
> // a numeric literal
> NUM_INT
>     :   // all floating point literals with a whole-number part
>         ( (DIGIT)+ ('.' | 'e' | 'E' | 'f' | 'F' | 'd' | 'D' ) )=>
> (DIGIT)+
>         (  (('.' (DIGIT)* (EXPONENT)? | EXPONENT )
>             (('f'|'F') { _ttype = NUM_FLOAT; } | ('d' | 'D')? {
> _ttype = NUM_DOUBLE; } )
>            )
>          | ( ('f'|'F') { _ttype = NUM_FLOAT; } )
>          | ( ('d'|'D') { _ttype = NUM_DOUBLE; } )
>         )
>
>     |   // all floating point literals with no whole-number part
> (possibly just '.')
>         '.' { _ttype = DOT; }
>         (DIGIT)+ (EXPONENT)?
>         ( ('f'|'F') { _ttype = NUM_FLOAT; } | ('d' | 'D')? { _ttype
> = NUM_DOUBLE; } )
>
>     |   // all decimal literals
>         (   '0' ('0'..'7')+              // octal
>           | ('1'..'9') (DIGIT)+          // decimal
>           | '0' ('x' | 'X') (HEX_DIGIT)+ // hexa
>           | '0'                          // decimal
>         )
>         (('l' | 'L') { _ttype = NUM_LONG; })?
>     ;
>
>
> // a couple protected methods to assist in matching floating point
> numbers
> protected
> DIGIT
> 	:	'0'..'9'
> 	;
>
> protected
> EXPONENT
> 	:	('e'|'E') ('+'|'-')? ('0'..'9')+
> 	;
>
>  ---cut-cut---
>
> Thanks,
>
>     Vince.
>
>
>
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Thu Apr  8 02:11:24 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] Re: would anybody object to a 2.7.4 version?
In-Reply-To: <c52eb0+q1me@eGroups.com>
References: <0C59A894-88CA-11D8-A12A-000A95891192@cs.usfca.edu> <c52eb0+q1me@eGroups.com>
Message-ID: <20040408091124.GH26357@cs.utwente.nl>

On Thu, Apr 08, 2004 at 02:44:48AM -0000, Mark wrote:
> This works, but we're not using "blessed" way to build Antlr.  At present,
> none of the C++ files need anything generated by configure that we can't
> duplicate in our make files.  But, should Antlr ever start using a
> configure generated config.h file, we'll be hosed.

Don't think that risk exists with ANTLR 2. Not much to configure there
that's not possible by looking at the compiler #defines.

> What we'd like is there to be a way to invoke configure with an option that
> says "we're only building the C++ support lib, and only need the C++
> checks".  Is this possible?

Probably possible. But I don't have time to do it in the coming week(s). If
you supply a sane patch to configure.in and the build scripts then I'm
happy to incorporate it (but not sure if it will be in 2.7.4 probably not)

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Chaos often breeds life, when order breeds habit.
  --- Henry B. Adams, The Education of Henry Adams



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From tzagotta1 at sienasystems.com  Thu Apr  8 06:37:24 2004
From: tzagotta1 at sienasystems.com (Tom Zagotta)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] Re: would anybody object to a 2.7.4 version?
In-Reply-To: <20040408090621.GG26357@cs.utwente.nl>
Message-ID: <200404081337.IAA32712@coral.propagation.net>

Ric,

> > > > Ric has made some useful changes (for example, in the build 
> > > > process for
> > > > C++)
> > I don't know about the changes Ric did, but how about support for 
> > building with libtool (allows to easily build shared 
> libraries under most OSes...).
> 
> Hmm don't even have a shared target in the makefiles so I see 
> no point in libtool? (Also hate the sucker since it's a lot 
> too easy in stripping out necessary linker options)

[slightly changing the subject]

We have made some minor changes to 2.7.3 to support Borland C++Builder 6 -
can we submit these to you for inclusion in 2.7.4?

Regards,
Tom Zagotta



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Thu Apr  8 10:30:54 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] lexical nondeterminism Or rule contain rule
In-Reply-To: <c53d4p+ld39@eGroups.com>
References: <c53d4p+ld39@eGroups.com>
Message-ID: <7CFA944A-8982-11D8-A12A-000A95891192@cs.usfca.edu>


On Apr 8, 2004, at 4:30 AM, idontwantanidwith2000init wrote:

> Hi,
> I have one lexical rule that contains another.
> STRING: ( 'a'..'z'|'A'..'Z' )+
> 	;
>
> STRING_LITERAL
>   : '"'!
>     ( '\\' .
>     | ~('"'|'\n'|'\r')
>     )*
>     ( '"'!
>     | // nothing -- write error message
>     )
> 	;
>
> I'm using eclipse.
> It's warning me that I have nondeterminism but I'm not using
> STRING_LITERAL and STRING in the same parser rule.
> What can I do to avoid this nondeterminism?

Hi.  Both are considered valid tokens and hence nextToken has them as 
alternatives.  Use protected keyword on one of the rules.

Terence
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ronald.petty at milliman.com  Thu Apr  8 12:14:22 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] newline?
In-Reply-To: <c5462g+6a5n@eGroups.com>
Message-ID: <OF83AFBD27.2F238ABD-ON86256E70.006946CE-86256E70.0069EFA0@milliman.com>

I was reading the Antlr tutorial by Ashley J.S Mills and was wondering 
about the newline function.  She (or maybe he), says

"newline() method which tells Antlr to bump up it's line count and goto 
the next line.  Without this the lexer would be stuck on one line!" page 9 
if printed

This has to do with her example of 

WS      :
        ( ' '
        | '\t'
        | '\r' '\n' { newline(); }
        | '\n'       { newline(); }
        )
        { $setType(Token.SKIP); }
        ;

I am also checking for which space and newlines, however I do not have the 
newline function being used (also don't have the setType call).  When I do

java Main
test
MATCHED TEST
test
MATCHED TEST
test
MATCHED TEST

that appears to me that antlr is handling newline just fine without the 
function call.  Any idea if I am wrong or am I missing something from the 
tutorial?

Thanks
Ron

**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040408/2845359f/attachment.html
From FranklinChen at cmu.edu  Thu Apr  8 20:38:41 2004
From: FranklinChen at cmu.edu (FranklinChen@cmu.edu)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] Ambiguity question
Message-ID: <16502.6849.612892.518354@SWAN.PSY.cmu.edu>

I am uncertain how to best parse using ANTLR a language in which the
following is legal:

a b c.
d - e f - g.
- h.
i j k -
*
l -- m --

Assume all whitespace is skipped by the lexer (so the input could have
been in all one big line).  The task is to parse into sentences (as
visually indicated above).



My starting point is the following:


start: (sentence)+ EOF
    ;

sentence: contents terminator
    | JUNK
    ;

contents: (content)+
    ;

content: WORD
    | DASH {
       // want to leave as DASH for tree parser to use
    }
    ;

terminator: PERIOD
    | DASH  {
        // want to turn into an INTERRUPTION token for tree parser
        // to use
    }
    ;


This of course isn't enough, because context is needed in order to
determine whether a DASH is content or a terminator.

Is there a way to do this in one pass?  Or is it better to weaken the
grammar to parse into something for an intermediate tree parser to
transform?

-- 
Franklin


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From FranklinChen at cmu.edu  Thu Apr  8 20:43:40 2004
From: FranklinChen at cmu.edu (FranklinChen@cmu.edu)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] Accessing parts of token from parser
Message-ID: <16502.7148.959252.165475@SWAN.PSY.cmu.edu>

I have a language that consists of complicated tokens with internal
substructure.  I would like to access the substructure in Perl-like or
better fashion, and am wondering what the most elegant way to do it is
in ANTLR.

For the sake of concreteness, let me consider a toy example of what I
mean.  Suppose my language had floating point tokens, e.g., "24.43".

It is natural to write a lexer by defining

FLOAT: INT '.' INT
    ;

protected
INT: ('0'..'9')+
    ;

but then in the parser, if I want to get the integer part and the
fractional part of the float, it would be stupid to reparse:

stuff: junk1 f:FLOAT junk2 { // reparse f to get parts, use them
   }
    ;


Instead, a better solution is to rewrite the lexer to do

FLOAT: x:INT '.' y:INT  {
   // squirrel away x and y into lexer variables lx, ly }
    ;

and have the parser do

stuff: junk1 FLOAT { 
  // squirrel away lx, ly into rule variables rx, ry
  } junk2
  { // use rx, ry
  }
    ;

This is kind of involved.  Is there a way to automate this sort of
thing?  Or should something else entirely be used?

-- 
Franklin


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From payasam79 at yahoo.com  Thu Apr  8 09:35:19 2004
From: payasam79 at yahoo.com (Bharath S)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] Rules in lexer or parser + impact of "protected" keyword
In-Reply-To: <79B0BD35-88BE-11D8-A12A-000A95891192@cs.usfca.edu>
Message-ID: <20040408163519.27574.qmail@web41006.mail.yahoo.com>

Hi Ter,

Thanks for your clarification. I did it this way:

Interval: ((INT)('s'))=> Seconds...
          | ((INT)('d'))=>days..
and so on.

---------------------------------------------------
Another important question: I have all of my
production rules in my lexer and as I include more
rules, I find that I have to keep 80% of my rules as
"protected", to avoid non-determinism. For example, if
I have a "Time" rule, all of the constituting rules
(seconds, days, minutes, hours etc) are protected. I
am positive that placing rules in the parser instead
of the lexer will alleviate this situation but I'm not
sure how. Could someone please tell me the difference
of having rules in parser/lexer and more importantly,
will it eliminate my "protected" clutter?
----------------------------------------------------


--- Terence Parr <parrt@cs.usfca.edu> wrote:
> 
> On Apr 7, 2004, at 6:24 AM, Bharath S wrote:
> 
> > Hi Ter,
> >
> > I need to have a rule called time units, lets say,
> > that can be any unit (seconds or days or
> minutes..).
> > ----------------------------
> > Test: "Time:"(Secs|Days|mins|hours);
> > ----------------------------
> > is required for the same purpose. If I have "Test"
> as
> > my lexer rule, I want the user to enter any time
> unit
> > and I should be able to parse it and print out a
> > result that looks like:
> > ___________________________
> > Time: 25s
> > (or)
> > Time: 12d
> > ---------------------------
> >
> > and so on. Also each of the time units work
> perfectly
> > when I test them alone.
> 
> Ok, now I understand.  Left factor Days and Secs
> etc...  pull INT into 
> a common rule.  That is, pull INT out of Days and
> Secs and into Test; 
> should work.
> 
> Test: INT (Secs|Days) ;
> 
> protected
> Secs : 's' ;
> 
> Terence
> 
> >
> > Thanks Ter.
> >
> > --- Terence Parr <parrt@cs.usfca.edu> wrote:
> >>
> >> On Apr 6, 2004, at 2:08 PM, Bharath S wrote:
> >>> I have a rule of the form:
> >>> ----------------------------------------
> >>> Time: ('0'..'9')+
> >>>       ('d'{$setType(Days);} |
> 's'{$setType(Secs);}
> >>>       | {$setType(INT);}) ;
> >>>
> >>> and
> >>> -------------------------
> >>> protected Days: INT('d');
> >>> protected Secs: INT('s');
> >>> protected INT: ('0'..'9')+;
> >>> ---------------------------
> >>> When I try "Test: Secs|Days", I get a
> >> non-determinism
> >>> warning and it makes sense because both rules
> have
> >>> common left prefixes. However, I have no clue to
> >> how I
> >>> can fix it. If I write a separate rule to remove
> >>> common prefixes in "Secs" and "Days", it
> conflicts
> >>> with the above rule, "Time". Am I missing
> >> something
> >>> obvious?
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator,
> http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email
> again!
> Cofounder, http://www.peerscope.com pure link
> sharing
> 
> 
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
>      antlr-interest-unsubscribe@yahoogroups.com
> 
>  
> 


__________________________________
Do you Yahoo!?
Yahoo! Small Business $15K Web Design Giveaway 
http://promotions.yahoo.com/design_giveaway/


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From gluon at earthlink.net  Thu Apr  8 04:29:25 2004
From: gluon at earthlink.net (eric_2074)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] C# version of ParseView?
Message-ID: <c53d2l+1i3j@eGroups.com>

Does a C# version of ParseView exist? Is anyone working on one?  Is 
there something else that is being used? Is there a need for this?





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From amaresh_bikki at yahoo.com  Thu Apr  8 11:29:49 2004
From: amaresh_bikki at yahoo.com (amaresh_bikki)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] heirarchical grammar
Message-ID: <c545mt+mtub@eGroups.com>

Hai,

I am a newbie to ANTLR. 

I am trying to write a parser to the grammar that is mostly similar 
to this.

PERSON 'ETRAN_U450001'
  PERSON_ID 'ETRAN_U450001'
  GROUP 'FMCGRP'
  SYSTEM 'FMCSYS'
  LAST_NAME 'ETRAN_U45001'
  LEVEL 0
  IS_NOT_ABSENT
  DO NOT RESET_ABSENT
END 'ETRAN_U450001'

things in single quotes are values corresponsding to the Token b4 
that. The lines within PERSON can be in any order and can either be 
present or only appaear once. Let me know if anyone can give headsup 
on this. The problem I am facing is how to grammarize the non-
ordering part of it.

Thanks




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Thu Apr  8 23:35:36 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:37 2004
Subject: Unsubscription by antlr-interest member
Message-ID: <1081492536.118.61734.w5@yahoogroups.com>


Hello,

This is an automated email message to let you know that
bellecave_laurence <bellecave_laurence@yahoo.fr> unsubscribed from your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a member unsubscribes.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From FranklinChen at cmu.edu  Thu Apr  8 14:48:43 2004
From: FranklinChen at cmu.edu (FranklinChen@cmu.edu)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] Accessing parts of token from parser
Message-ID: <16501.51387.772320.345977@SWAN.PSY.cmu.edu>

I have a language that consists of complicated tokens with internal
substructure.  I would like to access the substructure in Perl-like or
better fashion, and am wondering what the most elegant way to do it is
in ANTLR.

For the sake of concreteness, let me consider a toy example of what I
mean.  Suppose my language had floating point tokens, e.g., "24.43".

It is natural to write a lexer by defining

FLOAT: INT '.' INT
    ;

protected
INT: ('0'..'9')+
    ;

but then in the parser, if I want to get the integer part and the
fractional part of the float, it would be stupid to do

stuff: junk1 f:FLOAT junk2 { // reparse f to get parts, use them
   }
    ;


Instead, a better solution is to rewrite the lexer to do

FLOAT: x:INT '.' y:INT  {
   // squirrel away x and y into lexer variables lx, ly }
    ;

and have the parser do

stuff: junk1 FLOAT { 
  // squirrel away lx, ly into rule variables rx, ry
  } junk2
  { // use rx, ry
  }
    ;

This is kind of involved.  Is there a better way I am missing?

-- 
Franklin


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From idontwantanidwith2000init at yahoo.com  Fri Apr  9 01:36:57 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] Re: lexical nondeterminism Or rule contain rule
In-Reply-To: <7CFA944A-8982-11D8-A12A-000A95891192@cs.usfca.edu>
Message-ID: <c55nb9+4nd7@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
wrote:
> 
> On Apr 8, 2004, at 4:30 AM, idontwantanidwith2000init wrote:
> 
> > Hi,
> > I have one lexical rule that contains another.
> > STRING: ( 'a'..'z'|'A'..'Z' )+
> > 	;
> >
> > STRING_LITERAL
> >   : '"'!
> >     ( '\\' .
> >     | ~('"'|'\n'|'\r')
> >     )*
> >     ( '"'!
> >     | // nothing -- write error message
> >     )
> > 	;
> >
> > I'm using eclipse.
> > It's warning me that I have nondeterminism but I'm not using
> > STRING_LITERAL and STRING in the same parser rule.
> > What can I do to avoid this nondeterminism?
> 
> Hi.  Both are considered valid tokens and hence nextToken has them 
as 
> alternatives.  Use protected keyword on one of the rules.
> 
> Terence
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
> Cofounder, http://www.peerscope.com pure link sharing



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From idontwantanidwith2000init at yahoo.com  Fri Apr  9 01:36:40 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] Re: lexical nondeterminism Or rule contain rule
In-Reply-To: <7CFA944A-8982-11D8-A12A-000A95891192@cs.usfca.edu>
Message-ID: <c55nao+la8t@eGroups.com>

Thanx, (I've just seen this message)

What does protected means?
I thought it means that the parser cannot use this lexam.
In my case the parser is using both but in a detemenistic way.

Tal

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
wrote:
> 
> On Apr 8, 2004, at 4:30 AM, idontwantanidwith2000init wrote:
> 
> > Hi,
> > I have one lexical rule that contains another.
> > STRING: ( 'a'..'z'|'A'..'Z' )+
> > 	;
> >
> > STRING_LITERAL
> >   : '"'!
> >     ( '\\' .
> >     | ~('"'|'\n'|'\r')
> >     )*
> >     ( '"'!
> >     | // nothing -- write error message
> >     )
> > 	;
> >
> > I'm using eclipse.
> > It's warning me that I have nondeterminism but I'm not using
> > STRING_LITERAL and STRING in the same parser rule.
> > What can I do to avoid this nondeterminism?
> 
> Hi.  Both are considered valid tokens and hence nextToken has them 
as 
> alternatives.  Use protected keyword on one of the rules.
> 
> Terence
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
> Cofounder, http://www.peerscope.com pure link sharing



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From idontwantanidwith2000init at yahoo.com  Fri Apr  9 05:23:49 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] Re: lexical nondeterminism Or rule contain rule
In-Reply-To: <c55nao+la8t@eGroups.com>
Message-ID: <c564kl+7jk3@eGroups.com>

--- In antlr-interest@yahoogroups.com, "idontwantanidwith2000init" 
Hi,
Quoted from eclipse antlr help:
protected // not a token; only invoked by another rule.
ESC
    :    '\\'
        (    'n'
        |    'r'
        |    't'
        |    'b'
        |    'f'
        |    '"'
        |    '\''
        |    '\\'
        |    ('u')+
             HEX_DIGIT HEX_DIGIT HEX_DIGIT HEX_DIGIT 
        ...
       )
    ;

So I've made up a little example:
class P1 extends Parser;

startRule
	: "mee" DIGIT NEWLINE
	| "moo" MOO NEWLINE
	;

class L1 extends Lexer;

STRING: ( 'a'..'z'|'A'..'Z' )+
	;

protected
DIGIT : ('0'..'9');

MOO : (DIGIT)+
	;

WS : ( ' ' | '\t' )+
     { $setType(Token.SKIP); }
   ;

NEWLINE
    :   '\r' '\n'   // DOS
    |   '\n'        // UNIX
    ;

MOO contains DIGIT
when I ran it with
Input: mee 2
I got:
line 1:5: expecting DIGIT, found '2'

If I can't use DIGIT in the parser how can I still parse such 
language?

<idontwantanidwith2000init@y...> wrote:
> Thanx, (I've just seen this message)
> 
> What does protected means?
> I thought it means that the parser cannot use this lexam.
> In my case the parser is using both but in a detemenistic way.
> 
> Tal
> 
> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
> wrote:
> > 
> > On Apr 8, 2004, at 4:30 AM, idontwantanidwith2000init wrote:
> > 
> > > Hi,
> > > I have one lexical rule that contains another.
> > > STRING: ( 'a'..'z'|'A'..'Z' )+
> > > 	;
> > >
> > > STRING_LITERAL
> > >   : '"'!
> > >     ( '\\' .
> > >     | ~('"'|'\n'|'\r')
> > >     )*
> > >     ( '"'!
> > >     | // nothing -- write error message
> > >     )
> > > 	;
> > >
> > > I'm using eclipse.
> > > It's warning me that I have nondeterminism but I'm not using
> > > STRING_LITERAL and STRING in the same parser rule.
> > > What can I do to avoid this nondeterminism?
> > 
> > Hi.  Both are considered valid tokens and hence nextToken has 
them 
> as 
> > alternatives.  Use protected keyword on one of the rules.
> > 
> > Terence
> > --
> > Professor Comp. Sci., University of San Francisco
> > Creator, ANTLR Parser Generator, http://www.antlr.org
> > Cofounder, http://www.jguru.com
> > Cofounder, http://www.knowspam.net enjoy email again!
> > Cofounder, http://www.peerscope.com pure link sharing



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Fri Apr  9 05:37:05 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:37 2004
Subject: Unsubscription by antlr-interest member
Message-ID: <1081514225.1829.54084.m7@yahoogroups.com>


Hello,

This is an automated email message to let you know that
mohammedaler@hotmail.com unsubscribed from your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a member unsubscribes.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Fri Apr  9 07:10:35 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:37 2004
Subject: [antlr-interest] heirarchical grammar
In-Reply-To: <c545mt+mtub@eGroups.com>
References: <c545mt+mtub@eGroups.com>
Message-ID: <16502.44763.319435.350490@despot.non.net>

>>>>> "amaresh" == amaresh bikki <amaresh_bikki@yahoo.com> writes:
[...]

> The lines within PERSON can be in any order and can either be present or
> only appaear once. Let me know if anyone can give headsup on this. The
> problem I am facing is how to grammarize the non- ordering part of it.

Look in the documentation and example grammars for the optional construct
and the "or" construct. For the exactly once part you can do that checking
in a tree grammar or via side-effects with semantic predicates.

Have fun,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Fri Apr  9 08:40:25 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:37 2004
Subject: New antlr-interest member
Message-ID: <1081525225.103.97805.w15@yahoogroups.com>


Hello,

This is an automated email message to let you know that
thierryj8 <thierryj8@yahoo.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From mailinglist at august.de  Fri Apr  9 02:18:59 2004
From: mailinglist at august.de (Rolf Schumacher)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] newbie question
Message-ID: <40766A83.7020104@august.de>

Even though I solved my problem I'd like to be able to understand 'why':

Why this rule does not work?:

LINECHAR: ~'\n';

while this is working:

LINECHAR: '\u0000'..'\u0009' | '\u000b'..'\uffff';

I would expect identical behavior from both lexer rules.
The answer must be simple, though I read several days thru the docs
and could not find it. Can you help me?

Rolf

p.s. ---------------
The full story: this works:
--------------------
class WParser extends Parser;
text    :   ( LINE )+ ;

class WLexer extends Lexer;
protected
LINECHAR:   '\u0000'..'\u0009' | '\u000b'..'\uffff'
          // putting ~'\n' here does not work, why??
      ;
LINE    :   (LINECHAR)+ {System.out.println(getText());} ;
WS      :   '\n' { _ttype = Token.SKIP; newline(); } ;


-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 1730 bytes
Desc: S/MIME Cryptographic Signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20040409/69a5e0a1/smime.bin
From thierryj8 at yahoo.com  Fri Apr  9 08:50:31 2004
From: thierryj8 at yahoo.com (thierryj8)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] ANTLR for command line interface
Message-ID: <c56go7+cu1h@eGroups.com>

I am currently writing a command line interface using ANTLR.

Currently I am able to parse and produce correct production, a problem
is left. A command of the form

>list *
which carries to "list * production" has the same effect as
>list
>*

Requesting a NEWLINE at the end of the command creates some other
problems. Questions:

- What is the effect of the "interactive" mode (Supposed to be for CLI)?
- Should look ahead entries be cancelled after a NEWLINE & HOW?
- Are there examples of CLIs with ANTLR?

Because there is a parser, a lexer, and the usage of code in Java,
there are several ways of soving problems. Is there a best practice
standard?




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From thierryj8 at yahoo.com  Fri Apr  9 09:29:44 2004
From: thierryj8 at yahoo.com (thierryj8)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] CLI with ANTLR - best practice
Message-ID: <c56j1o+bvtk@eGroups.com>

Best practice for CLI in Lex&Yacc, O'Reilly:

".. In order to scan the command line rather than a file, we must
rewrite input() and unput()..." (p38), 

"...The input routine handles calls from the lexer to obtain
characters" (p41),

"...The unput() routine handles calls from the lexer to "push back"
characters into the input stream." (p41)

Input() treats the CLI end of line as the end of file. Is there an
equivalent in ANTLR?




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ronald.petty at milliman.com  Fri Apr  9 09:50:10 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] caseSensitive question?
In-Reply-To: <c56j1o+bvtk@eGroups.com>
Message-ID: <OF5527D5F0.B8901B37-ON86256E71.005C350B-86256E71.005CBBEB@milliman.com>

When I try to match "Dim" this doesn't work, however if I try "dim" it 
works.  Is there something besides caseSensitive to set?  Is my 
charVocabulary or something interferring? 
Thanks
Ron

options {
}

class VB6Lexer extends Lexer;

options {
        exportVocab=VB6;
        charVocabulary='\3'..'\377'; //Latin, need to figure out Japanese 
charat
er sets for UNICODE, you can do non continuous ranges
        caseSensitive=false;

}

tokens {
        DIM     = "dim";
        FUNCTION        = "function";
        SUB     = "sub";
}

WS
        :       ' '
        |       '\t'
        |       '\r' '\n'
        |       '\n'
        ;

SEMI    :       ','
        ;

ID
        options {
                testLiterals=true;
                paraphrase = "an identifier";

        }
        :       ('a'..'z') ('a'..'z'|'0'..'9'|'_'|'.')*
        ;

SL_COMMENT
        :       "'" (~('\r'|'\n'))* (("\r\n")=>'\r''\n'|'\n')
        ;

**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040409/34211c05/attachment.html
From anakreonmejdi at yahoo.gr  Fri Apr  9 09:54:38 2004
From: anakreonmejdi at yahoo.gr (Anakreon)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] About GPL
Message-ID: <4076D54E.4070909@yahoo.gr>

As mentioned in an other thread, a grammar file was released by me under 
the GPL license.
My opinion is that I have the right to do this.
The generated code, is the product of my intellectual work and of the 
authors who wrote antlr.
So it should be correct that both parties have the right to impose the 
license which they like most, or think more appropriate.
As far as I know, antlr claims no rights on the generated code.
Hence I am the only one left to decide the license.

However, if someone has an other opinion I'd like to know his arguments.
It is crucial to me, that I will have the freedom to decide the license 
of the grammar.




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Fri Apr  9 10:02:18 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] newbie question
In-Reply-To: <40766A83.7020104@august.de>
References: <40766A83.7020104@august.de>
Message-ID: <A86AFC58-8A47-11D8-AD73-000393BB647E@cs.usfca.edu>


On Apr 9, 2004, at 2:18 AM, Rolf Schumacher wrote:

> Even though I solved my problem I'd like to be able to understand 
> 'why':
>
> Why this rule does not work?:
>
> LINECHAR: ~'\n';
>
> while this is working:
>
> LINECHAR: '\u0000'..'\u0009' | '\u000b'..'\uffff';
>
> I would expect identical behavior from both lexer rules.
> The answer must be simple, though I read several days thru the docs
> and could not find it. Can you help me?

Hi Rolf,

You need to specify a charVocabulary option so that the "not" operator 
makes sense. :)

Terence

> Rolf
>
> p.s. ---------------
> The full story: this works:
> --------------------
> class WParser extends Parser;
> text    :   ( LINE )+ ;
>
> class WLexer extends Lexer;
> protected
> LINECHAR:   '\u0000'..'\u0009' | '\u000b'..'\uffff'
>          // putting ~'\n' here does not work, why??
>      ;
> LINE    :   (LINECHAR)+ {System.out.println(getText());} ;
> WS      :   '\n' { _ttype = Token.SKIP; newline(); } ;
>
>





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From anakreonmejdi at yahoo.gr  Fri Apr  9 10:05:03 2004
From: anakreonmejdi at yahoo.gr (Anakreon)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] caseSensitive question?
In-Reply-To: <OF5527D5F0.B8901B37-ON86256E71.005C350B-86256E71.005CBBEB@milliman.com>
References: <OF5527D5F0.B8901B37-ON86256E71.005C350B-86256E71.005CBBEB@milliman.com>
Message-ID: <4076D7BF.1090209@yahoo.gr>

ronald.petty@milliman.com wrote:
> 
> When I try to match "Dim" this doesn't work, however if I try "dim" it 
> works.  Is there something besides caseSensitive to set?  Is my 
> charVocabulary or something interferring?  
> Thanks
> Ron
> 
In the grammar I posted, this is handled in an other way.
The keywords are placed in a Map and when an ID is found and the last token 
found was not DOT (.) then the Lexer would check if there is a keyword with the 
same text in the Map.
I did this because ASP uses ActiveX, and ActiveX components can have any method 
name they like.
consider:
dim a
set a = CreateObject("some activeX");
a.dim 'this is the method name

Perhaps you should think of this peculiar case.


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From lists at lischke-online.de  Fri Apr  9 10:09:18 2004
From: lists at lischke-online.de (Mike Lischke)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Possible bug in subrule invertion
Message-ID: <20040409170457.F348057C006@h4866.serverkompetenz.net>

Hi all,

It seems like I found a bug in the subrule invertion parser. When I try to invert a set of tokens like:

~('*' | LINE_FEED)

Where LINE_FEED is a (lexer) token defined as '\r'. ANTLR throws an error ("This subrule cannot be inverted....") however when I use

~('*' | '\r')

The construct is accepted. So to me it looks like a bug. Is this a known problem?

Btw.: It would be very helpful if we could do some "token set maths" like

 DIGIT:            '0'..'9';
 OCTAL_DIGIT:     DIGIT - ['8', '9'];

In this simple example it would be easy to replace the octal digit rule however for large sets like Unicode it is necessary to selectively take out arbitrary ranges of code points as they are not defined yet.

Mike
--
www.soft-gems.net



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Fri Apr  9 10:26:20 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Possible bug in subrule invertion
In-Reply-To: <20040409170457.F348057C006@h4866.serverkompetenz.net>
References: <20040409170457.F348057C006@h4866.serverkompetenz.net>
Message-ID: <046C983E-8A4B-11D8-AD73-000393BB647E@cs.usfca.edu>


On Apr 9, 2004, at 10:09 AM, Mike Lischke wrote:

> Hi all,
>
> It seems like I found a bug in the subrule invertion parser. When I 
> try to invert a set of tokens like:
>
> ~('*' | LINE_FEED)
>
> Where LINE_FEED is a (lexer) token defined as '\r'. ANTLR throws an 
> error ("This subrule cannot be inverted....") however when I use
>
> ~('*' | '\r')
>
> The construct is accepted. So to me it looks like a bug. Is this a 
> known problem?

If this is in the lexer, you cannot invert "rules" such as LINE_FEED.  
Done on purpose, I'm afraid. ;)

> Btw.: It would be very helpful if we could do some "token set maths" 
> like
>
>  DIGIT:            '0'..'9';
>  OCTAL_DIGIT:     DIGIT - ['8', '9'];
>
> In this simple example it would be easy to replace the octal digit 
> rule however for large sets like Unicode it is necessary to 
> selectively take out arbitrary ranges of code points as they are not 
> defined yet.

Ah.  Like a set intersection operator and such?

Ter
>
> Mike
> --
> www.soft-gems.net
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From tzagotta1 at sienasystems.com  Fri Apr  9 10:39:14 2004
From: tzagotta1 at sienasystems.com (Tom Zagotta)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Possible bug in subrule invertion
In-Reply-To: <046C983E-8A4B-11D8-AD73-000393BB647E@cs.usfca.edu>
Message-ID: <200404091738.MAA08217@coral.propagation.net>


> If this is in the lexer, you cannot invert "rules" such as 
> LINE_FEED.  
> Done on purpose, I'm afraid. ;)

In this case, LINE_FEED would be best defined as a macro, which
unfortunately is not supported by ANTLR.  Macros (or something functionally
equivalent or better) would be a nice addition for helping to build up
lexers from smaller parts.

Regards,

- Tom



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From open.zone at virgin.net  Fri Apr  9 10:43:55 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Re: caseSensitive question?
In-Reply-To: <OF5527D5F0.B8901B37-ON86256E71.005C350B-86256E71.005CBBEB@milliman.com>
Message-ID: <c56ncr+5n1u@eGroups.com>

--- In antlr-interest@yahoogroups.com, ronald.petty@m... wrote:
> When I try to match "Dim" this doesn't work, however if I try "dim" it 
> works.  Is there something besides caseSensitive to set?  Is my 
> charVocabulary or something interferring? 

You need to set caseSentiveLiterals too.

When you say "it doesn't work", what happens exactly?. It helps to
post the input (not too lengthy) and the output messages in addition
to the grammar.

Do you plan on contributing this grammar to ANTLR's grammars library
with a license that isn't more restrictive than BSD?

> options {
> }
> 
> class VB6Lexer extends Lexer;
> 
> options {
>         exportVocab=VB6;
>         charVocabulary='\3'..'\377'; //Latin, need to figure out
Japanese 
> charat
> er sets for UNICODE, you can do non continuous ranges

Why Japanese?. In any case, I don't think VB6 did UNICODE.

>         caseSensitive=false;
> 
> }
> 
> tokens {
>         DIM     = "dim";
>         FUNCTION        = "function";
>         SUB     = "sub";
> }
> 
> WS
>         :       ' '
>         |       '\t'
>         |       '\r' '\n'
>         |       '\n'
>         ;

You might want to separate NEWLINE from other WHITESPACE. You usually
need to call newline() at a minimum after snarfing a newline char so
that your tokens have the correct line number info.

> 
> SEMI    :       ','
>         ;
> 
> ID
>         options {
>                 testLiterals=true;
>                 paraphrase = "an identifier";
> 
>         }
>         :       ('a'..'z') ('a'..'z'|'0'..'9'|'_'|'.')*
>         ;
> 
> SL_COMMENT
>         :       "'" (~('\r'|'\n'))* (("\r\n")=>'\r''\n'|'\n')
>         ;
> 
>
**************************************************************************************
> This communication is intended solely for the addressee and is
> confidential. If you are not the intended recipient, any disclosure, 
> copying, distribution or any action taken or omitted to be taken in
> reliance on it, is prohibited and may be unlawful. Unless indicated
> to the contrary: it does not constitute professional advice or 
> opinions upon which reliance may be made by the addressee or any
> other party, and it should be considered to be a work in progress.
>
**************************************************************************************



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From open.zone at virgin.net  Fri Apr  9 10:49:21 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Re: caseSensitive question?
In-Reply-To: <OF5527D5F0.B8901B37-ON86256E71.005C350B-86256E71.005CBBEB@milliman.com>
Message-ID: <c56nn1+l0ki@eGroups.com>

--- In antlr-interest@yahoogroups.com, ronald.petty@m... wrote:
> When I try to match "Dim" this doesn't work, however if I try "dim" it 
> works.  Is there something besides caseSensitive to set?  Is my 
> charVocabulary or something interferring? 

You need to set caseSentiveLiterals too.

When you say "it doesn't work", what happens exactly?. It helps to
post the input (not too lengthy) and the output messages in addition
to the grammar.

Do you plan on contributing this grammar to ANTLR's grammars library
with a license that isn't more restrictive than BSD?

> options {
> }
> 
> class VB6Lexer extends Lexer;
> 
> options {
>         exportVocab=VB6;
>         charVocabulary='\3'..'\377'; //Latin, need to figure out
Japanese 
> charat
> er sets for UNICODE, you can do non continuous ranges

Why Japanese?. In any case, I don't think VB6 did UNICODE.

>         caseSensitive=false;
> 
> }
> 
> tokens {
>         DIM     = "dim";
>         FUNCTION        = "function";
>         SUB     = "sub";
> }
> 
> WS
>         :       ' '
>         |       '\t'
>         |       '\r' '\n'
>         |       '\n'
>         ;

You might want to separate NEWLINE from other WHITESPACE. You usually
need to call newline() at a minimum after snarfing a newline char so
that your tokens have the correct line number info.

> 
> SEMI    :       ','
>         ;
> 
> ID
>         options {
>                 testLiterals=true;
>                 paraphrase = "an identifier";
> 
>         }
>         :       ('a'..'z') ('a'..'z'|'0'..'9'|'_'|'.')*
>         ;
> 
> SL_COMMENT
>         :       "'" (~('\r'|'\n'))* (("\r\n")=>'\r''\n'|'\n')
>         ;
> 
>
**************************************************************************************
> This communication is intended solely for the addressee and is
> confidential. If you are not the intended recipient, any disclosure, 
> copying, distribution or any action taken or omitted to be taken in
> reliance on it, is prohibited and may be unlawful. Unless indicated
> to the contrary: it does not constitute professional advice or 
> opinions upon which reliance may be made by the addressee or any
> other party, and it should be considered to be a work in progress.
>
**************************************************************************************



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From lists at lischke-online.de  Fri Apr  9 10:49:32 2004
From: lists at lischke-online.de (Mike Lischke)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Possible bug in subrule invertion
In-Reply-To: <046C983E-8A4B-11D8-AD73-000393BB647E@cs.usfca.edu>
Message-ID: <20040409174511.646F657C002@h4866.serverkompetenz.net>

Hi Ter, 

> If this is in the lexer, you cannot invert "rules" such as 
> LINE_FEED.  
> Done on purpose, I'm afraid. ;)

Aah, bad luck I guess. Right, this is in the lexer rules and I still think of such definitions as  macros :-)

> Ah.  Like a set intersection operator and such?

Exactly, this would be a great addition. I used that already when I learned my way through SableCC.

Thanks for listening.

Mike
--
www.soft-gems.net



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From open.zone at virgin.net  Fri Apr  9 10:56:40 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Re: Possible bug in subrule invertion
In-Reply-To: <200404091738.MAA08217@coral.propagation.net>
Message-ID: <c56o4o+cg6v@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Tom Zagotta" <tzagotta1@s...>
wrote:
> 
> > If this is in the lexer, you cannot invert "rules" such as 
> > LINE_FEED.  
> > Done on purpose, I'm afraid. ;)
> 
> In this case, LINE_FEED would be best defined as a macro, which
> unfortunately is not supported by ANTLR.  Macros (or something
functionally
> equivalent or better) would be a nice addition for helping to build up
> lexers from smaller parts.

I hope ANTLR's input doesn't get so weak that it requires macro
preprocessing ;-)

Tom, can you give a small example of how you might use this macro to
do what you intended?

Cheers,

Micheal




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From idontwantanidwith2000init at yahoo.com  Fri Apr  9 10:52:11 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Re: CLI with ANTLR - best practice
In-Reply-To: <c56j1o+bvtk@eGroups.com>
Message-ID: <c56nsb+1079c@eGroups.com>

Hi,
If I remember correctly you shouldn't use unput.
But I haven't have to face such problem.

I'm developing a small CLI.
Do you know how to replace the parser error messages?

Tal.

--- In antlr-interest@yahoogroups.com, "thierryj8" <thierryj8@y...> 
wrote:
> Best practice for CLI in Lex&Yacc, O'Reilly:
> 
> ".. In order to scan the command line rather than a file, we must
> rewrite input() and unput()..." (p38), 
> 
> "...The input routine handles calls from the lexer to obtain
> characters" (p41),
> 
> "...The unput() routine handles calls from the lexer to "push back"
> characters into the input stream." (p41)
> 
> Input() treats the CLI end of line as the end of file. Is there an
> equivalent in ANTLR?



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ronald.petty at milliman.com  Fri Apr  9 10:55:28 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Re: caseSensitive question?
In-Reply-To: <c56ncr+5n1u@eGroups.com>
Message-ID: <OFF5370A06.B4E6AC33-ON86256E71.006234DA-86256E71.0062B66B@milliman.com>

The current plan is to GPL it.  We feel there is a need from VB to 
language X.

So yes I do, espically since I am getting free help, of course I want to 
"payback" to the community.
And for you question about "it doesn't work", means I should have sent the 
parser :).  I am climbing the newbie hump with Antlr and still trying to 
learn how to describe things I see.  In this case it means the program 
terminated (back to a prompt).

Ron



"micheal_jor" <open.zone@virgin.net> 
04/09/2004 12:43 PM
Please respond to
antlr-interest@yahoogroups.com


To
antlr-interest@yahoogroups.com
cc

Subject
[antlr-interest] Re: caseSensitive question? 






--- In antlr-interest@yahoogroups.com, ronald.petty@m... wrote:
> When I try to match "Dim" this doesn't work, however if I try "dim" it 
> works.  Is there something besides caseSensitive to set?  Is my 
> charVocabulary or something interferring? 

You need to set caseSentiveLiterals too.

When you say "it doesn't work", what happens exactly?. It helps to
post the input (not too lengthy) and the output messages in addition
to the grammar.

Do you plan on contributing this grammar to ANTLR's grammars library
with a license that isn't more restrictive than BSD?

> options {
> }
> 
> class VB6Lexer extends Lexer;
> 
> options {
>         exportVocab=VB6;
>         charVocabulary='\3'..'\377'; //Latin, need to figure out
Japanese 
> charat
> er sets for UNICODE, you can do non continuous ranges

Why Japanese?. In any case, I don't think VB6 did UNICODE.

>         caseSensitive=false;
> 
> }
> 
> tokens {
>         DIM     = "dim";
>         FUNCTION        = "function";
>         SUB     = "sub";
> }
> 
> WS
>         :       ' '
>         |       '\t'
>         |       '\r' '\n'
>         |       '\n'
>         ;

You might want to separate NEWLINE from other WHITESPACE. You usually
need to call newline() at a minimum after snarfing a newline char so
that your tokens have the correct line number info.

> 
> SEMI    :       ','
>         ;
> 
> ID
>         options {
>                 testLiterals=true;
>                 paraphrase = "an identifier";
> 
>         }
>         :       ('a'..'z') ('a'..'z'|'0'..'9'|'_'|'.')*
>         ;
> 
> SL_COMMENT
>         :       "'" (~('\r'|'\n'))* (("\r\n")=>'\r''\n'|'\n')
>         ;
> 
>
**************************************************************************************
> This communication is intended solely for the addressee and is
> confidential. If you are not the intended recipient, any disclosure, 
> copying, distribution or any action taken or omitted to be taken in
> reliance on it, is prohibited and may be unlawful. Unless indicated
> to the contrary: it does not constitute professional advice or 
> opinions upon which reliance may be made by the addressee or any
> other party, and it should be considered to be a work in progress.
>
**************************************************************************************



 
Yahoo! Groups Links



 




**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040409/c59471cb/attachment.html
From idontwantanidwith2000init at yahoo.com  Fri Apr  9 10:52:11 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Re: CLI with ANTLR - best practice
In-Reply-To: <c56j1o+bvtk@eGroups.com>
Message-ID: <c56nsb+1079c@eGroups.com>

Hi,
If I remember correctly you shouldn't use unput.
But I haven't have to face such problem.

I'm developing a small CLI.
Do you know how to replace the parser error messages?

Tal.

--- In antlr-interest@yahoogroups.com, "thierryj8" <thierryj8@y...> 
wrote:
> Best practice for CLI in Lex&Yacc, O'Reilly:
> 
> ".. In order to scan the command line rather than a file, we must
> rewrite input() and unput()..." (p38), 
> 
> "...The input routine handles calls from the lexer to obtain
> characters" (p41),
> 
> "...The unput() routine handles calls from the lexer to "push back"
> characters into the input stream." (p41)
> 
> Input() treats the CLI end of line as the end of file. Is there an
> equivalent in ANTLR?



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From thierryj8 at yahoo.com  Fri Apr  9 11:10:15 2004
From: thierryj8 at yahoo.com (thierryj8)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Re: CLI with ANTLR - best practice
In-Reply-To: <c56nsb+1079c@eGroups.com>
Message-ID: <c56ou7+st0r@eGroups.com>

I assume you have a main with a loop, then the .g file with parser and
lexer.

For NEWLINE('\r' '\n' | '\r' | '\n'), do you apply
$setType(Token.EOF_TYPE); so that all carriage return makes the line a
full file

Do you loop in your main? Do you apply a (command)+ for looping.

To answer your question: I set defaultErrorHandler = false; in the lexer.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From open.zone at virgin.net  Fri Apr  9 11:21:13 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Re: caseSensitive question?
In-Reply-To: <OFF5370A06.B4E6AC33-ON86256E71.006234DA-86256E71.0062B66B@milliman.com>
Message-ID: <c56pip+rckt@eGroups.com>

--- In antlr-interest@yahoogroups.com, ronald.petty@m... wrote:
> The current plan is to GPL it.  We feel there is a need from VB to 
> language X.

Understood. As I said to the poster of the previous VB-ish grammar,
"please consider a less restrive license like the BSD".

> So yes I do, espically since I am getting free help, of course I
want to 
> "payback" to the community.

If you feel that way, then you should. 

> And for you question about "it doesn't work", means I should have
sent the 
> parser :).

No. Well, perhaps. "No" because I didn't know there was a parser. I
just couldn't understand how your lexer wasn't working hence my
request for input and messages.

"Perhaps" because, it a little difficult trying to help if I have no
idea of what's in your grammar. If the grammar needs to remain
confidential and you still need help, you should consider hiring a
skilled ANTLR/language design consultant. Just ask on the list.

> I am climbing the newbie hump with Antlr and still trying to 
> learn how to describe things I see.  In this case it means the program 
> terminated (back to a prompt).

Don't sound like not working to me. End of input maybe?. Unless you
meant to say it terminated abruptly (i.e. crashed, stack-tracked,
core-dump or similar).

Are you building an AST yet?. Look at the Java grammar sample - if you
are developing in C# or Java - for an example of how to display this
AST in an ASTFrame.

Micheal




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From thierryj8 at yahoo.com  Fri Apr  9 11:24:38 2004
From: thierryj8 at yahoo.com (thierryj8)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Re: CLI with ANTLR - best practice
In-Reply-To: <c56nsb+1079c@eGroups.com>
Message-ID: <c56pp6+72u9@eGroups.com>

It seems easy to catch the exceptions in the parser
ls
  : ls	  
  exception
  catch [RecognitionException ex] {
    System.out.println("command");
  }
  ;

but it's not obvious how to catch the default exception

  throw new NoViableAltForCharException((char)LA(1), getFilename(),
getLine(), getColumn());

in the lexer.

Possibly the exceptions should be handled in the parser, and the lexer
exceptions should be turned off?



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ronald.petty at milliman.com  Fri Apr  9 11:23:27 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Re: caseSensitive question?
In-Reply-To: <c56pip+rckt@eGroups.com>
Message-ID: <OFE080403B.F913DCEB-ON86256E71.0064D078-86256E71.0065467D@milliman.com>

"micheal_jor" <open.zone@virgin.net> 
04/09/2004 01:21 PM
Please respond to
antlr-interest@yahoogroups.com


To
antlr-interest@yahoogroups.com
cc

Subject
[antlr-interest] Re: caseSensitive question? 






--- In antlr-interest@yahoogroups.com, ronald.petty@m... wrote:
> The current plan is to GPL it.  We feel there is a need from VB to 
> language X.

Understood. As I said to the poster of the previous VB-ish grammar,
"please consider a less restrive license like the BSD".

I don't know much about any of the licenses, but I will look into it, I 
don't want to restrict it (but my boss has some input :) ).

> So yes I do, espically since I am getting free help, of course I
want to 
> "payback" to the community.

If you feel that way, then you should. 

> And for you question about "it doesn't work", means I should have
sent the 
> parser :).

No. Well, perhaps. "No" because I didn't know there was a parser. I
just couldn't understand how your lexer wasn't working hence my
request for input and messages.

"Perhaps" because, it a little difficult trying to help if I have no
idea of what's in your grammar. If the grammar needs to remain
confidential and you still need help, you should consider hiring a
skilled ANTLR/language design consultant. Just ask on the list.

I need to learn this for various reasons. I would love to get a tutorial 
from someone, but no $$$$$ and this is what I am paid to do.  So trial by 
fire(antlr)!

> I am climbing the newbie hump with Antlr and still trying to 
> learn how to describe things I see.  In this case it means the program 
> terminated (back to a prompt).

Don't sound like not working to me. End of input maybe?. Unless you
meant to say it terminated abruptly (i.e. crashed, stack-tracked,
core-dump or similar).

Are you building an AST yet?. Look at the Java grammar sample - if you
are developing in C# or Java - for an example of how to display this
AST in an ASTFrame.

Not yet but I am looking at other grammars for ideas.

Ron


 
Yahoo! Groups Links



 




**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040409/b86c1212/attachment.html
From FranklinChen at cmu.edu  Fri Apr  9 11:50:14 2004
From: FranklinChen at cmu.edu (FranklinChen@cmu.edu)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] 2.7.3 nondeterminism bug?
Message-ID: <16502.61542.728169.26844@SWAN.PSY.cmu.edu>

I am using ANTLR 2.7.3 and the following grammar does not trigger a
warning, but with -diagnostics outputs 

                Error: This rule is non-deterministic

in the diagnostics file.

In any case, the generated parser does not behave as I intend it to.

===
class BugReportParser extends Parser;

start: (sentence)+ EOF
    ;

sentence: contents terminator
    | JUNK
    ;

contents: (content terminator) => content
    | content contents
    ;

content: WORD
    | (DASH ~(JUNK | EOF)) => DASH
    ;

terminator: PERIOD
    | (DASH (JUNK | EOF)) => DASH
    ;

-- 
Franklin


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From thierryj8 at yahoo.com  Fri Apr  9 11:52:32 2004
From: thierryj8 at yahoo.com (thierryj8)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Re: CLI with ANTLR - best practice
In-Reply-To: <c56pp6+72u9@eGroups.com>
Message-ID: <c56rdg+69vd@eGroups.com>

What does

interactive=true;

mean?



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From idontwantanidwith2000init at yahoo.com  Fri Apr  9 12:43:08 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Re: CLI with ANTLR - best practice
In-Reply-To: <c56ou7+st0r@eGroups.com>
Message-ID: <c56ucc+ab0r@eGroups.com>

I use (command NEWLINE)+ for looping

I dont see any point in external looping

It works as long as the user is commited to the language 
specification.

Handling errors and ambiguity are my main concerns

Does your CLI language accept a two line command ?

Consider the following:
suppose you have a command rule such as: "createIssue" STRING 
SEVIRITY

now suppose the user typed: "createIssue" "problem in air supply" \n

he forgot sevirity or misspeled it: hgh instead of high

you'll probobly give an error message but:
Do you let him type it allover again?

You can retype for him the part of the line that the parser 
recognized and let him edit it.

Or you can lead him through each step in correcting the command, for 
example:
1. print the part of the command the parser mannaged to parse.
   ask the user if he'd like to edit it. (the answer may be abort)
2. in the last example you can print somthing like:
#you have chosen createIssue command
#Do you want to edit it[y|n|a]?
n
#Now you have to enter the description of the issue double qouted:
"ho now I understand what I have to enter hear and how :)"
#Now you have to enter one of the sevirities {HIGH, MEDIUM, LOW}:
HIGH
#that's it you can go on with you're work :)


--- In antlr-interest@yahoogroups.com, "thierryj8" <thierryj8@y...> 
wrote:
> I assume you have a main with a loop, then the .g file with parser 
and
> lexer.
> 
> For NEWLINE('\r' '\n' | '\r' | '\n'), do you apply
> $setType(Token.EOF_TYPE); so that all carriage return makes the 
line a
> full file
> 
> Do you loop in your main? Do you apply a (command)+ for looping.
> 
> To answer your question: I set defaultErrorHandler = false; in the 
lexer.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From idontwantanidwith2000init at yahoo.com  Fri Apr  9 12:49:22 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Re: CLI with ANTLR - best practice
In-Reply-To: <c56j1o+bvtk@eGroups.com>
Message-ID: <c56uo2+6fsj@eGroups.com>

about unput, taken from jguru faq:

Question  Can I push back the most recently read token into the 
input stream?  
Topics  Tools:ANTLR:Recognition:Lookahead, 
Tools:ANTLR:Recognition:Syntactic predicates  
Author  Terence Parr PREMIUM  
Created  Oct 27, 2001  

Answer 
You are thinking in terms of the old one-token-of-lookahead type 
parser generators without backtracking capabilities. ANTLR 
specifically provides a mechanism to lookahead ahead a fixed amount, 
k, or infinitely via syntactic predicates (a selective programmer-
controlled form of backtracking). You can tell ANTLR to try out an 
alternative and back up to retry the next potentially viable 
alternative if that one fails. It's like specifying the infinite 
lookahead language that predicts an alternative. 



--- In antlr-interest@yahoogroups.com, "thierryj8" <thierryj8@y...> 
wrote:
> Best practice for CLI in Lex&Yacc, O'Reilly:
> 
> ".. In order to scan the command line rather than a file, we must
> rewrite input() and unput()..." (p38), 
> 
> "...The input routine handles calls from the lexer to obtain
> characters" (p41),
> 
> "...The unput() routine handles calls from the lexer to "push back"
> characters into the input stream." (p41)
> 
> Input() treats the CLI end of line as the end of file. Is there an
> equivalent in ANTLR?



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Fri Apr  9 13:28:44 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:38 2004
Subject: New antlr-interest member
Message-ID: <1081542524.105.81248.w26@yahoogroups.com>


Hello,

This is an automated email message to let you know that
vikuma <vikuma@yahoo.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From ronald.petty at milliman.com  Fri Apr  9 13:41:10 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] literals, identifiers, tokens oh my
In-Reply-To: <c56uo2+6fsj@eGroups.com>
Message-ID: <OFFC7856BC.CE54BAE4-ON86256E71.00709161-86256E71.0071E155@milliman.com>

I have the following parser rule

type
        :       "string"
        ;

and the following lexer rules

ID
        options {
                testLiterals=true;
                paraphrase = "an identifier";

        }
        :       ('a'..'z') ('a'..'z'|'0'..'9'|'_'|'.')*
        ;


When I run my parser and give the following input (string)
ANTLR Parser Generator   Version 2.7.3   1989-2004 jGuru.com
ANTLR Parser Generator   Version 2.7.3   1989-2004 jGuru.com
Note: * uses or overrides a deprecated API.
Note: Recompile with -Xlint:deprecation for details.
 > program; string
 > lexer mID; c==s
 < lexer mID; c==
LA(1)==string
 < program; LA(1)==string

Doesn't "string" become a literal because it is in a parser rule?  I have 
the start up parser rule of

start
        :       (type (WS)+)+
        ;

So I assume I would be able to type in string  whitespace string 
whitespace etc...

Could someone clear up using Tokens, Literals, and seperating them from 
Identifiers.  I have read the docs about 3 times now, and will start the 
4th run now.

Thanks
Ron

ps.  Here is the parser / lex in the flesh incase I did something wrong 
describing (which I do sometimes).  Also if any has other advice on how to 
split languages up into subrules, I like to hear it.

options {
}

{
import java.io.*;

class Main {
        public static void main(String[] args) {
                try {
                        VB6Lexer lexer = new VB6Lexer(System.in);
                        VB6Parser parser = new VB6Parser(lexer);
                        parser.program();
                } catch(Exception e) {
                        e.printStackTrace();
                }
        }
}
}

class VB6Parser extends Parser;

options {
        importVocab=VB6;
}

//not sure about Attribute blah
//not sure about Option blah
program
        :       (declaration | WS | NL | SL_COMMENT)*
        ;

declaration
        :       variable
        |       sub
        |       function
        |       type
        ;

variable
        :       DIM
                ( WS | NL | SL_COMMENT )+
                ID
                ( WS | NL | SL_COMMENT )+
                ( AS ( WS | NL )+ VOID )+
        { System.out.println("MATCHED DIM"); }
        ;

sub
        :       SUB ( WS | NL )+ ID
        { System.out.println("MATCHED SUB"); }
        ;

function
        :       FUNCTION ( WS | NL )+ ID
        { System.out.println("MATCHED FUNCTION"); }
        ;

type
        :       "string"
        ;


options {
}

class VB6Lexer extends Lexer;

options {
        exportVocab=VB6;
        charVocabulary='\3'..'\377'; //Latin, need to figure out Japanese 
charat
er sets for UNICODE, you can do non continuous ranges
        caseSensitive=false;
        caseSensitiveLiterals=false;
}

tokens {
        DIM     = "dim";
        FUNCTION        = "function";
        SUB     = "sub";
        AS      = "as";
        VOID    = "void";
}

WS
        :       ' '
        |       '\t'
        { $setType(Token.SKIP); }
        ;

NL      :       '\r' '\n' { newline(); }
        |       '\n' { newline(); }
        ;

SEMI    :       ','
        ;


ID
        options {
                testLiterals=true;
                paraphrase = "an identifier";

        }
        :       ('a'..'z') ('a'..'z'|'0'..'9'|'_'|'.')*
        ;

SL_COMMENT
        :       "'" (~('\r'|'\n'))* (("\r\n")=>'\r''\n'|'\n')
        ;


**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040409/539a2c8d/attachment.html
From thierryj8 at yahoo.com  Fri Apr  9 14:23:45 2004
From: thierryj8 at yahoo.com (thierryj8)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Re: CLI with ANTLR - best practice
In-Reply-To: <c56ucc+ab0r@eGroups.com>
Message-ID: <c57491+9fkq@eGroups.com>

I tried the (command NEWLINE)+ and it worked as long as there was no
error.

Also, since the RETURN does not mean the end of file, I naturally had
commands that could spawn in several lines:

>list *
Processing list

Same as
>list
>*
Processing list

After thinking further, it seemed that each line should be it's own
file (thinking of a java paser), and the / to continue a line should
be handled as a special case.

I would like feedback on this format (probably not best practice, but
it seems to work so far).

The java main looks like:

  public static void main(String[] args)
  {
    try
    {
      ConsoleLexer consoleLexer = new ConsoleLexer(new
DataInputStream(System.in));
      ConsoleParser consoleParser = new ConsoleParser(consoleLexer);
      
      boolean parserException = false;
      while (parserException == false) // Each line is considered a
full file
      {
        try
        {
          System.out.print(consoleLexer.getMode() + ">");
  			  consoleParser.parse_prompt_command();
        }
        catch (Exception e)
        {
          parserException = true; // Exception caught in .g
        }
      }
    }
    catch (Exception e)
    {
      System.err.println("main exception: " + e); // really bad exception
    }
  }

And the paser command looks like:
command
  : (cmd1 | ... | cmd)
    exception
    catch [RecognitionException ex]
    {
      System.out.println("command exception " + ex.getMessage());
    }
  ;

Then new line is made an EOF type:

NEWLINE
  :  '\r' '\n'   // DOS
  |  '\r'        // Macintosh
  |  '\n'       // UNIX
  {
    $setType(Token.EOF_TYPE);
  }
 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From open.zone at virgin.net  Fri Apr  9 14:58:04 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Re: literals, identifiers, tokens oh my
In-Reply-To: <OFFC7856BC.CE54BAE4-ON86256E71.00709161-86256E71.0071E155@milliman.com>
Message-ID: <c5769c+ad5v@eGroups.com>

--- In antlr-interest@yahoogroups.com, ronald.petty@m... wrote:
> I have the following parser rule
> 
> type
>         :       "string"
>         ;

Do you really intend to list all literals that could possible be types
(hint: it's impossible since Class/Type in VB6 creates new types)

> and the following lexer rules
> 
> ID
>         options {
>                 testLiterals=true;
>                 paraphrase = "an identifier";
> 
>         }
>         :       ('a'..'z') ('a'..'z'|'0'..'9'|'_'|'.')*
>         ;

> When I run my parser and give the following input (string)
> ANTLR Parser Generator   Version 2.7.3   1989-2004 jGuru.com
> ANTLR Parser Generator   Version 2.7.3   1989-2004 jGuru.com
> Note: * uses or overrides a deprecated API.
> Note: Recompile with -Xlint:deprecation for details.
>  > program; string
>  > lexer mID; c==s
>  < lexer mID; c==
> LA(1)==string
>  < program; LA(1)==string
> 
> Doesn't "string" become a literal because it is in a parser rule?

Look in your XXXTokenTypes[.txt|.java] file. You should see an entry
for LITERAL_string.

> I have 
> the start up parser rule of
> 
> start
>         :       (type (WS)+)+
>         ;
> 
> So I assume I would be able to type in string  whitespace string 
> whitespace etc...

You should.

> Could someone clear up using Tokens, Literals, and seperating them from 
> Identifiers.  I have read the docs about 3 times now, and will start
the 
> 4th run now.

Identifiers are tokens that have the same ID but may have different
semantic attributes (i.e. the text of the identifier).

Literals have a fixed ID and sematic info. The "tokens" feature of
ANTLR allows you to declare literals.

Cheers,

Micheal
ANTLR/C#

PS More below...

> 
> Thanks
> Ron
> 
> ps.  Here is the parser / lex in the flesh incase I did something wrong 
> describing (which I do sometimes).  Also if any has other advice on
how to 
> split languages up into subrules, I like to hear it.

Quick comments after an even quicker scan of your grammars.

1. Rule "program" needs EOF at the end.
2. You'd normally skip whitespace and newlines in the lexer (this
makes your parser MUCH less complex):
   { $setType(Token.Skip); }
3. Study the Java and TinyBasic/TinyC sample grammars.
4. Rule "type" would normally match ID and any literals that could be
a type like DIM, "string" etc in your grammars.

Question: Are you planning to build a recognizer for VB6 syntax only
or for the various VB6 source file formats?





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ronald.petty at milliman.com  Fri Apr  9 15:14:02 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Re: literals, identifiers, tokens oh my
In-Reply-To: <c5769c+ad5v@eGroups.com>
Message-ID: <OFEF148814.C53AE21E-ON86256E71.0079D3D4-86256E71.007A6226@milliman.com>

1.  I thought EOF was already generated for you, but I will add if needed
2.  I believe it
3.  Have been, still am
4.  ok

And for your question,  I am not 100% clear on what your meaning "source 
file formats".  I take that as a source file in one form or another vs. 
"syntax only" which is just testing a given construct.  If that is true, I 
am trying to do the source (which implies a syntax recognizer also 
correct?).

Thanks Micheal for the help,
Ron



Quick comments after an even quicker scan of your grammars.

1. Rule "program" needs EOF at the end.
2. You'd normally skip whitespace and newlines in the lexer (this
makes your parser MUCH less complex):
   { $setType(Token.Skip); }
3. Study the Java and TinyBasic/TinyC sample grammars.
4. Rule "type" would normally match ID and any literals that could be
a type like DIM, "string" etc in your grammars.

Question: Are you planning to build a recognizer for VB6 syntax only
or for the various VB6 source file formats?

**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040409/d6f05c2e/attachment.html
From idontwantanidwith2000init at yahoo.com  Fri Apr  9 15:31:12 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Re: CLI with ANTLR - best practice
In-Reply-To: <c57491+9fkq@eGroups.com>
Message-ID: <c5787g+r8i0@eGroups.com>

about multiple lines,
I would have want the following to work:
addIssueDescription "bla bla blablablablablabla bla bla blabla bla 
blablablablablablablablablabla"

that is a token might be spread on two lines 
I don't think your example will answer to it

To handle multiple lines I would use a  such as
protected
PNEWLINE:  
       '\r' '\n'   // DOS
   |  '\r'        // Macintosh
   |  '\n'       // UNIX
   ;
NEWLINE:PNEWLINE 
{
   if (!flag) {
     $setType(Token.SKIP);
     //here should be printing of a newline maybe newline();
   }
};

the flag should be set after a command is parsed
and unset after newline is met.



--- In antlr-interest@yahoogroups.com, "thierryj8" <thierryj8@y...> 
wrote:
> I tried the (command NEWLINE)+ and it worked as long as there was 
no
> error.
> 
> Also, since the RETURN does not mean the end of file, I naturally 
had
> commands that could spawn in several lines:
> 
> >list *
> Processing list
> 
> Same as
> >list
> >*
> Processing list
> 
> After thinking further, it seemed that each line should be it's own
> file (thinking of a java paser), and the / to continue a line 
should
> be handled as a special case.
> 
> I would like feedback on this format (probably not best practice, 
but
> it seems to work so far).
> 
> The java main looks like:
> 
>   public static void main(String[] args)
>   {
>     try
>     {
>       ConsoleLexer consoleLexer = new ConsoleLexer(new
> DataInputStream(System.in));
>       ConsoleParser consoleParser = new ConsoleParser
(consoleLexer);
>       
>       boolean parserException = false;
>       while (parserException == false) // Each line is considered a
> full file
>       {
>         try
>         {
>           System.out.print(consoleLexer.getMode() + ">");
>   			  consoleParser.parse_prompt_command();
>         }
>         catch (Exception e)
>         {
>           parserException = true; // Exception caught in .g
>         }
>       }
>     }
>     catch (Exception e)
>     {
>       System.err.println("main exception: " + e); // really bad 
exception
>     }
>   }
> 
> And the paser command looks like:
> command
>   : (cmd1 | ... | cmd)
>     exception
>     catch [RecognitionException ex]
>     {
>       System.out.println("command exception " + ex.getMessage());
>     }
>   ;
> 
> Then new line is made an EOF type:
> 
> NEWLINE
>   :  '\r' '\n'   // DOS
>   |  '\r'        // Macintosh
>   |  '\n'       // UNIX
>   {
>     $setType(Token.EOF_TYPE);
>   }



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From idontwantanidwith2000init at yahoo.com  Fri Apr  9 15:52:50 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] protected weakness?
Message-ID: <c579g2+vqpe@eGroups.com>

consider this: (taken from the faq}

ID_OR_NUM : DIGITS (ID {$setType(ID);} | {$setType(NUMBER);}) ;

where ID and NUMBER are protected... 

will the parser get ID or NUMBER?





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From idontwantanidwith2000init at yahoo.com  Fri Apr  9 15:56:41 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Re: protected weakness?
In-Reply-To: <c579g2+vqpe@eGroups.com>
Message-ID: <c579n9+mog0@eGroups.com>

--- In antlr-interest@yahoogroups.com, "idontwantanidwith2000init" 
<idontwantanidwith2000init@y...> wrote:
> consider this: (taken from the faq}
> 
> ID_OR_NUM : DIGITS (ID {$setType(ID);} | {$setType(NUMBER);}) ;
> 
> where ID and NUMBER are protected... 
> 
> will the parser get ID or NUMBER?

I've ment ID_OR_NUM or (ID | NUMBER)

it looks like a backdoor to the protected.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From lgc at mail1.jpl.nasa.gov  Fri Apr  9 22:09:52 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Re: Error recovery
In-Reply-To: <c4v54j+d51i@eGroups.com>
Message-ID: <c57vj0+7p9e@eGroups.com>

What you really want to change is the input buffering.  Check out
CharBuffer.java in the antlr directory and write an equivalent
(assuming that you are using Java--C++ and C# differ) that blocks on
interactive input at end of line rather than returning EOF.

--Loring


--- In antlr-interest@yahoogroups.com, "jduquevieira" <jpdv@m...> wrote:
> Hello.
> 
> I have a math editor that uses ANTLR as the parser.
> Now I have problems recovering from errors.
> 
> For instance, if the user writes:
>     "2+"
> 
> The parser can't handle it, because it expects another number after 
> the sum operator:
>     "2+<number>"
> 
> I've tried to handle it with exceptions and got no good results.
> Besides, by using exceptions the parser gets too slow.
> 
> I've also tried to write every possibility in every rule, but I get 
> a lot of ambiguities.
> 
> Does anyone know how to do this?
> Any ideas?
> 
> Thanks in advance.
> Best regards.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From mailinglist at august.de  Sat Apr 10 03:20:48 2004
From: mailinglist at august.de (Rolf Schumacher)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] newbie question
In-Reply-To: <A86AFC58-8A47-11D8-AD73-000393BB647E@cs.usfca.edu>
References: <40766A83.7020104@august.de> <A86AFC58-8A47-11D8-AD73-000393BB647E@cs.usfca.edu>
Message-ID: <4077CA80.1080407@august.de>

Thx, missed that bit.

Rolf

p.s.--------------
this works now
- -------------------
class WikiParser extends Parser;

text : ( LINE )+
;

class WikiLexer extends Lexer;
options { charVocabulary = '\u0000' .. '\u00ff'; }
//if you put '\uffff' here instead "it would wind up generating huge
lexers"

protected
LINECHAR
:
~'\n'
;
LINE
:
(LINECHAR)+ {System.out.println(getText());}
;
WS : '\n'
{ _ttype = Token.SKIP; newline(); }
;

Terence Parr wrote:

>On Apr 9, 2004, at 2:18 AM, Rolf Schumacher wrote:
>
>  
>
>>Even though I solved my problem I'd like to be able to understand 
>>'why':
>>
>>Why this rule does not work?:
>>
>>LINECHAR: ~'\n';
>>
>>while this is working:
>>
>>LINECHAR: '\u0000'..'\u0009' | '\u000b'..'\uffff';
>>
>>I would expect identical behavior from both lexer rules.
>>The answer must be simple, though I read several days thru the docs
>>and could not find it. Can you help me?
>>    
>>
>
>Hi Rolf,
>
>You need to specify a charVocabulary option so that the "not" operator 
>makes sense. :)
>
>Terence
>
>  
>
>>Rolf
>>
>>p.s. ---------------
>>The full story: this works:
>>--------------------
>>class WParser extends Parser;
>>text    :   ( LINE )+ ;
>>
>>class WLexer extends Lexer;
>>protected
>>LINECHAR:   '\u0000'..'\u0009' | '\u000b'..'\uffff'
>>         // putting ~'\n' here does not work, why??
>>     ;
>>LINE    :   (LINECHAR)+ {System.out.println(getText());} ;
>>WS      :   '\n' { _ttype = Token.SKIP; newline(); } ;
>>
>>
>>    
>>
>
>
>
>
>
> 
>Yahoo! Groups Links
>
>
>
> 
>
>
>
>  
>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 1730 bytes
Desc: S/MIME Cryptographic Signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20040410/0ed13bba/smime.bin
From lists at lischke-online.de  Sat Apr 10 11:11:30 2004
From: lists at lischke-online.de (Mike Lischke)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] File spec grammar
Message-ID: <20040410180704.3C12457C004@h4866.serverkompetenz.net>

Hi list,

Does anybody have an ANTLR grammar to fully parse a file name? I tried several approaches but either got ambiguities or had to simplify the grammar so much that I cannot differentiate anymore between path parts and file names. Is it at all possible to parse a file name using EBNF?

Mike
--
www.soft-gems.net




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Sat Apr 10 15:02:06 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:38 2004
Subject: New antlr-interest member
Message-ID: <1081634526.325.58274.w9@yahoogroups.com>


Hello,

This is an automated email message to let you know that
mitnamin <mitnamin@yahoo.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From jbb at acm.org  Sat Apr 10 16:04:03 2004
From: jbb at acm.org (jbb@acm.org)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] File spec grammar
In-Reply-To: <20040410180704.3C12457C004@h4866.serverkompetenz.net> (message
	from Mike Lischke on Sat, 10 Apr 2004 20:11:30 +0200)
References: <20040410180704.3C12457C004@h4866.serverkompetenz.net>
Message-ID: <E1BCRW6-0000as-00@gecko>

Mr. Lischke :-

You asked:
>Does anybody have an ANTLR grammar to fully parse a file name? I
>tried several approaches but either got ambiguities or had to
>simplify the grammar so much that I cannot differentiate anymore
>between path parts and file names. Is it at all possible to parse a
>file name using EBNF?

I haven't actually tried this using Antlr but how about:

filename :
   ( '/' | "./" | "../" | "~/" )? name ( '/' name )* 
;

name :
   ( character | '.' ) ( character | '.' )*
;

character : LETTER | DIGIT | SPECIAL ;

LETTER  : 'a' .. 'z' | 'A' .. 'Z' ;
DIGIT   : '0' .. '9' ;
SPECIAL : '_' | '~' | ',' | ' ' | '+' | '-' ; // and probably more here...

and you did mean unix filenames, right?

hope this helps...

	-jbb


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From lists at lischke-online.de  Sun Apr 11 03:12:12 2004
From: lists at lischke-online.de (Mike Lischke)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] File spec grammar
In-Reply-To: <E1BCRW6-0000as-00@gecko>
Message-ID: <20040411100742.59A8457C001@h4866.serverkompetenz.net>

Hi John, 

> I haven't actually tried this using Antlr but how about:

Thank you for your example. I came up with something similar but the problem is that with that grammar I don't get all
parts (e.g. the extension if there is one). I know the file spec is ambiquous because just from looking at:

/abc

You cannot tell if this is a file name or a directory. However one can say the last part not finished by a path
separator is a priori a file name unless proved wrong in the following semantic phase. This is not a serious problem in
my eyes. My current grammar is similar to yours but a bit more general, as it allows both path separators and Unicode
file names:

  DRIVE_LETTER:        'a'..'z';
protected
  FILE_NAME_LETTER:    ~('\\' | '/' | ':' | '*' | '?' | '<' | '>' | '|');
protected
  FILE_NAME_SEPARATOR: '\\' | '/';
  PATH_PART:           FILE_NAME_SEPARATOR (FILE_NAME_LETTER)*;

file_name:
  (drive)? (PATH_PART)*
;
drive:
  DRIVE_LETTER COLON
;

This grammar suffers from the same limitations though and causes warning messages about lexical nondeterminisms, e.g.
for DIV (defined as '/') and PATH_PART. I'm not sure how to solve that problem. And I really would like to have the file
name already splitted in my AST (drive, path, name, extension) instead adding another parse state.
 
My earlier attempt was this:

  FILE_NAME_LETTER:    ~('\\' | '/' | ':' | '*' | '?' | '<' | '>' | '|');
  EXTENSION_NAME_LETTER:    ~('\\' | '/' | ':' | '*' | '?' | '<' | '>' | '|' | '.');
  FILE_NAME_SEPARATOR: '\\' | '/';

// -- file specification
file_name:
  (drive)? (FILE_NAME_SEPARATOR)? (directory)* filename
;
	
  drive:
    "a".."z" COLON
    | "~"
  ;
  
  directory:
    basename FILE_NAME_SEPARATOR
  ;
  
  filename:
    basename ("." extension)?
  ;
  
  basename:
    (FILE_NAME_LETTER)+
  ;
  
  extension:
    (EXTENSION_NAME_LETTER)+
  ;

If this would work then I would get my file names nicely splitted. Unfortunately, this throws several nondeterminism
warnings because the file name letters conflict with other definitions in my grammar and additionally I get a Java error
for the "a".."z" range, which uses matchRange(String, String), an ANTLR function that is not accessible by the resulting
parser.

> and you did mean unix filenames, right?

I hoped to get both worlds into one grammar :-)

Mike
--
www.soft-gems.net



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From idontwantanidwith2000init at yahoo.com  Sun Apr 11 05:47:04 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Re: File spec grammar
In-Reply-To: <20040411100742.59A8457C001@h4866.serverkompetenz.net>
Message-ID: <c5beo8+6q94@eGroups.com>

You've said you have a problem with DIV and PATH_PART.
could you give an example where semantically it can cause it?

123/123.12 can it be considered a file name?



--- In antlr-interest@yahoogroups.com, "Mike Lischke" <lists@l...> 
wrote:
> Hi John, 
> 
> > I haven't actually tried this using Antlr but how about:
> 
> Thank you for your example. I came up with something similar but 
the problem is that with that grammar I don't get all
> parts (e.g. the extension if there is one). I know the file spec 
is ambiquous because just from looking at:
> 
> /abc
> 
> You cannot tell if this is a file name or a directory. However one 
can say the last part not finished by a path
> separator is a priori a file name unless proved wrong in the 
following semantic phase. This is not a serious problem in
> my eyes. My current grammar is similar to yours but a bit more 
general, as it allows both path separators and Unicode
> file names:
> 
>   DRIVE_LETTER:        'a'..'z';
> protected
>   FILE_NAME_LETTER:    ~('\\' | '/' | ':' | '*' | '?' | '<' | '>' 
| '|');
> protected
>   FILE_NAME_SEPARATOR: '\\' | '/';
>   PATH_PART:           FILE_NAME_SEPARATOR (FILE_NAME_LETTER)*;
> 
> file_name:
>   (drive)? (PATH_PART)*
> ;
> drive:
>   DRIVE_LETTER COLON
> ;
> 
> This grammar suffers from the same limitations though and causes 
warning messages about lexical nondeterminisms, e.g.
> for DIV (defined as '/') and PATH_PART. I'm not sure how to solve 
that problem. And I really would like to have the file
> name already splitted in my AST (drive, path, name, extension) 
instead adding another parse state.
>  
> My earlier attempt was this:
> 
>   FILE_NAME_LETTER:    ~('\\' | '/' | ':' | '*' | '?' | '<' | '>' 
| '|');
>   EXTENSION_NAME_LETTER:    ~('\\' | '/' | ':' | '*' | '?' | '<' 
| '>' | '|' | '.');
>   FILE_NAME_SEPARATOR: '\\' | '/';
> 
> // -- file specification
> file_name:
>   (drive)? (FILE_NAME_SEPARATOR)? (directory)* filename
> ;
> 	
>   drive:
>     "a".."z" COLON
>     | "~"
>   ;
>   
>   directory:
>     basename FILE_NAME_SEPARATOR
>   ;
>   
>   filename:
>     basename ("." extension)?
>   ;
>   
>   basename:
>     (FILE_NAME_LETTER)+
>   ;
>   
>   extension:
>     (EXTENSION_NAME_LETTER)+
>   ;
> 
> If this would work then I would get my file names nicely splitted. 
Unfortunately, this throws several nondeterminism
> warnings because the file name letters conflict with other 
definitions in my grammar and additionally I get a Java error
> for the "a".."z" range, which uses matchRange(String, String), an 
ANTLR function that is not accessible by the resulting
> parser.
> 
> > and you did mean unix filenames, right?
> 
> I hoped to get both worlds into one grammar :-)
> 
> Mike
> --
> www.soft-gems.net



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From idontwantanidwith2000init at yahoo.com  Sun Apr 11 06:25:38 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] second lexical pass
Message-ID: <c5bh0i+pkf4@eGroups.com>

Is there an elegant way to do a second lexical path instead of 
writing two lexers?

For instance:
STRING_LITERAL:
'"' (~('\r'|'n'|'\\') | '\\' .) '"' ;

now STRING_LITERAL will colide with any special string you'd like to 
match, for instance:
DATE_TIME : '"'YYYY-MM-DD hh:mm:ss'"'

I've managed to merge it with: 
'"'(LETTER)*'"'
'"'(LETTER)*'.'(LETTER)*'"'
'"'(LETTER)*'-'(LETTER)*'"'
Which was a diffucult task but doable.


I thought about it and merging these rules is possible, but it will 
take me days to write it and we haven't talked about validation.
(It is a good to write down my thoughts I'm starting to convince 
myself that it is a good idea)

What do you think is a proper solution?

Tal.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Sun Apr 11 09:21:04 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:38 2004
Subject: Unsubscription by antlr-interest member
Message-ID: <1081700464.124.79100.w52@yahoogroups.com>


Hello,

This is an automated email message to let you know that
leoengbr <leoengbr@yahoo.com.br> unsubscribed from your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a member unsubscribes.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From parrt at cs.usfca.edu  Sun Apr 11 10:01:55 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] second lexical pass
In-Reply-To: <c5bh0i+pkf4@eGroups.com>
References: <c5bh0i+pkf4@eGroups.com>
Message-ID: <EFFED777-8BD9-11D8-A12A-000A95891192@cs.usfca.edu>


On Apr 11, 2004, at 6:25 AM, idontwantanidwith2000init wrote:

> Is there an elegant way to do a second lexical path instead of
> writing two lexers?
>
> For instance:
> STRING_LITERAL:
> '"' (~('\r'|'n'|'\\') | '\\' .) '"' ;
>
> now STRING_LITERAL will colide with any special string you'd like to
> match, for instance:
> DATE_TIME : '"'YYYY-MM-DD hh:mm:ss'"'
>
> I've managed to merge it with:
> '"'(LETTER)*'"'
> '"'(LETTER)*'.'(LETTER)*'"'
> '"'(LETTER)*'-'(LETTER)*'"'
> Which was a diffucult task but doable.
>
>
> I thought about it and merging these rules is possible, but it will
> take me days to write it and we haven't talked about validation.
> (It is a good to write down my thoughts I'm starting to convince
> myself that it is a good idea)
>
> What do you think is a proper solution?

My first thought is that you have a two-level grammatical issue here.  
First you have to match a string and then determine if it satisfies a 
"nested structure" which is the date/time stuff.  You can't really use 
another rule in the same lexer object as it will consume the input.  
Perhaps a compromise.  Make a new lexer rule that will match DATE_TIME 
as you've done and make it protected.  Then, make a *new* instance of 
your lexer.  Set it up with a copy of the text matched inside the 
string and then directly call DATE_TIME with a try/catch around it to 
catch failure.  Gotta love LL based lexers :)

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From jbb at acm.org  Sun Apr 11 10:48:17 2004
From: jbb at acm.org (jbb@acm.org)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] second lexical pass
In-Reply-To: <EFFED777-8BD9-11D8-A12A-000A95891192@cs.usfca.edu> (message from
	Terence Parr on Sun, 11 Apr 2004 10:01:55 -0700)
References: <c5bh0i+pkf4@eGroups.com> <EFFED777-8BD9-11D8-A12A-000A95891192@cs.usfca.edu>
Message-ID: <E1BCj45-0005f1-00@gecko>


On Apr 11, 2004, at 6:25 AM, idontwantanidwith2000init wrote:

> Is there an elegant way to do a second lexical path instead of
> writing two lexers?
>
> For instance:
> STRING_LITERAL:
> '"' (~('\r'|'n'|'\\') | '\\' .) '"' ;
>
> now STRING_LITERAL will colide with any special string you'd like to
> match, for instance:
> DATE_TIME : '"'YYYY-MM-DD hh:mm:ss'"'
>
> I've managed to merge it with:
> '"'(LETTER)*'"'
> '"'(LETTER)*'.'(LETTER)*'"'
> '"'(LETTER)*'-'(LETTER)*'"'
> Which was a diffucult task but doable.
>
>
> I thought about it and merging these rules is possible, but it will
> take me days to write it and we haven't talked about validation.
> (It is a good to write down my thoughts I'm starting to convince
> myself that it is a good idea)
>
> What do you think is a proper solution?

I may be answering the wrong question here...

Do you want DATE_TIME to match multiple strings, say "2004-04-11 13:41:52"
and "2004-04-11 13:41:53" and ... ?

Or do you want DATE_TIME to be just the single, literal, string
"YYYY-MM-DD hh:mm:ss" ?

If it is the former (multiple values) then you can skip the rest of this
message and please accept my apologies for wasting your time.

If it is just a single string then I believe that this is the same issue
that often arises with keywords matching identifer. And Antlr has a pretty
good way of solving that issue. Try:

class Tryit extends Lexer;

tokens {
    DATE_TIME = "\"YYYY-MM-DD hh:mm:ss\"";
}

STRING_LITERAL
    options{
        testLiterals=true;
    } :
    '"' (~('\r'|'n'|'\\') | '\\' .) '"'
;





Hope this helps...
	-jbb


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From idontwantanidwith2000init at yahoo.com  Sun Apr 11 11:43:29 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Re: second lexical pass
In-Reply-To: <EFFED777-8BD9-11D8-A12A-000A95891192@cs.usfca.edu>
Message-ID: <c5c3kh+pah9@eGroups.com>

I've ment multiple values of course :)
That's what I wanted to do, Terr, more or less. :)
I'm sad though. With lex I could handle it without a second parser.
But it seems a better aproch then putting it all together in one 
parser.
Let me explain why:
'"'YYYY-MM-DD hh:mm:ss'"' is a STRING.
and there isn't a simple way to express this relationship.
Maybe it's an idea for improving the lexer.

What do you think?

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
wrote:
> 
> On Apr 11, 2004, at 6:25 AM, idontwantanidwith2000init wrote:
> 
> > Is there an elegant way to do a second lexical path instead of
> > writing two lexers?
> >
> > For instance:
> > STRING_LITERAL:
> > '"' (~('\r'|'n'|'\\') | '\\' .) '"' ;
> >
> > now STRING_LITERAL will colide with any special string you'd 
like to
> > match, for instance:
> > DATE_TIME : '"'YYYY-MM-DD hh:mm:ss'"'
> >
> > I've managed to merge it with:
> > '"'(LETTER)*'"'
> > '"'(LETTER)*'.'(LETTER)*'"'
> > '"'(LETTER)*'-'(LETTER)*'"'
> > Which was a diffucult task but doable.
> >
> >
> > I thought about it and merging these rules is possible, but it 
will
> > take me days to write it and we haven't talked about validation.
> > (It is a good to write down my thoughts I'm starting to convince
> > myself that it is a good idea)
> >
> > What do you think is a proper solution?
> 
> My first thought is that you have a two-level grammatical issue 
here.  
> First you have to match a string and then determine if it 
satisfies a 
> "nested structure" which is the date/time stuff.  You can't really 
use 
> another rule in the same lexer object as it will consume the 
input.  
> Perhaps a compromise.  Make a new lexer rule that will match 
DATE_TIME 
> as you've done and make it protected.  Then, make a *new* instance 
of 
> your lexer.  Set it up with a copy of the text matched inside the 
> string and then directly call DATE_TIME with a try/catch around it 
to 
> catch failure.  Gotta love LL based lexers :)
> 
> Ter
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
> Cofounder, http://www.peerscope.com pure link sharing



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From vmallet at jfouffa.com  Sun Apr 11 12:49:59 2004
From: vmallet at jfouffa.com (Vincent Mallet)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Re: Java.g grammar issues & potential fix
In-Reply-To: <c50d25+fimp@eGroups.com>
Message-ID: <c5c7h7+7adm@eGroups.com>

> If you have an opinion on the new rule I would love to hear it.

I haven't heard much since I posted this message last week, any 
comment would be appreciated :)

Thanks,

    Vince.




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From idontwantanidwith2000init at yahoo.com  Sun Apr 11 13:32:34 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Re: second lexical pass - yeah
In-Reply-To: <c5c3kh+pah9@eGroups.com>
Message-ID: <c5ca12+kfql@eGroups.com>

It recognized DATE in the parser :)
Now, could you review it:
protected
DATE
	: YEAR
	  '-' MONTH
	  '-' DAY
	  ' ' HOUR
	  ':' MINUTES
	  ':' SECONDS
	;
// string literals
STRING_LITERAL
	: 	'"'! (~('"'|'\n'|'\r'|'\\')|'\\' .)*'"'!
		{
			try
			{
				ScriptLexer scriptLexer = new 
ScriptLexer(new StringReader($getText));
				scriptLexer.mDATE(false);
				$setType(DATE);
			}catch(ANTLRException exp){
				$setType(STRING);
			}
		}
	;

I've done all the neccesary imports.
If you like it, Terr, maybe it deserve a place in the FAQ...

This is just great.

Tal.
--- In antlr-interest@yahoogroups.com, "idontwantanidwith2000init" 
<idontwantanidwith2000init@y...> wrote:
> I've ment multiple values of course :)
> That's what I wanted to do, Terr, more or less. :)
> I'm sad though. With lex I could handle it without a second parser.
> But it seems a better aproch then putting it all together in one 
> parser.
> Let me explain why:
> '"'YYYY-MM-DD hh:mm:ss'"' is a STRING.
> and there isn't a simple way to express this relationship.
> Maybe it's an idea for improving the lexer.
> 
> What do you think?
> 
> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
> wrote:
> > 
> > On Apr 11, 2004, at 6:25 AM, idontwantanidwith2000init wrote:
> > 
> > > Is there an elegant way to do a second lexical path instead of
> > > writing two lexers?
> > >
> > > For instance:
> > > STRING_LITERAL:
> > > '"' (~('\r'|'n'|'\\') | '\\' .) '"' ;
> > >
> > > now STRING_LITERAL will colide with any special string you'd 
> like to
> > > match, for instance:
> > > DATE_TIME : '"'YYYY-MM-DD hh:mm:ss'"'
> > >
> > > I've managed to merge it with:
> > > '"'(LETTER)*'"'
> > > '"'(LETTER)*'.'(LETTER)*'"'
> > > '"'(LETTER)*'-'(LETTER)*'"'
> > > Which was a diffucult task but doable.
> > >
> > >
> > > I thought about it and merging these rules is possible, but it 
> will
> > > take me days to write it and we haven't talked about 
validation.
> > > (It is a good to write down my thoughts I'm starting to 
convince
> > > myself that it is a good idea)
> > >
> > > What do you think is a proper solution?
> > 
> > My first thought is that you have a two-level grammatical issue 
> here.  
> > First you have to match a string and then determine if it 
> satisfies a 
> > "nested structure" which is the date/time stuff.  You can't 
really 
> use 
> > another rule in the same lexer object as it will consume the 
> input.  
> > Perhaps a compromise.  Make a new lexer rule that will match 
> DATE_TIME 
> > as you've done and make it protected.  Then, make a *new* 
instance 
> of 
> > your lexer.  Set it up with a copy of the text matched inside 
the 
> > string and then directly call DATE_TIME with a try/catch around 
it 
> to 
> > catch failure.  Gotta love LL based lexers :)
> > 
> > Ter
> > --
> > Professor Comp. Sci., University of San Francisco
> > Creator, ANTLR Parser Generator, http://www.antlr.org
> > Cofounder, http://www.jguru.com
> > Cofounder, http://www.knowspam.net enjoy email again!
> > Cofounder, http://www.peerscope.com pure link sharing



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From Matthew.Ford at forward.com.au  Sun Apr 11 16:22:31 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] antlr 3 stuff
References: <72C9789739C4214096AE945753B11EA3FABE69@mypxmail04.bco-home.com>
Message-ID: <001f01c4201b$dd0da000$0400a8c0@NOTEBOOK>

Hi Monty,
I started reading this paper today.  I got lost in the syntax.
It looks powerful, perhaps too powerful for the average user (me).

I could think of two uses for this in Antlr 3
i) use this type of macro expansions to support multiple output languages.
It should make it easier for the power user to add support for another
language
by replacing the macro files without touching the Antlr parser
ii) use the pretty printer idea to improve the error reporting in Antlr and
to tie the final code to the input grammar.

Is this what you had in mind.
all the best
matthew

----- Original Message ----- 
From: <mzukowski@yci.com>
To: <antlr-interest@yahoogroups.com>
Sent: Thursday, March 18, 2004 9:58 AM
Subject: [antlr-interest] antlr 3 stuff


> I'd like to explore the 'language extension' space for antlr 3.  To me
> developing a grammar and extending a grammar are very distinct phases of
> antlr coding.  Plenty of people download grammars and just want to tweak
> them with actions or a small bit of new syntax.  In "Growing Languages
with
> Metamorphic Syntax Macros" by Claus Brabrand and Michael I. Schwartzbach
at
> http://www.brics.dk/bigwig/publications/#macro they present a system that
> makes it safe for people to extend languages by not letting them do stupid
> things that have huge side effects.  When the time comes I'll re-read the
> paper again and try and convince Ter & Loring.
>
> Monty
> www.codetransform.com
>
>
>
> Yahoo! Groups Links
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Sun Apr 11 17:34:04 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:38 2004
Subject: New antlr-interest member
Message-ID: <1081730044.297.57857.w16@yahoogroups.com>


Hello,

This is an automated email message to let you know that
madmantk <tking@scu.edu> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From mr_nur2000 at yahoo.com  Sun Apr 11 18:53:21 2004
From: mr_nur2000 at yahoo.com (Mohad Nur)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] AST Generation
In-Reply-To: <7ABFFCB1-87E9-11D8-8786-000393B5606C@codetransform.com>
Message-ID: <20040412015321.27357.qmail@web20913.mail.yahoo.com>


Hi,

I am having some problems creating the correct AST. I have a rule like

Decl: (varDecl)*;

varDecl : varType idlist SEMI;

There are different type of vartypes and i want the final Decl tree to contain all of them but what i am getting right now is only the last declaration as it overwrites the last one. I just want the new variable to be added to the currentAST.

Thanks,

Nur


---------------------------------
Do you Yahoo!?
Yahoo! Tax Center - File online by April 15th
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040411/2444d099/attachment.html
From monty at codetransform.com  Sun Apr 11 19:58:11 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] antlr 3 stuff
In-Reply-To: <001f01c4201b$dd0da000$0400a8c0@NOTEBOOK>
References: <72C9789739C4214096AE945753B11EA3FABE69@mypxmail04.bco-home.com> <001f01c4201b$dd0da000$0400a8c0@NOTEBOOK>
Message-ID: <3BD3072E-8C2D-11D8-80BE-000393B5606C@codetransform.com>

Actually there are two completely separate reasons.  On the antlr side 
it could help with code generation or with specialized uses of antlr 
that couldn't be handled by code generation.  It's hard to explain what 
those might be and I haven't come up with an example, but it's a 
solution that I will consider if we run into something nasty that can't 
easily be handled by a specialized code generator.  This is, however, a 
big deal for antlr and I'm not sure I'll be able to convince Terence 
and Loring that it is the appropriate thing to do.  It may be an 
experimental branch I'll have to make myself.

But the main thing I would like to see is this support for antlr 
grammars.  For instance, people could download my C grammar and extend 
it syntactically with safe pointers or whatever domain specific 
extensions they would like to add.  And because they are extending the 
grammar, antlr will enforce certain rules differently so the programmer 
doesn't make a huge blunder because they are unfamiliar with 
disambiguation.

However we do it I think the important idea is that building a grammar 
and extending a grammar are two different modes of development which 
antlr could handle in different ways to make each mode of development 
easier.  And if we go with the metamorphic syntactical macro idea then 
we would be a natural choice for developers making domain specific 
languages.

Monty

On Apr 11, 2004, at 4:22 PM, matthew ford wrote:

> Hi Monty,
> I started reading this paper today.  I got lost in the syntax.
> It looks powerful, perhaps too powerful for the average user (me).
>
> I could think of two uses for this in Antlr 3
> i) use this type of macro expansions to support multiple output 
> languages.
> It should make it easier for the power user to add support for another
> language
> by replacing the macro files without touching the Antlr parser
> ii) use the pretty printer idea to improve the error reporting in 
> Antlr and
> to tie the final code to the input grammar.
>
> Is this what you had in mind.
> all the best
> matthew
>
> ----- Original Message -----
> From: <mzukowski@yci.com>
> To: <antlr-interest@yahoogroups.com>
> Sent: Thursday, March 18, 2004 9:58 AM
> Subject: [antlr-interest] antlr 3 stuff
>
>
>> I'd like to explore the 'language extension' space for antlr 3.  To me
>> developing a grammar and extending a grammar are very distinct phases 
>> of
>> antlr coding.  Plenty of people download grammars and just want to 
>> tweak
>> them with actions or a small bit of new syntax.  In "Growing Languages
> with
>> Metamorphic Syntax Macros" by Claus Brabrand and Michael I. 
>> Schwartzbach
> at
>> http://www.brics.dk/bigwig/publications/#macro they present a system 
>> that
>> makes it safe for people to extend languages by not letting them do 
>> stupid
>> things that have huge side effects.  When the time comes I'll re-read 
>> the
>> paper again and try and convince Ter & Loring.
>>
>> Monty
>> www.codetransform.com
>>
>>
>>
>> Yahoo! Groups Links
>>
>>
>>
>>
>>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Sun Apr 11 23:22:28 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:38 2004
Subject: New antlr-interest member
Message-ID: <1081750948.97.54278.w37@yahoogroups.com>


Hello,

This is an automated email message to let you know that
tsr9988 <tsr9988@yahoo.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From jpdv at medialog.pt  Mon Apr 12 01:10:45 2004
From: jpdv at medialog.pt (jduquevieira)
Date: Mon Dec 20 16:16:38 2004
Subject: [antlr-interest] Re: Error recovery
In-Reply-To: <c57vj0+7p9e@eGroups.com>
Message-ID: <c5diu5+ovmo@eGroups.com>

--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> What you really want to change is the input buffering.  Check out
> CharBuffer.java in the antlr directory and write an equivalent
> (assuming that you are using Java--C++ and C# differ) that blocks 
on
> interactive input at end of line rather than returning EOF.
> 
> --Loring


Hi Loring. Thanks for taking the time to answer.

Anyway, I think that I didn't explain my self correctely.
Imagine that the user writes:
     "2+*4)"

As you can see, there are parenthesis missing (left) and a number 
(between the "+" and the "*").

Even though the user as failed to write a correct statement, my 
editor has to be able to recover from it and show place holders 
where the missing characters were expected:
     "_2+_*4)"

All of this graphically, of course. But, that point is already 
covered.
All I have left to solve is the parser.

Any ideas?

Best regards.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From Matthew.Ford at forward.com.au  Mon Apr 12 02:06:19 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] antlr 3 stuff
References: <72C9789739C4214096AE945753B11EA3FABE69@mypxmail04.bco-home.com> <001f01c4201b$dd0da000$0400a8c0@NOTEBOOK> <3BD3072E-8C2D-11D8-80BE-000393B5606C@codetransform.com>
Message-ID: <000401c4206d$6b150400$0400a8c0@NOTEBOOK>

Could you give some small concrete example of what you are expecting to be
able to do?

matthew
----- Original Message ----- 
From: "Monty Zukowski" <monty@codetransform.com>
To: <antlr-interest@yahoogroups.com>
Cc: "Monty Zukowski" <monty@codetransform.com>
Sent: Monday, April 12, 2004 12:58 PM
Subject: Re: [antlr-interest] antlr 3 stuff


> Actually there are two completely separate reasons.  On the antlr side
> it could help with code generation or with specialized uses of antlr
> that couldn't be handled by code generation.  It's hard to explain what
> those might be and I haven't come up with an example, but it's a
> solution that I will consider if we run into something nasty that can't
> easily be handled by a specialized code generator.  This is, however, a
> big deal for antlr and I'm not sure I'll be able to convince Terence
> and Loring that it is the appropriate thing to do.  It may be an
> experimental branch I'll have to make myself.
>
> But the main thing I would like to see is this support for antlr
> grammars.  For instance, people could download my C grammar and extend
> it syntactically with safe pointers or whatever domain specific
> extensions they would like to add.  And because they are extending the
> grammar, antlr will enforce certain rules differently so the programmer
> doesn't make a huge blunder because they are unfamiliar with
> disambiguation.
>
> However we do it I think the important idea is that building a grammar
> and extending a grammar are two different modes of development which
> antlr could handle in different ways to make each mode of development
> easier.  And if we go with the metamorphic syntactical macro idea then
> we would be a natural choice for developers making domain specific
> languages.
>
> Monty
>
> On Apr 11, 2004, at 4:22 PM, matthew ford wrote:
>
> > Hi Monty,
> > I started reading this paper today.  I got lost in the syntax.
> > It looks powerful, perhaps too powerful for the average user (me).
> >
> > I could think of two uses for this in Antlr 3
> > i) use this type of macro expansions to support multiple output
> > languages.
> > It should make it easier for the power user to add support for another
> > language
> > by replacing the macro files without touching the Antlr parser
> > ii) use the pretty printer idea to improve the error reporting in
> > Antlr and
> > to tie the final code to the input grammar.
> >
> > Is this what you had in mind.
> > all the best
> > matthew
> >
> > ----- Original Message -----
> > From: <mzukowski@yci.com>
> > To: <antlr-interest@yahoogroups.com>
> > Sent: Thursday, March 18, 2004 9:58 AM
> > Subject: [antlr-interest] antlr 3 stuff
> >
> >
> >> I'd like to explore the 'language extension' space for antlr 3.  To me
> >> developing a grammar and extending a grammar are very distinct phases
> >> of
> >> antlr coding.  Plenty of people download grammars and just want to
> >> tweak
> >> them with actions or a small bit of new syntax.  In "Growing Languages
> > with
> >> Metamorphic Syntax Macros" by Claus Brabrand and Michael I.
> >> Schwartzbach
> > at
> >> http://www.brics.dk/bigwig/publications/#macro they present a system
> >> that
> >> makes it safe for people to extend languages by not letting them do
> >> stupid
> >> things that have huge side effects.  When the time comes I'll re-read
> >> the
> >> paper again and try and convince Ter & Loring.
> >>
> >> Monty
> >> www.codetransform.com
> >>
> >>
> >>
> >> Yahoo! Groups Links
> >>
> >>
> >>
> >>
> >>
> >
> >
> >
> >
> > Yahoo! Groups Links
> >
> >
> >
> >
> >
> >
> >
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ronald.petty at milliman.com  Mon Apr 12 06:50:33 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] grammar issues
In-Reply-To: <000401c4206d$6b150400$0400a8c0@NOTEBOOK>
Message-ID: <OFBEA53A72.90DFCAA2-ON86256E74.004BD8EF-86256E74.004C4B01@milliman.com>

What are everyone's resources for grammars?  Things I would like to find, 
but seem to be having trouble are things like known issues with parsing 
various langauge constructs.  If there are any resources (hopefully with 
Antlr examples to save time) that would be nice. 

More theory than practical would be nice, figured someone on this list 
would have something :).

Thanks
Ron

**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040412/f0c481b4/attachment.html
From johnm-antlr at non.net  Mon Apr 12 07:43:21 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] About GPL
In-Reply-To: <4076D54E.4070909@yahoo.gr>
References: <4076D54E.4070909@yahoo.gr>
Message-ID: <16506.43785.351207.386475@despot.non.net>

In the following, be clear that I Am Not A Lawyer (IANAL) and that you
should get competent, professional legal advice.... This is just IMEBHO.

>>>>> "Anakreon" == Anakreon  <anakreonmejdi@yahoo.gr> writes:
[...]

> As mentioned in an other thread, a grammar file was released by me under
> the GPL license.  My opinion is that I have the right to do this.

It's your grammar so you can do whatever you like with it.

> The generated code, is the product of my intellectual work and of the
> authors who wrote antlr.

Correct, it's an odd case of a combined, derivative, generated work.

Note that any libraries, etc. that are part of the antlr run-time is fully
and only controlled by Antlr's license.


> So it should be correct that both parties have the right to impose the
> license which they like most, or think more appropriate.

Completely FALSE.  You can only assert a license that is allowed for by
(i.e., is "compatible with") the license of Antlr. But...

> As far as I know, antlr claims no rights on the generated code.  Hence I
> am the only one left to decide the license.

...since the current version of Antlr (as with PCCTS before it) has been
placed into the public domain, you can literally do whatever the hell you
want because there's literally no license on it.

> However, if someone has an other opinion I'd like to know his arguments.
> It is crucial to me, that I will have the freedom to decide the license
> of the grammar.

Even when Antlr has a license (for v3.x and beyond), you can *always* put
whatever license you want upon your grammar.

The upcoming license will hopefully make it clear how it applies to the
case of the generated code and any run-time libraries, etc.

Go wild,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Mon Apr 12 07:45:46 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] antlr 3 stuff
In-Reply-To: <000401c4206d$6b150400$0400a8c0@NOTEBOOK>
References: <72C9789739C4214096AE945753B11EA3FABE69@mypxmail04.bco-home.com> <001f01c4201b$dd0da000$0400a8c0@NOTEBOOK> <3BD3072E-8C2D-11D8-80BE-000393B5606C@codetransform.com> <000401c4206d$6b150400$0400a8c0@NOTEBOOK>
Message-ID: <1534EB58-8C90-11D8-8AE7-000393B5606C@codetransform.com>

Well, the jwig language is a good example.  One facet of it is really 
just java with two syntactic extensions "show" and "receive".  "show" 
shows a web page.  "receive" recieves http POSTs and GETs.  Those 
keywords actually generate quite a bit of code to handle the web stuff 
behind the scenes, including exception handling, communication errors, 
state preservation.  To you it just looks like your code "show"s and 
continues on until a "receive", where it waits for a reply.  Behind the 
scenes it may have split your method into multiple methods and added 
exception handling or whatever it needs to do to give you that 
illusion.

Domain specific languages are about creating a clean syntax for a 
specific domain instead of forcing your domain problems into only the 
abstractions your language provides (functions or objects or whatever).

Monty
ANTLR consulting
www.codetransform.com


On Apr 12, 2004, at 2:06 AM, matthew ford wrote:

> Could you give some small concrete example of what you are expecting 
> to be
> able to do?
>
> matthew
> ----- Original Message -----
> From: "Monty Zukowski" <monty@codetransform.com>
> To: <antlr-interest@yahoogroups.com>
> Cc: "Monty Zukowski" <monty@codetransform.com>
> Sent: Monday, April 12, 2004 12:58 PM
> Subject: Re: [antlr-interest] antlr 3 stuff
>
>
>> Actually there are two completely separate reasons.  On the antlr side
>> it could help with code generation or with specialized uses of antlr
>> that couldn't be handled by code generation.  It's hard to explain 
>> what
>> those might be and I haven't come up with an example, but it's a
>> solution that I will consider if we run into something nasty that 
>> can't
>> easily be handled by a specialized code generator.  This is, however, 
>> a
>> big deal for antlr and I'm not sure I'll be able to convince Terence
>> and Loring that it is the appropriate thing to do.  It may be an
>> experimental branch I'll have to make myself.
>>
>> But the main thing I would like to see is this support for antlr
>> grammars.  For instance, people could download my C grammar and extend
>> it syntactically with safe pointers or whatever domain specific
>> extensions they would like to add.  And because they are extending the
>> grammar, antlr will enforce certain rules differently so the 
>> programmer
>> doesn't make a huge blunder because they are unfamiliar with
>> disambiguation.
>>
>> However we do it I think the important idea is that building a grammar
>> and extending a grammar are two different modes of development which
>> antlr could handle in different ways to make each mode of development
>> easier.  And if we go with the metamorphic syntactical macro idea then
>> we would be a natural choice for developers making domain specific
>> languages.
>>
>> Monty
>>
>> On Apr 11, 2004, at 4:22 PM, matthew ford wrote:
>>
>>> Hi Monty,
>>> I started reading this paper today.  I got lost in the syntax.
>>> It looks powerful, perhaps too powerful for the average user (me).
>>>
>>> I could think of two uses for this in Antlr 3
>>> i) use this type of macro expansions to support multiple output
>>> languages.
>>> It should make it easier for the power user to add support for 
>>> another
>>> language
>>> by replacing the macro files without touching the Antlr parser
>>> ii) use the pretty printer idea to improve the error reporting in
>>> Antlr and
>>> to tie the final code to the input grammar.
>>>
>>> Is this what you had in mind.
>>> all the best
>>> matthew
>>>
>>> ----- Original Message -----
>>> From: <mzukowski@yci.com>
>>> To: <antlr-interest@yahoogroups.com>
>>> Sent: Thursday, March 18, 2004 9:58 AM
>>> Subject: [antlr-interest] antlr 3 stuff
>>>
>>>
>>>> I'd like to explore the 'language extension' space for antlr 3.  To 
>>>> me
>>>> developing a grammar and extending a grammar are very distinct 
>>>> phases
>>>> of
>>>> antlr coding.  Plenty of people download grammars and just want to
>>>> tweak
>>>> them with actions or a small bit of new syntax.  In "Growing 
>>>> Languages
>>> with
>>>> Metamorphic Syntax Macros" by Claus Brabrand and Michael I.
>>>> Schwartzbach
>>> at
>>>> http://www.brics.dk/bigwig/publications/#macro they present a system
>>>> that
>>>> makes it safe for people to extend languages by not letting them do
>>>> stupid
>>>> things that have huge side effects.  When the time comes I'll 
>>>> re-read
>>>> the
>>>> paper again and try and convince Ter & Loring.
>>>>
>>>> Monty
>>>> www.codetransform.com
>>>>
>>>>
>>>>
>>>> Yahoo! Groups Links
>>>>
>>>>
>>>>
>>>>
>>>>
>>>
>>>
>>>
>>>
>>> Yahoo! Groups Links
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>
>>
>>
>>
>> Yahoo! Groups Links
>>
>>
>>
>>
>>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Mon Apr 12 08:10:54 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:39 2004
Subject: Unsubscription by antlr-interest member
Message-ID: <1081782654.172.94379.w25@yahoogroups.com>


Hello,

This is an automated email message to let you know that
cucu_adrian <cucu_adrian@yahoo.com> unsubscribed from your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a member unsubscribes.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From mailinglist at august.de  Mon Apr 12 08:48:02 2004
From: mailinglist at august.de (mailinglist@august.de)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] 3 curly brackets commet
Message-ID: <33273.80.129.139.18.1081784882.squirrel@webimap.myhosting.de>

 How would you detect a comment block that is enclosed in 3 curly brackets?
e.g.:
1. {{{}}} or
2. {{{ comment }}} or
3. {{{} }}} or
4. {{{}} }}} ...

My solution leads to "lexical nondeterminism" though it functions ...

options { k=3; charVocabulary = '\u0020' .. '\u007e';}
CMT: "{{{"
        (
            {LA(3)!='}'}?   "}}"
        |   {LA(2)!='}'}?   '}'
        |                           ~'}'
        )*
        "}}}";

... but as I'm new to antlr I'm not quite sure what I'm doing here.
Avoiding "lexical nondeterminism" as a general advice seems to be helpful.
Would like to keep the goal, not to see this warning.

Any idea better than adding warnWhenFollowAmbig option?

Rolf


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Mon Apr 12 11:04:13 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] Re: Java.g grammar issues & potential fix
In-Reply-To: <c5c7h7+7adm@eGroups.com>
References: <c5c7h7+7adm@eGroups.com>
Message-ID: <CE0AF424-8CAB-11D8-A12A-000A95891192@cs.usfca.edu>

Hi Vince, sorry for the delay.  I have you on my calendar this week to 
investigate! ;)  Doing last minute project construction for my students 
etc...  Should shake loose some time in the next day or two. :)

Terence
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From lists at lischke-online.de  Mon Apr 12 11:05:25 2004
From: lists at lischke-online.de (Mike Lischke)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] Re: File spec grammar
In-Reply-To: <c5beo8+6q94@eGroups.com>
Message-ID: <20040412180044.8853357C002@h4866.serverkompetenz.net>

> You've said you have a problem with DIV and PATH_PART.
> could you give an example where semantically it can cause it?
> 
> 123/123.12 can it be considered a file name?

Yes it can be considered as a file name. For instance Windows accepts also forward slashes as path separator and except
for a handful of characters everything is allowed as path or file name. You can for instance also create something like:

123/45.67\89.0/1.2.3.4.5+e4

This name is 100% valid.

I thought about creating a subparser for file names but somehow I've got the feeling this will not really solve my
problem. Anyway, I'll try it and see what comes out. I only hoped the parser gurus would already have solved such a
common problem...

Mike
--
www.soft-gems.net



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Mon Apr 12 11:12:02 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] 3 curly brackets commet
In-Reply-To: <33273.80.129.139.18.1081784882.squirrel@webimap.myhosting.de>
References: <33273.80.129.139.18.1081784882.squirrel@webimap.myhosting.de>
Message-ID: <E5C82168-8CAC-11D8-A12A-000A95891192@cs.usfca.edu>


On Apr 12, 2004, at 8:48 AM, mailinglist@august.de wrote:

>  How would you detect a comment block that is enclosed in 3 curly 
> brackets?
> e.g.:
> 1. {{{}}} or
> 2. {{{ comment }}} or
> 3. {{{} }}} or
> 4. {{{}} }}} ...
>
> My solution leads to "lexical nondeterminism" though it functions ...
>
> options { k=3; charVocabulary = '\u0020' .. '\u007e';}
> CMT: "{{{"
>         (
>             {LA(3)!='}'}?   "}}"
>         |   {LA(2)!='}'}?   '}'
>         |                           ~'}'
>         )*
>         "}}}";
>
> ... but as I'm new to antlr I'm not quite sure what I'm doing here.
> Avoiding "lexical nondeterminism" as a general advice seems to be 
> helpful.
> Would like to keep the goal, not to see this warning.
>
> Any idea better than adding warnWhenFollowAmbig option?

Hi Rolf,

I suggest using greedy=false option:

CMT : "{{{" (options {greedy=false;} : . )* "}}}" ;

with k=3, this should function as you would like :)  Clean too :)

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From FranklinChen at cmu.edu  Mon Apr 12 11:50:00 2004
From: FranklinChen at cmu.edu (FranklinChen@cmu.edu)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] Re: second lexical pass - yeah
In-Reply-To: <c5ca12+kfql@eGroups.com>
References: <c5c3kh+pah9@eGroups.com>
	<c5ca12+kfql@eGroups.com>
Message-ID: <16506.58584.608340.576669@SWAN.PSY.cmu.edu>

"idontwantanidwith2000init" <idontwantanidwith2000init@yahoo.com>
writes:

> It recognized DATE in the parser :)
> Now, could you review it:
> protected
> DATE
> 	: YEAR
> 	  '-' MONTH
> 	  '-' DAY
> 	  ' ' HOUR
> 	  ':' MINUTES
> 	  ':' SECONDS
> 	;
> // string literals
> STRING_LITERAL
> 	: 	'"'! (~('"'|'\n'|'\r'|'\\')|'\\' .)*'"'!
> 		{
> 			try
> 			{
> 				ScriptLexer scriptLexer = new 
> ScriptLexer(new StringReader($getText));
> 				scriptLexer.mDATE(false);
> 				$setType(DATE);
> 			}catch(ANTLRException exp){
> 				$setType(STRING);
> 			}
> 		}
> 	;
> 
> I've done all the neccesary imports.
> If you like it, Terr, maybe it deserve a place in the FAQ...
> 
> This is just great.
> 
> Tal.

Is there a reason not to just do this:

protected DATE: ...
protected STRING_LITERAL: ...

DATE_OR_STRING_LITERAL
    : (DATE) => DATE { $setType(DATE); }
    | STRING_LITERAL { $setType(STRING_LITERAL); }
    ;

By the way, has anyone been seeing my messages to this list?  I've
posted three or four separate messages on different questions I've had
(one related to lexer issues).

-- 
Franklin


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Mon Apr 12 12:05:18 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:39 2004
Subject: Unsubscription by antlr-interest member
Message-ID: <1081796718.641.28777.w4@yahoogroups.com>


Hello,

This is an automated email message to let you know that
kaberdude <kaberdude@yahoo.com> unsubscribed from your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a member unsubscribes.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From parrt at cs.usfca.edu  Mon Apr 12 12:11:52 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] Re: second lexical pass - yeah
In-Reply-To: <16506.58584.608340.576669@SWAN.PSY.cmu.edu>
References: <c5c3kh+pah9@eGroups.com> <c5ca12+kfql@eGroups.com> <16506.58584.608340.576669@SWAN.PSY.cmu.edu>
Message-ID: <4176FE30-8CB5-11D8-A12A-000A95891192@cs.usfca.edu>


On Apr 12, 2004, at 11:50 AM, FranklinChen@cmu.edu wrote:
> Is there a reason not to just do this:
>
> protected DATE: ...
> protected STRING_LITERAL: ...
>
> DATE_OR_STRING_LITERAL
>     : (DATE) => DATE { $setType(DATE); }
>     | STRING_LITERAL { $setType(STRING_LITERAL); }
>     ;

This will be much slower due to the predicate for large input, but 
might work.

> By the way, has anyone been seeing my messages to this list?  I've
> posted three or four separate messages on different questions I've had
> (one related to lexer issues).

I'm behind in email as usual...sorry.
Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From idontwantanidwith2000init at yahoo.com  Mon Apr 12 12:19:14 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] Re: 3 curly brackets commet
In-Reply-To: <33273.80.129.139.18.1081784882.squirrel@webimap.myhosting.de>
Message-ID: <c5eq3i+eueq@eGroups.com>

How about:

CURLY_COMMENT: '{'(WHITE_SPACE)'{'(WHITE_SPACE*'{'COMMENT'}'(WHITE_SP
ACE)*'}'(WHITE_SPACE)*'}'


--- In antlr-interest@yahoogroups.com, mailinglist@a... wrote:
>  How would you detect a comment block that is enclosed in 3 curly 
brackets?
> e.g.:
> 1. {{{}}} or
> 2. {{{ comment }}} or
> 3. {{{} }}} or
> 4. {{{}} }}} ...
> 
> My solution leads to "lexical nondeterminism" though it 
functions ...
> 
> options { k=3; charVocabulary = '\u0020' .. '\u007e';}
> CMT: "{{{"
>         (
>             {LA(3)!='}'}?   "}}"
>         |   {LA(2)!='}'}?   '}'
>         |                           ~'}'
>         )*
>         "}}}";
> 
> ... but as I'm new to antlr I'm not quite sure what I'm doing here.
> Avoiding "lexical nondeterminism" as a general advice seems to be 
helpful.
> Would like to keep the goal, not to see this warning.
> 
> Any idea better than adding warnWhenFollowAmbig option?
> 
> Rolf



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From idontwantanidwith2000init at yahoo.com  Mon Apr 12 12:53:44 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] Re: File spec grammar
In-Reply-To: <20040412180044.8853357C002@h4866.serverkompetenz.net>
Message-ID: <c5es48+bng4@eGroups.com>

You might find your answer in "second lexical pass" messages that 
are posted.

It seems like you need a second pass and there is a proposal how to 
avoid it.


--- In antlr-interest@yahoogroups.com, "Mike Lischke" <lists@l...> 
wrote:
> > You've said you have a problem with DIV and PATH_PART.
> > could you give an example where semantically it can cause it?
> > 
> > 123/123.12 can it be considered a file name?
> 
> Yes it can be considered as a file name. For instance Windows 
accepts also forward slashes as path separator and except
> for a handful of characters everything is allowed as path or file 
name. You can for instance also create something like:
> 
> 123/45.67\89.0/1.2.3.4.5+e4
> 
> This name is 100% valid.
> 
> I thought about creating a subparser for file names but somehow 
I've got the feeling this will not really solve my
> problem. Anyway, I'll try it and see what comes out. I only hoped 
the parser gurus would already have solved such a
> common problem...
> 
> Mike
> --
> www.soft-gems.net



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From lgc at mail1.jpl.nasa.gov  Mon Apr 12 13:20:56 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] Re: Error recovery
In-Reply-To: <c5diu5+ovmo@eGroups.com>
Message-ID: <c5etn8+21of@eGroups.com>

--- In antlr-interest@yahoogroups.com, "jduquevieira" <jpdv@m...> wrote:
> --- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> > What you really want to change is the input buffering.  Check out
> > CharBuffer.java in the antlr directory and write an equivalent
> > (assuming that you are using Java--C++ and C# differ) that blocks 
> on
> > interactive input at end of line rather than returning EOF.
> > 
> > --Loring
> 
> 
> Hi Loring. Thanks for taking the time to answer.
> 
> Anyway, I think that I didn't explain my self correctely.
> Imagine that the user writes:
>      "2+*4)"
> 
> As you can see, there are parenthesis missing (left) and a number 
> (between the "+" and the "*").

Ouch!  That's a tougher problem.  You need to insert imaginary tokens (or AST nodes) wherever you are missing a token.  There are 
multiple interpretations possible since both extraneous and missing elements are possible.  You are pretty much on your own, here.  I 
would suggest doing a web search on error recovery and user input--maybe you can find something that will help.

--Loring

> 
> Even though the user as failed to write a correct statement, my 
> editor has to be able to recover from it and show place holders 
> where the missing characters were expected:
>      "_2+_*4)"
> 
> All of this graphically, of course. But, that point is already 
> covered.
> All I have left to solve is the parser.
> 
> Any ideas?
> 
> Best regards.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ronald.petty at milliman.com  Mon Apr 12 13:37:42 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] debugging and testing
In-Reply-To: <c5es48+bng4@eGroups.com>
Message-ID: <OF63E1BCAC.86D45913-ON86256E74.006F7826-86256E74.007191D4@milliman.com>

I am trying to follow along 
http://www.antlr.org/article/parse.trees/index.tml

Do you need to do something with the classpath to get this to work?  Under 
cygwin is

$ echo $CLASSPATH
C:/antlr-2.7.3/antlr.jar;C:/antlr-2.7.3;C:/junit3.8.1/junit.jar;C:/junit3.8.1;.

I am using Sun's java, not the one from Cygwin

so in my .bashrc the CLASSPATH is really

export ANT_HOME="/cygdrive/c/apache-ant-1.6.1"
export JAVA_HOME="/cygdrive/c/j2sdk1.5.0"
export PATH=/cygdrive/c/j2sdk1.5.0/bin:${ANT_HOME}/bin:${PATH}
export CVSROOT=/cygdrive/c/repository
export 
CLASSPATH="C:/antlr-2.7.3/antlr.jar;C:/antlr-2.7.3;${JUNIT_HOME}${JUNIT_JAR};."

I have a directory structure of
pwd/source
pwd/grammars

When I build I do (in pwd)
alias build='mkdir ./build; java antlr.Tool -o ./build 
grammars/VB6Lexer.g; java antlr.Tool -o ./build grammars/VB6Parser.g; 
javac -d ./build ./build/*.java'

Before I tried in do this debugging/testing it worked, however when I add 
the code from the example (pasted) I get.  (My grammar is below the 
errors).

ANTLR Parser Generator   Version 2.7.3   1989-2004 jGuru.com
ANTLR Parser Generator   Version 2.7.3   1989-2004 jGuru.com
./build/VB6Parser.java:41: cannot find symbol
symbol  : class Stack
location: class VB6Parser
        protected Stack currentParseTreeRoot = new Stack();
                  ^
./build/VB6Parser.java:46: cannot find symbol
symbol  : class ParseTreeRule
location: class VB6Parser
        protected ParseTreeRule mostRecentParseTreeRoot = null;
                  ^
./build/VB6Parser.java:51: cannot find symbol
symbol  : class ParseTree
location: class VB6Parser
        public ParseTree getParseTree() {
               ^
./build/VB6Parser.java:26: cannot find symbol
symbol  : class ParseTree
location: class Main
ParseTree tree = parser.getParseTree();
^
./build/VB6Parser.java:41: cannot find symbol
symbol  : class Stack
location: class VB6Parser
        protected Stack currentParseTreeRoot = new Stack();
                                                   ^
./build/VB6Parser.java:85: cannot find symbol
symbol  : class ParseTreeRule
location: class VB6Parser
                ParseTreeRule root = 
(ParseTreeRule)currentParseTreeRoot.peek();

                ^
./build/VB6Parser.java:85: cannot find symbol
symbol  : class ParseTreeRule
location: class VB6Parser
                ParseTreeRule root = 
(ParseTreeRule)currentParseTreeRoot.peek();

                                      ^
./build/VB6Parser.java:86: cannot find symbol
symbol  : class ParseTreeToken
location: class VB6Parser
                ParseTreeToken tokenNode = null;
                ^
./build/VB6Parser.java:88: cannot find symbol
symbol  : class ParseTreeToken
location: class VB6Parser
                        tokenNode = new ParseTreeToken(new 
antlr.CommonToken("EO
F"));
.....  (more errors follow)


options {
}

{
import java.io.*;

class Main {
        public static void main(String[] args) {
                try {
                        VB6Lexer lexer = new VB6Lexer(System.in);
                        VB6Parser parser = new VB6Parser(lexer);
                        parser.program();

ParseTree tree = parser.getParseTree();
System.out.println("parse tree:"+tree.toStringTree());

                } catch(Exception e) {
                        e.printStackTrace();
                }
        }
}
}

class VB6Parser extends Parser("antlr.debug.ParseTreeDebugParser");

options {
        importVocab=VB6;
}


{
        /** Each new rule invocation must have it's own subtree.  Tokens
         *  are added to the current root so we must have a stack of 
subtree roo
ts.
         */
        protected Stack currentParseTreeRoot = new Stack();

        /** Track most recently created parse subtree so that when parsing
         *  is finished, we can get to the root.
         */
        protected ParseTreeRule mostRecentParseTreeRoot = null;

        /** For every rule replacement with a production, we bump up 
count. */
        protected int numberOfDerivationSteps = 1; // n replacements plus 
step 0

        public ParseTree getParseTree() {
                return mostRecentParseTreeRoot;
        }

        public int getNumberOfDerivationSteps() {
                return numberOfDerivationSteps;
        }

        public void match(int i) throws MismatchedTokenException, 
TokenStreamExc
eption {
                addCurrentTokenToParseTree();
                super.match(i);
        }

        public void match(BitSet bitSet) throws MismatchedTokenException, 
TokenS
treamException {
                addCurrentTokenToParseTree();
                super.match(bitSet);
        }

        public void matchNot(int i) throws MismatchedTokenException, 
TokenStream
Exception {
                addCurrentTokenToParseTree();
                super.matchNot(i);
        }

        /** This adds LT(1) to the current parse subtree.  Note that the 
match()
         *  routines add the node before checking for correct match.  This 
means
         *  that, upon mismatched token, there will a token node in the 
tree
         *  corresponding to where that token was expected.  For no viable
         *  alternative errors, no node will be in the tree as nothing was
         *  matched() (the lookahead failed to predict an alternative).
         */
        protected void addCurrentTokenToParseTree() throws 
TokenStreamException
{
                if (inputState.guessing>0) {
                        return;
                }
                ParseTreeRule root = 
(ParseTreeRule)currentParseTreeRoot.peek();
                ParseTreeToken tokenNode = null;
                if ( LA(1)==Token.EOF_TYPE ) {
                        tokenNode = new ParseTreeToken(new 
antlr.CommonToken("EO
F"));
                }
                else {
                        tokenNode = new ParseTreeToken(LT(1));
                }
                root.addChild(tokenNode);
        }

        /** Create a rule node, add to current tree, and make it current 
root */
        public void traceIn(String s) throws TokenStreamException {
                if (inputState.guessing>0) {
                        return;
                }
                ParseTreeRule subRoot = new ParseTreeRule(s);
                if ( currentParseTreeRoot.size()>0 ) {
                        ParseTreeRule oldRoot = 
(ParseTreeRule)currentParseTreeR
oot.peek();
                        oldRoot.addChild(subRoot);
                }
                currentParseTreeRoot.push(subRoot);
                numberOfDerivationSteps++;
        }

        /** Pop current root; back to adding to old root */
        public void traceOut(String s) throws TokenStreamException {
                if (inputState.guessing>0) {
                        return;
                }
                mostRecentParseTreeRoot = 
(ParseTreeRule)currentParseTreeRoot.po
p();
        }

program
        :       (declaration)+
        { System.out.println("Matched Something"); }
        ;

declaration
        :       SUB
        |       FUNCTION
        ;
}

//Lexer

class VB6Lexer extends Lexer;

options {
        exportVocab=VB6;
        charVocabulary='\3'..'\377';
        caseSensitive=false;
        caseSensitiveLiterals=false;
}

tokens {
        DIM="dim";
        SUB="sub";
        FUNCTION="function";
}

IDENT
options {
        testLiterals=true;
}
        :       ('a'..'z')('a'..'z'|'0'..'9'|'_')*
        { System.out.println("found an ident"); }
        ;

WS
        :       ' '
        |       '\t'
        { $setType(Token.SKIP); }
        ;

NL      :       '\r''\n'
        |       '\n'
        { $setType(Token.SKIP); }
        ;

Thanks for the help.
Ron

**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040412/eef5cf45/attachment.html
From ronald.petty at milliman.com  Mon Apr 12 13:50:11 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] website update
In-Reply-To: <OF63E1BCAC.86D45913-ON86256E74.006F7826-86256E74.007191D4@milliman.com>
Message-ID: <OF0077B17C.FC58AD7C-ON86256E74.007262EF-86256E74.0072B675@milliman.com>

I don't know who maintains the website, but

http://www.antlr.org/doc/getting-started.html

The link to the version download should be updated from 2.7.2.



1.      Download ANTLR 2.7.2. First you have to get the software.

Ron


**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040412/9b24d8b6/attachment.html
From parrt at cs.usfca.edu  Mon Apr 12 14:17:51 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] website update
In-Reply-To: <OF0077B17C.FC58AD7C-ON86256E74.007262EF-86256E74.0072B675@milliman.com>
References: <OF0077B17C.FC58AD7C-ON86256E74.007262EF-86256E74.0072B675@milliman.com>
Message-ID: <DB54494A-8CC6-11D8-A12A-000A95891192@cs.usfca.edu>


On Apr 12, 2004, at 1:50 PM, ronald.petty@milliman.com wrote:

>
> I don't know who maintains the website, but
>
> http://www.antlr.org/doc/getting-started.html
>
> The link to the version download should be updated from 2.7.2.
>
>
>
>
> 1. ? ? ? ?Download ANTLR 2.7.2. First you have to get the software.

Thanks, Ron.  Fixed.
Ter

>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Mon Apr 12 14:19:06 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] debugging and testing
In-Reply-To: <OF63E1BCAC.86D45913-ON86256E74.006F7826-86256E74.007191D4@milliman.com>
References: <OF63E1BCAC.86D45913-ON86256E74.006F7826-86256E74.007191D4@milliman.com>
Message-ID: <07993455-8CC7-11D8-A12A-000A95891192@cs.usfca.edu>


On Apr 12, 2004, at 1:37 PM, ronald.petty@milliman.com wrote:

>
> I am trying to follow along  
> http://www.antlr.org/article/parse.trees/index.tml
>
> Do you need to do something with the classpath to get this to work?  
> ?Under cygwin is

Could be that the example assumes the parse tree stuff is in the  
current directory, but it has moved inside antlr.  It seems you have  
this correctly though:

> class VB6Parser extends Parser("antlr.debug.ParseTreeDebugParser");

Hmm...Stack should be from java.util.  Is that included in the header  
{...}?

Ter

>
> $ echo $CLASSPATH
> C:/antlr-2.7.3/antlr.jar;C:/antlr-2.7.3;C:/junit3.8.1/junit.jar;C:/ 
> junit3.8.1;.
>
> I am using Sun's java, not the one from Cygwin
>
> so in my .bashrc the CLASSPATH is really
>
> export ANT_HOME="/cygdrive/c/apache-ant-1.6.1"
> export JAVA_HOME="/cygdrive/c/j2sdk1.5.0"
> export PATH=/cygdrive/c/j2sdk1.5.0/bin:${ANT_HOME}/bin:${PATH}
> export CVSROOT=/cygdrive/c/repository
> export  
> CLASSPATH="C:/antlr-2.7.3/antlr.jar;C:/antlr 
> -2.7.3;${JUNIT_HOME}${JUNIT_JAR};."
>
> I have a directory structure of
> pwd/source
> pwd/grammars
>
> When I build I do (in pwd)
> alias build='mkdir ./build; java antlr.Tool -o ./build  
> grammars/VB6Lexer.g; java antlr.Tool -o ./build grammars/VB6Parser.g;  
> javac -d ./build ./build/*.java'
>
> Before I tried in do this debugging/testing it worked, however when I  
> add the code from the example (pasted) I get. ?(My grammar is below  
> the errors).
>
> ANTLR Parser Generator ? Version 2.7.3 ? 1989-2004 jGuru.com
> ANTLR Parser Generator ? Version 2.7.3 ? 1989-2004 jGuru.com
> ./build/VB6Parser.java:41: cannot find symbol
> symbol ?: class Stack
> location: class VB6Parser
> ? ? ? ? protected Stack currentParseTreeRoot = new Stack();
> ? ? ? ? ? ? ? ? ? ^
> ./build/VB6Parser.java:46: cannot find symbol
> symbol ?: class ParseTreeRule
> location: class VB6Parser
> ? ? ? ? protected ParseTreeRule mostRecentParseTreeRoot = null;
> ? ? ? ? ? ? ? ? ? ^
> ./build/VB6Parser.java:51: cannot find symbol
> symbol ?: class ParseTree
> location: class VB6Parser
> ? ? ? ? public ParseTree getParseTree() {
> ? ? ? ? ? ? ? ?^
> ./build/VB6Parser.java:26: cannot find symbol
> symbol ?: class ParseTree
> location: class Main
> ParseTree tree = parser.getParseTree();
> ^
> ./build/VB6Parser.java:41: cannot find symbol
> symbol ?: class Stack
> location: class VB6Parser
> ? ? ? ? protected Stack currentParseTreeRoot = new Stack();
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?^
> ./build/VB6Parser.java:85: cannot find symbol
> symbol ?: class ParseTreeRule
> location: class VB6Parser
> ? ? ? ? ? ? ? ? ParseTreeRule root =  
> (ParseTreeRule)currentParseTreeRoot.peek();
>
> ? ? ? ? ? ? ? ? ^
> ./build/VB6Parser.java:85: cannot find symbol
> symbol ?: class ParseTreeRule
> location: class VB6Parser
> ? ? ? ? ? ? ? ? ParseTreeRule root =  
> (ParseTreeRule)currentParseTreeRoot.peek();
>
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ^
> ./build/VB6Parser.java:86: cannot find symbol
> symbol ?: class ParseTreeToken
> location: class VB6Parser
> ? ? ? ? ? ? ? ? ParseTreeToken tokenNode = null;
> ? ? ? ? ? ? ? ? ^
> ./build/VB6Parser.java:88: cannot find symbol
> symbol ?: class ParseTreeToken
> location: class VB6Parser
> ? ? ? ? ? ? ? ? ? ? ? ? tokenNode = new ParseTreeToken(new  
> antlr.CommonToken("EO
> F"));
> ..... ?(more errors follow)
>
>
> options {
> }
>
> {
> import java.io.*;
>
> class Main {
> ? ? ? ? public static void main(String[] args) {
> ? ? ? ? ? ? ? ? try {
> ? ? ? ? ? ? ? ? ? ? ? ? VB6Lexer lexer = new VB6Lexer(System.in);
> ? ? ? ? ? ? ? ? ? ? ? ? VB6Parser parser = new VB6Parser(lexer);
> ? ? ? ? ? ? ? ? ? ? ? ? parser.program();
>
> ParseTree tree = parser.getParseTree();
> System.out.println("parse tree:"+tree.toStringTree());
>
> ? ? ? ? ? ? ? ? } catch(Exception e) {
> ? ? ? ? ? ? ? ? ? ? ? ? e.printStackTrace();
> ? ? ? ? ? ? ? ? }
> ? ? ? ? }
> }
> }
>
> class VB6Parser extends Parser("antlr.debug.ParseTreeDebugParser");
>
> options {
> ? ? ? ? importVocab=VB6;
> }
>
>
> {
> ? ? ? ? /** Each new rule invocation must have it's own subtree.  
> ?Tokens
> ? ? ? ? ?* ?are added to the current root so we must have a stack of  
> subtree roo
> ts.
> ? ? ? ? ?*/
> ? ? ? ? protected Stack currentParseTreeRoot = new Stack();
>
> ? ? ? ? /** Track most recently created parse subtree so that when  
> parsing
> ? ? ? ? ?* ?is finished, we can get to the root.
> ? ? ? ? ?*/
> ? ? ? ? protected ParseTreeRule mostRecentParseTreeRoot = null;
>
> ? ? ? ? /** For every rule replacement with a production, we bump up  
> count. */
> ? ? ? ? protected int numberOfDerivationSteps = 1; // n replacements  
> plus step 0
>
> ? ? ? ? public ParseTree getParseTree() {
> ? ? ? ? ? ? ? ? return mostRecentParseTreeRoot;
> ? ? ? ? }
>
> ? ? ? ? public int getNumberOfDerivationSteps() {
> ? ? ? ? ? ? ? ? return numberOfDerivationSteps;
> ? ? ? ? }
>
> ? ? ? ? public void match(int i) throws MismatchedTokenException,  
> TokenStreamExc
> eption {
> ? ? ? ? ? ? ? ? addCurrentTokenToParseTree();
> ? ? ? ? ? ? ? ? super.match(i);
> ? ? ? ? }
>
> ? ? ? ? public void match(BitSet bitSet) throws  
> MismatchedTokenException, TokenS
> treamException {
> ? ? ? ? ? ? ? ? addCurrentTokenToParseTree();
> ? ? ? ? ? ? ? ? super.match(bitSet);
> ? ? ? ? }
>
> ? ? ? ? public void matchNot(int i) throws MismatchedTokenException,  
> TokenStream
> Exception {
> ? ? ? ? ? ? ? ? addCurrentTokenToParseTree();
> ? ? ? ? ? ? ? ? super.matchNot(i);
> ? ? ? ? }
>
> ? ? ? ? /** This adds LT(1) to the current parse subtree. ?Note that  
> the match()
> ? ? ? ? ?* ?routines add the node before checking for correct match.  
> ?This means
> ? ? ? ? ?* ?that, upon mismatched token, there will a token node in  
> the tree
> ? ? ? ? ?* ?corresponding to where that token was expected. ?For no  
> viable
> ? ? ? ? ?* ?alternative errors, no node will be in the tree as nothing  
> was
> ? ? ? ? ?* ?matched() (the lookahead failed to predict an alternative).
> ? ? ? ? ?*/
> ? ? ? ? protected void addCurrentTokenToParseTree() throws  
> TokenStreamException
> {
> ? ? ? ? ? ? ? ? if (inputState.guessing>0) {
> ? ? ? ? ? ? ? ? ? ? ? ? return;
> ? ? ? ? ? ? ? ? }
> ? ? ? ? ? ? ? ? ParseTreeRule root =  
> (ParseTreeRule)currentParseTreeRoot.peek();
> ? ? ? ? ? ? ? ? ParseTreeToken tokenNode = null;
> ? ? ? ? ? ? ? ? if ( LA(1)==Token.EOF_TYPE ) {
> ? ? ? ? ? ? ? ? ? ? ? ? tokenNode = new ParseTreeToken(new  
> antlr.CommonToken("EO
> F"));
> ? ? ? ? ? ? ? ? }
> ? ? ? ? ? ? ? ? else {
> ? ? ? ? ? ? ? ? ? ? ? ? tokenNode = new ParseTreeToken(LT(1));
> ? ? ? ? ? ? ? ? }
> ? ? ? ? ? ? ? ? root.addChild(tokenNode);
> ? ? ? ? }
>
> ? ? ? ? /** Create a rule node, add to current tree, and make it  
> current root */
> ? ? ? ? public void traceIn(String s) throws TokenStreamException {
> ? ? ? ? ? ? ? ? if (inputState.guessing>0) {
> ? ? ? ? ? ? ? ? ? ? ? ? return;
> ? ? ? ? ? ? ? ? }
> ? ? ? ? ? ? ? ? ParseTreeRule subRoot = new ParseTreeRule(s);
> ? ? ? ? ? ? ? ? if ( currentParseTreeRoot.size()>0 ) {
> ? ? ? ? ? ? ? ? ? ? ? ? ParseTreeRule oldRoot =  
> (ParseTreeRule)currentParseTreeR
> oot.peek();
> ? ? ? ? ? ? ? ? ? ? ? ? oldRoot.addChild(subRoot);
> ? ? ? ? ? ? ? ? }
> ? ? ? ? ? ? ? ? currentParseTreeRoot.push(subRoot);
> ? ? ? ? ? ? ? ? numberOfDerivationSteps++;
> ? ? ? ? }
>
> ? ? ? ? /** Pop current root; back to adding to old root */
> ? ? ? ? public void traceOut(String s) throws TokenStreamException {
> ? ? ? ? ? ? ? ? if (inputState.guessing>0) {
> ? ? ? ? ? ? ? ? ? ? ? ? return;
> ? ? ? ? ? ? ? ? }
> ? ? ? ? ? ? ? ? mostRecentParseTreeRoot =  
> (ParseTreeRule)currentParseTreeRoot.po
> p();
> ? ? ? ? }
>
> program
> ? ? ? ? : ? ? ? (declaration)+
> ? ? ? ? { System.out.println("Matched Something"); }
> ? ? ? ? ;
>
> declaration
> ? ? ? ? : ? ? ? SUB
> ? ? ? ? | ? ? ? FUNCTION
> ? ? ? ? ;
> }
>
> //Lexer
>
> class VB6Lexer extends Lexer;
>
> options {
> ? ? ? ? exportVocab=VB6;
> ? ? ? ? charVocabulary='\3'..'\377';
> ? ? ? ? caseSensitive=false;
> ? ? ? ? caseSensitiveLiterals=false;
> }
>
> tokens {
> ? ? ? ? DIM="dim";
> ? ? ? ? SUB="sub";
> ? ? ? ? FUNCTION="function";
> }
>
> IDENT
> options {
> ? ? ? ? testLiterals=true;
> }
> ? ? ? ? : ? ? ? ('a'..'z')('a'..'z'|'0'..'9'|'_')*
> ? ? ? ? { System.out.println("found an ident"); }
> ? ? ? ? ;
>
> WS
> ? ? ? ? : ? ? ? ' '
> ? ? ? ? | ? ? ? '\t'
> ? ? ? ? { $setType(Token.SKIP); }
> ? ? ? ? ;
>
> NL ? ? ?: ? ? ? '\r''\n'
> ? ? ? ? | ? ? ? '\n'
> ? ? ? ? { $setType(Token.SKIP); }
> ? ? ? ? ;
>
> Thanks for the help.
> Ron
> *********************************************************************** 
> ***************
> This communication is intended solely for the addressee and is
> confidential. If you are not the intended recipient, any disclosure,
>  copying, distribution or any action taken or omitted to be taken in
> reliance on it, is prohibited and may be unlawful. Unless indicated
> to the contrary: it does not constitute professional advice or
> opinions upon which reliance may be made by the addressee or any
> other party, and it should be considered to be a work in progres s.
> *********************************************************************** 
> ***************
>
>
> Yahoo! Groups Links
>
> 	? 	To visit your group on the web, go to:
> http://groups.yahoo.com/group/antlr-interest/
> ?
> 	? 	 To unsubscribe from this group, send an email to:
> antlr-interest-unsubscribe@yahoogroups.com
> ?
> 	? 	 Your use of Yahoo! Groups is subject to the Yahoo! Terms of  
> Service.
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ronald.petty at milliman.com  Mon Apr 12 14:17:31 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:39 2004
Subject: [POTENTIAL SPAM - OPEN AT USER DISCRETION] Re: [antlr-interest] debugging
 and testing
In-Reply-To: <07993455-8CC7-11D8-A12A-000A95891192@cs.usfca.edu>
Message-ID: <OF96436C6D.1B329A79-ON86256E74.0074AD9E-86256E74.007536F6@milliman.com>

Did you mean that java.util.Stack should be "brought in" through the 
grammar into VB6Parser?

> ANTLR Parser Generator   Version 2.7.3   1989-2004 jGuru.com
> ./build/VB6Parser.java:41: cannot find symbol
> symbol  : class Stack
> location: class VB6Parser
>         protected Stack currentParseTreeRoot = new Stack();

Because if so, that would probably fix that error.  However if that is the 
case, the example on the site I think is missing it (I can't find import 
java.util.Stack in the grammar).

Ron



Terence Parr <parrt@cs.usfca.edu> 
04/12/2004 04:19 PM
Please respond to
antlr-interest@yahoogroups.com


To
antlr-interest@yahoogroups.com
cc

Subject
[POTENTIAL SPAM - OPEN AT USER DISCRETION] Re: [antlr-interest] debugging 
and testing 







On Apr 12, 2004, at 1:37 PM, ronald.petty@milliman.com wrote:

>
> I am trying to follow along 
> http://www.antlr.org/article/parse.trees/index.tml
>
> Do you need to do something with the classpath to get this to work? 
>  Under cygwin is

Could be that the example assumes the parse tree stuff is in the 
current directory, but it has moved inside antlr.  It seems you have 
this correctly though:

> class VB6Parser extends Parser("antlr.debug.ParseTreeDebugParser");

Hmm...Stack should be from java.util.  Is that included in the header 
{...}?

Ter

>
> $ echo $CLASSPATH
> C:/antlr-2.7.3/antlr.jar;C:/antlr-2.7.3;C:/junit3.8.1/junit.jar;C:/ 
> junit3.8.1;.
>
> I am using Sun's java, not the one from Cygwin
>
> so in my .bashrc the CLASSPATH is really
>
> export ANT_HOME="/cygdrive/c/apache-ant-1.6.1"
> export JAVA_HOME="/cygdrive/c/j2sdk1.5.0"
> export PATH=/cygdrive/c/j2sdk1.5.0/bin:${ANT_HOME}/bin:${PATH}
> export CVSROOT=/cygdrive/c/repository
> export 
> CLASSPATH="C:/antlr-2.7.3/antlr.jar;C:/antlr 
> -2.7.3;${JUNIT_HOME}${JUNIT_JAR};."
>
> I have a directory structure of
> pwd/source
> pwd/grammars
>
> When I build I do (in pwd)
> alias build='mkdir ./build; java antlr.Tool -o ./build 
> grammars/VB6Lexer.g; java antlr.Tool -o ./build grammars/VB6Parser.g; 
> javac -d ./build ./build/*.java'
>
> Before I tried in do this debugging/testing it worked, however when I 
> add the code from the example (pasted) I get.  (My grammar is below 
> the errors).
>
> ANTLR Parser Generator   Version 2.7.3   1989-2004 jGuru.com
> ANTLR Parser Generator   Version 2.7.3   1989-2004 jGuru.com
> ./build/VB6Parser.java:41: cannot find symbol
> symbol  : class Stack
> location: class VB6Parser
>         protected Stack currentParseTreeRoot = new Stack();
>                   ^
> ./build/VB6Parser.java:46: cannot find symbol
> symbol  : class ParseTreeRule
> location: class VB6Parser
>         protected ParseTreeRule mostRecentParseTreeRoot = null;
>                   ^
> ./build/VB6Parser.java:51: cannot find symbol
> symbol  : class ParseTree
> location: class VB6Parser
>         public ParseTree getParseTree() {
>                ^
> ./build/VB6Parser.java:26: cannot find symbol
> symbol  : class ParseTree
> location: class Main
> ParseTree tree = parser.getParseTree();
> ^
> ./build/VB6Parser.java:41: cannot find symbol
> symbol  : class Stack
> location: class VB6Parser
>         protected Stack currentParseTreeRoot = new Stack();
>                                                    ^
> ./build/VB6Parser.java:85: cannot find symbol
> symbol  : class ParseTreeRule
> location: class VB6Parser
>                 ParseTreeRule root = 
> (ParseTreeRule)currentParseTreeRoot.peek();
>
>                 ^
> ./build/VB6Parser.java:85: cannot find symbol
> symbol  : class ParseTreeRule
> location: class VB6Parser
>                 ParseTreeRule root = 
> (ParseTreeRule)currentParseTreeRoot.peek();
>
>                                       ^
> ./build/VB6Parser.java:86: cannot find symbol
> symbol  : class ParseTreeToken
> location: class VB6Parser
>                 ParseTreeToken tokenNode = null;
>                 ^
> ./build/VB6Parser.java:88: cannot find symbol
> symbol  : class ParseTreeToken
> location: class VB6Parser
>                         tokenNode = new ParseTreeToken(new 
> antlr.CommonToken("EO
> F"));
> .....  (more errors follow)
>
>
> options {
> }
>
> {
> import java.io.*;
>
> class Main {
>         public static void main(String[] args) {
>                 try {
>                         VB6Lexer lexer = new VB6Lexer(System.in);
>                         VB6Parser parser = new VB6Parser(lexer);
>                         parser.program();
>
> ParseTree tree = parser.getParseTree();
> System.out.println("parse tree:"+tree.toStringTree());
>
>                 } catch(Exception e) {
>                         e.printStackTrace();
>                 }
>         }
> }
> }
>
> class VB6Parser extends Parser("antlr.debug.ParseTreeDebugParser");
>
> options {
>         importVocab=VB6;
> }
>
>
> {
>         /** Each new rule invocation must have it's own subtree. 
>  Tokens
>          *  are added to the current root so we must have a stack of 
> subtree roo
> ts.
>          */
>         protected Stack currentParseTreeRoot = new Stack();
>
>         /** Track most recently created parse subtree so that when 
> parsing
>          *  is finished, we can get to the root.
>          */
>         protected ParseTreeRule mostRecentParseTreeRoot = null;
>
>         /** For every rule replacement with a production, we bump up 
> count. */
>         protected int numberOfDerivationSteps = 1; // n replacements 
> plus step 0
>
>         public ParseTree getParseTree() {
>                 return mostRecentParseTreeRoot;
>         }
>
>         public int getNumberOfDerivationSteps() {
>                 return numberOfDerivationSteps;
>         }
>
>         public void match(int i) throws MismatchedTokenException, 
> TokenStreamExc
> eption {
>                 addCurrentTokenToParseTree();
>                 super.match(i);
>         }
>
>         public void match(BitSet bitSet) throws 
> MismatchedTokenException, TokenS
> treamException {
>                 addCurrentTokenToParseTree();
>                 super.match(bitSet);
>         }
>
>         public void matchNot(int i) throws MismatchedTokenException, 
> TokenStream
> Exception {
>                 addCurrentTokenToParseTree();
>                 super.matchNot(i);
>         }
>
>         /** This adds LT(1) to the current parse subtree.  Note that 
> the match()
>          *  routines add the node before checking for correct match. 
>  This means
>          *  that, upon mismatched token, there will a token node in 
> the tree
>          *  corresponding to where that token was expected.  For no 
> viable
>          *  alternative errors, no node will be in the tree as nothing 
> was
>          *  matched() (the lookahead failed to predict an alternative).
>          */
>         protected void addCurrentTokenToParseTree() throws 
> TokenStreamException
> {
>                 if (inputState.guessing>0) {
>                         return;
>                 }
>                 ParseTreeRule root = 
> (ParseTreeRule)currentParseTreeRoot.peek();
>                 ParseTreeToken tokenNode = null;
>                 if ( LA(1)==Token.EOF_TYPE ) {
>                         tokenNode = new ParseTreeToken(new 
> antlr.CommonToken("EO
> F"));
>                 }
>                 else {
>                         tokenNode = new ParseTreeToken(LT(1));
>                 }
>                 root.addChild(tokenNode);
>         }
>
>         /** Create a rule node, add to current tree, and make it 
> current root */
>         public void traceIn(String s) throws TokenStreamException {
>                 if (inputState.guessing>0) {
>                         return;
>                 }
>                 ParseTreeRule subRoot = new ParseTreeRule(s);
>                 if ( currentParseTreeRoot.size()>0 ) {
>                         ParseTreeRule oldRoot = 
> (ParseTreeRule)currentParseTreeR
> oot.peek();
>                         oldRoot.addChild(subRoot);
>                 }
>                 currentParseTreeRoot.push(subRoot);
>                 numberOfDerivationSteps++;
>         }
>
>         /** Pop current root; back to adding to old root */
>         public void traceOut(String s) throws TokenStreamException {
>                 if (inputState.guessing>0) {
>                         return;
>                 }
>                 mostRecentParseTreeRoot = 
> (ParseTreeRule)currentParseTreeRoot.po
> p();
>         }
>
> program
>         :       (declaration)+
>         { System.out.println("Matched Something"); }
>         ;
>
> declaration
>         :       SUB
>         |       FUNCTION
>         ;
> }
>
> //Lexer
>
> class VB6Lexer extends Lexer;
>
> options {
>         exportVocab=VB6;
>         charVocabulary='\3'..'\377';
>         caseSensitive=false;
>         caseSensitiveLiterals=false;
> }
>
> tokens {
>         DIM="dim";
>         SUB="sub";
>         FUNCTION="function";
> }
>
> IDENT
> options {
>         testLiterals=true;
> }
>         :       ('a'..'z')('a'..'z'|'0'..'9'|'_')*
>         { System.out.println("found an ident"); }
>         ;
>
> WS
>         :       ' '
>         |       '\t'
>         { $setType(Token.SKIP); }
>         ;
>
> NL      :       '\r''\n'
>         |       '\n'
>         { $setType(Token.SKIP); }
>         ;
>
> Thanks for the help.
> Ron
> *********************************************************************** 
> ***************
> This communication is intended solely for the addressee and is
> confidential. If you are not the intended recipient, any disclosure,
>  copying, distribution or any action taken or omitted to be taken in
> reliance on it, is prohibited and may be unlawful. Unless indicated
> to the contrary: it does not constitute professional advice or
> opinions upon which reliance may be made by the addressee or any
> other party, and it should be considered to be a work in progres s.
> *********************************************************************** 
> ***************
>
>
> Yahoo! Groups Links
>
>                ?               To visit your group on the web, go to:
> http://groups.yahoo.com/group/antlr-interest/
>  
>                ?                To unsubscribe from this group, send an 
email to:
> antlr-interest-unsubscribe@yahoogroups.com
>  
>                ?                Your use of Yahoo! Groups is subject to 
the Yahoo! Terms of 
> Service.
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links



 




**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040412/34fabc57/attachment.html
From parrt at cs.usfca.edu  Mon Apr 12 14:30:13 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] planned enhancements to StringTemplate
Message-ID: <95839018-8CC8-11D8-A12A-000A95891192@cs.usfca.edu>

Howdy folks,

I have just defined a new project for my grad programming language  
class that significantly extends StringTemplate:

http://www.cs.usfca.edu/~parrt/course/652/projects-Spring-2004/ 
stringtemplate.html

I'm using the project as an opportunity to do a bit more research and  
planning for StringTemplate.  If you are currently playing with  
StringTemplate or have been looking at it, I'd appreciate comments  
about proposed functionality.    Matthew Ford and others have at one  
time or another suggested a few of these.

The "output grammar" format is particularly interesting. :)  Please let  
me know about the auto-indentation thing too and anything else.

Thanks,
Terence
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From robin at debreuil.com  Mon Apr 12 14:26:59 2004
From: robin at debreuil.com (Robin Debreuil)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] Re: Help with Java grammar
References: <20040311131902.GG5125@cs.utwente.nl> <c2pu85+g987@eGroups.com> <20040311155154.GJ5125@cs.utwente.nl>
Message-ID: <012101c420d4$e6743eb0$0100a8c0@xpbaby>

> So there's another easy fix e.g. limiting the charVocabulary of the lexer
> to:
>
> charVocabulary='\u0003'..'\u7FFF';
>
> And change SL_COMMENT to:
>
> SL_COMMENT
> : "//"
> (~('\n'|'\r'))* ('\n'|'\r'('\n')?)?
> {$setType(Token.SKIP); newline();}
> ;

I'm just fixing this now as well, and I was wondering if that isn't better
to be 0003-FFFE for the character set for unicode? Maybe there is something
in the way bit sets work, or something about unicode I don't understand
here, so I thought I'd ask...

Thanks, very useful post btw : ).
Robin




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Mon Apr 12 14:31:44 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] debugging and testing
In-Reply-To: <OF96436C6D.1B329A79-ON86256E74.0074AD9E-86256E74.007536F6@milliman.com>
References: <OF96436C6D.1B329A79-ON86256E74.0074AD9E-86256E74.007536F6@milliman.com>
Message-ID: <CBAC9E0E-8CC8-11D8-A12A-000A95891192@cs.usfca.edu>


On Apr 12, 2004, at 2:17 PM, ronald.petty@milliman.com wrote:

>
> Did you mean that java.util.Stack should be "brought in" through the 
> grammar into VB6Parser?
>
> > ANTLR Parser Generator ? Version 2.7.3 ? 1989-2004 jGuru.com
>  > ./build/VB6Parser.java:41: cannot find symbol
>  > symbol ?: class Stack
>  > location: class VB6Parser
>  > ? ? ? ? protected Stack currentParseTreeRoot = new Stack();
>
> Because if so, that would probably fix that error. ?However if that is 
> the case, the example on the site I think is missing it (I can't find 
> import java.util.Stack in the grammar).

Yeah, I wonder why that worked...hmm...it would seem an import is 
required.

I'll update the website per your findings when you finish. Thanks!

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From idontwantanidwith2000init at yahoo.com  Mon Apr 12 14:54:15 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] Re: planned enhancements to StringTemplate
In-Reply-To: <95839018-8CC8-11D8-A12A-000A95891192@cs.usfca.edu>
Message-ID: <c5f367+u5t9@eGroups.com>

Could you define "string template"?
In which of the files in the link there's a description of the task?

Tal.

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
wrote:
> Howdy folks,
> 
> I have just defined a new project for my grad programming 
language  
> class that significantly extends StringTemplate:
> 
> http://www.cs.usfca.edu/~parrt/course/652/projects-Spring-2004/ 
> stringtemplate.html
> 
> I'm using the project as an opportunity to do a bit more research 
and  
> planning for StringTemplate.  If you are currently playing with  
> StringTemplate or have been looking at it, I'd appreciate 
comments  
> about proposed functionality.    Matthew Ford and others have at 
one  
> time or another suggested a few of these.
> 
> The "output grammar" format is particularly interesting. :)  
Please let  
> me know about the auto-indentation thing too and anything else.
> 
> Thanks,
> Terence
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
> Cofounder, http://www.peerscope.com pure link sharing



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ronald.petty at milliman.com  Mon Apr 12 15:07:29 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] strings and vocab?
In-Reply-To: <CBAC9E0E-8CC8-11D8-A12A-000A95891192@cs.usfca.edu>
Message-ID: <OF19D4E923.35A5E1C0-ON86256E74.007816F2-86256E74.0079C9ED@milliman.com>

Alright, I give up :(.  What is the secret to Antlr, jk.  I am still 
having some trouble getting started with Antlr, and I believe most of my 
confusion comes from how strings/tokens/vocab is done.

I was reading the java.g grammar and was wonding, in the parser there is 
the rule

builtInType
        :       "void"
        |       "boolean"
        |       "byte"
        ..
        ;

Then in the Lexer there is

IDENT
options { testLiterals=true; }
        : ('a'..'z'|'A'..'Z'|'_'|'$')('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'$')*
        ;

NUM_INT
{boolean isDecimal=false; Token t=null;}
        :       '.' {_ttype=DOT;}
                (       ('0'..'9')+ (EXPONENT)? (f1:FLOAT_SUFFIX {t=f1;})?
                        {
                                ......

protected 
FLOAT_SUFFIX
        :       'f'|'F'|'d'|'D'
        ;


When the parser says, give me next token (nextToken), the Lexer will eat 
the next token based on the Lexer rules.  Now if the string "void" comes 
in, the Lexer says, let me check if there is a literal yet for this token. 
 However I do not see what is going on here.  The word "void" in the 
parser may not have been seen yet (calling builtinType).  I have read teh 
vocab document, but still don't think I understand.  I have tried using 
tokens {} and don't understand why that works.  Could someone explain 
these simple concepts?  I know I am missing something very simple here.  I 
can follow along the grammars just fine, but I don't understand real 
workings on these issues, espically how or where you check Identifiers vs. 
Keywords (I have read a dozen things, and none of them seem to explain it 
in a way I can follow).

Also does protected mean that the Lexer will never call FLOAT_SUFFIX 
directly,if it is trying to get the nextToken, it will only try to get it 
from the FLOAT_SUFFIX call in NUM_INT.  Correct?  Is this to keep similiar 
issues like (IDENT vs Keywords) from happening?

Thanks Ron

ps.  When I get this all figured out, I will write another tutorial 
hopefully documenting the same issues I have, maybe help someone one day 
:)

**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040412/aecc2fa6/attachment.html
From lgc at mail1.jpl.nasa.gov  Mon Apr 12 16:01:49 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] Re: strings and vocab?
In-Reply-To: <OF19D4E923.35A5E1C0-ON86256E74.007816F2-86256E74.0079C9ED@milliman.com>
Message-ID: <c5f74t+c5j9@eGroups.com>

This one has to be thought of in implementation terms.  For any lexer rule in which testLiterals is true:  tokens are constructed and 
then checked against a hash table of literals.  If the table contains a corresponding literal definition, then the token type is changed to 
match the literal; if not, it is given the default token type for that rule.  Note that this is independent of the parser.  I believe that the 
current implementation requires that all literals be defined in the same file as the lexer grammar.

Rules for which testLiterals=false are not checked against the hash table.  So if you have a rule
SEMI : ':' ;
and the literal ";" in the parser grammar, you will get strange results--the literal ";" has a different token type than the SEMI rule; since 
table lookup does not occur, you will never see the LITERAL_; value in the parser.

--Loring


--- In antlr-interest@yahoogroups.com, ronald.petty@m... wrote:
> Alright, I give up :(.  What is the secret to Antlr, jk.  I am still 
> having some trouble getting started with Antlr, and I believe most of my 
> confusion comes from how strings/tokens/vocab is done.
> 
> I was reading the java.g grammar and was wonding, in the parser there is 
> the rule
> 
> builtInType
>         :       "void"
>         |       "boolean"
>         |       "byte"
>         ..
>         ;
> 
> Then in the Lexer there is
> 
> IDENT
> options { testLiterals=true; }
>         : ('a'..'z'|'A'..'Z'|'_'|'$')('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'$')*
>         ;
> 
> NUM_INT
> {boolean isDecimal=false; Token t=null;}
>         :       '.' {_ttype=DOT;}
>                 (       ('0'..'9')+ (EXPONENT)? (f1:FLOAT_SUFFIX {t=f1;})?
>                         {
>                                 ......
> 
> protected 
> FLOAT_SUFFIX
>         :       'f'|'F'|'d'|'D'
>         ;
> 
> 
> When the parser says, give me next token (nextToken), the Lexer will eat 
> the next token based on the Lexer rules.  Now if the string "void" comes 
> in, the Lexer says, let me check if there is a literal yet for this token. 
>  However I do not see what is going on here.  The word "void" in the 
> parser may not have been seen yet (calling builtinType).  I have read teh 
> vocab document, but still don't think I understand.  I have tried using 
> tokens {} and don't understand why that works.  Could someone explain 
> these simple concepts?  I know I am missing something very simple here.  I 
> can follow along the grammars just fine, but I don't understand real 
> workings on these issues, espically how or where you check Identifiers vs. 
> Keywords (I have read a dozen things, and none of them seem to explain it 
> in a way I can follow).
> 
> Also does protected mean that the Lexer will never call FLOAT_SUFFIX 
> directly,if it is trying to get the nextToken, it will only try to get it 
> from the FLOAT_SUFFIX call in NUM_INT.  Correct?  Is this to keep similiar 
> issues like (IDENT vs Keywords) from happening?
> 
> Thanks Ron
> 
> ps.  When I get this all figured out, I will write another tutorial 
> hopefully documenting the same issues I have, maybe help someone one day 
> :)
> 
> **************************************************************************************
> This communication is intended solely for the addressee and is
> confidential. If you are not the intended recipient, any disclosure, 
> copying, distribution or any action taken or omitted to be taken in
> reliance on it, is prohibited and may be unlawful. Unless indicated
> to the contrary: it does not constitute professional advice or 
> opinions upon which reliance may be made by the addressee or any
> other party, and it should be considered to be a work in progress.
> **************************************************************************************



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Mon Apr 12 16:13:14 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:39 2004
Subject: New antlr-interest member
Message-ID: <1081811594.384.25523.w59@yahoogroups.com>


Hello,

This is an automated email message to let you know that
anchavesb <anchavesb@yahoo.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From parrt at cs.usfca.edu  Mon Apr 12 17:00:30 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] Re: planned enhancements to StringTemplate
In-Reply-To: <c5f367+u5t9@eGroups.com>
References: <c5f367+u5t9@eGroups.com>
Message-ID: <94100E48-8CDD-11D8-A12A-000A95891192@cs.usfca.edu>


On Apr 12, 2004, at 2:54 PM, idontwantanidwith2000init wrote:

> Could you define "string template"?
> In which of the files in the link there's a description of the task?

Sorry.  StringTemplate is an existing project I have.  Check out

http://www.stringtemplate.org

For details on it.  A nice paper describing my thoughts is referenced 
from that page.

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From idontwantanidwith2000init at yahoo.com  Mon Apr 12 17:06:40 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] Re: strings and vocab?
In-Reply-To: <c5f74t+c5j9@eGroups.com>
Message-ID: <c5faug+hue0@eGroups.com>

What if I have token that lex ';' in the lexer
and in the parser ";"
Will that work?
Would I get LITERAL_;?
Moreover, it seems like testLiterals can be set in options and in a 
lexer rule. What is it translated to? 
If I'll specify testLiterals=false in the options and in a specific 
rule I'll set it to true again then it will stay true. Is it so?
Before debugging it, what does the specification says about it?
Is there such spec? 
ANTLR is not an open source, right?

Tal.

--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> This one has to be thought of in implementation terms.  For any 
lexer rule in which testLiterals is true:  tokens are constructed 
and 
> then checked against a hash table of literals.  If the table 
contains a corresponding literal definition, then the token type is 
changed to 
> match the literal; if not, it is given the default token type for 
that rule.  Note that this is independent of the parser.  I believe 
that the 
> current implementation requires that all literals be defined in 
the same file as the lexer grammar.
> 
> Rules for which testLiterals=false are not checked against the 
hash table.  So if you have a rule
> SEMI : ':' ;
> and the literal ";" in the parser grammar, you will get strange 
results--the literal ";" has a different token type than the SEMI 
rule; since 
> table lookup does not occur, you will never see the LITERAL_; 
value in the parser.
> 
> --Loring
> 
> 
> --- In antlr-interest@yahoogroups.com, ronald.petty@m... wrote:
> > Alright, I give up :(.  What is the secret to Antlr, jk.  I am 
still 
> > having some trouble getting started with Antlr, and I believe 
most of my 
> > confusion comes from how strings/tokens/vocab is done.
> > 
> > I was reading the java.g grammar and was wonding, in the parser 
there is 
> > the rule
> > 
> > builtInType
> >         :       "void"
> >         |       "boolean"
> >         |       "byte"
> >         ..
> >         ;
> > 
> > Then in the Lexer there is
> > 
> > IDENT
> > options { testLiterals=true; }
> >         : ('a'..'z'|'A'..'Z'|'_'|'$')
('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'$')*
> >         ;
> > 
> > NUM_INT
> > {boolean isDecimal=false; Token t=null;}
> >         :       '.' {_ttype=DOT;}
> >                 (       ('0'..'9')+ (EXPONENT)? (f1:FLOAT_SUFFIX 
{t=f1;})?
> >                         {
> >                                 ......
> > 
> > protected 
> > FLOAT_SUFFIX
> >         :       'f'|'F'|'d'|'D'
> >         ;
> > 
> > 
> > When the parser says, give me next token (nextToken), the Lexer 
will eat 
> > the next token based on the Lexer rules.  Now if the 
string "void" comes 
> > in, the Lexer says, let me check if there is a literal yet for 
this token. 
> >  However I do not see what is going on here.  The word "void" in 
the 
> > parser may not have been seen yet (calling builtinType).  I have 
read teh 
> > vocab document, but still don't think I understand.  I have 
tried using 
> > tokens {} and don't understand why that works.  Could someone 
explain 
> > these simple concepts?  I know I am missing something very 
simple here.  I 
> > can follow along the grammars just fine, but I don't understand 
real 
> > workings on these issues, espically how or where you check 
Identifiers vs. 
> > Keywords (I have read a dozen things, and none of them seem to 
explain it 
> > in a way I can follow).
> > 
> > Also does protected mean that the Lexer will never call 
FLOAT_SUFFIX 
> > directly,if it is trying to get the nextToken, it will only try 
to get it 
> > from the FLOAT_SUFFIX call in NUM_INT.  Correct?  Is this to 
keep similiar 
> > issues like (IDENT vs Keywords) from happening?
> > 
> > Thanks Ron
> > 
> > ps.  When I get this all figured out, I will write another 
tutorial 
> > hopefully documenting the same issues I have, maybe help someone 
one day 
> > :)
> > 
> > 
*********************************************************************
*****************
> > This communication is intended solely for the addressee and is
> > confidential. If you are not the intended recipient, any 
disclosure, 
> > copying, distribution or any action taken or omitted to be taken 
in
> > reliance on it, is prohibited and may be unlawful. Unless 
indicated
> > to the contrary: it does not constitute professional advice or 
> > opinions upon which reliance may be made by the addressee or any
> > other party, and it should be considered to be a work in 
progress.
> > 
*********************************************************************
*****************



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From idontwantanidwith2000init at yahoo.com  Mon Apr 12 17:23:42 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] Re: planned enhancements to StringTemplate
In-Reply-To: <94100E48-8CDD-11D8-A12A-000A95891192@cs.usfca.edu>
Message-ID: <c5fbue+m3eh@eGroups.com>

Correct me if I'm wrong:
StringTemplate is a translator which translate a "model" file into 
a "code" file/s which do the jub, right?
The model file is a some kind of a "specification" of the "program" 
(maybe site...)

Is that true?

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
wrote:
> 
> On Apr 12, 2004, at 2:54 PM, idontwantanidwith2000init wrote:
> 
> > Could you define "string template"?
> > In which of the files in the link there's a description of the 
task?
> 
> Sorry.  StringTemplate is an existing project I have.  Check out
> 
> http://www.stringtemplate.org
> 
> For details on it.  A nice paper describing my thoughts is 
referenced 
> from that page.
> 
> Ter
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
> Cofounder, http://www.peerscope.com pure link sharing



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From lgc at mail1.jpl.nasa.gov  Mon Apr 12 17:34:58 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] Re: strings and vocab?
In-Reply-To: <c5faug+hue0@eGroups.com>
Message-ID: <c5fcji+dspp@eGroups.com>

What you would have to do is

SEMI
options { testLiterals = true; }
     :  ';'  ;

in the lexer.  The testLiterals flag is tested when deciding whether or not to do a table lookup, and the local option overrides the global 
option within the lexer rule.

The ANTLR manual is the specification; we might get around to having a separate spec for ANTLR 3, but I would not count on that.  
ANTLR through 2.7.x is public domain; starting with 2.8, it will be under a minimally restrictive open source license.

--Loring

--- In antlr-interest@yahoogroups.com, "idontwantanidwith2000init" <idontwantanidwith2000init@y...> wrote:
> What if I have token that lex ';' in the lexer
> and in the parser ";"
> Will that work?
> Would I get LITERAL_;?
> Moreover, it seems like testLiterals can be set in options and in a 
> lexer rule. What is it translated to? 
> If I'll specify testLiterals=false in the options and in a specific 
> rule I'll set it to true again then it will stay true. Is it so?
> Before debugging it, what does the specification says about it?
> Is there such spec? 
> ANTLR is not an open source, right?
> 
> Tal.
> 
> --- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> > This one has to be thought of in implementation terms.  For any 
> lexer rule in which testLiterals is true:  tokens are constructed 
> and 
> > then checked against a hash table of literals.  If the table 
> contains a corresponding literal definition, then the token type is 
> changed to 
> > match the literal; if not, it is given the default token type for 
> that rule.  Note that this is independent of the parser.  I believe 
> that the 
> > current implementation requires that all literals be defined in 
> the same file as the lexer grammar.
> > 
> > Rules for which testLiterals=false are not checked against the 
> hash table.  So if you have a rule
> > SEMI : ':' ;
> > and the literal ";" in the parser grammar, you will get strange 
> results--the literal ";" has a different token type than the SEMI 
> rule; since 
> > table lookup does not occur, you will never see the LITERAL_; 
> value in the parser.
> > 
> > --Loring
> > 
> > 
> > --- In antlr-interest@yahoogroups.com, ronald.petty@m... wrote:
> > > Alright, I give up :(.  What is the secret to Antlr, jk.  I am 
> still 
> > > having some trouble getting started with Antlr, and I believe 
> most of my 
> > > confusion comes from how strings/tokens/vocab is done.
> > > 
> > > I was reading the java.g grammar and was wonding, in the parser 
> there is 
> > > the rule
> > > 
> > > builtInType
> > >         :       "void"
> > >         |       "boolean"
> > >         |       "byte"
> > >         ..
> > >         ;
> > > 
> > > Then in the Lexer there is
> > > 
> > > IDENT
> > > options { testLiterals=true; }
> > >         : ('a'..'z'|'A'..'Z'|'_'|'$')
> ('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'$')*
> > >         ;
> > > 
> > > NUM_INT
> > > {boolean isDecimal=false; Token t=null;}
> > >         :       '.' {_ttype=DOT;}
> > >                 (       ('0'..'9')+ (EXPONENT)? (f1:FLOAT_SUFFIX 
> {t=f1;})?
> > >                         {
> > >                                 ......
> > > 
> > > protected 
> > > FLOAT_SUFFIX
> > >         :       'f'|'F'|'d'|'D'
> > >         ;
> > > 
> > > 
> > > When the parser says, give me next token (nextToken), the Lexer 
> will eat 
> > > the next token based on the Lexer rules.  Now if the 
> string "void" comes 
> > > in, the Lexer says, let me check if there is a literal yet for 
> this token. 
> > >  However I do not see what is going on here.  The word "void" in 
> the 
> > > parser may not have been seen yet (calling builtinType).  I have 
> read teh 
> > > vocab document, but still don't think I understand.  I have 
> tried using 
> > > tokens {} and don't understand why that works.  Could someone 
> explain 
> > > these simple concepts?  I know I am missing something very 
> simple here.  I 
> > > can follow along the grammars just fine, but I don't understand 
> real 
> > > workings on these issues, espically how or where you check 
> Identifiers vs. 
> > > Keywords (I have read a dozen things, and none of them seem to 
> explain it 
> > > in a way I can follow).
> > > 
> > > Also does protected mean that the Lexer will never call 
> FLOAT_SUFFIX 
> > > directly,if it is trying to get the nextToken, it will only try 
> to get it 
> > > from the FLOAT_SUFFIX call in NUM_INT.  Correct?  Is this to 
> keep similiar 
> > > issues like (IDENT vs Keywords) from happening?
> > > 
> > > Thanks Ron
> > > 
> > > ps.  When I get this all figured out, I will write another 
> tutorial 
> > > hopefully documenting the same issues I have, maybe help someone 
> one day 
> > > :)
> > > 
> > > 
> *********************************************************************
> *****************
> > > This communication is intended solely for the addressee and is
> > > confidential. If you are not the intended recipient, any 
> disclosure, 
> > > copying, distribution or any action taken or omitted to be taken 
> in
> > > reliance on it, is prohibited and may be unlawful. Unless 
> indicated
> > > to the contrary: it does not constitute professional advice or 
> > > opinions upon which reliance may be made by the addressee or any
> > > other party, and it should be considered to be a work in 
> progress.
> > > 
> *********************************************************************
> *****************



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Mon Apr 12 18:01:04 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:39 2004
Subject: New antlr-interest member
Message-ID: <1081818064.128.90127.w87@yahoogroups.com>


Hello,

This is an automated email message to let you know that
zuikway <cpp@zuik.net> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From notify at yahoogroups.com  Mon Apr 12 21:00:39 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:39 2004
Subject: New antlr-interest member
Message-ID: <1081828839.145.7363.w33@yahoogroups.com>


Hello,

This is an automated email message to let you know that
cblack0 <cblack0@yahoo.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From cblack0 at yahoo.com  Mon Apr 12 21:34:31 2004
From: cblack0 at yahoo.com (Chris Black)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] skip lines until pattern
Message-ID: <c5fqkn+r043@eGroups.com>

I would like to parse a file format that has a bunch of headers (that
I don't care about for the moment) and then tab seperated values. I
have parsed tab-seperated value files before without problems, but
skipping over the header is really driving me batty. I have tried
numerous things, right now I have a seperate lexer with filter=true
only matching the last line in the header and then calling a change on
the selector to move to another lexer. For some reason I am having
VERY odd behavior not matching the first newline in the header (which
is the first newline in the file). I do not know if this is the root
of my problems, but my parser never matches or prints anything.

The file looks like:
Some Space String Here
Fieldname: value with spaces or other chars [TAB] Fieldname2: value
[ a few more lines like this, not all with the same number of fields
per line]

Magic Date: Mmm dd, yyyy
start [tab]of  [tab]seperated  [tab]stuff
I     [tab]can [tab]handle     [tab]ok


Note that I don't care about anything but skipping to the line after 
the "Magic Date:" line. In theory I may want to do more with the
header data later, but at this point I've spent over four hours trying
to just skip lines properly.

Here is how I am trying to do it:
Header.g:
class HeaderLexer extends Lexer;

options {
	k = 3;
	filter=true;
}

protected
CHAR: ':' | ' ' | ',' | '_'  | '.' | '\t' | 'A'..'Z' | 'a'..'z' |
'0'..'9' ;
protected
EXPORTDATE: "Magic Date:" ;

ENDOFHEADERLINE: e:EXPORTDATE
	{ System.err.println("Found EXPORTDATE string"); }
	(.)+
	{ System.err.println("End of skip header at line " + e.getLine()); 
		Importer.selector.push("main");
	} ;
NEWLINE: ( "\r\n" // DOS
    | '\r'   // MAC
    | '\n'   // Unix
    )
    { newline(); System.err.println("NEWLINE in Header.g: " +
getLine());
    }
  ;

---
I've tried a few variations, including trying to make a (~ '\n')
class, use the CHAR class, or just use '.'.



Data.g:
class DataLexer extends Lexer;

options {
  k=2;
}

protected DOT: '.' ;
protected COLON: ':' ;
protected COMMA: ',' ;
protected HASH: '#' ;
protected SPACE: ' ' ;
protected FIELDCHAR: ('a'..'z' | 'A'..'Z' | '-'  | '0'..'9' | DOT 
	| COLON | COMMA | SPACE) ;
TAB: '\t' ;
FIELD: (FIELDCHAR)+ 
{ System.err.println("FIELD: " + "found"); }  ;
NEWLINE: ( "\r\n" // DOS
    | '\r'   // MAC
    | '\n'   // Unix
    )
    { newline(); System.err.println("data lexer NEWLINE: " +
getLine());
    }
  ;

---
Within Data.g I had a parser as well, but I've just been trying
anything to get it to print, right now it just looks like:
class DataParser extends Parser:
options {
  k=4;
  buildAST=true;
}

//contents: f:FIELD { System.err.println("found field at " +
f.getLine()); } ;
contents: n:NEWLINE { System.err.println("found newline at " +
n.getLine()); };
---
My Main.java (called Importer) does:
DataInputStream input = new DataInputStream(new FileInputStream(infile));
      HeaderLexer header = new HeaderLexer(input);
      DataLexer main = new DataLexer(header.getInputState());
      
      selector.addInputStream(header,"header");
      selector.addInputStream(main,"main");
      selector.select("header");
      System.err.println("header lexer selected");
      DataParser parser = new DataParser(selector);
      System.err.println("dataparser created/attached to selector");
      parser.contents();
      System.err.println("parser.contents called");
      System.err.flush();
---

When I run this I get output from both lexers as expected, but I can
never get the parser to print anything. I also have an odd output at
the beginning of the file:
line 1:110: expecting NEWLINE, found '
'
NEWLINE in Header.g: 3

But line 1 does not HAVE 110 characters. I've also played around with
this, ignoring newlines, and then I get an error like "line
1:27123..." but the line has less than 20000 characters. Am I
misinterpreting these error messages? Also, I have tracked down the
"expecting NEWLINE" error to the parser.

After looking at the multiLexer example, I've also tried to create a
CommonTokenTypes.txt file and import it, but I wasn't able to get that
to work either. (I could not figure out the proper way to create and
use that file from the multiLexer example).

Does anyone have any tips or a better way to skip lines of a file
until a certain pattern is matched?

Thanks in advance,
Chris




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From Matthew.Ford at forward.com.au  Mon Apr 12 13:52:22 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] Re: second lexical pass - yeah
References: <c5c3kh+pah9@eGroups.com> <c5ca12+kfql@eGroups.com> <16506.58584.608340.576669@SWAN.PSY.cmu.edu> <4176FE30-8CB5-11D8-A12A-000A95891192@cs.usfca.edu>
Message-ID: <000001c4213e$0de7f1d0$0400a8c0@NOTEBOOK>

Here is something that worked for me.
Now that I look at it I cannot rememeber why the ESC rule is like it is.
matthew
P.S. in my case  DATE and TIME were separated by white space

// Whitespace -- ignored
TAB_FORMFEED
  : ( '\t'
  | '\f'
  )
  {  _ttype = Token.SKIP; }
 ;

// Whitespace -- ignored
SPACE
  : ' '
  {  _ttype = Token.SKIP; }
 ;


NEWLINE
  : ( /* '\r' '\n' can be matched in one alternative or by matching
    '\r' in one iteration and '\n' in another.  I am trying to
    handle any flavor of newline that comes in, but the language
    that allows both "\r\n" and "\r" and "\n" to all be valid
    newline is ambiguous.  Consequently, the resulting grammar
    must be ambiguous.  I'm shutting this warning off.
    */
    options {
    generateAmbigWarnings=false;
   }
   : '\r' '\n'   // DOS
   | '\r'  // Macintosh
   | '\n' // Unix
   )  {newline();}
  { if (skipNL) {   // skip NL is skipNEWLINE() called
    _ttype = Token.SKIP;
   }
  }
;

// white space is skipped by the parser
protected
WS_SET : ( ' '
  | '\t' | '\f'
  | NEWLINE
  | ML_COMMENT
  | SL_COMMENT
  )+
  {$setType(Token.SKIP);}  // way to set token type
 ;

// Single-line comments
SL_COMMENT
 : "//"
  (~('\n'|'\r'))* NEWLINE
  {$setType(Token.SKIP);}
 ;

// multiple-line comments these are also skipped
ML_COMMENT
 : "/*"
  ( // suppress warnings about * /
   options {
    greedy = true;
   }
  : { LA(2)!='/' }? '*'
  | ~('*'|'\n'|'\r')
  | NEWLINE
  )*
  "*/"
  {$setType(Token.SKIP);}
 ;


// character literals SINGLE QUOTES around string
//CHAR_LITERAL
// : '\''! (ESC|~('\''|'\\'))* '\''!
// ;

// note must have WS between strings because "" is used for " inside string
STRING_LITERAL
  : SL_STRING_LITERAL //(WS_SET! SL_STRING_LITERAL)*
      // string concat does not work because it tries to concat anything
after
      // a string + WS_SET.
  ;

 // string literals DOUBLE QUOTES around string
 // "" => " inside double quotes.
 // can also use \"
protected
SL_STRING_LITERAL
{int i = 0;}
 : '"'! (ESC|~('"'|'\\'|'\n'))* ('"''"'! ((ESC|~('"'|'\\'|'\n')))*)*
  ('"'!
  |'\n'
   {
     if (i==0) {
      throw new TokenStreamRecognitionException(
     new RecognitionException("found newline inside string:'"+$getText+"'",
getFilename(), getLine()));
    }
   }
  )
 ;

// escape sequence -- note that this is protected; it can only be called
//   from another lexer rule -- it will not ever directly return a token to
//   the parser
// There are various ambiguities hushed in this rule.  The optional
// '0'...'9' digit matches should be matched here rather than letting
// them go back to STRING_LITERAL to be matched.  ANTLR does the
// right thing by matching immediately; hence, it's ok to shut off
// the FOLLOW ambig warnings.
protected
ESC
 : '\\'
  ( 'n' { $setText("\n");}
  | 'r' { $setText("\r");}
  | 't' { $setText("\t");}
  | 'b' { $setText("\b");}
  | 'f' { $setText("\f");}
  | '"' { $setText("\"");}
  | '\'' { $setText("\'");}
  | '\\' { $setText("\\");}
  | ('u')+ HEX_DIGIT HEX_DIGIT HEX_DIGIT HEX_DIGIT
  | ('0'..'3')
   (
    options {
     warnWhenFollowAmbig = false;
    }
   : ('0'..'9')
    (
     options {
      warnWhenFollowAmbig = false;
     }
    : '0'..'9'
    )?
   )?
  | ('4'..'7')
   (
    options {
     warnWhenFollowAmbig = false;
    }
   : ('0'..'9')
   )?
  )
 ;



// hexadecimal digit (again, note it's protected!)
protected
HEX
 : '0' 'x' (HEX_DIGIT)+
 ;

protected
HEX_DIGIT
 : ('0'..'9'|'a'..'f')
 ;


// an identifier.  Note that testLiterals is set to true!  This means
// that after we match the rule, we look in the literals table to see
// if it's a literal or really an identifer
IDENT
 options {testLiterals=true;
     paraphrase = "an identifier";}
 : ('a'..'z'|'_'|'$') ('a'..'z'|'_'|'0'..'9'|'$')*
 ;

protected
DIGIT
 : ('0'..'9')
 ;


// a numeric literal
protected
INT
 : (DIGIT)+
 ;

// signed int
//protected
//SIGNED_INT
// : ('+'|'-')?INT
// ;

// a numeric literal date, time, int, float, hex or oct
DATE_TIME_INT_FLOAT
 : (DIGIT DIGIT DIGIT DIGIT '/') => DATE {_ttype = DATE;}
 | (DIGIT (DIGIT)? ':') => TIME {_ttype = TIME;}
 | (INT '.') => FLOAT {_ttype = FLOAT;}
 | INT {_ttype = INT;}
 | ('0' 'x')=> HEX {_ttype = HEX;}
 ;

protected
FLOAT
 : INT '.' INT (EXPONENT)?
 ;

// signed float
//protected
//SIGNED_FLOAT
// : SIGNED_INT '.' INT (EXPONENT)?
// ;


protected
DATE
 : DIGIT DIGIT DIGIT DIGIT '/'
   DIGIT (DIGIT)? '/' DIGIT (DIGIT)?
 ;

protected
TIME
 : DIGIT (DIGIT)? ':'
   DIGIT (DIGIT)? ':'
   DIGIT (DIGIT)? ('.' INT)?
 ;

// need to add floating point
// a couple protected methods to assist in matching floating point numbers
protected
EXPONENT
 : ('e') ('+'|'-')? ('0'..'9')+
 ;


// should be in parser also duration

----- Original Message ----- 
From: "Terence Parr" <parrt@cs.usfca.edu>
To: <antlr-interest@yahoogroups.com>
Sent: Tuesday, April 13, 2004 5:11 AM
Subject: Re: [antlr-interest] Re: second lexical pass - yeah


>
> On Apr 12, 2004, at 11:50 AM, FranklinChen@cmu.edu wrote:
> > Is there a reason not to just do this:
> >
> > protected DATE: ...
> > protected STRING_LITERAL: ...
> >
> > DATE_OR_STRING_LITERAL
> >     : (DATE) => DATE { $setType(DATE); }
> >     | STRING_LITERAL { $setType(STRING_LITERAL); }
> >     ;
>
> This will be much slower due to the predicate for large input, but
> might work.
>
> > By the way, has anyone been seeing my messages to this list?  I've
> > posted three or four separate messages on different questions I've had
> > (one related to lexer issues).
>
> I'm behind in email as usual...sorry.
> Ter
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
> Cofounder, http://www.peerscope.com pure link sharing
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Tue Apr 13 03:15:17 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] Re: Help with Java grammar
In-Reply-To: <012101c420d4$e6743eb0$0100a8c0@xpbaby>
References: <20040311131902.GG5125@cs.utwente.nl> <c2pu85+g987@eGroups.com> <20040311155154.GJ5125@cs.utwente.nl> <012101c420d4$e6743eb0$0100a8c0@xpbaby>
Message-ID: <20040413101517.GD22550@cs.utwente.nl>

Hi,

On Mon, Apr 12, 2004 at 04:26:59PM -0500, Robin Debreuil wrote:
> I'm just fixing this now as well, and I was wondering if that isn't better
> to be 0003-FFFE for the character set for unicode? Maybe there is something
> in the way bit sets work, or something about unicode I don't understand
> here, so I thought I'd ask...

Well the charVocab is something the user might want some control over.
Alhtough antlr's way is not really suited for unicode (as I understood it)
unicode ranges can have gaps in them which also adds some more trouble.
What is mainly missing in antlr is good sanity checking for the
charVocabulary. In the future we need to have a good look at unicode and
it's problems.

> Thanks, very useful post btw : ).

Your welcome ;)

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Quidquid latine dictum sit, altum viditur.
                 (Whatever is said in Latin sounds profound.)



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From anakreonmejdi at yahoo.gr  Tue Apr 13 03:58:03 2004
From: anakreonmejdi at yahoo.gr (Anakreon)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] skip lines until pattern
In-Reply-To: <c5fqkn+r043@eGroups.com>
References: <c5fqkn+r043@eGroups.com>
Message-ID: <407BC7BB.1050007@yahoo.gr>

Chris Black wrote:
> I would like to parse a file format that has a bunch of headers (that
> I don't care about for the moment) and then tab seperated values. I
> have parsed tab-seperated value files before without problems, but
> skipping over the header is really driving me batty. I have tried
> numerous things, right now I have a seperate lexer with filter=true
> only matching the last line in the header and then calling a change on
> the selector to move to another lexer. For some reason I am having
> VERY odd behavior not matching the first newline in the header (which
> is the first newline in the file). I do not know if this is the root
> of my problems, but my parser never matches or prints anything.
> 
> The file looks like:
> Some Space String Here
> Fieldname: value with spaces or other chars [TAB] Fieldname2: value
> [ a few more lines like this, not all with the same number of fields
> per line]
> 
> Magic Date: Mmm dd, yyyy
> start [tab]of  [tab]seperated  [tab]stuff
> I     [tab]can [tab]handle     [tab]ok
> 
> 
> Note that I don't care about anything but skipping to the line after 
> the "Magic Date:" line. In theory I may want to do more with the
> header data later, but at this point I've spent over four hours trying
> to just skip lines properly.
> 
> Here is how I am trying to do it:
> Header.g:
> class HeaderLexer extends Lexer;
> 
> options {
> 	k = 3;
> 	filter=true;
> }
> 
> protected
> CHAR: ':' | ' ' | ',' | '_'  | '.' | '\t' | 'A'..'Z' | 'a'..'z' |
> '0'..'9' ;
> protected
> EXPORTDATE: "Magic Date:" ;
> 
> ENDOFHEADERLINE: e:EXPORTDATE
> 	{ System.err.println("Found EXPORTDATE string"); }
> 	(.)+
> 	{ System.err.println("End of skip header at line " + e.getLine()); 
> 		Importer.selector.push("main");
> 	} ;
> NEWLINE: ( "\r\n" // DOS
>     | '\r'   // MAC
>     | '\n'   // Unix
>     )
>     { newline(); System.err.println("NEWLINE in Header.g: " +
> getLine());
>     }
>   ;
> 
> ---
> I've tried a few variations, including trying to make a (~ '\n')
> class, use the CHAR class, or just use '.'.
> 
> 
> 
> Data.g:
> class DataLexer extends Lexer;
> 
> options {
>   k=2;
> }
> 
> protected DOT: '.' ;
> protected COLON: ':' ;
> protected COMMA: ',' ;
> protected HASH: '#' ;
> protected SPACE: ' ' ;
> protected FIELDCHAR: ('a'..'z' | 'A'..'Z' | '-'  | '0'..'9' | DOT 
> 	| COLON | COMMA | SPACE) ;
> TAB: '\t' ;
> FIELD: (FIELDCHAR)+ 
> { System.err.println("FIELD: " + "found"); }  ;
> NEWLINE: ( "\r\n" // DOS
>     | '\r'   // MAC
>     | '\n'   // Unix
>     )
>     { newline(); System.err.println("data lexer NEWLINE: " +
> getLine());
>     }
>   ;
> 
> ---
> Within Data.g I had a parser as well, but I've just been trying
> anything to get it to print, right now it just looks like:
> class DataParser extends Parser:
> options {
>   k=4;
>   buildAST=true;
> }
> 
> //contents: f:FIELD { System.err.println("found field at " +
> f.getLine()); } ;
> contents: n:NEWLINE { System.err.println("found newline at " +
> n.getLine()); };
> ---
> My Main.java (called Importer) does:
> DataInputStream input = new DataInputStream(new FileInputStream(infile));
>       HeaderLexer header = new HeaderLexer(input);
>       DataLexer main = new DataLexer(header.getInputState());
>       
>       selector.addInputStream(header,"header");
>       selector.addInputStream(main,"main");
>       selector.select("header");
>       System.err.println("header lexer selected");
>       DataParser parser = new DataParser(selector);
>       System.err.println("dataparser created/attached to selector");
>       parser.contents();
>       System.err.println("parser.contents called");
>       System.err.flush();
> ---
> 
> When I run this I get output from both lexers as expected, but I can
> never get the parser to print anything. I also have an odd output at
> the beginning of the file:
> line 1:110: expecting NEWLINE, found '
> '
> NEWLINE in Header.g: 3
> 
> But line 1 does not HAVE 110 characters. I've also played around with
> this, ignoring newlines, and then I get an error like "line
> 1:27123..." but the line has less than 20000 characters. Am I
> misinterpreting these error messages? Also, I have tracked down the
> "expecting NEWLINE" error to the parser.
> 
> After looking at the multiLexer example, I've also tried to create a
> CommonTokenTypes.txt file and import it, but I wasn't able to get that
> to work either. (I could not figure out the proper way to create and
> use that file from the multiLexer example).
> 
> Does anyone have any tips or a better way to skip lines of a file
> until a certain pattern is matched?
> 
> Thanks in advance,
> Chris
> 
> 
A simple solution is to read the file with a BufferedReader and consume all 
lines until the one which  begins with the Magic Date.Consume that line also and 
then pass the Reader to the Lexer.
It is fast to implement and will be faster then a Lexer.


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From saintiss at arklinux.org  Tue Apr 13 06:14:59 2004
From: saintiss at arklinux.org (SainTiss)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] OutOfMemory: impossible to process java comments only?
Message-ID: <200404131515.00503.saintiss@arklinux.org>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi,

I've got a serious problem here. I've got this rule in the Java grammar, which 
allows parsing of a number of java statements:

statementSequenceOnly 
	:
	(
		statement
	)*
	EOF!
;

This works fine, in general... However, when I feed the parser some input 
which just consists of a comment (so there are zero statements), I get an 
OutOfMemory error. I pinpointed the problem to the following statement in the 
generated code:
if ((_tokenSet_0.member(LA(1)))) {

More specifically, it seems there is an endless loop on LA(1).

I tried creating a rule with just EOF!, but I got the same problem. This time, 
there seemed to be an endless loop on
match(Token.EOF_TYPE);

Am I doing something wrong here?

Thanks,

Hans

- -- 
Ark Linux - Linux for the Masses (http://arklinux.org)

Capitalism: 
You don't have any cows. The bank will not lend you money to buy cows, 
because you don't have any cows to put up as collateral.

Representative Democracy:
You have two cows. Your neighbors pick someone to tell you who gets the milk. 

In a world without walls and fences, who needs windows and gates?

Hans Schippers
2LIC INF
UA 2003-2004
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3 (GNU/Linux)

iD8DBQFAe+fTXlnUYIbmLOQRAmK0AKCigggOMnFcWessJ0QsXorNu42pdACgl1Ht
l7qgGOD1P3uEkh6eBXcL3/8=
=sX9l
-----END PGP SIGNATURE-----



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ronald.petty at milliman.com  Tue Apr 13 08:05:57 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] Re: strings and vocab?
In-Reply-To: <c5f74t+c5j9@eGroups.com>
Message-ID: <OF9904AA09.40A3D35F-ON86256E75.00522F24-86256E75.00533288@milliman.com>

So in your example, if I have input "fake input ; some more fakeinput"

//parser
semi :  ";"

//lexer
SEMI    :       ';'


When it reads the ";" from the input stream SEMI is matched from the Lexer 
and not a LITERAL_;, this is because the Lexer is used first and sets the 
Token type right?

So in the end does this mean that STRING literals are just tokens also? 
The main difference is that there is no Lexer matching rule generated? And 
if there is no rule you need to test for the literal if you want to get a 
precreated Token type, correct?  So where does the Token { } field in the 
grammar come into play.  Is this just setting up more string literals?  If 
so are the Tokens sections in Lexer or Parser mean the same thing?  They 
both set up Tokens?

Ugh.  I need time to read the source code of Antlr.

Thanks for helping.
Ron





"lgcraymer" <lgc@mail1.jpl.nasa.gov> 
04/12/2004 06:01 PM
Please respond to
antlr-interest@yahoogroups.com


To
antlr-interest@yahoogroups.com
cc

Subject
[antlr-interest] Re: strings and vocab? 






This one has to be thought of in implementation terms.  For any lexer rule 
in which testLiterals is true:  tokens are constructed and 
then checked against a hash table of literals.  If the table contains a 
corresponding literal definition, then the token type is changed to 
match the literal; if not, it is given the default token type for that 
rule.  Note that this is independent of the parser.  I believe that the 
current implementation requires that all literals be defined in the same 
file as the lexer grammar.

Rules for which testLiterals=false are not checked against the hash table. 
 So if you have a rule
SEMI : ':' ;
and the literal ";" in the parser grammar, you will get strange 
results--the literal ";" has a different token type than the SEMI rule; 
since 
table lookup does not occur, you will never see the LITERAL_; value in the 
parser.

--Loring


--- In antlr-interest@yahoogroups.com, ronald.petty@m... wrote:
> Alright, I give up :(.  What is the secret to Antlr, jk.  I am still 
> having some trouble getting started with Antlr, and I believe most of my 

> confusion comes from how strings/tokens/vocab is done.
> 
> I was reading the java.g grammar and was wonding, in the parser there is 

> the rule
> 
> builtInType
>         :       "void"
>         |       "boolean"
>         |       "byte"
>         ..
>         ;
> 
> Then in the Lexer there is
> 
> IDENT
> options { testLiterals=true; }
>         : 
('a'..'z'|'A'..'Z'|'_'|'$')('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'$')*
>         ;
> 
> NUM_INT
> {boolean isDecimal=false; Token t=null;}
>         :       '.' {_ttype=DOT;}
>                 (       ('0'..'9')+ (EXPONENT)? (f1:FLOAT_SUFFIX 
{t=f1;})?
>                         {
>                                 ......
> 
> protected 
> FLOAT_SUFFIX
>         :       'f'|'F'|'d'|'D'
>         ;
> 
> 
> When the parser says, give me next token (nextToken), the Lexer will eat 

> the next token based on the Lexer rules.  Now if the string "void" comes 

> in, the Lexer says, let me check if there is a literal yet for this 
token. 
>  However I do not see what is going on here.  The word "void" in the 
> parser may not have been seen yet (calling builtinType).  I have read 
teh 
> vocab document, but still don't think I understand.  I have tried using 
> tokens {} and don't understand why that works.  Could someone explain 
> these simple concepts?  I know I am missing something very simple here. 
I 
> can follow along the grammars just fine, but I don't understand real 
> workings on these issues, espically how or where you check Identifiers 
vs. 
> Keywords (I have read a dozen things, and none of them seem to explain 
it 
> in a way I can follow).
> 
> Also does protected mean that the Lexer will never call FLOAT_SUFFIX 
> directly,if it is trying to get the nextToken, it will only try to get 
it 
> from the FLOAT_SUFFIX call in NUM_INT.  Correct?  Is this to keep 
similiar 
> issues like (IDENT vs Keywords) from happening?
> 
> Thanks Ron
> 
> ps.  When I get this all figured out, I will write another tutorial 
> hopefully documenting the same issues I have, maybe help someone one day 

> :)
> 
> 
**************************************************************************************
> This communication is intended solely for the addressee and is
> confidential. If you are not the intended recipient, any disclosure, 
> copying, distribution or any action taken or omitted to be taken in
> reliance on it, is prohibited and may be unlawful. Unless indicated
> to the contrary: it does not constitute professional advice or 
> opinions upon which reliance may be made by the addressee or any
> other party, and it should be considered to be a work in progress.
> 
**************************************************************************************



 
Yahoo! Groups Links



 




**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040413/40ed4954/attachment.html
From jean-louis.boulanger at hds.utc.fr  Tue Apr 13 09:56:38 2004
From: jean-louis.boulanger at hds.utc.fr (Boulanger Jean-Louis)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] Static =?iso-8859-1?b?ZXjpY3V0YWJsZQ==?= : cantlr
In-Reply-To: <c50d25+fimp@eGroups.com>
References: <c50d25+fimp@eGroups.com>
Message-ID: <1081875398.407c1bc6ac9b0@mail.hds.utc.fr>

Hello,

 In case of a big development with ANTLR, I try to use the static version of
ANTLR. The specific makefile from the antlr website work correctly. 
 The use of cantlr is a good idea, but when you want compil a big application
with a specific "token" (you use some specific library of ANTLR such collection
or over), you have some compilation error due to the fact that ANTLR.jar is not
in classpath.

 A solution is the generation of a static library "antlr.lib" which can be link
with your application.

 It's a good idea ? 
   If yes, someone have a specific makefile for do it ?
   If no, have you another solution ?


Sincerely

 Boulanger JL

-------------------------------------------------
Laboratoire Heudiasyc. UMR CNRS 6599
http://www.hds.utc.fr


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Tue Apr 13 11:05:14 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] Re: planned enhancements to StringTemplate
In-Reply-To: <c5fbue+m3eh@eGroups.com>
References: <c5fbue+m3eh@eGroups.com>
Message-ID: <1D119DFA-8D75-11D8-A12A-000A95891192@cs.usfca.edu>


On Apr 12, 2004, at 5:23 PM, idontwantanidwith2000init wrote:

> Correct me if I'm wrong:
> StringTemplate is a translator which translate a "model" file into
> a "code" file/s which do the jub, right?
> The model file is a some kind of a "specification" of the "program"
> (maybe site...)
>
> Is that true?

Actually, it's just a document with "holes".  You fill in the holes and 
ask the template to dump itself out with toString().  There is no spec 
file or anything of that.  Templates can be in files or in String 
objects in memory.

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From lgc at mail1.jpl.nasa.gov  Tue Apr 13 11:11:40 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] Re: strings and vocab?
In-Reply-To: <OF9904AA09.40A3D35F-ON86256E75.00522F24-86256E75.00533288@milliman.com>
Message-ID: <c5hags+okk4@eGroups.com>

--- In antlr-interest@yahoogroups.com, ronald.petty@m... wrote:
> So in your example, if I have input "fake input ; some more fakeinput"
> 
> //parser
> semi :  ";"
> 
> //lexer
> SEMI    :       ';'
> 
> 
> When it reads the ";" from the input stream SEMI is matched from the Lexer 
> and not a LITERAL_;, this is because the Lexer is used first and sets the 
> Token type right?
> 
> So in the end does this mean that STRING literals are just tokens also? 

Not quite, but close.  There has to be a rule to match characters to build the token, usually called something like TEXT or ID, and the 
literal is just a retyped one of those.

> The main difference is that there is no Lexer matching rule generated? And 

Yes for 2.x.x.  3.x will probably generate matching rules.

> if there is no rule you need to test for the literal if you want to get a 
> precreated Token type, correct?  So where does the Token { } field in the 
> grammar come into play.  Is this just setting up more string literals?  If 
> so are the Tokens sections in Lexer or Parser mean the same thing?  They 
> both set up Tokens?

That is pretty much true.

--Loring

> Ugh.  I need time to read the source code of Antlr.
> 
> Thanks for helping.
> Ron
> 
> 
> 
> 
> 
> "lgcraymer" <lgc@m...> 
> 04/12/2004 06:01 PM
> Please respond to
> antlr-interest@yahoogroups.com
> 
> 
> To
> antlr-interest@yahoogroups.com
> cc
> 
> Subject
> [antlr-interest] Re: strings and vocab? 
> 
> 
> 
> 
> 
> 
> This one has to be thought of in implementation terms.  For any lexer rule 
> in which testLiterals is true:  tokens are constructed and 
> then checked against a hash table of literals.  If the table contains a 
> corresponding literal definition, then the token type is changed to 
> match the literal; if not, it is given the default token type for that 
> rule.  Note that this is independent of the parser.  I believe that the 
> current implementation requires that all literals be defined in the same 
> file as the lexer grammar.
> 
> Rules for which testLiterals=false are not checked against the hash table. 
>  So if you have a rule
> SEMI : ':' ;
> and the literal ";" in the parser grammar, you will get strange 
> results--the literal ";" has a different token type than the SEMI rule; 
> since 
> table lookup does not occur, you will never see the LITERAL_; value in the 
> parser.
> 
> --Loring
> 
> 
> --- In antlr-interest@yahoogroups.com, ronald.petty@m... wrote:
> > Alright, I give up :(.  What is the secret to Antlr, jk.  I am still 
> > having some trouble getting started with Antlr, and I believe most of my 
> 
> > confusion comes from how strings/tokens/vocab is done.
> > 
> > I was reading the java.g grammar and was wonding, in the parser there is 
> 
> > the rule
> > 
> > builtInType
> >         :       "void"
> >         |       "boolean"
> >         |       "byte"
> >         ..
> >         ;
> > 
> > Then in the Lexer there is
> > 
> > IDENT
> > options { testLiterals=true; }
> >         : 
> ('a'..'z'|'A'..'Z'|'_'|'$')('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'$')*
> >         ;
> > 
> > NUM_INT
> > {boolean isDecimal=false; Token t=null;}
> >         :       '.' {_ttype=DOT;}
> >                 (       ('0'..'9')+ (EXPONENT)? (f1:FLOAT_SUFFIX 
> {t=f1;})?
> >                         {
> >                                 ......
> > 
> > protected 
> > FLOAT_SUFFIX
> >         :       'f'|'F'|'d'|'D'
> >         ;
> > 
> > 
> > When the parser says, give me next token (nextToken), the Lexer will eat 
> 
> > the next token based on the Lexer rules.  Now if the string "void" comes 
> 
> > in, the Lexer says, let me check if there is a literal yet for this 
> token. 
> >  However I do not see what is going on here.  The word "void" in the 
> > parser may not have been seen yet (calling builtinType).  I have read 
> teh 
> > vocab document, but still don't think I understand.  I have tried using 
> > tokens {} and don't understand why that works.  Could someone explain 
> > these simple concepts?  I know I am missing something very simple here. 
> I 
> > can follow along the grammars just fine, but I don't understand real 
> > workings on these issues, espically how or where you check Identifiers 
> vs. 
> > Keywords (I have read a dozen things, and none of them seem to explain 
> it 
> > in a way I can follow).
> > 
> > Also does protected mean that the Lexer will never call FLOAT_SUFFIX 
> > directly,if it is trying to get the nextToken, it will only try to get 
> it 
> > from the FLOAT_SUFFIX call in NUM_INT.  Correct?  Is this to keep 
> similiar 
> > issues like (IDENT vs Keywords) from happening?
> > 
> > Thanks Ron
> > 
> > ps.  When I get this all figured out, I will write another tutorial 
> > hopefully documenting the same issues I have, maybe help someone one day 
> 
> > :)
> > 
> > 
> **************************************************************************************
> > This communication is intended solely for the addressee and is
> > confidential. If you are not the intended recipient, any disclosure, 
> > copying, distribution or any action taken or omitted to be taken in
> > reliance on it, is prohibited and may be unlawful. Unless indicated
> > to the contrary: it does not constitute professional advice or 
> > opinions upon which reliance may be made by the addressee or any
> > other party, and it should be considered to be a work in progress.
> > 
> **************************************************************************************
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
> 
>  
> 
> 
> 
> 
> **************************************************************************************
> This communication is intended solely for the addressee and is
> confidential. If you are not the intended recipient, any disclosure, 
> copying, distribution or any action taken or omitted to be taken in
> reliance on it, is prohibited and may be unlawful. Unless indicated
> to the contrary: it does not constitute professional advice or 
> opinions upon which reliance may be made by the addressee or any
> other party, and it should be considered to be a work in progress.
> **************************************************************************************



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From jbfraleigh at hotmail.com  Tue Apr 13 11:58:23 2004
From: jbfraleigh at hotmail.com (jbfraleigh)
Date: Mon Dec 20 16:16:39 2004
Subject: [antlr-interest] Parser and infinite recursion... ?
Message-ID: <c5hd8f+5qi6@eGroups.com>

Hello -- 

   I was wondering if someone might be able to explain to me why code 
example 1 works (doesn't produce any error/warning messages) while 
code example 2 does not work (and hopefully how to fix it).  The 
output from code example 2 follows the code.  Note that the only 
difference occurs in "logic_1" where I've changed the definition 
from: "logic_2" to "logic_2 | logic_3."

--- Code Example 1:

logic_1	: logic_2 ;
logic_2	: (LPAREN logic_3 RPAREN) ;
logic_3	: logic_4 ((AND|OR) logic_4)* ;
logic_4	: logic_1 | if_br ;

========================

--- Code Example 2:

logic_1	: logic_2 | logic 3;
logic_2	: (LPAREN logic_3 RPAREN) ;
logic_3	: logic_4 ((AND|OR) logic_4)* ;
logic_4	: logic_1 | if_br ;

========================

--- Output from Example 2:

ANTLR Parser Generator   Version 2.7.2   1989-2003 jGuru.com
xx.g:14:21: infinite recursion to rule logic_3 from rule logic_1
xx.g:17:11: infinite recursion to rule logic_3 from rule logic_4
xx.g:16:11: infinite recursion to rule logic_3 from rule logic_3
xx.g:14:21: infinite recursion to rule logic_3 from rule logic_1
xx.g:14: warning:nondeterminism between alts 1 and 2 of block upon
xx.g:14:     k==1:LPAREN
Exiting due to errors.

========================

This should be functionally equivalent to the following code, which 
does work:

Code Example 3:

logic_1	: logic_2 ;
logic_2	: logic_3 ((AND|OR) logic_3)* ;
logic_3	: (LPAREN logic_1 RPAREN) | if_br ;

========================

Thanks in advance for any help.




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From FranklinChen at cmu.edu  Tue Apr 13 15:36:51 2004
From: FranklinChen at cmu.edu (FranklinChen@cmu.edu)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] Generating exceptions with location info
Message-ID: <16508.27523.597550.521379@SWAN.PSY.cmu.edu>

I'm parsing a language in which there are matched (and possibly
overlapping) "begin" and "end" brackets, i.e.,

      <a foo bar <b baz a> foo b>

so I have a "begin" token and an "end" token 

BEGIN : '<'! ('a'..'z')+
END: ('a'..'z')+ '>'!

and a parser that parses a "sentence" of tokens and pushes each
"begin" tag found onto a stack of seen tags and then each "end" tag
seen is checked for a matching one.  If there is a failure, I throw a
SemanticException.  So far, so good.

Problem:  I don't know how to get the current line and column numbers
from the parser, to pass to the SemanticException!  I looked at the
ANTLR source and it looks like things are protected so that I can't
get at the lexer information.  

I think it would be important to provide access and convenience methods
to location information so that user actions in a parser can generate
good error messages.

-- 
Franklin


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From lgc at mail1.jpl.nasa.gov  Tue Apr 13 23:41:46 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] Re: Parser and infinite recursion... ?
In-Reply-To: <c5hd8f+5qi6@eGroups.com>
Message-ID: <c5imfa+io6f@eGroups.com>

They aren't functionally equivalent; the derivation series

logic_1 -> logic_3 -> logic_4 -> logic_1

is possible in your example 2.

--Loring

--- In antlr-interest@yahoogroups.com, "jbfraleigh" <jbfraleigh@h...>
wrote:
> Hello -- 
> 
>    I was wondering if someone might be able to explain to me why code 
> example 1 works (doesn't produce any error/warning messages) while 
> code example 2 does not work (and hopefully how to fix it).  The 
> output from code example 2 follows the code.  Note that the only 
> difference occurs in "logic_1" where I've changed the definition 
> from: "logic_2" to "logic_2 | logic_3."
> 
> --- Code Example 1:
> 
> logic_1	: logic_2 ;
> logic_2	: (LPAREN logic_3 RPAREN) ;
> logic_3	: logic_4 ((AND|OR) logic_4)* ;
> logic_4	: logic_1 | if_br ;
> 
> ========================
> 
> --- Code Example 2:
> 
> logic_1	: logic_2 | logic 3;
> logic_2	: (LPAREN logic_3 RPAREN) ;
> logic_3	: logic_4 ((AND|OR) logic_4)* ;
> logic_4	: logic_1 | if_br ;
> 
> ========================
> 
> --- Output from Example 2:
> 
> ANTLR Parser Generator   Version 2.7.2   1989-2003 jGuru.com
> xx.g:14:21: infinite recursion to rule logic_3 from rule logic_1
> xx.g:17:11: infinite recursion to rule logic_3 from rule logic_4
> xx.g:16:11: infinite recursion to rule logic_3 from rule logic_3
> xx.g:14:21: infinite recursion to rule logic_3 from rule logic_1
> xx.g:14: warning:nondeterminism between alts 1 and 2 of block upon
> xx.g:14:     k==1:LPAREN
> Exiting due to errors.
> 
> ========================
> 
> This should be functionally equivalent to the following code, which 
> does work:
> 
> Code Example 3:
> 
> logic_1	: logic_2 ;
> logic_2	: logic_3 ((AND|OR) logic_3)* ;
> logic_3	: (LPAREN logic_1 RPAREN) | if_br ;
> 
> ========================
> 
> Thanks in advance for any help.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Tue Apr 13 23:58:36 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:40 2004
Subject: Unsubscription by antlr-interest member
Message-ID: <1081925916.544.68811.m21@yahoogroups.com>


Hello,

This is an automated email message to let you know that
agsoftwaresa <antlr@agssa.net> unsubscribed from your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a member unsubscribes.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 



From notify at yahoogroups.com  Wed Apr 14 03:53:38 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:40 2004
Subject: New antlr-interest member
Message-ID: <1081940018.125.17373.w31@yahoogroups.com>


Hello,

This is an automated email message to let you know that
oframes <benny.thornberg@mh.se> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From saintiss at arklinux.org  Wed Apr 14 05:22:38 2004
From: saintiss at arklinux.org (SainTiss)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] OutOfMemory: impossible to process java comments only?
In-Reply-To: <200404131515.00503.saintiss@arklinux.org>
References: <200404131515.00503.saintiss@arklinux.org>
Message-ID: <200404141422.41657.saintiss@arklinux.org>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi again,

It seems the problem can be circumvented by appending "\n;" to any input I 
give to the parser. This makes sense, since in that case there always is at 
least one statement, being the empty statement...

So at least it seems the problem is effectively related to the parser not 
seeing any tokens (because whitespace and comments are probably just 
discarded by the lexer?). Is it possible that this leads to the apparent 
infinite loops I'm experiencing?

Thanks,

Hans

On Tuesday 13 April 2004 15:14, SainTiss wrote:
> Hi,
>
> I've got a serious problem here. I've got this rule in the Java grammar,
> which allows parsing of a number of java statements:
>
> statementSequenceOnly
>
> 	(
> 		statement
> 	)*
> 	EOF!
> ;
>
> This works fine, in general... However, when I feed the parser some input
> which just consists of a comment (so there are zero statements), I get an
> OutOfMemory error. I pinpointed the problem to the following statement in
> the generated code:
> if ((_tokenSet_0.member(LA(1)))) {
>
> More specifically, it seems there is an endless loop on LA(1).
>
> I tried creating a rule with just EOF!, but I got the same problem. This
> time, there seemed to be an endless loop on
> match(Token.EOF_TYPE);
>
> Am I doing something wrong here?
>
> Thanks,
>
> Hans

- -- 
Ark Linux - Linux for the Masses (http://arklinux.org)

Capitalism: 
You don't have any cows. The bank will not lend you money to buy cows, 
because you don't have any cows to put up as collateral.

Representative Democracy:
You have two cows. Your neighbors pick someone to tell you who gets the milk. 

In a world without walls and fences, who needs windows and gates?

Hans Schippers
2LIC INF
UA 2003-2004
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3 (GNU/Linux)

iD8DBQFAfS0RXlnUYIbmLOQRAoYwAKCC3XBMc/9gkeYFPiFA/rwMpnlh0QCeNn+W
NlgLEV2cJFg6uAfpOehqomU=
=Hs1n
-----END PGP SIGNATURE-----



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Wed Apr 14 08:58:13 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] Re: would anybody object to a 2.7.4 version?
In-Reply-To: <200404081337.IAA32712@coral.propagation.net>
References: <20040408090621.GG26357@cs.utwente.nl> <200404081337.IAA32712@coral.propagation.net>
Message-ID: <20040414155813.GE28546@cs.utwente.nl>

Hi,

Not sure if I answered this...

On Thu, Apr 08, 2004 at 09:37:24AM -0400, Tom Zagotta wrote:
> We have made some minor changes to 2.7.3 to support Borland C++Builder 6 -
> can we submit these to you for inclusion in 2.7.4?

Send them to me and I'll see if I can find some time to include them.
Unified diff and/or changed files are preferred.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Quidquid latine dictum sit, altum viditur.
                 (Whatever is said in Latin sounds profound.)



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Wed Apr 14 11:46:01 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] Java.g grammar issues & potential fix
In-Reply-To: <c50d25+fimp@eGroups.com>
References: <c50d25+fimp@eGroups.com>
Message-ID: <F9A9CB0E-8E43-11D8-A12A-000A95891192@cs.usfca.edu>


On Apr 7, 2004, at 1:10 AM, Vincent Mallet wrote:
>  1. the grammar won't accept octal-looking floats or doubles
>     (09d for example)
>  2. the grammar will accept hexadecimal numbers with a fractional
>     part (0x12.34 for example)
>
> I have seen a fix for problem #1 in java.g version 1.21-october-2003
> but #2 is definitely broken.
>
> In an attempt to clarify that part of the grammar I came up with a
> version of the NUM_INT lexer rule which seems to be more correct and
> potentially easier to read (indentation might need some work).


>
> If you have an opinion on the new rule I would love to hear it.
>

It seems easier to read, but you've added a syntactic predicate that 
will execute upon every numeric value I think.  Given that this could 
cause lots of exceptions, I'm guessing it would seriously degrade the 
lexer's speed (probably bad as it is). ;)

It is often the case that being super precise in the grammar can cost 
you.  Probably best to leave this syntactic hole as there are always 
holes like this.


Regards,
Terence
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Wed Apr 14 12:04:28 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] antlr 2.7.4 release candidate 1 available
Message-ID: <8DD6C060-8E46-11D8-A12A-000A95891192@cs.usfca.edu>

Howdy folks,

To fix some C++ build issues and some C# improvements, I'm releasing 
2.7.4 :)  Please check this out to see if there are problems.

C# fixes and (hopefully a C++ change list shortly):

http://www.antlr.org/blog/CHANGES-2.7.4.txt

Here is the download:

http://www.antlr.org/download/antlr-2.7.4rc1.tar.gz

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From idontwantanidwith2000init at yahoo.com  Wed Apr 14 11:49:41 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] Re: Parser and infinite recursion... ?
In-Reply-To: <c5hd8f+5qi6@eGroups.com>
Message-ID: <c5k145+6hhf@eGroups.com>

It depends upon the parser algorithem:
If it is a top down alg. 
for example it might try the left nonterminal rule until it reaches 
the first terminal.
As you can see the first set of rules do not have left recursion.

Tal.


--- In antlr-interest@yahoogroups.com, "jbfraleigh" 
<jbfraleigh@h...> wrote:
> Hello -- 
> 
>    I was wondering if someone might be able to explain to me why 
code 
> example 1 works (doesn't produce any error/warning messages) while 
> code example 2 does not work (and hopefully how to fix it).  The 
> output from code example 2 follows the code.  Note that the only 
> difference occurs in "logic_1" where I've changed the definition 
> from: "logic_2" to "logic_2 | logic_3."
> 
> --- Code Example 1:
> 
> logic_1	: logic_2 ;
> logic_2	: (LPAREN logic_3 RPAREN) ;
> logic_3	: logic_4 ((AND|OR) logic_4)* ;
> logic_4	: logic_1 | if_br ;
> 
> ========================
> 
> --- Code Example 2:
> 
> logic_1	: logic_2 | logic 3;
> logic_2	: (LPAREN logic_3 RPAREN) ;
> logic_3	: logic_4 ((AND|OR) logic_4)* ;
> logic_4	: logic_1 | if_br ;
> 
> ========================
> 
> --- Output from Example 2:
> 
> ANTLR Parser Generator   Version 2.7.2   1989-2003 jGuru.com
> xx.g:14:21: infinite recursion to rule logic_3 from rule logic_1
> xx.g:17:11: infinite recursion to rule logic_3 from rule logic_4
> xx.g:16:11: infinite recursion to rule logic_3 from rule logic_3
> xx.g:14:21: infinite recursion to rule logic_3 from rule logic_1
> xx.g:14: warning:nondeterminism between alts 1 and 2 of block upon
> xx.g:14:     k==1:LPAREN
> Exiting due to errors.
> 
> ========================
> 
> This should be functionally equivalent to the following code, 
which 
> does work:
> 
> Code Example 3:
> 
> logic_1	: logic_2 ;
> logic_2	: logic_3 ((AND|OR) logic_3)* ;
> logic_3	: (LPAREN logic_1 RPAREN) | if_br ;
> 
> ========================
> 
> Thanks in advance for any help.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Wed Apr 14 19:08:53 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:40 2004
Subject: New antlr-interest member
Message-ID: <1081994933.154.33739.w28@yahoogroups.com>


Hello,

This is an automated email message to let you know that
jpschewe <jpschewe@mtu.net> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From vikuma at yahoo.com  Wed Apr 14 19:14:36 2004
From: vikuma at yahoo.com (VijayaKumar P)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] (unknown)
Message-ID: <c5kr6c+uhe9@eGroups.com>

Hi,

just started to learn ANTLR in VC++.

Currently the Parser/Scanner generated using ANTLR 
takes the filename as input.

Is it possible to pass a "string" instead of "filename"  ?

How can I do this in C++?

Thanks for your help
-vijay





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Wed Apr 14 20:16:36 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:40 2004
Subject: New antlr-interest member
Message-ID: <1081998996.121.44539.w79@yahoogroups.com>


Hello,

This is an automated email message to let you know that
o_sukhodolsky <son@sparc.spb.su> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From notify at yahoogroups.com  Thu Apr 15 00:58:41 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:40 2004
Subject: New antlr-interest member
Message-ID: <1082015921.111.17282.w66@yahoogroups.com>


Hello,

This is an automated email message to let you know that
cecileisima <cecileisima@yahoo.fr> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From klaren at cs.utwente.nl  Thu Apr 15 02:02:31 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] (unknown)
In-Reply-To: <c5kr6c+uhe9@eGroups.com>
References: <c5kr6c+uhe9@eGroups.com>
Message-ID: <20040415090230.GA2714@cs.utwente.nl>

On Thu, Apr 15, 2004 at 02:14:36AM -0000, VijayaKumar P wrote:
> Is it possible to pass a "string" instead of "filename"  ?

Check out the calc example.

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     "Never argue with an idiot, for they will bring you down to their
              level and beat you with experience." --- Unknown



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From j.klaren at utwente.nl  Thu Apr 15 02:34:02 2004
From: j.klaren at utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] antlr 2.7.4 release candidate 1 available
In-Reply-To: <8DD6C060-8E46-11D8-A12A-000A95891192@cs.usfca.edu>
References: <8DD6C060-8E46-11D8-A12A-000A95891192@cs.usfca.edu>
Message-ID: <20040415093402.GB2714@cs.utwente.nl>

Hi,

On Wed, Apr 14, 2004 at 12:04:28PM -0700, Terence Parr wrote:
> C# fixes and (hopefully a C++ change list shortly):

C++ changes:

- Fixed content comments for lexer bitsets.
- Removed superfluous namespace #ifdef for MSVC7+ from config.hpp
- Fixed configure build for missing files with '$' in the name in the
  generated jar.
- Rewrote handling of strings coming from ANTLR's lexer. Added a dequote
  and requote step. This should fix the last sign extension problems in code
  generated for match/matchRange and creative quoting/escaping by the user.
- Barf on multibyte strings coming from the ANTLR lexer.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Chaos is found in greatest abundance wherever order is being sought.
  --- Terry Pratchet

From klaren at cs.utwente.nl  Thu Apr 15 02:34:02 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] antlr 2.7.4 release candidate 1 available
In-Reply-To: <8DD6C060-8E46-11D8-A12A-000A95891192@cs.usfca.edu>
References: <8DD6C060-8E46-11D8-A12A-000A95891192@cs.usfca.edu>
Message-ID: <20040415093402.GB2714@cs.utwente.nl>

Hi,

On Wed, Apr 14, 2004 at 12:04:28PM -0700, Terence Parr wrote:
> C# fixes and (hopefully a C++ change list shortly):

C++ changes:

- Fixed content comments for lexer bitsets.
- Removed superfluous namespace #ifdef for MSVC7+ from config.hpp
- Fixed configure build for missing files with '$' in the name in the
  generated jar.
- Rewrote handling of strings coming from ANTLR's lexer. Added a dequote
  and requote step. This should fix the last sign extension problems in code
  generated for match/matchRange and creative quoting/escaping by the user.
- Barf on multibyte strings coming from the ANTLR lexer.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Chaos is found in greatest abundance wherever order is being sought.
  --- Terry Pratchet



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From son at sparc.spb.su  Thu Apr 15 03:19:05 2004
From: son at sparc.spb.su (Oleg N. Sukhodolsky)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] garmmar inheritance problem
Message-ID: <20040415101905.GC4364@sparc.spb.su>

Hi,

I've found some problems with grammar inheritance and I wonder
if they are bugs or features.  And if they are features is there are 
any workaround for them.

The problem is as follows:
I get java.g grammar from examples and create java14.g to add assert statement.
For this reason in java.g I rename statement to traditionalStatement and 
add rule:
statement : traditionalStatement;

in  java14.g I change rule for statement:
statement
	:	traditionalStatement
	|	assertStatement
	;
And add:
assertStatement
	:	"assert"^ expression ( COLON expression )? SEMI
	;

here is the first problem after compilation "assert" is not added to 
keywords hash and so lexer consider it as IDENT.
I can workaround it if I add token ASSERT to lexer and will use it in the
rule:
assertStatement
	:	ASSERT^ expression ( COLON expression )? SEMI
	;

class Java14Lexer extends JavaLexer;
...
tokens {
        ASSERT="assert";
}

Althought, this works until I add some new tokens to recognizer.  In this case
"assert" will be added to the hash with wrong id.  And this is second problem.

And the third problem is that if I want extends 14 recognizer to add 15 features
then Java15Lexer doesnt have "assert" in the keywords hash until I specify it
explicitly (but in this case it will have wrong id).

I've tested this with antlr 2.7.(2|3|4rc1).

So, the questions are:
1. Are these problems bugs or not?
2. if these are features is there any way to workaround them?

Thanks in advance, Oleg.

P.S. here are java14.g and java15.g
----- java14.g ------------
class Java14Recognizer extends JavaRecognizer;

// Options don't get inherited, copy of option block required.
options {
	k = 2;                           // two token lookahead
	exportVocab=Java14;     // Call its vocabulary "GeneratedJava14"
	codeGenMakeSwitchThreshold = 2;  // Some optimizations
	codeGenBitsetTestThreshold = 3;
	defaultErrorHandler = false;     // Don't generate parser error handlers
	buildAST = true;
}

// overrides the statement production in java.g, adds assertStatement
statement
	:	traditionalStatement
	|	assertStatement
	;

// assert statement, available since JDK 1.4
assertStatement
	:	ASSERT^ expression ( COLON expression )? SEMI
	;

class Java14Lexer extends JavaLexer;

options {
	exportVocab=Java14;    // call the vocabulary "Java14",
	testLiterals=false;    // don't automatically test for literals
	k=4;                   // four characters of lookahead
	charVocabulary='\u0003'..'\uFFFE';
	codeGenBitsetTestThreshold=20;
}

tokens {
        ASSERT="assert";
}

protected
FLOAT_SUFFIX
	:	'f'|'F'|'d'|'D'
	;
----- java14.g ------------
----- java15.g ------------
class Java15Recognizer extends Java14Recognizer;

// Options don't get inherited, copy of option block required.
options {
	k = 2;                           // two token lookahead
	exportVocab=Java15;     // Call its vocabulary "GeneratedJava15"
	codeGenMakeSwitchThreshold = 2;  // Some optimizations
	codeGenBitsetTestThreshold = 3;
	defaultErrorHandler = false;     // Don't generate parser error handlers
	buildAST = true;
}

// just some statement
statement
	:	traditionalStatement
	|	assertStatement
	;

class Java15Lexer extends Java14Lexer;

options {
	exportVocab=Java15;    // call the vocabulary "Java15",
	testLiterals=false;    // don't automatically test for literals
	k=4;                   // four characters of lookahead
	charVocabulary='\u0003'..'\uFFFE';
	codeGenBitsetTestThreshold=20;
}

protected
FLOAT_SUFFIX
	:	'f'|'F'|'d'|'D'
	;
----- java15.g ------------



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From computa_mike at hotmail.com  Thu Apr 15 04:07:46 2004
From: computa_mike at hotmail.com (Mike Hingley)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] grammar help please.
Message-ID: <c5lqe2+63ra@eGroups.com>

Hi - 

I am trying to define a grammer for a 15 digit number.

I realise that i could do something like this :

('0'..'9' '0'..'9'..........)

15 odd times, however I was wondering if there was a nicer notation 
so that it looked a little more like this :

('0'..'9')+{15}

or whatever.


Anyone got any ideas?

thanks

Mike



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Thu Apr 15 04:14:19 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:40 2004
Subject: New antlr-interest member
Message-ID: <1082027659.254.37762.w67@yahoogroups.com>


Hello,

This is an automated email message to let you know that
rui_maranhao <rui@obando.org> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From jbfraleigh at hotmail.com  Thu Apr 15 04:23:14 2004
From: jbfraleigh at hotmail.com (jbfraleigh)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] AST Stuff
Message-ID: <c5lrb2+m0s@eGroups.com>

Hi Again, 

    First - Thanks for all of the support that I've been receiving on 
this forum.  I'm still new to Antlr and have so much to learn!

    Anyway, on to the question.  In reviewing a parser, I found the 
following rule:

condition	: actualParameter conditionOperator actualParameter
                  { ##  = #(#[CONDITION] , ##) ; } 

I've read through the Antlr documentation several times and I've 
looked at the code generated by this, but I still can't get a good 
handle on exactly what it's doing.

Can someone please explain to me what this does?
  { ##  = #(#[CONDITION] , ##) ; }

Thanks, 

Andy




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Thu Apr 15 04:33:17 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] AST Stuff
In-Reply-To: <c5lrb2+m0s@eGroups.com>
References: <c5lrb2+m0s@eGroups.com>
Message-ID: <20040415113317.GE2714@cs.utwente.nl>

On Thu, Apr 15, 2004 at 11:23:14AM -0000, jbfraleigh wrote:
> I've read through the Antlr documentation several times and I've 
> looked at the code generated by this, but I still can't get a good 
> handle on exactly what it's doing.
> 
> Can someone please explain to me what this does?
>   { ##  = #(#[CONDITION] , ##) ; }

## is basically a shorthand for #rule_name. This piece of code inserts an
AST node of type CONDITION on top of the tree generated so far for the
rule. It's a very common construct for adding imaginary nodes to the top of
specific subtrees so they're easier to recognize in treewalkers.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 'And this 'rebooting' business? Give it a good kicking, do you?' 'Oh, no,
  of course, we ... that is ... well, yes, in fact,' said Ponder. 'Adrian
    goes round the back and ... er ... prods it with his foot. But in a
     technical way,' he added. --- From: Hogfather by Terry Pratchett.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From rui at obando.org  Thu Apr 15 04:17:34 2004
From: rui at obando.org (rui_maranhao)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] ASN.1 parser
Message-ID: <c5lr0e+gnqt@eGroups.com>

Does anyone know of a free tool to parse ASN.1:2002?
I am doing one from the scratch... and the grammar is a lot ambiguous :S




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From jpschewe at mtu.net  Thu Apr 15 05:53:31 2004
From: jpschewe at mtu.net (Jon Schewe)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] garmmar inheritance problem
In-Reply-To: <20040415101905.GC4364@sparc.spb.su>
References: <20040415101905.GC4364@sparc.spb.su>
Message-ID: <1082033611.26247.27.camel@workstation.mn.mtu.net>

Skipped content of type multipart/mixed-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 198 bytes
Desc: This is a digitally signed message part
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20040415/2a1374ad/attachment.bin
From a_w_abate at yahoo.com  Thu Apr 15 08:12:44 2004
From: a_w_abate at yahoo.com (a_w_abate)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] Nondeterminism
Message-ID: <c5m8pc+hi1f@eGroups.com>

Is it normal to receive several (7) messages about nondeterminism 
but still have the emitted parser/lexer do exactly what you want? I 
see quite a few posts about how to remove them but is that really 
necessary?




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Thu Apr 15 08:50:41 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:40 2004
Subject: New antlr-interest member
Message-ID: <1082044241.130.43389.w10@yahoogroups.com>


Hello,

This is an automated email message to let you know that
zzhao86 <zzhao86@yahoo.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From lgc at mail1.jpl.nasa.gov  Thu Apr 15 10:36:51 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] Re: ASN.1 parser
In-Reply-To: <c5lr0e+gnqt@eGroups.com>
Message-ID: <c5mh7j+skcv@eGroups.com>

Check out Vivek Gupta's ASN grammar at

http://www.antlr.org/grammar/list

(about the middle of the page.

--Loring


--- In antlr-interest@yahoogroups.com, "rui_maranhao" <rui@o...> wrote:
> Does anyone know of a free tool to parse ASN.1:2002?
> I am doing one from the scratch... and the grammar is a lot ambiguous :S



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Thu Apr 15 11:45:32 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] Better support for tracing
In-Reply-To: <20040415093402.GB2714@cs.utwente.nl>
References: <8DD6C060-8E46-11D8-A12A-000A95891192@cs.usfca.edu> <20040415093402.GB2714@cs.utwente.nl>
Message-ID: <132AC833-8F0D-11D8-9DFE-000393B5606C@codetransform.com>

Pardon me if this has been discussed before.  Debugging my tree parser 
I decided to override match() to help me see what is going on inside of 
the rule.  (See below for C++ code)

I think it would be handy to have a #define TRACE_TREE_PARSER generated 
into my SqlTreeParser.hpp so I can avoid forgetting to remove the code 
before delivery.

For Java we might have a final constant defined so we could gate print 
statements.

Comments?

void SqlTreeParser::match(ANTLR_USE_NAMESPACE(antlr)RefAST t, int ttype)
{
	traceIndent();
	
	if (!t || t==ASTNULL || t->getType()!=ttype)
	{
		ANTLR_USE_NAMESPACE(std)cout << "mismatch(" << t->getType() << ", "<< 
ttype <<")"<< ANTLR_USE_NAMESPACE(std)endl;
		throw ANTLR_USE_NAMESPACE(antlr)MismatchedTokenException();
	}		
	ANTLR_USE_NAMESPACE(std)cout << "match(" << ttype <<")"<< 
ANTLR_USE_NAMESPACE(std)endl;
}

Monty
ANTLR consulting
www.codetransform.com



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Thu Apr 15 12:00:05 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:40 2004
Subject: Unsubscription by antlr-interest member
Message-ID: <1082055605.419.51255.m22@yahoogroups.com>


Hello,

This is an automated email message to let you know that
robinsonl1982 <misc@leerobinson.f9.co.uk> unsubscribed from your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a member unsubscribes.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Thu Apr 15 12:41:38 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] Re: Better support for tracing
In-Reply-To: <132AC833-8F0D-11D8-9DFE-000393B5606C@codetransform.com>
Message-ID: <c5mohi+jm9n@eGroups.com>

Monty--

I've been meaning to add a flag to do conditional tracing for 2.8 to tune the ParseTreeDebug stuff, so I'll just add the #ifdefs to the C++ 
code generation as well.

--Loring


--- In antlr-interest@yahoogroups.com, Monty Zukowski <monty@c...> wrote:
> Pardon me if this has been discussed before.  Debugging my tree parser 
> I decided to override match() to help me see what is going on inside of 
> the rule.  (See below for C++ code)
> 
> I think it would be handy to have a #define TRACE_TREE_PARSER generated 
> into my SqlTreeParser.hpp so I can avoid forgetting to remove the code 
> before delivery.
> 
> For Java we might have a final constant defined so we could gate print 
> statements.
> 
> Comments?
> 
> void SqlTreeParser::match(ANTLR_USE_NAMESPACE(antlr)RefAST t, int ttype)
> {
> 	traceIndent();
> 	
> 	if (!t || t==ASTNULL || t->getType()!=ttype)
> 	{
> 		ANTLR_USE_NAMESPACE(std)cout << "mismatch(" << t->getType() << ", "<< 
> ttype <<")"<< ANTLR_USE_NAMESPACE(std)endl;
> 		throw ANTLR_USE_NAMESPACE(antlr)MismatchedTokenException();
> 	}		
> 	ANTLR_USE_NAMESPACE(std)cout << "match(" << ttype <<")"<< 
> ANTLR_USE_NAMESPACE(std)endl;
> }
> 
> Monty
> ANTLR consulting
> www.codetransform.com



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From mailinglist at august.de  Thu Apr 15 13:26:45 2004
From: mailinglist at august.de (Rolf Schumacher)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] newbie question
In-Reply-To: <A86AFC58-8A47-11D8-AD73-000393BB647E@cs.usfca.edu>
References: <40766A83.7020104@august.de> <A86AFC58-8A47-11D8-AD73-000393BB647E@cs.usfca.edu>
Message-ID: <407EF005.5080903@august.de>

Thx, missed that bit.

Rolf

p.s.--------------
this does the job now
- -------------------
class WikiParser extends Parser;

text : ( LINE )+
~ ;

class WikiLexer extends Lexer;
options { charVocabulary = '\u0000' .. '\u00ff'; }
//if you put '\uffff' here instead "it would wind up generating huge
lexers"

protected
LINECHAR
~ :
~ ~'\n'
~ ;
LINE
~ :
~ (LINECHAR)+ {System.out.println(getText());}
~ ;
WS : '\n'
~ { _ttype = Token.SKIP; newline(); }
~ ;





Terence Parr wrote:

| On Apr 9, 2004, at 2:18 AM, Rolf Schumacher wrote:
|
|> Even though I solved my problem I'd like to be able to understand
|> 'why':
|>
|> Why this rule does not work?:
|>
|> LINECHAR: ~'\n';
|>
|> while this is working:
|>
|> LINECHAR: '\u0000'..'\u0009' | '\u000b'..'\uffff';
|>
|> I would expect identical behavior from both lexer rules. The
|> answer must be simple, though I read several days thru the docs
|> and could not find it. Can you help me?
|
|
| Hi Rolf,
|
| You need to specify a charVocabulary option so that the "not"
| operator makes sense. :)
|
| Terence
|
|> Rolf
|>
|> p.s. --------------- The full story: this works:
|> -------------------- class WParser extends Parser; text : (
|> LINE )+ ;
|>
|> class WLexer extends Lexer; protected LINECHAR:
|> '\u0000'..'\u0009' | '\u000b'..'\uffff' // putting ~'\n' here
|> does not work, why?? ; LINE : (LINECHAR)+
|> {System.out.println(getText());} ; WS : '\n' { _ttype =
|> Token.SKIP; newline(); } ;
|>
|>
|
|
|
|
|
|
| Yahoo! Groups Links
|
|
|
|
|
|
|
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 1730 bytes
Desc: S/MIME Cryptographic Signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20040415/f74ce073/smime.bin
From mailinglist at august.de  Thu Apr 15 13:28:05 2004
From: mailinglist at august.de (Rolf Schumacher)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] Re: 3 curly brackets commet
In-Reply-To: <c5eq3i+eueq@eGroups.com>
References: <c5eq3i+eueq@eGroups.com>
Message-ID: <407EF055.8060507@august.de>

As far as I can see, this might have a dangeling '}' in cases like

{{{ int a[] = { 1,2,3 } }}}

Rolf

idontwantanidwith2000init wrote:

>How about:
>
>CURLY_COMMENT: '{'(WHITE_SPACE)'{'(WHITE_SPACE*'{'COMMENT'}'(WHITE_SP
>ACE)*'}'(WHITE_SPACE)*'}'
>
>
>--- In antlr-interest@yahoogroups.com, mailinglist@a... wrote:
>  
>
>> How would you detect a comment block that is enclosed in 3 curly 
>>    
>>
>brackets?
>  
>
>>e.g.:
>>1. {{{}}} or
>>2. {{{ comment }}} or
>>3. {{{} }}} or
>>4. {{{}} }}} ...
>>
>>My solution leads to "lexical nondeterminism" though it 
>>    
>>
>functions ...
>  
>
>>options { k=3; charVocabulary = '\u0020' .. '\u007e';}
>>CMT: "{{{"
>>        (
>>            {LA(3)!='}'}?   "}}"
>>        |   {LA(2)!='}'}?   '}'
>>        |                           ~'}'
>>        )*
>>        "}}}";
>>
>>... but as I'm new to antlr I'm not quite sure what I'm doing here.
>>Avoiding "lexical nondeterminism" as a general advice seems to be 
>>    
>>
>helpful.
>  
>
>>Would like to keep the goal, not to see this warning.
>>
>>Any idea better than adding warnWhenFollowAmbig option?
>>
>>Rolf
>>    
>>
>
>
>
> 
>Yahoo! Groups Links
>
>
>
> 
>
>
>
>  
>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 1730 bytes
Desc: S/MIME Cryptographic Signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20040415/a9c59236/smime.bin
From mailinglist at august.de  Thu Apr 15 13:29:39 2004
From: mailinglist at august.de (Rolf Schumacher)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] 3 curly brackets commet
In-Reply-To: <E5C82168-8CAC-11D8-A12A-000A95891192@cs.usfca.edu>
References: <33273.80.129.139.18.1081784882.squirrel@webimap.myhosting.de> <E5C82168-8CAC-11D8-A12A-000A95891192@cs.usfca.edu>
Message-ID: <407EF0B3.1020808@august.de>

This solves this thing, thanks for help Terence.

Unfortunatelly it takes me only one step further.
Please look at my question 'part of comment-open in regular text'.

Rolf

Terence Parr wrote:

>On Apr 12, 2004, at 8:48 AM, mailinglist@august.de wrote:
>
>  
>
>> How would you detect a comment block that is enclosed in 3 curly 
>>brackets?
>>e.g.:
>>1. {{{}}} or
>>2. {{{ comment }}} or
>>3. {{{} }}} or
>>4. {{{}} }}} ...
>>
>>My solution leads to "lexical nondeterminism" though it functions ...
>>
>>options { k=3; charVocabulary = '\u0020' .. '\u007e';}
>>CMT: "{{{"
>>        (
>>            {LA(3)!='}'}?   "}}"
>>        |   {LA(2)!='}'}?   '}'
>>        |                           ~'}'
>>        )*
>>        "}}}";
>>
>>... but as I'm new to antlr I'm not quite sure what I'm doing here.
>>Avoiding "lexical nondeterminism" as a general advice seems to be 
>>helpful.
>>Would like to keep the goal, not to see this warning.
>>
>>Any idea better than adding warnWhenFollowAmbig option?
>>    
>>
>
>Hi Rolf,
>
>I suggest using greedy=false option:
>
>CMT : "{{{" (options {greedy=false;} : . )* "}}}" ;
>
>with k=3, this should function as you would like :)  Clean too :)
>
>Ter
>--
>Professor Comp. Sci., University of San Francisco
>Creator, ANTLR Parser Generator, http://www.antlr.org
>Cofounder, http://www.jguru.com
>Cofounder, http://www.knowspam.net enjoy email again!
>Cofounder, http://www.peerscope.com pure link sharing
>
>
>
>
>
> 
>Yahoo! Groups Links
>
>
>
> 
>
>
>
>  
>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 1730 bytes
Desc: S/MIME Cryptographic Signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20040415/0364d25d/smime.bin
From mailinglist at august.de  Thu Apr 15 13:32:51 2004
From: mailinglist at august.de (Rolf Schumacher)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] part of comment-open in regular text
Message-ID: <407EF173.4020406@august.de>

While using the option 'greedy' the first time I solve (and understood)
one problem,
but generated me a new one:

How to match a k=2 left part of the comment-opening string as regular 
text in case this is not a comment-open string?

Rolf

---------
The appended gramma leads to 'nondeterminism'
between comments (CMT) and the rest (TEXT).
Do you know how to avoid that?
---------
class BParser extends Parser;

blocks: ( TEXT | CMT )+;

class BLexer extends Lexer;
options {
     k=3;
     charVocabulary = '\u000a' | '\u0020' .. '\u007e';
}

CMT
     :   "{{{"
         (   options { greedy=false; }
             :   '\n' { newline(); }
             |   .
         )*
         "}}}"
         {System.out.println("["+getText()+"]");}
     ;
WS
     :   (   ' '
         |   '\n' { newline(); }
         )
         { _ttype = Token.SKIP; }
     ;
protected TEXTCHAR
     :   '\u0021'..'\u007a'
     |   (   { LA(2) != '{' }? '{'
         |   { LA(3) != '{' }? "{{"
         )
     |   '\u007c'..'\u007e'
     ;
TEXT
     :   ( TEXTCHAR )+ {System.out.println(">"+getText()+"<");}
     ;

By the way: I wasn't able to include the usual DOS-MAC-end-of-line
syntax in CMT in order to maintain newline() in those cases as well.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 1730 bytes
Desc: S/MIME Cryptographic Signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20040415/18452ee8/smime.bin
From idontwantanidwith2000init at yahoo.com  Thu Apr 15 13:55:40 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] Re: 3 curly brackets commet
In-Reply-To: <407EF055.8060507@august.de>
Message-ID: <c5mssc+n8u3@eGroups.com>

Ok, you are right:
CURLY_COMMENT1: CURLY_COMMENT '}'*

BTW if you wan't to ensure int a[] = { 1,2,3 } parenthes are correct 
it's a matter of stack in the lexer or a matter for the parser to 
check.

--- In antlr-interest@yahoogroups.com, Rolf Schumacher 
<mailinglist@a...> wrote:
> As far as I can see, this might have a dangeling '}' in cases like
> 
> {{{ int a[] = { 1,2,3 } }}}
> 
> Rolf
> 
> idontwantanidwith2000init wrote:
> 
> >How about:
> >
> 
>CURLY_COMMENT: '{'(WHITE_SPACE)'{'(WHITE_SPACE*'{'COMMENT'}'(WHITE_S
P
> >ACE)*'}'(WHITE_SPACE)*'}'
> >
> >
> >--- In antlr-interest@yahoogroups.com, mailinglist@a... wrote:
> >  
> >
> >> How would you detect a comment block that is enclosed in 3 
curly 
> >>    
> >>
> >brackets?
> >  
> >
> >>e.g.:
> >>1. {{{}}} or
> >>2. {{{ comment }}} or
> >>3. {{{} }}} or
> >>4. {{{}} }}} ...
> >>
> >>My solution leads to "lexical nondeterminism" though it 
> >>    
> >>
> >functions ...
> >  
> >
> >>options { k=3; charVocabulary = '\u0020' .. '\u007e';}
> >>CMT: "{{{"
> >>        (
> >>            {LA(3)!='}'}?   "}}"
> >>        |   {LA(2)!='}'}?   '}'
> >>        |                           ~'}'
> >>        )*
> >>        "}}}";
> >>
> >>... but as I'm new to antlr I'm not quite sure what I'm doing 
here.
> >>Avoiding "lexical nondeterminism" as a general advice seems to 
be 
> >>    
> >>
> >helpful.
> >  
> >
> >>Would like to keep the goal, not to see this warning.
> >>
> >>Any idea better than adding warnWhenFollowAmbig option?
> >>
> >>Rolf
> >>    
> >>
> >
> >
> >
> > 
> >Yahoo! Groups Links
> >
> >
> >
> > 
> >
> >
> >
> >  
> >



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Thu Apr 15 17:13:31 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:40 2004
Subject: New antlr-interest member
Message-ID: <1082074411.73.76533.w37@yahoogroups.com>


Hello,

This is an automated email message to let you know that
rdabir <rdabir@yahoo.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From rdabir at yahoo.com  Thu Apr 15 17:15:51 2004
From: rdabir at yahoo.com (rdabir)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] Looking for ANTLR code that will parse conditional expressions containing IF, EL
Message-ID: <c5n8jn+1jjf@eGroups.com>

Hi,

     Does anyone know if someone who has written some ANTLR code that 
will parse conditional expressions containing IF, ELSE, ELSE IF, AND, 
OR conditionals?

Example:

    I need to parse expressions that look like the following:

If ConditionA = 1 OR (ConditionB = 1 And ConditionC = 2)
Else If  ConditionA > 5 OR ConditionB > 5

I'm new to using ANTLR, so I would appreciate any help I can get

Thanks





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From jpschewe at mtu.net  Thu Apr 15 19:15:50 2004
From: jpschewe at mtu.net (Jon Schewe)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] How to make antlr parse this
Message-ID: <1082081749.31544.4.camel@workstation.mn.mtu.net>

I asked this question back in October of 2000 and never got an answer. 
I've worked on it on and off (mostly off) since then and have not come
up with an answer.  I've updated to antlr 2.7.3 hoping that it'd be
better at this, but still haven't gotten it working.  

So here's the question again to see if anyone else can figure it out.

The structure of the file is as follows:

compilationUnit
  :
(javadocComment)*
(package)?
(javadocComment | import)*
( (invariantCondition)* typeDefinition)*
EOF

/**
   This is a javadoc comment that we're not looking for any conditions
in.
**/
javadocComment
  : JAVADOC_OPEN ( INVARIANT_CONDITION | PRE_CONDITION | POST_CONDITION
| ASSERT_CONDITION )* JAVADOC_CLOSE
  ;

/**
   This is a javadoc comment that we're looking for invariants in.
**/
invariantCondition
  : JAVADOC_OPEN ( iv:INVARIANT_CONDITION { addInvariant(iv); } |
PRE_CONDITION | POST_CONDITION | ASSERT_CONDITION )* JAVADOC_CLOSE
  ;

Basically it's a Java grammar, where the javadoc comments are
important.  I've gotten past the lexer by using two lexers, one for
inside comments and one for everything else.  That gives me a nice token
stream, but I just can't seem to get past the top rule above.  If I
don't allow comments anywhere above typeDefinition and require that
typeDefiniation exists, it'll compile and go.  However I want to allow
comments above typeDefinition and I want to allow a file that's
commented out with single line comments (thus no type definition).

Thanks for any help you can provide.
-- 
Jon Schewe | http://mtu.net/~jpschewe
GPG signature at http://mtu.net/~jpschewe/gpg.sig.html
For I am convinced that neither death nor life, neither angels 
nor demons, neither the present nor the future, nor any 
powers, neither height nor depth, nor anything else in all 
creation, will be able to separate us from the love of God that 
is in Christ Jesus our Lord. - Romans 8:38-39
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 198 bytes
Desc: This is a digitally signed message part
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20040415/2cfcf25e/attachment.bin
From lgc at mail1.jpl.nasa.gov  Thu Apr 15 21:10:33 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] Re: How to make antlr parse this
In-Reply-To: <1082081749.31544.4.camel@workstation.mn.mtu.net>
Message-ID: <c5nmbp+ssmh@eGroups.com>

Try something like

compilationUnit
    :
    (   ( (javaDocComment)* package )=> (javaDocComment)* package
    |
    )
    (javaDocComment | import)*
    ( (invariantCondition)* typeDefinition)*
    EOF
    ;
    
--Loring


--- In antlr-interest@yahoogroups.com, Jon Schewe <jpschewe@m...> wrote:
> I asked this question back in October of 2000 and never got an answer. 
> I've worked on it on and off (mostly off) since then and have not come
> up with an answer.  I've updated to antlr 2.7.3 hoping that it'd be
> better at this, but still haven't gotten it working.  
> 
> So here's the question again to see if anyone else can figure it out.
> 
> The structure of the file is as follows:
> 
> compilationUnit
>   :
> (javadocComment)*
> (package)?
> (javadocComment | import)*
> ( (invariantCondition)* typeDefinition)*
> EOF
> 
> /**
>    This is a javadoc comment that we're not looking for any conditions
> in.
> **/
> javadocComment
>   : JAVADOC_OPEN ( INVARIANT_CONDITION | PRE_CONDITION | POST_CONDITION
> | ASSERT_CONDITION )* JAVADOC_CLOSE
>   ;
> 
> /**
>    This is a javadoc comment that we're looking for invariants in.
> **/
> invariantCondition
>   : JAVADOC_OPEN ( iv:INVARIANT_CONDITION { addInvariant(iv); } |
> PRE_CONDITION | POST_CONDITION | ASSERT_CONDITION )* JAVADOC_CLOSE
>   ;
> 
> Basically it's a Java grammar, where the javadoc comments are
> important.  I've gotten past the lexer by using two lexers, one for
> inside comments and one for everything else.  That gives me a nice token
> stream, but I just can't seem to get past the top rule above.  If I
> don't allow comments anywhere above typeDefinition and require that
> typeDefiniation exists, it'll compile and go.  However I want to allow
> comments above typeDefinition and I want to allow a file that's
> commented out with single line comments (thus no type definition).
> 
> Thanks for any help you can provide.
> -- 
> Jon Schewe | http://mtu.net/~jpschewe
> GPG signature at http://mtu.net/~jpschewe/gpg.sig.html
> For I am convinced that neither death nor life, neither angels 
> nor demons, neither the present nor the future, nor any 
> powers, neither height nor depth, nor anything else in all 
> creation, will be able to separate us from the love of God that 
> is in Christ Jesus our Lord. - Romans 8:38-39



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From lists at lischke-online.de  Fri Apr 16 00:47:40 2004
From: lists at lischke-online.de (Mike Lischke)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] Looking for ANTLR code that will parse conditional expressions containing IF, EL
In-Reply-To: <c5n8jn+1jjf@eGroups.com>
Message-ID: <20040416074233.2AEA457C001@h4866.serverkompetenz.net>

>      Does anyone know if someone who has written some ANTLR 
> code that will parse conditional expressions containing IF, 
> ELSE, ELSE IF, AND, OR conditionals?

There is a grammar for Java included with ANTLR. Use this as starting point.

Mike
--
www.soft-gems.net



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From idontwantanidwith2000init at yahoo.com  Fri Apr 16 01:51:35 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] mystery in printing order
Message-ID: <c5o6qn+79va@eGroups.com>

Hi,
I turned errorDefaultHandler off.
I wrote the following:
        System.out.print("#");
	reportError(exceptionVariable.toString());
	consumeUntil(NEWLINE);
	consume();
	System.out.print("? please type an id =>");
	t = idToken();

idToken is the rule we are tring to parse.
It will lead to recursion but this is not the issue.
The issue is the output order:
#? please type an id =>error: line 1:16: expecting ID, found 'moo'
While the expected output is:
#error: line 1:16: expecting ID, found 'moo'
? please type an id =>

It seems like System.out.print is quicker to print then reportError.
Is there threading invoved?
How can I make reportError output to be writethrough ?


BTW,
Could I read ANTLR code?

Tal.




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From son at sparc.spb.su  Fri Apr 16 04:17:48 2004
From: son at sparc.spb.su (Oleg N. Sukhodolsky)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] garmmar inheritance problem
In-Reply-To: <1082033611.26247.27.camel@workstation.mn.mtu.net>
References: <20040415101905.GC4364@sparc.spb.su> <1082033611.26247.27.camel@workstation.mn.mtu.net>
Message-ID: <20040416111748.GJ4364@sparc.spb.su>

The grammar you've sent is incomplete :( there is nosuch rule - assertOrInvariantCondition
When I jsut modify my own to no specify Lexer and use
  "assert"^ expression ( COLON expression )? SEMI
it fails to parse
  assert true;

perhaps you do something special in methods you define in yours parser,
but I don't fine any place whare you call them and so don't understand
if they help to handle "assert" problem :(

Oleg.

On Thu, Apr 15, 2004 at 07:53:31AM -0500, Jon Schewe wrote:
> I've actually had this problem before and solved it in a slightly
> different way.  Attached is my java14.g.  I did it all in the parser.
> 
> On Thu, 2004-04-15 at 05:19, Oleg N. Sukhodolsky wrote:
> > Hi,
> > 
> > I've found some problems with grammar inheritance and I wonder
> > if they are bugs or features.  And if they are features is there are 
> > any workaround for them.
> > 
> > The problem is as follows:
> > I get java.g grammar from examples and create java14.g to add assert statement.
> > For this reason in java.g I rename statement to traditionalStatement and 
> > add rule:
> > statement : traditionalStatement;
> > 
> > in  java14.g I change rule for statement:
> > statement
> > 	:	traditionalStatement
> > 	|	assertStatement
> > 	;
> > And add:
> > assertStatement
> > 	:	"assert"^ expression ( COLON expression )? SEMI
> > 	;
> > 
> > here is the first problem after compilation "assert" is not added to 
> > keywords hash and so lexer consider it as IDENT.
> > I can workaround it if I add token ASSERT to lexer and will use it in the
> > rule:
> > assertStatement
> > 	:	ASSERT^ expression ( COLON expression )? SEMI
> > 	;
> > 
> > class Java14Lexer extends JavaLexer;
> > ...
> > tokens {
> >         ASSERT="assert";
> > }
> > 
> > Althought, this works until I add some new tokens to recognizer.  In this case
> > "assert" will be added to the hash with wrong id.  And this is second problem.
> > 
> > And the third problem is that if I want extends 14 recognizer to add 15 features
> > then Java15Lexer doesnt have "assert" in the keywords hash until I specify it
> > explicitly (but in this case it will have wrong id).
> > 
> > I've tested this with antlr 2.7.(2|3|4rc1).
> > 
> > So, the questions are:
> > 1. Are these problems bugs or not?
> > 2. if these are features is there any way to workaround them?
> > 
> > Thanks in advance, Oleg.
> > 
> > P.S. here are java14.g and java15.g
> > ----- java14.g ------------
> > class Java14Recognizer extends JavaRecognizer;
> > 
> > // Options don't get inherited, copy of option block required.
> > options {
> > 	k = 2;                           // two token lookahead
> > 	exportVocab=Java14;     // Call its vocabulary "GeneratedJava14"
> > 	codeGenMakeSwitchThreshold = 2;  // Some optimizations
> > 	codeGenBitsetTestThreshold = 3;
> > 	defaultErrorHandler = false;     // Don't generate parser error handlers
> > 	buildAST = true;
> > }
> > 
> > // overrides the statement production in java.g, adds assertStatement
> > statement
> > 	:	traditionalStatement
> > 	|	assertStatement
> > 	;
> > 
> > // assert statement, available since JDK 1.4
> > assertStatement
> > 	:	ASSERT^ expression ( COLON expression )? SEMI
> > 	;
> > 
> > class Java14Lexer extends JavaLexer;
> > 
> > options {
> > 	exportVocab=Java14;    // call the vocabulary "Java14",
> > 	testLiterals=false;    // don't automatically test for literals
> > 	k=4;                   // four characters of lookahead
> > 	charVocabulary='\u0003'..'\uFFFE';
> > 	codeGenBitsetTestThreshold=20;
> > }
> > 
> > tokens {
> >         ASSERT="assert";
> > }
> > 
> > protected
> > FLOAT_SUFFIX
> > 	:	'f'|'F'|'d'|'D'
> > 	;
> > ----- java14.g ------------
> > ----- java15.g ------------
> > class Java15Recognizer extends Java14Recognizer;
> > 
> > // Options don't get inherited, copy of option block required.
> > options {
> > 	k = 2;                           // two token lookahead
> > 	exportVocab=Java15;     // Call its vocabulary "GeneratedJava15"
> > 	codeGenMakeSwitchThreshold = 2;  // Some optimizations
> > 	codeGenBitsetTestThreshold = 3;
> > 	defaultErrorHandler = false;     // Don't generate parser error handlers
> > 	buildAST = true;
> > }
> > 
> > // just some statement
> > statement
> > 	:	traditionalStatement
> > 	|	assertStatement
> > 	;
> > 
> > class Java15Lexer extends Java14Lexer;
> > 
> > options {
> > 	exportVocab=Java15;    // call the vocabulary "Java15",
> > 	testLiterals=false;    // don't automatically test for literals
> > 	k=4;                   // four characters of lookahead
> > 	charVocabulary='\u0003'..'\uFFFE';
> > 	codeGenBitsetTestThreshold=20;
> > }
> > 
> > protected
> > FLOAT_SUFFIX
> > 	:	'f'|'F'|'d'|'D'
> > 	;
> > ----- java15.g ------------
> > 
> > 
> > 
> >  
> > Yahoo! Groups Links
> > 
> > 
> > 
> >  
> -- 
> Jon Schewe | http://mtu.net/~jpschewe
> GPG signature at http://mtu.net/~jpschewe/gpg.sig.html
> For I am convinced that neither death nor life, neither angels 
> nor demons, neither the present nor the future, nor any 
> powers, neither height nor depth, nor anything else in all 
> creation, will be able to separate us from the love of God that 
> is in Christ Jesus our Lord. - Romans 8:38-39

> header {
> /*
>  * Copyright (c) 2000
>  *      Jon Schewe.  All rights reserved
>  *
>  * Redistribution and use in source and binary forms, with or without
>  * modification, are permitted provided that the following conditions
>  * are met:
>  * 1. Redistributions of source code must retain the above copyright
>  *    notice, this list of conditions and the following disclaimer.
>  * 2. Redistributions in binary form must reproduce the above copyright
>  *    notice, this list of conditions and the following disclaimer in the
>  *    documentation and/or other materials provided with the distribution.
>  *
>  * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
>  * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
>  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
>  * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
>  * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
>  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
>  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
>  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
>  * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
>  * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
>  * SUCH DAMAGE.
>  *
>  * I'd appreciate comments/suggestions on the code jpschewe@mtu.net
>  */
> package net.mtu.eggplant.dbc;
> 
> import net.mtu.eggplant.util.StringPair;
> import net.mtu.eggplant.util.Pair;
> 
> import java.util.Iterator;
> import java.util.Set;
> import java.util.HashSet;
> import java.util.List;
> import java.util.LinkedList;
> import java.util.LinkedHashSet;
> 
> import org.apache.commons.logging.Log;
> import org.apache.commons.logging.LogFactory;
> }
> 
> /**
>   * Parser for 1.4, adds assert keyword.  This file is generated by
>   * antlr.
>   *
>   * @version $Revision: 1.6 $
>   */
> class Java14Recognizer extends JavaRecognizer;
> 
> {
> 
>   private static final Log LOG = LogFactory.getLog(Java14Recognizer.class);
> 
> // Define some helper methods, JPS copied in from java.g because antlr is being stupid
> 
>   public void print(final String s) {
>     System.out.println("Parser: " + s);
>   }
> 
>   /**
>      set the symbol table object to use.
>   **/
>   public void setSymtab(final Symtab symtab) {
>     _symtab = symtab;
>   }
> 
>   private Symtab _symtab;
> 
>   /**
>      Get the symbol table object being used.
>   **/
>   public Symtab getSymtab() {
>     return _symtab;
>   }
>   
>   /**
>      Given the id Token from the implements clause find the package the
>      interface is defined in.  Parse the interface for assertions and add
>      an AssertInterface object to the current class so we can check against
>      it later.
>   **/
>   private void parseImplementedInterface(final Token t) {
>     String interfaceName = t.getText();
>     String packageName = "";
>     if(interfaceName.indexOf('.') > 0) {
>       //already qualified interface, break up into package and name
>       int lastDot = interfaceName.lastIndexOf('.');
>       packageName = interfaceName.substring(0, lastDot);
>       interfaceName = interfaceName.substring(lastDot+1);
>     }
>     else {
>       //Need to figure out the right package here, search through the
>       //current package, _imports
>     }
> 
>     //actually parse the file so we can check
>     //against it later, if no file can be found then don't add it to the
>     //class, otherwise add it to the current class with
>     //getSymtab().getCurrentClass().addInterface(assertInterface)
> 
>   }
>   
>   /**
>      add an assert.  This should get cached with the file object?
>      @param asserts asserts, ordered as they appear in the code. 
>   **/
>   private void addAsserts(final List asserts, final Token jdClose) {
>     if(asserts != null && asserts.size() > 0) {
>       int line = jdClose.getLine();
>       int column = jdClose.getColumn()-1 + jdClose.getText().length();
>       //System.out.println("adding assert"
>       //  + " line: " + line
>       //  + " column: " + column
>       //  );
>       StringBuffer codeFrag = new StringBuffer();
>       Iterator iter = asserts.iterator();
>       while(iter.hasNext()) {
>         AssertToken assertToken = (AssertToken)iter.next();
>         String code = CodeGenerator.generateAssertion(assertToken);
>         codeFrag.append(code);
>       }
>       CodeFragment codeFragment = new CodeFragment(new CodePoint(line, column), codeFrag.toString(), CodeFragmentType.ASSERT);
>       getSymtab().addCodeFragment(codeFragment);
>     }
>   }
> 
>   
>   private List _invariants = new LinkedList();
> 
>   /**
>      add invariants to this class
> 
>      @pre (invariant != null)
>   **/
>   private void addInvariant(final Token invariant) {
>     if(! (invariant instanceof AssertToken)) {
>       throw new RuntimeException("Expecting AssertToken! " + invariant.getClass());
>     }
>     _invariants.add(invariant);
>   }
> 
>   /**
>      get the invariants for this class.
>      Invariants are in the order they appear in the source.
>   **/
>   private List getInvariants() {
>     return _invariants;
>   }
> 
>   /**
>      Clear the list of invariants for this class.
>   **/
>   private void clearInvariants() {
>     _invariants = new LinkedList();
>   }
> 
> 
>   private List _preConditions = new LinkedList();
>   /**
>      Get the list of preconditions that have been seen since the last clear.
>      Preconditions are in the order they appear in the source.
>   **/
>   public List getPreConditions() {
>     return _preConditions;
>   }
> 
>   /**
>      Add a precondition to the list of preconditions.
>   **/
>   public void addPreCondition(final Token pre) {
>     if(! (pre instanceof AssertToken)) {
>       throw new RuntimeException("Expecting AssertToken! " + pre.getClass());
>     }
>     _preConditions.add(pre);
>   }
> 
>   /**
>      clear out the list of preconditions.
>   **/
>   public void clearPreConditions() {
>     _preConditions = new LinkedList();
>   }
> 
>   private List _postConditions = new LinkedList();
>   /**
>      Get the list of postconditions that have been seen since the last clear.
>      Postconditions are in the order they appear in the source.
>   **/
>   public List getPostConditions() {
>     return _postConditions;
>   }
> 
>   /**
>      clear out the list of postconditions.
>   **/
>   public void addPostCondition(final Token post) {
>     if(! (post instanceof AssertToken)) {
>       throw new RuntimeException("Expecting AssertToken! " + post.getClass());
>     }
>     _postConditions.add(post);
>   }
> 
>   /**
>      clear out the list of postconditions.
>   **/
>   public void clearPostConditions() {
>     _postConditions = new LinkedList();
>   }    
> 
> }
> 
> statement
> {
>   CodePointPair dummyStartEnd;
> }
>   :
> 
>     // A list of statements in curly braces -- start a new scope!    
>     dummyStartEnd=compoundStatement
> 
>     // class definition
>     |   classDefinition
> 
>     // final class definition
>     |   "final" classDefinition
> 
>     // abstract class definition
>     |   "abstract" classDefinition
> 
>     // declarations are ambiguous with "ID DOT" relative to expression
>     // statements.  Must backtrack to be sure.  Could use a semantic
>     // predicate to test symbol table to see what the type was coming
>     // up, but that's pretty hard without a symbol table ;)
>     |   (declaration)=> declaration SEMI
> 
>     // An expression statement.  This could be a method call,
>     // assignment statement, or any other expression evaluated for
>     // side-effects.
>     |   expression SEMI
> 
>     // Attach a label to the front of a statement
>     |   IDENT COLON statement
> 
>     // If-else statement
>     |   "if" LPAREN expression RPAREN statement
>     (
>         // CONFLICT: the old "dangling-else" problem...
>         //           ANTLR generates proper code matching
>         //           as soon as possible.  Hush warning.
>         options {
>         warnWhenFollowAmbig = false;
>         }
>     :
>         "else" statement
>     )?
> 
>     // For statement
>     |   "for"
>     LPAREN
>     forInit SEMI   // initializer
>     forCond SEMI   // condition test
>     forIter         // updater
>     RPAREN
>     statement                     // statement to loop over
> 
>     // While statement
>     |   "while" LPAREN expression RPAREN statement
> 
>     // do-while statement
>     |   "do" statement "while" LPAREN expression RPAREN SEMI
> 
>     // get out of a loop (or switch)
>     |   "break" (IDENT)? SEMI
> 
>     // do next iteration of a loop
>     |   "continue" (IDENT)? SEMI
> 
>     // Return an expression
>     |   ret:"return" (expression)? semi:SEMI
>       {
>     //keep track of these points for post conditions
>     CodePoint retcp = new CodePoint(ret.getLine(), ret.getColumn()-1);
>     //add 1 so that code is inserted after the semi colon
>     CodePoint semicp = new CodePoint(semi.getLine(), semi.getColumn());
>     getSymtab().getCurrentMethod().addExit(new CodePointPair(retcp, semicp));
>       }
> 
>     // switch/case statement
>     |   "switch" LPAREN expression RPAREN LCURLY
>     ( casesGroup )*
>     RCURLY
> 
>     // exception try-catch block
>     |   tryBlock
> 
>     // throw an exception
>     |   "throw" expression SEMI
> 
>     // synchronize a statement
>     |   "synchronized" LPAREN expression RPAREN dummyStartEnd=compoundStatement
> 
>     // empty statement
>     |   SEMI
>       
>       //assertion, checks invariants too for the class definitions allowed in statement
>     |   assertOrInvariantCondition
> 
>     //JDK 1.4 assert keyword
>     | "assert" expression (COLON expression)? SEMI
> 
>     ;





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From idontwantanidwith2000init at yahoo.com  Fri Apr 16 04:36:00 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] accessing literal strings
Message-ID: <c5ogf0+ntp4@eGroups.com>

Hi,
How can I print all the literals defined in the parser/lexer?

I want to do it in run time not in parse time.


another question less crucial:
I'd like to keep with the literal its description, how can I do that?
If I can't do it this way, is there a way to trick antlr and have 
multiple literal sets so that cells with the same number will relate 
to the same literal?

Tal.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From jpschewe at mtu.net  Fri Apr 16 05:37:58 2004
From: jpschewe at mtu.net (Jon Schewe)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] Re: How to make antlr parse this
In-Reply-To: <c5nmbp+ssmh@eGroups.com>
References: <c5nmbp+ssmh@eGroups.com>
Message-ID: <1082119078.31550.17.camel@workstation.mn.mtu.net>

Apparently that's still non-deterministic.  

Line 329 is (javaDocComment | import)*
ANTLR Parser Generator   Version 2.7.3   1989-2004 jGuru.com
java.g:329: warning:nondeterminism upon
java.g:329:     k==1:JAVADOC_OPEN
java.g:329:    
k==2:JAVADOC_CLOSE,POST_CONDITION,PRE_CONDITION,ASSERT_CONDITION,INVARIANT_CONDITION
java.g:329:     between alt 1 and exit branch of block

On Thu, 2004-04-15 at 23:10, lgcraymer wrote:
> Try something like
> 
> compilationUnit
>     :
>     (   ( (javaDocComment)* package )=> (javaDocComment)* package
>     |
>     )
>     (javaDocComment | import)*
>     ( (invariantCondition)* typeDefinition)*
>     EOF
>     ;
>     
> --Loring
> 
> 
> --- In antlr-interest@yahoogroups.com, Jon Schewe <jpschewe@m...> wrote:
> > I asked this question back in October of 2000 and never got an answer. 
> > I've worked on it on and off (mostly off) since then and have not come
> > up with an answer.  I've updated to antlr 2.7.3 hoping that it'd be
> > better at this, but still haven't gotten it working.  
> > 
> > So here's the question again to see if anyone else can figure it out.
> > 
> > The structure of the file is as follows:
> > 
> > compilationUnit
> >   :
> > (javadocComment)*
> > (package)?
> > (javadocComment | import)*
> > ( (invariantCondition)* typeDefinition)*
> > EOF
> > 
> > /**
> >    This is a javadoc comment that we're not looking for any conditions
> > in.
> > **/
> > javadocComment
> >   : JAVADOC_OPEN ( INVARIANT_CONDITION | PRE_CONDITION | POST_CONDITION
> > | ASSERT_CONDITION )* JAVADOC_CLOSE
> >   ;
> > 
> > /**
> >    This is a javadoc comment that we're looking for invariants in.
> > **/
> > invariantCondition
> >   : JAVADOC_OPEN ( iv:INVARIANT_CONDITION { addInvariant(iv); } |
> > PRE_CONDITION | POST_CONDITION | ASSERT_CONDITION )* JAVADOC_CLOSE
> >   ;
> > 
> > Basically it's a Java grammar, where the javadoc comments are
> > important.  I've gotten past the lexer by using two lexers, one for
> > inside comments and one for everything else.  That gives me a nice token
> > stream, but I just can't seem to get past the top rule above.  If I
> > don't allow comments anywhere above typeDefinition and require that
> > typeDefiniation exists, it'll compile and go.  However I want to allow
> > comments above typeDefinition and I want to allow a file that's
> > commented out with single line comments (thus no type definition).
> > 
> > Thanks for any help you can provide.
> > -- 
> > Jon Schewe | http://mtu.net/~jpschewe
> > GPG signature at http://mtu.net/~jpschewe/gpg.sig.html
> > For I am convinced that neither death nor life, neither angels 
> > nor demons, neither the present nor the future, nor any 
> > powers, neither height nor depth, nor anything else in all 
> > creation, will be able to separate us from the love of God that 
> > is in Christ Jesus our Lord. - Romans 8:38-39
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
> 
>  
-- 
Jon Schewe | http://mtu.net/~jpschewe
GPG signature at http://mtu.net/~jpschewe/gpg.sig.html
For I am convinced that neither death nor life, neither angels 
nor demons, neither the present nor the future, nor any 
powers, neither height nor depth, nor anything else in all 
creation, will be able to separate us from the love of God that 
is in Christ Jesus our Lord. - Romans 8:38-39
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 198 bytes
Desc: This is a digitally signed message part
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20040416/f6e45ee0/attachment.bin
From notify at yahoogroups.com  Fri Apr 16 06:19:12 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:40 2004
Subject: New antlr-interest member
Message-ID: <1082121552.118.41726.w71@yahoogroups.com>


Hello,

This is an automated email message to let you know that
e_mani9 <e_mani9@yahoo.co.in> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From computa_mike at hotmail.com  Fri Apr 16 06:35:40 2004
From: computa_mike at hotmail.com (Mike Hingley)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] newbie stuck here....
Message-ID: <c5onfc+cfr6@eGroups.com>

Hi - 

I work for these guys : www.boxtelematics.com, and they make a 
hardware unit that offers a scripting abilty.

So... anyway I figured that it would be nice to provide a nice IDE 
to develop the scripts in - one that looks for syntax errors etc, 
and one that I could look for logical errors in script design in.

Anyway - my first step has been to define a lexicon, describing all 
of the tokens (right terminology?) thant can be inputted in the 
stream - my idea is start small (say less than 10 commands) and add 
the rest in once the concept has been proved.

Anyway - here's my lexer grammar ...

protected NEWLINE
    :   '\r' '\n'   // DOS
    |   '\n'        // UNIX
    ;
BOXDALLASKEY				:		
	('0'..'9')+;
BOXaddkey					:		
	".addkey"  			
	{System.Console.WriteLine("<<Lex :: .addkey>>");}; 
BOXalarm					:		
	".alarm"  			
	{System.Console.WriteLine("<<Lex :: .alarm>>");}; 
BOXalive					:		
	".alive"  			
	{System.Console.WriteLine("<<Lex :: .alive>>");}; 

at the moment i am just experimenting, so I have put the print lines 
there to prove it's all working.

to provide the main structure for the commands, the following parser 
grammar has been constructed :



 box_addkey		:			BOXaddkey 
BOXDALLASKEY NEWLINE		; 
 box_ai			:			BOXai 		
						;


ok - hopefully everyone's clear with that.  Anyway - what I wanted 
to do was to compile this little lot to give a lexer / parser that I 
could use in C#, to provide a gui to the user - and that 'seems' to 
have worked ok - however I am unsure if I am doing this right.  Does 
anyone have any advice regarding my structure here?  Can i get away 
with merely a lexer( I'm sort of thinking that I can - I'm only 
interested in returning valid tokens not interpreting them - am I 
missing something?)?  

Is there any documentation for the c# lexer and parsers?  


I'm using the eclipse IDE, and the ANTLR plugin (by the way - that 
doesn't seem to like compiling if language = CSHARP?  any ideas?)

Cheers guys -

Mike Hingley
ANTLR newbie, and quite liking it so far.......



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From e_mani9 at yahoo.co.in  Fri Apr 16 06:46:34 2004
From: e_mani9 at yahoo.co.in (e_mani9)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] Syntactic predicate for additive Expression
Message-ID: <c5oo3q+qo0o@eGroups.com>

hi,
  I had conflict between additive expression and unary expression, 
so i used syntactic predicate to fix it. Now the additive expression 
works with right associativity, i would like it to work with left 
associativiy.
My grammer is :

AddExpr : (MulExpr (ADD | SUB))=>
           MulExpr (ADD | SUB) AddExpr
           | MulExpr ;

MulExpr : UnaryExpr (( MUL | DIV) UnaryExpr)* ;

UnaryExpr : (ADD | SUB) UnaryExpr
            | PowerExpr ;

Can anybody suggest "how to fix the associativity" or a new grammer 
for additive expression.

-- mani




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From glindholm at yahoo.com  Fri Apr 16 07:11:31 2004
From: glindholm at yahoo.com (Greg Lindholm)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] mystery in printing order
In-Reply-To: <c5o6qn+79va@eGroups.com>
Message-ID: <20040416141131.78167.qmail@web12404.mail.yahoo.com>

(I assume reportError is going to System.err)
 
I've seen similar behaviour in other Java apps when you print to both System.out and System.err you can never count on seeing the output weaved together in a timestamp based order. I'm guessing it's because of buffering.
 
If you change to print to System.err you should see what you expect.


idontwantanidwith2000init <idontwantanidwith2000init@yahoo.com> wrote:
Hi,
I turned errorDefaultHandler off.
I wrote the following:
System.out.print("#");
reportError(exceptionVariable.toString());
consumeUntil(NEWLINE);
consume();
System.out.print("? please type an id =>");
t = idToken();

idToken is the rule we are tring to parse.
It will lead to recursion but this is not the issue.
The issue is the output order:
#? please type an id =>error: line 1:16: expecting ID, found 'moo'
While the expected output is:
#error: line 1:16: expecting ID, found 'moo'
? please type an id =>

It seems like System.out.print is quicker to print then reportError.
Is there threading invoved?
How can I make reportError output to be writethrough ?


BTW,
Could I read ANTLR code?

Tal.





Yahoo! Groups Links





		
---------------------------------
Do you Yahoo!?
Yahoo! Tax Center - File online by April 15th
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040416/54a56a76/attachment.html
From skellett at anitesystems.de  Fri Apr 16 07:52:51 2004
From: skellett at anitesystems.de (Simon Kellett)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] Re: Nondeterminism
In-Reply-To: <c5m8pc+hi1f@eGroups.com>
Message-ID: <c5os03+8hgv@eGroups.com>

--- "a_w_abate" <a_w_abate@y...> wrote:
> Is it normal to receive several (7) messages about nondeterminism 
> but still have the emitted parser/lexer do exactly what you want?

Yes :-)
(speaking from experience of writting exactly 1 (one) parser !)

> I see quite a few posts about how to remove them but is that really 
> necessary?

AFAIK is is not *necessary* but it is tidy !! (I like clean builds,
and I can not see *why* this is a warning as the code produced works
!!)

Regards, Simon



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From markl at glyphic.com  Fri Apr 16 08:09:48 2004
From: markl at glyphic.com (Mark)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] Re: How to make antlr parse this
In-Reply-To: <1082081749.31544.4.camel@workstation.mn.mtu.net>
Message-ID: <c5osvs+9cp2@eGroups.com>

First: recognize that, for the parser, javadocComment and invariantCondition are identical 
parses - there is no way to tell them apart with any lookahead or syntatic predicates.

Second: this means your grammar:
> compilationUnit
>   :
> (javadocComment)*
> (package)?
> (javadocComment | import)*
> ( (invariantCondition)* typeDefinition)*
> EOF
is basically the same as:

u : (c)* (p)? (c|i)* ((c)* t)* ;

Consider this sequence: c c c t

How many of those comments (c) should be used to match (c|i)*?  how many should be 
used to match ((c)* t)*?

The grammar is non-deterministic because your specification is.  Once you decide hoe you 
want to resolve the above ambiguity, then you can write a non-deterministic grammar for 
it,

- Mark




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From markl at glyphic.com  Fri Apr 16 08:26:04 2004
From: markl at glyphic.com (Mark)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] Re: Nondeterminism
In-Reply-To: <c5os03+8hgv@eGroups.com>
Message-ID: <c5otuc+kv53@eGroups.com>

> > Is it normal to receive several (7) messages about nondeterminism 
> > but still have the emitted parser/lexer do exactly what you want?
Yes.

> and I can not see *why* this is a warning as the code produced works!!)
It is a warning because the grammar is non-deterministic and so Antlr had to guess at 
what you want.  It just turns out that Antlr's method of resolving this is usually, but not 
always, right.

I always work to get rid of the warnings, either by use of Anltr's options, or by re-writing 
the grammar.  By compiling w/no warnings I assure myself that all the non-determinisms 
have been resolved the way I intended.

- Mark



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From markl at glyphic.com  Fri Apr 16 08:34:27 2004
From: markl at glyphic.com (Mark)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] Re: grammar help please.
In-Reply-To: <c5lqe2+63ra@eGroups.com>
Message-ID: <c5oue4+h3il@eGroups.com>

> I am trying to define a grammer for a 15 digit number.
Not clear exactly what you are trying to achieve.  If it is a number that is exactly 15 digits:

D: '0'..'9'
D15: D D D D D   D D D D D   D D D D D ;

Ugly, but easy.

If it is a number that has between 1 and 15 digits, then it is more difficult:

D15: D (D (D (D (D   (D (D (D (D (D   (D (D (D (D (D )?)?)?)?)? )?)?)?)?)? )?)?)?)? ;

But this is rarely useful.  Consider this: What do you want a string of 20 consecutive digits 
to mean?  Should it be a 15 digit number followed by a 5 digit number or is it an error?

It is more common to make it an error.  In which case define:

NUMBER: (D)+ ;

Then let the code that converts the string of digits into a numeric value notice that there 
are more than 15 digits (or more likely, signal an error when some binary value overflows.)

If you want 20 digits to be parsed as two numbers, then one has to ask how one resolves 
the ambiguity: two 10 digit numbers? a 15 digit number followed by a 5 digit number?  If 
this is a grammar for humans to write, it is generally a bad choice to go down this path.

- Mark




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Fri Apr 16 08:36:03 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] accessing literal strings
In-Reply-To: <c5ogf0+ntp4@eGroups.com>
References: <c5ogf0+ntp4@eGroups.com>
Message-ID: <20040416153603.GF7115@cs.utwente.nl>

On Fri, Apr 16, 2004 at 11:36:00AM -0000, idontwantanidwith2000init wrote:
> How can I print all the literals defined in the parser/lexer?

In java mode there's the _tokenNames array in the generated parser. (should
list both lexer and parser tokens) In C++ mode there's some API calls for
it.

> another question less crucial:
> I'd like to keep with the literal its description, how can I do that?

Keep a map or vector of strings indexed by the token number (as returned by
getType() ?

> If I can't do it this way, is there a way to trick antlr and have 
> multiple literal sets so that cells with the same number will relate 
> to the same literal?

Not sure what you mean here. You can do some evil trickery with the
TokenTypes.txt files and importVocab however.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Chaos often breeds life, when order breeds habit.
  --- Henry B. Adams, The Education of Henry Adams



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From markl at glyphic.com  Fri Apr 16 08:44:17 2004
From: markl at glyphic.com (Mark)
Date: Mon Dec 20 16:16:40 2004
Subject: [antlr-interest] Re: AST Stuff
In-Reply-To: <20040415113317.GE2714@cs.utwente.nl>
Message-ID: <c5ov0h+hffq@eGroups.com>


> ## is basically a shorthand for #rule_name. 
Is this supported?  I couldn't find reference to it in the Antlr docs.

- Mark



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Fri Apr 16 08:52:32 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:40 2004
Subject: Unsubscription by antlr-interest member
Message-ID: <1082130752.123.97251.w51@yahoogroups.com>


Hello,

This is an automated email message to let you know that
igorfie <ifedorenko@rogers.com> unsubscribed from your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a member unsubscribes.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From markl at glyphic.com  Fri Apr 16 09:05:57 2004
From: markl at glyphic.com (Mark)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] Re: Syntactic predicate for additive Expression
In-Reply-To: <c5oo3q+qo0o@eGroups.com>
Message-ID: <c5p095+ird7@eGroups.com>

--- In antlr-interest@yahoogroups.com, "e_mani9" <e_mani9@y...> wrote:
>   I had conflict between additive expression and unary expression, 
> so i used syntactic predicate to fix it. 
You should not need any syntatic predicates for this kind of grammar.  Try:

AddExpr: MulExpr ((ADD | SUB) MulExpr)* ;
MulExpr: PowExpr ((MUL | DIV) PowExpr)* ;
PowExpr: UnaryExpr (POW UnaryExpr)* ;
UnaryExpr: (ADD | SUB) UnaryExpr | Value ;

This should have all the proper associativity and precedence you want. And none of the 
ambiguity.

Depending on the whole grammar, you may need to add options{greedy=true;} here or 
there, but it is impossible to say without seeing the rest of the grammar.

- Mark




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From lgc at mail1.jpl.nasa.gov  Fri Apr 16 10:43:41 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] Re: How to make antlr parse this
In-Reply-To: <1082119078.31550.17.camel@workstation.mn.mtu.net>
Message-ID: <c5p60e+7fp4@eGroups.com>

That looks like an approximate LLk issue--it may still generate
correct code.

--Loring


--- In antlr-interest@yahoogroups.com, Jon Schewe <jpschewe@m...> wrote:
> Apparently that's still non-deterministic.  
> 
> Line 329 is (javaDocComment | import)*
> ANTLR Parser Generator   Version 2.7.3   1989-2004 jGuru.com
> java.g:329: warning:nondeterminism upon
> java.g:329:     k==1:JAVADOC_OPEN
> java.g:329:    
>
k==2:JAVADOC_CLOSE,POST_CONDITION,PRE_CONDITION,ASSERT_CONDITION,INVARIANT_CONDITION
> java.g:329:     between alt 1 and exit branch of block
> 
> On Thu, 2004-04-15 at 23:10, lgcraymer wrote:
> > Try something like
> > 
> > compilationUnit
> >     :
> >     (   ( (javaDocComment)* package )=> (javaDocComment)* package
> >     |
> >     )
> >     (javaDocComment | import)*
> >     ( (invariantCondition)* typeDefinition)*
> >     EOF
> >     ;
> >     
> > --Loring
> > 
> > 
> > --- In antlr-interest@yahoogroups.com, Jon Schewe <jpschewe@m...>
wrote:
> > > I asked this question back in October of 2000 and never got an
answer. 
> > > I've worked on it on and off (mostly off) since then and have
not come
> > > up with an answer.  I've updated to antlr 2.7.3 hoping that it'd be
> > > better at this, but still haven't gotten it working.  
> > > 
> > > So here's the question again to see if anyone else can figure it
out.
> > > 
> > > The structure of the file is as follows:
> > > 
> > > compilationUnit
> > >   :
> > > (javadocComment)*
> > > (package)?
> > > (javadocComment | import)*
> > > ( (invariantCondition)* typeDefinition)*
> > > EOF
> > > 
> > > /**
> > >    This is a javadoc comment that we're not looking for any
conditions
> > > in.
> > > **/
> > > javadocComment
> > >   : JAVADOC_OPEN ( INVARIANT_CONDITION | PRE_CONDITION |
POST_CONDITION
> > > | ASSERT_CONDITION )* JAVADOC_CLOSE
> > >   ;
> > > 
> > > /**
> > >    This is a javadoc comment that we're looking for invariants in.
> > > **/
> > > invariantCondition
> > >   : JAVADOC_OPEN ( iv:INVARIANT_CONDITION { addInvariant(iv); } |
> > > PRE_CONDITION | POST_CONDITION | ASSERT_CONDITION )* JAVADOC_CLOSE
> > >   ;
> > > 
> > > Basically it's a Java grammar, where the javadoc comments are
> > > important.  I've gotten past the lexer by using two lexers, one for
> > > inside comments and one for everything else.  That gives me a
nice token
> > > stream, but I just can't seem to get past the top rule above.  If I
> > > don't allow comments anywhere above typeDefinition and require that
> > > typeDefiniation exists, it'll compile and go.  However I want to
allow
> > > comments above typeDefinition and I want to allow a file that's
> > > commented out with single line comments (thus no type definition).
> > > 
> > > Thanks for any help you can provide.
> > > -- 
> > > Jon Schewe | http://mtu.net/~jpschewe
> > > GPG signature at http://mtu.net/~jpschewe/gpg.sig.html
> > > For I am convinced that neither death nor life, neither angels 
> > > nor demons, neither the present nor the future, nor any 
> > > powers, neither height nor depth, nor anything else in all 
> > > creation, will be able to separate us from the love of God that 
> > > is in Christ Jesus our Lord. - Romans 8:38-39
> > 
> > 
> > 
> >  
> > Yahoo! Groups Links
> > 
> > 
> > 
> >  
> -- 
> Jon Schewe | http://mtu.net/~jpschewe
> GPG signature at http://mtu.net/~jpschewe/gpg.sig.html
> For I am convinced that neither death nor life, neither angels 
> nor demons, neither the present nor the future, nor any 
> powers, neither height nor depth, nor anything else in all 
> creation, will be able to separate us from the love of God that 
> is in Christ Jesus our Lord. - Romans 8:38-39



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From idontwantanidwith2000init at yahoo.com  Fri Apr 16 11:01:07 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] Re: mystery in printing order
In-Reply-To: <20040416141131.78167.qmail@web12404.mail.yahoo.com>
Message-ID: <c5p713+8i4q@eGroups.com>

Wow,
You are correct.
How do I refer System.err to System.out temporarly ?

Tal.

--- In antlr-interest@yahoogroups.com, Greg Lindholm 
<glindholm@y...> wrote:
> (I assume reportError is going to System.err)
>  
> I've seen similar behaviour in other Java apps when you print to 
both System.out and System.err you can never count on seeing the 
output weaved together in a timestamp based order. I'm guessing it's 
because of buffering.
>  
> If you change to print to System.err you should see what you 
expect.
> 
> 
> idontwantanidwith2000init <idontwantanidwith2000init@y...> wrote:
> Hi,
> I turned errorDefaultHandler off.
> I wrote the following:
> System.out.print("#");
> reportError(exceptionVariable.toString());
> consumeUntil(NEWLINE);
> consume();
> System.out.print("? please type an id =>");
> t = idToken();
> 
> idToken is the rule we are tring to parse.
> It will lead to recursion but this is not the issue.
> The issue is the output order:
> #? please type an id =>error: line 1:16: expecting ID, found 'moo'
> While the expected output is:
> #error: line 1:16: expecting ID, found 'moo'
> ? please type an id =>
> 
> It seems like System.out.print is quicker to print then 
reportError.
> Is there threading invoved?
> How can I make reportError output to be writethrough ?
> 
> 
> BTW,
> Could I read ANTLR code?
> 
> Tal.
> 
> 
> 
> 
> 
> Yahoo! Groups Links
> 
> 
> 
> 
> 
> 		
> ---------------------------------
> Do you Yahoo!?
> Yahoo! Tax Center - File online by April 15th



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From anchavesb at yahoo.com  Fri Apr 16 12:15:37 2004
From: anchavesb at yahoo.com (Andres Chaves)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] Newbie question
Message-ID: <c5pbcp+41ni@eGroups.com>

Hi, im trying to make a parser of functions expresions (like f
(a,b,c)). I will have a collection of functions avaiable (like sin
(x), daysinmonth, etc.) and i have the number of parameters of each 
function. Here is a part of the grammar

postfixExpr
	:	(id:ID LPAREN)=>
		id2:ID^
		(
         parenArgs
		)?
	|	atom
	;

I have to detect when the number of arguments is wrong (for example 
sin() or sin(a,b)), and raise a parser exception, when i parse the 
function (not when im calculating).

I wonder if someone could give some advice about how to do this.

Thanks

Andres






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From payasam79 at yahoo.com  Fri Apr 16 12:46:07 2004
From: payasam79 at yahoo.com (Bharath S)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] Re: How to make antlr parse this
In-Reply-To: <1082119078.31550.17.camel@workstation.mn.mtu.net>
Message-ID: <20040416194607.57829.qmail@web41010.mail.yahoo.com>

Hi Jon,

If you look at line 329 and 330, both lines can occur
zero or more times and both of them COULD START with
JAVADOC_OPEN

329: (javaDocComment | import)*
330: ( (invariantCondition)* typeDefinition)*

Now, lets say the parser encounters JAVADOC_OPEN.
Should it consider it as a "javaDocComment" or
"invariantCondition"? You have a non-determinism right
there.

If you claim that "typeDefinition" follows
invariantCondition, it still wont help you
differentiate because a "javaDocComment" can always be
follwed by a "typeDefinition" as every rule in 329/330
is optional.

Try to add a "hash" symbol or any other symbol for
that case, in front of either javaDocComment or
invariantCondition and see if the error is resolved.

Note: I'm a newbie, so bear with me if my suggestion
isnt helpful.

-----------------------------------------------------
--- Jon Schewe <jpschewe@mtu.net> wrote:
> Apparently that's still non-deterministic.  
> 
> Line 329 is (javaDocComment | import)*
> ANTLR Parser Generator   Version 2.7.3   1989-2004
> jGuru.com
> java.g:329: warning:nondeterminism upon
> java.g:329:     k==1:JAVADOC_OPEN
> java.g:329:    
>
k==2:JAVADOC_CLOSE,POST_CONDITION,PRE_CONDITION,ASSERT_CONDITION,INVARIANT_CONDITION
> java.g:329:     between alt 1 and exit branch of
> block
> 
> On Thu, 2004-04-15 at 23:10, lgcraymer wrote:
> > Try something like
> > 
> > compilationUnit
> >     :
> >     (   ( (javaDocComment)* package )=>
> (javaDocComment)* package
> >     |
> >     )
> >     (javaDocComment | import)*
> >     ( (invariantCondition)* typeDefinition)*
> >     EOF
> >     ;
> >     
> > --Loring
> > 
> > 
> > --- In antlr-interest@yahoogroups.com, Jon Schewe
> <jpschewe@m...> wrote:
> > > I asked this question back in October of 2000
> and never got an answer. 
> > > I've worked on it on and off (mostly off) since
> then and have not come
> > > up with an answer.  I've updated to antlr 2.7.3
> hoping that it'd be
> > > better at this, but still haven't gotten it
> working.  
> > > 
> > > So here's the question again to see if anyone
> else can figure it out.
> > > 
> > > The structure of the file is as follows:
> > > 
> > > compilationUnit
> > >   :
> > > (javadocComment)*
> > > (package)?
> > > (javadocComment | import)*
> > > ( (invariantCondition)* typeDefinition)*
> > > EOF
> > > 
> > > /**
> > >    This is a javadoc comment that we're not
> looking for any conditions
> > > in.
> > > **/
> > > javadocComment
> > >   : JAVADOC_OPEN ( INVARIANT_CONDITION |
> PRE_CONDITION | POST_CONDITION
> > > | ASSERT_CONDITION )* JAVADOC_CLOSE
> > >   ;
> > > 
> > > /**
> > >    This is a javadoc comment that we're looking
> for invariants in.
> > > **/
> > > invariantCondition
> > >   : JAVADOC_OPEN ( iv:INVARIANT_CONDITION {
> addInvariant(iv); } |
> > > PRE_CONDITION | POST_CONDITION |
> ASSERT_CONDITION )* JAVADOC_CLOSE
> > >   ;
> > > 
> > > Basically it's a Java grammar, where the javadoc
> comments are
> > > important.  I've gotten past the lexer by using
> two lexers, one for
> > > inside comments and one for everything else. 
> That gives me a nice token
> > > stream, but I just can't seem to get past the
> top rule above.  If I
> > > don't allow comments anywhere above
> typeDefinition and require that
> > > typeDefiniation exists, it'll compile and go. 
> However I want to allow
> > > comments above typeDefinition and I want to
> allow a file that's
> > > commented out with single line comments (thus no
> type definition).
> > > 
> > > Thanks for any help you can provide.
> > > -- 
> > > Jon Schewe | http://mtu.net/~jpschewe
> > > GPG signature at
> http://mtu.net/~jpschewe/gpg.sig.html
> > > For I am convinced that neither death nor life,
> neither angels 
> > > nor demons, neither the present nor the future,
> nor any 
> > > powers, neither height nor depth, nor anything
> else in all 
> > > creation, will be able to separate us from the
> love of God that 
> > > is in Christ Jesus our Lord. - Romans 8:38-39
> > 
> > 
> > 
> >  
> > Yahoo! Groups Links
> > 
> > 
> > 
> >  
> -- 
> Jon Schewe | http://mtu.net/~jpschewe
> GPG signature at
> http://mtu.net/~jpschewe/gpg.sig.html
> For I am convinced that neither death nor life,
> neither angels 
> nor demons, neither the present nor the future, nor
> any 
> powers, neither height nor depth, nor anything else
> in all 
> creation, will be able to separate us from the love
> of God that 
> is in Christ Jesus our Lord. - Romans 8:38-39
> 

> ATTACHMENT part 2 application/pgp-signature
name=signature.asc



=====
Bharath Sundararaman
Graduate Assistant, CAHS.
(312)-5606532 (M)
http://www.cs.uic.edu/~bsundara


	
		
__________________________________
Do you Yahoo!?
Yahoo! Tax Center - File online by April 15th
http://taxes.yahoo.com/filing.html


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Fri Apr 16 13:06:05 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] Re: mystery in printing order
In-Reply-To: <c5p713+8i4q@eGroups.com>
References: <20040416141131.78167.qmail@web12404.mail.yahoo.com> <c5p713+8i4q@eGroups.com>
Message-ID: <20040416200605.GA9338@cs.utwente.nl>

On Fri, Apr 16, 2004 at 06:01:07PM -0000, idontwantanidwith2000init wrote:
> You are correct.
> How do I refer System.err to System.out temporarly ?

Can't you flush the streams in between the print statements ? In C++ you
also have the ability to link a number of streams so they automatically get
flushed if something is printed to another. But I don't know if java has
that stuff. I'd be surprised if it didn't have some flush method though...

> > BTW,
> > Could I read ANTLR code?

ANTLR generated code is usually very readable.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     "Evil will always triumph, because Good is dumb." ---  Spaceballs



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Fri Apr 16 13:12:33 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] Re: AST Stuff
In-Reply-To: <c5ov0h+hffq@eGroups.com>
References: <20040415113317.GE2714@cs.utwente.nl> <c5ov0h+hffq@eGroups.com>
Message-ID: <20040416201233.GB9338@cs.utwente.nl>

Hi,

On Fri, Apr 16, 2004 at 03:44:17PM -0000, Mark wrote:
> > ## is basically a shorthand for #rule_name. 
> Is this supported?  I couldn't find reference to it in the Antlr docs.

There might be a reference somewhere I picked it up somewhere myself but
that might be after I started reading antlr's code ;) It is supported
anyway at least since 2.7.0.

If all else fails blame Terence ;)

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "Of all the things I've lost I miss my mind the most --- Ozzy Osbourne



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From idontwantanidwith2000init at yahoo.com  Fri Apr 16 13:48:26 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] Re: mystery in printing order
In-Reply-To: <20040416200605.GA9338@cs.utwente.nl>
Message-ID: <c5pgqq+guij@eGroups.com>

It is a requirement that all output will be to "stdout" and not err.


--- In antlr-interest@yahoogroups.com, Ric Klaren <klaren@c...> 
wrote:
> On Fri, Apr 16, 2004 at 06:01:07PM -0000, 
idontwantanidwith2000init wrote:
> > You are correct.
> > How do I refer System.err to System.out temporarly ?
> 
> Can't you flush the streams in between the print statements ? In 
C++ you
> also have the ability to link a number of streams so they 
automatically get
> flushed if something is printed to another. But I don't know if 
java has
> that stuff. I'd be surprised if it didn't have some flush method 
though...
> 
> > > BTW,
> > > Could I read ANTLR code?
> 
> ANTLR generated code is usually very readable.
> 
> Cheers,
> 
> Ric
> -- 
> -----
+++++*****************************************************+++++++++--
-----
>     ---- Ric Klaren ----- j.klaren@u... ----- +31 53 4893722  ----
> -----
+++++*****************************************************+++++++++--
-----
>      "Evil will always triumph, because Good is dumb." ---  
Spaceballs



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Fri Apr 16 13:59:07 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:41 2004
Subject: New antlr-interest member
Message-ID: <1082149147.156.38665.w32@yahoogroups.com>


Hello,

This is an automated email message to let you know that
danigees <danigees@yahoo.es> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From idontwantanidwith2000init at yahoo.com  Fri Apr 16 14:12:49 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] Re: mystery in printing order
In-Reply-To: <c5pgqq+guij@eGroups.com>
Message-ID: <c5pi8h+f6lv@eGroups.com>

I think I've found a way:
System.setErr(System.err); 



--- In antlr-interest@yahoogroups.com, "idontwantanidwith2000init" 
<idontwantanidwith2000init@y...> wrote:
> It is a requirement that all output will be to "stdout" and not 
err.
> 
> 
> --- In antlr-interest@yahoogroups.com, Ric Klaren <klaren@c...> 
> wrote:
> > On Fri, Apr 16, 2004 at 06:01:07PM -0000, 
> idontwantanidwith2000init wrote:
> > > You are correct.
> > > How do I refer System.err to System.out temporarly ?
> > 
> > Can't you flush the streams in between the print statements ? In 
> C++ you
> > also have the ability to link a number of streams so they 
> automatically get
> > flushed if something is printed to another. But I don't know if 
> java has
> > that stuff. I'd be surprised if it didn't have some flush method 
> though...
> > 
> > > > BTW,
> > > > Could I read ANTLR code?
> > 
> > ANTLR generated code is usually very readable.
> > 
> > Cheers,
> > 
> > Ric
> > -- 
> > -----
> 
+++++*****************************************************+++++++++--
> -----
> >     ---- Ric Klaren ----- j.klaren@u... ----- +31 53 4893722  ---
-
> > -----
> 
+++++*****************************************************+++++++++--
> -----
> >      "Evil will always triumph, because Good is dumb." ---  
> Spaceballs



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From danigees at yahoo.es  Fri Apr 16 14:26:17 2004
From: danigees at yahoo.es (danigees)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] pl/sql grammar
Message-ID: <c5pj1p+q6a9@eGroups.com>

hello group

I need the pl/sql grammar for antlr.




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Fri Apr 16 16:32:28 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:41 2004
Subject: New antlr-interest member
Message-ID: <1082158348.111.25646.w66@yahoogroups.com>


Hello,

This is an automated email message to let you know that
steinkobe88 <steinkobe88@yahoo.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From steinkobe88 at yahoo.com  Fri Apr 16 16:37:36 2004
From: steinkobe88 at yahoo.com (steinkobe88)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] C# JML Parser
Message-ID: <c5pqo0+ob1g@eGroups.com>

I am attempting to build a JML parser in C#.  JML is a java
specification language (http://
jmlspecs.org)

The tool I need to build will parse JML syntax only.  However, the
tool must be writted in 
C# and work under the .NET platform.  I want to use ANTLR is
conjunction with the 
following two grammar files:

http://cvs.sourceforge.net/viewcvs.py/jmlspecs/JML
2/org/jmlspecs/checker/Jml.g
http://cvs.sourceforge.net/viewcvs.py/multijava/MJ
/org/multijava/mjc/Mjc.g

The problem I am having is getting these grammar files to work under
C#.  A lot of the 
code within these files depends on Java class libraries, which C#
does not have access to.  
Can ANTLR take these grammar files as inputs and create a C# syntax
checker as an 
output?

ANY help is appreciated.

Thanks.




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Fri Apr 16 16:51:05 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] Re: mystery in printing order
In-Reply-To: <c5pgqq+guij@eGroups.com>
References: <20040416200605.GA9338@cs.utwente.nl> <c5pgqq+guij@eGroups.com>
Message-ID: <20040416235104.GA10288@cs.utwente.nl>

On Fri, Apr 16, 2004 at 08:48:26PM -0000, idontwantanidwith2000init wrote:
> It is a requirement that all output will be to "stdout" and not err.

Override reportError and friends in your parser/lexer/treewalker...

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "Good judgement comes from experience.
     Experience comes from bad judgement." --- Unknown



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From jpschewe at mtu.net  Fri Apr 16 19:44:27 2004
From: jpschewe at mtu.net (Jon Schewe)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] Re: How to make antlr parse this
In-Reply-To: <c5osvs+9cp2@eGroups.com>
References: <c5osvs+9cp2@eGroups.com>
Message-ID: <1082169867.4328.9.camel@workstation.mn.mtu.net>

On Fri, 2004-04-16 at 10:09, Mark wrote:
> First: recognize that, for the parser, javadocComment and invariantCondition are identical 
> parses - there is no way to tell them apart with any lookahead or syntatic predicates.
> 
Agreed.

> u : (c)* (p)? (c|i)* ((c)* t)* ;
> 
> Consider this sequence: c c c t
> 
> How many of those comments (c) should be used to match (c|i)*?  how many should be 
> used to match ((c)* t)*?
> 
> The grammar is non-deterministic because your specification is.  Once you decide hoe you 
> want to resolve the above ambiguity, then you can write a non-deterministic grammar for 
> it,

Ah yes, now I see the error of my ways.  In the case you show I want
just the last c to match typeDefinition.  So my grammar is more like
this:
compilationUnit
  :
 ( (javadocComment)* packageDefinition ) => (javadocComment)*
packageDefinition // Thanks Loring that took care of the ones above
packages
 | /* nothing */
 )
(javadocComment | import)*
( (invariantCondition)? typeDefinition)*
EOF

Of course antlr still informs me that this is non-deterministic, likely
due to k being 2 and javadocComment being longer than 2 tokens.  Am I
right on that one?

-- 
Jon Schewe | http://mtu.net/~jpschewe
GPG signature at http://mtu.net/~jpschewe/gpg.sig.html
For I am convinced that neither death nor life, neither angels 
nor demons, neither the present nor the future, nor any 
powers, neither height nor depth, nor anything else in all 
creation, will be able to separate us from the love of God that 
is in Christ Jesus our Lord. - Romans 8:38-39
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 198 bytes
Desc: This is a digitally signed message part
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20040416/2366884a/attachment.bin
From open.zone at virgin.net  Fri Apr 16 23:57:56 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] Re: C# JML Parser
In-Reply-To: <c5pqo0+ob1g@eGroups.com>
Message-ID: <c5qkhk+fg6r@eGroups.com>

--- In antlr-interest@yahoogroups.com, "steinkobe88"
<steinkobe88@y...> wrote:
> I am attempting to build a JML parser in C#.  JML is a java
> specification language (http://
> jmlspecs.org)
> 
> The tool I need to build will parse JML syntax only.  However, the
> tool must be writted in 
> C# and work under the .NET platform.  I want to use ANTLR is
> conjunction with the 
> following two grammar files:

Why must it be written in C#?. Not wishing to start a language war,
just a dispassionate question about the rationale for your stated
requirement.

> http://cvs.sourceforge.net/viewcvs.py/jmlspecs/JML
> 2/org/jmlspecs/checker/Jml.g
> http://cvs.sourceforge.net/viewcvs.py/multijava/MJ
> /org/multijava/mjc/Mjc.g

> The problem I am having is getting these grammar files to work under
> C#.  A lot of the 
> code within these files depends on Java class libraries, which C#
> does not have access to.  
> Can ANTLR take these grammar files as inputs and create a C# syntax
> checker as an 
> output?

Yes and No. Yes ANTLR can take the files as input. No, it will not
automagically create lexers/parsers/treeparsers for a *working* JML
syntax checker (GJ compiler in the case of MJC) written in C# from
these input files. It will create exactly what you ask it to -
lexers/parsers/treeparsers for a syntax checker or compiler written in
Java. If you change the language option to C# then you will get
lexers/parsers/treeparsers for a syntax checker or compiler written in
C# with action code in Java. Neither results in what you want.

You have three options AFAICT:
1. Convert all the action code in the grammars to C#. You will need to
convert all the supporting code currently written in Java as well.
Change the language option to C# and build.
2. Build the code as is in Java and use the MS J# product to get you a
working .NET version. Not in C# but it is much less work than (1) and
you have a better chance of getting it to work. Quickly.
3. Build the code as is in Java and use the IKVM.NET tools (see
www.ikvm.net) to run your code on the .NET/Mono platforms. Not in C#
but it is much less work than (1) and, it may support JDKv1.1.4+
features that (2) doesn't support.

Cheers,

Micheal
ANTLR/C#




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Sat Apr 17 06:20:17 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:41 2004
Subject: New antlr-interest member
Message-ID: <1082208017.140.30506.w54@yahoogroups.com>


Hello,

This is an automated email message to let you know that
swaptions <adc@toolazydogs.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From adc at toolazydogs.com  Sat Apr 17 06:47:34 2004
From: adc at toolazydogs.com (swaptions)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] Two nested "top level" rules
Message-ID: <c5rchm+k6tr@eGroups.com>

I have two rules:

a : BEGIN b END ;

b : FOO;

and a function 

    private ASN1Parser getParser(String src) {
        ASN1Lexer lexer = new ASN1Lexer(new StringReader(src));
        return new ASN1Parser(lexer);
    }

Now, this works

getParser("FOO END").b();

This does not

getParser("FOO").b();

Here I get "unexpected token: null".  What am I doing wrong?


Regards,
Alan





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From adc at toolazydogs.com  Sat Apr 17 10:50:46 2004
From: adc at toolazydogs.com (Alan D. Cabrera)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] Two nested "top level" rules
Message-ID: <FF7CE36846E01B439945B55FFB1DF5BE03B1E4@customer.panix.com>

Bah!  I should have read the FAQ before I posted this.

What I need to do is add the following rule to make it top-level:

b_test : b ;

Then I can getParser("FOO").b_test();


Sorry,
Alan

> -----Original Message-----
> From: Alan D. Cabrera
> Sent: Saturday, April 17, 2004 8:48 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Two nested "top level" rules
> 
> I have two rules:
> 
> a : BEGIN b END ;
> 
> b : FOO;
> 
> and a function
> 
>     private ASN1Parser getParser(String src) {
>         ASN1Lexer lexer = new ASN1Lexer(new StringReader(src));
>         return new ASN1Parser(lexer);
>     }
> 
> Now, this works
> 
> getParser("FOO END").b();
> 
> This does not
> 
> getParser("FOO").b();
> 
> Here I get "unexpected token: null".  What am I doing wrong?
> 
> 
> Regards,
> Alan
> 
> 
> 
> 
> 
> 
> Yahoo! Groups Links
> 
> 
> 
> 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From markl at glyphic.com  Sat Apr 17 13:12:56 2004
From: markl at glyphic.com (Mark)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] Re: How to make antlr parse this
In-Reply-To: <1082169867.4328.9.camel@workstation.mn.mtu.net>
Message-ID: <c5s348+eh6i@eGroups.com>

> Ah yes, now I see the error of my ways.  In the case you show I want
> just the last c to match typeDefinition.  So my grammar is more like
> this:
> compilationUnit
>   :
>  ( (javadocComment)* packageDefinition ) => (javadocComment)*
> packageDefinition // Thanks Loring that took care of the ones above
> packages
>  | /* nothing */
>  )
> (javadocComment | import)*
> ( (invariantCondition)? typeDefinition)*
> EOF
> 
> Of course antlr still informs me that this is non-deterministic, likely
> due to k being 2 and javadocComment being longer than 2 tokens.  Am I
> right on that one?
Nope.  It is still inherently non-deterministic:

u : (((c)* p) => c* p | ) (c|i)* ((c)? t)*

again, c c c c t
does (c|i)* match three or four of the comments, leaving one or zero for (c)?

Also, the syntatic predicate does nothing:  Let's see why:

I'm going to rewrite your grammar somewhat for illustration:

unit : start middle end ;
start : (comment)* package | empty ;
middle : (comment | import)* ;
end : ((invariant)? typedef)* ;
invariant : comment { some code here } ;
empty : ;

Notice that invariant is just comment, which to the parser it is, except that it does some 
semantic processing.

This grammar doesn't treat comments matched in start or comments matched in middle 
any differently.  In other words, if you see three comments at the start of an input, you're 
not going to care if they eventually match the comment reference in start or the reference 
in middle.  Because of the way you written the grammar, it is the presence of a package, 
**after a potentially huge number of comments** that determines if those comments 
should match in start or middle.  The syntactic predicate helps by effectively doing a run-
time large look ahead.  But, in the end you don't care where they get matched.

So, the first re-write of the grammar is:

unit: pre start middle end ;
pre: (comment)* ;
start : (package (comment)*)? ;
middle : (import (comment)*)* ;
end : ((invariant)? typedef)* ;
invariant : comment { some code here } ;
empty : ;

This parses the same grammar, but it pushes as many comments into pre as it possible 
can, then as many into start as it can, etc...  Since you don't need to semantically treat 
these comments differently, it doesn't matter where they get matched.  Notice that each 
rule that is optional ( (...)? or (...)* rules) starts with a fixed length unique sequence so the 
parser can tell if that rule is to be used.

Now the problem with this grammar is that sequence that matches invariant before the 
typedef will also match the comment in any of pre, start, or middle.  And since we've made 
the grammar be hungry and match as much as possible, this grammar will never see the 
optional invariant in the end rule - it will have been eaten by some other (comment)* 
sequence.  This is legal based on the grammar, since it is non-deterministic, but it is not 
how you want to resolve the non-determinism.

HERE is the case to use a syntactic predicate: You are trying to make a parse decision (is it 
an invariant or a comment) based on syntax that **follows** the sequence in question.  
The solution is that we don't want any of the (comment)* sequences to match the last 
comment if it followed by a typedef, because we want to resolve the non-determinism in 
favor of matching the invariant.  Which leads us to:

unit: pre start middle end ;
pre: fluff ;
start : (package fluff)? ;
middle : (import fluff)* ;
end : ((invariant)? typedef)* ;
fluff : 
    (comment)=> ( (invariant typedef)=> empty | comment fluff )
    | empty ;
invariant : comment { some code here } ;
empty : ;

So, fluff is a sequence of zero or more comments, but doesn't include the last comment 
that could be an invariant if if is followed by a typedef.  Alas, this is tail recursive, but that 
may or may not be a concern for you.  (Do you expect to parse things with thousands of 
consecutive comment blocks?)

To get rid of tail recursion, we want something like this:

fluff : ((comment comment)=> comment)* flufftail
flufftail : (comment)=> ( (invariant typedef)=> empty | comment ) | empty ;

But, alas, Antlr doesn't support syntactic predicates as predictors of (...)* loops.
(Terence, are you listening?)

  - Mark




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Sat Apr 17 14:57:42 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] Re: How to make antlr parse this
In-Reply-To: <c5s348+eh6i@eGroups.com>
References: <c5s348+eh6i@eGroups.com>
Message-ID: <4085132E-90BA-11D8-9919-000393B5606C@codetransform.com>

>
> fluff : ((comment comment)=> comment)* flufftail
> flufftail : (comment)=> ( (invariant typedef)=> empty | comment ) | 
> empty ;
>
> But, alas, Antlr doesn't support syntactic predicates as predictors of 
> (...)* loops.
> (Terence, are you listening?)

Ter has explained this to me a few times now, though I still can't 
remember how it goes.  It's something like if you allow a predicate to 
break out of a loop it would require a modification to follow set 
computation.  It might be able to be nailed down to a more specific set 
of cases for antlr 3.

By the way, I would probably not deal with this in the parser, I would 
handle it in a tree pass where it would be really easy to search back 
from a typeDefinition to see if an invariant preceeded it.  Of course 
that assumes you are building trees.

Monty
ANTLR Consultant
www.codetransform.com



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From steinkobe88 at yahoo.com  Sat Apr 17 15:21:10 2004
From: steinkobe88 at yahoo.com (steinkobe88)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] Re: C# JML Parser
In-Reply-To: <c5qkhk+fg6r@eGroups.com>
Message-ID: <c5sakm+bgog@eGroups.com>

--- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...> wrote:
> --- In antlr-interest@yahoogroups.com, "steinkobe88"
> <steinkobe88@y...> wrote:
> > I am attempting to build a JML parser in C#.  JML is a java
> > specification language (http://
> > jmlspecs.org)
> > 
> > The tool I need to build will parse JML syntax only.  However, the
> > tool must be writted in 
> > C# and work under the .NET platform.  I want to use ANTLR is
> > conjunction with the 
> > following two grammar files:
> 
> Why must it be written in C#?. Not wishing to start a language war,
> just a dispassionate question about the rationale for your stated
> requirement.
> 
> > http://cvs.sourceforge.net/viewcvs.py/jmlspecs/JML
> > 2/org/jmlspecs/checker/Jml.g
> > http://cvs.sourceforge.net/viewcvs.py/multijava/MJ
> > /org/multijava/mjc/Mjc.g
> 
> > The problem I am having is getting these grammar files to work under
> > C#.  A lot of the 
> > code within these files depends on Java class libraries, which C#
> > does not have access to.  
> > Can ANTLR take these grammar files as inputs and create a C# syntax
> > checker as an 
> > output?
> 
> Yes and No. Yes ANTLR can take the files as input. No, it will not
> automagically create lexers/parsers/treeparsers for a *working* JML
> syntax checker (GJ compiler in the case of MJC) written in C# from
> these input files. It will create exactly what you ask it to -
> lexers/parsers/treeparsers for a syntax checker or compiler written in
> Java. If you change the language option to C# then you will get
> lexers/parsers/treeparsers for a syntax checker or compiler written in
> C# with action code in Java. Neither results in what you want.
> 
> You have three options AFAICT:
> 1. Convert all the action code in the grammars to C#. You will need to
> convert all the supporting code currently written in Java as well.
> Change the language option to C# and build.
> 2. Build the code as is in Java and use the MS J# product to get you a
> working .NET version. Not in C# but it is much less work than (1) and
> you have a better chance of getting it to work. Quickly.
> 3. Build the code as is in Java and use the IKVM.NET tools (see
> www.ikvm.net) to run your code on the .NET/Mono platforms. Not in C#
> but it is much less work than (1) and, it may support JDKv1.1.4+
> features that (2) doesn't support.
> 
> Cheers,
> 
> Micheal
> ANTLR/C#

Michael,

Thanks for your suggestions, I am going to try them out right now.  The parser doesn't 
need to be written in C#; it only needs to run on the .NET platform.

Brandon



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From idontwantanidwith2000init at yahoo.com  Sat Apr 17 16:32:46 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] Re: mystery in printing order
In-Reply-To: <20040416235104.GA10288@cs.utwente.nl>
Message-ID: <c5sequ+bcqr@eGroups.com>

What other functions should I overload?
It looks like a great idea.

Tal.

--- In antlr-interest@yahoogroups.com, Ric Klaren <klaren@c...> 
wrote:
> On Fri, Apr 16, 2004 at 08:48:26PM -0000, 
idontwantanidwith2000init wrote:
> > It is a requirement that all output will be to "stdout" and not 
err.
> 
> Override reportError and friends in your parser/lexer/treewalker...
> 
> Cheers,
> 
> Ric
> --
> -----
+++++*****************************************************+++++++++--
-----
>     ---- Ric Klaren ----- j.klaren@u... ----- +31 53 4893722  ----
> -----
+++++*****************************************************+++++++++--
-----
>   "Good judgement comes from experience.
>      Experience comes from bad judgement." --- Unknown



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Sat Apr 17 17:11:02 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:41 2004
Subject: New antlr-interest member
Message-ID: <1082247062.103.48854.w68@yahoogroups.com>


Hello,

This is an automated email message to let you know that
grant_drake <grant.drake@barclayscapital.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From notify at yahoogroups.com  Sat Apr 17 19:40:25 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:41 2004
Subject: New antlr-interest member
Message-ID: <1082256025.67.7233.w42@yahoogroups.com>


Hello,

This is an automated email message to let you know that
entarchitect <donmac@cox.net> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From notify at yahoogroups.com  Sat Apr 17 20:48:33 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:41 2004
Subject: New antlr-interest member
Message-ID: <1082260113.732.99457.w82@yahoogroups.com>


Hello,

This is an automated email message to let you know that
mircea_vutcovici <mircea_vutcovici@yahoo.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From lists at lischke-online.de  Sun Apr 18 02:26:33 2004
From: lists at lischke-online.de (Mike Lischke)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] Parsing preprocessor
Message-ID: <20040418092111.DDDB157C001@h4866.serverkompetenz.net>

Hi list,

I have just finished my first MSVC resource file parser version and now I want to add support for preprocessor commands. This is simple if I only have complete resource entries between #ifdef/#endif etc. I'm using:

  // ----- The main entry point -----
  resource_definition: 
    (resource_entry)*
  ;
  
  resource_entry: 
    NUMBER_SIGN! preprocessor_entry
    | resource_statement
  ;
  
  //----- Preprocessor directives -----
  preprocessor_entry:
    unconditional_preprocessor_entry
    | conditional_preprocessor_entry
  ;

  unconditional_preprocessor_entry:
    include_statement
    | pragma_preprocessor
    | define_preprocessor
    | "undef"^ IDENTIFIER
  ;
    
  conditional_preprocessor_entry:
    "if"^ expression conditional_preprocessor_part
    | "ifdef"^ resource_identifier conditional_preprocessor_part
    | "ifndef"^ resource_identifier conditional_preprocessor_part
  ;
  
  conditional_preprocessor_part:
    resource_definition (NUMBER_SIGN! else_preprocessor_entry)? NUMBER_SIGN! "endif"
  ;
  
  else_preprocessor_entry:
    "else"^ resource_definition
    | "elif"^ expression conditional_preprocessor_part
  ;
  
This works very well. Unfortunately, #ifdef and the like can also appear everywhere in the source where also white spaces are allowed (just like in C, for example), so I wonder how I can add support for that. Using two parser, one for preprocessor stuff and one for the real stuff, would require a lot of extra work because the first had to feed the second where the AST from the first would need to be transformed to source code for the second parser. A tree parser does not help here as it still would leave the problem open that preprocessor tokens can appear everywhere.

Any hint to solve that problem would be much appreciated.

Mike
--
www.soft-gems.net



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From markl at glyphic.com  Sun Apr 18 08:22:23 2004
From: markl at glyphic.com (Mark)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] Re: Parsing preprocessor
In-Reply-To: <20040418092111.DDDB157C001@h4866.serverkompetenz.net>
Message-ID: <c5u6ff+smp7@eGroups.com>

This sort of preprocessor must be implemented as an entirely separate lexer and parser 
pass that generate a character stream that is then input to your current lexer and parser.

See Syntax Directed TokenStream Rewriting (http://www.antlr.org/article/rewrite.engine/
index.tml) for some ideas on how to accomplish the preprocessor lexer and parser.

- Mark



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Sun Apr 18 08:29:46 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:41 2004
Subject: New antlr-interest member
Message-ID: <1082302186.98.24040.w50@yahoogroups.com>


Hello,

This is an automated email message to let you know that
eelcotje <eelcoe@chello.nl> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From lists at lischke-online.de  Sun Apr 18 08:35:12 2004
From: lists at lischke-online.de (Mike Lischke)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] Re: Parsing preprocessor
In-Reply-To: <c5u6ff+smp7@eGroups.com>
Message-ID: <20040418152948.D819057C001@h4866.serverkompetenz.net>

Hi Mark, 

> See Syntax Directed TokenStream Rewriting 
> (http://www.antlr.org/article/rewrite.engine/
> index.tml) for some ideas on how to accomplish the 
> preprocessor lexer and parser.

Thanks for the hint. This article looks very promising. I'll start reading right now...

Mike
--
www.soft-gems.net



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Sun Apr 18 13:57:56 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:41 2004
Subject: New antlr-interest member
Message-ID: <1082321876.249.22453.w14@yahoogroups.com>


Hello,

This is an automated email message to let you know that
agoebel5232 <ag@j2b.de> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From ag at j2b.de  Sun Apr 18 14:30:03 2004
From: ag at j2b.de (agoebel5232)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] StringTemplare v 1.03 and suggestions for UberStringTemplate
Message-ID: <c5us0r+tmcl@eGroups.com>

I am currently evaluating StringTemplate and I think I found some 
problems with the otherwise nicely performing library:

- The code in StringTemplate.java (and maybe others?) has some 
unreferenced local variables.

- The examples given in the documentation under the heading "Applying 
Templates To Multi-Valued Attributes" do not work as advertised 
because StringTemplate does a trim() while reading templates and thus 
deleting leading and trailing white space. The output of the first 
example is:

<ul>
<li>Terence</li><li>Tom</li><li>Jim</li>
</ul>

and not:

<ul>
<li>Terence</li>
<li>Tom</li>
<li>Jim</li>
</ul>

Either change the example (easy enough) or remove the trim() while 
reading the code (might be better...).

- In the same example, when I use the following form to set the 
attributes, the result is not what I would expect.

    Vector names = new Vector();
    names.add( "Mary Ellen" );
    names.add( "Jim Bob" );
    names.add( "John-Boy" );
    list.setAttribute( "names", names );
    list.setAttribute("names", "Elizabeth" );
    System.out.println( list );

Will give me:

<ul>
<li>Mary EllenJim BobJohn-Boy</li>
<li>Elizabeth</li>
</ul>

and NOT: 

<ul>
<li>Mary Ellen</li>
<li>Jim Bob</li>
<li>John-Boy</li>
<li>Elizabeth</li>
</ul>

I have also read your suggestions for UberStringTemplate and in 
addition to $else$ I would like to see $elseif$ (like in Velocity) 
because it would clean the templates up a little bit and the 
possibility to call arbitrary no args methods (not only getters) on 
attributes would be nice.

If you set up a project with CVS access for StringTemplate I would  
contribute some code changes...

Andreas. 




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From mailinglist at august.de  Sun Apr 18 19:17:28 2004
From: mailinglist at august.de (Rolf Schumacher)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] pipelined lexing
Message-ID: <408336B8.6010302@august.de>

I would like to scan strings like:

aabaacaaaac

There I would like to find
1. all ac's
2. all aa's provided that ac's were consumed
3. a's and b's provided that all double char strings were consumed

In tokens: AA  B  A  AC  AA  A  AC

my solution works but looks a bit ugly to me (about unmaintainable).
Any better idea?

Rolf

-------------solution:

class TParser extends Parser;
all: ( AC | AA | A | B )* ;

class TLexer extends Lexer;
options { k = 3; }

WS: ( ' ' | '\n' {newline();}) {_ttype = Token.SKIP;};
AC: "ac";
AA: { LA(3)!='c' }? "aa";
A:  { ( LA(2)!='a' && LA(2)!='c' ) || ( LA(2) == 'a' && LA(3) == 'c' ) 
}? 'a';
B: 'b';


--------------

p.s.
Briefly I looked into TokenStreams.
Might that be possibility if performance is not an issue but maintenance?
Or let me put it that way:
Am I able to define a grammar in order to produce filters?
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 1730 bytes
Desc: S/MIME Cryptographic Signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20040419/0dfa4767/smime.bin
From anakreonmejdi at yahoo.gr  Mon Apr 19 05:02:34 2004
From: anakreonmejdi at yahoo.gr (Anakreon)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] charVocabulary
Message-ID: <4083BFDA.20607@yahoo.gr>

Hello list.
I have a problem with the lexer.
When it finds a Greek character (is delta [?]) an error is produced with this 
message:
unexpected char: 0xr4
The charVocabulary is:
charVocabulary = '\3'..'\377' | '\u1000'..'\u1fff';
Should I choose an other range of characters?
Also, the message seems strange because there is no hex number with an [r] in it.
Hex numbers are ('0' .. '9' | 'a' .. 'f')+

Anakreon.


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Mon Apr 19 05:44:34 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:41 2004
Subject: New antlr-interest member
Message-ID: <1082378674.88.31554.w23@yahoogroups.com>


Hello,

This is an automated email message to let you know that
bugbuster13579 <bugbuster13579@yahoo.de> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From monty at codetransform.com  Mon Apr 19 06:21:07 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] pipelined lexing
In-Reply-To: <408336B8.6010302@august.de>
References: <408336B8.6010302@august.de>
Message-ID: <6AF8FEBB-9204-11D8-952B-000393B5606C@codetransform.com>

> Or let me put it that way:
> Am I able to define a grammar in order to produce filters?

Yes, with some caveats.  You have to know what you are doing, but that 
is explained in my article.  Basically you have to manually create the 
output TokenStream and you have to hook everything together by creating 
a nextToken() rule that figures out how to call the correct parser 
rules.

http://www.codetransform.com/filterexample.html

Monty
ANTLR Consultant
www.codetransform.com





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From xserty at yahoo.it  Mon Apr 19 03:59:16 2004
From: xserty at yahoo.it (xserty)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] jars and exceptions
Message-ID: <c60be4+7h52@eGroups.com>

Hi all,
 Hope somebody can help me with these problem...

I'm trying to develop a plugin for jEdit that parses a formula using
antlr.

I'm working on two "seperate" projects, say ParserProject and
ParserPluginProject.
- ParserProject is the (generated) parser which relies on antlr
(included in an external jar) and throws exceptions defined in
antlr.jar.
- ParserPluginProject is a GUI plugin for that parser, so it relies on
ParserProject.jar and antlr.jar (I have included these in
ParserPluginProject's classpath).

I compiled ParserProject and made a jar out of it - ParserProject.jar
- (I did not include antlr source or jar in it).
I included ParserProject.jar as well as a copy of antlr.jar in the
classpath of ParserPluginProject and compiled ParserPluginProject.

As you can imagine, ParserPluginProject calls ParserProject
The problem arises when I try to catch, within ParserPluginProject, an
exception (eg: antlr.TokenStreamException) thrown by ParserProject:
I'm not able to catch them!
As I mentioned, these exceptions are defined in antlr.jar.

I'll try to explain better happens with this code snippet:

try {
  ParserProject.parseFormula(formula);
} catch (antlr.RecognitionException e) {
  System.err.println("1 - RecognitionException: " + e.getClass());
} catch (antlr.TokenStreamRecognitionException e) {
  System.err.println("2 - TokenStreamRecognitionException: " +
e.getClass());
} catch (antlr.TokenStreamException e) {
  System.err.println("3 - TokenStreamException: " + e.getClass());
} catch (Exception e) {
  System.err.println("4 - Exception class: " + e.getClass());
  if (e instanceof antlr.TokenStreamException)
    System.err.println("ok");
  else
    System.err.println("different");
}


The above code snippet gives the following results:

run:
     [java] [error] 4 - Exception class: class
antlr.TokenStreamRecognitionException
     [java] [error] different

The code in the first three catch blocks are never reached!

Seems that they are two different definitions of the exception
TokenStreamRecognitionException, but I'm using two identical copies of
 antlr.jar for both projects!!
I really do not understand what is happening!

Regards,
  Xserty




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From xserty at yahoo.it  Mon Apr 19 06:27:36 2004
From: xserty at yahoo.it (xserty)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] java.lang.NoSuchFieldError: tokenTypeToASTClassMap
Message-ID: <c60k48+8km5@eGroups.com>

Hi all...
  My generated parser (ExpressionParser) contains the following method:

protected void buildTokenTypeASTClassMap() {
  tokenTypeToASTClassMap=null;
};

This method contains a field (tokenTypeToASTClassMap) which is not
defined anywhere, thus I get the exception:

java.lang.NoSuchFieldError: tokenTypeToASTClassMap

Any advice on how I can avoid this?

In my *.g file I've set the option to build the AST:

class ExpressionParser extends Parser;
options { buildAST=true; }

and I only gave a Lexer and a Parser definition.

Regards,
  Xserty



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Mon Apr 19 08:59:30 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:41 2004
Subject: New antlr-interest member
Message-ID: <1082390370.98.71326.w39@yahoogroups.com>


Hello,

This is an automated email message to let you know that
lorenavare <lorenavare@yahoo.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From notify at yahoogroups.com  Mon Apr 19 09:11:36 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:41 2004
Subject: New antlr-interest member
Message-ID: <1082391096.233.95527.w30@yahoogroups.com>


Hello,

This is an automated email message to let you know that
jlwa1ker <walker@jlwalkerassociates.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From bharath at starthis.com  Mon Apr 19 09:47:01 2004
From: bharath at starthis.com (Bharath S)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] Grammar for Time,date types.
Message-ID: <000001c4262d$f072b690$03020a0a@devel.starthis.com>

Hi grp,

 

Does anyone have example grammar rules for units of time? (seconds, minutes,
hours etc). I have a working set of rules for the same and it requires
explicit usage of the "protected" keyword, which I am not very fond of. I
looked at the Java grammar, Pascal grammar and several others but none of
them have written grammar rules for TIME units.

 

Thanks!

 

Bharath.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040419/227b1a25/attachment.html
From a_urazov at mail.ru  Mon Apr 19 09:43:01 2004
From: a_urazov at mail.ru (Andrey R. Urazov)
Date: Mon Dec 20 16:16:41 2004
Subject: [antlr-interest] TokenStreamRewriteEngine and C++
Message-ID: <20040419164301.GA1831@ktulu>

Hello all,

I wonder whether the TokenStreamRewriteEngine has been implemented in
C++ since I scanned the sources and found only Java and C# versions.

Best regards, 

    Andrey Urazov



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From lorenavare at yahoo.com  Mon Apr 19 09:17:08 2004
From: lorenavare at yahoo.com (=?iso-8859-1?q?lorena=20varela?=)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] help with pl/sql grammar
Message-ID: <20040419161708.71088.qmail@web12401.mail.yahoo.com>

Hi list.

I have a problem.  I'm work with the plugin ANTLR
Version 2.7.2 for eclipse. The problem is that when
inserted the gramatica generates this error:

TokenStreamException: expecting '(', found 'e'

I send the t.g that is the file where is the grammar.

excuse me for my english

_________________________________________________________
Do You Yahoo!?
Informaci?n de Estados Unidos y Am?rica Latina, en Yahoo! Noticias.
Vis?tanos en http://noticias.espanol.yahoo.com

 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
class MyParser extends Parser; // definici?n de un analizador sint?ctico

start_rule: (statement);
statement :	
	("<<" label_name ">>")?
	( assignment_statement
	| close_statement
	| execute_immediate_statement
	| execute_statement
	| explain_plan_statement
	| exit_statement
	| fetch_statement
	| forall_statement
	| goto_statement
	| if_statement
	| loop_statement
	| null_statement
	| open_for_statement
	| open_statement
	| function_declaration
	| procedure_declaration
	| plsql_block
	| rename_statement
	| raise_statement
	| return_statement
	| call_statement
	| noaudit_statement
	| associate_statistics
	| create_type
	| create_type_body
	| create_operator
	| create_table
	| create_tablespace
	| create_temporary_tablespace
	| create_trigger
	| create_cluster
	| create_context
	| create_controlfile
	| create_index
	| create_indextype
	| create_database_link
	| create_database
	| create_dimension
	| create_directory
	| create_library
	| create_outline
	| create_pfile
	| create_synonym
	| create_package
	| create_package_body
	| create_procedure
	| create_profile
	| create_role
	| create_user
	| create_rollback_segment
	| create_schema
	| create_view
	| create_materialized_view_log
	| create_materialized_view
	| grant_statement
	| set_transaction_statement	
	| revoke_statement
	| create_snapshot
	| create_function
	| drop_cluster
	| drop_database_link
	| drop_directory
	| drop_dimension
	| drop_function
	| drop_index
	| drop_indextype
	| drop_context
	| drop_library
	| drop_operator
	| drop_package
	| drop_procedure
	| drop_profile
	| drop_role
	| drop_rollback_segment
	| drop_sequence
	| drop_snapshot
	| drop_synonym
	| drop_table
	| drop_tablespace
	| drop_trigger
	| drop_type
	| drop_type_body
	| drop_user
	| drop_view
	| drop_materialized_view
	| drop_materialized_view_log
	| drop_outline
	| disassociate_statistics
	| case_statement
	| commit_statement
	| delete_statement
	| insert_statement
	| lock_table_statement
	| rollback_statement
	| savepoint_statement
	| select_statement
	| truncate_statement
	| update_statement
	| alter_database_statement
	| alter_cluster_statement
	| alter_dimension_statement
	| alter_function_statement
	| alter_procedure_statement	
	| alter_profile_statement	
	| alter_index_statement
	| alter_indextype_statement
	| alter_operator_statement
	| alter_outline_statement
	| alter_package_statement
	| alter_resource_statement
	| alter_role_statement
	| alter_rollback_statement
	| alter_sequence_statement
	| alter_session_statement
	| alter_snapshot_statement
	| alter_system_statement
	| alter_table_statement
	| alter_tablespace_statement
	| alter_trigger_statement
	| alter_type_statement
	| alter_user_statement
	| alter_view_statement
	| alter_materialized_view_log
	| alter_materialized_view_statement
	| analyze_statement
	| audit_statement
	| comment_statement
	| merge_statement
	| set_role
	| set_constraints
	
	// java
	| create_java
	| alter_java_statement
	| drop_java_statement
	
	| expression
	| ";"
	| "/"
	) (";")?
	|
	"<<" label_name ">>" ;

select_statement : 
	(subquery | select_into_statement)
	(for_update_clause)?;

subquery :
	(subquery_factoring_clause)?  
	"SELECT" (hint)? 
	(distinct_all_or_unique)? select_list
	from_clause
	(where_clause)?
	(hierarchical_query_clause)?
	(group_by_clause)?
	(having_clause)?
	(subquery_clause)?
	(order_by_clause)?
	;
	
select_into_statement :
	"SELECT" 
	(distinct_or_all)? select_list
	select_into_clause 
	from_clause
	(where_clause)?
	(hierarchical_query_clause)?
	(group_by_clause)?
	(having_clause)?  
	(subquery_clause)?
	(order_by_clause)? ;

from_clause :
	"FROM" 
	{   table_reference 
	  | ("THE")? "(" subquery ")" (alias)?
	, "," };

having_clause :
	"HAVING" condition ;

subquery_clause :
	subquery_operator
	( "(" subquery ")" 
	  | subquery );
	
subquery_operator :	
	  "UNION" ("ALL")?
	| "INTERSECT" 
	| "MINUS" 
	;

select_item :
	(
	  null_tag
	| numeric_literal
	| qualified_name ("." "*" | "." ("CURRVAL" | "NEXTVAL"))?
	| function_name ("(" {parameter_name, ","} ")")?)
	| squotedstring
	(("AS")? alias)? ;
	
subquery_factoring_clause :
	"WITH" 
	{query_name "AS" "(" subquery ")", ","} ;

select_list :
	"*"
	| {   query_name "." "*"
	    | (schema ".")? (table | view) ".*" 
	    | expression (("AS")? c_alias)?
	  , "," };

table_reference :
	(
	  only_reference_clause
	| "(" table_reference ")"
	| table column_list
	| "TABLE" "(" expression ")" (t_alias)?
	| query_table_expression (flashback_clause)? (t_alias)?
	)
	(joined_table_clause)? ;
	
joined_table_clause :	
	  join_on_condition_clause 
	| cross_join_clause
	| natural_join_clause
	;

join_on_condition_clause :
	(join_type)? "JOIN" table_reference 
	("ON" condition | "USING" column_list );

cross_join_clause :
	"CROSS" "JOIN" ;

natural_join_clause :
	"NATURAL" (join_type)? 
	"JOIN" table_reference ;

join_type :
	  "INNER" 
	| ( "LEFT" 
	  | "RIGHT" 
	  | "FULL") ("OUTER")?;

flashback_clause :
	"AS" "OF" scn_or_timestamp
	expression ;
	
scn_or_timestamp :	
	"SCN" | "TIMESTAMP" ;
	
only_reference_clause :	
	"ONLY" query_table_expression 
	(flashback_clause)? ;
	
query_table_expression :	
	(schema ".")? 
	  ( table ( (  "PARTITION" "(" partition ")"
        	       | "SUBPARTITION" "(" subpartition ")"
	            ) (sample_clause)?
	           | "@" dblink
        	     | sample_clause
        	  )?
	     | { view } ("@" dblink)?
	  )
	| "(" subquery (subquery_restriction_clause)? ")"
	| query_name
	;

sample_clause :
	"SAMPLE" (block_tag)? "(" sample_percent ")" ;
	
block_tag : 
	"BLOCK" ;
	
subquery_restriction_clause :
	"WITH" ("READ" "ONLY" 
		| "CHECK" "OPTION" ("CONSTRAINT" constraint)?) ;

table_collection_expression :
	"TABLE" "(" collection_expression ")" 
	("(" "+" ")")? ;

hierarchical_query_clause :
	("START" "WITH" start_with_expression)?
	"CONNECT" "BY" connect_by_expression ;
	
start_with_expression :
	expression ;	
	
connect_by_expression :
	expression ;	

group_by_clause :
	"GROUP" "BY"
	{  rollup_cube_clause 
	 | grouping_sets_clause
	 | expression 
	 , ","}
	(having_clause)?;

rollup_cube_clause :
	("ROLLUP" | "CUBE") 
	"(" grouping_expression_list ")";

grouping_sets_clause :
	"GROUPING" "SETS" 
	"(" (rollup_cube_clause | grouping_expression_list) ")";

grouping_expression_list:
	{expression_list, ","} ;

order_by_clause :
	"ORDER" ("SIBLINGS")? "BY" 
	{(expression | position | c_alias) 
	 (ascending_or_descending)? 
	 ("NULLS" "FIRST" | "NULLS" "LAST")?, ","} ;
	 
for_update_clause :
	"FOR" "UPDATE"
	("OF" {qualified_name, ","})? 
	( "NOWAIT" | "WAIT" integer )?;

select_into_clause :
	"INTO" 
	({variable_name ("(" expression ")")? , ","} | record_name);

merge_statement :
	"MERGE" (hint)? "INTO" 
	(schema ".")? table (t_alias)? 
	"USING" (schema ".")? 
	(table | view | "(" subquery ")" )
	(t_alias)? "ON" "(" condition ")" 
	"WHEN" "MATCHED" 
		"THEN" merge_update_clause 
	"WHEN" "NOT" "MATCHED" 
		"THEN" merge_insert_clause ;

merge_update_clause :
	"UPDATE" "SET" 
	{column "=" (expression | default_tag), ","};

merge_insert_clause :
	"INSERT" column_list 
	"VALUES" "(" {expression, ","} ")" ;

set_role :
	"SET" "ROLE"
	(   "ALL" ("EXCEPT" {role,","})?
	  | "NONE"
	  | {role ("IDENTIFIED" "BY" password)?, ","}
	)
	;

set_constraints :
	"SET" ("CONSTRAINT" | "CONSTRAINTS") 
	("ALL" | {constraint, ","})

	("IMMEDIATE" | "DEFERRED");

rollback:
	"ROLLBACK" ("WORK")? 
	( "TO" ("SAVEPOINT")? savepoint | "FORCE" string )?;

truncate_statement :
	"TRUNCATE" 
	("TABLE" qualified_name 
		(("PRESERVE" | "PURGE") 
		  "MATERIALIZED" "VIEW" "LOG")?
	| "CLUSTER" qualified_name
	)
	(reuse_or_drop_storage)? ;

update_statement :
	"UPDATE" (hint)?
	(  dml_table_expression_clause 
	 | "ONLY" "(" dml_table_expression_clause ")" )
	(t_alias)? 
	update_set_clause 
	(where_clause)? 
	(returning_clause)?;


	
update_set_clause :
	"SET"
	(
	 {  column_list "=" "(" subquery ")"
	  | column "=" ( expression | "(" subquery ")" | default_tag ) , "," }
	  | "VALUE" "(" t_alias ")" "=" (expression | "(" subquery ")" )
	)
	;	
	
where_clause :
	"WHERE" condition ;
	
variance:
	"VARIANCE" "(" (distinct_or_all)? expression ")" 
	("OVER" "(" analytic_clause ")")? ;
	
var_pop:
	"VAR_POP" "(" expression ")" 
	("OVER" "(" analytic_clause ")")? ;
	
var_samp:
	"VAR_SAMP" "(" expression ")" 
	("OVER" "(" analytic_clause ")")? ;

vsize:
	"VSIZE" "(" expression ")" ;
	
width_bucket:
	"WIDTH_BUCKET" 
	"(" expression "," min_value "," 
		max_value "," num_buckets ")" ;


exception_declaration :
	exception_name "EXCEPTION" ;

exception_handler :
	"WHEN" 
	( {exception_name, "OR"}
        | "OTHERS" ) 
	"THEN" {statement} ;

delete_statement :
	 "DELETE" ("FROM")? (table_reference 
		 | ("THE")? "(" subquery ")" ) 
	 (alias)?
	 ("WHERE" (search_condition 
		 | "CURRENT_OF" cursor_name))? 
	 (returning_clause)?;
	 
returning_clause :
	 ("RETURNING")?
	 ({single_row_expression, ","}   
	 	"INTO" {bind_argument, ","}
	 |{multiple_row_expression, ","} 
	 	"INTO" {bind_argument, ","} )?;
	
bind_argument : 
	  variable_name 
	| ":" host_variable_name
	| number
	;
 
hint :	// hints are contained in comments
	  ("/*+") *("*/") "*/"
	| ("--+") *(#eol) ;

insert_statement :
	"INSERT" (hint)? 
	(single_table_insert | multi_table_insert);
	
single_table_insert :
	insert_into_clause 
	(values_clause (insert_returning_clause)? 
		| subquery | "(" subquery ")") ;

insert_into_clause :
	"INTO" dml_table_expression_clause (t_alias)? 
	(column_list)? ;

values_clause :
	"VALUES" "(" { default_tag | expression, ","} ")" ;

insert_returning_clause :
	"RETURNING" {expression,","} 
	"INTO" {bind_argument, ","}; 
	
multi_table_insert :	
	("ALL" {insert_into_clause (values_clause)?}
	  | conditional_insert_clause
	)
	(subquery | "(" subquery ")") ;
	
conditional_insert_clause :	
	("ALL" | "FIRST" )? 
	{"WHEN" condition "THEN" 
		{insert_into_clause (values_clause)?}}
	("ELSE" {insert_into_clause (values_clause)?})? ;
	

commit_statement :
	"COMMIT" ("WORK")? 
	("COMMENT" squotedstring)? ;

rollback_statement :
	"ROLLBACK" ("WORK")? 
	("TO" ("SAVEPOINT")? savepoint_name)?;

savepoint_statement :
	"SAVEPOINT" savepoint_name;

lock_table_statement :
	"LOCK" "TABLE" {table_reference, ","}
	"IN" lock_mode "MODE" ("NOWAIT")?;

lock_mode :
	  "ROW" ("SHARE" | "EXCLUSIVE")
	| "SHARE" ("UPDATE" | "ROW" "EXCLUSIVE")?
	| "EXCLUSIVE"
	;
	
noaudit_statement :
	"NOAUDIT" 
	({sql_statement_clause, ","} 
		| {schema_object_clause, ","})
	("WHENEVER" (not_tag)? "SUCCESSFUL")?;

associate_statistics :
	"ASSOCIATE" "STATISTICS" "WITH"
	(column_association | function_association) ;
	
column_association :	
	"COLUMNS" {qualified_name, ","}
	using_statistics_type ;
	
function_association :
	associated_item {qualified_name, ","}
	( using_statistics_type 
	| ( {default_cost_clause, ","}
	  | {default_selectivity_clause, ","}
	  )
	);
	
using_statistics_type :	
	"USING" (qualified_name | "NULL") ;
	
default_cost_clause :
	"DEFAULT" "COST" 
	"(" cpu_cost "," io_cost "," network_cost ")" ;
	
	cpu_cost : numeric ;
	io_cost : numeric ;
	network_cost : numeric ;
	
default_selectivity_clause :	
	"DEFAULT" "SELECTIVITY" default_selectivity ;

	default_selectivity : numeric;

create_table :
	  relational_table 
	| object_table 
	| XMLType_table
	;

relational_table :
	"CREATE" (global_temporary)? "TABLE" 
	(schema ".")? table ^"OF"
	("(" relational_properties ")")? 
	(on_commit_clause)?
	({physical_properties | table_properties})?;
	
object_table :
	"CREATE" (global_temporary)? "TABLE" 
	(schema ".")? table 
	"OF" (schema ".")? object_type 
	(object_table_substitution)?
	("(" object_properties ")")? 
	(on_commit_clause)?
	(OID_clause)? (OID_index_clause)? 
	(physical_properties)? 
	(table_properties)?;

global_temporary :	
	"GLOBAL" "TEMPORARY" ;

on_commit_clause :
	"ON" "COMMIT" delete_or_preserve "ROWS" ;
	
delete_or_preserve :	
	  "DELETE" 
	| "PRESERVE" ;
	
relational_properties :
	  {   column (datatype)? (default_tag expression)? 
	      ({inline_constraint | inline_ref_constraint})?
	    | out_of_line_constraint 
	    | out_of_line_ref_constraint 
	    | supplemental_logging_props
	  , (",")?};

object_properties :
	{
		(column | attribute) (default_tag expression)? 
		  ({inline_constraint} | inline_ref_constraint)?
		| out_of_line_constraint 
		| out_of_line_ref_constraint 
		| supplemental_logging_props
	, (",")?};

object_table_substitution :
	substitutable_clause ;

OID_clause :
	"OBJECT" plsql_identifier "IS" 
	("SYSTEM" "GENERATED" | "PRIMARY" "KEY");

OID_index_clause :
	"OIDINDEX" (index)? 
	"(" {physical_attributes_clause | tablespace_spec} ")" ;

tablespace_spec :
	"TABLESPACE" tablespace ;

physical_properties :
	{
	  segment_attributes_clause (data_segment_compression)?
	| organization_heap_clause
	| organization_index_clause
	| organization_external_clause
	| "CLUSTER" cluster column_list
	};

organization_heap_clause :
	"ORGANIZATION" "HEAP" 
	(segment_attributes_clause)? 
	(data_segment_compression)? ;

organization_index_clause :
	"ORGANIZATION" "INDEX" 
	(segment_attributes_clause)? 
	(index_org_table_clause)? ;

organization_external_clause :
	"ORGANIZATION" "EXTERNAL" 
	external_table_clause ;

segment_attributes_clause :
	{  physical_attributes_clause
	 | tablespace_spec
	 | logging_clause
	} ;

physical_attributes_clause :
	{   pctfree_spec
	  | pctused_spec
	  | inittrans_spec
	  | maxtrans_spec
	  | storage_clause
	} ;

pctfree_spec : 
	"PCTFREE" integer ;
	
pctused_spec :
	"PCTUSED" integer	;

inittrans_spec :
	"INITRANS" integer ;

maxtrans_spec :
	"MAXTRANS" integer ;

storage_clause :	
	"STORAGE"
	("(")?
	 {  storage_initial_spec
	  | storage_next_spec 
	  | minextents_spec
	  | maxextents_spec
	  | pctincrease_spec
	  | freelists_spec
	  | freelist_groups_spec
	  | storage_optimal_spec
	  | buffer_pool_spec 
	  }
	(")")?;

storage_initial_spec :
	"INITIAL" integer (K_or_M)? ;

storage_next_spec :
	"NEXT" integer (K_or_M)? ;

minextents_spec :
	"MINEXTENTS" integer ;

maxextents_spec :
	"MAXEXTENTS" (integer | "UNLIMITED"); 
	
pctincrease_spec : 
	"PCTINCREASE" integer ;

freelists_spec :
	"FREELISTS" integer ;

freelist_groups_spec :
	"FREELIST" "GROUPS" integer ;

storage_optimal_spec :
	"OPTIMAL" (integer (K_or_M)? | null_tag)? ;

buffer_pool_spec :
	"BUFFER_POOL" buffer_pool_option ;
	
buffer_pool_option :	
	  "KEEP" 
	| "RECYCLE" 
	| "DEFAULT" ;
	
data_segment_compression :
	  "COMPRESS" 
	| "NOCOMPRESS" ;
	
table_properties :
	(column_properties)? 
	(table_partitioning_clauses)? 
	(row_movement_clause)?
	(cache_clause)? 
	(rowdependencies_spec)?
	(monitoring_spec)?
	(parallel_clause)? 
	({ enable_disable_clause })?
	("AS" subquery)? ;

column_properties :
	{column_property} ;
	
column_property :	
	  object_type_col_properties
	| nested_table_col_properties
	| (varray_col_properties | LOB_storage_clause) 
	  (LOB_partition_storage)?
	| XMLType_column_properties
	;

object_type_col_properties :
	"COLUMN" column 
	substitutable_column_clause ;

substitutable_column_clause :
	  ("ELEMENT")? "IS" "OF" ("TYPE")? 
	  "(" ("ONLY")? type ")"
	| substitutable_clause ;
	
nested_table_col_properties :
	"NESTED" "TABLE" 
	(nested_item | "COLUMN_VALUE")
	(substitutable_column_clause)? 
	store_as_table_clause
	("(" ("(" object_properties ")")? 
	(physical_properties)? (column_properties)? ")" )?
	("RETURN" "AS" ("LOCATOR" | "VALUE") )?;

store_as_table_clause : 
	"STORE" "AS" storage_table ;

varray_col_properties :
	"VARRAY" varray_item 
	(   substitutable_column_clause
	  | "STORE" "AS" "LOB"
	    (LOB_segname ("(" LOB_parameters ")")? 
	      | "(" LOB_parameters ")")
	);

LOB_storage_clause :
	"LOB"
	(  "(" {LOB_item, ","} ")" 
		"STORE" "AS" "(" LOB_parameters ")"
	 | "(" LOB_item ")"        
		 "STORE" "AS" 
	    	(LOB_segname ("(" LOB_parameters ")")? 
		    	| "(" LOB_parameters ")")
	);
	
LOB_parameters :
	{ tablespace_spec
	| storage_in_row_clause 
	| storage_clause
	| chunk_clause
	| pctversion_clause
	| retention_tag 
	| freepools_clause
	| cache_clause
	};
	
storage_in_row_clause :		
	enable_or_disable "STORAGE" "IN" "ROW" ;
		
logging_clause :
	  "LOGGING" 
	| "NOLOGGING" ;
	
pctversion_clause :
	"PCTVERSION" integer ;
	
retention_tag :
	"RETENTION"	;

freepools_clause :
	"FREEPOOLS" integer ;
	
chunk_clause :
	"CHUNK" integer ;
	
LOB_partition_storage :
	"PARTITION" partition 
	{LOB_storage_clause | varray_col_properties}
	("(" "SUBPARTITION" subpartition 
	   {LOB_storage_clause | varray_col_properties}
	 ")"
	)?;

row_movement_clause :
	enable_or_disable "ROW" "MOVEMENT" ;

index_org_table_clause :
	{ mapping_table_clauses
	 | pctthreshold_clause
	 | key_compression
	 | index_org_overflow_clause
	}
	;

index_org_overflow_clause :
	("INCLUDING" column)? 
	({segment_attributes_clause 
	  | pctthreshold_clause})?
	"OVERFLOW"
	(segment_attributes_clause)?;
	
mapping_table_clause :
	  "MAPPING" "TABLE"
	| "NOMAPPING" ;

pctthreshold_clause :
	"PCTTHRESHOLD" integer ;

key_compression :
	  "COMPRESS" (integer)? 
	| "NOCOMPRESS" ;

supplemental_logging_props :
	"SUPPLEMENTAL" "LOG" "GROUP" 
	log_group column_list
	("ALWAYS")? ;

external_table_clause :	
	"(" ("TYPE" access_driver_type)? 
		external_data_properties ")" 
	("REJECT" "LIMIT" (integer | "UNLIMITED"))? ;

external_data_properties :
	"DEFAULT" "DIRECTORY" directory
	("ACCESS" "PARAMETERS" 
		("(" opaque_format_spec ")" 
			| "USING" "CLOB" subquery))?
	"LOCATION" "(" {(directory ":")? 
		location_specifier, ","} ")" ;

opaque_format_spec : 
	  record_format_info
	| fields_clause ;

record_format_info : 
	"RECORDS" record_size_spec
  	({ record_format_option })?
   	(fields_clause)?;
   	
record_size_spec :
	  fixed_record_size
	| variable_record_size
	| delimited_record_size ;
	
fixed_record_size :	
	"FIXED" integer ;
	
variable_record_size :	
	"VARIABLE" integer ;
	
delimited_record_size :
	"DELIMITED" "BY" delimited_by_spec ;
	
delimited_by_spec :	
	  "NEWLINE" 
	| string ;

record_format_option :
	  record_format_characterset
	| record_format_endian
	| record_format_BOM
	| record_format_string_sizes
	| record_format_load_when
	| record_format_badfile 
	| record_format_discardfile
	| record_format_logfile
	| record_format_readsize
	| record_format_date_cache
	| record_format_skip
   	;

record_format_characterset :
	"CHARACTERSET" string ;
	
record_format_endian :
	"DATA" "IS" little_or_big "ENDIAN" ;
	
little_or_big :	
	  "LITTLE" 
	| "BIG" ;
	
record_format_BOM :
	"BYTE" "ORDER" "MARK" 
	check_or_nocheck ;
	
check_or_nocheck :	
	  "CHECK" 
	| "NOCHECK" ;
	
record_format_string_sizes :
	"STRING" "SIZES" "ARE" "IN" 
	bytes_or_characters ;
	
bytes_or_characters :	
	  "BYTES" 
	| "CHARACTERS" ;
	
record_format_load_when :
	"LOAD" "WHEN" condition_spec ;
	
record_format_badfile :
	  "NOBADFILE" 
	| "BADFILE" 
		(directory_object_name ":" )? filename ;

record_format_discardfile :
	  "NODISCARDFILE" 
	| "DISCARDFILE" 
		(directory_object_name ":" )? filename ;

record_format_logfile :
	  "NOLOGFILE" 
	| "LOGFILE" 
		(directory_object_name ":" )? filename ;

record_format_readsize :
	"READSIZE" integer ;

record_format_date_cache :
	"DATE_CACHE" integer ;
	
record_format_skip :
	"SKIP" integer ;
	
fields_clause : 
	"FIELDS" (delim_spec)? (trim_spec)? 
	(missing_field_values_are_null)? 
	(reject_rows_with_all_null_fields)? 
	(field_list)? ;

missing_field_values_are_null :
	"MISSING" "FIELD" "VALUES" "ARE" "NULL" ;

reject_rows_with_all_null_fields :
	"REJECT" "ROWS" "WITH" "ALL" "NULL" "FIELDS" ;

position_spec :
	("POSITION")? 
	"(" (pos_start | "*")
	    (("+" | "-") pos_increment)?
	    ":"
	    (pos_end | pos_length) ")" ;
	
	pos_start 	  : number;
	pos_increment : number;
	pos_end 	  : number;
	pos_length 	  : number;

delim_spec :
	  "ENCLOSED" "BY" string ("AND" string)? 
	| "TERMINATED" "BY" (string | "WHITESPACE") 
	  (("OPTIONALLY")? "ENCLOSED" "BY" string ("AND" string)?)? ;

trim_spec : 
	  "LRTRIM" 
	| "NOTRIM" 
	| "LTRIM" 
	| "RTRIM" 
	| "LDRTRIM"
	;

field_list : 
	"(" {field_name (position_spec)? 
	(datatype)? (init_spec)?, ","} ")";


location_specifier : squotedstring ;

init_spec :
	("DEFAULTIF" | "NULLIF") 
	condition;

table_partitioning_clauses :
	  range_partitioning
	| hash_partitioning 
	| list_partitioning
	| composite_partitioning
	;

range_partitioning :
	"PARTITION" "BY" "RANGE" column_list
	  "(" {"PARTITION" (partition)? range_values_clause 
	    table_partition_description, ","} ")" ;
	
hash_partitioning  :
	"PARTITION" "BY" "HASH" column_list
	(  individual_hash_partitions 
	 | hash_partitions_by_quantity);

list_partitioning :
	"PARTITION" "BY" "LIST" "(" column ")"
	"(" {"PARTITION" (partition)? list_values_clause 
		table_partition_description, ","} ")" ;

composite_partitioning :
	"PARTITION" "BY" "RANGE" column_list
	( subpartition_by_list | subpartition_by_hash )? 
	  "(" {"PARTITION" (partition)? range_values_clause 
	  	table_partition_description, ","} ")" ;

subpartition_by_hash :
	"SUBPARTITION" "BY" "HASH" column_list
	("SUBPARTITIONS" quantity (store_in_clause)?
	 | subpartition_template )?;

individual_hash_partitions :		
	"(" {"PARTITION" (partition 
		partitioning_storage_clause)?, ","} ")" ;

hash_partitions_by_quantity :
	"PARTITIONS" hash_partition_quantity 
	(store_in_clause)?
	("OVERFLOW" store_in_clause)? ;

subpartition_by_list :
	"SUBPARTITION" "BY" "LIST" "(" column ")" 
	(subpartition_template)? ;
	
subpartition_template :
	"SUBPARTITION" "TEMPLATE"
	"(" {SUBPARTITION subpartition 
		(list_values_clause)? 
		(partitioning_storage_clause)?, ","} ")" 
	| hash_subpartition_quantity ;
	
range_values_clause :
	"VALUES" "LESS" "THAN"
	  "(" {value | "MAXVALUE", ","} ")" ;
	  
list_values_clause :
	"VALUES" "(" 
	{ value 
	| null_tag 
	| default_tag, "," } 
	")" ;

table_partition_description :
	(segment_attributes_clause)? 
	(data_segment_compression)? 
	(key_compression)?
	(table_partition_overflow_clause)?
	({ LOB_storage_clause | varray_col_properties })?
	(partition_level_subpartition)? ;
	
table_partition_overflow_clause :	
	"OVERFLOW" (segment_attributes_clause)? ;
	
partition_level_subpartition :	
	  "SUBPARTITIONS" hash_subpartition_quantity 
	  (store_in_clause)?
	| "(" {subpartition_spec, ","} ")" ;
	
subpartition_spec :	
	"SUBPARTITION" (subpartition)? 
	(list_values_clause)? 
	(partitioning_storage_clause)? ;

partitioning_storage_clause :
	( { tablespace_spec
	  | partitioning_storage_overflow_clause
	  | partitioning_storage_lob_clause 
	  | partitioning_storage_varray_clause
	  }
	)? ;

partitioning_storage_overflow_clause :
	"OVERFLOW" (tablespace_spec)? ;

partitioning_storage_lob_clause  :
	"LOB" "(" LOB_item ")" "STORE" "AS"
	(LOB_segname ( "(" tablespace_spec ")" )? 
		| "(" tablespace_spec ")" );
		
partitioning_storage_varray_clause :
	"VARRAY" varray_item 
	"STORE" "AS" "LOB" LOB_segname ;
	
parallel_clause :
	  "NOPARALLEL" 
	| "PARALLEL" 
		(integer
		| "(" {plsql_identifier numeric, (",")?} ")")? ;	

enable_disable_clause :
	enable_or_disable 
	(validate_or_novalidate)?
	( unique_columns_spec
	| primary_key_spec 
	| "CONSTRAINT" constraint
	)
	(using_index_clause)? 
	(exceptions_clause)? 
	(cascade_tag)? 
	(keep_or_drop_index)? ;

unique_columns_spec :
	"UNIQUE" column_list ;

keep_or_drop_index :
	keep_or_drop "INDEX" ;
	
keep_or_drop :	
	  "KEEP" 
	| "DROP" ;

primary_key_spec :
	"PRIMARY" "KEY" ;

using_index_clause :
	"USING" "INDEX"
	( (schema ".")? index
		| "(" create_index ")"
		| "LOCAL" 
		| global_partitioned_index 
		| { pctfree_spec
		  | inittrans_spec
		  | maxtrans_spec
		  | tablespace_spec
		  | storage_clause
		  | "NOSORT"
		  | logging_clause 
		  } 
	)?;

global_partitioned_index :	
	"GLOBAL" "PARTITION" 
	"BY" "RANGE" column_list
	"(" {global_partitioning_clause, ","} ")" ;

global_partitioning_clause :
	"PARTITION" (partition)? 
	"VALUES" "LESS" "THAN" "(" {value, ","} ")"
	  ( segment_attributes_clause )?;
	  
create_tablespace : 
	"CREATE" ("UNDO")? tablespace_spec
	(datafile_tempfile_clause)?
	({ minimum_extent_clause
	 | blocksize_clause
	 | logging_clause  
	 | force_logging_spec
	 | default_storage_clause
	 | online_or_offline
	 | permanent_or_temporary
	 | extent_management_clause
	 | segment_management_clause
	 })? ;

permanent_or_temporary :
	  "PERMANENT" 
	| "TEMPORARY" ;

extent_management_clause : 
	"EXTENT" "MANAGEMENT" 
	("DICTIONARY" | "LOCAL" 
		("AUTOALLOCATE" | "UNIFORM" (size_spec)?)?);

segment_management_clause :
	"SEGMENT" "SPACE" "MANAGEMENT" ("MANUAL" | "AUTO");

minimum_extent_clause :
	"MINIMUM" "EXTENT" integer ( K_or_M )? ;
	
blocksize_clause :
	"BLOCKSIZE" integer ("K")? ;

create_temporary_tablespace :
	"CREATE" "TEMPORARY" tablespace_spec
	("TEMPFILE" datafile_tempfile_spec)? 
	temp_tablespace_extent ;
	
temp_tablespace_extent :	
	("EXTENT" "MANAGEMENT" "LOCAL")? 
	("UNIFORM" ("SIZE" integer (K_or_M)?)?)? ;

create_trigger :
	"CREATE" ("OR" "REPLACE")? 
	"TRIGGER" qualified_name
	("BEFORE" | "AFTER" | "INSTEAD" "OF")
	( dml_event_clause 
	| {ddl_event, "OR"}
	| {database_event, "OR"}
	) ("ON" ((schema ".")? "SCHEMA" | "DATABASE"))?
	("WHEN" "(" condition ")")? 
	(call_statement | plsql_block) ;
	
dml_event_clause :
	{"DELETE" | "INSERT" | "UPDATE" ("OF" {column, ","})?, "OR"}
	"ON" (qualified_name | 
		("NESTED" "TABLE" nested_table_column "OF")? qualified_name)
	(referencing_clause)? ("FOR" "EACH" "ROW")? ;
	
ddl_event : 
 	  "ALTER"   | "ANALYZE" | "ASSOCIATE" "STATISTICS"    | "AUDIT"
	| "COMMENT" | "CREATE"  | "DISASSOCIATE" "STATISTICS" | "DROP"
	| "GRANT"   | "NOAUDIT" | "RENAME" | "REVOKE" | "TRUNCATE"
	| "DDL" ;

database_event : 
	  "SERVERERROR" | "LOGON" | "LOGOFF" | "STARTUP"
	| "SHUTDOWN" | "SUSPEND" ;

nested_table_column : plsql_identifier;

referencing_clause : 
	"REFERENCING"
	{ "OLD" ("AS")? old 
	| "NEW" ("AS")? new 
	| "PARENT" ("AS")? parent } ;

	old 	 : plsql_identifier;
	new 	 : plsql_identifier;
	parent : plsql_identifier;




call_statement :
	"CALL" 
	(object_access_expression 
		| qualified_name ("@" dblink)?
	)
	"(" {expression, ","} ")"
	("." simple_expression)?
	("INTO" ":" host_variable 
		(("INDICATOR")? ":" indicator_variable)?)?;

create_cluster :
	"CREATE" "CLUSTER" cluster_name
	"(" {column datatype, ","} ")"
	({ physical_attributes_clause
	 | size_spec
	 | tablespace_spec
	 | ("INDEX" | ("SINGLE" "TABLE")? 
	 	"HASHKEYS" integer ("HASH" "IS" expression)?)
	 })?
	(parallel_clause)? 
	(rowdependencies_spec)? 
	(cache_clause)?;

cluster_name :
	qualified_name ;
	
create_type :
	"CREATE" ("OR" "REPLACE")? "TYPE" 
	(schema ".")? type_name		// incomplete type stops here...
	(  create_varray_type
	 | create_nested_table_type 
	 | create_object_type
	)?;
	
create_varray_type :
	("IS" | "AS") 
	("VARRAY" | "VARYING" "ARRAY")
	"(" limit ")" "OF" datatype ;

create_nested_table_type :
	("IS" | "AS") 
	"TABLE" "OF" datatype ;
	
create_object_type :
	(invoker_rights_clause)?
	(("IS" | "AS") "OBJECT"
		| "UNDER" (schema ".")? supertype)
	(sqlj_object_type)?
	("(" {attribute_spec | element_spec, ","} ")" )?
	((not_tag)? final_tag)? 
	((not_tag)? instantiable_tag)? ;

invoker_rights_clause :
	"AUTHID" ("CURRENT_USER" | "DEFINER");

attribute_spec :
	attribute 
	datatype 
	(sqlj_object_type_attr)? ;
	
SQLData : 
	"SQLData" "(" ({sql_data_item, ","})? ")"
	((not_tag)? final_tag)? ;

sql_data_item :
	(parameter datatype | subprogram_clauses)
	(sqlj_object_type_sig)?
      ;
	
element_spec :
	(inheritance_clauses)? 
	{  subprogram_clauses 
 	 | constructor_spec 
	 | map_order_function_spec }
	("," {pragma_clause, ","})? ;

inheritance_clauses :
	(not_tag)?
	( overriding_tag
	| final_tag
	| instantiable_tag );
	
subprogram_clauses :	
	member_or_static
	(procedure_spec | function_spec);

member_or_static :
	  "MEMBER" 
	| "STATIC" ;
	
procedure_spec :	
	"PROCEDURE" name 
	("(" arguments ")")?
	( ("IS" | "AS") call_spec )? ;
	
function_spec :	
	"FUNCTION" name 
	("(" arguments ")")?
	return_clause 
	("DETERMINISTIC")? ;
	
	
	
constructor_spec :	
	(final_tag)? (instantiable_tag)? 
	"CONSTRUCTOR" "FUNCTION" datatype 
	( ("SELF" "IN" "OUT" datatype ",")? 
		parameter_list)?
	return_clause ;
	
map_order_function_spec :
	map_or_order
	"MEMBER" function_spec ;
	
map_or_order :	
	  "MAP" 
	| "ORDER" ;
	
return_clause :
	  "RETURN" (self_as_result | datatype)
	  ( ("IS" | "AS") call_spec )?
	  (sqlj_object_type_sig)? ;

self_as_result :
	"SELF" "AS" "RESULT" ;

pragma_clause :
	"PRAGMA" pragma_name 
	("(" (method_name | default_tag) ","
	    {pragma_arg, ","}
	")")? ;
	
pragma_arg :
	  "RNDS" 
	| "WNDS" 
	| "RNPS" 
	| "WNPS" 
	| "TRUST" 
	| number
	;

pragma_name : identifier;

call_spec :
	"LANGUAGE" (Java_declaration | C_declaration);
	
Java_declaration :	
	"JAVA" "NAME" squotedstring ;
	
C_declaration :	
	"C" ("NAME" name)? 
	"LIBRARY" lib_name 
	("AGENT" "IN" "(" argument ")")?
	("WITH" "CONTEXT")? 
	("PARAMETERS" "(" parameters ")")? ;
	

create_type_body :
	"CREATE" ("OR" "REPLACE")? 
	"TYPE" "BODY" (schema ".")? type_name 
	("IS" | "AS") 
	({
		member_or_static
	      (  procedure_declaration 
	       | function_declaration 
	       | constructor_declaration )
	   |  map_or_order "MEMBER" function_declaration
	})?
	"END" ;
	
procedure_declaration :	
	"PROCEDURE" name 
	("(" (arguments)? ")")?
	("IS" | "AS") 
	(plsql_block | call_spec) 
	(";")?; 

function_declaration :
	"FUNCTION" name 
	("(" (arguments)? ")")?
	"RETURN" datatype
	("IS" | "AS") 
	(plsql_block | call_spec) 
	(";")?; 

constructor_declaration :
	(final_tag)? (instantiable_tag)? 
	"CONSTRUCTOR" "FUNCTION" datatype 
	( ("SELF" "IN" "OUT" datatype "," )? 
	parameter_list)?
	"RETURN" self_as_result
	("IS" | "AS") (plsql_block | call_spec)
	(";")?; 

parameter_list :
	{parameter datatype, ","} ;

create_package :
	"CREATE" ("OR" "REPLACE")? 
	"PACKAGE" (schema ".")? package
	(invoker_rights_clause)? ("IS" | "AS") 
	plsql_package_spec
	"END" (label_name)? ;
	
plsql_package_spec : 
	{  procedure_spec (";")?
	 | function_spec (";")? 
	 | type_definition (";")?
	 | item_definition (";")?
	 | exception_declaration (";")? 
	 | pragma_clause (";")?
	} ;

create_package_body :
	"CREATE" ("OR" "REPLACE")? 
	"PACKAGE" "BODY" (schema ".")? package
	("IS" | "AS") 
	plsql_package_body;

plsql_package_body : 
	("<<" label_name ">>")?
	("DECLARE")? 	
	({type_definition | item_definition})?
	({function_declaration | procedure_declaration})?
	("BEGIN"
	  ({statement})?)?
	"END" (label_name)? (";")? ;

create_procedure :
	"CREATE" ("OR" "REPLACE")? 
	"PROCEDURE" (schema ".")? procedure
	("(" arguments ")" )? 
	(invoker_rights_clause)? 
	("IS" | "AS") 
	(plsql_subprogram_body | call_spec) ;
	
create_profile :
	"CREATE" "PROFILE" profile_name "LIMIT" 
	{resource_parameter | password_parameter};

create_role :
	"CREATE" "ROLE" role
	(role_identity_clause)? ;

create_user :
	"CREATE" "USER" user_name
	({create_user_option})? ;
	
create_user_option :
	  user_identified_by_clause
	| default_tablespace_clause
	| temporary_tablespace_clause
	| quota_clause
	| profile_clause
	| default_role_clause 
	| password_expire_clause
	| account_lock_clause
	| proxy_clause
	;

user_identified_by_clause :
	"IDENTIFIED"
	( "BY" password ("REPLACE" old_password)?
	| externally_or_globally
	) ;

default_tablespace_clause : 
	"DEFAULT" tablespace_spec ;

temporary_tablespace_clause :
	"TEMPORARY" tablespace_spec ;

profile_clause :
	"PROFILE" profile_name ;
	
default_role_clause :
	"DEFAULT" "ROLE" 
	( {role, ","}
		| "ALL" ( "EXCEPT" {role,","} )?
	      | "NONE"
	) ;

password_expire_clause :
	"PASSWORD" "EXPIRE" ;
	
account_lock_clause :
	"ACCOUNT" lock_or_unlock ;
	
lock_or_unlock : 
	"LOCK" | "UNLOCK" ;

quota_clause :
	"QUOTA" 
	(integer ( K_or_M )? | "UNLIMITED")
	"ON" tablespace ;
		
create_rollback_segment :
	"CREATE" ("PUBLIC")? 
	"ROLLBACK" "SEGMENT" rollback_segment
	({ tablespace_spec | storage_clause })?;

create_schema :
	"CREATE" "SCHEMA" "AUTHORIZATION" schema
	{ create_table | create_view | grant_statement };

create_view : 
	"CREATE" ("OR" "REPLACE")? 
	(("NO")? "FORCE")? "VIEW" (schema ".")? view
	(view_clause)?
	"AS" subquery (subquery_restriction_clause)?;
	
view_clause :	
	"(" {view_alias ({inline_constraint})? 
		| out_of_line_constraint, ","} ")"
	| object_view_clause
	| XMLType_view_clause
	;
	
view_alias :
	identifier (? #value !: "CONSTRAINT" );
	
object_view_clause :
	"OF" qualified_name
	(with_object_id_clause
	 | "UNDER" qualified_name)
	("(" {out_of_line_constraint 
		| attribute {inline_constraint}, ","} ")")?
	;
	
with_object_id_clause :
	"WITH" "OBJECT" ("IDENTIFIER" | "ID")
	(default_tag | "(" {attribute, ","}  ")") ;
	
create_materialized_view :
	"CREATE" "MATERIALIZED" "VIEW" 
	(schema ".")? materialized_view
	("OF" (schema ".")? object_type)? 
  	("(" scoped_table_ref_constraint ")")?
  	({"ON" "PREBUILT" "TABLE" 
  		(("WITH" | "WITHOUT") "REDUCED" "PRECISION")?
	 | physical_properties 
	 | materialized_view_props })?
	("USING" "INDEX"
	    ({physical_attributes_clause | tablespace_spec})?
  	 | "USING" "NO" "INDEX")?
  	(mv_refresh)?
  	("FOR" "UPDATE")? 
  	(("DISABLE" | "ENABLE") "QUERY" "REWRITE")? 
  	"AS" subquery;

ref_column 		: plsql_identifier;
ref_attribute 	: plsql_identifier;
scope_table_name 	: plsql_identifier;

scoped_table_ref_constraint :
	{"SCOPE" "FOR" "(" (ref_column | ref_attribute) ")" 
	  "IS" (schema ".")? scope_table_name, ","} ;
	  
materialized_view_props :
  	{ column_properties
	| table_partitioning_clauses
	| cache_or_nocache
	| parallel_clause
	| build_clause
	};
	  
cache_or_nocache :	  
	  "CACHE" 
	| "NOCACHE" ;

build_clause :	  
	"BUILD" ("IMMEDIATE" | "DEFERRED");
	  
mv_refresh :
	"REFRESH"
	{ 
		("FAST" | "COMPLETE" | "FORCE") 
	  	| "ON" ("DEMAND" | "COMMIT") 
		| ("START" "WITH" | "NEXT") date
		| "WITH" (primary_key_spec | "ROWID")
		| "USING" ("DEFAULT" ("MASTER" | "LOCAL")? "ROLLBACK" "SEGMENT"
	    	| ("MASTER" | "LOCAL")? "ROLLBACK" "SEGMENT" rollback_segment
	    ) 
	    ({"DEFAULT" ("MASTER" | "LOCAL")? "ROLLBACK" "SEGMENT"
	    	| ("MASTER" | "LOCAL")? "ROLLBACK" "SEGMENT" rollback_segment
	    })?
	}
	| "NEVER" "REFRESH"
	;
	
create_materialized_view_log :
	"CREATE" "MATERIALIZED" "VIEW" "LOG" "ON" (schema ".")? table
	({ physical_attributes_clause
	 | tablespace_spec
	 | logging_clause
	 | cache_or_nocache
	})?
	(parallel_clause)? 
	(table_partitioning_clauses)?
	("WITH" 
	 { "OBJECT" "ID" 
	  | primary_key_spec
	  | "ROWID" 
	  | "SEQUENCE" 
	  | column_list
	 , (",")? } 
	 ( new_values_clause )?
	)?;
	
new_values_clause :	
	("INCLUDING" | "EXCLUDING") "NEW" "VALUES" ;
	
grant_statement : 
	"GRANT" 
	{ grant_system_privileges 
	| grant_object_privileges
	} ;

grant_system_privileges :
	{system_privilege | role | "ALL" "PRIVILEGES", ","}
	"TO" grantee_clause ("IDENTIFIED" "BY" password)? 
	("WITH" "ADMIN" "OPTION")? ;

grant_object_privileges :
	{(object_privilege | "ALL" ("PRIVILEGES")?)
		(column_list)?, ","}
	"ON" on_object_clause 
	"TO" grantee_clause 
	("WITH" "GRANT" "OPTION")? 
	("WITH" "HIERARCHY" "OPTION")? ;
	
grantee_clause :
	{user_name | role | "PUBLIC", ","} ;

object_privilege : 
	  sql_verb
	| "REFERENCES"
	;

on_object_clause :
	  "DIRECTORY" directory_name
	| "JAVA" ("SOURCE" | "RESOURCE") qualified_name
	| (schema ".")? object_name
	;

set_transaction_statement :
	"SET" "TRANSACTION"
	( (read_write_clause
	  | "ISOLATION" "LEVEL" 
		  ("SERIALIZABLE" | "READ" "COMMITTED")
	  | "USE" "ROLLBACK" "SEGMENT" rollback_segment
	  )
	  ("NAME" string)?
	| "NAME" string
	) ;

revoke_statement :
	"REVOKE" 
	{ revoke_system_privileges 
	| revoke_object_privileges, ","} 
	;

revoke_system_privileges :
	{  system_privilege 
	 | role 
	 | "ALL" "PRIVILEGES", "," } 
	"FROM" grantee_clause ;

revoke_object_privileges :
	{(  object_privilege 
	  | "ALL" ("PRIVILEGES")?) 
	  (column_list)?, ","}
	"ON" on_object_clause 
	"FROM" grantee_clause 
	(cascade_constraints_tag)? 
	(force_tag)?;

create_snapshot :
	"CREATE" "SNAPSHOT" ("LOG" "ON")? snapshot_name
	({ pctfree_spec
  	 | pctused_spec
  	 | tablespace_spec
  	 | "WITH" {"ROWID" | primary_key_spec | "(" column ")", ","}
  	 | refresh_clause
  	 | storage_clause
  	 | using_index_clause
  	})?  	 
  	("AS" subquery)? ;

refresh_clause :
	"REFRESH" 
	({ "FAST" 
	 | "NEXT" expression 
	 | "COMPLETE"
	 | "WITH" "PRIMARY" "KEY"
	 | ("USING")? ("DEFAULT")? ("MASTER" | "LOCAL")? 
	   "ROLLBACK" "SEGMENT" (segment_name)?
	 | "START" "WITH" expression "NEXT" expression
	})?
	;

create_function :
	"CREATE" ("OR" "REPLACE")? 
	"FUNCTION" function_name
	("(" arguments ")")?
	"RETURN" datatype 

	({  invoker_rights_clause 
	 | "DETERMINISTIC" 
	 | parallel_enable_clause })? 
	( ("AGGREGATE" | "PIPELINED") 
	   "USING" implementation_type
	  | ("PIPELINED")? ("IS" | "AS") 
	   (plsql_function_body | call_spec)
	)
	;

parallel_enable_clause :
	"PARALLEL_ENABLE"
	("(" "PARTITION" argument "BY" 
	   ("ANY" | ("HASH" | "RANGE") column_list)
	 ")"
	 (streaming_clause)?
	)?;

streaming_clause :
	("ORDER" | "CLUSTER") "BY" column_list ;

arguments : 
	{argument, ","};

argument :
	plsql_identifier 
	(in_out_spec)?
	(nocopy_spec)?
	datatype 
	(argument_default_clause)? ;
	
in_out_spec :
	  "IN" "OUT" 
	| "IN" 
	| "OUT" ;
	
nocopy_spec :	
	"NOCOPY" ;
	
argument_default_clause :
	"DEFAULT"
	expression ;	

plsql_block :
	("<<" label_name ">>")?
	("DECLARE")?
	({ type_definition 
	 | item_definition 
	 | pragma_clause (";")? })?
	({function_declaration | procedure_declaration})?
	"BEGIN" 
		({statement})?
		("EXCEPTION" {exception_handler})?
	"END" (label_name)? (";")?

	;
	
item_definition : 
	item_declaration (";")? ;

ref_cursor_type_definition : 
	"TYPE" identifier "IS" "REF" 

	cursor_declaration ; 
type_definition :
	(
	  record_type_definition
	| ref_cursor_type_definition
	| table_type_definition
	| subtype_definition
	| varray_type_definition
	) ";"
	;

subtype_definition :
	"SUBTYPE" subtype_name "IS" base_type
	("(" constraint ")")? (not_null_spec)?;

constant_declaration :
	constant_name "CONSTANT" datatype 
	(initializer)? ;
	
initializer :	
	(not_null_spec)? 
	(":=" | "=" | default_tag) expression ;

not_null_spec :
	  "NOT_NULL" 
	| "NOT" "NULL" ;
	
item_declaration :
	  variable_declaration		// subsumes object_declaration
	| collection_declaration
	| constant_declaration
	| cursor_declaration
	| exception_declaration
	| record_declaration
	;

table_type_definition :
	"TYPE" type_name "IS" 
	"TABLE" "OF" element_type 
	(not_null_spec)? 
	("INDEX" "BY" "BINARY_INTEGER")?;

varray_type_definition :
	"TYPE" type_name "IS" 
	("VARRAY" | "VARRYING ARRAY") "(" size_limit ")"
	"OF" element_type 
	(not_null_spec)? ;

collection_declaration :
   collection_name type_name ;

element_type :
	  datatype
	| cursor_name "%ROWTYPE"
	| db_table_name ( "%ROWTYPE" | "." column "%TYPE")
	| object_name "%TYPE"
	| ("REF")? object_type_name
	| record_name ("." field_name)? "%TYPE"
	| record_type_name
	| scalar_datatype_name
	| variable_name "%TYPE"
	;

object_type_declaration : 
	"CREATE" ("OR_REPLACE")? 
	"TYPE" (schema_name ".")? type_name
	 ("AUTHID" ("CURRENT_USER" | "DEFINER"))? 
	 ("IS" | "AS") "OBJECT" "(" member_list ")" ;
	 
member_list :
	{attribute_name attribute_type, ","} ;

object_type_body :
	"CREATE" ("OR_REPLACE")? 
	"TYPE_BODY" (schema_name ".")? type_name
	("IS" | "AS")
	{member_or_static (subprogram_body | call_spec) ";"}
	(map_or_order "MEMBER" function_body ";")? 
	"END" ;

record_type_definition :
	"TYPE" type_name "IS RECORD" 
	"(" {field_declaration, ","} ")" ;
	
field_declaration :
	field_name datatype 
	(initializer)? ;
	
record_declaration :
	record_name type_name;

variable_declaration :
	{variable_name, ","} datatype 
	(initializer)? ;

cursor_declaration :
	"CURSOR" (cursor_name)?
	("(" {cursor_parameter_declaration, ","}")")?
	("RETURN" rowtype)? 
	("IS" select_statement)?;

cursor_body :
	"CURSOR" cursor_name 
	("(" {cursor_parameter_declaration, ","} ")")?
	"RETURN" rowtype "IS" select_statement;

cursor_parameter_declaration :
	parameter_name ("IN")? datatype 
	(initializer)? ;
   
rowtype :
	((  db_table_name 
	  | cursor_name 
	  | cursor_variable_name ) "%" "ROWTYPE"
	 | record_name "%" "TYPE"
	 | record_type_name) ;
 
column_list :
	"(" {column, ","} ")" ;
	
condition : expression ;

rename_statement : 
	"RENAME" old_name "TO" new_name;
	
create_operator :
	"CREATE" ("OR" "REPLACE")? "OPERATOR"
	qualified_name binding_clause;
	
binding_clause :
	"BINDING" 
	{"(" {parameter_type, ","} ")" 
		"RETURN" return_type  implementation_clause, ","} ;
		
	parameter_type : datatype;
	return_type : datatype;
	
implementation_clause :
	("ANCILLARY" "TO"
	  {primary_operator "(" {parameter_type, ","} ")", ","}
	| context_clause ("COMPUTE" "ANCILLARY" "DATA")?
	)?
	using_function_clause ;

	primary_operator : plsql_identifier;
	
context_clause :	
	"WITH" "INDEX" "CONTEXT" "," 
	"SCAN" "CONTEXT" implementation_type ;
	
using_function_clause :
	"USING" qualified_name ;

create_context :
	"CREATE" ("OR" "REPLACE")? "CONTEXT" 
	namespace "USING" qualified_name
	("INITIALIZED" externally_or_globally
	| "ACCESSED" "GLOBALLY")?
	;

	namespace : identifier;

create_controlfile :
	"CREATE" "CONTROLFILE" (reuse_tag)?
	("SET")? "DATABASE" database
	({ 
	   logfile_clause
	 | resetlogs_spec
	 | datafile_tempfile_clause
	 | maxlogfiles_spec
	 | maxlogmembers_spec
	 | maxloghistory_spec
	 | maxdatafiles_spec
	 | maxinstances_spec
	 | archivelog_spec
	 | force_logging_spec
	 })?
	(character_set_clause)?;

maxlogfiles_spec :
	"MAXLOGFILES" integer ;

maxlogmembers_spec :
	"MAXLOGMEMBERS" integer ;
	
maxloghistory_spec :	
	"MAXLOGHISTORY" integer ;
	
maxdatafiles_spec :
	"MAXDATAFILES" integer ;
	
maxinstances_spec :
	"MAXINSTANCES" integer ;
	
logfile_clause :
	"LOGFILE" {(logfile_group_spec)? redo_log_file_spec, ","} ;
	
logfile_group_spec :
	"GROUP" integer ;
	
force_logging_spec :
	("NO")? "FORCE" "LOGGING" ;
	
character_set_clause :	
	("NATIONAL")? "CHARACTER" "SET" character_set ;

create_index :
	"CREATE" ("UNIQUE" | "BITMAP")? "INDEX"
	(schema ".")? index "ON"
	(  cluster_index_clause 
	 | table_index_clause 
	 | bitmap_join_index_clause);

cluster_index_clause :
	"CLUSTER" (schema ".")? cluster index_attributes ;

table_index_clause :
	(schema ".")? table (t_alias)? 
	"(" {index_expr (ascending_or_descending)?, ","} ")"
	({   global_partitioned_index 
	  | local_partitioned_index
	  | index_attributes 
	  | domain_index_clause
	})?;

bitmap_join_index_clause :
	(schema ".")? table 
	"(" {(schema ".")? (table)? 
		column (ascending_or_descending)?, ","} ")"
	from_clause
	where_clause
	(local_partitioned_index)? 
	index_attributes ;
	
index_expr :
	expression ;

index_attributes :
	({ physical_attributes_clause
	 | logging_clause
	 | online_tag
	 | compute_statistics_tag
	 | "TABLESPACE" (tablespace | default_tag)
	 | key_compression
	 | "NOSORT" 
	 | "REVERSE"
	 | parallel_clause
	 })?;

local_partitioned_index :
	"LOCAL"
	( 
	  on_comp_partitioned_table
	| on_range_partitioned_table
	| on_list_partitioned_table
	| on_hash_partitioned_table
	)?;

domain_index_clause :
	"INDEXTYPE" "IS" indextype 
	(parallel_clause)? 
	("PARAMETERS" "(" squotedstring ")")? ;
	
on_range_partitioned_table :
	"(" {
		"PARTITION" (partition 
			({segment_attributes_clause})? )? 
	    , "," } 
	")" ;
	
on_list_partitioned_table :
	"(" {
		"PARTITION" (partition 
			({segment_attributes_clause})? )? 
	    , "," } 
	")" ;
	
on_hash_partitioned_table : 
	  store_in_clause
	| "(" {"PARTITION" (partition 
		(tablespace_spec)?)?, ","} ")"
	;
	
on_comp_partitioned_table :
	(store_in_clause)?
	"(" {"PARTITION" 
	   (partition ({segment_attribute_clause})?
	   (index_subpartition_clause)?)?, ","}
	 ")";
	
index_subpartition_clause :
	  store_in_clause
	| "(" {"SUBPARTITION" (subpartition 
		(tablespace_spec)?)?, ","} ")" ;

store_in_clause :
	"STORE" "IN" "(" ({tablespace, ","} | default_tag) ")" ;

create_indextype :
	"CREATE" ("OR" "REPLACE")? "INDEXTYPE"
	indextype_name "FOR"
	{(schema ".")? operator_name "(" {paramater_type, ","} ")", ","}
	"USING" implementation_type;

	indextype_name : qualified_name ;
	paramater_type : datatype;


create_database :
	"CREATE" "DATABASE" (database)?
	({ "USER" ("SYS" | "SYSTEM") 
		"IDENTIFIED" "BY" password
	| "CONTROLFILE" "REUSE"
	| "LOGFILE" {(logfile_group_spec)? redo_log_file_spec, ","}
	| maxlogfiles_spec
	| maxlogmembers_spec
	| maxloghistory_spec
	| maxdatafiles_spec
	| maxinstances_spec
	| archivelog_spec
	| force_logging_spec
	| character_set_clause
	| datafile_tempfile_clause
	| extent_management_local_spec
	| default_temp_tablespace
	| undo_tablespace_clause
	| set_time_zone_clause
	})? ;

default_temp_tablespace :
	"DEFAULT" "TEMPORARY" 
	tablespace_spec
	("TEMPFILE" datafile_tempfile_spec)? 
	temp_tablespace_extent_clause ;
	
temp_tablespace_extent_clause :	
	(extent_management_local_spec)?
	("UNIFORM" (size_spec)?)? ;
	
extent_management_local_spec :
	"EXTENT" "MANAGEMENT" "LOCAL"	;
	
undo_tablespace_clause :	
	"UNDO" tablespace_spec
	(datafile_tempfile_clause)? ;

create_database_link :
	"CREATE" ("SHARED")? ("PUBLIC")? 
	"DATABASE" "LINK" dblink
	("CONNECT" "TO" 
		( "CURRENT_USER" 
		| user_name "IDENTIFIED" 
		  "BY" password (authenticated_clause)?)
	| authenticated_clause
	)? 
	("USING" connect_string)?;

connect_string : string;

authenticated_clause :
	"AUTHENTICATED" "BY" user_name
	"IDENTIFIED" "BY" password ;
	
create_dimension :
	"CREATE" "DIMENSION" qualified_name  	{level_clause}
	{hierarchy_clause | attribute_clause} ;

create_directory :
	"CREATE" ("OR" "REPLACE")? "DIRECTORY"
	 directory "AS" path_name;
	 
	 path_name : string;

create_library :
	"CREATE" ("OR" "REPLACE")? 
	"LIBRARY" qualified_name
	("IS" | "AS") filename 
	("AGENT" agent_dblink)?;

create_outline :
	"CREATE" ("OR" "REPLACE")? 
	("PUBLIC" | "PRIVATE")? 
	"OUTLINE" (outline)?
	("FROM" ("PUBLIC" | "PRIVATE" )? source_outline)?
	("FOR" "CATEGORY" category)?
	("ON" statement)? ;
	
	source_outline : plsql_identifier;
	category : plsql_identifier;

agent_dblink : string;

create_synonym :
	"CREATE" ("OR" "REPLACE")? ("PUBLIC")? 
	"SYNONYM" synonym_name
	"FOR" qualified_name ("@" dblink)?;

synonym_name : qualified_name ;

create_pfile :
	"CREATE" "PFILE" ("=" pfile_name)? 
	"FROM" "SPFILE" ("=" spfile_name)?;
	
	pfile_name : string;
	spfile_name : string;

alter_database_statement :
	"ALTER" "DATABASE" (database)?
	( startup_clauses
	| recovery_clauses 
	| database_file_clauses
	| logfile_clauses
	| controlfile_clauses
	| standby_database_clauses
	| default_settings_clauses
	| conversion_clauses
	| redo_thread_clauses
	| security_clause
	) ;

startup_clauses :
	  startup_mount_clause
	| startup_open_clause 
	;
	
startup_mount_clause :		   
	"MOUNT" (startup_mount_option "DATABASE")? ;
	
startup_mount_option :
	  "STANDBY"
	| "CLONE" ;

startup_open_clause :	
	"OPEN" 
	read_write_clause
	(resetlogs_spec)?
	(migrate_clause)? ;

migrate_clause :
	"MIGRATE" ;

recovery_clauses :
	  general_recovery
	| managed_standby_recovery
	| end_backup_tag
	;

general_recovery :
	"RECOVER" ("AUTOMATIC")? ("FROM" location)?
	(( full_database_recovery
	  | partial_database_recovery
	  | "LOGFILE" filename
	  )
	  ({ "TEST" 
	   | "ALLOW" integer "CORRUPTION" 
	   | parallel_clause})?
	| "CONTINUE" (default_tag)?
	| "CANCEL"
	);

location : string;

full_database_recovery :
	((("STANDBY")? "DATABASE")?
	({"UNTIL" 
		(  "CANCEL" 
		 | "TIME" date 
		 | "CHANGE" integer )
	 | "USING" "BACKUP" "CONTROLFILE" 
	})?) <1,> ;

	date 	     : expression;
	filenumber : numeric;
	
datafile_tempfile_clause :
	"DATAFILE" {datafile_tempfile_spec, (",")?} ;
	
datafile_tempfile_spec :
	string 
	({  size_spec
	  | reuse_tag
	  | autoextend_clause
	})?
	| autoextend_clause ;

redo_log_file_spec : 
	( log_file_name | "(" {log_file_name, ","} ")")
	(size_spec)? ;

log_file_name :
	string ;
	
partial_database_recovery :
	  "TABLESPACE" {tablespace, ","}
	| datafile_filename_number_clause
	| "STANDBY" 
		("TABLESPACE" {tablespace, ","}
		| datafile_filename_number_clause
		"UNTIL" ("CONSISTENT" "WITH")? "CONTROLFILE")
	;
	
datafile_filename_number_clause :	
	"DATAFILE" ({filename, ","} | {filenumber, ","}) ;

managed_standby_recovery :
	"RECOVER" "MANAGED" "STANDBY" "DATABASE"
	  (recover_clause | cancel_clause | finish_clause)?;

recover_clause :
	{ 
	  recover_disconnect_clause
	| recover_timeout_clause
	| recover_delay_clause
	| recover_expire_clause
	| recover_next_clause 
	| recover_through_clause 
	| parallel_clause
	} ;

recover_disconnect_clause : 
	"DISCONNECT" (from_session)? ;

recover_delay_clause :
	  "NODELAY" 
	| "DEFAULT" "DELAY" 
	| "DELAY" integer ;
	
recover_timeout_clause :	
	  "TIMEOUT" integer 
	| "NOTIMEOUT" ;

recover_expire_clause :
	  "EXPIRE" integer 
	| "NO" "EXPIRE" ;
	
recover_next_clause : 
	"NEXT" integer ;

recover_through_clause :
	"THROUGH" 
	(( "THREAD" integer )? "SEQUENCE" integer
	  | "ALL" "ARCHIVELOG"
	  | ("ALL" | "LAST" | "NEXT") "SWITCHOVER"
	);
	
cancel_clause :
	"CANCEL" ("IMMEDIATE")? ("NOWAIT")?;

finish_clause :
	("DISCONNECT" (from_session)?)? 
	(parallel_clause)? 
	"FINISH" ("SKIP" ("STANDBY" "LOGFILE")?)? 
	("WAIT" | "NOWAIT")? ;
	
database_file_clauses :
	  "CREATE" "DATAFILE" 
	  ({filename,","} | {filenumber,","}) 	  ("AS" ({datafile_tempfile_spec,","} |"NEW"))?
	| datafile_filename_number_clause
	  ( online_or_offline
	  | resize_clause
	  | autoextend_clause
	  | end_backup_tag
	  )
	| "TEMPFILE" ({filename,","} | {filenumber,","})
	  ( resize_clause
	  | autoextend_clause
	  | "DROP" ("INCLUDING" "DATAFILES")?
	  | online_or_offline
	  )
	| "RENAME" "FILE" {filename,","} "TO" filename
	;

resize_clause :
	"RESIZE" integer (K_or_M)? ;
	
autoextend_clause :
	"AUTOEXTEND" ("OFF" | "ON" 
		("NEXT" integer (K_or_M)?)? 
	(maxsize_clause)?);
	
maxsize_clause :
	"MAXSIZE" ("UNLIMITED" | integer (K_or_M)?);
	
logfile_clauses :
    	  archivelog_spec
	| force_logging_spec
	| "ADD" ("STANDBY")? "LOGFILE" ("THREAD" integer)?
	  {(logfile_group_spec)? redo_log_file_spec, ","}
	  (size_spec)?
	| "DROP" ("STANDBY")? "LOGFILE" {logfile_descriptor,","}
	| "ADD" ("STANDBY")? "LOGFILE" "MEMBER" {filename (reuse_tag)?,","}
	  "TO" {logfile_descriptor,","}
	| "DROP" ("STANDBY")? "LOGFILE" "MEMBER" {filename, ","}
	| "ADD" "SUPPLEMENTAL" "LOG" "DATA" 
	   ( "(" {primary_key_spec | "UNIQUE" "INDEX", ","} ")" "COLUMNS" )?
	| "DROP" "SUPPLEMENTAL" "LOG" "DATA"
	| "RENAME" "FILE" {filename, ","} "TO" filename
	| "CLEAR" ("UNARCHIVED")? "LOGFILE"
	  {logfile_descriptor, ","} ("UNRECOVERABLE" "DATAFILE")?
	;

logfile_descriptor :	
	  logfile_group_spec
	| "(" {filename, ","} ")"
	| filename
	;

controlfile_clauses :
	  "CREATE" "STANDBY" "CONTROLFILE" "AS" filename (reuse_tag)?
	| "BACKUP" "CONTROLFILE" "TO" 
	  (filename (reuse_tag)? | trace_file_clause)
	;
	
trace_file_clause :
	"TRACE" (resetlogs_spec)? ;
	
standby_database_clauses :
	( "ACTIVATE" ("PHYSICAL" | "LOGICAL")? 
	  "STANDBY" "DATABASE" ("SKIP" ("STANDBY" "LOGFILE")?)?
	| "SET" "STANDBY" "DATABASE" "TO" "MAXIMIZE"
	    ("PROTECTION" | "AVAILABILITY" | "PERFORMANCE")
	| "REGISTER" ("OR" "REPLACE")? ("PHYSICAL" | "LOGICAL")? "LOGFILE"
	                    ({redo_log_file_spec, ","})?
	| commit_switchover_clause
	| "START" "LOGICAL" "STANDBY" "APPLY"
	     ("NEW" "PRIMARY" dblink | "INITIAL" (scn_value)?)
	| ("STOP" | "ABORT") "LOGICAL" "STANDBY" "APPLY"
	)
	(parallel_clause)? ;

	scn_value 	  : expression;
	character_set : plsql_identifier;

commit_switchover_clause :
	"COMMIT" "TO" "SWITCHOVER" "TO"
	("PHYSICAL" | "LOGICAL") ("PRIMARY" | "STANDBY")
	(("WITH" | "WITHOUT") "SESSION" "SHUTDOWN")?

	("WAIT" | "NOWAIT")? ;

default_settings_clauses :	
	  character_set_clause
	| set_time_zone_clause
	| "DEFAULT" "TEMPORARY" tablespace_spec
	| "RENAME" "GLOBAL_NAME" "TO" database "." {domain,"."}
	;

set_time_zone_clause :
	"SET" "TIME_ZONE" "=" string ;	
	// ' { { + | - } hh : mi | time_zone_region } '

conversion_clauses :	
	  "RESET" "COMPATIBILITY" 
	| "CONVERT" 
	;

redo_thread_clauses :
	  "ENABLE" ("PUBLIC")? "THREAD" integer 
	| "DISABLE" "THREAD" integer
	;

security_clause :	
	"GUARD" ("ALL" | "STANDBY" | "NONE");

alter_cluster_statement :
	"ALTER" "CLUSTER" (schema ".")? cluster
	{ physical_attributes_clause
	| size_spec
	| allocate_extent_clause
	| deallocate_unused_clause
	| cache_clause
	}
	(parallel_clause)?
	;

allocate_extent_clause :
	"ALLOCATE" "EXTENT"
	("(" {size_spec
	   | "DATAFILE" filename
	   | "INSTANCE" integer }
	 ")"
	)?;
	
deallocate_unused_clause :
	"DEALLOCATE" "UNUSED"
	("KEEP" integer ( K_or_M )?)? ;

alter_dimension_statement :
	"ALTER" "DIMENSION" qualified_name
	{ "ADD"
	      ( level_clause
	      | hierarchy_clause
	      | attribute_clause
	      )
	| "DROP"
	      ("LEVEL" level ("RESTRICT" | cascade_tag)?
	      | "HIERARCHY" hierarchy
	      | "ATTRIBUTE" level
	      )
	| compile_clause
	};
	
level_clause :	
	"LEVEL" level "IS" 
	( table "." column 
	| "(" {table "." column, ","} ")"
	);
	
hierarchy_clause :
	"HIERARCHY" hierarchy 
	"(" child_level {"CHILD" "OF" parent_level}
	    (join_clause)? ")";
	
join_clause :
	{"JOIN" "KEY" 
	(child_key_column | "(" {child_key_column, ","} ")")
		"REFERENCES" parent_level } ;

attribute_clause :		
	"ATTRIBUTE" level "DETERMINES"
	(dependent_column | "(" {dependent_column, ","} ")") ;

level : identifier;
child_level : level;
parent_level : level;
hierarchy : identifier;
child_key_column : column;
dependent_column : column;

alter_function_statement : 
	"ALTER" "FUNCTION" (schema ".")? function_name
	compile_clause (reuse_settings)?;

alter_procedure_statement : 
	"ALTER" "PROCEDURE" (schema ".")? procedure_name 
	compile_clause (reuse_settings)?;

alter_profile_statement :
	"ALTER" "PROFILE" profile_name "LIMIT" 
	{resource_parameter | password_parameter} ;
	
resource_parameter :	
	  resource_parameter_name 
	  resource_parameter_value ;
	
resource_parameter_name :
	  "SESSIONS_PER_USER"
	| "CPU_PER_SESSION"
	| "CPU_PER_CALL"
	| "CONNECT_TIME"
	| "IDLE_TIME"
	| "LOGICAL_READS_PER_SESSION"
	| "LOGICAL_READS_PER_CALL"
	| "COMPOSITE_LIMIT"
	| "PRIVATE_SGA"
	;

resource_parameter_value :
	  integer (K_or_M)?
	| "UNLIMITED" 
	| default_tag ;

password_parameter :
	password_parameter_name
	password_parameter_value ;

password_parameter_name :
	  "FAILED_LOGIN_ATTEMPTS"
	| "PASSWORD_LIFE_TIME"
	| "PASSWORD_REUSE_TIME"
	| "PASSWORD_REUSE_MAX"
	| "PASSWORD_LOCK_TIME"
	| "PASSWORD_GRACE_TIME"
	| "PASSWORD_VERIFY_FUNCTION"
	;

password_parameter_value :
	  "UNLIMITED" 
	| default_tag 
	| expression
	| function
	| null_tag
	; 
	
alter_index_statement :
	"ALTER" "INDEX" (schema ".")? index
	({ deallocate_unused_clause 
	| allocate_extent_clause
	| parallel_clause
	| physical_attributes_clause
	| logging_clause
	| rebuild_clause
	| "PARAMETERS" "(" alter_index_params ")"
	| enable_or_disable
	| unusable_tag
	| rename_partition_clause
	| coalesce_tag
	| monitoring_spec "USAGE"
	| update_block_references_tag
	| alter_index_partitioning
	})? 
	;
	
rename_partition_clause :
	"RENAME" ("PARTITION" partition)? "TO" new_name ;

	alter_index_params : string;	
	new_name : identifier;

rebuild_clause :
	"REBUILD"
	(   "PARTITION" partition 
	  | "SUBPARTITION" subpartition
	  | rebuild_reverse_clause
	)?
	({  parallel_clause
	  | tablespace_spec
	  | "PARAMETERS" "(" rebuild_paramaters ")"
	  | online_tag
	  | compute_statistics_tag
	  | physical_attributes_clause
	  | key_compression
	  | logging_clause
	})? ;
	
	rebuild_paramaters : string;
	
	rebuild_reverse_clause :
	    "REVERSE" 
	  | "NOREVERSE" ;
	
alter_index_partitioning :
	  modify_index_default_attrs
	| modify_index_partition
	| rename_index_partition
	| drop_index_partition
	| split_index_partition
	| modify_index_subpartition
	;

modify_index_default_attrs :
	"MODIFY" "DEFAULT" "ATTRIBUTES" ("FOR" "PARTITION" partition)?
	{ physical_attributes_clause
	| "TABLESPACE" (tablespace | default_tag)
	| logging_clause
	} ;

modify_index_partition :
	"MODIFY" "PARTITION" partition
	( { physical_attributes_clause
	  | logging_clause
	  | deallocate_unused_clause
	  | allocate_extent_clause
	  } 
	| "PARAMETERS" "(" alter_partition_params ")"
	| coalesce_tag
	| update_block_references_tag
	| unusable_tag
	);

	alter_partition_params : string;
	partition_name : identifier;
	partition_name_old : identifier;

rename_index_partition :
	"RENAME" 
	(  "PARTITION" partition 
	 | "SUBPARTITION" subpartition) 
	"TO" new_name ;
	
drop_index_partition :	
	"DROP" "PARTITION" partition_name ;

	
split_index_partition :	
	"SPLIT" "PARTITION" partition_name_old 
	"AT" "(" {value, ","} ")"
	("INTO" "(" {index_partition_description, ","} ")")? 
	(parallel_clause)?;
	
index_partition_description :
	"PARTITION" 
	(partition ({ segment_attributes_clause 
			| key_compression })?)? ;

modify_index_subpartition :
	"MODIFY" "SUBPARTITION" subpartition 
	( unusable_tag
	| allocate_extent_clause
	| deallocate_unused_clause
	);

alter_indextype_statement :
	"ALTER" "INDEXTYPE" qualified_name
	{ {("ADD" | "DROP") (schema ".")? operator_name 
	"(" parameter_types ")", ","}
	  (using_type_clause)?
	| compile_clause
	} ;
	

	operator_name : plsql_identifier;
	parameter_types : {identifier, ","};

using_type_clause :
	"USING" qualified_name;
	
alter_operator_statement :
	"ALTER" "OPERATOR" 
	(schema ".")? operator_name "COMPILE";
	
alter_outline_statement :
	"ALTER" "OUTLINE" ("PUBLIC" | "PRIVATE")? outline
	  { rebuild_tag
	  | "RENAME" "TO" new_outline_name
	  | "CHANGE" "CATEGORY" "TO"  new_category_name
	  } ;
	
	outline : plsql_identifier;
	new_outline_name : plsql_identifier;
	new_category_name : plsql_identifier;
	
alter_package_statement :
	"ALTER" "PACKAGE" (schema ".")? package 
	compile_clause
	("PACKAGE" | "SPECIFICATION" | "BODY")? 
	(reuse_settings)? ;

alter_resource_statement :
	"ALTER" "RESOURCE" "COST"
	{alter_resource_clause} ;
	
alter_resource_clause :	
	resource_name resource_value ;
	
resource_name :
	  "CPU_PER_SESSION"
	| "CONNECT_TIME"
	| "LOGICAL_READS_PER_SESSION"
	| "PRIVATE_SGA" ;

resource_value :
	integer ;	
	
alter_role_statement :
	"ALTER" "ROLE" role 
	role_identity_clause ;
	
role_identity_clause :
	  not_identified_spec 
	| "IDENTIFIED" 
		("BY" password 
		 | using_package_clause 
		 | externally_or_globally) ;

externally_or_globally :
	  "EXTERNALLY" 
	| "GLOBALLY" ("AS" external_name)? ;
		 
not_identified_spec :		 
	"NOT" "IDENTIFIED" ;

using_package_clause :
	"USING" qualified_name ;

alter_rollback_statement :
	"ALTER" "ROLLBACK" "SEGMENT" rollback_segment
	( online_or_offline 
	| storage_clause
	| shrink_clause
	)
	;
	
shrink_clause :	
	"SHRINK" ("TO" integer ( K_or_M )? )?	;

alter_sequence_statement :
	"ALTER" "SEQUENCE" (schema ".")? sequence
	{ increment_by_clause 
	| maxvalue_clause 
	| minvalue_clause 
	| cycle_or_nocycle
	| cache_clause
	| order_or_noorder
	} 
	;

increment_by_clause :
	"INCREMENT" "BY" integer ;

maxvalue_clause :
	  "MAXVALUE" integer 
	| "NOMAXVALUE" ;
	
minvalue_clause :
	  "MINVALUE" integer 

	| "NOMINVALUE" ;
	
cycle_or_nocycle :
	  "CYCLE" 
	| "NOCYCLE" ;

order_or_noorder :
	  "ORDER" 
	| "NOORDER" ;
	
alter_session_statement :
	"ALTER" "SESSION"
	("ADVISE" ("COMMIT" | "ROLLBACK" | "NOTHING") 
	| "CLOSE" "DATABASE" "LINK" dblink 
	| enable_or_disable "COMMIT" "IN" "PROCEDURE" 
	| ("ENABLE" | "DISABLE" | "FORCE") 
	   "PARALLEL" ("DML" | "DDL" | "QUERY") 
	   ("PARALLEL" integer)?
	| ("ENABLE" "RESUMABLE" ("TIMEOUT" integer)? ("NAME" string)? 
	   | "DISABLE" "RESUMABLE")
	| alter_session_set_clause
	)
	;

alter_session_set_clause :
	"SET" {parameter_name ("=")? parameter_value} 
	("COMMENT" "=" string)? ;

alter_snapshot_statement :
	"ALTER" "SNAPSHOT" 
	("LOG" "ON")?
	snapshot_name
	(refresh_clause)?
	("ADD" "PRIMARY" "KEY")?
	(storage_clause)? ;

alter_system_statement :
	"ALTER" "SYSTEM"
	( archive_log_clause 
	| "CHECKPOINT" ( "GLOBAL" | "LOCAL" )?
	| "CHECK" "DATAFILES" ( "GLOBAL" | "LOCAL" )?  
	| enable_or_disable "DISTRIBUTED" "RECOVERY" 
	| enable_or_disable "RESTRICTED" "SESSION" 
	| "FLUSH" "SHARED_POOL" 
	| end_session_clauses 
	| "SWITCH" "LOGFILE"
	| ("SUSPEND" | "RESUME")
	| ("QUIESCE" "RESTRICTED" | "UNQUIESCE")
	| "SHUTDOWN" ("IMMEDIATE")? dispatcher_name
	| "REGISTER"
	| "SET" {alter_system_set_clause, (",")?}
	| "RESET" {alter_system_set_clause, (",")?}
	)
	;
	
end_session_clauses :
	("DISCONNECT" "SESSION" string  ("POST_TRANSACTION")?
	| "KILL" "SESSION" string
	)
	("IMMEDIATE")?;
	
archive_log_clause :
	"ARCHIVE" "LOG" ("THREAD" integer)?
	( ( "SEQUENCE" integer
	  | "CHANGE" integer
	  | "CURRENT" ("NOSWITCH")? 
	  | logfile_group_spec
	  | "LOGFILE" filename ("USING" "BACKUP" "CONTROLFILE")?
	  | "NEXT" 
	  | "ALL"
	  | "START"

	  )
	  ("TO" location)?
	| "STOP"
	);

	dispatcher_name : identifier;

alter_system_set_clause :
	parameter_name ("=")? {parameter_value, ","}
	("COMMENT" string)? ("DEFERRED")?
	("SCOPE" "=" ("MEMORY" | "SPFILE" | "BOTH"))? 
	("SID" "=" (string | "*"))?;


alter_table_statement :
	"ALTER" "TABLE" (schema ".")? table
	( alter_table_properties
	| column_clauses
	| constraint_clauses
	| alter_table_partitioning

	| alter_external_table_clauses
	| move_table_clause
	)?
	({ enable_disable_clause 
	 | enable_or_disable ("TABLE" "LOCK" | "ALL" "TRIGGERS")
	 })?
	;

alter_table_properties :
	((
	  { physical_attributes_clause
	  | logging_clause
	  | data_segment_compression
	  | supplemental_lg_grp_clauses
	  | allocate_extent_clause
	  | deallocate_unused_clause
	  | cache_clause
	  | monitoring_spec
	  | upgrade_table_clause
	  | records_per_block_clause
	  | parallel_clause
	  | row_movement_clause
	  }
	| "RENAME" "TO" new_table_name
	)? 
	(alter_iot_clauses)?) <1,> ;
	
column_clauses :
	{   add_column_clause
	  | modify_column_clause
	  | drop_column_clause
	}
	| rename_column_clause
	| {modify_collection_retrieval}
	| modify_LOB_storage_clause
	| alter_varray_col_properties 
	;

add_column_clause :
	"ADD" 
	(
		"(" {  column datatype (default_tag expression)? 
		      ({inline_constraint})?
		      (inline_ref_constraint)? 
			, "," }  
		")"
	|
		column datatype (default_tag expression)? 
	      ({inline_constraint})?
	      (inline_ref_constraint)? 	
	)
	(column_properties)? ;
	
modify_column_clause :	
	"MODIFY" 
	( modify_col_properties 
	| substitutable_clause );
	
modify_col_properties :	
	"(" 
		{column (datatype)? (default_tag expression)? 
			({inline_constraint })?, ","}
	")"
	( modify_LOB_storage_clause )? ;

substitutable_clause :
	(not_tag)? "SUBSTITUTABLE" 
	"AT" "ALL" "LEVELS" (force_tag)? ;

drop_column_clause :
	 "SET" "UNUSED" ("COLUMN" column | column_list)
	  ({cascade_constraints_tag | "INVALIDATE"})?
	| "DROP" ("COLUMN" column | column_list)
	  ({cascade_constraints_tag | "INVALIDATE"})?
	  ("CHECKPOINT" integer)?
	| "DROP" ("UNUSED" "COLUMNS" | "COLUMNS" "CONTINUE")
	  ("CHECKPOINT" integer)?
	;
	
rename_column_clause :
	"RENAME" "COLUMN" old_name "TO" new_name ;

modify_collection_retrieval :
	"MODIFY" "NESTED" "TABLE" collection_item 
	"RETURN" "AS" ("LOCATOR" | "VALUE");
	
constraint_clauses :
	 "ADD" 
	 ( {out_of_line_constraint}
	   | out_of_line_REF_constraint
	   | "(" {out_of_line_constraint} ")"
	   | "(" out_of_line_REF_constraint ")"
	 )
	| "MODIFY" "CONSTRAINT" constraint constraint_state
	| "RENAME" "CONSTRAINT" old_name "TO" new_name
	| drop_constraint_clause
	;

drop_constraint_clause :
	"DROP"
	( (primary_key_spec | unique_columns_spec)
	  (cascade_tag)? (keep_or_drop_index)?
	| "CONSTRAINT" constraint (cascade_tag)?
	);
	
alter_table_partitioning :
	  modify_table_default_attrs
	| set_subpartition_template
	| modify_table_partition
	| modify_table_subpartition
	| move_table_partition
	| move_table_subpartition
	| add_table_partition
	| coalesce_table_partition
	| drop_table_partition
	| drop_table_subpartition
	| rename_partition_subpart
	| truncate_partition_subpart
	| split_table_partition
	| split_table_subpartition
	| merge_table_partitions
	| merge_table_subpartitions
	| exchange_partition_subpart
	;

modify_table_default_attrs :
	"MODIFY" "DEFAULT" "ATTRIBUTES" 
	("FOR" "PARTITION" partition)? 
	(segment_attributes_clause)? 
	(data_segment_compression)?
	(pctthreshold_clause)?
	(key_compression)? 
	(alter_overflow_clause)? 
	({("LOB" "(" LOB_item ")" | "VARRAY" varray) 
		"(" LOB_parameters ")"})?;

alter_overflow_clause :
	"OVERFLOW"
	{  allocate_extent_clause 
	 | deallocate_unused_clause }
	| add_overflow_clause ;
	
add_overflow_clause :
	"ADD" "OVERFLOW" (segment_attributes_clause)?
	("(" {"PARTITION" (segment_attributes_clause)? , ","} ")")? ;
	
set_subpartition_template :
	"SET" "SUBPARTITION" "TEMPLATE"
	(
		"(" { "SUBPARTITION" subpartition 
			(list_values_clause)? 
			(partitioning_storage_clause)?
			, "," 
		    }
		")"
	| hash_subpartition_quantity
	);

modify_table_partition :
	  modify_range_partition 
	| modify_hash_partition 
	| modify_list_partition 
	;

modify_range_partition :

	"MODIFY" "PARTITION" partition
	  ( partition_attributes
	  | add_hash_subpartition 
	  | add_list_subpartition
	  | "COALESCE" "SUBPARTITION" 
	    (update_global_index_clause)?
	    (parallel_clause)?
	  | alter_mapping_table_clause
	  | unusable_local_indexes_clause
	  );
	  
partition_attributes :
	(({ physical_attributes_clause
	 | logging_clause
	 | allocate_extent_clause 
	 | deallocate_unused_clause
	 })? 
	("OVERFLOW"
	 { physical_attributes_clause
	 | logging_clause
	 | allocate_extent_clause
	 | deallocate_unused_clause 
	 })? 
	( data_segment_compression )?
	({ ("LOB" LOB_item | "VARRAY" varray) 
		modify_LOB_parameters })?) <1,> ;
	  
add_hash_subpartition :
	"ADD" subpartition_spec
	(update_global_index_clause)? 
	(parallel_clause)?;

add_list_subpartition :
	"ADD" subpartition_spec ;


update_global_index_clause :
	("UPDATE" | "INVALIDATE") "GLOBAL" "INDEXES" ;

alter_mapping_table_clause :
	"MAPPING" "TABLE"
	( update_block_references_tag
	| allocate_extent_clause
	| deallocate_unused_clause
	);

modify_hash_partition :	  
	"MODIFY" "PARTITION" partition
	  ( partition_attributes
	  | alter_mapping_table_clause
	  | unusable_local_indexes_clause
	  );

modify_list_partition :
	"MODIFY" "PARTITION" partition
	  ( partition_attributes
	  | ("ADD" | "DROP") "VALUES" "(" {partition_value, ","} ")"
	  | unusable_local_indexes_clause
	  );

modify_table_subpartition :
	"MODIFY" "SUBPARTITION" subpartition 
	( modify_hash_subpartition 
	| modify_list_subpartition );
	
modify_hash_subpartition :
	( ( (allocate_extent_clause | deallocate_unused_clause)
	  | {("LOB" LOB_item | "VARRAY" varray) modify_LOB_parameters}
	  )
	| unusable_local_indexes_clause
	);
	
modify_list_subpartition :
	(allocate_extent_clause | deallocate_unused_clause)
	| {("LOB" LOB_item | "VARRAY" varray) modify_LOB_parameters}
	| unusable_local_indexes_clause
	| ("ADD" | "DROP") "VALUES" {value,","}
	;	
	
move_table_partition :
	"MOVE" "PARTITION" partition 
	("MAPPING" "TABLE")? 
	(table_partition_description)? 
	(update_global_index_clause)? 
	(parallel_clause)? ;
	
move_table_subpartition :
	"MOVE" "SUBPARTITION" subpartition 
//	subpartition_attributes
	(update_global_index_clause)? 
	(parallel_clause)?;

partition_spec :
	"PARTITION" partition 
	(tablespace_spec)?
	({ LOB_storage_clause 
	 | "(" minextents_spec ")"})? ;

add_table_partition :
	  add_range_partition_clause
	| add_hash_partition_clause
	| add_list_partition_clause
	;

add_range_partition_clause :
	"ADD" "PARTITION" (partition)? 
	range_values_clause 
	(table_partition_description)?;

add_hash_partition_clause :
	"ADD" "PARTITION" (partition)? 
	partitioning_storage_clause
	(update_global_index_clause)? 
	(parallel_clause)? ;

add_list_partition_clause :
	"ADD" "PARTITION" (partition)? 
	list_values_clause 
	(table_partition_description)? ;

coalesce_table_partition :
	"COALESCE" "PARTITION" 
	(update_global_index_clause)? 
	(parallel_clause)? ;

drop_table_partition :
	"DROP" "PARTITION" partition 
	(update_global_index_clause 
	(parallel_clause)?)? ;

drop_table_subpartition :
	"DROP" "SUBPARTITION" subpartition 
	(update_global_index_clause 
	(parallel_clause)?)? ;

rename_partition_subpart :
	"RENAME" ("PARTITION" | "SUBPARTITION")
	current_name "TO" new_name ;

	current_name : identifier;
	current_partition : identifier;
	partition_1 : identifier;
	partition_2 : identifier;
	subpart_1 : identifier;
	subpart_2 : identifier;

truncate_partition_subpart :
	"TRUNCATE" ("PARTITION" partition 
		| "SUBPARTITION" subpartition)
	(reuse_or_drop_storage)? 
	(update_global_index_clause (parallel_clause)?)? ;

split_table_partition :
	"SPLIT" "PARTITION" current_partition 
	("AT" | "VALUES") "(" {value,","} ")"
	("INTO" "(" partition_spec "," partition_spec ")")? 
	(update_global_index_clause)? 
	(parallel_clause)? ;

split_table_subpartition :
	"PARTITION" (partition)? 
	(table_partition_description)? ;

merge_table_partitions :
	"MERGE" "PARTITIONS" partition_1 "," partition_2 
	("INTO" partition_spec)? 
	(update_global_index_clause)? 
	(parallel_clause)? ;
	
merge_table_subpartitions :
	"MERGE" "SUBPARTITIONS" subpart_1 "," subpart_2
	("INTO" subpartition_spec)?
	(update_global_index_clause)?
	(parallel_clause)? ;

exchange_partition_subpart :
	"EXCHANGE" ("PARTITION" partition | "SUBPARTITION" subpartition)
	"WITH" "TABLE" table (("INCLUDING" | "EXCLUDING") "INDEXES")?
	(("WITH" | "WITHOUT") "VALIDATION")?
	(exceptions_clause)? 
	(update_global_index_clause 
		(parallel_clause)?)?;
	  
exceptions_clause :	  
	"EXCEPTIONS" "INTO" (schema ".")? table ;

alter_external_table_clauses :
	{ add_column_clause
	| modify_column_clause
	| drop_column_clause
	| parallel_clause
	| external_data_properties 
	| "REJECT" "LIMIT" (integer | "UNLIMITED")
	};

move_table_clause :
	"MOVE" (online_tag)? 
	(segment_attributes_clause)? 
	(data_segment_compression)?
	(index_org_table_clause)?
	({LOB_storage_clause | varray_col_properties})?
	(parallel_clause)? ;

supplemental_lg_grp_clauses :
	  "ADD" "SUPPLEMENTAL" "LOG" "GROUP" log_group 
	  column_list ("ALWAYS")? 
	| "DROP" "SUPPLEMENTAL" "LOG" "GROUP" log_group
	;

upgrade_table_clause :
	"UPGRADE" ((not_tag)? "INCLUDING" "DATA")? 
	(column_properties)?;
	
records_per_block_clause :
	("MINIMIZE" | "NOMINIMIZE") "RECORDS_PER_BLOCK" ;

new_table_name : identifier;

alter_iot_clauses :
	  index_org_table_clause 
	| alter_overflow_clause 
	| alter_mapping_table_clauses 
	| coalesce_tag ;

modify_LOB_storage_clause :
	"MODIFY" "LOB" "(" LOB_item ")" 
	"(" modify_LOB_parameters ")" ;

modify_LOB_parameters :
	{ storage_clause
	| pctversion_clause
	| retention_tag
	| freepools_clause
	| "REBUILD" "FREEPOOLS"
	| cache_clause
	| ( allocate_extent_clause | deallocate_unused_clause ) 
	};

alter_varray_col_properties :
	"MODIFY" "VARRAY" varray_item 
	"(" modify_LOB_storage_parameters ")" ;

alter_tablespace_statement : 
	"ALTER" tablespace_spec
	{ datafile_tempfile_clauses
	| default_storage_clause
	| minimum_extent_clause
	| online_tag
	| offline_clause
	| ("BEGIN" | "END") "BACKUP"
	| read_write_clause
	| permanent_or_temporary
	| coalesce_tag
	| logging_clause
	| force_logging_spec
	| autoextend_clause
	| size_spec
	}
	;

read_write_clause :
	  "READ" "ONLY" 
	| "READ" "WRITE" ;

offline_clause :
	"OFFLINE" (offline_attribute)? ;
	
offline_attribute :	
	"NORMAL" | "TEMPORARY" | "IMMEDIATE" ;

default_storage_clause :
	"DEFAULT" (data_segment_compression)? 
	storage_clause ;

datafile_tempfile_clauses :
	( "ADD" ("DATAFILE" | "TEMPFILE") 
	      ({datafile_tempfile_spec, ","})?
	| "RENAME" "DATAFILE" {filename, ","} 
		"TO" {filename, ","}
	| ("DATAFILE" | "TEMPFILE") online_or_offline
	) ;

alter_trigger_statement :
	"ALTER" "TRIGGER" ( schema "." )?trigger_name
	  { enable_or_disable
	  | "RENAME" "TO" new_name
	  | compile_clause (reuse_settings)?
	  } ;

alter_type_statement :
	"ALTER" "TYPE" ( schema "." )? type
	  ( compile_type_clause
	  | replace_type_clause
	  | ( alter_method_spec
	    | alter_attribute_definition
	    | (not_tag)? (instantiable_tag | final_tag)
	    )
	    ( dependent_handling_clause )?
	  ) ;
	  
compile_type_clause :
	compile_clause 
	("SPECIFICATION "| "BODY")? 
	(reuse_settings)? ;
	
replace_type_clause :
	"REPLACE" (invoker_rights_clause)? "AS" "OBJECT"
	"(" {attribute datatype, ","}
	  ("," {element_spec, ","} )? ")" ;
	
alter_method_spec :
	("ADD" | "DROP")
	{map_order_function_spec | subprogram_clauses, ","} ;


alter_attribute_definition :
	  ("ADD" | "MODIFY") "ATTRIBUTE"
	  (attribute (datatype)? | "(" {attribute datatype, ","} ")" )
	| "DROP" "ATTRIBUTE" (attribute | "(" {attribute, ","} ")" ) ;

dependent_handling_clause :
	  "INVALIDATE"
	| "CASCADE" ( ((not_tag)? "INCLUDING" "TABLE" "DATA"
	            | "CONVERT" "TO" "SUBSTITUTABLE"
	            ))? ((force_tag)? exceptions_clause)?
	;

alter_user_statement :
	"ALTER" "USER" {user_name, ","}
	({create_user_option})? ;
	
proxy_clause :
	("GRANT" | "REVOKE") "CONNECT" "THROUGH" proxy 
	("WITH" 
	  (ROLE ( {role, ","} | "ALL" "EXCEPT" {role, ","} )
	 | "NO" "ROLES" )
	)?
	("AUTHENTICATED" "USING"
	 ( "PASSWORD"
	 | "DISTINGUISHED" "NAME"
	 | "CERTIFICATE" ("TYPE" string)? ("VERSION" string)?
	 )
	)?;

alter_view_statement :
	"ALTER" "VIEW" ( schema "." )? view
	(  "ADD" out_of_line_constraint
	 | "MODIFY" "CONSTRAINT" constraint ("RELY" | "NORELY")
	 | "DROP" 
	   ( "CONSTRAINT" constraint 
	   | primary_key_spec 
	   | unique_columns_spec )
	 | compile_clause
	) ;

alter_materialized_view_statement :
	"ALTER" "MATERIALIZED" "VIEW"
	(schema ".")? materialized_view
	( physical_attributes_clause 
	  | data_segment_compression
	  | {LOB_storage_clause, ","}
	  | {modify_LOB_storage_clause, ","}
	  | alter_table_partitioning
	  | parallel_clause 
	  | logging_clause
	  | allocate_extent_clause
	  | cache_or_nocache
	)? 
	(alter_iot_clauses)?
	("USING" "INDEX" physical_attributes_clause)?
	(   "MODIFY" scoped_table_ref_constraint 
	  | rebuild_tag
	  | mv_refresh 
	)?
	( ("ENABLE" | "DISABLE") "QUERY" "REWRITE"
	  | "COMPILE"
	  | "CONSIDER" "FRESH"
	)? ;

alter_materialized_view_log :
	"ALTER" "MATERIALIZED" "VIEW" "LOG" "ON" 
	(schema ".")? table
	(   physical_attributes_clause
	  | alter_table_partitioning
	  | parallel_clause
	  | logging_clause
	  | allocate_extent_clause
	  | cache_or_nocache
	)?
	("ADD"
	      { ("OBJECT" "ID" | primary_key_spec | "ROWID")
	        (column_list)?
	      | column_list
	      , "," }
	      ( new_values_clause )?
	)?;
	
analyze_statement :
	"ANALYZE"
	(   "TABLE" ( schema "." )? table
	      ( "PARTITION" "(" partition ")" 
	      | "SUBPARTITION" "(" subpartition ")" )?
	  | "INDEX" ( schema "." )?index
	      ( "PARTITION" "(" partition ")" 
	      | "SUBPARTITION" "(" subpartition ")" )?
	  | "CLUSTER" ( schema "." )? cluster
	)
	{   compute_statistics_clause
	  | estimate_statistics_clause
	  | validation_clauses
	  | list_chained_rows_clause 
	  | delete_statistics_clause 
	} ;

compute_statistics_clause :
	"COMPUTE" ( "SYSTEM" )? 
	"STATISTICS" (for_clause)? ;

estimate_statistics_clause :
	"ESTIMATE" ( "SYSTEM" )? 
	"STATISTICS" (for_clause)?
	("SAMPLE" integer ("ROWS" | "PERCENT"))? ;

delete_statistics_clause :
	"DELETE" ( "SYSTEM" )? "STATISTICS" ;

list_chained_rows_clause :
	"LIST" "CHAINED" "ROWS" (into_clause)? ;

validation_clauses :
	  "VALIDATE" "REF" "UPDATE" 
	  ("SET" "DANGLING" "TO" "NULL")?
	| "VALIDATE" "STRUCTURE" 
	  (cascade_tag)? (into_clause)? 
	  (online_or_offline)?
	;

for_clause :
	{"FOR"
	( "TABLE"
	| "ALL" ("INDEXED")? "COLUMNS" (size_spec)?
	| "COLUMNS" (size_spec)? 
	  {(column | attribute) (size_spec)?}
	| "ALL" ("LOCAL")? "INDEXES"
	)} ;

into_clause :
	"INTO" (schema ".")? table ;

audit_statement :
	"AUDIT" (sql_statement_clause | schema_object_clause)
	("BY" ("SESSION" | "ACCESS"))?
	("WHENEVER" (not_tag)? "SUCCESSFUL")?;

sql_statement_clause :
	( {statement_option | "ALL", ","}
	| {system_privilege | "ALL" "PRIVILEGES", ","}
	)
	(auditing_by_clause | auditing_on_clause)? ;

auditing_by_clause :
	"BY"
	( {proxy, ","} ("ON" "BEHALF" "OF" {user_name, ","} | "ANY")?
	| {user_name, ","}
	) ;

schema_object_clause :
	({object_option, ","} | "ALL") 
	auditing_on_clause ;

auditing_on_clause :
	  "ON" 
	  (  (schema ".")? object_name 
	   | "DIRECTORY" directory 
	   | default_tag ) ;

statement_option : 
	(sql_verb)? ("ANY" | "PUBLIC")? sql_item ;
	
system_privilege  : 
	  sql_verb ("ANY" | "PUBLIC")? sql_item
	| ("GLOBAL")? "QUERY" "REWRITE"
	| "ON" "COMMIT" "REFRESH"
	| "RESTRICTED" "SESSION"
	| "UNLIMITED" "TABLESPACE"
	| "ANALYZE" "ANY"
	| "AUDIT" "ANY"
	| "COMMENT" "ANY" "TABLE"
	| "EXEMPT" "ACCESS" "POLICY"
	| "FORCE" ("ANY")? "TRANSACTION"
	| "RESUMABLE"
	| "SYSDBA"
	| "SYSOPER" 
	;

sql_verb : 
	  "BACKUP" | "CREATE" | "ALTER" | "DROP" | "AUDIT" | "DEBUG" | "EXECUTE" 
	| "GRANT" | "SELECT" | "DELETE" | "INSERT" | "LOCK" | "FLASHBACK"
	| "UPDATE" | "MANAGE" | "ADMINISTER" | "BECOME" | "UNDER" | "READ" ;

sql_item : 
	  "CLUSTER" | "CONTEXT" | "DATABASE" "LINK" | "SYSTEM" 
	| "CONNECT" "SESSION" | "DIMENSION" | "DIRECTORY"
	| "INDEXTYPE" | "INDEX" | "LIBRARY" | "MATERIALIZED" "VIEW"
	| "OPERATOR" | "OUTLINE" | "PROCEDURE" | "PROFILE" | "ROLE"
	| "ROLLBACK" "SEGMENT" | "SEQUENCE" | "SESSION"
	| "RESOURCE" "COST" | "SYNONYM" | "TABLE" | "TABLESPACE"
	| ("DATABASE")? "TRIGGER" | "TYPE" | "USER" | "VIEW"
	| ("OBJECT")? "PRIVILEGE" | "DICTIONARY"
	;
	
object_option  : 
	"ALTER" | "AUDIT" | "COMMENT" | "DELETE" | "EXECUTE"
	| "GRANT" | "INDEX" | "INSERT" | "LOCK" | "READ" | "RENAME"
	| "SELECT" | "UPDATE"
	;

comment_statement :
	"COMMENT" "ON" 
	( "TABLE" qualified_name
	| "COLUMN" qualified_name
	| "OPERATOR" qualified_name
	| "INDEXTYPE" qualified_name
	)
	"IS" string;

expression : 	
	(
	  not_tag expression
	| exists_condition
	| under_path_condition
 	| "(" expression ")" 
 	| "(" expression_list ")"
 	| interval_expression
	| ({"+" | "-" | "PRIOR"})?
 	( 
		  simple_expression
		| case_expression
		| cursor_expression
		| object_access_expression
		| scalar_subquery_expression
		| type_constructor_expression
		| variable_expression
	)
	)
	(  
	   interval_specifier
	 | datetime_specifier
	 | null_condition 
	 | like_condition 
	 | membership_condition
	 | range_condition
	 | is_of_type_condition 
	 | equals_path 
	)?
	(operator expression)?
	;
	
datetime_specifier :
	"AT"
	( "LOCAL"
	  | "TIME" "ZONE" 
	  	(   string
	  	  | "DBTIMEZONE"
        	  | "SESSIONTIMEZONE"
	        | expression
            )
	) ;

interval_expression :
	"INTERVAL" squotedstring "DAY" ;

interval_specifier :
	  "DAY" "TO" "SECOND" 
	| "YEAR" "TO" "MONTH" ;
	
exists_condition :
	"EXISTS" "(" subquery ")" ;

under_path_condition : 
	"UNDER_PATH" 
	"(" column ("," levels)? "," 
		path_string ("," correlation_integer)? ")" ;

null_condition :
	"IS" (not_tag)? null_tag ;

like_condition :
	(not_tag)? ("LIKE" | "LIKEC" | "LIKE2" | "LIKE4") 
	expression ("ESCAPE" expression)? ;

membership_condition :
	(not_tag)? "IN" "(" (expression_list | subquery) ")" ;
	
range_condition :
	(not_tag)? "BETWEEN" 
	simple_expression "AND" simple_expression ;

is_of_type_condition : 
	"IS" (not_tag)? "OF" ("TYPE")? 
	"(" {("ONLY")? (schema ".")? type ")", ","} ;

equals_path :
	"EQUALS_PATH" 
	"(" column "," path_string ("," correlation_integer)? ")" ;
	
operator :
	  "*"  | "/" | "+" | "-"  | "AND" | "OR"
	| "<"  | ">" | "=" | "<=" | ">="  | "!=" 
	| "^=" | "<>" | "||" | "**"
	| "=>"
	| ":="
	;

simple_expression :
	  "ROWNUM"
	| null_tag
	| "USER"
	| function ("." simple_expression)?
	| ("DISTINCT")?
	  qualified_name (  "(" ({expression, ","})? ")" 
				| "(" "+" ")"
				| "." ("CURRVAL" | "NEXTVAL") 
				| "%" ("FOUND" | "NOTFOUND")
				)?
				("." simple_expression
				| "@" simple_expression)?
	| number
	| hex_number
	| squotedstring
	| quotedstring
	;

case_expression :
	"CASE" 
	( simple_case_expression 
	| searched_case_expression )
	(else_clause)? "END" ;
	
simple_case_expression :
	expression 
	{"WHEN" comparison_expr "THEN" return_expr} ; 
	
searched_case_expression :
	{"WHEN" condition "THEN" return_expr} ;

else_clause :
	"ELSE" else_expr ;
	
cursor_expression :
	"CURSOR" "(" subquery ")" ;
	
function :
	  single_row_function
	| aggregate_function
	| object_reference_function
	| value_function
	| analytic_function
	| xml_function
	;
	
single_row_function :
	  character_function
	| conversion_function
	| treat_function
	| miscellaneous_single_row_function
	;

aggregate_function :
	(
	aggregate_function_name
	"(" ("*" | { (distinct_or_all)? expression, ","})? ")" 
	( "OVER" "(" 
		( analytic_clause 
		| (query_partition_clause)? order_by_clause) ")"
	| "WITHIN" "GROUP"
		"(" "ORDER" "BY" 
		  {expression (ascending_or_descending)? ("NULLS" ("FIRST" | "LAST"))?, ","}
		 ")"
		("OVER" "(" query_partition_clause ")")?
	)?
	)
	(
		"KEEP" 
		"(" "DENSE_RANK" ("FIRST" | "LAST") "ORDER" "BY"
		{expression (ascending_or_descending)? 
			("NULLS" ("FIRST" | "LAST"))?, ","}
		")"
		("OVER" "(" query_partition_clause ")" )?
	)?;

aggregate_function_name :
	  "AVG" 
	| "COUNT" 
	| "CORR"
	| "COVAR_POP"
	| "COVAR_SAMP"
	| "CUME_DIST"
	| "DENSE_RANK"
	| "GROUP_ID"
	| "GROUPING"
	| "GROUPING_ID"
	| "MAX"
	| "MIN"
	| "PERCENTILE_CONT"
	| "PERCENTILE_DISC"
	| "PERCENT_RANK"
	| "RANK"
	| "REGR_SLOPE"
	| "REGR_INTERCEPT"
	| "REGR_COUNT" 
	| "REGR_R2" 
	| "REGR_AVGX" 
	| "REGR_AVGY" 
	| "REGR_SXX" 
	| "REGR_SYY" 
	| "REGR_SXY"
	| "STDDEV"
	| "STDDEV_POP"
	| "STDDEV_SAMP"
	| "SUM"
	| "VAR_POP"
	| "VAR_SAMP"
	| "VARIANCE"
	; 

character_function :
	  trim_function 
	| character_function_name "(" ({expression, ","})? ")" ;
	
character_function_name :
	  "CHR"
	| "CONCAT"
	| "INITCAP"
	| "LOWER"
	| "LPAD" 
	| "LTRIM" 
	| "NLS_INITCAP"
	| "NLS_LOWER" 
	| "NLSSORT" 
	| "NLS_UPPER" 
	| "REPLACE" 
	| "RPAD" 
	| "RTRIM" 
	| "SOUNDEX"
	| "SUBSTR" 
	| "TRANSLATE" 
	| "TREAT" 
	| "TRIM" 
	| "UPPER"
 	;

trim_function :
	"TRIM" 
	"(" ("LEADING" | "TRAILING" | "BOTH")?
	    (trim_character)?
	    ("FROM")?
	    trim_source
	")";
	
	trim_character : numeric | string;
	trim_source : numeric | string;
	
conversion_function :
	  cast_function
	| conversion_function_name
		"(" ({expression ("USING" ("CHAR_CS" | "NCHAR_CS" ))?, ","})? ")" 
		// NOTE: "using" clause only for TRANSLATE function
	;
	
cast_function :
	"CAST" "("
		( 
		  "(" subquery ")" 
		| "MULTISET" "(" subquery ")"
		| expression 
		) 
		"AS" type_name 
		")" ;
	
conversion_function_name :
	  "ASCIISTR"
	| "BIN_TO_NUM"
	| "CHARTOROWID"
	| "COMPOSE"
	| "CONVERT"
	| "DECOMPOSE"
	| "HEXTORAW"
	| "NUMTODSINTERVAL"
	| "NUMTOYMINTERVAL"
	| "RAWTOHEX"
	| "RAWTONHEX"
	| "ROWIDTOCHAR"
	| "ROWIDTONCHAR"
	| "TO_CHAR"
	| "TO_CLOB"
	| "TO_DATE"
	| "TO_DSINTERVAL"
	| "TO_LOB"
	| "TO_MULTI_BYTE"
	| "TO_NCHAR"
	| "TO_NCLOB"
	| "TO_NUMBER"
	| "TO_SINGLE_BYTE"
	| "TO_YMINTERVAL"
	| "TRANSLATE"
	| "UNISTR"
	;

treat_function :
	"TREAT" "(" expression "AS" ("REF")? 
		(schema ".")? type ")" ;

	
value_function :
	"VALUE" "(" correlation_variable ")" ;
	
miscellaneous_single_row_function :
	  miscellaneous_function_name
	"(" ({expression, ","})? ")" 
	;
	
miscellaneous_function_name :
	  "BFILENAME"
	| "COALESCE"
	| "DECODE" 
	| "DEPTH" 
	| "DUMP" 
	| "EMPTY_BLOB" 
	| "EMPTY_CLOB"
	| "EXISTSNODE" 
	| "EXTRACT"
	| "EXTRACTVALUE" 
	| "GREATEST" 
	| "LEAST" 
	| "NLS_CHARSET_DECL_LEN"
	| "NLS_CHARSET_ID" 
	| "NLS_CHARSET_NAME" 
	| "NULLIF" 
	| "NVL" 
	| "NVL2" 
	| "PATH" 
	| "SYS_CONNECT_BY_PATH" 
	| "SYS_CONTEXT" 
	| "SYS_DBURIGEN" 
	| "SYS_EXTRACT_UTC" 
	| "SYS_GUID" 
	| "SYS_TYPEID" 
	| "SYS_XMLAGG"
	| "SYS_XMLGEN" 
	| "UID" 
	| "UPDATEXML" 
	| "USER" 
	| "USERENV" 
	| "VSIZE" 
	;

analytic_function :
	analytic_function_name
	"(" (arguments)? ")" 
	"OVER" "(" analytic_clause ")" ;
	
analytic_function_name : plsql_identifier;

analytic_clause :
	(query_partition_clause)? 
	(order_by_clause (windowing_clause)?)? ;

query_partition_clause :
	"PARTITION" "BY" {value_expr, ","} ;
	
windowing_clause :
	("ROWS" | "RANGE")
	( "BETWEEN"
	  ( "UNBOUNDED" "PRECEDING"
	  | "CURRENT" "ROW"
	  | value_expr ( "PRECEDING" | "FOLLOWING" )
	
	  ) 
	  "AND"
	  ( "UNBOUNDED" "FOLLOWING"
	  | "CURRENT" "ROW"
	  | value_expr ( "PRECEDING" | "FOLLOWING" )
	  ) 
	| ( "UNBOUNDED" "PRECEDING"
	  | "CURRENT" "ROW"
	  | value_expr "PRECEDING"  
	  )
	) ;

object_access_expression :
	(   table_alias "." column "." 
	  | object_table_alias "." 
	  | "(" expression ")" "." )
	( {attribute, "."} ("." method "(" ({argument, ","})? ")" )?
	| method "(" ({argument, ","})? ")"
	);
	
type_constructor_expression :
	("NEW")? (schema".")? 
	type_name "(" {expression, ","} ")" ;
	
variable_expression :
	":" host_variable 
	(("INDICATOR")? ":" indicator_variable)? ;

object_reference_function :
	object_reference_function_name 
	"(" ({expression, ","})? ")" ;
	
object_reference_function_name :
	  "DEREF" 
	| "REF" 
	| "VALUE" 
	| "MAKE_REF" 
	| "REFTOHEX" ;

user_defined_function :
	(schema ".")? 
	(   (package ".")? function 
	  | user_defined_operator )
	("@" dblink ".")? 
	("(" (distinct_or_all)? {expression, ","} ")" )? ;

datatype :
	  Oracle_built_in_datatypes 
	| ANSI_supported_datatypes 
	| user_defined_types 
	| "XMLTYPE"
	;
	
Oracle_built_in_datatypes :
	  character_datatypes
	| number_datatypes
	| long_and_raw_datatypes
	| datetime_datatypes
	| large_object_datatypes
	| rowid_datatypes
	;

character_datatypes :
	character_datatype_name
  	("(" size ("BYTE" | "CHAR")? ")")? ;
	
character_datatype_name :
	  "CHAR"
	| "VARCHAR2"
	| "VARCHARC"
	| "NCHAR"
	| "NVARCHAR2"
	;

number_datatypes :
	"NUMBER" 
	("(" precision ("," scale)? ")")? ;

long_and_raw_datatypes :
	"LONG" ("RAW" ("(" size ")")?)?
	| ("RAW" | "VARRAW" | "VARRAWC") ("(" size ")")?
	;

datetime_datatypes :
	  "DATE"
	| "TIMESTAMP" 
		("(" fractional_seconds_precision ")")? 
		("WITH" ("LOCAL")? "TIME" "ZONE")? 
	| "INTERVAL" "YEAR" 
		("(" year_precision ")")? "TO" "MONTH"
	| "INTERVAL" "DAY" 
		("(" day_precision ")")? "TO" "SECOND" 
		("(" fractional_seconds_precision ")")?
	;
	
large_object_datatypes :
	  "BLOB" 
	| "CLOB" 
	| "NCLOB" 
	| "BFILE"
	;

rowid_datatypes :
	  "ROWID" 

	| "UROWID" ("(" size ")")?
	;

ANSI_supported_datatypes :
	(
	  "CHARACTER" ("VARYING")? 
	| ("CHAR" | "NCHAR") "VARYING"
	| "VARCHAR"
	| "NATIONAL" ("CHARACTER" | "CHAR") ("VARYING")?
	| "NUMERIC" | "DECIMAL" | "DEC"
	| "INTEGER" | "INT" | "SMALLINT"

	| "FLOAT"
	| "DOUBLE" "PRECISION"
	| "REAL")
	("EXTERNAL" ^("NAME" | "VARIABLE"))?
	("(" size ")")?
	;

user_defined_types : 
	("REF")? qualified_name 
	("%" ("TYPE" | "ROWTYPE"))? 
	("(" size ")")?;

	size 			: numeric ("," numeric)?;
	precision 		: numeric;
	day_precision 	: numeric;
	scale 		: numeric;
	fractional_seconds_precision : numeric;
	year_precision 	: numeric;

inline_constraint :
	("CONSTRAINT" constraint_name)?
	((not_tag)? null_tag
	| "UNIQUE" ^"("
	| "PRIMARY KEY"
	| references_clause
	| "CHECK" "(" condition ")"
	) (constraint_state)? ;

out_of_line_constraint : 
	("CONSTRAINT" constraint_name)?
	( unique_columns_spec
	| "PRIMARY" "KEY" column_list
	| "FOREIGN" "KEY" column_list references_clause
	| "CHECK" "(" condition ")"
	) (constraint_state)? ;

inline_ref_constraint : 
	  "SCOPE" "IS" (schema "." )? scope_table
	| "WITH" "ROWID"
	| ("CONSTRAINT" constraint_name)? 
	  references_clause (constraint_state)?
	;

out_of_line_ref_constraint : 
	  "SCOPE" "FOR" "(" (ref_col | ref_attr) ")" 
	  "IS" ( schema "." )? scope_table
	| "REF" "(" (ref_col | ref_attr) ")" "WITH" "ROWID"
	| ( "CONSTRAINT" constraint_name )? 
	      "FOREIGN" "KEY" "(" (ref_col | ref_attr) ")" 
	      references_clause ( constraint_state )?
	;
	
references_clause :
	"REFERENCES" qualified_name (column_list)? 
	(on_delete_clause)?
	(constraint_state)? ;	
	
on_delete_clause :
	"ON" "DELETE" (cascade_tag | set_null_tag) ;
	
	set_null_tag : "SET" "NULL";
	
constraint_state :
	( 
		((not_tag)? "DEFERRABLE")? 
		("INITIALLY" ("IMMEDIATE" | "DEFERRED"))?
		((not_tag)? "DEFERRABLE")?
	)?
	("RELY" | "NORELY")? 
	(using_index_clause)?
	(enable_or_disable ^"CONSTRAINT")? 
	( "VALIDATE" | "NOVALIDATE" )? 
	(exceptions_clause)? ;
	
drop_cluster :
	"DROP" "CLUSTER" qualified_name 
	("INCLUDING" "TABLES" (cascade_constraints_tag)?)?;

drop_database_link :
	"DROP" ("PUBLIC")? "DATABASE" "LINK" dblink;

drop_directory :
	"DROP" "DIRECTORY" directory_name;

drop_dimension :
	"DROP" "DIMENSION" qualified_name ;

drop_function :	
	"DROP" "FUNCTION" qualified_name;

drop_index :	
	"DROP" "INDEX" qualified_name (force_tag)?;

drop_indextype :
	"DROP" "INDEXTYPE" qualified_name (force_tag)?;

drop_context :
	"DROP" "CONTEXT" namespace;

drop_library :	
	"DROP" "LIBRARY" library_name;

drop_operator : 
	"DROP" "OPERATOR" qualified_name (force_tag)?;

drop_package :
	"DROP" "PACKAGE" ("BODY")? qualified_name ;
	
drop_procedure :
	"DROP" "PROCEDURE" qualified_name ;
	
drop_profile :
	"DROP" "PROFILE" profile_name (cascade_tag)?;

drop_role :
	"DROP" "ROLE" role ;

drop_rollback_segment :
	"DROP" "ROLLBACK" "SEGMENT" rollback_segment;

drop_sequence :
	"DROP" "SEQUENCE" qualified_name;

drop_snapshot :
	"DROP" "SNAPSHOT" ("LOG" "ON")? qualified_name;
	
drop_synonym :
	"DROP" ("PUBLIC")? "SYNONYM" 
	synonym_name (force_tag)?;

drop_table :
	"DROP" "TABLE" qualified_name 
	(cascade_constraints_tag)?;

drop_tablespace :
	"DROP" tablespace_spec
	("INCLUDING" "CONTENTS" ("AND" "DATAFILES")? 
	(cascade_constraints_tag)?)?;

drop_trigger :
	"DROP" "TRIGGER" qualified_name ;

drop_type :
	"DROP" "TYPE" qualified_name 
	("FORCE" | "VALIDATE")?;

drop_type_body :
	"DROP" "TYPE" "BODY" qualified_name;

drop_user :
	"DROP" "USER" user_name 
	(cascade_tag)?;

drop_view :
	"DROP" "VIEW" qualified_name 
	(cascade_constraints_tag)?;
	
drop_materialized_view :
	"DROP" "MATERIALIZED" "VIEW"
	(schema ".")? ^"LOG" materialized_view;

drop_materialized_view_log :
	"DROP" "MATERIALIZED" "VIEW" "LOG" "ON" 
	(schema ".")? table ;

drop_outline :
	"DROP" "OUTLINE" outline ;

raise_statement :
	"RAISE" (exception_name)?;

return_statement :
	"RETURN" ("(" expression ")" | expression )?;

goto_statement :
	"GOTO" label_name;
	
if_statement : 
	"IF" expression "THEN" ({statement})?
	({"ELSIF" expression "THEN" ({statement})?})? 
	("ELSE" ({statement})?)? 
	("ENDIF" | "END" "IF") ;

	
loop_statement :
	  basic_loop_statement
	| while_loop_statement
	| for_loop_statement
	;

basic_loop_statement :
	("<<" label_name ">>")? 
	"LOOP" ({statement})?

	"END" "LOOP" (label_name)?;
 
while_loop_statement :
	("<<" label_name ">>")? 
	"WHILE" expression
	"LOOP" ({statement})?
	"END" "LOOP" (label_name)?;

for_loop_statement :
	("<<" label_name ">>")? 
	"FOR" index_name "IN"
	("REVERSE")? lower_bound (".." upper_bound)?
	"LOOP" ({statement})?
	"END" "LOOP" (label_name)?;

null_statement :
	"NULL" ;
	
assignment_statement :
	plsql_identifier ":=" expression ;
	
forall_statement :
	"FORALL" index_name 
	"IN" lower_bound ".." upper_bound
	statement;

	index_name : plsql_identifier;
	lower_bound : expression;
	upper_bound : expression;

disassociate_statistics :
	"DISASSOCIATE" "STATISTICS" "FROM"
	{associated_item {qualified_name, ","}}
	(force_tag)? ;
	
associated_item :
	  "COLUMNS"
	| "FUNCTIONS"
	| "PACKAGES"
	| "TYPES"
	| "INDEXES"
	| "INDEXTYPES"
	;
	
force_tag : "FORCE" ;

case_statement :
	("<<" label_name ">>")?
	"CASE" (case_operand)?
	{"WHEN" expression "THEN" {statement (";")?}}
	("ELSE" {statement (";")?})?
	"END" "CASE" ( label_name )?;

case_operand : expression;

close_statement :
	"CLOSE" (":")? name ;

fetch_statement : 
	"FETCH" (":")? name 
	("INTO" ({variable_name,","} | record_name)
	| "BULK" "COLLECT" "INTO" 
	  {collection_name | ":" host_array_name, ","}
	  ("LIMIT" expression)?)
	;
	
exit_statement : 
	"EXIT" (label_name)? 
	("WHEN" expression)?;

execute_statement :
	"EXECUTE" statement ;

execute_immediate_statement :
	"EXECUTE" "IMMEDIATE" dynamic_string
	("INTO" ({define_variable, ","} | record_name))?
	("USING" {("IN" | "OUT" | "IN" "OUT")? bind_argument, ","})?
	(("RETURNING" | "RETURN") "INTO" {bind_argument, ","})? ;

	dynamic_string : expression ;
	define_variable : plsql_identifier;
	
explain_plan_statement :
	"EXPLAIN" "PLAN" 
	("SET" "STATEMENT_ID" "=" string)?
	("INTO" qualified_name ("@" dblink)?)? 
	"FOR" statement;

open_statement :
	"OPEN" cursor_name 
	("(" {cursor_parameter_name,","} ")" )?;
	
open_for_statement : 
	"OPEN" (":")? name
	"FOR" select_statement;
	
///////////////////////////////////////////////////////////////////////

keywords :
	(
	  "ADD"
	| "ALTER"
	| "AUDIT"
	| "AUTOMATIC"
	| "BEGIN"
	| "BODY"
	| "BY"
	| "CALL"
	| "CASE"
	| "CAST"
	| "CHARACTER"
	| "CHECK"
	| "CLEAR"
	| "CLOB"
	| "COMMENT"
	| "COMMIT"
	| "COMPUTE"
	| "CONNECT"
	| "CONSTANT"
	| "CONSTRAINT"
	| "CREATE"
	| "CUBE"
	| "CURSOR"
	| "DATABASE"
	| "DATAFILE"
	| "DECLARE"
	| "DEFAULT"
	| "DELETE"
	| "DISABLE"
	| "DROP"
	| "ELSE"
	| "ELSIF"
	| "ENABLE"
	| "END"
	| "ENDIF"
	| "ESTIMATE"
	| "EXCEPTION"
	| "FETCH"
	| "FOR"
	| "FORALL"
	| "FROM"
	| "FUNCTION"
	| "GLOBAL_NAME"
	| "GRANT"
	| "GROUP"
	| "IF"
	| "IN"
	| "INDEX"
	| "INITIAL"
	| "INITRANS"
	| "INSERT"
	| "INTO"
	| "KEY"
	| "LINK"
	| "LOB"
	| "LOCAL" 
	| "LOGFILE"
	| "LOOP"
	| "MAXTRANS"
	| "MEMBER"
	| "MERGE"
	| "MODIFY"
	| "NEXT"
	| "NOAUDIT"
	| "NOSORT"
	| "OPEN"
	| "OPERATOR"
	| "ORDER"
	| "OVER"
	| "PACKAGE"
	| "PARTITION"
	| "PCTFREE"
	| "PRAGMA"
	| "PRIMARY"
	| "PROCEDURE"
	| "PROFILE"
	| "REBUILD"
	| "RECOVER"
	| "REF"
	| "RENAME"
	| "RETURN"
	| "RETURNING"
	| "REVOKE"
	| "ROLLBACK"
	| "ROLLUP"
	| "ROLE"
	| "SCOPE"
	| "SELECT"
	| "SEQUENCE"
	| "SESSION"
	| "SET"
	| "SETS"
	| "START"
	| "STORAGE"
	| "SYNONYM"
	| "TABLE"
	| "TABLESPACE"
	| "THE"
	| "THEN"
	| "TRIGGER"
	| "TYPE"
	| "UNIQUE"
	| "UNTIL"
	| "USER"
	| "UPDATE"
	| "VALUE"
	| "VALUES"
	| "WHEN"
	| "WHERE"
	| "WHILE"
	| "WITH"
	// xml keywords
	| "XMLELEMENT"
	| "XMLTYPE" 
	
	)
	| conversion_function_name
	| miscellaneous_function_name
	;

dblink :
	link_database ("." {domain, "."})? 
	("@" connect_descriptor)? ; 

	
	link_database : identifier ;
	
expression_list :
	  {expression, ","}
	| "(" {expression, ","} ")" ;

ascending_or_descending :
	  "ASC" 
	| "DESC"
	;

size_spec :
	"SIZE" integer (K_or_M)? ;

K_or_M : 
	"K" | "M" ;

reuse_tag :
	"REUSE" ;
	
reuse_or_drop_storage :
	("REUSE" | "DROP") "STORAGE" ;
	
reuse_settings :
	"REUSE" "SETTINGS" ;

compile_clause :
	"COMPILE" (debug_tag)? ;
	
debug_tag :	
	"DEBUG" ;
	
unusable_tag :
	"UNUSABLE" ;

coalesce_tag :	
	"COALESCE" ;
	
cascade_tag :
	"CASCADE" ;

cascade_constraints_tag :
	"CASCADE" "CONSTRAINTS" ;
			
enable_or_disable : 
	  "ENABLE" 
	| "DISABLE" ;

validate_or_novalidate :	
	  "VALIDATE" 
	| "NOVALIDATE" ;
	
distinct_or_all :
	  "DISTINCT"
	| "ALL" ;	
	
distinct_all_or_unique :
	  "DISTINCT"
	| "ALL" 
	| "UNIQUE" ;

online_or_offline :
	  "ONLINE"
	| "OFFLINE" ;

online_tag :
	"ONLINE" ;
	
rowdependencies_spec :	
	  "NOROWDEPENDENCIES" 
	| "ROWDEPENDENCIES" ;
	
monitoring_spec :
	  "MONITORING" 
	| "NOMONITORING" ;

archivelog_spec :
	  "ARCHIVELOG" 
	| "NOARCHIVELOG" ;
	
resetlogs_spec :
	  "RESETLOGS" 
	| "NORESETLOGS" ;
	
from_session :
	"FROM" "SESSION" ;

cache_clause :
	("CACHE" (integer | "READS")?
	 | "NOCACHE")
	(logging_clause)? ;

unusable_local_indexes_clause :
	(rebuild_tag)? "UNUSABLE" "LOCAL" "INDEXES" ;

end_backup_tag :
	"END" "BACKUP" ;

qualified_name : 
	plsql_identifier
	("." {identifier, "."})?
	("." string)?
	("#")? ;
	
identifier :
	"(a-zA-Z_)?(a-zA-Z0-9#_)?*";

not_tag : "NOT";

null_tag :
	"NULL";

compute_statistics_tag : 
	"COMPUTE" "STATISTICS" ;

update_block_references_tag :
	"UPDATE" "BLOCK" "REFERENCES" ;

rebuild_tag :
	"REBUILD" ;
	
overriding_tag : 
	"OVERRIDING" ;
	
final_tag : 
	"FINAL" ;
	
instantiable_tag : 
	"INSTANTIABLE" ;
	
default_tag	:
	"DEFAULT" ;

number : 
	("+" | "-")?
	(
	  (numeric ".")? numeric
	  | "." numeric 
	  | numeric )
	("E" numeric)? ;
	
hex_number :
	"x" "(0-9A-F)?+";

string : 
	  quotedstring 
	| squotedstring;

squotedstring : 
	"'" { *("''" | "'"), "''", 0 } "'" ;

name : 
	identifier | string;

plsql_identifier : 
	"(a-zA-Z_)?(a-zA-Z0-9_$#)?*" (? #VALUE !: keywords";" );

sort_list : {plsql_identifier, ","};

parameters : {parameter,","};

parameter : expression ("BY" "REFERENCE")?;

sqlj_object_type_attr : 
	  squotedstring 
	| plsql_identifier;

OraData	: 
	  squotedstring 
	| plsql_identifier;

CustomDatum	: 
	  squotedstring 
	| plsql_identifier;

column : 
	qualified_name ;

function_name
	: qualified_name;

savepoint_name	: plsql_identifier;
directory_object_name : plsql_identifier;
filename		: squotedstring;
field_name		: plsql_identifier;
external_name		: string;
directory_name	: identifier;
segment_name		: identifier;
subtype_name 		: plsql_identifier;
base_type  		: plsql_identifier;
constant_name		: plsql_identifier;
record_name		: plsql_identifier;
record_type_name	: plsql_identifier;
cursor_variable_name: plsql_identifier;
db_table_name		: plsql_identifier;
parameter_name	: identifier;
schema_name		: plsql_identifier;
attribute_name	: plsql_identifier;
scalar_datatype_name: plsql_identifier;
object_type_name	: plsql_identifier;
object_name		: identifier | string;
collection_name	: plsql_identifier;
procedure_name	: identifier;
profile_name		: identifier;
snapshot_name		: identifier;
old_name		: identifier;
cursor_name : expression;
variable_name			: qualified_name;
host_variable_name 	: plsql_identifier;
host_array_name	: plsql_identifier;
exception_name			: qualified_name;
method_name		: squotedstring | plsql_identifier;
lib_name		: squotedstring | plsql_identifier;
constraint_name	: plsql_identifier;
library_name		: identifier;
user_name		: plsql_identifier;
trigger_name		: plsql_identifier;
label_name		: identifier;
query_name  		: plsql_identifier;
type_name		: plsql_identifier;
procedure		: plsql_identifier;
implementation_type 		: qualified_name;
role			: identifier | string ;
password		: identifier | string ;
old_password 		: identifier | string ;
rollback_segment	: identifier;
sequence		: identifier;
collection_item	: identifier;
varray 			: identifier;
proxy 			: identifier | string;
scope_table		: plsql_identifier;
ref_col			: plsql_identifier;
ref_attr		: plsql_identifier;
savepoint		: name;
schema			: plsql_identifier;
table			: plsql_identifier;
view			: plsql_identifier;
materialized_view	: plsql_identifier;
c_alias			: quotedstring | plsql_identifier;
t_alias			: plsql_identifier;
partition		: plsql_identifier;
subpartition		: plsql_identifier;
constraint				: qualified_name ("@" dblink)?;
type			: plsql_identifier;
host_variable 			: qualified_name;
indicator_variable 	: plsql_identifier;
domain 			: plsql_identifier;
connect_descriptor 	: plsql_identifier;
table_alias 		: plsql_identifier;
object_table_alias 	: plsql_identifier;
method 			: plsql_identifier;
database		: plsql_identifier | string;
tablespace 		: plsql_identifier;
LOB_segname 		: plsql_identifier;
correlation_variable: plsql_identifier;
alias 			: plsql_identifier;
object_type 		: plsql_identifier;
index			: plsql_identifier;
cluster 		: identifier;
storage_table 	: plsql_identifier;
varray_item 		: plsql_identifier;
LOB_item 		: plsql_identifier;
log_group 		: plsql_identifier;
access_driver_type 	: plsql_identifier;
directory 		: plsql_identifier;
nested_item 		: plsql_identifier;
package 		: plsql_identifier;
indextype 		: plsql_identifier;
supertype 		: plsql_identifier;
cursor_parameter_name 	: plsql_identifier;	

attribute  			: expression;
value 			: expression;
value_expr 			: expression;
single_row_expression 	: expression;
multiple_row_expression : expression;
condition_spec 		: expression;
column_expression 	: expression;
parameter_value 		: expression;
partition_value 		: expression;
comparison_expr 		: expression;
return_expr 		: expression;
else_expr 			: expression;
collection_expression 	: expression;

scalar_subquery_expression : subquery;

plsql_subprogram_body 	: plsql_block;
plsql_function_body 	: plsql_block;
subprogram_body 		: plsql_block;
function_body 		: plsql_block;

alter_mapping_table_clauses 	: "TODO:";
modify_LOB_storage_parameters : "TODO:";
mapping_table_clauses 		: "TODO: mapping_table_clauses";
segment_attribute_clause 	: "TODO: segment_attribute_clause"; 
user_defined_operator 		: "TODO: user_defined_operator";
sys_refcursor_instance 		: "TODO: sys_refcursor_instance";

fmt 				: squotedstring;
search_condition 		: condition;
attribute_type 		: datatype;
path_string 		: string ;
element 			: string;
size_limit 			: numeric;
numeric_literal 		: numeric;

integer		: numeric;
correlation_integer 	: numeric;
sample_percent 		: numeric;
position 			: numeric;
levels 			: numeric;
min_value 			: numeric;
max_value 			: numeric;
num_buckets 		: numeric;
quantity 			: numeric;
limit 			: numeric;
hash_partition_quantity : numeric;
hash_subpartition_quantity : numeric;

///////////////////////////////////////////////////////////////////

space_symbol  : 
		{ ("\32" | "\r" |"\n"|"\t")
		  | "--" *("\n")
   		  |  "/*" *("*/") "*/" ,0 }
   		  ;
   		  
   		  
   		  
sqlj_object_type :
	"EXTERNAL" "NAME" java_ext_name 
	"LANGUAGE" "JAVA" "USING" 
	(SQLData | CustomDatum | OraData)
	;

sqlj_object_type_sig :
	"EXTERNAL" ("VARIABLE" "NAME" java_static_field_name
         	| "NAME" java_method_sig ) ;


	java_static_field_name : squotedstring ;
	java_method_sig 	     : squotedstring ;


java_ext_name		: squotedstring | plsql_identifier;



///////////////////////////
// xml

xml_function :
	  XMLAgg
	| XMLColAttVal
	| XMLConcat
	| XMLElement
	| XMLForest
	| XMLSequence
	| XMLTransform
	| "XMLTYPE" ("." identifier)? 
	  "(" ({expression, ","})? ")"
	;

XMLType_table :
	"CREATE" "TABLE" 
	(schema ".")? table 
	"OF" "XMLTYPE"
	(XMLType_storage)? 
	(XMLSchema_spec)?;

XMLType_column_properties :
	"XMLTYPE" ("COLUMN")? column 
	(XMLType_storage)? (XMLSchema_spec)?;
	
XMLType_storage :
	  "STORE" "AS" 
	( "OBJECT" "RELATIONAL"
	| "CLOB" 
	    (LOB_segname ("(" LOB_parameters ")")? 
	    	| "(" LOB_parameters ")")? );
	
XMLSchema_spec :
	("XMLSCHEMA" XMLSchema_URL)? 
	"ELEMENT" (element 
		| XMLSchema_URL "#" element) 
	(with_object_id_clause)?
	;

XMLType_view_clause :
	"OF" "XMLTYPE"
	(XMLType_storage)? 
	(XMLSchema_spec)?;

XMLAgg:
	"XMLAGG" "(" XMLType_instance 
		("ORDER" "BY" sort_list)? ")" ;

XMLElement :
	"XMLELEMENT" 
	"(" ("NAME")? expression ("," XML_attributes_clause)? 
		("," {value_expr,","})? ")" ;
		

XML_attributes_clause:
	"XMLATTRIBUTES"
	  "(" {value_expr ("AS" c_alias)?, ","} ")" ;
	  
XMLColAttVal:
	"XMLCOLATTVAL" "(" {value_expr 
		("AS" plsql_identifier)?, ","} ")" ;


XMLConcat:
	"XMLCONCAT" "(" {XMLType_instance, ","} ")" ;

XMLForest:
	"XMLFOREST"
	  "(" {value_expr ("AS" c_alias)?, ","} ")" ;

XMLSequence:
	"XMLSEQUENCE" "(" 
	(XMLType_instance | sys_refcursor_instance ("," fmt )?)
      ")" ;
        
XMLTransform:
	"XMLTRANSFORM" "(" XMLType_instance 
		"," XMLType_instance ")" ;

XMLType_instance : 
	  "XMLTYPE" "(" expression ")"
	| expression ;

XMLSchema_URL : string;


///////////////////////////////////////////////
// java

alter_java_statement :
	"ALTER" "JAVA" source_or_class
	(schema ".")? object_name 
	("RESOLVER"
	  "(" {"(" match_string (",")? (schema_name | "-") ")"} ")"
	)?
	(   compile_or_resolve
	  | invoker_rights_clause
	) ;

create_java :
	"CREATE" ("OR" "REPLACE")? 
	("AND" ("RESOLVE" | "COMPILE"))? ("NOFORCE")? "JAVA"
	(("SOURCE" | "RESOURCE") "NAMED" (schema ".")? primary_name 
	| "CLASS" ("SCHEMA" schema)?
	)
	(invoker_rights_clause)? 
	("RESOLVER"
	 "(" {"(" match_string (",")? (schema_name | "-") ")"
	")"}
	)?
	("USING"
	  ("BFILE" "(" directory_object_name "," server_file_name ")"
	  | ("CLOB" | "BLOB" | "BFILE") subquery
	  | key_for_BLOB
	  )
	| "AS" java_source_text
	)
	;

drop_java_statement :
	"DROP" "JAVA" ("SOURCE" | "CLASS" | "RESOURCE")
	(schema ".")? object_name;

source_or_class :
	  "SOURCE" 
	| "CLASS" ;
	
compile_or_resolve :
	  "COMPILE" 
	| "RESOLVE" ;
	
match_string :
	string | "*";	
	
java_source_text : 
	{*("{" | ";") java_code_block} *(";");
	
	java_code_block : "{" ({*("{" | "}") (java_code_block)?})? "}";
	
key_for_BLOB : string;
primary_name : plsql_identifier | string;
server_file_name : string;

class MyParser2 extends Lexer;

DML_table_expression_clause :
	( (schema ".")?
	  ( table 
	    ( ("PARTITION" "(" partition ")" 
	    | "SUBPARTITION" "(" subpartition ")" )
	    | "@" dblink
	    )?
	  | view ("@" dblink)?
	  ) 
	| ("THE")? "(" subquery (subquery_restriction_clause)? ")"
	| table_collection_expression
	) ;

From bharath at starthis.com  Mon Apr 19 12:17:25 2004
From: bharath at starthis.com (Bharath S)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] help with pl/sql grammar
In-Reply-To: <20040419161708.71088.qmail@web12401.mail.yahoo.com>
Message-ID: <000c01c42642$f3309180$03020a0a@devel.starthis.com>

Hi Lorena,

Do you remember the line number in your grammar for which the error
occurred? 


-----Original Message-----
From: lorena varela [mailto:lorenavare@yahoo.com] 
Sent: Monday, April 19, 2004 11:17 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] help with pl/sql grammar

Hi list.

I have a problem.  I'm work with the plugin ANTLR
Version 2.7.2 for eclipse. The problem is that when
inserted the gramatica generates this error:

TokenStreamException: expecting '(', found 'e'

I send the t.g that is the file where is the grammar.

excuse me for my english

_________________________________________________________
Do You Yahoo!?
Informaci?n de Estados Unidos y Am?rica Latina, en Yahoo! Noticias.
Vis?tanos en http://noticias.espanol.yahoo.com

 
Yahoo! Groups Links



 




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Mon Apr 19 12:27:41 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:42 2004
Subject: New antlr-interest member
Message-ID: <1082402861.173.18042.w75@yahoogroups.com>


Hello,

This is an automated email message to let you know that
ljw10001 <ljw1001@hotmail.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From ljw1001 at hotmail.com  Mon Apr 19 12:50:27 2004
From: ljw1001 at hotmail.com (ljw10001)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] (in)sanity check
Message-ID: <c61ai3+l4o5@eGroups.com>

I'm about to begin a project to port 400K LOC of C++ code to Java.  
To the greatest extent possible, we want to do a line by line port 
and, if possible I would like to automate some part of that effort.

What I have in mind is to use ANTLR/Sorcerer to do a rough 
translation.  

If I'm reading the various documents, articles, etc. correctly, there 
is a C++ grammar available that ANTLR can use to create a parse tree 
and also a Sorcerer description for Java that can read a (different) 
parse tree and generate java code. Presumably the first tree could be 
mapped to the second, or we could modify the Sorcerer description by 
hand to use the tree generated from the C++ source.

I'm not expecting the result to compile. In fact I would be happy to 
output C++ with some of the code selectively replaced by Java 
equivalents.  Anything that would reduce the amount of manual  
translation noticably would be useful.  

So, am I completely insane to attempt this with ANTLR?  Suggestions 
for better ways to approach the problem would be greatly appreciated. 




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From lgc at mail1.jpl.nasa.gov  Mon Apr 19 13:20:23 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] Re: (in)sanity check
In-Reply-To: <c61ai3+l4o5@eGroups.com>
Message-ID: <c61ca7+ia02@eGroups.com>

Check out
http://ovid.tigris.org/Ephedra/

--Loring


--- In antlr-interest@yahoogroups.com, "ljw10001" <ljw1001@h...> wrote:
> I'm about to begin a project to port 400K LOC of C++ code to Java.  
> To the greatest extent possible, we want to do a line by line port 
> and, if possible I would like to automate some part of that effort.
> 
> What I have in mind is to use ANTLR/Sorcerer to do a rough 
> translation.  
> 
> If I'm reading the various documents, articles, etc. correctly, there 
> is a C++ grammar available that ANTLR can use to create a parse tree 
> and also a Sorcerer description for Java that can read a (different) 
> parse tree and generate java code. Presumably the first tree could be 
> mapped to the second, or we could modify the Sorcerer description by 
> hand to use the tree generated from the C++ source.
> 
> I'm not expecting the result to compile. In fact I would be happy to 
> output C++ with some of the code selectively replaced by Java 
> equivalents.  Anything that would reduce the amount of manual  
> translation noticably would be useful.  
> 
> So, am I completely insane to attempt this with ANTLR?  Suggestions 
> for better ways to approach the problem would be greatly appreciated.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From idontwantanidwith2000init at yahoo.com  Mon Apr 19 13:46:28 2004
From: idontwantanidwith2000init at yahoo.com (idontwantanidwith2000init)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] Re: (in)sanity check
In-Reply-To: <c61ai3+l4o5@eGroups.com>
Message-ID: <c61dr4+fs9u@eGroups.com>

I think you'll end up wasting time then saving time.
How would you make a (in)sanity check to the code produced?

I think c++ is platform depended so even if you think that these are 
the same functions the odds are against you.

For example:
What would the following result on c++ and Java working on pentium 4?
int x = 4000;
x >> 33

I guess that in java you got a zero, right?
What did you get in c++? 

--- In antlr-interest@yahoogroups.com, "ljw10001" <ljw1001@h...> 
wrote:
> I'm about to begin a project to port 400K LOC of C++ code to 
Java.  
> To the greatest extent possible, we want to do a line by line port 
> and, if possible I would like to automate some part of that effort.
> 
> What I have in mind is to use ANTLR/Sorcerer to do a rough 
> translation.  
> 
> If I'm reading the various documents, articles, etc. correctly, 
there 
> is a C++ grammar available that ANTLR can use to create a parse 
tree 
> and also a Sorcerer description for Java that can read a 
(different) 
> parse tree and generate java code. Presumably the first tree could 
be 
> mapped to the second, or we could modify the Sorcerer description 
by 
> hand to use the tree generated from the C++ source.
> 
> I'm not expecting the result to compile. In fact I would be happy 
to 
> output C++ with some of the code selectively replaced by Java 
> equivalents.  Anything that would reduce the amount of manual  
> translation noticably would be useful.  
> 
> So, am I completely insane to attempt this with ANTLR?  
Suggestions 
> for better ways to approach the problem would be greatly 
appreciated.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Mon Apr 19 14:06:46 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] (in)sanity check
In-Reply-To: <c61ai3+l4o5@eGroups.com>
References: <c61ai3+l4o5@eGroups.com>
Message-ID: <77C42B9C-9245-11D8-952B-000393B5606C@codetransform.com>

On Apr 19, 2004, at 12:50 PM, ljw10001 wrote:

> What I have in mind is to use ANTLR/Sorcerer to do a rough
> translation.
>
> If I'm reading the various documents, articles, etc. correctly, there
> is a C++ grammar available that ANTLR can use to create a parse tree
> and also a Sorcerer description for Java that can read a (different)
> parse tree and generate java code. Presumably the first tree could be
> mapped to the second, or we could modify the Sorcerer description by
> hand to use the tree generated from the C++ source.

This is possible with ANTLR, but it is also a huge project.  You may 
get a lot of mileage out of existing tools, such as Loring's suggestion 
Ephedra.  All research and time playing with existing tools will be 
time well spent.

Read my article "Translation Project Planning" 
http://www.codetransform.com/planning.html.  Also see my write-up about 
translating AREV to VB http://www.codetransform.com/fun_with_antlr.html 
for more details on how that project went.

You may also be interested in "The Realities of Language Conversions 
(2000)" http://citeseer.ist.psu.edu/terekhov00realities.html to get a 
broader idea of what is and isn't possible with a translator.

Finally I would have to say that writing a translation project in ANTLR 
is a blast!  Hands down the most interesting programs I've ever 
written.

Writing a translator is so nice because you keep refining it and if you 
discover a better way to do a particular translation you implement it 
and voila, it's in all your translated code.  As opposed to discovering 
halfway through a manual translation and realizing you have 200K lines 
to scour and fix.

I recommend writing mountains of tests too, if you can figure a way to 
do it to test the old and new code.  Keeps your translator honest.

I do these things for a living.  Contact me if you decide to go the 
ANTLR route.

Monty Zukowski
ANTLR Consultant
www.codetransform.com



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ljw1001 at hotmail.com  Mon Apr 19 14:27:16 2004
From: ljw1001 at hotmail.com (ljw10001)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] Re: (in)sanity check
In-Reply-To: <c61ca7+ia02@eGroups.com>
Message-ID: <c61g7k+u7fd@eGroups.com>

I looked at Ephedra, but apparently it requires a VisualAge C++ 
compiler that runs only on AIX.  If it worked, it might be worth the 
expense of buying an AIX machine but I have no way to evaluate it. 

--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> Check out
> http://ovid.tigris.org/Ephedra/
> 
> --Loring
> 
> 
> --- In antlr-interest@yahoogroups.com, "ljw10001" <ljw1001@h...> 
wrote:
> > I'm about to begin a project to port 400K LOC of C++ code to 
Java.  
> > To the greatest extent possible, we want to do a line by line 
port 
> > and, if possible I would like to automate some part of that 
effort.
> > 
> > What I have in mind is to use ANTLR/Sorcerer to do a rough 
> > translation.  
> > 
> > If I'm reading the various documents, articles, etc. correctly, 
there 
> > is a C++ grammar available that ANTLR can use to create a parse 
tree 
> > and also a Sorcerer description for Java that can read a 
(different) 
> > parse tree and generate java code. Presumably the first tree 
could be 
> > mapped to the second, or we could modify the Sorcerer description 
by 
> > hand to use the tree generated from the C++ source.
> > 
> > I'm not expecting the result to compile. In fact I would be happy 
to 
> > output C++ with some of the code selectively replaced by Java 
> > equivalents.  Anything that would reduce the amount of manual  
> > translation noticably would be useful.  
> > 
> > So, am I completely insane to attempt this with ANTLR?  
Suggestions 
> > for better ways to approach the problem would be greatly 
appreciated.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Mon Apr 19 14:57:15 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:42 2004
Subject: Unsubscription by antlr-interest member
Message-ID: <1082411835.732.86777.m16@yahoogroups.com>


Hello,

This is an automated email message to let you know that
swaptions <adc@toolazydogs.com> unsubscribed from your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a member unsubscribes.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Mon Apr 19 16:09:03 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] Re: (in)sanity check
In-Reply-To: <c61g7k+u7fd@eGroups.com>
Message-ID: <c61m6f+lbni@eGroups.com>

Well, yes and no.  Johannes Martin used to have a web-interfaced version of the translator.  400 KLOC of data (even if you have to 
work out NDA details) may be of interest to him, anyway, and he might be receptive to a consulting contract (it never hurts to ask).  I 
haven't dealt with him directly, so this is more a case of "ask the author:  it is probably possible to get his help".

--Loring


--- In antlr-interest@yahoogroups.com, "ljw10001" <ljw1001@h...> wrote:
> I looked at Ephedra, but apparently it requires a VisualAge C++ 
> compiler that runs only on AIX.  If it worked, it might be worth the 
> expense of buying an AIX machine but I have no way to evaluate it. 
> 
> --- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> > Check out
> > http://ovid.tigris.org/Ephedra/
> > 
> > --Loring
> > 
> > 
> > --- In antlr-interest@yahoogroups.com, "ljw10001" <ljw1001@h...> 
> wrote:
> > > I'm about to begin a project to port 400K LOC of C++ code to 
> Java.  
> > > To the greatest extent possible, we want to do a line by line 
> port 
> > > and, if possible I would like to automate some part of that 
> effort.
> > > 
> > > What I have in mind is to use ANTLR/Sorcerer to do a rough 
> > > translation.  
> > > 
> > > If I'm reading the various documents, articles, etc. correctly, 
> there 
> > > is a C++ grammar available that ANTLR can use to create a parse 
> tree 
> > > and also a Sorcerer description for Java that can read a 
> (different) 
> > > parse tree and generate java code. Presumably the first tree 
> could be 
> > > mapped to the second, or we could modify the Sorcerer description 
> by 
> > > hand to use the tree generated from the C++ source.
> > > 
> > > I'm not expecting the result to compile. In fact I would be happy 
> to 
> > > output C++ with some of the code selectively replaced by Java 
> > > equivalents.  Anything that would reduce the amount of manual  
> > > translation noticably would be useful.  
> > > 
> > > So, am I completely insane to attempt this with ANTLR?  
> Suggestions 
> > > for better ways to approach the problem would be greatly 
> appreciated.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Mon Apr 19 20:09:15 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:42 2004
Subject: New antlr-interest member
Message-ID: <1082430555.115.53155.w62@yahoogroups.com>


Hello,

This is an automated email message to let you know that
garypelliott <garypelliott@yahoo.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From klaren at cs.utwente.nl  Tue Apr 20 01:52:01 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] Re: mystery in printing order
In-Reply-To: <c5sequ+bcqr@eGroups.com>
References: <20040416235104.GA10288@cs.utwente.nl> <c5sequ+bcqr@eGroups.com>
Message-ID: <20040420085201.GB657@cs.utwente.nl>

On Sat, Apr 17, 2004 at 11:32:46PM -0000, idontwantanidwith2000init wrote:
> What other functions should I overload?
> It looks like a great idea.

Every reportError/Warning method in a lexer/parser/treeparser. All antlr
messages are routed through these.

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
              of UCSD Pascal ever released..." --- Larry Smith



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Tue Apr 20 02:01:47 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] help with pl/sql grammar
In-Reply-To: <20040419161708.71088.qmail@web12401.mail.yahoo.com>
References: <20040419161708.71088.qmail@web12401.mail.yahoo.com>
Message-ID: <20040420090147.GC657@cs.utwente.nl>

On Mon, Apr 19, 2004 at 11:17:08AM -0500, lorena varela wrote:
> TokenStreamException: expecting '(', found 'e'

Usually means that the lexer of antlr is confused somewhere. To start with
the from_clause rule looks fishy. The '{' and '}' and a comma between them
don't make sense.

> from_clause :
> 	"FROM" 
> 	{   table_reference 
> 	  | ("THE")? "(" subquery ")" (alias)?
> 	, "," };

> subquery_factoring_clause :
> 	"WITH" 
> 	{query_name "AS" "(" subquery ")", ","} ;

This one too.

> select_list :
> 	"*"
> 	| {   query_name "." "*"
> 	    | (schema ".")? (table | view) ".*" 
> 	    | expression (("AS")? c_alias)?
> 	  , "," };

And this one..

> query_table_expression :	
> 	(schema ".")? 
> 	  ( table ( (  "PARTITION" "(" partition ")"
>         	       | "SUBPARTITION" "(" subpartition ")"
> 	            ) (sample_clause)?
> 	           | "@" dblink
>         	     | sample_clause
>         	  )?
> 	     | { view } ("@" dblink)?
> 	  )
> 	| "(" subquery (subquery_restriction_clause)? ")"
> 	| query_name
> 	;

And this...

> group_by_clause :
> 	"GROUP" "BY"
> 	{  rollup_cube_clause 
> 	 | grouping_sets_clause
> 	 | expression 
> 	 , ","}
> 	(having_clause)?;

And this...

> order_by_clause :
> 	"ORDER" ("SIBLINGS")? "BY" 
> 	{(expression | position | c_alias) 
> 	 (ascending_or_descending)? 
> 	 ("NULLS" "FIRST" | "NULLS" "LAST")?, ","} ;

And a load of others. You seem to have misunderstood the use of the curly
braces. They're for grouping action code in the native language your
generating the parser for. Check out the metalanguage section of the docs. 

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "Good judgement comes from experience.
     Experience comes from bad judgement." --- Unknown



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Tue Apr 20 02:04:33 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] TokenStreamRewriteEngine and C++
In-Reply-To: <20040419164301.GA1831@ktulu>
References: <20040419164301.GA1831@ktulu>
Message-ID: <20040420090432.GD657@cs.utwente.nl>

On Mon, Apr 19, 2004 at 11:43:01PM +0700, Andrey R. Urazov wrote:
> I wonder whether the TokenStreamRewriteEngine has been implemented in
> C++ since I scanned the sources and found only Java and C# versions.

Not yet. It needs changing of the RefToken (once more d*mn these sucky
refcounters) definitions so I decided to not incorporate it in the next
release since it's a bit too structural a change. After 2.7.4 release I'll
probably release a snapshot that contains it.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
              of UCSD Pascal ever released..." --- Larry Smith



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From jpdv at medialog.pt  Tue Apr 20 03:00:14 2004
From: jpdv at medialog.pt (jduquevieira)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] How to add code to the Parser class?
Message-ID: <c62sbe+afmu@eGroups.com>

To have more control over the parsing I added some Semantic 
Predicates to my Gramar.

These predicates rely on a Variable. The Variable has to known to 
all the rules.

How can I set this Variable as a member of the Parser class of my 
Gramar? I don't seem to find out how, except opening the generated 
Parser file and adding the Variable as a Member.

This way, everytime I change the Gramar and the Parser class is 
reconstruted, I need to edit it and insert a line of code declaring 
the Variable.

Is there any other way to do this?

Thanks a lot.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From anakreonmejdi at yahoo.gr  Tue Apr 20 03:28:55 2004
From: anakreonmejdi at yahoo.gr (Anakreon)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] How to add code to the Parser class?
In-Reply-To: <c62sbe+afmu@eGroups.com>
References: <c62sbe+afmu@eGroups.com>
Message-ID: <4084FB67.2020904@yahoo.gr>

jduquevieira wrote:
> To have more control over the parsing I added some Semantic 
> Predicates to my Gramar.
> 
> These predicates rely on a Variable. The Variable has to known to 
> all the rules.
> 
> How can I set this Variable as a member of the Parser class of my 
> Gramar? I don't seem to find out how, except opening the generated 
> Parser file and adding the Variable as a Member.
> 
> This way, everytime I change the Gramar and the Parser class is 
> reconstruted, I need to edit it and insert a line of code declaring 
> the Variable.
> 
> Is there any other way to do this?
> 
> Thanks a lot.
> 
> 
class MyParser extends Parser;
options {
}

//if have tokens
tokens {
}

{
private int myVar;
private String anOtherVar;
}

//rules follow


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Tue Apr 20 03:34:19 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] How to add code to the Parser class?
In-Reply-To: <c62sbe+afmu@eGroups.com>
References: <c62sbe+afmu@eGroups.com>
Message-ID: <20040420103418.GF657@cs.utwente.nl>

On Tue, Apr 20, 2004 at 10:00:14AM -0000, jduquevieira wrote:
> How can I set this Variable as a member of the Parser class of my 
> Gramar? I don't seem to find out how, except opening the generated 
> Parser file and adding the Variable as a Member.
...
> Is there any other way to do this?

http://www.antlr.org/doc/metalang.html#_bb4
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Innovation makes enemies of all those who prospered under the old
   regime, and only lukewarm support is forthcoming from those who would
               prosper under the new. --- Niccol Machiavelli



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Tue Apr 20 03:49:18 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] charVocabulary
In-Reply-To: <4083BFDA.20607@yahoo.gr>
References: <4083BFDA.20607@yahoo.gr>
Message-ID: <20040420104918.GG657@cs.utwente.nl>

On Mon, Apr 19, 2004 at 03:02:34PM +0300, Anakreon wrote:
> When it finds a Greek character (is delta []) an error is produced with
> this message:
> unexpected char: 0xr4
> The charVocabulary is:
> charVocabulary = '\3'..'\377' | '\u1000'..'\u1fff';
> Should I choose an other range of characters?
> Also, the message seems strange because there is no hex number with an [r]
> in it.
> Hex numbers are ('0' .. '9' | 'a' .. 'f')+

Looks like a problem in NoViableAltForCharException.java. It's printing a
wrong value because it's geared to byte sized values (probably my mistake
when trying to fix printing illegible errors)

If the value of that delta is in that character range it should be ok I
guess.

I'll see if I can fix the thing for 2.7.4 release.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Chaos is found in greatest abundance wherever order is being sought.
  --- Terry Pratchet



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Tue Apr 20 06:22:08 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] charVocabulary
In-Reply-To: <4083BFDA.20607@yahoo.gr>
References: <4083BFDA.20607@yahoo.gr>
Message-ID: <20040420132208.GK657@cs.utwente.nl>

Hi,

Try replacing the else clause of getMessage in NoViableAltForCharException.java
with:

else {
	mesg += "0x"+Integer.toHexString((int)foundChar).toUpperCase();
}

That should at least give you the intended value I hope...

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 "Don't call me stupid." "Oh, right. To call you stupid would be an insult
    to stupid people. I've known sheep that could outwit you! I've worn
              dresses with higher IQs!" --- A Fish Called Wanda



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From anakreonmejdi at yahoo.gr  Tue Apr 20 06:59:02 2004
From: anakreonmejdi at yahoo.gr (Anakreon)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] charVocabulary
In-Reply-To: <20040420104918.GG657@cs.utwente.nl>
References: <4083BFDA.20607@yahoo.gr> <20040420104918.GG657@cs.utwente.nl>
Message-ID: <40852CA6.4060207@yahoo.gr>

Ric Klaren wrote:
> 
> Looks like a problem in NoViableAltForCharException.java. It's printing a
> wrong value because it's geared to byte sized values (probably my mistake
> when trying to fix printing illegible errors)
> 
> If the value of that delta is in that character range it should be ok I
> guess.
> 
> I'll see if I can fix the thing for 2.7.4 release.
> 
> Cheers,
> 
> Ric
I solved the problem by looking at the java grammar.
The charVocabulary in that grammar is '\u0003'..'\u7FFF'.
It worked for me as well.


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From a_urazov at mail.ru  Tue Apr 20 07:13:18 2004
From: a_urazov at mail.ru (Andrey R. Urazov)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] TokenStreamRewriteEngine and C++
In-Reply-To: <20040420090432.GD657@cs.utwente.nl>
References: <20040419164301.GA1831@ktulu> <20040420090432.GD657@cs.utwente.nl>
Message-ID: <20040420141318.GA2895@ktulu>

Dear Ric,

Is it possible to release some snapshot sooner? If not, could you
possibly pinpoint what's the problem with the RefToken since I'll need
the functionality of a rewrite engine within two weeks and will have to
implement it on my own if it's not yet available by the time.

And also, out of curiosity, what's so sucky about these refcounters in
general?

By the way, does it make sense to your opinion to use smart pointers
(shared pointers, in particular) from the boost library? Since boost is
widely used by practitioners and some parts of it are considered as
upcoming standards, I think that if functionality of the smart pointers
from boost suits the needs of project, it's appealing to use them.

Thanks a lot for the work you do!

> Not yet. It needs changing of the RefToken (once more d*mn these sucky
> refcounters) definitions so I decided to not incorporate it in the next
> release since it's a bit too structural a change. After 2.7.4 release I'll
> probably release a snapshot that contains it.


Best regards,
  Andrey Urazov



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Tue Apr 20 09:32:40 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] TokenStreamRewriteEngine and C++
In-Reply-To: <20040420141318.GA2895@ktulu>
References: <20040419164301.GA1831@ktulu> <20040420090432.GD657@cs.utwente.nl> <20040420141318.GA2895@ktulu>
Message-ID: <20040420163240.GO657@cs.utwente.nl>

Hi,

On Tue, Apr 20, 2004 at 09:13:18PM +0700, Andrey R. Urazov wrote:
> Is it possible to release some snapshot sooner? If not, could you
> possibly pinpoint what's the problem with the RefToken since I'll need
> the functionality of a rewrite engine within two weeks and will have to
> implement it on my own if it's not yet available by the time.

I have the rewrite engine and the TokenWithIndex class it needs that should
basically compile. I can post these without much trouble (Loring is sitting
on the other C++ stuff for the parser testing I don't recall offhand, but
he might still be battling red tape somewhere to get it released)

> And also, out of curiosity, what's so sucky about these refcounters in
> general?

The problem at the moment is that the guys implementing the C++ support
library port decided to use two flavours of the the reference counter one
generic one and one especially for the AST's. The generic one is pretty
dumb (but does the trick for run-of-the-mill refcounting) The special one
for AST refcounts makes it possible to do some limited casting in the AST
class hierarchy so you can cast/convert CommonAST's to
YourFavouriteCustomAST. The support lib uses the dumb version for Tokens
and with a modern g++ it barfs pretty badly (there might have been a time
that it worked). In the current state even the simplest custom token class
stuff seems to fail (or I missed something when I was looking at it, I did
not have much time then)

In general the reference counter that are used now give loads of trouble
with polymorphism. E.g. when using custom AST's and especially when using
heterogeneous AST's. Also there's a can of worms as soon as you tag a const
somewhere near these refcounters.

Anyway my local copy of the antlr source is basically pretty far there.
What needs to happen is that the ASTRefCount style smart pointers need to
be ported to a TokenRefCount. I now have some tinyc example with
tokenstreamrewrite support (ported from the CSharp example which again is
probably a port of some example somewhere from Terence's site). Only
problem is that it segfaults and I did not have time yet for another
debug/cleanup session.

It is also a little bit different than the java version in the sense that I
replaced the StringBuffer with io-streams which is more the C++ way for
this style of stuff.

I can give this stuff to you without much trouble, but in the current state
it's *very* rough so only start on it if you're not afraid to loose sanity.
I will probably not have much time to help with it in the coming week/2
weeks.

> By the way, does it make sense to your opinion to use smart pointers
> (shared pointers, in particular) from the boost library? Since boost is
> widely used by practitioners and some parts of it are considered as
> upcoming standards, I think that if functionality of the smart pointers
> from boost suits the needs of project, it's appealing to use them.

I'm not 100% sure but I think there's no smartpointer in C++ possible
that's smart enough to behave like the pointer I'd like for heterogenous
AST's. I've already looked at the boost smart pointers for a few times (and
some other implementations (Loki among them)) but I don't think they'll
solve the actual problem (that it's an object pretending to be a pointer)

> Thanks a lot for the work you do!

You're welcome!

Anycase drop me a line if you're interested in the segfaulting version.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Why don't we just invite them to dinner and massacre them all when they're
  drunk? You heard the man. There's seven hundred thousand of them. Ah? ..
           So it'd have to be something simple with pasta, then.
                 From: Interesting Times by Terry Pratchet



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From sk at z.pl  Tue Apr 20 10:22:59 2004
From: sk at z.pl (Sebastian Kaliszewski)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] TokenStreamRewriteEngine and C++
In-Reply-To: <20040420163240.GO657@cs.utwente.nl>
References: <20040419164301.GA1831@ktulu> <20040420090432.GD657@cs.utwente.nl> <20040420141318.GA2895@ktulu> <20040420163240.GO657@cs.utwente.nl>
Message-ID: <40855C73.5060608@softax.pl>

Hello!

Ric Klaren wrote:
[snip]
> The problem at the moment is that the guys implementing the C++ support
> library port decided to use two flavours of the the reference counter one
> generic one and one especially for the AST's. The generic one is pretty
> dumb (but does the trick for run-of-the-mill refcounting) The special one
> for AST refcounts makes it possible to do some limited casting in the AST
> class hierarchy so you can cast/convert CommonAST's to
> YourFavouriteCustomAST. The support lib uses the dumb version for Tokens
> and with a modern g++ it barfs pretty badly (there might have been a time
> that it worked). In the current state even the simplest custom token class
> stuff seems to fail (or I missed something when I was looking at it, I did
> not have much time then)
> 
> In general the reference counter that are used now give loads of trouble
> with polymorphism. E.g. when using custom AST's and especially when using
> heterogeneous AST's. Also there's a can of worms as soon as you tag a const
> somewhere near these refcounters.
 >
[snip]
> I'm not 100% sure but I think there's no smartpointer in C++ possible
> that's smart enough to behave like the pointer I'd like for heterogenous
> AST's. I've already looked at the boost smart pointers for a few times (and
> some other implementations (Loki among them)) but I don't think they'll
> solve the actual problem (that it's an object pretending to be a pointer)

If I may ask... What's the exact nature of the problem?
<shameless-plug> I'm an author of yet another smartpointer library, this one 
is different though, as it implements full GC instead of just reference 
counting. it's here: http://smieciuch.sf.net </shameless-plug>

Maybe, as I played with such stuff, I could be of some help... Or if it's 
impossible to do as ANTLR needs it to be, I'd be also interested in knowing 
about the exact limitations.

rgds
-- 
Sebastian Kaliszewski



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From open.zone at virgin.net  Tue Apr 20 12:08:26 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] MS Visual C++ Toolkit 2003
Message-ID: <c63sfa+5aaj@eGroups.com>

There was a thread a while discussing how to get free access to the
Microsoft C++ compiler. This link should help:

http://msdn.microsoft.com/visualc/vctoolkit2003/

<quote>
Visual C++ Toolkit 2003 Q&A

What is the Visual C++ Toolkit 2003?

The Visual C++ Toolkit is a free edition of Microsoft's professional
Visual C++ optimizing compiler and standard libraries ? the same
optimizing compiler and standard libraries that ship in Visual Studio
.NET 2003 Professional!  
</quote>

Cheers,

Micheal
ANTLR/C#




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From mailinglist at august.de  Tue Apr 20 13:05:51 2004
From: mailinglist at august.de (Rolf Schumacher)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] catching the rest
Message-ID: <4085829F.6060302@august.de>

While trying out filters I faced a "must-be-simple" problem:

How would you write the grammer for the input

aabaacaaaaca
    --   --

It should find the 'ac's and keep the rest together in REST tokens?

The example should result in the tokensequence

REST AC REST AC REST

where AC consumes the string "ac"
and REST consumes
1. "aaba" (b can be any character accept c)
2. "aaa"
3. "a"

My solution leads to nondeterminism:
-------
class T5aParser extends Parser;
all: ( AC | REST )*;

class T5aLexer extends Lexer;
options { k = 2;
    charVocabulary = 
'\u0009'|'\u000a'|'\u0020'..'\u007e'|'\u00a0'..'\u00ff'; }
AC: ( 'a' 'c' );
REST: ( ~'a' | {LA(2)!='c'}? 'a' )+;
-------

I'm sure you'll see at a glance how to get back to the right track: 
determinism.
Please let me know.

Rolf
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 1730 bytes
Desc: S/MIME Cryptographic Signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20040420/a3ed45e2/smime.bin
From markl at glyphic.com  Tue Apr 20 13:09:59 2004
From: markl at glyphic.com (Mark Lentczner)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] C++ run-time and ref-counters (was TokenStreamRewriteEngine and C++)
Message-ID: <B39B7054-9306-11D8-9E9F-000393A56BB6@glyphic.com>

Some thoughts on the C++ library

1) Please don't use Boost, or any other library. I have no beef with  
Boost, but we incorporate Antlr into our project, and and if we have to  
start including Antlr's dependent projects as well, it will get way to  
hairy. We'd never have used Antlr if it didn't stand on its own.

2)
 > I'm not 100% sure but I think there's no smartpointer in C++ possible
 > that's smart enough to behave like the pointer I'd like for  
heterogenous
 > AST's.
Bet there is!  If you are having trouble taming yours, let me know and  
I'd be happy to lend a hand.

3) I have ref counting pointer framework that you are welcome to take  
from and/or use. It has all the polymorphic properties one wants:  
ref_ptrT can be safely assigned to a ref_ptrS iff a T* can be assigned  
to S*, (basically S is T or an accessible base class of T). It does  
assume a common base class Countable of the things being counted -  
which shouldn't be a problem in Antlr since AST trees are never  
manipulated except through ref counted pointers. If it is, it would be  
an easy rewrite so that the ref counted thing doesn't contain the  
count. (I'm offering to do it, too.)

If you want to look at the code (all 100 lines of it):
	http://cvs.sourceforge.net/viewcvs.py/wheat/r1/wheat/countable.hpp? 
view=markup
	http://cvs.sourceforge.net/viewcvs.py/wheat/r1/wheat/countable.cpp? 
view=markup

Also there is a unit test for it at:
	http://cvs.sourceforge.net/viewcvs.py/wheat/r1/wheat/countable- 
test.cpp?view=markup

- Mark

Mark Lentczner
markl@wheatfarm.org
http://www.wheatfarm.org/



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Tue Apr 20 13:28:03 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] catching the rest
In-Reply-To: <4085829F.6060302@august.de>
References: <4085829F.6060302@august.de>
Message-ID: <39239F78-9309-11D8-9C98-000393B5606C@codetransform.com>


On Apr 20, 2004, at 1:05 PM, Rolf Schumacher wrote:
> My solution leads to nondeterminism:
> -------
> class T5aParser extends Parser;
> all: ( AC | REST )*;
>
> class T5aLexer extends Lexer;
> options { k = 2;
>    charVocabulary = 
> '\u0009'|'\u000a'|'\u0020'..'\u007e'|'\u00a0'..'\u00ff'; }
> AC: ( 'a' 'c' );
> REST: ( ~'a' | {LA(2)!='c'}? 'a' )+;
> -------
>
> I'm sure you'll see at a glance how to get back to the right track: 
> determinism.
> Please let me know.
>
Take a look at http://www.antlr.org/article/1055549604509/index.html 
"ANTLR meets Sed"

Monty



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From JVincent at Novell.Com  Tue Apr 20 14:22:13 2004
From: JVincent at Novell.Com (Jeff Vincent)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] How to add code to the Parser class?
Message-ID: <s0854030.045@sinclair.provo.novell.com>

Here is a quick (and probably not 100% accurate) example.  Remember
also, you can pass data as arguments and return values to and from rules
(at least you can in the AST parser rules).
 
class myParser extends Parser;
 { 
    //User defined class members, including any helper methods you may
want to include.
    String myString = null;
 }

 start : 
    { myString = "start";
       ...
    }
    rule1
    ;
 
  rule1 : 
    { boolean b;
        //do something w/ myString
        if (myString.equals("start"))
           System.out.println("myString = " + myString);
     }
    b = rule2[myString]
    ;
 
  rule2 [ String s] returns [ boolean bool ] :
   {   if (s.length() == 4))
         bool = true;
        else 
          bool = false;
   }
    ...
     ;
}



>>> jpdv@medialog.pt 4/20/2004 4:00:14 AM >>>

To have more control over the parsing I added some Semantic 
Predicates to my Gramar.

These predicates rely on a Variable. The Variable has to known to 
all the rules.

How can I set this Variable as a member of the Parser class of my 
Gramar? I don't seem to find out how, except opening the generated 
Parser file and adding the Variable as a Member.

This way, everytime I change the Gramar and the Parser class is 
reconstruted, I need to edit it and insert a line of code declaring 
the Variable.

Is there any other way to do this?

Thanks a lot.




Yahoo! Groups Links






-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040420/0ed86032/attachment.html
From a_urazov at mail.ru  Tue Apr 20 21:05:12 2004
From: a_urazov at mail.ru (Andrey R. Urazov)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] TokenStreamRewriteEngine and C++
In-Reply-To: <20040420163240.GO657@cs.utwente.nl>
References: <20040419164301.GA1831@ktulu> <20040420090432.GD657@cs.utwente.nl> <20040420141318.GA2895@ktulu> <20040420163240.GO657@cs.utwente.nl>
Message-ID: <20040421040512.GA1849@ktulu>

Hi,

> I can give this stuff to you without much trouble, but in the current
> state it's *very* rough so only start on it if you're not afraid to
> loose sanity.  I will probably not have much time to help with it in
> the coming week/2 weeks.
Thank you very much, Ric. I think, I'll have work for a week on other
things and then I'll take the snapshot in any state. I believe that with
the ideological explanations you provided I'll be able to understand the
code quickly and hopefully cope with its roughness.


Best regards,
  Andrey Urazov



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Wed Apr 21 02:18:22 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] ANTLR for command line interface
In-Reply-To: <c56j1o+bvtk@eGroups.com> <c56go7+cu1h@eGroups.com>
References: <c56j1o+bvtk@eGroups.com> <c56go7+cu1h@eGroups.com>
Message-ID: <20040421091821.GA5811@cs.utwente.nl>

On Fri, Apr 09, 2004 at 03:50:31PM -0000, thierryj8 wrote:
> - What is the effect of the "interactive" mode (Supposed to be for CLI)?

AFAIK it does nothing. It's probably some artifact of an older version of
an intended feature. Terence might be able to shed some light on it.

> - Should look ahead entries be cancelled after a NEWLINE & HOW?

That is particularly nasty to do at hand I have no idea how. I'd probably
start looking at generated code and see if I can get somewhere by
overriding LA/LT methods of the parser/lexer.

Another option is to use a parser in two modes one mode that sees wether
the input is complete and keep retrying untill it is. How to implement
these modes is another question... you might get somewhere with some
semantic predicates ( ()=> () construct I'm always confusing
syntactic/semantic) or faking the evaluation of them.

> - Are there examples of CLIs with ANTLR?

I recall someone doing something with syntax highlighting with antlr
(Bogdan Mitu might be the name but not sure...) He patched some things to
let antlr deal with incomplete input. This might be interesting for you. It
might be listed in the showcase or files section of antlr.org. Try
searching the archives.

> Because there is a parser, a lexer, and the usage of code in Java,
> there are several ways of soving problems. Is there a best practice
> standard?

In general this depends on the problem.

Cheers,

Ric

On Fri, Apr 09, 2004 at 04:29:44PM -0000, thierryj8 wrote:
> Best practice for CLI in Lex&Yacc, O'Reilly:
> 
> ".. In order to scan the command line rather than a file, we must
> rewrite input() and unput()..." (p38), 
> 
> "...The input routine handles calls from the lexer to obtain
> characters" (p41),
> 
> "...The unput() routine handles calls from the lexer to "push back"
> characters into the input stream." (p41)
> 
> Input() treats the CLI end of line as the end of file. Is there an
> equivalent in ANTLR?

The LA() method would be the closest thing. (And the underlying inputbuffer
mechanism) ANTLR does not have an unput.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Human beings, who are almost unique in having the ability to learn
   from the experience of others, are also remarkable for their apparent
         disinclination to do so. --- Douglas Adams, Last Chance to See



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Wed Apr 21 02:26:11 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] AST Generation
In-Reply-To: <20040412015321.27357.qmail@web20913.mail.yahoo.com>
References: <7ABFFCB1-87E9-11D8-8786-000393B5606C@codetransform.com> <20040412015321.27357.qmail@web20913.mail.yahoo.com>
Message-ID: <20040421092611.GC5811@cs.utwente.nl>

On Sun, Apr 11, 2004 at 06:53:21PM -0700, Mohad Nur wrote:
> I am having some problems creating the correct AST. I have a rule like
> 
> Decl: (varDecl)*;
> 
> varDecl : varType idlist SEMI;
> 
> There are different type of vartypes and i want the final Decl tree to
> contain all of them but what i am getting right now is only the last
> declaration as it overwrites the last one. I just want the new variable to
> be added to the currentAST.

Does the thing do the right thing if you change the Decl rule to:

Decl: (varDecl)+;

I'm not sure if you triggered a bug in treebuilding there. I assume you
have the option buildAST = true in your grammar ?

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     "Never argue with an idiot, for they will bring you down to their
              level and beat you with experience." --- Unknown



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Wed Apr 21 02:21:02 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] protected weakness?
In-Reply-To: <c579g2+vqpe@eGroups.com>
References: <c579g2+vqpe@eGroups.com>
Message-ID: <20040421092102.GB5811@cs.utwente.nl>

On Fri, Apr 09, 2004 at 10:52:50PM -0000, idontwantanidwith2000init wrote:
> consider this: (taken from the faq}
> 
> ID_OR_NUM : DIGITS (ID {$setType(ID);} | {$setType(NUMBER);}) ;
> 
> where ID and NUMBER are protected... 
> 
> will the parser get ID or NUMBER?

Depends on the input ;) But both ID and NUMBER would be valid return tokens.

$setType() sets the token type regardless without any protected checking.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Before they invented drawing boards, what did they go back to?



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Wed Apr 21 02:31:24 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] Generating exceptions with location info
In-Reply-To: <16508.27523.597550.521379@SWAN.PSY.cmu.edu>
References: <16508.27523.597550.521379@SWAN.PSY.cmu.edu>
Message-ID: <20040421093124.GD5811@cs.utwente.nl>

On Tue, Apr 13, 2004 at 06:36:51PM -0400, FranklinChen@cmu.edu wrote:
> so I have a "begin" token and an "end" token 
> 
> BEGIN : '<'! ('a'..'z')+
> END: ('a'..'z')+ '>'!
> 
> and a parser that parses a "sentence" of tokens and pushes each
> "begin" tag found onto a stack of seen tags and then each "end" tag
> seen is checked for a matching one.  If there is a failure, I throw a
> SemanticException.  So far, so good.
> 
> Problem:  I don't know how to get the current line and column numbers
> from the parser, to pass to the SemanticException!  I looked at the
> ANTLR source and it looks like things are protected so that I can't
> get at the lexer information.  

The best way to get the line number is tag a token in the vicinity of the
error and use the line/column of that one. If everything else fails you can
get it from the inputState object (getInputState should return it but you
can probably reference it directly) Though the values there might be off
due to guessing mode.

Tip: try grep getLine on the antlr support lib header files (or java
files). All line handling methods are get/set/Line/Column.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
   Words fly like arrows
      as if we knew what was right and wrong. --- Chuang Tsu


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Wed Apr 21 02:40:42 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] Newbie question
In-Reply-To: <c5pbcp+41ni@eGroups.com>
References: <c5pbcp+41ni@eGroups.com>
Message-ID: <20040421094042.GE5811@cs.utwente.nl>

On Fri, Apr 16, 2004 at 07:15:37PM -0000, Andres Chaves wrote:
> postfixExpr
{ int num_args = 0; }
> 	:	(id:ID LPAREN)=>
> 		id2:ID^
> 		(
>          parenArgs
       num_args=parenArgs
> 		)?
   {
     // pseudo code...	
      int expected_args = lookupsym(id2->getText())->numArgs();
      if( expected_args != num_args )
         throw SemanticException()		
   }	
> 	|	atom
> 	;

And change parenArgs to something like:

parenArgs [returns int num_args = 0] :
"(" ( arg { num_args++; } ) ")" ;

> I have to detect when the number of arguments is wrong (for example 
> sin() or sin(a,b)), and raise a parser exception, when i parse the 
> function (not when im calculating).
> 
> I wonder if someone could give some advice about how to do this.

Making it all java/or C++ is left to the reader ;) This is the gist of it
anyway.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     "Evil will always triumph, because Good is dumb." ---  Spaceballs



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Wed Apr 21 02:53:59 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] MS Visual C++ Toolkit 2003
In-Reply-To: <c63sfa+5aaj@eGroups.com>
References: <c63sfa+5aaj@eGroups.com>
Message-ID: <20040421095358.GH5811@cs.utwente.nl>

On Tue, Apr 20, 2004 at 07:08:26PM -0000, micheal_jor wrote:
> There was a thread a while discussing how to get free access to the
> Microsoft C++ compiler. This link should help:
> 
> http://msdn.microsoft.com/visualc/vctoolkit2003/

This one is very helpfull (only disadvantage nmake and lib utilities are
missing). I must btw do a mea culpa on the tip from last time. While
getting nmake form the .NET stuff I noticed it had installed into multiple
directories one containing the compilers as well :/

I can now build the 2.7.4 rc candidate into a dll (did not get to trying
examples with the generated dll) Static lib no luck since the lib tool is
missing (unless the one in a win64 directory is usable, but did not get to
try that last night)

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "You know how to use that thing?" [pointing to the sword]
  "Sure.. The pointy end goes into the other guy."
  --- The Mask of Zorro


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Wed Apr 21 04:24:30 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] C++ run-time and ref-counters (was TokenStreamRewriteEngine and C++)
In-Reply-To: <B39B7054-9306-11D8-9E9F-000393A56BB6@glyphic.com>
References: <B39B7054-9306-11D8-9E9F-000393A56BB6@glyphic.com>
Message-ID: <20040421112429.GI5811@cs.utwente.nl>

Hi,

On Tue, Apr 20, 2004 at 01:09:59PM -0700, Mark Lentczner wrote:
> 1) Please don't use Boost, or any other library. I have no beef with
> Boost, but we incorporate Antlr into our project, and and if we have to
> start including Antlr's dependent projects as well, it will get way to
> hairy. We'd never have used Antlr if it didn't stand on its own.

I want antlr to be as lightweight as possible. E.g. no boost installation
required if I'd grab boost then I'd only scrounge a few files and fit them
into the antlr build (if their license permits so) boost is a plain
nuisance to build (probably just me ;) )

For unicode support I'm already unhappy enough about probably having to
become dependent on the IBM icu library. (I hope templates can safe us from
having to install this thing even for simple ASCII parsers)

> 2)
>  > I'm not 100% sure but I think there's no smartpointer in C++ possible
>  > that's smart enough to behave like the pointer I'd like for
> heterogenous
>  > AST's.
> Bet there is!  If you are having trouble taming yours, let me know and
> I'd be happy to lend a hand.
> 3) I have ref counting pointer framework that you are welcome to take
> from and/or use. It has all the polymorphic properties one wants:
> ref_ptrT can be safely assigned to a ref_ptrS iff a T* can be assigned
> to S*, (basically S is T or an accessible base class of T). It does
> assume a common base class Countable of the things being counted -
> which shouldn't be a problem in Antlr since AST trees are never
> manipulated except through ref counted pointers. If it is, it would be
> an easy rewrite so that the ref counted thing doesn't contain the
> count. (I'm offering to do it, too.)

Stupid thing is that I did not make enough notes when toying with these
reference counter problems so I don't have a clear listing of the actual
cases that give problems. I only recall that it's around conversions up and
down AST-type hierarchies (so when using heterogenous AST's) I basically
have to spend some serious antlr time on looking at it again and trying a
few approaches (using custom allocator+garbage collection/change the
reference counter) The archive might turn some up in discussions with
Michael Tiller if I recall right.

Also my understanding of 'smart' pointers improved a lot since the last I
looked at it so there's hope ;)

A disadvantage of your reference counter is btw that we have to drop
support for some compilers due to the use of the member template (but I
guess that's not that big a deal except if VC6 has trouble with it, then
again those conversions can be implemented manually if the hierarchy isn't
too big)

Another thing that makes me hate the smartpointers is that current gdb's
still segfault like hell around their use :((((

Although I got a nice hunch from looking at your code :)

When 2.7.4 is out of the door I want to cut another development branch and
toy around with some approaches. For one I want to try out a plain pointer
with custom allocator/garbage collector strategy (how long have I been
saying that *doh*).

I'll remember your email adress for when I start looking at this again :)

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Innovation makes enemies of all those who prospered under the old
   regime, and only lukewarm support is forthcoming from those who would
               prosper under the new. --- Niccol Machiavelli



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Wed Apr 21 04:35:44 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] TokenStreamRewriteEngine and C++
In-Reply-To: <B39B7054-9306-11D8-9E9F-000393A56BB6@glyphic.com> <40855C73.5060608@softax.pl>
References: <B39B7054-9306-11D8-9E9F-000393A56BB6@glyphic.com> <20040419164301.GA1831@ktulu> <20040420090432.GD657@cs.utwente.nl> <20040420141318.GA2895@ktulu> <20040420163240.GO657@cs.utwente.nl> <40855C73.5060608@softax.pl>
Message-ID: <20040421113544.GJ5811@cs.utwente.nl>

Hi,

On Tue, Apr 20, 2004 at 07:22:59PM +0200, Sebastian Kaliszewski wrote:
> If I may ask... What's the exact nature of the problem?

See my answer to Mark Lentczner mail and a small bit about it below.

> <shameless-plug> I'm an author of yet another smartpointer library, this one
> is different though, as it implements full GC instead of just reference
> counting. it's here: http://smieciuch.sf.net </shameless-plug>
>
> Maybe, as I played with such stuff, I could be of some help... Or if it's
> impossible to do as ANTLR needs it to be, I'd be also interested in knowing
> about the exact limitations.

I'll probably come back on this issue somewhere after I've toyed more
extensively with it again (and did make notes about what exactly goes
wrong). Most of the problem is around up and downcasting along AST-type
hierarchies.

Must say that your library looks interesting.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Human beings, who are almost unique in having the ability to learn
   from the experience of others, are also remarkable for their apparent
         disinclination to do so. --- Douglas Adams, Last Chance to See


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From tineo at ac.uma.es  Wed Apr 21 04:46:39 2004
From: tineo at ac.uma.es (Adrian Tineo)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] Transforming trees: modify input tree
In-Reply-To: <77C42B9C-9245-11D8-952B-000393B5606C@codetransform.com>
References: <c61ai3+l4o5@eGroups.com> <77C42B9C-9245-11D8-952B-000393B5606C@codetransform.com>
Message-ID: <200404211346.39420.tineo@ac.uma.es>

Hello there

I am using the GNU C grammar available at antlr.org. Thanks to this grammar I 
can easily create a tree for a C program. I need to modify that tree and 
print it back to code. Fortunately, the GNU C grammar comes with a 
GnuCEmittter which does just that, it prints out a tree back to code.

If I have
	line i:	a=b;
	line i+1:   (left blank)
	line i+2:	return 0;
I want to have
	line i:	tmp=b;
	line i+1:	a=tmp;
	line i+2:	tmp=NULL;
	line i+3:	(left blank)
	line i+4:	return 0;

As you can see I need to change the node for a=b for three nodes, that I want 
to print to different lines and still get the proper separation with the 
following code.

But I get
	line i:	tmp=b;
	line i+1:	a=tmp;
	line i+2:	tmp=NULL; return 0;

I can easily specify the line numbers for the newly created nodes but in order 
to keep the separations right, I would need to update the line number for 
every node that comes afterwards. 

As I am extending the treeparser grammar and don't want to override the rules 
I don't need to work with, I would need to update the line numbers in the 
INPUT tree so automatic tree generation for the rules I don't override would 
copy the rest of the input nodes(with the updated line numbers) to the ouput 
tree.

And the question is, how can I do that? How can I have access to the input 
tree for an AST-transforming treeparser?
Or is there a better way to handle this problem?

Any help appreciated. Thanks.

Adrian Tineo



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From sk at z.pl  Wed Apr 21 06:31:00 2004
From: sk at z.pl (Sebastian Kaliszewski)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] TokenStreamRewriteEngine and C++
In-Reply-To: <20040421113544.GJ5811@cs.utwente.nl>
References: <B39B7054-9306-11D8-9E9F-000393A56BB6@glyphic.com> <20040419164301.GA1831@ktulu> <20040420090432.GD657@cs.utwente.nl> <20040420141318.GA2895@ktulu> <20040420163240.GO657@cs.utwente.nl> <40855C73.5060608@softax.pl> <20040421113544.GJ5811@cs.utwente.nl>
Message-ID: <40867794.7090804@softax.pl>

Ric Klaren wrote:
>>If I may ask... What's the exact nature of the problem?
> 
> See my answer to Mark Lentczner mail and a small bit about it below.
> 
>>Maybe, as I played with such stuff, I could be of some help... Or if it's
>>impossible to do as ANTLR needs it to be, I'd be also interested in knowing
>>about the exact limitations.
> 
> I'll probably come back on this issue somewhere after I've toyed more
> extensively with it again (and did make notes about what exactly goes
> wrong).

Don't hestiate to inform all of us at antlr-interest when you come back to this.

> Most of the problem is around up and downcasting along AST-type
> hierarchies.

Well, I think this one should be tractable if only compiler supports member 
templates (all decent ones including MSVC 6.0 do support it, MSVC 6.0 can't 
handle friend templates does not support separate new[] operator and has 
nonstandard way of dealing with unsuccesfull allocations but those are minor 
problems). Then add smart_ptr version of dynamic_cast (easy) and thing 
should be ok.


> Must say that your library looks interesting.

:)

Well, I needed something which would deal with reference cycles for my Antlr 
based project (and something which would not leak from time to time like 
Boehm's collector), and I didn't found anything good enough, hence Smieciuch.
<more-shameless-plugging>
As I side effect of the fact it doesn't do a refcounting and as an effect of 
the choosen design (the basic idea is not mine) is the possibility to do an 
unconstrained conversion to/from plain pointers (plain pointers take a role 
of weak pointers), given the object is allocated thorough GC version of new 
or new[]. Even some "awfull" things like casting 'this' to smartpointer or 
converting pointers to fields of GC managed objects into smartpointers are 
perfectly legal.
</more-shameless-plugging>

rgds
-- 
Sebastian Kaliszewski



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From sk at z.pl  Wed Apr 21 06:42:56 2004
From: sk at z.pl (Sebastian Kaliszewski)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] C++ run-time and ref-counters (was TokenStreamRewriteEngine
 and C++)
In-Reply-To: <20040421112429.GI5811@cs.utwente.nl>
References: <B39B7054-9306-11D8-9E9F-000393A56BB6@glyphic.com> <20040421112429.GI5811@cs.utwente.nl>
Message-ID: <40867A60.4030406@softax.pl>

Ric Klaren wrote:
> I want antlr to be as lightweight as possible. E.g. no boost installation
> required if I'd grab boost then I'd only scrounge a few files and fit them
> into the antlr build (if their license permits so).

Well, while I don't see problem with licence, it still might be hard, as 
boost smartpointers seem to make use of some other boost stuff. And you'd 
have to deal also with boost autoconfiguration stuff (sarpointers make haevy 
use of compiler & platform specific tunig persent in the boost)

> boost is a plain
> nuisance to build (probably just me ;) )

Well, it's not that bad it's only nonstandard ;)

[snip]
> Stupid thing is that I did not make enough notes when toying with these
> reference counter problems so I don't have a clear listing of the actual
> cases that give problems. I only recall that it's around conversions up and
> down AST-type hierarchies (so when using heterogenous AST's) I basically
> have to spend some serious antlr time on looking at it again and trying a
> few approaches (using custom allocator+garbage collection/change the
> reference counter)

Answered to that in the other post... But once more: informs us, when you're 
playing with it again!

> The archive might turn some up in discussions with
> Michael Tiller if I recall right.

Must look there...

[snip]
> A disadvantage of your reference counter is btw that we have to drop
> support for some compilers due to the use of the member template (but I
> guess that's not that big a deal except if VC6 has trouble with it, then
> again those conversions can be implemented manually if the hierarchy isn't
> too big)

I'm pretty sure MSVC 6.0 supports member templates, it can't deal with 
friend templates, though (but that should not be a problem).

> Another thing that makes me hate the smartpointers is that current gdb's
> still segfault like hell around their use :((((

Is it really that bad? I was debugging my smartpointer library with gdb, and 
didn't encounter any strange problems (anyhing behind typical bad stuff of 
the gdb + additional graphical interface combination).


rgds
-- 
Sebastian Kaliszewski



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Wed Apr 21 07:04:08 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:42 2004
Subject: [antlr-interest] C++ run-time and ref-counters (was TokenStreamRewriteEngine and C++)
In-Reply-To: <40867A60.4030406@softax.pl>
References: <B39B7054-9306-11D8-9E9F-000393A56BB6@glyphic.com> <20040421112429.GI5811@cs.utwente.nl> <40867A60.4030406@softax.pl>
Message-ID: <20040421140408.GK5811@cs.utwente.nl>

On Wed, Apr 21, 2004 at 03:42:56PM +0200, Sebastian Kaliszewski wrote:
> Well, while I don't see problem with licence, it still might be hard, as 
> boost smartpointers seem to make use of some other boost stuff. And you'd 
> have to deal also with boost autoconfiguration stuff (sarpointers make haevy 
> use of compiler & platform specific tunig persent in the boost)

I did not really look too deep into this, it will depend I guess. Lugging
whole boost around seems to me excessive anycase.

> > Another thing that makes me hate the smartpointers is that current gdb's
> > still segfault like hell around their use :((((
> 
> Is it really that bad? I was debugging my smartpointer library with gdb, and 
> didn't encounter any strange problems (anyhing behind typical bad stuff of 
> the gdb + additional graphical interface combination).

When debugging antlr stuff I usually completely rely on tracing in stead of
gdb. Probably half my debug sessions with gdb and gcc 3 generated code end
in a sigsegv of gdb. (Used to be worse when I still worked on sparc's that
was about the worst thing you could do) Then again easily enabled/disabled
tracing code is never a bad thing to have ;)

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     "Never argue with an idiot, for they will bring you down to their
              level and beat you with experience." --- Unknown



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From lorenavare at yahoo.com  Wed Apr 21 09:53:35 2004
From: lorenavare at yahoo.com (=?iso-8859-1?q?lorena=20varela?=)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Again help with pl/sql grammar
Message-ID: <20040421165335.4659.qmail@web12403.mail.yahoo.com>

Hi list.

Still I have a problem with the  pl/sql grammar. I'm
working with the plugin ANTLR Version 2.7.2 for
eclipse. The problem is that when inserted the grammar
generates this error:

TokenStreamException: expecting '(', found 'e'

I  review the metalanguage section of the docs, and I
made the changes, but still generate the error when I
compile t.g, and this is necessary for generate the
lexical analyzer and the parser in ANTLR.




I send the t.g that is the file where is the grammar.



_________________________________________________________
Do You Yahoo!?
Informaci?n de Estados Unidos y Am?rica Latina, en Yahoo! Noticias.
Vis?tanos en http://noticias.espanol.yahoo.com

 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
class MyParser extends Parser; // definici?n de un analizador sint?ctico



start_rule: (statement)* ;
statement :	
	(label_name)?
	( assignment_statement
	| close_statement
	| execute_immediate_statement
	| execute_statement
	| explain_plan_statement
	| exit_statement
	| fetch_statement
	| forall_statement
	| goto_statement
	| if_statement
	| loop_statement
	| null_statement
	| open_for_statement
	| open_statement
	| function_declaration
	| procedure_declaration
	| plsql_block
	| rename_statement
	| raise_statement
	| return_statement
	| call_statement
	| noaudit_statement
	| associate_statistics
	| create_type
	| create_type_body
	| create_operator
	| create_table
	| create_tablespace
	| create_temporary_tablespace
	| create_trigger
	| create_cluster
	| create_context
	| create_controlfile
	| create_index
	| create_indextype
	| create_database_link
	| create_database
	| create_dimension
	| create_directory
	| create_library
	| create_outline
	| create_pfile
	| create_synonym
	| create_package
	| create_package_body
	| create_procedure
	| create_profile
	| create_role
	| create_user
	| create_rollback_segment
	| create_schema
	| create_view
	| create_materialized_view_log
	| create_materialized_view
	| grant_statement
	| set_transaction_statement	
	| revoke_statement
	| create_snapshot
	| create_function
	| drop_cluster
	| drop_database_link
	| drop_directory
	| drop_dimension
	| drop_function
	| drop_index
	| drop_indextype
	| drop_context
	| drop_library
	| drop_operator
	| drop_package
	| drop_procedure
	| drop_profile
	| drop_role
	| drop_rollback_segment
	| drop_sequence
	| drop_snapshot
	| drop_synonym
	| drop_table
	| drop_tablespace
	| drop_trigger
	| drop_type
	| drop_type_body
	| drop_user
	| drop_view
	| drop_materialized_view
	| drop_materialized_view_log
	| drop_outline
	| disassociate_statistics
	| case_statement
	| commit_statement
	| delete_statement
	| insert_statement
	| lock_table_statement
	| rollback_statement
	| savepoint_statement
	| select_statement
	| truncate_statement
	| update_statement
	| alter_database_statement
	| alter_cluster_statement
	| alter_dimension_statement
	| alter_function_statement
	| alter_procedure_statement	
	| alter_profile_statement	
	| alter_index_statement
	| alter_indextype_statement
	| alter_operator_statement
	| alter_outline_statement
	| alter_package_statement
	| alter_resource_statement
	| alter_role_statement
	| alter_rollback_statement
	| alter_sequence_statement
	| alter_session_statement
	| alter_snapshot_statement
	| alter_system_statement
	| alter_table_statement
	| alter_tablespace_statement
	| alter_trigger_statement
	| alter_type_statement
	| alter_user_statement
	| alter_view_statement
	| alter_materialized_view_log
	| alter_materialized_view_statement
	| analyze_statement
	| audit_statement
	| comment_statement
	| merge_statement
	| set_role
	| set_constraints
	
	// java
	| create_java
	| alter_java_statement
	| drop_java_statement
	
	| expression
	| ";"
	| "/"
	) (";")?
	| label_name ;

select_statement : 
	(subquery | select_into_statement)
	(for_update_clause)?;

subquery :
	(subquery_factoring_clause)?  
	"SELECT" (hint)? 
	(distinct_all_or_unique)? select_list
	from_clause
	(where_clause)?
	(hierarchical_query_clause)?
	(group_by_clause)?
	(having_clause)?
	(subquery_clause)?
	(order_by_clause)?
	;
	
select_into_statement :
	"SELECT" 
	(distinct_or_all)? select_list
	select_into_clause 
	from_clause
	(where_clause)?
	(hierarchical_query_clause)?
	(group_by_clause)?
	(having_clause)?  
	(subquery_clause)?
	(order_by_clause)? ;

from_clause :
	"FROM" 
	( table_reference  | ("THE")? "(" subquery ")" (alias)? )+ ;

having_clause :
	"HAVING" condition ;

subquery_clause :
	subquery_operator
	( "(" subquery ")"   | subquery );
	
subquery_operator :	
	  "UNION" ("ALL")?
	| "INTERSECT" 
	| "MINUS" 
	;

select_item :
	(
	  null_tag
	| numeric_literal
	| qualified_name ("." "*" | "." ("CURRVAL" | "NEXTVAL"))?
	| function_name ("(" (parameter_name)+ "," ")")?
	| squotedstring
	(("AS")? alias)?
	) ;
	
subquery_factoring_clause :
	"WITH" 
	(query_name "AS" "(" subquery ")" )+ ;

select_list :
	"*"
	| (   query_name "." "*"
	    | (schema ".")? (table | view) ".*" 
	    | expression (("AS")? c_alias)?
	   )+;

table_reference :
	(	
	  only_reference_clause
	| "(" table_reference ")"
	| table column_list
	| "TABLE" "(" expression ")" (t_alias)?
	| query_table_expression (flashback_clause)? (t_alias)?
	)
	(joined_table_clause)? ;
	
joined_table_clause :	
	  join_on_condition_clause 
	| cross_join_clause
	| natural_join_clause
	;

join_on_condition_clause :
	(join_type)? "JOIN" table_reference 
	("ON" condition | "USING" column_list) ;

cross_join_clause :
	"CROSS" "JOIN" ;

natural_join_clause :
	"NATURAL" (join_type)? 
	"JOIN" table_reference ;

join_type :
	  "INNER" 
	  | ( "LEFT" 
	  | "RIGHT" 
	  | "FULL") ("OUTER")?;

flashback_clause :
	"AS" "OF" scn_or_timestamp
	expression ;
	
scn_or_timestamp :	
	"SCN" | "TIMESTAMP" ;
	
only_reference_clause :	
	"ONLY" query_table_expression 
	(flashback_clause)? ;
	
query_table_expression :	
	(schema ".")? 
	  ( table ( (  "PARTITION" "(" partition ")"  | "SUBPARTITION" "(" subpartition ")" ) 
			(sample_clause)?
	            | "@" dblink
        	      | sample_clause
        	    )?
	   | ( view )+ ("@" dblink)?
	  )
	  | "(" subquery (subquery_restriction_clause)? ")"
	  | query_name
	  ;

sample_clause :
	"SAMPLE" (block_tag)? "(" sample_percent ")" ;
	
block_tag : 
	"BLOCK" ;
	
subquery_restriction_clause :
	"WITH" ("READ" "ONLY"  | "CHECK" "OPTION" ("CONSTRAINT" constraint)?) ;

table_collection_expression :
	"TABLE" "(" collection_expression ")" ( "(" "+" ")" )? ;

hierarchical_query_clause :
	("START" "WITH" start_with_expression)?
	"CONNECT" "BY" connect_by_expression ;
	
start_with_expression :
	expression ;	
	
connect_by_expression :
	expression ;	

group_by_clause :
	"GROUP" "BY"
	(  rollup_cube_clause | grouping_sets_clause | expression )+
	(having_clause)?;

rollup_cube_clause :
	("ROLLUP" | "CUBE") 
	"(" grouping_expression_list ")";

grouping_sets_clause :
	"GROUPING" "SETS" 
	"(" (rollup_cube_clause | grouping_expression_list) ")";

grouping_expression_list:
	(expression_list)+ ;

order_by_clause :
	"ORDER" ("SIBLINGS")? "BY" 
	((expression | position | c_alias) 
	 (ascending_or_descending)? 
	 ("NULLS" "FIRST" | "NULLS" "LAST")? 
      )+ ;
	 
for_update_clause :
	"FOR" "UPDATE"
	("OF" (qualified_name )+ )? 
	( "NOWAIT" | "WAIT" integer )?;

select_into_clause :
	"INTO" 
	((variable_name ("(" expression ")")? 
       )+ | record_name
      );

merge_statement :
	"MERGE" (hint)? "INTO" 
	(schema ".")? table (t_alias)? 
	"USING" (schema ".")? 
	(table | view | "(" subquery ")" )
	(t_alias)? "ON" "(" condition ")" 
	"WHEN" "MATCHED" 
		"THEN" merge_update_clause 
	"WHEN" "NOT" "MATCHED" 
		"THEN" merge_insert_clause ;

merge_update_clause :
	"UPDATE" "SET" 
	(column "=" (expression | default_tag) )+;

merge_insert_clause :
	"INSERT" column_list 
	"VALUES" "(" (expression ",")+ ")" ;

set_role :
	"SET" "ROLE"
	(   "ALL" ("EXCEPT" (role)+ )?
	  | "NONE"
	  | (role ("IDENTIFIED" "BY" password)? ",")+
	)
	;

set_constraints :
	"SET" ("CONSTRAINT" | "CONSTRAINTS") 
	("ALL" | (constraint ",")+ )

	("IMMEDIATE" | "DEFERRED");

rollback:
	"ROLLBACK" ("WORK")? 
	( "TO" ("SAVEPOINT")? savepoint | "FORCE" string )?;

truncate_statement :
	"TRUNCATE" 
	("TABLE" qualified_name 
		(("PRESERVE" | "PURGE") "MATERIALIZED" "VIEW" "LOG")?
	| "CLUSTER" qualified_name
	)
	(reuse_or_drop_storage)? ;

update_statement :
	"UPDATE" (hint)?
	(  dml_table_expression_clause | "ONLY" "(" dml_table_expression_clause ")" )
	(t_alias)? 
	update_set_clause 
	(where_clause)? 
	(returning_clause)?;


update_set_clause :
	"SET"
	(
	 (  column_list "=" "(" subquery ")" | column "=" ( expression | "(" subquery ")" | default_tag )  )+
	 | "VALUE" "(" t_alias ")" "=" (expression | "(" subquery ")" )
	)
	;	
	
where_clause :
	"WHERE" condition ;
	
variance:
	"VARIANCE" "(" (distinct_or_all)? expression ")" 
	("OVER" "(" analytic_clause ")")? ;
	
var_pop:
	"VAR_POP" "(" expression ")" 
	("OVER" "(" analytic_clause ")")? ;
	
var_samp:
	"VAR_SAMP" "(" expression ")" 
	("OVER" "(" analytic_clause ")")? ;

vsize:
	"VSIZE" "(" expression ")" ;
	
width_bucket:
	"WIDTH_BUCKET" 
	"(" expression "," min_value "," 
		max_value "," num_buckets ")" ;


exception_declaration :
	exception_name "EXCEPTION" ;

exception_handler :
	"WHEN" 
	( (exception_name "OR")+ | "OTHERS" ) 
	"THEN" (statement)+ ;

delete_statement :
	 "DELETE" ("FROM")? (table_reference | ("THE")? "(" subquery ")" ) 
	 (alias)?
	 ("WHERE" (search_condition  | "CURRENT_OF" cursor_name))? 
	 (returning_clause)?;
	 
returning_clause :
	 ("RETURNING")?
	 ((single_row_expression)+   "INTO" (bind_argument)+
	 |(multiple_row_expression)+ "INTO" (bind_argument )+ )?;
	
bind_argument : 
	  variable_name 
	| ":" host_variable_name
	| number
	;
 
hint :	// hints are contained in comments
	  ("/*+") *("*/") "*/"
	| ("--+") *(#eol) ;

insert_statement :
	"INSERT" (hint)? 
	(single_table_insert | multi_table_insert);
	
single_table_insert :
	insert_into_clause 
	(values_clause (insert_returning_clause)? 
		| subquery | "(" subquery ")") ;

insert_into_clause :
	"INTO" dml_table_expression_clause (t_alias)? 
	(column_list)? ;

values_clause :
	"VALUES" "(" ( default_tag | expression )+ ")" ;

insert_returning_clause :
	"RETURNING" (expression)+
	"INTO" (bind_argument)+; 
	
multi_table_insert :	
	("ALL" (insert_into_clause (values_clause)? )+
	  | conditional_insert_clause
	)
	(subquery | "(" subquery ")") ;
	
conditional_insert_clause :	
	("ALL" | "FIRST" )? 
	("WHEN" condition "THEN" (insert_into_clause (values_clause)? )+ )+
	("ELSE" (insert_into_clause (values_clause)? )+ )? ;
	
commit_statement :
	"COMMIT" ("WORK")? 
	("COMMENT" squotedstring)? ;

rollback_statement :
	"ROLLBACK" ("WORK")? 
	("TO" ("SAVEPOINT")? savepoint_name)?;

savepoint_statement :
	"SAVEPOINT" savepoint_name;

lock_table_statement :
	"LOCK" "TABLE" (table_reference ",")+
	"IN" lock_mode "MODE" ("NOWAIT")?;

lock_mode :
	  "ROW" ("SHARE" | "EXCLUSIVE")
	| "SHARE" ("UPDATE" | "ROW" "EXCLUSIVE")?
	| "EXCLUSIVE"
	;
	
noaudit_statement :
	"NOAUDIT" 
	((sql_statement_clause)+  | (schema_object_clause)+ )
	("WHENEVER" (not_tag)? "SUCCESSFUL")?;

associate_statistics :
	"ASSOCIATE" "STATISTICS" "WITH"
	(column_association | function_association) ;
	
column_association :	
	"COLUMNS" (qualified_name)+
	using_statistics_type ;
	
function_association :
	associated_item (qualified_name)+
	( using_statistics_type | ( (default_cost_clause)+ | (default_selectivity_clause )+ )
	);
	
using_statistics_type :	
	"USING" (qualified_name | "NULL") ;
	
default_cost_clause :
	"DEFAULT" "COST" 
	"(" cpu_cost "," io_cost "," network_cost ")" ;
	
	cpu_cost : numeric ;
	io_cost : numeric ;
	network_cost : numeric ;
	
default_selectivity_clause :	
	"DEFAULT" "SELECTIVITY" default_selectivity ;

	default_selectivity : numeric;

create_table :
	  relational_table 
	| object_table 
	| XMLType_table
	;

relational_table :
	"CREATE" (global_temporary)? "TABLE" 
	(schema ".")? table ^"OF"
	("(" relational_properties ")")? 
	(on_commit_clause)?
	(physical_properties | table_properties)*;
	
object_table :
	"CREATE" (global_temporary)? "TABLE" 
	(schema ".")? table 
	"OF" (schema ".")? object_type 
	(object_table_substitution)?
	("(" object_properties ")" )? 
	(on_commit_clause)?
	(OID_clause)?
      (OID_index_clause)? 
	(physical_properties)? 
	(table_properties)?;

global_temporary :	
	"GLOBAL" "TEMPORARY" ;

on_commit_clause :
	"ON" "COMMIT" delete_or_preserve "ROWS" ;
	
delete_or_preserve :	
	  "DELETE" 
	| "PRESERVE" ;
	
relational_properties :
	  (   column (datatype)? (default_tag expression)? 
	      ((inline_constraint | inline_ref_constraint)+ )?
	    | out_of_line_constraint 
	    | out_of_line_ref_constraint 
	    | supplemental_logging_props
	   (",")? )+;

object_properties :
	(
		(column | attribute) (default_tag expression)? 
		  ((inline_constraint)+ | inline_ref_constraint)?
		| out_of_line_constraint 
		| out_of_line_ref_constraint 
		| supplemental_logging_props
	 (",")? )+;

object_table_substitution :
	substitutable_clause ;

OID_clause :
	"OBJECT" plsql_identifier "IS" 
	("SYSTEM" "GENERATED" | "PRIMARY" "KEY");

OID_index_clause :
	"OIDINDEX" (index)? 
	"(" (physical_attributes_clause | tablespace_spec)+ ")" ;

tablespace_spec :
	"TABLESPACE" tablespace ;

physical_properties :
	(
	  segment_attributes_clause (data_segment_compression)?
	| organization_heap_clause
	| organization_index_clause
	| organization_external_clause
	| "CLUSTER" cluster column_list
	)+;

organization_heap_clause :
	"ORGANIZATION" "HEAP" 
	(segment_attributes_clause)? 
	(data_segment_compression)? ;

organization_index_clause :
	"ORGANIZATION" "INDEX" 
	(segment_attributes_clause)? 
	(index_org_table_clause)? ;

organization_external_clause :
	"ORGANIZATION" "EXTERNAL" 
	external_table_clause ;

segment_attributes_clause :
	(  physical_attributes_clause
	 | tablespace_spec
	 | logging_clause
	)+ ;

physical_attributes_clause :
	(   pctfree_spec
	  | pctused_spec
	  | inittrans_spec
	  | maxtrans_spec
	  | storage_clause
	)+ ;

pctfree_spec : 
	"PCTFREE" integer ;
	
pctused_spec :
	"PCTUSED" integer	;

inittrans_spec :
	"INITRANS" integer ;

maxtrans_spec :
	"MAXTRANS" integer ;

storage_clause :	
	"STORAGE"
	("(")?
	 (  storage_initial_spec
	  | storage_next_spec 
	  | minextents_spec
	  | maxextents_spec
	  | pctincrease_spec
	  | freelists_spec
	  | freelist_groups_spec
	  | storage_optimal_spec
	  | buffer_pool_spec 
	  )+
	(")")?;

storage_initial_spec :
	"INITIAL" integer (K_or_M)? ;

storage_next_spec :
	"NEXT" integer (K_or_M)? ;

minextents_spec :
	"MINEXTENTS" integer ;

maxextents_spec :
	"MAXEXTENTS" (integer | "UNLIMITED"); 
	
pctincrease_spec : 
	"PCTINCREASE" integer ;

freelists_spec :
	"FREELISTS" integer ;

freelist_groups_spec :
	"FREELIST" "GROUPS" integer ;

storage_optimal_spec :
	"OPTIMAL" (integer (K_or_M)? | null_tag)? ;

buffer_pool_spec :
	"BUFFER_POOL" buffer_pool_option ;
	
buffer_pool_option :	
	  "KEEP" 
	| "RECYCLE" 
	| "DEFAULT" ;
	
data_segment_compression :
	  "COMPRESS" 
	| "NOCOMPRESS" ;
	
table_properties :
	(column_properties)? 
	(table_partitioning_clauses)? 
	(row_movement_clause)?
	(cache_clause)? 
	(rowdependencies_spec)?
	(monitoring_spec)?
	(parallel_clause)? 
	(enable_disable_clause)*
	("AS" subquery)? ;

column_properties :
	(column_property)+ ;
	
column_property :	
	  object_type_col_properties
	| nested_table_col_properties
	| (varray_col_properties | LOB_storage_clause) 
	  (LOB_partition_storage)?
	| XMLType_column_properties
	;

object_type_col_properties :
	"COLUMN" column 
	substitutable_column_clause ;

substitutable_column_clause :
	  ("ELEMENT")? "IS" "OF" ("TYPE")? 
	  "(" ("ONLY")? type ")"
	| substitutable_clause ;
	
nested_table_col_properties :
	"NESTED" "TABLE" 
	(nested_item | "COLUMN_VALUE")
	(substitutable_column_clause)? 
	store_as_table_clause
	("(" ("(" object_properties ")" )? 
	(physical_properties)? (column_properties)? ")" )?
	("RETURN" "AS" ("LOCATOR" | "VALUE") )?;

store_as_table_clause : 
	"STORE" "AS" storage_table ;

varray_col_properties :
	"VARRAY" varray_item 
	(   substitutable_column_clause | "STORE" "AS" "LOB"
	    (LOB_segname ("(" LOB_parameters ")" )? 
	      | "(" LOB_parameters ")")
	);

LOB_storage_clause :
	"LOB"
	(  "(" (LOB_item)+ ")" 	"STORE" "AS" "(" LOB_parameters ")"
	 | "(" LOB_item ")"  "STORE" "AS" 
	    (LOB_segname ("(" LOB_parameters ")" )? 
		    	| "(" LOB_parameters ")")
	);
	
LOB_parameters :
	( tablespace_spec
	| storage_in_row_clause 
	| storage_clause
	| chunk_clause
	| pctversion_clause
	| retention_tag 
	| freepools_clause
	| cache_clause
	)+;
	
storage_in_row_clause :		
	enable_or_disable "STORAGE" "IN" "ROW" ;
		
logging_clause :
	  "LOGGING" 
	| "NOLOGGING" ;
	
pctversion_clause :
	"PCTVERSION" integer ;
	
retention_tag :
	"RETENTION"	;

freepools_clause :
	"FREEPOOLS" integer ;
	
chunk_clause :
	"CHUNK" integer ;
	
LOB_partition_storage :
	"PARTITION" partition 
	(LOB_storage_clause | varray_col_properties)+
	("(" "SUBPARTITION" subpartition 
	   (LOB_storage_clause | varray_col_properties)+
	 ")"
	)?;

row_movement_clause :
	enable_or_disable "ROW" "MOVEMENT" ;

index_org_table_clause :
	( mapping_table_clauses
	 | pctthreshold_clause
	 | key_compression
	 | index_org_overflow_clause
	)+
	;

index_org_overflow_clause :
	("INCLUDING" column)? 
	(segment_attributes_clause | pctthreshold_clause)*
	"OVERFLOW"
	(segment_attributes_clause)?;
	
mapping_table_clause :
	  "MAPPING" "TABLE"
	| "NOMAPPING" ;

pctthreshold_clause :
	"PCTTHRESHOLD" integer ;

key_compression :
	  "COMPRESS" (integer)? 
	| "NOCOMPRESS" ;

supplemental_logging_props :
	"SUPPLEMENTAL" "LOG" "GROUP" 
	log_group column_list
	("ALWAYS")? ;

external_table_clause :	
	"(" ("TYPE" access_driver_type)? 
		external_data_properties ")" 
	("REJECT" "LIMIT" (integer | "UNLIMITED"))? ;

external_data_properties :
	"DEFAULT" "DIRECTORY" directory
	("ACCESS" "PARAMETERS" 
		("(" opaque_format_spec ")" | "USING" "CLOB" subquery) )?
	"LOCATION" "(" ((directory ":")? 
		location_specifier)+ ")" ;

opaque_format_spec : 
	  record_format_info
	| fields_clause ;

record_format_info : 
	"RECORDS" record_size_spec
  	(record_format_option)*
   	(fields_clause)?;
   	
record_size_spec :
	  fixed_record_size
	| variable_record_size
	| delimited_record_size ;
	
fixed_record_size :	
	"FIXED" integer ;
	
variable_record_size :	
	"VARIABLE" integer ;
	
delimited_record_size :
	"DELIMITED" "BY" delimited_by_spec ;
	
delimited_by_spec :	
	  "NEWLINE" 
	| string ;

record_format_option :
	  record_format_characterset
	| record_format_endian
	| record_format_BOM
	| record_format_string_sizes
	| record_format_load_when
	| record_format_badfile 
	| record_format_discardfile
	| record_format_logfile
	| record_format_readsize
	| record_format_date_cache
	| record_format_skip
   	;

record_format_characterset :
	"CHARACTERSET" string ;
	
record_format_endian :
	"DATA" "IS" little_or_big "ENDIAN" ;
	
little_or_big :	
	  "LITTLE" 
	| "BIG" ;
	
record_format_BOM :
	"BYTE" "ORDER" "MARK" 
	check_or_nocheck ;
	
check_or_nocheck :	
	  "CHECK" 
	| "NOCHECK" ;
	
record_format_string_sizes :
	"STRING" "SIZES" "ARE" "IN" 
	bytes_or_characters ;
	
bytes_or_characters :	
	  "BYTES" 
	| "CHARACTERS" ;
	
record_format_load_when :
	"LOAD" "WHEN" condition_spec ;
	
record_format_badfile :
	  "NOBADFILE" 
	| "BADFILE" 
		(directory_object_name ":")? filename ;

record_format_discardfile :
	  "NODISCARDFILE" 
	| "DISCARDFILE" 
		(directory_object_name ":")? filename ;

record_format_logfile :
	  "NOLOGFILE" 
	| "LOGFILE" 
		(directory_object_name ":")? filename ;

record_format_readsize :
	"READSIZE" integer ;

record_format_date_cache :
	"DATE_CACHE" integer ;
	
record_format_skip :
	"SKIP" integer ;
	
fields_clause : 
	"FIELDS" (delim_spec)? (trim_spec)? 
	(missing_field_values_are_null)? 
	(reject_rows_with_all_null_fields)? 
	(field_list)? ;

missing_field_values_are_null :
	"MISSING" "FIELD" "VALUES" "ARE" "NULL" ;

reject_rows_with_all_null_fields :
	"REJECT" "ROWS" "WITH" "ALL" "NULL" "FIELDS" ;

position_spec :
	("POSITION")? 
	"(" (pos_start | "*")
	    (("+" | "-") pos_increment)?
	    ":"
	    (pos_end | pos_length) ")" ;
	
	pos_start 	  : number;
	pos_increment : number;
	pos_end 	  : number;
	pos_length 	  : number;

delim_spec :
	  "ENCLOSED" "BY" string ("AND" string)? 
	| "TERMINATED" "BY" (string | "WHITESPACE") 
	  (("OPTIONALLY")? "ENCLOSED" "BY" string ("AND" string)? )? ;

trim_spec : 
	  "LRTRIM" 
	| "NOTRIM" 
	| "LTRIM" 
	| "RTRIM" 
	| "LDRTRIM"
	;

field_list : 
	"(" (field_name (position_spec)? 
	(datatype)? (init_spec)? )+ ")";


location_specifier : squotedstring ;

init_spec :
	("DEFAULTIF" | "NULLIF") 
	condition;

table_partitioning_clauses :
	  range_partitioning
	| hash_partitioning 
	| list_partitioning
	| composite_partitioning
	;

range_partitioning :
	"PARTITION" "BY" "RANGE" column_list
	  "(" ("PARTITION" (partition)? range_values_clause 
	    table_partition_description)+ ")" ;
	
hash_partitioning  :
	"PARTITION" "BY" "HASH" column_list
	(individual_hash_partitions | hash_partitions_by_quantity);

list_partitioning :
	"PARTITION" "BY" "LIST" "(" column ")"
	"(" ("PARTITION" (partition)? list_values_clause 
		table_partition_description)+ ")" ;

composite_partitioning :
	"PARTITION" "BY" "RANGE" column_list
	(subpartition_by_list | subpartition_by_hash)? 
	  "(" ("PARTITION" (partition)? range_values_clause 
	  	table_partition_description ",")+ ")" ;

subpartition_by_hash :
	"SUBPARTITION" "BY" "HASH" column_list
	("SUBPARTITIONS" quantity (store_in_clause)? | subpartition_template)?;

individual_hash_partitions :		
	"(" ("PARTITION" (partition partitioning_storage_clause)? )+ ")" ;

hash_partitions_by_quantity :
	"PARTITIONS" hash_partition_quantity 
	(store_in_clause)?
	("OVERFLOW" store_in_clause)? ;

subpartition_by_list :
	"SUBPARTITION" "BY" "LIST" "(" column ")" 
	(subpartition_template)? ;
	
subpartition_template :
	"SUBPARTITION" "TEMPLATE"
	"(" (SUBPARTITION subpartition 
		(list_values_clause)? 
		(partitioning_storage_clause)? )+ ")" 
	| hash_subpartition_quantity ;
	
range_values_clause :
	"VALUES" "LESS" "THAN"
	  "(" (value | "MAXVALUE")+ ")" ;
	  
list_values_clause :
	"VALUES" "(" 
	(value 
	| null_tag 
	| default_tag)+ 
	")" ;

table_partition_description :
	(segment_attributes_clause)? 
	(data_segment_compression)? 
	(key_compression)?
	(table_partition_overflow_clause)?
	(LOB_storage_clause | varray_col_properties)*
	(partition_level_subpartition)? ;
	
table_partition_overflow_clause :	
	"OVERFLOW" (segment_attributes_clause)? ;
	
partition_level_subpartition :	
	  "SUBPARTITIONS" hash_subpartition_quantity 
	  (store_in_clause)?
	| "(" (subpartition_spec)+ ")" ;
	
subpartition_spec :	
	"SUBPARTITION" (subpartition)? 
	(list_values_clause)? 
	(partitioning_storage_clause)? ;

partitioning_storage_clause :
	( (tablespace_spec
	  | partitioning_storage_overflow_clause
	  | partitioning_storage_lob_clause 
	  | partitioning_storage_varray_clause
	  )+
	)? ;

partitioning_storage_overflow_clause :
	"OVERFLOW" (tablespace_spec)? ;

partitioning_storage_lob_clause  :
	"LOB" "(" LOB_item ")" "STORE" "AS"
	(LOB_segname ( "(" tablespace_spec ")" )? 
		| "(" tablespace_spec ")" );
		
partitioning_storage_varray_clause :
	"VARRAY" varray_item 
	"STORE" "AS" "LOB" LOB_segname ;
	
parallel_clause :
	  "NOPARALLEL" 
	| "PARALLEL" 
		(integer
		| "(" (plsql_identifier numeric)* ")" )? ;	

enable_disable_clause :
	enable_or_disable 
	(validate_or_novalidate)?
	( unique_columns_spec
	| primary_key_spec 
	| "CONSTRAINT" constraint
	)
	(using_index_clause)? 
	(exceptions_clause)? 
	(cascade_tag)? 
	(keep_or_drop_index)? ;

unique_columns_spec :
	"UNIQUE" column_list ;

keep_or_drop_index :
	keep_or_drop "INDEX" ;
	
keep_or_drop :	
	  "KEEP" 
	| "DROP" ;

primary_key_spec :
	"PRIMARY" "KEY" ;

using_index_clause :
	"USING" "INDEX"
	( (schema ".")? index
		| "(" create_index ")"
		| "LOCAL" 
		| global_partitioned_index 
		| ( pctfree_spec
		  | inittrans_spec
		  | maxtrans_spec
		  | tablespace_spec
		  | storage_clause
		  | "NOSORT"
		  | logging_clause 
		  )+ 
	)?;

global_partitioned_index :	
	"GLOBAL" "PARTITION" 
	"BY" "RANGE" column_list
	"(" (global_partitioning_clause)+ ")" ;

global_partitioning_clause :
	"PARTITION" (partition)? 
	"VALUES" "LESS" "THAN" "(" (value)+ ")"
	  (segment_attributes_clause)?;
	  
create_tablespace : 
	"CREATE" ("UNDO")? tablespace_spec
	(datafile_tempfile_clause)?
	(( minimum_extent_clause
	 | blocksize_clause
	 | logging_clause  
	 | force_logging_spec
	 | default_storage_clause
	 | online_or_offline
	 | permanent_or_temporary
	 | extent_management_clause
	 | segment_management_clause
	 )+ )? ;

permanent_or_temporary :
	  "PERMANENT" 
	| "TEMPORARY" ;

extent_management_clause : 
	"EXTENT" "MANAGEMENT" 
	("DICTIONARY" | "LOCAL" 
		("AUTOALLOCATE" | "UNIFORM" (size_spec)? )?);

segment_management_clause :
	"SEGMENT" "SPACE" "MANAGEMENT" ("MANUAL" | "AUTO");

minimum_extent_clause :
	"MINIMUM" "EXTENT" integer ( K_or_M )? ;
	
blocksize_clause :
	"BLOCKSIZE" integer ("K")? ;

create_temporary_tablespace :
	"CREATE" "TEMPORARY" tablespace_spec
	("TEMPFILE" datafile_tempfile_spec)? 
	temp_tablespace_extent ;
	
temp_tablespace_extent :	
	("EXTENT" "MANAGEMENT" "LOCAL")? 
	("UNIFORM" ("SIZE" integer (K_or_M)? )? )? ;

create_trigger :
	"CREATE" ("OR" "REPLACE")? 
	"TRIGGER" qualified_name
	("BEFORE" | "AFTER" | "INSTEAD" "OF")
	( dml_event_clause 
	| (ddl_event "OR")+
	| (database_event "OR")+
	) ("ON" ((schema ".")? "SCHEMA" | "DATABASE"))?
	("WHEN" "(" condition ")")? 
	(call_statement | plsql_block) ;
	
dml_event_clause :
	("DELETE" | "INSERT" | "UPDATE" ("OF" (column ",")+ )? "OR")+
	"ON" (qualified_name | 
		("NESTED" "TABLE" nested_table_column "OF")? qualified_name)
	(referencing_clause)? ("FOR" "EACH" "ROW")? ;
	
ddl_event : 
 	  "ALTER"   | "ANALYZE" | "ASSOCIATE" "STATISTICS"    | "AUDIT"
	| "COMMENT" | "CREATE"  | "DISASSOCIATE" "STATISTICS" | "DROP"
	| "GRANT"   | "NOAUDIT" | "RENAME" | "REVOKE" | "TRUNCATE"
	| "DDL" ;

database_event : 
	  "SERVERERROR" | "LOGON" | "LOGOFF" | "STARTUP"
	| "SHUTDOWN" | "SUSPEND" ;

nested_table_column : plsql_identifier;

referencing_clause : 
	"REFERENCING"
	( "OLD" ("AS")? old 
	| "NEW" ("AS")? new 
	| "PARENT" ("AS")? parent )+ ;

	old 	 : plsql_identifier;
	new 	 : plsql_identifier;
	parent : plsql_identifier;




call_statement :
	"CALL" 
	(object_access_expression 
		| qualified_name ("@" dblink)?
	)
	"(" (expression )+ ")"
	("." simple_expression)?
	("INTO" ":" host_variable 
		(("INDICATOR")? ":" indicator_variable)? )?;

create_cluster :
	"CREATE" "CLUSTER" cluster_name
	"(" (column datatype)+ ")"
	(( physical_attributes_clause
	 | size_spec
	 | tablespace_spec
	 | ("INDEX" | ("SINGLE" "TABLE")? 
	 	"HASHKEYS" integer ("HASH" "IS" expression)?)
	 )+ )?
	(parallel_clause)? 
	(rowdependencies_spec)? 
	(cache_clause)?;

cluster_name :
	qualified_name ;
	
create_type :
	"CREATE" ("OR" "REPLACE")? "TYPE" 
	(schema ".")? type_name		// incomplete type stops here...
	(  create_varray_type
	 | create_nested_table_type 
	 | create_object_type
	)?;
	
create_varray_type :
	("IS" | "AS") 
	("VARRAY" | "VARYING" "ARRAY")
	"(" limit ")" "OF" datatype ;

create_nested_table_type :
	("IS" | "AS") 
	"TABLE" "OF" datatype ;
	
create_object_type :
	(invoker_rights_clause)?
	(("IS" | "AS") "OBJECT"
		| "UNDER" (schema ".")? supertype)
	(sqlj_object_type)?
	("(" (attribute_spec | element_spec )+ ")" )?
	((not_tag)? final_tag)? 
	((not_tag)? instantiable_tag)? ;

invoker_rights_clause :
	"AUTHID" ("CURRENT_USER" | "DEFINER");

attribute_spec :
	attribute 
	datatype 
	(sqlj_object_type_attr)? ;
	
SQLData : 
	"SQLData" "(" ((sql_data_item )+ )? ")"
	((not_tag)? final_tag)? ;

sql_data_item :
	(parameter datatype | subprogram_clauses)
	(sqlj_object_type_sig)?
      ;
	
element_spec :
	(inheritance_clauses)? 
	(  subprogram_clauses 
 	 | constructor_spec 
	 | map_order_function_spec )+
	( (pragma_clause )+ )? ;

inheritance_clauses :
	(not_tag)?
	( overriding_tag
	| final_tag
	| instantiable_tag );
	
subprogram_clauses :	
	member_or_static
	(procedure_spec | function_spec);

member_or_static :
	  "MEMBER" 
	| "STATIC" ;
	
procedure_spec :	
	"PROCEDURE" name 
	("(" arguments ")")?
	( ("IS" | "AS") call_spec )? ;
	
function_spec :	
	"FUNCTION" name 
	("(" arguments ")")?
	return_clause 
	("DETERMINISTIC")? ;
	
	
	
constructor_spec :	
	(final_tag)? (instantiable_tag)? 
	"CONSTRUCTOR" "FUNCTION" datatype 
	( ("SELF" "IN" "OUT" datatype ",")? 
		parameter_list)?
	return_clause ;
	
map_order_function_spec :
	map_or_order
	"MEMBER" function_spec ;
	
map_or_order :	
	  "MAP" 
	| "ORDER" ;
	
return_clause :
	  "RETURN" (self_as_result | datatype)
	  ( ("IS" | "AS") call_spec )?
	  (sqlj_object_type_sig)? ;

self_as_result :
	"SELF" "AS" "RESULT" ;

pragma_clause :
	"PRAGMA" pragma_name 
	("(" (method_name | default_tag) ","
	    (pragma_arg)+
	")" )? ;
	
pragma_arg :
	  "RNDS" 
	| "WNDS" 
	| "RNPS" 
	| "WNPS" 
	| "TRUST" 
	| number
	;

pragma_name : identifier;

call_spec :
	"LANGUAGE" (Java_declaration | C_declaration);
	
Java_declaration :	
	"JAVA" "NAME" squotedstring ;
	
C_declaration :	
	"C" ("NAME" name)? 
	"LIBRARY" lib_name 
	("AGENT" "IN" "(" argument ")" )?
	("WITH" "CONTEXT")? 
	("PARAMETERS" "(" parameters ")" )? ;
	

create_type_body :
	"CREATE" ("OR" "REPLACE")? 
	"TYPE" "BODY" (schema ".")? type_name 
	("IS" | "AS") 
	((
		member_or_static
	      (  procedure_declaration 
	       | function_declaration 
	       | constructor_declaration)
	   |  map_or_order "MEMBER" function_declaration
	)+ )?
	"END" ;
	
procedure_declaration :	
	"PROCEDURE" name 
	( "(" (arguments)? ")" )?
	("IS" | "AS") 
	(plsql_block | call_spec) 
	(";")?; 

function_declaration :
	"FUNCTION" name 
	("(" (arguments)? ")")?
	"RETURN" datatype
	("IS" | "AS") 
	(plsql_block | call_spec) 
	(";")?; 

constructor_declaration :
	(final_tag)? (instantiable_tag)? 
	"CONSTRUCTOR" "FUNCTION" datatype 
	( ("SELF" "IN" "OUT" datatype ",")? 
	parameter_list)?
	"RETURN" self_as_result
	("IS" | "AS") (plsql_block | call_spec)
	(";")?; 

parameter_list :
	(parameter datatype)+ ;

create_package :
	"CREATE" ("OR" "REPLACE")? 
	"PACKAGE" (schema ".")? package
	(invoker_rights_clause)? ("IS" | "AS") 
	plsql_package_spec
	"END" (label_name)? ;
	
plsql_package_spec : 
	(  procedure_spec (";")?
	 | function_spec (";")? 
	 | type_definition (";")?
	 | item_definition (";")?
	 | exception_declaration (";")? 
	 | pragma_clause (";")?
	)+ ;

create_package_body :
	"CREATE" ("OR" "REPLACE")? 
	"PACKAGE" "BODY" (schema ".")? package
	("IS" | "AS") 
	plsql_package_body;

plsql_package_body : 
	(label_name)?
	("DECLARE")? 	
	(type_definition | item_definition)*
	(function_declaration | procedure_declaration)*
	("BEGIN" (statement)* )?
	"END" (label_name)? (";")? ;

create_procedure :
	"CREATE" ("OR" "REPLACE")? 
	"PROCEDURE" (schema ".")? procedure
	("(" arguments ")" )? 
	(invoker_rights_clause)? 
	("IS" | "AS") 
	(plsql_subprogram_body | call_spec) ;
	
create_profile :
	"CREATE" "PROFILE" profile_name "LIMIT" 
	(resource_parameter | password_parameter)+
       ;

create_role :
	"CREATE" "ROLE" role
	(role_identity_clause)? ;

create_user :
	"CREATE" "USER" user_name
	(create_user_option)* ;
	
create_user_option :
	  user_identified_by_clause
	| default_tablespace_clause
	| temporary_tablespace_clause
	| quota_clause
	| profile_clause
	| default_role_clause 
	| password_expire_clause
	| account_lock_clause
	| proxy_clause
	;

user_identified_by_clause :
	"IDENTIFIED"
	( "BY" password ("REPLACE" old_password)?
	| externally_or_globally
	) ;

default_tablespace_clause : 
	"DEFAULT" tablespace_spec ;

temporary_tablespace_clause :
	"TEMPORARY" tablespace_spec ;

profile_clause :
	"PROFILE" profile_name ;
	
default_role_clause :
	"DEFAULT" "ROLE" 
	( (role )+
		| "ALL" ( "EXCEPT" (role)+ )?
	      | "NONE"
	) ;

password_expire_clause :
	"PASSWORD" "EXPIRE" ;
	
account_lock_clause :
	"ACCOUNT" lock_or_unlock ;
	
lock_or_unlock : 
	"LOCK" | "UNLOCK" ;

quota_clause :
	"QUOTA" 
	(integer ( K_or_M )? | "UNLIMITED")
	"ON" tablespace ;
		
create_rollback_segment :
	"CREATE" ("PUBLIC")? 
	"ROLLBACK" "SEGMENT" rollback_segment
	( tablespace_spec | storage_clause )*;

create_schema :
	"CREATE" "SCHEMA" "AUTHORIZATION" schema
	( create_table | create_view | grant_statement )+;

create_view : 
	"CREATE" ("OR" "REPLACE")? 
	(("NO")? "FORCE")? "VIEW" (schema ".")? view
	(view_clause)?
	"AS" subquery (subquery_restriction_clause)?;
	
view_clause :	
	"(" (view_alias (inline_constraint)* 
		| out_of_line_constraint)+ ")"
	| object_view_clause
	| XMLType_view_clause
	;
	
view_alias :
	identifier (? #value !: "CONSTRAINT" );
	
object_view_clause :
	"OF" qualified_name
	(with_object_id_clause
	 | "UNDER" qualified_name)
	("(" (out_of_line_constraint 
		| attribute (inline_constraint)+  )+ ")" )?
	;
	
with_object_id_clause :
	"WITH" "OBJECT" ("IDENTIFIER" | "ID")
	(default_tag | "(" (attribute)+  ")" ) ;
	
create_materialized_view :
	"CREATE" "MATERIALIZED" "VIEW" 
	(schema ".")? materialized_view
	("OF" (schema ".")? object_type)? 
  	("(" scoped_table_ref_constraint ")" )?
  	(("ON" "PREBUILT" "TABLE" 
  		(("WITH" | "WITHOUT") "REDUCED" "PRECISION")?
	 | physical_properties 
	 | materialized_view_props )+ )?
	("USING" "INDEX"
	    ((physical_attributes_clause | tablespace_spec)+ )?
  	 | "USING" "NO" "INDEX")?
  	(mv_refresh)?
  	("FOR" "UPDATE")? 
  	(("DISABLE" | "ENABLE") "QUERY" "REWRITE")? 
  	"AS" subquery;

ref_column 		: plsql_identifier;
ref_attribute 	: plsql_identifier;
scope_table_name 	: plsql_identifier;

scoped_table_ref_constraint :
	("SCOPE" "FOR" "(" (ref_column | ref_attribute) ")" 
	  "IS" (schema ".")? scope_table_name )+ ;
	  
materialized_view_props :
  	( column_properties
	| table_partitioning_clauses
	| cache_or_nocache
	| parallel_clause
	| build_clause
	)+;
	  
cache_or_nocache :	  
	  "CACHE" 
	| "NOCACHE" ;

build_clause :	  
	"BUILD" ("IMMEDIATE" | "DEFERRED");
	  
mv_refresh :
	"REFRESH"
	( ("FAST" | "COMPLETE" | "FORCE")	| "ON" ("DEMAND" | "COMMIT") 
	  | ("START" "WITH" | "NEXT") date 	| "WITH" (primary_key_spec | "ROWID")
	  | "USING" ("DEFAULT" ("MASTER" | "LOCAL")? "ROLLBACK" "SEGMENT"
	  | ("MASTER" | "LOCAL")? "ROLLBACK" "SEGMENT" rollback_segment
	    ) 
	    (("DEFAULT" ("MASTER" | "LOCAL")? "ROLLBACK" "SEGMENT"
	    	| ("MASTER" | "LOCAL")? "ROLLBACK" "SEGMENT" rollback_segment
	    )+ )?
	)+
	| "NEVER" "REFRESH"
	;
	
create_materialized_view_log :
	"CREATE" "MATERIALIZED" "VIEW" "LOG" "ON" (schema ".")? table
	(( physical_attributes_clause
	 | tablespace_spec
	 | logging_clause
	 | cache_or_nocache
	)+ )?
	(parallel_clause)? 
	(table_partitioning_clauses)?
	("WITH" 
	 ( "OBJECT" "ID" 
	  | primary_key_spec
	  | "ROWID" 
	  | "SEQUENCE" 
	  | column_list
	  (",")? )+ 
	 ( new_values_clause )?
	)?;
	
new_values_clause :	
	("INCLUDING" | "EXCLUDING") "NEW" "VALUES" ;
	
grant_statement : 
	"GRANT" 
	( grant_system_privileges 
	| grant_object_privileges
	)+ ;

grant_system_privileges :
	(system_privilege | role | "ALL" "PRIVILEGES" )+
	"TO" grantee_clause ("IDENTIFIED" "BY" password)? 
	("WITH" "ADMIN" "OPTION")? ;

grant_object_privileges :
	((object_privilege | "ALL" ("PRIVILEGES")?)
		(column_list)? )+
	"ON" on_object_clause 
	"TO" grantee_clause 
	("WITH" "GRANT" "OPTION")? 
	("WITH" "HIERARCHY" "OPTION")? ;
	
grantee_clause :
	(user_name | role | "PUBLIC")+ ;

object_privilege : 
	  sql_verb
	| "REFERENCES"
	;

on_object_clause :
	  "DIRECTORY" directory_name
	| "JAVA" ("SOURCE" | "RESOURCE") qualified_name
	| (schema ".")? object_name
	;

set_transaction_statement :
	"SET" "TRANSACTION"
	( (read_write_clause
	  | "ISOLATION" "LEVEL" 
		  ("SERIALIZABLE" | "READ" "COMMITTED")
	  | "USE" "ROLLBACK" "SEGMENT" rollback_segment
	  )
	  ("NAME" string)?
	| "NAME" string
	) ;

revoke_statement :
	"REVOKE" 
	( revoke_system_privileges 
	| revoke_object_privileges )+ 
	;

revoke_system_privileges :
	(  system_privilege 
	 | role 
	 | "ALL" "PRIVILEGES" )+ 
	"FROM" grantee_clause ;

revoke_object_privileges :
	((  object_privilege 
	  | "ALL" ("PRIVILEGES")?) 
	  (column_list)? )+
	"ON" on_object_clause 
	"FROM" grantee_clause 
	(cascade_constraints_tag)? 
	(force_tag)?;

create_snapshot :
	"CREATE" "SNAPSHOT" ("LOG" "ON")? snapshot_name
	(( pctfree_spec
  	 | pctused_spec
  	 | tablespace_spec
  	 | "WITH" ("ROWID" | primary_key_spec | "(" column ")" )+
  	 | refresh_clause
  	 | storage_clause
  	 | using_index_clause
  	)+ )?  	 
  	("AS" subquery)? ;

refresh_clause :
	"REFRESH" 
	(( "FAST" 
	 | "NEXT" expression 
	 | "COMPLETE"
	 | "WITH" "PRIMARY" "KEY"
	 | ("USING")? ("DEFAULT")? ("MASTER" | "LOCAL")? 
	   "ROLLBACK" "SEGMENT" (segment_name)?
	 | "START" "WITH" expression "NEXT" expression
	)+ )?
	;

create_function :
	"CREATE" ("OR" "REPLACE")? 
	"FUNCTION" function_name
	("(" arguments ")")?
	"RETURN" datatype 

	((  invoker_rights_clause 
	 | "DETERMINISTIC" 
	 | parallel_enable_clause )+ )? 
	( ("AGGREGATE" | "PIPELINED") 
	   "USING" implementation_type
	  | ("PIPELINED")? ("IS" | "AS") 
	   (plsql_function_body | call_spec)
	)
	;

parallel_enable_clause :
	"PARALLEL_ENABLE"
	("(" "PARTITION" argument "BY" 
	   ("ANY" | ("HASH" | "RANGE") column_list)
	 ")"
	 (streaming_clause)?
	)?;

streaming_clause :
	("ORDER" | "CLUSTER") "BY" column_list ;

arguments : 
	(argument)+;

argument :
	plsql_identifier 
	(in_out_spec)?
	(nocopy_spec)?
	datatype 
	(argument_default_clause)? ;
	
in_out_spec :
	  "IN" "OUT" 
	| "IN" 
	| "OUT" ;
	
nocopy_spec :	
	"NOCOPY" ;
	
argument_default_clause :
	"DEFAULT"
	expression ;	

plsql_block :
	(label_name )?
	("DECLARE")?
	(( type_definition 
	 | item_definition 
	 | pragma_clause (";")? )+ )?
	((function_declaration | procedure_declaration)+ )?
	"BEGIN" 
		(statement)*
		("EXCEPTION" (exception_handler)+ )?
	"END" (label_name)? (";")?

	;
	
item_definition : 
	item_declaration (";")? ;

ref_cursor_type_definition : 
	"TYPE" identifier "IS" "REF" 

	cursor_declaration ; 
type_definition :
	(
	  record_type_definition
	| ref_cursor_type_definition
	| table_type_definition
	| subtype_definition
	| varray_type_definition
	) ";"
	;

subtype_definition :
	"SUBTYPE" subtype_name "IS" base_type
	("(" constraint ")")? (not_null_spec)?;

constant_declaration :
	constant_name "CONSTANT" datatype 
	(initializer)? ;
	
initializer :	
	(not_null_spec)? 
	(":=" | "=" | default_tag) expression ;

not_null_spec :
	  "NOT_NULL" 
	| "NOT" "NULL" ;
	
item_declaration :
	  variable_declaration		// subsumes object_declaration
	| collection_declaration
	| constant_declaration
	| cursor_declaration
	| exception_declaration
	| record_declaration
	;

table_type_definition :
	"TYPE" type_name "IS" 
	"TABLE" "OF" element_type 
	(not_null_spec)? 
	("INDEX" "BY" "BINARY_INTEGER")?;

varray_type_definition :
	"TYPE" type_name "IS" 
	("VARRAY" | "VARRYING ARRAY") "(" size_limit ")"
	"OF" element_type 
	(not_null_spec)? ;

collection_declaration :
   collection_name type_name ;

element_type :
	  datatype
	| cursor_name "%ROWTYPE"
	| db_table_name ( "%ROWTYPE" | "." column "%TYPE")
	| object_name "%TYPE"
	| ("REF")? object_type_name
	| record_name ("." field_name)? "%TYPE"
	| record_type_name
	| scalar_datatype_name
	| variable_name "%TYPE"
	;

object_type_declaration : 
	"CREATE" ("OR_REPLACE")? 
	"TYPE" (schema_name ".")? type_name
	 ("AUTHID" ("CURRENT_USER" | "DEFINER"))? 
	 ("IS" | "AS") "OBJECT" "(" member_list ")" ;
	 
member_list :
	(attribute_name attribute_type)+ ;

object_type_body :
	"CREATE" ("OR_REPLACE")? 
	"TYPE_BODY" (schema_name ".")? type_name
	("IS" | "AS")
	(member_or_static (subprogram_body | call_spec) ";" )+
	(map_or_order "MEMBER" function_body ";" )? 
	"END" ;

record_type_definition :
	"TYPE" type_name "IS RECORD" 
	"(" (field_declaration )+ ")" ;
	
field_declaration :
	field_name datatype 
	(initializer)? ;
	
record_declaration :
	record_name type_name;

variable_declaration :
	(variable_name )+ datatype 
	(initializer)? ;

cursor_declaration :
	"CURSOR" (cursor_name)?
	("(" (cursor_parameter_declaration)+ ")" )?
	("RETURN" rowtype)? 
	("IS" select_statement)?;

cursor_body :
	"CURSOR" cursor_name 
	("(" (cursor_parameter_declaration )+ ")" )?
	"RETURN" rowtype "IS" select_statement;

cursor_parameter_declaration :
	parameter_name ("IN")? datatype 
	(initializer)? ;
   
rowtype :
	((  db_table_name 
	  | cursor_name 
	  | cursor_variable_name ) "%" "ROWTYPE"
	 | record_name "%" "TYPE"
	 | record_type_name) ;
 
column_list :
	"(" (column )+ ")" ;
	
condition : expression ;

rename_statement : 
	"RENAME" old_name "TO" new_name;
	
create_operator :
	"CREATE" ("OR" "REPLACE")? "OPERATOR"
	qualified_name binding_clause;
	
binding_clause :
	"BINDING" 
	("(" (parameter_type )+ ")" 
		"RETURN" return_type  implementation_clause )+ ;
		
	parameter_type : datatype;
	return_type : datatype;
	
implementation_clause :
	("ANCILLARY" "TO"
	  (primary_operator "(" (parameter_type )+ ")" )+
	| context_clause ("COMPUTE" "ANCILLARY" "DATA")?
	)?
	using_function_clause ;

	primary_operator : plsql_identifier;
	
context_clause :	
	"WITH" "INDEX" "CONTEXT" "," 
	"SCAN" "CONTEXT" implementation_type ;
	
using_function_clause :
	"USING" qualified_name ;

create_context :
	"CREATE" ("OR" "REPLACE")? "CONTEXT" 
	namespace "USING" qualified_name
	("INITIALIZED" externally_or_globally
	| "ACCESSED" "GLOBALLY")?
	;

	namespace : identifier;

create_controlfile :
	"CREATE" "CONTROLFILE" (reuse_tag)?
	("SET")? "DATABASE" database
	(( 
	   logfile_clause
	 | resetlogs_spec
	 | datafile_tempfile_clause
	 | maxlogfiles_spec
	 | maxlogmembers_spec
	 | maxloghistory_spec
	 | maxdatafiles_spec
	 | maxinstances_spec
	 | archivelog_spec
	 | force_logging_spec
	 )+ )?
	(character_set_clause)?;

maxlogfiles_spec :
	"MAXLOGFILES" integer ;

maxlogmembers_spec :
	"MAXLOGMEMBERS" integer ;
	
maxloghistory_spec :	
	"MAXLOGHISTORY" integer ;
	
maxdatafiles_spec :
	"MAXDATAFILES" integer ;
	
maxinstances_spec :
	"MAXINSTANCES" integer ;
	
logfile_clause :
	"LOGFILE" ((logfile_group_spec)? redo_log_file_spec )+ ;
	
logfile_group_spec :
	"GROUP" integer ;
	
force_logging_spec :
	("NO")? "FORCE" "LOGGING" ;
	
character_set_clause :	
	("NATIONAL")? "CHARACTER" "SET" character_set ;

create_index :
	"CREATE" ("UNIQUE" | "BITMAP")? "INDEX"
	(schema ".")? index "ON"
	(  cluster_index_clause 
	 | table_index_clause 
	 | bitmap_join_index_clause);

cluster_index_clause :
	"CLUSTER" (schema ".")? cluster index_attributes ;

table_index_clause :
	(schema ".")? table (t_alias)? 
	"(" (index_expr (ascending_or_descending)? )+ ")"
	((   global_partitioned_index 
	  | local_partitioned_index
	  | index_attributes 
	  | domain_index_clause
	)+ )?;

bitmap_join_index_clause :
	(schema ".")? table 
	"(" ((schema ".")? (table)? 
		column (ascending_or_descending)? )+ ")"
	from_clause
	where_clause
	(local_partitioned_index)? 
	index_attributes ;
	
index_expr :
	expression ;

index_attributes :
	(( physical_attributes_clause
	 | logging_clause
	 | online_tag
	 | compute_statistics_tag
	 | "TABLESPACE" (tablespace | default_tag)
	 | key_compression
	 | "NOSORT" 
	 | "REVERSE"
	 | parallel_clause
	 )+ )?;

local_partitioned_index :
	"LOCAL"
	( 
	  on_comp_partitioned_table
	| on_range_partitioned_table
	| on_list_partitioned_table
	| on_hash_partitioned_table
	)?;

domain_index_clause :
	"INDEXTYPE" "IS" indextype 
	(parallel_clause)? 
	("PARAMETERS" "(" squotedstring ")" )? ;
	
on_range_partitioned_table :
	"(" (
		"PARTITION" (partition 
			((segment_attributes_clause)+ )? )? 
	     )+ 
	")" ;
	
on_list_partitioned_table :
	"(" (
		"PARTITION" (partition 
			((segment_attributes_clause)+ )? )? 
	     )+ 
	")" ;
	
on_hash_partitioned_table : 
	  store_in_clause
	| "(" ("PARTITION" (partition 
		(tablespace_spec)? )? )+ ")"
	;
	
on_comp_partitioned_table :
	(store_in_clause)?
	"(" ("PARTITION" 
	   (partition (segment_attribute_clause)*
	   (index_subpartition_clause)? )? )+
	 ")";
	
index_subpartition_clause :
	  store_in_clause
	| "(" ("SUBPARTITION" (subpartition (tablespace_spec)? )? )+ ")" ;

store_in_clause :
	"STORE" "IN" "(" ((tablespace)+ | default_tag) ")" ;

create_indextype :
	"CREATE" ("OR" "REPLACE")? "INDEXTYPE"
	indextype_name "FOR"
	((schema ".")? operator_name "(" (paramater_type)+ ")" )+
	"USING" implementation_type;

	indextype_name : qualified_name ;
	paramater_type : datatype;


create_database :
	"CREATE" "DATABASE" (database)?
	(( "USER" ("SYS" | "SYSTEM") 
		"IDENTIFIED" "BY" password
	| "CONTROLFILE" "REUSE"
	| "LOGFILE" ((logfile_group_spec)? redo_log_file_spec)+
	| maxlogfiles_spec
	| maxlogmembers_spec
	| maxloghistory_spec
	| maxdatafiles_spec
	| maxinstances_spec
	| archivelog_spec
	| force_logging_spec
	| character_set_clause
	| datafile_tempfile_clause
	| extent_management_local_spec
	| default_temp_tablespace
	| undo_tablespace_clause
	| set_time_zone_clause
	)+ )? ;

default_temp_tablespace :
	"DEFAULT" "TEMPORARY" 
	tablespace_spec
	("TEMPFILE" datafile_tempfile_spec)? 
	temp_tablespace_extent_clause ;
	
temp_tablespace_extent_clause :	
	(extent_management_local_spec)?
	("UNIFORM" (size_spec)? )? ;
	
extent_management_local_spec :
	"EXTENT" "MANAGEMENT" "LOCAL"	;
	
undo_tablespace_clause :	
	"UNDO" tablespace_spec
	(datafile_tempfile_clause)? ;

create_database_link :
	"CREATE" ("SHARED")? ("PUBLIC")? 
	"DATABASE" "LINK" dblink
	("CONNECT" "TO" 
		( "CURRENT_USER" 
		| user_name "IDENTIFIED" 
		  "BY" password (authenticated_clause)? )
	| authenticated_clause
	)? 
	("USING" connect_string)?;

connect_string : string;

authenticated_clause :
	"AUTHENTICATED" "BY" user_name
	"IDENTIFIED" "BY" password ;
	
create_dimension :
	"CREATE" "DIMENSION" qualified_name  	(level_clause)+
	(hierarchy_clause | attribute_clause)+ ;

create_directory :
	"CREATE" ("OR" "REPLACE")? "DIRECTORY"
	 directory "AS" path_name;
	 
	 path_name : string;

create_library :
	"CREATE" ("OR" "REPLACE")? 
	"LIBRARY" qualified_name
	("IS" | "AS") filename 
	("AGENT" agent_dblink)?;

create_outline :
	"CREATE" ("OR" "REPLACE")? 
	("PUBLIC" | "PRIVATE")? 
	"OUTLINE" (outline)?
	("FROM" ("PUBLIC" | "PRIVATE" )? source_outline)?
	("FOR" "CATEGORY" category)?
	("ON" statement)? ;
	
	source_outline : plsql_identifier;
	category : plsql_identifier;

agent_dblink : string;

create_synonym :
	"CREATE" ("OR" "REPLACE")? ("PUBLIC")? 
	"SYNONYM" synonym_name
	"FOR" qualified_name ("@" dblink)?;

synonym_name : qualified_name ;

create_pfile :
	"CREATE" "PFILE" ("=" pfile_name)? 
	"FROM" "SPFILE" ("=" spfile_name)?;
	
	pfile_name : string;
	spfile_name : string;

alter_database_statement :
	"ALTER" "DATABASE" (database)?
	( startup_clauses
	| recovery_clauses 
	| database_file_clauses
	| logfile_clauses
	| controlfile_clauses
	| standby_database_clauses
	| default_settings_clauses
	| conversion_clauses
	| redo_thread_clauses
	| security_clause
	) ;

startup_clauses :
	  startup_mount_clause
	| startup_open_clause 
	;
	
startup_mount_clause :		   
	"MOUNT" (startup_mount_option "DATABASE")? ;
	
startup_mount_option :
	  "STANDBY"
	| "CLONE" ;

startup_open_clause :	
	"OPEN" 
	read_write_clause
	(resetlogs_spec)?
	(migrate_clause)? ;

migrate_clause :
	"MIGRATE" ;

recovery_clauses :
	  general_recovery
	| managed_standby_recovery
	| end_backup_tag
	;

general_recovery :
	"RECOVER" ("AUTOMATIC")? ("FROM" location)?
	(( full_database_recovery
	  | partial_database_recovery
	  | "LOGFILE" filename
	  )
	  (( "TEST" 
	   | "ALLOW" integer "CORRUPTION" 
	   | parallel_clause)+ )?
	| "CONTINUE" (default_tag)?
	| "CANCEL"
	);

location : string;

full_database_recovery :
	((("STANDBY")? "DATABASE")?
	(("UNTIL" 
		(  "CANCEL" 
		 | "TIME" date 
		 | "CHANGE" integer )
	 | "USING" "BACKUP" "CONTROLFILE" 
	)+ )? ) <1,> ;

	date 	     : expression;
	filenumber : numeric;
	
datafile_tempfile_clause :
	"DATAFILE" (datafile_tempfile_spec)+ ;
	
datafile_tempfile_spec :
	string 
	((  size_spec
	  | reuse_tag
	  | autoextend_clause
	)+ )?
	| autoextend_clause ;

redo_log_file_spec : 
	( log_file_name | "(" (log_file_name )+ ")")
	(size_spec)? ;

log_file_name :
	string ;
	
partial_database_recovery :
	  "TABLESPACE" (tablespace )+
	| datafile_filename_number_clause
	| "STANDBY" 
		("TABLESPACE" (tablespace )+
		| datafile_filename_number_clause
		"UNTIL" ("CONSISTENT" "WITH")? "CONTROLFILE")
	;
	
datafile_filename_number_clause :	
	"DATAFILE" ((filename )+ | (filenumber )+) ;

managed_standby_recovery :
	"RECOVER" "MANAGED" "STANDBY" "DATABASE"
	  (recover_clause | cancel_clause | finish_clause)?;

recover_clause :
	( 
	  recover_disconnect_clause
	| recover_timeout_clause
	| recover_delay_clause
	| recover_expire_clause
	| recover_next_clause 
	| recover_through_clause 
	| parallel_clause
	)+ ;

recover_disconnect_clause : 
	"DISCONNECT" (from_session)? ;

recover_delay_clause :
	  "NODELAY" 
	| "DEFAULT" "DELAY" 
	| "DELAY" integer ;
	
recover_timeout_clause :	
	  "TIMEOUT" integer 
	| "NOTIMEOUT" ;

recover_expire_clause :
	  "EXPIRE" integer 
	| "NO" "EXPIRE" ;
	
recover_next_clause : 
	"NEXT" integer ;

recover_through_clause :
	"THROUGH" 
	(( "THREAD" integer )? "SEQUENCE" integer
	  | "ALL" "ARCHIVELOG"
	  | ("ALL" | "LAST" | "NEXT") "SWITCHOVER"
	);
	
cancel_clause :
	"CANCEL" ("IMMEDIATE")? ("NOWAIT")?;

finish_clause :
	("DISCONNECT" (from_session)?)? 
	(parallel_clause)? 
	"FINISH" ("SKIP" ("STANDBY" "LOGFILE")?)? 
	("WAIT" | "NOWAIT")? ;
	
database_file_clauses :
	  "CREATE" "DATAFILE" 
	  ((filename)+ | (filenumber)+ ) 	  ("AS" ((datafile_tempfile_spec)+ |"NEW"))?
	| datafile_filename_number_clause
	  ( online_or_offline
	  | resize_clause
	  | autoextend_clause
	  | end_backup_tag
	  )
	| "TEMPFILE" ((filename)+ | (filenumber)+ )
	  ( resize_clause
	  | autoextend_clause
	  | "DROP" ("INCLUDING" "DATAFILES")?
	  | online_or_offline
	  )
	| "RENAME" "FILE" (filename)+ "TO" filename
	;

resize_clause :
	"RESIZE" integer (K_or_M)? ;
	
autoextend_clause :
	"AUTOEXTEND" ("OFF" | "ON" 
		("NEXT" integer (K_or_M)?)? 
	(maxsize_clause)?);
	
maxsize_clause :
	"MAXSIZE" ("UNLIMITED" | integer (K_or_M)?);
	
logfile_clauses :
    	  archivelog_spec
	| force_logging_spec
	| "ADD" ("STANDBY")? "LOGFILE" ("THREAD" integer)?
	  ((logfile_group_spec)? redo_log_file_spec )+
	  (size_spec)?
	| "DROP" ("STANDBY")? "LOGFILE" (logfile_descriptor)+
	| "ADD" ("STANDBY")? "LOGFILE" "MEMBER" (filename (reuse_tag)? )+
	  "TO" (logfile_descriptor)+
	| "DROP" ("STANDBY")? "LOGFILE" "MEMBER" (filename )+
	| "ADD" "SUPPLEMENTAL" "LOG" "DATA" 
	   ( "(" (primary_key_spec | "UNIQUE" "INDEX" )+ ")" "COLUMNS" )?
	| "DROP" "SUPPLEMENTAL" "LOG" "DATA"
	| "RENAME" "FILE" (filename )+ "TO" filename
	| "CLEAR" ("UNARCHIVED")? "LOGFILE"
	  (logfile_descriptor)+ ("UNRECOVERABLE" "DATAFILE")?
	;

logfile_descriptor :	
	  logfile_group_spec
	| "(" (filename )+ ")"
	| filename
	;

controlfile_clauses :
	  "CREATE" "STANDBY" "CONTROLFILE" "AS" filename (reuse_tag)?
	| "BACKUP" "CONTROLFILE" "TO" 
	  (filename (reuse_tag)? | trace_file_clause)
	;
	
trace_file_clause :
	"TRACE" (resetlogs_spec)? ;
	
standby_database_clauses :
	( "ACTIVATE" ("PHYSICAL" | "LOGICAL")? 
	  "STANDBY" "DATABASE" ("SKIP" ("STANDBY" "LOGFILE")?)?
	| "SET" "STANDBY" "DATABASE" "TO" "MAXIMIZE"
	    ("PROTECTION" | "AVAILABILITY" | "PERFORMANCE")
	| "REGISTER" ("OR" "REPLACE")? ("PHYSICAL" | "LOGICAL")? "LOGFILE"
	                    ((redo_log_file_spec )+ )?
	| commit_switchover_clause
	| "START" "LOGICAL" "STANDBY" "APPLY"
	     ("NEW" "PRIMARY" dblink | "INITIAL" (scn_value)?)
	| ("STOP" | "ABORT") "LOGICAL" "STANDBY" "APPLY"
	)
	(parallel_clause)? ;

	scn_value 	  : expression;
	character_set : plsql_identifier;

commit_switchover_clause :
	"COMMIT" "TO" "SWITCHOVER" "TO"
	("PHYSICAL" | "LOGICAL") ("PRIMARY" | "STANDBY")
	(("WITH" | "WITHOUT") "SESSION" "SHUTDOWN")?

	("WAIT" | "NOWAIT")? ;

default_settings_clauses :	
	  character_set_clause
	| set_time_zone_clause
	| "DEFAULT" "TEMPORARY" tablespace_spec
	| "RENAME" "GLOBAL_NAME" "TO" database "." (domain".")+
	;

set_time_zone_clause :
	"SET" "TIME_ZONE" "=" string ;	
	// ' ( ( + | - )+ hh : mi | time_zone_region )+ '

conversion_clauses :	
	  "RESET" "COMPATIBILITY" 
	| "CONVERT" 
	;

redo_thread_clauses :
	  "ENABLE" ("PUBLIC")? "THREAD" integer 
	| "DISABLE" "THREAD" integer
	;

security_clause :	
	"GUARD" ("ALL" | "STANDBY" | "NONE");

alter_cluster_statement :
	"ALTER" "CLUSTER" (schema ".")? cluster
	( physical_attributes_clause
	| size_spec
	| allocate_extent_clause
	| deallocate_unused_clause
	| cache_clause
	)+
	(parallel_clause)?
	;

allocate_extent_clause :
	"ALLOCATE" "EXTENT"
	("(" (size_spec
	   | "DATAFILE" filename
	   | "INSTANCE" integer )+
	 ")"
	)?;
	
deallocate_unused_clause :
	"DEALLOCATE" "UNUSED"
	("KEEP" integer ( K_or_M )? )? ;

alter_dimension_statement :
	"ALTER" "DIMENSION" qualified_name
	( "ADD"
	      ( level_clause
	      | hierarchy_clause
	      | attribute_clause
	      )
	| "DROP"
	      ("LEVEL" level ("RESTRICT" | cascade_tag)?
	      | "HIERARCHY" hierarchy
	      | "ATTRIBUTE" level
	      )
	| compile_clause
	)+;
	
level_clause :	
	"LEVEL" level "IS" 
	( table "." column 
	| "(" (table "." column )+ ")"
	);
	
hierarchy_clause :
	"HIERARCHY" hierarchy 
	"(" child_level ("CHILD" "OF" parent_level)+
	    (join_clause)? ")";
	
join_clause :
	("JOIN" "KEY" 
	(child_key_column | "(" (child_key_column )+ ")")
		"REFERENCES" parent_level )+ ;

attribute_clause :		
	"ATTRIBUTE" level "DETERMINES"
	(dependent_column | "(" (dependent_column "," )+ ")" ) ;

level : identifier;
child_level : level;
parent_level : level;
hierarchy : identifier;
child_key_column : column;
dependent_column : column;

alter_function_statement : 
	"ALTER" "FUNCTION" (schema ".")? function_name
	compile_clause (reuse_settings)?;

alter_procedure_statement : 
	"ALTER" "PROCEDURE" (schema ".")? procedure_name 
	compile_clause (reuse_settings)?;

alter_profile_statement :
	"ALTER" "PROFILE" profile_name "LIMIT" 
	(resource_parameter | password_parameter)+ ;
	
resource_parameter :	
	  resource_parameter_name 
	  resource_parameter_value ;
	
resource_parameter_name :
	  "SESSIONS_PER_USER"
	| "CPU_PER_SESSION"
	| "CPU_PER_CALL"
	| "CONNECT_TIME"
	| "IDLE_TIME"
	| "LOGICAL_READS_PER_SESSION"
	| "LOGICAL_READS_PER_CALL"
	| "COMPOSITE_LIMIT"
	| "PRIVATE_SGA"
	;

resource_parameter_value :
	  integer (K_or_M)?
	| "UNLIMITED" 
	| default_tag ;

password_parameter :
	password_parameter_name
	password_parameter_value ;

password_parameter_name :
	  "FAILED_LOGIN_ATTEMPTS"
	| "PASSWORD_LIFE_TIME"
	| "PASSWORD_REUSE_TIME"
	| "PASSWORD_REUSE_MAX"
	| "PASSWORD_LOCK_TIME"
	| "PASSWORD_GRACE_TIME"
	| "PASSWORD_VERIFY_FUNCTION"
	;

password_parameter_value :
	  "UNLIMITED" 
	| default_tag 
	| expression
	| function
	| null_tag
	; 
	
alter_index_statement :
	"ALTER" "INDEX" (schema ".")? index
	(( deallocate_unused_clause 
	| allocate_extent_clause
	| parallel_clause
	| physical_attributes_clause
	| logging_clause
	| rebuild_clause
	| "PARAMETERS" "(" alter_index_params ")"
	| enable_or_disable
	| unusable_tag
	| rename_partition_clause
	| coalesce_tag
	| monitoring_spec "USAGE"
	| update_block_references_tag
	| alter_index_partitioning
	)+ )? 
	;
	
rename_partition_clause :
	"RENAME" ("PARTITION" partition)? "TO" new_name ;

	alter_index_params : string;	
	new_name : identifier;

rebuild_clause :
	"REBUILD"
	(   "PARTITION" partition 
	  | "SUBPARTITION" subpartition
	  | rebuild_reverse_clause
	)?
	((  parallel_clause
	  | tablespace_spec
	  | "PARAMETERS" "(" rebuild_paramaters ")"
	  | online_tag
	  | compute_statistics_tag
	  | physical_attributes_clause
	  | key_compression
	  | logging_clause
	)+ )? ;
	
	rebuild_paramaters : string;
	
	rebuild_reverse_clause :
	    "REVERSE" 
	  | "NOREVERSE" ;
	
alter_index_partitioning :
	  modify_index_default_attrs
	| modify_index_partition
	| rename_index_partition
	| drop_index_partition
	| split_index_partition
	| modify_index_subpartition
	;

modify_index_default_attrs :
	"MODIFY" "DEFAULT" "ATTRIBUTES" ("FOR" "PARTITION" partition)?
	( physical_attributes_clause
	| "TABLESPACE" (tablespace | default_tag)
	| logging_clause
	)+ ;

modify_index_partition :
	"MODIFY" "PARTITION" partition
	( ( physical_attributes_clause
	  | logging_clause
	  | deallocate_unused_clause
	  | allocate_extent_clause
	  )+ 
	| "PARAMETERS" "(" alter_partition_params ")"
	| coalesce_tag
	| update_block_references_tag
	| unusable_tag
	);

	alter_partition_params : string;
	partition_name : identifier;
	partition_name_old : identifier;

rename_index_partition :
	"RENAME" 
	(  "PARTITION" partition 
	 | "SUBPARTITION" subpartition) 
	"TO" new_name ;
	
drop_index_partition :	
	"DROP" "PARTITION" partition_name ;

	
split_index_partition :	
	"SPLIT" "PARTITION" partition_name_old 
	"AT" "(" (value )+ ")"
	("INTO" "(" (index_partition_description )+ ")")? 
	(parallel_clause)?;
	
index_partition_description :
	"PARTITION" 
	(partition (( segment_attributes_clause 
			| key_compression )+ )? )? ;

modify_index_subpartition :
	"MODIFY" "SUBPARTITION" subpartition 
	( unusable_tag
	| allocate_extent_clause
	| deallocate_unused_clause
	);

alter_indextype_statement :
	"ALTER" "INDEXTYPE" qualified_name
	( (("ADD" | "DROP") (schema ".")? operator_name 
	"(" parameter_types ")" )+
	  (using_type_clause)?
	| compile_clause
	)+ ;
	

	operator_name : plsql_identifier;
	parameter_types : (identifier)+;

using_type_clause :
	"USING" qualified_name;
	
alter_operator_statement :
	"ALTER" "OPERATOR" 
	(schema ".")? operator_name "COMPILE";
	
alter_outline_statement :
	"ALTER" "OUTLINE" ("PUBLIC" | "PRIVATE")? outline
	  ( rebuild_tag
	  | "RENAME" "TO" new_outline_name
	  | "CHANGE" "CATEGORY" "TO"  new_category_name
	  )+ ;
	
	outline : plsql_identifier;
	new_outline_name : plsql_identifier;
	new_category_name : plsql_identifier;
	
alter_package_statement :
	"ALTER" "PACKAGE" (schema ".")? package 
	compile_clause
	("PACKAGE" | "SPECIFICATION" | "BODY")? 
	(reuse_settings)? ;

alter_resource_statement :
	"ALTER" "RESOURCE" "COST"
	(alter_resource_clause)+ ;
	
alter_resource_clause :	
	resource_name resource_value ;
	
resource_name :
	  "CPU_PER_SESSION"
	| "CONNECT_TIME"
	| "LOGICAL_READS_PER_SESSION"
	| "PRIVATE_SGA" ;

resource_value :
	integer ;	
	
alter_role_statement :
	"ALTER" "ROLE" role 
	role_identity_clause ;
	
role_identity_clause :
	  not_identified_spec 
	| "IDENTIFIED" 
		("BY" password 
		 | using_package_clause 
		 | externally_or_globally) ;

externally_or_globally :
	  "EXTERNALLY" 
	| "GLOBALLY" ("AS" external_name)? ;
		 
not_identified_spec :		 
	"NOT" "IDENTIFIED" ;

using_package_clause :
	"USING" qualified_name ;

alter_rollback_statement :
	"ALTER" "ROLLBACK" "SEGMENT" rollback_segment
	( online_or_offline 
	| storage_clause
	| shrink_clause
	)
	;
	
shrink_clause :	
	"SHRINK" ("TO" integer ( K_or_M )? )?	;

alter_sequence_statement :
	"ALTER" "SEQUENCE" (schema ".")? sequence
	( increment_by_clause 
	| maxvalue_clause 
	| minvalue_clause 
	| cycle_or_nocycle
	| cache_clause
	| order_or_noorder
	)+ 
	;

increment_by_clause :
	"INCREMENT" "BY" integer ;

maxvalue_clause :
	  "MAXVALUE" integer 
	| "NOMAXVALUE" ;
	
minvalue_clause :
	  "MINVALUE" integer 

	| "NOMINVALUE" ;
	
cycle_or_nocycle :
	  "CYCLE" 
	| "NOCYCLE" ;

order_or_noorder :
	  "ORDER" 
	| "NOORDER" ;
	
alter_session_statement :
	"ALTER" "SESSION"
	("ADVISE" ("COMMIT" | "ROLLBACK" | "NOTHING") 
	| "CLOSE" "DATABASE" "LINK" dblink 
	| enable_or_disable "COMMIT" "IN" "PROCEDURE" 
	| ("ENABLE" | "DISABLE" | "FORCE") 
	   "PARALLEL" ("DML" | "DDL" | "QUERY") 
	   ("PARALLEL" integer)?
	| ("ENABLE" "RESUMABLE" ("TIMEOUT" integer)? ("NAME" string)? 
	   | "DISABLE" "RESUMABLE")
	| alter_session_set_clause
	)
	;

alter_session_set_clause :
	"SET" (parameter_name ("=")? parameter_value)+ 
	("COMMENT" "=" string)? ;

alter_snapshot_statement :
	"ALTER" "SNAPSHOT" 
	("LOG" "ON")?
	snapshot_name
	(refresh_clause)?
	("ADD" "PRIMARY" "KEY")?
	(storage_clause)? ;

alter_system_statement :
	"ALTER" "SYSTEM"
	( archive_log_clause 
	| "CHECKPOINT" ( "GLOBAL" | "LOCAL" )?
	| "CHECK" "DATAFILES" ( "GLOBAL" | "LOCAL" )?  
	| enable_or_disable "DISTRIBUTED" "RECOVERY" 
	| enable_or_disable "RESTRICTED" "SESSION" 
	| "FLUSH" "SHARED_POOL" 
	| end_session_clauses 
	| "SWITCH" "LOGFILE"
	| ("SUSPEND" | "RESUME")
	| ("QUIESCE" "RESTRICTED" | "UNQUIESCE")
	| "SHUTDOWN" ("IMMEDIATE")? dispatcher_name
	| "REGISTER"
	| "SET" (alter_system_set_clause (",")? )+
	| "RESET" (alter_system_set_clause (",")? )+
	)
	;
	
end_session_clauses :
	("DISCONNECT" "SESSION" string  ("POST_TRANSACTION")?
	| "KILL" "SESSION" string
	)
	("IMMEDIATE")?;
	
archive_log_clause :
	"ARCHIVE" "LOG" ("THREAD" integer)?
	( ( "SEQUENCE" integer
	  | "CHANGE" integer
	  | "CURRENT" ("NOSWITCH")? 
	  | logfile_group_spec
	  | "LOGFILE" filename ("USING" "BACKUP" "CONTROLFILE")?
	  | "NEXT" 
	  | "ALL"
	  | "START"

	  )
	  ("TO" location)?
	| "STOP"
	);

	dispatcher_name : identifier;

alter_system_set_clause :
	parameter_name ("=")? (parameter_value )+
	("COMMENT" string)? ("DEFERRED")?
	("SCOPE" "=" ("MEMORY" | "SPFILE" | "BOTH"))? 
	("SID" "=" (string | "*") )?;


alter_table_statement :
	"ALTER" "TABLE" (schema ".")? table
	( alter_table_properties
	| column_clauses
	| constraint_clauses
	| alter_table_partitioning

	| alter_external_table_clauses
	| move_table_clause
	)?
	(( enable_disable_clause 
	 | enable_or_disable ("TABLE" "LOCK" | "ALL" "TRIGGERS")
	 )+ )?
	;

alter_table_properties :
	((
	  ( physical_attributes_clause
	  | logging_clause
	  | data_segment_compression
	  | supplemental_lg_grp_clauses
	  | allocate_extent_clause
	  | deallocate_unused_clause
	  | cache_clause
	  | monitoring_spec
	  | upgrade_table_clause
	  | records_per_block_clause
	  | parallel_clause
	  | row_movement_clause
	  )+
	| "RENAME" "TO" new_table_name
	)? 
	(alter_iot_clauses)?) <1,> ;
	
column_clauses :
	(   add_column_clause
	  | modify_column_clause
	  | drop_column_clause
	)+
	| rename_column_clause
	| (modify_collection_retrieval)+
	| modify_LOB_storage_clause
	| alter_varray_col_properties 
	;

add_column_clause :
	"ADD" 
	(
		"(" (  column datatype (default_tag expression)? 
		      ((inline_constraint)+ )?
		      (inline_ref_constraint)? 
			 "," )+  
		")"
	|
		column datatype (default_tag expression)? 
	      ((inline_constraint)+)?
	      (inline_ref_constraint)? 	
	)
	(column_properties)? ;
	
modify_column_clause :	
	"MODIFY" 
	( modify_col_properties 
	| substitutable_clause );
	
modify_col_properties :	
	"(" 
		(column (datatype)? (default_tag expression)? 
			((inline_constraint )+ )? )+
	")"
	( modify_LOB_storage_clause )? ;

substitutable_clause :
	(not_tag)? "SUBSTITUTABLE" 
	"AT" "ALL" "LEVELS" (force_tag)? ;

drop_column_clause :
	 "SET" "UNUSED" ("COLUMN" column | column_list)
	  ((cascade_constraints_tag | "INVALIDATE")+ )?
	| "DROP" ("COLUMN" column | column_list)
	  ((cascade_constraints_tag | "INVALIDATE")+ )?
	  ("CHECKPOINT" integer)?
	| "DROP" ("UNUSED" "COLUMNS" | "COLUMNS" "CONTINUE")
	  ("CHECKPOINT" integer)?
	;
	
rename_column_clause :
	"RENAME" "COLUMN" old_name "TO" new_name ;

modify_collection_retrieval :
	"MODIFY" "NESTED" "TABLE" collection_item 
	"RETURN" "AS" ("LOCATOR" | "VALUE");
	
constraint_clauses :
	 "ADD" 
	 ( (out_of_line_constraint)+
	   | out_of_line_REF_constraint
	   | "(" (out_of_line_constraint)+ ")"
	   | "(" out_of_line_REF_constraint ")"
	 )
	| "MODIFY" "CONSTRAINT" constraint constraint_state
	| "RENAME" "CONSTRAINT" old_name "TO" new_name
	| drop_constraint_clause
	;

drop_constraint_clause :
	"DROP"
	( (primary_key_spec | unique_columns_spec)
	  (cascade_tag)? (keep_or_drop_index)?
	| "CONSTRAINT" constraint (cascade_tag)?
	);
	
alter_table_partitioning :
	  modify_table_default_attrs
	| set_subpartition_template
	| modify_table_partition
	| modify_table_subpartition
	| move_table_partition
	| move_table_subpartition
	| add_table_partition
	| coalesce_table_partition
	| drop_table_partition
	| drop_table_subpartition
	| rename_partition_subpart
	| truncate_partition_subpart
	| split_table_partition
	| split_table_subpartition
	| merge_table_partitions
	| merge_table_subpartitions
	| exchange_partition_subpart
	;

modify_table_default_attrs :
	"MODIFY" "DEFAULT" "ATTRIBUTES" 
	("FOR" "PARTITION" partition)? 
	(segment_attributes_clause)? 
	(data_segment_compression)?
	(pctthreshold_clause)?
	(key_compression)? 
	(alter_overflow_clause)? 
	((("LOB" "(" LOB_item ")" | "VARRAY" varray) 
		"(" LOB_parameters ")")+ )?;

alter_overflow_clause :
	"OVERFLOW"
	(  allocate_extent_clause 
	 | deallocate_unused_clause)+
	| add_overflow_clause ;
	
add_overflow_clause :
	"ADD" "OVERFLOW" (segment_attributes_clause)?
	("(" ("PARTITION" (segment_attributes_clause)? )+ ")" )? ;
	
set_subpartition_template :
	"SET" "SUBPARTITION" "TEMPLATE"
	(
		"(" ( "SUBPARTITION" subpartition 
			(list_values_clause)? 
			(partitioning_storage_clause)?
			
		    )+
		")"
	| hash_subpartition_quantity
	);

modify_table_partition :
	  modify_range_partition 
	| modify_hash_partition 
	| modify_list_partition 
	;

modify_range_partition :

	"MODIFY" "PARTITION" partition
	  ( partition_attributes
	  | add_hash_subpartition 
	  | add_list_subpartition
	  | "COALESCE" "SUBPARTITION" 
	    (update_global_index_clause)?
	    (parallel_clause)?
	  | alter_mapping_table_clause
	  | unusable_local_indexes_clause
	  );
	  
partition_attributes :
	((( physical_attributes_clause
	 | logging_clause
	 | allocate_extent_clause 
	 | deallocate_unused_clause
	 )+ )? 
	("OVERFLOW"
	 ( physical_attributes_clause
	 | logging_clause
	 | allocate_extent_clause
	 | deallocate_unused_clause 
	 )+ )? 
	( data_segment_compression )?
	(( ("LOB" LOB_item | "VARRAY" varray) 
		modify_LOB_parameters )+ )? ) <1,> ;
	  
add_hash_subpartition :
	"ADD" subpartition_spec
	(update_global_index_clause)? 
	(parallel_clause)?;

add_list_subpartition :
	"ADD" subpartition_spec ;


update_global_index_clause :
	("UPDATE" | "INVALIDATE") "GLOBAL" "INDEXES" ;

alter_mapping_table_clause :
	"MAPPING" "TABLE"
	( update_block_references_tag
	| allocate_extent_clause
	| deallocate_unused_clause
	);

modify_hash_partition :	  
	"MODIFY" "PARTITION" partition
	  ( partition_attributes
	  | alter_mapping_table_clause
	  | unusable_local_indexes_clause
	  );

modify_list_partition :
	"MODIFY" "PARTITION" partition
	  ( partition_attributes
	  | ("ADD" | "DROP") "VALUES" "(" (partition_value)+ ")"
	  | unusable_local_indexes_clause
	  );

modify_table_subpartition :
	"MODIFY" "SUBPARTITION" subpartition 
	( modify_hash_subpartition 
	| modify_list_subpartition );
	
modify_hash_subpartition :
	( ( (allocate_extent_clause | deallocate_unused_clause)
	  | (("LOB" LOB_item | "VARRAY" varray) modify_LOB_parameters)+
	  )
	| unusable_local_indexes_clause
	);
	
modify_list_subpartition :
	(allocate_extent_clause | deallocate_unused_clause)
	| (("LOB" LOB_item | "VARRAY" varray) modify_LOB_parameters)+
	| unusable_local_indexes_clause
	| ("ADD" | "DROP") "VALUES" (value)+
	;	
	
move_table_partition :
	"MOVE" "PARTITION" partition 
	("MAPPING" "TABLE")? 
	(table_partition_description)? 
	(update_global_index_clause)? 
	(parallel_clause)? ;
	
move_table_subpartition :
	"MOVE" "SUBPARTITION" subpartition 
//	subpartition_attributes
	(update_global_index_clause)? 
	(parallel_clause)?;

partition_spec :
	"PARTITION" partition 
	(tablespace_spec)?
	(( LOB_storage_clause 
	 | "(" minextents_spec ")" )+ )? ;

add_table_partition :
	  add_range_partition_clause
	| add_hash_partition_clause
	| add_list_partition_clause
	;

add_range_partition_clause :
	"ADD" "PARTITION" (partition)? 
	range_values_clause 
	(table_partition_description)?;

add_hash_partition_clause :
	"ADD" "PARTITION" (partition)? 
	partitioning_storage_clause
	(update_global_index_clause)? 
	(parallel_clause)? ;

add_list_partition_clause :
	"ADD" "PARTITION" (partition)? 
	list_values_clause 
	(table_partition_description)? ;

coalesce_table_partition :
	"COALESCE" "PARTITION" 
	(update_global_index_clause)? 
	(parallel_clause)? ;

drop_table_partition :
	"DROP" "PARTITION" partition 
	(update_global_index_clause 
	(parallel_clause)? )? ;

drop_table_subpartition :
	"DROP" "SUBPARTITION" subpartition 
	(update_global_index_clause 
	(parallel_clause)? )? ;

rename_partition_subpart :
	"RENAME" ("PARTITION" | "SUBPARTITION")
	current_name "TO" new_name ;

	current_name : identifier;
	current_partition : identifier;
	partition_1 : identifier;
	partition_2 : identifier;
	subpart_1 : identifier;
	subpart_2 : identifier;

truncate_partition_subpart :
	"TRUNCATE" ("PARTITION" partition 
		| "SUBPARTITION" subpartition)
	(reuse_or_drop_storage)? 
	(update_global_index_clause (parallel_clause)? )? ;

split_table_partition :
	"SPLIT" "PARTITION" current_partition 
	("AT" | "VALUES") "(" (value)+ ")"
	("INTO" "(" partition_spec "," partition_spec ")" )? 
	(update_global_index_clause)? 
	(parallel_clause)? ;

split_table_subpartition :
	"PARTITION" (partition)? 
	(table_partition_description)? ;

merge_table_partitions :
	"MERGE" "PARTITIONS" partition_1 "," partition_2 
	("INTO" partition_spec)? 
	(update_global_index_clause)? 
	(parallel_clause)? ;
	
merge_table_subpartitions :
	"MERGE" "SUBPARTITIONS" subpart_1 "," subpart_2
	("INTO" subpartition_spec)?
	(update_global_index_clause)?
	(parallel_clause)? ;

exchange_partition_subpart :
	"EXCHANGE" ("PARTITION" partition | "SUBPARTITION" subpartition)
	"WITH" "TABLE" table (("INCLUDING" | "EXCLUDING") "INDEXES")?
	(("WITH" | "WITHOUT") "VALIDATION")?
	(exceptions_clause)? 
	(update_global_index_clause 
		(parallel_clause)?)?;
	  
exceptions_clause :	  
	"EXCEPTIONS" "INTO" (schema ".")? table ;

alter_external_table_clauses :
	( add_column_clause
	| modify_column_clause
	| drop_column_clause
	| parallel_clause
	| external_data_properties 
	| "REJECT" "LIMIT" (integer | "UNLIMITED")
	)+;

move_table_clause :
	"MOVE" (online_tag)? 
	(segment_attributes_clause)? 
	(data_segment_compression)?
	(index_org_table_clause)?
	((LOB_storage_clause | varray_col_properties)+)?
	(parallel_clause)? ;

supplemental_lg_grp_clauses :
	  "ADD" "SUPPLEMENTAL" "LOG" "GROUP" log_group 
	  column_list ("ALWAYS")? 
	| "DROP" "SUPPLEMENTAL" "LOG" "GROUP" log_group
	;

upgrade_table_clause :
	"UPGRADE" ((not_tag)? "INCLUDING" "DATA")? 
	(column_properties)?;
	
records_per_block_clause :
	("MINIMIZE" | "NOMINIMIZE") "RECORDS_PER_BLOCK" ;

new_table_name : identifier;

alter_iot_clauses :
	  index_org_table_clause 
	| alter_overflow_clause 
	| alter_mapping_table_clauses 
	| coalesce_tag ;

modify_LOB_storage_clause :
	"MODIFY" "LOB" "(" LOB_item ")" 
	"(" modify_LOB_parameters ")" ;

modify_LOB_parameters :
	( storage_clause
	| pctversion_clause
	| retention_tag
	| freepools_clause
	| "REBUILD" "FREEPOOLS"
	| cache_clause
	| ( allocate_extent_clause | deallocate_unused_clause ) 
	)+;

alter_varray_col_properties :
	"MODIFY" "VARRAY" varray_item 
	"(" modify_LOB_storage_parameters ")" ;

alter_tablespace_statement : 
	"ALTER" tablespace_spec
	( datafile_tempfile_clauses
	| default_storage_clause
	| minimum_extent_clause
	| online_tag
	| offline_clause
	| ("BEGIN" | "END") "BACKUP"
	| read_write_clause
	| permanent_or_temporary
	| coalesce_tag
	| logging_clause
	| force_logging_spec
	| autoextend_clause
	| size_spec
	)+
	;

read_write_clause :
	  "READ" "ONLY" 
	| "READ" "WRITE" ;

offline_clause :
	"OFFLINE" (offline_attribute)? ;
	
offline_attribute :	
	"NORMAL" | "TEMPORARY" | "IMMEDIATE" ;

default_storage_clause :
	"DEFAULT" (data_segment_compression)? 
	storage_clause ;

datafile_tempfile_clauses :
	( "ADD" ("DATAFILE" | "TEMPFILE") 
	      ((datafile_tempfile_spec )+ )?
	| "RENAME" "DATAFILE" (filename ",")+
		"TO" (filename "," )+
	| ("DATAFILE" | "TEMPFILE") online_or_offline
	) ;

alter_trigger_statement :
	"ALTER" "TRIGGER" ( schema "." )?trigger_name
	  ( enable_or_disable
	  | "RENAME" "TO" new_name
	  | compile_clause (reuse_settings)?
	  )+ ;

alter_type_statement :
	"ALTER" "TYPE" ( schema "." )? type
	  ( compile_type_clause
	  | replace_type_clause
	  | ( alter_method_spec
	    | alter_attribute_definition
	    | (not_tag)? (instantiable_tag | final_tag)
	    )
	    ( dependent_handling_clause )?
	  ) ;
	  
compile_type_clause :
	compile_clause 
	("SPECIFICATION "| "BODY")? 
	(reuse_settings)? ;
	
replace_type_clause :
	"REPLACE" (invoker_rights_clause)? "AS" "OBJECT"
	"(" (attribute datatype)+
	  ("," (element_spec )+  )? ")" ;
	
alter_method_spec :
	("ADD" | "DROP")
	(map_order_function_spec | subprogram_clauses )+;


alter_attribute_definition :
	  ("ADD" | "MODIFY") "ATTRIBUTE"
	  (attribute (datatype)? | "(" (attribute datatype)+ ")" )
	| "DROP" "ATTRIBUTE" (attribute | "(" (attribute)+ ")" ) ;

dependent_handling_clause :
	  "INVALIDATE"
	| "CASCADE" ( ((not_tag)? "INCLUDING" "TABLE" "DATA"
	            | "CONVERT" "TO" "SUBSTITUTABLE"
	            ))? ((force_tag)? exceptions_clause)?
	;

alter_user_statement :
	"ALTER" "USER" (user_name)+
	(create_user_option)* ;
	
proxy_clause :
	("GRANT" | "REVOKE") "CONNECT" "THROUGH" proxy 
	("WITH" 
	  (ROLE ( (role)+ | "ALL" "EXCEPT" (role)+ )
	 | "NO" "ROLES" )
	)?
	("AUTHENTICATED" "USING"
	 ( "PASSWORD"
	 | "DISTINGUISHED" "NAME"
	 | "CERTIFICATE" ("TYPE" string)? ("VERSION" string)?
	 )
	)?;

alter_view_statement :
	"ALTER" "VIEW" ( schema "." )? view
	(  "ADD" out_of_line_constraint
	 | "MODIFY" "CONSTRAINT" constraint ("RELY" | "NORELY")
	 | "DROP" 
	   ( "CONSTRAINT" constraint 
	   | primary_key_spec 
	   | unique_columns_spec )
	 | compile_clause
	) ;

alter_materialized_view_statement :
	"ALTER" "MATERIALIZED" "VIEW"
	(schema ".")? materialized_view
	( physical_attributes_clause 
	  | data_segment_compression
	  | (LOB_storage_clause)+
	  | (modify_LOB_storage_clause)+
	  | alter_table_partitioning
	  | parallel_clause 
	  | logging_clause
	  | allocate_extent_clause
	  | cache_or_nocache
	)? 
	(alter_iot_clauses)?
	("USING" "INDEX" physical_attributes_clause)?
	(   "MODIFY" scoped_table_ref_constraint 
	  | rebuild_tag
	  | mv_refresh 
	)?
	( ("ENABLE" | "DISABLE") "QUERY" "REWRITE"
	  | "COMPILE"
	  | "CONSIDER" "FRESH"
	)? ;

alter_materialized_view_log :
	"ALTER" "MATERIALIZED" "VIEW" "LOG" "ON" 
	(schema ".")? table
	(   physical_attributes_clause
	  | alter_table_partitioning
	  | parallel_clause
	  | logging_clause
	  | allocate_extent_clause
	  | cache_or_nocache
	)?
	("ADD"
	      ( ("OBJECT" "ID" | primary_key_spec | "ROWID")
	        (column_list)?
	      | column_list
	      )+
	      ( new_values_clause )?
	)?;
	
analyze_statement :
	"ANALYZE"
	(   "TABLE" ( schema "." )? table
	      ( "PARTITION" "(" partition ")" 
	      | "SUBPARTITION" "(" subpartition ")" )?
	  | "INDEX" ( schema "." )? index
	      ( "PARTITION" "(" partition ")" 
	      | "SUBPARTITION" "(" subpartition ")" )?
	  | "CLUSTER" ( schema "." )? cluster
	)
	(   compute_statistics_clause
	  | estimate_statistics_clause
	  | validation_clauses
	  | list_chained_rows_clause 
	  | delete_statistics_clause 
	)+ ;

compute_statistics_clause :
	"COMPUTE" ( "SYSTEM" )? 
	"STATISTICS" (for_clause)? ;

estimate_statistics_clause :
	"ESTIMATE" ( "SYSTEM" )? 
	"STATISTICS" (for_clause)?
	("SAMPLE" integer ("ROWS" | "PERCENT"))? ;

delete_statistics_clause :
	"DELETE" ( "SYSTEM" )? "STATISTICS" ;

list_chained_rows_clause :
	"LIST" "CHAINED" "ROWS" (into_clause)? ;

validation_clauses :
	  "VALIDATE" "REF" "UPDATE" 
	  ("SET" "DANGLING" "TO" "NULL")?
	| "VALIDATE" "STRUCTURE" 
	  (cascade_tag)? (into_clause)? 
	  (online_or_offline)?
	;

for_clause :
	("FOR"
	( "TABLE"
	| "ALL" ("INDEXED")? "COLUMNS" (size_spec)?
	| "COLUMNS" (size_spec)? 
	  ((column | attribute) (size_spec)? )+
	| "ALL" ("LOCAL")? "INDEXES"
	))+ ;

into_clause :
	"INTO" (schema ".")? table ;

audit_statement :
	"AUDIT" (sql_statement_clause | schema_object_clause)
	("BY" ("SESSION" | "ACCESS"))?
	("WHENEVER" (not_tag)? "SUCCESSFUL")?;

sql_statement_clause :
	( (statement_option | "ALL" ",")+
	| (system_privilege | "ALL" "PRIVILEGES" ",")+
	)
	(auditing_by_clause | auditing_on_clause)? ;

auditing_by_clause :
	"BY"
	( (proxy)+ ("ON" "BEHALF" "OF" (user_name)+ | "ANY")?
	| (user_name)+
	) ;

schema_object_clause :
	((object_option)+ | "ALL") 
	auditing_on_clause ;

auditing_on_clause :
	  "ON" 
	  (  (schema ".")? object_name 
	   | "DIRECTORY" directory 
	   | default_tag ) ;

statement_option : 
	(sql_verb)? ("ANY" | "PUBLIC")? sql_item ;
	
system_privilege  : 
	  sql_verb ("ANY" | "PUBLIC")? sql_item
	| ("GLOBAL")? "QUERY" "REWRITE"
	| "ON" "COMMIT" "REFRESH"
	| "RESTRICTED" "SESSION"
	| "UNLIMITED" "TABLESPACE"
	| "ANALYZE" "ANY"
	| "AUDIT" "ANY"
	| "COMMENT" "ANY" "TABLE"
	| "EXEMPT" "ACCESS" "POLICY"
	| "FORCE" ("ANY")? "TRANSACTION"
	| "RESUMABLE"
	| "SYSDBA"
	| "SYSOPER" 
	;

sql_verb : 
	  "BACKUP" | "CREATE" | "ALTER" | "DROP" | "AUDIT" | "DEBUG" | "EXECUTE" 
	| "GRANT" | "SELECT" | "DELETE" | "INSERT" | "LOCK" | "FLASHBACK"
	| "UPDATE" | "MANAGE" | "ADMINISTER" | "BECOME" | "UNDER" | "READ" ;

sql_item : 
	  "CLUSTER" | "CONTEXT" | "DATABASE" "LINK" | "SYSTEM" 
	| "CONNECT" "SESSION" | "DIMENSION" | "DIRECTORY"
	| "INDEXTYPE" | "INDEX" | "LIBRARY" | "MATERIALIZED" "VIEW"
	| "OPERATOR" | "OUTLINE" | "PROCEDURE" | "PROFILE" | "ROLE"
	| "ROLLBACK" "SEGMENT" | "SEQUENCE" | "SESSION"
	| "RESOURCE" "COST" | "SYNONYM" | "TABLE" | "TABLESPACE"
	| ("DATABASE")? "TRIGGER" | "TYPE" | "USER" | "VIEW"
	| ("OBJECT")? "PRIVILEGE" | "DICTIONARY"
	;
	
object_option  : 
	"ALTER" | "AUDIT" | "COMMENT" | "DELETE" | "EXECUTE"
	| "GRANT" | "INDEX" | "INSERT" | "LOCK" | "READ" | "RENAME"
	| "SELECT" | "UPDATE"
	;

comment_statement :
	"COMMENT" "ON" 
	( "TABLE" qualified_name
	| "COLUMN" qualified_name
	| "OPERATOR" qualified_name
	| "INDEXTYPE" qualified_name
	)
	"IS" string;

expression : 	
	(
	  not_tag expression
	| exists_condition
	| under_path_condition
 	| "(" expression ")" 
 	| "(" expression_list ")"
 	| interval_expression
	| (("+" | "-" | "PRIOR")+ )?
 	( 
		  simple_expression
		| case_expression
		| cursor_expression
		| object_access_expression
		| scalar_subquery_expression
		| type_constructor_expression
		| variable_expression
	)
	)
	(  
	   interval_specifier
	 | datetime_specifier
	 | null_condition 
	 | like_condition 
	 | membership_condition
	 | range_condition
	 | is_of_type_condition 
	 | equals_path 
	)?
	(operator expression)?
	;
	
datetime_specifier :
	"AT"
	( "LOCAL"
	  | "TIME" "ZONE" 
	  	(   string
	  	  | "DBTIMEZONE"
        	  | "SESSIONTIMEZONE"
	        | expression
            )
	) ;

interval_expression :
	"INTERVAL" squotedstring "DAY" ;

interval_specifier :
	  "DAY" "TO" "SECOND" 
	| "YEAR" "TO" "MONTH" ;
	
exists_condition :
	"EXISTS" "(" subquery ")" ;

under_path_condition : 
	"UNDER_PATH" 
	"(" column ("," levels)? "," 
		path_string ("," correlation_integer)? ")" ;

null_condition :
	"IS" (not_tag)? null_tag ;

like_condition :
	(not_tag)? ("LIKE" | "LIKEC" | "LIKE2" | "LIKE4") 
	expression ("ESCAPE" expression)? ;

membership_condition :
	(not_tag)? "IN" "(" (expression_list | subquery) ")" ;
	
range_condition :
	(not_tag)? "BETWEEN" 
	simple_expression "AND" simple_expression ;

is_of_type_condition : 
	"IS" (not_tag)? "OF" ("TYPE")? 
	"(" (("ONLY")? (schema ".")? type ")" )+ ;

equals_path :
	"EQUALS_PATH" 
	"(" column "," path_string ("," correlation_integer)? ")" ;
	
operator :
	  "*"  | "/" | "+" | "-"  | "AND" | "OR"
	| "<"  | ">" | "=" | "<=" | ">="  | "!=" 
	| "^=" | "<>" | "||" | "**"
	| "=>"
	| ":="
	;

simple_expression :
	  "ROWNUM"
	| null_tag
	| "USER"
	| function ("." simple_expression)?
	| ("DISTINCT")?
	  qualified_name (  "(" ((expression )+ )? ")" 
				| "(" "+" ")"
				| "." ("CURRVAL" | "NEXTVAL") 
				| "%" ("FOUND" | "NOTFOUND")
				)?
				("." simple_expression
				| "@" simple_expression)?
	| number
	| hex_number
	| squotedstring
	| quotedstring
	;

case_expression :
	"CASE" 
	( simple_case_expression 
	| searched_case_expression )
	(else_clause)? "END" ;
	
simple_case_expression :
	expression 
	("WHEN" comparison_expr "THEN" return_expr)+ ; 
	
searched_case_expression :
	("WHEN" condition "THEN" return_expr)+ ;

else_clause :
	"ELSE" else_expr ;
	
cursor_expression :
	"CURSOR" "(" subquery ")" ;
	
function :
	  single_row_function
	| aggregate_function
	| object_reference_function
	| value_function
	| analytic_function
	| xml_function
	;
	
single_row_function :
	  character_function
	| conversion_function
	| treat_function
	| miscellaneous_single_row_function
	;

aggregate_function :
	(
	aggregate_function_name
	"(" ("*" | ( (distinct_or_all)? expression )+ )? ")" 
	( "OVER" "(" 
		( analytic_clause 
		| (query_partition_clause)? order_by_clause) ")"
	| "WITHIN" "GROUP"
		"(" "ORDER" "BY" 
		  (expression (ascending_or_descending)? ("NULLS" ("FIRST" | "LAST"))? )+
		 ")"
		("OVER" "(" query_partition_clause ")" )?
	)?
	)
	(
		"KEEP" 
		"(" "DENSE_RANK" ("FIRST" | "LAST") "ORDER" "BY"
		(expression (ascending_or_descending)? 
			("NULLS" ("FIRST" | "LAST"))? )+
		")"
		("OVER" "(" query_partition_clause ")" )?
	)?;

aggregate_function_name :
	  "AVG" 
	| "COUNT" 
	| "CORR"
	| "COVAR_POP"
	| "COVAR_SAMP"
	| "CUME_DIST"
	| "DENSE_RANK"
	| "GROUP_ID"
	| "GROUPING"
	| "GROUPING_ID"
	| "MAX"
	| "MIN"
	| "PERCENTILE_CONT"
	| "PERCENTILE_DISC"
	| "PERCENT_RANK"
	| "RANK"
	| "REGR_SLOPE"
	| "REGR_INTERCEPT"
	| "REGR_COUNT" 
	| "REGR_R2" 
	| "REGR_AVGX" 
	| "REGR_AVGY" 
	| "REGR_SXX" 
	| "REGR_SYY" 
	| "REGR_SXY"
	| "STDDEV"
	| "STDDEV_POP"
	| "STDDEV_SAMP"
	| "SUM"
	| "VAR_POP"
	| "VAR_SAMP"
	| "VARIANCE"
	; 

character_function :
	  trim_function 
	| character_function_name "(" ((expression)+ )? ")" ;
	
character_function_name :
	  "CHR"
	| "CONCAT"
	| "INITCAP"
	| "LOWER"
	| "LPAD" 
	| "LTRIM" 
	| "NLS_INITCAP"
	| "NLS_LOWER" 
	| "NLSSORT" 
	| "NLS_UPPER" 
	| "REPLACE" 
	| "RPAD" 
	| "RTRIM" 
	| "SOUNDEX"
	| "SUBSTR" 
	| "TRANSLATE" 
	| "TREAT" 
	| "TRIM" 
	| "UPPER"
 	;

trim_function :
	"TRIM" 
	"(" ("LEADING" | "TRAILING" | "BOTH")?
	    (trim_character)?
	    ("FROM")?
	    trim_source
	")";
	
	trim_character : numeric | string;
	trim_source : numeric | string;
	
conversion_function :
	  cast_function
	| conversion_function_name
		"(" ((expression ("USING" ("CHAR_CS" | "NCHAR_CS" ) )? )+ )? ")" 
		// NOTE: "using" clause only for TRANSLATE function
	;
	
cast_function :
	"CAST" "("
		( 
		  "(" subquery ")" 
		| "MULTISET" "(" subquery ")"
		| expression 
		) 
		"AS" type_name 
		")" ;
	
conversion_function_name :
	  "ASCIISTR"
	| "BIN_TO_NUM"
	| "CHARTOROWID"
	| "COMPOSE"
	| "CONVERT"
	| "DECOMPOSE"
	| "HEXTORAW"
	| "NUMTODSINTERVAL"
	| "NUMTOYMINTERVAL"
	| "RAWTOHEX"
	| "RAWTONHEX"
	| "ROWIDTOCHAR"
	| "ROWIDTONCHAR"
	| "TO_CHAR"
	| "TO_CLOB"
	| "TO_DATE"
	| "TO_DSINTERVAL"
	| "TO_LOB"
	| "TO_MULTI_BYTE"
	| "TO_NCHAR"
	| "TO_NCLOB"
	| "TO_NUMBER"
	| "TO_SINGLE_BYTE"
	| "TO_YMINTERVAL"
	| "TRANSLATE"
	| "UNISTR"
	;

treat_function :
	"TREAT" "(" expression "AS" ("REF")? 
		(schema ".")? type ")" ;

	
value_function :
	"VALUE" "(" correlation_variable ")" ;
	
miscellaneous_single_row_function :
	  miscellaneous_function_name
	"(" (expression )* ")" 
	;
	
miscellaneous_function_name :
	  "BFILENAME"
	| "COALESCE"
	| "DECODE" 
	| "DEPTH" 
	| "DUMP" 
	| "EMPTY_BLOB" 
	| "EMPTY_CLOB"
	| "EXISTSNODE" 
	| "EXTRACT"
	| "EXTRACTVALUE" 
	| "GREATEST" 
	| "LEAST" 
	| "NLS_CHARSET_DECL_LEN"
	| "NLS_CHARSET_ID" 
	| "NLS_CHARSET_NAME" 
	| "NULLIF" 
	| "NVL" 
	| "NVL2" 
	| "PATH" 
	| "SYS_CONNECT_BY_PATH" 
	| "SYS_CONTEXT" 
	| "SYS_DBURIGEN" 
	| "SYS_EXTRACT_UTC" 
	| "SYS_GUID" 
	| "SYS_TYPEID" 
	| "SYS_XMLAGG"
	| "SYS_XMLGEN" 
	| "UID" 
	| "UPDATEXML" 
	| "USER" 
	| "USERENV" 
	| "VSIZE" 
	;

analytic_function :
	analytic_function_name
	"(" (arguments)? ")" 
	"OVER" "(" analytic_clause ")" ;
	
analytic_function_name : plsql_identifier;

analytic_clause :
	(query_partition_clause)? 
	(order_by_clause (windowing_clause)? )? ;

query_partition_clause :
	"PARTITION" "BY" (value_expr ",")+ ;
	
windowing_clause :
	("ROWS" | "RANGE")
	( "BETWEEN"
	  ( "UNBOUNDED" "PRECEDING"
	  | "CURRENT" "ROW"
	  | value_expr ( "PRECEDING" | "FOLLOWING" )
	
	  ) 
	  "AND"
	  ( "UNBOUNDED" "FOLLOWING"
	  | "CURRENT" "ROW"
	  | value_expr ( "PRECEDING" | "FOLLOWING" )
	  ) 
	| ( "UNBOUNDED" "PRECEDING"
	  | "CURRENT" "ROW"
	  | value_expr "PRECEDING"  
	  )
	) ;

object_access_expression :
	(   table_alias "." column "." 
	  | object_table_alias "." 
	  | "(" expression ")" "." )
	( (attribute ".")+ ("." method "(" ((argument ",")+ )? ")" )?
	| method "(" ((argument ",")+ )? ")"
	);
	
type_constructor_expression :
	("NEW")? (schema".")? 
	type_name "(" (expression)+ ")" ;
	
variable_expression :
	":" host_variable 
	(("INDICATOR")? ":" indicator_variable)? ;

object_reference_function :
	object_reference_function_name 
	"(" ((expression )+ )? ")" ;
	
object_reference_function_name :
	  "DEREF" 
	| "REF" 
	| "VALUE" 
	| "MAKE_REF" 
	| "REFTOHEX" ;

user_defined_function :
	(schema ".")? 
	(   (package ".")? function 
	  | user_defined_operator )
	("@" dblink ".")? 
	("(" (distinct_or_all)? (expression)+ ")" )? ;

datatype :
	  Oracle_built_in_datatypes 
	| ANSI_supported_datatypes 
	| user_defined_types 
	| "XMLTYPE"
	;
	
Oracle_built_in_datatypes :
	  character_datatypes
	| number_datatypes
	| long_and_raw_datatypes
	| datetime_datatypes
	| large_object_datatypes
	| rowid_datatypes
	;

character_datatypes :
	character_datatype_name
  	("(" size ("BYTE" | "CHAR")? ")" )? ;
	
character_datatype_name :
	  "CHAR"
	| "VARCHAR2"
	| "VARCHARC"
	| "NCHAR"
	| "NVARCHAR2"
	;

number_datatypes :
	"NUMBER" 
	("(" precision ("," scale)? ")" )? ;

long_and_raw_datatypes :
	"LONG" ("RAW" ("(" size ")")? )?
	| ("RAW" | "VARRAW" | "VARRAWC") ("(" size ")")?
	;

datetime_datatypes :
	  "DATE"
	| "TIMESTAMP" 
		("(" fractional_seconds_precision ")")? 
		("WITH" ("LOCAL")? "TIME" "ZONE")? 
	| "INTERVAL" "YEAR" 
		("(" year_precision ")")? "TO" "MONTH"
	| "INTERVAL" "DAY" 
		("(" day_precision ")")? "TO" "SECOND" 
		("(" fractional_seconds_precision ")")?
	;
	
large_object_datatypes :
	  "BLOB" 
	| "CLOB" 
	| "NCLOB" 
	| "BFILE"
	;

rowid_datatypes :
	  "ROWID" 

	| "UROWID" ("(" size ")")?
	;

ANSI_supported_datatypes :
	(
	  "CHARACTER" ("VARYING")? 
	| ("CHAR" | "NCHAR") "VARYING"
	| "VARCHAR"
	| "NATIONAL" ("CHARACTER" | "CHAR") ("VARYING")?
	| "NUMERIC" | "DECIMAL" | "DEC"
	| "INTEGER" | "INT" | "SMALLINT"

	| "FLOAT"
	| "DOUBLE" "PRECISION"
	| "REAL")
	("EXTERNAL" ^("NAME" | "VARIABLE"))?
	("(" size ")" )?
	;

user_defined_types : 
	("REF")? qualified_name 
	("%" ("TYPE" | "ROWTYPE"))? 
	("(" size ")")?;

	size 			: numeric ("," numeric)?;
	precision 		: numeric;
	day_precision 	: numeric;
	scale 		: numeric;
	fractional_seconds_precision : numeric;
	year_precision 	: numeric;

inline_constraint :
	("CONSTRAINT" constraint_name)?
	((not_tag)? null_tag
	| "UNIQUE" ^"("
	| "PRIMARY KEY"
	| references_clause
	| "CHECK" "(" condition ")"
	) (constraint_state)? ;

out_of_line_constraint : 
	("CONSTRAINT" constraint_name)?
	( unique_columns_spec
	| "PRIMARY" "KEY" column_list
	| "FOREIGN" "KEY" column_list references_clause
	| "CHECK" "(" condition ")"
	) (constraint_state)? ;

inline_ref_constraint : 
	  "SCOPE" "IS" (schema "." )? scope_table
	| "WITH" "ROWID"
	| ("CONSTRAINT" constraint_name)? 
	  references_clause (constraint_state)?
	;

out_of_line_ref_constraint : 
	  "SCOPE" "FOR" "(" (ref_col | ref_attr) ")" 
	  "IS" ( schema "." )? scope_table
	| "REF" "(" (ref_col | ref_attr) ")" "WITH" "ROWID"
	| ( "CONSTRAINT" constraint_name )? 
	      "FOREIGN" "KEY" "(" (ref_col | ref_attr) ")" 
	      references_clause ( constraint_state )?
	;
	
references_clause :
	"REFERENCES" qualified_name (column_list)? 
	(on_delete_clause)?
	(constraint_state)? ;	
	
on_delete_clause :
	"ON" "DELETE" (cascade_tag | set_null_tag) ;
	
	set_null_tag : "SET" "NULL";
	
constraint_state :
	( 
		((not_tag)? "DEFERRABLE")? 
		("INITIALLY" ("IMMEDIATE" | "DEFERRED"))?
		((not_tag)? "DEFERRABLE")?
	)?
	("RELY" | "NORELY")? 
	(using_index_clause)?
	(enable_or_disable ^"CONSTRAINT")? 
	( "VALIDATE" | "NOVALIDATE" )? 
	(exceptions_clause)? ;
	
drop_cluster :
	"DROP" "CLUSTER" qualified_name 
	("INCLUDING" "TABLES" (cascade_constraints_tag)? )?;

drop_database_link :
	"DROP" ("PUBLIC")? "DATABASE" "LINK" dblink;

drop_directory :
	"DROP" "DIRECTORY" directory_name;

drop_dimension :
	"DROP" "DIMENSION" qualified_name ;

drop_function :	
	"DROP" "FUNCTION" qualified_name;

drop_index :	
	"DROP" "INDEX" qualified_name (force_tag)?;

drop_indextype :
	"DROP" "INDEXTYPE" qualified_name (force_tag)?;

drop_context :
	"DROP" "CONTEXT" namespace;

drop_library :	
	"DROP" "LIBRARY" library_name;

drop_operator : 
	"DROP" "OPERATOR" qualified_name (force_tag)?;

drop_package :
	"DROP" "PACKAGE" ("BODY")? qualified_name ;
	
drop_procedure :
	"DROP" "PROCEDURE" qualified_name ;
	
drop_profile :
	"DROP" "PROFILE" profile_name (cascade_tag)?;

drop_role :
	"DROP" "ROLE" role ;

drop_rollback_segment :
	"DROP" "ROLLBACK" "SEGMENT" rollback_segment;

drop_sequence :
	"DROP" "SEQUENCE" qualified_name;

drop_snapshot :
	"DROP" "SNAPSHOT" ("LOG" "ON")? qualified_name;
	
drop_synonym :
	"DROP" ("PUBLIC")? "SYNONYM" 
	synonym_name (force_tag)?;

drop_table :
	"DROP" "TABLE" qualified_name 
	(cascade_constraints_tag)?;

drop_tablespace :
	"DROP" tablespace_spec
	("INCLUDING" "CONTENTS" ("AND" "DATAFILES")? 
	(cascade_constraints_tag)? )?;

drop_trigger :
	"DROP" "TRIGGER" qualified_name ;

drop_type :
	"DROP" "TYPE" qualified_name 
	("FORCE" | "VALIDATE")?;

drop_type_body :
	"DROP" "TYPE" "BODY" qualified_name;

drop_user :
	"DROP" "USER" user_name 
	(cascade_tag)?;

drop_view :
	"DROP" "VIEW" qualified_name 
	(cascade_constraints_tag)?;
	
drop_materialized_view :
	"DROP" "MATERIALIZED" "VIEW"
	(schema ".")? ^"LOG" materialized_view;

drop_materialized_view_log :
	"DROP" "MATERIALIZED" "VIEW" "LOG" "ON" 
	(schema ".")? table ;

drop_outline :
	"DROP" "OUTLINE" outline ;

raise_statement :
	"RAISE" (exception_name)?;

return_statement :
	"RETURN" ("(" expression ")" | expression )?;

goto_statement :
	"GOTO" label_name;
	
if_statement : 
	"IF" expression "THEN" (statement)*
	("ELSIF" expression "THEN" (statement)* )*
	("ELSE" (statement)* )? 
	("ENDIF" | "END" "IF") ;

	
loop_statement :
	  basic_loop_statement
	| while_loop_statement
	| for_loop_statement
	;

basic_loop_statement :
	(label_name)? 
	"LOOP" (statement)*
	"END" "LOOP" (label_name)?;
 
while_loop_statement :
	(label_name )? 
	"WHILE" expression
	"LOOP" (statement)*
	"END" "LOOP" (label_name)?;

for_loop_statement :
	(label_name)? 
	"FOR" index_name "IN"
	("REVERSE")? lower_bound (".." upper_bound)?
	"LOOP" (statement)*
	"END" "LOOP" (label_name)?;

null_statement :
	"NULL" ;
	
assignment_statement :
	plsql_identifier ":=" expression ;
	
forall_statement :
	"FORALL" index_name 
	"IN" lower_bound ".." upper_bound
	statement;

	index_name : plsql_identifier;
	lower_bound : expression;
	upper_bound : expression;

disassociate_statistics :
	"DISASSOCIATE" "STATISTICS" "FROM"
	(associated_item (qualified_name)+ )+
	(force_tag)? ;
	
associated_item :
	  "COLUMNS"
	| "FUNCTIONS"
	| "PACKAGES"
	| "TYPES"
	| "INDEXES"
	| "INDEXTYPES"
	;
	
force_tag : "FORCE" ;

case_statement :
	( label_name )?
	"CASE" (case_operand)?
	("WHEN" expression "THEN" (statement (";")? )+ )+
	("ELSE" (statement (";")? )+ )?
	"END" "CASE" (label_name)?;

case_operand : expression;

close_statement :
	"CLOSE" (":")? name ;

fetch_statement : 
	"FETCH" (":")? name 
	("INTO" ((variable_name)+ | record_name)
	| "BULK" "COLLECT" "INTO" 
	  (collection_name | ":" host_array_name)+
	  ("LIMIT" expression)? )
	;
	
exit_statement : 
	"EXIT" (label_name)? 
	("WHEN" expression)?;

execute_statement :
	"EXECUTE" statement ;

execute_immediate_statement :
	"EXECUTE" "IMMEDIATE" dynamic_string
	("INTO" ((define_variable)+ | record_name))?
	("USING" (("IN" | "OUT" | "IN" "OUT")? bind_argument)+ )?
	(("RETURNING" | "RETURN") "INTO" (bind_argument)+ )? ;

	dynamic_string : expression ;
	define_variable : plsql_identifier;
	
explain_plan_statement :
	"EXPLAIN" "PLAN" 
	("SET" "STATEMENT_ID" "=" string)?
	("INTO" qualified_name ("@" dblink)? )? 
	"FOR" statement;

open_statement :
	"OPEN" cursor_name 
	("(" (cursor_parameter_name)+ ")" )?;
	
open_for_statement : 
	"OPEN" (":")? name
	"FOR" select_statement;
	
///////////////////////////////////////////////////////////////////////

keywords :
	(
	  "ADD"
	| "ALTER"
	| "AUDIT"
	| "AUTOMATIC"
	| "BEGIN"
	| "BODY"
	| "BY"
	| "CALL"
	| "CASE"
	| "CAST"
	| "CHARACTER"
	| "CHECK"
	| "CLEAR"
	| "CLOB"
	| "COMMENT"
	| "COMMIT"
	| "COMPUTE"
	| "CONNECT"
	| "CONSTANT"
	| "CONSTRAINT"
	| "CREATE"
	| "CUBE"
	| "CURSOR"
	| "DATABASE"
	| "DATAFILE"
	| "DECLARE"
	| "DEFAULT"
	| "DELETE"
	| "DISABLE"
	| "DROP"
	| "ELSE"
	| "ELSIF"
	| "ENABLE"
	| "END"
	| "ENDIF"
	| "ESTIMATE"
	| "EXCEPTION"
	| "FETCH"
	| "FOR"
	| "FORALL"
	| "FROM"
	| "FUNCTION"
	| "GLOBAL_NAME"
	| "GRANT"
	| "GROUP"
	| "IF"
	| "IN"
	| "INDEX"
	| "INITIAL"
	| "INITRANS"
	| "INSERT"
	| "INTO"
	| "KEY"
	| "LINK"
	| "LOB"
	| "LOCAL" 
	| "LOGFILE"
	| "LOOP"
	| "MAXTRANS"
	| "MEMBER"
	| "MERGE"
	| "MODIFY"
	| "NEXT"
	| "NOAUDIT"
	| "NOSORT"
	| "OPEN"
	| "OPERATOR"
	| "ORDER"
	| "OVER"
	| "PACKAGE"
	| "PARTITION"
	| "PCTFREE"
	| "PRAGMA"
	| "PRIMARY"
	| "PROCEDURE"
	| "PROFILE"
	| "REBUILD"
	| "RECOVER"
	| "REF"
	| "RENAME"
	| "RETURN"
	| "RETURNING"
	| "REVOKE"
	| "ROLLBACK"
	| "ROLLUP"
	| "ROLE"
	| "SCOPE"
	| "SELECT"
	| "SEQUENCE"
	| "SESSION"
	| "SET"
	| "SETS"
	| "START"
	| "STORAGE"
	| "SYNONYM"
	| "TABLE"
	| "TABLESPACE"
	| "THE"
	| "THEN"
	| "TRIGGER"
	| "TYPE"
	| "UNIQUE"
	| "UNTIL"
	| "USER"
	| "UPDATE"
	| "VALUE"
	| "VALUES"
	| "WHEN"
	| "WHERE"
	| "WHILE"
	| "WITH"
	// xml keywords
	| "XMLELEMENT"
	| "XMLTYPE" 
	
	)
	| conversion_function_name
	| miscellaneous_function_name
	;

dblink :
	link_database ("." (domain ".")+ )? 
	("@" connect_descriptor)? ; 

	
	link_database : identifier ;
	
expression_list :
	  (expression ",")+
	| "(" (expression "," )+ ")" ;

ascending_or_descending :
	  "ASC" 
	| "DESC"
	;

size_spec :
	"SIZE" integer (K_or_M)? ;

K_or_M : 
	"K" | "M" ;

reuse_tag :
	"REUSE" ;
	
reuse_or_drop_storage :
	("REUSE" | "DROP") "STORAGE" ;
	
reuse_settings :
	"REUSE" "SETTINGS" ;

compile_clause :
	"COMPILE" (debug_tag)? ;
	
debug_tag :	
	"DEBUG" ;
	
unusable_tag :
	"UNUSABLE" ;

coalesce_tag :	
	"COALESCE" ;
	
cascade_tag :
	"CASCADE" ;

cascade_constraints_tag :
	"CASCADE" "CONSTRAINTS" ;
			
enable_or_disable : 
	  "ENABLE" 
	| "DISABLE" ;

validate_or_novalidate :	
	  "VALIDATE" 
	| "NOVALIDATE" ;
	
distinct_or_all :
	  "DISTINCT"
	| "ALL" ;	
	
distinct_all_or_unique :
	  "DISTINCT"
	| "ALL" 
	| "UNIQUE" ;

online_or_offline :
	  "ONLINE"
	| "OFFLINE" ;

online_tag :
	"ONLINE" ;
	
rowdependencies_spec :	
	  "NOROWDEPENDENCIES" 
	| "ROWDEPENDENCIES" ;
	
monitoring_spec :
	  "MONITORING" 
	| "NOMONITORING" ;

archivelog_spec :
	  "ARCHIVELOG" 
	| "NOARCHIVELOG" ;
	
resetlogs_spec :
	  "RESETLOGS" 
	| "NORESETLOGS" ;
	
from_session :
	"FROM" "SESSION" ;

cache_clause :
	("CACHE" (integer | "READS")?
	 | "NOCACHE")
	(logging_clause)? ;

unusable_local_indexes_clause :
	(rebuild_tag)? "UNUSABLE" "LOCAL" "INDEXES" ;

end_backup_tag :
	"END" "BACKUP" ;

qualified_name : 
	plsql_identifier
	("." (identifier ".")+ )?
	("." string)?
	("#")? ;
	
identifier :
	"(a-zA-Z_)?(a-zA-Z0-9#_)?*";

not_tag : "NOT";

null_tag :
	"NULL";

compute_statistics_tag : 
	"COMPUTE" "STATISTICS" ;

update_block_references_tag :
	"UPDATE" "BLOCK" "REFERENCES" ;

rebuild_tag :
	"REBUILD" ;
	
overriding_tag : 
	"OVERRIDING" ;
	
final_tag : 
	"FINAL" ;
	
instantiable_tag : 
	"INSTANTIABLE" ;
	
default_tag	:
	"DEFAULT" ;

number : 
	("+" | "-")?
	(
	  (numeric ".")? numeric
	  | "." numeric 
	  | numeric )
	("E" numeric)? ;
	
hex_number :
	"x" "(0-9A-F)?+";

string : 
	  quotedstring 
	| squotedstring;

squotedstring : 
	"'" ( *("''" | "'") "''" 0 )+ "'" ;

name : 
	identifier | string;

plsql_identifier : 
	"(a-zA-Z_)?(a-zA-Z0-9_$#)?*" (? #VALUE !: keywords";" );

sort_list : (plsql_identifier ",")+;

parameters : (parameter",")+;

parameter : expression ("BY" "REFERENCE")?;

sqlj_object_type_attr : 
	  squotedstring 
	| plsql_identifier;

OraData	: 
	  squotedstring 
	| plsql_identifier;

CustomDatum	: 
	  squotedstring 
	| plsql_identifier;

column : 
	qualified_name ;

function_name
	: qualified_name;

savepoint_name	: plsql_identifier;
directory_object_name : plsql_identifier;
filename		: squotedstring;
field_name		: plsql_identifier;
external_name		: string;
directory_name	: identifier;
segment_name		: identifier;
subtype_name 		: plsql_identifier;
base_type  		: plsql_identifier;
constant_name		: plsql_identifier;
record_name		: plsql_identifier;
record_type_name	: plsql_identifier;
cursor_variable_name: plsql_identifier;
db_table_name		: plsql_identifier;
parameter_name	: identifier;
schema_name		: plsql_identifier;
attribute_name	: plsql_identifier;
scalar_datatype_name: plsql_identifier;
object_type_name	: plsql_identifier;
object_name		: identifier | string;
collection_name	: plsql_identifier;
procedure_name	: identifier;
profile_name		: identifier;
snapshot_name		: identifier;
old_name		: identifier;
cursor_name : expression;
variable_name			: qualified_name;
host_variable_name 	: plsql_identifier;
host_array_name	: plsql_identifier;
exception_name			: qualified_name;
method_name		: squotedstring | plsql_identifier;
lib_name		: squotedstring | plsql_identifier;
constraint_name	: plsql_identifier;
library_name		: identifier;
user_name		: plsql_identifier;
trigger_name		: plsql_identifier;
label_name		: identifier;
query_name  		: plsql_identifier;
type_name		: plsql_identifier;
procedure		: plsql_identifier;
implementation_type 		: qualified_name;
role			: identifier | string ;
password		: identifier | string ;
old_password 		: identifier | string ;
rollback_segment	: identifier;
sequence		: identifier;
collection_item	: identifier;
varray 			: identifier;
proxy 			: identifier | string;
scope_table		: plsql_identifier;
ref_col			: plsql_identifier;
ref_attr		: plsql_identifier;
savepoint		: name;
schema			: plsql_identifier;
table			: plsql_identifier;
view			: plsql_identifier;
materialized_view	: plsql_identifier;
c_alias			: quotedstring | plsql_identifier;
t_alias			: plsql_identifier;
partition		: plsql_identifier;
subpartition		: plsql_identifier;
constraint				: qualified_name ("@" dblink)?;
type			: plsql_identifier;
host_variable 			: qualified_name;
indicator_variable 	: plsql_identifier;
domain 			: plsql_identifier;
connect_descriptor 	: plsql_identifier;
table_alias 		: plsql_identifier;
object_table_alias 	: plsql_identifier;
method 			: plsql_identifier;
database		: plsql_identifier | string;
tablespace 		: plsql_identifier;
LOB_segname 		: plsql_identifier;
correlation_variable: plsql_identifier;
alias 			: plsql_identifier;
object_type 		: plsql_identifier;
index			: plsql_identifier;
cluster 		: identifier;
storage_table 	: plsql_identifier;
varray_item 		: plsql_identifier;
LOB_item 		: plsql_identifier;
log_group 		: plsql_identifier;
access_driver_type 	: plsql_identifier;
directory 		: plsql_identifier;
nested_item 		: plsql_identifier;
package 		: plsql_identifier;
indextype 		: plsql_identifier;
supertype 		: plsql_identifier;
cursor_parameter_name 	: plsql_identifier;	

attribute  			: expression;
value 			: expression;
value_expr 			: expression;
single_row_expression 	: expression;
multiple_row_expression : expression;
condition_spec 		: expression;
column_expression 	: expression;
parameter_value 		: expression;
partition_value 		: expression;
comparison_expr 		: expression;
return_expr 		: expression;
else_expr 			: expression;
collection_expression 	: expression;

scalar_subquery_expression : subquery;

plsql_subprogram_body 	: plsql_block;
plsql_function_body 	: plsql_block;
subprogram_body 		: plsql_block;
function_body 		: plsql_block;

alter_mapping_table_clauses 	: "TODO:";
modify_LOB_storage_parameters : "TODO:";
mapping_table_clauses 		: "TODO: mapping_table_clauses";
segment_attribute_clause 	: "TODO: segment_attribute_clause"; 
user_defined_operator 		: "TODO: user_defined_operator";
sys_refcursor_instance 		: "TODO: sys_refcursor_instance";

fmt 				: squotedstring;
search_condition 		: condition;
attribute_type 		: datatype;
path_string 		: string ;
element 			: string;
size_limit 			: numeric;
numeric_literal 		: numeric;

integer		: numeric;
correlation_integer 	: numeric;
sample_percent 		: numeric;
position 			: numeric;
levels 			: numeric;
min_value 			: numeric;
max_value 			: numeric;
num_buckets 		: numeric;
quantity 			: numeric;
limit 			: numeric;
hash_partition_quantity : numeric;
hash_subpartition_quantity : numeric;

///////////////////////////////////////////////////////////////////

space_symbol  : 
		( ("\32" | "\r" |"\n"|"\t") | "--" *("\n")
   		  |  "/*" *("*/") "*/" 0 )+
   		  ;
   		  
   		  
   		  
sqlj_object_type :
	"EXTERNAL" "NAME" java_ext_name 
	"LANGUAGE" "JAVA" "USING" 
	(SQLData | CustomDatum | OraData)
	;

sqlj_object_type_sig :
	"EXTERNAL" ("VARIABLE" "NAME" java_static_field_name
         	| "NAME" java_method_sig ) ;


	java_static_field_name : squotedstring ;
	java_method_sig 	     : squotedstring ;


java_ext_name		: squotedstring | plsql_identifier;



///////////////////////////
// xml

xml_function :
	  XMLAgg
	| XMLColAttVal
	| XMLConcat
	| XMLElement
	| XMLForest
	| XMLSequence
	| XMLTransform
	| "XMLTYPE" ("." identifier)? 
	  "(" ((expression ",")+ )? ")"
	;

XMLType_table :
	"CREATE" "TABLE" 
	(schema ".")? table 
	"OF" "XMLTYPE"
	(XMLType_storage)? 
	(XMLSchema_spec)?;

XMLType_column_properties :
	"XMLTYPE" ("COLUMN")? column 
	(XMLType_storage)? (XMLSchema_spec)?;
	
XMLType_storage :
	  "STORE" "AS" 
	( "OBJECT" "RELATIONAL"
	| "CLOB" 
	    (LOB_segname ("(" LOB_parameters ")" )? 
	    	| "(" LOB_parameters ")" )? );
	
XMLSchema_spec :
	("XMLSCHEMA" XMLSchema_URL)? 
	"ELEMENT" (element 
		| XMLSchema_URL "#" element) 
	(with_object_id_clause)?
	;

XMLType_view_clause :
	"OF" "XMLTYPE"
	(XMLType_storage)? 
	(XMLSchema_spec)?;

XMLAgg:
	"XMLAGG" "(" XMLType_instance 
		("ORDER" "BY" sort_list)? ")" ;

XMLElement :
	"XMLELEMENT" 
	"(" ("NAME")? expression ("," XML_attributes_clause)? 
		("," (value_expr",")+ )? ")" ;
		

XML_attributes_clause:
	"XMLATTRIBUTES"
	  "(" (value_expr ("AS" c_alias)? ",")+ ")" ;
	  
XMLColAttVal:
	"XMLCOLATTVAL" "(" (value_expr 
		("AS" plsql_identifier)? ",")+ ")" ;


XMLConcat:
	"XMLCONCAT" "(" (XMLType_instance ",")+ ")" ;

XMLForest:
	"XMLFOREST"
	  "(" (value_expr ("AS" c_alias)? ",")+ ")" ;

XMLSequence:
	"XMLSEQUENCE" "(" 
	(XMLType_instance | sys_refcursor_instance ("," fmt)? )
      ")" ;
        
XMLTransform:
	"XMLTRANSFORM" "(" XMLType_instance 
		"," XMLType_instance ")" ;

XMLType_instance : 
	  "XMLTYPE" "(" expression ")"
	| expression ;

XMLSchema_URL : string;


///////////////////////////////////////////////
// java

alter_java_statement :
	"ALTER" "JAVA" source_or_class
	(schema ".")? object_name 
	("RESOLVER"
	  "(" ("(" match_string (",")? (schema_name | "-") ")" )+ ")"
	)?
	(   compile_or_resolve
	  | invoker_rights_clause
	) ;

create_java :
	"CREATE" ("OR" "REPLACE")? 
	("AND" ("RESOLVE" | "COMPILE"))? ("NOFORCE")? "JAVA"
	(("SOURCE" | "RESOURCE") "NAMED" (schema ".")? primary_name 
	| "CLASS" ("SCHEMA" schema)?
	)
	(invoker_rights_clause)? 
	("RESOLVER"
	 "(" ("(" match_string (",")? (schema_name | "-") ")"
	")")+
	)?
	("USING"
	  ("BFILE" "(" directory_object_name "," server_file_name ")"
	  | ("CLOB" | "BLOB" | "BFILE") subquery
	  | key_for_BLOB
	  )
	| "AS" java_source_text
	)
	;

drop_java_statement :
	"DROP" "JAVA" ("SOURCE" | "CLASS" | "RESOURCE")
	(schema ".")? object_name;

source_or_class :
	  "SOURCE" 
	| "CLASS" ;
	
compile_or_resolve :
	  "COMPILE" 
	| "RESOLVE" ;
	
match_string :
	string | "*";	
	
java_source_text : 
	(*("{" | ";") java_code_block)+ *(";");
	
	java_code_block : "{" ((*("{" | "}") (java_code_block)? )+)? "}";
	
key_for_BLOB : string;
primary_name : plsql_identifier | string;
server_file_name : string;

class MyLexer extends Lexer;

DML_table_expression_clause :
	( (schema ".")?
	  ( table 
	    ( ("PARTITION" "(" partition ")" 
	    | "SUBPARTITION" "(" subpartition ")" )
	    | "@" dblink
	    )?
	  | view ("@" dblink)?
	  ) 
	| ("THE")? "(" subquery (subquery_restriction_clause)? ")"
	| table_collection_expression
	) ;

From monty at codetransform.com  Wed Apr 21 10:24:44 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Transforming trees: modify input tree
In-Reply-To: <200404211346.39420.tineo@ac.uma.es>
References: <c61ai3+l4o5@eGroups.com> <77C42B9C-9245-11D8-952B-000393B5606C@codetransform.com> <200404211346.39420.tineo@ac.uma.es>
Message-ID: <C7BEEF82-93B8-11D8-B98D-000393B5606C@codetransform.com>

You can walk through the tree, updating line numbers as needed, or you 
can modify the newline handling code of GnuCEmitter.g to do what you 
want.  It's kind of tricky to mix line number preservation and new 
code.

The emitter is designed to print newlines or #line directives only when 
it sees that the line number has changed from what was last printed.  A 
different strategy might be more appropriate in your case.

Monty


On Apr 21, 2004, at 4:46 AM, Adrian Tineo wrote:

> Hello there
>
> I am using the GNU C grammar available at antlr.org. Thanks to this 
> grammar I
> can easily create a tree for a C program. I need to modify that tree 
> and
> print it back to code. Fortunately, the GNU C grammar comes with a
> GnuCEmittter which does just that, it prints out a tree back to code.
>
> If I have
> 	line i:	a=b;
> 	line i+1:   (left blank)
> 	line i+2:	return 0;
> I want to have
> 	line i:	tmp=b;
> 	line i+1:	a=tmp;
> 	line i+2:	tmp=NULL;
> 	line i+3:	(left blank)
> 	line i+4:	return 0;
>
> As you can see I need to change the node for a=b for three nodes, that 
> I want
> to print to different lines and still get the proper separation with 
> the
> following code.
>
> But I get
> 	line i:	tmp=b;
> 	line i+1:	a=tmp;
> 	line i+2:	tmp=NULL; return 0;
>
> I can easily specify the line numbers for the newly created nodes but 
> in order
> to keep the separations right, I would need to update the line number 
> for
> every node that comes afterwards.
>
> As I am extending the treeparser grammar and don't want to override 
> the rules
> I don't need to work with, I would need to update the line numbers in 
> the
> INPUT tree so automatic tree generation for the rules I don't override 
> would
> copy the rest of the input nodes(with the updated line numbers) to the 
> ouput
> tree.
>
> And the question is, how can I do that? How can I have access to the 
> input
> tree for an AST-transforming treeparser?
> Or is there a better way to handle this problem?
>
> Any help appreciated. Thanks.
>
> Adrian Tineo
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>
>
Monty Zukowski
ANTLR & Java Consultant
http://www.codetransform.com



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From tineo at ac.uma.es  Wed Apr 21 10:53:11 2004
From: tineo at ac.uma.es (Adrian Tineo)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Transforming trees: modify input tree
In-Reply-To: <C7BEEF82-93B8-11D8-B98D-000393B5606C@codetransform.com>
References: <c61ai3+l4o5@eGroups.com> <200404211346.39420.tineo@ac.uma.es> <C7BEEF82-93B8-11D8-B98D-000393B5606C@codetransform.com>
Message-ID: <200404211953.11513.tineo@ac.uma.es>

Thanks for your answer Monty.

I'd prefer to keep the proper line number with the nodes rather than modifying 
the new line behaviour of the emitter, I think it is more organized and that 
it could grow better. 

Nevertheless, I have been thinking about ways of handling the tree. I am 
currently trying to write a transform-treeparser in a by-hand fashion because 
I need to move freely in the tree and not only with the subtrees resulting 
from rules.

My approach is to get certain kinds of nodes with findAllPartial and exchange 
nodes as needed. This way I also get freedom to update line numbers as I go.

I am going to need the double-linked facility of the TNode class provided to 
go back and forth from certain nodes, but from what I read is "currently 
incomplete". What do I need to add/change to implement it?

Thanks for your support, and great work with the parsing and tree 
generation ;=)

Adrian Tineo

El Mi?rcoles, 21 de Abril de 2004 19:24, Monty Zukowski escribi?:
> You can walk through the tree, updating line numbers as needed, or you
> can modify the newline handling code of GnuCEmitter.g to do what you
> want.  It's kind of tricky to mix line number preservation and new
> code.
>
> The emitter is designed to print newlines or #line directives only when
> it sees that the line number has changed from what was last printed.  A
> different strategy might be more appropriate in your case.
>
> Monty
>
> On Apr 21, 2004, at 4:46 AM, Adrian Tineo wrote:
> > Hello there
> >
> > I am using the GNU C grammar available at antlr.org. Thanks to this
> > grammar I
> > can easily create a tree for a C program. I need to modify that tree
> > and
> > print it back to code. Fortunately, the GNU C grammar comes with a
> > GnuCEmittter which does just that, it prints out a tree back to code.
> >
> > If I have
> > 	line i:	a=b;
> > 	line i+1:   (left blank)
> > 	line i+2:	return 0;
> > I want to have
> > 	line i:	tmp=b;
> > 	line i+1:	a=tmp;
> > 	line i+2:	tmp=NULL;
> > 	line i+3:	(left blank)
> > 	line i+4:	return 0;
> >
> > As you can see I need to change the node for a=b for three nodes, that
> > I want
> > to print to different lines and still get the proper separation with
> > the
> > following code.
> >
> > But I get
> > 	line i:	tmp=b;
> > 	line i+1:	a=tmp;
> > 	line i+2:	tmp=NULL; return 0;
> >
> > I can easily specify the line numbers for the newly created nodes but
> > in order
> > to keep the separations right, I would need to update the line number
> > for
> > every node that comes afterwards.
> >
> > As I am extending the treeparser grammar and don't want to override
> > the rules
> > I don't need to work with, I would need to update the line numbers in
> > the
> > INPUT tree so automatic tree generation for the rules I don't override
> > would
> > copy the rest of the input nodes(with the updated line numbers) to the
> > ouput
> > tree.
> >
> > And the question is, how can I do that? How can I have access to the
> > input
> > tree for an AST-transforming treeparser?
> > Or is there a better way to handle this problem?
> >
> > Any help appreciated. Thanks.
> >
> > Adrian Tineo
> >
> >
> >
> >
> > Yahoo! Groups Links
>
> Monty Zukowski
> ANTLR & Java Consultant
> http://www.codetransform.com



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From johnm-antlr at non.net  Wed Apr 21 11:05:29 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Again help with pl/sql grammar
In-Reply-To: <20040421165335.4659.qmail@web12403.mail.yahoo.com>
References: <20040421165335.4659.qmail@web12403.mail.yahoo.com>
Message-ID: <16518.47081.333847.342750@despot.non.net>

'netiquette nanny says:  STOP sending your complete grammar to the mailing
list!

Just put the grammar up on an ftp/http site and include a URL to it in
your help requests.

>>>>> "lorena" == lorena varela <lorenavare@yahoo.com> writes:
[...]

> Still I have a problem with the pl/sql grammar. I'm working with the
> plugin ANTLR Version 2.7.2 for eclipse. The problem is that when inserted
> the grammar generates this error:

> TokenStreamException: expecting '(', found 'e'

> I review the metalanguage section of the docs, and I made the changes,
> but still generate the error when I compile t.g, and this is necessary
> for generate the lexical analyzer and the parser in ANTLR.

At minimum, please include the complete error output from Antlr (dump it to
a file and put that up with the grammar on an ftp/http site).

Please remember that people are giving you free help and so it's important
to respect them enough to do as much of your own work as possible.  E.g.,
it would be good for you to include in your post the various things that
you've looked into to try to solve this yourself before you post.

Thanks,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From jean-louis.boulanger at hds.utc.fr  Wed Apr 21 11:24:54 2004
From: jean-louis.boulanger at hds.utc.fr (Boulanger Jean-Louis)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Again help with pl/sql grammar
In-Reply-To: <16518.47081.333847.342750@despot.non.net>
References: <20040421165335.4659.qmail@web12403.mail.yahoo.com> <16518.47081.333847.342750@despot.non.net>
Message-ID: <1082571894.4086bc7686539@mail.hds.utc.fr>

Selon "John D. Mitchell" <johnm-antlr@non.net>:

> 'netiquette nanny says:  STOP sending your complete grammar to the mailing
> list!

What is the problem ? 
It's grammar are not enought and some peoples can be interest by it.

Where are you find this "netiquette nanny" ?
On the antlr website ?

> Just put the grammar up on an ftp/http site and include a URL to it in
> your help requests.

Personnaly I prefere received an attached file.

Boulanger JL



-------------------------------------------------
Laboratoire Heudiasyc. UMR CNRS 6599
http://www.hds.utc.fr


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Wed Apr 21 11:48:41 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Transforming trees: modify input tree
In-Reply-To: <200404211953.11513.tineo@ac.uma.es>
References: <c61ai3+l4o5@eGroups.com> <200404211346.39420.tineo@ac.uma.es> <C7BEEF82-93B8-11D8-B98D-000393B5606C@codetransform.com> <200404211953.11513.tineo@ac.uma.es>
Message-ID: <820DD42A-93C4-11D8-8582-000393B5606C@codetransform.com>

Well, do you mind #line directives?  If not you could have all your 
newly created or moved nodes set to a new filename, which would give 
you another range of line numbers.

The TNode stuff has all the hooks for double linking, but you have to 
maintain the links yourself.  So if you move a node around in a tree 
you have to fix up the back links manually.  ANTLR's tree manipulation 
stuff currently has no hooks for maintaining backwards links.

Monty

On Apr 21, 2004, at 10:53 AM, Adrian Tineo wrote:

> Thanks for your answer Monty.
>
> I'd prefer to keep the proper line number with the nodes rather than 
> modifying
> the new line behaviour of the emitter, I think it is more organized 
> and that
> it could grow better.
>
> Nevertheless, I have been thinking about ways of handling the tree. I 
> am
> currently trying to write a transform-treeparser in a by-hand fashion 
> because
> I need to move freely in the tree and not only with the subtrees 
> resulting
> from rules.
>
> My approach is to get certain kinds of nodes with findAllPartial and 
> exchange
> nodes as needed. This way I also get freedom to update line numbers as 
> I go.
>
> I am going to need the double-linked facility of the TNode class 
> provided to
> go back and forth from certain nodes, but from what I read is 
> "currently
> incomplete". What do I need to add/change to implement it?
>
> Thanks for your support, and great work with the parsing and tree
> generation ;=)



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From jpdv at medialog.pt  Wed Apr 21 12:39:38 2004
From: jpdv at medialog.pt (jduquevieira)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Error recovery - HELP
Message-ID: <c66ilq+pmnq@eGroups.com>

I have a simple Math gramar.
And it's used in a graphical Math editor.

The editor user has to be able to write incomplete expressions 
like "(2+".
And when the user writes this, I have to get an incomplete tree, not 
an exception.

Any ideas?
Here goes the gramar.

Best regards.



expression
	:	equal
	;
    
equal
	:	sum (EQUAL^ sum)*
    ;

sum
	:	subtraction (PLUS^ subtraction)*
    ;
	
subtraction
	:	product (MINUS^ product)*
    ;
	
product
	:	division (TIMES^ division)*
    ;
	
division
	:	number (DIV^ number)*
    ;

number
	:	NUMBER
	|	LEFT_PARENT expression RIGHT_PARENT
	;




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From markl at glyphic.com  Wed Apr 21 12:42:47 2004
From: markl at glyphic.com (Mark Lentczner)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] C++ run-time and ref-counters
In-Reply-To: <20040421112429.GI5811@cs.utwente.nl>
References: <B39B7054-9306-11D8-9E9F-000393A56BB6@glyphic.com> <20040421112429.GI5811@cs.utwente.nl>
Message-ID: <1114A39C-93CC-11D8-9E9F-000393A56BB6@glyphic.com>

Ric -

> Another thing that makes me hate the smartpointers is that current 
> gdb's
> still segfault like hell around their use :((((
I've been using my smart pointers and debugging with GDB without too 
much problems.  The namespaces actually generate more problems than the 
smart pointers!

> Although I got a nice hunch from looking at your code :)
Three cheers for symbiotic open source.

> When 2.7.4 is out of the door I want to cut another development branch 
> and
> toy around with some approaches. For one I want to try out a plain 
> pointer
> with custom allocator/garbage collector strategy (how long have I been
> saying that *doh*).
While I am a major fan of garbage collection (I was on the Smalltalk 
team at Apple, and have worked on several other garbage collectors 
after that), it would be a show-stopper for our use of Antlr:  Our 
environment is memory sensitive.

> I'll remember your email adress for when I start looking at this again 
> :)
I'll be here.

	- Mark

Mark Lentczner
markl@wheatfarm.org
http://www.wheatfarm.org/



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From gudnabrsam at yahoo.com  Wed Apr 21 12:54:00 2004
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Error recovery - HELP
In-Reply-To: <c66ilq+pmnq@eGroups.com>
Message-ID: <20040421195400.19479.qmail@web20412.mail.yahoo.com>

Maybe you should look into Bogdan Mitu's SATC package.
 Check the ANTLR filesharing area...

-Matt


--- jduquevieira <jpdv@medialog.pt> wrote:
> I have a simple Math gramar.
> And it's used in a graphical Math editor.
> 
> The editor user has to be able to write incomplete
> expressions 
> like "(2+".
> And when the user writes this, I have to get an
> incomplete tree, not 
> an exception.
> 
> Any ideas?
> Here goes the gramar.
> 
> Best regards.
> 
> 
> 
> expression
> 	:	equal
> 	;
>     
> equal
> 	:	sum (EQUAL^ sum)*
>     ;
> 
> sum
> 	:	subtraction (PLUS^ subtraction)*
>     ;
> 	
> subtraction
> 	:	product (MINUS^ product)*
>     ;
> 	
> product
> 	:	division (TIMES^ division)*
>     ;
> 	
> division
> 	:	number (DIV^ number)*
>     ;
> 
> number
> 	:	NUMBER
> 	|	LEFT_PARENT expression RIGHT_PARENT
> 	;
> 
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
>      antlr-interest-unsubscribe@yahoogroups.com
> 
>  
> 



	
		
__________________________________
Do you Yahoo!?
Yahoo! Photos: High-quality 4x6 digital prints for 25
http://photos.yahoo.com/ph/print_splash


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From iank at bearcave.com  Wed Apr 21 13:25:27 2004
From: iank at bearcave.com (iank@bearcave.com)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Re: C++ run-time and ref-counters (was TokenStreamRewriteEngine and C++)
Message-ID: <200404212025.i3LKPRN03802@shell2.webquarry.com>


  I would also like to offer some reference counted C++ classes.  I
  have a reference counted String class, which properly implements
  copy-on-write semantics.  This is modeled on Rogue Wave's RWCString.
  It includes RWCString style section operations.  Associated with the
  string class is a reference counted, growable, array class.  This
  code is the result of many weeks of effort.  It comes with it's own
  test suite for the reference counted String class and related
  objects.  I originally wrote this with ANTLR in mind, since I was
  not happy with the class library either.

  This source code is available under conditions similar to ANTLR.
  That is "do what thou wilt", as long as you agree to accept the
  liability (e.g., if it fails, don't sue me).  You can most certainly
  use this code in commercial products.  All I ask is that you include
  a note about my authorship and copyright in the source code.

  The code and associated documentation can be found here:

  http://www.bearcave.com/software/string/index.html

  The code is documented using Doxygen as well.

  Ian Kaplan
  iank@bearcave.com


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From FranklinChen at cmu.edu  Wed Apr 21 14:04:25 2004
From: FranklinChen at cmu.edu (FranklinChen@cmu.edu)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Unicode literals
Message-ID: <16518.57817.221206.580699@SWAN.PSY.cmu.edu>

I tried using unicode literals (such as '\u0294') in an action in a
tree parser, and ANTLR complained this was illegal.  I suggest this be
allowed.  (As a workaround, I am having to define the literal in
another source file and import it.)

-- 
Franklin


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ronald.petty at milliman.com  Wed Apr 21 14:11:59 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] parse trees and syntax of parse trees
In-Reply-To: <16518.57817.221206.580699@SWAN.PSY.cmu.edu>
Message-ID: <OF52C77DA3.3CC04E68-ON86256E7D.00741FB9-86256E7D.0074B796@milliman.com>

If I wanted to make a parse tree for a language so I can transform it into 
another tree, is there any use in creating a non tree grammar for that 
language?

I am slightly confused about when to use the different types of grammars 
(token or tree).  At first I was under the impression you make the token 
grammar then convert to the tree.  If that is correct why would you do 
that?  If it is wrong what is the normal way to do it.  I looked at some 
examples and they seem to either be completly seperate or a mixture of 
both whichs leads me to my middle ground of not understanding.

Thanks
Ron

**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040421/32757512/attachment.html
From bharath at starthis.com  Wed Apr 21 14:39:54 2004
From: bharath at starthis.com (Bharath S)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Standard library functions: how to??
In-Reply-To: <20040420085201.GB657@cs.utwente.nl>
Message-ID: <000201c427e9$2fc688a0$03020a0a@devel.starthis.com>

Hi Grp,

I am writing the grammar for a new language and I'm wondering how standard
library functions are implemented. For example, if the user inputs a
statement "x := abs(y);", should I write the abs() function as an action in
the grammar, when the "abs" keyword is encountered? I looked at several
grammars (java, pascal, mumath etc) and I cant find similar implementations.
Am I missing something here?

Thanks.

Bharath
 

-----Original Message-----
From: Ric Klaren [mailto:klaren@cs.utwente.nl] 
Sent: Tuesday, April 20, 2004 3:52 AM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] Re: mystery in printing order

On Sat, Apr 17, 2004 at 11:32:46PM -0000, idontwantanidwith2000init wrote:
> What other functions should I overload?
> It looks like a great idea.

Every reportError/Warning method in a lexer/parser/treeparser. All antlr
messages are routed through these.

Ric
-- 
-----+++++*****************************************************+++++++++----
---
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++----
---
  "I don't have anything against Java - it's the best damn implementation
              of UCSD Pascal ever released..." --- Larry Smith



 
Yahoo! Groups Links



 






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From markl at glyphic.com  Wed Apr 21 15:08:41 2004
From: markl at glyphic.com (Mark Lentczner)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Unicode handling
Message-ID: <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com>

My project's source files are Unicode, and we are using Antlr to 
generate the lexer, parser and compiler in C++.

Seems from the doc that Antlr isn't really ready to deal with the full 
compliment of Unicode characters.  I found references to problems with 
EOF (integer -1, typecast to 0xFFFF as a character), problems with 
character sets (getting very large), and it seems that it assumes that 
Unicode characters are only 16 bits (which is no longer true.)

So, rather than try to work around or fix these problems, I intend to 
make my tool chain work with UTF-8 encoded source.  (This is especially 
easy for us, since the the process feeding the source stream already 
normalizes the incoming character set to UTF-8.)

Instead of parsing Unicode:

NAME_START_CHAR:
     ':' | 'A'-'Z' | '_' | 'a'-'z'
     | '\u00C0'-'\u00D6'
     | '\u00D8'-'\u00F6'
     | '\u00F8'-'\u02FF'
     | '\u0370'-'\u037D'
     | '\u037F'-'\u1FFF'
     | '\u200C'-'\u200D'
     | '\u2070'-'\u218F'
     | '\u2C00'-'\u2FEF'
     | '\u3001'-'\uD7FF'
     | '\uF900'-'\uFDCF'
     | '\uFDF0'-'\uFFFD'
     | '\u10000'-'\uEFFFF'	// won't work in Antlr as it can't handle 
these Unicode chars
     ;

We'd be parsing the UTF-8 encoded version of these characters:

NAME_START_CHAR:
     ':' | 'A'..'Z' | '_' | 'a'..'z'
     | '\u00C3' '\u0080'..'\u0096'           // '\u00C0'-'\u00D6'
     | '\u00C3' '\u0098'..'\u00B6'           // '\u00D8'-'\u00F6'
     | '\u00C3' '\u00B8'..'\u00BF'           // '\u00F8'-'\u00FF'
     | '\u00C4'..'\u00CB' '\u0080'..'\u00BF' // '\u0100'-'\u02FF'
     | '\u00CD' '\u00B0'..'\u00BD'           // '\u0370'-'\u037D'
     | '\u00CD' '\u00BF'                     // '\u037F'
     | '\u00CE'..'\u00DF' '\u0080'..'\u00BF' // '\u0380'-'\u07FF'
     | '\u00E0' '\u00A0'..'\u00BF' '\u0080'..'\u00BF'    // 
'\u0800'-'\u0FFF'
     | '\u00E1' '\u0090'..'\u00BF' '\u0080'..'\u00BF'    // 
'\u1000'-'\u1FFF'
     ... and so on ...
     ;

Does anyone see any pitfalls to this other than increasing the look 
ahead for the lexer?  Since in our source language, all the meaningful 
punctuation is in the visible US-ASCII range, the only place the 
difference between parsing Unicode characters vs. UTF-8 encoded Unicode 
characters would be in things like the NAME token production.

This seems much more preferable to me than extending the C++ support 
with some Unicode library (like IBM's icu or some such).

- Mark


Mark Lentczner
markl@wheatfarm.org
http://www.wheatfarm.org/



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Wed Apr 21 15:13:11 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:43 2004
Subject: New antlr-interest member
Message-ID: <1082585591.184.50152.w38@yahoogroups.com>


Hello,

This is an automated email message to let you know that
blaklemx1 <mblakley@nc.rr.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From markl at glyphic.com  Wed Apr 21 15:14:42 2004
From: markl at glyphic.com (Mark Lentczner)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Standard library functions: how to??
In-Reply-To: <000201c427e9$2fc688a0$03020a0a@devel.starthis.com>
References: <000201c427e9$2fc688a0$03020a0a@devel.starthis.com>
Message-ID: <4A099169-93E1-11D8-9E9F-000393A56BB6@glyphic.com>


On Apr 21, 2004, at 2:39 PM, Bharath S wrote:

> For example, if the user inputs a
> statement "x := abs(y);", should I write the abs() function as an 
> action in
> the grammar, when the "abs" keyword is encountered?

Unless abs(y) needs to be handled very differently than a call to a 
user function, foo(y), then no, the parser should know nothing about 
it.  Standard library functions (assuming the user doesn't need some 
sort of declaration to import them), should be added to your symbol 
tables before you begin the interpretation or compilation step.

	- Mark

Mark Lentczner
markl@wheatfarm.org
http://www.wheatfarm.org/



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From bharath at starthis.com  Wed Apr 21 15:40:47 2004
From: bharath at starthis.com (Bharath S)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Standard library functions: how to??
In-Reply-To: <4A099169-93E1-11D8-9E9F-000393A56BB6@glyphic.com>
Message-ID: <000301c427f1$b1248a20$03020a0a@devel.starthis.com>

Hi Mark,
>> Standard library functions should be added to your symbol 
tables before you begin the interpretation or compilation step

By adding, Should I write code for each of the standard library function I
am planning to provide? There should be a whole load of library functions
for any language and there should be an easier way of getting this done,
right?

Thanks for your comments!

Bharath
 

-----Original Message-----
From: Mark Lentczner [mailto:markl@glyphic.com] 
Sent: Wednesday, April 21, 2004 5:15 PM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] Standard library functions: how to??


On Apr 21, 2004, at 2:39 PM, Bharath S wrote:

> For example, if the user inputs a
> statement "x := abs(y);", should I write the abs() function as an 
> action in
> the grammar, when the "abs" keyword is encountered?

Unless abs(y) needs to be handled very differently than a call to a 
user function, foo(y), then no, the parser should know nothing about 
it.  .

	- Mark

Mark Lentczner
markl@wheatfarm.org
http://www.wheatfarm.org/



 
Yahoo! Groups Links



 






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From johnm-antlr at non.net  Wed Apr 21 16:08:19 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:43 2004
Subject: netiquette (was: [antlr-interest] Again help with pl/sql grammar)
In-Reply-To: <1082571894.4086bc7686539@mail.hds.utc.fr>
References: <20040421165335.4659.qmail@web12403.mail.yahoo.com>
	<16518.47081.333847.342750@despot.non.net>
	<1082571894.4086bc7686539@mail.hds.utc.fr>
Message-ID: <16518.65251.710929.855991@despot.non.net>

>>>>> "Boulanger" == Boulanger Jean-Louis <jean-louis.boulanger@hds.utc.fr> writes:
[...]

>> 'netiquette nanny says: STOP sending your complete grammar to the
>> mailing list!

> What is the problem ?  It's grammar are not enought and some peoples can
> be interest by it.

Small excerpts of a grammar are great but just spewing an entire,
non-trivial grammar/program/etc. to a mailing list is bad.

Doing this (repeatedly) is also a clear indication that the poster wants
people to do his work for him rather than only asking for some specific
help after making it clear that he's done what he can (reading the
documentation, studying the sample grammars, checking the FAQ, checking the
archives of this mailing list, etc.) before bothering *all* of the people
on this list (for *free* help).

> Where are you find this "netiquette nanny" ?  On the antlr website ?

That's a polite way of reminding people that good manners are important.

Play around with e.g., google for 'netiquette' and what not and you'll find
all sorts of internet/email/life etiquette resources.


>> Just put the grammar up on an ftp/http site and include a URL to it in
>> your help requests.

> Personnaly I prefere received an attached file.

Fine but a lot of people don't want their time and bandwidth wasted.

Thanks,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From johnm-antlr at non.net  Wed Apr 21 16:18:01 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] parse trees and syntax of parse trees
In-Reply-To: <OF52C77DA3.3CC04E68-ON86256E7D.00741FB9-86256E7D.0074B796@milliman.com>
References: <16518.57817.221206.580699@SWAN.PSY.cmu.edu>
	<OF52C77DA3.3CC04E68-ON86256E7D.00741FB9-86256E7D.0074B796@milliman.com>
Message-ID: <16519.297.821804.809276@despot.non.net>

>>>>> "ronald" == ronald petty <ronald.petty@milliman.com> writes:
[...]

> If I wanted to make a parse tree for a language so I can transform it
> into another tree, is there any use in creating a non tree grammar for
> that language?

Do you want strictly a "parse tree" or do you want an abstract syntax tree?
I.e., do you want a tree which strictly and precisely encodes the source or
do you want something more abstract?


> I am slightly confused about when to use the different types of grammars
> (token or tree).  At first I was under the impression you make the token
> grammar then convert to the tree.  If that is correct why would you do
> that?  If it is wrong what is the normal way to do it.  I looked at some
> examples and they seem to either be completly seperate or a mixture of
> both whichs leads me to my middle ground of not understanding.

Think of the following as a pipeline...

You write a lexer grammar so that Antlr will generate a lexer to consume
individual characters from the source file and output tokens.

You write a parser grammar so that Antlr will generate a (token) parser to
consume the tokens from the lexer and then output an "abstract syntax
tree" (AST).

You write zero or more tree grammars so that Antlr will generate a tree
walker/transformer to consume an AST and output an AST.

You write a tree grammar so that Antlr will generate a tree walker to
consume the final AST and output whatever your final output needs to be.

Have fun,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From johnm-antlr at non.net  Wed Apr 21 16:25:25 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Standard library functions: how to??
In-Reply-To: <000301c427f1$b1248a20$03020a0a@devel.starthis.com>
References: <4A099169-93E1-11D8-9E9F-000393A56BB6@glyphic.com>
	<000301c427f1$b1248a20$03020a0a@devel.starthis.com>
Message-ID: <16519.741.552949.175795@despot.non.net>

>>>>> "Bharath" == Bharath S <bharath@starthis.com> writes:
[...]

> By adding, Should I write code for each of the standard library function
> I am planning to provide? There should be a whole load of library
> functions for any language and there should be an easier way of getting
> this done, right?

Look at a complete system such as Sun's Java or GCC.

For example, the Java run-time engines come with the standard Java
libraries in a bunch of .jar files (which are bundles of Java .class
bytecode files) which contain all of the Java-based portions of the
standard libraries. In addition, they come with whatever e.g., native code
(i.e., C/C++) libraries that are needed to interface with the underlying
operating system.  All that the source compiler does in transform the
source code into the bytecode files.

It's interesting to watch the evolution of Java run-time implementations of
the standard libraries started out with a high-percentage of the code
written in "native code" (C/C++) but as they have matured, more and more of
the code is being written in Java itself.

[Of course, for a completely new language, I'm completely eliding any
discussion of the joys of bootstrapping.]

Hope this helps,
		John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From johnm-antlr at non.net  Wed Apr 21 16:31:14 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Unicode handling
In-Reply-To: <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com>
References: <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com>
Message-ID: <16519.1090.512649.697414@despot.non.net>

>>>>> "Mark" == Mark Lentczner <markl@glyphic.com> writes:
[...]

> Does anyone see any pitfalls to this other than increasing the look ahead
> for the lexer?  Since in our source language, all the meaningful
> punctuation is in the visible US-ASCII range, the only place the
> difference between parsing Unicode characters vs. UTF-8 encoded Unicode
> characters would be in things like the NAME token production.

> This seems much more preferable to me than extending the C++ support with
> some Unicode library (like IBM's icu or some such).

I concur.

In fact, I almost took that same approach but I was able to dodge the
Unicode bullet completely. :-)

For Antlr v3, aside from my perennial haranguing for complete and proper
hoisting support, I really want to get rid of all of this ridiculous use of
in-band signalling.  Please join me in pestering Ter about this. :-)

Have fun,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From bharath at starthis.com  Wed Apr 21 17:08:57 2004
From: bharath at starthis.com (Bharath S)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Standard library functions: how to??
In-Reply-To: <16519.741.552949.175795@despot.non.net>
Message-ID: <000001c427fe$02624e70$b9a3fea9@bharath>

Hi John,

I will be generating bytecode and not object code. I get the general
idea; unless you have a language like lets say, MuMath which is built
for special math purposes, I guess I don't need to provide standard math
functions as a feature of the language itself. Instead, they can be
library functions.

In practice, usually libraries for a particular language are written in
the same language itself, right? There could be innumerable library
functions and it could be fair to delegate it to the users of the
language, I guess. I also saw that you mentioned about more and more
library functions being written in Java itself, instead of native code
like C/C++.

Thanks a lot!

Bharath.

-----Original Message-----
From: John D. Mitchell [mailto:johnm-antlr@non.net] 
Sent: Wednesday, April 21, 2004 6:25 PM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Standard library functions: how to??

>>>>> "Bharath" == Bharath S <bharath@starthis.com> writes:
[...]

> By adding, Should I write code for each of the standard library
function
> I am planning to provide? There should be a whole load of library
> functions for any language and there should be an easier way of
getting
> this done, right?

Look at a complete system such as Sun's Java or GCC.

For example, the Java run-time engines come with the standard Java
libraries in a bunch of .jar files (which are bundles of Java .class
bytecode files) which contain all of the Java-based portions of the
standard libraries. In addition, they come with whatever e.g., native
code
(i.e., C/C++) libraries that are needed to interface with the underlying
operating system.  All that the source compiler does in transform the
source code into the bytecode files.

It's interesting to watch the evolution of Java run-time implementations
of
the standard libraries started out with a high-percentage of the code
written in "native code" (C/C++) but as they have matured, more and more
of
the code is being written in Java itself.

[Of course, for a completely new language, I'm completely eliding any
discussion of the joys of bootstrapping.]

Hope this helps,
		John


 
Yahoo! Groups Links



 




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Wed Apr 21 17:36:23 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Unicode handling
In-Reply-To: <16519.1090.512649.697414@despot.non.net>
References: <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com> <16519.1090.512649.697414@despot.non.net>
Message-ID: <151881E9-93F5-11D8-9A7D-000A95891192@cs.usfca.edu>


On Apr 21, 2004, at 4:31 PM, John D. Mitchell wrote:

>>>>>> "Mark" == Mark Lentczner <markl@glyphic.com> writes:
> [...]
>
>> Does anyone see any pitfalls to this other than increasing the look 
>> ahead
>> for the lexer?  Since in our source language, all the meaningful
>> punctuation is in the visible US-ASCII range, the only place the
>> difference between parsing Unicode characters vs. UTF-8 encoded 
>> Unicode
>> characters would be in things like the NAME token production.
>
>> This seems much more preferable to me than extending the C++ support 
>> with
>> some Unicode library (like IBM's icu or some such).
>
> I concur.
>
> In fact, I almost took that same approach but I was able to dodge the
> Unicode bullet completely. :-)
>
> For Antlr v3, aside from my perennial haranguing for complete and 
> proper
> hoisting support, I really want to get rid of all of this ridiculous 
> use of
> in-band signalling.  Please join me in pestering Ter about this. :-)

UNICODE will work well.  Note that 2.7.3 should do pretty well at 
UNICODE.  Give it a shot :)  \uFFFE is the max valid unicode right?  -1 
shouldn't be a problem anymore.
Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From sk at z.pl  Wed Apr 21 17:46:41 2004
From: sk at z.pl (Sebastian Kaliszewski)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Unicode handling
In-Reply-To: <151881E9-93F5-11D8-9A7D-000A95891192@cs.usfca.edu>
References: <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com> <16519.1090.512649.697414@despot.non.net> <151881E9-93F5-11D8-9A7D-000A95891192@cs.usfca.edu>
Message-ID: <200404220246.41528.sk@z.pl>

Dnia czw 22. kwiecie? 2004 02:36, Terence Parr napisa?:
> UNICODE will work well.  Note that 2.7.3 should do pretty well at
> UNICODE.  Give it a shot :)  \uFFFE is the max valid unicode right?  -1
> shouldn't be a problem anymore.

Also in C++ mode?

rgds
-- 
Sebastian Kaliszewski


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Wed Apr 21 18:28:44 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Unicode handling
In-Reply-To: <200404220246.41528.sk@z.pl>
References: <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com> <16519.1090.512649.697414@despot.non.net> <151881E9-93F5-11D8-9A7D-000A95891192@cs.usfca.edu> <200404220246.41528.sk@z.pl>
Message-ID: <6572AE9A-93FC-11D8-9A7D-000A95891192@cs.usfca.edu>


On Apr 21, 2004, at 5:46 PM, Sebastian Kaliszewski wrote:

> Dnia czw 22. kwiecie? 2004 02:36, Terence Parr napisa?:
>> UNICODE will work well.  Note that 2.7.3 should do pretty well at
>> UNICODE.  Give it a shot :)  \uFFFE is the max valid unicode right?  
>> -1
>> shouldn't be a problem anymore.
>
> Also in C++ mode?

Oh.  I think C++ doesn't handle UNICODE yet, but I'll let Ric answer 
this ;)

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From johnm-antlr at non.net  Wed Apr 21 18:57:22 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Unicode handling
In-Reply-To: <151881E9-93F5-11D8-9A7D-000A95891192@cs.usfca.edu>
References: <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com>
	<16519.1090.512649.697414@despot.non.net>
	<151881E9-93F5-11D8-9A7D-000A95891192@cs.usfca.edu>
Message-ID: <16519.9858.431325.487281@despot.non.net>

>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
>>>>>> On Apr 21, 2004, at 4:31 PM, John D. Mitchell writes:
[...]

>> For Antlr v3, aside from my perennial haranguing for complete and proper
>> hoisting support, I really want to get rid of all of this ridiculous use
>> of in-band signalling.  Please join me in pestering Ter about this. :-)

> UNICODE will work well.  Note that 2.7.3 should do pretty well at
> UNICODE.  Give it a shot :) \uFFFE is the max valid unicode right?  -1
> shouldn't be a problem anymore.

And what about the other end of the spectrum?

Thanks,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From johnm-antlr at non.net  Wed Apr 21 18:55:28 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Standard library functions: how to??
In-Reply-To: <000001c427fe$02624e70$b9a3fea9@bharath>
References: <16519.741.552949.175795@despot.non.net>
	<000001c427fe$02624e70$b9a3fea9@bharath>
Message-ID: <16519.9744.691267.930151@despot.non.net>

>>>>> "Bharath" == Bharath S <bharath@starthis.com> writes:
[...]

> In practice, usually libraries for a particular language are written in
> the same language itself, right?

It all depends.

One key area where libraries need at least some "native" language code is
wherever you need to interface with the underlying OS.

For more generic library code, the usual desire is to write it in the
source language as soon as possible.

> There could be innumerable library functions and it could be fair to
> delegate it to the users of the language, I guess. I also saw that you
> mentioned about more and more library functions being written in Java
> itself, instead of native code like C/C++.

Indeed.  

For example, Sun's original AWT (GUI windowing) implementation for Unix
relied upon X11 with the Motif library.  The new XAWT implementation has a
small core written directly to Xt and the rest is all done in Java.  The
result is a huge reduction in bugs and a nice increase in performance.

Have fun,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Wed Apr 21 19:06:17 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Unicode handling
In-Reply-To: <16519.9858.431325.487281@despot.non.net>
References: <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com> <16519.1090.512649.697414@despot.non.net> <151881E9-93F5-11D8-9A7D-000A95891192@cs.usfca.edu> <16519.9858.431325.487281@despot.non.net>
Message-ID: <A3FB1194-9401-11D8-9A7D-000A95891192@cs.usfca.edu>


On Apr 21, 2004, at 6:57 PM, John D. Mitchell wrote:

>>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
>>>>>>> On Apr 21, 2004, at 4:31 PM, John D. Mitchell writes:
> [...]
>
>>> For Antlr v3, aside from my perennial haranguing for complete and 
>>> proper
>>> hoisting support, I really want to get rid of all of this ridiculous 
>>> use
>>> of in-band signalling.  Please join me in pestering Ter about this. 
>>> :-)
>
>> UNICODE will work well.  Note that 2.7.3 should do pretty well at
>> UNICODE.  Give it a shot :) \uFFFE is the max valid unicode right?  -1
>> shouldn't be a problem anymore.
>
> And what about the other end of the spectrum?

It can parse binary with no sweat, so I'm hoping it's cool :)  I 
certainly have an example where it uses \0 and such for lexing.
Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From johnm-antlr at non.net  Wed Apr 21 19:46:09 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Unicode handling
In-Reply-To: <A3FB1194-9401-11D8-9A7D-000A95891192@cs.usfca.edu>
References: <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com>
	<16519.1090.512649.697414@despot.non.net>
	<151881E9-93F5-11D8-9A7D-000A95891192@cs.usfca.edu>
	<16519.9858.431325.487281@despot.non.net>
	<A3FB1194-9401-11D8-9A7D-000A95891192@cs.usfca.edu>
Message-ID: <16519.12785.890743.9559@despot.non.net>

>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
>>>>>> On Apr 21, 2004, at 6:57 PM, John D. Mitchell writes:
[...]

>> And what about the other end of the spectrum?

> It can parse binary with no sweat, so I'm hoping it's cool :) I certainly
> have an example where it uses \0 and such for lexing.

So then what's up with all of the CharVocab stuff still starting with 3?
Is that just a bad habit that we haven't gotten rid of yet?

Thanks,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Wed Apr 21 20:02:22 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Unicode handling
In-Reply-To: <16519.12785.890743.9559@despot.non.net>
References: <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com> <16519.1090.512649.697414@despot.non.net> <151881E9-93F5-11D8-9A7D-000A95891192@cs.usfca.edu> <16519.9858.431325.487281@despot.non.net> <A3FB1194-9401-11D8-9A7D-000A95891192@cs.usfca.edu> <16519.12785.890743.9559@despot.non.net>
Message-ID: <79D75542-9409-11D8-9A7D-000A95891192@cs.usfca.edu>


On Apr 21, 2004, at 7:46 PM, John D. Mitchell wrote:

>>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
>>>>>>> On Apr 21, 2004, at 6:57 PM, John D. Mitchell writes:
> [...]
>
>>> And what about the other end of the spectrum?
>
>> It can parse binary with no sweat, so I'm hoping it's cool :) I 
>> certainly
>> have an example where it uses \0 and such for lexing.
>
> So then what's up with all of the CharVocab stuff still starting with 
> 3?
> Is that just a bad habit that we haven't gotten rid of yet?

Yeah, probably...perhaps I forgot it was an old limitation and started 
thinking UNICODE char didn't start til afterwards!  doh!

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From markl at glyphic.com  Wed Apr 21 20:30:56 2004
From: markl at glyphic.com (Mark Lentczner)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Unicode handling
In-Reply-To: <151881E9-93F5-11D8-9A7D-000A95891192@cs.usfca.edu>
References: <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com> <16519.1090.512649.697414@despot.non.net> <151881E9-93F5-11D8-9A7D-000A95891192@cs.usfca.edu>
Message-ID: <772A063E-940D-11D8-9E9F-000393A56BB6@glyphic.com>

> Note that 2.7.3 should do pretty well at UNICODE.  Give it a shot :)
> \uFFFE is the max valid unicode right?  -1 shouldn't be a problem 
> anymore.
No, it is not.  U+10FFFF is (Since Unicode 3.1).  Yup, 21 bits.  And 
XML 1.0 is defined in light of this, so to properly handle anything 
coming from XML, one should handle it.

Note that Java is broken in this regard.  See 
http://weblogs.java.net/pub/wlg/1202 for a discussion.  I understand 
that some XML tools in Java go to great lengths to get around the 
problem.

> Oh.  I think C++ doesn't handle UNICODE yet, but I'll let Ric answer 
> this ;)
And indeed, I'm generating C++...

	- Mark



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Wed Apr 21 22:27:41 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:43 2004
Subject: New antlr-interest member
Message-ID: <1082611661.471.92721.w61@yahoogroups.com>


Hello,

This is an automated email message to let you know that
poornima_prakash <poornima.prakash@cgi.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From monty at codetransform.com  Wed Apr 21 22:32:20 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Unicode handling
In-Reply-To: <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com>
References: <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com>
Message-ID: <6CFCFF95-941E-11D8-943F-000393B5606C@codetransform.com>

Don't forget that you don't have to use ANTLR's lexer.  You can easily 
hook up another lexer to an ANTLR parser -- to the parser a lexer is 
just an object with a nextToken() method.  I have no idea what good 
Unicode lexers are out there targeting C++, but chances are good that 
there are some better than ANTLR's.  Ter has some significant 
improvements coming in ANTLR 3 for lexer generation.  ANTLR lexers 
aren't known to be very fast either (yet).

Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html


On Apr 21, 2004, at 3:08 PM, Mark Lentczner wrote:

> My project's source files are Unicode, and we are using Antlr to
> generate the lexer, parser and compiler in C++.
>
> Seems from the doc that Antlr isn't really ready to deal with the full
> compliment of Unicode characters.  I found references to problems with
> EOF (integer -1, typecast to 0xFFFF as a character), problems with
> character sets (getting very large), and it seems that it assumes that
> Unicode characters are only 16 bits (which is no longer true.)
>
> So, rather than try to work around or fix these problems, I intend to
> make my tool chain work with UTF-8 encoded source.  (This is especially
> easy for us, since the the process feeding the source stream already
> normalizes the incoming character set to UTF-8.)
>
> Instead of parsing Unicode:
>
> NAME_START_CHAR:
>      ':' | 'A'-'Z' | '_' | 'a'-'z'
>      | '\u00C0'-'\u00D6'
>      | '\u00D8'-'\u00F6'
>      | '\u00F8'-'\u02FF'
>      | '\u0370'-'\u037D'
>      | '\u037F'-'\u1FFF'
>      | '\u200C'-'\u200D'
>      | '\u2070'-'\u218F'
>      | '\u2C00'-'\u2FEF'
>      | '\u3001'-'\uD7FF'
>      | '\uF900'-'\uFDCF'
>      | '\uFDF0'-'\uFFFD'
>      | '\u10000'-'\uEFFFF'	// won't work in Antlr as it can't handle
> these Unicode chars
>      ;
>
> We'd be parsing the UTF-8 encoded version of these characters:
>
> NAME_START_CHAR:
>      ':' | 'A'..'Z' | '_' | 'a'..'z'
>      | '\u00C3' '\u0080'..'\u0096'           // '\u00C0'-'\u00D6'
>      | '\u00C3' '\u0098'..'\u00B6'           // '\u00D8'-'\u00F6'
>      | '\u00C3' '\u00B8'..'\u00BF'           // '\u00F8'-'\u00FF'
>      | '\u00C4'..'\u00CB' '\u0080'..'\u00BF' // '\u0100'-'\u02FF'
>      | '\u00CD' '\u00B0'..'\u00BD'           // '\u0370'-'\u037D'
>      | '\u00CD' '\u00BF'                     // '\u037F'
>      | '\u00CE'..'\u00DF' '\u0080'..'\u00BF' // '\u0380'-'\u07FF'
>      | '\u00E0' '\u00A0'..'\u00BF' '\u0080'..'\u00BF'    //
> '\u0800'-'\u0FFF'
>      | '\u00E1' '\u0090'..'\u00BF' '\u0080'..'\u00BF'    //
> '\u1000'-'\u1FFF'
>      ... and so on ...
>      ;
>
> Does anyone see any pitfalls to this other than increasing the look
> ahead for the lexer?  Since in our source language, all the meaningful
> punctuation is in the visible US-ASCII range, the only place the
> difference between parsing Unicode characters vs. UTF-8 encoded Unicode
> characters would be in things like the NAME token production.
>
> This seems much more preferable to me than extending the C++ support
> with some Unicode library (like IBM's icu or some such).
>
> - Mark
>
>
> Mark Lentczner
> markl@wheatfarm.org
> http://www.wheatfarm.org/
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From poornima.prakash at cgi.com  Thu Apr 22 00:16:48 2004
From: poornima.prakash at cgi.com (poornima_prakash)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] if-then-else - Grammar generates faulty parser code
Message-ID: <c67rh0+d4nv@eGroups.com>

We have a classic 'if-then-else' rule in the grammar file. The 
problem we are facing is with the ANTLR versions 2.7.2 and 2.7.4rc1.

The 'rule' in the grammar file is defined as follows :

  rule options { defaultErrorHandler = true;} :
    ifPart thenPart 
	(options {warnWhenFollowAmbig = false;} :
		elsePart
		)?;
		
  ifPart: "if"^ LPARENTHESIS! conditional_expression RPARENTHESIS!;
	
  thenPart  : "then"^ stmt_blk;
	
  elsePart  :"else"^ stmt_blk;

Since the 'else' part is optional, when we give an input rule with 
only the 'if-then' and without the 'else', AST is not generated 
correctly. It stops at the root node!

However, if we manipulate the generated C# code, AST is correctly 
generated. We have to  move the line "rule_AST = currentAST.root;" in 
the generated sources such that it is traversed even when only 'if-
then' input rule is given. 

To be more precise, the line "rule_AST = currentAST.root;"  at the 
end of the 'try' block in the below (automatically generated parser) 
code has to be moved into the 'default' case of switch-case for the 
correct AST to get generated.

public void rule() //throws RecognitionException, TokenStreamException
{
		
		returnAST = null;
		ASTPair currentAST = new ASTPair();
		AST rule_AST = null;
		
		try {      // for error handling
			ifPart();
			astFactory.addASTChild(currentAST, returnAST);
			thenPart();
			astFactory.addASTChild(currentAST, returnAST);
			{
				switch ( LA(1) )
				{
				case LITERAL_else:
				{
					elsePart();
					astFactory.addASTChild
(currentAST, returnAST);
					break;
				}
				case LITERAL_if:
				....
				case IDENTIFIER:
				{
					break;
				}
				default:
				{
					throw new NoViableAltException
(LT(1), getFilename());
				}
				 }
			}
			rule_AST = currentAST.root;
		}
		catch (RecognitionException ex)
		{...
		}
		returnAST = rule_AST;
	}


Please advice the required grammar change such that the AST gets 
generated properly without moving around the generated code.

Looking forward to your reply.

regards,
Poornima and Raghu.
	





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From poornima.prakash at cgi.com  Thu Apr 22 00:06:28 2004
From: poornima.prakash at cgi.com (poornima_prakash)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] VS .NET Debug problem in ANTLR 2.7.2 and 2.7.4rc1
Message-ID: <c67qtk+ukdv@eGroups.com>

Hi,
We are using the ANTLR parser generator in our project. We are facing 
the following problem while running the 2.7.2 and 2.7.4rc1 versions 
of ANTLR.

Debug Problem - 
                 We are using VS .NET 2002 to test the C# parser 
files generated from ANTLR. The output of both the DEBUG and RELEASE 
modes fail to parse the input and gives an error like ...

"Build Tree Error : expecting "" found '(' "

This error is not meaningful both in terms of the grammar for which 
the parser was built and in terms of the validity of the input.
The crazy thing is yet to come ... what we mean is, when breakpoints 
are set at each method definition of the generated code of the parser 
file, and when we start debugging in VS .NET 2002, stepping over each 
breakpoint encounterd ... bingo!!! ... the parsing is a success and 
the desired output(AST) is generated. This sure seems lame ... but we 
tried it on different systems and also on VS .NET 2003 ... the 
problem persists. To give you an idea of the problem on hand, we even 
created a small tool to fire the "F10" key to the VS .NET IDE to save 
ourselves the trouble of pressing the "F10" key many times.

We haven't used NANT ... but just wondering if it addresses the 
problem on hand.

- Poornima





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Thu Apr 22 00:43:34 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Unicode literals
In-Reply-To: <16518.57817.221206.580699@SWAN.PSY.cmu.edu>
References: <16518.57817.221206.580699@SWAN.PSY.cmu.edu>
Message-ID: <20040422074334.GA11404@cs.utwente.nl>

On Wed, Apr 21, 2004 at 05:04:25PM -0400, FranklinChen@cmu.edu wrote:
> I tried using unicode literals (such as '\u0294') in an action in a
> tree parser, and ANTLR complained this was illegal.  I suggest this be
> allowed.  (As a workaround, I am having to define the literal in
> another source file and import it.)

Quick fix is changing the charVocabulary in antlr/actions/java/action.g and
then rebuilding those.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 'And this 'rebooting' business? Give it a good kicking, do you?' 'Oh, no,
  of course, we ... that is ... well, yes, in fact,' said Ponder. 'Adrian
    goes round the back and ... er ... prods it with his foot. But in a
     technical way,' he added. --- From: Hogfather by Terry Pratchett.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From jpdv at medialog.pt  Thu Apr 22 01:39:55 2004
From: jpdv at medialog.pt (jduquevieira)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Re: Error recovery - HELP
In-Reply-To: <20040421195400.19479.qmail@web20412.mail.yahoo.com>
Message-ID: <c680cr+dr6l@eGroups.com>

Matt, thanks a lot for taking the time to help me out.

Unfortunately, Bogdan's approach doesn't solve my problem.
>>From what I read, Bogdan solved this issue by preserving the last 
good AST tree.
This is not good enough. What happens to the input after the first 
error? Is it forgotten?

I think that what is needed in this case is a way to push into the 
input the expected tokens when an error is found.

What are your thoughts on this?

Thanks. Best regards.


--- In antlr-interest@yahoogroups.com, Matt Benson <gudnabrsam@y...> 
wrote:
> Maybe you should look into Bogdan Mitu's SATC package.
>  Check the ANTLR filesharing area...
> 
> -Matt
> 
> 
> --- jduquevieira <jpdv@m...> wrote:
> > I have a simple Math gramar.
> > And it's used in a graphical Math editor.
> > 
> > The editor user has to be able to write incomplete
> > expressions 
> > like "(2+".
> > And when the user writes this, I have to get an
> > incomplete tree, not 
> > an exception.
> > 
> > Any ideas?
> > Here goes the gramar.
> > 
> > Best regards.
> > 
> > 
> > 
> > expression
> > 	:	equal
> > 	;
> >     
> > equal
> > 	:	sum (EQUAL^ sum)*
> >     ;
> > 
> > sum
> > 	:	subtraction (PLUS^ subtraction)*
> >     ;
> > 	
> > subtraction
> > 	:	product (MINUS^ product)*
> >     ;
> > 	
> > product
> > 	:	division (TIMES^ division)*
> >     ;
> > 	
> > division
> > 	:	number (DIV^ number)*
> >     ;
> > 
> > number
> > 	:	NUMBER
> > 	|	LEFT_PARENT expression RIGHT_PARENT
> > 	;
> > 
> > 
> > 
> > 
> >  
> > Yahoo! Groups Links
> > 
> > 
> >      antlr-interest-unsubscribe@yahoogroups.com
> > 
> >  
> > 
> 
> 
> 
> 	
> 		
> __________________________________
> Do you Yahoo!?
> Yahoo! Photos: High-quality 4x6 digital prints for 25?
> http://photos.yahoo.com/ph/print_splash



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Thu Apr 22 01:57:47 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Unicode handling
In-Reply-To: <772A063E-940D-11D8-9E9F-000393A56BB6@glyphic.com> <16519.12785.890743.9559@despot.non.net> <6572AE9A-93FC-11D8-9A7D-000A95891192@cs.usfca.edu> <200404220246.41528.sk@z.pl> <151881E9-93F5-11D8-9A7D-000A95891192@cs.usfca.edu> <16519.1090.512649.697414@despot.non.net> <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com>
References: <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com> <16519.1090.512649.697414@despot.non.net> <151881E9-93F5-11D8-9A7D-000A95891192@cs.usfca.edu> <200404220246.41528.sk@z.pl> <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com> <16519.1090.512649.697414@despot.non.net> <151881E9-93F5-11D8-9A7D-000A95891192@cs.usfca.edu> <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com> <16519.1090.512649.697414@despot.non.net> <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com>
Message-ID: <20040422085747.GD11404@cs.utwente.nl>

Bulk reply ;)

On Wed, Apr 21, 2004 at 03:08:41PM -0700, Mark Lentczner wrote:
> My project's source files are Unicode, and we are using Antlr to
> generate the lexer, parser and compiler in C++.

Sorry but you're on your own there. Not supported in C++, too many
hacks/bad choices in the generated code and support lib that may bite you.
YMMV. Keep phonenumber of shrink at hand for support.

(Just to make clear you're preparing for headaches)

> Seems from the doc that Antlr isn't really ready to deal with the full
> compliment of Unicode characters.  I found references to problems with
> EOF (integer -1, typecast to 0xFFFF as a character), problems with
> character sets (getting very large), and it seems that it assumes that
> Unicode characters are only 16 bits (which is no longer true.)

Well the C++ stuff truncates to 8 bits whenever it sees fit. Nothing 16 bit
there except for an unlucky signextension here and there due to people
using int's where unsigneds should be used.

> So, rather than try to work around or fix these problems, I intend to
> make my tool chain work with UTF-8 encoded source.  (This is especially
> easy for us, since the the process feeding the source stream already
> normalizes the incoming character set to UTF-8.)

This is an approach you might get away with though. But things might bite
you here and there.

> We'd be parsing the UTF-8 encoded version of these characters:
>
> NAME_START_CHAR:
>      ':' | 'A'..'Z' | '_' | 'a'..'z'
>      | '\u00C3' '\u0080'..'\u0096'           // '\u00C0'-'\u00D6'
>      | '\u00C3' '\u0098'..'\u00B6'           // '\u00D8'-'\u00F6'
>      | '\u00C3' '\u00B8'..'\u00BF'           // '\u00F8'-'\u00FF'
>      | '\u00C4'..'\u00CB' '\u0080'..'\u00BF' // '\u0100'-'\u02FF'
>      | '\u00CD' '\u00B0'..'\u00BD'           // '\u0370'-'\u037D'
>      | '\u00CD' '\u00BF'                     // '\u037F'
>      | '\u00CE'..'\u00DF' '\u0080'..'\u00BF' // '\u0380'-'\u07FF'
>      | '\u00E0' '\u00A0'..'\u00BF' '\u0080'..'\u00BF'    //
> '\u0800'-'\u0FFF'
>      | '\u00E1' '\u0090'..'\u00BF' '\u0080'..'\u00BF'    //
> '\u1000'-'\u1FFF'
>      ... and so on ...
>      ;

Note that 2.7.4 will barf out attempts at 16 bit char constants. 2.7.3 will
at times do a sign extension if you're unlucky (but should be safe most of
the time or alternative constructions available for.

> Does anyone see any pitfalls to this other than increasing the look
> ahead for the lexer?

See first part of reply. Keep a debugger at hand + the antlr source + your
favourite text editor.

> Since in our source language, all the meaningful punctuation is in the
> visible US-ASCII range, the only place the difference between parsing
> Unicode characters vs. UTF-8 encoded Unicode characters would be in things
> like the NAME token production.

If you trick antlr to make the right bitsets, you may get away by
handcoding/modifying the few rules that need to deal with UTF8 multibyte
sequences. The moment you put the icky bits in nice 8 bit strings you're
basically homefree except for sorting out the actual lenghts of the text
etc. You could get away with redefining the strings in antlr to wchars and
recompiling a hacked version of the support lib to have a bit more 'room'
to maneuver (sp?). That has been done before with some luck.

> This seems much more preferable to me than extending the C++ support
> with some Unicode library (like IBM's icu or some such).

I commend you if you do it with the current support lib (in both cases ;) )

On Wed, Apr 21, 2004 at 04:31:14PM -0700, John D. Mitchell wrote:
> >>>>> "Mark" == Mark Lentczner <markl@glyphic.com> writes:
> > This seems much more preferable to me than extending the C++ support with
> > some Unicode library (like IBM's icu or some such).
>
> I concur.

Might be preferable over reinventing the wheel though. And for me a lot
quicker to implement stuff (unless there's volunteers out there?).

> In fact, I almost took that same approach but I was able to dodge the
> Unicode bullet completely. :-)

Lucky lucky ;)

> For Antlr v3, aside from my perennial haranguing for complete and proper
> hoisting support, I really want to get rid of all of this ridiculous use of
> in-band signalling.  Please join me in pestering Ter about this. :-)

Erm this means I'm added to your pester list <shudders-in-horror>. Shoot it
was so convenient to have Ter take the heat all the time....

On Wed, Apr 21, 2004 at 05:36:23PM -0700, Terence Parr wrote:
> UNICODE will work well.

If you're lucky.

> Note that 2.7.3 should do pretty well at
> UNICODE.  Give it a shot :)  \uFFFE is the max valid unicode right?  -1
> shouldn't be a problem anymore.

Because:

On Wed, Apr 21, 2004 at 08:30:56PM -0700, Mark Lentczner wrote:
> No, it is not.  U+10FFFF is (Since Unicode 3.1).  Yup, 21 bits.

And I also wonder what you'll get if you feed the lexer in java mode a
sequence that contains such a value broken up over two UTF-16 values (that
for lexer terms should be treated as one!). So I don't think even Java mode
is safe from headaches. The lexer has to be unicode aware (in a sense this
might be nice since there's than a chance of sharing more code between the
different target languages ;) )

On Thu, Apr 22, 2004 at 02:46:41AM +0200, Sebastian Kaliszewski wrote:
> Dnia czw 22. kwiecie 2004 02:36, Terence Parr napisa:
> > UNICODE will work well.  Note that 2.7.3 should do pretty well at
> > UNICODE.  Give it a shot :)  \uFFFE is the max valid unicode right?  -1
> > shouldn't be a problem anymore.
>
> Also in C++ mode?

If you're not feeding it complete unicode input ;) and restrict it to plain
character ASCII kindoff stuff you should have no problem ;) In general one
big *no*.

On Wed, Apr 21, 2004 at 08:30:56PM -0700, Mark Lentczner wrote:
> Note that Java is broken in this regard.  See
> http://weblogs.java.net/pub/wlg/1202 for a discussion.  I understand
> that some XML tools in Java go to great lengths to get around the
> problem.
>
> > Oh.  I think C++ doesn't handle UNICODE yet, but I'll let Ric answer
> > this ;)
> And indeed, I'm generating C++...

Which means you're out of luck, sadly.

Options:
- Hack around things and create a maintenance nightmare (most probable).
- Find (handcode) a different lexer but probably you'll have to tinker a bit with the
  support lib.
- Don't use ANTLR.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Chaos often breeds life, when order breeds habit.
  --- Henry B. Adams, The Education of Henry Adams


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From Anthony.Youngman at ECA-International.com  Thu Apr 22 02:31:12 2004
From: Anthony.Youngman at ECA-International.com (Anthony Youngman)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Again help with pl/sql grammar
Message-ID: <C7FE35004D40FD45AA342991B88CE40409AE8F@lnml1.eca-international.local>

I presume you have broadband ...

Okay, I have unmetered net access, but it would not surprise me if for
some people on this list, net access consists of a 14.4 modem, running
at some horrendous per-minute fee over a phone line that is so crap that
even that thing can't run at full speed!

And don't forget - seeing that so many people pay to download (or have
limits on their broadband before they get cut off!) that enclosing 100K
of stuff that most people would consider rubbish actually means you have
WASTED HUNDREDS OF DOLLARS of OTHER PEOPLES' MONEY!

It's that last point you should really consider seriously ...

Cheers,
Wol

-----Original Message-----
From: Boulanger Jean-Louis [mailto:jean-louis.boulanger@hds.utc.fr] 
Sent: 21 April 2004 19:25
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] Again help with pl/sql grammar

Selon "John D. Mitchell" <johnm-antlr@non.net>:

> 'netiquette nanny says:  STOP sending your complete grammar to the
mailing
> list!

What is the problem ? 
It's grammar are not enought and some peoples can be interest by it.

Where are you find this "netiquette nanny" ?
On the antlr website ?

> Just put the grammar up on an ftp/http site and include a URL to it in
> your help requests.

Personnaly I prefere received an attached file.

Boulanger JL



-------------------------------------------------
Laboratoire Heudiasyc. UMR CNRS 6599
http://www.hds.utc.fr


 
Yahoo! Groups Links



 





****************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

****************************************************************************



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From jean-louis.boulanger at hds.utc.fr  Thu Apr 22 04:40:34 2004
From: jean-louis.boulanger at hds.utc.fr (Boulanger Jean-Louis)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Again help with pl/sql grammar
In-Reply-To: <C7FE35004D40FD45AA342991B88CE40409AE8F@lnml1.eca-international.local>
References: <C7FE35004D40FD45AA342991B88CE40409AE8F@lnml1.eca-international.local>
Message-ID: <1082634034.4087af32178e9@mail.hds.utc.fr>

Hello,

I am not sure that it is some email on this list that overloading your mailbox.
Actually I have a true problem with spam and virus mail (more than two hundred
by day) on my university mailbox.

In over hand, if you take in a first time the mail and in a second time the ftp
session for take a little grammar file, I am not sure that you win. Effectively
some people that subscribe to this list just for listen doesn't take the time
to take the grammar on the ftp site. But people that subscribe to a technical
list such ANTLR are so curious and accept some overloading mailbaox.

The first "John D. Mitchell" mail are so "direct" for me and indicate that is a
rule. If you see antlr archive you can find many message with file attached and
it's not a bad thing.

If we want use the antlr archive in some few month, i can take a mail that
indicate a pb with all information (file, ..) but if we separate a mail + a ftp
dowload, in some few month the ftp dowload disapear (broken link, correct
grammar, ...).


Selon Anthony Youngman <Anthony.Youngman@ECA-International.com>:

> I presume you have broadband ...
> 
> Okay, I have unmetered net access, but it would not surprise me if for
> some people on this list, net access consists of a 14.4 modem, running
> at some horrendous per-minute fee over a phone line that is so crap that
> even that thing can't run at full speed!

okay but are you sure that is a good reason to define a "strict rule" ?

> 
> And don't forget - seeing that so many people pay to download (or have
> limits on their broadband before they get cut off!) that enclosing 100K
> of stuff that most people would consider rubbish actually means you have
> WASTED HUNDREDS OF DOLLARS of OTHER PEOPLES' MONEY!

This list is submit to subscribing and the people know that a technical list can
have a good stuff.  A list with no traffic on a technical subject is not
interesting (generally). We don't speak to "spam" .... perhaps you want also
limited the number of mail by day to limit the traffic ??


> It's that last point you should really consider seriously ...

It's not a problem because "people subscribe" to this list and can unsubscribe
and get archive in yahoo site for example ....

The main problem is how limit the spam on this list and how protect our email
address .....



> 
> Cheers,
> Wo
> 
> -----Original Message-----
> From: Boulanger Jean-Louis [mailto:jean-louis.boulanger@hds.utc.fr] 
> Sent: 21 April 2004 19:25
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] Again help with pl/sql grammar
> 
> Selon "John D. Mitchell" <johnm-antlr@non.net>:
> 
> > 'netiquette nanny says:  STOP sending your complete grammar to the
> mailing
> > list!
> 
> What is the problem ? 
> It's grammar are not enought and some peoples can be interest by it.
> 
> Where are you find this "netiquette nanny" ?
> On the antlr website ?
> 
> > Just put the grammar up on an ftp/http site and include a URL to it in
> > your help requests.
> 
> Personnaly I prefere received an attached file.
> 
> Boulanger JL
> 
> 
> 
> -------------------------------------------------
> Laboratoire Heudiasyc. UMR CNRS 6599
> http://www.hds.utc.fr
> 
> 
>  
> Yahoo! Groups Links
> 
> 
> 
>  
> 
> 
> 
> 
> 
> ****************************************************************************
> 
> This transmission is intended for the named recipient only. It may contain
> private and confidential information. If this has come to you in error you
> must not act on anything disclosed in it, nor must you copy it, modify it,
> disseminate it in any way, or show it to anyone. Please e-mail the sender to
> inform us of the transmission error or telephone ECA International
> immediately and delete the e-mail from your information system.
> 
> Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911
> 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1
> 212 582 2333.
> 
> ****************************************************************************
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
> 
>  
> 




-------------------------------------------------
Laboratoire Heudiasyc. UMR CNRS 6599
http://www.hds.utc.fr


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Thu Apr 22 06:07:49 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Again help with pl/sql grammar
In-Reply-To: <20040421165335.4659.qmail@web12403.mail.yahoo.com>
References: <20040421165335.4659.qmail@web12403.mail.yahoo.com>
Message-ID: <20040422130749.GA12415@cs.utwente.nl>

Hi,

On Wed, Apr 21, 2004 at 11:53:35AM -0500, lorena varela wrote:
> Still I have a problem with the  pl/sql grammar. I'm
> working with the plugin ANTLR Version 2.7.2 for
> eclipse. The problem is that when inserted the grammar
> generates this error:
> 
> TokenStreamException: expecting '(', found 'e'

This is one of the more annyoing errors that can happen with antlr :( Would
be nice to try and improve it one of these days.

General strategy is to start with an empty grammar and selectively copy
sections in untill you find the offending rule.

> I  review the metalanguage section of the docs, and I
> made the changes, but still generate the error when I
> compile t.g, and this is necessary for generate the
> lexical analyzer and the parser in ANTLR.

Actually I have to agree somewhat with John here sending a 100K grammar to
a mailing list is a bit overdoing things. For me personally it's no problem
since I'm on a universities network connection but I can indeed feel pity
for the ones on slow modems.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 'And this 'rebooting' business? Give it a good kicking, do you?' 'Oh, no,
  of course, we ... that is ... well, yes, in fact,' said Ponder. 'Adrian
    goes round the back and ... er ... prods it with his foot. But in a
     technical way,' he added. --- From: Hogfather by Terry Pratchett.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Thu Apr 22 06:46:48 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] Again help with pl/sql grammar
In-Reply-To: <1082634034.4087af32178e9@mail.hds.utc.fr>
References: <C7FE35004D40FD45AA342991B88CE40409AE8F@lnml1.eca-international.local> <1082634034.4087af32178e9@mail.hds.utc.fr>
Message-ID: <20040422134648.GB12415@cs.utwente.nl>

Hi,

On Thu, Apr 22, 2004 at 01:40:34PM +0200, Boulanger Jean-Louis wrote:
> I am not sure that it is some email on this list that overloading your
> mailbox.

Actually that's not really the point John & Anthony make.

> In over hand, if you take in a first time the mail and in a second time the
> ftp session for take a little grammar file, I am not sure that you win.

You win that only the people willing to look at a 100K grammar will have to
download it.

> The first "John D. Mitchell" mail are so "direct" for me and indicate that
> is a rule.

It's indeed quite common that one medium to high volume mailinglists some
care has to be taken about the size of the attachments you send.

a. Courtesy
b. Higher chance of people looking at it
c. Less bandwidth wasted

> If you see antlr archive you can find many message with file attached and
> it's not a bad thing.

That's true. I only think that yahoogroups at times mangles/deletes
attachments in the archives. And in this case a buggy grammar.

> If we want use the antlr archive in some few month, i can take a mail that
> indicate a pb with all information (file, ..) but if we separate a mail + a
> ftp dowload, in some few month the ftp dowload disapear (broken link,
> correct grammar, ...).

Can't have it all indeed. Yet a non working grammar has less value with
that respect and with some luck in a few months the grammar may appear in
the files section ;)

> okay but are you sure that is a good reason to define a "strict rule" ?

I don't think there's a strict rule but this is somewhat over the top. I've
seen lists were people who did these kind off things got flamed into
oblivion so I think John was quite polite in suggestion to be a bit more
restrained in the future.

> > And don't forget - seeing that so many people pay to download (or have
> > limits on their broadband before they get cut off!) that enclosing 100K
> > of stuff that most people would consider rubbish actually means you have
> > WASTED HUNDREDS OF DOLLARS of OTHER PEOPLES' MONEY!
>
> This list is submit to subscribing and the people know that a technical
> list can have a good stuff.  A list with no traffic on a technical subject
> is not interesting (generally). We don't speak to "spam" .... perhaps you
> want also limited the number of mail by day to limit the traffic ??

I think you're missing the point made. I don't think anyone on this list
would want to do these things ;)

> > It's that last point you should really consider seriously ...
>
> It's not a problem because "people subscribe" to this list and can
> unsubscribe and get archive in yahoo site for example ....

For you it's not a problem for other people it might be. Therefore one has
to be somewhat considerate.

Note that nobody's policing some other things that are assumed to be bad
nettiquette like bad quoting, not pruning quotes, messages with excessive
signatures (like some companies with complete disclaimers in signatures,
the yahoogroups spam added to the end etc.) HTML mail. So this list is
quite relaxed anyway ;)

The point is try to be a bit considerate of the people who try to help
others for free. e.g.:

- Try to help yourself first
- Make sure to read the docs
- Look at the examples
- Look at the FAQ (ok that's a bit of a chore for antlr)
- Try to be concise in your question
  - mention target language
  - mention antlr version
  - platform specifics for as far as relevant
  - provide enough context  

Off late there's been a lot of messages that would not have been necessary
if people did all the above. The moment I can answer messages with one link
to the first doc you should have looked at then there's something 'wrong'
(yet I don't get too pissed over those since someone can just have had a
caffeine deficiency anyway ;) ).

Anyway that's just my thoughts on it (and I'm certainly *not* intending to
attack anyone not you nor the original poster with this) Just some things
for people to keep in mind ;)

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Chaos often breeds life, when order breeds habit.
  --- Henry B. Adams, The Education of Henry Adams



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ronald.petty at milliman.com  Thu Apr 22 08:25:16 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] parse trees and syntax of parse trees
In-Reply-To: <16519.297.821804.809276@despot.non.net>
Message-ID: <OF01B7F18E.43299584-ON86256E7E.0054877C-86256E7E.0054F99B@milliman.com>

That is sort of what I thought.  Lexer->Parser->(AST?)->TreeWalker

So when using the parser without any tree syntax that would still produce 
a AST correct?  If so, why have the manual intervention of the Tree 
syntax?  I believe I am confused on the seperation of the parser and 
trees.

Thanks John.

Ron



"John D. Mitchell" <johnm-antlr@non.net> 
04/21/2004 06:18 PM
Please respond to
antlr-interest@yahoogroups.com


To
antlr-interest@yahoogroups.com
cc

Subject
[antlr-interest] parse trees and syntax of parse trees 






>>>>> "ronald" == ronald petty <ronald.petty@milliman.com> writes:
[...]

> If I wanted to make a parse tree for a language so I can transform it
> into another tree, is there any use in creating a non tree grammar for
> that language?

Do you want strictly a "parse tree" or do you want an abstract syntax 
tree?
I.e., do you want a tree which strictly and precisely encodes the source 
or
do you want something more abstract?


> I am slightly confused about when to use the different types of grammars
> (token or tree).  At first I was under the impression you make the token
> grammar then convert to the tree.  If that is correct why would you do
> that?  If it is wrong what is the normal way to do it.  I looked at some
> examples and they seem to either be completly seperate or a mixture of
> both whichs leads me to my middle ground of not understanding.

Think of the following as a pipeline...

You write a lexer grammar so that Antlr will generate a lexer to consume
individual characters from the source file and output tokens.

You write a parser grammar so that Antlr will generate a (token) parser to
consume the tokens from the lexer and then output an "abstract syntax
tree" (AST).

You write zero or more tree grammars so that Antlr will generate a tree
walker/transformer to consume an AST and output an AST.

You write a tree grammar so that Antlr will generate a tree walker to
consume the final AST and output whatever your final output needs to be.

Have fun,
                 John


 
Yahoo! Groups Links



 




**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040422/7052592a/attachment.html
From johnm-antlr at non.net  Thu Apr 22 08:49:56 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] parse trees and syntax of parse trees
In-Reply-To: <OF01B7F18E.43299584-ON86256E7E.0054877C-86256E7E.0054F99B@milliman.com>
References: <16519.297.821804.809276@despot.non.net>
	<OF01B7F18E.43299584-ON86256E7E.0054877C-86256E7E.0054F99B@milliman.com>
Message-ID: <16519.59812.29888.310961@despot.non.net>

>>>>> "ronald" == ronald petty <ronald.petty@milliman.com> writes:
[...]

> That is sort of what I thought.  Lexer->Parser->(AST?)->TreeWalker

To be a bit more precise:

(A) Almost always exactly one:  Source characters -> Lexer -> Tokens

(B) One of either:

    Syntax-Directed Translation (SDT) case:

	Tokens -> Parser -> (direct) output   (i.e., .obj, .class, etc.)

    or, Intermediate Representation (IR) generation case:

	Tokens -> Parser -> AST (+ any auxillary data structures (e.g.,
	symbol table))

(C) Zero or more:

	AST -> TreeWalker/TreeTransformer -> AST

(D) One or more:

	AST -> TreeWalker -> output


> So when using the parser without any tree syntax that would still produce
> a AST correct?  If so, why have the manual intervention of the Tree
> syntax?  I believe I am confused on the seperation of the parser and
> trees.

Antlr can be configured to generate a parser which will automatically
construct a tree for you.  BUT! Such trees really suck because they are
basically stupid parse trees rather than abstract trees that have a form
that are good to work with.

One common trick is to turn on the automatic tree construction in the
parser as a whole but then selectively turn it off in individual (usually
more complex) rules and construct the trees manually at those points.

Check out the various larger example translators for lots of details about
how this works.

Have fun,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From johnm-antlr at non.net  Thu Apr 22 09:02:25 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:43 2004
Subject: 'netiquette (was: [antlr-interest] Again help with pl/sql grammar)
In-Reply-To: <20040422134648.GB12415@cs.utwente.nl>
References: <C7FE35004D40FD45AA342991B88CE40409AE8F@lnml1.eca-international.local>
	<1082634034.4087af32178e9@mail.hds.utc.fr>
	<20040422134648.GB12415@cs.utwente.nl>
Message-ID: <16519.60561.733803.370504@despot.non.net>

Thanks, Ric, for the great response.  I'll just hit a few points and then
shut up. :-)

Oh and BTW, 'netiquette nanny says: Remember to change the subject line
when changing the subject being discussed in your message!

>>>>> "Ric" == Ric Klaren <klaren@cs.utwente.nl> writes:
>>>>>> On Thu, Apr 22, 2004 at 01:40:34PM +0200, Boulanger Jean-Louis wrote:
[...]

>> The first "John D. Mitchell" mail are so "direct" for me and indicate
>> that is a rule.

> It's indeed quite common that one medium to high volume mailinglists some
> care has to be taken about the size of the attachments you send.

Indeed.  As with all "etiquette", it is phrased as a "rule" but is really a
"guideline" to help make conversation amongst members of a community more
valuable/useful/etc. to everybody, not just one person.

[...]

>> If you see antlr archive you can find many message with file attached
>> and it's not a bad thing.

> That's true. I only think that yahoogroups at times mangles/deletes
> attachments in the archives. And in this case a buggy grammar.

Indeed, having multiple copies of a bad grammar in the archives is, IMHO, a
very bad thing.

Also, there is a spot for complete, (good, I hope) grammars on the Antlr
web site.

Finally, again, there's a big difference between a small test grammar which
shows the specific problem and just posting an entire work in progress and
saying "here it is, I know it sucks, please fix it for me."


[...]

> Note that nobody's policing some other things that are assumed to be bad
> nettiquette like bad quoting, not pruning quotes, messages with excessive
> signatures (like some companies with complete disclaimers in signatures,
> the yahoogroups spam added to the end etc.) HTML mail. So this list is
> quite relaxed anyway ;)

Actually, I send out nags about those things too.  I just don't do it very
often. :-)

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From JVincent at Novell.Com  Thu Apr 22 09:01:12 2004
From: JVincent at Novell.Com (Jeff Vincent)
Date: Mon Dec 20 16:16:43 2004
Subject: [antlr-interest] if-then-else - Grammar generates faulty
	parser code
Message-ID: <s08797f3.099@sinclair.provo.novell.com>

Here is my if-then-else.  I didn't let ANTLR build the AST directly, I
did it myself to get things rooted the way I wanted with some imaginary
tokens.  I also didn't create special rules for the 'then' or the 'else'
part.  The ifFalseblock will be null if the else is omitted.
 
statement options {defaultErrorHandler=true;} :
  ( 
    ...

  |! stateIf:IF LPAREN! ifcond:expression RPAREN! iftrueblock:combo 
        ( options { greedy = true; } : ELSE! iffalseblock:combo )?
   {    #statement = #(#stateIf, #(#[EXPRESSION, "EXPRESSION"],
#ifcond), 
            #(#[COMBO, "COMBO"], #iftrueblock), #(#[COMBO, "COMBO"],
#iffalseblock)); 
    }
 
    ...
    ) ;
  
This has worked since ANTLR 2.7.0 (or 2.7.1? - ack! - I can't recall)
and I am currently using ANTLR 2.7.3.
 
If you care, I also rolled my own AST parser rules for all conditional
expressions (for, if-then-else, while, do-while, switch-case,
try-catch-finally) so I can control when the conditional parts actually
get parsed.  I am using all this as part of a run-time scripting
language (initially based loosly on 'C' w/ some Java-isms) using ANTLR
at the core.  The code that does the work is built into the AST parser
(action code), so the act of running the parser causes the actual
run-time execution.  I therefore had to only let the AST parser parse
things that actually should be "executed".  Here is a snippet of the AST
parser rule for my IF-THEN-ELSE statement:
 
statement :
(
 ...
 
   | #( astIF:IF
     {
      MyResult result = null;
      AST cond = null, ifTrue = null, ifFalse = null;
 
      //
      //Pull individual IF components of AST
      //
      cond = #astIF.getFirstChild();
      ifTrue = cond.getNextSibling();
      ifFalse = ifTrue.getNextSibling();
 
      cond = cond.getFirstChild();
      ifTrue = ifTrue.getFirstChild();
      ifFalse = ifFalse.getFirstChild();
 
      //
      //Execute the IF condition
      //
      result = assignmentExpression(cond); //<-- ANTLR parses
(executes) conditional
 
      if (result.getType() == BOOL) {
         if (result.getBooleanValue() == true)
            combo(ifTrue);   //<-- ANTLR parses (executes) "then"
block
         else if (ifFalse != null) //optional ELSE block
            combo(ifFalse);  //<-- ANTLR parses (executes) "else"
block
      }
      else
       throw new RecognitionException("Error: TreeParser.statement:
malformed IF: condition MUST evaluate as BOOLEAN");
     }
    . )
     |
 
  ...
 
) ;
 
I have similar rules for the other conditional statements.  If I do say
so myself, it works really well!  The ANTLR experts out there may have a
slicker way to do it, and I am open to suggestions.  I assume I would
need to semantic predicates somehow.  However, getting into the looping
structures I wasn't sure how to handle those, not to mention my
try-catch-finally rule.  Not sure if that helped or not.
 
Enjoy!

>>> poornima.prakash@cgi.com 4/22/2004 1:16:48 AM >>>

We have a classic 'if-then-else' rule in the grammar file. The 
problem we are facing is with the ANTLR versions 2.7.2 and 2.7.4rc1.

The 'rule' in the grammar file is defined as follows :

  rule options { defaultErrorHandler = true;} :
    ifPart thenPart 
    (options {warnWhenFollowAmbig = false;} :
        elsePart
        )?;
        
  ifPart: "if"^ LPARENTHESIS! conditional_expression RPARENTHESIS!;
    
  thenPart  : "then"^ stmt_blk;
    
  elsePart  :"else"^ stmt_blk;

Since the 'else' part is optional, when we give an input rule with 
only the 'if-then' and without the 'else', AST is not generated 
correctly. It stops at the root node!

However, if we manipulate the generated C# code, AST is correctly 
generated. We have to  move the line "rule_AST = currentAST.root;" in 
the generated sources such that it is traversed even when only 'if-
then' input rule is given. 

To be more precise, the line "rule_AST = currentAST.root;"  at the 
end of the 'try' block in the below (automatically generated parser) 
code has to be moved into the 'default' case of switch-case for the 
correct AST to get generated.

public void rule() //throws RecognitionException, TokenStreamException
{
        
        returnAST = null;
        ASTPair currentAST = new ASTPair();
        AST rule_AST = null;
        
        try {      // for error handling
            ifPart();
            astFactory.addASTChild(currentAST, returnAST);
            thenPart();
            astFactory.addASTChild(currentAST, returnAST);
            {
                switch ( LA(1) )
                {
                case LITERAL_else:
                {
                    elsePart();
                    astFactory.addASTChild
(currentAST, returnAST);
                    break;
                }
                case LITERAL_if:
                ....
                case IDENTIFIER:
                {
                    break;
                }
                default:
                {
                    throw new NoViableAltException
(LT(1), getFilename());
                }
                }
            }
            rule_AST = currentAST.root;
        }
        catch (RecognitionException ex)
        {...
        }
        returnAST = rule_AST;
    }


Please advice the required grammar change such that the AST gets 
generated properly without moving around the generated code.

Looking forward to your reply.

regards,
Poornima and Raghu.
    






Yahoo! Groups Links






-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040422/c68f7e3f/attachment.html
From notify at yahoogroups.com  Thu Apr 22 09:25:30 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:44 2004
Subject: New antlr-interest member
Message-ID: <1082651130.88.6783.w5@yahoogroups.com>


Hello,

This is an automated email message to let you know that
gryphon_smg <gryphon_smg@yahoo.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From monty at codetransform.com  Thu Apr 22 09:49:09 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] Re: Error recovery - HELP
In-Reply-To: <c680cr+dr6l@eGroups.com>
References: <c680cr+dr6l@eGroups.com>
Message-ID: <F9DAC872-947C-11D8-83C7-000393B5606C@codetransform.com>

On Apr 22, 2004, at 1:39 AM, jduquevieira wrote:

> I think that what is needed in this case is a way to push into the
> input the expected tokens when an error is found.

Yes, but currently this is not available in ANTLR.  You need to inspect 
the FOLLOW set at the point of the error, which means you need to write 
a hook into the ANTLR code generator to help you out.  Or dump out that 
information using the -diagnostic option to antlr.Tool and then write 
some sort of script to write the correct actions to handle the errors?  
I think it's more work than that but I can't see all the way through it 
yet.

Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Thu Apr 22 09:48:30 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] if-then-else - Grammar generates faulty parser code
In-Reply-To: <c67rh0+d4nv@eGroups.com>
References: <c67rh0+d4nv@eGroups.com>
Message-ID: <E263AFFE-947C-11D8-83C7-000393B5606C@codetransform.com>

That generated code looks correct to me.  The statement "rule_AST = 
currentAST.root;" needs to be run at the end of the try block.  You are 
reaching the default block because you've hit EOF but the parser is 
expecting more.  Add EOF at the end of 'rule', or make a top-level rule 
that calls 'rule'.  When you call a parser rule it must be a top level 
rule--which means it must not be called by other rules.  Try adding 
this to your grammar and then calling in at topRule.

topRule: rule ;


Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html

On Apr 22, 2004, at 12:16 AM, poornima_prakash wrote:

> We have a classic 'if-then-else' rule in the grammar file. The
> problem we are facing is with the ANTLR versions 2.7.2 and 2.7.4rc1.
>
> The 'rule' in the grammar file is defined as follows :
>
>   rule options { defaultErrorHandler = true;} :
>     ifPart thenPart
> 	(options {warnWhenFollowAmbig = false;} :
> 		elsePart
> 		)?;
> 		
>   ifPart: "if"^ LPARENTHESIS! conditional_expression RPARENTHESIS!;
> 	
>   thenPart  : "then"^ stmt_blk;
> 	
>   elsePart  :"else"^ stmt_blk;
>
> Since the 'else' part is optional, when we give an input rule with
> only the 'if-then' and without the 'else', AST is not generated
> correctly. It stops at the root node!
>
> However, if we manipulate the generated C# code, AST is correctly
> generated. We have to  move the line "rule_AST = currentAST.root;" in
> the generated sources such that it is traversed even when only 'if-
> then' input rule is given.
>
> To be more precise, the line "rule_AST = currentAST.root;"  at the
> end of the 'try' block in the below (automatically generated parser)
> code has to be moved into the 'default' case of switch-case for the
> correct AST to get generated.
>
> public void rule() //throws RecognitionException, TokenStreamException
> {
> 		
> 		returnAST = null;
> 		ASTPair currentAST = new ASTPair();
> 		AST rule_AST = null;
> 		
> 		try {      // for error handling
> 			ifPart();
> 			astFactory.addASTChild(currentAST, returnAST);
> 			thenPart();
> 			astFactory.addASTChild(currentAST, returnAST);
> 			{
> 				switch ( LA(1) )
> 				{
> 				case LITERAL_else:
> 				{
> 					elsePart();
> 					astFactory.addASTChild
> (currentAST, returnAST);
> 					break;
> 				}
> 				case LITERAL_if:
> 				....
> 				case IDENTIFIER:
> 				{
> 					break;
> 				}
> 				default:
> 				{
> 					throw new NoViableAltException
> (LT(1), getFilename());
> 				}
> 				 }
> 			}
> 			rule_AST = currentAST.root;
> 		}
> 		catch (RecognitionException ex)
> 		{...
> 		}
> 		returnAST = rule_AST;
> 	}
>
>
> Please advice the required grammar change such that the AST gets
> generated properly without moving around the generated code.
>
> Looking forward to your reply.
>
> regards,
> Poornima and Raghu.
> 	
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From johnm-antlr at non.net  Thu Apr 22 10:00:13 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] if-then-else - Grammar generates faulty parser code
In-Reply-To: <s08797f3.099@sinclair.provo.novell.com>
References: <s08797f3.099@sinclair.provo.novell.com>
Message-ID: <16519.64029.471416.974902@despot.non.net>

>>>>> "Jeff" == Jeff Vincent <JVincent@Novell.Com> writes:
[...]

> The ifFalseblock will be null if the else is omitted.

Let me suggest that that is a mistake.  One of the guiding principles of
managing complexity in a translator is to reduce variability.  I.e., go
ahead and create an imaginary, placeholder node such as
"EMPTY_FALSE_BLOCK".

[For the pattern minded in the audience, this is a variation of the "Null
Object" pattern and the arguments of why this is a good idea follow
directly though it all comes down to simplicity. :-)]

Hope this helps,
		John




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Thu Apr 22 09:57:45 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] parse trees and syntax of parse trees
In-Reply-To: <OF01B7F18E.43299584-ON86256E7E.0054877C-86256E7E.0054F99B@milliman.com>
References: <OF01B7F18E.43299584-ON86256E7E.0054877C-86256E7E.0054F99B@milliman.com>
Message-ID: <2D18BB46-947E-11D8-83C7-000393B5606C@codetransform.com>

On Apr 22, 2004, at 8:25 AM, ronald.petty@milliman.com wrote:

>
> So when using the parser without any tree syntax that would still 
> produce a AST correct? ?If so, why have the manual intervention of the 
> Tree syntax? ?I believe I am confused on the seperation of the parser 
> and trees.
>

No, a parser doesn't have to create a tree.  Turn off tree building and 
the parser merely parses and executes whatever action code you have.  
Turn it on and you get a "tree" which has no structure--it will be a 
linked list of all the tokens as nodes but there will never be a child 
node, they will all be siblings.

You start getting a tree structure once you start building a tree by 
adding the ^ operator to make root nodes with children.  There are, in 
fact, many different ways to structure your trees.  I'm going through 
the process right now myself with an SQL grammar.  I've been taking 
notes and when I understand what I've been doing I'll post and open up 
for discussion, after which I hope to write an article about it.

Terence has an excellent tutorial on tree building on his USF lecture 
notes site, linked to from antlr.org.  That should help clarify some 
typical uses for trees.

Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ronald.petty at milliman.com  Thu Apr 22 10:03:18 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] parse trees and syntax of parse trees
In-Reply-To: <2D18BB46-947E-11D8-83C7-000393B5606C@codetransform.com>
Message-ID: <OF60A60B65.1691BD57-ON86256E7E.005D8B25-86256E7E.005DF354@milliman.com>

"linked list of all the tokens" .. "start building a tree..." seems to 
actually clear alot up.  I will look into the class notes.

I will stop asking about this till I read the notes. :)

Thanks Monty & John.
Ron



Monty Zukowski <monty@codetransform.com> 
04/22/2004 11:57 AM
Please respond to
antlr-interest@yahoogroups.com


To
antlr-interest@yahoogroups.com
cc
Monty Zukowski <monty@codetransform.com>
Subject
Re: [antlr-interest] parse trees and syntax of parse trees 






On Apr 22, 2004, at 8:25 AM, ronald.petty@milliman.com wrote:

>
> So when using the parser without any tree syntax that would still 
> produce a AST correct?  If so, why have the manual intervention of the 
> Tree syntax?  I believe I am confused on the seperation of the parser 
> and trees.
>

No, a parser doesn't have to create a tree.  Turn off tree building and 
the parser merely parses and executes whatever action code you have. 
Turn it on and you get a "tree" which has no structure--it will be a 
linked list of all the tokens as nodes but there will never be a child 
node, they will all be siblings.

You start getting a tree structure once you start building a tree by 
adding the ^ operator to make root nodes with children.  There are, in 
fact, many different ways to structure your trees.  I'm going through 
the process right now myself with an SQL grammar.  I've been taking 
notes and when I understand what I've been doing I'll post and open up 
for discussion, after which I hope to write an article about it.

Terence has an excellent tutorial on tree building on his USF lecture 
notes site, linked to from antlr.org.  That should help clarify some 
typical uses for trees.

Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html



 
Yahoo! Groups Links



 




**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040422/b1145105/attachment.html
From lists at lischke-online.de  Thu Apr 22 10:10:29 2004
From: lists at lischke-online.de (Mike Lischke)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] Unicode handling
In-Reply-To: <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com>
Message-ID: <20040422170434.F1A4C57C005@h4866.serverkompetenz.net>

Mark, 


> This seems much more preferable to me than extending the C++ 
> support with some Unicode library (like IBM's icu or some such).

Hmm, handling of UTF-8 is more expensive when you need to process it (case folding, composition etc.) so this
transformation format is not recommended to be used that way. It is rather a format for transport not processing. In the
case of antlr though it seems to fit well except that defining identifiers might be a bit unintuitive. Debugging the
lexer could also become a pain. But otherwise, I don't see what speaks against your approach.

For antlr, though, it would be great if there were some more generic support. Identifier start and middle chars,
numbers/digits etc. could be predefined instead to have them to declare them over and over again in lexer grammars.

Mike
--
www.soft-gems.net



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From JVincent at Novell.Com  Thu Apr 22 10:52:13 2004
From: JVincent at Novell.Com (Jeff Vincent)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] if-then-else - Grammar generates faulty
	parser code
Message-ID: <s087b1f6.092@sinclair.provo.novell.com>

John, 
 
I'm not sure I follow exactly, or maybe misunderstanding what you said.
 I create an imaginary token called "COMBO" that could have no siblings
(equivalent to EMPTY_BLOCK).   I didn't think it should be necessary to
create a token specifically to represent "EMPTY_BLOCK" since null works
just fine and from my perspective, denotes exactly what I want.
 
This has allowed me to just have one generic AST build rule that
handles all cases (for the "IF").  I don't have to add additional code
to check for "EMPTY_BLOCK" in order to then insert a special imaginary
token.  From my non-purist point of view it seemed simple and straight
forward and works without issue.
 
So I see the way I have done it as reducing variablity and simplifying
the parser, although I may be missing something.  Please clarify if you
feel so inclined.  I welcome any chance to rethink or revisit my code. 

 
Jeff

>>> johnm-antlr@non.net 4/22/2004 11:00:13 AM >>>

>>>>> "Jeff" == Jeff Vincent <JVincent@Novell.Com> writes:
[...]

> The ifFalseblock will be null if the else is omitted.

Let me suggest that that is a mistake.  One of the guiding principles
of
managing complexity in a translator is to reduce variability.  I.e.,
go
ahead and create an imaginary, placeholder node such as
"EMPTY_FALSE_BLOCK".

[For the pattern minded in the audience, this is a variation of the
"Null
Object" pattern and the arguments of why this is a good idea follow
directly though it all comes down to simplicity. :-)]

Hope this helps,
        John





Yahoo! Groups Links






-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040422/331cc111/attachment.html
From monty at codetransform.com  Thu Apr 22 11:15:12 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] if-then-else - Grammar generates faulty parser code
In-Reply-To: <s087b1f6.092@sinclair.provo.novell.com>
References: <s087b1f6.092@sinclair.provo.novell.com>
Message-ID: <FF1FF0C8-9488-11D8-82DF-000393B5606C@codetransform.com>

Jeff,
	You have a unique situation in that your tree parser actions are your 
runtime and you call them to "execute" the script you have parsed.  
Actually that's pretty clever -- (NOTE TO TERENCE) we (ahem, as I 
recall) haven't given much thought to how to create interpreters with 
ANTLR beyond "do it in the actions."  This merits attention at the next 
ANTLR Cabal to refine ANTLR 3 designs.

	Loring and I have been trying to distill comprehensive guidelines to 
tree building.  We've been examining the "EMPTY_BLOCK" placeholder node 
trick.  The tradeoff is computation v. space but also introducing a 
placeholder node may be required to eliminate ambiguity to support 
something like the C "for" -- for: #(FOR e1:expr e2:expr e3:expr)--if 
you made the expr's optional then you would need some other sentinel 
such as leaving in the semicolon so you knew which place the expr was 
in to accommodate for empty exprs.

	But without an ambiguity it really becomes space v. code size.  
Ideally we(I)'ll come up with a number of distinct scenarios and work 
them in different styles to really nail down the tradeoffs.

Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html

On Apr 22, 2004, at 10:52 AM, Jeff Vincent wrote:

>
> I'm not sure I follow exactly, or maybe misunderstanding what you 
> said.? I create an imaginary token called "COMBO" that could have no 
> siblings (equivalent to EMPTY_BLOCK).?? I didn't think it should be 
> necessary to create a token specifically to represent "EMPTY_BLOCK" 
> since null works just fine and from my perspective, denotes exactly 
> what I want.
> ?
> This has allowed me to just have one generic AST build rule that 
> handles all cases (for the "IF").? I don't have to add additional code 
> to check for "EMPTY_BLOCK" in order to then insert a special imaginary 
> token.? From my non-purist point of view it seemed simple and straight 
> forward and works without issue.
> ?
> So I see the way I have done it as reducing variablity and simplifying 
> the parser, although I may be missing something.? Please clarify if 
> you feel so inclined.? I welcome any chance to rethink or revisit my 
> code.?


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Thu Apr 22 11:48:24 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] if-then-else - Grammar generates faulty parser code
In-Reply-To: <FF1FF0C8-9488-11D8-82DF-000393B5606C@codetransform.com>
References: <s087b1f6.092@sinclair.provo.novell.com> <FF1FF0C8-9488-11D8-82DF-000393B5606C@codetransform.com>
Message-ID: <A2BDED44-948D-11D8-9A7D-000A95891192@cs.usfca.edu>


On Apr 22, 2004, at 11:15 AM, Monty Zukowski wrote:

> Jeff,
> 	You have a unique situation in that your tree parser actions are your
> runtime and you call them to "execute" the script you have parsed.
> Actually that's pretty clever -- (NOTE TO TERENCE) we (ahem, as I
> recall) haven't given much thought to how to create interpreters with
> ANTLR beyond "do it in the actions."  This merits attention at the next
> ANTLR Cabal to refine ANTLR 3 designs.

You'll note that this is precisely what StringTemplate does.  It parses 
and "compiles" templates down into ASTs, which are executed via eval.g 
tree walker. :)  Super kewl. :)

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From johnm-antlr at non.net  Thu Apr 22 12:58:26 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] if-then-else - Grammar generates faulty parser code
In-Reply-To: <s087b1f6.092@sinclair.provo.novell.com>
References: <s087b1f6.092@sinclair.provo.novell.com>
Message-ID: <16520.9186.950513.495147@despot.non.net>

>>>>> "Jeff" == Jeff Vincent <JVincent@Novell.Com> writes:
[...]

> I'm not sure I follow exactly, or maybe misunderstanding what you said.
> I create an imaginary token called "COMBO" that could have no siblings
> (equivalent to EMPTY_BLOCK).  I didn't think it should be necessary to
> create a token specifically to represent "EMPTY_BLOCK" since null works
> just fine and from my perspective, denotes exactly what I want.

Check out the literature on the Null Object pattern.


> This has allowed me to just have one generic AST build rule that handles
> all cases (for the "IF").  I don't have to add additional code to check
> for "EMPTY_BLOCK" in order to then insert a special imaginary token.
> From my non-purist point of view it seemed simple and straight forward
> and works without issue.

Ah, but the single place that you're saving work in the parser makes for a
more complicated tree that may end up being used/traversed/etc. multiple
times.

Obviously, in your specific example, it sounds like you (currently) only
have a single TreeExecutor pass.

Hope this helps,
		John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From markl at glyphic.com  Thu Apr 22 13:01:20 2004
From: markl at glyphic.com (Mark Lentczner)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] Unicode handling
In-Reply-To: <20040422085747.GD11404@cs.utwente.nl>
References: <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com> <16519.1090.512649.697414@despot.non.net> <151881E9-93F5-11D8-9A7D-000A95891192@cs.usfca.edu> <200404220246.41528.sk@z.pl> <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com> <16519.1090.512649.697414@despot.non.net> <151881E9-93F5-11D8-9A7D-000A95891192@cs.usfca.edu> <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com> <16519.1090.512649.697414@despot.non.net> <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com> <20040422085747.GD11404@cs.utwente.nl>
Message-ID: <D2E7B5AC-9497-11D8-9E9F-000393A56BB6@glyphic.com>


> Well the C++ stuff truncates to 8 bits whenever it sees fit.
My plan is to not do anything in 16 bits.  Just lex the UTF-8 as a pure 
8-bit stream.  So, so long as the Antlr generator and the generated C++ 
code and the support lib are all 8-bit character clean, I'm home free.

> Note that 2.7.4 will barf out attempts at 16 bit char constants.
Do you mean that 2.7.4 won't allow '\u00BF' but will allow '\277'?  Or 
will 2.7.4 only be upset if the upper byte isn't zero, i.e. '\u2004'?  
(Yes, I'm still on 2.7.3)

> If you trick antlr to make the right bitsets,
Er, is there a known issue with bitsets and 8-bit high characters?

> you may get away by handcoding/modifying the few rules that need to 
> deal with UTF8 multibyte
> sequences.
Actually, the few productions that require interpretation of Unicode 
characters (only allow alphabetics, for example) are complex enough 
that I have a perl program that takes a Unicode set description, 
generates the Antlr rules for matching the set when represented as 
UTF-8 sequences.

> The moment you put the icky bits in nice 8 bit strings you're
> basically homefree except for sorting out the actual lenghts of the 
> text
> etc.
All the literals in our source language have only 7-bit strings, so no 
concern here.  But even if we supported something like U+F7 (the 
division sign, ?, UTF-8 encoded as 0xC3 0xB7), then I'd just code the 
literal as "\u00C3\u00B7" or "\303\267", and let Antlr think it is a 
two-character string.

> You could get away with redefining the strings in antlr to wchars and
> recompiling a hacked version of the support lib to have a bit more 
> 'room'
> to maneuver (sp?). That has been done before with some luck.
<speak voice="kid from Time Bandits"> No, don't touch it.... wchar is 
EEEEEEVIL! </speak>

> I commend you if you do it with the current support lib (in both cases 
> ;) )
Any code changes will be coming your way, Ric...

> Might be preferable over reinventing the wheel though. And for me a lot
> quicker to implement stuff (unless there's volunteers out there?).
If (and it is a big if), Antlr wanted to support the idea of "specify a 
parser with a Unicode source  character set, but the generated parser 
reads and parses the UTF-8 encoded stream representation"  I believe 
that I can offer the code that would make this automatic.

For example:
	options { charVocabulary: Unicode-via-UTF-8; }
	...
	ALPHA_OMEGA: "\u0391\u03A9" | "\u03B1\u03C9" ;
	DASHES: '\u2010'..'\u2015' ;

Would internally become:
	options { charVocabulary: '\u0000'..'\u00FF'; }
	...
	ALPHA_OMEGA: "\316\221\316\251" | "\316\261\317\211" ;
	DASHES: '\342' '\200' '\220'..'\225' ;

The only hitch is that the user would have to probably up the value of 
k manually (I don't think I could or want to compute the "correct" new 
value.)  I have an algorithm working that works for these and more 
complicated cases as well. (It handles the XML 1.0 and XML 1.1 name 
productions, which are pretty hairy!)

> And I also wonder what you'll get if you feed the lexer in java mode a
> sequence that contains such a value broken up over two UTF-16 values 
> (that
> for lexer terms should be treated as one!).
Java prior to 1.5 is blissfully unaware.  It will think of a UTF-16 
surrogate pair as two characters.  In 1.5 it will start thinking of the 
type 'char' as UTF-16 code value, not a Unicode char.  Not clear how 
this will affect things, but I doubt they'll break any old APIs.

What this means is that parsers currently built in Antlr really parse 
UTF-16 input, not Unicode.  So if you want to match U+1D11E (Musical 
Symbol G Clef), you have to match the string "\uD834\uDD1E".

- Mark



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From markl at glyphic.com  Thu Apr 22 13:11:55 2004
From: markl at glyphic.com (Mark Lentczner)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] Unicode handling
In-Reply-To: <20040422170434.F1A4C57C005@h4866.serverkompetenz.net>
References: <20040422170434.F1A4C57C005@h4866.serverkompetenz.net>
Message-ID: <4D129F50-9499-11D8-9E9F-000393A56BB6@glyphic.com>

> Hmm, handling of UTF-8 is more expensive when you need to process it 
> (case folding, composition etc.) so this transformation format is not 
> recommended to be used that way.
Well, that decision is dependent on quite a large number of factors and 
varies greatly in different environments.  For my current project, 
UTF-8 works very well as an internal format for Unicode character 
strings.  Of course, the external view the system presents is 
completely Unicode clean and makes no reference to the in-memory 
encoding.

> In the case of antlr though it seems to fit well except that defining 
> identifiers might be a bit unintuitive.
This could be automated in Antlr itself.  See my suggestion in my post 
of a few minutes ago.  Of course, I'm not sure how many people using 
Antlr and C++ would want to take the approach of specify a lexer over 
Unicode, but generate a lexer taking UTF-8.  On the other hand, given 
the problems of handling Unicode in C++ (given the lack of a standard 
way to do it, and the difficulty of incorporating external Unicode 
libraries), perhaps this is how most people would want to do it.  For 
me, I see no practical alternative.

> For antlr, though, it would be great if there were some more generic 
> support. Identifier start and middle chars, numbers/digits etc. could 
> be predefined instead to have them to declare them over and over again 
> in lexer grammars.
Were there only a general consensus on what these sets should be.  One 
could pre-define (or allow to be imported) classes based on the Unicode 
properties lists.  (And indeed, these could perhaps be internally 
optimized to use some Unicode library rather than 
tests/switches/bitsets.)  Even in our project, where we want a great 
deal of conformance with XML, we have to very carefully choose our 
Identifier grammar and can't just use the Name production from XML (1.0 
or 1.1).

- Mark



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From markl at glyphic.com  Thu Apr 22 13:12:43 2004
From: markl at glyphic.com (Mark Lentczner)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] Unicode handling
In-Reply-To: <20040422085747.GD11404@cs.utwente.nl>
References: <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com> <16519.1090.512649.697414@despot.non.net> <151881E9-93F5-11D8-9A7D-000A95891192@cs.usfca.edu> <200404220246.41528.sk@z.pl> <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com> <16519.1090.512649.697414@despot.non.net> <151881E9-93F5-11D8-9A7D-000A95891192@cs.usfca.edu> <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com> <16519.1090.512649.697414@despot.non.net> <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com> <20040422085747.GD11404@cs.utwente.nl>
Message-ID: <6A0447EF-9499-11D8-9E9F-000393A56BB6@glyphic.com>

Okay, given what I've heard here, and based on some quick experiments, 
this is what I'm going to do:

I'm building a C++ generated lexer in Antlr that parses UTF-8 input.

1) This means that the C++ code has to be able to handle matching bytes 
with the high bit set: 0xBF.  So far, this looks like it won't be a big 
issue - either it works or the Antlr support lib will need some small 
tweaking to make sure all is 8-bit clean.  (Any changes will be comin' 
your way, Ric.)

2) The C++ generated code for such things looks okay except that the 
bit sets look twice as long as they should be (512 bits), even though 
all the correct bits are set.

3) I am using '\u00BF' and the like in my Antlr grammar only because I 
don't like octal, '\277'.  I do wish Antlr supported a third character 
escape that was hex '\xBF', since I'm not really matching Unicode here. 
  Of course, none of this makes any difference in the generated code...

- Mark

Mark Lentczner
markl@wheatfarm.org
http://www.wheatfarm.org/



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From johnm-antlr at non.net  Thu Apr 22 13:23:55 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:44 2004
Subject: Antlr v3 & Trees (was: [antlr-interest] if-then-else - Grammar generates faulty parser code)
In-Reply-To: <FF1FF0C8-9488-11D8-82DF-000393B5606C@codetransform.com>
References: <s087b1f6.092@sinclair.provo.novell.com>
	<FF1FF0C8-9488-11D8-82DF-000393B5606C@codetransform.com>
Message-ID: <16520.10715.388715.993606@despot.non.net>

>>>>> "Monty" == Monty Zukowski <monty@codetransform.com> writes:
[...]

> Jeff, You have a unique situation in that your tree parser actions are
> your runtime and you call them to "execute" the script you have parsed.
> Actually that's pretty clever -- (NOTE TO TERENCE) we (ahem, as I recall)
> haven't given much thought to how to create interpreters with ANTLR
> beyond "do it in the actions."  This merits attention at the next ANTLR
> Cabal to refine ANTLR 3 designs.

I guess I'm a bit confused by what you're saying here.  Creating a tree
walker which executes as its actions is basically logically the same as
doing the execution in parser actions (but you get all of the benefits of
having a clean IR, etc. including the ability to jam in earlier tree
walkers which hack on the tree).

This approach blends nicely into the realm of optimizing interpreters, JIT
compilers, and dynamic compilers.


> Loring and I have been trying to distill comprehensive guidelines to tree
> building.

Cool.  Feel free to drag me in.

> We've been examining the "EMPTY_BLOCK" placeholder node trick.  The
> tradeoff is computation v. space but also introducing a placeholder node
> may be required to eliminate ambiguity to support something like the C
> "for" -- for: #(FOR e1:expr e2:expr e3:expr)--if you made the expr's
> optional then you would need some other sentinel such as leaving in the
> semicolon so you knew which place the expr was in to accommodate for
> empty exprs.

> 	But without an ambiguity it really becomes space v. code size.
> Ideally we(I)'ll come up with a number of distinct scenarios and work
> them in different styles to really nail down the tradeoffs.

I'm perplexed.  Do you have some example where the addition of an imaginary
node is some kind of problem?  The only examples that I can think of would
all be issues of a very poorly designed tree to begin with.

Thanks,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From lists at lischke-online.de  Thu Apr 22 13:28:11 2004
From: lists at lischke-online.de (Mike Lischke)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] Unicode handling
In-Reply-To: <4D129F50-9499-11D8-9E9F-000393A56BB6@glyphic.com>
Message-ID: <20040422202216.3A4A657C005@h4866.serverkompetenz.net>

> Were there only a general consensus on what these sets should 
> be.  One could pre-define (or allow to be imported) classes 
> based on the Unicode properties lists.  (And indeed, these 
> could perhaps be internally optimized to use some Unicode 
> library rather than
> tests/switches/bitsets.)  Even in our project, where we want 
> a great deal of conformance with XML, we have to very 
> carefully choose our Identifier grammar and can't just use 
> the Name production from XML (1.0 or 1.1).

I've got the impression that most of the time there *is* actually an agreement about what constitutes an identifier. For
those who need a different definition there is still the classic way in the lexer. But for Unicode there is a general
character class to identify whether a character belongs to an identifier in the programming language sense
(http://www.unicode.org/reports/tr31/). For numbers the task becomes a bit more difficult because the western (actually
arabian) digits are not enough to define a number in all languages, so you would need character classes in this and
certainly other cases. Providing some predefined lexer rules (in the native lexer language) for such standard things
like identifiers and numbers would simplify life for the grammar writer and would improve performance because there can
be native access in the lexer to test characters for their class.

Mike
--
www.soft-gems.net



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From bharath at starthis.com  Thu Apr 22 14:22:46 2004
From: bharath at starthis.com (Bharath S)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] Resolving non-determinism: a clarification needed!
In-Reply-To: <200404211953.11513.tineo@ac.uma.es>
Message-ID: <000001c428af$f5311940$03020a0a@devel.starthis.com>


Hi Antlers,

I have a rule for a constant, which is of the form:
----------------------------------------------------------------------------
Constant: (integer | signed_integer | real | Identifier | LPAREN (...) |
LBRACKET (.....) | NOT (......) | Boolean | Character_literal);
----------------------------------------------------------------------------

If I have another rule of the form:
-----------------------
Negate: NOT(Integer);
-----------------------

when I use these rules together,
------------------------
new_Rule: Constant|Negate;
------------------------

There is a clash between the two alternates because of the keyword "NOT".
The only way I know to solve this ND is to create a new rule that resembles
the rule "constant" with the NOT(....) part of the rule replaced by
NOT(.....|Integer).

Eg. new_Rule: (integer | blah | blah | NOT(...|Integer) | blah | blah);

This is just a simple example and I have several such non determinisms. Is
this the right way to solve this non-determinism or am I missing something
huge? Is this duplication of code an acceptable approach? Please feel free
to give your comments.

Thanks!

Bharath
 

-----Original Message-----
From: Adrian Tineo [mailto:tineo@ac.uma.es] 
Sent: Wednesday, April 21, 2004 12:53 PM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] Transforming trees: modify input tree

Thanks for your answer Monty.

I'd prefer to keep the proper line number with the nodes rather than
modifying 
the new line behaviour of the emitter, I think it is more organized and that

it could grow better. 

Nevertheless, I have been thinking about ways of handling the tree. I am 
currently trying to write a transform-treeparser in a by-hand fashion
because 
I need to move freely in the tree and not only with the subtrees resulting 
from rules.

My approach is to get certain kinds of nodes with findAllPartial and
exchange 
nodes as needed. This way I also get freedom to update line numbers as I go.

I am going to need the double-linked facility of the TNode class provided to

go back and forth from certain nodes, but from what I read is "currently 
incomplete". What do I need to add/change to implement it?

Thanks for your support, and great work with the parsing and tree 
generation ;=)

Adrian Tineo

El Mi?rcoles, 21 de Abril de 2004 19:24, Monty Zukowski escribi?:
> You can walk through the tree, updating line numbers as needed, or you
> can modify the newline handling code of GnuCEmitter.g to do what you
> want.  It's kind of tricky to mix line number preservation and new
> code.
>
> The emitter is designed to print newlines or #line directives only when
> it sees that the line number has changed from what was last printed.  A
> different strategy might be more appropriate in your case.
>
> Monty
>
> On Apr 21, 2004, at 4:46 AM, Adrian Tineo wrote:
> > Hello there
> >
> > I am using the GNU C grammar available at antlr.org. Thanks to this
> > grammar I
> > can easily create a tree for a C program. I need to modify that tree
> > and
> > print it back to code. Fortunately, the GNU C grammar comes with a
> > GnuCEmittter which does just that, it prints out a tree back to code.
> >
> > If I have
> > 	line i:	a=b;
> > 	line i+1:   (left blank)
> > 	line i+2:	return 0;
> > I want to have
> > 	line i:	tmp=b;
> > 	line i+1:	a=tmp;
> > 	line i+2:	tmp=NULL;
> > 	line i+3:	(left blank)
> > 	line i+4:	return 0;
> >
> > As you can see I need to change the node for a=b for three nodes, that
> > I want
> > to print to different lines and still get the proper separation with
> > the
> > following code.
> >
> > But I get
> > 	line i:	tmp=b;
> > 	line i+1:	a=tmp;
> > 	line i+2:	tmp=NULL; return 0;
> >
> > I can easily specify the line numbers for the newly created nodes but
> > in order
> > to keep the separations right, I would need to update the line number
> > for
> > every node that comes afterwards.
> >
> > As I am extending the treeparser grammar and don't want to override
> > the rules
> > I don't need to work with, I would need to update the line numbers in
> > the
> > INPUT tree so automatic tree generation for the rules I don't override
> > would
> > copy the rest of the input nodes(with the updated line numbers) to the
> > ouput
> > tree.
> >
> > And the question is, how can I do that? How can I have access to the
> > input
> > tree for an AST-transforming treeparser?
> > Or is there a better way to handle this problem?
> >
> > Any help appreciated. Thanks.
> >
> > Adrian Tineo
> >
> >
> >
> >
> > Yahoo! Groups Links
>
> Monty Zukowski
> ANTLR & Java Consultant
> http://www.codetransform.com



 
Yahoo! Groups Links



 






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Thu Apr 22 14:31:16 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] Resolving non-determinism: a clarification needed!
In-Reply-To: <000001c428af$f5311940$03020a0a@devel.starthis.com>
References: <000001c428af$f5311940$03020a0a@devel.starthis.com>
Message-ID: <62EA4FE8-94A4-11D8-82DF-000393B5606C@codetransform.com>

On Apr 22, 2004, at 2:22 PM, Bharath S wrote:

> Eg. new_Rule: (integer | blah | blah | NOT(...|Integer) | blah | blah);
>
> This is just a simple example and I have several such non 
> determinisms. Is
> this the right way to solve this non-determinism or am I missing 
> something
> huge? Is this duplication of code an acceptable approach? Please feel 
> free
> to give your comments.
>
> Thanks!
>
If you have to handle it in the lexer then that's really the only way 
to do it.  Why not handle it in the parser?

Monty

Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From markl at glyphic.com  Thu Apr 22 14:39:11 2004
From: markl at glyphic.com (Mark Lentczner)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] Unicode handling
In-Reply-To: <20040422202216.3A4A657C005@h4866.serverkompetenz.net>
References: <20040422202216.3A4A657C005@h4866.serverkompetenz.net>
Message-ID: <7E0A5BD2-94A5-11D8-9E9F-000393A56BB6@glyphic.com>


On Apr 22, 2004, at 1:28 PM, Mike Lischke wrote:
> But for Unicode there is a general character class to identify whether 
> a character belongs to an identifier in the programming language sense 
> (http://www.unicode.org/reports/tr31/).
That report, and the Unicode concept of the identifier properties are 
really considered starting points.  The various character classes 
created by it could be predefined (or imported) into an Antlr grammar, 
but, as that report suggests, specific languages would then need to 
compose their own NAME_START and NAME_CHAR rules from them.  Alas, 
since Antlr doesn't have set exclusion (i.e.: "NAME_CHAR: 
UNICODE_IDENTIFIER_EXTEND -  UNICODE_NUMBER;") it might be hard to 
compose what one wants.

> Providing some predefined lexer rules (in the native lexer language) 
> for such standard things
> like identifiers and numbers would simplify life for the grammar 
> writer and would improve performance because there can be native 
> access in the lexer to test characters for their class.
I like the idea of either, a) making a UnicodeLexer that one can 
inherit from that would have these rules in them, or b) adding some 
sort of syntax for selecting sets of characters based on the Unicode 
properties.  Something like: U<Alphabetic> or U<Hex_Digit> which would 
be a match for all characters that have the property.

	- Mark

Mark Lentczner
markl@wheatfarm.org
http://www.wheatfarm.org/



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From bharath at starthis.com  Thu Apr 22 15:25:57 2004
From: bharath at starthis.com (Bharath S)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] Resolving non-determinism: a clarification needed!
In-Reply-To: <62EA4FE8-94A4-11D8-82DF-000393B5606C@codetransform.com>
Message-ID: <000001c428b8$c8c454e0$03020a0a@devel.starthis.com>

Hi Monty,

Its actually in the parser. I used upper case for the rules just to give an
example. Both the rules that I have mentioned are parser rules and not lexer
rules. Does that give me any edge?

Thanks for your prompt reply!

Bharath
 

-----Original Message-----
From: Monty Zukowski [mailto:monty@codetransform.com] 
Sent: Thursday, April 22, 2004 4:31 PM
To: antlr-interest@yahoogroups.com
Cc: Monty Zukowski
Subject: Re: [antlr-interest] Resolving non-determinism: a clarification
needed!

On Apr 22, 2004, at 2:22 PM, Bharath S wrote:

> Eg. new_Rule: (integer | blah | blah | NOT(...|Integer) | blah | blah);
>
> This is just a simple example and I have several such non 
> determinisms. Is
> this the right way to solve this non-determinism or am I missing 
> something
> huge? Is this duplication of code an acceptable approach? Please feel 
> free
> to give your comments.
>
> Thanks!
>
If you have to handle it in the lexer then that's really the only way 
to do it.  Why not handle it in the parser?

Monty

Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html




 
Yahoo! Groups Links



 






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Thu Apr 22 13:48:56 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:44 2004
Subject: Antlr v3 & Trees (was: [antlr-interest] if-then-else - Grammar generates faulty parser code)
In-Reply-To: <16520.10715.388715.993606@despot.non.net>
References: <s087b1f6.092@sinclair.provo.novell.com> <FF1FF0C8-9488-11D8-82DF-000393B5606C@codetransform.com> <16520.10715.388715.993606@despot.non.net>
Message-ID: <79532FBE-949E-11D8-82DF-000393B5606C@codetransform.com>

On Apr 22, 2004, at 1:23 PM, John D. Mitchell wrote:

> I'm perplexed.  Do you have some example where the addition of an 
> imaginary
> node is some kind of problem?  The only examples that I can think of 
> would
> all be issues of a very poorly designed tree to begin with.

Consider the following tree grammar fragment:

Example A:

selectStatement
	:
	queryExpression
	(computeClause)?
	(forClause)?
	(optionClause)?
	;

computeClause
	:
	#(COMPUTE
		(identifier expression)+
		(BY (expression)+)?
          )
	;

My initial thought was to not have computeClause (and others) be 
optional.  Instead I would have a node like COMPUTE_NULL.  But why?  
I'm serious, what exactly are the advantages of the following?

Example B:

selectStatement
	:
	queryExpression
	computeClause
	forClause
	optionClause
	;

computeClause
	:
	COMPUTE_NULL
	| #(COMPUTE
		(identifier expression)+
		(BY (expression)+)?
          )
	;

I know I'm being pedantic, but I really am struggling to justify my 
urge to give trees firm positional structure.  But maybe it's just me.  
Which would you favor and why?  To me A is looking succinct, is 
unambiguous, and results in a leaner tree.  B is more rigid but does 
not seem to save on computation, it only defers the decision until 
inside computeClause.  And if I'm totally off base with even suggesting 
B then help me refine when it is good practice to go for the tree which 
favors empty placeholder nodes.

And there may be other alternative examples.  Jump in any time folks :)

Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Thu Apr 22 21:26:47 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:44 2004
Subject: Antlr v3 & Trees (was: [antlr-interest] if-then-else - Grammar generates faulty parser code)
In-Reply-To: <79532FBE-949E-11D8-82DF-000393B5606C@codetransform.com>
References: <s087b1f6.092@sinclair.provo.novell.com> <FF1FF0C8-9488-11D8-82DF-000393B5606C@codetransform.com> <16520.10715.388715.993606@despot.non.net> <79532FBE-949E-11D8-82DF-000393B5606C@codetransform.com>
Message-ID: <6F5F1CF9-94DE-11D8-AD73-000393BB647E@cs.usfca.edu>


On Apr 22, 2004, at 1:48 PM, Monty Zukowski wrote:

> On Apr 22, 2004, at 1:23 PM, John D. Mitchell wrote:
>
>> I'm perplexed.  Do you have some example where the addition of an
>> imaginary
>> node is some kind of problem?  The only examples that I can think of
>> would
>> all be issues of a very poorly designed tree to begin with.
>
> Consider the following tree grammar fragment:
>
> Example A:
>
> selectStatement
> 	:
> 	queryExpression
> 	(computeClause)?
> 	(forClause)?
> 	(optionClause)?
> 	;
>
> computeClause
> 	:
> 	#(COMPUTE
> 		(identifier expression)+
> 		(BY (expression)+)?
>           )
> 	;

Hi Monty,

My typical example of where you want a "placeholder" is when you have 
multiple optional things in a row.  For example, the expressions in a 
FOR statement.  Do you want

forRule : #(FOR (expr)? (expr)? (expr)?) ;

??  Probably not as the grammar is inherently ambiguous.  Position has 
"meaning" in this case.

Is that a good example?

Ter





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Thu Apr 22 21:28:35 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] Resolving non-determinism: a clarification needed!
In-Reply-To: <000001c428b8$c8c454e0$03020a0a@devel.starthis.com>
References: <000001c428b8$c8c454e0$03020a0a@devel.starthis.com>
Message-ID: <AF50FD90-94DE-11D8-8ACF-000393B5606C@codetransform.com>

Lexer rules are always upper case, parser rules always lower case, so I 
was confused by your example.  You can use a syntactic predicate:

new_Rule: (constant)=>constant
	| negate;

Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html

On Apr 22, 2004, at 3:25 PM, Bharath S wrote:

> Hi Monty,
>
> Its actually in the parser. I used upper case for the rules just to 
> give an
> example. Both the rules that I have mentioned are parser rules and not 
> lexer
> rules. Does that give me any edge?
>
> Thanks for your prompt reply!
>
> Bharath
>
>
> -----Original Message-----
> From: Monty Zukowski [mailto:monty@codetransform.com]
> Sent: Thursday, April 22, 2004 4:31 PM
> To: antlr-interest@yahoogroups.com
> Cc: Monty Zukowski
> Subject: Re: [antlr-interest] Resolving non-determinism: a 
> clarification
> needed!
>
> On Apr 22, 2004, at 2:22 PM, Bharath S wrote:
>
>> Eg. new_Rule: (integer | blah | blah | NOT(...|Integer) | blah | 
>> blah);
>>
>> This is just a simple example and I have several such non
>> determinisms. Is
>> this the right way to solve this non-determinism or am I missing
>> something
>> huge? Is this duplication of code an acceptable approach? Please feel
>> free
>> to give your comments.
>>
>> Thanks!
>>
> If you have to handle it in the lexer then that's really the only way
> to do it.  Why not handle it in the parser?
>
> Monty
>
> Monty Zukowski
>
> ANTLR & Java Consultant -- http://www.codetransform.com
> ANSI C/GCC transformation toolkit --
> http://www.codetransform.com/gcc.html
> Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Thu Apr 22 21:29:31 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] Resolving non-determinism: a clarification needed!
In-Reply-To: <000001c428b8$c8c454e0$03020a0a@devel.starthis.com>
References: <000001c428b8$c8c454e0$03020a0a@devel.starthis.com>
Message-ID: <D08E2612-94DE-11D8-8ACF-000393B5606C@codetransform.com>

Lexer rules are always upper case, parser rules always lower case, so I 
was confused by your example.  You can use a syntactic predicate:

new_Rule: (constant)=>constant
	| negate;

Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html

On Apr 22, 2004, at 3:25 PM, Bharath S wrote:

> Hi Monty,
>
> Its actually in the parser. I used upper case for the rules just to 
> give an
> example. Both the rules that I have mentioned are parser rules and not 
> lexer
> rules. Does that give me any edge?
>
> Thanks for your prompt reply!
>
> Bharath
>
>
> -----Original Message-----
> From: Monty Zukowski [mailto:monty@codetransform.com]
> Sent: Thursday, April 22, 2004 4:31 PM
> To: antlr-interest@yahoogroups.com
> Cc: Monty Zukowski
> Subject: Re: [antlr-interest] Resolving non-determinism: a 
> clarification
> needed!
>
> On Apr 22, 2004, at 2:22 PM, Bharath S wrote:
>
>> Eg. new_Rule: (integer | blah | blah | NOT(...|Integer) | blah | 
>> blah);
>>
>> This is just a simple example and I have several such non
>> determinisms. Is
>> this the right way to solve this non-determinism or am I missing
>> something
>> huge? Is this duplication of code an acceptable approach? Please feel
>> free
>> to give your comments.
>>
>> Thanks!
>>
> If you have to handle it in the lexer then that's really the only way
> to do it.  Why not handle it in the parser?
>
> Monty
>
> Monty Zukowski
>
> ANTLR & Java Consultant -- http://www.codetransform.com
> ANSI C/GCC transformation toolkit --
> http://www.codetransform.com/gcc.html
> Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Thu Apr 22 21:41:45 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:44 2004
Subject: Antlr v3 & Trees (was: [antlr-interest] if-then-else - Grammar generates faulty parser code)
In-Reply-To: <6F5F1CF9-94DE-11D8-AD73-000393BB647E@cs.usfca.edu>
References: <s087b1f6.092@sinclair.provo.novell.com> <FF1FF0C8-9488-11D8-82DF-000393B5606C@codetransform.com> <16520.10715.388715.993606@despot.non.net> <79532FBE-949E-11D8-82DF-000393B5606C@codetransform.com> <6F5F1CF9-94DE-11D8-AD73-000393BB647E@cs.usfca.edu>
Message-ID: <8688A095-94E0-11D8-8ACF-000393B5606C@codetransform.com>

On Apr 22, 2004, at 9:26 PM, Terence Parr wrote:

> My typical example of where you want a "placeholder" is when you have
> multiple optional things in a row.  For example, the expressions in a
> FOR statement.  Do you want
>
> forRule : #(FOR (expr)? (expr)? (expr)?) ;
>
> ??  Probably not as the grammar is inherently ambiguous.  Position has
> "meaning" in this case.
>
> Is that a good example?


Well, my select statement is multiple optional things in a row:

> selectStatement
> 	:
> 	queryExpression
> 	(computeClause)?
> 	(forClause)?
> 	(optionClause)?
> 	;

And I'm arguing that it's ok in this case because the grammar is not 
ambiguous.  So is the rule "when you have multiple optional things in a 
row and it is ambiguous?"  Or are there other considerations too?

Monty



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From johnm-antlr at non.net  Thu Apr 22 22:12:59 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] Re: Antlr v3 & Trees
In-Reply-To: <6F5F1CF9-94DE-11D8-AD73-000393BB647E@cs.usfca.edu>
References: <s087b1f6.092@sinclair.provo.novell.com>
	<FF1FF0C8-9488-11D8-82DF-000393B5606C@codetransform.com>
	<16520.10715.388715.993606@despot.non.net>
	<79532FBE-949E-11D8-82DF-000393B5606C@codetransform.com>
	<6F5F1CF9-94DE-11D8-AD73-000393BB647E@cs.usfca.edu>
Message-ID: <16520.42459.289469.789798@despot.non.net>

Sorry for responding to Ter's reply to you but I don't seem to have
received your message.

>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
>>>>>> On Apr 22, 2004, at 1:48 PM, Monty Zukowski writes:
>> On Apr 22, 2004, at 1:23 PM, John D. Mitchell writes:
[...]

>>> I'm perplexed.  Do you have some example where the addition of an
>>> imaginary node is some kind of problem?  The only examples that I can
>>> think of would all be issues of a very poorly designed tree to begin
>>> with.

>> Consider the following tree grammar fragment:

>> Example A:

>> selectStatement : queryExpression (computeClause)?  (forClause)?
>> (optionClause)?
>> ;

>> computeClause : #(COMPUTE (identifier expression)+ (BY (expression)+)?
>> )
>> ;

That's okay but I don't see how that's an example where using imaginary
nodes instead would *create* a problem.

Thanks,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Thu Apr 22 22:31:40 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:44 2004
Subject: Antlr v3 & Trees (was: [antlr-interest] if-then-else - Grammar generates faulty parser code)
In-Reply-To: <6F5F1CF9-94DE-11D8-AD73-000393BB647E@cs.usfca.edu>
References: <s087b1f6.092@sinclair.provo.novell.com> <FF1FF0C8-9488-11D8-82DF-000393B5606C@codetransform.com> <16520.10715.388715.993606@despot.non.net> <79532FBE-949E-11D8-82DF-000393B5606C@codetransform.com> <6F5F1CF9-94DE-11D8-AD73-000393BB647E@cs.usfca.edu>
Message-ID: <7FC46E93-94E7-11D8-8ACF-000393B5606C@codetransform.com>

On Apr 22, 2004, at 9:26 PM, Terence Parr wrote:

> forRule : #(FOR (expr)? (expr)? (expr)?) ;
>
> ??  Probably not as the grammar is inherently ambiguous.  Position has
> "meaning" in this case.
>
> Is that a good example?

So let's work this through with parser rules and tree parser rules.  We 
could have, instead, left the semicolons:

forRule : "for"^ (expr)? SEMI (expr)? SEMI (expr)? SEMI ;
forRule : #(FOR (expr)? SEMI (expr)? SEMI (expr)? SEMI) ;

This uses more space but is easiest to read.

Or we could have created new imaginary roots:
forRule! : f:"for" (e1:expr )? SEMI (e2:expr)? SEMI (e3:expr)? SEMI
{##=#(f,#([FOR_INIT],e1),#([FOR_TEST],e2),#([FOR_UPDATE],e3));} ;
forRule : #(FOR (#(FOR_INIT expr))? (#(FOR_TEST expr))? (#(FOR_UPDATE 
expr))?) ;

This uses more space than the following but doesn't force us to add 
EMPTY_EXPR to the expr rule.  Not a win for C since other places use 
empty expressions too, but could be relevant to other languages, maybe.

Or, as you did, we could force EMPTY_EXPR in place of the missing expr:
forRule! : f:"for" (e1:expr)? SEMI (e2:expr)? SEMI (e3:expr)? SEMI
{
	if (e1==null) e1=#[EMPTY_EXPR];
	if (e2==null) e2=#[EMPTY_EXPR];
	if (e3==null) e3=#[EMPTY_EXPR];
	##=#(f,e1,e2,e3);
} ;
forRule : #(FOR (expr)? (expr)? (expr)?) ;

This one is easy to read as a tree grammar and uses the least amount of 
space in the tree.

Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From johnm-antlr at non.net  Thu Apr 22 22:37:59 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] Re: Antlr v3 & Trees
In-Reply-To: <8688A095-94E0-11D8-8ACF-000393B5606C@codetransform.com>
References: <s087b1f6.092@sinclair.provo.novell.com>
	<FF1FF0C8-9488-11D8-82DF-000393B5606C@codetransform.com>
	<16520.10715.388715.993606@despot.non.net>
	<79532FBE-949E-11D8-82DF-000393B5606C@codetransform.com>
	<6F5F1CF9-94DE-11D8-AD73-000393BB647E@cs.usfca.edu>
	<8688A095-94E0-11D8-8ACF-000393B5606C@codetransform.com>
Message-ID: <16520.43959.217643.789583@despot.non.net>

>>>>> "Monty" == Monty Zukowski <monty@codetransform.com> writes:
[...]

> Well, my select statement is multiple optional things in a row:

>> selectStatement : queryExpression (computeClause)?  (forClause)?
>> (optionClause)?
>> ;

> And I'm arguing that it's ok in this case because the grammar is not
> ambiguous.  So is the rule "when you have multiple optional things in a
> row and it is ambiguous?"  Or are there other considerations too?

Do you do any non-local, manual tree exploration (such as find a particular
child of an ancestor) or manipulation?  Having to deal with optional stuff
sucks in those cases.

The rationale for this really does follow the Null Object pattern.


Another facet that I think people discount too much is the fact that they
have complete control over their trees.  So, why not create something that
is as clear, regular, powerful, etc. as you can?  Yes, I understand that
creating a really good initial tree in the parser can sometimes be very
difficult (given the wackiness needed in the parser to parse some
languages) but it's quite possible to do all we can do in a basic way in
the parser and then write a tree transform pass which cleans things up for
the later stages.

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From poornima.prakash at cgi.com  Thu Apr 22 22:36:57 2004
From: poornima.prakash at cgi.com (Poornima Prakash)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] if-then-else - Grammar generates faulty
	parser code
Message-ID: <s088f8ee.030@bangalore.imrglobal.com>

Thanks a lot for the prompt reply. That helped!

-Poornima

>>> monty@codetransform.com 04/22/04 10:18PM >>>
That generated code looks correct to me.  The statement "rule_AST = 
currentAST.root;" needs to be run at the end of the try block.  You are 
reaching the default block because you've hit EOF but the parser is 
expecting more.  Add EOF at the end of 'rule', or make a top-level rule 
that calls 'rule'.  When you call a parser rule it must be a top level 
rule--which means it must not be called by other rules.  Try adding 
this to your grammar and then calling in at topRule.

topRule: rule ;


Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html

On Apr 22, 2004, at 12:16 AM, poornima_prakash wrote:

> We have a classic 'if-then-else' rule in the grammar file. The
> problem we are facing is with the ANTLR versions 2.7.2 and 2.7.4rc1.
>
> The 'rule' in the grammar file is defined as follows :
>
>   rule options { defaultErrorHandler = true;} :
>     ifPart thenPart
>     (options {warnWhenFollowAmbig = false;} :
>         elsePart
>         )?;
>         
>   ifPart: "if"^ LPARENTHESIS! conditional_expression RPARENTHESIS!;
>     
>   thenPart  : "then"^ stmt_blk;
>     
>   elsePart  :"else"^ stmt_blk;
>
> Since the 'else' part is optional, when we give an input rule with
> only the 'if-then' and without the 'else', AST is not generated
> correctly. It stops at the root node!
>
> However, if we manipulate the generated C# code, AST is correctly
> generated. We have to  move the line "rule_AST = currentAST.root;" in
> the generated sources such that it is traversed even when only 'if-
> then' input rule is given.
>
> To be more precise, the line "rule_AST = currentAST.root;"  at the
> end of the 'try' block in the below (automatically generated parser)
> code has to be moved into the 'default' case of switch-case for the
> correct AST to get generated.
>
> public void rule() //throws RecognitionException, TokenStreamException
> {
>         
>         returnAST = null;
>         ASTPair currentAST = new ASTPair();
>         AST rule_AST = null;
>         
>         try {      // for error handling
>             ifPart();
>             astFactory.addASTChild(currentAST, returnAST);
>             thenPart();
>             astFactory.addASTChild(currentAST, returnAST);
>             {
>                 switch ( LA(1) )
>                 {
>                 case LITERAL_else:
>                 {
>                     elsePart();
>                     astFactory.addASTChild
> (currentAST, returnAST);
>                     break;
>                 }
>                 case LITERAL_if:
>                 ....
>                 case IDENTIFIER:
>                 {
>                     break;
>                 }
>                 default:
>                 {
>                     throw new NoViableAltException
> (LT(1), getFilename());
>                 }
>                 }
>             }
>             rule_AST = currentAST.root;
>         }
>         catch (RecognitionException ex)
>         {...
>         }
>         returnAST = rule_AST;
>     }
>
>
> Please advice the required grammar change such that the AST gets
> generated properly without moving around the generated code.
>
> Looking forward to your reply.
>
> regards,
> Poornima and Raghu.
>     
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>




Yahoo! Groups Links




__________________________________________________
************** Confidentiality Notice ************
 
Proprietary/Confidential Information belonging to 
CGI may be contained in this message. If you are 
not a recipient indicated or intended in this 
message (or responsible for delivery of this 
message to such person), or you think for any 
reason that this message may have been addressed 
to you in error, you may not use or copy or deliver 
this message to anyone else. In such case, you 
should destroy this message and kindly notify the 
sender by reply email.
___________________________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040423/97f8f3d1/attachment.html
From sk at z.pl  Fri Apr 23 02:13:18 2004
From: sk at z.pl (Sebastian Kaliszewski)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] Unicode handling
In-Reply-To: <D2E7B5AC-9497-11D8-9E9F-000393A56BB6@glyphic.com>
References: <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com> <16519.1090.512649.697414@despot.non.net> <151881E9-93F5-11D8-9A7D-000A95891192@cs.usfca.edu> <200404220246.41528.sk@z.pl> <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com> <16519.1090.512649.697414@despot.non.net> <151881E9-93F5-11D8-9A7D-000A95891192@cs.usfca.edu> <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com> <16519.1090.512649.697414@despot.non.net> <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com> <20040422085747.GD11404@cs.utwente.nl> <D2E7B5AC-9497-11D8-9E9F-000393A56BB6@glyphic.com>
Message-ID: <4088DE2E.4020000@softax.pl>

Mark Lentczner wrote:
>>Well the C++ stuff truncates to 8 bits whenever it sees fit.
> 
> My plan is to not do anything in 16 bits.  Just lex the UTF-8 as a pure 
> 8-bit stream.  So, so long as the Antlr generator and the generated C++ 
> code and the support lib are all 8-bit character clean, I'm home free.
> 

Yup. Same here!

> Actually, the few productions that require interpretation of Unicode 
> characters (only allow alphabetics, for example) are complex enough 
> that I have a perl program that takes a Unicode set description, 
> generates the Antlr rules for matching the set when represented as 
> UTF-8 sequences.

Would you publish that on some Antlr-like licence (or any licence allowing 
unconstrained use of resultant grammar)? If the stuff is not inside ANTLR 
itself, it'd be nice to have some preprocessing thing handy.


[snip]
> If (and it is a big if), Antlr wanted to support the idea of "specify a 
> parser with a Unicode source  character set, but the generated parser 
> reads and parses the UTF-8 encoded stream representation"  I believe 
> that I can offer the code that would make this automatic.

That's exactly what I need. I don't need to parse UTF-16 or anything like 
that. UTF-8 is what I want.

> For example:
> 	options { charVocabulary: Unicode-via-UTF-8; }
> 	...
> 	ALPHA_OMEGA: "\u0391\u03A9" | "\u03B1\u03C9" ;
> 	DASHES: '\u2010'..'\u2015' ;
> 
> Would internally become:
> 	options { charVocabulary: '\u0000'..'\u00FF'; }
> 	...
> 	ALPHA_OMEGA: "\316\221\316\251" | "\316\261\317\211" ;
> 	DASHES: '\342' '\200' '\220'..'\225' ;
> 
> The only hitch is that the user would have to probably up the value of 
> k manually (I don't think I could or want to compute the "correct" new 
> value.)  I have an algorithm working that works for these and more 
> complicated cases as well. (It handles the XML 1.0 and XML 1.1 name 
> productions, which are pretty hairy!)

This is the problem, it makes it hackish, thus I suspect ANTLR maitainers 
won't put it in. But having such external preporcessing tool would be nice.

[snip]

rgds
-- 
Sebastian Kaliszewski


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Fri Apr 23 02:35:37 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] Unicode handling
In-Reply-To: <D2E7B5AC-9497-11D8-9E9F-000393A56BB6@glyphic.com>
References: <151881E9-93F5-11D8-9A7D-000A95891192@cs.usfca.edu> <200404220246.41528.sk@z.pl> <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com> <16519.1090.512649.697414@despot.non.net> <151881E9-93F5-11D8-9A7D-000A95891192@cs.usfca.edu> <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com> <16519.1090.512649.697414@despot.non.net> <728644F2-93E0-11D8-9E9F-000393A56BB6@glyphic.com> <20040422085747.GD11404@cs.utwente.nl> <D2E7B5AC-9497-11D8-9E9F-000393A56BB6@glyphic.com>
Message-ID: <20040423093537.GA16750@cs.utwente.nl>

Hi,

On Thu, Apr 22, 2004 at 01:01:20PM -0700, Mark Lentczner wrote:
> > Well the C++ stuff truncates to 8 bits whenever it sees fit.
> My plan is to not do anything in 16 bits.  Just lex the UTF-8 as a pure
> 8-bit stream.  So, so long as the Antlr generator and the generated C++
> code and the support lib are all 8-bit character clean, I'm home free.

It's clean mostly. But the fact that the people porting it used int's and
other signeds where they should have used unsigneds is sometimes coming to
the surface.

> > Note that 2.7.4 will barf out attempts at 16 bit char constants.
> Do you mean that 2.7.4 won't allow '\u00BF' but will allow '\277'?  Or
> will 2.7.4 only be upset if the upper byte isn't zero, i.e. '\u2004'?
> (Yes, I'm still on 2.7.3)

I think it accepts the constants like '\u00BF' but will check them for
being in the range 0-255. So the last (at least that's the intention).

> > If you trick antlr to make the right bitsets,
> Er, is there a known issue with bitsets and 8-bit high characters?

No I mean that you have to make sure that the dummy rule you put in during
generation generates the right first/follow sets. But you probably have
that covered ;)

> > The moment you put the icky bits in nice 8 bit strings you're
> > basically homefree except for sorting out the actual lenghts of the
> > text
> > etc.
> All the literals in our source language have only 7-bit strings, so no
> concern here.  But even if we supported something like U+F7 (the
> division sign, , UTF-8 encoded as 0xC3 0xB7), then I'd just code the
> literal as "\u00C3\u00B7" or "\303\267", and let Antlr think it is a
> two-character string.

Sounds like it will work.

> > You could get away with redefining the strings in antlr to wchars and
> > recompiling a hacked version of the support lib to have a bit more
> > 'room'
> > to maneuver (sp?). That has been done before with some luck.
> <speak voice="kid from Time Bandits"> No, don't touch it.... wchar is
> EEEEEEVIL! </speak>

What is particularly evil about it ? Just curious ;) (Note I personally
have never tinkered with tiresome unicode stuff other than reading up a
little with antlr in mind, so real world experiences are most welcome)

> > I commend you if you do it with the current support lib (in both cases
> > ;) )
> Any code changes will be coming your way, Ric...

Looking forward to it :)

> > Might be preferable over reinventing the wheel though. And for me a lot
> > quicker to implement stuff (unless there's volunteers out there?).
> If (and it is a big if), Antlr wanted to support the idea of "specify a
> parser with a Unicode source  character set, but the generated parser
> reads and parses the UTF-8 encoded stream representation"  I believe
> that I can offer the code that would make this automatic.
>
> For example:
> 	options { charVocabulary: Unicode-via-UTF-8; }
> 	...
> 	ALPHA_OMEGA: "\u0391\u03A9" | "\u03B1\u03C9" ;
> 	DASHES: '\u2010'..'\u2015' ;
>
> Would internally become:
> 	options { charVocabulary: '\u0000'..'\u00FF'; }
> 	...
> 	ALPHA_OMEGA: "\316\221\316\251" | "\316\261\317\211" ;
> 	DASHES: '\342' '\200' '\220'..'\225' ;
>
> The only hitch is that the user would have to probably up the value of
> k manually (I don't think I could or want to compute the "correct" new
> value.)  I have an algorithm working that works for these and more
> complicated cases as well. (It handles the XML 1.0 and XML 1.1 name
> productions, which are pretty hairy!)

It kindoff sounds like a bit of a 'hack' to support unicode for C++ (at
least that's my current impression from reading this?). It might definitely
be interesting to look at. But it might be better to build some more
structural support into the antlr lexer and antlr syntax.

> > And I also wonder what you'll get if you feed the lexer in java mode a
> > sequence that contains such a value broken up over two UTF-16 values
> > (that
> > for lexer terms should be treated as one!).
> Java prior to 1.5 is blissfully unaware.  It will think of a UTF-16
> surrogate pair as two characters.  In 1.5 it will start thinking of the
> type 'char' as UTF-16 code value, not a Unicode char.  Not clear how
> this will affect things, but I doubt they'll break any old APIs.
>
> What this means is that parsers currently built in Antlr really parse
> UTF-16 input, not Unicode.  So if you want to match U+1D11E (Musical
> Symbol G Clef), you have to match the string "\uD834\uDD1E".

Yup.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "You can't expect to wield supreme executive power just because some
   watery tot throws a sword at you!"
  --- Monty Python and the Holy Grail



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From Anthony.Youngman at ECA-International.com  Fri Apr 23 02:59:07 2004
From: Anthony.Youngman at ECA-International.com (Anthony Youngman)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] if-then-else - Grammar generates faultyparser
    code
Message-ID: <C7FE35004D40FD45AA342991B88CE40409AE93@lnml1.eca-international.local>

Adding to this (and just giving a hint ...) I've been trying to get my
if-then-else to behave, and if I left-factor it blows up on me.
 
The following is the relelevant bit of my parser ...
 
ifst : ( IF^ expr ( thenclause (nl!)? elseclause | thenclause |
elseclause ) );
//ifst : ( IF^ expr ( thenclause ( (nl!)? elseclause)? | elseclause ) );
 
thenclause : ( THEN^
 ( statement_line
 | nl! statement_list "END"!
 ) );
 
elseclause : ( ELSE^
 ( statement_line
 | nl! statement_list "END"!
 ) );

 
The commented-out bit is, I think, a correct left-factor of the working
version, but it blows up antlr.Tool. Because an optional clause itself
starts with an optional clause? Unfortunately the "nl"s are significant,
and given that I need to handle a variety of clauses (where just one
such is necessary and sufficient) I don't want to have to specify all
the alternatives the first way ...
 
If my problem is related to the original, fine. If it isn't, don't worry
too much - I'll tackle it later
 
Cheers,
Wol

________________________________

From: Jeff Vincent [mailto:JVincent@Novell.Com] 
Sent: 22 April 2004 17:01
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] if-then-else - Grammar generates
faultyparser code


Here is my if-then-else.  I didn't let ANTLR build the AST directly, I
did it myself to get things rooted the way I wanted with some imaginary
tokens.  I also didn't create special rules for the 'then' or the 'else'
part.  The ifFalseblock will be null if the else is omitted.
 
statement options {defaultErrorHandler=true;} :
  ( 
    ...

  |! stateIf:IF LPAREN! ifcond:expression RPAREN! iftrueblock:combo 
        ( options { greedy = true; } : ELSE! iffalseblock:combo )?
   {    #statement = #(#stateIf, #(#[EXPRESSION, "EXPRESSION"],
#ifcond), 
            #(#[COMBO, "COMBO"], #iftrueblock), #(#[COMBO, "COMBO"],
#iffalseblock)); 
    }
 
    ...
    ) ;
  
This has worked since ANTLR 2.7.0 (or 2.7.1? - ack! - I can't recall)
and I am currently using ANTLR 2.7.3.
 
If you care, I also rolled my own AST parser rules for all conditional
expressions (for, if-then-else, while, do-while, switch-case,
try-catch-finally) so I can control when the conditional parts actually
get parsed.  I am using all this as part of a run-time scripting
language (initially based loosly on 'C' w/ some Java-isms) using ANTLR
at the core.  The code that does the work is built into the AST parser
(action code), so the act of running the parser causes the actual
run-time execution.  I therefore had to only let the AST parser parse
things that actually should be "executed".  Here is a snippet of the AST
parser rule for my IF-THEN-ELSE statement:
 
statement :
(
 ...
 
   | #( astIF:IF
     {
      MyResult result = null;
      AST cond = null, ifTrue = null, ifFalse = null;
 
      //
      //Pull individual IF components of AST
      //
      cond = #astIF.getFirstChild();
      ifTrue = cond.getNextSibling();
      ifFalse = ifTrue.getNextSibling();
 
      cond = cond.getFirstChild();
      ifTrue = ifTrue.getFirstChild();
      ifFalse = ifFalse.getFirstChild();
 
      //
      //Execute the IF condition
      //
      result = assignmentExpression(cond); //<-- ANTLR parses (executes)
conditional
 
      if (result.getType() == BOOL) {
         if (result.getBooleanValue() == true)
            combo(ifTrue);   //<-- ANTLR parses (executes) "then" block
         else if (ifFalse != null) //optional ELSE block
            combo(ifFalse);  //<-- ANTLR parses (executes) "else" block
      }
      else
       throw new RecognitionException("Error: TreeParser.statement:
malformed IF: condition MUST evaluate as BOOLEAN");
     }
    . )
     |
 
  ...
 
) ;
 
I have similar rules for the other conditional statements.  If I do say
so myself, it works really well!  The ANTLR experts out there may have a
slicker way to do it, and I am open to suggestions.  I assume I would
need to semantic predicates somehow.  However, getting into the looping
structures I wasn't sure how to handle those, not to mention my
try-catch-finally rule.  Not sure if that helped or not.
 
Enjoy!

>>> poornima.prakash@cgi.com 4/22/2004 1:16:48 AM >>>

We have a classic 'if-then-else' rule in the grammar file. The 
problem we are facing is with the ANTLR versions 2.7.2 and 2.7.4rc1.

The 'rule' in the grammar file is defined as follows :

  rule options { defaultErrorHandler = true;} :
    ifPart thenPart 
    (options {warnWhenFollowAmbig = false;} :
        elsePart
        )?;
        
  ifPart: "if"^ LPARENTHESIS! conditional_expression RPARENTHESIS!;
    
  thenPart  : "then"^ stmt_blk;
    
  elsePart  :"else"^ stmt_blk;

Since the 'else' part is optional, when we give an input rule with 
only the 'if-then' and without the 'else', AST is not generated 
correctly. It stops at the root node!

However, if we manipulate the generated C# code, AST is correctly 
generated. We have to  move the line "rule_AST = currentAST.root;" in 
the generated sources such that it is traversed even when only 'if-
then' input rule is given. 

To be more precise, the line "rule_AST = currentAST.root;"  at the 
end of the 'try' block in the below (automatically generated parser) 
code has to be moved into the 'default' case of switch-case for the 
correct AST to get generated.

public void rule() //throws RecognitionException, TokenStreamException
{
        
        returnAST = null;
        ASTPair currentAST = new ASTPair();
        AST rule_AST = null;
        
        try {      // for error handling
            ifPart();
            astFactory.addASTChild(currentAST, returnAST);
            thenPart();
            astFactory.addASTChild(currentAST, returnAST);
            {
                switch ( LA(1) )
                {
                case LITERAL_else:
                {
                    elsePart();
                    astFactory.addASTChild
(currentAST, returnAST);
                    break;
                }
                case LITERAL_if:
                ....
                case IDENTIFIER:
                {
                    break;
                }
                default:
                {
                    throw new NoViableAltException
(LT(1), getFilename());
                }
                }
            }
            rule_AST = currentAST.root;
        }
        catch (RecognitionException ex)
        {...
        }
        returnAST = rule_AST;
    }


Please advice the required grammar change such that the AST gets 
generated properly without moving around the generated code.

Looking forward to your reply.

regards,
Poornima and Raghu.
    






Yahoo! Groups Links







________________________________

Yahoo! Groups Links


*	To visit your group on the web, go to:
	http://groups.yahoo.com/group/antlr-interest/
	  
*	To unsubscribe from this group, send an email to:
	antlr-interest-unsubscribe@yahoogroups.com
<mailto:antlr-interest-unsubscribe@yahoogroups.com?subject=Unsubscribe> 	  
*	Your use of Yahoo! Groups is subject to the Yahoo! Terms of
Service <http://docs.yahoo.com/info/terms/> . 




****************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

****************************************************************************

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040423/8ceb71c5/attachment.html
From poornima.prakash at cgi.com  Fri Apr 23 03:00:53 2004
From: poornima.prakash at cgi.com (Poornima Prakash)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] if-then-else - Grammar generates faulty
	parser code
Message-ID: <s08936c0.030@bangalore.imrglobal.com>

Hi,

Our requirement is to parse "==", "equals" and "issameas" in the input as a single AST node. One way to do it is to define all the 3 as Lexer tokens ... but this comes at the expense of increased lookahead value (k=8) ... this is not desirable. So, we decided to put the longer strings (i.e. "equals" and "issameas") as imaginary tokens in the lexer. This does solve the problem ... see the grammar below.

************************************
class MyParser extends Parser;
....

exp1 : exp2 (EQUALS^|SAMEAS^|EQUAL_SIGN^) exp2;


************************************
class MyLexer extends Lexer;
....
tokens
{
 //imaginary tokens
 EQUALS ="equals";
 SAMEAS ="issameas";
 .... 
}

....
//lexer token definition
EQUAL_SIGN : "==";

....

But 2 different types of AST nodes , one for EQUAL_SIGN([==,<"EQUAL_SIGN">] and one for EQUALS(equals) and SAMEAS(issameas) are created. We would like to generate a single AST node for all these nodes. How can we acheive that?

Restating the question : 
We would like to generate a single AST node for a set of lexer token definitions and imaginary tokens definitions in lexer.

- Raghavendra

>>> monty@codetransform.com 04/22/04 10:18PM >>>
That generated code looks correct to me.  The statement "rule_AST = 
currentAST.root;" needs to be run at the end of the try block.  You are 
reaching the default block because you've hit EOF but the parser is 
expecting more.  Add EOF at the end of 'rule', or make a top-level rule 
that calls 'rule'.  When you call a parser rule it must be a top level 
rule--which means it must not be called by other rules.  Try adding 
this to your grammar and then calling in at topRule.

topRule: rule ;


Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html

On Apr 22, 2004, at 12:16 AM, poornima_prakash wrote:

> We have a classic 'if-then-else' rule in the grammar file. The
> problem we are facing is with the ANTLR versions 2.7.2 and 2.7.4rc1.
>
> The 'rule' in the grammar file is defined as follows :
>
>   rule options { defaultErrorHandler = true;} :
>     ifPart thenPart
>     (options {warnWhenFollowAmbig = false;} :
>         elsePart
>         )?;
>         
>   ifPart: "if"^ LPARENTHESIS! conditional_expression RPARENTHESIS!;
>     
>   thenPart  : "then"^ stmt_blk;
>     
>   elsePart  :"else"^ stmt_blk;
>
> Since the 'else' part is optional, when we give an input rule with
> only the 'if-then' and without the 'else', AST is not generated
> correctly. It stops at the root node!
>
> However, if we manipulate the generated C# code, AST is correctly
> generated. We have to  move the line "rule_AST = currentAST.root;" in
> the generated sources such that it is traversed even when only 'if-
> then' input rule is given.
>
> To be more precise, the line "rule_AST = currentAST.root;"  at the
> end of the 'try' block in the below (automatically generated parser)
> code has to be moved into the 'default' case of switch-case for the
> correct AST to get generated.
>
> public void rule() //throws RecognitionException, TokenStreamException
> {
>         
>         returnAST = null;
>         ASTPair currentAST = new ASTPair();
>         AST rule_AST = null;
>         
>         try {      // for error handling
>             ifPart();
>             astFactory.addASTChild(currentAST, returnAST);
>             thenPart();
>             astFactory.addASTChild(currentAST, returnAST);
>             {
>                 switch ( LA(1) )
>                 {
>                 case LITERAL_else:
>                 {
>                     elsePart();
>                     astFactory.addASTChild
> (currentAST, returnAST);
>                     break;
>                 }
>                 case LITERAL_if:
>                 ....
>                 case IDENTIFIER:
>                 {
>                     break;
>                 }
>                 default:
>                 {
>                     throw new NoViableAltException
> (LT(1), getFilename());
>                 }
>                 }
>             }
>             rule_AST = currentAST.root;
>         }
>         catch (RecognitionException ex)
>         {...
>         }
>         returnAST = rule_AST;
>     }
>
>
> Please advice the required grammar change such that the AST gets
> generated properly without moving around the generated code.
>
> Looking forward to your reply.
>
> regards,
> Poornima and Raghu.
>     
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>




Yahoo! Groups Links




__________________________________________________
************** Confidentiality Notice ************
 
Proprietary/Confidential Information belonging to 
CGI may be contained in this message. If you are 
not a recipient indicated or intended in this 
message (or responsible for delivery of this 
message to such person), or you think for any 
reason that this message may have been addressed 
to you in error, you may not use or copy or deliver 
this message to anyone else. In such case, you 
should destroy this message and kindly notify the 
sender by reply email.
___________________________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040423/d3f09a3d/attachment.html
From klaren at cs.utwente.nl  Fri Apr 23 03:10:36 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] MS Visual C++ Toolkit 2003
In-Reply-To: <20040421095358.GH5811@cs.utwente.nl>
References: <c63sfa+5aaj@eGroups.com> <20040421095358.GH5811@cs.utwente.nl>
Message-ID: <20040423101036.GB16750@cs.utwente.nl>

On Wed, Apr 21, 2004 at 11:53:59AM +0200, Ric Klaren wrote:
> > There was a thread a while discussing how to get free access to the
> > Microsoft C++ compiler. This link should help:
> >
> > http://msdn.microsoft.com/visualc/vctoolkit2003/
>
> This one is very helpfull (only disadvantage nmake and lib utilities are
> missing). I must btw do a mea culpa on the tip from last time. While
> getting nmake form the .NET stuff I noticed it had installed into multiple
> directories one containing the compilers as well :/
>
> I can now build the 2.7.4 rc candidate into a dll (did not get to trying
> examples with the generated dll) Static lib no luck since the lib tool is
> missing (unless the one in a win64 directory is usable, but did not get to
> try that last night)

Tinkered a bit more with it. Looks like antlr's 2.7.4 VC7.1 DLL build is
still broken I could get it to compile the java example with a bit of
tinkering but it dies somewhere while running. That led to the conclusion
that this kit is pretty useless without a debugger, at least for things
other than veryfying that something compiles or making very simple stuff.

I can still see if it's possible to use gdb with binaries from this thing.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Wit is cultured insolence. --- Aristotle



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From rbo at acm.org  Fri Apr 23 05:47:41 2004
From: rbo at acm.org (Rodrigo B. de Oliveira)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] Isn't the lexer supposed to break out from a rule upon EOF?
Message-ID: <004001c42931$2b344a40$fe00a8c0@bambook>

Hi!

I'm having trouble with an antlr generated C# lexer on rules such as the
following:

<snip>

SL_COMMENT:
 "#"! (~('\r'|'\n')!)*
 { $setType(Token.SKIP); }
 ;

</snip>

The lexer refuses to return a token when it encounters an EOF inside the
inverted rule,
in other words, lexing a string like "#foo" would never return while lexing
something like "#foo\n" will.

Is this the expected behaviour?

My solution has been to add a specific check for EOF_CHAR to every inverted
rule in
my grammar:

<snip>
SL_COMMENT:
 "#"! ({EOF_CHAR != LA(1)}?~('\r'|'\n')!)*
 { $setType(Token.SKIP); }
 ;
</snip>

Any thoughts are very welcome!

Thanks in advance,
Rodrigo



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From rbo at acm.org  Fri Apr 23 05:53:16 2004
From: rbo at acm.org (Rodrigo B. de Oliveira)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] Isn't the lexer supposed to break out from a rule upon EOF?
References: <004001c42931$2b344a40$fe00a8c0@bambook>
Message-ID: <004701c42931$f288e290$fe00a8c0@bambook>

Uops, I guess I've found my problem:

charVocabulary='\u0003'..'\uFFFF';

Sorry...

Rodrigo


----- Original Message ----- 
From: "Rodrigo B. de Oliveira" <rbo@acm.org>
To: "antlr" <antlr-interest@yahoogroups.com>
Sent: Friday, April 23, 2004 9:47 AM
Subject: [antlr-interest] Isn't the lexer supposed to break out from a rule
upon EOF?


> Hi!
>
> ...>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Fri Apr 23 05:49:30 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] Isn't the lexer supposed to break out from a rule upon EOF?
In-Reply-To: <004001c42931$2b344a40$fe00a8c0@bambook>
References: <004001c42931$2b344a40$fe00a8c0@bambook>
Message-ID: <20040423124930.GG16750@cs.utwente.nl>

On Fri, Apr 23, 2004 at 09:47:41AM -0300, Rodrigo B. de Oliveira wrote:
> SL_COMMENT:
>  "#"! (~('\r'|'\n')!)*
>  { $setType(Token.SKIP); }
>  ;
> 
> The lexer refuses to return a token when it encounters an EOF inside the
> inverted rule,
> in other words, lexing a string like "#foo" would never return while lexing
> something like "#foo\n" will.
> 
> Is this the expected behaviour?

You have EOF in your charVocabulary? (E.g. -1 0xFFFF or whatever notation?)
If you have it is the behaviour you specified. If you don't there's
something else wrong.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Innovation makes enemies of all those who prospered under the old
   regime, and only lukewarm support is forthcoming from those who would
               prosper under the new. --- Niccol Machiavelli



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From markl at glyphic.com  Fri Apr 23 07:47:56 2004
From: markl at glyphic.com (Mark Lentczner)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] Re: equals and issameas (was: if-then-else)
In-Reply-To: <s08936c0.030@bangalore.imrglobal.com>
References: <s08936c0.030@bangalore.imrglobal.com>
Message-ID: <35410C9C-9535-11D8-9E9F-000393A56BB6@glyphic.com>

> exp1 : exp2 (EQUALS^|SAMEAS^|EQUAL_SIGN^) exp2;

Try this

exp1 : exp2 equals^ exp2 ;
equals : ( "equals" | "issameas" | EQUAL_SIGN ) { 
#equals->setType(EQUAL_SIGN); } ;

This way you can have your literals as literals (rather than lexer 
tokens) and the generated AST will use only one token type as the tree 
root.

I do this sort of thing all the time, as I like my AST trees to be very 
simple and regular.

	- Mark

Mark Lentczner
markl@wheatfarm.org
http://www.wheatfarm.org/



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Fri Apr 23 09:36:51 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:44 2004
Subject: Unsubscription by antlr-interest member
Message-ID: <1082738211.642.37898.w72@yahoogroups.com>


Hello,

This is an automated email message to let you know that
danigees <danigees@yahoo.es> unsubscribed from your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a member unsubscribes.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From monty at codetransform.com  Fri Apr 23 11:07:58 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] if-then-else - Grammar generates faultyparser code
In-Reply-To: <C7FE35004D40FD45AA342991B88CE40409AE93@lnml1.eca-international.local>
References: <C7FE35004D40FD45AA342991B88CE40409AE93@lnml1.eca-international.local>
Message-ID: <26D0DAEA-9551-11D8-8312-000393B5606C@codetransform.com>

On Apr 23, 2004, at 2:59 AM, Anthony Youngman wrote:

> The commented-out bit is, I think, a correct left-factor of the 
> working version, but it blows up antlr.Tool

If you could, please create a small but complete .g file that crashes 
antlr.Tool and send it to Terence.  I don't see anything wrong with the 
commented-out line.

Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ronald.petty at milliman.com  Fri Apr 23 16:44:40 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] java example grammar
In-Reply-To: <26D0DAEA-9551-11D8-8312-000393B5606C@codetransform.com>
Message-ID: <OFD5175731.73AEBDAA-ON86256E7F.008021A7-86256E7F.0082B253@milliman.com>

I was trying to use the java grammar as a bases for a VB grammar (just 
seeing how to handle expression order etc).  The first structure I was 
trying to figure out for the for loop.  In the java.g there is

statement
        :
        ...
        // For statement
        |       "for"
                        LPAREN!
                                forInit SEMI!   // initializer
                                forCond SEMI!   // condition test
                                forIter         // updater
                        RPAREN!
                        statement                     // statement to loop 
over

        ....
        ;

If I was using this as the input

for ( i = 0; .......

It would match "for" "(" then call the rule forInit. 

forInit
                // if it looks like a declaration, it is
        :       (       (declaration)=> declaration
                // otherwise it could be an expression list...
                |       expressionList
                )?
                {#forInit = #(#[FOR_INIT,"FOR_INIT"],#forInit);}
        ;

I noticed that "i" cannot be a declaration because of the typeSpec in the 
declaration rule would mean it needs to "int i" or something like that, so 
I assume "i" is an expressionList (also because i had to be declared 
already).  So following that path lead to this

expressionList ->
expression->
assignmentExpression->
conditionalExpression->
logicalOrExpression->
logicalAndExpression->
inclusiveOrExpression->
exclusiveOrExpression->
andExpression->
equalityExpression->
relationalExpression->  (not 100% here)  (nested question; ( subrule1 )* | 
subrule2  if you don't match subrule1 do you have to match subrule2?  I 
think this does a zero match subrule1 here
shiftExpression->
additiveExpression->
multiplicativeExpression->
unaryExpression->
unaryExpressionNotPlusMinus->
postfixExpression->
primaryExpression->
identPrimary->
IDENT  (Match finally)

Hopefully I was right in this, if this is true, is this because 
        1) "i" is not a declaration (becuase in Java it has already been 
declared (and if Option Explicit is on in VB this is the same as having it 
Dim i somewhere or Public i)
        2) "i" is really an expression becuase it is really an LValue 
which is the output of someprevious RValue?  (I hope I am not slaughtering 
terms here)
        3) and becuase of 2) this means that an LValue is the simplest 
kind of expression and that is why it is at the end of this chain (meaning 
it is the highest on the precendence) (not sure about this)

I am thinking in the right way about this?

Thanks alot 
Ron

**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040423/6fee4516/attachment.html
From parrt at cs.usfca.edu  Fri Apr 23 19:42:46 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] more lookahead analysis stuff posted to blog
Message-ID: <11AB51F5-9599-11D8-9A7D-000A95891192@cs.usfca.edu>

Folks,

Been doing lots of thinking and reading.  I think I have my final 
algorithm for ANTLR v3 grammar analysis.  It will provide arbitrary 
lookahead without the user having to specify even a max k or other 
constant.  It will degenerate to LL(k) for k>=0 for fixed k if the 
decision is deterministic for some k. :)  Mostly ranting about 
algorithm correctness and termination here, but some stuff on 
relationship or analogy to LR parsing.

Sriram Srinivasan has proposed LL(*) as the term as the "*" sort of 
hints at the regular nature of the arbitrary lookahead and is different 
from LL(infinity) which I've seen people use to mean "I backtrack 
nonstop" ;)  Thoughts on the terminology?  best I've heard so far.

http://www.antlr.org/blog/antlr3/lookahead.tml

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From johnm-antlr at non.net  Fri Apr 23 21:40:37 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] more lookahead analysis stuff posted to blog
In-Reply-To: <11AB51F5-9599-11D8-9A7D-000A95891192@cs.usfca.edu>
References: <11AB51F5-9599-11D8-9A7D-000A95891192@cs.usfca.edu>
Message-ID: <16521.61381.280445.284225@despot.non.net>

>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
[...]

> Sriram Srinivasan has proposed LL(*) as the term as the "*" sort of hints
> at the regular nature of the arbitrary lookahead and is different from
> LL(infinity) which I've seen people use to mean "I backtrack nonstop" ;)
> Thoughts on the terminology?  best I've heard so far.

I like it.

John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Sat Apr 24 04:39:35 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:44 2004
Subject: New antlr-interest member
Message-ID: <1082806775.75.55706.w63@yahoogroups.com>


Hello,

This is an automated email message to let you know that
mrlc_2003 <veron78@interfree.it> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From notify at yahoogroups.com  Sat Apr 24 07:57:02 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:44 2004
Subject: New antlr-interest member
Message-ID: <1082818622.90.51123.w3@yahoogroups.com>


Hello,

This is an automated email message to let you know that
bdsjiw <bdsjiw@yahoo.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From notify at yahoogroups.com  Sat Apr 24 08:02:24 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:44 2004
Subject: New file uploaded to antlr-interest
Message-ID: <1082818944.124.98346.w65@yahoogroups.com>


Hello,

This email message is a notification to let you know that
a file has been uploaded to the Files area of your antlr-interest 
group.

  File        : /!!LesbianConnect_com.htm 
  Uploaded by : bdsjiw <bdsjiw@yahoo.com> 
  Description : This is a wonderful dating site. All lesbians and bi-females can get your love in your cities. 

You can access the file at the URL

http://groups.yahoo.com/group/antlr-interest/files/%21%21LesbianConnect_com.htm 

Your group is currently configured to send you email
notification whenever a member uploads a file.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From lists at lischke-online.de  Sat Apr 24 13:25:37 2004
From: lists at lischke-online.de (Mike Lischke)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] Import vocabulary
Message-ID: <20040424201926.8908657C005@h4866.serverkompetenz.net>

Hi,

How is the import of a vocabulary supposed to work when I import more than one? Currently it looks like the last one wins (i.e. tokens from previously imported vocabularies are lost). I can put everything into one vocabulary, sure, but for a clean implementation I prefer to keep my preprocessor vocabulary (ifdef, define etc.) separate from the main parser vocabulary.

Mike
--
www.soft-gems.net



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From lgc at mail1.jpl.nasa.gov  Sat Apr 24 16:05:31 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] Re: Import vocabulary
In-Reply-To: <20040424201926.8908657C005@h4866.serverkompetenz.net>
Message-ID: <c6errr+stfu@eGroups.com>

ANTLR only supports one import vocabulary per grammar, and the last
one should win--there is a string variable that is set for the option.
 Supporting more than one import vocab could be done, but that would
require a scheme for numbering token types so that they don't overlap.
 Not a good idea--that would be error prone.

--Loring


--- In antlr-interest@yahoogroups.com, "Mike Lischke" <lists@l...> wrote:
> Hi,
> 
> How is the import of a vocabulary supposed to work when I import
more than one? Currently it looks like the last one wins (i.e. tokens
from previously imported vocabularies are lost). I can put everything
into one vocabulary, sure, but for a clean implementation I prefer to
keep my preprocessor vocabulary (ifdef, define etc.) separate from the
main parser vocabulary.
> 
> Mike
> --
> www.soft-gems.net



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From lists at lischke-online.de  Sun Apr 25 01:20:08 2004
From: lists at lischke-online.de (Mike Lischke)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] Re: Import vocabulary
In-Reply-To: <c6errr+stfu@eGroups.com>
Message-ID: <20040425081355.0CC1E57C005@h4866.serverkompetenz.net>

> ANTLR only supports one import vocabulary per grammar, and 
> the last one should win--there is a string variable that is 
> set for the option.

Ah, thanks for the hint.

>  Supporting more than one import vocab could be done, but 
> that would require a scheme for numbering token types so that 
> they don't overlap.
>  Not a good idea--that would be error prone.

I could imagine a merge feature. Duplicate tokens are just ignored while all others are merged into one large
vocabulary. Not too error prone I think, because I explicitely want this behavior when I specify more than one import
vocabulary.

Mike
--
www.soft-gems.net



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From jean-louis.boulanger at hds.utc.fr  Sun Apr 25 03:23:52 2004
From: jean-louis.boulanger at hds.utc.fr (Boulanger Jean-Louis)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] Re: Import vocabulary
In-Reply-To: <c6errr+stfu@eGroups.com>
References: <c6errr+stfu@eGroups.com>
Message-ID: <1082888632.408b91b8e48f0@mail.hds.utc.fr>

Selon lgcraymer <lgc@mail1.jpl.nasa.gov>:

> ANTLR only supports one import vocabulary per grammar, and the last
> one should win--there is a string variable that is set for the option.
>  Supporting more than one import vocab could be done, but that would
> require a scheme for numbering token types so that they don't overlap.

Perhaps, it's possible to choose another implentation for the "token numbering"
that support multi-import.


>  Not a good idea--that would be error prone.
Why ANTLR can't accept more than one import. 
I have a similary problem with a tools where i want translate from VHDL to B
(it's a formal method).

I have a specific tools (called ABTOOLS) that parsed, types, .... B file.
I have writed a VHDL grammar with the idea to translate "AST VHDL" to "AST B".
If i can do so, i can you all my B Tool directly.

Today, I writed a library that provide some B tree construt that I use in the
VHDL treewalker, but this solution overide the development.

Boulanger JL
> 
> --Loring
> 
> 
> --- In antlr-interest@yahoogroups.com, "Mike Lischke" <lists@l...> wrote:
> > Hi,
> > 
> > How is the import of a vocabulary supposed to work when I import
> more than one? Currently it looks like the last one wins (i.e. tokens
> from previously imported vocabularies are lost). I can put everything
> into one vocabulary, sure, but for a clean implementation I prefer to
> keep my preprocessor vocabulary (ifdef, define etc.) separate from the
> main parser vocabulary.
> > 
> > Mike
> > --
> > www.soft-gems.net
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
> 
>  
> 




-------------------------------------------------
Laboratoire Heudiasyc. UMR CNRS 6599
http://www.hds.utc.fr


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From lists at lischke-online.de  Sun Apr 25 07:59:58 2004
From: lists at lischke-online.de (Mike Lischke)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] Re: Import vocabulary
In-Reply-To: <c6errr+stfu@eGroups.com>
Message-ID: <20040425145342.B010D57C001@h4866.serverkompetenz.net>

>I could imagine a merge feature.

I solved the problem. You can have "chained" vocabularies. The main parser imports now the preprocessor vocabulary and
exports its own one, which also contains the tokens it imported. The lexer then imports the vocabulary from the main
parser and Bob's your uncle.

Mike
--
www.soft-gems.net



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From lists at lischke-online.de  Sun Apr 25 08:30:34 2004
From: lists at lischke-online.de (Mike Lischke)
Date: Mon Dec 20 16:16:44 2004
Subject: [antlr-interest] "everything else" clause
Message-ID: <20040425152418.5AFFA57C001@h4866.serverkompetenz.net>


Hi again,

Does anybody know how I can specify a rule, which matches a few things and collects everything else into an own series of tokens. ANTLR creates a switch statement from my grammar, which contains the few allowed cases. But instead using the default branch for everything else it lists all tokens it knows for that single parser for the "rest" of the input. This does not work well however because due to the lexer there can be tokens, which are not known to the parser.

What I used was:

  program:
    (
      a
      | b
      | rest
    )*
  ;

  rest:
    (options {greedy = false;}:
      ~(
        "a"
        | "b"
      )
    )+
  ;

Using the DOT symbol like:

rest:
  (options {greedy = false;}: .)+
;

produces a nondeterminism warning for each alternative in the program rule. I would be very thankful for any good solution.

Mike
--
www.soft-gems.net



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From bonjonbovi at yahoo.com  Sun Apr 25 18:19:08 2004
From: bonjonbovi at yahoo.com (anthos71)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] Can I do "extends MyParser"
Message-ID: <c6ho2c+uqcv@eGroups.com>

Hi

Can I do something like

class LanguageParser extends TokenHandler{...}

instead of standard

class LanguageParser extends Parser{...}

?

When I tried this, the antlr.Tool errored saying

error: grammar TokenHandler not defined

Ta,
Anthos




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From bonjonbovi at yahoo.com  Sun Apr 25 18:37:40 2004
From: bonjonbovi at yahoo.com (anthos71)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] Re: Can I do "extends MyParser"
In-Reply-To: <c6ho2c+uqcv@eGroups.com>
Message-ID: <c6hp54+ksjh@eGroups.com>

of course MyParser would extend Parser.

I missed to mention this.

Anthos
--- In antlr-interest@yahoogroups.com, "anthos71" <bonjonbovi@y...> wrote:
> Hi
> 
> Can I do something like
> 
> class LanguageParser extends TokenHandler{...}
> 
> instead of standard
> 
> class LanguageParser extends Parser{...}
> 
> ?
> 
> When I tried this, the antlr.Tool errored saying
> 
> error: grammar TokenHandler not defined
> 
> Ta,
> Anthos



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From craigbarker1 at yahoo.com  Sun Apr 25 16:00:36 2004
From: craigbarker1 at yahoo.com (craigbarker1)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] Newbie needing parser help
Message-ID: <c6hfuk+ueb5@eGroups.com>

Hi All,

I'm relatively new to all this language recognition stuff and have a 
question that I could really use a hand with. It's probably not that 
hard, it's more likely that i'm just missing something obvious.

The issue is that i'm trying to parse a language that allows 
unquoted strings to be passed as parameters to functions. There are 
no rules on what can go inside these unquoted string's - they can be 
the names of literals, functions or any random sequence of 
characters.

I've tried recognising a set of ID tokens (defined as per the java 
grammer specification) but this is no good as i've got 
testLiterals=true; so anything that is a literal comes through from 
the lexer as a specific token type and therefore doesn't match 
against ID.

Here is an example of the type of thing i'm trying to match:

PAGES,Sale detail,Status changes,Sale costs

The issue lies with the fact that each of the parameters are REALLY 
strings but in this bizzare language they don't have to be double 
quoted. The issue is further compounded by the fact that the word 
Status is really a function name and hence has a specific token type.

Here is a snippet of the grammer i've done so far to deal with 
this:

designerCommand
//Commands to the designer
	:	"SIZE" COMMA NUM_INT COMMA NUM_INT
	|	"PAGES" COMMA textParameter (COMMA textParameter)*
	;

textParameter
	:	(ID)*
	| 	STRING_LITERAL
	;

Please let me know if you can provide any advise at all or even 
point me to a relevant article somewhere.

Many thanks in advance,

Craig 




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From lgc at mail1.jpl.nasa.gov  Sun Apr 25 19:41:18 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] Re: Newbie needing parser help
In-Reply-To: <c6hfuk+ueb5@eGroups.com>
Message-ID: <c6hsse+nfpu@eGroups.com>

Ugly problem.  What might make sense for this one is to make state
changes in the lexer and recognize strings in your COMMA rule.

That is:

ID :
   <character tokens>
   { hash table lookup; set commaText var if appropriate }
   ;


COMMA :
    { commaText = true }? ','! (~(',' | '\n'))+
        { _ttype = COMMATEXT; }
    |   ','
    ;

You can probably also do something with a token filter.

--Loring

--- In antlr-interest@yahoogroups.com, "craigbarker1"
<craigbarker1@y...> wrote:
> Hi All,
> 
> I'm relatively new to all this language recognition stuff and have a 
> question that I could really use a hand with. It's probably not that 
> hard, it's more likely that i'm just missing something obvious.
> 
> The issue is that i'm trying to parse a language that allows 
> unquoted strings to be passed as parameters to functions. There are 
> no rules on what can go inside these unquoted string's - they can be 
> the names of literals, functions or any random sequence of 
> characters.
> 
> I've tried recognising a set of ID tokens (defined as per the java 
> grammer specification) but this is no good as i've got 
> testLiterals=true; so anything that is a literal comes through from 
> the lexer as a specific token type and therefore doesn't match 
> against ID.
> 
> Here is an example of the type of thing i'm trying to match:
> 
> PAGES,Sale detail,Status changes,Sale costs
> 
> The issue lies with the fact that each of the parameters are REALLY 
> strings but in this bizzare language they don't have to be double 
> quoted. The issue is further compounded by the fact that the word 
> Status is really a function name and hence has a specific token type.
> 
> Here is a snippet of the grammer i've done so far to deal with 
> this:
> 
> designerCommand
> //Commands to the designer
> 	:	"SIZE" COMMA NUM_INT COMMA NUM_INT
> 	|	"PAGES" COMMA textParameter (COMMA textParameter)*
> 	;
> 
> textParameter
> 	:	(ID)*
> 	| 	STRING_LITERAL
> 	;
> 
> Please let me know if you can provide any advise at all or even 
> point me to a relevant article somewhere.
> 
> Many thanks in advance,
> 
> Craig



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Sun Apr 25 19:49:19 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:45 2004
Subject: New antlr-interest member
Message-ID: <1082947759.62.81400.w41@yahoogroups.com>


Hello,

This is an automated email message to let you know that
nassau62 <dbeckedo@comcast.net> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From notify at yahoogroups.com  Sun Apr 25 23:09:07 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:45 2004
Subject: New antlr-interest member
Message-ID: <1082959747.177.46670.w31@yahoogroups.com>


Hello,

This is an automated email message to let you know that
freehawk2004 <sun_yingwei@hotmail.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From sun_yingwei at hotmail.com  Sun Apr 25 23:16:40 2004
From: sun_yingwei at hotmail.com (freehawk2004)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] Pls help me how to use antlr in VC++6.0?
Message-ID: <c6i9g8+ppgm@eGroups.com>

Hello everyone:

 I am a beginner at using antlr. 
 Now I downloaded antlr2.7.4 and J2SDK1.4.2, and I newed a static 
lib project and added all of .c and .hpp files into the project, 
compiled it. There were two errors as the following'

1.'vcl.h': No such file or directory
2.#error :  "DLL Build not supported on old MSVC's"

Please tell me why and how to use antlr in a VC++6.0?
Am I right as these steps?

Thank you.

-Freehawk.





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Mon Apr 26 02:50:43 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] Pls help me how to use antlr in VC++6.0?
In-Reply-To: <c6i9g8+ppgm@eGroups.com>
References: <c6i9g8+ppgm@eGroups.com>
Message-ID: <20040426095043.GB342@cs.utwente.nl>

On Mon, Apr 26, 2004 at 06:16:40AM -0000, freehawk2004 wrote:
>  I am a beginner at using antlr. 
>  Now I downloaded antlr2.7.4 and J2SDK1.4.2, and I newed a static 
> lib project and added all of .c and .hpp files into the project, 
> compiled it. There were two errors as the following'
> 
> 1.'vcl.h': No such file or directory
> 2.#error :  "DLL Build not supported on old MSVC's"

It seems you defined ANTLR_EXPORT or ANTLR_IMPORTS ? You should not do that
when building a static lib. (and DLL is not supported on VC6) also you
don't need to include dll.cpp (in case you did)

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  "Good judgement comes from experience.
     Experience comes from bad judgement." --- Unknown



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From sun_yingwei at hotmail.com  Mon Apr 26 03:05:41 2004
From: sun_yingwei at hotmail.com (freehawk2004)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] Re: Pls help me how to use antlr in VC++6.0?
In-Reply-To: <20040426095043.GB342@cs.utwente.nl>
Message-ID: <c6imtl+jq2u@eGroups.com>

Thank you very much.

I deleted dll.cpp from my project.
but I cannot find the defines of ANTLR_EXPORT or ANTLR_IMPORTS.

Now the error of compile is only --->>>>

'vcl.h': No such file or directory

I still can not find "vcl.h" in my computer.
In the file of "antlr.cpp", "#include <vcl.h>" is included.
Could you know why?

-Freehawk.



--- In antlr-interest@yahoogroups.com, Ric Klaren <klaren@c...> 
wrote:
> On Mon, Apr 26, 2004 at 06:16:40AM -0000, freehawk2004 wrote:
> >  I am a beginner at using antlr. 
> >  Now I downloaded antlr2.7.4 and J2SDK1.4.2, and I newed a 
static 
> > lib project and added all of .c and .hpp files into the project, 
> > compiled it. There were two errors as the following'
> > 
> > 1.'vcl.h': No such file or directory
> > 2.#error :  "DLL Build not supported on old MSVC's"
> 
> It seems you defined ANTLR_EXPORT or ANTLR_IMPORTS ? You should 
not do that
> when building a static lib. (and DLL is not supported on VC6) also 
you
> don't need to include dll.cpp (in case you did)
> 
> Cheers,
> 
> Ric
> --
> -----
+++++*****************************************************+++++++++--
-----
>     ---- Ric Klaren ----- j.klaren@u... ----- +31 53 4893755  ----
> -----
+++++*****************************************************+++++++++--
-----
>   "Good judgement comes from experience.
>      Experience comes from bad judgement." --- Unknown



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Mon Apr 26 03:13:13 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] Re: Pls help me how to use antlr in VC++6.0?
In-Reply-To: <c6imtl+jq2u@eGroups.com>
References: <20040426095043.GB342@cs.utwente.nl> <c6imtl+jq2u@eGroups.com>
Message-ID: <20040426101313.GC342@cs.utwente.nl>

On Mon, Apr 26, 2004 at 10:05:41AM -0000, freehawk2004 wrote:
> I deleted dll.cpp from my project.
> but I cannot find the defines of ANTLR_EXPORT or ANTLR_IMPORTS.

Maybe you added them to the project settings? It depends a little on which
build instructions you are using. The most recent ones are in
lib/cpp/README.

> Now the error of compile is only --->>>>
>
> 'vcl.h': No such file or directory
>
> I still can not find "vcl.h" in my computer.
> In the file of "antlr.cpp", "#include <vcl.h>" is included.
> Could you know why?

antlr.cpp is not in the distribution of antlr 2.7.4 so it probably should
not be in the project.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  Before they invented drawing boards, what did they go back to?



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From sun_yingwei at hotmail.com  Mon Apr 26 03:22:59 2004
From: sun_yingwei at hotmail.com (freehawk2004)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] Re: Pls help me how to use antlr in VC++6.0?
In-Reply-To: <20040426101313.GC342@cs.utwente.nl>
Message-ID: <c6inu3+c9jq@eGroups.com>

Thank you for fast reply.

I setted my project as "WIN32,_DEBUG,_WINDOWS,_AFXDLL,_MBCS".
Is it right?

-Freehawk.


--- In antlr-interest@yahoogroups.com, Ric Klaren <klaren@c...> 
wrote:
> On Mon, Apr 26, 2004 at 10:05:41AM -0000, freehawk2004 wrote:
> > I deleted dll.cpp from my project.
> > but I cannot find the defines of ANTLR_EXPORT or ANTLR_IMPORTS.
> 
> Maybe you added them to the project settings? It depends a little 
on which
> build instructions you are using. The most recent ones are in
> lib/cpp/README.
> 
> > Now the error of compile is only --->>>>
> >
> > 'vcl.h': No such file or directory
> >
> > I still can not find "vcl.h" in my computer.
> > In the file of "antlr.cpp", "#include <vcl.h>" is included.
> > Could you know why?
> 
> antlr.cpp is not in the distribution of antlr 2.7.4 so it probably 
should
> not be in the project.
> 
> Cheers,
> 
> Ric
> --
> -----
+++++*****************************************************+++++++++--
-----
>     ---- Ric Klaren ----- j.klaren@u... ----- +31 53 4893755  ----
> -----
+++++*****************************************************+++++++++--
-----
>   Before they invented drawing boards, what did they go back to?



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From sun_yingwei at hotmail.com  Mon Apr 26 03:27:27 2004
From: sun_yingwei at hotmail.com (freehawk2004)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] Re: Pls help me how to use antlr in VC++6.0?
In-Reply-To: <20040426101313.GC342@cs.utwente.nl>
Message-ID: <c6io6f+l7al@eGroups.com>

Now I delete "antlr.cpp" from my project, and the compile is ok.
Did I do right?

-Freehawk.

--- In antlr-interest@yahoogroups.com, Ric Klaren <klaren@c...> 
wrote:
> On Mon, Apr 26, 2004 at 10:05:41AM -0000, freehawk2004 wrote:
> > I deleted dll.cpp from my project.
> > but I cannot find the defines of ANTLR_EXPORT or ANTLR_IMPORTS.
> 
> Maybe you added them to the project settings? It depends a little 
on which
> build instructions you are using. The most recent ones are in
> lib/cpp/README.
> 
> > Now the error of compile is only --->>>>
> >
> > 'vcl.h': No such file or directory
> >
> > I still can not find "vcl.h" in my computer.
> > In the file of "antlr.cpp", "#include <vcl.h>" is included.
> > Could you know why?
> 
> antlr.cpp is not in the distribution of antlr 2.7.4 so it probably 
should
> not be in the project.
> 
> Cheers,
> 
> Ric
> --
> -----
+++++*****************************************************+++++++++--
-----
>     ---- Ric Klaren ----- j.klaren@u... ----- +31 53 4893755  ----
> -----
+++++*****************************************************+++++++++--
-----
>   Before they invented drawing boards, what did they go back to?



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Mon Apr 26 03:39:59 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] Re: Pls help me how to use antlr in VC++6.0?
In-Reply-To: <c6inu3+c9jq@eGroups.com>
References: <20040426101313.GC342@cs.utwente.nl> <c6inu3+c9jq@eGroups.com>
Message-ID: <20040426103959.GD342@cs.utwente.nl>

On Mon, Apr 26, 2004 at 10:22:59AM -0000, freehawk2004 wrote:
> I setted my project as "WIN32,_DEBUG,_WINDOWS,_AFXDLL,_MBCS".
> Is it right?

No idea I'm not a MSVC user. If that's the defaults for a static library
then it should be ok.

Just make sure you follow the instructions from lib/cpp/README. e.g. add
all header files from lib/cpp/antlr and all the C++ files from lib/cpp/src
and make sure you set the include path right so that the header files in
lib/cpp/antlr get found probably a /I<path-to-where-you-installed>/lib/cpp
if I recall right. Check your compilers docs for details.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  There are 10 kinds of people - those that understand binary and
  those that don't. --- Unknown



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Mon Apr 26 03:41:42 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] Re: Pls help me how to use antlr in VC++6.0?
In-Reply-To: <c6io6f+l7al@eGroups.com>
References: <20040426101313.GC342@cs.utwente.nl> <c6io6f+l7al@eGroups.com>
Message-ID: <20040426104142.GE342@cs.utwente.nl>

On Mon, Apr 26, 2004 at 10:27:27AM -0000, freehawk2004 wrote:
> Now I delete "antlr.cpp" from my project, and the compile is ok.
> Did I do right?

If you can build one of the examples and get it to run that's a yes ;) It
will probably help to read the docs from MSVC on static libs or google for
a tutorial.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  "You can't expect to wield supreme executive power just because some
   watery tot throws a sword at you!"
  --- Monty Python and the Holy Grail



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From sun_yingwei at hotmail.com  Mon Apr 26 03:46:06 2004
From: sun_yingwei at hotmail.com (freehawk2004)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] Re: Pls help me how to use antlr in VC++6.0?
In-Reply-To: <20040426104142.GE342@cs.utwente.nl>
Message-ID: <c6ip9e+8gf2@eGroups.com>

Thank you very much.

I read the README file and knew I did right.

-Freehawk.

--- In antlr-interest@yahoogroups.com, Ric Klaren <klaren@c...> 
wrote:
> On Mon, Apr 26, 2004 at 10:27:27AM -0000, freehawk2004 wrote:
> > Now I delete "antlr.cpp" from my project, and the compile is ok.
> > Did I do right?
> 
> If you can build one of the examples and get it to run that's a 
yes ;) It
> will probably help to read the docs from MSVC on static libs or 
google for
> a tutorial.
> 
> Cheers,
> 
> Ric
> -- 
> -----
+++++*****************************************************+++++++++--
-----
>     ---- Ric Klaren ----- j.klaren@u... ----- +31 53 4893755  ----
> -----
+++++*****************************************************+++++++++--
-----
>   "You can't expect to wield supreme executive power just because 
some
>    watery tot throws a sword at you!"
>   --- Monty Python and the Holy Grail



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Mon Apr 26 04:07:53 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:45 2004
Subject: Unsubscription by antlr-interest member
Message-ID: <1082977673.377.15963.m5@yahoogroups.com>


Hello,

This is an automated email message to let you know that
sgalan@diquima.upm.es unsubscribed from your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a member unsubscribes.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 



From klaren at cs.utwente.nl  Mon Apr 26 05:23:03 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] "everything else" clause
In-Reply-To: <20040425152418.5AFFA57C001@h4866.serverkompetenz.net>
References: <20040425152418.5AFFA57C001@h4866.serverkompetenz.net>
Message-ID: <20040426122302.GF342@cs.utwente.nl>

On Sun, Apr 25, 2004 at 05:30:34PM +0200, Mike Lischke wrote:
> Does anybody know how I can specify a rule, which matches a few things and
> collects everything else into an own series of tokens. ANTLR creates a
> switch statement from my grammar, which contains the few allowed cases. But
> instead using the default branch for everything else it lists all tokens it
> knows for that single parser for the "rest" of the input. This does not
> work well however because due to the lexer there can be tokens, which are
> not known to the parser.
>
...
> rest:
>   (options {greedy = false;}: .)+
> ;
>
> produces a nondeterminism warning for each alternative in the program rule.
> I would be very thankful for any good solution.

The . alternative always generates non determinism errors since it does not
behave like 'if-nothing-matched-so-far-try-this'. In general you can read
the generated code and see if the does the right thing. Note that you
probably have to move the '.' into the rule with the other alternatives
because the parser will never leave the above rule (barring EOF) (I don't
think the greedy option will matter in this case).

In the action code for the . alternative you will have to make sure to do
the right thing with the tokens you don't want to match in the parser. Note
also that your lexer will have tokenized it in some way. You could also
maybe use a tokenstream to get the right effect (e.g. replace whole ranges
of tokens with a wildcard token that stores the actual tokens beneath it
similar to the hidden token stuff)

You will maybe get strange interactions with semantic predicates (depending
on the action used, you may be able to cheat that with an init action for
the . alternative and check explicitly for guessing mode there).

(Advice read a lot of generated code ;) )

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
     "Evil will always triumph, because Good is dumb." ---  Spaceballs



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From a_urazov at mail.ru  Mon Apr 26 06:44:14 2004
From: a_urazov at mail.ru (Andrey R. Urazov)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] Strange ANTLR behavior when using heterogeneous ASTs
Message-ID: <20040426134414.GB7828@ktulu>

Hello,

I found it very strange that when in the tokens section I define my own
AST types for tokens, it is NOT a direct instruction to generate code
performing custom ASTs' factory methods registration in the
`initializeASTfactory' member function of the generated parser class.
The factory method gets registered only when the token is used somewhere
in the grammar but not in a grammar action.

For example, for the following grammar file:

------------------------------------------

options { language = Cpp; }

class TestParser extends Parser;

options { buildAST = true; }

tokens {
    ACTION_TOKEN<AST=MyAST>;
    GRAMMAR_TOKEN<AST=MyAST>;
}

start!
:
    GRAMMAR_TOKEN
    {
        #start = #[ACTION_TOKEN];
    }
;

------------------------------------------

ANTLR generates the following:

------------------------------------------

...

void TestParser::initializeASTFactory( ANTLR_USE_NAMESPACE(antlr)ASTFactory& factory )
{
	factory.registerFactory(5, "MyAST", MyAST::factory);
	factory.setMaxNodeType(5);
}
const char* TestParser::tokenNames[] = {
	"<0>",
	"EOF",
	"<2>",
	"NULL_TREE_LOOKAHEAD",
	"ACTION_TOKEN",
	"GRAMMAR_TOKEN",
	0
};

------------------------------------------

I.e. `registerFactory' was only called for GRAMMAR_TOKEN explicitly
named in the grammar but not for the ACTION_TOKEN which is used in an
action.

I don't know whether this is a bug or done intentionally, but to me it
seems very strange. Maybe there was some motivation to do this in order
to, for some reason, demarcate usual and imaginary tokens. But I don't
understand this. To me, it's natural to want to fix AST types for tokens
--- no matter whether they are real or imaginary --- at once and then
operate on them without explicit AST type specification.


Best regards,
  Andrey Urazov



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Mon Apr 26 07:10:48 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] Strange ANTLR behavior when using heterogeneous ASTs
In-Reply-To: <20040426134414.GB7828@ktulu>
References: <20040426134414.GB7828@ktulu>
Message-ID: <20040426141048.GG342@cs.utwente.nl>

On Mon, Apr 26, 2004 at 08:44:14PM +0700, Andrey R. Urazov wrote:
> I found it very strange that when in the tokens section I define my own
> AST types for tokens, it is NOT a direct instruction to generate code
> performing custom ASTs' factory methods registration in the
> `initializeASTfactory' member function of the generated parser class.
> The factory method gets registered only when the token is used somewhere
> in the grammar but not in a grammar action.

Looks like an oversight in the code that generates the initialization
stuff. The heterogeneous stuff was never without headaches.

> For example, for the following grammar file:
>
> ------------------------------------------
>
> options { language = Cpp; }
>
> class TestParser extends Parser;
>
> options { buildAST = true; }
>
> tokens {
>     ACTION_TOKEN<AST=MyAST>;
>     GRAMMAR_TOKEN<AST=MyAST>;
> }
>
> start!
> :
>     GRAMMAR_TOKEN
>     {
>         #start = #[ACTION_TOKEN];
>     }
> ;
>
> ------------------------------------------
>
> ANTLR generates the following:
>
> ------------------------------------------
>
> ...
>
> void TestParser::initializeASTFactory( ANTLR_USE_NAMESPACE(antlr)ASTFactory& factory )
> {
> 	factory.registerFactory(5, "MyAST", MyAST::factory);
> 	factory.setMaxNodeType(5);
> }
> const char* TestParser::tokenNames[] = {
> 	"<0>",
> 	"EOF",
> 	"<2>",
> 	"NULL_TREE_LOOKAHEAD",
> 	"ACTION_TOKEN",
> 	"GRAMMAR_TOKEN",
> 	0
> };

Wish everyone supplied problem examples as concise as this ;)

> I don't know whether this is a bug or done intentionally, but to me it
> seems very strange. Maybe there was some motivation to do this in order
> to, for some reason, demarcate usual and imaginary tokens. But I don't
> understand this. To me, it's natural to want to fix AST types for tokens
> --- no matter whether they are real or imaginary --- at once and then
> operate on them without explicit AST type specification.

Well this stuff is around/near the biggest kludges in the codegenerators.
The heterogenous stuff is a bit of a hack on top of antlr and not really
designed up from the ground. I still advice against people using it unless
they're prepared to have the occassional headache and are not afraid to use
snapshots with fixes ;)

I'll have a peek if I can fix it easily (if it looks safe to fix at least
else it will be fixed in a snapshot after 2.7.4 release).

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  "You can't expect to wield supreme executive power just because some
   watery tot throws a sword at you!"
  --- Monty Python and the Holy Grail



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From lists at lischke-online.de  Mon Apr 26 10:24:02 2004
From: lists at lischke-online.de (Mike Lischke)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] "everything else" clause
In-Reply-To: <20040426122302.GF342@cs.utwente.nl>
Message-ID: <20040426171737.AC2E557C001@h4866.serverkompetenz.net>

Hi Ric, 

Thank you for your reply.

> The . alternative always generates non determinism errors 
> since it does not behave like 'if-nothing-matched-so-far-try-this'. 

Yes, now I know.

>In general you can read 
> the generated code and see if the does the right thing. Note 
> that you probably have to move the '.' into the rule with the 
> other alternatives because the parser will never leave the 
> above rule (barring EOF) (I don't think the greedy option 
> will matter in this case).

I could not make it work so I did it a bit differently. The grammar I'm using now for my preprocessor parser starts so:

  // ----- The main entry point -----
  program: 
    (
      define
      | undef
      | ifdef
      | ifndef
      | if_rule
      | include
      | rest
    )*
  ;

  rest:
    (options {greedy = false;}:
      ~(
        "#define"
        | "#undef"
        | "#ifdef"
        | "#ifndef"
        | "#if"
        | "#elif"
        | "#endif"
        | "#else"
        | "#include"
      )
    )+
  ;
  
  define:
    // The #define syntax is ambiguous because the optional literal could also belong to a 
		// following resource definition.
	  "#define"^ id: IDENTIFIER (options {greedy = true;}: value: literal)?
	  { 
	    // Add this value (or just the identifier if there is no value) to the symbol table.
	  	Object value = evaluator.evaluate(value_AST);
			symbolTable.put(id.getText(), value);
		}
	;
	  
	undef:
	  "#undef"^ id: IDENTIFIER
	  { 
	    // Remove the identifier from the symbol table.
	    symbolTable.remove(id.getText());
	  }
	;
	  
	ifdef:
	  ifstart: "#ifdef"^ resource_identifier program (else_part)? ifend: "#endif"
	  {
	  	// Check if the given symbol exists in our symbol table and strip out...
	  }
	;
	  
	else_part:
    "#else"^ program
    | "#elif"^ expression program (else_part)?
	;
... Etc.	  

Since the "everything else" part in the parser consists of all tokens not mentioned I had to import the lexer
vocabulary. This is no big deal as I need it anyway for my main parser and now the files are parsed correctly so far.
The next thing to todo is to make the TokenRewriteEngine work. It looks like I have to rewrite the grammar a bit because
I cannot address a single token in the else_part from, say, the ifdef rule, hence I cannot strip out the proper part.

> In the action code for the . alternative you will have to 
> make sure to do the right thing with the tokens you don't 
> want to match in the parser. 

As mentioned above my plan is to use Terence's TokenRewriteEngine to strip out the conditional parts and then feed the
result to my main parser. Once this is done I can start over to write a file name subparser.

>Note also that your lexer will 
> have tokenized it in some way. 

Indeed. It seems a bit overkill but requires the least work. The lexer will produce the inital token stream and the
rewrite engine will spit out the modified stream to the main parser. So essentially, the tokenizing is only done once
(as before). For me it sounds like an effective solution. Although, having a true "everything else"
rule/token/you-name-it would still be quite cool for skipping unwanted text parts in the parser (for the lexer there is
this nice filter stuff).

> You will maybe get strange interactions with semantic 
> predicates (depending on the action used, you may be able to 
> cheat that with an init action for the . alternative and 
> check explicitly for guessing mode there).

I only have one action in the lexer: white space skipping. So this is fortunately nothing to take care of for me.
 
> (Advice read a lot of generated code ;) )

Oh, I do. I learned a lot already from the generated code and the examples. Coming from a yacc/lex background I'm now
addicted to the recursive descent parser design. It is so wonderfully debuggable and errors can be found quite easily.
Great stuff! (many thanks to Terence at this place). I only wonder why there are so few existing grammars. I'd expect
many of them in such a successful package.

Mike
--
www.soft-gems.net



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Mon Apr 26 10:31:25 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:45 2004
Subject: Unsubscription by antlr-interest member
Message-ID: <1083000685.231.38356.w82@yahoogroups.com>


Hello,

This is an automated email message to let you know that
lorenavare <lorenavare@yahoo.com> unsubscribed from your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a member unsubscribes.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From a_urazov at mail.ru  Mon Apr 26 10:36:21 2004
From: a_urazov at mail.ru (Andrey R. Urazov)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] Strange ANTLR behavior when using heterogeneous ASTs
In-Reply-To: <20040426141048.GG342@cs.utwente.nl>
References: <20040426134414.GB7828@ktulu> <20040426141048.GG342@cs.utwente.nl>
Message-ID: <20040426173621.GC23323@ktulu>

On Mon, Apr 26, 2004 at 04:10:48PM +0200, Ric Klaren wrote:
> Looks like an oversight in the code that generates the initialization
> stuff. The heterogeneous stuff was never without headaches.

Maybe this is an oversight but it looks overcomplicated for that. Seems
that I got how the algorithm works. Let's look at a slightly modified
`heteroAST' example from the distribution:


tokens {
	PLUS<AST=PLUSNode>;
	STAR<AST=MULTNode>;
	INT;
	SEMI;
}

expr
	:	mexpr (PLUS^ mexpr)* SEMI!
	;

mexpr
	:	atom (STAR^ PLUS atom)*
	;

atom:	INT <AST=INTNode>		// also possible in tokens section
	;

Here I added one more PLUS after the STAR. Now let's see what we get:

void CalcParser::initializeASTFactory( ANTLR_USE_NAMESPACE(antlr)ASTFactory& factory )
{
	factory.registerFactory(4, "PLUSNode", PLUSNode::factory);
	factory.registerFactory(5, "MULTNode", MULTNode::factory);
	factory.registerFactory(4, "PLUSNode", PLUSNode::factory);
	factory.registerFactory(6, "INTNode", INTNode::factory);
	factory.setMaxNodeType(11);
}

Registration line has been put twice in the code. So, the algorithm
tracks all the occurences of the tokens with defined custom ASTs in the
grammar and for each occurence generates a corresponding line.

In my opinion it's overcomplicated. What needs to be done is the
UNCONDITIONAL generation of a registration line for EACH custom AST
description in the tokens section. Unconditional because it's impossible
to track all the uses of a particular token --- the user might, for
instance, not rely on ANTLR special constructs but rather call create
method on a factory object directly (and even do it outside of the .g
file).

So, not only it's logical to assume that if the user did specify custom
AST for some token, they wanted the binding to be fixed throughout the
grammar, but also UNCONDITIONAL generation is the only implementable
solution as far as we want real and imaginary tokens to have equal
rights.  The last seems right and natural to me, but I'm still doubting
whether that was the initial intention.

The following is an excerpt from the ANTLR documention:

 In the grammar, you can override the default class type by setting the
 type for nodes created from a particular INPUT token.

The word INPUT which I capitalized is the source of my doubt.


Best regards,
  Andrey Urazov



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From craigbarker1 at yahoo.com  Mon Apr 26 11:28:34 2004
From: craigbarker1 at yahoo.com (craigbarker1)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] Re: Newbie needing parser help
In-Reply-To: <c6hsse+nfpu@eGroups.com>
Message-ID: <c6jkci+gkf8@eGroups.com>

Is there an easy way to make the parser think that it's been sent a 
quoted string by inserting the " token into the token stream if its 
not the next one? I suppose this also causes the problem of how to 
position the closing ". Effectively nothing between the commas is 
significant but if I try something along the lines of (~(COMMA|NL))* 
I get lots of non-determinism.

Thanks for your help.

--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> Ugly problem.  What might make sense for this one is to make state
> changes in the lexer and recognize strings in your COMMA rule.
> 
> That is:
> 
> ID :
>    <character tokens>
>    { hash table lookup; set commaText var if appropriate }
>    ;
> 
> 
> COMMA :
>     { commaText = true }? ','! (~(',' | '\n'))+
>         { _ttype = COMMATEXT; }
>     |   ','
>     ;
> 
> You can probably also do something with a token filter.
> 
> --Loring
> 
> --- In antlr-interest@yahoogroups.com, "craigbarker1"
> <craigbarker1@y...> wrote:
> > Hi All,
> > 
> > I'm relatively new to all this language recognition stuff and 
have a 
> > question that I could really use a hand with. It's probably not 
that 
> > hard, it's more likely that i'm just missing something obvious.
> > 
> > The issue is that i'm trying to parse a language that allows 
> > unquoted strings to be passed as parameters to functions. There 
are 
> > no rules on what can go inside these unquoted string's - they 
can be 
> > the names of literals, functions or any random sequence of 
> > characters.
> > 
> > I've tried recognising a set of ID tokens (defined as per the 
java 
> > grammer specification) but this is no good as i've got 
> > testLiterals=true; so anything that is a literal comes through 
from 
> > the lexer as a specific token type and therefore doesn't match 
> > against ID.
> > 
> > Here is an example of the type of thing i'm trying to match:
> > 
> > PAGES,Sale detail,Status changes,Sale costs
> > 
> > The issue lies with the fact that each of the parameters are 
REALLY 
> > strings but in this bizzare language they don't have to be 
double 
> > quoted. The issue is further compounded by the fact that the 
word 
> > Status is really a function name and hence has a specific token 
type.
> > 
> > Here is a snippet of the grammer i've done so far to deal with 
> > this:
> > 
> > designerCommand
> > //Commands to the designer
> > 	:	"SIZE" COMMA NUM_INT COMMA NUM_INT
> > 	|	"PAGES" COMMA textParameter (COMMA textParameter)*
> > 	;
> > 
> > textParameter
> > 	:	(ID)*
> > 	| 	STRING_LITERAL
> > 	;
> > 
> > Please let me know if you can provide any advise at all or even 
> > point me to a relevant article somewhere.
> > 
> > Many thanks in advance,
> > 
> > Craig



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From craigbarker1 at yahoo.com  Mon Apr 26 13:32:30 2004
From: craigbarker1 at yahoo.com (craigbarker1)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] Re: Newbie needing parser help
In-Reply-To: <c6jr9i+o2ms@eGroups.com>
Message-ID: <c6jrku+ur0e@eGroups.com>

Thanks very much for your help on this one, i'll give your solution 
a try.

--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> --- In antlr-interest@yahoogroups.com, "craigbarker1" 
<craigbarker1@y...> wrote:
> > Is there an easy way to make the parser think that it's been 
sent a 
> > quoted string by inserting the " token into the token stream if 
its 
> 
> You can rewrite the text at the end of the rule to add quotes at 
front and back of the string
> 
> > not the next one? I suppose this also causes the problem of how 
to 
> > position the closing ". Effectively nothing between the commas 
is 
> > significant but if I try something along the lines of (~
(COMMA|NL))* 
> 
> That happens when either COMMA or NL are not "protected"--use the 
characters instead of the rules to get rid of the nondeterminism 
> warnings.
> 
> --Loring
> 
> > I get lots of non-determinism.
> > 
> > Thanks for your help.
> > 
> > --- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> 
wrote:
> > > Ugly problem.  What might make sense for this one is to make 
state
> > > changes in the lexer and recognize strings in your COMMA rule.
> > > 
> > > That is:
> > > 
> > > ID :
> > >    <character tokens>
> > >    { hash table lookup; set commaText var if appropriate }
> > >    ;
> > > 
> > > 
> > > COMMA :
> > >     { commaText = true }? ','! (~(',' | '\n'))+
> > >         { _ttype = COMMATEXT; }
> > >     |   ','
> > >     ;
> > > 
> > > You can probably also do something with a token filter.
> > > 
> > > --Loring
> > > 
> > > --- In antlr-interest@yahoogroups.com, "craigbarker1"
> > > <craigbarker1@y...> wrote:
> > > > Hi All,
> > > > 
> > > > I'm relatively new to all this language recognition stuff 
and 
> > have a 
> > > > question that I could really use a hand with. It's probably 
not 
> > that 
> > > > hard, it's more likely that i'm just missing something 
obvious.
> > > > 
> > > > The issue is that i'm trying to parse a language that allows 
> > > > unquoted strings to be passed as parameters to functions. 
There 
> > are 
> > > > no rules on what can go inside these unquoted string's - 
they 
> > can be 
> > > > the names of literals, functions or any random sequence of 
> > > > characters.
> > > > 
> > > > I've tried recognising a set of ID tokens (defined as per 
the 
> > java 
> > > > grammer specification) but this is no good as i've got 
> > > > testLiterals=true; so anything that is a literal comes 
through 
> > from 
> > > > the lexer as a specific token type and therefore doesn't 
match 
> > > > against ID.
> > > > 
> > > > Here is an example of the type of thing i'm trying to match:
> > > > 
> > > > PAGES,Sale detail,Status changes,Sale costs
> > > > 
> > > > The issue lies with the fact that each of the parameters are 
> > REALLY 
> > > > strings but in this bizzare language they don't have to be 
> > double 
> > > > quoted. The issue is further compounded by the fact that the 
> > word 
> > > > Status is really a function name and hence has a specific 
token 
> > type.
> > > > 
> > > > Here is a snippet of the grammer i've done so far to deal 
with 
> > > > this:
> > > > 
> > > > designerCommand
> > > > //Commands to the designer
> > > > 	:	"SIZE" COMMA NUM_INT COMMA NUM_INT
> > > > 	|	"PAGES" COMMA textParameter (COMMA 
textParameter)*
> > > > 	;
> > > > 
> > > > textParameter
> > > > 	:	(ID)*
> > > > 	| 	STRING_LITERAL
> > > > 	;
> > > > 
> > > > Please let me know if you can provide any advise at all or 
even 
> > > > point me to a relevant article somewhere.
> > > > 
> > > > Many thanks in advance,
> > > > 
> > > > Craig



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From lgc at mail1.jpl.nasa.gov  Mon Apr 26 13:26:26 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] Re: Newbie needing parser help
In-Reply-To: <c6jkci+gkf8@eGroups.com>
Message-ID: <c6jr9i+o2ms@eGroups.com>

--- In antlr-interest@yahoogroups.com, "craigbarker1" <craigbarker1@y...> wrote:
> Is there an easy way to make the parser think that it's been sent a 
> quoted string by inserting the " token into the token stream if its 

You can rewrite the text at the end of the rule to add quotes at front and back of the string

> not the next one? I suppose this also causes the problem of how to 
> position the closing ". Effectively nothing between the commas is 
> significant but if I try something along the lines of (~(COMMA|NL))* 

That happens when either COMMA or NL are not "protected"--use the characters instead of the rules to get rid of the nondeterminism 
warnings.

--Loring

> I get lots of non-determinism.
> 
> Thanks for your help.
> 
> --- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> > Ugly problem.  What might make sense for this one is to make state
> > changes in the lexer and recognize strings in your COMMA rule.
> > 
> > That is:
> > 
> > ID :
> >    <character tokens>
> >    { hash table lookup; set commaText var if appropriate }
> >    ;
> > 
> > 
> > COMMA :
> >     { commaText = true }? ','! (~(',' | '\n'))+
> >         { _ttype = COMMATEXT; }
> >     |   ','
> >     ;
> > 
> > You can probably also do something with a token filter.
> > 
> > --Loring
> > 
> > --- In antlr-interest@yahoogroups.com, "craigbarker1"
> > <craigbarker1@y...> wrote:
> > > Hi All,
> > > 
> > > I'm relatively new to all this language recognition stuff and 
> have a 
> > > question that I could really use a hand with. It's probably not 
> that 
> > > hard, it's more likely that i'm just missing something obvious.
> > > 
> > > The issue is that i'm trying to parse a language that allows 
> > > unquoted strings to be passed as parameters to functions. There 
> are 
> > > no rules on what can go inside these unquoted string's - they 
> can be 
> > > the names of literals, functions or any random sequence of 
> > > characters.
> > > 
> > > I've tried recognising a set of ID tokens (defined as per the 
> java 
> > > grammer specification) but this is no good as i've got 
> > > testLiterals=true; so anything that is a literal comes through 
> from 
> > > the lexer as a specific token type and therefore doesn't match 
> > > against ID.
> > > 
> > > Here is an example of the type of thing i'm trying to match:
> > > 
> > > PAGES,Sale detail,Status changes,Sale costs
> > > 
> > > The issue lies with the fact that each of the parameters are 
> REALLY 
> > > strings but in this bizzare language they don't have to be 
> double 
> > > quoted. The issue is further compounded by the fact that the 
> word 
> > > Status is really a function name and hence has a specific token 
> type.
> > > 
> > > Here is a snippet of the grammer i've done so far to deal with 
> > > this:
> > > 
> > > designerCommand
> > > //Commands to the designer
> > > 	:	"SIZE" COMMA NUM_INT COMMA NUM_INT
> > > 	|	"PAGES" COMMA textParameter (COMMA textParameter)*
> > > 	;
> > > 
> > > textParameter
> > > 	:	(ID)*
> > > 	| 	STRING_LITERAL
> > > 	;
> > > 
> > > Please let me know if you can provide any advise at all or even 
> > > point me to a relevant article somewhere.
> > > 
> > > Many thanks in advance,
> > > 
> > > Craig



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Mon Apr 26 23:15:41 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] java example grammar
In-Reply-To: <OFD5175731.73AEBDAA-ON86256E7F.008021A7-86256E7F.0082B253@milliman.com>
References: <OFD5175731.73AEBDAA-ON86256E7F.008021A7-86256E7F.0082B253@milliman.com>
Message-ID: <4F1367A7-9812-11D8-B865-000393B5606C@codetransform.com>

I think you got it right, Ron, though I'm not sure what your question  
really was.  It does go through that whole chain of rules to match  
IDENT in identPrimary.

Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit --  
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html
On Apr 23, 2004, at 4:44 PM, ronald.petty@milliman.com wrote:

>
> I was trying to use the java grammar as a bases for a VB grammar (just  
> seeing how to handle expression order etc). ?The first structure I was  
> trying to figure out for the for loop. ?In the java.g there is
>
> statement
> ? ? ? ? :
> ? ? ? ? ...
> ? ? ? ? // For statement
> ? ? ? ? | ? ? ? "for"
> ? ? ? ? ? ? ? ? ? ? ? ? LPAREN!
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? forInit SEMI! ? // initializer
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? forCond SEMI! ? // condition test
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? forIter ? ? ? ? // updater
> ? ? ? ? ? ? ? ? ? ? ? ? RPAREN!
> ? ? ? ? ? ? ? ? ? ? ? ? statement ? ? ? ? ? ? ? ? ? ? // statement to  
> loop over
>
> ? ? ? ? ....
> ? ? ? ? ;
>
> If I was using this as the input
>
> for ( i = 0; .......
>
> It would match "for" "(" then call the rule forInit. ?
>
> forInit
> ? ? ? ? ? ? ? ? // if it looks like a declaration, it is
> ? ? ? ? : ? ? ? ( ? ? ? (declaration)=> declaration
> ? ? ? ? ? ? ? ? // otherwise it could be an expression list...
> ? ? ? ? ? ? ? ? | ? ? ? expressionList
> ? ? ? ? ? ? ? ? )?
> ? ? ? ? ? ? ? ? {#forInit = #(#[FOR_INIT,"FOR_INIT"],#forInit);}
> ? ? ? ? ;
>
> I noticed that "i" cannot be a declaration because of the typeSpec in  
> the declaration rule would mean it needs to "int i" or something like  
> that, so I assume "i" is an expressionList (also because i had to be  
> declared already). ?So following that path lead to this
>
> expressionList ->
> expression->
> assignmentExpression->
> conditionalExpression->
> logicalOrExpression->
> logicalAndExpression->
> inclusiveOrExpression->
> exclusiveOrExpression->
> andExpression->
> equalityExpression->
> relationalExpression-> ?(not 100% here) ?(nested question; ( subrule1  
> )* | subrule2 ?if you don't match subrule1 do you have to match  
> subrule2? ?I think this does a zero match subrule1 here
> shiftExpression->
> additiveExpression->
> multiplicativeExpression->
> unaryExpression->
> unaryExpressionNotPlusMinus->
> postfixExpression->
> primaryExpression->
> identPrimary->
> IDENT ?(Match finally)
>
> Hopefully I was right in this, if this is true, is this because
> ? ? ? ? 1) "i" is not a declaration (becuase in Java it has already  
> been declared (and if Option Explicit is on in VB this is the same as  
> having it Dim i somewhere or Public i)
> ? ? ? ? 2) "i" is really an expression becuase it is really an LValue  
> which is the output of someprevious RValue? ?(I hope I am not  
> slaughtering terms here)
> ? ? ? ? 3) and becuase of 2) this means that an LValue is the simplest  
> kind of expression and that is why it is at the end of this chain  
> (meaning it is the highest on the precendence) (not sure about this)
>
> I am thinking in the right way about this?
>
> Thanks alot
> Ron
> *********************************************************************** 
> ***************
> This communication is intended solely for the addressee and is
> confidential. If you are not the intended recipient, any disclosure,
> copying, distribution or any action taken or omitted to be taken in
> reliance on it, is prohibited and may be unlawful. Unless indicated
> to the contrary: it does not constitute professional advice or
> opinions upon which reliance may be made by the addressee or any
> other party, and it should be considered to be a work in progress.
> *********************************************************************** 
> ***************
>
>
> Yahoo! Groups Links
>
> 	? 	To visit your group on the web, go to:
> http://groups.yahoo.com/group/antlr-interest/
> ?
> 	? 	 To unsubscribe from this group, send an email to:
> antlr-interest-unsubscribe@yahoogroups.com
> ?
> 	? 	 Your use of Yahoo! Groups is subject to the Yahoo! Terms of  
> Service.
>
>




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Tue Apr 27 00:57:46 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] "everything else" clause
In-Reply-To: <20040426171737.AC2E557C001@h4866.serverkompetenz.net>
References: <20040426122302.GF342@cs.utwente.nl> <20040426171737.AC2E557C001@h4866.serverkompetenz.net>
Message-ID: <20040427075745.GA4398@cs.utwente.nl>

On Mon, Apr 26, 2004 at 07:24:02PM +0200, Mike Lischke wrote:
> Since the "everything else" part in the parser consists of all tokens not
> mentioned I had to import the lexer vocabulary. This is no big deal as I
> need it anyway for my main parser and now the files are parsed correctly so
> far. The next thing to todo is to make the TokenRewriteEngine work. It
> looks like I have to rewrite the grammar a bit because I cannot address a
> single token in the else_part from, say, the ifdef rule, hence I cannot
> strip out the proper part.

I recall Monty mentioning a little while ago that he did some nifty
overriding on a few parser methods (probably some tricks around match(..)
is my guess) and got it to behave like a tokenfilter/stream. If you go that
way you can just chain the parsers and you won't have to use the
TokenRewriteEngine which is not the most efficient for large input files
(whole file gets stored in memory) I'm not sure if he posted specifics
though.

> Indeed. It seems a bit overkill but requires the least work. The lexer will
> produce the inital token stream and the rewrite engine will spit out the
> modified stream to the main parser. So essentially, the tokenizing is only
> done once (as before). For me it sounds like an effective solution.

Sounds very workable :) (unless the input files are very big)

> Oh, I do. I learned a lot already from the generated code and the examples.
> Coming from a yacc/lex background I'm now addicted to the recursive descent
> parser design. It is so wonderfully debuggable and errors can be found
> quite easily.

Yeah I do like recursive descent as well :)

> I only wonder why there are so few existing grammars. I'd expect many of
> them in such a successful package.

Dunno, there are actually quite a lot I think, although it might be bad
compared to others (not really aware of a big lex/yacc repository with
grammars, also not for some of the other competition (then again I did not
really look)).

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
 Why don't we just invite them to dinner and massacre them all when they're
  drunk? You heard the man. There's seven hundred thousand of them. Ah? ..
           So it'd have to be something simple with pasta, then.
                 From: Interesting Times by Terry Pratchet



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From sun_yingwei at hotmail.com  Tue Apr 27 04:50:09 2004
From: sun_yingwei at hotmail.com (freehawk2004)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] Could antlr do this ?
Message-ID: <c6lhdh+ik1h@eGroups.com>

Hello everyone:

 Example for :
 "go from ab + 1 to dd - ( 2 +3 ) "
the key is "go","from", "to"
I want to get "ab + 1" and "dd - (2 + 3)". In fact, there are a lot 
of commands like "go" and the combination of keys have a lot of 
pattern. Can antlr do it?

If it can do, who hava a sample for using antlr in VC++6.0 or web?

 Please help me.

Thank you.

-Freehawk



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From open.zone at virgin.net  Tue Apr 27 06:14:14 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] Annotation tool best practices
Message-ID: <c6lmb6+oqtq@eGroups.com>

Hi,

I have been struggling a little to understand the extent to which the
annotation tool is useful and whether a different idea is needed to
support grammar maintenance.

In a typical language processing project, I might have a lexer, parser
and about 6 core tree parsers. Ignoring the output language
perspective, there might be two flavours each of the lexer and the
parser. One of the flavour might recognize an expanded language. No
grammar inheritance between flavours.

Comparing the tree parsers to each other, the same rule often has a
different signature and return type from one grammar to the other. And
of course many of the tree parsers might define different flavours of
a particular rule.

To keep the size of this post down, I am going to restrict my
discussion to just these two types of variation:

a. Same rule different signature across grammars
------------------------------------------------

   Grammar 1:
      expression
          :    assignment_expression
               {...}
          ;

   Grammar 2:
      expression [Location loc, Context ctx, Widget wgt] returns Type
          :    retVal=assignment_expression[loc, ctx, wgt]
               {...}
          ;

b. Same rule different flavours (even in same Grammar)
------------------------------------------------------
   Grammar 1:
      dottedName
          :    IDENT
          |    #(DOT identifier IDENT)
          ;

   Grammar 1:
      dottedNameAsString returns String 
          :    IDENT  {...}
          |    #(DOT tmp=identifierAsString IDENT)
          	{...}
          ;

   Grammar 1:
      dottedNameAsElement returns ModelElement
          :    IDENT  {...}
          |    #(DOT tmp=identifierAsElement IDENT)
          	{...}
          ;

Using the tool
==============

Using the annotation tool to deal with (a) seems to require something
like the following:

  grammar.tg
  ----------
      expression <r_expr_sig>
      	<r_expr_init>
          :    <r_expr_rspec>assignment_expression<r_expr_args>
               <r_expr_action>
          ;

  grammar.ins
  -----------
      @r_expr_sig     : [Location loc, Context ctx, Widget wgt]
returns Type
      @r_expr_init    : { //declare local var 'retVal'
                        }
      @r_expr_rspec   : retVal=
      @r_expr_args    : [loc, ctx, wgt]
      @r_expr_action  : {...}

Having to specify so much in an auxiliary file seems a little much
but, <r_expr_sig>, <r_expr_init>, <r_expr_action> would have to be
done to be able to reuse the grammar across languages anyway. So
perhaps the overhead is acceptable.


How about (b). Let's assume that the reason the grammar needs three
flavours of the basic 'dottedName' rule is because we replace some
occurrences of 'dottedName' with the 'dottedNameAsString' and
'dottedNameAsElement' flavours that do more work and need the context
of the call to do that work. Dealing with (b) seems to require
something like this:

  grammar.tg
  ----------
      class <r_class_sig>
      	<r_class_init>
          :    #( CLASS <r_class_rspec><r_class_rule><r_class_args>
LPAREN 
                   ...
                  RPAREN
                  <r_class_action>
               )
          ;

  walker1.ins - no signature, calls dottedName
  -----------
      @r_class_init    : { //init stuff
                        }
      @r_class_rule    : dottedName
      @r_class_action  : {...}

  walker2.ins - has signature, calls dottedNameAsElement
  -----------
      @r_class_sig    : [Location loc, Context ctx] returns ModelElement
      @r_class_init    : { //declare local var 'retVal'
                        }
      @r_class_rspec   : retVal=
      @r_class_rule    : dottedNameAsElement
      @r_class_args    : [loc, ctx]
      @r_class_action  : {...}

Here, we've had to move the rule name from the template grammar to the
insert file. Note that this might be required for many rules and, that
a single rule with multiple occurrences of "dottedName" might be
linked to multiple flavours via similar inserts. This seems a little
"wrong" to me somehow. I'd always imagine that as long as the *.tg
file contained the grammar and just additional tags for the insert
points, it wasn't too bad a trade-off. I get to view a cleaner, bare
bones grammar and with a good naming scheme I can even "read into the
insert file" just from the template grammar.

Heck, maybe I'm missing some insight here. How do you solve such
issues in your projects?. Do you use the annotation tool or another
tool?. Perhaps you have a very different solution based on entirely
different concepts from the text replacement preprocessing at work
here. Enquiring minds would like to know....


Cheers,

Micheal
ANTLR/C#


PS	[I would be grateful for any references to design discussion or
implementations of editors that can handle virtual documents composed
from a number of other documents like the template and insert files
above. Looking at my solution for (b) above, I would like to be able
to view and edit directly the walker1.g and walker2.g grammars. The
editor should hide the fact that they are composites of grammar.tg and
walker1.ins and walker2.ins respectively. Perhaps multiple *.tg and
*.ins files can be involved in a single grammar...]

PPS	[For those unaware of it's existence, the Annotation tool is
designed to help you maintain language- and task-specific actions code
separately from an [hopefully clearer] ANTLR grammar. It was written
by Bogdan Mitu and is available in the Yahoo Files area. A newer
version is also available from the file sharing area on the web site.]





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ronald.petty at milliman.com  Tue Apr 27 07:01:09 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:45 2004
Subject: [POTENTIAL SPAM - OPEN AT USER DISCRETION] Re: [antlr-interest] java
 example grammar
In-Reply-To: <4F1367A7-9812-11D8-B865-000393B5606C@codetransform.com>
Message-ID: <OF80C44FFF.4A5510D0-ON86256E83.004CE3C8-86256E83.004D47C0@milliman.com>

Monty,
I was just making sure I understood a more complicated (at least for 
myselft) example.  I finally figured out how to read the Trace output and 
that helps out a TON.

Have a good day,
Ron




Monty Zukowski <monty@codetransform.com> 
04/27/2004 01:15 AM
Please respond to
antlr-interest@yahoogroups.com


To
antlr-interest@yahoogroups.com
cc
Monty Zukowski <monty@codetransform.com>
Subject
[POTENTIAL SPAM - OPEN AT USER DISCRETION] Re: [antlr-interest] java 
example grammar 






I think you got it right, Ron, though I'm not sure what your question 
really was.  It does go through that whole chain of rules to match 
IDENT in identPrimary.

Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html
On Apr 23, 2004, at 4:44 PM, ronald.petty@milliman.com wrote:

>
> I was trying to use the java grammar as a bases for a VB grammar (just 
> seeing how to handle expression order etc).  The first structure I was 
> trying to figure out for the for loop.  In the java.g there is
>
> statement
>         :
>         ...
>         // For statement
>         |       "for"
>                         LPAREN!
>                                 forInit SEMI!   // initializer
>                                 forCond SEMI!   // condition test
>                                 forIter         // updater
>                         RPAREN!
>                         statement                     // statement to 
> loop over
>
>         ....
>         ;
>
> If I was using this as the input
>
> for ( i = 0; .......
>
> It would match "for" "(" then call the rule forInit.  
>
> forInit
>                 // if it looks like a declaration, it is
>         :       (       (declaration)=> declaration
>                 // otherwise it could be an expression list...
>                 |       expressionList
>                 )?
>                 {#forInit = #(#[FOR_INIT,"FOR_INIT"],#forInit);}
>         ;
>
> I noticed that "i" cannot be a declaration because of the typeSpec in 
> the declaration rule would mean it needs to "int i" or something like 
> that, so I assume "i" is an expressionList (also because i had to be 
> declared already).  So following that path lead to this
>
> expressionList ->
> expression->
> assignmentExpression->
> conditionalExpression->
> logicalOrExpression->
> logicalAndExpression->
> inclusiveOrExpression->
> exclusiveOrExpression->
> andExpression->
> equalityExpression->
> relationalExpression->  (not 100% here)  (nested question; ( subrule1 
> )* | subrule2  if you don't match subrule1 do you have to match 
> subrule2?  I think this does a zero match subrule1 here
> shiftExpression->
> additiveExpression->
> multiplicativeExpression->
> unaryExpression->
> unaryExpressionNotPlusMinus->
> postfixExpression->
> primaryExpression->
> identPrimary->
> IDENT  (Match finally)
>
> Hopefully I was right in this, if this is true, is this because
>         1) "i" is not a declaration (becuase in Java it has already 
> been declared (and if Option Explicit is on in VB this is the same as 
> having it Dim i somewhere or Public i)
>         2) "i" is really an expression becuase it is really an LValue 
> which is the output of someprevious RValue?  (I hope I am not 
> slaughtering terms here)
>         3) and becuase of 2) this means that an LValue is the simplest 
> kind of expression and that is why it is at the end of this chain 
> (meaning it is the highest on the precendence) (not sure about this)
>
> I am thinking in the right way about this?
>
> Thanks alot
> Ron
> *********************************************************************** 
> ***************
> This communication is intended solely for the addressee and is
> confidential. If you are not the intended recipient, any disclosure,
> copying, distribution or any action taken or omitted to be taken in
> reliance on it, is prohibited and may be unlawful. Unless indicated
> to the contrary: it does not constitute professional advice or
> opinions upon which reliance may be made by the addressee or any
> other party, and it should be considered to be a work in progress.
> *********************************************************************** 
> ***************
>
>
> Yahoo! Groups Links
>
>                ?               To visit your group on the web, go to:
> http://groups.yahoo.com/group/antlr-interest/
>  
>                ?                To unsubscribe from this group, send an 
email to:
> antlr-interest-unsubscribe@yahoogroups.com
>  
>                ?                Your use of Yahoo! Groups is subject to 
the Yahoo! Terms of 
> Service.
>
>




 
Yahoo! Groups Links



 




**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040427/9a470652/attachment.html
From notify at yahoogroups.com  Tue Apr 27 07:40:02 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:45 2004
Subject: New antlr-interest member
Message-ID: <1083076802.381.41027.w71@yahoogroups.com>


Hello,

This is an automated email message to let you know that
xlrg2002 <xlrg2002@yahoo.de> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From klaren at cs.utwente.nl  Tue Apr 27 08:52:22 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] TokenStreamRewriteEngine and C++ and RefCounters
In-Reply-To: <1114A39C-93CC-11D8-9E9F-000393A56BB6@glyphic.com> <20040420141318.GA2895@ktulu>
References: <B39B7054-9306-11D8-9E9F-000393A56BB6@glyphic.com> <20040421112429.GI5811@cs.utwente.nl> <1114A39C-93CC-11D8-9E9F-000393A56BB6@glyphic.com> <20040419164301.GA1831@ktulu> <20040420090432.GD657@cs.utwente.nl> <20040420141318.GA2895@ktulu>
Message-ID: <20040427155222.GE4398@cs.utwente.nl>

Hi,

The RefCounter stuff kept nagging in the back of my mind so I tinkered with
it a bit earlier as expected.

On Tue, Apr 20, 2004 at 09:13:18PM +0700, Andrey R. Urazov wrote:
> Is it possible to release some snapshot sooner? If not, could you
> possibly pinpoint what's the problem with the RefToken since I'll need
> the functionality of a rewrite engine within two weeks and will have to
> implement it on my own if it's not yet available by the time.

I got the TokenStreamRewriter going mostly it seems (compared to the java
version I now only see a small difference in whitespace handling probably
something small somewhere).

> And also, out of curiosity, what's so sucky about these refcounters in
> general?

Two extra for the list:
Antlr's refcounter is non-intrusive.
- Because how it's set up it's slower as Mark's for instance (one extra
  null pointer check per smartpointer dereference)
- I'm not sure but I think Mark's should handle covariant return values
  because it's intrusive.
  (e.g. having the factories return RefToSubclass in stead of RefToken as I
  have to with Antlr's refcounter)

On Wed, Apr 21, 2004 at 12:42:47PM -0700, Mark Lentczner wrote:
> > Although I got a nice hunch from looking at your code :)
> Three cheers for symbiotic open source.

It looks like the hunch was good. I reimplemented RefCount into a
TokenRefCount that does the right thing and a bit more.

Basically the problem was that there was not one base class for all the
reference counted objects together with no way to convert the ref's from
one to another (mostly due to class layout).

Problem of the new implementation is that it's much too permissive in
conversions (guess I'm for extremes) it would merrily convert
TokenWithIndex to RefTokenWithIndex (because Token is used as the
underlying pointer)

I fixed that by adding a bit of Loki's template magic which automagically
adds an assert and dynamic cast to the conversion (could be a policy object
too I guess) if it's needed. Works quite nice I may say.

If there's interest I can provide a package for people to look at.

I also looked at replacing antlr's refcounters by Mark's implemtation which
worked also flawlessly (did not check it for too permissive conversions
though, and it needed a few small tweaks) Using Marks's intrusive reference
counter might give a nice speedup for treewalkers.

> While I am a major fan of garbage collection (I was on the Smalltalk
> team at Apple, and have worked on several other garbage collectors
> after that), it would be a show-stopper for our use of Antlr:  Our
> environment is memory sensitive.

With respect to this I was thinking of doing garbage collection directly
after building tree parts at moments where it would be easy (I hope) to see
what is in the generated tree and what not.

Another question for Mark: if we were to take the countable classes from
Wheat, would you be willing to put them under the same license as antlr
e.g. public domain (or a BSD style license as planned for antlr 3) (just
curious as it would safe some license compatibility headaches ;) )?

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  "Of all the things I've lost I miss my mind the most --- Ozzy Osbourne



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ronald.petty at milliman.com  Tue Apr 27 09:16:13 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] DOT missing in java.g example
In-Reply-To: <20040427155222.GE4398@cs.utwente.nl>
Message-ID: <OFBADD558B.C1764DC0-ON86256E83.0058F454-86256E83.0059A545@milliman.com>

Hi,
I was looking some more over the java.g grammar and noticed that DOT=. is 
commented out in the Lexer.  However I don't see a Token or Literal 
representation for DOT except for


// a numeric literal
NUM_INT
        {boolean isDecimal=false; Token t=null;}
    :   '.' {_ttype = DOT;}
            (   ('0'..'9')+ (EXPONENT)? (f1:FLOAT_SUFFIX {
                {
                                if (t != null && t.getText
                        _ttype = NUM_FLOAT;
                                }

How does this work for class.method if you have never seen a NUM_INT yet 
to add a '.' or DOT="." to the literals?

Thanks
Ron

**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040427/aff2a3fe/attachment.html
From xlrg2002 at yahoo.de  Tue Apr 27 08:03:07 2004
From: xlrg2002 at yahoo.de (Oliver Haines)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] error : 'CharScanner.hpp:114: undefined reference' ... ???
Message-ID: <c6lsnb+9gru@eGroups.com>

Hi,

I try to test antlr for c++. If I compile my simple app I get this errors:

cd "/home/graemer/Projekte/antlr/debug" && WANT_AUTOCONF_2_5="1"
WANT_AUTOMAKE_1_6="1" make -k -j1  
*make all-recursive 
*Making all in src 
*g++ -DHAVE_CONFIG_H -I. -I/home/graemer/Projekte/antlr/src -I..
-I/usr/local/include -O0 -g3 -c
/home/graemer/Projekte/antlr/src/antlr.cpp 
*/bin/sh ../libtool --mode=link g++ -O0 -g3 -L/usr/local/lib -lantlr
-o antlr antlr.o  
*g++ -O0 -g3 -o antlr antlr.o -L/usr/local/lib -lantlr 
*antlr.o(.text+0x24): In function `main': 
*/usr/local/include/antlr/CharScanner.hpp:114: undefined reference to
`CalcLexer::CalcLexer[in-charge](std::basic_istream<char,
std::char_traits<char> >&)' 
*antlr.o(.text+0x36):/usr/local/include/antlr/CharScanner.hpp:233:
undefined reference to
`CalcParser::CalcParser[in-charge](antlr::TokenStream&)' 
*antlr.o(.text+0x41):/usr/local/include/antlr/CharScanner.hpp:309:
undefined reference to `CalcParser::expr()' 
*antlr.o(.gnu.linkonce.t._ZN9CalcLexerD1Ev+0xb): In function
`CalcLexer::~CalcLexer [in-charge]()': 
*/usr/local/include/antlr/CharScanner.hpp:241: undefined reference to
`vtable for CalcLexer' 
*antlr.o(.gnu.linkonce.t._ZNK10CalcParser12getTokenNameEi+0x2c): In
function `CalcParser::getTokenName(int) const': 
*/usr/local/include/antlr/CharScanner.hpp:163: undefined reference to
`CalcParser::tokenNames' 
*antlr.o(.gnu.linkonce.t._ZNK10CalcParser13getTokenNamesEv+0x4): In
function `CalcParser::getTokenNames() const': 
*/usr/local/include/antlr/CharScanner.hpp:240: undefined reference to
`CalcParser::tokenNames' 
*collect2: ld returned 1 exit status 
*make[2]: *** [antlr] Error 1 
*make[2]: Target `all' not remade because of errors. 
*make[1]: *** [all-recursive] Error 1 
*make: *** [all-recursive-am] Error 2 
*make: Target `all' not remade because of errors. 
**** Exited with status: 2 ***


I'm using kdevelop 3 and linux.

the simple grammar:

options
{
language="Cpp";
}

// Lexer
class CalcLexer extends Lexer;

options {
    k=2; // needed for newline junk
    charVocabulary='\u0000'..'\u007F'; // allow ascii
}

LPAREN: '(' ;
RPAREN: ')' ;
PLUS  : '+' ;
MINUS : '-' ;
STAR  : '*' ;
INT   : ('0'..'9')+ ;
WS    : ( ' '
        | '\r' '\n'
        | '\n'
        | '\t'
        )
        {$setType(antlr::Token.SKIP);}
      ;

// Parser
class CalcParser extends Parser;

options {
        buildAST=true;
}

expr:   mexpr ((PLUS^|MINUS^) mexpr)*
    ;

mexpr
    :   atom (STAR^ atom)*
    ;

atom:   INT
    |   LPAREN! expr RPAREN!
    ;
    
// AST-Walker
class CalcTreeWalker extends TreeParser;

options {
    importVocab=CalcLexer;
}

expr returns [int r=0]
{ int a,b; }
    :   #(PLUS  a=expr b=expr)  {r = a+b;}
    |   #(MINUS a=expr b=expr)  {r = a-b;}   
    |   #(STAR  a=expr b=expr)  {r = a*b;}
    |   i:INT                   {r = atof(i->getText().c_str());}
    ;

Please help!
thx,
Oliver




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From johnm-antlr at non.net  Tue Apr 27 09:52:03 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] Annotation tool best practices
In-Reply-To: <c6lmb6+oqtq@eGroups.com>
References: <c6lmb6+oqtq@eGroups.com>
Message-ID: <16526.36787.82013.172686@despot.non.net>

>>>>> "micheal" == micheal jor <open.zone@virgin.net> writes:
[...]

> I have been struggling a little to understand the extent to which the
> annotation tool is useful and whether a different idea is needed to
> support grammar maintenance.

ObDisclaimer:  I haven't tried using Bogdan's Annotation tool.  I have
played with a number of approaches to grammar management.

[...]

> Here, we've had to move the rule name from the template grammar to the
> insert file. Note that this might be required for many rules and, that a
> single rule with multiple occurrences of "dottedName" might be linked to
> multiple flavours via similar inserts. This seems a little "wrong" to me
> somehow. I'd always imagine that as long as the *.tg file contained the
> grammar and just additional tags for the insert points, it wasn't too bad
> a trade-off. I get to view a cleaner, bare bones grammar and with a good
> naming scheme I can even "read into the insert file" just from the
> template grammar.

Basically, that's a simplified "aspect oriented programming" (AOP)
approach.  AOP is currently a fairly hot subject area and so there's a lot
of hype and a fair bit of information floating around.


> Heck, maybe I'm missing some insight here. How do you solve such issues
> in your projects?. Do you use the annotation tool or another
> tool?. Perhaps you have a very different solution based on entirely
> different concepts from the text replacement preprocessing at work
> here. Enquiring minds would like to know....

For a concrete and available example, check out what Monty did with the
GnuC project with "literate programming" (ala Knuth via noweb).  That
allows for nice, cross-phase locality (i.e., all of those versions of
expression right next to each other).  One of my dislikes for that approach
is that the intermingling makes in more difficult to just look at all of
the rules for a single phase (in the editor).  On my play-with to-do list
is to investigate using a "literate" approach with a good outline editor so
that I could fold out all of the stuff that I didn't want to deal with at
any given point in time (think: different, editable views of a single
master source file).


Another "trick" you can do with the tree phases is to create a single,
super-set tree definition that encompasess all of the needs of all of the
different phases.  That way, each phase can reuse the exact same tree
grammar and all you're changing in each phase is the actions.  IME, I find
that that works well for sets of phases but that there needs to be explicit
breaks to cleanly and explicitly deal with more fundamental shifts.


In the majority of my experience, I keep it simple (if not simplistic :-)
and have everything in their separate files.  When I want to deal with a
single rule across multiple phases, I bring up all of the relevant files
into individual Emacs windows and I draw any needed diagrams on a
whiteboard or pad of paper.  IME, the issue for me is much less dealing
consciously with the isolated, individual (sets of) rules across multiple
files but rather needing a true grammar level "diff" tool to catch those
cases where I wasn't conscious (or smart) enough to realize that a
particular change in one spot needed to be account for in other spots.

One of the keys in my thinking about trees is how they look (i.e.,
structure) before the phase is run and how they look afterwards.  So, the
vast majority of my external documentation of a tree translator are
diagrams to help visualize the nasty corners of the transformations.


Finally, on a related subject, there seems to be two schools of thought
on how to use grammar based approaches.  One is the "pure" school which
says that the grammar drives the system.  The other is that the grammar is
a slave to the rest of the system.  The argument, IMHO, isn't one versus
the other but rather (a) which one to use for which needs and (b) whether
or not it's acceptable to mix the approaches.

In terms of (b), I'm unsure of but am concerned about your dottedNameXYZ
example as it's unclear to me why you (feel that you) need to take that
variation approach.  I.e., why isn't there only a single rule in the
grammar that provides the underlying information such that whatever is
consuming that information can extract it as appropriate?


Hope this helps,
		John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From johnm-antlr at non.net  Tue Apr 27 10:02:49 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] DOT missing in java.g example
In-Reply-To: <OFBADD558B.C1764DC0-ON86256E83.0058F454-86256E83.0059A545@milliman.com>
References: <20040427155222.GE4398@cs.utwente.nl>
	<OFBADD558B.C1764DC0-ON86256E83.0058F454-86256E83.0059A545@milliman.com>
Message-ID: <16526.37433.176799.188751@despot.non.net>

>>>>> "ronald" == ronald petty <ronald.petty@milliman.com> writes:
[...]

> Hi, I was looking some more over the java.g grammar and noticed that
> DOT=. is commented out in the Lexer.

That's because a dot/period is an overloaded lexeme.  I.e., it's used in a
number of different contexts -- in terms of the lexer, it's not only used
between things but also as an integral part of a decimal number.


[...]

> How does this work for class.method if you have never seen a NUM_INT yet
> to add a '.' or DOT="." to the literals?

Remember that the lexer is more reactive and less predictive than a parser
or tree walker.  That is, the non-protected rules are "active" (check out
the generated code for a lexer for the gory details) whenever the lexer
returns to the top-level.  I.e., just because we're in the "NUM_INT" rule
doesn't mean that we're saying that we must predict "NUM_INT".  In fact, as
you can see, NUM_INT is merely the default return type of the rule.

The NUM_INT rule *is* a bit funny looking because of how the various
allowable number formats work.  For example, a lead dot on floating point
types -- that's why having a top-level DOT rule in the lexer won't work for
this particular language.

Hope this helps,
		John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ronald.petty at milliman.com  Tue Apr 27 10:45:09 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] VB If elseif end if?
In-Reply-To: <16526.37433.176799.188751@despot.non.net>
Message-ID: <OFB262E156.0728989D-ON86256E83.0060F44F-86256E83.0061C9B1@milliman.com>

I have in my Parser the rule

//don't forget s1:s2:s3 etc for "If x Then s1:s2..." and for general use
statement
        :       {System.out.println("Entered Statement:Declaration");}
                (declaration)=>declaration
                {System.out.println("Leaving Statement:Declaration");}
        |       {System.out.println("Entered Statement:Expr");}
                expr
                {System.out.println("Leaving Statement:Expr");}
        |       {System.out.println("Entered Statement:IF");}
                IF expr THEN (statement)* (ELSEIF expr THEN (statement)*)* 
(ELSE (statement)*)? (END IF)?
                {System.out.println("Leaving Statement:IF");}
        ;

And for newlines in the lexer

NL
        :
        (       ("\r\n") => "\r\n"
        |       '\r'
        |       '\n'
        )+
        { newline(); _ttype = Token.SKIP; }
        ;

If I have the input

if x then y
if x then y

The result is valid according to my grammar.  However instead of two "if 
then" statements I have one "if" with another shoved in the tail end of 
the statement.

(hope this is good syntax)

statement
if (start of statement input)
x = expr (for now just an identifier)
then (next part of the expression
y = statement (which is an expr, just an identifier)
now sense we are looping in the statement (statement)*
the next if x then y is starting there instead of a top level statement.

This is because in VB the newline after y means your done.  However I eat 
all newlines in the lexer.  What are the possible ways around this?

Thanks for the pointers.
Ron

**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040427/0b05d73e/attachment.html
From johnm-antlr at non.net  Tue Apr 27 11:07:31 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] VB If elseif end if?
In-Reply-To: <OFB262E156.0728989D-ON86256E83.0060F44F-86256E83.0061C9B1@milliman.com>
References: <16526.37433.176799.188751@despot.non.net>
	<OFB262E156.0728989D-ON86256E83.0060F44F-86256E83.0061C9B1@milliman.com>
Message-ID: <16526.41315.175397.123956@despot.non.net>

>>>>> "ronald" == ronald petty <ronald.petty@milliman.com> writes:
[...]

> This is because in VB the newline after y means your done.  However I eat
> all newlines in the lexer.  What are the possible ways around this?

ObDisclaimer. I haven't even looked at any version of Microsoft BASIC in at
least a decade.

What's the actual rules for dealing with newlines in VB?  E.g., can you
have individual expressions or "statements" which occur on multiple lines
or is the newline always a terminator (or a separator)?

Basically, depending on that answer, you could inject a synthetic separator
or terminator when you see a newline.

Take care,
	John



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From a_urazov at mail.ru  Tue Apr 27 12:43:09 2004
From: a_urazov at mail.ru (Andrey R. Urazov)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] TokenStreamRewriteEngine and C++ and RefCounters
In-Reply-To: <20040427155222.GE4398@cs.utwente.nl>
References: <B39B7054-9306-11D8-9E9F-000393A56BB6@glyphic.com> <20040421112429.GI5811@cs.utwente.nl> <1114A39C-93CC-11D8-9E9F-000393A56BB6@glyphic.com> <20040419164301.GA1831@ktulu> <20040420090432.GD657@cs.utwente.nl> <20040420141318.GA2895@ktulu> <20040427155222.GE4398@cs.utwente.nl>
Message-ID: <20040427194309.GB4703@ktulu>

Hi,

On Tue, Apr 27, 2004 at 05:52:22PM +0200, Ric Klaren wrote:
> I got the TokenStreamRewriter going mostly it seems (compared to the
> java version I now only see a small difference in whitespace handling
> probably something small somewhere).
So nice! Soon I will be able to apply and test it :)

> It looks like the hunch was good. I reimplemented RefCount into
> a TokenRefCount that does the right thing and a bit more.

Now that I have been using the ANTLR smart pointers for some time,
I have to admit that ASTRefCount has to be rewritten as well. The
current implementation turned out to be a bit buggy.

As I've found out, `operator=(const T*)' and `operator T*()' are unsafe
(in Boost, for example, these aren't defined at all). When implemented
together, not only they are unsafe, they are rather dangerous since they
can lead to nonshared ownership of a single object and therefore to its
premature deletion.

Consider the code from BaseAST.cpp (the problems I experience now are
caused by the implicit misuse of smart pointers in this function):

void BaseAST::addChild( RefAST c )
{
    if( !c )
        return;

    RefBaseAST tmp = down;

    if (tmp)
    {
        while (tmp->right)
            tmp = tmp->right;
        tmp->right = c;
    }
    else
        down = c;
}

Here when `c' is assigned to `right' or `down', assignment of
`ASTRefCount<AST>' to `ASTRefCount<BaseAST>' is performed and at this
point `c' is implicitly converted to `AST*' and then the `operator=(T*)'
is engaged, thus separating the ownership.

Now I have something like the following in the grammar:

rule
{
    RefAST ast = #[TOKEN];
}
:
    (
        index:expression
        {
            ast->addChild(#index);
        }
    )+
;

And as the new `expression' is assigned to `index', the reference count
for the old falls to zero and the object is deleted instead of staying
in memory until the reference in the tree is released as well. When I
then call getNumberOfChildren() the program hangs :(


Best regards,
  Andrey Urazov



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Tue Apr 27 14:58:36 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] Annotation tool best practices
In-Reply-To: <16526.36787.82013.172686@despot.non.net>
References: <c6lmb6+oqtq@eGroups.com> <16526.36787.82013.172686@despot.non.net>
Message-ID: <08ECE8A3-9896-11D8-B2D6-000393B5606C@codetransform.com>


On Apr 27, 2004, at 9:52 AM, John D. Mitchell wrote:

> For a concrete and available example, check out what Monty did with the
> GnuC project with "literate programming" (ala Knuth via noweb).  That
> allows for nice, cross-phase locality (i.e., all of those versions of
> expression right next to each other).  One of my dislikes for that 
> approach
> is that the intermingling makes in more difficult to just look at all 
> of
> the rules for a single phase (in the editor).  On my play-with to-do 
> list
> is to investigate using a "literate" approach with a good outline 
> editor so
> that I could fold out all of the stuff that I didn't want to deal with 
> at
> any given point in time (think: different, editable views of a single
> master source file).

Note that the noweb source is available by request.  In the 
distribution I didn't want people to deal with noweb so I put in the 
files after noweb was run.

On my latest project, instead of going through the noweb stuff I wrote 
a small python program to extract /*tree */ comments.  Example from my 
select.g:

orderByClause
	: ORDER^ BY! expression (ASC | DESC)? (COMMA! expression (ASC | DESC)? 
)*
	;

/*tree
orderByClause
	: #(ORDER (expression (ASC | DESC)? )+)
	;
*/

Here's the regex to grab all those tree comments:  
p=re.compile(r'/\*tree(.*?)\*/',re.DOTALL).  My python program writes 
out a header and then all the tree rules into selectTreeParser.g.  Only 
major drawback is that I have to look at selectTreeParser.g when I have 
a line number for a problem with the tree grammar.  No big deal for me.

I really can't work on building trees separate from tree parsing.  
Loring's tree stuff automatically generates a tree parser from your 
grammar tree actions.  It's gonna be so cool when it can be released!

Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From jbb at acm.org  Tue Apr 27 15:37:14 2004
From: jbb at acm.org (jbb@acm.org)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] Could antlr do this ?
Message-ID: <E1BIbCU-0008Ex-00@gecko>

On Tue, 27 Apr 2004 11:50:09 +0000, sun_yingwei@hotmail.com wrote:
>Hello everyone:
>
> Example for :
> "go from ab + 1 to dd - ( 2 +3 ) "
>the key is "go","from", "to"
>I want to get "ab + 1" and "dd - (2 + 3)". In fact, there are a lot 
>of commands like "go" and the combination of keys have a lot of 
>pattern. Can antlr do it?
>
>If it can do, who hava a sample for using antlr in VC++6.0 or web?
>
> Please help me.
>
>Thank you.
>
>-Freehawk

You aren't very specific about your language's rules, but here is a
stab at a sample parser and lexer - it is in java.

Hope this helps...

---------------CUT HERE---------------CUT HERE---------------
{ 
import java.io.*;
}

class freehawkParser extends Parser;

options {
    buildAST = true;
}

{
    public static void main(String[] args) {
	try {
	    freehawkLexer lexer =
		new freehawkLexer(new StringReader("go from ab + 1 to dd - ( 2 +3 )"));
	    freehawkParser parser = new freehawkParser(lexer);
	    parser.program();
	    antlr.CommonAST ast = (antlr.CommonAST)parser.getAST();
	    if (ast != null) {
		System.out.println("Parse result=`"+ast.toStringList()+"`");
	    } else {
		System.out.println("null AST");
	    }
	} catch(Exception e) {
	    System.err.println("exception: "+e);
	}
    }
}

program : statement EOF! ;

statement : GO_KW FROM_KW expression TO_KW expression ;

expression : term ( add_op term )* ;

term : factor ( mul_op factor )*;

factor :
      IDENTIFIER
    | NUMBER
    | LPARN expression RPARN
    ;

add_op : PLUS  | MINUS ;
mul_op : SPLAT | SLANT ;

class freehawkLexer extends Lexer;

tokens {
    GO_KW = "go";
    FROM_KW = "from";
    TO_KW = "to";
}

protected LETTER : 'a' .. 'z' | 'A' .. 'Z' ;
protected DIGIT : '0' .. '9' ;

IDENTIFIER options{ testLiterals = true; } : LETTER ( LETTER | DIGIT | '_' )* ;
NUMBER : ( DIGIT )+ ( '.' ( DIGIT )+ )? ;

PLUS : '+' ;
MINUS : '-' ;
SPLAT : '*' ;
SLANT : '/' ;
LPARN : '(' ;
RPARN : ')' ;

WS  : ( ' '|'\t') { $setType(Token.SKIP); };
EOL : ( '\r' ( '\n' )? | '\n' ) { newline(); $setType(Token.SKIP); };
---------------CUT HERE---------------CUT HERE---------------


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From sun_yingwei at hotmail.com  Tue Apr 27 18:17:02 2004
From: sun_yingwei at hotmail.com (freehawk2004)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] Re: Could antlr do this ?
In-Reply-To: <E1BIbCU-0008Ex-00@gecko>
Message-ID: <c6n0me+n7rd@eGroups.com>

Thank you very much.

By the sample, when there are "from" and "to" in one command at same 
time, maybe it can not get anything. 
Because  the first expression need to be teminated by '\r' or '\n', 
I can not input "go from a + 1 to b + 2" in one line.

----->>>>>>
"> EOL : ( '\r' ( '\n' )? | '\n' ) { newline(); $setType
(Token.SKIP); };
" 

Am I right?

-Freehawk.




--- In antlr-interest@yahoogroups.com, jbb@a... wrote:
> On Tue, 27 Apr 2004 11:50:09 +0000, sun_yingwei@h... wrote:
> >Hello everyone:
> >
> > Example for :
> > "go from ab + 1 to dd - ( 2 +3 ) "
> >the key is "go","from", "to"
> >I want to get "ab + 1" and "dd - (2 + 3)". In fact, there are a 
lot 
> >of commands like "go" and the combination of keys have a lot of 
> >pattern. Can antlr do it?
> >
> >If it can do, who hava a sample for using antlr in VC++6.0 or web?
> >
> > Please help me.
> >
> >Thank you.
> >
> >-Freehawk
> 
> You aren't very specific about your language's rules, but here is a
> stab at a sample parser and lexer - it is in java.
> 
> Hope this helps...
> 
> ---------------CUT HERE---------------CUT HERE---------------
> { 
> import java.io.*;
> }
> 
> class freehawkParser extends Parser;
> 
> options {
>     buildAST = true;
> }
> 
> {
>     public static void main(String[] args) {
> 	try {
> 	    freehawkLexer lexer =
> 		new freehawkLexer(new StringReader("go from ab + 1 
to dd - ( 2 +3 )"));
> 	    freehawkParser parser = new freehawkParser(lexer);
> 	    parser.program();
> 	    antlr.CommonAST ast = (antlr.CommonAST)parser.getAST();
> 	    if (ast != null) {
> 		System.out.println("Parse 
result=`"+ast.toStringList()+"`");
> 	    } else {
> 		System.out.println("null AST");
> 	    }
> 	} catch(Exception e) {
> 	    System.err.println("exception: "+e);
> 	}
>     }
> }
> 
> program : statement EOF! ;
> 
> statement : GO_KW FROM_KW expression TO_KW expression ;
> 
> expression : term ( add_op term )* ;
> 
> term : factor ( mul_op factor )*;
> 
> factor :
>       IDENTIFIER
>     | NUMBER
>     | LPARN expression RPARN
>     ;
> 
> add_op : PLUS  | MINUS ;
> mul_op : SPLAT | SLANT ;
> 
> class freehawkLexer extends Lexer;
> 
> tokens {
>     GO_KW = "go";
>     FROM_KW = "from";
>     TO_KW = "to";
> }
> 
> protected LETTER : 'a' .. 'z' | 'A' .. 'Z' ;
> protected DIGIT : '0' .. '9' ;
> 
> IDENTIFIER options{ testLiterals = true; } : LETTER ( LETTER | 
DIGIT | '_' )* ;
> NUMBER : ( DIGIT )+ ( '.' ( DIGIT )+ )? ;
> 
> PLUS : '+' ;
> MINUS : '-' ;
> SPLAT : '*' ;
> SLANT : '/' ;
> LPARN : '(' ;
> RPARN : ')' ;
> 
> WS  : ( ' '|'\t') { $setType(Token.SKIP); };
> EOL : ( '\r' ( '\n' )? | '\n' ) { newline(); $setType
(Token.SKIP); };
> ---------------CUT HERE---------------CUT HERE---------------



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From jpschewe at mtu.net  Tue Apr 27 20:15:45 2004
From: jpschewe at mtu.net (Jon Schewe)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] Re: How to make antlr parse this
In-Reply-To: <c5s348+eh6i@eGroups.com>
References: <c5s348+eh6i@eGroups.com>
Message-ID: <1083122145.7138.21.camel@workstation.mn.mtu.net>

On Sat, 2004-04-17 at 15:12, Mark wrote:
> favor of matching the invariant.  Which leads us to:
> 
> unit: pre start middle end ;
> pre: fluff ;
> start : (package fluff)? ;
> middle : (import fluff)* ;
> end : ((invariant)? typedef)* ;
> fluff : 
>     (comment)=> ( (invariant typedef)=> empty | comment fluff )
>     | empty ;
> invariant : comment { some code here } ;
> empty : ;
> 
> So, fluff is a sequence of zero or more comments, but doesn't include the last comment 
> that could be an invariant if if is followed by a typedef.  Alas, this is tail recursive, but that 
> may or may not be a concern for you.  (Do you expect to parse things with thousands of 
> consecutive comment blocks?)
> 
No, I don't expect there to be throunds of consecutive comment blocks,
so I'm not worried about the tail recursion.  

Thank you so very much for this help!  I went back and implemented this
and it works perfectly.  I hadn't thought of pushing the comments up to
the previous rule like that.

-- 
Jon Schewe | http://mtu.net/~jpschewe
GPG signature at http://mtu.net/~jpschewe/gpg.sig.html
For I am convinced that neither death nor life, neither angels 
nor demons, neither the present nor the future, nor any 
powers, neither height nor depth, nor anything else in all 
creation, will be able to separate us from the love of God that 
is in Christ Jesus our Lord. - Romans 8:38-39
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 198 bytes
Desc: This is a digitally signed message part
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20040427/0b8eab52/attachment.bin
From Anthony.Youngman at ECA-International.com  Wed Apr 28 01:29:59 2004
From: Anthony.Youngman at ECA-International.com (Anthony Youngman)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] VB If elseif end if?
Message-ID: <C7FE35004D40FD45AA342991B88CE40409AE9D@lnml1.eca-international.local>

The way I've handled it is NOT to have "_ttype = Token.SKIP;" in the
lexer.
 
However, this means I end up with an NL token in the parser that I have
to explicitly handle.
 
I chose that route because I have syntax like "ELSE statements newline"
and
 
"
ELSE
   one or several lines of statements
END
"
 
so the newline is syntactically significant.
 
Oh - a quick tip if you do that - have an EOL token in the parser that
eats multiple NLs, and then the other parser rules just process EOLs.
That way you don't have to worry about blank lines :-)
 
Cheers,
Wol

________________________________

From: ronald.petty@milliman.com [mailto:ronald.petty@milliman.com] 
Sent: 27 April 2004 18:45
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] VB If elseif end if?




And for newlines in the lexer 

NL 
        : 
        (       ("\r\n") => "\r\n" 
        |       '\r' 
        |       '\n' 
        )+ 
        { newline(); _ttype = Token.SKIP; } 
        ; 


This is because in VB the newline after y means your done.  However I
eat all newlines in the lexer.  What are the possible ways around this? 

Thanks for the pointers. 
Ron 
************************************************************************
**************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
************************************************************************
**************


________________________________

Yahoo! Groups Links


*	To visit your group on the web, go to:
	http://groups.yahoo.com/group/antlr-interest/
	  
*	To unsubscribe from this group, send an email to:
	antlr-interest-unsubscribe@yahoogroups.com
<mailto:antlr-interest-unsubscribe@yahoogroups.com?subject=Unsubscribe> 	  
*	Your use of Yahoo! Groups is subject to the Yahoo! Terms of
Service <http://docs.yahoo.com/info/terms/> . 




****************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

****************************************************************************

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040428/672f015b/attachment.html
From notify at yahoogroups.com  Wed Apr 28 02:06:38 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:45 2004
Subject: New antlr-interest member
Message-ID: <1083143198.376.24703.w8@yahoogroups.com>


Hello,

This is an automated email message to let you know that
oliver_kowalke <oliver_kowalke@yahoo.de> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From klaren at cs.utwente.nl  Wed Apr 28 03:50:56 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] TokenStreamRewriteEngine and C++ and RefCounters
In-Reply-To: <20040427194309.GB4703@ktulu>
References: <B39B7054-9306-11D8-9E9F-000393A56BB6@glyphic.com> <20040421112429.GI5811@cs.utwente.nl> <1114A39C-93CC-11D8-9E9F-000393A56BB6@glyphic.com> <20040419164301.GA1831@ktulu> <20040420090432.GD657@cs.utwente.nl> <20040420141318.GA2895@ktulu> <20040427155222.GE4398@cs.utwente.nl> <20040427194309.GB4703@ktulu>
Message-ID: <20040428105056.GB8682@cs.utwente.nl>

Hi,

On Wed, Apr 28, 2004 at 02:43:09AM +0700, Andrey R. Urazov wrote:
> Now that I have been using the ANTLR smart pointers for some time,
> I have to admit that ASTRefCount has to be rewritten as well. The
> current implementation turned out to be a bit buggy.

Didn't notice any bugs in them I hardly ever touch them. But maybe some of
the later changes introduce some new interaction that let's something bad
happen.

> As I've found out, `operator=(const T*)' and `operator T*()' are unsafe

The operator T*() I already replace in TokenRefCount with a operator bool()
which is somewhat safer.

> (in Boost, for example, these aren't defined at all). When implemented
> together, not only they are unsafe, they are rather dangerous since they
> can lead to nonshared ownership of a single object and therefore to its
> premature deletion.

I personally did not run into premature deletion problems (using a malloc
debugger very regularly to verify my project) There might be a resource
leak though but I'm not sure wether that's due to antlr or my own code.

> Consider the code from BaseAST.cpp (the problems I experience now are
> caused by the implicit misuse of smart pointers in this function):

I'll have a look at this when I'm not two days behind on sleep... (probably
a lot safer ;) )

> rule
> {
>     RefAST ast = #[TOKEN];
> }
> :
>     (
>         index:expression
>         {
>             ast->addChild(#index);
>         }
>     )+
> ;
>
> And as the new `expression' is assigned to `index', the reference count
> for the old falls to zero and the object is deleted instead of staying
> in memory until the reference in the tree is released as well. When I
> then call getNumberOfChildren() the program hangs :(

Shouldn't there be a '!' on this rule to turn of automatic
treeconstruction? (unless you have it turned off on grammar level) This
might create a loop in the tree which might hang up getNumberOfChildren if
I'm not mistaken.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  Quidquid latine dictum sit, altum viditur.
                 (Whatever is said in Latin sounds profound.)



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From oliver_kowalke at yahoo.de  Wed Apr 28 02:23:10 2004
From: oliver_kowalke at yahoo.de (oliver_kowalke)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] c++ interpreter with antlr ??
Message-ID: <c6nt5u+n9jj@eGroups.com>

hello,

i'm new to antlr and topics like compiler development.
my simple application (written in c++) parses c++ syntax (used the c++
grammar provided by David Wigg).
i've no glue how to get my app to interpret the parsed syntax. some
projects already interpret c++ but i want to learn the neccessary steps.
maybe you can post me a link to a tutorial or so?
thanks for your help.
oliver

--- the simple code ---

antlr::ASTFactory factory;

std::stringstream ss;
ss << "int f() { return 3+2; }";

CPPLexer lexer( ss);

CPPParser parser( lexer);
parser.initializeASTFactory( factory);
parser.setASTFactory( & factory);
parser.init();
parser.translation_unit();

antlr::RefAST ast = parser.getAST();
std::cout << "as string list: " << ast->toStringList() << std::endl;
std::cout << "as string tree: " << ast->toStringTree() << std::endl;




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Wed Apr 28 05:38:17 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:45 2004
Subject: New antlr-interest member
Message-ID: <1083155897.100.98702.w23@yahoogroups.com>


Hello,

This is an automated email message to let you know that
steve_taplin <steve_taplin@yahoo.co.uk> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From anakreonmejdi at yahoo.gr  Wed Apr 28 05:49:40 2004
From: anakreonmejdi at yahoo.gr (Anakreon)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] VB If elseif end if?
In-Reply-To: <OFB262E156.0728989D-ON86256E83.0060F44F-86256E83.0061C9B1@milliman.com>
References: <OFB262E156.0728989D-ON86256E83.0060F44F-86256E83.0061C9B1@milliman.com>
Message-ID: <408FA864.5050908@yahoo.gr>

ronald.petty@milliman.com wrote:
> 
> I have in my Parser the rule
> 
> //don't forget s1:s2:s3 etc for "If x Then s1:s2..." and for general use
> statement
>         :       {System.out.println("Entered Statement:Declaration");}
>                 (declaration)=>declaration
>                 {System.out.println("Leaving Statement:Declaration");}
>         |       {System.out.println("Entered Statement:Expr");}
>                 expr
>                 {System.out.println("Leaving Statement:Expr");}
>         |       {System.out.println("Entered Statement:IF");}
>                 IF expr THEN (statement)* (ELSEIF expr THEN 
> (statement)*)* (ELSE (statement)*)? (END IF)?
>                 {System.out.println("Leaving Statement:IF");}
>         ;
> 
> And for newlines in the lexer
> 
> NL
>         :
>         (       ("\r\n") => "\r\n"
>         |       '\r'
>         |       '\n'
>         )+
>         { newline(); _ttype = Token.SKIP; }
>         ;
> 
> If I have the input
> 
> if x then y
> if x then y
> 
> The result is valid according to my grammar.  However instead of two "if 
> then" statements I have one "if" with another shoved in the tail end of 
> the statement.
> 
> (hope this is good syntax)
> 
> statement
> if (start of statement input)
> x = expr (for now just an identifier)
> then (next part of the expression
> y = statement (which is an expr, just an identifier)
> now sense we are looping in the statement (statement)*
> the next if x then y is starting there instead of a top level statement.
> 
> This is because in VB the newline after y means your done.  However I 
> eat all newlines in the lexer.  What are the possible ways around this?
> 
> Thanks for the pointers.
> Ron
New lines are significant in VB.
For this reason the lexer I implemented eats new lines if the last token given 
was '_' or a new line.The last token which the lexer served to the parser is 
stored in a variable.




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From ronald.petty at milliman.com  Wed Apr 28 06:39:24 2004
From: ronald.petty at milliman.com (ronald.petty@milliman.com)
Date: Mon Dec 20 16:16:45 2004
Subject: [antlr-interest] visual basic 6 grammar
In-Reply-To: <406E94FE.3010704@rainbow.cs.unipi.gr>
Message-ID: <OF107D3B49.D5D17AFF-ON86256E84.004AB70D-86256E84.004B49ED@milliman.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: vb.tgz
Type: application/octet-stream
Size: 20812 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20040428/5d811e92/vb.obj
From anakreonmejdi at yahoo.gr  Wed Apr 28 06:55:42 2004
From: anakreonmejdi at yahoo.gr (Anakreon)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] visual basic 6 grammar
In-Reply-To: <OF107D3B49.D5D17AFF-ON86256E84.004AB70D-86256E84.004B49ED@milliman.com>
References: <OF107D3B49.D5D17AFF-ON86256E84.004AB70D-86256E84.004B49ED@milliman.com>
Message-ID: <408FB7DE.1010803@yahoo.gr>

ronald.petty@milliman.com wrote:
> 
> Anakreon (or anyone else),
> Good Morning,
> I was wondering could you explain in the Visual Basic Script grammar 
> what the constructs of the form
> 
> <lexer_init>
> <lexer_typedot>
> <lexer_lasttoken>
> ..
> 
> are for?
> 
> I don't see them defined in the grammar or in the documentation of antlr 
> (that I can find).
> 
> Thanks
> Ron
> 
> 
I use annotation tool which separates the grammar definition from actions code.
The idea is simple. Place <some_name> in the grammar where action code would be
and in an other file write: @some_name : {/*action code*/}.
The tool will insert the action code where <some_name> exists and generate a new 
grammar file with actions included.
That file processed by antlr.

The annotation tool can be found at antlr.org.
I send you a sample build file for ant, and the VbConstants class which I 
omitted sending last time.

Anakreon.




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: build.xml
Type: text/xml
Size: 6982 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20040428/7e8b8870/build.xml
-------------- next part --------------
/*
    This file is part of Aspa.

    Aspa is free software; you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation; either version 2 of the License, or
    (at your option) any later version.

    Aspa is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Aspa; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
*/
package gr.omadak.leviathan.asp;
import java.util.Map;
import java.util.TreeMap;


public final class VbsConstants {
    public static Map KEYWORDS;

    static {
        KEYWORDS = new TreeMap();
    //----- ENTER KEYWORDS -----//
         KEYWORDS.put("AND", new Integer(VbsTokenTypes.AND));
         KEYWORDS.put("CALL", new Integer(VbsTokenTypes.CALL));
         KEYWORDS.put("CASE", new Integer(VbsTokenTypes.CASE));
         KEYWORDS.put("CONST", new Integer(VbsTokenTypes.CONST));
         KEYWORDS.put("CLASS", new Integer(VbsTokenTypes.CLASS));
         KEYWORDS.put("DIM", new Integer(VbsTokenTypes.DIM));
         KEYWORDS.put("DO", new Integer(VbsTokenTypes.DO));
         KEYWORDS.put("EACH", new Integer(VbsTokenTypes.EACH));
         KEYWORDS.put("ELSE", new Integer(VbsTokenTypes.ELSE));
         KEYWORDS.put("ELSEIF", new Integer(VbsTokenTypes.ELSEIF));
         KEYWORDS.put("EMPTY", new Integer(VbsTokenTypes.EMPTY));
         KEYWORDS.put("END", new Integer(VbsTokenTypes.END));
         KEYWORDS.put("EQV", new Integer(VbsTokenTypes.EQV));
         KEYWORDS.put("ERASE", new Integer(VbsTokenTypes.ERASE));
         KEYWORDS.put("ERROR", new Integer(VbsTokenTypes.ERROR));
         KEYWORDS.put("EXIT", new Integer(VbsTokenTypes.EXIT));
         KEYWORDS.put("EXPLICIT", new Integer(VbsTokenTypes.EXPLICIT));
         KEYWORDS.put("FALSE", new Integer(VbsTokenTypes.FALSE));
         KEYWORDS.put("FOR", new Integer(VbsTokenTypes.FOR));
         KEYWORDS.put("FUNCTION", new Integer(VbsTokenTypes.FUNCTION));
         KEYWORDS.put("IF", new Integer(VbsTokenTypes.IF));
         KEYWORDS.put("IS", new Integer(VbsTokenTypes.IS));
         KEYWORDS.put("IMP", new Integer(VbsTokenTypes.IMP));
         KEYWORDS.put("IN", new Integer(VbsTokenTypes.IN));
         KEYWORDS.put("LOOP", new Integer(VbsTokenTypes.LOOP));
         KEYWORDS.put("MOD", new Integer(VbsTokenTypes.MOD));
         KEYWORDS.put("NEXT", new Integer(VbsTokenTypes.NEXT));
         KEYWORDS.put("NEW", new Integer(VbsTokenTypes.NEW));
         KEYWORDS.put("NOT", new Integer(VbsTokenTypes.NOT));
         KEYWORDS.put("NOTHING", new Integer(VbsTokenTypes.NOTHING));
         KEYWORDS.put("NULL", new Integer(VbsTokenTypes.NULL));
         KEYWORDS.put("ON", new Integer(VbsTokenTypes.ON));
         KEYWORDS.put("OPTION", new Integer(VbsTokenTypes.OPTION));
         KEYWORDS.put("OR", new Integer(VbsTokenTypes.OR));
         KEYWORDS.put("REDIM", new Integer(VbsTokenTypes.REDIM));
         KEYWORDS.put("REM", new Integer(VbsTokenTypes.REM));
         KEYWORDS.put("RESUME", new Integer(VbsTokenTypes.RESUME));
         KEYWORDS.put("SELECT", new Integer(VbsTokenTypes.SELECT));
         KEYWORDS.put("SET", new Integer(VbsTokenTypes.SET));
         KEYWORDS.put("STEP", new Integer(VbsTokenTypes.STEP));
         KEYWORDS.put("SUB", new Integer(VbsTokenTypes.SUB));
         KEYWORDS.put("THEN", new Integer(VbsTokenTypes.THEN));
         KEYWORDS.put("TO", new Integer(VbsTokenTypes.TO));
         KEYWORDS.put("TRUE", new Integer(VbsTokenTypes.TRUE));
         KEYWORDS.put("WEND", new Integer(VbsTokenTypes.WEND));
         KEYWORDS.put("WHILE", new Integer(VbsTokenTypes.WHILE));
         KEYWORDS.put("WITH", new Integer(VbsTokenTypes.WITH));
         KEYWORDS.put("XOR", new Integer(VbsTokenTypes.XOR));
         KEYWORDS.put("UNTIL", new Integer(VbsTokenTypes.UNTIL));
         KEYWORDS.put("PUBLIC", new Integer(VbsTokenTypes.PUBLIC));
         KEYWORDS.put("PRIVATE", new Integer(VbsTokenTypes.PRIVATE));
         KEYWORDS.put("DEFAULT", new Integer(VbsTokenTypes.DEFAULT));
         KEYWORDS.put("PROPERTY", new Integer(VbsTokenTypes.PROPERTY));
         KEYWORDS.put("GET", new Integer(VbsTokenTypes.GET));
         KEYWORDS.put("LET", new Integer(VbsTokenTypes.LET));
         KEYWORDS.put("BYREF", new Integer(VbsTokenTypes.BYREF));
         KEYWORDS.put("BYVAL", new Integer(VbsTokenTypes.BYVAL));
         KEYWORDS.put("RANDOMIZE", new Integer(VbsTokenTypes.RANDOMIZE));
     //----- FINISHED KEYWORDS -----//
   }

    private VbsConstants() {}

}
From Jim.OConnor at microfocus.com  Wed Apr 28 07:13:04 2004
From: Jim.OConnor at microfocus.com (Jim O'Connor)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] Shell Scripting Grammar
Message-ID: <3AC103F1B7EEEC48A855ACB1D2819E910294E8AC@rock-corpmail.microfocus.com>

Hi all,
  I'm looking for an antlr grammar for shell scripting languages such as
BASH, SH, BASH2, Kourne, etc.  I did a ten minute check on antlr.org and
some googling, with minimal results.  Thanks, in advance.

Jim


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From steve_taplin at yahoo.co.uk  Wed Apr 28 07:22:52 2004
From: steve_taplin at yahoo.co.uk (steve_taplin)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] Overloaded Lexemes!
Message-ID: <c6oens+fbqo@eGroups.com>

All,

I am new to the newsgroup and so apologise for any early 
transgressions...

I am attempting to parse a computer language that contains comments 
(that may contain any characters). They are of the form:

COMMENT TEXT(jasdfjalk;fjkl;%$?$%lldf'slf)
COMMENT TEXT(jas...dfjalk;fjkl;%$?$%lldf'slfsd][}{}*&fdsadsvdf#'''""")
...

I am having trouble.  The following strategy works fine except for 
when I have characters such as '.', '&', ':', etc. where the 
prediction fails.

COMMENT	: TEXT! LPAREN! (~('\r'|'\n'))* RPAREN! '\r''\n'
	{newline();};

I've tried non-greedy options for the subrule (as discussed in the 
LEXER section of the ANTLR documentation) without success.

John Mitchell in posting 11899, refers to overloaded lexemes 
(namely '.' or DOT as in the java.g grammar).  There seems to be a 
special treatment for such characters (although my attempts to mimic 
it have failed thus far - the DOT type is not 'found').

Can anyone explain how to handle such characters/this situation or 
point me to any relevant text.

Best Regards,

Steve Taplin






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Wed Apr 28 08:07:41 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:46 2004
Subject: New antlr-interest member
Message-ID: <1083164861.78.41036.w54@yahoogroups.com>


Hello,

This is an automated email message to let you know that
yumzedd <akhvee@yahoo.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From markl at glyphic.com  Wed Apr 28 08:59:38 2004
From: markl at glyphic.com (Mark Lentczner)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] Overloaded Lexemes!
In-Reply-To: <c6oens+fbqo@eGroups.com>
References: <c6oens+fbqo@eGroups.com>
Message-ID: <0D505E3A-992D-11D8-88E7-000393A56BB6@glyphic.com>

Your examples and grammar are unclear - is this a legal comment?
     COMMENT(xxx)yyy)\r\n
     COMMENT(compute x*(y+z) and return)\r\n
     COMMENT(now set x) x = 2*(y+z)\r\n
     COMMENT(there are spaces at the end)    \r\n
     COMMENT(on line one\r\none line two)\r\n

Specifically, does a comment end with:
     1) any close parenthesis?
     2) a matching close parenthesis?
     3) only a close parenthesis at the end of the line
     4) only a close parenthesis followed by white space followed by end 
of line.
And:
     ?) Can a comment contain embedded newlines?

I'm not trying to be pedantic - it is just that when one writes 
grammars, you are forced to really answer these sorts of questions.

If you are defining the language (not just implementing someone else's 
spec), then do you user's a favor and choose option 2 or perhaps option 
1.  However, given your grammar, I'm going to assume you are attempting 
option 3.

> COMMENT	: TEXT! LPAREN! (~('\r'|'\n'))* RPAREN! '\r''\n'
> 	{newline();};
> I've tried non-greedy options for the subrule (as discussed in the
> LEXER section of the ANTLR documentation) without success.
The problem comes from the fact that "~('\r'|'\n'))* will match any 
closing RPAREN.

Try either:

COMMENT: TEXT! LPAREN! ( options{greedy=false;}: .)* RPAREN! '\r' '\n'
     {newline();};

-or-

COMMENT: TEXT! LPAREN! ~('\r'|'\n'|')'))* RPAREN! '\r' '\n'
     {newline();};

Though be ware, these parse different grammars for comments (both are 
option 3 above, but answer the embedded newline question differently)



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From a_urazov at mail.ru  Wed Apr 28 09:02:58 2004
From: a_urazov at mail.ru (Andrey R. Urazov)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] TokenStreamRewriteEngine and C++ and RefCounters
In-Reply-To: <20040428105056.GB8682@cs.utwente.nl>
References: <B39B7054-9306-11D8-9E9F-000393A56BB6@glyphic.com> <20040421112429.GI5811@cs.utwente.nl> <1114A39C-93CC-11D8-9E9F-000393A56BB6@glyphic.com> <20040419164301.GA1831@ktulu> <20040420090432.GD657@cs.utwente.nl> <20040420141318.GA2895@ktulu> <20040427155222.GE4398@cs.utwente.nl> <20040427194309.GB4703@ktulu> <20040428105056.GB8682@cs.utwente.nl>
Message-ID: <20040428160258.GB1791@ktulu>

On Wed, Apr 28, 2004 at 12:50:56PM +0200, Ric Klaren wrote:
> > (in Boost, for example, these aren't defined at all). When
> > implemented together, not only they are unsafe, they are rather
> > dangerous since they can lead to nonshared ownership of a single
> > object and therefore to its premature deletion.
> 
> I personally did not run into premature deletion problems (using a malloc
> debugger very regularly to verify my project) There might be a resource
> leak though but I'm not sure wether that's due to antlr or my own code.
> 
I was wrong. Sorry. I've just written a small program to test the
problem I thought took place and what I've found is that addChild() is
absolutely clean in conjuction with current implementation of smart
pointers in the sense I erroneously blamed it.

> > Consider the code from BaseAST.cpp (the problems I experience now are
> > caused by the implicit misuse of smart pointers in this function):
> 
> I'll have a look at this when I'm not two days behind on sleep... (probably
> a lot safer ;) )
It seems to be clean and therefore should not prevent you from sleeping.
;) There was no bug in the ANTLR code, just a small bug in my head :)
probably because of lack of sleep and most certainly because of
a strange tendency to find errors in others' code rather than in my own
;)

> Shouldn't there be a '!' on this rule to turn of automatic
> treeconstruction? (unless you have it turned off on grammar level)
> This might create a loop in the tree which might hang up
> getNumberOfChildren if I'm not mistaken.
You are a clairvoyant! Exactly! This is what actually happened. Thanks
a lot for helping me out.


Best regards,
  Andrey Urazov



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From johnm-antlr at non.net  Wed Apr 28 09:12:30 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] Overloaded Lexemes!
In-Reply-To: <c6oens+fbqo@eGroups.com>
References: <c6oens+fbqo@eGroups.com>
Message-ID: <16527.55278.508035.902825@despot.non.net>

>>>>> "steve" == steve taplin <steve_taplin@yahoo.co.uk> writes:
[...]

> I am attempting to parse a computer language that contains comments (that
> may contain any characters). They are of the form:

> COMMENT TEXT(jasdfjalk;fjkl;%$?$%lldf'slf)

> COMMENT TEXT(jas...dfjalk;fjkl;%$?$%lldf'slfsd][}{}*&fdsadsvdf#'''""")
> ...

Is the comment start delimiter literally the characters "COMMENT TEXT"
followed by a left-parenthesis or is it the characters "COMMENT" followed
by another set of chacters (that your are refering to as TEXT) followed by
a left-parenthesis or something else?

Is whitespace allowed inside the comment?  Anywhere, nowhere, or just
inside the parentheses?

Is the end delimiter exactly a right-parenthesis immediately followed by a
newline sequence or can there be other whitespace in-between?

In addition, must comments be contained completely on a single line or can
they span multiple lines?  If there must be on a single line, is there some
reason that you need to care about the internal structure of the comment?

Did you make sure that you set a proper charVocab range?

Take care,
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Wed Apr 28 09:26:46 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] TokenStreamRewriteEngine and C++ and RefCounters
In-Reply-To: <20040428160258.GB1791@ktulu>
References: <B39B7054-9306-11D8-9E9F-000393A56BB6@glyphic.com> <20040421112429.GI5811@cs.utwente.nl> <1114A39C-93CC-11D8-9E9F-000393A56BB6@glyphic.com> <20040419164301.GA1831@ktulu> <20040420090432.GD657@cs.utwente.nl> <20040420141318.GA2895@ktulu> <20040427155222.GE4398@cs.utwente.nl> <20040427194309.GB4703@ktulu> <20040428105056.GB8682@cs.utwente.nl> <20040428160258.GB1791@ktulu>
Message-ID: <20040428162646.GC8682@cs.utwente.nl>

On Wed, Apr 28, 2004 at 11:02:58PM +0700, Andrey R. Urazov wrote:
> > > Consider the code from BaseAST.cpp (the problems I experience now are
> > > caused by the implicit misuse of smart pointers in this function):
> > 
> > I'll have a look at this when I'm not two days behind on sleep... (probably
> > a lot safer ;) )
> It seems to be clean and therefore should not prevent you from sleeping.
> ;) There was no bug in the ANTLR code, just a small bug in my head :)
> probably because of lack of sleep and most certainly because of
> a strange tendency to find errors in others' code rather than in my own
> ;)

The last is always a safe presumption: in case of doubt blame others ;) But
good to hear that I can sleep safely =D

> > Shouldn't there be a '!' on this rule to turn of automatic
> > treeconstruction? (unless you have it turned off on grammar level)
> > This might create a loop in the tree which might hang up
> > getNumberOfChildren if I'm not mistaken.
> You are a clairvoyant! Exactly! This is what actually happened. Thanks
> a lot for helping me out.

No worries!

ZZZZzzZZzzz,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  Chaos is found in greatest abundance wherever order is being sought.
  --- Terry Pratchet



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Wed Apr 28 10:06:08 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] VB If elseif end if?
In-Reply-To: <16526.41315.175397.123956@despot.non.net>
References: <16526.37433.176799.188751@despot.non.net> <OFB262E156.0728989D-ON86256E83.0060F44F-86256E83.0061C9B1@milliman.com> <16526.41315.175397.123956@despot.non.net>
Message-ID: <57A4DCC2-9936-11D8-B790-000393B5606C@codetransform.com>


On Apr 27, 2004, at 11:07 AM, John D. Mitchell wrote:

>
>> This is because in VB the newline after y means your done.  However I 
>> eat
>> all newlines in the lexer.  What are the possible ways around this?
>
> ObDisclaimer. I haven't even looked at any version of Microsoft BASIC 
> in at
> least a decade.
>
> What's the actual rules for dealing with newlines in VB?  E.g., can you
> have individual expressions or "statements" which occur on multiple 
> lines
> or is the newline always a terminator (or a separator)?
>
> Basically, depending on that answer, you could inject a synthetic 
> separator
> or terminator when you see a newline.

Also you could write a parser filter that handles that.  There are 
similar issues in AREV basic.  See "Using a Parser as a TokenFilter": 
http://www.codetransform.com/filterexample.html

Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Wed Apr 28 10:08:23 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:46 2004
Subject: [POTENTIAL SPAM - OPEN AT USER DISCRETION] Re: [antlr-interest] java example grammar
In-Reply-To: <OF80C44FFF.4A5510D0-ON86256E83.004CE3C8-86256E83.004D47C0@milliman.com>
References: <OF80C44FFF.4A5510D0-ON86256E83.004CE3C8-86256E83.004D47C0@milliman.com>
Message-ID: <A7FD8BDC-9936-11D8-B790-000393B5606C@codetransform.com>

By the way indenting the trace output makes it more readable.  I think 
the antlr distribution does that now by default.  If you're using an 
older one you could lift the trace* methods out of the GCC grammar.

Monty

On Apr 27, 2004, at 7:01 AM, ronald.petty@milliman.com wrote:

> Monty,
> I was just making sure I understood a more complicated (at least for 
> myselft) example. ?I finally figured out how to read the Trace output 
> and that helps out a TON.
>
>
Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Wed Apr 28 10:20:37 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] "everything else" clause
In-Reply-To: <20040427075745.GA4398@cs.utwente.nl>
References: <20040426122302.GF342@cs.utwente.nl> <20040426171737.AC2E557C001@h4866.serverkompetenz.net> <20040427075745.GA4398@cs.utwente.nl>
Message-ID: <5DA9B578-9938-11D8-B790-000393B5606C@codetransform.com>

On Apr 27, 2004, at 12:57 AM, Ric Klaren wrote:

> On Mon, Apr 26, 2004 at 07:24:02PM +0200, Mike Lischke wrote:
>> Since the "everything else" part in the parser consists of all tokens 
>> not
>> mentioned I had to import the lexer vocabulary. This is no big deal 
>> as I
>> need it anyway for my main parser and now the files are parsed 
>> correctly so
>> far. The next thing to todo is to make the TokenRewriteEngine work. It
>> looks like I have to rewrite the grammar a bit because I cannot 
>> address a
>> single token in the else_part from, say, the ifdef rule, hence I 
>> cannot
>> strip out the proper part.
>
> I recall Monty mentioning a little while ago that he did some nifty
> overriding on a few parser methods (probably some tricks around 
> match(..)
> is my guess) and got it to behave like a tokenfilter/stream. If you go 
> that
> way you can just chain the parsers and you won't have to use the
> TokenRewriteEngine which is not the most efficient for large input 
> files
> (whole file gets stored in memory) I'm not sure if he posted specifics
> though.

That would be my parser filter article 
http://www.codetransform.com/filterexample.html.  There seems to be a 
need for this all of a sudden.  Please let me know if you can use my 
approach and help me refine it.  Please cc me directly with 
questions/nags/refinements; since I no longer have the "day job" I'm 
not monitoring antlr-interest so thoroughly any more.  Now I get to 
work on grammars all day--woohoo!

Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Wed Apr 28 10:15:48 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] Annotation tool best practices
In-Reply-To: <c6lmb6+oqtq@eGroups.com>
References: <c6lmb6+oqtq@eGroups.com>
Message-ID: <B112FEA8-9937-11D8-B790-000393B5606C@codetransform.com>

On Apr 27, 2004, at 6:14 AM, micheal_jor wrote:

> PS	[I would be grateful for any references to design discussion or
> implementations of editors that can handle virtual documents composed
> from a number of other documents like the template and insert files
> above. Looking at my solution for (b) above, I would like to be able
> to view and edit directly the walker1.g and walker2.g grammars. The
> editor should hide the fact that they are composites of grammar.tg and
> walker1.ins and walker2.ins respectively. Perhaps multiple *.tg and
> *.ins files can be involved in a single grammar...]

If you find anything let me know!  I once considered using the Python 
NFS server code to serve up files, detect changes and map them back to 
the original templates.  Doing this in an editor would be nicer.  The 
LAPIS editor has a notion of simultaneously editing multiple targets 
from one source.  http://graphics.csail.mit.edu/lapis/  Ideas there, 
it's mainly for HTML and won't do what you want out of the box.

Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Wed Apr 28 10:06:08 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] VB If elseif end if?
In-Reply-To: <16526.41315.175397.123956@despot.non.net>
References: <16526.37433.176799.188751@despot.non.net> <OFB262E156.0728989D-ON86256E83.0060F44F-86256E83.0061C9B1@milliman.com> <16526.41315.175397.123956@despot.non.net>
Message-ID: <57A4DCC2-9936-11D8-B790-000393B5606C@codetransform.com>


On Apr 27, 2004, at 11:07 AM, John D. Mitchell wrote:

>
>> This is because in VB the newline after y means your done.  However I 
>> eat
>> all newlines in the lexer.  What are the possible ways around this?
>
> ObDisclaimer. I haven't even looked at any version of Microsoft BASIC 
> in at
> least a decade.
>
> What's the actual rules for dealing with newlines in VB?  E.g., can you
> have individual expressions or "statements" which occur on multiple 
> lines
> or is the newline always a terminator (or a separator)?
>
> Basically, depending on that answer, you could inject a synthetic 
> separator
> or terminator when you see a newline.

Also you could write a parser filter that handles that.  There are 
similar issues in AREV basic.  See "Using a Parser as a TokenFilter": 
http://www.codetransform.com/filterexample.html

Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Wed Apr 28 12:07:02 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:46 2004
Subject: New antlr-interest member
Message-ID: <1083179222.86.54310.w62@yahoogroups.com>


Hello,

This is an automated email message to let you know that
birmanstefan <birmanstefan@yahoo.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From birmanstefan at yahoo.com  Wed Apr 28 12:18:51 2004
From: birmanstefan at yahoo.com (birmanstefan)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] missing class in 2.7.3 - ASTFrame$MyTreeSelectionListener
Message-ID: <c6p02r+ej4s@eGroups.com>

Hi! While trying to run example antlr-2.7.3/examples/java/java I got 
this message :
[andrei@stefan java]$ java -classpath $CLASSPATH:. Main -showtree 
tests/E.java

Parsing...
   /home/andrei/antlr-2.7.3/examples/java/java/tests/E.java
Exception in thread "main" java.lang.NoClassDefFoundError: 
antlr/debug/misc/ASTFrame$MyTreeSelectionListener
        at antlr.debug.misc.ASTFrame.<init>(ASTFrame.java:42)
        at Main.doTreeAction(Main.java:89)
        at Main.parseFile(Main.java:74)
        at Main.doFile(Main.java:54)
        at Main.main(Main.java:24)
[andrei@stefan java]$
In 2.7.2 this issue doesn't appear. Is there a fix for this issue or 
am I doing smthg wrong?

PS: my aplication which used to work on 2.7.2 doesn't work anymore




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Wed Apr 28 13:09:23 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:46 2004
Subject: New antlr-interest member
Message-ID: <1083182963.82.14698.w40@yahoogroups.com>


Hello,

This is an automated email message to let you know that
mduafala <mat_d69@hotmail.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From open.zone at virgin.net  Wed Apr 28 13:15:47 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] Re: Annotation tool best practices
In-Reply-To: <16526.36787.82013.172686@despot.non.net>
Message-ID: <c6p3dj+i98p@eGroups.com>

--- In antlr-interest@yahoogroups.com, "John D. Mitchell"
<johnm-antlr@n...> wrote:
 
> For a concrete and available example, check out what Monty did with the
> GnuC project with "literate programming" (ala Knuth via noweb).  That
> allows for nice, cross-phase locality (i.e., all of those versions of
> expression right next to each other).  One of my dislikes for that
approach
> is that the intermingling makes in more difficult to just look at all of
> the rules for a single phase (in the editor).  On my play-with to-do
list
> is to investigate using a "literate" approach with a good outline
editor so
> that I could fold out all of the stuff that I didn't want to deal
with at
> any given point in time (think: different, editable views of a single
> master source file).

I looked into that and the inability to "extract" the view of a single
pass forced me to move on.

> Another "trick" you can do with the tree phases is to create a single,
> super-set tree definition that encompasess all of the needs of all
of the
> different phases.

Thought about that but the performance implications of all those
unneccessary activation record operations keeps me looking for another
option. Still, it remains the 2nd choice after the default of
maintaining each grammar separately.

> In the majority of my experience, I keep it simple (if not
simplistic :-)

Same here. Unless multiple output langauges are involved. In that case
each phase gets the annotation tool treatment.

> IME, the issue for me is much less dealing
> consciously with the isolated, individual (sets of) rules across
multiple
> files but rather needing a true grammar level "diff" tool to catch those
> cases where I wasn't conscious (or smart) enough to realize that a
> particular change in one spot needed to be account for in other spots.

If there was a tool that separates the grammar (and it's editing) from
the noise (i.e. action code, method signatures, etc) that real
lifework adds to it, then the diff tool won't be needed ;-)

> Finally, on a related subject, there seems to be two schools of thought
> on how to use grammar based approaches.  One is the "pure" school which
> says that the grammar drives the system.  The other is that the
grammar is
> a slave to the rest of the system.  The argument, IMHO, isn't one versus
> the other but rather (a) which one to use for which needs and (b)
whether
> or not it's acceptable to mix the approaches.
> 
> In terms of (b), I'm unsure of but am concerned about your dottedNameXYZ
> example as it's unclear to me why you (feel that you) need to take that
> variation approach.  I.e., why isn't there only a single rule in the
> grammar that provides the underlying information such that whatever is
> consuming that information can extract it as appropriate?

I guess I could write auxiliary routines to walk the sub-tree as
needed and extract the information. Or I could write a generic rule
that extracts all info from the tree pass it to other routines to work
on it. It just felt more natural to define alternative walks of the
same subtree as alternative rules. Helps my understanding loads and,
since results are often written back as attributes, I am in the
"right" place to do everything if I use the rule's srructure.

Micheal




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From bharath at starthis.com  Wed Apr 28 13:16:44 2004
From: bharath at starthis.com (Bharath S)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] ANTLR grammar: Clarifications needed
In-Reply-To: <c6p02r+ej4s@eGroups.com>
Message-ID: <000001c42d5d$ba084890$03020a0a@devel.starthis.com>


Hi Antlers,

I have a rule of the form: 
**
Statements: (statement)* ;
**
and I get a warning "Non-determinism between Alt 1 and exit branch of
block". If I use the "warnWhenFollowAmbig = false" command, I still get the
error. Any ideas?

Also, I am wondering how to differenciate between two rules, BOOLEAN and
INTEGER in the lexer. They are of the form:

BOOLEAN: '1'|'0';
INTEGER: ('0'..'9')+(UNDERSCORE ('0'..'9')+ )?;

Can I differenciate these rules without making them "protected"?

Thanks!!

Bharath.

-----Original Message-----
From: birmanstefan [mailto:birmanstefan@yahoo.com] 
Sent: Wednesday, April 28, 2004 2:19 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] missing class in 2.7.3 -
ASTFrame$MyTreeSelectionListener

Hi! While trying to run example antlr-2.7.3/examples/java/java I got 
this message :
[andrei@stefan java]$ java -classpath $CLASSPATH:. Main -showtree 
tests/E.java

Parsing...
   /home/andrei/antlr-2.7.3/examples/java/java/tests/E.java
Exception in thread "main" java.lang.NoClassDefFoundError: 
antlr/debug/misc/ASTFrame$MyTreeSelectionListener
        at antlr.debug.misc.ASTFrame.<init>(ASTFrame.java:42)
        at Main.doTreeAction(Main.java:89)
        at Main.parseFile(Main.java:74)
        at Main.doFile(Main.java:54)
        at Main.main(Main.java:24)
[andrei@stefan java]$
In 2.7.2 this issue doesn't appear. Is there a fix for this issue or 
am I doing smthg wrong?

PS: my aplication which used to work on 2.7.2 doesn't work anymore




 
Yahoo! Groups Links



 






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Wed Apr 28 14:13:17 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] missing class in 2.7.3 - ASTFrame$MyTreeSelectionListener
In-Reply-To: <c6p02r+ej4s@eGroups.com>
References: <c6p02r+ej4s@eGroups.com>
Message-ID: <DE46396F-9958-11D8-9A7D-000A95891192@cs.usfca.edu>


On Apr 28, 2004, at 12:18 PM, birmanstefan wrote:

> Hi! While trying to run example antlr-2.7.3/examples/java/java I got
> this message :
> [andrei@stefan java]$ java -classpath $CLASSPATH:. Main -showtree
> tests/E.java
>
> Parsing...
>    /home/andrei/antlr-2.7.3/examples/java/java/tests/E.java
> Exception in thread "main" java.lang.NoClassDefFoundError:
> antlr/debug/misc/ASTFrame$MyTreeSelectionListener
>         at antlr.debug.misc.ASTFrame.<init>(ASTFrame.java:42)
>         at Main.doTreeAction(Main.java:89)
>         at Main.parseFile(Main.java:74)
>         at Main.doFile(Main.java:54)
>         at Main.main(Main.java:24)
> [andrei@stefan java]$
> In 2.7.2 this issue doesn't appear. Is there a fix for this issue or
> am I doing smthg wrong?
>
> PS: my aplication which used to work on 2.7.2 doesn't work anymore

Hmm..perhaps I didn't build the jar right or perhaps I didn't build the 
project right and then jar'd.  Can you try to rebuild all the java 
files and then point at the dir instead of the jar to see what happens?

THanks,
Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From markl at glyphic.com  Wed Apr 28 14:24:33 2004
From: markl at glyphic.com (Mark Lentczner)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] ANTLR grammar: Clarifications needed
In-Reply-To: <000001c42d5d$ba084890$03020a0a@devel.starthis.com>
References: <000001c42d5d$ba084890$03020a0a@devel.starthis.com>
Message-ID: <7191B538-995A-11D8-88E7-000393A56BB6@glyphic.com>


> Also, I am wondering how to differenciate between two rules, BOOLEAN 
> and
> INTEGER in the lexer. They are of the form:
>
> BOOLEAN: '1'|'0';
> INTEGER: ('0'..'9')+(UNDERSCORE ('0'..'9')+ )?;
>
> Can I differenciate these rules without making them "protected"?

Well, that depends on what you mean by these rules.  How should these 
parse? :
	" 1 " ==> BOOLEAN<1> or NUMBER<1> ?
	" 10 " ==> NUMBER<10> or BOOLEAN<1>, BOOLEAN<0> ?
If the answer depends on the parsing context, then no, you generally 
cannot differentiate these rules in the lexer.  (Actually you can, by 
having the parser set state back in the lexer, but that should be 
considered a last-resort sort of solution.)

Typically, the lexer would simply tokenize these as all NUMBER, and 
then it the parser, which knows when it is in a boolean context, can 
place a constraint on the values of NUMBER that it accepts.

	- Mark



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From bharath at starthis.com  Wed Apr 28 14:34:53 2004
From: bharath at starthis.com (Bharath S)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] ANTLR grammar: Clarifications needed
In-Reply-To: <7191B538-995A-11D8-88E7-000393A56BB6@glyphic.com>
Message-ID: <000001c42d68$a4ec1300$03020a0a@devel.starthis.com>

Hi Mark,

If I have rules in the lexer which go:

BOOLEAN: '1'|'0';
NUMBER: ('0'..'9')+;

I get non-determinisms, as expected, due to '1' and '0'. 

1) If I make BOOLEAN "protected", I am unable to refer it in the PARSER. 

2) If I make BOOLEAN "protected" and use $setType command in another rule, 
----------------
Number_or_bit: ('0'|'1') {$setType(BOOLEAN); $setType(NUMBER);} | ('2'..'9')
{$setType(NUMBER);}
----------------
It doesn't work.

3) If I say "boolean: "1"|"0";" in the parser, it doesn't work as I thought.

How can I use BOOLEAN and NUMBER based on the context in which they appear
without having non-determinisms?

Thanks a mil for your comments!

Bharath

-----Original Message-----
From: Mark Lentczner [mailto:markl@glyphic.com] 
Sent: Wednesday, April 28, 2004 4:25 PM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] ANTLR grammar: Clarifications needed


> Also, I am wondering how to differenciate between two rules, BOOLEAN 
> and
> INTEGER in the lexer. They are of the form:
>
> BOOLEAN: '1'|'0';
> INTEGER: ('0'..'9')+(UNDERSCORE ('0'..'9')+ )?;
>
> Can I differenciate these rules without making them "protected"?

Well, that depends on what you mean by these rules.  How should these 
parse? :
	" 1 " ==> BOOLEAN<1> or NUMBER<1> ?
	" 10 " ==> NUMBER<10> or BOOLEAN<1>, BOOLEAN<0> ?
If the answer depends on the parsing context, then no, you generally 
cannot differentiate these rules in the lexer.  (Actually you can, by 
having the parser set state back in the lexer, but that should be 
considered a last-resort sort of solution.)

Typically, the lexer would simply tokenize these as all NUMBER, and 
then it the parser, which knows when it is in a boolean context, can 
place a constraint on the values of NUMBER that it accepts.

	- Mark



 
Yahoo! Groups Links



 






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From anakreonmejdi at yahoo.gr  Wed Apr 28 14:48:18 2004
From: anakreonmejdi at yahoo.gr (Anakreon)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] ANTLR grammar: Clarifications needed
In-Reply-To: <000001c42d5d$ba084890$03020a0a@devel.starthis.com>
References: <000001c42d5d$ba084890$03020a0a@devel.starthis.com>
Message-ID: <409026A2.4010408@yahoo.gr>

Bharath S wrote:
> Hi Antlers,
> 
> I have a rule of the form: 
> **
> Statements: (statement)* ;
> **
> and I get a warning "Non-determinism between Alt 1 and exit branch of
> block". If I use the "warnWhenFollowAmbig = false" command, I still get the
> error. Any ideas?
> 
> Also, I am wondering how to differenciate between two rules, BOOLEAN and
> INTEGER in the lexer. They are of the form:
> 
> BOOLEAN: '1'|'0';
> INTEGER: ('0'..'9')+(UNDERSCORE ('0'..'9')+ )?;
> 
> Can I differenciate these rules without making them "protected"?
> 
> Thanks!!
> 
> Bharath.

I would declare only rule NUMBER in the lexer.
Then I would have a rule lat's call it bool_rule
bool_rule
   :
   n:NUMBER {
    int val = Integer.parseInt(#n.getText());
    if (val < 0 || val > 1) {
       throw new ANTLRException(...);
    }
    #n.setType(BOOLEAN);
   }
   ;
Then whenever a boolean is expected I'd call the bool_rule.
Perhaps a decendant of ANTLRException should be thrown.


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From markl at glyphic.com  Wed Apr 28 15:30:36 2004
From: markl at glyphic.com (Mark Lentczner)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] ANTLR grammar: Clarifications needed
In-Reply-To: <000001c42d68$a4ec1300$03020a0a@devel.starthis.com>
References: <000001c42d68$a4ec1300$03020a0a@devel.starthis.com>
Message-ID: <AB7BC370-9963-11D8-88E7-000393A56BB6@glyphic.com>


> 1) If I make BOOLEAN "protected", I am unable to refer it in the 
> PARSER.
Correct.  Protected lexer rules are for use only from some other lexer 
rule.  This often removes non-determinism because the calling lexer 
rule supplies the context.

> 2) If I make BOOLEAN "protected" and use $setType command in another 
> rule,
> ----------------
> Number_or_bit: ('0'|'1') {$setType(BOOLEAN); $setType(NUMBER);} | 
> ('2'..'9')
> {$setType(NUMBER);}
> ----------------
> It doesn't work.
Well, this was close to a reasonable approach: but "{$setType(BOOLEAN); 
$setType(NUMBER);}" was an error - you can't have two types attached to 
a token, and you can't do this in a parser rule.

> 3) If I say "boolean: "1"|"0";" in the parser, it doesn't work as I 
> thought.
No, this sets "1" and "0" to be literals added to the literal table.  
Probably not what you want.  If you have literal testing turned on in 
the lexer (it is by default), then these strings will never match any 
production in the lexer including NUMBER.

> How can I use BOOLEAN and NUMBER based on the context in which they 
> appear
> without having non-determinisms?
Short answer: you can't do this in the lexer.
Long answer:

You must take one of two approaches:

1) have two token types

NON_BOOLEAN_NUMBER: '2'..'9' ( '0'..'9' )* ;
BOOLEAN: ( '0' | '1' ) ( '0'..'9' { $setType(NON_BOOLEAN_NUMBER); } ( 
'0'..'9' )* )? ;

then in the parser you have to have rules like:

number: NON_BOOLEAN_NUMBER | BOOLEAN ;
boolean: BOOLEAN ;

2) have one token type

NUMBER: ('0'..'9')+ ;

then in the parser use rules like:

number: NUMBER ;
boolean: n:NUMBER { if (#n.getText() != "1") && (#n.getText() != "0") { 
new ANTLRException(...); } } ;


Exactly which form to use and which direction take depends quite a bit 
on the grammar of the language you're parsing.  How does that language 
deal with the confusing between BOOLEAN and NUMBER?  Does the parsing 
context always tell you which form you need?  For some constructs, does 
how to parse it depend on if the user wrote a boolean value or number 
greater than 1?  Is this true in all cases or only some?  Does the 
language consider "00" boolean as well?

Without knowing more, it is hard to say what to do: The problem isn't 
really with your lexer rules, it is with the grammar you are trying to 
parse: Sometimes it thinks "1" is a boolean, sometimes its a number.  
The question is how to resolve that.  Once you know how the parser 
rules should resolve the ambiguity, then you can design the lexer rules 
to support it.

In programming language design, things are always much more intertwined 
than one thinks...

   - Mark

Mark Lentczner
markl@wheatfarm.org
http://www.wheatfarm.org/



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Wed Apr 28 23:17:00 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:46 2004
Subject: Unsubscription by antlr-interest member
Message-ID: <1083219420.144.62523.w71@yahoogroups.com>


Hello,

This is an automated email message to let you know that
linjiang007 <linjiang007@yahoo.com.cn> unsubscribed from your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a member unsubscribes.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From birmanstefan at yahoo.com  Thu Apr 29 03:17:24 2004
From: birmanstefan at yahoo.com (birmanstefan)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] Re: missing class in 2.7.3 - ASTFrame$MyTreeSelectionListener
In-Reply-To: <DE46396F-9958-11D8-9A7D-000A95891192@cs.usfca.edu>
Message-ID: <c6qknk+3pjf@eGroups.com>

Hi!
It seems that you didn't build the project right. The "fix" was :

cd antlr-2.7.3
find antlr -name '*.class' -exec rm {} \;
javac -classpath . antlr/build/*.java
javac -classpath . antlr/J*.java
java -classpath . antlr.build.Tool build
java -classpath . antlr.build.Tool jar

export CLASSPATH=path_to_antlr/antlr.jar

Thanks Ter, 
       Stefan.

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
wrote:
> 
> On Apr 28, 2004, at 12:18 PM, birmanstefan wrote:
> 
> > Hi! While trying to run example antlr-2.7.3/examples/java/java I 
got
> > this message :
> > [andrei@stefan java]$ java -classpath $CLASSPATH:. Main -showtree
> > tests/E.java
> >
> > Parsing...
> >    /home/andrei/antlr-2.7.3/examples/java/java/tests/E.java
> > Exception in thread "main" java.lang.NoClassDefFoundError:
> > antlr/debug/misc/ASTFrame$MyTreeSelectionListener
> >         at antlr.debug.misc.ASTFrame.<init>(ASTFrame.java:42)
> >         at Main.doTreeAction(Main.java:89)
> >         at Main.parseFile(Main.java:74)
> >         at Main.doFile(Main.java:54)
> >         at Main.main(Main.java:24)
> > [andrei@stefan java]$
> > In 2.7.2 this issue doesn't appear. Is there a fix for this issue 
or
> > am I doing smthg wrong?
> >
> > PS: my aplication which used to work on 2.7.2 doesn't work anymore
> 
> Hmm..perhaps I didn't build the jar right or perhaps I didn't build 
the 
> project right and then jar'd.  Can you try to rebuild all the java 
> files and then point at the dir instead of the jar to see what 
happens?
> 
> THanks,
> Ter
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
> Cofounder, http://www.peerscope.com pure link sharing




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Thu Apr 29 03:31:30 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] missing class in 2.7.3 - ASTFrame$MyTreeSelectionListener
In-Reply-To: <c6p02r+ej4s@eGroups.com>
References: <c6p02r+ej4s@eGroups.com>
Message-ID: <20040429103129.GB13413@cs.utwente.nl>

On Wed, Apr 28, 2004 at 07:18:51PM -0000, birmanstefan wrote:
> While trying to run example antlr-2.7.3/examples/java/java I got 
> this message :
..
> In 2.7.2 this issue doesn't appear. Is there a fix for this issue or 
> am I doing smthg wrong?

If you build the jar file with the configure/Makefile build than it's a
known issue and fixed in the 2.7.4rc1 (I think)

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
     "Evil will always triumph, because Good is dumb." ---  Spaceballs



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Thu Apr 29 06:39:48 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:46 2004
Subject: Unsubscription by antlr-interest member
Message-ID: <1083245988.429.21400.m23@yahoogroups.com>


Hello,

This is an automated email message to let you know that
elukschandl <E.Lukschandl@aviplan.com> unsubscribed from your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a member unsubscribes.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Thu Apr 29 10:54:38 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] Re: missing class in 2.7.3 - ASTFrame$MyTreeSelectionListener
In-Reply-To: <c6qknk+3pjf@eGroups.com>
References: <c6qknk+3pjf@eGroups.com>
Message-ID: <48553746-9A06-11D8-9A7D-000A95891192@cs.usfca.edu>


On Apr 29, 2004, at 3:17 AM, birmanstefan wrote:

> Hi!
> It seems that you didn't build the project right. The "fix" was :
>
> cd antlr-2.7.3
> find antlr -name '*.class' -exec rm {} \;
> javac -classpath . antlr/build/*.java
> javac -classpath . antlr/J*.java
> java -classpath . antlr.build.Tool build
> java -classpath . antlr.build.Tool jar
>
> export CLASSPATH=path_to_antlr/antlr.jar

Ok, i'll check my build thingy.
Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Thu Apr 29 10:57:54 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] Re: missing class in 2.7.3 - ASTFrame$MyTreeSelectionListener
In-Reply-To: <c6qknk+3pjf@eGroups.com>
References: <c6qknk+3pjf@eGroups.com>
Message-ID: <BD6CAF8E-9A06-11D8-9A7D-000A95891192@cs.usfca.edu>


On Apr 29, 2004, at 3:17 AM, birmanstefan wrote:

> Hi!
> It seems that you didn't build the project right. The "fix" was :
>
> cd antlr-2.7.3
> find antlr -name '*.class' -exec rm {} \;
> javac -classpath . antlr/build/*.java
> javac -classpath . antlr/J*.java
> java -classpath . antlr.build.Tool build
> java -classpath . antlr.build.Tool jar
>
> export CLASSPATH=path_to_antlr/antlr.jar

Weird.  Here's a part of my human script for cutting release:

# now compile and such seems need antlr to start but then can do:
$ cd antlr
$ javac -classpath .. *.java
$ java -cp . antlr.build.Tool build
$ cd ..

# make a jar and cleanup
$ jar cvf antlr.jar *.class */*.class */*/*.class */*/*/*.class
$ find . -name '*.class' -exec rm -f {} \;

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From FranklinChen at cmu.edu  Thu Apr 29 11:09:22 2004
From: FranklinChen at cmu.edu (FranklinChen@cmu.edu)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] Embedded token stream technique
In-Reply-To: <BD6CAF8E-9A06-11D8-9A7D-000A95891192@cs.usfca.edu>
References: <c6qknk+3pjf@eGroups.com>
	<BD6CAF8E-9A06-11D8-9A7D-000A95891192@cs.usfca.edu>
Message-ID: <16529.17618.206071.826461@SWAN.PSY.cmu.edu>

I asked earlier in several messages about a variety of lexer
techniques I tried in order to do what I need to do... I never got any
feedback about any of it, but I think I have come up with an
interesting hack, and am interested whether it introduces unforeseen
problems:

Say I am parsing and currently use a lexer that has a token FLOAT,
which is FLOAT_INTEGER DOT FLOAT_FRACTION (assume all protected).  Now
assume that my parser wants to get the subparts of the token.  (Never
mind that in this toy example this makes no sense: in real examples,
where the token is actually recursive, I do want access to subparts of
a token, for reparsing in the right context.)

I've implemented a trick as follows (relevant excerpt
follows). Comments?


header {
    import java.util.LinkedList;
}

class FloatParser extends Parser;

options {
    buildAST = true;
}

tokens {
    NUMBER;
}

number
    :
        i:FLOAT_INTEGER
        DOT!
        f:FLOAT_FRACTION
        {
          #number = #([NUMBER], #number);
        }
    ;

class FloatLexer extends Lexer;

{
    /** Queue of tokens. */
    protected LinkedList insertedTokens = new LinkedList();
}

// Want to push tokens back on the stream in order to treat as
// "integer" followed by "fraction".
FLOAT
    :
        i:FLOAT_INTEGER
        {
            LinkedList queue = new LinkedList();
            queue.add(i);
        }
        d:DOT
        {
            queue.add(d);
        }
        f:FLOAT_FRACTION
        {
            queue.add(f);
        }

        {
            // Have to manually kick off the token stream.
            Token token = (Token) queue.removeFirst();
            $setToken(token);
            System.err.println("*** inserting tokens: " + queue);
            insertedTokens.addAll(queue);
        }
    ;

protected
FLOAT_INTEGER
    :
        ('0'..'9')+
    ;

protected
FLOAT_FRACTION
    :
        ('0'..'9')+
    ;

protected
DOT
    :
        '.'
    ;


import java.io.InputStream;
import java.io.Reader;

import antlr.Token;
import antlr.TokenStreamException;
import antlr.InputBuffer;
import antlr.LexerSharedInputState;


/**
 * Use queue of tokens before the existing token stream.
 */
public class InsertedFloatLexer extends FloatLexer {
    public InsertedFloatLexer(InputStream in) {
        super(in);
    }

    public InsertedFloatLexer(Reader in) {
        super(in);
    }

    public InsertedFloatLexer(InputBuffer ib) {
        super(ib);
    }

    public InsertedFloatLexer(LexerSharedInputState state) {
        super(state);
    }

    public Token nextToken() throws TokenStreamException {
        if (insertedTokens.size() == 0) {
            return super.nextToken();
        }
        else {
            return (Token) insertedTokens.removeFirst();
        }
    }
}


import antlr.TokenStream;
import antlr.Token;
import antlr.TokenStreamException;

public class FloatDriver {
    public static void main(String[] args) {
        try {
            InsertedFloatLexer lexer = new InsertedFloatLexer(System.in);
            FloatParser parser = new FloatParser(lexer);

            parser.start();
        }
        catch (Exception e) {
            System.err.println(e.getMessage());
        }
    }
}



-- 
Franklin


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Thu Apr 29 11:24:27 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] Embedded token stream technique
In-Reply-To: <16529.17618.206071.826461@SWAN.PSY.cmu.edu>
References: <c6qknk+3pjf@eGroups.com> <BD6CAF8E-9A06-11D8-9A7D-000A95891192@cs.usfca.edu> <16529.17618.206071.826461@SWAN.PSY.cmu.edu>
Message-ID: <731BAF19-9A0A-11D8-BC45-000393B5606C@codetransform.com>

I've used a similar approach before, this will work.

Monty

On Apr 29, 2004, at 11:09 AM, FranklinChen@cmu.edu wrote:

> I asked earlier in several messages about a variety of lexer
> techniques I tried in order to do what I need to do... I never got any
> feedback about any of it, but I think I have come up with an
> interesting hack, and am interested whether it introduces unforeseen
> problems:
>
> Say I am parsing and currently use a lexer that has a token FLOAT,
> which is FLOAT_INTEGER DOT FLOAT_FRACTION (assume all protected).  Now
> assume that my parser wants to get the subparts of the token.  (Never
> mind that in this toy example this makes no sense: in real examples,
> where the token is actually recursive, I do want access to subparts of
> a token, for reparsing in the right context.)
>
> I've implemented a trick as follows (relevant excerpt
> follows). Comments?
>
>
> header {
>     import java.util.LinkedList;
> }
>
> class FloatParser extends Parser;
>
> options {
>     buildAST = true;
> }
>
> tokens {
>     NUMBER;
> }
>
> number
>     :
>         i:FLOAT_INTEGER
>         DOT!
>         f:FLOAT_FRACTION
>         {
>           #number = #([NUMBER], #number);
>         }
>     ;
>
> class FloatLexer extends Lexer;
>
> {
>     /** Queue of tokens. */
>     protected LinkedList insertedTokens = new LinkedList();
> }
>
> // Want to push tokens back on the stream in order to treat as
> // "integer" followed by "fraction".
> FLOAT
>     :
>         i:FLOAT_INTEGER
>         {
>             LinkedList queue = new LinkedList();
>             queue.add(i);
>         }
>         d:DOT
>         {
>             queue.add(d);
>         }
>         f:FLOAT_FRACTION
>         {
>             queue.add(f);
>         }
>
>         {
>             // Have to manually kick off the token stream.
>             Token token = (Token) queue.removeFirst();
>             $setToken(token);
>             System.err.println("*** inserting tokens: " + queue);
>             insertedTokens.addAll(queue);
>         }
>     ;
>
> protected
> FLOAT_INTEGER
>     :
>         ('0'..'9')+
>     ;
>
> protected
> FLOAT_FRACTION
>     :
>         ('0'..'9')+
>     ;
>
> protected
> DOT
>     :
>         '.'
>     ;
>
>
> import java.io.InputStream;
> import java.io.Reader;
>
> import antlr.Token;
> import antlr.TokenStreamException;
> import antlr.InputBuffer;
> import antlr.LexerSharedInputState;
>
>
> /**
>  * Use queue of tokens before the existing token stream.
>  */
> public class InsertedFloatLexer extends FloatLexer {
>     public InsertedFloatLexer(InputStream in) {
>         super(in);
>     }
>
>     public InsertedFloatLexer(Reader in) {
>         super(in);
>     }
>
>     public InsertedFloatLexer(InputBuffer ib) {
>         super(ib);
>     }
>
>     public InsertedFloatLexer(LexerSharedInputState state) {
>         super(state);
>     }
>
>     public Token nextToken() throws TokenStreamException {
>         if (insertedTokens.size() == 0) {
>             return super.nextToken();
>         }
>         else {
>             return (Token) insertedTokens.removeFirst();
>         }
>     }
> }
>
>
> import antlr.TokenStream;
> import antlr.Token;
> import antlr.TokenStreamException;
>
> public class FloatDriver {
>     public static void main(String[] args) {
>         try {
>             InsertedFloatLexer lexer = new 
> InsertedFloatLexer(System.in);
>             FloatParser parser = new FloatParser(lexer);
>
>             parser.start();
>         }
>         catch (Exception e) {
>             System.err.println(e.getMessage());
>         }
>     }
> }
>
>
>
> -- 
> Franklin
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>
>
Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Thu Apr 29 11:29:53 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] Tree weirdness C++ mode
Message-ID: <350C7238-9A0B-11D8-BC45-000393B5606C@codetransform.com>

In a parser with C++ as a target, building a tree the following way 
does not work:

  ##->addChild(#[EMPTY,"empty"]);

Instead I have do to this:

astFactory->addASTChild(currentAST, #[EMPTY,"empty"]);

If I use addChild() then I see that the root node is updated with the 
child but some other bookkeeping must be happening because it gets 
overwritten later.

This contradicts some of the information in here: 
http://wwwhome.cs.utwente.nl/~klaren/antlr/treebuilding.txt

Anybody know what's going on?

Also doing ##=#(##,#[EMPTY,"empty"]); seems to overwrite the first 
child--equivalent to addFirstChild().  I always thought it would be 
equivalent to addChild().  So the following two have different 
behaviors:

astFactory->addASTChild(currentAST, #[EMPTY]);
##=#(##,#[EMPTY,"empty"]);

Does that seem right?  I suspect this might be different from Java.

Discovered in version 2.7.2.  Also present in 2.7.3 and 2.7.4rc1.

Monty



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Thu Apr 29 11:58:17 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:46 2004
Subject: New antlr-interest member
Message-ID: <1083265097.281.34680.w63@yahoogroups.com>


Hello,

This is an automated email message to let you know that
angrymongoose <norman@angry-mongoose.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From angrymongoose at yahoo.com  Thu Apr 29 12:34:56 2004
From: angrymongoose at yahoo.com (angrymongoose)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] Lexer - length/position as token delimiter?
Message-ID: <c6rld0+34g1@eGroups.com>

Hello all,

I need to be able to parse messages of the form:

message : headers tag+ trailer;

tag : tag_id tag_body;

<< begin of file omitted>>
:23B:CRED
:32A:000612USD5443,99
:33B:USD5443,99
<< end of file omitted>>

The problem I am having is that the tag body uses position as the
element delimiter rather than a clearly defined character. For example
looking at the 32A line:

":32A:" is the tag id and "000612USD5443,99" is the
tag_body. 

The tag body in turn breaks down into a date "000612" (6), a
currency
code "USD"  (3), and an amount (1-15).

Is it possible to somehow parse the tag body using ANTLR using one
lexer/parser or I am stuck writing tag parsers by hand. I guess an
alternative is to use ANTLR to write parsers for each tag and have a
master parser invoke the subparsers?

Thanks in advance for any help/suggestions.

-Norman




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Thu Apr 29 12:54:09 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] Lexer - length/position as token delimiter?
In-Reply-To: <c6rld0+34g1@eGroups.com>
References: <c6rld0+34g1@eGroups.com>
Message-ID: <FAA1272A-9A16-11D8-9A7D-000A95891192@cs.usfca.edu>


On Apr 29, 2004, at 12:34 PM, angrymongoose wrote:

> Hello all,
>
> I need to be able to parse messages of the form:
>
> message : headers tag+ trailer;
>
> tag : tag_id tag_body;
>
> << begin of file omitted>>
> :23B:CRED
> :32A:000612USD5443,99
> :33B:USD5443,99
> << end of file omitted>>
>
> The problem I am having is that the tag body uses position as the
> element delimiter rather than a clearly defined character. For example
> looking at the 32A line:
>
> ":32A:" is the tag id and "000612USD5443,99" is the
> tag_body.
>
> The tag body in turn breaks down into a date "000612" (6), a
> currency
> code "USD"  (3), and an amount (1-15).
>
> Is it possible to somehow parse the tag body using ANTLR using one
> lexer/parser or I am stuck writing tag parsers by hand. I guess an
> alternative is to use ANTLR to write parsers for each tag and have a
> master parser invoke the subparsers?

Hi Norman,

is the tag body fixed size for each "field"?  If so, pretty easy.  Just 
match 6 digits for the date, then look for the 3 letter currency code 
etc...

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From markl at glyphic.com  Thu Apr 29 13:11:17 2004
From: markl at glyphic.com (Mark Lentczner)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] Lexer - length/position as token delimiter?
In-Reply-To: <c6rld0+34g1@eGroups.com>
References: <c6rld0+34g1@eGroups.com>
Message-ID: <5FA61E60-9A19-11D8-88E7-000393A56BB6@glyphic.com>

As offen is the case, the problems are with your grammar, not the 
ability to lex or parse it.

> :23B:CRED
> :32A:000612USD5443,99
> :33B:USD5443,99

Does the grammar know from the tag what the format of the tag body 
should be?  Or can any tag have any tag _body format?  If the later is 
the case, then the grammar is almost certainly inherently ambiguous and 
you won't be able to get far.  (Unless the tag_body formats are far 
more restricted than I'm guessing from your example.)

Here's an example:

:33X:12040678,99

Unless the grammar says something about tag "33X", there is no way to 
know if this is should be parsed as:
     1) a date, "120406" and an amount "78,99"
or  2) an amount "12040678,99"

Assuming there is a way to know from the tag what to expect from the 
tag_body, then I'd approach this by putting most of the work in the 
parser, not the lexer.

In the lexer I'd have:

class ScriptLexer extends Lexer;
     options { testLiterals = false; }

TAG options{testLiterals=true;}: ':' DIGIT DIGIT LETTER ':';
DIGIT: '0'..'9';
COMMA: ',';
LETTER: 'A'..'Z';

In the parser I'd define rules for each tag_body format:

transaction: (LETTER)+;
date: DIGIT DIGIT DIGIT DIGIT DIGIT DIGIT;
currency: LETTER LETTER LETTER;
value: (DIGIT)+ (COMMA (DIGIT)+)?;
amount: currency value;
dated_amount: date amount;

Then each I'd run the rest of the parser like:

message : headers entry+ trailer;
line : (
       ":23B:" transaction
     | ":32A:" dated_amount
     | ":33B:" amount
     );

Notice the trick of allowing the literal test in the TAG rule, and then 
using all the tag names as literals in the parser.

	- Mark

Mark Lentczner
markl@wheatfarm.org
http://www.wheatfarm.org/



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From lgc at mail1.jpl.nasa.gov  Thu Apr 29 13:12:39 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] Re: Tree weirdness C++ mode
In-Reply-To: <350C7238-9A0B-11D8-BC45-000393B5606C@codetransform.com>
Message-ID: <c6rnjn+p4pv@eGroups.com>

--- In antlr-interest@yahoogroups.com, Monty Zukowski <monty@c...> wrote:
> In a parser with C++ as a target, building a tree the following way 
> does not work:
> 
>   ##->addChild(#[EMPTY,"empty"]);
> 
> Instead I have do to this:
> 
> astFactory->addASTChild(currentAST, #[EMPTY,"empty"]);
> 
> If I use addChild() then I see that the root node is updated with the 
> child but some other bookkeeping must be happening because it gets 
> overwritten later.
> 
> This contradicts some of the information in here: 
> http://wwwhome.cs.utwente.nl/~klaren/antlr/treebuilding.txt
> 
> Anybody know what's going on?

Yes--the normal tree building mechanism uses an ASTPair (currentAST;
thest have the structure { root, lastChild }.  The ASTFactory version
of addASTChild updates the "lastChild" field, while the AST version
does not.

> Also doing ##=#(##,#[EMPTY,"empty"]); seems to overwrite the first 
> child--equivalent to addFirstChild().  I always thought it would be 
> equivalent to addChild().  So the following two have different 
> behaviors:
> 
> astFactory->addASTChild(currentAST, #[EMPTY]);
> ##=#(##,#[EMPTY,"empty"]);
> 
> Does that seem right?  I suspect this might be different from Java.

Java is the same, and it does make sense from the internals.  It gives
the user optimization control by leaving the construction operators
fairly dumb.  My construction stuff will help a bit (2.8; I'm still
waiting for release approval), but we will need to revisit the tree
construction internals for ANTLR 3 to make use a bit less error-prone.

--Loring

> Discovered in version 2.7.2.  Also present in 2.7.3 and 2.7.4rc1.
> 
> Monty



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Thu Apr 29 17:44:11 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:46 2004
Subject: New antlr-interest member
Message-ID: <1083285851.82.61246.w34@yahoogroups.com>


Hello,

This is an automated email message to let you know that
anandfan123 <anandfan123@yahoo.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From Matthew.Ford at forward.com.au  Thu Apr 29 14:00:47 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] Re: Annotation tool best practices
References: <c6p3dj+i98p@eGroups.com>
Message-ID: <000001c42e99$1dbebd10$0400a8c0@NOTEBOOK>

Hi,
After reading noweb I coded CodeSections (attached, see the CodeSections.cs
for details)
It has the advantage that it is runs under ANT and is much simplier.  Still
no editor but should
not be too hard to do one.
I use CS to handle mutiple Tree parsers and to handle in-house versus
release versions of code (the in-house code has extra stuff)
matthew

----- Original Message ----- 
From: "micheal_jor" <open.zone@virgin.net>
To: <antlr-interest@yahoogroups.com>
Sent: Thursday, April 29, 2004 6:15 AM
Subject: [antlr-interest] Re: Annotation tool best practices


> --- In antlr-interest@yahoogroups.com, "John D. Mitchell"
> <johnm-antlr@n...> wrote:
>
> > For a concrete and available example, check out what Monty did with the
> > GnuC project with "literate programming" (ala Knuth via noweb).  That
> > allows for nice, cross-phase locality (i.e., all of those versions of
> > expression right next to each other).  One of my dislikes for that
> approach
> > is that the intermingling makes in more difficult to just look at all of
> > the rules for a single phase (in the editor).  On my play-with to-do
> list
> > is to investigate using a "literate" approach with a good outline
> editor so
> > that I could fold out all of the stuff that I didn't want to deal
> with at
> > any given point in time (think: different, editable views of a single
> > master source file).
>
> I looked into that and the inability to "extract" the view of a single
> pass forced me to move on.
>
> > Another "trick" you can do with the tree phases is to create a single,
> > super-set tree definition that encompasess all of the needs of all
> of the
> > different phases.
>
> Thought about that but the performance implications of all those
> unneccessary activation record operations keeps me looking for another
> option. Still, it remains the 2nd choice after the default of
> maintaining each grammar separately.
>
> > In the majority of my experience, I keep it simple (if not
> simplistic :-)
>
> Same here. Unless multiple output langauges are involved. In that case
> each phase gets the annotation tool treatment.
>
> > IME, the issue for me is much less dealing
> > consciously with the isolated, individual (sets of) rules across
> multiple
> > files but rather needing a true grammar level "diff" tool to catch those
> > cases where I wasn't conscious (or smart) enough to realize that a
> > particular change in one spot needed to be account for in other spots.
>
> If there was a tool that separates the grammar (and it's editing) from
> the noise (i.e. action code, method signatures, etc) that real
> lifework adds to it, then the diff tool won't be needed ;-)
>
> > Finally, on a related subject, there seems to be two schools of thought
> > on how to use grammar based approaches.  One is the "pure" school which
> > says that the grammar drives the system.  The other is that the
> grammar is
> > a slave to the rest of the system.  The argument, IMHO, isn't one versus
> > the other but rather (a) which one to use for which needs and (b)
> whether
> > or not it's acceptable to mix the approaches.
> >
> > In terms of (b), I'm unsure of but am concerned about your dottedNameXYZ
> > example as it's unclear to me why you (feel that you) need to take that
> > variation approach.  I.e., why isn't there only a single rule in the
> > grammar that provides the underlying information such that whatever is
> > consuming that information can extract it as appropriate?
>
> I guess I could write auxiliary routines to walk the sub-tree as
> needed and extract the information. Or I could write a generic rule
> that extracts all info from the tree pass it to other routines to work
> on it. It just felt more natural to define alternative walks of the
> same subtree as alternative rules. Helps my understanding loads and,
> since results are often written back as attributes, I am in the
> "right" place to do everything if I use the rule's srructure.
>
> Micheal
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: CodeSectionsV1_1.zip
Type: application/x-zip-compressed
Size: 13670 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20040430/70c55dc9/CodeSectionsV1_1.bin
From notify at yahoogroups.com  Fri Apr 30 08:40:45 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:46 2004
Subject: New antlr-interest member
Message-ID: <1083339645.91.37202.w78@yahoogroups.com>


Hello,

This is an automated email message to let you know that
noelbryson2003 <noel.bryson@silistix.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From a_urazov at mail.ru  Fri Apr 30 08:51:43 2004
From: a_urazov at mail.ru (Andrey R. Urazov)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] On the guessing mode in C++
Message-ID: <20040430155143.GA1807@ktulu>

Hi,

The current implementation of the guessing mode in C++ guarantees that
all the user defined actions be ignored. In my opinion the same
requirement should be spread onto the return values --- return values
should never be assigned in guessing mode. Otherwise, undesired side
effects are possible which may be caused by overloaded assignment
operators.

Now, for example, I have a situation described by the following
simplistic example:

rule1
{
    std::string s;
}
:
    s = rule2
;

rule2 returns [char* result]
{
    static char buf[BUFF_SIZE];
}
:
    x
    {
        strcpy(buf, y);
        result = buf;
    }
;

When in guessing mode `buf' is not initialized and may contain any
trash but the zero value thus causing assignment `s = rule2' to crash.

Best regards,
  Andrey Urazov



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Fri Apr 30 09:23:18 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] Re: Tree weirdness C++ mode
In-Reply-To: <c6rnjn+p4pv@eGroups.com>
References: <c6rnjn+p4pv@eGroups.com>
Message-ID: <B0E119F8-9AC2-11D8-B188-000393B5606C@codetransform.com>

On Apr 29, 2004, at 1:12 PM, lgcraymer wrote:

>> astFactory->addASTChild(currentAST, #[EMPTY]);
>> ##=#(##,#[EMPTY,"empty"]);
>>
>> Does that seem right?  I suspect this might be different from Java.
>
> Java is the same, and it does make sense from the internals.  It gives
> the user optimization control by leaving the construction operators
> fairly dumb.  My construction stuff will help a bit (2.8; I'm still
> waiting for release approval), but we will need to revisit the tree
> construction internals for ANTLR 3 to make use a bit less error-prone.

Thanks!  I'm glad it's just me...

At the very least there should be a language agnostic way to introduce 
new nodes and add them as the last child.

Also the documentation for tree building didn't say much about ASTPair 
or building trees with the factory v. by tree methods.

Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Fri Apr 30 09:23:18 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] On the guessing mode in C++
In-Reply-To: <20040430155143.GA1807@ktulu>
References: <20040430155143.GA1807@ktulu>
Message-ID: <20040430162317.GA19171@cs.utwente.nl>

Hi,

On Fri, Apr 30, 2004 at 10:51:43PM +0700, Andrey R. Urazov wrote:
> The current implementation of the guessing mode in C++ guarantees that
> all the user defined actions be ignored. 

Except init actions..

> In my opinion the same
> requirement should be spread onto the return values --- return values
> should never be assigned in guessing mode. Otherwise, undesired side
> effects are possible which may be caused by overloaded assignment
> operators.

It depends a bit where they get assigned. If you mean assignments to
return values inside the rule they should be returned from, those don't
happen (unless they're done in an init action) From the calling rule the
assignment is done. Due to the way antlr generates the return value it's
more or less an issue of initialization in the rule. Just like plain old C
garbage in garbage out. I'd rather not clutter the codegen with if's for
this (also I could think of things where you'd want the return value
(leaves a bit more room for cheating anltr with initactions)).

> Now, for example, I have a situation described by the following
> simplistic example:
> 
> rule1
> {
>     std::string s;
> }
> :
>     s = rule2
> ;
> 
> rule2 returns [char* result]
> {
>     static char buf[BUFF_SIZE];
> }
> :
>     x
>     {
>         strcpy(buf, y);
>         result = buf;
>     }
> ;
> 
> When in guessing mode `buf' is not initialized and may contain any
> trash but the zero value thus causing assignment `s = rule2' to crash.

Try this it's safer:

rule2 returns [char* result]
{
	// initialize in this init action so return value is ok.
    static char buf[BUFF_SIZE];
	 buf[0] = '\0';
	 result = buf;
} : ... ;

Note you can also do this (will not work in this example but just to show
the feature):

rule2 returns [char* result = 0]
{
    static char buf[BUFF_SIZE];
	 buf[0] = '\0';
	 result = buf;
} :  ... ;

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  Quidquid latine dictum sit, altum viditur.
                 (Whatever is said in Latin sounds profound.)



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From nfb at silistix.com  Fri Apr 30 09:18:57 2004
From: nfb at silistix.com (Noel F Bryson)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] Syntactic predicates and loops
Message-ID: <1083341936.4787.27.camel@angstrom.silistix.com>

I'm trying to build a grammar which includes something like the
following rules, which are intended to parse declaration-lists e.g. T1
a,b,c,T2 d,e,f,T3 g,h (where T1,T2 are types and a-h are variables).

type: identifier;
variable: identifier;

list_of_variables: variable (COMMA variable)*;
                                                                                                                                                             
declaration_list: type list_of_variables 
                      ( COMMA type list_of_variables)*;
                                                           

I have simplified the rules to illustrate my problem - which is that 
I get an ambiguity in list_of_variables:

sand2.g:35: warning:nondeterminism upon
sand2.g:35:     k==1:COMMA
sand2.g:35:     k==2:identifier
sand2.g:35:     k==3:EOF
sand2.g:35:     between alt 1 and exit branch of block

This occurs because ANTLR sees that, when it meets a COMMA, it can
either match using the loop in list_of_variables, or exit and match
using the loop in list_of_declarations. hence it can't tell if T2 is a
variable name or a type name. 

Since 'type' and 'variable' are actually more complex than I have shown
here, and themselves involve loops at the end, I don't think I can
resolve this be factoring or increasing the look-ahead. 

 
I'd like to be able to resolve this by getting list_of_variables to use
a syntactic predicate to lookahead through the identifier to see if
there is a COMMA (or EOF) after it. I'm new to this field, and would be
grateful if someone could show me how to do this - ANTLR ignores my
feeble efforts e.g.

list_of_variables: variable ((COMMA identifier COMMA identifier
identifier) => COMMA variable)*;





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Fri Apr 30 09:57:11 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] Syntactic predicates and loops
In-Reply-To: <1083341936.4787.27.camel@angstrom.silistix.com>
References: <1083341936.4787.27.camel@angstrom.silistix.com>
Message-ID: <6C8BA0E5-9AC7-11D8-B188-000393B5606C@codetransform.com>

On Apr 30, 2004, at 9:18 AM, Noel F Bryson wrote:

> I'm trying to build a grammar which includes something like the
> following rules, which are intended to parse declaration-lists e.g. T1
> a,b,c,T2 d,e,f,T3 g,h (where T1,T2 are types and a-h are variables).
>
> type: identifier;
> variable: identifier;
>
> list_of_variables: variable (COMMA variable)*;
>
> declaration_list: type list_of_variables
>                       ( COMMA type list_of_variables)*;
>
>
> I have simplified the rules to illustrate my problem - which is that
> I get an ambiguity in list_of_variables:
>
> sand2.g:35: warning:nondeterminism upon
> sand2.g:35:     k==1:COMMA
> sand2.g:35:     k==2:identifier
> sand2.g:35:     k==3:EOF
> sand2.g:35:     between alt 1 and exit branch of block
>
> This occurs because ANTLR sees that, when it meets a COMMA, it can
> either match using the loop in list_of_variables, or exit and match
> using the loop in list_of_declarations. hence it can't tell if T2 is a
> variable name or a type name.
>
> Since 'type' and 'variable' are actually more complex than I have shown
> here, and themselves involve loops at the end, I don't think I can
> resolve this be factoring or increasing the look-ahead.
>
>
> I'd like to be able to resolve this by getting list_of_variables to use
> a syntactic predicate to lookahead through the identifier to see if
> there is a COMMA (or EOF) after it. I'm new to this field, and would be
> grateful if someone could show me how to do this - ANTLR ignores my
> feeble efforts e.g.
>
> list_of_variables: variable ((COMMA identifier COMMA identifier
> identifier) => COMMA variable)*;
>
What goes wrong with this attempt?  It looks like it should work, 
though ANTLR will complain of a superflous syntactic predicate since 
there is only one alternative in the ()* closure.

Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From a_urazov at mail.ru  Fri Apr 30 10:23:27 2004
From: a_urazov at mail.ru (Andrey R. Urazov)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] On the guessing mode in C++
In-Reply-To: <20040430162317.GA19171@cs.utwente.nl>
References: <20040430155143.GA1807@ktulu> <20040430162317.GA19171@cs.utwente.nl>
Message-ID: <20040430172327.GB1807@ktulu>

On Fri, Apr 30, 2004 at 06:23:18PM +0200, Ric Klaren wrote:
> It depends a bit where they get assigned. If you mean assignments to
> return values inside the rule they should be returned from, those
> don't happen (unless they're done in an init action) From the calling
> rule the assignment is done. Due to the way antlr generates the return
> value it's more or less an issue of initialization in the rule. Just
> like plain old C garbage in garbage out. I'd rather not clutter the
> codegen with if's for this (also I could think of things where you'd
> want the return value (leaves a bit more room for cheating anltr with
> initactions)).
I see your point. I cannot speak absolutely competently since I have not
been using ANTLR extensively and therefore cannot say what is the right
way to use it. But in my opinion allowing assignments in the calling
rules in guessing mode is rather dangereous. First of all, because this
does not have any clear semantics in general: what is the sense of
assignment of a value whose computation was not triggered (except init
actions)? Secondly, running assignment operators may have side effects
which are inacceptable in guessing mode. User might want assignment
operator of his own object to do anything, for instance, it might
perform some registration of an object in a special object-directory and
increment some counter. Surely, running this registration operation
several times won't be desired.

In my humble opinion it's better if such semantically dubious situations
are prohibited. At least I would like a program I use to run in the safe
mode by default. And for users who do know what they are doing there
might be a special loose mode.

This is just my humble point of view. And again, I have not been using
ANTLR for long, so maybe I cannot see that the mode I suggest is too
restrictive.

> Try this it's safer:
> 
> rule2 returns [char* result]
> {
> 	// initialize in this init action so return value is ok.
>     static char buf[BUFF_SIZE];
> 	 buf[0] = '\0';
> 	 result = buf;
> } : ... ;
Thanks! It helps.


Best regards,
  Andrey Urazov



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Fri Apr 30 12:33:04 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:46 2004
Subject: New antlr-interest member
Message-ID: <1083353584.84.1487.w52@yahoogroups.com>


Hello,

This is an automated email message to let you know that
fwca8 <fwca8@yahoo.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From bharath at starthis.com  Fri Apr 30 13:29:17 2004
From: bharath at starthis.com (Bharath S)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] ANTLR grammar: Clarifications needed
In-Reply-To: <AB7BC370-9963-11D8-88E7-000393A56BB6@glyphic.com>
Message-ID: <000001c42ef1$cf86a3c0$03020a0a@devel.starthis.com>

Thanks to Mark and Anakreon for your comments. I clearly understand the
problem now. I hope to set it right today and give you feedback asap.

Thanks again.

-----Original Message-----
From: Mark Lentczner [mailto:markl@glyphic.com] 
Sent: Wednesday, April 28, 2004 5:31 PM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] ANTLR grammar: Clarifications needed


> 1) If I make BOOLEAN "protected", I am unable to refer it in the 
> PARSER.
Correct.  Protected lexer rules are for use only from some other lexer 
rule.  This often removes non-determinism because the calling lexer 
rule supplies the context.

> 2) If I make BOOLEAN "protected" and use $setType command in another 
> rule,
> ----------------
> Number_or_bit: ('0'|'1') {$setType(BOOLEAN); $setType(NUMBER);} | 
> ('2'..'9')
> {$setType(NUMBER);}
> ----------------
> It doesn't work.
Well, this was close to a reasonable approach: but "{$setType(BOOLEAN); 
$setType(NUMBER);}" was an error - you can't have two types attached to 
a token, and you can't do this in a parser rule.

> 3) If I say "boolean: "1"|"0";" in the parser, it doesn't work as I 
> thought.
No, this sets "1" and "0" to be literals added to the literal table.  
Probably not what you want.  If you have literal testing turned on in 
the lexer (it is by default), then these strings will never match any 
production in the lexer including NUMBER.

> How can I use BOOLEAN and NUMBER based on the context in which they 
> appear
> without having non-determinisms?
Short answer: you can't do this in the lexer.
Long answer:

You must take one of two approaches:

1) have two token types

NON_BOOLEAN_NUMBER: '2'..'9' ( '0'..'9' )* ;
BOOLEAN: ( '0' | '1' ) ( '0'..'9' { $setType(NON_BOOLEAN_NUMBER); } ( 
'0'..'9' )* )? ;

then in the parser you have to have rules like:

number: NON_BOOLEAN_NUMBER | BOOLEAN ;
boolean: BOOLEAN ;

2) have one token type

NUMBER: ('0'..'9')+ ;

then in the parser use rules like:

number: NUMBER ;
boolean: n:NUMBER { if (#n.getText() != "1") && (#n.getText() != "0") { 
new ANTLRException(...); } } ;


Exactly which form to use and which direction take depends quite a bit 
on the grammar of the language you're parsing.  How does that language 
deal with the confusing between BOOLEAN and NUMBER?  Does the parsing 
context always tell you which form you need?  For some constructs, does 
how to parse it depend on if the user wrote a boolean value or number 
greater than 1?  Is this true in all cases or only some?  Does the 
language consider "00" boolean as well?

Without knowing more, it is hard to say what to do: The problem isn't 
really with your lexer rules, it is with the grammar you are trying to 
parse: Sometimes it thinks "1" is a boolean, sometimes its a number.  
The question is how to resolve that.  Once you know how the parser 
rules should resolve the ambiguity, then you can design the lexer rules 
to support it.

In programming language design, things are always much more intertwined 
than one thinks...

   - Mark

Mark Lentczner
markl@wheatfarm.org
http://www.wheatfarm.org/



 
Yahoo! Groups Links



 






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Fri Apr 30 17:39:29 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] release of USFJProf profiling tool
Message-ID: <01CC728F-9B08-11D8-9185-000A95891192@cs.usfca.edu>

Howdy folks,

Two of my students, James Chan and Wei Chen, here at USFJProf have just 
released a nice little project built using the java.g grammar and the 
TokenStreamRewrite engine.

http://www.cs.usfca.edu/projects/usfjprof/

USFJProf is a Java code profiling tool that instruments your 
application (via a Java translator) with profiling code rather than 
using the usual statistical method ("wake up occasionally and figure 
out where the program is").  The profiler uses the native system clock 
rather than System.currentTimeInMills() on both Linux and Win32 
platforms.

Enjoy. :)

Terence
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

From notify at yahoogroups.com  Fri Apr 30 22:42:50 2004
From: notify at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:16:46 2004
Subject: New antlr-interest member
Message-ID: <1083390170.91.75933.w26@yahoogroups.com>


Hello,

This is an automated email message to let you know that
javadesigner <javadesigner@yahoo.com> joined your antlr-interest 
group.

Your group is currently configured to send you email
notification whenever a new member joins.  To turn off
notification, visit

http://groups.yahoo.com/group/antlr-interest/join 

Thank you for choosing Yahoo! Groups as your email group
service for the antlr-interest group.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 




From javadesigner at yahoo.com  Fri Apr 30 22:50:35 2004
From: javadesigner at yahoo.com (javadesigner)
Date: Mon Dec 20 16:16:46 2004
Subject: [antlr-interest] (unknown)
Message-ID: <c6vdrb+nsn5@eGroups.com>

I am trying to extend the introduction to antlr example
by lexing 'hello world' (note the space)

-------- from the antlr docs-----------
class P extends Parser;
startRule
    :   n:NAME
        {System.out.println("Hi there, "+n.getText());}
    ;

class L extends Lexer;
// one-or-more letters followed by a newline
NAME:   ('a'..'z' | 'A'..'Z' | ' ')+ NEWLINE
    ;
NEWLINE
    :   '\r' '\n'   // DOS
    |   '\n'        // UNIX
    ;
-----------------------------------------

The only change I made was added the ' ' after 'A' ..'Z'
After compiling the above and running the test
program (the test program is also from the antlr docs and
is shown at the end for completeness), I get:

---------------------------------------------
root@turing:~/parsing/test# java test
foo
Hi there, foo

NOTE THE ERROR BELOW>>>>>

root@turing:~/parsing/test# java test
foo bar
exception: line 1:4: unexpected char: ' '
-------------------------------------------

Can anyone explain what is going on and why
I get an unexpected char message ? I even tried:

NAME:   ('a'..'z' | 'A'..'Z' | '9')+ NEWLINE

and after recompiling:
root@turing:~/parsing/test# java test
foo9bar
exception: line 1:4: unexpected char: '9'

Help ! This shouldn't be that hard should it ?

Best regards,

--j

------------ test program -------------------
import java.io.*;
class test {
    public static void main(String[] args) {
        try {
            L lexer = new L(new DataInputStream(System.in));
            P parser = new P(lexer);
            parser.startRule();
        } catch(Exception e) {
            System.err.println("exception: "+e);
        }
    }
}




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
     antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 

