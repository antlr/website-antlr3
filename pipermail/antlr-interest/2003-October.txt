From hiteshk25 at yahoo.com  Wed Oct  1 01:53:43 2003
From: hiteshk25 at yahoo.com (hitesh khamesra)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Line number information for AST
In-Reply-To: <blcr3d+mvh1@eGroups.com>
Message-ID: <20031001085343.81552.qmail@web13702.mail.yahoo.com>


Hi,

     How to get line number, which says token of AST
node belong to that line.

with regards,
Hitesh.

__________________________________
Do you Yahoo!?
The New Yahoo! Shopping - with improved product search
http://shopping.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Wed Oct  1 03:09:40 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] Line number information for Tree Parser exceptions
In-Reply-To: <blcr3d+mvh1@eGroups.com>; from virantha@yahoo.com on Tue, Sep 30, 2003 at 09:03:41PM -0000
References: <blcr3d+mvh1@eGroups.com>
Message-ID: <20031001120940.B4854@cs.utwente.nl>

On Tue, Sep 30, 2003 at 09:03:41PM -0000, veekook wrote:
> Is there any way to augment exceptions thrown by the tree parser (eg 
> MismatchedTokenException) to maintain line numbers?  I've subclassed 
> CommonAST to include line numbers in my AST, but is there a method 
> for getting at the line numbers for an offending rule from a catch 
> block embedded in a tree grammar rule?  The following doesn't work 
> because tree exceptions don't track line numbers.

In java this should work in C++ I just now see that something wasn't ported
over from java mode. If the exception is generated by the match method of
the treeparser then the node attribute in the exception should be set.
Which means you're one cast away from the line number. Check out
MismatchedTokenException.java.

Depending on how you built your trees some nodes may lack line information.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Xander: "Buffy, we need to do something *now*"
  Angel: "We need a distraction."
  Buffy: "Right."
  Angel: "What are you going to do?"
  Buffy: "I'm going to kill them all. That oughtta distract 'em..."


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From daniel.kirmse at sap.com  Wed Oct  1 03:48:59 2003
From: daniel.kirmse at sap.com (dkirmse)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] XPath parser
Message-ID: <bleber+kq6e@eGroups.com>

Hi,

did anyone try to use ANTLR for the current XPath 2.0 grammar? Did it 
work? Or has it to be transformed to an LL(k) grammar first? If the 
later is true: Is there a location where I could find this LL(k) 
grammer for XPath 2.0?

Cheers & Thanks
Daniel


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jagad at enciety.com  Wed Oct  1 06:31:31 2003
From: jagad at enciety.com (jagad)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] stuck expr
Message-ID: <1065015091.12439.20.camel@training04>

Hi All,

I have simple parser like this one;

//***** Parser *****
class MyParser extends Parser;

goal       : exprList SEMI EOF;

exprList   : expr (COMMA expr);

expr       : simpleExpr (relOp simpleExpr)*;

simpleExpr : (PLUS | MINUS)? term (addOp term)*;

term       : factor (mulOp factor)*;

factor     : NUM_INT
           | NUM_REAL
           | (LPAREN expr RPAREN)
           ;

mulOp      : STAR | SLASH | DIV | AND | SHL| SHR;
addOp      : PLUS | MINUS | OR | XOR;
relOp      : GREATHAN 
           | LESSTHAN | GREATHANEQU | LESSTHANEQU |EQU|NOTEQU;

//********************

The I gerenate into C++ code, the problem is the parser allways stuck on
expr and never reach the goal. I have try to set options{ k=xx} with no
effect.

For input:

(1+2);

the output is:

NUM_INT      <----- factor: NUM_INT
term         <----- term: factor 
PLUS         <----- addOp: PLUS 
NUM_INT      <----- factor: NUM_INT 
term         <----- term: factor 
simpleExpr   <----- simpleExpr: term (addOp term)*; 
expr         <----- expr: simpleExpr
( expr )     <----- factor: (LPAREN expr RPAREN)
term         <----- term: factor
simpleExpr   <----- simpleExpr: term
expr         <----- expr: simpleExpr

Why my parser never reach goal? please, let me know.

Thanks in Advance and Best Regards

jagad




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Wed Oct  1 06:28:04 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] stuck expr
Message-ID: <72C9789739C4214096AE945753B11EA36B1EE5@mypxmail04.bco-home.com>

Perhaps you are never sending EOF.  Is the input a file or from the command
line?  Try it from a file.

Monty

-----Original Message-----
From: jagad [mailto:jagad@enciety.com] 
Sent: Wednesday, October 01, 2003 6:32 AM
To: ANTLR Milis
Subject: [antlr-interest] stuck expr

Hi All,

I have simple parser like this one;

//***** Parser *****
class MyParser extends Parser;

goal       : exprList SEMI EOF;

exprList   : expr (COMMA expr);

expr       : simpleExpr (relOp simpleExpr)*;

simpleExpr : (PLUS | MINUS)? term (addOp term)*;

term       : factor (mulOp factor)*;

factor     : NUM_INT
           | NUM_REAL
           | (LPAREN expr RPAREN)
           ;

mulOp      : STAR | SLASH | DIV | AND | SHL| SHR;
addOp      : PLUS | MINUS | OR | XOR;
relOp      : GREATHAN 
           | LESSTHAN | GREATHANEQU | LESSTHANEQU |EQU|NOTEQU;

//********************

The I gerenate into C++ code, the problem is the parser allways stuck on
expr and never reach the goal. I have try to set options{ k=xx} with no
effect.

For input:

(1+2);

the output is:

NUM_INT      <----- factor: NUM_INT
term         <----- term: factor 
PLUS         <----- addOp: PLUS 
NUM_INT      <----- factor: NUM_INT 
term         <----- term: factor 
simpleExpr   <----- simpleExpr: term (addOp term)*; 
expr         <----- expr: simpleExpr
( expr )     <----- factor: (LPAREN expr RPAREN)
term         <----- term: factor
simpleExpr   <----- simpleExpr: term
expr         <----- expr: simpleExpr

Why my parser never reach goal? please, let me know.

Thanks in Advance and Best Regards

jagad




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jagad at enciety.com  Wed Oct  1 06:44:55 2003
From: jagad at enciety.com (jagad)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] stuck expr
In-Reply-To: <1065015091.12439.20.camel@training04>
References: <1065015091.12439.20.camel@training04>
Message-ID: <1065015895.12442.24.camel@training04>

The declaration:

exprList   : expr (COMMA expr);

should be

exprList   : expr (COMMA expr)*;

and my problem still exist, anybody could give me the ligth?

TIA

jagad

On Wed, 2003-10-01 at 20:31, jagad wrote:
> Hi All,
> 
> I have simple parser like this one;
> 
> //***** Parser *****
> class MyParser extends Parser;
> 
> goal       : exprList SEMI EOF;
> 
> exprList   : expr (COMMA expr);
> 
> expr       : simpleExpr (relOp simpleExpr)*;
> 
> simpleExpr : (PLUS | MINUS)? term (addOp term)*;
> 
> term       : factor (mulOp factor)*;
> 
> factor     : NUM_INT
>            | NUM_REAL
>            | (LPAREN expr RPAREN)
>            ;
> 
> mulOp      : STAR | SLASH | DIV | AND | SHL| SHR;
> addOp      : PLUS | MINUS | OR | XOR;
> relOp      : GREATHAN 
>            | LESSTHAN | GREATHANEQU | LESSTHANEQU |EQU|NOTEQU;
> 
> //********************
> 
> The I gerenate into C++ code, the problem is the parser allways stuck on
> expr and never reach the goal. I have try to set options{ k=xx} with no
> effect.
> 
> For input:
> 
> (1+2);
> 
> the output is:
> 
> NUM_INT      <----- factor: NUM_INT
> term         <----- term: factor 
> PLUS         <----- addOp: PLUS 
> NUM_INT      <----- factor: NUM_INT 
> term         <----- term: factor 
> simpleExpr   <----- simpleExpr: term (addOp term)*; 
> expr         <----- expr: simpleExpr
> ( expr )     <----- factor: (LPAREN expr RPAREN)
> term         <----- term: factor
> simpleExpr   <----- simpleExpr: term
> expr         <----- expr: simpleExpr
> 
> Why my parser never reach goal? please, let me know.
> 
> Thanks in Advance and Best Regards
> 
> jagad
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jagad at enciety.com  Wed Oct  1 06:52:16 2003
From: jagad at enciety.com (jagad)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] stuck expr
In-Reply-To: <72C9789739C4214096AE945753B11EA36B1EE5@mypxmail04.bco-home.com>
References: <72C9789739C4214096AE945753B11EA36B1EE5@mypxmail04.bco-home.com>
Message-ID: <1065016336.12442.29.camel@training04>

Hi Monty, 
Thanks for your fast response.
BTW, the parser still stuck even I use the file as input.

When I try with input:

(1+2),(1+3);

NUM_INT
term
PLUS
NUM_INT
term
simpleExpr
expr
( expr )
term
simpleExpr
expr          <---- end, the COMMA and (1+3) is not process

Best Regards

jagad






 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Wed Oct  1 06:43:22 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] stuck expr
Message-ID: <72C9789739C4214096AE945753B11EA36B1EE6@mypxmail04.bco-home.com>

Run antlr.Tool with -traceParser and then run your parser again and see what
it is doing.  Take a look at the generated source code, it's pretty easy to
read and follow.

Monty

-----Original Message-----
From: jagad [mailto:jagad@enciety.com] 
Sent: Wednesday, October 01, 2003 6:52 AM
To: ANTLR Milis
Subject: RE: [antlr-interest] stuck expr

Hi Monty, 
Thanks for your fast response.
BTW, the parser still stuck even I use the file as input.

When I try with input:

(1+2),(1+3);

NUM_INT
term
PLUS
NUM_INT
term
simpleExpr
expr
( expr )
term
simpleExpr
expr          <---- end, the COMMA and (1+3) is not process

Best Regards

jagad






 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jagad at enciety.com  Wed Oct  1 07:05:07 2003
From: jagad at enciety.com (jagad)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] stuck expr
In-Reply-To: <72C9789739C4214096AE945753B11EA36B1EE6@mypxmail04.bco-home.com>
References: <72C9789739C4214096AE945753B11EA36B1EE6@mypxmail04.bco-home.com>
Message-ID: <1065017106.12439.36.camel@training04>

I use -parserTrace and try input:

(1+2),(1+3);

The Output:
------------------------------------
 > expr; LA(1)==(1+2),(1+3);
(
  > simpleExpr; LA(1)==(
   > term; LA(1)==(
    > factor; LA(1)==(
     > expr; LA(1)==1
      > simpleExpr; LA(1)==1
       > term; LA(1)==1
        > factor; LA(1)==1
NUM_INT
        < factor; LA(1)==+
term
       < term; LA(1)==+
       > addOp; LA(1)==+
PLUS
       < addOp; LA(1)==2
       > term; LA(1)==2
        > factor; LA(1)==2
NUM_INT
        < factor; LA(1)==)
term
       < term; LA(1)==)
simpleExpr
      < simpleExpr; LA(1)==)
expr
     < expr; LA(1)==)
( expr )
    < factor; LA(1)==,
term
   < term; LA(1)==,
simpleExpr
  < simpleExpr; LA(1)==,
expr
 < expr; LA(1)==,  <--------- lost at COMMA

-------------------------------------

The problem still exist.

Best Regards

jagad




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Wed Oct  1 06:57:48 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] stuck expr
In-Reply-To: <1065017106.12439.36.camel@training04>; from jagad@enciety.com on Wed, Oct 01, 2003 at 09:05:07PM +0700
References: <72C9789739C4214096AE945753B11EA36B1EE6@mypxmail04.bco-home.com> <1065017106.12439.36.camel@training04>
Message-ID: <20031001155748.D4854@cs.utwente.nl>

On Wed, Oct 01, 2003 at 09:05:07PM +0700, jagad wrote:
> I use -parserTrace and try input:
> 
> (1+2),(1+3);
> 
> The Output:
> ------------------------------------
>  > expr; LA(1)==(1+2),(1+3);

Hmmm you are calling the goal rule I hope? And not MyParser.expr() ? Or did
you cut out the traces for goal and exprList ?

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Before they invented drawing boards, what did they go back to?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jagad at enciety.com  Wed Oct  1 07:25:17 2003
From: jagad at enciety.com (jagad)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] stuck expr
In-Reply-To: <20031001155748.D4854@cs.utwente.nl>
References: <72C9789739C4214096AE945753B11EA36B1EE6@mypxmail04.bco-home.com>
	 <1065017106.12439.36.camel@training04> <20031001155748.D4854@cs.utwente.nl>
Message-ID: <1065018317.12439.51.camel@training04>

Hi Ric,

Yes, I call MyParser.expr() and No, I don't cut out, the whole result
it's just like I sent.

Here my snippet:

#include "parser/MyParserLexer.hpp"
#include "parser/MyParserParser.hpp"
#include <iostream>
#include <sstream>

int main()
{	
	ANTLR_USING_NAMESPACE(std)
	ANTLR_USING_NAMESPACE(antlr)
	
	try{		
		MyParserLexer lexer(cin); 
		MyParserParser parser(lexer);
	
		parser.expr();
	}
	catch(exception& e){
		cout << "exception: " << e.what() << endl;
	}
	
	return (0);
}

---------------

The snippet just like the ANTLR example :)
I have read the generated code (as adviced by Monty) and it's strange
that goal() not called at the first time. Could you give me info where
actually the first ANTLR C++ call ?

Best Regards

jagad

P.S: Is it possible that sleepless affecting my code? :) just joke,
ANTLR is great and your works at ANTLR C++ is great. Great Tools with a
newbie hand like me could be a problem :)


On Wed, 2003-10-01 at 20:57, Ric Klaren wrote:
> On Wed, Oct 01, 2003 at 09:05:07PM +0700, jagad wrote:
> > I use -parserTrace and try input:
> > 
> > (1+2),(1+3);
> > 
> > The Output:
> > ------------------------------------
> >  > expr; LA(1)==(1+2),(1+3);
> 
> Hmmm you are calling the goal rule I hope? And not MyParser.expr() ? Or did
> you cut out the traces for goal and exprList ?
> 
> Cheers,
> 
> Ric


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Wed Oct  1 07:16:29 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:57 2004
Subject: [antlr-interest] stuck expr
Message-ID: <72C9789739C4214096AE945753B11EA36B1EE7@mypxmail04.bco-home.com>

See that parser.expr()?  That's where you are calling the expr rule at the
top level.  Sounds like you really want to be calling parser.goal().

Good catch, Ric.

Monty

-----Original Message-----
From: jagad [mailto:jagad@enciety.com] 
Sent: Wednesday, October 01, 2003 7:25 AM
To: ANTLR Milis
Subject: Re: [antlr-interest] stuck expr

Hi Ric,

Yes, I call MyParser.expr() and No, I don't cut out, the whole result
it's just like I sent.

Here my snippet:

#include "parser/MyParserLexer.hpp"
#include "parser/MyParserParser.hpp"
#include <iostream>
#include <sstream>

int main()
{	
	ANTLR_USING_NAMESPACE(std)
	ANTLR_USING_NAMESPACE(antlr)
	
	try{		
		MyParserLexer lexer(cin); 
		MyParserParser parser(lexer);
	
		parser.expr();
	}
	catch(exception& e){
		cout << "exception: " << e.what() << endl;
	}
	
	return (0);
}

---------------

The snippet just like the ANTLR example :)
I have read the generated code (as adviced by Monty) and it's strange
that goal() not called at the first time. Could you give me info where
actually the first ANTLR C++ call ?

Best Regards

jagad

P.S: Is it possible that sleepless affecting my code? :) just joke,
ANTLR is great and your works at ANTLR C++ is great. Great Tools with a
newbie hand like me could be a problem :)


On Wed, 2003-10-01 at 20:57, Ric Klaren wrote:
> On Wed, Oct 01, 2003 at 09:05:07PM +0700, jagad wrote:
> > I use -parserTrace and try input:
> > 
> > (1+2),(1+3);
> > 
> > The Output:
> > ------------------------------------
> >  > expr; LA(1)==(1+2),(1+3);
> 
> Hmmm you are calling the goal rule I hope? And not MyParser.expr() ? Or
did
> you cut out the traces for goal and exprList ?
> 
> Cheers,
> 
> Ric


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jagad at enciety.com  Wed Oct  1 07:30:03 2003
From: jagad at enciety.com (jagad)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] stuck expr
In-Reply-To: <72C9789739C4214096AE945753B11EA36B1EE7@mypxmail04.bco-home.com>
References: <72C9789739C4214096AE945753B11EA36B1EE7@mypxmail04.bco-home.com>
Message-ID: <1065018603.12442.54.camel@training04>

Gotcha! :)
I use "expr" at my xxx.g file!

Thanks Monty, I'll fixed it and see how it goes

Best Regards

jagad


On Wed, 2003-10-01 at 21:16, mzukowski@yci.com wrote:
> See that parser.expr()?  That's where you are calling the expr rule at the
> top level.  Sounds like you really want to be calling parser.goal().
> 
> Good catch, Ric.
> 
> Monty
> 
> -----Original Message-----
> From: jagad [mailto:jagad@enciety.com] 
> Sent: Wednesday, October 01, 2003 7:25 AM
> To: ANTLR Milis
> Subject: Re: [antlr-interest] stuck expr
> 
> Hi Ric,
> 
> Yes, I call MyParser.expr() and No, I don't cut out, the whole result
> it's just like I sent.
> 
> Here my snippet:
> 
> #include "parser/MyParserLexer.hpp"
> #include "parser/MyParserParser.hpp"
> #include <iostream>
> #include <sstream>
> 
> int main()
> {	
> 	ANTLR_USING_NAMESPACE(std)
> 	ANTLR_USING_NAMESPACE(antlr)
> 	
> 	try{		
> 		MyParserLexer lexer(cin); 
> 		MyParserParser parser(lexer);
> 	
> 		parser.expr();
> 	}
> 	catch(exception& e){
> 		cout << "exception: " << e.what() << endl;
> 	}
> 	
> 	return (0);
> }
> 
> ---------------
> 
> The snippet just like the ANTLR example :)
> I have read the generated code (as adviced by Monty) and it's strange
> that goal() not called at the first time. Could you give me info where
> actually the first ANTLR C++ call ?
> 
> Best Regards
> 
> jagad
> 
> P.S: Is it possible that sleepless affecting my code? :) just joke,
> ANTLR is great and your works at ANTLR C++ is great. Great Tools with a
> newbie hand like me could be a problem :)
> 
> 
> On Wed, 2003-10-01 at 20:57, Ric Klaren wrote:
> > On Wed, Oct 01, 2003 at 09:05:07PM +0700, jagad wrote:
> > > I use -parserTrace and try input:
> > > 
> > > (1+2),(1+3);
> > > 
> > > The Output:
> > > ------------------------------------
> > >  > expr; LA(1)==(1+2),(1+3);
> > 
> > Hmmm you are calling the goal rule I hope? And not MyParser.expr() ? Or
> did
> > you cut out the traces for goal and exprList ?
> > 
> > Cheers,
> > 
> > Ric
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jagad at enciety.com  Wed Oct  1 07:34:55 2003
From: jagad at enciety.com (jagad)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] stuck expr
In-Reply-To: <72C9789739C4214096AE945753B11EA36B1EE7@mypxmail04.bco-home.com>
References: <72C9789739C4214096AE945753B11EA36B1EE7@mypxmail04.bco-home.com>
Message-ID: <1065018894.12439.57.camel@training04>

Hi Monty and Ric,

Thanks, now I realize that I should call goal() :) 
The problem is gone :) everything is works.

Best Kindest Regards

jagad


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jagad at enciety.com  Wed Oct  1 10:02:20 2003
From: jagad at enciety.com (jagad)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] [newbie] Lexer Question
Message-ID: <1065027739.15830.6.camel@training04>

Hi All,

I have lexer with conflicting declaration like this:

MOD    : "MOD"
IDENT  : ('a'..'z' | 'A'..'Z') ('a'..'z' | 'A'..'Z' | '0'..'9')*

How to solve the conflicting between MOD and IDENT?

Thanks in Advanced and Best Regards

jagad



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sumav_99 at yahoo.com  Wed Oct  1 10:01:37 2003
From: sumav_99 at yahoo.com (Suma Venkatesh)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] analysing java source code
In-Reply-To: <1065027739.15830.6.camel@training04>
Message-ID: <20031001170137.27987.qmail@web40613.mail.yahoo.com>

Hi,

  Iam looking for  parsing which can parse an input java source code.I mean the parser
should read the source code and identify the variable names and types and control
structures.I saw java.g example of antlr.But can anyone help me on how to use that for
getting specific results like below.ALso it should the read from an input file ,parse it
and write the output in a file.

Eg: Input is :
  import java.util.*;

public class HelloWorld{

public static void main(String args[]) {

String message = "Hello World";
int count =0;

	while(count <10) {
             System.out.println(message);
             count++;
        }

}

Output should be :

Variables: type name
           int  count
           String message

Can ANTLR do this and if so how ??

PLEASE HELP ME!!

thanks in advance,
suma



__________________________________
Do you Yahoo!?
The New Yahoo! Shopping - with improved product search
http://shopping.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Wed Oct  1 10:45:15 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] [newbie] Lexer Question
Message-ID: <72C9789739C4214096AE945753B11EA36B1EE9@mypxmail04.bco-home.com>

Look in the documentation about literals.

Monty

-----Original Message-----
From: jagad [mailto:jagad@enciety.com] 
Sent: Wednesday, October 01, 2003 10:02 AM
To: ANTLR Milis
Subject: [antlr-interest] [newbie] Lexer Question

Hi All,

I have lexer with conflicting declaration like this:

MOD    : "MOD"
IDENT  : ('a'..'z' | 'A'..'Z') ('a'..'z' | 'A'..'Z' | '0'..'9')*

How to solve the conflicting between MOD and IDENT?

Thanks in Advanced and Best Regards

jagad



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jagad at enciety.com  Wed Oct  1 11:04:43 2003
From: jagad at enciety.com (jagad)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] [newbie] Lexer Question
In-Reply-To: <1065027739.15830.6.camel@training04>
References: <1065027739.15830.6.camel@training04>
Message-ID: <1065031483.15830.20.camel@training04>

Hi All,

I've try with :

tokens{
  MOD = "MOD";
}

IDENT : ('a'..'z' | 'A'..'Z') ('a'..'z' | 'A'..'Z'|'0'..'9')*

it seems okay. 

Then I try with another declaration:

tokens{
  NOTEQU = "<>";
}

LESSTHAN : '<';

Generated code (C++) is okay for: X < Y but fail for: X <> Y ANTLR say 
unexpected token: >

Could anybody tell me how to solve this conflict?

Thanks in Advance and Best Regards

jagad





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jagad at enciety.com  Wed Oct  1 11:19:15 2003
From: jagad at enciety.com (jagad)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] [newbie] Lexer Question
In-Reply-To: <1065031483.15830.20.camel@training04>
References: <1065027739.15830.6.camel@training04>
	 <1065031483.15830.20.camel@training04>
Message-ID: <1065032355.15825.26.camel@training04>

Hi Again Monty,

Yes, it documented in Literal section.
My declaration should be:

options{ k=3} <--- this is the key :)
tokens{
  MOD = "MOD";
}

IDENT    : ('a'..'z' | 'A'..'Z') ('a'..'z' | 'A'..'Z'|'0'..'9')*
NOTEQU   : '<>';
LESSTHAN : '<'; 

Thanks Monty for your great responses.

Best Regards

jagad


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Wed Oct  1 10:26:25 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] [newbie] Lexer Question
In-Reply-To: <1065027739.15830.6.camel@training04>
Message-ID: <004701c38841$24939790$1ac8090a@oddi.is>

ANTLR resolves this for you automatically by putting all string literals
in the parser and lexer definitions (such as "MOD" in this case) in to a
special table. When the parser matches a an IDENT on the input it checks
to see if it's in this table (called the literals table) and if it finds
it there, then it returns the correct token (MOD in this case).

You can turn off this literal table checking by putting
  testLiterals=false;
in your parser options section. You can then enable this checking
specifically for the IDENT rule with the opposite option, like this:

IDENT
	options {testLiterals=true;}
	:	('a'..'z') ...

ANTLR still gives you ambiguity warnings for this, which you can safely
ignore.

Arnar

> -----Original Message-----
> From: jagad [mailto:jagad@enciety.com] 
> Sent: 1. okt?ber 2003 17:02
> To: ANTLR Milis
> Subject: [antlr-interest] [newbie] Lexer Question
> 
> 
> Hi All,
> 
> I have lexer with conflicting declaration like this:
> 
> MOD    : "MOD"
> IDENT  : ('a'..'z' | 'A'..'Z') ('a'..'z' | 'A'..'Z' | '0'..'9')*
> 
> How to solve the conflicting between MOD and IDENT?
> 
> Thanks in Advanced and Best Regards
> 
> jagad
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at antlr.org  Wed Oct  1 11:34:44 2003
From: parrt at antlr.org (Terence Parr)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] analysing java source code
In-Reply-To: <20031001170137.27987.qmail@web40613.mail.yahoo.com>
Message-ID: <ED83CEA3-F43D-11D7-82CF-000A95891192@antlr.org>

See the cross referencing headstart in the file sharing area.

Terence
On Wednesday, October 1, 2003, at 10:01 AM, Suma Venkatesh wrote:

> Hi,
>
>   Iam looking for  parsing which can parse an input java source code.I 
> mean the parser
> should read the source code and identify the variable names and types 
> and control
> structures.I saw java.g example of antlr.But can anyone help me on how 
> to use that for
> getting specific results like below.ALso it should the read from an 
> input file ,parse it
> and write the output in a file.
>
> Eg: Input is :
>   import java.util.*;
>
> public class HelloWorld{
>
> public static void main(String args[]) {
>
> String message = "Hello World";
> int count =0;
>
> 	while(count <10) {
>              System.out.println(message);
>              count++;
>         }
>
> }
>
> Output should be :
>
> Variables: type name
>            int  count
>            String message
>
> Can ANTLR do this and if so how ??
>
> PLEASE HELP ME!!
>
> thanks in advance,
> suma
>
>
>
> __________________________________
> Do you Yahoo!?
> The New Yahoo! Shopping - with improved product search
> http://shopping.yahoo.com
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sumav_99 at yahoo.com  Wed Oct  1 15:14:15 2003
From: sumav_99 at yahoo.com (Suma Venkatesh)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] analysing java source code
In-Reply-To: <ED83CEA3-F43D-11D7-82CF-000A95891192@antlr.org>
Message-ID: <20031001221415.89990.qmail@web40613.mail.yahoo.com>

Hi
  Terence,

 I did look into that already but can you please give me some tips on how to run it and
use it to achieve my task.I mean read a java file parse it and print variables and their
types.some small sample will do for me.I need to start from here and later learn to
analyse entire java code like control constructs etc.Our main idea is to build an
obfuscation tool kit for java programs using antlr.


thanks in advance,
suma


--- Terence Parr <parrt@antlr.org> wrote:
> See the cross referencing headstart in the file sharing area.
> 
> Terence
> On Wednesday, October 1, 2003, at 10:01 AM, Suma Venkatesh wrote:
> 
> > Hi,
> >
> >   Iam looking for  parsing which can parse an input java source code.I 
> > mean the parser
> > should read the source code and identify the variable names and types 
> > and control
> > structures.I saw java.g example of antlr.But can anyone help me on how 
> > to use that for
> > getting specific results like below.ALso it should the read from an 
> > input file ,parse it
> > and write the output in a file.
> >
> > Eg: Input is :
> >   import java.util.*;
> >
> > public class HelloWorld{
> >
> > public static void main(String args[]) {
> >
> > String message = "Hello World";
> > int count =0;
> >
> > 	while(count <10) {
> >              System.out.println(message);
> >              count++;
> >         }
> >
> > }
> >
> > Output should be :
> >
> > Variables: type name
> >            int  count
> >            String message
> >
> > Can ANTLR do this and if so how ??
> >
> > PLEASE HELP ME!!
> >
> > thanks in advance,
> > suma
> >
> >
> >
> > __________________________________
> > Do you Yahoo!?
> > The New Yahoo! Shopping - with improved product search
> > http://shopping.yahoo.com
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/
> >
> >
> >
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
The New Yahoo! Shopping - with improved product search
http://shopping.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Jim.OConnor at microfocus.com  Wed Oct  1 18:09:13 2003
From: Jim.OConnor at microfocus.com (Jim O'Connor)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] analysing java source code
Message-ID: <3AC103F1B7EEEC48A855ACB1D2819E9106AA3F@rock-corpmail.microfocus.com>

 Hi Suma,
  I assume you can "Tool" a grammar using antlr.  I assume you understand
the role of the Main.java file in "running" the grammar.   If you don't
understand either of those, I would recommend going to the getting started
section of antlr.org.
  The printing of the variables and types for a java file should be half
hour exercise (being generous), assuming you already have java.g,
java.tree.g, and Main.java cranked up.

Steps
1. Tool java.g
2. Tool java.tree.g
3.  compile all the *.java files, including Main.java.
4.  Execute Main.java given an input file.
         I don't think it will output anything - no actions!
5.  To get your types and variables look at java.tree.g

variableDef
	:	#(VARIABLE_DEF modifiers typeSpec variableDeclarator
varInitializer)
	;

variableDeclarator
	:	IDENT
	|	LBRACK variableDeclarator
	;

This section of the world should be very interesting to you.  Rip off some
print methods from other grammars and you're set.


The obfuscator, minimally,  is a translator that wants to make everything
less readable, rather than more.  I haven't looked for translators, but
there are people here that have opinions/expertise on those.

I am working on the Java Cross Referencing Tool.  The obfuscator would want
to know this type of information to make consistant changes. 

Hope that helps.

Jim

  

-----Original Message-----
From: Suma Venkatesh
To: antlr-interest@yahoogroups.com
Sent: 10/1/03 6:14 PM
Subject: Re: [antlr-interest] analysing java source code

Hi
  Terence,

 I did look into that already but can you please give me some tips on
how to run it and
use it to achieve my task.I mean read a java file parse it and print
variables and their
types.some small sample will do for me.I need to start from here and
later learn to
analyse entire java code like control constructs etc.Our main idea is to
build an
obfuscation tool kit for java programs using antlr.


thanks in advance,
suma


--- Terence Parr <parrt@antlr.org> wrote:
> See the cross referencing headstart in the file sharing area.
> 
> Terence
> On Wednesday, October 1, 2003, at 10:01 AM, Suma Venkatesh wrote:
> 
> > Hi,
> >
> >   Iam looking for  parsing which can parse an input java source
code.I 
> > mean the parser
> > should read the source code and identify the variable names and
types 
> > and control
> > structures.I saw java.g example of antlr.But can anyone help me on
how 
> > to use that for
> > getting specific results like below.ALso it should the read from an 
> > input file ,parse it
> > and write the output in a file.
> >
> > Eg: Input is :
> >   import java.util.*;
> >
> > public class HelloWorld{
> >
> > public static void main(String args[]) {
> >
> > String message = "Hello World";
> > int count =0;
> >
> > 	while(count <10) {
> >              System.out.println(message);
> >              count++;
> >         }
> >
> > }
> >
> > Output should be :
> >
> > Variables: type name
> >            int  count
> >            String message
> >
> > Can ANTLR do this and if so how ??
> >
> > PLEASE HELP ME!!
> >
> > thanks in advance,
> > suma
> >
> >
> >
> > __________________________________
> > Do you Yahoo!?
> > The New Yahoo! Shopping - with improved product search
> > http://shopping.yahoo.com
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/
> >
> >
> >
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
The New Yahoo! Shopping - with improved product search
http://shopping.yahoo.com

 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



________________________________________________________________________
This e-mail has been scanned for viruses by MCI's Internet Managed
Scanning Services - powered by MessageLabs. For further information
visit http://www.mci.com
________________________________________________________________________

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Thu Oct  2 08:49:49 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] MSVC 7.0
Message-ID: <001001c388fc$cfed08e0$1ac8090a@oddi.is>

Hello there.

I downloaded Ric's modified ANTLR 2.7.2, dated 2003-09-11, and am trying
to compile the cpp runtime to a dll with MSVC 7.0. I followed the
instructions in lib/cpp/README on how to create the project, except that
I skipped using a precompiled header (I checked "Empty project" in the
project wizard).

Everything compiled without a problem (leave warnings). However when
running a lexer, very similar to the MultiLexer example, I get access
violations right at the beginning, related to IO.

More specifically, I get an access violation error at the "input.get()"
statement in antlr::CharBuffer::getChar(), trying to read memory
0x00000014.

Any ideas?

Arnar


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Thu Oct  2 09:00:32 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] MSVC 7.0
In-Reply-To: <001001c388fc$cfed08e0$1ac8090a@oddi.is>
Message-ID: <001101c388fe$4f516170$1ac8090a@oddi.is>

I'm sorry, this was resolved as soon as I changed my projects
compilation to use a Multithreaded DLL runtime.

That left me with other problems, now, the "if (isprint(ch))" statment
in charName(int) in string.cpp fails an assertion in the runtime's
isctype.c, line 68:

Expression: (unsigned)(c+1) <= 256.

If this doesn't ring any bells, please ignore this post, I need to
investigate this further. I just wanted to let  you know that the other
issue is resolved.

Arnar

> -----Original Message-----
> From: Arnar Birgisson [mailto:arnarb@oddi.is] 
> Sent: 2. okt?ber 2003 15:50
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] MSVC 7.0
> 
> 
> Hello there.
> 
> I downloaded Ric's modified ANTLR 2.7.2, dated 2003-09-11, 
> and am trying
> to compile the cpp runtime to a dll with MSVC 7.0. I followed the
> instructions in lib/cpp/README on how to create the project, 
> except that
> I skipped using a precompiled header (I checked "Empty project" in the
> project wizard).
> 
> Everything compiled without a problem (leave warnings). However when
> running a lexer, very similar to the MultiLexer example, I get access
> violations right at the beginning, related to IO.
> 
> More specifically, I get an access violation error at the 
> "input.get()"
> statement in antlr::CharBuffer::getChar(), trying to read memory
> 0x00000014.
> 
> Any ideas?
> 
> Arnar
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From antlrlist at yahoo.com  Thu Oct  2 10:05:10 2003
From: antlrlist at yahoo.com (antlrlist)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] Re: Line number information for AST
In-Reply-To: <20031001085343.81552.qmail@web13702.mail.yahoo.com>
Message-ID: <blhls6+erqe@eGroups.com>

<hiteshk25@y...> wrote:
> 
> Hi,
> 
>      How to get line number, which says token of AST
> node belong to that line.
> 
> with regards,
> Hitesh.

Hi Hitesh!

The key is this: in ANTLR, AST nodes are completely different from 
tokens. ASTs are (normally) instances of antlr.CommonAST, while 
tokens are (normally) instances of antlr.CommonToken. These are 
completely different classes (no inheritance neither composition 
between them). They just "look" similar, because both have a "type" 
attribute and a "text" attribute. CommonType can even be initialized 
with a Token, but don't let this dissapoint you: only type and text 
are copied. This is where similarities end: AST nodes don't have 
file line or columns!

Putting aside the design reasons for this implementation, let me 
reformulate your question:
    How do I *add* line and column to the AST nodes?

This is easy: you can subclass antlr.CommonAST and add your own line 
and column attributes. Then override the initialize() methods so 
they copy line and column from the tokens, and add get and set 
methods.

Finally, you'll have to make your parser use your new AST node class 
instead of antlr.CommonAST... but I'll let you guess how to do it :)

...

I was joking :D! Use options ASTLabelType 
(http://www.antlr.org/doc/options.html#_bb13) and
Parser.setASTNodeType 
(http://www.antlr.org/javadoc/antlr/Parser.html#setASTNodeType
(java.lang.String))

However, if you want to make your life easier, you can use my lib, 
antlraux (http://antlraux.sf.net). It has a class, LexInfoAST 
(http://antlraux.sourceforge.net/javadoc/antlraux/util/LexInfoAST.htm
l) that will match your needs perfectly (it even includes filename 
O_O)

Cya!




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Thu Oct  2 10:18:04 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] MSVC 7.0
In-Reply-To: <001101c388fe$4f516170$1ac8090a@oddi.is>
Message-ID: <001601c38909$242632e0$1ac8090a@oddi.is>

Allright, I think I've found the source of that assert-failure.

In my lexer, I have a rule for a keyword:

STADVAER : "sta?v?r";

The problem here seems to be the '?' character (eth). What you need to
know is that it is 0xf0 in ISO-8859-1. Now, my lexer.g file is saved in
iso8859-1 so that this character is correct in that file.

I recall that the ANTLR documentation states that the inputCharset for
it's metalanguage is 7-bit ascii, so according to that, ANTLR should
have yielded an error for this rule. However, this was translated
directly to a string constant in the C++ file. (Note: this works fine in
Java)

Then, somewhere along the way, the expected character becomes an int,
and should be 0x000000f0, but is generated as 0xfffffff0. When 0xf0 is
seen on the input, this causes a MismatchedCharException and it tries to
generate it's message, it calls charName for 0xfffffff0 (the expected
char), which in turn calls isprint and since 0xfffffff0 is negative, it
blows up.

I guess this is partly my fault since I didn't follow ANTLR's
documentation carefully enough. Changing the rule to

STADVAER	:	"sta\360v\346r";

seems to fix this (it's butt-ugly though :o). However, I would like to
point out that this worked in Java, with it's multibyte string
constants, and along they way, antlr.Tool never complained about it's
input.

I'm sending this in here mostly to be of reference to others lexing
non-7bit ascii data with a c++ lexer, in case the hit the same walls I
did.

cheers!

Arnar

> -----Original Message-----
> From: Arnar Birgisson [mailto:arnarb@oddi.is] 
> Sent: 2. okt?ber 2003 16:01
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] MSVC 7.0
> 
> 
> I'm sorry, this was resolved as soon as I changed my projects
> compilation to use a Multithreaded DLL runtime.
> 
> That left me with other problems, now, the "if (isprint(ch))" statment
> in charName(int) in string.cpp fails an assertion in the runtime's
> isctype.c, line 68:
> 
> Expression: (unsigned)(c+1) <= 256.
> 
> If this doesn't ring any bells, please ignore this post, I need to
> investigate this further. I just wanted to let  you know that 
> the other
> issue is resolved.
> 
> Arnar
> 
> > -----Original Message-----
> > From: Arnar Birgisson [mailto:arnarb@oddi.is] 
> > Sent: 2. okt?ber 2003 15:50
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] MSVC 7.0
> > 
> > 
> > Hello there.
> > 
> > I downloaded Ric's modified ANTLR 2.7.2, dated 2003-09-11, 
> > and am trying
> > to compile the cpp runtime to a dll with MSVC 7.0. I followed the
> > instructions in lib/cpp/README on how to create the project, 
> > except that
> > I skipped using a precompiled header (I checked "Empty 
> project" in the
> > project wizard).
> > 
> > Everything compiled without a problem (leave warnings). However when
> > running a lexer, very similar to the MultiLexer example, I 
> get access
> > violations right at the beginning, related to IO.
> > 
> > More specifically, I get an access violation error at the 
> > "input.get()"
> > statement in antlr::CharBuffer::getChar(), trying to read memory
> > 0x00000014.
> > 
> > Any ideas?
> > 
> > Arnar
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Thu Oct  2 13:15:53 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] Re: MSVC 7.0
In-Reply-To: <001601c38909$242632e0$1ac8090a@oddi.is>
Message-ID: <bli11p+7903@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Arnar Birgisson" <arnarb@o...> 
wrote:
...
> Then, somewhere along the way, the expected character becomes an 
int,
> and should be 0x000000f0, but is generated as 0xfffffff0. When 0xf0 
is
> seen on the input, this causes a MismatchedCharException and it 
tries to
> generate it's message, it calls charName for 0xfffffff0 (the 
expected
> char), which in turn calls isprint and since 0xfffffff0 is negative, 
it
> blows up.

This looks more like a signed versus unsigned character problem.  As a 
signed "char", 0xf0 is -120 when converted to int, but as an unsigned 
char value is 248.  MSVC should have a compiler flag which interprets 
char as "unsigned char"; if not, Ric may be able to fix this pretty 
quickly if you ask.

--Loring


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ilkerpasa135 at yahoo.com  Thu Oct  2 16:17:25 2003
From: ilkerpasa135 at yahoo.com (ilkerpasa135)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] Need help for grammar of TL1 (a language used in North America in Telecom)
Message-ID: <blibm5+snf5@eGroups.com>

I'm new to antlr. And trying to learn antlr and prepare the grammar 
for TL1, a language used in North America for all Telecom equipment. 
Hence when I get it, it could be an interesting addition to antlr 
grammars.

Of course since I'm a newbei, when I run the following grammar I get 
many nondeterminism warnings, basically all over the place.

Past couple of days (not full time tough), I went through antlr 
tutorials, documents, etc , but obviously I haven't gotten it and 
need help. Hence any help is appreciated.

Here is what the TL1 command structure is like;
 VERB-modifier1-modifier2 : TID:AID:CTAG: : NAME=VALUE,NAME=VALUE ;
 VERB-modifier1-modifier2 : TID:AID:CTAG: : VALUE,VALUE ;
 Following are some TL1 command examples;
   ENT-EQPT-OC3:TID1:1-1-#-#-3:ctag123::attrib1=123,attrib2=456;
   ENT-EQPT-OC1:TID1:1-1-#-#-3:ctag123::123,456;


Here is the grammar that I have;

class TL1Parser extends Parser;
options { buildAST=true; }

// first just get TL1command grammar working
//tl1Message       : tl1Command | tl1Acknow | tl1Response | tl1Auto;
tl1Message       : tl1Command;

tl1Command       : (command_code DOUBL^ staging_blocks (DOUBL^ 
payload_blocks)?) SEMI!;

command_code     : VERB (DASH^ modifier1 (DASH^ modifier2)?)?;
modifier1        : NAME;
modifier2        : NAME;

staging_blocks   : TID DOUBL^ AID DOUBL^ CTAG (DOUBL^ general_block)?;
// general_block could be improved
general_block    : NAME;

payload_blocks   : data_block_list (DOUBL^ data_block_list)*;
data_block_list  : data_block (COMMA^ data_block)*;
data_block       : data_block_positional | data_block_named;
data_block_positional : VALUE (COMMA^ VALUE)*;
data_block_named : (NAME EQUAL^ VALUE) (COMMA^ (NAME EQUAL^ VALUE))*;



class TL1Lexer extends Lexer;

AID   : ('a'..'z'|'A'..'Z'|'0'..'9'|'.'|'-'|'_'|'/'|'#')+;
CTAG  : ('a'..'z'|'A'..'Z'|'0'..'9')+;
NAME  : ('a'..'z'|'A'..'Z'|'0'..'9')+;
TID   : ('a'..'z'|'A'..'Z'|'0'..'9'|'.'|'-'|'_'|'/')+;
VALUE : ('a'..'z'|'A'..'Z'|'0'..'9')+;
VERB  : ('a'..'z'|'A'..'Z')+;

COMMA : ',';
DASH  : '-';
DOUBL : ':';
EQUAL : '=';
SEMI  : ';';

WS    : (' ' | '\t'
         | '\r' '\n' { newline(); }
         | '\n'      { newline(); }
        ) 
          { $setType(Token.SKIP); };



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sarkar_soumen at yahoo.com  Thu Oct  2 17:16:42 2003
From: sarkar_soumen at yahoo.com (sarkar_soumen)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] ANTLR C# runtime fix, please review
Message-ID: <blif5a+p4dh@eGroups.com>

ANTLR C# runtime support,

I have a bug/enhancement to report in ANTLR C# runtime class
antlr272/antlr/CharScanner.cs

I have developed a custom markup language(like XML) Parser on .NET
platform which is being used internationally. I, therefore, had to
make sure the parser is usable for all culture setting in .NET
platform.

This fix is related to globalization aspect of ANTLR C# runtime. 

Find and review (and accept if you would like) the fix below.

Thanks,
Soumen Sarkar.

Background
==========
Case is a normative concept. However, case-mapping is NOT a normative
concept. Therefore, a product like ANTLR C# runtime should NEVER
use toLower(), toUpper() call without being EXPLICIT about culture.
Please refer to chapter 5 of UNICODE 4.0 specification
 
Implementation Guidelines, 5.18 Case Mappings
http://www.unicode.org/versions/Unicode4.0.0/ch05.pdf

For example, Turkish culture (tr-TR) has assymetric mapping of
vowel i/I. ANTLR generates lexical error when caseSensitive=false
in Turkish culture.
 
Fix
===
Change CharScanner class as follows

Before fix:

// Override this method to get more specific case handling
public virtual char toLower(int c)
{
    return Char.ToLower(Convert.ToChar(c));
}

After fix:

// Override this method to get more specific case handling
public virtual char toLower(int c)
{
return Char.ToLower(Convert.ToChar(c), 
System.Globalization.CultureInfo.InvariantCulture);
}

Argument can be made that end-users override toLower() method.
However, I feel passing 

System.Globalization.CultureInfo.InvariantCulture

to case mapping function toLower() is better solution.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sumav_99 at yahoo.com  Thu Oct  2 22:47:20 2003
From: sumav_99 at yahoo.com (Suma Venkatesh)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] analysing java source code
In-Reply-To: <3AC103F1B7EEEC48A855ACB1D2819E9106AA3F@rock-corpmail.microfocus.com>
Message-ID: <20031003054720.7935.qmail@web40610.mail.yahoo.com>

Hi
  Jim,

  Thank you so much for the help.I now kind of understand java.g,java.tree.g and main
classes.I can now display the variable, types and methods etc..
My next task is to change the names of the variables into less meaningfull ones like if
variable name is voltage,it should become v1 and so on.
I tried to experiment with the cross refererence tool.But i get compiler errors and also
i dodnt understand how to use it to acheive my task.

Can u help me on this ??

thanks in advance,
suma
--- Jim O'Connor <Jim.OConnor@microfocus.com> wrote:
>  Hi Suma,
>   I assume you can "Tool" a grammar using antlr.  I assume you understand
> the role of the Main.java file in "running" the grammar.   If you don't
> understand either of those, I would recommend going to the getting started
> section of antlr.org.
>   The printing of the variables and types for a java file should be half
> hour exercise (being generous), assuming you already have java.g,
> java.tree.g, and Main.java cranked up.
> 
> Steps
> 1. Tool java.g
> 2. Tool java.tree.g
> 3.  compile all the *.java files, including Main.java.
> 4.  Execute Main.java given an input file.
>          I don't think it will output anything - no actions!
> 5.  To get your types and variables look at java.tree.g
> 
> variableDef
> 	:	#(VARIABLE_DEF modifiers typeSpec variableDeclarator
> varInitializer)
> 	;
> 
> variableDeclarator
> 	:	IDENT
> 	|	LBRACK variableDeclarator
> 	;
> 
> This section of the world should be very interesting to you.  Rip off some
> print methods from other grammars and you're set.
> 
> 
> The obfuscator, minimally,  is a translator that wants to make everything
> less readable, rather than more.  I haven't looked for translators, but
> there are people here that have opinions/expertise on those.
> 
> I am working on the Java Cross Referencing Tool.  The obfuscator would want
> to know this type of information to make consistant changes. 
> 
> Hope that helps.
> 
> Jim
> 
>   
> 
> -----Original Message-----
> From: Suma Venkatesh
> To: antlr-interest@yahoogroups.com
> Sent: 10/1/03 6:14 PM
> Subject: Re: [antlr-interest] analysing java source code
> 
> Hi
>   Terence,
> 
>  I did look into that already but can you please give me some tips on
> how to run it and
> use it to achieve my task.I mean read a java file parse it and print
> variables and their
> types.some small sample will do for me.I need to start from here and
> later learn to
> analyse entire java code like control constructs etc.Our main idea is to
> build an
> obfuscation tool kit for java programs using antlr.
> 
> 
> thanks in advance,
> suma
> 
> 
> --- Terence Parr <parrt@antlr.org> wrote:
> > See the cross referencing headstart in the file sharing area.
> > 
> > Terence
> > On Wednesday, October 1, 2003, at 10:01 AM, Suma Venkatesh wrote:
> > 
> > > Hi,
> > >
> > >   Iam looking for  parsing which can parse an input java source
> code.I 
> > > mean the parser
> > > should read the source code and identify the variable names and
> types 
> > > and control
> > > structures.I saw java.g example of antlr.But can anyone help me on
> how 
> > > to use that for
> > > getting specific results like below.ALso it should the read from an 
> > > input file ,parse it
> > > and write the output in a file.
> > >
> > > Eg: Input is :
> > >   import java.util.*;
> > >
> > > public class HelloWorld{
> > >
> > > public static void main(String args[]) {
> > >
> > > String message = "Hello World";
> > > int count =0;
> > >
> > > 	while(count <10) {
> > >              System.out.println(message);
> > >              count++;
> > >         }
> > >
> > > }
> > >
> > > Output should be :
> > >
> > > Variables: type name
> > >            int  count
> > >            String message
> > >
> > > Can ANTLR do this and if so how ??
> > >
> > > PLEASE HELP ME!!
> > >
> > > thanks in advance,
> > > suma
> > >
> > >
> > >
> > > __________________________________
> > > Do you Yahoo!?
> > > The New Yahoo! Shopping - with improved product search
> > > http://shopping.yahoo.com
> > >
> > >
> > >
> > > Your use of Yahoo! Groups is subject to 
> > > http://docs.yahoo.com/info/terms/
> > >
> > >
> > >
> > --
> > Professor Comp. Sci., University of San Francisco
> > Creator, ANTLR Parser Generator, http://www.antlr.org
> > Co-founder, http://www.jguru.com
> > Co-founder, http://www.knowspam.net enjoy email again!
> > Co-founder, http://www.peerscope.com pure link sharing
> > 
> > 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
> 
> __________________________________
> Do you Yahoo!?
> The New Yahoo! Shopping - with improved product search
> http://shopping.yahoo.com
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 
> ________________________________________________________________________
> This e-mail has been scanned for viruses by MCI's Internet Managed
> Scanning Services - powered by MessageLabs. For further information
> visit http://www.mci.com
> ________________________________________________________________________
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
The New Yahoo! Shopping - with improved product search
http://shopping.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sumav_99 at yahoo.com  Thu Oct  2 23:59:44 2003
From: sumav_99 at yahoo.com (Suma Venkatesh)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] analysing java source code
In-Reply-To: <ED83CEA3-F43D-11D7-82CF-000A95891192@antlr.org>
Message-ID: <20031003065944.18705.qmail@web40602.mail.yahoo.com>

Hi
  terence,

 Can you please tell me where in jguru I can get the file needed to make xref run/compile
so that i can build it from there.

Iam working on an obfuscator tool and would like to build it using antlr.Iam totally new
to this and would like to learn it more .

Could u please help me.iam sorry abt delays in the response.trying to squeeze in this
project in the middle of 2 others

thanks in advance,
suma

--- Terence Parr <parrt@antlr.org> wrote:
> See the cross referencing headstart in the file sharing area.
> 
> Terence
> On Wednesday, October 1, 2003, at 10:01 AM, Suma Venkatesh wrote:
> 
> > Hi,
> >
> >   Iam looking for  parsing which can parse an input java source code.I 
> > mean the parser
> > should read the source code and identify the variable names and types 
> > and control
> > structures.I saw java.g example of antlr.But can anyone help me on how 
> > to use that for
> > getting specific results like below.ALso it should the read from an 
> > input file ,parse it
> > and write the output in a file.
> >
> > Eg: Input is :
> >   import java.util.*;
> >
> > public class HelloWorld{
> >
> > public static void main(String args[]) {
> >
> > String message = "Hello World";
> > int count =0;
> >
> > 	while(count <10) {
> >              System.out.println(message);
> >              count++;
> >         }
> >
> > }
> >
> > Output should be :
> >
> > Variables: type name
> >            int  count
> >            String message
> >
> > Can ANTLR do this and if so how ??
> >
> > PLEASE HELP ME!!
> >
> > thanks in advance,
> > suma
> >
> >
> >
> > __________________________________
> > Do you Yahoo!?
> > The New Yahoo! Shopping - with improved product search
> > http://shopping.yahoo.com
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/
> >
> >
> >
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
The New Yahoo! Shopping - with improved product search
http://shopping.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sumav_99 at yahoo.com  Fri Oct  3 00:27:31 2003
From: sumav_99 at yahoo.com (Suma Venkatesh)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] analysing java source code
In-Reply-To: <20031003065944.18705.qmail@web40602.mail.yahoo.com>
Message-ID: <20031003072731.13180.qmail@web40613.mail.yahoo.com>

Hi
  Jim/Terrance

  In the cross reference tool i tried to compile refs.g and defs.g but i get an error
Java Tree parser not defined.what should i do about this ?
any suggestios ?

thanks,
suma


__________________________________
Do you Yahoo!?
The New Yahoo! Shopping - with improved product search
http://shopping.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Fri Oct  3 02:30:48 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] MSVC 7.0
In-Reply-To: <001601c38909$242632e0$1ac8090a@oddi.is>; from arnarb@oddi.is on Thu, Oct 02, 2003 at 05:18:04PM -0000
References: <001101c388fe$4f516170$1ac8090a@oddi.is> <001601c38909$242632e0$1ac8090a@oddi.is>
Message-ID: <20031003113048.F28510@cs.utwente.nl>

Hi,

On Thu, Oct 02, 2003 at 05:18:04PM -0000, Arnar Birgisson wrote:
> STADVAER : "stavr";
> 
> I recall that the ANTLR documentation states that the inputCharset for
> it's metalanguage is 7-bit ascii, so according to that, ANTLR should
> have yielded an error for this rule. However, this was translated
> directly to a string constant in the C++ file. (Note: this works fine in
> Java)

Think it was upped to 8 bit at a point. The documentation is crappy though.

> Then, somewhere along the way, the expected character becomes an int,
> and should be 0x000000f0, but is generated as 0xfffffff0. When 0xf0 is
> seen on the input, this causes a MismatchedCharException and it tries to
> generate it's message, it calls charName for 0xfffffff0 (the expected
> char), which in turn calls isprint and since 0xfffffff0 is negative, it
> blows up.

Hmm I had expected a problem like this one of these days. The runtime uses
a lot of int's where it should be using unsigneds just to prevent these
signextension troubles. I started changing some of them already only this
part I did not touch yet.

> I guess this is partly my fault since I didn't follow ANTLR's
> documentation carefully enough. Changing the rule to
> 
> STADVAER	:	"sta\360v\346r";
> 
> seems to fix this (it's butt-ugly though :o). However, I would like to
> point out that this worked in Java, with it's multibyte string
> constants, and along they way, antlr.Tool never complained about it's
> input.

antlr.Tool often does not complain where it should ;) To get back to the
point I thought I had fixed all these quoting stuffs in C++ codegen. Seems
I'll have to reinvestigate.

> I'm sending this in here mostly to be of reference to others lexing
> non-7bit ascii data with a c++ lexer, in case the hit the same walls I
> did.

8 bit should work fine except for some caveats. I will look at this.
Multibyte encodings is a no go though in C++.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     "Never argue with an idiot, for they will bring you down to their
              level and beat you with experience." --- Unknown

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Fri Oct  3 02:33:00 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] Re: MSVC 7.0
In-Reply-To: <bli11p+7903@eGroups.com>
Message-ID: <000f01c38991$571b0e40$1ac8090a@oddi.is>

Hello

Loring wrote:
> This looks more like a signed versus unsigned character 
> problem.  As a 
> signed "char", 0xf0 is -120 when converted to int, but as an unsigned 
> char value is 248.  MSVC should have a compiler flag which interprets 
> char as "unsigned char"; if not, Ric may be able to fix this pretty 
> quickly if you ask.

Indeed there is such a flag, /J. Enabling it in my project, in fact it
didn't matter there. However, the ANTLR dll must be built with this
flag. That solved it for me.

For future reference, here's how I built the ANTLR dll with MSVC 7.0,
based on Ric's modified ANTLR 2.7.3-20030911 (this is a little different
from the README):

1. Create new "Win32 Project"
2. In the creation wizard, under "Application Settings", check DLL as
application type and "Empty project" in "Additional Options"
3. Insert all *.cpp files from lib/cpp/src and *.hpp from lib/cpp/antlr
to your project.
4. Make these changes in Project properties:
    - Configuration Properties
      - C/C++
        - General
          - Additinal Include Directories: drive:\path-to-antlr\lib\cpp
        - Preprocessor
          - Preprocessor Definitions:
 
WIN32;NDEBUG;_WINDOWS;_USRDLL;ANTLR_EXPORTS;ANTLR_CXX_SUPPORTS_NAMESPACE
              ( change _DEBUG to NDEBUG in release build)
        - Code generation
          - Runtime Library: Multi-threaded Debug DLL  (Skip "debug" in
release build)
          - Enable Function-level Linking: Yes
        - Language
          - Default Char Unsigned: Yes
        - Create/Use Precompiled Header: Not using precompiled header
5. Compile

In your project, where you use ANTLR from, you need to select the same
Runtime Library, and define ANTLR_IMPORTS and
ANTLR_CXX_SUPPORTS_NAMESPACE.

Arnar


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Fri Oct  3 03:59:17 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] Re: MSVC 7.0
Message-ID: <sf7d569d.047@emil.oddi.is>

Hello..

I didn't check exactly where the char is converted to int, but a simple
step-through should reveal that. I'm at school right now so I can't send
you the results right away, I'll get back to you on that. I can also
send you a simple lexer + input that generates this error. Let me remind
you that compiling antlr with /J solves this.

I'm not sure about those template instantiations, but I'm sure a little
research will sched some light on that. I'll get back to you on that
too.

Arnar

>>> klaren@cs.utwente.nl 10/03/03 10:06 AM >>>
Hi,

While I have the attention of MSVC user ;)

At the moment there's a lot of these kind off blocks spread through the
header files only for MSVC:

#if defined(_MSC_VER) && !defined(__ICL) // Microsoft Visual C++
  template class  ANTLR_API ANTLR_USE_NAMESPACE(std)allocator<
ANTLR_USE_NAMESPACE(std)pair< ANTLR_USE_NAMESPACE(std)string, int > >;
  template class  ANTLR_API ANTLR_USE_NAMESPACE(std)allocator<
ANTLR_USE_NAMESPACE(std)pair< const ANTLR_USE_NAMESPACE(std)string, int
> >;
...../* etc */.....
  template class  ANTLR_API ANTLR_USE_NAMESPACE(std)_Tree_val<
ANTLR_USE_NAMESPACE(std)_Tmap_traits< ANTLR_USE_NAMESPACE(std)string,
int, CharScannerLiteralsLess, ANTLR_USE_NAMESPACE(std)allocator<
ANTLR_USE_NAMESPACE(std)pair< const ANTLR_USE_NAMESPACE(std)string, int
> >,false > >;
  template class  ANTLR_API ANTLR_USE_NAMESPACE(std)_Tree<
ANTLR_USE_NAMESPACE(std)_Tmap_traits< ANTLR_USE_NAMESPACE(std)string,
int, CharScannerLiteralsLess, ANTLR_USE_NAMESPACE(std)allocator<
ANTLR_USE_NAMESPACE(std)pair< const ANTLR_USE_NAMESPACE(std)string, int
> >,false > >;
  template class  ANTLR_API ANTLR_USE_NAMESPACE(std)map<
ANTLR_USE_NAMESPACE(std)string, int, CharScannerLiteralsLess >;
#endif

Is it possible to move these all in one file like dll.cpp ? Or are these
explicit template instantiations needed in their header files ? I'd be
inclined to think they can be moved. Which would allow moving all the
MSVC
cruft in one file.

Question aside:

To fix the quoting change the method textOrChar in CppCodeGenerator.java
to:

private String textOrChar(String text) {
	// check to see if the text is a single character
	if (text.startsWith("'")) {
		// assume it also ends with '
		return
charFormatter.literalChar(ANTLRLexer.tokenTypeForCharLiteral(text));
	}
	else
	{
		// must be string literal strip of the quotes so
		// they won't get quoted
		return
"\""+charFormatter.escapeString(StringUtils.stripFrontBack(text,"\"","\""))+"\"";
	}
}

Did you by any chance see where the invalid sign extension happened? Or
do
you have a small example lexer+input file that triggers this ?

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Xander: "Buffy, we need to do something *now*"
  Angel: "We need a distraction."
  Buffy: "Right."
  Angel: "What are you going to do?"
  Buffy: "I'm going to kill them all. That oughtta distract 'em..."


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Fri Oct  3 03:59:32 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] Re: MSVC 7.0
Message-ID: <sf7d569f.050@emil.oddi.is>

Hello..

I didn't check exactly where the char is converted to int, but a simple
step-through should reveal that. I'm at school right now so I can't send
you the results right away, I'll get back to you on that. I can also
send you a simple lexer + input that generates this error. Let me remind
you that compiling antlr with /J solves this.

I'm not sure about those template instantiations, but I'm sure a little
research will sched some light on that. I'll get back to you on that
too.

Arnar

>>> klaren@cs.utwente.nl 10/03/03 10:06 AM >>>
Hi,

While I have the attention of MSVC user ;)

At the moment there's a lot of these kind off blocks spread through the
header files only for MSVC:

#if defined(_MSC_VER) && !defined(__ICL) // Microsoft Visual C++
  template class  ANTLR_API ANTLR_USE_NAMESPACE(std)allocator<
ANTLR_USE_NAMESPACE(std)pair< ANTLR_USE_NAMESPACE(std)string, int > >;
  template class  ANTLR_API ANTLR_USE_NAMESPACE(std)allocator<
ANTLR_USE_NAMESPACE(std)pair< const ANTLR_USE_NAMESPACE(std)string, int
> >;
...../* etc */.....
  template class  ANTLR_API ANTLR_USE_NAMESPACE(std)_Tree_val<
ANTLR_USE_NAMESPACE(std)_Tmap_traits< ANTLR_USE_NAMESPACE(std)string,
int, CharScannerLiteralsLess, ANTLR_USE_NAMESPACE(std)allocator<
ANTLR_USE_NAMESPACE(std)pair< const ANTLR_USE_NAMESPACE(std)string, int
> >,false > >;
  template class  ANTLR_API ANTLR_USE_NAMESPACE(std)_Tree<
ANTLR_USE_NAMESPACE(std)_Tmap_traits< ANTLR_USE_NAMESPACE(std)string,
int, CharScannerLiteralsLess, ANTLR_USE_NAMESPACE(std)allocator<
ANTLR_USE_NAMESPACE(std)pair< const ANTLR_USE_NAMESPACE(std)string, int
> >,false > >;
  template class  ANTLR_API ANTLR_USE_NAMESPACE(std)map<
ANTLR_USE_NAMESPACE(std)string, int, CharScannerLiteralsLess >;
#endif

Is it possible to move these all in one file like dll.cpp ? Or are these
explicit template instantiations needed in their header files ? I'd be
inclined to think they can be moved. Which would allow moving all the
MSVC
cruft in one file.

Question aside:

To fix the quoting change the method textOrChar in CppCodeGenerator.java
to:

private String textOrChar(String text) {
	// check to see if the text is a single character
	if (text.startsWith("'")) {
		// assume it also ends with '
		return
charFormatter.literalChar(ANTLRLexer.tokenTypeForCharLiteral(text));
	}
	else
	{
		// must be string literal strip of the quotes so
		// they won't get quoted
		return
"\""+charFormatter.escapeString(StringUtils.stripFrontBack(text,"\"","\""))+"\"";
	}
}

Did you by any chance see where the invalid sign extension happened? Or
do
you have a small example lexer+input file that triggers this ?

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Xander: "Buffy, we need to do something *now*"
  Angel: "We need a distraction."
  Buffy: "Right."
  Angel: "What are you going to do?"
  Buffy: "I'm going to kill them all. That oughtta distract 'em..."


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Fri Oct  3 03:59:37 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] Re: MSVC 7.0
Message-ID: <sf7d56bd.051@emil.oddi.is>

Hello..

I didn't check exactly where the char is converted to int, but a simple
step-through should reveal that. I'm at school right now so I can't send
you the results right away, I'll get back to you on that. I can also
send you a simple lexer + input that generates this error. Let me remind
you that compiling antlr with /J solves this.

I'm not sure about those template instantiations, but I'm sure a little
research will sched some light on that. I'll get back to you on that
too.

Arnar

>>> klaren@cs.utwente.nl 10/03/03 10:06 AM >>>
Hi,

While I have the attention of MSVC user ;)

At the moment there's a lot of these kind off blocks spread through the
header files only for MSVC:

#if defined(_MSC_VER) && !defined(__ICL) // Microsoft Visual C++
  template class  ANTLR_API ANTLR_USE_NAMESPACE(std)allocator<
ANTLR_USE_NAMESPACE(std)pair< ANTLR_USE_NAMESPACE(std)string, int > >;
  template class  ANTLR_API ANTLR_USE_NAMESPACE(std)allocator<
ANTLR_USE_NAMESPACE(std)pair< const ANTLR_USE_NAMESPACE(std)string, int
> >;
...../* etc */.....
  template class  ANTLR_API ANTLR_USE_NAMESPACE(std)_Tree_val<
ANTLR_USE_NAMESPACE(std)_Tmap_traits< ANTLR_USE_NAMESPACE(std)string,
int, CharScannerLiteralsLess, ANTLR_USE_NAMESPACE(std)allocator<
ANTLR_USE_NAMESPACE(std)pair< const ANTLR_USE_NAMESPACE(std)string, int
> >,false > >;
  template class  ANTLR_API ANTLR_USE_NAMESPACE(std)_Tree<
ANTLR_USE_NAMESPACE(std)_Tmap_traits< ANTLR_USE_NAMESPACE(std)string,
int, CharScannerLiteralsLess, ANTLR_USE_NAMESPACE(std)allocator<
ANTLR_USE_NAMESPACE(std)pair< const ANTLR_USE_NAMESPACE(std)string, int
> >,false > >;
  template class  ANTLR_API ANTLR_USE_NAMESPACE(std)map<
ANTLR_USE_NAMESPACE(std)string, int, CharScannerLiteralsLess >;
#endif

Is it possible to move these all in one file like dll.cpp ? Or are these
explicit template instantiations needed in their header files ? I'd be
inclined to think they can be moved. Which would allow moving all the
MSVC
cruft in one file.

Question aside:

To fix the quoting change the method textOrChar in CppCodeGenerator.java
to:

private String textOrChar(String text) {
	// check to see if the text is a single character
	if (text.startsWith("'")) {
		// assume it also ends with '
		return
charFormatter.literalChar(ANTLRLexer.tokenTypeForCharLiteral(text));
	}
	else
	{
		// must be string literal strip of the quotes so
		// they won't get quoted
		return
"\""+charFormatter.escapeString(StringUtils.stripFrontBack(text,"\"","\""))+"\"";
	}
}

Did you by any chance see where the invalid sign extension happened? Or
do
you have a small example lexer+input file that triggers this ?

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Xander: "Buffy, we need to do something *now*"
  Angel: "We need a distraction."
  Buffy: "Right."
  Angel: "What are you going to do?"
  Buffy: "I'm going to kill them all. That oughtta distract 'em..."


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Fri Oct  3 04:00:55 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] Re: MSVC 7.0
Message-ID: <sf7d56fa.054@emil.oddi.is>

I'm sorry for sending my last post three times, stupid webmail interface
:o)

Arnar

>>> klaren@cs.utwente.nl 10/03/03 10:06 AM >>>
Hi,

While I have the attention of MSVC user ;)

At the moment there's a lot of these kind off blocks spread through the
header files only for MSVC:

#if defined(_MSC_VER) && !defined(__ICL) // Microsoft Visual C++
  template class  ANTLR_API ANTLR_USE_NAMESPACE(std)allocator<
ANTLR_USE_NAMESPACE(std)pair< ANTLR_USE_NAMESPACE(std)string, int > >;
  template class  ANTLR_API ANTLR_USE_NAMESPACE(std)allocator<
ANTLR_USE_NAMESPACE(std)pair< const ANTLR_USE_NAMESPACE(std)string, int
> >;
...../* etc */.....
  template class  ANTLR_API ANTLR_USE_NAMESPACE(std)_Tree_val<
ANTLR_USE_NAMESPACE(std)_Tmap_traits< ANTLR_USE_NAMESPACE(std)string,
int, CharScannerLiteralsLess, ANTLR_USE_NAMESPACE(std)allocator<
ANTLR_USE_NAMESPACE(std)pair< const ANTLR_USE_NAMESPACE(std)string, int
> >,false > >;
  template class  ANTLR_API ANTLR_USE_NAMESPACE(std)_Tree<
ANTLR_USE_NAMESPACE(std)_Tmap_traits< ANTLR_USE_NAMESPACE(std)string,
int, CharScannerLiteralsLess, ANTLR_USE_NAMESPACE(std)allocator<
ANTLR_USE_NAMESPACE(std)pair< const ANTLR_USE_NAMESPACE(std)string, int
> >,false > >;
  template class  ANTLR_API ANTLR_USE_NAMESPACE(std)map<
ANTLR_USE_NAMESPACE(std)string, int, CharScannerLiteralsLess >;
#endif

Is it possible to move these all in one file like dll.cpp ? Or are these
explicit template instantiations needed in their header files ? I'd be
inclined to think they can be moved. Which would allow moving all the
MSVC
cruft in one file.

Question aside:

To fix the quoting change the method textOrChar in CppCodeGenerator.java
to:

private String textOrChar(String text) {
	// check to see if the text is a single character
	if (text.startsWith("'")) {
		// assume it also ends with '
		return
charFormatter.literalChar(ANTLRLexer.tokenTypeForCharLiteral(text));
	}
	else
	{
		// must be string literal strip of the quotes so
		// they won't get quoted
		return
"\""+charFormatter.escapeString(StringUtils.stripFrontBack(text,"\"","\""))+"\"";
	}
}

Did you by any chance see where the invalid sign extension happened? Or
do
you have a small example lexer+input file that triggers this ?

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Xander: "Buffy, we need to do something *now*"
  Angel: "We need a distraction."
  Buffy: "Right."
  Angel: "What are you going to do?"
  Buffy: "I'm going to kill them all. That oughtta distract 'em..."


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ilkerpasa135 at yahoo.com  Fri Oct  3 05:55:29 2003
From: ilkerpasa135 at yahoo.com (ilkerpasa135)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] Is there a good tutorial on predicates, imaginary nodes & AST.
Message-ID: <bljrk1+3aps@eGroups.com>


I'm a newbei, but it seems we need a good tutorial on;
  -predicates (Semantic and Syntactic),
  -user Tokens,
  -imaginary nodes (not 100% clear on what this really means),
  -and their use in conjunction with ASTs.

Is there one. Or does one has to study long and hard Monty's gcc 
conversion tool to have some idea?

I beleive gurus on antlr, can put one together rather easily and 
quickly.
My 2 cents.

--Ilker


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Jim.OConnor at microfocus.com  Fri Oct  3 06:56:30 2003
From: Jim.OConnor at microfocus.com (Jim O'Connor)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] analysing java source code
Message-ID: <3AC103F1B7EEEC48A855ACB1D2819E910209D731@rock-corpmail.microfocus.com>

The refs.g and defs.g need to be "Tool"ed with the option "-glib
java.tree.g".  Defs.g and refs.g are subgrammars of the super grammar in
java.tree.g.

-----Original Message-----
From: Suma Venkatesh [mailto:sumav_99@yahoo.com]
Sent: Friday, October 03, 2003 3:28 AM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] analysing java source code


Hi
  Jim/Terrance

  In the cross reference tool i tried to compile refs.g and defs.g but i get
an error
Java Tree parser not defined.what should i do about this ?
any suggestios ?

thanks,
suma


__________________________________
Do you Yahoo!?
The New Yahoo! Shopping - with improved product search
http://shopping.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 



________________________________________________________________________
This e-mail has been scanned for viruses by MCI's Internet Managed Scanning
Services - powered by MessageLabs. For further information visit
http://www.mci.com
________________________________________________________________________

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Jim.OConnor at microfocus.com  Fri Oct  3 07:13:19 2003
From: Jim.OConnor at microfocus.com (Jim O'Connor)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] analysing java source code
Message-ID: <3AC103F1B7EEEC48A855ACB1D2819E910209D747@rock-corpmail.microfocus.com>

Hi Suma,
  The Cross Reference Tool is very raw.  I have been working for the past
month to enhance its recognition.  It will be "more approachable" when I get
done with it.

More approachable
	1. Users have different needs.  Holes will be left to "plug in"
different end results (see refMethod() in CodeProject.java).
	2. A few examples, documentation and a "how to" would be helpful.

  I see all this being accomplished in about three months, real time. 

The obfuscator could be more or less complicated, depending on how much you
plan to do.  It will be more complicated, if you plan on using the Cross
reference information.  If you know all the files in the project, and just
mangle consistantly, you just need a translator.

"Mangle consistantly"
even characters and odd characters

voltage => otgvlae
volume  => ouevlm

"name consistantly"
cross reference information necessary to find all voltage reference and
change them to v1

voltage => v1
volume => v2
etc...


Jim

-----Original Message-----
From: Suma Venkatesh [mailto:sumav_99@yahoo.com]
Sent: Friday, October 03, 2003 1:47 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] analysing java source code


Hi
  Jim,

  Thank you so much for the help.I now kind of understand java.g,java.tree.g
and main
classes.I can now display the variable, types and methods etc..
My next task is to change the names of the variables into less meaningfull
ones like if
variable name is voltage,it should become v1 and so on.
I tried to experiment with the cross refererence tool.But i get compiler
errors and also
i dodnt understand how to use it to acheive my task.

Can u help me on this ??

thanks in advance,
suma
--- Jim O'Connor <Jim.OConnor@microfocus.com> wrote:
>  Hi Suma,
>   I assume you can "Tool" a grammar using antlr.  I assume you understand
> the role of the Main.java file in "running" the grammar.   If you don't
> understand either of those, I would recommend going to the getting started
> section of antlr.org.
>   The printing of the variables and types for a java file should be half
> hour exercise (being generous), assuming you already have java.g,
> java.tree.g, and Main.java cranked up.
> 
> Steps
> 1. Tool java.g
> 2. Tool java.tree.g
> 3.  compile all the *.java files, including Main.java.
> 4.  Execute Main.java given an input file.
>          I don't think it will output anything - no actions!
> 5.  To get your types and variables look at java.tree.g
> 
> variableDef
> 	:	#(VARIABLE_DEF modifiers typeSpec variableDeclarator
> varInitializer)
> 	;
> 
> variableDeclarator
> 	:	IDENT
> 	|	LBRACK variableDeclarator
> 	;
> 
> This section of the world should be very interesting to you.  Rip off some
> print methods from other grammars and you're set.
> 
> 
> The obfuscator, minimally,  is a translator that wants to make everything
> less readable, rather than more.  I haven't looked for translators, but
> there are people here that have opinions/expertise on those.
> 
> I am working on the Java Cross Referencing Tool.  The obfuscator would
want
> to know this type of information to make consistant changes. 
> 
> Hope that helps.
> 
> Jim
> 
>   
> 
> -----Original Message-----
> From: Suma Venkatesh
> To: antlr-interest@yahoogroups.com
> Sent: 10/1/03 6:14 PM
> Subject: Re: [antlr-interest] analysing java source code
> 
> Hi
>   Terence,
> 
>  I did look into that already but can you please give me some tips on
> how to run it and
> use it to achieve my task.I mean read a java file parse it and print
> variables and their
> types.some small sample will do for me.I need to start from here and
> later learn to
> analyse entire java code like control constructs etc.Our main idea is to
> build an
> obfuscation tool kit for java programs using antlr.
> 
> 
> thanks in advance,
> suma
> 
> 
> --- Terence Parr <parrt@antlr.org> wrote:
> > See the cross referencing headstart in the file sharing area.
> > 
> > Terence
> > On Wednesday, October 1, 2003, at 10:01 AM, Suma Venkatesh wrote:
> > 
> > > Hi,
> > >
> > >   Iam looking for  parsing which can parse an input java source
> code.I 
> > > mean the parser
> > > should read the source code and identify the variable names and
> types 
> > > and control
> > > structures.I saw java.g example of antlr.But can anyone help me on
> how 
> > > to use that for
> > > getting specific results like below.ALso it should the read from an 
> > > input file ,parse it
> > > and write the output in a file.
> > >
> > > Eg: Input is :
> > >   import java.util.*;
> > >
> > > public class HelloWorld{
> > >
> > > public static void main(String args[]) {
> > >
> > > String message = "Hello World";
> > > int count =0;
> > >
> > > 	while(count <10) {
> > >              System.out.println(message);
> > >              count++;
> > >         }
> > >
> > > }
> > >
> > > Output should be :
> > >
> > > Variables: type name
> > >            int  count
> > >            String message
> > >
> > > Can ANTLR do this and if so how ??
> > >
> > > PLEASE HELP ME!!
> > >
> > > thanks in advance,
> > > suma
> > >
> > >
> > >
> > > __________________________________
> > > Do you Yahoo!?
> > > The New Yahoo! Shopping - with improved product search
> > > http://shopping.yahoo.com
> > >
> > >
> > >
> > > Your use of Yahoo! Groups is subject to 
> > > http://docs.yahoo.com/info/terms/
> > >
> > >
> > >
> > --
> > Professor Comp. Sci., University of San Francisco
> > Creator, ANTLR Parser Generator, http://www.antlr.org
> > Co-founder, http://www.jguru.com
> > Co-founder, http://www.knowspam.net enjoy email again!
> > Co-founder, http://www.peerscope.com pure link sharing
> > 
> > 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
> 
> __________________________________
> Do you Yahoo!?
> The New Yahoo! Shopping - with improved product search
> http://shopping.yahoo.com
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 
> ________________________________________________________________________
> This e-mail has been scanned for viruses by MCI's Internet Managed
> Scanning Services - powered by MessageLabs. For further information
> visit http://www.mci.com
> ________________________________________________________________________
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
The New Yahoo! Shopping - with improved product search
http://shopping.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 



________________________________________________________________________
This e-mail has been scanned for viruses by MCI's Internet Managed Scanning
Services - powered by MessageLabs. For further information visit
http://www.mci.com
________________________________________________________________________

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri Oct  3 08:13:53 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] Is there a good tutorial on predicates, imag
	inary nodes & AST.
Message-ID: <72C9789739C4214096AE945753B11EA36B1F06@mypxmail04.bco-home.com>

It's gotta be covered in Ter's latest tutorials for his class.  Have you
looked through those?

Monty

-----Original Message-----
From: ilkerpasa135 [mailto:ilkerpasa135@yahoo.com] 
Sent: Friday, October 03, 2003 5:55 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Is there a good tutorial on predicates, imaginary
nodes & AST.


I'm a newbei, but it seems we need a good tutorial on;
  -predicates (Semantic and Syntactic),
  -user Tokens,
  -imaginary nodes (not 100% clear on what this really means),
  -and their use in conjunction with ASTs.

Is there one. Or does one has to study long and hard Monty's gcc 
conversion tool to have some idea?

I beleive gurus on antlr, can put one together rather easily and 
quickly.
My 2 cents.

--Ilker


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri Oct  3 08:33:21 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] Need help for grammar of TL1 (a language use
	d in North America in Telecom)
Message-ID: <72C9789739C4214096AE945753B11EA36B1F08@mypxmail04.bco-home.com>

You've got some serious ambiguities there.  I would recommend maybe using
lexer states or a parser filter as I've outlined at
http://www.codetransform.com/filterexample.html

Also read Ter's lecture on lexers.  Actually read them all, it's worth it.
Should be prominently available from the antlr.org home page.

Monty

-----Original Message-----
From: ilkerpasa135 [mailto:ilkerpasa135@yahoo.com] 
Sent: Thursday, October 02, 2003 4:17 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Need help for grammar of TL1 (a language used in
North America in Telecom)

I'm new to antlr. And trying to learn antlr and prepare the grammar 
for TL1, a language used in North America for all Telecom equipment. 
Hence when I get it, it could be an interesting addition to antlr 
grammars.

Of course since I'm a newbei, when I run the following grammar I get 
many nondeterminism warnings, basically all over the place.

Past couple of days (not full time tough), I went through antlr 
tutorials, documents, etc , but obviously I haven't gotten it and 
need help. Hence any help is appreciated.

Here is what the TL1 command structure is like;
 VERB-modifier1-modifier2 : TID:AID:CTAG: : NAME=VALUE,NAME=VALUE ;
 VERB-modifier1-modifier2 : TID:AID:CTAG: : VALUE,VALUE ;
 Following are some TL1 command examples;
   ENT-EQPT-OC3:TID1:1-1-#-#-3:ctag123::attrib1=123,attrib2=456;
   ENT-EQPT-OC1:TID1:1-1-#-#-3:ctag123::123,456;


Here is the grammar that I have;

class TL1Parser extends Parser;
options { buildAST=true; }

// first just get TL1command grammar working
//tl1Message       : tl1Command | tl1Acknow | tl1Response | tl1Auto;
tl1Message       : tl1Command;

tl1Command       : (command_code DOUBL^ staging_blocks (DOUBL^ 
payload_blocks)?) SEMI!;

command_code     : VERB (DASH^ modifier1 (DASH^ modifier2)?)?;
modifier1        : NAME;
modifier2        : NAME;

staging_blocks   : TID DOUBL^ AID DOUBL^ CTAG (DOUBL^ general_block)?;
// general_block could be improved
general_block    : NAME;

payload_blocks   : data_block_list (DOUBL^ data_block_list)*;
data_block_list  : data_block (COMMA^ data_block)*;
data_block       : data_block_positional | data_block_named;
data_block_positional : VALUE (COMMA^ VALUE)*;
data_block_named : (NAME EQUAL^ VALUE) (COMMA^ (NAME EQUAL^ VALUE))*;



class TL1Lexer extends Lexer;

AID   : ('a'..'z'|'A'..'Z'|'0'..'9'|'.'|'-'|'_'|'/'|'#')+;
CTAG  : ('a'..'z'|'A'..'Z'|'0'..'9')+;
NAME  : ('a'..'z'|'A'..'Z'|'0'..'9')+;
TID   : ('a'..'z'|'A'..'Z'|'0'..'9'|'.'|'-'|'_'|'/')+;
VALUE : ('a'..'z'|'A'..'Z'|'0'..'9')+;
VERB  : ('a'..'z'|'A'..'Z')+;

COMMA : ',';
DASH  : '-';
DOUBL : ':';
EQUAL : '=';
SEMI  : ';';

WS    : (' ' | '\t'
         | '\r' '\n' { newline(); }
         | '\n'      { newline(); }
        ) 
          { $setType(Token.SKIP); };



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ilkerpasa135 at yahoo.com  Fri Oct  3 08:55:46 2003
From: ilkerpasa135 at yahoo.com (ilkerpasa135)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] Re: Is there a good tutorial on predicates, imag inary nodes & AST.
In-Reply-To: <72C9789739C4214096AE945753B11EA36B1F06@mypxmail04.bco-home.com>
Message-ID: <blk662+m5re@eGroups.com>

Monty,

Yes I looked (though it is still possible that I missed it).
Hence, my comment remains.
-- ilker


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> It's gotta be covered in Ter's latest tutorials for his class.  
Have you
> looked through those?
> 
> Monty
> 
> -----Original Message-----
> From: ilkerpasa135 [mailto:ilkerpasa135@y...] 
> Sent: Friday, October 03, 2003 5:55 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Is there a good tutorial on predicates, 
imaginary
> nodes & AST.
> 
> 
> I'm a newbei, but it seems we need a good tutorial on;
>   -predicates (Semantic and Syntactic),
>   -user Tokens,
>   -imaginary nodes (not 100% clear on what this really means),
>   -and their use in conjunction with ASTs.
> 
> Is there one. Or does one has to study long and hard Monty's gcc 
> conversion tool to have some idea?
> 
> I beleive gurus on antlr, can put one together rather easily and 
> quickly.
> My 2 cents.
> 
> --Ilker
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ilkerpasa135 at yahoo.com  Fri Oct  3 09:00:38 2003
From: ilkerpasa135 at yahoo.com (ilkerpasa135)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] Re: Need help for grammar of TL1 (a language use d in North America in Telecom)
In-Reply-To: <72C9789739C4214096AE945753B11EA36B1F08@mypxmail04.bco-home.com>
Message-ID: <blk6f6+k7ou@eGroups.com>


Hello Monty,

I had missed your filter example, which I'm starting to read now.

I thought I read Ter's Lexer class notes, but I'll read it again too.

And will get back after that.

-- ilker


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> You've got some serious ambiguities there.  I would recommend maybe 
using
> lexer states or a parser filter as I've outlined at
> http://www.codetransform.com/filterexample.html
> 
> Also read Ter's lecture on lexers.  Actually read them all, it's 
worth it.
> Should be prominently available from the antlr.org home page.
> 
> Monty
> 
> -----Original Message-----
> From: ilkerpasa135 [mailto:ilkerpasa135@y...] 
> Sent: Thursday, October 02, 2003 4:17 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Need help for grammar of TL1 (a language 
used in
> North America in Telecom)
> 
> I'm new to antlr. And trying to learn antlr and prepare the grammar 
> for TL1, a language used in North America for all Telecom 
equipment. 
> Hence when I get it, it could be an interesting addition to antlr 
> grammars.
> 
> Of course since I'm a newbei, when I run the following grammar I 
get 
> many nondeterminism warnings, basically all over the place.
> 
> Past couple of days (not full time tough), I went through antlr 
> tutorials, documents, etc , but obviously I haven't gotten it and 
> need help. Hence any help is appreciated.
> 
> Here is what the TL1 command structure is like;
>  VERB-modifier1-modifier2 : TID:AID:CTAG: : NAME=VALUE,NAME=VALUE ;
>  VERB-modifier1-modifier2 : TID:AID:CTAG: : VALUE,VALUE ;
>  Following are some TL1 command examples;
>    ENT-EQPT-OC3:TID1:1-1-#-#-3:ctag123::attrib1=123,attrib2=456;
>    ENT-EQPT-OC1:TID1:1-1-#-#-3:ctag123::123,456;
> 
> 
> Here is the grammar that I have;
> 
> class TL1Parser extends Parser;
> options { buildAST=true; }
> 
> // first just get TL1command grammar working
> //tl1Message       : tl1Command | tl1Acknow | tl1Response | tl1Auto;
> tl1Message       : tl1Command;
> 
> tl1Command       : (command_code DOUBL^ staging_blocks (DOUBL^ 
> payload_blocks)?) SEMI!;
> 
> command_code     : VERB (DASH^ modifier1 (DASH^ modifier2)?)?;
> modifier1        : NAME;
> modifier2        : NAME;
> 
> staging_blocks   : TID DOUBL^ AID DOUBL^ CTAG (DOUBL^ 
general_block)?;
> // general_block could be improved
> general_block    : NAME;
> 
> payload_blocks   : data_block_list (DOUBL^ data_block_list)*;
> data_block_list  : data_block (COMMA^ data_block)*;
> data_block       : data_block_positional | data_block_named;
> data_block_positional : VALUE (COMMA^ VALUE)*;
> data_block_named : (NAME EQUAL^ VALUE) (COMMA^ (NAME EQUAL^ VALUE))
*;
> 
> 
> 
> class TL1Lexer extends Lexer;
> 
> AID   : ('a'..'z'|'A'..'Z'|'0'..'9'|'.'|'-'|'_'|'/'|'#')+;
> CTAG  : ('a'..'z'|'A'..'Z'|'0'..'9')+;
> NAME  : ('a'..'z'|'A'..'Z'|'0'..'9')+;
> TID   : ('a'..'z'|'A'..'Z'|'0'..'9'|'.'|'-'|'_'|'/')+;
> VALUE : ('a'..'z'|'A'..'Z'|'0'..'9')+;
> VERB  : ('a'..'z'|'A'..'Z')+;
> 
> COMMA : ',';
> DASH  : '-';
> DOUBL : ':';
> EQUAL : '=';
> SEMI  : ';';
> 
> WS    : (' ' | '\t'
>          | '\r' '\n' { newline(); }
>          | '\n'      { newline(); }
>         ) 
>           { $setType(Token.SKIP); };
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri Oct  3 09:27:17 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] Re: Need help for grammar of TL1 (a language
	 use d in North America in Telecom)
Message-ID: <72C9789739C4214096AE945753B11EA36B1F0E@mypxmail04.bco-home.com>

By the way, I'm available for small contracts like getting this to work.  10
of my hours will save you a week or two of your own if you are new to antlr,
plus I'll be teaching you exactly what you need to know.  I mentor,
troubleshoot, design and educate.

Actually it's what I do on the mailing list except I go deeper and dedicate
more than 10 minutes per question :)

Anyhow, contact me via my website if you need my services.  

Monty

http://www.codetransform.com



-----Original Message-----
From: ilkerpasa135 [mailto:ilkerpasa135@yahoo.com] 
Sent: Friday, October 03, 2003 9:01 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Need help for grammar of TL1 (a language use d
in North America in Telecom)


Hello Monty,

I had missed your filter example, which I'm starting to read now.

I thought I read Ter's Lexer class notes, but I'll read it again too.

And will get back after that.

-- ilker


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> You've got some serious ambiguities there.  I would recommend maybe 
using
> lexer states or a parser filter as I've outlined at
> http://www.codetransform.com/filterexample.html
> 
> Also read Ter's lecture on lexers.  Actually read them all, it's 
worth it.
> Should be prominently available from the antlr.org home page.
> 
> Monty
> 
> -----Original Message-----
> From: ilkerpasa135 [mailto:ilkerpasa135@y...] 
> Sent: Thursday, October 02, 2003 4:17 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Need help for grammar of TL1 (a language 
used in
> North America in Telecom)
> 
> I'm new to antlr. And trying to learn antlr and prepare the grammar 
> for TL1, a language used in North America for all Telecom 
equipment. 
> Hence when I get it, it could be an interesting addition to antlr 
> grammars.
> 
> Of course since I'm a newbei, when I run the following grammar I 
get 
> many nondeterminism warnings, basically all over the place.
> 
> Past couple of days (not full time tough), I went through antlr 
> tutorials, documents, etc , but obviously I haven't gotten it and 
> need help. Hence any help is appreciated.
> 
> Here is what the TL1 command structure is like;
>  VERB-modifier1-modifier2 : TID:AID:CTAG: : NAME=VALUE,NAME=VALUE ;
>  VERB-modifier1-modifier2 : TID:AID:CTAG: : VALUE,VALUE ;
>  Following are some TL1 command examples;
>    ENT-EQPT-OC3:TID1:1-1-#-#-3:ctag123::attrib1=123,attrib2=456;
>    ENT-EQPT-OC1:TID1:1-1-#-#-3:ctag123::123,456;
> 
> 
> Here is the grammar that I have;
> 
> class TL1Parser extends Parser;
> options { buildAST=true; }
> 
> // first just get TL1command grammar working
> //tl1Message       : tl1Command | tl1Acknow | tl1Response | tl1Auto;
> tl1Message       : tl1Command;
> 
> tl1Command       : (command_code DOUBL^ staging_blocks (DOUBL^ 
> payload_blocks)?) SEMI!;
> 
> command_code     : VERB (DASH^ modifier1 (DASH^ modifier2)?)?;
> modifier1        : NAME;
> modifier2        : NAME;
> 
> staging_blocks   : TID DOUBL^ AID DOUBL^ CTAG (DOUBL^ 
general_block)?;
> // general_block could be improved
> general_block    : NAME;
> 
> payload_blocks   : data_block_list (DOUBL^ data_block_list)*;
> data_block_list  : data_block (COMMA^ data_block)*;
> data_block       : data_block_positional | data_block_named;
> data_block_positional : VALUE (COMMA^ VALUE)*;
> data_block_named : (NAME EQUAL^ VALUE) (COMMA^ (NAME EQUAL^ VALUE))
*;
> 
> 
> 
> class TL1Lexer extends Lexer;
> 
> AID   : ('a'..'z'|'A'..'Z'|'0'..'9'|'.'|'-'|'_'|'/'|'#')+;
> CTAG  : ('a'..'z'|'A'..'Z'|'0'..'9')+;
> NAME  : ('a'..'z'|'A'..'Z'|'0'..'9')+;
> TID   : ('a'..'z'|'A'..'Z'|'0'..'9'|'.'|'-'|'_'|'/')+;
> VALUE : ('a'..'z'|'A'..'Z'|'0'..'9')+;
> VERB  : ('a'..'z'|'A'..'Z')+;
> 
> COMMA : ',';
> DASH  : '-';
> DOUBL : ':';
> EQUAL : '=';
> SEMI  : ';';
> 
> WS    : (' ' | '\t'
>          | '\r' '\n' { newline(); }
>          | '\n'      { newline(); }
>         ) 
>           { $setType(Token.SKIP); };
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pfhmks0 at yahoo.com  Fri Oct  3 10:41:40 2003
From: pfhmks0 at yahoo.com (pfhmks0)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] Re: VC 7.0 antlr.dll to special ATTN of Ric Klaren and Terence Parr
In-Reply-To: <000d01c2d0d9$05ebdf20$ad46f5cf@i7k>
Message-ID: <blkcck+f441@eGroups.com>

Hi,

   How do I get this version?  The attachment is empty.  Thanks in 
advance.

- msingh

--- In antlr-interest@yahoogroups.com, "Alexander Lenski" 
<alenski@d...> wrote:
> (Sorry, this is a second trial. The first one did not get through: 
attachment is too big.)
> Hi,
> Enjoy the dll in the VC 7.0 environment.
> 
> Attachments:
>   - Notes.txt:        how to; requests (Ric, Terence read it 
please).
>   - antlr-2.7.2.zip:  just the lib\cpp\antlr and lib\cpp\src 
subdirs.
>   - lib.zip:             antlr.lib:           import library to 
link with your code (debug build) ,
>                           antlr.dll:           DLL (debug build),
>                           antlr.pdb          symbols.
> 
> Alexander Lenski
> 
> 1. Notes for the ANTLR DLL target ( MSVC 7.0, Unmanaged DLL ) by 
Alexander Lenski:
> 
> 1.1 Project settings ("create new project" dialogs)
>       - Win32 project
>         - Application Settings
>           - Application type
>             - DLL
>           - Additional options
>             - Export symbols
> 1.2 Project properties (change defaults to)
>       - Configuration Properties
>         - C/C++
>           - General
>             - Additional Include Directories
>               - drive:\antlr-2.7.2\lib\cpp
>           - Preprocessor
>             - Preprocessor Definitions
>               - 
WIN32;_DEBUG;_WINDOWS;_USRDLL;ANTLR_EXPORTS;ANTLR_CXX_SUPPORTS_NAMESP
ACE
>             - Code Generation
>               - Runtime Library
>                 - Multi-threaded Debug DLL (/MDd)
>               - Enable Function-Level Linking:
>                 - Yes
>             - Language
>               - Enable Run-Time Type Info
>                 - Yes
>             - Precompiled Headers
>               - Create/Use Precompiled Headers
>                 - Not Using Precompiled Headers
>         
> 1.3 Some notes on the code change related to the DLL export
>       - See the ASTFactory.hpp for the factory_type, 
factory_descriptor
>         and factory_descriptor_list related defs.
>       - SemanticException.hpp is not included in any of the antlr 
files,
>         the SemanticException is not exported. I added the include
>         in the CharScaner.hpp.
>       - ParserInputState::~ParserInputState must be virtual to be 
properly
>         exported.
>       - Check files (e.g. with the WinDiff) for details and other 
changes.
>       
> 2 Requests by Alexander Lenski
>       - Please, (as a min) add the
>           //!!!
>           //Get number of non-consumed tokens:
>           public:
>           virtual  unsigned int entries() const;
>         with the
>           //!!!
>           //Get number of non-consumed tokens:
>           unsigned int TokenBuffer::entries() const
>           { return queue.entries() - markerOffset;
>           }
>         highly useful function to the TokenBuffer.
>         Please, in addition (as a max) make all data members of the
>         TokenBuffer protected (as it is done with the InputBuffer)
>         instead of private, add the
>           //!!!
>           //Get number of non-consumed chars:
>           public:
>           virtual  unsigned int entries() const;
>           with the
>           //!!!
>           //Get number of non-consumed chars:
>           unsigned int InputBuffer::entries() const
>           { return queue.entries() - markerOffset;
>           }
>         to the InputBuffer too.
>         These changes make specialization of the buffers possible.
>       - About the ! suffix (currently not implemented in full) for 
AST
>         construction rules
>         - Please, clarify your intentions related to the !.
>       - Please, consider addition of one more option for the C++ 
code gen to set
>         DLL export/import customizable spec in all antlr-generated 
classes in the form
>           class CUST_API SomeClass...


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Fri Oct  3 10:55:52 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] Re: VC 7.0 antlr.dll to special ATTN of Ric Klaren and Terence Parr
In-Reply-To: <blkcck+f441@eGroups.com>
Message-ID: <000301c389d7$95f59720$1bc8090a@oddi.is>

Hi..

Following is my earlier post today, the ANTLR version I used is at
http://wwwhome.cs.utwente.nl/~klaren/antlr/antlr-20030911.tar.gz

I attached my debug versions of antlr.lib, antlr.dll and antlr.pdb. If
you like, I could send you the Release build as well.

Arnar

My earlier post:

For future reference, here's how I built the ANTLR dll with MSVC 7.0,
based on Ric's modified ANTLR 2.7.3-20030911 (this is a little different
from the README):

1. Create new "Win32 Project"
2. In the creation wizard, under "Application Settings", check DLL as
application type and "Empty project" in "Additional Options"
3. Insert all *.cpp files from lib/cpp/src and *.hpp from lib/cpp/antlr
to your project.
4. Make these changes in Project properties:
    - Configuration Properties
      - C/C++
        - General
          - Additinal Include Directories: drive:\path-to-antlr\lib\cpp
        - Preprocessor
          - Preprocessor Definitions:
 
WIN32;NDEBUG;_WINDOWS;_USRDLL;ANTLR_EXPORTS;ANTLR_CXX_SUPPORTS_NAMESPACE
              ( change _DEBUG to NDEBUG in release build)
        - Code generation
          - Runtime Library: Multi-threaded Debug DLL  (Skip "debug" in
release build)
          - Enable Function-level Linking: Yes
        - Language
          - Default Char Unsigned: Yes
        - Create/Use Precompiled Header: Not using precompiled header
5. Compile

In your project, where you use ANTLR from, you need to select the same
Runtime Library, and define ANTLR_IMPORTS and
ANTLR_CXX_SUPPORTS_NAMESPACE.

> -----Original Message-----
> From: pfhmks0 [mailto:pfhmks0@yahoo.com] 
> Sent: 3. okt?ber 2003 17:42
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: VC 7.0 antlr.dll to special 
> ATTN of Ric Klaren and Terence Parr
> 
> 
> Hi,
> 
>    How do I get this version?  The attachment is empty.  Thanks in 
> advance.
> 
> - msingh
> 
> --- In antlr-interest@yahoogroups.com, "Alexander Lenski" 
> <alenski@d...> wrote:
> > (Sorry, this is a second trial. The first one did not get through: 
> attachment is too big.)
> > Hi,
> > Enjoy the dll in the VC 7.0 environment.
> > 
> > Attachments:
> >   - Notes.txt:        how to; requests (Ric, Terence read it 
> please).
> >   - antlr-2.7.2.zip:  just the lib\cpp\antlr and lib\cpp\src 
> subdirs.
> >   - lib.zip:             antlr.lib:           import library to 
> link with your code (debug build) ,
> >                           antlr.dll:           DLL (debug build),
> >                           antlr.pdb          symbols.
> > 
> > Alexander Lenski
> > 
> > 1. Notes for the ANTLR DLL target ( MSVC 7.0, Unmanaged DLL ) by 
> Alexander Lenski:
> > 
> > 1.1 Project settings ("create new project" dialogs)
> >       - Win32 project
> >         - Application Settings
> >           - Application type
> >             - DLL
> >           - Additional options
> >             - Export symbols
> > 1.2 Project properties (change defaults to)
> >       - Configuration Properties
> >         - C/C++
> >           - General
> >             - Additional Include Directories
> >               - drive:\antlr-2.7.2\lib\cpp
> >           - Preprocessor
> >             - Preprocessor Definitions
> >               - 
> WIN32;_DEBUG;_WINDOWS;_USRDLL;ANTLR_EXPORTS;ANTLR_CXX_SUPPORTS_NAMESP
> ACE
> >             - Code Generation
> >               - Runtime Library
> >                 - Multi-threaded Debug DLL (/MDd)
> >               - Enable Function-Level Linking:
> >                 - Yes
> >             - Language
> >               - Enable Run-Time Type Info
> >                 - Yes
> >             - Precompiled Headers
> >               - Create/Use Precompiled Headers
> >                 - Not Using Precompiled Headers
> >         
> > 1.3 Some notes on the code change related to the DLL export
> >       - See the ASTFactory.hpp for the factory_type, 
> factory_descriptor
> >         and factory_descriptor_list related defs.
> >       - SemanticException.hpp is not included in any of the antlr 
> files,
> >         the SemanticException is not exported. I added the include
> >         in the CharScaner.hpp.
> >       - ParserInputState::~ParserInputState must be virtual to be 
> properly
> >         exported.
> >       - Check files (e.g. with the WinDiff) for details and other 
> changes.
> >       
> > 2 Requests by Alexander Lenski
> >       - Please, (as a min) add the
> >           //!!!
> >           //Get number of non-consumed tokens:
> >           public:
> >           virtual  unsigned int entries() const;
> >         with the
> >           //!!!
> >           //Get number of non-consumed tokens:
> >           unsigned int TokenBuffer::entries() const
> >           { return queue.entries() - markerOffset;
> >           }
> >         highly useful function to the TokenBuffer.
> >         Please, in addition (as a max) make all data members of the
> >         TokenBuffer protected (as it is done with the InputBuffer)
> >         instead of private, add the
> >           //!!!
> >           //Get number of non-consumed chars:
> >           public:
> >           virtual  unsigned int entries() const;
> >           with the
> >           //!!!
> >           //Get number of non-consumed chars:
> >           unsigned int InputBuffer::entries() const
> >           { return queue.entries() - markerOffset;
> >           }
> >         to the InputBuffer too.
> >         These changes make specialization of the buffers possible.
> >       - About the ! suffix (currently not implemented in full) for 
> AST
> >         construction rules
> >         - Please, clarify your intentions related to the !.
> >       - Please, consider addition of one more option for the C++ 
> code gen to set
> >         DLL export/import customizable spec in all antlr-generated 
> classes in the form
> >           class CUST_API SomeClass...
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: antlr_dll-debug-20030911.zip
Type: application/x-zip-compressed
Size: 530872 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20031003/88c7df01/antlr_dll-debug-20030911.bin
From pfhmks0 at yahoo.com  Fri Oct  3 11:06:50 2003
From: pfhmks0 at yahoo.com (pfhmks0)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] Re: VC 7.0 antlr.dll to special ATTN of Ric Klaren and Terence Parr
In-Reply-To: <000301c389d7$95f59720$1bc8090a@oddi.is>
Message-ID: <blkdrq+pm7k@eGroups.com>

Arnar,

Thanks! I would appreciate if you can send the release build as 

well.

- Msingh

--- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
<arnarb@o...> wrote:
> Hi..
> 
> Following is my earlier post today, the ANTLR version I used is at
> http://wwwhome.cs.utwente.nl/~klaren/antlr/antlr-20030911.tar.gz
> 
> I attached my debug versions of antlr.lib, antlr.dll and 
antlr.pdb. If
> you like, I could send you the Release build as well.
> 
> Arnar
> 
> My earlier post:
> 
> For future reference, here's how I built the ANTLR dll with MSVC 
7.0,
> based on Ric's modified ANTLR 2.7.3-20030911 (this is a little 
different
> from the README):
> 
> 1. Create new "Win32 Project"
> 2. In the creation wizard, under "Application Settings", check DLL 
as
> application type and "Empty project" in "Additional Options"
> 3. Insert all *.cpp files from lib/cpp/src and *.hpp from 
lib/cpp/antlr
> to your project.
> 4. Make these changes in Project properties:
>     - Configuration Properties
>       - C/C++
>         - General
>           - Additinal Include Directories: drive:\path-to-
antlr\lib\cpp
>         - Preprocessor
>           - Preprocessor Definitions:
>  
> 
WIN32;NDEBUG;_WINDOWS;_USRDLL;ANTLR_EXPORTS;ANTLR_CXX_SUPPORTS_NAMESP
ACE
>               ( change _DEBUG to NDEBUG in release build)
>         - Code generation
>           - Runtime Library: Multi-threaded Debug DLL  
(Skip "debug" in
> release build)
>           - Enable Function-level Linking: Yes
>         - Language
>           - Default Char Unsigned: Yes
>         - Create/Use Precompiled Header: Not using precompiled 
header
> 5. Compile
> 
> In your project, where you use ANTLR from, you need to select the 
same
> Runtime Library, and define ANTLR_IMPORTS and
> ANTLR_CXX_SUPPORTS_NAMESPACE.
> 
> > -----Original Message-----
> > From: pfhmks0 [mailto:pfhmks0@y...] 
> > Sent: 3. okt?ber 2003 17:42
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Re: VC 7.0 antlr.dll to special 
> > ATTN of Ric Klaren and Terence Parr
> > 
> > 
> > Hi,
> > 
> >    How do I get this version?  The attachment is empty.  Thanks 
in 
> > advance.
> > 
> > - msingh
> > 
> > --- In antlr-interest@yahoogroups.com, "Alexander Lenski" 
> > <alenski@d...> wrote:
> > > (Sorry, this is a second trial. The first one did not get 
through: 
> > attachment is too big.)
> > > Hi,
> > > Enjoy the dll in the VC 7.0 environment.
> > > 
> > > Attachments:
> > >   - Notes.txt:        how to; requests (Ric, Terence read it 
> > please).
> > >   - antlr-2.7.2.zip:  just the lib\cpp\antlr and lib\cpp\src 
> > subdirs.
> > >   - lib.zip:             antlr.lib:           import library 
to 
> > link with your code (debug build) ,
> > >                           antlr.dll:           DLL (debug 
build),
> > >                           antlr.pdb          symbols.
> > > 
> > > Alexander Lenski
> > > 
> > > 1. Notes for the ANTLR DLL target ( MSVC 7.0, Unmanaged DLL ) 
by 
> > Alexander Lenski:
> > > 
> > > 1.1 Project settings ("create new project" dialogs)
> > >       - Win32 project
> > >         - Application Settings
> > >           - Application type
> > >             - DLL
> > >           - Additional options
> > >             - Export symbols
> > > 1.2 Project properties (change defaults to)
> > >       - Configuration Properties
> > >         - C/C++
> > >           - General
> > >             - Additional Include Directories
> > >               - drive:\antlr-2.7.2\lib\cpp
> > >           - Preprocessor
> > >             - Preprocessor Definitions
> > >               - 
> > 
WIN32;_DEBUG;_WINDOWS;_USRDLL;ANTLR_EXPORTS;ANTLR_CXX_SUPPORTS_NAMESP
> > ACE
> > >             - Code Generation
> > >               - Runtime Library
> > >                 - Multi-threaded Debug DLL (/MDd)
> > >               - Enable Function-Level Linking:
> > >                 - Yes
> > >             - Language
> > >               - Enable Run-Time Type Info
> > >                 - Yes
> > >             - Precompiled Headers
> > >               - Create/Use Precompiled Headers
> > >                 - Not Using Precompiled Headers
> > >         
> > > 1.3 Some notes on the code change related to the DLL export
> > >       - See the ASTFactory.hpp for the factory_type, 
> > factory_descriptor
> > >         and factory_descriptor_list related defs.
> > >       - SemanticException.hpp is not included in any of the 
antlr 
> > files,
> > >         the SemanticException is not exported. I added the 
include
> > >         in the CharScaner.hpp.
> > >       - ParserInputState::~ParserInputState must be virtual to 
be 
> > properly
> > >         exported.
> > >       - Check files (e.g. with the WinDiff) for details and 
other 
> > changes.
> > >       
> > > 2 Requests by Alexander Lenski
> > >       - Please, (as a min) add the
> > >           //!!!
> > >           //Get number of non-consumed tokens:
> > >           public:
> > >           virtual  unsigned int entries() const;
> > >         with the
> > >           //!!!
> > >           //Get number of non-consumed tokens:
> > >           unsigned int TokenBuffer::entries() const
> > >           { return queue.entries() - markerOffset;
> > >           }
> > >         highly useful function to the TokenBuffer.
> > >         Please, in addition (as a max) make all data members 
of the
> > >         TokenBuffer protected (as it is done with the 
InputBuffer)
> > >         instead of private, add the
> > >           //!!!
> > >           //Get number of non-consumed chars:
> > >           public:
> > >           virtual  unsigned int entries() const;
> > >           with the
> > >           //!!!
> > >           //Get number of non-consumed chars:
> > >           unsigned int InputBuffer::entries() const
> > >           { return queue.entries() - markerOffset;
> > >           }
> > >         to the InputBuffer too.
> > >         These changes make specialization of the buffers 
possible.
> > >       - About the ! suffix (currently not implemented in full) 
for 
> > AST
> > >         construction rules
> > >         - Please, clarify your intentions related to the !.
> > >       - Please, consider addition of one more option for the 
C++ 
> > code gen to set
> > >         DLL export/import customizable spec in all antlr-
generated 
> > classes in the form
> > >           class CUST_API SomeClass...
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> >


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Fri Oct  3 11:12:27 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] Re: VC 7.0 antlr.dll to special ATTN of Ric Klaren and Terence Parr
In-Reply-To: <blkdrq+pm7k@eGroups.com>
Message-ID: <000a01c389d9$e76e9b40$1bc8090a@oddi.is>

Here it is. Hope this is of some use.

Just remember, if you link against it in a project, make sure to use
"Multithreadeaded DLL" runtime and define ANTLR_IMPORTS and
ATNLR_CXX_SUPPORTS_NAMEPSACE.

This only works against the headers in Ric's ANTLR version, available at
the location I posted earlier, since config.hpp has changed to use
ANTLR_IMPORTS. The distribution at ANTLR's website has a different
config.hpp (among other things) and won't work.

Arnar

> -----Original Message-----
> From: pfhmks0 [mailto:pfhmks0@yahoo.com] 
> Sent: 3. okt?ber 2003 18:07
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: VC 7.0 antlr.dll to special 
> ATTN of Ric Klaren and Terence Parr
> 
> 
> Arnar,
> 
> Thanks! I would appreciate if you can send the release build as 
> 
> well.
> 
> - Msingh
> 
> --- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
> <arnarb@o...> wrote:
> > Hi..
> > 
> > Following is my earlier post today, the ANTLR version I used is at
> > http://wwwhome.cs.utwente.nl/~klaren/antlr/antlr-20030911.tar.gz
> > 
> > I attached my debug versions of antlr.lib, antlr.dll and 
> antlr.pdb. If
> > you like, I could send you the Release build as well.
> > 
> > Arnar
> > 
> > My earlier post:
> > 
> > For future reference, here's how I built the ANTLR dll with MSVC 
> 7.0,
> > based on Ric's modified ANTLR 2.7.3-20030911 (this is a little 
> different
> > from the README):
> > 
> > 1. Create new "Win32 Project"
> > 2. In the creation wizard, under "Application Settings", check DLL 
> as
> > application type and "Empty project" in "Additional Options"
> > 3. Insert all *.cpp files from lib/cpp/src and *.hpp from 
> lib/cpp/antlr
> > to your project.
> > 4. Make these changes in Project properties:
> >     - Configuration Properties
> >       - C/C++
> >         - General
> >           - Additinal Include Directories: drive:\path-to-
> antlr\lib\cpp
> >         - Preprocessor
> >           - Preprocessor Definitions:
> >  
> > 
> WIN32;NDEBUG;_WINDOWS;_USRDLL;ANTLR_EXPORTS;ANTLR_CXX_SUPPORTS_NAMESP
> ACE
> >               ( change _DEBUG to NDEBUG in release build)
> >         - Code generation
> >           - Runtime Library: Multi-threaded Debug DLL  
> (Skip "debug" in
> > release build)
> >           - Enable Function-level Linking: Yes
> >         - Language
> >           - Default Char Unsigned: Yes
> >         - Create/Use Precompiled Header: Not using precompiled 
> header
> > 5. Compile
> > 
> > In your project, where you use ANTLR from, you need to select the 
> same
> > Runtime Library, and define ANTLR_IMPORTS and
> > ANTLR_CXX_SUPPORTS_NAMESPACE.
> > 
> > > -----Original Message-----
> > > From: pfhmks0 [mailto:pfhmks0@y...] 
> > > Sent: 3. okt?ber 2003 17:42
> > > To: antlr-interest@yahoogroups.com
> > > Subject: [antlr-interest] Re: VC 7.0 antlr.dll to special 
> > > ATTN of Ric Klaren and Terence Parr
> > > 
> > > 
> > > Hi,
> > > 
> > >    How do I get this version?  The attachment is empty.  Thanks 
> in 
> > > advance.
> > > 
> > > - msingh
> > > 
> > > --- In antlr-interest@yahoogroups.com, "Alexander Lenski" 
> > > <alenski@d...> wrote:
> > > > (Sorry, this is a second trial. The first one did not get 
> through: 
> > > attachment is too big.)
> > > > Hi,
> > > > Enjoy the dll in the VC 7.0 environment.
> > > > 
> > > > Attachments:
> > > >   - Notes.txt:        how to; requests (Ric, Terence read it 
> > > please).
> > > >   - antlr-2.7.2.zip:  just the lib\cpp\antlr and lib\cpp\src 
> > > subdirs.
> > > >   - lib.zip:             antlr.lib:           import library 
> to 
> > > link with your code (debug build) ,
> > > >                           antlr.dll:           DLL (debug 
> build),
> > > >                           antlr.pdb          symbols.
> > > > 
> > > > Alexander Lenski
> > > > 
> > > > 1. Notes for the ANTLR DLL target ( MSVC 7.0, Unmanaged DLL ) 
> by 
> > > Alexander Lenski:
> > > > 
> > > > 1.1 Project settings ("create new project" dialogs)
> > > >       - Win32 project
> > > >         - Application Settings
> > > >           - Application type
> > > >             - DLL
> > > >           - Additional options
> > > >             - Export symbols
> > > > 1.2 Project properties (change defaults to)
> > > >       - Configuration Properties
> > > >         - C/C++
> > > >           - General
> > > >             - Additional Include Directories
> > > >               - drive:\antlr-2.7.2\lib\cpp
> > > >           - Preprocessor
> > > >             - Preprocessor Definitions
> > > >               - 
> > > 
> WIN32;_DEBUG;_WINDOWS;_USRDLL;ANTLR_EXPORTS;ANTLR_CXX_SUPPORTS_NAMESP
> > > ACE
> > > >             - Code Generation
> > > >               - Runtime Library
> > > >                 - Multi-threaded Debug DLL (/MDd)
> > > >               - Enable Function-Level Linking:
> > > >                 - Yes
> > > >             - Language
> > > >               - Enable Run-Time Type Info
> > > >                 - Yes
> > > >             - Precompiled Headers
> > > >               - Create/Use Precompiled Headers
> > > >                 - Not Using Precompiled Headers
> > > >         
> > > > 1.3 Some notes on the code change related to the DLL export
> > > >       - See the ASTFactory.hpp for the factory_type, 
> > > factory_descriptor
> > > >         and factory_descriptor_list related defs.
> > > >       - SemanticException.hpp is not included in any of the 
> antlr 
> > > files,
> > > >         the SemanticException is not exported. I added the 
> include
> > > >         in the CharScaner.hpp.
> > > >       - ParserInputState::~ParserInputState must be virtual to 
> be 
> > > properly
> > > >         exported.
> > > >       - Check files (e.g. with the WinDiff) for details and 
> other 
> > > changes.
> > > >       
> > > > 2 Requests by Alexander Lenski
> > > >       - Please, (as a min) add the
> > > >           //!!!
> > > >           //Get number of non-consumed tokens:
> > > >           public:
> > > >           virtual  unsigned int entries() const;
> > > >         with the
> > > >           //!!!
> > > >           //Get number of non-consumed tokens:
> > > >           unsigned int TokenBuffer::entries() const
> > > >           { return queue.entries() - markerOffset;
> > > >           }
> > > >         highly useful function to the TokenBuffer.
> > > >         Please, in addition (as a max) make all data members 
> of the
> > > >         TokenBuffer protected (as it is done with the 
> InputBuffer)
> > > >         instead of private, add the
> > > >           //!!!
> > > >           //Get number of non-consumed chars:
> > > >           public:
> > > >           virtual  unsigned int entries() const;
> > > >           with the
> > > >           //!!!
> > > >           //Get number of non-consumed chars:
> > > >           unsigned int InputBuffer::entries() const
> > > >           { return queue.entries() - markerOffset;
> > > >           }
> > > >         to the InputBuffer too.
> > > >         These changes make specialization of the buffers 
> possible.
> > > >       - About the ! suffix (currently not implemented in full) 
> for 
> > > AST
> > > >         construction rules
> > > >         - Please, clarify your intentions related to the !.
> > > >       - Please, consider addition of one more option for the 
> C++ 
> > > code gen to set
> > > >         DLL export/import customizable spec in all antlr-
> generated 
> > > classes in the form
> > > >           class CUST_API SomeClass...
> > > 
> > > 
> > >  
> > > 
> > > Your use of Yahoo! Groups is subject to 
> > > http://docs.yahoo.com/info/terms/ 
> > > 
> > >
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: antlr_dll-20030911.zip
Type: application/x-zip-compressed
Size: 125398 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20031003/12c4383d/antlr_dll-20030911.bin
From jagad at enciety.com  Fri Oct  3 11:58:27 2003
From: jagad at enciety.com (jagad)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] C++ generated
Message-ID: <1065207507.7817.15.camel@training04>

Hi All,

in my grammars, I have:

rule1: qualID ((DOT Ident) | (LBRACK exprList RBRACK) | TOPI)*;
rule2: qualID ((DOT Ident) | (LBRACK exprList RBRACK) | TOPI)*;

"rule1" is used by another lex rule and "rule2" is not used (stand
alone). When I see the C++ generated code, rule1 generated as:

....<snip>....
try {      // for error handling
  qualID();
  { // ( ... )*
    for (;;) {
      switch ( LA(1)) {
      case DOT: 
      {
        {
          match(DOT);
          match(Ident);    <------- see this
        }
        break;
      }
      case LBRACK:
....<snip>....

But the rule2 is generated as follow:

....<snip>....
try {      // for error handling
  qualID();
  { // ( ... )*
    for (;;) {
      switch ( LA(1)) {
      case DOT: 
      {
        {
          match(DOT);
          Ident();   <---------- ????
        }
        break;
      }
      case LBRACK:
....<snip>....

My question is, how the rules with the same declaration is generate the
different code? is ANTLR do optimizing or something?

Thanks in Advance and Best Regards

jagad



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ray at waldin.net  Fri Oct  3 11:58:17 2003
From: ray at waldin.net (Ray Waldin)
Date: Mon Dec 20 16:15:58 2004
Subject: [antlr-interest] java.g parenthetical built-in type class literal expression
Message-ID: <3F7DC6C9.5080302@waldin.net>

Hi everyone,

Parenthetical built-in type class literal expressions, such as the one in:

     Class c = (int.class);

break the parser.  The fix is listed below.

-Ray


--- old/java.g  2003-09-25 14:24:54.000000000 -0700
+++ java.g      2003-10-03 11:57:11.000000000 -0700
@@ -794,27 +794,20 @@
 unaryExpressionNotPlusMinus
        :       BNOT^ unaryExpression
        |       LNOT^ unaryExpression
-
-       |       (       // subrule allows option to shut off warnings
-                       options {
-                               // "(int" ambig with postfixExpr due to 
lack of sequence
-                               // info in linear approximate LL(k).  
It's ok.  Shut up.
-                               generateAmbigWarnings=false;
-                       }
-               :       // If typecast is built in type, must be numeric 
operand
-                       // Also, no reason to backtrack if type keyword 
like int, float...
-                       lpb:LPAREN^ {#lpb.setType(TYPECAST);} 
builtInTypeSpec[true] RPAREN!
-                       unaryExpression
-
-                       // Have to backtrack to see if operator 
follows.  If no operator
-                       // follows, it's a typecast.  No semantic 
checking needed to parse.
-                       // if it _looks_ like a cast, it _is_ a cast; 
else it's a "(expr)"
-               |       (LPAREN classTypeSpec[true] RPAREN 
unaryExpressionNotPlusMinus)=>
-                       lp:LPAREN^ {#lp.setType(TYPECAST);} 
classTypeSpec[true] RPAREN!
-                       unaryExpressionNotPlusMinus
-
-               |       postfixExpression
-               )
+       |       // use predicate to skip cases like:  (int.class)
+               // rewind if builtInTypeSpec is not immediately followed 
by RPAREN
+               (LPAREN builtInTypeSpec[true] RPAREN) =>
+               lpb:LPAREN^ {#lpb.setType(TYPECAST);} 
builtInTypeSpec[true] RPAREN!
+               unaryExpression
+
+       |       // Have to backtrack to see if operator follows.  If no 
operator
+               // follows, it's a typecast.  No semantic checking 
needed to parse.
+               // if it _looks_ like a cast, it _is_ a cast; else it's 
a "(expr)"
+               (LPAREN classTypeSpec[true] RPAREN 
unaryExpressionNotPlusMinus)=>
+               lp:LPAREN^ {#lp.setType(TYPECAST);} classTypeSpec[true] 
RPAREN!
+               unaryExpressionNotPlusMinus
+
+       |       postfixExpression
        ;
 
 // qualified names, array expressions, method invocation, post inc/dec
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031003/525f7f47/attachment.html
From pfhmks0 at yahoo.com  Fri Oct  3 12:01:45 2003
From: pfhmks0 at yahoo.com (pfhmks0)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Re: VC 7.0 antlr.dll to special ATTN of Ric Klaren and Terence Parr
In-Reply-To: <000a01c389d9$e76e9b40$1bc8090a@oddi.is>
Message-ID: <blkh2p+do13@eGroups.com>

Arnar,

   Thanks! 

   The attachment is "not stored".  I can't retieve it.  Am I doing 
something wrong?  I can't seen to retreiev the attachments on these 
postings.  Sorry for the bother.

- Manoj

--- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
<arnarb@o...> wrote:
> Here it is. Hope this is of some use.
> 
> Just remember, if you link against it in a project, make sure to 
use
> "Multithreadeaded DLL" runtime and define ANTLR_IMPORTS and
> ATNLR_CXX_SUPPORTS_NAMEPSACE.
> 
> This only works against the headers in Ric's ANTLR version, 
available at
> the location I posted earlier, since config.hpp has changed to use
> ANTLR_IMPORTS. The distribution at ANTLR's website has a different
> config.hpp (among other things) and won't work.
> 
> Arnar
> 
> > -----Original Message-----
> > From: pfhmks0 [mailto:pfhmks0@y...] 
> > Sent: 3. okt?ber 2003 18:07
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Re: VC 7.0 antlr.dll to special 
> > ATTN of Ric Klaren and Terence Parr
> > 
> > 
> > Arnar,
> > 
> > Thanks! I would appreciate if you can send the release build as 
> > 
> > well.
> > 
> > - Msingh
> > 
> > --- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
> > <arnarb@o...> wrote:
> > > Hi..
> > > 
> > > Following is my earlier post today, the ANTLR version I used 
is at
> > > http://wwwhome.cs.utwente.nl/~klaren/antlr/antlr-
20030911.tar.gz
> > > 
> > > I attached my debug versions of antlr.lib, antlr.dll and 
> > antlr.pdb. If
> > > you like, I could send you the Release build as well.
> > > 
> > > Arnar
> > > 
> > > My earlier post:
> > > 
> > > For future reference, here's how I built the ANTLR dll with 
MSVC 
> > 7.0,
> > > based on Ric's modified ANTLR 2.7.3-20030911 (this is a little 
> > different
> > > from the README):
> > > 
> > > 1. Create new "Win32 Project"
> > > 2. In the creation wizard, under "Application Settings", check 
DLL 
> > as
> > > application type and "Empty project" in "Additional Options"
> > > 3. Insert all *.cpp files from lib/cpp/src and *.hpp from 
> > lib/cpp/antlr
> > > to your project.
> > > 4. Make these changes in Project properties:
> > >     - Configuration Properties
> > >       - C/C++
> > >         - General
> > >           - Additinal Include Directories: drive:\path-to-
> > antlr\lib\cpp
> > >         - Preprocessor
> > >           - Preprocessor Definitions:
> > >  
> > > 
> > 
WIN32;NDEBUG;_WINDOWS;_USRDLL;ANTLR_EXPORTS;ANTLR_CXX_SUPPORTS_NAMESP
> > ACE
> > >               ( change _DEBUG to NDEBUG in release build)
> > >         - Code generation
> > >           - Runtime Library: Multi-threaded Debug DLL  
> > (Skip "debug" in
> > > release build)
> > >           - Enable Function-level Linking: Yes
> > >         - Language
> > >           - Default Char Unsigned: Yes
> > >         - Create/Use Precompiled Header: Not using precompiled 
> > header
> > > 5. Compile
> > > 
> > > In your project, where you use ANTLR from, you need to select 
the 
> > same
> > > Runtime Library, and define ANTLR_IMPORTS and
> > > ANTLR_CXX_SUPPORTS_NAMESPACE.
> > > 
> > > > -----Original Message-----
> > > > From: pfhmks0 [mailto:pfhmks0@y...] 
> > > > Sent: 3. okt?ber 2003 17:42
> > > > To: antlr-interest@yahoogroups.com
> > > > Subject: [antlr-interest] Re: VC 7.0 antlr.dll to special 
> > > > ATTN of Ric Klaren and Terence Parr
> > > > 
> > > > 
> > > > Hi,
> > > > 
> > > >    How do I get this version?  The attachment is empty.  
Thanks 
> > in 
> > > > advance.
> > > > 
> > > > - msingh
> > > > 
> > > > --- In antlr-interest@yahoogroups.com, "Alexander Lenski" 
> > > > <alenski@d...> wrote:
> > > > > (Sorry, this is a second trial. The first one did not get 
> > through: 
> > > > attachment is too big.)
> > > > > Hi,
> > > > > Enjoy the dll in the VC 7.0 environment.
> > > > > 
> > > > > Attachments:
> > > > >   - Notes.txt:        how to; requests (Ric, Terence read 
it 
> > > > please).
> > > > >   - antlr-2.7.2.zip:  just the lib\cpp\antlr and 
lib\cpp\src 
> > > > subdirs.
> > > > >   - lib.zip:             antlr.lib:           import 
library 
> > to 
> > > > link with your code (debug build) ,
> > > > >                           antlr.dll:           DLL (debug 
> > build),
> > > > >                           antlr.pdb          symbols.
> > > > > 
> > > > > Alexander Lenski
> > > > > 
> > > > > 1. Notes for the ANTLR DLL target ( MSVC 7.0, Unmanaged 
DLL ) 
> > by 
> > > > Alexander Lenski:
> > > > > 
> > > > > 1.1 Project settings ("create new project" dialogs)
> > > > >       - Win32 project
> > > > >         - Application Settings
> > > > >           - Application type
> > > > >             - DLL
> > > > >           - Additional options
> > > > >             - Export symbols
> > > > > 1.2 Project properties (change defaults to)
> > > > >       - Configuration Properties
> > > > >         - C/C++
> > > > >           - General
> > > > >             - Additional Include Directories
> > > > >               - drive:\antlr-2.7.2\lib\cpp
> > > > >           - Preprocessor
> > > > >             - Preprocessor Definitions
> > > > >               - 
> > > > 
> > 
WIN32;_DEBUG;_WINDOWS;_USRDLL;ANTLR_EXPORTS;ANTLR_CXX_SUPPORTS_NAMESP
> > > > ACE
> > > > >             - Code Generation
> > > > >               - Runtime Library
> > > > >                 - Multi-threaded Debug DLL (/MDd)
> > > > >               - Enable Function-Level Linking:
> > > > >                 - Yes
> > > > >             - Language
> > > > >               - Enable Run-Time Type Info
> > > > >                 - Yes
> > > > >             - Precompiled Headers
> > > > >               - Create/Use Precompiled Headers
> > > > >                 - Not Using Precompiled Headers
> > > > >         
> > > > > 1.3 Some notes on the code change related to the DLL export
> > > > >       - See the ASTFactory.hpp for the factory_type, 
> > > > factory_descriptor
> > > > >         and factory_descriptor_list related defs.
> > > > >       - SemanticException.hpp is not included in any of 
the 
> > antlr 
> > > > files,
> > > > >         the SemanticException is not exported. I added the 
> > include
> > > > >         in the CharScaner.hpp.
> > > > >       - ParserInputState::~ParserInputState must be 
virtual to 
> > be 
> > > > properly
> > > > >         exported.
> > > > >       - Check files (e.g. with the WinDiff) for details 
and 
> > other 
> > > > changes.
> > > > >       
> > > > > 2 Requests by Alexander Lenski
> > > > >       - Please, (as a min) add the
> > > > >           //!!!
> > > > >           //Get number of non-consumed tokens:
> > > > >           public:
> > > > >           virtual  unsigned int entries() const;
> > > > >         with the
> > > > >           //!!!
> > > > >           //Get number of non-consumed tokens:
> > > > >           unsigned int TokenBuffer::entries() const
> > > > >           { return queue.entries() - markerOffset;
> > > > >           }
> > > > >         highly useful function to the TokenBuffer.
> > > > >         Please, in addition (as a max) make all data 
members 
> > of the
> > > > >         TokenBuffer protected (as it is done with the 
> > InputBuffer)
> > > > >         instead of private, add the
> > > > >           //!!!
> > > > >           //Get number of non-consumed chars:
> > > > >           public:
> > > > >           virtual  unsigned int entries() const;
> > > > >           with the
> > > > >           //!!!
> > > > >           //Get number of non-consumed chars:
> > > > >           unsigned int InputBuffer::entries() const
> > > > >           { return queue.entries() - markerOffset;
> > > > >           }
> > > > >         to the InputBuffer too.
> > > > >         These changes make specialization of the buffers 
> > possible.
> > > > >       - About the ! suffix (currently not implemented in 
full) 
> > for 
> > > > AST
> > > > >         construction rules
> > > > >         - Please, clarify your intentions related to the !.
> > > > >       - Please, consider addition of one more option for 
the 
> > C++ 
> > > > code gen to set
> > > > >         DLL export/import customizable spec in all antlr-
> > generated 
> > > > classes in the form
> > > > >           class CUST_API SomeClass...
> > > > 
> > > > 
> > > >  
> > > > 
> > > > Your use of Yahoo! Groups is subject to 
> > > > http://docs.yahoo.com/info/terms/ 
> > > > 
> > > >
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> >


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sumav_99 at yahoo.com  Fri Oct  3 12:08:59 2003
From: sumav_99 at yahoo.com (Suma Venkatesh)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] analysing java source code
In-Reply-To: <3AC103F1B7EEEC48A855ACB1D2819E910209D747@rock-corpmail.microfocus.com>
Message-ID: <20031003190859.99702.qmail@web40609.mail.yahoo.com>

hey
  jim,

 thanks for the info.Iam trying to build a small obfuscator on a single given java source
code.Its just a research model.I will have to implement several transformations like
chenging loops,data ,variables etc.To accomplish the same i will need  a good parser like
java.g ,java.tree.g which can give me all the info abt the input program .But in order to
apply the trans as u said i will need a translator.Do u have any which is ready and I can
directly use it in my application to acheive the same.

There are several such in the byte code level but i want to do it in the high level i
mean on java source code and not on it's compiled class.

Could u please help ?

thanks in advance,
suma
--- Jim O'Connor <Jim.OConnor@microfocus.com> wrote:
> Hi Suma,
>   The Cross Reference Tool is very raw.  I have been working for the past
> month to enhance its recognition.  It will be "more approachable" when I get
> done with it.
> 
> More approachable
> 	1. Users have different needs.  Holes will be left to "plug in"
> different end results (see refMethod() in CodeProject.java).
> 	2. A few examples, documentation and a "how to" would be helpful.
> 
>   I see all this being accomplished in about three months, real time. 
> 
> The obfuscator could be more or less complicated, depending on how much you
> plan to do.  It will be more complicated, if you plan on using the Cross
> reference information.  If you know all the files in the project, and just
> mangle consistantly, you just need a translator.
> 
> "Mangle consistantly"
> even characters and odd characters
> 
> voltage => otgvlae
> volume  => ouevlm
> 
> "name consistantly"
> cross reference information necessary to find all voltage reference and
> change them to v1
> 
> voltage => v1
> volume => v2
> etc...
> 
> 
> Jim
> 
> -----Original Message-----
> From: Suma Venkatesh [mailto:sumav_99@yahoo.com]
> Sent: Friday, October 03, 2003 1:47 AM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] analysing java source code
> 
> 
> Hi
>   Jim,
> 
>   Thank you so much for the help.I now kind of understand java.g,java.tree.g
> and main
> classes.I can now display the variable, types and methods etc..
> My next task is to change the names of the variables into less meaningfull
> ones like if
> variable name is voltage,it should become v1 and so on.
> I tried to experiment with the cross refererence tool.But i get compiler
> errors and also
> i dodnt understand how to use it to acheive my task.
> 
> Can u help me on this ??
> 
> thanks in advance,
> suma
> --- Jim O'Connor <Jim.OConnor@microfocus.com> wrote:
> >  Hi Suma,
> >   I assume you can "Tool" a grammar using antlr.  I assume you understand
> > the role of the Main.java file in "running" the grammar.   If you don't
> > understand either of those, I would recommend going to the getting started
> > section of antlr.org.
> >   The printing of the variables and types for a java file should be half
> > hour exercise (being generous), assuming you already have java.g,
> > java.tree.g, and Main.java cranked up.
> > 
> > Steps
> > 1. Tool java.g
> > 2. Tool java.tree.g
> > 3.  compile all the *.java files, including Main.java.
> > 4.  Execute Main.java given an input file.
> >          I don't think it will output anything - no actions!
> > 5.  To get your types and variables look at java.tree.g
> > 
> > variableDef
> > 	:	#(VARIABLE_DEF modifiers typeSpec variableDeclarator
> > varInitializer)
> > 	;
> > 
> > variableDeclarator
> > 	:	IDENT
> > 	|	LBRACK variableDeclarator
> > 	;
> > 
> > This section of the world should be very interesting to you.  Rip off some
> > print methods from other grammars and you're set.
> > 
> > 
> > The obfuscator, minimally,  is a translator that wants to make everything
> > less readable, rather than more.  I haven't looked for translators, but
> > there are people here that have opinions/expertise on those.
> > 
> > I am working on the Java Cross Referencing Tool.  The obfuscator would
> want
> > to know this type of information to make consistant changes. 
> > 
> > Hope that helps.
> > 
> > Jim
> > 
> >   
> > 
> > -----Original Message-----
> > From: Suma Venkatesh
> > To: antlr-interest@yahoogroups.com
> > Sent: 10/1/03 6:14 PM
> > Subject: Re: [antlr-interest] analysing java source code
> > 
> > Hi
> >   Terence,
> > 
> >  I did look into that already but can you please give me some tips on
> > how to run it and
> > use it to achieve my task.I mean read a java file parse it and print
> > variables and their
> > types.some small sample will do for me.I need to start from here and
> > later learn to
> > analyse entire java code like control constructs etc.Our main idea is to
> > build an
> > obfuscation tool kit for java programs using antlr.
> > 
> > 
> > thanks in advance,
> > suma
> > 
> > 
> > --- Terence Parr <parrt@antlr.org> wrote:
> > > See the cross referencing headstart in the file sharing area.
> > > 
> > > Terence
> > > On Wednesday, October 1, 2003, at 10:01 AM, Suma Venkatesh wrote:
> > > 
> > > > Hi,
> > > >
> > > >   Iam looking for  parsing which can parse an input java source
> > code.I 
> > > > mean the parser
> > > > should read the source code and identify the variable names and
> > types 
> > > > and control
> > > > structures.I saw java.g example of antlr.But can anyone help me on
> > how 
> > > > to use that for
> > > > getting specific results like below.ALso it should the read from an 
> > > > input file ,parse it
> > > > and write the output in a file.
> > > >
> > > > Eg: Input is :
> > > >   import java.util.*;
> > > >
> > > > public class HelloWorld{
> > > >
> > > > public static void main(String args[]) {
> > > >
> > > > String message = "Hello World";
> > > > int count =0;
> > > >
> > > > 	while(count <10) {
> > > >              System.out.println(message);
> > > >              count++;
> > > >         }
> > > >
> > > > }
> > > >
> > > > Output should be :
> > > >
> > > > Variables: type name
> > > >            int  count
> > > >            String message
> > > >
> > > > Can ANTLR do this and if so how ??
> > > >
> > > > PLEASE HELP ME!!
> > > >
> > > > thanks in advance,
> > > > suma
> > > >
> > > >
> > > >
> > > > __________________________________
> > > > Do you Yahoo!?
> > > > The New Yahoo! Shopping - with improved product search
> > > > http://shopping.yahoo.com
> > > >
> > > >
> > > >
> > > > Your use of Yahoo! Groups is subject to 
> > > > http://docs.yahoo.com/info/terms/
> > > >
> > > >
> > > >
> > > --
> > > Professor Comp. Sci., University of San Francisco
> > > Creator, ANTLR Parser Generator, http://www.antlr.org
> > > Co-founder, http://www.jguru.com
> > > Co-founder, http://www.knowspam.net enjoy email again!
> > > Co-founder, http://www.peerscope.com pure link sharing
> > > 
> > > 
> > > 
> > > 
> > >  
> > > 
> > > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/ 
> > > 
> > > 
> > 
> > 
> > __________________________________
> > Do you Yahoo!?
> > The New Yahoo! Shopping - with improved product search
> > http://shopping.yahoo.com
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> > 
> > ________________________________________________________________________
> > This e-mail has been scanned for viruses by MCI's Internet Managed
> > Scanning Services - powered by MessageLabs. For further information
> > visit http://www.mci.com
> > ________________________________________________________________________
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
> 
> __________________________________
> Do you Yahoo!?
> The New Yahoo! Shopping - with improved product search
> http://shopping.yahoo.com
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 
> ________________________________________________________________________
> This e-mail has been scanned for viruses by MCI's Internet Managed Scanning
> Services - powered by MessageLabs. For further information visit
> http://www.mci.com
> ________________________________________________________________________
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
The New Yahoo! Shopping - with improved product search
http://shopping.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Jim.OConnor at microfocus.com  Fri Oct  3 12:43:06 2003
From: Jim.OConnor at microfocus.com (Jim O'Connor)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] analysing java source code
Message-ID: <3AC103F1B7EEEC48A855ACB1D2819E910209D921@rock-corpmail.microfocus.com>

Hi Suma,
  I not aware of a java=>java translator that is usable "out of the box".
Unfortunately, I'm not working in that area right now.
  Some of the Antlr examples are worth trying.  The "Preserving Whitespace"
gives a window into some formatting issues.  Sorry I can't be more helpful.

Jim

-----Original Message-----
From: Suma Venkatesh [mailto:sumav_99@yahoo.com]
Sent: Friday, October 03, 2003 3:09 PM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] analysing java source code


hey
  jim,

 thanks for the info.Iam trying to build a small obfuscator on a single
given java source
code.Its just a research model.I will have to implement several
transformations like
chenging loops,data ,variables etc.To accomplish the same i will need  a
good parser like
java.g ,java.tree.g which can give me all the info abt the input program
.But in order to
apply the trans as u said i will need a translator.Do u have any which is
ready and I can
directly use it in my application to acheive the same.

There are several such in the byte code level but i want to do it in the
high level i
mean on java source code and not on it's compiled class.

Could u please help ?

thanks in advance,
suma
--- Jim O'Connor <Jim.OConnor@microfocus.com> wrote:
> Hi Suma,
>   The Cross Reference Tool is very raw.  I have been working for the past
> month to enhance its recognition.  It will be "more approachable" when I
get
> done with it.
> 
> More approachable
> 	1. Users have different needs.  Holes will be left to "plug in"
> different end results (see refMethod() in CodeProject.java).
> 	2. A few examples, documentation and a "how to" would be helpful.
> 
>   I see all this being accomplished in about three months, real time. 
> 
> The obfuscator could be more or less complicated, depending on how much
you
> plan to do.  It will be more complicated, if you plan on using the Cross
> reference information.  If you know all the files in the project, and just
> mangle consistantly, you just need a translator.
> 
> "Mangle consistantly"
> even characters and odd characters
> 
> voltage => otgvlae
> volume  => ouevlm
> 
> "name consistantly"
> cross reference information necessary to find all voltage reference and
> change them to v1
> 
> voltage => v1
> volume => v2
> etc...
> 
> 
> Jim
> 
> -----Original Message-----
> From: Suma Venkatesh [mailto:sumav_99@yahoo.com]
> Sent: Friday, October 03, 2003 1:47 AM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] analysing java source code
> 
> 
> Hi
>   Jim,
> 
>   Thank you so much for the help.I now kind of understand
java.g,java.tree.g
> and main
> classes.I can now display the variable, types and methods etc..
> My next task is to change the names of the variables into less meaningfull
> ones like if
> variable name is voltage,it should become v1 and so on.
> I tried to experiment with the cross refererence tool.But i get compiler
> errors and also
> i dodnt understand how to use it to acheive my task.
> 
> Can u help me on this ??
> 
> thanks in advance,
> suma
> --- Jim O'Connor <Jim.OConnor@microfocus.com> wrote:
> >  Hi Suma,
> >   I assume you can "Tool" a grammar using antlr.  I assume you
understand
> > the role of the Main.java file in "running" the grammar.   If you don't
> > understand either of those, I would recommend going to the getting
started
> > section of antlr.org.
> >   The printing of the variables and types for a java file should be half
> > hour exercise (being generous), assuming you already have java.g,
> > java.tree.g, and Main.java cranked up.
> > 
> > Steps
> > 1. Tool java.g
> > 2. Tool java.tree.g
> > 3.  compile all the *.java files, including Main.java.
> > 4.  Execute Main.java given an input file.
> >          I don't think it will output anything - no actions!
> > 5.  To get your types and variables look at java.tree.g
> > 
> > variableDef
> > 	:	#(VARIABLE_DEF modifiers typeSpec variableDeclarator
> > varInitializer)
> > 	;
> > 
> > variableDeclarator
> > 	:	IDENT
> > 	|	LBRACK variableDeclarator
> > 	;
> > 
> > This section of the world should be very interesting to you.  Rip off
some
> > print methods from other grammars and you're set.
> > 
> > 
> > The obfuscator, minimally,  is a translator that wants to make
everything
> > less readable, rather than more.  I haven't looked for translators, but
> > there are people here that have opinions/expertise on those.
> > 
> > I am working on the Java Cross Referencing Tool.  The obfuscator would
> want
> > to know this type of information to make consistant changes. 
> > 
> > Hope that helps.
> > 
> > Jim
> > 
> >   
> > 
> > -----Original Message-----
> > From: Suma Venkatesh
> > To: antlr-interest@yahoogroups.com
> > Sent: 10/1/03 6:14 PM
> > Subject: Re: [antlr-interest] analysing java source code
> > 
> > Hi
> >   Terence,
> > 
> >  I did look into that already but can you please give me some tips on
> > how to run it and
> > use it to achieve my task.I mean read a java file parse it and print
> > variables and their
> > types.some small sample will do for me.I need to start from here and
> > later learn to
> > analyse entire java code like control constructs etc.Our main idea is to
> > build an
> > obfuscation tool kit for java programs using antlr.
> > 
> > 
> > thanks in advance,
> > suma
> > 
> > 
> > --- Terence Parr <parrt@antlr.org> wrote:
> > > See the cross referencing headstart in the file sharing area.
> > > 
> > > Terence
> > > On Wednesday, October 1, 2003, at 10:01 AM, Suma Venkatesh wrote:
> > > 
> > > > Hi,
> > > >
> > > >   Iam looking for  parsing which can parse an input java source
> > code.I 
> > > > mean the parser
> > > > should read the source code and identify the variable names and
> > types 
> > > > and control
> > > > structures.I saw java.g example of antlr.But can anyone help me on
> > how 
> > > > to use that for
> > > > getting specific results like below.ALso it should the read from an 
> > > > input file ,parse it
> > > > and write the output in a file.
> > > >
> > > > Eg: Input is :
> > > >   import java.util.*;
> > > >
> > > > public class HelloWorld{
> > > >
> > > > public static void main(String args[]) {
> > > >
> > > > String message = "Hello World";
> > > > int count =0;
> > > >
> > > > 	while(count <10) {
> > > >              System.out.println(message);
> > > >              count++;
> > > >         }
> > > >
> > > > }
> > > >
> > > > Output should be :
> > > >
> > > > Variables: type name
> > > >            int  count
> > > >            String message
> > > >
> > > > Can ANTLR do this and if so how ??
> > > >
> > > > PLEASE HELP ME!!
> > > >
> > > > thanks in advance,
> > > > suma
> > > >
> > > >
> > > >
> > > > __________________________________
> > > > Do you Yahoo!?
> > > > The New Yahoo! Shopping - with improved product search
> > > > http://shopping.yahoo.com
> > > >
> > > >
> > > >
> > > > Your use of Yahoo! Groups is subject to 
> > > > http://docs.yahoo.com/info/terms/
> > > >
> > > >
> > > >
> > > --
> > > Professor Comp. Sci., University of San Francisco
> > > Creator, ANTLR Parser Generator, http://www.antlr.org
> > > Co-founder, http://www.jguru.com
> > > Co-founder, http://www.knowspam.net enjoy email again!
> > > Co-founder, http://www.peerscope.com pure link sharing
> > > 
> > > 
> > > 
> > > 
> > >  
> > > 
> > > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/ 
> > > 
> > > 
> > 
> > 
> > __________________________________
> > Do you Yahoo!?
> > The New Yahoo! Shopping - with improved product search
> > http://shopping.yahoo.com
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> > 
> > ________________________________________________________________________
> > This e-mail has been scanned for viruses by MCI's Internet Managed
> > Scanning Services - powered by MessageLabs. For further information
> > visit http://www.mci.com
> > ________________________________________________________________________
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
> 
> __________________________________
> Do you Yahoo!?
> The New Yahoo! Shopping - with improved product search
> http://shopping.yahoo.com
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 
> ________________________________________________________________________
> This e-mail has been scanned for viruses by MCI's Internet Managed
Scanning
> Services - powered by MessageLabs. For further information visit
> http://www.mci.com
> ________________________________________________________________________
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
The New Yahoo! Shopping - with improved product search
http://shopping.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 



________________________________________________________________________
This e-mail has been scanned for viruses by MCI's Internet Managed Scanning
Services - powered by MessageLabs. For further information visit
http://www.mci.com
________________________________________________________________________

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri Oct  3 12:48:32 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] C++ generated
Message-ID: <72C9789739C4214096AE945753B11EA36B1F1C@mypxmail04.bco-home.com>

Can you make this into a small .g file to try out?  I thought lexer rules
always started with an upper case letter.

Monty

-----Original Message-----
From: jagad [mailto:jagad@enciety.com] 
Sent: Friday, October 03, 2003 11:58 AM
To: ANTLR Milis
Subject: [antlr-interest] C++ generated

Hi All,

in my grammars, I have:

rule1: qualID ((DOT Ident) | (LBRACK exprList RBRACK) | TOPI)*;
rule2: qualID ((DOT Ident) | (LBRACK exprList RBRACK) | TOPI)*;

"rule1" is used by another lex rule and "rule2" is not used (stand
alone). When I see the C++ generated code, rule1 generated as:

....<snip>....
try {      // for error handling
  qualID();
  { // ( ... )*
    for (;;) {
      switch ( LA(1)) {
      case DOT: 
      {
        {
          match(DOT);
          match(Ident);    <------- see this
        }
        break;
      }
      case LBRACK:
....<snip>....

But the rule2 is generated as follow:

....<snip>....
try {      // for error handling
  qualID();
  { // ( ... )*
    for (;;) {
      switch ( LA(1)) {
      case DOT: 
      {
        {
          match(DOT);
          Ident();   <---------- ????
        }
        break;
      }
      case LBRACK:
....<snip>....

My question is, how the rules with the same declaration is generate the
different code? is ANTLR do optimizing or something?

Thanks in Advance and Best Regards

jagad



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jagad at enciety.com  Fri Oct  3 13:26:50 2003
From: jagad at enciety.com (jagad)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] C++ generated
In-Reply-To: <72C9789739C4214096AE945753B11EA36B1F1C@mypxmail04.bco-home.com>
References: <72C9789739C4214096AE945753B11EA36B1F1C@mypxmail04.bco-home.com>
Message-ID: <1065212810.8907.6.camel@training04>

Hi Monty,

I have miss-typo here :) first, I mean it Parser Rule :) and I can't see
the different between Ident and ident. I have fixed this silly problem,
thanks.

Sorry for bothering with this problem ;)
BTW, I have finished the Delphi/Kylix grammar with some bugs :) but it's
interesting for me since I can see ANTLR more clearly now.

Thanks and Best Regards

jagad




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From johnm-antlr at non.net  Fri Oct  3 15:42:11 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Re: VC 7.0 antlr.dll to special ATTN of Ric Klaren and Terence Parr
In-Reply-To: <000301c389d7$95f59720$1bc8090a@oddi.is>
References: <blkcck+f441@eGroups.com>
	<000301c389d7$95f59720$1bc8090a@oddi.is>
Message-ID: <16253.64323.737180.658244@despot.non.net>

>>>>> "Arnar" == Arnar Birgisson <arnarb@oddi.is> writes:
[...]

> Following is my earlier post today, the ANTLR version I used is at
> http://wwwhome.cs.utwente.nl/~klaren/antlr/antlr-20030911.tar.gz

> I attached my debug versions of antlr.lib, antlr.dll and antlr.pdb. If
> you like, I could send you the Release build as well.

'netiquette nanny says:

	Do NOT send large attachments to mailing lists!

Put them up on a http/ftp server and post the URL.

Sigh,
	John



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri Oct  3 16:00:52 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Re: VC 7.0 antlr.dll to special ATTN of Ric 
	Klaren and Terence Parr
Message-ID: <72C9789739C4214096AE945753B11EA36B1F24@mypxmail04.bco-home.com>

Which is really easy too with the filesharing feature of antlr.org!

Monty

-----Original Message-----
From: John D. Mitchell [mailto:johnm-antlr@non.net] 
Sent: Friday, October 03, 2003 3:42 PM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Re: VC 7.0 antlr.dll to special ATTN of Ric
Klaren and Terence Parr

>>>>> "Arnar" == Arnar Birgisson <arnarb@oddi.is> writes:
[...]

> Following is my earlier post today, the ANTLR version I used is at
> http://wwwhome.cs.utwente.nl/~klaren/antlr/antlr-20030911.tar.gz

> I attached my debug versions of antlr.lib, antlr.dll and antlr.pdb. If
> you like, I could send you the Release build as well.

'netiquette nanny says:

	Do NOT send large attachments to mailing lists!

Put them up on a http/ftp server and post the URL.

Sigh,
	John



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From killer_klit69x3 at yahoo.com  Fri Oct  3 23:16:27 2003
From: killer_klit69x3 at yahoo.com (killer_klit69x3)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] High Pressure Head!
Message-ID: <bllojr+c9cv@eGroups.com>

Tired of girls who only tease the tip? Meet women online who hit the nerve just right with high pressure head! Click Below.
http://www.nudeadultfriendfinder.com/landing.asp?afl=NYHO


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Sat Oct  4 05:07:12 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Re: VC 7.0 antlr.dll to special ATTN of Ric Klaren and Terence Parr
In-Reply-To: <72C9789739C4214096AE945753B11EA36B1F24@mypxmail04.bco-home.com>
Message-ID: <001901c38a70$0b9266a0$1ac8090a@oddi.is>

I'm sorry for this, I run al my mailing lists with an upper limit on
attachment size, and I guess I just assumed that Yahoo did to. My bad,
sorry again.

I did however upload a zip with both the debug and release build to the
antlr.org file sharing area, direct url is
http://www.antlr.org/share/1065293756671/antlr_dll-20030911.zip.

cheers,
Arnar

> -----Original Message-----
> From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
> Sent: 3. okt?ber 2003 23:01
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Re: VC 7.0 antlr.dll to special 
> ATTN of Ric Klaren and Terence Parr
> 
> 
> Which is really easy too with the filesharing feature of antlr.org!
> 
> Monty
> 
> -----Original Message-----
> From: John D. Mitchell [mailto:johnm-antlr@non.net] 
> Sent: Friday, October 03, 2003 3:42 PM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Re: VC 7.0 antlr.dll to special 
> ATTN of Ric
> Klaren and Terence Parr
> 
> >>>>> "Arnar" == Arnar Birgisson <arnarb@oddi.is> writes:
> [...]
> 
> > Following is my earlier post today, the ANTLR version I used is at
> > http://wwwhome.cs.utwente.nl/~klaren/antlr/antlr-20030911.tar.gz
> 
> > I attached my debug versions of antlr.lib, antlr.dll and 
> antlr.pdb. If
> > you like, I could send you the Release build as well.
> 
> 'netiquette nanny says:
> 
> 	Do NOT send large attachments to mailing lists!
> 
> Put them up on a http/ftp server and post the URL.
> 
> Sigh,
> 	John
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! 
> Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Sat Oct  4 05:17:30 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Re: MSVC 7.0
In-Reply-To: <20031003120600.G28510@cs.utwente.nl>
Message-ID: <001a01c38a71$7bcee500$1ac8090a@oddi.is>

Hello again.

Ric said:
> Did you by any chance see where the invalid sign extension 
> happened? Or do
> you have a small example lexer+input file that triggers this ?

I traced this and it seems that it happens in
antlr::CharScanner::match(std::string&):

virtual void match(const ANTLR_USE_NAMESPACE(std)string& s)
{
	int len = s.length();

	for (int i = 0; i < len; i++)
	{
		int la_1 = LA(1);

		if ( la_1 != s[i] )  /* trouble here */
			throw MismatchedCharException(la_1, s[i], false,
this); /* and here */

		consume();
	}
}

Since string is a basic_string<char, char_traits<char>, allocator<char>
>, and basic_string<..>.operator[] returns an allocator::reference,
string.operator[] returns a char. The constructor for
MismatchedCharException takes it second parameter as an int, so that's
where the conversion takes place. Changing the above code to

virtual void match(const ANTLR_USE_NAMESPACE(std)string& s)
{
	int len = s.length();

	for (int i = 0; i < len; i++)
	{
		int la_1 = LA(1);

		/* next two lines changed */
		if ( la_1 != (s[i] & 0xff) )
			throw MismatchedCharException(la_1, (s[i] &
0xff), false, this);

		consume();
	}
}

fixes the problem.

Arnar



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From maaxxxcal at yahoo.com  Sat Oct  4 20:21:05 2003
From: maaxxxcal at yahoo.com (maaxxxcal)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] A simple prepocessor with a lexer?
Message-ID: <blo2n1+qqt2@eGroups.com>

I am trying to write a very simple preprocessor but I'm not quite 
sure how to go about it.
Here's the problem, I need to process pragmas that are really inside 
single-line comments in a SQL script (not necessarily from the start 
of line).
For instance, I can have input of the form:

<sql>
...
<sql> -- <pragma>
...
<sql>

What is the simplest way to achieve this with ANTLR? Is a lexer 
enough as long as the syntax of the pragma is not too complex?
I tried writing such a lexer but I'm having trouble defining a rule 
that would match "anything until --"

Thanks for your help!


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From easjolly at ix.netcom.com  Sun Oct  5 10:42:41 2003
From: easjolly at ix.netcom.com (dotlessbraille)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Handling Lots of Keywords?
Message-ID: <blpl6h+pm09@eGroups.com>

I am trying to analyze braille texts using the current US standard 
representation for braille math.  Braille uses 63 characters (and 
the space). It is typically represented electronically with the 63 
ASCII codes corresponding to the small (xor capital) letters and all 
but 5 of the special characters so the input is well-defined.

If the tokenization is treated as a lexical problem, there is the 
unusual feature that there are more than 1000 keywords, some with 
more than a dozen characters.  (The keywords are mainly used to 
represent mathematical symbols by a notation more intuitive than 
Unicode character codes.)

If any of you have ever dealt with this number of keywords, I'd be 
grateful for advice.   

Thanks,
Susan


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Sun Oct  5 14:40:14 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] A simple prepocessor with a lexer?
In-Reply-To: <blo2n1+qqt2@eGroups.com>
Message-ID: <815C77BC-F77C-11D7-9042-000A95891192@cs.usfca.edu>

Hi.  Damn yahoogroups sucks.  Post from home didn't make it.  Anyway, 
try this:

class L extends Lexer;

options {
	filter=true;
}

CMT : "--" ( PRAGMA | (options{greedy=false;}:.)* '\n' ) ;

protected
PRAGMA : "<pragma"> ... ;

On Saturday, October 4, 2003, at 08:21 PM, maaxxxcal wrote:

> I am trying to write a very simple preprocessor but I'm not quite
> sure how to go about it.
> Here's the problem, I need to process pragmas that are really inside
> single-line comments in a SQL script (not necessarily from the start
> of line).
> For instance, I can have input of the form:
>
> <sql>
> ...
> <sql> -- <pragma>
> ...
> <sql>
>
> What is the simplest way to achieve this with ANTLR? Is a lexer
> enough as long as the syntax of the pragma is not too complex?
> I tried writing such a lexer but I'm having trouble defining a rule
> that would match "anything until --"
>
> Thanks for your help!
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From m_schellens at hotmail.com  Mon Oct  6 02:27:33 2003
From: m_schellens at hotmail.com (marcschellens)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] need for initializeASTFactory
Message-ID: <blrci5+kktq@eGroups.com>

Maybe a silly question, but to be sure:
If I am using my own AST and  I have a treewalker not
modifying/generating any AST,
do I need:

    parser.initializeASTFactory( MyNodeFactory);
    parser.setASTFactory( &MyNodeFactory );

thanks,
marc


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From somhalikhede at yahoo.com  Mon Oct  6 04:05:35 2003
From: somhalikhede at yahoo.com (=?iso-8859-1?q?Someshwar=20Halikhede?=)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Antlr for syntax check
Message-ID: <20031006110535.89668.qmail@web41301.mail.yahoo.com>

Hi,

I need to write grammar for logical expression. I want
to use antlr to check syntax of the logical expression
entered by user. I was just spiking with Antlr and
following simple grammar I wrote.

-----------   grammer  ------------------------ 

class boolExprsnParser extends Parser;
options {buildAST=true;}

expr			: int_logic_ex;
bool_exprsn		: logic_exprsn (AND^ logic_exprsn)* ;
logic_exprsn	: int_logic_ex ; 
int_logic_ex	: INT_VAR(EQ^ | LT^ | GT^)INT_VAR |
LPAREN expr RPAREN;

class boolExprsnLexer extends Lexer;
 	
AND			: '&';
OR			: '|';
EQ			: "=";
LT			: '<';
GT			: '>';
BOOL_VAR 	: "true"|"false";
LPAREN		: '(';
RPAREN  	: ')';
SEMI		:';';


protected DIGIT	: '0'..'9';

INT_VAR		: (DIGIT)+ | "iVar"(DIGIT)+;


----------------------------------------------------

It works fine with expression such as (iVar1 <
10)&(iVar3 > 4) etc. However it does not throw
exceptions for expression such as 
(iVar1 < 10)))))
I am sure I am missing something. 
Can somebody help me know what all I need to do to
write a expression syntax checker? Do I need to use
TreeParser to catch syntax mistakes?

Regards,
Som

________________________________________________________________________
Want to chat instantly with your online friends?  Get the FREE Yahoo!
Messenger http://mail.messenger.yahoo.co.uk

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From somhalikhede at yahoo.com  Mon Oct  6 04:23:29 2003
From: somhalikhede at yahoo.com (=?iso-8859-1?q?Someshwar=20Halikhede?=)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Antlr for syntax check - Reposting
Message-ID: <20031006112329.8080.qmail@web41314.mail.yahoo.com>

Hi,

I am reposting it as there was a mistake grammar in
earlier mail.

I need to write grammar for logical expression. I want
to use antlr to check syntax of the logical expression
entered by user. I was just spiking with Antlr and
following simple grammar I wrote.

-----------   grammer  ------------------------ 

class boolExprsnParser extends Parser;
options {buildAST=true;}

expr			: bool_exprsn;
bool_exprsn		: logic_exprsn (AND^ logic_exprsn)* ;
logic_exprsn	: int_logic_ex ; 
int_logic_ex	: INT_VAR(EQ^ | LT^ | GT^)INT_VAR |
LPAREN expr RPAREN;

class boolExprsnLexer extends Lexer;
 	
AND			: '&';
OR			: '|';
EQ			: "=";
LT			: '<';
GT			: '>';
BOOL_VAR 	: "true"|"false";
LPAREN		: '(';
RPAREN  	: ')';
SEMI		:';';


protected DIGIT	: '0'..'9';

INT_VAR		: (DIGIT)+ | "iVar"(DIGIT)+;


----------------------------------------------------

It works fine with expression such as (iVar1 <
10)&(iVar3 > 4) etc. However it does not throw
exceptions for expression such as 
(iVar1 < 10)))))
I am sure I am missing something. 
Can somebody help me know what all I need to do to
write a expression syntax checker? Do I need to use
TreeParser to catch syntax mistakes?

Regards,
Som



________________________________________________________________________
Want to chat instantly with your online friends?  Get the FREE Yahoo!
Messenger http://mail.messenger.yahoo.co.uk

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rodrigor at in-fusio.com  Mon Oct  6 05:06:05 2003
From: rodrigor at in-fusio.com (rodrigo reyes)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Antlr for syntax check - Reposting
Message-ID: <C5140F3D620F9F44AA9F84239D1564C901B240BA@email.int.in-fusio.com>

Hi,

> expr			: bool_exprsn;
> It works fine with expression such as (iVar1 <
> 10)&(iVar3 > 4) etc. However it does not throw
> exceptions for expression such as 
> (iVar1 < 10)))))

 Just change your expr rule to be
expr			: bool_exprsn EOF;

Bests,
Rodrigo

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jagad at enciety.com  Mon Oct  6 06:27:13 2003
From: jagad at enciety.com (jagad)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Antlr for syntax check - Reposting
In-Reply-To: <20031006112329.8080.qmail@web41314.mail.yahoo.com>
References: <20031006112329.8080.qmail@web41314.mail.yahoo.com>
Message-ID: <1065446832.5036.3.camel@training04>

Hi Som,

compile again your grammar file with -traceParser option then try run
your program using file as input, then see how it goes.

Cheers

jagad


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Mike.Jones at woofumdust.com  Mon Oct  6 06:23:35 2003
From: Mike.Jones at woofumdust.com (Mike Jones)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] .Net
Message-ID: <000e01c38c0d$0c41acc0$0a00000a@woofumdust.com>

All,

Are there any plans to produce a .Net version of ANTLR? Any experiences
trying to use the current one with J#?

Mike


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From andrew at adersoftware.com  Mon Oct  6 06:48:55 2003
From: andrew at adersoftware.com (Andrew Deren)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] .Net
In-Reply-To: <000e01c38c0d$0c41acc0$0a00000a@woofumdust.com>
Message-ID: <200310060745200.SM00484@Andrew>

You can get .net version (J#) from http://www.antlr.org/share/list
Andrew

-----Original Message-----
From: Mike Jones [mailto:Mike.Jones@woofumdust.com] 
Sent: Monday, October 06, 2003 7:24 AM
To: antlr-interest@yahoogroups.com

All,

Are there any plans to produce a .Net version of ANTLR? Any experiences
trying to use the current one with J#?

Mike


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Mon Oct  6 06:56:40 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] need for initializeASTFactory
In-Reply-To: <blrci5+kktq@eGroups.com>; from m_schellens@hotmail.com on Mon, Oct 06, 2003 at 09:27:33AM -0000
References: <blrci5+kktq@eGroups.com>
Message-ID: <20031006155639.A4987@cs.utwente.nl>

Hi,

On Mon, Oct 06, 2003 at 09:27:33AM -0000, marcschellens wrote:
> Maybe a silly question, but to be sure:
> If I am using my own AST and  I have a treewalker not
> modifying/generating any AST,
> do I need:
> 
>     parser.initializeASTFactory( MyNodeFactory);
>     parser.setASTFactory( &MyNodeFactory );

As long as buildAST = false it should not be necessary (so of the top of my
head)

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Xander: "Buffy, we need to do something *now*"
  Angel: "We need a distraction."
  Buffy: "Right."
  Angel: "What are you going to do?"
  Buffy: "I'm going to kill them all. That oughtta distract 'em..."


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Mon Oct  6 07:04:17 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Re: MSVC 7.0
In-Reply-To: <001a01c38a71$7bcee500$1ac8090a@oddi.is>; from arnarb@oddi.is on Sat, Oct 04, 2003 at 12:17:30PM -0000
References: <20031003120600.G28510@cs.utwente.nl> <001a01c38a71$7bcee500$1ac8090a@oddi.is>
Message-ID: <20031006160417.B4987@cs.utwente.nl>

On Sat, Oct 04, 2003 at 12:17:30PM -0000, Arnar Birgisson wrote:
>...
> fixes the problem.

Thanks!!

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Wit is cultured insolence. --- Aristotle


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Mike.Jones at woofumdust.com  Mon Oct  6 07:35:23 2003
From: Mike.Jones at woofumdust.com (Mike Jones)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] .Net
In-Reply-To: <200310060745200.SM00484@Andrew>
Message-ID: <000701c38c17$14239ac0$0a00000a@woofumdust.com>

Andrew,

Is the C# or J# version more complete/stable???

Mike

-----Original Message-----
From: Andrew Deren [mailto:andrew@adersoftware.com] 
Sent: Monday, October 06, 2003 7:49 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] .Net

You can get .net version (J#) from http://www.antlr.org/share/list
Andrew

-----Original Message-----
From: Mike Jones [mailto:Mike.Jones@woofumdust.com] 
Sent: Monday, October 06, 2003 7:24 AM
To: antlr-interest@yahoogroups.com

All,

Are there any plans to produce a .Net version of ANTLR? Any experiences
trying to use the current one with J#?

Mike


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 




 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From andrew at adersoftware.com  Mon Oct  6 07:59:02 2003
From: andrew at adersoftware.com (Andrew Deren)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] .Net
In-Reply-To: <000701c38c17$14239ac0$0a00000a@woofumdust.com>
Message-ID: <200310060855731.SM00484@Andrew>

You would have to ask the author of this package. I know that J# version is
for generating C# code. The C# version is just the runtime, and not antlr
tool.
Andrew

-----Original Message-----
From: Mike Jones [mailto:Mike.Jones@woofumdust.com] 
Sent: Monday, October 06, 2003 8:35 AM
To: antlr-interest@yahoogroups.com

Andrew,

Is the C# or J# version more complete/stable???

Mike

-----Original Message-----
From: Andrew Deren [mailto:andrew@adersoftware.com] 
Sent: Monday, October 06, 2003 7:49 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] .Net

You can get .net version (J#) from http://www.antlr.org/share/list
Andrew

-----Original Message-----
From: Mike Jones [mailto:Mike.Jones@woofumdust.com] 
Sent: Monday, October 06, 2003 7:24 AM
To: antlr-interest@yahoogroups.com

All,

Are there any plans to produce a .Net version of ANTLR? Any experiences
trying to use the current one with J#?

Mike


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 




 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon Oct  6 08:22:38 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Antlr for syntax check
Message-ID: <72C9789739C4214096AE945753B11EA36B1F25@mypxmail04.bco-home.com>

You didn't explicity recognize EOF, so it never tried to parse the last
parens and get an error.  Try

expr			: int_logic_ex EOF;

Monty

-----Original Message-----
From: Someshwar Halikhede [mailto:somhalikhede@yahoo.com] 
Sent: Monday, October 06, 2003 4:06 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Antlr for syntax check

Hi,

I need to write grammar for logical expression. I want
to use antlr to check syntax of the logical expression
entered by user. I was just spiking with Antlr and
following simple grammar I wrote.

-----------   grammer  ------------------------ 

class boolExprsnParser extends Parser;
options {buildAST=true;}

expr			: int_logic_ex;
bool_exprsn		: logic_exprsn (AND^ logic_exprsn)* ;
logic_exprsn	: int_logic_ex ; 
int_logic_ex	: INT_VAR(EQ^ | LT^ | GT^)INT_VAR |
LPAREN expr RPAREN;

class boolExprsnLexer extends Lexer;
 	
AND			: '&';
OR			: '|';
EQ			: "=";
LT			: '<';
GT			: '>';
BOOL_VAR 	: "true"|"false";
LPAREN		: '(';
RPAREN  	: ')';
SEMI		:';';


protected DIGIT	: '0'..'9';

INT_VAR		: (DIGIT)+ | "iVar"(DIGIT)+;


----------------------------------------------------

It works fine with expression such as (iVar1 <
10)&(iVar3 > 4) etc. However it does not throw
exceptions for expression such as 
(iVar1 < 10)))))
I am sure I am missing something. 
Can somebody help me know what all I need to do to
write a expression syntax checker? Do I need to use
TreeParser to catch syntax mistakes?

Regards,
Som

________________________________________________________________________
Want to chat instantly with your online friends?  Get the FREE Yahoo!
Messenger http://mail.messenger.yahoo.co.uk

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jagad at enciety.com  Mon Oct  6 10:42:17 2003
From: jagad at enciety.com (jagad)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] ambiguous grammar
Message-ID: <1065462137.14111.26.camel@training04>

Hi All,

I have simple grammar:

rule1  : '(' rule2 (COMMA rule2)* ')'
rule2  : rule1 | expr

expr   : factor (op factor)*
factor : INTEGER | '(' expr ')'
op     : '+' | '-'

the grammar is conflicting because the input like: ((1),(2)) is
undetermine. "(1)" is could be rule1 or expr.
If I force rule1 using:

rule1  : ('(')=>'(' rule2 (COMMA rule2)* ')' | expr

the grammar will valid for "((1),(2))" but fail for: "((1)+1, (2))"
which it should be valid according that "(1)+1" is should be an expr.

Anybody knows how to overcome this problem?

Thanks in Advance and Best Regards

jagad


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Mon Oct  6 13:09:47 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Re: .Net
In-Reply-To: <000701c38c17$14239ac0$0a00000a@woofumdust.com>
Message-ID: <blsi6b+o32c@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Mike Jones" <Mike.Jones@w...>
wrote:
> Andrew,
> 
> Is the C# or J# version more complete/stable???
> 
> Mike

Mike,

The C# and J# distributions aren't equivalent, they are different tools. 

The C# distribution contains a code generator that is a part of the
ANTLR tool[1*] that enables the generation of Lexers, Parsers and
TreeParsers in C#. It also contains a .NET/CLR runtime library that
all such ANTLR-generated code needs to compile and execute properly.

The J# Project distribution is a project file for Visual Studio.NET
and some instructions that allows a recompile/port of the ANTLR tool
to J# (a Java compiler that generates code for the .NET/CLR platform).
This produces an executable version of the ANTLR that runs directly on
.NET/CLR without any need for Java[2*]. Hence the J# distribution
_needs_ the source to ANTLR including the code generator component
from the C# distribution.

So, to answer your implied question, you will need the following to be
able to use ANTLR in a Java-less environment:

1. The J# binary distro - for the tool executable
2. The stock ANTLR v2.7.2 distro
3. The ANTLR/C# update distro

(1) is the the ANTLR executable for .NET/CLR
(2) and (3) together allow you to build the ANTLR/C# .NET runtime library

If you need to rebuild the ANTLR tool executable for the .NET platform
(i.e. 1), you will need a copy of J#, the J# Project distro and some
knowledge of Java & J# of course.

Cheers,

Micheal

[1*]   The ANTLR tool is the command-line app that generates your
Lexer/Parser/TreeParser when fed an approriate grammar file. It is
written in Java.
on of the C# bits.

[2*]   This is of course the ANTLR 2.7.2 .NET executable on the site.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From epovazan at telus.net  Mon Oct  6 15:26:14 2003
From: epovazan at telus.net (Edward Povazan)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Custom AST breaks things
Message-ID: <000701c38c58$daadcda0$6601a8c0@Epsilon>

Hello,

I just finished my parser and tree parser (yay), and am now adding the 'code
generation' part for my little scripts.
I am playing with adding my own tree nodes, each with a 'compile' method to
create the necessary evaluation objects for this subtree.
However, now my tree parser does odd things.
I get class cast errors (it is trying to cast to a CommonAST and I derived
from a BaseAST). So I derived from a CommonAST to prevent this.
Still problems like 'expecting AST node: if' and so on.
Even if I add
tokens { PLUS<AST=antlr.CommonAST>; } I get these errors. Without this, it
all works fine.

I normally created parsers to create robust access to structured data, but
never used it to 'generate code' (in my case a lot of new NodeName(left,
right) etc).
Where is the best place to insert this? I can add it to the tree parser:
#(OR l=expr r=expr) { res = new OR(l, r); }
or I can generate it via my compile() method call in custom AST nodes
(assuming I get it to work, in which case I don't need the tree parser).
However I would also like to print the expressions, which I do via a print()
method in my custom AST nodes. To do this with the tree parser, I would need
to have a separate tree parser (correct?) which seems a little verbose.
Any hints of the ideal way to attack this?

Thanks.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From maaxxxcal at yahoo.com  Mon Oct  6 16:28:01 2003
From: maaxxxcal at yahoo.com (maaxxxcal)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Re: A simple prepocessor with a lexer?
In-Reply-To: <815C77BC-F77C-11D7-9042-000A95891192@cs.usfca.edu>
Message-ID: <blstq1+2ruq@eGroups.com>

Wow thanks for your quick answer, it worked really well. I didn't 
know about the "filter" option.
One last thing though: I'd like to generate one token for each piece 
of text that is between my pragmas. How would you do that?
I tried to use filter=RULE to catch all the filtered text, but I 
don't know how to express "anything until the next pragma", since I 
cannot use ~PRAGMA (if PRAGMA is the rule defining the syntax of my 
pragma).

With the option filter=CODE, I tried

CODE: . ; (equivalent to filter=true)but that creates a token for 
every character
CODE: (.)*; but that consumes all the characters till EOF

What startegy would you use to effectively catch all the text between 
the pragmas?

Thanks again for your help!


--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
wrote:
> Hi.  Damn yahoogroups sucks.  Post from home didn't make it.  
Anyway, 
> try this:
> 
> class L extends Lexer;
> 
> options {
> 	filter=true;
> }
> 
> CMT : "--" ( PRAGMA | (options{greedy=false;}:.)* '\n' ) ;
> 
> protected
> PRAGMA : "<pragma"> ... ;
> 
> On Saturday, October 4, 2003, at 08:21 PM, maaxxxcal wrote:
> 
> > I am trying to write a very simple preprocessor but I'm not quite
> > sure how to go about it.
> > Here's the problem, I need to process pragmas that are really 
inside
> > single-line comments in a SQL script (not necessarily from the 
start
> > of line).
> > For instance, I can have input of the form:
> >
> > <sql>
> > ...
> > <sql> -- <pragma>
> > ...
> > <sql>
> >
> > What is the simplest way to achieve this with ANTLR? Is a lexer
> > enough as long as the syntax of the pragma is not too complex?
> > I tried writing such a lexer but I'm having trouble defining a 
rule
> > that would match "anything until --"
> >
> > Thanks for your help!
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/
> >
> >
> >
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jbb at acm.org  Mon Oct  6 19:45:20 2003
From: jbb at acm.org (jbb@acm.org)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] ambiguous grammar
In-Reply-To: <1065462137.14111.26.camel@training04> (message from jagad on
	Tue, 07 Oct 2003 00:42:17 +0700)
References: <1065462137.14111.26.camel@training04>
Message-ID: <E1A6hqi-0001X1-00@gecko.home.org>


On Tue, 07 Oct 2003 00:42:17 +0700, jagad <jagad@enciety.com> wrote:
>Hi All,
>
>I have simple grammar:
>
>rule1  : '(' rule2 (COMMA rule2)* ')'
>rule2  : rule1 | expr
>
>expr   : factor (op factor)*
>factor : INTEGER | '(' expr ')'
>op     : '+' | '-'
>
>the grammar is conflicting because the input like: ((1),(2)) is
>undetermine. "(1)" is could be rule1 or expr.
>If I force rule1 using:
>
>rule1  : ('(')=>'(' rule2 (COMMA rule2)* ')' | expr
>
>the grammar will valid for "((1),(2))" but fail for: "((1)+1, (2))"
>which it should be valid according that "(1)+1" is should be an expr.
>
>Anybody knows how to overcome this problem?

I haven't actually tried running this through the antlr.Tool, but I
think it is unambigous:

rule1  : '(' expr (COMMA expr)* ')'
expr   : factor (op factor)*
factor : INTEGER | rule1
op     : '+' | '-'

But the above accepts "(1,2)+3" or "3+(2,1)" while your original
grammar does not. I think a simple semantic error check for the
presence of a COMMA when an op is encountered would be easy to add if
that restriction is important...

Hope this helps.
	-jbb

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tom at psy.unsw.edu.au  Mon Oct  6 20:28:39 2003
From: tom at psy.unsw.edu.au (Thomas Brandon)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Re: Handling Lots of Keywords?
In-Reply-To: <blpl6h+pm09@eGroups.com>
Message-ID: <bltbt7+38t5@eGroups.com>

As long as you use actual keywords (defined) in the tokens section 
Antlr should scale OK (see 
http://www.antlr.org/doc/metalang.html#TokensSection). Having 1000 
rules for your keywords would probably be a rather large performance 
hit due to large bitsets (depending where they are used I guess). But 
if you have keywords then all Antlr does is add them to a Hashtable 
and test them in the testLiterals routine.

However, it might be better to use your own checking code to avoid 
having to put all the keywords in the grammar. If you maintain your 
own Hashtable and use a semantic action like:
IDENT_OR_KEYWORD:
    IDENT
    { if(isBrailleKeyword($getText)) $setType(BRAILLE_KEYWORD); }
    ;

where boolean isBrailleKeyword(String) is you function to check 
against your hashtable. That way you just need to maintain your 
hashtable and don't need to maintain keywords in your grammar. I did 
something similar with the data stored into an XML file. That way you 
can associate other info with the keywords all in one place. This 
should scale as well as a Hashtable scales which for only 1000 items 
shouldn't be too bad.

Tom.
--- In antlr-interest@yahoogroups.com, "dotlessbraille" 
<easjolly@i...> wrote:
> I am trying to analyze braille texts using the current US standard 
> representation for braille math.  Braille uses 63 characters (and 
> the space). It is typically represented electronically with the 63 
> ASCII codes corresponding to the small (xor capital) letters and 
all 
> but 5 of the special characters so the input is well-defined.
> 
> If the tokenization is treated as a lexical problem, there is the 
> unusual feature that there are more than 1000 keywords, some with 
> more than a dozen characters.  (The keywords are mainly used to 
> represent mathematical symbols by a notation more intuitive than 
> Unicode character codes.)
> 
> If any of you have ever dealt with this number of keywords, I'd be 
> grateful for advice.   
> 
> Thanks,
> Susan


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jagad at enciety.com  Mon Oct  6 21:25:02 2003
From: jagad at enciety.com (jagad)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] ambiguous grammar
In-Reply-To: <E1A6hqi-0001X1-00@gecko.home.org>
References: <1065462137.14111.26.camel@training04>
	 <E1A6hqi-0001X1-00@gecko.home.org>
Message-ID: <1065500702.2052.9.camel@training04>


Hi Jbb,

> 
> I haven't actually tried running this through the antlr.Tool, but I
> think it is unambigous:
> 
> rule1  : '(' expr (COMMA expr)* ')'
> expr   : factor (op factor)*
> factor : INTEGER | rule1
> op     : '+' | '-'
> 

Yes, it's works, Thanks!

> But the above accepts "(1,2)+3" or "3+(2,1)" while your original
> grammar does not. I think a simple semantic error check for the
> presence of a COMMA when an op is encountered would be easy to add if
> that restriction is important...

Correct, the semantic error checking is easy to do with ANTLR, now my
Delphi/Kylix grammar is works :)

> 
> Hope this helps.
> 	-jbb
> 

It's very helpfull to me :)

Thanks and Kindest Regards

jagad


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pwolleba at yahoo.no  Tue Oct  7 00:18:58 2003
From: pwolleba at yahoo.no (pwolleba)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Skipping grammar
Message-ID: <bltpd2+7npi@eGroups.com>

I am pretty new to ANTLR so maybe this question is very trivial, if 
so even better then maybe it is a simple solution to my problem. 
Anyway I am struggling with writing a new parser in ANTLR to replace 
and old implementation in Flex/Bison, this to make a product that are 
open for implementation from both C++ as well as Java. 

The parser will parse a language that we are using to build 
databases, and it must support this language 100% if to be accepted. 

Here is the code cutting that I am struggling with.

method name{
  SomeText!()text[];
  if(a < b && b < c){
     SomeText()!()[];
  }
  else{
     SomeText()!()[];
  };
};

I am not interesting in the expression that is inside the name 
method, I just want ANTLR to grab the text for me, and put it as a 
node inside the tree. The problem is the fact that the if/else 
statement is ending with a "};" which is the same token as the method 
end token, and I have no guarantee that there could be more that one 
inside the method. A solution would be to make a counter that will 
increase for each "{" and decrease for each "}", then I would know 
when the method ends. To my frustration I don't know how I should 
make such a counter in ANTRL, that still supports implement in both 
Java or C++ code.
I would be really really happy if someone could help me with this 
problem!

Best reagards,

Per



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From m_schellens at hotmail.com  Tue Oct  7 01:16:06 2003
From: m_schellens at hotmail.com (marcschellens)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Limits of  tree generation (C++)
Message-ID: <bltso6+7ida@eGroups.com>

I have:

comp_assign_expr!
    : #(a1:PLUS_EQ l1:expr r1:expr) 
        { #comp_assign_expr=#([ASSIGN,":="],([PLUS,"+"],l1,r1),l1);} 
    ; 

and get for example (for l1 = VAR, r1 = 1):

Tree parser output:
<:=
  <+ VAR 1 >VAR 1
>

But I think it should be:

Tree parser output:
<:=
  <+ VAR 1 >VAR // no 1
>

The problem is obviously, that I use one ASTNode (l1) twice in the
output tree.
Using ANTLR 2.7.2, how can I archieve what I want?
thanks,
marc



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Tue Oct  7 02:43:46 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Skipping grammar
In-Reply-To: <bltpd2+7npi@eGroups.com>
Message-ID: <001901c38cb7$80c035d0$1bc8090a@oddi.is>

I haven't tried this, but you could have this in your lexer:

class MyLexer extends Lexer

tokens {
  INNER_LCURLY, INNER_RCURLY;
}

{
  private int nestingLevel = 0;
}

LCURLY
  : '{' { if (++i > 0) $setType(INNER_LCURLY); }
  ;

RCURLY
  : '}' { if (i > 0) { i--; $setType(INNER_RCURLY); }
  ;

which gives the parser seperate tokens for inner and outer curly-braces.
This allows you to do this in the Parser

method
  : "method" mName LCURLY ( ~RCURLY )* RCURLY
  ;

Arnar

> -----Original Message-----
> From: pwolleba [mailto:pwolleba@yahoo.no] 
> Sent: 7. okt?ber 2003 07:19
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Skipping grammar
> 
> 
> I am pretty new to ANTLR so maybe this question is very trivial, if 
> so even better then maybe it is a simple solution to my problem. 
> Anyway I am struggling with writing a new parser in ANTLR to replace 
> and old implementation in Flex/Bison, this to make a product that are 
> open for implementation from both C++ as well as Java. 
> 
> The parser will parse a language that we are using to build 
> databases, and it must support this language 100% if to be accepted. 
> 
> Here is the code cutting that I am struggling with.
> 
> method name{
>   SomeText!()text[];
>   if(a < b && b < c){
>      SomeText()!()[];
>   }
>   else{
>      SomeText()!()[];
>   };
> };
> 
> I am not interesting in the expression that is inside the name 
> method, I just want ANTLR to grab the text for me, and put it as a 
> node inside the tree. The problem is the fact that the if/else 
> statement is ending with a "};" which is the same token as the method 
> end token, and I have no guarantee that there could be more that one 
> inside the method. A solution would be to make a counter that will 
> increase for each "{" and decrease for each "}", then I would know 
> when the method ends. To my frustration I don't know how I should 
> make such a counter in ANTRL, that still supports implement in both 
> Java or C++ code.
> I would be really really happy if someone could help me with this 
> problem!
> 
> Best reagards,
> 
> Per
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Tue Oct  7 02:47:29 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Skipping grammar
In-Reply-To: <001901c38cb7$80c035d0$1bc8090a@oddi.is>
Message-ID: <001a01c38cb8$0605a450$1bc8090a@oddi.is>

I'm sorry, this obviously doesn't work. Change

if (++i > 0)

to 

if (i++ > 0)

and it should.

Arnar

> -----Original Message-----
> From: Arnar Birgisson [mailto:arnarb@oddi.is] 
> Sent: 7. okt?ber 2003 09:44
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Skipping grammar
> 
> 
> I haven't tried this, but you could have this in your lexer:
> 
> class MyLexer extends Lexer
> 
> tokens {
>   INNER_LCURLY, INNER_RCURLY;
> }
> 
> {
>   private int nestingLevel = 0;
> }
> 
> LCURLY
>   : '{' { if (++i > 0) $setType(INNER_LCURLY); }
>   ;
> 
> RCURLY
>   : '}' { if (i > 0) { i--; $setType(INNER_RCURLY); }
>   ;
> 
> which gives the parser seperate tokens for inner and outer 
> curly-braces.
> This allows you to do this in the Parser
> 
> method
>   : "method" mName LCURLY ( ~RCURLY )* RCURLY
>   ;
> 
> Arnar
> 
> > -----Original Message-----
> > From: pwolleba [mailto:pwolleba@yahoo.no] 
> > Sent: 7. okt?ber 2003 07:19
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Skipping grammar
> > 
> > 
> > I am pretty new to ANTLR so maybe this question is very trivial, if 
> > so even better then maybe it is a simple solution to my problem. 
> > Anyway I am struggling with writing a new parser in ANTLR 
> to replace 
> > and old implementation in Flex/Bison, this to make a 
> product that are 
> > open for implementation from both C++ as well as Java. 
> > 
> > The parser will parse a language that we are using to build 
> > databases, and it must support this language 100% if to be 
> accepted. 
> > 
> > Here is the code cutting that I am struggling with.
> > 
> > method name{
> >   SomeText!()text[];
> >   if(a < b && b < c){
> >      SomeText()!()[];
> >   }
> >   else{
> >      SomeText()!()[];
> >   };
> > };
> > 
> > I am not interesting in the expression that is inside the name 
> > method, I just want ANTLR to grab the text for me, and put it as a 
> > node inside the tree. The problem is the fact that the if/else 
> > statement is ending with a "};" which is the same token as 
> the method 
> > end token, and I have no guarantee that there could be more 
> that one 
> > inside the method. A solution would be to make a counter that will 
> > increase for each "{" and decrease for each "}", then I would know 
> > when the method ends. To my frustration I don't know how I should 
> > make such a counter in ANTRL, that still supports implement in both 
> > Java or C++ code.
> > I would be really really happy if someone could help me with this 
> > problem!
> > 
> > Best reagards,
> > 
> > Per
> > 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Anthony.Youngman at ECA-International.com  Tue Oct  7 06:33:08 2003
From: Anthony.Youngman at ECA-International.com (Anthony W Youngman)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Skipping grammar
Message-ID: <C7FE35004D40FD45AA342991B88CE40409A7DC@lnml1.eca-international.local>

I think you're missing the point. Define a ; as SEMI. The way I'd do it
(and this is all pseudocode) is

if_statement: "IF" lcurly (method)* rcurly "ELSE" lcurly (method)*
rcurly SEMI ;
method: blah_blah SEMI ;

That way, the lexer doesn't care whether ; is ending a method or an if
clause, and the parser won't get confused because when it hits a
right-curly it will be expecting an ELSE or a SEMI, and not a method.
And if the ELSE is optional you just mark it as such so when the parser
hits the right-curly after the if, it's expecting an ELSE or a SEMI and
nothing else.

Cheers,
Wol

-----Original Message-----
From: pwolleba [mailto:pwolleba@yahoo.no] 
Sent: 07 October 2003 08:19
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Skipping grammar


I am pretty new to ANTLR so maybe this question is very trivial, if 
so even better then maybe it is a simple solution to my problem. 
Anyway I am struggling with writing a new parser in ANTLR to replace 
and old implementation in Flex/Bison, this to make a product that are 
open for implementation from both C++ as well as Java. 

The parser will parse a language that we are using to build 
databases, and it must support this language 100% if to be accepted. 

Here is the code cutting that I am struggling with.

method name{
  SomeText!()text[];
  if(a < b && b < c){
     SomeText()!()[];
  }
  else{
     SomeText()!()[];
  };
};

I am not interesting in the expression that is inside the name 
method, I just want ANTLR to grab the text for me, and put it as a 
node inside the tree. The problem is the fact that the if/else 
statement is ending with a "};" which is the same token as the method 
end token, and I have no guarantee that there could be more that one 
inside the method. A solution would be to make a counter that will 
increase for each "{" and decrease for each "}", then I would know 
when the method ends. To my frustration I don't know how I should 
make such a counter in ANTRL, that still supports implement in both 
Java or C++ code.
I would be really really happy if someone could help me with this 
problem!

Best reagards,

Per



 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 





***********************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

***********************************************************************************


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Mike.Jones at woofumdust.com  Tue Oct  7 07:15:23 2003
From: Mike.Jones at woofumdust.com (Mike Jones)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Re: .Net
In-Reply-To: <blsi6b+o32c@eGroups.com>
Message-ID: <001101c38cdd$72f4e920$0a00000a@woofumdust.com>

Micheal,

Thanks, this allows my project to proceed. If I have any problems, I
will post them here. I was really worried I would lose access to ANTLR
in .Net. Java is nice, but my tools have to run on .Net or no one is
interested in them. Such is my world.

Thanks,

Mike

-----Original Message-----
From: micheal_jor [mailto:open.zone@virgin.net] 
Sent: Monday, October 06, 2003 2:10 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: .Net

--- In antlr-interest@yahoogroups.com, "Mike Jones" <Mike.Jones@w...>
wrote:
> Andrew,
> 
> Is the C# or J# version more complete/stable???
> 
> Mike

Mike,

The C# and J# distributions aren't equivalent, they are different tools.


The C# distribution contains a code generator that is a part of the
ANTLR tool[1*] that enables the generation of Lexers, Parsers and
TreeParsers in C#. It also contains a .NET/CLR runtime library that
all such ANTLR-generated code needs to compile and execute properly.

The J# Project distribution is a project file for Visual Studio.NET
and some instructions that allows a recompile/port of the ANTLR tool
to J# (a Java compiler that generates code for the .NET/CLR platform).
This produces an executable version of the ANTLR that runs directly on
.NET/CLR without any need for Java[2*]. Hence the J# distribution
_needs_ the source to ANTLR including the code generator component
from the C# distribution.

So, to answer your implied question, you will need the following to be
able to use ANTLR in a Java-less environment:

1. The J# binary distro - for the tool executable
2. The stock ANTLR v2.7.2 distro
3. The ANTLR/C# update distro

(1) is the the ANTLR executable for .NET/CLR
(2) and (3) together allow you to build the ANTLR/C# .NET runtime
library

If you need to rebuild the ANTLR tool executable for the .NET platform
(i.e. 1), you will need a copy of J#, the J# Project distro and some
knowledge of Java & J# of course.

Cheers,

Micheal

[1*]   The ANTLR tool is the command-line app that generates your
Lexer/Parser/TreeParser when fed an approriate grammar file. It is
written in Java.
on of the C# bits.

[2*]   This is of course the ANTLR 2.7.2 .NET executable on the site.


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Tue Oct  7 07:46:35 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Skipping grammar
Message-ID: <sf82d1f5.097@emil.oddi.is>

Hi..

In my earlier post, I understood Per differently. I think he want's to
parse "method name{ <whatever> };" and just eat up <whatever>, including
any nested braces, and put it in a variable, completely without lexing
and/or parsing it. Per, is this correct?

The result of all this being a tree something like this:

METHOD
 |
name-body

where the body node contains anything inside the {..} as it's text.

Arnar

>>> Anthony.Youngman@ECA-International.com 10/07/03 1:33 PM >>>
I think you're missing the point. Define a ; as SEMI. The way I'd do it
(and this is all pseudocode) is

if_statement: "IF" lcurly (method)* rcurly "ELSE" lcurly (method)*
rcurly SEMI ;
method: blah_blah SEMI ;

That way, the lexer doesn't care whether ; is ending a method or an if
clause, and the parser won't get confused because when it hits a
right-curly it will be expecting an ELSE or a SEMI, and not a method.
And if the ELSE is optional you just mark it as such so when the parser
hits the right-curly after the if, it's expecting an ELSE or a SEMI and
nothing else.

Cheers,
Wol

-----Original Message-----
From: pwolleba [mailto:pwolleba@yahoo.no] 
Sent: 07 October 2003 08:19
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Skipping grammar


I am pretty new to ANTLR so maybe this question is very trivial, if 
so even better then maybe it is a simple solution to my problem. 
Anyway I am struggling with writing a new parser in ANTLR to replace 
and old implementation in Flex/Bison, this to make a product that are 
open for implementation from both C++ as well as Java. 

The parser will parse a language that we are using to build 
databases, and it must support this language 100% if to be accepted. 

Here is the code cutting that I am struggling with.

method name{
  SomeText!()text[];
  if(a < b && b < c){
     SomeText()!()[];
  }
  else{
     SomeText()!()[];
  };
};

I am not interesting in the expression that is inside the name 
method, I just want ANTLR to grab the text for me, and put it as a 
node inside the tree. The problem is the fact that the if/else 
statement is ending with a "};" which is the same token as the method 
end token, and I have no guarantee that there could be more that one 
inside the method. A solution would be to make a counter that will 
increase for each "{" and decrease for each "}", then I would know 
when the method ends. To my frustration I don't know how I should 
make such a counter in ANTRL, that still supports implement in both 
Java or C++ code.
I would be really really happy if someone could help me with this 
problem!

Best reagards,

Per



 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 





***********************************************************************************

This transmission is intended for the named recipient only. It may
contain private and confidential information. If this has come to you in
error you must not act on anything disclosed in it, nor must you copy
it, modify it, disseminate it in any way, or show it to anyone. Please
e-mail the sender to inform us of the transmission error or telephone
ECA International immediately and delete the e-mail from your
information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2
9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New
York +1 212 582 2333.

***********************************************************************************


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue Oct  7 09:31:59 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Limits of  tree generation (C++)
Message-ID: <72C9789739C4214096AE945753B11EA36B1F32@mypxmail04.bco-home.com>

You are using the same node twice--l1 is a node already and when you add it
the second time it already has a sibling of r1.  So copy the node first.
Note l1 may be a whole tree since it is calling expr.  There are methods for
this, not sure what it is in C++, in java I think it is called dupTree or
something.

Monty

-----Original Message-----
From: marcschellens [mailto:m_schellens@hotmail.com] 
Sent: Tuesday, October 07, 2003 1:16 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Limits of tree generation (C++)

I have:

comp_assign_expr!
    : #(a1:PLUS_EQ l1:expr r1:expr) 
        { #comp_assign_expr=#([ASSIGN,":="],([PLUS,"+"],l1,r1),l1);} 
    ; 

and get for example (for l1 = VAR, r1 = 1):

Tree parser output:
<:=
  <+ VAR 1 >VAR 1
>

But I think it should be:

Tree parser output:
<:=
  <+ VAR 1 >VAR // no 1
>

The problem is obviously, that I use one ASTNode (l1) twice in the
output tree.
Using ANTLR 2.7.2, how can I archieve what I want?
thanks,
marc



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Tue Oct  7 09:50:45 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Re: A simple prepocessor with a lexer?
In-Reply-To: <blstq1+2ruq@eGroups.com>
Message-ID: <65721E6A-F8E6-11D7-9042-000A95891192@cs.usfca.edu>


On Monday, October 6, 2003, at 04:28 PM, maaxxxcal wrote:

> Wow thanks for your quick answer, it worked really well. I didn't
> know about the "filter" option.
> One last thing though: I'd like to generate one token for each piece
> of text that is between my pragmas.

Oh that's different.  Simplest thing to do is create another lexer that 
handles that text and then, using a SharedLexerInputState (or whatever 
it's called), create an instance of the new lexer in the outer lexer 
and then make a while loop around it's nextToken().

You can grep for that class name in the examples probably.

Ter


> How would you do that?
> I tried to use filter=RULE to catch all the filtered text, but I
> don't know how to express "anything until the next pragma", since I
> cannot use ~PRAGMA (if PRAGMA is the rule defining the syntax of my
> pragma).
>
> With the option filter=CODE, I tried
>
> CODE: . ; (equivalent to filter=true)but that creates a token for
> every character
> CODE: (.)*; but that consumes all the characters till EOF
>
> What startegy would you use to effectively catch all the text between
> the pragmas?
>
> Thanks again for your help!
>
>
> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...>
> wrote:
>> Hi.  Damn yahoogroups sucks.  Post from home didn't make it.
> Anyway,
>> try this:
>>
>> class L extends Lexer;
>>
>> options {
>> 	filter=true;
>> }
>>
>> CMT : "--" ( PRAGMA | (options{greedy=false;}:.)* '\n' ) ;
>>
>> protected
>> PRAGMA : "<pragma"> ... ;
>>
>> On Saturday, October 4, 2003, at 08:21 PM, maaxxxcal wrote:
>>
>>> I am trying to write a very simple preprocessor but I'm not quite
>>> sure how to go about it.
>>> Here's the problem, I need to process pragmas that are really
> inside
>>> single-line comments in a SQL script (not necessarily from the
> start
>>> of line).
>>> For instance, I can have input of the form:
>>>
>>> <sql>
>>> ...
>>> <sql> -- <pragma>
>>> ...
>>> <sql>
>>>
>>> What is the simplest way to achieve this with ANTLR? Is a lexer
>>> enough as long as the syntax of the pragma is not too complex?
>>> I tried writing such a lexer but I'm having trouble defining a
> rule
>>> that would match "anything until --"
>>>
>>> Thanks for your help!
>>>
>>>
>>>
>>>
>>> Your use of Yahoo! Groups is subject to
>>> http://docs.yahoo.com/info/terms/
>>>
>>>
>>>
>> --
>> Professor Comp. Sci., University of San Francisco
>> Creator, ANTLR Parser Generator, http://www.antlr.org
>> Co-founder, http://www.jguru.com
>> Co-founder, http://www.knowspam.net enjoy email again!
>> Co-founder, http://www.peerscope.com pure link sharing
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pwolleba at yahoo.no  Tue Oct  7 10:00:59 2003
From: pwolleba at yahoo.no (pwolleba)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Re: Skipping grammar
In-Reply-To: <sf82d1f5.097@emil.oddi.is>
Message-ID: <blurgb+j0po@eGroups.com>

Yes that is correct, what is inside the bracket is a different 
language which I at the moment don't want to write a parser for (it 
is pretty complex and big). Anyway I have just come back to work, and 
I am going to try out your solution Arnar, hopefully it will work! 

I just want to thank the community for trying to find a solution to 
my question, and I must say it came really fast!

Best regards,

Per


--- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
<arnarb@o...> wrote:
> Hi..
> 
> In my earlier post, I understood Per differently. I think he want's 
to
> parse "method name{ <whatever> };" and just eat up <whatever>, 
including
> any nested braces, and put it in a variable, completely without 
lexing
> and/or parsing it. Per, is this correct?
> 
> The result of all this being a tree something like this:
> 
> METHOD
>  |
> name-body
> 
> where the body node contains anything inside the {..} as it's text.
> 
> Arnar
> 
> >>> Anthony.Youngman@E... 10/07/03 1:33 PM >>>
> I think you're missing the point. Define a ; as SEMI. The way I'd 
do it
> (and this is all pseudocode) is
> 
> if_statement: "IF" lcurly (method)* rcurly "ELSE" lcurly (method)*
> rcurly SEMI ;
> method: blah_blah SEMI ;
> 
> That way, the lexer doesn't care whether ; is ending a method or an 
if
> clause, and the parser won't get confused because when it hits a
> right-curly it will be expecting an ELSE or a SEMI, and not a 
method.
> And if the ELSE is optional you just mark it as such so when the 
parser
> hits the right-curly after the if, it's expecting an ELSE or a SEMI 
and
> nothing else.
> 
> Cheers,
> Wol
> 
> -----Original Message-----
> From: pwolleba [mailto:pwolleba@y...] 
> Sent: 07 October 2003 08:19
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Skipping grammar
> 
> 
> I am pretty new to ANTLR so maybe this question is very trivial, if 
> so even better then maybe it is a simple solution to my problem. 
> Anyway I am struggling with writing a new parser in ANTLR to 
replace 
> and old implementation in Flex/Bison, this to make a product that 
are 
> open for implementation from both C++ as well as Java. 
> 
> The parser will parse a language that we are using to build 
> databases, and it must support this language 100% if to be 
accepted. 
> 
> Here is the code cutting that I am struggling with.
> 
> method name{
>   SomeText!()text[];
>   if(a < b && b < c){
>      SomeText()!()[];
>   }
>   else{
>      SomeText()!()[];
>   };
> };
> 
> I am not interesting in the expression that is inside the name 
> method, I just want ANTLR to grab the text for me, and put it as a 
> node inside the tree. The problem is the fact that the if/else 
> statement is ending with a "};" which is the same token as the 
method 
> end token, and I have no guarantee that there could be more that 
one 
> inside the method. A solution would be to make a counter that will 
> increase for each "{" and decrease for each "}", then I would know 
> when the method ends. To my frustration I don't know how I should 
> make such a counter in ANTRL, that still supports implement in both 
> Java or C++ code.
> I would be really really happy if someone could help me with this 
> problem!
> 
> Best reagards,
> 
> Per
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 
> 
> 
> 
**********************************************************************
*************
> 
> This transmission is intended for the named recipient only. It may
> contain private and confidential information. If this has come to 
you in
> error you must not act on anything disclosed in it, nor must you 
copy
> it, modify it, disseminate it in any way, or show it to anyone. 
Please
> e-mail the sender to inform us of the transmission error or 
telephone
> ECA International immediately and delete the e-mail from your
> information system.
> 
> Telephone numbers for ECA International offices are: Sydney +61 (0)2
> 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 
and New
> York +1 212 582 2333.
> 
> 
**********************************************************************
*************
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pwolleba at yahoo.no  Tue Oct  7 10:34:27 2003
From: pwolleba at yahoo.no (pwolleba)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Re: Skipping grammar
In-Reply-To: <blurgb+j0po@eGroups.com>
Message-ID: <blutf3+qp7c@eGroups.com>

Hello again!

I am looking at your example Arnar, and I have some questions. 
When I wrote my example I should have included some more information. 
The methode node is inside of another node called member (see 
example) and it can be more than one!

Member{
Methode {
	Sometext;
};
};

This makes your example a bit more difficult to implement, since the 
counter will start a zero at the first bracket, which is the member 
bracket. I must somehow be able to set nestingLevel = 0 from the 
parser when the method node is starting.
How do I do that?

best regards,
Per

Ps: I guess it should be nestingLevel++ instead of i++. Correct?

--- In antlr-interest@yahoogroups.com, "pwolleba" <pwolleba@y...> 
wrote:
> Yes that is correct, what is inside the bracket is a different 
> language which I at the moment don't want to write a parser for (it 
> is pretty complex and big). Anyway I have just come back to work, 
and 
> I am going to try out your solution Arnar, hopefully it will work! 
> 
> I just want to thank the community for trying to find a solution to 
> my question, and I must say it came really fast!
> 
> Best regards,
> 
> Per
> 
> 
> --- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
> <arnarb@o...> wrote:
> > Hi..
> > 
> > In my earlier post, I understood Per differently. I think he 
want's 
> to
> > parse "method name{ <whatever> };" and just eat up <whatever>, 
> including
> > any nested braces, and put it in a variable, completely without 
> lexing
> > and/or parsing it. Per, is this correct?
> > 
> > The result of all this being a tree something like this:
> > 
> > METHOD
> >  |
> > name-body
> > 
> > where the body node contains anything inside the {..} as it's 
text.
> > 
> > Arnar
> > 
> > >>> Anthony.Youngman@E... 10/07/03 1:33 PM >>>
> > I think you're missing the point. Define a ; as SEMI. The way I'd 
> do it
> > (and this is all pseudocode) is
> > 
> > if_statement: "IF" lcurly (method)* rcurly "ELSE" lcurly (method)*
> > rcurly SEMI ;
> > method: blah_blah SEMI ;
> > 
> > That way, the lexer doesn't care whether ; is ending a method or 
an 
> if
> > clause, and the parser won't get confused because when it hits a
> > right-curly it will be expecting an ELSE or a SEMI, and not a 
> method.
> > And if the ELSE is optional you just mark it as such so when the 
> parser
> > hits the right-curly after the if, it's expecting an ELSE or a 
SEMI 
> and
> > nothing else.
> > 
> > Cheers,
> > Wol
> > 
> > -----Original Message-----
> > From: pwolleba [mailto:pwolleba@y...] 
> > Sent: 07 October 2003 08:19
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Skipping grammar
> > 
> > 
> > I am pretty new to ANTLR so maybe this question is very trivial, 
if 
> > so even better then maybe it is a simple solution to my problem. 
> > Anyway I am struggling with writing a new parser in ANTLR to 
> replace 
> > and old implementation in Flex/Bison, this to make a product that 
> are 
> > open for implementation from both C++ as well as Java. 
> > 
> > The parser will parse a language that we are using to build 
> > databases, and it must support this language 100% if to be 
> accepted. 
> > 
> > Here is the code cutting that I am struggling with.
> > 
> > method name{
> >   SomeText!()text[];
> >   if(a < b && b < c){
> >      SomeText()!()[];
> >   }
> >   else{
> >      SomeText()!()[];
> >   };
> > };
> > 
> > I am not interesting in the expression that is inside the name 
> > method, I just want ANTLR to grab the text for me, and put it as 
a 
> > node inside the tree. The problem is the fact that the if/else 
> > statement is ending with a "};" which is the same token as the 
> method 
> > end token, and I have no guarantee that there could be more that 
> one 
> > inside the method. A solution would be to make a counter that 
will 
> > increase for each "{" and decrease for each "}", then I would 
know 
> > when the method ends. To my frustration I don't know how I should 
> > make such a counter in ANTRL, that still supports implement in 
both 
> > Java or C++ code.
> > I would be really really happy if someone could help me with this 
> > problem!
> > 
> > Best reagards,
> > 
> > Per
> > 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> > 
> > 
> > 
> > 
> 
**********************************************************************
> *************
> > 
> > This transmission is intended for the named recipient only. It may
> > contain private and confidential information. If this has come to 
> you in
> > error you must not act on anything disclosed in it, nor must you 
> copy
> > it, modify it, disseminate it in any way, or show it to anyone. 
> Please
> > e-mail the sender to inform us of the transmission error or 
> telephone
> > ECA International immediately and delete the e-mail from your
> > information system.
> > 
> > Telephone numbers for ECA International offices are: Sydney +61 
(0)2
> > 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 
> and New
> > York +1 212 582 2333.
> > 
> > 
> 
**********************************************************************
> *************
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Tue Oct  7 11:12:48 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Re: .Net
In-Reply-To: <001101c38cdd$72f4e920$0a00000a@woofumdust.com>
Message-ID: <bluvn0+nfps@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Mike Jones" <Mike.Jones@w...>
wrote:
> Micheal,
> 
> Thanks, this allows my project to proceed. If I have any problems, I
> will post them here. I was really worried I would lose access to ANTLR
> in .Net. Java is nice, but my tools have to run on .Net or no one is
> interested in them. Such is my world.
> 
> Thanks,
> 
> Mike

You're welcome.

Just to be clear Mike, regardless of which ANTLR tool executable you
choose[1*], it will happilly generate Lexers/Parser/TreeParsers in
*any* of the languages that ANTLR supports (i.e. Java, C++ and C#).
All you need is the appropriate runtime library for your chosen target
language and you can build this using full ANTLR distro (plus any
relevant updates).

I use the Java version of the tool for instance and I generate
Lexers/Parser/TreeParsers in Java, C++ and C#. I could do the same
using the .NET and gcj versions too. In fact, the output should be
identical if I run my grammar file through any of them.

Cheers,

Micheal

[1*]   There are currently 3 executables that I know of:
        - the standard one for Java and, 
        - the J# recompile/port for .NET and,
        - the gcj recompile/port for Linux systems 
          (gcj can probably build ANTLR exes for other systems).


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From maaxxxcal at yahoo.com  Tue Oct  7 17:36:27 2003
From: maaxxxcal at yahoo.com (maaxxxcal)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Re: A simple prepocessor with a lexer?
In-Reply-To: <65721E6A-F8E6-11D7-9042-000A95891192@cs.usfca.edu>
Message-ID: <blvm6b+oupj@eGroups.com>

Hummm ok, I promise this is the last post on that topic. I realize 
that maybe I should have been more clear about what I was trying to 
achieve from the beginning.
So the class you're talking about is LexerSharedInputState, but I'm 
not sure it would do for me because I don't know when to stop the 
inner Lexer. Let me explain.
One of the effect of my pragma is to define what the statement 
separator is going to be for the next portion of code. I already have 
a lexer and parser that know how to parse a single statement, with no 
separator. Now what I'm trying to do is to wite a lexer that will 
process my script, understand the pragmas and cut statements to feed 
them to my single-statement lexer/parser.

Here's the structure that the scripts I have to parse can have:
-- PRAGMA separator=@
-- PRAGMA error=on
<statement>@
<statement>@
-- PRAGMA error=off
-- PRAGMA separator=%
<statement>%
<statement>%

What's interesting in this problem is that an important part of the 
syntax (the statement separator) is only defined at runtime. I 
believe there is no way to do that with only 1 lexer/parser with 
ANTLR because it has to be able to predict statically what the 
alternatives are.

So what strategy would you use?
Thanks again for your help!!

> Oh that's different.  Simplest thing to do is create another lexer 
that 
> handles that text and then, using a SharedLexerInputState (or 
whatever 
> it's called), create an instance of the new lexer in the outer 
lexer 
> and then make a while loop around it's nextToken().
> 
> You can grep for that class name in the examples probably.
> 
> Ter
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Tue Oct  7 17:45:01 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Re: A simple prepocessor with a lexer?
In-Reply-To: <blvm6b+oupj@eGroups.com>
Message-ID: <A65D9970-F928-11D7-9042-000A95891192@cs.usfca.edu>

Ack...a context-sensitive problem.  Ok, perhaps a two pass system where 
the first pass reads the separator and then converts them all to a 
single, normalized separator.  Then the real parser can walk the output 
and easily parse the input. :)  Think preprocessor.

Ter
On Tuesday, October 7, 2003, at 05:36 PM, maaxxxcal wrote:

> Hummm ok, I promise this is the last post on that topic. I realize
> that maybe I should have been more clear about what I was trying to
> achieve from the beginning.
> So the class you're talking about is LexerSharedInputState, but I'm
> not sure it would do for me because I don't know when to stop the
> inner Lexer. Let me explain.
> One of the effect of my pragma is to define what the statement
> separator is going to be for the next portion of code. I already have
> a lexer and parser that know how to parse a single statement, with no
> separator. Now what I'm trying to do is to wite a lexer that will
> process my script, understand the pragmas and cut statements to feed
> them to my single-statement lexer/parser.
>
> Here's the structure that the scripts I have to parse can have:
> -- PRAGMA separator=@
> -- PRAGMA error=on
> <statement>@
> <statement>@
> -- PRAGMA error=off
> -- PRAGMA separator=%
> <statement>%
> <statement>%
>
> What's interesting in this problem is that an important part of the
> syntax (the statement separator) is only defined at runtime. I
> believe there is no way to do that with only 1 lexer/parser with
> ANTLR because it has to be able to predict statically what the
> alternatives are.
>
> So what strategy would you use?
> Thanks again for your help!!
>
>> Oh that's different.  Simplest thing to do is create another lexer
> that
>> handles that text and then, using a SharedLexerInputState (or
> whatever
>> it's called), create an instance of the new lexer in the outer
> lexer
>> and then make a while loop around it's nextToken().
>>
>> You can grep for that class name in the examples probably.
>>
>> Ter
>> --
>> Professor Comp. Sci., University of San Francisco
>> Creator, ANTLR Parser Generator, http://www.antlr.org
>> Co-founder, http://www.jguru.com
>> Co-founder, http://www.knowspam.net enjoy email again!
>> Co-founder, http://www.peerscope.com pure link sharing
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From guyveraghtert at yahoo.com  Wed Oct  8 01:07:00 2003
From: guyveraghtert at yahoo.com (guyveraghtert)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Javadoc - static verification
Message-ID: <bm0gj4+4cme@eGroups.com>

Hi all

I'm working on a project to statically check your code against your
specification. We use Jnome (www.jnome.org), which offers a metamodel
for java. However, this metamodel represents the formal specification
as a string. This should be adapted: the formal specifications are
just java expressions. Only one problem exists, one can use the OCL
notation @pre te refer to the 'state' of an expression before entering
a method. I give an example:

/**
 * Class representing a flipflop
 */
public class FlipFlop{

  /**
   * Variable expressing state of flipflop
   */
  private boolean flip;

  /**
   * Flip the flipflop
   *
   * @post     The flipflop flipped
   *         | flip != flip@pre
   */
  public void flipflop(){
    flip != flip;
  }

}


Another problem is the fact we do not only have the OCL notation
'@pre', but also a tag '@pre':

...

 /**
  * Set the name
  *
  * @pre    <name> must be effective
  *       | name != null
  * @post   <name> is set as the name of this entity
  *       | getName() == name
  */
 public void setName(String name){
     this.name = name;
 }

...

The current grammar of jnome for javadoc is: 


//----------------------------------------------------------------------------
// The parser
//----------------------------------------------------------------------------

header {
package org.jnome.input.antlr.javadoc.parser;
}

class JavaDocParser extends Parser;
options {
	exportVocab=JavaDoc;             // Call its vocabulary "JavaDoc"
	buildAST = true;                 // build an AST
}

tokens {
	JAVADOC_OPEN; JAVADOC_CLOSE; STAR; TAG; WORD; DESCRBLOCK; VERTICAL_LINE;
	FORMAL; INFORMAL; NEWLINE; AT; TAGBLOCK; SENTENCEFORMAL;
}

// a specification block
specificationBlock
	:   // A block to describe the method/class/variable/.. briefly
		(descriptionBlock)?

		// A series of blocks starting with an @-tag
		(tagBlock)*

		// The end of the specification ("*/")
		JAVADOC_CLOSE!
	;

// the short description at the beginning of a specification block
descriptionBlock
	:	(sentence)+
		{#descriptionBlock = #([DESCRBLOCK, "DESCRBLOCK"], #descriptionBlock);}
	;

// a part of a specification block, starting with an @-tag
tagBlock
	:	tag
		(informalSpecification)
		(formalSpecification (emptySentence)* )?
		{#tagBlock = #([TAGBLOCK, "TAGBLOCK"], #tagBlock);}
	;

// an '@'-tag
tag
	: AT! WORD
	  {#tag = #([TAG, "TAG"], #tag);}
	;

// the informal specification in a tagblock
informalSpecification
	:	(sentence)+
		{#informalSpecification = #([INFORMAL, "INFORMAL"],
#informalSpecification);}
	;

// the formal specification in a tagblock
formalSpecification
	:	(sentenceFormal)+
		{#formalSpecification = #([FORMAL, "FORMAL"], #formalSpecification);}
	;

// a sentence can be empty or not
sentence
	:   emptySentence | nonEmptySentence
	;

// a non empty sentence
nonEmptySentence
	:   WORD (WORD|STAR|AT|VERTICAL_LINE)* endline
	;

// an empty sentence
emptySentence
	:   endline
	;

// a sentence from a formal specification
sentenceFormal
	:   VERTICAL_LINE! (WORD|STAR|AT|VERTICAL_LINE)* endline
		{#sentenceFormal = #([SENTENCEFORMAL, "SENTENCEFORMAL"],
#sentenceFormal);}
	;

// a newline symbol, followed by zero or more stars
endline!
	:   ( NEWLINE(STAR)* )
	;

//----------------------------------------------------------------------------
// The lexer
//----------------------------------------------------------------------------

// Import the necessary classes
{
import antlr.TokenStreamSelector;
}

class JavaDocLexer extends Lexer;

options {
	exportVocab=JavaDoc;   // call the vocabulary "JavaDoc"
	testLiterals=true;     // automatically test for literals
	k=2;                   // two characters of lookahead
}

// let the lexer know about the selector
{
	protected TokenStreamSelector selector;

	public JavaDocLexer(LexerSharedInputState state, TokenStreamSelector
sel) {
		this(state);
		selector = sel;
	}

}

// a dummy rule to force vocabulary to be all characters (except special
//   ones that ANTLR uses internally (0 to 2)
protected
VOCAB
	:	'\3'..'\377'
	;

// end of specification block
JAVADOC_CLOSE
	:	"*/"
		{ selector.pop(); }
	;

// @-symbol
AT
	: '@'
	;

// star
STAR
	: '*'
	;

// vertical line
VERTICAL_LINE
	: '|'
	;

// word
WORD
	// words can't contain whitespace, an '@'-symbol, '*'-symbol or
'|'-symbol
	:	(~( ' ' | '\t' | '\f' | '\r' | '\n' | '@' | '*' | '|'))+
	;

// Whitespace -- ignored
WS	:	(	' '
		|	'\t'
		|	'\f'
		)
		{ _ttype = Token.SKIP; }
	;

// newline character
NEWLINE
	:	// handle newlines
		(	"\r\n"  // Evil DOS
		|	'\r'    // Macintosh
		|	'\n'    // Unix
		)
		{ newline(); }
	;

-----------------------------------------------------------------

How can we easily adapt this grammar to our needs?

A minor problem, this grammar doesn't support 
single line comments /*  */ . The authors told me they didn't how to
fix is (ambiguities).

I ask a lot, but any help is welcome...

thx

Guy




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Wed Oct  8 01:20:12 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Re: Skipping grammar
Message-ID: <sf83c8d8.036@emil.oddi.is>

Hello Per,

Perhaps you could make "method {" a single token in the parser, and set
the nestingLevel variable to zero when that one matches.

The solution I posted uses the parser to eat up the stuff inside {...},
another possibility might be to make the lexer do this:

METHOD_BODY
  : "method"! '{'! ( BracedExpr | ~'}' )* "};"!
  ;

protected
BracedExpr
  : '{' ( BracedExpr | ~'}' )* "}"
  ;

Overall, this might be a better solution. The token METHOD_BODY will
then contain as it's text whatever was inside the {...}.

As a side note, this is possible in ANTLR lexers because the are LL(k)
and can thus handle context-free grammars. Conventional lexers are
limited to regular grammars (represented by regular expressions which
are equivalent to finite automata) and can f.x. not match nested braces,
parenthesis etc. See
http://www.antlr.org/doc/lexer.html#Predicated-LL(k)_Lexing for more
information on this.

Arnar

ps. yes, the "i" should have been "nestingLevel" :o)
pps. again, I haven't tried this, it might not even be syntactically
correct

>>> pwolleba@yahoo.no 10/07/03 5:34 PM >>>
Hello again!

I am looking at your example Arnar, and I have some questions. 
When I wrote my example I should have included some more information. 
The methode node is inside of another node called member (see 
example) and it can be more than one!

Member{
Methode {
	Sometext;
};
};

This makes your example a bit more difficult to implement, since the 
counter will start a zero at the first bracket, which is the member 
bracket. I must somehow be able to set nestingLevel = 0 from the 
parser when the method node is starting.
How do I do that?

best regards,
Per

Ps: I guess it should be nestingLevel++ instead of i++. Correct?

--- In antlr-interest@yahoogroups.com, "pwolleba" <pwolleba@y...> 
wrote:
> Yes that is correct, what is inside the bracket is a different 
> language which I at the moment don't want to write a parser for (it 
> is pretty complex and big). Anyway I have just come back to work, 
and 
> I am going to try out your solution Arnar, hopefully it will work! 
> 
> I just want to thank the community for trying to find a solution to 
> my question, and I must say it came really fast!
> 
> Best regards,
> 
> Per
> 
> 
> --- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
> <arnarb@o...> wrote:
> > Hi..
> > 
> > In my earlier post, I understood Per differently. I think he 
want's 
> to
> > parse "method name{ <whatever> };" and just eat up <whatever>, 
> including
> > any nested braces, and put it in a variable, completely without 
> lexing
> > and/or parsing it. Per, is this correct?
> > 
> > The result of all this being a tree something like this:
> > 
> > METHOD
> >  |
> > name-body
> > 
> > where the body node contains anything inside the {..} as it's 
text.
> > 
> > Arnar
> > 
> > >>> Anthony.Youngman@E... 10/07/03 1:33 PM >>>
> > I think you're missing the point. Define a ; as SEMI. The way I'd 
> do it
> > (and this is all pseudocode) is
> > 
> > if_statement: "IF" lcurly (method)* rcurly "ELSE" lcurly (method)*
> > rcurly SEMI ;
> > method: blah_blah SEMI ;
> > 
> > That way, the lexer doesn't care whether ; is ending a method or 
an 
> if
> > clause, and the parser won't get confused because when it hits a
> > right-curly it will be expecting an ELSE or a SEMI, and not a 
> method.
> > And if the ELSE is optional you just mark it as such so when the 
> parser
> > hits the right-curly after the if, it's expecting an ELSE or a 
SEMI 
> and
> > nothing else.
> > 
> > Cheers,
> > Wol
> > 
> > -----Original Message-----
> > From: pwolleba [mailto:pwolleba@y...] 
> > Sent: 07 October 2003 08:19
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Skipping grammar
> > 
> > 
> > I am pretty new to ANTLR so maybe this question is very trivial, 
if 
> > so even better then maybe it is a simple solution to my problem. 
> > Anyway I am struggling with writing a new parser in ANTLR to 
> replace 
> > and old implementation in Flex/Bison, this to make a product that 
> are 
> > open for implementation from both C++ as well as Java. 
> > 
> > The parser will parse a language that we are using to build 
> > databases, and it must support this language 100% if to be 
> accepted. 
> > 
> > Here is the code cutting that I am struggling with.
> > 
> > method name{
> >   SomeText!()text[];
> >   if(a < b && b < c){
> >      SomeText()!()[];
> >   }
> >   else{
> >      SomeText()!()[];
> >   };
> > };
> > 
> > I am not interesting in the expression that is inside the name 
> > method, I just want ANTLR to grab the text for me, and put it as 
a 
> > node inside the tree. The problem is the fact that the if/else 
> > statement is ending with a "};" which is the same token as the 
> method 
> > end token, and I have no guarantee that there could be more that 
> one 
> > inside the method. A solution would be to make a counter that 
will 
> > increase for each "{" and decrease for each "}", then I would 
know 
> > when the method ends. To my frustration I don't know how I should 
> > make such a counter in ANTRL, that still supports implement in 
both 
> > Java or C++ code.
> > I would be really really happy if someone could help me with this 
> > problem!
> > 
> > Best reagards,
> > 
> > Per
> > 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> > 
> > 
> > 
> > 
> 
**********************************************************************
> *************
> > 
> > This transmission is intended for the named recipient only. It may
> > contain private and confidential information. If this has come to 
> you in
> > error you must not act on anything disclosed in it, nor must you 
> copy
> > it, modify it, disseminate it in any way, or show it to anyone. 
> Please
> > e-mail the sender to inform us of the transmission error or 
> telephone
> > ECA International immediately and delete the e-mail from your
> > information system.
> > 
> > Telephone numbers for ECA International offices are: Sydney +61 
(0)2
> > 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 
> and New
> > York +1 212 582 2333.
> > 
> > 
> 
**********************************************************************
> *************
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pete.forman at westerngeco.com  Wed Oct  8 01:54:34 2003
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Re: A simple prepocessor with a lexer?
In-Reply-To: <blvm6b+oupj@eGroups.com>
References: <65721E6A-F8E6-11D7-9042-000A95891192@cs.usfca.edu>
Message-ID: <5.1.1.1.2.20031008093349.02306af0@wgmail2.gatwick.eur.slb.com>

At 2003-10-08 00:36 +0000, maaxxxcal wrote:
>One of the effect of my pragma is to define what the statement
>separator is going to be for the next portion of code.

ANTLR is not well suited to dynamic grammars.  However you might try
an approach like this rough effort in the lexer.

PUNCTUATION
   : '@'|'%'
     {if ($getText().equals(currentSeparator)) {$setType(SEPARATOR);};

PRAGMA_SEPARATOR
   : "-- PRAGMA separator=" ('@'|'%')
     {currentSeparator = lastChar($getText());};

-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pwolleba at yahoo.no  Wed Oct  8 02:12:58 2003
From: pwolleba at yahoo.no (pwolleba)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Re: Skipping grammar
In-Reply-To: <sf83c8d8.036@emil.oddi.is>
Message-ID: <bm0keq+pl3i@eGroups.com>

Hello again

Thanks for helping me out Arnar, your solutions are really good! 
Still I think I will have problem implementing them, much because I 
have not given you enough information. 
I need to make a method tag in my tree that contains information, 
such as arguments into the method and such (see example).


Method testMethod (Args,Args
.){
	Expression text
}

method
|
|--------Name
|
|--------Arguments
|
|-------- Expression


If I solve this in my lexer I will not be able to create this node 
tree, it will just be one node method that contains all the text. If 
I drop the "method"tag in my METHOD_BODY tag, it will trigger at all 
the other bracket in my document.
Can I somehow make my lexer rule without the "method" tag, and then 
make it just trigger when I need the method body?

best regards,
Per

--- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
<arnarb@o...> wrote:
> Hello Per,
> 
> Perhaps you could make "method {" a single token in the parser, and 
set
> the nestingLevel variable to zero when that one matches.
> 
> The solution I posted uses the parser to eat up the stuff inside 
{...},
> another possibility might be to make the lexer do this:
> 
> METHOD_BODY
>   : "method"! '{'! ( BracedExpr | ~'}' )* "};"!
>   ;
> 
> protected
> BracedExpr
>   : '{' ( BracedExpr | ~'}' )* "}"
>   ;
> 
> Overall, this might be a better solution. The token METHOD_BODY will
> then contain as it's text whatever was inside the {...}.
> 
> As a side note, this is possible in ANTLR lexers because the are LL
(k)
> and can thus handle context-free grammars. Conventional lexers are
> limited to regular grammars (represented by regular expressions 
which
> are equivalent to finite automata) and can f.x. not match nested 
braces,
> parenthesis etc. See
> http://www.antlr.org/doc/lexer.html#Predicated-LL(k)_Lexing for more
> information on this.
> 
> Arnar
> 
> ps. yes, the "i" should have been "nestingLevel" :o)
> pps. again, I haven't tried this, it might not even be syntactically
> correct
> 
> >>> pwolleba@y... 10/07/03 5:34 PM >>>
> Hello again!
> 
> I am looking at your example Arnar, and I have some questions. 
> When I wrote my example I should have included some more 
information. 
> The methode node is inside of another node called member (see 
> example) and it can be more than one!
> 
> Member{
> Methode {
> 	Sometext;
> };
> };
> 
> This makes your example a bit more difficult to implement, since 
the 
> counter will start a zero at the first bracket, which is the member 
> bracket. I must somehow be able to set nestingLevel = 0 from the 
> parser when the method node is starting.
> How do I do that?
> 
> best regards,
> Per
> 
> Ps: I guess it should be nestingLevel++ instead of i++. Correct?
> 
> --- In antlr-interest@yahoogroups.com, "pwolleba" <pwolleba@y...> 
> wrote:
> > Yes that is correct, what is inside the bracket is a different 
> > language which I at the moment don't want to write a parser for 
(it 
> > is pretty complex and big). Anyway I have just come back to work, 
> and 
> > I am going to try out your solution Arnar, hopefully it will 
work! 
> > 
> > I just want to thank the community for trying to find a solution 
to 
> > my question, and I must say it came really fast!
> > 
> > Best regards,
> > 
> > Per
> > 
> > 
> > --- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
> > <arnarb@o...> wrote:
> > > Hi..
> > > 
> > > In my earlier post, I understood Per differently. I think he 
> want's 
> > to
> > > parse "method name{ <whatever> };" and just eat up <whatever>, 
> > including
> > > any nested braces, and put it in a variable, completely without 
> > lexing
> > > and/or parsing it. Per, is this correct?
> > > 
> > > The result of all this being a tree something like this:
> > > 
> > > METHOD
> > >  |
> > > name-body
> > > 
> > > where the body node contains anything inside the {..} as it's 
> text.
> > > 
> > > Arnar
> > > 
> > > >>> Anthony.Youngman@E... 10/07/03 1:33 PM >>>
> > > I think you're missing the point. Define a ; as SEMI. The way 
I'd 
> > do it
> > > (and this is all pseudocode) is
> > > 
> > > if_statement: "IF" lcurly (method)* rcurly "ELSE" lcurly 
(method)*
> > > rcurly SEMI ;
> > > method: blah_blah SEMI ;
> > > 
> > > That way, the lexer doesn't care whether ; is ending a method 
or 
> an 
> > if
> > > clause, and the parser won't get confused because when it hits a
> > > right-curly it will be expecting an ELSE or a SEMI, and not a 
> > method.
> > > And if the ELSE is optional you just mark it as such so when 
the 
> > parser
> > > hits the right-curly after the if, it's expecting an ELSE or a 
> SEMI 
> > and
> > > nothing else.
> > > 
> > > Cheers,
> > > Wol
> > > 
> > > -----Original Message-----
> > > From: pwolleba [mailto:pwolleba@y...] 
> > > Sent: 07 October 2003 08:19
> > > To: antlr-interest@yahoogroups.com
> > > Subject: [antlr-interest] Skipping grammar
> > > 
> > > 
> > > I am pretty new to ANTLR so maybe this question is very 
trivial, 
> if 
> > > so even better then maybe it is a simple solution to my 
problem. 
> > > Anyway I am struggling with writing a new parser in ANTLR to 
> > replace 
> > > and old implementation in Flex/Bison, this to make a product 
that 
> > are 
> > > open for implementation from both C++ as well as Java. 
> > > 
> > > The parser will parse a language that we are using to build 
> > > databases, and it must support this language 100% if to be 
> > accepted. 
> > > 
> > > Here is the code cutting that I am struggling with.
> > > 
> > > method name{
> > >   SomeText!()text[];
> > >   if(a < b && b < c){
> > >      SomeText()!()[];
> > >   }
> > >   else{
> > >      SomeText()!()[];
> > >   };
> > > };
> > > 
> > > I am not interesting in the expression that is inside the name 
> > > method, I just want ANTLR to grab the text for me, and put it 
as 
> a 
> > > node inside the tree. The problem is the fact that the if/else 
> > > statement is ending with a "};" which is the same token as the 
> > method 
> > > end token, and I have no guarantee that there could be more 
that 
> > one 
> > > inside the method. A solution would be to make a counter that 
> will 
> > > increase for each "{" and decrease for each "}", then I would 
> know 
> > > when the method ends. To my frustration I don't know how I 
should 
> > > make such a counter in ANTRL, that still supports implement in 
> both 
> > > Java or C++ code.
> > > I would be really really happy if someone could help me with 
this 
> > > problem!
> > > 
> > > Best reagards,
> > > 
> > > Per
> > > 
> > > 
> > > 
> > >  
> > > 
> > > Your use of Yahoo! Groups is subject to
> > > http://docs.yahoo.com/info/terms/ 
> > > 
> > > 
> > > 
> > > 
> > > 
> > > 
> > 
> 
**********************************************************************
> > *************
> > > 
> > > This transmission is intended for the named recipient only. It 
may
> > > contain private and confidential information. If this has come 
to 
> > you in
> > > error you must not act on anything disclosed in it, nor must 
you 
> > copy
> > > it, modify it, disseminate it in any way, or show it to anyone. 
> > Please
> > > e-mail the sender to inform us of the transmission error or 
> > telephone
> > > ECA International immediately and delete the e-mail from your
> > > information system.
> > > 
> > > Telephone numbers for ECA International offices are: Sydney +61 
> (0)2
> > > 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 
5000 
> > and New
> > > York +1 212 582 2333.
> > > 
> > > 
> > 
> 
**********************************************************************
> > *************
> > > 
> > > 
> > >  
> > > 
> > > Your use of Yahoo! Groups is subject to
> > > http://docs.yahoo.com/info/terms/
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Anthony.Youngman at ECA-International.com  Wed Oct  8 02:29:38 2003
From: Anthony.Youngman at ECA-International.com (Anthony W Youngman)
Date: Mon Dec 20 16:15:59 2004
Subject: [antlr-interest] Re: Skipping grammar
Message-ID: <C7FE35004D40FD45AA342991B88CE40409A7E9@lnml1.eca-international.local>

Hmmm ...

You should be able to declare that in the lexer.

method: lcurly method_body rcurly ;

protected method_body: name arguments expression ;

Do the curly brackets always indicate a method? If not, how do you tell
whether it's the start of a method or the start of something else? If
you can unabiguously identify the start of a method (eg it's flagged by
an lcurly, which is the only use of an lcurly) then what you appear to
want is pretty simple to achieve.

Solve the problem of how to identify "this is a method", and the rest of
it should just fall into place. If the lexer can recognise "this is a
method" then the lexer can handle methods for you. The parser will then
build your tree for you the way you want it.

I think your original comment about ";" being used to terminate both IFs
and methods is a red herring. Have you grasped why it's not a problem?
If you have, then you should be able to work out the rest of the
solution fairly easily. If you haven't, then you need to get that
straight because it shows a fundamental misunderstanding of ANTLR. Don't
forget, both the lexer and parser are recursive (they "drill down"), so
context-dependent semantics shouldn't be a problem ...

Cheers,
Wol

-----Original Message-----
From: pwolleba [mailto:pwolleba@yahoo.no] 
Sent: 08 October 2003 10:13
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Skipping grammar


Hello again

Thanks for helping me out Arnar, your solutions are really good! 
Still I think I will have problem implementing them, much because I 
have not given you enough information. 
I need to make a method tag in my tree that contains information, 
such as arguments into the method and such (see example).


Method testMethod (Args,Args....){
	Expression text
}

method
|
|--------Name
|
|--------Arguments
|
|-------- Expression


If I solve this in my lexer I will not be able to create this node 
tree, it will just be one node method that contains all the text. If 
I drop the "method"tag in my METHOD_BODY tag, it will trigger at all 
the other bracket in my document.
Can I somehow make my lexer rule without the "method" tag, and then 
make it just trigger when I need the method body?

best regards,
Per

--- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
<arnarb@o...> wrote:
> Hello Per,
> 
> Perhaps you could make "method {" a single token in the parser, and 
set
> the nestingLevel variable to zero when that one matches.
> 
> The solution I posted uses the parser to eat up the stuff inside 
{...},
> another possibility might be to make the lexer do this:
> 
> METHOD_BODY
>   : "method"! '{'! ( BracedExpr | ~'}' )* "};"!
>   ;
> 
> protected
> BracedExpr
>   : '{' ( BracedExpr | ~'}' )* "}"
>   ;
> 
> Overall, this might be a better solution. The token METHOD_BODY will
> then contain as it's text whatever was inside the {...}.
> 
> As a side note, this is possible in ANTLR lexers because the are LL
(k)
> and can thus handle context-free grammars. Conventional lexers are
> limited to regular grammars (represented by regular expressions 
which
> are equivalent to finite automata) and can f.x. not match nested 
braces,
> parenthesis etc. See
> http://www.antlr.org/doc/lexer.html#Predicated-LL(k)_Lexing for more
> information on this.
> 
> Arnar
> 
> ps. yes, the "i" should have been "nestingLevel" :o)
> pps. again, I haven't tried this, it might not even be syntactically
> correct
> 
> >>> pwolleba@y... 10/07/03 5:34 PM >>>
> Hello again!
> 
> I am looking at your example Arnar, and I have some questions. 
> When I wrote my example I should have included some more 
information. 
> The methode node is inside of another node called member (see 
> example) and it can be more than one!
> 
> Member{
> Methode {
> 	Sometext;
> };
> };
> 
> This makes your example a bit more difficult to implement, since 
the 
> counter will start a zero at the first bracket, which is the member 
> bracket. I must somehow be able to set nestingLevel = 0 from the 
> parser when the method node is starting.
> How do I do that?
> 
> best regards,
> Per
> 
> Ps: I guess it should be nestingLevel++ instead of i++. Correct?
> 
> --- In antlr-interest@yahoogroups.com, "pwolleba" <pwolleba@y...> 
> wrote:
> > Yes that is correct, what is inside the bracket is a different 
> > language which I at the moment don't want to write a parser for 
(it 
> > is pretty complex and big). Anyway I have just come back to work, 
> and 
> > I am going to try out your solution Arnar, hopefully it will 
work! 
> > 
> > I just want to thank the community for trying to find a solution 
to 
> > my question, and I must say it came really fast!
> > 
> > Best regards,
> > 
> > Per
> > 
> > 
> > --- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
> > <arnarb@o...> wrote:
> > > Hi..
> > > 
> > > In my earlier post, I understood Per differently. I think he 
> want's 
> > to
> > > parse "method name{ <whatever> };" and just eat up <whatever>, 
> > including
> > > any nested braces, and put it in a variable, completely without 
> > lexing
> > > and/or parsing it. Per, is this correct?
> > > 
> > > The result of all this being a tree something like this:
> > > 
> > > METHOD
> > >  |
> > > name-body
> > > 
> > > where the body node contains anything inside the {..} as it's 
> text.
> > > 
> > > Arnar
> > > 
> > > >>> Anthony.Youngman@E... 10/07/03 1:33 PM >>>
> > > I think you're missing the point. Define a ; as SEMI. The way 
I'd 
> > do it
> > > (and this is all pseudocode) is
> > > 
> > > if_statement: "IF" lcurly (method)* rcurly "ELSE" lcurly 
(method)*
> > > rcurly SEMI ;
> > > method: blah_blah SEMI ;
> > > 
> > > That way, the lexer doesn't care whether ; is ending a method 
or 
> an 
> > if
> > > clause, and the parser won't get confused because when it hits a
> > > right-curly it will be expecting an ELSE or a SEMI, and not a 
> > method.
> > > And if the ELSE is optional you just mark it as such so when 
the 
> > parser
> > > hits the right-curly after the if, it's expecting an ELSE or a 
> SEMI 
> > and
> > > nothing else.
> > > 
> > > Cheers,
> > > Wol
> > > 
> > > -----Original Message-----
> > > From: pwolleba [mailto:pwolleba@y...] 
> > > Sent: 07 October 2003 08:19
> > > To: antlr-interest@yahoogroups.com
> > > Subject: [antlr-interest] Skipping grammar
> > > 
> > > 
> > > I am pretty new to ANTLR so maybe this question is very 
trivial, 
> if 
> > > so even better then maybe it is a simple solution to my 
problem. 
> > > Anyway I am struggling with writing a new parser in ANTLR to 
> > replace 
> > > and old implementation in Flex/Bison, this to make a product 
that 
> > are 
> > > open for implementation from both C++ as well as Java. 
> > > 
> > > The parser will parse a language that we are using to build 
> > > databases, and it must support this language 100% if to be 
> > accepted. 
> > > 
> > > Here is the code cutting that I am struggling with.
> > > 
> > > method name{
> > >   SomeText!()text[];
> > >   if(a < b && b < c){
> > >      SomeText()!()[];
> > >   }
> > >   else{
> > >      SomeText()!()[];
> > >   };
> > > };
> > > 
> > > I am not interesting in the expression that is inside the name 
> > > method, I just want ANTLR to grab the text for me, and put it 
as 
> a 
> > > node inside the tree. The problem is the fact that the if/else 
> > > statement is ending with a "};" which is the same token as the 
> > method 
> > > end token, and I have no guarantee that there could be more 
that 
> > one 
> > > inside the method. A solution would be to make a counter that 
> will 
> > > increase for each "{" and decrease for each "}", then I would 
> know 
> > > when the method ends. To my frustration I don't know how I 
should 
> > > make such a counter in ANTRL, that still supports implement in 
> both 
> > > Java or C++ code.
> > > I would be really really happy if someone could help me with 
this 
> > > problem!
> > > 
> > > Best reagards,
> > > 
> > > Per
> > > 
> > > 
> > > 
> > >  
> > > 
> > > Your use of Yahoo! Groups is subject to
> > > http://docs.yahoo.com/info/terms/ 
> > > 
> > > 
> > > 
> > > 
> > > 
> > > 
> > 
> 
**********************************************************************
> > *************
> > > 
> > > This transmission is intended for the named recipient only. It 
may
> > > contain private and confidential information. If this has come 
to 
> > you in
> > > error you must not act on anything disclosed in it, nor must 
you 
> > copy
> > > it, modify it, disseminate it in any way, or show it to anyone. 
> > Please
> > > e-mail the sender to inform us of the transmission error or 
> > telephone
> > > ECA International immediately and delete the e-mail from your
> > > information system.
> > > 
> > > Telephone numbers for ECA International offices are: Sydney +61 
> (0)2
> > > 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 
5000 
> > and New
> > > York +1 212 582 2333.
> > > 
> > > 
> > 
> 
**********************************************************************
> > *************
> > > 
> > > 
> > >  
> > > 
> > > Your use of Yahoo! Groups is subject to
> > > http://docs.yahoo.com/info/terms/
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pwolleba at yahoo.no  Wed Oct  8 03:36:02 2003
From: pwolleba at yahoo.no (pwolleba)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Re: Skipping grammar
In-Reply-To: <C7FE35004D40FD45AA342991B88CE40409A7E9@lnml1.eca-international.local>
Message-ID: <bm0pai+jkju@eGroups.com>

Hello!

I am starting to dominate this newsgroup with my problem, so I guess 
I have to stop after this post!
Anyway, I will paste some of my code from my parser and if you could 
find where I am thinking wrong I would appreciate if you could 
comment it!



PARSER
 
//---------------------------------------------- METHODE -------------
methodeNode         : (METHOD^) declarationName methodeDecleration 
methodBody;

methodeDecleration  : (LPAREN!) (methodArguments)? (RPAREN!)
                      {#methodeDecleration=#
([ARGUMENTS,"Arguments"],#methodeDecleration);};

methodArguments     : (methodArgument (COMMA! methodArguments)?);

methodArgument      : declarationName;

methodBody          : (METHOD_BODY)
                      {#methodBody=#
([EXPRESSION,"Expression"],#methodBody);};


LEX

METHOD_BODY : '{'! (BracedExpr | ~'}')* "};"!;

protected
BracedExpr : '{' (BracedExpr | ~'}')* "}";



FILE TO PARSE

Packet name{
Model name {
Method{
	Expressiontext;
	If/else and so on
};
};
};

As you can see the method is build up much like a method in both C++ 
or Java. What makes it difficult is the fact that I don't want to 
parse the method body text, I just want to consume it.

As you can see my Lex wont work, since it will react at both the 
Packet bracket as well as Model bracket. If I somehow could just make 
it start when it is a method I would be really happy.

Best regards,
Per




--- In antlr-interest@yahoogroups.com, "Anthony W Youngman" 
<Anthony.Youngman@E...> wrote:
> Hmmm ...
> 
> You should be able to declare that in the lexer.
> 
> method: lcurly method_body rcurly ;
> 
> protected method_body: name arguments expression ;
> 
> Do the curly brackets always indicate a method? If not, how do you 
tell
> whether it's the start of a method or the start of something else? 
If
> you can unabiguously identify the start of a method (eg it's 
flagged by
> an lcurly, which is the only use of an lcurly) then what you appear 
to
> want is pretty simple to achieve.
> 
> Solve the problem of how to identify "this is a method", and the 
rest of
> it should just fall into place. If the lexer can recognise "this is 
a
> method" then the lexer can handle methods for you. The parser will 
then
> build your tree for you the way you want it.
> 
> I think your original comment about ";" being used to terminate 
both IFs
> and methods is a red herring. Have you grasped why it's not a 
problem?
> If you have, then you should be able to work out the rest of the
> solution fairly easily. If you haven't, then you need to get that
> straight because it shows a fundamental misunderstanding of ANTLR. 
Don't
> forget, both the lexer and parser are recursive (they "drill 
down"), so
> context-dependent semantics shouldn't be a problem ...
> 
> Cheers,
> Wol
> 
> -----Original Message-----
> From: pwolleba [mailto:pwolleba@y...] 
> Sent: 08 October 2003 10:13
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: Skipping grammar
> 
> 
> Hello again
> 
> Thanks for helping me out Arnar, your solutions are really good! 
> Still I think I will have problem implementing them, much because I 
> have not given you enough information. 
> I need to make a method tag in my tree that contains information, 
> such as arguments into the method and such (see example).
> 
> 
> Method testMethod (Args,Args....){
> 	Expression text
> }
> 
> method
> |
> |--------Name
> |
> |--------Arguments
> |
> |-------- Expression
> 
> 
> If I solve this in my lexer I will not be able to create this node 
> tree, it will just be one node method that contains all the text. 
If 
> I drop the "method"tag in my METHOD_BODY tag, it will trigger at 
all 
> the other bracket in my document.
> Can I somehow make my lexer rule without the "method" tag, and then 
> make it just trigger when I need the method body?
> 
> best regards,
> Per
> 
> --- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
> <arnarb@o...> wrote:
> > Hello Per,
> > 
> > Perhaps you could make "method {" a single token in the parser, 
and 
> set
> > the nestingLevel variable to zero when that one matches.
> > 
> > The solution I posted uses the parser to eat up the stuff inside 
> {...},
> > another possibility might be to make the lexer do this:
> > 
> > METHOD_BODY
> >   : "method"! '{'! ( BracedExpr | ~'}' )* "};"!
> >   ;
> > 
> > protected
> > BracedExpr
> >   : '{' ( BracedExpr | ~'}' )* "}"
> >   ;
> > 
> > Overall, this might be a better solution. The token METHOD_BODY 
will
> > then contain as it's text whatever was inside the {...}.
> > 
> > As a side note, this is possible in ANTLR lexers because the are 
LL
> (k)
> > and can thus handle context-free grammars. Conventional lexers are
> > limited to regular grammars (represented by regular expressions 
> which
> > are equivalent to finite automata) and can f.x. not match nested 
> braces,
> > parenthesis etc. See
> > http://www.antlr.org/doc/lexer.html#Predicated-LL(k)_Lexing for 
more
> > information on this.
> > 
> > Arnar
> > 
> > ps. yes, the "i" should have been "nestingLevel" :o)
> > pps. again, I haven't tried this, it might not even be 
syntactically
> > correct
> > 
> > >>> pwolleba@y... 10/07/03 5:34 PM >>>
> > Hello again!
> > 
> > I am looking at your example Arnar, and I have some questions. 
> > When I wrote my example I should have included some more 
> information. 
> > The methode node is inside of another node called member (see 
> > example) and it can be more than one!
> > 
> > Member{
> > Methode {
> > 	Sometext;
> > };
> > };
> > 
> > This makes your example a bit more difficult to implement, since 
> the 
> > counter will start a zero at the first bracket, which is the 
member 
> > bracket. I must somehow be able to set nestingLevel = 0 from the 
> > parser when the method node is starting.
> > How do I do that?
> > 
> > best regards,
> > Per
> > 
> > Ps: I guess it should be nestingLevel++ instead of i++. Correct?
> > 
> > --- In antlr-interest@yahoogroups.com, "pwolleba" <pwolleba@y...> 
> > wrote:
> > > Yes that is correct, what is inside the bracket is a different 
> > > language which I at the moment don't want to write a parser for 
> (it 
> > > is pretty complex and big). Anyway I have just come back to 
work, 
> > and 
> > > I am going to try out your solution Arnar, hopefully it will 
> work! 
> > > 
> > > I just want to thank the community for trying to find a 
solution 
> to 
> > > my question, and I must say it came really fast!
> > > 
> > > Best regards,
> > > 
> > > Per
> > > 
> > > 
> > > --- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
> > > <arnarb@o...> wrote:
> > > > Hi..
> > > > 
> > > > In my earlier post, I understood Per differently. I think he 
> > want's 
> > > to
> > > > parse "method name{ <whatever> };" and just eat up 
<whatever>, 
> > > including
> > > > any nested braces, and put it in a variable, completely 
without 
> > > lexing
> > > > and/or parsing it. Per, is this correct?
> > > > 
> > > > The result of all this being a tree something like this:
> > > > 
> > > > METHOD
> > > >  |
> > > > name-body
> > > > 
> > > > where the body node contains anything inside the {..} as it's 
> > text.
> > > > 
> > > > Arnar
> > > > 
> > > > >>> Anthony.Youngman@E... 10/07/03 1:33 PM >>>
> > > > I think you're missing the point. Define a ; as SEMI. The way 
> I'd 
> > > do it
> > > > (and this is all pseudocode) is
> > > > 
> > > > if_statement: "IF" lcurly (method)* rcurly "ELSE" lcurly 
> (method)*
> > > > rcurly SEMI ;
> > > > method: blah_blah SEMI ;
> > > > 
> > > > That way, the lexer doesn't care whether ; is ending a method 
> or 
> > an 
> > > if
> > > > clause, and the parser won't get confused because when it 
hits a
> > > > right-curly it will be expecting an ELSE or a SEMI, and not a 
> > > method.
> > > > And if the ELSE is optional you just mark it as such so when 
> the 
> > > parser
> > > > hits the right-curly after the if, it's expecting an ELSE or 
a 
> > SEMI 
> > > and
> > > > nothing else.
> > > > 
> > > > Cheers,
> > > > Wol
> > > > 
> > > > -----Original Message-----
> > > > From: pwolleba [mailto:pwolleba@y...] 
> > > > Sent: 07 October 2003 08:19
> > > > To: antlr-interest@yahoogroups.com
> > > > Subject: [antlr-interest] Skipping grammar
> > > > 
> > > > 
> > > > I am pretty new to ANTLR so maybe this question is very 
> trivial, 
> > if 
> > > > so even better then maybe it is a simple solution to my 
> problem. 
> > > > Anyway I am struggling with writing a new parser in ANTLR to 
> > > replace 
> > > > and old implementation in Flex/Bison, this to make a product 
> that 
> > > are 
> > > > open for implementation from both C++ as well as Java. 
> > > > 
> > > > The parser will parse a language that we are using to build 
> > > > databases, and it must support this language 100% if to be 
> > > accepted. 
> > > > 
> > > > Here is the code cutting that I am struggling with.
> > > > 
> > > > method name{
> > > >   SomeText!()text[];
> > > >   if(a < b && b < c){
> > > >      SomeText()!()[];
> > > >   }
> > > >   else{
> > > >      SomeText()!()[];
> > > >   };
> > > > };
> > > > 
> > > > I am not interesting in the expression that is inside the 
name 
> > > > method, I just want ANTLR to grab the text for me, and put it 
> as 
> > a 
> > > > node inside the tree. The problem is the fact that the 
if/else 
> > > > statement is ending with a "};" which is the same token as 
the 
> > > method 
> > > > end token, and I have no guarantee that there could be more 
> that 
> > > one 
> > > > inside the method. A solution would be to make a counter that 
> > will 
> > > > increase for each "{" and decrease for each "}", then I would 
> > know 
> > > > when the method ends. To my frustration I don't know how I 
> should 
> > > > make such a counter in ANTRL, that still supports implement 
in 
> > both 
> > > > Java or C++ code.
> > > > I would be really really happy if someone could help me with 
> this 
> > > > problem!
> > > > 
> > > > Best reagards,
> > > > 
> > > > Per
> > > > 
> > > > 
> > > > 
> > > >  
> > > > 
> > > > Your use of Yahoo! Groups is subject to
> > > > http://docs.yahoo.com/info/terms/ 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > 
> > 
> 
**********************************************************************
> > > *************
> > > > 
> > > > This transmission is intended for the named recipient only. 
It 
> may
> > > > contain private and confidential information. If this has 
come 
> to 
> > > you in
> > > > error you must not act on anything disclosed in it, nor must 
> you 
> > > copy
> > > > it, modify it, disseminate it in any way, or show it to 
anyone. 
> > > Please
> > > > e-mail the sender to inform us of the transmission error or 
> > > telephone
> > > > ECA International immediately and delete the e-mail from your
> > > > information system.
> > > > 
> > > > Telephone numbers for ECA International offices are: Sydney 
+61 
> > (0)2
> > > > 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 
> 5000 
> > > and New
> > > > York +1 212 582 2333.
> > > > 
> > > > 
> > > 
> > 
> 
**********************************************************************
> > > *************
> > > > 
> > > > 
> > > >  
> > > > 
> > > > Your use of Yahoo! Groups is subject to
> > > > http://docs.yahoo.com/info/terms/
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Anthony.Youngman at ECA-International.com  Wed Oct  8 04:09:33 2003
From: Anthony.Youngman at ECA-International.com (Anthony W Youngman)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Re: Skipping grammar
Message-ID: <C7FE35004D40FD45AA342991B88CE40409A7EE@lnml1.eca-international.local>

Firstly, DON'T stop posting here ... what matters is that you show that
you are trying to understand. What pisses people off is when they think
students are trying to skip homework ...

Secondly, the best way to learn is to teach. I probably don't know much
more than you, so you're helping me learn (plus all those other lurkers
who are watching and haven't dived in :-) I've posted similarly "dumb"
posts and been grateful to everyone who's helped me - I owe it to the
list to help when I can.

Okay. In your "file to parse" you have "packet", "model", "method". Are
these keywords? If so, your life is nice and simple. Similarly, if
that's your nesting such that the method braces are always at the third
level down, it's equally as simple, just slightly different. So how do
you handle that?

At the start of the lexer, you can declare an initialisation code block.
You want to declare a state enum with the values NULL, IN_PACKET,
IN_MODEL, and IN_METHOD.

Your lexer will now contain something like this ...

packet: state == NULL   // this is a predicate
   {
      "PACKET" lcurly {state = IN_PACKET}  //set the state variable
      model lcurly {state = NULL} // reset the state variable
   } ;

model: state == IN_PACKET
   {
      "MODEL" lcurly {state = IN_MODEL}
      method lcurly {state = IN_PACKET}
   } ;

method: ... I'll leave it to you :-)

I'm sure I've messed up my ANTLR syntax good and proper, and other
people will help you with how to do this, but this looks like the
approach you want. Particularly, look at predicates and in-line code.
And WATCH OUT !!! because predicates *can* get you into trouble with
look-ahead. It looks like what you're doing is pretty simple and won't
be any trouble, but it does happen ...

Cheers,
Wol

-----Original Message-----
From: pwolleba [mailto:pwolleba@yahoo.no] 
Sent: 08 October 2003 11:36
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Skipping grammar


Hello!

I am starting to dominate this newsgroup with my problem, so I guess 
I have to stop after this post!
Anyway, I will paste some of my code from my parser and if you could 
find where I am thinking wrong I would appreciate if you could 
comment it!



PARSER
 
//---------------------------------------------- METHODE -------------
methodeNode         : (METHOD^) declarationName methodeDecleration 
methodBody;

methodeDecleration  : (LPAREN!) (methodArguments)? (RPAREN!)
                      {#methodeDecleration=#
([ARGUMENTS,"Arguments"],#methodeDecleration);};

methodArguments     : (methodArgument (COMMA! methodArguments)?);

methodArgument      : declarationName;

methodBody          : (METHOD_BODY)
                      {#methodBody=#
([EXPRESSION,"Expression"],#methodBody);};


LEX

METHOD_BODY : '{'! (BracedExpr | ~'}')* "};"!;

protected
BracedExpr : '{' (BracedExpr | ~'}')* "}";



FILE TO PARSE

Packet name{
Model name {
Method{
	Expressiontext;
	If/else and so on
};
};
};

As you can see the method is build up much like a method in both C++ 
or Java. What makes it difficult is the fact that I don't want to 
parse the method body text, I just want to consume it.

As you can see my Lex wont work, since it will react at both the 
Packet bracket as well as Model bracket. If I somehow could just make 
it start when it is a method I would be really happy.

Best regards,
Per




--- In antlr-interest@yahoogroups.com, "Anthony W Youngman" 
<Anthony.Youngman@E...> wrote:
> Hmmm ...
> 
> You should be able to declare that in the lexer.
> 
> method: lcurly method_body rcurly ;
> 
> protected method_body: name arguments expression ;
> 
> Do the curly brackets always indicate a method? If not, how do you 
tell
> whether it's the start of a method or the start of something else? 
If
> you can unabiguously identify the start of a method (eg it's 
flagged by
> an lcurly, which is the only use of an lcurly) then what you appear 
to
> want is pretty simple to achieve.
> 
> Solve the problem of how to identify "this is a method", and the 
rest of
> it should just fall into place. If the lexer can recognise "this is 
a
> method" then the lexer can handle methods for you. The parser will 
then
> build your tree for you the way you want it.
> 
> I think your original comment about ";" being used to terminate 
both IFs
> and methods is a red herring. Have you grasped why it's not a 
problem?
> If you have, then you should be able to work out the rest of the
> solution fairly easily. If you haven't, then you need to get that
> straight because it shows a fundamental misunderstanding of ANTLR. 
Don't
> forget, both the lexer and parser are recursive (they "drill 
down"), so
> context-dependent semantics shouldn't be a problem ...
> 
> Cheers,
> Wol
> 
> -----Original Message-----
> From: pwolleba [mailto:pwolleba@y...] 
> Sent: 08 October 2003 10:13
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: Skipping grammar
> 
> 
> Hello again
> 
> Thanks for helping me out Arnar, your solutions are really good! 
> Still I think I will have problem implementing them, much because I 
> have not given you enough information. 
> I need to make a method tag in my tree that contains information, 
> such as arguments into the method and such (see example).
> 
> 
> Method testMethod (Args,Args....){
> 	Expression text
> }
> 
> method
> |
> |--------Name
> |
> |--------Arguments
> |
> |-------- Expression
> 
> 
> If I solve this in my lexer I will not be able to create this node 
> tree, it will just be one node method that contains all the text. 
If 
> I drop the "method"tag in my METHOD_BODY tag, it will trigger at 
all 
> the other bracket in my document.
> Can I somehow make my lexer rule without the "method" tag, and then 
> make it just trigger when I need the method body?
> 
> best regards,
> Per
> 
> --- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
> <arnarb@o...> wrote:
> > Hello Per,
> > 
> > Perhaps you could make "method {" a single token in the parser, 
and 
> set
> > the nestingLevel variable to zero when that one matches.
> > 
> > The solution I posted uses the parser to eat up the stuff inside 
> {...},
> > another possibility might be to make the lexer do this:
> > 
> > METHOD_BODY
> >   : "method"! '{'! ( BracedExpr | ~'}' )* "};"!
> >   ;
> > 
> > protected
> > BracedExpr
> >   : '{' ( BracedExpr | ~'}' )* "}"
> >   ;
> > 
> > Overall, this might be a better solution. The token METHOD_BODY 
will
> > then contain as it's text whatever was inside the {...}.
> > 
> > As a side note, this is possible in ANTLR lexers because the are 
LL
> (k)
> > and can thus handle context-free grammars. Conventional lexers are
> > limited to regular grammars (represented by regular expressions 
> which
> > are equivalent to finite automata) and can f.x. not match nested 
> braces,
> > parenthesis etc. See
> > http://www.antlr.org/doc/lexer.html#Predicated-LL(k)_Lexing for 
more
> > information on this.
> > 
> > Arnar
> > 
> > ps. yes, the "i" should have been "nestingLevel" :o)
> > pps. again, I haven't tried this, it might not even be 
syntactically
> > correct
> > 
> > >>> pwolleba@y... 10/07/03 5:34 PM >>>
> > Hello again!
> > 
> > I am looking at your example Arnar, and I have some questions. 
> > When I wrote my example I should have included some more 
> information. 
> > The methode node is inside of another node called member (see 
> > example) and it can be more than one!
> > 
> > Member{
> > Methode {
> > 	Sometext;
> > };
> > };
> > 
> > This makes your example a bit more difficult to implement, since 
> the 
> > counter will start a zero at the first bracket, which is the 
member 
> > bracket. I must somehow be able to set nestingLevel = 0 from the 
> > parser when the method node is starting.
> > How do I do that?
> > 
> > best regards,
> > Per
> > 
> > Ps: I guess it should be nestingLevel++ instead of i++. Correct?
> > 
> > --- In antlr-interest@yahoogroups.com, "pwolleba" <pwolleba@y...> 
> > wrote:
> > > Yes that is correct, what is inside the bracket is a different 
> > > language which I at the moment don't want to write a parser for 
> (it 
> > > is pretty complex and big). Anyway I have just come back to 
work, 
> > and 
> > > I am going to try out your solution Arnar, hopefully it will 
> work! 
> > > 
> > > I just want to thank the community for trying to find a 
solution 
> to 
> > > my question, and I must say it came really fast!
> > > 
> > > Best regards,
> > > 
> > > Per
> > > 
> > > 
> > > --- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
> > > <arnarb@o...> wrote:
> > > > Hi..
> > > > 
> > > > In my earlier post, I understood Per differently. I think he 
> > want's 
> > > to
> > > > parse "method name{ <whatever> };" and just eat up 
<whatever>, 
> > > including
> > > > any nested braces, and put it in a variable, completely 
without 
> > > lexing
> > > > and/or parsing it. Per, is this correct?
> > > > 
> > > > The result of all this being a tree something like this:
> > > > 
> > > > METHOD
> > > >  |
> > > > name-body
> > > > 
> > > > where the body node contains anything inside the {..} as it's 
> > text.
> > > > 
> > > > Arnar
> > > > 
> > > > >>> Anthony.Youngman@E... 10/07/03 1:33 PM >>>
> > > > I think you're missing the point. Define a ; as SEMI. The way 
> I'd 
> > > do it
> > > > (and this is all pseudocode) is
> > > > 
> > > > if_statement: "IF" lcurly (method)* rcurly "ELSE" lcurly 
> (method)*
> > > > rcurly SEMI ;
> > > > method: blah_blah SEMI ;
> > > > 
> > > > That way, the lexer doesn't care whether ; is ending a method 
> or 
> > an 
> > > if
> > > > clause, and the parser won't get confused because when it 
hits a
> > > > right-curly it will be expecting an ELSE or a SEMI, and not a 
> > > method.
> > > > And if the ELSE is optional you just mark it as such so when 
> the 
> > > parser
> > > > hits the right-curly after the if, it's expecting an ELSE or 
a 
> > SEMI 
> > > and
> > > > nothing else.
> > > > 
> > > > Cheers,
> > > > Wol
> > > > 
> > > > -----Original Message-----
> > > > From: pwolleba [mailto:pwolleba@y...] 
> > > > Sent: 07 October 2003 08:19
> > > > To: antlr-interest@yahoogroups.com
> > > > Subject: [antlr-interest] Skipping grammar
> > > > 
> > > > 
> > > > I am pretty new to ANTLR so maybe this question is very 
> trivial, 
> > if 
> > > > so even better then maybe it is a simple solution to my 
> problem. 
> > > > Anyway I am struggling with writing a new parser in ANTLR to 
> > > replace 
> > > > and old implementation in Flex/Bison, this to make a product 
> that 
> > > are 
> > > > open for implementation from both C++ as well as Java. 
> > > > 
> > > > The parser will parse a language that we are using to build 
> > > > databases, and it must support this language 100% if to be 
> > > accepted. 
> > > > 
> > > > Here is the code cutting that I am struggling with.
> > > > 
> > > > method name{
> > > >   SomeText!()text[];
> > > >   if(a < b && b < c){
> > > >      SomeText()!()[];
> > > >   }
> > > >   else{
> > > >      SomeText()!()[];
> > > >   };
> > > > };
> > > > 
> > > > I am not interesting in the expression that is inside the 
name 
> > > > method, I just want ANTLR to grab the text for me, and put it 
> as 
> > a 
> > > > node inside the tree. The problem is the fact that the 
if/else 
> > > > statement is ending with a "};" which is the same token as 
the 
> > > method 
> > > > end token, and I have no guarantee that there could be more 
> that 
> > > one 
> > > > inside the method. A solution would be to make a counter that 
> > will 
> > > > increase for each "{" and decrease for each "}", then I would 
> > know 
> > > > when the method ends. To my frustration I don't know how I 
> should 
> > > > make such a counter in ANTRL, that still supports implement 
in 
> > both 
> > > > Java or C++ code.
> > > > I would be really really happy if someone could help me with 
> this 
> > > > problem!
> > > > 
> > > > Best reagards,
> > > > 
> > > > Per
> > > > 
> > > > 
> > > > 
> > > >  
> > > > 
> > > > Your use of Yahoo! Groups is subject to
> > > > http://docs.yahoo.com/info/terms/ 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > 
> > 
> 
**********************************************************************
> > > *************
> > > > 
> > > > This transmission is intended for the named recipient only. 
It 
> may
> > > > contain private and confidential information. If this has 
come 
> to 
> > > you in
> > > > error you must not act on anything disclosed in it, nor must 
> you 
> > > copy
> > > > it, modify it, disseminate it in any way, or show it to 
anyone. 
> > > Please
> > > > e-mail the sender to inform us of the transmission error or 
> > > telephone
> > > > ECA International immediately and delete the e-mail from your
> > > > information system.
> > > > 
> > > > Telephone numbers for ECA International offices are: Sydney 
+61 
> > (0)2
> > > > 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 
> 5000 
> > > and New
> > > > York +1 212 582 2333.
> > > > 
> > > > 
> > > 
> > 
> 
**********************************************************************
> > > *************
> > > > 
> > > > 
> > > >  
> > > > 
> > > > Your use of Yahoo! Groups is subject to
> > > > http://docs.yahoo.com/info/terms/
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Matthew.Ford at forward.com.au  Wed Oct  8 04:14:11 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Javadoc - static verification
References: <bm0gj4+4cme@eGroups.com>
Message-ID: <001801c38d8d$4d8a24b0$0400a8c0@NOTEBOOK>

It looks to me like
you could use the |  in @post tag statement to start looking for @pre

 | flip != flip@pre

@pre elsewhere should be a tag?

matthew
----- Original Message ----- 
From: "guyveraghtert" <guyveraghtert@yahoo.com>
To: <antlr-interest@yahoogroups.com>
Sent: Wednesday, October 08, 2003 6:07 PM
Subject: [antlr-interest] Javadoc - static verification


> Hi all
>
> I'm working on a project to statically check your code against your
> specification. We use Jnome (www.jnome.org), which offers a metamodel
> for java. However, this metamodel represents the formal specification
> as a string. This should be adapted: the formal specifications are
> just java expressions. Only one problem exists, one can use the OCL
> notation @pre te refer to the 'state' of an expression before entering
> a method. I give an example:
>
> /**
>  * Class representing a flipflop
>  */
> public class FlipFlop{
>
>   /**
>    * Variable expressing state of flipflop
>    */
>   private boolean flip;
>
>   /**
>    * Flip the flipflop
>    *
>    * @post     The flipflop flipped
>    *         | flip != flip@pre
>    */
>   public void flipflop(){
>     flip != flip;
>   }
>
> }
>
>
> Another problem is the fact we do not only have the OCL notation
> '@pre', but also a tag '@pre':
>
> ...
>
>  /**
>   * Set the name
>   *
>   * @pre    <name> must be effective
>   *       | name != null
>   * @post   <name> is set as the name of this entity
>   *       | getName() == name
>   */
>  public void setName(String name){
>      this.name = name;
>  }
>
> ...
>
> The current grammar of jnome for javadoc is:
>
>
>
//--------------------------------------------------------------------------
--
> // The parser
>
//--------------------------------------------------------------------------
--
>
> header {
> package org.jnome.input.antlr.javadoc.parser;
> }
>
> class JavaDocParser extends Parser;
> options {
> exportVocab=JavaDoc;             // Call its vocabulary "JavaDoc"
> buildAST = true;                 // build an AST
> }
>
> tokens {
> JAVADOC_OPEN; JAVADOC_CLOSE; STAR; TAG; WORD; DESCRBLOCK; VERTICAL_LINE;
> FORMAL; INFORMAL; NEWLINE; AT; TAGBLOCK; SENTENCEFORMAL;
> }
>
> // a specification block
> specificationBlock
> :   // A block to describe the method/class/variable/.. briefly
> (descriptionBlock)?
>
> // A series of blocks starting with an @-tag
> (tagBlock)*
>
> // The end of the specification ("*/")
> JAVADOC_CLOSE!
> ;
>
> // the short description at the beginning of a specification block
> descriptionBlock
> : (sentence)+
> {#descriptionBlock = #([DESCRBLOCK, "DESCRBLOCK"], #descriptionBlock);}
> ;
>
> // a part of a specification block, starting with an @-tag
> tagBlock
> : tag
> (informalSpecification)
> (formalSpecification (emptySentence)* )?
> {#tagBlock = #([TAGBLOCK, "TAGBLOCK"], #tagBlock);}
> ;
>
> // an '@'-tag
> tag
> : AT! WORD
>   {#tag = #([TAG, "TAG"], #tag);}
> ;
>
> // the informal specification in a tagblock
> informalSpecification
> : (sentence)+
> {#informalSpecification = #([INFORMAL, "INFORMAL"],
> #informalSpecification);}
> ;
>
> // the formal specification in a tagblock
> formalSpecification
> : (sentenceFormal)+
> {#formalSpecification = #([FORMAL, "FORMAL"], #formalSpecification);}
> ;
>
> // a sentence can be empty or not
> sentence
> :   emptySentence | nonEmptySentence
> ;
>
> // a non empty sentence
> nonEmptySentence
> :   WORD (WORD|STAR|AT|VERTICAL_LINE)* endline
> ;
>
> // an empty sentence
> emptySentence
> :   endline
> ;
>
> // a sentence from a formal specification
> sentenceFormal
> :   VERTICAL_LINE! (WORD|STAR|AT|VERTICAL_LINE)* endline
> {#sentenceFormal = #([SENTENCEFORMAL, "SENTENCEFORMAL"],
> #sentenceFormal);}
> ;
>
> // a newline symbol, followed by zero or more stars
> endline!
> :   ( NEWLINE(STAR)* )
> ;
>
>
//--------------------------------------------------------------------------
--
> // The lexer
>
//--------------------------------------------------------------------------
--
>
> // Import the necessary classes
> {
> import antlr.TokenStreamSelector;
> }
>
> class JavaDocLexer extends Lexer;
>
> options {
> exportVocab=JavaDoc;   // call the vocabulary "JavaDoc"
> testLiterals=true;     // automatically test for literals
> k=2;                   // two characters of lookahead
> }
>
> // let the lexer know about the selector
> {
> protected TokenStreamSelector selector;
>
> public JavaDocLexer(LexerSharedInputState state, TokenStreamSelector
> sel) {
> this(state);
> selector = sel;
> }
>
> }
>
> // a dummy rule to force vocabulary to be all characters (except special
> //   ones that ANTLR uses internally (0 to 2)
> protected
> VOCAB
> : '\3'..'\377'
> ;
>
> // end of specification block
> JAVADOC_CLOSE
> : "*/"
> { selector.pop(); }
> ;
>
> // @-symbol
> AT
> : '@'
> ;
>
> // star
> STAR
> : '*'
> ;
>
> // vertical line
> VERTICAL_LINE
> : '|'
> ;
>
> // word
> WORD
> // words can't contain whitespace, an '@'-symbol, '*'-symbol or
> '|'-symbol
> : (~( ' ' | '\t' | '\f' | '\r' | '\n' | '@' | '*' | '|'))+
> ;
>
> // Whitespace -- ignored
> WS : ( ' '
> | '\t'
> | '\f'
> )
> { _ttype = Token.SKIP; }
> ;
>
> // newline character
> NEWLINE
> : // handle newlines
> ( "\r\n"  // Evil DOS
> | '\r'    // Macintosh
> | '\n'    // Unix
> )
> { newline(); }
> ;
>
> -----------------------------------------------------------------
>
> How can we easily adapt this grammar to our needs?
>
> A minor problem, this grammar doesn't support
> single line comments /*  */ . The authors told me they didn't how to
> fix is (ambiguities).
>
> I ask a lot, but any help is welcome...
>
> thx
>
> Guy
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Wed Oct  8 04:25:43 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Re: Skipping grammar
In-Reply-To: <bm0pai+jkju@eGroups.com>; from pwolleba@yahoo.no on Wed, Oct 08, 2003 at 10:36:02AM -0000
References: <C7FE35004D40FD45AA342991B88CE40409A7E9@lnml1.eca-international.local> <bm0pai+jkju@eGroups.com>
Message-ID: <20031008132543.B12661@cs.utwente.nl>

On Wed, Oct 08, 2003 at 10:36:02AM -0000, pwolleba wrote:
> Packet name{
> Model name {
> Method{
> 	Expressiontext;
> 	If/else and so on
> };
> };
> };
> 
> As you can see the method is build up much like a method in both C++ 
> or Java. What makes it difficult is the fact that I don't want to 
> parse the method body text, I just want to consume it.
> 
> As you can see my Lex wont work, since it will react at both the 
> Packet bracket as well as Model bracket. If I somehow could just make 
> it start when it is a method I would be really happy.

Dropping in a bit... So if I understand correctly you want to ignore or
just store the contents of the method { .. } block?

Basically you need to do tokenstream multiplexing to do this. Basically you
have one outer lexer that recognizes the bits you want to deal with then
when you encounter the "method {" bit you switch to another (inner) lexer
that only counts braces (and maybe keeps track of comments). That lexer you
can use to just throw away the contents or to store it elsewhere. When the
inner lexer sees the last brace it tells the multiplexer object to switch
back to the outer lexer which continues where the inner lexer finished.

Something you don't want to try ever is to steer this process from the
parser (saw a remark about something like that somewhere in the thread)
this will always fail in the general case.

Have a look at the multiLexer example to see how this is done. Also check
the archive from the list for tokenstream multiplexing and the docs on it.

You will most likely fail if you try to do this from the parser side
(unless you implement the language inside the method as well).

HTH,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     "Never argue with an idiot, for they will bring you down to their
              level and beat you with experience." --- Unknown


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Wed Oct  8 04:48:17 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Re: Skipping grammar
In-Reply-To: <C7FE35004D40FD45AA342991B88CE40409A7EE@lnml1.eca-international.local>
Message-ID: <000501c38d92$10acd650$1ac8090a@oddi.is>

Per: Anthony is on the money here.. do not stop posting here! I'm taking
a graduate course in compiler design and implementation and I choose (or
is it chose?) ANTLR as my tool for the term-project. I first saw ANTLR
no more than 4-5 weeks ago, so in fact you are doing me (and probably
others) a big favour in helping me learn and uderstand this myself.

Does "method {...}" always appear inside "model {...}", and does "model
{..}" always appear inside "packet {...}"? Can a packet contain another
packet, and can a model contain another model? If the answers are yes,
and no, respectively, the nesting level of the starting { for a method
is fixed and you can adapt the first solution we discussed.

If the grammar is more general, i.e. packets can contain other packets
etc. you can do more fancy stuff, like having a stack in your lexer, and
each time you see a "{", determine it's type by the keyword appearing
before it, and push the token-id for the corresponding closing "}" on
the stack. Then, upon seeing an } in the input, pop the type of the
stack and use it with "setType". That way, matching braces will have
matching token types which the parser can use. Example (pseudo-code):

class MyLexer extends Lexer;

tokens { OPEN_PACKET; CLOSE_PACKET; OPEN_MODEL; CLOSE_MODEL;
OPEN_METHOD; CLOSE_METHOD; }

{
	stack braces = new stack();
	int nextBrace = OPEN_PACKET;
	bool readingMethodBody = false;

	int getMatchingToken(int open) {
		if (open == OPEN_PACKET) return CLOSE_PACKET;
		if (open == OPEN_MODEL) reutrn CLOSE_MODE;
		// etc.
	}
}

PACKET: "PACKET" { netxtBrace = OPEN_PACKET; };
MODEL: "model" { nextBrace = OPEN_MODEL; };
METHOD: "method" { nextBrace = OPEN_METHOD; };

OPEN_BRACE /* except method opening braces */
	{ nextBrace != OPEN_METHOD }?
	: '{'
	{
		$setType(nextBrace);
		braces.push(getMatchingToken(nextBrace));
	}
	;

METHOD_BODY
	{ nextBrace == OPEN_METHOD }?
	: '{'! ( BracedExpr | ~'}' )* '}'!

protected
BracedExpr
  : '{' ( BracedExpr | ~'}' )* '}'
  ;

CLOSE_BRACE
	: '}' { $setType(braces.pop()); }
	;

/* plus other tokens you need. */

The token stream for this input

Packet name{
Model name {
Method{
 	Expressiontext;
	If/else and so on
};
};
};

would be something like:

[PACKET,"packet"]
[ID,"name"]
[OPEN_PACKET,"{"]
[MODEL,"model"]
[ID,"name"]
[OPEN_MODEL,"{"]
[METHOD,"method"]
[METHOD_BODY,"Expressiontext;\nIf/else and so on"]
              ^ note that the '{' and '}' were discarded with !
[SEMI,";"]
[CLOSE_MODEL,"}"]
[SEMI,";"]
[CLOSE_PACKET,"}"]
[SEMI,";"]

Do any of you gurus see a problem with this?

My next suggestion was using token multiplexing, and just now I recieved
Ric's post on that :o)

This allows you to add in f.x. tokens for "(param1,param2)" in between
"method" and it's opening brace.
If I'm still way of course: Do you have a formal BNF, EBNF or equivalent
grammar for your input? If so, it would help to see it.

Arnar

> -----Original Message-----
> From: Anthony W Youngman 
> [mailto:Anthony.Youngman@ECA-International.com] 
> Sent: 8. okt?ber 2003 11:10
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Re: Skipping grammar
> 
> 
> Firstly, DON'T stop posting here ... what matters is that you 
> show that
> you are trying to understand. What pisses people off is when 
> they think
> students are trying to skip homework ...
> 
> Secondly, the best way to learn is to teach. I probably don't 
> know much
> more than you, so you're helping me learn (plus all those 
> other lurkers
> who are watching and haven't dived in :-) I've posted similarly "dumb"
> posts and been grateful to everyone who's helped me - I owe it to the
> list to help when I can.
> 
> Okay. In your "file to parse" you have "packet", "model", 
> "method". Are
> these keywords? If so, your life is nice and simple. Similarly, if
> that's your nesting such that the method braces are always at 
> the third
> level down, it's equally as simple, just slightly different. So how do
> you handle that?
> 
> At the start of the lexer, you can declare an initialisation 
> code block.
> You want to declare a state enum with the values NULL, IN_PACKET,
> IN_MODEL, and IN_METHOD.
> 
> Your lexer will now contain something like this ...
> 
> packet: state == NULL   // this is a predicate
>    {
>       "PACKET" lcurly {state = IN_PACKET}  //set the state variable
>       model lcurly {state = NULL} // reset the state variable
>    } ;
> 
> model: state == IN_PACKET
>    {
>       "MODEL" lcurly {state = IN_MODEL}
>       method lcurly {state = IN_PACKET}
>    } ;
> 
> method: ... I'll leave it to you :-)
> 
> I'm sure I've messed up my ANTLR syntax good and proper, and other
> people will help you with how to do this, but this looks like the
> approach you want. Particularly, look at predicates and in-line code.
> And WATCH OUT !!! because predicates *can* get you into trouble with
> look-ahead. It looks like what you're doing is pretty simple and won't
> be any trouble, but it does happen ...
> 
> Cheers,
> Wol
> 
> -----Original Message-----
> From: pwolleba [mailto:pwolleba@yahoo.no] 
> Sent: 08 October 2003 11:36
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: Skipping grammar
> 
> 
> Hello!
> 
> I am starting to dominate this newsgroup with my problem, so I guess 
> I have to stop after this post!
> Anyway, I will paste some of my code from my parser and if you could 
> find where I am thinking wrong I would appreciate if you could 
> comment it!
> 
> 
> 
> PARSER
>  
> //---------------------------------------------- METHODE -------------
> methodeNode         : (METHOD^) declarationName methodeDecleration 
> methodBody;
> 
> methodeDecleration  : (LPAREN!) (methodArguments)? (RPAREN!)
>                       {#methodeDecleration=#
> ([ARGUMENTS,"Arguments"],#methodeDecleration);};
> 
> methodArguments     : (methodArgument (COMMA! methodArguments)?);
> 
> methodArgument      : declarationName;
> 
> methodBody          : (METHOD_BODY)
>                       {#methodBody=#
> ([EXPRESSION,"Expression"],#methodBody);};
> 
> 
> LEX
> 
> METHOD_BODY : '{'! (BracedExpr | ~'}')* "};"!;
> 
> protected
> BracedExpr : '{' (BracedExpr | ~'}')* "}";
> 
> 
> 
> FILE TO PARSE
> 
> Packet name{
> Model name {
> Method{
> 	Expressiontext;
> 	If/else and so on
> };
> };
> };
> 
> As you can see the method is build up much like a method in both C++ 
> or Java. What makes it difficult is the fact that I don't want to 
> parse the method body text, I just want to consume it.
> 
> As you can see my Lex wont work, since it will react at both the 
> Packet bracket as well as Model bracket. If I somehow could just make 
> it start when it is a method I would be really happy.
> 
> Best regards,
> Per
> 
> 
> 
> 
> --- In antlr-interest@yahoogroups.com, "Anthony W Youngman" 
> <Anthony.Youngman@E...> wrote:
> > Hmmm ...
> > 
> > You should be able to declare that in the lexer.
> > 
> > method: lcurly method_body rcurly ;
> > 
> > protected method_body: name arguments expression ;
> > 
> > Do the curly brackets always indicate a method? If not, how do you 
> tell
> > whether it's the start of a method or the start of something else? 
> If
> > you can unabiguously identify the start of a method (eg it's 
> flagged by
> > an lcurly, which is the only use of an lcurly) then what you appear 
> to
> > want is pretty simple to achieve.
> > 
> > Solve the problem of how to identify "this is a method", and the 
> rest of
> > it should just fall into place. If the lexer can recognise "this is 
> a
> > method" then the lexer can handle methods for you. The parser will 
> then
> > build your tree for you the way you want it.
> > 
> > I think your original comment about ";" being used to terminate 
> both IFs
> > and methods is a red herring. Have you grasped why it's not a 
> problem?
> > If you have, then you should be able to work out the rest of the
> > solution fairly easily. If you haven't, then you need to get that
> > straight because it shows a fundamental misunderstanding of ANTLR. 
> Don't
> > forget, both the lexer and parser are recursive (they "drill 
> down"), so
> > context-dependent semantics shouldn't be a problem ...
> > 
> > Cheers,
> > Wol
> > 
> > -----Original Message-----
> > From: pwolleba [mailto:pwolleba@y...] 
> > Sent: 08 October 2003 10:13
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Re: Skipping grammar
> > 
> > 
> > Hello again
> > 
> > Thanks for helping me out Arnar, your solutions are really good! 
> > Still I think I will have problem implementing them, much because I 
> > have not given you enough information. 
> > I need to make a method tag in my tree that contains information, 
> > such as arguments into the method and such (see example).
> > 
> > 
> > Method testMethod (Args,Args....){
> > 	Expression text
> > }
> > 
> > method
> > |
> > |--------Name
> > |
> > |--------Arguments
> > |
> > |-------- Expression
> > 
> > 
> > If I solve this in my lexer I will not be able to create this node 
> > tree, it will just be one node method that contains all the text. 
> If 
> > I drop the "method"tag in my METHOD_BODY tag, it will trigger at 
> all 
> > the other bracket in my document.
> > Can I somehow make my lexer rule without the "method" tag, and then 
> > make it just trigger when I need the method body?
> > 
> > best regards,
> > Per
> > 
> > --- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
> > <arnarb@o...> wrote:
> > > Hello Per,
> > > 
> > > Perhaps you could make "method {" a single token in the parser, 
> and 
> > set
> > > the nestingLevel variable to zero when that one matches.
> > > 
> > > The solution I posted uses the parser to eat up the stuff inside 
> > {...},
> > > another possibility might be to make the lexer do this:
> > > 
> > > METHOD_BODY
> > >   : "method"! '{'! ( BracedExpr | ~'}' )* "};"!
> > >   ;
> > > 
> > > protected
> > > BracedExpr
> > >   : '{' ( BracedExpr | ~'}' )* "}"
> > >   ;
> > > 
> > > Overall, this might be a better solution. The token METHOD_BODY 
> will
> > > then contain as it's text whatever was inside the {...}.
> > > 
> > > As a side note, this is possible in ANTLR lexers because the are 
> LL
> > (k)
> > > and can thus handle context-free grammars. Conventional lexers are
> > > limited to regular grammars (represented by regular expressions 
> > which
> > > are equivalent to finite automata) and can f.x. not match nested 
> > braces,
> > > parenthesis etc. See
> > > http://www.antlr.org/doc/lexer.html#Predicated-LL(k)_Lexing for 
> more
> > > information on this.
> > > 
> > > Arnar
> > > 
> > > ps. yes, the "i" should have been "nestingLevel" :o)
> > > pps. again, I haven't tried this, it might not even be 
> syntactically
> > > correct
> > > 
> > > >>> pwolleba@y... 10/07/03 5:34 PM >>>
> > > Hello again!
> > > 
> > > I am looking at your example Arnar, and I have some questions. 
> > > When I wrote my example I should have included some more 
> > information. 
> > > The methode node is inside of another node called member (see 
> > > example) and it can be more than one!
> > > 
> > > Member{
> > > Methode {
> > > 	Sometext;
> > > };
> > > };
> > > 
> > > This makes your example a bit more difficult to implement, since 
> > the 
> > > counter will start a zero at the first bracket, which is the 
> member 
> > > bracket. I must somehow be able to set nestingLevel = 0 from the 
> > > parser when the method node is starting.
> > > How do I do that?
> > > 
> > > best regards,
> > > Per
> > > 
> > > Ps: I guess it should be nestingLevel++ instead of i++. Correct?
> > > 
> > > --- In antlr-interest@yahoogroups.com, "pwolleba" <pwolleba@y...> 
> > > wrote:
> > > > Yes that is correct, what is inside the bracket is a different 
> > > > language which I at the moment don't want to write a parser for 
> > (it 
> > > > is pretty complex and big). Anyway I have just come back to 
> work, 
> > > and 
> > > > I am going to try out your solution Arnar, hopefully it will 
> > work! 
> > > > 
> > > > I just want to thank the community for trying to find a 
> solution 
> > to 
> > > > my question, and I must say it came really fast!
> > > > 
> > > > Best regards,
> > > > 
> > > > Per
> > > > 
> > > > 
> > > > --- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
> > > > <arnarb@o...> wrote:
> > > > > Hi..
> > > > > 
> > > > > In my earlier post, I understood Per differently. I think he 
> > > want's 
> > > > to
> > > > > parse "method name{ <whatever> };" and just eat up 
> <whatever>, 
> > > > including
> > > > > any nested braces, and put it in a variable, completely 
> without 
> > > > lexing
> > > > > and/or parsing it. Per, is this correct?
> > > > > 
> > > > > The result of all this being a tree something like this:
> > > > > 
> > > > > METHOD
> > > > >  |
> > > > > name-body
> > > > > 
> > > > > where the body node contains anything inside the {..} as it's 
> > > text.
> > > > > 
> > > > > Arnar
> > > > > 
> > > > > >>> Anthony.Youngman@E... 10/07/03 1:33 PM >>>
> > > > > I think you're missing the point. Define a ; as SEMI. The way 
> > I'd 
> > > > do it
> > > > > (and this is all pseudocode) is
> > > > > 
> > > > > if_statement: "IF" lcurly (method)* rcurly "ELSE" lcurly 
> > (method)*
> > > > > rcurly SEMI ;
> > > > > method: blah_blah SEMI ;
> > > > > 
> > > > > That way, the lexer doesn't care whether ; is ending a method 
> > or 
> > > an 
> > > > if
> > > > > clause, and the parser won't get confused because when it 
> hits a
> > > > > right-curly it will be expecting an ELSE or a SEMI, and not a 
> > > > method.
> > > > > And if the ELSE is optional you just mark it as such so when 
> > the 
> > > > parser
> > > > > hits the right-curly after the if, it's expecting an ELSE or 
> a 
> > > SEMI 
> > > > and
> > > > > nothing else.
> > > > > 
> > > > > Cheers,
> > > > > Wol
> > > > > 
> > > > > -----Original Message-----
> > > > > From: pwolleba [mailto:pwolleba@y...] 
> > > > > Sent: 07 October 2003 08:19
> > > > > To: antlr-interest@yahoogroups.com
> > > > > Subject: [antlr-interest] Skipping grammar
> > > > > 
> > > > > 
> > > > > I am pretty new to ANTLR so maybe this question is very 
> > trivial, 
> > > if 
> > > > > so even better then maybe it is a simple solution to my 
> > problem. 
> > > > > Anyway I am struggling with writing a new parser in ANTLR to 
> > > > replace 
> > > > > and old implementation in Flex/Bison, this to make a product 
> > that 
> > > > are 
> > > > > open for implementation from both C++ as well as Java. 
> > > > > 
> > > > > The parser will parse a language that we are using to build 
> > > > > databases, and it must support this language 100% if to be 
> > > > accepted. 
> > > > > 
> > > > > Here is the code cutting that I am struggling with.
> > > > > 
> > > > > method name{
> > > > >   SomeText!()text[];
> > > > >   if(a < b && b < c){
> > > > >      SomeText()!()[];
> > > > >   }
> > > > >   else{
> > > > >      SomeText()!()[];
> > > > >   };
> > > > > };
> > > > > 
> > > > > I am not interesting in the expression that is inside the 
> name 
> > > > > method, I just want ANTLR to grab the text for me, and put it 
> > as 
> > > a 
> > > > > node inside the tree. The problem is the fact that the 
> if/else 
> > > > > statement is ending with a "};" which is the same token as 
> the 
> > > > method 
> > > > > end token, and I have no guarantee that there could be more 
> > that 
> > > > one 
> > > > > inside the method. A solution would be to make a counter that 
> > > will 
> > > > > increase for each "{" and decrease for each "}", then I would 
> > > know 
> > > > > when the method ends. To my frustration I don't know how I 
> > should 
> > > > > make such a counter in ANTRL, that still supports implement 
> in 
> > > both 
> > > > > Java or C++ code.
> > > > > I would be really really happy if someone could help me with 
> > this 
> > > > > problem!
> > > > > 
> > > > > Best reagards,
> > > > > 
> > > > > Per
> > > > > 
> > > > > 
> > > > > 
> > > > >  
> > > > > 
> > > > > Your use of Yahoo! Groups is subject to
> > > > > http://docs.yahoo.com/info/terms/ 
> > > > > 
> > > > > 
> > > > > 
> > > > > 
> > > > > 
> > > > > 
> > > > 
> > > 
> > 
> **********************************************************************
> > > > *************
> > > > > 
> > > > > This transmission is intended for the named recipient only. 
> It 
> > may
> > > > > contain private and confidential information. If this has 
> come 
> > to 
> > > > you in
> > > > > error you must not act on anything disclosed in it, nor must 
> > you 
> > > > copy
> > > > > it, modify it, disseminate it in any way, or show it to 
> anyone. 
> > > > Please
> > > > > e-mail the sender to inform us of the transmission error or 
> > > > telephone
> > > > > ECA International immediately and delete the e-mail from your
> > > > > information system.
> > > > > 
> > > > > Telephone numbers for ECA International offices are: Sydney 
> +61 
> > > (0)2
> > > > > 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 
> > 5000 
> > > > and New
> > > > > York +1 212 582 2333.
> > > > > 
> > > > > 
> > > > 
> > > 
> > 
> **********************************************************************
> > > > *************
> > > > > 
> > > > > 
> > > > >  
> > > > > 
> > > > > Your use of Yahoo! Groups is subject to
> > > > > http://docs.yahoo.com/info/terms/
> > > 
> > > 
> > >  
> > > 
> > > Your use of Yahoo! Groups is subject to
> > > http://docs.yahoo.com/info/terms/
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pwolleba at yahoo.no  Wed Oct  8 05:07:17 2003
From: pwolleba at yahoo.no (pwolleba)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Re: Skipping grammar
In-Reply-To: <000501c38d92$10acd650$1ac8090a@oddi.is>
Message-ID: <bm0ulm+vd05@eGroups.com>

Here I am again! :o)

After reading the multi Lexer solution I do think that is the 
solution to my problem. I actually didn't know that it was possible 
to implement more than one lexer (it is just brilliant!), I guess it 
takes more than a couple of days to learn this tool. :o)
Anyway I will try it out and see if it solves my problem, and post 
the result on this board. I am a bit curious if it is still possible 
to make a C++ parser after I have implemented the multiplexer, I had 
hoped I could use the same parser for both platforms. 

I just want to thank you all for trying to help me out here, I really 
really appreciate it!


Best regards,
Per




--- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
<arnarb@o...> wrote:
> Per: Anthony is on the money here.. do not stop posting here! I'm 
taking
> a graduate course in compiler design and implementation and I 
choose (or
> is it chose?) ANTLR as my tool for the term-project. I first saw 
ANTLR
> no more than 4-5 weeks ago, so in fact you are doing me (and 
probably
> others) a big favour in helping me learn and uderstand this myself.
> 
> Does "method {...}" always appear inside "model {...}", and 
does "model
> {..}" always appear inside "packet {...}"? Can a packet contain 
another
> packet, and can a model contain another model? If the answers are 
yes,
> and no, respectively, the nesting level of the starting { for a 
method
> is fixed and you can adapt the first solution we discussed.
> 
> If the grammar is more general, i.e. packets can contain other 
packets
> etc. you can do more fancy stuff, like having a stack in your 
lexer, and
> each time you see a "{", determine it's type by the keyword 
appearing
> before it, and push the token-id for the corresponding closing "}" 
on
> the stack. Then, upon seeing an } in the input, pop the type of the
> stack and use it with "setType". That way, matching braces will have
> matching token types which the parser can use. Example (pseudo-
code):
> 
> class MyLexer extends Lexer;
> 
> tokens { OPEN_PACKET; CLOSE_PACKET; OPEN_MODEL; CLOSE_MODEL;
> OPEN_METHOD; CLOSE_METHOD; }
> 
> {
> 	stack braces = new stack();
> 	int nextBrace = OPEN_PACKET;
> 	bool readingMethodBody = false;
> 
> 	int getMatchingToken(int open) {
> 		if (open == OPEN_PACKET) return CLOSE_PACKET;
> 		if (open == OPEN_MODEL) reutrn CLOSE_MODE;
> 		// etc.
> 	}
> }
> 
> PACKET: "PACKET" { netxtBrace = OPEN_PACKET; };
> MODEL: "model" { nextBrace = OPEN_MODEL; };
> METHOD: "method" { nextBrace = OPEN_METHOD; };
> 
> OPEN_BRACE /* except method opening braces */
> 	{ nextBrace != OPEN_METHOD }?
> 	: '{'
> 	{
> 		$setType(nextBrace);
> 		braces.push(getMatchingToken(nextBrace));
> 	}
> 	;
> 
> METHOD_BODY
> 	{ nextBrace == OPEN_METHOD }?
> 	: '{'! ( BracedExpr | ~'}' )* '}'!
> 
> protected
> BracedExpr
>   : '{' ( BracedExpr | ~'}' )* '}'
>   ;
> 
> CLOSE_BRACE
> 	: '}' { $setType(braces.pop()); }
> 	;
> 
> /* plus other tokens you need. */
> 
> The token stream for this input
> 
> Packet name{
> Model name {
> Method{
>  	Expressiontext;
> 	If/else and so on
> };
> };
> };
> 
> would be something like:
> 
> [PACKET,"packet"]
> [ID,"name"]
> [OPEN_PACKET,"{"]
> [MODEL,"model"]
> [ID,"name"]
> [OPEN_MODEL,"{"]
> [METHOD,"method"]
> [METHOD_BODY,"Expressiontext;\nIf/else and so on"]
>               ^ note that the '{' and '}' were discarded with !
> [SEMI,";"]
> [CLOSE_MODEL,"}"]
> [SEMI,";"]
> [CLOSE_PACKET,"}"]
> [SEMI,";"]
> 
> Do any of you gurus see a problem with this?
> 
> My next suggestion was using token multiplexing, and just now I 
recieved
> Ric's post on that :o)
> 
> This allows you to add in f.x. tokens for "(param1,param2)" in 
between
> "method" and it's opening brace.
> If I'm still way of course: Do you have a formal BNF, EBNF or 
equivalent
> grammar for your input? If so, it would help to see it.
> 
> Arnar
> 
> > -----Original Message-----
> > From: Anthony W Youngman 
> > [mailto:Anthony.Youngman@E...] 
> > Sent: 8. okt?ber 2003 11:10
> > To: antlr-interest@yahoogroups.com
> > Subject: RE: [antlr-interest] Re: Skipping grammar
> > 
> > 
> > Firstly, DON'T stop posting here ... what matters is that you 
> > show that
> > you are trying to understand. What pisses people off is when 
> > they think
> > students are trying to skip homework ...
> > 
> > Secondly, the best way to learn is to teach. I probably don't 
> > know much
> > more than you, so you're helping me learn (plus all those 
> > other lurkers
> > who are watching and haven't dived in :-) I've posted 
similarly "dumb"
> > posts and been grateful to everyone who's helped me - I owe it to 
the
> > list to help when I can.
> > 
> > Okay. In your "file to parse" you have "packet", "model", 
> > "method". Are
> > these keywords? If so, your life is nice and simple. Similarly, if
> > that's your nesting such that the method braces are always at 
> > the third
> > level down, it's equally as simple, just slightly different. So 
how do
> > you handle that?
> > 
> > At the start of the lexer, you can declare an initialisation 
> > code block.
> > You want to declare a state enum with the values NULL, IN_PACKET,
> > IN_MODEL, and IN_METHOD.
> > 
> > Your lexer will now contain something like this ...
> > 
> > packet: state == NULL   // this is a predicate
> >    {
> >       "PACKET" lcurly {state = IN_PACKET}  //set the state 
variable
> >       model lcurly {state = NULL} // reset the state variable
> >    } ;
> > 
> > model: state == IN_PACKET
> >    {
> >       "MODEL" lcurly {state = IN_MODEL}
> >       method lcurly {state = IN_PACKET}
> >    } ;
> > 
> > method: ... I'll leave it to you :-)
> > 
> > I'm sure I've messed up my ANTLR syntax good and proper, and other
> > people will help you with how to do this, but this looks like the
> > approach you want. Particularly, look at predicates and in-line 
code.
> > And WATCH OUT !!! because predicates *can* get you into trouble 
with
> > look-ahead. It looks like what you're doing is pretty simple and 
won't
> > be any trouble, but it does happen ...
> > 
> > Cheers,
> > Wol
> > 
> > -----Original Message-----
> > From: pwolleba [mailto:pwolleba@y...] 
> > Sent: 08 October 2003 11:36
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Re: Skipping grammar
> > 
> > 
> > Hello!
> > 
> > I am starting to dominate this newsgroup with my problem, so I 
guess 
> > I have to stop after this post!
> > Anyway, I will paste some of my code from my parser and if you 
could 
> > find where I am thinking wrong I would appreciate if you could 
> > comment it!
> > 
> > 
> > 
> > PARSER
> >  
> > //---------------------------------------------- METHODE ---------
----
> > methodeNode         : (METHOD^) declarationName 
methodeDecleration 
> > methodBody;
> > 
> > methodeDecleration  : (LPAREN!) (methodArguments)? (RPAREN!)
> >                       {#methodeDecleration=#
> > ([ARGUMENTS,"Arguments"],#methodeDecleration);};
> > 
> > methodArguments     : (methodArgument (COMMA! methodArguments)?);
> > 
> > methodArgument      : declarationName;
> > 
> > methodBody          : (METHOD_BODY)
> >                       {#methodBody=#
> > ([EXPRESSION,"Expression"],#methodBody);};
> > 
> > 
> > LEX
> > 
> > METHOD_BODY : '{'! (BracedExpr | ~'}')* "};"!;
> > 
> > protected
> > BracedExpr : '{' (BracedExpr | ~'}')* "}";
> > 
> > 
> > 
> > FILE TO PARSE
> > 
> > Packet name{
> > Model name {
> > Method{
> > 	Expressiontext;
> > 	If/else and so on
> > };
> > };
> > };
> > 
> > As you can see the method is build up much like a method in both 
C++ 
> > or Java. What makes it difficult is the fact that I don't want to 
> > parse the method body text, I just want to consume it.
> > 
> > As you can see my Lex wont work, since it will react at both the 
> > Packet bracket as well as Model bracket. If I somehow could just 
make 
> > it start when it is a method I would be really happy.
> > 
> > Best regards,
> > Per
> > 
> > 
> > 
> > 
> > --- In antlr-interest@yahoogroups.com, "Anthony W Youngman" 
> > <Anthony.Youngman@E...> wrote:
> > > Hmmm ...
> > > 
> > > You should be able to declare that in the lexer.
> > > 
> > > method: lcurly method_body rcurly ;
> > > 
> > > protected method_body: name arguments expression ;
> > > 
> > > Do the curly brackets always indicate a method? If not, how do 
you 
> > tell
> > > whether it's the start of a method or the start of something 
else? 
> > If
> > > you can unabiguously identify the start of a method (eg it's 
> > flagged by
> > > an lcurly, which is the only use of an lcurly) then what you 
appear 
> > to
> > > want is pretty simple to achieve.
> > > 
> > > Solve the problem of how to identify "this is a method", and 
the 
> > rest of
> > > it should just fall into place. If the lexer can 
recognise "this is 
> > a
> > > method" then the lexer can handle methods for you. The parser 
will 
> > then
> > > build your tree for you the way you want it.
> > > 
> > > I think your original comment about ";" being used to terminate 
> > both IFs
> > > and methods is a red herring. Have you grasped why it's not a 
> > problem?
> > > If you have, then you should be able to work out the rest of the
> > > solution fairly easily. If you haven't, then you need to get 
that
> > > straight because it shows a fundamental misunderstanding of 
ANTLR. 
> > Don't
> > > forget, both the lexer and parser are recursive (they "drill 
> > down"), so
> > > context-dependent semantics shouldn't be a problem ...
> > > 
> > > Cheers,
> > > Wol
> > > 
> > > -----Original Message-----
> > > From: pwolleba [mailto:pwolleba@y...] 
> > > Sent: 08 October 2003 10:13
> > > To: antlr-interest@yahoogroups.com
> > > Subject: [antlr-interest] Re: Skipping grammar
> > > 
> > > 
> > > Hello again
> > > 
> > > Thanks for helping me out Arnar, your solutions are really 
good! 
> > > Still I think I will have problem implementing them, much 
because I 
> > > have not given you enough information. 
> > > I need to make a method tag in my tree that contains 
information, 
> > > such as arguments into the method and such (see example).
> > > 
> > > 
> > > Method testMethod (Args,Args....){
> > > 	Expression text
> > > }
> > > 
> > > method
> > > |
> > > |--------Name
> > > |
> > > |--------Arguments
> > > |
> > > |-------- Expression
> > > 
> > > 
> > > If I solve this in my lexer I will not be able to create this 
node 
> > > tree, it will just be one node method that contains all the 
text. 
> > If 
> > > I drop the "method"tag in my METHOD_BODY tag, it will trigger 
at 
> > all 
> > > the other bracket in my document.
> > > Can I somehow make my lexer rule without the "method" tag, and 
then 
> > > make it just trigger when I need the method body?
> > > 
> > > best regards,
> > > Per
> > > 
> > > --- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
> > > <arnarb@o...> wrote:
> > > > Hello Per,
> > > > 
> > > > Perhaps you could make "method {" a single token in the 
parser, 
> > and 
> > > set
> > > > the nestingLevel variable to zero when that one matches.
> > > > 
> > > > The solution I posted uses the parser to eat up the stuff 
inside 
> > > {...},
> > > > another possibility might be to make the lexer do this:
> > > > 
> > > > METHOD_BODY
> > > >   : "method"! '{'! ( BracedExpr | ~'}' )* "};"!
> > > >   ;
> > > > 
> > > > protected
> > > > BracedExpr
> > > >   : '{' ( BracedExpr | ~'}' )* "}"
> > > >   ;
> > > > 
> > > > Overall, this might be a better solution. The token 
METHOD_BODY 
> > will
> > > > then contain as it's text whatever was inside the {...}.
> > > > 
> > > > As a side note, this is possible in ANTLR lexers because the 
are 
> > LL
> > > (k)
> > > > and can thus handle context-free grammars. Conventional 
lexers are
> > > > limited to regular grammars (represented by regular 
expressions 
> > > which
> > > > are equivalent to finite automata) and can f.x. not match 
nested 
> > > braces,
> > > > parenthesis etc. See
> > > > http://www.antlr.org/doc/lexer.html#Predicated-LL(k)_Lexing 
for 
> > more
> > > > information on this.
> > > > 
> > > > Arnar
> > > > 
> > > > ps. yes, the "i" should have been "nestingLevel" :o)
> > > > pps. again, I haven't tried this, it might not even be 
> > syntactically
> > > > correct
> > > > 
> > > > >>> pwolleba@y... 10/07/03 5:34 PM >>>
> > > > Hello again!
> > > > 
> > > > I am looking at your example Arnar, and I have some 
questions. 
> > > > When I wrote my example I should have included some more 
> > > information. 
> > > > The methode node is inside of another node called member (see 
> > > > example) and it can be more than one!
> > > > 
> > > > Member{
> > > > Methode {
> > > > 	Sometext;
> > > > };
> > > > };
> > > > 
> > > > This makes your example a bit more difficult to implement, 
since 
> > > the 
> > > > counter will start a zero at the first bracket, which is the 
> > member 
> > > > bracket. I must somehow be able to set nestingLevel = 0 from 
the 
> > > > parser when the method node is starting.
> > > > How do I do that?
> > > > 
> > > > best regards,
> > > > Per
> > > > 
> > > > Ps: I guess it should be nestingLevel++ instead of i++. 
Correct?
> > > > 
> > > > --- In antlr-interest@yahoogroups.com, "pwolleba" 
<pwolleba@y...> 
> > > > wrote:
> > > > > Yes that is correct, what is inside the bracket is a 
different 
> > > > > language which I at the moment don't want to write a parser 
for 
> > > (it 
> > > > > is pretty complex and big). Anyway I have just come back to 
> > work, 
> > > > and 
> > > > > I am going to try out your solution Arnar, hopefully it 
will 
> > > work! 
> > > > > 
> > > > > I just want to thank the community for trying to find a 
> > solution 
> > > to 
> > > > > my question, and I must say it came really fast!
> > > > > 
> > > > > Best regards,
> > > > > 
> > > > > Per
> > > > > 
> > > > > 
> > > > > --- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
> > > > > <arnarb@o...> wrote:
> > > > > > Hi..
> > > > > > 
> > > > > > In my earlier post, I understood Per differently. I think 
he 
> > > > want's 
> > > > > to
> > > > > > parse "method name{ <whatever> };" and just eat up 
> > <whatever>, 
> > > > > including
> > > > > > any nested braces, and put it in a variable, completely 
> > without 
> > > > > lexing
> > > > > > and/or parsing it. Per, is this correct?
> > > > > > 
> > > > > > The result of all this being a tree something like this:
> > > > > > 
> > > > > > METHOD
> > > > > >  |
> > > > > > name-body
> > > > > > 
> > > > > > where the body node contains anything inside the {..} as 
it's 
> > > > text.
> > > > > > 
> > > > > > Arnar
> > > > > > 
> > > > > > >>> Anthony.Youngman@E... 10/07/03 1:33 PM >>>
> > > > > > I think you're missing the point. Define a ; as SEMI. The 
way 
> > > I'd 
> > > > > do it
> > > > > > (and this is all pseudocode) is
> > > > > > 
> > > > > > if_statement: "IF" lcurly (method)* rcurly "ELSE" lcurly 
> > > (method)*
> > > > > > rcurly SEMI ;
> > > > > > method: blah_blah SEMI ;
> > > > > > 
> > > > > > That way, the lexer doesn't care whether ; is ending a 
method 
> > > or 
> > > > an 
> > > > > if
> > > > > > clause, and the parser won't get confused because when it 
> > hits a
> > > > > > right-curly it will be expecting an ELSE or a SEMI, and 
not a 
> > > > > method.
> > > > > > And if the ELSE is optional you just mark it as such so 
when 
> > > the 
> > > > > parser
> > > > > > hits the right-curly after the if, it's expecting an ELSE 
or 
> > a 
> > > > SEMI 
> > > > > and
> > > > > > nothing else.
> > > > > > 
> > > > > > Cheers,
> > > > > > Wol
> > > > > > 
> > > > > > -----Original Message-----
> > > > > > From: pwolleba [mailto:pwolleba@y...] 
> > > > > > Sent: 07 October 2003 08:19
> > > > > > To: antlr-interest@yahoogroups.com
> > > > > > Subject: [antlr-interest] Skipping grammar
> > > > > > 
> > > > > > 
> > > > > > I am pretty new to ANTLR so maybe this question is very 
> > > trivial, 
> > > > if 
> > > > > > so even better then maybe it is a simple solution to my 
> > > problem. 
> > > > > > Anyway I am struggling with writing a new parser in ANTLR 
to 
> > > > > replace 
> > > > > > and old implementation in Flex/Bison, this to make a 
product 
> > > that 
> > > > > are 
> > > > > > open for implementation from both C++ as well as Java. 
> > > > > > 
> > > > > > The parser will parse a language that we are using to 
build 
> > > > > > databases, and it must support this language 100% if to 
be 
> > > > > accepted. 
> > > > > > 
> > > > > > Here is the code cutting that I am struggling with.
> > > > > > 
> > > > > > method name{
> > > > > >   SomeText!()text[];
> > > > > >   if(a < b && b < c){
> > > > > >      SomeText()!()[];
> > > > > >   }
> > > > > >   else{
> > > > > >      SomeText()!()[];
> > > > > >   };
> > > > > > };
> > > > > > 
> > > > > > I am not interesting in the expression that is inside the 
> > name 
> > > > > > method, I just want ANTLR to grab the text for me, and 
put it 
> > > as 
> > > > a 
> > > > > > node inside the tree. The problem is the fact that the 
> > if/else 
> > > > > > statement is ending with a "};" which is the same token 
as 
> > the 
> > > > > method 
> > > > > > end token, and I have no guarantee that there could be 
more 
> > > that 
> > > > > one 
> > > > > > inside the method. A solution would be to make a counter 
that 
> > > > will 
> > > > > > increase for each "{" and decrease for each "}", then I 
would 
> > > > know 
> > > > > > when the method ends. To my frustration I don't know how 
I 
> > > should 
> > > > > > make such a counter in ANTRL, that still supports 
implement 
> > in 
> > > > both 
> > > > > > Java or C++ code.
> > > > > > I would be really really happy if someone could help me 
with 
> > > this 
> > > > > > problem!
> > > > > > 
> > > > > > Best reagards,
> > > > > > 
> > > > > > Per
> > > > > > 
> > > > > > 
> > > > > > 
> > > > > >  
> > > > > > 
> > > > > > Your use of Yahoo! Groups is subject to
> > > > > > http://docs.yahoo.com/info/terms/ 
> > > > > > 
> > > > > > 
> > > > > > 
> > > > > > 
> > > > > > 
> > > > > > 
> > > > > 
> > > > 
> > > 
> > 
**********************************************************************
> > > > > *************
> > > > > > 
> > > > > > This transmission is intended for the named recipient 
only. 
> > It 
> > > may
> > > > > > contain private and confidential information. If this has 
> > come 
> > > to 
> > > > > you in
> > > > > > error you must not act on anything disclosed in it, nor 
must 
> > > you 
> > > > > copy
> > > > > > it, modify it, disseminate it in any way, or show it to 
> > anyone. 
> > > > > Please
> > > > > > e-mail the sender to inform us of the transmission error 
or 
> > > > > telephone
> > > > > > ECA International immediately and delete the e-mail from 
your
> > > > > > information system.
> > > > > > 
> > > > > > Telephone numbers for ECA International offices are: 
Sydney 
> > +61 
> > > > (0)2
> > > > > > 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 
7351 
> > > 5000 
> > > > > and New
> > > > > > York +1 212 582 2333.
> > > > > > 
> > > > > > 
> > > > > 
> > > > 
> > > 
> > 
**********************************************************************
> > > > > *************
> > > > > > 
> > > > > > 
> > > > > >  
> > > > > > 
> > > > > > Your use of Yahoo! Groups is subject to
> > > > > > http://docs.yahoo.com/info/terms/
> > > > 
> > > > 
> > > >  
> > > > 
> > > > Your use of Yahoo! Groups is subject to
> > > > http://docs.yahoo.com/info/terms/
> > > 
> > > 
> > >  
> > > 
> > > Your use of Yahoo! Groups is subject to
> > > http://docs.yahoo.com/info/terms/
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> >


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Wed Oct  8 05:12:07 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] On a more personal note...
Message-ID: <000c01c38d95$665fbe20$1ac8090a@oddi.is>

Hi there..

I just wanted to express my opinion on one thing: I love ANTLR! I have
been using lex/yacc for quite a few projects, and LL-predicated lexing
opens up a whole new world of possibilities.

As I have mentioned before, I am taking (or have taken) courses in
compiler design and programming language theory. Discovering ANTLR has
helped in making me seriously thinking about aquiring a masters degree
specializing in this field of CS.

Reading posts from all of you on this list as well as contemplating on
the problems posted here has given me just as much of an understandnig
on the practical side of my studies as all the lectures combined, and
seeing ANTLR in action solving compicated problems (somtimes
context-dependent) makes me appreciate it greatly.

A big hand for Terence and all the others involved in ANTLR's design and
implementation!

'nuff said..

thank you,
Arnar


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Wed Oct  8 05:14:03 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Re: Skipping grammar
In-Reply-To: <bm0ulm+vd05@eGroups.com>
Message-ID: <000d01c38d95$ab294d00$1ac8090a@oddi.is>

Hi..

> I am a bit curious if it is still possible 
> to make a C++ parser after I have implemented the multiplexer, I had 
> hoped I could use the same parser for both platforms. 

Sure, I'm using a multiplexing lexer, all written in C++ and it works
great!

Arnar


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pwolleba at yahoo.no  Wed Oct  8 05:36:55 2003
From: pwolleba at yahoo.no (pwolleba)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Re: Skipping grammar
In-Reply-To: <000d01c38d95$ab294d00$1ac8090a@oddi.is>
Message-ID: <bm10d7+fuc3@eGroups.com>

But can you use the same script both for Java as well as C++?

best regards,
Per

--- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
<arnarb@o...> wrote:
> Hi..
> 
> > I am a bit curious if it is still possible 
> > to make a C++ parser after I have implemented the multiplexer, I 
had 
> > hoped I could use the same parser for both platforms. 
> 
> Sure, I'm using a multiplexing lexer, all written in C++ and it 
works
> great!
> 
> Arnar


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Wed Oct  8 05:39:54 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Re: Skipping grammar
In-Reply-To: <bm10d7+fuc3@eGroups.com>
Message-ID: <001201c38d99$462ad230$1ac8090a@oddi.is>

No, the grammar actions have to be written in the corresponding
language. I staret off in Java, and porting the actions to C++ was
fairly easy.

You either need to maintain seperate .g files for each target, or
preprocessing them in some way.

Arnar

> -----Original Message-----
> From: pwolleba [mailto:pwolleba@yahoo.no] 
> Sent: 8. okt?ber 2003 12:37
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: Skipping grammar
> 
> 
> But can you use the same script both for Java as well as C++?
> 
> best regards,
> Per
> 
> --- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
> <arnarb@o...> wrote:
> > Hi..
> > 
> > > I am a bit curious if it is still possible 
> > > to make a C++ parser after I have implemented the multiplexer, I 
> had 
> > > hoped I could use the same parser for both platforms. 
> > 
> > Sure, I'm using a multiplexing lexer, all written in C++ and it 
> works
> > great!
> > 
> > Arnar
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Wed Oct  8 09:03:09 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Re: Skipping grammar
Message-ID: <72C9789739C4214096AE945753B11EA36B1F4B@mypxmail04.bco-home.com>

I haven't spent too much time analyzing this but in general it sounds good!

Monty

-----Original Message-----
From: Arnar Birgisson [mailto:arnarb@oddi.is] 
Sent: Wednesday, October 08, 2003 4:48 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Re: Skipping grammar

Per: Anthony is on the money here.. do not stop posting here! I'm taking
a graduate course in compiler design and implementation and I choose (or
is it chose?) ANTLR as my tool for the term-project. I first saw ANTLR
no more than 4-5 weeks ago, so in fact you are doing me (and probably
others) a big favour in helping me learn and uderstand this myself.

Does "method {...}" always appear inside "model {...}", and does "model
{..}" always appear inside "packet {...}"? Can a packet contain another
packet, and can a model contain another model? If the answers are yes,
and no, respectively, the nesting level of the starting { for a method
is fixed and you can adapt the first solution we discussed.

If the grammar is more general, i.e. packets can contain other packets
etc. you can do more fancy stuff, like having a stack in your lexer, and
each time you see a "{", determine it's type by the keyword appearing
before it, and push the token-id for the corresponding closing "}" on
the stack. Then, upon seeing an } in the input, pop the type of the
stack and use it with "setType". That way, matching braces will have
matching token types which the parser can use. Example (pseudo-code):

class MyLexer extends Lexer;

tokens { OPEN_PACKET; CLOSE_PACKET; OPEN_MODEL; CLOSE_MODEL;
OPEN_METHOD; CLOSE_METHOD; }

{
	stack braces = new stack();
	int nextBrace = OPEN_PACKET;
	bool readingMethodBody = false;

	int getMatchingToken(int open) {
		if (open == OPEN_PACKET) return CLOSE_PACKET;
		if (open == OPEN_MODEL) reutrn CLOSE_MODE;
		// etc.
	}
}

PACKET: "PACKET" { netxtBrace = OPEN_PACKET; };
MODEL: "model" { nextBrace = OPEN_MODEL; };
METHOD: "method" { nextBrace = OPEN_METHOD; };

OPEN_BRACE /* except method opening braces */
	{ nextBrace != OPEN_METHOD }?
	: '{'
	{
		$setType(nextBrace);
		braces.push(getMatchingToken(nextBrace));
	}
	;

METHOD_BODY
	{ nextBrace == OPEN_METHOD }?
	: '{'! ( BracedExpr | ~'}' )* '}'!

protected
BracedExpr
  : '{' ( BracedExpr | ~'}' )* '}'
  ;

CLOSE_BRACE
	: '}' { $setType(braces.pop()); }
	;

/* plus other tokens you need. */

The token stream for this input

Packet name{
Model name {
Method{
 	Expressiontext;
	If/else and so on
};
};
};

would be something like:

[PACKET,"packet"]
[ID,"name"]
[OPEN_PACKET,"{"]
[MODEL,"model"]
[ID,"name"]
[OPEN_MODEL,"{"]
[METHOD,"method"]
[METHOD_BODY,"Expressiontext;\nIf/else and so on"]
              ^ note that the '{' and '}' were discarded with !
[SEMI,";"]
[CLOSE_MODEL,"}"]
[SEMI,";"]
[CLOSE_PACKET,"}"]
[SEMI,";"]

Do any of you gurus see a problem with this?

My next suggestion was using token multiplexing, and just now I recieved
Ric's post on that :o)

This allows you to add in f.x. tokens for "(param1,param2)" in between
"method" and it's opening brace.
If I'm still way of course: Do you have a formal BNF, EBNF or equivalent
grammar for your input? If so, it would help to see it.

Arnar

> -----Original Message-----
> From: Anthony W Youngman 
> [mailto:Anthony.Youngman@ECA-International.com] 
> Sent: 8. okt?ber 2003 11:10
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Re: Skipping grammar
> 
> 
> Firstly, DON'T stop posting here ... what matters is that you 
> show that
> you are trying to understand. What pisses people off is when 
> they think
> students are trying to skip homework ...
> 
> Secondly, the best way to learn is to teach. I probably don't 
> know much
> more than you, so you're helping me learn (plus all those 
> other lurkers
> who are watching and haven't dived in :-) I've posted similarly "dumb"
> posts and been grateful to everyone who's helped me - I owe it to the
> list to help when I can.
> 
> Okay. In your "file to parse" you have "packet", "model", 
> "method". Are
> these keywords? If so, your life is nice and simple. Similarly, if
> that's your nesting such that the method braces are always at 
> the third
> level down, it's equally as simple, just slightly different. So how do
> you handle that?
> 
> At the start of the lexer, you can declare an initialisation 
> code block.
> You want to declare a state enum with the values NULL, IN_PACKET,
> IN_MODEL, and IN_METHOD.
> 
> Your lexer will now contain something like this ...
> 
> packet: state == NULL   // this is a predicate
>    {
>       "PACKET" lcurly {state = IN_PACKET}  //set the state variable
>       model lcurly {state = NULL} // reset the state variable
>    } ;
> 
> model: state == IN_PACKET
>    {
>       "MODEL" lcurly {state = IN_MODEL}
>       method lcurly {state = IN_PACKET}
>    } ;
> 
> method: ... I'll leave it to you :-)
> 
> I'm sure I've messed up my ANTLR syntax good and proper, and other
> people will help you with how to do this, but this looks like the
> approach you want. Particularly, look at predicates and in-line code.
> And WATCH OUT !!! because predicates *can* get you into trouble with
> look-ahead. It looks like what you're doing is pretty simple and won't
> be any trouble, but it does happen ...
> 
> Cheers,
> Wol
> 
> -----Original Message-----
> From: pwolleba [mailto:pwolleba@yahoo.no] 
> Sent: 08 October 2003 11:36
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: Skipping grammar
> 
> 
> Hello!
> 
> I am starting to dominate this newsgroup with my problem, so I guess 
> I have to stop after this post!
> Anyway, I will paste some of my code from my parser and if you could 
> find where I am thinking wrong I would appreciate if you could 
> comment it!
> 
> 
> 
> PARSER
>  
> //---------------------------------------------- METHODE -------------
> methodeNode         : (METHOD^) declarationName methodeDecleration 
> methodBody;
> 
> methodeDecleration  : (LPAREN!) (methodArguments)? (RPAREN!)
>                       {#methodeDecleration=#
> ([ARGUMENTS,"Arguments"],#methodeDecleration);};
> 
> methodArguments     : (methodArgument (COMMA! methodArguments)?);
> 
> methodArgument      : declarationName;
> 
> methodBody          : (METHOD_BODY)
>                       {#methodBody=#
> ([EXPRESSION,"Expression"],#methodBody);};
> 
> 
> LEX
> 
> METHOD_BODY : '{'! (BracedExpr | ~'}')* "};"!;
> 
> protected
> BracedExpr : '{' (BracedExpr | ~'}')* "}";
> 
> 
> 
> FILE TO PARSE
> 
> Packet name{
> Model name {
> Method{
> 	Expressiontext;
> 	If/else and so on
> };
> };
> };
> 
> As you can see the method is build up much like a method in both C++ 
> or Java. What makes it difficult is the fact that I don't want to 
> parse the method body text, I just want to consume it.
> 
> As you can see my Lex wont work, since it will react at both the 
> Packet bracket as well as Model bracket. If I somehow could just make 
> it start when it is a method I would be really happy.
> 
> Best regards,
> Per
> 
> 
> 
> 
> --- In antlr-interest@yahoogroups.com, "Anthony W Youngman" 
> <Anthony.Youngman@E...> wrote:
> > Hmmm ...
> > 
> > You should be able to declare that in the lexer.
> > 
> > method: lcurly method_body rcurly ;
> > 
> > protected method_body: name arguments expression ;
> > 
> > Do the curly brackets always indicate a method? If not, how do you 
> tell
> > whether it's the start of a method or the start of something else? 
> If
> > you can unabiguously identify the start of a method (eg it's 
> flagged by
> > an lcurly, which is the only use of an lcurly) then what you appear 
> to
> > want is pretty simple to achieve.
> > 
> > Solve the problem of how to identify "this is a method", and the 
> rest of
> > it should just fall into place. If the lexer can recognise "this is 
> a
> > method" then the lexer can handle methods for you. The parser will 
> then
> > build your tree for you the way you want it.
> > 
> > I think your original comment about ";" being used to terminate 
> both IFs
> > and methods is a red herring. Have you grasped why it's not a 
> problem?
> > If you have, then you should be able to work out the rest of the
> > solution fairly easily. If you haven't, then you need to get that
> > straight because it shows a fundamental misunderstanding of ANTLR. 
> Don't
> > forget, both the lexer and parser are recursive (they "drill 
> down"), so
> > context-dependent semantics shouldn't be a problem ...
> > 
> > Cheers,
> > Wol
> > 
> > -----Original Message-----
> > From: pwolleba [mailto:pwolleba@y...] 
> > Sent: 08 October 2003 10:13
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Re: Skipping grammar
> > 
> > 
> > Hello again
> > 
> > Thanks for helping me out Arnar, your solutions are really good! 
> > Still I think I will have problem implementing them, much because I 
> > have not given you enough information. 
> > I need to make a method tag in my tree that contains information, 
> > such as arguments into the method and such (see example).
> > 
> > 
> > Method testMethod (Args,Args....){
> > 	Expression text
> > }
> > 
> > method
> > |
> > |--------Name
> > |
> > |--------Arguments
> > |
> > |-------- Expression
> > 
> > 
> > If I solve this in my lexer I will not be able to create this node 
> > tree, it will just be one node method that contains all the text. 
> If 
> > I drop the "method"tag in my METHOD_BODY tag, it will trigger at 
> all 
> > the other bracket in my document.
> > Can I somehow make my lexer rule without the "method" tag, and then 
> > make it just trigger when I need the method body?
> > 
> > best regards,
> > Per
> > 
> > --- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
> > <arnarb@o...> wrote:
> > > Hello Per,
> > > 
> > > Perhaps you could make "method {" a single token in the parser, 
> and 
> > set
> > > the nestingLevel variable to zero when that one matches.
> > > 
> > > The solution I posted uses the parser to eat up the stuff inside 
> > {...},
> > > another possibility might be to make the lexer do this:
> > > 
> > > METHOD_BODY
> > >   : "method"! '{'! ( BracedExpr | ~'}' )* "};"!
> > >   ;
> > > 
> > > protected
> > > BracedExpr
> > >   : '{' ( BracedExpr | ~'}' )* "}"
> > >   ;
> > > 
> > > Overall, this might be a better solution. The token METHOD_BODY 
> will
> > > then contain as it's text whatever was inside the {...}.
> > > 
> > > As a side note, this is possible in ANTLR lexers because the are 
> LL
> > (k)
> > > and can thus handle context-free grammars. Conventional lexers are
> > > limited to regular grammars (represented by regular expressions 
> > which
> > > are equivalent to finite automata) and can f.x. not match nested 
> > braces,
> > > parenthesis etc. See
> > > http://www.antlr.org/doc/lexer.html#Predicated-LL(k)_Lexing for 
> more
> > > information on this.
> > > 
> > > Arnar
> > > 
> > > ps. yes, the "i" should have been "nestingLevel" :o)
> > > pps. again, I haven't tried this, it might not even be 
> syntactically
> > > correct
> > > 
> > > >>> pwolleba@y... 10/07/03 5:34 PM >>>
> > > Hello again!
> > > 
> > > I am looking at your example Arnar, and I have some questions. 
> > > When I wrote my example I should have included some more 
> > information. 
> > > The methode node is inside of another node called member (see 
> > > example) and it can be more than one!
> > > 
> > > Member{
> > > Methode {
> > > 	Sometext;
> > > };
> > > };
> > > 
> > > This makes your example a bit more difficult to implement, since 
> > the 
> > > counter will start a zero at the first bracket, which is the 
> member 
> > > bracket. I must somehow be able to set nestingLevel = 0 from the 
> > > parser when the method node is starting.
> > > How do I do that?
> > > 
> > > best regards,
> > > Per
> > > 
> > > Ps: I guess it should be nestingLevel++ instead of i++. Correct?
> > > 
> > > --- In antlr-interest@yahoogroups.com, "pwolleba" <pwolleba@y...> 
> > > wrote:
> > > > Yes that is correct, what is inside the bracket is a different 
> > > > language which I at the moment don't want to write a parser for 
> > (it 
> > > > is pretty complex and big). Anyway I have just come back to 
> work, 
> > > and 
> > > > I am going to try out your solution Arnar, hopefully it will 
> > work! 
> > > > 
> > > > I just want to thank the community for trying to find a 
> solution 
> > to 
> > > > my question, and I must say it came really fast!
> > > > 
> > > > Best regards,
> > > > 
> > > > Per
> > > > 
> > > > 
> > > > --- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
> > > > <arnarb@o...> wrote:
> > > > > Hi..
> > > > > 
> > > > > In my earlier post, I understood Per differently. I think he 
> > > want's 
> > > > to
> > > > > parse "method name{ <whatever> };" and just eat up 
> <whatever>, 
> > > > including
> > > > > any nested braces, and put it in a variable, completely 
> without 
> > > > lexing
> > > > > and/or parsing it. Per, is this correct?
> > > > > 
> > > > > The result of all this being a tree something like this:
> > > > > 
> > > > > METHOD
> > > > >  |
> > > > > name-body
> > > > > 
> > > > > where the body node contains anything inside the {..} as it's 
> > > text.
> > > > > 
> > > > > Arnar
> > > > > 
> > > > > >>> Anthony.Youngman@E... 10/07/03 1:33 PM >>>
> > > > > I think you're missing the point. Define a ; as SEMI. The way 
> > I'd 
> > > > do it
> > > > > (and this is all pseudocode) is
> > > > > 
> > > > > if_statement: "IF" lcurly (method)* rcurly "ELSE" lcurly 
> > (method)*
> > > > > rcurly SEMI ;
> > > > > method: blah_blah SEMI ;
> > > > > 
> > > > > That way, the lexer doesn't care whether ; is ending a method 
> > or 
> > > an 
> > > > if
> > > > > clause, and the parser won't get confused because when it 
> hits a
> > > > > right-curly it will be expecting an ELSE or a SEMI, and not a 
> > > > method.
> > > > > And if the ELSE is optional you just mark it as such so when 
> > the 
> > > > parser
> > > > > hits the right-curly after the if, it's expecting an ELSE or 
> a 
> > > SEMI 
> > > > and
> > > > > nothing else.
> > > > > 
> > > > > Cheers,
> > > > > Wol
> > > > > 
> > > > > -----Original Message-----
> > > > > From: pwolleba [mailto:pwolleba@y...] 
> > > > > Sent: 07 October 2003 08:19
> > > > > To: antlr-interest@yahoogroups.com
> > > > > Subject: [antlr-interest] Skipping grammar
> > > > > 
> > > > > 
> > > > > I am pretty new to ANTLR so maybe this question is very 
> > trivial, 
> > > if 
> > > > > so even better then maybe it is a simple solution to my 
> > problem. 
> > > > > Anyway I am struggling with writing a new parser in ANTLR to 
> > > > replace 
> > > > > and old implementation in Flex/Bison, this to make a product 
> > that 
> > > > are 
> > > > > open for implementation from both C++ as well as Java. 
> > > > > 
> > > > > The parser will parse a language that we are using to build 
> > > > > databases, and it must support this language 100% if to be 
> > > > accepted. 
> > > > > 
> > > > > Here is the code cutting that I am struggling with.
> > > > > 
> > > > > method name{
> > > > >   SomeText!()text[];
> > > > >   if(a < b && b < c){
> > > > >      SomeText()!()[];
> > > > >   }
> > > > >   else{
> > > > >      SomeText()!()[];
> > > > >   };
> > > > > };
> > > > > 
> > > > > I am not interesting in the expression that is inside the 
> name 
> > > > > method, I just want ANTLR to grab the text for me, and put it 
> > as 
> > > a 
> > > > > node inside the tree. The problem is the fact that the 
> if/else 
> > > > > statement is ending with a "};" which is the same token as 
> the 
> > > > method 
> > > > > end token, and I have no guarantee that there could be more 
> > that 
> > > > one 
> > > > > inside the method. A solution would be to make a counter that 
> > > will 
> > > > > increase for each "{" and decrease for each "}", then I would 
> > > know 
> > > > > when the method ends. To my frustration I don't know how I 
> > should 
> > > > > make such a counter in ANTRL, that still supports implement 
> in 
> > > both 
> > > > > Java or C++ code.
> > > > > I would be really really happy if someone could help me with 
> > this 
> > > > > problem!
> > > > > 
> > > > > Best reagards,
> > > > > 
> > > > > Per
> > > > > 
> > > > > 
> > > > > 
> > > > >  
> > > > > 
> > > > > Your use of Yahoo! Groups is subject to
> > > > > http://docs.yahoo.com/info/terms/ 
> > > > > 
> > > > > 
> > > > > 
> > > > > 
> > > > > 
> > > > > 
> > > > 
> > > 
> > 
> **********************************************************************
> > > > *************
> > > > > 
> > > > > This transmission is intended for the named recipient only. 
> It 
> > may
> > > > > contain private and confidential information. If this has 
> come 
> > to 
> > > > you in
> > > > > error you must not act on anything disclosed in it, nor must 
> > you 
> > > > copy
> > > > > it, modify it, disseminate it in any way, or show it to 
> anyone. 
> > > > Please
> > > > > e-mail the sender to inform us of the transmission error or 
> > > > telephone
> > > > > ECA International immediately and delete the e-mail from your
> > > > > information system.
> > > > > 
> > > > > Telephone numbers for ECA International offices are: Sydney 
> +61 
> > > (0)2
> > > > > 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 
> > 5000 
> > > > and New
> > > > > York +1 212 582 2333.
> > > > > 
> > > > > 
> > > > 
> > > 
> > 
> **********************************************************************
> > > > *************
> > > > > 
> > > > > 
> > > > >  
> > > > > 
> > > > > Your use of Yahoo! Groups is subject to
> > > > > http://docs.yahoo.com/info/terms/
> > > 
> > > 
> > >  
> > > 
> > > Your use of Yahoo! Groups is subject to
> > > http://docs.yahoo.com/info/terms/
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Wed Oct  8 09:13:36 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] On a more personal note...
In-Reply-To: <000c01c38d95$665fbe20$1ac8090a@oddi.is>
Message-ID: <5EDEE7EA-F9AA-11D7-9EEC-000393BB647E@cs.usfca.edu>

Wow!  THanks...why not add some of this groovy text to the testimonials 
page at ANTLR :)

http://www.antlr.org/testimonial/list

:)

Wait til you see what ANTLR 3 does for you!  Woohoo!  I'm finishing up 
some papers on StringTemplate and separating Model-View and then will 
be back full steam on new ANTLR.  [teaser for template people: I have a 
procedure that can take a interwined model/view like jsp or servlet and 
pull it apart into two separate, functionally equiv objects; and showed 
they are separate and equivalent].

Ter

On Wednesday, October 8, 2003, at 05:12  AM, Arnar Birgisson wrote:

> Hi there..
>
> I just wanted to express my opinion on one thing: I love ANTLR! I have
> been using lex/yacc for quite a few projects, and LL-predicated lexing
> opens up a whole new world of possibilities.
>
> As I have mentioned before, I am taking (or have taken) courses in
> compiler design and programming language theory. Discovering ANTLR has
> helped in making me seriously thinking about aquiring a masters degree
> specializing in this field of CS.
>
> Reading posts from all of you on this list as well as contemplating on
> the problems posted here has given me just as much of an understandnig
> on the practical side of my studies as all the lectures combined, and
> seeing ANTLR in action solving compicated problems (somtimes
> context-dependent) makes me appreciate it greatly.
>
> A big hand for Terence and all the others involved in ANTLR's design 
> and
> implementation!
>
> 'nuff said..
>
> thank you,
> Arnar
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com link sharing, pure-n-simple




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jagad at enciety.com  Wed Oct  8 10:47:50 2003
From: jagad at enciety.com (jagad)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Re: Skipping grammar
In-Reply-To: <000501c38d92$10acd650$1ac8090a@oddi.is>
References: <000501c38d92$10acd650$1ac8090a@oddi.is>
Message-ID: <1065635269.9281.2.camel@training04>

I'm just wondering,

> class MyLexer extends Lexer;
> 
> tokens { OPEN_PACKET; CLOSE_PACKET; OPEN_MODEL; CLOSE_MODEL;
> OPEN_METHOD; CLOSE_METHOD; }
> 
> {
> 	stack braces = new stack();
> 	int nextBrace = OPEN_PACKET;
> 	bool readingMethodBody = false;
> 
> 	int getMatchingToken(int open) {
> 		if (open == OPEN_PACKET) return CLOSE_PACKET;
> 		if (open == OPEN_MODEL) reutrn CLOSE_MODE;
> 		// etc.
> 	}
> }

ANTLR should be generate the declaration above at class declaration and
that's not allowed to initialize the class member, right?

Cheers

jagad



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Wed Oct  8 11:28:02 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Re: Skipping grammar
In-Reply-To: <1065635269.9281.2.camel@training04>
Message-ID: <002401c38dc9$e861eae0$1ac8090a@oddi.is>

This was meant to be a pseudo-code. Initializing member variables
depends on the semantics of the target language. You might need to
create an "initialize" method and call it excplicitly, or tell ANTLR not
to generate class constructors and define them yourself.

The stack in this example is also fictional, you would need
std::stack<int> in C++, java.util.Stack with all it's type-casts and
something completely different in C#.

Arnar

> -----Original Message-----
> From: jagad [mailto:jagad@enciety.com] 
> Sent: 8. okt?ber 2003 17:48
> To: ANTLR Milis
> Subject: RE: [antlr-interest] Re: Skipping grammar
> 
> 
> I'm just wondering,
> 
> > class MyLexer extends Lexer;
> > 
> > tokens { OPEN_PACKET; CLOSE_PACKET; OPEN_MODEL; CLOSE_MODEL;
> > OPEN_METHOD; CLOSE_METHOD; }
> > 
> > {
> > 	stack braces = new stack();
> > 	int nextBrace = OPEN_PACKET;
> > 	bool readingMethodBody = false;
> > 
> > 	int getMatchingToken(int open) {
> > 		if (open == OPEN_PACKET) return CLOSE_PACKET;
> > 		if (open == OPEN_MODEL) reutrn CLOSE_MODE;
> > 		// etc.
> > 	}
> > }
> 
> ANTLR should be generate the declaration above at class 
> declaration and
> that's not allowed to initialize the class member, right?
> 
> Cheers
> 
> jagad
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Wed Oct  8 12:02:41 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Tree transformation
Message-ID: <002701c38dce$bfa273e0$1ac8090a@oddi.is>

Hello..

I have a programming construct "[a,b,c]" which defines a list (in the
lisp sense) of the results of expressions a, b and c. The parser returns
this tree: #([LIST,"["], #(STATEMENT_LIST, #a, #b, #c)). I.e.

LIST
 |
STATEMENT_LIST
 |
 ID - ID - ID

My languages sematnics define "[a,b,c]" to be eqivalent
"func(;a,func(;b,c))", and moreover, the user program might define
"func" to be whatever function the user wants it to be.

(As a side note: the function call syntax in the language is
func(x1,..,xN;y1,..,yM) where x1,..,xN are copy-in copy-out parameters,
and y1,...,yM are pass-by-value. Also, there is no distinction between
statements and expressions.)

I have one tree parser that takes the parser output and simplifies the
tree, before that is passed to another tree-parser, the code generator.

The simplifying treeparser (the transformer) does things like convert
"expr1 + expr1" to "+(;expr1,expr2)", and I furthermore want it to
convert the tree for "[a,b,c]" to the tree "func(;a,func(;b,c))" would
have generated.

In a nutshell, I need to convert trees of the form depicted above, to
this:

LPAREN
 |
NAME("func") - STATEMENT_LIST - STATEMENT_list
                                 |
                                 ID(a) - ID(b) - ID(c)

How would you do in a tree-parser rule? The rules I have to match the
input tree are:

list_expr : #(LIST stmt_list)
stmt_list : #(STATEMENT_LIST (stmt)*)

Arnar

ps. for the sake of completeness, the actual language doesn't use "func"
as the function name, but rather ":". Operatrs in the language are
simply functions as the equivalence "a+b"="+(;a,b)" implied.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Matthew.Ford at forward.com.au  Wed Oct  8 14:30:34 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Javadoc - static verification
References: <bm0gj4+4cme@eGroups.com> <001801c38d8d$4d8a24b0$0400a8c0@NOTEBOOK>
Message-ID: <001c01c38de3$6865a3d0$0400a8c0@NOTEBOOK>

Actually this was only a partial answer.

If I understand you correctly there are actually two types of  ID
WORD@pre and WORD@post

In the @pre section  the ID WORD is actually a shorthand for WORD@pre
In the @post section  the ID WORD is actually a shorthand for WORD@post

So I think you need to add a rule to your lexer to find
WORD@pre and WORD@post
I needs to be in the lexer to overcome the whitespace problem
(I assume  "WORD @pre"  is not valid due to the whitespace.)

The rules would be something like

// word@pre
WORD_PRE
// words can't contain whitespace, an '@'-symbol, '*'-symbol or
'|'-symbol
: WORD @ ('p'|'P')('r'|'R')('e'|'E')
;

// word@post
WORD_POST
// words can't contain whitespace, an '@'-symbol, '*'-symbol or
'|'-symbol
: WORD @ ('p'|'P')('o'|'O')('s'|'S')('t'|'T')
;

I haven't actually tried these rules, but you get the idea.

matthew

----- Original Message ----- 
From: "Matthew Ford" <Matthew.Ford@forward.com.au>
To: <antlr-interest@yahoogroups.com>
Sent: Wednesday, October 08, 2003 9:14 PM
Subject: Re: [antlr-interest] Javadoc - static verification


> It looks to me like
> you could use the |  in @post tag statement to start looking for @pre
>
>  | flip != flip@pre
>
> @pre elsewhere should be a tag?
>
> matthew
> ----- Original Message ----- 
> From: "guyveraghtert" <guyveraghtert@yahoo.com>
> To: <antlr-interest@yahoogroups.com>
> Sent: Wednesday, October 08, 2003 6:07 PM
> Subject: [antlr-interest] Javadoc - static verification
>
>
> > Hi all
> >
> > I'm working on a project to statically check your code against your
> > specification. We use Jnome (www.jnome.org), which offers a metamodel
> > for java. However, this metamodel represents the formal specification
> > as a string. This should be adapted: the formal specifications are
> > just java expressions. Only one problem exists, one can use the OCL
> > notation @pre te refer to the 'state' of an expression before entering
> > a method. I give an example:
> >
> > /**
> >  * Class representing a flipflop
> >  */
> > public class FlipFlop{
> >
> >   /**
> >    * Variable expressing state of flipflop
> >    */
> >   private boolean flip;
> >
> >   /**
> >    * Flip the flipflop
> >    *
> >    * @post     The flipflop flipped
> >    *         | flip != flip@pre
> >    */
> >   public void flipflop(){
> >     flip != flip;
> >   }
> >
> > }
> >
> >
> > Another problem is the fact we do not only have the OCL notation
> > '@pre', but also a tag '@pre':
> >
> > ...
> >
> >  /**
> >   * Set the name
> >   *
> >   * @pre    <name> must be effective
> >   *       | name != null
> >   * @post   <name> is set as the name of this entity
> >   *       | getName() == name
> >   */
> >  public void setName(String name){
> >      this.name = name;
> >  }
> >
> > ...
> >
> > The current grammar of jnome for javadoc is:
> >
> >
> >
>
//--------------------------------------------------------------------------
> --
> > // The parser
> >
>
//--------------------------------------------------------------------------
> --
> >
> > header {
> > package org.jnome.input.antlr.javadoc.parser;
> > }
> >
> > class JavaDocParser extends Parser;
> > options {
> > exportVocab=JavaDoc;             // Call its vocabulary "JavaDoc"
> > buildAST = true;                 // build an AST
> > }
> >
> > tokens {
> > JAVADOC_OPEN; JAVADOC_CLOSE; STAR; TAG; WORD; DESCRBLOCK; VERTICAL_LINE;
> > FORMAL; INFORMAL; NEWLINE; AT; TAGBLOCK; SENTENCEFORMAL;
> > }
> >
> > // a specification block
> > specificationBlock
> > :   // A block to describe the method/class/variable/.. briefly
> > (descriptionBlock)?
> >
> > // A series of blocks starting with an @-tag
> > (tagBlock)*
> >
> > // The end of the specification ("*/")
> > JAVADOC_CLOSE!
> > ;
> >
> > // the short description at the beginning of a specification block
> > descriptionBlock
> > : (sentence)+
> > {#descriptionBlock = #([DESCRBLOCK, "DESCRBLOCK"], #descriptionBlock);}
> > ;
> >
> > // a part of a specification block, starting with an @-tag
> > tagBlock
> > : tag
> > (informalSpecification)
> > (formalSpecification (emptySentence)* )?
> > {#tagBlock = #([TAGBLOCK, "TAGBLOCK"], #tagBlock);}
> > ;
> >
> > // an '@'-tag
> > tag
> > : AT! WORD
> >   {#tag = #([TAG, "TAG"], #tag);}
> > ;
> >
> > // the informal specification in a tagblock
> > informalSpecification
> > : (sentence)+
> > {#informalSpecification = #([INFORMAL, "INFORMAL"],
> > #informalSpecification);}
> > ;
> >
> > // the formal specification in a tagblock
> > formalSpecification
> > : (sentenceFormal)+
> > {#formalSpecification = #([FORMAL, "FORMAL"], #formalSpecification);}
> > ;
> >
> > // a sentence can be empty or not
> > sentence
> > :   emptySentence | nonEmptySentence
> > ;
> >
> > // a non empty sentence
> > nonEmptySentence
> > :   WORD (WORD|STAR|AT|VERTICAL_LINE)* endline
> > ;
> >
> > // an empty sentence
> > emptySentence
> > :   endline
> > ;
> >
> > // a sentence from a formal specification
> > sentenceFormal
> > :   VERTICAL_LINE! (WORD|STAR|AT|VERTICAL_LINE)* endline
> > {#sentenceFormal = #([SENTENCEFORMAL, "SENTENCEFORMAL"],
> > #sentenceFormal);}
> > ;
> >
> > // a newline symbol, followed by zero or more stars
> > endline!
> > :   ( NEWLINE(STAR)* )
> > ;
> >
> >
>
//--------------------------------------------------------------------------
> --
> > // The lexer
> >
>
//--------------------------------------------------------------------------
> --
> >
> > // Import the necessary classes
> > {
> > import antlr.TokenStreamSelector;
> > }
> >
> > class JavaDocLexer extends Lexer;
> >
> > options {
> > exportVocab=JavaDoc;   // call the vocabulary "JavaDoc"
> > testLiterals=true;     // automatically test for literals
> > k=2;                   // two characters of lookahead
> > }
> >
> > // let the lexer know about the selector
> > {
> > protected TokenStreamSelector selector;
> >
> > public JavaDocLexer(LexerSharedInputState state, TokenStreamSelector
> > sel) {
> > this(state);
> > selector = sel;
> > }
> >
> > }
> >
> > // a dummy rule to force vocabulary to be all characters (except special
> > //   ones that ANTLR uses internally (0 to 2)
> > protected
> > VOCAB
> > : '\3'..'\377'
> > ;
> >
> > // end of specification block
> > JAVADOC_CLOSE
> > : "*/"
> > { selector.pop(); }
> > ;
> >
> > // @-symbol
> > AT
> > : '@'
> > ;
> >
> > // star
> > STAR
> > : '*'
> > ;
> >
> > // vertical line
> > VERTICAL_LINE
> > : '|'
> > ;
> >
> > // word
> > WORD
> > // words can't contain whitespace, an '@'-symbol, '*'-symbol or
> > '|'-symbol
> > : (~( ' ' | '\t' | '\f' | '\r' | '\n' | '@' | '*' | '|'))+
> > ;
> >
> > // Whitespace -- ignored
> > WS : ( ' '
> > | '\t'
> > | '\f'
> > )
> > { _ttype = Token.SKIP; }
> > ;
> >
> > // newline character
> > NEWLINE
> > : // handle newlines
> > ( "\r\n"  // Evil DOS
> > | '\r'    // Macintosh
> > | '\n'    // Unix
> > )
> > { newline(); }
> > ;
> >
> > -----------------------------------------------------------------
> >
> > How can we easily adapt this grammar to our needs?
> >
> > A minor problem, this grammar doesn't support
> > single line comments /*  */ . The authors told me they didn't how to
> > fix is (ambiguities).
> >
> > I ask a lot, but any help is welcome...
> >
> > thx
> >
> > Guy
> >
> >
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/
> >
> >
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Wed Oct  8 15:11:23 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Tree transformation
Message-ID: <72C9789739C4214096AE945753B11EA36B1F59@mypxmail04.bco-home.com>

Your description is a bit unclear, but to get this:

LPAREN
 |
NAME("func") - STATEMENT_LIST 
                |
               ID(a) - ID(b) - ID(c)

Do this:

list_expr! : #(l:LIST s:stmt_list) {##=#(#[LPAREN,")"], #[NAME,"func"], s);}
stmt_list : #(STATEMENT_LIST (stmt)*)

Monty

-----Original Message-----
From: Arnar Birgisson [mailto:arnarb@oddi.is] 
Sent: Wednesday, October 08, 2003 12:03 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Tree transformation

Hello..

I have a programming construct "[a,b,c]" which defines a list (in the
lisp sense) of the results of expressions a, b and c. The parser returns
this tree: #([LIST,"["], #(STATEMENT_LIST, #a, #b, #c)). I.e.

LIST
 |
STATEMENT_LIST
 |
 ID - ID - ID

My languages sematnics define "[a,b,c]" to be eqivalent
"func(;a,func(;b,c))", and moreover, the user program might define
"func" to be whatever function the user wants it to be.

(As a side note: the function call syntax in the language is
func(x1,..,xN;y1,..,yM) where x1,..,xN are copy-in copy-out parameters,
and y1,...,yM are pass-by-value. Also, there is no distinction between
statements and expressions.)

I have one tree parser that takes the parser output and simplifies the
tree, before that is passed to another tree-parser, the code generator.

The simplifying treeparser (the transformer) does things like convert
"expr1 + expr1" to "+(;expr1,expr2)", and I furthermore want it to
convert the tree for "[a,b,c]" to the tree "func(;a,func(;b,c))" would
have generated.

In a nutshell, I need to convert trees of the form depicted above, to
this:

LPAREN
 |
NAME("func") - STATEMENT_LIST - STATEMENT_list
                                 |
                                 ID(a) - ID(b) - ID(c)

How would you do in a tree-parser rule? The rules I have to match the
input tree are:

list_expr : #(LIST stmt_list)
stmt_list : #(STATEMENT_LIST (stmt)*)

Arnar

ps. for the sake of completeness, the actual language doesn't use "func"
as the function name, but rather ":". Operatrs in the language are
simply functions as the equivalence "a+b"="+(;a,b)" implied.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Wed Oct  8 15:18:35 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Tree transformation
Message-ID: <72C9789739C4214096AE945753B11EA36B1F5A@mypxmail04.bco-home.com>

Ack, the formatting got blarked.  Should be this:

list_expr! : #(l:LIST s:stmt_list) {##=#(#[LPAREN,")"], #[NAME,"func"], s);}

stmt_list : #(STATEMENT_LIST (stmt)*)

-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
Sent: Wednesday, October 08, 2003 3:11 PM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Tree transformation

Your description is a bit unclear, but to get this:

LPAREN
 |
NAME("func") - STATEMENT_LIST 
                |
               ID(a) - ID(b) - ID(c)

Do this:

list_expr! : #(l:LIST s:stmt_list) {##=#(#[LPAREN,")"], #[NAME,"func"], s);}
stmt_list : #(STATEMENT_LIST (stmt)*)

Monty

-----Original Message-----
From: Arnar Birgisson [mailto:arnarb@oddi.is] 
Sent: Wednesday, October 08, 2003 12:03 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Tree transformation

Hello..

I have a programming construct "[a,b,c]" which defines a list (in the
lisp sense) of the results of expressions a, b and c. The parser returns
this tree: #([LIST,"["], #(STATEMENT_LIST, #a, #b, #c)). I.e.

LIST
 |
STATEMENT_LIST
 |
 ID - ID - ID

My languages sematnics define "[a,b,c]" to be eqivalent
"func(;a,func(;b,c))", and moreover, the user program might define
"func" to be whatever function the user wants it to be.

(As a side note: the function call syntax in the language is
func(x1,..,xN;y1,..,yM) where x1,..,xN are copy-in copy-out parameters,
and y1,...,yM are pass-by-value. Also, there is no distinction between
statements and expressions.)

I have one tree parser that takes the parser output and simplifies the
tree, before that is passed to another tree-parser, the code generator.

The simplifying treeparser (the transformer) does things like convert
"expr1 + expr1" to "+(;expr1,expr2)", and I furthermore want it to
convert the tree for "[a,b,c]" to the tree "func(;a,func(;b,c))" would
have generated.

In a nutshell, I need to convert trees of the form depicted above, to
this:

LPAREN
 |
NAME("func") - STATEMENT_LIST - STATEMENT_list
                                 |
                                 ID(a) - ID(b) - ID(c)

How would you do in a tree-parser rule? The rules I have to match the
input tree are:

list_expr : #(LIST stmt_list)
stmt_list : #(STATEMENT_LIST (stmt)*)

Arnar

ps. for the sake of completeness, the actual language doesn't use "func"
as the function name, but rather ":". Operatrs in the language are
simply functions as the equivalence "a+b"="+(;a,b)" implied.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gackle at shaw.ca  Wed Oct  8 19:47:18 2003
From: gackle at shaw.ca (Daniel Gackle)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Re: .Net
In-Reply-To: <1065616805.1220.56569.m10@yahoogroups.com>
Message-ID: <NEBBKKODFMOCLEEIOELFGEDNCNAA.gackle@shaw.ca>

Mike's comment:

> Java is nice, but my tools have to run on .Net or no one is
> interested in them. Such is my world.

... applies to my situation as well. I've been out of the ANTLR loop for
awhile and didn't know about the J# port. It's fortunate for me, because it
opens up the possibility of something I've wanted to do for some time, which
is write an ANTLR grammar for a modeling language that is part of the
product we're building. (Currently the models are written in XML, which is
ugly.)

Micheal's comment:

> All you need is the appropriate runtime library for your chosen target
language

... is technically correct of course, but the concern in my case is more
political. It would be hard for me to convince my team to introduce a
dependency on Java, even if it were only for generating (not running) a
parser.  It is the grammar (not the generated parser) that would be
considered our source code, since it's the grammar (not the parser) that we
write and maintain. Our build system would therefore have to run the parser
generator as part of the build, and it is a lot easier for me to convince
people this is good if it doesn't introduce any new dependencies. Mike, I'd
be curious to know if your situation is similar.

Daniel


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sarkar_soumen at yahoo.com  Wed Oct  8 21:57:15 2003
From: sarkar_soumen at yahoo.com (sarkar_soumen)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] To port ANTLR to .NET? (was Re: .Net)
In-Reply-To: <NEBBKKODFMOCLEEIOELFGEDNCNAA.gackle@shaw.ca>
Message-ID: <bm2prb+hs98@eGroups.com>

I have developed a custom markup language (CML not XML, like
XML) parser on .NET platform. I had no problem choosing ANTLR (a
parser generator written in Java) to generate C# parser. 

ANTLR C# runtime source code is included in project's .NET build
to make managed DLLs.

The argument that build environment has Java dependency looks weak
to me specially if there is a strong need to build an automated parser
on .NET platform. I would not worry about porting ANTLR parser
generator from Java to .NET -- I guess there are better things
to improve in ANTLR. ANTLR C# runtime might need change (I recently
proposed on change related to globalization) as ANTLR progresses.
This architecture covers both platform with minimum effort.

Soumen Sarkar.

--- In antlr-interest@yahoogroups.com, Daniel Gackle <gackle@s...> 
wrote:
> Mike's comment:
> 
> > Java is nice, but my tools have to run on .Net or no one is
> > interested in them. Such is my world.
> 
> ... applies to my situation as well. I've been out of the ANTLR 
loop for
> awhile and didn't know about the J# port. It's fortunate for me, 
because it
> opens up the possibility of something I've wanted to do for some 
time, which
> is write an ANTLR grammar for a modeling language that is part of 
the
> product we're building. (Currently the models are written in XML, 
which is
> ugly.)
> 
> Micheal's comment:
> 
> > All you need is the appropriate runtime library for your chosen 
target
> language
> 
> ... is technically correct of course, but the concern in my case is 
more
> political. It would be hard for me to convince my team to introduce 
a
> dependency on Java, even if it were only for generating (not 
running) a
> parser.  It is the grammar (not the generated parser) that would be
> considered our source code, since it's the grammar (not the parser) 
that we
> write and maintain. Our build system would therefore have to run 
the parser
> generator as part of the build, and it is a lot easier for me to 
convince
> people this is good if it doesn't introduce any new dependencies. 
Mike, I'd
> be curious to know if your situation is similar.
> 
> Daniel


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pwolleba at yahoo.no  Thu Oct  9 00:54:17 2003
From: pwolleba at yahoo.no (pwolleba)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Re: Skipping grammar
In-Reply-To: <002401c38dc9$e861eae0$1ac8090a@oddi.is>
Message-ID: <bm3479+p0nq@eGroups.com>

Hello everyone

As you maybe know have I been struggling to parse a document language 
which we are using at work. Anyway I have come to the conclusion that 
I have to use multi lexer after some recommendations on this news 
group. 
So far it seems to be the correct choice, however now I have found a 
new problem which I need your help to solve! (I will paste the code 
below)
When parsing the document the parser is working properly, the tree 
builder does not!

I have divided the parsing into two different documents where we 
start with the model node, and when finding a method node it will 
load the next parser. I have added "System.out.println" to see if the 
method parser is loaded an activated, and it does, I get the correct 
information printed. 

The problem start when I want to print the full tree that is built by 
both parsers, it doesn't print all, I just get some of the structure!

Model
|
|------BeerModel
|
|------Method
            |
            |------on subscribe


I expected more a structure like this

Model
|
|------BeerModel
|
|------Method
            |
            |----onsubscribe
            |
	    |----Arguments
            |            |- test1
            |            |- test2
            |  
            |----Expression
                        |
                        |-the expression text

  

I hope that you can find my error, and explain it to me. If you find 
anything else I also should change please dont hesitate to tell me.

Best regards,
Per


------------------------------------MODEL PARSER-----------

header{
	package accessclassgenerator;
}

class ModelParser extends Parser;

options {
	buildAST=true;
	k=2;
}

tokens{
  DECLARATION;
}
modelNode               : (MODEL^) modelDeclaration;

modelDeclaration        : identifier (modelInherits)? (LCURLY!) 
(modelDeclerationList)? (RCURLY!)(SEMI!);

modelDeclerationList    : (modelDeclerations)+;

modelDeclerations	:(methodeNode);

modelInherits           : (INHERITS^) modelInheritsBody;

modelInheritsBody       : identifier (DOT! modelInheritsBody)?;

methodeNode             : methodeBody {#methodeNode=#
([DECLARATION,"method"],#methodeNode);};

methodeBody             : (JAVADOC_OPEN!)                        {
                          MethodParser parser = new MethodParser
(getInputState());
                          parser.methodeNode();
                          {#methodeBody=#([parser.getAST
()],#methodeBody);};
                        };


identifier              : ID;
class ModelLexer extends Lexer;

options {
	k=10;
        filter=true;
       /* importVocab = Common;*/
}

LPAREN	    : '(';
RPAREN	    : ')';
LCURLY      : '{';
RCURLY	    : '}';
SEMI	    : ';';
COMMA	    : ',';

INHERITS    : "inherits ";
MODEL       : "model ";
JAVADOC_OPEN: "method " {StartGenerate.selector.push("methodLexer");};

ID          : (CHAR|'_')(CHAR|'_'|'0'..'9')*;

STRING_LITERAL :('"'!)(~'"')*('"'!);


WS		:	(' '
		|	'\t'
		|	'\n'  { newline(); }
		|	'\r')
			{ $setType(Token.SKIP); }
		;
protected
CHAR        : ('a'..'z'|'A'..'Z');

----------------------METHOD PARSER----------------------------

header{
	package accessclassgenerator;
}

class MethodParser extends Parser;

options {
	buildAST=true;
	k=2;
}

tokens {
  ARGUMENTS;
  EXPRESSION;
}

methodeNode         : (ID^) methodeDecleration methodBody;


methodeDecleration  : (LPAREN!) (methodArguments)? (RPAREN!)
                      {#methodeDecleration=#
([ARGUMENTS,"Arguments"],#methodeDecleration);}
                    ;

methodArguments     : (methodArgument (COMMA! methodArguments)?)
                    ;

methodArgument      : declarationName;

methodBody          : (i:METHOD_BODY^) {System.out.println(i.getText
());}
                    ;

declarationName     : (i:ID^) {System.out.println(i.getText());};

class MethodLexer extends Lexer;

options {
	k=7;

        /*importVocab = Common;*/
        filter=true;
}

LPAREN	    : '(';
RPAREN	    : ')';
LCURLY      : '{';
RCURLY	    : '}';
SEMI	    : ';';
COMMA	    : ',';

JAVADOC_CLOSE : (RCURLY)!(SEMI)! {StartGenerate.selector.pop();};

METHOD_BODY : '{'! (BracedExpr |~'}')* JAVADOC_CLOSE;

ID          : (CHAR|'_')(CHAR|'_'|'0'..'9')*;

STRING_LITERAL :('"'!)(~'"')*('"'!);


WS		:	(' '
		|	'\t'
		|	'\n'  { newline(); }
		|	'\r')
			{ $setType(Token.SKIP); }
		;
protected
CHAR        : ('a'..'z'|'A'..'Z');

protected
BracedExpr  : '{' (BracedExpr | ~'}')* "}";

---------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From m_schellens at hotmail.com  Thu Oct  9 02:58:08 2003
From: m_schellens at hotmail.com (marcschellens)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Re: Limits of  tree generation (C++)
In-Reply-To: <72C9789739C4214096AE945753B11EA36B1F32@mypxmail04.bco-home.com>
Message-ID: <bm3bfg+t3pt@eGroups.com>

The next stage of processing that tree knows only to read 
the first node.
As I understood, the nodes are reference counted.
Isn't it therefore more effective to keep it like it is,
or is there a caveeat?
thanks,
marc

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> You are using the same node twice--l1 is a node already and when you
add it
> the second time it already has a sibling of r1.  So copy the node first.
> Note l1 may be a whole tree since it is calling expr.  There are
methods for
> this, not sure what it is in C++, in java I think it is called
dupTree or
> something.
> 
> Monty
> 
> -----Original Message-----
> From: marcschellens [mailto:m_schellens@h...] 
> Sent: Tuesday, October 07, 2003 1:16 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Limits of tree generation (C++)
> 
> I have:
> 
> comp_assign_expr!
>     : #(a1:PLUS_EQ l1:expr r1:expr) 
>         { #comp_assign_expr=#([ASSIGN,":="],([PLUS,"+"],l1,r1),l1);} 
>     ; 
> 
> and get for example (for l1 = VAR, r1 = 1):
> 
> Tree parser output:
> <:=
>   <+ VAR 1 >VAR 1
> >
> 
> But I think it should be:
> 
> Tree parser output:
> <:=
>   <+ VAR 1 >VAR // no 1
> >
> 
> The problem is obviously, that I use one ASTNode (l1) twice in the
> output tree.
> Using ANTLR 2.7.2, how can I archieve what I want?
> thanks,
> marc
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Thu Oct  9 03:43:07 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Re: Limits of  tree generation (C++)
In-Reply-To: <bm3bfg+t3pt@eGroups.com>; from m_schellens@hotmail.com on Thu, Oct 09, 2003 at 09:58:08AM -0000
References: <72C9789739C4214096AE945753B11EA36B1F32@mypxmail04.bco-home.com> <bm3bfg+t3pt@eGroups.com>
Message-ID: <20031009124307.A4302@cs.utwente.nl>

On Thu, Oct 09, 2003 at 09:58:08AM -0000, marcschellens wrote:
> The next stage of processing that tree knows only to read
> the first node.
> As I understood, the nodes are reference counted.
> Isn't it therefore more effective to keep it like it is,
> or is there a caveeat?

You'll have the same node in the tree in multiple places, usually this will
give problems. E.g. at a later stage you will forget about it maybe switch
to some custom AST with extra info and get bitten by it, or you add a child
to it at a later stage and see it appear in two places. The sky's the limit
as Murphy said...

dupTree is the right thing here I guess (look for it in ASTFactory.hpp) if
you know for sure that there's only one node a simple clone might do the
trick as well.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     "Evil will always triumph, because Good is dumb." ---  Spaceballs


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Thu Oct  9 04:43:32 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Tree transformation
In-Reply-To: <72C9789739C4214096AE945753B11EA36B1F5A@mypxmail04.bco-home.com>
Message-ID: <001601c38e5a$922a4370$1ac8090a@oddi.is>

Hello..

Thanks, but what I need is a bit more. I need a more general method of
converting a list like structure like

PARENT
 |
C1 - C2 - C3 - ... - CN

to a right-balanced tree like this:

FUNC
 |
C1 - FUNC
      |
     C2 - FUNC
           |
          C3 - FUNC
                |
                ... 
                   C(N-1) - FUNC
                             |
                             CN - EMPTY_LIST

What I am implementing is basically the conversion from
"[expr1,expr2,...,exprN]" to a lisp-like list, which is equivalent to
"expr1 : (expr2 : (expr3 : ... (exprN : []) ... ))", where ":" is like
the "cons" operator in lisp, and "[]" is a lexical constant representing
the nil list.

I thought of writing a function that takes three ASTs, one like this
#(FUNC), one #(EMPTY_LIST) and the third one like #(LIST node1 node2 ...
nodeN), and returns an AST like this: #(FUNC node1 #(FUNC node2 #(...
#(FUNC nodeN EMPTY_LIST) ...) ) ). I will try this and let you know.

Hope that explains it..

Arnar
                                        

> -----Original Message-----
> From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
> Sent: 8. okt?ber 2003 22:19
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Tree transformation
> 
> 
> Ack, the formatting got blarked.  Should be this:
> 
> list_expr! : #(l:LIST s:stmt_list) {##=#(#[LPAREN,")"], 
> #[NAME,"func"], s);}
> 
> stmt_list : #(STATEMENT_LIST (stmt)*)
> 
> -----Original Message-----
> From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
> Sent: Wednesday, October 08, 2003 3:11 PM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Tree transformation
> 
> Your description is a bit unclear, but to get this:
> 
> LPAREN
>  |
> NAME("func") - STATEMENT_LIST 
>                 |
>                ID(a) - ID(b) - ID(c)
> 
> Do this:
> 
> list_expr! : #(l:LIST s:stmt_list) {##=#(#[LPAREN,")"], 
> #[NAME,"func"], s);}
> stmt_list : #(STATEMENT_LIST (stmt)*)
> 
> Monty
> 
> -----Original Message-----
> From: Arnar Birgisson [mailto:arnarb@oddi.is] 
> Sent: Wednesday, October 08, 2003 12:03 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Tree transformation
> 
> Hello..
> 
> I have a programming construct "[a,b,c]" which defines a list (in the
> lisp sense) of the results of expressions a, b and c. The 
> parser returns
> this tree: #([LIST,"["], #(STATEMENT_LIST, #a, #b, #c)). I.e.
> 
> LIST
>  |
> STATEMENT_LIST
>  |
>  ID - ID - ID
> 
> My languages sematnics define "[a,b,c]" to be eqivalent
> "func(;a,func(;b,c))", and moreover, the user program might define
> "func" to be whatever function the user wants it to be.
> 
> (As a side note: the function call syntax in the language is
> func(x1,..,xN;y1,..,yM) where x1,..,xN are copy-in copy-out 
> parameters,
> and y1,...,yM are pass-by-value. Also, there is no distinction between
> statements and expressions.)
> 
> I have one tree parser that takes the parser output and simplifies the
> tree, before that is passed to another tree-parser, the code 
> generator.
> 
> The simplifying treeparser (the transformer) does things like convert
> "expr1 + expr1" to "+(;expr1,expr2)", and I furthermore want it to
> convert the tree for "[a,b,c]" to the tree "func(;a,func(;b,c))" would
> have generated.
> 
> In a nutshell, I need to convert trees of the form depicted above, to
> this:
> 
> LPAREN
>  |
> NAME("func") - STATEMENT_LIST - STATEMENT_list
>                                  |
>                                  ID(a) - ID(b) - ID(c)
> 
> How would you do in a tree-parser rule? The rules I have to match the
> input tree are:
> 
> list_expr : #(LIST stmt_list)
> stmt_list : #(STATEMENT_LIST (stmt)*)
> 
> Arnar
> 
> ps. for the sake of completeness, the actual language doesn't 
> use "func"
> as the function name, but rather ":". Operatrs in the language are
> simply functions as the equivalence "a+b"="+(;a,b)" implied.
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! 
> Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From bebopkim at yahoo.co.kr  Thu Oct  9 07:05:20 2003
From: bebopkim at yahoo.co.kr (bebopkim)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Problem with '(' ')'
Message-ID: <bm3pv0+u80j@eGroups.com>

I have made simple RDQL parser and I got a problem. When I tried to 
parse a triple pattern, the parser gave me an error like this:

(?a, ?b, ?c)
IDENTIFIER
IDENTIFIER
IDENTIFIER
line 1:1: expecting LPAREN, found '('

I'm an ANTLR beginner. How can I solve this problem?

The parser's source code is below:
/*
 * @(#)_rdqlparser.g created on 2003. 9. 14.
 *
 */

/**
 * RDQL parser generating script
 *
 * @version $Id$
 * @author hjkim
 *
 */

class LocalRDQLParser extends Parser;

options {
	k = 4;
//	analyzerDebug = true;
//	codeGenDebug = true;
	
}

tokens {
	SELECT;
	VAR;
	COMMA;
	STAR;
	LPAREN;
	RPAREN;
	URI;
	NUMERIC_LITERAL;
	NULL_LITERAL;
	STRING_LITERAL1;
	STRING_LITERAL2;
	TRUE;
	FALSE;
}


//query :
//	 selectClause triplePatternClause { System.out.println
("query"); }
//	;
//
//
//selectClause :
//	  SELECT VAR (COMMA VAR)* | SELECT STAR
//	;
//
//triplePatternClause :
//	  WHERE triplePattern (COMMA triplePattern)*
//	;

triplePattern :
	  LPAREN varOrURI COMMA varOrURI COMMA varOrLiteral RPAREN
	{ System.out.println("TRIPLE Pattern!"); }
	;

varOrURI :
	  VAR
	| URI
	;

varOrLiteral :
	  VAR
	| literal
	;

literal :
	  URI
	| NUMERIC_LITERAL 
	| NULL_LITERAL
	| textLiteral
	| booleanLiteral
	;
	
textLiteral :
	  (STRING_LITERAL1 | STRING_LITERAL2)
	;

booleanLiteral : 
	  TRUE | FALSE
	;
	
class LocalRDQLLexer extends Lexer;

options { 
	k = 4;
    charVocabulary = '\u0000'..'\u007F';
    exportVocab = RDQL;
//    testLiterals = false;
	caseSensitive = false;
	caseSensitiveLiterals = false;
}

tokens {
	SELECT	= "select";
	FROM	= "from";
	WHERE	= "where";
	TRUE	= "true";
	FALSE	= "false";
	NULL_LITERAL =  "null";	
}

COMMA	: ',';
LPAREN	: '(';
RPAREN	: ')';
STAR	: '*';




VAR	: 
	'?' IDENTIFIER
//  	{ System.out.println("VAR"); }	
	;
	
STRING_LITERAL1	: 
	'\'' ( (~('\''|'\\'|'\n'|'\r')) | ('\\' ~('\n'|'\r')))* '\''
//	{ System.out.println("String Literal1"); }
	;
	
STRING_LITERAL2 :
	'"'  ( (~('"' |'\\'|'\n'|'\r')) | ('\\' ~('\n'|'\r')))* '"'
//	{ System.out.println("String Literal2"); }
	;

URI :
	'<' ( ~('>'|'?') )+ '>'
//	{ System.out.println("URI"); }
	;

NUMERIC_LITERAL : ('0'..'9')+ 
//	{ System.out.println("NUMBER"); }
	;
	

IDENTIFIER :
	('a'..'z'|'_'|'-'|'~'|'$'|'.') ('a'..'z'|'_'|'-
'|'~'|'$'|'.'|'0'..'9')*
	{ System.out.println("IDENTIFIER"); }
	;

WS :
	' ' | '\r' '\n' | '\n' | '\t' | '\r'
    {$setType(Token.SKIP);}
	;
	




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mtiller at ford.com  Thu Oct  9 07:09:14 2003
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Re: Limits of  tree generation (C++)
Message-ID: <6F7AD2AD5765D3118A7A0090278730212A4F6D05@na1fcm06.dearborn.ford.com>

> From: Ric Klaren [mailto:klaren@cs.utwente.nl]
> Sent: Thursday, October 09, 2003 6:43 AM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] Re: Limits of tree generation (C++)
> 
> 
> On Thu, Oct 09, 2003 at 09:58:08AM -0000, marcschellens wrote:
> > The next stage of processing that tree knows only to read
> > the first node.
> > As I understood, the nodes are reference counted.
> > Isn't it therefore more effective to keep it like it is,
> > or is there a caveeat?
> 
> You'll have the same node in the tree in multiple places, usually this will
> give problems. E.g. at a later stage you will forget about it maybe switch
> to some custom AST with extra info and get bitten by it, or you add a child
> to it at a later stage and see it appear in two places. The sky's the limit
> as Murphy said...

So then can someone remind me why reference counting is even used?  Wouldn't it be better to make each node solely responsible for its children (i.e. the children are deleted either when they are removed or when the parent is destroyed).  It just seems that a different memory manage/garbage collection scheme would map much better given that nodes cannot be shared.

> dupTree is the right thing here I guess (look for it in ASTFactory.hpp) if
> you know for sure that there's only one node a simple clone might do the
> trick as well.

I would point out that I created my own stand-alone implementation.  I found no reason for ASTFactory to be involved in this process.  This is much more convenient because, as I recall, dupTree is a non-static method of ASTFactory.  Having to instantiate an ASTFactory just to call dupTree is just too inconvenient (and totally unnecessary).

Just some things to keep in mind for ANTLR 3.

> Cheers,
> 
> Ric

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Jim.OConnor at microfocus.com  Thu Oct  9 07:21:47 2003
From: Jim.OConnor at microfocus.com (Jim O'Connor)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Problem with '(' ')'
Message-ID: <3AC103F1B7EEEC48A855ACB1D2819E91020DF09E@rock-corpmail.microfocus.com>

I would look at the options for token vocabularies.  Your Parser doesn't
know anything about the RDQL vocab exported by your lexer.  The IDL example
has an export in both the Lexer and Parser.  That might be your solution.

-----Original Message-----
From: bebopkim [mailto:bebopkim@yahoo.co.kr]
Sent: Thursday, October 09, 2003 10:05 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Problem with '(' ')'


I have made simple RDQL parser and I got a problem. When I tried to 
parse a triple pattern, the parser gave me an error like this:

(?a, ?b, ?c)
IDENTIFIER
IDENTIFIER
IDENTIFIER
line 1:1: expecting LPAREN, found '('

I'm an ANTLR beginner. How can I solve this problem?

The parser's source code is below:
/*
 * @(#)_rdqlparser.g created on 2003. 9. 14.
 *
 */

/**
 * RDQL parser generating script
 *
 * @version $Id$
 * @author hjkim
 *
 */

class LocalRDQLParser extends Parser;

options {
	k = 4;
//	analyzerDebug = true;
//	codeGenDebug = true;
	
}

tokens {
	SELECT;
	VAR;
	COMMA;
	STAR;
	LPAREN;
	RPAREN;
	URI;
	NUMERIC_LITERAL;
	NULL_LITERAL;
	STRING_LITERAL1;
	STRING_LITERAL2;
	TRUE;
	FALSE;
}


//query :
//	 selectClause triplePatternClause { System.out.println
("query"); }
//	;
//
//
//selectClause :
//	  SELECT VAR (COMMA VAR)* | SELECT STAR
//	;
//
//triplePatternClause :
//	  WHERE triplePattern (COMMA triplePattern)*
//	;

triplePattern :
	  LPAREN varOrURI COMMA varOrURI COMMA varOrLiteral RPAREN
	{ System.out.println("TRIPLE Pattern!"); }
	;

varOrURI :
	  VAR
	| URI
	;

varOrLiteral :
	  VAR
	| literal
	;

literal :
	  URI
	| NUMERIC_LITERAL 
	| NULL_LITERAL
	| textLiteral
	| booleanLiteral
	;
	
textLiteral :
	  (STRING_LITERAL1 | STRING_LITERAL2)
	;

booleanLiteral : 
	  TRUE | FALSE
	;
	
class LocalRDQLLexer extends Lexer;

options { 
	k = 4;
    charVocabulary = '\u0000'..'\u007F';
    exportVocab = RDQL;
//    testLiterals = false;
	caseSensitive = false;
	caseSensitiveLiterals = false;
}

tokens {
	SELECT	= "select";
	FROM	= "from";
	WHERE	= "where";
	TRUE	= "true";
	FALSE	= "false";
	NULL_LITERAL =  "null";	
}

COMMA	: ',';
LPAREN	: '(';
RPAREN	: ')';
STAR	: '*';




VAR	: 
	'?' IDENTIFIER
//  	{ System.out.println("VAR"); }	
	;
	
STRING_LITERAL1	: 
	'\'' ( (~('\''|'\\'|'\n'|'\r')) | ('\\' ~('\n'|'\r')))* '\''
//	{ System.out.println("String Literal1"); }
	;
	
STRING_LITERAL2 :
	'"'  ( (~('"' |'\\'|'\n'|'\r')) | ('\\' ~('\n'|'\r')))* '"'
//	{ System.out.println("String Literal2"); }
	;

URI :
	'<' ( ~('>'|'?') )+ '>'
//	{ System.out.println("URI"); }
	;

NUMERIC_LITERAL : ('0'..'9')+ 
//	{ System.out.println("NUMBER"); }
	;
	

IDENTIFIER :
	('a'..'z'|'_'|'-'|'~'|'$'|'.') ('a'..'z'|'_'|'-
'|'~'|'$'|'.'|'0'..'9')*
	{ System.out.println("IDENTIFIER"); }
	;

WS :
	' ' | '\r' '\n' | '\n' | '\t' | '\r'
    {$setType(Token.SKIP);}
	;
	




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 



________________________________________________________________________
This e-mail has been scanned for viruses by MCI's Internet Managed Scanning
Services - powered by MessageLabs. For further information visit
http://www.mci.com
________________________________________________________________________

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Thu Oct  9 07:52:20 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Tree transformation
In-Reply-To: <001601c38e5a$922a4370$1ac8090a@oddi.is>
Message-ID: <001801c38e74$f0c838f0$1ac8090a@oddi.is>

I think I have a solution.. I wrote this function:

antlr::RefAST list2call(antlr::ASTFactory* factory, antlr::RefAST& list)
{
  using namespace antlr;
  RefAST current = list->getFirstChild();
  if (current == nullAST)
    return factory->create(LangTokenTypes::EMPTY_LIST,"[]");
  RefAST root = factory->create(LangTokenTypes::LPAREN, "(");
  RefAST subtree = root;
  while (current != nullAST) {
    subtree->addChild(current);
    RefAST temp1 = current->getNextSibling();
    current->setNextSibling(nullAST);
    current = temp1;
    if (current != nullAST) {
      RefAST temp = factory->create(LangTokenTypes::LPAREN,"(");
      subtree->addChild(temp);
      subtree = temp;
    }
  }
  subtree->addChild(factory->create(LangTokenTypes::EMPTY_LIST,"[]"));
  return root;
}

And I use it like this:

#(LISTI a:stmt_list)
{
	## = list2call(astFactory, a);
}

stmt_list: #(STMT_LIST (stmt)*);

With some adaptation (adding a name for the function name etc.), it
should give the same tree for the input string "[a,b,c]" as well as
"a:(b:c)" which again is eqivalent to ":(a,:(b,c))".

Can you see any big problems?

Arnar

> -----Original Message-----
> From: Arnar Birgisson [mailto:arnarb@oddi.is] 
> Sent: 9. okt?ber 2003 11:44
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Tree transformation
> 
> 
> Hello..
> 
> Thanks, but what I need is a bit more. I need a more general method of
> converting a list like structure like
> 
> PARENT
>  |
> C1 - C2 - C3 - ... - CN
> 
> to a right-balanced tree like this:
> 
> FUNC
>  |
> C1 - FUNC
>       |
>      C2 - FUNC
>            |
>           C3 - FUNC
>                 |
>                 ... 
>                    C(N-1) - FUNC
>                              |
>                              CN - EMPTY_LIST
> 
> What I am implementing is basically the conversion from
> "[expr1,expr2,...,exprN]" to a lisp-like list, which is equivalent to
> "expr1 : (expr2 : (expr3 : ... (exprN : []) ... ))", where ":" is like
> the "cons" operator in lisp, and "[]" is a lexical constant 
> representing
> the nil list.
> 
> I thought of writing a function that takes three ASTs, one like this
> #(FUNC), one #(EMPTY_LIST) and the third one like #(LIST 
> node1 node2 ...
> nodeN), and returns an AST like this: #(FUNC node1 #(FUNC node2 #(...
> #(FUNC nodeN EMPTY_LIST) ...) ) ). I will try this and let you know.
> 
> Hope that explains it..
> 
> Arnar
>                                         
> 
> > -----Original Message-----
> > From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
> > Sent: 8. okt?ber 2003 22:19
> > To: antlr-interest@yahoogroups.com
> > Subject: RE: [antlr-interest] Tree transformation
> > 
> > 
> > Ack, the formatting got blarked.  Should be this:
> > 
> > list_expr! : #(l:LIST s:stmt_list) {##=#(#[LPAREN,")"], 
> > #[NAME,"func"], s);}
> > 
> > stmt_list : #(STATEMENT_LIST (stmt)*)
> > 
> > -----Original Message-----
> > From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
> > Sent: Wednesday, October 08, 2003 3:11 PM
> > To: antlr-interest@yahoogroups.com
> > Subject: RE: [antlr-interest] Tree transformation
> > 
> > Your description is a bit unclear, but to get this:
> > 
> > LPAREN
> >  |
> > NAME("func") - STATEMENT_LIST 
> >                 |
> >                ID(a) - ID(b) - ID(c)
> > 
> > Do this:
> > 
> > list_expr! : #(l:LIST s:stmt_list) {##=#(#[LPAREN,")"], 
> > #[NAME,"func"], s);}
> > stmt_list : #(STATEMENT_LIST (stmt)*)
> > 
> > Monty
> > 
> > -----Original Message-----
> > From: Arnar Birgisson [mailto:arnarb@oddi.is] 
> > Sent: Wednesday, October 08, 2003 12:03 PM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Tree transformation
> > 
> > Hello..
> > 
> > I have a programming construct "[a,b,c]" which defines a 
> list (in the
> > lisp sense) of the results of expressions a, b and c. The 
> > parser returns
> > this tree: #([LIST,"["], #(STATEMENT_LIST, #a, #b, #c)). I.e.
> > 
> > LIST
> >  |
> > STATEMENT_LIST
> >  |
> >  ID - ID - ID
> > 
> > My languages sematnics define "[a,b,c]" to be eqivalent
> > "func(;a,func(;b,c))", and moreover, the user program might define
> > "func" to be whatever function the user wants it to be.
> > 
> > (As a side note: the function call syntax in the language is
> > func(x1,..,xN;y1,..,yM) where x1,..,xN are copy-in copy-out 
> > parameters,
> > and y1,...,yM are pass-by-value. Also, there is no 
> distinction between
> > statements and expressions.)
> > 
> > I have one tree parser that takes the parser output and 
> simplifies the
> > tree, before that is passed to another tree-parser, the code 
> > generator.
> > 
> > The simplifying treeparser (the transformer) does things 
> like convert
> > "expr1 + expr1" to "+(;expr1,expr2)", and I furthermore want it to
> > convert the tree for "[a,b,c]" to the tree 
> "func(;a,func(;b,c))" would
> > have generated.
> > 
> > In a nutshell, I need to convert trees of the form depicted 
> above, to
> > this:
> > 
> > LPAREN
> >  |
> > NAME("func") - STATEMENT_LIST - STATEMENT_list
> >                                  |
> >                                  ID(a) - ID(b) - ID(c)
> > 
> > How would you do in a tree-parser rule? The rules I have to 
> match the
> > input tree are:
> > 
> > list_expr : #(LIST stmt_list)
> > stmt_list : #(STATEMENT_LIST (stmt)*)
> > 
> > Arnar
> > 
> > ps. for the sake of completeness, the actual language doesn't 
> > use "func"
> > as the function name, but rather ":". Operatrs in the language are
> > simply functions as the equivalence "a+b"="+(;a,b)" implied.
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! 
> > Groups is subject to http://docs.yahoo.com/info/terms/ 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Thu Oct  9 07:55:41 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Tree construction syntax
Message-ID: <001901c38e75$68d03820$1ac8090a@oddi.is>

What is the difference between

#([PARENT,"parent"], child1, child2)

and

#(#[PARENT,"parent"], child1, child2)

Arnar


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Jim.OConnor at microfocus.com  Thu Oct  9 08:03:00 2003
From: Jim.OConnor at microfocus.com (Jim O'Connor)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Tree construction syntax
Message-ID: <3AC103F1B7EEEC48A855ACB1D2819E91020DF0E8@rock-corpmail.microfocus.com>

No difference.

http://www.antlr.org/doc/trees.html#_bb1

Just above
"Invoking parsers that build trees"



In addition to the translation of the #(...) as a whole, the root and each
child c1..cn will be translated. Within the context of a #(...) construct,
you may use: 

id or label as a shorthand for #id or #label. 
[...] as a shorthand for #[...]. 
(...) as a shorthand for #(...). 


-----Original Message-----
From: Arnar Birgisson [mailto:arnarb@oddi.is]
Sent: Thursday, October 09, 2003 10:56 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Tree construction syntax


What is the difference between

#([PARENT,"parent"], child1, child2)

and

#(#[PARENT,"parent"], child1, child2)

Arnar


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 



________________________________________________________________________
This e-mail has been scanned for viruses by MCI's Internet Managed Scanning
Services - powered by MessageLabs. For further information visit
http://www.mci.com
________________________________________________________________________

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Thu Oct  9 08:12:01 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Tree construction syntax
In-Reply-To: <3AC103F1B7EEEC48A855ACB1D2819E91020DF0E8@rock-corpmail.microfocus.com>
Message-ID: <001a01c38e77$b0bc51d0$1ac8090a@oddi.is>

Brilliant.. didn't know about (...) = #(...).

Thanks.. in the future I will rtfm.. :o)

Arnar

> -----Original Message-----
> From: Jim O'Connor [mailto:Jim.OConnor@microfocus.com] 
> Sent: 9. okt?ber 2003 15:03
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Tree construction syntax
> 
> 
> No difference.
> 
> http://www.antlr.org/doc/trees.html#_bb1
> 
> Just above
> "Invoking parsers that build trees"
> 
> 
> 
> In addition to the translation of the #(...) as a whole, the 
> root and each
> child c1..cn will be translated. Within the context of a 
> #(...) construct,
> you may use: 
> 
> id or label as a shorthand for #id or #label. 
> [...] as a shorthand for #[...]. 
> (...) as a shorthand for #(...). 
> 
> 
> -----Original Message-----
> From: Arnar Birgisson [mailto:arnarb@oddi.is]
> Sent: Thursday, October 09, 2003 10:56 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Tree construction syntax
> 
> 
> What is the difference between
> 
> #([PARENT,"parent"], child1, child2)
> 
> and
> 
> #(#[PARENT,"parent"], child1, child2)
> 
> Arnar
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 
> 
> ______________________________________________________________
> __________
> This e-mail has been scanned for viruses by MCI's Internet 
> Managed Scanning
> Services - powered by MessageLabs. For further information visit
> http://www.mci.com
> ______________________________________________________________
> __________
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Mike.Jones at woofumdust.com  Thu Oct  9 08:19:52 2003
From: Mike.Jones at woofumdust.com (Mike Jones)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Re: .Net
In-Reply-To: <NEBBKKODFMOCLEEIOELFGEDNCNAA.gackle@shaw.ca>
Message-ID: <003b01c38e78$ca159e60$7901640a@woofumdust.com>

Daniel,

My situation is different. My product has to run with the .Net 1.1
runtime. It has to allow the end user to write .Net assemblies that are
dynamically loaded, but the end user does not have to extend grammars.
So the generation tool can run on java. It is not my developers that are
picky, but that my product uses another product that is based entirely
on .Net, so I can't call their code from Java.

Mike

-----Original Message-----
From: Daniel Gackle [mailto:gackle@shaw.ca] 
Sent: Wednesday, October 08, 2003 8:47 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: .Net

Mike's comment:

> Java is nice, but my tools have to run on .Net or no one is
> interested in them. Such is my world.

... applies to my situation as well. I've been out of the ANTLR loop for
awhile and didn't know about the J# port. It's fortunate for me, because
it
opens up the possibility of something I've wanted to do for some time,
which
is write an ANTLR grammar for a modeling language that is part of the
product we're building. (Currently the models are written in XML, which
is
ugly.)

Micheal's comment:

> All you need is the appropriate runtime library for your chosen target
language

... is technically correct of course, but the concern in my case is more
political. It would be hard for me to convince my team to introduce a
dependency on Java, even if it were only for generating (not running) a
parser.  It is the grammar (not the generated parser) that would be
considered our source code, since it's the grammar (not the parser) that
we
write and maintain. Our build system would therefore have to run the
parser
generator as part of the build, and it is a lot easier for me to
convince
people this is good if it doesn't introduce any new dependencies. Mike,
I'd
be curious to know if your situation is similar.

Daniel


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Oct  9 08:37:02 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Problem with '(' ')'
Message-ID: <72C9789739C4214096AE945753B11EA36B1F65@mypxmail04.bco-home.com>

Your token numbers might be out of sync.  Is the parser and lexer in the
same .g file?  If not, like Jim said, you need an importVocab in your
parser.

Monty

-----Original Message-----
From: bebopkim [mailto:bebopkim@yahoo.co.kr] 
Sent: Thursday, October 09, 2003 7:05 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Problem with '(' ')'

I have made simple RDQL parser and I got a problem. When I tried to 
parse a triple pattern, the parser gave me an error like this:

(?a, ?b, ?c)
IDENTIFIER
IDENTIFIER
IDENTIFIER
line 1:1: expecting LPAREN, found '('

I'm an ANTLR beginner. How can I solve this problem?

The parser's source code is below:
/*
 * @(#)_rdqlparser.g created on 2003. 9. 14.
 *
 */

/**
 * RDQL parser generating script
 *
 * @version $Id$
 * @author hjkim
 *
 */

class LocalRDQLParser extends Parser;

options {
	k = 4;
//	analyzerDebug = true;
//	codeGenDebug = true;
	
}

tokens {
	SELECT;
	VAR;
	COMMA;
	STAR;
	LPAREN;
	RPAREN;
	URI;
	NUMERIC_LITERAL;
	NULL_LITERAL;
	STRING_LITERAL1;
	STRING_LITERAL2;
	TRUE;
	FALSE;
}


//query :
//	 selectClause triplePatternClause { System.out.println
("query"); }
//	;
//
//
//selectClause :
//	  SELECT VAR (COMMA VAR)* | SELECT STAR
//	;
//
//triplePatternClause :
//	  WHERE triplePattern (COMMA triplePattern)*
//	;

triplePattern :
	  LPAREN varOrURI COMMA varOrURI COMMA varOrLiteral RPAREN
	{ System.out.println("TRIPLE Pattern!"); }
	;

varOrURI :
	  VAR
	| URI
	;

varOrLiteral :
	  VAR
	| literal
	;

literal :
	  URI
	| NUMERIC_LITERAL 
	| NULL_LITERAL
	| textLiteral
	| booleanLiteral
	;
	
textLiteral :
	  (STRING_LITERAL1 | STRING_LITERAL2)
	;

booleanLiteral : 
	  TRUE | FALSE
	;
	
class LocalRDQLLexer extends Lexer;

options { 
	k = 4;
    charVocabulary = '\u0000'..'\u007F';
    exportVocab = RDQL;
//    testLiterals = false;
	caseSensitive = false;
	caseSensitiveLiterals = false;
}

tokens {
	SELECT	= "select";
	FROM	= "from";
	WHERE	= "where";
	TRUE	= "true";
	FALSE	= "false";
	NULL_LITERAL =  "null";	
}

COMMA	: ',';
LPAREN	: '(';
RPAREN	: ')';
STAR	: '*';




VAR	: 
	'?' IDENTIFIER
//  	{ System.out.println("VAR"); }	
	;
	
STRING_LITERAL1	: 
	'\'' ( (~('\''|'\\'|'\n'|'\r')) | ('\\' ~('\n'|'\r')))* '\''
//	{ System.out.println("String Literal1"); }
	;
	
STRING_LITERAL2 :
	'"'  ( (~('"' |'\\'|'\n'|'\r')) | ('\\' ~('\n'|'\r')))* '"'
//	{ System.out.println("String Literal2"); }
	;

URI :
	'<' ( ~('>'|'?') )+ '>'
//	{ System.out.println("URI"); }
	;

NUMERIC_LITERAL : ('0'..'9')+ 
//	{ System.out.println("NUMBER"); }
	;
	

IDENTIFIER :
	('a'..'z'|'_'|'-'|'~'|'$'|'.') ('a'..'z'|'_'|'-
'|'~'|'$'|'.'|'0'..'9')*
	{ System.out.println("IDENTIFIER"); }
	;

WS :
	' ' | '\r' '\n' | '\n' | '\t' | '\r'
    {$setType(Token.SKIP);}
	;
	




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Oct  9 08:38:34 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Tree construction syntax
Message-ID: <72C9789739C4214096AE945753B11EA36B1F66@mypxmail04.bco-home.com>

They are equivalent.

Monty

-----Original Message-----
From: Arnar Birgisson [mailto:arnarb@oddi.is] 
Sent: Thursday, October 09, 2003 7:56 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Tree construction syntax

What is the difference between

#([PARENT,"parent"], child1, child2)

and

#(#[PARENT,"parent"], child1, child2)

Arnar


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Oct  9 08:51:12 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Tree transformation
Message-ID: <72C9789739C4214096AE945753B11EA36B1F67@mypxmail04.bco-home.com>

Something like this should do the trick except for the EMPTY_LIST bit:

parent_expr : #(l:PARENT! s:stmt_list);

stmt_list : stmt {##=#([STATEMENT_LIST],##);} (stmt_list)? ;

Try this for EMPTY_LIST functionality, but it probably needs some more
thinking about if you get ambiguity warnings:

stmt_list : stmt {##=#([STATEMENT_LIST],##);} 
           (stmt_list
		| /*empty*/ {##=#(null,##,EMPTY_LIST);}
		) 

;

Note that #(null,a,b) builds a list A B with no root (null is the root--get
it?)

Monty

-----Original Message-----
From: Arnar Birgisson [mailto:arnarb@oddi.is] 
Sent: Thursday, October 09, 2003 4:44 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Tree transformation

Hello..

Thanks, but what I need is a bit more. I need a more general method of
converting a list like structure like

PARENT
 |
C1 - C2 - C3 - ... - CN

to a right-balanced tree like this:

FUNC
 |
C1 - FUNC
      |
     C2 - FUNC
           |
          C3 - FUNC
                |
                ... 
                   C(N-1) - FUNC
                             |
                             CN - EMPTY_LIST

What I am implementing is basically the conversion from
"[expr1,expr2,...,exprN]" to a lisp-like list, which is equivalent to
"expr1 : (expr2 : (expr3 : ... (exprN : []) ... ))", where ":" is like
the "cons" operator in lisp, and "[]" is a lexical constant representing
the nil list.

I thought of writing a function that takes three ASTs, one like this
#(FUNC), one #(EMPTY_LIST) and the third one like #(LIST node1 node2 ...
nodeN), and returns an AST like this: #(FUNC node1 #(FUNC node2 #(...
#(FUNC nodeN EMPTY_LIST) ...) ) ). I will try this and let you know.

Hope that explains it..

Arnar
                                        

> -----Original Message-----
> From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
> Sent: 8. okt?ber 2003 22:19
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Tree transformation
> 
> 
> Ack, the formatting got blarked.  Should be this:
> 
> list_expr! : #(l:LIST s:stmt_list) {##=#(#[LPAREN,")"], 
> #[NAME,"func"], s);}
> 
> stmt_list : #(STATEMENT_LIST (stmt)*)
> 
> -----Original Message-----
> From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
> Sent: Wednesday, October 08, 2003 3:11 PM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Tree transformation
> 
> Your description is a bit unclear, but to get this:
> 
> LPAREN
>  |
> NAME("func") - STATEMENT_LIST 
>                 |
>                ID(a) - ID(b) - ID(c)
> 
> Do this:
> 
> list_expr! : #(l:LIST s:stmt_list) {##=#(#[LPAREN,")"], 
> #[NAME,"func"], s);}
> stmt_list : #(STATEMENT_LIST (stmt)*)
> 
> Monty
> 
> -----Original Message-----
> From: Arnar Birgisson [mailto:arnarb@oddi.is] 
> Sent: Wednesday, October 08, 2003 12:03 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Tree transformation
> 
> Hello..
> 
> I have a programming construct "[a,b,c]" which defines a list (in the
> lisp sense) of the results of expressions a, b and c. The 
> parser returns
> this tree: #([LIST,"["], #(STATEMENT_LIST, #a, #b, #c)). I.e.
> 
> LIST
>  |
> STATEMENT_LIST
>  |
>  ID - ID - ID
> 
> My languages sematnics define "[a,b,c]" to be eqivalent
> "func(;a,func(;b,c))", and moreover, the user program might define
> "func" to be whatever function the user wants it to be.
> 
> (As a side note: the function call syntax in the language is
> func(x1,..,xN;y1,..,yM) where x1,..,xN are copy-in copy-out 
> parameters,
> and y1,...,yM are pass-by-value. Also, there is no distinction between
> statements and expressions.)
> 
> I have one tree parser that takes the parser output and simplifies the
> tree, before that is passed to another tree-parser, the code 
> generator.
> 
> The simplifying treeparser (the transformer) does things like convert
> "expr1 + expr1" to "+(;expr1,expr2)", and I furthermore want it to
> convert the tree for "[a,b,c]" to the tree "func(;a,func(;b,c))" would
> have generated.
> 
> In a nutshell, I need to convert trees of the form depicted above, to
> this:
> 
> LPAREN
>  |
> NAME("func") - STATEMENT_LIST - STATEMENT_list
>                                  |
>                                  ID(a) - ID(b) - ID(c)
> 
> How would you do in a tree-parser rule? The rules I have to match the
> input tree are:
> 
> list_expr : #(LIST stmt_list)
> stmt_list : #(STATEMENT_LIST (stmt)*)
> 
> Arnar
> 
> ps. for the sake of completeness, the actual language doesn't 
> use "func"
> as the function name, but rather ":". Operatrs in the language are
> simply functions as the equivalence "a+b"="+(;a,b)" implied.
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! 
> Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Thu Oct  9 11:09:57 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Tree transformation
In-Reply-To: <72C9789739C4214096AE945753B11EA36B1F67@mypxmail04.bco-home.com>
Message-ID: <000f01c38e90$8c45df10$1ac8090a@oddi.is>

Hello..

I get this:

g:\j2sdk1.4.2\bin\java -cp g:\jars\antlr.jar antlr.Tool
FjolnirTransformer.g
ANTLR Parser Generator   Version 2.7.3-20030430   1989-2003 jGuru.com
FjolnirTransformer.g:115:11: Suffixing a root node with '!' is not
implemented
Exiting due to errors.

I think I'm running the latest and greatest (2.7.3 from Ric, dated
2003-09-11).

Arnar



> -----Original Message-----
> From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
> Sent: 9. okt?ber 2003 15:51
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Tree transformation
> 
> 
> Something like this should do the trick except for the EMPTY_LIST bit:
> 
> parent_expr : #(l:PARENT! s:stmt_list);
> 
> stmt_list : stmt {##=#([STATEMENT_LIST],##);} (stmt_list)? ;
> 
> Try this for EMPTY_LIST functionality, but it probably needs some more
> thinking about if you get ambiguity warnings:
> 
> stmt_list : stmt {##=#([STATEMENT_LIST],##);} 
>            (stmt_list
> 		| /*empty*/ {##=#(null,##,EMPTY_LIST);}
> 		) 
> 
> ;
> 
> Note that #(null,a,b) builds a list A B with no root (null is 
> the root--get
> it?)
> 
> Monty
> 
> -----Original Message-----
> From: Arnar Birgisson [mailto:arnarb@oddi.is] 
> Sent: Thursday, October 09, 2003 4:44 AM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Tree transformation
> 
> Hello..
> 
> Thanks, but what I need is a bit more. I need a more general method of
> converting a list like structure like
> 
> PARENT
>  |
> C1 - C2 - C3 - ... - CN
> 
> to a right-balanced tree like this:
> 
> FUNC
>  |
> C1 - FUNC
>       |
>      C2 - FUNC
>            |
>           C3 - FUNC
>                 |
>                 ... 
>                    C(N-1) - FUNC
>                              |
>                              CN - EMPTY_LIST
> 
> What I am implementing is basically the conversion from
> "[expr1,expr2,...,exprN]" to a lisp-like list, which is equivalent to
> "expr1 : (expr2 : (expr3 : ... (exprN : []) ... ))", where ":" is like
> the "cons" operator in lisp, and "[]" is a lexical constant 
> representing
> the nil list.
> 
> I thought of writing a function that takes three ASTs, one like this
> #(FUNC), one #(EMPTY_LIST) and the third one like #(LIST 
> node1 node2 ...
> nodeN), and returns an AST like this: #(FUNC node1 #(FUNC node2 #(...
> #(FUNC nodeN EMPTY_LIST) ...) ) ). I will try this and let you know.
> 
> Hope that explains it..
> 
> Arnar
>                                         
> 
> > -----Original Message-----
> > From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
> > Sent: 8. okt?ber 2003 22:19
> > To: antlr-interest@yahoogroups.com
> > Subject: RE: [antlr-interest] Tree transformation
> > 
> > 
> > Ack, the formatting got blarked.  Should be this:
> > 
> > list_expr! : #(l:LIST s:stmt_list) {##=#(#[LPAREN,")"], 
> > #[NAME,"func"], s);}
> > 
> > stmt_list : #(STATEMENT_LIST (stmt)*)
> > 
> > -----Original Message-----
> > From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
> > Sent: Wednesday, October 08, 2003 3:11 PM
> > To: antlr-interest@yahoogroups.com
> > Subject: RE: [antlr-interest] Tree transformation
> > 
> > Your description is a bit unclear, but to get this:
> > 
> > LPAREN
> >  |
> > NAME("func") - STATEMENT_LIST 
> >                 |
> >                ID(a) - ID(b) - ID(c)
> > 
> > Do this:
> > 
> > list_expr! : #(l:LIST s:stmt_list) {##=#(#[LPAREN,")"], 
> > #[NAME,"func"], s);}
> > stmt_list : #(STATEMENT_LIST (stmt)*)
> > 
> > Monty
> > 
> > -----Original Message-----
> > From: Arnar Birgisson [mailto:arnarb@oddi.is] 
> > Sent: Wednesday, October 08, 2003 12:03 PM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Tree transformation
> > 
> > Hello..
> > 
> > I have a programming construct "[a,b,c]" which defines a 
> list (in the
> > lisp sense) of the results of expressions a, b and c. The 
> > parser returns
> > this tree: #([LIST,"["], #(STATEMENT_LIST, #a, #b, #c)). I.e.
> > 
> > LIST
> >  |
> > STATEMENT_LIST
> >  |
> >  ID - ID - ID
> > 
> > My languages sematnics define "[a,b,c]" to be eqivalent
> > "func(;a,func(;b,c))", and moreover, the user program might define
> > "func" to be whatever function the user wants it to be.
> > 
> > (As a side note: the function call syntax in the language is
> > func(x1,..,xN;y1,..,yM) where x1,..,xN are copy-in copy-out 
> > parameters,
> > and y1,...,yM are pass-by-value. Also, there is no 
> distinction between
> > statements and expressions.)
> > 
> > I have one tree parser that takes the parser output and 
> simplifies the
> > tree, before that is passed to another tree-parser, the code 
> > generator.
> > 
> > The simplifying treeparser (the transformer) does things 
> like convert
> > "expr1 + expr1" to "+(;expr1,expr2)", and I furthermore want it to
> > convert the tree for "[a,b,c]" to the tree 
> "func(;a,func(;b,c))" would
> > have generated.
> > 
> > In a nutshell, I need to convert trees of the form depicted 
> above, to
> > this:
> > 
> > LPAREN
> >  |
> > NAME("func") - STATEMENT_LIST - STATEMENT_list
> >                                  |
> >                                  ID(a) - ID(b) - ID(c)
> > 
> > How would you do in a tree-parser rule? The rules I have to 
> match the
> > input tree are:
> > 
> > list_expr : #(LIST stmt_list)
> > stmt_list : #(STATEMENT_LIST (stmt)*)
> > 
> > Arnar
> > 
> > ps. for the sake of completeness, the actual language doesn't 
> > use "func"
> > as the function name, but rather ":". Operatrs in the language are
> > simply functions as the equivalence "a+b"="+(;a,b)" implied.
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! 
> > Groups is subject to http://docs.yahoo.com/info/terms/ 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! 
> Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Oct  9 11:18:33 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:00 2004
Subject: [antlr-interest] Tree transformation
Message-ID: <72C9789739C4214096AE945753B11EA36B1F75@mypxmail04.bco-home.com>

Huh, then do this

parent_expr! : #(l:PARENT s:stmt_list) {##=s;};

Monty

-----Original Message-----
From: Arnar Birgisson [mailto:arnarb@oddi.is] 
Sent: Thursday, October 09, 2003 11:10 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Tree transformation

Hello..

I get this:

g:\j2sdk1.4.2\bin\java -cp g:\jars\antlr.jar antlr.Tool
FjolnirTransformer.g
ANTLR Parser Generator   Version 2.7.3-20030430   1989-2003 jGuru.com
FjolnirTransformer.g:115:11: Suffixing a root node with '!' is not
implemented
Exiting due to errors.

I think I'm running the latest and greatest (2.7.3 from Ric, dated
2003-09-11).

Arnar



> -----Original Message-----
> From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
> Sent: 9. okt?ber 2003 15:51
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Tree transformation
> 
> 
> Something like this should do the trick except for the EMPTY_LIST bit:
> 
> parent_expr : #(l:PARENT! s:stmt_list);
> 
> stmt_list : stmt {##=#([STATEMENT_LIST],##);} (stmt_list)? ;
> 
> Try this for EMPTY_LIST functionality, but it probably needs some more
> thinking about if you get ambiguity warnings:
> 
> stmt_list : stmt {##=#([STATEMENT_LIST],##);} 
>            (stmt_list
> 		| /*empty*/ {##=#(null,##,EMPTY_LIST);}
> 		) 
> 
> ;
> 
> Note that #(null,a,b) builds a list A B with no root (null is 
> the root--get
> it?)
> 
> Monty
> 
> -----Original Message-----
> From: Arnar Birgisson [mailto:arnarb@oddi.is] 
> Sent: Thursday, October 09, 2003 4:44 AM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Tree transformation
> 
> Hello..
> 
> Thanks, but what I need is a bit more. I need a more general method of
> converting a list like structure like
> 
> PARENT
>  |
> C1 - C2 - C3 - ... - CN
> 
> to a right-balanced tree like this:
> 
> FUNC
>  |
> C1 - FUNC
>       |
>      C2 - FUNC
>            |
>           C3 - FUNC
>                 |
>                 ... 
>                    C(N-1) - FUNC
>                              |
>                              CN - EMPTY_LIST
> 
> What I am implementing is basically the conversion from
> "[expr1,expr2,...,exprN]" to a lisp-like list, which is equivalent to
> "expr1 : (expr2 : (expr3 : ... (exprN : []) ... ))", where ":" is like
> the "cons" operator in lisp, and "[]" is a lexical constant 
> representing
> the nil list.
> 
> I thought of writing a function that takes three ASTs, one like this
> #(FUNC), one #(EMPTY_LIST) and the third one like #(LIST 
> node1 node2 ...
> nodeN), and returns an AST like this: #(FUNC node1 #(FUNC node2 #(...
> #(FUNC nodeN EMPTY_LIST) ...) ) ). I will try this and let you know.
> 
> Hope that explains it..
> 
> Arnar
>                                         
> 
> > -----Original Message-----
> > From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
> > Sent: 8. okt?ber 2003 22:19
> > To: antlr-interest@yahoogroups.com
> > Subject: RE: [antlr-interest] Tree transformation
> > 
> > 
> > Ack, the formatting got blarked.  Should be this:
> > 
> > list_expr! : #(l:LIST s:stmt_list) {##=#(#[LPAREN,")"], 
> > #[NAME,"func"], s);}
> > 
> > stmt_list : #(STATEMENT_LIST (stmt)*)
> > 
> > -----Original Message-----
> > From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
> > Sent: Wednesday, October 08, 2003 3:11 PM
> > To: antlr-interest@yahoogroups.com
> > Subject: RE: [antlr-interest] Tree transformation
> > 
> > Your description is a bit unclear, but to get this:
> > 
> > LPAREN
> >  |
> > NAME("func") - STATEMENT_LIST 
> >                 |
> >                ID(a) - ID(b) - ID(c)
> > 
> > Do this:
> > 
> > list_expr! : #(l:LIST s:stmt_list) {##=#(#[LPAREN,")"], 
> > #[NAME,"func"], s);}
> > stmt_list : #(STATEMENT_LIST (stmt)*)
> > 
> > Monty
> > 
> > -----Original Message-----
> > From: Arnar Birgisson [mailto:arnarb@oddi.is] 
> > Sent: Wednesday, October 08, 2003 12:03 PM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Tree transformation
> > 
> > Hello..
> > 
> > I have a programming construct "[a,b,c]" which defines a 
> list (in the
> > lisp sense) of the results of expressions a, b and c. The 
> > parser returns
> > this tree: #([LIST,"["], #(STATEMENT_LIST, #a, #b, #c)). I.e.
> > 
> > LIST
> >  |
> > STATEMENT_LIST
> >  |
> >  ID - ID - ID
> > 
> > My languages sematnics define "[a,b,c]" to be eqivalent
> > "func(;a,func(;b,c))", and moreover, the user program might define
> > "func" to be whatever function the user wants it to be.
> > 
> > (As a side note: the function call syntax in the language is
> > func(x1,..,xN;y1,..,yM) where x1,..,xN are copy-in copy-out 
> > parameters,
> > and y1,...,yM are pass-by-value. Also, there is no 
> distinction between
> > statements and expressions.)
> > 
> > I have one tree parser that takes the parser output and 
> simplifies the
> > tree, before that is passed to another tree-parser, the code 
> > generator.
> > 
> > The simplifying treeparser (the transformer) does things 
> like convert
> > "expr1 + expr1" to "+(;expr1,expr2)", and I furthermore want it to
> > convert the tree for "[a,b,c]" to the tree 
> "func(;a,func(;b,c))" would
> > have generated.
> > 
> > In a nutshell, I need to convert trees of the form depicted 
> above, to
> > this:
> > 
> > LPAREN
> >  |
> > NAME("func") - STATEMENT_LIST - STATEMENT_list
> >                                  |
> >                                  ID(a) - ID(b) - ID(c)
> > 
> > How would you do in a tree-parser rule? The rules I have to 
> match the
> > input tree are:
> > 
> > list_expr : #(LIST stmt_list)
> > stmt_list : #(STATEMENT_LIST (stmt)*)
> > 
> > Arnar
> > 
> > ps. for the sake of completeness, the actual language doesn't 
> > use "func"
> > as the function name, but rather ":". Operatrs in the language are
> > simply functions as the equivalence "a+b"="+(;a,b)" implied.
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! 
> > Groups is subject to http://docs.yahoo.com/info/terms/ 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! 
> Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Thu Oct  9 11:37:29 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Re: Tree transformation
In-Reply-To: <000f01c38e90$8c45df10$1ac8090a@oddi.is>
Message-ID: <bm49t9+pg9h@eGroups.com>

Arnar--

In 2.7.1,
    #( A! B C )
in a tree rule produced
    B
    |
    C
instead of B--C.  I fixed this (and a few related problems), but the 
fix did not make it into 2.7.2; Ter threw in the error message 
instead.  This will be fixed in 2.8 which will be an experimental 
version of ANTLR with some 3.0 features added (my tree grammar 
generation and tree construction syntax will be included and possibly 
some other things--depends on how far Ter gets with other ANTLR 3 
features).

Try putting a ! on the rule and manually construct the rule tree.  
That should be a suitable workaround.

--Loring



--- In antlr-interest@yahoogroups.com, "Arnar Birgisson" <arnarb@o...> 
wrote:
> Hello..
> 
> I get this:
> 
> g:\j2sdk1.4.2\bin\java -cp g:\jars\antlr.jar antlr.Tool
> FjolnirTransformer.g
> ANTLR Parser Generator   Version 2.7.3-20030430   1989-2003 
jGuru.com
> FjolnirTransformer.g:115:11: Suffixing a root node with '!' is not
> implemented
> Exiting due to errors.
> 
> I think I'm running the latest and greatest (2.7.3 from Ric, dated
> 2003-09-11).
> 
> Arnar
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Thu Oct  9 11:42:39 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Tree transformation
In-Reply-To: <72C9789739C4214096AE945753B11EA36B1F75@mypxmail04.bco-home.com>
Message-ID: <001001c38e95$1dd00830$1ac8090a@oddi.is>

Yeah.. tried that also, which seems to end up in an infinite loop :o(
Anyways.. I have a working c++ function that takes the factory and the
list as parameters and does the thing for me. It's equivalent in antlr
construction syntax would be something like this:

list_expression! : #(LIST slist:stmt_list)
{
  antlr::RefAST current = slist->getFirstChild();
  if (current == antlr::nullAST) {
    ## = #([EMPTY_LIST,"[]"]);
  } else {
    antlr::RefAST subtree = #([STMT_LIST,"function arguments"]);
    antlr::RefAST root = #([LPAREN,"("], [ID,":"], subtree);
    while (current != antlr::nullAST) {
      subtree->addChild(current);
      antlr::RefAST temp1 = current->getNextSibling();
      current->setNextSibling(antlr::nullAST);
      current = temp1;
      if (current != antlr::nullAST) {
        antlr::RefAST newSubtree = #([STMT_LIST,"function arguments"]);
        antlr::RefAST temp2 = #([LPAREN,"("], [ID,":"], newSubtree);
        subtree->addChild(temp2);
        subtree = newSubtree;
      }
    }
    subtree->addChild( #([EMPTY_LIST,"[]"]) );
    ## = root;
  }
};

I tried this out also, and it works pretty well.

Arnar

> -----Original Message-----
> From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
> Sent: 9. okt?ber 2003 18:19
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Tree transformation
> 
> 
> Huh, then do this
> 
> parent_expr! : #(l:PARENT s:stmt_list) {##=s;};
> 
> Monty
> 
> -----Original Message-----
> From: Arnar Birgisson [mailto:arnarb@oddi.is] 
> Sent: Thursday, October 09, 2003 11:10 AM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Tree transformation
> 
> Hello..
> 
> I get this:
> 
> g:\j2sdk1.4.2\bin\java -cp g:\jars\antlr.jar antlr.Tool
> FjolnirTransformer.g
> ANTLR Parser Generator   Version 2.7.3-20030430   1989-2003 jGuru.com
> FjolnirTransformer.g:115:11: Suffixing a root node with '!' is not
> implemented
> Exiting due to errors.
> 
> I think I'm running the latest and greatest (2.7.3 from Ric, dated
> 2003-09-11).
> 
> Arnar
> 
> 
> 
> > -----Original Message-----
> > From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
> > Sent: 9. okt?ber 2003 15:51
> > To: antlr-interest@yahoogroups.com
> > Subject: RE: [antlr-interest] Tree transformation
> > 
> > 
> > Something like this should do the trick except for the 
> EMPTY_LIST bit:
> > 
> > parent_expr : #(l:PARENT! s:stmt_list);
> > 
> > stmt_list : stmt {##=#([STATEMENT_LIST],##);} (stmt_list)? ;
> > 
> > Try this for EMPTY_LIST functionality, but it probably 
> needs some more
> > thinking about if you get ambiguity warnings:
> > 
> > stmt_list : stmt {##=#([STATEMENT_LIST],##);} 
> >            (stmt_list
> > 		| /*empty*/ {##=#(null,##,EMPTY_LIST);}
> > 		) 
> > 
> > ;
> > 
> > Note that #(null,a,b) builds a list A B with no root (null is 
> > the root--get
> > it?)
> > 
> > Monty
> > 
> > -----Original Message-----
> > From: Arnar Birgisson [mailto:arnarb@oddi.is] 
> > Sent: Thursday, October 09, 2003 4:44 AM
> > To: antlr-interest@yahoogroups.com
> > Subject: RE: [antlr-interest] Tree transformation
> > 
> > Hello..
> > 
> > Thanks, but what I need is a bit more. I need a more 
> general method of
> > converting a list like structure like
> > 
> > PARENT
> >  |
> > C1 - C2 - C3 - ... - CN
> > 
> > to a right-balanced tree like this:
> > 
> > FUNC
> >  |
> > C1 - FUNC
> >       |
> >      C2 - FUNC
> >            |
> >           C3 - FUNC
> >                 |
> >                 ... 
> >                    C(N-1) - FUNC
> >                              |
> >                              CN - EMPTY_LIST
> > 
> > What I am implementing is basically the conversion from
> > "[expr1,expr2,...,exprN]" to a lisp-like list, which is 
> equivalent to
> > "expr1 : (expr2 : (expr3 : ... (exprN : []) ... ))", where 
> ":" is like
> > the "cons" operator in lisp, and "[]" is a lexical constant 
> > representing
> > the nil list.
> > 
> > I thought of writing a function that takes three ASTs, one like this
> > #(FUNC), one #(EMPTY_LIST) and the third one like #(LIST 
> > node1 node2 ...
> > nodeN), and returns an AST like this: #(FUNC node1 #(FUNC 
> node2 #(...
> > #(FUNC nodeN EMPTY_LIST) ...) ) ). I will try this and let you know.
> > 
> > Hope that explains it..
> > 
> > Arnar
> >                                         
> > 
> > > -----Original Message-----
> > > From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
> > > Sent: 8. okt?ber 2003 22:19
> > > To: antlr-interest@yahoogroups.com
> > > Subject: RE: [antlr-interest] Tree transformation
> > > 
> > > 
> > > Ack, the formatting got blarked.  Should be this:
> > > 
> > > list_expr! : #(l:LIST s:stmt_list) {##=#(#[LPAREN,")"], 
> > > #[NAME,"func"], s);}
> > > 
> > > stmt_list : #(STATEMENT_LIST (stmt)*)
> > > 
> > > -----Original Message-----
> > > From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
> > > Sent: Wednesday, October 08, 2003 3:11 PM
> > > To: antlr-interest@yahoogroups.com
> > > Subject: RE: [antlr-interest] Tree transformation
> > > 
> > > Your description is a bit unclear, but to get this:
> > > 
> > > LPAREN
> > >  |
> > > NAME("func") - STATEMENT_LIST 
> > >                 |
> > >                ID(a) - ID(b) - ID(c)
> > > 
> > > Do this:
> > > 
> > > list_expr! : #(l:LIST s:stmt_list) {##=#(#[LPAREN,")"], 
> > > #[NAME,"func"], s);}
> > > stmt_list : #(STATEMENT_LIST (stmt)*)
> > > 
> > > Monty
> > > 
> > > -----Original Message-----
> > > From: Arnar Birgisson [mailto:arnarb@oddi.is] 
> > > Sent: Wednesday, October 08, 2003 12:03 PM
> > > To: antlr-interest@yahoogroups.com
> > > Subject: [antlr-interest] Tree transformation
> > > 
> > > Hello..
> > > 
> > > I have a programming construct "[a,b,c]" which defines a 
> > list (in the
> > > lisp sense) of the results of expressions a, b and c. The 
> > > parser returns
> > > this tree: #([LIST,"["], #(STATEMENT_LIST, #a, #b, #c)). I.e.
> > > 
> > > LIST
> > >  |
> > > STATEMENT_LIST
> > >  |
> > >  ID - ID - ID
> > > 
> > > My languages sematnics define "[a,b,c]" to be eqivalent
> > > "func(;a,func(;b,c))", and moreover, the user program might define
> > > "func" to be whatever function the user wants it to be.
> > > 
> > > (As a side note: the function call syntax in the language is
> > > func(x1,..,xN;y1,..,yM) where x1,..,xN are copy-in copy-out 
> > > parameters,
> > > and y1,...,yM are pass-by-value. Also, there is no 
> > distinction between
> > > statements and expressions.)
> > > 
> > > I have one tree parser that takes the parser output and 
> > simplifies the
> > > tree, before that is passed to another tree-parser, the code 
> > > generator.
> > > 
> > > The simplifying treeparser (the transformer) does things 
> > like convert
> > > "expr1 + expr1" to "+(;expr1,expr2)", and I furthermore want it to
> > > convert the tree for "[a,b,c]" to the tree 
> > "func(;a,func(;b,c))" would
> > > have generated.
> > > 
> > > In a nutshell, I need to convert trees of the form depicted 
> > above, to
> > > this:
> > > 
> > > LPAREN
> > >  |
> > > NAME("func") - STATEMENT_LIST - STATEMENT_list
> > >                                  |
> > >                                  ID(a) - ID(b) - ID(c)
> > > 
> > > How would you do in a tree-parser rule? The rules I have to 
> > match the
> > > input tree are:
> > > 
> > > list_expr : #(LIST stmt_list)
> > > stmt_list : #(STATEMENT_LIST (stmt)*)
> > > 
> > > Arnar
> > > 
> > > ps. for the sake of completeness, the actual language doesn't 
> > > use "func"
> > > as the function name, but rather ":". Operatrs in the language are
> > > simply functions as the equivalence "a+b"="+(;a,b)" implied.
> > > 
> > > 
> > >  
> > > 
> > > Your use of Yahoo! Groups is subject to 
> > > http://docs.yahoo.com/info/terms/ 
> > > 
> > > 
> > >  
> > > 
> > > Your use of Yahoo! 
> > > Groups is subject to http://docs.yahoo.com/info/terms/ 
> > > 
> > > 
> > >  
> > > 
> > > Your use of Yahoo! Groups is subject to 
> > > http://docs.yahoo.com/info/terms/ 
> > > 
> > > 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! 
> > Groups is subject to http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! 
> Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From netminka at netscape.net  Thu Oct  9 16:00:22 2003
From: netminka at netscape.net (netminka)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] can't override nextToken in c# version
Message-ID: <bm4pa6+22fk@eGroups.com>

hi all,
the generated nextToken() is defined as
   public new Token nextToken()
in the generated lexer class. 

I have used the generated lexer class as a base class to my lexer,
and as I need to override nextToken(), I have to hand edit
the generated lexer file after each run of antlr.Tool.

I think the signature of the generated nextToken() should be:

public virtual Token nextToken()

thanks!!
Megan Adams 





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From netminka at netscape.net  Thu Oct  9 16:12:52 2003
From: netminka at netscape.net (netminka)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] urgent problem with stack overflow, please help
Message-ID: <bm4q1k+im7k@eGroups.com>

hi all,
I am writing a commercial grade translator. The source language
environment has tools which generate large initialization 
procedures, I have seen up to 1100 lines. This causes stack overflow.
We are using C# antlr. Stack overflow happens at about 600 lines.
This happens in the first stage of parsing, not the tree parser.

The other odd thing about this is that the large procedures 
consist of assignment statements, one per line. That's it.
No big expressions. The overflow is related strictly to the 
number of lines in a procedure, not the complexity of the 
expressions or anything else. The stack, as it is related to the
grammar definition, is not growing with the size of the procedure. 
I know the grammar rules are closing properly because I have run
a great deal of code through this translator and I am intimately
familiar with the parse traces. This makes me think that there
may be a basic clean-up problem happening here..? 

Can anyone out there who is using antlr java or C++ comment on 
stack overflow problems for large source.  Is there one 
implementation platform that is better, do they all have this
problem? Is this a .Net memory management problem? Comments
appreciated!
Megan Adams 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Thu Oct  9 19:01:25 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Re: can't override nextToken in c# version
In-Reply-To: <bm4pa6+22fk@eGroups.com>
Message-ID: <bm53tl+gp77@eGroups.com>

--- In antlr-interest@yahoogroups.com, "netminka" <netminka@n...> wrote:
> hi all,
> the generated nextToken() is defined as
>    public new Token nextToken()
> in the generated lexer class. 
> 
> I have used the generated lexer class as a base class to my lexer,
> and as I need to override nextToken(), I have to hand edit
> the generated lexer file after each run of antlr.Tool.
> 
> I think the signature of the generated nextToken() should be:
> 
> public virtual Token nextToken()

Megan,

You may be right about this although I seem to remember a makeToken()
method too. In the meantime you can use the following workaround in
your subclass(es):

class LexerSubClass : MyLexer, TokenStream
{
   .....
   public new /*virtual?*/ Token nextToken()
   {
      //do your stuff
      .....
      .....

      // optionally call inherited stiff
      Token t = base.nextToken();
   }
   Token TokenStream.nextToken()
   {
       return ((LexerSubClass) this).nextToken();
   }
   ....
}

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Thu Oct  9 19:22:03 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Re: urgent problem with stack overflow, please help
In-Reply-To: <bm4q1k+im7k@eGroups.com>
Message-ID: <bm554b+ds7u@eGroups.com>

--- In antlr-interest@yahoogroups.com, "netminka" <netminka@n...> wrote:
> hi all,
> I am writing a commercial grade translator. The source language
> environment has tools which generate large initialization 
> procedures, I have seen up to 1100 lines. This causes stack overflow.
> We are using C# antlr. Stack overflow happens at about 600 lines.
> This happens in the first stage of parsing, not the tree parser.

I am not sure what problem it is you are describing here Megan. ANTLR
generated parsers (in Java, C++ and C#) can trivially process input
text that contains procedures/methods in excess of the 1-2K lines you
mentioned.

Running the lexer/parser for the ANTLR Java grammar on the
ANTLR-generated lexer for the Java grammar is one way to convince your
self that ANTLR C# can handle long procedures.

> The other odd thing about this is that the large procedures 
> consist of assignment statements, one per line. That's it.
> No big expressions. The overflow is related strictly to the 
> number of lines in a procedure, not the complexity of the 
> expressions or anything else. The stack, as it is related to the
> grammar definition, is not growing with the size of the procedure. 
> I know the grammar rules are closing properly because I have run
> a great deal of code through this translator and I am intimately
> familiar with the parse traces. This makes me think that there
> may be a basic clean-up problem happening here..? 

Did you track the resource usage for your parser?. 
If you have a basic version of the grammar without embedded action
code, does it still report the same error?

> Can anyone out there who is using antlr java or C++ comment on 
> stack overflow problems for large source.  Is there one 
> implementation platform that is better, do they all have this
> problem? Is this a .Net memory management problem? Comments
> appreciated!

Some of my input source files have been greater than 1MB with ANTLR
C#/Java/C++ generated lexers/parsers. Incidentally, 1MB isn't some
some of limit, I just mentioned that because I have fed files of that
size to C# parsers successfully. And the parsers built the AST without
any issues.

Actually, if memory serves, the system parsed the 1MB+ files (they
were about a dozen in the set) and lots of other source files (read
hundreds) and stitched their ASTs together into a single forest.

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Thu Oct  9 21:27:44 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Re: urgent problem with stack overflow, please help
In-Reply-To: <bm4q1k+im7k@eGroups.com>
Message-ID: <bm5cg0+njv5@eGroups.com>

--- In antlr-interest@yahoogroups.com, "netminka" <netminka@n...> 
wrote:
> hi all,
> I am writing a commercial grade translator. The source language
> environment has tools which generate large initialization 
> procedures, I have seen up to 1100 lines. This causes stack 
overflow.
> We are using C# antlr. Stack overflow happens at about 600 lines.
> This happens in the first stage of parsing, not the tree parser.
> 

Megan--

Is there any chance that you have recursion in place of iteration?  
Say something like

statements
    :
    statement ( statements )?
    ;

If so, a succession of statements ("statements" calling "statements" 
calling ...) could blow the stack.  It should not (well, C$ is a 
Microsoft product) otherwise be possible to overflow the stack unless 
C# does unbounded dynamic allocation of stack space within routines.

--Loring


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From killer_klit69x3 at yahoo.com  Thu Oct  9 22:15:44 2003
From: killer_klit69x3 at yahoo.com (killer_klit69x3)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Rich Bitch Seek Summertime Stud
Message-ID: <bm5fa0+vsbd@eGroups.com>

My hubby is gone all summer on business so i want to have some fun. Drop me an email and lets get together Click Below.
http://www.123adultpersonals.net/landing.asp?afl=NYHO


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Thu Oct  9 22:45:18 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Static [semantic] analysis and TreeParsers?
Message-ID: <bm5h1e+9gtb@eGroups.com>

Is it possible to build program analyses such as reaching defs as
TreeParsers?. Has anyone built examples of such a beast?

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Fri Oct 10 01:58:37 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Re: Static [semantic] analysis and TreeParsers?
In-Reply-To: <bm5h1e+9gtb@eGroups.com>
Message-ID: <bm5sbt+clf6@eGroups.com>

--- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...> 
wrote:
> Is it possible to build program analyses such as reaching defs as

Yes, although specialized AST classes are needed to construct trees 
that can be transformed to analysis graphs by adding cross-links.

> TreeParsers?. Has anyone built examples of such a beast?

Ter's LL(k) analysis code (pre-ANTLR3) may end up as a good example.  
I suspect that tree walking is not sufficient, and that at least some 
code is needed for navigating graphs.

--Loring


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Fri Oct 10 02:23:41 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Re: Limits of  tree generation (C++)
In-Reply-To: <6F7AD2AD5765D3118A7A0090278730212A4F6D05@na1fcm06.dearborn.ford.com>; from mtiller@ford.com on Thu, Oct 09, 2003 at 10:09:14AM -0400
References: <6F7AD2AD5765D3118A7A0090278730212A4F6D05@na1fcm06.dearborn.ford.com>
Message-ID: <20031010112341.C4302@cs.utwente.nl>

Hi,

On Thu, Oct 09, 2003 at 10:09:14AM -0400, Tiller, Michael (M.M.) wrote:
> > On Thu, Oct 09, 2003 at 09:58:08AM -0000, marcschellens wrote:
> > > The next stage of processing that tree knows only to read
> > > the first node.
> > > As I understood, the nodes are reference counted.
> > > Isn't it therefore more effective to keep it like it is,
> > > or is there a caveeat?
> >
> > You'll have the same node in the tree in multiple places, usually this will
> > give problems. E.g. at a later stage you will forget about it maybe switch
> > to some custom AST with extra info and get bitten by it, or you add a child
> > to it at a later stage and see it appear in two places. The sky's the limit
> > as Murphy said...
>
> So then can someone remind me why reference counting is even used?

This is not a reference counting problem. You could create the same problem
with plain pointers. You'll still have two 'pointing entities' pointing to
the same thing in two places in the tree, e.g. are open to all things like
loops in the tree (e.g. exit tree), neverending algorithms on the tree etc.
Operating on one of the nodes will change the tree in two places maybe even
making loops or destroying the tree in two parts. In this particular case
the risk might not be there as is but as the code evolves this may happen.

> Wouldn't it be better to make each node solely responsible for its children
> (i.e. the children are deleted either when they are removed or when the
> parent is destroyed).

Would require rewriting the whole support lib is my guess. Or at least
reevaluating every line that works with nodes. Rewriting is something I
want to do but will not be this year I guess.

> It just seems that a different memory manage/garbage
> collection scheme would map much better given that nodes cannot be shared.

Nodes can be shared they just can't be shared among tree nodes because the
risk is high that you make a more general graph than a tree with as result
that the support code and treewalkers aren't guaranteed to work anymore.

> > dupTree is the right thing here I guess (look for it in ASTFactory.hpp) if
> > you know for sure that there's only one node a simple clone might do the
> > trick as well.
>
> I would point out that I created my own stand-alone implementation.  I
> found no reason for ASTFactory to be involved in this process.

It depends a bit on what you're doing I guess. If you want to be able to
read/write trees from/to disk then you'll need something that knows all the
nodes and their factories, hence the superfactory.

> This is much more convenient because, as I recall, dupTree is a non-static
> method of ASTFactory.  Having to instantiate an ASTFactory just to call
> dupTree is just too inconvenient (and totally unnecessary).

I agree dupTree and a lot of its friends should not be in the factory. This
is carry over from the java support lib and I didn't want to break the
interface yet. In the future this might all be implemented as templates.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Innovation makes enemies of all those who prospered under the old
   regime, and only lukewarm support is forthcoming from those who would
               prosper under the new. --- Niccol Machiavelli


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From netminka at netscape.net  Fri Oct 10 11:33:36 2003
From: netminka at netscape.net (netminka)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Re: urgent problem with stack overflow, please help
In-Reply-To: <bm5cg0+njv5@eGroups.com>
Message-ID: <bm6u20+84mm@eGroups.com>

Thanks for your reply.
I don't believe I could have recursion as a problem because
the parser stack trace does not show that. I can get files of
very large size through the translator, the only problem is with
individual procedures, their size over a certain limit causes
stack overflow. If I split them into smaller procedures,
otherwise same code, no problem. 
megan


--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> --- In antlr-interest@yahoogroups.com, "netminka" <netminka@n...> 
> wrote:
> > hi all,
> > I am writing a commercial grade translator. The source language
> > environment has tools which generate large initialization 
> > procedures, I have seen up to 1100 lines. This causes stack 
> overflow.
> > We are using C# antlr. Stack overflow happens at about 600 lines.
> > This happens in the first stage of parsing, not the tree parser.
> > 
> 
> Megan--
> 
> Is there any chance that you have recursion in place of iteration?  
> Say something like
> 
> statements
>     :
>     statement ( statements )?
>     ;
> 
> If so, a succession of statements ("statements" 
calling "statements" 
> calling ...) could blow the stack.  It should not (well, C$ is a 
> Microsoft product) otherwise be possible to overflow the stack 
unless 
> C# does unbounded dynamic allocation of stack space within routines.
> 
> --Loring


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From netminka at netscape.net  Fri Oct 10 11:36:43 2003
From: netminka at netscape.net (netminka)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Re: urgent problem with stack overflow, please help
In-Reply-To: <bm554b+ds7u@eGroups.com>
Message-ID: <bm6u7r+6f77@eGroups.com>

The problem is not with the size of the input text, just the 
procedures. If I split the procedures up, same code otherwise,
no stack overflow. 

> Did you track the resource usage for your parser?. 
> If you have a basic version of the grammar without embedded action
> code, does it still report the same error?

I will try this, thanks.
megan 


--- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...> 
wrote:
> --- In antlr-interest@yahoogroups.com, "netminka" <netminka@n...> 
wrote:
> > hi all,
> > I am writing a commercial grade translator. The source language
> > environment has tools which generate large initialization 
> > procedures, I have seen up to 1100 lines. This causes stack 
overflow.
> > We are using C# antlr. Stack overflow happens at about 600 lines.
> > This happens in the first stage of parsing, not the tree parser.
> 
> I am not sure what problem it is you are describing here Megan. 
ANTLR
> generated parsers (in Java, C++ and C#) can trivially process input
> text that contains procedures/methods in excess of the 1-2K lines 
you
> mentioned.
> 
> Running the lexer/parser for the ANTLR Java grammar on the
> ANTLR-generated lexer for the Java grammar is one way to convince 
your
> self that ANTLR C# can handle long procedures.
> 
> > The other odd thing about this is that the large procedures 
> > consist of assignment statements, one per line. That's it.
> > No big expressions. The overflow is related strictly to the 
> > number of lines in a procedure, not the complexity of the 
> > expressions or anything else. The stack, as it is related to the
> > grammar definition, is not growing with the size of the 
procedure. 
> > I know the grammar rules are closing properly because I have run
> > a great deal of code through this translator and I am intimately
> > familiar with the parse traces. This makes me think that there
> > may be a basic clean-up problem happening here..? 
> 
> Did you track the resource usage for your parser?. 
> If you have a basic version of the grammar without embedded action
> code, does it still report the same error?
> 
> > Can anyone out there who is using antlr java or C++ comment on 
> > stack overflow problems for large source.  Is there one 
> > implementation platform that is better, do they all have this
> > problem? Is this a .Net memory management problem? Comments
> > appreciated!
> 
> Some of my input source files have been greater than 1MB with ANTLR
> C#/Java/C++ generated lexers/parsers. Incidentally, 1MB isn't some
> some of limit, I just mentioned that because I have fed files of 
that
> size to C# parsers successfully. And the parsers built the AST 
without
> any issues.
> 
> Actually, if memory serves, the system parsed the 1MB+ files (they
> were about a dozen in the set) and lots of other source files (read
> hundreds) and stitched their ASTs together into a single forest.
> 
> Cheers,
> 
> Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From netminka at netscape.net  Fri Oct 10 16:26:57 2003
From: netminka at netscape.net (netminka)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Re: can't override nextToken in c# version
In-Reply-To: <bm53tl+gp77@eGroups.com>
Message-ID: <bm7f81+1bfj@eGroups.com>

thanks for the suggestion.
I tried defining nextToken() as new in the derived class and it
doesn't override the base class 'new' nextToken. I'll try adding
virtual to the derived class nextToken, though I suspect that
adding virtual to the derived doesn't change the dominance of the base
class method.
megan



--- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...>
wrote:
> --- In antlr-interest@yahoogroups.com, "netminka" <netminka@n...> wrote:
> > hi all,
> > the generated nextToken() is defined as
> >    public new Token nextToken()
> > in the generated lexer class. 
> > 
> > I have used the generated lexer class as a base class to my lexer,
> > and as I need to override nextToken(), I have to hand edit
> > the generated lexer file after each run of antlr.Tool.
> > 
> > I think the signature of the generated nextToken() should be:
> > 
> > public virtual Token nextToken()
> 
> Megan,
> 
> You may be right about this although I seem to remember a makeToken()
> method too. In the meantime you can use the following workaround in
> your subclass(es):
> 
> class LexerSubClass : MyLexer, TokenStream
> {
>    .....
>    public new /*virtual?*/ Token nextToken()
>    {
>       //do your stuff
>       .....
>       .....
> 
>       // optionally call inherited stiff
>       Token t = base.nextToken();
>    }
>    Token TokenStream.nextToken()
>    {
>        return ((LexerSubClass) this).nextToken();
>    }
>    ....
> }
> 
> Cheers,
> 
> Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From netminka at netscape.net  Fri Oct 10 16:30:48 2003
From: netminka at netscape.net (netminka)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] circular token buffer and overriding nextToken()
Message-ID: <bm7ff8+e8om@eGroups.com>

hi all,
I have tried overriding nextToken() because I need my lexer to return
dummy tokens at certain points and what happens is that the 
dummy token writes over a valid token in the token buffer, and my input
program is made incorrect. 

the k for my lexer is four. This problem happens when only one 
dummy token is inserted. It is erratic. 
the token buffer is circular and it's not clear to me where / how
I can safely insert a dummy token.

Can anyone who really understands this interface give me a clue?

Thanks VERY much.
megan 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Fri Oct 10 16:38:08 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Re: can't override nextToken in c# version
In-Reply-To: <bm7f81+1bfj@eGroups.com>
Message-ID: <bm7ft0+6ns5@eGroups.com>

--- In antlr-interest@yahoogroups.com, "netminka" <netminka@n...> wrote:
> thanks for the suggestion.
> I tried defining nextToken() as new in the derived class and it
> doesn't override the base class 'new' nextToken. I'll try adding
> virtual to the derived class nextToken, though I suspect that
> adding virtual to the derived doesn't change the dominance of the base
> class method.
> megan

Megan,

In my suggested solution, the nextToken() method in the subclass hides
the existing method, it can't override it. 

The explicit implementation of the method for the TokenStream
interface is important though. That is how the Parser regards the
Lexer - as a TokenStream.

Now I've thought about it, you might just be coming up against issues
that arise where nextToken() is invoked within the underlying Lexer
and CharScanner classes. Any such invocation would obviously used the
existing, unoverridable method.

Cheers,

Micheal

[reaches for his ANTLR bug swatter...]


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Fri Oct 10 18:31:45 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Re: circular token buffer and overriding nextToken()
In-Reply-To: <bm7ff8+e8om@eGroups.com>
Message-ID: <bm7mi1+dvs5@eGroups.com>

--- In antlr-interest@yahoogroups.com, "netminka" <netminka@n...> wrote:
> hi all,
> I have tried overriding nextToken() because I need my lexer to return
> dummy tokens at certain points and what happens is that the 
> dummy token writes over a valid token in the token buffer, and my input
> program is made incorrect. 
> 
> the k for my lexer is four. This problem happens when only one 
> dummy token is inserted. It is erratic. 
> the token buffer is circular and it's not clear to me where / how
> I can safely insert a dummy token.
> 
> Can anyone who really understands this interface give me a clue?
> 
> Thanks VERY much.
> megan

Megan,

The TokenStream interface itself has a single method - nextToken(). It
is called repeatedly until it returns an EOF token. Simple enough. The
implementation of nextToken() in generated lexers is non-virtual for
C++ & C# (also for Java I think). Which suggests it isn't [really]
intended/expected to be overridden.

Now on to the issue you are having:

The implementation of nextToken() uses the method makeToken()
to...well...make the tokens. This is an extension point and you could
try overriding this method and plugging in custom code to make dummy
tokens here. Alternativey, you may prefer to use a separate
TokenStream object that is logically sited between your Lexer and
Parser - you can derived something from TokenStreamBasicFilter or
write your own.

So, you should either:
a. Override makeToken()
b. Implement a TokenStream filter

You may want to look at Monty's website http://www.codetransform.com/
for ideas on building and using TokenStream filters.

Just out of interest, what are you using ANTLR/C# for?.

Cheers,

Micheal
ANTLR/C#



[*]  Incidentally, I should have asked you WHY you wanted to override
nextToken() before, rather than just suggesting a possible workaround
for the default non-virtual intent.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From cesar at ciencias.unam.mx  Sun Oct 12 04:06:57 2003
From: cesar at ciencias.unam.mx (cesar octavio lopez nataren)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Docs about -traceParser and -traceLexer
Message-ID: <1065956817.1998.18.camel@rats>

Hello I've been using those flags in order to track how the parser/lexer
does its work. But there have been some things that are consfusing for
me.

is there documentation available?


Also, is it possible to use the parserview if I'm using the C#
generator?

Regards

cesar

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From avinash_kondagunta at yahoo.com  Sat Oct 11 17:44:46 2003
From: avinash_kondagunta at yahoo.com (avinash_kondagunta)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] using antlr with C++
Message-ID: <bma85u+kb7i@eGroups.com>

hi
I have just started using antlr recently. I was just trying to compile
ANTLR for C++. When i tried building the runtime, I put in this
command in the directory in which antlr was installed:
/configure --prefix=/usr/local
then i typed make, which generated a lot of errors. I was just
wondering if someone could help me resolve these errors. 

[avinash@linux1 antlr-2.7.2]$ make
=============================
Making dependencies...
=============================
make[1]: Entering directory `/home/avinash/antlr/antlr-2.7.2/antlr'
make[2]: Entering directory
`/home/avinash/antlr/antlr-2.7.2/antlr/preprocessor'make[2]: Leaving
directory `/home/avinash/antlr/antlr-2.7.2/antlr/preprocessor'
make[2]: Entering directory
`/home/avinash/antlr/antlr-2.7.2/antlr/actions'
make[3]: Entering directory
`/home/avinash/antlr/antlr-2.7.2/antlr/actions/java'make[3]: Leaving
directory `/home/avinash/antlr/antlr-2.7.2/antlr/actions/java'
make[3]: Entering directory
`/home/avinash/antlr/antlr-2.7.2/antlr/actions/cpp'
make[3]: Leaving directory
`/home/avinash/antlr/antlr-2.7.2/antlr/actions/cpp'
make[2]: Leaving directory `/home/avinash/antlr/antlr-2.7.2/antlr/actions'
make[2]: Entering directory
`/home/avinash/antlr/antlr-2.7.2/antlr/collections'
make[3]: Entering directory
`/home/avinash/antlr/antlr-2.7.2/antlr/collections/impl'
make[3]: Leaving directory
`/home/avinash/antlr/antlr-2.7.2/antlr/collections/impl'
make[2]: Leaving directory
`/home/avinash/antlr/antlr-2.7.2/antlr/collections'
make[2]: Entering directory `/home/avinash/antlr/antlr-2.7.2/antlr/debug'
make[3]: Entering directory
`/home/avinash/antlr/antlr-2.7.2/antlr/debug/misc'
make[3]: Leaving directory
`/home/avinash/antlr/antlr-2.7.2/antlr/debug/misc'
make[2]: Leaving directory `/home/avinash/antlr/antlr-2.7.2/antlr/debug'
make[1]: Leaving directory `/home/avinash/antlr/antlr-2.7.2/antlr'
make[1]: Entering directory `/home/avinash/antlr/antlr-2.7.2/lib'
make[2]: Entering directory `/home/avinash/antlr/antlr-2.7.2/lib/cpp'
make[3]: Entering directory `/home/avinash/antlr/antlr-2.7.2/lib/cpp/src'
make[3]: Leaving directory `/home/avinash/antlr/antlr-2.7.2/lib/cpp/src'
make[3]: Entering directory
`/home/avinash/antlr/antlr-2.7.2/lib/cpp/antlr'
make[3]: Leaving directory `/home/avinash/antlr/antlr-2.7.2/lib/cpp/antlr'
make[2]: Leaving directory `/home/avinash/antlr/antlr-2.7.2/lib/cpp'
make[1]: Leaving directory `/home/avinash/antlr/antlr-2.7.2/lib'
=============================
Making antlr ...
=============================
make[1]: Entering directory `/home/avinash/antlr/antlr-2.7.2/antlr'
java -cp /home/avinash/antlr/antlr-2.7.2/antlrall.jar antlr.Tool   antlr.g
Exception in thread "main" java.lang.NoClassDefFoundError: antlr.Tool
   at 0x40268e17: java.lang.Throwable.Throwable(java.lang.String)
(/usr/lib/./libgcj.so.3)
   at 0x4025bc8e: java.lang.Error.Error(java.lang.String)
(/usr/lib/./libgcj.so.3)
   at 0x4025d6b6:
java.lang.LinkageError.LinkageError(java.lang.String)
(/usr/lib/./libgcj.so.3)
   at 0x4025eb36:
java.lang.NoClassDefFoundError.NoClassDefFoundError(java.lang.String)
(/usr/lib/./libgcj.so.3)
   at 0x402ad075: gnu.gcj.runtime.FirstThread.run()
(/usr/lib/./libgcj.so.3)
   at 0x4024fc4c: _Jv_ThreadRun(java.lang.Thread) (/usr/lib/./libgcj.so.3)
   at 0x4021c8ac: _Jv_RunMain(java.lang.Class, byte const, int, byte
const, boolean) (/usr/lib/./libgcj.so.3)
   at 0x08048910: ?? (??:0)
   at 0x42015504: __libc_start_main (/lib/tls/libc.so.6)
   at 0x080486c1: ?? (??:0)
make[1]: *** [.antlr.g] Error 1
make[1]: Leaving directory `/home/avinash/antlr/antlr-2.7.2/antlr'
make: *** [su bdirs] Error 2
 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Sun Oct 12 00:08:46 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Re: circular token buffer and overriding nextToken()
In-Reply-To: <bm7mi1+dvs5@eGroups.com>
Message-ID: <bmaulu+q74e@eGroups.com>

--- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...> 
wrote:
> The TokenStream interface itself has a single method - nextToken(). 
It
> is called repeatedly until it returns an EOF token. Simple enough. 
The
> implementation of nextToken() in generated lexers is non-virtual for
> C++ & C# (also for Java I think). Which suggests it isn't [really]

No, not for Java.  In Java, all methods are "virtual" (see 8.6.4.1 in 
the language spec).

> intended/expected to be overridden.

In ANTLR 1, all generated C++ methods were virtual so that they could 
be overridden.  I think that's more the expectation still.

Ter--maybe you want to comment?




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Sun Oct 12 05:19:50 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] using antlr with C++
In-Reply-To: <bma85u+kb7i@eGroups.com>; from avinash_kondagunta@yahoo.com on Sun, Oct 12, 2003 at 12:44:46AM -0000
References: <bma85u+kb7i@eGroups.com>
Message-ID: <20031012141949.A28194@cs.utwente.nl>

On Sun, Oct 12, 2003 at 12:44:46AM -0000, avinash_kondagunta wrote:
> I have just started using antlr recently. I was just trying to compile
> ANTLR for C++. When i tried building the runtime, I put in this
> command in the directory in which antlr was installed:
> /configure --prefix=/usr/local
> then i typed make, which generated a lot of errors. I was just
> wondering if someone could help me resolve these errors. 

Grab a development snapshot from
http://wwwhome.cs.utwente.nl/~klaren/antlr/

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "You know how to use that thing?" [pointing to the sword]
  "Sure.. The pointy end goes into the other guy."
  --- The Mask of Zorro


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Sun Oct 12 10:08:21 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Re: circular token buffer and overriding nextToken()
In-Reply-To: <bmaulu+q74e@eGroups.com>
Message-ID: <AEAE6012-FCD6-11D7-8DB8-000393BB647E@cs.usfca.edu>

Howdy.  I intend TokenStream to be an interface to any object that can 
return Token objects.  Since a class does not result in objects, in my 
opinion, unless dynamic binding is involved, I pretty much make 
everything virtual.  In this particular case, it's pretty hard to 
switch out the token stream (w/o recompiling everything) on the fly to 
get a new stream without dynamic binding. :)

A good on-the-fly compiler will inline lots of stuff so that dynamic 
calls are not something you should worry about from an efficiency point 
of view.  In C++, I still wouldn't worry about it.  Better to be 
flexible.

Terence

On Sunday, October 12, 2003, at 12:08  AM, lgcraymer wrote:

> --- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...>
> wrote:
>> The TokenStream interface itself has a single method - nextToken().
> It
>> is called repeatedly until it returns an EOF token. Simple enough.
> The
>> implementation of nextToken() in generated lexers is non-virtual for
>> C++ & C# (also for Java I think). Which suggests it isn't [really]
>
> No, not for Java.  In Java, all methods are "virtual" (see 8.6.4.1 in
> the language spec).
>
>> intended/expected to be overridden.
>
> In ANTLR 1, all generated C++ methods were virtual so that they could
> be overridden.  I think that's more the expectation still.
>
> Ter--maybe you want to comment?
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com link sharing, pure-n-simple




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Sun Oct 12 12:20:57 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] do people want an ANTLR 3 blog?
Message-ID: <34F1586B-FCE9-11D7-9042-000A95891192@cs.usfca.edu>

Howdy,

I write copious notes as I explore ideas and try out code etc...  Shall 
I make a BLOG like system as I build ANTLR 3 so people can follow 
along?  It will probably amount to me simply publishing my notes in 
various files similar to the ANTLR cabal notes.

Do you think this is useful or for whatever reason a good thing to 
"publish"?

Terence
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rbo at acm.org  Sun Oct 12 13:40:23 2003
From: rbo at acm.org (Rodrigo B. de Oliveira)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] do people want an ANTLR 3 blog?
References: <34F1586B-FCE9-11D7-9042-000A95891192@cs.usfca.edu>
Message-ID: <003301c39101$0f8057d0$fe00a8c0@bambook>

I'm sure I'd enjoy reading your notes! With a RSS feed it would be perfect!

+1

Rodrigo

----- Original Message ----- 
From: "Terence Parr" <parrt@cs.usfca.edu>
To: <antlr-interest@yahoogroups.com>
Sent: Sunday, October 12, 2003 4:20 PM
Subject: [antlr-interest] do people want an ANTLR 3 blog?


> Howdy,
> 
> I write copious notes as I explore ideas and try out code etc...  Shall 
> I make a BLOG like system as I build ANTLR 3 so people can follow 
> along?  It will probably amount to me simply publishing my notes in 
> various files similar to the ANTLR cabal notes.
> 
> Do you think this is useful or for whatever reason a good thing to 
> "publish"?
> 
> Terence
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Sun Oct 12 13:31:08 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] do people want an ANTLR 3 blog?
In-Reply-To: <003301c39101$0f8057d0$fe00a8c0@bambook>
Message-ID: <02F08289-FCF3-11D7-9042-000A95891192@cs.usfca.edu>


On Sunday, October 12, 2003, at 01:40 PM, Rodrigo B. de Oliveira wrote:

> I'm sure I'd enjoy reading your notes! With a RSS feed it would be 
> perfect!
>
> +1

Ok. :)  Only problem with the RSS feed is that I'll be updating a few 
documents rather than typing in the "diffs".  Often I do just "add to 
the end", though, I guess.  Hm...i'll think about what the right 
mechanism might be.

Terence
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jean-louis.boulanger at hds.utc.fr  Sun Oct 12 13:35:56 2003
From: jean-louis.boulanger at hds.utc.fr (Boulanger Jean-Louis)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] do people want an ANTLR 3 blog?
In-Reply-To: <34F1586B-FCE9-11D7-9042-000A95891192@cs.usfca.edu>
References: <34F1586B-FCE9-11D7-9042-000A95891192@cs.usfca.edu>
Message-ID: <1065990956.3f89bb2ca3a79@mail.hds.utc.fr>

Hello,

 I am very interest by your writing.

BJL

Selon Terence Parr <parrt@cs.usfca.edu>:

> Howdy,
> 
> I write copious notes as I explore ideas and try out code etc...  Shall 
> I make a BLOG like system as I build ANTLR 3 so people can follow 
> along?  It will probably amount to me simply publishing my notes in 
> various files similar to the ANTLR cabal notes.
> 
> Do you think this is useful or for whatever reason a good thing to 
> "publish"?
> 
> Terence
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 




-------------------------------------------------
Laboratoire Heudiasyc. UMR CNRS 6599
http://www.hds.utc.fr

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Matthew.Ford at forward.com.au  Sun Oct 12 14:44:44 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] do people want an ANTLR 3 blog?
References: <34F1586B-FCE9-11D7-9042-000A95891192@cs.usfca.edu>
Message-ID: <001001c3910a$0cc5dca0$0400a8c0@NOTEBOOK>

Yes I would be interested in your Antlr 3 blog.

Anything other than POW (Plain Old Web) would have to run under Java for me
to use it.

matthew
----- Original Message ----- 
From: "Terence Parr" <parrt@cs.usfca.edu>
To: <antlr-interest@yahoogroups.com>
Sent: Monday, October 13, 2003 5:20 AM
Subject: [antlr-interest] do people want an ANTLR 3 blog?


> Howdy,
>
> I write copious notes as I explore ideas and try out code etc...  Shall
> I make a BLOG like system as I build ANTLR 3 so people can follow
> along?  It will probably amount to me simply publishing my notes in
> various files similar to the ANTLR cabal notes.
>
> Do you think this is useful or for whatever reason a good thing to
> "publish"?
>
> Terence
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Sun Oct 12 22:50:33 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Re: do people want an ANTLR 3 blog?
In-Reply-To: <34F1586B-FCE9-11D7-9042-000A95891192@cs.usfca.edu>
Message-ID: <bmdef9+fcp0@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> Howdy,
> 
> I write copious notes as I explore ideas and try out code etc...  Shall 
> I make a BLOG like system as I build ANTLR 3 so people can follow 
> along?

I presume you mean creating an ANTLR dev blog using existing blogging
software. Something like http://www.rollerweblogger.org/ ?

> It will probably amount to me simply publishing my notes in 
> various files similar to the ANTLR cabal notes.
> 
> Do you think this is useful or for whatever reason a good thing to 
> "publish"?

It would be useful particularly if it was immutable (i.e. entires
about previous decisions/trade-offs/ideas don't get overwitten). Blog
entries that represent changes to old decisions/ideas can simply
reference the previous entries via permalinks and then go on to
details the new thinking.....

Cheers,

Micheal

PS   Is this yours? - http://www.jroller.com/page/jguru


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Mon Oct 13 02:19:16 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] do people want an ANTLR 3 blog?
In-Reply-To: <34F1586B-FCE9-11D7-9042-000A95891192@cs.usfca.edu>
Message-ID: <000e01c3916b$13041a30$00cf090a@oddi.is>

Absolutely! Perhaps with the option of people adding comments to the
entries?

Arnar

> -----Original Message-----
> From: Terence Parr [mailto:parrt@cs.usfca.edu] 
> Sent: 12. okt?ber 2003 19:21
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] do people want an ANTLR 3 blog?
> 
> 
> Howdy,
> 
> I write copious notes as I explore ideas and try out code 
> etc...  Shall 
> I make a BLOG like system as I build ANTLR 3 so people can follow 
> along?  It will probably amount to me simply publishing my notes in 
> various files similar to the ANTLR cabal notes.
> 
> Do you think this is useful or for whatever reason a good thing to 
> "publish"?
> 
> Terence
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Anthony.Youngman at ECA-International.com  Mon Oct 13 02:58:40 2003
From: Anthony.Youngman at ECA-International.com (Anthony W Youngman)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] do people want an ANTLR 3 blog?
Message-ID: <C7FE35004D40FD45AA342991B88CE40409A81A@lnml1.eca-international.local>

Sounds like it might be a good idea to do with a wiki then.

iirc the wiki code is measured in tens or hundreds of lines of ?python, and archives a history. So Ter can run the main line, anyone else can edit in comments, and the whole history of everything is available as required.

Plus, it all runs in a web browser :-)

Cheers,
Wol

-----Original Message-----
From: Arnar Birgisson [mailto:arnarb@oddi.is] 
Sent: 13 October 2003 10:19
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] do people want an ANTLR 3 blog?


Absolutely! Perhaps with the option of people adding comments to the
entries?

Arnar

> -----Original Message-----
> From: Terence Parr [mailto:parrt@cs.usfca.edu] 
> Sent: 12. okt?ber 2003 19:21
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] do people want an ANTLR 3 blog?
> 
> 
> Howdy,
> 
> I write copious notes as I explore ideas and try out code 
> etc...  Shall 
> I make a BLOG like system as I build ANTLR 3 so people can follow 
> along?  It will probably amount to me simply publishing my notes in 
> various files similar to the ANTLR cabal notes.
> 
> Do you think this is useful or for whatever reason a good thing to 
> "publish"?
> 
> Terence
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 




***********************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

***********************************************************************************


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From phlucas at gmx.de  Mon Oct 13 03:41:11 2003
From: phlucas at gmx.de (Philipp Lucas)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] getNumberOfChildren
Message-ID: <14969.1066041671@www60.gmx.net>

Hi,

according to the 2.7.2 manual, an AST should implement

    int getNumberOfChildren()

Unfortunately, the C++ base implementation doesn't declare this in AST.hpp.
Am I looking in the wrong place or is this a genuine omission?

-- 
   

NEU F?R ALLE - GMX MediaCenter - f?r Fotos, Musik, Dateien...
Fotoalbum, File Sharing, MMS, Multimedia-Gru?, GMX FotoService

Jetzt kostenlos anmelden unter http://www.gmx.net

+++ GMX - die erste Adresse f?r Mail, Message, More! +++


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Mon Oct 13 05:15:42 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] getNumberOfChildren
In-Reply-To: <14969.1066041671@www60.gmx.net>; from phlucas@gmx.de on Mon, Oct 13, 2003 at 12:41:11PM +0200
References: <14969.1066041671@www60.gmx.net>
Message-ID: <20031013141542.A594@cs.utwente.nl>

On Mon, Oct 13, 2003 at 12:41:11PM +0200, Philipp Lucas wrote:
> according to the 2.7.2 manual, an AST should implement
> 
>     int getNumberOfChildren()
> 
> Unfortunately, the C++ base implementation doesn't declare this in AST.hpp.
> Am I looking in the wrong place or is this a genuine omission?

Is an omission. I'll fix it...

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Human beings, who are almost unique in having the ability to learn
   from the experience of others, are also remarkable for their apparent
         disinclination to do so. --- Douglas Adams, Last Chance to See


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Mon Oct 13 08:10:56 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] do people want an ANTLR 3 blog?
In-Reply-To: <34F1586B-FCE9-11D7-9042-000A95891192@cs.usfca.edu>
Message-ID: <20031013151056.52307.qmail@web20405.mail.yahoo.com>

+1

--- Terence Parr <parrt@cs.usfca.edu> wrote:
> Howdy,
> 
> I write copious notes as I explore ideas and try out
> code etc...  Shall 
> I make a BLOG like system as I build ANTLR 3 so
> people can follow 
> along?  It will probably amount to me simply
> publishing my notes in 
> various files similar to the ANTLR cabal notes.
> 
> Do you think this is useful or for whatever reason a
> good thing to 
> "publish"?
> 
> Terence
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator,
> http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email
> again!
> Co-founder, http://www.peerscope.com pure link
> sharing
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
The New Yahoo! Shopping - with improved product search
http://shopping.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Mon Oct 13 08:27:07 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] urgent problem with stack overflow, please help
In-Reply-To: <bm4q1k+im7k@eGroups.com>; from netminka@netscape.net on Thu, Oct 09, 2003 at 11:12:52PM -0000
References: <bm4q1k+im7k@eGroups.com>
Message-ID: <20031013172707.B1450@cs.utwente.nl>

On Thu, Oct 09, 2003 at 11:12:52PM -0000, netminka wrote:
> I am writing a commercial grade translator. The source language
> environment has tools which generate large initialization 
> procedures, I have seen up to 1100 lines. This causes stack overflow.
> We are using C# antlr. Stack overflow happens at about 600 lines.
> This happens in the first stage of parsing, not the tree parser.

You mean antlr itself gives a stack overflow or your generated parser does?
(think the latter, but just want to be sure)

Is it a genuine stack overflow or a stack corruption?

> The other odd thing about this is that the large procedures
> consist of assignment statements, one per line. That's it.
> No big expressions. The overflow is related strictly to the 
> number of lines in a procedure, not the complexity of the 
> expressions or anything else. The stack, as it is related to the
> grammar definition, is not growing with the size of the procedure. 
> I know the grammar rules are closing properly because I have run
> a great deal of code through this translator and I am intimately
> familiar with the parse traces. This makes me think that there
> may be a basic clean-up problem happening here..?

Where does the stack overflow happen? During the running of the parser?
During tree construction? Or ? During deletion of the parser object ? (if
that's something that happens in C# not very familiar with it) ? Try to
track down the thing triggering the overflow.

> Can anyone out there who is using antlr java or C++ comment on
> stack overflow problems for large source.  Is there one
> implementation platform that is better, do they all have this
> problem? Is this a .Net memory management problem? Comments

Very hard to tell what is happening with the amount of information you
give.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I think we better split up."
  "Good idea. We can do more damage that way."
  --- Ghostbusters


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Mon Oct 13 11:08:14 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Re: do people want an ANTLR 3 blog?
In-Reply-To: <bmdef9+fcp0@eGroups.com>
Message-ID: <36B2EEE0-FDA8-11D7-9042-000A95891192@cs.usfca.edu>


On Sunday, October 12, 2003, at 10:50 PM, micheal_jor wrote:

> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
>> Howdy,
>>
>> I write copious notes as I explore ideas and try out code etc...  
>> Shall
>> I make a BLOG like system as I build ANTLR 3 so people can follow
>> along?
>
> I presume you mean creating an ANTLR dev blog using existing blogging
> software. Something like http://www.rollerweblogger.org/ ?

I was thinking a text file ;)

>> It will probably amount to me simply publishing my notes in
>> various files similar to the ANTLR cabal notes.
>>
>> Do you think this is useful or for whatever reason a good thing to
>> "publish"?
>
> It would be useful particularly if it was immutable (i.e. entires
> about previous decisions/trade-offs/ideas don't get overwitten). Blog

Yeah, i was going to just put new entries at the top.

> entries that represent changes to old decisions/ideas can simply
> reference the previous entries via permalinks and then go on to
> details the new thinking.....
>
> PS   Is this yours? - http://www.jroller.com/page/jguru

Nope.

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Mon Oct 13 11:09:28 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] do people want an ANTLR 3 blog?
In-Reply-To: <000e01c3916b$13041a30$00cf090a@oddi.is>
Message-ID: <63035CD0-FDA8-11D7-9042-000A95891192@cs.usfca.edu>


On Monday, October 13, 2003, at 02:19 AM, Arnar Birgisson wrote:

> Absolutely! Perhaps with the option of people adding comments to the
> entries?

I was wondering about that.  I don't want to go whole hog BLOG at the 
moment just 'cause I want to host it at ANTLR.org and don't want to 
build or install software ;)  I'm thinking text file, but would gladly 
add comments sent to me via email.  I'm guessing there won't be *that* 
many comments.

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon Oct 13 11:13:01 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] do people want an ANTLR 3 blog?
Message-ID: <72C9789739C4214096AE945753B11EA36B1F97@mypxmail04.bco-home.com>

Discussion could still take place on the mailing list, with a summary posted
to Ter's text file.  What do you think, Ter?

Monty

-----Original Message-----
From: Terence Parr [mailto:parrt@cs.usfca.edu] 
Sent: Monday, October 13, 2003 11:09 AM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] do people want an ANTLR 3 blog?


On Monday, October 13, 2003, at 02:19 AM, Arnar Birgisson wrote:

> Absolutely! Perhaps with the option of people adding comments to the
> entries?

I was wondering about that.  I don't want to go whole hog BLOG at the 
moment just 'cause I want to host it at ANTLR.org and don't want to 
build or install software ;)  I'm thinking text file, but would gladly 
add comments sent to me via email.  I'm guessing there won't be *that* 
many comments.

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Mon Oct 13 11:15:38 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] do people want an ANTLR 3 blog?
In-Reply-To: <72C9789739C4214096AE945753B11EA36B1F97@mypxmail04.bco-home.com>
Message-ID: <20031013181538.23034.qmail@web20419.mail.yahoo.com>

My thought as well.

-Matt

--- mzukowski@yci.com wrote:
> Discussion could still take place on the mailing
> list, with a summary posted
> to Ter's text file.  What do you think, Ter?
> 
> Monty
> 
> -----Original Message-----
> From: Terence Parr [mailto:parrt@cs.usfca.edu] 
> Sent: Monday, October 13, 2003 11:09 AM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] do people want an
> ANTLR 3 blog?
> 
> 
> On Monday, October 13, 2003, at 02:19 AM, Arnar
> Birgisson wrote:
> 
> > Absolutely! Perhaps with the option of people
> adding comments to the
> > entries?
> 
> I was wondering about that.  I don't want to go
> whole hog BLOG at the 
> moment just 'cause I want to host it at ANTLR.org
> and don't want to 
> build or install software ;)  I'm thinking text
> file, but would gladly 
> add comments sent to me via email.  I'm guessing
> there won't be *that* 
> many comments.
> 
> Ter
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator,
> http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email
> again!
> Co-founder, http://www.peerscope.com pure link
> sharing
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
The New Yahoo! Shopping - with improved product search
http://shopping.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Mon Oct 13 11:20:41 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] do people want an ANTLR 3 blog?
In-Reply-To: <20031013181538.23034.qmail@web20419.mail.yahoo.com>
Message-ID: <F41F0FAD-FDA9-11D7-9042-000A95891192@cs.usfca.edu>

Yea, that sounds good...ok, posting now. :)

I also want to push StringTemplate out today :)

Ter

On Monday, October 13, 2003, at 11:15 AM, Matt Benson wrote:

> My thought as well.
>
> -Matt
>
> --- mzukowski@yci.com wrote:
>> Discussion could still take place on the mailing
>> list, with a summary posted
>> to Ter's text file.  What do you think, Ter?
>>
>> Monty
>>
>> -----Original Message-----
>> From: Terence Parr [mailto:parrt@cs.usfca.edu]
>> Sent: Monday, October 13, 2003 11:09 AM
>> To: antlr-interest@yahoogroups.com
>> Subject: Re: [antlr-interest] do people want an
>> ANTLR 3 blog?
>>
>>
>> On Monday, October 13, 2003, at 02:19 AM, Arnar
>> Birgisson wrote:
>>
>>> Absolutely! Perhaps with the option of people
>> adding comments to the
>>> entries?
>>
>> I was wondering about that.  I don't want to go
>> whole hog BLOG at the
>> moment just 'cause I want to host it at ANTLR.org
>> and don't want to
>> build or install software ;)  I'm thinking text
>> file, but would gladly
>> add comments sent to me via email.  I'm guessing
>> there won't be *that*
>> many comments.
>>
>> Ter
>> --
>> Professor Comp. Sci., University of San Francisco
>> Creator, ANTLR Parser Generator,
>> http://www.antlr.org
>> Co-founder, http://www.jguru.com
>> Co-founder, http://www.knowspam.net enjoy email
>> again!
>> Co-founder, http://www.peerscope.com pure link
>> sharing
>>
>>
>>
>>
>>
>>
>> Your use of Yahoo! Groups is subject to
>> http://docs.yahoo.com/info/terms/
>>
>>
>>
>>
>> Your use of Yahoo! Groups is subject to
>> http://docs.yahoo.com/info/terms/
>>
>>
>
>
> __________________________________
> Do you Yahoo!?
> The New Yahoo! Shopping - with improved product search
> http://shopping.yahoo.com
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Mon Oct 13 11:24:15 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] do people want an ANTLR 3 blog?
In-Reply-To: <F41F0FAD-FDA9-11D7-9042-000A95891192@cs.usfca.edu>
Message-ID: <20031013182415.54052.qmail@web20414.mail.yahoo.com>

My next comment was going to involve my impatience to
see this proposed blog, so that's good...

I might add the obvious qualification that a
discussion only be added to the blog where it changes
the paradigm or clarifies something that promises to
otherwise generate a FAQ (singular)...


--- Terence Parr <parrt@cs.usfca.edu> wrote:
> Yea, that sounds good...ok, posting now. :)
> 
> I also want to push StringTemplate out today :)
> 
> Ter
> 
> On Monday, October 13, 2003, at 11:15 AM, Matt
> Benson wrote:
> 
> > My thought as well.
> >
> > -Matt
> >
> > --- mzukowski@yci.com wrote:
> >> Discussion could still take place on the mailing
> >> list, with a summary posted
> >> to Ter's text file.  What do you think, Ter?
> >>
> >> Monty
> >>
> >> -----Original Message-----
> >> From: Terence Parr [mailto:parrt@cs.usfca.edu]
> >> Sent: Monday, October 13, 2003 11:09 AM
> >> To: antlr-interest@yahoogroups.com
> >> Subject: Re: [antlr-interest] do people want an
> >> ANTLR 3 blog?
> >>
> >>
> >> On Monday, October 13, 2003, at 02:19 AM, Arnar
> >> Birgisson wrote:
> >>
> >>> Absolutely! Perhaps with the option of people
> >> adding comments to the
> >>> entries?
> >>
> >> I was wondering about that.  I don't want to go
> >> whole hog BLOG at the
> >> moment just 'cause I want to host it at ANTLR.org
> >> and don't want to
> >> build or install software ;)  I'm thinking text
> >> file, but would gladly
> >> add comments sent to me via email.  I'm guessing
> >> there won't be *that*
> >> many comments.
> >>
> >> Ter
> >> --
> >> Professor Comp. Sci., University of San Francisco
> >> Creator, ANTLR Parser Generator,
> >> http://www.antlr.org
> >> Co-founder, http://www.jguru.com
> >> Co-founder, http://www.knowspam.net enjoy email
> >> again!
> >> Co-founder, http://www.peerscope.com pure link
> >> sharing
> >>
> >>
> >>
> >>
> >>
> >>
> >> Your use of Yahoo! Groups is subject to
> >> http://docs.yahoo.com/info/terms/
> >>
> >>
> >>
> >>
> >> Your use of Yahoo! Groups is subject to
> >> http://docs.yahoo.com/info/terms/
> >>
> >>
> >
> >
> > __________________________________
> > Do you Yahoo!?
> > The New Yahoo! Shopping - with improved product
> search
> > http://shopping.yahoo.com
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/
> >
> >
> >
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator,
> http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email
> again!
> Co-founder, http://www.peerscope.com pure link
> sharing
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
The New Yahoo! Shopping - with improved product search
http://shopping.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Mon Oct 13 11:52:34 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] do people want an ANTLR 3 blog?
In-Reply-To: <20031013182415.54052.qmail@web20414.mail.yahoo.com>
Message-ID: <6876B55A-FDAE-11D7-9042-000A95891192@cs.usfca.edu>


On Monday, October 13, 2003, at 11:24 AM, Matt Benson wrote:

> My next comment was going to involve my impatience to
> see this proposed blog, so that's good...
>
> I might add the obvious qualification that a
> discussion only be added to the blog where it changes
> the paradigm or clarifies something that promises to
> otherwise generate a FAQ (singular)...

Sounds good.  Prepare for the deluge folks ;)  Should have done this 
long ago...

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Mon Oct 13 12:27:00 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] ANTLR Web Logs posted
Message-ID: <379FCB00-FDB3-11D7-9042-000A95891192@cs.usfca.edu>

Howdy,

Here are the blogs (organized by concept and reverse ordered by entry 
date):

http://www.antlr.org/blog/index.tml

Hope they're helpful. :)

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Mon Oct 13 12:33:00 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Re: do people want an ANTLR 3 blog?
In-Reply-To: <6876B55A-FDAE-11D7-9042-000A95891192@cs.usfca.edu>
Message-ID: <bmeulc+dm7k@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> 
> On Monday, October 13, 2003, at 11:24 AM, Matt Benson wrote:
> 
> > My next comment was going to involve my impatience to
> > see this proposed blog, so that's good...
> >
> > I might add the obvious qualification that a
> > discussion only be added to the blog where it changes
> > the paradigm or clarifies something that promises to
> > otherwise generate a FAQ (singular)...
> 
> Sounds good.  Prepare for the deluge folks ;)  Should have done this 
> long ago...

Ter,

I've read your comments on the issue but I still think that a blog is
the appropriate tool for this exercise. There are many things that
can't be expressed clearly in a text file.

If you'd rather not install blogging software, how about using a
blog-hosting service?. Many are free.

Cheers,

Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Mon Oct 13 14:31:55 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Re: do people want an ANTLR 3 blog?
In-Reply-To: <bmeulc+dm7k@eGroups.com>
Message-ID: <AB44523C-FDC4-11D7-9042-000A95891192@cs.usfca.edu>


On Monday, October 13, 2003, at 12:33 PM, micheal_jor wrote:

> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
>>
>> On Monday, October 13, 2003, at 11:24 AM, Matt Benson wrote:
>>
>>> My next comment was going to involve my impatience to
>>> see this proposed blog, so that's good...
>>>
>>> I might add the obvious qualification that a
>>> discussion only be added to the blog where it changes
>>> the paradigm or clarifies something that promises to
>>> otherwise generate a FAQ (singular)...
>>
>> Sounds good.  Prepare for the deluge folks ;)  Should have done this
>> long ago...
>
> Ter,
>
> I've read your comments on the issue but I still think that a blog is
> the appropriate tool for this exercise. There are many things that
> can't be expressed clearly in a text file.

I agree, but I'm kinda hoping to keep everything hosted on a site I 
control.  Simple blogging is easy to write...I just need a student to 
do it ;)

Ter

>
> If you'd rather not install blogging software, how about using a
> blog-hosting service?. Many are free.
>
> Cheers,
>
> Micheal
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ray at waldin.net  Mon Oct 13 15:18:01 2003
From: ray at waldin.net (Ray Waldin)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Re: Java Cross Referencer
In-Reply-To: <1CABD0F0-FDA8-11D7-9042-000A95891192@cs.usfca.edu>
References: <1CABD0F0-FDA8-11D7-9042-000A95891192@cs.usfca.edu>
Message-ID: <3F8B2499.8060707@waldin.net>

Terence Parr wrote:

>On Monday, October 13, 2003, at 08:55 AM, Jim O'Connor wrote:
>  
>
>>Our software needs to translate this information into some coherent 
>>form and query the results.  We have some test code but would rather 
>>not spend tons of time thinking up strange Java resolution cases.  Any 
>>thoughts on places to find example code? I realize there are lots of 
>>places to find code.  Succinct examples that stretch the breadth of 
>>Java resolution is desired.
>>    
>>
>
>Well, there may be some test suites out there.  Not sure.
>
>Cool...so the interface will trigger "events" when it sees a reference 
>etc... :)
>  
>
I've found the IBM Jacks project to be a great starting point:

http://oss.software.ibm.com/developerworks/oss/cvs/jikes/~checkout~/jacks/jacks.html

Although there are some runtime tests intended to test how a compiler 
compiles based on how the compiled output runs, most tests are 
compile-time test cases that proved quite useful as a basis for Java 
cross reference tests, not to mention basic Java parser tests.  
Unfortunately, their scripts are written in TCL, but if you're 
comfortable hacking TCL or plan to just reuse the source files, Jacks is 
a nice starting point.

Hope this helps.

-Ray


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031013/356fbee6/attachment.html
From parrt at cs.usfca.edu  Mon Oct 13 16:19:14 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] announcing 1.0.2 release of StringTemplate template engine
Message-ID: <A8DC06A0-FDD3-11D7-9042-000A95891192@cs.usfca.edu>

Howdy folks,

Well, I finally managed to package up my StringTemplate template engine:

http://www.antlr.org/stringtemplate/index.tml

This is the first public release (1.0.2) and is used to generate pages 
in all the sites listed in my signature at the bottom of this email. :) 
  (actually jGuru used an earlier version).

StringTemplate is released under the BSD license ("do what you want 
with the code, but don't sue me"). :)

I'm almost done with some papers describing my strict principles of 
separation of model-view etc...  Further, this template engine will 
form the core of some really groovy source-to-source translation 
"output grammar" stuff for ANTLR.

StringTemplate is a really good example (umm...if I do say so myself) 
of how to use ANTLR to build an interpreter (ANTLR converts templates 
into text + trees.  To execute them, a tree parser walks the trees and 
executes the actions, spitting out text etc...).

StringTemplate Acknowledgements:

Tom Burns (CEO jGuru.com) co-designed StringTemplate and listened to me 
think out loud incessantly.  I would also like to thank Monty Zukowski 
for planting the template "meme" in my head back in the mid 1990's.  
Loring Craymer and Monty both are helping me hone these ideas for use 
in source-to-source language translation.

Best regards,
Terence
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sumav_99 at yahoo.com  Mon Oct 13 21:25:53 2003
From: sumav_99 at yahoo.com (Suma Venkatesh)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] announcing 1.0.2 release of StringTemplate template engine
In-Reply-To: <A8DC06A0-FDD3-11D7-9042-000A95891192@cs.usfca.edu>
Message-ID: <20031014042553.91103.qmail@web40610.mail.yahoo.com>

Hi
   Terence and jim,

  Does this mean java cross referencer can be directly used to manipulate java source
code. I mean like for obfuscation techniques where you rename variables , change loop
constructs etc ??
Is is ready for direct use as an API in java programs.

Let me know on this.

thanks,
suma

--- Terence Parr <parrt@cs.usfca.edu> wrote:
> Howdy folks,
> 
> Well, I finally managed to package up my StringTemplate template engine:
> 
> http://www.antlr.org/stringtemplate/index.tml
> 
> This is the first public release (1.0.2) and is used to generate pages 
> in all the sites listed in my signature at the bottom of this email. :) 
>   (actually jGuru used an earlier version).
> 
> StringTemplate is released under the BSD license ("do what you want 
> with the code, but don't sue me"). :)
> 
> I'm almost done with some papers describing my strict principles of 
> separation of model-view etc...  Further, this template engine will 
> form the core of some really groovy source-to-source translation 
> "output grammar" stuff for ANTLR.
> 
> StringTemplate is a really good example (umm...if I do say so myself) 
> of how to use ANTLR to build an interpreter (ANTLR converts templates 
> into text + trees.  To execute them, a tree parser walks the trees and 
> executes the actions, spitting out text etc...).
> 
> StringTemplate Acknowledgements:
> 
> Tom Burns (CEO jGuru.com) co-designed StringTemplate and listened to me 
> think out loud incessantly.  I would also like to thank Monty Zukowski 
> for planting the template "meme" in my head back in the mid 1990's.  
> Loring Craymer and Monty both are helping me hone these ideas for use 
> in source-to-source language translation.
> 
> Best regards,
> Terence
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
The New Yahoo! Shopping - with improved product search
http://shopping.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ari.steinberg at embarcadero-ca.com  Tue Oct 14 08:02:37 2003
From: ari.steinberg at embarcadero-ca.com (aristeinberg)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] multibyte character sets
Message-ID: <bmh36d+k991@eGroups.com>

Hi, 

Is there an option or any other way to get ANTLR to work with 
multibyte character sets?  I have a grammar that works fine except 
if you change the language ( on win 2000 ) from English to Hangul ( 
Korean ) and try to pass this into the parser, in which case it 
crashes the app.

Thanks, 

Ari 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Tue Oct 14 09:08:13 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Re: multibyte character sets
In-Reply-To: <bmh36d+k991@eGroups.com>
Message-ID: <bmh71d+p7ll@eGroups.com>

--- In antlr-interest@yahoogroups.com, "aristeinberg"
<ari.steinberg@e...> wrote:
> Hi, 
> 
> Is there an option or any other way to get ANTLR to work with 
> multibyte character sets?  I have a grammar that works fine except 
> if you change the language ( on win 2000 ) from English to Hangul ( 
> Korean ) and try to pass this into the parser, in which case it 
> crashes the app.

You didn't mention the implementation language of your Lexer/Parser
(ANTLR supports Java, C++ and C#). In any case the answer would be
that ANTLR supports Unicode. 

I think that UTF-8 is the expected encoding so you may have to ensure
your input files are in UTF-8 or are converted into a UTF-8 string buffer.

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ari.steinberg at embarcadero-ca.com  Tue Oct 14 10:23:17 2003
From: ari.steinberg at embarcadero-ca.com (aristeinberg)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Re: multibyte character sets
In-Reply-To: <bmh71d+p7ll@eGroups.com>
Message-ID: <bmhbe5+pdib@eGroups.com>

It is a C++ app and we are not compiling in unicode.  If I compile 
using ASCII, will the parser still accept UTF-8?

Thanks,
Ari

--- In antlr-interest@yahoogroups.com, "micheal_jor" 
<open.zone@v...> wrote:
> --- In antlr-interest@yahoogroups.com, "aristeinberg"
> <ari.steinberg@e...> wrote:
> > Hi, 
> > 
> > Is there an option or any other way to get ANTLR to work with 
> > multibyte character sets?  I have a grammar that works fine 
except 
> > if you change the language ( on win 2000 ) from English to 
Hangul ( 
> > Korean ) and try to pass this into the parser, in which case it 
> > crashes the app.
> 
> You didn't mention the implementation language of your Lexer/Parser
> (ANTLR supports Java, C++ and C#). In any case the answer would be
> that ANTLR supports Unicode. 
> 
> I think that UTF-8 is the expected encoding so you may have to 
ensure
> your input files are in UTF-8 or are converted into a UTF-8 string 
buffer.
> 
> Cheers,
> 
> Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Tue Oct 14 11:03:44 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] announcing 1.0.2 release of StringTemplate template engine
In-Reply-To: <20031014042553.91103.qmail@web40610.mail.yahoo.com>
Message-ID: <C0698314-FE70-11D7-9042-000A95891192@cs.usfca.edu>


On Monday, October 13, 2003, at 09:25 PM, Suma Venkatesh wrote:

> Hi
>    Terence and jim,
>
>   Does this mean java cross referencer can be directly used to 
> manipulate java source
> code. I mean like for obfuscation techniques where you rename 
> variables , change loop
> constructs etc ??
> Is is ready for direct use as an API in java programs.
>
> Let me know on this.

Well, you could combine the string template stuff with the 
cross-referencer to obfuscate, yes.

Terence
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sumav_99 at yahoo.com  Tue Oct 14 11:51:28 2003
From: sumav_99 at yahoo.com (Suma Venkatesh)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] announcing 1.0.2 release of StringTemplate template engine
In-Reply-To: <C0698314-FE70-11D7-9042-000A95891192@cs.usfca.edu>
Message-ID: <20031014185128.1624.qmail@web40607.mail.yahoo.com>

hey thanks will try it out and let  know.

thanks,
suma
--- Terence Parr <parrt@cs.usfca.edu> wrote:
> 
> On Monday, October 13, 2003, at 09:25 PM, Suma Venkatesh wrote:
> 
> > Hi
> >    Terence and jim,
> >
> >   Does this mean java cross referencer can be directly used to 
> > manipulate java source
> > code. I mean like for obfuscation techniques where you rename 
> > variables , change loop
> > constructs etc ??
> > Is is ready for direct use as an API in java programs.
> >
> > Let me know on this.
> 
> Well, you could combine the string template stuff with the 
> cross-referencer to obfuscate, yes.
> 
> Terence
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
The New Yahoo! Shopping - with improved product search
http://shopping.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Tue Oct 14 15:11:39 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Re: multibyte character sets
In-Reply-To: <bmhbe5+pdib@eGroups.com>; from ari.steinberg@embarcadero-ca.com on Tue, Oct 14, 2003 at 05:23:17PM -0000
References: <bmh71d+p7ll@eGroups.com> <bmhbe5+pdib@eGroups.com>
Message-ID: <20031015001139.B7420@cs.utwente.nl>

On Tue, Oct 14, 2003 at 05:23:17PM -0000, aristeinberg wrote:
> It is a C++ app and we are not compiling in unicode.  If I compile 
> using ASCII, will the parser still accept UTF-8?

Atm it's not possible to have a full featured parser in C++ with unicode
support. Unless you want to do a lot of hacking/debugging. I refer to the
archive for many previous discussions. 

The support lib needs a rewrite before that will work. UTF-8 will probably
work very bad. You need to modify the support lib to use wchar's and
wstrings it's been done but you may run into trouble in places. The
analysis engine supports it the support lib does not.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
   Words fly like arrows
      as if we knew what was right and wrong. --- Chuang Tsu


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mda at discerning.com  Wed Oct 15 09:56:28 2003
From: mda at discerning.com (amark17)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] antlr xquery grammar?
Message-ID: <bmju7s+phfo@eGroups.com>

I found a post with no reply last december from howardk (who i believe
has since been using jjtree):

http://groups.yahoo.com/group/antlr-interest/message/6896

has anyone managed a working xquery grammar with antlr?
what is the issue with lexical states?

-mda


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mda at discerning.com  Wed Oct 15 21:51:17 2003
From: mda at discerning.com (Mark D. Anderson)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Re: announcing 1.0.2 release of StringTemplate template engine
In-Reply-To: <A8DC06A0-FDD3-11D7-9042-000A95891192@cs.usfca.edu>
Message-ID: <bml845+237r@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> StringTemplate is a really good example (umm...if I do say so myself) 
> of how to use ANTLR to build an interpreter (ANTLR converts templates 
> into text + trees.  To execute them, a tree parser walks the trees and 
> executes the actions, spitting out text etc...).

I was hoping it might also be a really good example of how to do
switching of token streams as a way to implement lexical states for
embedded languages.
That is, along the lines of  the "multilex" example in the antlr
distribution.

But instead I find a hand-written implementation in StringTemplate.java
with  charAt(cp) ... cp++ etc.
Surely this does not set a good example for impressionable young
people? :)

In particular, for the cases where StringTemplate is going to be used on
html templates, it'd be nice to be able to be able to offer validation of
the html chunks.

I don't see how delimeter escaping is done btw.

-mda


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Wed Oct 15 22:20:20 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Re: announcing 1.0.2 release of StringTemplate template engine
In-Reply-To: <bml845+237r@eGroups.com>
Message-ID: <6F8E450A-FF98-11D7-8DB8-000393BB647E@cs.usfca.edu>


On Wednesday, October 15, 2003, at 09:51  PM, Mark D. Anderson wrote:

> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
>> StringTemplate is a really good example (umm...if I do say so myself)
>> of how to use ANTLR to build an interpreter (ANTLR converts templates
>> into text + trees.  To execute them, a tree parser walks the trees and
>> executes the actions, spitting out text etc...).
>
> I was hoping it might also be a really good example of how to do
> switching of token streams as a way to implement lexical states for
> embedded languages.
> That is, along the lines of  the "multilex" example in the antlr
> distribution.
>
> But instead I find a hand-written implementation in StringTemplate.java
> with  charAt(cp) ... cp++ etc.
> Surely this does not set a good example for impressionable young
> people? :)

The problem is that the delimiters are not fixed (even in length).  A 
dynamic sniffer has to look for it given zero restrictions on the 
delimiters...I'd be happy to do this more formally if you can tell me 
how to do it in ANTLR ;)

I think you'll find that the hand-built stuff only chunks the template 
and then the real ANTLR magic happens inside the $...$ chunks. :)  Did 
you see the two grammars and all that support code in 
org.antlr.language.*?  That is really what i'm talking about. :)

> In particular, for the cases where StringTemplate is going to be used 
> on
> html templates, it'd be nice to be able to be able to offer validation 
> of
> the html chunks.

That sounds like something another program can/should do...

> I don't see how delimeter escaping is done btw.

Yeah, sorry about that...a student asked me that yesterday too ;)  I 
don't know what to do when the delimiters can be *anything*.  Can you 
suggest something?

Thanks for looking at StringTemplate :)

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com link sharing, pure-n-simple




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rodrigor at in-fusio.com  Thu Oct 16 08:04:38 2003
From: rodrigor at in-fusio.com (rodrigo reyes)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] SL_COMMENT in java.g
Message-ID: <C5140F3D620F9F44AA9F84239D1564C901B2410A@email.int.in-fusio.com>

Dear All,

I had an issue with the following rule of the java grammar (java.g) bundled
with antlr:

SL_COMMENT
	:	"//"
		(~('\n'|'\r'))* ('\n'|'\r'('\n')?)
		{$setType(Token.SKIP); newline();}
	;

This is the rule for single-line comments, but it fails on parsing java
source code which ends with a single-line comment but no carriage-return.
This case is part of the java language, but the parser seems to loop
forever.

I fixed the rule like this:

SL_COMMENT
	:	"//"
		(~('\n'|'\r')
                {
                     if (LA(1) == EOF_CHAR) 
                            break; 
                }
           )* 
           ('\n'|'\r'('\n')?)?  
           { $setType(Token.SKIP); newline(); }
	;

It works, but I am not really satisfied with this solution. 

Is there a reason why the EOF is not a useable character for the lexer ? The
solution would have been straightforward if only this EOF char had been
available... 

Alternatively, if someone has a solution which does not involve adding java
code in the lexer, I'd be happy to use it ;-)

Bests,
Rodrigo

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Thu Oct 16 08:44:08 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Re:  SL_COMMENT in java.g
Message-ID: <20031016154408.16694.qmail@web20422.mail.yahoo.com>

I accidentally deleted the original message, but at
one time I had modified the lexer grammar to make the
line terminators optional on this token, seemingly
without ill effect; something like:

SL_COMMENT
	:	"//"
		(~('\n'|'\r'))* ('\n'|'\r'('\n')?)?
		{$setType(Token.SKIP); newline();}
	;



Does anyone see a problem with this approach?

-Matt

__________________________________
Do you Yahoo!?
The New Yahoo! Shopping - with improved product search
http://shopping.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mda at discerning.com  Thu Oct 16 09:56:12 2003
From: mda at discerning.com (Mark D. Anderson)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Re: announcing 1.0.2 release of StringTemplate template engine
In-Reply-To: <6F8E450A-FF98-11D7-8DB8-000393BB647E@cs.usfca.edu>
Message-ID: <bmmijc+h4l2@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> > In particular, for the cases where StringTemplate is going to be used 
> > on
> > html templates, it'd be nice to be able to be able to offer validation 
> > of
> > the html chunks.
> 
> That sounds like something another program can/should do...

Possibly. But in general, individual chunks won't be valid. And neither
will be a whole file, if validated as xml or html. 
Validation is a problem even with xslt, where it is all xml (you can
easily check well-formedness of course, but validity is hard).

Depending on where the delimeters are placed, and whether things like
less-than and ampersand are used, it might still be possible to validate
the whole file as xml or html.

In general, one needs a grammer that includes the fact that there is switching
going on.

> 
> > I don't see how delimeter escaping is done btw.
> 
> Yeah, sorry about that...a student asked me that yesterday too ;)  I 
> don't know what to do when the delimiters can be *anything*.  Can you 
> suggest something?

You could have two more options, for escaped_open and escaped_close strings.
Or you could have a single option for escaping="double" or escaping="backslash",
those two being the two most common ways to do escaping.

-mda



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Thu Oct 16 10:49:05 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] Re: announcing 1.0.2 release of StringTemplate template engine
In-Reply-To: <bmmijc+h4l2@eGroups.com>
Message-ID: <09025262-0001-11D8-9822-000A95891192@cs.usfca.edu>


On Thursday, October 16, 2003, at 09:56 AM, Mark D. Anderson wrote:
>>
>> Yeah, sorry about that...a student asked me that yesterday too ;)  I
>> don't know what to do when the delimiters can be *anything*.  Can you
>> suggest something?
>
> You could have two more options, for escaped_open and escaped_close 
> strings.
> Or you could have a single option for escaping="double" or 
> escaping="backslash",
> those two being the two most common ways to do escaping.

Heh, very good idea.  If they can specify the delimiters, let them 
specify the escapes!  Cool!  Added to my notes.

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From b.knotwell at f5.com  Thu Oct 16 10:41:36 2003
From: b.knotwell at f5.com (Brad)
Date: Mon Dec 20 16:16:01 2004
Subject: [antlr-interest] code analysis tool
In-Reply-To: <bmmijc+h4l2@eGroups.com>
References: <bmmijc+h4l2@eGroups.com>
Message-ID: <1066326096.3837.21.camel@bradwkstation>

Hello all--

Disclaimer:  I'm new to antlr and, though I've done some research, not
exactly familiar with methodologies for solving the problem I'd like to
solve.

Problem:  I'd like to create a tool that can be used to search for
common C coding errors (eg unchecked mallocs or fopens, memory leaks
under error conditions, malloc(strlen(myString + 1)) etc).  Furthermore,
I'm much more concerned about easily adding new checks than I am
efficiency.

My current high-level strategy (again, this is the first time I've
thought about this so I might be way off).

  1) use one of antlr's C tree parsers (specifically, GNUCTreeParser) to
create an abstract syntax tree.
  2) have each check traverse the tree to find and display instances of
its issue.

A coupla small questions:

  1) does this sound like a reasonable approach (AKA do I understand the
utility of tree parsers)?
  2) how difficult would you rate a project like this?
  3) how would you structure things to make adding new checks simple?

If these are inappropriate for this forum, lemme know.

Thanks.

-- 
Brad <b.knotwell@f5.com>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Oct 16 11:55:33 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] code analysis tool
Message-ID: <72C9789739C4214096AE945753B11EA36B1FC4@mypxmail04.bco-home.com>

As the author of GNUCTreeParser and friends I'd love to see a little
application like this out there.  Are you planning to open source it?  

FYI the gcc toolkit was originally written for Cisco to allow them to do
custom analyses like this.

Tree parsers match syntax and can only wildcard within limitations of the
grammar.  Semantics will require actions.  The best thing will probably be
to try some out.  

For instance, syntactically malloc() is just another function call.  Within
the function call rule you'll need to inspect the text to see if it is a
malloc() and go from there.

There are also findAll() and findAllPartial() methods and such which will
match trees against trees and this might help finding things like copied &
pasted code if you know what you are looking for.

After you do a few checks by hand you'll be in a much better position to
refactor and make adding new checks easy.

There are also existing tools that do this kind of stuff, of course, but
where's the fun in that?  ;)

Monty

-----Original Message-----
From: Brad [mailto:b.knotwell@f5.com] 
Sent: Thursday, October 16, 2003 10:42 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] code analysis tool

Hello all--

Disclaimer:  I'm new to antlr and, though I've done some research, not
exactly familiar with methodologies for solving the problem I'd like to
solve.

Problem:  I'd like to create a tool that can be used to search for
common C coding errors (eg unchecked mallocs or fopens, memory leaks
under error conditions, malloc(strlen(myString + 1)) etc).  Furthermore,
I'm much more concerned about easily adding new checks than I am
efficiency.

My current high-level strategy (again, this is the first time I've
thought about this so I might be way off).

  1) use one of antlr's C tree parsers (specifically, GNUCTreeParser) to
create an abstract syntax tree.
  2) have each check traverse the tree to find and display instances of
its issue.

A coupla small questions:

  1) does this sound like a reasonable approach (AKA do I understand the
utility of tree parsers)?
  2) how difficult would you rate a project like this?
  3) how would you structure things to make adding new checks simple?

If these are inappropriate for this forum, lemme know.

Thanks.

-- 
Brad <b.knotwell@f5.com>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From skintali at sarvega.com  Thu Oct 16 12:49:08 2003
From: skintali at sarvega.com (Kintali Shiva Prasad)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] code analysis tool
In-Reply-To: <1066326096.3837.21.camel@bradwkstation>
References: <bmmijc+h4l2@eGroups.com> <1066326096.3837.21.camel@bradwkstation>
Message-ID: <3F8EF634.8020600@sarvega.com>

I worked on a similar project. Here are my experiences...

>A coupla small questions:
>
>  1) does this sound like a reasonable approach (AKA do I understand the
>utility of tree parsers)?
>  2) how difficult would you rate a project like this?
>
Depends on the feature set.
Look at http://www.grammatech.com/products/codesurfer/overview.html

>  3) how would you structure things to make adding new checks simple?
>
Define 'properties' for each AST node.
You can categorize the properties as initialization, checks etc.,
"annotate" each AST with its valid properties.

You can have three passes...

1) Structural analysis and identifying 'possible' properties.
2) Identifying dependencies across nodes.
3) Property checking and error reporting.

I mentioned second-pass to take care of the cases where two nodes
suffer from the same error. i.e., the error can be rectified by
modifying one of the nodes.

Eg :
p = new Type[10];
...
...
delete p;


Thanks & Regards
-Shiva



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Oct 16 14:40:35 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] code analysis tool
Message-ID: <72C9789739C4214096AE945753B11EA36B1FC6@mypxmail04.bco-home.com>

Shiva,

Was that done with antlr?  With the gcc toolkit?  Would you put it on the
antlr.org showcase if it was?

Thanks,

Monty

-----Original Message-----
From: Kintali Shiva Prasad [mailto:skintali@sarvega.com] 
Sent: Thursday, October 16, 2003 12:49 PM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] code analysis tool

I worked on a similar project. Here are my experiences...

>A coupla small questions:
>
>  1) does this sound like a reasonable approach (AKA do I understand the
>utility of tree parsers)?
>  2) how difficult would you rate a project like this?
>
Depends on the feature set.
Look at http://www.grammatech.com/products/codesurfer/overview.html

>  3) how would you structure things to make adding new checks simple?
>
Define 'properties' for each AST node.
You can categorize the properties as initialization, checks etc.,
"annotate" each AST with its valid properties.

You can have three passes...

1) Structural analysis and identifying 'possible' properties.
2) Identifying dependencies across nodes.
3) Property checking and error reporting.

I mentioned second-pass to take care of the cases where two nodes
suffer from the same error. i.e., the error can be rectified by
modifying one of the nodes.

Eg :
p = new Type[10];
...
...
delete p;


Thanks & Regards
-Shiva



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From skintali at sarvega.com  Thu Oct 16 14:59:09 2003
From: skintali at sarvega.com (Kintali Shiva Prasad)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] code analysis tool
In-Reply-To: <72C9789739C4214096AE945753B11EA36B1FC6@mypxmail04.bco-home.com>
References: <72C9789739C4214096AE945753B11EA36B1FC6@mypxmail04.bco-home.com>
Message-ID: <3F8F14AD.5030001@sarvega.com>

Hi Monty,

I did not use antlr and gcc toolkit.
I used an existing parser, hand-written ASTs,
and enhanced the front-end for compile-time code analysis.

Using GNUCTreeParser makes sense now.

Thanks !
-Shiva

mzukowski@yci.com wrote:

>Shiva,
>
>Was that done with antlr?  With the gcc toolkit?  Would you put it on the
>antlr.org showcase if it was?
>
>Thanks,
>
>Monty
>  
>



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Oct 16 15:03:03 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] code analysis tool
Message-ID: <72C9789739C4214096AE945753B11EA36B1FC9@mypxmail04.bco-home.com>

Thanks, it looks like a nice piece of work.

Monty

-----Original Message-----
From: Kintali Shiva Prasad [mailto:skintali@sarvega.com] 
Sent: Thursday, October 16, 2003 2:59 PM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] code analysis tool

Hi Monty,

I did not use antlr and gcc toolkit.
I used an existing parser, hand-written ASTs,
and enhanced the front-end for compile-time code analysis.

Using GNUCTreeParser makes sense now.

Thanks !
-Shiva

mzukowski@yci.com wrote:

>Shiva,
>
>Was that done with antlr?  With the gcc toolkit?  Would you put it on the
>antlr.org showcase if it was?
>
>Thanks,
>
>Monty
>  
>



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From nico123 at adinet.com.uy  Thu Oct 16 18:22:42 2003
From: nico123 at adinet.com.uy (Nico)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] AST.getType() Question
Message-ID: <001401c3944d$32181ea0$0200a8c0@viper2000>

Hi all.

AST.getType() returns an int according to the created tokenTypes. 
Is there any way to return the String Type Name of the Token, instead of the representing int?
I mean, I want the String name of the Token Type, not the Name of the node.

regards
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031016/a7c86387/attachment.html
From arnarb at oddi.is  Fri Oct 17 03:09:32 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] AST.getType() Question
In-Reply-To: <001401c3944d$32181ea0$0200a8c0@viper2000>
Message-ID: <001001c39496$c32e9100$00cf090a@oddi.is>

Both Parser and TreeParser have a function "string getTokenName(int)".
You should be able to use that.
 
Arnar

-----Original Message-----
From: Nico [mailto:nico123@adinet.com.uy] 
Sent: 17. okt?ber 2003 01:23
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] AST.getType() Question


Hi all.
 
AST.getType() returns an int according to the created tokenTypes. 
Is there any way to return the String Type Name of the Token, instead of
the representing int?
I mean, I want the String name of the Token Type, not the Name of the
node.
 
regards
 

Your use of Yahoo! Groups is subject to the Yahoo!
<http://docs.yahoo.com/info/terms/> Terms of Service. 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031017/a707e004/attachment.html
From rodrigor at in-fusio.com  Fri Oct 17 05:15:19 2003
From: rodrigor at in-fusio.com (rodrigo reyes)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Re:  SL_COMMENT in java.g
Message-ID: <C5140F3D620F9F44AA9F84239D1564C901B2410E@email.int.in-fusio.com>

Hi Matt,

> I accidentally deleted the original message, but at
> one time I had modified the lexer grammar to make the
> line terminators optional on this token, seemingly
> without ill effect; something like:
> SL_COMMENT
> 	:	"//"
> 		(~('\n'|'\r'))* ('\n'|'\r'('\n')?)?
> 		{$setType(Token.SKIP); newline();}
> 	;
> Does anyone see a problem with this approach?

In my first attempt at solving the problem, I just removed the match for
('\n'|'\r'('\n')?), so that the rule would match anything but (\n|\r) after
the "//". I assumed the new lines would just be handled by the WS rule,
which already matches well the newlines. 

Unfortunately, neither my first solution or the one you present (which are
quite similar) work (at least for me). The parser still loops forever on the
source file I use to test this, which is a source from a real project, and
which compiles fine with javac.

However, now I really don't see the point of keeping the newline matching at
the end of the rule, so I propose this, which is even simpler (as stated
above, the newline thing is matched by the WS rule):

SL_COMMENT
	:	"//"
		(~('\n'|'\r')
                {
                     if (LA(1) == EOF_CHAR) 
                            break; 
                }
           )* 
	;


Bests,
Rodrigo

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Fri Oct 17 12:13:22 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Re:  SL_COMMENT in java.g
In-Reply-To: <C5140F3D620F9F44AA9F84239D1564C901B2410E@email.int.in-fusio.com>
Message-ID: <F9F84B50-00D5-11D8-95C9-000A95891192@cs.usfca.edu>


On Friday, October 17, 2003, at 05:15 AM, rodrigo reyes wrote:
> SL_COMMENT
> 	:	"//"
> 		(~('\n'|'\r')
>                 {
>                      if (LA(1) == EOF_CHAR)
>                             break;
>                 }
>            )*
> 	;

Hi guys...i'm not sure I like the "break" in there as it is not part of 
the grammar analysis; or rather it can screw you up.  Hmm...i'll take a 
peek.

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Fri Oct 17 12:58:58 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] java grammar problems
In-Reply-To: <3F74CD6B.60306@waldin.net>
Message-ID: <58A9AE34-00DC-11D8-95C9-000A95891192@cs.usfca.edu>


On Friday, September 26, 2003, at 04:36 PM, Ray Waldin wrote:

> Charles Zhang wrote:
>
> The interfaceBlock rule of the java.tree.g does not
> contain a typedefinition. It shouldn't anyways. It
> should just contain a interfaceDefinition.

Fixed in the depot.

Terence

>
>
> Hi Charles,
>
> According to  
> http://java.sun.com/docs/books/jls/second_edition/html/ 
> interfaces.doc.html#236431 an interface can contain both interface and  
> class declarations, as in:
>
> interface foo {
> ??? class bar { }
> ??? interface baz { }
> }
>
> But I'm not
> a grammar expert and scared of making changes. Could
> you show me how to solve this problem?
>
>
>
> To fix the java.tree.g grammar, just add typeDefinition to the  
> interfaceBlock production so it looks like this:
>
> interfaceBlock
> ??? :??? #(??? OBJBLOCK
> ??? ??? ??? (??? methodDecl
> ??? ??? ??? |??? variableDef
> ??? ??? ??? |??? typeDefinition
> ??? ??? ??? )*
> ??? ??? )
> ??? ;
>
> Hope that helps.
>
> - Ray
>
> Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service.
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Fri Oct 17 13:14:09 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] java.g NUM_INT
In-Reply-To: <3F7209D2.9050700@waldin.net>
Message-ID: <777DA916-00DE-11D8-95C9-000A95891192@cs.usfca.edu>

Fixed in main line.

Ter


On Wednesday, September 24, 2003, at 02:17 PM, Ray Waldin wrote:

> Yes.? There appears to be an extraneous '|' following 'FLOAT_SUFFIX' 
> in the predicate causing it to return true in all cases.? The 
> corrected patch is:
>
> --- old/java.g? 2003-09-23 15:20:05.000000000 -0700
> +++ java.g????? 2003-09-24 14:10:18.000000000 -0700
> @@ -1234,6 +1234,7 @@
> ??????????????????????????????????????? }
> ??????????????????????????????? :?????? HEX_DIGIT
> ??????????????????????????????? )+
> +?????????????????????? |?????? (('0'..'9')+ 
> ('.'|EXPONENT|FLOAT_SUFFIX)) => ('0'..'9')+?? //float or double with 
> leading zero
> ??????????????????????? |?????? 
> ('0'..'7')+??????????????????????????????????? // octal
> ??????????????????????? )?
> ??????????????? |?????? ('1'..'9') ('0'..'9')*? 
> {isDecimal=true;}????????????? // non-zero decimal
>
> Sorry for any confusion this may have caused.
>
> -Ray
>
> Ernest Pasour wrote:
>
> When I tried sticking this fix in, it allowed a number like 083 to 
> pass through as an Integer.  I'm not sure exactly why no error is 
> thrown though.  Do you see that behavior?
>
> -----Original Message-----
> From: Ray Waldin [mailto:ray@waldin.net]
> Sent: Tuesday, September 23, 2003 7:38 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] java.g NUM_INT
>
>
> I sent this earlier and it never showed up on the list, so here it is
> again...
>
>
> Hi everyone,
>
> I'm new to this group, so apologies if this issue has been raised
> before.  I wasn't able to find any reference to it in the archives.  In
> java.g (Version 1.20) it seems that the NUM_INT rule is broken for 
> cases
> of floats and doubles which have leading zeros and contain the digits 8
> or 9 in the decimal integer or mantissa part.
>
> While the following cases work (by sheer luck, I believe):
>
>
>
> 07.0f
> 06d
> 07e0
>
>
>
> these do not:
>
>
>
> 08.0f
> 09d
> 08e0
>
>
>
> A quick fix can be found below.
>
> -Ray
>
>
> --- old/java.g  2003-09-23 15:20:05.000000000 -0700
> +++ java.g      2003-09-23 15:21:28.000000000 -0700
> @@ -1234,6 +1234,7 @@
>                                         }
>                                 :       HEX_DIGIT
>                                 )+
> +                       |       (('0'..'9')+
> ('.'|EXPONENT|FLOAT_SUFFIX|)) => ('0'..'9')+   // float or double with
> leading zero
>                         |
> ('0'..'7')+
> // octal
>                         )?
>                 |       ('1'..'9') ('0'..'9')*
> {isDecimal=true;}               // non-zero decimal
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service.
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From nico123 at adinet.com.uy  Fri Oct 17 14:40:53 2003
From: nico123 at adinet.com.uy (Nico)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] AST.getType() Question
References: <001001c39496$c32e9100$00cf090a@oddi.is>
Message-ID: <009701c394f7$5781e770$0200a8c0@viper2000>

MessageI know, but I want to know the token name from the AST, outside parsing. I want to do it after it.
Any suggestions?
  ----- Original Message ----- 
  From: Arnar Birgisson 
  To: antlr-interest@yahoogroups.com 
  Sent: Friday, October 17, 2003 7:09 AM
  Subject: RE: [antlr-interest] AST.getType() Question


  Both Parser and TreeParser have a function "string getTokenName(int)". You should be able to use that.

  Arnar
    -----Original Message-----
    From: Nico [mailto:nico123@adinet.com.uy] 
    Sent: 17. okt?ber 2003 01:23
    To: antlr-interest@yahoogroups.com
    Subject: [antlr-interest] AST.getType() Question


    Hi all.

    AST.getType() returns an int according to the created tokenTypes. 
    Is there any way to return the String Type Name of the Token, instead of the representing int?
    I mean, I want the String name of the Token Type, not the Name of the node.

    regards


    Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 


  Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031017/f2e66e1d/attachment.html
From manju_a_27 at yahoo.com  Fri Oct 17 18:12:51 2003
From: manju_a_27 at yahoo.com (Manju Anand)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] parser filter rule?
Message-ID: <bmq42j+108ku@eGroups.com>

Hi,

I am trying to implement a simple java parser. I know there is a 
filter option in the lexer to only match what is there and ignore 
other text.

Is there such an option in the parser? I only want to match packages, 
classes, methods, etc and have written rules for it. It does work, 
but the parser throws a lot of error messages and also the parser 
stops execution at the first error message.

For eg, 

class a{
   int abc;
}

class def{
   String abc;
}

It stops at 'int' in the first class and does not parse the 'class 
def'.

I know I can use the java.g file and insert print statements only 
where I want - but I would like to know if writing only the rules I 
need and ignoring all other text is possible.

thanks,
Manju


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From nico123 at adinet.com.uy  Fri Oct 17 18:34:52 2003
From: nico123 at adinet.com.uy (Nico)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Simple nondeterminism help
Message-ID: <003d01c39518$0712c450$0200a8c0@viper2000>

Hi, I need some help in this undeterminism. 


LETTER: CAPITALLETTER | ('a'..'z');
CAPITALLETTER: ('A'..'Z');

How do I solve this?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031017/e7822c62/attachment.html
From parrt at cs.usfca.edu  Fri Oct 17 20:08:11 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Simple nondeterminism help
In-Reply-To: <003d01c39518$0712c450$0200a8c0@viper2000>
Message-ID: <4EBE2A65-0118-11D8-8DB8-000393BB647E@cs.usfca.edu>


On Friday, October 17, 2003, at 06:34  PM, Nico wrote:

> Hi, I need some help in this undeterminism.
> ?
> ?
> LETTER: CAPITALLETTER | ('a'..'z');
> CAPITALLETTER: ('A'..'Z');
>
> How do I solve this?

Add "protected" keyword in front of second rule.

Terence

>
>
> Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service.
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com link sharing, pure-n-simple




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Sat Oct 18 05:57:50 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] AST.getType() Question
In-Reply-To: <009701c394f7$5781e770$0200a8c0@viper2000>
Message-ID: <001a01c39577$6ff722e0$01cf090a@oddi.is>

Hello

> I know, but I want to know the token name from the AST, outside
parsing. I want to do it after it.
> Any suggestions?

I keep a reference to my parser alive and use it to get the name of the
token. I have a function to pretty-print AST in the Scheme style with
indenting and both lexemes (getText()) and token names:

void printTree(antlr::RefAST tree, std::ostream& out,
	antlr::Parser& p, int indent) {
  int j = indent;
  std::string i = ""; while (j-- > 0) i += "  ";
  if (tree->getFirstChild()) {
    out << i << "( " << tree->toString() << " <" <<
      p.getTokenName(tree->getType()) << ">" << std::endl;
    printTree(tree->getFirstChild(), out, p, indent+1);
    out << i << ")" << std::endl;
  } else {
    out << i << tree->toString() << " <" << 
      p.getTokenName(tree->getType()) << ">" << std::endl;
  }
  if (tree->getNextSibling()) {
    printTree(tree->getNextSibling(), out, p, indent);
  }
}

I use it like this:

ASTFactory my_factory;
MyParser parser(selector);

parser.initializeASTFactory(my_factory);
parser.setASTFactory(&my_factory);

parser.forrit();
RefAST ast = RefAST(parser.getAST());

if (ast) {
  printTree(ast, cout, parser);
} else {
  cout << "null AST" << endl;
}


Arnar


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Sat Oct 18 11:57:55 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] parser filter rule?
In-Reply-To: <bmq42j+108ku@eGroups.com>
Message-ID: <FB597FB8-019C-11D8-95C9-000A95891192@cs.usfca.edu>

Hi...I don't currently have a filter option for parsers...sorry.
Ter
On Friday, October 17, 2003, at 06:12 PM, Manju Anand wrote:

> Hi,
>
> I am trying to implement a simple java parser. I know there is a
> filter option in the lexer to only match what is there and ignore
> other text.
>
> Is there such an option in the parser? I only want to match packages,
> classes, methods, etc and have written rules for it. It does work,
> but the parser throws a lot of error messages and also the parser
> stops execution at the first error message.
>
> For eg,
>
> class a{
>    int abc;
> }
>
> class def{
>    String abc;
> }
>
> It stops at 'int' in the first class and does not parse the 'class
> def'.
>
> I know I can use the java.g file and insert print statements only
> where I want - but I would like to know if writing only the rules I
> need and ignoring all other text is possible.
>
> thanks,
> Manju
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From nico123 at adinet.com.uy  Sat Oct 18 14:55:22 2003
From: nico123 at adinet.com.uy (Nico)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Simple nondeterminism help
References: <4EBE2A65-0118-11D8-8DB8-000393BB647E@cs.usfca.edu>
Message-ID: <003001c395c2$87f76f80$0200a8c0@viper2000>

If I add protected keyword to CAPITALLETTER the nondeterminism is gone.
But, I want to call CAPITALLETTER also from a parser rule. If I add
protectect
keyword it cannot be seen by the parser right?

----- Original Message ----- 
From: "Terence Parr" <parrt@cs.usfca.edu>
To: <antlr-interest@yahoogroups.com>
Sent: Saturday, October 18, 2003 12:08 AM
Subject: Re: [antlr-interest] Simple nondeterminism help



On Friday, October 17, 2003, at 06:34  PM, Nico wrote:

> Hi, I need some help in this undeterminism.
>
>
> LETTER: CAPITALLETTER | ('a'..'z');
> CAPITALLETTER: ('A'..'Z');
>
> How do I solve this?

Add "protected" keyword in front of second rule.

Terence

>
>
> Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service.
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com link sharing, pure-n-simple






Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Sun Oct 19 10:47:18 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Simple nondeterminism help
In-Reply-To: <003001c395c2$87f76f80$0200a8c0@viper2000>
Message-ID: <001401c39669$0a320a90$00cf090a@oddi.is>

Perhaps have CAPITALLETTER and LOWERCASELETTER as parser rules and add

protected letter: CAPITALLETTER | LOWERCASELETTER;

as a parser rule. Does that solve your problem?

The task of lexical analyzing should be as decoupled from parsing as
possible, and only in the parsing stage do you have enough information
and context to know if you are expecting an upper-case letter or just
any letter.

Arnar

> -----Original Message-----
> From: Nico [mailto:nico123@adinet.com.uy] 
> Sent: 18. okt?ber 2003 21:55
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] Simple nondeterminism help
> 
> 
> If I add protected keyword to CAPITALLETTER the 
> nondeterminism is gone.
> But, I want to call CAPITALLETTER also from a parser rule. If I add
> protectect
> keyword it cannot be seen by the parser right?
> 
> ----- Original Message ----- 
> From: "Terence Parr" <parrt@cs.usfca.edu>
> To: <antlr-interest@yahoogroups.com>
> Sent: Saturday, October 18, 2003 12:08 AM
> Subject: Re: [antlr-interest] Simple nondeterminism help
> 
> 
> 
> On Friday, October 17, 2003, at 06:34  PM, Nico wrote:
> 
> > Hi, I need some help in this undeterminism.
> >
> >
> > LETTER: CAPITALLETTER | ('a'..'z');
> > CAPITALLETTER: ('A'..'Z');
> >
> > How do I solve this?
> 
> Add "protected" keyword in front of second rule.
> 
> Terence
> 
> >
> >
> > Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service.
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com link sharing, pure-n-simple
> 
> 
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
> 
> 
> 
>  
> 
> Your use of Yahoo! 
> Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From nico123 at adinet.com.uy  Sun Oct 19 15:30:31 2003
From: nico123 at adinet.com.uy (Nico)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Simple nondeterminism help
References: <001401c39669$0a320a90$00cf090a@oddi.is>
Message-ID: <006701c39690$9b929dc0$0200a8c0@viper2000>

Hi, thankz for anwering.
My problem is still there. I have changed some things but I still have
nondeterminism in number RULE.

I am converting a grammar from an BNF And I always have this nondeterminism
errors.

Does anybody know some guidelines to avoid this?

regards:
class S2Parser extends Parser;

options {
k = 2;
exportVocab=S2;
}

// nondeterminism here !!
number: (digits "r")? (MINUS)? bigDigits ("." bigDigits)? ("e" ("-")?
digits)?

;
bigDigits: (bigDigit)+
;

bigDigit: DIGIT | CAPITALLETTER
;

letter: LOWERLETTER | CAPITALLETTER;

digits: (DIGIT)+;

class S2Lexer extends Lexer;

options {
k = 2;
exportVocab=S2;
}

DIGIT : '0'..'9' ;
LOWERLETTER: 'a'..'z';
CAPITALLETTER: 'A'..'Z'
;

----- Original Message ----- 
From: "Arnar Birgisson" <arnarb@oddi.is>
To: <antlr-interest@yahoogroups.com>
Sent: Sunday, October 19, 2003 2:47 PM
Subject: RE: [antlr-interest] Simple nondeterminism help


Perhaps have CAPITALLETTER and LOWERCASELETTER as parser rules and add

protected letter: CAPITALLETTER | LOWERCASELETTER;

as a parser rule. Does that solve your problem?

The task of lexical analyzing should be as decoupled from parsing as
possible, and only in the parsing stage do you have enough information
and context to know if you are expecting an upper-case letter or just
any letter.

Arnar

> -----Original Message-----
> From: Nico [mailto:nico123@adinet.com.uy]
> Sent: 18. okt?ber 2003 21:55
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] Simple nondeterminism help
>
>
> If I add protected keyword to CAPITALLETTER the
> nondeterminism is gone.
> But, I want to call CAPITALLETTER also from a parser rule. If I add
> protectect
> keyword it cannot be seen by the parser right?
>
> ----- Original Message ----- 
> From: "Terence Parr" <parrt@cs.usfca.edu>
> To: <antlr-interest@yahoogroups.com>
> Sent: Saturday, October 18, 2003 12:08 AM
> Subject: Re: [antlr-interest] Simple nondeterminism help
>
>
>
> On Friday, October 17, 2003, at 06:34  PM, Nico wrote:
>
> > Hi, I need some help in this undeterminism.
> >
> >
> > LETTER: CAPITALLETTER | ('a'..'z');
> > CAPITALLETTER: ('A'..'Z');
> >
> > How do I solve this?
>
> Add "protected" keyword in front of second rule.
>
> Terence
>
> >
> >
> > Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service.
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com link sharing, pure-n-simple
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/
>
>
>
>
>
> Your use of Yahoo!
> Groups is subject to http://docs.yahoo.com/info/terms/
>
>




Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From dude_fiera at hotmail.com  Sun Oct 19 16:25:31 2003
From: dude_fiera at hotmail.com (Juan Miguel)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] ARRAY_DECLARATOR in java.g grammar
Message-ID: <Sea2-DAV41zWxRzjdDF00005956@hotmail.com>

Hi, I need help in the following in java.g grammar

If I have a variable like: String[][] var, java grammar generates a tree like:

TYPE
 |_ ARRAY_DECLARATOR
    |_ ARRAY_DECLARATOR
       |_ STRING

I want to generate a tree like:

 TYPE
|_ STRING[][]


If you see the code below (from java.g) I added a label to concatenate the IDENT, and then create a node with String[][]
But antlr says "Labeled subrules not yet supported"

Any suggestion to solve this issue?

identPrimary
: labelA:(IDENT
(
  options {greedy=true;}
  : DOT^ IDENT
  )*)

(
  options {greedy=true;}
  : ( lp:LPAREN^ {#lp.setType(METHOD_CALL);} argList RPAREN! )
  | ( options {greedy=true;} :
  lbc:LBRACK^ {#lbc.setType(ARRAY_DECLARATOR);} RBRACK!
  )+
)?
;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031019/d36581d1/attachment.html
From rodrigor at in-fusio.com  Mon Oct 20 01:20:26 2003
From: rodrigor at in-fusio.com (rodrigo reyes)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Re:  SL_COMMENT in java.g
Message-ID: <C5140F3D620F9F44AA9F84239D1564C901B24116@email.int.in-fusio.com>

Hi Terence,

> On Friday, October 17, 2003, at 05:15 AM, rodrigo reyes wrote:
> > SL_COMMENT
> > 	:	"//"
> > 		(~('\n'|'\r')
> >                 {
> >                      if (LA(1) == EOF_CHAR)
> >                             break;
> >                 }
> >            )*
> > 	;
> 
> Hi guys...i'm not sure I like the "break" in there as it is 
> not part of 
> the grammar analysis; or rather it can screw you up.  
> Hmm...i'll take a  peek.

 I don't like it either, as it refers to something out of the grammar,
that's why I am looking for an alternative solution.

 However, I have plenty of files with ending SL_COMMENT which are not
matched by the current grammar. So I need at least a temporary solution.

 If you have any advice on how to fix it properly, I'll gladly take it ;-)

Bests,
Rodrigo

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sriram.easwaran at sas.com  Mon Oct 20 11:10:37 2003
From: sriram.easwaran at sas.com (Sriram Easwaran)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Non Determinism Problem in Antler
Message-ID: <8D966D6B75EB7F47AA300241BF2E1D0C016A8DCA@merc17.na.sas.com>


Hi,
I am having a nondeterminism waring on my Lexer.
Here is what I have in my Lexer

protected SPECIAL  : "special::" ;
protected VARIABLE  : ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'_'|'0'..'9')* ;

SPECIAL_FLAG : SPECIAL! FLAG ;         // Match SPECIAL followed by some FLAG

BEGIN_FUNCTION : ( VARIABLE LPAREN! ); // Match the beginning of any function

On compiling the grammar
Warning: lexical nondeterminism between rules SPECIAL_FLAG and BEGIN_FUNCTION upon k==1:'s' k==2:'p

I am not sure how to get rid of this problem and would appreicate if someone can help me match both these lexer rules.

Thanks
Sriram



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Mon Oct 20 11:15:58 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Re:  SL_COMMENT in java.g
In-Reply-To: <C5140F3D620F9F44AA9F84239D1564C901B24116@email.int.in-fusio.com>
Message-ID: <740AB406-0329-11D8-95C9-000A95891192@cs.usfca.edu>

Will

SL_COMMENT
	:	"//" ( options {greedy=false;} : (.)* ) ('\n'|'\r' ('\n')?)
	;

work?

Ter

On Monday, October 20, 2003, at 01:20 AM, rodrigo reyes wrote:

> Hi Terence,
>
>> On Friday, October 17, 2003, at 05:15 AM, rodrigo reyes wrote:
>>> SL_COMMENT
>>> 	:	"//"
>>> 		(~('\n'|'\r')
>>>                 {
>>>                      if (LA(1) == EOF_CHAR)
>>>                             break;
>>>                 }
>>>            )*
>>> 	;
>>
>> Hi guys...i'm not sure I like the "break" in there as it is
>> not part of
>> the grammar analysis; or rather it can screw you up.
>> Hmm...i'll take a  peek.
>
>  I don't like it either, as it refers to something out of the grammar,
> that's why I am looking for an alternative solution.
>
>  However, I have plenty of files with ending SL_COMMENT which are not
> matched by the current grammar. So I need at least a temporary 
> solution.
>
>  If you have any advice on how to fix it properly, I'll gladly take it 
> ;-)
>
> Bests,
> Rodrigo
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Mon Oct 20 12:45:27 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Re:  SL_COMMENT in java.g
In-Reply-To: <740AB406-0329-11D8-95C9-000A95891192@cs.usfca.edu>
Message-ID: <20031020194527.3642.qmail@web20405.mail.yahoo.com>

I get:

java.g:1099:22: warning:Being nongreedy only makes
sense for (...)+ and (...)*
java.g:1099: warning:lexical nondeterminism upon
java.g:1099:     k==1:'\n','\r'
java.g:1099:     k==2:'\n'
java.g:1099:     k==3:<end-of-token>
java.g:1099:     k==4:<end-of-token>
java.g:1099:     between alt 1 and exit branch of
block

-Matt

:(

--- Terence Parr <parrt@cs.usfca.edu> wrote:
> Will
> 
> SL_COMMENT
> 	:	"//" ( options {greedy=false;} : (.)* )
> ('\n'|'\r' ('\n')?)
> 	;
> 
> work?
> 
> Ter
> 
> On Monday, October 20, 2003, at 01:20 AM, rodrigo
> reyes wrote:
> 
> > Hi Terence,
> >
> >> On Friday, October 17, 2003, at 05:15 AM, rodrigo
> reyes wrote:
> >>> SL_COMMENT
> >>> 	:	"//"
> >>> 		(~('\n'|'\r')
> >>>                 {
> >>>                      if (LA(1) == EOF_CHAR)
> >>>                             break;
> >>>                 }
> >>>            )*
> >>> 	;
> >>
> >> Hi guys...i'm not sure I like the "break" in
> there as it is
> >> not part of
> >> the grammar analysis; or rather it can screw you
> up.
> >> Hmm...i'll take a  peek.
> >
> >  I don't like it either, as it refers to something
> out of the grammar,
> > that's why I am looking for an alternative
> solution.
> >
> >  However, I have plenty of files with ending
> SL_COMMENT which are not
> > matched by the current grammar. So I need at least
> a temporary 
> > solution.
> >
> >  If you have any advice on how to fix it properly,
> I'll gladly take it 
> > ;-)
> >
> > Bests,
> > Rodrigo
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/
> >
> >
> >
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator,
> http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email
> again!
> Co-founder, http://www.peerscope.com pure link
> sharing
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
The New Yahoo! Shopping - with improved product search
http://shopping.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Mon Oct 20 12:51:21 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Re:  SL_COMMENT in java.g
In-Reply-To: <20031020194527.3642.qmail@web20405.mail.yahoo.com>
Message-ID: <C789ACFC-0336-11D8-95C9-000A95891192@cs.usfca.edu>


On Monday, October 20, 2003, at 12:45 PM, Matt Benson wrote:

> I get:
>
> java.g:1099:22: warning:Being nongreedy only makes
> sense for (...)+ and (...)*
> java.g:1099: warning:lexical nondeterminism upon
> java.g:1099:     k==1:'\n','\r'
> java.g:1099:     k==2:'\n'
> java.g:1099:     k==3:<end-of-token>
> java.g:1099:     k==4:<end-of-token>
> java.g:1099:     between alt 1 and exit branch of
> block
>

yeah, ooops... put a * on the overall

: "//" ( options {greedy=false;} : . )* ... ;

see if that works.

Ter

> -Matt
>
> :(
>
> --- Terence Parr <parrt@cs.usfca.edu> wrote:
>> Will
>>
>> SL_COMMENT
>> 	:	"//" ( options {greedy=false;} : (.)* )
>> ('\n'|'\r' ('\n')?)
>> 	;
>>
>> work?
>>
>> Ter
>>
>> On Monday, October 20, 2003, at 01:20 AM, rodrigo
>> reyes wrote:
>>
>>> Hi Terence,
>>>
>>>> On Friday, October 17, 2003, at 05:15 AM, rodrigo
>> reyes wrote:
>>>>> SL_COMMENT
>>>>> 	:	"//"
>>>>> 		(~('\n'|'\r')
>>>>>                 {
>>>>>                      if (LA(1) == EOF_CHAR)
>>>>>                             break;
>>>>>                 }
>>>>>            )*
>>>>> 	;
>>>>
>>>> Hi guys...i'm not sure I like the "break" in
>> there as it is
>>>> not part of
>>>> the grammar analysis; or rather it can screw you
>> up.
>>>> Hmm...i'll take a  peek.
>>>
>>>  I don't like it either, as it refers to something
>> out of the grammar,
>>> that's why I am looking for an alternative
>> solution.
>>>
>>>  However, I have plenty of files with ending
>> SL_COMMENT which are not
>>> matched by the current grammar. So I need at least
>> a temporary
>>> solution.
>>>
>>>  If you have any advice on how to fix it properly,
>> I'll gladly take it
>>> ;-)
>>>
>>> Bests,
>>> Rodrigo
>>>
>>>
>>>
>>> Your use of Yahoo! Groups is subject to
>>> http://docs.yahoo.com/info/terms/
>>>
>>>
>>>
>> --
>> Professor Comp. Sci., University of San Francisco
>> Creator, ANTLR Parser Generator,
>> http://www.antlr.org
>> Co-founder, http://www.jguru.com
>> Co-founder, http://www.knowspam.net enjoy email
>> again!
>> Co-founder, http://www.peerscope.com pure link
>> sharing
>>
>>
>>
>>
>>
>>
>> Your use of Yahoo! Groups is subject to
>> http://docs.yahoo.com/info/terms/
>>
>>
>
>
> __________________________________
> Do you Yahoo!?
> The New Yahoo! Shopping - with improved product search
> http://shopping.yahoo.com
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From netminka at netscape.net  Mon Oct 20 13:08:42 2003
From: netminka at netscape.net (netminka)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] how to obtain token set contents
Message-ID: <bn1fca+firu@eGroups.com>

hi all,

Is there a way that I can find out what tokens a given token
set consists of? 

This is for error handling. 
The default exception handler code has lines
   consume();
   consumeUntil(tokenSet_73_);

I'd like to add some of my own exception handlers and would like to 
know what is in tokenSet_73_

thanks !!
m.adams 
     


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Mon Oct 20 13:32:01 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Re:  SL_COMMENT in java.g
In-Reply-To: <C789ACFC-0336-11D8-95C9-000A95891192@cs.usfca.edu>
Message-ID: <20031020203201.14829.qmail@web20416.mail.yahoo.com>

I can't get any of it to work... !

-Matt

--- Terence Parr <parrt@cs.usfca.edu> wrote:
> 
> On Monday, October 20, 2003, at 12:45 PM, Matt
> Benson wrote:
> 
> > I get:
> >
> > java.g:1099:22: warning:Being nongreedy only makes
> > sense for (...)+ and (...)*
> > java.g:1099: warning:lexical nondeterminism upon
> > java.g:1099:     k==1:'\n','\r'
> > java.g:1099:     k==2:'\n'
> > java.g:1099:     k==3:<end-of-token>
> > java.g:1099:     k==4:<end-of-token>
> > java.g:1099:     between alt 1 and exit branch of
> > block
> >
> 
> yeah, ooops... put a * on the overall
> 
> : "//" ( options {greedy=false;} : . )* ... ;
> 
> see if that works.
> 
> Ter
> 
> > -Matt
> >
> > :(
> >
> > --- Terence Parr <parrt@cs.usfca.edu> wrote:
> >> Will
> >>
> >> SL_COMMENT
> >> 	:	"//" ( options {greedy=false;} : (.)* )
> >> ('\n'|'\r' ('\n')?)
> >> 	;
> >>
> >> work?
> >>
> >> Ter
> >>
> >> On Monday, October 20, 2003, at 01:20 AM, rodrigo
> >> reyes wrote:
> >>
> >>> Hi Terence,
> >>>
> >>>> On Friday, October 17, 2003, at 05:15 AM,
> rodrigo
> >> reyes wrote:
> >>>>> SL_COMMENT
> >>>>> 	:	"//"
> >>>>> 		(~('\n'|'\r')
> >>>>>                 {
> >>>>>                      if (LA(1) == EOF_CHAR)
> >>>>>                             break;
> >>>>>                 }
> >>>>>            )*
> >>>>> 	;
> >>>>
> >>>> Hi guys...i'm not sure I like the "break" in
> >> there as it is
> >>>> not part of
> >>>> the grammar analysis; or rather it can screw
> you
> >> up.
> >>>> Hmm...i'll take a  peek.
> >>>
> >>>  I don't like it either, as it refers to
> something
> >> out of the grammar,
> >>> that's why I am looking for an alternative
> >> solution.
> >>>
> >>>  However, I have plenty of files with ending
> >> SL_COMMENT which are not
> >>> matched by the current grammar. So I need at
> least
> >> a temporary
> >>> solution.
> >>>
> >>>  If you have any advice on how to fix it
> properly,
> >> I'll gladly take it
> >>> ;-)
> >>>
> >>> Bests,
> >>> Rodrigo
> >>>
> >>>
> >>>
> >>> Your use of Yahoo! Groups is subject to
> >>> http://docs.yahoo.com/info/terms/
> >>>
> >>>
> >>>
> >> --
> >> Professor Comp. Sci., University of San Francisco
> >> Creator, ANTLR Parser Generator,
> >> http://www.antlr.org
> >> Co-founder, http://www.jguru.com
> >> Co-founder, http://www.knowspam.net enjoy email
> >> again!
> >> Co-founder, http://www.peerscope.com pure link
> >> sharing
> >>
> >>
> >>
> >>
> >>
> >>
> >> Your use of Yahoo! Groups is subject to
> >> http://docs.yahoo.com/info/terms/
> >>
> >>
> >
> >
> > __________________________________
> > Do you Yahoo!?
> > The New Yahoo! Shopping - with improved product
> search
> > http://shopping.yahoo.com
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/
> >
> >
> >
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator,
> http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email
> again!
> Co-founder, http://www.peerscope.com pure link
> sharing
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
The New Yahoo! Shopping - with improved product search
http://shopping.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jbb at acm.org  Mon Oct 20 21:20:18 2003
From: jbb at acm.org (jbb@acm.org)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Simple nondeterminism help
In-Reply-To: <006701c39690$9b929dc0$0200a8c0@viper2000> (message from Nico on
	Sun, 19 Oct 2003 19:30:31 -0300)
References: <001401c39669$0a320a90$00cf090a@oddi.is> <006701c39690$9b929dc0$0200a8c0@viper2000>
Message-ID: <E1ABo0I-0003Ve-00@gecko.home.org>

Hi Nico!

This is probably way too long a reply, but here goes...

You asked (in summary):
>.....but I still have
>nondeterminism in number RULE.
>
>I am converting a grammar from an BNF And I always have this nondeterminism
>errors.
>
>Does anybody know some guidelines to avoid this?

....grammar sniped....

I think that the general concepts of "Left Factoring" and probably
"Left Recursion Removal" form the sort of guidelines to help avoid
non-determinism problems in LL grammars.

Any decent compiler book should discuss these concepts.

The rest of this message discusses how I fixed your non-determinism
problem...

First here is your original grammar with repairs in order to make the
lexer supply all of the tokens that the parser needs. I hope you will
agree that this grammar is the same as yours...

-----Begin S2.g-----
class S2Parser extends Parser;

// nondeterminism here !!
number :
	(digits LOWER_R)?	   // a
	(MINUS)?		   // b
	bigDigits		   // c
	(DOT bigDigits)?	   // d
	(LOWER_E (MINUS)? digits)? // e
    ;

bigDigits: (bigDigit)+ ;

bigDigit: DIGIT | CAPITALLETTER ;

letter: lowerletter | CAPITALLETTER ;

lowerletter : LOWER_A_D | LOWER_E | LOWER_F_Q | LOWER_R | LOWER_S_Z ;

digits: (DIGIT)+ ;

class S2Lexer extends Lexer;

DOT : '.' ;
MINUS : '-' ;

DIGIT : '0'..'9' ;
CAPITALLETTER: 'A'..'Z' ;

LOWER_A_D : 'a'..'d' ;
LOWER_E   : 'e'      ;
LOWER_F_Q : 'f'..'q' ;
LOWER_R   : 'r'      ;
LOWER_S_Z : 's'..'z' ;
-----End S2.g-----

and here are some strings that are (apparently) valid numbers under
your grammar - will use these for testing.

-----Begin test.txt-----
2
-2
2.0
A
-A
A.B
2r1
2r-1
2r-1.3
2r-1.3e4
2r-1.3e-44
2rA
2r-A
2r-A.Be9
2r-A.Be-9
-----End test.txt-----

Our non-determinism problem is that at the beginning of processing of
the number rule. If the lexer returns a DIGIT token, the parser can
not know whether that DIGIT is part of the optional 'r' phrase (which
I marked with the comment // a) or is that DIGIT part of the required
bigDigits phrase (which I marked with a // c).

And so we must left factor the first 3 phrases of the number
(e.g. what I marked as a, b, and c).

And here is a grammar that has that left factoring:

-----Begin S2_1.g-----
class S2Parser extends Parser;

entry : (number EOL)+ EOF;

number : number_front number_tail ;

number_front :
      (DIGIT)+
	( LOWER_R (MINUS)? (bigDigit)+
	| CAPITALLETTER (bigDigit)* )?
    | MINUS (bigDigit)+
    | CAPITALLETTER (bigDigit)*
    ;

number_tail : (DOT (bigDigit)+)? (LOWER_E (MINUS)? (DIGIT)+)? ;

bigDigit: DIGIT | CAPITALLETTER ;

letter: lowerletter | CAPITALLETTER ;

lowerletter : LOWER_A_D | LOWER_E | LOWER_F_Q | LOWER_R | LOWER_S_Z ;

class S2Lexer extends Lexer;

options {
    k = 2;
}

DOT : '.' ;
MINUS : '-' ;

DIGIT : '0'..'9' ;
CAPITALLETTER: 'A'..'Z' ;

LOWER_A_D : 'a'..'d' ;
LOWER_E   : 'e'      ;
LOWER_F_Q : 'f'..'q' ;
LOWER_R   : 'r'      ;
LOWER_S_Z : 's'..'z' ;

WS  : ( ' '|'\t') { $setType(Token.SKIP); } ;
EOL : "\r\n"|'\r'|'\n' { newline(); } ;
-----End S2_1.g-----

Run this grammar with this Main using the test.txt as input and see no
errors...

-----Begin Main.java-----
import java.io.*;

class Main {
    public static void main(String[] args) {
	try {
	    S2Lexer lexer =
		new S2Lexer(new DataInputStream(System.in));
	    S2Parser parser = new S2Parser(lexer);
	    parser.entry();
	} catch(Exception e) {
	    System.err.println("exception: "+e);
	}
    }
}
-----End Main.java-----

And lastly, I believe that the number rule (and all its attendant
sub-rules) should really be placed in the lexer and not in the
parser. But haven't really thought about how to do that.

Hope this helps....

	-jbb

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pwolleba at yahoo.no  Tue Oct 21 01:16:26 2003
From: pwolleba at yahoo.no (pwolleba)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Make the generated Java files private
Message-ID: <bn2q0q+bq16@eGroups.com>

I am struggling with a problem with my ANTLR parser, I would like to 
generate lex and parser classes that are not public. 

"Class ModelParser extends
."  instead of  "public class ModelParser 
extends
"

Do you have any solution to my problem?

Best regards,
Per



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Tue Oct 21 03:01:59 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Re: Make the generated Java files private
In-Reply-To: <bn2q0q+bq16@eGroups.com>
Message-ID: <bn306n+5ek7@eGroups.com>

--- In antlr-interest@yahoogroups.com, "pwolleba" <pwolleba@y...> wrote:
> I am struggling with a problem with my ANTLR parser, I would like to 
> generate lex and parser classes that are not public. 
> 
> "Class ModelParser extends
."  instead of  "public class ModelParser 
> extends
"
> 
> Do you have any solution to my problem?

RTFM?

See the "classHeaderPrefix" option in the documentation:

http://www.antlr.org/doc/options.html#Options

Cheers,

Micheal
ANTLR/C#



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pwolleba at yahoo.no  Tue Oct 21 04:13:29 2003
From: pwolleba at yahoo.no (pwolleba)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Re: Make the generated Java files private
In-Reply-To: <bn306n+5ek7@eGroups.com>
Message-ID: <bn34cp+72tj@eGroups.com>

Thanks!

It worked when I added classHeaderPrefix="";

best regards,
Per



--- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...> 
wrote:
> --- In antlr-interest@yahoogroups.com, "pwolleba" <pwolleba@y...> 
wrote:
> > I am struggling with a problem with my ANTLR parser, I would like 
to 
> > generate lex and parser classes that are not public. 
> > 
> > "Class ModelParser extends
."  instead of  "public class 
ModelParser 
> > extends
"
> > 
> > Do you have any solution to my problem?
> 
> RTFM?
> 
> See the "classHeaderPrefix" option in the documentation:
> 
> http://www.antlr.org/doc/options.html#Options
> 
> Cheers,
> 
> Micheal
> ANTLR/C#


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Tue Oct 21 06:59:55 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Re: Make the generated Java files private
In-Reply-To: <bn306n+5ek7@eGroups.com>
Message-ID: <bn3e4r+i26j@eGroups.com>

--- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...>
wrote:
> RTFM?

= Read The Fucking Manual

I am not news-group-police, but isn't that considered impolite?
English is not my native language, so I was just wondering, as usually
this is the politest of all news group I have ever followed.

Oliver


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tzagotta1 at sienasystems.com  Tue Oct 21 07:07:31 2003
From: tzagotta1 at sienasystems.com (Tom Zagotta)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Re: Make the generated Java files private
In-Reply-To: <bn3e4r+i26j@eGroups.com>
Message-ID: <200310211406.JAA22848@coral.propagation.net>


> > RTFM?
> 
> = Read The F****** Manual
> 
> I am not news-group-police, but isn't that considered impolite?

*Very* impolite.

Regards,

- Tom


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From albert.huh at embarcadero.com  Tue Oct 21 08:04:09 2003
From: albert.huh at embarcadero.com (Albert Huh)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] 2.7.2, unicode, and VC++
Message-ID: <715057EB65FC7E47923FE408F290ADFD11F6C5@ettoma01.embarcadero.com>

Hi,

I'm trying to get the unicode example supplied with antlr 2.7.2 to work in visual c++ 6.0.

If I compile the grammar, then try to compile the generated code, I get the following errors:

C:\antlr-2.7.2\examples\cpp\unicode\unicode\L.cpp(172) : warning C4129: 'u' : unrecognized character escape sequence
C:\antlr-2.7.2\examples\cpp\unicode\unicode\L.cpp(172) : error C2015: too many characters in constant
C:\antlr-2.7.2\examples\cpp\unicode\unicode\L.cpp(173) : warning C4129: 'u' : unrecognized character escape sequence
C:\antlr-2.7.2\examples\cpp\unicode\unicode\L.cpp(173) : error C2015: too many characters in constant

FYI, the generated code is:

	if (((LA(1) >= static_cast<unsigned short>('\200') && LA(1) <= static_cast<unsigned char>('\ufffe')))) {
		matchRange(static_cast<unsigned char>('\200'),static_cast<unsigned char>('\ufffe'));
	}

Has anybody managed to get the unicode example to work in VC++ 6.0?

Anyhow, I've read in the archives that unicode is accepted, although not fully supported (i.e. feeding in UTF-8 text should be okay).  At the same time, antlr in C++ mode doesn't support unicode of the of box?  Sorry, I'm confused by these two ideas. 

Thanks,
Albert

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From albert.huh at embarcadero.com  Tue Oct 21 08:08:51 2003
From: albert.huh at embarcadero.com (Albert Huh)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] 2.7.2, unicode, and VC++
Message-ID: <715057EB65FC7E47923FE408F290ADFD11FA1D@ettoma01.embarcadero.com>

Ooops,

Sorry everybody.  I guess I didn't dig deep enough into the archives.  Found the relevant posts =)

Anyways, I suppose a BETTER question is:

Is there a patch available for 2.7.2 to support VC++ 6.0 and unicode?  If so, does anybody have experience using this patch in a production environment?

Thanks,
Albert

-----Original Message-----
From: Albert Huh 
Sent: Tuesday, October 21, 2003 11:04 AM
To: Antlr (E-mail)
Subject: [antlr-interest] 2.7.2, unicode, and VC++


Hi,

I'm trying to get the unicode example supplied with antlr 2.7.2 to work in visual c++ 6.0.

If I compile the grammar, then try to compile the generated code, I get the following errors:

C:\antlr-2.7.2\examples\cpp\unicode\unicode\L.cpp(172) : warning C4129: 'u' : unrecognized character escape sequence
C:\antlr-2.7.2\examples\cpp\unicode\unicode\L.cpp(172) : error C2015: too many characters in constant
C:\antlr-2.7.2\examples\cpp\unicode\unicode\L.cpp(173) : warning C4129: 'u' : unrecognized character escape sequence
C:\antlr-2.7.2\examples\cpp\unicode\unicode\L.cpp(173) : error C2015: too many characters in constant

FYI, the generated code is:

	if (((LA(1) >= static_cast<unsigned short>('\200') && LA(1) <= static_cast<unsigned char>('\ufffe')))) {
		matchRange(static_cast<unsigned char>('\200'),static_cast<unsigned char>('\ufffe'));
	}

Has anybody managed to get the unicode example to work in VC++ 6.0?

Anyhow, I've read in the archives that unicode is accepted, although not fully supported (i.e. feeding in UTF-8 text should be okay).  At the same time, antlr in C++ mode doesn't support unicode of the of box?  Sorry, I'm confused by these two ideas. 

Thanks,
Albert

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Tue Oct 21 08:55:37 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Re: Make the generated Java files private
In-Reply-To: <200310211406.JAA22848@coral.propagation.net>
Message-ID: <20031021155537.37668.qmail@web20418.mail.yahoo.com>

It may have come across as impolite, but then it is
the accepted definition of an abbreviation that is
part of the "programming lexicon"... I have often seen
people chastise themselves on mailing lists for not
having "RTFM"d.

Just playing devil's advocate a little...

-Matt


--- Tom Zagotta <tzagotta1@sienasystems.com> wrote:
> 
> > > RTFM?
> > 
> > = Read The F****** Manual
> > 
> > I am not news-group-police, but isn't that
> considered impolite?
> 
> *Very* impolite.
> 
> Regards,
> 
> - Tom
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
The New Yahoo! Shopping - with improved product search
http://shopping.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Tue Oct 21 09:08:34 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Re: Make the generated Java files private
In-Reply-To: <bn3e4r+i26j@eGroups.com>
Message-ID: <bn3lm2+klqe@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Oliver Zeigermann"
<oliver@z...> wrote:
> --- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...>
> wrote:
> > RTFM?
> 
> = Read The Fucking Manual
> 
> I am not news-group-police, but isn't that considered impolite?

No. It also translates as "Read the Fine Manual" ;-)

I suppose it depends on whether the response to a question is
ultimately helpful or not.

> English is not my native language, so I was just wondering, as usually
> this is the politest of all news group I have ever followed.
> 
> Oliver

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Anthony.Youngman at ECA-International.com  Tue Oct 21 08:22:56 2003
From: Anthony.Youngman at ECA-International.com (Anthony W Youngman)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Re: Make the generated Java files private
Message-ID: <C7FE35004D40FD45AA342991B88CE40409A874@lnml1.eca-international.local>

Well, he DID bother to point out where in the FM to look.

Personally, I don't mind being told to RTFM, I just find it incredibly
frustrating when I can't FIND the FM, and any help as to where to look
is welcome :-)

Cheers,
Wol

-----Original Message-----
From: Tom Zagotta [mailto:tzagotta1@sienasystems.com] 
Sent: 21 October 2003 15:08
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Re: Make the generated Java files private



> > RTFM?
> 
> = Read The F****** Manual
> 
> I am not news-group-police, but isn't that considered impolite?

*Very* impolite.

Regards,

- Tom


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 





***********************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

***********************************************************************************


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Tue Oct 21 09:44:15 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Re: Make the generated Java files private
In-Reply-To: <20031021155537.37668.qmail@web20418.mail.yahoo.com>
Message-ID: <000901c397f2$919b4de0$01cf090a@oddi.is>

I agree. RTFM is well understood in my belief, not as a negative
feedback, but more as a joke (Referring to the user-sysadmin
interaction, which has become classical in the community of computer
"power-users" as most of us here are).

In this case, instead of saying "it says in the manual ..." and sounding
condescending, Michael used the "RTFM" to say the same, but in a "I'm
your buddy and we can make jokes that we both understand" way.

Arnar

> -----Original Message-----
> From: Matt Benson [mailto:gudnabrsam@yahoo.com] 
> Sent: 21. okt?ber 2003 15:56
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Re: Make the generated Java 
> files private
> 
> 
> It may have come across as impolite, but then it is
> the accepted definition of an abbreviation that is
> part of the "programming lexicon"... I have often seen
> people chastise themselves on mailing lists for not
> having "RTFM"d.
> 
> Just playing devil's advocate a little...
> 
> -Matt
> 
> 
> --- Tom Zagotta <tzagotta1@sienasystems.com> wrote:
> > 
> > > > RTFM?
> > > 
> > > = Read The F****** Manual
> > > 
> > > I am not news-group-police, but isn't that
> > considered impolite?
> > 
> > *Very* impolite.
> > 
> > Regards,
> > 
> > - Tom
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
> 
> __________________________________
> Do you Yahoo!?
> The New Yahoo! Shopping - with improved product search
> http://shopping.yahoo.com
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Tue Oct 21 10:58:53 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Re: Make the generated Java files private
In-Reply-To: <20031021155537.37668.qmail@web20418.mail.yahoo.com>
Message-ID: <3B92FAC7-03F0-11D8-95C9-000A95891192@cs.usfca.edu>

Hi gang,

I don't even hear the "fine" or other word anymore in the acronym...i 
just hear it as "read the manual"... but I'm pretty vulgar.  If there's 
a doubt I guess we should avoid trouble ;)

Regardless, I'm glad people find this "forum" polite in general, as 
that is my goal!  I refuse to read slashdot because of all the mean 
people there (all of them are trying mentally joust instead of help 
each other).

Ter

On Tuesday, October 21, 2003, at 08:55 AM, Matt Benson wrote:

> It may have come across as impolite, but then it is
> the accepted definition of an abbreviation that is
> part of the "programming lexicon"... I have often seen
> people chastise themselves on mailing lists for not
> having "RTFM"d.
>
> Just playing devil's advocate a little...
>
> -Matt
>
>
> --- Tom Zagotta <tzagotta1@sienasystems.com> wrote:
>>
>>>> RTFM?
>>>
>>> = Read The F****** Manual
>>>
>>> I am not news-group-police, but isn't that
>> considered impolite?
>>
>> *Very* impolite.
>>
>> Regards,
>>
>> - Tom
>>
>>
>>
>>
>> Your use of Yahoo! Groups is subject to
>> http://docs.yahoo.com/info/terms/
>>
>>
>
>
> __________________________________
> Do you Yahoo!?
> The New Yahoo! Shopping - with improved product search
> http://shopping.yahoo.com
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Tue Oct 21 14:31:52 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Re: Make the generated Java files private
In-Reply-To: <bn3lm2+klqe@eGroups.com>
Message-ID: <bn48k8+lget@eGroups.com>

Folks, sorry for causing inconvenience. 

I honestly did not want to denunciate Michael in any way. I really was
asking because I was insecure.

As I started this, please allow me to stop this now!

Thanks and regards,

Oliver

--- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...>
wrote:
> --- In antlr-interest@yahoogroups.com, "Oliver Zeigermann"
> <oliver@z...> wrote:
> > --- In antlr-interest@yahoogroups.com, "micheal_jor"
<open.zone@v...>
> > wrote:
> > > RTFM?
> > 
> > = Read The Fucking Manual
> > 
> > I am not news-group-police, but isn't that considered impolite?
> 
> No. It also translates as "Read the Fine Manual" ;-)
> 
> I suppose it depends on whether the response to a question is
> ultimately helpful or not.
> 
> > English is not my native language, so I was just wondering, as
usually
> > this is the politest of all news group I have ever followed.
> > 
> > Oliver
> 
> Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From m_schellens at hotmail.com  Tue Oct 21 20:21:15 2003
From: m_schellens at hotmail.com (marcschellens)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] problems installing antlr
Message-ID: <bn4t3b+oggo@eGroups.com>

I tried to install antlr 2.7.2 and got the followning error.
What is the probelm?
thanks,
marc


> make

...

<<<<<<<<<<<<<<<<<<< cpp
make all_targets
make[2]: Entering directory `/usr/local/antlr-2.7.2/lib'
make[2]: Nothing to be done for `all_targets'.
make[2]: Leaving directory `/usr/local/antlr-2.7.2/lib'
make[1]: Leaving directory `/usr/local/antlr-2.7.2/lib'
Building antlr/LexerSharedInputState.java
antlr/LexerSharedInputState.java:1: error:Import of type 
"java/io/Reader" from unnamed package [JLS 7.6]
antlr/LexerSharedInputState.java:1: error:Cannot find class
"java/io/Reader" [JLS 8]
antlr/LexerSharedInputState.java:1: error:Import of type 
"java/io/InputStream" from unnamed package [JLS 7.6]
antlr/LexerSharedInputState.java:1: error:Cannot find class
"java/io/InputStream" [JLS 8]
antlr/LexerSharedInputState.java:18: error:Super class "<gen>" is not
accessible : it is not in the same package and not public [JLS 8.1.3, 6.6]
make: *** [antlr/LexerSharedInputState.class] Error 1



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tom at psy.unsw.edu.au  Tue Oct 21 22:51:36 2003
From: tom at psy.unsw.edu.au (Thomas Brandon)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Re: Non Determinism Problem in Antler
In-Reply-To: <8D966D6B75EB7F47AA300241BF2E1D0C016A8DCA@merc17.na.sas.com>
Message-ID: <bn55t8+10e5k@eGroups.com>

Well, you can just left-factor the rules by combining them, so add 
something like:

SPECIAL_OR_FUNCTION
    :   (SPECIAL)=> SPECIAL! FLAG { $setType(SPECIAL_FLAG); }
    |   VARIABLE LPAREN { $setType(BEGIN_FUNCTION); }
    ;

instead (and add SPECIAL_FLAG and BEGIN_FUCNTION to tokens).

But you may want to move some of the stuff to the parser unless you 
have a particular reason to do it in the lexer. Then you can use 
literals handling. So your lexer would have:

tokens {
    SPECIAL="special";
}

VARIABLE
    :    ...
    ;

With literals testing on either for the whole lexer or just VARIABLE. 
And your parser would have:

special_flag
    :   SPECIAL! FLAG;
    ;

begin_function
    :   VARIABLE LPAREN!
    ;

Otherwise you'll presumably have non-determinism between your 
BEGIN_FUNCTION rule and all other rules that start with 
('a'..'z'|'A'..'Z'|'_'), like any other literal or an ident rule.

Or you could just move the special flag handling to the parser and 
have a rule matching idents, literals and function begins like:

IDENT
    :    ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
         ( LPAREN! { $setType(BEGIN_FUNCTION); } )?
    ;

with literals testing on for that rule or whole lexer.
    
Tom.
--- In antlr-interest@yahoogroups.com, "Sriram Easwaran" 
<sriram.easwaran@s...> wrote:
> 
> Hi,
> I am having a nondeterminism waring on my Lexer.
> Here is what I have in my Lexer
> 
> protected SPECIAL  : "special::" ;
> protected VARIABLE  : ('a'..'z'|'A'..'Z'|'_') 
('a'..'z'|'A'..'Z'|'_'|'0'..'9')* ;
> 
> SPECIAL_FLAG : SPECIAL! FLAG ;         // Match SPECIAL followed by 
some FLAG
> 
> BEGIN_FUNCTION : ( VARIABLE LPAREN! ); // Match the beginning of 
any function
> 
> On compiling the grammar
> Warning: lexical nondeterminism between rules SPECIAL_FLAG and 
BEGIN_FUNCTION upon k==1:'s' k==2:'p
> 
> I am not sure how to get rid of this problem and would appreicate 
if someone can help me match both these lexer rules.
> 
> Thanks
> Sriram


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Wed Oct 22 03:11:53 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] 2.7.2, unicode, and VC++
In-Reply-To: <715057EB65FC7E47923FE408F290ADFD11FA1D@ettoma01.embarcadero.com>; from albert.huh@embarcadero.com on Tue, Oct 21, 2003 at 11:08:51AM -0400
References: <715057EB65FC7E47923FE408F290ADFD11FA1D@ettoma01.embarcadero.com>
Message-ID: <20031022121152.D18428@cs.utwente.nl>

Hi,

On Tue, Oct 21, 2003 at 11:08:51AM -0400, Albert Huh wrote:
> Is there a patch available for 2.7.2 to support VC++ 6.0 and unicode?  If
> so, does anybody have experience using this patch in a production
> environment?

I have a patch that's a hack on 2.7.1 for unicode and VC 6. It is from
Daniel Fekete (?). It has some issues and in some situations it may not
work correctly (don't ask me where/why it is ages past since I looked at it
and didn't pursue it, there's probably traces in the archive from that
discussion)

I would suspect that there will never be a official version of antlr with
unicode support for VC 6 (maybe VC6 and STLPort). For VC 7.1 and maybe 7.0
yes.

Link to the patch:

http://wwwhome.cs.utwente.nl/~klaren/antlr/antlr-2.7.1-cpp-unicode.patch

It's probably portable to 2.7.2, it's supported up to the point where you
safe it from the link ;) I have no personal experience with it, also no
idea if Daniel is still lurking on the list.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "You can't expect to wield supreme executive power just because some
   watery tot throws a sword at you!"
  --- Monty Python and the Holy Grail


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pwolleba at yahoo.no  Wed Oct 22 03:28:12 2003
From: pwolleba at yahoo.no (pwolleba)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Compile ANTLR in C++
Message-ID: <bn5m3s+fo2h@eGroups.com>

I am trying to compile ANTLR in Visual C++ as a static lib and I have 
so far not managed it because of error messages.

BaseAST.cpp
C:\Temp\Java\Antlr\antlr-2.7.2\antlr-2.7.2\lib\cpp\src\BaseAST.cpp
(312) : error C2201: 'nullASTptr' : must have external linkage in 
order to be exported/imported
Error executing cl.exe.


I have (more correct the compiler have) located it  to be in the file 
BaseAST.cpp:

ANTLR_API RefAST nullAST;
ANTLR_API AST* const nullASTptr=0;


Any solution to what I am doing wrong?


Best regards,
Per



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Wed Oct 22 03:52:31 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Compile ANTLR in C++
In-Reply-To: <bn5m3s+fo2h@eGroups.com>; from pwolleba@yahoo.no on Wed, Oct 22, 2003 at 10:28:12AM -0000
References: <bn5m3s+fo2h@eGroups.com>
Message-ID: <20031022125231.E18428@cs.utwente.nl>

On Wed, Oct 22, 2003 at 10:28:12AM -0000, pwolleba wrote:
> I am trying to compile ANTLR in Visual C++ as a static lib and I have 
> so far not managed it because of error messages.

Did you try a devel snapshot from:

http://wwwhome.cs.utwente.nl/~klaren/antlr/

Also helpfull to specify the compiler and antlr version.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Why don't we just invite them to dinner and massacre them all when they're
  drunk? You heard the man. There's seven hundred thousand of them. Ah? ..
           So it'd have to be something simple with pasta, then.
                 From: Interesting Times by Terry Pratchet

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Wed Oct 22 04:28:46 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Compile ANTLR in C++
In-Reply-To: <bn5m3s+fo2h@eGroups.com>
Message-ID: <001201c3988f$a86480d0$00cf090a@oddi.is>

You should try Ric's development snapshot. In there

> I have (more correct the compiler have) located it  to be in the file 
> BaseAST.cpp:
> 
> ANTLR_API RefAST nullAST;
> ANTLR_API AST* const nullASTptr=0;

If you don't want to get the snapshot, you could try changing the second
line to

ANTLR_API extern AST* const nullASTptr=0;

Arnar


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pwolleba at yahoo.no  Wed Oct 22 04:37:34 2003
From: pwolleba at yahoo.no (pwolleba)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Re: Compile ANTLR in C++
In-Reply-To: <001201c3988f$a86480d0$00cf090a@oddi.is>
Message-ID: <bn5q5u+hg3c@eGroups.com>

I will try the link.. by the way.. it is VC6.0... sorry I forgot put 
it in...

best regards,
Per

--- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
<arnarb@o...> wrote:
> You should try Ric's development snapshot. In there
> 
> > I have (more correct the compiler have) located it  to be in the 
file 
> > BaseAST.cpp:
> > 
> > ANTLR_API RefAST nullAST;
> > ANTLR_API AST* const nullASTptr=0;
> 
> If you don't want to get the snapshot, you could try changing the 
second
> line to
> 
> ANTLR_API extern AST* const nullASTptr=0;
> 
> Arnar


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pwolleba at yahoo.no  Wed Oct 22 04:48:13 2003
From: pwolleba at yahoo.no (pwolleba)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] Re: Compile ANTLR in C++
In-Reply-To: <bn5q5u+hg3c@eGroups.com>
Message-ID: <bn5qpt+stdg@eGroups.com>

And.... the ANTLR version is 2.7.2


--- In antlr-interest@yahoogroups.com, "pwolleba" <pwolleba@y...> 
wrote:
> I will try the link.. by the way.. it is VC6.0... sorry I forgot 
put 
> it in...
> 
> best regards,
> Per
> 
> --- In antlr-interest@yahoogroups.com, "Arnar Birgisson" 
> <arnarb@o...> wrote:
> > You should try Ric's development snapshot. In there
> > 
> > > I have (more correct the compiler have) located it  to be in 
the 
> file 
> > > BaseAST.cpp:
> > > 
> > > ANTLR_API RefAST nullAST;
> > > ANTLR_API AST* const nullASTptr=0;
> > 
> > If you don't want to get the snapshot, you could try changing the 
> second
> > line to
> > 
> > ANTLR_API extern AST* const nullASTptr=0;
> > 
> > Arnar


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From JVincent at Novell.Com  Thu Oct 23 14:28:48 2003
From: JVincent at Novell.Com (Jeff Vincent)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] AST generation in a recursive rule
Message-ID: <sf97f3ba.034@prv-mail20.provo.novell.com>

Hey all,
 
I can't seem to get my mind around how to solve the following problem I
am having.  I have rules to match a try-catch construct similar to that
in Java:
 
statement! :
   stateTry:TRY tryBlock:block idCATCH:catchBlock ( idFINALLY:FINALLY
finallyBlock:block )?
   { #statement = #(#stateTry, #tryBlock, #(#[CATCH], #idCATCH),
#(#idFINALLY, #finallyBlock)); }   ;
 
catchBlock! :
   ( idCATCH:CATCH LPAREN! eType:identifier eID:IDENTIFIER RPAREN!
catchBody:block
       { #catchBlock = #(#catchBlock, #idCATCH, #eType, #eID,
#catchBody); }
   )+
   ;

These rules match input similar to the following:
 
try {
}
catch(Exception1 e1) {
}
catch(Exception2 e2) {
}
catch(Exception3 e3) {
}
finally {
}
 
I would like the resulting AST tree for the catchBlock rule to look
like the following:
 
idCatch--(right)-->Exception1--(right)-->e1--(right)-->block--(right)-->null
   |
(down)
   |
   v
idCatch--(right)-->Exception2--(right)-->e2--(right)-->block--(right)-->null
   |
(down)
   |
   v
idCatch--(right)-->Exception3--(right)-->e3--(right)-->block--(right)-->null
   |
(down)
   |
   v
 null
 
Everything parses without errors, but the resulting AST from the
catchBlock rule contains only the first and last catch AST's, the rest
are somehow discarded.  What I suspect is happening is that instead of
adding an additional child, it overwrites it.  What is the syntax to
construct an AST by appending consecutive subtrees to the resulting root
AST for the catchBlock rule?  I am unable to find (or missed) any
reference on how to do this.
 
Thanks,
 
Jeff





-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031023/6ec4facb/attachment.html
From mzukowski at yci.com  Thu Oct 23 14:42:30 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] AST generation in a recursive rule
Message-ID: <72C9789739C4214096AE945753B11EA36B2010@mypxmail04.bco-home.com>

That's an unusual tree structure, it's like you have down and right mixed
up.  Think siblings and children.  All the catch blocks would be siblings,
right?  I would recommend something like:

idCatch--(right)--> (another idCatch, etc.)
   |
(down)
   |
   v
Exception1--(right)-->e1--(right)-->block--(right)-->null

The code:

statement :
   TRY^ block catchBlocks 
      (idFINALLY:FINALLY! finallyBlock:block!
	   {## = #(##,#(idFINALLY,#finallyBlock))} )?
   ;
 
catchBlocks :
	(catchBlock)+
	{##=#(#[CATCH_BLOCK],##);}
    ;

catchBlock:
   (CATCH^ LPAREN! identifier IDENTIFIER RPAREN! block
   )+
   ;

Also, try using toStringList() to print out your tree, you'll get a better
idea of the structure that way.

catchBlocks uses a standard tree building idiom to root a tree with an
imaginary node (which you'll define in your tokens{} section)

Note I split your catchBlock rule into two rules to be able to easily build
the tree I want to build.  I could have done the same with the "finally"
block part of "statement" too.

Monty

-----Original Message-----
From: Jeff Vincent [mailto:JVincent@Novell.Com] 
Sent: Thursday, October 23, 2003 2:29 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] AST generation in a recursive rule

Hey all,
?
I can't seem to get my mind around how to solve the following problem I am
having.? I have rules to match a try-catch construct similar to that in
Java:
?
statement! :
?? stateTry:TRY tryBlock:block idCATCH:catchBlock ( idFINALLY:FINALLY
finallyBlock:block )?
???{ #statement = #(#stateTry, #tryBlock, #(#[CATCH], #idCATCH),
#(#idFINALLY, #finallyBlock)); } 
???;
?
catchBlock! :
???( idCATCH:CATCH LPAREN! eType:identifier eID:IDENTIFIER RPAREN!
catchBody:block
?????? { #catchBlock = #(#catchBlock, #idCATCH, #eType, #eID, #catchBody); }
???)+
?? ;
These rules match input similar to the following:
?
try {
}
catch(Exception1 e1) {
}
catch(Exception2 e2) {
}
catch(Exception3 e3) {
}
finally {
}
?
I would like the resulting AST tree for the catchBlock rule?to look like the
following:
?
idCatch--(right)-->Exception1--(right)-->e1--(right)-->block--(right)-->null
?? |
(down)
?? |
?? v
idCatch--(right)-->Exception2--(right)-->e2--(right)-->block--(right)-->null
?? |
(down)
?? |
?? v
idCatch--(right)-->Exception3--(right)-->e3--(right)-->block--(right)-->null
?? |
(down)
?? |
?? v
?null
?
Everything parses without errors, but the resulting AST from the catchBlock
rule contains only the first and last catch AST's, the rest are somehow
discarded.? What I suspect is happening is that instead of adding an
additional child, it overwrites it.? What is the syntax to construct an AST
by appending consecutive subtrees to the resulting root AST for the
catchBlock rule?? I am unable to find?(or missed) any reference on how to do
this.
?
Thanks,
?
Jeff

Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From JVincent at Novell.Com  Thu Oct 23 17:21:13 2003
From: JVincent at Novell.Com (Jeff Vincent)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] AST generation in a recursive rule
Message-ID: <sf981c25.072@prv-mail20.provo.novell.com>

Thanks Monty!
 
I used references to down and right because those are the member
variables used within the AST reference (as seen in debugger) to denote
child and sibling respectively.  Maybe that is why I get so confused. 
The docs refer to child/sibling, but actual code uses down/right.  Your
solution looks cleaner than mine (I finally got mine to work - FWIW)
shown below for your entertainment ;-).

 catchBlock!
  { AST temp = null, parent = null;
  } :
  ( idCATCH:CATCH LPAREN! eType:identifier eID:IDENTIFIER RPAREN!
catchBody:block 
  { temp = #(null, #idCATCH, #eType, #eID, #catchBody); 
   
   if (#catchBlock == null)
    #catchBlock = temp;
   
   if (parent != null)
    parent.addChild(temp);
 
   parent = temp;    
  }
  )+
  ;

- Is ## shorthand for #<rulename>?  
 
- Is the "()+" notation on your catchBlock rule a typo?  I would think
the only one I would need to keep is on the catchBlocks rule.
 
- Won't using the imaginary token build a tree like:
 
CATCH_BLOCK-->CATCH_BLOCK-->(another CATCH_BLOCK, etc.)
   |
CATCH
   |
   v
Exception1--(right)-->e1--(right)-->block--(right)-->null

Is there any way to use the CATCH token in the same manner as the
CATCH_BLOCK imaginary token and in effect, remove the extra node?  
 
Thanks again!

>>> mzukowski@yci.com 10/23/2003 3:42:30 PM >>>

That's an unusual tree structure, it's like you have down and right
mixed
up.  Think siblings and children.  All the catch blocks would be
siblings,
right?  I would recommend something like:

idCatch--(right)--> (another idCatch, etc.)
   |
(down)
   |
   v
Exception1--(right)-->e1--(right)-->block--(right)-->null

The code:

statement :
   TRY^ block catchBlocks 
      (idFINALLY:FINALLY! finallyBlock:block!
       {## = #(##,#(idFINALLY,#finallyBlock))} )?
   ;

catchBlocks :
    (catchBlock)+
    {##=#(#[CATCH_BLOCK],##);}
    ;

catchBlock:
   (CATCH^ LPAREN! identifier IDENTIFIER RPAREN! block
   )+
   ;

Also, try using toStringList() to print out your tree, you'll get a
better
idea of the structure that way.

catchBlocks uses a standard tree building idiom to root a tree with an
imaginary node (which you'll define in your tokens{} section)

Note I split your catchBlock rule into two rules to be able to easily
build
the tree I want to build.  I could have done the same with the
"finally"
block part of "statement" too.

Monty

-----Original Message-----
From: Jeff Vincent [mailto:JVincent@Novell.Com] 
Sent: Thursday, October 23, 2003 2:29 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] AST generation in a recursive rule

Hey all,
 
I can't seem to get my mind around how to solve the following problem I
am
having.  I have rules to match a try-catch construct similar to that
in
Java:
 
statement! :
   stateTry:TRY tryBlock:block idCATCH:catchBlock ( idFINALLY:FINALLY
finallyBlock:block )?
   { #statement = #(#stateTry, #tryBlock, #(#[CATCH], #idCATCH),
#(#idFINALLY, #finallyBlock)); } 
   ;
 
catchBlock! :
   ( idCATCH:CATCH LPAREN! eType:identifier eID:IDENTIFIER RPAREN!
catchBody:block
       { #catchBlock = #(#catchBlock, #idCATCH, #eType, #eID,
#catchBody); }
   )+
   ;
These rules match input similar to the following:
 
try {
}
catch(Exception1 e1) {
}
catch(Exception2 e2) {
}
catch(Exception3 e3) {
}
finally {
}
 
I would like the resulting AST tree for the catchBlock rule to look
like the
following:
 
idCatch--(right)-->Exception1--(right)-->e1--(right)-->block--(right)-->null
   |
(down)
   |
   v
idCatch--(right)-->Exception2--(right)-->e2--(right)-->block--(right)-->null
   |
(down)
   |
   v
idCatch--(right)-->Exception3--(right)-->e3--(right)-->block--(right)-->null
   |
(down)
   |
   v
 null
 
Everything parses without errors, but the resulting AST from the
catchBlock
rule contains only the first and last catch AST's, the rest are
somehow
discarded.  What I suspect is happening is that instead of adding an
additional child, it overwrites it.  What is the syntax to construct an
AST
by appending consecutive subtrees to the resulting root AST for the
catchBlock rule?  I am unable to find (or missed) any reference on how
to do
this.
 
Thanks,
 
Jeff

Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 



Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031023/2049726b/attachment.html
From arnarb at oddi.is  Fri Oct 24 01:44:02 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:02 2004
Subject: [antlr-interest] AST generation in a recursive rule
In-Reply-To: <sf981c25.072@prv-mail20.provo.novell.com>
Message-ID: <000c01c39a0a$f9a44a30$00cf090a@oddi.is>

Hi there

> - Is ## shorthand for #<rulename>?  

Yup..

- Won't using the imaginary token build a tree like:

> CATCH_BLOCK-->CATCH_BLOCK-->(another CATCH_BLOCK, etc.)
>    |
> CATCH
>    |
>    v
> Exception1--(right)-->e1--(right)-->block--(right)-->null
> 
> Is there any way to use the CATCH token in the same manner as the
CATCH_BLOCK imaginary token and in effect, remove the extra node?  

Monty's solution builds a tree like this:

CATCH_BLOCK
  |
CATCH ----> CATCH ----> CATCH ----> ...
  |
Exception1 -> e1 -> block -> null

The CATCH_BLOCK pseudo-token is just a handle to the multiple
catch-nodes, so that your try-catch-finally tree will have constant
size:

try
 |
block - CATCH_BLOCK - finally_block

Arnar


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From JVincent at Novell.Com  Fri Oct 24 08:24:32 2003
From: JVincent at Novell.Com (Jeff Vincent)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] AST generation in a recursive rule
Message-ID: <sf98efd7.065@prv-mail20.provo.novell.com>

Ah!  I didn't notice initially that the statment ## = #(#CATCH_BLOCK,
##); was *outside* the ( ... )+ expression.
 
Also, it seems that AST.toStringList() and AST.toStringTree() output
the exact same thing.  Why is that? 
 
Thanks for the input.

>>> arnarb@oddi.is 10/24/2003 2:44:02 AM >>>

Hi there

> - Is ## shorthand for #<rulename>?  

Yup..

- Won't using the imaginary token build a tree like:

> CATCH_BLOCK-->CATCH_BLOCK-->(another CATCH_BLOCK, etc.)
>    |
> CATCH
>    |
>    v
> Exception1--(right)-->e1--(right)-->block--(right)-->null
> 
> Is there any way to use the CATCH token in the same manner as the
CATCH_BLOCK imaginary token and in effect, remove the extra node?  

Monty's solution builds a tree like this:

CATCH_BLOCK
  |
CATCH ----> CATCH ----> CATCH ----> ...
  |
Exception1 -> e1 -> block -> null

The CATCH_BLOCK pseudo-token is just a handle to the multiple
catch-nodes, so that your try-catch-finally tree will have constant
size:

try
|
block - CATCH_BLOCK - finally_block

Arnar




Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031024/f2663620/attachment.html
From albh at free.fr  Fri Oct 24 13:48:39 2003
From: albh at free.fr (albh_daily)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Problem in building antlr.lib
Message-ID: <bnc377+u0g4@eGroups.com>

Hi all,

I am really new in ANTLR group and I am trying to use ANTLR-2.7.2. 
through MSVC 6.0 software.

My problem is currently to build a static library for antlr 2.7.2
\lib\cpp\src.

Using the antlr.dsw workspace from antlr2.7.2\lib\cpp\src directory, 
it seems that some files 
like "ANTLRExecption.cpp", "LexerSharedInputState.cpp" as welle as 2 
or 3 other files are missing (even if the corresponding hpp files 
are available)

Is there someone able to help me? I have tried the FAQs but I find 
no entries for this problem.

I am currently totally lost on this problem, 
thanks a lot in advance for your help.

Albert.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From JVincent at Novell.Com  Fri Oct 24 16:02:08 2003
From: JVincent at Novell.Com (Jeff Vincent)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] AST generation in a recursive rule...the sequel (Tree parser)
Message-ID: <sf995b1c.028@prv-mail20.provo.novell.com>

Thanks to all those that have helped me so far (Monty, Arnar)!  I am
still struggling to wrap my mind around it and I am now stuck trying to
get a rule to match the tree in the tree parser, so please have patience
('cause I'm losing mine ;).  
 
I built the parser catch rules based on Monty's examples (see below)
and it generates the following AST as shown by ACTUAL output from
toStringList() :
 
      ( CATCHBLOCK ( CATCH ( CATCH ( CATCH ( CATCH Exception1 e1 { )
Exception2 e2 { ) Exception3 e3 { ) Exception4 e4 { ) )
 
Please help me here if I am reading it wrong, but assuming that the
token nearest an opening parenthesis is a sub-tree root, I think the
actual tree I am building translates to the following tree-like form
(siblings right, children down):

 
CATCHBLOCK
   |
   V
CATCH --> Exception4 --> e4 --> block
   |
   V
CATCH --> Exception3 --> e3 --> block
   |
   V
CATCH --> Exception2 --> e2 --> block

   |
   V
CATCH --> null
   |
   V
Exception1 --> e1 --> block
 
I think the output for the tree Monty initially suggested should look
more like the following toStringList() form :
 
     ( CATCHBLOCK ( CATCH Exception4 e4 { ) ( CATCH  Exception3 e3 { )
( CATCH  Exception2 e2 { ) ( CATCH Exception1 e1 { ))
 

but I digress.  My problem now is parsing the actual AST from within
the TreeParser.   Here are my TreeParser rules:

 
 catchBlock :
  #(CATCHBLOCK (catchNodes)+)
  ;
 
 catchNodes :
    #(CATCH catchNodes catchNodes)
  | identifier IDENTIFIER eBlock:.
  ;
 
The above TreeParser rules correctly recurse down and match the "CATCH
Exception1 e1 { " sub-tree, but thereafter gets a NullPointerException
because upon attempting to match "Exception2 e2 {" because the sibling
of the last catch statement is null (I think).  The last catch is also
not consistent with the others (assuming I am seeing it correctly).  I
would appreciate any enlightenment.  Below are my Parser rules that
builds this tree for reference.
 
Thanks for helping me grasp this stuff,

Jeff
 
<----------------Parser Rules----------------->
//Based on examples from Monty taken from previous e-mail thread
catchBlockList :
  ( catchBlockNode )+
  {   ## = #(#[CATCHBLOCK, "catchBlock"], ##);
       String s = #catchBlockList.toStringList();
       System.out.println(s);
  }
  ;

 
 catchBlockNode :
  ( CATCH^ LPAREN! identifier IDENTIFIER RPAREN! block )+
  { String s = #catchBlockNode.toStringList();
     System.out.println(s);
  }
  ;
<----------------Parser Rules: END------------->
 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031024/458c3f2b/attachment.html
From arnarb at oddi.is  Sat Oct 25 03:12:42 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Problem in building antlr.lib
In-Reply-To: <bnc377+u0g4@eGroups.com>
Message-ID: <001001c39ae0$873a42c0$00cf090a@oddi.is>

Hi..

Try Ric Klaren's development snapshot, it contains changes specially for
MSVC:
http://wwwhome.cs.utwente.nl/~klaren/antlr/

If you want to build a DLL, you can check out my instructions on the
antlr.org file sharing section.

Arnar

> -----Original Message-----
> From: albh_daily [mailto:albh@free.fr] 
> Sent: 24. okt?ber 2003 20:49
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Problem in building antlr.lib
> 
> 
> Hi all,
> 
> I am really new in ANTLR group and I am trying to use ANTLR-2.7.2. 
> through MSVC 6.0 software.
> 
> My problem is currently to build a static library for antlr 2.7.2
> \lib\cpp\src.
> 
> Using the antlr.dsw workspace from antlr2.7.2\lib\cpp\src directory, 
> it seems that some files 
> like "ANTLRExecption.cpp", "LexerSharedInputState.cpp" as welle as 2 
> or 3 other files are missing (even if the corresponding hpp files 
> are available)
> 
> Is there someone able to help me? I have tried the FAQs but I find 
> no entries for this problem.
> 
> I am currently totally lost on this problem, 
> thanks a lot in advance for your help.
> 
> Albert.
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Sat Oct 25 03:20:29 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] AST generation in a recursive rule...the sequel (Tree parser)
In-Reply-To: <sf995b1c.028@prv-mail20.provo.novell.com>
Message-ID: <001101c39ae1$9d811f30$00cf090a@oddi.is>

Hello..
 
This tree is probably not what Monty intended. What makes the recursion
is the + in the catchBlockNode rule, I think it's a typo. It should read
 
 catchBlockNode :
  CATCH^ LPAREN! identifier IDENTIFIER RPAREN! block
  ;
 
IMHO the recursive tree doesn't make sense in this situation. Try making
the above change, and you should get the tree
 
(CATCHBLOCK (CATCH Exception1 e1 {) (CATCH Exception2 e2 {) ... )
 
That way, the tree parser rules should present themselves, if not, let
us know and we'll try to help.
 
Arnar

-----Original Message-----
From: Jeff Vincent [mailto:JVincent@Novell.Com] 
Sent: 24. okt?ber 2003 23:02
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] AST generation in a recursive rule...the
sequel (Tree parser)


Thanks to all those that have helped me so far (Monty, Arnar)!  I am
still struggling to wrap my mind around it and I am now stuck trying to
get a rule to match the tree in the tree parser, so please have patience
('cause I'm losing mine ;).  
 
I built the parser catch rules based on Monty's examples (see below) and
it generates the following AST as shown by ACTUAL output from
toStringList() :
 
      ( CATCHBLOCK ( CATCH ( CATCH ( CATCH ( CATCH Exception1 e1 { )
Exception2 e2 { ) Exception3 e3 { ) Exception4 e4 { ) )
 
Please help me here if I am reading it wrong, but assuming that the
token nearest an opening parenthesis is a sub-tree root, I think the
actual tree I am building translates to the following tree-like form
(siblings right, children down):
 
CATCHBLOCK
   |
   V
CATCH --> Exception4 --> e4 --> block
   |
   V
CATCH --> Exception3 --> e3 --> block
   |
   V
CATCH --> Exception2 --> e2 --> block
   |
   V
CATCH --> null
   |
   V
Exception1 --> e1 --> block
 
I think the output for the tree Monty initially suggested should look
more like the following toStringList() form :
 
     ( CATCHBLOCK ( CATCH Exception4 e4 { ) ( CATCH  Exception3 e3 { ) (
CATCH  Exception2 e2 { ) ( CATCH Exception1 e1 { ))
 
but I digress.  My problem now is parsing the actual AST from within the
TreeParser.   Here are my TreeParser rules:
 
 catchBlock :
  #(CATCHBLOCK (catchNodes)+)
  ;
 
 catchNodes :
    #(CATCH catchNodes catchNodes)
  | identifier IDENTIFIER eBlock:.
  ;
 
The above TreeParser rules correctly recurse down and match the "CATCH
Exception1 e1 { " sub-tree, but thereafter gets a NullPointerException
because upon attempting to match "Exception2 e2 {" because the sibling
of the last catch statement is null (I think).  The last catch is also
not consistent with the others (assuming I am seeing it correctly).  I
would appreciate any enlightenment.  Below are my Parser rules that
builds this tree for reference.
 
Thanks for helping me grasp this stuff,

Jeff
 
<----------------Parser Rules----------------->
//Based on examples from Monty taken from previous e-mail thread
catchBlockList :
  ( catchBlockNode )+
  {   ## = #(#[CATCHBLOCK, "catchBlock"], ##);
       String s = #catchBlockList.toStringList();
       System.out.println(s);
  }
  ;
 
 catchBlockNode :
  ( CATCH^ LPAREN! identifier IDENTIFIER RPAREN! block )+
  { String s = #catchBlockNode.toStringList();
     System.out.println(s);
  }
  ;

<----------------Parser Rules: END------------->
 

Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service
<http://docs.yahoo.com/info/terms/> . 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031025/bcf8ed91/attachment.html
From oliver at zeigermann.de  Sun Oct 26 05:36:53 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] THEORY / WAS: antlr vs. sableCC comparison
In-Reply-To: <E96752C0-8E17-11D7-AA73-000393BB647E@jguru.com>
Message-ID: <bngill+hamn@eGroups.com>

I know, this thread is long time dead, but mister know-it-all (=me)
feels some appetite for some weekendly theoretical quarrel.

After understanding the idea to see parsing as an application of
search from this book

http://www.cs.vu.nl/~dick/PTAPG.html

I am not so sure any more, if all LR languages can be parsed by a
backtracking LL parser, even though I thought this before (Terence
might think so as well?!).

Even in guessing mode ANTLR can only do backtracking *depth-first*
search. This limitation is tied to the fact that ANTLR generates
recursive descent code. There is no way to implement e.g.
*breadth-first* with ordinary stack frames. Because of this
depth-first approach ANTLR guessing has the same limitations as
depth-first search: you may not find the optimal solution or may you
may not find a solution at all, although one exists. Applied to
parsing the second limitation can be observed with inifite left
recursive stuff, the first may occur when you have an ambiguous
grammar, i.e. more than one parse tree or more than one solution to
the search. 

Now, as LR does some sort of restricted *breadh-first* search it does
not have these limitations, so I though there may be languages only
expressible by LR. Of course infinite left recursion can be expressed
differently, but what about languages that rely on shortest parse
trees. Are there any imaginable?

Thanks for listening and forbear my figurative way of seeing things, I
am no theoretician, but a practitioner,

Oliver :)

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...>
wrote:
> ANTLR's predicated LL(k) parsers can handle a class of languages
that 
> might be hard to nail down.  Because it has backtracking, it could
in 
> theory (backtracking every single decision) handle all context-free 
> grammars.  Because it has semantic predicates it can handle some 
> context-SENSITIVE languages.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Sun Oct 26 09:22:27 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] BLOG
Message-ID: <bngvsj+q0h4@eGroups.com>

Hi,

I have just read part of the BLOG and find the idea to scan ahead with
an FA a very interesting idea. I noticed, I myself as a human, do
exactly the same when disambiguiting something in a formal language:
scanning ahead until you find the character you are looking for to
decide between the options. So, if this method does not work on a
grammar, the language or the grammar should be fairly unreadable for
humans as well.

Also the concept of template-based code generation was overdue!

Looking forward to ANTLR 3.0 :)

Oliver


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From nico123 at adinet.com.uy  Sun Oct 26 15:53:50 2003
From: nico123 at adinet.com.uy (Nico)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Simple nondeterminism help
References: <001401c39669$0a320a90$00cf090a@oddi.is> <006701c39690$9b929dc0$0200a8c0@viper2000> <E1ABo0I-0003Ve-00@gecko.home.org>
Message-ID: <001301c39c1c$caf50b20$0200a8c0@viper2000>

Thanks, it was very useful.

----- Original Message ----- 
From: <jbb@acm.org>
To: <antlr-interest@yahoogroups.com>
Sent: Tuesday, October 21, 2003 1:20 AM
Subject: Re: [antlr-interest] Simple nondeterminism help


> Hi Nico!
>
> This is probably way too long a reply, but here goes...
>
> You asked (in summary):
> >.....but I still have
> >nondeterminism in number RULE.
> >
> >I am converting a grammar from an BNF And I always have this
nondeterminism
> >errors.
> >
> >Does anybody know some guidelines to avoid this?
>
> ....grammar sniped....
>
> I think that the general concepts of "Left Factoring" and probably
> "Left Recursion Removal" form the sort of guidelines to help avoid
> non-determinism problems in LL grammars.
>
> Any decent compiler book should discuss these concepts.
>
> The rest of this message discusses how I fixed your non-determinism
> problem...
>
> First here is your original grammar with repairs in order to make the
> lexer supply all of the tokens that the parser needs. I hope you will
> agree that this grammar is the same as yours...
>
> -----Begin S2.g-----
> class S2Parser extends Parser;
>
> // nondeterminism here !!
> number :
> (digits LOWER_R)?    // a
> (MINUS)?    // b
> bigDigits    // c
> (DOT bigDigits)?    // d
> (LOWER_E (MINUS)? digits)? // e
>     ;
>
> bigDigits: (bigDigit)+ ;
>
> bigDigit: DIGIT | CAPITALLETTER ;
>
> letter: lowerletter | CAPITALLETTER ;
>
> lowerletter : LOWER_A_D | LOWER_E | LOWER_F_Q | LOWER_R | LOWER_S_Z ;
>
> digits: (DIGIT)+ ;
>
> class S2Lexer extends Lexer;
>
> DOT : '.' ;
> MINUS : '-' ;
>
> DIGIT : '0'..'9' ;
> CAPITALLETTER: 'A'..'Z' ;
>
> LOWER_A_D : 'a'..'d' ;
> LOWER_E   : 'e'      ;
> LOWER_F_Q : 'f'..'q' ;
> LOWER_R   : 'r'      ;
> LOWER_S_Z : 's'..'z' ;
> -----End S2.g-----
>
> and here are some strings that are (apparently) valid numbers under
> your grammar - will use these for testing.
>
> -----Begin test.txt-----
> 2
> -2
> 2.0
> A
> -A
> A.B
> 2r1
> 2r-1
> 2r-1.3
> 2r-1.3e4
> 2r-1.3e-44
> 2rA
> 2r-A
> 2r-A.Be9
> 2r-A.Be-9
> -----End test.txt-----
>
> Our non-determinism problem is that at the beginning of processing of
> the number rule. If the lexer returns a DIGIT token, the parser can
> not know whether that DIGIT is part of the optional 'r' phrase (which
> I marked with the comment // a) or is that DIGIT part of the required
> bigDigits phrase (which I marked with a // c).
>
> And so we must left factor the first 3 phrases of the number
> (e.g. what I marked as a, b, and c).
>
> And here is a grammar that has that left factoring:
>
> -----Begin S2_1.g-----
> class S2Parser extends Parser;
>
> entry : (number EOL)+ EOF;
>
> number : number_front number_tail ;
>
> number_front :
>       (DIGIT)+
> ( LOWER_R (MINUS)? (bigDigit)+
> | CAPITALLETTER (bigDigit)* )?
>     | MINUS (bigDigit)+
>     | CAPITALLETTER (bigDigit)*
>     ;
>
> number_tail : (DOT (bigDigit)+)? (LOWER_E (MINUS)? (DIGIT)+)? ;
>
> bigDigit: DIGIT | CAPITALLETTER ;
>
> letter: lowerletter | CAPITALLETTER ;
>
> lowerletter : LOWER_A_D | LOWER_E | LOWER_F_Q | LOWER_R | LOWER_S_Z ;
>
> class S2Lexer extends Lexer;
>
> options {
>     k = 2;
> }
>
> DOT : '.' ;
> MINUS : '-' ;
>
> DIGIT : '0'..'9' ;
> CAPITALLETTER: 'A'..'Z' ;
>
> LOWER_A_D : 'a'..'d' ;
> LOWER_E   : 'e'      ;
> LOWER_F_Q : 'f'..'q' ;
> LOWER_R   : 'r'      ;
> LOWER_S_Z : 's'..'z' ;
>
> WS  : ( ' '|'\t') { $setType(Token.SKIP); } ;
> EOL : "\r\n"|'\r'|'\n' { newline(); } ;
> -----End S2_1.g-----
>
> Run this grammar with this Main using the test.txt as input and see no
> errors...
>
> -----Begin Main.java-----
> import java.io.*;
>
> class Main {
>     public static void main(String[] args) {
> try {
>     S2Lexer lexer =
> new S2Lexer(new DataInputStream(System.in));
>     S2Parser parser = new S2Parser(lexer);
>     parser.entry();
> } catch(Exception e) {
>     System.err.println("exception: "+e);
> }
>     }
> }
> -----End Main.java-----
>
> And lastly, I believe that the number rule (and all its attendant
> sub-rules) should really be placed in the lexer and not in the
> parser. But haven't really thought about how to do that.
>
> Hope this helps....
>
> -jbb
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From nico123 at adinet.com.uy  Sun Oct 26 15:58:37 2003
From: nico123 at adinet.com.uy (Nico)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Newbie: Simple Parser production error
Message-ID: <006201c39c1d$169d5460$0200a8c0@viper2000>

hi all:

What happens if I have 2 rules starting with the same rule as follows:

ident: (LETTER)+; //(A..Z)+

symbol:
      ident "#" ident
;

keyword:
      ident ":"
;

We can factor to a new rule:

newRule: ident ("#" ident | ":" );

But If I have a rule that uses keyword (ruleUseKeyword), I have to modify it as

ruleUseKeyword: newRule "something";

Therefore, an invalid entry starting with "A#A" (previously identified as symbol)
will be identified by ruleUseKeyword. And only entries like A:A should be the ones..

What im doing wrong?

regards


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031026/96b6634b/attachment.html
From mzukowski at yci.com  Mon Oct 27 08:05:49 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] AST generation in a recursive rule...the seq
	uel (Tree parser)
Message-ID: <72C9789739C4214096AE945753B11EA36B2020@mypxmail04.bco-home.com>

Like Arnar said, I meant the second rule to not have a ()+:

catchBlockList :
  ( catchBlockNode )+
  {   ## = #(#[CATCHBLOCK, "catchBlock"], ##);
       String s = #catchBlockList.toStringList();
       System.out.println(s);
  }
  ;
 
 catchBlockNode :
  CATCH^ LPAREN! identifier IDENTIFIER RPAREN! block 
  { String s = #catchBlockNode.toStringList();
     System.out.println(s);
  }
  ;

Tree parser something like this:

catchBlock :
  #(CATCHBLOCK (catchNodes)+)
  ;
 
 catchNodes :
    #(CATCH identifier IDENTIFIER eBlock:.)
  ;

Note your . for the block means the tree parser will only match the root and
will not decend into that subtree, I assume that is intended.

Monty

-----Original Message-----
From: Jeff Vincent [mailto:JVincent@Novell.Com] 
Sent: Friday, October 24, 2003 4:02 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] AST generation in a recursive rule...the sequel
(Tree parser)

Thanks to all those that have helped me so far (Monty, Arnar)!? I am still
struggling to wrap my mind around it and I am now stuck trying to get a rule
to match the tree in the tree parser, so please have patience ('cause I'm
losing mine ;).??
?
I built the parser catch rules based on?Monty's examples (see below) and it
generates the following AST as shown by ACTUAL output from toStringList() :
?
???? ?( CATCHBLOCK ( CATCH ( CATCH ( CATCH ( CATCH Exception1 e1 { )
Exception2 e2 { ) Exception3 e3 { ) Exception4 e4 { ) )
?
Please help me here if I am reading it wrong, but assuming that the token
nearest an opening parenthesis is a sub-tree root, I think the?actual tree I
am building?translates to the following tree-like form (siblings right,
children down):
?
CATCHBLOCK
?? |
?? V
CATCH --> Exception4 --> e4 --> block
?? |
?? V
CATCH --> Exception3 --> e3 --> block
?? |
?? V
CATCH --> Exception2 --> e2 --> block
?? |
?? V
CATCH --> null
?? |
?? V
Exception1 --> e1 --> block
?
I think the output for the tree Monty initially suggested should look more
like the following toStringList() form :
?
???? ( CATCHBLOCK ( CATCH?Exception4 e4 { ) ( CATCH? Exception3 e3 { ) (
CATCH? Exception2 e2 { ) ( CATCH Exception1 e1 { ))
?
but I digress.? My problem now is parsing the actual AST from within
the?TreeParser.?? Here are my TreeParser rules:
?
?catchBlock :
??#(CATCHBLOCK (catchNodes)+)
??;
?
?catchNodes :
????#(CATCH catchNodes catchNodes)
??|?identifier IDENTIFIER eBlock:.
??;
?
The above TreeParser rules correctly recurse down and match the "CATCH
Exception1 e1 { " sub-tree, but thereafter gets a NullPointerException
because upon attempting to match "Exception2 e2 {" because the sibling of
the last catch statement is null (I think).??The last catch is also not
consistent with the others (assuming I am seeing it correctly).? I would
appreciate any enlightenment.? Below are my Parser rules that builds this
tree for reference.
?
Thanks for helping me grasp this stuff,

Jeff
?
<----------------Parser Rules----------------->
//Based on examples from Monty taken from previous e-mail thread
catchBlockList?:
??( catchBlockNode )+
??{?? ## = #(#[CATCHBLOCK, "catchBlock"], ##);
?????? String s = #catchBlockList.toStringList();
?????? System.out.println(s);
??}
??;
?
?catchBlockNode :
??( CATCH^ LPAREN! identifier IDENTIFIER RPAREN! block )+
??{?String s = #catchBlockNode.toStringList();
???? System.out.println(s);
??}
??;
<----------------Parser Rules: END------------->
?

Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From johnm-antlr at non.net  Mon Oct 27 09:24:59 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] THEORY / WAS: antlr vs. sableCC comparison
In-Reply-To: <bngill+hamn@eGroups.com>
References: <E96752C0-8E17-11D7-AA73-000393BB647E@jguru.com>
	<bngill+hamn@eGroups.com>
Message-ID: <16285.21739.580463.999002@despot.non.net>

>>>>> "Oliver" == Oliver Zeigermann <oliver@zeigermann.de> writes:
[...]

> I know, this thread is long time dead, but mister know-it-all (=me) feels
> some appetite for some weekendly theoretical quarrel.

We love the pain! :-? 

> After understanding the idea to see parsing as an application of search
> from this book

> http://www.cs.vu.nl/~dick/PTAPG.html

FYI, I haven't read it (yet) but that's certainly one way to look at this
subject.

> I am not so sure any more, if all LR languages can be parsed by a
> backtracking LL parser, even though I thought this before (Terence might
> think so as well?!).

Predicated-LL(k) seems to cover an interesting in-between ground.  To me,
it's the combination of both the syntactic (aka backtracking) predicates
and the semantic predicates that makes predicated-LL(k) so useful.

> Even in guessing mode ANTLR can only do backtracking *depth-first*
> search. This limitation is tied to the fact that ANTLR generates
> recursive descent code. There is no way to implement e.g.
> *breadth-first* with ordinary stack frames. Because of this depth-first
> approach ANTLR guessing has the same limitations as depth-first search:
> you may not find the optimal solution or may you may not find a solution
> at all, although one exists. Applied to parsing the second limitation can
> be observed with inifite left recursive stuff, the first may occur when
> you have an ambiguous grammar, i.e. more than one parse tree or more than
> one solution to the search.

This gets into a morass of what "optimal" means (which almost instantly
devolves into a question of who is defining what "optimal" means :-).

That is, one of the key points of LL in general is that the grammar is
really (trying to) express what we expect to see and then tries to match
the input against those expectations.

Predicated-LL deals with syntactic and contextual ambiguities by allowing
us (the grammar developers) to specify strong "preferences" (if you will)
as to how we want our expectations to be met in the face of (certain types
of) ambiguities.

Indeed, given the static nature of the language grammars, we are, perforce,
forced to specify, a priori, a basically static ordering to our
preferences.  Addressing this facet more dynamically is how I would
characterize what Ter's playing with for ANTLR 3.0 (at least given the
talks he and I had low, way too many moons ago now).


> Now, as LR does some sort of restricted *breadh-first* search it does not
> have these limitations, so I though there may be languages only
> expressible by LR. Of course infinite left recursion can be expressed
> differently, but what about languages that rely on shortest parse
> trees. Are there any imaginable?

Let me throw in my periodic rant that most people usually try to do way too
much in each phase of translation.  For example, look at all of the lexer
hacks that keep getting tried. IMNSHOAM, folks persist in trying to do way
too much in the parsers.  I humbly beseech thee to ponder the utility of
utilizing more phases in your translators.


> Thanks for listening and forbear my figurative way of seeing things, I am
> no theoretician, but a practitioner,

Thanks for bringing this issue back to life.

Take care,
	John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From albert.huh at embarcadero.com  Mon Oct 27 10:51:29 2003
From: albert.huh at embarcadero.com (Albert Huh)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] 2.7.2, unicode, and VC++
Message-ID: <715057EB65FC7E47923FE408F290ADFD11F6C7@ettoma01.embarcadero.com>

Thanks for the response.

Just wondering if anybody has an idea when antlr 3.0 is going to be completed?  This year?  Next year?

Thanks for the link to the patch Ric

Albert

-----Original Message-----
From: Ric Klaren [mailto:klaren@cs.utwente.nl]
Sent: Wednesday, October 22, 2003 6:12 AM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] 2.7.2, unicode, and VC++


Hi,

On Tue, Oct 21, 2003 at 11:08:51AM -0400, Albert Huh wrote:
> Is there a patch available for 2.7.2 to support VC++ 6.0 and unicode?  If
> so, does anybody have experience using this patch in a production
> environment?

I have a patch that's a hack on 2.7.1 for unicode and VC 6. It is from
Daniel Fekete (?). It has some issues and in some situations it may not
work correctly (don't ask me where/why it is ages past since I looked at it
and didn't pursue it, there's probably traces in the archive from that
discussion)

I would suspect that there will never be a official version of antlr with
unicode support for VC 6 (maybe VC6 and STLPort). For VC 7.1 and maybe 7.0
yes.

Link to the patch:

http://wwwhome.cs.utwente.nl/~klaren/antlr/antlr-2.7.1-cpp-unicode.patch

It's probably portable to 2.7.2, it's supported up to the point where you
safe it from the link ;) I have no personal experience with it, also no
idea if Daniel is still lurking on the list.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "You can't expect to wield supreme executive power just because some
   watery tot throws a sword at you!"
  --- Monty Python and the Holy Grail


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sunshine at public.kherson.ua  Mon Oct 27 11:14:11 2003
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] 2.7.2, unicode, and VC++
In-Reply-To: <715057EB65FC7E47923FE408F290ADFD11F6C7@ettoma01.embarcadero.com>
Message-ID: <BBC33B23.2785F%sunshine@public.kherson.ua>

on 10/27/03 20:51, Albert Huh at albert.huh@embarcadero.com wrote:

Hi Rick,

> I would suspect that there will never be a official version of antlr with
> unicode support for VC 6 (maybe VC6 and STLPort). For VC 7.1 and maybe 7.0
> yes.

So I wonder,

1) Unicode support for Visual 7.1 already exists ?
    or only planned?

2) what is so different in 7.0 and 7.1 to make difference for Unicode
support?

3) as always I will need port this to CodeWarrior also (as well as to GCC).

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From JVincent at Novell.Com  Mon Oct 27 11:14:31 2003
From: JVincent at Novell.Com (Jeff Vincent)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] AST generation in a recursive rule...the
	sequel (Tree parser)
Message-ID: <sf9d0d4d.072@prv-mail20.provo.novell.com>

Great!  Thanks again Monty/Arnar ... I took out the ()+ and it worked
the first time.  I thought I had tried that, but may have tried it
before I had eliminated other errors in my rules.  
 
And, yes, the "eBlock:." is meant not to descend the subtree for the
block portion of the rule.  The reason is that I am building a run-time
scripting language and the act of parsing an AST during runtime in
effect is causing that sub-tree to be executed.  This means that I can't
parse some things unless certain conditions are met.  In a
try-catch-finally clause, an catch block is only exectued (parsed) if an
exception is caught that matches a defined catch clause (obviously).  In
a for-loop, then the block of the for loop will be executed based on the
number of times the condition is met, etc.  Traditionally, I typically
match only the root node of a conditional statement (IF, WHILE, FOR,
TRY, etc.) and manually pull the subcomponents to be evaluated and
executed based on run-time evaluation.  However, there are times when it
is easier if I can get the tree parser to match it directly, as in the
case of the catch statements.  In this case, I end up building up a
Vector of catch clauses that will be searched when an exception is
caught.  If a matching exception is found, then the corresponding block
will be parsed.  It all works pretty slick if I do say so...given that
it is all interpreted at run-time.
 
Anyway, thanks for your input.
 
Jeff

>>> mzukowski@yci.com 10/27/2003 9:05:49 AM >>>

Like Arnar said, I meant the second rule to not have a ()+:

catchBlockList :
  ( catchBlockNode )+
  {   ## = #(#[CATCHBLOCK, "catchBlock"], ##);
       String s = #catchBlockList.toStringList();
       System.out.println(s);
  }
  ;

catchBlockNode :
  CATCH^ LPAREN! identifier IDENTIFIER RPAREN! block 
  { String s = #catchBlockNode.toStringList();
     System.out.println(s);
  }
  ;

Tree parser something like this:

catchBlock :
  #(CATCHBLOCK (catchNodes)+)
  ;

catchNodes :
    #(CATCH identifier IDENTIFIER eBlock:.)
  ;

Note your . for the block means the tree parser will only match the
root and
will not decend into that subtree, I assume that is intended.

Monty

-----Original Message-----
From: Jeff Vincent [mailto:JVincent@Novell.Com] 
Sent: Friday, October 24, 2003 4:02 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] AST generation in a recursive rule...the
sequel
(Tree parser)

Thanks to all those that have helped me so far (Monty, Arnar)!  I am
still
struggling to wrap my mind around it and I am now stuck trying to get a
rule
to match the tree in the tree parser, so please have patience ('cause
I'm
losing mine ;).  
 
I built the parser catch rules based on Monty's examples (see below)
and it
generates the following AST as shown by ACTUAL output from
toStringList() :
 
      ( CATCHBLOCK ( CATCH ( CATCH ( CATCH ( CATCH Exception1 e1 { )
Exception2 e2 { ) Exception3 e3 { ) Exception4 e4 { ) )
 
Please help me here if I am reading it wrong, but assuming that the
token
nearest an opening parenthesis is a sub-tree root, I think the actual
tree I
am building translates to the following tree-like form (siblings
right,
children down):
 
CATCHBLOCK
   |
   V
CATCH --> Exception4 --> e4 --> block
   |
   V
CATCH --> Exception3 --> e3 --> block
   |
   V
CATCH --> Exception2 --> e2 --> block
   |
   V
CATCH --> null
   |
   V
Exception1 --> e1 --> block
 
I think the output for the tree Monty initially suggested should look
more
like the following toStringList() form :
 
     ( CATCHBLOCK ( CATCH Exception4 e4 { ) ( CATCH  Exception3 e3 { )
(
CATCH  Exception2 e2 { ) ( CATCH Exception1 e1 { ))
 
but I digress.  My problem now is parsing the actual AST from within
the TreeParser.   Here are my TreeParser rules:
 
 catchBlock :
  #(CATCHBLOCK (catchNodes)+)
  ;
 
 catchNodes :
    #(CATCH catchNodes catchNodes)
  | identifier IDENTIFIER eBlock:.
  ;
 
The above TreeParser rules correctly recurse down and match the "CATCH
Exception1 e1 { " sub-tree, but thereafter gets a NullPointerException
because upon attempting to match "Exception2 e2 {" because the sibling
of
the last catch statement is null (I think).  The last catch is also
not
consistent with the others (assuming I am seeing it correctly).  I
would
appreciate any enlightenment.  Below are my Parser rules that builds
this
tree for reference.
 
Thanks for helping me grasp this stuff,

Jeff
 
<----------------Parser Rules----------------->
//Based on examples from Monty taken from previous e-mail thread
catchBlockList :
  ( catchBlockNode )+
  {   ## = #(#[CATCHBLOCK, "catchBlock"], ##);
       String s = #catchBlockList.toStringList();
       System.out.println(s);
  }
  ;
 
 catchBlockNode :
  ( CATCH^ LPAREN! identifier IDENTIFIER RPAREN! block )+
  { String s = #catchBlockNode.toStringList();
     System.out.println(s);
  }
  ;
<----------------Parser Rules: END------------->
 

Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 



Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031027/9269b685/attachment.html
From JVincent at Novell.Com  Mon Oct 27 11:35:47 2003
From: JVincent at Novell.Com (Jeff Vincent)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Can this non-determinism be removed?
Message-ID: <sf9d1132.095@prv-mail20.provo.novell.com>

Hey,
 
I am building a run-time scripting language that can instantiate Java
classes and call methods on the objects (using reflection API).  Today,
when a class type is specified, it has to be preceeded with the keyword
"class", like:
 
class java.lang.String s;
 
However, I want to change it so that the "class" keyword is not
required, and looks more like real java:
 
java.lang.String s;
 
The problem is that the class name has the same format as class member
reference identifier and matches the rule.
 
 identifier :
     IDENTIFIER^ ( arrayNotation )? ( DOT identifier )?
  ;

So the parser is nondeterministic at my start rule because
"java.lang.String" could either be part of a class instance declaration
or a class member reference statement.  My parser's start rule is:
 
 start :
  (   ( d:declaration
     |   s:statement
     )*
  )
  ;
 
Can predicates be used to remove this?  I tried adding one at the start
rule, but my attempts failed.  I can provide more information on other
rules in my parser, but I'm not sure what additional information is
needed, if indeed the ambiguity can be removed.   It may be possible to
move the class declaration out of the declaration sub-rule and make it
part of the start rule, but I am hoping to keep all the declaration
rules together for clarity and readability.
 
Thanks,
 
Jeff

 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031027/ced35188/attachment.html
From dan.stanger at ieee.org  Mon Oct 27 11:44:50 2003
From: dan.stanger at ieee.org (Dan Stanger)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Can this non-determinism be removed?
References: <sf9d1132.095@prv-mail20.provo.novell.com>
Message-ID: <3F9D75B2.8298EC21@ieee.org>

I did a project like this.  One thing that you can do is
to do the reflection on the class and determine what
kind of object it is.  Then use a semantic predicate.

Jeff Vincent wrote:

>  Hey, I am building a run-time scripting language that can instantiate
> Java classes and call methods on the objects (using reflection API).
> Today, when a class type is specified, it has to be preceeded with the
> keyword "class", like: class java.lang.String s; However, I want to
> change it so that the "class" keyword is not required, and looks more
> like real java: java.lang.String s; The problem is that the class name
> has the same format as class member reference identifier and matches
> the rule.  identifier :
>      IDENTIFIER^ ( arrayNotation )? ( DOT identifier )?
>   ;So the parser is nondeterministic at my start rule because
> "java.lang.String" could either be part of a class instance
> declaration or a class member reference statement.  My parser's start
> rule is:  start :
>   (   ( d:declaration
>      |   s:statement
>      )*
>   )
>   ; Can predicates be used to remove this?  I tried adding one at the
> start rule, but my attempts failed.  I can provide more information on
> other rules in my parser, but I'm not sure what additional information
> is needed, if indeed the ambiguity can be removed.   It may be
> possible to move the class declaration out of the declaration sub-rule
> and make it part of the start rule, but I am hoping to keep all the
> declaration rules together for clarity and readability. Thanks, Jeff
>
>
> Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Mon Oct 27 11:58:01 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Re: ANTLR 3.0 schedule
In-Reply-To: <715057EB65FC7E47923FE408F290ADFD11F6C7@ettoma01.embarcadero.com>
Message-ID: <DEAA2CA4-08B7-11D8-AE6D-000A95891192@cs.usfca.edu>

howdy folks, i don't want to get anybody's hopes about a completely  
rewritten version, but next summer should see much of it ready to rock.

I expect a 2.7.3 bug fix release before end of year I hope and perhaps  
an experimental 2.8.0 version before 3.0.

Ter

On Monday, October 27, 2003, at 10:51 AM, Albert Huh wrote:

> Thanks for the response.
>
> Just wondering if anybody has an idea when antlr 3.0 is going to be  
> completed?  This year?  Next year?
>
> Thanks for the link to the patch Ric
>
> Albert
>
> -----Original Message-----
> From: Ric Klaren [mailto:klaren@cs.utwente.nl]
> Sent: Wednesday, October 22, 2003 6:12 AM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] 2.7.2, unicode, and VC++
>
>
> Hi,
>
> On Tue, Oct 21, 2003 at 11:08:51AM -0400, Albert Huh wrote:
>> Is there a patch available for 2.7.2 to support VC++ 6.0 and unicode?  
>>  If
>> so, does anybody have experience using this patch in a production
>> environment?
>
> I have a patch that's a hack on 2.7.1 for unicode and VC 6. It is from
> Daniel Fekete (?). It has some issues and in some situations it may not
> work correctly (don't ask me where/why it is ages past since I looked  
> at it
> and didn't pursue it, there's probably traces in the archive from that
> discussion)
>
> I would suspect that there will never be a official version of antlr  
> with
> unicode support for VC 6 (maybe VC6 and STLPort). For VC 7.1 and maybe  
> 7.0
> yes.
>
> Link to the patch:
>
> http://wwwhome.cs.utwente.nl/~klaren/antlr/antlr-2.7.1-cpp- 
> unicode.patch
>
> It's probably portable to 2.7.2, it's supported up to the point where  
> you
> safe it from the link ;) I have no personal experience with it, also no
> idea if Daniel is still lurking on the list.
>
> Cheers,
>
> Ric
> -- 
> ----- 
> +++++*****************************************************+++++++++---- 
> ---
>     ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722   
> ----
> ----- 
> +++++*****************************************************+++++++++---- 
> ---
>   "You can't expect to wield supreme executive power just because some
>    watery tot throws a sword at you!"
>   --- Monty Python and the Holy Grail
>
>
>
>
> Your use of Yahoo! Groups is subject to  
> http://docs.yahoo.com/info/terms/
>
>
>
>
>
> Your use of Yahoo! Groups is subject to  
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From iank at bearcave.com  Mon Oct 27 12:26:51 2003
From: iank at bearcave.com (iank@bearcave.com)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Re: ANTLR 3.0 and code generation for C++
References: <DEAA2CA4-08B7-11D8-AE6D-000A95891192@cs.usfca.edu>
Message-ID: <200310272026.h9RKQp816121@shell2.webquarry.com>


  Since Ter is a Java kind of guy (I hate to say it but I'm becoming a
  Java kind of guy too), I don't know if the new version will include
  work on the C++ code generator.  Its been a while since I looked at
  the C++ generated source but as I recall it uses reference counted
  strings and other reference counted objects to mirror garbage
  collection in Java.

  I have implemented a reference counting framework that includes a
  reference counted String class.  As with ANTLR there are no
  limitations on the use of this code.  So I'd like to offer it for
  the ANTLR C++ code generator if it would be useful.

  The reference counted String class is losely modeled after the Rogue
  Wave RWCString.  I originally thought that this class would be a
  couple of weekends of work, at most.  I don't think that I've ever
  underestimated development effort as badly.  I've been working on
  this software off and on for about three years.  It has been much
  more work and more complex than I realized.

  The current version is version 3.0.  It may be a bit of overkill for
  ANTLR.  Like RWCString it supports string sections.  The class
  properly implements copy-on-write, which is more complicated that I
  realized (version 2.0 implemented copy-on-read much to my
  surprise).

  The reference counting classes are based on Scott Meyers' reference
  counted classes from "More Effective C++" and include all the
  updates he made in the various editions, plus my changes.  The
  reference counted String is based on a reference counted array
  template.  I include an example of a DoubleVec class (a reference
  counted, copy on write array of doubles).  I try to comment my code
  extensively, but reference to Meyers book might be useful.

  More compilers, including GNU seem to implement "the standard"
  fairly completely.  This code includes regression tests which pass
  on VC++ and GNU.  I've also used Valgrind in an attempt to verify
  memory use.

  The code can be found at

    http://www.bearcave.com/software/string/index.html

  For those who would like to beat up on C++ (sort of like shooting
  fish in a barrel) the complexity of this code is probably a good
  target.  And then there is the fact that I had to use Valgrind...  I
  guess that this is one reason that I'm using Java more for
  applications where performance is not critical.  It's a hard thing
  for an aging C hacker to admit.

  Ian

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From JVincent at Novell.Com  Mon Oct 27 13:42:23 2003
From: JVincent at Novell.Com (Jeff Vincent)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Can this non-determinism be removed?
Message-ID: <sf9d2ed5.077@prv-mail20.provo.novell.com>

I'm not sure I follow completely.  By reflection, do you mean calling
getType() on the token?  I am just using the default object types so
true Java "reflection" doesn't appear to help me in this case.
 
When the parser does some lookahead, it needs to determine the type of
"identifier" (class declaration type or class member reference) in order
to be able to choose whether or not to follow the declaration or
statement sub-rules.  The only way I know how to distinguish between the
two identifier types is by its context (what follows it).  I have a
declaration sub-rule called "variableDeclList" that follows a class
declaration type.  I am tried putting the follwing predicate:
 
 start! :
  (   ((identifier variableDeclList )=> d:declaration
   |   s:statement
   )*
  )
  ;

but this will only descend the declaration sub-rule if it is a class
declaration and try to follow the statement sub-rule if it encounters
any of the other declaration tokens like BOOL or STRING and fail to
match anything.  If I do:
 
 start! :
  (   ( (BOOL | CHAR | BYTE | SHORT | INT | LONG | FLOAT | DOUBLE |
STRING | STRUCT | VECTOR | identifier variableDeclList )=> declaration
   |   s:statement
   )*
  )
  ;

it seems to work but looks messy and requires changes in two places if
additional language types are added.  Is this the best/easiest way?
 
Thanks,
 
Jeff
 
>>> dan.stanger@ieee.org 10/27/2003 12:44:50 PM >>>

I did a project like this.  One thing that you can do is
to do the reflection on the class and determine what
kind of object it is.  Then use a semantic predicate.

Jeff Vincent wrote:

>  Hey, I am building a run-time scripting language that can
instantiate
> Java classes and call methods on the objects (using reflection API).
> Today, when a class type is specified, it has to be preceeded with
the
> keyword "class", like: class java.lang.String s; However, I want to
> change it so that the "class" keyword is not required, and looks
more
> like real java: java.lang.String s; The problem is that the class
name
> has the same format as class member reference identifier and matches
> the rule.  identifier :
>      IDENTIFIER^ ( arrayNotation )? ( DOT identifier )?
>   ;So the parser is nondeterministic at my start rule because
> "java.lang.String" could either be part of a class instance
> declaration or a class member reference statement.  My parser's
start
> rule is:  start :
>   (   ( d:declaration
>      |   s:statement
>      )*
>   )
>   ; Can predicates be used to remove this?  I tried adding one at
the
> start rule, but my attempts failed.  I can provide more information
on
> other rules in my parser, but I'm not sure what additional
information
> is needed, if indeed the ambiguity can be removed.   It may be
> possible to move the class declaration out of the declaration
sub-rule
> and make it part of the start rule, but I am hoping to keep all the
> declaration rules together for clarity and readability. Thanks, Jeff
>
>
> Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service.




Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031027/dfb8151d/attachment.html
From oliver at zeigermann.de  Mon Oct 27 14:01:56 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] THEORY / WAS: antlr vs. sableCC comparison
In-Reply-To: <16285.21739.580463.999002@despot.non.net>
References: <E96752C0-8E17-11D7-AA73-000393BB647E@jguru.com>	<bngill+hamn@eGroups.com> <16285.21739.580463.999002@despot.non.net>
Message-ID: <3F9D95D4.2050205@zeigermann.de>

John D. Mitchell wrote:
>>Even in guessing mode ANTLR can only do backtracking *depth-first*
>>search. This limitation is tied to the fact that ANTLR generates
>>recursive descent code. There is no way to implement e.g.
>>*breadth-first* with ordinary stack frames. Because of this depth-first
>>approach ANTLR guessing has the same limitations as depth-first search:
>>you may not find the optimal solution or may you may not find a solution
>>at all, although one exists. Applied to parsing the second limitation can
>>be observed with inifite left recursive stuff, the first may occur when
>>you have an ambiguous grammar, i.e. more than one parse tree or more than
>>one solution to the search.
> 
> 
> This gets into a morass of what "optimal" means (which almost instantly
> devolves into a question of who is defining what "optimal" means :-).

Well, I could have said, goal nearest to the root or "shortest parse 
tree"...

> That is, one of the key points of LL in general is that the grammar is
> really (trying to) express what we expect to see and then tries to match
> the input against those expectations.
> 
> Predicated-LL deals with syntactic and contextual ambiguities by allowing
> us (the grammar developers) to specify strong "preferences" (if you will)
> as to how we want our expectations to be met in the face of (certain types
> of) ambiguities.
> 
> Indeed, given the static nature of the language grammars, we are, perforce,
> forced to specify, a priori, a basically static ordering to our
> preferences.  Addressing this facet more dynamically is how I would
> characterize what Ter's playing with for ANTLR 3.0 (at least given the
> talks he and I had low, way too many moons ago now).

Hmmm, well, hmmm, I was much more thinking of a really theoretical 
thing. You see, I like ANTLR and prefer it over any LR-stuff, I was just 
wondering where the *theoretical* limitations are.

Oliver



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From noahsingleton at yahoo.com  Mon Oct 27 14:34:00 2003
From: noahsingleton at yahoo.com (noahsingleton)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] createUsingCtor
Message-ID: <bnk6go+e52b@eGroups.com>

Hello everybody,

I just spent an entire day trying to tack down a problem with using 
BEA Weblogic 8.1 and Antlr.  It's somewhat common knowledge that 
Weblogic 8.1 uses 2.7.2 in weblogic.jar (at least a runtime version, 
but if some could verify what is there...many thanks) and using 
antlr in the weblogic environment is supposedly error free.  I 
believe it to be error free if you don't use AST genereation.  

Here's the run down.  When you start up weblogic server, 
weblogic.jar gets loaded into the "system classloader"  (a 
classloader above the system classloader, but they like to call it 
the system classloader).  This is all fine and dandy until you 
deploy an application that uses antlr and AST generation.  The 
problem lies within createUsingCtor, espically in the Class.forName 
statement right after the opening try block. (line 238 in ASTFactory 
v2.7.2).

Since Class.forName is being called from a older ClassLoader, it has 
no way of know of any younger classloader (ones that would be 
associated with EARs, WARs, and RARs) so instantiating any classes 
from withing those libraries will fail.  Placing antlr.jar in the 
WEB-INF or APP-INF/lib directory doesn't seem to fix them problem 
either, due to a classloaders desire to always ask their parents 
first.

One thought I had to fix the problem and hopefully incorporate the 
fix into weblogic.jar is to change the line

    Class.forName(className);

to

    Class.forName(className, true, Thread.getContextClassLoader());

that way the classloader for that thread, hopefully the same one 
that is running through the ear, war, or rar will contain a 
reference to the appropriate library with the ASTs.

Feedback is wellcome, I'm going to try and see if I can make this 
work.

Cheers,
Noah


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Mon Oct 27 14:40:59 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Re: ANTLR 3.0 and code generation for C++
In-Reply-To: <200310272026.h9RKQp816121@shell2.webquarry.com>
Message-ID: <bnk6tr+tj5s@eGroups.com>

--- In antlr-interest@yahoogroups.com, iank@b... wrote:
> 
>   Since Ter is a Java kind of guy (I hate to say it but I'm becoming 
a
>   Java kind of guy too), I don't know if the new version will 
include
>   work on the C++ code generator.  Its been a while since I looked 
at
>   the C++ generated source but as I recall it uses reference counted
>   strings and other reference counted objects to mirror garbage
>   collection in Java.

Ian--

The 3.0 code generator will look very different from the 2.x code 
generators.  It will be driven by an output grammar, with 
language-specific implementations of the output templates.  
Retargeting output to another language should be relatively easy (1000 
LOC versus the current 150,000 LOC).  There are a number of areas 
where Ter wants to do some streamlining, so the support libraries may 
look different from the 2.x libraries; that is still something TBD.  
Stay tuned as the definition develops further--Ter is working in 
"inspired" mode and the intellectual progress being made is 
significant.

--Loring


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From iank at bearcave.com  Mon Oct 27 14:45:32 2003
From: iank at bearcave.com (iank@bearcave.com)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Re: ANTLR 3.0 and code generation for C++
Message-ID: <200310272245.h9RMjW507599@shell2.webquarry.com>



> The 3.0 code generator will look very different from the 2.x code
> generators.  It will be driven by an output grammar, with
> language-specific implementations of the output templates.
> Retargeting output to another language should be relatively easy
> (1000 LOC versus the current 150,000 LOC).  There are a number of
> areas where Ter wants to do some streamlining, so the support
> libraries may look different from the 2.x libraries; that is still
> something TBD.  Stay tuned as the definition develops further--Ter
> is working in "inspired" mode and the intellectual progress being
> made is significant.

  This sounds very cool.  I'll look forward to seeing it.

  Ian

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From katre at henchmonkey.org  Mon Oct 27 15:41:37 2003
From: katre at henchmonkey.org (katre)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Re: ANTLR 3.0 and code generation for C++
In-Reply-To: <bnk6tr+tj5s@eGroups.com>
References: <200310272026.h9RKQp816121@shell2.webquarry.com> <bnk6tr+tj5s@eGroups.com>
Message-ID: <20031027234137.GA9710@henchmonkey.org>

lgcraymer wrote:
> The 3.0 code generator will look very different from the 2.x code 
> generators.  It will be driven by an output grammar, with 
> language-specific implementations of the output templates.  
> Retargeting output to another language should be relatively easy (1000 
> LOC versus the current 150,000 LOC).

How generalized will this be?  So far, with ANTLR 2.x, code is only
generated for OO languages (Java, C++, C#).  I know there was another
output in the past (Haskell?) but will ANTLR be able to target more
functional languages?  My specific favorite target would be OCaml, which
I find I am using more the more I get to know it, but the included lexer
and parser generators are basically translations of lex and yacc and
lack a lot of features I got used to when using ANTLR.

katre


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Mon Oct 27 15:56:22 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Re: ANTLR 3.0 and code generation for C++
In-Reply-To: <20031027234137.GA9710@henchmonkey.org>
Message-ID: <2A70B2B8-08D9-11D8-AE6D-000A95891192@cs.usfca.edu>


On Monday, October 27, 2003, at 03:41 PM, katre wrote:

> lgcraymer wrote:
>> The 3.0 code generator will look very different from the 2.x code
>> generators.  It will be driven by an output grammar, with
>> language-specific implementations of the output templates.
>> Retargeting output to another language should be relatively easy (1000
>> LOC versus the current 150,000 LOC).
>
> How generalized will this be?  So far, with ANTLR 2.x, code is only
> generated for OO languages (Java, C++, C#).  I know there was another
> output in the past (Haskell?) but will ANTLR be able to target more
> functional languages?  My specific favorite target would be OCaml, 
> which
> I find I am using more the more I get to know it, but the included 
> lexer
> and parser generators are basically translations of lex and yacc and
> lack a lot of features I got used to when using ANTLR.

I expect two paths.  If your language is an algol derivative like most 
imperative languages, you should just be able to tell me what assign, 
function call, etc... looks like and it will just work.  Should be ok 
for non-OO stuff like C too.  For wacky stuff like lisp and ocaml, I 
should be able to provide a good framework that doesn't take much 
effort, but it will require some coding / understanding of ANTLR.  The 
imperative languages should be implementable with no coding or almost 
no coding.

It is my dream to do all of the code functionality with ANTLR and then 
simple ask code generators how to do the very mundane tasks of coding 
in that target language.  So if I fig a code gen bug in ANTLR's tree 
action generation, it will fix it in each target.  The only other issue 
is that the libraries will have to be built.  The new version will have 
an exact spec so you know what to build and how it should all work 
together.

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From katre at henchmonkey.org  Mon Oct 27 15:58:29 2003
From: katre at henchmonkey.org (katre)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Re: ANTLR 3.0 and code generation for C++
In-Reply-To: <2A70B2B8-08D9-11D8-AE6D-000A95891192@cs.usfca.edu>
References: <20031027234137.GA9710@henchmonkey.org> <2A70B2B8-08D9-11D8-AE6D-000A95891192@cs.usfca.edu>
Message-ID: <20031027235829.GA13571@henchmonkey.org>

Terence Parr wrote:
> 
> It is my dream to do all of the code functionality with ANTLR and then 
> simple ask code generators how to do the very mundane tasks of coding 
> in that target language.  So if I fig a code gen bug in ANTLR's tree 
> action generation, it will fix it in each target.  The only other issue 
> is that the libraries will have to be built.  The new version will have 
> an exact spec so you know what to build and how it should all work 
> together.

Thhis sounds very exciting.  I can't wait til it's available!

katre


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Mon Oct 27 16:07:39 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] how useful would a generic grammar "action" language be?
Message-ID: <BE047523-08DA-11D8-AE6D-000A95891192@cs.usfca.edu>

Howdy,

Just added a blog entry about a generic action grammar language to 
support reuse of grammars even when they have (simple) actions:

http://www.antlr.org/blog/antlr3/codegen.tml

Is the idea a useful line of research?  I'll have the intermediate form 
underneath the covers anyway...

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Mon Oct 27 16:09:48 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Re: ANTLR 3.0 and code generation for C++
In-Reply-To: <20031027235829.GA13571@henchmonkey.org>
Message-ID: <0B437257-08DB-11D8-AE6D-000A95891192@cs.usfca.edu>


On Monday, October 27, 2003, at 03:58 PM, katre wrote:

> Terence Parr wrote:
>>
>> It is my dream to do all of the code functionality with ANTLR and then
>> simple ask code generators how to do the very mundane tasks of coding
>> in that target language.  So if I fig a code gen bug in ANTLR's tree
>> action generation, it will fix it in each target.  The only other 
>> issue
>> is that the libraries will have to be built.  The new version will 
>> have
>> an exact spec so you know what to build and how it should all work
>> together.
>
> Thhis sounds very exciting.  I can't wait til it's available!

Me neither ;)

I'm finishing up a paper for WWW2004 conference due Nov 14 but then I 
have a bit of jguru work to do.  December / Jan should be heavy ANTLR 
work :)  Next semester I teach the grad prog lang course again so more 
time to do ANTLR stuff. :)

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Matthew.Ford at forward.com.au  Mon Oct 27 16:25:19 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] how useful would a generic grammar "action"
 language be?
References: <BE047523-08DA-11D8-AE6D-000A95891192@cs.usfca.edu>
Message-ID: <004701c39ce9$f836a670$0400a8c0@NOTEBOOK>

Hi All,
I personally only output to one language Java and I would find writing
method code like

declare(name="t", type="int")
assign(lhs="t", rhs="3+4)
functioncall(name="foo", args="t")

obtuse.

matthew

----- Original Message ----- 
From: "Terence Parr" <parrt@cs.usfca.edu>
To: <antlr-interest@yahoogroups.com>
Sent: Tuesday, October 28, 2003 11:07 AM
Subject: [antlr-interest] how useful would a generic grammar "action"
language be?


> Howdy,
>
> Just added a blog entry about a generic action grammar language to
> support reuse of grammars even when they have (simple) actions:
>
> http://www.antlr.org/blog/antlr3/codegen.tml
>
> Is the idea a useful line of research?  I'll have the intermediate form
> underneath the covers anyway...
>
> Ter
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Mon Oct 27 16:37:36 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Re: ANTLR 3.0 and code generation for C++
In-Reply-To: <20031027234137.GA9710@henchmonkey.org>
Message-ID: <bnkdog+gon7@eGroups.com>

If things go right, I will need a C or Fortran to OCaml (or Haskell) 
translator for the HTMT project. [I need first class functions and 
lazy evaluation.]  Ter's aware of that and briefly looked into the 
issues before he got going on ANTLR 3 design/development.  An OCaml 
backend for ANTLR 3 should actually not be difficult since OCaml does 
support classes; for Haskell, modules might be the way to go.

--Loring

--- In antlr-interest@yahoogroups.com, katre <katre@h...> wrote:
> lgcraymer wrote:
> > The 3.0 code generator will look very different from the 2.x code 
> > generators.  It will be driven by an output grammar, with 
> > language-specific implementations of the output templates.  
> > Retargeting output to another language should be relatively easy 
(1000 
> > LOC versus the current 150,000 LOC).
> 
> How generalized will this be?  So far, with ANTLR 2.x, code is only
> generated for OO languages (Java, C++, C#).  I know there was 
another
> output in the past (Haskell?) but will ANTLR be able to target more
> functional languages?  My specific favorite target would be OCaml, 
which
> I find I am using more the more I get to know it, but the included 
lexer
> and parser generators are basically translations of lex and yacc and
> lack a lot of features I got used to when using ANTLR.
> 
> katre


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Mon Oct 27 16:48:48 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Re: how useful would a generic grammar "action" language be?
In-Reply-To: <BE047523-08DA-11D8-AE6D-000A95891192@cs.usfca.edu>
Message-ID: <bnkedg+i8ce@eGroups.com>

Ter--

Something like this would be nice just to generically support semantic 
predicates.  If ANTLR 3 still has the action filter, quite a bit of 
translation could be done there (including source-to-source via some 
sort of macro "equivalence" definition file.

--Loring

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
wrote:
> Howdy,
> 
> Just added a blog entry about a generic action grammar language to 
> support reuse of grammars even when they have (simple) actions:
> 
> http://www.antlr.org/blog/antlr3/codegen.tml
> 
> Is the idea a useful line of research?  I'll have the intermediate 
form 
> underneath the covers anyway...
> 
> Ter
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Mon Oct 27 18:21:59 2003
From: parrt at cs.usfca.edu (parrt2000)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Re: how useful would a generic grammar "action" language be?
In-Reply-To: <004701c39ce9$f836a670$0400a8c0@NOTEBOOK>
Message-ID: <bnkjs7+ct8k@eGroups.com>

--- In antlr-interest@yahoogroups.com, Matthew Ford <Matthew.Ford@f...> wrote:
> Hi All,
> I personally only output to one language Java and I would find writing
> method code like
> 
> declare(name="t", type="int")
> assign(lhs="t", rhs="3+4)
> functioncall(name="foo", args="t")
> 
> obtuse.

Totally.  Sorry for the lack of clarity.  I would abstract a generic statement/
expression language from the C derivatives and then call that the language.  I was 
merely showing off my internal form.  So assignment would be

a = b;

etc...  No pointers probably.  I'd call them object-references instead and do away with 
the '*' so they look like smalltalk, java, C#, etc...

Anyway, it would look like legal code for most common languages, but would actually 
be translated specifically to the target by ANTLR. :)
Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Tue Oct 28 01:25:04 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] 2.7.2, unicode, and VC++
In-Reply-To: <BBC33B23.2785F%sunshine@public.kherson.ua>; from sunshine@public.kherson.ua on Mon, Oct 27, 2003 at 09:14:11PM +0200
References: <715057EB65FC7E47923FE408F290ADFD11F6C7@ettoma01.embarcadero.com> <BBC33B23.2785F%sunshine@public.kherson.ua>
Message-ID: <20031028102503.B9402@cs.utwente.nl>

Hi,

On Mon, Oct 27, 2003 at 09:14:11PM +0200, Ruslan Zasukhin wrote:
> > I would suspect that there will never be a official version of antlr with
> > unicode support for VC 6 (maybe VC6 and STLPort). For VC 7.1 and maybe 7.0
> > yes.
> 
> So I wonder,
> 
> 1) Unicode support for Visual 7.1 already exists ?
>     or only planned?

Only planned.

> 2) what is so different in 7.0 and 7.1 to make difference for Unicode
> support?

Someone who had both compilers told me that 7.1 was a lot more standard
compliant than 7.0, the stuff I plan to use for unicode support will
require a very standard compliant compiler. So I'm carefull with respect to
making promises ;)

> 3) as always I will need port this to CodeWarrior also (as well as to GCC).

Gcc is my development platform so that will always work.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "Good judgement comes from experience.
     Experience comes from bad judgement." --- Unknown


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Tue Oct 28 01:54:04 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Re: ANTLR 3.0 and code generation for C++
In-Reply-To: <200310272026.h9RKQp816121@shell2.webquarry.com>; from iank@bearcave.com on Mon, Oct 27, 2003 at 12:26:51PM -0800
References: <DEAA2CA4-08B7-11D8-AE6D-000A95891192@cs.usfca.edu> <200310272026.h9RKQp816121@shell2.webquarry.com>
Message-ID: <20031028105404.C9402@cs.utwente.nl>

Hi,

On Mon, Oct 27, 2003 at 12:26:51PM -0800, iank@bearcave.com wrote:
>   Since Ter is a Java kind of guy (I hate to say it but I'm becoming a
>   Java kind of guy too), I don't know if the new version will include
>   work on the C++ code generator.

If I find the new version interesting enough I'll put work in it.

>  Its been a while since I looked at
>   the C++ generated source but as I recall it uses reference counted
>   strings and other reference counted objects to mirror garbage
>   collection in Java.

It uses reference counters for the AST and Token objects. Which is actually
a big PITA. Strings are not reference counted (other than what your local
std::string class provides)

>   I have implemented a reference counting framework that includes a
>   reference counted String class.  As with ANTLR there are no
>   limitations on the use of this code.  So I'd like to offer it for
>   the ANTLR C++ code generator if it would be useful.

I might be interested for the new development branch I'm planning on. I'll
have a look at it anycase :)

Thanks!

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Human beings, who are almost unique in having the ability to learn
   from the experience of others, are also remarkable for their apparent
         disinclination to do so. --- Douglas Adams, Last Chance to See


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sunshine at public.kherson.ua  Tue Oct 28 02:01:55 2003
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] 2.7.2, unicode, and VC++
In-Reply-To: <20031028102503.B9402@cs.utwente.nl>
Message-ID: <BBC40B33.27918%sunshine@public.kherson.ua>

on 10/28/03 11:25, Ric Klaren at klaren@cs.utwente.nl wrote:

Hi Rick,

>>> I would suspect that there will never be a official version of antlr with
>>> unicode support for VC 6 (maybe VC6 and STLPort). For VC 7.1 and maybe 7.0
>>> yes.
>> 
>> So I wonder,
>> 
>> 1) Unicode support for Visual 7.1 already exists ?
>>     or only planned?
> 
> Only planned.

What we need for this ?

Last 10 days we have work to include IBM unicode library into our Valentina
database engine kernel.

Now the only part where we have no unicode is ANTLR.
For now we try close eyes on this and do other work.

But in nearest time we very want find way to send UNIOCDE SQL Strings to our
ANTLR's SQL parser.


>> 2) what is so different in 7.0 and 7.1 to make difference for Unicode
>> support?
> 
> Someone who had both compilers told me that 7.1 was a lot more standard
> compliant than 7.0, the stuff I plan to use for unicode support will
> require a very standard compliant compiler. So I'm carefull with respect to
> making promises ;)

Yes, this is true. 7.1 is much better support standard.


>> 3) as always I will need port this to CodeWarrior also (as well as to GCC).
> 
> Gcc is my development platform so that will always work.

Great!

So GCC already support Unicode for ANTLR ?

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tomdz at first.fhg.de  Tue Oct 28 02:06:52 2003
From: tomdz at first.fhg.de (Thomas Dudziak)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Re: ANTLR 3.0 and code generation for C++
In-Reply-To: <20031028105404.C9402@cs.utwente.nl>
References: <DEAA2CA4-08B7-11D8-AE6D-000A95891192@cs.usfca.edu> <200310272026.h9RKQp816121@shell2.webquarry.com> <20031028105404.C9402@cs.utwente.nl>
Message-ID: <3F9E3FBC.2090506@first.fhg.de>

Would it be possible to make the actual char/string type configurable ?  
I for one would like to use std::string as well as CString (MFC) and 
wxString (wxWindows). They all probably supply what is needed for antlr, 
though with different names and additionally they all provide unicode 
versions.
Similiarily, it might be feasible to use the boost library (shared_ptr 
etc.) or even a "real" garbage collection lib (like "More for C++", 
"JUiC++", or the "Boehm-Demers-Weiser Conservative Garbage Collector") ?

Tom



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sunshine at public.kherson.ua  Tue Oct 28 02:16:23 2003
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Re: ANTLR 3.0 and code generation for C++
In-Reply-To: <3F9E3FBC.2090506@first.fhg.de>
Message-ID: <BBC40E97.2791E%sunshine@public.kherson.ua>

on 10/28/03 12:06, Thomas Dudziak at tomdz@first.fhg.de wrote:

> Would it be possible to make the actual char/string type configurable ?
> I for one would like to use std::string as well as CString (MFC) and
> wxString (wxWindows). They all probably supply what is needed for antlr,
> though with different names and additionally they all provide unicode
> versions.

I think for this it needs provide

    antlr::I_String

Interface class.

And we will be able create needed implementation of it to use any other
string classes we want.

> Similiarily, it might be feasible to use the boost library (shared_ptr
> etc.) or even a "real" garbage collection lib (like "More for C++",
> "JUiC++", or the "Boehm-Demers-Weiser Conservative Garbage Collector") ?

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Tue Oct 28 02:28:09 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] how useful would a generic grammar "action" language be?
In-Reply-To: <BE047523-08DA-11D8-AE6D-000A95891192@cs.usfca.edu>; from parrt@cs.usfca.edu on Mon, Oct 27, 2003 at 04:07:39PM -0800
References: <BE047523-08DA-11D8-AE6D-000A95891192@cs.usfca.edu>
Message-ID: <20031028112809.E9402@cs.utwente.nl>

Hi,

On Mon, Oct 27, 2003 at 04:07:39PM -0800, Terence Parr wrote:
> Just added a blog entry about a generic action grammar language to
> support reuse of grammars even when they have (simple) actions:
>
> http://www.antlr.org/blog/antlr3/codegen.tml
>
> Is the idea a useful line of research?  I'll have the intermediate form
> underneath the covers anyway...

As long as one can revert back to the target language and it's not just the
generic action grammar language then it could be usefull. Looking at the
syntax of the intermediate form it might not be that usefull, it looks
quite horrible to use (forgive me for saying ;) ).

>>From a practical point of view I don't really believe in target language
agnostic actions (how nice it would be). There's always something that
screws up somewhere and at some point you need more detailed information
about the types used in the expressions so the right cast or whatever
construct can be used somewhere. Or you get stuck with writing a wrapper
around the parser/lexer just because there's something not implemented in
the generic language.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "You can't expect to wield supreme executive power just because some
   watery tot throws a sword at you!"
  --- Monty Python and the Holy Grail

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Tue Oct 28 03:15:43 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Re: ANTLR 3.0 and code generation for C++
In-Reply-To: <3F9E3FBC.2090506@first.fhg.de>; from tomdz@first.fhg.de on Tue, Oct 28, 2003 at 11:06:52AM +0100
References: <DEAA2CA4-08B7-11D8-AE6D-000A95891192@cs.usfca.edu> <200310272026.h9RKQp816121@shell2.webquarry.com> <20031028105404.C9402@cs.utwente.nl> <3F9E3FBC.2090506@first.fhg.de>
Message-ID: <20031028121543.F9402@cs.utwente.nl>

Hi,

On Tue, Oct 28, 2003 at 11:06:52AM +0100, Thomas Dudziak wrote:
> Would it be possible to make the actual char/string type configurable ?

It will be configurable to support unicode (char/wchar) so a lot of the
support library will move to templates. To what extend I do not know yet
untill I start playing with a new support lib and a modified codegenerator.
I'll probably create a branch next month when I get some more time.

> Similiarily, it might be feasible to use the boost library (shared_ptr
> etc.) or even a "real" garbage collection lib (like "More for C++",
> "JUiC++", or the "Boehm-Demers-Weiser Conservative Garbage Collector") ?

I plan to do a lot of things the C++ way so we'll probably see allocators
for common objects e.g. plugging in a garbage collector or the boehm
library or what else should be possible. I'll probably start with a simple
garbage collector for Tokens/AST nodes. No more reference counter anyway,
that's the main goal.

In short my wishlist (if I get to do all of this I'm happy, but no
guarantees):

- Get rid of the reference counters.
- More templates, to improve configurability
- I want to try how far one would get with a very generic Token interface
  and some TokenTraits object (compare with char_traits) Then maybe see if
  heterogenous tokens are possible.
- Use a configurable class for Token/AST positions (so the designer can choose
  between no token position information, line only, line+column,
  line+colum+file)
- The same for ASTs (traits+positions) and make heterogeneous AST's work.
- Try to get rid off the exceptions for backtracking and error handling (e.g.
  open the way for C codegeneration, and probably significantly boost
  performance, also a good chance to decrease code size)
- Move a lot of algorithms that are currently hooked to ASTFactory to
  separate functions/templates.

While I work on it there will probably be a number of development branch
releases that will not be able to generate java anymore. I don't know
enough of the java generics (?) stuff to know if the ideas can be ported to
java.

Ideas? Comments? Suggestions? Declarations of apparent insanity of yours
truly?

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
   Words fly like arrows
      as if we knew what was right and wrong. --- Chuang Tsu

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Tue Oct 28 03:20:58 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] 2.7.2, unicode, and VC++
In-Reply-To: <BBC40B33.27918%sunshine@public.kherson.ua>; from sunshine@public.kherson.ua on Tue, Oct 28, 2003 at 12:01:55PM +0200
References: <20031028102503.B9402@cs.utwente.nl> <BBC40B33.27918%sunshine@public.kherson.ua>
Message-ID: <20031028122058.G9402@cs.utwente.nl>

Hi,

On Tue, Oct 28, 2003 at 12:01:55PM +0200, Ruslan Zasukhin wrote:
> > Gcc is my development platform so that will always work.
> 
> Great!
> 
> So GCC already support Unicode for ANTLR ?

No. It is possible to hack around stuff (but that's compiler independent)
in the current antlr versions (see the previously posted patch for 2.7.1)
but there's no guarantees it will work 100%. I want to rewrite the whole
support lib for mainly getting rid of the reference counter but can take
along unicode (or wchar/wstring/anystring support) while rewriting (I'd be
crazy if I didn't)

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
   Words fly like arrows
      as if we knew what was right and wrong. --- Chuang Tsu

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jogi1978 at gmx.de  Tue Oct 28 04:13:00 2003
From: jogi1978 at gmx.de (=?iso-8859-1?B?SvZyZyBI5GxrZXI=?=)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] ASTLabelType in c++ mode
Message-ID: <000001c39d4c$d4e55320$0202a8c0@zkom.de>

hi!

i tried to use the ASTLabelType option in c++ mode. but if i do this the
gcc produces an error:

Parser.hpp:115: conflicting return type specified for `virtual RefMyAST
Parser::getAST()'

/usr/antlr/lib/cpp/antlr/Parser.hpp:103: overriding `virtual
antlr::RefAST antlr::Parser::getAST()'


any suggestions what i could do to solve this problem?

thank you

Joerg



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Tue Oct 28 04:30:02 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] ASTLabelType in c++ mode
In-Reply-To: <000001c39d4c$d4e55320$0202a8c0@zkom.de>; from jogi1978@gmx.de on Tue, Oct 28, 2003 at 01:13:00PM +0100
References: <000001c39d4c$d4e55320$0202a8c0@zkom.de>
Message-ID: <20031028133002.H9402@cs.utwente.nl>

On Tue, Oct 28, 2003 at 01:13:00PM +0100, Jrg Hlker wrote:
> i tried to use the ASTLabelType option in c++ mode. but if i do this the
> gcc produces an error:
> 
> Parser.hpp:115: conflicting return type specified for `virtual RefMyAST
> Parser::getAST()'
> 
> /usr/antlr/lib/cpp/antlr/Parser.hpp:103: overriding `virtual
> antlr::RefAST antlr::Parser::getAST()'
> 
> any suggestions what i could do to solve this problem?

Yup that's a problem with the newer gcc's and vc's too I think. Grab a
development snapshot from 

http://wwwhome.cs.utwente.nl/~klaren/antlr/

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Chaos often breeds life, when order breeds habit.
  --- Henry B. Adams, The Education of Henry Adams

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tomdz at first.fhg.de  Tue Oct 28 05:40:09 2003
From: tomdz at first.fhg.de (Thomas Dudziak)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Re: ANTLR 3.0 and code generation for C++
In-Reply-To: <20031028121543.F9402@cs.utwente.nl>
References: <DEAA2CA4-08B7-11D8-AE6D-000A95891192@cs.usfca.edu> <200310272026.h9RKQp816121@shell2.webquarry.com> <20031028105404.C9402@cs.utwente.nl> <3F9E3FBC.2090506@first.fhg.de> <20031028121543.F9402@cs.utwente.nl>
Message-ID: <3F9E71B9.3000904@first.fhg.de>

Don't know whether getting rid of exceptions is a good thing. What error 
mechanism would you use instead ?

Tom



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jogi1978 at gmx.de  Tue Oct 28 05:45:01 2003
From: jogi1978 at gmx.de (=?iso-8859-1?B?SvZyZyBI5GxrZXI=?=)
Date: Mon Dec 20 16:16:03 2004
Subject: AW: [antlr-interest] ASTLabelType in c++ mode
In-Reply-To: <20031028133002.H9402@cs.utwente.nl>
Message-ID: <000001c39d59$aff14260$0202a8c0@zkom.de>

hi,

thats the version i tried... maybe it is a compiler option or something?
i use the gcc via cygwin on windows. i made configure to work with the
--enable-gcj option (without it fails). but "make install" does not
work. so i went to the /antlr/lib/cpp/src and tried 'make'. now im
linking against the generated antlr.a. maybe is there something wrong?

thx

Joerg
> -----Urspr?ngliche Nachricht-----
> Von: Ric Klaren [mailto:klaren@cs.utwente.nl] 
> Gesendet: Dienstag, 28. Oktober 2003 13:30
> An: antlr-interest@yahoogroups.com
> Betreff: Re: [antlr-interest] ASTLabelType in c++ mode
> 
> 
> On Tue, Oct 28, 2003 at 01:13:00PM +0100, J?rg H?lker wrote:
> > i tried to use the ASTLabelType option in c++ mode. but if 
> i do this 
> > the gcc produces an error:
> > 
> > Parser.hpp:115: conflicting return type specified for `virtual 
> > RefMyAST Parser::getAST()'
> > 
> > /usr/antlr/lib/cpp/antlr/Parser.hpp:103: overriding `virtual 
> > antlr::RefAST antlr::Parser::getAST()'
> > 
> > any suggestions what i could do to solve this problem?
> 
> Yup that's a problem with the newer gcc's and vc's too I 
> think. Grab a development snapshot from 
> 
http://wwwhome.cs.utwente.nl/~klaren/antlr/

Cheers,

Ric
--
-----+++++*****************************************************+++++++++
-----+++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++
-----+++++-------
  Chaos often breeds life, when order breeds habit.
  --- Henry B. Adams, The Education of Henry Adams

 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Tue Oct 28 06:31:42 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Re: ANTLR 3.0 and code generation for C++
In-Reply-To: <3F9E71B9.3000904@first.fhg.de>; from tomdz@first.fhg.de on Tue, Oct 28, 2003 at 02:40:09PM +0100
References: <DEAA2CA4-08B7-11D8-AE6D-000A95891192@cs.usfca.edu> <200310272026.h9RKQp816121@shell2.webquarry.com> <20031028105404.C9402@cs.utwente.nl> <3F9E3FBC.2090506@first.fhg.de> <20031028121543.F9402@cs.utwente.nl> <3F9E71B9.3000904@first.fhg.de>
Message-ID: <20031028153142.I9402@cs.utwente.nl>

On Tue, Oct 28, 2003 at 02:40:09PM +0100, Thomas Dudziak wrote:
> Don't know whether getting rid of exceptions is a good thing. What error 
> mechanism would you use instead ?

Return values mainly and probably carry some state around. Getting rid of
the exceptions altogether would also make it very easy to make a C
codegenerator.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 "Don't call me stupid." "Oh, right. To call you stupid would be an insult
    to stupid people. I've known sheep that could outwit you! I've worn
              dresses with higher IQs!" --- A Fish Called Wanda


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mtiller at ford.com  Tue Oct 28 06:41:08 2003
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Re: ANTLR 3.0 and code generation for C++
Message-ID: <6F7AD2AD5765D3118A7A0090278730212A4F6DCB@na1fcm06.dearborn.ford.com>

Ric,

  This all sounds good to me.  You did a pretty good job of listing all the things that I found limiting in the C++ implelementations.  My project is relatively small but makes heavy use of heterogeneous ASTs so I would be willing (assuming I have some time) to try out betas or give you feedback on the heteroAST stuff as it becomes available.

--
Mike

> -----Original Message-----
> From: Ric Klaren [mailto:klaren@cs.utwente.nl]
> Sent: Tuesday, October 28, 2003 6:16 AM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] Re: ANTLR 3.0 and code 
> generation for C++
> 
> 
> Hi,
> 
> On Tue, Oct 28, 2003 at 11:06:52AM +0100, Thomas Dudziak wrote:
> > Would it be possible to make the actual char/string type 
> configurable ?
> 
> It will be configurable to support unicode (char/wchar) so a 
> lot of the
> support library will move to templates. To what extend I do 
> not know yet
> untill I start playing with a new support lib and a modified 
> codegenerator.
> I'll probably create a branch next month when I get some more time.
> 
> > Similiarily, it might be feasible to use the boost library 
> (shared_ptr
> > etc.) or even a "real" garbage collection lib (like "More for C++",
> > "JUiC++", or the "Boehm-Demers-Weiser Conservative Garbage 
> Collector") ?
> 
> I plan to do a lot of things the C++ way so we'll probably 
> see allocators
> for common objects e.g. plugging in a garbage collector or the boehm
> library or what else should be possible. I'll probably start 
> with a simple
> garbage collector for Tokens/AST nodes. No more reference 
> counter anyway,
> that's the main goal.
> 
> In short my wishlist (if I get to do all of this I'm happy, but no
> guarantees):
> 
> - Get rid of the reference counters.
> - More templates, to improve configurability
> - I want to try how far one would get with a very generic 
> Token interface
>   and some TokenTraits object (compare with char_traits) Then 
> maybe see if
>   heterogenous tokens are possible.
> - Use a configurable class for Token/AST positions (so the 
> designer can choose
>   between no token position information, line only, line+column,
>   line+colum+file)
> - The same for ASTs (traits+positions) and make heterogeneous 
> AST's work.
> - Try to get rid off the exceptions for backtracking and 
> error handling (e.g.
>   open the way for C codegeneration, and probably significantly boost
>   performance, also a good chance to decrease code size)
> - Move a lot of algorithms that are currently hooked to ASTFactory to
>   separate functions/templates.
> 
> While I work on it there will probably be a number of 
> development branch
> releases that will not be able to generate java anymore. I don't know
> enough of the java generics (?) stuff to know if the ideas 
> can be ported to
> java.
> 
> Ideas? Comments? Suggestions? Declarations of apparent 
> insanity of yours
> truly?
> 
> Cheers,
> 
> Ric
> --
> -----+++++****************************************************
> *+++++++++-------
>     ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 
> 4893722  ----
> -----+++++****************************************************
> *+++++++++-------
>    Words fly like arrows
>       as if we knew what was right and wrong. --- Chuang Tsu
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Tue Oct 28 07:16:22 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Re: how useful would a generic grammar "action" language be?
In-Reply-To: <BE047523-08DA-11D8-AE6D-000A95891192@cs.usfca.edu>
Message-ID: <bnm186+r9c4@eGroups.com>

Kunle had this to say (see below):

FWIW, I kinda agree with him that a statement/expression level generic
action language probably won't provide vastly improved cross-langauge
reuse due to the differences in the libraries available on each
platform. Not even for Java/C# despite their similarities.

Cheers,

Micheal
ANTLR/C#

> -----Original Message-----
> From: Kunle Odutola
> Sent: 28 October 2003 15:12
> To: Micheal J
> Subject: Re: how useful would a generic grammar "action" language be?
> 
> 
> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> > Howdy,
> >
> > Just added a blog entry about a generic action grammar language to
> > support reuse of grammars even when they have (simple) actions:
> >
> > http://www.antlr.org/blog/antlr3/codegen.tml
> >
> > Is the idea a useful line of research?  I'll have the intermediate
form
> > underneath the covers anyway...
> 
> Micheal,
> 
> This touches on my previous comments a little doesn't it?. I still think
> that this is an ad hoc approach to an eventual "attribute 
> grammar" type
> implementation. Whilst it would be nice to have such a generic action
> grammar language, the differences in the libraries (standard and custom)
> available in the different languages suggests that a higher level action
> language is also needed to make real cross-langauge grammar reuse
possible.
> 
> What I mean by higher level (generic) action language is this: the
generic
> action language should support the sort of operations that action
code in
> grammars are typically used for - attribute 
> evaluation/access/modification,
> symbol table build/update/access, typechecking, AST
> manipulation/transformation, etc. Issues with this approach? -
resources.
> Someone would have to write basic supporting libraries for symbol
tables,
> etc....
> 
> Of course we might simply provide a framework (specified as 
> interfaces) for
> such a library that ANTLR users can fill in if they want to use 
> the higher-level language
> agnostic features. This framework might include interfaces such as
ISymbolTable,
> IContext, IScope, IDeclaration etc.. Not sure how well this gels 
> with non-OO
> and non-imperative languages though.
> 
> Kunle
> 
> > Ter
> > --
> > Professor Comp. Sci., University of San Francisco
> > Creator, ANTLR Parser Generator, http://www.antlr.org
> > Co-founder, http://www.jguru.com
> > Co-founder, http://www.knowspam.net enjoy email again!
> > Co-founder, http://www.peerscope.com pure link sharing


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Tue Oct 28 08:11:06 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] how useful would a generic grammar "action" language be?
In-Reply-To: <BE047523-08DA-11D8-AE6D-000A95891192@cs.usfca.edu>
Message-ID: <20031028161106.3086.qmail@web20416.mail.yahoo.com>

I like it, though the considerable skepticism I see is
understandable... if it can be made to work it would
be definitely be a cool thing...


--- Terence Parr <parrt@cs.usfca.edu> wrote:
> Howdy,
> 
> Just added a blog entry about a generic action
> grammar language to 
> support reuse of grammars even when they have
> (simple) actions:
> 
> http://www.antlr.org/blog/antlr3/codegen.tml
> 
> Is the idea a useful line of research?  I'll have
> the intermediate form 
> underneath the covers anyway...
> 
> Ter
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator,
> http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email
> again!
> Co-founder, http://www.peerscope.com pure link
> sharing
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
Exclusive Video Premiere - Britney Spears
http://launch.yahoo.com/promos/britneyspears/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From arnarb at oddi.is  Tue Oct 28 09:26:36 2003
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Re: how useful would a generic grammar "action" language be?
In-Reply-To: <bnkjs7+ct8k@eGroups.com>
Message-ID: <001801c39d78$a44641d0$00cf090a@oddi.is>

Hello..

> Totally.  Sorry for the lack of clarity.  I would abstract a 
> generic statement/
> expression language from the C derivatives and then call that 
> the language.  I was 
> merely showing off my internal form.  So assignment would be
> 
> a = b;
> 
> etc...  No pointers probably.  I'd call them 
> object-references instead and do away with 
> the '*' so they look like smalltalk, java, C#, etc...
> 
> Anyway, it would look like legal code for most common 
> languages, but would actually 
> be translated specifically to the target by ANTLR. :)
> Ter

How would the user clarify to ANTLR whether he/she is writing their
actions in the target language, or the abstract action language?

Having grammars with actions and all (even just the simple ones) would
be very cool, and it would help out alot when people distribute grammars
and/or use grammars from others. But if the implementation of this would
mean alot of work, is it worth it?

Arnar


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Tue Oct 28 09:54:31 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] how useful would a generic grammar "action" language be?
In-Reply-To: <20031028112809.E9402@cs.utwente.nl>
Message-ID: <C8804AAC-096F-11D8-AE6D-000A95891192@cs.usfca.edu>


On Tuesday, October 28, 2003, at 02:28 AM, Ric Klaren wrote:

> Hi,
>
> On Mon, Oct 27, 2003 at 04:07:39PM -0800, Terence Parr wrote:
>> Just added a blog entry about a generic action grammar language to
>> support reuse of grammars even when they have (simple) actions:
>>
>> http://www.antlr.org/blog/antlr3/codegen.tml
>>
>> Is the idea a useful line of research?  I'll have the intermediate 
>> form
>> underneath the covers anyway...
>
> As long as one can revert back to the target language and it's not 
> just the
> generic action grammar language then it could be usefull. Looking at 
> the
> syntax of the intermediate form it might not be that usefull, it looks
> quite horrible to use (forgive me for saying ;) ).

I corrected my poor explanation...i meant that the user would type

a = b;

not

assign(a,b)

(that is just the internal form).  I'm a parser guy ;)

>> From a practical point of view I don't really believe in target 
>> language
> agnostic actions (how nice it would be). There's always something that
> screws up somewhere and at some point you need more detailed 
> information
> about the types used in the expressions so the right cast or whatever
> construct can be used somewhere. Or you get stuck with writing a 
> wrapper
> around the parser/lexer just because there's something not implemented 
> in
> the generic language.

Yeah, I'm semi-skeptical but it's a nice dream.  Perhaps it will only 
be good for sem preds?

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Tue Oct 28 09:57:02 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Re: how useful would a generic grammar "action" language be?
In-Reply-To: <bnm186+r9c4@eGroups.com>
Message-ID: <2245EE0A-0970-11D8-AE6D-000A95891192@cs.usfca.edu>


On Tuesday, October 28, 2003, at 07:16 AM, micheal_jor wrote:

> Kunle had this to say (see below):
>
> FWIW, I kinda agree with him that a statement/expression level generic
> action language probably won't provide vastly improved cross-langauge
> reuse due to the differences in the libraries available on each
> platform. Not even for Java/C# despite their similarities.

Agreed.  Perhaps the generic language would have exprs, statements, and 
some predefined types like Map, Queue, Stack etc...  You know...all the 
things for symbol table management.  This might be all that we need for 
sem preds.  Hmm...

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Tue Oct 28 09:54:28 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Re: how useful would a generic grammar "action" language be?
In-Reply-To: <001801c39d78$a44641d0$00cf090a@oddi.is>
Message-ID: <bnmagk+4l92@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Arnar Birgisson" <arnarb@o...> 
wrote:
> How would the user clarify to ANTLR whether he/she is writing their
> actions in the target language, or the abstract action language?

Since Ter is just starting to investigate, this is clearly TBD.  I 
would personally favor only having actions in the "action language"; I 
believe that this can be done for type declarations with a 
configuration file which includes type definitions so that types can 
be referred to by name in the ANTLR grammar and you can hide the 
qualifiers and language specificity in the config file.  Almost 
anything can be encapsulated with a function call, so it should not be 
too difficult to define a small action language.  Most of the 
complexity is likely to be in dealing with expressions.

> Having grammars with actions and all (even just the simple ones) 
would
> be very cool, and it would help out alot when people distribute 
grammars
> and/or use grammars from others. But if the implementation of this 
would
> mean alot of work, is it worth it?

There is already an action filter for each target language, and I 
suspect that a port of the action language would only be slightly more 
work than writing a filter.  One of my minor complaints has been that 
AST class code should be generated from specifications and there 
should be an ANTLR way of referencing instance variables (attributes) 
in a non-language-specific way.  Having an action language would be a 
good way to address that.

There are some big wins possible here.  Consider the fairly common 
problem of retargeting a language grammar--to go from a java 
environment to C# or C++ or OCaml, for example.

--Loring

> Arnar


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Tue Oct 28 09:58:16 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] Re: how useful would a generic grammar "action" language be?
In-Reply-To: <001801c39d78$a44641d0$00cf090a@oddi.is>
Message-ID: <4EB27434-0970-11D8-AE6D-000A95891192@cs.usfca.edu>


On Tuesday, October 28, 2003, at 09:26 AM, Arnar Birgisson wrote:
>
> How would the user clarify to ANTLR whether he/she is writing their
> actions in the target language, or the abstract action language?

Good point...perhaps options

language="Cpp"; // generate C++
actions="Cpp"; // accept C++ actions

> Having grammars with actions and all (even just the simple ones) would
> be very cool, and it would help out alot when people distribute 
> grammars
> and/or use grammars from others. But if the implementation of this 
> would
> mean alot of work, is it worth it?

I'll let you know when I get to it ;)

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Tue Oct 28 12:17:22 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] how useful would a generic grammar "action"
 language be?
In-Reply-To: <C8804AAC-096F-11D8-AE6D-000A95891192@cs.usfca.edu>
References: <C8804AAC-096F-11D8-AE6D-000A95891192@cs.usfca.edu>
Message-ID: <3F9ECED2.7070908@zeigermann.de>

Terence Parr wrote:
> Yeah, I'm semi-skeptical but it's a nice dream.  Perhaps it will only 
> be good for sem preds?

For sure, because sem preds are part of the analysis part of the 
grammar. Maybe you could think of completly removing all other synthesis 
actions (except for sem preds and setting of conditions for them of 
course specified in your pseudo-language) from the grammar and find 
another way of specifying semantic actions outside of it. I know sableCC 
elaborated some concepts how to do this. Unfortunately, I have no deeper 
insight into this...

Oliver



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Tue Oct 28 12:46:43 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:16:03 2004
Subject: [antlr-interest] how useful would a generic grammar "action" language be?
In-Reply-To: <3F9ECED2.7070908@zeigermann.de>
Message-ID: <20031028204643.32946.qmail@web20418.mail.yahoo.com>

Okay, also, Ter, you had mentioned using an ANTLR 3
intermediate form for all kinds of goodies... I am
trying to have an idea but I'm too dumb for it.  :)  

We know we have to retain a means of generating
actions even when they are too complex to be specified
in the "action language."  Does it make sense to have
the concept of a target language-specific
implementation of some kind of ANTLR event listener
interface, where the specification is open enough not
to be restricted to OO target languages?  I'm not sure
what the events would consist of; possibly a string
representation of the ANTLR intermediate form... or to
bring the whole thing full circle, a
target-language-specific representation of the
intermediate form, generated according to the same
principles as we are discussing overall?

Does any of that make sense?

-Matt


--- Oliver Zeigermann <oliver@zeigermann.de> wrote:
> Terence Parr wrote:
> > Yeah, I'm semi-skeptical but it's a nice dream. 
> Perhaps it will only 
> > be good for sem preds?
> 
> For sure, because sem preds are part of the analysis
> part of the 
> grammar. Maybe you could think of completly removing
> all other synthesis 
> actions (except for sem preds and setting of
> conditions for them of 
> course specified in your pseudo-language) from the
> grammar and find 
> another way of specifying semantic actions outside
> of it. I know sableCC 
> elaborated some concepts how to do this.
> Unfortunately, I have no deeper 
> insight into this...
> 
> Oliver
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
Exclusive Video Premiere - Britney Spears
http://launch.yahoo.com/promos/britneyspears/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Tue Oct 28 12:56:18 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] how useful would a generic grammar "action" language be?
In-Reply-To: <20031028204643.32946.qmail@web20418.mail.yahoo.com>
Message-ID: <2D43E593-0989-11D8-AE6D-000A95891192@cs.usfca.edu>


On Tuesday, October 28, 2003, at 12:46 PM, Matt Benson wrote:

> Okay, also, Ter, you had mentioned using an ANTLR 3
> intermediate form for all kinds of goodies... I am
> trying to have an idea but I'm too dumb for it.  :)
>
> We know we have to retain a means of generating
> actions even when they are too complex to be specified
> in the "action language."  Does it make sense to have
> the concept of a target language-specific
> implementation of some kind of ANTLR event listener
> interface, where the specification is open enough not
> to be restricted to OO target languages?  I'm not sure
> what the events would consist of; possibly a string
> representation of the ANTLR intermediate form... or to
> bring the whole thing full circle, a
> target-language-specific representation of the
> intermediate form, generated according to the same
> principles as we are discussing overall?
>
> Does any of that make sense?

Not sure exactly what you're trying to get at, but all things will 
become clear as I try to implement something.  We could have two kinds 
of actions: generic antlr actions and language-specific actions.  Not 
sure that is a *good* thing, but it is possible.

Ter

>
> -Matt
>
>
> --- Oliver Zeigermann <oliver@zeigermann.de> wrote:
>> Terence Parr wrote:
>>> Yeah, I'm semi-skeptical but it's a nice dream.
>> Perhaps it will only
>>> be good for sem preds?
>>
>> For sure, because sem preds are part of the analysis
>> part of the
>> grammar. Maybe you could think of completly removing
>> all other synthesis
>> actions (except for sem preds and setting of
>> conditions for them of
>> course specified in your pseudo-language) from the
>> grammar and find
>> another way of specifying semantic actions outside
>> of it. I know sableCC
>> elaborated some concepts how to do this.
>> Unfortunately, I have no deeper
>> insight into this...
>>
>> Oliver
>>
>>
>>
>>
>>
>> Your use of Yahoo! Groups is subject to
>> http://docs.yahoo.com/info/terms/
>>
>>
>
>
> __________________________________
> Do you Yahoo!?
> Exclusive Video Premiere - Britney Spears
> http://launch.yahoo.com/promos/britneyspears/
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Tue Oct 28 14:37:02 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] how useful would a generic grammar "action" language be?
In-Reply-To: <2D43E593-0989-11D8-AE6D-000A95891192@cs.usfca.edu>
Message-ID: <20031028223702.23250.qmail@web20422.mail.yahoo.com>

Basically what I was saying was where
language-agnostic actions are insufficient to perform
a task, as much as possible of the state could be
provided in a language-agnostic way, the purpose being
to minimize the work needed to implement the action
for a given language.

Is that any clearer?

-Matt


--- Terence Parr <parrt@cs.usfca.edu> wrote:
> 
> On Tuesday, October 28, 2003, at 12:46 PM, Matt
> Benson wrote:
> 
> > Okay, also, Ter, you had mentioned using an ANTLR
> 3
> > intermediate form for all kinds of goodies... I am
> > trying to have an idea but I'm too dumb for it. 
> :)
> >
> > We know we have to retain a means of generating
> > actions even when they are too complex to be
> specified
> > in the "action language."  Does it make sense to
> have
> > the concept of a target language-specific
> > implementation of some kind of ANTLR event
> listener
> > interface, where the specification is open enough
> not
> > to be restricted to OO target languages?  I'm not
> sure
> > what the events would consist of; possibly a
> string
> > representation of the ANTLR intermediate form...
> or to
> > bring the whole thing full circle, a
> > target-language-specific representation of the
> > intermediate form, generated according to the same
> > principles as we are discussing overall?
> >
> > Does any of that make sense?
> 
> Not sure exactly what you're trying to get at, but
> all things will 
> become clear as I try to implement something.  We
> could have two kinds 
> of actions: generic antlr actions and
> language-specific actions.  Not 
> sure that is a *good* thing, but it is possible.
> 
> Ter
> 
> >
> > -Matt
> >
> >
> > --- Oliver Zeigermann <oliver@zeigermann.de>
> wrote:
> >> Terence Parr wrote:
> >>> Yeah, I'm semi-skeptical but it's a nice dream.
> >> Perhaps it will only
> >>> be good for sem preds?
> >>
> >> For sure, because sem preds are part of the
> analysis
> >> part of the
> >> grammar. Maybe you could think of completly
> removing
> >> all other synthesis
> >> actions (except for sem preds and setting of
> >> conditions for them of
> >> course specified in your pseudo-language) from
> the
> >> grammar and find
> >> another way of specifying semantic actions
> outside
> >> of it. I know sableCC
> >> elaborated some concepts how to do this.
> >> Unfortunately, I have no deeper
> >> insight into this...
> >>
> >> Oliver
> >>
> >>
> >>
> >>
> >>
> >> Your use of Yahoo! Groups is subject to
> >> http://docs.yahoo.com/info/terms/
> >>
> >>
> >
> >
> > __________________________________
> > Do you Yahoo!?
> > Exclusive Video Premiere - Britney Spears
> > http://launch.yahoo.com/promos/britneyspears/
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/
> >
> >
> >
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator,
> http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email
> again!
> Co-founder, http://www.peerscope.com pure link
> sharing
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
Exclusive Video Premiere - Britney Spears
http://launch.yahoo.com/promos/britneyspears/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Tue Oct 28 14:46:23 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] createUsingCtor
In-Reply-To: <bnk6go+e52b@eGroups.com>
References: <bnk6go+e52b@eGroups.com>
Message-ID: <3F9EF1BF.5070908@zeigermann.de>

I had this classloader problem with Digester and Tomcat. My experience 
is that Thread.getContextClassLoader() almost never contains anything 
sensible. So you should rather try something like 
this.getClass().getClassLoader(). This works.

Anyway, it should be possible for ANTLR to specify a class loader to use 
for ASTFactory. Digester, which creates objects from names all the time, 
allows this as well.

Oliver

noahsingleton wrote:

> Hello everybody,
> 
> I just spent an entire day trying to tack down a problem with using 
> BEA Weblogic 8.1 and Antlr.  It's somewhat common knowledge that 
> Weblogic 8.1 uses 2.7.2 in weblogic.jar (at least a runtime version, 
> but if some could verify what is there...many thanks) and using 
> antlr in the weblogic environment is supposedly error free.  I 
> believe it to be error free if you don't use AST genereation.  
> 
> Here's the run down.  When you start up weblogic server, 
> weblogic.jar gets loaded into the "system classloader"  (a 
> classloader above the system classloader, but they like to call it 
> the system classloader).  This is all fine and dandy until you 
> deploy an application that uses antlr and AST generation.  The 
> problem lies within createUsingCtor, espically in the Class.forName 
> statement right after the opening try block. (line 238 in ASTFactory 
> v2.7.2).
> 
> Since Class.forName is being called from a older ClassLoader, it has 
> no way of know of any younger classloader (ones that would be 
> associated with EARs, WARs, and RARs) so instantiating any classes 
> from withing those libraries will fail.  Placing antlr.jar in the 
> WEB-INF or APP-INF/lib directory doesn't seem to fix them problem 
> either, due to a classloaders desire to always ask their parents 
> first.
> 
> One thought I had to fix the problem and hopefully incorporate the 
> fix into weblogic.jar is to change the line
> 
>     Class.forName(className);
> 
> to
> 
>     Class.forName(className, true, Thread.getContextClassLoader());
> 
> that way the classloader for that thread, hopefully the same one 
> that is running through the ear, war, or rar will contain a 
> reference to the appropriate library with the ASTs.
> 
> Feedback is wellcome, I'm going to try and see if I can make this 
> work.
> 
> Cheers,
> Noah
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From JVincent at Novell.Com  Tue Oct 28 15:23:09 2003
From: JVincent at Novell.Com (Jeff Vincent)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] How to handle negation...
Message-ID: <sf9e97f7.018@prv-mail20.provo.novell.com>

Hey,
 
I am trying to work around an issue in my tree parser with number negation.  The way my rules are set up, the NEGATIVE (negative sign) is separate from the number string itself.  So the number -149 has two nodes whose AST respresentation is:
NEGATIVE("-")*>null
  |
  V
LITERAL_INT("149")-->null
  |
  V
null
Where the unaryExpression has the following:
 
    unaryExpression :
        ...
       | #( NEGATIVE retValue=unaryExpression { negate(retValue); } )
        ...
       ;
 
Through recursion, unaryExpression calls primaryExpression then the number rule.  The number rule converts the "149" string to a real int (Integer.decode("149");) and returns it back to primaryExpression then to unaryExpression where the value is then negated.  This works perfect for all cases except Integer.MIN_VALUE, Long.MIN_VALUE, etc., because the LITERAL_INT portion of the resulting AST (value before negation) is TOO LARGE (by 1) for an Integer (or Long, etc.) and causes a NumberFormatException during the decode().
 
I thought that somehow I could prepend the negative sign before the number is parsed.  I tried the following:
 
    #( NEGATIVE { if (#ue.getType == LITERAL_INT) #ue.setText("-" + #ue.getText()); } retValue = ue:unaryExpression )
 
However, at this stage, #ue is null.  I also tried passing the prefex to the sub-rules, like:
 
    #( NEGATIVE retValue = ue:unaryExpression["-"] )

 
the prefix is then prepended before calling decode().  I think this last option is too messy and both options won't work if someone tries to negate a variable (int j = -i;).  I was hoping someone had a better idea.
 
Thanks,
 
Jeff

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20031028/70eb314c/attachment.html
From oliver at zeigermann.de  Tue Oct 28 15:26:56 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] LL-Regular / WAS: BLOG
In-Reply-To: <bngvsj+q0h4@eGroups.com>
Message-ID: <bnmu00+pb28@eGroups.com>

Talking to myself :)

An example for a grammar that would work with LL-regular is one for
XML start tags and empty elements

startTag : LT NAME (NAME = VALUE)* GT ;

emptyElement : LT NAME (NAME = VALUE)* SLASH GT ;

endTag : LT SLASH NAME GT ;

xmlElement
     : startTag
     	( xmlElement
     	| TEXT
        )*
       endTag
      | emptyElement
    ;

Becaues of the attributes, this will not work with any fixed
lookahead, but would require syntactic predicates in ANTLR 2.x

In ANTLR 3.x a regular scan ahead would do!

That's good!

Oliver

--- In antlr-interest@yahoogroups.com, "Oliver Zeigermann"
<oliver@z...> wrote:
> I have just read part of the BLOG and find the idea to scan ahead with
> an FA a very interesting idea. I noticed, I myself as a human, do
> exactly the same when disambiguiting something in a formal language:
> scanning ahead until you find the character you are looking for to
> decide between the options. So, if this method does not work on a
> grammar, the language or the grammar should be fairly unreadable for
> humans as well.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ld at galador.net  Tue Oct 28 18:23:22 2003
From: ld at galador.net (lloyd_from_far)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] identifier with space
Message-ID: <bnn8aq+7tmf@eGroups.com>

I'm trying to read some command with identifer which might contain 
space. 
I tryed some thing like that 

IDENTIFIER: 
   (IDENTIFIER SPACE ANYNAME) => IDENTIFIER SPACE ANYNAME 
   | NAME ; 
protected NAME options { testLiterals=true; }: 
  'a' .. 'z' ( 'a' .. 'z' | '0' .. '9' | '_' | '$' | '#' | '.' )* ; 
protected ANYNAME options { testLiterals=true; }: 
  ( 'a' .. 'z' | '0' .. '9' | '_' | '$' | '#' | '.' )* ; 

but ANTLR generate an infinite recursion error any idea ?



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Tue Oct 28 18:37:46 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] LL-Regular / WAS: BLOG
In-Reply-To: <bnmu00+pb28@eGroups.com>
Message-ID: <E1651975-09B8-11D8-AE6D-000A95891192@cs.usfca.edu>

Heh, you're right!  It would still be possible to left factor those 
rules, however, making it slightly faster than LL-regular.

Ter

On Tuesday, October 28, 2003, at 03:26 PM, Oliver Zeigermann wrote:

> Talking to myself :)
>
> An example for a grammar that would work with LL-regular is one for
> XML start tags and empty elements
>
> startTag : LT NAME (NAME = VALUE)* GT ;
>
> emptyElement : LT NAME (NAME = VALUE)* SLASH GT ;
>
> endTag : LT SLASH NAME GT ;
>
> xmlElement
>      : startTag
>      	( xmlElement
>      	| TEXT
>         )*
>        endTag
>       | emptyElement
>     ;
>
> Becaues of the attributes, this will not work with any fixed
> lookahead, but would require syntactic predicates in ANTLR 2.x
>
> In ANTLR 3.x a regular scan ahead would do!
>
> That's good!
>
> Oliver
>
> --- In antlr-interest@yahoogroups.com, "Oliver Zeigermann"
> <oliver@z...> wrote:
>> I have just read part of the BLOG and find the idea to scan ahead with
>> an FA a very interesting idea. I noticed, I myself as a human, do
>> exactly the same when disambiguiting something in a formal language:
>> scanning ahead until you find the character you are looking for to
>> decide between the options. So, if this method does not work on a
>> grammar, the language or the grammar should be fairly unreadable for
>> humans as well.
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jbb at acm.org  Tue Oct 28 19:25:35 2003
From: jbb at acm.org (jbb@acm.org)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] identifier with space
In-Reply-To: <bnn8aq+7tmf@eGroups.com> (message from lloyd_from_far on Wed, 29
	Oct 2003 02:23:22 +0000)
References: <bnn8aq+7tmf@eGroups.com>
Message-ID: <E1AEgxj-0005Pv-00@gecko.home.org>


>I'm trying to read some command with identifer which might contain 
>space. 
>I tryed some thing like that 
>
>IDENTIFIER: 
>   (IDENTIFIER SPACE ANYNAME) => IDENTIFIER SPACE ANYNAME 
>   | NAME ; 
>protected NAME options { testLiterals=true; }: 
>  'a' .. 'z' ( 'a' .. 'z' | '0' .. '9' | '_' | '$' | '#' | '.' )* ; 
>protected ANYNAME options { testLiterals=true; }: 
>  ( 'a' .. 'z' | '0' .. '9' | '_' | '$' | '#' | '.' )* ; 
>
>but ANTLR generate an infinite recursion error any idea ?


I am sure I must be missing something obvious but why not use:

IDENTIFIER: 
  'a' .. 'z' ( 'a' .. 'z' | '0' .. '9' | '_' | '$' | '#' | '.' | ' ' )* ; 

I have used something similar to this with a global testLiterals=true;
option. is the local testLiterals option the problem?

Hope this helps...
	-jbb

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ld at galador.net  Tue Oct 28 19:41:11 2003
From: ld at galador.net (lloyd_from_far)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Re: identifier with space
In-Reply-To: <E1AEgxj-0005Pv-00@gecko.home.org>
Message-ID: <bnncsn+b5bd@eGroups.com>

The problem is, with this grammer the string

"SELECT a field with name FROM aTable"

will be cut in 2 tokens:
'SELECT'
'a field with name FROM aTable'

where as I want 4:
'SELECT'
'a field with name'
'FROM'
'aTable'

> I am sure I must be missing something obvious but why not use:
> 
> IDENTIFIER: 
>   'a' .. 'z' ( 'a' .. 'z' | '0' .. '9' | '_' | '$' | '#' | '.' 
| ' ' )* ; 
> 
> I have used something similar to this with a global 
testLiterals=true;
> option. is the local testLiterals option the problem?
> 
> Hope this helps...
> 	-jbb


--- In antlr-interest@yahoogroups.com, jbb@a... wrote:
> 
> >I'm trying to read some command with identifer which might 
contain 
> >space. 
> >I tryed some thing like that 
> >
> >IDENTIFIER: 
> >   (IDENTIFIER SPACE ANYNAME) => IDENTIFIER SPACE ANYNAME 
> >   | NAME ; 
> >protected NAME options { testLiterals=true; }: 
> >  'a' .. 'z' ( 'a' .. 'z' | '0' .. '9' | '_' | '$' | '#' | '.' )
* ; 
> >protected ANYNAME options { testLiterals=true; }: 
> >  ( 'a' .. 'z' | '0' .. '9' | '_' | '$' | '#' | '.' )* ; 
> >
> >but ANTLR generate an infinite recursion error any idea ?
> 
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ld at galador.net  Tue Oct 28 20:06:40 2003
From: ld at galador.net (lloyd_from_far)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] simple question
Message-ID: <bnnecg+mt2r@eGroups.com>

given this (or change this tokens as you see fit):
SELECT: "SELECT" ;
FROM: "FROM" ;
NAME: options { testLiterals=true; }:
	( 'a' .. 'z' );
SPACE: (' ') +;

how would you cut the following string:
"SELECT a field name with plenty of space FROM aTable"

into the 4 following Tokens:
'SELECT'
'a field name with plenty of space'
'FROM'
'aTable'


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jbb at acm.org  Tue Oct 28 20:07:22 2003
From: jbb at acm.org (jbb@acm.org)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Re: identifier with space
In-Reply-To: <bnncsn+b5bd@eGroups.com> (message from lloyd_from_far on Wed, 29
	Oct 2003 03:41:11 +0000)
References: <bnncsn+b5bd@eGroups.com>
Message-ID: <E1AEhcA-0004qe-00@gecko.home.org>


>The problem is, with this grammer the string
>
>"SELECT a field with name FROM aTable"
>
>will be cut in 2 tokens:
>'SELECT'
>'a field with name FROM aTable'
>
>where as I want 4:
>'SELECT'
>'a field with name'
>'FROM'
>'aTable'
>
>> I am sure I must be missing something obvious but why not use:
>> 
>> IDENTIFIER: 
>>   'a' .. 'z' ( 'a' .. 'z' | '0' .. '9' | '_' | '$' | '#' | '.' | ' ' )* ; 
>> 

I guess I am really dense tonite but I do not see the problem here.

The 'F' in "FROM" is not a valid IDENTIFIER character.

So I suppose you get 6 tokens here, assuming Upper-Case letters
are recognized in some other lexer rule. (I guess, just like the
"SELECT" is not recognized as an IDENTIFIER).

the 6 tokens are (i think):
1) SELECT             // recognized by the Upper-Case rule
2) a field with name  // an IDENTIFIER
3) FROM               // recognized by the Upper-Case rule
4) a                  // an IDENTIFIER
5) T                  // recognized by the Upper-Case rule
6) able               // an IDENTIFIER

and we can make it be the 4 you want by:

IDENTIFIER: 
   'a' .. 'z' ( 'A' .. 'Z' | 'a' .. 'z' | '0' .. '9'
              | '_' | '$' | '#' | '.' | ' ' )* ; 

and I assume a lexer rule similar to:

KEYWORD options { testLiterals=true; } : 
   'A' .. 'Z' ( 'A' .. 'Z' | 'a' .. 'z' | '0' .. '9'
              | '_' | '$' | '#' | '.' | ' ' )* ;  // maybe not these

thus IDENTIFIERs begin with a lower case letter and KEYWORDs begin
with an upper case letter.

is that the way SQL works?

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ld at galador.net  Tue Oct 28 20:12:56 2003
From: ld at galador.net (lloyd_from_far)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Re: identifier with space
In-Reply-To: <E1AEhcA-0004qe-00@gecko.home.org>
Message-ID: <bnneo8+5dpj@eGroups.com>

sorry, my example was bad.
let parse this:

SELECT A Field With Name FROM ATable

SQL is case unsensitive.

I think I might have a solution with nongreedy subrule ...
let's investigate ...

--- In antlr-interest@yahoogroups.com, jbb@a... wrote:
> 
> >The problem is, with this grammer the string
> >
> >"SELECT a field with name FROM aTable"
> >
> >will be cut in 2 tokens:
> >'SELECT'
> >'a field with name FROM aTable'
> >
> >where as I want 4:
> >'SELECT'
> >'a field with name'
> >'FROM'
> >'aTable'
> >
> >> I am sure I must be missing something obvious but why not use:
> >> 
> >> IDENTIFIER: 
> >>   'a' .. 'z' ( 'a' .. 'z' | '0' .. '9' | '_' | '$' | '#' | '.' 
| ' ' )* ; 
> >> 
> 
> I guess I am really dense tonite but I do not see the problem here.
> 
> The 'F' in "FROM" is not a valid IDENTIFIER character.
> 
> So I suppose you get 6 tokens here, assuming Upper-Case letters
> are recognized in some other lexer rule. (I guess, just like the
> "SELECT" is not recognized as an IDENTIFIER).
> 
> the 6 tokens are (i think):
> 1) SELECT             // recognized by the Upper-Case rule
> 2) a field with name  // an IDENTIFIER
> 3) FROM               // recognized by the Upper-Case rule
> 4) a                  // an IDENTIFIER
> 5) T                  // recognized by the Upper-Case rule
> 6) able               // an IDENTIFIER
> 
> and we can make it be the 4 you want by:
> 
> IDENTIFIER: 
>    'a' .. 'z' ( 'A' .. 'Z' | 'a' .. 'z' | '0' .. '9'
>               | '_' | '$' | '#' | '.' | ' ' )* ; 
> 
> and I assume a lexer rule similar to:
> 
> KEYWORD options { testLiterals=true; } : 
>    'A' .. 'Z' ( 'A' .. 'Z' | 'a' .. 'z' | '0' .. '9'
>               | '_' | '$' | '#' | '.' | ' ' )* ;  // maybe not 
these
> 
> thus IDENTIFIERs begin with a lower case letter and KEYWORDs begin
> with an upper case letter.
> 
> is that the way SQL works?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ld at galador.net  Tue Oct 28 20:27:48 2003
From: ld at galador.net (lloyd_from_far)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Re: simple question
In-Reply-To: <bnnecg+mt2r@eGroups.com>
Message-ID: <bnnfk4+cdl1@eGroups.com>

OK, I think I had an answer which is unambiguous.
or so so thought, ANTLR is firing me heaps of meaningless ambiguity 
warning which I don't understand.

what about that ? (lexer is case insensitive)

IDENTIFIER: 
	NAME (SPACE | NAME) * 
	{ setText(getText().Trim()); }
	;

protected NAME options { testLiterals=true; }:
	( 'a' .. 'z' | '0' .. '9' | '_' | '$' | '#' | '.' ) +
	;
protected SPACE: (' ') + ;

WS  :   (   SPACE
        |   '\t'
        |   '\r' '\n' { newline(); }
        |   '\n'      { newline(); }
        |   '\r'      { newline(); }
        )
        {$setType(Token.SKIP);} //ignore this token
    ;

--- In antlr-interest@yahoogroups.com, "lloyd_from_far" <ld@g...> 
wrote:
> given this (or change this tokens as you see fit):
> SELECT: "SELECT" ;
> FROM: "FROM" ;
> NAME: options { testLiterals=true; }:
> 	( 'a' .. 'z' );
> SPACE: (' ') +;
> 
> how would you cut the following string:
> "SELECT a field name with plenty of space FROM aTable"
> 
> into the 4 following Tokens:
> 'SELECT'
> 'a field name with plenty of space'
> 'FROM'
> 'aTable'


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ld at galador.net  Tue Oct 28 21:00:03 2003
From: ld at galador.net (lloyd_from_far)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Re: simple question
In-Reply-To: <bnnfk4+cdl1@eGroups.com>
Message-ID: <bnnhgj+68ik@eGroups.com>

that one is better, but still generate 65 lines of warning ...

IDENTIFIER: 
	NAME ( SPACE  | ANYNAME ) * 
	{ setText(getText().Trim()); }
	;
	
protected NAME options { testLiterals=true; } :
	'a' .. 'z' ( 'a' .. 'z' | '0' .. '9' | '_' | '$' | '#' 
| '.' ) +
	;
protected ANYNAME options { testLiterals=true; } :
	( 'a' .. 'z' | '0' .. '9' | '_' | '$' | '#' | '.' ) +
	;
protected SPACE: (' ') + ;

WS  :   (   SPACE
        |   '\t'
        |   '\r' '\n' { newline(); }
        |   '\n'      { newline(); }
        |   '\r'      { newline(); }
        )
        {$setType(Token.SKIP);} //ignore this token
    ;

--- In antlr-interest@yahoogroups.com, "lloyd_from_far" <ld@g...> 
wrote:
> OK, I think I had an answer which is unambiguous.
> or so so thought, ANTLR is firing me heaps of meaningless 
ambiguity 
> warning which I don't understand.
> 
> what about that ? (lexer is case insensitive)
> 
> IDENTIFIER: 
> 	NAME (SPACE | NAME) * 
> 	{ setText(getText().Trim()); }
> 	;
> 
> protected NAME options { testLiterals=true; }:
> 	( 'a' .. 'z' | '0' .. '9' | '_' | '$' | '#' | '.' ) +
> 	;
> protected SPACE: (' ') + ;
> 
> WS  :   (   SPACE
>         |   '\t'
>         |   '\r' '\n' { newline(); }
>         |   '\n'      { newline(); }
>         |   '\r'      { newline(); }
>         )
>         {$setType(Token.SKIP);} //ignore this token
>     ;
> 
> --- In antlr-interest@yahoogroups.com, "lloyd_from_far" <ld@g...> 
> wrote:
> > given this (or change this tokens as you see fit):
> > SELECT: "SELECT" ;
> > FROM: "FROM" ;
> > NAME: options { testLiterals=true; }:
> > 	( 'a' .. 'z' );
> > SPACE: (' ') +;
> > 
> > how would you cut the following string:
> > "SELECT a field name with plenty of space FROM aTable"
> > 
> > into the 4 following Tokens:
> > 'SELECT'
> > 'a field name with plenty of space'
> > 'FROM'
> > 'aTable'


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Tue Oct 28 22:47:48 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] LL-Regular / WAS: BLOG
In-Reply-To: <E1651975-09B8-11D8-AE6D-000A95891192@cs.usfca.edu>
References: <E1651975-09B8-11D8-AE6D-000A95891192@cs.usfca.edu>
Message-ID: <3F9F6294.1040408@zeigermann.de>

Sure, you can left factor. But the resulting grammar would be something 
from less obvious to ugly.

Oliver

Terence Parr wrote:

> Heh, you're right!  It would still be possible to left factor those 
> rules, however, making it slightly faster than LL-regular.
> 
> Ter
> 
> On Tuesday, October 28, 2003, at 03:26 PM, Oliver Zeigermann wrote:
> 
> 
>>Talking to myself :)
>>
>>An example for a grammar that would work with LL-regular is one for
>>XML start tags and empty elements
>>
>>startTag : LT NAME (NAME = VALUE)* GT ;
>>
>>emptyElement : LT NAME (NAME = VALUE)* SLASH GT ;
>>
>>endTag : LT SLASH NAME GT ;
>>
>>xmlElement
>>     : startTag
>>     	( xmlElement
>>     	| TEXT
>>        )*
>>       endTag
>>      | emptyElement
>>    ;
>>
>>Becaues of the attributes, this will not work with any fixed
>>lookahead, but would require syntactic predicates in ANTLR 2.x
>>
>>In ANTLR 3.x a regular scan ahead would do!
>>
>>That's good!
>>
>>Oliver
>>
>>--- In antlr-interest@yahoogroups.com, "Oliver Zeigermann"
>><oliver@z...> wrote:
>>
>>>I have just read part of the BLOG and find the idea to scan ahead with
>>>an FA a very interesting idea. I noticed, I myself as a human, do
>>>exactly the same when disambiguiting something in a formal language:
>>>scanning ahead until you find the character you are looking for to
>>>decide between the options. So, if this method does not work on a
>>>grammar, the language or the grammar should be fairly unreadable for
>>>humans as well.
>>
>>
>>
>>
>>
>>Your use of Yahoo! Groups is subject to 
>>http://docs.yahoo.com/info/terms/
>>
>>
>>
> 
> --
> Professor Comp. Sci., University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Co-founder, http://www.jguru.com
> Co-founder, http://www.knowspam.net enjoy email again!
> Co-founder, http://www.peerscope.com pure link sharing
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From guillaume.helle at cgey.com  Wed Oct 29 01:14:41 2003
From: guillaume.helle at cgey.com (Guillaume Helle)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] TinyBasic and function
Message-ID: <HNIHOH$8F245FD71B929597BF1775814B247F9E@capgemini.fr>

Hello,

i am newbie with Antlr. I have generated and compiled TinyBasic with success ans examples work fine.
Now i want test "function" with TinyBasic interpreter but the parsing fail...
I have try  these syntax without success :

function test (dummy%)
  return dummy%
end function

function test% (dummy%)
  return dummy%
end function

...

Any idea about this?

Thanks for your help,

Guillaume Helle



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pete.forman at westerngeco.com  Wed Oct 29 01:18:32 2003
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] How to handle negation...
In-Reply-To: <sf9e97f7.018@prv-mail20.provo.novell.com>
Message-ID: <5.1.1.1.2.20031029090742.02390300@wgmail2.gatwick.eur.slb.com>

At 2003-10-28 16:23 -0700, Jeff Vincent wrote:
>I am trying to work around an issue in my tree parser with number
>negation.

Here is a fragment of a grammar that generates a single token for a
negative number.

multiplicative_expression
   : unary_expression ((TIMES^|DIVIDE^|MODULO^) unary_expression)*
   ;

unary_expression
   : (unary_primitive_expression) => unary_primitive_expression
   | MINUS^ {#MINUS.setType(UNARY_MINUS);} unary_expression
   | PLUS^  {#PLUS.setType(UNARY_PLUS);} unary_expression
   | NOT^ unary_expression
   | primitive_expression
   ;

unary_primitive_expression
   : MINUS! i:INTEGER_LITERAL {#i.setText("-" + #i.getText());}
   | MINUS! r:REAL_LITERAL    {#r.setText("-" + #r.getText());}
   | PLUS! INTEGER_LITERAL    // discard PLUS token
   | PLUS! REAL_LITERAL       // discard PLUS token
   ;

primitive_expression
   : LPAREN! expression RPAREN!
   | function_call
   | literal
   ;

-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Wed Oct 29 04:17:12 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] ASTLabelType in c++ mode
In-Reply-To: <000001c39d59$aff14260$0202a8c0@zkom.de>; from jogi1978@gmx.de on Tue, Oct 28, 2003 at 02:45:01PM +0100
References: <20031028133002.H9402@cs.utwente.nl> <000001c39d59$aff14260$0202a8c0@zkom.de>
Message-ID: <20031029131712.K9402@cs.utwente.nl>

On Tue, Oct 28, 2003 at 02:45:01PM +0100, Jrg Hlker wrote:
> thats the version i tried... maybe it is a compiler option or something?
> i use the gcc via cygwin on windows. i made configure to work with the
> --enable-gcj option (without it fails). but "make install" does not
> work. so i went to the /antlr/lib/cpp/src and tried 'make'. now im
> linking against the generated antlr.a. maybe is there something wrong?

Could you try the new snapshot? I just put a new one online. You will have
to explicitly cast the return from getAST to your AST type now, something
like:

RefMyAST ret = RefMyAST(parser.getAST());

What went wrong with configure btw ? Did it fail to find javac? Try running
configure with: 

JAVAC=<pathtojavac>/javac ./configure

Or try one of the options to specify where java is installed (try --help)?

The configure script was not really written to support cygwin but it would
be nice to fix it.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 "Don't call me stupid." "Oh, right. To call you stupid would be an insult
    to stupid people. I've known sheep that could outwit you! I've worn
              dresses with higher IQs!" --- A Fish Called Wanda


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Wed Oct 29 09:36:44 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] LL-Regular / WAS: BLOG
In-Reply-To: <3F9F6294.1040408@zeigermann.de>
Message-ID: <7694FD58-0A36-11D8-AE6D-000A95891192@cs.usfca.edu>


On Tuesday, October 28, 2003, at 10:47 PM, Oliver Zeigermann wrote:

> Sure, you can left factor. But the resulting grammar would be something
> from less obvious to ugly.

And, most importantly, you can't do any actions in your grammar until 
after the common left-factored prefix. :(  Veryyyyyy inconvenient ;)

ANTLR 3 will kick butt!  Woohooo!

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lubos.vnuk at rts.at  Wed Oct 29 09:39:36 2003
From: lubos.vnuk at rts.at (Lubos Vnuk)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Re: simple question
In-Reply-To: <bnnecg+mt2r@eGroups.com>
Message-ID: <bnou0o+hfb@eGroups.com>

You might be mixing up the meaning of lexer and parser somewhat.

I suggest you should get a single SELECT token, then a series of ID 
tokens (ignoring the WS in the lexer), then a FROM token and an ID 
token. This would be the lexer's task.

In your parser you define a rule to put it together, something like 
this:
select_stmt: SELECT (ID)+ FROM ID;

I think you have a few SQL grammars at www.antlr.org to study from.

HTH,
Lubos.

--- In antlr-interest@yahoogroups.com, "lloyd_from_far" <ld@g...> 
wrote:
> given this (or change this tokens as you see fit):
> SELECT: "SELECT" ;
> FROM: "FROM" ;
> NAME: options { testLiterals=true; }:
> 	( 'a' .. 'z' );
> SPACE: (' ') +;
> 
> how would you cut the following string:
> "SELECT a field name with plenty of space FROM aTable"
> 
> into the 4 following Tokens:
> 'SELECT'
> 'a field name with plenty of space'
> 'FROM'
> 'aTable'


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Wed Oct 29 10:15:41 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Re: identifier with space
In-Reply-To: <bnneo8+5dpj@eGroups.com>
Message-ID: <bnp04d+h4cb@eGroups.com>

--- In antlr-interest@yahoogroups.com, "lloyd_from_far" <ld@g...> 
wrote:
> sorry, my example was bad.
> let parse this:
> 
> SELECT A Field With Name FROM ATable
> 

Lloyd--

You're trying to do too much in the lexer--spaces are significant for 
separating tokens in your example.  If you really want "A Field With 
Name" as a single AST node, you are probably better off reconstructing 
it:

select
    :
    "SELECT" text "FROM" text
    ;

text
{ String foo }
    :
    a:IDENTIFIER { foo = $a.getText(); }
    { b:IDENTIFIER! { foo += " " + $b.getText(); } )*
    { $a.setText(foo); }
    ;

That also has the advantage of converting text to a canonical form 
with single spaces--you really don't want "A    field" to be different 
than "A field", do you?
    
--Loring


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mas01sd at mcs.gold.ac.uk  Wed Oct 29 10:43:10 2003
From: mas01sd at mcs.gold.ac.uk (Sebastian Danicic)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] unsubscribe
In-Reply-To: <bnp04d+h4cb@eGroups.com>
Message-ID: <Pine.LNX.4.44.0310291842490.16133-100000@igor.gold.ac.uk>

unsubscribe



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ld at galador.net  Wed Oct 29 13:19:57 2003
From: ld at galador.net (lloyd_from_far)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Re: simple question
In-Reply-To: <bnou0o+hfb@eGroups.com>
Message-ID: <bnpatt+1r3b@eGroups.com>

thanks Lubos.
I did think to that, but I need to know the EXACT number of space in 
this particular case.
thought space should be dismissed any other time.
and that's part of the problem your solution, thought handy, 
unfortunately seems to neglect ...

--- In antlr-interest@yahoogroups.com, "Lubos Vnuk" 
<lubos.vnuk@r...> wrote:
> You might be mixing up the meaning of lexer and parser somewhat.
> 
> I suggest you should get a single SELECT token, then a series of 
ID 
> tokens (ignoring the WS in the lexer), then a FROM token and an ID 
> token. This would be the lexer's task.
> 
> In your parser you define a rule to put it together, something 
like 
> this:
> select_stmt: SELECT (ID)+ FROM ID;
> 
> I think you have a few SQL grammars at www.antlr.org to study from.
> 
> HTH,
> Lubos.
> 
> --- In antlr-interest@yahoogroups.com, "lloyd_from_far" <ld@g...> 
> wrote:
> > given this (or change this tokens as you see fit):
> > SELECT: "SELECT" ;
> > FROM: "FROM" ;
> > NAME: options { testLiterals=true; }:
> > 	( 'a' .. 'z' );
> > SPACE: (' ') +;
> > 
> > how would you cut the following string:
> > "SELECT a field name with plenty of space FROM aTable"
> > 
> > into the 4 following Tokens:
> > 'SELECT'
> > 'a field name with plenty of space'
> > 'FROM'
> > 'aTable'


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ld at galador.net  Wed Oct 29 13:42:01 2003
From: ld at galador.net (lloyd_from_far)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Re: simple question
In-Reply-To: <bnou0o+hfb@eGroups.com>
Message-ID: <bnpc79+co8r@eGroups.com>

I just understand you: you completely misunderstood me
I absolutely NOT counfound parser & lexer in this particular case 
(but YOU did)
I actually already do
select: SELECT (ID)+ FROM

the problem is ' ' is NOT a separator (which is ','), it's part of 
the name of the ID !!!

I did thougt to do reconstruct the real ID with something like that 
(and this time, blurring the functionality of lexer or parser, as 
you unknowingly suggested)

select
{
 string tokText;
}:
  SELECT tokText=idname{...} (COMMA tokText=idname {...})* FROM ...;

idname [return s]
{
string s = "";
}:
  t:ID { s += t.getText(); }
  (
    t2:ID! { s += t.getText(); }
  )*


but I still don't have the exact number of spaces ... 
it could be 2 !... (or 3 ?! or more ?!)

I thought to deactivate space skipping, but I did it once and 
quickly forget it ... (too awfull)


--- In antlr-interest@yahoogroups.com, "Lubos Vnuk" 
<lubos.vnuk@r...> wrote:
> You might be mixing up the meaning of lexer and parser somewhat.
> 
> I suggest you should get a single SELECT token, then a series of 
ID 
> tokens (ignoring the WS in the lexer), then a FROM token and an ID 
> token. This would be the lexer's task.
> 
> In your parser you define a rule to put it together, something 
like 
> this:
> select_stmt: SELECT (ID)+ FROM ID;
> 
> I think you have a few SQL grammars at www.antlr.org to study from.
> 
> HTH,
> Lubos.
> 
> --- In antlr-interest@yahoogroups.com, "lloyd_from_far" <ld@g...> 
> wrote:
> > given this (or change this tokens as you see fit):
> > SELECT: "SELECT" ;
> > FROM: "FROM" ;
> > NAME: options { testLiterals=true; }:
> > 	( 'a' .. 'z' );
> > SPACE: (' ') +;
> > 
> > how would you cut the following string:
> > "SELECT a field name with plenty of space FROM aTable"
> > 
> > into the 4 following Tokens:
> > 'SELECT'
> > 'a field name with plenty of space'
> > 'FROM'
> > 'aTable'


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ld at galador.net  Wed Oct 29 13:47:29 2003
From: ld at galador.net (lloyd_from_far)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Re: identifier with space
In-Reply-To: <bnp04d+h4cb@eGroups.com>
Message-ID: <bnpchh+8qut@eGroups.com>

Hi Loring,

I do want to separate "A Field" (1 space) from "A  Field" (2 spaces)
it's not my fault if I have to write a ADO.NET driver to a stupid & 
so-called "database"

anyway managing 1 space (and only one) is certainly better than no 
space at all !!
obviously I hit here a limitation of ANTLR, I guess I have to do as 
you suggested, would be better than nothing.

thanks for the feeback ;-)

--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> --- In antlr-interest@yahoogroups.com, "lloyd_from_far" <ld@g...> 
> wrote:
> > sorry, my example was bad.
> > let parse this:
> > 
> > SELECT A Field With Name FROM ATable
> > 
> 
> Lloyd--
> 
> You're trying to do too much in the lexer--spaces are significant 
for 
> separating tokens in your example.  If you really want "A Field 
With 
> Name" as a single AST node, you are probably better off 
reconstructing 
> it:
> 
> select
>     :
>     "SELECT" text "FROM" text
>     ;
> 
> text
> { String foo }
>     :
>     a:IDENTIFIER { foo = $a.getText(); }
>     { b:IDENTIFIER! { foo += " " + $b.getText(); } )*
>     { $a.setText(foo); }
>     ;
> 
> That also has the advantage of converting text to a canonical form 
> with single spaces--you really don't want "A    field" to be 
different 
> than "A field", do you?
>     
> --Loring


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mjc at 72dpi.com.au  Wed Oct 29 14:11:06 2003
From: mjc at 72dpi.com.au (Michael Cahill)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Re: python generator for ANTLR progressing again
In-Reply-To: <1BABC25E-E940-11D7-894B-000A95891192@antlr.org>
Message-ID: <bnpdtq+t8br@eGroups.com>

> Amol Dharmadhikari, a superhuman student at USF, has been working on a 
> Python generator for ANTLR, but has gotten stuck working at his job and 
> cannot finish it.  He says, "The current version is just the jython 
> code generator i.e. to access it you will need some java classes and so 
> you need jython.  I also have also attached the jar of the entire 
> project imported into eclipse that has the python code generator files."
> 
> I'm posting this stuff in the file sharing section of antlr.org.

Thanks!  That's where I found out about it.

> Hans Vangheluwe has interest in moving this project forward so if you 
> want to work on this also, please coordinate with Hans.

I'm also interested - how can I get in touch with Hans?  Alternatively, Hans, if you're 
on the list, can you contact me?

More generally, is there a "projects" page somewhere for things like this with contact 
details for the lead / maintainer?

> I'm pretty sure Amol got a jython version working.  Can anybody confirm?

The generated Python code looks pretty good to me, but I don't know Jython so I can't 
confirm if it works out of the box.  I've started on implementing the ANTLR runtime 
classes in Python so generated code can be run by standard Python.

It would be great to get this working - I don't know of a really good parser 
generator for Python.

Michael.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mtiller at ford.com  Wed Oct 29 14:15:54 2003
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Re: python generator for ANTLR progressing a
	gain
Message-ID: <6F7AD2AD5765D3118A7A0090278730212A4F6DDF@na1fcm06.dearborn.ford.com>

Mike,

  Hans' email is hv@cs.mcgill.ca.  If you have trouble contacting him, let me know.

--
Mike

> -----Original Message-----
> From: Michael Cahill [mailto:mjc@72dpi.com.au]
> Sent: Wednesday, October 29, 2003 5:11 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: python generator for ANTLR progressing
> again
> 
> 
> > Amol Dharmadhikari, a superhuman student at USF, has been 
> working on a 
> > Python generator for ANTLR, but has gotten stuck working at 
> his job and 
> > cannot finish it.  He says, "The current version is just the jython 
> > code generator i.e. to access it you will need some java 
> classes and so 
> > you need jython.  I also have also attached the jar of the entire 
> > project imported into eclipse that has the python code 
> generator files."
> > 
> > I'm posting this stuff in the file sharing section of antlr.org.
> 
> Thanks!  That's where I found out about it.
> 
> > Hans Vangheluwe has interest in moving this project forward 
> so if you 
> > want to work on this also, please coordinate with Hans.
> 
> I'm also interested - how can I get in touch with Hans?  
> Alternatively, Hans, if you're 
> on the list, can you contact me?
> 
> More generally, is there a "projects" page somewhere for 
> things like this with contact 
> details for the lead / maintainer?
> 
> > I'm pretty sure Amol got a jython version working.  Can 
> anybody confirm?
> 
> The generated Python code looks pretty good to me, but I 
> don't know Jython so I can't 
> confirm if it works out of the box.  I've started on 
> implementing the ANTLR runtime 
> classes in Python so generated code can be run by standard Python.
> 
> It would be great to get this working - I don't know of a 
> really good parser 
> generator for Python.
> 
> Michael.
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Wed Oct 29 15:07:32 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Re: identifier with space
In-Reply-To: <bnpchh+8qut@eGroups.com>
Message-ID: <bnph7k+3rvj@eGroups.com>

Lloyd--

Check out the "Token Streams" part of the ANTLR manual.  I think that 
you can capture the whitespace as hidden tokens and then access that 
for reconstructing the input.  I've not had occasion to use this 
feature, but it was put in for just this purpose.

--Loring


--- In antlr-interest@yahoogroups.com, "lloyd_from_far" <ld@g...> 
wrote:
> Hi Loring,
> 
> I do want to separate "A Field" (1 space) from "A  Field" (2 spaces)
> it's not my fault if I have to write a ADO.NET driver to a stupid & 
> so-called "database"
> 
> anyway managing 1 space (and only one) is certainly better than no 
> space at all !!
> obviously I hit here a limitation of ANTLR, I guess I have to do as 
> you suggested, would be better than nothing.
> 
> thanks for the feeback ;-)
> 
> --- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> > --- In antlr-interest@yahoogroups.com, "lloyd_from_far" <ld@g...> 
> > wrote:
> > > sorry, my example was bad.
> > > let parse this:
> > > 
> > > SELECT A Field With Name FROM ATable
> > > 
> > 
> > Lloyd--
> > 
> > You're trying to do too much in the lexer--spaces are significant 
> for 
> > separating tokens in your example.  If you really want "A Field 
> With 
> > Name" as a single AST node, you are probably better off 
> reconstructing 
> > it:
> > 
> > select
> >     :
> >     "SELECT" text "FROM" text
> >     ;
> > 
> > text
> > { String foo }
> >     :
> >     a:IDENTIFIER { foo = $a.getText(); }
> >     { b:IDENTIFIER! { foo += " " + $b.getText(); } )*
> >     { $a.setText(foo); }
> >     ;
> > 
> > That also has the advantage of converting text to a canonical form 
> > with single spaces--you really don't want "A    field" to be 
> different 
> > than "A field", do you?
> >     
> > --Loring


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ruzicd at yahoo.com  Wed Oct 29 23:19:53 2003
From: ruzicd at yahoo.com (Dalibor Ruzic)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] how useful would a generic grammar "action" language be?
In-Reply-To: <20031028223702.23250.qmail@web20422.mail.yahoo.com>
Message-ID: <20031030071953.12342.qmail@web20603.mail.yahoo.com>

Hi,

I'm developing concept that I call it foreign language
and which is basicly generic language.

In file options I add new option:

foreignLanguageSupport=<fileName>

and in this file I declare used languages.

then when I want to use declared language I put:

$>language>

where language is name of declared language.

After that you write code in that language and by
declared grammar class it is transformed in
appropriate
(Java, C++, C#) language that is ready to be compiled
with rest of your gramar.

When language is finished simply put <$ at begin of
line. 

Big advantage of this concept is that it is extensible
because you can use any language if you create grammar
that transfoms it in language used in the rest of
grammar.

If there is interest I can send modified Antlr 2.7.2
for integration with new language.

Dalibor Rui&#263;

__________________________________
Do you Yahoo!?
Exclusive Video Premiere - Britney Spears
http://launch.yahoo.com/promos/britneyspears/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Thu Oct 30 01:48:46 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Re: how useful would a generic grammar "action" language be?
In-Reply-To: <20031030071953.12342.qmail@web20603.mail.yahoo.com>
Message-ID: <bnqmpu+q2mc@eGroups.com>

--- In antlr-interest@yahoogroups.com, Dalibor Ruzic <ruzicd@y...> wrote:
> Hi,
> 
> I'm developing concept that I call it foreign language
> and which is basicly generic language.
> 
> In file options I add new option:
> 
> foreignLanguageSupport=<fileName>
> 
> and in this file I declare used languages.

Do you mean that action grammar is written into this file or just the
declarations of the language(s) to support?

> then when I want to use declared language I put:
> 
> $>language>
> 
> where language is name of declared language.

Where is this put?. In the action grammar segment?

> After that you write code in that language and by
> declared grammar class it is transformed in
> appropriate
> (Java, C++, C#) language that is ready to be compiled
> with rest of your gramar.
> 
> When language is finished simply put <$ at begin of
> line. 
> 
> Big advantage of this concept is that it is extensible
> because you can use any language if you create grammar
> that transfoms it in language used in the rest of
> grammar.
> 
> If there is interest I can send modified Antlr 2.7.2
> for integration with new language.

Please do send it (use the website fileshare or this group's Files
upload feature). And with examples of using it. I'm still a little
unsure about exactly how your system works and how it will be used.

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From dpawson at nildram.co.uk  Thu Oct 30 02:44:05 2003
From: dpawson at nildram.co.uk (Dave Pawson)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] 272 documentation
Message-ID: <6.0.0.22.2.20031030104118.029257b8@pop3.nildram.co.uk>

Refers to http://www.jguru.com/faq/view.jsp?EID=78 in the getting started 
section

An example there uses class AST


// Get the tree out of the parser
   AST resultTree = parser.getAST();

This fails to compile using the antlr jar file.

Any suggestions please?

There appears to be a factory approach, but not used in this example.
Is it out of date?

TIA DaveP






 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rbo at acm.org  Thu Oct 30 03:47:40 2003
From: rbo at acm.org (Rodrigo B. de Oliveira)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Re: python generator for ANTLR progressing again
References: <bnpdtq+t8br@eGroups.com>
Message-ID: <00e701c39edb$9f853700$683c0a0a@bambook>


----- Original Message ----- 
From: "Michael Cahill" <mjc@72dpi.com.au>
> ...
> It would be great to get this working - I don't know of a really good
parser
> generator for Python.
> ...
>

It really depends on what your needs are, I've been using TPG [1] for small
projects
with great success, it's definitely not ANTLR but I like its simplicity (the
grammar
is the docstring of the parser class :-)) and its author is a very friendly
guy.

Regards,
Rodrigo

[1] http://christophe.delord.free.fr/en/tpg/

PS: ANTLR for python would be extremely sexy! :-)


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lubos.vnuk at rts.at  Thu Oct 30 05:23:21 2003
From: lubos.vnuk at rts.at (Lubos Vnuk)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Re: simple question
In-Reply-To: <bnpc79+co8r@eGroups.com>
Message-ID: <bnr3c9+1hc5@eGroups.com>

Well, you are right, I did misunderstand your intentions indeed.

Back to the problem:
SELECT A field with spaces FROM ...

Apart from Loring's suggestion I would maybe try including WS as 
tokens (unless your grammar is pretty complex) and deal with them in 
the parser then. Just a guess for k=2 (based on your example):

WS : (SPACE | NEWLINE)+	;
protected SPACE : ' ' | '\t' ;
protected NEWLINE : ( '\r' (options{greedy=true;}: '\n')? | '\n' ) 
{newline();} ;

select {string tokText;}:
SELECT WS tokText=idname{...} (COMMA tokText=idname {...})* WS 
FROM ...;

idname returns [string s] {s = "";}: t:ID { s += t.getText(); }
(options{greedy=true;}: ws:WS { s += ws.getText(); } t2:ID! { s += 
t2.getText(); } )*;

Regards,
Lubos.
P.S.: Most of SQL implementations have this sort of identifiers 
as "delimited identifiers" and require that they be enclosed in 
double quotes, which makes tokenizing much easier.


--- In antlr-interest@yahoogroups.com, "lloyd_from_far" <ld@g...> 
wrote:
> I just understand you: you completely misunderstood me
> I absolutely NOT counfound parser & lexer in this particular case 
> (but YOU did)
> I actually already do
> select: SELECT (ID)+ FROM
> 
> the problem is ' ' is NOT a separator (which is ','), it's part of 
> the name of the ID !!!
> 
> I did thougt to do reconstruct the real ID with something like that 
> (and this time, blurring the functionality of lexer or parser, as 
> you unknowingly suggested)
> 
> select
> {
>  string tokText;
> }:
>   SELECT tokText=idname{...} (COMMA tokText=idname {...})* FROM ...;
> 
> idname [return s]
> {
> string s = "";
> }:
>   t:ID { s += t.getText(); }
>   (
>     t2:ID! { s += t.getText(); }
>   )*
> 
> 
> but I still don't have the exact number of spaces ... 
> it could be 2 !... (or 3 ?! or more ?!)
> 
> I thought to deactivate space skipping, but I did it once and 
> quickly forget it ... (too awfull)
> 
> 
> --- In antlr-interest@yahoogroups.com, "Lubos Vnuk" 
> <lubos.vnuk@r...> wrote:
> > You might be mixing up the meaning of lexer and parser somewhat.
> > 
> > I suggest you should get a single SELECT token, then a series of 
> ID 
> > tokens (ignoring the WS in the lexer), then a FROM token and an 
ID 
> > token. This would be the lexer's task.
> > 
> > In your parser you define a rule to put it together, something 
> like 
> > this:
> > select_stmt: SELECT (ID)+ FROM ID;
> > 
> > I think you have a few SQL grammars at www.antlr.org to study 
from.
> > 
> > HTH,
> > Lubos.
> > 
> > --- In antlr-interest@yahoogroups.com, "lloyd_from_far" <ld@g...> 
> > wrote:
> > > given this (or change this tokens as you see fit):
> > > SELECT: "SELECT" ;
> > > FROM: "FROM" ;
> > > NAME: options { testLiterals=true; }:
> > > 	( 'a' .. 'z' );
> > > SPACE: (' ') +;
> > > 
> > > how would you cut the following string:
> > > "SELECT a field name with plenty of space FROM aTable"
> > > 
> > > into the 4 following Tokens:
> > > 'SELECT'
> > > 'a field name with plenty of space'
> > > 'FROM'
> > > 'aTable'


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Thu Oct 30 13:49:09 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] 272 documentation
In-Reply-To: <6.0.0.22.2.20031030104118.029257b8@pop3.nildram.co.uk>
Message-ID: <E488C4AC-0B22-11D8-AE6D-000A95891192@cs.usfca.edu>

Hi Dave,


On Thursday, October 30, 2003, at 02:44 AM, Dave Pawson wrote:

> Refers to http://www.jguru.com/faq/view.jsp?EID=78 in the getting 
> started
> section
>
> An example there uses class AST
>
>
> // Get the tree out of the parser
>    AST resultTree = parser.getAST();
>
> This fails to compile using the antlr jar file.
>
> Any suggestions please?

What error do you get?

>
> There appears to be a factory approach, but not used in this example.
> Is it out of date?

Possibly...see my course notes on "Introduction to ANTLR" for more tree 
intro stuff.

Ter
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com pure link sharing




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tom at psy.unsw.edu.au  Thu Oct 30 16:01:05 2003
From: tom at psy.unsw.edu.au (Thomas Brandon)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Re: identifier with space
In-Reply-To: <bnph7k+3rvj@eGroups.com>
Message-ID: <bns8o1+glno@eGroups.com>

As Loring suggests, a hidden token stream would probably do the 
trick. Or, to avoid attaching the hidden tokens (and having to use 
that token class, and use the AST class or process the hidden tokens 
in between lex and parse so the hidden tokens can be dropped), you 
could keep the whitespace in the lexer, then use a token stream 
filter in between lex and parse that rolled together IDENT WS+ 
combinations and stripped WS not following an IDENT.

Or, could you perhaps recognise the spaces as part of the 
identifiers. Have something like (assuming for the example that 
idents are only lowercase letters):
IDENT_WITH_SPACES
    :
        ('a'..'z')+ 
        {
            $setType(testLiterals($getText, IDENT_WITH_SPACES));
        }
        (
            {
                 $getType == IDENT_WITH_SPACES // Don't do it if it's 
a keyword
            }?
            (WS)+
        )?
    ;

That's just off the top of my head, probably neglecting something. 
And that code is almost certainly wrong (especially the test literals 
part) but should give the idea. Allow whitespace on non-literal 
idents. Probably need to make the WS+ greedy to avoid ambiguity, 
though from memory Antlr should match early and work anyway.

Tom. 

--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> Lloyd--
> 
> Check out the "Token Streams" part of the ANTLR manual.  I think 
that 
> you can capture the whitespace as hidden tokens and then access 
that 
> for reconstructing the input.  I've not had occasion to use this 
> feature, but it was put in for just this purpose.
> 
> --Loring
> 
> 
> --- In antlr-interest@yahoogroups.com, "lloyd_from_far" <ld@g...> 
> wrote:
> > Hi Loring,
> > 
> > I do want to separate "A Field" (1 space) from "A  Field" (2 
spaces)
> > it's not my fault if I have to write a ADO.NET driver to a stupid 
& 
> > so-called "database"
> > 
> > anyway managing 1 space (and only one) is certainly better than 
no 
> > space at all !!
> > obviously I hit here a limitation of ANTLR, I guess I have to do 
as 
> > you suggested, would be better than nothing.
> > 
> > thanks for the feeback ;-)
> > 
> > --- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> 
wrote:
> > > --- In antlr-interest@yahoogroups.com, "lloyd_from_far" 
<ld@g...> 
> > > wrote:
> > > > sorry, my example was bad.
> > > > let parse this:
> > > > 
> > > > SELECT A Field With Name FROM ATable
> > > > 
> > > 
> > > Lloyd--
> > > 
> > > You're trying to do too much in the lexer--spaces are 
significant 
> > for 
> > > separating tokens in your example.  If you really want "A Field 
> > With 
> > > Name" as a single AST node, you are probably better off 
> > reconstructing 
> > > it:
> > > 
> > > select
> > >     :
> > >     "SELECT" text "FROM" text
> > >     ;
> > > 
> > > text
> > > { String foo }
> > >     :
> > >     a:IDENTIFIER { foo = $a.getText(); }
> > >     { b:IDENTIFIER! { foo += " " + $b.getText(); } )*
> > >     { $a.setText(foo); }
> > >     ;
> > > 
> > > That also has the advantage of converting text to a canonical 
form 
> > > with single spaces--you really don't want "A    field" to be 
> > different 
> > > than "A field", do you?
> > >     
> > > --Loring


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ld at galador.net  Thu Oct 30 16:27:44 2003
From: ld at galador.net (lloyd_from_far)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Re: identifier with space
In-Reply-To: <bns8o1+glno@eGroups.com>
Message-ID: <bnsaa0+j5gc@eGroups.com>

Hi Thomas, Hi Loring,

Implementing identifier with space has been postponned after more 
urgent tasks.
however I will keep in mind your advice about token filter, looks 
like it might be very handy indeed !

thanks !!




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From dpawson at nildram.co.uk  Fri Oct 31 10:09:09 2003
From: dpawson at nildram.co.uk (Dave Pawson)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] 272 documentation
In-Reply-To: <E488C4AC-0B22-11D8-AE6D-000A95891192@cs.usfca.edu>
References: <6.0.0.22.2.20031030104118.029257b8@pop3.nildram.co.uk>
 <E488C4AC-0B22-11D8-AE6D-000A95891192@cs.usfca.edu>
Message-ID: <6.0.0.22.2.20031031180733.025c6898@pop3.Nildram.co.uk>

At 21:49 30/10/2003, you wrote:

> > // Get the tree out of the parser
> >    AST resultTree = parser.getAST();
> >
> > This fails to compile using the antlr jar file.
> >
> > Any suggestions please?
>
>What error do you get?

Class not found error.
I have the jar file in my classpath.



> >
> > There appears to be a factory approach, but not used in this example.
> > Is it out of date?
>
>Possibly...see my course notes on "Introduction to ANTLR" for more tree
>intro stuff.

Reading  where I can,
is that file  current with 272 please?

regards DaveP



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Fri Oct 31 10:11:07 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] 272 documentation
In-Reply-To: <6.0.0.22.2.20031031180733.025c6898@pop3.Nildram.co.uk>
Message-ID: <993431A2-0BCD-11D8-8875-000393BB647E@cs.usfca.edu>

Hmm...i have not heard of a problem with the 2.7.2 jar not including 
stuff... do a jar tvf and see if it's in there. :)

Terence
On Friday, October 31, 2003, at 10:09  AM, Dave Pawson wrote:

> At 21:49 30/10/2003, you wrote:
>
>>> // Get the tree out of the parser
>>>    AST resultTree = parser.getAST();
>>>
>>> This fails to compile using the antlr jar file.
>>>
>>> Any suggestions please?
>>
>> What error do you get?
>
> Class not found error.
> I have the jar file in my classpath.
>
>
>
>>>
>>> There appears to be a factory approach, but not used in this example.
>>> Is it out of date?
>>
>> Possibly...see my course notes on "Introduction to ANTLR" for more 
>> tree
>> intro stuff.
>
> Reading  where I can,
> is that file  current with 272 please?
>
> regards DaveP
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Professor Comp. Sci., University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.jguru.com
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com link sharing, pure-n-simple




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri Oct 31 10:11:46 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] 272 documentation
Message-ID: <72C9789739C4214096AE945753B11EA36B206C@mypxmail04.bco-home.com>

Are you running antlr.Tool and getting the message or compiling your code?
Walk through compiling and running one of the examples first.

Monty

-----Original Message-----
From: Dave Pawson [mailto:dpawson@nildram.co.uk] 
Sent: Friday, October 31, 2003 10:09 AM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] 272 documentation

At 21:49 30/10/2003, you wrote:

> > // Get the tree out of the parser
> >    AST resultTree = parser.getAST();
> >
> > This fails to compile using the antlr jar file.
> >
> > Any suggestions please?
>
>What error do you get?

Class not found error.
I have the jar file in my classpath.



> >
> > There appears to be a factory approach, but not used in this example.
> > Is it out of date?
>
>Possibly...see my course notes on "Introduction to ANTLR" for more tree
>intro stuff.

Reading  where I can,
is that file  current with 272 please?

regards DaveP



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From easjolly at ix.netcom.com  Fri Oct 31 10:14:17 2003
From: easjolly at ix.netcom.com (dotlessbraille)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Paraphrase to translate literals?
Message-ID: <bnu8pp+psi0@eGroups.com>

The paraphrase capability is close to a capability I need which is 
to identify a literal, such as an abbreviation, and convert it to 
whatever it stands for.  However, there doesn't seem to be any way 
to associate a paraphrase with a literal.

I can, of course, put in my own hash table.  But it would be nicer 
to be able to use the built-in capabilities.

Am I missing something?

Susan J.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From dpawson at nildram.co.uk  Fri Oct 31 10:21:58 2003
From: dpawson at nildram.co.uk (Dave Pawson)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] 272 documentation
In-Reply-To: <993431A2-0BCD-11D8-8875-000393BB647E@cs.usfca.edu>
References: <6.0.0.22.2.20031031180733.025c6898@pop3.Nildram.co.uk>
 <993431A2-0BCD-11D8-8875-000393BB647E@cs.usfca.edu>
Message-ID: <6.0.0.22.2.20031031182100.025203c0@pop3.Nildram.co.uk>

At 18:11 31/10/2003, you wrote:
>Hmm...i have not heard of a problem with the 2.7.2 jar not including
>stuff... do a jar tvf and see if it's in there. :)

Emacs shows up meta-inf. So AST class in there.
ASTFactory.class nearest,
   hence the query on its use.

regards DaveP



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From dpawson at nildram.co.uk  Fri Oct 31 10:23:22 2003
From: dpawson at nildram.co.uk (Dave Pawson)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] 272 documentation
In-Reply-To: <72C9789739C4214096AE945753B11EA36B206C@mypxmail04.bco-home
 .com>
References: <72C9789739C4214096AE945753B11EA36B206C@mypxmail04.bco-home.com>
Message-ID: <6.0.0.22.2.20031031182206.025fcd10@pop3.Nildram.co.uk>

At 18:11 31/10/2003, you wrote:
>Are you running antlr.Tool and getting the message or compiling your code?
>Walk through compiling and running one of the examples first.

No problems with the intID example.
Just this one.

regards DaveP



>Monty
>
>-----Original Message-----
>From: Dave Pawson [mailto:dpawson@nildram.co.uk]
>Sent: Friday, October 31, 2003 10:09 AM
>To: antlr-interest@yahoogroups.com
>Subject: Re: [antlr-interest] 272 documentation
>
>At 21:49 30/10/2003, you wrote:
>
> > > // Get the tree out of the parser
> > >    AST resultTree = parser.getAST();
> > >
> > > This fails to compile using the antlr jar file.
> > >
> > > Any suggestions please?
> >
> >What error do you get?
>
>Class not found error.
>I have the jar file in my classpath.
>
>
>
> > >
> > > There appears to be a factory approach, but not used in this example.
> > > Is it out of date?
> >
> >Possibly...see my course notes on "Introduction to ANTLR" for more tree
> >intro stuff.
>
>Reading  where I can,
>is that file  current with 272 please?
>
>regards DaveP
>
>
>
>
>
>Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>
>
>
>Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri Oct 31 10:24:19 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:16:04 2004
Subject: [antlr-interest] Paraphrase to translate literals?
Message-ID: <72C9789739C4214096AE945753B11EA36B206D@mypxmail04.bco-home.com>

Nope, that's not currently a feature of antlr, you'll have to roll your own.

Monty

-----Original Message-----
From: dotlessbraille [mailto:easjolly@ix.netcom.com] 
Sent: Friday, October 31, 2003 10:14 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Paraphrase to translate literals?

The paraphrase capability is close to a capability I need which is 
to identify a literal, such as an abbreviation, and convert it to 
whatever it stands for.  However, there doesn't seem to be any way 
to associate a paraphrase with a literal.

I can, of course, put in my own hash table.  But it would be nicer 
to be able to use the built-in capabilities.

Am I missing something?

Susan J.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


