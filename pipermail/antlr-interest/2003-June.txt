From dm at cs.yorku.ca  Sun Jun  1 20:02:49 2003
From: dm at cs.yorku.ca (Dave Makalsky)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Good enough parsing
Message-ID: <3EDABE59.80307@cs.yorku.ca>

Hi:

I am looking for some examples of 'weak' parsers, i.e. parsers which 
have error codes to continue parsing sections of code even after an error.

Could someone please point me at an ANTLR example?

Thanks,

Dave Makalsky



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Mon Jun  2 00:25:13 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Application crashing on upgrading from 2.6.0 to 2.7.2
In-Reply-To: <bb8ijn+ap38@eGroups.com>; from monaabs@yahoo.com on Fri, May 30, 2003 at 09:31:35PM -0000
References: <bb8ijn+ap38@eGroups.com>
Message-ID: <20030602092513.A16357@cs.utwente.nl>

On Fri, May 30, 2003 at 09:31:35PM -0000, monaabs wrote:
> I have switched to 2.7.2 . In function initLiterals() the application 
> is crashing

Could it be that you're picking up the old version of the lib? I think I've
seen this before somewhere (try the archive). A clean recompile might help
as well.

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Wo das Chaos auf die Ordnung trifft, gewinnt meist das Chaos, weil es
  besser organisiert ist. --- Friedrich Nietzsche


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Mon Jun  2 00:27:09 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] C++ has linking errors
In-Reply-To: <bb61bm+nr2j@eGroups.com>; from monaabs@yahoo.com on Thu, May 29, 2003 at 10:24:54PM -0000
References: <bb61bm+nr2j@eGroups.com>
Message-ID: <20030602092709.B16357@cs.utwente.nl>

On Thu, May 29, 2003 at 10:24:54PM -0000, monaabs wrote:
> I invoked Antlr.dsw which is in ..\antlr\antlr-2.7.2\lib\cpp.

The dsw files are out of date. The DLL build is broken, try the archive for
a solution if you want to get that to work.

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
              of UCSD Pascal ever released..." --- Larry Smith


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Mon Jun  2 02:12:08 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] problem of using default parameters in parser rules
In-Reply-To: <bahle1+j5ga@eGroups.com>; from xdji@mail.ustc.edu.cn on Thu, May 22, 2003 at 04:58:41AM -0000
References: <bahle1+j5ga@eGroups.com>
Message-ID: <20030602111208.C16357@cs.utwente.nl>

On Thu, May 22, 2003 at 04:58:41AM -0000, xdjicn wrote:
>    I want to use default parameters in parser rules,for example:
> 
> parseRule1 [int iPos = 0]
> :
> .....
> 
> but the codes generated by ANTLR redefined the default parameter:
> 
> //in .hpp
> void Parser::parserRule1 (int iPos = 0);      //valid
> 
> //in .cpp
> void Parser::parserRule1 (int iPos = 0)    
> {
>   ...
> }
> //which is invalid
> Does anybody know how to solve the problem?

No solution at the moment other than not using them. Ran into it myself as
well.

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Wit is cultured insolence. --- Aristotle


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From j_scandaliaris at yahoo.es  Mon Jun  2 06:27:29 2003
From: j_scandaliaris at yahoo.es (Jorge Scandaliaris)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Integration of antlr generated lexer-parser into a GUI app.
In-Reply-To: <200305301649.h4UGnTQ4059226@idiom.com>
Message-ID: <001901c3290a$bb4d1a30$03001aac@zoys>

Thanks, fortunately I won't have to mess around too much with the MFC
gui, so if the antlr generated parser doesn't generate any adverse
side-effects everything should be OK.

Jorge

> -----Mensaje original-----
> De: Ian L. Kaplan [mailto:iank@bearcave.com]
> Enviado el: viernes, 30 de mayo de 2003 18:49
> Para: j_scandaliaris@yahoo.es
> Asunto: Re: [antlr-interest] Integration of antlr generated
lexer-parser
> into a GUI app.
> 
> 
> > I am in the process of integrating a lexer-parser (c++ output) into
> > an MFC GUI application (visual c++ 6).
> ...
> > Anybody has integrated antlr parsers into gui apps before? My c++
> > expertise is almost non-existent (not to mention visual c++, which I
> > just use as a compiler to generate console apps), but I recall
> > reading somewhere that some problems might arise due to use of
> > stderr, stdout, etc. I searched the message archive but with no
> > luck. I would appreciate if someone (not necessarily one :) )
> 
>   I have never integrated ANTLR into a MFC GUI app, but I have
>   integrated other C++ code, including openGL codes.
> 
>   I had a hard time with MFC until I really understood C++.  MFC
>   relies heavily on subclassing the MFC classes and over-riding
>   particular functions to supply your own functionality.
> 
>   I don't actually think that the problem will be ANTLR so much as it
>   will be dealing with the MFC environment.  There is a big learning
>   curve there.
> 
>   Ian



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From monaabs at yahoo.com  Mon Jun  2 09:00:49 2003
From: monaabs at yahoo.com (monaabs)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] c++ exception on loading literals
Message-ID: <bbfsbh+j872@eGroups.com>

Can someone please elaborate as to what i can do to solve the 
crashing of my application on initLiteral["raw"] = 89. I am using 
boost .

I went through the archive and came across this

On the off chance that this will help someone:

The problem is indeed with the DLL build, going to a static library 
took care of the issue. I suspect it has to do with the allocators 
for the templates being in a different memory space than the 
templates themsevles, but that's a theory I don't have time to test.

Going the static library route works, so long as the code generation 
for the lib is the same as the code generation for the application 
using it. (IE: both single threaded, or both multi threaded etc.)




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Mon Jun  2 09:52:21 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Error in 2.7.2
In-Reply-To: <001301c32710$e95508d0$0200a8c0@NOTEBOOK>
Message-ID: <94026BF4-951A-11D7-A00A-000393BB647E@jguru.com>


On Friday, May 30, 2003, at 06:06  PM, Matthew Ford wrote:

> I downloaded 2.7.2 final.  There is an error in the ANTLR Parser
>
> I am getting the following error
>     [antlr] ANTLR Parser Generator   Version 2.7.2   1989-2003 
> jGuru.com
>     [antlr] C:\temp\antlrTest\links.g:107: warning:lexical 
> nondeterminism
> between alts 1 and 2 of block upon
>     [antlr] C:\temp\antlrTest\links.g:107:
> k==1:'\t','\n','\u000c','\r',' '
>     [antlr] C:\temp\antlrTest\links.g:107:     k==2:<end-of-token>
>
> with (full code below)
>
> protected
> SCARF
>  : WS // track line numbers while you scarf
>  | . {}
>  ;
>
> while
> protected
> SCARF
>  : WS // track line numbers while you scarf
>  | .
>  ;
>
> gives no errors

Ah.  Yes, i use "is wildcard alone in the alt" rather than a more 
intelligent but more difficult version that ignores actions.  Sorry 
about that. :(  You can just put into a subrule and then put action at 
the end.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Matthew.Ford at forward.com.au  Mon Jun  2 15:50:57 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Error in 2.7.2
References: <94026BF4-951A-11D7-A00A-000393BB647E@jguru.com>
Message-ID: <000f01c32959$72119950$0200a8c0@NOTEBOOK>

Hi Ter,
Could you provide the actual fix please.

I tried the following but got the same error (Note: WS does it own printing)

protected
SCARF
  :( WS // track line numbers while you scarf
 | a:ALL_THE_REST
 ) {if (a!=null) {output.print(a);}}
 ;

protected
ALL_THE_REST
 : .
 ;

----- Original Message -----
From: "Terence Parr" <parrt@jguru.com>
To: <antlr-interest@yahoogroups.com>
Sent: Tuesday, June 03, 2003 2:52 AM
Subject: Re: [antlr-interest] Error in 2.7.2


>
> On Friday, May 30, 2003, at 06:06  PM, Matthew Ford wrote:
>
> > I downloaded 2.7.2 final.  There is an error in the ANTLR Parser
> >
> > I am getting the following error
> >     [antlr] ANTLR Parser Generator   Version 2.7.2   1989-2003
> > jGuru.com
> >     [antlr] C:\temp\antlrTest\links.g:107: warning:lexical
> > nondeterminism
> > between alts 1 and 2 of block upon
> >     [antlr] C:\temp\antlrTest\links.g:107:
> > k==1:'\t','\n','\u000c','\r',' '
> >     [antlr] C:\temp\antlrTest\links.g:107:     k==2:<end-of-token>
> >
> > with (full code below)
> >
> > protected
> > SCARF
> >  : WS // track line numbers while you scarf
> >  | . {}
> >  ;
> >
> > while
> > protected
> > SCARF
> >  : WS // track line numbers while you scarf
> >  | .
> >  ;
> >
> > gives no errors
>
> Ah.  Yes, i use "is wildcard alone in the alt" rather than a more
> intelligent but more difficult version that ignores actions.  Sorry
> about that. :(  You can just put into a subrule and then put action at
> the end.
>
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Co-founder, http://www.peerscope.com link sharing, pure-n-simple
> Lecturer in Comp. Sci., University of San Francisco
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Mon Jun  2 16:01:02 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Error in 2.7.2
In-Reply-To: <000f01c32959$72119950$0200a8c0@NOTEBOOK>
Message-ID: <1533E946-954E-11D7-A00A-000393BB647E@jguru.com>

Hi.  I was thinking subrule not another rule (though the word seems to 
work for either case) ;)

Try this:

SCARF : ( WS | a:. ) {if (a!=null) {output.print(a);}} ;

Ter

On Monday, June 2, 2003, at 03:50  PM, Matthew Ford wrote:

> Hi Ter,
> Could you provide the actual fix please.
>
> I tried the following but got the same error (Note: WS does it own 
> printing)
>
> protected
> SCARF
>   :( WS // track line numbers while you scarf
>  | a:ALL_THE_REST
>  ) {if (a!=null) {output.print(a);}}
>  ;
>
> protected
> ALL_THE_REST
>  : .
>  ;
>
> ----- Original Message -----
> From: "Terence Parr" <parrt@jguru.com>
> To: <antlr-interest@yahoogroups.com>
> Sent: Tuesday, June 03, 2003 2:52 AM
> Subject: Re: [antlr-interest] Error in 2.7.2
>
>
>>
>> On Friday, May 30, 2003, at 06:06  PM, Matthew Ford wrote:
>>
>>> I downloaded 2.7.2 final.  There is an error in the ANTLR Parser
>>>
>>> I am getting the following error
>>>     [antlr] ANTLR Parser Generator   Version 2.7.2   1989-2003
>>> jGuru.com
>>>     [antlr] C:\temp\antlrTest\links.g:107: warning:lexical
>>> nondeterminism
>>> between alts 1 and 2 of block upon
>>>     [antlr] C:\temp\antlrTest\links.g:107:
>>> k==1:'\t','\n','\u000c','\r',' '
>>>     [antlr] C:\temp\antlrTest\links.g:107:     k==2:<end-of-token>
>>>
>>> with (full code below)
>>>
>>> protected
>>> SCARF
>>>  : WS // track line numbers while you scarf
>>>  | . {}
>>>  ;
>>>
>>> while
>>> protected
>>> SCARF
>>>  : WS // track line numbers while you scarf
>>>  | .
>>>  ;
>>>
>>> gives no errors
>>
>> Ah.  Yes, i use "is wildcard alone in the alt" rather than a more
>> intelligent but more difficult version that ignores actions.  Sorry
>> about that. :(  You can just put into a subrule and then put action at
>> the end.
>>
>> Ter
>> --
>> Co-founder, http://www.jguru.com
>> Creator, ANTLR Parser Generator: http://www.antlr.org
>> Co-founder, http://www.peerscope.com link sharing, pure-n-simple
>> Lecturer in Comp. Sci., University of San Francisco
>>
>>
>>
>>
>> Your use of Yahoo! Groups is subject to 
>> http://docs.yahoo.com/info/terms/
>>
>>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Matthew.Ford at forward.com.au  Mon Jun  2 16:06:30 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Error in 2.7.2
References: <1533E946-954E-11D7-A00A-000393BB647E@jguru.com>
Message-ID: <001d01c3295b$9d0d8ea0$0200a8c0@NOTEBOOK>

Yes that worked thanks.
That bit of magic should go in the docs or the FAQ's

----- Original Message -----
From: "Terence Parr" <parrt@jguru.com>
To: <antlr-interest@yahoogroups.com>
Sent: Tuesday, June 03, 2003 9:01 AM
Subject: Re: [antlr-interest] Error in 2.7.2


> Hi.  I was thinking subrule not another rule (though the word seems to
> work for either case) ;)
>
> Try this:
>
> SCARF : ( WS | a:. ) {if (a!=null) {output.print(a);}} ;
>
> Ter
>
> On Monday, June 2, 2003, at 03:50  PM, Matthew Ford wrote:
>
> > Hi Ter,
> > Could you provide the actual fix please.
> >
> > I tried the following but got the same error (Note: WS does it own
> > printing)
> >
> > protected
> > SCARF
> >   :( WS // track line numbers while you scarf
> >  | a:ALL_THE_REST
> >  ) {if (a!=null) {output.print(a);}}
> >  ;
> >
> > protected
> > ALL_THE_REST
> >  : .
> >  ;
> >
> > ----- Original Message -----
> > From: "Terence Parr" <parrt@jguru.com>
> > To: <antlr-interest@yahoogroups.com>
> > Sent: Tuesday, June 03, 2003 2:52 AM
> > Subject: Re: [antlr-interest] Error in 2.7.2
> >
> >
> >>
> >> On Friday, May 30, 2003, at 06:06  PM, Matthew Ford wrote:
> >>
> >>> I downloaded 2.7.2 final.  There is an error in the ANTLR Parser
> >>>
> >>> I am getting the following error
> >>>     [antlr] ANTLR Parser Generator   Version 2.7.2   1989-2003
> >>> jGuru.com
> >>>     [antlr] C:\temp\antlrTest\links.g:107: warning:lexical
> >>> nondeterminism
> >>> between alts 1 and 2 of block upon
> >>>     [antlr] C:\temp\antlrTest\links.g:107:
> >>> k==1:'\t','\n','\u000c','\r',' '
> >>>     [antlr] C:\temp\antlrTest\links.g:107:     k==2:<end-of-token>
> >>>
> >>> with (full code below)
> >>>
> >>> protected
> >>> SCARF
> >>>  : WS // track line numbers while you scarf
> >>>  | . {}
> >>>  ;
> >>>
> >>> while
> >>> protected
> >>> SCARF
> >>>  : WS // track line numbers while you scarf
> >>>  | .
> >>>  ;
> >>>
> >>> gives no errors
> >>
> >> Ah.  Yes, i use "is wildcard alone in the alt" rather than a more
> >> intelligent but more difficult version that ignores actions.  Sorry
> >> about that. :(  You can just put into a subrule and then put action at
> >> the end.
> >>
> >> Ter
> >> --
> >> Co-founder, http://www.jguru.com
> >> Creator, ANTLR Parser Generator: http://www.antlr.org
> >> Co-founder, http://www.peerscope.com link sharing, pure-n-simple
> >> Lecturer in Comp. Sci., University of San Francisco
> >>
> >>
> >>
> >>
> >> Your use of Yahoo! Groups is subject to
> >> http://docs.yahoo.com/info/terms/
> >>
> >>
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/
> >
> >
> >
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Co-founder, http://www.peerscope.com link sharing, pure-n-simple
> Lecturer in Comp. Sci., University of San Francisco
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From madison_stjames at yahoo.com  Mon Jun  2 22:24:29 2003
From: madison_stjames at yahoo.com (madison_stjames)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] ANTLR Matching Behavior
Message-ID: <bbhbed+clcs@eGroups.com>

Can you use the "dot" notation in ANTLR?

For example, can I write something like (.) - match anything
or (.){1-3) - one to three of any one character.

I couldn't find this information in the docuentation.

Thanks!
~msj


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Tue Jun  3 04:13:32 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] ANTLR Matching Behavior
In-Reply-To: <bbhbed+clcs@eGroups.com>; from madison_stjames@yahoo.com on Tue, Jun 03, 2003 at 05:24:29AM -0000
References: <bbhbed+clcs@eGroups.com>
Message-ID: <20030603131332.K16357@cs.utwente.nl>

On Tue, Jun 03, 2003 at 05:24:29AM -0000, madison_stjames wrote:
> Can you use the "dot" notation in ANTLR?

Yes. Lexer and Treeparsers support it for sure.. Parser I'm not sure about.
Think it is hidden in the docs somewhere (I hope). 

> For example, can I write something like (.) - match anything
> or (.){1-3) - one to three of any one character.

The {1-3} thing you have to implement manually in actions or other checks.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "Of all the things i've lost i miss my mind the most -Ozzy Osbourne


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From monaabs at yahoo.com  Tue Jun  3 13:27:57 2003
From: monaabs at yahoo.com (monaabs)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] 2.7.2 dsp and dsw
Message-ID: <bbj0cd+fgfp@eGroups.com>

Greetings!!!!!!

While switching from 2.6.0 to 2.7.2 i encountered some problems in 
building a dll .
Also from the archives , i noticed that Java code is managed better 
than c++ .
Can somebody who has used vc 6.0 with ANTLR 2.7.2 guide me as to from 
where i can get the proper files (dsp, dsw) . The one which is there 
in downloads is pretty outdated .
Also what code changes do i have to make in order for 2.7.2 to work 
wth vc++ 6.0.

Your inputs are highly appreciated. 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From iank at bearcave.com  Tue Jun  3 15:04:33 2003
From: iank at bearcave.com (iank@bearcave.com)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Re: More on ANTLR 2.7.2, VC++ 6.0 and portability
Message-ID: <200306032204.h53M4XdY053251@idiom.com>


  I too have been making the transition to Antlr 2.7.2.  I've never
  been a big fan of Microsoft DLLs, so I've created a static link
  (e.g., a .lib).  I'd do this even if I could build the DLL.  Nor do
  I use the IDE project builder for building something like this.
  Note that Microsoft most certainly does not build large software
  components this way either.  They use and I use nmake, which is
  Microsoft's mutated version of UNIX make.

  I'm in the process of rewriting my ANTLR tutorial web pages, so I
  have not published the new nmake file yet.  If you need it before I
  get to it, send me a note.  I picked up a few additional changes to
  reduce the number of warnings and to allow the software to build
  from the ANTLR yahoo groups archive.  This was a change to one file
  (antlr/config.h?)  I can send you the modified source files as well.

  The other surprising experience I had is that a simple test grammar
  (e.g., my expression grammar) and its associated "main" no longer
  ran properly.  Some of this had to do with the way the AST factory
  is initialized (I picked this up from the examples).  However there
  seem to be grammar based problems as well (no grammar errors or
  warnings, but the grammer works differently now).  So the transition
  has not been as painless as I had hoped.  My fear now is that a
  large Java language grammar/AST generation front end I have will not
  port painlessly either.  Since this weighs in at about 5K lines of
  comments, grammar and C++ code this is sort of scary.

  Perhaps the way to summarize it is that the good news is that great
  people like Terance, Ric K. and others are active ANTLR developers
  and ANTLR is evolving.  That's the bad news too when you go to a new
  release, even when it is "new and improved".

  Ian
  www.bearcave.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Wed Jun  4 01:55:52 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Re: More on ANTLR 2.7.2, VC++ 6.0 and portability
In-Reply-To: <200306032204.h53M4XdY053251@idiom.com>; from iank@bearcave.com on Tue, Jun 03, 2003 at 03:04:33PM -0700
References: <200306032204.h53M4XdY053251@idiom.com>
Message-ID: <20030604105552.N16357@cs.utwente.nl>

On Tue, Jun 03, 2003 at 03:04:33PM -0700, iank@bearcave.com wrote:
>   The other surprising experience I had is that a simple test grammar
>   (e.g., my expression grammar) and its associated "main" no longer
>   ran properly.  Some of this had to do with the way the AST factory
>   is initialized (I picked this up from the examples).

It's in the C++ docs as well.. at least in the ones in the repository this
is documented.

>  However there seem to be grammar based problems as well (no grammar errors
>  or warnings, but the grammer works differently now).  So the transition
>  has not been as painless as I had hoped.  

Could you elaborate on this?

>   and ANTLR is evolving.  That's the bad news too when you go to a new
>   release, even when it is "new and improved".

I just shipped off a snapshot to some MSVC users I know. I hope the DLL and
static build will work now. Also configure/make build should now be in sync
with the new java stuff.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "You can't expect to wield supreme executive power just because some
   watery tot throws a sword at you!"
  --- Monty Python and the Holy Grail

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pcristip at yahoo.com  Wed Jun  4 06:47:43 2003
From: pcristip at yahoo.com (pcristip)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] yet another syntactic predicate problem
Message-ID: <bbkt9v+4v62@eGroups.com>

Hi,

I'd really appreciate some help on the following problem:

I have a grammar that is supposed to parse the body of a html file, 
and everything is ok except the fact that the data between the tags 
should be of two kinds:
1. a topic which is normal text except that it should start with a 
letter (in fact only a through e letters) followed by a '.' char 
(e.g." A.")
2. normal cdata which is the case if the text is not a topic

I managed to make this work except for the case when the text starts 
with spaces.

Now I have something like:
(in the parser)
topic		:	TOPICID^ topicbody
			;

topicbody	:
				(	options { greedy=true; }
					:
					text | font
				)*
			;
text		:	PCDATA ;


(in the lexer)

TOPICID
			:
				('a' | 'b' | 'c' | 'd' | 'e') '.'
			;


PCDATA
			:
				({ LA(2)!='.' }? 
('a'|'b'|'c'|'d'|'e'))	| ~('a'|'b'|'c'|'d'|'e'|'<'|'>')
				(
					options {
					
	generateAmbigWarnings=false;
					}
				:	'\r' '\n'	
	{newline();}
				|	'\r'		
	{newline();}
				|	'\n'		
	{newline();}
				|	~('<'|'\n'|'\r'|'"'|'>')
				)*
			;


which works ok for texts like "A. some text here" and "A normal text"
but if there are spaces in front like "   B. title" then the text is 
matched as data not as a topic.

I tried to solve this by modifing the topic rule but no luck. And 
thought that the best solution would be to use syntactic predicates 
because the lookahead is not fixed in this case (the number of spaces 
can be arbitrary before you can tell which rule to match).
So I got to this construct:

topic_or_answer : ((spaces)? TOPICID) => topic
                |  text
                ;

spaces          : WS ;

(and in lexer)
protected
WS			:	(
					options {
					
	generateAmbigWarnings=false;
					}
				:	' '
				|	'\t'
				|	'\n'	{ newline(); }
				|	"\r\n"	{ newline(); }
				|	'\r'	{ newline(); }
				)+
			;


which doesn't work (otherwise you wouldn't read these lines :) ).

Can someone give me a hint ? What did I do wrong ?

Thanks,
Chris




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From dude at darkfigure.org  Wed Jun  4 09:32:23 2003
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Why does it silently ignore invalid input?
Message-ID: <bbl6un+nejn@eGroups.com>

I have a grammar with a second entry-point that I call.  In my grammar, "DECLARE" is 
a keyword (must be upper-case).  When the generated parser encounters "declare" 
(lower-case), it simply breaks out of the parse loop and returns.  Why doesn't it throw 
an exception?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From iank at bearcave.com  Wed Jun  4 09:31:55 2003
From: iank at bearcave.com (iank@bearcave.com)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Re: ANTLR 2.7.2 portability
Message-ID: <200306041631.h54GVsqB089645@idiom.com>


> It's in the C++ docs as well.. at least in the ones in the repository this
> is documented.

  I confess that I did not RTFM.  I rebuilt my old example and it
  crashed on an uninitialized object (e.g., this == 0).  So I looked
  at the examples.

> >  However there seem to be grammar based problems as well (no grammar errors
> >  or warnings, but the grammer works differently now).  So the transition
> >  has not been as painless as I had hoped.  
> 
> Could you elaborate on this?

  The example I've tried to rebuild is from my simple expression
  parser.  This is on my web page

     http://www.bearcave.com/software/antlr/antlr_examples.html

  I have not updated the "main.C" with my new code that properly
  initializes the AST Factory, so the supporting C++ which prints the
  tree is out of date.  I'm using the default AST construction.  The
  grammar is shown below.  The parser processes the left hand side
  identifier, the assignment and then nothing else.  I'm note sure why
  this is.  As I note on the web page, this used to work.  If it is
  not something blazingly obvious, please don't spend time on this.
  After all, I have not read the recent documentation changes and one
  should RTFM before asking for help.

  Ian



options {
	language="Cpp";
}

class MyExprParser extends Parser;

options {
        k = 2;
        exportVocab=MyExpr;
	buildAST = true;
}


exprlist
  : ( assignment_statement )* EOF!
  ;

assignment_statement
  : assignment SEMICOLON!
  ;

assignment
  : (IDENT ASSIGN )? expr
  ;

primary_expr
  : IDENT 
  | constant 
  | (LPAREN! expr RPAREN! ) 
  ;

sign_expr
  : (MINUS)? primary_expr
  ;

mul_expr
  : sign_expr (( TIMES | DIVIDE | MOD ) sign_expr)*
  ;

expr
  : mul_expr (( PLUS | MINUS ) mul_expr)*
  ;


constant
  : (ICON | CHCON)
  ;



class MyExprLexer extends Lexer;

options {
	k = 2;
        exportVocab=MyExpr;
}


WS_     :       (' '
        |       '\t'
        |       '\n'
        |       '\r')
                { _ttype = Token::SKIP; }
        ;

IDENT
options {
	paraphrase = "identifier";
}
  :  ('a'..'z' | 'A'..'Z' | '_' ) ( ('a'..'z' | 'A'..'Z' | '_') |
('0'..'9' ))*
  ;

ICON
options {
	paraphrase = "integer constant";
}
  : '0'..'9' ('0'..'9')*
  ;

CHCON
options {
	paraphrase = "character constant";
}
  : "'" '\0'..'\255' "'"
  ;

COMMA
options {
	paraphrase = ",";
}
  : ','
  ;

SEMICOLON
options {
	paraphrase = ";";
}
  : ';'
  ;

LPAREN
options {
	paraphrase = "(";
}
  : '('
  ;

RPAREN
options {
	paraphrase = ")";
}
  : ')'
  ;

LCURL
options {
	paraphrase = "{";
}
  : '{'
  ;

RCURL
options {
	paraphrase = "}";
}
  : '}'
  ;

PLUS
options {
	paraphrase = "+";
}
  : '+'
  ;

MINUS
options {
	paraphrase = "-";
}
  : '-'
  ;

TIMES
options {
	paraphrase = "*";
}
  : '*'
  ;

DIVIDE
options {
	paraphrase = "/";
}
  : '/'
  ;

MOD
options {
	paraphrase = "%";
}
  : '%'
  ;

ASSIGN
options {
	paraphrase = "=";
}
  : '='
  ;



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Wed Jun  4 10:01:41 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Why does it silently ignore invalid input?
In-Reply-To: <bbl6un+nejn@eGroups.com>
Message-ID: <365DB7C4-96AE-11D7-A00A-000393BB647E@jguru.com>

If anything is optional and it doesn't find DECLARE, it will simply say 
"matching 'nothing' is ok" :)

Ter

On Wednesday, June 4, 2003, at 09:32  AM, Paul J. Lucas wrote:

> I have a grammar with a second entry-point that I call.  In my 
> grammar, "DECLARE" is
> a keyword (must be upper-case).  When the generated parser encounters 
> "declare"
> (lower-case), it simply breaks out of the parse loop and returns.  Why 
> doesn't it throw
> an exception?
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Wed Jun  4 10:40:49 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Why does it silently ignore invalid input?
Message-ID: <72C9789739C4214096AE945753B11EA32A5CD8@mypxmail04.bco-home.com>

Try turning off the default error handler with the option
{defaultErrorHandler=false;}

Monty

-----Original Message-----
From: Paul J. Lucas [mailto:dude@darkfigure.org] 
Sent: Wednesday, June 04, 2003 9:32 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Why does it silently ignore invalid input?


I have a grammar with a second entry-point that I call.  In my grammar,
"DECLARE" is 
a keyword (must be upper-case).  When the generated parser encounters
"declare" 
(lower-case), it simply breaks out of the parse loop and returns.  Why
doesn't it throw 
an exception?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From brian-l-smith at uiowa.edu  Wed Jun  4 10:54:30 2003
From: brian-l-smith at uiowa.edu (Brian Smith)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Why does it silently ignore invalid input?
In-Reply-To: <72C9789739C4214096AE945753B11EA32A5CD8@mypxmail04.bco-home.com>
References: <72C9789739C4214096AE945753B11EA32A5CD8@mypxmail04.bco-home.com>
Message-ID: <3EDE3256.8040809@uiowa.edu>

If you want ANTLR to try to match everything up through the end of the 
input, you need to make sure that your start rule(s) end with EOF:

If you have a start rule like:

      a: b c d ;

you probably want:

      a: b c d EOF ;

I don't know if this is your exact problem but it seems like it matches 
the symptoms you are describing.

- Brian

mzukowski@yci.com wrote:
> Try turning off the default error handler with the option
> {defaultErrorHandler=false;}
> 
>> From: Paul J. Lucas [mailto:dude@darkfigure.org] 
>> Subject: [antlr-interest] Why does it silently ignore invalid input?
> 
>> I have a grammar with a second entry-point that I call.  In my grammar,
>> "DECLARE" is a keyword (must be upper-case).  When the generated
 >> parser encounters "declare" (lower-case), it simply breaks
 >> out of the parse loop and returns.  Why doesn't it throw an
 >> exception?





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From dm at cs.yorku.ca  Wed Jun  4 11:10:39 2003
From: dm at cs.yorku.ca (Dave Makalsky)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Weak parsers
Message-ID: <3EDE361F.3050706@cs.yorku.ca>

Hi:

Are there any examples of 'error rules' so that I can parse a slightly 
wrong source file?

Thanks,

Dave Makalsky



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From dude at darkfigure.org  Wed Jun  4 11:53:51 2003
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Re: Why does it silently ignore invalid input?
In-Reply-To: <3EDE3256.8040809@uiowa.edu>
Message-ID: <bblf7v+qpd6@eGroups.com>

--- In antlr-interest@yahoogroups.com, Brian Smith <brian-l-smith@u...> wrote:
> If you want ANTLR to try to match everything up through the end of the 
> input, you need to make sure that your start rule(s) end with EOF:

Yep, that was it.  Thanks!  :-)


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sunshine at public.kherson.ua  Wed Jun  4 13:23:29 2003
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] how to allow keywords as variables
Message-ID: <BB042FF1.1D9BF%sunshine@public.kherson.ua>

Hi Terrence,

I have look on your lecture page and found here few PDF and MP3 audio.

I am very interested now in question "how to allow keywords as variables "
But there is only MP3 for this issue.

Problem is that I am not native English man, so I afraid it will be hard for
me understand it listening MP3.

Why there is no PDF files for many lectures in "Worksheet 0" for example?

I wonder where I can find answer on this question in your standard docs at
    http://antlr.org/doc/index.html  ?

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jimirwin at acm.org  Wed Jun  4 16:57:54 2003
From: jimirwin at acm.org (Jim Irwin)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Lexing problem
Message-ID: <bbm122+g9v2@eGroups.com>

Hi, I'm new to Antlr, and I have a problem for which I would welcome 
suggestions.  I'm trying to parse ColdFusion code, and the language 
allows strings to contain expressions.  The syntax is roughly the 
following: varname = "... #expression_1# ..." where the hash marks 
enclose a ColdFusion expression that is evaluated and substituted 
into the string at runtime.

The real problem is that the embedded expression is itself allowed 
to contain strings, so that a single source-code string may look 
like the following:

"...#iif("a" gt "#b#", "cat", "dog")#..."

My problem is that I cannot think of a way to define a lexical rule 
that would recognize such a complex string.  In principle, the 
string should be parsed.  I can conceive of the lexer returning a 
token representing the entire string to the parser, and the parser 
then recursively lexing and parsing the string value until there are 
no more embedded hash-expressions.

I have no clue as to how I should proceed.  In order to lex the 
string, I seem to need a specialized routine that looks ahead, keeps 
track of nested expressions and their strings, and terminates only 
when the matching end quote outside of all expressions is 
encountered.

Any suggestions?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Thu Jun  5 07:08:46 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] ANNOUNCE: new development snapshot
Message-ID: <20030605160846.Q16357@cs.utwente.nl>

Hi,

Finally I got some time to resync on my mailbox and do some antlr stuff.

The result of this can be found at this link:

http://wwwhome.cs.utwente.nl/~klaren/antlr/antlr-20030605.tar.gz

This snapshot is cut from the current maintrunk.

- Fixes to configure/Makefile build I hope it now works out of the box. And
  behaves the same as Terence's build scripts (e.g. only one antlr.jar)
- I included/merged a number of MSVC fixes (mainly the ones from Alexander
  Lenski kudos to him for supplying this stuff, also thanks to Thomas
  Dudziak and other supplying patches)
  - Fixed ANTLR_API stuff in config.h
  - Put ANTLR_API on generated classes and structs.
  - I hope it now builds ok on MSVC 7.0
  - I expect better behaviour on MSVC 6.0 but no guarantees. Might still need
    Thomas' STLPort solution.

Please follow MSVC instructions in lib/cpp/README. In short for a non dll
build add all the lib/cpp/src/*.cpp (except dll.cpp) files and put lib/cpp
in the include path of the compiler. (Do *not* use the stuff from the
contrib dir its outdated)

I did not yet compile a list of bugfixes since 2.7.2 release. But I'm
pretty sure all trivial fixes are in.

I'd appreciate all the feedback form MSVC users. (Keep in mind that I don't
have access to these compilers and cannot test this stuff)

I do not exactly know how long I will have time but I hope we can get a
fixup release out. I might try making the stuff Cygwin or Mingw friendly.

As with all development snapshots YMMV, it may blow up in your face, no
guarantees.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
              of UCSD Pascal ever released..." --- Larry Smith


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From thomas.jackson at microfocus.com  Thu Jun  5 08:07:53 2003
From: thomas.jackson at microfocus.com (Thomas Jackson III)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Eclipse Plugin - Problem
Message-ID: <3AC103F1B7EEEC48A855ACB1D2819E9101ACA6EE@rock-corpmail.microfocus.com>

Hi all,

I am using the Eclipse plugin(version 1.0.3) for Antlr development and have
run across an anomaly that someone hopefully has an answer to.

I have the following tokens declared in the Lexer

NOT : '?';
NG  : "?>";
NL  : "?<";
NE  : "?=";

When I compile the grammar in Eclipse it returns the following errors.

Token stream error reading grammar(s):	jcl.g
unexpected char: '''

Now, if I go to a command prompt and run the exact same Grammar using
antlr.jar(version 2.7.2) from the Antlr download, I get no errors.

It has to do with the ? character, but why would it generate code in one and
fail in the other?

Any suggestions as to what may be causing this?

Thanks
Thomas Jackson 
 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Jun  5 08:29:55 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Lexing problem
Message-ID: <72C9789739C4214096AE945753B11EA32A5CDF@mypxmail04.bco-home.com>

Try this:

STRING: '"' ~('"' | '#') CODESCAPE | '"';
CODESCAPE: '#' ~('"' | '#') STRING | '#';

You might need to alter it to handle escape characters if it has them like
C's \"

Monty

-----Original Message-----
From: Jim Irwin [mailto:jimirwin@acm.org] 
Sent: Wednesday, June 04, 2003 4:58 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Lexing problem


Hi, I'm new to Antlr, and I have a problem for which I would welcome 
suggestions.  I'm trying to parse ColdFusion code, and the language 
allows strings to contain expressions.  The syntax is roughly the 
following: varname = "... #expression_1# ..." where the hash marks 
enclose a ColdFusion expression that is evaluated and substituted 
into the string at runtime.

The real problem is that the embedded expression is itself allowed 
to contain strings, so that a single source-code string may look 
like the following:

"...#iif("a" gt "#b#", "cat", "dog")#..."

My problem is that I cannot think of a way to define a lexical rule 
that would recognize such a complex string.  In principle, the 
string should be parsed.  I can conceive of the lexer returning a 
token representing the entire string to the parser, and the parser 
then recursively lexing and parsing the string value until there are 
no more embedded hash-expressions.

I have no clue as to how I should proceed.  In order to lex the 
string, I seem to need a specialized routine that looks ahead, keeps 
track of nested expressions and their strings, and terminates only 
when the matching end quote outside of all expressions is 
encountered.

Any suggestions?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Jun  5 08:33:37 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Lexing problem
Message-ID: <72C9789739C4214096AE945753B11EA32A5CE0@mypxmail04.bco-home.com>

I forgot the closeure.  Make it:

STRING: '"' (~('"' | '#'))* CODESCAPE | '"';
CODESCAPE: '#' (~('"' | '#'))* STRING | '#';

Monty

-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
Sent: Thursday, June 05, 2003 8:30 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Lexing problem


Try this:

STRING: '"' ~('"' | '#') CODESCAPE | '"';
CODESCAPE: '#' ~('"' | '#') STRING | '#';

You might need to alter it to handle escape characters if it has them like
C's \"

Monty

-----Original Message-----
From: Jim Irwin [mailto:jimirwin@acm.org] 
Sent: Wednesday, June 04, 2003 4:58 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Lexing problem


Hi, I'm new to Antlr, and I have a problem for which I would welcome 
suggestions.  I'm trying to parse ColdFusion code, and the language 
allows strings to contain expressions.  The syntax is roughly the 
following: varname = "... #expression_1# ..." where the hash marks 
enclose a ColdFusion expression that is evaluated and substituted 
into the string at runtime.

The real problem is that the embedded expression is itself allowed 
to contain strings, so that a single source-code string may look 
like the following:

"...#iif("a" gt "#b#", "cat", "dog")#..."

My problem is that I cannot think of a way to define a lexical rule 
that would recognize such a complex string.  In principle, the 
string should be parsed.  I can conceive of the lexer returning a 
token representing the entire string to the parser, and the parser 
then recursively lexing and parsing the string value until there are 
no more embedded hash-expressions.

I have no clue as to how I should proceed.  In order to lex the 
string, I seem to need a specialized routine that looks ahead, keeps 
track of nested expressions and their strings, and terminates only 
when the matching end quote outside of all expressions is 
encountered.

Any suggestions?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Jun  5 09:59:29 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Eclipse Plugin - Problem
Message-ID: <72C9789739C4214096AE945753B11EA32A5CE3@mypxmail04.bco-home.com>

Bizarre.  Is there any way to see how antlr was invoked?  Any chance of
seeing the version number from antlr starting up?

Monty

-----Original Message-----
From: Thomas Jackson III [mailto:thomas.jackson@microfocus.com] 
Sent: Thursday, June 05, 2003 8:08 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Eclipse Plugin - Problem


Hi all,

I am using the Eclipse plugin(version 1.0.3) for Antlr development and have
run across an anomaly that someone hopefully has an answer to.

I have the following tokens declared in the Lexer

NOT : '?';
NG  : "?>";
NL  : "?<";
NE  : "?=";

When I compile the grammar in Eclipse it returns the following errors.

Token stream error reading grammar(s):	jcl.g
unexpected char: '''

Now, if I go to a command prompt and run the exact same Grammar using
antlr.jar(version 2.7.2) from the Antlr download, I get no errors.

It has to do with the ? character, but why would it generate code in one and
fail in the other?

Any suggestions as to what may be causing this?

Thanks
Thomas Jackson 
 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jimirwin at acm.org  Thu Jun  5 10:15:31 2003
From: jimirwin at acm.org (Jim Irwin)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Re: Lexing problem
In-Reply-To: <72C9789739C4214096AE945753B11EA32A5CE0@mypxmail04.bco-home.com>
Message-ID: <bbntrk+60ps@eGroups.com>

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> 
> STRING: '"' (~('"' | '#'))* CODESCAPE | '"';
> CODESCAPE: '#' (~('"' | '#'))* STRING | '#';
> 
> Monty

Thanks, it seems to work quite well.  I changed the rules slightly to 
STRING: '"' (~('"' | '#') | CODESCAPE)* '"';
CODESCAPE: '#' (~('"' | '#') | STRING)* '#';




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Thu Jun  5 10:19:43 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] how to allow keywords as variables
In-Reply-To: <BB042FF1.1D9BF%sunshine@public.kherson.ua>
Message-ID: <E5FECFE2-9779-11D7-A812-000393BB647E@jguru.com>

Hi Ruslan,

I'm afraid there are few good solutions and I didn't write down any of 
my "answers".  Perhaps some people here will respond.

The one interesting method may be to build a TokenStream object that 
looks at the context before and after an ID or keyword and decides 
whether to change the token type.  The TokenStream might end up being a 
full-blown parser though.

Terence

On Wednesday, June 4, 2003, at 01:23  PM, Ruslan Zasukhin wrote:

> Hi Terrence,
>
> I have look on your lecture page and found here few PDF and MP3 audio.
>
> I am very interested now in question "how to allow keywords as 
> variables "
> But there is only MP3 for this issue.
>
> Problem is that I am not native English man, so I afraid it will be 
> hard for
> me understand it listening MP3.
>
> Why there is no PDF files for many lectures in "Worksheet 0" for 
> example?
>
> I wonder where I can find answer on this question in your standard 
> docs at
>     http://antlr.org/doc/index.html  ?
>
> -- 
> Best regards,
> Ruslan Zasukhin      [ I feel the need...the need for speed ]
> -------------------------------------------------------------
> e-mail: ruslan@paradigmasoft.com
> web: http://www.paradigmasoft.com
>
> To subscribe to the Valentina mail list go to:
> http://lists.macserve.net/mailman/listinfo/valentina
> -------------------------------------------------------------
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Jun  5 10:20:10 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Re: Lexing problem
Message-ID: <72C9789739C4214096AE945753B11EA32A5CE8@mypxmail04.bco-home.com>

Ah, yes.  Good catch.

By the way, is this an open source grammar you're working on?  Just curious.

Monty

-----Original Message-----
From: Jim Irwin [mailto:jimirwin@acm.org] 
Sent: Thursday, June 05, 2003 10:16 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Lexing problem


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> 
> STRING: '"' (~('"' | '#'))* CODESCAPE | '"';
> CODESCAPE: '#' (~('"' | '#'))* STRING | '#';
> 
> Monty

Thanks, it seems to work quite well.  I changed the rules slightly to 
STRING: '"' (~('"' | '#') | CODESCAPE)* '"';
CODESCAPE: '#' (~('"' | '#') | STRING)* '#';




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From monaabs at yahoo.com  Thu Jun  5 11:24:29 2003
From: monaabs at yahoo.com (monaabs)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] 2.6.0 and Japanese
Message-ID: <bbo1st+9n5b@eGroups.com>

Greetings!!!

Is there a way to change some files and get 2.6.0 to work with 
Japanese characters . I tried switching to 2.7.2 but my application 
crashes . I dont mind changing lines of code to support Japanese and 
keeping the version as it is .

Also has naybody tried using 2.7.2 with Japanese characters does the 
parser work satisfactorily.

Any inputs highly appreciated .
Mona


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Thu Jun  5 13:47:26 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Re: Eclipse Plugin - Problem
In-Reply-To: <72C9789739C4214096AE945753B11EA32A5CE3@mypxmail04.bco-home.com>
Message-ID: <bboa8v+1e6u@eGroups.com>

I had a thought.  "Vanilla" eclipse probably ships with the ANTLR 
2.7.1 jar--ANTLR is used for the refactoring support--and the antlr 
plugin may use the built-in jar file instead of the 2.7.2 supplied.  
The error reported would be consistent with that--2.7.2 has a wider 
default character range than 2.7.1.

--Loring


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Bizarre.  Is there any way to see how antlr was invoked?  Any chance 
of
> seeing the version number from antlr starting up?
> 
> Monty
> 
> -----Original Message-----
> From: Thomas Jackson III [mailto:thomas.jackson@m...] 
> Sent: Thursday, June 05, 2003 8:08 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Eclipse Plugin - Problem
> 
> 
> Hi all,
> 
> I am using the Eclipse plugin(version 1.0.3) for Antlr development 
and have
> run across an anomaly that someone hopefully has an answer to.
> 
> I have the following tokens declared in the Lexer
> 
> NOT : '?';
> NG  : "?>";
> NL  : "?<";
> NE  : "?=";
> 
> When I compile the grammar in Eclipse it returns the following 
errors.
> 
> Token stream error reading grammar(s):	jcl.g
> unexpected char: '''
> 
> Now, if I go to a command prompt and run the exact same Grammar 
using
> antlr.jar(version 2.7.2) from the Antlr download, I get no errors.
> 
> It has to do with the ? character, but why would it generate code in 
one and
> fail in the other?
> 
> Any suggestions as to what may be causing this?
> 
> Thanks
> Thomas Jackson 
>  
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Jun  5 13:51:08 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] how to allow keywords as variables
Message-ID: <72C9789739C4214096AE945753B11EA32A5CEE@mypxmail04.bco-home.com>

For which see http://www.codetransform.com/filterexample.html.  I believe
there is a FAQ entry on this subject too
http://www.jguru.com/faq/view.jsp?EID=140

Monty
P.S. I'm sending this again as the original appears to have been lost....

-----Original Message-----
From: Terence Parr [mailto:parrt@jguru.com] 
Sent: Thursday, June 05, 2003 10:20 AM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] how to allow keywords as variables


Hi Ruslan,

I'm afraid there are few good solutions and I didn't write down any of 
my "answers".  Perhaps some people here will respond.

The one interesting method may be to build a TokenStream object that 
looks at the context before and after an ID or keyword and decides 
whether to change the token type.  The TokenStream might end up being a 
full-blown parser though.

Terence

On Wednesday, June 4, 2003, at 01:23  PM, Ruslan Zasukhin wrote:

> Hi Terrence,
>
> I have look on your lecture page and found here few PDF and MP3 audio.
>
> I am very interested now in question "how to allow keywords as 
> variables " But there is only MP3 for this issue.
>
> Problem is that I am not native English man, so I afraid it will be 
> hard for me understand it listening MP3.
>
> Why there is no PDF files for many lectures in "Worksheet 0" for 
> example?
>
> I wonder where I can find answer on this question in your standard 
> docs at
>     http://antlr.org/doc/index.html  ?
>
> --
> Best regards,
> Ruslan Zasukhin      [ I feel the need...the need for speed ]
> -------------------------------------------------------------
> e-mail: ruslan@paradigmasoft.com
> web: http://www.paradigmasoft.com
>
> To subscribe to the Valentina mail list go to:
> http://lists.macserve.net/mailman/listinfo/valentina
> -------------------------------------------------------------
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org Co-founder,
http://www.peerscope.com link sharing, pure-n-simple Lecturer in Comp. Sci.,
University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Jun  5 10:23:44 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] how to allow keywords as variables
Message-ID: <72C9789739C4214096AE945753B11EA32A5CE9@mypxmail04.bco-home.com>

For which see http://www.codetransform.com/filterexample.html.  I believe
there is a FAQ entry on this subject too
http://www.jguru.com/faq/view.jsp?EID=140

Monty

-----Original Message-----
From: Terence Parr [mailto:parrt@jguru.com] 
Sent: Thursday, June 05, 2003 10:20 AM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] how to allow keywords as variables


Hi Ruslan,

I'm afraid there are few good solutions and I didn't write down any of 
my "answers".  Perhaps some people here will respond.

The one interesting method may be to build a TokenStream object that 
looks at the context before and after an ID or keyword and decides 
whether to change the token type.  The TokenStream might end up being a 
full-blown parser though.

Terence

On Wednesday, June 4, 2003, at 01:23  PM, Ruslan Zasukhin wrote:

> Hi Terrence,
>
> I have look on your lecture page and found here few PDF and MP3 audio.
>
> I am very interested now in question "how to allow keywords as
> variables "
> But there is only MP3 for this issue.
>
> Problem is that I am not native English man, so I afraid it will be
> hard for
> me understand it listening MP3.
>
> Why there is no PDF files for many lectures in "Worksheet 0" for
> example?
>
> I wonder where I can find answer on this question in your standard
> docs at
>     http://antlr.org/doc/index.html  ?
>
> --
> Best regards,
> Ruslan Zasukhin      [ I feel the need...the need for speed ]
> -------------------------------------------------------------
> e-mail: ruslan@paradigmasoft.com
> web: http://www.paradigmasoft.com
>
> To subscribe to the Valentina mail list go to: 
> http://lists.macserve.net/mailman/listinfo/valentina
> -------------------------------------------------------------
>
>
>
>
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org Co-founder,
http://www.peerscope.com link sharing, pure-n-simple Lecturer in Comp. Sci.,
University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sunshine at public.kherson.ua  Thu Jun  5 15:02:32 2003
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] how to allow keywords as variables
In-Reply-To: <E5FECFE2-9779-11D7-A812-000393BB647E@jguru.com>
Message-ID: <BB0598A8.1DB61%sunshine@public.kherson.ua>

on 6/5/03 20:19, Terence Parr at parrt@jguru.com wrote:

> Hi Ruslan,
> 
> I'm afraid there are few good solutions and I didn't write down any of
> my "answers".  Perhaps some people here will respond.
> 
> The one interesting method may be to build a TokenStream object that
> looks at the context before and after an ID or keyword and decides
> whether to change the token type.  The TokenStream might end up being a
> full-blown parser though.

Hi Terrence,

Thank you.

I have listen mp3, and understand it seems many parts :-)
Now I see that there is no simple built-into ANTLR way do this.

Just when I have see that subject of your lecture,
I was in hope that ANTLR have such option, and I have miss it.

By the way, may be exists way to make this as feature of ANTLR?

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Matthew.Ford at forward.com.au  Thu Jun  5 15:14:59 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] 2.6.0 and Japanese
References: <bbo1st+9n5b@eGroups.com>
Message-ID: <001001c32baf$e7885a90$0200a8c0@NOTEBOOK>

Hi Mona,

I will send you direct (off list) my unicode.zip file which parsers Japanese
characters.

This example uses Japanese.
It illustrates Identifiers and Tokens

This will read a Shift-JIS file in and parse it and display the input and
parser output in a debug window as well as write the output to a debug log
file in UTF-8

It was written in Antlr 2.7.1 but I would suggest 2.7.2 as improvements have
been made in Antlr's unicode support.
all the best
matthew


----- Original Message -----
From: "monaabs" <monaabs@yahoo.com>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, June 06, 2003 4:24 AM
Subject: [antlr-interest] 2.6.0 and Japanese


> Greetings!!!
>
> Is there a way to change some files and get 2.6.0 to work with
> Japanese characters . I tried switching to 2.7.2 but my application
> crashes . I dont mind changing lines of code to support Japanese and
> keeping the version as it is .
>
> Also has naybody tried using 2.7.2 with Japanese characters does the
> parser work satisfactorily.
>
> Any inputs highly appreciated .
> Mona
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sunshine at public.kherson.ua  Thu Jun  5 15:04:08 2003
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] how to allow keywords as variables
In-Reply-To: <72C9789739C4214096AE945753B11EA32A5CE9@mypxmail04.bco-home.com>
Message-ID: <BB059908.1DB62%sunshine@public.kherson.ua>

on 6/5/03 20:23, mzukowski@yci.com at mzukowski@yci.com wrote:

> For which see http://www.codetransform.com/filterexample.html.  I believe
> there is a FAQ entry on this subject too
> http://www.jguru.com/faq/view.jsp?EID=140

Thank you, Monty!

 
> Monty
> 
> -----Original Message-----
> From: Terence Parr [mailto:parrt@jguru.com]
> Sent: Thursday, June 05, 2003 10:20 AM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] how to allow keywords as variables
> 
> 
> Hi Ruslan,
> 
> I'm afraid there are few good solutions and I didn't write down any of
> my "answers".  Perhaps some people here will respond.
> 
> The one interesting method may be to build a TokenStream object that
> looks at the context before and after an ID or keyword and decides
> whether to change the token type.  The TokenStream might end up being a
> full-blown parser though.
> 
> Terence

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sunshine at public.kherson.ua  Thu Jun  5 15:21:33 2003
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] how to allow keywords as variables
In-Reply-To: <72C9789739C4214096AE945753B11EA32A5CEE@mypxmail04.bco-home.com>
Message-ID: <BB059D1D.1DB68%sunshine@public.kherson.ua>

on 6/5/03 23:51, mzukowski@yci.com at mzukowski@yci.com wrote:

> For which see http://www.codetransform.com/filterexample.html.  I believe
> there is a FAQ entry on this subject too
> http://www.jguru.com/faq/view.jsp?EID=140

Hi Monty,

I wonder if this paragraph still true for 2.7.2 ANTLR

> Antlr, unlike PCCTS 1.3x, does not "hoist" syntactic or semantic predicates.
> That means that you can't isolate that part into a rule like this:
> 
> 
> id_or_keyword:
>   ( ID 
>   | ( ~(ID) )=>{ LT(1).possibleID() }? .
>   )
>   ;
> 

I ask because that FAQ is 4 years old,
and in Terr's mp3 was words about rule "id_or_keyword"

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Jun  5 15:57:41 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] how to allow keywords as variables
Message-ID: <72C9789739C4214096AE945753B11EA32A5CF0@mypxmail04.bco-home.com>

2.7.2 still does not hoist, with the exception of hoisting from lexer rules
into the nextToken() method.

Ter's method would look like

id_or_keyword:
	ID
	|"if"
	|"else"
	;

But this still can be cumbersome and generate lots of ambiguities which you
might need to straighten out with syntactic predicates.

Monty

-----Original Message-----
From: Ruslan Zasukhin [mailto:sunshine@public.kherson.ua] 
Sent: Thursday, June 05, 2003 3:22 PM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] how to allow keywords as variables


on 6/5/03 23:51, mzukowski@yci.com at mzukowski@yci.com wrote:

> For which see http://www.codetransform.com/filterexample.html.  I 
> believe there is a FAQ entry on this subject too 
> http://www.jguru.com/faq/view.jsp?EID=140

Hi Monty,

I wonder if this paragraph still true for 2.7.2 ANTLR

> Antlr, unlike PCCTS 1.3x, does not "hoist" syntactic or semantic 
> predicates. That means that you can't isolate that part into a rule 
> like this:
> 
> 
> id_or_keyword:
>   ( ID 
>   | ( ~(ID) )=>{ LT(1).possibleID() }? .
>   )
>   ;
> 

I ask because that FAQ is 4 years old,
and in Terr's mp3 was words about rule "id_or_keyword"

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From v_vivekg at yahoo.com  Thu Jun  5 21:05:41 2003
From: v_vivekg at yahoo.com (v_vivekg)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] Two Problems left in ASN.1 grammar
Message-ID: <bbp3ul+jo28@eGroups.com>

Hello Ter/Rick

There are exactly two problems left in my ASN.1 grammar for which I
need your help for solving them.

1) There is error reported if an identifier(upper or lower case)
matches with a keyword for eg

symbol returns [String s]
{s="";}			
	:	(up:UPPER  { s = up.getText();}
	|	 lid:LOWER { s = lid.getText();})
	;

If this rule matches UPPER or LOWER with a keyword then there is an
error 'unexpected Token '.

2) Not everything is consumed by inverting a rule. EG

| (UPPER "MACRO" ASSIGN_OP BEGIN_KW (~(WS))* END_KW)=>  UPPER "MACRO"
ASSIGN_OP BEGIN_KW (~(WS))* END_KW

WS is white space skipping ' ' and new lines.The above rule fails when
a double quotes followed by some character is encountered(eg at "{" it
says expecting '"' found '{'), I think it problem with a character set.


Waiting for your replies.

Regards
Vivek





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From sunshine at public.kherson.ua  Thu Jun  5 23:22:21 2003
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:15:40 2004
Subject: [antlr-interest] how to allow keywords as variables
In-Reply-To: <72C9789739C4214096AE945753B11EA32A5CF0@mypxmail04.bco-home.com>
Message-ID: <BB060DCD.1DBA4%sunshine@public.kherson.ua>

on 6/6/03 1:57, mzukowski@yci.com at mzukowski@yci.com wrote:

> 2.7.2 still does not hoist, with the exception of hoisting from lexer rules
> into the nextToken() method.
> 
> Ter's method would look like
> 
> id_or_keyword:
> ID
> |"if"
> |"else"
> ;
> 
> But this still can be cumbersome and generate lots of ambiguities which you
> might need to straighten out with syntactic predicates.

Okay, I see.

It seems I also have hear in mp3 word about ability resolve this using stack
of context state.

What about this?

For example

    "drop" "table" { ExpectIdNow = true; }  ID

And in lexer 

    ID: 
        if( ExpectIdNow )
            then allow ID or keyword
        else 
            keywords only.

Or something such?

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From M.Wirth at seeburger.de  Fri Jun  6 00:14:52 2003
From: M.Wirth at seeburger.de (Wirth. Michael)
Date: Mon Dec 20 16:15:40 2004
Subject: AW: [antlr-interest] Re: Eclipse Plugin - Problem
Message-ID: <164986BA012AA2468F7F6AA0562D7BDC06C538@seedebrexch.seeburger.de>

In my eclipse installation I can create the sources.
Have you add the right version of antlr.jar to your project?
Perhapts eclipse use the jar of ?"Vanilla"? descriped below.

Rigth click on the root node of your 
project->Properties->Java Build Path->Libraries->Add External JAR's

    Michael


-----Urspr?ngliche Nachricht-----
Von: lgcraymer [mailto:lgc@mail1.jpl.nasa.gov]
Gesendet: Donnerstag, 5. Juni 2003 22:47
An: antlr-interest@yahoogroups.com
Betreff: [antlr-interest] Re: Eclipse Plugin - Problem


I had a thought.  "Vanilla" eclipse probably ships with the ANTLR 
2.7.1 jar--ANTLR is used for the refactoring support--and the antlr 
plugin may use the built-in jar file instead of the 2.7.2 supplied.  
The error reported would be consistent with that--2.7.2 has a wider 
default character range than 2.7.1.

--Loring


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Bizarre.  Is there any way to see how antlr was invoked?  Any chance 
of
> seeing the version number from antlr starting up?
> 
> Monty
> 
> -----Original Message-----
> From: Thomas Jackson III [mailto:thomas.jackson@m...] 
> Sent: Thursday, June 05, 2003 8:08 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Eclipse Plugin - Problem
> 
> 
> Hi all,
> 
> I am using the Eclipse plugin(version 1.0.3) for Antlr development 
and have
> run across an anomaly that someone hopefully has an answer to.
> 
> I have the following tokens declared in the Lexer
> 
> NOT : '?';
> NG  : "?>";
> NL  : "?<";
> NE  : "?=";
> 
> When I compile the grammar in Eclipse it returns the following 
errors.
> 
> Token stream error reading grammar(s):	jcl.g
> unexpected char: '''
> 
> Now, if I go to a command prompt and run the exact same Grammar 
using
> antlr.jar(version 2.7.2) from the Antlr download, I get no errors.
> 
> It has to do with the ? character, but why would it generate code in 
one and
> fail in the other?
> 
> Any suggestions as to what may be causing this?
> 
> Thanks
> Thomas Jackson 
>  
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From vergaraanto at yahoo.it  Fri Jun  6 00:25:37 2003
From: vergaraanto at yahoo.it (=?iso-8859-1?q?Antonio=20Vergara?=)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] TinyBasic.g
Message-ID: <20030606072537.40797.qmail@web42002.mail.yahoo.com>

Hi,
where I can find the documentation on the TinyBasic example?
thanks.



---------------------------------
Yahoo! Mail: 6MB di spazio gratuito, 30MB per i tuoi allegati, l'antivirus, il filtro Anti-spam
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030606/6757169e/attachment.html
From jimirwin at acm.org  Fri Jun  6 05:18:10 2003
From: jimirwin at acm.org (Jim Irwin)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Re: Lexing problem
In-Reply-To: <72C9789739C4214096AE945753B11EA32A5CE8@mypxmail04.bco-home.com>
Message-ID: <bbq0q2+se9d@eGroups.com>

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> By the way, is this an open source grammar you're working on?  
Just curious.
> 

If I arrive at a moderately useful parser or set of parsers, I would 
consider making it open source.  The question becomes: would enough 
people be interested in it to make it worth the effort to publish it?

My goal is to do some automated code metrics on ColdFusion code.  
That means being able to recognize the use of session, request and 
client scope variables, measuring the level of indirection in 
controlling the flow of execution, measuring the degree of coupling 
between templates, and other measures of complexity.  Because of the 
nature of the language, it means parsing ColdFusion tags, ColdFusion 
script, HTML tags, and JavaScript all entangled in the source files.

There is also a methodology for coding applications called FuseBox 
(somewhat analogous to Java struts) that if done badly, results in 
horribly obfuscated code.  Unfortunately from what I've seen so far 
in our company, it seems to be done badly more often than not.  I'm 
hoping to come up with a code analyzer that can point out the 
features that result in hard-to-read and hard-to-maintain code.






 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Fri Jun  6 09:33:58 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] how to allow keywords as variables
In-Reply-To: <BB060DCD.1DBA4%sunshine@public.kherson.ua>
Message-ID: <AC77DBA1-983C-11D7-8A9E-000393BB647E@jguru.com>


On Thursday, June 5, 2003, at 11:22  PM, Ruslan Zasukhin wrote:

> on 6/6/03 1:57, mzukowski@yci.com at mzukowski@yci.com wrote:
>
>> 2.7.2 still does not hoist, with the exception of hoisting from lexer 
>> rules
>> into the nextToken() method.
>>
>> Ter's method would look like
>>
>> id_or_keyword:
>> ID
>> |"if"
>> |"else"
>> ;
>>
>> But this still can be cumbersome and generate lots of ambiguities 
>> which you
>> might need to straighten out with syntactic predicates.
>
> Okay, I see.
>
> It seems I also have hear in mp3 word about ability resolve this using 
> stack
> of context state.

Yes, something like what you have below.  You can do the "state" here 
or in a separate TokenStream object that manipulates the token stream, 
changing "table" to ID when necessary.

Terence
>
> What about this?
>
> For example
>
>     "drop" "table" { ExpectIdNow = true; }  ID
>
> And in lexer
>
>     ID:
>         if( ExpectIdNow )
>             then allow ID or keyword
>         else
>             keywords only.
>
> Or something such?
>
> -- 
> Best regards,
> Ruslan Zasukhin      [ I feel the need...the need for speed ]
> -------------------------------------------------------------
> e-mail: ruslan@paradigmasoft.com
> web: http://www.paradigmasoft.com
>
> To subscribe to the Valentina mail list go to:
> http://lists.macserve.net/mailman/listinfo/valentina
> -------------------------------------------------------------
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri Jun  6 09:38:42 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] how to allow keywords as variables
Message-ID: <72C9789739C4214096AE945753B11EA32A5CF1@mypxmail04.bco-home.com>

That won't work because you can't feed back to the parser from the lexer
reliably because the lexer has already lexed at least k tokens ahead.

However, something like that would work inside a TokenStream filter as
described in my page http://www.codetransform.com/filterexample.html,
because all the changing would be done before the parser knows about the
token.

Monty

-----Original Message-----
From: Ruslan Zasukhin [mailto:sunshine@public.kherson.ua] 
Sent: Thursday, June 05, 2003 11:22 PM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] how to allow keywords as variables


on 6/6/03 1:57, mzukowski@yci.com at mzukowski@yci.com wrote:

> 2.7.2 still does not hoist, with the exception of hoisting from lexer 
> rules into the nextToken() method.
> 
> Ter's method would look like
> 
> id_or_keyword:
> ID
> |"if"
> |"else"
> ;
> 
> But this still can be cumbersome and generate lots of ambiguities 
> which you might need to straighten out with syntactic predicates.

Okay, I see.

It seems I also have hear in mp3 word about ability resolve this using stack
of context state.

What about this?

For example

    "drop" "table" { ExpectIdNow = true; }  ID

And in lexer 

    ID: 
        if( ExpectIdNow )
            then allow ID or keyword
        else 
            keywords only.

Or something such?

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From antlrlist at yahoo.com  Fri Jun  6 10:39:50 2003
From: antlrlist at yahoo.com (antlrlist)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Re: High level semantic analysis
In-Reply-To: <bbajnd+a4hu@eGroups.com>
Message-ID: <bbqjl6+82bs@eGroups.com>


First of all, I want to thank you for your interest, Micheal, and to 
apologize for the time I took to answer.

antlraux is in "Hot development time" right now - for example, now 
Scope don't deal with methods any more :), it is easier to store them 
in "class Types".

I am definitely not keen to release the source code to the whole 
world right now - it "mutates" 5 to 10 times every day, so you'd have 
an outdated version the hour after downloading it.

This said, if you want I can send you a zip file with lots of java 
files with nearly no javadocs. In fact, *I* am interested in your 
opinion - an outsider view is allways good.

However, for hardware reasons, I might not be able to send you 
anything until next monday. Sorry again :(

Enrique.


--- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...> 
wrote:
> --- In antlr-interest@yahoogroups.com, "antlrlist" <antlrlist@y...> 
> wrote:
> > This classes, and many others (like an AST with lexical 
> information, 
> > or utilities for parsing the command line) are structured in a 
> > package that I called antlraux. I'll release it when it is ready.
> > 
> > Cya,
> > 
> > Enrique
> 
> Enrique,
> 
> Care to release antlraux now, even in it's unready state?.
> 
> Cheers,
> 
> Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From antlrlist at yahoo.com  Fri Jun  6 11:23:40 2003
From: antlrlist at yahoo.com (antlrlist)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Re: yet another syntactic predicate problem
In-Reply-To: <bbkt9v+4v62@eGroups.com>
Message-ID: <bbqm7c+qt3v@eGroups.com>

If I have well understood, your problem is not in the parser, but in 
the lexer.

At first I could't understand your PCDATA rule, due to your 
identation system, which seems certainly different to the one I use. 
After a bit of "beautifying", the rule became like this:

PCDATA
  : ( { LA(2)!='.' }? ('a'|'b'|'c'|'d'|'e') )
  | ~('a'|'b'|'c'|'d'|'e'|'<'|'>')
     ( options { generateAmbigWarnings=false; }
       : '\r' '\n' { newline(); }
       | '\r'      { newline(); }
       | '\n'      { newline(); }
       | ~('<'|'\n'|'\r'|'"'|'>')
     )*
  ;


This rule has two alternatives: the first is activated when LA(2)!
='.' and LA(1) is in {a,b,c,d,e}.
The second alternative is activated when LA(1) is NOT in 
{a,b,c,d,e,<,>}. So this is the alternative fired when encountering " 
B. title"; the initial space is in that group.

This means that PCDATA is recognized - by its second alternative - 
when the entrance " B. title" is supplied to the lexer.

I found the problem, but not the solution. Sorry. Anyway I adventure 
to give you some advices:

1. You can try using two different lexers, one for parsing tags and 
other for text, sharing the inputstate.
2. Don't use optional operator '?' in combination with '+'. Use '*' 
instead - the implementation is a bit different, and sometimes this 
bit makes things work.
3. Ident your grammars a bit more, please! :)

Cheers,

Enrique


--- In antlr-interest@yahoogroups.com, "pcristip" <pcristip@y...> 
wrote:
> Hi,
> 
> I'd really appreciate some help on the following problem:
> 
> I have a grammar that is supposed to parse the body of a html file, 
> and everything is ok except the fact that the data between the tags 
> should be of two kinds:
> 1. a topic which is normal text except that it should start with a 
> letter (in fact only a through e letters) followed by a '.' char 
> (e.g." A.")
> 2. normal cdata which is the case if the text is not a topic
> 
> I managed to make this work except for the case when the text 
starts 
> with spaces.
> 
> Now I have something like:
> (in the parser)
> topic		:	TOPICID^ topicbody
> 			;
> 
> topicbody	:
> 				(	options { greedy=true; }
> 					:
> 					text | font
> 				)*
> 			;
> text		:	PCDATA ;
> 
> 
> (in the lexer)
> 
> TOPICID
> 			:
> 				('a' | 'b' | 'c' | 'd' | 'e') '.'
> 			;
> 
> 
> PCDATA
> 			:
> 				({ LA(2)!='.' }? 
> ('a'|'b'|'c'|'d'|'e'))	| ~('a'|'b'|'c'|'d'|'e'|'<'|'>')
> 				(
> 					options {
> 					
> 	generateAmbigWarnings=false;
> 					}
> 				:	'\r' '\n'	
> 	{newline();}
> 				|	'\r'		
> 	{newline();}
> 				|	'\n'		
> 	{newline();}
> 				|	~('<'|'\n'|'\r'|'"'|'>')
> 				)*
> 			;
> 
> 
> which works ok for texts like "A. some text here" and "A normal 
text"
> but if there are spaces in front like "   B. title" then the text 
is 
> matched as data not as a topic.
> 
> I tried to solve this by modifing the topic rule but no luck. And 
> thought that the best solution would be to use syntactic predicates 
> because the lookahead is not fixed in this case (the number of 
spaces 
> can be arbitrary before you can tell which rule to match).
> So I got to this construct:
> 
> topic_or_answer : ((spaces)? TOPICID) => topic
>                 |  text
>                 ;
> 
> spaces          : WS ;
> 
> (and in lexer)
> protected
> WS			:	(
> 					options {
> 					
> 	generateAmbigWarnings=false;
> 					}
> 				:	' '
> 				|	'\t'
> 				|	'\n'	{ newline(); }
> 				|	"\r\n"	{ newline(); }
> 				|	'\r'	{ newline(); }
> 				)+
> 			;
> 
> 
> which doesn't work (otherwise you wouldn't read these lines :) ).
> 
> Can someone give me a hint ? What did I do wrong ?
> 
> Thanks,
> Chris


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From antlrlist at yahoo.com  Fri Jun  6 11:55:19 2003
From: antlrlist at yahoo.com (antlrlist)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Token.filename being ignored - solutions
Message-ID: <bbqo2n+v1jk@eGroups.com>



Terrence,

I've had this problem for a little while: filenames are usually 
ignored by default in antlr. CommonToken does not take it in account, 
and what's worse antlr.CharScanner.makeToken() does not fill it.

Could you please explain this? Is it a matter of efficiency?

According to this link:

http://java.sun.com/docs/books/tutorial/java/data/stringsAndJavac.html

storing a String in CommonToken would add the overhead of managing 1 
pointer - String objects are not created unless you modify them.

This is shown specially in this piece of code :

  String s1 = "hello";
  String s2 = s1;
  System.out.println("s1 = " + s1
                   + "; s2 = " + s2);
  System.out.println("System.identityHashCode(s1) = "
                   + System.identityHashCode(s1));
  System.out.println("System.identityHashCode(s2) = "
                   + System.identityHashCode(s2));

  s1 += " world";
  System.out.println("\ns1 = " + s1
                   + "; s2 = " + s2);
  System.out.println("System.identityHashCode(s1) = "
                   + System.identityHashCode(s1));
  System.out.println("System.identityHashCode(s2) = "
                   + System.identityHashCode(s2));

Here's the output: 

  s1 = hello; s2 = hello
  System.identityHashCode(s1) = 2452092
  System.identityHashCode(s2) = 2452092

  s1 = hello world; s2 = hello
  System.identityHashCode(s1) = 7474923
  System.identityHashCode(s2) = 2452092

s1 points to a new address after " world" is appended. 

Cheers,

Enrique



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Fri Jun  6 12:03:13 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Token.filename being ignored - solutions
In-Reply-To: <bbqo2n+v1jk@eGroups.com>
Message-ID: <20030606190313.70833.qmail@web20418.mail.yahoo.com>

Since tokens are an open interface it is quite
possible that a token would not come from a file at
all.  If you need this why don't you subclass token to
have a filename and have your TokenStream
implementation then populate that attribute?

-Matt

--- antlrlist <antlrlist@yahoo.com> wrote:
> 
> 
> Terrence,
> 
> I've had this problem for a little while: filenames
> are usually 
> ignored by default in antlr. CommonToken does not
> take it in account, 
> and what's worse antlr.CharScanner.makeToken() does
> not fill it.
> 
> Could you please explain this? Is it a matter of
> efficiency?
> 
> According to this link:
> 
>
http://java.sun.com/docs/books/tutorial/java/data/stringsAndJavac.html
> 
> storing a String in CommonToken would add the
> overhead of managing 1 
> pointer - String objects are not created unless you
> modify them.
> 
> This is shown specially in this piece of code :
> 
>   String s1 = "hello";
>   String s2 = s1;
>   System.out.println("s1 = " + s1
>                    + "; s2 = " + s2);
>   System.out.println("System.identityHashCode(s1) =
> "
>                    + System.identityHashCode(s1));
>   System.out.println("System.identityHashCode(s2) =
> "
>                    + System.identityHashCode(s2));
> 
>   s1 += " world";
>   System.out.println("\ns1 = " + s1
>                    + "; s2 = " + s2);
>   System.out.println("System.identityHashCode(s1) =
> "
>                    + System.identityHashCode(s1));
>   System.out.println("System.identityHashCode(s2) =
> "
>                    + System.identityHashCode(s2));
> 
> Here's the output: 
> 
>   s1 = hello; s2 = hello
>   System.identityHashCode(s1) = 2452092
>   System.identityHashCode(s2) = 2452092
> 
>   s1 = hello world; s2 = hello
>   System.identityHashCode(s1) = 7474923
>   System.identityHashCode(s2) = 2452092
> 
> s1 points to a new address after " world" is
> appended. 
> 
> Cheers,
> 
> Enrique
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
http://calendar.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri Jun  6 12:06:05 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Token.filename being ignored - solutions
Message-ID: <72C9789739C4214096AE945753B11EA32A5CFA@mypxmail04.bco-home.com>

In fact there's an example of that in the gcc grammar.
http://www.codetransform.com/gcc.html

Monty

-----Original Message-----
From: Matt Benson [mailto:gudnabrsam@yahoo.com] 
Sent: Friday, June 06, 2003 12:03 PM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] Token.filename being ignored - solutions


Since tokens are an open interface it is quite
possible that a token would not come from a file at
all.  If you need this why don't you subclass token to
have a filename and have your TokenStream
implementation then populate that attribute?

-Matt

--- antlrlist <antlrlist@yahoo.com> wrote:
> 
> 
> Terrence,
> 
> I've had this problem for a little while: filenames
> are usually
> ignored by default in antlr. CommonToken does not
> take it in account, 
> and what's worse antlr.CharScanner.makeToken() does
> not fill it.
> 
> Could you please explain this? Is it a matter of
> efficiency?
> 
> According to this link:
> 
>
http://java.sun.com/docs/books/tutorial/java/data/stringsAndJavac.html
> 
> storing a String in CommonToken would add the
> overhead of managing 1
> pointer - String objects are not created unless you
> modify them.
> 
> This is shown specially in this piece of code :
> 
>   String s1 = "hello";
>   String s2 = s1;
>   System.out.println("s1 = " + s1
>                    + "; s2 = " + s2);
>   System.out.println("System.identityHashCode(s1) =
> "
>                    + System.identityHashCode(s1));
>   System.out.println("System.identityHashCode(s2) =
> "
>                    + System.identityHashCode(s2));
> 
>   s1 += " world";
>   System.out.println("\ns1 = " + s1
>                    + "; s2 = " + s2);
>   System.out.println("System.identityHashCode(s1) =
> "
>                    + System.identityHashCode(s1));
>   System.out.println("System.identityHashCode(s2) =
> "
>                    + System.identityHashCode(s2));
> 
> Here's the output:
> 
>   s1 = hello; s2 = hello
>   System.identityHashCode(s1) = 2452092
>   System.identityHashCode(s2) = 2452092
> 
>   s1 = hello world; s2 = hello
>   System.identityHashCode(s1) = 7474923
>   System.identityHashCode(s2) = 2452092
> 
> s1 points to a new address after " world" is
> appended.
> 
> Cheers,
> 
> Enrique
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
> 
> 


__________________________________
Do you Yahoo!?
Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
http://calendar.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From richard.ney at aspect.com  Fri Jun  6 14:48:06 2003
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Replacing characters in a token during lexical phase
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE07229C9@sac1exch3.aspect.com>

I am trying to figure out how to get hold of the token on a string literal
so I can change the enclosing double quotes into single quotes. The rule
looks like this"

 

// string literals

STRING_LITERAL

      : '\'' (~('"'|'\\'))* '\''

      | '\"' sl:(~('"'|'\\'))* '\"'

      {

            //_token = makeToken(_ttype);

            //_token.setText(

      }

      ;

 

Which is the basic string literal rule, any idea how to get hold of the
character without running into the WS rule

 

// White Space 

WS    :     (' '

      |     '\t'

      |     '\n'

      |     '\r')

            { _ttype = Token.SKIP; }

      ;

 

Since if I pull the inner piece of the string literal rule into a separate
token it conflicts with WS.

 

-Richard

 

----------------------------------------------------------------------------
------------------------

Richard Ney                                                    Aspect
Communications

Principal Software Engineer

< <http://www.aspect.com/> http://www.aspect.com>
Main:  408.325.2200

< <mailto:richard.ney@aspect.com> mailto:richard.ney@aspect.com>
SJ Office: 408.325.2464

 
Home Office: 916.797.9602

----------------------------------------------------------------------------
------------------------

 

The Three Laws of Infernal Dynamics:
1. An object in motion will always be headed in the wrong direction.
2. An object at rest will always be in the wrong place.
3. The energy required to change either of these states will always be more
than you wish to expend, but never so much as to make the task appear
prospectively impossible.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030606/846db5d9/attachment.html
From c1test at yahoo.com  Fri Jun  6 14:58:43 2003
From: c1test at yahoo.com (Howard Lin)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Re: Fixed Length Tokens
In-Reply-To: <bb2rij+u1j4@eGroups.com>
Message-ID: <bbr2qj+m82v@eGroups.com>

Keep in mind that I am a newbie. ;) I think the trick is that if you 
mark something "protected", then lexer won't automatically return it 
as a leave/token.  So, make some public rules 
FIRSTNAME/LASTNAME/ADDRESS...etc, which calls your own private rule 
to consume the char stream up to specified length.  You might have to 
handle whitespaces on your own though...  Heh, I don't know of an 
easy way to specify a length in expression though, so see silly 
solution below.  Another way might be to use the getColumn() in your 
rule (search for getColumn on page 
http://www.antlr.org/doc/lexer.html)  Another idea may be put the 
entire line into the text field of your ID token, build a tree 
walker, and reconstruct the tree with the new nodes.

Good luck,
Howard

protected
DUMMY_CHAR
: ( 'a'..'z' | 'A'..'Z' | '0'..'9' );

// 3 char for bandwidth sake
FIRSTNAME
: t1:DUMMY_CHAR t2:DUMMY_CHAR t3:DUMMY_CHAR
{
  $setText( t1.getText() + t2.getText() + t3.getText() );
}
;

// 3 char for bandwidth sake
LASTNAME
: t1:DUMMY_CHAR t2:DUMMY_CHAR t3:DUMMY_CHAR
{
  $setText( t1.getText() + t2.getText() + t3.getText() );
}
;

RECORDLINE
: "ID" FIRSTNAME LASTNAME EOL
;

--- In antlr-interest@yahoogroups.com, "brb0522" <brb0522@y...> wrote:
> Any suggestions on how to handle a file of fixed length fields.
> Something like:
> IDfirstname   lastname    address    city   <EOL>
> 
> I'm trying to get that into a tree structure
> ID
> |--firstname
> |--lastname
> |--address
> etc...
> 
> I found an example out here that will parse CHAR by CHAR for some 
> number of characters, but it seems that each character becomes a 
leaf.
> 
> test[int N]
>    {int n=N;}
>    :
>    { n > 1 }? CHAR test[n-1]
>    |
>    { n == 0 }?
>    ;
> CHAR is defined as 'a'..'z' | 'A'..'Z' | '0'..'9'
> 
> Any help or examples on how to handle fixed length fields will be 
> greatly appreciated.
> 
> Thanks
> -Brian


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri Jun  6 15:07:24 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Replacing characters in a token during lexic
	al phase
Message-ID: <72C9789739C4214096AE945753B11EA32A5CFE@mypxmail04.bco-home.com>

See http://www.antlr.org/doc/lexer.html#Manipulating_Token_Text_and_Objects.
You could use the $append() method:

// string literals
STRING_LITERAL
      : '\'' (~('"'|'\\'))* '\''
      | '\"'! {$append("'");} sl:(~('"'|'\\'))* '\"'! {$append("'");}
      {
            //_token = makeToken(_ttype);
            //_token.setText(
      }
      ;

Monty

-----Original Message-----
From: Ney, Richard [mailto:richard.ney@aspect.com] 
Sent: Friday, June 06, 2003 2:48 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Replacing characters in a token during lexical
phase


I am trying to figure out how to get hold of the token on a string literal
so I can change the enclosing double quotes into single quotes. The rule
looks like this"

// string literals
STRING_LITERAL
      : '\'' (~('"'|'\\'))* '\''
      | '\"' sl:(~('"'|'\\'))* '\"'
      {
            //_token = makeToken(_ttype);
            //_token.setText(
      }
      ;

Which is the basic string literal rule, any idea how to get hold of the
character without running into the WS rule

// White Space 
WS    :     (' '
      |     '\t'
      |     '\n'
      |     '\r')
            { _ttype = Token.SKIP; }
      ;

Since if I pull the inner piece of the string literal rule into a separate
token it conflicts with WS.

-Richard

----------------------------------------------------------------------------
------------------------
Richard Ney                                                    Aspect
Communications
Principal Software Engineer
<http://www.aspect.com>                               Main:  408.325.2200
<mailto:richard.ney@aspect.com>            SJ Office: 408.325.2464
 
Home Office: 916.797.9602
----------------------------------------------------------------------------
------------------------

The Three Laws of Infernal Dynamics:
1. An object in motion will always be headed in the wrong direction.
2. An object at rest will always be in the wrong place.
3. The energy required to change either of these states will always be more
than you wish to expend, but never so much as to make the task appear
prospectively impossible.


Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rideyour_face2 at yahoo.com  Fri Jun  6 16:40:06 2003
From: rideyour_face2 at yahoo.com (rideyour_face2)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Should I buy a vibrator for myself?
Message-ID: <bbr8om+ceap@eGroups.com>

I am considering buying one since I can not meet a man.
At least one that can go long enough for me to cum..lol
If you have any advice on a good one to buy or if you think YOU can satisfy me, you can meet me here
http://www.altsexfinder.com/landing.asp?afl=FYHO
If you ever want to chat sometime Yahoo IM me at honey_nips2003


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pamlookalike28 at yahoo.com  Mon Jun  9 06:57:46 2003
From: pamlookalike28 at yahoo.com (pamlookalike28)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Biggest orgy known to mankind
Message-ID: <bc23oq+d2kn@eGroups.com>

Alright now who wants to be apart of the biggest orgy in history. We'll a few members from our million want to organize this with other members from our site to have a huge orgy. With over a million adults looking for no-strings attached sex, your bound to get into something this big! Take the free trial and GET INVOLVED!

http://www.nakedfriendfinder.com/landing.asp?afl=MYHO


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From antlrlist at yahoo.com  Mon Jun  9 07:30:09 2003
From: antlrlist at yahoo.com (antlrlist)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Re: Token.filename being ignored - solutions
In-Reply-To: <20030606190313.70833.qmail@web20418.mail.yahoo.com>
Message-ID: <bc25lh+uun7@eGroups.com>


Anyway the CharScanner should fill the filename information in 
antlr.CharScanner.makeToken, should't it? If not, how do I add lex 
info to my Tokens?

Enrique.

--- In antlr-interest@yahoogroups.com, Matt Benson <gudnabrsam@y...> 
wrote:
> Since tokens are an open interface it is quite
> possible that a token would not come from a file at
> all.  If you need this why don't you subclass token to
> have a filename and have your TokenStream
> implementation then populate that attribute?
> 
> -Matt
> 
> --- antlrlist <antlrlist@y...> wrote:
> > 
> > 
> > Terrence,
> > 
> > I've had this problem for a little while: filenames
> > are usually 
> > ignored by default in antlr. CommonToken does not
> > take it in account, 
> > and what's worse antlr.CharScanner.makeToken() does
> > not fill it.
> > 
> > Could you please explain this? Is it a matter of
> > efficiency?
> > 
> > According to this link:
> > 
> >
> 
http://java.sun.com/docs/books/tutorial/java/data/stringsAndJavac.html
> > 
> > storing a String in CommonToken would add the
> > overhead of managing 1 
> > pointer - String objects are not created unless you
> > modify them.
> > 
> > This is shown specially in this piece of code :
> > 
> >   String s1 = "hello";
> >   String s2 = s1;
> >   System.out.println("s1 = " + s1
> >                    + "; s2 = " + s2);
> >   System.out.println("System.identityHashCode(s1) =
> > "
> >                    + System.identityHashCode(s1));
> >   System.out.println("System.identityHashCode(s2) =
> > "
> >                    + System.identityHashCode(s2));
> > 
> >   s1 += " world";
> >   System.out.println("\ns1 = " + s1
> >                    + "; s2 = " + s2);
> >   System.out.println("System.identityHashCode(s1) =
> > "
> >                    + System.identityHashCode(s1));
> >   System.out.println("System.identityHashCode(s2) =
> > "
> >                    + System.identityHashCode(s2));
> > 
> > Here's the output: 
> > 
> >   s1 = hello; s2 = hello
> >   System.identityHashCode(s1) = 2452092
> >   System.identityHashCode(s2) = 2452092
> > 
> >   s1 = hello world; s2 = hello
> >   System.identityHashCode(s1) = 7474923
> >   System.identityHashCode(s2) = 2452092
> > 
> > s1 points to a new address after " world" is
> > appended. 
> > 
> > Cheers,
> > 
> > Enrique
> > 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
> 
> __________________________________
> Do you Yahoo!?
> Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
> http://calendar.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon Jun  9 07:53:59 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Re: Token.filename being ignored - solutions
Message-ID: <72C9789739C4214096AE945753B11EA32A5D01@mypxmail04.bco-home.com>

Override makeToken().

Monty

-----Original Message-----
From: antlrlist [mailto:antlrlist@yahoo.com] 
Sent: Monday, June 09, 2003 7:30 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Token.filename being ignored - solutions



Anyway the CharScanner should fill the filename information in 
antlr.CharScanner.makeToken, should't it? If not, how do I add lex 
info to my Tokens?

Enrique.

--- In antlr-interest@yahoogroups.com, Matt Benson <gudnabrsam@y...> 
wrote:
> Since tokens are an open interface it is quite
> possible that a token would not come from a file at
> all.  If you need this why don't you subclass token to
> have a filename and have your TokenStream
> implementation then populate that attribute?
> 
> -Matt
> 
> --- antlrlist <antlrlist@y...> wrote:
> > 
> > 
> > Terrence,
> > 
> > I've had this problem for a little while: filenames
> > are usually
> > ignored by default in antlr. CommonToken does not
> > take it in account, 
> > and what's worse antlr.CharScanner.makeToken() does
> > not fill it.
> > 
> > Could you please explain this? Is it a matter of efficiency?
> > 
> > According to this link:
> > 
> >
> 
http://java.sun.com/docs/books/tutorial/java/data/stringsAndJavac.html
> > 
> > storing a String in CommonToken would add the
> > overhead of managing 1
> > pointer - String objects are not created unless you
> > modify them.
> > 
> > This is shown specially in this piece of code :
> > 
> >   String s1 = "hello";
> >   String s2 = s1;
> >   System.out.println("s1 = " + s1
> >                    + "; s2 = " + s2);
> >   System.out.println("System.identityHashCode(s1) =
> > "
> >                    + System.identityHashCode(s1));
> >   System.out.println("System.identityHashCode(s2) =
> > "
> >                    + System.identityHashCode(s2));
> > 
> >   s1 += " world";
> >   System.out.println("\ns1 = " + s1
> >                    + "; s2 = " + s2);
> >   System.out.println("System.identityHashCode(s1) =
> > "
> >                    + System.identityHashCode(s1));
> >   System.out.println("System.identityHashCode(s2) =
> > "
> >                    + System.identityHashCode(s2));
> > 
> > Here's the output:
> > 
> >   s1 = hello; s2 = hello
> >   System.identityHashCode(s1) = 2452092
> >   System.identityHashCode(s2) = 2452092
> > 
> >   s1 = hello world; s2 = hello
> >   System.identityHashCode(s1) = 7474923
> >   System.identityHashCode(s2) = 2452092
> > 
> > s1 points to a new address after " world" is
> > appended.
> > 
> > Cheers,
> > 
> > Enrique
> > 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/
> > 
> > 
> 
> 
> __________________________________
> Do you Yahoo!?
> Yahoo! Calendar - Free online calendar with sync to Outlook(TM). 
> http://calendar.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From monaabs at yahoo.com  Mon Jun  9 12:34:30 2003
From: monaabs at yahoo.com (monaabs)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] 2.7.2 query
Message-ID: <bc2ng6+mvgf@eGroups.com>

Greetings!!!

I have a query

1)setTokenNames() is removed in 2.7.2 what function is to be used to 
set the token names. My application is crashing cause i have 
commented out the settokenNames() .
SQL_Parser::SQL_Parser(ANTLR_USE_NAMESPACE(antlr)TokenBuffer& 
tokenBuf, int k)
: ANTLR_USE_NAMESPACE(antlr)LLkParser(tokenBuf,k)
{
  //setTokenNames(_tokenNames);
}

Any inputs greatly appreciated.
Mona


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From antlrlist at yahoo.com  Mon Jun  9 14:32:52 2003
From: antlrlist at yahoo.com (antlrlist)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Re: Token.filename being ignored - solutions
In-Reply-To: <72C9789739C4214096AE945753B11EA32A5D01@mypxmail04.bco-home.com>
Message-ID: <bc2ue4+if09@eGroups.com>


I already tried that :)

The problem is that makeToken() is protected in antlr.CharScanner, so 
no one can override it on the Lexer. I finally edited makeToken and 
added the filename information to the new Token (it is very easy).

I tend to think that this is a bug; even if CommonToken does not 
provide a "real" implementation setFilename and getFilename, the 
CharScanner should call setFilename on the new token; this way using 
a subclass of Token is very easy. Otherwise one would have to 
manually call _token.setFilename(...) on every Lexer rule ...

What does the community think about this?

Thanks for the feedbak, Monty!

Enrique

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Override makeToken().
> 
> Monty
> 
> -----Original Message-----
> From: antlrlist [mailto:antlrlist@y...] 
> Sent: Monday, June 09, 2003 7:30 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: Token.filename being ignored - 
solutions
> 
> 
> 
> Anyway the CharScanner should fill the filename information in 
> antlr.CharScanner.makeToken, should't it? If not, how do I add lex 
> info to my Tokens?
> 
> Enrique.
> 
> --- In antlr-interest@yahoogroups.com, Matt Benson 
<gudnabrsam@y...> 
> wrote:
> > Since tokens are an open interface it is quite
> > possible that a token would not come from a file at
> > all.  If you need this why don't you subclass token to
> > have a filename and have your TokenStream
> > implementation then populate that attribute?
> > 
> > -Matt
> > 
> > --- antlrlist <antlrlist@y...> wrote:
> > > 
> > > 
> > > Terrence,
> > > 
> > > I've had this problem for a little while: filenames
> > > are usually
> > > ignored by default in antlr. CommonToken does not
> > > take it in account, 
> > > and what's worse antlr.CharScanner.makeToken() does
> > > not fill it.
> > > 
> > > Could you please explain this? Is it a matter of efficiency?
> > > 
> > > According to this link:
> > > 
> > >
> > 
> 
http://java.sun.com/docs/books/tutorial/java/data/stringsAndJavac.html
> > > 
> > > storing a String in CommonToken would add the
> > > overhead of managing 1
> > > pointer - String objects are not created unless you
> > > modify them.
> > > 
> > > This is shown specially in this piece of code :
> > > 
> > >   String s1 = "hello";
> > >   String s2 = s1;
> > >   System.out.println("s1 = " + s1
> > >                    + "; s2 = " + s2);
> > >   System.out.println("System.identityHashCode(s1) =
> > > "
> > >                    + System.identityHashCode(s1));
> > >   System.out.println("System.identityHashCode(s2) =
> > > "
> > >                    + System.identityHashCode(s2));
> > > 
> > >   s1 += " world";
> > >   System.out.println("\ns1 = " + s1
> > >                    + "; s2 = " + s2);
> > >   System.out.println("System.identityHashCode(s1) =
> > > "
> > >                    + System.identityHashCode(s1));
> > >   System.out.println("System.identityHashCode(s2) =
> > > "
> > >                    + System.identityHashCode(s2));
> > > 
> > > Here's the output:
> > > 
> > >   s1 = hello; s2 = hello
> > >   System.identityHashCode(s1) = 2452092
> > >   System.identityHashCode(s2) = 2452092
> > > 
> > >   s1 = hello world; s2 = hello
> > >   System.identityHashCode(s1) = 7474923
> > >   System.identityHashCode(s2) = 2452092
> > > 
> > > s1 points to a new address after " world" is
> > > appended.
> > > 
> > > Cheers,
> > > 
> > > Enrique
> > > 
> > > 
> > > 
> > >  
> > > 
> > > Your use of Yahoo! Groups is subject to 
> > > http://docs.yahoo.com/info/terms/
> > > 
> > > 
> > 
> > 
> > __________________________________
> > Do you Yahoo!?
> > Yahoo! Calendar - Free online calendar with sync to Outlook(TM). 
> > http://calendar.yahoo.com
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon Jun  9 14:37:04 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Re: Token.filename being ignored - solutions
Message-ID: <72C9789739C4214096AE945753B11EA32A5D15@mypxmail04.bco-home.com>

See the gcc code for the lexer.  I override makeToken() just fine.  You do
it by declaring that method in the generated lexer (in your .g file).  It's
a subclass of antlr.CharScanner, so it's ok to override it.

http://www.codetransform.com/gcc.html

Monty

-----Original Message-----
From: antlrlist [mailto:antlrlist@yahoo.com] 
Sent: Monday, June 09, 2003 2:33 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Token.filename being ignored - solutions



I already tried that :)

The problem is that makeToken() is protected in antlr.CharScanner, so 
no one can override it on the Lexer. I finally edited makeToken and 
added the filename information to the new Token (it is very easy).

I tend to think that this is a bug; even if CommonToken does not 
provide a "real" implementation setFilename and getFilename, the 
CharScanner should call setFilename on the new token; this way using 
a subclass of Token is very easy. Otherwise one would have to 
manually call _token.setFilename(...) on every Lexer rule ...

What does the community think about this?

Thanks for the feedbak, Monty!

Enrique

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Override makeToken().
> 
> Monty
> 
> -----Original Message-----
> From: antlrlist [mailto:antlrlist@y...]
> Sent: Monday, June 09, 2003 7:30 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: Token.filename being ignored - 
solutions
> 
> 
> 
> Anyway the CharScanner should fill the filename information in
> antlr.CharScanner.makeToken, should't it? If not, how do I add lex 
> info to my Tokens?
> 
> Enrique.
> 
> --- In antlr-interest@yahoogroups.com, Matt Benson
<gudnabrsam@y...> 
> wrote:
> > Since tokens are an open interface it is quite
> > possible that a token would not come from a file at
> > all.  If you need this why don't you subclass token to
> > have a filename and have your TokenStream
> > implementation then populate that attribute?
> > 
> > -Matt
> > 
> > --- antlrlist <antlrlist@y...> wrote:
> > > 
> > > 
> > > Terrence,
> > > 
> > > I've had this problem for a little while: filenames
> > > are usually
> > > ignored by default in antlr. CommonToken does not
> > > take it in account,
> > > and what's worse antlr.CharScanner.makeToken() does
> > > not fill it.
> > > 
> > > Could you please explain this? Is it a matter of efficiency?
> > > 
> > > According to this link:
> > > 
> > >
> > 
> 
http://java.sun.com/docs/books/tutorial/java/data/stringsAndJavac.html
> > > 
> > > storing a String in CommonToken would add the
> > > overhead of managing 1
> > > pointer - String objects are not created unless you modify them.
> > > 
> > > This is shown specially in this piece of code :
> > > 
> > >   String s1 = "hello";
> > >   String s2 = s1;
> > >   System.out.println("s1 = " + s1
> > >                    + "; s2 = " + s2);
> > >   System.out.println("System.identityHashCode(s1) =
> > > "
> > >                    + System.identityHashCode(s1));
> > >   System.out.println("System.identityHashCode(s2) =
> > > "
> > >                    + System.identityHashCode(s2));
> > > 
> > >   s1 += " world";
> > >   System.out.println("\ns1 = " + s1
> > >                    + "; s2 = " + s2);
> > >   System.out.println("System.identityHashCode(s1) =
> > > "
> > >                    + System.identityHashCode(s1));
> > >   System.out.println("System.identityHashCode(s2) =
> > > "
> > >                    + System.identityHashCode(s2));
> > > 
> > > Here's the output:
> > > 
> > >   s1 = hello; s2 = hello
> > >   System.identityHashCode(s1) = 2452092
> > >   System.identityHashCode(s2) = 2452092
> > > 
> > >   s1 = hello world; s2 = hello
> > >   System.identityHashCode(s1) = 7474923
> > >   System.identityHashCode(s2) = 2452092
> > > 
> > > s1 points to a new address after " world" is
> > > appended.
> > > 
> > > Cheers,
> > > 
> > > Enrique
> > > 
> > > 
> > > 
> > >  
> > > 
> > > Your use of Yahoo! Groups is subject to
> > > http://docs.yahoo.com/info/terms/
> > > 
> > > 
> > 
> > 
> > __________________________________
> > Do you Yahoo!?
> > Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
> > http://calendar.yahoo.com
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pamlookalike28 at yahoo.com  Mon Jun  9 23:18:14 2003
From: pamlookalike28 at yahoo.com (pamlookalike28)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] funny cartoon games
Message-ID: <bc3t76+cnul@eGroups.com>

this is so funny.
you can make these cartoon people do whatever.
its free to try!check it out

http://www.nakedfriendfinder.com/landing.asp?afl=MYHO


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From v_vivekg at yahoo.com  Tue Jun 10 00:20:08 2003
From: v_vivekg at yahoo.com (v_vivekg)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] How to Resolve these problems
Message-ID: <bc40r8+hj1u@eGroups.com>

Hi,

I have two problems which need to be resolved.

1) There is error reported if an identifier(upper or lower case)
matches with a keyword e.g. 

symbol returns [String s]
{s="";}
: (up:UPPER { s = up.getText();}
| lid:LOWER { s = lid.getText();})
;

If this rule matches UPPER or LOWER with a keyword then there is an
error 'unexpected Token '.

2) Not everything is consumed by inverting a rule, e.g.

| (UPPER "MACRO" ASSIGN_OP BEGIN_KW (~(WS))* END_KW)=> UPPER "MACRO"
ASSIGN_OP BEGIN_KW (~(WS))* END_KW

WS is white space skipping ' ' and new lines.The above rule fails when
a double quotes followed by some character is encountered(eg at "{" it
says expecting '"' found '{'), I think it problem with a character set.


Kindly help to resolve these problems.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From caronfranck at yahoo.fr  Tue Jun 10 01:52:39 2003
From: caronfranck at yahoo.fr (franck_antibes_fr)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] (unknown)
Message-ID: <bc468n+4vo2@eGroups.com>

Hi all.




I have a problem with the lexer : 




I have several lexer rules to detect some tokens. that's OK


but I want to create a rules for any token that do not match 


the previous rules. In PCCTS there was a "precedence" in lexer rules 


so that I could have a rule (.)  at the end of all the rule and 


if none of the previous one matched this one will. 


I tryed to use the filter=OTHERTOKEN option (OTHERTOKEN is a private 
rule) in the antlr parser but this prevent the lexer to throw 
exception if the char do not match any rules and match OTHERTOKEN but 
do not create token in the token stream






Is there a way to handle this without writing an long complex rule for 
OTHERTOKEN?






TIA,


Franck




 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From j_scandaliaris at yahoo.es  Tue Jun 10 04:15:06 2003
From: j_scandaliaris at yahoo.es (j_scandaliaris@yahoo.es)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Dilemma
Message-ID: <000001c32f41$8cba5fb0$e5315393@GAUDI>

Hi all,
	I have an antlr recognizer already built. Now I am adding actions to
produce the output, which is the generation of a tree (not an AST, it is a
custom tree-structure representing the hierarchy of the source code). I
decided to build the tree manually, mostly because I don't have control over
it, only access to the methods for creating it. From the input source code
the important thing is to recognize some key structures which are the inputs
to the tree construction methods, mainly names, numbers and portions of the
source code (in the form of strings).
	
	The dilemma I face is to find the simplest (performance not
critical) way to do this (the grammar has already some 2000 lines and over
200 rules). The basic problems I face are that the grammar decomposes a rule
(for which I have some tree construction method) into several levels of
calls to other sub rules. Each sub rule will match some text (a name, a list
of names, or more complex structures) and then I have to return this info
back to the main rule in some way. This is the key point. I have devised so
far several ways of doing this (in each case with some limitations):
	
	1. Use rule return values. -> Cumbersome when the sub rule is n
levels below. One possible return value; when in need to return multiple
things they have to be grouped; manually done all the way
	2. Use AST= true and take advantage of nodes' text as a sort of
antlr-managed string-type return value. -> Limited to strings, still a bit
cumbersome when sub rule is deep down in the call hierarchy, adds a lot of
overhead.
	3. Create some data members in the parser class or some automatic
objects within the class' rules, and communicate through them. -> Difficult
to follow, I think it might be prone to hide bugs.
	
	So far my ideas, right now I might be going for a combination of 2
and 3, but I am looking forward to learning from other people's experience
and knowledge. Any help is appreciated,

Regards,

Jorge


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Matthew.Ford at forward.com.au  Tue Jun 10 05:15:19 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] (unknown)
References: <bc468n+4vo2@eGroups.com>
Message-ID: <001b01c32f49$f58be510$0200a8c0@NOTEBOOK>

Have a look at the linkChecker example in the 2.7.2 distribution.
It has a catch all rule using filter.
matthew
----- Original Message -----
From: "franck_antibes_fr" <caronfranck@yahoo.fr>
To: <antlr-interest@yahoogroups.com>
Sent: Tuesday, June 10, 2003 6:52 PM
Subject: [antlr-interest] (unknown)


> Hi all.
>
>
>
>
> I have a problem with the lexer :
>
>
>
>
> I have several lexer rules to detect some tokens. that's OK
>
>
> but I want to create a rules for any token that do not match
>
>
> the previous rules. In PCCTS there was a "precedence" in lexer rules
>
>
> so that I could have a rule (.)  at the end of all the rule and
>
>
> if none of the previous one matched this one will.
>
>
> I tryed to use the filter=OTHERTOKEN option (OTHERTOKEN is a private
> rule) in the antlr parser but this prevent the lexer to throw
> exception if the char do not match any rules and match OTHERTOKEN but
> do not create token in the token stream
>
>
>
>
>
>
> Is there a way to handle this without writing an long complex rule for
> OTHERTOKEN?
>
>
>
>
>
>
> TIA,
>
>
> Franck
>
>
>
>
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Tue Jun 10 08:09:05 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] XML parsing
Message-ID: <20030610150905.84885.qmail@web20415.mail.yahoo.com>

I am involved with a project of which one of the most
daunting components is to take a large XML document
and insert its contents in a relational database.  The
structure of the document allows for repetitions of
many of its elements, and may include the same types
of elements with different meanings based on context. 
I was trying to decide whether something like XSLT
might help with this problem, when I was struck by the
idea that a recursive-descent parser might be the
thing to use.  This way we could specify structure by
use of rules, and Antlr's use of parameters and return
values could allow us to specify a contextual
interpretation to an element, and receive a value by
which to associate it with a parent relational
database record.  Does this sound like a good
approach?  Can anyone offer a better alternative?

TIA,
Matt

__________________________________
Do you Yahoo!?
Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
http://calendar.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue Jun 10 08:13:25 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] How to Resolve these problems
Message-ID: <72C9789739C4214096AE945753B11EA32A5D1B@mypxmail04.bco-home.com>

You don't have enough information here for us to help you.  Sample input and
all the rules which are used would be helpful.

Also try running antlr.Tool with -traceParser and -traceLexer to get a
better idea of what is going on.

Monty

-----Original Message-----
From: v_vivekg [mailto:v_vivekg@yahoo.com] 
Sent: Tuesday, June 10, 2003 12:20 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] How to Resolve these problems


Hi,

I have two problems which need to be resolved.

1) There is error reported if an identifier(upper or lower case) matches
with a keyword e.g. 

symbol returns [String s]
{s="";}
: (up:UPPER { s = up.getText();}
| lid:LOWER { s = lid.getText();})
;

If this rule matches UPPER or LOWER with a keyword then there is an error
'unexpected Token '.

2) Not everything is consumed by inverting a rule, e.g.

| (UPPER "MACRO" ASSIGN_OP BEGIN_KW (~(WS))* END_KW)=> UPPER "MACRO"
ASSIGN_OP BEGIN_KW (~(WS))* END_KW

WS is white space skipping ' ' and new lines.The above rule fails when a
double quotes followed by some character is encountered(eg at "{" it says
expecting '"' found '{'), I think it problem with a character set.


Kindly help to resolve these problems.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From andrew at adersoftware.com  Tue Jun 10 08:16:44 2003
From: andrew at adersoftware.com (Andrew Deren)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] XML parsing
In-Reply-To: <20030610150905.84885.qmail@web20415.mail.yahoo.com>
Message-ID: <200306101015634.SM01108@CS>

Antlr might be a good approach, but I think SAX or XML Pull
(http://www.xmlpull.org/) might be better solution. They have lower
overhead, and are specifically designed for handling large xml documents.
As for repetitions and parent relations, I would use Stack (or if you're
using xml pull, method calls) to keep track of where you are.
Andrew

-----Original Message-----
From: Matt Benson [mailto:gudnabrsam@yahoo.com] 
Sent: Tuesday, June 10, 2003 9:09 AM
To: Antlr List

I am involved with a project of which one of the most
daunting components is to take a large XML document
and insert its contents in a relational database.  The
structure of the document allows for repetitions of
many of its elements, and may include the same types
of elements with different meanings based on context. 
I was trying to decide whether something like XSLT
might help with this problem, when I was struck by the
idea that a recursive-descent parser might be the
thing to use.  This way we could specify structure by
use of rules, and Antlr's use of parameters and return
values could allow us to specify a contextual
interpretation to an element, and receive a value by
which to associate it with a parent relational
database record.  Does this sound like a good
approach?  Can anyone offer a better alternative?

TIA,
Matt

__________________________________
Do you Yahoo!?
Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
http://calendar.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Tue Jun 10 08:25:39 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] XML parsing
In-Reply-To: <200306101015634.SM01108@CS>
Message-ID: <20030610152539.88672.qmail@web20415.mail.yahoo.com>

So according to the xml pull suggestion, you would set
up your rules in a similar manner to how Antlr parsers
are built, with rule methods calling subrule methods,
passing along an XmlPullParser from which each rule or
subrule method can pull content?

Thanks,
Matt


--- Andrew Deren <andrew@adersoftware.com> wrote:
> Antlr might be a good approach, but I think SAX or
> XML Pull
> (http://www.xmlpull.org/) might be better solution.
> They have lower
> overhead, and are specifically designed for handling
> large xml documents.
> As for repetitions and parent relations, I would use
> Stack (or if you're
> using xml pull, method calls) to keep track of where
> you are.
> Andrew
> 
> -----Original Message-----
> From: Matt Benson [mailto:gudnabrsam@yahoo.com] 
> Sent: Tuesday, June 10, 2003 9:09 AM
> To: Antlr List
> 
> I am involved with a project of which one of the
> most
> daunting components is to take a large XML document
> and insert its contents in a relational database. 
> The
> structure of the document allows for repetitions of
> many of its elements, and may include the same types
> of elements with different meanings based on
> context. 
> I was trying to decide whether something like XSLT
> might help with this problem, when I was struck by
> the
> idea that a recursive-descent parser might be the
> thing to use.  This way we could specify structure
> by
> use of rules, and Antlr's use of parameters and
> return
> values could allow us to specify a contextual
> interpretation to an element, and receive a value by
> which to associate it with a parent relational
> database record.  Does this sound like a good
> approach?  Can anyone offer a better alternative?
> 
> TIA,
> Matt
> 
> __________________________________
> Do you Yahoo!?
> Yahoo! Calendar - Free online calendar with sync to
> Outlook(TM).
> http://calendar.yahoo.com
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
http://calendar.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue Jun 10 08:37:55 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Dilemma
Message-ID: <72C9789739C4214096AE945753B11EA32A5D1E@mypxmail04.bco-home.com>

Number 2 is probably the most powerful.  Note that you should be able to
reconstruct a whole region of text given a tree.  You aren't limited to only
putting text into AST nodes, you can put anything you want in by making your
own node subclass.  See the gcc parser for an example of this.
http://www.codetransform.com/gcc.html.  

Concrete examples would help me think this through.

Monty

-----Original Message-----
From: j_scandaliaris@yahoo.es [mailto:j_scandaliaris@yahoo.es] 
Sent: Tuesday, June 10, 2003 4:15 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Dilemma


Hi all,
	I have an antlr recognizer already built. Now I am adding actions to
produce the output, which is the generation of a tree (not an AST, it is a
custom tree-structure representing the hierarchy of the source code). I
decided to build the tree manually, mostly because I don't have control over
it, only access to the methods for creating it. From the input source code
the important thing is to recognize some key structures which are the inputs
to the tree construction methods, mainly names, numbers and portions of the
source code (in the form of strings).
	
	The dilemma I face is to find the simplest (performance not
critical) way to do this (the grammar has already some 2000 lines and over
200 rules). The basic problems I face are that the grammar decomposes a rule
(for which I have some tree construction method) into several levels of
calls to other sub rules. Each sub rule will match some text (a name, a list
of names, or more complex structures) and then I have to return this info
back to the main rule in some way. This is the key point. I have devised so
far several ways of doing this (in each case with some limitations):
	
	1. Use rule return values. -> Cumbersome when the sub rule is n
levels below. One possible return value; when in need to return multiple
things they have to be grouped; manually done all the way
	2. Use AST= true and take advantage of nodes' text as a sort of
antlr-managed string-type return value. -> Limited to strings, still a bit
cumbersome when sub rule is deep down in the call hierarchy, adds a lot of
overhead.
	3. Create some data members in the parser class or some automatic
objects within the class' rules, and communicate through them. -> Difficult
to follow, I think it might be prone to hide bugs.
	
	So far my ideas, right now I might be going for a combination of 2
and 3, but I am looking forward to learning from other people's experience
and knowledge. Any help is appreciated,

Regards,

Jorge


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From andrew at adersoftware.com  Tue Jun 10 09:03:18 2003
From: andrew at adersoftware.com (Andrew Deren)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] XML parsing
In-Reply-To: <20030610152539.88672.qmail@web20415.mail.yahoo.com>
Message-ID: <200306101102952.SM01108@CS>

Yes. It works like recursive-descent parser. I actually did a project where
you would specify rules and code blocks to execute on each match and it
would generate xml pull program for your xml. I never really finished it,
but I could send you what I have so far.
Andrew

-----Original Message-----
From: Matt Benson [mailto:gudnabrsam@yahoo.com] 
Sent: Tuesday, June 10, 2003 9:26 AM
To: antlr-interest@yahoogroups.com

So according to the xml pull suggestion, you would set
up your rules in a similar manner to how Antlr parsers
are built, with rule methods calling subrule methods,
passing along an XmlPullParser from which each rule or
subrule method can pull content?

Thanks,
Matt


--- Andrew Deren <andrew@adersoftware.com> wrote:
> Antlr might be a good approach, but I think SAX or
> XML Pull
> (http://www.xmlpull.org/) might be better solution.
> They have lower
> overhead, and are specifically designed for handling
> large xml documents.
> As for repetitions and parent relations, I would use
> Stack (or if you're
> using xml pull, method calls) to keep track of where
> you are.
> Andrew
> 
> -----Original Message-----
> From: Matt Benson [mailto:gudnabrsam@yahoo.com] 
> Sent: Tuesday, June 10, 2003 9:09 AM
> To: Antlr List
> 
> I am involved with a project of which one of the
> most
> daunting components is to take a large XML document
> and insert its contents in a relational database. 
> The
> structure of the document allows for repetitions of
> many of its elements, and may include the same types
> of elements with different meanings based on
> context. 
> I was trying to decide whether something like XSLT
> might help with this problem, when I was struck by
> the
> idea that a recursive-descent parser might be the
> thing to use.  This way we could specify structure
> by
> use of rules, and Antlr's use of parameters and
> return
> values could allow us to specify a contextual
> interpretation to an element, and receive a value by
> which to associate it with a parent relational
> database record.  Does this sound like a good
> approach?  Can anyone offer a better alternative?
> 
> TIA,
> Matt
> 
> __________________________________
> Do you Yahoo!?
> Yahoo! Calendar - Free online calendar with sync to
> Outlook(TM).
> http://calendar.yahoo.com
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
http://calendar.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Tue Jun 10 09:08:56 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] XML parsing
In-Reply-To: <200306101102952.SM01108@CS>
Message-ID: <20030610160856.39523.qmail@web20413.mail.yahoo.com>

I'd appreciate that.  Wonder how close it is to being
finished?

-Matt

--- Andrew Deren <andrew@adersoftware.com> wrote:
> Yes. It works like recursive-descent parser. I
> actually did a project where
> you would specify rules and code blocks to execute
> on each match and it
> would generate xml pull program for your xml. I
> never really finished it,
> but I could send you what I have so far.
> Andrew
> 
> -----Original Message-----
> From: Matt Benson [mailto:gudnabrsam@yahoo.com] 
> Sent: Tuesday, June 10, 2003 9:26 AM
> To: antlr-interest@yahoogroups.com
> 
> So according to the xml pull suggestion, you would
> set
> up your rules in a similar manner to how Antlr
> parsers
> are built, with rule methods calling subrule
> methods,
> passing along an XmlPullParser from which each rule
> or
> subrule method can pull content?
> 
> Thanks,
> Matt
> 
> 
> --- Andrew Deren <andrew@adersoftware.com> wrote:
> > Antlr might be a good approach, but I think SAX or
> > XML Pull
> > (http://www.xmlpull.org/) might be better
> solution.
> > They have lower
> > overhead, and are specifically designed for
> handling
> > large xml documents.
> > As for repetitions and parent relations, I would
> use
> > Stack (or if you're
> > using xml pull, method calls) to keep track of
> where
> > you are.
> > Andrew
> > 
> > -----Original Message-----
> > From: Matt Benson [mailto:gudnabrsam@yahoo.com] 
> > Sent: Tuesday, June 10, 2003 9:09 AM
> > To: Antlr List
> > 
> > I am involved with a project of which one of the
> > most
> > daunting components is to take a large XML
> document
> > and insert its contents in a relational database. 
> > The
> > structure of the document allows for repetitions
> of
> > many of its elements, and may include the same
> types
> > of elements with different meanings based on
> > context. 
> > I was trying to decide whether something like XSLT
> > might help with this problem, when I was struck by
> > the
> > idea that a recursive-descent parser might be the
> > thing to use.  This way we could specify structure
> > by
> > use of rules, and Antlr's use of parameters and
> > return
> > values could allow us to specify a contextual
> > interpretation to an element, and receive a value
> by
> > which to associate it with a parent relational
> > database record.  Does this sound like a good
> > approach?  Can anyone offer a better alternative?
> > 
> > TIA,
> > Matt
> > 
> > __________________________________
> > Do you Yahoo!?
> > Yahoo! Calendar - Free online calendar with sync
> to
> > Outlook(TM).
> > http://calendar.yahoo.com
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
> 
> __________________________________
> Do you Yahoo!?
> Yahoo! Calendar - Free online calendar with sync to
> Outlook(TM).
> http://calendar.yahoo.com
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
http://calendar.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From monaabs at yahoo.com  Tue Jun 10 09:11:18 2003
From: monaabs at yahoo.com (monaabs)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] please help
Message-ID: <bc4vv6+vdlo@eGroups.com>

Hi ,
I am using 2.7.2 .. how do i set the tokens? SetTokenName() is 
removed.

When i do 
SQL_Parser::SQL_Parser(ANTLR_USE_NAMESPACE(antlr)TokenBuffer& 
tokenBuf, int k)
: ANTLR_USE_NAMESPACE(antlr)LLkParser(tokenBuf,k)
{
	tokenNames = _tokenNames;
}

I get the following error 
SQL_Parser.cpp(14) : error C2065: 'tokenNames' : undeclared identifier

In which .hpp is tokenNames defined . (i am unable to find one)

Any inputs greatly appreciated. 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From j_scandaliaris at yahoo.es  Tue Jun 10 23:35:04 2003
From: j_scandaliaris at yahoo.es (Jorge Scandaliaris)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Dilemma
In-Reply-To: <72C9789739C4214096AE945753B11EA32A5D1E@mypxmail04.bco-home.com>
Message-ID: <000401c32fe3$9c40a5f0$03001aac@zoys>

Thanks for the advice Monty. I think I'll use a custom AST then. I've
been following the examples and now have a good idea of how to do it
(C++ output).

It's about VHDL, and as I said before the idea is to represent the
source code (a hw digital design) in a hierarchical way. The tool down
the line will modify it, so some basic info must stored although we are
no making a VHDL compiler.
One of the simplest cases I came across so far (this one is not
difficult to solve):

In this case I am interested only on the source of context clause, which
has to be kept as list or vector of string (the tree has a method for
the input of the source code on a line basis). In more complex cases,
the call hierarchy would be deeper and, for example, I would have to
keep the source code as in this case but also individual items (going
back to the example I could be interested in having as well all the
IDENTIFIERs associated to logical_name_list because they would be needed
to invoke a tree construction method).
I hope this gives an idea of what I have to do. I don't post more
complex examples because it's already a pain for me to follow them in
the grammar even though I built the creature.

context_clause
	:  (context_item)*
	;

context_item
	:  library_clause
	|  use_clause
	;

library_clause
     	:  "library" logical_name_list SEMICOLON
     	;

logical_name_list 
   	:  ln1:logical_name (COMMA logical_name)*
	;

logical_name
	:  IDENTIFIER
	;

Would you still go for the custom AST option?

Jorge

> -----Mensaje original-----
> De: mzukowski@yci.com [mailto:mzukowski@yci.com]
> Enviado el: martes, 10 de junio de 2003 17:38
> Para: antlr-interest@yahoogroups.com
> Asunto: RE: [antlr-interest] Dilemma
> 
> Number 2 is probably the most powerful.  Note that you should be able
to
> reconstruct a whole region of text given a tree.  You aren't limited
to
> only
> putting text into AST nodes, you can put anything you want in by
making
> your
> own node subclass.  See the gcc parser for an example of this.
> http://www.codetransform.com/gcc.html.
> 
> Concrete examples would help me think this through.
> 
> Monty
> 
> -----Original Message-----
> From: j_scandaliaris@yahoo.es [mailto:j_scandaliaris@yahoo.es]
> Sent: Tuesday, June 10, 2003 4:15 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Dilemma
> 
> 
> Hi all,
> 	I have an antlr recognizer already built. Now I am adding
actions to
> produce the output, which is the generation of a tree (not an AST, it
is a
> custom tree-structure representing the hierarchy of the source code).
I
> decided to build the tree manually, mostly because I don't have
control
> over
> it, only access to the methods for creating it. From the input source
code
> the important thing is to recognize some key structures which are the
> inputs
> to the tree construction methods, mainly names, numbers and portions
of
> the
> source code (in the form of strings).
> 
> 	The dilemma I face is to find the simplest (performance not
> critical) way to do this (the grammar has already some 2000 lines and
over
> 200 rules). The basic problems I face are that the grammar decomposes
a
> rule
> (for which I have some tree construction method) into several levels
of
> calls to other sub rules. Each sub rule will match some text (a name,
a
> list
> of names, or more complex structures) and then I have to return this
info
> back to the main rule in some way. This is the key point. I have
devised
> so
> far several ways of doing this (in each case with some limitations):
> 
> 	1. Use rule return values. -> Cumbersome when the sub rule is n
> levels below. One possible return value; when in need to return
multiple
> things they have to be grouped; manually done all the way
> 	2. Use AST= true and take advantage of nodes' text as a sort of
> antlr-managed string-type return value. -> Limited to strings, still a
bit
> cumbersome when sub rule is deep down in the call hierarchy, adds a
lot of
> overhead.
> 	3. Create some data members in the parser class or some
automatic
> objects within the class' rules, and communicate through them. ->
> Difficult
> to follow, I think it might be prone to hide bugs.
> 
> 	So far my ideas, right now I might be going for a combination of
2
> and 3, but I am looking forward to learning from other people's
experience
> and knowledge. Any help is appreciated,
> 
> Regards,
> 
> Jorge
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From hrvoje.nezic at envox-lab.hr  Wed Jun 11 02:11:39 2003
From: hrvoje.nezic at envox-lab.hr (Hrvoje Nezic)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Why ANTLR doesn't check existence of lexical symbols?
Message-ID: <002201c32ff9$79f6b780$1301a8c0@envox.local.hr>

Hi,

If some lexical symbol is referenced in parser grammar, 
but is not actually defined in lexer, ANTLR doesn't
generate error or warning messages, so this can be detected
only at runtime on parser testing.
I find it very inconvenient, because you have to check 
existence of token symbols manually.
Is there any reason why ANTLR behaves like this, and 
is there any workaround?

Regards,
Hrvoje Nezic



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Wed Jun 11 05:27:31 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Re: XML parsing
In-Reply-To: <20030610150905.84885.qmail@web20415.mail.yahoo.com>
Message-ID: <bc777j+r56d@eGroups.com>

I have implemented a framework of what you describe:

http://www.zeigermann.de/xpa/index.html

It allows you to feed XML SAX events into ANTLR parsers as token 
streams. Optionally, if you do not care for space, you can create an 
AST from a SAX parser and transform it using ANTLR tree parsers.

Oliver

--- In antlr-interest@yahoogroups.com, Matt Benson <gudnabrsam@y...> 
wrote:
> I am involved with a project of which one of the most
> daunting components is to take a large XML document
> and insert its contents in a relational database.  The
> structure of the document allows for repetitions of
> many of its elements, and may include the same types
> of elements with different meanings based on context. 
> I was trying to decide whether something like XSLT
> might help with this problem, when I was struck by the
> idea that a recursive-descent parser might be the
> thing to use.  This way we could specify structure by
> use of rules, and Antlr's use of parameters and return
> values could allow us to specify a contextual
> interpretation to an element, and receive a value by
> which to associate it with a parent relational
> database record.  Does this sound like a good
> approach?  Can anyone offer a better alternative?
> 
> TIA,
> Matt
> 
> __________________________________
> Do you Yahoo!?
> Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
> http://calendar.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From defordusa at yahoo.com  Wed Jun 11 05:56:23 2003
From: defordusa at yahoo.com (defordusa)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Bug when creating variable for parser (ANTLR 2.7.2)?
Message-ID: <bc78tn+ic4v@eGroups.com>

Is it a bug or by design that no variable "f1" is created in the 
parser?
I have had to create an instance member "fpInstVar" in order to 
properly
grab the contents of fp.

If I try to use "f1" I get a variable not defined error.

I am using ANTLER 2.7.2

========== grammar snippet ==========

{
   ...
   ...
   Token fpInstVar = null;    //  <== Creation of fpInstVar
   ...
   ...
}

...
...
...


fpname  :
            f1:fp      //  <=== Creation of f1 (f1 NEVER CREATED)
            (
              {
                fpInstVar= LT(1); // Contains contents of fp.
              }
              f2:TX
              (
                f3:TX
                (
                  f4:TX
                  (
                    {
                      System.out.println( f1.getText() ); // <= ERROR!
                      System.out.println( 
fpInstVar.getText() );
                      System.out.println( f2.getText() );
                      System.out.println( f3.getText() );
                      System.out.println( f4.getText() );
                    }
                  )

...
...
...


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From j_scandaliaris at yahoo.es  Wed Jun 11 06:40:19 2003
From: j_scandaliaris at yahoo.es (Jorge Scandaliaris)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Bug when creating variable for parser (ANTLR 2.7.2)?
In-Reply-To: <bc78tn+ic4v@eGroups.com>
Message-ID: <000801c3301f$0537faa0$03001aac@zoys>

Hi,
	Search the message archive for "understanding element labels", I
posted the question sometime ago and Monty answered basically this:

"A rule label will be naming a tree node, not a token.  You have two
options. One is to get the text out of the node.  The other is to have
parser_rule_reference return a token (or the token text for that
matter), in which case you will be responsible for declaring name and
assigning it as name=parser_rule_reference.

Monty"

Jorge
> -----Mensaje original-----
> De: defordusa [mailto:defordusa@yahoo.com]
> Enviado el: mi?rcoles, 11 de junio de 2003 14:56
> Para: antlr-interest@yahoogroups.com
> Asunto: [antlr-interest] Bug when creating variable for parser (ANTLR
> 2.7.2)?
> 
> Is it a bug or by design that no variable "f1" is created in the
> parser?
> I have had to create an instance member "fpInstVar" in order to
> properly
> grab the contents of fp.
> 
> If I try to use "f1" I get a variable not defined error.
> 
> I am using ANTLER 2.7.2
> 
> ========== grammar snippet ==========
> 
> {
>    ...
>    ...
>    Token fpInstVar = null;    //  <== Creation of fpInstVar
>    ...
>    ...
> }
> 
> ...
> ...
> ...
> 
> 
> fpname  :
>             f1:fp      //  <=== Creation of f1 (f1 NEVER CREATED)
>             (
>               {
>                 fpInstVar= LT(1); // Contains contents of fp.
>               }
>               f2:TX
>               (
>                 f3:TX
>                 (
>                   f4:TX
>                   (
>                     {
>                       System.out.println( f1.getText() ); // <= ERROR!
>                       System.out.println(
> fpInstVar.getText() );
>                       System.out.println( f2.getText() );
>                       System.out.println( f3.getText() );
>                       System.out.println( f4.getText() );
>                     }
>                   )
> 
> ...
> ...
> ...
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Wed Jun 11 07:09:00 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Re: XML parsing
In-Reply-To: <bc777j+r56d@eGroups.com>
Message-ID: <20030611140900.48533.qmail@web20414.mail.yahoo.com>

This does, indeed, look like what I described.  I will
be trying this out.  Thanks, Oliver!

-Matt

--- Oliver Zeigermann <oliver@zeigermann.de> wrote:
> I have implemented a framework of what you describe:
> 
> http://www.zeigermann.de/xpa/index.html
> 
> It allows you to feed XML SAX events into ANTLR
> parsers as token 
> streams. Optionally, if you do not care for space,
> you can create an 
> AST from a SAX parser and transform it using ANTLR
> tree parsers.
> 
> Oliver
> 
> --- In antlr-interest@yahoogroups.com, Matt Benson
> <gudnabrsam@y...> 
> wrote:
> > I am involved with a project of which one of the
> most
> > daunting components is to take a large XML
> document
> > and insert its contents in a relational database. 
> The
> > structure of the document allows for repetitions
> of
> > many of its elements, and may include the same
> types
> > of elements with different meanings based on
> context. 
> > I was trying to decide whether something like XSLT
> > might help with this problem, when I was struck by
> the
> > idea that a recursive-descent parser might be the
> > thing to use.  This way we could specify structure
> by
> > use of rules, and Antlr's use of parameters and
> return
> > values could allow us to specify a contextual
> > interpretation to an element, and receive a value
> by
> > which to associate it with a parent relational
> > database record.  Does this sound like a good
> > approach?  Can anyone offer a better alternative?
> > 
> > TIA,
> > Matt
> > 
> > __________________________________
> > Do you Yahoo!?
> > Yahoo! Calendar - Free online calendar with sync
> to Outlook(TM).
> > http://calendar.yahoo.com
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
http://calendar.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Wed Jun 11 07:14:35 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Re: XML parsing
In-Reply-To: <bc777j+r56d@eGroups.com>
Message-ID: <20030611141435.33026.qmail@web20416.mail.yahoo.com>

The first things I notice are that the latest version
is named like an alpha, and that the ANTLR jar is
labeled as having been patched.  Can you give a quick
run-down on the current status of XPA and the nature
of the ANTLR patching taking place?

Thanks,
Matt


--- Oliver Zeigermann <oliver@zeigermann.de> wrote:
> I have implemented a framework of what you describe:
> 
> http://www.zeigermann.de/xpa/index.html
> 
> It allows you to feed XML SAX events into ANTLR
> parsers as token 
> streams. Optionally, if you do not care for space,
> you can create an 
> AST from a SAX parser and transform it using ANTLR
> tree parsers.
> 
> Oliver
> 
> --- In antlr-interest@yahoogroups.com, Matt Benson
> <gudnabrsam@y...> 
> wrote:
> > I am involved with a project of which one of the
> most
> > daunting components is to take a large XML
> document
> > and insert its contents in a relational database. 
> The
> > structure of the document allows for repetitions
> of
> > many of its elements, and may include the same
> types
> > of elements with different meanings based on
> context. 
> > I was trying to decide whether something like XSLT
> > might help with this problem, when I was struck by
> the
> > idea that a recursive-descent parser might be the
> > thing to use.  This way we could specify structure
> by
> > use of rules, and Antlr's use of parameters and
> return
> > values could allow us to specify a contextual
> > interpretation to an element, and receive a value
> by
> > which to associate it with a parent relational
> > database record.  Does this sound like a good
> > approach?  Can anyone offer a better alternative?
> > 
> > TIA,
> > Matt
> > 
> > __________________________________
> > Do you Yahoo!?
> > Yahoo! Calendar - Free online calendar with sync
> to Outlook(TM).
> > http://calendar.yahoo.com
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
http://calendar.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Wed Jun 11 10:18:44 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Re: XML parsing
In-Reply-To: <20030611141435.33026.qmail@web20416.mail.yahoo.com>
Message-ID: <bc7o9k+7cf4@eGroups.com>

ASTFactory had to be extended in order to allow AST creation from 
strings (no type). This is fully compatible with the original ANTLR 
code as it simply involves making "AST create(String)" public (was 
protected). You will find the new source of ASTFactory in the 
distribution. 

You will also find the file "Open-Issues.txt" in the distribution 
which summarises what is missing. For short I can tell, XPA is very 
stable and functional. I left the status to alpha to indicated 
things may still change a bit on request of users. So, this is your 
chance to make me adapt XPA to your needs ;)

Oliver

--- In antlr-interest@yahoogroups.com, Matt Benson <gudnabrsam@y...> 
wrote:
> The first things I notice are that the latest version
> is named like an alpha, and that the ANTLR jar is
> labeled as having been patched.  Can you give a quick
> run-down on the current status of XPA and the nature
> of the ANTLR patching taking place?
> 
> Thanks,
> Matt
> 
> 
> --- Oliver Zeigermann <oliver@z...> wrote:
> > I have implemented a framework of what you describe:
> > 
> > http://www.zeigermann.de/xpa/index.html
> > 
> > It allows you to feed XML SAX events into ANTLR
> > parsers as token 
> > streams. Optionally, if you do not care for space,
> > you can create an 
> > AST from a SAX parser and transform it using ANTLR
> > tree parsers.
> > 
> > Oliver
> > 
> > --- In antlr-interest@yahoogroups.com, Matt Benson
> > <gudnabrsam@y...> 
> > wrote:
> > > I am involved with a project of which one of the
> > most
> > > daunting components is to take a large XML
> > document
> > > and insert its contents in a relational database. 
> > The
> > > structure of the document allows for repetitions
> > of
> > > many of its elements, and may include the same
> > types
> > > of elements with different meanings based on
> > context. 
> > > I was trying to decide whether something like XSLT
> > > might help with this problem, when I was struck by
> > the
> > > idea that a recursive-descent parser might be the
> > > thing to use.  This way we could specify structure
> > by
> > > use of rules, and Antlr's use of parameters and
> > return
> > > values could allow us to specify a contextual
> > > interpretation to an element, and receive a value
> > by
> > > which to associate it with a parent relational
> > > database record.  Does this sound like a good
> > > approach?  Can anyone offer a better alternative?
> > > 
> > > TIA,
> > > Matt
> > > 
> > > __________________________________
> > > Do you Yahoo!?
> > > Yahoo! Calendar - Free online calendar with sync
> > to Outlook(TM).
> > > http://calendar.yahoo.com
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
> 
> __________________________________
> Do you Yahoo!?
> Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
> http://calendar.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Wed Jun 11 10:28:12 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Why ANTLR doesn't check existence of lexical symbols?
In-Reply-To: <002201c32ff9$79f6b780$1301a8c0@envox.local.hr>
Message-ID: <13CB9C4E-9C32-11D7-A825-000393BB647E@jguru.com>


On Wednesday, June 11, 2003, at 02:11  AM, Hrvoje Nezic wrote:

> Hi,
>
> If some lexical symbol is referenced in parser grammar,
> but is not actually defined in lexer, ANTLR doesn't
> generate error or warning messages, so this can be detected
> only at runtime on parser testing.
> I find it very inconvenient, because you have to check
> existence of token symbols manually.
> Is there any reason why ANTLR behaves like this, and
> is there any workaround?

The problem is that ANTLR can be hooked up to any TokenStream object.  
Further, the lexer may not be defined in the same grammar file.  ANTLR 
cannot answer this question, I guess is the answer (though not the one 
you are hoping for) ;)

Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Wed Jun 11 10:47:05 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Re: XML parsing
In-Reply-To: <bc7o9k+7cf4@eGroups.com>
Message-ID: <20030611174705.62790.qmail@web20420.mail.yahoo.com>

I am staying on the list in case any of this is of
interest to anyone else--if not, I apologize.  What I
have, Oliver, is an XML file that has been created so
that tags of similar types, that I could process in
the same way, have different names which are an
indication of context.  The names might both match a
given RE, but be different.  Can you think of any
slick way I could use the RE with XPA, or would I have
to allow for each possible value as alternatives of
the same rule (doable, but messy)?

Thanks,
Matt

--- Oliver Zeigermann <oliver@zeigermann.de> wrote:
> ASTFactory had to be extended in order to allow AST
> creation from 
> strings (no type). This is fully compatible with the
> original ANTLR 
> code as it simply involves making "AST
> create(String)" public (was 
> protected). You will find the new source of
> ASTFactory in the 
> distribution. 
> 
> You will also find the file "Open-Issues.txt" in the
> distribution 
> which summarises what is missing. For short I can
> tell, XPA is very 
> stable and functional. I left the status to alpha to
> indicated 
> things may still change a bit on request of users.
> So, this is your 
> chance to make me adapt XPA to your needs ;)
> 
> Oliver
> 
> --- In antlr-interest@yahoogroups.com, Matt Benson
> <gudnabrsam@y...> 
> wrote:
> > The first things I notice are that the latest
> version
> > is named like an alpha, and that the ANTLR jar is
> > labeled as having been patched.  Can you give a
> quick
> > run-down on the current status of XPA and the
> nature
> > of the ANTLR patching taking place?
> > 
> > Thanks,
> > Matt
> > 
> > 
> > --- Oliver Zeigermann <oliver@z...> wrote:
> > > I have implemented a framework of what you
> describe:
> > > 
> > > http://www.zeigermann.de/xpa/index.html
> > > 
> > > It allows you to feed XML SAX events into ANTLR
> > > parsers as token 
> > > streams. Optionally, if you do not care for
> space,
> > > you can create an 
> > > AST from a SAX parser and transform it using
> ANTLR
> > > tree parsers.
> > > 
> > > Oliver
> > > 
> > > --- In antlr-interest@yahoogroups.com, Matt
> Benson
> > > <gudnabrsam@y...> 
> > > wrote:
> > > > I am involved with a project of which one of
> the
> > > most
> > > > daunting components is to take a large XML
> > > document
> > > > and insert its contents in a relational
> database. 
> > > The
> > > > structure of the document allows for
> repetitions
> > > of
> > > > many of its elements, and may include the same
> > > types
> > > > of elements with different meanings based on
> > > context. 
> > > > I was trying to decide whether something like
> XSLT
> > > > might help with this problem, when I was
> struck by
> > > the
> > > > idea that a recursive-descent parser might be
> the
> > > > thing to use.  This way we could specify
> structure
> > > by
> > > > use of rules, and Antlr's use of parameters
> and
> > > return
> > > > values could allow us to specify a contextual
> > > > interpretation to an element, and receive a
> value
> > > by
> > > > which to associate it with a parent relational
> > > > database record.  Does this sound like a good
> > > > approach?  Can anyone offer a better
> alternative?
> > > > 
> > > > TIA,
> > > > Matt
> > > > 
> > > > __________________________________
> > > > Do you Yahoo!?
> > > > Yahoo! Calendar - Free online calendar with
> sync
> > > to Outlook(TM).
> > > > http://calendar.yahoo.com
> > > 
> > > 
> > >  
> > > 
> > > Your use of Yahoo! Groups is subject to
> > > http://docs.yahoo.com/info/terms/ 
> > > 
> > > 
> > 
> > 
> > __________________________________
> > Do you Yahoo!?
> > Yahoo! Calendar - Free online calendar with sync
> to Outlook(TM).
> > http://calendar.yahoo.com
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
http://calendar.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tarun at webkadai.com  Wed Jun 11 11:57:50 2003
From: tarun at webkadai.com (Tarun Ramakrishna Elankath)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] OT - Registering ANTLR in java.net
Message-ID: <1055357870.2733.13.camel@amber>

Hi all,

I am a newbie to ANTLR (and parsing) and this is my first post here.

I thought that it may interest members of this list to know that the Sun
has launched a community driven portal for hosting open-source java
projects at java.net

Maybe it would be useful to register the project (or even host it)
there. The facilities provided do seem to be rather useful.

TidBit: ANTLR's competitor JavaCC has already been hosted at java.net

Regards,
Tarun




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From antlrlist at yahoo.com  Wed Jun 11 11:59:37 2003
From: antlrlist at yahoo.com (antlrlist)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Re: Token.filename being ignored - solutions
In-Reply-To: <72C9789739C4214096AE945753B11EA32A5D15@mypxmail04.bco-home.com>
Message-ID: <bc7u6p+jn13@eGroups.com>


I feel ashamed...

I did't know one could override protected members in java, like in 
C++. I thought "protected" meant "package" in java, which is 
completely wrong...

Sometimes I'm soooo dumb -__- ...

Thanks again, Monty. You were of great help! (however, I still think 
makeToken should authomatically do the filename thing... it's up to 
the Token class to determine if it uses the information or not)

Enrique.


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> See the gcc code for the lexer.  I override makeToken() just fine.  
You do
> it by declaring that method in the generated lexer (in your .g 
file).  It's
> a subclass of antlr.CharScanner, so it's ok to override it.
> 
> http://www.codetransform.com/gcc.html
> 
> Monty
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From glindholm at yahoo.com  Wed Jun 11 13:24:31 2003
From: glindholm at yahoo.com (Greg Lindholm)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Why ANTLR doesn't check existence of lexical symbols?
In-Reply-To: <13CB9C4E-9C32-11D7-A825-000393BB647E@jguru.com>
Message-ID: <20030611202431.47911.qmail@web12401.mail.yahoo.com>

Hi Ter,

It seems to me that there are 2 case;
1) the lexer is in the same file or
2) the parser does an import of the token symbols

In either case if Antlr encounters undefined tokens in a parser and has
to generate new symbols I think you got a problem that at the very
least deserves a warning message.

Cause if the lexer doesn't know about the symbol it's never going to
create a token of that type.

Or am I missing something?


--- Terence Parr <parrt@jguru.com> wrote:
> 
> On Wednesday, June 11, 2003, at 02:11  AM, Hrvoje Nezic wrote:
> 
> > Hi,
> >
> > If some lexical symbol is referenced in parser grammar,
> > but is not actually defined in lexer, ANTLR doesn't
> > generate error or warning messages, so this can be detected
> > only at runtime on parser testing.
> > I find it very inconvenient, because you have to check
> > existence of token symbols manually.
> > Is there any reason why ANTLR behaves like this, and
> > is there any workaround?
> 
> The problem is that ANTLR can be hooked up to any TokenStream object.
>  
> Further, the lexer may not be defined in the same grammar file. 
> ANTLR 
> cannot answer this question, I guess is the answer (though not the
> one 
> you are hoping for) ;)
> 
> Terence
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Co-founder, http://www.peerscope.com link sharing, pure-n-simple
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
http://calendar.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Wed Jun 11 13:33:28 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Why ANTLR doesn't check existence of lexical
	 symbols?
Message-ID: <72C9789739C4214096AE945753B11EA32A5D33@mypxmail04.bco-home.com>

Parsers use symbols for AST node types as well.  Just because the parser
knows about a symbol doesn't mean the lexer has to generate it.

I'm having a hard time understanding how someone can mentally add a new
token to a parser rule but not put that token into a lexer.

At the very least these are trivially caught by your unit tests which
excersize your grammar rules.

Monty

-----Original Message-----
From: Greg Lindholm [mailto:glindholm@yahoo.com] 
Sent: Wednesday, June 11, 2003 1:25 PM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] Why ANTLR doesn't check existence of lexical
symbols?


Hi Ter,

It seems to me that there are 2 case;
1) the lexer is in the same file or
2) the parser does an import of the token symbols

In either case if Antlr encounters undefined tokens in a parser and has to
generate new symbols I think you got a problem that at the very least
deserves a warning message.

Cause if the lexer doesn't know about the symbol it's never going to create
a token of that type.

Or am I missing something?


--- Terence Parr <parrt@jguru.com> wrote:
> 
> On Wednesday, June 11, 2003, at 02:11  AM, Hrvoje Nezic wrote:
> 
> > Hi,
> >
> > If some lexical symbol is referenced in parser grammar,
> > but is not actually defined in lexer, ANTLR doesn't generate error 
> > or warning messages, so this can be detected only at runtime on 
> > parser testing. I find it very inconvenient, because you have to 
> > check existence of token symbols manually.
> > Is there any reason why ANTLR behaves like this, and
> > is there any workaround?
> 
> The problem is that ANTLR can be hooked up to any TokenStream object.
>  
> Further, the lexer may not be defined in the same grammar file.
> ANTLR 
> cannot answer this question, I guess is the answer (though not the
> one 
> you are hoping for) ;)
> 
> Terence
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org Co-founder, 
> http://www.peerscope.com link sharing, pure-n-simple Lecturer in Comp. 
> Sci., University of San Francisco
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
> 
> 


__________________________________
Do you Yahoo!?
Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
http://calendar.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Wed Jun 11 13:39:02 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Re: XML parsing
In-Reply-To: <20030611174705.62790.qmail@web20420.mail.yahoo.com>
Message-ID: <bc8416+cpb8@eGroups.com>

As with ANTLR every token needs to have a type which can be matched 
by the parser, there is no way to do it dynamically.
You would have to list all the alternatives. If this is your main 
problem you might consider using SAX and RE.

--- In antlr-interest@yahoogroups.com, Matt Benson <gudnabrsam@y...> 
wrote:
> I am staying on the list in case any of this is of
> interest to anyone else--if not, I apologize.  What I
> have, Oliver, is an XML file that has been created so
> that tags of similar types, that I could process in
> the same way, have different names which are an
> indication of context.  The names might both match a
> given RE, but be different.  Can you think of any
> slick way I could use the RE with XPA, or would I have
> to allow for each possible value as alternatives of
> the same rule (doable, but messy)?
> 
> Thanks,
> Matt
> 
> --- Oliver Zeigermann <oliver@z...> wrote:
> > ASTFactory had to be extended in order to allow AST
> > creation from 
> > strings (no type). This is fully compatible with the
> > original ANTLR 
> > code as it simply involves making "AST
> > create(String)" public (was 
> > protected). You will find the new source of
> > ASTFactory in the 
> > distribution. 
> > 
> > You will also find the file "Open-Issues.txt" in the
> > distribution 
> > which summarises what is missing. For short I can
> > tell, XPA is very 
> > stable and functional. I left the status to alpha to
> > indicated 
> > things may still change a bit on request of users.
> > So, this is your 
> > chance to make me adapt XPA to your needs ;)
> > 
> > Oliver
> > 
> > --- In antlr-interest@yahoogroups.com, Matt Benson
> > <gudnabrsam@y...> 
> > wrote:
> > > The first things I notice are that the latest
> > version
> > > is named like an alpha, and that the ANTLR jar is
> > > labeled as having been patched.  Can you give a
> > quick
> > > run-down on the current status of XPA and the
> > nature
> > > of the ANTLR patching taking place?
> > > 
> > > Thanks,
> > > Matt
> > > 
> > > 
> > > --- Oliver Zeigermann <oliver@z...> wrote:
> > > > I have implemented a framework of what you
> > describe:
> > > > 
> > > > http://www.zeigermann.de/xpa/index.html
> > > > 
> > > > It allows you to feed XML SAX events into ANTLR
> > > > parsers as token 
> > > > streams. Optionally, if you do not care for
> > space,
> > > > you can create an 
> > > > AST from a SAX parser and transform it using
> > ANTLR
> > > > tree parsers.
> > > > 
> > > > Oliver
> > > > 
> > > > --- In antlr-interest@yahoogroups.com, Matt
> > Benson
> > > > <gudnabrsam@y...> 
> > > > wrote:
> > > > > I am involved with a project of which one of
> > the
> > > > most
> > > > > daunting components is to take a large XML
> > > > document
> > > > > and insert its contents in a relational
> > database. 
> > > > The
> > > > > structure of the document allows for
> > repetitions
> > > > of
> > > > > many of its elements, and may include the same
> > > > types
> > > > > of elements with different meanings based on
> > > > context. 
> > > > > I was trying to decide whether something like
> > XSLT
> > > > > might help with this problem, when I was
> > struck by
> > > > the
> > > > > idea that a recursive-descent parser might be
> > the
> > > > > thing to use.  This way we could specify
> > structure
> > > > by
> > > > > use of rules, and Antlr's use of parameters
> > and
> > > > return
> > > > > values could allow us to specify a contextual
> > > > > interpretation to an element, and receive a
> > value
> > > > by
> > > > > which to associate it with a parent relational
> > > > > database record.  Does this sound like a good
> > > > > approach?  Can anyone offer a better
> > alternative?
> > > > > 
> > > > > TIA,
> > > > > Matt
> > > > > 
> > > > > __________________________________
> > > > > Do you Yahoo!?
> > > > > Yahoo! Calendar - Free online calendar with
> > sync
> > > > to Outlook(TM).
> > > > > http://calendar.yahoo.com
> > > > 
> > > > 
> > > >  
> > > > 
> > > > Your use of Yahoo! Groups is subject to
> > > > http://docs.yahoo.com/info/terms/ 
> > > > 
> > > > 
> > > 
> > > 
> > > __________________________________
> > > Do you Yahoo!?
> > > Yahoo! Calendar - Free online calendar with sync
> > to Outlook(TM).
> > > http://calendar.yahoo.com
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
> 
> __________________________________
> Do you Yahoo!?
> Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
> http://calendar.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Wed Jun 11 13:53:19 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Why ANTLR doesn't check existence of lexical symbols?
In-Reply-To: <002201c32ff9$79f6b780$1301a8c0@envox.local.hr>; from hrvoje.nezic@envox-lab.hr on Wed, Jun 11, 2003 at 11:11:39AM +0200
References: <002201c32ff9$79f6b780$1301a8c0@envox.local.hr>
Message-ID: <20030611225319.B21085@cs.utwente.nl>

On Wed, Jun 11, 2003 at 11:11:39AM +0200, Hrvoje Nezic wrote:
> If some lexical symbol is referenced in parser grammar, 
> but is not actually defined in lexer, ANTLR doesn't
> generate error or warning messages, so this can be detected
> only at runtime on parser testing.
> I find it very inconvenient, because you have to check 
> existence of token symbols manually.
> Is there any reason why ANTLR behaves like this, and 
> is there any workaround?

I'm not 100% sure atm, if this behaviour is still in antlr. I once patched
it that if you define all stuff in the tokens section that a warning is
issued if you define stuff outside it. But it could well be that this
change was vetoed somewhere. (Not able to do a quick test atm)

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
              of UCSD Pascal ever released..." --- Larry Smith


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Wed Jun 11 14:05:11 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Re: XML parsing
In-Reply-To: <bc8416+cpb8@eGroups.com>
Message-ID: <20030611210511.2289.qmail@web20418.mail.yahoo.com>

It seems there would be a couple of alternatives:

1)  Use the wildcard feature of XPA with semantic
predicates to test actual text value.

2)  Modify XPA's XMLTokenTypeManager to map the
alternatives to one generic token type.

-Matt
 
--- Oliver Zeigermann <oliver@zeigermann.de> wrote:
> As with ANTLR every token needs to have a type which
> can be matched 
> by the parser, there is no way to do it dynamically.
> You would have to list all the alternatives. If this
> is your main 
> problem you might consider using SAX and RE.
> 
> --- In antlr-interest@yahoogroups.com, Matt Benson
> <gudnabrsam@y...> 
> wrote:
> > I am staying on the list in case any of this is of
> > interest to anyone else--if not, I apologize. 
> What I
> > have, Oliver, is an XML file that has been created
> so
> > that tags of similar types, that I could process
> in
> > the same way, have different names which are an
> > indication of context.  The names might both match
> a
> > given RE, but be different.  Can you think of any
> > slick way I could use the RE with XPA, or would I
> have
> > to allow for each possible value as alternatives
> of
> > the same rule (doable, but messy)?
> > 
> > Thanks,
> > Matt
> > 
> > --- Oliver Zeigermann <oliver@z...> wrote:
> > > ASTFactory had to be extended in order to allow
> AST
> > > creation from 
> > > strings (no type). This is fully compatible with
> the
> > > original ANTLR 
> > > code as it simply involves making "AST
> > > create(String)" public (was 
> > > protected). You will find the new source of
> > > ASTFactory in the 
> > > distribution. 
> > > 
> > > You will also find the file "Open-Issues.txt" in
> the
> > > distribution 
> > > which summarises what is missing. For short I
> can
> > > tell, XPA is very 
> > > stable and functional. I left the status to
> alpha to
> > > indicated 
> > > things may still change a bit on request of
> users.
> > > So, this is your 
> > > chance to make me adapt XPA to your needs ;)
> > > 
> > > Oliver
> > > 
> > > --- In antlr-interest@yahoogroups.com, Matt
> Benson
> > > <gudnabrsam@y...> 
> > > wrote:
> > > > The first things I notice are that the latest
> > > version
> > > > is named like an alpha, and that the ANTLR jar
> is
> > > > labeled as having been patched.  Can you give
> a
> > > quick
> > > > run-down on the current status of XPA and the
> > > nature
> > > > of the ANTLR patching taking place?
> > > > 
> > > > Thanks,
> > > > Matt
> > > > 
> > > > 
> > > > --- Oliver Zeigermann <oliver@z...> wrote:
> > > > > I have implemented a framework of what you
> > > describe:
> > > > > 
> > > > > http://www.zeigermann.de/xpa/index.html
> > > > > 
> > > > > It allows you to feed XML SAX events into
> ANTLR
> > > > > parsers as token 
> > > > > streams. Optionally, if you do not care for
> > > space,
> > > > > you can create an 
> > > > > AST from a SAX parser and transform it using
> > > ANTLR
> > > > > tree parsers.
> > > > > 
> > > > > Oliver
> > > > > 
> > > > > --- In antlr-interest@yahoogroups.com, Matt
> > > Benson
> > > > > <gudnabrsam@y...> 
> > > > > wrote:
> > > > > > I am involved with a project of which one
> of
> > > the
> > > > > most
> > > > > > daunting components is to take a large XML
> > > > > document
> > > > > > and insert its contents in a relational
> > > database. 
> > > > > The
> > > > > > structure of the document allows for
> > > repetitions
> > > > > of
> > > > > > many of its elements, and may include the
> same
> > > > > types
> > > > > > of elements with different meanings based
> on
> > > > > context. 
> > > > > > I was trying to decide whether something
> like
> > > XSLT
> > > > > > might help with this problem, when I was
> > > struck by
> > > > > the
> > > > > > idea that a recursive-descent parser might
> be
> > > the
> > > > > > thing to use.  This way we could specify
> > > structure
> > > > > by
> > > > > > use of rules, and Antlr's use of
> parameters
> > > and
> > > > > return
> > > > > > values could allow us to specify a
> contextual
> > > > > > interpretation to an element, and receive
> a
> > > value
> > > > > by
> > > > > > which to associate it with a parent
> relational
> > > > > > database record.  Does this sound like a
> good
> > > > > > approach?  Can anyone offer a better
> > > alternative?
> > > > > > 
> > > > > > TIA,
> > > > > > Matt
> > > > > > 
> > > > > > __________________________________
> > > > > > Do you Yahoo!?
> > > > > > Yahoo! Calendar - Free online calendar
> with
> > > sync
> > > > > to Outlook(TM).
> > > > > > http://calendar.yahoo.com
> > > > > 
> > > > > 
> > > > >  
> > > > > 
> > > > > Your use of Yahoo! Groups is subject to
> > > > > http://docs.yahoo.com/info/terms/ 
> > > > > 
> > > > > 
> > > > 
> > > > 
> > > > __________________________________
> > > > Do you Yahoo!?
> > > > Yahoo! Calendar - Free online calendar with
> sync
> > > to Outlook(TM).
> > > > http://calendar.yahoo.com
> > > 
> > > 
> > >  
> > > 
> > > Your use of Yahoo! Groups is subject to
> > > http://docs.yahoo.com/info/terms/ 
> > > 
> > > 
> > 
> > 
> > __________________________________
> > Do you Yahoo!?
> > Yahoo! Calendar - Free online calendar with sync
> to Outlook(TM).
> > http://calendar.yahoo.com
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
http://calendar.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From glindholm at yahoo.com  Wed Jun 11 14:12:26 2003
From: glindholm at yahoo.com (Greg Lindholm)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Why ANTLR doesn't check existence of lexical  symbols?
In-Reply-To: <72C9789739C4214096AE945753B11EA32A5D33@mypxmail04.bco-home.com>
Message-ID: <20030611211226.91313.qmail@web12405.mail.yahoo.com>

--- mzukowski@yci.com wrote:
> Parsers use symbols for AST node types as well.  Just because the
> parser
> knows about a symbol doesn't mean the lexer has to generate it.
> 
I don't realize these were used for AST node types. 
But, doesn't Antlr know the difference between an AST node type and
something that it's suppose to match from a token stream?

> I'm having a hard time understanding how someone can mentally add a
> new
> token to a parser rule but not put that token into a lexer.
> 
I don't make coding mistakes on purpose. It's more a problem of typos,
forgetting and just plain mistakes.  The point is, a friendly tools
should warn you of any obvious errors that it is able to detect.

> At the very least these are trivially caught by your unit tests which
> excersize your grammar rules.
> 
IMHO I don't believe the words "trivial", "unit tests" and "grammar"
belong in the same sentence :)   Unless you mean "trival unit tests" or
"trivial grammar" :)  

Greg

> Monty
> 
> -----Original Message-----
> From: Greg Lindholm [mailto:glindholm@yahoo.com] 
> Sent: Wednesday, June 11, 2003 1:25 PM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] Why ANTLR doesn't check existence of
> lexical
> symbols?
> 
> 
> Hi Ter,
> 
> It seems to me that there are 2 case;
> 1) the lexer is in the same file or
> 2) the parser does an import of the token symbols
> 
> In either case if Antlr encounters undefined tokens in a parser and
> has to
> generate new symbols I think you got a problem that at the very least
> deserves a warning message.
> 
> Cause if the lexer doesn't know about the symbol it's never going to
> create
> a token of that type.
> 
> Or am I missing something?
> 
> 
> --- Terence Parr <parrt@jguru.com> wrote:
> > 
> > On Wednesday, June 11, 2003, at 02:11  AM, Hrvoje Nezic wrote:
> > 
> > > Hi,
> > >
> > > If some lexical symbol is referenced in parser grammar,
> > > but is not actually defined in lexer, ANTLR doesn't generate
> error 
> > > or warning messages, so this can be detected only at runtime on 
> > > parser testing. I find it very inconvenient, because you have to 
> > > check existence of token symbols manually.
> > > Is there any reason why ANTLR behaves like this, and
> > > is there any workaround?
> > 
> > The problem is that ANTLR can be hooked up to any TokenStream
> object.
> >  
> > Further, the lexer may not be defined in the same grammar file.
> > ANTLR 
> > cannot answer this question, I guess is the answer (though not the
> > one 
> > you are hoping for) ;)
> > 
> > Terence
> > --
> > Co-founder, http://www.jguru.com
> > Creator, ANTLR Parser Generator: http://www.antlr.org Co-founder, 
> > http://www.peerscope.com link sharing, pure-n-simple Lecturer in
> Comp. 
> > Sci., University of San Francisco
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/
> > 
> > 
> 
> 
> __________________________________
> Do you Yahoo!?
> Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
> http://calendar.yahoo.com
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
http://calendar.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Wed Jun 11 14:36:12 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Why ANTLR doesn't check existence of lexical
	  symbols?
Message-ID: <72C9789739C4214096AE945753B11EA32A5D36@mypxmail04.bco-home.com>

1.  ANTLR doesn't really know the difference between AST node types and
Token types, because they are just integers that either get passed from a
Token to an AST upon AST creation or set in an action that is building an
AST node.  Antlr would have to analyze the lexer and the parser action code
to figure out what was going on.  Then it would have to hope that there are
no TokenStreamFilters in between that are modifying things.  And there is a
definite limit to how smart ANTLR can be in analyzing actions because it's
not going to penetrate into method calls that return node types, for
instance.

2.  See the tests that come with the gcc grammar.  I've got like 88 of them
but most are just a few lines, the simplest C program that uses a feature.
If I add a wacky rule I definitely want a test there to prove it is working.
And GCC has some real wackiness!  A side benefit is that I can run all the
other tests to see if I broke something else.

3.  Unit tests are supposed to be as close to trivial as possible--the
simplest input that excersizes a feature.  I would run the gcc grammar on
all the gnu sources and linux kernel and stuff.  If I found an error I would
narrow it down to as simple a file as would reproduce the problem.  Then I'd
fix the rule and see the test pass.  

4.  I agree the tool could be friendlier, but this problem at least is
pretty easy to solve, no?  I mean it is pretty obvious when the wrong token
is generated, you get an "unexpected token" error.  Then you us -traceLexer
to see what's up and find out it's not going to the right rule or that the
rule doesn't exist in the lexer.  Figuring out ambiguities, on the other
hand, now that's a hard problem and would be worth spending the time to make
the tool friendlier for that.  And figuring out linear approximation
weirdness.  However, I digress.

5.  Sure, everyone makes mistakes.  The real question is how long it takes
to recover from the mistake?  People learn from their mistakes too.  Like
when I misplaced a semicolon and didn't figure it out for 4 hours (antlr
2.2.2 didn't warn about these things).  That's when I automated checking in
with every run of antlr.Tool.  Then I could get back to where I was 15
minutes ago and get on with my life.

Monty

-----Original Message-----
From: Greg Lindholm [mailto:glindholm@yahoo.com] 
Sent: Wednesday, June 11, 2003 2:12 PM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Why ANTLR doesn't check existence of lexical
symbols?


--- mzukowski@yci.com wrote:
> Parsers use symbols for AST node types as well.  Just because the 
> parser knows about a symbol doesn't mean the lexer has to generate it.
> 
I don't realize these were used for AST node types. 
But, doesn't Antlr know the difference between an AST node type and
something that it's suppose to match from a token stream?

> I'm having a hard time understanding how someone can mentally add a 
> new token to a parser rule but not put that token into a lexer.
> 
I don't make coding mistakes on purpose. It's more a problem of typos,
forgetting and just plain mistakes.  The point is, a friendly tools should
warn you of any obvious errors that it is able to detect.

> At the very least these are trivially caught by your unit tests which 
> excersize your grammar rules.
> 
IMHO I don't believe the words "trivial", "unit tests" and "grammar"
belong in the same sentence :)   Unless you mean "trival unit tests" or
"trivial grammar" :)  

Greg

> Monty
> 
> -----Original Message-----
> From: Greg Lindholm [mailto:glindholm@yahoo.com]
> Sent: Wednesday, June 11, 2003 1:25 PM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] Why ANTLR doesn't check existence of
> lexical
> symbols?
> 
> 
> Hi Ter,
> 
> It seems to me that there are 2 case;
> 1) the lexer is in the same file or
> 2) the parser does an import of the token symbols
> 
> In either case if Antlr encounters undefined tokens in a parser and 
> has to generate new symbols I think you got a problem that at the very 
> least deserves a warning message.
> 
> Cause if the lexer doesn't know about the symbol it's never going to 
> create a token of that type.
> 
> Or am I missing something?
> 
> 
> --- Terence Parr <parrt@jguru.com> wrote:
> > 
> > On Wednesday, June 11, 2003, at 02:11  AM, Hrvoje Nezic wrote:
> > 
> > > Hi,
> > >
> > > If some lexical symbol is referenced in parser grammar, but is not 
> > > actually defined in lexer, ANTLR doesn't generate
> error
> > > or warning messages, so this can be detected only at runtime on
> > > parser testing. I find it very inconvenient, because you have to 
> > > check existence of token symbols manually.
> > > Is there any reason why ANTLR behaves like this, and
> > > is there any workaround?
> > 
> > The problem is that ANTLR can be hooked up to any TokenStream
> object.
> >  
> > Further, the lexer may not be defined in the same grammar file. 
> > ANTLR cannot answer this question, I guess is the answer (though not 
> > the one
> > you are hoping for) ;)
> > 
> > Terence
> > --
> > Co-founder, http://www.jguru.com
> > Creator, ANTLR Parser Generator: http://www.antlr.org Co-founder,
> > http://www.peerscope.com link sharing, pure-n-simple Lecturer in
> Comp.
> > Sci., University of San Francisco
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/
> > 
> > 
> 
> 
> __________________________________
> Do you Yahoo!?
> Yahoo! Calendar - Free online calendar with sync to Outlook(TM). 
> http://calendar.yahoo.com
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
> 
> 


__________________________________
Do you Yahoo!?
Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
http://calendar.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From biz_morland at yahoo.com  Wed Jun 11 14:45:55 2003
From: biz_morland at yahoo.com (biz_morland)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Using multiple parsers -- newbie question
Message-ID: <bc87uj+s67r@eGroups.com>

Hi,

I've written a Java program that uses an ExpressionParser, 
ExpressionLexer, and ExpressionTreeWalker. I've put these three 
classes in a separate grammar file called expression.g and compiling 
and running these class doesn't produce any problems.

Now I've discovered an extra requirement which basically means I have 
to create 2 parsers, each only slightly different in the way they 
parse some text. 

So now I have to write two separate classes: ExpressionParser_1 and 
ExpressionParser_2. (The other classes, ExpressionLexer and 
ExpressionTreeWalker, should stay exactly the same.)

My question is, how does one implement two different parsers?

At first I thought, this is easy, I just have to create 2 different 
parser classes, each with a different name. Maybe even create 2 
different grammar files to hold each new parser (since I discovered a 
single grammar file cannot hold more than one parser class). 

So now:

"expression_1.g" contains: ExpressionParser_1, ExpressionLexer, 
ExpressionTreeWalker.
"expression_2.g" contains: ExpressionParser_2, ExpressionLexer, 
ExpressionTreeWalker.

And I just compile each grammar file before running my java program, 
which seems to generate each of the classes named above.

In the java program I have an "if" statement that switches between 
parsers, calling either ExpressionParser_1 or ExpressionParser_2.

But as usual things aren't as easy as they seem, and my program 
refuses to differentiate between one or the other parser. Which 
parser class actually is used, depends only on which grammar file I 
saved last!

Assuming nothing's wrong with the java program itself (and with the 
if conditional that should call the appropriate parser class), would 
anyone know why this isn't working? Or maybe even suggest a way to 
switch between 2 parsers in the same program?

Many thanks,
Greg






 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Wed Jun 11 14:51:31 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Using multiple parsers -- newbie question
Message-ID: <72C9789739C4214096AE945753B11EA32A5D37@mypxmail04.bco-home.com>

I'd say try to step through it with a debugger.  I don't see any obvious
clues here.

Monty

-----Original Message-----
From: biz_morland [mailto:biz_morland@yahoo.com] 
Sent: Wednesday, June 11, 2003 2:46 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Using multiple parsers -- newbie question


Hi,

I've written a Java program that uses an ExpressionParser, 
ExpressionLexer, and ExpressionTreeWalker. I've put these three 
classes in a separate grammar file called expression.g and compiling 
and running these class doesn't produce any problems.

Now I've discovered an extra requirement which basically means I have 
to create 2 parsers, each only slightly different in the way they 
parse some text. 

So now I have to write two separate classes: ExpressionParser_1 and 
ExpressionParser_2. (The other classes, ExpressionLexer and 
ExpressionTreeWalker, should stay exactly the same.)

My question is, how does one implement two different parsers?

At first I thought, this is easy, I just have to create 2 different 
parser classes, each with a different name. Maybe even create 2 
different grammar files to hold each new parser (since I discovered a 
single grammar file cannot hold more than one parser class). 

So now:

"expression_1.g" contains: ExpressionParser_1, ExpressionLexer, 
ExpressionTreeWalker.
"expression_2.g" contains: ExpressionParser_2, ExpressionLexer, 
ExpressionTreeWalker.

And I just compile each grammar file before running my java program, 
which seems to generate each of the classes named above.

In the java program I have an "if" statement that switches between 
parsers, calling either ExpressionParser_1 or ExpressionParser_2.

But as usual things aren't as easy as they seem, and my program 
refuses to differentiate between one or the other parser. Which 
parser class actually is used, depends only on which grammar file I 
saved last!

Assuming nothing's wrong with the java program itself (and with the 
if conditional that should call the appropriate parser class), would 
anyone know why this isn't working? Or maybe even suggest a way to 
switch between 2 parsers in the same program?

Many thanks,
Greg






 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rjc at trump.net.au  Wed Jun 11 19:25:47 2003
From: rjc at trump.net.au (Robert Colquhoun)
Date: Mon Dec 20 16:15:41 2004
Subject: [antlr-interest] Custom AST Types
Message-ID: <4.2.0.58.20030612120527.00b16ae0@postoffice.trump.net.au>

Hi Everyone,

Is anyone else having problems in tree walkers using custom AST types in 
conjunction with protected rules?

I get ClassCastExceptions whenever the rule tries to match nothing ie ASTNULL

ie

options{
     ASTLabelType=MyAST;
}
....
protected elsest: (#(ELSE statementblock))?

The code generated has something like:

  protected final void elsest(antlr.collections.AST _t) throws 
antlr.RecognitionException {

      MyAST elsest_AST_in = (MyAST)_t;  //<---ClassCastException here!
      .....

What appears to happen is that the elsest() rule is called passing ASTNULL 
when there is no else clause as part of a if/then/else statement and it 
trys to cast ASTNULL to MyAST type which breaks things.

To fix
	- either somehow change ASTNULL to be of MyAST type.
	- as in other parts of generated code use something like:
		MyAST elsest_AST_in = (_t == ASTNULL) ? null : (MyAST)_t;

Both require changes to antlr to solve though, otherwise i can hack my 
grammar to work around this i think.....just want to know if it is 
affecting other people at all, and thus whether i should fix antlr?

  - Robert


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Thu Jun 12 01:13:46 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Re: XML parsing
In-Reply-To: <20030611210511.2289.qmail@web20418.mail.yahoo.com>
Message-ID: <bc9cnq+2o8q@eGroups.com>

Matt!

Really good ideas! Better than mine!

Actually, using wildcards and a generic token type for it already
works with XPA and the token type manager. If XPA sees an XML element
that is not definied in the grammar, it tries to map it to the generic
token type "wildcard". To make this known to your grammar you will
have to put something like

tokens {
    "<wildcard>";
}

into it. 

>>From then on you can use "." to match any tag. Using your alternative
1 and 2 together most likely will do the job. 

As a reference have a look at the example in 

examples/treeParser/componentTransformer/ComponentTreeParser.g 

or 

examples/tokenParser/transformingComponentParser/ComponentParser.g

in the XPA distribution.

Oliver

--- In antlr-interest@yahoogroups.com, Matt Benson <gudnabrsam@y...>
wrote:
> It seems there would be a couple of alternatives:
> 
> 1)  Use the wildcard feature of XPA with semantic
> predicates to test actual text value.
> 
> 2)  Modify XPA's XMLTokenTypeManager to map the
> alternatives to one generic token type.
> 
> -Matt
>  
> --- Oliver Zeigermann <oliver@z...> wrote:
> > As with ANTLR every token needs to have a type which
> > can be matched 
> > by the parser, there is no way to do it dynamically.
> > You would have to list all the alternatives. If this
> > is your main 
> > problem you might consider using SAX and RE.
> > 
> > --- In antlr-interest@yahoogroups.com, Matt Benson
> > <gudnabrsam@y...> 
> > wrote:
> > > I am staying on the list in case any of this is of
> > > interest to anyone else--if not, I apologize. 
> > What I
> > > have, Oliver, is an XML file that has been created
> > so
> > > that tags of similar types, that I could process
> > in
> > > the same way, have different names which are an
> > > indication of context.  The names might both match
> > a
> > > given RE, but be different.  Can you think of any
> > > slick way I could use the RE with XPA, or would I
> > have
> > > to allow for each possible value as alternatives
> > of
> > > the same rule (doable, but messy)?
> > > 
> > > Thanks,
> > > Matt
> > > 
> > > --- Oliver Zeigermann <oliver@z...> wrote:
> > > > ASTFactory had to be extended in order to allow
> > AST
> > > > creation from 
> > > > strings (no type). This is fully compatible with
> > the
> > > > original ANTLR 
> > > > code as it simply involves making "AST
> > > > create(String)" public (was 
> > > > protected). You will find the new source of
> > > > ASTFactory in the 
> > > > distribution. 
> > > > 
> > > > You will also find the file "Open-Issues.txt" in
> > the
> > > > distribution 
> > > > which summarises what is missing. For short I
> > can
> > > > tell, XPA is very 
> > > > stable and functional. I left the status to
> > alpha to
> > > > indicated 
> > > > things may still change a bit on request of
> > users.
> > > > So, this is your 
> > > > chance to make me adapt XPA to your needs ;)
> > > > 
> > > > Oliver
> > > > 
> > > > --- In antlr-interest@yahoogroups.com, Matt
> > Benson
> > > > <gudnabrsam@y...> 
> > > > wrote:
> > > > > The first things I notice are that the latest
> > > > version
> > > > > is named like an alpha, and that the ANTLR jar
> > is
> > > > > labeled as having been patched.  Can you give
> > a
> > > > quick
> > > > > run-down on the current status of XPA and the
> > > > nature
> > > > > of the ANTLR patching taking place?
> > > > > 
> > > > > Thanks,
> > > > > Matt
> > > > > 
> > > > > 
> > > > > --- Oliver Zeigermann <oliver@z...> wrote:
> > > > > > I have implemented a framework of what you
> > > > describe:
> > > > > > 
> > > > > > http://www.zeigermann.de/xpa/index.html
> > > > > > 
> > > > > > It allows you to feed XML SAX events into
> > ANTLR
> > > > > > parsers as token 
> > > > > > streams. Optionally, if you do not care for
> > > > space,
> > > > > > you can create an 
> > > > > > AST from a SAX parser and transform it using
> > > > ANTLR
> > > > > > tree parsers.
> > > > > > 
> > > > > > Oliver
> > > > > > 
> > > > > > --- In antlr-interest@yahoogroups.com, Matt
> > > > Benson
> > > > > > <gudnabrsam@y...> 
> > > > > > wrote:
> > > > > > > I am involved with a project of which one
> > of
> > > > the
> > > > > > most
> > > > > > > daunting components is to take a large XML
> > > > > > document
> > > > > > > and insert its contents in a relational
> > > > database. 
> > > > > > The
> > > > > > > structure of the document allows for
> > > > repetitions
> > > > > > of
> > > > > > > many of its elements, and may include the
> > same
> > > > > > types
> > > > > > > of elements with different meanings based
> > on
> > > > > > context. 
> > > > > > > I was trying to decide whether something
> > like
> > > > XSLT
> > > > > > > might help with this problem, when I was
> > > > struck by
> > > > > > the
> > > > > > > idea that a recursive-descent parser might
> > be
> > > > the
> > > > > > > thing to use.  This way we could specify
> > > > structure
> > > > > > by
> > > > > > > use of rules, and Antlr's use of
> > parameters
> > > > and
> > > > > > return
> > > > > > > values could allow us to specify a
> > contextual
> > > > > > > interpretation to an element, and receive
> > a
> > > > value
> > > > > > by
> > > > > > > which to associate it with a parent
> > relational
> > > > > > > database record.  Does this sound like a
> > good
> > > > > > > approach?  Can anyone offer a better
> > > > alternative?
> > > > > > > 
> > > > > > > TIA,
> > > > > > > Matt
> > > > > > > 
> > > > > > > __________________________________
> > > > > > > Do you Yahoo!?
> > > > > > > Yahoo! Calendar - Free online calendar
> > with
> > > > sync
> > > > > > to Outlook(TM).
> > > > > > > http://calendar.yahoo.com
> > > > > > 
> > > > > > 
> > > > > >  
> > > > > > 
> > > > > > Your use of Yahoo! Groups is subject to
> > > > > > http://docs.yahoo.com/info/terms/ 
> > > > > > 
> > > > > > 
> > > > > 
> > > > > 
> > > > > __________________________________
> > > > > Do you Yahoo!?
> > > > > Yahoo! Calendar - Free online calendar with
> > sync
> > > > to Outlook(TM).
> > > > > http://calendar.yahoo.com
> > > > 
> > > > 
> > > >  
> > > > 
> > > > Your use of Yahoo! Groups is subject to
> > > > http://docs.yahoo.com/info/terms/ 
> > > > 
> > > > 
> > > 
> > > 
> > > __________________________________
> > > Do you Yahoo!?
> > > Yahoo! Calendar - Free online calendar with sync
> > to Outlook(TM).
> > > http://calendar.yahoo.com
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
> 
> __________________________________
> Do you Yahoo!?
> Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
> http://calendar.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From antlrlist at yahoo.com  Thu Jun 12 01:36:33 2003
From: antlrlist at yahoo.com (antlrlist)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Re: Using multiple parsers -- newbie question
In-Reply-To: <72C9789739C4214096AE945753B11EA32A5D37@mypxmail04.bco-home.com>
Message-ID: <bc9e2h+p35e@eGroups.com>


Hello Greg,

You didn't mention the difference between ExpressionParser_1 and 
ExpressionParser_2 nor how did you detected that "both analizers 
where the same".

However I see where your problem might be: you might be having 
problems with token vocabularies if ExpressionParser_1 or 
ExpressionParser_2 define tokens in the token section or if they have 
unnamed tokens (they have strings in the rules, like 
while: "while" ... ;).

There are two ways of solving this: a bad one and a good one.

The bad one consists in renaming your lexers and treeparsers, so 
you'd get
 - "expression_1.g" containing: ExpressionParser_1, 
ExpressionLexer_1, and  ExpressionTreeWalker_1.
 - "expression_2.g" contains: ExpressionParser_2, ExpressionLexer_2 
and ExpressionTreeWalker_2.

This solution won't probably match your needs, so you'll have to 
implement the "good one".
<p>
The good one consists on defining each analizer in one separated 
file, and using grammar inheritance in the parsers. So you'd get:
 - "expressionLexer.g" containing ExpressionLexer
 - "expressionParser1.g" containing ExpressionParser1
 - "expressionParser2.g" containing ExpressionParser2
 - "expressionTreeParser.g" containing ExpressionTreeParser
<p>
When you write a set of analyzers in the same file, ANTLR deals with 
vocabulary sharing authomatically. If you write them in separate 
files, you'll have to share vocabularies manually (see "Token 
vocabularies" on antlr docs).
<p>
In order to do this, you must:
 - Copy/paste each analizer's definition in each grammar file.
 - The lexer should need to export its vocabulary with the 
exportVocab option. Give the vocab a name like "lexer" 
(exportVocab=lexer;).
 - In ExpressionParser1 you shoud importVocab the Lexer's vocabulary 
(importVocab=lexer;)and exportVocab the new vocabulary 
(exportVocab=parser1;).
 - ExpressionParser2 should be defined as a derived grammar of 
ExpressionParser1. This is, instead of being "class ExpressionParser2 
extends Parser" it will be declared like "class ExpressionParser2 
extends ExpressionParser1". You'll also have to compile 
expressionParser2.g with the command line "java antlr.Tool -glib 
expressionParser1.g expressionParser2.g" (see "grammar inheritance" 
on the docs). Grammar inheritance allows you to "import" the rules of 
ExpParser1 in ExpParser2, so you only have to write the ones that 
change.
 - ExpressionParser2 should import the vocab of *ExpressionParser1* 
(importVocab=parser1;) and export its own vocab exportVocab=parser2;).
 - ExpressionTreeParser should import ExpressionParser2's vocab 
(importVocab=parser2).

Tell me if this helps you

Enrique

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> I'd say try to step through it with a debugger.  I don't see any 
obvious
> clues here.
> 
> Monty
> 
> -----Original Message-----
> From: biz_morland [mailto:biz_morland@y...] 
> Sent: Wednesday, June 11, 2003 2:46 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Using multiple parsers -- newbie question
> 
> 
> Hi,
> 
> I've written a Java program that uses an ExpressionParser, 
> ExpressionLexer, and ExpressionTreeWalker. I've put these three 
> classes in a separate grammar file called expression.g and 
compiling 
> and running these class doesn't produce any problems.
> 
> Now I've discovered an extra requirement which basically means I 
have 
> to create 2 parsers, each only slightly different in the way they 
> parse some text. 
> 
> So now I have to write two separate classes: ExpressionParser_1 and 
> ExpressionParser_2. (The other classes, ExpressionLexer and 
> ExpressionTreeWalker, should stay exactly the same.)
> 
> My question is, how does one implement two different parsers?
> 
> At first I thought, this is easy, I just have to create 2 different 
> parser classes, each with a different name. Maybe even create 2 
> different grammar files to hold each new parser (since I discovered 
a 
> single grammar file cannot hold more than one parser class). 
> 
> So now:
> 
> "expression_1.g" contains: ExpressionParser_1, ExpressionLexer, 
> ExpressionTreeWalker.
> "expression_2.g" contains: ExpressionParser_2, ExpressionLexer, 
> ExpressionTreeWalker.
> 
> And I just compile each grammar file before running my java 
program, 
> which seems to generate each of the classes named above.
> 
> In the java program I have an "if" statement that switches between 
> parsers, calling either ExpressionParser_1 or ExpressionParser_2.
> 
> But as usual things aren't as easy as they seem, and my program 
> refuses to differentiate between one or the other parser. Which 
> parser class actually is used, depends only on which grammar file I 
> saved last!
> 
> Assuming nothing's wrong with the java program itself (and with the 
> if conditional that should call the appropriate parser class), 
would 
> anyone know why this isn't working? Or maybe even suggest a way to 
> switch between 2 parsers in the same program?
> 
> Many thanks,
> Greg
> 
> 
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From antlrlist at yahoo.com  Thu Jun 12 02:03:57 2003
From: antlrlist at yahoo.com (antlrlist)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Re: Dilemma
In-Reply-To: <000401c32fe3$9c40a5f0$03001aac@zoys>
Message-ID: <bc9flt+oh4d@eGroups.com>

Hello Jorge,

I agree completely with Monty in this matter. You'll probably have to 
use your own AST implementation for this.

If you allow me, I have also a suggestion about grammar complexity. I 
think your writing style might be giving you more troubles than 
benefits. The rules you writted are equivalent to:

context_item
  :  library_clause
  |  use_clause
  ;

library_clause
  :  "library" ln1:IDENTIFIER (COMMA IDENTIFIER)* SEMICOLON
  ;

Writing rules like these two would decrease the number of rules of 
your grammar, therefore making it easy to understand, maintain and 
debug.

Is this form of writing rules suitable for your needs?

Enrique





--- In antlr-interest@yahoogroups.com, "Jorge Scandaliaris" 
<j_scandaliaris@y...> wrote:
> Thanks for the advice Monty. I think I'll use a custom AST then. 
I've
> been following the examples and now have a good idea of how to do it
> (C++ output).
> 
> It's about VHDL, and as I said before the idea is to represent the
> source code (a hw digital design) in a hierarchical way. The tool 
down
> the line will modify it, so some basic info must stored although we 
are
> no making a VHDL compiler.
> One of the simplest cases I came across so far (this one is not
> difficult to solve):
> 
> In this case I am interested only on the source of context clause, 
which
> has to be kept as list or vector of string (the tree has a method 
for
> the input of the source code on a line basis). In more complex 
cases,
> the call hierarchy would be deeper and, for example, I would have to
> keep the source code as in this case but also individual items 
(going
> back to the example I could be interested in having as well all the
> IDENTIFIERs associated to logical_name_list because they would be 
needed
> to invoke a tree construction method).
> I hope this gives an idea of what I have to do. I don't post more
> complex examples because it's already a pain for me to follow them 
in
> the grammar even though I built the creature.
> 
> context_clause
> 	:  (context_item)*
> 	;
> 
> context_item
> 	:  library_clause
> 	|  use_clause
> 	;
> 
> library_clause
>      	:  "library" logical_name_list SEMICOLON
>      	;
> 
> logical_name_list 
>    	:  ln1:logical_name (COMMA logical_name)*
> 	;
> 
> logical_name
> 	:  IDENTIFIER
> 	;
> 
> Would you still go for the custom AST option?
> 
> Jorge
> 
> > -----Mensaje original-----
> > De: mzukowski@y... [mailto:mzukowski@y...]
> > Enviado el: martes, 10 de junio de 2003 17:38
> > Para: antlr-interest@yahoogroups.com
> > Asunto: RE: [antlr-interest] Dilemma
> > 
> > Number 2 is probably the most powerful.  Note that you should be 
able
> to
> > reconstruct a whole region of text given a tree.  You aren't 
limited
> to
> > only
> > putting text into AST nodes, you can put anything you want in by
> making
> > your
> > own node subclass.  See the gcc parser for an example of this.
> > http://www.codetransform.com/gcc.html.
> > 
> > Concrete examples would help me think this through.
> > 
> > Monty
> > 
> > -----Original Message-----
> > From: j_scandaliaris@y... [mailto:j_scandaliaris@y...]
> > Sent: Tuesday, June 10, 2003 4:15 AM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Dilemma
> > 
> > 
> > Hi all,
> > 	I have an antlr recognizer already built. Now I am adding
> actions to
> > produce the output, which is the generation of a tree (not an 
AST, it
> is a
> > custom tree-structure representing the hierarchy of the source 
code).
> I
> > decided to build the tree manually, mostly because I don't have
> control
> > over
> > it, only access to the methods for creating it. From the input 
source
> code
> > the important thing is to recognize some key structures which are 
the
> > inputs
> > to the tree construction methods, mainly names, numbers and 
portions
> of
> > the
> > source code (in the form of strings).
> > 
> > 	The dilemma I face is to find the simplest (performance not
> > critical) way to do this (the grammar has already some 2000 lines 
and
> over
> > 200 rules). The basic problems I face are that the grammar 
decomposes
> a
> > rule
> > (for which I have some tree construction method) into several 
levels
> of
> > calls to other sub rules. Each sub rule will match some text (a 
name,
> a
> > list
> > of names, or more complex structures) and then I have to return 
this
> info
> > back to the main rule in some way. This is the key point. I have
> devised
> > so
> > far several ways of doing this (in each case with some 
limitations):
> > 
> > 	1. Use rule return values. -> Cumbersome when the sub rule is 
n
> > levels below. One possible return value; when in need to return
> multiple
> > things they have to be grouped; manually done all the way
> > 	2. Use AST= true and take advantage of nodes' text as a sort 
of
> > antlr-managed string-type return value. -> Limited to strings, 
still a
> bit
> > cumbersome when sub rule is deep down in the call hierarchy, adds 
a
> lot of
> > overhead.
> > 	3. Create some data members in the parser class or some
> automatic
> > objects within the class' rules, and communicate through them. ->
> > Difficult
> > to follow, I think it might be prone to hide bugs.
> > 
> > 	So far my ideas, right now I might be going for a combination 
of
> 2
> > and 3, but I am looking forward to learning from other people's
> experience
> > and knowledge. Any help is appreciated,
> > 
> > Regards,
> > 
> > Jorge
> > 
> > 
> > 
> > 
> > Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/
> > 
> > 
> > 
> > 
> > Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From j_scandaliaris at yahoo.es  Thu Jun 12 05:36:39 2003
From: j_scandaliaris at yahoo.es (Jorge Scandaliaris)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Re: Dilemma
In-Reply-To: <bc9flt+oh4d@eGroups.com>
Message-ID: <001d01c330df$4a0556d0$03001aac@zoys>

Thanks Enrique,
	I agree. I noticed that in a couple of places so far and I
thought some optimization was possible, but I ended up postponing that.
The grammar is not optimized as I translated the VHDL ebnf productions
almost directly into antlr's grammar except where infinite recursion was
an issue.

Jorge
	

> -----Mensaje original-----
> De: antlrlist [mailto:antlrlist@yahoo.com]
> Enviado el: jueves, 12 de junio de 2003 11:04
> Para: antlr-interest@yahoogroups.com
> Asunto: [antlr-interest] Re: Dilemma
> 
> Hello Jorge,
> 
> I agree completely with Monty in this matter. You'll probably have to
> use your own AST implementation for this.
> 
> If you allow me, I have also a suggestion about grammar complexity. I
> think your writing style might be giving you more troubles than
> benefits. The rules you writted are equivalent to:
> 
> context_item
>   :  library_clause
>   |  use_clause
>   ;
> 
> library_clause
>   :  "library" ln1:IDENTIFIER (COMMA IDENTIFIER)* SEMICOLON
>   ;
> 
> Writing rules like these two would decrease the number of rules of
> your grammar, therefore making it easy to understand, maintain and
> debug.
> 
> Is this form of writing rules suitable for your needs?
> 
> Enrique
> 
> 
> 
> 
> 
> --- In antlr-interest@yahoogroups.com, "Jorge Scandaliaris"
> <j_scandaliaris@y...> wrote:
> > Thanks for the advice Monty. I think I'll use a custom AST then.
> I've
> > been following the examples and now have a good idea of how to do it
> > (C++ output).
> >
> > It's about VHDL, and as I said before the idea is to represent the
> > source code (a hw digital design) in a hierarchical way. The tool
> down
> > the line will modify it, so some basic info must stored although we
> are
> > no making a VHDL compiler.
> > One of the simplest cases I came across so far (this one is not
> > difficult to solve):
> >
> > In this case I am interested only on the source of context clause,
> which
> > has to be kept as list or vector of string (the tree has a method
> for
> > the input of the source code on a line basis). In more complex
> cases,
> > the call hierarchy would be deeper and, for example, I would have to
> > keep the source code as in this case but also individual items
> (going
> > back to the example I could be interested in having as well all the
> > IDENTIFIERs associated to logical_name_list because they would be
> needed
> > to invoke a tree construction method).
> > I hope this gives an idea of what I have to do. I don't post more
> > complex examples because it's already a pain for me to follow them
> in
> > the grammar even though I built the creature.
> >
> > context_clause
> > 	:  (context_item)*
> > 	;
> >
> > context_item
> > 	:  library_clause
> > 	|  use_clause
> > 	;
> >
> > library_clause
> >      	:  "library" logical_name_list SEMICOLON
> >      	;
> >
> > logical_name_list
> >    	:  ln1:logical_name (COMMA logical_name)*
> > 	;
> >
> > logical_name
> > 	:  IDENTIFIER
> > 	;
> >
> > Would you still go for the custom AST option?
> >
> > Jorge
> >
> > > -----Mensaje original-----
> > > De: mzukowski@y... [mailto:mzukowski@y...]
> > > Enviado el: martes, 10 de junio de 2003 17:38
> > > Para: antlr-interest@yahoogroups.com
> > > Asunto: RE: [antlr-interest] Dilemma
> > >
> > > Number 2 is probably the most powerful.  Note that you should be
> able
> > to
> > > reconstruct a whole region of text given a tree.  You aren't
> limited
> > to
> > > only
> > > putting text into AST nodes, you can put anything you want in by
> > making
> > > your
> > > own node subclass.  See the gcc parser for an example of this.
> > > http://www.codetransform.com/gcc.html.
> > >
> > > Concrete examples would help me think this through.
> > >
> > > Monty
> > >
> > > -----Original Message-----
> > > From: j_scandaliaris@y... [mailto:j_scandaliaris@y...]
> > > Sent: Tuesday, June 10, 2003 4:15 AM
> > > To: antlr-interest@yahoogroups.com
> > > Subject: [antlr-interest] Dilemma
> > >
> > >
> > > Hi all,
> > > 	I have an antlr recognizer already built. Now I am adding
> > actions to
> > > produce the output, which is the generation of a tree (not an
> AST, it
> > is a
> > > custom tree-structure representing the hierarchy of the source
> code).
> > I
> > > decided to build the tree manually, mostly because I don't have
> > control
> > > over
> > > it, only access to the methods for creating it. From the input
> source
> > code
> > > the important thing is to recognize some key structures which are
> the
> > > inputs
> > > to the tree construction methods, mainly names, numbers and
> portions
> > of
> > > the
> > > source code (in the form of strings).
> > >
> > > 	The dilemma I face is to find the simplest (performance not
> > > critical) way to do this (the grammar has already some 2000 lines
> and
> > over
> > > 200 rules). The basic problems I face are that the grammar
> decomposes
> > a
> > > rule
> > > (for which I have some tree construction method) into several
> levels
> > of
> > > calls to other sub rules. Each sub rule will match some text (a
> name,
> > a
> > > list
> > > of names, or more complex structures) and then I have to return
> this
> > info
> > > back to the main rule in some way. This is the key point. I have
> > devised
> > > so
> > > far several ways of doing this (in each case with some
> limitations):
> > >
> > > 	1. Use rule return values. -> Cumbersome when the sub rule is
> n
> > > levels below. One possible return value; when in need to return
> > multiple
> > > things they have to be grouped; manually done all the way
> > > 	2. Use AST= true and take advantage of nodes' text as a sort
> of
> > > antlr-managed string-type return value. -> Limited to strings,
> still a
> > bit
> > > cumbersome when sub rule is deep down in the call hierarchy, adds
> a
> > lot of
> > > overhead.
> > > 	3. Create some data members in the parser class or some
> > automatic
> > > objects within the class' rules, and communicate through them. ->
> > > Difficult
> > > to follow, I think it might be prone to hide bugs.
> > >
> > > 	So far my ideas, right now I might be going for a combination
> of
> > 2
> > > and 3, but I am looking forward to learning from other people's
> > experience
> > > and knowledge. Any help is appreciated,
> > >
> > > Regards,
> > >
> > > Jorge
> > >
> > >
> > >
> > >
> > > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/
> > >
> > >
> > >
> > >
> > > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From dave.green at valley.net  Thu Jun 12 06:32:25 2003
From: dave.green at valley.net (gdave)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] keywords appended to identifiers, suggestions?
Message-ID: <bc9vd9+thal@eGroups.com>

I have a simple grammar which needs to identify normal runs of 
characters as NAMES, but certain keywords as KEYWORDS. The tricky 
part which I'm unable to solved is that I would like to identify 
keywords even when they are appended to name. Furthermore, I would 
NOT like to identify them when they are embedded in a name. a grammar 
example that fails to meet this need: 

class P extends Parser; 
startRule
    :   
    n:NAME
        {System.out.println("name: " + n.getText());}
    | KEYWORD
        {System.out.println("keyword");}
    ;

class L extends Lexer;

protected 
KEYWORD : "FOO" | "BAR";

protected 
NAME:   ('A'..'Z')+
    ;

KEY_OR_NAME :
 (KEYWORD) => KEYWORD {$setType(KEYWORD);}
 | NAME {$setType(NAME);}
 ;

Test cases that work according to my wishes:
FOO DAVE -> keyword name:DAVE
DAVE FOO -> name:DAVE keyword
FOODAVE -> keyword name:DAVE


Test cases which the grammar mishandles:
DAVEFOO -> name:DAVE keyword
DAVEFOOSUFFIX -> name:DAVEFOOSUFFIX

How can modify the grammar to keep the NAME expression from 
swallowing the trailing keywords? If it did recognize trailing 
keywords, how can I keep it from splitting names because they have 
embedded keywords? thanks in advance for any suggestions. I'm on my 
fourth or fifth pouring over of the antlr manual and haven't found a 
construct that I have been able to use to any advantage in this 
problem. 

Dave



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Matthew.Ford at forward.com.au  Thu Jun 12 06:40:15 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] keywords appended to identifiers, suggestions?
References: <bc9vd9+thal@eGroups.com>
Message-ID: <000601c330e8$27b7aac0$0200a8c0@NOTEBOOK>

How about just finding NAMEs and then using Java String.endsWith() to test
for keywords.
matthew

----- Original Message -----
From: "gdave" <dave.green@valley.net>
To: <antlr-interest@yahoogroups.com>
Sent: Thursday, June 12, 2003 11:32 PM
Subject: [antlr-interest] keywords appended to identifiers, suggestions?


> I have a simple grammar which needs to identify normal runs of
> characters as NAMES, but certain keywords as KEYWORDS. The tricky
> part which I'm unable to solved is that I would like to identify
> keywords even when they are appended to name. Furthermore, I would
> NOT like to identify them when they are embedded in a name. a grammar
> example that fails to meet this need:
>
> class P extends Parser;
> startRule
>     :
>     n:NAME
>         {System.out.println("name: " + n.getText());}
>     | KEYWORD
>         {System.out.println("keyword");}
>     ;
>
> class L extends Lexer;
>
> protected
> KEYWORD : "FOO" | "BAR";
>
> protected
> NAME:   ('A'..'Z')+
>     ;
>
> KEY_OR_NAME :
>  (KEYWORD) => KEYWORD {$setType(KEYWORD);}
>  | NAME {$setType(NAME);}
>  ;
>
> Test cases that work according to my wishes:
> FOO DAVE -> keyword name:DAVE
> DAVE FOO -> name:DAVE keyword
> FOODAVE -> keyword name:DAVE
>
>
> Test cases which the grammar mishandles:
> DAVEFOO -> name:DAVE keyword
> DAVEFOOSUFFIX -> name:DAVEFOOSUFFIX
>
> How can modify the grammar to keep the NAME expression from
> swallowing the trailing keywords? If it did recognize trailing
> keywords, how can I keep it from splitting names because they have
> embedded keywords? thanks in advance for any suggestions. I'm on my
> fourth or fifth pouring over of the antlr manual and haven't found a
> construct that I have been able to use to any advantage in this
> problem.
>
> Dave
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Jim.OConnor at microfocus.com  Thu Jun 12 07:41:51 2003
From: Jim.OConnor at microfocus.com (Jim O'Connor)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] keywords appended to identifiers, suggestion
	s?
Message-ID: <3AC103F1B7EEEC48A855ACB1D2819E9101B37E19@rock-corpmail.microfocus.com>

Hi Dave,
  There is one solution.  There may be others.  A lexer is a CharScanner.
CharScanner has a method testLiteralsTable().

class L extends Lexer;


options {
  testLiterals = false;   // don't automatically test for literals
}
tokens {
   ....
}
{
    public int testLiteralsTable(int ttype) {       //overrides CharScanner
method
     //Useful variables:  text.getBuffer(), text.length()
     //ttype come in as NAME
     //I have built my own hash tables for keywords.  You might be able to
use the tables from the 
     // tokens section. 
    
     //psuedo code
      while( there are members in your tables){
         if(current member is substring of text){
           ttype = type of current member;
           break;
         }//if
       }//while
       return ttype;
    } //testliteral
}
NAME
options {testLiterals=true;}
:   ('A'..'Z')+
    ;


Jim


-----Original Message-----
From: gdave [mailto:dave.green@valley.net]
Sent: Thursday, June 12, 2003 9:32 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] keywords appended to identifiers, suggestions?


I have a simple grammar which needs to identify normal runs of 
characters as NAMES, but certain keywords as KEYWORDS. The tricky 
part which I'm unable to solved is that I would like to identify 
keywords even when they are appended to name. Furthermore, I would 
NOT like to identify them when they are embedded in a name. a grammar 
example that fails to meet this need: 

class P extends Parser; 
startRule
    :   
    n:NAME
        {System.out.println("name: " + n.getText());}
    | KEYWORD
        {System.out.println("keyword");}
    ;

class L extends Lexer;

protected 
KEYWORD : "FOO" | "BAR";

protected 
NAME:   ('A'..'Z')+
    ;

KEY_OR_NAME :
 (KEYWORD) => KEYWORD {$setType(KEYWORD);}
 | NAME {$setType(NAME);}
 ;

Test cases that work according to my wishes:
FOO DAVE -> keyword name:DAVE
DAVE FOO -> name:DAVE keyword
FOODAVE -> keyword name:DAVE


Test cases which the grammar mishandles:
DAVEFOO -> name:DAVE keyword
DAVEFOOSUFFIX -> name:DAVEFOOSUFFIX

How can modify the grammar to keep the NAME expression from 
swallowing the trailing keywords? If it did recognize trailing 
keywords, how can I keep it from splitting names because they have 
embedded keywords? thanks in advance for any suggestions. I'm on my 
fourth or fifth pouring over of the antlr manual and haven't found a 
construct that I have been able to use to any advantage in this 
problem. 

Dave



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From j_scandaliaris at yahoo.es  Thu Jun 12 07:50:59 2003
From: j_scandaliaris at yahoo.es (j_scandaliaris@yahoo.es)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] AST problem
Message-ID: <000e01c330f2$0942af90$e5315393@GAUDI>

Hi,
	I have derived a custom AST class from commonAST, mostly following examples in the antlr distribution and tutorials. I am not sure I have done everything the right way though, as I don?t fully understand the mechanisms behind all this. So this post is about two things:
       1.- Try to understand what is the right way to do it: I found the doc in the antlr distribution difficult to understand (maybe ?cause I am not that strong in c++ ?). What is that is necessary to add/modify and why? I get particularly lost with the factory stuff :(
       2.- Identify if the following behaviour in my parser is ?normal? or induced (to put it in a nice way :) )by the way I created the custom AST, and hopefully understand how to fix it!

logical_name_list 
	{  string str1, str2;  
   	}
   	:  ln1:logical_name 
   	{  str1 = #ln1->getSrc(/* int lineNumber=0 */);
   	}
   	(  COMMA ln2:logical_name
   	{  str2 += ", " + #ln2->getSrc();
   	}
   	)*
   	{  ##->addSrc(str1 + str2);
   	}
	;

logical_name
	:  id:IDENTIFIER
   	{  ##->addSrc(id->getText()); 
   	}
   	;

addSrc() and getSrc() are member functions of MyAST handling a vector<string>. addSrc() makes a push_back, getSrc() gets the first string out of the vector by default (other elements available by passing an argument).
The key of the problem is the addSrc() call. As I understand it (maybe that is where the problem lies :) ) in logical_name_list I push_back ONCE (a getSrc() call in logical_name_list) with the text I am interested (comma separated list of IDs). Further up I read the text out of logical_name_list node assuming the text of interest is the first element of the vector. Instead, it seems that I am doing a push_back every time I get an identifier, so I end with the text of interest at the end of the vector, and the beginning filled with garbage. I would have thought that in logical_name rule I was applying the addSrc() to a logical_name node. 
Is this the right behaviour? Could it be due to an incorrect MyAST definition?
I attached the AST definition, in case anyone cares to see if there is anything wrong there. It is just a copy paste of what I found on the heteroAST example with additions. I looked also in Peter Morling's tutorial.
	To finish I just mention that this example is probably the simplest case in my grammar (which would be easier to solve in another way), and that the interest is to find the right way to go so I can apply this to the more difficult cases.
	

Jorge


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: VhdlAST.h
Type: application/octet-stream
Size: 4676 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20030612/1f73c81d/VhdlAST.obj
From rjc at trump.net.au  Thu Jun 12 08:05:40 2003
From: rjc at trump.net.au (Robert Colquhoun)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Custom AST Types
In-Reply-To: <4.2.0.58.20030612120527.00b16ae0@postoffice.trump.net.au>
Message-ID: <4.2.0.58.20030613005912.01b74888@postoffice.trump.net.au>

Hello,

Following up my own post, i have a patch of antlr-2.7.2 which fixes the 
problem:
         http://www.trump.net.au/~rjc/antlr/
It(customast.diff) was a one line patch to JavaCodeGenerator.java, the 2nd 
solution outlined below was used, possibly the same problem is in the C++ 
and C# generators, but it is late and i couldn't be bothered checking ;-)

Also at the bottom of the page is a compiled antlr.jar which has the 3 
listed patches on the page.

  - Robert

At 12:25 PM 12/06/2003 +1000, Robert Colquhoun wrote:
>Hi Everyone,
>
>Is anyone else having problems in tree walkers using custom AST types in
>conjunction with protected rules?
>
>I get ClassCastExceptions whenever the rule tries to match nothing ie ASTNULL
>
>ie
>
>options{
>      ASTLabelType=MyAST;
>}
>....
>protected elsest: (#(ELSE statementblock))?
>
>The code generated has something like:
>
>   protected final void elsest(antlr.collections.AST _t) throws
>antlr.RecognitionException {
>
>       MyAST elsest_AST_in = (MyAST)_t;  //<---ClassCastException here!
>       .....
>
>What appears to happen is that the elsest() rule is called passing ASTNULL
>when there is no else clause as part of a if/then/else statement and it
>trys to cast ASTNULL to MyAST type which breaks things.
>
>To fix
>         - either somehow change ASTNULL to be of MyAST type.
>         - as in other parts of generated code use something like:
>                 MyAST elsest_AST_in = (_t == ASTNULL) ? null : (MyAST)_t;
>
>Both require changes to antlr to solve though, otherwise i can hack my
>grammar to work around this i think.....just want to know if it is
>affecting other people at all, and thus whether i should fix antlr?
>
>   - Robert
>
>
>
>
>Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Jun 12 08:22:06 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] AST problem
Message-ID: <72C9789739C4214096AE945753B11EA32A5D3B@mypxmail04.bco-home.com>

This is an excellent time to look at your generated code.  Inspect the code
in the parser and notice the loop for your closure ()*.  ANTLR's source code
is readable and close to what you would write by hand.  The key to
understanding ANTLR is to read the generated code.

Monty

-----Original Message-----
From: j_scandaliaris@yahoo.es [mailto:j_scandaliaris@yahoo.es] 
Sent: Thursday, June 12, 2003 7:51 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] AST problem


Hi,
	I have derived a custom AST class from commonAST, mostly following
examples in the antlr distribution and tutorials. I am not sure I have done
everything the right way though, as I don't fully understand the mechanisms
behind all this. So this post is about two things:
       1.- Try to understand what is the right way to do it: I found the doc
in the antlr distribution difficult to understand (maybe 'cause I am not
that strong in c++ ?). What is that is necessary to add/modify and why? I
get particularly lost with the factory stuff :(
       2.- Identify if the following behaviour in my parser is "normal" or
induced (to put it in a nice way :) )by the way I created the custom AST,
and hopefully understand how to fix it!

logical_name_list 
	{  string str1, str2;  
   	}
   	:  ln1:logical_name 
   	{  str1 = #ln1->getSrc(/* int lineNumber=0 */);
   	}
   	(  COMMA ln2:logical_name
   	{  str2 += ", " + #ln2->getSrc();
   	}
   	)*
   	{  ##->addSrc(str1 + str2);
   	}
	;

logical_name
	:  id:IDENTIFIER
   	{  ##->addSrc(id->getText()); 
   	}
   	;

addSrc() and getSrc() are member functions of MyAST handling a
vector<string>. addSrc() makes a push_back, getSrc() gets the first string
out of the vector by default (other elements available by passing an
argument). The key of the problem is the addSrc() call. As I understand it
(maybe that is where the problem lies :) ) in logical_name_list I push_back
ONCE (a getSrc() call in logical_name_list) with the text I am interested
(comma separated list of IDs). Further up I read the text out of
logical_name_list node assuming the text of interest is the first element of
the vector. Instead, it seems that I am doing a push_back every time I get
an identifier, so I end with the text of interest at the end of the vector,
and the beginning filled with garbage. I would have thought that in
logical_name rule I was applying the addSrc() to a logical_name node. 
Is this the right behaviour? Could it be due to an incorrect MyAST
definition? I attached the AST definition, in case anyone cares to see if
there is anything wrong there. It is just a copy paste of what I found on
the heteroAST example with additions. I looked also in Peter Morling's
tutorial.
	To finish I just mention that this example is probably the simplest
case in my grammar (which would be easier to solve in another way), and that
the interest is to find the right way to go so I can apply this to the more
difficult cases.
	

Jorge


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From hrvoje.nezic at envox-lab.hr  Thu Jun 12 08:26:38 2003
From: hrvoje.nezic at envox-lab.hr (Hrvoje Nezic)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] ANNOUNCE: new development snapshot
References: <20030605160846.Q16357@cs.utwente.nl>
Message-ID: <002201c330f7$07ec7c20$1301a8c0@envox.local.hr>

I would like to download it, but it seems
the link is wrong (although
http://wwwhome.cs.utwente.nl/~klaren/antlr/
is ok).

Regards,
Hrvoje Nezic

----- Original Message -----
From: "Ric Klaren" <klaren@cs.utwente.nl>
To: "ANTLR mailinglist" <antlr-interest@yahoogroups.com>
Sent: Thursday, June 05, 2003 4:08 PM
Subject: [antlr-interest] ANNOUNCE: new development snapshot


> Hi,
>
> Finally I got some time to resync on my mailbox and do some antlr stuff.
>
> The result of this can be found at this link:
>
> http://wwwhome.cs.utwente.nl/~klaren/antlr/antlr-20030605.tar.gz
>
> This snapshot is cut from the current maintrunk.
>
> - Fixes to configure/Makefile build I hope it now works out of the box.
And
>   behaves the same as Terence's build scripts (e.g. only one antlr.jar)
> - I included/merged a number of MSVC fixes (mainly the ones from Alexander
>   Lenski kudos to him for supplying this stuff, also thanks to Thomas
>   Dudziak and other supplying patches)
>   - Fixed ANTLR_API stuff in config.h
>   - Put ANTLR_API on generated classes and structs.
>   - I hope it now builds ok on MSVC 7.0
>   - I expect better behaviour on MSVC 6.0 but no guarantees. Might still
need
>     Thomas' STLPort solution.
>
> Please follow MSVC instructions in lib/cpp/README. In short for a non dll
> build add all the lib/cpp/src/*.cpp (except dll.cpp) files and put lib/cpp
> in the include path of the compiler. (Do *not* use the stuff from the
> contrib dir its outdated)
>
> I did not yet compile a list of bugfixes since 2.7.2 release. But I'm
> pretty sure all trivial fixes are in.
>
> I'd appreciate all the feedback form MSVC users. (Keep in mind that I
don't
> have access to these compilers and cannot test this stuff)
>
> I do not exactly know how long I will have time but I hope we can get a
> fixup release out. I might try making the stuff Cygwin or Mingw friendly.
>
> As with all development snapshots YMMV, it may blow up in your face, no
> guarantees.
>
> Cheers,
>
> Ric
> --
> -----+++++*****************************************************+++++++++--
-----
>     ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
> -----+++++*****************************************************+++++++++--
-----
>   "I don't have anything against Java - it's the best damn implementation
>               of UCSD Pascal ever released..." --- Larry Smith
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From biz_morland at yahoo.com  Thu Jun 12 08:43:41 2003
From: biz_morland at yahoo.com (biz_morland)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Re: Using multiple parsers -- newbie question
In-Reply-To: <bc9e2h+p35e@eGroups.com>
Message-ID: <bca73d+qjmd@eGroups.com>

Hi all,

The parser I'm developing is part of a calculator program that 
analyzes text like: 2+3^3 and contains rules that determine the order 
in which an expression is parsed --> (2+3)^3 or 2+(3^3) .

I had to create two different parsers because the rules may differ 
slightly depending on the "mode" the calculator may be in. I 
emphasize "slightly" because both parsers are 95% the same, they 
differ in just a single rule.

I noticed that no matter which parser was called by the "if" 
statement in my Java program (that is, no matter which mode my 
calculator was in), the above expression would always be parsed just 
one way regardless of mode. I had each parser in its own grammar 
file. It seemed that the parser that was preferred by the program 
only depended on which grammar file I _last_ saved/compiled. Having 
an "if" statement in the Java program seemed to make no difference.

Out of desperation I followed the "bad" way, which seems like a blunt 
way of fixing the problem. But it worked so I can't complain. However 
the second way seems interesting, if I have time at the end of this 
project I will try to implement it. I'll probably have to do some 
extra reading about the commands you mentioned. But at least it now 
seems possible to implement 2 or more parsers.

Thanks!
Greg

--- In antlr-interest@yahoogroups.com, "antlrlist" <antlrlist@y...> 
wrote:
> 
> Hello Greg,
> 
> You didn't mention the difference between ExpressionParser_1 and 
> ExpressionParser_2 nor how did you detected that "both analizers 
> where the same".
> 
> However I see where your problem might be: you might be having 
> problems with token vocabularies if ExpressionParser_1 or 
> ExpressionParser_2 define tokens in the token section or if they 
have 
> unnamed tokens (they have strings in the rules, like 
> while: "while" ... ;).
> 
> There are two ways of solving this: a bad one and a good one.
> 
> The bad one consists in renaming your lexers and treeparsers, so 
> you'd get
>  - "expression_1.g" containing: ExpressionParser_1, 
> ExpressionLexer_1, and  ExpressionTreeWalker_1.
>  - "expression_2.g" contains: ExpressionParser_2, ExpressionLexer_2 
> and ExpressionTreeWalker_2.
> 
> This solution won't probably match your needs, so you'll have to 
> implement the "good one".
> <p>
> The good one consists on defining each analizer in one separated 
> file, and using grammar inheritance in the parsers. So you'd get:
>  - "expressionLexer.g" containing ExpressionLexer
>  - "expressionParser1.g" containing ExpressionParser1
>  - "expressionParser2.g" containing ExpressionParser2
>  - "expressionTreeParser.g" containing ExpressionTreeParser
> <p>
> When you write a set of analyzers in the same file, ANTLR deals 
with 
> vocabulary sharing authomatically. If you write them in separate 
> files, you'll have to share vocabularies manually (see "Token 
> vocabularies" on antlr docs).
> <p>
> In order to do this, you must:
>  - Copy/paste each analizer's definition in each grammar file.
>  - The lexer should need to export its vocabulary with the 
> exportVocab option. Give the vocab a name like "lexer" 
> (exportVocab=lexer;).
>  - In ExpressionParser1 you shoud importVocab the Lexer's 
vocabulary 
> (importVocab=lexer;)and exportVocab the new vocabulary 
> (exportVocab=parser1;).
>  - ExpressionParser2 should be defined as a derived grammar of 
> ExpressionParser1. This is, instead of being "class 
ExpressionParser2 
> extends Parser" it will be declared like "class ExpressionParser2 
> extends ExpressionParser1". You'll also have to compile 
> expressionParser2.g with the command line "java antlr.Tool -glib 
> expressionParser1.g expressionParser2.g" (see "grammar inheritance" 
> on the docs). Grammar inheritance allows you to "import" the rules 
of 
> ExpParser1 in ExpParser2, so you only have to write the ones that 
> change.
>  - ExpressionParser2 should import the vocab of *ExpressionParser1* 
> (importVocab=parser1;) and export its own vocab 
exportVocab=parser2;).
>  - ExpressionTreeParser should import ExpressionParser2's vocab 
> (importVocab=parser2).
> 
> Tell me if this helps you
> 
> Enrique
> 
> --- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> > I'd say try to step through it with a debugger.  I don't see any 
> obvious
> > clues here.
> > 
> > Monty
> > 
> > -----Original Message-----
> > From: biz_morland [mailto:biz_morland@y...] 
> > Sent: Wednesday, June 11, 2003 2:46 PM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Using multiple parsers -- newbie 
question
> > 
> > 
> > Hi,
> > 
> > I've written a Java program that uses an ExpressionParser, 
> > ExpressionLexer, and ExpressionTreeWalker. I've put these three 
> > classes in a separate grammar file called expression.g and 
> compiling 
> > and running these class doesn't produce any problems.
> > 
> > Now I've discovered an extra requirement which basically means I 
> have 
> > to create 2 parsers, each only slightly different in the way they 
> > parse some text. 
> > 
> > So now I have to write two separate classes: ExpressionParser_1 
and 
> > ExpressionParser_2. (The other classes, ExpressionLexer and 
> > ExpressionTreeWalker, should stay exactly the same.)
> > 
> > My question is, how does one implement two different parsers?
> > 
> > At first I thought, this is easy, I just have to create 2 
different 
> > parser classes, each with a different name. Maybe even create 2 
> > different grammar files to hold each new parser (since I 
discovered 
> a 
> > single grammar file cannot hold more than one parser class). 
> > 
> > So now:
> > 
> > "expression_1.g" contains: ExpressionParser_1, ExpressionLexer, 
> > ExpressionTreeWalker.
> > "expression_2.g" contains: ExpressionParser_2, ExpressionLexer, 
> > ExpressionTreeWalker.
> > 
> > And I just compile each grammar file before running my java 
> program, 
> > which seems to generate each of the classes named above.
> > 
> > In the java program I have an "if" statement that switches 
between 
> > parsers, calling either ExpressionParser_1 or ExpressionParser_2.
> > 
> > But as usual things aren't as easy as they seem, and my program 
> > refuses to differentiate between one or the other parser. Which 
> > parser class actually is used, depends only on which grammar file 
I 
> > saved last!
> > 
> > Assuming nothing's wrong with the java program itself (and with 
the 
> > if conditional that should call the appropriate parser class), 
> would 
> > anyone know why this isn't working? Or maybe even suggest a way 
to 
> > switch between 2 parsers in the same program?
> > 
> > Many thanks,
> > Greg
> > 
> > 
> > 
> > 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Thu Jun 12 08:48:54 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] ANNOUNCE: new development snapshot
In-Reply-To: <002201c330f7$07ec7c20$1301a8c0@envox.local.hr>; from hrvoje.nezic@envox-lab.hr on Thu, Jun 12, 2003 at 05:26:38PM +0200
References: <20030605160846.Q16357@cs.utwente.nl> <002201c330f7$07ec7c20$1301a8c0@envox.local.hr>
Message-ID: <20030612174854.A4167@cs.utwente.nl>

On Thu, Jun 12, 2003 at 05:26:38PM +0200, Hrvoje Nezic wrote:
> I would like to download it, but it seems
> the link is wrong (although
> http://wwwhome.cs.utwente.nl/~klaren/antlr/
> is ok).

http://wwwhome.cs.utwente.nl/~klaren/antlr/antlr-20030612.tar.gz

Try this one. I seem to have goofed up while trying to ungoof a goof up in
my new snapshot build script.

It includes a few more small fixes, since the previously announced one.

Let me know if there are any more problems.

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
              of UCSD Pascal ever released..." --- Larry Smith


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Thu Jun 12 09:09:37 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Re: Using multiple parsers -- newbie question
In-Reply-To: <bca73d+qjmd@eGroups.com>
Message-ID: <20030612160937.10194.qmail@web20418.mail.yahoo.com>

I think the answer would be to put the common parts of
the parser grammar in a base parser and extend that. 
You could declare all the rules of the base parser
class to be protected just for peace of mind, as well.

-Matt

--- biz_morland <biz_morland@yahoo.com> wrote:
> Hi all,
> 
> The parser I'm developing is part of a calculator
> program that 
> analyzes text like: 2+3^3 and contains rules that
> determine the order 
> in which an expression is parsed --> (2+3)^3 or
> 2+(3^3) .
> 
> I had to create two different parsers because the
> rules may differ 
> slightly depending on the "mode" the calculator may
> be in. I 
> emphasize "slightly" because both parsers are 95%
> the same, they 
> differ in just a single rule.
> 
> I noticed that no matter which parser was called by
> the "if" 
> statement in my Java program (that is, no matter
> which mode my 
> calculator was in), the above expression would
> always be parsed just 
> one way regardless of mode. I had each parser in its
> own grammar 
> file. It seemed that the parser that was preferred
> by the program 
> only depended on which grammar file I _last_
> saved/compiled. Having 
> an "if" statement in the Java program seemed to make
> no difference.
> 
> Out of desperation I followed the "bad" way, which
> seems like a blunt 
> way of fixing the problem. But it worked so I can't
> complain. However 
> the second way seems interesting, if I have time at
> the end of this 
> project I will try to implement it. I'll probably
> have to do some 
> extra reading about the commands you mentioned. But
> at least it now 
> seems possible to implement 2 or more parsers.
> 
> Thanks!
> Greg
> 
> --- In antlr-interest@yahoogroups.com, "antlrlist"
> <antlrlist@y...> 
> wrote:
> > 
> > Hello Greg,
> > 
> > You didn't mention the difference between
> ExpressionParser_1 and 
> > ExpressionParser_2 nor how did you detected that
> "both analizers 
> > where the same".
> > 
> > However I see where your problem might be: you
> might be having 
> > problems with token vocabularies if
> ExpressionParser_1 or 
> > ExpressionParser_2 define tokens in the token
> section or if they 
> have 
> > unnamed tokens (they have strings in the rules,
> like 
> > while: "while" ... ;).
> > 
> > There are two ways of solving this: a bad one and
> a good one.
> > 
> > The bad one consists in renaming your lexers and
> treeparsers, so 
> > you'd get
> >  - "expression_1.g" containing:
> ExpressionParser_1, 
> > ExpressionLexer_1, and  ExpressionTreeWalker_1.
> >  - "expression_2.g" contains: ExpressionParser_2,
> ExpressionLexer_2 
> > and ExpressionTreeWalker_2.
> > 
> > This solution won't probably match your needs, so
> you'll have to 
> > implement the "good one".
> > <p>
> > The good one consists on defining each analizer in
> one separated 
> > file, and using grammar inheritance in the
> parsers. So you'd get:
> >  - "expressionLexer.g" containing ExpressionLexer
> >  - "expressionParser1.g" containing
> ExpressionParser1
> >  - "expressionParser2.g" containing
> ExpressionParser2
> >  - "expressionTreeParser.g" containing
> ExpressionTreeParser
> > <p>
> > When you write a set of analyzers in the same
> file, ANTLR deals 
> with 
> > vocabulary sharing authomatically. If you write
> them in separate 
> > files, you'll have to share vocabularies manually
> (see "Token 
> > vocabularies" on antlr docs).
> > <p>
> > In order to do this, you must:
> >  - Copy/paste each analizer's definition in each
> grammar file.
> >  - The lexer should need to export its vocabulary
> with the 
> > exportVocab option. Give the vocab a name like
> "lexer" 
> > (exportVocab=lexer;).
> >  - In ExpressionParser1 you shoud importVocab the
> Lexer's 
> vocabulary 
> > (importVocab=lexer;)and exportVocab the new
> vocabulary 
> > (exportVocab=parser1;).
> >  - ExpressionParser2 should be defined as a
> derived grammar of 
> > ExpressionParser1. This is, instead of being
> "class 
> ExpressionParser2 
> > extends Parser" it will be declared like "class
> ExpressionParser2 
> > extends ExpressionParser1". You'll also have to
> compile 
> > expressionParser2.g with the command line "java
> antlr.Tool -glib 
> > expressionParser1.g expressionParser2.g" (see
> "grammar inheritance" 
> > on the docs). Grammar inheritance allows you to
> "import" the rules 
> of 
> > ExpParser1 in ExpParser2, so you only have to
> write the ones that 
> > change.
> >  - ExpressionParser2 should import the vocab of
> *ExpressionParser1* 
> > (importVocab=parser1;) and export its own vocab 
> exportVocab=parser2;).
> >  - ExpressionTreeParser should import
> ExpressionParser2's vocab 
> > (importVocab=parser2).
> > 
> > Tell me if this helps you
> > 
> > Enrique
> > 
> > --- In antlr-interest@yahoogroups.com,
> mzukowski@y... wrote:
> > > I'd say try to step through it with a debugger. 
> I don't see any 
> > obvious
> > > clues here.
> > > 
> > > Monty
> > > 
> > > -----Original Message-----
> > > From: biz_morland [mailto:biz_morland@y...] 
> > > Sent: Wednesday, June 11, 2003 2:46 PM
> > > To: antlr-interest@yahoogroups.com
> > > Subject: [antlr-interest] Using multiple parsers
> -- newbie 
> question
> > > 
> > > 
> > > Hi,
> > > 
> > > I've written a Java program that uses an
> ExpressionParser, 
> > > ExpressionLexer, and ExpressionTreeWalker. I've
> put these three 
> > > classes in a separate grammar file called
> expression.g and 
> > compiling 
> > > and running these class doesn't produce any
> problems.
> > > 
> > > Now I've discovered an extra requirement which
> basically means I 
> > have 
> > > to create 2 parsers, each only slightly
> different in the way they 
> > > parse some text. 
> > > 
> > > So now I have to write two separate classes:
> ExpressionParser_1 
> and 
> > > ExpressionParser_2. (The other classes,
> ExpressionLexer and 
> > > ExpressionTreeWalker, should stay exactly the
> same.)
> > > 
> > > My question is, how does one implement two
> different parsers?
> > > 
> 
=== message truncated ===


__________________________________
Do you Yahoo!?
Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
http://calendar.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Jun 12 09:25:24 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Re: Using multiple parsers -- newbie questio
	n
Message-ID: <72C9789739C4214096AE945753B11EA32A5D41@mypxmail04.bco-home.com>

Excellent idea.  It's really why ANTLR has "grammar subclassing."  By the
way the gcc grammar uses subclassing if you want a huge example of it.
http://www.codetransform.com/gcc.html.

Monty

-----Original Message-----
From: Matt Benson [mailto:gudnabrsam@yahoo.com] 
Sent: Thursday, June 12, 2003 9:10 AM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] Re: Using multiple parsers -- newbie question


I think the answer would be to put the common parts of
the parser grammar in a base parser and extend that. 
You could declare all the rules of the base parser
class to be protected just for peace of mind, as well.

-Matt

--- biz_morland <biz_morland@yahoo.com> wrote:
> Hi all,
> 
> The parser I'm developing is part of a calculator
> program that
> analyzes text like: 2+3^3 and contains rules that
> determine the order 
> in which an expression is parsed --> (2+3)^3 or
> 2+(3^3) .
> 
> I had to create two different parsers because the
> rules may differ
> slightly depending on the "mode" the calculator may
> be in. I 
> emphasize "slightly" because both parsers are 95%
> the same, they 
> differ in just a single rule.
> 
> I noticed that no matter which parser was called by
> the "if"
> statement in my Java program (that is, no matter
> which mode my 
> calculator was in), the above expression would
> always be parsed just 
> one way regardless of mode. I had each parser in its
> own grammar 
> file. It seemed that the parser that was preferred
> by the program 
> only depended on which grammar file I _last_
> saved/compiled. Having 
> an "if" statement in the Java program seemed to make
> no difference.
> 
> Out of desperation I followed the "bad" way, which
> seems like a blunt
> way of fixing the problem. But it worked so I can't
> complain. However 
> the second way seems interesting, if I have time at
> the end of this 
> project I will try to implement it. I'll probably
> have to do some 
> extra reading about the commands you mentioned. But
> at least it now 
> seems possible to implement 2 or more parsers.
> 
> Thanks!
> Greg
> 
> --- In antlr-interest@yahoogroups.com, "antlrlist" <antlrlist@y...>
> wrote:
> > 
> > Hello Greg,
> > 
> > You didn't mention the difference between
> ExpressionParser_1 and
> > ExpressionParser_2 nor how did you detected that
> "both analizers
> > where the same".
> > 
> > However I see where your problem might be: you
> might be having
> > problems with token vocabularies if
> ExpressionParser_1 or
> > ExpressionParser_2 define tokens in the token
> section or if they
> have 
> > unnamed tokens (they have strings in the rules,
> like
> > while: "while" ... ;).
> > 
> > There are two ways of solving this: a bad one and
> a good one.
> > 
> > The bad one consists in renaming your lexers and
> treeparsers, so
> > you'd get
> >  - "expression_1.g" containing:
> ExpressionParser_1,
> > ExpressionLexer_1, and  ExpressionTreeWalker_1.
> >  - "expression_2.g" contains: ExpressionParser_2,
> ExpressionLexer_2
> > and ExpressionTreeWalker_2.
> > 
> > This solution won't probably match your needs, so
> you'll have to
> > implement the "good one".
> > <p>
> > The good one consists on defining each analizer in
> one separated
> > file, and using grammar inheritance in the
> parsers. So you'd get:
> >  - "expressionLexer.g" containing ExpressionLexer
> >  - "expressionParser1.g" containing
> ExpressionParser1
> >  - "expressionParser2.g" containing
> ExpressionParser2
> >  - "expressionTreeParser.g" containing
> ExpressionTreeParser
> > <p>
> > When you write a set of analyzers in the same
> file, ANTLR deals
> with 
> > vocabulary sharing authomatically. If you write
> them in separate
> > files, you'll have to share vocabularies manually
> (see "Token
> > vocabularies" on antlr docs).
> > <p>
> > In order to do this, you must:
> >  - Copy/paste each analizer's definition in each
> grammar file.
> >  - The lexer should need to export its vocabulary
> with the
> > exportVocab option. Give the vocab a name like
> "lexer"
> > (exportVocab=lexer;).
> >  - In ExpressionParser1 you shoud importVocab the
> Lexer's
> vocabulary 
> > (importVocab=lexer;)and exportVocab the new
> vocabulary
> > (exportVocab=parser1;).
> >  - ExpressionParser2 should be defined as a
> derived grammar of
> > ExpressionParser1. This is, instead of being
> "class
> ExpressionParser2 
> > extends Parser" it will be declared like "class
> ExpressionParser2
> > extends ExpressionParser1". You'll also have to
> compile
> > expressionParser2.g with the command line "java
> antlr.Tool -glib
> > expressionParser1.g expressionParser2.g" (see
> "grammar inheritance"
> > on the docs). Grammar inheritance allows you to
> "import" the rules
> of 
> > ExpParser1 in ExpParser2, so you only have to
> write the ones that
> > change.
> >  - ExpressionParser2 should import the vocab of
> *ExpressionParser1*
> > (importVocab=parser1;) and export its own vocab
> exportVocab=parser2;).
> >  - ExpressionTreeParser should import
> ExpressionParser2's vocab
> > (importVocab=parser2).
> > 
> > Tell me if this helps you
> > 
> > Enrique
> > 
> > --- In antlr-interest@yahoogroups.com,
> mzukowski@y... wrote:
> > > I'd say try to step through it with a debugger.
> I don't see any
> > obvious
> > > clues here.
> > > 
> > > Monty
> > > 
> > > -----Original Message-----
> > > From: biz_morland [mailto:biz_morland@y...]
> > > Sent: Wednesday, June 11, 2003 2:46 PM
> > > To: antlr-interest@yahoogroups.com
> > > Subject: [antlr-interest] Using multiple parsers
> -- newbie
> question
> > > 
> > > 
> > > Hi,
> > > 
> > > I've written a Java program that uses an
> ExpressionParser,
> > > ExpressionLexer, and ExpressionTreeWalker. I've
> put these three
> > > classes in a separate grammar file called
> expression.g and
> > compiling
> > > and running these class doesn't produce any
> problems.
> > > 
> > > Now I've discovered an extra requirement which
> basically means I
> > have
> > > to create 2 parsers, each only slightly
> different in the way they
> > > parse some text.
> > > 
> > > So now I have to write two separate classes:
> ExpressionParser_1
> and 
> > > ExpressionParser_2. (The other classes,
> ExpressionLexer and
> > > ExpressionTreeWalker, should stay exactly the
> same.)
> > > 
> > > My question is, how does one implement two
> different parsers?
> > > 
> 
=== message truncated ===


__________________________________
Do you Yahoo!?
Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
http://calendar.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Jun 12 09:26:23 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Re: XML parsing
Message-ID: <72C9789739C4214096AE945753B11EA32A5D42@mypxmail04.bco-home.com>

This sounds really useful, guys.  Keep us posted.  I know some day I'll have
to deal with XML.  Will be cool to be able to use real tree parsers for it.

Monty

-----Original Message-----
From: Oliver Zeigermann [mailto:oliver@zeigermann.de] 
Sent: Thursday, June 12, 2003 1:14 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: XML parsing


Matt!

Really good ideas! Better than mine!

Actually, using wildcards and a generic token type for it already works with
XPA and the token type manager. If XPA sees an XML element that is not
definied in the grammar, it tries to map it to the generic token type
"wildcard". To make this known to your grammar you will have to put
something like

tokens {
    "<wildcard>";
}

into it. 

>>From then on you can use "." to match any tag. Using your alternative 1 and
2 together most likely will do the job. 

As a reference have a look at the example in 

examples/treeParser/componentTransformer/ComponentTreeParser.g 

or 

examples/tokenParser/transformingComponentParser/ComponentParser.g

in the XPA distribution.

Oliver

--- In antlr-interest@yahoogroups.com, Matt Benson <gudnabrsam@y...>
wrote:
> It seems there would be a couple of alternatives:
> 
> 1)  Use the wildcard feature of XPA with semantic
> predicates to test actual text value.
> 
> 2)  Modify XPA's XMLTokenTypeManager to map the
> alternatives to one generic token type.
> 
> -Matt
>  
> --- Oliver Zeigermann <oliver@z...> wrote:
> > As with ANTLR every token needs to have a type which
> > can be matched
> > by the parser, there is no way to do it dynamically.
> > You would have to list all the alternatives. If this
> > is your main 
> > problem you might consider using SAX and RE.
> > 
> > --- In antlr-interest@yahoogroups.com, Matt Benson <gudnabrsam@y...>
> > wrote:
> > > I am staying on the list in case any of this is of interest to 
> > > anyone else--if not, I apologize.
> > What I
> > > have, Oliver, is an XML file that has been created
> > so
> > > that tags of similar types, that I could process
> > in
> > > the same way, have different names which are an indication of 
> > > context.  The names might both match
> > a
> > > given RE, but be different.  Can you think of any
> > > slick way I could use the RE with XPA, or would I
> > have
> > > to allow for each possible value as alternatives
> > of
> > > the same rule (doable, but messy)?
> > > 
> > > Thanks,
> > > Matt
> > > 
> > > --- Oliver Zeigermann <oliver@z...> wrote:
> > > > ASTFactory had to be extended in order to allow
> > AST
> > > > creation from
> > > > strings (no type). This is fully compatible with
> > the
> > > > original ANTLR
> > > > code as it simply involves making "AST
> > > > create(String)" public (was 
> > > > protected). You will find the new source of
> > > > ASTFactory in the 
> > > > distribution. 
> > > > 
> > > > You will also find the file "Open-Issues.txt" in
> > the
> > > > distribution
> > > > which summarises what is missing. For short I
> > can
> > > > tell, XPA is very
> > > > stable and functional. I left the status to
> > alpha to
> > > > indicated
> > > > things may still change a bit on request of
> > users.
> > > > So, this is your
> > > > chance to make me adapt XPA to your needs ;)
> > > > 
> > > > Oliver
> > > > 
> > > > --- In antlr-interest@yahoogroups.com, Matt
> > Benson
> > > > <gudnabrsam@y...>
> > > > wrote:
> > > > > The first things I notice are that the latest
> > > > version
> > > > > is named like an alpha, and that the ANTLR jar
> > is
> > > > > labeled as having been patched.  Can you give
> > a
> > > > quick
> > > > > run-down on the current status of XPA and the
> > > > nature
> > > > > of the ANTLR patching taking place?
> > > > > 
> > > > > Thanks,
> > > > > Matt
> > > > > 
> > > > > 
> > > > > --- Oliver Zeigermann <oliver@z...> wrote:
> > > > > > I have implemented a framework of what you
> > > > describe:
> > > > > > 
> > > > > > http://www.zeigermann.de/xpa/index.html
> > > > > > 
> > > > > > It allows you to feed XML SAX events into
> > ANTLR
> > > > > > parsers as token
> > > > > > streams. Optionally, if you do not care for
> > > > space,
> > > > > > you can create an
> > > > > > AST from a SAX parser and transform it using
> > > > ANTLR
> > > > > > tree parsers.
> > > > > > 
> > > > > > Oliver
> > > > > > 
> > > > > > --- In antlr-interest@yahoogroups.com, Matt
> > > > Benson
> > > > > > <gudnabrsam@y...>
> > > > > > wrote:
> > > > > > > I am involved with a project of which one
> > of
> > > > the
> > > > > > most
> > > > > > > daunting components is to take a large XML
> > > > > > document
> > > > > > > and insert its contents in a relational
> > > > database.
> > > > > > The
> > > > > > > structure of the document allows for
> > > > repetitions
> > > > > > of
> > > > > > > many of its elements, and may include the
> > same
> > > > > > types
> > > > > > > of elements with different meanings based
> > on
> > > > > > context.
> > > > > > > I was trying to decide whether something
> > like
> > > > XSLT
> > > > > > > might help with this problem, when I was
> > > > struck by
> > > > > > the
> > > > > > > idea that a recursive-descent parser might
> > be
> > > > the
> > > > > > > thing to use.  This way we could specify
> > > > structure
> > > > > > by
> > > > > > > use of rules, and Antlr's use of
> > parameters
> > > > and
> > > > > > return
> > > > > > > values could allow us to specify a
> > contextual
> > > > > > > interpretation to an element, and receive
> > a
> > > > value
> > > > > > by
> > > > > > > which to associate it with a parent
> > relational
> > > > > > > database record.  Does this sound like a
> > good
> > > > > > > approach?  Can anyone offer a better
> > > > alternative?
> > > > > > > 
> > > > > > > TIA,
> > > > > > > Matt
> > > > > > > 
> > > > > > > __________________________________
> > > > > > > Do you Yahoo!?
> > > > > > > Yahoo! Calendar - Free online calendar
> > with
> > > > sync
> > > > > > to Outlook(TM).
> > > > > > > http://calendar.yahoo.com
> > > > > > 
> > > > > > 
> > > > > >  
> > > > > > 
> > > > > > Your use of Yahoo! Groups is subject to 
> > > > > > http://docs.yahoo.com/info/terms/
> > > > > > 
> > > > > > 
> > > > > 
> > > > > 
> > > > > __________________________________
> > > > > Do you Yahoo!?
> > > > > Yahoo! Calendar - Free online calendar with
> > sync
> > > > to Outlook(TM).
> > > > > http://calendar.yahoo.com
> > > > 
> > > > 
> > > >  
> > > > 
> > > > Your use of Yahoo! Groups is subject to 
> > > > http://docs.yahoo.com/info/terms/
> > > > 
> > > > 
> > > 
> > > 
> > > __________________________________
> > > Do you Yahoo!?
> > > Yahoo! Calendar - Free online calendar with sync
> > to Outlook(TM).
> > > http://calendar.yahoo.com
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/
> > 
> > 
> 
> 
> __________________________________
> Do you Yahoo!?
> Yahoo! Calendar - Free online calendar with sync to Outlook(TM). 
> http://calendar.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Thu Jun 12 09:28:41 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Re: Using multiple parsers -- newbie questio n
In-Reply-To: <72C9789739C4214096AE945753B11EA32A5D41@mypxmail04.bco-home.com>
Message-ID: <20030612162841.49353.qmail@web20414.mail.yahoo.com>

Monty, how is it you turn everything into a plug for
the gcc grammar?!  ;)


--- mzukowski@yci.com wrote:
> Excellent idea.  It's really why ANTLR has "grammar
> subclassing."  By the
> way the gcc grammar uses subclassing if you want a
> huge example of it.
> http://www.codetransform.com/gcc.html.
> 
> Monty
> 
> -----Original Message-----
> From: Matt Benson [mailto:gudnabrsam@yahoo.com] 
> Sent: Thursday, June 12, 2003 9:10 AM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] Re: Using multiple
> parsers -- newbie question
> 
> 
> I think the answer would be to put the common parts
> of
> the parser grammar in a base parser and extend that.
> 
> You could declare all the rules of the base parser
> class to be protected just for peace of mind, as
> well.
> 
> -Matt
> 
> --- biz_morland <biz_morland@yahoo.com> wrote:
> > Hi all,
> > 
> > The parser I'm developing is part of a calculator
> > program that
> > analyzes text like: 2+3^3 and contains rules that
> > determine the order 
> > in which an expression is parsed --> (2+3)^3 or
> > 2+(3^3) .
> > 
> > I had to create two different parsers because the
> > rules may differ
> > slightly depending on the "mode" the calculator
> may
> > be in. I 
> > emphasize "slightly" because both parsers are 95%
> > the same, they 
> > differ in just a single rule.
> > 
> > I noticed that no matter which parser was called
> by
> > the "if"
> > statement in my Java program (that is, no matter
> > which mode my 
> > calculator was in), the above expression would
> > always be parsed just 
> > one way regardless of mode. I had each parser in
> its
> > own grammar 
> > file. It seemed that the parser that was preferred
> > by the program 
> > only depended on which grammar file I _last_
> > saved/compiled. Having 
> > an "if" statement in the Java program seemed to
> make
> > no difference.
> > 
> > Out of desperation I followed the "bad" way, which
> > seems like a blunt
> > way of fixing the problem. But it worked so I
> can't
> > complain. However 
> > the second way seems interesting, if I have time
> at
> > the end of this 
> > project I will try to implement it. I'll probably
> > have to do some 
> > extra reading about the commands you mentioned.
> But
> > at least it now 
> > seems possible to implement 2 or more parsers.
> > 
> > Thanks!
> > Greg
> > 
> > --- In antlr-interest@yahoogroups.com, "antlrlist"
> <antlrlist@y...>
> > wrote:
> > > 
> > > Hello Greg,
> > > 
> > > You didn't mention the difference between
> > ExpressionParser_1 and
> > > ExpressionParser_2 nor how did you detected that
> > "both analizers
> > > where the same".
> > > 
> > > However I see where your problem might be: you
> > might be having
> > > problems with token vocabularies if
> > ExpressionParser_1 or
> > > ExpressionParser_2 define tokens in the token
> > section or if they
> > have 
> > > unnamed tokens (they have strings in the rules,
> > like
> > > while: "while" ... ;).
> > > 
> > > There are two ways of solving this: a bad one
> and
> > a good one.
> > > 
> > > The bad one consists in renaming your lexers and
> > treeparsers, so
> > > you'd get
> > >  - "expression_1.g" containing:
> > ExpressionParser_1,
> > > ExpressionLexer_1, and  ExpressionTreeWalker_1.
> > >  - "expression_2.g" contains:
> ExpressionParser_2,
> > ExpressionLexer_2
> > > and ExpressionTreeWalker_2.
> > > 
> > > This solution won't probably match your needs,
> so
> > you'll have to
> > > implement the "good one".
> > > <p>
> > > The good one consists on defining each analizer
> in
> > one separated
> > > file, and using grammar inheritance in the
> > parsers. So you'd get:
> > >  - "expressionLexer.g" containing
> ExpressionLexer
> > >  - "expressionParser1.g" containing
> > ExpressionParser1
> > >  - "expressionParser2.g" containing
> > ExpressionParser2
> > >  - "expressionTreeParser.g" containing
> > ExpressionTreeParser
> > > <p>
> > > When you write a set of analyzers in the same
> > file, ANTLR deals
> > with 
> > > vocabulary sharing authomatically. If you write
> > them in separate
> > > files, you'll have to share vocabularies
> manually
> > (see "Token
> > > vocabularies" on antlr docs).
> > > <p>
> > > In order to do this, you must:
> > >  - Copy/paste each analizer's definition in each
> > grammar file.
> > >  - The lexer should need to export its
> vocabulary
> > with the
> > > exportVocab option. Give the vocab a name like
> > "lexer"
> > > (exportVocab=lexer;).
> > >  - In ExpressionParser1 you shoud importVocab
> the
> > Lexer's
> > vocabulary 
> > > (importVocab=lexer;)and exportVocab the new
> > vocabulary
> > > (exportVocab=parser1;).
> > >  - ExpressionParser2 should be defined as a
> > derived grammar of
> > > ExpressionParser1. This is, instead of being
> > "class
> > ExpressionParser2 
> > > extends Parser" it will be declared like "class
> > ExpressionParser2
> > > extends ExpressionParser1". You'll also have to
> > compile
> > > expressionParser2.g with the command line "java
> > antlr.Tool -glib
> > > expressionParser1.g expressionParser2.g" (see
> > "grammar inheritance"
> > > on the docs). Grammar inheritance allows you to
> > "import" the rules
> > of 
> > > ExpParser1 in ExpParser2, so you only have to
> > write the ones that
> > > change.
> > >  - ExpressionParser2 should import the vocab of
> > *ExpressionParser1*
> > > (importVocab=parser1;) and export its own vocab
> > exportVocab=parser2;).
> > >  - ExpressionTreeParser should import
> > ExpressionParser2's vocab
> > > (importVocab=parser2).
> > > 
> > > Tell me if this helps you
> > > 
> > > Enrique
> > > 
> > > --- In antlr-interest@yahoogroups.com,
> > mzukowski@y... wrote:
> > > > I'd say try to step through it with a
> debugger.
> > I don't see any
> > > obvious
> 
=== message truncated ===


__________________________________
Do you Yahoo!?
Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
http://calendar.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Thu Jun 12 09:41:07 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Custom AST Types
In-Reply-To: <4.2.0.58.20030613005912.01b74888@postoffice.trump.net.au>
Message-ID: <AA82EAD9-9CF4-11D7-A825-000393BB647E@jguru.com>

Hi Robert.  Can u summarize the basic problem in the code for me?

Thanks,
Ter

On Thursday, June 12, 2003, at 08:05  AM, Robert Colquhoun wrote:

> Hello,
>
> Following up my own post, i have a patch of antlr-2.7.2 which fixes the
> problem:
>          http://www.trump.net.au/~rjc/antlr/
> It(customast.diff) was a one line patch to JavaCodeGenerator.java, the 
> 2nd
> solution outlined below was used, possibly the same problem is in the 
> C++
> and C# generators, but it is late and i couldn't be bothered checking 
> ;-)
>
> Also at the bottom of the page is a compiled antlr.jar which has the 3
> listed patches on the page.
>
>   - Robert
>
> At 12:25 PM 12/06/2003 +1000, Robert Colquhoun wrote:
>> Hi Everyone,
>>
>> Is anyone else having problems in tree walkers using custom AST types 
>> in
>> conjunction with protected rules?
>>
>> I get ClassCastExceptions whenever the rule tries to match nothing ie 
>> ASTNULL
>>
>> ie
>>
>> options{
>>      ASTLabelType=MyAST;
>> }
>> ....
>> protected elsest: (#(ELSE statementblock))?
>>
>> The code generated has something like:
>>
>>   protected final void elsest(antlr.collections.AST _t) throws
>> antlr.RecognitionException {
>>
>>       MyAST elsest_AST_in = (MyAST)_t;  //<---ClassCastException here!
>>       .....
>>
>> What appears to happen is that the elsest() rule is called passing 
>> ASTNULL
>> when there is no else clause as part of a if/then/else statement and 
>> it
>> trys to cast ASTNULL to MyAST type which breaks things.
>>
>> To fix
>>         - either somehow change ASTNULL to be of MyAST type.
>>         - as in other parts of generated code use something like:
>>                 MyAST elsest_AST_in = (_t == ASTNULL) ? null : 
>> (MyAST)_t;
>>
>> Both require changes to antlr to solve though, otherwise i can hack my
>> grammar to work around this i think.....just want to know if it is
>> affecting other people at all, and thus whether i should fix antlr?
>>
>>   - Robert
>>
>>
>>
>>
>> Your use of Yahoo! Groups is subject to 
>> http://docs.yahoo.com/info/terms/
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From antlrlist at yahoo.com  Thu Jun 12 09:59:35 2003
From: antlrlist at yahoo.com (antlrlist)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] antlraux v0.1 released
Message-ID: <bcabhn+tlur@eGroups.com>



Hi to everyone!

I'm proud to announce that I've published first version of antlraux.
Its official site, featuring a brief description and download links, 
is

         http://imaginatica.us.es/~enrique/antlraux/

Resumed features:
- LexInfoToken, a token that holds a filename.

- LexInfoAST, an implementation of the AST interface featuring 
lexical information (filename, line and column)

- Other utility classes in package antlraux.util.

- Advanced command-line treatment with package antlraux.clparse.

- Contextual information system with package antlraux.context 
featuring concepts like Context, Scope, Declaration and Type.

- Additional implementations of AST: an AST that stores a Scope 
(ScopeAST), an AST for expressions (ExpressionAST) and an AST for 
type references and definitions (TypeAST).

- Javadoc documentation with lots of funny orthographic errors!


Feel free to send your feedback!

Enrique.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Jun 12 10:27:09 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Re: Using multiple parsers -- newbie questio
	 n
Message-ID: <72C9789739C4214096AE945753B11EA32A5D45@mypxmail04.bco-home.com>

To be honest, I'm hoping someone will actually hire me to work on it :)

Many people need to see an entire working system, complete with tests and
makefile and grammar subclassing and parsing, tree parsing, tree emitting.
I look at it all the time to answer people's questions.

It's also a way to drive people to my site.  It seems less banal than
posting a message every month saying that I'm available for consulting ;)

Monty

-----Original Message-----
From: Matt Benson [mailto:gudnabrsam@yahoo.com] 
Sent: Thursday, June 12, 2003 9:29 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Re: Using multiple parsers -- newbie questio n


Monty, how is it you turn everything into a plug for
the gcc grammar?!  ;)


--- mzukowski@yci.com wrote:
> Excellent idea.  It's really why ANTLR has "grammar subclassing."  By 
> the way the gcc grammar uses subclassing if you want a
> huge example of it.
> http://www.codetransform.com/gcc.html.
> 
> Monty
> 
> -----Original Message-----
> From: Matt Benson [mailto:gudnabrsam@yahoo.com]
> Sent: Thursday, June 12, 2003 9:10 AM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] Re: Using multiple
> parsers -- newbie question
> 
> 
> I think the answer would be to put the common parts
> of
> the parser grammar in a base parser and extend that.
> 
> You could declare all the rules of the base parser
> class to be protected just for peace of mind, as
> well.
> 
> -Matt
> 
> --- biz_morland <biz_morland@yahoo.com> wrote:
> > Hi all,
> > 
> > The parser I'm developing is part of a calculator
> > program that
> > analyzes text like: 2+3^3 and contains rules that
> > determine the order
> > in which an expression is parsed --> (2+3)^3 or
> > 2+(3^3) .
> > 
> > I had to create two different parsers because the
> > rules may differ
> > slightly depending on the "mode" the calculator
> may
> > be in. I
> > emphasize "slightly" because both parsers are 95%
> > the same, they 
> > differ in just a single rule.
> > 
> > I noticed that no matter which parser was called
> by
> > the "if"
> > statement in my Java program (that is, no matter
> > which mode my
> > calculator was in), the above expression would
> > always be parsed just 
> > one way regardless of mode. I had each parser in
> its
> > own grammar
> > file. It seemed that the parser that was preferred
> > by the program 
> > only depended on which grammar file I _last_
> > saved/compiled. Having 
> > an "if" statement in the Java program seemed to
> make
> > no difference.
> > 
> > Out of desperation I followed the "bad" way, which
> > seems like a blunt
> > way of fixing the problem. But it worked so I
> can't
> > complain. However
> > the second way seems interesting, if I have time
> at
> > the end of this
> > project I will try to implement it. I'll probably
> > have to do some 
> > extra reading about the commands you mentioned.
> But
> > at least it now
> > seems possible to implement 2 or more parsers.
> > 
> > Thanks!
> > Greg
> > 
> > --- In antlr-interest@yahoogroups.com, "antlrlist"
> <antlrlist@y...>
> > wrote:
> > > 
> > > Hello Greg,
> > > 
> > > You didn't mention the difference between
> > ExpressionParser_1 and
> > > ExpressionParser_2 nor how did you detected that
> > "both analizers
> > > where the same".
> > > 
> > > However I see where your problem might be: you
> > might be having
> > > problems with token vocabularies if
> > ExpressionParser_1 or
> > > ExpressionParser_2 define tokens in the token
> > section or if they
> > have
> > > unnamed tokens (they have strings in the rules,
> > like
> > > while: "while" ... ;).
> > > 
> > > There are two ways of solving this: a bad one
> and
> > a good one.
> > > 
> > > The bad one consists in renaming your lexers and
> > treeparsers, so
> > > you'd get
> > >  - "expression_1.g" containing:
> > ExpressionParser_1,
> > > ExpressionLexer_1, and  ExpressionTreeWalker_1.
> > >  - "expression_2.g" contains:
> ExpressionParser_2,
> > ExpressionLexer_2
> > > and ExpressionTreeWalker_2.
> > > 
> > > This solution won't probably match your needs,
> so
> > you'll have to
> > > implement the "good one".
> > > <p>
> > > The good one consists on defining each analizer
> in
> > one separated
> > > file, and using grammar inheritance in the
> > parsers. So you'd get:
> > >  - "expressionLexer.g" containing
> ExpressionLexer
> > >  - "expressionParser1.g" containing
> > ExpressionParser1
> > >  - "expressionParser2.g" containing
> > ExpressionParser2
> > >  - "expressionTreeParser.g" containing
> > ExpressionTreeParser
> > > <p>
> > > When you write a set of analyzers in the same
> > file, ANTLR deals
> > with
> > > vocabulary sharing authomatically. If you write
> > them in separate
> > > files, you'll have to share vocabularies
> manually
> > (see "Token
> > > vocabularies" on antlr docs).
> > > <p>
> > > In order to do this, you must:
> > >  - Copy/paste each analizer's definition in each
> > grammar file.
> > >  - The lexer should need to export its
> vocabulary
> > with the
> > > exportVocab option. Give the vocab a name like
> > "lexer"
> > > (exportVocab=lexer;).
> > >  - In ExpressionParser1 you shoud importVocab
> the
> > Lexer's
> > vocabulary
> > > (importVocab=lexer;)and exportVocab the new
> > vocabulary
> > > (exportVocab=parser1;).
> > >  - ExpressionParser2 should be defined as a
> > derived grammar of
> > > ExpressionParser1. This is, instead of being
> > "class
> > ExpressionParser2
> > > extends Parser" it will be declared like "class
> > ExpressionParser2
> > > extends ExpressionParser1". You'll also have to
> > compile
> > > expressionParser2.g with the command line "java
> > antlr.Tool -glib
> > > expressionParser1.g expressionParser2.g" (see
> > "grammar inheritance"
> > > on the docs). Grammar inheritance allows you to
> > "import" the rules
> > of
> > > ExpParser1 in ExpParser2, so you only have to
> > write the ones that
> > > change.
> > >  - ExpressionParser2 should import the vocab of
> > *ExpressionParser1*
> > > (importVocab=parser1;) and export its own vocab
> > exportVocab=parser2;).
> > >  - ExpressionTreeParser should import
> > ExpressionParser2's vocab
> > > (importVocab=parser2).
> > > 
> > > Tell me if this helps you
> > > 
> > > Enrique
> > > 
> > > --- In antlr-interest@yahoogroups.com,
> > mzukowski@y... wrote:
> > > > I'd say try to step through it with a
> debugger.
> > I don't see any
> > > obvious
> 
=== message truncated ===


__________________________________
Do you Yahoo!?
Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
http://calendar.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From monaabs at yahoo.com  Thu Jun 12 12:21:44 2003
From: monaabs at yahoo.com (monaabs)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] 2.7.2  JDK query
Message-ID: <bcajs8+ljhe@eGroups.com>

Hi ,
In the link for building ANTLr with C++,  
http://www.imada.sdu.dk/~morling/issue1.htm ..point 8 states that we 
need to build every grammar file using JDK . Is this step necessary .

Are the .g files to be compiled using java.

I have made a static lib (ANTLR) and i am building my parser project 
will all the .cpp and .hpp files and this lib is linked statically to 
this project but my application crashes.

Is it enough to build the whole project using vc++ 6.0 . 

Where am i going wrong ? I have recently switched from 2.6.0 to 
2.7.2 .




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From dave.green at valley.net  Thu Jun 12 12:58:12 2003
From: dave.green at valley.net (gdave)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Re: keywords appended to identifiers, suggestion s?
In-Reply-To: <3AC103F1B7EEEC48A855ACB1D2819E9101B37E19@rock-corpmail.microfocus.com>
Message-ID: <bcam0k+k9jm@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Jim O'Connor" 
<Jim.OConnor@m...> wrote:
> Hi Dave,
>   There is one solution.  There may be others.  A lexer is a 
CharScanner.
> CharScanner has a method testLiteralsTable().
> 
> class L extends Lexer;
> 
......  rest of solution snipped......

I should have written in my first note that I was hoping to find a 
grammar based solution.  To get something running, I wrote a proxy 
TokenStream which I placed between the Lexer and the Parser which 
would notice trailing KEYWORDS appended to NAME tokens and split them 
into two tokens before sending them along.

This works, but leaves me maintaining a list of Keywords in a class 
separate from the rest of my grammar which feels awkward.  I was 
hoping that I was just missing some utility of the EBNF and predicate 
syntax that would let me lookahead to notice trailing KEYWORDS.

Actually I have tried experiments with Semantic predicates and 
although the "infinite" lookahead ability allows me to see a KEYWORD 
in the future, I have not found a production to place with the 
predicate that halts before consuming the KEYWORD characters.

anyone have any grammar ideas?
Dave


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Jun 12 13:13:46 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] 2.7.2  JDK query
Message-ID: <72C9789739C4214096AE945753B11EA32A5D48@mypxmail04.bco-home.com>

ANTLR is a java program which processes .g files to create either Java or
C++ parsers, lexers and tree parsers.  You must use Java to run ANTLR.  Once
the files are generated you use whatever you need to compile them.

Monty

-----Original Message-----
From: monaabs [mailto:monaabs@yahoo.com] 
Sent: Thursday, June 12, 2003 12:22 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] 2.7.2 JDK query


Hi ,
In the link for building ANTLr with C++,  
http://www.imada.sdu.dk/~morling/issue1.htm ..point 8 states that we 
need to build every grammar file using JDK . Is this step necessary .

Are the .g files to be compiled using java.

I have made a static lib (ANTLR) and i am building my parser project 
will all the .cpp and .hpp files and this lib is linked statically to 
this project but my application crashes.

Is it enough to build the whole project using vc++ 6.0 . 

Where am i going wrong ? I have recently switched from 2.6.0 to 
2.7.2 .




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Jun 12 13:19:10 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Re: keywords appended to identifiers, sugges
	tion s?
Message-ID: <72C9789739C4214096AE945753B11EA32A5D49@mypxmail04.bco-home.com>

Instead of halting you could make your lexer have a token buffer.  Halting
in ANTLR is not supported.  But you could modify your lexer to generate
multiple tokens, stuffing them into a buffer.  Then you have to manually
subclass your generated lexer and override nextToken() to first check the
buffer for a token to return.

Personally I like the tokenstream approach.  There's no reason why you can't
expose the keywords table through a lexer method and use that in your
stream.  Then you're not maintaining two tables.

Monty

-----Original Message-----
From: gdave [mailto:dave.green@valley.net] 
Sent: Thursday, June 12, 2003 12:58 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: keywords appended to identifiers, suggestion
s?


--- In antlr-interest@yahoogroups.com, "Jim O'Connor" 
<Jim.OConnor@m...> wrote:
> Hi Dave,
>   There is one solution.  There may be others.  A lexer is a
CharScanner.
> CharScanner has a method testLiteralsTable().
> 
> class L extends Lexer;
> 
......  rest of solution snipped......

I should have written in my first note that I was hoping to find a 
grammar based solution.  To get something running, I wrote a proxy 
TokenStream which I placed between the Lexer and the Parser which 
would notice trailing KEYWORDS appended to NAME tokens and split them 
into two tokens before sending them along.

This works, but leaves me maintaining a list of Keywords in a class 
separate from the rest of my grammar which feels awkward.  I was 
hoping that I was just missing some utility of the EBNF and predicate 
syntax that would let me lookahead to notice trailing KEYWORDS.

Actually I have tried experiments with Semantic predicates and 
although the "infinite" lookahead ability allows me to see a KEYWORD 
in the future, I have not found a production to place with the 
predicate that halts before consuming the KEYWORD characters.

anyone have any grammar ideas?
Dave


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From monaabs at yahoo.com  Thu Jun 12 13:21:12 2003
From: monaabs at yahoo.com (monaabs)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Re 2.7.2 JDK query
Message-ID: <bcanbo+crv1@eGroups.com>

Thanks for the prompt response .

Which files do i have to compile using java . (Is it the .g files).
Whats the command to compile?

Please respond


ANTLR is a java program which processes .g files to create either 
Java or
C++ parsers, lexers and tree parsers. You must use Java to run ANTLR. 
Once
the files are generated you use whatever you need to compile them.

Monty




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From dave.green at valley.net  Thu Jun 12 13:34:10 2003
From: dave.green at valley.net (gdave)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Re: keywords appended to identifiers, sugges tion s?
In-Reply-To: <72C9789739C4214096AE945753B11EA32A5D49@mypxmail04.bco-home.com>
Message-ID: <bcao42+h0q1@eGroups.com>

> Personally I like the tokenstream approach.  There's no reason why 
you can't
> expose the keywords table through a lexer method and use that in 
your
> stream.  Then you're not maintaining two tables.

If I read you right, you suggestion is a table/array in a piece of 
java code (which I can embed in the .g file and thus into the lexer) 
which contains my KEYWORD entries.  Then match both keywords and 
names with a single lexer rule GENERIC_WORD which has an action 
attached which sets the token type to NAME or WORD depending on 
whether the text is contained in the table.

just interested in seeing how other people manage these things.  The 
sub-class of the lexer would be ok.  The proxy TokenStream was also 
not desireable becuase one had to first construct a lexer, then wrap 
it in the proxy.  the least room for error the better.  keeping most 
of the data that needs to be in sync in the same file or better yet 
as one copy in the same file seems to be better as well.

by the way, I did stumble my way to a solution via a syntactic 
predicate a few minutes ago...  here it is:

{ 
	//
	// keyPred will test if there is a key NOT followed by a 
character leading forward
	//
    boolean keyPred() {
		boolean result = false;
		int myMark = mark();
		inputState.guessing++;
		try {
			mKEYWORD(false);
			try {
				mCHAR(false);			
	
				result = false;
			}
			catch (Exception pe) {
				result = true;		
			}			
		}
		catch (Exception pe) {
			result = false;			
		}
		rewind(myMark);
		inputState.guessing--;			
		
		return result; 
    }
}

protected
KEYWORD : "FOO" | "BAR";

protected
CHAR : 'a'..'z'| 'A'..'Z';

protected
NAME:   ( CHAR 
          ({!keyPred()}? CHAR)* 
        )
    ;
  
KEY_OR_NAME :
 {keyPred()}? KEYWORD {$setType(KEYWORD);}
 | NAME {$setType(NAME);}
 ;



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Jun 12 14:12:05 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Re: keywords appended to identifiers, sugges
	 tion s?
Message-ID: <72C9789739C4214096AE945753B11EA32A5D4A@mypxmail04.bco-home.com>

That looks good to me.  What language are you parsing, anyway?

Monty

-----Original Message-----
From: gdave [mailto:dave.green@valley.net] 
Sent: Thursday, June 12, 2003 1:34 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: keywords appended to identifiers, sugges tion
s?


> Personally I like the tokenstream approach.  There's no reason why
you can't
> expose the keywords table through a lexer method and use that in
your
> stream.  Then you're not maintaining two tables.

If I read you right, you suggestion is a table/array in a piece of 
java code (which I can embed in the .g file and thus into the lexer) 
which contains my KEYWORD entries.  Then match both keywords and 
names with a single lexer rule GENERIC_WORD which has an action 
attached which sets the token type to NAME or WORD depending on 
whether the text is contained in the table.

just interested in seeing how other people manage these things.  The 
sub-class of the lexer would be ok.  The proxy TokenStream was also 
not desireable becuase one had to first construct a lexer, then wrap 
it in the proxy.  the least room for error the better.  keeping most 
of the data that needs to be in sync in the same file or better yet 
as one copy in the same file seems to be better as well.

by the way, I did stumble my way to a solution via a syntactic 
predicate a few minutes ago...  here it is:

{ 
	//
	// keyPred will test if there is a key NOT followed by a 
character leading forward
	//
    boolean keyPred() {
		boolean result = false;
		int myMark = mark();
		inputState.guessing++;
		try {
			mKEYWORD(false);
			try {
				mCHAR(false);			
	
				result = false;
			}
			catch (Exception pe) {
				result = true;		
			}			
		}
		catch (Exception pe) {
			result = false;			
		}
		rewind(myMark);
		inputState.guessing--;			
		
		return result; 
    }
}

protected
KEYWORD : "FOO" | "BAR";

protected
CHAR : 'a'..'z'| 'A'..'Z';

protected
NAME:   ( CHAR 
          ({!keyPred()}? CHAR)* 
        )
    ;
  
KEY_OR_NAME :
 {keyPred()}? KEYWORD {$setType(KEYWORD);}
 | NAME {$setType(NAME);}
 ;



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From j_scandaliaris at yahoo.es  Thu Jun 12 15:06:30 2003
From: j_scandaliaris at yahoo.es (Jorge Scandaliaris)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] AST problem
In-Reply-To: <72C9789739C4214096AE945753B11EA32A5D3B@mypxmail04.bco-home.com>
Message-ID: <000401c3312e$e5740b30$03001aac@zoys>

Hi,
	I had a look at the generated code (I do it regularly, but I am
not yet familiar with ASTs) and I run the debugger but I still don't
understand. I also put some debug code in the rule to see what's going
on:

logical_name_list 
	{	string str, str1 = "1", str2 = "2";
	 	int size;
	}
	:  	{  cout << "ln1:logical_name : "; }  	    
		// renoved actions to see what where addSrc() was being
called
		ln1:logical_name 		 
   	   	(  	COMMA  {  cout << "ln2:logical_name : "; }
         		ln2:logical_name
      	)*
   	{  	cout << "##->addSrc(str1 + str2); : ";
      	##->addSrc(str1 + str2);
      	size = ##->srcSize();
      	cout << "lnl source size: " << size << "\n";
      	for (int i = 0; i < size; i++) {
         		cout << "lnl linea " << i << ": " <<
##->getSrc(i) << "\n";
      	}
   	}
	;
The parsed text is ieee, aaa, bbb (this is what I want as result of
logical_name_list rule)
Now what it seems weird to me is that I get this ( I added some debug
code to constructors, etc...):

inside VhdlAST()
inside initialize(RefToken)
ln1:logical_name : inside VhdlAST()
inside initialize(RefToken)
from within addSrc: ieee	<-- call to addSrc() 
inside VhdlAST()
inside initialize(RefToken)
ln2:logical_name : inside VhdlAST()
inside initialize(RefToken)
from within addSrc: aaa		<-- call to addSrc()
inside VhdlAST()
inside initialize(RefToken)
ln2:logical_name : inside VhdlAST()
inside initialize(RefToken)
from within addSrc: bbb		<-- call to addSrc
##->addSrc(str1 + str2); : from within addSrc: 12 <-- call to addSrc
lnl source size: 2	<-- WEIRD!!
lnl linea 0: ieee		<-- where is this coming from?
				
lnl linea 1: 12		<-- This is what I want

shouldn't the first element have been added to logical_name node,
instead of to logical_name_list?
Why doesn't happen the same thing with the (  )* loop?
The generated code for ln1:logical_name seems the same as
ln2:logical_name, except that this is within a loop. Where is the
difference in behavior coming from?

Thanks in advance. It's probably not the best thing to "debug" in the
list, but I honestly run out of ideas now.

Jorge


> -----Mensaje original-----
> De: mzukowski@yci.com [mailto:mzukowski@yci.com]
> Enviado el: jueves, 12 de junio de 2003 17:22
> Para: antlr-interest@yahoogroups.com
> Asunto: RE: [antlr-interest] AST problem
> 
> This is an excellent time to look at your generated code.  Inspect the
> code
> in the parser and notice the loop for your closure ()*.  ANTLR's
source
> code
> is readable and close to what you would write by hand.  The key to
> understanding ANTLR is to read the generated code.
> 
> Monty
> 
> -----Original Message-----
> From: j_scandaliaris@yahoo.es [mailto:j_scandaliaris@yahoo.es]
> Sent: Thursday, June 12, 2003 7:51 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] AST problem
> 
> 
> Hi,
> 	I have derived a custom AST class from commonAST, mostly
following
> examples in the antlr distribution and tutorials. I am not sure I have
> done
> everything the right way though, as I don't fully understand the
> mechanisms
> behind all this. So this post is about two things:
>        1.- Try to understand what is the right way to do it: I found
the
> doc
> in the antlr distribution difficult to understand (maybe 'cause I am
not
> that strong in c++ ?). What is that is necessary to add/modify and
why? I
> get particularly lost with the factory stuff :(
>        2.- Identify if the following behaviour in my parser is
"normal" or
> induced (to put it in a nice way :) )by the way I created the custom
AST,
> and hopefully understand how to fix it!
> 
> logical_name_list
> 	{  string str1, str2;
>    	}
>    	:  ln1:logical_name
>    	{  str1 = #ln1->getSrc(/* int lineNumber=0 */);
>    	}
>    	(  COMMA ln2:logical_name
>    	{  str2 += ", " + #ln2->getSrc();
>    	}
>    	)*
>    	{  ##->addSrc(str1 + str2);
>    	}
> 	;
> 
> logical_name
> 	:  id:IDENTIFIER
>    	{  ##->addSrc(id->getText());
>    	}
>    	;
> 
> addSrc() and getSrc() are member functions of MyAST handling a
> vector<string>. addSrc() makes a push_back, getSrc() gets the first
string
> out of the vector by default (other elements available by passing an
> argument). The key of the problem is the addSrc() call. As I
understand it
> (maybe that is where the problem lies :) ) in logical_name_list I
> push_back
> ONCE (a getSrc() call in logical_name_list) with the text I am
interested
> (comma separated list of IDs). Further up I read the text out of
> logical_name_list node assuming the text of interest is the first
element
> of
> the vector. Instead, it seems that I am doing a push_back every time I
get
> an identifier, so I end with the text of interest at the end of the
> vector,
> and the beginning filled with garbage. I would have thought that in
> logical_name rule I was applying the addSrc() to a logical_name node.
> Is this the right behaviour? Could it be due to an incorrect MyAST
> definition? I attached the AST definition, in case anyone cares to see
if
> there is anything wrong there. It is just a copy paste of what I found
on
> the heteroAST example with additions. I looked also in Peter Morling's
> tutorial.
> 	To finish I just mention that this example is probably the
simplest
> case in my grammar (which would be easier to solve in another way),
and
> that
> the interest is to find the right way to go so I can apply this to the
> more
> difficult cases.
> 
> 
> Jorge
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oobles at hotmail.com  Thu Jun 12 18:56:29 2003
From: oobles at hotmail.com (ooobles)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Help with simple grammer.
Message-ID: <bcbb0d+osjj@eGroups.com>


I've been working on a grammer for a simple list based language.  I 
have a problem with getting operator precedance right.  Hopefully 
someone might spare a minute to help me out?  I'm sure it can be 
solved simply.  I'd like to create a grammer that can parse something 
like:

definition: identA functionX(  identB  functionY( identC | identD | 
identE )  identF )

there is only three real elements to the grammer.
   1. a sequence..    A B C
   2. a function..    F(  )
   3. an optional sequence..  A | B | C

so far I've go a grammer like:


definition: IDENTIFIER COLON sequence
    ;

sequence: pipexpr ( sequence )?
    ;

pipeexpr: element ( '|' pipeexpr )?

element: IDENTIFIER  
       |  identifier '(' sequence ')'
       ;


This will compile in Antlr without warnings.  But it seems that the 
following would be parsed as valid

def: identA | identB identC

Is this case something that should be checked in code, or is there a 
better way to express the grammer?

Thanks,
David.





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mdouglass at exapted.com  Thu Jun 12 23:41:37 2003
From: mdouglass at exapted.com (Matthew Douglass)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Help with simple grammer.
References: <bcbb0d+osjj@eGroups.com>
Message-ID: <002301c33176$d751f380$6500000a@RIG>

David,

I'm pretty new to all of this and I'm half replying so I can have others
check out my work, but I think you can change the definition of sequence to
element ('|' element)* and then remove pipeexpr to accomplish what you want

That should effectively define a sequence as an element followed by any
number (including 0) of pipe symbols and another element, giving you the
infinitely long sequences you want.

But like I said, I could be way off base here :)

Hope that helps,
Matthew

----- Original Message -----
From: "ooobles" <oobles@hotmail.com>
To: <antlr-interest@yahoogroups.com>
Sent: Thursday, June 12, 2003 6:56 PM
Subject: [antlr-interest] Help with simple grammer.


>
> I've been working on a grammer for a simple list based language.  I
> have a problem with getting operator precedance right.  Hopefully
> someone might spare a minute to help me out?  I'm sure it can be
> solved simply.  I'd like to create a grammer that can parse something
> like:
>
> definition: identA functionX(  identB  functionY( identC | identD |
> identE )  identF )
>
> there is only three real elements to the grammer.
>    1. a sequence..    A B C
>    2. a function..    F(  )
>    3. an optional sequence..  A | B | C
>
> so far I've go a grammer like:
>
>
> definition: IDENTIFIER COLON sequence
>     ;
>
> sequence: pipexpr ( sequence )?
>     ;
>
> pipeexpr: element ( '|' pipeexpr )?
>
> element: IDENTIFIER
>        |  identifier '(' sequence ')'
>        ;
>
>
> This will compile in Antlr without warnings.  But it seems that the
> following would be parsed as valid
>
> def: identA | identB identC
>
> Is this case something that should be checked in code, or is there a
> better way to express the grammer?
>
> Thanks,
> David.
>
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>
>



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mdouglass at exapted.com  Thu Jun 12 23:45:16 2003
From: mdouglass at exapted.com (Matthew Douglass)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Help with simple grammer.
References: <bcbb0d+osjj@eGroups.com>
Message-ID: <000701c33177$599cbfa0$6500000a@RIG>

And of course it hits me right AFTER I sent that, that I didn't
differentiate between your sequences and optional sequences...  Rereading it
I'm a little unclear as to where sequences like A B C are acceptable and
where sequences like A | B | C are acceptable.  So maybe you can help me out
with that (or just wait for someone with more knowhow to jump in)
Sorry,
Matthew
----- Original Message -----
From: "ooobles" <oobles@hotmail.com>
To: <antlr-interest@yahoogroups.com>
Sent: Thursday, June 12, 2003 6:56 PM
Subject: [antlr-interest] Help with simple grammer.


>
> I've been working on a grammer for a simple list based language.  I
> have a problem with getting operator precedance right.  Hopefully
> someone might spare a minute to help me out?  I'm sure it can be
> solved simply.  I'd like to create a grammer that can parse something
> like:
>
> definition: identA functionX(  identB  functionY( identC | identD |
> identE )  identF )
>
> there is only three real elements to the grammer.
>    1. a sequence..    A B C
>    2. a function..    F(  )
>    3. an optional sequence..  A | B | C
>
> so far I've go a grammer like:
>
>
> definition: IDENTIFIER COLON sequence
>     ;
>
> sequence: pipexpr ( sequence )?
>     ;
>
> pipeexpr: element ( '|' pipeexpr )?
>
> element: IDENTIFIER
>        |  identifier '(' sequence ')'
>        ;
>
>
> This will compile in Antlr without warnings.  But it seems that the
> following would be parsed as valid
>
> def: identA | identB identC
>
> Is this case something that should be checked in code, or is there a
> better way to express the grammer?
>
> Thanks,
> David.
>
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>
>



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rjc at trump.net.au  Fri Jun 13 00:54:33 2003
From: rjc at trump.net.au (Robert Colquhoun)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Custom AST Types
In-Reply-To: <AA82EAD9-9CF4-11D7-A825-000393BB647E@jguru.com>
References: <4.2.0.58.20030613005912.01b74888@postoffice.trump.net.au>
Message-ID: <4.2.0.58.20030613173623.00b16b20@postoffice.trump.net.au>

At 09:41 AM 12/06/2003 -0700, Terence Parr wrote:
>Hi Robert.  Can u summarize the basic problem in the code for me?

Protected rules that legally can match an empty AST ie ASTNULL in 
combination with the tree walker using a custom ast type will throw a 
ClassCastException when run.

Looking a genRule() at line 2510 in JavaCodeGenerator.java the passed in 
AST _t is saved in a variable #statement_in which is defined to the custom 
AST type specified.

Most of the time for ordinary ASTs this works fine, occasionally ASTNULL 
gets passed to the method ASTNULL is of type ASTNULLType and cannot be 
assigned to your custom ast type and the whole thing explodes with a 
ClassCastException

The 1 line patch just checks to see if ASTNULL is about to be assigned and 
substitutes null to #statement_in

ie
         MyAST #statement_in = (MyAST)_t;
changes to:
         MyAST #statement_in = (_t == ASTNULL) ? null: (MyAST)_t;

- Robert


>Thanks,
>Ter
>
>On Thursday, June 12, 2003, at 08:05  AM, Robert Colquhoun wrote:
>
> > Hello,
> >
> > Following up my own post, i have a patch of antlr-2.7.2 which fixes the
> > problem:
> >          http://www.trump.net.au/~rjc/antlr/
> > It(customast.diff) was a one line patch to JavaCodeGenerator.java, the
> > 2nd
> > solution outlined below was used, possibly the same problem is in the
> > C++
> > and C# generators, but it is late and i couldn't be bothered checking
> > ;-)
> >
> > Also at the bottom of the page is a compiled antlr.jar which has the 3
> > listed patches on the page.
> >
> >   - Robert
> >
> > At 12:25 PM 12/06/2003 +1000, Robert Colquhoun wrote:
> >> Hi Everyone,
> >>
> >> Is anyone else having problems in tree walkers using custom AST types
> >> in
> >> conjunction with protected rules?
> >>
> >> I get ClassCastExceptions whenever the rule tries to match nothing ie
> >> ASTNULL
> >>
> >> ie
> >>
> >> options{
> >>      ASTLabelType=MyAST;
> >> }
> >> ....
> >> protected elsest: (#(ELSE statementblock))?
> >>
> >> The code generated has something like:
> >>
> >>   protected final void elsest(antlr.collections.AST _t) throws
> >> antlr.RecognitionException {
> >>
> >>       MyAST elsest_AST_in = (MyAST)_t;  //<---ClassCastException here!
> >>       .....
> >>
> >> What appears to happen is that the elsest() rule is called passing
> >> ASTNULL
> >> when there is no else clause as part of a if/then/else statement and
> >> it
> >> trys to cast ASTNULL to MyAST type which breaks things.
> >>
> >> To fix
> >>         - either somehow change ASTNULL to be of MyAST type.
> >>         - as in other parts of generated code use something like:
> >>                 MyAST elsest_AST_in = (_t == ASTNULL) ? null :
> >> (MyAST)_t;
> >>
> >> Both require changes to antlr to solve though, otherwise i can hack my
> >> grammar to work around this i think.....just want to know if it is
> >> affecting other people at all, and thus whether i should fix antlr?
> >>
> >>   - Robert


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From j_scandaliaris at yahoo.es  Fri Jun 13 04:29:57 2003
From: j_scandaliaris at yahoo.es (Jorge Scandaliaris)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] ANNOUNCE: new development snapshot
In-Reply-To: <20030612174854.A4167@cs.utwente.nl>
Message-ID: <000001c3319f$22870160$03001aac@zoys>

Hi, 
	I followed the instructions on the README, but the compiler
comes up with more than a thousand messages.
	It's complaining a lot about things like this (can't avoid the
wrap up) :
  
template class  ANTLR_API ANTLR_USE_NAMESPACE(std)allocator<
ANTLR_USE_NAMESPACE(std)_Tree_nod< ANTLR_USE_NAMESPACE(std)_Tmap_traits<
ANTLR_USE_NAMESPACE(std)string, int, CharScannerLiteralsLess,
ANTLR_USE_NAMESPACE(std)allocator< ANTLR_USE_NAMESPACE(std)pair< const
ANTLR_USE_NAMESPACE(std)string, int > >, false > >::_Node >;

and the message is like this:

f:\tools\antlr-20030612\lib\cpp\antlr\charscanner.hpp(81) : error C2039:
'_Tree_nod' : is not a member of 'std'

followed by others which I think are related to the above mentioned.

Any clues? Has anybody created the static library with the dev snapshot?
My setup is MSVC 6 sp5.

Jorge


> -----Mensaje original-----
> De: Ric Klaren [mailto:klaren@cs.utwente.nl]
> Enviado el: jueves, 12 de junio de 2003 17:49
> Para: antlr-interest@yahoogroups.com
> Asunto: Re: [antlr-interest] ANNOUNCE: new development snapshot
> 
> On Thu, Jun 12, 2003 at 05:26:38PM +0200, Hrvoje Nezic wrote:
> > I would like to download it, but it seems
> > the link is wrong (although
> > http://wwwhome.cs.utwente.nl/~klaren/antlr/
> > is ok).
> 
> http://wwwhome.cs.utwente.nl/~klaren/antlr/antlr-20030612.tar.gz
> 
> Try this one. I seem to have goofed up while trying to ungoof a goof
up in
> my new snapshot build script.
> 
> It includes a few more small fixes, since the previously announced
one.
> 
> Let me know if there are any more problems.
> 
> Ric
> --
>
-----+++++*****************************************************+++++++++
--
> -----
>     ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722
----
>
-----+++++*****************************************************+++++++++
--
> -----
>   "I don't have anything against Java - it's the best damn
implementation
>               of UCSD Pascal ever released..." --- Larry Smith
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Fri Jun 13 04:59:35 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] ANNOUNCE: new development snapshot
In-Reply-To: <000001c3319f$22870160$03001aac@zoys>; from j_scandaliaris@yahoo.es on Fri, Jun 13, 2003 at 01:29:57PM +0200
References: <20030612174854.A4167@cs.utwente.nl> <000001c3319f$22870160$03001aac@zoys>
Message-ID: <20030613135935.B4167@cs.utwente.nl>

Hi,

On Fri, Jun 13, 2003 at 01:29:57PM +0200, Jorge Scandaliaris wrote:
> 	I followed the instructions on the README, but the compiler
> comes up with more than a thousand messages.
> 	It's complaining a lot about things like this (can't avoid the
> wrap up) :
>
> template class  ANTLR_API ANTLR_USE_NAMESPACE(std)allocator<
> ANTLR_USE_NAMESPACE(std)_Tree_nod< ANTLR_USE_NAMESPACE(std)_Tmap_traits<
> ANTLR_USE_NAMESPACE(std)string, int, CharScannerLiteralsLess,
> ANTLR_USE_NAMESPACE(std)allocator< ANTLR_USE_NAMESPACE(std)pair< const
> ANTLR_USE_NAMESPACE(std)string, int > >, false > >::_Node >;
>
> and the message is like this:
>
> f:\tools\antlr-20030612\lib\cpp\antlr\charscanner.hpp(81) : error C2039:
> '_Tree_nod' : is not a member of 'std'
>
> followed by others which I think are related to the above mentioned.
>
> Any clues? Has anybody created the static library with the dev snapshot?
> My setup is MSVC 6 sp5.

Please give some more information about how you created the project. E.g.
which defines did you pass? Which target etc. Am I guessing right that you
have ANTLR_EXPORTS defined ? If you're trying to make a static lib then
don't define the ANTLR_EXPORTS/IMPORTS and other DLL centric stuff things.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Innovation makes enemies of all those who prospered under the old
   regime, and only lukewarm support is forthcoming from those who would
               prosper under the new. --- Niccol? Machiavelli


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From j_scandaliaris at yahoo.es  Fri Jun 13 05:47:58 2003
From: j_scandaliaris at yahoo.es (Jorge Scandaliaris)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] ANNOUNCE: new development snapshot
In-Reply-To: <20030613135935.B4167@cs.utwente.nl>
Message-ID: <000901c331aa$08ff5b60$03001aac@zoys>

Ric,
I will try to give you as much info as I can. Basically I just created a
static library project, added the files, added path to include files,
disabled precompiled headers, enabled RTTI and hit build. By default
MSVC builds debug single threaded libraries, so that's what I am doing.
I compared the dev. version against the 2.7.2 release, and I see a bunch
of template declarations inside include directives (that are specific to
msvc). Many problems come from here (Maybe my setup is wrong, but I
think this is how I got the library going last time).
When I saw your post I thought the reason could be I had not defined
(_MSC_VER), but I did and nothing changes.
If in need I can send the workspace files, I guess every option is in
there.
I vace no ANTLR_IMPORTS nor ANTLR_EXPORTS defined, also I removed the
dll.cpp.

Let me know if sending extra info would help.

Jorge

PS: I add the project files, if they're useful we've saved some time :)

> -----Mensaje original-----
> De: Ric Klaren [mailto:klaren@cs.utwente.nl]
> Enviado el: viernes, 13 de junio de 2003 14:00
> Para: antlr-interest@yahoogroups.com
> Asunto: Re: [antlr-interest] ANNOUNCE: new development snapshot
> 
> Hi,
> 
> On Fri, Jun 13, 2003 at 01:29:57PM +0200, Jorge Scandaliaris wrote:
> > 	I followed the instructions on the README, but the compiler
> > comes up with more than a thousand messages.
> > 	It's complaining a lot about things like this (can't avoid the
> > wrap up) :
> >
> > template class  ANTLR_API ANTLR_USE_NAMESPACE(std)allocator<
> > ANTLR_USE_NAMESPACE(std)_Tree_nod<
ANTLR_USE_NAMESPACE(std)_Tmap_traits<
> > ANTLR_USE_NAMESPACE(std)string, int, CharScannerLiteralsLess,
> > ANTLR_USE_NAMESPACE(std)allocator< ANTLR_USE_NAMESPACE(std)pair<
const
> > ANTLR_USE_NAMESPACE(std)string, int > >, false > >::_Node >;
> >
> > and the message is like this:
> >
> > f:\tools\antlr-20030612\lib\cpp\antlr\charscanner.hpp(81) : error
C2039:
> > '_Tree_nod' : is not a member of 'std'
> >
> > followed by others which I think are related to the above mentioned.
> >
> > Any clues? Has anybody created the static library with the dev
snapshot?
> > My setup is MSVC 6 sp5.
> 
> Please give some more information about how you created the project.
E.g.
> which defines did you pass? Which target etc. Am I guessing right that
you
> have ANTLR_EXPORTS defined ? If you're trying to make a static lib
then
> don't define the ANTLR_EXPORTS/IMPORTS and other DLL centric stuff
things.
> 
> Cheers,
> 
> Ric
> --
>
-----+++++*****************************************************+++++++++
--
> -----
>     ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722
----
>
-----+++++*****************************************************+++++++++
--
> -----
>      Innovation makes enemies of all those who prospered under the old
>    regime, and only lukewarm support is forthcoming from those who
would
>                prosper under the new. --- Niccol? Machiavelli
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: antlr_msvc.zip
Type: application/octet-stream
Size: 3590 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20030613/f00c2832/antlr_msvc.obj
From klaren at cs.utwente.nl  Fri Jun 13 06:01:03 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] ANNOUNCE: new development snapshot
In-Reply-To: <000901c331aa$08ff5b60$03001aac@zoys>; from j_scandaliaris@yahoo.es on Fri, Jun 13, 2003 at 02:47:58PM +0200
References: <20030613135935.B4167@cs.utwente.nl> <000901c331aa$08ff5b60$03001aac@zoys>
Message-ID: <20030613150103.E4167@cs.utwente.nl>

Hi,

On Fri, Jun 13, 2003 at 02:47:58PM +0200, Jorge Scandaliaris wrote:
> I will try to give you as much info as I can. Basically I just created a
> static library project, added the files, added path to include files,
> disabled precompiled headers, enabled RTTI and hit build. By default
> MSVC builds debug single threaded libraries, so that's what I am doing.
> I compared the dev. version against the 2.7.2 release, and I see a bunch
> of template declarations inside include directives (that are specific to
> msvc). Many problems come from here (Maybe my setup is wrong, but I
> think this is how I got the library going last time).
> When I saw your post I thought the reason could be I had not defined
> (_MSC_VER), but I did and nothing changes.
> If in need I can send the workspace files, I guess every option is in
> there.
> I vace no ANTLR_IMPORTS nor ANTLR_EXPORTS defined, also I removed the
> dll.cpp.

Okay this all sounds like 'The Right Way'(tm). These template directives
are then MSVC7 centric. I already thought they was a bit funny as I got the
patch for them, since I tried those standard compliant template
instantiations in the time I still had easy access to MSVC6. So they
probably need to be out #ifdef'ed for MSVC6. I have no idea what arcane
dealings are needed to do that. Probably your MSVC manual can help you
there. Let me know what it is and I add #ifdefs for the next snapshot. In
the past MSVC6 worked for the static build so I at least want to get that
back to work.

Thanks for the feedback!

Ric

PS I have no easy access to MSVC6 so I cannot help/test very much
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Innovation makes enemies of all those who prospered under the old
   regime, and only lukewarm support is forthcoming from those who would
               prosper under the new. --- Niccol? Machiavelli

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From j_scandaliaris at yahoo.es  Fri Jun 13 06:27:27 2003
From: j_scandaliaris at yahoo.es (Jorge Scandaliaris)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] ANNOUNCE: new development snapshot
In-Reply-To: <20030613150103.E4167@cs.utwente.nl>
Message-ID: <001001c331af$8d6dffa0$03001aac@zoys>

Hummm, I am not sure I understand what you mean. I am only a few months
old in C++ (and not full time...) so I tend to get lost. If you are more
precise about what's needed I might be able to come up with something...

Jorge

> -----Mensaje original-----
> De: Ric Klaren [mailto:klaren@cs.utwente.nl]
> Enviado el: viernes, 13 de junio de 2003 15:01
> Para: antlr-interest@yahoogroups.com
> Asunto: Re: [antlr-interest] ANNOUNCE: new development snapshot
> 
> Hi,
> 
> On Fri, Jun 13, 2003 at 02:47:58PM +0200, Jorge Scandaliaris wrote:
> > I will try to give you as much info as I can. Basically I just
created a
> > static library project, added the files, added path to include
files,
> > disabled precompiled headers, enabled RTTI and hit build. By default
> > MSVC builds debug single threaded libraries, so that's what I am
doing.
> > I compared the dev. version against the 2.7.2 release, and I see a
bunch
> > of template declarations inside include directives (that are
specific to
> > msvc). Many problems come from here (Maybe my setup is wrong, but I
> > think this is how I got the library going last time).
> > When I saw your post I thought the reason could be I had not defined
> > (_MSC_VER), but I did and nothing changes.
> > If in need I can send the workspace files, I guess every option is
in
> > there.
> > I vace no ANTLR_IMPORTS nor ANTLR_EXPORTS defined, also I removed
the
> > dll.cpp.
> 
> Okay this all sounds like 'The Right Way'(tm). These template
directives
> are then MSVC7 centric. I already thought they was a bit funny as I
got
> the
> patch for them, since I tried those standard compliant template
> instantiations in the time I still had easy access to MSVC6. So they
> probably need to be out #ifdef'ed for MSVC6. I have no idea what
arcane
> dealings are needed to do that. Probably your MSVC manual can help you
> there. Let me know what it is and I add #ifdefs for the next snapshot.
In
> the past MSVC6 worked for the static build so I at least want to get
that
> back to work.
> 
> Thanks for the feedback!
> 
> Ric
> 
> PS I have no easy access to MSVC6 so I cannot help/test very much
> --
>
-----+++++*****************************************************+++++++++
--
> -----
>     ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722
----
>
-----+++++*****************************************************+++++++++
--
> -----
>      Innovation makes enemies of all those who prospered under the old
>    regime, and only lukewarm support is forthcoming from those who
would
>                prosper under the new. --- Niccol? Machiavelli
> 
> 
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Fri Jun 13 06:33:16 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] ANNOUNCE: new development snapshot
In-Reply-To: <001001c331af$8d6dffa0$03001aac@zoys>; from j_scandaliaris@yahoo.es on Fri, Jun 13, 2003 at 03:27:27PM +0200
References: <20030613150103.E4167@cs.utwente.nl> <001001c331af$8d6dffa0$03001aac@zoys>
Message-ID: <20030613153316.G4167@cs.utwente.nl>

On Fri, Jun 13, 2003 at 03:27:27PM +0200, Jorge Scandaliaris wrote:
> Hummm, I am not sure I understand what you mean. I am only a few months
> old in C++ (and not full time...) so I tend to get lost. If you are more
> precise about what's needed I might be able to come up with something...

Ack. Could you try if it works if you comment the template stuff out ?

E.g. the explicit instantiations guarded by the:

#if defined(_MSC_VER) && !defined(__ICL) // Microsoft Visual C++
<stuff>
#endif

If that works then I need to know how to identify each MSVC version with
probably the _MSC_VER define. So I can disable the explicit instantiations
for MSVC6 and enable them for MSVC7.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Why don't we just invite them to dinner and massacre them all when they're
  drunk? You heard the man. There's seven hundred thousand of them. Ah? ..
           So it'd have to be something simple with pasta, then.
                 From: Interesting Times by Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mtiller at ford.com  Fri Jun 13 08:32:31 2003
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Simple Question
Message-ID: <AF02884D0976D311A014009027A8F1FB1FD54EC5@na1fcm10.dearborn.ford.com>

As usual, I'm struggling with the best way to structure my AST processing.  I followed the example from the GCC parser and create my own nodes, e.g.:
 
modelica_file
    : (within_clause)? (("final")? class_definition SEMI!)* EOF!
        { ## = #([FILE, "FILE"], ##); }
    ;

 
Note, specifically, the use of "#([FILE, "FILE"], ...)"
 
Now I'd like to use my own AST class for this node so I can associate additional "meta" information (i.e. data that gets generated as I make a few passes over the tree).  My personal preference is to have specific classes for each AST node.  I know you can do it in a generic way, but it just doesn't feel right to me.
 
OK, enough on that, here is the issue.  My token section looks like this:
 
tokens {
    FILE<AST=FileNode>; DECLARATION; DEFINITION; FUNCTION_CALL; TYPE;
   ...
}
 
Note the "File<AST=FileNode>..." part.
 
I would have thought that the combination of defining this special token (and the custom AST that goes with it) along with the tree construction shorthand would have created an appropriate "initialFactory" method for my parser that would have mapped a FILE token to a FileNode.  This doesn't happen.  It appears that ANTLR doesn't do this automatically for these "synthetic" tokens (ones that do not originate from the lexer).
 
So, is my assessment correct (i.e. this feature doesn't work with synthetic nodes...of which I have *many*).  Or am I doing something wrong?
 
--
Mike
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030613/a81ac8ce/attachment.html
From mahesh_monu at yahoo.com  Fri Jun 13 10:11:47 2003
From: mahesh_monu at yahoo.com (mahesh_monu)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Tree to File
Message-ID: <bcd0kj+orko@eGroups.com>

How to write a Tree into a file i.e how to store a tree into a file. 




my tree is




class NX extends TreeParser;


/** some variables */




how to write this tree into the file and store it



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Fri Jun 13 10:14:01 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Tree to File
In-Reply-To: <bcd0kj+orko@eGroups.com>
Message-ID: <20030613171401.51113.qmail@web20419.mail.yahoo.com>

You could store the String representations of the tree
using the toString* methods on the AST.  If you want
to store your tree in some other format, your
TreeParser will have to know what to output for each
node it encounters in the tree.

-Matt

--- mahesh_monu <mahesh_monu@yahoo.com> wrote:
> How to write a Tree into a file i.e how to store a
> tree into a file. 
> 
> 
> 
> 
> my tree is
> 
> 
> 
> 
> class NX extends TreeParser;
> 
> 
> /** some variables */
> 
> 
> 
> 
> how to write this tree into the file and store it
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
http://calendar.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri Jun 13 10:16:18 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Tree to File
Message-ID: <72C9789739C4214096AE945753B11EA32A5D52@mypxmail04.bco-home.com>

Also it can be serialized to XML.

http://www.antlr.org/doc/trees.html#AST%20Serialization

-----Original Message-----
From: Matt Benson [mailto:gudnabrsam@yahoo.com] 
Sent: Friday, June 13, 2003 10:14 AM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] Tree to File


You could store the String representations of the tree
using the toString* methods on the AST.  If you want
to store your tree in some other format, your
TreeParser will have to know what to output for each
node it encounters in the tree.

-Matt

--- mahesh_monu <mahesh_monu@yahoo.com> wrote:
> How to write a Tree into a file i.e how to store a
> tree into a file.
> 
> 
> 
> 
> my tree is
> 
> 
> 
> 
> class NX extends TreeParser;
> 
> 
> /** some variables */
> 
> 
> 
> 
> how to write this tree into the file and store it
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
> 
> 


__________________________________
Do you Yahoo!?
Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
http://calendar.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From j_scandaliaris at yahoo.es  Fri Jun 13 10:29:07 2003
From: j_scandaliaris at yahoo.es (Jorge Scandaliaris)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Development snapshot pb
Message-ID: <000001c331d1$4f5b5f60$03001aac@zoys>

Ric,

            Although I got to compile the library, I can get rid of some
compile errors. I tried some of the examples and the behavior is the
same. It says something about pure virtual functions not being defined
in parser.hpp:

virtual int LA(int i)=0;

virtual RefToken LT(int i)=0;

 

I had a look and they are not defined in parser.cpp, only in
LLkParserparser. Any ideas?

 

Here are the details (from building expr example):

 

Deleting intermediate files and output files for project 'expr - Win32
Debug'.

--------------------Configuration: expr - Win32
Debug--------------------

Compiling...

main.cpp

f:\devel\antlr\cpp\expr\main.cpp(54) : error C2259: 'MyExprParser' :
cannot instantiate abstract class due to following members:

        f:\devel\antlr\cpp\expr\myexprparser.hpp(11) : see declaration
of 'MyExprParser'

f:\devel\antlr\cpp\expr\main.cpp(54) : warning C4259: 'int __thiscall
antlr::Parser::LA(int)' : pure virtual function was not defined

        f:\tools\antlr-2.7.2dev\lib\cpp\antlr\parser.hpp(74) : see
declaration of 'LA'

f:\devel\antlr\cpp\expr\main.cpp(54) : warning C4259: 'class
antlr::RefCount<class antlr::Token> __thiscall antlr::Parser::LT(int)' :
pure virtual function was not defined

        f:\tools\antlr-2.7.2dev\lib\cpp\antlr\parser.hpp(77) : see
declaration of 'LT'

f:\devel\antlr\cpp\expr\main.cpp(54) : error C2259: 'MyExprParser' :
cannot instantiate abstract class due to following members:

        f:\devel\antlr\cpp\expr\myexprparser.hpp(11) : see declaration
of 'MyExprParser'

f:\devel\antlr\cpp\expr\main.cpp(54) : warning C4259: 'int __thiscall
antlr::Parser::LA(int)' : pure virtual function was not defined

        f:\tools\antlr-2.7.2dev\lib\cpp\antlr\parser.hpp(74) : see
declaration of 'LA'

f:\devel\antlr\cpp\expr\main.cpp(54) : warning C4259: 'class
antlr::RefCount<class antlr::Token> __thiscall antlr::Parser::LT(int)' :
pure virtual function was not defined

        f:\tools\antlr-2.7.2dev\lib\cpp\antlr\parser.hpp(77) : see
declaration of 'LT'

MyExprLexer.cpp

MyExprParser.cpp

print_tree.cpp

Generating Code...

Error executing cl.exe.

 

expr.exe - 2 error(s), 4 warning(s)

 

Jorge

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030613/837dc31c/attachment.html
From monaabs at yahoo.com  Fri Jun 13 11:37:39 2003
From: monaabs at yahoo.com (monaabs)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] crash in 2.7.2
Message-ID: <bcd5lj+rccj@eGroups.com>

Hi , 
My application is crashing on this statement 
   astFactory->addASTChild(currentAST, n_AST);
The SQL_Parser.cpp looks like this 

void SQL_Parser::r_QNamePart() {
	returnAST = ANTLR_USE_NAMESPACE(antlr)nullAST;
	ANTLR_USE_NAMESPACE(antlr)ASTPair currentAST;
	ANTLR_USE_NAMESPACE(antlr)RefAST r_QNamePart_AST = 
ANTLR_USE_NAMESPACE(antlr)nullAST;
	ANTLR_USE_NAMESPACE(antlr)RefToken  n = ANTLR_USE_NAMESPACE
(antlr)nullToken;
	ANTLR_USE_NAMESPACE(antlr)RefAST n_AST = ANTLR_USE_NAMESPACE
(antlr)nullAST;
	
	n = LT(1);
	if ( inputState->guessing == 0 ) {
		n_AST = astFactory->create(n);
		astFactory->addASTChild(currentAST, n_AST);
	}

The astFactory seems to have a value of 0x0000ffff. why would this 
happen ? 

To compile the lib , i used ANTLR_EXPORTS in my project settings .. 
is this a reason for crash ?

Regards
Mona


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From andrei at metalanguage.com  Fri Jun 13 17:16:32 2003
From: andrei at metalanguage.com (uprightness_of_character)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Multiple inheritance for a parser?
Message-ID: <bcdph0+n7ac@eGroups.com>

It would be convenient for me to have my (C++) parser class inherit 
multiply, because it's a parser and also a token stream at the same 
time. Any way I can specify that? I tried

class MacroProcessor2 extends Parser, antlr::TokenStream;


didn't work.

Andrei


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From andrei at metalanguage.com  Fri Jun 13 17:59:48 2003
From: andrei at metalanguage.com (uprightness_of_character)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] RESOLVED: Multiple inheritance for a parser?
In-Reply-To: <bcdph0+n7ac@eGroups.com>
Message-ID: <bcds24+rtve@eGroups.com>

Found classHeaderSuffix in options.

Andrei


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From andrei at metalanguage.com  Sat Jun 14 00:30:01 2003
From: andrei at metalanguage.com (uprightness_of_character)
Date: Mon Dec 20 16:15:42 2004
Subject: [antlr-interest] Suggestion: syntactic sugar for generateAmbigWarnings = false;
Message-ID: <bceitp+rnn0@eGroups.com>

I have a number of rules in which the first rule that matches is the 
one that's needed, and there's a final match for "everything else". In 
a nutshell => generateAmbigWarnings = false. 

For example, consider you write a C-style preprocessor, and you 
generate the code to get a macro argument.

The idea is, you need to read up to the first comma, but if there are 
parentheses, curly braces, or square brackets, you will pair them 
properly (commas are allowed inside). For example, "1 (2, a) 3" would 
be a proper argument. 

I came up with the following rule:

fetch_macro_argument
    : 
    (
        balanced_pars 
        | balanced_curlz
        | balanced_squares
        | tok:~(COMMA | LPAR | LCURL | LSQUARE)
    )*
    ;
    
So, a macro argument can consist of a mixture of the following items - 
any set of balanced parens, any set of balanced curly braces, any set 
of balanced square brackets, or anything else that's not a comma.

Now I could have written this as:

fetch_macro_argument
    : 
    (options { generateAmbigWarnings = false; } 
        : balanced_pars 
        | balanced_curlz
        | balanced_squares
        | tok:~COMMA)
    )*
    ;

(Let me make a remark en passent, the most efficient code is actually 
generated for the following:

fetch_macro_argument
    : 
    (options { generateAmbigWarnings = false; } 
        : balanced_pars 
        | balanced_curlz
        | balanced_squares
        | { LA(1) != COMMA}? tok:.)
    )*
    ;

But that's subject of another discussion.)

So anyway, I have two variants to choose from, and they are both more 
verbose than I'd like. I'd like to propose defining the operator "||" 
(as opposed to "|") to combine "short-circuit" rules - rules that obey 
the "first wins" policy.

The notation is nicely consistent with the semantics of the "||" 
operator, where the first condition that's true stops evaluation. 
Also, the precedence would be lower that that of "||" - and that makes 
sense for the grammar, because most of the time you want to match some 
discriminating rules, followed by a more general one.

With that hypothetical operator I could write my rule simply as:

fetch_macro_argument
    : 
    (
        balanced_pars 
        | balanced_curlz
        | balanced_squares
        || tok:~COMMA
    )*
    ;

Whaddaya think?


Andrei


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Sat Jun 14 00:28:29 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Re: crash in 2.7.2
In-Reply-To: <bcd5lj+rccj@eGroups.com>
Message-ID: <bceiqt+mqfk@eGroups.com>

Mona--

AST factory initialization has changed in 2.7.2, and this looks like 
you have tripped over that.  At a guess, you have a custom 
constructor for your parser and haven't spliced in the AST factory 
initialization code.

Ric Klaren can probably clarify--I can't find the initialization 
code from just browsing the C++ support stuff.

--Loring


--- In antlr-interest@yahoogroups.com, "monaabs" <monaabs@y...> 
wrote:
> Hi , 
> My application is crashing on this statement 
>    astFactory->addASTChild(currentAST, n_AST);
> The SQL_Parser.cpp looks like this 
> 
> void SQL_Parser::r_QNamePart() {
> 	returnAST = ANTLR_USE_NAMESPACE(antlr)nullAST;
> 	ANTLR_USE_NAMESPACE(antlr)ASTPair currentAST;
> 	ANTLR_USE_NAMESPACE(antlr)RefAST r_QNamePart_AST = 
> ANTLR_USE_NAMESPACE(antlr)nullAST;
> 	ANTLR_USE_NAMESPACE(antlr)RefToken  n = ANTLR_USE_NAMESPACE
> (antlr)nullToken;
> 	ANTLR_USE_NAMESPACE(antlr)RefAST n_AST = ANTLR_USE_NAMESPACE
> (antlr)nullAST;
> 	
> 	n = LT(1);
> 	if ( inputState->guessing == 0 ) {
> 		n_AST = astFactory->create(n);
> 		astFactory->addASTChild(currentAST, n_AST);
> 	}
> 
> The astFactory seems to have a value of 0x0000ffff. why would this 
> happen ? 
> 
> To compile the lib , i used ANTLR_EXPORTS in my project 
settings .. 
> is this a reason for crash ?
> 
> Regards
> Mona


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From spamjunk at stny.rr.com  Sat Jun 14 07:28:50 2003
From: spamjunk at stny.rr.com (DrXenos)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Re: crash in 2.7.2
In-Reply-To: <bcd5lj+rccj@eGroups.com>
Message-ID: <bcfbf2+csrl@eGroups.com>

This is the same problem I have been having for months, and can't seem
to resolve.

--- In antlr-interest@yahoogroups.com, "monaabs" <monaabs@y...> wrote:
> Hi , 
> My application is crashing on this statement 
>    astFactory->addASTChild(currentAST, n_AST);
> The SQL_Parser.cpp looks like this 
> 
> void SQL_Parser::r_QNamePart() {
> 	returnAST = ANTLR_USE_NAMESPACE(antlr)nullAST;
> 	ANTLR_USE_NAMESPACE(antlr)ASTPair currentAST;
> 	ANTLR_USE_NAMESPACE(antlr)RefAST r_QNamePart_AST = 
> ANTLR_USE_NAMESPACE(antlr)nullAST;
> 	ANTLR_USE_NAMESPACE(antlr)RefToken  n = ANTLR_USE_NAMESPACE
> (antlr)nullToken;
> 	ANTLR_USE_NAMESPACE(antlr)RefAST n_AST = ANTLR_USE_NAMESPACE
> (antlr)nullAST;
> 	
> 	n = LT(1);
> 	if ( inputState->guessing == 0 ) {
> 		n_AST = astFactory->create(n);
> 		astFactory->addASTChild(currentAST, n_AST);
> 	}
> 
> The astFactory seems to have a value of 0x0000ffff. why would this 
> happen ? 
> 
> To compile the lib , i used ANTLR_EXPORTS in my project settings .. 
> is this a reason for crash ?
> 
> Regards
> Mona


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From spamjunk at stny.rr.com  Sat Jun 14 07:44:27 2003
From: spamjunk at stny.rr.com (DrXenos)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Re: segmentation fault with AST
In-Reply-To: <20030519095121.A26201@cs.utwente.nl>
Message-ID: <bcfccb+a6fa@eGroups.com>

Thank you; thank you; thank you!  That was it.  I must have read the
docs 100 times, and missed it everytime.

Ric, you are a life saver.

Regards,

Rich Herrick

--- In antlr-interest@yahoogroups.com, Ric Klaren <klaren@c...> wrote:
> Hi,
> 
> On Sat, May 17, 2003 at 12:55:14PM -0000, DrXenos wrote:
> > I hope someone can tell me what I am doing wrong.  My antlr
> > parser works fine unless I set the "buildAST=true" option.  With this
> > option on, it will segmentation fault on a call to
> > astFactory->create(LT(1)).
> 
> Did you set the astFactory ?
> 
> E.g. as in the exprAST example in examples/cpp/exprAST:
> 
> ASTFactory my_factory;
> ExprLexer lexer(cin);
> ExprParser parser(lexer);
> 
> parser.initializeASTFactory(my_factory);
> parser.setASTFactory(&my_factory);
> 
> parser.expr();
> 
> > I have built and tried it using mingw (gcc 3.2) and djgpp (gcc 3.2.2).
> >  I don't know if I just built it wrong, or am not including something
> > in the grammer file that I need to.  I'm using Windows so I can't run
> > the configure script, so I don't know if I am building antlr wrong
> > (everything but this seems to work fine).
> 
> Building the lib should not be a problem manually. There's nothing fancy
> needed actually. Gcc 3.2.2 I have not tried myself but with 3.2.3 it
works
> (and with 3.2.1).
> 
> Cheers,
> 
> Ric
> --
>
-----+++++*****************************************************+++++++++-------
>     ---- Ric Klaren ----- j.klaren@u... ----- +31 53 4893722  ----
>
-----+++++*****************************************************+++++++++-------
>   "I don't have anything against Java - it's the best damn
implementation
>               of UCSD Pascal ever released..." --- Larry Smith


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From spamjunk at stny.rr.com  Sat Jun 14 07:45:50 2003
From: spamjunk at stny.rr.com (DrXenos)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Re: crash in 2.7.2
In-Reply-To: <bcfbf2+csrl@eGroups.com>
Message-ID: <bcfceu+3snq@eGroups.com>

Please ignore.  My problem was indeed a different cause, and is solved.

Reagrds,

Rich Herrick


--- In antlr-interest@yahoogroups.com, "DrXenos" <spamjunk@s...> wrote:
> This is the same problem I have been having for months, and can't seem
> to resolve.
> 
> --- In antlr-interest@yahoogroups.com, "monaabs" <monaabs@y...> wrote:
> > Hi , 
> > My application is crashing on this statement 
> >    astFactory->addASTChild(currentAST, n_AST);
> > The SQL_Parser.cpp looks like this 
> > 
> > void SQL_Parser::r_QNamePart() {
> > 	returnAST = ANTLR_USE_NAMESPACE(antlr)nullAST;
> > 	ANTLR_USE_NAMESPACE(antlr)ASTPair currentAST;
> > 	ANTLR_USE_NAMESPACE(antlr)RefAST r_QNamePart_AST = 
> > ANTLR_USE_NAMESPACE(antlr)nullAST;
> > 	ANTLR_USE_NAMESPACE(antlr)RefToken  n = ANTLR_USE_NAMESPACE
> > (antlr)nullToken;
> > 	ANTLR_USE_NAMESPACE(antlr)RefAST n_AST = ANTLR_USE_NAMESPACE
> > (antlr)nullAST;
> > 	
> > 	n = LT(1);
> > 	if ( inputState->guessing == 0 ) {
> > 		n_AST = astFactory->create(n);
> > 		astFactory->addASTChild(currentAST, n_AST);
> > 	}
> > 
> > The astFactory seems to have a value of 0x0000ffff. why would this 
> > happen ? 
> > 
> > To compile the lib , i used ANTLR_EXPORTS in my project settings .. 
> > is this a reason for crash ?
> > 
> > Regards
> > Mona


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From j_scandaliaris at yahoo.es  Sun Jun 15 01:57:44 2003
From: j_scandaliaris at yahoo.es (Jorge Scandaliaris)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] _MSC_VER ATTN Ric Klaren
Message-ID: <000201c3331c$34353930$03001aac@zoys>

Ric,
        I came across this while searching for some stuff about the
preprocessor:
	_MSC_VER: Defines the compiler version. Defined as 1200 for
Microsoft Visual C++ 6.0. Always defined. (from MSDN October 2001)
	
	However, in ANTLR it is used MSVC_VER ???
	
Jorge

       



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From j_scandaliaris at yahoo.es  Sun Jun 15 04:26:35 2003
From: j_scandaliaris at yahoo.es (Jorge Scandaliaris)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] manual AST construction: what am I doing wrong?
Message-ID: <000801c33330$feeede60$03001aac@zoys>

Hi,
	How can I generate for a rule a single AST node, using manual
tree construction? 
	I have created created a custom AST class. I have defined the
option ASTLabelType = "RefMyAST";	It is sort of working. I say
this 'cause I came over some issues and I am not sure if it is ANTLR'
expected behaviour or I did something wrong.
	I am doing a special use of AST, basically I am not going to
walk my tree, I just use the nodes as "supertokens" that can hold the
information I collect while parsing. 
	In view of this I decided that I don't need to generate all the
nodes corresponding to all sub rules, but that I only need the node
corresponding to the rule.
	I tried using ! at the rule and sub rules levels, but here is
where problems appear. If I use say:
rule!
: .....
{ ## = #[##];
  #->addSrc(...); // addSrc() is defined for MyAST
}
I have a run-time error in addSrc(). I think this is due to a missing
astFactory->addChild(...)in the generated code compared to when
automatic AST building is done (what is the purpose of this anyway? And
why it is only there for automatic tree building?). 
I tried also to suffix all sub rules but one, leaving automatic tree
construction on. This works, but it has two bad points: 
1. The node for the rule is created from the sub rule I didn't suffix,
including the information it carries (which I might not want). That
forces me to "reset" the node before putting in it the info I want.
2. In some rules say 
	rule: (sub_rule)* 
or
	rule: (sub_rule)+
I am forced to change the grammar so as to create only one AST node,
adding complexity and loosing the readability that characterizes antlr
grammars.

Please, if someone can enlighten me on this, or point me to some
resources (I didn't find a lot). Maybe I got the semantics of AST
completely wrong?

Thanks,

Jorge




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From xeenman at yahoo.com  Sun Jun 15 19:47:33 2003
From: xeenman at yahoo.com (William Lam)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] error messages
Message-ID: <bcjb45+v5s2@eGroups.com>

Hi all,

I have a grammar file with rules such as

rule : "order" "by" literal ( COMMA literal)*;

The issue is that when i have invalid input such as 'ORDER BY',
i get an exception with the message "unexpected token: null"

Is there any way to get better error messages?  such as
'error near ORDER BY'?

I was looking through the exception handling document in the antlr 
web site.  Is it expected that I put an Exception catch block at the
end of each rule?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Mon Jun 16 01:49:14 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Re 2.7.2 JDK query
In-Reply-To: <bcanbo+crv1@eGroups.com>; from monaabs@yahoo.com on Thu, Jun 12, 2003 at 08:21:12PM -0000
References: <bcanbo+crv1@eGroups.com>
Message-ID: <20030616104914.B692@cs.utwente.nl>

On Thu, Jun 12, 2003 at 08:21:12PM -0000, monaabs wrote:
> Which files do i have to compile using java . (Is it the .g files).
> Whats the command to compile?

Check out install.html in the distribution.

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Wo das Chaos auf die Ordnung trifft, gewinnt meist das Chaos, weil es
  besser organisiert ist. --- Friedrich Nietzsche


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Mon Jun 16 07:43:40 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] manual AST construction: what am I doing wrong?
In-Reply-To: <000801c33330$feeede60$03001aac@zoys>; from j_scandaliaris@yahoo.es on Sun, Jun 15, 2003 at 01:26:35PM +0200
References: <000801c33330$feeede60$03001aac@zoys>
Message-ID: <20030616164340.F692@cs.utwente.nl>

On Sun, Jun 15, 2003 at 01:26:35PM +0200, Jorge Scandaliaris wrote:
> 	How can I generate for a rule a single AST node, using manual
> tree construction?

In a nutshell:

myrule ! : st:SOME_TOKEN
{ ## = #([MY_IMAG_AST_NODE, st->getText()]);
  ##->setSomeAttrib( sumthin );
}
;

Alternatively you can also use #myrule in stead of ##.

> 	I have created created a custom AST class. I have defined the
> option ASTLabelType = "RefMyAST";	It is sort of working. I say
> this 'cause I came over some issues and I am not sure if it is ANTLR'
> expected behaviour or I did something wrong.

> 	In view of this I decided that I don't need to generate all the
> nodes corresponding to all sub rules, but that I only need the node
> corresponding to the rule.
> 	I tried using ! at the rule and sub rules levels, but here is
> where problems appear. If I use say:
> rule!
> : .....
> { ## = #[##];
>   #->addSrc(...); // addSrc() is defined for MyAST
> }
> I have a run-time error in addSrc(). I think this is due to a missing
> astFactory->addChild(...)in the generated code compared to when
> automatic AST building is done (what is the purpose of this anyway? And
> why it is only there for automatic tree building?).

The addChild stuff is used to generate the tree e.g. to link sibling/child
nodes together. If you turn it off you have to do this manually via the
#( .. ) syntax. If you have rules with multiple parts which may return AST
trees you may have to label them and then put them together yourself.

e.g.

some_rule: p1:other_rule p2:ignore_rule p3:great_other_rule
{
   ## = #( #p1, #p3 ); // only link up p1 and p3
};

Hmmm lemme refer to this old post of Mike Barnett for some more stuff:

http://wwwhome.cs.utwente.nl/~klaren/antlr/treebuilding.txt

> Please, if someone can enlighten me on this, or point me to some
> resources (I didn't find a lot). Maybe I got the semantics of AST
> completely wrong?

There might be some jewels in the archives, maybe even still something
usefull in the FAQ site.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "You can't expect to wield supreme executive power just because some
   watery tot throws a sword at you!"
  --- Monty Python and the Holy Grail

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mtiller at ford.com  Mon Jun 16 07:58:43 2003
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] manual AST construction: what am I doing wro
	ng?
Message-ID: <AF02884D0976D311A014009027A8F1FB1FD54EC7@na1fcm10.dearborn.ford.com>

I wanted to point something out about this response...

> -----Original Message-----
> From: Ric Klaren [mailto:klaren@cs.utwente.nl]
> Subject: Re: [antlr-interest] manual AST construction: what am I doing wrong?
> 
> On Sun, Jun 15, 2003 at 01:26:35PM +0200, Jorge Scandaliaris wrote:
> > 	How can I generate for a rule a single AST node, using manual
> > tree construction?
> 
> In a nutshell:
> 
> myrule ! : st:SOME_TOKEN
> { ## = #([MY_IMAG_AST_NODE, st->getText()]);
>   ##->setSomeAttrib( sumthin );
> }
> ;

I think you need to be careful here.  As I pointed out in a question posted to this list (but never responded to), this does not work in certain cases (at least I couldn't get it to work).  The idea of having a line like:

##->setSomeAttribu(sumthin);

is to invoke a method on the custom AST node.  BUT, ANTLR will not generate an appropriate initializeASTFactory in some cases (see my previous note titled "Simple Question") and this would then fail.

I'm not saying there is anything wrong with Ric's response, just that it should come with some caveats about making sure that the "#([My_IMAG_AST_NODE...])" construct is truly generating the appropriate node type.

Jorge seems to be using a single AST type so this wouldn't appear trigger the issue I reported, but without a complete example of his grammar, you never know.

--
Mike

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From j_scandaliaris at yahoo.es  Mon Jun 16 07:59:29 2003
From: j_scandaliaris at yahoo.es (Jorge Scandaliaris)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] manual AST construction: what am I doing wrong?
In-Reply-To: <20030616164340.F692@cs.utwente.nl>
Message-ID: <000301c33417$e7ca41b0$03001aac@zoys>

Ric,
	Thanks!, I was close after trying all possibilities I could
imagine but missed it.
	I got to try this out :) 

Jorge  
> -----Original Message-----
> From: Ric Klaren [mailto:klaren@cs.utwente.nl]
> Sent: Monday, June 16, 2003 4:44 PM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] manual AST construction: what am I doing
> wrong?
> 
> On Sun, Jun 15, 2003 at 01:26:35PM +0200, Jorge Scandaliaris wrote:
> > 	How can I generate for a rule a single AST node, using manual
> > tree construction?
> 
> In a nutshell:
> 
> myrule ! : st:SOME_TOKEN
> { ## = #([MY_IMAG_AST_NODE, st->getText()]);
>   ##->setSomeAttrib( sumthin );
> }
> ;
> 
> Alternatively you can also use #myrule in stead of ##.
> 
> > 	I have created created a custom AST class. I have defined the
> > option ASTLabelType = "RefMyAST";	It is sort of working. I say
> > this 'cause I came over some issues and I am not sure if it is
ANTLR'
> > expected behaviour or I did something wrong.
> 
> > 	In view of this I decided that I don't need to generate all the
> > nodes corresponding to all sub rules, but that I only need the node
> > corresponding to the rule.
> > 	I tried using ! at the rule and sub rules levels, but here is
> > where problems appear. If I use say:
> > rule!
> > : .....
> > { ## = #[##];
> >   #->addSrc(...); // addSrc() is defined for MyAST
> > }
> > I have a run-time error in addSrc(). I think this is due to a
missing
> > astFactory->addChild(...)in the generated code compared to when
> > automatic AST building is done (what is the purpose of this anyway?
And
> > why it is only there for automatic tree building?).
> 
> The addChild stuff is used to generate the tree e.g. to link
sibling/child
> nodes together. If you turn it off you have to do this manually via
the
> #( .. ) syntax. If you have rules with multiple parts which may return
AST
> trees you may have to label them and then put them together yourself.
> 
> e.g.
> 
> some_rule: p1:other_rule p2:ignore_rule p3:great_other_rule
> {
>    ## = #( #p1, #p3 ); // only link up p1 and p3
> };
> 
> Hmmm lemme refer to this old post of Mike Barnett for some more stuff:
> 
> http://wwwhome.cs.utwente.nl/~klaren/antlr/treebuilding.txt
> 
> > Please, if someone can enlighten me on this, or point me to some
> > resources (I didn't find a lot). Maybe I got the semantics of AST
> > completely wrong?
> 
> There might be some jewels in the archives, maybe even still something
> usefull in the FAQ site.
> 
> Cheers,
> 
> Ric
> --
>
-----+++++*****************************************************+++++++++
--
> -----
>     ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722
----
>
-----+++++*****************************************************+++++++++
--
> -----
>   "You can't expect to wield supreme executive power just because some
>    watery tot throws a sword at you!"
>   --- Monty Python and the Holy Grail
> 
> 
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From j_scandaliaris at yahoo.es  Mon Jun 16 08:05:50 2003
From: j_scandaliaris at yahoo.es (Jorge Scandaliaris)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] manual AST construction: what am I doing wrong?
In-Reply-To: <AF02884D0976D311A014009027A8F1FB1FD54EC7@na1fcm10.dearborn.ford.com>
Message-ID: <000701c33418$cabeb0a0$03001aac@zoys>

Hi, 
Yes, I have a single AST type, but I was thinking in moving to
heterogeneous AST (I have defined my nodes to contain all info I could
possibly come across in the grammar, but they are 90% of the time left
empty). I guess for the moment I'll lose in efficiency until I get this
going, and more now that you point this out.
It seems it's no so common to use this approach, eh?

Jorge

> -----Original Message-----
> From: Tiller, Michael (M.M.) [mailto:mtiller@ford.com]
> Sent: Monday, June 16, 2003 4:59 PM
> To: 'antlr-interest@yahoogroups.com'
> Subject: RE: [antlr-interest] manual AST construction: what am I doing
> wrong?
> 
> I wanted to point something out about this response...
> 
> > -----Original Message-----
> > From: Ric Klaren [mailto:klaren@cs.utwente.nl]
> > Subject: Re: [antlr-interest] manual AST construction: what am I
doing
> wrong?
> >
> > On Sun, Jun 15, 2003 at 01:26:35PM +0200, Jorge Scandaliaris wrote:
> > > 	How can I generate for a rule a single AST node, using manual
> > > tree construction?
> >
> > In a nutshell:
> >
> > myrule ! : st:SOME_TOKEN
> > { ## = #([MY_IMAG_AST_NODE, st->getText()]);
> >   ##->setSomeAttrib( sumthin );
> > }
> > ;
> 
> I think you need to be careful here.  As I pointed out in a question
> posted to this list (but never responded to), this does not work in
> certain cases (at least I couldn't get it to work).  The idea of
having a
> line like:
> 
> ##->setSomeAttribu(sumthin);
> 
> is to invoke a method on the custom AST node.  BUT, ANTLR will not
> generate an appropriate initializeASTFactory in some cases (see my
> previous note titled "Simple Question") and this would then fail.
> 
> I'm not saying there is anything wrong with Ric's response, just that
it
> should come with some caveats about making sure that the
> "#([My_IMAG_AST_NODE...])" construct is truly generating the
appropriate
> node type.
> 
> Jorge seems to be using a single AST type so this wouldn't appear
trigger
> the issue I reported, but without a complete example of his grammar,
you
> never know.
> 
> --
> Mike
> 
> 
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Mon Jun 16 08:24:52 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Simple Question
In-Reply-To: <AF02884D0976D311A014009027A8F1FB1FD54EC5@na1fcm10.dearborn.ford.com>; from mtiller@ford.com on Fri, Jun 13, 2003 at 11:32:31AM -0400
References: <AF02884D0976D311A014009027A8F1FB1FD54EC7@na1fcm10.dearborn.ford.com> <AF02884D0976D311A014009027A8F1FB1FD54EC5@na1fcm10.dearborn.ford.com>
Message-ID: <20030616172452.G692@cs.utwente.nl>

Hi,

On Mon, Jun 16, 2003 at 10:58:43AM -0400, Tiller, Michael (M.M.) wrote:
> I wanted to point something out about this response...
>
> I think you need to be careful here.  As I pointed out in a question posted
> to this list (but never responded to), this does not work in certain cases
> (at least I couldn't get it to work).  The idea of having a line like:
>
> ##->setSomeAttribu(sumthin);
>
> is to invoke a method on the custom AST node.  BUT, ANTLR will not generate
> an appropriate initializeASTFactory in some cases (see my previous note
> titled "Simple Question") and this would then fail.

Good for reminding me. The original was still in my inbox.

On Fri, Jun 13, 2003 at 11:32:31AM -0400, Tiller, Michael (M.M.) wrote:
> As usual, I'm struggling with the best way to structure my AST processing.
> I followed the example from the GCC parser and create my own nodes, e.g.:
>
> modelica_file
>     : (within_clause)? (("final")? class_definition SEMI!)* EOF!
>         { ## = #([FILE, "FILE"], ##); }
>     ;
>
> Note, specifically, the use of "#([FILE, "FILE"], ...)"
>
> Now I'd like to use my own AST class for this node so I can associate
> additional "meta" information (i.e. data that gets generated as I make a
> few passes over the tree).  My personal preference is to have specific
> classes for each AST node.  I know you can do it in a generic way, but it
> just doesn't feel right to me.
>
> OK, enough on that, here is the issue.  My token section looks like this:
>
> tokens {
>     FILE<AST=FileNode>; DECLARATION; DEFINITION; FUNCTION_CALL; TYPE;
>    ...
> }
>
> Note the "File<AST=FileNode>..." part.
>
> I would have thought that the combination of defining this special token
> (and the custom AST that goes with it) along with the tree construction
> shorthand would have created an appropriate "initialFactory" method for my
> parser that would have mapped a FILE token to a FileNode.  This doesn't
> happen.  It appears that ANTLR doesn't do this automatically for these
> "synthetic" tokens (ones that do not originate from the lexer).
>
> So, is my assessment correct (i.e. this feature doesn't work with synthetic
> nodes...of which I have *many*).  Or am I doing something wrong?

Questions:

1) Which codegen? Java? C++? C#?
2) If C++ mode:
   - How do you set up/initalize the AST factories ?
   - Also related to initializations of lexer->parser->treeparser
     initialization and subsequent calls of
     initializeASTFactory calls ?
   - Which imaginary nodes do you define where?
   - You are building the lexer/parser/treeparsers in the right order?
   - Can you construct a small example demonstrating the problem?
3) If other mode: I'm innocent ;) (I hope :) )
   - seriously... also try to answer those questions under 2 :) Might be
     some differences in Java/C# mode. Ter did some stuff a bit different
     for Java than I did them in C++

On a more serious note, the stuff that garbles together the items for the
initializeFactory calls is pretty fragile. Not many people use the
heterogeneous AST stuff in C++ mode as well (is my impression, I'd expect
more questions/problems with it then).

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Wit is cultured insolence. --- Aristotle

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Mon Jun 16 08:39:52 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] manual AST construction: what am I doing wrong?
In-Reply-To: <000701c33418$cabeb0a0$03001aac@zoys>; from j_scandaliaris@yahoo.es on Mon, Jun 16, 2003 at 05:05:50PM +0200
References: <AF02884D0976D311A014009027A8F1FB1FD54EC7@na1fcm10.dearborn.ford.com> <000701c33418$cabeb0a0$03001aac@zoys>
Message-ID: <20030616173951.H692@cs.utwente.nl>

Hi,

On Mon, Jun 16, 2003 at 05:05:50PM +0200, Jorge Scandaliaris wrote:
> Yes, I have a single AST type, but I was thinking in moving to
> heterogeneous AST (I have defined my nodes to contain all info I could
> possibly come across in the grammar, but they are 90% of the time left
> empty). I guess for the moment I'll lose in efficiency until I get this
> going, and more now that you point this out.
> It seems it's no so common to use this approach, eh?

Heterogenous AST's are some of the more fragile things inside ANTLR. I
would like to use them maybe myself but I'd rather wait with that untill a
few things inside ANTLR are rewritten. The interface between antlr and the
module parsing the actions for the specific target language is not
something that would go for a software engineering award.

Also you can do a lot of things wrong depending on the layout of your
project. If you go with it be very aware of:

- How import/exportVocab work (and all the related caveats in build orders)
- How to register all node types with the astFactory and make sure all things
  use the same factory.
- How to read ANTLR's generated code (this never hurts) You may have to check
  the generated code for actions quite often to work around things 
  the action parser cannot see, and think of appropriate work arounds.
- Be aware of the restrictions on polymorphism and the use of reference
  counted AST's. Depending on what you do/want you may lose all the advantages
  of making something polymorphic.
- in short YMMV

Cheers,

Ric

PS personally I could (would like to maybe even) use heterogenous AST's in my
   project. But I don't. In Java mode it may work nice though. C# maybe too.
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Chaos is found in greatest abundance wherever order is being sought.
  --- Terry Pratchet

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon Jun 16 11:02:54 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Suggestion: syntactic sugar for generateAmbi
	gWarnings = false;
Message-ID: <72C9789739C4214096AE945753B11EA32A5D5F@mypxmail04.bco-home.com>

Seems like a good case for adding syntactic macros to ANTLR .g notation ;)

Monty

-----Original Message-----
From: uprightness_of_character [mailto:andrei@metalanguage.com] 
Sent: Saturday, June 14, 2003 12:30 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Suggestion: syntactic sugar for
generateAmbigWarnings = false;


I have a number of rules in which the first rule that matches is the 
one that's needed, and there's a final match for "everything else". In 
a nutshell => generateAmbigWarnings = false. 

For example, consider you write a C-style preprocessor, and you 
generate the code to get a macro argument.

The idea is, you need to read up to the first comma, but if there are 
parentheses, curly braces, or square brackets, you will pair them 
properly (commas are allowed inside). For example, "1 (2, a) 3" would 
be a proper argument. 

I came up with the following rule:

fetch_macro_argument
    : 
    (
        balanced_pars 
        | balanced_curlz
        | balanced_squares
        | tok:~(COMMA | LPAR | LCURL | LSQUARE)
    )*
    ;
    
So, a macro argument can consist of a mixture of the following items - 
any set of balanced parens, any set of balanced curly braces, any set 
of balanced square brackets, or anything else that's not a comma.

Now I could have written this as:

fetch_macro_argument
    : 
    (options { generateAmbigWarnings = false; } 
        : balanced_pars 
        | balanced_curlz
        | balanced_squares
        | tok:~COMMA)
    )*
    ;

(Let me make a remark en passent, the most efficient code is actually 
generated for the following:

fetch_macro_argument
    : 
    (options { generateAmbigWarnings = false; } 
        : balanced_pars 
        | balanced_curlz
        | balanced_squares
        | { LA(1) != COMMA}? tok:.)
    )*
    ;

But that's subject of another discussion.)

So anyway, I have two variants to choose from, and they are both more 
verbose than I'd like. I'd like to propose defining the operator "||" 
(as opposed to "|") to combine "short-circuit" rules - rules that obey 
the "first wins" policy.

The notation is nicely consistent with the semantics of the "||" 
operator, where the first condition that's true stops evaluation. 
Also, the precedence would be lower that that of "||" - and that makes 
sense for the grammar, because most of the time you want to match some 
discriminating rules, followed by a more general one.

With that hypothetical operator I could write my rule simply as:

fetch_macro_argument
    : 
    (
        balanced_pars 
        | balanced_curlz
        | balanced_squares
        || tok:~COMMA
    )*
    ;

Whaddaya think?


Andrei


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Mon Jun 16 11:06:48 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Suggestion: syntactic sugar for generateAmbi gWarnings = false;
In-Reply-To: <72C9789739C4214096AE945753B11EA32A5D5F@mypxmail04.bco-home.com>
Message-ID: <20030616180648.79253.qmail@web20421.mail.yahoo.com>

Monty, since I'm ignorant, will you explain that idea?

-Matt

--- mzukowski@yci.com wrote:
> Seems like a good case for adding syntactic macros
> to ANTLR .g notation ;)
> 
> Monty
> 
> -----Original Message-----
> From: uprightness_of_character
> [mailto:andrei@metalanguage.com] 
> Sent: Saturday, June 14, 2003 12:30 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Suggestion: syntactic
> sugar for
> generateAmbigWarnings = false;
> 
> 
> I have a number of rules in which the first rule
> that matches is the 
> one that's needed, and there's a final match for
> "everything else". In 
> a nutshell => generateAmbigWarnings = false. 
> 
> For example, consider you write a C-style
> preprocessor, and you 
> generate the code to get a macro argument.
> 
> The idea is, you need to read up to the first comma,
> but if there are 
> parentheses, curly braces, or square brackets, you
> will pair them 
> properly (commas are allowed inside). For example,
> "1 (2, a) 3" would 
> be a proper argument. 
> 
> I came up with the following rule:
> 
> fetch_macro_argument
>     : 
>     (
>         balanced_pars 
>         | balanced_curlz
>         | balanced_squares
>         | tok:~(COMMA | LPAR | LCURL | LSQUARE)
>     )*
>     ;
>     
> So, a macro argument can consist of a mixture of the
> following items - 
> any set of balanced parens, any set of balanced
> curly braces, any set 
> of balanced square brackets, or anything else that's
> not a comma.
> 
> Now I could have written this as:
> 
> fetch_macro_argument
>     : 
>     (options { generateAmbigWarnings = false; } 
>         : balanced_pars 
>         | balanced_curlz
>         | balanced_squares
>         | tok:~COMMA)
>     )*
>     ;
> 
> (Let me make a remark en passent, the most efficient
> code is actually 
> generated for the following:
> 
> fetch_macro_argument
>     : 
>     (options { generateAmbigWarnings = false; } 
>         : balanced_pars 
>         | balanced_curlz
>         | balanced_squares
>         | { LA(1) != COMMA}? tok:.)
>     )*
>     ;
> 
> But that's subject of another discussion.)
> 
> So anyway, I have two variants to choose from, and
> they are both more 
> verbose than I'd like. I'd like to propose defining
> the operator "||" 
> (as opposed to "|") to combine "short-circuit" rules
> - rules that obey 
> the "first wins" policy.
> 
> The notation is nicely consistent with the semantics
> of the "||" 
> operator, where the first condition that's true
> stops evaluation. 
> Also, the precedence would be lower that that of
> "||" - and that makes 
> sense for the grammar, because most of the time you
> want to match some 
> discriminating rules, followed by a more general
> one.
> 
> With that hypothetical operator I could write my
> rule simply as:
> 
> fetch_macro_argument
>     : 
>     (
>         balanced_pars 
>         | balanced_curlz
>         | balanced_squares
>         || tok:~COMMA
>     )*
>     ;
> 
> Whaddaya think?
> 
> 
> Andrei
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
SBC Yahoo! DSL - Now only $29.95 per month!
http://sbc.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon Jun 16 11:10:39 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Suggestion: syntactic sugar for generateAmbi
	 gWarnings = false;
Message-ID: <72C9789739C4214096AE945753B11EA32A5D61@mypxmail04.bco-home.com>

Macros that are aware of the syntax of the language so they aren't just
processing strings.  In antlr they could inspect their subrule and reason
about lookahead sets, for instance.

http://www.ai.mit.edu/~jrb/jse/
http://www.brics.dk/metafront/

Monty

-----Original Message-----
From: Matt Benson [mailto:gudnabrsam@yahoo.com] 
Sent: Monday, June 16, 2003 11:07 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Suggestion: syntactic sugar for generateAmbi
gWarnings = false;


Monty, since I'm ignorant, will you explain that idea?

-Matt

--- mzukowski@yci.com wrote:
> Seems like a good case for adding syntactic macros
> to ANTLR .g notation ;)
> 
> Monty
> 
> -----Original Message-----
> From: uprightness_of_character [mailto:andrei@metalanguage.com]
> Sent: Saturday, June 14, 2003 12:30 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Suggestion: syntactic
> sugar for
> generateAmbigWarnings = false;
> 
> 
> I have a number of rules in which the first rule
> that matches is the 
> one that's needed, and there's a final match for
> "everything else". In 
> a nutshell => generateAmbigWarnings = false. 
> 
> For example, consider you write a C-style
> preprocessor, and you 
> generate the code to get a macro argument.
> 
> The idea is, you need to read up to the first comma,
> but if there are 
> parentheses, curly braces, or square brackets, you
> will pair them 
> properly (commas are allowed inside). For example,
> "1 (2, a) 3" would 
> be a proper argument. 
> 
> I came up with the following rule:
> 
> fetch_macro_argument
>     : 
>     (
>         balanced_pars 
>         | balanced_curlz
>         | balanced_squares
>         | tok:~(COMMA | LPAR | LCURL | LSQUARE)
>     )*
>     ;
>     
> So, a macro argument can consist of a mixture of the
> following items - 
> any set of balanced parens, any set of balanced
> curly braces, any set 
> of balanced square brackets, or anything else that's
> not a comma.
> 
> Now I could have written this as:
> 
> fetch_macro_argument
>     : 
>     (options { generateAmbigWarnings = false; } 
>         : balanced_pars 
>         | balanced_curlz
>         | balanced_squares
>         | tok:~COMMA)
>     )*
>     ;
> 
> (Let me make a remark en passent, the most efficient
> code is actually 
> generated for the following:
> 
> fetch_macro_argument
>     : 
>     (options { generateAmbigWarnings = false; } 
>         : balanced_pars 
>         | balanced_curlz
>         | balanced_squares
>         | { LA(1) != COMMA}? tok:.)
>     )*
>     ;
> 
> But that's subject of another discussion.)
> 
> So anyway, I have two variants to choose from, and
> they are both more 
> verbose than I'd like. I'd like to propose defining
> the operator "||" 
> (as opposed to "|") to combine "short-circuit" rules
> - rules that obey 
> the "first wins" policy.
> 
> The notation is nicely consistent with the semantics
> of the "||" 
> operator, where the first condition that's true
> stops evaluation. 
> Also, the precedence would be lower that that of
> "||" - and that makes 
> sense for the grammar, because most of the time you
> want to match some 
> discriminating rules, followed by a more general
> one.
> 
> With that hypothetical operator I could write my
> rule simply as:
> 
> fetch_macro_argument
>     : 
>     (
>         balanced_pars 
>         | balanced_curlz
>         | balanced_squares
>         || tok:~COMMA
>     )*
>     ;
> 
> Whaddaya think?
> 
> 
> Andrei
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
SBC Yahoo! DSL - Now only $29.95 per month!
http://sbc.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From thomas.jackson at microfocus.com  Mon Jun 16 11:27:10 2003
From: thomas.jackson at microfocus.com (Thomas Jackson III)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Re: Eclipse Plugin - Problem
Message-ID: <3AC103F1B7EEEC48A855ACB1D2819E9101B38437@rock-corpmail.microfocus.com>

Loring,

Thanks for the information.  Unfortunately, I have not been able to find
another JAR file which contains antlr except the 2.7.2 version of the
plug-in.  If anyone might know of a solution or suggestion I would greatly
appreciate it.

Thanks
Thomas

-----Original Message-----
From: lgcraymer [mailto:lgc@mail1.jpl.nasa.gov] 
Sent: Thursday, June 05, 2003 4:47 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Eclipse Plugin - Problem


I had a thought.  "Vanilla" eclipse probably ships with the ANTLR 
2.7.1 jar--ANTLR is used for the refactoring support--and the antlr 
plugin may use the built-in jar file instead of the 2.7.2 supplied.  
The error reported would be consistent with that--2.7.2 has a wider 
default character range than 2.7.1.

--Loring


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Bizarre.  Is there any way to see how antlr was invoked?  Any chance
of
> seeing the version number from antlr starting up?
> 
> Monty
> 
> -----Original Message-----
> From: Thomas Jackson III [mailto:thomas.jackson@m...]
> Sent: Thursday, June 05, 2003 8:08 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Eclipse Plugin - Problem
> 
> 
> Hi all,
> 
> I am using the Eclipse plugin(version 1.0.3) for Antlr development
and have
> run across an anomaly that someone hopefully has an answer to.
> 
> I have the following tokens declared in the Lexer
> 
> NOT : '?';
> NG  : "?>";
> NL  : "?<";
> NE  : "?=";
> 
> When I compile the grammar in Eclipse it returns the following
errors.
> 
> Token stream error reading grammar(s):	jcl.g
> unexpected char: '''
> 
> Now, if I go to a command prompt and run the exact same Grammar
using
> antlr.jar(version 2.7.2) from the Antlr download, I get no errors.
> 
> It has to do with the ? character, but why would it generate code in
one and
> fail in the other?
> 
> Any suggestions as to what may be causing this?
> 
> Thanks
> Thomas Jackson
>  
> 
>  
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From thomas.jackson at microfocus.com  Mon Jun 16 11:45:44 2003
From: thomas.jackson at microfocus.com (Thomas Jackson III)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Re: Eclipse Plugin - Problem
Message-ID: <3AC103F1B7EEEC48A855ACB1D2819E9101B38447@rock-corpmail.microfocus.com>

Well.....I went back to the Eclipse plugin site on sourceforge and found a
later version of the ANTLR it was the "final build" of antlr.  Installed
this plugin and everything now works.  If you haven't upgraded you should
probably do so.

Thanks for your help!

Thomas

-----Original Message-----
From: Thomas Jackson III [mailto:thomas.jackson@microfocus.com] 
Sent: Monday, June 16, 2003 2:27 PM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Re: Eclipse Plugin - Problem


Loring,

Thanks for the information.  Unfortunately, I have not been able to find
another JAR file which contains antlr except the 2.7.2 version of the
plug-in.  If anyone might know of a solution or suggestion I would greatly
appreciate it.

Thanks
Thomas

-----Original Message-----
From: lgcraymer [mailto:lgc@mail1.jpl.nasa.gov] 
Sent: Thursday, June 05, 2003 4:47 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Eclipse Plugin - Problem


I had a thought.  "Vanilla" eclipse probably ships with the ANTLR 
2.7.1 jar--ANTLR is used for the refactoring support--and the antlr 
plugin may use the built-in jar file instead of the 2.7.2 supplied.  
The error reported would be consistent with that--2.7.2 has a wider 
default character range than 2.7.1.

--Loring


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Bizarre.  Is there any way to see how antlr was invoked?  Any chance
of
> seeing the version number from antlr starting up?
> 
> Monty
> 
> -----Original Message-----
> From: Thomas Jackson III [mailto:thomas.jackson@m...]
> Sent: Thursday, June 05, 2003 8:08 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Eclipse Plugin - Problem
> 
> 
> Hi all,
> 
> I am using the Eclipse plugin(version 1.0.3) for Antlr development
and have
> run across an anomaly that someone hopefully has an answer to.
> 
> I have the following tokens declared in the Lexer
> 
> NOT : '?';
> NG  : "?>";
> NL  : "?<";
> NE  : "?=";
> 
> When I compile the grammar in Eclipse it returns the following
errors.
> 
> Token stream error reading grammar(s):	jcl.g
> unexpected char: '''
> 
> Now, if I go to a command prompt and run the exact same Grammar
using
> antlr.jar(version 2.7.2) from the Antlr download, I get no errors.
> 
> It has to do with the ? character, but why would it generate code in
one and
> fail in the other?
> 
> Any suggestions as to what may be causing this?
> 
> Thanks
> Thomas Jackson
>  
> 
>  
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From monaabs at yahoo.com  Mon Jun 16 12:49:03 2003
From: monaabs at yahoo.com (monaabs)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] crash on parsing filter condition
Message-ID: <bcl6vf+rrbp@eGroups.com>

Greetings !!!

I am using 2.7.2 .. on parsing join and filter conditions i get 
abnormal program termination .

Its a very strange situation cause this crash occurs only on 
syntatically wrong conditions 

for eg if i type column1 = column2 .. no crash
if i type column1 = column2sum  (junk at end) application crashes.

The crash call stack is 
ETL_PARSERS! _CxxThrowException@8 + 52 bytes
SQL_Parser::r_BoolPrimary() line 7121


Similarly i encounter the same crash on parsing transforms .

The stack in this case is 
ETL_PARSERS! _CxxThrowException@8 + 52 bytes
COMPUTE_Parser::r_RHS() line 260

Any reason why this should happen . I have intialised the ASTFsctory 
and it works great for parseColumn() but for parseJoinCondition() and 
parseWhereCondition() it fails

My function looks like this

long ETL_PARSERS_API ETL_ParseSQL::parseWhereConditions( const char 
*inBuf, bool bIgnoreSubSelects )
{
  ANTLR_USING_NAMESPACE(std)
  ANTLR_USING_NAMESPACE(antlr)
   etl_parser_buffer parserBuf;
   parserBuf.init( inBuf );
   
   initGlobalPtr();
   getMetaInfoPtr()->setIgnoreSubSelects( bIgnoreSubSelects );
   saveInPtr( parserBuf.get_istream() );

   ASTFactory my_factory;
   SQL_Lexer  lexer( *(parserBuf.get_istream()) );
   SQL_Parser parser(lexer);
   parser.initializeASTFactory(my_factory);
   parser.setASTFactory(&my_factory);

   try
   {
     parser.r_ETL_Where();
   }
   catch(exception& e)
   {
     if ( isBlank( inBuf ) )
       return( 0 );
     setErrMsg( e.what() );
     return( -1 );
   }
   return( 0 );
}

Any input greatly appreciated .

Best Regards
Mona


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Mon Jun 16 17:38:28 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Re: Simple Question
In-Reply-To: <AF02884D0976D311A014009027A8F1FB1FD54EC5@na1fcm10.dearborn.ford.com>
Message-ID: <bclnu4+aufd@eGroups.com>

<SNIP>

> modelica_file
>     : (within_clause)? (("final")? class_definition SEMI!)* EOF!
>         { ## = #([FILE, "FILE"], ##); }
>     ;
> 
>  
> Note, specifically, the use of "#([FILE, "FILE"], ...)"

<SNIP>

> tokens {
>     FILE<AST=FileNode>; DECLARATION; DEFINITION; FUNCTION_CALL; 
TYPE;
>    ...
> }
>  
> Note the "File<AST=FileNode>..." part.

> So, is my assessment correct (i.e. this feature doesn't work with 
synthetic nodes...of which I have *many*).  Or am I doing something 
wrong?

Mike,

You didn't mention which language you are using so this is a rather 
generic answer by neccesity:

In the scenario above, the ANTLR codegen *should* have created a node 
for your imaginary FILE tokenID using an instance of the FileNode 
class (I assume that this class correctly implements the AST 
interface). IOW, you don't seem to be doing anything wrong...*

[* More access to your grammar might change this opinion however ;-)]

There is [at least?] another way to declare a custom class for an 
imaginary AST node. You can use the [<TokenID>, <TokenText>, 
<TokenClass>] form of the ANTLR node constructor syntax. E.g.

     {  ## = #([FILE, "FILE", "FileNode"], ##);  }

Cheers,

Micheal
ANTLR/C# codegen



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Tue Jun 17 02:01:32 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] crash on parsing filter condition
In-Reply-To: <bcl6vf+rrbp@eGroups.com>; from monaabs@yahoo.com on Mon, Jun 16, 2003 at 07:49:03PM -0000
References: <bcl6vf+rrbp@eGroups.com>
Message-ID: <20030617110131.I692@cs.utwente.nl>

On Mon, Jun 16, 2003 at 07:49:03PM -0000, monaabs wrote:
> Its a very strange situation cause this crash occurs only on 
> syntatically wrong conditions

Do you have the option defaultErrorHandler set ? Or where do you catch
occurences of parse exceptions? Try adding a catch for ANTLRException.

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "Of all the things i've lost i miss my mind the most -Ozzy Osbourne


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mtiller at ford.com  Tue Jun 17 05:47:32 2003
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Re: Simple Question
Message-ID: <AF02884D0976D311A014009027A8F1FB1FD54ED0@na1fcm10.dearborn.ford.com>

I am using C++ as my target language.

I'm quite busy working on this parser/treewalker and I don't really have the time right now to isolate some code that demonstrates this.  I'm pretty confident that this is a bug (or at least an undesirable feature) and I will try to put something together to demonstrate it in the future.

I should point out that several people have asked questions about whether my custom AST is a proper baseclass, whether I am properly initializing my AST factory (I know it has changed in 2.7.2), am I compiling things in the right order, etc.  Keep in mind that the bug manifests itself during the parser construction phase (by creating a bogus initializeASTFactory).  In other words, this is not a compile time or run time issue so none of my C++ code has any impact on this issue.  The issue is in the ANTLR code generation phase.

I'll try to provide a complete example when/if I can.

--
Mike

> -----Original Message-----
> From: micheal_jor [mailto:open.zone@virgin.net]
> Sent: Monday, June 16, 2003 8:38 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: Simple Question
> 
> 
> <SNIP>
> 
> > modelica_file
> >     : (within_clause)? (("final")? class_definition SEMI!)* EOF!
> >         { ## = #([FILE, "FILE"], ##); }
> >     ;
> > 
> >  
> > Note, specifically, the use of "#([FILE, "FILE"], ...)"
> 
> <SNIP>
> 
> > tokens {
> >     FILE<AST=FileNode>; DECLARATION; DEFINITION; FUNCTION_CALL; 
> TYPE;
> >    ...
> > }
> >  
> > Note the "File<AST=FileNode>..." part.
> 
> > So, is my assessment correct (i.e. this feature doesn't work with 
> synthetic nodes...of which I have *many*).  Or am I doing something 
> wrong?
> 
> Mike,
> 
> You didn't mention which language you are using so this is a rather 
> generic answer by neccesity:
> 
> In the scenario above, the ANTLR codegen *should* have created a node 
> for your imaginary FILE tokenID using an instance of the FileNode 
> class (I assume that this class correctly implements the AST 
> interface). IOW, you don't seem to be doing anything wrong...*
> 
> [* More access to your grammar might change this opinion however ;-)]
> 
> There is [at least?] another way to declare a custom class for an 
> imaginary AST node. You can use the [<TokenID>, <TokenText>, 
> <TokenClass>] form of the ANTLR node constructor syntax. E.g.
> 
>      {  ## = #([FILE, "FILE", "FileNode"], ##);  }
> 
> Cheers,
> 
> Micheal
> ANTLR/C# codegen
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From anilk at subexgroup.com  Tue Jun 17 05:57:55 2003
From: anilk at subexgroup.com (Anil Kumar)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Error return from lexer/parser
Message-ID: <000401c334d0$12825880$9b0210ac@subex>

Hi everyone,
I have a simple grammar, which has description for expression. When i give
it to the lexer/parser wrong expr. to the application, the lexer/parser
fails but it does not raises exceptions nor does it returns any error
status. Is there something missing that i have to specify to raise
exception/return errors to the invoker of lexer/parser.
Thanks,
Anil


DISCLAIMER: This email is bound by the terms and conditions described at 
http://www.subexgroup.com/mail-disclaimer.htm



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lubos.vnuk at rts.at  Tue Jun 17 06:18:17 2003
From: lubos.vnuk at rts.at (Lubos Vnuk)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] LR problem with SQL92 parsing?
Message-ID: <bcn4ep+n21p@eGroups.com>

Hi,

I am new to ANTLR, I have read most of the docs but got stuck trying
to parse SQL2: 

//Example 1
class SQL2 extends Parser;
options {k = 4;}
id : REGULAR_ID;
char_set_name : (schema_name ".")? id;
schema_name : (id ".")? id;

So far so good. Using left factoring for <schema_name> I can even 
reduce the lookahead to 3:
//Example 2
class SQL2 extends Parser;
options {k = 3;}
id : REGULAR_ID;
char_set_name : (schema_name ".")? id;
schema_name : id ("." id)?;

So far so good. But as I introduce the "_" for the <id>:
//Example 3 - THE PROBLEM
class SQL2 extends Parser;
options {k = 3;}
id : ("_" char_set_name)? REGULAR_ID;
char_set_name : (schema_name ".")? id;
schema_name : id ("." id)?;

I get two ambuguities. My question is: How can I best resolve the 
issue? Is it:
-> by specifying greedy subrules for char_set_name and schema_name 
subrules?
-> by using syntactic predicates?
-> or else?

TIA,
Lubos.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From antlrlist at yahoo.com  Tue Jun 17 09:28:00 2003
From: antlrlist at yahoo.com (antlrlist)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Re: LR problem with SQL92 parsing?
In-Reply-To: <bcn4ep+n21p@eGroups.com>
Message-ID: <bcnfig+qql0@eGroups.com>


I'd use a syntactic predicate. Something like this:

id
: ("_")=> "_" char_set_name REGULAR_ID
| REGULAR_ID
;

I think that should work.

I have a suggestion: using so many (...)? in char_set_name and 
schema_name is a bit confusing. As I see it, char_set_name has one, 
two or three ids separated by points. I mean this:

char_set_name
: id
| id "." id
| id "." id "." id
;

This solution is k=4, I think. If you feel brave, you could put it 
down to k=1 with a counter:

char_set_name
{ int idCounter = 1; }
: id
  ( "." id
    {
      idCounter++;
      if (idCounter>3)
         throw new SemanticException ("too many ids...") ;
    }
  )*
;

I hope I could help you!

Enrique







--- In antlr-interest@yahoogroups.com, "Lubos Vnuk" <lubos.vnuk@r...> 
wrote:
> Hi,
> 
> I am new to ANTLR, I have read most of the docs but got stuck trying
> to parse SQL2: 
> 
> //Example 1
> class SQL2 extends Parser;
> options {k = 4;}
> id : REGULAR_ID;
> char_set_name : (schema_name ".")? id;
> schema_name : (id ".")? id;
> 
> So far so good. Using left factoring for <schema_name> I can even 
> reduce the lookahead to 3:
> //Example 2
> class SQL2 extends Parser;
> options {k = 3;}
> id : REGULAR_ID;
> char_set_name : (schema_name ".")? id;
> schema_name : id ("." id)?;
> 
> So far so good. But as I introduce the "_" for the <id>:
> //Example 3 - THE PROBLEM
> class SQL2 extends Parser;
> options {k = 3;}
> id : ("_" char_set_name)? REGULAR_ID;
> char_set_name : (schema_name ".")? id;
> schema_name : id ("." id)?;
> 
> I get two ambuguities. My question is: How can I best resolve the 
> issue? Is it:
> -> by specifying greedy subrules for char_set_name and schema_name 
> subrules?
> -> by using syntactic predicates?
> -> or else?
> 
> TIA,
> Lubos.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From antlrlist at yahoo.com  Tue Jun 17 09:38:39 2003
From: antlrlist at yahoo.com (antlrlist)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Re: Suggestion: syntactic sugar for generateAmbigWarnings = false;
In-Reply-To: <bceitp+rnn0@eGroups.com>
Message-ID: <bcng6f+n1n5@eGroups.com>


In the ANTLR Options documentation page 
(http://www.antlr.org/doc/options.html#_bb15), you can see the 
following warning:

[Warning: you should know what you are doing before you use this 
option.  I deliberately made it a pain to shut warnings off (rather 
than a single character operator) so you would not just start turning 
off all the warnings.  I thought for long time before implementing 
this exact mechanism.  I recommend a comment in front of any use of 
this option that explains why it is ok to hush the warning.] 

Right, this warning concerns the WarnWhenFollowAmbig option. But I 
think this may be applicable to generateAmbigWarnings as well.

What do you think?

Enrique


--- In antlr-interest@yahoogroups.com, "uprightness_of_character" 
<andrei@m...> wrote:
> I have a number of rules in which the first rule that matches is 
the 
> one that's needed, and there's a final match for "everything else". 
In 
> a nutshell => generateAmbigWarnings = false. 
> 
> For example, consider you write a C-style preprocessor, and you 
> generate the code to get a macro argument.
> 
> The idea is, you need to read up to the first comma, but if there 
are 
> parentheses, curly braces, or square brackets, you will pair them 
> properly (commas are allowed inside). For example, "1 (2, a) 3" 
would 
> be a proper argument. 
> 
> I came up with the following rule:
> 
> fetch_macro_argument
>     : 
>     (
>         balanced_pars 
>         | balanced_curlz
>         | balanced_squares
>         | tok:~(COMMA | LPAR | LCURL | LSQUARE)
>     )*
>     ;
>     
> So, a macro argument can consist of a mixture of the following 
items - 
> any set of balanced parens, any set of balanced curly braces, any 
set 
> of balanced square brackets, or anything else that's not a comma.
> 
> Now I could have written this as:
> 
> fetch_macro_argument
>     : 
>     (options { generateAmbigWarnings = false; } 
>         : balanced_pars 
>         | balanced_curlz
>         | balanced_squares
>         | tok:~COMMA)
>     )*
>     ;
> 
> (Let me make a remark en passent, the most efficient code is 
actually 
> generated for the following:
> 
> fetch_macro_argument
>     : 
>     (options { generateAmbigWarnings = false; } 
>         : balanced_pars 
>         | balanced_curlz
>         | balanced_squares
>         | { LA(1) != COMMA}? tok:.)
>     )*
>     ;
> 
> But that's subject of another discussion.)
> 
> So anyway, I have two variants to choose from, and they are both 
more 
> verbose than I'd like. I'd like to propose defining the 
operator "||" 
> (as opposed to "|") to combine "short-circuit" rules - rules that 
obey 
> the "first wins" policy.
> 
> The notation is nicely consistent with the semantics of the "||" 
> operator, where the first condition that's true stops evaluation. 
> Also, the precedence would be lower that that of "||" - and that 
makes 
> sense for the grammar, because most of the time you want to match 
some 
> discriminating rules, followed by a more general one.
> 
> With that hypothetical operator I could write my rule simply as:
> 
> fetch_macro_argument
>     : 
>     (
>         balanced_pars 
>         | balanced_curlz
>         | balanced_squares
>         || tok:~COMMA
>     )*
>     ;
> 
> Whaddaya think?
> 
> 
> Andrei


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From antlrlist at yahoo.com  Tue Jun 17 09:50:13 2003
From: antlrlist at yahoo.com (antlrlist)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Re: Error return from lexer/parser
In-Reply-To: <000401c334d0$12825880$9b0210ac@subex>
Message-ID: <bcngs5+e4o9@eGroups.com>


Sorry, I don't understand.

You say that your parser/lexer fails, but it does not rise any 
exception nor print any error message. Then how do you know it fails?
Don't take me wrong, I'm not joking. If no errors are detected, then 
this means that the entry is valid.

Things you could try:

 - Make sure that your defaultErrorHandler 
(http://www.antlr.org/doc/options.html#defaultErrorHandler) option is 
set to true.
 - Make sure that your grammar is not really rising exceptions (maybe 
you forgot a try/catch block that is catching them, or you erased it 
and forgot to re-compile?)
 - Make sure that your grammar can not accept the entry that you 
think is "wrong" (maybe your rules are not well defined, so they can 
accept more entries than the ones you thought about initially)
 - Finally, if nothing works, re-compile your analyzers with the -
trace command line option and trace the analysis.

I hope I could help you,

Enrique

--- In antlr-interest@yahoogroups.com, "Anil Kumar" <anilk@s...> 
wrote:
> Hi everyone,
> I have a simple grammar, which has description for expression. When 
i give
> it to the lexer/parser wrong expr. to the application, the 
lexer/parser
> fails but it does not raises exceptions nor does it returns any 
error
> status. Is there something missing that i have to specify to raise
> exception/return errors to the invoker of lexer/parser.
> Thanks,
> Anil
> 
> 
> DISCLAIMER: This email is bound by the terms and conditions 
described at 
> http://www.subexgroup.com/mail-disclaimer.htm


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From antlrlist at yahoo.com  Tue Jun 17 10:08:24 2003
From: antlrlist at yahoo.com (antlrlist)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Re: crash on parsing filter condition
In-Reply-To: <bcl6vf+rrbp@eGroups.com>
Message-ID: <bcnhu8+bodc@eGroups.com>


I only use ANTLR with java, but I did a lot of C++ (no ANTLR-C++) 
some time ago, so I'll try to help. Please forgive if what I say is 
stupid.

It seems to me that the problem is not raised by ANTLR code, but your 
code. If you are parsing something like "column1 = column2sum" then 
you'll likely have a syntax rule like this one:

assignation : IDENT ASSIG IDENT ;

Now both "column1" and "colum2sum" are perfectly valid identifiers in 
most implementations of IDENT, so I don't think the problem is in 
parsing these names, but in what you do with them: typically search 
two "FieldDefinition" instances in your current "TableDefinition" 
using "column1" and "column2sum" as hashcodes. Since there will be no 
FieldDefinitions named "column2sum" no "FieldDefinition" will be 
found. Maybe NULL is being returned, or maybe a not initialized 
pointer is returned, or maybe a very strange exception is raised?

I hope I could help!

Enrique



--- In antlr-interest@yahoogroups.com, "monaabs" <monaabs@y...> wrote:
> Greetings !!!
> 
> I am using 2.7.2 .. on parsing join and filter conditions i get 
> abnormal program termination .
> 
> Its a very strange situation cause this crash occurs only on 
> syntatically wrong conditions 
> 
> for eg if i type column1 = column2 .. no crash
> if i type column1 = column2sum  (junk at end) application crashes.
> 
> The crash call stack is 
> ETL_PARSERS! _CxxThrowException@8 + 52 bytes
> SQL_Parser::r_BoolPrimary() line 7121
> 
> 
> Similarly i encounter the same crash on parsing transforms .
> 
> The stack in this case is 
> ETL_PARSERS! _CxxThrowException@8 + 52 bytes
> COMPUTE_Parser::r_RHS() line 260
> 
> Any reason why this should happen . I have intialised the 
ASTFsctory 
> and it works great for parseColumn() but for parseJoinCondition() 
and 
> parseWhereCondition() it fails
> 
> My function looks like this
> 
> long ETL_PARSERS_API ETL_ParseSQL::parseWhereConditions( const char 
> *inBuf, bool bIgnoreSubSelects )
> {
>   ANTLR_USING_NAMESPACE(std)
>   ANTLR_USING_NAMESPACE(antlr)
>    etl_parser_buffer parserBuf;
>    parserBuf.init( inBuf );
>    
>    initGlobalPtr();
>    getMetaInfoPtr()->setIgnoreSubSelects( bIgnoreSubSelects );
>    saveInPtr( parserBuf.get_istream() );
> 
>    ASTFactory my_factory;
>    SQL_Lexer  lexer( *(parserBuf.get_istream()) );
>    SQL_Parser parser(lexer);
>    parser.initializeASTFactory(my_factory);
>    parser.setASTFactory(&my_factory);
> 
>    try
>    {
>      parser.r_ETL_Where();
>    }
>    catch(exception& e)
>    {
>      if ( isBlank( inBuf ) )
>        return( 0 );
>      setErrMsg( e.what() );
>      return( -1 );
>    }
>    return( 0 );
> }
> 
> Any input greatly appreciated .
> 
> Best Regards
> Mona


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From antlrlist at yahoo.com  Tue Jun 17 10:20:20 2003
From: antlrlist at yahoo.com (antlrlist)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Re: manual AST construction: what am I doing wrong?
In-Reply-To: <20030616173951.H692@cs.utwente.nl>
Message-ID: <bcnikk+ivi7@eGroups.com>


I just want to confirm that heterogenous ASTs work very well in java 
mode (even if there are some tricks to know, like only modifying ## 
at the ending action of each rule :| ).

One of the coolest things I've done with them is override toString() 
adding specific information that could be browsed on an ASTFrame. 
Gorgeous.

Enrique.

--- In antlr-interest@yahoogroups.com, Ric Klaren <klaren@c...> wrote:
> Hi,
> 
> On Mon, Jun 16, 2003 at 05:05:50PM +0200, Jorge Scandaliaris wrote:
> > Yes, I have a single AST type, but I was thinking in moving to
> > heterogeneous AST (I have defined my nodes to contain all info I 
could
> > possibly come across in the grammar, but they are 90% of the time 
left
> > empty). I guess for the moment I'll lose in efficiency until I 
get this
> > going, and more now that you point this out.
> > It seems it's no so common to use this approach, eh?
> 
> Heterogenous AST's are some of the more fragile things inside 
ANTLR. I
> would like to use them maybe myself but I'd rather wait with that 
untill a
> few things inside ANTLR are rewritten. The interface between antlr 
and the
> module parsing the actions for the specific target language is not
> something that would go for a software engineering award.
> 
> Also you can do a lot of things wrong depending on the layout of 
your
> project. If you go with it be very aware of:
> 
> - How import/exportVocab work (and all the related caveats in build 
orders)
> - How to register all node types with the astFactory and make sure 
all things
>   use the same factory.
> - How to read ANTLR's generated code (this never hurts) You may 
have to check
>   the generated code for actions quite often to work around things 
>   the action parser cannot see, and think of appropriate work 
arounds.
> - Be aware of the restrictions on polymorphism and the use of 
reference
>   counted AST's. Depending on what you do/want you may lose all the 
advantages
>   of making something polymorphic.
> - in short YMMV
> 
> Cheers,
> 
> Ric
> 
> PS personally I could (would like to maybe even) use heterogenous 
AST's in my
>    project. But I don't. In Java mode it may work nice though. C# 
maybe too.
> --
> -----
+++++*****************************************************+++++++++---
----
>     ---- Ric Klaren ----- j.klaren@u... ----- +31 53 4893722  ----
> -----
+++++*****************************************************+++++++++---
----
>   Chaos is found in greatest abundance wherever order is being 
sought.
>   --- Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lubos.vnuk at rts.at  Tue Jun 17 10:44:14 2003
From: lubos.vnuk at rts.at (Lubos Vnuk)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Re: LR problem with SQL92 parsing?
In-Reply-To: <bcnfig+qql0@eGroups.com>
Message-ID: <bcnk1e+3tjt@eGroups.com>

Hi Enrique,

thanks a lot for your insight and help!

The syntactic predicate you proposed 
> id
> : ("_")=> "_" char_set_name REGULAR_ID
> | REGULAR_ID
> ;
won't help as predicating a single token is superfluous since it can 
be recognised automatically by ANTLR.

Your second suggestion:
> char_set_name
> : id
> | id "." id
> | id "." id "." id
> ;
with k=4 can even be reduced to:
char_set_name : 
 id (   "." id "." id
      | "." id
      |
    )
;
with k=3 but that does not solve the problem either.

The problem is the recursion within the <id> rule.

Your third suggestion with the counter solves the problem but it is a 
bit painful and it is positively ruining the grammar comprehension 
Also, it is not a general solution for the case where these 3 <id>s 
could be different, e.g.
id1 : id | "1";
id2 : id | "2";
id3 : id | "3";

Any other hints?

Cheers,
Lubos.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mtiller at ford.com  Tue Jun 17 11:36:11 2003
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Hetero ASTs, Manual Tree Construction, C++, etc...
Message-ID: <AF02884D0976D311A014009027A8F1FB1FD54ED9@na1fcm10.dearborn.ford.com>

I'm currently working on a project and I wanted to bounce a few ideas off the people in the list to see what people think of how I'm approaching this problem.
 
First, I should state one particular bias...I don't really like homogenous ASTs.  Perhaps I just don't understand enough about how people use homogenous ASTs or something, but I don't really feel comfortable with them.  I agree that the automatic AST building stuff in ANTLR is very nice and I really appreciate that some care has been taken to try and provide the best of both worlds.  My main problem with homogenous ASTs is that while I can very easily build a parser and even a tree walker built around homogenous ASTs, I don't really feel comfortable *doing something* with them because they don't seem structured enough.  Here is an example, consider the following statement in my grammar:
 
element
    : import_clause
    | extends_clause
    | ("final")?
      ( "inner" | "outer")?
      ( ( class_definition | component_clause )
        | "replaceable" ( class_definition | component_clause )
            (constraining_clause (string_comment)? (annotation)?)?
      )
    ;

Now things like "final" or "inner" or "replaceable" are simple qualifiers.  I just want to note whether they are present or not.  Should I really just leave the lexical token in my AST to indicate this?  I'm assuming that is what you would do if you strictly used automatic AST construction (perhaps I'm wrong).  I don't like this because they I have to search through the AST (agreed, I can write macros/functions for much of this) to look for the presence of these items.  I just don't like this because it requires maintaining complex tree structures, worrying about garbage collection, calling functions to determine simple properties.
 
To deal with these situations, I have fields in my heterogeneous AST like "bool p_final".  Now I have exactly what I need at my fingertips (i.e. a boolean that indicates whether this declaration is final or not).  I can change this boolean very easily (without having to deal at all with post-parsing AST construction).  Now you LISP folks out there problem think that the "p_" means predicate, but it doesn't...more on this in a second.
 
As I build my AST, I sprinkle in a few statements here and there where I capture the presence of these qualifiers (once and for all) in members associated with each AST node.  ANTLR makes this relatively easy (could be better though) so I'm pretty happy with that.  At first, this may seem to limit some of the possibilities of my tree parser because these bits have been taken out of the AST structure formally (i.e. they don't show up with getFirstChild or getNextSibling).  This is true, but so far I have yet to see a big impact.
 
Now, let me talk more generally about this issue.  Lets get away from the parsing and think more about tree processing.  My approach has been (or will be in some cases) to build each heterogeneous AST out of two fundamental types of information.
 
The first type (prefixed with a "p_") is information that comes from the parsing stage.  Essentially, these are bits and pieces that are syntactically present in the source but (for the reasons I outlined above) I choose not to represent with my AST.  My criteria for deciding this is pretty simple.  If something is essentially a "terminal", I pluck it out since the structure isn't "variable" (i.e. I don't need to represent its internal structure).  I use an explicit "p_" prefix to indicate that these are syntactic elements and to remind me that I need to spit them back out in the case of text-to-text processing.
 
The second type (prefix with an "m_") is information that I have gleaned from "passes" over the AST.  This might include pointers to other nodes representing relationships (parent nodes, instance<->type relationships, etc).  This information is semantic and so I don't have to spit it back out.  Furthermore, it usually requires more analysis to figure out how to fill in these pieces of information.
 
How does this relate to ANTLR and tree construction?  Well, I've been implementing this scheme with ANTLR and I've found some of the features useful, but I think there is room for improvement.  By my count, I now have 31 different AST node types.  Even after I wrote several macros and a base class for all my ASTs, I can still tell you that defining each one was a pain.  Here are my major issues with hetero AST construction:
 
1) Defining the AST types is a bit of a pain.  You cannot really leverage either templates or inheritance in this process (at least not in an easy way I have found).  The systems for "cloning" and "garbage collection", etc. just didn't seem to provide an elegant way of facilitating reuse.  It is entirely possible that people have found elegant ways around this, but it isn't obvious, documented or directly supported by ANTLR as far as I can tell.
 
2) Even when I define custom AST nodes, there is a problem (at least in my grammar) that ANTLR doesn't create the appropriate initializeASTFactory method.  I mentioned this in a previous message so I'm not really going to go into detail here.
 
3) Even when I convince ANTLR to create the appropriate initializeASTFactory (via a hack), it still doesn't treat my nodes as what they are.  Perhaps this is a consequence of #2, but my ASTs are still just "RefAST" instances as far as ANTLR is concerned so I've had to write a bunch of casting functions (e.g. "asDeclaration(##).p_final = true;") to allow me to access the node specific members/methods.
 
In looking over the work that I've done, it strikes me that perhaps the best way for ANTLR to deal with heterogeneous ASTs is to use a "mix-in" sort of idiom.  In other words, let me define my node type, e.g.
 
struct DeclarationNode {
  bool p_final;
  DeclarationNode() : p_final(false); {}
};
 
...then when I specify that I want one of my tokens to include this data (e.g. DECLARATION<AST=DeclarationNode>;) have ANTLR use multiple-inheritance of templates to include this information, e.g. have ANTLR create a custom data structure that blends the AST with my type:
 
class DECLARATION_AST : public commonAST, public DeclarationNode {
...
};
 
Then ANTLR could take responsibility for create "RefDECLARATION_AST" and writing down the obvious methods (e.g. clone)?
 
Now my intention here is not to complain about the lack of support for heterogeneous ASTs in ANTLR.  Overall, I'm happy with ANTLR.  I'm just trying to provide some feedback about what I think is cumbersome and also to solicit feedback from people on whether they think, based on looking at what my issues are, I'm going about some things the wrong way.
 
--
Mike
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030617/20f4375c/attachment.html
From open.zone at virgin.net  Tue Jun 17 12:12:41 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Re: Simple Question
In-Reply-To: <AF02884D0976D311A014009027A8F1FB1FD54ED0@na1fcm10.dearborn.ford.com>
Message-ID: <bcnp79+433s@eGroups.com>

>>>
I am using C++ as my target language.
<<<

OK.

>>>
I'm quite busy working on this parser/treewalker and I don't really 
have the time right now to isolate some code that demonstrates this.  
I'm pretty confident that this is a bug (or at least an undesirable 
feature) and I will try to put something together to demonstrate it 
in the future.
<<<

I hope you do find a little time to provide a repro-grammar and 
details that demonstrates this issue. It's more likely to get 
resolved with such a report.

>>> 
Keep in mind that the bug manifests itself during the parser 
construction phase (by creating a bogus initializeASTFactory).  In 
other words, this is not a compile time or run time issue so none of 
my C++ code has any impact on this issue.  The issue is in the ANTLR 
code generation phase.
<<<

If your parser grammar is relatively "clean" (i.e. doesn't contain a 
lot (any?) output-language-specific action code), you might want to 
try generating Java or C# code as a test.

>>>
I'll try to provide a complete example when/if I can.
<<<

Cool.

Cheers,

Micheal
ANTLR/C# codegen



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Tue Jun 17 12:15:47 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Re: LR problem with SQL92 parsing?
In-Reply-To: <bcn4ep+n21p@eGroups.com>
Message-ID: <bcnpd3+nn07@eGroups.com>

> Hi,

Hi Lubos,

> I am new to ANTLR, I have read most of the docs but got stuck trying
> to parse SQL2: 
> 
> //Example 1

<SNIP>

It would be much easier to help if you included samples of valid and 
invalid input text for your grammar snippets. At least for those not 
familiar with the language you are trying to parse...

Cheers,

Micheal
ANTLR/C# codegen



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Tue Jun 17 12:39:51 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Re: Hetero ASTs, Manual Tree Construction, C++, etc...
In-Reply-To: <AF02884D0976D311A014009027A8F1FB1FD54ED9@na1fcm10.dearborn.ford.com>
Message-ID: <bcnqq7+n6pm@eGroups.com>

If you have 31 AST classes and are expecting more, it would probably 
be worth your while to write a simple specification language processor 
to generate AST classes with get/set methods for the fields.  That 
might reduce some of your agony.

--Loring


--- In antlr-interest@yahoogroups.com, "Tiller, Michael (M.M.)" 
<mtiller@f...> wrote:
> I'm currently working on a project and I wanted to bounce a few 
ideas off the people in the list to see what people think of how I'm 
approaching this problem.
>  
> First, I should state one particular bias...I don't really like 
homogenous ASTs.  Perhaps I just don't understand enough about how 
people use homogenous ASTs or something, but I don't really feel 
comfortable with them.  I agree that the automatic AST building stuff 
in ANTLR is very nice and I really appreciate that some care has been 
taken to try and provide the best of both worlds.  My main problem 
with homogenous ASTs is that while I can very easily build a parser 
and even a tree walker built around homogenous ASTs, I don't really 
feel comfortable *doing something* with them because they don't seem 
structured enough.  Here is an example, consider the following 
statement in my grammar:
>  
> element
>     : import_clause
>     | extends_clause
>     | ("final")?
>       ( "inner" | "outer")?
>       ( ( class_definition | component_clause )
>         | "replaceable" ( class_definition | component_clause )
>             (constraining_clause (string_comment)? (annotation)?)?
>       )
>     ;
> 
> Now things like "final" or "inner" or "replaceable" are simple 
qualifiers.  I just want to note whether they are present or not.  
Should I really just leave the lexical token in my AST to indicate 
this?  I'm assuming that is what you would do if you strictly used 
automatic AST construction (perhaps I'm wrong).  I don't like this 
because they I have to search through the AST (agreed, I can write 
macros/functions for much of this) to look for the presence of these 
items.  I just don't like this because it requires maintaining complex 
tree structures, worrying about garbage collection, calling functions 
to determine simple properties.
>  
> To deal with these situations, I have fields in my heterogeneous AST 
like "bool p_final".  Now I have exactly what I need at my fingertips 
(i.e. a boolean that indicates whether this declaration is final or 
not).  I can change this boolean very easily (without having to deal 
at all with post-parsing AST construction).  Now you LISP folks out 
there problem think that the "p_" means predicate, but it 
doesn't...more on this in a second.
>  
> As I build my AST, I sprinkle in a few statements here and there 
where I capture the presence of these qualifiers (once and for all) in 
members associated with each AST node.  ANTLR makes this relatively 
easy (could be better though) so I'm pretty happy with that.  At 
first, this may seem to limit some of the possibilities of my tree 
parser because these bits have been taken out of the AST structure 
formally (i.e. they don't show up with getFirstChild or 
getNextSibling).  This is true, but so far I have yet to see a big 
impact.
>  
> Now, let me talk more generally about this issue.  Lets get away 
from the parsing and think more about tree processing.  My approach 
has been (or will be in some cases) to build each heterogeneous AST 
out of two fundamental types of information.
>  
> The first type (prefixed with a "p_") is information that comes from 
the parsing stage.  Essentially, these are bits and pieces that are 
syntactically present in the source but (for the reasons I outlined 
above) I choose not to represent with my AST.  My criteria for 
deciding this is pretty simple.  If something is essentially a 
"terminal", I pluck it out since the structure isn't "variable" (i.e. 
I don't need to represent its internal structure).  I use an explicit 
"p_" prefix to indicate that these are syntactic elements and to 
remind me that I need to spit them back out in the case of 
text-to-text processing.
>  
> The second type (prefix with an "m_") is information that I have 
gleaned from "passes" over the AST.  This might include pointers to 
other nodes representing relationships (parent nodes, instance<->type 
relationships, etc).  This information is semantic and so I don't have 
to spit it back out.  Furthermore, it usually requires more analysis 
to figure out how to fill in these pieces of information.
>  
> How does this relate to ANTLR and tree construction?  Well, I've 
been implementing this scheme with ANTLR and I've found some of the 
features useful, but I think there is room for improvement.  By my 
count, I now have 31 different AST node types.  Even after I wrote 
several macros and a base class for all my ASTs, I can still tell you 
that defining each one was a pain.  Here are my major issues with 
hetero AST construction:
>  
> 1) Defining the AST types is a bit of a pain.  You cannot really 
leverage either templates or inheritance in this process (at least not 
in an easy way I have found).  The systems for "cloning" and "garbage 
collection", etc. just didn't seem to provide an elegant way of 
facilitating reuse.  It is entirely possible that people have found 
elegant ways around this, but it isn't obvious, documented or directly 
supported by ANTLR as far as I can tell.
>  
> 2) Even when I define custom AST nodes, there is a problem (at least 
in my grammar) that ANTLR doesn't create the appropriate 
initializeASTFactory method.  I mentioned this in a previous message 
so I'm not really going to go into detail here.
>  
> 3) Even when I convince ANTLR to create the appropriate 
initializeASTFactory (via a hack), it still doesn't treat my nodes as 
what they are.  Perhaps this is a consequence of #2, but my ASTs are 
still just "RefAST" instances as far as ANTLR is concerned so I've had 
to write a bunch of casting functions (e.g. "asDeclaration(##).p_final 
= true;") to allow me to access the node specific members/methods.
>  
> In looking over the work that I've done, it strikes me that perhaps 
the best way for ANTLR to deal with heterogeneous ASTs is to use a 
"mix-in" sort of idiom.  In other words, let me define my node type, 
e.g.
>  
> struct DeclarationNode {
>   bool p_final;
>   DeclarationNode() : p_final(false); {}
> };
>  
> ...then when I specify that I want one of my tokens to include this 
data (e.g. DECLARATION<AST=DeclarationNode>;) have ANTLR use 
multiple-inheritance of templates to include this information, e.g. 
have ANTLR create a custom data structure that blends the AST with my 
type:
>  
> class DECLARATION_AST : public commonAST, public DeclarationNode {
> ...
> };
>  
> Then ANTLR could take responsibility for create "RefDECLARATION_AST" 
and writing down the obvious methods (e.g. clone)?
>  
> Now my intention here is not to complain about the lack of support 
for heterogeneous ASTs in ANTLR.  Overall, I'm happy with ANTLR.  I'm 
just trying to provide some feedback about what I think is cumbersome 
and also to solicit feedback from people on whether they think, based 
on looking at what my issues are, I'm going about some things the 
wrong way.
>  
> --
> Mike


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From epovazan at telus.net  Tue Jun 17 19:58:53 2003
From: epovazan at telus.net (Edward Povazan)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Stopping *
Message-ID: <000701c33545$8d4f35e0$6401a8c0@Epsilon>

Hello,

I need to parse simple 'function call' type expressions of the form
func(params, keywordparams), examples are
fncall()
fncall(a, b)
fncall(a, b, c=1, d=2)
fncall(c=1, d=2)

fncall(a, c=1, b, d=2) is NOT allowed. And this is where my problem is.
How do I break out of the simply parameter list and into the keyword
parameter list. I keep consuming the comma, and I haven't figured out the
right way to do it. I am hoping there is a simple trick.

The culpit is in the param_list rule - I need a 'stop matching if IDENT
ASSIGN and start matching the kwparam_list rule instead'. How do I use
something like a syntactic predicate (IDENT ASSIGN) => ??? to say 'don't
match anymore' ?

Thanks
-Ed

sigcall: ident LPAREN (arg_list)? RPAREN ;
arg_list: (ident ASSIGN) => kwparam_list | param_list (kwparam_list)? ;
param: (ident LPAREN) => sigcall | ident | number | STRING;
param_list: param (COMMA param)*;
kwparam: ident ASSIGN value;
kwparam_list: kwparam (COMMA kwparam)*;
value: param;
number: INT | REAL;
ident: IDENT;

class SigCallLexer extends Lexer;
options {
    charVocabulary = '\0'..'\377';
    k = 2;
}

LPAREN: '(' ;
RPAREN: ')' ;
COMMA: ',' ;
ASSIGN: '=' ;
IDENT : ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'_'|'0'..'9')*  ;
STRING: '"' ( ~'"' )* '"';
WS: (' ' | '\t' | '\f' | '\n' | "\r\n" | '\r' )
 { $setType(Token.SKIP); } ;
protected
DOT: '.' ;
protected
DIGIT: ('0'..'9') ;
INT { boolean isDecimal=false; } :
 DOT (DIGIT)+ { _ttype = REAL; }
 | (DIGIT)+ { isDecimal = true; } ( {isDecimal}? DOT (DIGIT)* {_ttype =
REAL; } )? ;



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Wed Jun 18 11:45:07 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] validating semantic predicates
Message-ID: <20030618184507.22176.qmail@web20405.mail.yahoo.com>

I have Tooled my grammar and it has generated a
parser.  I have written the grammar to process the
different elements of the file by calling methods on a
registered implementation of a handler object.  Thus,
I am currently concerned only with content.  I am
providing the handler a Stack of relevant tokens in
case something farther away than the current context
is needed.  So every time I enter a rule, I push the
primary token onto the stack (remember I'm dealing
with XML so this is pretty straightforward), and pop
it before I return from the rule.  I figure while I'm
doing the pop, I might as well do a kind of sanity
check by way of a validating semantic predicate:

{t == tokenStack.pop()}?

One thing I noticed right away is that the
SemanticException thrown in the event that this is not
true contains the exact text.  I don't see in the docs
whether and how to customize this text; I am currently
doing this:

{t == tokenStack.pop() /*unexpected token on the
stack*/}?

which is good enough, but I just wondered if there was
a better way.

TIA,
Matt


__________________________________
Do you Yahoo!?
SBC Yahoo! DSL - Now only $29.95 per month!
http://sbc.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ari.steinberg at embarcadero-ca.com  Wed Jun 18 11:53:16 2003
From: ari.steinberg at embarcadero-ca.com (Ari Steinberg)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] validating semantic predicates
Message-ID: <0881AC7F2F339C40BC6F7983D1E0BEC9744CC6@mail2k.embarcadero-ca.com>

I had a similar problem in my grammar.  To get around it, I caught the semantic exception and then throw a new one with a better error message.  My parser has a reference to the lexer so I created getLine() and getColumn() functions which return the current line and column the lexer so that the exception returns valid data.

myRule:
...
;
exception
catch[SemanticException ex]
{
    throw SemanticException( "Syntax error in Explain statement", getFilename(), getLine(), getColumn());
}

Cheers,

Ari

-----Original Message-----
From: Matt Benson [mailto:gudnabrsam@yahoo.com]
Sent: Wednesday, June 18, 2003 2:45 PM
To: Antlr List
Subject: [antlr-interest] validating semantic predicates


I have Tooled my grammar and it has generated a
parser.  I have written the grammar to process the
different elements of the file by calling methods on a
registered implementation of a handler object.  Thus,
I am currently concerned only with content.  I am
providing the handler a Stack of relevant tokens in
case something farther away than the current context
is needed.  So every time I enter a rule, I push the
primary token onto the stack (remember I'm dealing
with XML so this is pretty straightforward), and pop
it before I return from the rule.  I figure while I'm
doing the pop, I might as well do a kind of sanity
check by way of a validating semantic predicate:

{t == tokenStack.pop()}?

One thing I noticed right away is that the
SemanticException thrown in the event that this is not
true contains the exact text.  I don't see in the docs
whether and how to customize this text; I am currently
doing this:

{t == tokenStack.pop() /*unexpected token on the
stack*/}?

which is good enough, but I just wondered if there was
a better way.

TIA,
Matt


__________________________________
Do you Yahoo!?
SBC Yahoo! DSL - Now only $29.95 per month!
http://sbc.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Wed Jun 18 12:25:18 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] validating semantic predicates
In-Reply-To: <0881AC7F2F339C40BC6F7983D1E0BEC9744CC6@mail2k.embarcadero-ca.com>
Message-ID: <20030618192518.34688.qmail@web20421.mail.yahoo.com>

That's one way... thanks.

-Matt

--- Ari Steinberg <ari.steinberg@embarcadero-ca.com>
wrote:
> I had a similar problem in my grammar.  To get
> around it, I caught the semantic exception and then
> throw a new one with a better error message.  My
> parser has a reference to the lexer so I created
> getLine() and getColumn() functions which return the
> current line and column the lexer so that the
> exception returns valid data.
> 
> myRule:
> ...
> ;
> exception
> catch[SemanticException ex]
> {
>     throw SemanticException( "Syntax error in
> Explain statement", getFilename(), getLine(),
> getColumn());
> }
> 
> Cheers,
> 
> Ari
> 
> -----Original Message-----
> From: Matt Benson [mailto:gudnabrsam@yahoo.com]
> Sent: Wednesday, June 18, 2003 2:45 PM
> To: Antlr List
> Subject: [antlr-interest] validating semantic
> predicates
> 
> 
> I have Tooled my grammar and it has generated a
> parser.  I have written the grammar to process the
> different elements of the file by calling methods on
> a
> registered implementation of a handler object. 
> Thus,
> I am currently concerned only with content.  I am
> providing the handler a Stack of relevant tokens in
> case something farther away than the current context
> is needed.  So every time I enter a rule, I push the
> primary token onto the stack (remember I'm dealing
> with XML so this is pretty straightforward), and pop
> it before I return from the rule.  I figure while
> I'm
> doing the pop, I might as well do a kind of sanity
> check by way of a validating semantic predicate:
> 
> {t == tokenStack.pop()}?
> 
> One thing I noticed right away is that the
> SemanticException thrown in the event that this is
> not
> true contains the exact text.  I don't see in the
> docs
> whether and how to customize this text; I am
> currently
> doing this:
> 
> {t == tokenStack.pop() /*unexpected token on the
> stack*/}?
> 
> which is good enough, but I just wondered if there
> was
> a better way.
> 
> TIA,
> Matt
> 
> 
> __________________________________
> Do you Yahoo!?
> SBC Yahoo! DSL - Now only $29.95 per month!
> http://sbc.yahoo.com
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
SBC Yahoo! DSL - Now only $29.95 per month!
http://sbc.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mtiller at ford.com  Wed Jun 18 13:15:16 2003
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Cloning/dup* seriously broken for C++???
Message-ID: <AF02884D0976D311A014009027A8F1FB1FD54EE3@na1fcm10.dearborn.ford.com>

I have spent my entire day trying to figure out how to do something that should be really simple.  I've got a declaration statement, essentially it looks like this:
 
declaration
  : pre:prefix type:type list:component_list
  ;
 
Now I need to iterate over component_list and add a *COPY* of prefix and type as children of each node in component_list.  I have tried a dozen ways of doing this and none of them have worked.  Here are a few examples:
 
     for(antlr::RefAST cur=#list;cur!=antlr::nullAST;cur=cur->getNextSibling()) {
                cur->addChild(#([DECL_TYPE_INFO, "TypeInfo"],
                        astFactory->dupTree(#pre),
                        astFactory->dupTree(#type))));
     }
 
     for(antlr::RefAST cur=#list;cur!=antlr::nullAST;cur=cur->getNextSibling()) {
                cur->addChild(#pre->clone());
                cur->addChild(#type->clone());
     }
 
     for(antlr::RefAST cur=#list;cur!=antlr::nullAST;cur=cur->getNextSibling()) {
                cur->addChild(#pre);
                cur->addChild(#type);
     }
 
    ...etc...
 
All these problems see to stem from the (sorry I have to say it) extremely complicated family of types including (but not limited to): ASTRef, ASTRefCount, RefAST, RefMyCustomNodeAST, AST, BaseAST, CommonAST, etc. :-)
 
I can certainly understand why the ASTRefCount class keeps a count on the references to a particular pointer.  I'm familiar with this kind of "smart pointer".  What I found very strange is that the pointer has to keep a pointer back to ASTRefCount?!?!?!?  This seems to be the cause of my tremendous confusion (I would create an ASTRef and pass a pointer into its constructor and then when I did a get() on the reference, it gave me a pointer to a completely different object!!!!).
 
I tried the recently announced development snapshot but I couldn't get it to run.  Does anybody have a fix for this issue?!?  I'm completely stuck!!!  I cannot move forward on this project until I have some kind of workaround.
 
Thanks for any help.
 
--
Mike
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030618/68bdd6e2/attachment.html
From andrei at metalanguage.com  Wed Jun 18 13:16:53 2003
From: andrei at metalanguage.com (uprightness_of_character)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Re: Suggestion: syntactic sugar for generateAmbigWarnings = false;
In-Reply-To: <bcng6f+n1n5@eGroups.com>
Message-ID: <bcqhbl+t35a@eGroups.com>

I (predictably) concur. In my projects with antlr (a C-like language 
translator, a Cecil documentation system, and an email filter) I found 
myself quite often needing to express precedence between rules with 
overlapping FIRST sets. The generated code is also more efficient 
than, for example, making sure the FIRST sets are non-overlapping by 
using ~(THIS | THAT | THE_OTHER). 

Using "options { generateAmbigWarnings = false; } : ..." works fine, 
but it adds clutter to the code. In a rule with multiple alternatives, 
the option might hide ambiguities that you *would* care to know about. 
If you want precision, the parentheses that you need to insert would 
add yet some more clutter to the code and render the grammar less 
readable.

This all makes for a pretty decent case for adding "||" as an 
alternative separator imho.


Andrei

--- In antlr-interest@yahoogroups.com, "antlrlist" <antlrlist@y...> 
wrote:
> 
> In the ANTLR Options documentation page 
> (http://www.antlr.org/doc/options.html#_bb15), you can see the 
> following warning:
> 
> [Warning: you should know what you are doing before you use this 
> option.  I deliberately made it a pain to shut warnings off (rather 
> than a single character operator) so you would not just start 
turning 
> off all the warnings.  I thought for long time before implementing 
> this exact mechanism.  I recommend a comment in front of any use of 
> this option that explains why it is ok to hush the warning.] 
> 
> Right, this warning concerns the WarnWhenFollowAmbig option. But I 
> think this may be applicable to generateAmbigWarnings as well.
> 
> What do you think?
> 
> Enrique
> 
> 
> --- In antlr-interest@yahoogroups.com, "uprightness_of_character" 
> <andrei@m...> wrote:
[snip]


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From andrei at metalanguage.com  Wed Jun 18 13:37:51 2003
From: andrei at metalanguage.com (uprightness_of_character)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Re: Suggestion: syntactic sugar for generateAmbigWarnings = false;
In-Reply-To: <bcqhbl+t35a@eGroups.com>
Message-ID: <bcqiiv+umi6@eGroups.com>

--- In antlr-interest@yahoogroups.com, "uprightness_of_character" 
<andrei@m...> wrote:
> I (predictably) concur. In my projects with antlr (a C-like language 
> translator, a Cecil documentation system, and an email filter) I 
found 
> myself quite often needing to express precedence between rules with 
> overlapping FIRST sets. The generated code is also more efficient 
> than, for example, making sure the FIRST sets are non-overlapping by 
> using ~(THIS | THAT | THE_OTHER). 

One more thing. antlr should still generate warnings if the FIRST set 
of the left-hand side of a "||" includes the FIRST set of the 
right-hand side. That means the second alternative is "dead" - never 
reachable. For example:

macro_body
    : (~NEWLINE || BACKSLASH NEWLINE)*
    ;

In this case, the first alternative eats everything, including the 
backslash, so the second alternative never gets a crack. In this case, 
antlr should give a warning:

"Warning: alt 2 of rule macro_body not reachable"

When the FIRST set of the lhs does not include the FIRST set of the 
rhs, the "||" operator might be helpful in parsing languages without 
being overly uptight about defining disjoint FIRST sets.


Andrei


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From epovazan at telus.net  Wed Jun 18 14:24:02 2003
From: epovazan at telus.net (Edward Povazan)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Re: Stopping *
Message-ID: <000e01c335df$f1888120$6401a8c0@Epsilon>

Thank Enrique and Ric,

Thanks for the predicate info - I haven't needed them until now. I managed
to adjust my grammar and with k=3 it now parses all my test cases, however I
have non determinism to handle (or ignore, as I don't see how it can error).
I will play with the predicates a little though, I don't like warnings.

Thanks
-Ed


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Thu Jun 19 03:18:45 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Cloning/dup* seriously broken for C++???
In-Reply-To: <AF02884D0976D311A014009027A8F1FB1FD54EE3@na1fcm10.dearborn.ford.com>; from mtiller@ford.com on Wed, Jun 18, 2003 at 04:15:16PM -0400
References: <AF02884D0976D311A014009027A8F1FB1FD54EE3@na1fcm10.dearborn.ford.com>
Message-ID: <20030619121845.O692@cs.utwente.nl>

Hi,

On Wed, Jun 18, 2003 at 04:15:16PM -0400, Tiller, Michael (M.M.) wrote:
> I have spent my entire day trying to figure out how to do something that
> should be really simple.  I've got a declaration statement, essentially it
> looks like this:
>
> declaration
>   : pre:prefix type:type list:component_list
>   ;
>
> Now I need to iterate over component_list and add a *COPY* of prefix and
> type as children of each node in component_list.  I have tried a dozen ways
> of doing this and none of them have worked.  Here are a few examples:
>
>      for(antlr::RefAST cur=#list;cur!=antlr::nullAST;cur=cur->getNextSibling()) {
>                 cur->addChild(#([DECL_TYPE_INFO, "TypeInfo"],
>                         astFactory->dupTree(#pre),
>                         astFactory->dupTree(#type))));
>      }
>
>      for(antlr::RefAST cur=#list;cur!=antlr::nullAST;cur=cur->getNextSibling()) {
>                 cur->addChild(#pre->clone());
>                 cur->addChild(#type->clone());
>      }
>
>      for(antlr::RefAST cur=#list;cur!=antlr::nullAST;cur=cur->getNextSibling()) {
>                 cur->addChild(#pre);
>                 cur->addChild(#type);
>      }

It looks like you're modifying the tree while you're stepping through it?
I'm not sure if that will work... Try turning off AST generation for the
declaration rule. Then collect the trees generated by prefix/type/comp_list
(basically what you're already doing now). Then use a loop to insert copies
of all the parts you are glueing together. Something like (abbreviated the
duptrees):

RefAST nchild = #( duptree(cur), duptree(#pre), duptree(#type) );
#declaration = #( nullAST, #declaration, nchild );

The above may need some tweaking. I'm not a big star in writing AST
construction stuff. The nullAST thing adds them as siblings to the returned
tree if I recall right.

Also grab the print_tree template from

http://wwwhome.cs.utwente.nl/~klaren/antlr/print_tree.h

It prints out a more or less readable dump of an AST tree so you can see
what happens while copying, or between operations.

Other idea is to open up the component_list rule safes you the manual
traversal of the list:

declaration!
  : pre:prefix type:type ( comp:component
		{
			#declaration = #( nullAST, #declaration,
						#( duptree(#pre), duptree(#type), duptree(#comp) ) );
		}
		)+
  ;

> All these problems see to stem from the (sorry I have to say it) extremely
> complicated family of types including (but not limited to): ASTRef,
> ASTRefCount, RefAST, RefMyCustomNodeAST, AST, BaseAST, CommonAST, etc. :-)

I'm afraid we have to live with those in the 2.x.x series.

> I tried the recently announced development snapshot but I couldn't get it
> to run.  Does anybody have a fix for this issue?!?  I'm completely stuck!!!
> I cannot move forward on this project until I have some kind of workaround.

The dev snapshot contains some fixes to the RefCounter. So I'd definitely
grab it (non serious though only memory leak if I recall right). Might look
at a diff between the release version you have now and the support lib and
manually port over.

Add default comment about bugreports. Compiler/system/error output. This is
not helping I'm afraid.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "You know how to use that thing?" [pointing to the sword]
  "Sure.. The pointy end goes into the other guy."
  --- The Mask of Zorro

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From berserksangr at poczta.onet.pl  Thu Jun 19 06:51:19 2003
From: berserksangr at poczta.onet.pl (berserksangr)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] ANTLR and runtime token assigning - URGENT
Message-ID: <470927388.20030619155119@poczta.onet.pl>

Hello,

I have two problems with my ANTLR - generated Parser/Lexer (I'm new in this things).  Please, help me... I'm stuck.

(At the end there is a part of grammar file that this questions are about)

1. How can I set "SEPARATOR" token value from my grammar file in produced CSVLexer/CSVParser?
I mean, I wrote class that uses this Parser/Lexer but I want the class' user to have ability to set SEPARATOR to ';'
instead of ",". How is it possible to define variable SEPARATOR in Parser/Lexer that will be used to process input
without running antlr.Tool again?
I wonder why ANTLR hard-code tokens instead of exposing them in easy-to-modify variables...

2. In my grammar I tried to put
RECORD  : (~('"'|SEPARATOR|'\r'|'\n'))+;
instead of
RECORD  : (~('"'|','|'\r'|'\n'))+;

but antlr.Tool throws error:
csv.g:119:13: This subrule cannot be inverted.  Only subrules of the form:
     (T1|T2|T3...) or
     ('c1'|'c2'|'c3'...)
 may be inverted (ranges are also allowed).
 Exiting due to errors.

How can I do that?

******************************************************

Part of my grammar file:
---------------------------------------
class CSVLexer extends Lexer;
options 
{
    defaultErrorHandler=false;
    k=2; 
    charVocabulary = '\3'..'\377';
}
RECORD  : (~('"'|','|'\r'|'\n'))+;
SEPARATOR : ',';                //
QRECORD : '"'!('"''"'|~('"'))+'"'!;
NEWLINE : '\r''\n' //DOS
                | '\r'                  //MAC
                | '\n'                  //UNIX
                { newline(); };
--------------------------------------

  --
Best regards,
 Przemyslaw Jakierski


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From j_scandaliaris at yahoo.es  Thu Jun 19 06:52:51 2003
From: j_scandaliaris at yahoo.es (Jorge Scandaliaris)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Re: manual AST construction: what am I doing wrong?
In-Reply-To: <bcnikk+ivi7@eGroups.com>
Message-ID: <000001c3366a$17d1e210$03001aac@zoys>


> -----Original Message-----
> From: antlrlist [mailto:antlrlist@yahoo.com]
 
> I just want to confirm that heterogenous ASTs work very well in java
> mode (even if there are some tricks to know, like only modifying ##
> at the ending action of each rule :| ).

Enrique (or somebody that can reply), can you develop the point you
mentioned here, i.e. ...ONLY MODIFYING ## AT THE ENDING ACTION OF EACH
RULE? 

I was already with my grammar half-way done, when I noticed I wasn`t
respecting the trick you mention. Because everything worked I didn't
touched it :), but today I came across one rule where this was causing
trouble. I want to identify why it is a problem and in what conditions,
'cause respecting your "trick" would make me re visit all the grammar,
and doing nothing can explode things up.
One clue I have, is that it might be because the problematic rule is
recursive:
 expression!:
	:	{## = ##(##,#[IMAG_NODE]);// only way I managed to
create 			// manually only one node for a rule. This node
collects the 		// info from sub rule NODES
		primary 
	{	## actions here}
	(	operator primary
	{	##actions here}
	)*
	{	## actions here}
	;

primary
	: some stuff | expression
	;

When I can I put ## actions at the end, but in cases where I have
(...)*, this forces me to create temporary objects to collect the info
from the loop, and then I have to pass it to ##. Using ## directly saves
me from this, and as I said above, it works OK in many rules.

Cheers,

Jorge



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From j_scandaliaris at yahoo.es  Thu Jun 19 06:56:20 2003
From: j_scandaliaris at yahoo.es (Jorge Scandaliaris)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Re: manual AST construction: what am I doing wrong?
In-Reply-To: <000001c3366a$17d1e210$03001aac@zoys>
Message-ID: <000101c3366a$94557e50$03001aac@zoys>

Forgot to mention that is C++ code generation, in case the answer is
dependent on that :)

Jorge

> -----Original Message-----
> From: Jorge Scandaliaris [mailto:j_scandaliaris@yahoo.es]
> Sent: Thursday, June 19, 2003 3:53 PM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Re: manual AST construction: what am I
doing
> wrong?
> 
> 
> > -----Original Message-----
> > From: antlrlist [mailto:antlrlist@yahoo.com]
> 
> > I just want to confirm that heterogenous ASTs work very well in java
> > mode (even if there are some tricks to know, like only modifying ##
> > at the ending action of each rule :| ).
> 
> Enrique (or somebody that can reply), can you develop the point you
> mentioned here, i.e. ...ONLY MODIFYING ## AT THE ENDING ACTION OF EACH
> RULE?
> 
> I was already with my grammar half-way done, when I noticed I wasn`t
> respecting the trick you mention. Because everything worked I didn't
> touched it :), but today I came across one rule where this was causing
> trouble. I want to identify why it is a problem and in what
conditions,
> 'cause respecting your "trick" would make me re visit all the grammar,
> and doing nothing can explode things up.
> One clue I have, is that it might be because the problematic rule is
> recursive:
>  expression!:
> 	:	{## = ##(##,#[IMAG_NODE]);// only way I managed to
> create 			// manually only one node for a rule.
This node
> collects the 		// info from sub rule NODES
> 		primary
> 	{	## actions here}
> 	(	operator primary
> 	{	##actions here}
> 	)*
> 	{	## actions here}
> 	;
> 
> primary
> 	: some stuff | expression
> 	;
> 
> When I can I put ## actions at the end, but in cases where I have
> (...)*, this forces me to create temporary objects to collect the info
> from the loop, and then I have to pass it to ##. Using ## directly
saves
> me from this, and as I said above, it works OK in many rules.
> 
> Cheers,
> 
> Jorge
> 
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mtiller at ford.com  Thu Jun 19 07:23:27 2003
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Cloning/dup* seriously broken for C++???
Message-ID: <AF02884D0976D311A014009027A8F1FB1FD54EF1@na1fcm10.dearborn.ford.com>

Ric,

  Thanks for your suggestions, but perhaps I wasn't really clear about the issue (see my previous message titled "Cloning" for a few other details).

  I'm not having a problem with the tree construction per se.  I can build the tree exactly the way I want it.  The problem is in the reference counting data structures.  In my previous example, every time I would dup/clone the "pre" or "type" data structures, a copy would get made but the "RefAST" structure would always point back to the original?!?  This messed up the data structures.

  In looking through the list, I found an email that had a useful suggestion.  If you look at the definition of BaseAST's copy constructor in antlr-2.7.2, you find this:

BaseAST::BaseAST(const BaseAST& other)
: AST(other) // RK: don't copy links! , down(other.down), right(other.right)
{
}

  Note that you have correctly pointed out that when making a copy of a node, you do not want to copy its down and right links.  That wouldn't make sense since this a copy.  But, it appears that there was something forgotten here.  The "ref" member inherited from "AST" should also not be copied since "ref" points back to the ASTRef that is looking at the node.  The AST copy constructor preserves the value of "ref".  THIS IS A MISTAKE (as far as I can tell).

  Here is a typical scenario:

 
declaration
  : pre:prefix type:type list:component_list
    {
      for(antlr::RefAST cur=#list;
          cur!=antlr::nullAST;
          cur=cur->getNextSibling()) {
              cur->addChild(#([DECL_TYPE_INFO, "TypeInfo"],
                      astFactory->dupTree(#pre),
                      astFactory->dupTree(#type))));
     }
    }
  ;

The #pre tree does indeed get duplicated.  That isn't the problem (I can see this from the output of my clone() method).  The problem is that dup_pre has the same "ref" value that #pre.  When you try to wrap an ASTRef around dup_pre, the ASTRef tries to be clever and sees that "ref" for dup_pre is !=NULL (this is the mistake...it should be because nothing, up to this point, has actually referenced dup_pre).  Seeing that "ref" is non-NULL it says "Let me be clever and get rid of this unnecessary duplicate and go back and reference the value of "ptr" that this "ref" is using...clever, but wrong.

I think there is a simple fix for this.  Note that BaseAST cannot set the value of "ref" to be zero and in fact calls the AST copy constructor.  If you look at the AST copy constructor, you see this:

  AST(const AST& other) : ref(other.ref->increment()) {}

Yikes!!!  This is a copy!  It shouldn't use the value of ref from "other".  Instead, it should initialize ref as if this was a completely new AST, e.g.

  AST(const AST& other) : ref(0) {}

I didn't come up with all of this on my own.  I found most of this in a previous discussion in the newsgroup.

Looking at your development snapshot, I see this has been addressed.  I've patched 2.7.2 and so far (fingers crossed) I have been able to dup* things OK.  Of course, if I have any other problems I'll be sure to make everyone aware of them. :-)

--
Mike

> -----Original Message-----
> From: Ric Klaren [mailto:klaren@cs.utwente.nl]
> Sent: Thursday, June 19, 2003 6:19 AM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] Cloning/dup* seriously broken for C++???
> 
> 
> Hi,
> 
> On Wed, Jun 18, 2003 at 04:15:16PM -0400, Tiller, Michael 
> (M.M.) wrote:
> > I have spent my entire day trying to figure out how to do 
> something that
> > should be really simple.  I've got a declaration statement, 
> essentially it
> > looks like this:
> >
> > declaration
> >   : pre:prefix type:type list:component_list
> >   ;
> >
> > Now I need to iterate over component_list and add a *COPY* 
> of prefix and
> > type as children of each node in component_list.  I have 
> tried a dozen ways
> > of doing this and none of them have worked.  Here are a few 
> examples:
> >
> >      for(antlr::RefAST 
> cur=#list;cur!=antlr::nullAST;cur=cur->getNextSibling()) {
> >                 cur->addChild(#([DECL_TYPE_INFO, "TypeInfo"],
> >                         astFactory->dupTree(#pre),
> >                         astFactory->dupTree(#type))));
> >      }
> >
> >      for(antlr::RefAST 
> cur=#list;cur!=antlr::nullAST;cur=cur->getNextSibling()) {
> >                 cur->addChild(#pre->clone());
> >                 cur->addChild(#type->clone());
> >      }
> >
> >      for(antlr::RefAST 
> cur=#list;cur!=antlr::nullAST;cur=cur->getNextSibling()) {
> >                 cur->addChild(#pre);
> >                 cur->addChild(#type);
> >      }
> 
> It looks like you're modifying the tree while you're stepping 
> through it?
> I'm not sure if that will work... Try turning off AST 
> generation for the
> declaration rule. Then collect the trees generated by 
> prefix/type/comp_list
> (basically what you're already doing now). Then use a loop to 
> insert copies
> of all the parts you are glueing together. Something like 
> (abbreviated the
> duptrees):
> 
> RefAST nchild = #( duptree(cur), duptree(#pre), duptree(#type) );
> #declaration = #( nullAST, #declaration, nchild );
> 
> The above may need some tweaking. I'm not a big star in writing AST
> construction stuff. The nullAST thing adds them as siblings 
> to the returned
> tree if I recall right.
> 
> Also grab the print_tree template from
> 
> http://wwwhome.cs.utwente.nl/~klaren/antlr/print_tree.h
> 
> It prints out a more or less readable dump of an AST tree so 
> you can see
> what happens while copying, or between operations.
> 
> Other idea is to open up the component_list rule safes you the manual
> traversal of the list:
> 
> declaration!
>   : pre:prefix type:type ( comp:component
> 		{
> 			#declaration = #( nullAST, #declaration,
> 						#( 
> duptree(#pre), duptree(#type), duptree(#comp) ) );
> 		}
> 		)+
>   ;
> 
> > All these problems see to stem from the (sorry I have to 
> say it) extremely
> > complicated family of types including (but not limited to): ASTRef,
> > ASTRefCount, RefAST, RefMyCustomNodeAST, AST, BaseAST, 
> CommonAST, etc. :-)
> 
> I'm afraid we have to live with those in the 2.x.x series.
> 
> > I tried the recently announced development snapshot but I 
> couldn't get it
> > to run.  Does anybody have a fix for this issue?!?  I'm 
> completely stuck!!!
> > I cannot move forward on this project until I have some 
> kind of workaround.
> 
> The dev snapshot contains some fixes to the RefCounter. So 
> I'd definitely
> grab it (non serious though only memory leak if I recall 
> right). Might look
> at a diff between the release version you have now and the 
> support lib and
> manually port over.
> 
> Add default comment about bugreports. Compiler/system/error 
> output. This is
> not helping I'm afraid.
> 
> Cheers,
> 
> Ric
> --
> -----+++++****************************************************
*+++++++++-------
>     ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 
> 4893722  ----
> -----+++++****************************************************
*+++++++++-------
>   "You know how to use that thing?" [pointing to the sword]
>   "Sure.. The pointy end goes into the other guy."
>   --- The Mask of Zorro
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Thu Jun 19 07:38:08 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Cloning/dup* seriously broken for C++???
In-Reply-To: <AF02884D0976D311A014009027A8F1FB1FD54EF1@na1fcm10.dearborn.ford.com>; from mtiller@ford.com on Thu, Jun 19, 2003 at 10:23:27AM -0400
References: <AF02884D0976D311A014009027A8F1FB1FD54EF1@na1fcm10.dearborn.ford.com>
Message-ID: <20030619163808.S692@cs.utwente.nl>

On Thu, Jun 19, 2003 at 10:23:27AM -0400, Tiller, Michael (M.M.) wrote:
> Looking at your development snapshot, I see this has been addressed.  I've
> patched 2.7.2 and so far (fingers crossed) I have been able to dup* things
> OK.  Of course, if I have any other problems I'll be sure to make everyone
> aware of them. :-)


Good to hear :)

I'm still interested in the build problems you had with the snapshot?

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "Of all the things i've lost i miss my mind the most -Ozzy Osbourne


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From defordusa at yahoo.com  Thu Jun 19 11:43:22 2003
From: defordusa at yahoo.com (defordusa)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Newbie - Help with keywords and IDs
Message-ID: <bct08a+1rkf@eGroups.com>

I have an identified specified as:

TX : (ALPHA)(ALPHA)+
   ;

I also have several classes of keywords like this:

FP : "DE" | "LE" | "LA"
   ;

LP : "VAN" | "VON" | "MAC"
   ;

...
...
Also several others
...
...

My problem occurs because I cannot get this to work because of 
ambiguity and have thus moved FP and LP into the parser as fp and lp 
respecitively and added "options {testLiterals=true;}" to TX as well. 
This does not appear to be an ideal solution. I know I could have 
also created a "tokens" section in the lexer but then I have a one-to-
one correspondence between each literal string and token type instead 
of classes of tokens.

Is there another way of doing this so that I can keep the FP and LP 
in the lexer?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From monaabs at yahoo.com  Thu Jun 19 14:32:08 2003
From: monaabs at yahoo.com (monaabs)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] unicode
Message-ID: <bcta4o+p3a4@eGroups.com>

Hi , 
I have switched to 2.7.2 for supporting japanese characters . When i 
tried to use japanse characters the parser crashes with an abnormal 
program termination. Do i have to write a .g file for handling 
unicode . Also is there some different way to call lexer/parser . 
Does unicode code have to be called first to convert the tokens.

I am dealing with c++.

Thanks
Mona


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From epovazan at telus.net  Thu Jun 19 20:34:30 2003
From: epovazan at telus.net (Edward Povazan)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] grammar editor?
Message-ID: <001201c336dc$dbd85a00$6401a8c0@Epsilon>

Hello,

I bet this is too much to hope for, but is there an antlr editor out there?
One which allows different views of the grammar, ie, without predicates and
without code/returns etc.
I am thinking it should be pretty easy to generate 'views' using antlr to
parse itself, which would be useful enough even if you can't edit directly.
"Just" use a tree parser to emit each view. Anyone tried this?

-Ed


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Matthew.Ford at forward.com.au  Thu Jun 19 22:47:48 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] unicode
References: <bcta4o+p3a4@eGroups.com>
Message-ID: <001901c336ef$7b971b50$0200a8c0@NOTEBOOK>

Hi Mona,
Sorry I don't use C++.  Java handles unicode internally but for C++ I think
you need some extra support.
What do you mean the parser crashes? Is this the Antlr Tool or your
generated parser?
matthew
----- Original Message -----
From: "monaabs" <monaabs@yahoo.com>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, June 20, 2003 7:32 AM
Subject: [antlr-interest] unicode


> Hi ,
> I have switched to 2.7.2 for supporting japanese characters . When i
> tried to use japanse characters the parser crashes with an abnormal
> program termination. Do i have to write a .g file for handling
> unicode . Also is there some different way to call lexer/parser .
> Does unicode code have to be called first to convert the tokens.
>
> I am dealing with c++.
>
> Thanks
> Mona
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From anthony.kong at ufjia.com  Fri Jun 20 01:35:05 2003
From: anthony.kong at ufjia.com (ahwkong2000)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Syntax I do not understand
Message-ID: <bcugvp+nnd1@eGroups.com>

Hi, all,

I think the list has grown rather quiet last few days. :-)

I am new to antlr and would like to know more about how to build a
lexer and parser. I am studying the TinyBasic.g

In the file I encountered:

functionDefinition
        options {defaultErrorHandler = true;} // let ANTLR handle
errors
        {
                int fnType=0;
                Vector pVector=null;
        }
        :       p:"function"^ fnType=n:newFunction
{#p.setType(FUNCTION_DEF);}
                        {
                                theContext.pushScope(new
FunctionScope(theContext.getCurrentScope()));
                        }
                        pVector=params:parameters       eol!
                // now parse the body of the class
                cb:procedureBlock
                quit:"end" "function"! eol!
                {
                        #quit.setType(EXIT_MODULE);
                        DTCodeType fnc;
                        fnc=new
DTFunction(fnType,#params,#cb,theContext.getCurren
tScope(),pVector,#n.getText());
                        #functionDefinition =
#(#[FUNCTION_DEF,"FUNCTION_DEF"],#functionDefinition);
                        theContext.popScope();
                        theContext.insertFunction(#n.getText(),fnc);
                }


I do not quite understand the line:

                        #functionDefinition =
#(#[FUNCTION_DEF,"FUNCTION_DEF"],#functionDefinition);

What does it suppose to do here?


Any help is appreciated!


Anthony


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From temptressmoon52000 at yahoo.com  Fri Jun 20 03:10:38 2003
From: temptressmoon52000 at yahoo.com (temptressmoon52000)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Im looking for someone honest, yet daring and wild.
Message-ID: <bcumiu+lkoj@eGroups.com>

 If you want to get with me intimately and thats it then say so and I'll tell you how I feel. More than likely thats what I want as well and we both can be happy. S then just say so. No need to sugarcoat your motives. If you have a good job/career and your confident in your lifestyle then your perfect for me. I wouldnt mind finding a friend to work out with to get all sweaty and then jump into my pool naked for some fun. look me up under "alliekat" on my casual sex finder site.
 http://www.adultsexads.net/landing.asp?afl=MYHO


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From j_scandaliaris at yahoo.es  Fri Jun 20 03:56:57 2003
From: j_scandaliaris at yahoo.es (Jorge Scandaliaris)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Syntax I do not understand
In-Reply-To: <bcugvp+nnd1@eGroups.com>
Message-ID: <000601c3371a$afca6460$03001aac@zoys>

Hi,
	That is used for controlling the AST construction. See
http://www.antlr.org/doc/trees.html#_bb1 for more details.

Jorge 

> -----Original Message-----
> From: ahwkong2000 [mailto:anthony.kong@ufjia.com]
> Sent: Friday, June 20, 2003 10:35 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Syntax I do not understand
> 
> Hi, all,
> 
> I think the list has grown rather quiet last few days. :-)
> 
> I am new to antlr and would like to know more about how to build a
> lexer and parser. I am studying the TinyBasic.g
> 
> In the file I encountered:
> 
> functionDefinition
>         options {defaultErrorHandler = true;} // let ANTLR handle
> errors
>         {
>                 int fnType=0;
>                 Vector pVector=null;
>         }
>         :       p:"function"^ fnType=n:newFunction
> {#p.setType(FUNCTION_DEF);}
>                         {
>                                 theContext.pushScope(new
> FunctionScope(theContext.getCurrentScope()));
>                         }
>                         pVector=params:parameters       eol!
>                 // now parse the body of the class
>                 cb:procedureBlock
>                 quit:"end" "function"! eol!
>                 {
>                         #quit.setType(EXIT_MODULE);
>                         DTCodeType fnc;
>                         fnc=new
> DTFunction(fnType,#params,#cb,theContext.getCurren
> tScope(),pVector,#n.getText());
>                         #functionDefinition =
> #(#[FUNCTION_DEF,"FUNCTION_DEF"],#functionDefinition);
>                         theContext.popScope();
>                         theContext.insertFunction(#n.getText(),fnc);
>                 }
> 
> 
> I do not quite understand the line:
> 
>                         #functionDefinition =
> #(#[FUNCTION_DEF,"FUNCTION_DEF"],#functionDefinition);
> 
> What does it suppose to do here?
> 
> 
> Any help is appreciated!
> 
> 
> Anthony
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lubos.vnuk at rts.at  Fri Jun 20 04:35:48 2003
From: lubos.vnuk at rts.at (Lubos Vnuk)
Date: Mon Dec 20 16:15:43 2004
Subject: [antlr-interest] Re: Newbie - Help with keywords and IDs
In-Reply-To: <bct08a+1rkf@eGroups.com>
Message-ID: <bcurik+67pv@eGroups.com>

Hi,

what I do in these cases is put the FP, LP...
directly as alternatives into the TX rule.
Then add {$setType(YOURTOKEN);} action to each alternative.
And increase the lookahead properly. Might help.

Lubos.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From antlrlist at yahoo.com  Fri Jun 20 07:02:22 2003
From: antlrlist at yahoo.com (antlrlist)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Re: ANTLR and runtime token assigning - URGENT
In-Reply-To: <470927388.20030619155119@poczta.onet.pl>
Message-ID: <bcv45e+p6ne@eGroups.com>


> 1. How can I set "SEPARATOR" token value from my grammar file in
produced CSVLexer/CSVParser?
> I mean, I wrote class that uses this Parser/Lexer but I want the
class' user to have ability to set SEPARATOR to ';'
> instead of ",". How is it possible to define variable SEPARATOR in
Parser/Lexer that will be used to process input
> without running antlr.Tool again?

The only way I could think about is accepting both "," and ";", like this:

SEPARATOR : ';' | ',';

Now the lexer recognizes both entries like SEPARATOR at the same time.
If you don't want to recognize them simultaneously use a class member:

class CSVLexer extends Lexer;
...
{
   protected char sepChar = ',';
   ... // your gets and sets here
}

SEPARATOR : { sepChar==',' }? ','
          | { sepChar==';' }? ';'
          ;

> I wonder why ANTLR hard-code tokens instead of exposing them in
easy-to-modify variables...

I had the same thoughts until I begun to understand the code that
ANTLR generates, and how it is generated. The idea is that you can't
generate all those "switchs" if you don't have fixed values...

> 2. In my grammar I tried to put
> RECORD  : (~('"'|SEPARATOR|'\r'|'\n'))+;
> instead of
> RECORD  : (~('"'|','|'\r'|'\n'))+;
> 
> but antlr.Tool throws error:
> csv.g:119:13: This subrule cannot be inverted.  Only subrules of the
form:
>      (T1|T2|T3...) or
>      ('c1'|'c2'|'c3'...)
>  may be inverted (ranges are also allowed).
>  Exiting due to errors.
> 
> How can I do that?
> 

If you're going to have ';' or ',' as SEPARATORS, then write:

RECORD  : (~('"'|','|';'|'\r'|'\n'))+;

Sorry, but you just can't have such a "customizable separator
character". You have to specify the character set you're going to use
on each rule; if not, then ANTLR just won't be able to generate the
right code. The analizer's code is based on the "constantness" of your
tokens.

If you want to have such a customizable analizer, you'll have to
create it manually; A lexer class only needs to implement the
TokenStream interface.

Cheers!


Enrique


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From antlrlist at yahoo.com  Fri Jun 20 07:08:43 2003
From: antlrlist at yahoo.com (antlrlist)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Re: Cloning
In-Reply-To: <AF02884D0976D311A014009027A8F1FB1FD54EDE@na1fcm10.dearborn.ford.com>
Message-ID: <bcv4hb+q9rv@eGroups.com>

> The following is a code fragment in my "clone" method for my custom
C++ AST node:
>  
>     /* CustomNodeType *ast = new CustomNodeType(*this); */
>     std::cout << "      Clone created at " << ast << "(this=" <<
this << ")" << std::endl;
>     antlr::RefAST ret(ast);
>     std::cout << "      Clone ref.get() (after assignment): " <<
ret.get() << std::endl;
 
>       Clone created at 0xa0459c8(this=0xa0450d0)
>       Clone ref.get() (after assignment): 0xa0450d0
>  

Does it do the same if you use "new"? I mean like this:

antlr::RefAST ret = new antlr::RefAST(ast);

Cheers,

Enrique


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From meissnersd at yahoo.com  Fri Jun 20 07:46:29 2003
From: meissnersd at yahoo.com (Karl Meissner)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] newbie question
Message-ID: <20030620144629.82712.qmail@web40613.mail.yahoo.com>

Hi I am new to ANTLR. I have just started working on a grammar.

I have a lot of lexical token rules defined already and a simple top level parser rule of the form

topParseRule :   ( TokenRule1  | TokenRule2 ) + ; 

It eats  token 1 and 2  but then it hit a token type 3.  It finds the token but then the 
parse rule does not accept it.   I have default error set to true.   

When the rule did not accept token 3, I expected the parse rule
to throw an recognition exception.  Instead it silently exited.   When I stepped through the
generated  topParseRule function,   it was finding token3 but then sending it to the default case
in the switch which just broken out of the for loop with no other action.

So...is this expected behavior?   Is there a way I can put a throw in the default case from the
grammar definition?

The other idea I had was just checking if there were tokens left on the input stream.  What is the
call to examine the queue of unprocessed tokens?

I am using 2.7.2 and the C# language implementation if it makes any difference. 

Thanks for any help
Karl 



__________________________________
Do you Yahoo!?
SBC Yahoo! DSL - Now only $29.95 per month!
http://sbc.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri Jun 20 08:11:39 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Syntax I do not understand
Message-ID: <72C9789739C4214096AE945753B11EA32A5D7D@mypxmail04.bco-home.com>

This is an idiom for adding an imaginary root to a tree for easier tree
parsing.  Check out Ter's lectures on tree building.

http://www.cs.usfca.edu/~parrt/course/652/index.html
http://www.cs.usfca.edu/~parrt/course/652/lectures/java.ast.html "Imaginary
Nodes" section

Monty

-----Original Message-----
From: ahwkong2000 [mailto:anthony.kong@ufjia.com] 
Sent: Friday, June 20, 2003 1:35 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Syntax I do not understand



I do not quite understand the line:

                        #functionDefinition =
#(#[FUNCTION_DEF,"FUNCTION_DEF"],#functionDefinition);

What does it suppose to do here?


Any help is appreciated!


Anthony


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri Jun 20 09:01:20 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] newbie question
Message-ID: <72C9789739C4214096AE945753B11EA32A5D81@mypxmail04.bco-home.com>

Turn off default error handling with the appropriate option.

Monty

-----Original Message-----
From: Karl Meissner [mailto:meissnersd@yahoo.com] 
Sent: Friday, June 20, 2003 7:46 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] newbie question


Hi I am new to ANTLR. I have just started working on a grammar.

I have a lot of lexical token rules defined already and a simple top level
parser rule of the form

topParseRule :   ( TokenRule1  | TokenRule2 ) + ; 

It eats  token 1 and 2  but then it hit a token type 3.  It finds the token
but then the 
parse rule does not accept it.   I have default error set to true.   

When the rule did not accept token 3, I expected the parse rule
to throw an recognition exception.  Instead it silently exited.   When I
stepped through the
generated  topParseRule function,   it was finding token3 but then sending
it to the default case
in the switch which just broken out of the for loop with no other action.

So...is this expected behavior?   Is there a way I can put a throw in the
default case from the
grammar definition?

The other idea I had was just checking if there were tokens left on the
input stream.  What is the call to examine the queue of unprocessed tokens?

I am using 2.7.2 and the C# language implementation if it makes any
difference. 

Thanks for any help
Karl 



__________________________________
Do you Yahoo!?
SBC Yahoo! DSL - Now only $29.95 per month! http://sbc.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri Jun 20 10:25:08 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] grammar editor?
Message-ID: <72C9789739C4214096AE945753B11EA32A5D88@mypxmail04.bco-home.com>

I believe the html generator is the closest thing we have, generating html
without action code.  Run antlr.Tool with -html.

Monty

-----Original Message-----
From: Edward Povazan [mailto:epovazan@telus.net] 
Sent: Thursday, June 19, 2003 8:35 PM
To: antlr-interest
Subject: [antlr-interest] grammar editor?


Hello,

I bet this is too much to hope for, but is there an antlr editor out there?
One which allows different views of the grammar, ie, without predicates and
without code/returns etc. I am thinking it should be pretty easy to generate
'views' using antlr to parse itself, which would be useful enough even if
you can't edit directly. "Just" use a tree parser to emit each view. Anyone
tried this?

-Ed


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From j_scandaliaris at yahoo.es  Fri Jun 20 10:30:55 2003
From: j_scandaliaris at yahoo.es (Jorge Scandaliaris)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] grammar editor?
In-Reply-To: <72C9789739C4214096AE945753B11EA32A5D88@mypxmail04.bco-home.com>
Message-ID: <002601c33751$b9403f60$03001aac@zoys>

The antlr eclipse plugin gives you two views of your grammar, source and
overview. You have an outline where you see all the rules, and the
overview view doesn't show the actions. See
http://antlreclipse.sourceforge.net

Jorge

> -----Original Message-----
> From: mzukowski@yci.com [mailto:mzukowski@yci.com]
> Sent: Friday, June 20, 2003 7:25 PM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] grammar editor?
> 
> I believe the html generator is the closest thing we have, generating
html
> without action code.  Run antlr.Tool with -html.
> 
> Monty
> 
> -----Original Message-----
> From: Edward Povazan [mailto:epovazan@telus.net]
> Sent: Thursday, June 19, 2003 8:35 PM
> To: antlr-interest
> Subject: [antlr-interest] grammar editor?
> 
> 
> Hello,
> 
> I bet this is too much to hope for, but is there an antlr editor out
> there?
> One which allows different views of the grammar, ie, without
predicates
> and
> without code/returns etc. I am thinking it should be pretty easy to
> generate
> 'views' using antlr to parse itself, which would be useful enough even
if
> you can't edit directly. "Just" use a tree parser to emit each view.
> Anyone
> tried this?
> 
> -Ed
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Fri Jun 20 12:15:20 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] REs
Message-ID: <20030620191520.70379.qmail@web20416.mail.yahoo.com>

With REs you have

"" 1 occurrence
"()+" 1 or more occurrences
"()?" 0 or 1 occurrences
"()*" 0 or more occurrences

Why, in ANTLR REs, and in REs in general, should there
be no notation such as

"()+n" 1 to n occurrences
"()*n" 0 to n occurrences

or the equivalent?  A maximum of three or even ten is
manageable in a grammar, but the larger the value of
n, the more tempting it is to use ()* and be less than
correct.

-Matt

__________________________________
Do you Yahoo!?
SBC Yahoo! DSL - Now only $29.95 per month!
http://sbc.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From anthony.kong at ufjia.com  Sun Jun 22 04:27:59 2003
From: anthony.kong at ufjia.com (Anthony Kong)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Syntax I do not understand
Message-ID: <F799E3404E90D411BA5300508BE311CE0161AAC6@imap.ufjia.com>

It is an extremely useful resource. Thanks a lot!

Anthony

-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com]
Sent: Friday, June 20, 2003 11:12 PM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Syntax I do not understand


This is an idiom for adding an imaginary root to a tree for easier tree
parsing.  Check out Ter's lectures on tree building.

http://www.cs.usfca.edu/~parrt/course/652/index.html
http://www.cs.usfca.edu/~parrt/course/652/lectures/java.ast.html "Imaginary
Nodes" section

Monty

-----Original Message-----
From: ahwkong2000 [mailto:anthony.kong@ufjia.com] 
Sent: Friday, June 20, 2003 1:35 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Syntax I do not understand



I do not quite understand the line:

                        #functionDefinition =
#(#[FUNCTION_DEF,"FUNCTION_DEF"],#functionDefinition);

What does it suppose to do here?


Any help is appreciated!


Anthony


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tt2333 at yahoo.co.uk  Sun Jun 22 05:43:47 2003
From: tt2333 at yahoo.co.uk (Tim Tyler)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] ANTLR translation - e.g. Java->tree->Java
Message-ID: <bd48a3+108km@eGroups.com>

I'm contemplating an ANTLR translation project.

To do this I need to reconstruct the Java file from its tree.

There seem to be several problems.

One is that unicode information seems to get blatted.

Another is that most of the Java parsers I can see
strip out comments and white space.  I'm likely to
be wanting to preserve these as much as possible -
and maybe have them in the parse tree.

About the only existing Java ANTLR translation project
I'm aware of is Jalopy: http://jalopy.sourceforge.net/

Jalopy suggests that something is at least possible - but
it is big and complex - and I'd like a bit of a less hairy
example.

Are there any other ANTLR translation projects out there?

I'm a bit suprised ANTLR isn't already a little more translation-
oriented.

After all, being able to reconstruct the original file is a good 
test for having parsed it correctly ;-)



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From paultaney at yahoo.com  Sun Jun 22 06:50:47 2003
From: paultaney at yahoo.com (paul taney)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] ANTLR translation - e.g. Java->tree->Java
In-Reply-To: <bd48a3+108km@eGroups.com>
Message-ID: <20030622135047.5943.qmail@web20705.mail.yahoo.com>


--- Tim Tyler <tt2333@yahoo.co.uk> wrote:most of the
Java > ...parsers I can see
> strip out comments and white space.  I'm likely to
> be wanting to preserve these as much as possible -
> and maybe have them in the parse tree.
> 

I was attempting something similar and adapted
code from

    antlr-2.7.2/examples/java/preserveWhiteSpace

in the following way

public static void main(String[] args) {
  JavaLexer lexer = new JavaLexer(new
DataInputStream(System.in));
 
lexer.setTokenObjectClass("antlr.CommonHiddenStreamToken");
  filter = new TokenStreamHiddenTokenFilter(lexer);
  filter.hide(JavaRecognizer.WS);
  filter.hide(JavaRecognizer.SL_COMMENT);
  JavaRecognizer parser = new JavaRecognizer(filter);
 
parser.setASTNodeClass("antlr.CommonASTWithHiddenTokens");
  try {
      //rewire the next line for java's root node
      parser.compilationUnit(); 
  }

I'm still working it out, as this is my first antlr
project.  But I think this is on the right track...

Feedback would be appreciated.

paul taney


__________________________________
Do you Yahoo!?
SBC Yahoo! DSL - Now only $29.95 per month!
http://sbc.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From berserksangr at poczta.onet.pl  Sun Jun 22 09:38:49 2003
From: berserksangr at poczta.onet.pl (berserksangr)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Strange behaviour with '\379' character
Message-ID: <39109860661.20030622183849@poczta.onet.pl>


I use ANTLR to generate cpp code for my parser. But when in one of the
lexer rules I put '\379' character ANTLR malform the produced code.

For example when I use this rule:

('?'(WS)*('A'..'Z'|'\262'|'\321'|'\211'|'\346'|'\379'))

ANTLR put something like this into produced Lexer:

////OK!
case static_cast<unsigned char>('\346'):
{
     match(static_cast<unsigned char>('\346'));
     break;
}
///WRONG: g++ compiler fires "incomplete universal-character-name" error.
case static_cast<unsigned char>('\u101'):
{
     match(static_cast<unsigned char>('\u101'));
     break;
}

AFAIR the same happens with \380 character.

Why is it happening this way? How to deal with this problem? I need a
rule for this characters.

-- 
Best regards,
 berserksangr                          mailto:berserksangr@poczta.onet.pl


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Sun Jun 22 11:24:32 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Strange behaviour with '\379' character
In-Reply-To: <39109860661.20030622183849@poczta.onet.pl>; from berserksangr@poczta.onet.pl on Sun, Jun 22, 2003 at 06:38:49PM +0200
References: <39109860661.20030622183849@poczta.onet.pl>
Message-ID: <20030622202432.A26657@cs.utwente.nl>

On Sun, Jun 22, 2003 at 06:38:49PM +0200, berserksangr wrote:
> I use ANTLR to generate cpp code for my parser. But when in one of the
> lexer rules I put '\379' character ANTLR malform the produced code.

\379 is not an octal character constant.

> ////OK!
> case static_cast<unsigned char>('\346'):
> {
>      match(static_cast<unsigned char>('\346'));
>      break;
> }
> ///WRONG: g++ compiler fires "incomplete universal-character-name" error.
> case static_cast<unsigned char>('\u101'):
> {
>      match(static_cast<unsigned char>('\u101'));
>      break;
> }

Hmm could you try editing that output to use \x instead of \u ? (try fix
one and see if that fixes that one? If so we got a bug in the C++
codegen for character constants)

> AFAIR the same happens with \380 character.
> 
> Why is it happening this way? How to deal with this problem? I need a
> rule for this characters.

I guess you're making a mistake while converting the hex values to octal ?
So as workaround you could try using octal. I'll check for the hex
constants tomorrow.

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     "Evil will always triumph, because Good is dumb." ---  Spaceballs


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From berserksangr at poczta.onet.pl  Sun Jun 22 12:40:25 2003
From: berserksangr at poczta.onet.pl (berserksangr)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Strange behaviour with '\379' character
In-Reply-To: <20030622202432.A26657@cs.utwente.nl>
References: <39109860661.20030622183849@poczta.onet.pl>
 <20030622202432.A26657@cs.utwente.nl>
Message-ID: <76120757229.20030622214025@poczta.onet.pl>

Hello Ric,

Sunday, June 22, 2003, 8:24:32 PM, you wrote:

>> But when in one of the
>> lexer rules I put '\379' character ANTLR malform the produced code.

RK> \379 is not an octal character constant.

<CUT>

RK> I guess you're making a mistake while converting the hex values to octal ?
RK> So as workaround you could try using octal. I'll check for the hex
RK> constants tomorrow.

So which way in my rules I could represent i.e. those unicode (looks like they are hex):
0x017A 0x017C

?
Do you mean, that I should convert them hex-> oct and then write
'\OCT_VALUE', for example '\577'?

Sorry for this lame question, but I usually write in Java with all
unicode details running under the hood.

-- 
Best regards,
 berserksangr                            mailto:berserksangr@poczta.onet.pl


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From berserksangr at poczta.onet.pl  Sun Jun 22 12:54:19 2003
From: berserksangr at poczta.onet.pl (berserksangr)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] rules for ASCII
Message-ID: <57121591208.20030622215419@poczta.onet.pl>


In my parser created for c++, I need to parse a file that contains
some national signs. They have ASCII codes, i.e. 161, 198, 202, 163. How can
I write a lexer rule for accepting only chains made of this signs?

NATIONAL_CHAIN: (SIGN_161|SIGN_198|SIGN_202|SIGN_163)+;

My question can be treat more generally: What are the relations
between ASCII code and its ANTLR grammar representation in C++
ANTLR-related code?

-- 
Best regards,
 berserksangr                          mailto:berserksangr@poczta.onet.pl


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pete.forman at westerngeco.com  Mon Jun 23 01:27:09 2003
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] grammar editor?
In-Reply-To: <001201c336dc$dbd85a00$6401a8c0@Epsilon>
Message-ID: <5.1.1.1.2.20030623091916.021e0f80@wgmail2.gatwick.eur.slb.com>

At 2003-06-19 20:34 -0700, Edward Povazan wrote:
>I bet this is too much to hope for, but is there an antlr editor out
>there?  One which allows different views of the grammar, ie, without
>predicates and without code/returns etc.

I've had good results using emacs with antlr-mode.

-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ramesh_jun24 at yahoo.co.in  Mon Jun 23 01:51:05 2003
From: ramesh_jun24 at yahoo.co.in (ramesh_jun24)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] need help in antlr
Message-ID: <bd6f1p+dlat@eGroups.com>

hi friends,

I am working using antlr. I am using this parser. But I am not able 
to figure out how to get line number from the text file i.e I want to 
recognize that this token is from this line in the original text file.
Can anybody help me out.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Mon Jun 23 02:43:33 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Strange behaviour with '\379' character
In-Reply-To: <76120757229.20030622214025@poczta.onet.pl>; from berserksangr@poczta.onet.pl on Sun, Jun 22, 2003 at 09:40:25PM +0200
References: <39109860661.20030622183849@poczta.onet.pl> <20030622202432.A26657@cs.utwente.nl> <76120757229.20030622214025@poczta.onet.pl>
Message-ID: <20030623114330.A28698@cs.utwente.nl>

Hi,

On Sun, Jun 22, 2003 at 09:40:25PM +0200, berserksangr wrote:
> RK> I guess you're making a mistake while converting the hex values to octal ?
> RK> So as workaround you could try using octal. I'll check for the hex
> RK> constants tomorrow.
>
> So which way in my rules I could represent i.e. those unicode (looks like they are hex):
> 0x017A 0x017C

The C++ codegen does not support wide characters. Only bytewise input.
There is a MSVC centric patch floating around the archives that at least
does some of the stuff necessary for wide character support in C++.

> Do you mean, that I should convert them hex-> oct and then write
> '\OCT_VALUE', for example '\577'?

As far as I can tell from the docs and the code in antlr a character
literal can be \xxx for an octal value (char wide and x from [0-7]) or it
can be \uXXXX for 16 bit wide characters. I just tested the codegen in C++
and it leaves out a leading zeroes.

It looks like the lexer of antlr accepts incorrect octal values, and does
something 'funny' with them.

> Sorry for this lame question, but I usually write in Java with all
> unicode details running under the hood.

It's not that lame actually, had to check around a bit myself too ;)

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I think we better split up."
  "Good idea. We can do more damage that way."
  --- Ghostbusters

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Mon Jun 23 02:51:04 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] rules for ASCII
In-Reply-To: <57121591208.20030622215419@poczta.onet.pl>; from berserksangr@poczta.onet.pl on Sun, Jun 22, 2003 at 09:54:19PM +0200
References: <57121591208.20030622215419@poczta.onet.pl>
Message-ID: <20030623115104.B28698@cs.utwente.nl>

On Sun, Jun 22, 2003 at 09:54:19PM +0200, berserksangr wrote:
> In my parser created for c++, I need to parse a file that contains
> some national signs. They have ASCII codes, i.e. 161, 198, 202, 163. How can
> I write a lexer rule for accepting only chains made of this signs?
>
> NATIONAL_CHAIN: (SIGN_161|SIGN_198|SIGN_202|SIGN_163)+;
> 
> My question can be treat more generally: What are the relations
> between ASCII code and its ANTLR grammar representation in C++
> ANTLR-related code?

Directly one on one. so 161 -> '\241', 198 -> '\306', 202 -> '\312' and 163
-> '\243'.

NATIONAL_CHAIN: ('\241'|'\306'|'\312'|'\243')+;

Cheers,

Ric

PS those are technically not ASCII but extended ASCII (or what it's called)
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Wo das Chaos auf die Ordnung trifft, gewinnt meist das Chaos, weil es
  besser organisiert ist. --- Friedrich Nietzsche


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jw9315 at bris.ac.uk  Mon Jun 23 03:21:27 2003
From: jw9315 at bris.ac.uk (jw9315)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Thanks to everyone on here!
Message-ID: <bd6kb7+blo6@eGroups.com>

Hi,
Sorry to post off the topic of this forum.
I just got my degree result(2:1), and this was largely due to the use 
of ANTLR in my project. I would just like to take this opportunity to 
thank everyone on this forum, especially Terence and Co. for creating 
the tool in the first place! I think its great that everyone here 
takes time out to help new users, and I can't express how much stress 
and time all your help has saved...
Thanks again :)
Jon 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lubos.vnuk at rts.at  Mon Jun 23 04:37:12 2003
From: lubos.vnuk at rts.at (Lubos Vnuk)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Re: grammar editor?
In-Reply-To: <001201c336dc$dbd85a00$6401a8c0@Epsilon>
Message-ID: <bd6op8+bpuo@eGroups.com>

Hi Ed,

I have used a SciTE (http://www.scintilla.org/SciTEDownload.html)
which can't compete with Eclipse with the specialized ANTLR plugins 
in terms of features but it is 2MB big, it has syntax highlighting 
for lots of languages and it has a "fold" feature(collapse/expand) 
that I love.

This said, if you use c++ syntax highlighting for *.g files and write 
your grammar with a little care of modified comments (wrapping the 
rules in the //{ Rule... //} ), you can get a nice collapsed view of 
the rules. It can even export your grammar to html with the fold 
marks.

If anybody is interested, I could upload the two modified SciTE 
configuration files plus a sample grammar file in the Files section.

Lubos.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From abreneliere at telys.com  Mon Jun 23 04:57:41 2003
From: abreneliere at telys.com (=?iso-8859-1?Q?Anthony_Breneli=E8re?=)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] need help in antlr
In-Reply-To: <bd6f1p+dlat@eGroups.com>
Message-ID: <001001c3397e$a685b970$ae646464@lavaserver>

You have to know the default class used for tokens is "CommonToken".

In the parser, you can use the CommonToken::getLine() and
CommonToken::getColumn() methods.

As the data is read from a stream, you have to keep the filename in a
variable.

Here is an example:

document_element
	:	information
	|	i:CIAO_TEXT 
	{
		char toto[30];
		CObject * obj;
		wt->addObject( obj );
		obj->aP( "Category", "CIAOText" );
		obj->aP( "Content", i->getText() );
		obj->aP( "PageNumber", pageNum );
		obj->aP( "LineNumber", lineNum );
		obj->aP( "FileName", fileName );
		obj->aP( "BufferColumn", string( itoa(i->getColumn(),
toto, 10) ) );
		obj->aP( "BufferLine", string( itoa(i->getLine(), toto,
10) ) );
		outF->displayObject( * obj );
	}
;

Cordially,
Anthony Breneli?re



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Mon Jun 23 05:24:23 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Strange behaviour with '\379' character
In-Reply-To: <20030623114330.A28698@cs.utwente.nl>; from klaren@cs.utwente.nl on Mon, Jun 23, 2003 at 11:43:33AM +0200
References: <39109860661.20030622183849@poczta.onet.pl> <20030622202432.A26657@cs.utwente.nl> <76120757229.20030622214025@poczta.onet.pl> <20030623114330.A28698@cs.utwente.nl>
Message-ID: <20030623142423.E28698@cs.utwente.nl>

On Mon, Jun 23, 2003 at 11:43:33AM +0200, Ric Klaren wrote:
> It looks like the lexer of antlr accepts incorrect octal values, and does
> something 'funny' with them.

I fixed this in a new snapshot available at:

http://wwwhome.cs.utwente.nl/~klaren/antlr/

It also fixes the code generated for '\u101' in the code snippet you sent
in. (This is actually only a bit of a cosmetic change because wide
characters are not supported)

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
              of UCSD Pascal ever released..." --- Larry Smith


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From wiggjd at sbu.ac.uk  Mon Jun 23 06:11:33 2003
From: wiggjd at sbu.ac.uk (David Wigg)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Re: grammar editor?
Message-ID: <3EF6FC85.3080900@sbu.ac.uk>

I would have thought that an antlr grammar file parser 
generating an AST file would have been a good start for this. 
Any takers?

David.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ramesh_jun24 at yahoo.co.in  Mon Jun 23 06:15:15 2003
From: ramesh_jun24 at yahoo.co.in (ramesh_jun24)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] : help :Is it possible to have line number in the AST tree node
Message-ID: <bd6uh3+4bvr@eGroups.com>

hi,

I am using antlr to parse java files. I have a requirement of line 
number to be mentioned in the ast node structure i.e I would like to 
know the line number in the actual text file which is parsed.

i.e if a class is used, I want where that particular class is there 
in source file. I require it to map the parsed code to the original 
source file.

Could any body help in this matter.

bye

Ramesh


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Mon Jun 23 06:32:20 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Strange behaviour with '\379' character
In-Reply-To: <20030623142423.E28698@cs.utwente.nl>; from klaren@cs.utwente.nl on Mon, Jun 23, 2003 at 02:24:23PM +0200
References: <39109860661.20030622183849@poczta.onet.pl> <20030622202432.A26657@cs.utwente.nl> <76120757229.20030622214025@poczta.onet.pl> <20030623114330.A28698@cs.utwente.nl> <20030623142423.E28698@cs.utwente.nl>
Message-ID: <20030623153220.F28698@cs.utwente.nl>

On Mon, Jun 23, 2003 at 02:24:23PM +0200, Ric Klaren wrote:
> I fixed this in a new snapshot available at:
> 
> http://wwwhome.cs.utwente.nl/~klaren/antlr/

I just replaced the file with a new one. There was a compile error in the
previous one.

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Why don't we just invite them to dinner and massacre them all when they're
  drunk? You heard the man. There's seven hundred thousand of them. Ah? ..
           So it'd have to be something simple with pasta, then.
                 From: Interesting Times by Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Mon Jun 23 07:45:57 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Re: grammar editor?
In-Reply-To: <3EF6FC85.3080900@sbu.ac.uk>
Message-ID: <20030623144557.73144.qmail@web20421.mail.yahoo.com>

Good point, and of course there's already an ANTLR
grammar file.  If you run the grammar rule of the
ANTLRParser, and build an AST, you can use the
antlr.debug.misc.JTreeASTModel to display the AST in a
Swing tree.  That should all be easy.  The hard part
comes in determining what other features an ANTLR
grammar editor should have, and worse yet, how to
implement these features once they have been defined.

-Matt

--- David Wigg <wiggjd@sbu.ac.uk> wrote:
> I would have thought that an antlr grammar file
> parser 
> generating an AST file would have been a good start
> for this. 
> Any takers?
> 
> David.
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
SBC Yahoo! DSL - Now only $29.95 per month!
http://sbc.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Mon Jun 23 07:54:06 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] ANTLR translation - e.g. Java->tree->Java
In-Reply-To: <bd48a3+108km@eGroups.com>
Message-ID: <20030623145406.82552.qmail@web20415.mail.yahoo.com>

I once saw an educational project that was at least
influenced by Ter and some other folks, that built
symbol tables and all.  Also, the Transmogrify project
on sourceforge used ANTLR for refactoring.  I spent
several months bastardizing its code to my liking for
a code-completion tool but have never finished the
project.  I took a huge break from what I was working
on because I just didn't understand what was going on
with ANTLR.  So I followed Ter's USF course as much as
possible, and I've just finished a 2000+ line parser
grammar file that actually works so I think I must
have gained some useful knowledge.  Next I have to
master lexer and treeparser grammars.

If all you want to do is reconstitute a Java file from
the AST it sounds like Jalopy would be one of the
simplest options--projects that build symbol tables
are probably more complex than you would want to get
tangled up with.

-Matt

--- Tim Tyler <tt2333@yahoo.co.uk> wrote:
> I'm contemplating an ANTLR translation project.
> 
> To do this I need to reconstruct the Java file from
> its tree.
> 
> There seem to be several problems.
> 
> One is that unicode information seems to get
> blatted.
> 
> Another is that most of the Java parsers I can see
> strip out comments and white space.  I'm likely to
> be wanting to preserve these as much as possible -
> and maybe have them in the parse tree.
> 
> About the only existing Java ANTLR translation
> project
> I'm aware of is Jalopy:
> http://jalopy.sourceforge.net/
> 
> Jalopy suggests that something is at least possible
> - but
> it is big and complex - and I'd like a bit of a less
> hairy
> example.
> 
> Are there any other ANTLR translation projects out
> there?
> 
> I'm a bit suprised ANTLR isn't already a little more
> translation-
> oriented.
> 
> After all, being able to reconstruct the original
> file is a good 
> test for having parsed it correctly ;-)
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
SBC Yahoo! DSL - Now only $29.95 per month!
http://sbc.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From abreneliere at telys.com  Mon Jun 23 09:53:41 2003
From: abreneliere at telys.com (=?iso-8859-1?Q?Anthony_Breneli=E8re?=)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] : help :Is it possible to have line number in the AST tree node
In-Reply-To: <bd6uh3+4bvr@eGroups.com>
Message-ID: <001101c339a8$0110c0f0$ae646464@lavaserver>

Yes,

But, you have to create an class that inherits from the class "baseAST",
that has a 'line' property.

The default used AST is CommonAST, and does not manage lines.

Set the created AST class to the factory that creates nodes.
In C++:

ANTLR_USE_NAMESPACE(antlr)ASTFactory ast_factory( "PNode" );

Cordially,
Anthony



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From abreneliere at telys.com  Mon Jun 23 11:16:40 2003
From: abreneliere at telys.com (=?iso-8859-1?Q?Anthony_Breneli=E8re?=)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] condition not tested in the lexer : bug in code generation ?
Message-ID: <001701c339b3$983e8830$ae646464@lavaserver>

I have the following rule in the lexer :

 

DELIMITER   :

      { !bInCIAOContext }? ('\244' (WS_CC)? STAT_ID (WS_CC)? '/')=>
'\244'

            {

                  this->bInCIAOContext = false;

                  this->bInInfoContext = false;

                  $setType(ANTLR_USE_NAMESPACE(antlr)Token::SKIP);

            }

      | { bInCIAOContext }? '\244'

            {

                  this->bInCIAOContext = true;

                  this->bInInfoContext = false;

                  $setType(ANTLR_USE_NAMESPACE(antlr)Token::SKIP);

            }

;

 

The first condition is { !bInCIAOContext }? and works correctly.

 

The second condition is { bInCIAOContext }? And does not seem to appear
in the generated code.

 

Is it a bug ? Or is my rule syntax incorrect ?

 

Cordially,

Anthony Breneliere

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030623/6f9963bb/attachment.html
From mzukowski at yci.com  Mon Jun 23 11:52:57 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] condition not tested in the lexer : bug in c
	ode generation ?
Message-ID: <72C9789739C4214096AE945753B11EA32A5D9A@mypxmail04.bco-home.com>

I don't have time to test this right now, but it could be related to Ter's
"hoisting" for lexers.  To test my hypothesis try this code instead:

DELIMITER : RDELIMITER;

protected DELIMITER   :
      { !bInCIAOContext }? ('\244' (WS_CC)? STAT_ID (WS_CC)? '/')=> '\244'
            {
                  this->bInCIAOContext = false;
                  this->bInInfoContext = false;
                  $setType(ANTLR_USE_NAMESPACE(antlr)Token::SKIP);
            }
      | { bInCIAOContext }? '\244'
            {
                  this->bInCIAOContext = true;
                  this->bInInfoContext = false;
                  $setType(ANTLR_USE_NAMESPACE(antlr)Token::SKIP);
            }
;

Was the bug in code generation for that rule or for nextToken()?

Monty
-----Original Message-----
From: Anthony Breneli?re [mailto:abreneliere@telys.com] 
Sent: Monday, June 23, 2003 11:17 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] condition not tested in the lexer : bug in code
generation ?


I have the following rule in the lexer :

DELIMITER   :
      { !bInCIAOContext }? ('\244' (WS_CC)? STAT_ID (WS_CC)? '/')=> '\244'
            {
                  this->bInCIAOContext = false;
                  this->bInInfoContext = false;
                  $setType(ANTLR_USE_NAMESPACE(antlr)Token::SKIP);
            }
      | { bInCIAOContext }? '\244'
            {
                  this->bInCIAOContext = true;
                  this->bInInfoContext = false;
                  $setType(ANTLR_USE_NAMESPACE(antlr)Token::SKIP);
            }
;

The first condition is { !bInCIAOContext }? and works correctly.

The second condition is { bInCIAOContext }? And does not seem to appear in
the generated code.

Is it a bug ? Or is my rule syntax incorrect ?

Cordially,
Anthony Breneliere


Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ramesh_jun24 at yahoo.co.in  Tue Jun 24 05:12:56 2003
From: ramesh_jun24 at yahoo.co.in (ramesh_jun24)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] need help for proceding forward:line number
Message-ID: <bd9f88+ko3u@eGroups.com>

hi,

I have got to know how to extned CommonAST.
with code

import antlr.CommonAST;
import antlr.Token;
public class CommonASTWithLines extends CommonAST {
     private int line = 0;
     public void initialize(Token tok) {
          super.initialize(tok);
          line=tok.getLine();
     }
     public int getLine(){
          return line;
     }
}


but then were all i have to make modification for the code  can 
anybody tell me. I am parsing java file.

ramesh


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Jim.OConnor at microfocus.com  Tue Jun 24 07:58:48 2003
From: Jim.OConnor at microfocus.com (Jim O'Connor)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Overriding makeToken()
Message-ID: <3AC103F1B7EEEC48A855ACB1D2819E9101BA3E4E@rock-corpmail.microfocus.com>

Hi All,
  I want to access tokenStartColumn from an overriden makeToken() function.
tokenStartColumn is protected and has no getter().  Any suggestions?
Jim




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From abreneliere at telys.com  Tue Jun 24 08:24:03 2003
From: abreneliere at telys.com (=?iso-8859-1?Q?Anthony_Breneli=E8re?=)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Why is TokenStreamRecognitionException::recog private ?
Message-ID: <000501c33a64$a5b159f0$ae646464@lavaserver>

I catch TokenStreamRecognition exceptions (that encapulates a
RecognitionException)

 

..but I cannot access the line of the RecognitionException in the
private member ?recog?.

 

I cannot find a way to read that line number.

 

If anyone has a trick, then please respond !

 

Cordially,

Anthony Breneli?re

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030624/b631e7e2/attachment.html
From mdouglass at exapted.com  Tue Jun 24 09:05:09 2003
From: mdouglass at exapted.com (Matthew Douglass)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Parsing VB-like Language Part 1: REM
Message-ID: <3EF876B5.30108@exapted.com>

I'm fairly new to antlr, having written only one parser (that was 
heavily borrowed from the java.g example).  I am working on parsing a 
VB-like language, and am having problems with comments that start with 
rem.  They are, obviously I'm sure, causing non-determinism warnings 
with my IDENT definitions.  I have found a way to fix it, by doing the 
rem parsing inside the IDENT literal using a semantic predicate (I think 
that's the right term) as follows:

IDENT
    options {testLiterals=true;}
    :    (    ("rem" WS_NONBREAKING) => "rem" WS_NONBREAKING 
(~('\n'|'\r'))* ('\n'|'\r'('\n')?) {$setType(Token.SKIP); newline();}
        |    ('a'..'z'|'_') ('a'..'z'|'_'|'0'..'9')* (TYPE_CHARACTER)?
        )
    ;

But my understanding is that this would slow down my lexing quite a bit 
-- is there a better way to do this?  Or should I just not worry about it?

Thanks for any advice you can offer,
Matthew Douglass



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From junkmail_inbox at att.net  Tue Jun 24 09:02:55 2003
From: junkmail_inbox at att.net (ortizjco99)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Installing ANTLR on a Compaq Non-Stop Server - Question
Message-ID: <bd9sng+n3au@eGroups.com>

I'm trying to get ANTLR 2.7.2 installed on a Compaq Non-Stop server 
(formerly Himalaya) running OSS (a Unix-like POSIX compliant OS).

I downloaded antlr-2.7.2.tar.gz, gunzip'd and untar'd it. Then from 
the ANTLR's top directory, I ran the configure command like this:

./configure --prefix=/home/sg534961

and this is the message I got:

sg534961@pind101: ./configure --prefix /home/sg534961
checking if examples must be built... no
checking if BOOTSTRAP_JAR is set... /antlrall.jar
checking for ar... /usr/bin/ar
checking for as... no
checking for gas... no
checking for gcc... no
checking for cc... cc
checking for C compiler default output... configure: error: C 
compiler cannot create executables
sg534961@pind101: 

Could somebody tell me what it's wrong and whether there is a chance 
I can ANTLR successfully installed on this platform.

I appreciate your help. Thanks,

Julio Ortiz


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Tue Jun 24 09:23:51 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Installing ANTLR on a Compaq Non-Stop Server - Question
In-Reply-To: <bd9sng+n3au@eGroups.com>; from junkmail_inbox@att.net on Tue, Jun 24, 2003 at 04:02:55PM -0000
References: <bd9sng+n3au@eGroups.com>
Message-ID: <20030624182351.B29221@cs.utwente.nl>

Hi,

On Tue, Jun 24, 2003 at 04:02:55PM -0000, ortizjco99 wrote:
> I'm trying to get ANTLR 2.7.2 installed on a Compaq Non-Stop server 
> (formerly Himalaya) running OSS (a Unix-like POSIX compliant OS).
> 
> I downloaded antlr-2.7.2.tar.gz, gunzip'd and untar'd it. Then from 
> the ANTLR's top directory, I ran the configure command like this:
> 
> ./configure --prefix=/home/sg534961
> 
> and this is the message I got:
> 
> sg534961@pind101: ./configure --prefix /home/sg534961
> checking if examples must be built... no
> checking if BOOTSTRAP_JAR is set... /antlrall.jar
> checking for ar... /usr/bin/ar
> checking for as... no
> checking for gas... no
> checking for gcc... no
> checking for cc... cc
> checking for C compiler default output... configure: error: C
> compiler cannot create executables
> sg534961@pind101: 
> 
> Could somebody tell me what it's wrong and whether there is a chance 
> I can ANTLR successfully installed on this platform.

Could you post info from the config.log ? Maybe mail it directly to me if
it's large?

You could have a look if this snapshot fixes the problem (longshot)

http://wwwhome.cs.utwente.nl/~klaren/antlr/antlr-20030623.tar.gz 

If you need the C++ output then you can always compile the support library
by hand (if you have a decent C++ compiler that is). Make sure you include
lib/cpp/antlr in the searchpath for includes, then compile all .cpp files
in lib/cpp/src by hand and make a library from them. You may need to tweak
config.hpp for your compiler.

After creating the support lib you can use the anltr from the antlr.jar
file to create parsers and link them to the support lib.

If you don't need C++ mode then the antlr.jar is enough. How to use it
should be listed in the doc directory.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Why don't we just invite them to dinner and massacre them all when they're
  drunk? You heard the man. There's seven hundred thousand of them. Ah? ..
           So it'd have to be something simple with pasta, then.
                 From: Interesting Times by Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue Jun 24 09:34:55 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Overriding makeToken()
Message-ID: <72C9789739C4214096AE945753B11EA32A5D9E@mypxmail04.bco-home.com>

Bizarre.  All thoses fields really should be public.  Change your antlr
source and recompile it.  I'll copy Ter on this and see that it gets changed
for the next release.

Alternately make your lexer a member of the antlr package and you will have
access to those fields.  (Ick)

Monty

-----Original Message-----
From: Jim O'Connor [mailto:Jim.OConnor@microfocus.com] 
Sent: Tuesday, June 24, 2003 7:59 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Overriding makeToken()


Hi All,
  I want to access tokenStartColumn from an overriden makeToken() function.
tokenStartColumn is protected and has no getter().  Any suggestions? Jim




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Jun 24 09:34:55 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Overriding makeToken()
Message-ID: <72C9789739C4214096AE945753B11EA32A5D9E@mypxmail04.bco-home.com>

Bizarre.  All thoses fields really should be public.  Change your antlr
source and recompile it.  I'll copy Ter on this and see that it gets changed
for the next release.

Alternately make your lexer a member of the antlr package and you will have
access to those fields.  (Ick)

Monty

-----Original Message-----
From: Jim O'Connor [mailto:Jim.OConnor@microfocus.com] 
Sent: Tuesday, June 24, 2003 7:59 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Overriding makeToken()


Hi All,
  I want to access tokenStartColumn from an overriden makeToken() function.
tokenStartColumn is protected and has no getter().  Any suggestions? Jim




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue Jun 24 09:43:42 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Parsing VB-like Language Part 1: REM
Message-ID: <72C9789739C4214096AE945753B11EA32A5DA0@mypxmail04.bco-home.com>

Don't worry about it.  Your syntactic predicate is not in a loop so it
shouldn't be a big impact.

Monty

-----Original Message-----
From: Matthew Douglass [mailto:mdouglass@exapted.com] 
Sent: Tuesday, June 24, 2003 9:05 AM
To: antlr-interest
Subject: [antlr-interest] Parsing VB-like Language Part 1: REM


I'm fairly new to antlr, having written only one parser (that was 
heavily borrowed from the java.g example).  I am working on parsing a 
VB-like language, and am having problems with comments that start with 
rem.  They are, obviously I'm sure, causing non-determinism warnings 
with my IDENT definitions.  I have found a way to fix it, by doing the 
rem parsing inside the IDENT literal using a semantic predicate (I think 
that's the right term) as follows:

IDENT
    options {testLiterals=true;}
    :    (    ("rem" WS_NONBREAKING) => "rem" WS_NONBREAKING 
(~('\n'|'\r'))* ('\n'|'\r'('\n')?) {$setType(Token.SKIP); newline();}
        |    ('a'..'z'|'_') ('a'..'z'|'_'|'0'..'9')* (TYPE_CHARACTER)?
        )
    ;

But my understanding is that this would slow down my lexing quite a bit 
-- is there a better way to do this?  Or should I just not worry about it?

Thanks for any advice you can offer,
Matthew Douglass



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue Jun 24 09:41:30 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Installing ANTLR on a Compaq Non-Stop Server
	 - Question
Message-ID: <72C9789739C4214096AE945753B11EA32A5D9F@mypxmail04.bco-home.com>

Sounds to me like your C compiler doesn't work the way the ./configure
script expects.  Maybe try installing gcc and see if that helps.

Monty

-----Original Message-----
From: ortizjco99 [mailto:junkmail_inbox@att.net] 
Sent: Tuesday, June 24, 2003 9:03 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Installing ANTLR on a Compaq Non-Stop Server -
Question


I'm trying to get ANTLR 2.7.2 installed on a Compaq Non-Stop server 
(formerly Himalaya) running OSS (a Unix-like POSIX compliant OS).

I downloaded antlr-2.7.2.tar.gz, gunzip'd and untar'd it. Then from 
the ANTLR's top directory, I ran the configure command like this:

./configure --prefix=/home/sg534961

and this is the message I got:

sg534961@pind101: ./configure --prefix /home/sg534961
checking if examples must be built... no
checking if BOOTSTRAP_JAR is set... /antlrall.jar
checking for ar... /usr/bin/ar
checking for as... no
checking for gas... no
checking for gcc... no
checking for cc... cc
checking for C compiler default output... configure: error: C 
compiler cannot create executables
sg534961@pind101: 

Could somebody tell me what it's wrong and whether there is a chance 
I can ANTLR successfully installed on this platform.

I appreciate your help. Thanks,

Julio Ortiz


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue Jun 24 09:46:01 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] need help for proceding forward:line number
Message-ID: <72C9789739C4214096AE945753B11EA32A5DA1@mypxmail04.bco-home.com>

An example of extending CommonAST would be in the gcc transformation toolkit
http://www.codetransform.com/gcc.html  Specifically see the file
http://www.antlr.org/grammars/cgram/grammars/CToken.java

Monty

-----Original Message-----
From: ramesh_jun24 [mailto:ramesh_jun24@yahoo.co.in] 
Sent: Tuesday, June 24, 2003 5:13 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] need help for proceding forward:line number


hi,

I have got to know how to extned CommonAST.
with code

import antlr.CommonAST;
import antlr.Token;
public class CommonASTWithLines extends CommonAST {
     private int line = 0;
     public void initialize(Token tok) {
          super.initialize(tok);
          line=tok.getLine();
     }
     public int getLine(){
          return line;
     }
}


but then were all i have to make modification for the code  can 
anybody tell me. I am parsing java file.

ramesh


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue Jun 24 09:55:14 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] ANTLR translation - e.g. Java->tree->Java
Message-ID: <72C9789739C4214096AE945753B11EA32A5DA2@mypxmail04.bco-home.com>

There are many different reasons to go from source to tree to source.  How
extensively you want to manipulate the tree will dictate how well you can
preserve whitespace and comments.  

Sometimes comments are attached to the preceeding construct, sometimes the
following.  Sometimes it depends on if it's on the same line or not.
Sometimes expressions get special formatting and sometimes they don't.
Sometimes you delete, sometimes you rearrange, sometimes you just replace
the text in the node.

There is no easy general approach to preserving whitespace and comments.  If
you're not rearranging the tree then it's trivial.  Otherwise there are lots
of semantics to work out.

Monty

-----Original Message-----
From: Tim Tyler [mailto:tt2333@yahoo.co.uk] 
Sent: Sunday, June 22, 2003 5:44 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] ANTLR translation - e.g. Java->tree->Java


I'm contemplating an ANTLR translation project.

To do this I need to reconstruct the Java file from its tree.

There seem to be several problems.

One is that unicode information seems to get blatted.

Another is that most of the Java parsers I can see
strip out comments and white space.  I'm likely to
be wanting to preserve these as much as possible -
and maybe have them in the parse tree.

About the only existing Java ANTLR translation project
I'm aware of is Jalopy: http://jalopy.sourceforge.net/

Jalopy suggests that something is at least possible - but
it is big and complex - and I'd like a bit of a less hairy example.

Are there any other ANTLR translation projects out there?

I'm a bit suprised ANTLR isn't already a little more translation- oriented.

After all, being able to reconstruct the original file is a good 
test for having parsed it correctly ;-)



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From monaabs at yahoo.com  Tue Jun 24 09:59:25 2003
From: monaabs at yahoo.com (monaabs)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] 2.7.2 & unicode
Message-ID: <bda01d+q13s@eGroups.com>

Hi , 

I have 2.7.2 installed and i need it to work with japanese characters.
I went through the unicode example .. but that did not help much.

Can anybody be kind enough to outline steps to be done to make 
ANTLR2.7.2 unicode compliant?

I am working with c++.

Thanks in advance
Mona


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From junkmail_inbox at att.net  Tue Jun 24 14:26:20 2003
From: junkmail_inbox at att.net (ortizjco99)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Re: Installing ANTLR on a Compaq Non-Stop Server - Question
In-Reply-To: <20030624182351.B29221@cs.utwente.nl>
Message-ID: <bdafls+5no2@eGroups.com>

Thanks fro your reply Ric and others,
I compared the config.log file against another one that resulted from 
a successful instalation on Windows using Cygwin and discovered that 
some environment variables were not set (the C and C++ compilers 
among them).

After setting the needed environment variables ./configure ran just 
fine.

Then I ran the Makefile from the ANTLR's toplevel directory, and got 
the following error message:

sg534961@pind101: make
scripts/Rules.make:282: *** target pattern contains no `%'.  Stop.

I edited lines 282 and 283 of ../ANTLR-2.7.2/Makefile and removed the 
colons.

I re-ran the Makefile and got the following error message this time:

=============================
Making antlr ...
=============================
gmake[1]: Entering directory `/home/sg534961/antlr-2.7.2/antlr'
java -cp /home/sg534961/antlr-2.7.2/antlrall.jar antlr.Tool   antlr.g
Exception in thread "main" java.lang.NoClassDefFoundError: antlr/Tool
gmake[1]: *** [.antlr.g] Error 1
gmake[1]: Leaving directory `/home/sg534961/antlr-2.7.2/antlr'
gmake: *** [subdirs] Error 2

I noticed the problem is with using antlrall.jar; because I can 
generate C++ code for the calc example with antlr.jar or just antlr-
2.7.2 in the classpath.

I don't know the implications of using antlr.jar intead of 
antlrall.jar, nor am I sure I know where to change it.

Help, thanks,

Julio



--- In antlr-interest@yahoogroups.com, Ric Klaren <klaren@c...> wrote:
> Hi,
> 
> On Tue, Jun 24, 2003 at 04:02:55PM -0000, ortizjco99 wrote:
> > I'm trying to get ANTLR 2.7.2 installed on a Compaq Non-Stop 
server 
> > (formerly Himalaya) running OSS (a Unix-like POSIX compliant OS).
> > 
> > I downloaded antlr-2.7.2.tar.gz, gunzip'd and untar'd it. Then 
from 
> > the ANTLR's top directory, I ran the configure command like this:
> > 
> > ./configure --prefix=/home/sg534961
> > 
> > and this is the message I got:
> > 
> > sg534961@pind101: ./configure --prefix /home/sg534961
> > checking if examples must be built... no
> > checking if BOOTSTRAP_JAR is set... /antlrall.jar
> > checking for ar... /usr/bin/ar
> > checking for as... no
> > checking for gas... no
> > checking for gcc... no
> > checking for cc... cc
> > checking for C compiler default output... configure: error: C
> > compiler cannot create executables
> > sg534961@pind101: 
> > 
> > Could somebody tell me what it's wrong and whether there is a 
chance 
> > I can ANTLR successfully installed on this platform.
> 
> Could you post info from the config.log ? Maybe mail it directly to 
me if
> it's large?
> 
> You could have a look if this snapshot fixes the problem (longshot)
> 
> http://wwwhome.cs.utwente.nl/~klaren/antlr/antlr-20030623.tar.gz 
> 
> If you need the C++ output then you can always compile the support 
library
> by hand (if you have a decent C++ compiler that is). Make sure you 
include
> lib/cpp/antlr in the searchpath for includes, then compile all .cpp 
files
> in lib/cpp/src by hand and make a library from them. You may need 
to tweak
> config.hpp for your compiler.
> 
> After creating the support lib you can use the anltr from the 
antlr.jar
> file to create parsers and link them to the support lib.
> 
> If you don't need C++ mode then the antlr.jar is enough. How to use 
it
> should be listed in the doc directory.
> 
> Cheers,
> 
> Ric
> --
> -----
+++++*****************************************************+++++++++---
----
>     ---- Ric Klaren ----- j.klaren@u... ----- +31 53 4893722  ----
> -----
+++++*****************************************************+++++++++---
----
>  Why don't we just invite them to dinner and massacre them all when 
they're
>   drunk? You heard the man. There's seven hundred thousand of them. 
Ah? ..
>            So it'd have to be something simple with pasta, then.
>                  From: Interesting Times by Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From atripp at comcast.net  Tue Jun 24 20:40:07 2003
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] problem with line numbers in 2.7.2
Message-ID: <bdb5in+eu3r@eGroups.com>

Hi,

I just upgraded to antlr 2.7.2 because I want the 
enhancement that a RecognitionException will show a line number. 
Every time I get a RegocnitionException
in my lexer, it shows line number 1.

A quick look at my generated lexer code shows getLine() 
is called to get the line number whenever a NoViableAltException 
is created:
	throw new NoViableAltForCharException((char)LA(1), 
	getFilename(), getLine(), getColumn());

And it looks like there is now a LineObject object 
in my lexer, and THAT is where the true line number is being kept 
(being incremented by the newline() method, for example).  
However, there is no getLine() function in my lexer, it inherits
the one from CharScanner, which is getting the line number from 
somewhere else.

And, sure enough, if I replace each getLine() call with 
"lineObject.line", I get the proper line number.

Is this a bug? I apologize in advance if it's already been discussed.

Thanks,
Andy


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From atripp at comcast.net  Tue Jun 24 21:19:44 2003
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Re: ANTLR translation - e.g. Java->tree->Java
In-Reply-To: <72C9789739C4214096AE945753B11EA32A5DA2@mypxmail04.bco-home.com>
Message-ID: <bdb7t0+7ijp@eGroups.com>

If you want more details on the issues of preserving whitespace
and comments, here's a good article:
http://research.sun.com/projects/jackpot/COM.sun.mlvdv.doc.scam_nov01.paper_pdf.pdf



--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> There are many different reasons to go from source to tree to
source.  How
> extensively you want to manipulate the tree will dictate how well
you can
> preserve whitespace and comments.  
> 
> Sometimes comments are attached to the preceeding construct,
sometimes the
> following.  Sometimes it depends on if it's on the same line or not.
> Sometimes expressions get special formatting and sometimes they don't.
> Sometimes you delete, sometimes you rearrange, sometimes you just
replace
> the text in the node.
> 
> There is no easy general approach to preserving whitespace and
comments.  If
> you're not rearranging the tree then it's trivial.  Otherwise there
are lots
> of semantics to work out.
> 
> Monty
> 
> -----Original Message-----
> From: Tim Tyler [mailto:tt2333@y...] 
> Sent: Sunday, June 22, 2003 5:44 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] ANTLR translation - e.g. Java->tree->Java
> 
> 
> I'm contemplating an ANTLR translation project.
> 
> To do this I need to reconstruct the Java file from its tree.
> 
> There seem to be several problems.
> 
> One is that unicode information seems to get blatted.
> 
> Another is that most of the Java parsers I can see
> strip out comments and white space.  I'm likely to
> be wanting to preserve these as much as possible -
> and maybe have them in the parse tree.
> 
> About the only existing Java ANTLR translation project
> I'm aware of is Jalopy: http://jalopy.sourceforge.net/
> 
> Jalopy suggests that something is at least possible - but
> it is big and complex - and I'd like a bit of a less hairy example.
> 
> Are there any other ANTLR translation projects out there?
> 
> I'm a bit suprised ANTLR isn't already a little more translation-
oriented.
> 
> After all, being able to reconstruct the original file is a good 
> test for having parsed it correctly ;-)
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From atripp at comcast.net  Tue Jun 24 21:22:00 2003
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Re: ANTLR translation - e.g. Java->tree->Java
In-Reply-To: <bd48a3+108km@eGroups.com>
Message-ID: <bdb818+i919@eGroups.com>

I have a straightforward JavaEmitter class that produces 
decent-looking java code from an ANTLR AST.
I'll mail it to you (I assume it's poor edicate to post
900 lines of code).

Andy

--- In antlr-interest@yahoogroups.com, "Tim Tyler" <tt2333@y...>
wrote:
> I'm contemplating an ANTLR translation project.
> 
> To do this I need to reconstruct the Java file from its tree.
> 
> There seem to be several problems.
> 
> One is that unicode information seems to get blatted.
> 
> Another is that most of the Java parsers I can see
> strip out comments and white space.  I'm likely to
> be wanting to preserve these as much as possible -
> and maybe have them in the parse tree.
> 
> About the only existing Java ANTLR translation project
> I'm aware of is Jalopy: http://jalopy.sourceforge.net/
> 
> Jalopy suggests that something is at least possible - but
> it is big and complex - and I'd like a bit of a less hairy
> example.
> 
> Are there any other ANTLR translation projects out there?
> 
> I'm a bit suprised ANTLR isn't already a little more translation-
> oriented.
> 
> After all, being able to reconstruct the original file is a good 
> test for having parsed it correctly ;-)


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From abreneliere at telys.com  Wed Jun 25 02:18:16 2003
From: abreneliere at telys.com (=?iso-8859-1?Q?Anthony_Breneli=E8re?=)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] How to get the line number for TokenStreamRecognitionException ?
In-Reply-To: <bdb818+i919@eGroups.com>
Message-ID: <000201c33afa$b6689c90$ae646464@lavaserver>

The recognition exception is in a private member named recog,

I need to get the ligne number for that exception and I don't know how
to do.

Is there a way to solve that problem ?

Cordially,
Anthony Breneliere



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Wed Jun 25 02:22:12 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Re: Installing ANTLR on a Compaq Non-Stop Server - Question
In-Reply-To: <bdafls+5no2@eGroups.com>; from junkmail_inbox@att.net on Tue, Jun 24, 2003 at 09:26:20PM -0000
References: <20030624182351.B29221@cs.utwente.nl> <bdafls+5no2@eGroups.com>
Message-ID: <20030625112212.D29221@cs.utwente.nl>

Hi,

On Tue, Jun 24, 2003 at 09:26:20PM -0000, ortizjco99 wrote:
> I compared the config.log file against another one that resulted from 
> a successful instalation on Windows using Cygwin and discovered that 
> some environment variables were not set (the C and C++ compilers 
> among them).

What is the name of you C/C++ compiler?

> Then I ran the Makefile from the ANTLR's toplevel directory, and got 
> the following error message:
> 
> sg534961@pind101: make
> scripts/Rules.make:282: *** target pattern contains no `%'.  Stop.
> 
> I edited lines 282 and 283 of ../ANTLR-2.7.2/Makefile and removed the 
> colons.

Could you post the contents before edit and after edit ?

> I re-ran the Makefile and got the following error message this time:
> 
> =============================
> Making antlr ...
> =============================
> gmake[1]: Entering directory `/home/sg534961/antlr-2.7.2/antlr'
> java -cp /home/sg534961/antlr-2.7.2/antlrall.jar antlr.Tool   antlr.g
> Exception in thread "main" java.lang.NoClassDefFoundError: antlr/Tool
> gmake[1]: *** [.antlr.g] Error 1
> gmake[1]: Leaving directory `/home/sg534961/antlr-2.7.2/antlr'
> gmake: *** [subdirs] Error 2
> 
> I noticed the problem is with using antlrall.jar; because I can 
> generate C++ code for the calc example with antlr.jar or just antlr-
> 2.7.2 in the classpath.
> 
> I don't know the implications of using antlr.jar intead of 
> antlrall.jar, nor am I sure I know where to change it.

antlr.jar is the right one. This has already been fixed in the snapshot in
the link I mentioned.

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "You can't expect to wield supreme executive power just because some
   watery tot throws a sword at you!"
  --- Monty Python and the Holy Grail


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Wed Jun 25 02:50:51 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] 2.7.2 & unicode
In-Reply-To: <bda01d+q13s@eGroups.com>; from monaabs@yahoo.com on Tue, Jun 24, 2003 at 04:59:25PM -0000
References: <bda01d+q13s@eGroups.com>
Message-ID: <20030625115051.E29221@cs.utwente.nl>

Hi,

On Tue, Jun 24, 2003 at 04:59:25PM -0000, monaabs wrote:
> I have 2.7.2 installed and i need it to work with japanese characters.
> I went through the unicode example .. but that did not help much.
>
> Can anybody be kind enough to outline steps to be done to make
> ANTLR2.7.2 unicode compliant?

ANTLR in C++ mode has no unicode support out of the box.

I have an ancient 2.7.1 based patch for unicode in C++ lying about. I can
send it to you if you like (it should be in the archives at
www.yahoogroups.com as well Daniel Fekete made it). This may work.. or it
may not since it only partially solves the problem. I suspect that for full
japanese support it does not work.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Chaos often breeds life, when order breeds habit.
  --- Henry B. Adams, The Education of Henry Adams


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tt2333 at yahoo.co.uk  Wed Jun 25 03:44:40 2003
From: tt2333 at yahoo.co.uk (Tim Tyler)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Re: ANTLR translation - e.g. Java->tree->Java
In-Reply-To: <bdb818+i919@eGroups.com>
Message-ID: <bdbueo+gjoq@eGroups.com>

--- "atripp54321" <atripp@c...> wrote:

> I have a straightforward JavaEmitter class that produces 
> decent-looking java code from an ANTLR AST.
> I'll mail it to you (I assume it's poor edicate to post
> 900 lines of code).

Interesting - thanks.

I wouldn't describe it as "straight-forward" ;-)



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From junkmail_inbox at att.net  Wed Jun 25 07:32:52 2003
From: junkmail_inbox at att.net (ortizjco99)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Re: Installing ANTLR on a Compaq Non-Stop Server - Question
In-Reply-To: <20030625112212.D29221@cs.utwente.nl>
Message-ID: <bdcbqk+ut8t@eGroups.com>

Hi,
My C/C++ compiler is c89.

Correction: I edited ..../antlr-2.7.2/scripts/Rules.make instead 
of ..../antlr-2.7.2/Makefile. By the way, I'm using GNU Make Version 
3.74

Before changes:
bootstrap_g: ANTLR := $(ANTLR_BOOTSTRAP)
bootstrap_g: ANTLR_FLAGS := $(ANTLR_BOOTSTRAP_FLAGS)

After changes:
bootstrap_g: ANTLR = $(ANTLR_BOOTSTRAP)
bootstrap_g: ANTLR_FLAGS = $(ANTLR_BOOTSTRAP_FLAGS)

I noticed the fix in the snapshot only after I had already posted my 
message. I ran Makefile with the fix and got some C++ compile errors 
that I need to investigate. 

Thanks again.

Julio

--- In antlr-interest@yahoogroups.com, Ric Klaren <klaren@c...> wrote:
> Hi,
> 
> On Tue, Jun 24, 2003 at 09:26:20PM -0000, ortizjco99 wrote:
> > I compared the config.log file against another one that resulted 
from 
> > a successful instalation on Windows using Cygwin and discovered 
that 
> > some environment variables were not set (the C and C++ compilers 
> > among them).
> 
> What is the name of you C/C++ compiler?
> 
> > Then I ran the Makefile from the ANTLR's toplevel directory, and 
got 
> > the following error message:
> > 
> > sg534961@pind101: make
> > scripts/Rules.make:282: *** target pattern contains no `%'.  Stop.
> > 
> > I edited lines 282 and 283 of ../ANTLR-2.7.2/Makefile and removed 
the 
> > colons.
> 
> Could you post the contents before edit and after edit ?
> 
> > I re-ran the Makefile and got the following error message this 
time:
> > 
> > =============================
> > Making antlr ...
> > =============================
> > gmake[1]: Entering directory `/home/sg534961/antlr-2.7.2/antlr'
> > java -cp /home/sg534961/antlr-2.7.2/antlrall.jar antlr.Tool   
antlr.g
> > Exception in thread "main" java.lang.NoClassDefFoundError: 
antlr/Tool
> > gmake[1]: *** [.antlr.g] Error 1
> > gmake[1]: Leaving directory `/home/sg534961/antlr-2.7.2/antlr'
> > gmake: *** [subdirs] Error 2
> > 
> > I noticed the problem is with using antlrall.jar; because I can 
> > generate C++ code for the calc example with antlr.jar or just 
antlr-
> > 2.7.2 in the classpath.
> > 
> > I don't know the implications of using antlr.jar intead of 
> > antlrall.jar, nor am I sure I know where to change it.
> 
> antlr.jar is the right one. This has already been fixed in the 
snapshot in
> the link I mentioned.
> 
> Ric
> -- 
> -----
+++++*****************************************************+++++++++---
----
>     ---- Ric Klaren ----- j.klaren@u... ----- +31 53 4893722  ----
> -----
+++++*****************************************************+++++++++---
----
>   "You can't expect to wield supreme executive power just because 
some
>    watery tot throws a sword at you!"
>   --- Monty Python and the Holy Grail


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From monaabs at yahoo.com  Wed Jun 25 07:45:23 2003
From: monaabs at yahoo.com (monaabs)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Re 2.7.2 and unicode
Message-ID: <bdcci3+flja@eGroups.com>

Hi,

On Tue, Jun 24, 2003 at 04:59:25PM -0000, monaabs wrote:
> I have 2.7.2 installed and i need it to work with japanese 
characters.
Hi ric , 

Thanks for your input. Can you please send me the files .

Best Regards
Mona



> I went through the unicode example .. but that did not help much.
>
> Can anybody be kind enough to outline steps to be done to make
> ANTLR2.7.2 unicode compliant?

ANTLR in C++ mode has no unicode support out of the box.

I have an ancient 2.7.1 based patch for unicode in C++ lying about. I 
can
send it to you if you like (it should be in the archives at
www.yahoogroups.com as well Daniel Fekete made it). This may work.. 
or it
may not since it only partially solves the problem. I suspect that 
for full
japanese support it does not work.

Cheers,

Ric



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Wed Jun 25 08:25:42 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] problem with line numbers in 2.7.2
Message-ID: <72C9789739C4214096AE945753B11EA32A5DAB@mypxmail04.bco-home.com>

Are you using the gcc lexer?  Sounds like you need to add a getLine() method
to the lexer that uses the lineObject.  I hadn't caught that before, I'll
add it to the source when I get a chance.

Thanks!

Monty

-----Original Message-----
From: atripp54321 [mailto:atripp@comcast.net] 
Sent: Tuesday, June 24, 2003 8:40 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] problem with line numbers in 2.7.2


Hi,

I just upgraded to antlr 2.7.2 because I want the 
enhancement that a RecognitionException will show a line number. 
Every time I get a RegocnitionException
in my lexer, it shows line number 1.

A quick look at my generated lexer code shows getLine() 
is called to get the line number whenever a NoViableAltException 
is created:
	throw new NoViableAltForCharException((char)LA(1), 
	getFilename(), getLine(), getColumn());

And it looks like there is now a LineObject object 
in my lexer, and THAT is where the true line number is being kept 
(being incremented by the newline() method, for example).  
However, there is no getLine() function in my lexer, it inherits the one
from CharScanner, which is getting the line number from 
somewhere else.

And, sure enough, if I replace each getLine() call with 
"lineObject.line", I get the proper line number.

Is this a bug? I apologize in advance if it's already been discussed.

Thanks,
Andy


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From antlrlist at yahoo.com  Wed Jun 25 10:59:53 2003
From: antlrlist at yahoo.com (antlrlist)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Re: need help for proceding forward:line number
In-Reply-To: <bd9f88+ko3u@eGroups.com>
Message-ID: <bdcnup+jmqm@eGroups.com>


This is one of the problems you could handle with antlraux 
(http://imaginatica.us.es/~enrique/antlraux).

LexInfoAST does what you want, but a bit extended (with column and 
filename). You can see LexInfoAST's javadoc documentation here:
http://imaginatica.us.es/~enrique/antlraux/javadoc/antlraux/util/LexIn
foAST.html. Even if you don't want to use LexInfoAST, I recommend you 
to read that link.

Have a look!

Enrique


--- In antlr-interest@yahoogroups.com, "ramesh_jun24" 
<ramesh_jun24@y...> wrote:
> hi,
> 
> I have got to know how to extned CommonAST.
> with code
> 
> import antlr.CommonAST;
> import antlr.Token;
> public class CommonASTWithLines extends CommonAST {
>      private int line = 0;
>      public void initialize(Token tok) {
>           super.initialize(tok);
>           line=tok.getLine();
>      }
>      public int getLine(){
>           return line;
>      }
> }
> 
> 
> but then were all i have to make modification for the code  can 
> anybody tell me. I am parsing java file.
> 
> ramesh


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From atripp at comcast.net  Wed Jun 25 14:41:39 2003
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Re: problem with line numbers in 2.7.2
In-Reply-To: <72C9789739C4214096AE945753B11EA32A5DAB@mypxmail04.bco-home.com>
Message-ID: <bdd4uj+ged8@eGroups.com>

Yes, I'm using a modified version of your "cgram" lexer.
Note also that the column number isn't right either,
but it doesn't look like lineObject handles column numbers.

Thanks,
Andy

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Are you using the gcc lexer?  Sounds like you need to add a
getLine() method
> to the lexer that uses the lineObject.  I hadn't caught that before,
I'll
> add it to the source when I get a chance.
> 
> Thanks!
> 
> Monty
> 
> -----Original Message-----
> From: atripp54321 [mailto:atripp@c...] 
> Sent: Tuesday, June 24, 2003 8:40 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] problem with line numbers in 2.7.2
> 
> 
> Hi,
> 
> I just upgraded to antlr 2.7.2 because I want the 
> enhancement that a RecognitionException will show a line number. 
> Every time I get a RegocnitionException
> in my lexer, it shows line number 1.
> 
> A quick look at my generated lexer code shows getLine() 
> is called to get the line number whenever a NoViableAltException 
> is created:
> 	throw new NoViableAltForCharException((char)LA(1), 
> 	getFilename(), getLine(), getColumn());
> 
> And it looks like there is now a LineObject object 
> in my lexer, and THAT is where the true line number is being kept 
> (being incremented by the newline() method, for example).  
> However, there is no getLine() function in my lexer, it inherits the one
> from CharScanner, which is getting the line number from 
> somewhere else.
> 
> And, sure enough, if I replace each getLine() call with 
> "lineObject.line", I get the proper line number.
> 
> Is this a bug? I apologize in advance if it's already been discussed.
> 
> Thanks,
> Andy
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From andrei at metalanguage.com  Wed Jun 25 21:52:39 2003
From: andrei at metalanguage.com (uprightness_of_character)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Wrong code generated by the lexer
Message-ID: <bddu6n+h7gp@eGroups.com>

I parse a language that has "to-end-of-line" comments like this:

-- blah

and multiline comments like this:

(-- blah --).

So I wrote a lexer rule to collect all of these:

COMMENT
    :
    (
        "--"! (~('\n' | '\r'))* 
        "(--" (options { greedy = false; } : ANY)* "--)"
    )+
    {
        s_lastComment = $getText;
        $setType(antlr::Token::SKIP);
    }
    ;

This rule catches a block with several single-line and multi-line 
comments. (ANY is a '.' that takes care of newline(). I also have 
separate lexer tokens for '-' and '(').

So far, so good. However, when lexing this:

foo(-bar);

the lexer issued an error insisting that the "(-" sequence ought to 
start a comment. I looked through the generated code and the lexer 
decides that if (LA(1) == '(' && LA(2) == '-'), then a comment must 
follow.

What's going on? I increased the lookahead to no avail. Why does the 
lexer look only at LA(1) and LA(2)?


Thanks,

Andrei



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From hrvoje.nezic at envox-lab.hr  Thu Jun 26 05:40:51 2003
From: hrvoje.nezic at envox-lab.hr (Hrvoje Nezic)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Calling directly nonterminals other than top symbol?
Message-ID: <003401c33be0$3361daf0$1301a8c0@envox.local.hr>

Hi,

Is it safe to call directly methods corresponding
to nonterminals other than the top symbol of the
grammar? 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Thu Jun 26 06:32:11 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Calling directly nonterminals other than top symbol?
In-Reply-To: <003401c33be0$3361daf0$1301a8c0@envox.local.hr>; from hrvoje.nezic@envox-lab.hr on Thu, Jun 26, 2003 at 02:40:51PM +0200
References: <003401c33be0$3361daf0$1301a8c0@envox.local.hr>
Message-ID: <20030626153211.J29221@cs.utwente.nl>

On Thu, Jun 26, 2003 at 02:40:51PM +0200, Hrvoje Nezic wrote:
> Is it safe to call directly methods corresponding
> to nonterminals other than the top symbol of the
> grammar?

It is safe to some extent. Though you have to be aware of lookahead &
follow sets, because you are pulling a rule out of context. Sometimes you
have to add a dummy rule something like:

dummy: my_rule ( . )? ;

So it won't barf if something is following the tree part you're interested
in.

I personally do it a lot with tree walkers.

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
              of UCSD Pascal ever released..." --- Larry Smith

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From aditsu at yahoo.com  Thu Jun 26 07:21:40 2003
From: aditsu at yahoo.com (Adrian Sandor)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] need help writing a source code formatter
Message-ID: <bdevhk+qas2@eGroups.com>

Hello everybody

I'm a programmer and I'm very determined to write a source 
beautifier/formatter for C++. First I wanted to do it by myself, and 
started writing a grammar, but I had some difficulties when I wanted 
to write the parser (I didn't want to use CYK, I wanted to try LL1 
but I'm afraid C++ is not LL1).
Therefore I looked for help on the web, and I found antlr, which 
seems to be far greater than my expectations. So I gave up the idea 
of writing a parser/translator by myself, and I decided to write an 
antlr grammar instead.
The problem is I really have no idea how to do it.. I have some fair 
knowledge about formal languages but I'm a total newbie to antlr. I 
learnt the hard way about the differences between the lexer and 
parser rules, but I'm still confused.
Here are my questions:
- how do I decide which rules belong to the parser and which rules 
are tokens that belong to the lexer?
- what is the meaning of "warning:nondeterminism upon k==1:SOME_TOKEN 
between alt 1 and exit branch of block" ?
- could somebody have some mercy and write a simple example, like 
parsing a string of correctly matched parentheses with spaces between 
them and stripping all spaces and adding a '+' after each '(' and a '-
' before each ')' ? e.g. "( ()( (  ))  )" -> "(+(+-)(+(+-)-)-)"
- where can I find some simple and helpful documentation for what I 
want to do?

thanks a lot

Adrian


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Jun 26 11:41:21 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Re: problem with line numbers in 2.7.2
Message-ID: <72C9789739C4214096AE945753B11EA32A5DBB@mypxmail04.bco-home.com>

Any patches are appreciated!

Monty

-----Original Message-----
From: atripp54321 [mailto:atripp@comcast.net] 
Sent: Wednesday, June 25, 2003 2:42 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: problem with line numbers in 2.7.2


Yes, I'm using a modified version of your "cgram" lexer.
Note also that the column number isn't right either,
but it doesn't look like lineObject handles column numbers.

Thanks,
Andy

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Are you using the gcc lexer?  Sounds like you need to add a
getLine() method
> to the lexer that uses the lineObject.  I hadn't caught that before,
I'll
> add it to the source when I get a chance.
> 
> Thanks!
> 
> Monty
> 
> -----Original Message-----
> From: atripp54321 [mailto:atripp@c...]
> Sent: Tuesday, June 24, 2003 8:40 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] problem with line numbers in 2.7.2
> 
> 
> Hi,
> 
> I just upgraded to antlr 2.7.2 because I want the
> enhancement that a RecognitionException will show a line number. 
> Every time I get a RegocnitionException
> in my lexer, it shows line number 1.
> 
> A quick look at my generated lexer code shows getLine()
> is called to get the line number whenever a NoViableAltException 
> is created:
> 	throw new NoViableAltForCharException((char)LA(1), 
> 	getFilename(), getLine(), getColumn());
> 
> And it looks like there is now a LineObject object
> in my lexer, and THAT is where the true line number is being kept 
> (being incremented by the newline() method, for example).  
> However, there is no getLine() function in my lexer, it inherits the one
> from CharScanner, which is getting the line number from 
> somewhere else.
> 
> And, sure enough, if I replace each getLine() call with
> "lineObject.line", I get the proper line number.
> 
> Is this a bug? I apologize in advance if it's already been discussed.
> 
> Thanks,
> Andy
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Jun 26 11:44:24 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Calling directly nonterminals other than top
	 symbol?
Message-ID: <72C9789739C4214096AE945753B11EA32A5DBC@mypxmail04.bco-home.com>

It is not safe because the parser will be expecting tokens to follow that
rule that won't be there if you just pass in an incomplete program.

I recommend making a top level rule that calls only the rule you want to
expose.

Monty

-----Original Message-----
From: Hrvoje Nezic [mailto:hrvoje.nezic@envox-lab.hr] 
Sent: Thursday, June 26, 2003 5:41 AM
To: ANTLR mailing list
Subject: [antlr-interest] Calling directly nonterminals other than top
symbol?


Hi,

Is it safe to call directly methods corresponding
to nonterminals other than the top symbol of the
grammar? 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From avoidboredom at yahoo.com  Thu Jun 26 13:38:45 2003
From: avoidboredom at yahoo.com (avoidboredom)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Resolving single quote in lexer
Message-ID: <bdflkl+gk42@eGroups.com>

I am doing a lexer for visual basic. The problem is single character 
literals and comments both start with single quote. I have rules that 
work work for single characters 
SINGLE_QUOTE (ESC|~'\'') '\''
and comments
SINGLE_QUOTE ( ~'\u000D'  )*  
However I don't know how to put them both in the same lexer! 
When I do, the lexer gives priority to the single character rule. I 
have tried combinations of using or (|) but this doesn't seem to 
work. Also, increasing lookahead didn't help.

Thanks in advance.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From dude at darkfigure.org  Thu Jun 26 20:24:41 2003
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Switching lexers and skipping tokens
Message-ID: <Pine.LNX.4.44.0306262020090.14571-100000@g4.pauljlucas.org>

	If I have a lexer rule:

		PRAGMA_START
			: "(::" {
				// Push a new Lexer onto the token
				// stream selector.
			  	$setType( Token.SKIP );
			  }
			;

	What I want is to switch to using a different lexer, but I also
	want the "(::" token to be skipped, i.e., be invisible to the
	parser just like a comment would be.

	But when I do the above, it never seems to actually switch to
	using the new lexer since it is matching rules in the main
	lexer.

	Any ideas why it's not switching?  Does the Token.SKIP make a
	difference?  How can I do what I want?

	- Paul


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From aditsu at yahoo.com  Fri Jun 27 01:22:40 2003
From: aditsu at yahoo.com (Adrian Sandor)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Re: need help writing a source code formatter
In-Reply-To: <bdevhk+qas2@eGroups.com>
Message-ID: <bdgusg+jtln@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Adrian Sandor" <aditsu@y...> 
wrote:
> - could somebody have some mercy and write a simple example, like 
> parsing a string of correctly matched parentheses with spaces
> between them and stripping all spaces and adding a '+' after
> each '(' and a '-' before each ')' ?
> e.g. "( ()( (  ))  )" -> "(+(+-)(+(+-)-)-)"

looks like I managed to write this example by myself:

//-----snip-----
class par_p extends Parser;
{
	private void wr(String x)
	{
		System.out.print(x);
	}
	private void disp(Token x)
	{
		wr(x.getText());
	}
}

s: ws (par1 ws)*; //start
par1: o:OP{disp(o);wr("+");} s c:CL{wr("-");disp(c);}; //one pair of 
parentheses
ws: (SP)*; //whitespace

class par_l extends Lexer;

OP: '(';
CL: ')';
SP: ' ';
//-----snip-----

it works well without warnings, but if it can be improved then please 
comment on it
now I'll try to restart writing the C++ grammar, without 
nondeterminisms and ambiguities

Adrian


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From zdhost at hotmail.com  Fri Jun 27 01:57:35 2003
From: zdhost at hotmail.com (zdhost)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Why can't I go on with antlr after the following steps?
Message-ID: <bdh0tv+sn9j@eGroups.com>

Hi all:
     I'm a new learner of antlr.I met some troubles at the very 
beginning of my course.
     I have completed the following steps on my windows 2000 
professional system.
     1:install jbuilder 7
     2:unzip antlr-2.7.2.zip  to d: on my computer.
     3:add SET CLASSPATH="D:\antlr-2.7.2;D:\antlr-2.7.2\antlr.jar" to 
autoexec.bat
     4:reboot

     Then I entered jbuilder\jdk1.3.1\bin and tried to execute "java 
antlr.Tool myGrammar.g".I was told that "exception in thread "main" 
java,lang.NoClassDefFoundError:antlr/tool".Would u please tell me 
what else I should do to configue my system?

     Thanks

                                         Jim


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From anthony.kong at ufjia.com  Fri Jun 27 02:12:36 2003
From: anthony.kong at ufjia.com (Anthony Kong)
Date: Mon Dec 20 16:15:44 2004
Subject: [antlr-interest] Why can't I go on with antlr after the follo
	wing steps?
Message-ID: <F799E3404E90D411BA5300508BE311CE0161AADC@hkexma00.net.ufjia.com>

It is a classpath problem. Please use 'set' to examine the classpath
variable, and go to the D:\antlr-2.7.2 location to make sure the files are
indeed there.

Regards,

Anthony

-----Original Message-----
From: zdhost [mailto:zdhost@hotmail.com]
Sent: Friday, June 27, 2003 4:58 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Why can't I go on with antlr after the
following steps?


Hi all:
     I'm a new learner of antlr.I met some troubles at the very 
beginning of my course.
     I have completed the following steps on my windows 2000 
professional system.
     1:install jbuilder 7
     2:unzip antlr-2.7.2.zip  to d: on my computer.
     3:add SET CLASSPATH="D:\antlr-2.7.2;D:\antlr-2.7.2\antlr.jar" to 
autoexec.bat
     4:reboot

     Then I entered jbuilder\jdk1.3.1\bin and tried to execute "java 
antlr.Tool myGrammar.g".I was told that "exception in thread "main" 
java,lang.NoClassDefFoundError:antlr/tool".Would u please tell me 
what else I should do to configue my system?

     Thanks

                                         Jim


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From aditsu at yahoo.com  Fri Jun 27 02:27:07 2003
From: aditsu at yahoo.com (Adrian Sandor)
Date: Mon Dec 20 16:15:45 2004
Subject: [antlr-interest] Re: Why can't I go on with antlr after the following steps?
In-Reply-To: <bdh0tv+sn9j@eGroups.com>
Message-ID: <bdh2lb+6uhe@eGroups.com>

--- In antlr-interest@yahoogroups.com, "zdhost" <zdhost@h...> wrote:
>      3:add SET CLASSPATH="D:\antlr-2.7.2;D:\antlr-2.7.2\antlr.jar"
> to autoexec.bat

that's not how to set environment variables in Windows 2000
press win-pause ("win" is that key between ctrl and alt) to open 
system properties, then go to "advanced" and click "environment 
variables", then you should know what to do
and there's no need to reboot, just close and reopen any console 
window where you need those variables

Adrian


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pryd6517 at mail.kolej.mff.cuni.cz  Fri Jun 27 08:34:37 2003
From: pryd6517 at mail.kolej.mff.cuni.cz (Pavel Rydvan)
Date: Mon Dec 20 16:15:45 2004
Subject: [antlr-interest] antlr under origin - sgi
In-Reply-To: <bdh2lb+6uhe@eGroups.com>
References: <bdh2lb+6uhe@eGroups.com>
Message-ID: <3EFC640D.8080304@mail.kolej.mff.cuni.cz>

Hi,

I'm trying to run (c++) targeted antlr under origin's CC compiler. I 
cannot manage to compile lib/cc/*.cpp, encountering problems with

 CharBuffer::CharBuffer(ANTLR_USE_NAMESPACE(std)istream& input_)

(in some sources it is necessary to expand ANTLR_USE_NAMESPACE(x) to 
x::, somewhere to "nothing":.


Did anybody had the same problem? Did anyone solve it? Or does somebody 
use antlr under origin without problems?

Thanks in advance, pavel.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From aditsu at yahoo.com  Sat Jun 28 03:00:09 2003
From: aditsu at yahoo.com (Adrian Sandor)
Date: Mon Dec 20 16:15:45 2004
Subject: [antlr-interest] nondeterminism
Message-ID: <bdjov9+919c@eGroups.com>

Wow.. writing good grammars for antlr is very tricky and makes me 
scratch my head a lot.
I managed to isolate and reduce a nondeterminism problem to the 
following grammar:

//---snip
class p extends Parser;
a: (X Y)?;
b: a X;
//---snip

it says:
test1.g:2:4: warning:nondeterminism between alts 1 and 2 of block upon
test1.g:2:4:     k==1:X

I suppose it is unhappy that it doesn't know whether an X is a b or 
starts an a
but the grammar is equivalent to:

//---snip
class p extends Parser;
a: (X Y)?;
b: X (Y X)?;
//---snip

which has no problem.
I wonder why antlr can't figure this out, but anyway I guess I have 
to learn to write grammars the way antlr likes.
What do you guys think about these things? Are there any clear do's 
and don'ts for writing antlr deterministic grammars? Can the 
nondeterminisms be classified and solved in the general case?

Adrian


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From alehorst at web.de  Sat Jun 28 04:32:06 2003
From: alehorst at web.de (Alexandre Horst)
Date: Mon Dec 20 16:15:45 2004
Subject: [antlr-interest] Eine Nachricht von Alexandre Horst
Message-ID: <200306281132.h5SBW5q19109@mailgate3.cinetic.de>

Sehr geehrte Damen und Herren,

heutzutage spielen Kontakte und Adressdaten eine immer wichtigere Rolle. Aus
diesem Grunde habe ich Ihre Adresse in mein privates WEB.DE Adressbuch 
eingetragen und bitte Sie, diese zu pr?fen und zu vervollst?ndigen.

Mit Hilfe der zentralen Verwaltung und dem weltweiten Zugriff auf mein
WEB.DE Adressbuch werde ich Adressen und Telefonnummern immer zur Hand haben.

So einfach ist es f?r Sie: Wenn Sie auf den folgenden Link klicken, werden
Sie automatisch zu Ihrem Adressbucheintrag bei mir geleitet
und k?nnen dort Ihre Daten erg?nzen.

https://kontakteng.web.de/adr_vervoll/?pickup=540216&cid=58649751

Vielen Dank f?r Ihre Hilfe

Alexandre Horst

Dies ist ein Service von WEB.DE (http://freemail.web.de). Ihre Daten 
werden ausschliesslich im Adressbuch von Alexandre Horst gespeichert und
Dritten selbstverst?ndlich nicht zug?nglich gemacht.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030628/11f1f447/attachment.html
From tdjastrzebski at yahoo.com  Sat Jun 28 05:24:03 2003
From: tdjastrzebski at yahoo.com (tdjastrzebski)
Date: Mon Dec 20 16:15:45 2004
Subject: [antlr-interest] Plz help newbie with simple issue porting from JavaCC
Message-ID: <bdk1d3+ei33@eGroups.com>

Hi everybody, since I enjoy Antlr more and more I decided to port 
some simple parser written originally in JavaCC to Antlr.
Her is an issue which has immediately shown up.

expression :
        subExpression ( binaryOperator subExpression )*
	;
subExpression :
	( LPAREN expression RPAREN )
	| function
	;
function : //or constant
	Identifier (LPAREN (expression)? RPAREN)?
	;

Above grammar does not parse expressions containing single identifier 
without parenthesis: e.g. "PI" and I do not understand why.
Even if I parse such a string using just "function" rule "unexpected 
token" error occurs.

I would appreciate any pointers, TIA
Tom Jastrzebski

-----------------------------------------------
grammar file:

options {
	language = "Java";
}

// PARSER 
**********************************************************************

class TestParser extends Parser;

options {
	buildAST = true;
	k = 3;
}

expression
	: subExpression ( binaryOperator subExpression )*
	;

subExpression
	:
	( LPAREN expression RPAREN )
	| function
	;

function
	:
	Identifier (LPAREN (expression)? RPAREN)?
	;

binaryOperator
	: PLUS | MINUS | STAR | DIV
	;

// LEXER 
**********************************************************************
*

class TestLexer extends Lexer;

options {
	testLiterals = false;
    k = 3;
    caseSensitive = false;
    caseSensitiveLiterals = false;
}

LPAREN: '(' ;
RPAREN: ')' ;
PLUS: '+' ;
MINUS: '-' ;
STAR: '*' ;
DIV: '/' ;

Whitespace
	: (' ' | '\t' | '\n' | '\r')
	{ _ttype = Token.SKIP; }
	;

Identifier
	: ('a'..'z')+
	;

--------------------------------------------------
Main.java:

import java.io.*;
import antlr.*;

class Main
{
	public static void main(String[] args)
	{
		LexerSharedInputState input = null;
        FileInputStream inputStream = null;
        InputStreamReader reader = null;
		String fileName;

		if (args.length > 0) {
			fileName = args[0];

            try {
                inputStream = new FileInputStream(fileName);
            } catch (FileNotFoundException e) {
                System.out.println("File " + fileName + " not 
found.");
                System.exit(1);
            }
            try {
                reader = new InputStreamReader(inputStream, "SJIS");
            } catch (UnsupportedEncodingException ex) {
                System.out.println("Invalid encoding");
                System.exit(1);
            }
            input = new antlr.LexerSharedInputState(new CharBuffer
(reader));

		} else {
			fileName = "<stdin>";
			input = new antlr.LexerSharedInputState(new 
DataInputStream(System.in));
		}

		try {
			TestLexer lexer = new TestLexer(input);
			lexer.setFilename(fileName);

			TestParser parser = new TestParser(lexer);
			parser.setFilename(fileName);

			// Parse the input expression
            //parser.expression();

            parser.function();

			CommonAST t = (CommonAST)parser.getAST();
			// Print the resulting tree out in LISP 
notation
			if (t != null) {
				System.out.println(t.toStringTree());
			}

		} catch(TokenStreamException e) {
			System.err.println("exception: " + e);
		} catch(RecognitionException e) {
			System.err.println("exception: " + e);
		}

		System.out.println("press any key ...");
		try {
			System.in.read();
            System.exit(0);
		} catch (java.io.IOException e) {}
	}
}


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From andreitim at yahoo.com  Sat Jun 28 05:51:28 2003
From: andreitim at yahoo.com (Andrei Timisescu)
Date: Mon Dec 20 16:15:45 2004
Subject: [antlr-interest] lookahead using multiple lexers is not possible to simulate in ANTLR?
Message-ID: <20030628125128.95102.qmail@web14609.mail.yahoo.com>

I have multiple lexeres and would like to look ahead a token with one lexer, and if it is not the token I expect, try another lexer. Something like this is not possible in ANTLR I see:
 
host
   : {selector->push("hostnameLexer");}  HOSTNAME
   | {selector->push("ipAddressLexer");}  ADDRESS
   ;
 
ANTLR gets the first token (even if I only look ahead: LA(1)) using current parser and consumes the characteres from the input stream. 
 
Is it possible to simulate someting like the above in ANTLR? 
 
 
 
 
 
 



---------------------------------
Do you Yahoo!?
SBC Yahoo! DSL - Now only $29.95 per month!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030628/b46a694a/attachment.html
From tdjastrzebski at yahoo.com  Sat Jun 28 08:54:14 2003
From: tdjastrzebski at yahoo.com (tdjastrzebski)
Date: Mon Dec 20 16:15:45 2004
Subject: [antlr-interest] Re: Plz help newbie with simple issue porting from JavaCC
In-Reply-To: <bdk1d3+ei33@eGroups.com>
Message-ID: <bdkdn6+hc8o@eGroups.com>

I found the problem; unmatched EOF token ...
TJ


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tdjastrzebski at yahoo.com  Sat Jun 28 09:03:55 2003
From: tdjastrzebski at yahoo.com (tdjastrzebski)
Date: Mon Dec 20 16:15:45 2004
Subject: [antlr-interest] Managed to compile under .Net !!
Message-ID: <bdke9b+irao@eGroups.com>

I really like Antlr more and more.

With just a single change in file PreservingFilterWriter.java 
(File.getParentFile() exists since jdk 1.2) I managed to compile 
whole Antlr with JSharp under .Net so I do not need Java any more ...

Tom Jastrzebski


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From atripp at comcast.net  Sun Jun 29 11:50:23 2003
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:15:45 2004
Subject: [antlr-interest] JavaEmitter class to print Java AST available
Message-ID: <bdncdf+q33m@eGroups.com>

I had mentioned last week that I had a class that
prints an ANTLR-produced Java AST. A few people asked for it,
so I've cleaned it up and documented it a little.
See: http://jazillian.com/antlr/emitter.html
for information and to download it.

Terrance, feel free to include it in future ANTLR releases
if you want (perhaps in the examples/java/java directory).
I would think that just about anyone who uses ANTLR to create Java ASTs
would want some way of displaying the AST tree in "real code" format.

Andy


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From grendel at swcp.com  Sun Jun 29 22:50:14 2003
From: grendel at swcp.com (wnreynolds)
Date: Mon Dec 20 16:15:45 2004
Subject: [antlr-interest] PATCH: Preprocessor fixes for Class Grammar extends SubGrammar(SubParserClass)
Message-ID: <bdoj2m+hq5m@eGroups.com>

I've attached a patch below which fixes the antlr preprocessor to
support the syntax (already defined in antlr.g):

class Grammar extends Subgrammar(SubParserClass) ;


here SubParserClass is a subclass of LLkParser, TreeParser or Lexer
(at least in java).
The patch involves only a few new lines to preproc.g and Grammar.java.

Here is some documentation:


Why would you want to do this? Consider the inheritance problem:


  class Base extends Parser;
    options {
    k = 2;
    }
    {
     void aAction(AST a, AST b)
      {
        // code deleted.
      }
     void cAction(AST c)
      {
        // code deleted
      }
    }
   a : A B {aAction(A, B); }
     | A C
     ;
   c : C {cAction(C); }
     ;


   class Derived extends Base;
   options {
     k = 3;        // need more lookahead; override
     buildAST=true;// add an option
   }
   {
     void aAction(AST a, AST b) // Overload
      {
        // code deleted.
      }
     void aActionTwo(AST a, AST c)
      {
        // code deleted.
      }
	
     void bAction(AST a, AST b, AST d)
     {
	//  code deleted
     }
    }
   a : A B { aAction(A, B); }
     | A C { aActionTwo(A, C); }
     | Z           // add an alt to rule a
     ;
   b : a
     | A B D      { bAction(A, B, D); }
     ;


 antlr will generate a temporary grammar that looks like this:

   class Derived extends Parser;
   options {
     k = 3;        // need more lookahead; override
     buildAST=true;// add an option
   }
   {
     void aAction(AST a, AST b) // Overload
      {
        // code deleted.
      }
     void aActionTwo(AST a, AST c)
      {
        // code deleted.
      }
	
     void bAction(AST a, AST b, AST d)
     {
	//  code deleted
     }
    }
   a : A B { aAction(A, B); }
     | A C { aActionTwo(A, C); }
     | Z           // add an alt to rule a
     ;
   b : a
     | A B D      { bAction(A, B, D); }
     ;
   c : C {cAction(C); }
     ;



Notice the problem? rule c uses method cAction(AST c) for its action,
but the method does not get included in the expanded grammar. 

There are two ways around this. One could simply make a copy of the
code for cAction() from Base and put it into Derived, but this is very
poor practice. Every time cAction is changed in Base, it would also
need be changed in Derived and every other subgrammar of Base.

The correct approach is to rewrite Base as follows:

  class Base extends Parser(BaseLLkParser);
    options {
    k = 2;
    }
    {
      // no code here!
    }
   a : A B {aAction(A, B); }
     | A C
     ;
   c : C {cAction(C); }
     ;

and define a new class, which is a subclass of LLkParser, BaseParser: 

  class BaseParser extends LLkParser
  {
     void aAction(AST a, AST b)
      {
        // code deleted
      }
     void cAction(AST c)
      {
        // code deleted
      }

      // ALERT: Other code needed by LLkParser subclasses.
      // code deleted

  }

(we'll ignore the ALERT line for now). 

The java code generated from this grammar will look like:

  class Base extends BaseParser
  {


	public final void a() throws RecognitionException, TokenStreamException
	{
	  // code deleted
	  { aAction(A, B); }
	}

	public final void c() throws RecognitionException, TokenStreamException
	{
	  // code deleted
	  { cAction(C); }
	}

      // code deleted
  }



The action methods are now inherited from BaseParser, and no longer
explicitly included in the generated grammar code. Defining a
subgrammar is easy:

   class Derived extends Parser(BaseParser);
   options {
     k = 3;        // need more lookahead; override
     buildAST=true;// add an option
   }
   {
     void aAction(AST a, AST b) // Overloads method in BaseParser
      {
        // code deleted.
      }
     void aActionTwo(AST a, AST c)
      {
        // code deleted.
      }
	
     void bAction(AST a, AST b, AST d)
     {
	//  code deleted
     }
    }
   a : A B { aAction(A, B); }
     | A C { aActionTwo(A, C); }
     | Z           // add an alt to rule a
     ;
   b : a
     | A B D      { bAction(A, B, D); }
     ;
   c : C {cAction(C); }
     ;


This will automatically pick up all methods defined in BaseParser and
override them as necessary. All grammars that will be subclassed
should use this method for defining methods.

Now we get to the icky part, referred to in the ALERT line
above. Children of antlr parser classes have certain contracts they
must obey. Sometimes this will be pointed out to you by compile errors
(For example, subclasses of LLkParser are expected to have 5 distinct
constructors, each with a particular signature). Other requirements
are more subtle and may not show up until the derived grammar starts
crashing mysteriously (for example, TreeParser constructors are
expected to make the assignment tokenNames = _tokenNames). Look at the
code generated by antlr to see exactly what is expected of the various
parser and lexer classes. 

Suggestion: One approach to making this less problematic would be for
future versions of antlr to emit something like a 'parserInitialize()'
method that would correctly fulfill all contracts and which chould
then be called by custom constructors.

Here's the patch:

diff -u --ignore-space-change --ignore-blank-lines -r
antlr-2.7.2/antlr/preprocessor/Grammar.java
antlr-2.7.2.new/antlr/preprocessor/Grammar.java
--- antlr-2.7.2/antlr/preprocessor/Grammar.java	2003-01-19
17:38:00.000000000 -0700
+++ antlr-2.7.2.new/antlr/preprocessor/Grammar.java	2003-06-29
22:14:48.000000000 -0600
@@ -16,7 +16,8 @@
 class Grammar {
     protected String name;
     protected String fileName;		// where does it come from?
-    protected String superGrammar;	// null if no super class
+    protected String superGrammar;	// null if no super grammar
+    protected String superClass;	// null if no super class
     protected String type;				// lexer? parser? tree parser?
     protected IndexedVector rules;	// text of rules as they were read in
     protected IndexedVector options;// rule options
@@ -32,9 +33,16 @@
     protected String exportVocab = null;
     protected antlr.Tool antlrTool;
 
-    public Grammar(antlr.Tool tool, String name, String superGrammar,
IndexedVector rules) {
+	public Grammar(antlr.Tool tool, String name, String superGrammar,
IndexedVector rules) 
+	{
+		this(tool, name, superGrammar, rules, null);
+	}
+
+	public Grammar(antlr.Tool tool, String name, String superGrammar,
IndexedVector rules, String superClass) 
+	{
         this.name = name;
         this.superGrammar = superGrammar;
+        this.superClass = superClass;
         this.rules = rules;
         this.antlrTool = tool;
     }
@@ -243,7 +251,8 @@
             return "class " + name + ";";
         }
         String sup = "";
-        s.append("class " + name + " extends " + type + sup + ";" +
+        String superClassSpec = (superClass==null)?"":superClass;
+        s.append("class " + name + " extends " + type + sup +
superClassSpec + ";" +
             System.getProperty("line.separator") +
             System.getProperty("line.separator"));
         if (options != null) {
diff -u --ignore-space-change --ignore-blank-lines -r
antlr-2.7.2/antlr/preprocessor/preproc.g
antlr-2.7.2.new/antlr/preprocessor/preproc.g
--- antlr-2.7.2/antlr/preprocessor/preproc.g	2003-01-19
17:38:00.000000000 -0700
+++ antlr-2.7.2.new/antlr/preprocessor/preproc.g	2003-06-29
22:14:24.000000000 -0600
@@ -118,7 +118,7 @@
 	IndexedVector classOptions = null;
 }
 	:	( preamble:ACTION )?
-		"class" sub:ID "extends" sup:ID SEMI
+		"class" sub:ID "extends"  sup:ID (supClass:SUBRULE_BLOCK)? SEMI
 		{
 			gr = (Grammar)hier.getGrammar(sub.getText());
 			if ( gr!=null ) {
@@ -127,7 +127,7 @@
 				throw new SemanticException("redefinition of grammar
"+sub.getText(), file, sub.getLine(), sub.getColumn());
 			}
 			else {
-				gr = new Grammar(hier.getTool(), sub.getText(), sup.getText(),
rules);
+				gr = new Grammar(hier.getTool(), sub.getText(), sup.getText(),
rules, (supClass==null)?null:supClass.getText());
 				if ( preamble!=null ) {
 					gr.setPreambleAction(preamble.getText());
 				}



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From meissnersd at yahoo.com  Mon Jun 30 08:46:52 2003
From: meissnersd at yahoo.com (Karl Meissner)
Date: Mon Dec 20 16:15:45 2004
Subject: [antlr-interest] ambigous language...
In-Reply-To: <bdoj2m+hq5m@eGroups.com>
Message-ID: <20030630154652.99681.qmail@web40611.mail.yahoo.com>

I have a design problem that I was hoping you antlr gurus had suggestions about. 
I need to deal with an ambiguous grammar. 

I am trying to write a grammar to accept a language.  The language has been accepted by an
international body and the spec is set in stone...
So I am trying really hard to follow the spec

The problem is there an ambiguity the initialization of arrays and structures.

An array can be init with a common separated list
To init a three element array of type myArrayType named ar

VAR  // declare ar and init it
  ar : myArrayType := 1, 2, 3 ;
END_VAR

So far so good. 

Variable initialization for structs are also a comma separated list.   To init a struct that has
two floats called  real_val and imaginary_val

TYPE
   myStruct : STRUCT
	FLOAT real_val;
	FLOAT  imaginary_val; 
	END_STRUCT;
END_TYPE

VAR
  cplx  : myStruct (  
         real_val := 2.0 ,
         imaginary_val := 0.0 ) ;
END_VAR

will init the variable cplx of type myStruct

The design problem is that structs can contain simple primitive types (int, float, string) arrays,
user defined enumerated types,  other structs, etc.   
In this context  "," is ambiguous.  They really should have use ; to seperate the struct
initializations...


Suppose the user declares a struct with the following fields
TYPE 
  Weekday :  // enum type definition
ENUM  
Monday, Tuesday, Wednesday, Thursday, Friday 
END_ENUM; 

  problemType :  
STRUCT 
    x : Weekday;
    y : Weekday[3] ;  //an array
    z : Weekday;
 	 END_STRUCT

END_TYPE

Then an acceptable initialization can be

VAR
  d: problemType ( 
      x := Monday  ,   
      y := Tuesday, Wednesday, Thursday, , // <--comma
 z :=  Friday 					 
   ); 
END_VAR


I am trying to write a parse rule that will accept the struct initalization and make a nice AST
that I can use to 
emit code. 

The best I can come up with a something like this, which is unfortunately ambigious....

struct_declaration : 
    stuct_name : struct_type_name (
	s_list
    ) ;
;

// the comma make this nondeterministic
s_list :  s_element ( "," s_element )* ;

s_element : sname ":="  (  init_lookahead ) ;


init_lookahead : 
	( ar_list ) => ar_list | 
	( primitive_literal ) primitive_literal  
;


sname : SYMBOL ; 

ar_list : primitive_literal ( "," primitive_literal )* ; 


Any ideas how to express this cleanly with antlr?



__________________________________
Do you Yahoo!?
SBC Yahoo! DSL - Now only $29.95 per month!
http://sbc.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at cs.usfca.edu  Mon Jun 30 11:21:26 2003
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:15:45 2004
Subject: [antlr-interest] lookahead using multiple lexers is not possible to simulate in ANTLR?
In-Reply-To: <20030628125128.95102.qmail@web14609.mail.yahoo.com>
Message-ID: <A94DAA68-AB27-11D7-A859-000393BB647E@cs.usfca.edu>

You might be able to use token streams for this.  There is a 
TokenRetryException that you can throw that makes one of the 
TOkenStream objects retry (after perhaps you've switched lexers).  
Loook at the javadoc parsing examples.

Ter

On Saturday, June 28, 2003, at 05:51  AM, Andrei Timisescu wrote:

> I have multiple lexeres and would like to look ahead a token with one 
> lexer, and if it is not the token I expect, try another lexer. 
> Something like this is not?possible in ANTLR I see:
> ?
> host
> ???: {selector->push("hostnameLexer");}? HOSTNAME
> ?? | {selector->push("ipAddressLexer");}? ADDRESS
> ?? ;
> ?
> ANTLR gets the first token (even if I only look ahead: LA(1)) using 
> current parser and consumes the characteres from the input stream.
> ?
> Is it possible to simulate someting like the above in ANTLR?
> ?
> ?
> ?
> ?
> ?
> ?
>
>
>
<image.tiff>
>
> Do you Yahoo!?
> SBC Yahoo! DSL - Now only $29.95 per month!
> Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service.
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator, http://www.antlr.org
Co-founder, http://www.knowspam.net enjoy email again!
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Professor Comp. Sci., University of San Francisco




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


